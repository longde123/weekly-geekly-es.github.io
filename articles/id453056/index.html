<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍💼 🐢 📆 Membuat prototipe game seluler, mulai dari mana, dan bagaimana melakukannya. Bagian 1 📃 👩‍👩‍👧‍👧 ⬆️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kebetulan saya sering membuat prototipe (baik untuk pekerjaan maupun proyek pribadi) 
 dan saya ingin berbagi pengalaman. Saya ingin menulis artikel y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat prototipe game seluler, mulai dari mana, dan bagaimana melakukannya. Bagian 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453056/">  Kebetulan saya sering membuat prototipe (baik untuk pekerjaan maupun proyek pribadi) <br>  dan saya ingin berbagi pengalaman.  Saya ingin menulis artikel yang akan menarik untuk dibaca sendiri, dan pertama-tama saya bertanya-tanya apa yang dipandu oleh seseorang ketika dia membuat keputusan ini atau itu dalam pelaksanaan proyek, bagaimana dia memulai proyek, sering kali paling sulit untuk memulai. <br><br>  Contoh baru yang ingin saya pertimbangkan bersama Anda adalah konsep teka-teki berbasis fisika kasual.  <i>Kadang-kadang saya akan menyebutkan hal-hal yang sangat jelas untuk memperluas topik untuk pemula.</i> <br><br><h3>  Ide terlihat seperti ini </h3><br><img src="https://habrastorage.org/webt/ll/_-/mh/ll_-mhzvvzuhmrptbuhnsjt9up8.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 3</a> <br><a name="habracut"></a><br>  Kami mengatur berbagai pengubah di lapangan bermain, yang mengubah arah roket, menarik, mempercepat, mengusir, dan sebagainya.  Tugasnya adalah untuk membuka jalan di antara bintang-bintang ke planet berikutnya yang kita butuhkan.  Menang dianggap setelah mendarat / menyentuh jejak planet ini.  Lapangan bermain vertikal, beberapa layar naik, ada asumsi bahwa lintasan dapat menempati lantai layar kiri / kanan.  Kalah - jika Anda melewatkan planet tujuan, bertabrakan dengan planet lain, terbang jauh di luar zona. <br><br>  Dan saya harap kita semua mengerti bahwa sebelum memasuki pengembangan dan mengimplementasikan rencana kami, pertama-tama kita harus membuat prototipe - produk yang sangat kasar dan cepat yang akan memungkinkan Anda untuk dengan cepat mencoba mekanika dasar dan mendapatkan gagasan tentang gameplay.  Untuk apa prototipe dibuat?  Proses permainan dalam kepala kita dan dalam praktiknya adalah hal-hal yang sangat berbeda, yang tampaknya keren bagi kita, bagi orang lain itu akan menjadi horor, ditambah sering kali ada momen kontroversial dalam proyek - manajemen, aturan permainan, dinamika permainan, dll.  dan sebagainya.  Akan sangat bodoh untuk melewati tahap prototipe, bekerja melalui arsitektur, memberikan grafik, menyesuaikan level, dan akhirnya mengetahui bahwa permainan itu omong kosong.  Dari kehidupan - dalam satu permainan ada mini-game, sekitar 10 buah, setelah membuat prototipe ternyata mereka sangat membosankan, setengah dibuang, setengah lagi diulang. <br><br>  Kiat - selain mekanika dasar, pisahkan tempat kontroversial, tuliskan harapan spesifik dari prototipe.  Ini dilakukan untuk memuat ulang pada saat-saat sulit.  Sebagai contoh, salah satu tugas yang dihadapi prototipe ini adalah bagaimana nyaman dan dapat dimengerti bahwa lapangan bermain terdiri dari beberapa layar dan mereka harus terluka.  Itu perlu untuk mengimplementasikan rencana A - svayp.  Plan B - kemampuan untuk memperbesar lapangan bermain (jika perlu).  Ada juga beberapa opsi untuk pengubah.  Gagasan pertama terlihat di tangkapan layar - kami memaparkan pengubah dan arah pengaruhnya.  Akibatnya, pengubah diganti hanya dengan bola yang mengubah arah roket ketika mereka menyentuh bola.  Kami memutuskan bahwa ini akan lebih santai, tanpa lintasan, dll. <br><br>  <b>Fungsi umum yang kami terapkan:</b> <br><br><ol><li>  Anda dapat mengatur lintasan awal roket, dengan tingkat penyimpangan dari tegak lurus terbatas (roket tidak dapat diputar ke samping lebih dari satu derajat) </li><li>  Seharusnya ada tombol start, di mana kita mengirim roket di jalan </li><li>  Menggulir layar saat menempatkan pengubah (untuk memulai) </li><li>  Gerakan kamera di belakang pemain (setelah start) </li><li>  Panel antarmuka dengan mana pengubah drag dan drop akan diimplementasikan di lapangan </li><li>  Prototipe harus memiliki dua pengubah - tolakan dan akselerasi </li><li>  Harus ada planet ketika Anda menyentuh yang Anda mati </li><li>  Pasti ada planet saat Anda menyentuh dan menang </li></ol><br><h3>  Arsitektur </h3><br>  Poin yang sangat penting, dalam pengembangan besar secara umum diterima bahwa prototipe ditulis mengerikan karena akan lebih cepat, maka proyek tersebut ditulis dari awal.  Dalam kenyataan pahit banyak proyek, kaki tumbuh dari prototipe, yang buruk untuk pengembangan besar - arsitektur kurva, kode warisan, utang teknis, waktu ekstra untuk refactoring.  Nah, dan perkembangan indie secara keseluruhan lancar mengalir dari prototipe ke beta.  Mengapa saya? Sangat penting untuk meletakkan arsitektur bahkan menjadi prototipe, bahkan jika itu primitif, sehingga Anda tidak menangis nanti, atau memerah di depan rekan kerja. <br><br>  Sebelum memulai, kami selalu mengulangi - SOLID, KISS, DRY, YAGNI.  Bahkan programmer berpengalaman melupakan Kiss dan Yagni). <br><br>  <b>Arsitektur dasar apa yang saya gunakan?</b> <br><br>  Ada gameobject GameController kosong di tempat kejadian dengan tag yang sesuai, komponen / mono-sepeda tergantung di atasnya, lebih baik untuk membuatnya menjadi cetakan, kemudian tambahkan komponen yang diperlukan ke cetakan: <br><br><ol><li>  GameController - (bertanggung jawab untuk keadaan permainan, langsung ke logika (menang, kalah, berapa banyak nyawa, dll) </li><li>  InputController - semua yang berhubungan dengan manajemen pemain, pelacakan tachi, klik, yang mengklik, mengontrol status, dll. </li><li>  TransformManager - dalam gim Anda seringkali perlu tahu siapa berada di mana, berbagai data terkait dengan posisi pemain / musuh.  Misalnya, jika kita terbang melewati planet, maka pemain dikalahkan, pengontrol permainan bertanggung jawab untuk ini, tetapi dia harus tahu posisi pemain dari mana.  Manajer transformasi adalah esensi yang tahu tentang berbagai hal </li><li>  AudioController - ini jelas, ini tentang suara </li><li>  InterfacesController - dan ini jelas, ini tentang UI </li></ol><br>  Gambaran keseluruhan muncul - untuk setiap tugas yang dapat dimengerti, Anda memiliki controller / entitas Anda sendiri yang memecahkan masalah ini, ini akan membantu untuk menghindari objek godlayk, ini memberi Anda gambaran di mana harus menggali, dari pengontrol yang kami kirim data, kami selalu dapat mengubah implementasi menerima data.  Bidang publik tidak diizinkan, kami memberikan data hanya melalui properti / metode publik.  Kami menghitung / mengubah data secara lokal. <br><br>  Kadang-kadang terjadi bahwa GameController meningkat, karena berbagai logika dan perhitungan tertentu.  Jika kita perlu memproses data - untuk ini lebih baik membuat kelas GameControllerModel yang terpisah dan melakukannya di sana. <br><br><h3>  Dan kode dimulai </h3><br><div class="spoiler">  <b class="spoiler_title">Kelas dasar untuk roket</b> <div class="spoiler_text"><pre><code class="java hljs">using GlobalEventAggregator; using UnityEngine; using UnityEngine.Assertions; namespace PlayerRocket { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> RocketState { WAITFORSTART = <span class="hljs-number"><span class="hljs-number">0</span></span>, MOVE = <span class="hljs-number"><span class="hljs-number">1</span></span>, STOP = <span class="hljs-number"><span class="hljs-number">2</span></span>, COMPLETESTOP = <span class="hljs-number"><span class="hljs-number">3</span></span>, } [RequireComponent(typeof(Rigidbody))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerRocketBase</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonoBehaviour</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span><span class="hljs-class"> </span></span>{ [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketConfig config; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Rigidbody rigidbody; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> InputController inputController; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketHolder rocketHolder; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketState rocketState; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Transform Transform =&gt; transform; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Rigidbody RigidbodyForForce =&gt; rigidbody; RocketState IPlayerHelper.RocketState =&gt; rocketState; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ForceModel&lt;IUseForces&gt; forceModel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> virtual </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Injections(); EventAggregator.AddListener&lt;ButtonStartPressed&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, StartEventReact); EventAggregator.AddListener&lt;EndGameEvent&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, EndGameReact); EventAggregator.AddListener&lt;CollideWithPlanetEvent&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, DestroyRocket); rigidbody = GetComponent&lt;Rigidbody&gt;(); Assert.IsNotNull(rigidbody, <span class="hljs-string"><span class="hljs-string">"    "</span></span> + gameObject.name); forceModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ForceModel&lt;IUseForces&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> virtual </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Injections(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyRocket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CollideWithPlanetEvent obj)</span></span></span><span class="hljs-function"> </span></span>{ Destroy(gameObject); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EndGameReact</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EndGameEvent obj)</span></span></span><span class="hljs-function"> </span></span>{ Debug.Log(<span class="hljs-string"><span class="hljs-string">"     "</span></span>); rocketState = RocketState.STOP; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Injections</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ EventAggregator.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectEvent&lt;InputController&gt; { inject = (InputController obj) =&gt; inputController = obj}); EventAggregator.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectEvent&lt;RocketHolder&gt; { inject = (RocketHolder holder) =&gt; rocketHolder = holder }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartEventReact</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ButtonStartPressed buttonStartPressed)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span><span class="hljs-class"> </span></span>{ Transform Transform { get; } RocketState RocketState { get; } } }</code> </pre> <br></div></div><br>  <b>Mari kita pergi</b> ke kelas: <br><br><pre> <code class="java hljs"> [RequireComponent(typeof(Rigidbody))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerRocketBase</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonoBehaviour</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span></span></code> </pre> <br>  Pertama, mengapa kelas itu abstrak?  Kita tidak tahu jenis roket apa yang akan kita miliki, bagaimana mereka akan bergerak, bagaimana mereka akan dianimasikan, fitur gameplay apa yang akan tersedia (misalnya, kemungkinan roket memantul ke samping).  Oleh karena itu, kami membuat abstrak kelas dasar, meletakkan data standar di sana, dan meletakkan metode abstrak, yang implementasinya untuk rudal tertentu dapat bervariasi. <br><br>  Dapat juga dilihat bahwa kelas sudah memiliki implementasi antarmuka dan atribut yang tergantung pada gameplay komponen yang diinginkan tanpa yang roket bukan roket. <br><br><pre> <code class="java hljs">[SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketConfig config;</code> </pre> <br>  Atribut ini memberi tahu kita bahwa inspektur memiliki bidang serializable tempat objek dijejalkan ke dalam, dalam sebagian besar pelajaran, termasuk Persatuan, bidang ini dibuat untuk publik, jika Anda adalah pengembang indie, jangan lakukan itu.  Gunakan bidang pribadi dan atribut ini.  Di sini saya ingin membahas sedikit tentang apa kelas ini dan apa fungsinya. <br><br><div class="spoiler">  <b class="spoiler_title">Konfigurasi roket</b> <div class="spoiler_text"><pre> <code class="java hljs">using UnityEngine; namespace PlayerRocket { [CreateAssetMenu(fileName = <span class="hljs-string"><span class="hljs-string">"RocketConfig"</span></span>, menuName = <span class="hljs-string"><span class="hljs-string">"Configs/RocketConfigs"</span></span>, order = <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketConfig</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScriptableObject</span></span></span><span class="hljs-class"> </span></span>{ [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> fuel; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Speed =&gt; speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Fuel =&gt; fuel; } }</code> </pre> <br></div></div><br>  Ini adalah ScriptableObject yang menyimpan pengaturan roket.  Ini membutuhkan kumpulan data yang dibutuhkan oleh perancang game - di luar kelas.  Dengan demikian, desainer game tidak perlu dipusingkan dan mengatur proyek game tertentu dengan roket tertentu, mereka hanya dapat memperbaiki konfigurasi ini, yang disimpan dalam aset / file terpisah.  Mereka dapat mengkonfigurasi konfigurasi runtime dan itu akan disimpan, itu juga mungkin jika akan mungkin untuk membeli skin yang berbeda untuk roket, dan parameternya sama - konfigurasi hanya mengembara ke mana Anda perlu.  Pendekatan ini berkembang dengan baik - Anda dapat menambahkan data apa pun, menulis editor khusus, dll. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ForceModel&lt;IUseForces&gt; forceModel;</code> </pre> <br>  Saya juga ingin memikirkan hal ini, ini adalah kelas generik untuk menerapkan pengubah ke suatu objek. <br><br><div class="spoiler">  <b class="spoiler_title">Forcemodel</b> <div class="spoiler_text"><pre> <code class="java hljs">using System.Collections.Generic; using System.Linq; using UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> TypeOfForce { Push = <span class="hljs-number"><span class="hljs-number">0</span></span>, AddSpeed = <span class="hljs-number"><span class="hljs-number">1</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForceModel</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class"> </span></span>{ readonly <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T forceUser; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;SpaceForces&gt; forces = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;SpaceForces&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> bool IsHaveAdditionalForces; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ForceModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T user)</span></span></span><span class="hljs-function"> </span></span>{ GlobalEventAggregator.EventAggregator.AddListener&lt;SpaceForces&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ChangeModificatorsList); forceUser = user; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeModificatorsList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SpaceForces obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj.IsAdded) forces.Add(obj); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> forces.Remove(forces.FirstOrDefault(x =&gt; x.CenterOfObject == obj.CenterOfObject)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (forces.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) IsHaveAdditionalForces = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> IsHaveAdditionalForces = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddModificator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsHaveAdditionalForces) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; foreach (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f in forces) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (f.TypeOfForce) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TypeOfForce.Push: AddDirectionForce(f); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TypeOfForce.AddSpeed: forceUser.RigidbodyForForce.AddRelativeForce(Vector3.up*f.Force); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddDirectionForce</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SpaceForces spaceForces)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Debug.Log(""); //var t = AngleDir(forceUser.TransformForForce.position, spaceForces.CenterOfObject); forceUser.RigidbodyForForce.AddForce(Push(spaceForces)); } private Vector3 Push(SpaceForces spaceForces) { var dist = Vector2.Distance(forceUser.Transform.position, spaceForces.CenterOfObject); var coeff = 1 - (spaceForces.ColliderBound / dist); if (forceUser.Transform.position.x &gt; spaceForces.CenterOfObject.x) return (Vector3.right * spaceForces.Force) * coeff; else return (-Vector3.right * spaceForces.Force) * coeff; } public static float AngleDir(Vector2 A, Vector2 B) { return -Ax * By + Ay * Bx; } } public interface IUseForces { Transform Transform { get; } Rigidbody RigidbodyForForce { get; } } public struct SpaceForces { public TypeOfForce TypeOfForce; public Vector3 CenterOfObject; public Vector3 Direction; public float Force; public float ColliderBound; public bool IsAdded; }</span></span></code> </pre> <br></div></div><br>  Inilah yang saya tulis di atas - jika Anda perlu melakukan semacam logika komputasi / kompleks, letakkan di kelas yang terpisah.  Ada logika yang sangat sederhana - ada daftar kekuatan yang berlaku untuk roket.  Kami mengulangi daftar, melihat kekuatan apa itu dan menerapkan metode tertentu.  Daftar ini diperbarui oleh peristiwa, peristiwa terjadi ketika memasuki / keluar di bidang pengubah.  Sistem ini cukup fleksibel, pertama-tama ia bekerja dengan antarmuka (hi enkapsulasi), pengguna pengubah tidak hanya roket / pemain.  Kedua, generik - Anda dapat memperluas IUseForces dengan keturunan yang berbeda untuk kebutuhan / percobaan, dan masih menggunakan kelas / model ini. <br><br>  Cukup untuk bagian pertama.  Pada bagian kedua, kita akan mempertimbangkan sistem peristiwa, injeksi ketergantungan, pengontrol input, kelas roket itu sendiri dan mencoba untuk meluncurkannya. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id453056/">https://habr.com/ru/post/id453056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id453034/index.html">Ayah membuat prostesis bionik untuk putranya menggunakan printer 3D dan X-Box</a></li>
<li><a href="../id453038/index.html">Software Defined Radio - bagaimana cara kerjanya? Bagian 4</a></li>
<li><a href="../id453042/index.html">Windows Terminal Build 2019 FAQ</a></li>
<li><a href="../id453044/index.html">Langkah yang telah lama ditunggu-tunggu menuju dokumen yang terstruktur rumit (+ video)</a></li>
<li><a href="../id453046/index.html">Menggunakan semua fitur indeks di PostgreSQL</a></li>
<li><a href="../id453058/index.html">AI belajar membuat video dari satu bingkai. Lukisan lama sekarang bisa dibuat hidup</a></li>
<li><a href="../id453064/index.html">Membahayakan untuk kebaikan: Sistem kekebalan tubuh Lamprey dalam perang melawan kanker otak manusia</a></li>
<li><a href="../id453066/index.html">UI tipografi - cara baru untuk mengembangkan antarmuka pengguna</a></li>
<li><a href="../id453068/index.html">Subjektivitas</a></li>
<li><a href="../id453070/index.html">L - logika</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>