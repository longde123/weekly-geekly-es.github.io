<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘â€ğŸ—¨ ğŸ“½ï¸ ğŸ•µï¸ å¦‚ä½•å»ºç«‹å’Œå»ºç«‹ ğŸ‚ ğŸ¤² ğŸš³</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="èƒŒæ™¯çŸ¥è¯† 


 åœ¨Javaè¯­è¨€å¼€å‘çš„è®¸å¤šåœ°æ–¹é‡åˆ°äº†å¿…é¡»éªŒè¯å€¼çš„æƒ…å†µä¹‹åï¼Œå¾ˆæ˜æ˜¾ï¼Œæœ‰å¿…è¦ä»¥æŸç§æ–¹å¼è§£å†³æ­¤é—®é¢˜ã€‚ ä¸ºæ­¤ï¼Œè®¾ç½®äº†ä»¥ä¸‹ä»»åŠ¡ï¼š 
 å¼€å‘ä¸€ä¸ªå¯å¯ç”¨ä»¥ä¸‹åŠŸèƒ½çš„åº“ï¼š 


- éªŒè¯æ•°æ®ç±»å‹ ; 
- è®¾ç½®é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯æ— æ•ˆçš„å­—æ®µæˆ–å…ƒç´ ï¼› 
- åˆ é™¤å¯¹è±¡æˆ–æ•°ç»„çš„æ— æ•ˆéƒ¨åˆ† ï¼› 
- æ”¶åˆ°é”™è¯¯è®¯æ¯ 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•å»ºç«‹å’Œå»ºç«‹</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429916/"><h2 id="predystoriya"> èƒŒæ™¯çŸ¥è¯† </h2><br><p> åœ¨Javaè¯­è¨€å¼€å‘çš„è®¸å¤šåœ°æ–¹é‡åˆ°äº†å¿…é¡»éªŒè¯å€¼çš„æƒ…å†µä¹‹åï¼Œå¾ˆæ˜æ˜¾ï¼Œæœ‰å¿…è¦ä»¥æŸç§æ–¹å¼è§£å†³æ­¤é—®é¢˜ã€‚ ä¸ºæ­¤ï¼Œè®¾ç½®äº†ä»¥ä¸‹ä»»åŠ¡ï¼š <br> å¼€å‘ä¸€ä¸ªå¯å¯ç”¨ä»¥ä¸‹åŠŸèƒ½çš„åº“ï¼š </p><br><ul><li> éªŒè¯<strong>æ•°æ®ç±»å‹</strong> ; </li><li> è®¾ç½®<strong>é»˜è®¤å€¼ï¼Œ</strong>è€Œä¸æ˜¯æ— æ•ˆçš„å­—æ®µæˆ–å…ƒç´ ï¼› </li><li>  <strong>åˆ é™¤</strong>å¯¹è±¡æˆ–æ•°ç»„çš„<strong>æ— æ•ˆéƒ¨åˆ†</strong> ï¼› </li><li> æ”¶åˆ°<strong>é”™è¯¯è®¯æ¯</strong> </li></ul><br><p> å…¶åŸºç¡€å°†æ˜¯ï¼š </p><br><ul><li> æ˜“å­¦ </li><li> æ‰€æ¥æ”¶ä»£ç çš„å¯è¯»æ€§ã€‚ </li><li> æ˜“äºä¿®æ”¹ä»£ç  </li></ul><br><p> ä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼Œå·²ç»å¼€å‘äº†ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="å››é‡å¥">å››æ–¹</a>éªŒè¯åº“ã€‚ </p><a name="habracut"></a><br><h2 id="osnovnye-kirpichi-validacii"> åŸºæœ¬éªŒè¯æ¨¡å— </h2><br><p> è¢«è®¾è®¡ä¸ºé€‚ç”¨äºå„ç§ä»»åŠ¡çš„å¤§å¤šæ•°ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯æœ€ç®€å•çš„<strong>å…ƒç´ </strong> ï¼šåŠ¨ä½œï¼Œæ•°æ®å’Œç®—æ³•ã€‚ ä»¥åŠå®ƒä»¬çš„<strong>æ„æˆ</strong>æ–¹æ³•-ä¸ºäº†ä»æ›´ç®€å•çš„æœ€ç®€å•çš„å…ƒç´ ä¸­ç»„è£…ä¸€äº›ä¸œè¥¿ï¼Œä»¥è§£å†³æ›´å¤æ‚çš„é—®é¢˜ã€‚ </p><br><h3 id="validator"> éªŒè¯è€… </h3><br><p>å››æ–¹åº“åŸºäº<strong>éªŒè¯å™¨</strong>çš„æ¦‚å¿µã€‚ è¯¥åº“ä¸­çš„éªŒè¯å™¨å…·æœ‰ä»¥ä¸‹å½¢å¼çš„åŠŸèƒ½ </p><br><pre><code class="plaintext hljs">function validator( value: any, { key: string|int, parent: any }, { key: string|int, parent: any }, ... ): boolean</code> </pre> <br><p> æ­¤å®šä¹‰ä¸­æœ‰å‡ ä»¶äº‹åº”è¯¥æ›´è¯¦ç»†åœ°æè¿°ï¼š </p><br><p>  <strong><code>function(...): boolean</code></strong> -è¡¨ç¤ºéªŒè¯å™¨-è®¡ç®—éªŒè¯ç»“æœï¼ŒéªŒè¯ç»“æœä¸ºå¸ƒå°”å€¼<strong>-true</strong>æˆ–<strong>false</strong> ï¼Œåˆ†åˆ«<strong>æœ‰æ•ˆ</strong>æˆ–<strong>æ— æ•ˆ</strong> </p><br><p>  <strong><code>value: any</code></strong> any-è¡¨ç¤ºéªŒè¯å™¨-è®¡ç®—éªŒè¯<strong>å€¼</strong>çš„ç»“æœï¼Œè¯¥<strong>å€¼</strong>å¯ä»¥æ˜¯ä»»ä½•javascriptå€¼ã€‚ éªŒè¯å™¨å°†<strong>éªŒè¯åçš„å€¼</strong>åˆ†é…ç»™æœ‰æ•ˆæˆ–æ— æ•ˆã€‚ </p><br><p>  <strong><code>{ key: string|int, parent: any }, ...</code></strong>è¡¨ç¤ºéªŒè¯å€¼å¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå…·ä½“å–å†³äºå€¼åµŒå¥—çš„çº§åˆ«ã€‚ è®©æˆ‘ä»¬ç”¨ä¾‹å­å±•ç¤ºä¸€ä¸‹ </p><br><p>  <strong>æ²¡æœ‰ä¸Šä¸‹æ–‡çš„</strong>ç¤ºä¾‹å€¼ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-comment"><span class="hljs-comment">//         . //         : const isValueValid = validator(4)</span></span></code> </pre> <br><p>  <b>æ•°ç»„ä¸Šä¸‹æ–‡ä¸­çš„</b>ç¤ºä¾‹å€¼ </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  0 1 2 3 4 const arr = [1, 2, 3, value, 5] //       (k): 3 //      : [1, 2, 3, value, 5] //    value -      const isValueValid = validator(4, { key: 3, parent: [1,2,3,4,5] })</span></span></code> </pre> <br><p>  <b>å¯¹è±¡ä¸Šä¸‹æ–‡ä¸­çš„</b>ç¤ºä¾‹å€¼ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: value, <span class="hljs-attr"><span class="hljs-attr">d</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span> } <span class="hljs-comment"><span class="hljs-comment">//        'c' //       : { a: 1, b: 2, c: 4, d: 8 } //    value -   //   : const isValueValid = validator(4, { key: 'c', parent: { a: 1, b: 2, c: 4, d: 8 } })</span></span></code> </pre> <br><p> ç”±äºå¯¹è±¡ä¸­çš„ç»“æ„å¯ä»¥å…·æœ‰æ›´å¤§çš„åµŒå¥—ï¼Œå› æ­¤è°ˆè®º<b>å„ç§ä¸Šä¸‹æ–‡</b>æ˜¯æœ‰æ„ä¹‰<b>çš„</b> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> arrOfObj = [{ <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: value, <span class="hljs-attr"><span class="hljs-attr">d</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span> }, <span class="hljs-comment"><span class="hljs-comment">// ... ] //   c     'c' //    : { a: 1, b: 2, c: 4, d: 8 } //        arrOfObj, //       0. //    value -      const isValueValid = validator( 4, { key: 'c', parent: { a: 1, b: 2, c: 4, d: 8 } } { key: 0, parent: [{ a: 1, b: 2, c: 4, d: 8 }] } )</span></span></code> </pre> <br><p> ä¾æ­¤ç±»æ¨ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">å…³äºæ•°ç»„æ–¹æ³•çš„ç›¸ä¼¼æ€§</b> <div class="spoiler_text"><p> éªŒè¯å™¨çš„æ­¤å®šä¹‰åº”ä½¿æ‚¨æƒ³èµ·ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ•°ç»„æ–¹æ³•çš„å‡½æ•°çš„å®šä¹‰ï¼Œä¾‹å¦‚ï¼š <strong>mapï¼Œfilterï¼Œsomeï¼Œevery</strong>ç­‰ã€‚ </p><br><ul><li> è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<strong>æ•°ç»„å…ƒç´ ã€‚</strong> </li><li> ç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>å…ƒç´ </strong>çš„<strong>ç´¢å¼•ã€‚</strong> </li><li> ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯<strong>æ•°ç»„æœ¬èº«ã€‚</strong> </li></ul><br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒéªŒè¯å™¨æ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„å‡½æ•°-å®ƒä¸ä»…è·å–æ•°ç»„å’Œæ•°ç»„ä¸­å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸”è¿˜è·å–å…¶çˆ¶çº§å’Œçˆ¶çº§ä¸­æ•°ç»„çš„ç´¢å¼•ï¼Œä¾æ­¤ç±»æ¨ã€‚ </p></div></div><br><h3 id="chto-nam-stoit-dom-postroit"> æˆ‘ä»¬åº”è¯¥å»ºä»€ä¹ˆæˆ¿å­ï¼Ÿ </h3><br><p> ä¸Šè¿°ç –å¤´åœ¨javascriptæ‹æ–<em>â€œæµ·æ»©â€</em>ä¸Šçš„å…¶ä»–<em>â€œçŸ³å¤´è§£å†³æ–¹æ¡ˆâ€</em>ä¸­å¹¶ä¸çªå‡ºã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬ä»å®ƒä»¬ä¸­æ„å»ºä¸€äº›æ›´è¿è´¯å’Œæœ‰è¶£çš„ä¸œè¥¿ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª<strong>æ„å›¾</strong> ã€‚ </p><br><h3 id="kak-postroit-neboskryob-validacii-obektov"> å¦‚ä½•å»ºç«‹ä¸€ä¸ªå¯¹è±¡éªŒè¯çš„æ‘©å¤©å¤§æ¥¼ï¼Ÿ </h3><br><p> åŒæ„ï¼Œä»¥ä½¿éªŒè¯æè¿°ä¸å¯¹è±¡æè¿°åŒ¹é…çš„æ–¹å¼æ¥éªŒè¯å¯¹è±¡å°†å¾ˆæ–¹ä¾¿ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<strong>éªŒè¯å™¨</strong>çš„<strong>å¯¹è±¡ç»„æˆ</strong> ã€‚ çœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    quartet const quartet = require('quartet') //    (v -  validator) const v = quartet() //      , //     const objectSchema = { a: a =&gt; typeof a ==='string', //   'string' b: b =&gt; typeof b === 'number', //   'number' // ... } const compositeObjValidator = v(objectSchema) const obj = { a: 'some text', b: 2 } const isObjValid = compositeObjValidator(obj) console.log(isObjValid) // =&gt; true</span></span></code> </pre> <br><p> å¦‚æ‚¨æ‰€è§ï¼Œä»ä¸ºç‰¹å®šå­—æ®µå®šä¹‰çš„ä¸åŒéªŒè¯å™¨å—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»„è£…ä¸€ä¸ªå¯¹è±¡éªŒè¯å™¨-ä¸€äº›ä»ç„¶å¾ˆå°çš„â€œå°å»ºç­‘ç‰©â€ï¼Œä½†æ˜¯æ¯”æ²¡æœ‰å®ƒæ›´å¥½ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨éªŒè¯å™¨<code>v</code>çš„ä½œæ›²è€…ã€‚  <strong>æ¯æ¬¡åœ¨éªŒè¯ç¨‹åºçš„ä½ç½®é‡åˆ°å¯¹è±¡æ–‡å­—<code>v</code>æ—¶ï¼Œä»–éƒ½ä¼šå°†å…¶è§†ä¸ºå¯¹è±¡ç»„æˆï¼Œå¹¶æ ¹æ®å…¶å­—æ®µå°†å…¶è½¬æ¢ä¸ºå¯¹è±¡éªŒè¯ç¨‹åºã€‚</strong> </p><br><p> æœ‰æ—¶æˆ‘ä»¬<strong>æ— æ³•æè¿°æ‰€æœ‰é¢†åŸŸ</strong> ã€‚ ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ˜¯æ•°æ®å­—å…¸æ—¶ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> quartet = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'quartet'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> v = quartet() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isStringValidator = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> name === <span class="hljs-string"><span class="hljs-string">'string'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> keyValueValidator = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value, { key }</span></span></span><span class="hljs-function">) =&gt;</span></span> value.length === <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; key.length === <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dictionarySchema= { <span class="hljs-attr"><span class="hljs-attr">dictionaryName</span></span>: isStringValidator, ...v.rest(keyValueValidator) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> compositeObjValidator = v(dictionarySchema) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">dictionaryName</span></span>: <span class="hljs-string"><span class="hljs-string">'next letter'</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-string"><span class="hljs-string">'c'</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: <span class="hljs-string"><span class="hljs-string">'d'</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isObjValid = compositeObjValidator(obj) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(isObjValid) <span class="hljs-comment"><span class="hljs-comment">// =&gt; true const obj2 = { dictionaryName: 'next letter', b: 'a', a: 'invalid value', notValidKey: 'a' } const isObj2Valid = compositeObjValidator(obj2) console.log(isObj2Valid) // =&gt; false</span></span></code> </pre> <br><h3 id="kak-pereispolzovat-stroitelnye-resheniya"> å¦‚ä½•é‡ç”¨æ–½å·¥è§£å†³æ–¹æ¡ˆï¼Ÿ </h3><br><p> å¦‚ä¸Šæ‰€è¿°ï¼Œæœ‰å¿…è¦é‡ç”¨ç®€å•çš„éªŒè¯å™¨ã€‚ åœ¨è¿™äº›ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä¸å¾—ä¸ä½¿ç”¨â€œå­—ç¬¦ä¸²ç±»å‹éªŒè¯å™¨â€ä¸¤æ¬¡ã€‚ </p><br><p> ä¸ºäº†ç¼©çŸ­è®°å½•å¹¶æé«˜å…¶å¯è¯»æ€§ï¼Œå››æ–¹åº“ä½¿ç”¨éªŒè¯ç¨‹åºçš„å­—ç¬¦ä¸²åŒä¹‰è¯ã€‚  <strong>æ¯å½“éªŒè¯è€…çš„ä½œæ›²è€…åœ¨éªŒè¯è€…åº”æœ‰çš„ä½ç½®é‡åˆ°å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒéƒ½ä¼šåœ¨å­—å…¸ä¸­æœç´¢å…¶éªŒè¯è€…å¹¶ä½¿ç”¨å®ƒ</strong> ã€‚ </p><br><p> é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€å¸¸è§çš„éªŒè¯å™¨å·²åœ¨åº“ä¸­å®šä¹‰ã€‚ </p><br><p> è¯·è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š </p><br><pre> <code class="javascript hljs">v(<span class="hljs-string"><span class="hljs-string">'number'</span></span>)(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-comment"><span class="hljs-comment">// =&gt; true v('number')('1') // =&gt; false v('string')('1') // =&gt; true v('string')(null) // =&gt; false v('null')(null) // =&gt; true v('object')(null) // =&gt; true v('object!')(null) // =&gt; false // ...</span></span></code> </pre> <br><p> ä»¥åŠ<strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="æ–‡ä»¶èµ„æ–™">æ–‡æ¡£ä¸­</a></strong>æè¿°çš„è®¸å¤šå…¶ä»–é—®é¢˜ã€‚ </p><br><h3 id="kazhdoy-arke---svoy-vid-kirpichey"> æ¯ä¸ªæ‹±é—¨éƒ½æœ‰è‡ªå·±çš„ç –å¤´ç±»å‹ï¼Ÿ </h3><br><p> éªŒè¯ç¨‹åºçš„ç¼–å†™è€…ï¼ˆå‡½æ•°<code>v</code> ï¼‰ä¹Ÿæ˜¯éªŒè¯ç¨‹åºçš„å·¥å‚ã€‚ ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå®ƒåŒ…å«è®¸å¤šè¿”å›çš„æœ‰ç”¨æ–¹æ³• </p><br><ul><li> åŠŸèƒ½éªŒè¯å™¨ </li><li> ä½œæ›²å®¶å°†å…¶è§†ä¸ºåˆ›å»ºéªŒè¯ç¨‹åºçš„æ–¹æ¡ˆçš„å€¼ </li></ul><br><p> ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ•°ç»„éªŒè¯ï¼šé€šå¸¸ï¼Œå®ƒåŒ…æ‹¬æ£€æŸ¥æ•°ç»„çš„ç±»å‹å’Œæ£€æŸ¥å…¶æ‰€æœ‰å…ƒç´ ã€‚ æˆ‘ä»¬å°†<code>v.arrayOf(elementValidator)</code>ä½¿ç”¨<code>v.arrayOf(elementValidator)</code>æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œé‡‡ç”¨å¸¦æœ‰åç§°çš„ç‚¹æ•°ç»„ã€‚ </p><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = [ {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'A'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'B'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'C'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'D'</span></span>}, ]</code> </pre> <br><p> ç”±äºç‚¹æ•°ç»„æ˜¯å¯¹è±¡æ•°ç»„ï¼Œå› æ­¤ä½¿ç”¨å¯¹è±¡ç»„åˆæ¥éªŒè¯æ•°ç»„å…ƒç´ æ˜¯æœ‰æ„ä¹‰çš„ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> namedPointSchema = { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-string"><span class="hljs-string">'number'</span></span>, <span class="hljs-comment"><span class="hljs-comment">// number -       y: 'number', name: 'string' // string -       }</span></span></code> </pre> <br><p> ç°åœ¨ï¼Œä½¿ç”¨å·¥å‚æ–¹æ³•<code>v.arrayOf</code> ï¼Œä¸ºæ•´ä¸ªæ•°ç»„åˆ›å»ºä¸€ä¸ªéªŒè¯å™¨ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isArrayValid = v.arrayOf({ <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-string"><span class="hljs-string">'number'</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-string"><span class="hljs-string">'number'</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'string'</span></span> })</code> </pre> <br><p> è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªéªŒè¯å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š </p><br><pre> <code class="javascript hljs">isArrayValid(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">// =&gt; false isArrayValid(null) // =&gt; false isArrayValid([]) // =&gt; true isArrayValid([1, 2, 3]) // =&gt; false isArrayValid([ {x: 1, y: 1, name: 'A'}, {x: 2, y: 1, name: 'B'}, {x: -1, y: 2, name: 'C'}, {x: 1, y: 3, name: 'D'}, ]) // =&gt; true</span></span></code> </pre> <br><p> è¿™åªæ˜¯å·¥å‚æ–¹æ³•ä¹‹ä¸€ï¼Œæ¯ç§æ–¹æ³•åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="æ–‡ä»¶èµ„æ–™">æ–‡æ¡£ä¸­</a>éƒ½æœ‰æè¿°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="æ–‡ä»¶èµ„æ–™">ã€‚</a> </p><br><p> å¦‚ä¸Šæ‰€è¿°ï¼Œ <code>v.rest</code>ä¹Ÿæ˜¯ä¸€ç§å·¥å‚æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ç»„åˆï¼Œè¯¥å¯¹è±¡ç»„åˆæ£€æŸ¥æœªåœ¨å¯¹è±¡ç»„åˆä¸­æŒ‡å®šçš„æ‰€æœ‰å­—æ®µã€‚ è¿™æ„å‘³ç€å¯ä»¥ä½¿ç”¨<code>spread-operator</code>å°†å…¶åµŒå…¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡åˆæˆä¸­ã€‚ </p><br><p> è®©æˆ‘ä»¬ä»¥å…¶ä¸­çš„å‡ ä¸ªç¤ºä¾‹ä¸ºä¾‹ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    quartet const quartet = require('quartet') //    (v -  validator) const v = quartet() //   ,    const max = { name: 'Maxim', sex: 'male', age: 34, status: 'grandpa', friends: [ { name: 'Dima', friendDuration: '1 year'}, { name: 'Semen', friendDuration: '3 months'} ], workExperience: 2 } //  ,   "" , // ""  , ""   -  const nameSchema = v.and( 'not-empty', 'string', //   name =&gt; name[0].toUpperCase() === name[0] // - ) const maxSchema = { name: nameSchema, //       sex: v.enum('male', 'female'), //  -   . //       "" age: v.and('non-negative', 'safe-integer'), status: v.enum('grandpa', 'non-grandpa'), friends: v.arrayOf({ name: nameSchema, //      friendDuration: v.regex(/^[1-9]\d? (years?|months?)$/) }), workExperience: v.and('non-negative', 'safe-integer') } console.log(v(maxSchema)(max)) // =&gt; true</span></span></code> </pre> <br><h3 id="byt-ili-ne-byt"> æ˜¯è¿˜æ˜¯ä¸æ˜¯ï¼Ÿ </h3><br><p> æœ‰æ•ˆæ•°æ®ç»å¸¸é‡‡ç”¨å„ç§å½¢å¼ï¼Œä¾‹å¦‚ï¼š </p><br><ul><li>  <code>id</code>å¯ä»¥æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€‚ </li><li> æ ¹æ®å°ºå¯¸ï¼Œ <code>point</code>å¯¹è±¡å¯èƒ½åŒ…å«ä¹Ÿå¯èƒ½ä¸åŒ…å«æŸäº›åæ ‡ã€‚ </li><li> è¿˜æœ‰è®¸å¤šå…¶ä»–æƒ…å†µã€‚ </li></ul><br><p> ä¸ºäº†ç»„ç»‡å˜ä½“çš„éªŒè¯ï¼Œæä¾›äº†ä¸€ç§å•ç‹¬çš„ç»„æˆç±»å‹-å˜ä½“ç»„æˆã€‚ å®ƒç”±å¯èƒ½é€‰é¡¹çš„éªŒè¯å™¨æ•°ç»„è¡¨ç¤ºã€‚ å½“è‡³å°‘ä¸€ä¸ªéªŒè¯è€…æŠ¥å‘Šå¯¹è±¡çš„æœ‰æ•ˆæ€§æ—¶ï¼Œè¯¥å¯¹è±¡è¢«è§†ä¸ºæœ‰æ•ˆã€‚ </p><br><p> è€ƒè™‘ä¸€ä¸ªå¸¦æœ‰æ ‡è¯†ç¬¦éªŒè¯çš„ä¾‹å­ï¼š </p><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isValidId = v([ v.and(<span class="hljs-string"><span class="hljs-string">'not-empty'</span></span>, <span class="hljs-string"><span class="hljs-string">'string'</span></span>), <span class="hljs-comment"><span class="hljs-comment">//       v.and('positive', 'safe-integer') //    ]) isValidId('') // =&gt; false isValidId('asdba32bas321ab321adb321abds546ba98s7') // =&gt; true isValidId(0) // =&gt; false isValidId(1) // =&gt; true isValidId(1123124) // =&gt; true</span></span></code> </pre> <br><p> ç‚¹éªŒè¯ç¤ºä¾‹ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isPointValid = v([ { <span class="hljs-comment"><span class="hljs-comment">//    -    x  dimension: v.enum(1), x: 'number', // v.rest    false // ,    -  ...v.rest(() =&gt; false) }, //   -    { dimension: v.enum(2), x: 'number', y: 'number', ...v.rest(() =&gt; false) }, //   - x, y  z { dimension: v.enum(3), x: 'number', y: 'number', z: 'number', ...v.rest(() =&gt; false) }, ]) // ,    ,      ,     -  -    isPointValid(1) // =&gt; false isPointValid(null) // =&gt; false isPointValid({ dimension: 1, x: 2 }) // =&gt; true isPointValid({ dimension: 1, x: 2, y: 3 //   }) // =&gt; false isPointValid({ dimension: 2, x: 2, y: 3 }) // =&gt; true isPointValid({ dimension: 3, x: 2, y: 3, z: 4 }) // =&gt; true // ...</span></span></code> </pre> <br><p> å› æ­¤ï¼Œ <strong>æ¯å½“ä½œæ›²å®¶çœ‹åˆ°ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œä»–éƒ½ä¼šè®¤ä¸ºå®ƒæ˜¯æ­¤æ•°ç»„çš„éªŒè¯å™¨å…ƒç´ çš„ç»„æˆï¼Œè¿™æ ·å½“å…¶ä¸­ä¸€ä¸ªè®¤ä¸ºè¯¥å€¼æœ‰æ•ˆæ—¶ï¼ŒéªŒè¯çš„è®¡ç®—å°†åœæ­¢å¹¶ä¸”è¯¥å€¼å°†è¢«è§†ä¸ºæœ‰æ•ˆã€‚</strong> </p><br><p> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œä½œæ›²å®¶ä¸ä»…å°†éªŒè¯å™¨åŠŸèƒ½è§†ä¸ºéªŒè¯å™¨ï¼Œè€Œä¸”è¿˜å°†æ‰€æœ‰å¯èƒ½å¯¼è‡´éªŒè¯å™¨åŠŸèƒ½çš„äº‹ç‰©è§†ä¸ºã€‚ </p><br><table><thead><tr><th> éªŒè¯è€…ç±»å‹ </th><th> ä¾‹å­ </th><th> ä½œæ›²å®¶è®¤ä¸º </th></tr></thead><tbody><tr><td> éªŒè¯åŠŸèƒ½ </td><td> <code>x =&gt; typeof x === 'bigint'</code> </td> <td> åªæ˜¯è¦æ±‚äº†å¿…è¦çš„å€¼ </td></tr><tr><td> å¯¹è±¡ç»„æˆ </td><td> <code>{ a: 'number' }</code> </td> <td> æ ¹æ®æŒ‡å®šçš„å­—æ®µéªŒè¯å™¨ä¸ºå¯¹è±¡åˆ›å»ºéªŒè¯å™¨å‡½æ•° </td></tr><tr><td> å˜ä½“æˆåˆ† </td><td> <code>['number', 'string']</code> </td> <td> åˆ›å»ºä¸€ä¸ªéªŒè¯å™¨å‡½æ•°ä»¥ä½¿ç”¨è‡³å°‘ä¸€ä¸ªé€‰é¡¹æ¥éªŒè¯å€¼ </td></tr><tr><td> å·¥å‚æ–¹æ³•è°ƒç”¨ç»“æœ </td><td> <code>v.enum('male', 'female')</code> </td> <td> å¤§å¤šæ•°å·¥å‚æ–¹æ³•éƒ½è¿”å›éªŒè¯å‡½æ•°ï¼ˆ <code>v.rest</code> ï¼Œè¯¥å‡½æ•°è¿”å›å¯¹è±¡ç»„æˆï¼‰ï¼Œå› æ­¤å®ƒä»¬è¢«è§†ä¸ºå¸¸è§„éªŒè¯å‡½æ•° </td></tr></tbody></table><br><p> æ‰€æœ‰è¿™äº›éªŒè¯å™¨é€‰é¡¹éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”å¯ä»¥åœ¨éªŒè¯å™¨åº”åœ¨æ¨¡å¼ä¸­çš„ä»»ä½•ä½ç½®ä½¿ç”¨ã€‚ </p><br><p> ç»“æœï¼Œå·¥ä½œæ–¹æ¡ˆå§‹ç»ˆæ˜¯è¿™æ ·çš„ï¼š <code>v(schema)</code>è¿”å›éªŒè¯å‡½æ•°ã€‚ æ¥ä¸‹æ¥ï¼Œåœ¨ç‰¹å®šå€¼ä¸Šè°ƒç”¨æ­¤éªŒè¯å‡½æ•°ï¼š <br> <code>v(schema)(value[, ...parents])</code> </p> <br><h2 id="u-vas-avarii-na-stroyke-byli"> æ‚¨åœ¨æ–½å·¥ç°åœºæœ‰ä»»ä½•äº‹æ•…å—ï¼Ÿ </h2><br><p>  <em>-è¿˜æ²¡æœ‰</em> <br>  <em>-ä»–ä»¬ä¼šçš„ï¼</em> </p><br><p> ç¢°å·§æ•°æ®æ— æ•ˆï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿç¡®å®šæ— æ•ˆåŸå› ã€‚ </p><br><p> ä¸ºæ­¤ï¼Œå››æ–¹åº“æä¾›äº†ä¸€ç§<em>è§£é‡Š</em>æœºåˆ¶ã€‚ å®ƒåŒ…å«ä»¥ä¸‹äº‹å®ï¼šåœ¨éªŒè¯å™¨ï¼ˆæ— è®ºæ˜¯å†…éƒ¨éªŒè¯å™¨è¿˜æ˜¯å¤–éƒ¨éªŒè¯å™¨ï¼‰æ£€æµ‹åˆ°éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§æ—¶ï¼Œå¿…é¡»å‘é€<em>è¯´æ˜æ€§æ³¨é‡Š</em> ã€‚ </p><br><p> ä¸ºæ­¤ï¼Œ <code>v</code>äº†éªŒè¯è€…<code>v</code>çš„ä½œæ›²è€…çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚ å®ƒå¢åŠ äº†åœ¨æ•°æ®æ— æ•ˆçš„æƒ…å†µä¸‹å‘<code>v.explanation</code>æ•°ç»„å‘é€<em>è§£é‡Šæ€§æ³¨é‡Š</em>çš„<code>v.explanation</code> ã€‚ </p><br><p> ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬éªŒè¯ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶æƒ³æ‰¾å‡ºæ‰€æœ‰æ— æ•ˆå…ƒç´ çš„æ•°é‡åŠå…¶å€¼ï¼š </p><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">//   -     //   const getExplanation = (value, { key: index }) =&gt; ({ invalidValue: value, index }) // ,       . //         v.explanation //    const arrValidator = v.arrayOf( v( 'number', //   getExplanation //   "",   "" ) ) // ,     ""  //     ,     //         //   ,       const explainableArrValidator = v(arrValidator, 'this array is not valid') const arr = [1, 2, 3, 4, '5', '6', 7, '8'] explainableArrValidator(arr) // =&gt; false v.explanation // [ // { invalidValue: '5', index: 4 }, // { invalidValue: '6', index: 5 }, // { invalidValue: '8', index: 7 }, // 'this array is not valid' // ]</span></span></code> </pre> <br><p> å¦‚æ‚¨æ‰€è§ï¼Œè§£é‡Šçš„é€‰æ‹©å–å†³äºä»»åŠ¡ã€‚ æœ‰æ—¶ç”šè‡³æ²¡æœ‰å¿…è¦ã€‚ </p><br><p> æœ‰æ—¶æˆ‘ä»¬éœ€è¦å¯¹æ— æ•ˆå­—æ®µè¿›è¡Œå¤„ç†ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æ— æ•ˆå­—æ®µçš„åç§°ä½œä¸º<em>è§£é‡Š</em> ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> objSchema = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: v(<span class="hljs-string"><span class="hljs-string">'number'</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>), <span class="hljs-attr"><span class="hljs-attr">b</span></span>: v(<span class="hljs-string"><span class="hljs-string">'number'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>), <span class="hljs-attr"><span class="hljs-attr">c</span></span>: v(<span class="hljs-string"><span class="hljs-string">'string'</span></span>, <span class="hljs-string"><span class="hljs-string">'c'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isObjValid = v(objSchema) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> invalidObj = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> } isObjValid(invalidObj) <span class="hljs-comment"><span class="hljs-comment">// =&gt; false v.explanation // ['b', 'c'] //     console.error(`${v.explanation.join(', ')} is not valid`) // =&gt; b, c is not valid //       (. ) invalidObj = v.omitInvalidProps(objSchema)(invalidObj) console.log(invalidObj) // =&gt; { a: 1 }</span></span></code> </pre> <br><p> æœ‰äº†è¿™ç§è§£é‡Šæœºåˆ¶ï¼Œæ‚¨å¯ä»¥å®ç°ä¸éªŒè¯ç»“æœç›¸å…³çš„ä»»ä½•è¡Œä¸ºã€‚ </p><br><p> è§£é‡Šå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼š </p><br><ul><li> åŒ…å«å¿…è¦ä¿¡æ¯çš„å¯¹è±¡ï¼› </li><li> çº æ­£é”™è¯¯çš„åŠŸèƒ½ã€‚  ï¼ˆ <code>getExplanation =&gt; function(invalid): valid</code> ï¼‰; </li><li> æ— æ•ˆå­—æ®µçš„åç§°æˆ–æ— æ•ˆå…ƒç´ çš„ç´¢å¼•ï¼› </li><li> é”™è¯¯ä»£ç  </li><li> æ‰€æœ‰è¿™äº›è¶³ä»¥è®©æ‚¨å‘æŒ¥æƒ³è±¡åŠ›ã€‚ </li></ul><br><h2 id="chto-delat-kogda-delo-ne-stroitsya"> æ²¡æœ‰æ„å»ºä¸œè¥¿æ—¶è¯¥æ€ä¹ˆåŠï¼Ÿ </h2><br><p> çº æ­£éªŒè¯é”™è¯¯å¹¶ééš¾äº‹ã€‚ ä¸ºæ­¤ï¼Œè¯¥åº“ä½¿ç”¨å¸¦æœ‰å‰¯ä½œç”¨çš„éªŒè¯å™¨ï¼Œè¯¥å‰¯ä½œç”¨ä¼šè®°ä½é”™è¯¯çš„ä½ç½®ä»¥åŠå¦‚ä½•ä¿®å¤é”™è¯¯ã€‚ </p><br><ul><li>  <code>v.default(validator, value)</code> -è¿”å›ä¸€ä¸ªè®°ä½æ— æ•ˆå€¼çš„éªŒè¯ç¨‹åºï¼Œå¹¶åœ¨è°ƒç”¨<code>v.fix</code>è®¾ç½®é»˜è®¤å€¼ </li><li>  <code>v.filter(validator)</code> -è¿”å›ä¸€ä¸ªè®°ä½æ— æ•ˆå€¼çš„éªŒè¯å™¨ï¼Œå¹¶åœ¨è°ƒç”¨<code>v.fix</code> -ä»çˆ¶çº§ä¸­åˆ é™¤è¯¥å€¼ </li><li>  <code>v.addFix(validator, fixFunc)</code> -è¿”å›ä¸€ä¸ªè®°ä½æ— æ•ˆå€¼çš„éªŒè¯ç¨‹åºï¼Œå¹¶ä¸”åœ¨è°ƒç”¨<code>v.fix</code> -è°ƒç”¨å¸¦æœ‰å‚æ•°ï¼ˆå€¼ï¼Œ{keyï¼Œparent}ï¼Œ...ï¼‰çš„fixFuncã€‚  <code>fixFunc</code>å¿…é¡»å˜å¼‚åˆä½œä¼™ä¼´ä¹‹ä¸€-æ›´æ”¹å€¼ </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> toPositive = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">negativeValue, { key, parent }</span></span></span><span class="hljs-function">) =&gt;</span></span> { parent[key] = -negativeValue } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> objSchema = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: v.default(<span class="hljs-string"><span class="hljs-string">'number'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-attr"><span class="hljs-attr">b</span></span>: v.filter(<span class="hljs-string"><span class="hljs-string">'string'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), <span class="hljs-attr"><span class="hljs-attr">c</span></span>: v.default(<span class="hljs-string"><span class="hljs-string">'array'</span></span>, []), <span class="hljs-attr"><span class="hljs-attr">d</span></span>: v.default(<span class="hljs-string"><span class="hljs-string">'number'</span></span>, invalidValue =&gt; <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(invalidValue)), <span class="hljs-comment"><span class="hljs-comment">//    pos: v.and( v.default('number', 0), //     -  0 v.addFix('non-negative', toPositive) //     -   ) } const invalidObj = { a: 1, b: 2, c: 3, d: '4', pos: -3 } v.resetExplanation() //   v() v(objSchema)(invalidObj) // =&gt; false // v.hasFixes() =&gt; true const validObj = v.fix(invalidObj) console.log(validObj) // =&gt; { a: 1, b: '', c: [], d: 4 }</span></span></code> </pre> <br><h3 id="po-hozyaystvu-eschyo-prigoditsya"> æ‚åŠ¡ä»ç„¶æ´¾ä¸Šç”¨åœº </h3><br><p> è¯¥åº“ä¸­è¿˜æœ‰ä¸€äº›éªŒè¯æ–¹æ³•çš„å®ç”¨ç¨‹åºæ–¹æ³•ï¼š </p><br><table><thead><tr><th> æ–¹æ³• </th><th> ç»“æœ </th></tr></thead><tbody><tr><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="v.throwError"><code>v.throwError</code></a> </td> <td> å¦‚æœæ— æ•ˆï¼Œåˆ™ä½¿ç”¨ç»™å®šçš„æ¶ˆæ¯å¼•å‘TypeErrorã€‚ </td></tr><tr><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="`v.omitInvalidItems`"><code>v.omitInvalidItems</code></a> </td> <td> è¿”å›æ²¡æœ‰æ— æ•ˆå…ƒç´ ï¼ˆå­—æ®µï¼‰çš„æ–°æ•°ç»„ï¼ˆæˆ–å­—å…¸å¯¹è±¡ï¼‰ã€‚ </td></tr><tr><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="`v.omitInvalidProps`"><code>v.omitInvalidProps</code></a> </td> <td> æ ¹æ®æŒ‡å®šçš„å¯¹è±¡éªŒè¯å™¨ï¼Œè¿”å›æ²¡æœ‰æ— æ•ˆå­—æ®µçš„æ–°å¯¹è±¡ã€‚ </td></tr><tr><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="`v.validOr`"><code>v.validOr</code></a> </td> <td> å¦‚æœæœ‰æ•ˆï¼Œåˆ™è¿”å›è¯¥å€¼ï¼Œå¦åˆ™å°†å…¶æ›¿æ¢ä¸ºæŒ‡å®šçš„é»˜è®¤å€¼ã€‚ </td></tr><tr><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>v.example</code></a> </td> <td> æ£€æŸ¥ç»™å®šçš„å€¼æ˜¯å¦é€‚åˆè¯¥æ¨¡å¼ã€‚ å¦‚æœå®ƒä»¬ä¸åˆé€‚ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚ ç”¨ä½œæ–‡æ¡£å’Œç”µè·¯æµ‹è¯• </td></tr></tbody></table><br><h2 id="rezultaty"> ç»“æœ </h2><br><p> é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³äº†ä»»åŠ¡ï¼š </p><br><table><thead><tr><th> æŒ‘æˆ˜èµ› </th><th> è§£å†³æ–¹æ¡ˆ </th></tr></thead><tbody><tr><td> æ•°æ®ç±»å‹éªŒè¯ </td><td> é»˜è®¤å‘½åéªŒè¯å™¨ã€‚ </td></tr><tr><td> é¢„è®¾å€¼ </td><td> <code>v.default</code> </td> </tr><tr><td> ç§»é™¤æ— æ•ˆé›¶ä»¶ </td><td>  <code>v.filter</code> ï¼Œ <code>v.omitInvalidItems</code>å’Œ<code>v.omitInvalidProps</code> ã€‚ </td></tr><tr><td> æ˜“å­¦ </td><td> ç®€å•çš„éªŒè¯å™¨ï¼Œå°†å®ƒä»¬ç»„åˆä¸ºå¤æ‚çš„éªŒè¯å™¨çš„ç®€å•æ–¹æ³•ã€‚ </td></tr><tr><td> ä»£ç å¯è¯»æ€§ </td><td> è¯¥åº“çš„ç›®æ ‡ä¹‹ä¸€æ˜¯å°†éªŒè¯æ–¹æ¡ˆæœ¬èº«æ¯”ä½œ </td></tr><tr><td> éªŒè¯å¯¹è±¡ã€‚ </td></tr><tr><td> æ˜“äºä¿®æ”¹ </td><td> æŒæ¡äº†åˆæˆçš„å…ƒç´ å¹¶ä½¿ç”¨äº†è‡ªå·±çš„éªŒè¯åŠŸèƒ½-æ›´æ”¹ä»£ç éå¸¸ç®€å•ã€‚ </td></tr><tr><td> é”™è¯¯è®¯æ¯ </td><td> ä»¥é”™è¯¯æ¶ˆæ¯çš„å½¢å¼è¿›è¡Œè¯´æ˜ã€‚ æˆ–æ ¹æ®è¯´æ˜è®¡ç®—é”™è¯¯ä»£ç ã€‚ </td></tr></tbody></table><br><h2 id="posleslovie"> åè®° </h2><br><p> è¯¥è§£å†³æ–¹æ¡ˆæ—¨åœ¨å¿«é€Ÿæ–¹ä¾¿åœ°åˆ›å»ºéªŒè¯å™¨åŠŸèƒ½ï¼Œå¹¶å…·æœ‰åµŒå…¥è‡ªå®šä¹‰éªŒè¯åŠŸèƒ½çš„èƒ½åŠ›ã€‚ å› æ­¤ï¼Œæ¬¢è¿é˜…è¯»æœ¬æ–‡çš„äººè¿›è¡Œä»»ä½•æ›´æ­£ï¼Œæ‰¹è¯„å’Œæ”¹è¿›ã€‚ è°¢è°¢æ‚¨çš„å…³æ³¨ã€‚ <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN429916/">https://habr.com/ru/post/zh-CN429916/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN429904/index.html">å…³äºè®¡ç®—æœºæ¸¸æˆå¼€å‘çš„æœ‰è¶£å’Œæ‚²ä¼¤çš„æ•…äº‹</a></li>
<li><a href="../zh-CN429908/index.html">å¦‚ä½•åœ¨é£Ÿç‰©ä¸­ä½¿ç”¨åç¨‹å’Œå¤œé—´å®‰çœ </a></li>
<li><a href="../zh-CN429910/index.html">AppsConfä¸Šå‡</a></li>
<li><a href="../zh-CN429912/index.html">åº“å¼€å‘ï¼šä»APIåˆ°å…¬å¼€å‘å¸ƒ</a></li>
<li><a href="../zh-CN429914/index.html">OpenSceneGraphï¼šåœºæ™¯å›¾å’Œæ™ºèƒ½æŒ‡é’ˆ</a></li>
<li><a href="../zh-CN429918/index.html">è™šæ‹Ÿä¸–ç•Œè‹±ç‰¹å°”ã€‚ ç¬¬2éƒ¨åˆ†ï¼šSMP</a></li>
<li><a href="../zh-CN429920/index.html">NaNä¸­çš„Tragicomedyè¡Œä¸ºï¼šæˆ‘ä»¬å¦‚ä½•åœ¨JSä¸Šåˆ¶ä½œæ¸¸æˆå¹¶åœ¨Steamä¸Šå‘å¸ƒå®ƒ</a></li>
<li><a href="../zh-CN429922/index.html">å¦‚ä½•å°†ä¸€ä¸ªç®€å•çš„é¡¹ç›®è½¬å˜ä¸ºé•¿æœŸå»ºè®¾é¡¹ç›®ï¼Œæˆ–åˆ‡æ–­æ‰€æœ‰ä¸å¿…è¦çš„é¡¹ç›®</a></li>
<li><a href="../zh-CN429928/index.html">æ‚¨éœ€è¦äº†è§£çš„æœ‰å…³å‹åŠ›å’Œå¼ºçƒˆæƒ…ç»ªçš„æ‰€æœ‰ä¿¡æ¯</a></li>
<li><a href="../zh-CN429930/index.html">Splunk ç®€å•çš„åº”ç”¨ç¨‹åºæ•…éšœæ’é™¤</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>