<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵🏾 👨🏿‍🚀 👇🏼 Mecanismo de Submissão - Magia Cubana Especial 💣 🕵🏿 🙅🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Views, ou views, é um dos conceitos da plataforma CUBA, não o mais comum no mundo das estruturas da web. Entender isso significa evitar erros estúpido...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mecanismo de Submissão - Magia Cubana Especial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/425765/"><p><img src="https://habrastorage.org/webt/ro/89/bc/ro89bcf9p8amjxin9ca0ksoctf8.jpeg" alt="CPAP"></p><br><p>  Views, ou views, é um dos conceitos da plataforma CUBA, não o mais comum no mundo das estruturas da web.  Entender isso significa evitar erros estúpidos quando, devido ao carregamento incompleto de dados, o aplicativo para de funcionar repentinamente.  Vamos ver o que são representações (trocadilhos) e por que é realmente conveniente. </p><br><h3 id="problema-nezagruzhennyh-dannyh">  O problema dos dados descarregados </h3><br><p>  Vamos simplificar uma área de assunto e considerar o problema usando seu exemplo.  Suponha que tenhamos uma entidade <em>Customer</em> que se refira a uma entidade <em>CustomerType</em> em um relacionamento muitos-para-um, ou seja, o comprador tenha um link para um determinado tipo que a descreva: por exemplo, "cash cow", "snapper" etc.  A entidade <em>CustomerType</em> possui um atributo de <em>nome</em> no qual o nome do tipo está armazenado. </p><br><p>  E, provavelmente, todos os recém-chegados (ou mesmo usuários avançados) no CUBA, mais cedo ou mais tarde, receberam este erro: </p><br><p><code>IllegalStateException: Cannot get unfetched attribute [type] from detached object com.rtcab.cev.entity.Customer-e703700d-c977-bd8e-1a40-74afd88915af [detached].</code> </p> <br><p><img src="https://habrastorage.org/webt/-x/ss/fm/-xssfm8nzwvf86jcicyrelm5nby.png" alt="Não é possível obter erro de atributo não recuperado na interface do usuário do CUBA"></p><br><p>  Admita, você também viu com seus próprios olhos?  Eu - sim, em uma centena de situações diferentes.  Neste artigo, examinaremos a causa desse problema, por que ele existe e como resolvê-lo. <br>  Para iniciantes, uma pequena introdução ao conceito de visualizações. </p><br><h3 id="chto-takoe-predstavlenie">  O que é uma visão? </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Uma exibição</a> no CUBA é essencialmente uma coleção de colunas em um banco de dados que deve ser carregado juntos em uma única consulta. </p><a name="habracut"></a><br><p>  Suponha que desejemos criar uma interface do usuário com uma tabela de clientes, em que a primeira coluna seja o nome do cliente e a segunda seja o nome do tipo do atributo <em>customerType</em> (como na captura de tela acima).  É lógico supor que nesse modelo de dados teremos duas tabelas separadas no banco de dados, uma para a entidade <em>Cliente</em> e outra para <em>CustomerType</em> .  A <code>SELECT * from CEV_CUSTOMER</code> retornará dados de apenas uma tabela ( <code>name</code> atributo, etc.).  Obviamente, para obter dados também de outras tabelas, usaremos JOINs. </p><br><p>  No caso de usar consultas SQL clássicas usando JOIN, a hierarquia de associações (atributos de referência) se expande do gráfico para uma lista simples. <br>  <em>Nota do tradutor: em</em> outras palavras, as relações entre as tabelas são apagadas e o resultado é apresentado em uma única matriz de dados que representa a união das tabelas. </p><br><p>  No caso do CUBA, é utilizado o ORM, que não perde informações sobre relacionamentos entre entidades e apresenta o resultado de consultas na forma de um gráfico integral dos dados solicitados.  Nesse caso, o JPQL, um análogo de objeto do SQL, é usado como a linguagem de consulta. </p><br><p>  No entanto, os dados ainda precisam ser descarregados de alguma forma do banco de dados e transformados em um gráfico de entidade.  Para isso, o mecanismo de mapeamento objeto-relacional (que é o JPA) possui duas abordagens principais para consultas ao banco de dados. </p><br><h3 id="lazy-loading-vs-eager-fetching">  Carregamento lento vs.  busca ansiosa </h3><br><p>  Carregamento lento e carregamento ganancioso são duas estratégias possíveis para obter dados do banco de dados.  A diferença fundamental entre os dois é quando os dados das tabelas vinculadas são carregados.  Um pequeno exemplo para uma melhor compreensão: </p><br><p>  Lembra-se da cena do livro "O Hobbit, ou Viagem de ida e volta", em que um grupo de gnomos na companhia de Gandalf e Bilbo está tentando pedir uma noite na casa de Beorn?  Gandalf ordenou que os anões aparecessem estritamente e só depois que ele concordou cuidadosamente com Beorn e começou a apresentá-los um de cada vez para não chocar o proprietário pela necessidade de acomodar 15 convidados de uma só vez. </p><br><p><img src="https://habrastorage.org/webt/ys/pm/ql/yspmqlsytd5vmefxszi9xeqqduc.jpeg" alt="Gandalf e os anões na casa de Beorn"></p><br><p>  Então, Gandalf e os gnomos na casa de Beorn ... Essa provavelmente não é a primeira coisa que vem à mente quando se pensa em downloads preguiçosos e gananciosos, mas há definitivamente semelhanças.  Gandalf agiu sabiamente aqui, pois estava ciente das limitações.  Pode-se dizer que ele escolhe conscientemente o carregamento lento dos gnomos, pois entendeu que o download de todos os dados ao mesmo tempo seria uma operação muito pesada para esse banco de dados.  No entanto, após o 8º gnomo, Gandalf mudou para um carregamento ganancioso e carregou vários gnomos restantes, porque percebeu que chamadas muito freqüentes para o banco de dados começam a torná-lo menos irritante. </p><br><p>  A moral é que tanto o carregamento preguiçoso quanto o ganancioso têm seus prós e contras.  O que aplicar em cada situação específica, você decide. </p><br><h3 id="problema-zaprosa-n1">  Problema de solicitação N + 1 </h3><br><p>  O problema de consulta N + 1 geralmente surge se você estiver usando o carregamento lento sem pensar em onde quer que vá.  Para ilustrar, vejamos um pedaço do código Grails.  Isso não significa que no Grails tudo carregue preguiçosamente (na verdade, você mesmo escolhe o método de inicialização).  No Grails, por padrão, uma consulta ao banco de dados retorna instâncias de entidade com todos os atributos de sua tabela.  Essencialmente, <code>SELECT * FROM Pet</code> é executado. </p><br><p>  Se você deseja aprofundar as relações entre entidades, deve fazê-lo após o factum.  Aqui está um exemplo: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> getPetOwnerNamesForPets(String nameOfPet) { def pets = Pet.findAll(sort:"name") { <span class="hljs-type"><span class="hljs-type">name</span></span> == nameOfPet } def ownerNames = [] pets.<span class="hljs-keyword"><span class="hljs-keyword">each</span></span> { ownerNames &lt;&lt; it.<span class="hljs-keyword"><span class="hljs-keyword">owner</span></span>.name } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ownerNames.<span class="hljs-keyword"><span class="hljs-keyword">join</span></span>(", ") }</code> </pre> <br><p>  O gráfico é <code>it.owner.name</code> aqui por uma única linha: <code>it.owner.name</code> .  Proprietário é um relacionamento que não foi carregado na solicitação original ( <code>Pet.findAll</code> ).  Assim, toda vez que essa linha for chamada, o GORM fará algo como <code>SELECT * FROM Person WHERE id='…'</code> .  Carga preguiçosa em água pura. </p><br><p>  Se você calcular o número total de consultas SQL, obtém N (um proprietário para cada chamada <code>it.owner</code> ) + 1 (para o <code>Pet.findAll</code> original).  Se você quiser se aprofundar no gráfico de entidades relacionadas, é provável que seu banco de dados encontre rapidamente seus limites. </p><br><p>  Como desenvolvedor, é improvável que você perceba isso, porque, do seu ponto de vista, você está apenas percorrendo o gráfico de objetos.  Esse aninhamento oculto em uma linha curta causa problemas reais ao banco de dados e torna o carregamento lento, às vezes, perigoso. </p><br><p>  Desenvolvendo uma analogia de hobby, o problema do N + 1 pode se manifestar da seguinte forma: imagine que Gandalf não consiga armazenar os nomes dos gnomos em sua memória.  Portanto, apresentando os anões um a um, ele é forçado a voltar ao seu grupo e pedir ao anão seu nome.  Com essas informações, ele volta para Beorn e representa Thorin.  Então ele repete essa manobra para Bifur, Bofur, Fili, Kili, Dori, Nori, Ori, Oin, Gloyn, Balin, Dvalin e Bombur. </p><br><p><img src="https://habrastorage.org/webt/fw/g_/vs/fwg_vscjob0zb0yzrn7dhrj2o_s.jpeg" alt="Anões N + 1 Problema"></p><br><p>  É fácil imaginar que seria improvável que tal cenário acontecesse: qual destinatário gostaria de esperar as informações solicitadas por tanto tempo?  Portanto, você não deve usar essa abordagem sem pensar e confiar cegamente nas configurações padrão do seu mapeador de persistência. </p><br><h3 id="reshaem-problemu-zaprosov-n1-s-pomoschyu-cuba-views">  Resolvendo o problema de consultas N + 1 usando visualizações CUBA </h3><br><p>  No CUBA, você provavelmente nunca encontrará o problema de consulta N + 1, já que a plataforma decidiu não usar carregamento oculto lento.  Em vez disso, o CUBA introduziu o conceito de representações.  As visualizações são uma descrição de quais atributos devem ser selecionados e carregados junto com as instâncias da entidade.  Algo como </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> pet.name, person.name <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Pet pet <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> Person person <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> pet.owner == person.id</code> </pre> <br><p>  Por um lado, a exibição descreve as colunas que precisam ser carregadas da tabela principal ( <em>Pet</em> ) (em vez de carregar todos os atributos por meio de *); por outro lado, descreve as colunas que devem ser carregadas das tabelas c-JOIN. </p><br><p>  Você pode imaginar a visualização CUBA como a visualização SQL do OR-Mapper: o princípio de operação é aproximadamente o mesmo. </p><br><p>  Na plataforma CUBA, você não pode invocar uma consulta através do DataManager sem usar a visualização.  A documentação fornece um exemplo: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> DataManager dataManager; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Book </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadBookById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID bookId)</span></span></span><span class="hljs-function"> </span></span>{ LoadContext&lt;Book&gt; loadContext = LoadContext.create(Book.class) .setId(bookId).setView(<span class="hljs-string"><span class="hljs-string">"book.edit"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dataManager.load(loadContext); }</code> </pre> <br><p>  Aqui queremos fazer o download do livro por seu ID.  O <code>setView("book.edit")</code> , ao criar um contexto de carregamento, indica com qual exibição o livro deve ser carregado no banco de dados.  Caso você não seja aprovado, o gerenciador de dados usa uma das três visualizações padrão que cada entidade possui: a <em>_local view</em> .  Local aqui refere-se a atributos que não fazem referência a outras tabelas, tudo é simples. </p><br><h3 id="reshenie-problemy-s-illegalstateexception-cherez-views">  Resolvendo o problema com IllegalStateException através de visualizações </h3><br><p>  Agora que temos um pouco de compreensão do conceito de representações, voltemos ao primeiro exemplo desde o início do artigo e tentemos evitar a exceção. </p><br><p>  A mensagem <em>IllegalStateException: Não é possível obter o atributo não recuperado [] do objeto desanexado</em> significa apenas que você está tentando exibir algum atributo que não está incluído na exibição com a qual a entidade está carregada. </p><br><p>  Como você pode ver, no descritor da tela de navegação, usei a <em>visualização _local</em> , e este é o problema: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dsContext</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customersDs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.rtcab.cev.entity.Customer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_local"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[select e from cev$Customer e]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dsContext</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Para se livrar do erro, primeiro você precisa incluir o tipo de cliente na exibição.  Como não podemos alterar a exibição padrão de <em>_local</em> , podemos criar a nossa.  No Studio, isso pode ser feito, por exemplo, da seguinte forma (clique com o botão direito do mouse em entidades&gt; criar exibição): </p><br><p><img src="https://habrastorage.org/webt/ki/oz/vy/kiozvyydas04xj9ypswst8afvxo.png" alt="Criando uma exibição no Studio"></p><br><p>  diretamente no descritor <a href="">views.xml</a> do nosso aplicativo: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.rtcab.cev.entity.Customer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">extends</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_local"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customer-view"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_minimal"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Depois disso, alteramos o link para a visualização na tela de navegação, assim: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customersDs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.rtcab.cev.entity.Customer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"customer-view"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[select e from cev$Customer e]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupDatasource</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Isso resolve completamente o problema e agora os dados do link são exibidos na tela de visualização do cliente. </p><br><h3 id="predstavlenie-_minimal-i-ponyatie-instance-name">  _Minimal view e nome da instância </h3><br><p>  O que mais vale a pena mencionar no contexto de visualizações é a visão <em>_minimal</em> .  A visualização local tem uma definição muito clara: inclui todos os atributos da entidade, que são atributos diretos da tabela (que não são chaves estrangeiras). </p><br><p>  A definição de uma representação mínima não é tão óbvia, mas também bastante clara. </p><br><p>  CUBA tem o conceito de um nome de instância de entidade - nome da instância.  O nome da instância é equivalente ao <code>toString()</code> no bom e velho Java.  Esta é uma representação em cadeia de uma entidade para exibição em uma interface do usuário e para uso em links.  O nome da instância é definido usando a anotação da entidade <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NamePattern</a> . </p><br><p>  É usado assim: <code>@NamePattern("%s (%s)|name,code")</code> .  Temos dois resultados: </p><br><h4 id="imya-ekzemplyara-opredelyaet-otobrazhenie-suschnosti-v-ui">  O nome da instância define o mapeamento da entidade para a interface do usuário </h4><br><p>  Primeiro, o nome da instância determina o que e em que ordem será exibida na interface do usuário se uma entidade se referir a outra entidade (como <em>Customer</em> se refere a <em>CustomerType</em> ). </p><br><p>  No nosso caso, o tipo de cliente será exibido como o nome da instância <em>CustomerType</em> , à qual o código é adicionado aos colchetes.  Se o nome da instância não estiver definido, o nome da classe da entidade e o ID da instância específica serão exibidos - concorde que isso não é exatamente o que o usuário gostaria de ver.  Veja as capturas de tela antes e depois abaixo para ver exemplos de ambos os casos. </p><br><p><img src="https://habrastorage.org/webt/wa/gd/u8/wagdu8lfbckngwhi2swjhgj8mxe.png" alt="Referência a uma entidade para a qual nenhum nome de instância foi especificado"></p><br><p><img src="https://habrastorage.org/webt/uy/7f/ok/uy7fokvhqcl9m5jx0ui1ju2v4l0.png" alt="Uma referência de entidade com o nome da instância fornecida"></p><br><h4 id="imya-ekzemplyara-opredelyaet-atributy-minimalnogo-predstavleniya">  O nome da instância define atributos mínimos de exibição </h4><br><p>  A segunda coisa que a anotação NamePattern afeta é: todos os atributos especificados após a barra vertical formam automaticamente uma exibição <em>_minimal</em> .  À primeira vista, isso parece óbvio, porque os dados de alguma forma precisam ser exibidos na interface do usuário, o que significa que você deve primeiro baixá-los do banco de dados.  Embora, para ser sincero, raramente pense nesse fato. </p><br><p>  É importante observar aqui que a representação mínima, se comparada com a local, pode conter referências a outras entidades.  Por exemplo, para o comprador do exemplo acima, defino um nome de instância, que inclui um atributo local da entidade <em>Cliente</em> ( <code>name</code> ) e um atributo de referência ( <code>type</code> ): </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@NamePattern</span></span>(<span class="hljs-string"><span class="hljs-string">"%s - %s|name,type"</span></span>)</code> </pre> <br><p>  A representação mínima pode ser usada recursivamente: (Cliente [Nome da Instância] -&gt; CustomerType [Nome da Instância]) </p><br><p>  <em>Nota do tradutor:</em> desde a publicação do artigo, outra exibição do sistema apareceu - <code>_base</code> view, que inclui todos os atributos locais que não são do sistema e atributos especificados na anotação @NamePattern (ou seja, <code>_minimal</code> + <code>_local</code> ). </p><br><h3 id="zaklyuchenie">  Conclusão </h3><br><p>  Em conclusão, resumimos o tópico mais importante.  Graças às visualizações, no CUBA, podemos indicar explicitamente o que deve ser carregado no banco de dados.  As visualizações determinam o que será carregado com avidez, enquanto a maioria das outras estruturas realiza secretamente um carregamento lento. </p><br><p>  As representações podem parecer um mecanismo complicado, mas a longo prazo elas se justificam. </p><br><p>  Espero ter conseguido explicar de maneira acessível o que realmente são essas visões misteriosas.  Obviamente, existem cenários mais avançados para seu uso, bem como armadilhas ao trabalhar com representações em geral e com representações mínimas em particular, mas vou escrever sobre isso em um post separado de alguma forma. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425765/">https://habr.com/ru/post/pt425765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425753/index.html">RIP do Google+</a></li>
<li><a href="../pt425755/index.html">Desenvolvimento: New Generation Messenger (Parte 3). Aplicativos para desktop</a></li>
<li><a href="../pt425759/index.html">Novas aventuras de Cyborg na Alemanha</a></li>
<li><a href="../pt425761/index.html">DevDay Pro Testing: Gravando relatórios</a></li>
<li><a href="../pt425763/index.html">PHP Excel Templator (mecanismo de modelos PHP para Excel) ou como escrevemos hardcode para Excel antes</a></li>
<li><a href="../pt425767/index.html">Splunk 7.2 O que há de novo? SmartStore, gerenciamento de carga e muito mais ...</a></li>
<li><a href="../pt425769/index.html">Como ensinar o MySQL a olhar para o passado</a></li>
<li><a href="../pt425771/index.html">O princípio da menor ação em mecânica analítica</a></li>
<li><a href="../pt425773/index.html">Como controlamos funcionários remotos</a></li>
<li><a href="../pt425775/index.html">Automação da indústria do sexo ou serviços públicos em alemão</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>