<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🎓 🌠 💜 Kontribusi kecil untuk perang melawan platform kebun binatang UI Avalonia 👨🏼‍🍳 ⏺️ 😝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini adalah hasil dari pengecekan proyek Avalonia UI menggunakan analisa statis PVS-Studio. Avalonia UI adalah open-source, cross-platform plat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kontribusi kecil untuk perang melawan platform kebun binatang UI Avalonia</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/481598/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e34/9b1/06a/e349b106a7c1d3ea775353520b20cd91.png" alt="Gambar 2"></div><br>  Artikel ini adalah hasil dari pengecekan proyek Avalonia UI menggunakan analisa statis PVS-Studio.  Avalonia UI adalah open-source, cross-platform platform antarmuka pengguna berbasis XAML.  Ini adalah salah satu proyek signifikan secara teknologi dalam sejarah .NET, karena memungkinkan Anda untuk membuat antarmuka lintas-platform berdasarkan pada sistem WPF.  Saya harap artikel ini akan membantu penulis memperbaiki beberapa kesalahan dan meyakinkan mereka untuk menggunakan analisa statis di masa depan. <br><a name="habracut"></a><br><h2>  Tentang Avalonia UI </h2><br>  Proyek Avalonia UI (sebelumnya bernama Perspex) menyediakan kemampuan untuk membuat antarmuka pengguna yang berjalan pada Windows, Linux, dan MacOS.  Ada juga dukungan eksperimental untuk Android dan iOS saat ini.  Avalonia UI bukan pembungkus pembungkus, tetapi mengacu pada API asli.  Berbeda dengan Formulir Xamarin, yang membungkus pembungkus Xamarin.  Di salah satu video demo, saya dikejutkan oleh kemampuan untuk membawa kontrol ke konsol Debian.  Selain itu, proyek ini menawarkan lebih banyak fitur untuk tata letak dan desain daripada desainer antarmuka konvensional, berkat penggunaan markup XAML. <br><br>  Proyek yang sudah menggunakan Avalonia UI termasuk <a href="https://github.com/VitalElement/AvalonStudio">AvalonStudio</a> (IDE lintas-platform untuk pengembangan di C # dan C / C ++) dan <a href="https://github.com/wieslawsoltes/Core2D">Core2D</a> (editor diagram dan diagram 2D).  Sebagai proyek komersial, Anda dapat membawa <a href="https://wasabiwallet.io/">Wasabi Wallet</a> (dompet Bitcoin). <br><br>  Perjuangan melawan kebutuhan untuk memiliki beberapa perpustakaan yang berbeda saat membuat aplikasi lintas platform sangat penting.  Kami ingin membantu proyek, dan saya mengunduh proyek dan memeriksanya dengan penganalisa kami.  Saya berharap bahwa penulis akan memperhatikan artikel ini dan membuat perubahan yang diperlukan pada kode, atau mungkin memperkenalkan analisis statis reguler ke dalam proses pengembangan.  Untuk melakukan ini, mereka dapat mengambil keuntungan dari opsi lisensi bebas PVS-Studio untuk proyek sumber terbuka.  Penggunaan penganalisis statis secara teratur membantu menghindari banyak masalah dan mengurangi biaya untuk mendeteksi dan memperbaiki banyak kesalahan. <br><br><h2>  Hasil Validasi </h2><br>  <b>PVS-Studio Warning:</b> <a href="https://www.viva64.com/ru/w/v3001/">V3001</a> Ada sub-ekspresi yang identik 'controlledFag' di sebelah kiri dan di sebelah kanan operator '^'.  WindowImpl.cs 975TwitterClientMessageHandler.cs 52 <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateWMStyles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action change</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> style = (WindowStyles)GetWindowLong(....); .... style = style | controlledFlags ^ controlledFlags; .... }</code> </pre> <br>  Saya akan mulai secara simbolis dengan diagnostik C # pertama kami.  Analyzer mendeteksi penggunaan aneh dari operator bitwise OR.  Mari saya jelaskan pada angka apa yang terjadi di sini: <br><br>  ekspresi <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1100</span></span> <span class="hljs-number"><span class="hljs-number">0011</span></span> | <span class="hljs-number"><span class="hljs-number">1111</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> ^ <span class="hljs-number"><span class="hljs-number">1111</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span></code> </pre> <br>  mirip dengan ini: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1100</span></span> <span class="hljs-number"><span class="hljs-number">0011</span></span> | <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span></code> </pre> <br>  ATAU eksklusif ("^") memiliki prioritas lebih tinggi daripada ATAU bitwise ("|").  Kemungkinan besar, urutan operasi yang berbeda tersirat di sini.  Dalam hal ini, Anda harus menggunakan ekspresi pertama dalam tanda kurung: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateWMStyles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action change</span></span></span><span class="hljs-function">)</span></span> { .... style = (style | controlledFlags) ^ controlledFlags; .... }</code> </pre> <br>  Sebelum dua peringatan berikutnya saya harus mengakui: positif palsu.  Ini disebabkan oleh penggunaan API publik, metode <i>TransformToVisual</i> .  Dalam kasus kami, <i>VisualRoot</i> selalu menjadi induk dari <i>visual</i> .  Saya tidak mengerti ini ketika menganalisis respons, penulis proyek mengatakan kepada saya setelah menulis artikel.  Jadi pengeditan yang diusulkan dalam artikel ini bukan untuk perlindungan terhadap kejatuhan yang sebenarnya, tetapi terhadap revisi potensial yang merusak logika ini. <br><br>  <b>PVS-Studio Warning:</b> <a href="https://www.viva64.com/ru/w/v3080/">V3080</a> Kemungkinan null dereference dari nilai pengembalian metode.  Pertimbangkan untuk memeriksa: TranslatePoint (...).  VisualExtensions.cs 23 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Point </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PointToClient</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IVisual visual, PixelPoint point</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rootPoint = visual.VisualRoot.PointToClient(point); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> visual.VisualRoot.TranslatePoint(rootPoint, visual).Value; }</code> </pre> <br>  Metode kecil.  Penganalisa menganggap bahwa mendereferensi hasil panggilan ke TranslatePoint tidak aman.  Lihatlah metode ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Point? TranslatePoint(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> IVisual visual, Point point, IVisual relativeTo) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> transform = visual.TransformToVisual(relativeTo); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.HasValue) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> point.Transform(transform.Value); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  Memang, ada <i>null</i> kembali. <br><br>  Metode ini memiliki 6 panggilan.  Dalam tiga kasus, nilainya diperiksa, dan selebihnya PVS-Studio mendeteksi potensi dereferencing dan mengeluarkan peringatan.  Saya mengutip yang pertama di atas, dan dua peringatan lainnya ada di sini: <br><br><ul><li>  <a href="https://www.viva64.com/ru/w/v3080/">V3080</a> Kemungkinan null dereference.  Pertimbangkan untuk memeriksa 'p'.  VisualExtensions.cs 35 </li><li>  <a href="https://www.viva64.com/ru/w/v3080/">V3080</a> Kemungkinan null dereference.  Pertimbangkan untuk memeriksa 'controlPoint'.  Scene.cs 176 </li></ul><br>  Saya mengusulkan untuk <i>memperbaikinya</i> dengan analogi dengan menambahkan <i>&lt;Struct&gt; Nullable.</i> Pemeriksaan nilai dalam metode <i>PointToClient</i> <i>:</i> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Point </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PointToClient</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IVisual visual, PixelPoint point</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rootPoint = visual.VisualRoot.PointToClient(point); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rootPoint.HasValue) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> visual.VisualRoot.TranslatePoint(rootPoint, visual).Value; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; }</code> </pre> <br>  <b>PVS-Studio Warning:</b> <a href="https://www.viva64.com/ru/w/v3080/">V3080</a> Kemungkinan null dereference dari nilai pengembalian metode.  Pertimbangkan untuk memeriksa: TransformToVisual (...).  ViewportManager.cs 381 <br><br>  Kasus yang sangat mirip dengan contoh sebelumnya: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEffectiveViewportChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TransformedBounds? bounds</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> transform = _owner.GetVisualRoot().TransformToVisual(_owner).Value; .... }</code> </pre> <br>  Metode <i>TransformToVisual</i> terlihat seperti ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Matrix? TransformToVisual(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> IVisual <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, IVisual to) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> common = <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.FindCommonVisualAncestor(to); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (common != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  Omong-omong, metode <i>FindCommonVisualAncestor</i> memang <i>dapat</i> mengembalikan <i>nol</i> sebagai nilai default untuk jenis referensi: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IVisual </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindCommonVisualAncestor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IVisual visual, IVisual target</span></span></span><span class="hljs-function">)</span></span> { Contract.Requires&lt;ArgumentNullException&gt;(visual != <span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ....FirstOrDefault(); }</code> </pre> <br>  Metode <i>TransformToVisual</i> digunakan di sembilan tempat, ada cek di tujuh.  Peringatan pertama untuk digunakan tanpa memeriksa lebih tinggi, dan yang terakhir ada di sini: <br><br>  <a href="https://www.viva64.com/ru/w/v3080/">V3080</a> Kemungkinan null dereference.  Pertimbangkan untuk memeriksa 'transformasi'.  MouseDevice.cs 80 <br><br>  <b>Peringatan PVS-Studio:</b> Ekspresi <a href="https://www.viva64.com/ru/w/v3022/">V3022</a> selalu benar.  Mungkin operator '&amp;&amp;' harus digunakan di sini.  NavigationDirection.cs 89 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsDirectional</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> NavigationDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> direction &gt; NavigationDirection.Previous || direction &lt;= NavigationDirection.PageDown; }</code> </pre> <br>  Pemeriksaan aneh.  Dalam enumerasi <i>NavigationDirection</i> , ada 9 jenis dan <i>PageDown</i> adalah yang terakhir dari mereka.  Mungkin ini tidak selalu terjadi, atau apakah asuransi terhadap penampilan SUDDEN dari opsi rujukan baru.  Menurut saya cek pertama sudah cukup di sini.  Saya akan menyerahkan keputusan kepada penulis proyek. <br><br>  <b>Peringatan PVS-Studio:</b> <a href="https://www.viva64.com/ru/w/v3066/">V3066</a> Kemungkinan urutan argumen yang salah diteruskan ke konstruktor 'SelectionChangedEventArgs': 'dihapusSelectedItems' dan 'ditambahkanSelectedItems'.  DataGridSelectedItemsCollection.cs 338 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> SelectionChangedEventArgs </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSelectionChangedEventArgs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectionChangedEventArgs (DataGrid.SelectionChangedEvent, removedSelectedItems, addedSelectedItems) { Source = OwningGrid }; }</code> </pre> <br>  Dalam hal ini, penganalisa menyarankan bahwa argumen kedua dan ketiga dari konstruktor bingung.  Mari kita lihat konstruktor yang disebut: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectionChangedEventArgs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RoutedEvent routedEvent, IList addedItems, IList removedItems</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">routedEvent</span></span></span><span class="hljs-function">)</span></span> { AddedItems = addedItems; RemovedItems = removedItems; }</code> </pre> <br>  Dua wadah tipe <i>IList</i> diterima, mudah dicampur.  Dilihat oleh komentar di awal kelas, ini adalah kesalahan dalam kode kontrol yang disalin dari Microsoft dan dimodifikasi di bawah Avalonia.  Tetapi bagi saya itu bermanfaat untuk memperbaiki urutan argumen metode ini, setidaknya untuk tidak mencari kemungkinan kesalahan dalam diri Anda ketika laporan bug tiba. <br><br>  Penganalisa menemukan tiga kesalahan serupa: <br><br>  <b>Peringatan PVS-Studio:</b> <a href="https://www.viva64.com/ru/w/v3066/">V3066</a> Kemungkinan urutan argumen yang salah diteruskan ke 'konstruktor SelectionChangedEventArgs': 'dihapus' dan 'ditambahkan'.  AutoCompleteBox.cs 707 <br><br><pre> <code class="cs hljs">OnSelectionChanged(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectionChangedEventArgs(SelectionChangedEvent, removed, added));</code> </pre> <br>  <i>Pilihan</i> konstruktor yang <i>samaChangedEventArgs.</i> <br><br>  <a href="https://www.viva64.com/ru/w/v3066/">Peringatan</a> <b>PVS-Studio</b> <a href="https://www.viva64.com/ru/w/v3066/">V3066</a> : <br><br><ul><li>  Kemungkinan urutan argumen yang salah diteruskan ke konstruktor 'ItemsRepeaterElementIndexChangedEventArgs': 'oldIndex' dan 'newIndex'.  ItemsRepeater.cs 532 </li><li>  Kemungkinan urutan argumen yang salah diteruskan ke metode 'Perbarui': 'oldIndex' dan 'newIndex'.  ItemsRepeater.cs 536 </li></ul><br>  Dua operasi dalam satu metode panggilan acara. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnElementIndexChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IControl element, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> oldIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newIndex</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ElementIndexChanged != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_elementIndexChangedArgs == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _elementIndexChangedArgs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ItemsRepeaterElementIndexChangedEventArgs(element, oldIndex, newIndex); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _elementIndexChangedArgs.Update(element, oldIndex, newIndex); } ..... } }</code> </pre> <br>  Penganalisa melihat bahwa di <i>ItemsRepeaterElementIndexChangedEventArgs</i> dan dalam metode <i>Pembaruan</i> , argumen <i>oldIndex</i> dan <i>newIndex</i> memiliki urutan berbeda: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ItemsRepeaterElementIndexChangedEventArgs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> IControl element, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> oldIndex</span></span></span><span class="hljs-function">)</span></span> { Element = element; NewIndex = newIndex; OldIndex = oldIndex; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IControl element, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> oldIndex</span></span></span><span class="hljs-function">)</span></span> { Element = element; NewIndex = newIndex; OldIndex = oldIndex; }</code> </pre> <br>  Mungkin kodenya ditulis oleh programmer yang berbeda, dan untuk yang satu lebih penting apa yang terjadi, dan untuk yang lain - apa yang akan terjadi :) <br><br>  Seperti dalam kasus sebelumnya, Anda tidak harus mengeditnya segera, Anda perlu memeriksa apakah memang ada kesalahan. <br><br>  <b>PVS-Studio Warning:</b> <a href="https://www.viva64.com/ru/w/v3004/">V3004</a> Pernyataan 'then' setara dengan pernyataan 'else'.  DataGridSortDescription.cs 235 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IOrderedEnumerable&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ThenBy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IOrderedEnumerable&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; seq</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_descending) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> seq.ThenByDescending(o =&gt; GetValue(o), InternalComparer); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> seq.ThenByDescending(o =&gt; GetValue(o), InternalComparer); } }</code> </pre> <br>  Implementasi metode <i>ThenBy yang</i> sangat menarik.  Antarmuka <i>IEnumerable</i> , dari mana argumen <i>seq</i> diwarisi <i>,</i> memiliki metode <i>ThenBy</i> ;  Saya kira penggunaannya tersirat.  Seperti ini: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IOrderedEnumerable&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ThenBy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IOrderedEnumerable&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; seq</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_descending) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> seq.ThenByDescending(o =&gt; GetValue(o), InternalComparer); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> seq.ThenBy(o =&gt; GetValue(o), InternalComparer); } }</code> </pre> <br>  <b>Peringatan PVS-Studio:</b> <a href="https://www.viva64.com/ru/w/v3106/">V3106</a> Nilai indeks negatif yang mungkin.  Nilai indeks 'indeks' bisa mencapai -1.  Animator.cs 68 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InterpolationHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> animationTime, T neutralValue</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (kvCount &gt; <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (animationTime &lt;= <span class="hljs-number"><span class="hljs-number">0.0</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (animationTime &gt;= <span class="hljs-number"><span class="hljs-number">1.0</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = FindClosestBeforeKeyFrame(animationTime); firstKeyframe = _convertedKeyframes[index]; } .... } .... }</code> </pre> <br>  Penganalisa percaya bahwa <i>indeks</i> dapat memiliki nilai -1.  Variabel diperoleh dari metode <i>FindClosestBeforeKeyFrame</i> , lihat: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindClosestBeforeKeyFrame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> time</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; _convertedKeyframes.Count; i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_convertedKeyframes[i].Cue.CueValue &gt; time) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Index time is out of keyframe time range."</span></span>); }</code> </pre> <br>  Seperti yang dapat kita lihat, kondisi diperiksa dalam loop dan nilai iterator sebelumnya dikembalikan.  Kondisi ini cukup sulit untuk diverifikasi, dan saya tidak bisa mengatakan dengan tepat apa itu <i>CueValue</i> , tetapi menurut uraiannya dibutuhkan nilai dari 0,0 hingga 1,0.  Kita dapat mengatakan sesuatu tentang <i>waktu</i> , ini adalah <i>animationTime</i> dari metode panggilan, jelas lebih dari nol dan kurang dari satu.  Jika tidak, eksekusi program akan berjalan di cabang yang berbeda.  Jika ini adalah metode yang dipanggil untuk membuat animasi, maka situasinya terlihat seperti bug mengambang yang bagus.  Saya akan menambahkan cek untuk hasil <i>FindClosestBeforeKeyFrame</i> jika penanganan khusus diperlukan dalam kasus ini.  Atau - jika elemen pertama tidak memenuhi beberapa kondisi lain - hapus dari loop.  Tidak tahu bagaimana semua ini harus bekerja, saya akan memilih opsi kedua sebagai contoh koreksi: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindClosestBeforeKeyFrame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> time</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; _convertedKeyframes.Count; i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_convertedKeyframes[i].Cue.CueValue &gt; time) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Index time is out of keyframe time range."</span></span>); }</code> </pre> <br>  <b>Peringatan PVS-Studio:</b> <a href="https://www.viva64.com/ru/w/v3117/">V3117</a> Parameter konstruktor 'ponsel' tidak digunakan.  Country.cs 25 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Country</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> region, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> population, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> area, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> density, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> coast, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">? migration, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">? infantMorality, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gdp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">? literacy, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">? phones, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">? birth, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">? death</span></span></span><span class="hljs-function">)</span></span> { Name = name; Region = region; Population = population; Area = area; PopulationDensity = density; CoastLine = coast; NetMigration = migration; InfantMortality = infantMorality; GDP = gdp; LiteracyPercent = literacy; BirthRate = birth; DeathRate = death; }</code> </pre> <br>  Contoh yang baik dari perbedaan antara operasi penganalisa dan tinjauan kode manual.  Tiga belas argumen konstruktor, satu tidak digunakan.  Bahkan, Visual Studio juga mencatat argumen yang tidak digunakan, tetapi pada peringatan tingkat ketiga (mereka sering dinonaktifkan).  Dalam hal ini, ini adalah kesalahan yang jelas, karena kelas juga memiliki tiga belas properti untuk setiap argumen, dan tidak ada nilai yang diberikan di mana pun di <i>Ponsel</i> .  Pengeditan sudah jelas, saya tidak akan membawanya. <br><br>  <b>Peringatan PVS-Studio:</b> <a href="https://www.viva64.com/ru/w/v3080/">V3080</a> Kemungkinan null dereference.  Pertimbangkan untuk memeriksa 'tabItem'.  TabItemContainerGenerator.cs 22 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IControl </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateContainer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> item</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tabItem = (TabItem)<span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.CreateContainer(item); tabItem.ParentTabControl = Owner; .... }</code> </pre> <br>  Penganalisa menganggap berbahaya untuk melakukan dereferensi hasil pemanggilan <i>CreateContainer</i> . <br><br>  Lihatlah metode ini: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IControl </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateContainer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> item</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = item <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> T; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (container != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> container; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } }</code> </pre> <br>  Penganalisis dapat melihat penugasan <i>nol</i> ke variabel bahkan ketika melewati nilai melalui rantai lima puluh metode.  Tapi dia tidak bisa mengatakan apakah eksekusi akan dilakukan di utas ini setidaknya sekali.  Ya, dan saya juga tidak bisa, secara umum ... Panggilan metode hilang di antara metode yang ditimpa dan virtual.  Jadi saya sarankan agar aman dengan cek tambahan: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IControl </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateContainer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> item</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tabItem = (TabItem)<span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.CreateContainer(item); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(tabItem == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; tabItem.ParentTabControl = Owner; .... }</code> </pre> <br>  <b>Peringatan PVS-Studio:</b> <a href="https://www.viva64.com/ru/w/v3142/">V3142</a> Kode yang tidak dapat dideteksi terdeteksi.  Mungkin saja ada kesalahan.  DevTools.xaml.cs 91 <br><br>  Saya tidak akan menulis banyak kode di sini untuk membuat intrik, saya akan mengatakan segera: peringatan itu salah.  Penganalisa melihat panggilan ke metode yang melempar pengecualian tanpa syarat.  Ini dia: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XamlLoadException(<span class="hljs-string"><span class="hljs-string">$"No precompiled XAML found for </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{obj.GetType()}</span></span></span><span class="hljs-string">, make sure to specify x:Class and include your XAML file as AvaloniaResource"</span></span>); }</code> </pre> <br>  Mustahil untuk tidak memperhatikan tiga puluh lima peringatan (!) Tentang kode yang tidak dapat dijangkau yang terletak setelah panggilan ke metode ini.  Saya bertanya kepada salah satu pengembang proyek: bagaimana cara kerjanya?  Dan mereka memberi tahu saya cara mengganti panggilan dari satu metode dengan panggilan yang lain menggunakan perpustakaan <a href="https://www.mono-project.com/docs/">Mono.Cecil</a> .  Ini memungkinkan Anda untuk mengganti panggilan secara langsung dalam kode IL. <br><br>  Penganalisa tidak mendukung perpustakaan ini, oleh karena itu, kami memiliki banyak kesalahan positif, jadi lebih baik untuk menonaktifkan diagnostik ini pada proyek ini.  Agak memalukan untuk mengakui, sayalah yang melakukan diagnosis ini ... tetapi, seperti alat apa pun, analisis statis perlu dikonfigurasikan. <br><br>  Misalnya, kami sedang mengembangkan diagnostik tentang konversi jenis yang tidak aman.  Dan itu memberikan operasi kurang sedikit dari seribu pada proyek game, di mana kontrol mengetik dilakukan di sisi mesin. <br><br>  <b>Peringatan PVS-Studio:</b> <a href="https://www.viva64.com/ru/w/v3009/">V3009</a> Aneh bahwa metode ini selalu mengembalikan nilai yang sama dan 'benar'.  DataGridRows.cs 412 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScrollSlotIntoView</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> slot, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scrolledHorizontally</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (.....) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (DisplayData.FirstScrollingSlot &lt; slot &amp;&amp; DisplayData.LastScrollingSlot &gt; slot) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (DisplayData.FirstScrollingSlot == slot &amp;&amp; slot != <span class="hljs-number"><span class="hljs-number">-1</span></span>) { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } .... } .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  Metode ini selalu mengembalikan <i>true</i> .  Mungkin tujuan metode ini telah berubah sejak tanda tangan ditulis, tetapi kemungkinan besar ini adalah kesalahan.  Ini juga kelas kontrol yang disalin dari Microsoft, dilihat dari komentar di awal kelas.  Menurut pendapat saya, <i>DataGrid</i> biasanya merupakan salah satu kontrol yang paling tidak stabil, dan bagi saya itu layak untuk dipikirkan apakah perlu untuk mengkonfirmasi gulir jika tidak memenuhi persyaratan? <br><br><h2>  Kesimpulan </h2><br>  Beberapa kesalahan ini diperkenalkan ke dalam proyek bukan oleh pengembang UI Avalonia sendiri, tetapi oleh kode yang disalin dari kontrol WPF.  Namun, untuk pengguna antarmuka, sumber kesalahan biasanya tidak masalah.  Antarmuka yang macet atau tidak berfungsi merusak pendapat seluruh program. <br><br>  Dalam artikel yang saya sebutkan kebutuhan untuk mengkonfigurasi analisa, ada positif palsu yang tidak dapat dihindari karena prinsip-prinsip pengoperasian algoritma analisis statis.  Siapa pun yang terbiasa dengan <a href="https://en.wikipedia.org/wiki/Halting_problem">masalah berhenti</a> menyadari keterbatasan matematika ketika bekerja dengan kode lain.  Tetapi dalam kasus ini kita berbicara tentang menonaktifkan satu diagnostik dari hampir seratus setengah.  Jadi kita tidak berbicara tentang hilangnya makna dalam analisis statis (atau pertanyaan itu tidak sepadan).  Selain itu, diagnosis ini mungkin memiliki respons yang baik, hanya saja lebih sulit untuk menemukan di antara massa positif palsu. <br><br>  Pastikan untuk mencatat kualitas tinggi dari kode proyek!  Saya berharap para pengembang akan menjaga kecepatan dan tingkat kualitas kode.  Sayangnya, semakin besar proyeknya, semakin banyak bug di dalamnya.  Salah satu cara yang mungkin untuk mengurangi bug adalah dengan mengkonfigurasi CI \ CD dengan benar, dengan koneksi analisis statis dan dinamis.  Dan jika Anda ingin menyederhanakan pekerjaan dengan proyek besar dan mengurangi jumlah waktu yang dibutuhkan untuk debugging, <a href="https://www.viva64.com/ru/pvs-studio-download/">unduh dan coba</a> PVS-Studio! <br><br><p> <a href="https://www.viva64.com/en/b/0701/"><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Alexander Senichkin.  <a href="https://www.viva64.com/en/b/0701/">Kontribusi Kecil Kami untuk Avalonia UI's Fight for Fewer Platforms</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id481598/">https://habr.com/ru/post/id481598/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id481586/index.html">Tren Teknologi E-commerce 2020: Era Teknologi Imersif</a></li>
<li><a href="../id481588/index.html">Latihan untuk mengisolasi Runet dimulai. Akankah kita memantau?</a></li>
<li><a href="../id481592/index.html">Enam pilihan hadiah Tahun Baru untuk pengendara dengan diskon yang bagus</a></li>
<li><a href="../id481594/index.html">Pengembangan “generator tegangan sederhana” sesuai dengan GOST R IEC 61508 (IEC 61508)</a></li>
<li><a href="../id481596/index.html">Parsing ELK 7.5 pengaturan untuk analisis log Mikrotik</a></li>
<li><a href="../id481600/index.html">Mesin Wiki Keluarga Bonsai: Hasil 2019</a></li>
<li><a href="../id481604/index.html">Bagaimana pengembang Chelyabinsk keras membuat game untuk Google Play dan jejaring sosial</a></li>
<li><a href="../id481606/index.html">Berlangganan statis menggunakan template Pengamat menggunakan C ++ dan mikrokontroler Cortex M4</a></li>
<li><a href="../id481610/index.html">PostgreSQL Antipatterns: memperbarui tabel besar yang sedang dimuat</a></li>
<li><a href="../id481612/index.html">Kontribusi Kecil Kami untuk Platform Avalonia UI's Fight for Fewer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>