<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåò ü•™ üïµüèæ Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 6: Oportunidades, Parte 2 üéÖüèº üë®üèø‚Äçü§ù‚Äçüë®üèª üë®üèΩ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnolog√≠a de Massachusetts. Conferencia Curso # 6.858. "Seguridad de los sistemas inform√°ticos". Nikolai Zeldovich, James Mickens. A√±o 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 6: Oportunidades, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418219/"><h3>  Instituto de Tecnolog√≠a de Massachusetts.  Conferencia Curso # 6.858.  "Seguridad de los sistemas inform√°ticos".  Nikolai Zeldovich, James Mickens.  A√±o 2014 </h3><br>  Computer Systems Security es un curso sobre el desarrollo e implementaci√≥n de sistemas inform√°ticos seguros.  Las conferencias cubren modelos de amenazas, ataques que comprometen la seguridad y t√©cnicas de seguridad basadas en trabajos cient√≠ficos recientes.  Los temas incluyen seguridad del sistema operativo (SO), caracter√≠sticas, gesti√≥n del flujo de informaci√≥n, seguridad del idioma, protocolos de red, seguridad de hardware y seguridad de aplicaciones web. <br><br>  Lecci√≥n 1: "Introducci√≥n: modelos de amenaza" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 2: "Control de ataques de hackers" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 3: ‚ÄúDesbordamientos del b√∫fer: exploits y protecci√≥n‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 4: ‚ÄúSeparaci√≥n de privilegios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 5: ‚Äú¬øDe d√≥nde vienen los sistemas de seguridad?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> <br>  Lecci√≥n 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  <b>Audiencia:</b> ¬øpodemos concluir que cada oportunidad tiene un proceso? <br><br>  <b>Profesor: lo</b> dudo.  Puede tener tantos procesos como desee, por una posibilidad pueden existir varios procesos.  En pocas palabras, no necesariamente necesita un proceso separado para cada oportunidad.  Porque hay un proceso <b>fort1</b> que puede abrir muchos archivos y pasar muchas capacidades al componente privilegiado de <b>fort</b> . <br><br><img src="https://habrastorage.org/webt/ba/x4/pr/bax4pr8nb9rufhd5_f24v9imtdi.jpeg"><br><br>  La raz√≥n por la que cree que necesita un proceso separado para cada oportunidad que estamos tratando se refiere a esta extra√±a interacci√≥n entre capacidades y privilegios externos. <br><br>  Porque <b>fort1</b> tiene un privilegio externo.  Y lo que estamos haciendo es b√°sicamente transformar este privilegio externo en <b>Capacidad</b> en este proceso <b>fort1</b> .  Entonces, si tiene varios tipos diferentes de privilegios externos o varios privilegios diferentes que desea usar con precauci√≥n, entonces probablemente desee un proceso separado que tenga este privilegio.  Y cada vez que desee utilizar un conjunto espec√≠fico de privilegios, solicitar√° el proceso apropiado para realizar la separaci√≥n, y si esto tiene √©xito, le pedir√° al proceso que le devuelva la <b>Capacidad</b> . <br><br>  De hecho, exist√≠a un dise√±o del sistema operativo que se basaba completamente en las capacidades y no ten√≠a privilegios externos.  Y esto es genial, pero no muy pr√°ctico para usar en un sistema real.  Resulta que en realidad no desea tanto privilegios externos como oportunidades para nombrar un objeto y contarle a alguien sobre este objeto sin transferir los derechos a este objeto sin falta. <br><br>  Tal vez no s√© qu√© privilegios puede tener con respecto a alg√∫n documento general, pero quiero informarle que tenemos este documento general.  Si puedes leerlo, l√©elo.  Si lo escribes en √©l, bien, escribe.  Pero no quiero transferirle ning√∫n derecho.  Solo quiero decirte: "¬°Oye, esta cosa, ve y pru√©balo!"  Esto es un inconveniente en el mundo de las oportunidades, porque realmente te obliga a nunca hablar de objetos sin transferir derechos a este objeto. <br><br>  Por lo tanto, es importante saber acerca de esto y utilizar esta funci√≥n en algunas partes del sistema, pero no confiar en que sea la soluci√≥n para la seguridad del sistema. <br><br><img src="https://habrastorage.org/webt/iu/v8/sg/iuv8sgqyettpxg1oaf1jcuvs-e8.jpeg"><br><br>  <b>P√∫blico:</b> suponga que el proceso tiene las capacidades que le da otro proceso, pero resulta que ya tiene grandes capacidades con respecto a alg√∫n objeto.  ¬øPuede un proceso compararlos para asegurarse de que est√©n tocando el mismo objeto?  ¬øO usar√° las grandes oportunidades? <br><br>  <b>Profesor:</b> el hecho es que el proceso no utiliza capacidades de manera impl√≠cita, por lo que esta es una propiedad muy √∫til de las capacidades.  Definitivamente debe indicar cu√°l de las opciones est√° utilizando.  As√≠ que pi√©nselo en t√©rminos de un descriptor de archivo.  Supongamos que le doy un descriptor de archivo abierto para alg√∫n archivo, y es de solo lectura.  Luego, alguien m√°s le brinda otra oportunidad para otros archivos, que pueden incluir este archivo.  Y una nueva caracter√≠stica le permite leer y escribir en archivos. <br><br>  En este caso, si intenta escribir en el primer archivo, sin duda tendr√° √©xito, ya que se abrir√° un descriptor de archivo adicional, que permite no solo leer sino tambi√©n escribir.  Entonces, esto es algo genial cuando no necesita privilegios externos adicionales.  Simplemente tiene todas estas posibilidades, porque las personas realmente construyeron tales bibliotecas y, en principio, administran sus capacidades por usted.  Como que los recogen.  Y cuando intentan realizar una operaci√≥n, buscan oportunidades y encuentran las que hacen que funcione. <br><br>  Esto lo devuelve al control externo de la <b>autoridad ambiental</b> que intentaba evitar.  Una caracter√≠stica positiva de las posibilidades es que es un dise√±o de software que simplifica su vida.  Esto es poco com√∫n en soluciones de seguridad.  Esta propiedad facilita la escritura de c√≥digo que apunta a los privilegios que desea utilizar desde un punto de vista de seguridad.  Y esto es bastante f√°cil de escribir c√≥digo. <br>  Sin embargo, la <b>capacidad</b> puede resolver otros problemas.  Por lo tanto, los problemas de administraci√≥n de privilegios a menudo surgen cuando necesita ejecutar alg√∫n c√≥digo no confiable.  Porque realmente desea controlar los privilegios que otorga, porque de lo contrario existe el riesgo de mal uso de cualquier privilegio que brinde.  Y este es un punto de vista ligeramente diferente desde el cual los autores del art√≠culo sobre <b>Capsicum</b> abordan las oportunidades.  Ellos, por supuesto, son conscientes del problema de la autoridad externa, pero este es un problema ligeramente diferente que puede o no puede resolver.  Pero b√°sicamente les importa que tengan una aplicaci√≥n privilegiada realmente grande, y les preocupa que haya errores en diferentes partes del c√≥digo fuente de esta aplicaci√≥n.  Por lo tanto, les gustar√≠a reducir los privilegios de los diversos componentes de esta aplicaci√≥n. <br><br>  En este sentido, la historia es muy similar a <b>OKWS</b> .  Entonces, tiene una aplicaci√≥n grande, la divide en componentes y restringe los privilegios para cada componente.  Esto ciertamente tiene sentido en <b>OKWS</b> .  ¬øHay otras situaciones en las que podr√≠a estar preocupado por compartir privilegios?  Creo que en su art√≠culo describen ejemplos que deber√≠a intentar ejecutar, por ejemplo, <b>tcpdump</b> y otras aplicaciones que analizan datos de red.  ¬øPor qu√© est√°n tan preocupados por las aplicaciones que analizan las entradas de red?  ¬øQu√© pasa en <b>tcpdump</b> ?  ¬øCu√°l es la raz√≥n de su paranoia? <br><br>  <b>Audiencia:</b> un atacante puede controlar lo que se env√≠a y lo que se llama para ejecutar, por ejemplo, paquetes. <br><br>  <b>Profesor:</b> s√≠, ¬ørealmente les importan los ataques de este tipo y si el atacante realmente puede controlar los datos de entrada?  Porque es bastante problem√°tico si escribes c√≥digo <b>C</b> que deber√≠a manejar estructuras de datos.  Obviamente, estar√° manipulando mucho los punteros copiando bytes a las matrices que asignan memoria.  Al mismo tiempo, es f√°cil cometer un error con la gesti√≥n de la memoria, lo que tendr√° consecuencias bastante desastrosas. <br><br>  As√≠ que esta es la raz√≥n por la que decidieron hacer el trabajo de su protocolo de red y otras cosas en el sandbox. <br><br><img src="https://habrastorage.org/webt/qe/74/kp/qe74kpxuvojns1ezini63--mv90.jpeg"><br><br>  Otro ejemplo del mundo real donde se necesita compartir privilegios es su navegador.  Probablemente desee aislar su complemento Flash, o su extensi√≥n de <b>Java</b> , o algo m√°s.  Porque representan un amplio campo para los ataques que se usan de forma bastante agresiva. <br><br>  Entonces esto parece un plan inteligente.  Por ejemplo, si escribe alguna pieza de software, desea verificar el comportamiento de sus componentes en el sandbox.  En t√©rminos m√°s generales, esto se refiere a lo que descarg√≥ de Internet y tiene la intenci√≥n de ejecutar con menos privilegios.  ¬øSe <b>adapta esto al</b> estilo de aislamiento que ofrece <b>Capsicum</b> ?  Podr√≠a descargar un salvapantallas aleatorio o alg√∫n juego de Internet.  Y quiero ejecutarlos en mi computadora, pero primero me aseguro de que no arruinen todo lo que tengo.  ¬ø <b>Usar√≠as Capsicum</b> para esto? <br><br>  <b>P√∫blico:</b> puede escribir un programa sandbox en el que utilizar√° <b>Capsicum</b> . <br><br>  <b>Profesor:</b> cierto.  ¬øC√≥mo lo usar√≠as?  Bueno, simplemente entrar√≠as en modo sandbox con el <b>comando cap_enter</b> y luego ejecutar√≠as el programa.  ¬øEsperas que esto funcione?  Creo que habr√° un problema.  Se conectar√° con el hecho de que si el programa no espera que <b>Capsicum lo a√≠sle</b> , puede intentar abrir la biblioteca compartida, pero no podr√° hacerlo, porque no podr√° abrir algo como <b>/ lib / ...</b> , porque no lo hace. permitido en modo de <b>capacidad</b> . <br><br>  Por lo tanto, estos m√©todos de sandbox deben usarse para aquellas cosas para las cuales el desarrollador ha previsto que pueden ejecutarse en este modo.  Probablemente hay otros m√©todos de sandbox que se pueden usar para c√≥digo no modificado, pero los requisitos pueden cambiar ligeramente.  Por lo tanto, los creadores de <b>Capsicum</b> no <b>est√°n</b> muy preocupados por la compatibilidad con versiones anteriores.  Si tenemos que abrir archivos de manera diferente, los abriremos de manera diferente.  Pero si desea dejar el c√≥digo existente, necesita algo m√°s, por ejemplo, una m√°quina virtual completa para que pueda ejecutar el c√≥digo en ella.  Esto plantea la pregunta: ¬ødeber√≠amos usar m√°quinas virtuales para el entorno limitado de <b>Capsicum</b> ? <br><br>  <b>P√∫blico:</b> en este caso, es posible el desbordamiento de memoria. <br><br>  <b>Profesor:</b> s√≠, lo es.  Pero, ¬øy si no nos importa la memoria?  Por lo tanto, las m√°quinas virtuales son probablemente muy buenas y no utilizan mucha memoria.  Entonces, ¬øpor qu√© otra raz√≥n no deber√≠amos usar <b>VM</b> en <b>Capsicum</b> ? <br><br>  <b>P√∫blico: es</b> dif√≠cil controlar la actividad de la red. <br><br>  <b>Profesor:</b> Eso es correcto!  Es dif√≠cil controlar lo que est√° sucediendo en la red porque no le est√° dando acceso a la m√°quina virtual a la red, o se est√° conectando a la red a trav√©s del modo <b>NAT</b> , o est√° usando <b>Vista previa</b> o <b>VMWare</b> .  Pero entonces su sandbox puede acceder a Internet completo.  Por lo tanto, tendr√° que administrar la red con m√°s detalle, quiz√°s estableciendo reglas de firewall para la m√°quina virtual, y as√≠ sucesivamente.  Esto no es muy bueno. <br><br>  ¬øPero qu√© pasa si no te importa la red?  Suponga que solo tiene alg√∫n tipo de video. ¬øQu√© sucede si procesa alg√∫n video simple o analiza <b>tcpdump</b> ?  En este caso, simplemente inicia la m√°quina virtual, comienza a analizar sus paquetes <b>tcpdump</b> y lo devuelve despu√©s de la presentaci√≥n que <b>tcpdump</b> desea escribir al usuario, porque no hay E / S de red real.  Entonces, ¬øhay alguna otra raz√≥n? <br><br><img src="https://habrastorage.org/webt/sy/iu/rs/syiurso7-blsxdvzyhhbwpfia0w.jpeg"><br><br>  <b>Audiencia:</b> porque la sobrecarga de inicializaci√≥n sigue siendo alta. <br><br>  <b>Profesor:</b> s√≠, esta puede ser la sobrecarga inicial de iniciar una m√°quina virtual, lo que reduce el rendimiento.  Entonces es verdad. <br><br>  <b>P√∫blico:</b> Bueno, es posible que a√∫n desee tener derechos sobre una base de datos y similares. <br><br>  <b>Profesor:</b> si.  Pero, en general, esto significa que tiene datos reales con los que est√° trabajando, y es realmente dif√≠cil separarlos.  Por lo tanto, las m√°quinas virtuales son, de hecho, un mecanismo para compartir mucho m√°s grande, por lo que no se pueden compartir cosas f√°cilmente.  Por lo tanto, esto es bueno para situaciones en las que tiene un programa completamente aislado que desea ejecutar y, al mismo tiempo, no desea compartir ning√∫n archivo, directorio, proceso y simplemente dejar que funcione por separado. <br><br>  Entonces esto es genial.  Esto es probablemente, de alguna manera, un aislamiento m√°s fuerte que el que ofrece <b>Capsicum</b> , porque hay menos opciones para que las cosas salgan mal.  Sin embargo, este aislamiento no es aplicable en muchas situaciones cuando desea usar <b>Capsicum</b> .  Porque en <b>Capsicum</b> puedes intercambiar archivos con gran precisi√≥n, usando las capacidades del sandbox. <br><br>  Entonces, tomemos <b>tcpdump</b> y veamos por qu√© es dif√≠cil aislarlo usando el mecanismo <b>Unix</b> .  Si recuerda, en <b>Capsicum la</b> forma en que funciona <b>tcpdump</b> es que abre algunos sockets especiales y luego ejecuta la l√≥gica de an√°lisis en los paquetes de red, despu√©s de lo cual se imprime en los terminales de usuario.  Entonces, ¬øqu√© se necesita para un sandbox <b>tcpdump</b> basado en <b>Unix</b> ?  ¬øSon sus privilegios limitados?  El problema con <b>Unix</b> es que la √∫nica forma de cambiar realmente los privilegios es cambiar la entrada en la funci√≥n de decisi√≥n, que decide si realmente puede acceder a alg√∫n objeto o no.  Y lo √∫nico que realmente puede cambiar son los privilegios del proceso.  Esto significar√° que el proceso podr√° enviar el <b>UID a</b> otra persona. <br><br>  O puede cambiar los permisos para varios objetos que est√°n en su sistema.  De hecho, puede usar ambas soluciones. <br><br>  Si desea aislar <b>tcpdump</b> en el sandbox, probablemente tenga que seleccionar un ID de usuario adicional y cambiarlo mientras trabaja.  Pero este no es un plan ideal, ya que no va a ejecutar varias instancias de <b>tcpdump</b> con la misma <b>ID de</b> usuario.  Por lo tanto, si comprometo una instancia de <b>tcpdump</b> , esto no significar√° que quiero permitir que el atacante use este factor para controlar otras instancias de <b>tcpdump que se</b> ejecutan en mi m√°quina.  Entonces, esta es potencialmente una mala decisi√≥n para usar <b>uid</b> en este caso. <br><br>  Otro problema es que en <b>Unix,</b> debe tener privilegios de root para cambiar la identificaci√≥n de usuario, privilegios, procesos u otra cosa, o cambiarlos a otra cosa.  Esto tambi√©n es malo. <br><br>  Y otro problema es que, sin importar cu√°l sea su <b>ID</b> , pueden existir archivos de acceso abierto.  Por lo tanto, su sistema puede tener un grupo completo de archivos legibles o grabables, por ejemplo, un archivo de contrase√±a.  De hecho, no importa qu√© <b>ID</b> tenga, el proceso a√∫n podr√° leer esta contrase√±a.  Entonces esto tampoco es muy bueno. <br><br>  Por lo tanto, para organizar un entorno limitado en <b>Unix</b> , probablemente deber√≠a hacer ambas cosas: cambiar el <b>UID</b> y revisar cuidadosamente los permisos de todos los objetos para asegurarse de que no tiene archivos abiertos no aislados que sean sensibles a que un hacker los sobrescriba o los pueda leer.  Creo que al hacerlo obtienes otro mecanismo que puedes usar.  Si lo env√≠a hasta el final, puede ver dificultades para compartir archivos o compartir directorios. <br><br>  Ahora veamos c√≥mo <b>Capsicum est√°</b> tratando de resolver este problema.  Aqu√≠, tan pronto como ingresemos al modo "sandbox", todo estar√° disponible solo a trav√©s de oportunidades.  Por lo tanto, si no tiene la <b>capacidad</b> , simplemente no puede acceder a ning√∫n objeto. <br><br>  Estos chicos en el art√≠culo hacen una gran apuesta en el espacio de nombres global.  Entonces, ¬øqu√© es este espacio de nombres global y por qu√© est√°n tan preocupados? <br><br>  Su sistema de archivos en s√≠ es una especie de brillante ejemplo de un espacio de nombres global.  Puede escribir una barra y enumerar cualquier archivo que desee detr√°s de √©l.  Por ejemplo, vaya a alguien en el directorio de inicio, por ejemplo, <b>/ home / nickolai / ...</b> ¬øPor qu√© es malo?  ¬øPor qu√© est√°n en contra del espacio de nombres global en <b>Capsicum</b> ?  Que piensas <br><br><img src="https://habrastorage.org/webt/3h/er/dr/3herdr4fh07qkewmu2rdz02f0tq.jpeg"><br><br>  <b>P√∫blico:</b> si tiene los permisos incorrectos, cuando usa la autoridad puede meterse en problemas. <br><br>  <b>Profesor:</b> si.  El problema es que todav√≠a es <b>Unix</b> .  Por lo tanto, todav√≠a hay permisos de archivo regulares.  Por lo tanto, quiz√°s, si realmente desea aislar alg√∫n proceso en el entorno limitado, no podr√° leer ni escribir nada en el sistema.  Pero si logra encontrar un archivo grabable en el directorio de inicio de alg√∫n usuario est√∫pido, esto ser√° bastante desagradable para el cliente sandbox. <br><br>  En t√©rminos m√°s generales, su idea era enumerar con precisi√≥n todos los objetos que tiene el proceso.  Porque simplemente puede enumerar todas las funciones en una tabla de descriptores de archivos o en cualquier otro lugar donde las funciones est√©n almacenadas para usted.  Y esto es lo √∫nico que el proceso puede tocar. <br><br>  Pero si tiene acceso al espacio de nombres global, entonces esto es potencialmente imposible.  Porque incluso si tiene un conjunto limitado de caracter√≠sticas, a√∫n podr√≠a comenzar la l√≠nea con una barra inclinada y escribir alg√∫n archivo nuevo, y nunca sabr√° el conjunto de operaciones u objetos a los que puede acceder este proceso. <br><br>  Es por eso que est√°n tan preocupados por el espacio de nombres global, porque contradice su objetivo de controlar con precisi√≥n todo a lo que el proceso de sandbox deber√≠a tener acceso.  De esta manera, trataron de eliminar espacios de nombres globales con muchos cambios en el n√∫cleo en <b>FreeBSD</b> .  En su caso, el n√∫cleo ten√≠a que asegurarse de que todas las operaciones pasaran por algunas capacidades, a saber, a trav√©s del descriptor de archivo. <br><br>  Vamos a ver si realmente necesitamos cambios en el kernel.  ¬øQu√© pasa si lo hacemos en la biblioteca?  Despu√©s de todo, estamos implementando <b>Capsicum</b> , que ya tiene una biblioteca.  Y todo lo que hacemos es cambiar todas estas funciones, como "abrir, leer, escribir", para utilizar exclusivamente las funciones de <b>capacidad</b> .  Luego, todas las operaciones pasar√°n por algunas caracter√≠sticas, b√∫squelas en la tabla de archivos, y as√≠ sucesivamente.  ¬øFuncionar√° esto? <br><br><img src="https://habrastorage.org/webt/ik/r9/bi/ikr9biwkqpm5t4rhxywr38rp8cg.jpeg"><br><br>  <b>P√∫blico:</b> siempre puede realizar la <b>llamada al</b> sistema <b>syscall</b> . <br><br>  <b>Profesor:</b> si.  El problema es que hubo un conjunto de llamadas al sistema que el n√∫cleo acepta, e incluso si implementa una buena biblioteca, esto no evitar√° la posibilidad de que un proceso defectuoso o comprometido haga una llamada al sistema directamente.  Por lo tanto, de alguna manera debes fortalecer el n√∫cleo. <br><br>  En el compilador, el modelo de amenaza no est√° en el proceso del compilador comprometido y no en c√≥digo arbitrario, sino en la negligencia del programador.  Entonces, si el desarrollador del programa no se equivoca y hace lo correcto, entonces la biblioteca probablemente ser√° suficiente. <br><br>   ,     ,             ,       .       -  ,       . <br><br>             ?  ‚Äî   ,    <b>cap_enter</b> .   ,    <b>cap_enter</b> ?  ,       ? <br><br>    ,      ,      .  ,    ,      ,     .   <b>cap_enter</b>      ,           <b>open ()</b> ,       <b>openat</b> . <br><br>  Unix-       ,   ,   <b>open</b>    ,   <b>openat</b> ,       ,      ,    ‚Äî    : <b>openat (dirfd,‚Äúname)</b> .     <b>openat</b>    <b>¬´name¬ª</b>   ,     . <br><br><img src="https://habrastorage.org/webt/_j/yq/qc/_jyqqcpijlilsu3uerxc8xevlai.jpeg"><br><br>  ,       <b>Capability</b>   <b>open</b> ,      ,   ,        .              .    -   ?   -,    ?  ,   ‚Äì    .        ,        ? <br><br> <b>:</b> ,       . <br><br> <b>:</b> .   ,          ,     .   ,        ,      .             ,      .       ,   ,     .       -,     . <br><br>   ,       ,   ,   ,    ,     .  ,     ,    .. ,     ,             ,          .    ? <br><br>       .     ?  ,  <b>Unix</b>         <b>PID</b> .  ,    <b>kill (25)</b>    <b>PID = 25</b> .     ,    .     <b>Capsicum</b> ?     ? <br><br> <b>:</b>    . <br><br> <b>:</b> . -,  . ,   <b>Unix</b>   ,  .  ,       <b>PID</b> ,    ,       <b>fork</b> ,   <b>pdfork</b> ,  ¬´  ¬ª.     ,            -   . <br><br>     .      ,    .   ,        -   : ¬´    ¬´¬ª  ,      ,   ,     ,   ¬ª.          .  ,     ,     -  . <br><br>       , ,    ,   .      ,     .      ,    ,              . <br><br><img src="https://habrastorage.org/webt/nt/rj/8q/ntrj8qi_6_4kplegcl_lao2jyig.jpeg"><br><br>    .     ,        ¬´-¬ª   .    ,       <b>openat</b>   ,      ¬´-¬ª. ,               ¬´-¬ª,       . <br><br>     ?         ,    ¬´-¬ª   ? <br><br> <b>:</b>    ,       ,      .     ,      <b>Capability</b>        . <br><br> <b>:</b> ,  . <br><br> <b>:</b>   ,   ,     -    ‚Ä¶ <br><br> <b>:</b>   . <br><br> <b>:</b>      -  . <br><br> <b>:</b> ,           .     ¬´-¬ª    ?  ,    <b>openat</b>  -        <b>b/c/../..</b> ? <br><br>  ,    , ?      - ,       .  , ,  ,    <b>openat (d, ‚Äúb/c/../..)</b>  <b>¬´c¬ª</b>    ,   -    . <br><br><img src="https://habrastorage.org/webt/_l/hx/r5/_lhxr55o7-crnf5egjmgkgikhao.jpeg"><br><br>   .   ,        ,            ,      .            ¬´-¬ª,      .  ,          ,         . ,    ,      .   ,     <b>UID</b>    - ? <br><br> <b>:</b>      ,    . <br><br> <b>:</b> ,     . ,  ,   ¬´¬ª <b>UID</b> ?    :    <b>cap_enter</b>    <b>UID</b>  .    ,   .        ?     ? <br><br> <b>:</b> , <b>UID</b>     ,  , , , ,   - . <br><br> <b>:</b>  ,  .      ¬´¬ª <b>UID</b> . ,        ,      <b>UID</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Resulta que tengo cientos de procesos en ejecuci√≥n en mi computadora, y no tengo idea de lo que es. </font><font style="vertical-align: inherit;">Por lo tanto, destruir el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no </font><b><font style="vertical-align: inherit;">es</font></b><font style="vertical-align: inherit;"> un buen plan para fines de gesti√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54:14 min </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuaci√≥n:</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Curso MIT "Seguridad de sistemas inform√°ticos".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lecci√≥n 6: "Oportunidades", parte 3</font></font></a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MlWK2YbZRZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La versi√≥n completa del curso est√° disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Gracias por quedarte con nosotros.  ¬øTe gustan nuestros art√≠culos?  ¬øQuieres ver m√°s materiales interesantes?  <b>Ap√≥yenos</b> haciendo un pedido o recomend√°ndolo a sus amigos, un <b>descuento del 30% para los usuarios de Habr en un an√°logo √∫nico de servidores de nivel de entrada que inventamos para usted:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">toda la verdad sobre VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de $ 20 o c√≥mo dividir el servidor?</a>  (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). <br><br>  <b>Dell R730xd 2 veces m√°s barato?</b>  ¬°Solo tenemos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV desde $ 249</a> en los Pa√≠ses Bajos y los Estados Unidos!</b>  Lea sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo construir un edificio de infraestructura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418219/">https://habr.com/ru/post/es418219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es418209/index.html">Recibimos datos de los contadores Mercury 203.2T en RS-485</a></li>
<li><a href="../es418211/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 4: "Compartir privilegios", Parte 3</a></li>
<li><a href="../es418213/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 5: "De d√≥nde vienen los sistemas de seguridad", parte 1</a></li>
<li><a href="../es418215/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 5: "De d√≥nde vienen los errores del sistema de seguridad", Parte 2</a></li>
<li><a href="../es418217/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 6: "Oportunidades", parte 1</a></li>
<li><a href="../es418221/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 6: "Oportunidades", parte 3</a></li>
<li><a href="../es418223/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 7: El sandbox del cliente nativo, parte 1</a></li>
<li><a href="../es418225/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 7: Sandbox de Native Client Parte 2</a></li>
<li><a href="../es418227/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 7: El sandbox del cliente nativo, parte 3</a></li>
<li><a href="../es418229/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 8: Modelo de seguridad de red, parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>