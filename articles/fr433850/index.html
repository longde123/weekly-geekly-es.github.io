<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî∞ ü§úüèΩ üçõ Luxon - une nouvelle biblioth√®que pour travailler avec les dates de l'√©quipe Moment.js üìê üõéÔ∏è üë¥üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il semblerait, pourquoi avons-nous besoin d'une autre biblioth√®que pour travailler avec les dates et heures alors qu'il existe une biblioth√®que Moment...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Luxon - une nouvelle biblioth√®que pour travailler avec les dates de l'√©quipe Moment.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433850/"><img src="https://habrastorage.org/webt/j1/wb/tr/j1wbtroijv6w7pxb5j1ku-pgdso.jpeg"><br><br>  Il semblerait, pourquoi avons-nous besoin d'une autre biblioth√®que pour travailler avec les dates et heures alors qu'il existe une biblioth√®que Moment bien connue?!  D'autant plus int√©ressant que l'alternative a √©t√© propos√©e par l'√©quipe Moment elle-m√™me. <br><a name="habracut"></a><br>  La biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Luxon</a> est d√©clar√©e comme un outil puissant, moderne et pratique pour travailler avec les dates et heures en JavaScript.  La biblioth√®que a √©t√© cr√©√©e par Isaac Cambron, membre de l'√©quipe de d√©veloppement Moment depuis 2013. <br><br>  L'auteur avait beaucoup d'id√©es pour d√©velopper Moment, qu'il ne pouvait pas faire dans le cadre du code existant.  Voici les principaux points que je voulais impl√©menter: <br><br><ul><li>  essayer quelques id√©es sur la fa√ßon de rendre l'API plus logique (mais ces id√©es n'√©taient pas compatibles avec l'approche adopt√©e par Moment), </li><li>  mettre en ≈ìuvre un travail ¬´pr√™t √† l'emploi¬ª avec des fuseaux horaires sans extensions suppl√©mentaires, </li><li>  repenser compl√®tement le travail avec l'internationalisation, en tenant compte de l'av√®nement de l'API Intl, </li><li>  passer √† un ensemble moderne d'outils et d'approches dans la formation du code JS. </li></ul><br>  Par cons√©quent, il a d√©cid√© de tout √©crire √† partir de z√©ro, ce qui a pris environ deux ans. <br>  Le r√©sultat est une sorte de version modernis√©e de Moment. <br>  La version r√©sultante semblait int√©ressante pour toute l'√©quipe de d√©veloppement Moment, il a donc √©t√© d√©cid√© de promouvoir la nouvelle biblioth√®que sous les auspices de l'√©quipe. <br><br><h2>  Principes de Luxon </h2><br><ol><li>  Cha√Ænes d'appels comme dans Moment. </li><li>  Tous les types sont immuables. </li><li>  API plus claire et √©vidente: pour diff√©rents objets - diff√©rentes m√©thodes avec des param√®tres clairement d√©finis. </li><li>  API Intl pour l'internationalisation (retour √† la version anglaise si le navigateur ne prend pas en charge l'API Intl). </li><li>  API Intl pour travailler avec les fuseaux horaires. </li><li>  Support plus complet pour le calcul de la dur√©e. </li><li>  Prise en charge de l'intervalle natif. </li><li>  Documentation du code en ligne. </li></ol><br>  <b>Ces principes ont conduit aux am√©liorations suivantes:</b> <br><br><ul><li>  Le code Luxon est beaucoup plus facile √† comprendre et √† d√©boguer. </li><li>  L'utilisation des fonctionnalit√©s de navigateur int√©gr√©es pour l'internationalisation am√©liore le comportement de la biblioth√®que et, encore une fois, facilite le d√©bogage. </li><li>  La prise en charge du fuseau horaire est mieux impl√©ment√©e que dans toute autre biblioth√®que JS. </li><li>  Luxon fournit √† la fois un outil simple et tr√®s puissant pour travailler avec la dur√©e. </li><li>  La biblioth√®que a une bonne documentation. </li></ul><br>  <b>Mais Luxon a ses inconv√©nients:</b> <br><br><ul><li>  L'accent mis sur l'utilisation des capacit√©s int√©gr√©es du navigateur entra√Æne des difficult√©s √† prendre en charge les anciens navigateurs. </li><li>  Certaines fonctionnalit√©s d'internationalisation qui ne sont pas encore prises en charge par les navigateurs ne sont pas impl√©ment√©es dans la biblioth√®que (vous devez vous attendre √† ce que cette prise en charge apparaisse dans les navigateurs). </li><li>  La mise en ≈ìuvre de l'API Intl dans diff√©rents navigateurs peut varier, respectivement, le comportement de Luxon variera √©galement. </li></ul><br><h2>  L'installation </h2><br>  Luxon fournit des modules pour toutes les plates-formes JavaScript modernes. <br><br>  La documentation contient une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liste</a> compl√®te <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des navigateurs pris en charge</a> avec des restrictions d'application.  Pour les navigateurs qui n'ont pas ou ont une prise en charge Intl limit√©e, il est recommand√© d'utiliser un polyfichier (en particulier, cela s'applique √† IE 10 ou 11). <br><br>  Lorsque vous travaillez avec Node.js (6+), si vous devez travailler avec des param√®tres r√©gionaux, vous devrez √©galement installer le package <i>full-icu</i> et d√©finir la variable d'environnement pour permettre l'utilisation de ce package. <br><br>  La m√©thode d'installation standard de npm: <br>  <b>npm install --save luxon</b> <br><br>  Luxon prend en charge √† la fois TypeScript et Flow, il existe √©galement un module au format ES6. <br><br><h2>  Revue rapide </h2><br>  La biblioth√®que Luxon comprend cinq classes principales: <br><br>  <i>DateTime</i> - date et heure avec fuseau horaire et param√®tres d'affichage, ainsi que les m√©thodes associ√©es. <br>  <i>Dur√©e</i> - une p√©riode de temps (dur√©e), par exemple, "2 mois" ou "1 jour, 3 heures". <br>  <i>Info</i> - m√©thodes statiques pour obtenir des donn√©es g√©n√©rales sur l'heure et la date. <br>  <i>Intervalle</i> - intervalle de temps et m√©thodes pour travailler avec lui. <br>  <i>Les param√®tres</i> sont des m√©thodes statiques qui d√©finissent le comportement g√©n√©ral de Luxon. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {DateTime, Duration, Info, Interval, Settings} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'luxon'</span></span>;</code> </pre> <br><h3>  Votre premier datetime </h3><br>  La classe la plus importante √† Luxon est DateTime.  DateTime repr√©sente la date + l'heure avec le fuseau horaire et les param√®tres r√©gionaux.  Voici comment vous pouvez d√©finir le 15 mai 2017 08:30 dans le fuseau horaire local: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>);</code> </pre> <br>  Voici l'appel pour d√©terminer l'heure actuelle: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> now = DateTime.local();</code> </pre> <br><h3>  Cr√©er √† partir d'un objet </h3><br><pre> <code class="javascript hljs">DateTime.fromObject({ <span class="hljs-attr"><span class="hljs-attr">month</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">day</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">hour</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">minutes</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">zone</span></span>: <span class="hljs-string"><span class="hljs-string">'Europe/Kaliningrad'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-12-22T12:20:00.000+02:00</span></span></code> </pre> <br><h3>  Cr√©er √† partir d'une cha√Æne au format ISO 8601 </h3><br><pre> <code class="javascript hljs">DateTime.fromISO(<span class="hljs-string"><span class="hljs-string">"2017-05-15"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; May 15, 2017 at 0:00 DateTime.fromISO("2017-05-15T08:30:00"); //=&gt; May 15, 2017 at 8:30</span></span></code> </pre> <br>  Lors de la conversion en cha√Æne, Luxon renvoie √©galement une cha√Æne au format ISO 8601: <br><br><pre> <code class="javascript hljs">DateTime.local().toString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "2018-12-18T20:58:29.995+03:00"</span></span></code> </pre> <br><h3>  Obtention de composants individuels: </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); dt.year; <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018 dt.month; //=&gt; 12 dt.day; //=&gt; 18 dt.second; //=&gt; 27 dt.weekday; //=&gt; 2 dt.zoneName; //=&gt; "Europe/Moscow" dt.offset; //=&gt; 180 dt.daysInMonth; //=&gt; 31</span></span></code> </pre> <br><h3>  Sortie format√©e </h3><br>  Luxon a de nombreuses m√©thodes pour convertir DateTime en une cha√Æne, deux d'entre elles sont les plus importantes pour LocaleString et toISO, la premi√®re convertit en un format prenant en compte la laque du navigateur, et la seconde pr√©pare le texte pour le traitement programmatique (par exemple, pour le transfert vers un serveur): <br><br><pre> <code class="javascript hljs">dt.toLocaleString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18.12.2018" dt.toLocaleString(DateTime.DATETIME_MED); //=&gt; "18 . 2018 ., 21:46" dt.toISO(); //=&gt; "2018-12-18T21:46:55.013+03:00"</span></span></code> </pre> <br>  Luxon dispose de deux douzaines de ¬´pr√©r√©glages¬ª pr√™ts √† l'emploi pour la sortie format√©e (tels que DATETIME_MED et TIME_WITH_LONG_OFFSET). <br><br>  Vous pouvez √©galement cr√©er votre propre option de formatage bas√©e sur des jetons: <br><br><pre> <code class="javascript hljs">dt.setLocale(<span class="hljs-string"><span class="hljs-string">'ru'</span></span>).toFormat(<span class="hljs-string"><span class="hljs-string">'d MMMM tt - ZZZZZ'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18  21:46:55 - ,  "</span></span></code> </pre><br><h3>  Conversions DateTime </h3><br>  Remarque importante: les objets Luxon sont immuables, c'est-√†-dire  toutes les m√©thodes de modification qui leur sont appliqu√©es renverront la copie modifi√©e sans changer l'objet d'origine.  Par cons√©quent, tous les termes de cet article (comme dans la documentation Luxon) tels que ¬´changer¬ª, ¬´installer¬ª, ¬´red√©finir¬ª doivent √™tre compris comme ¬´cr√©er une nouvelle instance avec d'autres propri√©t√©s¬ª. <br><br><h3>  Transformations math√©matiques </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18.12.2018, 20:30" dt.plus({hours: 3, minutes: 2}); //=&gt; "18.12.2018, 23:32" dt.minus({days: 7}); //=&gt; "11.12.2018, 20:30" dt.startOf('day'); //=&gt; "18.12.2018, 0:00" dt.endOf('hour'); //=&gt; "18.12.2018, 20:00"</span></span></code> </pre> <br><h3>  Remplacement des param√®tres individuels </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); dt.set({<span class="hljs-attr"><span class="hljs-attr">hour</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>}).hour <span class="hljs-comment"><span class="hljs-comment">//=&gt; 3</span></span></code> </pre><br><h3>  Conversions internationales </h3><br>  Luxon prend en charge plusieurs transformations Intl diff√©rentes, l'une des plus importantes est le formatage pour diff√©rents param√®tres r√©gionaux: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = {<span class="hljs-attr"><span class="hljs-attr">month</span></span>: <span class="hljs-string"><span class="hljs-string">'long'</span></span>, <span class="hljs-attr"><span class="hljs-attr">day</span></span>: <span class="hljs-string"><span class="hljs-string">'numeric'</span></span>}; dt.setLocale(<span class="hljs-string"><span class="hljs-string">'fr'</span></span>).toLocaleString(f); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18 d√©cembre" dt.setLocale('en-GB').toLocaleString(f); //=&gt; "18 December" dt.setLocale('en-US').toLocaleString(f); //=&gt; "December 18"</span></span></code> </pre> <br>  La classe Info peut renvoyer des listes de mois et de jours de la semaine dans un lieu donn√©: <br><br><pre> <code class="javascript hljs">Info.months(<span class="hljs-string"><span class="hljs-string">'long'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">locale</span></span>: <span class="hljs-string"><span class="hljs-string">'it'</span></span>}); <span class="hljs-comment"><span class="hljs-comment">//=&gt; ["gennaio", "febbraio", "marzo", ...] Info.weekdays ('short', {locale: 'de'}); //=&gt; ["Mo", "Di", "Mi", ...]</span></span></code> </pre> <br><h3>  Fuseaux horaires </h3><br>  Luxon prend en charge les fuseaux horaires.  Si vous cr√©ez un DateTime sans sp√©cifier explicitement un fuseau horaire, le fuseau local sera s√©lectionn√© par d√©faut.  Si vous modifiez le fuseau horaire d'un DateTime existant, l'heure et la date seront recalcul√©es en tenant compte de la diff√©rence entre les fuseaux horaires. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-12-18T20:00:00.000+03:00 dt.zone.name; //=&gt; "Europe/Moscow" dt.setZone('Asia/Vladivostok'); //=&gt; 2018-12-19T03:00:00.000+10:00</span></span></code> </pre> <br>  Luxon prend √©galement en charge l'utilisation de la date et de l'heure au format UTC: <br><br><pre> <code class="javascript hljs">DateTime.utc(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-05-15T00:00:00.000Z DateTime.utc(); //=&gt; 2018-12-18T17:58:29.995Z DateTime.local().toUTC(); //=&gt; 2018-12-18T17:58:29.995Z DateTime.utc().toLocal(); //=&gt; 2018-12-18T20:58:29.995+03:00</span></span></code> </pre><br><h3>  La dur√©e </h3><br>  La classe Dur√©e permet de travailler avec, par exemple, une dur√©e de ¬´2 heures et 7 minutes¬ª.  Vous pouvez cr√©er une dur√©e comme celle-ci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dur = Duration.fromObject({<span class="hljs-attr"><span class="hljs-attr">hours</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">minutes</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span>});</code> </pre> <br>  Les dur√©es peuvent √™tre ajout√©es et soustraites.  La dur√©e peut avoir une valeur n√©gative. <br><br><pre> <code class="javascript hljs">dur.minus(dur).minus(dur); <span class="hljs-comment"><span class="hljs-comment">//=&gt; {hours: -2, minutes: -7}</span></span></code> </pre> <br>  De m√™me, la dur√©e peut √™tre ajout√©e ou soustraite de DateTime. <br><br><pre> <code class="javascript hljs">DateTime.local().plus(dur);</code> </pre> <br>  La dur√©e a des getters (similaires aux getters DateTime): <br><br><pre> <code class="javascript hljs">dur.hours; <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2 dur.minutes; //=&gt; 7 dur.seconds; //=&gt; 0 dur.zone; //=&gt; undefined</span></span></code> </pre><br>  La dur√©e a √©galement d'autres m√©thodes utiles: <br><br><pre> <code class="javascript hljs">dur.as(<span class="hljs-string"><span class="hljs-string">'seconds'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 7620 dur.toObject(); //=&gt; { hours: 2, minutes: 7 } dur.toISO(); //=&gt; 'PT2H7M'</span></span></code> </pre><br><h3>  Intervalles </h3><br>  Les intervalles sont d√©finis comme la p√©riode entre deux points temporels; la classe Intervalle est utilis√©e pour travailler avec eux.  L'heure de d√©but est incluse dans l'intervalle, mais l'heure de fin ne l'est pas: en cons√©quence, le d√©but lors de la conversion en cha√Æne est marqu√© d'un crochet carr√© et la fin est d'un crochet rond. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> today = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> later = DateTime.local(<span class="hljs-number"><span class="hljs-number">2020</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> interval = Interval.fromDateTimes(today, later); interval.toString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "[2018-12-18T00:00:00.000+03:00 ‚Äì 2020-10-12T00:00:00.000+03:00)" interval.toISO(); //=&gt; "2018-12-18T00:00:00.000+03:00/2020-10-12T00:00:00.000+03:00" interval.length(); //=&gt; 57369600000 interval.length('years', true); //=&gt; 1.8169398907103824 interval.contains(DateTime.local(2019)); //=&gt; true</span></span></code> </pre> <br>  Les intervalles peuvent √™tre compar√©s entre eux et combin√©s entre eux: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextYear = Interval.after(DateTime.local(), {<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prevYear = Interval.before(DateTime.local(), {<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}); prevYear.overlaps(nextYear); <span class="hljs-comment"><span class="hljs-comment">//false prevYear.abutsStart(nextYear); //true nextYear.union(prevYear).length('years'); //=&gt; 2</span></span></code> </pre><br><h2>  Luxon et Moment </h2><br>  La biblioth√®que Luxon ¬´vit¬ª dans le projet ¬´Moment¬ª, mais n'est pas un remplacement complet de la biblioth√®que Moment.  Luxon ne fournit pas toutes les fonctionnalit√©s de Moment, par exemple, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">formatage de la date relative n'a</a> √©t√© impl√©ment√© que r√©cemment dans la version 71 du navigateur Chrome, ne fonctionne pas encore dans d'autres navigateurs, et sa prise en charge n'a pas encore √©t√© impl√©ment√©e dans Luxon (bien que cela soit pr√©vu).  Mais m√™me si les navigateurs prennent en charge les fonctionnalit√©s requises, vous devez comprendre qu'elles ne seront disponibles que dans ces nouveaux environnements.  Dans les navigateurs plus anciens, Luxon fonctionnera avec des probl√®mes, tandis que Moment fonctionnera √† tout moment, n'importe o√π. <br><br>  De plus, l'API Luxon a √©t√© enti√®rement repens√©e et est compl√®tement diff√©rente de l'API Moment. <br><br>  Notez les principales diff√©rences entre Moment et Luxon. <br><br><h3>  Immunit√© </h3><br>  Les objets Luxon sont immuables, mais pas Moment. <br>  Dans l'exemple ci-dessous, m1 et m2 sont le m√™me objet qui a √©t√© modifi√© par la m√©thode add. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m1 = moment(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m2 = m1.add(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'hours'</span></span>); m1 === m2; <span class="hljs-comment"><span class="hljs-comment">//=&gt; true</span></span></code> </pre><br>  Dans le cas de Luxon, la m√©thode plus renvoie un nouvel objet d2 sans changer le d1 d'origine. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d1 = DateTime.local(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d2 = d1.plus({ <span class="hljs-attr"><span class="hljs-attr">hours</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }); d1 === d2; <span class="hljs-comment"><span class="hljs-comment">//=&gt; false d1.valueOf() === d2.valueOf(); //=&gt; false</span></span></code> </pre><br>  Pour cette raison, Luxon n'a pas besoin de constructeurs de copie sp√©ciaux ni de m√©thodes de clonage que Moment utilise pour obtenir des copies sans modifier la valeur d'origine. <br><br><h3>  Diff√©rences fonctionnelles cl√©s </h3><br><ol><li>  Le compte √† rebours des mois √† Luxon commence √† partir de 1, et non √† partir de z√©ro, comme dans Moment (et nativement dans l'objet Date js). </li><li>  La localisation et les fuseaux horaires sont impl√©ment√©s √† l'aide de l'API Intl native (ou polyphile) et ne sont pas int√©gr√©s √† la biblioth√®que. </li><li>  Luxon a des types int√©gr√©s de dur√©e et d'intervalle. </li><li>  Luxon ne prend pas encore en charge le formatage de date relative. </li><li>  Luxon n'a pas non plus de m√©thode d'humanisation pour repr√©senter la dur√©e dans un style ¬´humanis√©¬ª (par exemple, ¬´quelques secondes¬ª). </li></ol><br><h3>  Diff√©rences de style API </h3><br><ul><li>  Dans les m√©thodes de l'API Luxon, les param√®tres facultatifs sont g√©n√©ralement situ√©s en dernier. </li><li>  Luxon a de nombreuses m√©thodes distinctes pour cr√©er des objets (par exemple, fromISO), contrairement √† Moment, qui a une fonction pour cela, et le type de l'objet est d√©fini par des param√®tres. </li><li>  Luxon a des analyseurs tr√®s stricts, tandis que Moment a des analyseurs plus lib√©raux, c'est-√†-dire  si le format de la cha√Æne d'entr√©e est diff√©rent de la norme, Luxon donnera imm√©diatement une erreur et Moment essaiera de corriger certaines erreurs dans le format. </li><li>  Luxon utilise des getters (dt.year, dt.isValid) pour obtenir la valeur des champs internes, et non des m√©thodes comme Moment (m.year (), m.isValid ()). </li><li>  Luxon permet √† une m√©thode de d√©finir imm√©diatement tous les param√®tres n√©cessaires dt.set ({ann√©e: 2016, mois: 4}), dans Moment, ils ne sont d√©finis qu'un par un - une cha√Æne d'appels m.year (2016) .month (4). </li><li>  La dur√©e √† Luxon est une classe de dur√©e de niveau sup√©rieur distincte. </li></ul><br>  Sinon, Luxon a emprunt√© beaucoup d'id√©es √† Moment, la documentation contient m√™me des tableaux d'√©quivalence des m√©thodes Moment et Luxon. <br><br><h3>  Tailles des fichiers de biblioth√®que </h3><br>  <i>Luxon (v. 1.8.2)</i> <br>  luxon.min.js - 61 Ko <br><br>  <i>Moment (v. 2.23.0)</i> <br>  moment.min.js - 51 Ko <br>  moment.min.js + locale / ru.js - 59 Ko <br>  moment-with-locales.min.js - 323 Ko <br><br>  Comme vous pouvez le voir, sans les locales Moment, la taille est 10 Ko plus petite que Luxon, mais avec l'ajout de plusieurs locales, la taille devient approximativement √©gale. <br><br>  Si le support est requis imm√©diatement pour tous les param√®tres r√©gionaux, alors il y a un gain significatif de Luxon. <br><br><h3>  R√©sum√© </h3><br>  La biblioth√®que est compl√®tement pr√™te √† l'emploi et l'auteur promet son soutien.  La biblioth√®que a d√©j√† 7k + √©toiles sur le github et sa popularit√© ne fait que cro√Ætre.  Non seulement l'auteur lui-m√™me fait les commits dans son code, mais au moins 6 autres d√©veloppeurs. <br><br>  Je suppose que la biblioth√®que Luxon est une r√©ponse √† l'apparition du support de l'API Intl dans les navigateurs.  Les d√©veloppeurs Moment comprennent que l'utilisation des dates sur le Web peut changer de mani√®re significative et essaient de se pr√©parer √† ces changements.  Mais ils ne peuvent pas pr√©dire avec pr√©cision le d√©veloppement du web, et avec lui le nouveau projet (qu'ils appellent eux-m√™mes le projet Moment labs).  Les id√©es de Luxon seront-elles port√©es sur le moment 3?  La plupart des utilisateurs passeront-ils de Moment √† Luxon √† un moment donn√©?  Peut-√™tre que Luxon sera renomm√© Moment?  Les d√©veloppeurs eux-m√™mes admettent qu'ils ne peuvent pas maintenant r√©pondre √† ces questions. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433850/">https://habr.com/ru/post/fr433850/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433838/index.html">Lettre publique de Joshua Zayner sur le biohacker</a></li>
<li><a href="../fr433842/index.html">[Vendredi] Graffiti ASCII sur moniteurs r√©tro et autres surfaces</a></li>
<li><a href="../fr433844/index.html">√Ä propos des trois composants n√©cessaires au bon fonctionnement de l'informatique</a></li>
<li><a href="../fr433846/index.html">L'√©nergie nucl√©aire avant l'av√®nement des centrales nucl√©aires</a></li>
<li><a href="../fr433848/index.html">Brevet Apple pour les v√©hicules √©lectriques</a></li>
<li><a href="../fr433852/index.html">L'histoire d'une exp√©rience avec le vecteur Cython et C ++</a></li>
<li><a href="../fr433854/index.html">Voitures volantes, robots m√©decins et blockchain: ce qui s'est r√©alis√© en 2018</a></li>
<li><a href="../fr433856/index.html">Et qui est dans ton gang?</a></li>
<li><a href="../fr433858/index.html">Meilleurs articles JPoint 2018: Java / JVM et ses performances, Kotlin, Spring, Docker</a></li>
<li><a href="../fr433860/index.html">Prendre soin de l'utilisateur ou comment prot√©ger les clients contre les erreurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>