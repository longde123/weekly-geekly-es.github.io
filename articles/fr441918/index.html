<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📿 🍎 👩🏽‍🤝‍👨🏿 Nous sommes dans UltraHD Morty! Comment regarder n'importe quel film en 4K 👩🏿‍🔧 👊🏿 👉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous avez probablement entendu parler de la technologie DeepHD de Yandex qu'ils ont utilisée pour améliorer la qualité des vieux dessins animés soviét...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous sommes dans UltraHD Morty! Comment regarder n'importe quel film en 4K</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441918/">  Vous avez probablement entendu parler de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la technologie DeepHD de Yandex</a> qu'ils ont utilisée pour améliorer la qualité des vieux dessins animés soviétiques.  Malheureusement, ce n'est pas encore public, et nous, programmeurs réguliers, n'avons pas le dévouement pour écrire notre propre solution.  Mais personnellement, je voulais vraiment regarder Rick et Morty sur mon <b>écran</b> Retina <b>2880x1880</b> .  Et j'ai été profondément déçu, car même la vidéo <b>1080p</b> (la plus élevée disponible pour cette série) semble vraiment floue sur un écran Retina!  Ne vous méprenez pas, 1080p est souvent assez bon, mais Retina est conçu de telle manière qu'une animation avec ses contours prononcés en 1080p semble terriblement floue, comme 480p sur un moniteur FullHD. <br><br>  J'ai décidé de voir Rick et Morty en 4K, même si je ne peux pas écrire de réseaux de neurones.  Et, étonnamment, j'ai trouvé une solution.  Vous n'avez même pas besoin d'écrire de code: tout ce dont vous avez besoin est d' <b>environ 100 Go d'espace libre</b> et un peu de patience.  Le résultat est une image 4K nette qui est meilleure que toute interpolation. <br><br><img src="https://habrastorage.org/webt/x7/-s/uq/x7-suqyduck7irwmeejtauehd2g.jpeg"><br><a name="habracut"></a><br><h3>  Les préparatifs </h3><br>  Tout d'abord, nous devons comprendre qu'il n'existe pas de technologie pour la mise à l'échelle vidéo à l'aide de réseaux de neurones.  Ou du moins, il n'est pas accessible au public.  Et puisque c'est le cas, nous devons transformer notre vidéo en un tas d'images fixes! <br><br>  Adobe Premiere Pro ou toute autre suite de montage vidéo peut le faire, mais, comme il n'est probablement pas installé sur beaucoup de PC, j'ai utilisé l'utilitaire de console <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ffmpeg</a> .  J'ai pris le premier épisode de la première série et je suis parti: <br><br><pre><code class="bash hljs">$ ffmpeg -i RiM01x01_4K.mp4 -q:v 1 IM/01x01_%05d.jpg</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Pourquoi jpg et pas PNG?</b> <div class="spoiler_text">  Une bonne question.  Le fait est que 31 000 PNG résultants auraient pris énormément de place.  À tel point qu'un léger sacrifice de qualité en vaut la peine.  De plus, le paramètre = q: v 1 signifie que nous générons des JPG avec la meilleure qualité possible. <br></div></div><br>  Environ 10 minutes plus tard, nous obtenons un énorme dossier rempli d'images.  Pour moi, il a fallu <b>26 Go</b> . <br><img src="https://habrastorage.org/webt/g0/5r/1p/g05r1pwaaed4fh4i98a9gkykjya.png"><br>  Maintenant, tout ce dont nous avons besoin est de traiter chacun d'entre eux! <br><br><h3>  Comment? </h3><br>  J'ai trouvé trois options qui fonctionnaient assez bien - plutôt célèbres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Let's Enhance</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">waifu2x</a> orienté <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">anime</a> et Mail.ru Vision. <br><br>  Je montrerai les exemples plus tard. <br><br>  Mail.ru Vision et Let's Enhance font du bon travail, mais malheureusement, ils ne sont pas open-source, ce qui signifie que pour traiter 31000 images, j'aurais besoin d'écrire un e-mail à leurs créateurs et probablement payer beaucoup.  Waifu2x est open-source, mais le résultat était plutôt médiocre - beaucoup de bruits et d'artefacts.  Après tout, Rick et Morty ne sont pas des anime. <br><br>  Je me suis presque résigné à creuser GitHub et les forums thématiques, mais ... un sauveur est apparu!  J'ai trouvé une solution qui fonctionnait localement sur la machine, traite 1 image en moins d'une seconde et livre en qualité.  Vous ne croirez pas qui est venu à notre secours une fois de plus! <br><br>  <b>Adobe Photoshop!</b> <br><br>  Et non, je ne vais pas vous raconter comment vous pouvez améliorer une image avec quelques filtres.  Adobe a en fait formé un réseau neuronal approprié qui peut «compléter» une image lorsque vous la mettez à l'échelle dans l'application! <br><br>  Pour commencer, nous devons ouvrir l'image source, aller dans le menu du haut, puis Image - Taille de l'image, et choisir l'option de rééchantillonnage «Preserve Details 2.0». <br><br><img src="https://habrastorage.org/webt/uy/eo/df/uyeodfspq85mcre_6xvoggt1lxc.jpeg"><br><br>  Le résultat était étonnamment bon!  Probablement seulement à la fin de Let's Enhance.  Voici la comparaison (avec l'image agrandie à environ 800%): <br><br><img src="https://habrastorage.org/webt/dm/dq/qk/dmdqqkz_mbkgc_dhgmxikypy7ck.jpeg"><br><br>  <i>Et maintenant?</i>  <i>Traiter manuellement chaque image?</i> <br>  Bien sûr que non!  Photoshop dispose de l'outil Actions qui permet d'enregistrer d'abord une séquence d'actions, puis de l'appliquer à un dossier entier d'images.  Le processus est une recherche rapide sur Google. <br><br>  J'ai quitté mon ordinateur portable pour traiter 31 000 images toute la nuit avec une simple instruction: «upscale 2x and save».  Le lendemain matin, tout était prêt.  J'avais un autre dossier plein d'images, mais maintenant en 4K et occupant <b>82 Go d'espace disque</b> . <br><br><h3>  Retour à la vidéo </h3><br>  Ffmpeg à nouveau à la rescousse. <br><br>  Tout d'abord, nous nous souvenons d'avoir oublié la piste audio et de l'extraire du fichier d'origine: <br><br><pre> <code class="bash hljs">ffmpeg -i RiM01x01_1080p.mp4 -vn -ar 44100 -ac 2 -ab 320K -f mp3 sound.mp3</code> </pre> <br>  Ensuite, nous mettons le fichier audio dans le dossier avec toutes les images 4K.  Nous sommes maintenant prêts pour le montage final! <br><br><pre> <code class="bash hljs">ffmpeg -i 01x01_%05d.jpg -i sn.mp3 -vcodec libx264 -preset veryslow -crf 10 -r 23.976 RiM_01x01_4K.mp4</code> </pre> <br>  <b>Attention</b> : après -r, spécifiez le <b>framerate exact de l'original</b> , sinon la piste audio serait mal alignée avec la vidéo! <br><br><h3>  C'est fait! </h3><br>  Nous avons maintenant le premier épisode de Rick et Morty en 4K.  Voici l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple de vidéo</a> .  Bien sûr, tout le processus était un peu amateur, mais cette approche a un sérieux avantage.  Lors de l'importation des images dans Photoshop, nous pouvons les bricoler manuellement pour les obtenir juste.  Ajustez la mise au point, la balance des couleurs sur la base de quelques images, écrivez-la dans une action, appliquez-la à toute la vidéo et - le tour est joué!  Un résultat parfait sans trop de ruse mathématique.  Cela rapproche un peu le «miracle upscaling» d'un utilisateur moyen.  Les technologies les plus complexes développées depuis des siècles ne peuvent pas être utilisées rapidement et sans connaissances particulières - quel est-il, sinon l'avenir? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441918/">https://habr.com/ru/post/fr441918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441906/index.html">Déployons sur Openshift</a></li>
<li><a href="../fr441908/index.html">La médecine numérique peut-elle résister aux pirates</a></li>
<li><a href="../fr441910/index.html">Le livre «Maîtriser Kubernetes. Orchestration des architectures de conteneurs "</a></li>
<li><a href="../fr441914/index.html">L'ère de l'économie des impressions est déjà proche. Technologies du futur à la maison</a></li>
<li><a href="../fr441916/index.html">Une réalité qui travaille dur - Xichang Satellite Launch Center - XSLC</a></li>
<li><a href="../fr441920/index.html">Stratégie de sécurité de l'information: avez-vous décidé de la marche à suivre?</a></li>
<li><a href="../fr441928/index.html">Lancez l'application dans Openshift et comparez les outils existants</a></li>
<li><a href="../fr441932/index.html">Comment devancer ses concurrents: SIBUR développe la fabrication additive</a></li>
<li><a href="../fr441934/index.html">7 étapes pour utiliser Room. Procédure pas à pas pour la migration de votre application vers Room</a></li>
<li><a href="../fr441938/index.html">Formule pour le coréen, ou reconnaissez Hangul rapidement, facilement et sans erreurs.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>