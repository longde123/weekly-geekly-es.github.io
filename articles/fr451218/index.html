<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📴 💋 👨🏼‍💼 Business Intelligence en russe - Quintettes 🔗 🌨️ 🦊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans l'une de nos notes de blog, nous avons couvert l' approche du stockage et du traitement des données , à propos de laquelle nous avons reçu plusie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Business Intelligence en russe - Quintettes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/neoflex/blog/451218/"><p> Dans l'une de nos notes de blog, nous avons couvert l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">approche du stockage et du traitement des données</a> , à propos de laquelle nous avons reçu plusieurs questions très attendues d'un tel plan: «En général, nous attendons la mise en œuvre, maintenant il vole ...».  Sur la base des résultats de plusieurs implémentations, je parlerai des avantages et des inconvénients de cette approche en utilisant un de nos développements comme exemple. </p><br><p>  Nous offrons généralement à nos clients un outil de BI assez puissant et flexible qui peut résoudre tous leurs problèmes, mais il s'agit d'un produit commercial étranger, et les clients sont de plus en plus intéressés par le thème de la substitution des importations.  Dans le cadre de l'exploration de nos perspectives à cet égard, nous avons commencé à tester notre propre ensemble d'outils de BI à l'aide de solutions open source et d'une plate-forme de développement basée sur un quintet. </p><br><img src="https://habrastorage.org/webt/u9/pk/5e/u9pk5ewq1x1ri6jrggrn9e38qu0.png"><br><br><p>  Nous avons pris notre produit commercial existant comme référence, nous effectuerons donc une comparaison avec lui chaque fois que possible. </p><a name="habracut"></a><br><p>  La tâche consistait à créer les composants suivants: </p><br><ul><li>  une base de données pour stocker les data marts et les informations de service (utilisateurs, paramètres, etc.); </li><li>  interface Web du système et de son ORM; </li><li>  Fonctionnalité BI - chargement des données, rapports personnalisés, graphiques, tableaux croisés dynamiques. </li></ul><br><p>  Comme base, nous avons pris <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une plate</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">forme de développement</a> qui comprend un modèle de données, un concepteur de requêtes, un moteur de modèle et prend en charge un modèle de rôle pour le contrôle d'accès des utilisateurs. </p><br><blockquote><p>  L'objet de l'ordonnance est le rapprochement des relevés bancaires et l'analyse de ses données cumulées au cours des 7 dernières années.  Les données source sont stockées dans HDFS, les rapports eux-mêmes sont calculés au même endroit, puis leurs résultats tombent dans la fenêtre de la base de données relationnelle.  Les vitrines contiennent environ 300 Go de données pour plusieurs dizaines de formulaires de rapport différents et plusieurs centaines de rapports associés.  Le système doit servir 20 utilisateurs à la charge de pointe, le temps de réponse de l'interface doit être dans la seconde. </p></blockquote><br><p>  La création d'une structure de données ne nous a pas pris beaucoup de temps: l'éditeur de type de plateforme vous permet de créer et de décrire des objets métier tels quels, sans avoir besoin d'adapter les besoins des utilisateurs aux spécificités de l'environnement (types et dimensions de données, clés, restrictions, noms de champs de données, identifiants, etc.).  C'est le premier plus des quintets que nous pouvons corriger. </p><br><p>  C'est ainsi que la structure des données est créée - nous définissons les termes nécessaires, et à partir d'eux nous formons les objets de notre domaine: </p><br><img src="https://habrastorage.org/webt/ca/xm/ow/caxmowlcuib8qxvoeferzoit26y.gif"><br><p>  Après plusieurs minutes d'activité au format copier / coller, nous avons obtenu la structure de données requise pour un formulaire et plusieurs répertoires auxiliaires pour celui-ci.  La structure des données du formulaire (après décomposition par l'analyste) ressemble à ceci: </p><br><img src="https://habrastorage.org/webt/ok/gd/9d/okgd9dlwt9nkiaet4nhee488nl4.png"><br><br><p>  Un analyste familier avec le sens commercial des données présentées ici lit ce qui suit: Chaque instance F110 (formulaire 110 dans la terminologie CB) a une précision donnée (elle peut être «exacte» ou «arrondie») et comprend un ensemble de codes, pour chacun desquels les montants en roubles et en devises sont indiqués. </p><br><p>  Dans le navigateur de données, où les données sont présentées selon la structure spécifiée, nous voyons un tel tableau sur les instances de formulaire existant dans le système: </p><br><img src="https://habrastorage.org/webt/ro/n6/ft/ron6ftlagq_rqj5tz8c_ghxdkzk.png"><br><br><p>  La valeur d'identification du formulaire est sa date de déclaration, les codes de déclaration sont stockés sous la forme d'un tableau subordonné, dont la taille est indiquée entre parenthèses. </p><br><p>  Comme mentionné, nous avons un peu décomposé les données, par rapport à la structure d'origine, afin de ne pas stocker de longues lignes de valeurs répétitives dans la base de données, comme ce que voit un programmeur ou un administrateur de base de données: </p><br>  Tableau avec données dans le système de référence: <br><img src="https://habrastorage.org/webt/nr/4m/k3/nr4mk3p6jfxs-ejr8upnxi1vbns.png"><br><br><p>  Soit dit en passant, c'est pourquoi nous positionnons la plate-forme (ci-après nous l'appellerons Integral) en tant qu'outil de développement pour l'analyste, pas le programmeur. </p><br><p>  La structure des données auxiliaires est incommensurablement plus grande, car elle stocke toutes les données initiales, les paramètres du rapport, les règles de vérification de l'intégrité des données à l'intérieur du rapport et dans les rapports associés, l'historique des calculs et des rapprochements, ainsi que certaines règles de transformation des activités de données pendant la construction du rapport: </p><br><img src="https://habrastorage.org/webt/5-/ty/xy/5-tyxyaidwomjswea4rpn8sibhs.png"><br><p>  (la structure n'est pas donnée dans son intégralité) </p><br><p>  Lorsque la structure de données est prête, vous pouvez y charger des données.  Le moyen le plus simple ici est de télécharger un fichier préparé au format Integral (analogue à .csv, mais avec un balisage de type).  Ce format contient une description des données et des données elles-mêmes. </p><br><div class="spoiler">  <b class="spoiler_title">Afficher le fichier</b> <div class="spoiler_text"><p>  Dans l'exemple ci-dessous, les 3 premières lignes du fichier décrivent la structure du formulaire (s'il n'est pas dans le système, il sera créé), puis les données elles-mêmes - les paramètres du formulaire et les paramètres des objets de rapport qui lui sont subordonnés. </p><br><pre><code class="plaintext hljs">268:110:DATE;277;270; 277::SHORT; 270:  :SHORT;  :SIGNED;   :SIGNED; 268::20121231;281;; 270::A/5.2;1233682389.47;; 277:281:; 270::A/5.3;622836720.22;; 270::A/6.4;19800;; 270::A/9.2;27125165.14;; 270::S16203/1.2;608607846.309999;; 270::S16305/4;2727510994.84;; 270::S16305/4.1;32049069.51;; 270::S16305/14;2737711.65;; 270::S25302/4;2725748122.98999;; 270::S25302/4.1;40952511.36;; 270::IL/2;87429694.5699999;62717458.21; 270::IL/4;33517212.95;; 270::IL/9;1423281.69;8278.24; 270::IL/11;86433534.5699999;519956.63; 270::IA/1;147792224.509999;4517060.94; 270::IA/2;737704.92;; 270::IA/3;27099836.07;2637.79; 270::IA/6;5607868.86;408410.4; 270::IA/8;103837028.49;48841202.69; 270::IA/10;112302573.56;; 268::20121231;280;; 270::A/5.2;1233682;; 277:280:; 270::A/5.3;622837;; 270::A/6.4;20;; 270::A/9.2;27125;; 270::S16203/1.2;608608;;</code> </pre> </div></div><br>  Pour ce formulaire, la base de données a 4470 dates de rapport qui, une fois déchargées dans un fichier plat, prennent un peu plus de 1 Mo.  Dans la base de données d'origine (Oracle), ils occupent 3,1 Mo (sans index) sous une forme normalisée et 4,2 Mo dans une vitrine dénormalisée, que nous essayons de répéter en tant que quintets.  Les quintettes sont indexés et normalisés, et dans leur format, ces données occupent déjà 10 Mo. <br><a name="volumes"></a><br><br>  Les quantités de données à comparer sont résumées dans le tableau (en mégaoctets): <br><div class="scrollable-table"><table><tbody><tr><th></th><th align="center">  Texte </th><th align="center">  RDBMS </th><th align="center">  Quintettes </th></tr><tr><td>  Les données </td><td align="right">  1.1 </td><td align="right">  3.1 </td><td align="right">  5.1 </td></tr><tr><td>  Dénormalisé </td><td></td><td align="right">  4.2 </td><td></td></tr><tr><td>  Indices </td><td></td><td align="right">  6.2 </td><td align="right">  5.1 </td></tr><tr><td>  Données + index </td><td></td><td align="right">  9.3 </td><td align="right">  10.2 </td></tr></tbody></table></div><br><p>  À ce stade, il convient de prêter attention à la taille occupée par les bases des approches comparées.  En raison de la normalisation supplémentaire des quintets et des dépenses pour les indices composites dans la base de référence, la taille totale occupée par les bases de données est presque la même. </p><br>  Base de référence: <br><img src="https://habrastorage.org/webt/07/ue/vu/07uevub4nkj0qnbgctmpqfho9pe.png"><br><br>  Quintettes: <br><img src="https://habrastorage.org/webt/cq/_e/d2/cq_ed2rliwl4gkwnxgp_pqsjlvy.png"><br><br><p>  De plus, dans Integral, nous avons immédiatement indexé tous les champs de la table, et dans le système de référence - seulement la date, le code et le montant en roubles, ce qui nécessitera des coûts supplémentaires lorsque de nouveaux besoins surgiront. </p><br><p>  <i>Pour référence: dans la base de données, la taille totale de ce formulaire, y compris les rapports et les paramètres de prise en charge, est d'environ 400 Mo (il est relativement petit).</i> </p><br><p>  Ainsi, les données sont téléchargées et la partie la plus difficile du projet reste à venir - la création d'une interface.  L'interface du système de référence vous permet de visualiser les données des formulaires, les rapports annexes, les paramètres et le cycle de vie des formulaires.  Pour gérer l'accès et communiquer avec la base de données, nous avons utilisé les capacités de base de notre plateforme - un modèle de rôle et un concepteur de rapports. </p><br><p>  La liste des utilisateurs avec leurs rôles ressemble à ceci: </p><br><img src="https://habrastorage.org/webt/ie/v1/g5/iev1g5bfej66iarj8prm4rxeen4.png"><br><br><p>  Si vous cliquez sur le nom du rôle (marqué d'un ovale rouge sur la figure ci-dessus), vous pouvez consulter son contenu: </p><br><img src="https://habrastorage.org/webt/g1/8x/4w/g18x4wxhcqn-ybvo_fxrocan-s4.png"><br><br><p>  Les objets de rôle peuvent être définis sur 3 niveaux d'accès; le masque peut être utilisé: </p><br><img src="https://habrastorage.org/webt/dv/e4/tr/dve4trqzpgdl84uijgfbn_1lcds.png"><br><br><p>  L'édition des données se fait également au moyen de l'interface de base.  Voici, par exemple, un formulaire d'édition utilisateur: </p><br><img src="https://habrastorage.org/webt/jd/vt/xz/jdvtxzhmaylnkg-zhv0swxwefqa.png"><br><br><p>  Nous avons présenté le menu spécifique de notre application et de ses postes de travail dans un fichier compact, car ils sont tous du même type: un formulaire de demande de 2-3 éléments et un tableau avec les résultats des demandes. </p><br><img src="https://habrastorage.org/webt/up/el/pr/upelprt0of7_mecdtpk_mqgxvd4.png"><br><br><h4>  L'architecture s'est avérée très simple: nous avons créé de nombreuses demandes de données (vues) et écrit un plug-in qui implémente des échantillons de données arbitraires dans les tables et les champs inclus dans ces vues. </h4><br><p>  Par exemple, nous avons un soi-disant rapport de décryptage au format 110, il contient des données non agrégées sur lesquelles il est construit.  Voici à quoi ressemble ce rapport: </p><br><img src="https://habrastorage.org/webt/jd/zm/fc/jdzmfcrujmetvb_w2vqrkfa6g-y.png"><br><br><p>  Afin de vérifier l'exactitude du formulaire, l'utilisateur doit pouvoir effectuer toutes les sélections, trier, filtrer, grouper, transposer, ainsi que créer ses propres champs calculés.  Notre plugin est appelé par le bouton «Actions» en haut du tableau. </p><br><img src="https://habrastorage.org/webt/n4/kx/ni/n4kxnicwdqq4y6_ykf06x-pnhi0.png"><br><br><p>  Le plugin répète les fonctionnalités du générateur de requêtes intégré, mais en plus de récupérer des données, il peut dessiner des graphiques et des tableaux croisés dynamiques.  Par exemple, nous devons filtrer par section, ajouter une paire de colonnes calculées et faire une sélection des montants regroupés par elles.  Nous définissons tout cela: </p><br><img src="https://habrastorage.org/webt/zd/hi/rx/zdhirxamjgonu9xzepqwike0cqe.png"><br><br><p>  De nouvelles colonnes sont ajoutées à la liste par le lien du même nom.  Par le bouton "Calculs" nous définissons les formules pour eux en utilisant un constructeur simple: </p><br><img src="https://habrastorage.org/webt/d6/tu/fc/d6tufcwrz1qaxfhca1fwiokqdjo.png"><br><br><p>  Nous définissons un nouvel ordre de colonne et cliquez sur «Appliquer» et notre rapport est modifié au besoin - au lieu de 7 colonnes de base, nous en voyons trois, dont deux que nous venons de créer: </p><br><img src="https://habrastorage.org/webt/4t/sp/1a/4tsp1arr8uu8nbz7zeut6qd0foi.png"><br><br><div class="spoiler">  <b class="spoiler_title">Comment ça marche sous le capot?</b> <div class="spoiler_text"><p>  Le plugin communique avec le service web de l'application via api, il a effectué la requête suivante: </p><br><pre> <code class="plaintext hljs">api/neo/report/1392573?FR_date=20181231&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=LEFT(\:1392578\:\,5),SUBSTRING(\:1392578\:\,6\,3),1392617:SUM&amp;ORDER=1392617&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=1&amp;TOTALS=1392617:SUM&amp;LIMIT=10</code> </pre><br><p>  Et j'ai obtenu cette réponse: </p><br><pre> <code class="json hljs">{ «columns»: [ «LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">5</span></span>)», «SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)», «<span class="hljs-number"><span class="hljs-number">1392617</span></span>» ], «formats»: [ «SHORT», «SHORT», «SIGNED» ], «data»: { «LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,5)»: [ «<span class="hljs-number"><span class="hljs-number">60324</span></span>», «<span class="hljs-number"><span class="hljs-number">40817</span></span>», «<span class="hljs-number"><span class="hljs-number">47425</span></span>», «<span class="hljs-number"><span class="hljs-number">47404</span></span>», «<span class="hljs-number"><span class="hljs-number">60302</span></span>», «<span class="hljs-number"><span class="hljs-number">47404</span></span>» ], «SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,6,3)»: [ «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">840</span></span>», «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">978</span></span>» ], «  »: [ «<span class="hljs-number"><span class="hljs-number">153</span></span> <span class="hljs-number"><span class="hljs-number">825.71</span></span>», «<span class="hljs-number"><span class="hljs-number">527</span></span> <span class="hljs-number"><span class="hljs-number">901.11</span></span>», «<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">415</span></span> <span class="hljs-number"><span class="hljs-number">189.23</span></span>», «<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.02</span></span>», «<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">330.88</span></span>», «<span class="hljs-number"><span class="hljs-number">58</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.00</span></span>» ] }, «totals»: [ «„, “», «<span class="hljs-number"><span class="hljs-number">69</span></span> <span class="hljs-number"><span class="hljs-number">685</span></span> <span class="hljs-number"><span class="hljs-number">246.95</span></span>» ] }</code> </pre><br><p>  Si quelqu'un s'intéresse à la requête SQL réelle qui a été exécutée dans la base de données de quintet, alors voici: </p><br><div class="spoiler">  <b class="spoiler_title">Voir SQL</b> <div class="spoiler_text"><h4>  L'analyste ne voit pas ce SQL; il utilise le générateur de requêtes décrit ci-dessous. </h4><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">5</span></span>) v13, <span class="hljs-keyword"><span class="hljs-keyword">SUBSTRING</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) v14, <span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> neo a182081 <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182083 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182083.up=a182081.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.t=<span class="hljs-number"><span class="hljs-number">182083</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182088 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182088.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182088.t=<span class="hljs-number"><span class="hljs-number">182088</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182090 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182090.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182090.t=<span class="hljs-number"><span class="hljs-number">182090</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182091 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182091.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182091.t=<span class="hljs-number"><span class="hljs-number">182091</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182092 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182092.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182092.t=<span class="hljs-number"><span class="hljs-number">182092</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a299 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a299.t=<span class="hljs-number"><span class="hljs-number">299</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.val=a299.val <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a328 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a328.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a328.t=<span class="hljs-number"><span class="hljs-number">328</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a303 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a303.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.t=<span class="hljs-number"><span class="hljs-number">303</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a304 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a304.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.t=<span class="hljs-number"><span class="hljs-number">304</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182089 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182089.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182089.t=<span class="hljs-number"><span class="hljs-number">182089</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> a182081.up!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(a182081.val)!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.t=<span class="hljs-number"><span class="hljs-number">182081</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.val=<span class="hljs-string"><span class="hljs-string">'20181231′ AND a328.val ='</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>′ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.val&gt;=<span class="hljs-string"><span class="hljs-string">'19000101′ AND a303.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20181231</span></span>′ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.val&gt;=<span class="hljs-string"><span class="hljs-string">'20181231′ AND a304.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20991231</span></span>′ <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> v13, v14 <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> SIGNED) <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> </div></div><br><p>  La demande peut sembler un peu plus compliquée que prévu, car elle sélectionne les données actuelles des codes de déclaration en fonction de leur validité.  Dans le générateur de rapport intégré, cette requête se compose de colonnes de rapport, de paramètres et de conditions de jointure de table, si nécessaire. </p><br><img src="https://habrastorage.org/webt/ro/mx/tw/romxtw85qjp94yfrzqmf47vnvsm.png"><br><br><p>  L'intégrale elle-même est capable de générer des conditions de jointure de table, car toutes sont déterminées par des relations de quintet, cependant, dans le cas du versioning, nous avons dû combiner les tables manuellement et spécifier explicitement la condition de JOIN.  Les codes de la clause ON sont des identificateurs pour les objets de colonne et de requête. </p><br><p>  La requête combine trois tables, en choisissant parmi elles les champs de données suivants ("colonnes de requête" requises): </p><br><img src="https://habrastorage.org/webt/_a/f3/cs/_af3cspclqx4lkhvfasksxbchxg.png"><br>  <a href="">(image en taille réelle)</a> <br><br><p>  Les colonnes de rapport, les champs calculés, les filtres, etc., qui composent la requête SQL, sont répertoriés ici.  Le Générateur de rapports vous permet d'implémenter presque n'importe quelle conception du langage SQL, y compris la jonction de requêtes et de requêtes imbriquées. </p><br></div></div><br><p>  En plus des sélections avec des regroupements, l'utilisateur peut utiliser le mécanisme des tableaux croisés dynamiques.  Nous avons ajouté l'outil de table <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pivottable.js.org</a> à notre plugin. <br>  Sélectionnez les colonnes qui nous intéressent et passez en mode tableau croisé dynamique: </p><br><img src="https://habrastorage.org/webt/5n/wb/du/5nwbduykd19ryanqanvvtaymp4g.png"><br><br><p>  Ici, en utilisant drag'n'drop, nous pouvons analyser les données reçues par l'échantillon que nous avons configuré, y compris nos champs arbitraires.  De plus, ici, vous pouvez également filtrer les données par n'importe quel champ. </p><br><img src="https://habrastorage.org/webt/y6/dg/tg/y6dgtgwvwf4yprzf6qvp2dijbss.gif"><br><br><p>  Nous avons utilisé le produit gratuit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.amcharts.com</a> pour dessiner des graphiques.  Avec lui, comme avec pivotable, tout est assez simple: nous sélectionnons le type de graphique et initialisons le composant avec notre tableau de données obtenu à partir d'Integral: </p><br><img src="https://habrastorage.org/webt/j3/zt/eu/j3zteutdk8xhxddxikns8nr12fo.gif"><br><br><p>  Avec cela, nous avons, en fait, accompli la tâche dans la mesure qui satisfait les utilisateurs du produit existant.  Nous avons maintenant un système qui répond aux exigences de substitution à l'importation: tous les produits sont gratuits et remplaçables.  Oui, nous avons réalisé loin de toutes les possibilités qu'offre le système existant, mais seulement celles qui sont nécessaires pour <i>ce</i> client.  Mais nous venons de commencer! </p><br><a name="tests"></a><br><h2>  Alors volé ou pas? </h2><br><p>  Nous devrions également discuter des performances du système résultant.  Dans ce problème, avec une quantité de données suffisamment importante (des centaines de gigaoctets), les échantillons affectent de petits fragments, dont les quintettes sont toujours collectés à l'aide d'index.  Cela conduit au fait que, à n'importe quelle taille de la base de données, les requêtes sont traitées à une vitesse acceptable, sans entraîner une dégradation des performances de type avalanche. </p><br><p>  Nous avons enregistré 20 actions utilisateur dans un script de test et l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avons</a> exécuté sur le service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">loadimpact.com</a> .  Il s'est avéré 27 requêtes différentes, car certaines actions sont effectuées en 2 requêtes au serveur (pour construire un affichage de page, par exemple). </p><br><div class="spoiler">  <b class="spoiler_title">Le script de test s'est avéré comme ceci</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { group, sleep } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'k6′; import http from '</span></span>k6/http<span class="hljs-string"><span class="hljs-string">'; // Version: 1.3 // Creator: Load Impact URL test analyzer export let options = { stages: [ { «duration»: «3m0s», «target»: 25 } ], maxRedirects: 0, discardResponseBodies: true, }; export default function() { group("page_1 — https://*****.ru/neo/dict«, function() { let req, res; req = [{ «method»: «get», «url»: «https://*****.ru/neo/info», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «upgrade-insecure-requests»: «1», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8» } } }]; res = http.batch(req); sleep(0.62); req = [{ «method»: «get», «url»: «https://*****.ru/neo/info», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «upgrade-insecure-requests»: «1», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20181231&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20181130&amp;ORDER=1392617&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20181031», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20180930&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392741?», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392757?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392768?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_dropdown_arrow.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_detailed_report.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_classifiers.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_launch_report.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_manage_form_status.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_quality_management.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_download.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/css/variables.css», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392779?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392538?&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/edit_obj/1392129», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/edit_obj/1390552», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/object/18», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20180731&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=1392576,1392617:SUM,1392589&amp;LIMIT=100», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20180831&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20180630&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20180531&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=2&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/info», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;ORDER=1392617&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxP.ttf», «params»: { «headers»: { «origin»: «https://*****.ru», «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://fonts.googleapis.com/css?family=Roboto» } } }]; res = http.batch(req); // Random sleep between 5s and 10s sleep(Math.floor(Math.random()*5+5)); }); }</span></span></code> </pre> <br></div></div><br><p>  Voici ce que nous avons vu lorsque nous avons exécuté le script - le générateur de charge a envoyé à notre application un nombre croissant de demandes par seconde, nous avons obtenu une échelle classique pour trouver les performances maximales / maximales: </p><br><img src="https://habrastorage.org/webt/ig/a_/xt/iga_xtu0manyadhs8cz_ytmj3k4.png"><br><br><p>  Ce générateur envoie des requêtes par lots, et pas de manière uniforme, comme ce serait le cas avec des utilisateurs simultanés.  Par conséquent, le graphique montre les pics de charge et les performances globales semblent également pires dans ce mode. </p><br><p>          : </p><br><img src="https://habrastorage.org/webt/zn/an/je/znanjexiyp3mkguce5d0ycw0ulc.png"><br><br><p>       ,   -      SQL-.   ,   ,   8  33 SQL-     :       ,  -,  SQL- (   ,  )      . </p><br><p>   ,  20-25    (    20 ),       — 1   .     ,     : 1  2.4   1   . </p><br><p>    ( 10   )      0.1-0.3 ,     . </p><br><h4>  ,                  . </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451218/">https://habr.com/ru/post/fr451218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451208/index.html">Tri "topologique" d'un graphe avec cycles</a></li>
<li><a href="../fr451210/index.html">Intégration de Jira avec GitLab</a></li>
<li><a href="../fr451212/index.html">Système de protection contre les arcs avec la possibilité de fonctionner sur un signal de courant</a></li>
<li><a href="../fr451214/index.html">Fondements de l'intelligence artificielle moderne: comment ça marche et va-t-il détruire notre société cette année?</a></li>
<li><a href="../fr451216/index.html">Comment désactiver complètement Windows Defender sur Windows 10</a></li>
<li><a href="../fr451220/index.html">Détails techniques du récent crash de l'extension Firefox</a></li>
<li><a href="../fr451222/index.html">Je ne suis pas ingénieur chez maman</a></li>
<li><a href="../fr451224/index.html">Nouvelles de la semaine: les collectionneurs veulent avoir accès aux téléphones russes, nouveau noyau Linux 5.1, fuite de données Samsung</a></li>
<li><a href="../fr451226/index.html">Nouvelle vie des anciens jeux: le répertoire source le plus ouvert des ports source (Java + PHP)</a></li>
<li><a href="../fr451230/index.html">Cinq erreurs commises par les gens lors de la préparation de l'immigration de travail aux États-Unis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>