<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¸ğŸ» ğŸ ğŸ‘¨ğŸ»â€âœˆï¸ Panduan SELinux Beginner ğŸ™…ğŸ¼ ğŸ–Šï¸ ğŸ“¹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Terjemahan artikel disiapkan untuk siswa kursus Keamanan Linux. 



 SELinux atau Security Enhanced Linux adalah mekanisme kontrol akses canggih yang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Panduan SELinux Beginner</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/460387/"><p><img src="https://habrastorage.org/webt/pp/_j/xp/pp_jxp4pddr_8apkdp5bsztp3r4.png"></p><br><p>  <em>Terjemahan artikel disiapkan untuk siswa kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Keamanan Linux.</a></em> </p><br><hr><br><p>  SELinux atau Security Enhanced Linux adalah mekanisme kontrol akses canggih yang dikembangkan oleh Badan Keamanan Nasional AS (NSA) untuk mencegah intrusi berbahaya.  Ini mengimplementasikan model kontrol akses paksa (atau wajib) (Eng. Mandatory Access Control, MAC) di atas model discretionary (atau selektif) yang ada (Eng. Discretionary Access Control, DAC), yaitu izin untuk membaca, menulis, mengeksekusi. <a name="habracut"></a></p><br><p>  SELinux memiliki tiga mode: </p><br><ol><li>  <strong>Penegakan</strong> - <strong>Penolakan</strong> akses berdasarkan aturan kebijakan. </li><li>  Tindakan penebangan <strong>permisif</strong> yang melanggar kebijakan, yang dalam mode penegakan akan dilarang. </li><li>  <strong>Dinonaktifkan</strong> - Nonaktifkan SELinux sepenuhnya. </li></ol><br><p> Secara default, pengaturannya ada di <code>/etc/selinux/config</code> </p><br><h1 id="izmenenie-rezhimov-selinux">  Mengubah Mode SELinux </h1><br><p>  Untuk mengetahui mode saat ini, jalankan </p><br><pre> <code class="plaintext hljs">$ getenforce</code> </pre> <br><p>  Untuk mengubah mode menjadi permisif, jalankan perintah berikut </p><br><pre> <code class="plaintext hljs">$ setenforce 0</code> </pre> <br><p>  atau, untuk mengubah mode dari <strong>permisif</strong> ke <strong>menegakkan</strong> , lakukan </p><br><pre> <code class="plaintext hljs">$ setenforce 1</code> </pre> <br><p>  Jika Anda perlu menonaktifkan SELinux sepenuhnya, maka ini hanya dapat dilakukan melalui file konfigurasi </p><br><pre> <code class="plaintext hljs">$ vi /etc/selinux/config</code> </pre> <br><p>  Untuk menonaktifkan, ubah parameter SELINUX sebagai berikut: </p><br><pre> <code class="plaintext hljs">SELINUX=disabled</code> </pre> <br><h1 id="nastroyka-selinux">  Pengaturan SELinux </h1><br><p>  Setiap file dan proses ditandai dengan konteks SELinux, yang berisi informasi tambahan seperti pengguna, peran, jenis, dll.  Jika ini adalah pertama kalinya Anda mengaktifkan SELinux, Anda harus terlebih dahulu mengkonfigurasi konteks dan label.  Proses pelabelan dan konteks dikenal sebagai pelabelan.  Untuk mulai menandai, dalam file konfigurasi, ubah mode menjadi <strong>permisif</strong> . </p><br><pre> <code class="plaintext hljs">$ vi /etc/selinux/config SELINUX=permissive</code> </pre> <br><p>  Setelah mengatur mode <strong>permisif</strong> , buat file tersembunyi kosong bernama <code>autorelabel</code> di root </p><br><pre> <code class="plaintext hljs">$ touch /.autorelabel</code> </pre> <br><p>  dan nyalakan kembali komputer </p><br><pre> <code class="plaintext hljs">$ init 6</code> </pre> <br><p>  Catatan: kami menggunakan mode <strong>permisif</strong> untuk menandai, karena menggunakan mode <strong>penegakan</strong> dapat menyebabkan sistem crash saat reboot. </p><br><p>  Jangan khawatir jika unduhan macet pada beberapa file, penandaan membutuhkan waktu.  Setelah menandai dan mem-boot sistem Anda, Anda dapat pergi ke file konfigurasi dan mengatur mode <strong>penegakan</strong> , serta menjalankan: </p><br><pre> <code class="plaintext hljs">$ setenforce 1</code> </pre> <br><p>  Anda sekarang telah berhasil mengaktifkan SELinux di komputer Anda. </p><br><h1 id="monitorim-logi">  Monitor log </h1><br><p>  Anda mungkin memiliki beberapa jenis kesalahan saat menandai atau saat sistem sedang berjalan.  Untuk memeriksa apakah SELinux Anda berfungsi dengan benar dan jika ia tidak memblokir akses ke port, aplikasi, dll., Anda perlu melihat log.  Log SELinux terletak di <code>/var/log/audit/audit.log</code> , tetapi Anda tidak perlu membacanya secara keseluruhan untuk menemukan kesalahan.  Anda dapat menggunakan audit2why untuk menemukan kesalahan.  Jalankan perintah berikut: </p><br><pre> <code class="plaintext hljs">$ audit2why &lt; /var/log/audit/audit.log</code> </pre> <br><p>  Hasilnya, Anda mendapatkan daftar kesalahan.  Jika tidak ada kesalahan dalam log, maka tidak ada pesan yang akan ditampilkan. </p><br><h1 id="nastroyka-politiki-selinux">  Mengkonfigurasi Kebijakan SELinux </h1><br><p>  Kebijakan SELinux adalah seperangkat aturan yang memandu keamanan SELinux.  Suatu kebijakan mendefinisikan seperangkat aturan untuk lingkungan tertentu.  Kami sekarang akan belajar cara mengonfigurasi kebijakan untuk memungkinkan akses ke layanan terbatas. </p><br><h4 id="1-logicheskie-znacheniya-pereklyuchateli">  1. Nilai logis (switch) </h4><br><p>  Switch (booleans) memungkinkan Anda mengubah bagian kebijakan saat Anda bekerja, tanpa perlu membuat kebijakan baru.  Mereka memungkinkan Anda untuk membuat perubahan tanpa me-reboot atau mengkompilasi ulang kebijakan SELinux. </p><br><p>  <strong>Contoh</strong> <br>  Misalkan kita ingin membagikan direktori home pengguna melalui FTP untuk membaca dan menulis, dan kita telah membagikannya, tetapi ketika kita mencoba mengakses, kita tidak melihat apa-apa.  Ini karena kebijakan SELinux melarang server FTP membaca dan menulis ke direktori home pengguna.  Kami perlu mengubah kebijakan sehingga server FTP dapat mengakses direktori home.  Mari kita lihat apakah ada switch untuk melakukan ini </p><br><pre> <code class="plaintext hljs">$ semanage boolean -l</code> </pre> <br><p>  Perintah ini akan menampilkan daftar sakelar yang tersedia dengan statusnya saat ini (on / on atau off / off) dan deskripsi.  Anda dapat mempersempit pencarian Anda dengan menambahkan grep untuk menemukan hanya hasil yang terkait ftp: </p><br><pre> <code class="plaintext hljs">$ semanage boolean -l | grep ftp</code> </pre> <br><p>  dan temukan yang berikut ini </p><br><pre> <code class="plaintext hljs">ftp_home_dir -&gt; off Allow ftp to read &amp; write file in user home directory</code> </pre> <br><p>  Switch ini tidak aktif, jadi kami akan mengaktifkannya dengan <code>setsebool $ setsebool ftp_home_dir on</code> </p><br><p>  Sekarang daemon ftp kami akan dapat mengakses direktori home pengguna. <br>  Catatan: Anda juga bisa mendapatkan daftar sakelar yang tersedia tanpa deskripsi dengan melakukan <code>getsebool -a</code> </p><br><h4 id="2-metki-i-kontekst">  2. Label dan konteks </h4><br><p>  Ini adalah cara paling umum untuk menerapkan kebijakan SELinux.  Setiap file, folder, proses dan port ditandai dengan konteks SELinux: </p><br><ul><li>  Untuk file dan folder, tag disimpan sebagai atribut yang diperluas dalam sistem file dan dapat dilihat dengan perintah berikut: <br><pre> <code class="plaintext hljs">$ ls -Z /etc/httpd</code> </pre> </li><li>  Untuk proses dan port, inti mengontrol penandaan, dan Anda dapat melihat label ini sebagai berikut: </li></ul><br><p>  prosesnya </p><br><pre> <code class="plaintext hljs">$ ps â€“auxZ | grep httpd</code> </pre> <br><p>  pelabuhan </p><br><pre> <code class="plaintext hljs">$ netstat -anpZ | grep httpd</code> </pre> <br><p>  <strong>Contoh</strong> <br>  Sekarang mari kita lihat contoh untuk lebih memahami label dan konteks.  Misalkan kita memiliki server web yang <code>/var/www/html/  /home/dan/html/</code> bukan direktori <code>/var/www/html/  /home/dan/html/</code> .  SELinux akan menganggap ini sebagai pelanggaran kebijakan dan Anda mungkin tidak dapat menjelajahi halaman web Anda.  Ini karena kami belum mengatur konteks keamanan yang terkait dengan file HTML.  Untuk melihat konteks keamanan default, gunakan perintah berikut: </p><br><pre> <code class="plaintext hljs">$ ls â€“lz /var/www/html -rw-râ€”râ€”. root root unconfined_u:object_r:httpd_sys_content_t:s0 /var/www/html/</code> </pre> <br><p>  Di sini kita mendapatkan <code>httpd_sys_content_t</code> sebagai konteks untuk file html.  Kita perlu mengatur konteks keamanan ini untuk direktori kita saat ini, yang sekarang memiliki konteks berikut: </p><br><pre> <code class="plaintext hljs">-rw-râ€”râ€”. dan dan system_u:object_r:user_home_t:s0 /home/dan/html/</code> </pre> <br><p>  Perintah alternatif untuk memeriksa konteks keamanan file atau direktori: </p><br><pre> <code class="plaintext hljs">$ semanage fcontext -l | grep '/var/www'</code> </pre> <br><p>  Kami juga akan menggunakan semanage untuk mengubah konteks setelah kami menemukan konteks keamanan yang tepat.  Untuk mengubah konteks / home / dan / html, jalankan perintah berikut: </p><br><pre> <code class="plaintext hljs">$ semanage fcontext -a -t httpd_sys_content_t '/home/dan/html(/.*)?' $ semanage fcontext -l | grep '/home/dan/html' /home/dan/html(/.*)? all files system_u:object_r:httpd_sys_content_t:s0 $ restorecon -Rv /home/dan/html</code> </pre> <br><p>  Setelah konteks diubah menggunakan semanage, perintah restorecon akan memuat konteks default untuk file dan direktori.  Server web kami sekarang dapat membaca file dari folder <code>/home/dan/html</code> , karena konteks keamanan untuk folder ini telah diubah menjadi <code>httpd_sys_content_t</code> . </p><br><h4 id="3-sozdanie-lokalnyh-politik">  3. Membuat kebijakan lokal </h4><br><p>  Mungkin ada situasi di mana metode di atas tidak berguna untuk Anda, dan Anda mendapatkan kesalahan (penolakan / penolakan) di audit.log.  Ketika ini terjadi, Anda perlu membuat kebijakan lokal.  Anda dapat menemukan semua kesalahan dengan audit2why, seperti dijelaskan di atas. </p><br><p>  Untuk mengatasi kesalahan, Anda dapat membuat kebijakan lokal.  Misalnya, kami mendapatkan kesalahan yang terkait dengan httpd (apache) atau smbd (samba), kami menangkap kesalahan dan membuat kebijakan untuk mereka: </p><br><pre> <code class="plaintext hljs">apache $ grep httpd_t /var/log/audit/audit.log | audit2allow -M http_policy samba $ grep smbd_t /var/log/audit/audit.log | audit2allow -M smb_policy</code> </pre> <br><p>  Di sini <code>http_policy</code> dan <code>smb_policy</code> adalah nama-nama kebijakan lokal yang kami buat.  Sekarang kita perlu memuat kebijakan lokal yang dibuat ini ke dalam kebijakan SELinux saat ini.  Ini dapat dilakukan sebagai berikut: </p><br><pre> <code class="plaintext hljs">$ semodule â€“I http_policy.pp $ semodule â€“I smb_policy.pp</code> </pre> <br><p>  Kebijakan lokal kami dimuat, dan kami seharusnya tidak lagi menerima AVC atau denail di audit.log. </p><br><hr><br><p>  <em>Itu adalah upaya saya untuk membantu Anda memahami SELinux.</em>  <em>Saya harap setelah membaca artikel ini Anda akan merasa lebih nyaman dengan SELinux.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id460387/">https://habr.com/ru/post/id460387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id460373/index.html">Di Balik Terpal Halaman Turbo: Arsitektur Teknologi Unduhan Cepat Halaman Web</a></li>
<li><a href="../id460375/index.html">Buku "Pembelajaran Mesin untuk Bisnis dan Pemasaran"</a></li>
<li><a href="../id460377/index.html">Menggunakan Liquibase untuk mengelola struktur database dalam aplikasi Spring Boot. Bagian 1</a></li>
<li><a href="../id460381/index.html">Apa itu ketegasan dan mengapa itu dibutuhkan</a></li>
<li><a href="../id460383/index.html">Transisi layar di Legend of Zelda menggunakan fitur NES yang tidak berdokumen</a></li>
<li><a href="../id460393/index.html">Latar belakang: apa yang diharapkan dari Fedora Silverblue</a></li>
<li><a href="../id460395/index.html">Analytics sebagai fitur: proses bekerja dengan data di Plesk</a></li>
<li><a href="../id460397/index.html">Mulai cepat dengan WebComponents</a></li>
<li><a href="../id460399/index.html">Indikator pemuatan SVG di Vue.js</a></li>
<li><a href="../id460403/index.html">Keuntungan dan kerugian HugePages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>