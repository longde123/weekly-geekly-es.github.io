<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëí üë®üèº‚Äçüåæ üë©üèº‚Äçüî¨ UDB. Qu'est-ce que c'est? Partie 3. FIFAP Datapath üë®üèº‚Äçüíº üêÆ üë©üèº‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous continuons √† traduire la documentation propri√©taire de Cypress en blocs UDB. De plus, tout co√Øncide tr√®s bien. Pour continuer l' article pratique...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UDB. Qu'est-ce que c'est? Partie 3. FIFAP Datapath</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434706/"><img src="https://habrastorage.org/webt/et/v5/rr/etv5rr-xdmsl0tyw4vtp_doh75k.jpeg"><br><br>  Nous continuons √† traduire la documentation propri√©taire de Cypress en blocs UDB.  De plus, tout co√Øncide tr√®s bien.  Pour continuer l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pratique sur UDB, vous</a> devrez utiliser FIFO, et dans la partie th√©orique, nous en sommes arriv√©s √† la description m√™me.  Par cons√©quent, nous commen√ßons √† les √©tudier en d√©tail. <br><a name="habracut"></a><br>  Le contenu g√©n√©ral du cycle ¬´UDB.  Qu'est-ce que c'est? " <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1. Introduction.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pld.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2. Chemin de donn√©es.</a> <br>  Partie 3. Datapath FIFO.  (Article actuel) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 4. Datapath ALU.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 5. Chemin de donn√©es.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Petites choses utiles.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 6. Module de gestion et d'√©tat.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 7. Module de commande de temporisation et de r√©initialisation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 8. Adressage UDB</a> <br><br><h2>  21.3.2.2 FIFO de chemin de donn√©es </h2><br><h3>  Modes et configurations FIFO </h3><br>  Chaque tampon FIFO a plusieurs modes de fonctionnement et configurations disponibles: <br><br>  Tableau 21-2.  Modes et configurations FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Le mode </th><th>  La description </th></tr><tr><td>  Entr√©e / sortie <br>  (Tampon d'entr√©e / sortie) </td><td>  En mode tampon d'entr√©e, le CPU ou le DMA √©crit <br>  les donn√©es dans FIFO, et Datapath les lit.  En mode <br>  les donn√©es du tampon de sortie entrent dans le FIFO <br>  Datapath, et les lit √† partir de l√† CPU ou DMA. </td></tr><tr><td>  Tampon unique <br>  (Tampon unique) </td><td>  FIFO fonctionne comme un tampon unique sans statut. <br>  Les donn√©es enregistr√©es dans FIFO sont imm√©diatement lisibles et peuvent <br>  √™tre √©cras√© √† tout moment. </td></tr><tr><td>  Niveau / bord <br>  (Niveau / Delta) </td><td>  Le param√®tre responsable du chargement de FIFO depuis Datapath, <br>  peut √™tre d√©clench√© par niveau ou par diff√©rentiel. </td></tr><tr><td>  Normal / rapide <br>  (Normal / rapide) </td><td>  Param√®tre responsable du chargement de FIFO depuis la source <br>  Chemin de donn√©es: il est cadenc√© √† la fr√©quence du chemin de donn√©es s√©lectionn√© <br>  source d'horloge (normale) ou fr√©quence de bus (rapide). <br>  Cela vous permet de capturer √† la fr√©quence la plus √©lev√©e. <br>  dans le syst√®me (fr√©quence du bus), quelle que soit la fr√©quence d'horloge Datapath. </td></tr><tr><td>  Capture de logiciel <br>  (Capture de logiciel) </td><td>  Lorsque ce mode est activ√© et FIFO est en mode <br>  tampon de sortie, lire CPU ou DMA <br>  batterie (A0 pour F0, A1 pour F1), initialise <br>  Transf√©rez de mani√®re synchrone la valeur de la batterie au FIFO. <br>  La valeur captur√©e est imm√©diatement lisible depuis FIFO. <br>  Si le support de cha√Ænage est activ√©, <br>  l'op√©ration suivra la cha√Æne jusqu'au bloc MS afin que <br>  Datapath pourrait effectuer une lecture atomique de plusieurs octets <br>  valeurs. </td></tr><tr><td>  Asynch <br>  (Asynchrone) </td><td>  Lorsque les horloges Datapach et bus syst√®me ne sont pas <br>  synchronis√©s, les signaux d'√©tat FIFO peuvent √™tre <br>  transmis au reste du chemin de donn√©es soit <br>  directement, cadenc√© √† partir de la fr√©quence d'horloge Datapath, <br>  ou avec double synchronisation, en mode Asynch. </td></tr><tr><td>  Polarit√© d'horloge ind√©pendante <br>  (Polarit√© d'horloge ind√©pendante) </td><td>  Chaque FIFO a un bit de contr√¥le √† inverser <br>  Polarit√© d'horloge FIFO par rapport √† l'horloge Datapath. </td></tr></tbody></table></div><br>  La figure 21-7 montre les options de configuration possibles pour la paire FIFO, selon les modes d'entr√©e / sortie s√©lectionn√©s pour chacun d'eux.  Si un FIFO est en mode d'entr√©e et l'autre en mode de sortie, nous obtenons la configuration RX / TX.  Un exemple typique o√π une telle configuration est n√©cessaire est le contr√¥leur de bus SPI.  La configuration <b>Dual Capture</b> (les deux FIFO sont configur√©s pour la sortie) permet une capture ind√©pendante des paires A0 et A1 ou deux captures ind√©pendantes des registres A0 ou A1.  Enfin, en mode <b>Dual Buffer</b> (tous deux en entr√©e), il est possible d'utiliser soit une paire de registres soit deux registres ind√©pendants pour charger ou comparer. <br><br><img src="https://habrastorage.org/webt/jw/ii/lz/jwiilz_qkbulrpqu4n1xahxnsjq.png"><br><br>  Figure 21-7.  Configurations FIFO. <br><br>  La figure 21-8 montre en d√©tail les sources et les r√©cepteurs pour FIFO. <br><br><img src="https://habrastorage.org/webt/lj/rf/4l/ljrf4lqn5lyyq2xsi6sml5ywi5o.png"><br><br>  Figure 21-8.  Sources et r√©cepteurs FIFO. <br><br>  Lorsque FIFO fonctionne en mode tampon d'entr√©e, la source est le bus syst√®me et les r√©cepteurs sont les registres Dx et Ax.  Lorsque vous travaillez en mode tampon de sortie, les sources sont les registres Ax et ALU, et le r√©cepteur est le bus syst√®me.  La s√©lection du multiplexeur est d√©finie statiquement dans le registre de configuration UDB CFG15, comme indiqu√© dans le tableau pour F0_INSEL [1: 0] ou F1_INSEL [1: 0]: <br><br>  Tableau 21-3.  Un ensemble de multiplexeurs FIFO dans le registre de configuration UDB. <br><div class="scrollable-table"><table><tbody><tr><th>  Fx_INSEL [1: 0] </th><th>  La description </th></tr><tr><td>  00 </td><td>  Mode tampon d'entr√©e: le bus syst√®me √©crit sur FIFO, tandis que le r√©cepteur <br>  FIFO est Ax ou Dx. </td></tr><tr><td>  01 </td><td>  Mode tampon de sortie: la source FIFO est A0 et le r√©cepteur <br>  FIFO - bus syst√®me. </td></tr><tr><td>  10 </td><td>  Mode tampon de sortie: la source du FIFO est A1 et le r√©cepteur <br>  FIFO - bus syst√®me. </td></tr><tr><td>  11 </td><td>  Mode tampon de sortie: la source FIFO est la sortie ALU et le r√©cepteur <br>  FIFO - bus syst√®me. </td></tr></tbody></table></div><br><h3>  Statut FIFO </h3><br>  Chaque FIFO g√©n√®re deux signaux d'√©tat, ¬´bus¬ª et ¬´bloc¬ª, qui sont transmis aux ressources de trace UDB via le multiplexeur de sortie Datapath.  L'√©tat du bus peut √™tre utilis√© pour interrompre ou demander une lecture / √©criture DMA au FIFO.  L'√©tat ¬´bloc¬ª est principalement destin√© √† transmettre l'√©tat FIFO aux entit√©s UDB internes.  la fonction des bits d'√©tat d√©pend de la direction configur√©e (Fx_INSEL [1: 0]) et des bits de niveau FIFO.  Les bits de niveau FIFO (Fx_LVL) sont d√©finis dans le registre de commande auxiliaire dans l'espace de registre de travail.  Les options d'√©tat sont pr√©sent√©es dans le tableau suivant: <br><br>  Tableau 21-4.  Options d'√©tat FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Fx_INSEL [1: 0] </th><th>  Fx_lvl </th><th>  Condition </th><th>  Signal </th><th>  La description </th></tr><tr><td>  Entrer </td><td>  0 </td><td>  Pas plein </td><td>  √âtat du bus </td><td>  Arm√© quand il y a un FIFO <br>  place pour au moins un octet. </td></tr><tr><td>  Entrer </td><td>  1 </td><td>  D√©vast√© <br>  au moins <br>  la moiti√© </td><td>  √âtat du bus </td><td>  Arm√© quand il y a un FIFO <br>  espace pour au moins 2 octets. </td></tr><tr><td>  Entrer </td><td>  N / A </td><td>  Est vide </td><td>  Statut de blocage </td><td>  Arm√© quand pas de FIFO <br>  pas un seul octet. <br>  Lorsque FIFO n'est pas vide, Datapath <br>  peut lire des octets. <br>  Lorsque FIFO est vide, Datapath <br>  peut √™tre en mesure <br>  les attentes g√©n√®rent <br>  √©tat de d√©vastation. </td></tr><tr><td></td></tr><tr><td>  Conclusion </td><td>  0 </td><td>  Pas vide </td><td>  √âtat du bus </td><td>  Arm√© quand au FIFO <br>  au moins 1 octet disponible <br>  pour la lecture. </td></tr><tr><td>  Conclusion </td><td>  1 </td><td>  Est plein <br>  au moins <br>  la moiti√© </td><td>  √âtat du bus </td><td>  Arm√© lorsqu'il est disponible en FIFO <br>  lire au moins 2 octets. </td></tr><tr><td>  Conclusion </td><td>  N / A </td><td>  Est plein </td><td>  Statut de blocage </td><td>  Arm√© quand FIFO est plein. <br>  Lorsque FIFO n'est pas termin√©, Datapath <br>  peut √©crire des octets en FIFO. <br>  Lorsque FIFO est plein, Datapath <br>  peut √™tre en <br>  veille ou <br>  g√©n√©rer une condition <br>  d√©bordement. </td></tr></tbody></table></div><br><h3>  Illustration de travail FIFO </h3><br>  La figure 21-9 montre une s√©quence typique de lecture et d'√©criture, ainsi que la g√©n√©ration de statuts associ√©s √† ces op√©rations.  Dans la figure, la lecture et l'√©criture se produisent √† des moments diff√©rents, mais elles peuvent √™tre effectu√©es simultan√©ment. <br><br><img src="https://habrastorage.org/webt/pp/kr/-p/ppkr-pcweqaiz61mam-o3d4oeti.png"><br><br>  Figure 21-9 Fonctionnement des r√©cepteurs FIFO. <br><br><h3>  Mode rapide FIFO (FIFO RAPIDE) </h3><br>  Lorsque FIFO est en mode tampon de sortie, l'op√©ration de d√©marrage FIFO utilise g√©n√©ralement la fr√©quence d'horloge du chemin de donn√©es s√©lectionn√© pour cadencer le signal d'√©criture.  Comme le montre la figure 21-10, lorsque vous s√©lectionnez le mode rapide FIFO (FIFO FAST), vous pouvez s√©lectionner la fr√©quence du bus pour cette op√©ration particuli√®re.  Lorsqu'elle est utilis√©e en conjonction avec le mode <b>Level / Edge = Edge</b> , cette op√©ration r√©duit le d√©lai de transmission de la batterie au FIFO de la p√©riode d'horloge Datapath √† la p√©riode d'horloge du bus, car la fr√©quence du bus peut √™tre beaucoup plus √©lev√©e.  Cela permet au CPU ou au DMA de lire le r√©sultat FIFO re√ßu avec un d√©lai minimal. <br><br>  Comme le montre la figure 21-10, l'op√©ration de d√©marrage rapide est effectu√©e quelle que soit l'horloge actuelle du chemin de donn√©es, cependant, l'utilisation de la vitesse d'horloge du bus peut augmenter la consommation d'√©nergie. <br><br><img src="https://habrastorage.org/webt/au/4c/0i/au4c0iq5pfcnnebsvxxq1hmf-zu.png"><br><br>  Figure 21-10.  R√©cepteurs FIFO √† configuration rapide. <br><br><h3>  Mode d'enregistrement de bord / niveau FIFO (diff√©rentiel / niveau) </h3><br>  Il existe deux modes d'enregistrement dans FIFO de Datapath.  Dans le premier mode, les donn√©es sont transf√©r√©es de mani√®re synchrone des batteries au FIFO.  Le signal de commande de cet enregistrement (FX_LD) est g√©n√©ralement g√©n√©r√© par une machine d'√©tat ou par une condition synchronis√©e avec la synchronisation Datapath.  L'√©criture dans FIFO sera effectu√©e dans tout cycle au cours duquel le signal de commande de charge d'entr√©e est ¬´1¬ª.  Dans le deuxi√®me mode, FIFO est utilis√© pour capturer les valeurs de batterie en r√©ponse √† un front positif du signal FX_LD.  Dans ce mode, le format du signal du signal est arbitraire (cependant, sa p√©riode doit √™tre √©gale √† au moins un cycle d'horloge Datapath).  Un exemple de ce mode capture la valeur de la batterie en utilisant l'entr√©e du pied externe comme d√©clencheur.  Une limitation de ce mode est que le param√®tre d'entr√©e doit revenir √† la valeur ¬´0¬ª au moins un cycle avant qu'une autre diff√©rence positive soit d√©tect√©e. <br><br>  La figure 21-11 montre l'impl√©mentation du mode de d√©tection diff√©rentielle √† l'entr√©e FX_LD.  Le mode des deux FIFO dans UDB est contr√¥l√© par le m√™me bit, basculant cette option.  Notez que la d√©tection diff√©rentielle est cadenc√©e √† une fr√©quence √©gale √† la fr√©quence du FIFO s√©lectionn√©. <br><br><img src="https://habrastorage.org/webt/xv/hq/u8/xvhqu8l5xwjgn-4aaww9ru8tkli.png"><br><br>  Figure 21-11.  D√©tection diff√©rentielle pour les r√©cepteurs d'enregistrement FIFO internes. <br><br><h3>  Mode de capture du logiciel FIFO </h3><br>  Une exigence courante et importante est de permettre au CPU et au DMA de lire de mani√®re fiable le contenu de la batterie pendant le fonctionnement normal.  Cela se fait √† l'aide de la capture logicielle et est activ√© √† l'aide du bit de configuration FIFO Cap.  Ce bit s'applique aux deux FIFO dans UDB, mais ne fonctionne que lorsque le FIFO est en mode tampon de sortie.  Lorsque vous utilisez la capture logicielle, F0 doit lire depuis A0 et F1 depuis A1. <br><br>  Comme le montre la figure 21-12, la lecture de la batterie lance l'√©criture sur le FIFO √† partir de la batterie.  Le signal est li√© dans une cha√Æne de sorte que la lecture d'un octet sp√©cifique capture simultan√©ment les valeurs de batterie de tous les UDB de la cha√Æne.  Cela permet au processeur 8 bits de lire avec succ√®s 16 bits ou plus en m√™me temps.  Les donn√©es renvoy√©es lors de la lecture de la batterie doivent √™tre ignor√©es et la valeur captur√©e peut √™tre imm√©diatement lue depuis FIFO. <br><br>  Le signal FX_LD trac√©, qui g√©n√®re la charge FIFO, est envoy√© au terme OR avec le signal de capture de programme.  Lorsque la capture mat√©rielle et logicielle est utilis√©e en m√™me temps, le r√©sultat peut √™tre impr√©visible.  En r√®gle g√©n√©rale, ces fonctions doivent s'exclure mutuellement, cependant, la capture mat√©rielle et logicielle peut √™tre utilis√©e simultan√©ment dans les conditions suivantes: <br><br><ul><li>  Le mode d'horloge de capture FIFO est r√©gl√© sur FIFO FAST. </li><li>  Le mode d'enregistrement FIFO est r√©gl√© sur FIFO EDGE. </li></ul><br>  Dans les conditions d√©crites ci-dessus, les captures mat√©rielles et logicielles fonctionnent essentiellement de la m√™me mani√®re et pendant tout cycle d'horloge de bus, n'importe lequel de ces signaux peut d√©clencher une capture. <br><br>  Il est √©galement recommand√© d'effacer le FIFO cible dans le code de programme (registre ACTL) avant le d√©but de la capture du programme.  Gr√¢ce √† cela, les pointeurs de lecture et d'√©criture FIFO seront mis dans un √©tat connu. <br><br><img src="https://habrastorage.org/webt/0n/c7/zg/0nc7zgc7je5sn3emupt2ij7kdc0.png"><br><br>  Figure 21-12.  Configuration de la capture de logiciels. <br><br>  <i><b>Note du traducteur:</b></i> <i><br></i>  <i>Pendant longtemps, je n'ai pas pu comprendre le sens de cette section.</i>  <i>Ensuite, pendant longtemps, j'√©tais s√ªr que la section √©tait √©crite pour PSoC3, dont le c≈ìur √† huit bits ne peut pas acc√©der √† plus d'un octet.</i>  <i>Mais lors de la cr√©ation de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">huiti√®me partie de la traduction</a> , il s'est av√©r√© que m√™me dans PSoC5LP, pour tous les c≈ìurs de processeur ARM 32 bits, l'acc√®s aux registres UDB fonctionnants peut √™tre effectu√© en mode huit ou seize bits.</i>  <i>A en juger par le document, pas plus.</i>  <i>C'est l√† que les fonctionnalit√©s d√©crites sont utiles.</i> <i><br></i> <br><br><h3>  Bits de contr√¥le FIFO </h3><br>  Le registre de contr√¥le auxiliaire, qui peut √™tre utilis√© pour contr√¥ler FIFO pendant le fonctionnement normal, contient 4 bits. <br><br>  Les bits FIFO0 CLR et FIFO1 CLR sont utilis√©s pour r√©initialiser ou effacer les FIFO.  Lorsque l'un de ces bits re√ßoit la valeur "1", la FIFO associ√©e est r√©initialis√©e.  Le bit doit √™tre restaur√© √† sa valeur d'origine ('0') pour que FIFO continue de fonctionner.  Si la valeur du bit reste √©gale √† un, le FIFO correspondant sera d√©sactiv√© et fonctionnera comme un tampon √† un octet sans √©tat.  Les donn√©es peuvent √™tre √©crites sur FIFO, les donn√©es sont imm√©diatement lisibles et peuvent √™tre √©cras√©es √† tout moment.  La direction des donn√©es avec les bits de configuration FX INSEL [1: 0] peut toujours √™tre d√©finie. <br><br>  Les bits FIFO0 LVL et FIFO1 LVL d√©terminent le niveau auquel FIFO armera le bit d'√©tat <b>"bus"</b> (lorsque le bus lit ou √©crit dans FIFO).  C'est-√†-dire que l'√©tat de l'√©tat <b>¬´bus¬ª</b> d√©pend de la direction donn√©e, comme indiqu√© dans le tableau ci-dessous. <br><br>  Tableau 21-5.  Bits de contr√¥le de niveau FIFO <br><div class="scrollable-table"><table><tbody><tr><th>  FIFO LVL </th><th>  Mode tampon d'entr√©e <br>  (le bus √©crit sur FIFO) </th><th>  Mode tampon de sortie <br>  (le bus lit depuis FIFO) </th></tr><tr><td>  0 </td><td>  Pas plein <br>  Au moins 1 octet peut √™tre √©crit. </td><td>  Pas vide <br>  Au moins 1 octet peut √™tre lu. </td></tr><tr><td>  1 </td><td>  Vide au moins √† mi-chemin <br>  Au moins 2 octets peuvent √™tre √©crits. </td><td>  √Ä moiti√© plein <br>  Au moins 2 octets peuvent √™tre lus. </td></tr></tbody></table></div><br><h3>  Fonctionnement asynchrone FIFO </h3><br>  La figure 21-13 illustre le principe du fonctionnement FIFO asynchrone.  Par exemple, imaginez que F0 fonctionne en mode tampon d'entr√©e et F1 en mode tampon de sortie, qui est une configuration typique des registres TX et RX. <br><br><img src="https://habrastorage.org/webt/ct/ei/lo/cteilo6ne7nn0ah0hprjtkbawvo.png"><br><br>  Figure 21-13.  Fonctionnement FIFO asynchrone. <br><br>  C√¥t√© TX, la machine d'√©tat Datapath utilise l'indicateur <b>Empty</b> pour d√©terminer s'il y a des octets disponibles pour la r√©ception.  La valeur <b>Empty</b> est d√©finie de mani√®re synchrone avec la machine d'√©tat Datapath et est effac√©e de mani√®re asynchrone en raison de l'√©criture √† partir du bus.  Apr√®s le nettoyage, l'√©tat est √† nouveau synchronis√© avec la machine d'√©tat Datapath. <br><br>  Du c√¥t√© RX, la machine d'√©tat RX utilise <b>Full</b> pour d√©terminer s'il y a de l'espace libre pour √©crire dans le FIFO.  La valeur <b>Full</b> est d√©finie de mani√®re synchrone avec la machine d'√©tat Datapath et est effac√©e de mani√®re asynchrone en raison de la lecture par le bus.  Apr√®s le nettoyage, l'√©tat est √† nouveau synchronis√© avec la machine d'√©tat Datapath. <br><br>  Un bit FIFO ASYNCH est utilis√© pour activer cette m√©thode de synchronisation, apr√®s activation, cette m√©thode est appliqu√©e aux deux FIFO. <br><br>  Il s'applique uniquement √† l'√©tat de <b>bloc</b> , car il est suppos√© que l'√©tat du <b>bus</b> est naturellement synchronis√© par le processus d'interruption. <br><br>  Tableau 21-6.  <b>Bloquer</b> les options de synchronisation d'√©tat FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Async </th><th>  AJOUTER SYNC </th><th>  Fonctionnement </th><th>  Mod√®le d'utilisation </th></tr><tr><td>  0 </td><td>  0 </td><td>  Synchronis√© avec la synchronisation du bus </td><td>  Modifications de l'√©tat d'√©criture / lecture du processeur <br>  se produisent √† la fr√©quence du bus.  Peut <br>  utiliser pour un minimum <br>  retards si vous pouvez r√©aliser <br>  Fr√©quences d'horloge de datapatch <br>  √©gale √† la fr√©quence du bus. </td></tr><tr><td>  0 </td><td>  1 </td><td>  Resynchronisation de fr√©quence <br>  pneus √† la fr√©quence Datapath. </td><td>  Ce mode doit √™tre <br>  mode de fonctionnement par d√©faut.  Quand <br>  Le CPU effectue des op√©rations de lecture / √©criture, <br>  le changement d'√©tat sera resynchronis√© <br>  avec la fr√©quence utilis√©e dans Datapath. <br>  Il permet d'utiliser pleinement <br>  P√©riode de fr√©quence du chemin de donn√©es √† d√©finir <br>  signal pour la logique UDB. </td></tr><tr><td>  1 </td><td>  0 </td><td>  R√©serv√© </td><td>  - </td></tr><tr><td>  1 </td><td>  1 </td><td>  Synchronisation double fr√©quence <br>  pneus √† la fr√©quence Datapath. </td><td>  Lorsque l'horloge clignote pour Datapath <br>  non seulement pas en phase avec <br>  syst√©mique en fr√©quence mais aussi <br>  produit s√©par√©ment <br>  g√©n√©rateur ind√©pendant <br>  ce param√®tre peut √™tre <br>  utilis√© pour double <br>  op√©rations de synchronisation <br>  lire et √©crire cpu <br>  avec pointage Datapath. </td></tr></tbody></table></div><br><h3>  D√©bordement FIFO pendant le fonctionnement </h3><br>  Pour une mise en ≈ìuvre s√ªre des op√©rations de lecture et d'√©criture internes (Datapath) et externes (CPU ou DMA), des signaux d'√©tat FIFO doivent √™tre utilis√©s.  Il n'y a pas de protection int√©gr√©e contre les conditions de vidange et de d√©bordement.  Si la FIFO est pleine et que des op√©rations d'√©criture ult√©rieures sont effectu√©es (d√©bordement), les nouvelles donn√©es √©crasent le d√©but de la FIFO (les donn√©es en cours de sortie sont les suivantes dans la file d'attente de lecture).  Si la FIFO est vide et que des lectures ult√©rieures sont effectu√©es (vidage ou √©puisement), la valeur de lecture n'est pas d√©finie.  Les pointeurs FIFO restent pr√©cis ind√©pendamment du d√©bordement et du d√©bordement. <br><br><h3>  Inversion d'horloge FIFO </h3><br>  Chaque FIFO a un bit de contr√¥le Fx CK INV, qui est responsable de la polarit√© de l'horloge FIFO en ce qui concerne la polarit√© de l'horloge Datapath.  Par d√©faut, FIFO fonctionne avec la m√™me polarit√© que le pointage Datapath.  Lorsque ce bit est √† 1, FIFO fonctionne avec une polarit√© invers√©e par rapport √† Datapath.  Cela fournit un support de protocole pour l'√©change de donn√©es sur les deux fronts, comme SPI. <br><br><h3>  Contr√¥le FIFO dynamique </h3><br>  En r√®gle g√©n√©rale, les FIFO sont configur√©s statiquement soit en mode tampon d'entr√©e, soit en mode tampon de sortie.  Alternativement, chaque FIFO peut √™tre configur√© pour fonctionner dans un mode dans lequel la direction est contr√¥l√©e dynamiquement (sous l'influence de signaux externes).  Un bit de configuration par FIFO (Fx DYN) est responsable de l'activation de ce mode.  La figure 21-14 montre les configurations disponibles en mode dynamique FIFO. <br><br><img src="https://habrastorage.org/webt/ny/ei/vo/nyeivo9hrnmr6vg8tkcbnnkaz8i.png"><br><br>  Figure 21-14.  Mode FIFO dynamique. <br><br>  En mode d'acc√®s interne, Datapath peut lire et √©crire sur FIFO.  Dans cette configuration, afin de s√©lectionner la source des op√©rations d'√©criture en FIFO, les bits Fx INSEL doivent √™tre d√©finis sur 1. Fx INSEL = 0 (source de bus CPU) dans ce mode est incorrect, il ne peut prendre que les valeurs 1, 2 ou 3 (A0, A1 ou ALU )  Il est √† noter que la lecture n'a acc√®s qu'√† la batterie appropri√©e, la direction des registres de donn√©es dans ce mode n'est pas disponible. <br><br>  En mode d'acc√®s externe, le CPU ou le DMA peut lire ou √©crire sur FIFO. <br><br>  La configuration bascule dynamiquement entre l'acc√®s externe et interne en transmettant les signaux de Datapath.  Pour cela, les signaux d'entr√©e Datapath d0_load et d1_load sont utilis√©s.  Il convient de noter qu'en mode de commande dynamique, d0_load et d1_load ne sont pas disponibles pour leur utilisation normale lors du chargement des registres D0 / D1 √† partir de F0 / F1.  Les signaux Dx_load peuvent √™tre d√©clench√©s par n'importe quel signal de trace, y compris les constantes. <br><br>  Prenons un exemple dans lequel, en commen√ßant par un acc√®s externe (dx_load == 1), le CPU ou le DMA peut √©crire un ou plusieurs octets de donn√©es dans le FIFO.  Ensuite, lors du passage √† l'acc√®s interne (dx_load == 0), Datapath peut effectuer des op√©rations sur les donn√©es.  Apr√®s cela, lors du passage √† un acc√®s externe, le CPU ou le DMA peut lire le r√©sultat des calculs. <br>  √âtant donn√© que Fx INSEL doit toujours √™tre 01, 10 ou 11 (A0, A1 ou ALU), ce qui correspond au ¬´mode tampon de sortie¬ª pendant le fonctionnement normal, les signaux d'√©tat FIFO ont les d√©finitions suivantes (selon le param√®tre Fx LVL): <br><br>  Tableau 21-7.  Statut FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Signal d'√©tat </th><th>  Valeur </th><th>  Fx LVL = 0 </th><th>  Fx LVL = 1 </th></tr><tr><td>  fx_blk_stat </td><td>  Statut d'enregistrement </td><td>  FIFO est plein </td><td>  FIFO est plein </td></tr><tr><td>  fx_bus_stat </td><td>  Statut de lecture </td><td>  FIFO n'est pas termin√© </td><td>  √Ä moiti√© plein </td></tr></tbody></table></div><br>  √âtant donn√© que Datapath et le CPU peuvent √©crire et lire √† partir de FIFO, ces signaux ne sont plus consid√©r√©s comme des √©tats de bloc et de bus.  Le signal blk_stat est utilis√© pour l'√©tat d'√©criture et le signal bus_stat pour l'√©tat de lecture <br><br><h2>  21.3.2.3 Statut FIFO </h2><br>  Il existe quatre signaux d'√©tat FIFO, deux pour chaque FIFO: fifo0_bus_stat, fifo0_blk_stat, fifo1_bus_stat et fifo1_blk_stat.  La signification de ces signaux d√©pend de la direction de la FIFO particuli√®re, qui est d√©termin√©e par la configuration statique.  L'√©tat FIFO est d√©crit en d√©tail dans la section <b>21.3.2.2 FIFO de chemin de donn√©es</b> . <br><br>  Dans la partie suivante, nous allons passer √† l'analyse de l'unit√© logique arithm√©tique (ALU). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434706/">https://habr.com/ru/post/fr434706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434696/index.html">Les employ√©s des g√©ants de l'informatique ont compris comment influencer les politiques de leurs entreprises</a></li>
<li><a href="../fr434698/index.html">Pessimisme √† propos du multithreading</a></li>
<li><a href="../fr434700/index.html">Avantages de suivre les guides de style lors du d√©veloppement d'applications angulaires</a></li>
<li><a href="../fr434702/index.html">Pourquoi le SSD moderne me plante</a></li>
<li><a href="../fr434704/index.html">Raisons de la baisse du co√ªt du trafic mobile en Russie et pr√©visions pour 2019</a></li>
<li><a href="../fr434708/index.html">HL 2018. R√©sum√© du rapport ¬´Rendez les mots de passe g√©niaux √† nouveau! Comment vaincre la force brute et ne rien laisser aux pirates ¬ª</a></li>
<li><a href="../fr434710/index.html">Blog RUVDS sur Habr: trois ans</a></li>
<li><a href="../fr434712/index.html">Troisi√®me test de Turing en russe</a></li>
<li><a href="../fr434714/index.html">Synchronisation des demandes client au printemps</a></li>
<li><a href="../fr434716/index.html">Passer au centre de donn√©es: pr√©paration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>