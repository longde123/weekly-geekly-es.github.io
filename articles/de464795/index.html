<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçü§ù‚Äçüë®üèø ‚Ü™Ô∏è ü§° Merry Quartusel oder wie der Prozessor zu einem solchen Leben gekommen ist ü§∏üèΩ üèß üöë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beim Debuggen regul√§rer Programme k√∂nnen Haltepunkte fast √ºberall und in relativ gro√üen Mengen festgelegt werden. Leider. Wenn ein Programm auf der St...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Merry Quartusel oder wie der Prozessor zu einem solchen Leben gekommen ist</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464795/"><img src="https://habrastorage.org/webt/ws/5w/vc/ws5wvcsjeh19phozcqcximmvjbo.jpeg"><br><br>  Beim Debuggen regul√§rer Programme k√∂nnen Haltepunkte fast √ºberall und in relativ gro√üen Mengen festgelegt werden.  Leider.  Wenn ein Programm auf der Steuerung ausgef√ºhrt wird, gilt diese Regel nicht.  Wenn es einen Abschnitt gibt, in dem das Zeitdiagramm erstellt wird, ruiniert der Stopp alles.  Und der Durchgang bei niedrigen und hohen Frequenzen ist nicht dasselbe.  Randbedingungen sind eine Gei√üel der Entwickler.  Oder zum Beispiel einen USB-Bus.  In NIOS II habe ich nicht damit gearbeitet, aber auf STM32 ist es schrecklich.  Und ich m√∂chte etwas sehen, und wenn Sie aufh√∂ren, bekommen Sie eine Auszeit.  Im Allgemeinen ist das Verhalten des Programms in zeitkritischen Bereichen trotz fortgeschrittenem JTAG-Debugging sehr oft verdeckt.  Es w√§re gro√üartig zu sehen, zumindest nach der Ausf√ºhrung, welche Kette das Programm durchlief, welche Zweige funktionierten und welche nicht! <br><br>  Noch wichtiger ist es, die Geschichte der Ausnahmen zu kennen.  Unter NIOS II habe ich dies nicht getan, sondern auf dem Cyclone V SoC im ARM-Kern - vollst√§ndig.  Beim Debuggen funktioniert alles und wenn Sie das Programm vom ROM aus starten, erhalten Sie eine Ausnahme.  Es ist klar, wie sie es betreten haben und welche Art von Entwicklung der Situation dazu gef√ºhrt hat, ist es nicht.  Die R√ºckverfolgung bricht auch alle Abdeckungen. <br><a name="habracut"></a><br>  Fr√ºhere Artikel in der Reihe: <ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklung der einfachsten ‚ÄûFirmware‚Äú f√ºr in Redd installierte FPGAs und Debugging am Beispiel des Speichertests</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklung der einfachsten ‚ÄûFirmware‚Äú f√ºr in Redd installierte FPGAs.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2. Programmcode</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklung eines eigenen Kerns zur Einbettung in ein auf FPGA basierendes Prozessorsystem</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklung von Programmen f√ºr den Zentralprozessor Redd am Beispiel des Zugriffs auf das FPGA</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ersten Experimente am Streaming-Protokoll am Beispiel der CPU- und Prozessorkommunikation im Redd FPGA</a> </li></ol><br><h2>  Einf√ºhrung </h2><br>  Es ist √ºblich, Lehrartikel mit ernstem Gesicht zu schreiben und das Material ruhig und unparteiisch darzulegen.  Aber leider funktioniert das nicht immer.  Nun sollte es laut Plan einen Artikel √ºber die Optimierung des synthetisierten Prozessors im Redd-Komplex geben, in dem wir √ºber die Funktionen der Arbeit mit dem Cache sprechen m√ºssen.  Als n√§chstes folgt ein Artikel √ºber Verz√∂gerungen beim Zugriff auf den Bus.  Im Allgemeinen kann dies alles auf einem Oszilloskop gezeigt werden.  Ich habe dies bereits in einem Artikel √ºber DMA (" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DMA: Mythen und Realit√§t</a> ") getan.  Aber ich wollte alles mit dem Prozessor selbst demonstrieren, ich habe solche √úberpr√ºfungen f√ºr den ARM-Kern im FPGA Cyclone V SoC durchgef√ºhrt.  Sehr praktisch (obwohl die Ergebnisse nicht ver√∂ffentlicht wurden).  Aus diesem Grund habe ich mich entschlossen, mich mit dem dem JTAG-Block innewohnenden Verfolgungsmechanismus zu befassen.  Es ist schade, dass ich bisher nicht mit kostenlos herunterladbaren Mitteln anzeigen konnte, wie viele Beats dieser oder jener Befehl ausgef√ºhrt wurde, aber es gab Material, mit dessen Hilfe das Programm immer gefragt werden kann, wie es zu einem solchen Leben gekommen ist.  Nun, und au√üerdem, w√§hrend die Erinnerungen an st√ºrmische Abende noch frisch in meiner Erinnerung sind, werde ich sie auf ziemlich emotionale Weise wegwerfen.  So wird es heute viele Memoiren und eine kleine n√ºtzliche Theorie geben. <br><br><h2>  Hardware </h2><br>  Daher ist es beim Debuggen eines Programms f√ºr einen Mikrocontroller sehr h√§ufig w√ºnschenswert, den zur√ºckgelegten Pfad zu kennen und ihn mit voller Geschwindigkeit zu √ºbergeben.  F√ºr den Fall von NIOS II ist dieser Mechanismus verf√ºgbar und wird hier auf dieser Registerkarte mit den Eigenschaften des Prozessorkerns aufgef√ºhrt: <br><br><img src="https://habrastorage.org/webt/aw/b5/cq/awb5cqb6qtp8es-_vm_xo1dwuok.png"><br><br>  Trace-Typ legt den Typ der zu speichernden Informationen fest.  Sie k√∂nnen nichts speichern (dies spart den Speicher des Chips), Sie k√∂nnen nur den Verlauf von Befehlen speichern (meistens ist dies ausreichend) oder den Verlauf von Befehlen und Daten speichern.  Es ist erw√§hnenswert, dass die Dokumentation besagt, dass das Speichern von Informationen im letzten Modus irgendwie schwierig ist, w√§hrend √úberlagerungen mit dem Befehlsverlauf m√∂glich sind und mehr Speicher verbraucht wird.  Verwenden Sie diesen Modus also nur, wenn es wirklich notwendig ist. <br><br>  Der Parameter Trace Storage legt den Speichertyp fest, in dem der Trace gespeichert wird.  Die Dokumentation besagt, dass der externe Speicher von der Standardentwicklungsumgebung nicht unterst√ºtzt wird.  Daher ist es besser, nur das Innere zu w√§hlen. <br><br><img src="https://habrastorage.org/webt/vy/bw/ef/vybwef9zoeklef_gcevjoeihy6y.png"><br><br>  Nun, Onchip Trace Frame Size legt die Gr√∂√üe des Puffers fest.  Je gr√∂√üer der Puffer, desto mehr Ereignisse k√∂nnen darin platziert werden, desto gr√∂√üer kann der Verlauf ber√ºcksichtigt werden.  Aber desto weniger wird die Erinnerung an den Kristall f√ºr andere Bed√ºrfnisse sein. <br><br><img src="https://habrastorage.org/webt/_f/l5/u0/_fl5u0ax87tjg6jqriqa6ksg6ic.png"><br><br>  Es ist nicht erforderlich, das Kontrollk√§stchen zu aktivieren, um einen separaten JTAG-Port zu erstellen.  Lassen Sie alles regelm√§√üig Taxis. <br><br><h2>  Software-Support </h2><br>  Gut.  Also richten wir den Prozessorkern ein. Wie geht es weiter?  Ohhhh!  Dann beginnt die Detektivgeschichte.  Wenn die obigen Abbildungen als Handlungsanleitung interpretiert werden sollen, folgen Abbildungen, die ein Durcheinander und W√ºrgen zeigen.  In einer Reihe von Dokumenten hei√üt es, dass Sie f√ºr die Arbeit mit der Ablaufverfolgung teure Programme von Drittanbietern und sogar spezielle JTAG-Ger√§te verwenden sollten.  In einigen Dokumenten wird jedoch darauf hingewiesen, dass Sie etwas Vollzeit nehmen k√∂nnen. <br><br><h3>  Eclipse-Experimente </h3><br>  Gro√üartig.  Schauen wir uns Eclipse an.  Ich erinnere Sie daran, dass ich die Quartus Prime 17.1-Entwicklungsumgebung verwende.  Nun, es ist passiert.  Wir starten das Programm zum Debuggen und gehen zum Men√ºpunkt, mit dem Sie verschiedene Fenster √∂ffnen k√∂nnen: <br><br><img src="https://habrastorage.org/webt/eu/yc/2z/euyc2ztgrga0uxh606lat4tu3kw.png"><br><br>  Dort w√§hlen wir das Fenster Debug-&gt; Trace Control: <br><br><img src="https://habrastorage.org/webt/6w/qu/wz/6wquwzygaqz4ozivccboxsyvuey.png"><br><br>  Und wir bekommen so einen Dummy: <br><br><img src="https://habrastorage.org/webt/hv/qb/hd/hvqbhdjpwryfpsbhprwh7ehbobq.png"><br><br>  Die Debugging-Sitzung wird jedoch gestartet.  Dar√ºber hinaus wurden die Men√ºpunkte Start Tracing und Stop Tracing sogar darin angezeigt (vor dem √ñffnen dieses Fensters waren sie es nicht).  Aber sie sind blockiert.  Und ich konnte sie nicht aktivieren. <br><br><img src="https://habrastorage.org/webt/mk/xp/ir/mkxpiratj9qrxtpee0hz91tx3uc.png"><br><br>  Vergebens habe ich Google mit verschiedenen Anfragen gef√ºllt.  In alten Dokumenten werden diese Elemente als recht gut funktionierend beschrieben, in modernen werden sie jedoch einfach nicht erw√§hnt.  Niemand erw√§hnt sie in den Foren.  Vielleicht sagt dir jemand in den Kommentaren etwas? <br><br><h3>  Probleme mit der neuesten Version von Eclipse </h3><br>  Gut.  Was ist mit der neuesten Version der Entwicklungsumgebung?  Vielleicht funktioniert dort alles?  JJJJJ!  Dies ist ein Thema f√ºr ein separates Kapitel.  Die neueste Version f√ºr den vierten und f√ºnften Zyklon ist 18.1.1.  Das hei√üt, Sie m√ºssen zuerst Version 18.1 herunterladen und dann das Update 18.1.1 installieren.  Wenn jemand entschieden hat, dass ich zu viel Freizeit habe, dass ich die Software f√ºr jede Kleinigkeit neu anordne, ist alles in Ordnung.  Die Hauptpr√ºfung betraf Cache-Probleme.  Sie sind ernster, ich wollte sie in der neuen Version √ºberpr√ºfen, ich schreibe hier nur nicht dar√ºber. <br><br>  Also habe ich es heruntergeladen.  Installiert.  Zun√§chst wird Version 18.1 unter WIN7 gestartet, aber 18.1.1 findet die DLL nicht.  Gut.  Ich habe herausgefunden, dass ich Redist von Visual Studio 2015 herunterladen muss. Ich habe es installiert.  Es fing an zu rennen.  Erstellt ein Projekt mit einem Prozessorsystem.  Er machte sich sogar fertig.  Ich gehe zu Eclipse und erstelle ein Programm mit BSP, das darauf basiert, alles, wie wir es schon oft getan haben ... Und ich verstehe so etwas ... <br><br><img src="https://habrastorage.org/webt/dz/ge/wm/dzgewmffjurbmrm7q9gzziiok5i.png"><br><br>  Das Projekt wird nicht.  Wenn Sie verlassen und eintreten, wird es nur teilweise ge√∂ffnet. <br><br><img src="https://habrastorage.org/webt/hw/_p/85/hw_p85rarlvryo3rvmuu_zoqa7k.png"><br><br>  Sehen Sie den Ordner geschlossen?  So.  Warum?  Ohhhh!  Drei Dateien haben: <br><br><img src="https://habrastorage.org/webt/08/ca/fu/08cafumzaksxsqe9tquadzuckwa.png"><br><br>  Dies sind die wunderbaren Eigenschaften des Schutzes: <br><br><img src="https://habrastorage.org/webt/zj/zy/db/zjzydbav2mjwdppsuq6y5mp3uay.png"><br><br>  Sie k√∂nnen also nicht ge√∂ffnet oder ge√§ndert werden ... Wenn Sie mehr Rechte vergeben, wird das Projekt ge√∂ffnet, aber die Dateien werden nicht vollst√§ndig erstellt, sodass das Sammeln nicht funktioniert.  Es wurde versucht, Rechte zu erteilen, bis Eclipse geschlossen wird, und dann das Projekt gespeichert.  Das Ergebnis ist das gleiche. <br><br>  K√∂nnte das schnell alternde Windows 7 schuld sein?  Kein Wunder, dass mir Bibliotheken fehlten!  Ich habe WIN10 mit frischem Quartus versehen und erhalte ein v√∂llig identisches Ergebnis bei der Erstellung des Projekts!  Ich habe einen Freund  Aufgrund seines Arbeitsplatzes trifft er manchmal auf Produkte einheimischer Hersteller.  Und er dr√ºckt eine Reihe von Gedanken √ºber sich selbst und ihre Verwandten aus.  Nun, √ºber die Tatsache, dass "wer baut das?"  Wenn ich mir den Spa√ü an Intel-Software anschaue, denke ich, dass sie weit vom Herkunftsland entfernt ist ... Eigentlich war dies unter Alter nicht der Fall ... Alles ist passiert, aber ich erinnere mich nicht daran. <br><br>  Ich bin gerade ausgestiegen.  Ich habe das Projekt mit dem FAT32-Dateisystem auf ein USB-Flash-Laufwerk kopiert.  Es gibt keine Sicherheitsattribute.  Ich habe das Projekt daraus ge√∂ffnet, bin in Eclipse gegangen und habe den Code erstellt.  Keine Sicherheitsattribute - kein Problem.  Dann habe ich es zur√ºck auf die Festplatte kopiert und ... Nun, nat√ºrlich habe ich Probleme beim Generieren von BSP.  Weil die * .bsp-Datei viele relative Pfade und einen absoluten enth√§lt.  Es ist gut, dass ich ein Flash-Laufwerk herausgezogen habe.  Andernfalls h√§tte ich nicht bemerkt, dass BSP darauf abf√§llt (da dies der Geburtsort des Projekts ist) und das Projekt auf der Festplatte gesammelt wird.  Hier ist ein Beispiel f√ºr einen solchen Pfad (bereits korrigiert): <br><br><img src="https://habrastorage.org/webt/ba/qw/c3/baqwc3vz7g4xtyxou9lzaydkaf0.png"><br><br>  Gut, gut ... Alles wurde generiert, zusammengesetzt ... Und es funktioniert genauso wie in Version 17.1 ... Und f√ºr SoC-Controller in der neuen Umgebung m√ºssen Sie auch die JTAG-Kette jedes Mal im Programmierer neu erstellen.  In Version 17.1 war es genug, dies einmal zu tun und zu speichern ... Eeeeeh.  Na na ja ... <br><br><h3>  Altera Monitor und sein Problem </h3><br>  Auf die eine oder andere Weise f√ºhrte mich die Netzwerksuche nach den W√∂rtern Start Tracing und Stop Tracing zu interessanten Dokumenten.  Sie beschreiben verschiedene Versionen eines lustigen Programms namens <b>Altera Monitor</b> heute (der Name war in alten Dokumenten anders).  Sie zu finden war relativ einfach.  Sie m√ºssen das <b>Universit√§tsprogrammpaket</b> f√ºr Ihre Version der Entwicklungsumgebung herunterladen.  Beachten Sie die Lizenzbeschr√§nkungen.  Aber da wir jetzt studieren, haben wir keine Angst davor.  Aber f√ºr die kommerzielle Arbeit - dort ist alles schlecht.  Details hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.intel.com/content/www/us/en/programmable/support/training/university/materials-software.html</a> <br><br>  Herunterladen, setzen ... Der aktuellen Version ist ein Dokument beigef√ºgt (da die im Internet verstreuten Versionen sehr unterschiedlich sind).  Ich habe sogar versucht, ein Beispiel f√ºr mein DE0-Nano-SoC-Steckbrett zu erstellen.  Es funktioniert.  Aber als ich versuchte, mein Projekt zu machen, funktionierte es nicht.  Die * .sof-Datei wird in das FPGA geladen. Nach einer Weile wird eine Meldung angezeigt: <br><br><img src="https://habrastorage.org/webt/h-/v9/8-/h-v98-afyfovvykexwt8piekhdu.png"><br><br>  Nur gibt es keine Informationen im angegebenen Fenster.  Wenn Sie erneut versuchen, den Text herunterzuladen, wird der Text genau in diesem Fenster angezeigt: <br>  <b>JTAG-Instanz-IDs konnten nicht abgefragt werden.</b> <b><br><br></b>  <b>Stellen Sie sicher, dass das FPGA mit der richtigen .sof-Datei konfiguriert wurde.</b> <br><br>  Was ist das f√ºr ein Problem?  Ich habe bei Google gesucht.  Es wurden mehrere Foren mit demselben Problem gefunden.  Einmal fragte ein Intel-Mitarbeiter, welche Frequenz der Autor bei JTAG hat, und schlug vor, eine Standardfrequenz festzulegen.  Obwohl ich zu diesem Zeitpunkt bereits verstanden hatte, dass es nicht um die H√§ufigkeit ging: Das Unternehmensbeispiel funktionierte und wie sollte es eingestellt werden?  In einem Forum schrieb der Autor, dass es irgendwie vorbei war.  Er verstand nicht wie.  Und er sagte, wenn Sie alles sorgf√§ltig gem√§√ü den Anweisungen tun, wird alles funktionieren.  Der Rest des Bildes war der gleiche.  Der Mann fragt.  Sie antworten ihm nicht.  Nach sechs Monaten oder einem Jahr schreibt jemand, dass er die gleiche Situation hat. Gab es eine L√∂sung?  Und Stille aaaaaaaa ... <br><br><h3>  Erfahrene L√∂sungsversuche </h3><br>  Gut.  Was k√∂nnte der Grund sein?  Zuerst habe ich mich in einem Arbeitsbeispiel umgesehen.  Was f√ºr eine mysteri√∂se JTAG-ID?  K√∂nnte dies an einem funktionierenden System-ID-System liegen? <br><br><img src="https://habrastorage.org/webt/jo/an/be/joanbea7ptsikwoxwrio-xjcfta.png"><br><br>  Zu sich selbst hinzugef√ºgt, hat nicht geholfen.  Vielleicht ist die Br√ºcke zwischen JTAG und Avalon, an die zus√§tzlich alle Peripherieger√§te angeschlossen sind, schuld? <br><br><img src="https://habrastorage.org/webt/to/al/dr/toaldrafp5anp22mp7f-b0kfv6o.png"><br><br>  Hinzugef√ºgt - hat nicht geholfen.  Ich habe noch ein paar Hypothesen ausprobiert, aber mir wurde klar, dass man f√ºr immer raten kann.  Mit Trauer fragte ich sogar Yandex, Bing und sogar BaiDu.  Sie alle wissen weniger als Google.  Es wurde klar, dass wir uns mit der Dekompilierung befassen mussten, um aus dem Programm selbst zu extrahieren, was es brauchte.  √úberpr√ºft, in welcher Sprache das Programm geschrieben ist.  Es stellte sich heraus, dass in Java.  Der Bytecode wird in der Datei Altera_Monitor_Program.jar gespeichert.  Nun, es ist komisch.  Bis auf die Tatsache, dass ich dieses Java √ºberhaupt nicht kenne.  In Java Script gab es einen Fall, der sich mit dem Internet der Dinge befasste, aber ich bin nicht auf ein echtes Java gesto√üen.  Aber wo unsere nicht verschwunden sind! <br><br><h3>  JAVA-Bytecode-Analyse, um das Problem zu finden </h3><br>  Wie √∂ffne ich Bytecode?  Google f√ºhrte zu einem Artikel √ºber Habr√©, in dem es hei√üt, dass Sie daf√ºr die JD-GUI verwenden m√ºssen.  Fand es auf Github, lud es herunter.  Ich habe den Problembereich ziemlich schnell identifiziert, da die JD-GUI eine wunderbare interaktive Navigation hat.  Von der Nachricht auf die Website ging ich in 10 Minuten aus.  In diesem Abschnitt wird ein Drittanbieterprogramm aufgerufen, wonach die Antwort analysiert wird.  Der Anruf sieht folgenderma√üen aus: <br><pre><code class="plaintext hljs">systemConsoleCommand[index] = "system-console"; systemConsoleCommand[var24++] = "--script=" + Globals.gHost.getMonitorProgramRootDir("bin/jtag_instance_check.tcl", true); systemConsoleCommand[var24++] = cable; systemConsoleCommand[var24++] = Globals.gProject.system.sofFilename; try { Process sysConsoleProc = NiosIIShell.executeCommand(systemConsoleCommand).start(); BufferedReader gdbIn = new BufferedReader(new InputStreamReader(sysConsoleProc.getInputStream()));</code> </pre> <br>  Nun, und weiter - Analyse der Antwort, die wir noch nicht ber√ºcksichtigen. <br><br>  Mit diesem Code habe ich versucht, die NIOS II-Konsole zu √∂ffnen: <br><br><img src="https://habrastorage.org/webt/s4/u8/tl/s4u8tl-vtf3qn8x0ckrughrfjey.png"><br><br>  Dort ging ich in das Verzeichnis, in dem sich die Sof-Datei befindet, und fuhr die Befehlszeile: <br>  <b>system-console --script = jtag_instance_check.tcl USB-0 test.sof</b> <br><br>  Dazu musste ich jedoch die Datei C: \ intelFPGALite \ 17.1 \ University_Program \ Monitor_Program \ bin \ jtag_instance_check.tcl an dieselbe Stelle kopieren, an der sich sof befindet, um nicht unter dem Pfad zu leiden.  Am Ende bekam ich eine ziemlich anst√§ndige Antwort: <br><br>  <b>TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH jtag_uart_0 (INSTANCE_ID: 0)</b> <b><br><br></b>  <b>TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH nios2_gen2_0 (INSTANCE_ID: 0)</b> <b><br></b> <br><br>  Alles scheint sch√∂n zu sein ... <br><br><h3>  JAVA Bytecode Tracing </h3><br>  Wenn der Fall heute stattfinden w√ºrde, w√ºrde dieser Abschnitt nicht existieren.  Aber es ist gestern passiert.  Ich habe Java immer noch sehr schlecht verstanden.  Was dort beim Parsen des Textes geschrieben wurde, war f√ºr mich ein dunkler Wald.  Zwar besuchte mein Kind zwei Jahre lang Olympiade-Programmierkurse bei 1Soviet-Franchisenehmern (Zertifikate und Handouts waren 1Sovskie).  F√ºr diese Kurse wurde verr√ºcktes Geld gegeben.  Und sie haben sie dort nur in Java unterrichtet.  Also verstand er auch nicht, was weiter im Code geschrieben war (unter Beibehaltung der Intrige werde ich den Code etwas niedriger ver√∂ffentlichen, nicht jetzt).  Im Allgemeinen gab es ein anhaltendes Gef√ºhl, dass es Zeit war, zu verfolgen.  Ich kenne den schlechten Abschnitt, ich sehe, dass die Zeilen dort empfangen wurden und das Programm sie mit etwas nicht mag.  Also was? <br><br>  Das Kind fand mir einen sehr wunderbaren Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.crowdstrike.com/blog/native-java-bytecode-debugging-without-source-code</a> <br><br>  Es handelt sich um ein sehr n√ºtzliches Plugin f√ºr Eclipse, mit dem Sie mit JARs arbeiten und darin Haltepunkte setzen k√∂nnen.  Wo ich herunterladen kann, habe ich hier gefunden: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">marketark.eclipse.org/content/bytecode-visualizer/help</a> <br><br>  Ich habe Eclipse heruntergeladen, das Plug-In f√ºr die Offline-Installation mit halbem Kummer heruntergeladen ... Ich habe mit der Installation begonnen - es gibt nicht gen√ºgend Bibliotheken.  Ich fing an zu lesen.  Es stellt sich heraus, dass es drei Versionen des Plugins gibt.  Unter Eslipse 4.5 (Mars), 4.4 (Luna) und 4.3 (ich erinnere mich nicht an den Namen).  Nun, alles ist einfach.  Wir gehen zur Eclipse-Website und sehen einen Link zum Herunterladen der Version von Mars f√ºr Java ... Und ... Es ist tot.  Es spielt keine Rolle!  Es gibt ungef√§hr ein Dutzend Spiegel! .. Und alle Links zu ihnen sind tot.  Wir versuchen Luna f√ºr Java, dort sind Links zu x64 tot, zu x86 gibt es einen Lebenden ... Wie ein Freund von mir sagt: "H√§morrhoiden, es ist umfassend."  Im Allgemeinen hatte Google Schwierigkeiten, fand aber eine 64-Bit-Java-Assembly der Mars-Version auf einem inoffiziellen Server.  Ich habe es eine halbe Stunde lang heruntergeladen, aber heruntergeladen. <br><br>  Ein Plugin implementiert, ein Projekt erstellt ... Horror!  Dort befindet sich der Trace nicht auf der Ebene des Quellcodes, sondern auf der Ebene eines Assemblers.  Kurz gesagt, der decodierte Bytecode wird verfolgt.  Aber in der Tat spielt es keine Rolle!  Schlie√ülich k√∂nnen Sie immer √ºberpr√ºfen, ob die dekompilierten Quellen in einem anderen Fenster ge√∂ffnet sind, und das Plugin zeigt sehr gute Kommentare ... Es stellte sich auch heraus, dass Haltepunkte nicht an jedem Ort, sondern nur am Eingang der Funktion gesetzt werden k√∂nnen.  Aber ich kann nicht aufh√∂ren!  Es ist nicht viel da und Sie m√ºssen vom Eingang zum Problembereich gehen. <br><br>  Ich m√∂chte Sie daran erinnern, dass die verarbeiteten Zeilen folgenderma√üen aussehen: <br>  <b>TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH jtag_uart_0 (INSTANCE_ID: 0)</b> <b><br><br></b>  <b>TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH nios2_gen2_0 (INSTANCE_ID: 0)</b> <br><br>  Und hier ist der Java-Code: <br><pre> <code class="plaintext hljs">if (str.contains("(INSTANCE_ID:")) { Pattern getInstance = Pattern.compile("\\(INSTANCE_ID:(\\d+)\\)"); Matcher idMatcher = getInstance.matcher(str); if (idMatcher.find()) { String foundstr = idMatcher.group(1); instance = Integer.parseInt(foundstr); }</code> </pre><br>  Isoliert die Instanz-ID perfekt.  Und hier ist der Code: <br><pre> <code class="plaintext hljs"> Pattern getHPath = Pattern.compile("FULL_HPATH (.+?)\\|(.+?) \\("); Matcher hpathMatcher = getHPath.matcher(str); if (hpathMatcher.find()) { hpath = hpathMatcher.group(2).replace("|", "."); }</code> </pre><br>  Die Variable hpath wird nicht ausgef√ºllt.  Heute wei√ü ich schon, dass der regul√§re Ausdruck: <br><pre> <code class="plaintext hljs">"FULL_HPATH (.+?)\\|(.+?) \\("</code> </pre> <br>  erfordert zwei W√∂rter, die durch einen vertikalen Balken getrennt sind.  Nun, dann nur was ist, nachdem die Linie genommen wurde.  Ich wusste es gestern nicht.  Interessanter ist eine andere.  Das Kind studierte zwei Jahre lang Arbeit in Java und lernte keine regul√§ren Ausdr√ºcke!  Nein, es ist klar, dass ihnen nicht die Sprache beigebracht wurde, sondern die Olympiadenprogrammierung mittels der Sprache, aber so wie ich es verstehe, sind regul√§re Ausdr√ºcke in Java in der Reihenfolge der Dinge.  Sie nehmen solches Geld, sie sch√ºtteln Zertifikate von seri√∂sen Unternehmen, aber sie lehren keine wichtigen Dinge ... Aber ich schweife ab. <br><br><h3>  Licht am Ende des Tunnels </h3><br>  Was ist die vertikale Linie?  Wir nehmen das Projekt, das funktioniert hat, geben ihm das gleiche Team und erhalten diese Antwort: <br><br>  <b>TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH Computer_System: The_System | JTAG_UART (INSTANCE_ID: 0)</b> <b><br><br></b>  <b>TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH Computer_System: The_System | JTAG_UART_2nd_Core (INSTANCE_ID: 1)</b> <b><br><br></b>  <b>TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH Computer_System: The_System | JTAG_UART_for_ARM_0 (INSTANCE_ID: 2)</b> <b><br><br></b>  <b>TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH Computer_System: The_System | JTAG_UART_for_ARM_1 (INSTANCE_ID: 3)</b> <b><br><br></b>  <b>TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH Computer_System: The_System | Nios2 (INSTANCE_ID: 0)</b> <b><br><br></b>  <b>TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH Computer_System: The_System | Nios2_2nd_Core (INSTANCE_ID: 1)</b> <br><br>  Was ist Computer_System: The_System?  Hier ist alles einfach.  In dieser Artikelserie f√∂rdere ich eine fortgeschrittene Idee, bei der sich das Computersystem auf der obersten Ebene der Hierarchie befindet. <div class="spoiler">  <b class="spoiler_title">Und dieses Beispiel hat diese Verilog-Ebene:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">module DE0_Nano_SoC_Computer ( //////////////////////////////////// // FPGA Pins //////////////////////////////////// // Clock pins input CLOCK_50, input CLOCK2_50, input CLOCK3_50, // ADC output ADC_CONVST, output ADC_SCLK, output ADC_SDI, input ADC_SDO, // ARDUINO inout [15:0] ARDUINO_IO, inout ARDUINO_RESET_N, // GPIO inout [35:0] GPIO_0, inout [35:0] GPIO_1, // KEY input [1:0] KEY, // LED output [7:0] LED, // SW input [3:0] SW, //////////////////////////////////// // HPS Pins //////////////////////////////////// // DDR3 SDRAM output [14:0] HPS_DDR3_ADDR, output [2:0] HPS_DDR3_BA, output HPS_DDR3_CAS_N, output HPS_DDR3_CKE, output HPS_DDR3_CK_N, output HPS_DDR3_CK_P, output HPS_DDR3_CS_N, output [3:0] HPS_DDR3_DM, inout [31:0] HPS_DDR3_DQ, inout [3:0] HPS_DDR3_DQS_N, inout [3:0] HPS_DDR3_DQS_P, output HPS_DDR3_ODT, output HPS_DDR3_RAS_N, output HPS_DDR3_RESET_N, input HPS_DDR3_RZQ, output HPS_DDR3_WE_N, // Ethernet output HPS_ENET_GTX_CLK, inout HPS_ENET_INT_N, output HPS_ENET_MDC, inout HPS_ENET_MDIO, input HPS_ENET_RX_CLK, input [3:0] HPS_ENET_RX_DATA, input HPS_ENET_RX_DV, output [3:0] HPS_ENET_TX_DATA, output HPS_ENET_TX_EN, // Accelerometer inout HPS_GSENSOR_INT, // I2C inout HPS_I2C0_SCLK, inout HPS_I2C0_SDAT, inout HPS_I2C1_SCLK, inout HPS_I2C1_SDAT, // Pushbutton inout HPS_KEY, // LED inout HPS_LED, // LTC inout HPS_LTC_GPIO, // SD Card output HPS_SD_CLK, inout HPS_SD_CMD, inout [3:0] HPS_SD_DATA, // SPI output HPS_SPIM_CLK, input HPS_SPIM_MISO, output HPS_SPIM_MOSI, inout HPS_SPIM_SS, // UART input HPS_UART_RX, output HPS_UART_TX, // USB inout HPS_CONV_USB_N, input HPS_USB_CLKOUT, inout [7:0] HPS_USB_DATA, input HPS_USB_DIR, input HPS_USB_NXT, output HPS_USB_STP ); //======================================================= // REG/WIRE declarations //======================================================= wire hps_fpga_reset_n; //======================================================= // Structural coding //======================================================= Computer_System The_System ( //////////////////////////////////// // FPGA Side //////////////////////////////////// // Global signals .system_pll_ref_clk_clk (CLOCK_50), .system_pll_ref_reset_reset (1'b0), // ADC .adc_sclk (ADC_SCLK), .adc_cs_n (ADC_CONVST), .adc_dout (ADC_SDO), .adc_din (ADC_SDI), // Arduino GPIO .arduino_gpio_export (ARDUINO_IO), // Arduino Reset_n .arduino_reset_n_export (ARDUINO_RESET_N), // Slider Switches .slider_switches_export (SW), // Pushbuttons .pushbuttons_export (~KEY), // Expansion JP1 .expansion_jp1_export ({GPIO_0[35:19], GPIO_0[17], GPIO_0[15:3], GPIO_0[1]}), // Expansion JP7 .expansion_jp7_export ({GPIO_1[35:19], GPIO_1[17], GPIO_1[15:3], GPIO_1[1]}), // LEDs .leds_export (LED), //////////////////////////////////// // HPS Side //////////////////////////////////// // DDR3 SDRAM .memory_mem_a (HPS_DDR3_ADDR), .memory_mem_ba (HPS_DDR3_BA), .memory_mem_ck (HPS_DDR3_CK_P), .memory_mem_ck_n (HPS_DDR3_CK_N), .memory_mem_cke (HPS_DDR3_CKE), .memory_mem_cs_n (HPS_DDR3_CS_N), .memory_mem_ras_n (HPS_DDR3_RAS_N), .memory_mem_cas_n (HPS_DDR3_CAS_N), .memory_mem_we_n (HPS_DDR3_WE_N), .memory_mem_reset_n (HPS_DDR3_RESET_N), .memory_mem_dq (HPS_DDR3_DQ), .memory_mem_dqs (HPS_DDR3_DQS_P), .memory_mem_dqs_n (HPS_DDR3_DQS_N), .memory_mem_odt (HPS_DDR3_ODT), .memory_mem_dm (HPS_DDR3_DM), .memory_oct_rzqin (HPS_DDR3_RZQ), // Accelerometer .hps_io_hps_io_gpio_inst_GPIO61 (HPS_GSENSOR_INT), // Ethernet .hps_io_hps_io_gpio_inst_GPIO35 (HPS_ENET_INT_N), .hps_io_hps_io_emac1_inst_TX_CLK (HPS_ENET_GTX_CLK), .hps_io_hps_io_emac1_inst_TXD0 (HPS_ENET_TX_DATA[0]), .hps_io_hps_io_emac1_inst_TXD1 (HPS_ENET_TX_DATA[1]), .hps_io_hps_io_emac1_inst_TXD2 (HPS_ENET_TX_DATA[2]), .hps_io_hps_io_emac1_inst_TXD3 (HPS_ENET_TX_DATA[3]), .hps_io_hps_io_emac1_inst_RXD0 (HPS_ENET_RX_DATA[0]), .hps_io_hps_io_emac1_inst_MDIO (HPS_ENET_MDIO), .hps_io_hps_io_emac1_inst_MDC (HPS_ENET_MDC), .hps_io_hps_io_emac1_inst_RX_CTL (HPS_ENET_RX_DV), .hps_io_hps_io_emac1_inst_TX_CTL (HPS_ENET_TX_EN), .hps_io_hps_io_emac1_inst_RX_CLK (HPS_ENET_RX_CLK), .hps_io_hps_io_emac1_inst_RXD1 (HPS_ENET_RX_DATA[1]), .hps_io_hps_io_emac1_inst_RXD2 (HPS_ENET_RX_DATA[2]), .hps_io_hps_io_emac1_inst_RXD3 (HPS_ENET_RX_DATA[3]), // I2C .hps_io_hps_io_i2c0_inst_SDA (HPS_I2C0_SDAT), .hps_io_hps_io_i2c0_inst_SCL (HPS_I2C0_SCLK), .hps_io_hps_io_i2c1_inst_SDA (HPS_I2C1_SDAT), .hps_io_hps_io_i2c1_inst_SCL (HPS_I2C1_SCLK), // Pushbutton .hps_io_hps_io_gpio_inst_GPIO54 (HPS_KEY), // LED .hps_io_hps_io_gpio_inst_GPIO53 (HPS_LED), // LTC .hps_io_hps_io_gpio_inst_GPIO40 (HPS_LTC_GPIO), // SD Card .hps_io_hps_io_sdio_inst_CMD (HPS_SD_CMD), .hps_io_hps_io_sdio_inst_D0 (HPS_SD_DATA[0]), .hps_io_hps_io_sdio_inst_D1 (HPS_SD_DATA[1]), .hps_io_hps_io_sdio_inst_CLK (HPS_SD_CLK), .hps_io_hps_io_sdio_inst_D2 (HPS_SD_DATA[2]), .hps_io_hps_io_sdio_inst_D3 (HPS_SD_DATA[3]), // SPI .hps_io_hps_io_spim1_inst_CLK (HPS_SPIM_CLK), .hps_io_hps_io_spim1_inst_MOSI (HPS_SPIM_MOSI), .hps_io_hps_io_spim1_inst_MISO (HPS_SPIM_MISO), .hps_io_hps_io_spim1_inst_SS0 (HPS_SPIM_SS), // UART .hps_io_hps_io_uart0_inst_RX (HPS_UART_RX), .hps_io_hps_io_uart0_inst_TX (HPS_UART_TX), // USB .hps_io_hps_io_gpio_inst_GPIO09 (HPS_CONV_USB_N), .hps_io_hps_io_usb1_inst_D0 (HPS_USB_DATA[0]), .hps_io_hps_io_usb1_inst_D1 (HPS_USB_DATA[1]), .hps_io_hps_io_usb1_inst_D2 (HPS_USB_DATA[2]), .hps_io_hps_io_usb1_inst_D3 (HPS_USB_DATA[3]), .hps_io_hps_io_usb1_inst_D4 (HPS_USB_DATA[4]), .hps_io_hps_io_usb1_inst_D5 (HPS_USB_DATA[5]), .hps_io_hps_io_usb1_inst_D6 (HPS_USB_DATA[6]), .hps_io_hps_io_usb1_inst_D7 (HPS_USB_DATA[7]), .hps_io_hps_io_usb1_inst_CLK (HPS_USB_CLKOUT), .hps_io_hps_io_usb1_inst_STP (HPS_USB_STP), .hps_io_hps_io_usb1_inst_DIR (HPS_USB_DIR), .hps_io_hps_io_usb1_inst_NXT (HPS_USB_NXT) ); endmodule</code> </pre><br></div></div><br>  Ich habe es speziell vollst√§ndig zur Sprache gebracht, um zu betonen, wie viel v√∂llig unn√∂tigen Code Sie in diesem Fall schreiben m√ºssen.  Und wenn die Beine hinzugef√ºgt oder entfernt werden, muss dieser Code ebenfalls bearbeitet werden.  Eigentlich die Zeilen <br><br><img src="https://habrastorage.org/webt/gg/_n/b3/gg_nb3rvplsmdkewhuqiqgctyqa.png"><br><div class="spoiler">  <b class="spoiler_title">Gleicher Text:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">... Computer_System The_System ( //////////////////////////////////// // FPGA Side //////////////////////////////////// // Global signals .system_pll_ref_clk_clk (CLOCK_50), ...</code> </pre><br></div></div><br>  und geben Sie dieses Pr√§fix.  Die Autoren glauben, dass die Hierarchie so sein sollte, nur diese und keine andere.  Das Prozessorsystem kann nicht tiefer entfernt und nicht hochgetragen werden. <br><br><h3>  Wir sollten nicht auf die Gnade der Natur warten, sondern sie annehmen - unsere Aufgabe! </h3><br>  Haben wir wirklich so einen Job gemacht, nur um diese Angelegenheit zu ertragen?  Wie ein Freund von mir gerne sagt: ‚ÄûUnn√∂tige Arbeit ist schlimmer als Trunkenheit‚Äú, und die Schaffung einer solchen Schicht ist ein typischer Fall von unn√∂tiger Arbeit.  Daher werden wir versuchen, diese Einschr√§nkung zu umgehen.  Denken Sie daran, dass beim Aufrufen eines JAVA-Programms eines Drittanbieters der Code ein tcl-Skript ersetzte und ich es auch in das Verzeichnis neben der sof-Datei kopierte.  Es ist unser Heil!  Er teilt der Systemkonsole mit, welche Aktionen auszuf√ºhren sind, und er formatiert die Antwort.  Die Formatierung sieht folgenderma√üen aus: <br><img src="https://habrastorage.org/webt/6a/si/cq/6asicqpxflldfmtmq1qveh_6c4q.png"><br><div class="spoiler">  <b class="spoiler_title">Gleicher Text:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"># PRINT OUT INSTANCE ID INFO FOR EVERYTHING: set i 0 foreach path [lsort -command compare_node_number [get_service_paths bytestream]] { # If this path corresponds to a JTAG UART, incr i if {[string match *$cable_name* $path ] &amp;&amp; [string match *jtag_uart* [marker_get_type $path] ]} { puts "[marker_get_info $path] (INSTANCE_ID:$i)" incr i } } set i 0 foreach path [lsort -command compare_node_number [get_service_paths processor]] { # If this path corresponds to a NiosII, incr i if {[string match *$cable_name* $path ] &amp;&amp; [string match *nios2* [marker_get_type $path] ]} { puts "[marker_get_info $path] (INSTANCE_ID:$i)" incr i } }</code> </pre><br></div></div><br>  Der erste Block formatiert Informationen zu JTAG_UART-Bl√∂cken, der zweite zu Prozessorkernen.  Wenn wir hier vertikale Linien zum Ausgabestream hinzuf√ºgen!  Mein Kollege hat diesen Abschnitt wie folgt korrigiert: <br><pre> <code class="plaintext hljs"># PRINT OUT INSTANCE ID INFO FOR EVERYTHING: set i 0 foreach path [lsort -command compare_node_number [get_service_paths bytestream]] { # If this path corresponds to a JTAG UART, incr i if {[string match *$cable_name* $path ] &amp;&amp; [string match *jtag_uart* [marker_get_type $path] ]} { set info [marker_get_info $path] if {[string first "|" $info] == -1} { set info [string map {"FULL_HPATH " "FULL_HPATH a:b|"} $info] } puts "$info (INSTANCE_ID:$i)" incr i } } set i 0 foreach path [lsort -command compare_node_number [get_service_paths processor]] { # If this path corresponds to a NiosII, incr i if {[string match *$cable_name* $path ] &amp;&amp; [string match *nios2* [marker_get_type $path] ]} { set info [marker_get_info $path] if {[string first "|" $info] == -1} { set info [string map {"FULL_HPATH " "FULL_HPATH a:b|"} $info] } puts "$info (INSTANCE_ID:$i)" incr i } }</code> </pre><br>  Wenn keine Bindestriche vorhanden sind, werden diese hinzugef√ºgt.  Und schlie√ülich funktioniert das Programm nicht nur mit einem schrecklichen, sondern auch mit einem optimal geschriebenen Prozessorsystem! <br><br><h2>  Einrichten eines Projekts in Altera Monitor </h2><br>  Uffff.  Das ist alles.  Das Ende des Aush√∂hlens, des Gel√§ndes und der Schlamperei (obwohl im Gel√§nde - das ist nicht korrekt).  Die Zeichnungen im Artikel spiegeln nun wieder die Arbeitsanweisungen wider!  Wir haben ein Projekt f√ºr FPGAs sowie ein Programm, das in Eclipse erstellt und ausgef√ºhrt wird.  Starten Sie nun Altera Monitor und erstellen Sie ein Projekt. <br><br><img src="https://habrastorage.org/webt/zy/kc/b0/zykcb02zebkc-u6wknzbnnqozew.png"><br><br>  Wir erstellen einen Katalog mit dem Projekt (ich habe ihn getrennt vom Projekt f√ºr FPGA abgelegt) und geben den Namen des Projekts an.  W√§hlen Sie auch eine Prozessorarchitektur <br><br><img src="https://habrastorage.org/webt/md/8c/sg/md8csgrftsf_j0mt8vyjrcaaaua.png"><br><br>  Das System, das ich w√§hle, ist Benutzerdefiniertes System.  Sie m√ºssen meine * .sof- und * .sopcinfo-Dateien angeben.  Ich w√§hle sie in den Arbeitsverzeichnissen aus.  Unser System ben√∂tigt keinen Preloader. <br><br><img src="https://habrastorage.org/webt/ej/zb/ad/ejzbad_u22w-hczkkgluen36nfa.png"><br><br>  W√§hlen Sie den Programmtyp Programm mit Ger√§tetreiberunterst√ºtzung aus, dann wird die BSP-Bibliothek erstellt: <br><br><img src="https://habrastorage.org/webt/td/dw/ew/tddwewush_a8-srgsrrnpbcmbo4.png"><br><br>  Bisher gibt es nur eine Arbeitsdatei (sie wurde in Eclipse erstellt).  Hier f√ºge ich es hinzu: <br><br><img src="https://habrastorage.org/webt/f9/pt/mk/f9ptmk-t78ilnla5-7hm4mlnpno.png"><br><br>  Im letzten Fenster √§ndere ich nichts: <br><br><img src="https://habrastorage.org/webt/sm/lf/e_/smlfe__fqs5gt3ieiuhcryd0fso.png"><br><br>  Wir stimmen dem Download der Sof-Datei zu: <br><br><img src="https://habrastorage.org/webt/yl/x6/qx/ylx6qxkmhkql0hbxgdqgakxek4c.png"><br><br>  Wenn wir nur die Software installiert haben, sind wir in den Quellmodus gewechselt.  Dann wird es bereits eingeschaltet (ich werde Ihnen zeigen, wie das Men√º aussieht, wenn alles bereits eingeschaltet ist, es wird auch ein Element zum Einf√ºgen geben). <br><br><img src="https://habrastorage.org/webt/nj/jo/4p/njjo4pxzvs87ygedajsdkh8gx_u.png"><br><br>  Ich habe das einfachste C-Programm: <br><pre> <code class="plaintext hljs">#include "sys/alt_stdio.h" int main() { alt_putstr("Hello from Nios II!\n"); volatile int i=0; i += 1; i += 2; i += 3; i += 4; i += 5; i += 6; i += 7; i += 8; i += 9; i += 10; i += 11; i += 12; /* Event loop never exits. */ while (1); return 0; }</code> </pre><br>  Ich versuche es zu sammeln: <br><br><img src="https://habrastorage.org/webt/d_/2q/pq/d_2qpq5wlpcikhp1sqfzfn4qfxq.png"><br><br>  Ich erhalte eine Fehlermeldung: <br>  <b>c: /intelfpga/17.1/nios2eds/bin/gnu/h-x86_64-mingw32/bin /../ lib / gcc / nios2-elf / 5.3.0 /../../../../ .. /H-x86_64-mingw32/nios2-elf/bin/ld.exe: Regionscode um 15888 Bytes √ºbergelaufen</b> <br><br>  Dies liegt daran, dass ich dem System kein SDRAM hinzugef√ºgt habe, sondern es auf den internen FPGA-Speicher beschr√§nkt habe.  Aber warum passte alles in Eclipse, aber nicht hier?  Weil ich dort BSP mit dem Suffix Small gew√§hlt habe, wurde mir hier aber automatisch ein regul√§res Paket gemacht.  √ñffnen Sie daher die Datei: C: \ Work \ Play2 \ BSP \ settings.bsp <br><br>  Und wir beginnen mit der manuellen Abstimmung. <br><br><img src="https://habrastorage.org/webt/bu/tv/vn/butvvng3etvwox28euel6mvggyq.png"><br><br><img src="https://habrastorage.org/webt/sq/ei/kk/sqeikkntwrn4ju8qtve_yybvgxw.png"><br><br>  BSP neu erstellen: <br><br><img src="https://habrastorage.org/webt/a0/sf/0_/a0sf0_tbaegc9-cusl2bfa-xova.png"><br><br>  Und wieder sammeln wir das Projekt.  Diesmal erfolgreich.  Laden Sie es jetzt: <br><br><img src="https://habrastorage.org/webt/sm/kg/rl/smkgrlr9croftl0y-fagdqqhr1a.png"><br><br><h2>  Endlich die wahre Spur </h2><br>  Sie haben nicht vergessen, warum ich das alles mache?  Ich mache das zum Aufsp√ºren.  Es muss aktiviert sein.  Gehen Sie dazu zur Registerkarte Trace und w√§hlen Sie im Kontextmen√º Trace aktivieren: <br><br><img src="https://habrastorage.org/webt/nv/bo/pp/nvboppbqx8ihyhh6qlxmbxjgfq0.png"><br><br>  Ich werde einen Haltepunkt am Ende der Funktion main () auf der Registerkarte Disassembly einf√ºgen (wie sch√∂n der RISC-Assembler nach dem schrecklichen Stack-Assembler aussieht, in den der Java-Code verwandelt wird!) <br><br>  Hier ist der Beginn der Hauptfunktion: <br><br><img src="https://habrastorage.org/webt/ue/m2/-q/uem2-qdgcpj7stuobbouowscfkw.png"><br><br>  Scrollen Sie ein wenig nach unten und setzen Sie hier einen Haltepunkt: <br><br><img src="https://habrastorage.org/webt/ev/zf/ot/evzfotqiwhr4w0j2f-xrilmfooe.png"><br><br>  Wir starten, warten auf einen Stopp und gehen zur Registerkarte Trace. <br><br>  Im Allgemeinen ist nicht alles sehr gut.  Anfangs gab es offensichtlich eine Art von Erwartung (wir hatten dort eine Schlussfolgerung in der JTAG, es ist also eine legitime Sache): <br><br><img src="https://habrastorage.org/webt/yd/fo/jf/ydfojfs41-yysqn8kqndisvaguw.png"><br><br>  Am Ende - ein anderer Code ... Aber ich sehe den Hauptfunktionscode nicht!  Hier ist das Ende: <br><br><img src="https://habrastorage.org/webt/ww/eb/ky/wwebkyjc8nj3nrdnxrpfqoosbc0.png"><br><br>  Ich wei√ü nicht einmal, was ich sagen soll.  Wenn Sie jedoch nicht einen, sondern zwei Haltepunkte (am Anfang und am Ende der Hauptfunktion) setzen, ist das Bild nach dem √úbergang vom ersten zum zweiten anst√§ndig: <br><br><img src="https://habrastorage.org/webt/kq/pr/en/kqprenc25bb2vbucdmxq_49vzqy.png"><br><br><h2>  Kurze Schlussfolgerungen </h2><br>  Wir haben also herausgefunden, dass es durchaus m√∂glich ist, herauszufinden, wie eine bestimmte Site funktioniert.  So wird das Thema des Artikels ("... wie der Prozessor zu einem solchen Leben gekommen ist") offenbart.  Interessanter ist, wie all diejenigen, deren Probleme gel√∂st werden mussten, um ein Ergebnis zu erzielen, zu einem solchen Leben gekommen sind?  Und es ist sehr bedauerlich, dass ich bisher nicht feststellen konnte, wie viele Bars ein bestimmtes Team absolviert hat.  Aus Ausschnitten der Dokumentation geht hervor, dass dies technisch m√∂glich zu sein scheint, aber welche Software dies zul√§sst, ist nicht klar.  Es gibt eine Meinung, dass das Dokument <b>Analysieren und Debuggen von Designs mit der Systemkonsole</b> , das ich bei der Analyse des tcl-Skripts durchlesen musste, uns helfen wird.  Es hat ein interessantes Tablet. <b>Tabelle 10-15: Trace-Systembefehle</b> , aber ich pers√∂nlich habe einfach keine Zeit f√ºr eine detaillierte Untersuchung dieser Angelegenheit.  Aber vielleicht ist es f√ºr jemanden so wichtig, dass er alles umsetzt.  Diese Befehle sind in tcl-Skripten enthalten. <br><br>  Nun, in den folgenden Artikeln m√ºssen die Messungen auf die altmodische Weise mit einem Oszilloskop durchgef√ºhrt werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464795/">https://habr.com/ru/post/de464795/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464779/index.html">√úber hedonistische Bienen, die Art und Weise, wie Menschen sie arbeiten lassen, und Drohnen</a></li>
<li><a href="../de464781/index.html">Smart-TVs: CRT zu HDR</a></li>
<li><a href="../de464785/index.html">Nicht wettbewerbsf√§hige Beeline-Vorteile</a></li>
<li><a href="../de464787/index.html">Ich bin sicher, dass Senior Mobile Developer nur auf Empfehlung kommen werden</a></li>
<li><a href="../de464791/index.html">Kubernetes f√ºr das Auto: So √∂ffnen Sie den Entwicklerzugriff auf den Bordcomputer und machen ihn sicher</a></li>
<li><a href="../de464803/index.html">"Hide www": Warum Mainstream-Browser-Entwickler sich erneut weigerten, die Subdomain anzuzeigen</a></li>
<li><a href="../de464805/index.html">Eine Schlange auf das iPad schreiben (Pythonista)</a></li>
<li><a href="../de464811/index.html">Apple Music f√ºr den Entwickler</a></li>
<li><a href="../de464819/index.html">Mein sechster Tag mit Haiku: unter der Haube von Ressourcen, Symbolen und Paketen</a></li>
<li><a href="../de464823/index.html">Wir betrachten das Durchschnittsgehalt eines ‚ÄûDatenwissenschaftlers‚Äú. Parsim hh.ru mit pandas / python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>