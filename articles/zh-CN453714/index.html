<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ´ ğŸ¤›ğŸ½ ğŸ’†ğŸ¾ TONæµ‹è¯•å®¢æˆ·ç«¯ï¼ˆç”µæŠ¥å¼€æ”¾ç½‘ç»œï¼‰å’Œç”¨äºæ™ºèƒ½åˆçº¦çš„æ–°Fiftè¯­è¨€ ğŸ§•ğŸ¿ ğŸ¨ ğŸ•Œ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¸€å¹´å¤šä»¥å‰ï¼Œäººä»¬å·²ç»çŸ¥é“Telegram Messengerè®¡åˆ’å‘å¸ƒè‡ªå·±çš„å»ä¸­å¿ƒåŒ–ç½‘ç»œTelegram Open Network ã€‚ ç„¶åï¼Œå¤§é‡çš„æŠ€æœ¯æ–‡æ¡£å¯ä¾›ä½¿ç”¨ï¼Œå¤§æ¦‚æ˜¯Nikolai Durovæ’°å†™çš„ï¼Œæè¿°äº†æœªæ¥ç½‘ç»œçš„ç»“æ„ã€‚ å¯¹äºé‚£äº›é”™è¿‡çš„äººï¼Œæˆ‘å»ºè®®æ‚¨é˜…è¯»æˆ‘å¯¹æœ¬æ–‡æ¡£çš„é‡è¿°ï¼ˆ ç¬¬1 éƒ¨åˆ† ï¼Œ ç¬¬2éƒ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TONæµ‹è¯•å®¢æˆ·ç«¯ï¼ˆç”µæŠ¥å¼€æ”¾ç½‘ç»œï¼‰å’Œç”¨äºæ™ºèƒ½åˆçº¦çš„æ–°Fiftè¯­è¨€</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453714/"><p> ä¸€å¹´å¤šä»¥å‰ï¼Œäººä»¬å·²ç»çŸ¥é“Telegram Messengerè®¡åˆ’å‘å¸ƒè‡ªå·±çš„å»ä¸­å¿ƒåŒ–ç½‘ç»œ<strong>Telegram Open Network</strong> ã€‚ ç„¶åï¼Œå¤§é‡çš„æŠ€æœ¯æ–‡æ¡£å¯ä¾›ä½¿ç”¨ï¼Œå¤§æ¦‚æ˜¯Nikolai Durovæ’°å†™çš„ï¼Œæè¿°äº†æœªæ¥ç½‘ç»œçš„ç»“æ„ã€‚ å¯¹äºé‚£äº›é”™è¿‡çš„äººï¼Œæˆ‘å»ºè®®æ‚¨é˜…è¯»æˆ‘å¯¹æœ¬æ–‡æ¡£çš„é‡è¿°ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">éƒ¨åˆ†</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2éƒ¨åˆ†</a> ï¼›ç¬¬ä¸‰éƒ¨åˆ†ï¼Œaï¼Œä»åœ¨è‰ç¨¿ä¸­æ”¶é›†ç°å°˜ï¼‰ã€‚ </p><br><p>ä»é‚£æ—¶èµ·ï¼Œå°±æ²¡æœ‰å…³äºTONçš„å‘å±•çŠ¶å†µçš„é‡å¤§æ–°é—»ï¼Œç›´åˆ°å‡ å¤©å‰ï¼ˆåœ¨ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">éå®˜æ–¹æ¸ é“ä¸­</a> ï¼‰å‡ºç°äº†æŒ‡å‘é¡µé¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://test.ton.org/download.html</a>çš„é“¾æ¥ï¼Œå…¶ä¸­ï¼š </p><br><p>  <a href="">â—¦ton-test-liteclient-full.tar.xz-</a> TONæµ‹è¯•ç½‘ç»œçš„è½»å®¢æˆ·ç«¯èµ„æºï¼› <br>  <a href="">ton-lite-client-test1.config.json-</a>ç”¨äºè¿æ¥åˆ°æµ‹è¯•ç½‘ç»œçš„é…ç½®æ–‡ä»¶ï¼› <br>  â—¦ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡ªè¿°æ–‡ä»¶</a> -æœ‰å…³æ„å»ºå’Œå¯åŠ¨å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼› <br>  â—¦HOWTO-æœ‰å…³ä½¿ç”¨å®¢æˆ·ç«¯åˆ›å»ºæ™ºèƒ½åˆçº¦çš„åˆ†æ­¥è¯´æ˜ï¼› <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ton.pdf-</a>æ›´æ–°çš„æ–‡ä»¶ï¼ˆ2019å¹´3æœˆ2æ—¥ï¼‰ï¼Œå…¶ä¸­åŒ…å«TONç½‘ç»œçš„æŠ€æœ¯æ¦‚è¿°; <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â—¦tvm.pdf</a> -TVMï¼ˆTONè™šæ‹Ÿæœºï¼ŒTONè™šæ‹Ÿæœºï¼‰çš„æŠ€æœ¯è¯´æ˜ï¼› <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â—¦tblkch.pdf</a> -TON <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŒºå—</a>é“¾çš„æŠ€æœ¯è¯´æ˜; <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â—¦fiftbase.pdf-</a>å¯¹æ–°çš„Fiftè¯­è¨€çš„æè¿°ï¼Œæ—¨åœ¨åœ¨TONä¸­åˆ›å»ºæ™ºèƒ½åˆçº¦ã€‚ </p><br><p> æˆ‘å†è¯´ä¸€éï¼ŒTelegramæ²¡æœ‰å¯¹è¯¥é¡µé¢å’Œæ‰€æœ‰è¿™äº›æ–‡ä»¶çš„å®˜æ–¹ç¡®è®¤ï¼Œä½†æ˜¯è¿™äº›ææ–™çš„æ•°é‡ä½¿å®ƒä»¬çœ‹èµ·æ¥å¾ˆåˆç†ã€‚ è¿è¡Œå·²å‘å¸ƒçš„å®¢æˆ·éœ€è¦<strong>æ‚¨è‡ªæ‹…é£é™©</strong> ã€‚ </p><a name="habracut"></a><br><h2 id="sborka-testovogo-klienta"> æµ‹è¯•å®¢æˆ·ç«¯ç‰ˆæœ¬ </h2><br><p> é¦–å…ˆï¼Œè®©æˆ‘ä»¬å°è¯•æ„å»ºå’Œè¿è¡Œæµ‹è¯•å®¢æˆ·ç«¯-å¹¸è¿çš„æ˜¯ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡ªè¿°æ–‡ä»¶</a>è¯¦ç»†æè¿°äº†æ­¤ç®€å•è¿‡ç¨‹ã€‚ æˆ‘å°†åœ¨macOS 10.14.5çš„ç¤ºä¾‹ä¸­æ‰§è¡Œæ­¤æ“ä½œï¼Œæˆ‘æ— æ³•ä¿è¯å…¶ä»–ç³»ç»Ÿä¸Šçš„æ±‡ç¼–æˆåŠŸã€‚ </p><br><ol><li><p>  <a href="">ä½¿ç”¨æºä»£ç </a>ä¸‹è½½<a href="">å­˜æ¡£æ–‡ä»¶</a>å¹¶è§£<a href="">å‹ç¼©</a> ã€‚ é‡è¦çš„æ˜¯ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œå› ä¸ºåœ¨æ­¤é˜¶æ®µä¸èƒ½ä¿è¯å‘åå…¼å®¹ã€‚ </p><br></li><li><p> æˆ‘ä»¬ç¡®ä¿åœ¨ç³»ç»Ÿä¸Šå®‰è£…äº†æœ€æ–°ç‰ˆæœ¬çš„makeï¼Œcmakeï¼ˆç‰ˆæœ¬3.0.2æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ï¼ŒOpenSSLï¼ˆåŒ…æ‹¬Cå¤´æ–‡ä»¶ï¼‰ï¼Œg ++æˆ–clangã€‚ æˆ‘ä¸å¿…é‡æ–°å®‰è£…ä»»ä½•ä¸œè¥¿ï¼Œä¸€åˆ‡éƒ½ç«‹å³æ”¶é›†åˆ°ã€‚ </p><br></li><li><p>å‡è®¾å°†æºæ–‡ä»¶è§£å‹ç¼©åˆ°<code>~/lite-client</code>æ–‡ä»¶å¤¹ä¸­ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬ä¸ºç»„è£…åçš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼ˆä¾‹å¦‚<code>~/liteclient-build</code> ï¼‰ï¼Œç„¶åä»å…¶ä¸­ï¼ˆ <code>cd ~/liteclient-build</code> ï¼‰ <code>cd ~/liteclient-build</code>å‘½ä»¤ï¼š </p><br><pre> <code class="bash hljs">cmake ~/lite-client cmake --build . --target <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lite-client</code> </pre> <br><p><img src="https://habrastorage.org/webt/sr/lx/j8/srlxj8au48yus3uuddlpenvika0.png" alt="æˆåŠŸçš„å®¢æˆ·å»ºç«‹"><br><br> ä¸ºäº†æ„å»ºç”¨äºæ™ºèƒ½åˆçº¦çš„Fiftè¯­è¨€è§£é‡Šå™¨ï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰ï¼Œæˆ‘ä»¬è¿˜è°ƒç”¨ </p><br><pre> <code class="plaintext hljs">cmake --build . --target fift</code> </pre> <br></li><li><p> ä¸‹è½½å½“å‰çš„<a href="">é…ç½®æ–‡ä»¶</a>ä»¥è¿æ¥åˆ°æµ‹è¯•ç½‘ç»œï¼Œå¹¶å°†å…¶æ”¾å…¥ç»„è£…å¥½çš„å®¢æˆ·ç«¯çš„æ–‡ä»¶å¤¹ä¸­ã€‚ </p><br></li><li><p>  <strong>å®Œæˆ</strong> ï¼Œæ‚¨å¯ä»¥å¯åŠ¨å®¢æˆ·ç«¯ï¼š </p><br><pre> <code class="plaintext hljs">./test-lite-client -C ton-lite-client-test1.config.json</code> </pre> <br></li></ol><br><p> å¦‚æœä¸€åˆ‡éƒ½æ­£ç¡®å®Œæˆï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š </p><br><p><img src="https://habrastorage.org/webt/gl/gg/d3/glggd35dzg4vwogf9woibu43zrk.png" alt="å®¢æˆ·å¯åŠ¨"></p><br><p> å¦‚æ‚¨æ‰€è§ï¼Œå‡ ä¹æ²¡æœ‰å¯ç”¨çš„å‘½ä»¤ï¼š </p><br><p>  â—¦ <strong><code>help</code></strong> -æ˜¾ç¤ºæ­¤å‘½ä»¤åˆ—è¡¨ï¼› <br>  â—¦ <strong><code>quit</code></strong> -é€€å‡º; <br>  â—¦ <strong><code>time</code></strong> -æ˜¾ç¤ºæœåŠ¡å™¨ä¸Šçš„å½“å‰æ—¶é—´ï¼› <br>  <strong><code>status</code></strong> ï¼šæ˜¾ç¤ºè¿æ¥å’Œæœ¬åœ°æ•°æ®åº“çš„çŠ¶æ€ï¼› <br>  â—¦last-æ›´æ–°åŒºå—é“¾çš„çŠ¶æ€ï¼ˆåŠ è½½æœ€åä¸€å—ï¼‰ã€‚ åœ¨æ‰§è¡Œä»»ä½•è¯·æ±‚ä¹‹å‰æ‰§è¡Œæ­¤å‘½ä»¤å¾ˆé‡è¦ï¼Œä»¥ç¡®ä¿æ‚¨å‡†ç¡®çœ‹åˆ°ç½‘ç»œçš„å½“å‰çŠ¶æ€ã€‚ <br>  <strong><code>sendfile</code></strong> <code>&lt;filename&gt;</code> -å°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°TONç½‘ç»œã€‚ è¿™æ˜¯ä¸ç½‘ç»œçš„äº¤äº’-åŒ…æ‹¬ä¾‹å¦‚åˆ›å»ºæ–°çš„æ™ºèƒ½åˆçº¦ä»¥åŠåœ¨è´¦æˆ·ä¹‹é—´è½¬ç§»èµ„é‡‘çš„è¯·æ±‚ï¼› <br>  <strong><code>getaccount</code></strong> <code>&lt;address&gt;</code> -æ˜¾ç¤ºå…·æœ‰æŒ‡å®šåœ°å€çš„å½“å‰ï¼ˆæ‰§è¡Œ<strong><code>last</code></strong>å‘½ä»¤æ—¶ï¼‰å¸æˆ·çŠ¶æ€ï¼› <br>  <strong><code>privkey</code></strong> <code>&lt;filename&gt;</code> -ä»æœ¬åœ°æ–‡ä»¶åŠ è½½ç§é’¥ã€‚ </p><br><p> å¦‚æœåœ¨å®¢æˆ·ç«¯å¯åŠ¨æ—¶ï¼Œä½¿ç”¨<code>-D</code>é€‰é¡¹å°†æ–‡ä»¶å¤¹ä¼ é€’ç»™å®ƒï¼Œåˆ™å®ƒå°†åœ¨å…¶ä¸­æ·»åŠ ä¸»é“¾çš„æœ€åä¸€å—ï¼š </p><br><pre> <code class="bash hljs">./<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lite-client -C ton-lite-client-test1.config.json -D ~/ton-db-dir</code> </pre> <br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿›è¡Œæ›´æœ‰è¶£çš„äº‹æƒ…-å­¦ä¹ Fiftè¯­è¨€ï¼Œå°è¯•ç¼–è¯‘æ™ºèƒ½åˆçº¦ï¼ˆä¾‹å¦‚ï¼Œåˆ›å»ºæµ‹è¯•é’±åŒ…ï¼‰ï¼Œå°†å…¶ä¸Šä¼ åˆ°ç½‘ç»œï¼Œå¹¶å°è¯•åœ¨å¸æˆ·ä¹‹é—´è½¬ç§»èµ„é‡‘ã€‚ </p><br><h2 id="yazyk-fift"> äº”åç§è¯­è¨€ </h2><br><p> ä»æ–‡ä»¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">fiftbase.pdfä¸­ï¼Œ</a>æ‚¨å¯ä»¥å‘ç°ï¼Œè¦åˆ›å»ºæ™ºèƒ½åˆçº¦ï¼ŒTelegramå›¢é˜Ÿåˆ›å»ºäº†ä¸€ç§æ–°çš„å †æ ˆè¯­è¨€<strong>Fift</strong> ï¼ˆæ˜¾ç„¶ï¼Œä»<em>ç¬¬äº”ä¸ª</em>æ•°å­—å¼€å§‹ï¼Œç±»ä¼¼äºForthï¼ŒFiftä¸è¯¥è¯­è¨€æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼‰ã€‚ </p><br><p> è¯¥æ–‡æ¡£ç¯‡å¹…å·¨å¤§ï¼Œæœ‰87é¡µï¼Œåœ¨æœ¬æ–‡çš„æ¡†æ¶ä¸­ï¼Œæˆ‘ä¸ä¼šè¯¦ç»†è®²è¿°å…¶å†…å®¹ï¼ˆè‡³å°‘å› ä¸ºæˆ‘æœ¬äººè¿˜æ²¡æœ‰è¯»å®Œå®ƒï¼šï¼‰ã€‚ æˆ‘å°†é‡ç‚¹ä»‹ç»è¿™äº›è¯­è¨€ï¼Œå¹¶ç»™å‡ºä¸€äº›ä½¿ç”¨è¯¥è¯­è¨€çš„ä»£ç ç¤ºä¾‹ã€‚ </p><br><p> åœ¨åŸºæœ¬çº§åˆ«ä¸Šï¼ŒFiftçš„è¯­æ³•éå¸¸ç®€å•ï¼šå…¶ä»£ç ç”±<em>å•è¯</em>ç»„æˆï¼Œé€šå¸¸ç”±ç©ºæ ¼æˆ–æ¢è¡Œç¬¦åˆ†éš”ï¼ˆç‰¹æ®Šæƒ…å†µï¼šæŸäº›å•è¯æœ¬èº«ä¸éœ€è¦åˆ†éš”ç¬¦ï¼‰ã€‚ ä»»ä½•<em>å•è¯</em>éƒ½æ˜¯å¯¹åº”äºæŸäº›<em>å®šä¹‰</em>çš„åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦åºåˆ—ï¼ˆå¤§è‡´æ¥è¯´ï¼Œè§£é‡Šå™¨åœ¨é‡åˆ°è¯¥å•è¯æ—¶å¿…é¡»æ‰§è¡Œçš„æ“ä½œï¼‰ã€‚ å¦‚æœæ²¡æœ‰è¯¥è¯çš„å®šä¹‰ï¼Œåˆ™è§£é‡Šå™¨å°è¯•å°†å…¶è§£æä¸ºæ•°å­—å¹¶å°†å…¶æ”¾å…¥å †æ ˆä¸­ã€‚ é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™é‡Œçš„æ•°å­—-çªç„¶æ˜¯257ä½æ•´æ•°ï¼Œä½†æ˜¯æ ¹æœ¬æ²¡æœ‰å°æ•°-æ›´å‡†ç¡®åœ°è¯´ï¼Œå®ƒä»¬ç«‹å³å˜æˆä¸€å¯¹æ•´æ•°ï¼Œå½¢æˆæœ‰ç†æ•°çš„åˆ†å­å’Œåˆ†æ¯ã€‚ </p><br><p> å•è¯é€šå¸¸ä¸å †æ ˆé¡¶éƒ¨çš„å«ä¹‰ç›¸äº’ä½œç”¨ã€‚ å•è¯çš„å¦ä¸€ç§ç±»å‹- <em>å‰ç¼€</em> -ä¸ä½¿ç”¨å †æ ˆï¼Œè€Œæ˜¯ä½¿ç”¨æºæ–‡ä»¶ä¸­çš„åç»­å­—ç¬¦ã€‚ ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²æ–‡å­—æ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„ï¼šâ€œå¼•å·â€ï¼ˆ <code>"</code> ï¼‰å­—ç¬¦æ˜¯ä¸€ä¸ªå‰ç¼€å•è¯ï¼Œå®ƒæœç´¢ä¸‹ä¸€ä¸ªï¼ˆç»“æŸï¼‰å¼•å·å¹¶å°†å­—ç¬¦ä¸²æ”¾åœ¨å®ƒä»¬ä¹‹é—´çš„å †æ ˆä¸­ã€‚å•è¡Œï¼ˆ <code>//</code> ï¼‰å’Œå¤šè¡Œï¼ˆ <code>/*</code> ï¼‰çš„è¡Œä¸ºæ–¹å¼ç›¸åŒè¯„è®ºã€‚ </p><br><p> è‡³æ­¤ï¼Œè¯­è¨€çš„å‡ ä¹æ•´ä¸ªå†…éƒ¨ç»“æ„ç»“æŸäº†ã€‚ å…¶ä»–æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬æ§åˆ¶ç»“æ„ï¼‰éƒ½å®šä¹‰ä¸ºå•è¯ï¼ˆå†…éƒ¨ï¼Œä¾‹å¦‚ç®—æœ¯è¿ç®—å’Œæ–°å•è¯çš„å®šä¹‰ï¼›æˆ–è€…åœ¨â€œæ ‡å‡†åº“â€ <code>Fift.fif</code>å®šä¹‰ï¼Œè¯¥<code>crypto/fift</code>ä½äºæºä»£ç çš„<code>crypto/fift</code>ä¸­ï¼‰ã€‚ </p><br><p> ä¸€ä¸ªFiftç¨‹åºçš„ç®€å•ç¤ºä¾‹ï¼š </p><br><pre> <code class="plaintext hljs">{ dup =: x dup * =: y } : setxy 3 setxy x . y . xy + . 7 setxy x . y . xy + .</code> </pre> <br><p> ç¬¬ä¸€è¡Œå®šä¹‰äº†æ–°å•è¯<code>setxy</code> ï¼ˆè¯·æ³¨æ„å‰ç¼€<code>{</code> ï¼Œå®ƒåœ¨ç»“æŸ<code>setxy</code> <code>}</code>ä¹‹å‰åˆ›å»ºäº†å—ï¼Œè€Œå‰ç¼€<code>:</code>å®é™…ä¸Šå®šä¹‰äº†è¯¥è¯ï¼‰ã€‚  <code>setxy</code>ä»å †æ ˆçš„é¡¶éƒ¨è·å–ä¸€ä¸ªæ•°å­—ï¼Œå°†å…¶å®šä¹‰ï¼ˆæˆ–é‡æ–°å®šä¹‰ï¼‰ä¸ºå…¨å±€<em>å¸¸é‡</em> <code>x</code> ï¼Œå¹¶å°†è¯¥æ•°å­—çš„å¹³æ–¹å®šä¹‰ä¸ºå¸¸é‡<code>y</code> ï¼ˆå‡è®¾å¯ä»¥é‡æ–°å®šä¹‰å¸¸é‡çš„å€¼ï¼Œæˆ‘å®æ„¿ç§°å®ƒä»¬ä¸ºå˜é‡ï¼Œä½†æˆ‘éµå¾ªè¯¥è¯­è¨€çš„å‘½åæ–¹å¼ï¼‰ã€‚ </p><br><p> åœ¨æ¥ä¸‹æ¥çš„ä¸¤è¡Œä¸­ï¼Œå°†ä¸€ä¸ªæ•°å­—æ”¾åœ¨å †æ ˆä¸Šï¼Œ <code>setxy</code> ï¼Œç„¶åæ˜¾ç¤ºå¸¸æ•°<code>x</code> ï¼Œ <code>y</code>çš„å€¼ï¼ˆè¯¥å•è¯ç”¨äºè¾“å‡º<code>.</code> ï¼‰ï¼Œå°†ä¸¤ä¸ªå¸¸æ•°éƒ½å‹å…¥å †æ ˆï¼Œç›¸åŠ å¹¶æ˜¾ç¤ºç»“æœã€‚ ç»“æœï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ï¼š </p><br><pre> <code class="plaintext hljs">3 9 12 ok 7 49 56 ok</code> </pre> <br><p>  ï¼ˆè§£é‡Šå™¨åœ¨äº¤äº’å¼è¾“å…¥æ¨¡å¼ä¸‹å®Œæˆå¯¹å½“å‰è¡Œçš„å¤„ç†åï¼Œå°†å…¶æ‰“å°ä¸ºâ€œ okâ€ï¼‰ </p><br><p> å¥½å§ï¼Œä¸€ä¸ªå®Œæ•´çš„ä»£ç ç¤ºä¾‹ï¼š </p><br><pre> <code class="plaintext hljs">"Asm.fif" include -1 constant wc // create a wallet in workchain -1 (masterchain) // Create new simple wallet &lt;{ SETCP0 DUP IFNOTRET INC 32 THROWIF // return if recv_internal, fail unless recv_external 512 INT LDSLICEX DUP 32 PLDU // sign cs cnt c4 PUSHCTR CTOS 32 LDU 256 LDU ENDS // sign cs cnt cnt' pubk s1 s2 XCPU // sign cs cnt pubk cnt' cnt EQUAL 33 THROWIFNOT // ( seqno mismatch? ) s2 PUSH HASHSU // sign cs cnt pubk hash s0 s4 s4 XC2PU // pubk cs cnt hash sign pubk CHKSIGNU // pubk cs cnt ? 34 THROWIFNOT // signature mismatch ACCEPT SWAP 32 LDU NIP DUP SREFS IF:&lt;{ 8 LDU LDREF // pubk cnt mode msg cs s0 s2 XCHG SENDRAWMSG // pubk cnt cs ; ( message sent ) }&gt; ENDS INC NEWC 32 STU 256 STU ENDC c4 POPCTR }&gt;c // code &lt;b 0 32 u, newkeypair swap dup constant wallet_pk "new-wallet.pk" B&gt;file B, b&gt; // data // no libraries &lt;bb{00110} s, rot ref, swap ref, b&gt; // create StateInit dup ."StateInit: " &lt;s csr. cr dup hash dup constant wallet_addr ."new wallet address = " wc . .": " dup x. cr wc over 7 smca&gt;$ type cr 256 u&gt;B "new-wallet.addr" B&gt;file &lt;b 0 32 u, b&gt; dup ."signing message: " &lt;s csr. cr dup hash wallet_pk ed25519_sign_uint rot &lt;bb{1000100} s, wc 8 i, wallet_addr 256 u, b{000010} s, swap &lt;ss, b{0} s, swap B, swap &lt;ss, b&gt; dup ."External message for initialization is " &lt;s csr. cr 2 boc+&gt;B dup Bx. cr "new-wallet-query.boc" tuck B&gt;file ."(Saved to file " type .")" cr</code> </pre> <br><p> è¿™ä¸ªçœ‹èµ·æ¥å¾ˆå“äººçš„æ–‡ä»¶æ—¨åœ¨åˆ›å»ºæ™ºèƒ½åˆçº¦-æ‰§è¡Œåå°†æ”¾ç½®åœ¨<code>new-wallet-query.boc</code> ã€‚ è¯·æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨äº†TONè™šæ‹Ÿæœºçš„å¦ä¸€ç§æ±‡ç¼–è¯­è¨€ï¼ˆæˆ‘å°†ä¸å¯¹å…¶è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼‰ï¼Œå…¶è¯´æ˜å°†æ”¾åœ¨åŒºå—é“¾ä¸Šã€‚ </p><br><p> å› æ­¤ï¼ŒTVMçš„æ±‡ç¼–å™¨ç”¨Fiftç¼–å†™-è¯¥æ±‡ç¼–å™¨çš„æºä»£ç åœ¨<code>crypto/fift/Asm.fif</code>æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨ä¸Šè¿°ä»£ç çš„å¼€å¤´è¿æ¥ã€‚ </p><br><p> æˆ‘å¯ä»¥è¯´ä»€ä¹ˆï¼Œæ˜¾ç„¶ï¼ŒNikolai Durovåªå–œæ¬¢åˆ›å»ºæ–°çš„ç¼–ç¨‹è¯­è¨€:) </p><br><h2 id="sozdanie-smart-kontrakta-i-vzaimodeystvie-s-ton"> åˆ›å»ºæ™ºèƒ½åˆçº¦å¹¶ä¸TONäº¤äº’ </h2><br><p> å› æ­¤ï¼Œå‡è®¾å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å°†TONå®¢æˆ·ç«¯å’ŒFiftè§£é‡Šå™¨æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶ç†Ÿæ‚‰äº†è¯¥è¯­è¨€ã€‚ ç°åœ¨å¦‚ä½•åˆ›å»ºæ™ºèƒ½åˆçº¦ï¼Ÿ åœ¨æºé™„å¸¦çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">HOWTO</a>æ–‡ä»¶ä¸­å¯¹æ­¤è¿›è¡Œäº†æè¿°ã€‚ </p><br><h3 id="akkaunty-v-ton">  TONå¸æˆ· </h3><br><p> æ­£å¦‚æˆ‘åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TONè¯„è®º</a>ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰€è¿°</a> ï¼Œè¯¥ç½‘ç»œåŒ…å«å¤šä¸ªåŒºå—é“¾-æœ‰ä¸€ä¸ªå¸¸è§çš„æ‰€è°“çš„  â€œä¸»é“¾â€ï¼Œä»¥åŠç”±32ä½æ•°å­—æ ‡è¯†çš„ä»»æ„æ•°é‡çš„å…¶ä»–â€œå·¥ä½œé“¾â€ã€‚ ä¸»é“¾çš„æ ‡è¯†ç¬¦ä¸º-1ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ ‡è¯†ç¬¦ä¸º0çš„â€œåŸºæœ¬â€å·¥ä½œé“¾â€‹â€‹ï¼Œæ¯ä¸ªå·¥ä½œé“¾å¯ä»¥å…·æœ‰è‡ªå·±çš„é…ç½®ã€‚ åœ¨å†…éƒ¨ï¼Œæ¯ä¸ªå·¥ä½œç»„éƒ½è¢«åˆ†æˆå¤šä¸ªåˆ†é“¾ï¼Œä½†è¿™å·²ç»æ˜¯å®ç°çš„ç»†èŠ‚ï¼Œä¸å¿…ç‰¢è®°ã€‚ </p><br><p> è®¸å¤šå¸æˆ·å­˜å‚¨åœ¨ä¸€ä¸ªå·¥ä½œé“¾ä¸­ï¼Œå®ƒä»¬å…·æœ‰è‡ªå·±çš„account_idæ ‡è¯†ç¬¦ã€‚ å¯¹äºä¸»é“¾å’Œé›¶å·¥ä½œé“¾ï¼Œå®ƒä»¬çš„é•¿åº¦ä¸º256ä½ã€‚ å› æ­¤ï¼Œå¸æˆ·æ ‡è¯†ç¬¦çš„ç¼–å†™æ–¹å¼å¦‚ä¸‹ï¼š </p><br><pre> <code class="plaintext hljs">-1:8156775b79325e5d62e742d9b96c30b6515a5cd2f1f64c5da4b193c03f070e0d</code> </pre> <br><p> è¿™æ˜¯ä¸€ç§â€œåŸå§‹â€æ ¼å¼ï¼šé¦–å…ˆæ˜¯å·¥ä½œé“¾æ ‡è¯†ç¬¦ï¼Œç„¶åæ˜¯å†’å·ï¼Œä»¥åŠä»¥åå…­è¿›åˆ¶è¡¨ç¤ºæ³•çš„å¸æˆ·æ ‡è¯†ç¬¦ã€‚ </p><br><p> æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç¼©çŸ­çš„æ ¼å¼-å·¥ä½œé“¾å·å’Œå¸æˆ·åœ°å€ä»¥äºŒè¿›åˆ¶å½¢å¼ç¼–ç ï¼Œå‘å…¶æ·»åŠ æ ¡éªŒå’Œï¼Œæ‰€æœ‰è¿™äº›éƒ½ä»¥Base64ç¼–ç ï¼š </p><br><pre> <code class="plaintext hljs">Ef+BVndbeTJeXWLnQtm5bDC2UVpc0vH2TF2ksZPAPwcODSkb</code> </pre> <br><p> äº†è§£äº†è¿™ç§è®°å½•æ ¼å¼åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡æµ‹è¯•å®¢æˆ·ç«¯è¯·æ±‚å¸æˆ·çš„å½“å‰çŠ¶æ€ï¼š </p><br><pre> <code class="plaintext hljs">getaccount -1:8156775b79325e5d62e742d9b96c30b6515a5cd2f1f64c5da4b193c03f070e0d</code> </pre> <br><p> æˆ‘ä»¬å¾—åˆ°è¿™æ ·çš„ç­”æ¡ˆï¼š </p><br><pre> <code class="plaintext hljs">[ 3][t 2][1558746708.815218925][test-lite-client.cpp:631][!testnode] requesting account state for -1:8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D [ 3][t 2][1558746708.858564138][test-lite-client.cpp:652][!testnode] got account state for -1:8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D with respect to blocks (-1,8000000000000000,72355):F566005749C1B97F18EDE013EBA7A054B9014961BC1AD91F475B9082919A2296:1BD5DE54333164025EE39D389ECE2E93DA2871DA616D488253953E52B50DC03F and (-1,8000000000000000,72355):F566005749C1B97F18EDE013EBA7A054B9014961BC1AD91F475B9082919A2296:1BD5DE54333164025EE39D389ECE2E93DA2871DA616D488253953E52B50DC03F account state is (account addr:(addr_std anycast:nothing workchain_id:-1 address:x8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D) storage_stat:(storage_info used:(storage_used cells:(var_uint len:1 value:3) bits:(var_uint len:2 value:539) public_cells:(var_uint len:0 value:0)) last_paid:0 due_payment:nothing) storage:(account_storage last_trans_lt:74208000003 balance:(currencies grams:(nanograms amount:(var_uint len:7 value:999928362430000)) other:(extra_currencies dict:hme_empty)) state:(account_active ( split_depth:nothing special:nothing code:(just value:(raw@^Cell x{} x{FF0020DDA4F260D31F01ED44D0D31FD166BAF2A1F80001D307D4D1821804A817C80073FB0201FB00A4C8CB1FC9ED54} )) data:(just value:(raw@^Cell x{} x{0000000D} )) library:hme_empty)))) x{CFF8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D2068086C000000000000000451C90E00DC0E35B7DB5FB8C134_} x{FF0020DDA4F260D31F01ED44D0D31FD166BAF2A1F80001D307D4D1821804A817C80073FB0201FB00A4C8CB1FC9ED54} x{0000000D}</code> -client.cppï¼š <code class="plaintext hljs">[ 3][t 2][1558746708.815218925][test-lite-client.cpp:631][!testnode] requesting account state for -1:8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D [ 3][t 2][1558746708.858564138][test-lite-client.cpp:652][!testnode] got account state for -1:8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D with respect to blocks (-1,8000000000000000,72355):F566005749C1B97F18EDE013EBA7A054B9014961BC1AD91F475B9082919A2296:1BD5DE54333164025EE39D389ECE2E93DA2871DA616D488253953E52B50DC03F and (-1,8000000000000000,72355):F566005749C1B97F18EDE013EBA7A054B9014961BC1AD91F475B9082919A2296:1BD5DE54333164025EE39D389ECE2E93DA2871DA616D488253953E52B50DC03F account state is (account addr:(addr_std anycast:nothing workchain_id:-1 address:x8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D) storage_stat:(storage_info used:(storage_used cells:(var_uint len:1 value:3) bits:(var_uint len:2 value:539) public_cells:(var_uint len:0 value:0)) last_paid:0 due_payment:nothing) storage:(account_storage last_trans_lt:74208000003 balance:(currencies grams:(nanograms amount:(var_uint len:7 value:999928362430000)) other:(extra_currencies dict:hme_empty)) state:(account_active ( split_depth:nothing special:nothing code:(just value:(raw@^Cell x{} x{FF0020DDA4F260D31F01ED44D0D31FD166BAF2A1F80001D307D4D1821804A817C80073FB0201FB00A4C8CB1FC9ED54} )) data:(just value:(raw@^Cell x{} x{0000000D} )) library:hme_empty)))) x{CFF8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D2068086C000000000000000451C90E00DC0E35B7DB5FB8C134_} x{FF0020DDA4F260D31F01ED44D0D31FD166BAF2A1F80001D307D4D1821804A817C80073FB0201FB00A4C8CB1FC9ED54} x{0000000D}</code>ä¸º-1ï¼š8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0Dç›¸å¯¹äºå—ï¼ˆ-1,8000000000000000,72355ï¼‰ï¼šF566005749C1B97F18EDE013EBA7A054B9014961BC1AD91F475B9082919A2296ï¼š1BD5DE54333164025EE39D389ECE2E93DA2871DA616D488253953E52B50DC03Få’Œ <code class="plaintext hljs">[ 3][t 2][1558746708.815218925][test-lite-client.cpp:631][!testnode] requesting account state for -1:8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D [ 3][t 2][1558746708.858564138][test-lite-client.cpp:652][!testnode] got account state for -1:8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D with respect to blocks (-1,8000000000000000,72355):F566005749C1B97F18EDE013EBA7A054B9014961BC1AD91F475B9082919A2296:1BD5DE54333164025EE39D389ECE2E93DA2871DA616D488253953E52B50DC03F and (-1,8000000000000000,72355):F566005749C1B97F18EDE013EBA7A054B9014961BC1AD91F475B9082919A2296:1BD5DE54333164025EE39D389ECE2E93DA2871DA616D488253953E52B50DC03F account state is (account addr:(addr_std anycast:nothing workchain_id:-1 address:x8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D) storage_stat:(storage_info used:(storage_used cells:(var_uint len:1 value:3) bits:(var_uint len:2 value:539) public_cells:(var_uint len:0 value:0)) last_paid:0 due_payment:nothing) storage:(account_storage last_trans_lt:74208000003 balance:(currencies grams:(nanograms amount:(var_uint len:7 value:999928362430000)) other:(extra_currencies dict:hme_empty)) state:(account_active ( split_depth:nothing special:nothing code:(just value:(raw@^Cell x{} x{FF0020DDA4F260D31F01ED44D0D31FD166BAF2A1F80001D307D4D1821804A817C80073FB0201FB00A4C8CB1FC9ED54} )) data:(just value:(raw@^Cell x{} x{0000000D} )) library:hme_empty)))) x{CFF8156775B79325E5D62E742D9B96C30B6515A5CD2F1F64C5DA4B193C03F070E0D2068086C000000000000000451C90E00DC0E35B7DB5FB8C134_} x{FF0020DDA4F260D31F01ED44D0D31FD166BAF2A1F80001D307D4D1821804A817C80073FB0201FB00A4C8CB1FC9ED54} x{0000000D}</code> </pre> <br><p> æˆ‘ä»¬çœ‹åˆ°äº†å­˜å‚¨åœ¨æŒ‡å®šå·¥ä½œé“¾çš„DHTä¸­çš„ç»“æ„ã€‚ ä¾‹å¦‚ï¼Œåœ¨<code>storage.balance</code>å­—æ®µä¸­æ˜¯å½“å‰å¸æˆ·ä½™é¢ï¼Œåœ¨<code>storage.state.code</code>æ˜¯æ™ºèƒ½åˆçº¦ä»£ç ï¼Œåœ¨<code>storage.state.data</code>æ˜¯å½“å‰æ•°æ®ã€‚ è¯·æ³¨æ„ï¼ŒTONæ•°æ®å­˜å‚¨åŒº-å•å…ƒæ ¼ï¼Œå•å…ƒæ ¼-æ˜¯ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªå•å…ƒæ ¼å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ•°æ®ä»¥åŠå­å•å…ƒæ ¼ã€‚ è¿™åœ¨æœ€åå‡ è¡Œä¸­æ˜¾ç¤ºä¸ºç¼©è¿›ã€‚ </p><br><h3 id="sborka-smart-kontrakta"> æ™ºèƒ½åˆçº¦ç»„è£… </h3><br><p> ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨Fiftè¯­è¨€è‡ªå·±åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„ç»“æ„ï¼ˆç§°ä¸ºBOC- <em>cell of bag</em> ï¼‰ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæ‚¨ä¸å¿…è‡ªå·±ç¼–å†™æ™ºèƒ½åˆçº¦-æºå½’æ¡£æ–‡ä»¶ä¸­çš„<code>crypto/block</code>æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ª<code>new-wallet.fif</code>æ–‡ä»¶ï¼Œå¯å¸®åŠ©æˆ‘ä»¬åˆ›å»ºæ–°çš„é’±åŒ…ã€‚ å°†å…¶å¤åˆ¶åˆ°å…·æœ‰ç»„è£…å¥½çš„å®¢æˆ·ç«¯çš„æ–‡ä»¶å¤¹ä¸­ï¼ˆå¦‚æœ<code>~/liteclient-build</code>è¯´æ˜ï¼Œåˆ™ä¸º<code>~/liteclient-build</code> ï¼‰ã€‚ æˆ‘åœ¨ä¸Šé¢å¼•ç”¨äº†å…¶å†…å®¹ä½œä¸ºFiftä¸Šçš„ä»£ç ç¤ºä¾‹ã€‚ </p><br><p> æˆ‘ä»¬æŒ‰ä»¥ä¸‹æ–¹å¼æ‰§è¡Œæ­¤æ–‡ä»¶ï¼š </p><br><pre> <code class="plaintext hljs">./crypto/fift -I"&lt;source-directory&gt;/crypto/fift" new-wallet.fif</code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œ <code>&lt;source-directory&gt;</code>å¿…é¡»æ›¿æ¢ä¸ºå·²è§£å‹ç¼©çš„æºçš„è·¯å¾„ï¼ˆä¸å¹¸çš„æ˜¯ï¼Œæ‚¨éœ€è¦å®Œæ•´çš„è·¯å¾„ï¼Œæ­¤å¤„ä¸èƒ½ä½¿ç”¨ç¬¦å·â€œã€œâ€ï¼‰ã€‚ æ‚¨å¯ä»¥å®šä¹‰<code>FIFTPATH</code>ç¯å¢ƒ<code>FIFTPATH</code>å¹¶å°†æ­¤è·¯å¾„æ”¾å…¥å…¶ä¸­ï¼Œ <code>FIFTPATH</code>ä½¿ç”¨<code>-I</code> ã€‚ </p><br><p> è‡ªä»æˆ‘ä»¬ä»¥æ–‡ä»¶å<code>new-wallet.fif</code>å¯åŠ¨Fiftä»¥æ¥ï¼Œå®ƒå°†æ‰§è¡Œå¹¶å®Œæˆã€‚ å¦‚æœçœç•¥æ–‡ä»¶åï¼Œåˆ™å¯ä»¥åœ¨äº¤äº’æ¨¡å¼ä¸‹ä½¿ç”¨è§£é‡Šå™¨ã€‚ </p><br><p> æ‰§è¡Œåï¼Œåº”åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">StateInit: x{34_} x{FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54} x{0000000055375F730EDC2292E8CB15C42E8036EE9C25AA958EE002D2DE48A205E3A3426B} new wallet address = -1 : 4fcd520b8fcca096b567d734be3528edc6bed005f6930a9ec9ac1aa714f211f2 0f9PzVILj8yglrVn1zS-NSjtxr7QBfaTCp7JrBqnFPIR8nhZ signing message: x{00000000} External message for initialization is x{89FEE120E20C7E953E31546F64C23CD654002C1AA919ADD24DB12DDF85C6F3B58AE41198A28AD8DAF3B9588E7A629252BA3DB88F030D00BC1016110B2073359EAC3C13823C53245B65D056F2C070B940CDA09789585935C7ABA4D2AD4BED139281CFA1200000001_} x{FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54} x{0000000055375F730EDC2292E8CB15C42E8036EE9C25AA958EE002D2DE48A205E3A3426B} B5EE9C724104030100000000D60002CF89FEE120E20C7E953E31546F64C23CD654002C1AA919ADD24DB12DDF85C6F3B58AE41198A28AD8DAF3B9588E7A629252BA3DB88F030D00BC1016110B2073359EAC3C13823C53245B65D056F2C070B940CDA09789585935C7ABA4D2AD4BED139281CFA1200000001001020084FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED5400480000000055375F730EDC2292E8CB15C42E8036EE9C25AA958EE002D2DE48A205E3A3426B6290698B (Saved to file new-wallet-query.boc)</code> } <code class="plaintext hljs">StateInit: x{34_} x{FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54} x{0000000055375F730EDC2292E8CB15C42E8036EE9C25AA958EE002D2DE48A205E3A3426B} new wallet address = -1 : 4fcd520b8fcca096b567d734be3528edc6bed005f6930a9ec9ac1aa714f211f2 0f9PzVILj8yglrVn1zS-NSjtxr7QBfaTCp7JrBqnFPIR8nhZ signing message: x{00000000} External message for initialization is x{89FEE120E20C7E953E31546F64C23CD654002C1AA919ADD24DB12DDF85C6F3B58AE41198A28AD8DAF3B9588E7A629252BA3DB88F030D00BC1016110B2073359EAC3C13823C53245B65D056F2C070B940CDA09789585935C7ABA4D2AD4BED139281CFA1200000001_} x{FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54} x{0000000055375F730EDC2292E8CB15C42E8036EE9C25AA958EE002D2DE48A205E3A3426B} B5EE9C724104030100000000D60002CF89FEE120E20C7E953E31546F64C23CD654002C1AA919ADD24DB12DDF85C6F3B58AE41198A28AD8DAF3B9588E7A629252BA3DB88F030D00BC1016110B2073359EAC3C13823C53245B65D056F2C070B940CDA09789585935C7ABA4D2AD4BED139281CFA1200000001001020084FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED5400480000000055375F730EDC2292E8CB15C42E8036EE9C25AA958EE002D2DE48A205E3A3426B6290698B (Saved to file new-wallet-query.boc)</code> </pre> <br><p> è¿™æ„å‘³ç€æ ‡è¯†ç¬¦ä¸º<code>-1:4fcd520b8fcca096b567d734be3528edc6bed005f6930a9ec9ac1aa714f211f2</code>çš„é’±åŒ…<code>-1:4fcd520b8fcca096b567d734be3528edc6bed005f6930a9ec9ac1aa714f211f2</code> ï¼ˆæˆ–è€…å°±æ˜¯<code>0f9PzVILj8yglrVn1zS-NSjtxr7QBfaTCp7JrBqnFPIR8nhZ</code>åˆ›å»º<code>0f9PzVILj8yglrVn1zS-NSjtxr7QBfaTCp7JrBqnFPIR8nhZ</code> ã€‚ ä¸ä¹‹å¯¹åº”çš„ä»£ç å°†<code>new-wallet-query.boc</code>åœ¨<code>new-wallet-query.boc</code> ï¼Œå…¶åœ°å€å‡ºç°åœ¨<code>new-wallet.addr</code> ï¼Œç§é’¥å‡ºç°åœ¨<code>new-wallet.pk</code> ï¼ˆè¯·æ³¨æ„-é‡æ–°å¯åŠ¨è„šæœ¬å°†è¦†ç›–è¿™äº›æ–‡ä»¶ï¼‰ã€‚ </p><br><p> å½“ç„¶ï¼ŒTONç½‘ç»œå°šä¸çŸ¥é“æ­¤é’±åŒ…ï¼Œå®ƒä»…ä»¥è¿™äº›æ–‡ä»¶çš„å½¢å¼å­˜å‚¨ã€‚ ç°åœ¨ï¼Œæ‚¨éœ€è¦å°†å…¶ä¸Šä¼ åˆ°ç½‘ç»œã€‚ æ²¡é”™ï¼Œé—®é¢˜æ˜¯è¦åˆ›å»ºæ™ºèƒ½åˆçº¦ï¼Œæ‚¨éœ€è¦æ”¯ä»˜ä½£é‡‘ï¼Œè€Œå¸æˆ·ä½™é¢ä»ä¸ºé›¶ã€‚ </p><br><p> åœ¨å·¥ä½œæ¨¡å¼ä¸‹ï¼Œæ­¤é—®é¢˜å°†é€šè¿‡åœ¨äº¤æ˜“æ‰€è´­ä¹°å…‹ï¼ˆæˆ–é€šè¿‡ä»å…¶ä»–é’±åŒ…è¿›è¡Œè½¬è´¦ï¼‰æ¥è§£å†³ã€‚ å¥½å§ï¼Œåœ¨å½“å‰çš„æµ‹è¯•æ¨¡å¼ä¸‹ï¼Œå·²ç»å»ºç«‹äº†ä¸€ç§ç‰¹æ®Šçš„æ™ºèƒ½åˆçº¦ï¼Œæ‚¨å¯ä»¥ä»ä¸­ç´¢å–æœ€å¤š20å…‹çš„é‡é‡ã€‚ </p><br><h3 id="formirovanie-zaprosa-k-chuzhomu-smart-kontraktu"> å½¢æˆå¯¹ä»–äººæ™ºèƒ½åˆçº¦çš„è¯·æ±‚ </h3><br><p> è¦æ±‚ä¸€ä»½æ™ºèƒ½åˆçº¦ï¼Œå·¦å³åˆ†é…å…‹ï¼Œè¿™æ ·åšã€‚ åœ¨ç›¸åŒçš„<code>crypto/block</code>æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°æ–‡ä»¶<code>testgiver.fif</code> ï¼š </p><br><pre> <code class="plaintext hljs">// "testgiver.addr" file&gt;B 256 B&gt;u@ 0x8156775b79325e5d62e742d9b96c30b6515a5cd2f1f64c5da4b193c03f070e0d dup constant wallet_addr ."Test giver address = " x. cr 0x4fcd520b8fcca096b567d734be3528edc6bed005f6930a9ec9ac1aa714f211f2 constant dest_addr -1 constant wc 0x00000011 constant seqno 1000000000 constant Gram { Gram swap */ } : Gram*/ 6.666 Gram*/ constant amount // bx --&gt; b' ( serializes a Gram amount ) { -1 { 1+ 2dup 8 * ufits } until rot over 4 u, -rot 8 * u, } : Gram, // create a message (NB: 01b00.., b = bounce) &lt;bb{010000100} s, wc 8 i, dest_addr 256 u, amount Gram, 0 9 64 32 + + 1+ 1+ u, "GIFT" $, b&gt; &lt;b seqno 32 u, 1 8 u, swap ref, b&gt; dup ."enveloping message: " &lt;s csr. cr &lt;bb{1000100} s, wc 8 i, wallet_addr 256 u, 0 Gram, b{00} s, swap &lt;ss, b&gt; dup ."resulting external message: " &lt;s csr. cr 2 boc+&gt;B dup Bx. cr "wallet-query.boc" B&gt;file</code> </pre> <br><p> æˆ‘ä»¬è¿˜å°†å…¶ä¿å­˜åœ¨ä¸å·²ç»„è£…çš„å®¢æˆ·ç«¯ä¸€èµ·çš„æ–‡ä»¶å¤¹ä¸­ï¼Œä½†ä¿®å¤äº†ç¬¬äº”è¡Œ-åœ¨â€œ <code>constant dest_addr</code> â€è¡Œä¹‹å‰ã€‚ å°†å…¶æ›¿æ¢ä¸ºä¹‹å‰åˆ›å»ºçš„é’±åŒ…åœ°å€ï¼ˆå®Œæ•´ï¼Œä¸ç¼©å†™ï¼‰ã€‚  â€œ -1ï¼šâ€ä¸éœ€è¦åœ¨å¼€å¤´å†™ï¼Œè€Œæ˜¯åœ¨å¼€å¤´å†™â€œ 0xâ€ã€‚ </p><br><p> æ‚¨è¿˜å¯ä»¥æ›´æ”¹è¡Œ<code>6.666 Gram*/ constant amount</code> -è¿™æ˜¯æ‚¨è¦æ±‚çš„å…‹é‡ï¼ˆä¸è¶…è¿‡20ï¼‰ã€‚ å³ä½¿æ‚¨æŒ‡å®šæ•´æ•°ï¼Œä¹Ÿè¦ä¿ç•™å°æ•°ç‚¹ã€‚ </p><br><p> æœ€åï¼Œæ‚¨éœ€è¦æ›´æ­£è¡Œ<code>0x00000011 constant seqno</code> ã€‚ è¿™é‡Œçš„ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯å½“å‰çš„åºåˆ—å·ï¼Œè¯¥åºåˆ—å·å­˜å‚¨åœ¨å‘å‡ºå…‹çš„å¸æˆ·ä¸­ã€‚ ä»å“ªé‡Œå¾—åˆ°çš„ï¼Ÿ å¦‚ä¸Šæ‰€è¿°ï¼Œå¯åŠ¨å®¢æˆ·ç«¯å¹¶è¿è¡Œï¼š </p><br><pre> <code class="plaintext hljs">last getaccount -1:8156775b79325e5d62e742d9b96c30b6515a5cd2f1f64c5da4b193c03f070e0d</code> </pre> <br><p> æœ€ç»ˆï¼Œæ™ºèƒ½åˆçº¦çš„æ•°æ®å°†æ˜¯ </p><br><pre> <code class="plaintext hljs">... x{FF0020DDA4F260D31F01ED44D0D31FD166BAF2A1F80001D307D4D1821804A817C80073FB0201FB00A4C8CB1FC9ED54} x{0000000D}</code> </pre> <br><p> æ•°å­—0000000Dï¼ˆæ‚¨å°†æ‹¥æœ‰æ›´å¤šï¼‰æ˜¯åºåˆ—å·ï¼Œå¿…é¡»åœ¨<code>testgiver.fif</code>ä¸­<code>testgiver.fif</code> ã€‚ </p><br><p> å°±è¿™æ ·ï¼Œä¿å­˜æ–‡ä»¶å¹¶è¿è¡Œï¼ˆ <code>./crypto/fift testgiver.fif</code> ï¼‰ã€‚ è¾“å‡ºå°†æ˜¯<code>wallet-query.boc</code> ã€‚ è¿™æ˜¯ç»™åˆ«äººçš„æ™ºèƒ½åˆçº¦çš„æ ¼å¼<em>æ¶ˆæ¯</em> -è¯·æ±‚æ˜¯â€œå°†å¦‚æ­¤å¤šçš„å…‹è½¬å…¥è¿™æ ·çš„è´¦æˆ·â€ã€‚ </p><br><p> ä½¿ç”¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å°†å…¶ä¸Šä¼ åˆ°ç½‘ç»œï¼š </p><br><pre> <code class="plaintext hljs">&gt; sendfile wallet-query.boc [ 1][t 1][1558747399.456575155][test-lite-client.cpp:577][!testnode] sending query from file wallet-query.boc [ 3][t 2][1558747399.500236034][test-lite-client.cpp:587][!query] external message status is 1</code> </pre> <br><p> å¦‚æœç°åœ¨æˆ‘ä»¬å‘¼å«<code>last</code> ï¼Œç„¶åå†æ¬¡è¯·æ±‚æˆ‘ä»¬è¦å…‹çš„å¸æˆ·çš„çŠ¶æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥çœ‹åˆ°å…¶åºåˆ—å·å¢åŠ äº†ä¸€ä¸ª-è¿™æ„å‘³ç€å®ƒå‘æˆ‘ä»¬çš„å¸æˆ·æ±‡äº†æ¬¾ã€‚ </p><br><p> æœ€åä¸€æ­¥ä»ç„¶æ˜¯-æˆ‘ä»¬åŠ è½½é’±åŒ…çš„ä»£ç ï¼ˆå…¶ä½™é¢å·²è¢«è¡¥å……ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ™ºèƒ½åˆçº¦ä»£ç ï¼Œæˆ‘ä»¬å°†æ— æ³•å¯¹å…¶è¿›è¡Œç®¡ç†ï¼‰ã€‚  <code>sendfile new-wallet-query.boc</code>å°±æ˜¯è¿™æ ·ï¼Œæ‚¨åœ¨TONç½‘ç»œä¸­æ‹¥æœ‰è‡ªå·±çš„é’±åŒ…ï¼ˆå°½ç®¡ç›®å‰åªæœ‰ä¸€ä¸ªæµ‹è¯•ï¼‰ã€‚ </p><br><h3 id="sozdanie-ishodyaschih-tranzakciy"> åˆ›å»ºå¤–å‘äº¤æ˜“ </h3><br><p> è¦ä»å·²åˆ›å»ºå¸æˆ·çš„ä½™é¢ä¸­è½¬ç§»èµ„é‡‘ï¼Œæœ‰ä¸€ä¸ª<code>crypto/block/wallet.fif</code> ï¼Œè¯¥<code>crypto/block/wallet.fif</code>ä¹Ÿéœ€è¦ä¸æ”¶é›†åˆ°çš„å®¢æˆ·ä¸€èµ·æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­ã€‚ </p><br><p> ä¸å‰é¢çš„æ­¥éª¤ç±»ä¼¼ï¼Œæ‚¨éœ€è¦æ›´æ­£è½¬è´¦é‡‘é¢ï¼Œæ”¶ä»¶äººçš„åœ°å€ï¼ˆdest_addrï¼‰å’Œé’±åŒ…çš„seqnoï¼ˆåˆå§‹åŒ–é’±åŒ…åä¸º1ï¼Œåœ¨æ¯æ¬¡ä»˜æ¬¾äº¤æ˜“åå¢åŠ 1-æ‚¨å¯ä»¥é€šè¿‡è¯·æ±‚å¸æˆ·çŠ¶æ€æ¥æŸ¥çœ‹å®ƒï¼‰ ã€‚ å¯¹äºæµ‹è¯•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æˆ‘çš„é’±åŒ…<code>0x4fcd520b8fcca096b567d734be3528edc6bed005f6930a9ec9ac1aa714f211f2</code> ã€‚ </p><br><p> å½“æ‚¨è¿è¡Œï¼ˆ <code>./crypto/fift wallet.fif</code> ï¼‰æ—¶ï¼Œè„šæœ¬å°†ä»æ–‡ä»¶<code>new-wallet.addr</code>å’Œ<code>new-wallet.pk</code>ä¸­è·å–æ‚¨çš„é’±åŒ…åœ°å€ï¼ˆä»ä¸­è¿›è¡Œè½¬ç§»ï¼‰å’Œå…¶ç§é’¥ï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯å†™å…¥<code>new-wallet-query.boc</code> ã€‚ </p><br><p> å’Œä»¥å‰ä¸€æ ·ï¼Œè¦ç›´æ¥æ‰§è¡Œäº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ä¸­è°ƒç”¨<code>sendfile new-wallet-query.boc</code> ã€‚ ä¹‹åï¼Œä¸è¦å¿˜è®°æ›´æ–°åŒºå—é“¾çš„çŠ¶æ€ï¼ˆ <code>last</code> ï¼‰ï¼Œå¹¶æ£€æŸ¥æˆ‘ä»¬é’±åŒ…çš„ä½™é¢å’Œseqnoæ˜¯å¦å·²æ›´æ”¹ï¼ˆ <code>getaccount &lt;account_id&gt;</code> ï¼‰ã€‚ </p><br><p><img src="https://habrastorage.org/webt/fp/d1/is/fpd1is8dlh4_iz9rdbakflyeq5s.png" alt="å¸æˆ·è¯´æ˜"></p><br><p> å°±æ˜¯è¿™æ ·ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨TONä¸­åˆ›å»ºæ™ºèƒ½åˆçº¦å¹¶å°†è¯·æ±‚å‘é€ç»™ä»–ä»¬ã€‚ å¦‚æ‚¨æ‰€è§ï¼Œå½“å‰åŠŸèƒ½å·²ç»è¶³å¤Ÿï¼Œä¾‹å¦‚ï¼Œé€šè¿‡å›¾å½¢ç•Œé¢åˆ¶ä½œä¸€ä¸ªæ›´å‹å¥½çš„é’±åŒ…ï¼ˆä½†æ˜¯ï¼Œé¢„è®¡å®ƒå°†ä½œä¸ºMessengerçš„ä¸€éƒ¨åˆ†æä¾›ï¼‰ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN453714/">https://habr.com/ru/post/zh-CN453714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN453700/index.html">æœ‰å…³SDL 2çš„è¯¾ç¨‹ï¼šç¬¬1è¯¾-æ‚¨å¥½ï¼ŒSDL 2</a></li>
<li><a href="../zh-CN453706/index.html">æˆ‘å¦‚ä½•é€šè¿‡Google Cloud Professionalæ•°æ®å·¥ç¨‹å¸ˆè®¤è¯è€ƒè¯•</a></li>
<li><a href="../zh-CN453708/index.html">åœ¨BASCOM AVRç¯å¢ƒä¸­ç”¨äºMK AVRçš„AQUA RTOSå®æ—¶æ“ä½œç³»ç»Ÿ</a></li>
<li><a href="../zh-CN453710/index.html">å¤§å‹é¡¹ç›®çš„å¼€å‘å®è·µï¼šmitp SberPractice iOSï¼ƒ1</a></li>
<li><a href="../zh-CN453712/index.html">eBayå¦‚ä½•åœ¨WebAssemblyä¸Šè¿›è¡Œæ¡å½¢ç æ‰«æä»ª</a></li>
<li><a href="../zh-CN453716/index.html">å®¶åº­ITäººå‘˜çš„å›½å®¶/åœ°åŒºåˆä½œ-æœ‰äººå—ï¼Ÿ</a></li>
<li><a href="../zh-CN453720/index.html">Cï¼ƒä¸­Lambdaè¡¨è¾¾å¼çš„ç²¾å¦™ä¹‹å¤„</a></li>
<li><a href="../zh-CN453722/index.html">å…³äºéå¹³ç¨³è¿‡ç¨‹çš„ç ”ç©¶</a></li>
<li><a href="../zh-CN453728/index.html">å·¨æ˜Ÿä¹‹æˆ˜</a></li>
<li><a href="../zh-CN453730/index.html">ç°ä»£ç‰™ç§‘ï¼šé€šè¿‡æŠ€æœ¯æ€»ç›‘çš„çœ¼ç›åŒæ—¶è¿›è¡Œç‰™é½¿æ¤å…¥å’Œé¢Œéª¨å»¶ä¼¸</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>