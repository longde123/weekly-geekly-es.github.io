<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî´ üëáüèª üíáüèº Gemeinsame Komponenten von verschiedenen Teams. Yandex-Bericht üë®üèº‚Äçüåæ üï≥Ô∏è üëâüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Erstellen und Verwalten gemeinsamer Komponenten ist ein Prozess, an dem viele Teams beteiligt sein m√ºssen. Der Leiter des Shared Components Servic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gemeinsame Komponenten von verschiedenen Teams. Yandex-Bericht</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/460811/"> Das Erstellen und Verwalten gemeinsamer Komponenten ist ein Prozess, an dem viele Teams beteiligt sein m√ºssen.  Der Leiter des Shared Components Service von Yandex Vladimir Grinenko <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Tadatuta</a> erkl√§rte, wie ihre Entwicklung das engagierte Lego-Team <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">√ºbertroffen</a> hat, wie wir mit Lerna ein auf GitHub basierendes Mono-Repository erstellt und kanarische Releases mit der Implementierung von Services direkt in CI eingerichtet haben, was ben√∂tigt wurde und was noch zu sein. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/zv/o-/0b/zvo-0b7pajia8d3pnm4rbpm72hw.jpeg"></a> <br><br>  "Freut mich, euch alle willkommen zu hei√üen."  Mein Name ist Vladimir, ich mache √ºbliche Dinge in Yandex-Schnittstellen.  Ich m√∂chte √ºber sie sprechen.  Wenn Sie unsere Dienste nicht sehr intensiv nutzen, haben Sie wahrscheinlich eine Frage: Was setzen wir alle?  Was gibt es zu setzen? <br><br><a name="habracut"></a><img src="https://habrastorage.org/webt/o3/ip/sx/o3ipsxj2wxuhbnfeq23rfk0ucuc.jpeg"><br><br><img src="https://habrastorage.org/webt/wq/kx/y0/wqkxy0_ta9qyzi3vnbryhxqpwy4.jpeg"><br><br>  In den Suchergebnissen befindet sich eine Liste mit Antworten. Manchmal befindet sich rechts eine Spalte.  Jeder von euch wird wahrscheinlich an einem Tag fertig werden.  Wenn Sie sich daran erinnern, dass es verschiedene Browser usw. gibt, f√ºgen wir einen weiteren Tag hinzu, um Fehler zu beheben, und dann wird jeder damit fertig. <br><br><img src="https://habrastorage.org/webt/gc/f5/i8/gcf5i8mqymopdqairky09odo00k.jpeg"><br><br>  Jemand wird sich daran erinnern, dass es noch eine solche Schnittstelle gibt.  Unter Ber√ºcksichtigung all der kleinen Dinge, die Sie ihm noch eine Woche geben k√∂nnen, k√∂nnen Sie es versuchen.  Und Dima hat uns gerade gesagt, dass es so viele von uns gibt, dass wir unsere eigene Schule brauchen.  Und all diese Leute machen die ganze Zeit Seiten.  Stellen Sie sich vor, sie kommen jeden Tag zur Arbeit und setzen sich?  Klar ist da noch etwas anderes. <br><br><img src="https://habrastorage.org/webt/iv/3d/et/iv3detsvcvujieb_-ho8nqmvvuu.jpeg"><br><br>  In der Tat sind die Dienstleistungen in Yandex in der Tat mehr.  Und es gibt noch ein bisschen mehr als auf dieser Folie.  Hinter jedem solchen Link befindet sich eine Reihe verschiedener Schnittstellen mit gro√üer Variabilit√§t.  Sie sind f√ºr verschiedene Ger√§te in verschiedenen Sprachen.  Sie arbeiten manchmal sogar in Autos und anderen verschiedenen seltsamen Dingen. <br><br><img src="https://habrastorage.org/webt/0w/mz/98/0wmz98pcjwflkkhflu4i_vwgtjo.jpeg"><br><br>  Yandex ist heute nicht nur das Internet, nicht nur verschiedene Waren mit Lagern, Lieferung und all dem.  Autos gelb fahren.  Und nicht nur was man essen kann und nicht nur Eisenst√ºcke.  Und nicht nur alle Arten von automatischen Intelligenzen.  All dies wird jedoch durch die Tatsache vereint, dass f√ºr jedes Element Schnittstellen ben√∂tigt werden.  Oft - sehr reich.  Yandex ist Hunderte von verschiedenen gro√üen Dienstleistungen.  Wir schaffen jeden Tag etwas Neues.  Wir haben Tausende von Mitarbeitern, darunter Hunderte von Front-End-Entwicklern und Schnittstellenentwicklern.  Diese Leute arbeiten in verschiedenen B√ºros, leben in verschiedenen Zeitzonen, st√§ndig kommen neue Leute zur Arbeit. <br><br>  Gleichzeitig versuchen wir, soweit wir genug Kraft haben, es eint√∂nig und einheitlich f√ºr die Benutzer zu machen. <br><br><img src="https://habrastorage.org/webt/dz/vn/uz/dzvnuzxrodwkt2oi0tbemkn4lne.gif"><br><br>  Dies ist die Suche nach Dokumenten im Internet.  Wenn wir jedoch zur Ausgabe von Bildern wechseln, stimmt der Header √ºberein, obwohl dies ein separates Repository ist, das in einem v√∂llig separaten Team arbeitet, m√∂glicherweise sogar bei anderen Technologien.  Es scheint, dass es kompliziert ist?  Nun, sie haben zweimal einen Hut erfunden, wie eine einfache Sache.  Jeder Knopf in der Kappe hat auch eine eigene, reichhaltige Innenwelt.  Einige Popups erscheinen hier, etwas kann auch dort geschoben werden.  All dies wird in verschiedene Sprachen √ºbersetzt und funktioniert auf verschiedenen Plattformen.  Und hier gehen wir zum Beispiel von den Bildern zum Video, und dies ist wieder ein neuer Dienst, ein anderes Team.  Wieder ein Repository.  Aber immer noch der gleiche Hut, obwohl es Unterschiede gibt.  Und das alles muss einheitlich bleiben. <br><br>  Was lohnt es sich, auf den Folien so umzuschalten, um sicherzustellen, dass auf dem Pixel nichts passiert ist?  Wir versuchen dies zu verhindern. <br><br><img src="https://habrastorage.org/webt/_u/9b/2r/_u9b2ralx_p1qvev6q_k1jsr7ys.jpeg"><br><br>  Um die Skalierung etwas besser darzustellen, habe ich einen Screenshot des Repositorys erstellt, in dem nur der Front-End-Code f√ºr neue Browser gespeichert ist - nur die Ausgabe von Dokumenten ohne Bilder und Videos.  Es gibt Zehntausende von Commits und fast 400 Mitwirkende.  Dies ist nur im Layout, nur ein Projekt.  Hier ist eine Liste der blauen Links, die Sie gewohnt sind zu sehen. <br><br>  Sergey Berezhnoy, mein Anf√ºhrer, liebt diese Geschichte sehr, da wir uns so sehr im Unternehmen versammelt haben, dass ich m√∂chte, dass unsere Interaktion wie in JavaScript zusammenarbeitet: Eins plus Eins ist mehr als zwei. <br><br><img src="https://habrastorage.org/webt/qq/kn/-q/qqkn-qr0bqavfyeum_ocif9gycs.jpeg"><br><br>  Und wir versuchen, aus der Interaktion alles herauszuholen, was wir k√∂nnen.  Das erste, was unter solchen Bedingungen in den Sinn kommt, ist die Wiederverwendung.  Hier beispielsweise ein Video-Snippet eines Dienstes in den Suchergebnissen f√ºr ein Video.  Dies ist eine Art Bild mit einer Signatur und einigen anderen Elementen. <br><br><img src="https://habrastorage.org/webt/j5/rj/pr/j5rjprkjwcplnephmm-dxciv1l4.jpeg"><br><br>  Wenn Sie weiter schauen, finden Sie hier die √ºbliche Ausstellung von Dokumenten.  Aber auch hier gibt es genau das gleiche Snippet. <br><br><img src="https://habrastorage.org/webt/cr/3k/t4/cr3kt4p_iys_uplw7yi7ltsntn4.jpeg"><br><br>  Oder nehmen wir an, es gibt einen separaten Yandex.Air-Service, der etwas weniger als vollst√§ndig aus √§hnlichen Snippets besteht. <br><br><img src="https://habrastorage.org/webt/qt/91/ii/qt91iipkwlqktjjqpnwhmfxapzs.jpeg"><br><br>  Oder sagen wir, das Video-Snippet im Notifier, das sich auf verschiedenen Seiten des Portals befindet. <br><br><img src="https://habrastorage.org/webt/az/w9/2i/azw92ih1mulgzijr1gdgbenx8k0.jpeg"><br><br>  Oder hier ist ein Video-Snippet, wenn Sie es zu Ihren Favoriten hinzuf√ºgen und es dann in Ihren Sammlungen ansehen. <br><br><img src="https://habrastorage.org/webt/ub/ge/yd/ubgeydeso0lwyy4t67ejiz7uh6w.jpeg"><br><br>  Klingt nach?  Offensichtlich scheint es.  Na und?  Wenn wir den Diensten wirklich erlauben, unsere fertigen Komponenten einfach in andere Portaldienste zu integrieren, wird dieser Dienst aufgrund der Tatsache, dass Benutzer mit ihren Daten auf verschiedenen Websites interagieren k√∂nnen, offensichtlich mehr Benutzer erhalten.  Es ist toll.  Davon profitieren auch die Nutzer.  Sie werden die gleichen Dinge gleicherma√üen sehen.  Sie werden sich wie gewohnt verhalten.  Das hei√üt, man muss nicht immer wieder raten, was der Designer hier vorhatte und wie man damit umgeht. <br><br>  Und schlie√ülich wird das Unternehmen dadurch offensichtliche Einsparungen erzielen.  Dar√ºber hinaus scheint es nur so zu sein - was gibt es, um eine Videovorschau und eine Art Signatur zu erstellen? Um dies einfach so zu erhalten, m√ºssen Sie viele verschiedene Experimente durchf√ºhren, verschiedene Hypothesen testen, Gr√∂√üen, Farben und Einr√ºckungen ausw√§hlen.  F√ºgen Sie m√∂glicherweise einige Elemente hinzu und entfernen Sie sie, da sie nicht geflogen sind.  Und was passiert ist, was wirklich funktioniert, ist das Ergebnis eines sehr langen Prozesses.  Und wenn jedes Mal an jedem neuen Ort, um es erneut zu tun, ist dies eine enorme Anstrengung. <br><br>  Stellen Sie sich jetzt vor.  Nehmen wir an, wir haben etwas, das gut funktioniert.  √úberall, √ºberall haben sie es implementiert, und dann haben sie ein neues Experiment durchgef√ºhrt und erkannt, was verbessert werden k√∂nnte.  Und wieder m√ºssen wir diese gesamte Implementierungskette wiederholen.  Teuer <br><br><img src="https://habrastorage.org/webt/ex/8c/1_/ex8c1_tlclflyej-krijb8m20fk.jpeg"><br><br>  Ok, es scheint offensichtlich, gut wiederzuverwenden.  Aber jetzt m√ºssen wir eine Reihe neuer Probleme l√∂sen.  Sie m√ºssen verstehen, wo Sie solchen neuen Code speichern k√∂nnen.  Einerseits scheint es logisch zu sein.  Hier haben wir ein Video-Snippet, es wird vom Videoteam erstellt, sie haben ein Repository mit ihrem Projekt.  Sollte wahrscheinlich dort platziert werden.  Aber wie kann man es dann an andere Repositories aller anderen Leute verteilen?  Und wenn andere Leute etwas Eigenes in dieses Snippet bringen wollen?  Wieder nicht klar. <br><br>  Es ist notwendig, es irgendwie zu versionieren.  Sie k√∂nnen nichts √§ndern, und so, voila, rollt pl√∂tzlich alles aus.  Es muss etwas getestet werden.  Dar√ºber hinaus haben wir dies beispielsweise im Dienst des Videos selbst getestet.  Aber was ist, wenn bei der Integration in einen anderen Dienst etwas kaputt geht?  Wieder nicht klar. <br><br>  Am Ende ist es irgendwie notwendig, irgendwie schnell genug die Lieferung an verschiedene Dienste sicherzustellen, denn es wird seltsam sein, wenn wir irgendwo die vorherige Version haben, irgendwo neu.  Der Benutzer scheint auf dasselbe zu klicken, und es gibt ein anderes Verhalten.  Und wir m√ºssen Entwicklern verschiedener Teams irgendwie die M√∂glichkeit bieten, √Ñnderungen an diesem gemeinsamen Code vorzunehmen.  Wir m√ºssen ihnen irgendwie beibringen, wie man alles benutzt.  Wir haben einen langen Weg vor uns, um die Wiederverwendung von Schnittstellen bequem zu gestalten. <br><br><img src="https://habrastorage.org/webt/gu/a8/en/gua8ensfq4qkfjd9hwgrf3dpeko.jpeg"><br><br>  Wir haben seit undenklichen Zeiten in SVN angefangen und es war lampenartig und praktisch: ein Daddy mit HTML, genau wie in Bootstrap.  Sie kopieren es zu sich selbst.  Neben Papa mit Stilen gibt es eine Art JS, der dann wusste, wie man einfach etwas zeigt / versteckt.  Und alle. <br><br><img src="https://habrastorage.org/webt/tg/xu/sx/tgxusxowszje9vwtdvxf4yy4_os.jpeg"><br><br>  Irgendwie sah die Liste der Komponenten so aus.  Hervorgehoben wird hier das f√ºr die Autorisierung zust√§ndige b-domeg.  Vielleicht erinnern Sie sich noch daran, dass es auf Yandex tats√§chlich ein solches Formular f√ºr Login und Passwort mit einem Dach gab.  Wir nannten das "Haus", obwohl es auf den Briefumschlag hinwies, weil sie normalerweise in die Post eingingen. <br><br>  Dann haben wir eine ganze Methodik entwickelt, um gemeinsame Schnittstellen unterst√ºtzen zu k√∂nnen. <br><br><img src="https://habrastorage.org/webt/tu/7h/08/tu7h08reemfp5mrp8rib5a3ib9q.jpeg"><br><br>  Die Bibliothek selbst innerhalb des Unternehmens hat eine eigene Website mit einer Suche und jeglicher Taxonomie erworben. <br><br><img src="https://habrastorage.org/webt/fv/pa/jn/fvpajnegfm13z-q1fzb1edglvn0.jpeg"><br><br>  Das Repository sieht jetzt so aus.  Sie sehen, auch fast 10 000 Commits und mehr als 100 Mitwirkende. <br><br><img src="https://habrastorage.org/webt/h2/9r/ur/h29ruri7jkqnzacvu9dedijcjgu.jpeg"><br><br>  Aber dies ist der Ordner des B-Hauses in der neuen Reinkarnation.  Jetzt sieht sie so aus.  In einem halben Bildschirm befinden sich bereits mehr eigene Ordner. <br><br><img src="https://habrastorage.org/webt/lu/u9/62/luu962u_j91qtinyg3gn-1-efwg.jpeg"><br><br>  Und so sieht die Seite heute aus. <br><br><img src="https://habrastorage.org/webt/xj/ko/g-/xjkog-2xy19nuayhuliti4urgoy.jpeg"><br><br>  Infolgedessen wird die gemeinsam genutzte Bibliothek in mehr als 360 Repositorys in Yandex verwendet.  Und es gibt verschiedene Implementierungen, einen Debug-Release-Zyklus usw. Es scheint, dass wir hier eine gemeinsame Bibliothek haben, die wir jetzt √ºberall verwenden k√∂nnen, und alles ist gro√üartig.  Das Problem der Einf√ºhrung allgemeiner Dinge √ºberall gel√∂st.  Nicht wirklich. <br><br><img src="https://habrastorage.org/webt/rj/e5/0_/rje50_8ba6axvribhiogqzzxer8.jpeg"><br><br>  Der Versuch, das Problem der Wiederverwendung zu l√∂sen, wenn Sie bereits vorgefertigten Code haben, ist zu sp√§t.  Dies bedeutet, dass von dem Moment an, in dem der Designer das Layout der Services gezeichnet, an die Services und insbesondere an das Team verteilt hat, das sich mit gemeinsamen Komponenten befasst, einige Zeit vergangen ist.  Zu diesem Zeitpunkt wird sich h√∂chstwahrscheinlich herausstellen, dass bei jedem einzelnen Dienst oder zumindest bei mehreren von ihnen dasselbe Schnittstellenelement ebenfalls erstellt wurde.  Sie haben sich irgendwie auf ihre eigene Weise vers√∂hnt. <br><br>  Und selbst wenn eine allgemeine L√∂sung sp√§ter in der gemeinsam genutzten Bibliothek angezeigt wird, stellt sich heraus, dass Sie jetzt alles, was Sie f√ºr jeden Dienst abgeschlossen haben, erneut implementieren m√ºssen.  Und das ist wieder ein Problem.  Es ist sehr schwer zu rechtfertigen.  Hier ist das Team.  Sie hat ihre eigenen Ziele, alles funktioniert schon gut.  Und wir sagen solche Dinge - schau, endlich haben wir ein gemeinsames kleines Ding, nimm es.  Aber das Team ist so - wir haben schon genug Arbeit.  Warum brauchen wir es?  Au√üerdem wird uns dort pl√∂tzlich etwas nicht mehr passen?  Wir wollen nicht. <br><br>  Das zweite gro√üe Problem ist in der Tat die Verbreitung von Informationen √ºber diese coolen neuen Komponenten.  Nur weil es so viele Entwickler gibt, sind sie mit ihren t√§glichen Aufgaben besch√§ftigt.  Und sie haben die M√∂glichkeit zu sitzen und zu studieren, was dort im Bereich des Gemeinsamen passiert, egal was es tats√§chlich bedeutet. <br><br>  Das gr√∂√üte Problem ist, dass es grunds√§tzlich unm√∂glich ist, die Probleme, die allen Diensten gemeinsam sind, mit einem einzigen engagierten Team zu l√∂sen.  Das hei√üt, wenn wir ein Team haben, das sich mit Video befasst und ein eigenes Snippet mit Video erstellt, ist es klar, dass wir ihnen zustimmen und dieses Snippet in einer zentralen Bibliothek erstellen werden.  Es gibt jedoch direkt Tausende solcher Beispiele f√ºr verschiedene Dienste.  Und hier reichen bestimmt keine H√§nde aus.  Daher ist die einzige L√∂sung, dass sich jeder st√§ndig mit allgemeinen Komponenten befassen sollte. <br><br><img src="https://habrastorage.org/webt/y7/ay/9p/y7ay9pqgaxomogw-xz4x7hdlgb4.jpeg"><br><br>  Und seltsamerweise m√ºssen Sie nicht mit Schnittstellenentwicklern, sondern mit Designern beginnen.  Sie verstehen das auch.  Wir haben mehrere gleichzeitige Versuche im Inneren, damit dieser Prozess konvergiert.  Designer machen Designsysteme.  Ich hoffe wirklich, dass es fr√ºher oder sp√§ter m√∂glich sein wird, sie auf ein einziges gemeinsames System zu reduzieren, das alle Bed√ºrfnisse ber√ºcksichtigt. <br><br><img src="https://habrastorage.org/webt/be/vd/yd/bevdyd-kpziztd5yxc6qp98xgqy.jpeg"><br><br>  Jetzt gibt es mehrere von ihnen.  √úberraschenderweise sind die Aufgaben dort genau die gleichen: den Entwicklungsprozess zu beschleunigen, das Problem der Konsistenz zu l√∂sen, das Rad nicht neu zu erfinden und die geleistete Arbeit nicht zu duplizieren. <br><br><img src="https://habrastorage.org/webt/0z/xd/ci/0zxdcimwdz-s1d8oaiu3dinhxce.jpeg"><br><br>  Eine M√∂glichkeit, das Problem der Informationskommunikation zu l√∂sen, besteht darin, Entwicklern die M√∂glichkeit zu geben, andere Teams kennenzulernen, einschlie√ülich eines Teams, das sich mit allgemeinen Schnittstellenkomponenten befasst.  Wir l√∂sen es auf dieser Seite durch die Tatsache, dass wir ein Bootcamp haben, das es einem Entwickler, wenn er auf Yandex erscheint, zun√§chst erm√∂glicht, acht Wochen lang zu verschiedenen Teams zu gehen, zu sehen, wie es funktioniert, und dann zu entscheiden, wo es funktionieren soll .  In dieser Zeit wird sich sein Horizont jedoch erheblich erweitern.  Er wird dahin gef√ºhrt, wo das ist. <br><br>  Wir haben √ºber gemeinsame Dinge gesprochen.  Lassen Sie uns nun sehen, wie alles dem Entwicklungsprozess n√§her kommt.  Nehmen wir an, wir haben eine gemeinsame Bibliothek namens Lego.  Und wir m√∂chten eine neue Funktion implementieren oder eine Art √úberarbeitung vornehmen.  Wir haben den Code korrigiert und die Version ver√∂ffentlicht. <br><br>  Wir m√ºssen diese Version in npm ver√∂ffentlichen und dann zum Repository eines Projekts gehen, in dem die Bibliothek verwendet wird, und diese Version implementieren.  H√∂chstwahrscheinlich wird dadurch eine Nummer in package.json behoben. Starten Sie die Assembly neu.  Vielleicht sogar die Paketsperre neu generieren, eine Pull-Anfrage erstellen und sehen, wie die Tests bestanden werden.  Und was werden wir sehen? <br><br><img src="https://habrastorage.org/webt/ri/ft/dz/riftdzizz3nhvcxu4ivi1gtnzxy.jpeg"><br><br>  H√∂chstwahrscheinlich werden wir sehen, dass ein Fehler aufgetreten ist.  Weil es sehr schwierig ist, alle Verwendungsm√∂glichkeiten der Komponente f√ºr verschiedene Dienste vorherzusagen.  Und wenn das passiert ist, was ist dann unser Ausweg?  Also stellten wir fest, dass es nicht zusammen passte.  Wir wiederholen weiter.  Wir kehren mit einer gemeinsam genutzten Bibliothek zum Repository zur√ºck, beheben den Fehler, ver√∂ffentlichen die neue Version, senden sie an npm, stellen sie bereit, f√ºhren die Tests aus und was ist das?  H√∂chstwahrscheinlich wird ein Fehler erneut auftreten. <br><br>  Und das ist immer noch gut, wenn wir es in einem Dienst implementieren und genau dort ist alles sofort kaputt gegangen.  Es war viel trauriger, als wir das alles in zehn verschiedenen Diensten implementiert haben.  Dort ist nichts kaputt gegangen.  Wir haben bereits einen Smoothie gebraut oder was auch immer gebraucht wird.  Zu diesem Zeitpunkt wird die Version im 11. Projekt oder im 25. Projekt eingef√ºhrt.  Und es gibt einen Fehler.  Wir kehren entlang der gesamten Kette zur√ºck, erstellen einen Patch und implementieren ihn in allen vorherigen 20 Diensten.  Dar√ºber hinaus kann dieser Patch in einem der vorherigen explodieren.  Gut und so weiter.  Viel Spa√ü <br><br>  Der einzige Ausweg scheint zu sein, dass Sie nur sehr schnell viel Code schreiben m√ºssen.  Wenn wir dann fr√ºher oder sp√§ter h√∂chstwahrscheinlich sehr, sehr schnell laufen, werden wir Zeit haben, eine Version f√ºr die Produktion bereitzustellen, in der es noch keinen Fehler gibt.  Aber dann erscheint eine neue Funktion und nichts wird uns retten. <br><br>  Okay.  Tats√§chlich kann das Schema wie folgt aussehen.  Automatisierung wird uns helfen.  Es geht im Allgemeinen um die ganze Geschichte.  Wir hatten die Idee, dass ein Repository mit einer gemeinsamen Bibliothek nach dem Mono-Repository-Schema erstellt werden kann.  Sie sind wahrscheinlich auf etwas gesto√üen, jetzt gibt es viele solcher Projekte, insbesondere Infrastrukturprojekte.  Alle Arten von Babel und solche Dinge leben wie Mono-Repositories, wenn sich viele verschiedene npm-Pakete darin befinden.  Sie k√∂nnen irgendwie miteinander verbunden sein.  Und sie werden zum Beispiel √ºber Lerna verwaltet, so dass es angesichts der Abh√§ngigkeiten bequem ist, all dies zu ver√∂ffentlichen. <br><br>  Genau nach diesem Schema ist es m√∂glich, ein Projekt zu organisieren, in dem alles Gemeinsame f√ºr das gesamte Unternehmen gespeichert ist.  M√∂glicherweise gibt es eine Bibliothek, die in einem separaten Team besch√§ftigt ist.  Und es kann auch Pakete geben, die jeder einzelne Service entwickelt, die er aber mit anderen teilen m√∂chte. <br><br><img src="https://habrastorage.org/webt/qb/tx/ck/qbtxckwz4xeknxszl3zkfftpkjo.jpeg"><br><br>  Dann sieht die Schaltung so aus.  Der Anfang ist nicht anders.  Auf die eine oder andere Weise m√ºssen wir √Ñnderungen am allgemeinen Code vornehmen.  Und dann wollen wir mit Hilfe der Automatisierung auf einen Schlag Tests nicht nur neben diesem Code ausf√ºhren, sondern sofort in all jenen Projekten, in denen dieser gemeinsame Code eingebettet ist.  Und sehen Sie ihr aggregiertes Ergebnis. <br><br>  Selbst wenn dort ein Fehler aufgetreten ist, haben wir es immer noch nicht geschafft, eine Version zu ver√∂ffentlichen, sie in keiner npm zu ver√∂ffentlichen, wir haben sie nicht speziell mit unseren H√§nden implementiert, wir haben nicht alle diese zus√§tzlichen Anstrengungen unternommen.  Wir haben einen Fehler gesehen, ihn sofort lokal behoben, erneut allgemeine Tests durchgef√ºhrt, und das ist alles in Produktion. <br><br><img src="https://habrastorage.org/webt/lo/8-/7d/lo8-7d5hg38lvxpsswq05l2vipm.jpeg"><br><br>  Wie sieht es in der Praxis aus?  Hier ist eine Pull-Anfrage mit einem Fix.  Hier k√∂nnen Sie sehen, dass die Automatisierung die erforderlichen Pr√ºfer dort aufgefordert hat, um zu √ºberpr√ºfen, ob im Code alles in Ordnung ist.  In der Tat kamen die Rezensenten und waren sich einig, dass alles in Ordnung war.  Und in diesem Moment schreibt der Entwickler einfach einen speziellen / kanarischen Befehl direkt in die Pull-Anfrage. <br><br>  Ein Roboter kommt und sagt - okay, ich habe eine Aufgabe f√ºr das n√§chste Wunder geschaffen.  Das Wunder ist, dass jetzt eine kanarische Version mit diesen √Ñnderungen ver√∂ffentlicht wurde, die automatisch in allen Repositorys implementiert wurde, in denen diese Komponente verwendet wird.  Dort wurden wie in diesem Repository Autotests gestartet.  Hier k√∂nnen Sie sehen, dass eine ganze Reihe von √úberpr√ºfungen gestartet wurden. <br><br>  Hinter jedem Test k√∂nnen weitere hundert verschiedene Tests stehen.  Es ist jedoch wichtig, dass wir zus√§tzlich zu den lokalen Tests, die wir separat in die Komponente schreiben k√∂nnen, auch Tests f√ºr jedes Projekt starten, in dem es implementiert wurde.  Dort wurden bereits Integrationstests gestartet: Wir √ºberpr√ºfen, ob diese Komponente in der Umgebung, in der sie f√ºr den Service konzipiert ist, normal funktioniert.  Dies garantiert uns bereits wirklich, dass wir nichts vergessen haben, wir haben niemandem etwas gebrochen.  Wenn hier alles in Ordnung ist, k√∂nnen wir wirklich sicher eine Version ver√∂ffentlichen.  Und wenn hier etwas schlecht ist, werden wir es hier beheben. <br><br>  Es scheint, dass dies uns helfen sollte.  Wenn Ihr Unternehmen √ºber etwas √Ñhnliches verf√ºgt, sehen Sie, dass es Teile gibt, die Sie m√∂glicherweise wiederverwenden k√∂nnten. Im Moment m√ºssen Sie sie jedoch neu anordnen, da keine Automatisierung vorhanden ist. Ich empfehle Ihnen, eine √§hnliche L√∂sung zu finden. <br><br><img src="https://habrastorage.org/webt/lu/vp/jp/luvpjp0a5tof1v56lwn7uq_nwiq.jpeg"><br><br>  Was haben wir bekommen?  Das allgemeine Monorepository, in dem Linters neu erstellt werden.  Das hei√üt, jeder schreibt den Code auf die gleiche Weise, er hat alle Arten von Tests.  Jedes Team kann kommen, seine Komponente einsetzen und sie mit JS-Komponententests testen, sie mit Screenshots abdecken usw. Alles ist bereits sofort einsatzbereit.  Die clevere Code√ºberpr√ºfung, die ich erw√§hnt habe.  Dank umfangreicher interner Tools ist es hier wirklich klug. <br><br>  Ist der Entwickler jetzt im Urlaub?  Es ist sinnlos, ihn in eine Pull-Anfrage zu rufen, das System wird dies ber√ºcksichtigen.  Ist der Entwickler krank?  Das System wird dies ebenfalls ber√ºcksichtigen.  Wenn beide Bedingungen nicht erf√ºllt sind und der Entwickler frei zu sein scheint, erh√§lt er eine Benachrichtigung von einem seiner Messenger seiner Wahl.  Und er ist so: Nein, jetzt bin ich mit etwas Dringendem oder bei einem Treffen besch√§ftigt.  Er kann dorthin kommen und einfach den Befehl / busy schreiben.  Das System wird automatisch verstehen, dass Sie den n√§chsten aus der Liste zuweisen m√ºssen. <br><br>  Der n√§chste Schritt besteht darin, dieselbe kanarische Version zu ver√∂ffentlichen.  Das hei√üt, bei jeder Code√§nderung m√ºssen wir ein Servicepaket freigeben, das wir f√ºr verschiedene Services √ºberpr√ºfen k√∂nnen.  Als N√§chstes m√ºssen wir Tests ausf√ºhren, wenn wir auf all diesen Diensten bereitstellen.  Und wenn alles zusammen kam - starten Sie die Releases. <br><br>  Wenn sich eine √Ñnderung auf eine statische Aufladung auswirkt, die aus dem CDN geladen werden soll, m√ºssen Sie sie automatisch separat ver√∂ffentlichen.     .    , ,  ,  ,  .     ,     , ,  changelog     - . <br><br>  ,       ,     ,        ,   .       ,   ,      . <br><br>   ,        .       . , ,  :          ,       ?  .         ,            .      .     , . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de460811/">https://habr.com/ru/post/de460811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de460799/index.html">Standard Browser API Zahlungsanforderung</a></li>
<li><a href="../de460801/index.html">27 fantastische VS Code-Tools f√ºr moderne JavaScript-Entwickler</a></li>
<li><a href="../de460803/index.html">Lesen f√ºr den Sommer: B√ºcher f√ºr Technikfreaks</a></li>
<li><a href="../de460805/index.html">So √ºbertragen Sie Daten zwischen Mikrocontrollern mit 100 Mbit / s</a></li>
<li><a href="../de460807/index.html">Messen Sie sieben Mal, sobald Sie das BI-Tool implementiert haben</a></li>
<li><a href="../de460813/index.html">Verwendung von Voronoi-Diagrammen zur Steuerung der KI</a></li>
<li><a href="../de460815/index.html">Die vusb-Bibliothek erfinden</a></li>
<li><a href="../de460819/index.html">WorldSkills: R√ºckblick vom Teilnehmer der Olympiade</a></li>
<li><a href="../de460821/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 307 (15. - 21. Juli)</a></li>
<li><a href="../de460823/index.html">Digitale Veranstaltungen in Moskau vom 22. bis 28. Juli</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>