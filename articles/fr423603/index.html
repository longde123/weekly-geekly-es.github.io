<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÑÔ∏è ü•¢ üö∂üèº RxSwift partie 1 üë®üèΩ‚ÄçüöÄ üç£ üë©‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habrovsk. Dans cette s√©rie d'articles, je voudrais parler de la programmation r√©active, √† savoir le cadre 
 RxSwift . Il y avait des articles...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RxSwift partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423603/"><p><img src="https://habrastorage.org/getpro/habr/post_images/ef0/3cf/97f/ef03cf97fa0f28bc4204634d7742d6af.jpg" alt="ReactiveX logo" title="Reactivex"></p><br><p>  Bonjour, Habrovsk.  Dans cette s√©rie d'articles, je voudrais parler de la programmation r√©active, √† savoir le cadre <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RxSwift</a> .  Il y avait des articles sur RxSwift sur Habr√© et sur le r√©seau, mais, √† mon avis, ils sont trop difficiles pour les d√©butants.  Par cons√©quent, si vous commencez √† comprendre la programmation r√©active dans iOS, alors je demande cat. </p><a name="habracut"></a><br><p>  Commen√ßons par d√©finir ce qu'est la programmation r√©active. </p><br><blockquote>  La programmation r√©active est un paradigme de programmation ax√© sur les flux de donn√©es et la propagation du changement. </blockquote><p>  C'est ce que nous dit le grand <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikip√©dia</a> . </p><br><p> En d'autres termes, dans le cas o√π nous programmons dans un style imp√©ratif, nous √©crivons dans le code un ensemble de commandes qui doivent √™tre ex√©cut√©es s√©quentiellement.  Le style de programmation r√©actif adh√®re √† plusieurs autres concepts.  Avec un style de programmation r√©actif, notre programme est un ¬´√©couteur¬ª des changements d'√©tat dans nos objets observ√©s.  Cela semble compliqu√©, mais ce n'est pas le cas, il suffit de p√©n√©trer ce concept et tout deviendra extr√™mement facile et clair, <del>  pas encore de bugs </del>  . </p><br><p>  Je ne peindrai pas comment installer le framework, c'est facile √† faire en cliquant sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> .  Passons √† la pratique. </p><br><h2 id="observable">  Observable </h2><br><p>  Commen√ßons par un observable ou observable simple mais important.  Observable est ce qui nous donnera les donn√©es, il est n√©cessaire de g√©n√©rer un flux de donn√©es. </p><br><pre><code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observable = Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;.just(<span class="hljs-string"><span class="hljs-string">" observable"</span></span>)</code> </pre> <br><p>  <strong>BINGO</strong> !  Nous avons cr√©√© le premier observable. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/750/94a/4b0/75094a4b0a1e2744a89382727fde51bb.jpg" alt="alors quoi?"></p><br><p>  Puisque nous avons cr√©√© l'objet observ√©, il est logique que nous devions cr√©er un objet qui observera. </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observable = Observable&lt;String&gt;.just(<span class="hljs-string"><span class="hljs-string">" observable"</span></span>) _ = observable.subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">event</span></span></span></span></span><span class="hljs-function">) }</span></span></code> </pre> <br><p>  nous obtenons ce qui suit dans le journal: </p><br><pre> <code class="hljs lisp">next( observable) completed</code> </pre> <br><p><img src="https://habrastorage.org/webt/6d/8y/mo/6d8ymogkm6b0yvgdmvryssbv4ha.jpeg" alt="termin√©?"></p><br><p>  Observable nous envoie des informations sur ses √©v√©nements, il n'y en a que 3 types: </p><br><ul><li>  suivant </li><li>  erreur </li><li>  termin√© </li></ul><br><p>  Avec l'√©l√©ment <em>suivant</em> vient l'√©l√©ment que nous avons envoy√© et tous les √©v√©nements envoy√©s par nous, l' <em>erreur est</em> envoy√©e comme son nom l'indique en cas d'erreur, et <em>compl√©t√©e</em> dans le cas o√π notre observable a envoy√© toutes les donn√©es et se termine. </p><br><p>  Nous pouvons cr√©er plus de d√©tails <del>  observateur </del>  abonn√© et obtenir une vue plus pratique pour g√©rer tous les √©v√©nements. </p><br><pre> <code class="hljs mel">_ = observable.subscribe(onNext: { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) }, onError: { (<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>) }, onCompleted: { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">"finish"</span></span>) }) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">"disposed"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ,          }</span></span></code> </pre> <br><pre> <code class="hljs">  finish disposed</code> </pre> <br><p>  En observable, vous pouvez cr√©er une s√©quence non seulement √† partir d'une ligne, et en effet non seulement √† partir de lignes, nous pouvons y mettre n'importe quel type de donn√©es. </p><br><pre> <code class="hljs pgsql">let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>) _ = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { (event) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(event) }</code> </pre> <br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) ... completed</code> </pre> <br><p>  L'observable peut √™tre cr√©√© √† partir d'un tableau de valeurs. </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> array = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observable = Observable&lt;Int&gt;.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(array) _ = observable.subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">event</span></span></span></span></span><span class="hljs-function">) }</span></span></code> </pre> <br><pre> <code class="hljs lisp">next(<span class="hljs-number"><span class="hljs-number">1</span></span>) next(<span class="hljs-number"><span class="hljs-number">2</span></span>) next(<span class="hljs-number"><span class="hljs-number">3</span></span>) completed</code> </pre> <br><p>  Un <em>observable</em> peut avoir n'importe quel nombre d' <em>abonn√©s</em> .  Maintenant la terminologie, qu'est-ce qu'un observable? </p><br><p>  <strong>Observable</strong> est le fondement de tout Rx, qui g√©n√®re de mani√®re asynchrone une s√©quence de donn√©es immuables et permet √† d'autres de s'y abonner. </p><br><h2 id="disposing">  √âlimination </h2><br><p>  Maintenant que nous savons comment cr√©er une s√©quence et y souscrire, nous devons faire face √† une chose telle que l' <em>√©limination</em> . </p><br><p>  Il est important de se rappeler <em>qu'Observable</em> est un type "froid", c'est-√†-dire que notre observable "n'√©met" aucun √©v√©nement tant qu'il n'est pas souscrit.  Observable existe jusqu'√† ce qu'il envoie un message d'erreur ou un message d' <em>erreur</em> ( <em>termin√©</em> ).  Si nous voulons annuler explicitement l'abonnement, nous pouvons proc√©der comme suit. </p><br><pre> <code class="hljs pgsql">// ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span> //   let <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] // observable    let observable = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>) //   observable let <span class="hljs-keyword"><span class="hljs-keyword">subscription</span></span> = observable.subscribe { (event) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(event) } //dispos<span class="hljs-string"><span class="hljs-string">'    subscription.dispose()</span></span></code> </pre> <br><p>  Il y a plus <del>  beau </del>  bonne option. </p><br><pre> <code class="hljs pgsql">//  "" let bag = DisposeBag() //   let <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] // observable    let observable = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>) //   observable _ = observable.subscribe { (event) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(event) }.disposed(<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>: bag)</code> </pre> <br><p>  Ainsi, nous ajoutons notre abonnement au sac de recyclage ou au <em>DisposeBag</em> . <br>  √Ä quoi √ßa sert?  Si vous, en utilisant un abonnement, ne l'ajoutez pas √† votre sac ou si vous n'appelez pas explicitement <em>disposer</em> , ou, dans les cas extr√™mes, vous n'amenez pas <em>observable</em> √† la fin de quelque mani√®re que ce soit, alors vous obtiendrez probablement une fuite de m√©moire.  Vous utiliserez DisposeBag tr√®s souvent dans votre travail avec RxSwift. </p><br><h2 id="operators">  Les op√©rateurs </h2><br><p>  La programmation fonctionnelle-r√©active (FRP ci-dessous) a de nombreux op√©rateurs int√©gr√©s pour transformer les √©l√©ments observables.  Il y a un site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rxmarbles</a> , sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lequel</a> vous pouvez voir le travail et l'effet de tous les op√©rateurs, bien, mais nous regardons toujours certains d'entre eux. </p><br><h3 id="map">  La carte </h3><br><p>  L'op√©rateur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em><strong>carte</strong></em></a> est utilis√© tr√®s souvent et je pense qu'il est familier √† beaucoup, avec son aide, nous transformons tous les √©l√©ments re√ßus. <br>  <em>Un exemple:</em> </p><br><pre> <code class="hljs pgsql">let bag = DisposeBag() let <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] let observable = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>).map { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> * <span class="hljs-number"><span class="hljs-number">2</span></span> } _ = observable.subscribe { (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) }.disponsed(<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>: bag)</code> </pre> <br><p>  Qu'obtenons-nous dans la console: </p><br><pre> <code class="hljs lisp">next(<span class="hljs-number"><span class="hljs-number">2</span></span>) next(<span class="hljs-number"><span class="hljs-number">4</span></span>) next(<span class="hljs-number"><span class="hljs-number">6</span></span>) completed</code> </pre> <br><p>  Nous prenons chaque √©l√©ment de la s√©quence et cr√©ons une nouvelle s√©quence r√©sultante.  Pour clarifier ce qui se passe, il vaut mieux √©crire davantage. </p><br><pre> <code class="hljs pgsql">let bag = DisposeBag() let observable = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>) //  observable let transformObservable = observable.map { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> * <span class="hljs-number"><span class="hljs-number">2</span></span> } _ = transformObservable.subscribe { (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) }.disposed(<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>: bag)</code> </pre> <br><h4 id="chto-takoe-0">  Qu'est-ce que 0 $? </h4><br><p>  $ 0 est le nom de l'√©l√©ment par d√©faut, nous pouvons utiliser des enregistrements abr√©g√©s et complets dans les m√©thodes, le plus souvent nous utilisons des abr√©viations </p><br><pre> <code class="hljs bash">//  <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> transformObservable = observable.map { <span class="hljs-variable"><span class="hljs-variable">$0</span></span> * 2 } //  <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> transformObservable = observable.map { (element) -&gt; Int <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> element * 2 }</code> </pre> <br><p>  Conviens que la forme courte est beaucoup plus simple, non? </p><br><h3 id="filter">  Filtrer </h3><br><p>  L'op√©rateur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">filtre</a> nous permet de filtrer les donn√©es √©mises par notre observable, c'est-√†-dire que lors de la souscription, nous ne recevrons pas de valeurs inutiles pour nous. <br>  <strong>Un exemple:</strong> </p><br><pre> <code class="hljs pgsql">let bag = DisposeBag() let <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> , <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>] // observable   let observable = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>) //  <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>,     observable let filteredObservable = observable.<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> &gt; <span class="hljs-number"><span class="hljs-number">2</span></span> } // _ = filteredObservable.subscribe { (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) }.disposed(<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>: bag)</code> </pre> <br><p>  Qu'obtenons-nous dans la console? </p><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) ... completed</code> </pre> <br><p>  Comme nous le voyons, dans la console, nous n'avons que les valeurs qui satisfont nos conditions. </p><br><p>  Soit dit en passant, les op√©rateurs peuvent √™tre combin√©s, voici √† quoi cela ressemblerait si nous voulions appliquer imm√©diatement l'op√©rateur de filtrage et l'op√©rateur de <em>carte</em> . </p><br><pre> <code class="hljs pgsql">let bag = DisposeBag() let <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> , <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>] let observable = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>) let filteredAndMappedObservable = observable .<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> &gt; <span class="hljs-number"><span class="hljs-number">2</span></span> } .map { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> * <span class="hljs-number"><span class="hljs-number">2</span></span> } _ = filteredAndMappedObservable.subscribe { (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) }.disposed(<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>: bag)</code> </pre> <br><p>  <strong>Console:</strong> </p><br><pre> <code class="hljs lisp">next(<span class="hljs-number"><span class="hljs-number">6</span></span>) next(<span class="hljs-number"><span class="hljs-number">8</span></span>) next(<span class="hljs-number"><span class="hljs-number">10</span></span>) next(<span class="hljs-number"><span class="hljs-number">12</span></span>) next(<span class="hljs-number"><span class="hljs-number">14</span></span>) completed</code> </pre> <br><h3 id="distinct">  Distinct </h3><br><p>  Un autre excellent op√©rateur associ√© au filtrage, l'op√©rateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">discret vous</a> permet de ne sauter que les donn√©es modifi√©es, il est pr√©f√©rable de se tourner imm√©diatement vers un exemple et tout deviendra clair. </p><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bag = DisposeBag() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-built_in"><span class="hljs-built_in">array</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observable = Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;.from(<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> filteredObservable = observable.distinctUntilChanged() _ = filteredObservable.subscribe { (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) }.disposed(by: bag)</code> </pre> <br><p>  Dans la console, nous obtenons ce qui suit: </p><br><pre> <code class="hljs lisp">next(<span class="hljs-number"><span class="hljs-number">1</span></span>) next(<span class="hljs-number"><span class="hljs-number">2</span></span>) next(<span class="hljs-number"><span class="hljs-number">3</span></span>) next(<span class="hljs-number"><span class="hljs-number">5</span></span>) next(<span class="hljs-number"><span class="hljs-number">6</span></span>) completed</code> </pre> <br><p>  c'est-√†-dire que si l'√©l√©ment actuel de la s√©quence est identique au pr√©c√©dent, il est ignor√© et ainsi de suite jusqu'√† ce qu'un √©l√©ment diff√©rent du pr√©c√©dent apparaisse, cela est tr√®s pratique lorsque vous travaillez avec, par exemple, l'interface utilisateur, √† savoir la table, au cas o√π nous aurions re√ßu des donn√©es sont les m√™mes que nous avons maintenant, alors <em>recharger la</em> table ne devrait pas √™tre. </p><br><h3 id="takelast">  Takelast </h3><br><p>  Un op√©rateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">takeLast</a> tr√®s simple, nous prenons le ni√®me nombre d'√©l√©ments de la fin. </p><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bag = DisposeBag() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-built_in"><span class="hljs-built_in">array</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observable = Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;.from(<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> takeLastObservable = observable.takeLast(<span class="hljs-number"><span class="hljs-number">1</span></span>) _ = takeLastObservable.subscribe { (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) }.disposed(by: bag)</code> </pre> <br><p>  Dans la console, nous obtenons ce qui suit: </p><br><pre> <code class="hljs lisp">next(<span class="hljs-number"><span class="hljs-number">6</span></span>) completed</code> </pre> <br><h3 id="throttle-i-interval">  Acc√©l√©rateur et intervalle </h3><br><p>  J'ai alors d√©cid√© de prendre 2 op√©rateurs √† la fois, tout simplement parce qu'avec l'aide du second, il est facile de montrer le travail du premier. </p><br><p>  L'op√©rateur d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">acc√©l√©rateur</a> vous permet de faire une pause entre la capture des valeurs transmises, c'est un exemple tr√®s simple, vous √©crivez une application r√©active, utilisez la barre de recherche et ne voulez pas recharger la table ou aller sur le serveur √† chaque fois que vous entrez des donn√©es, vous utilisez donc l' <em>acc√©l√©rateur</em> et dites donc que Voulez-vous prendre les donn√©es utilisateur toutes les 2 secondes (par exemple, vous pouvez d√©finir n'importe quel intervalle) et r√©duire la consommation de ressources pour un traitement inutile, comment cela fonctionne-t-il et est-il d√©crit dans le code?  Voir ci-dessous pour un exemple. </p><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">let</span></span> bag = DisposeBag() //observable     0.5    1   0 <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> observable = Observable&lt;Int&gt;.interval(0.5, scheduler: MainScheduler.instance) <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> throttleObservable = observable.throttle(1.0, scheduler: MainScheduler.instance) _ = takeLastObservable.subscribe { (event) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"throttle \(event)"</span></span>) }.disposed(by: bag)</code> </pre> <br><p>  Dans la console sera: </p><br><pre> <code class="hljs perl">throttle <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) throttle <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) throttle <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) throttle <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>) ...</code> </pre> <br><p>  L'op√©rateur d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">intervalle</a> fait que l'observable g√©n√®re des valeurs toutes les 0,5 secondes par incr√©ments de 1 √† partir de 0, ce qui est un minuteur si simple pour Rx.  Il s'av√®re qu'une fois que les valeurs sont g√©n√©r√©es toutes les 0,5 secondes, alors 2 valeurs sont g√©n√©r√©es par seconde, arithm√©tique simple, et l'op√©rateur de papillon attend une seconde et prend la derni√®re valeur. </p><br><h3 id="debounce">  Debounce </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Debounce est</a> tr√®s similaire √† la d√©claration pr√©c√©dente, mais un peu plus intelligent √† mon avis.  L'op√©rateur anti-rebond attend la ni√®me dur√©e, et s'il n'y a pas de changement depuis le d√©but de son temporisateur, il prend la derni√®re valeur, si nous envoyons la valeur, le temporisateur red√©marrera √† nouveau.  Ceci est juste tr√®s utile pour la situation d√©crite dans l'exemple pr√©c√©dent, l'utilisateur entre des donn√©es, nous attendons quand il a termin√© (si l'utilisateur est inactif pendant une seconde ou demie), puis nous commen√ßons √† effectuer une action.  Par cons√©quent, si nous changeons simplement l'op√©rateur dans le code pr√©c√©dent, nous n'obtiendrons pas les valeurs √† la console, car debounce attendra une seconde, mais toutes les 0,5 secondes, il recevra une nouvelle valeur et red√©marrera son temporisateur, donc nous n'obtiendrons rien.  Voyons un exemple. </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bag = <span class="hljs-type"><span class="hljs-type">DisposeBag</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observable = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.interval(<span class="hljs-number"><span class="hljs-number">1.5</span></span>, scheduler: <span class="hljs-type"><span class="hljs-type">MainScheduler</span></span>.instance) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> debounceObservable = observable.debounce(<span class="hljs-number"><span class="hljs-number">1.0</span></span>, scheduler: <span class="hljs-type"><span class="hljs-type">MainScheduler</span></span>.instance) <span class="hljs-number"><span class="hljs-number">_</span></span> = debounceObservable.subscribe({ (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"debounce \(e)"</span></span>) }).disposed(by: bag)</code> </pre> <br><p>  √Ä ce stade, je propose de terminer avec les op√©rateurs, ils sont nombreux dans le framework RxSwift, on ne peut pas dire qu'ils sont tous tr√®s n√©cessaires dans la vie de tous les jours, mais il faut quand m√™me conna√Ætre leur existence, il est donc conseill√© de se familiariser avec la liste compl√®te des op√©rateurs sur le site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rxmarbles</a> . </p><br><h2 id="scheduler">  Planificateur </h2><br><p>  Un sujet tr√®s important que je voudrais aborder dans cet article est le planificateur.  Scheduler, nous permet d'ex√©cuter notre observable sur certains threads et ils ont leurs propres subtilit√©s.  Pour commencer, il existe 2 types de param√©trage du planificateur observable - [observOn] () et [subscribeOn] (). </p><br><h3 id="subscribeon">  Abonnez-vous </h3><br><p>  SubscribeOn est responsable du thread dans lequel tout le processus observable s'ex√©cutera jusqu'√† ce que ses √©v√©nements atteignent le gestionnaire (abonn√©). </p><br><h3 id="observeon">  Observeon </h3><br><p>  Comme vous pouvez le deviner, observeOn est responsable du flux dans lequel les √©v√©nements re√ßus par l'abonn√© seront trait√©s. </p><br><p>  C'est une chose tr√®s cool, car nous pouvons tr√®s facilement mettre le t√©l√©chargement de quelque chose du r√©seau dans le flux d'arri√®re-plan, et lorsque nous obtenons le r√©sultat, allez dans le flux principal et agissez en quelque sorte sur l'interface utilisateur. </p><br><p>  Voyons comment cela fonctionne avec un exemple: </p><br><pre> <code class="hljs lua">let observable = Observable&lt;Int&gt;.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span> { (observer) -&gt; Disposable <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"thread observable -&gt; \(Thread.current)"</span></span>) observer.onNext(<span class="hljs-number"><span class="hljs-number">1</span></span>) observer.onNext(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Disposables.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>() }.subscribeOn(ConcurrentDispatchQueueScheduler(qos: .background)) _ = observable .observeOn(MainScheduler.instance) .subscribe({ (e) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"thread -&gt; \(Thread.current)"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) })</code> </pre> <br><p>  Dans la console, nous obtenons: </p><br><pre> <code class="hljs pgsql">thread observable -&gt; &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x604000465040</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>)} thread -&gt; &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x60000006f6c0</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span> = main} next(<span class="hljs-number"><span class="hljs-number">1</span></span>) thread -&gt; &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x60000006f6c0</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span> = main} next(<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br><p>  Nous voyons que l'observable a √©t√© cr√©√© dans le thread d'arri√®re-plan et nous avons trait√© les donn√©es dans le thread principal.  Ceci est utile lorsque vous travaillez avec un r√©seau, par exemple: </p><br><pre> <code class="hljs mel">let rxRequest = URLSession.shared.rx.data(request: URLRequest(url: URL(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>: <span class="hljs-string"><span class="hljs-string">"http://jsonplaceholder.typicode.com/posts/1"</span></span>)!)).subscribeOn(ConcurrentDispatchQueueScheduler(qos: .background)) _ = rxRequest .observeOn(MainScheduler.<span class="hljs-keyword"><span class="hljs-keyword">instance</span></span>) .subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">" \(event)"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">"thread \(Thread.current)"</span></span>) }</code> </pre> <br><p>  Ainsi, la demande sera ex√©cut√©e dans le thread d'arri√®re-plan et tout le traitement des r√©ponses se fera en principal.  √Ä ce stade, il est trop t√¥t pour dire quel <em>type de</em> m√©thode <em>rx</em> <em>URLSession</em> a soudainement dessin√©, cela sera discut√© plus tard, ce code a √©t√© donn√© comme exemple d'utilisation de <em>Scheduler</em> , en passant, nous obtiendrons la r√©ponse suivante √† la console. </p><br><pre> <code class="hljs pgsql">curl -X <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> "http://jsonplaceholder.typicode.com/posts/1" -i -v Success (<span class="hljs-number"><span class="hljs-number">305</span></span>ms): Status <span class="hljs-number"><span class="hljs-number">200</span></span> ** next(<span class="hljs-number"><span class="hljs-number">292</span></span> bytes)** thread -&gt; &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x600000072580</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span> = main}  completed thread -&gt; &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x600000072580</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span> = main}</code> </pre> <br><p>  Dans la finale, voyons quel <em>type de donn√©es</em> nous est parvenu, pour cela nous devrons effectuer une v√©rification afin de ne pas commencer √† analyser le message termin√© par accident. </p><br><pre> <code class="hljs mel">_ = rxRequest .observeOn(MainScheduler.<span class="hljs-keyword"><span class="hljs-keyword">instance</span></span>) .subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.isCompleted &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">error</span></span> == nil) { let json = try? JSONSerialization.jsonObject(with: <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.element!, options: []) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(json!) } <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">"data -&gt; \(event)"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">"thread -&gt; \(Thread.current)"</span></span>) }</code> </pre> <br><p>  Nous v√©rifions que l'√©v√©nement n'est pas un message d'arr√™t observable ou une erreur qui en est issue, bien qu'il ait √©t√© possible d'impl√©menter une m√©thode d'abonnement diff√©rente et de traiter tous ces types d'√©v√©nements s√©par√©ment, mais vous pouvez d√©j√† le faire vous-m√™me, et nous obtiendrons les √©l√©ments suivants dans la console. </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">curl</span></span> -X GET <span class="hljs-string"><span class="hljs-string">"http://jsonplaceholder.typicode.com/posts/1"</span></span> -i -v Success (<span class="hljs-number"><span class="hljs-number">182ms</span></span>): Status <span class="hljs-number"><span class="hljs-number">200</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">body</span></span> = <span class="hljs-string"><span class="hljs-string">"quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">id</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">title</span></span> = <span class="hljs-string"><span class="hljs-string">"sunt aut facere repellat provident occaecati excepturi optio reprehenderit"</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">userId</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">data</span></span> -&gt; next(<span class="hljs-number"><span class="hljs-number">292</span></span> bytes) thread -&gt; &lt;NSThread: 0x60400006c6c0&gt;{<span class="hljs-attribute"><span class="hljs-attribute">number</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>, name = main} data -&gt; completed thread -&gt; &lt;NSThread: 0x60400006c6c0&gt;{<span class="hljs-attribute"><span class="hljs-attribute">number</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>, name = main}</code> </pre> <br><p>  Donn√©es re√ßues :-) </p><br><h2 id="subjects">  Sujets </h2><br><p>  Nous passons au chaud, √† savoir du "froid" ou "passif" observable au "chaud" ou "actif" observable, que l'on appelle subject'ami.  Si avant cela notre observable n'a commenc√© son travail qu'apr√®s s'√™tre abonn√© √† eux et que vous aviez une question dans votre t√™te, "pourquoi ai-je besoin de tout cela?", Alors les sujets travaillent toujours et envoient toujours les donn√©es re√ßues. </p><br><p>  Comment est-ce?  Dans le cas de observable, nous sommes all√©s √† la clinique, sommes all√©s √† la grand-m√®re mal√©fique sur <del>  r√©ception </del>  √† la r√©ception, ils se sont approch√©s et ont demand√© √† quel bureau nous devrions aller, puis la granulation nous a r√©pondu, dans le cas des sujets, la granulation se tient et √©coute le calendrier et l'√©tat des m√©decins √† l'h√¥pital et d√®s qu'il re√ßoit des informations sur le mouvement d'un m√©decin, il dit imm√©diatement ceci, demandez Quelque chose est inutile pour la granulation, nous pouvons simplement venir, l'√©couter, partir, et elle continuera √† dire, quelque chose est emport√© par des comparaisons, passons au code. </p><br><p>  Cr√©ons un sujet et 2 abonn√©s, cr√©ons le premier juste apr√®s le sujet, envoyons la valeur au sujet, puis cr√©ons le second et envoyons quelques valeurs suppl√©mentaires. </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subject = PublishSubject&lt;Int&gt;() subject.subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) _</span></span> = subject.subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">) subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span></span><span class="hljs-function">) subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span></span><span class="hljs-function">)</span></span></code> </pre> <br><p>  Que verrons-nous dans la console?  √† droite, le premier a r√©ussi √† obtenir le premier √©v√©nement, mais pas le second. </p><br><pre> <code class="hljs perl">  <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)</code> </pre> <br><p>  D√©j√† plus adapt√© √† votre id√©e de programmation r√©active? <br>  Les sujets se pr√©sentent sous plusieurs formes; ils diff√®rent tous par la fa√ßon dont ils envoient des valeurs. </p><br><p>  PublishSubject est le plus simple, il n'a pas d'importance pour tout, il envoie simplement √† tous les abonn√©s ce qu'il en est venu et l'oublie. </p><br><p>  ReplaySubject - mais c'est le plus important, lors de la cr√©ation, nous lui indiquons la taille du tampon (combien de valeurs seront m√©moris√©es), par cons√©quent, il stocke les n derni√®res valeurs en m√©moire et les envoie imm√©diatement au nouvel abonn√©. </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subject = ReplaySubject&lt;Int&gt;.create(bufferSize: <span class="hljs-number"><span class="hljs-number">3</span></span>) subject.subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) subject.subscribe</span></span> { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">) subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span></span><span class="hljs-function">) subject.subscribe</span></span> { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span></span><span class="hljs-function">)</span></span></code> </pre> <br><p>  Nous regardons la console </p><br><pre> <code class="hljs perl">  <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)</code> </pre> <br><p>  BehaviorSubject n'est pas un non-sens comme le pr√©c√©dent, il a une valeur de d√©but et il se souvient de la derni√®re valeur et l'envoie imm√©diatement apr√®s que l'abonn√© s'est abonn√©. </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subject = BehaviorSubject&lt;Int&gt;(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>) subject.subscribe { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) subject.subscribe</span></span> { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">) subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span></span><span class="hljs-function">) subject.subscribe</span></span> { (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"  \(event)"</span></span></span></span></span><span class="hljs-function">) } subject.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span></span><span class="hljs-function">)</span></span></code> </pre> <br><p>  La console </p><br><pre> <code class="hljs perl">  <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)</code> </pre> <br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Il s'agissait d'un article d'introduction √©crit pour que vous connaissiez les bases et que vous puissiez ensuite les d√©velopper.  Dans les articles suivants, nous verrons comment travailler avec RxSwift avec les composants de l'interface utilisateur iOS, en cr√©ant des extensions pour les composants de l'interface utilisateur. </p><br><h3 id="ne-rxswiftom-ediny">  Pas RxSwift'om uni </h3><br><p>  La programmation r√©active est impl√©ment√©e non seulement dans la biblioth√®que RxSwift, il existe plusieurs impl√©mentations, voici les plus populaires d'entre elles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ReacktiveKit / Bond</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ReactiveSwift / ReactiveCocoa</a> .  Ils ont tous de petites diff√©rences de mise en ≈ìuvre sous le capot, mais √† mon avis, il est pr√©f√©rable de commencer vos connaissances sur le r√©activisme avec RxSwift, car il est le plus populaire parmi eux et il y aura plus de r√©ponses dans grand <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google</a> , mais apr√®s vous comprendre l'essence de ce concept, vous pouvez choisir des biblioth√®ques √† votre go√ªt et couleur. <br>  <em>Auteur de l'article: Pavel Grechikhin</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423603/">https://habr.com/ru/post/fr423603/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423591/index.html">De vieilles chansons sur l'essentiel. Java et requ√™tes sortantes</a></li>
<li><a href="../fr423593/index.html">Google annonce un concours d'attaques contre les algorithmes de vision industrielle</a></li>
<li><a href="../fr423595/index.html">Frango Anomaly, Interchange</a></li>
<li><a href="../fr423597/index.html">Comment et quels clusters peuvent √™tre allou√©s dans la base de clients</a></li>
<li><a href="../fr423601/index.html">Syst√®me d'emploi et chemin de recherche</a></li>
<li><a href="../fr423607/index.html">Linus Torvalds abandonne le style dur et prend du temps</a></li>
<li><a href="../fr423609/index.html">O√π vont les sites Web apr√®s la mort? Exp√©rience personnelle</a></li>
<li><a href="../fr423611/index.html">Paiement en un clic - bon ou mauvais?</a></li>
<li><a href="../fr423615/index.html">Comp√©tences professionnelles exig√©es des sp√©cialistes UX (tranche 2018)</a></li>
<li><a href="../fr423617/index.html">Utilisation d'une batterie d'iPhone pour concevoir des appareils √©lectroniques portables</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>