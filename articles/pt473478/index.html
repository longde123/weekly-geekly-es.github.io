<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÄ üïå üö¥üèΩ Verificando o OpenCvSharp Wrapper para OpenCV com PVS-Studio üëÅÔ∏è üõÖ üå≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="OpenCV √© uma biblioteca de c√≥digo aberto de vis√£o computacional e algoritmos de processamento de imagem e algoritmos num√©ricos de uso geral. A bibliot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verificando o OpenCvSharp Wrapper para OpenCV com PVS-Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/473478/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/0s/oi/mr0soiovipbs1ma0roktme3nj1i.png" alt="Figura 2"></div><br>  OpenCV √© uma biblioteca de c√≥digo aberto de vis√£o computacional e algoritmos de processamento de imagem e algoritmos num√©ricos de uso geral.  A biblioteca √© bem conhecida entre os desenvolvedores de C ++.  Al√©m do C ++, tamb√©m existem vers√µes para Python, Java, Ruby, Matlab, Lua e outras linguagens.  Como o C #, que √© o idioma em que me especializo, n√£o est√° nessa lista, escolhi o OpenCvSharp, um inv√≥lucro em C # do OpenCV, para verific√°-lo com o PVS-Studio.  Os resultados dessa verifica√ß√£o s√£o discutidos neste artigo. <br><a name="habracut"></a><br><h2>  1. Introdu√ß√£o </h2><br>  Antes de me tornar parte da equipe do PVS-Studio, participei da fabrica√ß√£o de rob√¥s para apresentar em exposi√ß√µes.  Minhas tarefas inclu√≠am o trabalho de reparo mais b√°sico (falhas importantes foram tratadas por outra pessoa), bem como o desenvolvimento de software e utilit√°rios de todos os tipos. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/s9/sk/p-/s9skp-nztgw-u2nt8j0dfuvae3m.png" alt="Figura 1"></div><br>  <i>Eu, cansado e novo na cidade, com um rob√¥ KIKI rec√©m-desembalado.</i> <br><br>  A prop√≥sito, a parte do desenvolvimento foi bem engra√ßada.  Cada vez que um de n√≥s tinha uma id√©ia de uma nova maneira de surpreender os visitantes da exposi√ß√£o, n√≥s o traz√≠amos para discuss√£o e, se todo mundo gostasse, come√ß√°vamos a trabalhar.  Uma vez, ocorreu-nos criar um rob√¥ capaz de reconhecer um rosto humano e responder com um discurso de boas-vindas. <br><br>  Pesquisei algumas bibliotecas para minhas necessidades e me deparei com o OpenCV, uma biblioteca de algoritmos de vis√£o computacional.  Mas fiquei decepcionado logo que descobri que o OpenCV foi implementado em C ++.  Meu conhecimento de C ++, que eu havia estudado na faculdade, obviamente n√£o era suficiente.  Pesquisei um pouco mais no Google e encontrei o OpenCvSharp, um inv√≥lucro da biblioteca para C #, que √© o idioma em que me especializo.  Faz cerca de meio ano desde ent√£o, o programa h√° muito escrito e em uso, e agora eu finalmente decidi espiar "por baixo" do OpenCvSharp e digitalizar seu c√≥digo-fonte com o analisador est√°tico PVS-Studio. <br><br><h2>  O projeto em an√°lise </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O OpenCvSharp</a> √© um inv√≥lucro do OpenCV para uso em projetos em C #.  A prop√≥sito, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">j√° verificamos o</a> OpenCV no passado.  Os pontos fortes do OpenCvSharp s√£o a grande cole√ß√£o de exemplos de c√≥digo, o suporte a v√°rias plataformas (ele roda em qualquer plataforma suportada pelo Mono) e a f√°cil instala√ß√£o. <br><br>  O wrapper √© um projeto pequeno com cerca de 112.200 linhas de c√≥digo C #.  1,2% destes s√£o coment√°rios, que, devo dizer, s√£o suspeitosamente poucos.  Por outro lado, existem alguns bugs para um projeto t√£o pequeno.  Escolhi mais de 20 exemplos para este artigo, mas o analisador realmente encontrou muitos outros, o que n√£o √© interessante ou √≥bvio. <br><br><h2>  PVS-Studio </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O PVS-Studio</a> √© uma ferramenta para detectar bugs e poss√≠veis vulnerabilidades no c√≥digo fonte de programas escritos em C, C ++, C # e Java.  √â executado no Windows, Linux e macOS.  Al√©m do c√≥digo inacess√≠vel, erros de programa√ß√£o e erros de digita√ß√£o, o PVS-Studio, como j√° foi mencionado, √© capaz de detectar poss√≠veis problemas de seguran√ßa.  Portanto, ele pode ser visto como uma ferramenta SAST (Static Application Security Testing). <br><br><h2>  Os avisos mais interessantes </h2><br>  O que torna o m√©todo <i>WriteableBitmapConverter</i> especial √© que ele disparou quatro avisos do mesmo tipo ao mesmo tempo: <br><br><ul><li>  V3005 A vari√°vel 'optimumChannels [PixelFormats.Indexed1]' √© atribu√≠da a si mesma.  WriteableBitmapConverter.cs 22 </li><li>  V3005 A vari√°vel 'optimumChannels [PixelFormats.Indexed8]' √© atribu√≠da a si mesma.  WriteableBitmapConverter.cs 23 </li><li>  V3005 A vari√°vel 'optimumTypes [PixelFormats.Indexed1]' √© atribu√≠da a si mesma.  WriteableBitmapConverter.cs 50 </li><li>  V3005 A vari√°vel 'optimumTypes [PixelFormats.Indexed8]' √© atribu√≠da a si mesma.  WriteableBitmapConverter.cs 51 </li></ul><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteableBitmapConverter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { optimumChannels = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary &lt;PixelFormat, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); optimumChannels[PixelFormats.Indexed1] = <span class="hljs-comment"><span class="hljs-comment">// &lt;= optimumChannels[PixelFormats.Indexed8] = // &lt;= optimumChannels[PixelFormats.Gray2] = optimumChannels[PixelFormats.Gray4] = optimumChannels[PixelFormats.Gray8] = optimumChannels[PixelFormats.Gray16] = optimumChannels[PixelFormats.Gray32Float] = optimumChannels[PixelFormats.Indexed1] = // &lt;= optimumChannels[PixelFormats.Indexed2] = optimumChannels[PixelFormats.Indexed4] = optimumChannels[PixelFormats.Indexed8] = // &lt;= .... optimumTypes = new Dictionary &lt;PixelFormat, MatType&gt;(); optimumTypes[PixelFormats.Indexed1] = // &lt;= optimumTypes[PixelFormats.Indexed8] = // &lt;= optimumTypes[PixelFormats.Gray2] = optimumTypes[PixelFormats.Gray4] = optimumTypes[PixelFormats.Gray8] = optimumTypes[PixelFormats.Indexed1] = // &lt;= optimumTypes[PixelFormats.Indexed2] = optimumTypes[PixelFormats.Indexed4] = optimumTypes[PixelFormats.Indexed8] = // &lt;= optimumTypes[PixelFormats.BlackWhite] = .... } .... public static class PixelFormats { .... public static PixelFormat Indexed8 { get; } .... public static PixelFormat Indexed1 { get; } .... }</span></span></code> </pre> <br>  A classe <i>PixelFormats</i> √© definida no espa√ßo para nome <i>System.Windows.Media</i> e √© uma cole√ß√£o de v√°rios formatos de pixel.  O analisador ressalta que os elementos <i>optimumChannels [PixelFormats.Indexed1]</i> e <i>optimumChannels [PixelFormats.Indexed8]</i> recebem valores pela segunda vez no m√©todo <i>WriteableBitmapConverter</i> , o que n√£o faz sentido.  N√£o est√° claro se isso √© apenas um erro de digita√ß√£o ou se o programador quis dizer outra coisa.  A prop√≥sito, esse trecho √© um exemplo v√≠vido de como os analisadores est√°ticos podem ser √∫teis: observar v√°rias linhas semelhantes o deixa menos focado - n√£o √© de admirar que os erros de digita√ß√£o passem despercebidos, apesar da revis√£o do c√≥digo.  Os analisadores est√°ticos, no entanto, n√£o t√™m problemas para manter a aten√ß√£o e n√£o precisam de descanso, para que possam detectar bugs assim sem nenhum esfor√ßo. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/1g/ok/vg/1gokvgep_oiqjqsqy9btoh3nncg.png" alt="Figura 5"></div><br>  <i>Sinta o poder da an√°lise est√°tica.</i> <br><br>  <b>Mensagem de diagn√≥stico do PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3021</a> Existem duas instru√ß√µes 'if' com express√µes condicionais id√™nticas.  A primeira instru√ß√£o 'if' cont√©m retorno de m√©todo.  Isso significa que a segunda instru√ß√£o 'if' n√£o faz sentido InputArray.cs 394 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> MatType </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EstimateType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Type t</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec2b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC2; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec3b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC3; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec4b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec6b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC(<span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec2s)) <span class="hljs-comment"><span class="hljs-comment">// &lt;= return MatType.CV_16SC2; .... if (t == typeof(Vec2s)) // &lt;= return MatType.CV_32SC2; .... }</span></span></code> </pre> <br>  Este bug √© um pouco semelhante ao anterior.  O desenvolvedor est√° verificando a mesma condi√ß√£o duas vezes.  N√£o faz sentido aqui como o ramo ent√£o da instru√ß√£o "duplicate" <i>if</i> nunca ser√° executado porque: <br><br><ul><li>  se a primeira condi√ß√£o for verdadeira, o m√©todo retornar√°; </li><li>  se a primeira condi√ß√£o for falsa, a segunda tamb√©m ser√° falsa porque a vari√°vel que est√° sendo verificada, <i>t</i> , n√£o muda entre as duas verifica√ß√µes. </li></ul><br>  Esse c√≥digo precisa ser revisado;  √© muito prov√°vel que a segunda c√≥pia do <i>Vec2s</i> tenha realmente sido uma outra vari√°vel. <br><br>  <b>Mensagem de diagn√≥stico do PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3010</a> O valor de retorno da fun√ß√£o 'ToString' deve ser utilizado.  ImgProcTest.cs 80 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> RectanglesIntersectTypes </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RotatedRectangleIntersection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RotatedRect rect1, RotatedRect rect2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Point2f[] intersectingRegion</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> intersectingRegionVec = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VectorOfPoint2f()) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ret = NativeMethods .imgproc_rotatedRectangleIntersection_vector( rect1, rect2, intersectingRegionVec.CvPtr); intersectingRegion = intersectingRegionVec.ToArray(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (RectanglesIntersectTypes) ret; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RotatedRectangleIntersectionVector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rr1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RotatedRect(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point2f(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size2f(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-number"><span class="hljs-number">45</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rr2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RotatedRect(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point2f(<span class="hljs-number"><span class="hljs-number">130</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size2f(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>); Cv2.RotatedRectangleIntersection(rr1, rr2, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> intersectingRegion); .... intersectingRegion.ToString(); }</code> </pre> <br>  O m√©todo <i>RotatedRectangleIntersection</i> √© acessado atrav√©s do par√¢metro <i>intersectingRegion</i> e retorna uma matriz de elementos do tipo <i>Point2f</i> .  Depois que o <i>intersectingRegion</i> for preenchido com valores, o m√©todo <i>ToString ()</i> √© chamado na matriz.  Isso n√£o afeta os elementos da matriz de forma alguma e nenhum trabalho √∫til √© realizado na √∫ltima linha; portanto, seria justo supor que o desenvolvedor simplesmente se esqueceu de remover essa pe√ßa. <br><br>  <b>Mensagens de diagn√≥stico do PVS-Studio:</b> <br><br><ul><li>  V3021 Existem duas instru√ß√µes 'if' com express√µes condicionais id√™nticas.  A primeira instru√ß√£o 'if' cont√©m retorno de m√©todo.  Isso significa que a segunda declara√ß√£o 'if' n√£o faz sentido Cv2_calib3d.cs 1370 </li><li>  A express√£o V3022 'objectPoints == null' √© sempre falsa.  Cv2_calib3d.cs 1372 </li></ul><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalibrateCamera</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectPoints == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(objectPoints)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectPoints == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(objectPoints)); .... }</code> </pre> <br>  N√≥s clonamos o c√≥digo aqui, da√≠ os dois avisos.  O primeiro diz que ambas as instru√ß√µes <i>if</i> verificam a mesma condi√ß√£o.  Se essa condi√ß√£o for verdadeira, o m√©todo retornar√° no ramo da primeira instru√ß√£o <i>if</i> .  Consequentemente, a segunda condi√ß√£o ser√° sempre falsa, que √© o que o segundo aviso est√° nos dizendo.  Parece que o programador clonou esse fragmento usando copiar e colar, mas esqueceu de alter√°-lo. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/cy/db/s1/cydbs1dussvael3m4ihcmwdfw4y.png" alt="Figura 6"></div><br><br>  <i>Copiar e colar bonito.</i> <br><br>  Outros avisos deste tipo: <br><br><ul><li>  V3021 Existem duas instru√ß√µes 'if' com express√µes condicionais id√™nticas.  A primeira instru√ß√£o 'if' cont√©m retorno de m√©todo.  Isso significa que a segunda declara√ß√£o 'if' n√£o faz sentido Cv2_calib3d.cs 1444 </li><li>  A express√£o V3022 'objectPoints == null' √© sempre falsa.  Cv2_calib3d.cs 1446 </li></ul><br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A</a> express√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> 'label == MarkerValue' √© sempre falsa.  Labeller.cs 135 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Labeller</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MarkerValue = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perform</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Mat img, CvBlobs blobs</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> label = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastLabel = <span class="hljs-number"><span class="hljs-number">0</span></span>; CvBlob lastBlob = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; h; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; w; x++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (imgIn[x + y * step] == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> labeled = labels[y, x] != <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { labeled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Label contour. label++; if (label == MarkerValue) // &lt;= throw new Exception(); .... } .... } .... } } }</span></span></code> </pre> <br>  Uma vari√°vel chamada <i>label</i> √© criada e inicializada como 0. Se uma determinada condi√ß√£o for verdadeira, ela ser√° incrementada em uma.  Al√©m disso, essa vari√°vel nunca √© diminu√≠da nesse trecho.  Portanto, verificar a constante -1, como na linha apontada pelo analisador, n√£o faz sentido. <br><br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3038</a> O argumento foi passado para o m√©todo v√°rias vezes.  √â poss√≠vel que outro argumento seja passado.  Cv2_photo.cs 124 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FastNlMeansDenoisingMulti</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... NativeMethods.photo_fastNlMeansDenoisingMulti( srcImgPtrs, srcImgPtrs.Length, dst.CvPtr, imgToDenoiseIndex, templateWindowSize, h, templateWindowSize, searchWindowSize); .... }</code> </pre> <br>  Para entender o que o analisador est√° nos dizendo, vamos dar uma olhada nos par√¢metros do m√©todo <i>photo_fastNlMeansDenoisingMulti</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">photo_fastNlMeansDenoisingMulti</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> IntPtr[] srcImgs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> srcImgsLength, IntPtr dst, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> imgToDenoiseIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> temporalWindowSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> templateWindowSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> searchWindowSize</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  Vamos simplific√°-lo ainda mais para torn√°-lo completamente direto.  Compare estas linhas: <br><br><pre> <code class="cs hljs">NativeMethods.photo_fastNlMeansDenoisingMulti( .... templateWindowSize, .... templateWindowSize, ....); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">photo_fastNlMeansDenoisingMulti</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> .... </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> temporalWindowSize, .... </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> templateWindowSize, ....</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  A vari√°vel <i>templateWindowSize</i> √© declarada duas vezes, mas a primeira vez que √© mencionada deve realmente ser a declara√ß√£o de <i>temporalWindowSize</i> .  Outra coisa que o analisador n√£o gostou √© que o valor de <i>temporalWindowSize</i> n√£o √© usado no m√©todo <i>photo_fastNlMeansDenoisingMulti</i> .  Essa poderia ser uma decis√£o consciente, mas eu examinaria mais de perto esse c√≥digo se eu fosse o autor. <br><br>  Outros avisos deste tipo: <br><br><ul><li>  V3038 O argumento foi passado para o m√©todo v√°rias vezes.  √â poss√≠vel que outro argumento seja passado.  Cv2_photo.cs 149 </li><li>  V3038 O argumento foi passado para o m√©todo v√°rias vezes.  √â poss√≠vel que outro argumento seja passado.  Cv2_photo.cs 180 </li><li>  V3038 O argumento foi passado para o m√©todo v√°rias vezes.  √â poss√≠vel que outro argumento seja passado.  Cv2_photo.cs 205 </li></ul><br>  O pr√≥ximo exemplo √© um pouco semelhante ao anterior. <br><br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3066</a> Poss√≠vel ordem incorreta de argumentos transmitida para o m√©todo 'calib3d_Rodrigues_MatToVec': 'matrixM.CvPtr' e 'vectorM.CvPtr'.  Cv2_calib3d.cs 86 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Rodrigues</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[,] matrix, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] vector, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[,] jacobian</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jacobianM = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mat&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;()) { NativeMethods.calib3d_Rodrigues_MatToVec (matrixM.CvPtr, vectorM.CvPtr, jacobianM.CvPtr); .... } }</code> </pre> <br>  Vejamos os par√¢metros do m√©todo <i>calib3d_Rodrigues_MatToVec</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calib3d_Rodrigues_MatToVec</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> IntPtr vector, IntPtr matrix, IntPtr jacobian</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  Parece que o m√©todo <i>calib3d_Rodrigues_MatToVec</i> √© chamado com os argumentos <i>matrixM.CvPtr</i> e <i>vectorM.CvPtr</i> trocados acidentalmente.  Os autores devem verificar este trecho: pode haver um erro que dificulta os c√°lculos corretos. <br><br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3063</a> Uma parte da express√£o condicional √© sempre falsa se for avaliada: data == null.  Mat.cs 3539 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckArgumentsForConvert</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(data)); MatType t = Type(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || (data.Length * dataDimension) <span class="hljs-comment"><span class="hljs-comment">// &lt;= (data.Length * dataDimension) % t.Channels != 0) .... }</span></span></code> </pre> <br>  O analisador relata que os <i>dados</i> da segunda verifica√ß√£o <i>== null</i> nunca ser√£o <i>verdadeiros,</i> porque se os <i>dados</i> forem iguais a <i>nulos</i> na primeira condi√ß√£o, uma exce√ß√£o ser√° gerada e a execu√ß√£o nunca alcan√ßar√° a segunda verifica√ß√£o. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/c1/b1/xf/c1b1xfih5imz4n4cifsucaqzrrw.png" alt="Figura 7"></div><br>  <i>Eu sei que voc√™ est√° cansado, mas estamos quase terminando.</i> <br><br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3127</a> Dois fragmentos de c√≥digo semelhantes foram encontrados.  Talvez seja um erro de digita√ß√£o e a vari√°vel 'window' deva ser usada em vez de 'src2' Cv2_imgproc.cs 1547 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Point2d </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PhaseCorrelateRes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (src1 == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(src1)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (src2 == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(src2)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (window == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(src2)); <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... }</span></span></code> </pre> <br>  O analisador detectou um erro de digita√ß√£o neste trecho.  As vari√°veis ‚Äã‚Äãs√£o verificadas como <i>nulas</i> e, se verdade, cada verifica√ß√£o gera uma exce√ß√£o.  No entanto, ele n√£o funciona corretamente para a vari√°vel da <i>janela</i> .  Se seu valor for igual a <i>nulo</i> , tamb√©m ser√° lan√ßada uma exce√ß√£o correspondente, mas com o texto incorreto.  N√£o mencionar√° <i>janela</i> ;  ser√° <i>src2</i> .  Aparentemente, a condi√ß√£o deve ser revisada da seguinte maneira: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (window == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(window));</code> </pre> <br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3142</a> C√≥digo inacess√≠vel detectado.  √â poss√≠vel que haja um erro.  MatOfT.cs 873 <br><br>  Agora, apenas para variar, vamos dar uma olhada no caso em que o analisador est√° tecnicamente correto quanto ao c√≥digo inacess√≠vel, mas na verdade n√£o h√° erro.  √â um aviso que pode ser chamado de verdadeiro e falso ao mesmo tempo. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> new Mat&lt;TElem&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SubMat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Range[] ranges</span></span></span><span class="hljs-function">)</span></span> { Mat result = <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.SubMat(ranges); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Wrap(result); }</code> </pre> <br>  O analisador nos diz que a declara√ß√£o de <i>retorno</i> √© inacess√≠vel.  Vejamos o corpo do m√©todo <i>SubMat</i> para ver se o analisador est√° dizendo a verdade. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Mat </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SubMat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Range[] ranges</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotImplementedException(); <span class="hljs-comment"><span class="hljs-comment">/* if (ranges == null) throw new ArgumentNullException(); ThrowIfDisposed(); CvSlice[] slices = new CvSlice[ranges.Length]; for (int i = 0; i &lt; ranges.Length; i++) { slices[i] = ranges[i]; } IntPtr retPtr = NativeMethods.core_Mat_subMat1(ptr, ranges.Length, ranges); Mat retVal = new Mat(retPtr); return retVal;*/</span></span> }</code> </pre> <br>  Como voc√™ pode ver, a fun√ß√£o est√° incompleta no momento e sempre lan√ßar√° uma exce√ß√£o.  O analisador est√° absolutamente correto apontando o c√≥digo inacess√≠vel - mas n√£o √© um bug genu√≠no. <br><br>  Os pr√≥ximos tr√™s defeitos s√£o do mesmo tipo, mas s√£o t√£o legais que n√£o pude deixar de incluir os tr√™s. <br><br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A</a> express√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> 'String.IsNullOrEmpty ("winName")' √© sempre falsa.  Cv2_highgui.cs 46 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> winName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (String.IsNullOrEmpty(<span class="hljs-string"><span class="hljs-string">"winName"</span></span>)) .... }</code> </pre> <br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A</a> express√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> 'string.IsNullOrEmpty ("fileName")' √© sempre falsa.  FrameSource.cs 37 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> FrameSource </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateFrameSource_Video</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(<span class="hljs-string"><span class="hljs-string">"fileName"</span></span>)) .... }</code> </pre> <br>  <b>Mensagem de diagn√≥stico do PVS-Studio:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A</a> express√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> 'string.IsNullOrEmpty ("fileName")' √© sempre falsa.  FrameSource.cs 53 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> FrameSource </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateFrameSource_Video_CUDA</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(<span class="hljs-string"><span class="hljs-string">"fileName"</span></span>)) .... }</code> </pre> <br>  √Äs vezes, os avisos do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> (sobre express√µes sempre verdadeiras / falsas) apontam para erros realmente estranhos ou engra√ßados.  Todos os tr√™s exemplos acima t√™m o mesmo erro neles.  O m√©todo possui um par√¢metro do tipo <i>string</i> cujo valor deve ser verificado.  No entanto, o que √© verificado √© uma literal de cadeia de caracteres cujo texto √© o nome da vari√°vel, ou seja, o nome da vari√°vel entre aspas. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mk/rr/fm/mkrrfmqeimdl5l_osrff2p-ime4.png" alt="Figura 18"></div><br>  O programador deve ter escrito um bloco de c√≥digo com defeito uma vez e depois o clonado atrav√©s de copiar e colar. <br><br><h2>  Conclus√£o </h2><br>  Os desenvolvedores do OpenCvSharp fizeram um trabalho grande e importante e, como usu√°rio de sua biblioteca, sou totalmente grato por isso.  Obrigado pessoal! <br><br>  Mas agora que me tornei parte da equipe do PVS-Studio e vi o c√≥digo da biblioteca, devo dizer que o aspecto da qualidade n√£o recebeu a devida aten√ß√£o.  O projeto n√£o parece ser um verificado regularmente com analisadores est√°ticos, e muitos dos bugs s√£o aparentemente corrigidos usando t√©cnicas mais caras (como testes ou feedback do usu√°rio), e alguns deles continuam vivendo dentro do c√≥digo e s√£o eles. que pegamos com nosso analisador.  Este assunto √© discutido em mais detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">neste pequeno post</a> sobre a filosofia da an√°lise est√°tica. <br><br>  Como o OpenCvSharp √© de c√≥digo aberto e dispon√≠vel gratuitamente no GitHub, seus autores podem usar uma das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">op√ß√µes de licenciamento gratuitas do</a> PVS-Studio para come√ßar a us√°-lo regularmente. <br><br>  Obrigado pela leitura.  N√£o hesite em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">baixar</a> uma c√≥pia de avalia√ß√£o do PVS-Studio para verificar seus pr√≥prios projetos. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473478/">https://habr.com/ru/post/pt473478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473456/index.html">A √∫ltima fronteira de controle de qualidade de defesa: detec√ß√£o autom√°tica de erros</a></li>
<li><a href="../pt473460/index.html">Para a quest√£o da matem√°tica</a></li>
<li><a href="../pt473462/index.html">Semana 44 de seguran√ßa: NordVPN, TorGuard e Half Hack</a></li>
<li><a href="../pt473470/index.html">GitLab 12.4 com solicita√ß√£o aprimorada de mesclagem e depend√™ncias da API de auditoria</a></li>
<li><a href="../pt473476/index.html">Verificando o wrapper OpenCvSharp sobre o OpenCV com o PVS-Studio</a></li>
<li><a href="../pt473482/index.html">Os sucessos da campanha saudita, Halloween-PR e um pouco sobre as campanhas publicit√°rias da Japan Airlines</a></li>
<li><a href="../pt473484/index.html">Curso C ++ no CS Center, segunda parte</a></li>
<li><a href="../pt473488/index.html">Navega√ß√£o entre plataformas: por que o NavController derrotou o angular / roteador no Ionic 4</a></li>
<li><a href="../pt473490/index.html">Por que os principais f√≠sicos adoram a teoria das cordas</a></li>
<li><a href="../pt473500/index.html">Aplicativo no TSD e comunica√ß√£o com 1C: Enterprise 8.3 atrav√©s do servi√ßo HTTP. Parte 1 (escolhendo um m√©todo de troca. Descri√ß√£o da API)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>