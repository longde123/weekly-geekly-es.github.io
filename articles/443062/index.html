<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ∑Ô∏è üßù ü§∞üèæ ¬°C√≥mo cre√© Reciclar! VR ‚ò†Ô∏è üìº üôçüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el art√≠culo anterior, intentamos crear una escena b√°sica en A-Frame para probar los conceptos b√°sicos del marco en la pr√°ctica. En este art√≠culo, m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬°C√≥mo cre√© Reciclar! VR</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443062/"><img src="https://habrastorage.org/webt/zw/1k/9x/zw1k9xfuttgxodgleuo-ksko4nq.png"><br><br>  En el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior,</a> intentamos crear una escena b√°sica en A-Frame para probar los conceptos b√°sicos del marco en la pr√°ctica.  En este art√≠culo, me gustar√≠a compartir mi experiencia en la creaci√≥n de un juego en A-Frame - ¬°Reciclar!  VR  El repositorio del proyecto est√° disponible en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">siguiente enlace</a> . <br><br><h2>  Reciclaje! </h2><br>  La idea de crear un juego surgi√≥ casi de inmediato tan pronto como me enter√© de Web VR.  Aunque en general, creo que los juegos en la web en cualquier caso ser√°n inferiores a los buenos proyectos incluso para dispositivos m√≥viles, sin mencionar las computadoras personales y las consolas.  Pero, me parece, el juego es la prueba m√°s dif√≠cil.  Empec√© a pensar exactamente en lo que puedo hacer.  Vi otros proyectos e inmediatamente me sorprendi√≥ la oportunidad de tomar algo usando el controlador.  Y dado que he estado conectado con una organizaci√≥n que se dedica a la recolecci√≥n de basura por separado durante bastante tiempo, la respuesta vino por s√≠ sola.  Reciclaje  Tomamos la basura y la tiramos a la basura.  ¬øQu√© podr√≠a ser m√°s f√°cil?  Pero todo result√≥ no ser tan simple, y esto, de hecho, se discutir√° m√°s a fondo. <br><a name="habracut"></a><br><h2>  Selecci√≥n de marco </h2><br>  En el momento del inicio del trabajo en el juego, solo conoc√≠a 2 marcos m√°s o menos serios: React 360, A-Frame.  Obviamente, A-Frame fue el m√°s adecuado para crear el juego.  S√≠, ahora s√© que todav√≠a hay un motor de juego PlayCanvas que tambi√©n admite VR, pero es demasiado tarde.  Adem√°s, result√≥ que A-Frame tampoco es malo para crear juegos. <br><br><h2>  Por donde empezar </h2><br>  Comenc√© estudiando ejemplos oficiales de juegos de desarrolladores de A-Frame.  El beneficio de estos no es suficiente.  A-Blast, A-Painter, Museum, Super Craft y ahora tambi√©n Gunters of Oasis.  De todos los proyectos presentados, me gust√≥ m√°s A-Blast, un juego de disparos en el que tienes que luchar con las criaturas m√°s lindas del universo.  Por lo tanto, quer√≠a tomar este juego como plantilla para el m√≠o.  Pero no funcion√≥.  Y la raz√≥n de esto fue la estructura del juego.  Me pareci√≥ que estaba demasiado abarrotada y no pensada.  Quiz√°s no se requiera m√°s, pero quer√≠a hacer algo m√°s conveniente y m√°s f√°cil de entender. <br><br><h2>  Estructura </h2><br>  La estructura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">A-Blast</a> representa solo un punto de entrada: el archivo index.html, que contiene una escena con todos los activos, entidades b√°sicas del juego, controles y todo en general. <br><br><img src="https://habrastorage.org/webt/_t/gy/cv/_tgycvogik29i2jemys2srlpuuy.png"><br><br>  Como puede ver en la captura de pantalla, adem√°s de los componentes y sistemas necesarios (A-Frame usa el patr√≥n Entity Component System), tambi√©n hay balas y enemigos, esencialmente los mismos sistemas, pero por alguna raz√≥n tienen su propio contenedor.  Generalmente diga que este c√≥digo no es f√°cil de entender.  As√≠ que decid√≠ pensar c√≥mo se puede estructurar este c√≥digo.  La primera idea es dividir la escena en sus partes constituyentes.  ¬øPor qu√© ser√≠an √∫tiles un enrutador y plantillas, que representar√≠an esta o aquella parte de la escena?  Despu√©s de buscar el primero y el segundo (no, no cinco minutos), no encontr√© nada.  Aunque soy partidario de la regla, no escribo bicicletas, pero esta vez tuve que escribir mi decisi√≥n.  Aunque, en 2-3 semanas, encontr√© plantillas de Kevin Ngo.  Pero ya era demasiado tarde. <br><br><h2>  Router y patrones </h2><br><img src="https://habrastorage.org/webt/sp/bm/tn/spbmtnkznus5jjfffyvhjys6xvg.gif"><br><br>  Y as√≠, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">a-frame-router-templates</a> entra en escena.  Que puede hacer el?  Como se mencion√≥ anteriormente, su tarea principal es representar las partes necesarias del juego, por ejemplo, la pantalla de t√≠tulo, el campo de juego, la pantalla final del juego, etc.  Como hacerlo  En principio, puede encontrar todo lo que necesita en la documentaci√≥n del m√≥dulo en github, pero en resumen, tenemos lo siguiente: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">router</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Routes --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start-screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start-screen"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-field"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-field"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-over"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-over"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"how-to-play"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"how-to-play"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- End Routes --&gt;</span></span> ... <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Templates --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- End Templates --&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><ol><li>  Estamos agregando el componente del enrutador a la escena. </li><li>  Agregue una ruta para cada parte de la aplicaci√≥n (fotogramas de la escena).  Una ruta para la pantalla de inicio, otra para el campo de juego, etc. </li><li>  Renderizar plantillas directamente a trav√©s de a-templates </li><li>  Si es necesario, cambiamos rutas a trav√©s de <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.el.systems.router.changeRoute(<span class="hljs-string"><span class="hljs-string">'game-field'</span></span>);</code> </pre> <br>  <b>Nota</b> : este ejemplo se refiere al c√≥digo de escena, por lo que podemos llamar al sistema del enrutador directamente. </li><li>  Configuramos y conectamos las plantillas, algo como esto: <br><br><pre> <code class="javascript hljs">AFRAME.registerTemplate(<span class="hljs-string"><span class="hljs-string">'game-field'</span></span>, <span class="hljs-string"><span class="hljs-string">` &lt;a-sub-assets&gt; &lt;a-asset-item id="glass" src="/assets/models/glass_bottle.gltf"&gt;&lt;/a-asset-item&gt; ... &lt;audio id="fail" src="/assets/sounds/fail.wav" preload&gt;&lt;/audio&gt; &lt;/a-sub-assets&gt; &lt;a-template name="button" options="text: EXIT; position: 0 1 4; rotation: 0 180 0; event: stop-game"&gt;&lt;/a-template&gt; &lt;a-entity id="indicator" indicator visible="false" position="0 1 -2" text="align: center; width: 4; color: #00A105; value: -1" &gt;&lt;/a-entity&gt; &lt;a-entity game-field-manager&gt;&lt;/a-entity&gt; `</span></span>);</code> </pre><br>  <b>Nota:</b> los activos secundarios le permiten cargar activos as√≠ como activos activos, pero solo con la diferencia de que hay una verificaci√≥n por defecto y si el activo ya est√° agregado, no se agregar√° nuevamente cuando se cambie la ruta. <br><br>  <b>Nota 2:</b> Normalmente, puede usar plantillas solo con la cadena de plantilla ES6.  De lo contrario, puede convertirse en "cadena" + var + "cadena", no genial.  Kevin, por ejemplo, tiene soporte para motores de plantillas.  Pero por qu√© complicarlo, ¬øverdad? <br></li></ol><br>  Por lo tanto, puede crear una estructura de aplicaci√≥n conveniente que contendr√° lo siguiente: <i>componentes, sistemas, plantillas, estados, libs</i> .  Nada m√°s y todo est√° en los estantes. <br><br><h2>  Manipulando objetos </h2><br><img src="https://habrastorage.org/webt/zm/m1/i3/zmm1i3r-m5no1cptxljmjcwr88u.gif"><br><br>  La primera tarea que deb√≠a resolverse era la manipulaci√≥n de objetos.  Necesitaba un funcional como agarrar - lanzar.  Inicialmente, comenc√© a reflexionar sobre c√≥mo crear tal componente desde cero.  Puramente a nivel filisteo, tal reflexi√≥n es permisible: tenemos un controlador (en el caso de un escritorio es un cursor), tiene una posici√≥n.  Tambi√©n tenemos ciertos objetos, por ejemplo cubos, tambi√©n tienen una posici√≥n.  Al cambiar la posici√≥n del controlador, debemos cambiar la posici√≥n del objeto.  Es simple?  Entonces, en realidad, s√≠, pero no funcionar√°.  Mencionar√© un par de puntos de una lista muy larga para convencerlo de esto: <br><br><ul><li>  El cursor en A-Frame es un descendiente de una c√°mara y tiene coordenadas relativas; </li><li>  La posici√≥n del controlador no es suficiente, a√∫n debe considerar la orientaci√≥n, la distancia al objeto, la posici√≥n de la c√°mara (reproductor); </li><li>  Para objetos con un cuerpo f√≠sico, esto no funcionar√° en absoluto, porque las coordenadas de la geometr√≠a est√°n conectadas con las coordenadas del cuerpo. </li></ul><br>  Es bueno que el buen Sr. Wil Murphy y sus amigos hicieran <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un marco de super manos</a> .  En esencia, esta biblioteca contiene todos los componentes necesarios: <br><br><ul><li>  <b>hoverable</b>  Orientaci√≥n  Apunte el controlador o cursor sobre la zona de colisi√≥n del objeto (generalmente todo el objeto) </li><li>  <b>capturable</b> : captura.  Agarra un objeto usando el bot√≥n apropiado y arr√°stralo </li><li>  <b>estirable</b> : agarre con ambas manos y estire \ exprima </li><li>  <b>arrastrable \ dropable</b> : Esencialmente necesario para determinar el evento "el elemento fue arrojado a una ubicaci√≥n espec√≠fica" </li></ul><br>  Puede encontrar todo lo que necesita sobre la configuraci√≥n y conexi√≥n de super-manos en el repositorio mencionado anteriormente.  Solo quiero llamar la atenci√≥n sobre una serie de matices: <br><br><ul><li>  Crea mixins separados para la mano derecha e izquierda.  Componentes separados por tipo de dispositivos compatibles.  Por ejemplo, la mano derecha, adem√°s de oculus-touch, vive-controls, windows-motion-controls tambi√©n puede ser oculus-go-controls y gear-vr-controls.  La mano izquierda debe estar oculta para los cascos m√≥viles BP.  Cada controlador debe contener ambas manos mixinas y un componente de super manos.  <a href="">Un ejemplo</a> ; </li><li>  Si especific√≥ objetos: .clsname para reycaster, no olvide agregarlo a cada elemento que pueda tomarse usando el controlador, de lo contrario, no fallar√° ning√∫n evento para super-manos.  Por supuesto, si <i>colliderEvent: raycaster-intersection</i> ; </li><li>  Arrastrar con el mouse proyecta coordenadas 2D en el mundo 3D, por lo que es mejor usar el cursor para el escritorio. </li></ul><br><h2>  A√±adir f√≠sica </h2><br>  Agregar f√≠sica a un marco es en realidad muy simple.  Hay un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sistema especial</a> para esto.  Se agrega a la escena y listo, la f√≠sica ya est√° en tu bolsillo. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physics</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"debug: false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dynamic-body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 1 -2"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"floor"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">static-body</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>Marca</b> : <i>debug: true</i> permite ver cuerpos f√≠sicos ligados a la geometr√≠a.  Es conveniente cuando necesita "delinear" un objeto. <br><br>  De hecho, este es un envoltorio para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cannon.js</a> que hace todo el trabajo sucio de comparar geometr√≠a y cuerpos f√≠sicos por usted.  Nuevamente, sobre c√≥mo funciona este sistema, puede encontrarlo en la descripci√≥n del repositorio.  Y me gustar√≠a detenerme en un solo punto que es importante para mi juego. <br><br>  Necesitaba asegurarme de que al presionar el bot√≥n de la basura se estableciera una determinada fuerza (cuanto m√°s se mantiene presionado el bot√≥n, mayor es la fuerza).  Al final result√≥ que, esta tarea no es tan simple como parece a primera vista.  Bueno, ¬øqu√© es tan complicado?  - usted dice, <i>aplicamos Impluse</i> y listo.  En realidad no ... Establece la rotaci√≥n de un objeto a lo largo de un vector aplicado al centro del cuerpo.  Usando este m√©todo, solo podemos emular un yule.  Sin embargo, si establece un vector con el √°ngulo correcto con respecto al plano, puede obtener algo similar a un empuje.  Pero esto no es lo que necesitaba. <br><br>  Al final result√≥ que necesitaba velocidad al configurar este par√°metro, el objeto comienza su movimiento en una direcci√≥n determinada.  Esta direcci√≥n est√° especificada por el vector.  Y aqu√≠ comienza la diversi√≥n.  ¬øC√≥mo encontrar este vector?  Encontr√© dos opciones: <br><br><ol><li>  Obtenga el cuaterni√≥n del controlador (o c√°mara para el escritorio), que describe su orientaci√≥n en el espacio.  Cree un vector V1 = &lt;1,1,1&gt;, multipl√≠quelo por la fuerza de lanzamiento y aplique la orientaci√≥n a todo esto. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> velocityVector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Vector3(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); velocityVector.multiplyScalar(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force); velocityVector.applyQuaternion(controllerQuaternion); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.grabbed.body.velocity.set(velocityVector.x, velocityVector.y, velocityVector.z);</code> </pre></li><li>  Encuentre la posici√≥n del controlador (cursor) y la posici√≥n del objeto que se est√° lanzando.  Calcule el vector de direcci√≥n para dos puntos.  Normalizar el vector.  Y multipl√≠calo por la fuerza. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> directionX = (trashPosition.x - zeroPosition.x); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> directionZ = (trashPosition.z - zeroPosition.z); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vectorsLength = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sqrt(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(directionX, <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(directionZ, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = (directionX / vectorsLength) * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> z = (directionZ / vectorsLength) * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.grabbed.body.velocity.set(x , y, z );</code> </pre></li></ol><br>  Eleg√≠ la segunda opci√≥n porque solo puedo contar x y z.  Y config√∫relo usted mismo, ya que necesitaba un lanzamiento a lo largo del arco para que la basura arrojada cayera en la canasta, a pesar del usuario que sosten√≠a el controlador. <br><br><h2>  Algunas palabras sobre el modelo. </h2><br><img src="https://habrastorage.org/webt/vt/fl/e9/vtfle9xqpvbpak4i2su4fusxplk.png"><br><br>  Desde el principio, decid√≠ hacer un juego de estilo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">low-poly</a> .  Aunque WebGL es capaz de representar escenas relativamente complejas en la actualidad, su rendimiento sigue siendo inferior al de las bibliotecas avanzadas como DirectX, Vulkan, Mantle, etc. Tambi√©n depende del rendimiento del dispositivo del usuario.  Como me gustar√≠a centrarme en los cascos m√≥viles BP m√°s asequibles (Oculus Go, Gear VR), creo que low-poly es una de las pocas soluciones para crear una aplicaci√≥n o juego de realidad virtual.  Aunque, por supuesto, todo depende del volumen. <br><br>  De acuerdo, low-poly es muy low-poly, pero ¬øc√≥mo hacerlo todo?  Todo es muy simple, hay una buena herramienta de c√≥digo abierto: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Blender</a> .  Cr√©eme, √©l es capaz de mucho, pero para tareas simples no es del todo adecuado.  Hay muchos materiales de capacitaci√≥n relacionados con el modelado en Blender y no ser√° dif√≠cil encontrarlos.  Solo quer√≠a centrar su atenci√≥n en una serie de puntos relacionados con el desarrollo web: <br><br><ol><li>  El exportador Three-js no est√° actualizado.  Necesidad de encontrar y suministrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">exportador GLTF</a> .  GLTF es un formato especial dise√±ado para la web.  Y s√≠, este es JSON. </li><li>  GLTF no es compatible con Cycles Renderer, por lo que debe usar Blender Renderer.  Y esto significa que no habr√° nudos geniales, transformaciones de color, reflejos met√°licos (se puede hacer de manera diferente). </li><li>  Necesita exportar solo el elemento seleccionado.  ¬øNo necesitas c√°maras y luces adicionales?  Archivo&gt; Exportar&gt; gltf 2.0.  En el men√∫ de la izquierda, Exportar GLTF 2.0&gt; Exportar solo seleccionado. </li><li>  Comenzamos a exportar desde la posici√≥n &lt;0, 0, 0&gt; en Blender.  Es mejor escalar en el mismo lugar para que luego no use el componente de escala en un marco. </li><li>  Si dibujas espacios abiertos como en Reciclar!  VR, solo debes agregar objetos donde el jugador pueda mirar te√≥ricamente.  Detr√°s, detr√°s de las casas, en el Reciclaje!  hay un par de √°rboles y solo en el lugar donde el usuario puede verlos.  No es necesario sobrecargar la escena. </li><li>  Si necesita cambiar el material del modelo, debe esperar hasta que se cargue, obtener el modelo en s√≠, extraer todos los nodos (GLTF contiene informaci√≥n no solo sobre mallas) <br><br><pre> <code class="javascript hljs">e.detail.model.traverse(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.isMesh) { node.material.color = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Color(someColor); } });</code> </pre></li></ol><br><h2>  En conclusi√≥n </h2><br>  ¬°Gracias a todos por su atenci√≥n!  Les recuerdo una vez m√°s que el repositorio del proyecto est√° disponible en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">siguiente enlace</a> .  Cualquiera que quiera aportar algo nuevo a este juego, bienvenido. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443062/">https://habr.com/ru/post/443062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443052/index.html">Hermoso reloj preciso de un viejo tel√©fono inteligente</a></li>
<li><a href="../443054/index.html">Una selecci√≥n de utilidades para un programador en Linux</a></li>
<li><a href="../443056/index.html">Segundo paciente con VIH alcanza la remisi√≥n</a></li>
<li><a href="../443058/index.html">Arquitectura limpia Parte I - Introducci√≥n</a></li>
<li><a href="../443060/index.html">¬øLa nave espacial llegar√° a Marte?</a></li>
<li><a href="../443064/index.html">La sonda israel√≠ vuela a la luna</a></li>
<li><a href="../443066/index.html">S√≥crates en el amor: quien realmente sent√≥ las bases de la filosof√≠a occidental</a></li>
<li><a href="../443070/index.html">Sobre ideas prematuras y oportunas sobre el ejemplo de los hermanos Gracchus</a></li>
<li><a href="../443080/index.html">Los discos duros en computadoras port√°tiles y de escritorio pueden ser una fuente de escucha de conversaciones de personas cercanas</a></li>
<li><a href="../443082/index.html">¬øPor qu√© no debes mirar a los dem√°s cuando aprendes un idioma?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>