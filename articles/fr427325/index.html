<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ûñ üßÄ üë®üèº‚Äçüé§ D√©marrage rapide avec WPF. Partie 1. Liaison, INotifyPropertyChanged et MVVM üç§ üìã üâë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! 


 Pour diverses raisons, la plupart d'entre nous utilisons des applications de bureau, au moins un navigateur :) Et certains d'entre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©marrage rapide avec WPF. Partie 1. Liaison, INotifyPropertyChanged et MVVM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427325/"><p>  Bonjour √† tous! </p><br><p> Pour diverses raisons, la plupart d'entre nous utilisons des applications de bureau, au moins un navigateur :) Et certains d'entre nous doivent √©crire les n√¥tres.  Dans cet article, je veux passer en revue le processus de d√©veloppement d'une simple application de bureau utilisant la technologie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Windows Presentation Foundation (WPF)</a> et appliquant le mod√®le MVVM.  Ceux qui souhaitent continuer √† lire, s'il vous pla√Æt, sous cat. <a name="habracut"></a></p><br><p>  Je pense qu‚Äôil n‚Äôest pas n√©cessaire de dire que WPF est le d√©veloppement de Microsoft :) Cette technologie est con√ßue pour d√©velopper des applications de bureau pour Windows, √† commencer par Windows XP.  Pourquoi  Cela est d√ª au fait que WPF s'ex√©cute au-dessus de la plate-forme .NET, dont la configuration minimale requise est Windows XP et versions ult√©rieures.  Malheureusement, WPF ne fonctionne pas sur d'autres plates-formes, bien qu'il y ait des chances que cela change dans un proche avenir: le cadre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avalonia</a> bas√© sur WPF est en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cours de d√©veloppement</a> . </p><br><h4 id="v-chyom-osobennost-wpf">  Quelle est la particularit√© de WPF? </h4><br><p>  Deux diff√©rences principales entre WPF et d'autres outils de cr√©ation de bureau: </p><br><ul><li>  Le langage de balisage XAML pour marquer l'interface de fen√™tre elle-m√™me. </li><li>  Rendu via DirectX, acc√©l√©ration graphique mat√©rielle. </li></ul><br><p>  Je n'entrerai pas dans les d√©tails, car  ce n'est pas tout √† fait le sujet de l'article.  Si vous √™tes int√©ress√©, alors google XAML, rendu WPF, milcore.dll et DirectX :) </p><br><h4 id="o-chyom-eta-statya">  De quoi parle cet article? </h4><br><p>  Cet article contient un exemple d'application bas√© sur la technologie WPF: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Interface MVVM et INotifyPropertyChanged.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Copie du texte.</a> </li></ul><br><p>  Je vais essayer d'orienter le mat√©riau de l'article dans une direction pratique dans le style de ¬´r√©p√©ter apr√®s moi¬ª avec des explications. </p><br><h4 id="chto-nam-ponadobitsya-dlya-povtoreniya-stati">  De quoi avons-nous besoin pour r√©p√©ter l'article? </h4><br><p>  Petite exp√©rience de d√©veloppement en C # :) Au minimum, vous devez bien comprendre la syntaxe du langage.  Vous aurez √©galement besoin d'une machine Windows (Win 10 dans les exemples) sur laquelle Visual Studio est install√© (dans les exemples, ce sera 2017, il existe une version <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">communautaire</a> gratuite).  Lors de l'installation de VS, vous devrez activer la prise en charge du d√©veloppement de bureau pour la plate-forme .NET </p><br><p><img src="https://habrastorage.org/webt/g2/uf/ea/g2ufeaboqvhjvklpzn29cx45w3c.png" alt="image"></p><br><p>  Dans cette section, je d√©crirai √©galement la cr√©ation d'un projet. </p><br><p>  Nous lan√ßons VS, cr√©ons un nouveau projet, s√©lectionnons le type d'application WPF App (.NET Framework) (vous pouvez le saisir dans la barre de recherche en haut √† droite), nommez-le. </p><br><p><img src="https://habrastorage.org/webt/jb/mo/gu/jbmoguoemuje0em1g2gbofodsns.png" alt="image"></p><br><p>  Apr√®s avoir cr√©√© un nouveau projet, la fen√™tre de l'√©diteur d'interface s'ouvre, √ßa ressemble √† √ßa pour moi </p><br><p><img src="https://habrastorage.org/webt/2d/tn/do/2dtndo0yii6z78g-1avlkglqoew.jpeg" alt="image"></p><br><p>  En bas, il y a un √©diteur de mise en page, en haut, il y a un aper√ßu de l'interface de la fen√™tre, mais vous pouvez changer l'emplacement relatif de l'√©diteur de code et de l'aper√ßu de l'interface afin qu'ils soient situ√©s dans l'ordre horizontal √† l'aide de ces boutons (√† droite de la bordure des deux zones): </p><br><p><img src="https://habrastorage.org/webt/m8/xl/fo/m8xlfoleczsfra-w8yskkxg9ko4.png" alt="image"></p><br><h4 id="pered-tem-kak-nachat">  Avant de commencer </h4><br><p>  Les √©l√©ments de fen√™tre (ils sont √©galement appel√©s contr√¥les du mot <strong>Contr√¥le</strong> ) doivent √™tre plac√©s √† l'int√©rieur du conteneur ou √† l'int√©rieur d'un autre √©l√©ment du type ContentControl.  <strong>Un conteneur</strong> est un contr√¥le sp√©cial qui vous permet de placer plusieurs contr√¥les enfants √† l'int√©rieur et d'organiser leur disposition mutuelle.  Exemples de conteneurs: </p><br><ul><li>  <strong>Grille</strong> - vous permet d'organiser les √©l√©ments par colonnes et lignes, la largeur de chaque colonne ou ligne est configur√©e individuellement. </li><li>  <strong>StackPanel</strong> - vous permet d'organiser les enfants sur une seule ligne ou colonne. </li></ul><br><p>  Il y a d'autres conteneurs.  √âtant donn√© que le conteneur est √©galement un contr√¥le, √† l'int√©rieur du conteneur, il peut y avoir des conteneurs imbriqu√©s contenant des conteneurs imbriqu√©s, etc.  Cela vous permet d'organiser de mani√®re flexible les contr√¥les les uns par rapport aux autres.  De plus, √† l'aide de conteneurs, nous pouvons tout aussi facilement contr√¥ler le comportement des contr√¥les imbriqu√©s lors du redimensionnement d'une fen√™tre. </p><br><h4 id="mvvm-i-interfeys-inotifypropertychanged-kopiya-teksta">  Interface MVVM et INotifyPropertyChanged.  Copie du texte. </h4><br><p>  <em>Le r√©sultat de cet exemple sera une application avec deux contr√¥les, dans l'un desquels vous pouvez √©diter le texte, et dans l'autre juste afficher.</em>  <em>Les modifications de l'une √† l'autre seront transf√©r√©es de mani√®re synchrone sans copie explicite du texte √† l'aide de la <strong>liaison</strong> .</em> </p><br><p>  Donc, nous avons un projet fra√Æchement cr√©√© (je l'ai nomm√© <strong>Ex1</strong> ), allez dans l'√©diteur de mise en page et remplacez tout d'abord le conteneur par d√©faut ( <strong>&lt;Grid&gt; &lt;/Grid&gt;</strong> ) par <strong>&lt;StackPanel&gt; &lt;/StackPanel&gt;</strong> .  Ce conteneur sera suffisant, car  nous devrons placer seulement deux contr√¥les l'un au-dessus de l'autre.  Nous sp√©cifions explicitement la disposition des composants en ajoutant la propri√©t√© <strong>Orientation = "Vertical"</strong> .  Ajoutez quelques √©l√©ments √† l'int√©rieur de la pile de panneaux: un champ pour saisir du texte et un champ pour afficher du texte.  √âtant donn√© que ces contr√¥les ne contiendront pas de code incorpor√©, vous pouvez les d√©crire avec une balise √† fermeture automatique (voir le code ci-dessous).  Apr√®s toutes les proc√©dures ci-dessus, le code de description du conteneur et les contr√¥les imbriqu√©s doivent prendre la forme suivante: </p><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Vertical"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Concentrons-nous maintenant sur le but de cet exemple.  Nous voulons que lors de la saisie dans la zone de texte, le m√™me texte s'affiche de mani√®re synchrone dans le bloc de texte, tout en √©vitant l'op√©ration de copie explicite.  Nous avons besoin d'une sorte d'entit√© de connexion, et nous arrivons ici √† une chose comme la <strong>liaison</strong> , qui a √©t√© mentionn√©e ci-dessus.  La liaison dans la terminologie WPF est un m√©canisme qui vous permet d'associer certaines propri√©t√©s de contr√¥les √† certaines propri√©t√©s d'un objet de classe C # et de mettre √† jour mutuellement ces propri√©t√©s lorsque l'une des parties du bundle change (cela peut fonctionner dans l'une, l'autre ou les deux directions √† la fois).  Pour ceux qui connaissent Qt, vous pouvez faire une analogie entre les slots et les signaux.  Afin de ne pas √©tirer le temps, passons au code. </p><br><p>  Ainsi, pour organiser la liaison, vous avez besoin des propri√©t√©s des contr√¥les et de certaines propri√©t√©s d'une certaine classe C #.  Tout d'abord, d√©couvrons le code XAML.  Le texte des deux contr√¥les est stock√© dans la propri√©t√© Text, ajoutez donc une liaison pour ces propri√©t√©s.  C'est fait comme ceci: </p><br><pre> <code class="hljs pgsql">&lt;TextBox <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding}"/&gt; &lt;TextBlock <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding}"/&gt;</code> </pre> <br><p>  Nous avons fait une liaison, mais pour l'instant il n'est pas clair pourquoi :) Nous avons besoin d'un objet d'une certaine classe et d'une propri√©t√© dans cet objet auquel la liaison sera faite (comme on dit, √† laquelle vous devez vous lier). </p><br><p>  Alors, quelle est cette classe?  Cette classe est appel√©e mod√®le de vue et sert de lien entre la vue (l'interface ou ses parties) et le mod√®le (mod√®le, c'est-√†-dire les parties du code qui sont responsables de la logique d'application. Cela vous permet de s√©parer (dans une certaine mesure ) la logique d'application de l'interface (vue, vue) est appel√©e le <strong>mod√®le Model-View-ViewModel (MVVM)</strong> . Dans WPF, cette classe est √©galement appel√©e <strong>DataContext</strong> . </p><br><p>  Cependant, il ne suffit pas d'√©crire une classe de mod√®le de vue.  Il est n√©cessaire d'indiquer au m√©canisme de liaison que la propri√©t√© du mod√®le de vue ou la propri√©t√© de vue a chang√©.  Pour ce faire, il existe une interface sp√©ciale <strong>INotifyPropertyChanged</strong> , qui contient l'√©v√©nement <strong>PropertyChanged</strong> .  Nous impl√©mentons cette interface dans le cadre de la classe de base <strong>BaseViewModel</strong> .  √Ä l'avenir, nous h√©riterons de tous nos mod√®les de vue de cette classe de base afin de ne pas dupliquer l'impl√©mentation de l'interface.  Ajoutez donc le r√©pertoire <em>ViewModels</em> au projet et ajoutez le fichier <em>BaseViewModel.cs</em> √† ce r√©pertoire.  Nous obtenons la structure de projet suivante: </p><br><p><img src="https://habrastorage.org/webt/va/yi/sn/vayisnwyoe4gndnwxyp9zip12b4.png" alt="image"></p><br><p>  Code d'impl√©mentation du mod√®le de vue de base: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Ex1.ViewModels</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">)</span></span> { PropertyChanged?.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(propertyName)); } } }</code> </pre> <br><p>  Cr√©ons notre viewmodel pour notre classe <strong>MainWindow</strong> , h√©ritant de celui de base.  Pour ce faire, dans le m√™me r√©pertoire <em>ViewModels</em> , cr√©ez le fichier <em>MainWindowViewModel.cs</em> , dans lequel il y aura un tel code: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Ex1.ViewModels</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindowViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { } }</code> </pre> <br><p>  Super!  Nous devons maintenant ajouter une propri√©t√© √† ce mod√®le de vue, sur laquelle nous lierons le texte de nos contr√¥les.  Comme il s'agit de texte, le type de cette propri√©t√© doit √™tre une <em>cha√Æne</em> : </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SynchronizedText { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br><p>  En cons√©quence, nous obtenons un tel code </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Ex1.ViewModels</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindowViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SynchronizedText { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre> <br><p>  Il semble donc qu'ils l'ont fait.  Il reste √† lier sur cette propri√©t√© de la vue et est pr√™t.  Faisons-le maintenant: </p><br><pre> <code class="hljs pgsql">&lt;TextBox <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText}"/&gt; &lt;TextBlock <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText}"/&gt;</code> </pre> <br><p>  Nishtyak, nous commen√ßons le projet, nous tapons dans la zone de texte iiiii ... rien ne se passe))) Eh bien, √ßa va, en fait nous allons dans le bon sens, nous n'avons tout simplement pas atteint le bon point. </p><br><p>  Je propose de m'arr√™ter un instant et de r√©fl√©chir √† ce qui nous manque.  Nous avons une vue.  Viewmodel aussi.  Des propri√©t√©s comme zabindili.  L'interface souhait√©e est impl√©ment√©e.  Nous avons fait beaucoup de travail pour copier une ligne de texte path√©tique, pourquoi avons-nous besoin de cela ???!?! 111 </p><br><p>  D'accord, blagues √† part.  Nous avons oubli√© de cr√©er un objet de mod√®le de vue et quelque chose d'autre (plus √† ce sujet plus tard).  Nous avons d√©crit la classe elle-m√™me, mais cela ne veut rien dire, car nous n'avons pas d'objets de cette classe.  Ok, o√π avez-vous besoin de stocker un lien vers cet objet?  Plus pr√®s du d√©but de l'exemple, j'ai mentionn√© un certain <em>DataContext</em> utilis√© dans WPF.  Ainsi, toute vue poss√®de une propri√©t√© <strong>DataContext</strong> √† laquelle nous pouvons attribuer un lien √† notre mod√®le de vue.  Faisons-le.  Pour ce faire, ouvrez le fichier <em>MainWindow.xaml</em> et appuyez sur F7 pour ouvrir le code de cette vue.  Il est presque vide, il n'a qu'un constructeur de classe de fen√™tre.  Ajoutez-y la cr√©ation de notre mod√®le de vue et placez-le dans le <strong>DataContext de la</strong> fen√™tre (n'oubliez pas d'ajouter en utilisant l'espace de noms souhait√©): </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.DataContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainWindowViewModel(); }</code> </pre> <br><p>  C'√©tait simple, mais toujours pas suffisant.  Pourtant, lorsque l'application d√©marre, aucune synchronisation de texte ne se produit.  Que faut-il faire d'autre? </p><br><p>  Vous devez d√©clencher l'√©v√©nement <strong>PropertyChanged</strong> lorsque la propri√©t√© <strong>SynchronizedText</strong> change et informer la vue qu'elle doit surveiller cet √©v√©nement.  Donc, pour d√©clencher l'√©v√©nement, modifiez le code du mod√®le de vue: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindowViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _synchronizedText; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SynchronizedText { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; _synchronizedText; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _synchronizedText = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; OnPropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(SynchronizedText)); } } }</code> </pre> <br><p>  Qu'avons-nous fait ici?  Nous avons ajout√© un champ masqu√© pour stocker du texte, l'avons envelopp√© dans une propri√©t√© existante et lorsque nous modifions cette propri√©t√©, nous changeons non seulement le champ masqu√©, mais appelons √©galement la m√©thode <strong>OnPropertyChanged</strong> d√©finie dans le mod√®le de vue de base et <strong>d√©clenchons</strong> l'√©v√©nement <strong>PropertyChanged</strong> d√©clar√© dans l'interface <strong>INotifyPropertyChanged</strong> , √©galement impl√©ment√© dans la base afficher les mod√®les.  Il s'av√®re que chaque fois que le texte est modifi√©, l'√©v√©nement <strong>PropertyChanged</strong> se produit, auquel le nom de la propri√©t√© du mod√®le de vue qui a √©t√© modifi√© est transmis. </p><br><p>  Eh bien, presque tout, la ligne d'arriv√©e!  Il reste √† sp√©cifier la vue qu'il doit √©couter l'√©v√©nement <strong>PropertyChanged</strong> : </p><br><pre> <code class="hljs pgsql">&lt;TextBox <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText, UpdateSourceTrigger=PropertyChanged, Mode=OneWayToSource}"/&gt; &lt;TextBlock <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}"/&gt;</code> </pre> <br><p>  Outre le fait que nous avons indiqu√© par quel d√©clencheur la mise √† jour doit avoir lieu, nous avons √©galement indiqu√© dans quelle direction cette mise √† jour est suivie: d'une vue √† l'autre du mod√®le ou vice versa.  Puisque nous saisissons du texte dans la zone de texte, nous ne sommes int√©ress√©s que par les changements dans la vue, nous s√©lectionnons donc le mode <strong>OneWayToSource</strong> .  Dans le cas du bloc de texte, tout est exactement le contraire: nous nous int√©ressons aux modifications du mod√®le de vue afin de les afficher dans la vue, nous s√©lectionnons donc le mode <strong>OneWay</strong> .  Si nous voulions que les modifications soient suivies dans les deux sens, nous ne pouvions pas du tout sp√©cifier le <strong>mode</strong> , ni sp√©cifier explicitement <strong>TwoWay</strong> . </p><br><p>  Alors, lancez le programme, tapez le texte et voi-la!  Le texte change de fa√ßon synchrone, et nous n'avons rien copi√© nulle part! </p><br><p><img src="https://habrastorage.org/webt/pu/69/jw/pu69jwasrfi2bs43obsaj026rlw.png" alt="image"></p><br><p>  Merci de votre attention, √† suivre.  Nous traiterons du DataTemplate et du mod√®le de commande. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427325/">https://habr.com/ru/post/fr427325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427315/index.html">Salle de lecture Izba ou une s√©lection de litt√©rature professionnelle</a></li>
<li><a href="../fr427317/index.html">Pour r√©ussir dans le domaine de l'informatique ou qu'est-ce qui tue IT'shnikov?</a></li>
<li><a href="../fr427319/index.html">Programmeur de recrutement Gentleman UE4, partie 1</a></li>
<li><a href="../fr427321/index.html">Un casque neuro pour chaque jour - comment il est fabriqu√©, pourquoi il est n√©cessaire et en quoi il va nous transformer</a></li>
<li><a href="../fr427323/index.html">Infrastructure pour microservices. K8 et tout-tout-tout</a></li>
<li><a href="../fr427327/index.html">Architecture MVVM dans les applications mobiles Flutter</a></li>
<li><a href="../fr427329/index.html">IBM franchit une √©tape importante de 7 nanom√®tres en utilisant du graph√®ne pour placer des nanomat√©riaux sur des substrats</a></li>
<li><a href="../fr427333/index.html">Convertir la temp√©rature de couleur (K) en RVB: exemple d'algorithme et de code</a></li>
<li><a href="../fr427335/index.html">Lire les donn√©es d'un ancien disque dur MiniScribe</a></li>
<li><a href="../fr427337/index.html">Puzzles Joker 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>