<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëºüèΩ üöÉ ü•° O que devemos construir nosso riser PCI-E üëºüèæ ‚ÜïÔ∏è üñêüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Era uma vez eu montar um mini-computador para mim. Mas aqui est√° o infort√∫nio - modelagem em 3D e que pecado esconder - brinquedos banais fizeram com ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que devemos construir nosso riser PCI-E</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435086/"><img src="https://habrastorage.org/webt/p2/bj/wm/p2bjwmqo6yot_eufjkklj-p9oqu.jpeg"><br><br>  Era uma vez eu montar um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mini-computador para</a> mim.  Mas aqui est√° o infort√∫nio - modelagem em 3D e que pecado esconder - brinquedos banais fizeram com que essa caixa tivesse muito em que pensar, e eu - em ficar nervosa.  Mas voc√™ n√£o pode simplesmente pegar e conectar uma placa de v√≠deo a ela - existe um slot PCI-E X4, mas n√£o h√° espa√ßo no gabinete.  E n√£o ser√° capaz de fornecer nutri√ß√£o (se n√£o for para falar de plugues absolutamente or√ßament√°rios).  Quais s√£o as op√ß√µes para solucionar esse problema no mercado, o que n√£o combina comigo e o que acabou acontecendo, tentarei descrever neste artigo.  Pe√ßo um gato que n√£o tenha medo de um <b>grande n√∫mero de fotos</b> ! <br><a name="habracut"></a><br><h4>  <font color="#9cc2ce">Pr√≥logo</font> </h4><br>  Para conectar uma placa de v√≠deo, era necess√°rio um riser PCI-E de 4 linhas com fonte de alimenta√ß√£o adicional, com a capacidade de control√°-la se a fonte de alimenta√ß√£o estiver separada.  Portanto, os cabos de loopback habituais e muitos dolorosamente familiares desaparecem imediatamente devido √† minera√ß√£o de um riser com um cabo USB como interface. <br><br><img src="https://habrastorage.org/webt/z3/-v/qf/z3-vqfkmh5u-8rf9nk5d6btibjs.png"><br>  <font color="gray"><i>Produtos a granel com qualidade em massa</i></font> <br><br>  E aqui est√° uma das mais ou menos satisfat√≥rias que minhas consultas podem ser encontradas na vasta rede: <br><br><ul><li>  <u>PE4C V4.1</u> - em primeiro lugar, a placa instalada no slot obviamente n√£o se encaixava no meu PC em termos de dimens√µes.  E os cabos HDMI em si s√£o bem resistentes, e existem 2 deles!  E o pre√ßo de ~ $ 140 me pareceu n√£o muito humano. <br><br><img src="https://habrastorage.org/webt/o_/6f/gp/o_6fgpmt7rycyfm4d6gzqdzrvq8.jpeg"><br></li></ul><br><ul><li>  <u>EXP GDC</u> - havia uma vers√£o para o slot pci-e x4, mas tamb√©m tinha um pre√ßo desumano, 2 cabos HDMI j√° vistos antes.  Agora nem consigo encontrar a foto dela - ela raramente era vendida fora da China.  Mas para o slot pci-e x4, a placa √© ainda maior que a do PE4C <br><br><img src="https://habrastorage.org/webt/5t/lh/5y/5tlh5y3hjqp6ubkdkoasdcbzwt0.jpeg"><br>  <font color="gray"><i>Vers√£o para M2.</i></font>  <font color="gray"><i>E para um slot PCI-E comum, √© como se nada tivesse desaparecido</i></font> <br></li></ul><br><ul><li>  <u>Riser do ADT-Link</u> - no momento do meu lan√ßamento n√£o estava representado.  E agora n√£o h√° muita informa√ß√£o sobre eles.  Mas me pareceu <s>extremamente</s> estranho variar tanto o pre√ßo do dispositivo quanto o comprimento do cabo. <br><br><img src="https://habrastorage.org/webt/wn/ae/nx/wnaenxuhmyhic2x2yeevmleii7g.jpeg"><br></li></ul><br>  N√£o encontrando uma solu√ß√£o adequada para mim, tive que escolher entre duas op√ß√µes - pontuar ou fazer n√≥s mesmos.  √â claro que, para a primeira op√ß√£o, o artigo pode ser conclu√≠do sobre isso, mas provavelmente continuarei. <br><br><h4>  <font color="#9cc2ce">Desenho</font> </h4><br>  Tendo conversado em v√°rias comunidades dedicadas a esse t√≥pico, foi decidido tornar o riser universal, e n√£o apenas para si - para que ele possa se conectar a um laptop (via Mini Pci-E, M2 ou at√© MXM) e a um computador no slot x16 sem restri√ß√£o para apenas 4 linhas de dados ! <br><br>  Aqui est√° a lista de requisitos que eu defini para mim: <br><br><ul><li>  A fonte de alimenta√ß√£o √© apenas 12v.  3.3v recebe no pr√≥prio riser usando um conversor dc-dc. </li><li>  Gerenciamento de energia, independentemente do tipo de PSU usada (gerenciada pelo ATX ou PSU comum a 12v) </li><li>  Conex√£o de v√°rios adaptadores atrav√©s de cabos destac√°veis ‚Äã‚Äãdo mesmo tipo (sem solda). </li><li>  Divida a interface x16 em 4 grupos.  Assim, para a interface x1-x4 - 1 cabo, x8 - 2 cabos e 4 cabos para x16. </li><li>  √Äs vezes, observei uma situa√ß√£o em que uma placa de v√≠deo conectada a um laptop via EXP GDC era fornecida com uma fonte de alimenta√ß√£o de laptop a 19v (existe um conector, √© necess√°rio conect√°-lo) e movi-me para adicionar uma indica√ß√£o da tens√£o de entrada dentro da faixa aceit√°vel: 12v ¬± 5%. </li></ul><br><h4>  <font color="#9cc2ce">Implementa√ß√£o</font> </h4><br>  Lista de desejos descrita, coragem acumulou o suficiente - √© hora de implementar!  O riser √© essencialmente um cabo de extens√£o.  E o cabo √© sua parte principal.  Como tal, foram utilizadas variedades de cabos LVDS - o chamado conjunto de cabos micro coaxiais.  Eles s√£o frequentemente usados ‚Äã‚Äãpara conectar matrizes de exibi√ß√£o de v√°rios dispositivos. <br><br><img src="https://habrastorage.org/webt/pj/er/0f/pjer0feihmdlcf3js7dpts-z_xw.png"><br>  <font color="gray"><i>Cabo nu 18+</i></font> <br><br><img src="https://habrastorage.org/webt/sb/zy/ce/sbzycezhtq51c9qlmn1pow8wva8.png"><br>  <font color="gray"><i>30 n√∫cleos e apenas 2 mm de di√¢metro</i></font> <br><br>  Embora seja extremamente dif√≠cil encontr√°-los √† venda, consegui encontrar um fabricante na China que estava pronto para fabricar esses cabos em qualquer quantidade (at√© 1 pc) de qualquer comprimento e com um conector adequado. <br><br>  Quando a escolha do cabo de interface terminou, finalmente pude desenvolver uma placa riser de placa de circuito e a sele√ß√£o de componentes.  No final, as placas desenvolvidas foram encomendadas, os componentes foram comprados e tudo foi montado: <br><br><img src="https://habrastorage.org/webt/vv/mo/qz/vvmoqzz8uiuk_tpq6kuu3j3gebo.jpeg"><br>  <font color="gray"><i>Topo da placa</i></font> <br><br><img src="https://habrastorage.org/webt/r7/r1/sj/r7r1sjjqoryuinebpfp_vbta-co.jpeg"><br>  <font color="gray"><i>Placa inferior</i></font> <br><br><ol><li>  Conector de alimenta√ß√£o de 8 pinos (corrente m√°xima de 15 A), combinado com o sinal de habilita√ß√£o (para fontes de alimenta√ß√£o ATX) </li><li>  O circuito de exibi√ß√£o da tens√£o de alimenta√ß√£o dentro dos limites aceit√°veis ‚Äã‚Äã(+ 12v ¬± 5%) no comparador de janelas.  LED verde - a voltagem est√° normal, vermelho - fora da faixa </li><li>  Gerenciamento de energia - Mosfet, caso a fonte de energia seja usada sem controle e o sinal PS ON seja emitido.  O sinal de controle √© uma fonte de alimenta√ß√£o de 3,3v no host </li><li>  Abaixe DC \ DC para obter 3.3v </li><li>  Conector do refrigerador </li><li>  Conectores LVDS para cabos de interface </li><li>  Slot PCI-E x16 </li><li>  Prote√ß√£o contra curto-circuito e sobretens√£o - fus√≠vel e diodo TVS. </li><li>  Conectando energia adicional da placa de v√≠deo </li></ol><br>  No outro lado do cabo, a placa adaptadora do slot do dispositivo final: <br><br><img src="https://habrastorage.org/webt/yo/k4/mw/yok4mw0n4kfakoz02-wz0sdkyhc.jpeg"><br><br>  Uma desvantagem significativa dessa solu√ß√£o (como os an√°logos) √© que voc√™ n√£o pode conectar / desconectar rapidamente um riser sem precisar desmontar um laptop / computador.  E os pr√≥prios conectores n√£o se destinam ao uso externo e possuem baixa resist√™ncia mec√¢nica e baixo recurso.  Portanto, fiz aqui adicionalmente um adaptador com conectores mais confi√°veis ‚Äã‚Äã(o pr√≥prio cabo com esses conectores n√£o pode ser fabricado imediatamente ... por um pre√ßo razo√°vel): <br><br><img src="https://habrastorage.org/webt/j4/jz/ww/j4jzwwivpvc5wn2o_ifthhzvmcu.jpeg"><br>  <font color="gray"><i>Conectores similares foram usados ‚Äã‚Äãem esta√ß√µes de acoplamento para smartphones, tablets e outros dispositivos.</i></font> <br><br><img src="https://habrastorage.org/webt/fw/o8/z5/fwo8z5ygz-xrb5rkktvomw-2ljg.jpeg"><br>  <font color="gray"><i>Conex√£o usando 2 cabos, e esses adaptadores os conectam</i></font> <br><br><h4>  <font color="#9cc2ce">Teste</font> </h4><br>  Todos os componentes das placas s√£o soldados, os cabos est√£o conectados - √© hora de cruzar os dedos e testar! <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/rr/0k/k-/rr0kk-g4bbpgdbyh5bqqt921ofw.jpeg"></a> <br>  <font color="gray"><i>Na foto √© um prot√≥tipo e tem diferen√ßas em rela√ß√£o √† vers√£o final.</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/lf/tm/bj/lftmbj8hmxxvdbe4kq8yy9uuqdo.jpeg"></a> <br>  <font color="gray"><i>Como eles se conectaram com 2 cabos de interface, obtivemos o PCI-E x8.</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/lz/tf/hv/lztfhvmz7pevnyjetd92pqlytgq.jpeg"></a> <br>  <font color="gray"><i>Ao passar em v√°rios testes, n√£o houve problemas e a placa de v√≠deo funcionou de maneira est√°vel com carga e a frequ√™ncia do barramento aumentou (gen3)</i></font> <br><br>  Para testar, consegui um laptop com um slot M2 Key M com suporte NVME - MSI GE62 6QD.  Por√©m, para o prot√≥tipo, foi feito um adaptador com teclas M + B para maior versatilidade, portanto, √© poss√≠vel usar apenas 2 linhas de 4 dispon√≠veis: <br><br><img src="https://habrastorage.org/webt/9r/n5/4v/9rn54vaeb-xawf7yk2brqiyqric.jpeg"><br>  <font color="gray"><i>Por ser um prot√≥tipo, o uso de fita isolante e a remo√ß√£o de dc / dc em uma placa separada s√£o bastante apropriados</i></font> <br><br><img src="https://habrastorage.org/webt/fy/sz/sp/fyszspm12mxmhpjypn5tmcn8tig.jpeg"><br>  <font color="gray"><i>Iniciando um laptop com EGPU.</i></font>  <font color="gray"><i>A PSU inicia automaticamente quando voc√™ liga o laptop</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ys/kc/vh/yskcvhwvjr4gpt4peovc6xez95s.jpeg"></a> <br>  <font color="gray"><i>Devido √† presen√ßa de uma placa gr√°fica integrada e discreta no laptop, tive que mexer na instala√ß√£o de drivers</i></font> <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/y1/xc/88/y1xc88bommcd9fphyak-6ypcvra.jpeg"></a> <br>  <font color="gray"><i>Trabalhar sob carga</i></font> <br><br>  Infelizmente, essas gl√¢ndulas estavam √† minha disposi√ß√£o por um tempo muito curto e n√£o pude realizar um teste mais detalhado depois de receber a vers√£o final do riser.  Portanto, era necess√°rio se contentar apenas com esse ferro: <br><br><ul><li>  MP Asus Q87T </li><li>  CPU Core I3 4150T </li><li>  RAM 2 * 4GB DDR3L crucial SO-DIMM PC-12800 </li><li>  Wi-Fi / BT Intel Dual-band Wireless-AC 7260 </li><li>  SSD mSATA de 120GB Crucial M500 </li><li>  HDD 2.5` Seagate Momentus 500GB </li><li>  MSI RX 560 4Gb </li></ul><br><img src="https://habrastorage.org/webt/iy/7l/7u/iy7l7uysi3amdu4sobxmthwp4-y.jpeg"><br>  <font color="gray"><i>Por uma quest√£o de como tudo foi realmente iniciado</i></font> <br><br>  Obviamente, a configura√ß√£o est√° longe de ser produtiva e n√£o deu certo em v√°rios testes para obter uma vantagem significativa ao se conectar via barramento x4 em vez de x1.  Muitas vezes, tudo descansava em um ferro fraco. <br><br><img src="https://habrastorage.org/webt/ah/7e/kg/ah7ekg0jws0yqnvyatvwh9-jwzi.png"><br>  <font color="gray"><i>Margem de erro</i></font> <br><br>  Jogos do tipo MOBA (WOT, por exemplo) mostraram indiferen√ßa ao barramento nessa configura√ß√£o - se houver uma quantidade suficiente de mem√≥ria de v√≠deo, n√£o ser√° necess√°rio carregar dados em locais pequenos fechados. <br><br>  Mas em jogos online com um mundo aberto, especialmente em locais de encontro em massa de jogadores, a diferen√ßa √© bastante percept√≠vel.  Aqui est√£o tr√™s medidas de FPS no Deserto Negro: <br><div class="scrollable-table"><table><tbody><tr><td>  Medi√ß√£o </td><td>  min </td><td>  m√©dia </td><td>  max </td></tr><tr><td colspan="4">  pci-e x4 gen1 ‚âà pci-e x1 gen3 </td></tr><tr><td>  1 </td><td>  5 </td><td>  28. </td><td>  51 </td></tr><tr><td>  2 </td><td>  5 </td><td>  29 </td><td>  49. </td></tr><tr><td>  3 </td><td>  5 </td><td>  29 </td><td>  51 </td></tr><tr><td colspan="4">  pci-e x4 gen3 </td></tr><tr><td>  1 </td><td>  7 </td><td>  31 </td><td>  56. </td></tr><tr><td>  2 </td><td>  6 </td><td>  30 </td><td>  51 </td></tr><tr><td>  3 </td><td>  7 </td><td>  31 </td><td>  53 </td></tr></tbody></table></div><br><h4>  <font color="#9cc2ce">Planos e resultados</font> </h4><br>  Embora o projeto tenha sido concebido como universal e n√£o apenas para si, ele n√£o encontrou muita popularidade.  Nem um pouco encontrado.  No entanto, consegui o que queria e experi√™ncia e conhecimento inestim√°veis.  Como se costuma dizer, um resultado negativo tamb√©m √© um resultado! <br><br>  Eles tamb√©m costumam me perguntar por que eu n√£o tentei implementar o suporte para a interface Thunderbolt3 agora na moda.  O problema √© que essa interface exigir√° licenciamento da Intel.  E eles n√£o fornecer√£o apenas documenta√ß√£o para os controladores.  Existe at√© um c√≠rculo restrito de desenvolvedores de solu√ß√µes no Thunderbolt3 sob o patroc√≠nio da mesma Intel.  Naturalmente, eles n√£o me aceitaram l√°. <br><br>  Embora houvesse rumores de que essa interface ser√° aberta e acess√≠vel a todos, mas no momento s√£o apenas rumores e o padr√£o permaneceu fechado.  Mas eu adoraria tentar desenvolver o projeto nessa dire√ß√£o. <br><br>  Havia algumas perguntas sobre a op√ß√£o de conex√£o em vez das placas de v√≠deo MXM.  Havia planos para essa op√ß√£o, mas tive que abandon√°-la por dois motivos - os fundos para P&amp;D chegaram ao fim e n√£o havia nada para test√°-la. <br><br>  Em geral, ficarei muito feliz em ouvir coment√°rios e sugest√µes dos vendedores ambulantes.  Obrigado pela aten√ß√£o! <br><br><h4>  <font color="#9cc2ce">PS</font> </h4><br>  Como essa √© geralmente a minha primeira experi√™ncia no desenvolvimento de um dispositivo eletr√¥nico, tive que recorrer a pessoas mais experientes nesse sentido. Quero agradecer √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">NordicEnergy</a> and <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Paging</a> pelos conselhos e respostas √†s minhas perguntas (√†s vezes tolas)! <br><br><h4>  <font color="red">Arquivos de projeto</font> </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt435086/">https://habr.com/ru/post/pt435086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt435076/index.html">Como os profissionais de marketing que trabalham com o Google monetizam nosso desconforto</a></li>
<li><a href="../pt435078/index.html">E se a intelig√™ncia artificial tornar os atores imortais?</a></li>
<li><a href="../pt435080/index.html">Guia: Thymeleaf + Spring. Parte 2</a></li>
<li><a href="../pt435082/index.html">Vale do Sil√≠cio Yoda</a></li>
<li><a href="../pt435084/index.html">Como trabalhar com ass√≠ncrono / aguardar em loops JavaScript</a></li>
<li><a href="../pt435088/index.html">A gigante chinesa de streaming Tencent Music abre capital p√∫blico - o que isso significa e o que os concorrentes devem esperar</a></li>
<li><a href="../pt435090/index.html">O grupo de motores Hyundai introduziu o conceito de carregamento sem fio e estacionamento aut√¥nomo</a></li>
<li><a href="../pt435094/index.html">Gamepad da Sega Mega Drive e Raspberry Pi Parte 2 (seis bot√µes finais)</a></li>
<li><a href="../pt435096/index.html">O efeito do r√°dio de tubo quente</a></li>
<li><a href="../pt435098/index.html">Spy Cam & Mic vs ADB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>