<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧖🏻 🧒🏿 👗 Sobre las curvas de Bezier y la velocidad de Arduino, segunda parte 💳 🕴🏼 🈚️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pasaremos por - y más allá 


 En mi publicación anterior, mostré cómo puede mejorar la velocidad de cálculo de puntos en una curva de Bezier (KB) de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre las curvas de Bezier y la velocidad de Arduino, segunda parte</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429254/"><h3>  Pasaremos por - y más allá </h3><br><img src="https://habrastorage.org/webt/hx/vp/j2/hxvpj2li3y68iwtzbikjgddqauy.jpeg"><br><br>  En mi publicación anterior, mostré cómo puede mejorar la velocidad de cálculo de puntos en una curva de Bezier (KB) de la siguiente manera: <br><br><ol><li>  Transformaciones de fórmulas de cálculo: aceleración ~ 3 veces. </li><li>  Casi no hay aceleración de PT a FT, pero permite 3. </li><li>  La operación de reemplazo de la división por multiplicación y cambio es una aceleración de otro 40%. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Retiro triste</b> <div class="spoiler_text">  - Cometí un error en la última fórmula, fue posible acelerar los cálculos un poco más doblando otra expresión constante y, excluyendo la multiplicación, en lugar de 502 obtuve 410 ciclos de reloj por ciclo de cálculo.  Desafortunadamente, ninguno de los lectores de la publicación anterior me señaló esto en los comentarios ... pero esperaba eso, lo que significa que no podía interesar a mis lectores lo suficiente como para que leyeran correctamente (es decir, con cuidado) mis opus.  Vale, inténtalo de nuevo. </div></div><br><a name="habracut"></a><br>  Al final de la publicación mencionada, dije que los cálculos se pueden hacer aún más rápido, pero lo que "el niño dijo, el niño hizo". <br><br>  Permítame recordarle una vez más la fórmula obtenida para calcular el punto en el KB <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>A</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>y</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2217;</mo><mi>y</mi><mo>+</mo><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mo>=&amp;gt;</mo><mn>2</mn><mo>&amp;#x2217;</mo><mn>2</mn><mo>+</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="39.031ex" height="2.66ex" viewBox="0 -832 16805.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-28" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-41" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-31" x="3225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2217" x="3948" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-79" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2B" x="5390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-42" x="6391" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-31" x="7150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-29" x="7651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2217" x="8263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-79" x="8985" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2B" x="9705" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-43" x="10706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-28" x="11466" y="0"></use><g transform="translate(11856,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-3D"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-3E" x="778" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-32" x="13691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2217" x="14413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-32" x="15136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2B" x="15637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-29" x="16415" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><mo stretchy="false">(</mo><mi>A</mi><mn>1</mn><mo>∗</mo><mi>y</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mi>y</mi><mo>+</mo><mi>C</mi><mo stretchy="false">(</mo><mo>=&gt;</mo><mn>2</mn><mo>∗</mo><mn>2</mn><mo>+</mo><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> P = (A1 * y + B1) * y + C (=> 2 * 2 +) </script></p>  El próximo aumento en la velocidad está relacionado con la peculiaridad del problema: no solo debemos calcular el valor de KB a diferentes valores del parámetro “y”, sino también encontrar una serie de valores al cambiar (en este caso, aumentar) este parámetro por un valor fijo conocido, además. unidad de caso), que le permite utilizar la técnica que se describe a continuación.  En mi tiempo, se llamaba el método de cálculo de la diferencia (si la memoria me sirve bien, al menos así era como se llamaba en las conferencias), todo Internet está a su disposición, tal vez (incluso seguro), hay otro nombre. <br><br>  Consideramos el caso P = A * y (=&gt; 1 *), y supongamos que conocemos el valor de P0 con algún argumento u0.  Entonces el valor con el siguiente argumento u0 + 1 puede calcularse como P = A * (u0 + 1) = A * u0 + A = P0 + A (=&gt; 1+).  Sin perder ninguna precisión, pudimos reemplazar la operación de multiplicación con la operación de suma, que es mucho más rápida. <br><br>  Ahora un ejemplo más complejo P = A * y * y (=&gt; 2 *), consideramos por analogía P = A * (y + 1) * (y + 1) = A * (y * y + 2 * y + 1) = A * y * y + 2 * A * y + A = P0 + 2 * A * y + A (=&gt; 2 * 2 +).  A primera vista, no ganamos nada, pero si calculamos A '= 2 * A por adelantado, obtenemos (=&gt; 1 * 2 +), una ganancia es bastante posible.  Pero no nos detendremos en lo que se ha logrado y en la expresión obtenida A '* y aplicaremos la técnica que ya conocemos, entonces obtendremos dos operaciones en dos variables: P = P + A' + A;  A '= A' + A (=&gt; 3+).  Si tenemos en cuenta que el valor inicial de A 'puede hacerse más por A, entonces, en general, solo hay dos adiciones en lugar de dos multiplicaciones.  Sí, tuvimos que obtener dos variables adicionales, pero este es un intercambio clásico: pagamos con memoria por el momento. <br><br>  Solo resta calcular los valores iniciales correctos, pero esto se hace solo una vez al comienzo de las iteraciones, y si el valor inicial del parámetro es u = 0, generalmente es trivial P = 0, A '= A.  Probaremos nuestro método en varias iteraciones (esto es completamente innecesario, las matemáticas aplicadas correctamente no pueden dar la respuesta incorrecta), pero nos permitirán comprender mejor lo que está sucediendo.  Entonces <br>  iteración 0: y = 0;  P = 0 (verdadero);  A '= A;  A '' = 2 * A; <br>  iteración 1: y = 1;  P = 0 + A '= 0 + A = A (verdadero);  A '= A' + A '' = A + 2 * A = 3 * A; <br>  iteración 2: y = 2;  P = A + 3 * A = 4 * A (verdadero);  A '= 3 * A + 2 * A = 5 * A; <br>  iteración 3: y = 3;  P = 9 * A (verdadero);  A '= 7 * A y así sucesivamente. <br><br>  Observamos la conexión entre las fórmulas obtenidas y el método de Newton para calcular el valor de una función en la vecindad de un punto con un valor conocido.  Además, dado que nuestra función es de segundo orden y todas las derivadas, a partir de la tercera, son iguales a cero, podemos reemplazar con seguridad el signo de igualdad aproximado con el exacto.  La única diferencia con este método es que constantemente movemos el punto con respecto al cual estamos construyendo un nuevo vecindario para evitar realizar operaciones de multiplicación en la formulación original. <br><br>  Reescribe nuestra expresión original para KB en forma expandida <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><mi>A</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>y</mi><mo>&amp;#x2217;</mo><mi>y</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>y</mi><mo>+</mo><mi>C</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.174ex" height="2.419ex" viewBox="0 -780.1 12130.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-41" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-31" x="2836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2217" x="3558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-79" x="4281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2217" x="5001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-79" x="5723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2B" x="6443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-42" x="7444" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-31" x="8203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2217" x="8926" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-79" x="9649" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMAIN-2B" x="10369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiFf-31An3Vsb4bEt9Yu5xjWz0YFw#MJMATHI-43" x="11369" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><mi>A</mi><mn>1</mn><mo>∗</mo><mi>y</mi><mo>∗</mo><mi>y</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo>∗</mo><mi>y</mi><mo>+</mo><mi>C</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> P = A1 * y * y + B1 * y + C </script></p>  luego, para calcular usando este método, necesitamos 2+ para el primer término (y dos variables), 1+ para el segundo término (y una variable) y 2+ para sumar todo (=&gt; 5+).  Se puede esperar que incluso este enfoque (incorrecto) produzca una ganancia en comparación con 2 * 2 +, pero todo es mucho mejor.  Obviamente, la operación de suma es aditiva (gracias, capitán), por lo que puede agrupar los términos y reemplazar los términos constantes con nuevas expresiones, lo que da el siguiente algoritmo: <br><br>  1. Los valores iniciales de P = C;  A '= A1 + B1;  A '' = 2 * A1; <br>  2. en el siguiente paso P = P + A ';  A '= A' + A '' (=&gt; 2+), que sin duda es más rápido que el esquema de Horner. <br><br>  Implementamos nuestro algoritmo en forma de programa (esto no es tan trivial como podría parecer, ya que por simplicidad olvidé la necesidad de cambios, pero no es demasiado difícil ... durante 20 minutos), obtenemos la complejidad computacional (=&gt; 2 + 1 &gt;&gt;) y medimos velocidad: resultó 140 (aumento de la velocidad en otras 3 veces) ciclos por ciclo, pero este es casi un resultado ideal.  Lo que tenemos que hacer para obtener la opción ideal (en cierto sentido) es prestar atención a la dimensión de los operandos en las fórmulas.  Ahora llevamos a cabo todas las operaciones en enteros largos (32 bits), y esto puede ser innecesario en algunos lugares.  Si reducimos la capacidad de los operandos al mínimo necesario, entonces podemos obtener una ganancia del 20-25 por ciento, pero esto requerirá que cambiemos al ensamblador (C no tiene los medios adecuados para tales operaciones) y analicemos cuidadosamente los datos del problema original.  Ya sea que el lector decida si hacer esto o no, ya hemos acelerado los cálculos en más de 1900/140 = 13 veces en comparación con el enfoque "ingenuo". <br><br>  La última nota sobre la implementación del algoritmo es que todavía excluimos la operación de división cambiándola por multiplicación constante, que tenemos en cuenta al generar los datos iniciales y cambiar por un múltiplo constante de 8. Esto se puede hacer de varias maneras con tiempos de ejecución ligeramente diferentes, dejando tales experimentos a la atención de un lector inquisitivo . <br><br>  Sin embargo, surgió un problema completamente inesperado: vemos claramente dos operaciones de suma en números de 32 bits, que deberían tomar 4 + 4 = 8 ciclos de reloj, poner otros 8 * 3 * 2 = 48 ciclos de reloj para enviar operandos, 4 ciclos de reloj para recibir el resultado del cambio, 4 un ciclo de reloj para llamar al procedimiento de cálculo y regresar, y 4 ciclos de reloj para organizar el ciclo, desde donde otros 60 ciclos de reloj no están claros.  Anteriormente, simplemente no notamos esto en el contexto de cientos de ciclos de reloj, pero ahora puede prestar atención.  Se encontraron fácilmente medidas excesivas: en el ciclo hubo operaciones de depuración innecesarias, si limpia todo cuidadosamente, solo quedan 120 medidas y el propósito de cada una es bastante comprensible (bueno, no tan completamente claro, pero aún así).  A continuación, descubrimos el tiempo de ejecución del ciclo vacío: 22 medidas, me pregunto qué estarán haciendo allí todo este tiempo, pero bueno, y borramos el tiempo de cálculo real, que será de 98 ciclos.  Tenga en cuenta que la estimación de la aceleración de trabajo obtenida cambia: en lugar de 1900/140 = 13 obtenemos (1900-50) / (140-40) = 19 veces, lo que no tiene sentido práctico, ya que el ciclo aún es necesario, pero le permite aumentarlo aún más autoestima <br><br>  Y el último comentario: como es fácil de ver, comenzamos a buscar y eliminar pulgas solo cuando tratamos con grandes escarabajos ciervos y su existencia (pulgas) se hizo evidente y, además, significativa.  Recomiendo exactamente este enfoque (y no estoy solo en esta recomendación) cuando optimizo programas en términos de rendimiento. <br><br>  Bueno, en conclusión, sobre la nota "en cierto sentido": si estamos hablando de calcular secuencialmente las coordenadas del siguiente punto en la oficina de diseño al cambiar el parámetro (que representa el tiempo), entonces el algoritmo propuesto (después de todas las optimizaciones) ya no es posible mejorar.  Pero si reformula la tarea y, por ejemplo, establece el objetivo de simplemente construir una oficina de diseño en la pantalla (sin referencia al tiempo), entonces hay un método muy prometedor, la palabra clave "Brezenheim", pero "esta es una historia completamente diferente", a la que dedicaré una publicación separada (Tal vez algún día si a la hermana mayor no le importa). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es429254/">https://habr.com/ru/post/es429254/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es429244/index.html">Greedy Gnome: mientras escribía análisis de mercado en Lineage 2</a></li>
<li><a href="../es429246/index.html">Prácticas de verano en Mars IS: una mirada al interior</a></li>
<li><a href="../es429248/index.html">Consejos políglotas: cómo aprender cualquier idioma sin lágrimas y maldiciones</a></li>
<li><a href="../es429250/index.html">Cien recetas de contabilidad digital</a></li>
<li><a href="../es429252/index.html">Análisis estático de aplicaciones móviles.</a></li>
<li><a href="../es429256/index.html">Cómo hacer crecer un bosque en Actionscript3 / Flash en unas pocas * líneas de código</a></li>
<li><a href="../es429258/index.html">Cómo crear mecánicas de juego confiables usando solo Excel: modelado y optimización de soluciones</a></li>
<li><a href="../es429260/index.html">Nuestro camino hacia el almacenamiento centralizado de registros</a></li>
<li><a href="../es429262/index.html">Bienvenido a la reunión de otoño DIYorDIE 17 de noviembre</a></li>
<li><a href="../es429264/index.html">Tiempo de UPS de iones de litio: ¿un peligro de incendio o un paso seguro hacia el futuro?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>