<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌩️ 👵 🚫 Mengapa memonitor sistem penyimpanan? 🥝 💪🏻 👨🏽‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seseorang akan segera jatuh 

 Karena SHD menyimpan data maha kudus. Jika data tidak lagi tersedia, itu akan segera digoreng. Atau jika tiba-tiba temp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mengapa memonitor sistem penyimpanan?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croc/blog/413247/"><img src="https://habrastorage.org/webt/ph/hp/en/phhpenviwwkomiriz7rmdco7blo.png"><br>  <i>Seseorang akan segera jatuh</i> <br><br>  Karena SHD menyimpan data maha kudus.  Jika data tidak lagi tersedia, itu akan segera digoreng.  Atau jika tiba-tiba tempat itu selesai - juga kejutan yang tidak menyenangkan.  Karena itu, pemantauan harus bersifat wajib, dan harus mencakup sistem penyimpanan. <br><br>  Ada dua pendekatan utama untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memantau penyimpanan</a> .  Baik menggunakan sistem pemantauan universal seperti Nagios, Icinga, yang akan mengumpulkan informasi melalui SNMP, atau membeli perangkat lunak yang sangat khusus dari produsen sistem penyimpanan itu sendiri.  Tentu saja, opsi kedua menyediakan analisis yang lebih dalam tentang kondisi besi, menunjukkan hal-hal spesifik seperti keadaan cache, iops, hit rate, memuat pengontrol, dll. Ini adalah opsi yang paling sering dipilih oleh pelanggan kami, yang memiliki array besar dan mahal dalam layanan. . <br><br>  Namun omong-omong, tidak semuanya lancar dengan perangkat lunak pemantauan komersial.  Secara lebih rinci saya akan menceritakan lebih lanjut.  Jadi, bisa dikatakan, pengalaman langsung.  Pada suatu waktu, selama hampir 2 tahun saya menyelesaikan satu sistem seperti itu untuk ribuan kertas hijau dari vendor terkenal.  Dan dia mengambilnya sehingga bahkan dukungan dari vendor mulai berkonsultasi dengan saya.  Tetapi beberapa masalah perangkat lunak digantikan oleh yang lain, sama seperti beberapa orang India dari dukungan digantikan oleh orang-orang India yang baru - dan saat itulah saya mendapat ide, jika tidak bertindak radikal sama sekali ... Secara umum, semuanya dimulai dengan ini. <br><a name="habracut"></a><br><h3>  Apa yang salah dengan perangkat lunak vendor? </h3><br>  Seperti yang saya katakan, pemantauan dari pabrikan dengan sempurna memonitor sistem penyimpanan dari pabrikan yang sama.  Inilah keunggulan utamanya.  Kerugian tumbuh dari sini: susunan pabrikan lain didukung secara terbatas atau tidak sama sekali.  Ternyata jika Anda memiliki beberapa larik berbeda di tambak, maka Anda memerlukan beberapa alat pemantauan yang berbeda.  Ya, dan jangan lupa yang mana dan kapan Anda perlu melihatnya lain kali.  Idealnya, umumnya oleh admin untuk setiap larik. <br><br>  Bukan rahasia lagi bahwa alat dari produsen vendor membutuhkan biaya, dan cukup besar.  Dan perpanjangan dukungan itu juga membutuhkan biaya yang sangat kecil.  Dan beberapa vendor telah menguasai fokus baru: mereka mengumumkan akhir dari siklus hidup perangkat lunak mereka dan menawarkan hanya untuk membeli produk lain, tanpa migrasi lisensi.  Pengaturan seperti itu yang baru saja terjadi beberapa bulan yang lalu dengan salah satu pelanggan kami.  Tidak ada opsi: jika Anda ingin terus memantau perangkat keras - lakukan pembelian baru. <br><br>  Jika Anda menggali perangkat lunak vendor lebih dalam, fitur-fitur tidak menyenangkan lainnya akan muncul.  Misalnya, dalam sejumlah produk Anda dapat melihat gambar status saat ini, tetapi Anda tidak dapat melihat riwayat untuk periode sebelumnya.  Atau cerita terbatas: log ditulis ulang setiap 3 hari sekali.  Sama sekali tidak perlu berbicara tentang akumulasi statistik.  Dan seringkali sejarah peristiwa diperlukan untuk prakiraan, misalnya, pembelian suku cadang, dan untuk pelaporan, dan untuk menyelidiki insiden.  Misalnya, rem di beberapa sistem bisnis dapat dimasukkan ke sistem penyimpanan dan, jika tidak ada data aktual, tidak ada yang disembunyikan di belakang. <br><br>  Dan akhirnya, orang tidak bisa tidak mengeluh tentang kecepatan pembaruan dan perubahan dalam perangkat lunak vendor.  Oh, betapa sering saya menemukan masalah ini untuk latihan panjang saya!  Model-model array baru keluar, firmware baru keluar, pengaturan baru muncul.  Semua ini dengan mudah mematahkan pemantauan kerja: entah semacam infa berhenti dikumpulkan, atau array umumnya jatuh.  Dalam mikrokode baru, pabrikan mematikan dukungan untuk versi SSL lama, dan perangkat lunak pemantauan belum mendukung protokol TLS.  Dan pada awalnya tidak ada yang bisa menemukan alasannya.  Setelah penyelidikan saya sendiri, saya mengirim input ini ke pabrik, dan mereka sudah memperbarui perpustakaan kuno.  Namun, semua birokrasi ini berlangsung tanpa batas. <br><br>  Dan begitu kami gagal pilot di pelanggan.  Diusulkan untuk menggunakan perangkat lunak vendor, dan pelanggan menyukai semuanya dalam hal fungsionalitas dan antarmuka.  Namun sayangnya, sistem produktif utama mereka tidak didukung.  Mereka bahkan siap menunggu satu atau dua bulan, tetapi vendor mengatakan bahwa tidak ada rencana untuk memasukkan sistem ini dalam dukungan dalam waktu dekat (dan ini hanya pembaruan dari garis AMS Hitachi pada HUS). <br><br>  Secara umum, cukup banyak ketidaknyamanan dan untuk beberapa alasan banyak uang. <br><br><h3>  Dahulu kala saya tidak mengambil catur ... </h3><br>  Frustrasi oleh keadaan ini, saya sering berpikir tentang bagaimana menerapkan pemantauan saya sendiri untuk penyimpanan.  Jika Anda mengetahui array dengan baik dan memiliki CLI-nya, maka Anda dapat dengan cepat mendapatkan informasi yang Anda butuhkan tentang keadaan atau sampai ke bagian bawah masalah.  Tentu saja, sebelum ini, perlu menyekop banyak dermaga, forum asap dan basis pengetahuan vendor, sedikit demi sedikit informasi yang berbeda.  Tetapi ketika Anda tahu perintah mana yang harus diketik dengan kunci apa dan apa artinya setiap kolom output, Anda sudah menjadi seorang guru.  Tetap membangun pengetahuan ini menjadi antarmuka yang nyaman, yang akan terus melakukan segalanya untuk Anda. <br><br>  Saya akui bahwa pada awalnya saya berencana untuk menulis antarmuka dari awal juga, tetapi kemudian saya menemukan Zabbix - alat yang matang dengan komunitas besar, yang juga mudah diperluas.  Itu memiliki semua yang saya butuhkan: antarmuka, model peran, pemberitahuan, sistem pemicu, agen klien proxy.  Hanya tetap untuk penggabungan ini untuk memberikan informasi yang benar tentang sistem penyimpanan dan nilai ambang batas dari berbagai parameter.  Kasingnya mulai mendidih.  Kami memiliki tim spesialis dalam array.  Tentu saja, tidak mungkin mengetahui semua array oleh satu orang, jadi kami dibagi berdasarkan model dan pabrikan. <br><br>  Kesulitan lain dalam mengembangkan pemantauan Anda sendiri adalah kemampuan untuk mengakses potongan-potongan besi itu sendiri dan sehingga mereka masih tidak takut untuk memuat, menghancurkan, dan melakukan semua jenis eksperimen.  Untungnya, sumber daya laboratorium kami memungkinkan semua ini. <br><br>  Hal pertama yang harus dipantau adalah kesehatan semua komponen perangkat keras.  Sesuatu dapat diambil melalui SNMP, tetapi dalam kebanyakan kasus ini adalah survei menggunakan protokol khusus (SMI-S, REST API, SOAP API, dan lainnya).  Saya harus mengatakan bahwa array itu sendiri memungkinkan Anda untuk mengkonfigurasi notifikasi tentang gangguan pada mereka.  Dan setidaknya semua pelanggan menggunakan ini.  Tetapi apa yang terjadi jika notifikasi itu sendiri pada array rusak?  Ini terjadi, dan lebih dari sekali, ketika array diam selama berminggu-minggu dan bagi semua orang tampaknya semuanya beres, itu diam.  Dan kemudian tiba-tiba menjadi jelas bahwa sejumlah disk kritis terbang di atasnya, tetapi sudah terlambat. <br><br>  Poin penting kedua untuk memantau adalah kinerja.  Karena ketika kinerja mengacu pada sistem penyimpanan dengan penundaan rekaman beberapa detik, Oracle dapat naik dan turun.  Tidak tahu  Ini adalah kinerja dalam infrastruktur besar dengan banyak sistem penyimpanan yang paling buruk dikendalikan.  Dan Zabbix memiliki analisis prediktif yang sangat nyaman: berdasarkan perkiraan, Anda dapat mengatur nilai metrik, yang akan menjadi di masa depan.  Misalnya, kami membuat pemicu yang akan berfungsi jika ada perkiraan bahwa hanya akan tersisa 3 bulan untuk pembuangan saat ini.  Atau, misalnya, bahwa waktu respons menurut perkiraan dalam 2 minggu akan lebih dari 50 milidetik.  Pemantauan memberi kita waktu untuk belajar tentang masalah yang akan datang di muka dan untuk melakukan sesuatu. <br><br>  Pada titik tertentu, kami menyadari bahwa mengetahui keadaan penyimpanan itu baik, tentu saja, tetapi jauh lebih baik untuk memahami apa lagi yang terjadi di jaringan dan di sisi server.  Akibatnya, setelah beberapa bulan bekerja, menjadi mungkin untuk melihat server, jaringan, dan sistem penyimpanan dalam satu antarmuka.  Tidak hanya plug-in dan konektor untuk penyimpanan muncul, tetapi juga ikatan yang berguna dalam bentuk peta topologi jaringan.  Sejauh ini, tentu saja, plugin memperhitungkan pengalaman dan kebutuhan kami, tetapi jika Anda memberi tahu kami apa yang perlu Anda lihat di dalamnya, kami akan mengubahnya. <br><br><img src="https://habrastorage.org/webt/ut/cc/sz/utccszsrlpc89pbcvjqvzo5pr7y.png"><br>  <i>Topologi End-to-End untuk VMware Cluster: Dari Mesin Virtual ke Volume Penyimpanan</i> <br><br><img src="https://habrastorage.org/webt/tu/uv/nm/tuuvnmtm6hn04e1gs4oqtqzebjm.png"><br><img src="https://habrastorage.org/webt/8q/jc/g6/8qjcg65vrycqdrzzrlxbbfsrls8.png"><br>  <i>Performa</i> <br><br>  Pada grafik kinerja array, kita melihat bahwa sistem sangat kelebihan beban.  Pemanfaatan tinggi grup disk menunjukkan bahwa disk kelebihan beban.  Ada banyak operasi I / O pada port penyimpanan, yang berarti bahwa sistem TI memuat array untuk bagian mereka.  Nah, grafik karakteristik waktu respons, serta pemanfaatan prosesor di atas nilai yang disarankan.  Putusan - terlalu banyak tugas diletakkan pada array, beberapa dari mereka harus dimigrasi. <br><br><img src="https://habrastorage.org/webt/5y/rj/_o/5yrj_osycqxzagfoddfq1y9rd5g.png"><br>  <i>Peta Jaringan Penyimpanan: Menemukan Kemacetan</i> <br><br><h3>  Ringkasan </h3><br>  Apa yang kita dapatkan?  Kami telah melengkapi sistem pemantauan Zabbix yang populer dan sangat umum dengan fitur-fitur baru, termasuk: <br><br><ol><li>  Pengumpulan informasi tentang status semua perangkat keras dan komponen logis dari larik disk dan sakelar jaringan penyimpanan. </li><li>  Statistik kinerja untuk mutlak semua sistem yang kami buatkan pengaya (vendor memiliki celah dalam hal ini). </li><li>  Peta topologi dari kedua jaringan penyimpanan bersama dan ujung ke ujung dari mesin virtual ke volume pada sistem penyimpanan (sejauh ini hanya untuk VMware). </li><li>  Pengumpulan semua informasi inventaris. </li><li>  Jumlah ruang disk. </li></ol><br>  Zabbix sendiri memungkinkan Anda untuk membuat notifikasi yang sangat keren, menetapkan ambang batas, mengirim surat informatif tentang masalah tersebut.  Misalnya, jika port pada sakelar jatuh (atau lalu lintas pada port menjadi sangat besar), pesan tidak hanya akan berisi nama sakelar dengan nomor port, tetapi juga informasi tentang perangkat yang terhubung. <br><br>  Sistem apa yang saat ini kami dukung?  Banyak perbedaan: <br><br><ol><li>  Semua array Hitachi (AMS, HUS, VSP, VSP G). </li><li>  Array Dell-EMC CLARiiON, VNX, Unity, ISILON, Compellent. </li><li>  Array HPE 3PAR, P9500, XP7. </li><li>  Susunan IBM Storwize, DS5000. </li><li>  Mengatur NetApp FAS (7-mode, c-mode). </li><li>  HPE StoreOnce, Perpustakaan Disk DataDomain EMC. </li><li>  Saklar Ulat Sutra Brocade, Cisco MDS. </li></ol><br>  Kami juga memiliki ekstensi untuk beberapa sistem operasi (Windows, ESX), yang dengannya kami mengumpulkan data tentang FC HBA untuk menggambar peta topologi di masa depan.  Mengembangkan plugin untuk OpenStack dan sistem virtualisasi secara aktif. <br><br>  Saat mengembangkan plug-in, keahlian teknisi kami diperhitungkan, di belakangnya ada banyak kasus untuk memecahkan masalah pada array - baik perangkat keras maupun kinerja.  Plugin baru dikembangkan berdasarkan permintaan dalam waktu singkat karena banyaknya perpustakaan yang sudah jadi. <br><br>  Beberapa pelanggan kami mengonfigurasi sistem sebagai berikut: pemberitahuan dengan nomor kontrak, orang yang dapat dihubungi dan semua parameter komponen yang salah secara otomatis dikirim ke email kami.  Ini mengurangi waktu reaksi dan memesan suku cadang yang diperlukan, karena insinyur tugas tidak perlu menelepon dan mengklarifikasi banyak informasi - bahkan di malam hari.  Aplikasi langsung berfungsi. <br><br>  Bagaimana Anda mengatasi masalah pemantauan infrastruktur Anda, khususnya penyimpanan?  Ceritakan pada kami di komentar atau di surat ke mail VRyzhevsky@croc.ru </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413247/">https://habr.com/ru/post/id413247/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413237/index.html">Facebook membantah produsen perangkat mengirimkan data yang sama dengan pengembang Alexander Kogan</a></li>
<li><a href="../id413239/index.html">Cara membuat smartphone sedikit bodoh</a></li>
<li><a href="../id413241/index.html">Mencegah fungsi dalam kernel Linux menggunakan ftrace</a></li>
<li><a href="../id413243/index.html">School of Data: bagaimana menggabungkan matematika dan bisnis</a></li>
<li><a href="../id413245/index.html">Pada peralatan Dolby Atmos - hanya suara "asli". Dolby melarang upmixing non-pribumi</a></li>
<li><a href="../id413249/index.html">Menulis modul kernel Linux: I2C</a></li>
<li><a href="../id413251/index.html">Reaksi berantai polimer dan Vladivostok</a></li>
<li><a href="../id413253/index.html">Richard Hamming: Bab 21. Serat Optik</a></li>
<li><a href="../id413255/index.html">Richard Hamming: Bab 27. Data Tidak Valid</a></li>
<li><a href="../id413261/index.html">Cara kerja pencarian</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>