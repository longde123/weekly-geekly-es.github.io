<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜§ âœï¸ ğŸ’µ å¦‚ä½•åˆ›å»ºå’Œéƒ¨ç½²å…¨æ ˆé˜µè¥çš„åº”ç”¨ ğŸ˜´ ğŸŒ” ğŸ¤´ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHaï¼ æˆ‘å‘æ‚¨ä»‹ç»Frank Zickertæ’°å†™çš„æ–‡ç« â€œå¦‚ä½•æ„å»ºå’Œéƒ¨ç½²å…¨æ ˆReact-Appâ€çš„ç¿»è¯‘ã€‚ 

 åŸºç¡€è®¾æ–½ç»„ä»¶ä½¿åˆ›å»ºï¼Œè¿è¡Œå’Œéƒ¨ç½²æˆç†Ÿçš„Reactåº”ç”¨ç¨‹åºå˜å¾—å®¹æ˜“ã€‚ å€ŸåŠ©è¿™äº›Reactç»„ä»¶ï¼Œæ‚¨å¯ä»¥ä¸“æ³¨äºç¼–å†™åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚ ä½ ä¸å¿…æ‹…å¿ƒå®ƒçš„é…ç½®ã€‚ 

 æƒ³æˆä¸ºä¸€åå…¨æ ˆå¼€å‘äººå‘˜å—ï¼Ÿ å…¨æ ˆ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•åˆ›å»ºå’Œéƒ¨ç½²å…¨æ ˆé˜µè¥çš„åº”ç”¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476696/">å“ˆHaï¼ æˆ‘å‘æ‚¨ä»‹ç»Frank Zickertæ’°å†™çš„æ–‡ç« <a href="https://medium.com/dailyjs/how-to-build-and-deploy-a-full-stack-react-app-4adc46607604">â€œå¦‚ä½•æ„å»ºå’Œéƒ¨ç½²å…¨æ ˆReact-Appâ€</a>çš„ç¿»è¯‘ã€‚ <br><br> åŸºç¡€è®¾æ–½ç»„ä»¶ä½¿åˆ›å»ºï¼Œè¿è¡Œå’Œéƒ¨ç½²æˆç†Ÿçš„Reactåº”ç”¨ç¨‹åºå˜å¾—å®¹æ˜“ã€‚ å€ŸåŠ©è¿™äº›Reactç»„ä»¶ï¼Œæ‚¨å¯ä»¥ä¸“æ³¨äºç¼–å†™åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚ ä½ ä¸å¿…æ‹…å¿ƒå®ƒçš„é…ç½®ã€‚ <br><br> æƒ³æˆä¸ºä¸€åå…¨æ ˆå¼€å‘äººå‘˜å—ï¼Ÿ å…¨æ ˆåº”ç”¨ç¨‹åºé€šè¿‡æœåŠ¡å™¨å’Œæ•°æ®åº“è¡¥å……äº†Reactäº¤äº’å¼Webç•Œé¢ã€‚ ä½†æ˜¯ï¼Œä¸ç®€å•çš„ä¸€é¡µåº”ç”¨ç¨‹åºç›¸æ¯”ï¼Œæ­¤ç±»åº”ç”¨ç¨‹åºéœ€è¦æ›´å¤šçš„è®¾ç½®ã€‚ <br><a name="habracut"></a><br> æˆ‘ä»¬ä½¿ç”¨<a href="https://www.infrastructure-components.com/">åŸºç¡€æ¶æ„ç»„ä»¶</a> ã€‚ è¿™äº›Reactç»„ä»¶ä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†åŸºç¡€æ¶æ„å®šä¹‰ä¸ºReactåº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†ã€‚ æˆ‘ä»¬ä¸å†éœ€è¦ä»»ä½•å…¶ä»–è®¾ç½®ï¼Œä¾‹å¦‚Webpackï¼ŒBabelæˆ–Serverlessã€‚ <br><br><h2> å¼€å§‹ </h2><br> æ‚¨å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼è®¾ç½®é¡¹ç›®ï¼š <br><br><ul><li> ä»<a href="http://www.infrastructure-components.com/">www.infrastructure-components.com</a>ä¸‹è½½æ‚¨çš„è‡ªå®šä¹‰æ ·æ¿ä»£ç ï¼Œ </li><li> æˆ–å…‹éš†æ­¤<a href="https://github.com/infrastructure-components/serviceoriented_example">GitHubå­˜å‚¨åº“</a> ï¼Œ </li><li> æˆ–æ‰‹åŠ¨å®‰è£…åº“ï¼Œè¯·å‚é˜…æ­¤å¸–å­ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ </li></ul><br> ä¸€æ—¦å®‰è£…äº†ä¾èµ–é¡¹ï¼ˆè¿è¡Œ<code>npm install</code> ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤æ¥æ„å»ºé¡¹ç›®ï¼š <code>npm run build</code> ã€‚ <br><br> æ„å»ºè„šæœ¬å‘package.jsonæ·»åŠ äº†ä¸‰ä¸ªè„šæœ¬ï¼š <br><br><ul><li>  <code>npm run{your-project-name}</code>åœ¨æœ¬åœ°å¯åŠ¨æ‚¨çš„Reactåº”ç”¨ç¨‹åºï¼ˆçƒ­å¼€å‘æ¨¡å¼ï¼Œæ²¡æœ‰æœåŠ¡å™¨éƒ¨åˆ†å’Œæ•°æ®åº“ï¼‰ </li><li>  <code>npm run start-{your-env-name}</code>åœ¨æœ¬åœ°å¯åŠ¨æ•´ä¸ªè½¯ä»¶å †æ ˆã€‚ æ³¨æ„ï¼šéœ€è¦Java 8 JDKæ‰èƒ½ç¦»çº¿è¿è¡Œæ•°æ®åº“ã€‚  <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html">è¿™æ˜¯å®‰è£…JDKçš„æ–¹æ³•</a> ã€‚ </li><li>  <code>npm run deploy-{your-env-name}</code>å°†æ‚¨çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°AWSã€‚ </li></ul><br> æ³¨æ„äº‹é¡¹ è¦å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°AWSï¼Œæ‚¨éœ€è¦å…·æœ‰è¿™äº›æƒé™çš„IAMæŠ€æœ¯ç”¨æˆ·ã€‚ å°†ç”¨æˆ·å‡­æ®æ”¾åœ¨æ‚¨çš„.envæ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="plaintext hljs">AWS_ACCESS_KEY_ID = *** AWS_SECRET_ACCESS_KEY = ***</code> </pre> <br><h2> å®šä¹‰æ‚¨çš„åº”ç”¨æ¶æ„ </h2><br> åŸºäºåŸºç¡€æ¶æ„ç»„ä»¶çš„é¡¹ç›®å…·æœ‰æ¸…æ™°çš„ç»“æ„ã€‚ ä½ æœ‰ä¸€ä¸ªé¡¶çº§ç»„ä»¶ã€‚ è¿™å®šä¹‰äº†åº”ç”¨ç¨‹åºçš„æ•´ä½“æ¶æ„ã€‚ <br><br> å­ç»„ä»¶ï¼ˆå­ç»„ä»¶ï¼‰å®Œå–„ï¼ˆæ‰©å±•ï¼‰åº”ç”¨ç¨‹åºçš„è¡Œä¸ºå¹¶æ·»åŠ åŠŸèƒ½ã€‚ <br><br> åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œç»„ä»¶<code>&lt;ServiceOrientedApp /&gt;</code> -è¿™æ˜¯æˆ‘ä»¬é¡¶çº§ç»„ä»¶ã€‚ æˆ‘ä»¬å°†å…¶ä½œä¸ºé»˜è®¤æ–‡ä»¶å¯¼å‡ºåˆ°æˆ‘ä»¬çš„å…¥å£ç‚¹æ–‡ä»¶ï¼ˆ <code>src / index.tsx)</code> ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ( &lt;ServiceOrientedApp stackName = "soa-dl" buildPath = 'build' region='eu-west-1'&gt; &lt;Environment name="dev" /&gt; &lt;Route path='/' name='My Service-Oriented React App' render={()=&gt;&lt;DataForm /&gt;} /&gt; &lt;DataLayer id="datalayer"&gt; &lt;UserEntry /&gt; &lt;GetUserService /&gt; &lt;AddUserService /&gt; &lt;/DataLayer&gt; &lt;/ServiceOrientedApp&gt; );</code> &gt; <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ( &lt;ServiceOrientedApp stackName = "soa-dl" buildPath = 'build' region='eu-west-1'&gt; &lt;Environment name="dev" /&gt; &lt;Route path='/' name='My Service-Oriented React App' render={()=&gt;&lt;DataForm /&gt;} /&gt; &lt;DataLayer id="datalayer"&gt; &lt;UserEntry /&gt; &lt;GetUserService /&gt; &lt;AddUserService /&gt; &lt;/DataLayer&gt; &lt;/ServiceOrientedApp&gt; );</code> </pre> <br>  <code>&lt;ServiceOrientedApp /&gt;</code>æ˜¯ä¸€ä¸ªäº¤äº’å¼Webåº”ç”¨ç¨‹åºã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æä¾›çš„å­ç»„ä»¶æ¥é˜æ˜ï¼ˆæ‰©å±•ï¼‰æ­¤åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ã€‚ å®ƒæ”¯æŒ<code>&lt;Environment /&gt;</code> ï¼Œ <code>&lt;Route /&gt;</code> ï¼Œ <code>&lt;Service /&gt;</code>å’Œ<code>&lt;DataLayer /&gt;</code> ã€‚ <br><br>  <code>&lt;Envrionment /&gt;</code>ç¡®å®šåº”ç”¨ç¨‹åºçš„è¿è¡Œæ—¶ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å…·æœ‰devå’Œprodç‰ˆæœ¬ã€‚ æ‚¨å¯ä»¥åˆ†åˆ«è¿è¡Œå’Œéƒ¨ç½²æ¯ä¸ªã€‚ <br><br>  <code>&lt;Route /&gt;</code>æ˜¯æ‚¨çš„åº”ç”¨ç¨‹åºé¡µé¢ã€‚ å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºreact-routerä¸­çš„<code>&lt;Route /&gt;</code> ã€‚  <a href="https://medium.com/dailyjs/how-to-create-a-navigation-bar-with-react-router-styled-components-and-infrastructure-components-e24bee8d31bb">è¿™æ˜¯æœ‰å…³å¦‚ä½•ä½¿ç”¨è·¯çº¿çš„æ•™ç¨‹</a> ã€‚ <br><br>  <code>&lt;Service /&gt;</code>å®šä¹‰äº†åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œçš„åŠŸèƒ½ã€‚ å®ƒå¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª<code>&lt;Middleware /&gt;</code> -å­ç»„ä»¶ã€‚ <br><br>  <code>&lt;Middleware /&gt;</code>å·¥ä½œæ–¹å¼ç±»ä¼¼äºExpress.js-middlewareã€‚ <br>  <code>&lt;DataLayer /&gt;</code>å°†NoSQLæ•°æ®åº“æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºã€‚ æ¥å—&lt;Entry /&gt;-ç»„ä»¶ä½œä¸ºå­ç»„ä»¶ã€‚  &lt;Entry /&gt;æè¿°æ•°æ®åº“ä¸­é¡¹ç›®çš„ç±»å‹ã€‚ <br><br> è¿™äº›ç»„ä»¶ - æ‰€æœ‰è¿™äº›ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹æˆ‘ä»¬çš„å…¨æ ˆçš„åº”ç”¨ç¨‹åºã€‚ æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ˜¯ï¼šä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œä¸€ä¸ªé¡µé¢ï¼Œä¸¤ä¸ªæœåŠ¡ï¼Œå¹¶ä¸ä¸€ä¸ªæ¡ç›®çš„æ•°æ®åº“ã€‚ <br><br> ç»„ä»¶ç»“æ„ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæä¾›äº†æ¸…æ™°çš„è§†å›¾ã€‚ ä½ çš„åº”ç”¨ç¨‹åºå˜å¾—æ›´å¤§ï¼Œæ›´é‡è¦çš„æ˜¯ã€‚ <br><br> æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°<code>&lt;Service /&gt;</code>æ˜¯<code>&lt;DataLayer /&gt;</code> ã€‚ å®ƒæœ‰ä¸€ä¸ªç®€å•çš„è§£é‡Šã€‚ æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„æœåŠ¡å¯ä»¥è®¿é—®æ•°æ®åº“ã€‚ çœŸçš„å°±æ˜¯è¿™ä¹ˆç®€å•ï¼ <br><br><h2> æ•°æ®åº“è®¾è®¡ </h2><br>  <code>&lt;DataLayer /&gt;</code>åˆ›å»ºAmazon DynamoDBã€‚ è¿™æ˜¯ä¸€ä¸ªé”®å€¼æ•°æ®åº“ï¼ˆNoSQLï¼‰ã€‚ å®ƒå¯æä¾›ä»»ä½•è§„æ¨¡çš„é«˜æ€§èƒ½ã€‚ ä½†æ˜¯ä¸å…³ç³»æ•°æ®åº“ä¸åŒï¼Œå®ƒä¸æ”¯æŒå¤æ‚çš„æŸ¥è¯¢ã€‚ <br><br> æ•°æ®åº“æ¨¡å¼å…·æœ‰ä¸‰ä¸ªå­—æ®µï¼š <code>primaryKey</code> ï¼Œ <code>rangeKey</code>å’Œ<code>data</code> ã€‚ è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºæ‚¨éœ€è¦çŸ¥é“åªèƒ½é€šè¿‡å…¶é”®æŸ¥æ‰¾æ¡ç›®ã€‚ é€šè¿‡<code>primaryKey</code>æˆ–<code>rangeKey</code> ï¼Œæˆ–åŒæ—¶é€šè¿‡ä¸¤è€…ã€‚ <br><br> æœ‰äº†è¿™äº›çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>&lt;Entry /&gt;</code> ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> USER_ENTRY_ID = <span class="hljs-string"><span class="hljs-string">"user_entry"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserEntry</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Entry</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">primaryKey</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"username"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rangeKey</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"userid"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">age:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GraphQLString</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">address:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GraphQLString</span></span></span></span><span class="xml"><span class="hljs-tag"> }} /&gt;</span></span></span><span class="xml"> };</span></span></code> </pre> <br>  <code>&lt;Entry /&gt;</code>æè¿°äº†æˆ‘ä»¬æ•°æ®çš„ç»“æ„ã€‚ æˆ‘ä»¬ä¸ºprimaryKeyå’ŒrangeKeyå®šä¹‰åç§°ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨é™¤æ­¤å¤„å¯ä»¥æ‰¾åˆ°çš„æŸäº›DynamoDBå…³é”®å­—ä»¥å¤–çš„ä»»ä½•åç§°ã€‚ ä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„åç§°å…·æœ‰åŠŸèƒ½å«ä¹‰ï¼š <br><br><ul><li> å°†é¡¹ç›®æ·»åŠ åˆ°æ•°æ®åº“æ—¶ï¼Œå¿…é¡»æä¾›è¿™äº›é”®åçš„å€¼ã€‚ </li><li> è¿™ä¸¤ä¸ªé”®çš„ç»„åˆæè¿°äº†æ•°æ®åº“ä¸­çš„å”¯ä¸€å…ƒç´ ã€‚ </li><li> å¦ä¸€ä¸ª&lt;Entry /&gt;ä¸åº”å…·æœ‰ç›¸åŒçš„é”®åï¼ˆä¸€ä¸ªåç§°å¯ä»¥ç›¸åŒï¼Œä½†ä¸èƒ½å…¨éƒ¨ç›¸åŒï¼‰ã€‚ </li><li> ä»…å½“æˆ‘ä»¬æ‹¥æœ‰è‡³å°‘ä¸€ä¸ªé”®åçš„å€¼æ—¶ï¼Œæ‰èƒ½åœ¨æ•°æ®åº“ä¸­æ‰¾åˆ°å…ƒç´ ã€‚ </li></ul><br> åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œè¿™æ„å‘³ç€ï¼š <br><br><ul><li> æ¯ä¸ªç”¨æˆ·å¿…é¡»å…·æœ‰ç”¨æˆ·åå’Œç”¨æˆ·IDã€‚ </li><li> ä¸èƒ½å†æœ‰ä¸€ä¸ªå…·æœ‰ç›¸åŒç”¨æˆ·åå’Œç›¸åŒç”¨æˆ·åçš„ç”¨æˆ·ã€‚ ä»æ•°æ®åº“çš„è§’åº¦æ¥çœ‹ï¼Œå¦‚æœä¸¤ä¸ªUserå…·æœ‰ç›¸åŒçš„ç”¨æˆ·åï¼ˆè€Œåä¹‹äº¦ç„¶ï¼‰ï¼Œåˆ™æœ€å¥½ä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·åã€‚ </li><li> æˆ‘ä»¬çš„æ•°æ®åº“ä¸­ä¸èƒ½æœ‰å¦ä¸€ä¸ª&lt;Entry /&gt;ï¼Œå…¶primaryKey =â€œ usernameâ€å’ŒrangeKey =â€œ useridâ€ã€‚ </li><li> å½“æˆ‘ä»¬æœ‰ç”¨æˆ·åæˆ–ç”¨æˆ·<code>id</code>æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥è¯¢æ•°æ®åº“ä¸­çš„ç”¨æˆ·ã€‚ ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½æŒ‰å¹´é¾„æˆ–åœ°å€è¦æ±‚ã€‚ </li></ul><br><h3> å°†é¡¹ç›®æ·»åŠ åˆ°æ•°æ®åº“ </h3><br> æˆ‘ä»¬åœ¨<code>&lt;ServiceOrientedApp /&gt;</code>å®šä¹‰äº†ä¸¤ä¸ª<code>&lt;Service /&gt;</code>ç»„ä»¶ã€‚ å°†ç”¨æˆ·æ·»åŠ åˆ°æ•°æ®åº“çš„<code>POST</code>æœåŠ¡ï¼Œä»¥åŠä»æ•°æ®åº“ä¸­æ£€ç´¢ç”¨æˆ·çš„<code>GET</code>æœåŠ¡ã€‚ <br><br> è®©æˆ‘ä»¬ä»<code>&lt;AddUserService /&gt;</code> ã€‚ ä¸‹é¢æ˜¯è¯¥æœåŠ¡çš„ä»£ç ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { callService, Middleware, mutate, Service, serviceWithDataLayer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"infrastructure-components"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { USER_ENTRY_ID, IUserEntry } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user-entry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ADDUSER_SERVICE_ID = <span class="hljs-string"><span class="hljs-string">"adduser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ADDUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/adduser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">IUserEntry</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">JSON.parse(req.body);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mutate</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.setEntryMutation</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody</span></span></span></span><span class="xml"><span class="hljs-tag">) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">("</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ok</span></span></span></span><span class="xml"><span class="hljs-tag">"); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> };</span></span></code> ./user-entry'; <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { callService, Middleware, mutate, Service, serviceWithDataLayer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"infrastructure-components"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { USER_ENTRY_ID, IUserEntry } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user-entry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ADDUSER_SERVICE_ID = <span class="hljs-string"><span class="hljs-string">"adduser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ADDUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/adduser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">IUserEntry</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">JSON.parse(req.body);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mutate</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.setEntryMutation</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody</span></span></span></span><span class="xml"><span class="hljs-tag">) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">("</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ok</span></span></span></span><span class="xml"><span class="hljs-tag">"); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> };</span></span></code> æ•°æ®å±‚ï¼ŒREQï¼ŒRESï¼Œä¸‹ä¸€ä¸ªï¼‰{ <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { callService, Middleware, mutate, Service, serviceWithDataLayer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"infrastructure-components"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { USER_ENTRY_ID, IUserEntry } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user-entry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ADDUSER_SERVICE_ID = <span class="hljs-string"><span class="hljs-string">"adduser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ADDUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/adduser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">IUserEntry</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">JSON.parse(req.body);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mutate</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.setEntryMutation</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">parsedBody</span></span></span></span><span class="xml"><span class="hljs-tag">) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">("</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ok</span></span></span></span><span class="xml"><span class="hljs-tag">"); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> };</span></span></code> </pre> <br>  <code>&lt;Service /&gt;</code>ç»„ä»¶-æ¥å—ä¸‰ä¸ªå‚æ•°ï¼š <br><br><ul><li> æ ‡è¯†ç¬¦ï¼ˆ <code>id</code> ï¼‰å¿…é¡»æ˜¯å”¯ä¸€å­—ç¬¦ä¸²ã€‚ å½“éœ€è¦åœ¨å…¶ä»–ç»„ä»¶ä¸­è°ƒç”¨<code>service</code>æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨æ ‡è¯†ç¬¦ï¼ˆ <code>id</code> ï¼‰ã€‚ </li><li>  <code>path</code> ï¼ˆä»¥/å¼€å¤´ï¼‰è¡¨ç¤ºæ‚¨æœåŠ¡çš„ç›¸å¯¹URLè·¯å¾„ </li><li> è¯¥<code>method</code>å¿…é¡»æ˜¯<code>GET</code> ï¼Œ <code>POST</code> ï¼Œ <code>UPDATE</code> ï¼Œ <code>DELETE</code> ã€‚ å®ƒæŒ‡ç¤ºæˆ‘ä»¬åœ¨è°ƒç”¨æœåŠ¡æ—¶ä½¿ç”¨çš„HTTPè¯·æ±‚ã€‚ </li></ul><br> æˆ‘ä»¬å°†<code>&lt;Middleware /&gt;</code>æ·»åŠ ä¸ºå­é¡¹ã€‚ è¯¥<code>&lt;Middleware /&gt;</code>å°†å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ æˆ‘ä»¬å¯ä»¥ç›´æ¥æä¾›Express.jsä¸­é—´ä»¶ã€‚ ç”±äºæˆ‘ä»¬è¦è®¿é—®æ•°æ®åº“ï¼Œå› æ­¤<code>serviceWithDataLayer</code>å‡½æ•°<code>serviceWithDataLayer</code>åœ¨<code>serviceWithDataLayer</code> ã€‚ è¿™ä¼šå°†<code>dataLayer</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ·»åŠ åˆ°æˆ‘ä»¬çš„å›è°ƒä¸­ã€‚ <br><br>  <code>DataLayer</code>æä¾›å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ï¼ <br><br>  <code>mutate</code>å¼‚æ­¥å‡½æ•°å°†æ›´æ”¹åº”ç”¨äºæˆ‘ä»¬æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ è¿™éœ€è¦ä¸€ä¸ªå®¢æˆ·ç«¯å’Œä¸€ä¸ªmutationå‘½ä»¤ä½œä¸ºå‚æ•°ã€‚ <br><br> å…ƒç´ æ•°æ®æ˜¯ä¸€ä¸ªJavascriptå¯¹è±¡ï¼Œå…·æœ‰æ‰€æœ‰å¿…éœ€çš„é”®å€¼å¯¹ã€‚ åœ¨æˆ‘ä»¬çš„æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬ä»è¯·æ±‚ä¸»ä½“è·å¾—æ­¤å¯¹è±¡ã€‚ å¯¹äº<code>User</code>å¯¹è±¡å…·æœ‰ä»¥ä¸‹ç»“æ„ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface IUserEntry { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">address</span></span>: string }</code> </pre> <br> è¯¥å¯¹è±¡é‡‡ç”¨åç§°<code>primaryKey</code>å’Œ<code>rangeKey</code>æ‰€æœ‰è¿™äº›é”®ï¼Œæˆ‘ä»¬åœ¨ç¡®å®š<code>&lt;Entry /&gt;</code> <br><br> æ³¨æ„ï¼šç›®å‰ï¼Œå”¯ä¸€å—æ”¯æŒçš„ç±»å‹æ˜¯ä¸&lt;Entry /&gt;å®šä¹‰ä¸­çš„GraphQLStringåŒ¹é…çš„å­—ç¬¦ä¸²ã€‚ <br> ä¸Šé¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œæˆ‘ä»¬é‡‡å–æ•°æ®<code>IUserEntry</code>ä»èº«ä½“ã€‚ æ€ä¹ˆæ ·äº† <br><br> åŸºç¡€ç»“æ„ç»„ä»¶æä¾›å¼‚æ­¥åŠŸèƒ½<code>callService (serviceId, dataObject)</code> ã€‚ è¯¥å‡½æ•°æ¥å—æœåŠ¡æ ‡è¯†ç¬¦ï¼ŒJavascriptå¯¹è±¡ï¼ˆç”¨äºåœ¨ä½¿ç”¨<code>POST</code>æ—¶ä½œä¸ºè¯·æ±‚ä¸»ä½“å‘é€ï¼‰ï¼Œ <code>success</code>å‡½æ•°å’Œé”™è¯¯å›è°ƒå‡½æ•°ã€‚ <br><br> ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å¯¹æˆ‘ä»¬çš„<code>&lt;AddUserService /&gt;</code> æˆ‘ä»¬ç‚¹<code>serviceId</code> ã€‚ è€Œæˆ‘ä»¬é€šè¿‡<code>userData</code> ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦ä½œä¸ºå‚æ•°ä¼ é€’ç»™æˆ‘ä»¬çš„å‡½æ•°ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callAddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userData: IUserEntry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( ADDUSER_SERVICE_ID, userData, (data: any) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"received data: "</span></span>, data); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); };</code> ï¼‰{ <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callAddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userData: IUserEntry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( ADDUSER_SERVICE_ID, userData, (data: any) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"received data: "</span></span>, data); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); };</code> æ•°æ®ï¼‰; <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callAddUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userData: IUserEntry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( ADDUSER_SERVICE_ID, userData, (data: any) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"received data: "</span></span>, data); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); };</code> </pre> <br> ç°åœ¨<code>callAddUserService</code>åŠŸèƒ½-è¿™æ˜¯æ‰€æœ‰æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·ã€‚ ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·å•å‡»æŒ‰é’®æ—¶è°ƒç”¨å®ƒï¼š <br><br><pre> <code class="javascript hljs">&lt;button onClick={() =&gt; callAddUserService({ <span class="hljs-attr"><span class="hljs-attr">username</span></span>: username, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: userid, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: age, <span class="hljs-attr"><span class="hljs-attr">address</span></span>: address })}&gt;Save&lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt;</span></span></code> </pre> <br> æˆ‘ä»¬åªæ˜¯ä½¿ç”¨<code>IUserEntry</code>å¯¹è±¡æ¥è°ƒç”¨å®ƒã€‚ å®ƒè°ƒç”¨æ­£ç¡®çš„æœåŠ¡ï¼ˆå¦‚å…¶æ ‡è¯†ç¬¦ï¼ˆ <code>id</code> ï¼‰æ‰€ç¤ºï¼‰ã€‚ å®ƒå°†<code>userData</code>æ”¾å…¥è¯·æ±‚æ­£æ–‡ä¸­ã€‚  <code>&lt;AddUserService /&gt;</code>ä»æ­£æ–‡ä¸­è·å–æ•°æ®å¹¶å°†å…¶æ”¾å…¥æ•°æ®åº“ä¸­ã€‚ <br><br><h3> ä»æ•°æ®åº“ä¸­è·å–çš„é¡¹ç›® </h3><br> ä»æ•°æ®åº“ä¸­æ£€ç´¢é¡¹ç›®å°±åƒæ·»åŠ å®ƒä»¬ä¸€æ ·å®¹æ˜“ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GETUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/getuser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.getEntryQuery</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">username:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.username</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">userid:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.userid</span></span></span></span><span class="xml"><span class="hljs-tag"> }) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">JSON.stringify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag">)); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> }</span></span></code> â€ï¼šâ€˜*â€™ï¼Œ//éœ€è¦CORSå·¥ä½œæ”¯æŒ <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">GETUSER_SERVICE_ID</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/getuser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Middleware</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">callback</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{serviceWithDataLayer(async</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">function</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">next</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">const</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">await</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span></span><span class="xml"><span class="hljs-tag">( </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.client</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataLayer.getEntryQuery</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">USER_ENTRY_ID</span></span></span></span><span class="xml"><span class="hljs-tag">, { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">username:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.username</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">userid:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">req.query.userid</span></span></span></span><span class="xml"><span class="hljs-tag"> }) ); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">res.status</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">200</span></span></span></span><span class="xml"><span class="hljs-tag">)</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.set</span></span></span></span><span class="xml"><span class="hljs-tag">({ "</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Access-Control-Allow-Origin</span></span></span></span><span class="xml"><span class="hljs-tag">" </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> "*", // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Required</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">CORS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">support</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">work</span></span></span></span><span class="xml"><span class="hljs-tag"> })</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.send</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">JSON.stringify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag">)); })}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> }</span></span></code> </pre> <br> å†æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;æœåŠ¡/&gt;ï¼Œ&lt;ä¸­é—´ä»¶/&gt;å’Œä¸€ä¸ªå›è°ƒå‡½æ•°æ¥è®¿é—®æ•°æ®åº“ã€‚ <br><br> å–è€Œä»£ä¹‹çš„æ˜¯åŠŸèƒ½<code>mutate</code> ï¼Œè¿™å°†å…ƒç´ æ·»åŠ åˆ°æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>select</code> ã€‚ è¯¥å‡½æ•°ä»<code>dataLayer</code>è¯·æ±‚æˆ‘ä»¬è¦ä½¿ç”¨çš„å®¢æˆ·ç«¯ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>select</code>å‘½ä»¤ã€‚ åƒ<code>mutation</code>å‘½ä»¤ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>dataLayer</code>åˆ›å»ºä¸€ä¸ª<code>select</code>å‘½ä»¤ã€‚ <br><br> è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨<code>getEntryQuery</code>å‡½æ•°ã€‚ æˆ‘ä»¬æä¾›äº†è¦æ¥æ”¶å…¶å…ƒç´ çš„æ ‡è¯†ç¬¦ï¼ˆ <code>id</code> ï¼‰ <code>&lt;Entry /&gt;</code> ã€‚ å¹¶ä¸”æˆ‘ä»¬æä¾›äº†Javascriptå¯¹è±¡ä¸­ç‰¹å®šå…ƒç´ çš„é”®ï¼ˆ <code>primaryKey</code>å’Œ<code>rangeKey</code> ï¼‰ã€‚ ç”±äºæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªé”®ï¼Œå› æ­¤æˆ‘ä»¬è¿”å›äº†ä¸€ä¸ªå…ƒç´ ã€‚ å¦‚æœå®ƒçš„å­˜åœ¨ã€‚ <br><br> å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬ä»è¯·æ±‚ä¸­è·å–é”®å€¼ã€‚ ä½†æ˜¯è¿™æ¬¡ï¼Œæˆ‘ä»¬ä»<code>request.query</code>è·å–å®ƒä»¬ï¼Œè€Œä¸æ˜¯ä»<code>request.body</code>è·å–å®ƒä»¬ã€‚ å…¶åŸå› æ˜¯ï¼Œè¯¥æœåŠ¡ä½¿ç”¨<code>GET</code> -æ–¹æ³•ã€‚ æ­¤æ–¹æ³•ä¸æ”¯æŒè¯·æ±‚ä¸­çš„æ­£æ–‡ã€‚ ä½†å®ƒæä¾›çš„å…¨éƒ¨èµ„æ–™çš„æŸ¥è¯¢å‚æ•°ã€‚ <br><br> åŠŸèƒ½<code>callService</code>å¤„ç†è¿™å¯¹æˆ‘ä»¬æ¥è¯´ã€‚ åƒåœ¨<code>callAddUserService-function</code> ï¼Œæˆ‘ä»¬æä¾›è¦è°ƒç”¨çš„æ ‡è¯†ç¬¦ï¼ˆ <code>id</code> ï¼‰ <code>&lt;Service /&gt;</code> ã€‚ æˆ‘ä»¬æä¾›å¿…è¦çš„æ•°æ®ã€‚ åªæœ‰é’¥åŒ™ã€‚ æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚ <br><br> æˆåŠŸçš„å›è°ƒå¯æä¾›å“åº”ã€‚  jsonæ ¼å¼çš„å“åº”ä¸»ä½“åŒ…å«æˆ‘ä»¬çš„foundå…ƒç´ ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>get_user_entry</code>é”®è®¿é—®æ­¤å…ƒç´ ã€‚  â€œ <code>Get_</code> â€å®šä¹‰äº†æˆ‘ä»¬æ”¾ç½®åœ¨é€‰æ‹©å‡½æ•°ä¸­çš„è¯·æ±‚ã€‚  â€œ <code>User_entry</code> â€æ˜¯æˆ‘ä»¬<code>&lt;Entry /&gt;</code>çš„é”®ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callGetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">username: string, userid: string, onData: (userData: IUserEntry</span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( GETUSER_SERVICE_ID, { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: username, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: userid }, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response: any</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); onData(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); }); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); }</code> ï¼Œç”¨æˆ·IDï¼šä¸²ï¼Œæ˜‚è¾¾ï¼šï¼ˆç”¨æˆ·æ•°æ®ï¼šIUserEntryï¼‰=&gt;ç©ºéš™ï¼‰{ <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callGetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">username: string, userid: string, onData: (userData: IUserEntry</span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( GETUSER_SERVICE_ID, { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: username, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: userid }, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response: any</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); onData(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); }); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); }</code> ï¼ˆæ•°æ®ï¼‰{ <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callGetUserService</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">username: string, userid: string, onData: (userData: IUserEntry</span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callService( GETUSER_SERVICE_ID, { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: username, <span class="hljs-attr"><span class="hljs-attr">userid</span></span>: userid }, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response: any</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); onData(data[<span class="hljs-string"><span class="hljs-string">`get_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${USER_ENTRY_ID}</span></span></span><span class="hljs-string">`</span></span>]); }); }, (error) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error: "</span></span> , error) } ); }</code> </pre> <br><h2> çœ‹ä¸€ä¸‹æ‚¨çš„å…¨æ ˆåº”ç”¨ç¨‹åºã€‚ </h2><br> å¦‚æœä½ è¿˜æ²¡æœ‰å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œç°åœ¨æ˜¯è¿™æ ·åšçš„æ—¶å€™ï¼š <code>npm run start-{your-env-name}</code> ã€‚ <br><br> ä½ ç”šè‡³å¯ä»¥éƒ¨ç½²ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤æ‚¨çš„åº”ç”¨ç¨‹åºAWSï¼š <code>npm run deploy-{your-env-name}</code> ã€‚  ï¼ˆè¯·è®°ä½å°†AWSå‡­è¯æ”¾å…¥.envæ–‡ä»¶ä¸­ï¼‰ã€‚ <br><br> è¿™ç¯‡æ–‡ç« æ²¡æœ‰æè¿°å¦‚ä½•è¾“å…¥æ”¾å…¥æ•°æ®åº“çš„æ•°æ®ä»¥åŠå¦‚ä½•æ˜¾ç¤ºç»“æœã€‚  <code>callAddUserService</code>å’Œ<code>callGetUserService</code>å°è£…äº†ç‰¹å®šäºæœåŠ¡å’Œæ•°æ®åº“çš„æ‰€æœ‰å†…å®¹ã€‚ æ‚¨åªéœ€å°†Javascriptå¯¹è±¡æ”¾å…¥å…¶ä¸­ï¼Œç„¶åå°†å…¶å–å›å³å¯ã€‚ <br><br> æ‚¨å¯ä»¥åœ¨æ­¤<a href="https://github.com/infrastructure-components/soa-dl">GitHubå­˜å‚¨åº“ä¸­</a>æ‰¾åˆ°æ­¤ç¤ºä¾‹çš„æºä»£ç ã€‚ å®ƒåŒ…æ‹¬ä¸€ä¸ªéå¸¸ç®€å•çš„ç”¨æˆ·ç•Œé¢ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN476696/">https://habr.com/ru/post/zh-CN476696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN476682/index.html">å¦‚ä½•åœ¨Phaserä¸­ç¼–å†™ä¸€ä¸ªSapperå¹¶è¿è¡ŒHTML5å¼€å‘äººå‘˜æµ‹è¯•ä»»åŠ¡</a></li>
<li><a href="../zh-CN476686/index.html">åŸºäºRaspberry CM3 +çš„ç‰©è”ç½‘ç½‘å…³çš„å¼€å‘</a></li>
<li><a href="../zh-CN476688/index.html">OTUSçš„æ–°è¯¾ç¨‹ã€‚ â€œ IOSå¼€å‘äººå‘˜ã€‚ é«˜çº§è¯¾ç¨‹V 2.0Â»</a></li>
<li><a href="../zh-CN476692/index.html">å†…å®¹è¥é”€åŸåˆ™</a></li>
<li><a href="../zh-CN476694/index.html">å…³äºä¸Farida Roslovetsä»¥åŠElectro-neeek RPAä¸»ç®¡ä¸€èµ·è¿›è¡Œçš„ä¸šåŠ¡æœºå™¨äººåŒ–</a></li>
<li><a href="../zh-CN476698/index.html">è‹¹æœå¦‚ä½•æ€æ­»ç½‘ç»œæŠ€æœ¯</a></li>
<li><a href="../zh-CN476700/index.html">Mesåœ¨ç”Ÿäº§é’¢åˆ¶æ•£çƒ­å™¨</a></li>
<li><a href="../zh-CN476702/index.html">å†…é™†çš„ä¸€ä¸ªå°é•‡å¦‚ä½•å˜æˆå›½é™…ç”µå­å•†åŠ¡ä¸­å¿ƒ</a></li>
<li><a href="../zh-CN476704/index.html">å¦‚ä½•ä½¿ç”¨ç›¸åŒç±»å‹çš„å…ƒç´ ä½¿ç”µå­é‚®ä»¶çš„å¸ƒå±€è‡ªåŠ¨åŒ–ï¼šæˆ‘ä»¬ä½¿ç”¨æ™ºèƒ½å¯¹è±¡</a></li>
<li><a href="../zh-CN476706/index.html">Cerebras Systemsæ¨å‡ºäº†å…·æœ‰å…¨çƒæœ€å¤§å¤„ç†å™¨22Ã—22å˜ç±³çš„è®¡ç®—æœº</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>