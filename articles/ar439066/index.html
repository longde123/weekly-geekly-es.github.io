<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฒ ๐ค ๐คฎ ูุธุงู ุงูุชุดุบูู ุนูู ุงูุตุฏุฃ. ุฐุงูุฑุฉ ุงูุตูุญุฉ: ูุชูุฏู ๐ท๏ธ โน๏ธ ๐ฉ๐ผโ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุดุฑุญ ูุฐู ุงูููุงูุฉ ููู ูููู ูููุงุฉ ูุธุงู ุงูุชุดุบูู ุงููุตูู ุฅูู ุฅุทุงุฑุงุช ุงูุฐุงูุฑุฉ ุงููุนููุฉ. ุณูู ูุฏุฑุณ ูุธููุฉ ุชุญููู ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ ุฅูู ุนูุงููู ูุนููุฉ. ุณููุชุดู ุฃูุถู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุธุงู ุงูุชุดุบูู ุนูู ุงูุตุฏุฃ. ุฐุงูุฑุฉ ุงูุตูุญุฉ: ูุชูุฏู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439066/" style=";text-align:right;direction:rtl">  ุชุดุฑุญ ูุฐู ุงูููุงูุฉ ููู ูููู ูููุงุฉ ูุธุงู ุงูุชุดุบูู ุงููุตูู ุฅูู ุฅุทุงุฑุงุช ุงูุฐุงูุฑุฉ ุงููุนููุฉ.  ุณูู ูุฏุฑุณ ูุธููุฉ ุชุญููู ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ ุฅูู ุนูุงููู ูุนููุฉ.  ุณููุชุดู ุฃูุถูุง ููููุฉ ุฅูุดุงุก ุชุนูููุงุช ุฌุฏูุฏุฉ ูู ุฌุฏุงูู ุงูุตูุญุงุช. <br><br>  ุชู ูุดุฑ ูุฐู ุงููุฏููุฉ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุซุจ</a> .  ุฅุฐุง ูุงู ูุฏูู ุฃู ุฃุณุฆูุฉ ุฃู ูุดุงูู ุ ุงูุชุญ ุงูุชุฐูุฑุฉ ุงูููุงุจูุฉ ููุงู.  ุฌููุน ูุตุงุฏุฑ ุงูููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br><br><h1 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br>  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุฃุฎูุฑุฉ ุ</a> ุชุนูููุง ุญูู ูุจุงุฏุฆ ุฐุงูุฑุฉ ุงูุชุฑุญูู ูููู ุชุนูู ุฌุฏุงูู ุงูุตูุญุงุช ุฐุงุช ุงููุณุชูู ุงูุฑุงุจุน ุนูู x86_64.  ููุฏ ูุฌุฏูุง ุฃูุถูุง ุฃู ุงูููุญูู ูุฏ ูุงู ุจุงููุนู ุจุฅุนุฏุงุฏ ุงูุชุณูุณู ุงููุฑูู ูุฌุฏูู ุงูุตูุญุงุช ููููุงุฉ ูุฏููุง ุ ูุจุงูุชุงูู ูุฅู ุงูููุงุฉ ุชุนูู ุนูู ุนูุงููู ุงูุชุฑุงุถูุฉ.  ูุฐุง ูุญุณู ุงูุฃูุงู ุ ููู ุงููุดููุฉ ุชุจุฑุฒ: ููููุฉ ุงููุตูู ุฅูู ุงูุนูุงููู ุงููุนููุฉ ุงูุญููููุฉ ุงููุฎุฒูุฉ ูู ุฅุฏุฎุงูุงุช ุฌุฏูู ุงูุตูุญุฉ ุฃู <code>CR3</code> ุ <br><a name="habracut"></a><br>  ูู ุงููุณู ุงูุฃูู ูู ุงูููุงูุฉ ุ ุณููุงูุด ุงููุดููุฉ ูุงูููุงูุฌ ุงููุฎุชููุฉ ูุญููุง.  ุจุนุฏ ุฐูู ุ ูููู ุจุชูููุฐ ุฏุงูุฉ ุชุชุณูู ุนุจุฑ ุงูุชุณูุณู ุงููุฑูู ูุฌุฏุงูู ุงูุตูุญุงุช ูุชุญููู ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ ุฅูู ุนูุงููู ูุนููุฉ.  ุฃุฎูุฑูุง ุ ุชุนูู ููููุฉ ุฅูุดุงุก ุชุนูููุงุช ุฌุฏูุฏุฉ ูู ุฌุฏุงูู ุงูุตูุญุงุช ูุงูุนุซูุฑ ุนูู ุฅุทุงุฑุงุช ุงูุฐุงูุฑุฉ ุบูุฑ ุงููุณุชุฎุฏูุฉ ูุฅูุดุงุก ุฌุฏุงูู ุฌุฏูุฏุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุญุฏูุซุงุช ุงูุชุจุนูุฉ </h2><br>  ููุนูู ุ ุชุญุชุงุฌ ุฅูู ุงูุฅุตุฏุงุฑ <code>x86_64</code> 0.4.0 ุฃู ุงูุฃุญุฏุซ.  ุชุญุฏูุซ ุงูุชุจุนูุฉ ูู <code>Cargo.toml</code> ูุฏููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs">[dependencies] x86_64 = <span class="hljs-string"><span class="hljs-string">"0.4.0"</span></span> # or later</code> </pre> <br><h1 style=";text-align:right;direction:rtl">  ุงููุตูู ุฅูู ุฌุฏุงูู ุงูุตูุญุงุช </h1><br>  ููุณ ูู ุงูุณูู ุงููุตูู ุฅูู ุฌุฏุงูู ุงูุตูุญุงุช ูู ุงูููุงุฉ.  ูููู ุงููุดููุฉ ุ ุฃูู ูุธุฑุฉ ุฃุฎุฑู ุนูู ุงูุชุณูุณู ุงููุฑูู ููุฌุฏูู ุฐู ุงููุณุชูู ุงูุฑุงุจุน ูู ุงูููุงูุฉ ุงูุณุงุจูุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9c8/5e8/a14/9c85e8a145a9078cfcfd92e204f69a5b.svg"></div><br><br>  ุงูุดูุก ุงูููู ูู ุฃู ูู ุฅุฏุฎุงู ุตูุญุฉ ูุฎุฒู ุงูุนููุงู <i>ุงููุนูู</i> ููุฌุฏูู ุงูุชุงูู.  ูุฐุง ูุชุฌูุจ ุชุฑุฌูุฉ ูุฐู ุงูุนูุงููู ุ ููุง ูููู ูู ุงูุฃุฏุงุก ููุคุฏู ุจุณูููุฉ ุฅูู ุญููุงุช ูุง ููุงูุฉ ููุง. <br><br>  ุงููุดููุฉ ูู ุฃูู ูุง ูููููุง ุงููุตูู ูุจุงุดุฑุฉ ุฅูู ุงูุนูุงููู ุงููุนููุฉ ูู ุงูููุงุฉ ุ ูุฃููุง ุชุนูู ุฃูุถูุง ุนูู ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูุฐูุจ ุฅูู ุงูุนููุงู <code>4 KiB</code> ุ ูููููุง ุงููุตูู ุฅูู ุงูุนููุงู <i>ุงูุงูุชุฑุงุถู</i> <code>4 KiB</code> ุ ูููุณ ุฅูู ุงูุนููุงู <i>ุงููุนูู</i> ุญูุซ ูุชู ุชุฎุฒูู ุฌุฏูู ุตูุญุงุช ุงููุณุชูู ุงูุฑุงุจุน.  ุฅุฐุง ููุง ูุฑูุฏ ุงููุตูู ุฅูู ุงูุนููุงู ุงููุนูู ูู <code>4 KiB</code> ุ ูุฅููุง ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุจุนุถ ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ ุ ูุงูุชู ูุชู ุชุฑุฌูุชูุง ุฅูููุง. <br><br>  ูุฐูู ุ ูููุตูู ุฅูู ุฅุทุงุฑุงุช ุฌุฏุงูู ุงูุตูุญุงุช ุ ุชุญุชุงุฌ ุฅูู ุชุนููู ุจุนุถ ุงูุตูุญุงุช ุงูุงูุชุฑุงุถูุฉ ููุฐู ุงูุฅุทุงุฑุงุช.  ููุงู ุทุฑู ูุฎุชููุฉ ูุฅูุดุงุก ูุซู ูุฐู ุงูุชุนูููุงุช. <br><br>  1. ุงูุญู ุงูุจุณูุท ูู <b>ุงูุนุฑุถ ุงููุชุทุงุจู ูุฌููุน ุฌุฏุงูู ุงูุตูุญุงุช</b> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8f3/813/916/8f3813916cd0a5b5174c8d14dabedb7a.svg"></div><br><br>  ูู ูุฐุง ุงููุซุงู ุ ูุฑู ุงูุนุฑุถ ุงููุชูุงุซู ููุฅุทุงุฑุงุช.  ุงูุนูุงููู ุงููุนููุฉ ูุฌุฏุงูู ุงูุตูุญุงุช ูู ูู ุงูููุช ููุณู ุนูุงููู ุงูุชุฑุงุถูุฉ ุตุงูุญุฉ ุ ุญุชู ูุชููู ูู ุงููุตูู ุจุณูููุฉ ุฅูู ุฌุฏุงูู ุงูุตูุญุงุช ุจุฌููุน ุงููุณุชููุงุช ุ ุจุฏุกูุง ูู ุงูุชุณุฌูู CR3. <br><br>  ููุน ุฐูู ุ ูุฅู ูุฐุง ุงูููุฌ ููุชูู ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ููุฌุนู ูู ุงูุตุนุจ ุงูุนุซูุฑ ุนูู ููุงุทู ูุจูุฑุฉ ูุชุฌุงูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุงูุฎุงููุฉ.  ูููุชุฑุถ ุฃููุง ูุฑูุฏ ุฅูุดุงุก ูุณุงุญุฉ ุฐุงูุฑุฉ ุงูุชุฑุงุถูุฉ 1000 ููููุจุงูุช ูู ุงูุดูู ุฃุนูุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุนุฑุถ ููู ูู ุงูุฐุงูุฑุฉ</a> .  ูุง ูููููุง ุฃู ูุจุฏุฃ ุจููุทูุฉ <code>28  KiB</code> ุ ูุฃููุง ุชูุน ุนูู ุตูุญุฉ ูุดุบููุฉ ุจุงููุนู ูู <code>1004  KiB</code> .  ูุฐูู ุ ุณูุชุนูู ุนููู ุงูุจุญุซ ุฃูุซุฑ ุญุชู ูุฌุฏ ุดุธูุฉ ูุจูุฑุฉ ููุงุณุจุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุน <code>1008  KiB</code> .  ููุงู ููุณ ูุดููุฉ ุงูุชุฌุฒุฆุฉ ููุง ูู ุงูุฐุงูุฑุฉ ุงูููุณูุฉ. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุนุฏ ุฅูุดุงุก ุฌุฏุงูู ุตูุญุงุช ุฌุฏูุฏุฉ ุฃูุซุฑ ุชุนููุฏูุง ุ ุญูุซ ูุญุชุงุฌ ุฅูู ุงูุนุซูุฑ ุนูู ุฅุทุงุฑุงุช ูุงุฏูุฉ ูู ูุชู ุงุณุชุฎุฏุงู ุตูุญุงุชูุง ุงูููุงุธุฑุฉ ุจุนุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ุจุงููุณุจุฉ ูููููุง ุ ูููุง ุจุญุฌุฒ ูุณุงุญุฉ ูุฏุฑูุง 1000 ููููุจุงูุช ูู ุงูุฐุงูุฑุฉ <i>ุงูุธุงูุฑูุฉ</i> ุ ุจุฏุกูุง ูู ุงูุนููุงู <code>1008  KiB</code> .  ุงูุขู ูู ูุนุฏ ุจุฅููุงููุง ุงุณุชุฎุฏุงู ุฃู ุฅุทุงุฑ ุจุนููุงู ูุนูู ูุชุฑุงูุญ ูุง ุจูู <code>1000  KiB</code> ู <code>2008  KiB</code> ุ ูุฃูู ูุง ูููู ุนุฑุถู ุจุดูู ููุงุซู. <br><br>  2. ููุงู ุฎูุงุฑ ุขุฎุฑ ููู <b>ุจุซ ุฌุฏุงูู ุงูุตูุญุงุช ูุคูุชูุง ููุท</b> ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุงููุตูู ุฅูููุง.  ุจุงููุณุจุฉ ุฅูู ุงูููุงุฑูุงุช ุงููุคูุชุฉ ุ ููุฒู ุชูุฏูู ุนุฑุถ ููุงุซู ูุฌุฏูู ุงููุณุชูู ุงูุฃูู ููุท: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/84e/177/978/84e177978079c02224d4032fa02f053b.png"></div><br><br>  ูู ูุฐุง ุงูุดูู ุ ูุฏูุฑ ุฌุฏูู ุงููุณุชูู ุงูุฃูู ุฃูู 2 ููุฌุงุจุงูุช ูู ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ.  ูุฐุง ูููู ูุฃู ุงููุตูู ูุชู ูู ุณุฌู CR3 ูู ุฎูุงู ุฅุฏุฎุงูุงุช ูุงุฑุบุฉ ูู ุฌุฏุงูู ุงููุณุชููุงุช 4 ู 3 ู 2. ูุชุฑุฌู ุงูุณุฌู ูุน ุงูููุฑุณ <b>8</b> ุงูุตูุญุฉ ุงูุงูุชุฑุงุถูุฉ ุนูุฏ <code>32 KiB</code> ุฅูู ุฅุทุงุฑ ูุนูู ุนูุฏ <code>32 KiB</code> ุ ูุจุงูุชุงูู ุชุญุฏูุฏ ุงูุฌุฏูู ุงููุณุชูู 1 ููุณู. ูู ุงูุดูู ูุธูุฑ ูุฐุง ูู ุฎูุงู ุณูู ุฃููู. <br><br>  ูู ุฎูุงู ุงููุชุงุจุฉ ุฅูู ุฌุฏูู ุงููุณุชูู ุงูุฃูู ุงููุนูู ุจุดูู ููุงุซู ุ ูููู ูู kernel ุฅูุดุงุก ูุง ูุตู ุฅูู 511 ููุงุฑูุงุช ุฒูููุฉ (512 ูุงูุต ุงูุณุฌู ุงููุงุฒู ูุชุนููู ุงููููุฉ).  ูู ุงููุซุงู ุฃุนูุงู ุ ุชุทุงุจู ุงูููุงุฉ ุงูุณุฌู ุงูุฎุงูู ูุฌุฏูู ุงููุณุชูู 1 ูุน ุฅุทุงุฑ ุนูุฏ <code>24 KiB</code> .  ุฃุฏู ูุฐุง ุฅูู ุฅูุดุงุก ุชุนููู ูุคูุช ููุตูุญุฉ ุงูุงูุชุฑุงุถูุฉ ุนูุฏ <code>0 KiB</code> ุฅูู ุงูุฅุทุงุฑ ุงููุนูู ูุฌุฏูู ูุณุชูู ุงูุตูุญุฉ 2 ุงููุดุงุฑ ุฅููู ุจูุงุณุทุฉ ุงูุณูู ุงููููุท.  ูููู ููููุงุฉ ุงูุขู ุงููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 2 ุนู ุทุฑูู ุงููุชุงุจุฉ ุฅูู ุตูุญุฉ ุชุจุฏุฃ ูู <code>0 KiB</code> . <br><br>  ูุจุงูุชุงูู ุ ูุฅู ุงููุตูู ุฅูู ุฅุทุงุฑ ุชุนุณูู ูุฌุฏูู ุงูุตูุญุฉ ูุน ุชุนูููุงุช ูุคูุชุฉ ูุชููู ูู ุงูุฅุฌุฑุงุกุงุช ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุจุญุซ ุนู ุฅุฏุฎุงู ูุฌุงูู ูู ุฌุฏูู ุงููุณุชูู 1 ุงููุนุฑูุถ ุจุดูู ููุงุซู. <br></li><li style=";text-align:right;direction:rtl">  ูู ุจุชุนููู ูุฐุง ุงูุฅุฏุฎุงู ุนูู ุงูุฅุทุงุฑ ุงููุนูู ูุฌุฏูู ุงูุตูุญุฉ ุงูุฐู ูุฑูุฏ ุงููุตูู ุฅููู. <br></li><li style=";text-align:right;direction:rtl">  ูู ุจุงููุตูู ุฅูู ูุฐุง ุงูุฅุทุงุฑ ูู ุฎูุงู ุงูุตูุญุฉ ุงูุงูุชุฑุงุถูุฉ ุงููุฑุชุจุทุฉ ุจุงูุฅุฏุฎุงู. <br></li><li style=";text-align:right;direction:rtl">  ุฃุนุฏ ุงูุณุฌู ุฅูู ุบูุฑ ูุณุชุฎุฏู ุ ูุจุงูุชุงูู ูู ุจุฅุฒุงูุฉ ุงูุชุนููู ุงููุคูุช. </li></ul><br>  ูุน ูุฐุง ุงูุฃุณููุจ ุ ุชุธู ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ูุธููุฉ ุ ุญูุซ ูุชู ุงุณุชุฎุฏุงู ููุณ ุงูุตูุญุงุช ุงูุธุงูุฑูุฉ 512 ุจุงุณุชูุฑุงุฑ.  ุงูุนูุจ ูู ุจุนุถ ุงูุชุนููุฏ ุ ุฎุงุตุฉ ูุฃู ุงูููุงุฑูุฉ ุงูุฌุฏูุฏุฉ ูุฏ ุชุชุทูุจ ุชุบููุฑ ุนุฏุฉ ูุณุชููุงุช ูู ุงูุฌุฏูู ุ ุฃู ุฃููุง ูุญุชุงุฌ ุฅูู ุชูุฑุงุฑ ุงูุนูููุฉ ุงูููุถุญุฉ ุนุฏุฉ ูุฑุงุช. <br><br>  3. ุนูู ุงูุฑุบู ูู ุฃู ููุง ุงูููุฌูู ุฃุนูุงู ูุนููุงู ุ ุฅูุง ุฃู ููุงู ุทุฑููุฉ ุซุงูุซุฉ: <b>ุฌุฏุงูู ุงูุตูุญุงุช ุงูุนูุฏูุฉ</b> .  ููู ูุฌูุน ุจูู ูุฒุงูุง ููุชุง ุงูุทุฑููุชูู: ููู ููุงุฑู ุจุงุณุชูุฑุงุฑ ุฌููุน ุฅุทุงุฑุงุช ุฌุฏุงูู ุงูุตูุญุงุช ุฏูู ุงูุญุงุฌุฉ ุฅูู ููุงุฑูุงุช ูุคูุชุฉ ุ ููุง ูุจูู ุงูุตูุญุงุช ูุนูููุฉ ุฌูุจูุง ุฅูู ุฌูุจ ุ ูุน ุชุฌูุจ ุชุฌุฒุฆุฉ ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุณูู ูุณุชุฎุฏููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฌุฏุงูู ุงูุตูุญุฉ ุงูุนูุฏูุฉ </h2><br>  ุงูููุฑุฉ ูู ุชุฑุฌูุฉ ุจุนุถ ุงูุณุฌูุงุช ูู ุฌุฏูู ุงููุณุชูู ุงูุฑุงุจุน ุฅูู ููุณู.  ูุจุงูุชุงูู ุ ูุฅููุง ูุญุชูุธ ูุนูููุง ุจุฌุฒุก ูู ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ููุนูู ุฌููุน ุฅุทุงุฑุงุช ุงูุฌุฏูู ุงูุญุงููุฉ ูุงููุณุชูุจููุฉ ููุฐู ุงููุณุงุญุฉ. <br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงู ูููู ููู ูุนูู ูู ูุฐุง: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/779/ee6/d9b/779ee6d9bf771dec8e6d22c0440e503d.png"></div><br><br>  ุงูุงุฎุชูุงู ุงููุญูุฏ ูู ุงููุซุงู ูู ุจุฏุงูุฉ ุงูููุงูุฉ ูู ุณุฌู ุฅุถุงูู ูุน ุงูููุฑุณ <code>511</code> ูู ุฌุฏูู ุงููุณุชูู 4 ุ ูุงูุฐู ุชู ุชุนูููู ุฅูู ุงูุฅุทุงุฑ ุงููุนูู <code>4 KiB</code> ุ ุงูููุฌูุฏ ูู ูุฐุง ุงูุฌุฏูู ููุณู. <br><br>  ุนูุฏูุง ูุชู ุชุดุบูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูู ูุฐุง ุงูุณุฌู ุ ูุฅููุง ูุง ุชุดูุฑ ุฅูู ุฌุฏูู ุงููุณุชูู 3. ูููููุง ุชุดูุฑ ูุฑุฉ ุฃุฎุฑู ุฅูู ุฌุฏูู ุงููุณุชูู 4. ููุฐุง ูุดุงุจู ููุธููุฉ ูุชูุฑุฑุฉ ุชุณุชุฏุนู ููุณูุง.  ูู ุงูููู ุฃู ููุชุฑุถ ุงููุนุงูุฌ ุฃู ูู ุณุฌู ูู ุฌุฏูู ุงููุณุชูู 4 ูุดูุฑ ุฅูู ุฌุฏูู ุงููุณุชูู 3 ุ ูุฐูู ูุชุนุงูู ุงูุขู ูุน ุฌุฏูู ุงููุณุชูู 4. ูุฌุฏูู ูู ุงููุณุชูู 3. ููุฐุง ูุนูู ูุฃู ุฌุฏุงูู ุฌููุน ุงููุณุชููุงุช ูู x86_64 ููุง ููุณ ุงูุจููุฉ. <br><br>  ุจุงุชุจุงุน ุณุฌู ูุชูุฑุฑ ูุฑุฉ ุฃู ุฃูุซุฑ ูุจู ุจุฏุก ุงูุชุญููู ุงููุนูู ุ ูููููุง ุชูููู ุนุฏุฏ ุงููุณุชููุงุช ุงูุชู ููุฑ ุจูุง ุงููุนุงูุฌ ุจุดูู ูุนุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุงุชุจุนูุง ุงูุณุฌู ุงูุนูุฏู ูุฑุฉ ูุงุญุฏุฉ ุ ุซู ุงูุชูููุง ุฅูู ุฌุฏูู ุงููุณุชูู 3 ุ ูุนุชูุฏ ุงููุนุงูุฌ ุฃู ุฌุฏูู ุงููุณุชูู 3. ูู ุฌุฏูู ูู ุงููุณุชูู 2. ุฃุซูุงุก ุงูุงูุชูุงู ุ ูุนุชุจุฑ ุฌุฏูู ุงููุณุชูู 2 ุจูุซุงุจุฉ ุฌุฏูู ุงููุณุชูู ุงูุฃูู ุ ูุฌุฏูู ุงููุณุชูู 1 ููุง ุชู ุชุนูููู ุงูุฅุทุงุฑ ูู ุงูุฐุงูุฑุฉ ุงููุนููุฉ.  ูุฐุง ูุนูู ุฃูู ูููููุง ุงูุขู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุฅูู ุฌุฏูู ูุณุชูู ุงูุตูุญุฉ 1 ูุฃู ุงููุนุงูุฌ ูุนุชูุฏ ุฃู ูุฐุง ุฅุทุงุฑ ูุนูู.  ููุถุญ ุงูุดูู ุฃุฏูุงู ุงูุฎุทูุงุช ุงูุฎูุณ ููุซู ูุฐู ุงูุชุฑุฌูุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bda/ac7/191/bdaac719103c574c655efa3604d0b842.png"></div><br><br>  ูุจุงููุซู ุ ูููููุง ูุชุงุจุนุฉ ุฅุฏุฎุงู ูุชูุฑุฑ ูุฑุชูู ูุจู ุจุฏุก ุงูุชุญููู ูุชูููู ุนุฏุฏ ุงููุณุชููุงุช ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู ูุณุชูููู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7f4/b9a/c47/7f4b9ac47fce9552dead4e551b804256.png"></div><br><br>  ุฏุนูุง ูุฐูุจ ูู ุฎูุงู ูุฐุง ุงูุฅุฌุฑุงุก ุฎุทูุฉ ุจุฎุทูุฉ.  ุฃููุงู ุ ุชุชุจุน ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุฅุฏุฎุงููุง ูุชูุฑุฑูุง ูู ุฌุฏูู ุงููุณุชูู 4 ูุชุนุชูุฏ ุฃููุง ูุตูุช ุฅูู ูุณุชูู ุงููุณุชูู 3. ุซู ุชุชุจุน ุงูุณุฌู ุงููุชูุฑุฑ ูุฑุฉ ุฃุฎุฑู ูุชุนุชูุฏ ุฃููุง ูุตูุช ุฅูู ุงููุณุชูู 2. ูููู ูู ุงููุงูุน ูุง ุชุฒุงู ูู ุงููุณุชูู 4. ุซู ุชูุชูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุฅูู ุงูุนููุงู ุงูุฌุฏูุฏ ููุฏุฎู ูู ุฌุฏูู ุงููุณุชูู 3. ููููู ูุนุชูุฏ ุฃูู ููุฌูุฏ ุจุงููุนู ูู ุฌุฏูู ุงููุณุชูู 1. ุฃุฎูุฑูุง ุ ุนูุฏ ููุทุฉ ุงูุฅุฏุฎุงู ุงูุชุงููุฉ ูู ุฌุฏูู ุงููุณุชูู 2. ูุนุชูุฏ ุงููุนุงูุฌ ุฃูู ูุฏ ูุตู ุฅูู ุฅุทุงุฑ ุงูุฐุงูุฑุฉ ุงููุนููุฉ.  ูุฐุง ูุชูุญ ููุง ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุฅูู ุฌุฏูู ุงููุณุชูู 2. <br><br>  ูุชู ุงููุตูู ุฃูุถูุง ุฅูู ุฌุฏุงูู ุงููุณุชููุงุช 3 ู 4. ูููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 3 ุ ูุชุจุน ุณุฌููุง ูุชูุฑุฑูุง ุซูุงุซ ูุฑุงุช: ูุนุชูุฏ ุงููุนุงูุฌ ุฃูู ููุฌูุฏ ุจุงููุนู ูู ุฌุฏูู ุงููุณุชูู 1 ุ ููู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูุตู ุฅูู ุงููุณุชูู 3 ุ ูุงูุฐู ุชุนุชุจุฑู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุฅุทุงุฑ ูุนูู.  ูููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 4 ููุณู ุ ูุญู ุจุจุณุงุทุฉ ูุชุจุน ุงูุณุฌู ุงูุนูุฏู ุฃุฑุจุน ูุฑุงุช ุญุชู ุงููุนุงูุฌ ูุนุงูุฌ ุฌุฏูู ุงููุณุชูู 4 ููุณู ูุฅุทุงุฑ ูุนูู (ุจุงูููู ุงูุฃุฒุฑู ูู ุงูุดูู ุฃุฏูุงู). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/487/a82/92c/487a8292cf8fe673f1914f5f198c0956.png"></div><br><br>  ูู ุงูุตุนุจ ููู ูุฐุง ุงูููููู ูู ุงูุจุฏุงูุฉ ุ ููููู ูู ุงููุงูุน ูุนูู ุจุดูู ุฌูุฏ. <br><br><h4 style=";text-align:right;direction:rtl">  ุญุณุงุจ ุงูุนููุงู </h4><br>  ูุฐูู ุ ูููููุง ุงููุตูู ุฅูู ุงูุฌุฏุงูู ูู ุฌููุน ุงููุณุชููุงุช ุจุงุชุจุงุน ุณุฌู ูุชูุฑุฑ ูุฑุฉ ุฃู ุฃูุซุฑ.  ูุธุฑูุง ูุฃู ุงูููุงุฑุณ ุงูููุฌูุฏุฉ ูู ุงูุฌุฏุงูู ุฐุงุช ุงููุณุชููุงุช ุงูุฃุฑุจุนุฉ ูุณุชูุฏุฉ ูุจุงุดุฑุฉู ูู ุงูุนููุงู ุงูุธุงูุฑู ุ ูุฌุจ ุฅูุดุงุก ุนูุงููู ุงูุชุฑุงุถูุฉ ุฎุงุตุฉ ููุฐู ุงูุทุฑููุฉ.  ููุง ูุฐูุฑ ุ ูุชู ุงุณุชุฎุฑุงุฌ ููุงุฑุณ ุฌุฏูู ุงูุตูุญุฉ ูู ุงูุนููุงู ููุง ููู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c44/33c/8f9/c4433c8f99b6fcb54d4b79983ca35dbc.svg"></div><br><br>  ูููุชุฑุถ ุฃููุง ูุฑูุฏ ุงููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู ุงูุฃูู ุงูุฐู ูุนุฑุถ ุตูุญุฉ ูุญุฏุฏุฉ.  ููุง ุชุนูููุง ุฃุนูุงู ุ ุนููู ุฃู ุชูุฑ ุจุณุฌู ุนูุฏู ูุฑุฉ ูุงุญุฏุฉ ุ ุซู ูู ุฎูุงู ูุคุดุฑุงุช ุงููุณุชููุงุช ุงูุฑุงุจุนุฉ ูุงูุซุงูุซุฉ ูุงูุซุงููุฉ.  ููููุงู ุจุฐูู ุ ูููู ุจููู ูุชูุฉ ูุงุญุฏุฉ ูู ูุชู ุงูุนููุงู ุฅูู ุงููููู ูุชุนููู ููุฑุณ ุงูุณุฌู ุงูุนูุฏูุฉ ุฅูู ููุงู ุงูููุฑุณ ุงูุฃููู ูููุณุชูู 4: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/62a/d82/b54/62ad82b54b233a37e40b964953a16bf8.svg"></div><br><br>  ูููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 2 ูู ูุฐู ุงูุตูุญุฉ ุ ูููู ุจููู ุฌููุน ูุชู ุงูููุฑุณ ุฅูู ูุชูุชูู ุฅูู ุงููููู ูุชุนููู ุงูููุฑุณ ุงูุนูุฏูุฉ ุฅูู ููุงู ููุชุง ุงููุชูุชูู ุงููุตุฏุฑุชูู: ุงููุณุชูู 4 ูุงููุณุชูู 3: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1d9/ae5/7c8/1d9ae57c8c68a0b239e5b37397a4d0f7.svg"></div><br><br>  ูููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 3 ุ ููุนู ุงูุดูุก ููุณู ุ ููุชูู ุฅูู ูุชู ุงูุนูุงููู ุงูุซูุงุซุฉ ุงูุตุญูุญุฉ ุจุงููุนู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4b8/6ee/c9f/4b86eec9fd1df3445718ed8246fd4473.svg"></div><br><br>  ุฃุฎูุฑูุง ุ ูููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 4 ุ ุงููู ูู ุดูุก ุฃุฑุจุน ูุชู ุฅูู ุงููููู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/36b/6b0/29b/36b6b029b31578b143ff1e7605e358fb.svg"></div><br><br>  ููููู ุงูุขู ุญุณุงุจ ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ ูุฌุฏุงูู ุงูุตูุญุงุช ูู ุฌููุน ุงููุณุชููุงุช ุงูุฃุฑุจุนุฉ.  ูููููุง ุญุชู ุญุณุงุจ ุนููุงู ูุดูุฑ ุจุงูุถุจุท ุฅูู ุฅุฏุฎุงู ุฌุฏูู ุตูุญุฉ ูุญุฏุฏ ุนู ุทุฑูู ุถุฑุจ ููุฑุณู ูู 8 ุ ุญุฌู ุฅุฏุฎุงู ุฌุฏูู ุงูุตูุญุฉ. <br><br>  ููุถุญ ุงูุฌุฏูู ุฃุฏูุงู ุจููุฉ ุงูุนูุงููู ูููุตูู ุฅูู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฅุทุงุฑุงุช: <br><br><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุงูุนููุงู ุงูุงูุชุฑุงุถู ู </th><th>  ูููู ุงูุนููุงู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุซูุงูู</a> ) </th></tr></thead><tbody><tr><td>  ุงูุตูุญุฉ </td><td> <code>0o_SSSSSS_AAA_BBB_CCC_DDD_EEEE</code> </td> </tr><tr><td>  ุงูุฏุฎูู ูู ุงููุณุชูู 1 ุงูุฌุฏูู </td><td> <code>0o_SSSSSS_RRR_AAA_BBB_CCC_DDDD</code> </td> </tr><tr><td>  ุงูุฏุฎูู ูู ุงููุณุชูู 2 ุงูุฌุฏูู </td><td> <code>0o_SSSSSS_RRR_RRR_AAA_BBB_CCCC</code> </td> </tr><tr><td>  ุงูุฏุฎูู ูู ุงููุณุชูู 3 ุงูุฌุฏูู </td><td> <code>0o_SSSSSS_RRR_RRR_RRR_AAA_BBBB</code> </td> </tr><tr><td>  ุงูุฏุฎูู ูู ุงููุณุชูู 4 ุงูุฌุฏูู </td><td> <code>0o_SSSSSS_RRR_RRR_RRR_RRR_AAAA</code> </td> </tr></tbody></table><br>  ููุง <code></code> ูู ูุคุดุฑ ุงููุณุชูู 4 ุ <code></code> ูู ุงููุณุชูู 3 ุ <code></code> ูู ุงููุณุชูู 2 ุ ู <code>DDD</code> ูู ูุคุดุฑ ุงููุณุชูู 1 ููุฅุทุงุฑ ุงููุนุฑูุถ ุ <code>EEEE</code> ูู <code>EEEE</code> .  <code>RRR</code> ูู ููุฑุณ ุงูุณุฌู ุงูุนูุฏูุฉ.  ูุชู ุชุญููู ุงูููุฑุณ (ุซูุงุซุฉ ุฃุฑูุงู) ุฅูู ุฅุฒุงุญุฉ (ุฃุฑุจุนุฉ ุฃุฑูุงู) ุจุถุฑุจ 8 (ุญุฌู ุฅุฏุฎุงู ุฌุฏูู ุงูุตูุญุฉ).  ุจุงุณุชุฎุฏุงู ูุฐุง ุงูุฅุฒุงุญุฉ ุ ูุดูุฑ ุงูุนููุงู ุงููุงุชุฌ ูุจุงุดุฑุฉู ุฅูู ุฅุฏุฎุงู ุฌุฏูู ุงูุตูุญุฉ ุงูููุงุจู. <br><br>  <code>SSSS</code> ูู ุจุชุงุช ุชูุณูุน ููุฃุฑูุงู ุงููููุนุฉ ุ ุฃู ุฃููุง ุฌููุนูุง ูุณุฎ ูู ุงูุจุชุฉ 47. ูุฐุง ูุทูุจ ุฎุงุต ููุนูุงููู ุงูุตุงูุญุฉ ูู ุจููุฉ x86_64 ุ ุงูุชู ูุงูุดูุงูุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงูุฉ ุณุงุจูุฉ</a> . <br><br>  ุงูุนูุงููู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุซูุงูู</a> ุ ูุฃู ูู ุญุฑู ุซูุงูู ููุซู ุซูุงุซุฉ ุจุชุงุช ุ ูุงูุฐู ูุณูุญ ูู ุจูุตู ููุงุฑุณ ุงูุฌุฏุงูู 9 ุจุช ุจูุถูุญ ุนูู ูุณุชููุงุช ูุฎุชููุฉ.  ูุฐุง ุบูุฑ ูููู ูู ุงููุธุงู ุงูุณุฏุงุณู ุนุดุฑ ุ ุญูุซ ููุซู ูู ุญุฑู ุฃุฑุจุนุฉ ุจุชุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชูููุฐ </h2><br>  ุจุนุฏ ูู ูุฐู ุงููุธุฑูุฉ ุ ูููููุง ุงููุถู ูุฏููุง ูู ุงูุชูููุฐ.  ููุงุฆููุง ุ ูู ูููููุฏ ุงูููุญูู ุฌุฏุงูู ููุตูุญุงุช ูุญุณุจ ุ ูููู ุฃูุถูุง ุนุฑุถ ูุชูุฑุฑ ูู ุงูุณุฌู ุงูุฃุฎูุฑ ูู ุฌุฏูู ุงููุณุชูู 4. ููุฏ ูุนู ุงูููุญูู ุฐูู ูุฃูู ุณุชููู ููุงู ูุดููุฉ ูู ุงูุฏุฌุงุฌ ุฃู ุงูุจูุถุฉ: ูุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 4 ูุฅูุดุงุก ุฎุฑูุทุฉ ูุชูุฑุฑุฉ ูููู ูุง ูููููุง ุงููุตูู ุฅููู ุฏูู ุฃู ุนุฑุถ. <br><br>  ููุฏ ุงุณุชุฎุฏููุง ุจุงููุนู ูุฐุง ุงูุชุนููู ุงูุนูุฏูุฉ ูู ููุงูุฉ ุงูููุงูุฉ ุงูุณุงุจูุฉ ูููุตูู ุฅูู ุฌุฏูู ุงููุณุชูู 4 ูู ุฎูุงู ุงูุนููุงู ุงูุซุงุจุช ุงููุฑูุฒ <code>0xffff_ffff_ffff_f000</code> .  ุฅุฐุง ูููุง ุจุชุญููู ูุฐุง ุงูุนููุงู ุฅูู ุซูุงูู ูููุงุฑูุชู ุจุงูุฌุฏูู ุฃุนูุงู ุ <code>0o777</code> ุฃูู ูุชูุงูู ุชูุงููุง ูุน ุจููุฉ ุงูุณุฌู ูู ุฌุฏูู ุงููุณุชูู 4 ูุน <code>RRR</code> = <code>0o777</code> ู <code>AAAA</code> = <code>0</code> <code>0o777</code> ุงูุชุฏุงุฏ ุงูุฅุดุงุฑุฉ <code>1</code> : <br><br><pre style=";text-align:right;direction:rtl">  ูููู: 0o_SSSSSS_RRR_RRR_RRR_RRR_AAAA
 ุงูุนููุงู: 0o_177777_777_777_777_777_0000 </pre><br>  ุจูุถู ูุนุฑูุฉ ุงูุฌุฏุงูู ุงูุนูุฏูุฉ ุ ูููููุง ุงูุขู ุฅูุดุงุก ุนูุงููู ุงูุชุฑุงุถูุฉ ูููุตูู ุฅูู ุฌููุน ุงูุฌุฏุงูู ุงููุดุทุฉ.  ูุฌุนู ูุธููุฉ ุงูุจุซ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฑุฌูุฉ ุงูุนูุงููู </h3><br>  ูุฎุทูุฉ ุฃููู ุ ูู ุจุฅูุดุงุก ุฏุงูุฉ ุชุญูู ุนููุงููุง ุธุงูุฑููุง ุฅูู ุนููุงู ูุนูู ุ ุนุจุฑ ุงูุชุณูุณู ุงููุฑูู ูุฌุฏุงูู ุงูุตูุญุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/lib.rs pub mod memory;</span></span></code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs use x86_64::PhysAddr; use x86_64::structures::paging::PageTable; /// Returns the physical address for the given virtual address, or `None` if the /// virtual address is not mapped. pub fn translate_addr(addr: usize) -&gt; Option&lt;PhysAddr&gt; { // introduce variables for the recursive index and the sign extension bits // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> Don't hardcode these values let r = 0o777; // recursive index let sign = 0o177777 &lt;&lt; 48; // sign extension // retrieve the page table indices of the address that we want to translate let l4_idx = (addr &gt;&gt; 39) &amp; 0o777; // level 4 index let l3_idx = (addr &gt;&gt; 30) &amp; 0o777; // level 3 index let l2_idx = (addr &gt;&gt; 21) &amp; 0o777; // level 2 index let l1_idx = (addr &gt;&gt; 12) &amp; 0o777; // level 1 index let page_offset = addr &amp; 0o7777; // calculate the table addresses let level_4_table_addr = sign | (r &lt;&lt; 39) | (r &lt;&lt; 30) | (r &lt;&lt; 21) | (r &lt;&lt; 12); let level_3_table_addr = sign | (r &lt;&lt; 39) | (r &lt;&lt; 30) | (r &lt;&lt; 21) | (l4_idx &lt;&lt; 12); let level_2_table_addr = sign | (r &lt;&lt; 39) | (r &lt;&lt; 30) | (l4_idx &lt;&lt; 21) | (l3_idx &lt;&lt; 12); let level_1_table_addr = sign | (r &lt;&lt; 39) | (l4_idx &lt;&lt; 30) | (l3_idx &lt;&lt; 21) | (l2_idx &lt;&lt; 12); // check that level 4 entry is mapped let level_4_table = unsafe { &amp;*(level_4_table_addr as *const PageTable) }; if level_4_table[l4_idx].addr().is_null() { return None; } // check that level 3 entry is mapped let level_3_table = unsafe { &amp;*(level_3_table_addr as *const PageTable) }; if level_3_table[l3_idx].addr().is_null() { return None; } // check that level 2 entry is mapped let level_2_table = unsafe { &amp;*(level_2_table_addr as *const PageTable) }; if level_2_table[l2_idx].addr().is_null() { return None; } // check that level 1 entry is mapped and retrieve physical address from it let level_1_table = unsafe { &amp;*(level_1_table_addr as *const PageTable) }; let phys_addr = level_1_table[l1_idx].addr(); if phys_addr.is_null() { return None; } Some(phys_addr + page_offset) }</span></span></code> </pre> <br>  ุฃููุงู ุ ููุฏู ูุชุบูุฑุงุช ุงูููุฑุณ ุงูุนูุฏูุฉ (511 = <code>0o777</code> ) <code>0o777</code> ุชูุฏูุฏ ุงูุฅุดุงุฑุฉ (ูู ูุงุญุฏุฉ 1).  ุซู ูููู ุจุญุณุงุจ ููุงุฑุณ ุฌุฏุงูู ุงูุตูุญุงุช ูุงูุฅุฒุงุญุฉ ูู ุฎูุงู ุนูููุงุช bitwise ุ ููุง ูู ููุถุญ ูู ุงูุฑุณู ุงูุชูุถูุญู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c44/33c/8f9/c4433c8f99b6fcb54d4b79983ca35dbc.svg"></div><br><br>  ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุญุณุงุจ ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ ูุฌุฏุงูู ุงูุตูุญุงุช ุงูุฃุฑุจุนุฉ ุ ููุง ูู ููุถุญ ูู ุงููุณู ุงูุณุงุจู.  ุจุนุฏ ุฐูู ุ ูู ุงููุธููุฉ ุ ูููู ุจุชุญููู ูู ูู ูุฐู ุงูุนูุงููู ุฅูู ุฑูุงุจุท <code>PageTable</code> .  ูุฐู ุนูููุงุช ุบูุฑ ุขููุฉ ูุฃู ุงููุชุฑุฌู ูุง ููููู ูุนุฑูุฉ ุฃู ูุฐู ุงูุนูุงููู ุตุงูุญุฉ. <br><br>  ุจุนุฏ ุญุณุงุจ ุงูุนููุงู ุ ูุณุชุฎุฏู ุนุงูู ุงูููุฑุณุฉ ูุนุฑุถ ุงูุณุฌู ูู ุฌุฏูู ุงููุณุชูู 4. ุฅุฐุง ูุงู ูุฐุง ุงูุณุฌู ุตูุฑูุง ุ ููุง ููุฌุฏ ุฌุฏูู ูู ุงููุณุชูู 3 ูุณุฌู ุงููุณุชูู 4. ููุฐุง ูุนูู ุฃู <code>addr</code> ูู <code>addr</code> ุชุนูููู ุฅูู ุฃู ุฐุงูุฑุฉ ูุนููุฉ.  ูุฐูู ูุญู ูุนูุฏ <code>None</code> .  ุฎูุงู ุฐูู ุ ูุญู ูุนูู ุฃู ุฌุฏูู ุงููุณุชูู 3 ููุฌูุฏ.  ุซู ููุฑุฑ ุงูุฅุฌุฑุงุก ุ ููุง ูู ุงููุณุชูู ุงูุณุงุจู. <br><br>  ุจุนุฏ ุงูุชุญูู ูู ุซูุงุซ ุตูุญุงุช ูู ุงููุณุชูู ุงูุฃุนูู ุ ูููููุง ุฃุฎูุฑูุง ูุฑุงุกุฉ ุณุฌู ุฌุฏูู ุงููุณุชูู 1 ุ ูุงูุฐู ูุฎุจุฑูุง ุจุงูุฅุทุงุฑ ุงููุนูู ุงูุฐู ุชู ุชุนููู ุงูุนููุงู ุจู.  ูุฎุทูุฉ ุฃุฎูุฑุฉ ุ ุฃุถู ุฅุฒุงุญุฉ ุงูุตูุญุฉ ุฅููู - ูุฃุฑุฌุน ุงูุนููุงู. <br><br>  ุฅุฐุง ุนูููุง ุนูู ูุฌู ุงููููู ุฃูู ุชู ุชุนููู ุงูุนููุงู ุ ููููููุง ุงููุตูู ูุจุงุดุฑุฉู ุฅูู ุฌุฏูู ุงููุณุชูู ุงูุฃูู ุฏูู ุงููุธุฑ ุฅูู ุตูุญุงุช ุงููุณุชูู ุงูุฃุนูู.  ูููู ูุธุฑูุง ูุฃููุง ูุง ูุนุฑู ุฐูู ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุงูุชุญูู ูู ูุฌูุฏ ุฌุฏูู ูู ุงููุณุชูู ุงูุฃูู ุ ูุฅูุง ูุฅู ูุธููุชูุง ุณุชูุฑุฌุน ุตูุญุฉ ููููุฏุฉ ุฎุทุฃ ููุนูุงููู ุบูุฑ ุงููุชุทุงุจูุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุฌุฑุจ </h4><br>  ุฏุนููุง ูุญุงูู ุงุณุชุฎุฏุงู ูุธููุฉ ุงูุชุฑุฌูุฉ ููุนูุงููู ุงูุงูุชุฑุงุถูุฉ ูู ุฏุงูุฉ <code>_start</code> ูุฏููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/main.rs #[cfg(not(test))] #[no_mangle] pub extern "C" fn _start() -&gt; ! { [โฆ] // initialize GDT, IDT, PICS use blog_os::memory::translate_addr; // the identity-mapped vga buffer page println!("0xb8000 -&gt; {:?}", translate_addr(0xb8000)); // some code page println!("0x20010a -&gt; {:?}", translate_addr(0x20010a)); // some stack page println!("0x57ac001ffe48 -&gt; {:?}", translate_addr(0x57ac001ffe48)); println!("It did not crash!"); blog_os::hlt_loop(); }</span></span></code> </pre> <br><br>  ุจุนุฏ ุงูุจุฏุก ุ ูุฑู ุงููุชูุฌุฉ ุงูุชุงููุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1bd/e62/054/1bde620549428279e6c1f1647d88a062.png"></div><br><br>  ููุง ูู ูุชููุน ุ ูุชุฑุฌู ุงูุนููุงู 0xb8000 ุงููุฑุชุจุท ุจุงููุนุฑู ุฅูู ููุณ ุงูุนููุงู ุงููุนูู.  ูุชู ุชุญููู ุตูุญุฉ ุงูุฑููุฒ ูุตูุญุฉ ุงูููุฏุณ ุฅูู ุจุนุถ ุงูุนูุงููู ุงููุนููุฉ ุงูุชุนุณููุฉ ุ ูุงูุชู ุชุนุชูุฏ ุนูู ููููุฉ ุฅูุดุงุก ุงููุญูู ุงูุชุนููู ุงูุฃููู ููููุงุฉ ุงูุฎุงุตุฉ ุจูุง. <br><br><h4 style=";text-align:right;direction:rtl"> <code> RecursivePageTable</code> </h4> <br>  ูููุฑ x86_64 ููุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>RecursivePageTable</code></a> ุงูุฐู ูููุฐ ุงูุชุฌุฑูุฏุงุช ุงูุขููุฉ ููุฎุชูู ุนูููุงุช ุฌุฏูู ุงูุตูุญุงุช.  ุจุงุณุชุฎุฏุงู ูุฐุง ุงูููุน ุ ููููู ุชูููุฐ ูุธููุฉ <code>translate_addr</code> ุจุฅูุฌุงุฒ ุดุฏูุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs use x86_64::structures::paging::{Mapper, Page, PageTable, RecursivePageTable}; use x86_64::{VirtAddr, PhysAddr}; /// Creates a RecursivePageTable instance from the level 4 address. /// /// This function is unsafe because it can break memory safety if an invalid /// address is passed. pub unsafe fn init(level_4_table_addr: usize) -&gt; RecursivePageTable&lt;'static&gt; { let level_4_table_ptr = level_4_table_addr as *mut PageTable; let level_4_table = &amp;mut *level_4_table_ptr; RecursivePageTable::new(level_4_table).unwrap() } /// Returns the physical address for the given virtual address, or `None` if /// the virtual address is not mapped. pub fn translate_addr(addr: u64, recursive_page_table: &amp;RecursivePageTable) -&gt; Option&lt;PhysAddr&gt; { let addr = VirtAddr::new(addr); let page: Page = Page::containing_address(addr); // perform the translation let frame = recursive_page_table.translate_page(page); frame.map(|frame| frame.start_address() + u64::from(addr.page_offset())) }</span></span></code> </pre> <br>  <code>RecursivePageTable</code> ููุน <code>RecursivePageTable</code> ุจุงููุงูู ุชุชุจุน ุงุฑุชุจุงุทุงุช ุบูุฑ ุขููุฉ ูุฌุฏุงูู ุงูุตูุญุงุช ุ ูุจุงูุชุงูู ูู ุชุนุฏ ููุงู ุญุงุฌุฉ ุฅูู ุงูุดูุฑุฉ <code>unsafe</code> ูู ูุธููุฉ <code>translate_addr</code> .  ุชุธู ุงูุฏุงูุฉ <code>init</code> ุบูุฑ ุขููุฉ ุจุณุจุจ ุงูุญุงุฌุฉ ุฅูู ุถูุงู ุตุญุฉ ุงููุณุชูู ุงูุฐู ุชู ุชูุฑูุฑู <code>level_4_table_addr</code> . <br><br>  ูุฌุจ ุชุญุฏูุซ ูุธููุฉ <code>_start</code> ุจูุง ูุฅุนุงุฏุฉ ุชุณุฌูู ุงููุธููุฉ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/main.rs #[cfg(not(test))] #[no_mangle] pub extern "C" fn _start() -&gt; ! { [โฆ] // initialize GDT, IDT, PICS use blog_os::memory::{self, translate_addr}; const LEVEL_4_TABLE_ADDR: usize = 0o_177777_777_777_777_777_0000; let recursive_page_table = unsafe { memory::init(LEVEL_4_TABLE_ADDR) }; // the identity-mapped vga buffer page println!("0xb8000 -&gt; {:?}", translate_addr(0xb8000, &amp;recursive_page_table)); // some code page println!("0x20010a -&gt; {:?}", translate_addr(0x20010a, &amp;recursive_page_table)); // some stack page println!("0x57ac001ffe48 -&gt; {:?}", translate_addr(0x57ac001ffe48, &amp;recursive_page_table)); println!("It did not crash!"); blog_os::hlt_loop(); }</span></span></code> </pre> <br>  ุงูุขู ุ ุจุฏูุงู ูู ุชูุฑูุฑ <code>LEVEL_4_TABLE_ADDR</code> ุฅูู <code>translate_addr</code> ูุงููุตูู ุฅูู ุฌุฏุงูู ุงูุตูุญุงุช ูู ุฎูุงู ูุคุดุฑุงุช ุฎุงู ุบูุฑ ุขููุฉ ุ ูููู ุจุชูุฑูุฑ ูุฑุงุฌุน ุฅูู ููุน <code>RecursivePageTable</code> .  ูุจุงูุชุงูู ุ ูุฏููุง ุงูุขู ุชุฌุฑูุฏ ุขูู ูุฏูุงูุงุช ูุงุถุญุฉ ููููููุฉ.  ูุฐุง ูุถูู ุฃููุง ูู ูุชููู ูู ุชุบููุฑ ุฌุฏูู ุงูุตูุญุงุช ุนู ุทุฑูู ุงูุฎุทุฃ ูู ุงููุตูู ุงููุดุชุฑู ุ ูุฃู ุชุบููุฑู ูุชุทูุจ ุงูุชูุงู ุญุตุฑู ูู <code>RecursivePageTable</code> . <br><br>  ุชุนุทู ูุฐู ุงููุธููุฉ ููุณ ูุชูุฌุฉ ูุธููุฉ ุงูุชุฑุฌูุฉ ุงูุฃุตููุฉ ุงูููุชูุจุฉ ูุฏูููุง. <br><br><h4 style=";text-align:right;direction:rtl">  ุฌุนู ููุฒุงุช ุบูุฑ ุขููุฉ ุฃูุซุฑ ุฃูุงููุง </h4><br> <code>memory::init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุธููุฉ ุบูุฑ ุขููุฉ: ุฅููุง ุชุชุทูุจ ูุชูุฉ ููุงุชุตุงู ุจูุง </font></font><code>unsafe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฃู ุงููุชุตู ูุฌุจ ุฃู ูุถูู ุชูุจูุฉ ุจุนุถ ุงููุชุทูุจุงุช. ูู ุญุงูุชูุง ุ ูููู ุงูุดุฑุท ูู ุฃู ุงูุนููุงู ุงูููููู ูุชู ุชุนูููู ุจุฏูุฉ ุฅูู ุงูุฅุทุงุฑ ุงููุนูู ูุฌุฏูู ุตูุญุฉ ุงููุณุชูู 4. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ูุถุน ุงููุต </font></font><code>unsafe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงูู ูููุธููุฉ ุบูุฑ ุงูุขููุฉ </font><font style="vertical-align: inherit;">ูู ุงููุชูุฉ </font><font style="vertical-align: inherit;">ุจุญูุซ ูุชู ุชูููุฐ ุฌููุน ุฃููุงุน ุงูุนูููุงุช ุฏูู ุฅูุดุงุก ูุชู ุฅุถุงููุฉ </font></font><code>unsafe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฐูู ุ ูุง ูุญุชุงุฌ ุฅูู ูุชูุฉ ุบูุฑ ุขููุฉ ูุฅูุบุงุก ุงูุชุณุฌูู </font></font><code>level_4_table_ptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span></span>(level_4_table_addr: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>) -&gt; RecursivePageTable&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> level_4_table_ptr = level_4_table_addr <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> PageTable; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> level_4_table = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> *level_4_table_ptr; <span class="hljs-comment"><span class="hljs-comment">// &lt;- this operation is unsafe RecursivePageTable::new(level_4_table).unwrap() }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดููุฉ ูู ุฃููุง ูุง ูุฑู ุนูู ุงูููุฑ ุงูุฃุฌุฒุงุก ุบูุฑ ุงูุขููุฉ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฏูู ุงููุธุฑ ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฑูู ุงููุธููุฉ ุ</font></font></a> <code>RecursivePageTable::new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูููููุง ุงูููู ูุง ุฅุฐุง ูุงูุช ุขููุฉ ุฃู ูุง. </font><font style="vertical-align: inherit;">ูุฐูู ูู ุงูุณูู ุฌุฏูุง ุชุฎุทู ุจุนุถ ุงูุฑููุฒ ุบูุฑ ุงูุขููุฉ ุนู ุทุฑูู ุงูุฎุทุฃ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌูุจ ูุฐู ุงููุดููุฉ ุ ููููู ุฅุถุงูุฉ ูุธููุฉ ูุถููุฉ ุขููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs pub unsafe fn init(level_4_table_addr: usize) -&gt; RecursivePageTable&lt;'static&gt; { /// Rust currently treats the whole body of unsafe functions as an unsafe /// block, which makes it difficult to see which operations are unsafe. To /// limit the scope of unsafe we use a safe inner function. fn init_inner(level_4_table_addr: usize) -&gt; RecursivePageTable&lt;'static&gt; { let level_4_table_ptr = level_4_table_addr as *mut PageTable; let level_4_table = unsafe { &amp;mut *level_4_table_ptr }; RecursivePageTable::new(level_4_table).unwrap() } init_inner(level_4_table_addr) }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุขู ุ </font></font><code>unsafe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทูุจ ูู ุงููุฌููุนุฉ ูุฑุฉ ุฃุฎุฑู </font><font style="vertical-align: inherit;">ุฅูุบุงุก ุงูุชุณุฌูู </font></font><code>level_4_table_ptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุฑู ุนูู ุงูููุฑ ุฃู ูุฐู ูู ุงูุนูููุงุช ุบูุฑ ุงูุขููุฉ ุงููุญูุฏุฉ. </font><font style="vertical-align: inherit;">ูุญุชูู Rust ุญุงููุงู ุนูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชูุญ </font><font style="vertical-align: inherit;">ูุชุบููุฑ ูุฐู ุงูุฎุงุตูุฉ ุบูุฑ ุงููุงุฌุญุฉ ูููุธุงุฆู ุบูุฑ ุงูุขููุฉ.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ุชุนููู ุฌุฏูุฏ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ููุฑุฃ ุฌุฏุงูู ุงูุตูุญุงุช ูุฃูุดุฃูุง ูุธููุฉ ุงูุชุญููู ุ ูุฅู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฅูุดุงุก ุชุนููู ุฌุฏูุฏ ูู ุงูุชุณูุณู ุงููุฑูู ูุฌุฏูู ุงูุตูุญุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุชูุฏ ุชุนููุฏ ูุฐู ุงูุนูููุฉ ุนูู ุงูุตูุญุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุชู ูุฑูุฏ ุนุฑุถูุง. ูู ุฃุจุณุท ุงูุญุงูุงุช ุ ููุฌุฏ ุจุงููุนู ุฌุฏูู ูุตูุญุงุช ุงููุณุชูู 1 ููุฐู ุงูุตูุญุฉ ุ ูุนูููุง ููุท ุฅุฏุฎุงู ุฅุฏุฎุงู ูุงุญุฏ. ูู ุฃุตุนุจ ุงูุญุงูุงุช ุ ุชูุฌุฏ ุงูุตูุญุฉ ูู ููุทูุฉ ุงูุฐุงูุฑุฉ ุงูุชู ูุง ููุฌุฏ ููุง ูุณุชูู 3 ุจุนุฏ ุ ูุฐูู ุชุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุก ุฌุฏุงูู ุฌุฏูุฏุฉ ูู ุงููุณุชูู 3 ูุงููุณุชูู 2 ูุงููุณุชูู 1.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุญุงูุฉ ุจุณูุทุฉ ุนูุฏูุง ูุง ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ุฌุฏุงูู ุฌุฏูุฏุฉ. ูุชู ุชุญููู ุฃุฏุงุฉ ุงูุชุญููู ูู ุฃูู ููุบุง ุจุงูุช ูู ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ุ ูุฐูู ูุนูู ุฃูู ููุฌุฏ ูู ูุฐู ุงูููุทูุฉ ุฌุฏูู ูุณุชูู 1. ุตุงูุญ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููููุง ุชุญุฏูุฏ ุฃู ุตูุญุฉ ุบูุฑ ูุณุชุฎุฏูุฉ ูู ููุทูุฉ ุงูุฐุงูุฑุฉ ูุฐู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุตูุญุฉ ุงูููุฌูุฏุฉ ุนูู ุงูุนููุงู </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุณุชุฎุฏู </font></font><code>0xb8000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุทุงุฑ ุงููุฎุฒู ุงููุคูุช ูููุต VGA </font><font style="vertical-align: inherit;">ูุฅุทุงุฑ ูุทููุจ </font><font style="vertical-align: inherit;">. ูู ุงูุณูู ููุบุงูุฉ ุงูุชุญูู ูู ููููุฉ ุนูู ุชุฑุฌูุฉ ุนูุงููููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฐู ูู ูุธููุฉ ุฌุฏูุฏุฉ </font></font><code>create_maping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุญุฏุฉ </font></font><code>memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs use x86_64::structures::paging::{FrameAllocator, PhysFrame, Size4KiB}; pub fn create_example_mapping( recursive_page_table: &amp;mut RecursivePageTable, frame_allocator: &amp;mut impl FrameAllocator&lt;Size4KiB&gt;, ) { use x86_64::structures::paging::PageTableFlags as Flags; let page: Page = Page::containing_address(VirtAddr::new(0x1000)); let frame = PhysFrame::containing_address(PhysAddr::new(0xb8000)); let flags = Flags::PRESENT | Flags::WRITABLE; let map_to_result = unsafe { recursive_page_table.map_to(page, frame, flags, frame_allocator) }; map_to_result.expect("map_to failed").flush(); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุจู ุงูุฏุงูุฉ ูุฑุฌุนูุง ูุงุจูุงู ููุชุบููุฑ </font></font><code>RecursivePageTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุณูุชู ุชุบููุฑู) </font></font><code>FrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููู ููุถุญ ุฃุฏูุงู. ุซู ูุชู ุชุทุจูู ุงููุธููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>map_to</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฏุฑุฌ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Mapper</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนููู ุงูุตูุญุฉ ุนูู ุงูุนููุงู </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงูุฅุทุงุฑ ุงููุนูู ุนูู ุงูุนููุงู </font></font><code>0xb8000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุงููุธููุฉ ุบูุฑ ุขููุฉ ุ ูุฃูู ูู ุงููููู ุงูุชูุงู ุฃูุงู ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ูุณุงุฆุท ุบูุฑ ุตุงูุญุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุงููุณุงุฆุท </font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>frame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>map_to</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃุฎุฐ </font><font style="vertical-align: inherit;">ุงูุฏุงูุฉ </font><font style="vertical-align: inherit;">ูุณูุทูู ุขุฎุฑูู. ุงููุณูุทุฉ ุงูุซุงูุซุฉ ูู ูุฌููุนุฉ ุงูุนูุงูุงุช ูุฌุฏูู ุงูุตูุญุฉ. ูุถุนูุง ุงูุนูุงูุฉ </font></font><code>PRESENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุฒูุฉ ูุฌููุน ุงูุฅุฏุฎุงูุงุช ุงูุตุงูุญุฉ </font></font><code>WRITABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุงูุฉ ุงููุชุงุจุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ุงููุณูุทุฉ ุงูุฑุงุจุนุฉ ุนุจุงุฑุฉ ุนู ุจููุฉ ุชููุฐ ุงูุณูุฉ </font></font><code>FrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฐู ุงูุญุฌุฉ ูุทููุจุฉ ุจูุงุณุทุฉ ุงูุทุฑููุฉ.</font></font><code>map_to</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃู ุฅูุดุงุก ุฌุฏุงูู ุตูุญุงุช ุฌุฏูุฏุฉ ูุฏ ูุชุทูุจ ุฅุทุงุฑุงุช ุบูุฑ ูุณุชุฎุฏูุฉ. ูุชุทูุจ ุชูููุฐ ูุฐู ุงูุตูุฉ ุญุฌุฉ </font></font><code>Size4KiB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฃููุงุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Page</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>PhysFrame</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงูููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณูุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>PageSize</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุนูู ูุน 4 ุตูุญุงุช ููููุจุงูุช ุงูููุงุณูุฉ ููุน ุตูุญุงุช ูุงุฆูุฉ 2 ููุฌุงุจุช / 1 ุจูู ุงูุฎููุฌ ุงูุฏููู. </font><font style="vertical-align: inherit;">ูุฏ ุชูุดู </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธููุฉ </font></font><code>map_to</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐูู ูุนูุฏ </font></font><code>Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุธุฑูุง ูุฃู ูุฐุง ูุฌุฑุฏ ูุซุงู ุนูู ุงูููุฏ ุงูุฐู ูุฌุจ ุฃูุง ูููู ููุซูููุง ุจู ุ ูุฅููุง ุจุจุณุงุทุฉ ูุณุชุฎุฏูู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>expect</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูุฉ ูู ุงูุฐุนุฑ ุนูุฏ ุญุฏูุซ ุฎุทุฃ. ุฅุฐุง ูุฌุญุช ุ ุชูุฑุฌุน ุงูุฏุงูุฉ ููุนูุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>MapperFlush</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฑ ุทุฑููุฉ ุณููุฉ ููุณุญ ุงูุตูุญุฉ ุงููุทุงุจูุฉ ูุคุฎุฑูุง ูู ุทุฑููุฉ ุงููุฎุฒู ุงููุคูุช ููุชุฑุฌูุฉ ุงูุชุฑุงุจุทูุฉ (TLB) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>flush</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุซู</font></font><code>Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณุชุฎุฏู ุงูููุน ุงูุณูุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>#[must_use]</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุตุฏุฑ ุชุญุฐูุฑูุง ุฅุฐุง ูุณููุง ุชุทุจููู ุนู ุทุฑูู ุงูุฎุทุฃ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุนูู ุฃู ุงูุนููุงู </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุชุทูุจ ุฌุฏุงูู ุตูุญุงุช ุฌุฏูุฏุฉ ุ ูููููู </font></font><code>FrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงุฆููุง ุงูุนูุฏุฉ </font></font><code>None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุงุฎุชุจุงุฑ ุงููุธููุฉ ุ ูู ุจุฅูุดุงุก ูุฐุง </font></font><code>EmptyFrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs /// A FrameAllocator that always returns `None`. pub struct EmptyFrameAllocator; impl FrameAllocator&lt;Size4KiB&gt; for EmptyFrameAllocator { fn allocate_frame(&amp;mut self) -&gt; Option&lt;PhysFrame&gt; { None } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุฅุฐุง </font></font><code>allocate_frame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุธูุฑุช ุฑุณุงูุฉ </font><font style="vertical-align: inherit;">ุงูุฎุทุฃ "ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ููุณุช ุนุถููุง ูู ุงูุตูุฉ </font></font><code>FrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" ุ ูุณุชุญุชุงุฌ ุฅูู ุงูุชุฑููุฉ </font></font><code>x86_64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ุงูุฅุตุฏุงุฑ 0.4.0.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุฎุชุจุงุฑ ูุธููุฉ ุงูุชุฑุฌูุฉ ุงูุฌุฏูุฏุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/main.rs #[cfg(not(test))] #[no_mangle] pub extern "C" fn _start() -&gt; ! { [โฆ] // initialize GDT, IDT, PICS use blog_os::memory::{create_example_mapping, EmptyFrameAllocator}; const LEVEL_4_TABLE_ADDR: usize = 0o_177777_777_777_777_777_0000; let mut recursive_page_table = unsafe { memory::init(LEVEL_4_TABLE_ADDR) }; create_example_mapping(&amp;mut recursive_page_table, &amp;mut EmptyFrameAllocator); unsafe { (0x1900 as *mut u64).write_volatile(0xf021f077f065f04e)}; println!("It did not crash!"); blog_os::hlt_loop(); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ ูููู ุจุฅูุดุงุก ููุงุธุฑุฉ ููุตูุญุฉ ุนูู ุงูุนููุงู </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>create_example_mapping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน </font><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ุงููุธููุฉ </font><font style="vertical-align: inherit;">ุจูุงุณุทุฉ ุงุฑุชุจุงุท ูุงุจู ููุชุบููุฑ ูููุซูู </font></font><code>RecursivePageTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ูุชุฑุฌู ุงูุตูุญุฉ </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ูุฎุฒู ูุคูุช ููุต VGA ุ ูุฐูู ุณูุฑู ุจุนุถ ุงููุชุงุฆุฌ ุนูู ุงูุดุงุดุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ููุชุจ ูููุฉ ูู ูุฐู ุงูุตูุญุฉ </font></font><code>0xf021f077f065f04e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุชุชูุงูู ูุน ุงูุณุทุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ุฌุฏูุฏ!" </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุฎูููุฉ ุจูุถุงุก. </font><font style="vertical-align: inherit;">ูุง ุชุญุชุงุฌ ููุท ุฅูู ูุชุงุจุฉ ูุฐู ุงููููุฉ ูุจุงุดุฑุฉู ูู ุฃุนูู ุงูุตูุญุฉ </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฃู ุงูุณุทุฑ ุงูุนููู ุณููุชูู ุจุนุฏ ุฐูู ูู ุงูุดุงุดุฉ </font></font><code>println</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ููุชุจูุง ูู ุงูุฅุฒุงุญุฉ </font></font><code>0x900</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุงูููุฌูุฏุฉ ุชูุฑูุจูุง ูู ููุชุตู ุงูุดุงุดุฉ. </font><font style="vertical-align: inherit;">ููุง ูุนูู ูู ุงูููุงูุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูุถุน ูุต VGA"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฌุจ ุฃู ุชููู ุงููุชุงุจุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช VGA ูุชููุจุฉ ุ ูุฐูู ูุญู ูุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ </font></font><code>write_volatile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏูุง ูููู ุจุชุดุบููู ูู QEMU ุ ูุฑู ูุฐุง: </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ef9/1bc/672/ef91bc672e33cbec8847b77028b7624e.png"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุด ุนูู ุงูุดุงุดุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุนูู ุงูููุฏ ูุฃูู ูุงู ููุงู ุจุงููุนู ุฌุฏูู ุงููุณุชูู ุงูุฃูู ูุนุฑุถ ุงูุตูุญุฉ </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅุฐุง ุญุงูููุง ุชุฑุฌูุฉ ุตูุญุฉ ูุง ููุฌุฏ ููุง ูุซู ูุฐุง ุงูุฌุฏูู ุจุนุฏ ุ ูุณุชูุฑุฌุน ุงูุฏุงูุฉ </font></font><code>map_to</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃู ุ ูุฃููุง ุณุชุญุงูู ุชุญุฏูุฏ ุฅุทุงุฑุงุช ูููุง ูุฅูุดุงุก ุฌุฏุงูู ุตูุญุงุช ุฌุฏูุฏุฉ </font></font><code>EmptyFrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูุฑู ูุฐุง ุฅุฐุง ุญุงูููุง ุชุฑุฌูุฉ ุงูุตูุญุฉ </font></font><code>0xdeadbeaf000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs pub fn create_example_mapping(โฆ) { [โฆ] let page: Page = Page::containing_address(VirtAddr::new(0xdeadbeaf000)); [โฆ] } // in src/main.rs #[no_mangle] pub extern "C" fn _start() -&gt; ! { [โฆ] unsafe { (0xdeadbeaf900 as *mut u64).write_volatile(0xf021f077f065f04e)}; [โฆ] }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุงูุจุฏุก ุ ูุจุฏุฃ ุงูุฐุนุฑ ุจุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุชุงููุฉ: </font></font><br><br><pre style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฐุนุฑ ูู 'map_to ูุดู: FrameAllocationFailed' ุ /.../result.rs:999 ุฑุจูุง </font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑุถ ุงูุตูุญุงุช ุงูุชู ูุง ุชุญุชูู ุนูู ุฌุฏูู ูุณุชูู ุงูุตูุญุฉ 1 ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ุงูุตุญูุญ </font></font><code>FrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููู ููู ููููู ูุนุฑูุฉ ุงูุฅุทุงุฑุงุช ุงููุฌุงููุฉ ูููุฏุงุฑ ุงูุฐุงูุฑุฉ ุงููุนููุฉ ุงููุชููุฑุฉุ</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนูููุงุช ุงูุชูููุฏ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงููุฎุชููุฉ ุนูู ูููุงุช ูุฎุชููุฉ ูู ุงูุฐุงูุฑุฉ ุงููุนููุฉ ูุชุฎุชูู ุงููุณุงุญุงุช ุงููุฎุชููุฉ ุงููุญุฌูุฒุฉ ุจูุงุณุทุฉ ุฃุฌูุฒุฉ ูุซู VGA. ููุท BIOS ุฃู UEFI ุงูุซุงุจุชุฉ ุชุนุฑู ุจุงูุถุจุท ููุงุทู ุงูุฐุงูุฑุฉ ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูุงููุญุฌูุฒุฉ. ูููุฑ ูู ูู ูุนุงููุฑ ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ูุธุงุฆู ููุญุตูู ุนูู ุจุทุงูุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูููู ูุง ูููู ุงุณุชุฏุนุงุคูุง ุฅูุง ูู ุจุฏุงูุฉ ุงูุชูุฒูู. ูุฐูู ุ ุทูุจ ุฃุฏุงุฉ ุชุญููู ุงูุชุดุบูู ุงูุฎุงุตุฉ ุจูุง ุจุงููุนู ูุฐู ุงููุนูููุงุช (ูุบูุฑูุง) ูู BIOS. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฑูุฑ ุงููุนูููุงุช ุฅูู kernel ุงูุฎุงุต ุจูุธุงู ุงูุชุดุบูู ุ ูุฅู ุงูููุญูู ููุณูุทุฉ ุนูุฏ ุงุณุชุฏุนุงุก ุงููุธููุฉ </font></font><code>_start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุทู ุฑุงุจุทูุง ุฅูู ุจููุฉ ูุนูููุงุช ุงูุชูููุฏ. ุฃุถู ูุฐู ุงูุญุฌุฉ ุฅูู ูุธููุชูุง:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/main.rs use bootloader::bootinfo::BootInfo; #[cfg(not(test))] #[no_mangle] pub extern "C" fn _start(boot_info: &amp;'static BootInfo) -&gt; ! { // new argument [โฆ] }</span></span></code> </pre> <br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>BootInfo</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุฒุงู </font><font style="vertical-align: inherit;">ุงูุจููุฉ </font><font style="vertical-align: inherit;">ููุฏ ุงูุงูุชูุงุก ุ ูุฐุง ูุง ุชูุงุฌุฃ ุนูุฏ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุทููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุงูุชุฑููุฉ ุฅูู ุงูุฅุตุฏุงุฑุงุช ุงููุณุชูุจููุฉ ูู ูุญูู ุงูุฅููุงุน </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุบูุฑ ุงููุชูุงูู ูุน semver</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฏูู ุญุงููุง ุซูุงุซุฉ ูุฌุงูุงุช </font></font><code>p4_table_addr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>memory_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>package</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"></font><code>p4_table_addr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู </font><font style="vertical-align: inherit;">ุงูุญูู </font><font style="vertical-align: inherit;">ุนูู ุนููุงู ุงูุชุฑุงุถู ูุชูุฑุฑ ูุฌุฏูู ุตูุญุงุช ุงููุณุชูู 4. ูุจูุถู ูุฐุง ุ ููุณ ูู ุงูุถุฑูุฑู ุชุณุฌูู ุงูุนููุงู ุจุฌุฏ </font></font><code>0o_177777_777_777_777_777_0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"></font><code>memory_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุธู </font><font style="vertical-align: inherit;">ุงูุญูู </font><font style="vertical-align: inherit;">ุจุฃูููุฉ ูุจูุฑุฉ ุ ูุฃูู ูุญุชูู ุนูู ูุงุฆูุฉ ุจุฌููุน ููุงุทู ุงูุฐุงูุฑุฉ ูุฃููุงุนูุง (ุบูุฑ ุงููุณุชุฎุฏูุฉ ุฃู ุงููุญุฌูุฒุฉ ุฃู ุบูุฑูุง).</font></font><br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู </font></font><code>package</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุธููุฉ ุงูุญุงููุฉ ูุฑุจุท ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ ุจุงูุฌุฑุงูุฉ. </font><font style="vertical-align: inherit;">ูู ููุชูู ุงูุชูููุฐ ุ ุญุชู ูุชููู ูู ุชุฌุงููู ุงูุขู.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุงุณุชุฎุฏุงู ุงูุญูู </font></font><code>memory_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก </font><font style="vertical-align: inherit;">ุงูุญูู </font><font style="vertical-align: inherit;">ุงูุตุญูุญ </font></font><code>FrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฑูุฏ ุถูุงู ููุน ุงููุณูุทุฉ ุงูุตุญูุญ </font></font><code>boot_info</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุฑู </font></font><code>entry_point</code> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃูู </font></font><code>_start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุณุชุฏุนุงุก ุฎุงุฑุฌูุง ุ ูู ูุชู ุงูุชุญูู ูู ุชูููุน ุงููุธููุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃู ุงููุณุงุฆุท ุงูุชุนุณููุฉ ูู ุชุคุฏู ุฅูู ุฃุฎุทุงุก ูู ุงูุชุฑุฌูุฉ ุ ูููููุง ูุฏ ุชุณุจุจ ุชุนุทููุง ุฃู ุณููููุง ุบูุฑ ูุนุฑูู ูู ููุช ุงูุชุดุบูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุญูู ูู ุงูุชูููุน ุ </font></font><code>bootloader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู </font><font style="vertical-align: inherit;">ุงูุตูุฏูู </font><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ูุธููุฉ ุงูุตุฏุฃ ูููุทุฉ ุฅุฏุฎุงู ูุงูุฑู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>entry_point</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุฃููุงุน ุงูุชุญูู ูู ุตุญุชูุง. </font><font style="vertical-align: inherit;">ูุนูุฏ ูุชุงุจุฉ ูุธููุชูุง ููุฐุง ุงููุงูุฑู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/main.rs use bootloader::{bootinfo::BootInfo, entry_point}; entry_point!(kernel_main); #[cfg(not(test))] fn kernel_main(boot_info: &amp;'static BootInfo) -&gt; ! { [โฆ] // initialize GDT, IDT, PICS let mut recursive_page_table = unsafe { memory::init(boot_info.p4_table_addr as usize) }; [โฆ] // create and test example mapping println!("It did not crash!"); blog_os::hlt_loop(); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ูููุทุฉ ุงูุฅุฏุฎุงู ุ ูู ุชุนุฏ ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู </font></font><code>extern "C"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>no_mangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจูุง ุฃู ุงููุงูุฑู ูุนูู ููุทุฉ ุงูุฏุฎูู ุงูุญููููุฉ ุฐุงุช ุงููุณุชูู ุงูููุฎูุถ </font></font><code>_start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃุตุจุญุช ุงููุธููุฉ </font></font><code>kernel_main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุธููุฉ Rust ุทุจูุนูุฉ ุชูุงููุง ุ ุญุชู ูุชููู ูู ุงุฎุชูุงุฑ ุงุณู ุงุนุชุจุงุทู ููุง. </font><font style="vertical-align: inherit;">ูู ุงูููู ุฃู ูุชู ูุชุงุจุชูุง ุจุงููุนู ุ ุจุญูุซ ูุญุฏุซ ุฎุทุฃ ูู ุงูุชุฑุฌูุฉ ุฅุฐุง ููุช ุจุชุบููุฑ ุชูููุน ุงููุธููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนู ุทุฑูู ุฅุถุงูุฉ ูุณูุทุฉ ุฃู ุชุบููุฑ ููุนูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃููุง ุงูุขู ูุฑุณู ุฅูู </font></font><code>memory::init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุงู ูุดูุฑ ุ ููู </font></font><code>boot_info.p4_table_addr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ุณูุนูู ุงูุฑูุฒ ุญุชู ุฅุฐุง ูุงู ุงูุฅุตุฏุงุฑ ุงููุณุชูุจูู ูู ุฃุฏุงุฉ ุชุญููู ุงูุชุดุบูู ูุฎุชุงุฑ ุฅุฏุฎุงููุง ุขุฎุฑ ูู ุฌุฏูู ุฌุฏูู ูุณุชูู ุงูุตูุญุฉ 4 ููุนุฑุถ ุงููุชูุฑุฑ.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุฎุชูุงุฑ ุงูุฅุทุงุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ุจูุถู ุงููุนูููุงุช ูู BIOS ุ ูุฏููุง ุญู ุงููุตูู ุฅูู ุจุทุงูุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ุจุญูุซ ููููู ุฅูุดุงุก ููุฒุน ุฅุทุงุฑ ุนุงุฏู. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ูุน ุงููููู ุงูุนุธูู ุงูุนุงู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs pub struct BootInfoFrameAllocator&lt;I&gt; where I: Iterator&lt;Item = PhysFrame&gt; { frames: I, } impl&lt;I&gt; FrameAllocator&lt;Size4KiB&gt; for BootInfoFrameAllocator&lt;I&gt; where I: Iterator&lt;Item = PhysFrame&gt; { fn allocate_frame(&amp;mut self) -&gt; Option&lt;PhysFrame&gt; { self.frames.next() } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชู </font></font><code>frames</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุฆุฉ </font><font style="vertical-align: inherit;">ุงูุญูู </font><font style="vertical-align: inherit;">ุจูุงุณุทุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฑุงุฑ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุทุงุฑ </font><font style="vertical-align: inherit;">ุงูุชุนุณูู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ูุชูุญ ูู ุจุจุณุงุทุฉ ุชูููุถ ุงูููุงููุงุช </font></font><code>alloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iterator ::</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑููุฉ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุงูุชุงููุฉ</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชุชู </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชููุฆุฉ </font></font><code>BootInfoFrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุธููุฉ ุฌุฏูุฏุฉ </font></font><code>init_frame_allocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/memory.rs use bootloader::bootinfo::{MemoryMap, MemoryRegionType}; /// Create a FrameAllocator from the passed memory map pub fn init_frame_allocator( memory_map: &amp;'static MemoryMap, ) -&gt; BootInfoFrameAllocator&lt;impl Iterator&lt;Item = PhysFrame&gt;&gt; { // get usable regions from memory map let regions = memory_map .iter() .filter(|r| r.region_type == MemoryRegionType::Usable); // map each region to its address range let addr_ranges = regions.map(|r| r.range.start_addr()..r.range.end_addr()); // transform to an iterator of frame start addresses let frame_addresses = addr_ranges.flat_map(|r| r.into_iter().step_by(4096)); // create `PhysFrame` types from the start addresses let frames = frame_addresses.map(|addr| { PhysFrame::containing_address(PhysAddr::new(addr)) }); BootInfoFrameAllocator { frames } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููู ูุฐู ุงููุธููุฉ ุ ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุชุฌููุน ุ ุจุชุญููู ุฎุฑูุทุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ ุฅูู ูููุฑูุฑ ููุฅุทุงุฑุงุช ุงููุงุฏูุฉ ุงููุณุชุฎุฏูุฉ: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">    <code>iter</code>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>MemoryRegion</code></a> .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>filter</code></a> ,      .          ,  ,    (,   )     ,    <code>InUse</code>  .  ,    ,      - . <br></li><li style=";text-align:right;direction:rtl">      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>map</code></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> range</a> Rust          . <br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุซุงูุซุฉ ูู ุงูุฃูุซุฑ ุตุนูุจุฉ: ูููู ุจุชุญููู ูู ูุทุงู ุฅูู ููุฑุฑ ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ </font></font><code>into_iter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ุญุฏุฏ ูู ุนููุงู 4096 ุจู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>step_by</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุญุฌู ุงูุตูุญุฉ 4096 ุจุงูุช (4 ููููุจุงูุช) ุ ูุญุตู ุนูู ุนููุงู ุจุฏุงูุฉ ูู ุฅุทุงุฑ. </font><font style="vertical-align: inherit;">ูุญุงุฐุงุฉ ุงูุตูุญุฉ ูุญุงุฐุงุฉ ุฌููุน ููุงุทู ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉ ุ ูุฐูู ูุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฑูุฒ ูุญุงุฐุงุฉ ุฃู ุชูุฑูุจ. </font><font style="vertical-align: inherit;">ุงุณุชุจุฏุงู </font></font><code>map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>flat_map</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุญุตู ุนููู </font></font><code>Iterator&lt;Item = u64&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู </font></font><code>Iterator&lt;Item = Iterator&lt;Item = u64&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุฑุญูุฉ ุงูููุงุฆูุฉ ุ ุณูุญูู ุนูุงููู ุงูุจุฏุก ุฅูู ุฃููุงุน ูู </font></font><code>PhysFrame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฌู ุจูุงุก ุงูุนููุงู ุงููุทููุจ </font></font><code>Iterator&lt;Item = PhysFrame&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุซู ุงุณุชุฎุฏู ูุฐุง ุงูุชูุฑุงุฑ ูุฅูุดุงุก ูุฅุฑุฌุงุน ูุงุญุฏุฉ ุฌุฏูุฏุฉ </font></font><code>BootInfoFrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุชุบููุฑ ูุธููุชูุง </font></font><code>kernel_main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ุชุชุฌุงูุฒ ุงููุซูู </font></font><code>BootInfoFrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู </font></font><code>EmptyFrameAllocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// in src/main.rs #[cfg(not(test))] fn kernel_main(boot_info: &amp;'static BootInfo) -&gt; ! { [โฆ] // initialize GDT, IDT, PICS use x86_64::structures::paging::{PageTable, RecursivePageTable}; let mut recursive_page_table = unsafe { memory::init(boot_info.p4_table_addr as usize) }; // new let mut frame_allocator = memory::init_frame_allocator(&amp;boot_info.memory_map); blog_os::memory::create_mapping(&amp;mut recursive_page_table, &amp;mut frame_allocator); unsafe { (0xdeadbeaf900 as *mut u64).write_volatile(0xf021f077f065f04e)}; println!("It did not crash!"); blog_os::hlt_loop(); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุตุจุญุช ุชุฑุฌูุฉ ุงูุนููุงู ุงูุขู ูุงุฌุญุฉ - ููุฑู ูุฑุฉ ุฃุฎุฑู ุงูุฑุณุงูุฉ ุจุงูุฃุจูุถ ูุงูุฃุณูุฏ </font><i><font style="vertical-align: inherit;">"ุฌุฏูุฏ!"</font></i><font style="vertical-align: inherit;"> ุนูู ุงูุดุงุดุฉ</font></font><i><font style="vertical-align: inherit;"></font></i>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูู ุงูููุงููุณ ุ ุชููู ุงูุทุฑููุฉ </font></font><code>map_to</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅูุดุงุก ุฌุฏุงูู ุตูุญุงุช ููููุฏุฉ ููุง ููู:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุทูุงุช ุบูุฑ ูุณุชุฎุฏูุฉ ูู ุงูุฅุทุงุฑ </font></font><code>frame_allocator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุงุจู ุฅุฏุฎุงู ุฌุฏูู ุงููุณุชูู ุงูุฃุนูู ูุน ูุฐุง ุงูุฅุทุงุฑ. </font><font style="vertical-align: inherit;">ูููู ุงููุตูู ุฅูู ุงูุฅุทุงุฑ ุงูุขู ูู ุฎูุงู ุฌุฏูู ุตูุญุงุช ูุชูุฑุฑ.</font></font><br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุตูุงุฑ ุงูุฅุทุงุฑ ูุฅูุดุงุก ุฌุฏูู ุตูุญุงุช ูุงุฑุบ ูุฌุฏูุฏ. </font></font><br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชูู ุฅูู ุฌุฏูู ุงููุณุชูู ุงูุชุงูู. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ูุธููุชูุง </font></font><code>create_maping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฌุฑุฏ ูุซุงู ุ ูููููุง ุงูุขู ุฅูุดุงุก ุชุนูููุงุช ุฌุฏูุฏุฉ ููุตูุญุงุช ุงูุชุนุณููุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูููุฏ ุฌุฏูุง ุนูุฏ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุชุทุจูู ุชุนุฏุฏ ุงูุนูููุงุช ูู ุงูููุงูุงุช ุงููุณุชูุจููุฉ.</font></font><br><br><h1 style=";text-align:right;direction:rtl">  ููุฎุต </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูููุงูุฉ ุ ุชุนููุช ููููุฉ ุงุณุชุฎุฏุงู ุฌุฏูู ุนูุฏู ูู ุงููุณุชูู 4 ูุชุฑุฌูุฉ ุฌููุน ุงูุฅุทุงุฑุงุช ุฅูู ุนูุงููู ุงูุชุฑุงุถูุฉ ูุญุณูุจุฉ. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏููุง ูุฐู ุงูุทุฑููุฉ ูุชุทุจูู ูุธููุฉ ุชุฑุฌูุฉ ุงูุนูุงููู ูุฅูุดุงุก ููุงุธุฑุฉ ุฌุฏูุฏุฉ ูู ุฌุฏุงูู ุงูุตูุญุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุฃููุง ุฃู ุฅูุดุงุก ุชุนูููุงุช ุฌุฏูุฏุฉ ูุชุทูุจ ุฅุทุงุฑุงุช ุบูุฑ ูุณุชุฎุฏูุฉ ููุฌุฏุงูู ุงูุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ุชุทุจูู ููุฒุน ุงูุฅุทุงุฑุงุช ูุฐุง ุงุณุชูุงุฏูุง ุฅูู ูุนูููุงุช ูู BIOS ูุงูุชู ูููู ูุญูู ุงูุฅููุงุน ุจุชูุฑูุฑูุง ุฅูู kernel ูุฏููุง.</font></font><br><br><h1 style=";text-align:right;direction:rtl">  ูุง ุงูุชุงูู </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุงูุฉ ุงูุชุงููุฉ ุ ุณูููู ุจุฅูุดุงุก ููุทูุฉ ุฐุงูุฑุฉ ูููุฉ ููููุงุฉ ุงูุฎุงุตุฉ ุจูุง ุ ูุงูุชู ุณูู ุชุณูุญ ููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุฎุตูุต ุงูุฐุงูุฑุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงุน</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎุชููุฉ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ูู ุงููุฌููุนุงุช</font></a><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar439066/">https://habr.com/ru/post/ar439066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar439050/index.html">ุชุฏุฑูุจ Cisco 200-125 CCNA v3.0. ุฃุฎุตุงุฆู ุดุจูุงุช ุณูุณูู ุงููุนุชูุฏ (CCNA). ุงูููู 2. ููุงุฐุฌ OSI ู TCP-IP</a></li>
<li><a href="../ar439056/index.html">ุชูุงูู ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ ููุฃุณููุช</a></li>
<li><a href="../ar439060/index.html">7 ุฃููุงุน ูู ุงูุนููุงุก</a></li>
<li><a href="../ar439062/index.html">Anisoprint ุงูููุญู: ุทุจุงุนุฉ ุนุงููุฉ ุงูููุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ</a></li>
<li><a href="../ar439064/index.html">ุฎุทุฃ ุดุจูุฉ ูููุฐุฌู (Bootstrap Grid) ุฃู ููุงุฐุง ูุง ูููู ุงููุตูู ููุตูู ุงูุชุฎุทูุท ุจุนุถููุง ุงูุจุนุถ</a></li>
<li><a href="../ar439068/index.html">ุฅุนุงุฏุฉ ุชูุฌูู ุญููุฉ "ุฃุญุจู" ููุฑุณุงุฆู ุบูุฑ ุงููุฑุบูุจ ูููุง ุฅูู ุงููุงุจุงู</a></li>
<li><a href="../ar439070/index.html">ุงูุตูู ุณูู ุชุชุฎูู ุนู ูุธุงู ููุงูุญุฉ ุงููุณุงุฏ Aero Zero Trust ุจุณุจุจ ููุงุกุชู ุงูุนุงููุฉ</a></li>
<li><a href="../ar439072/index.html">ุจูุงู ูู ุงููุทูุฑ ุงูููุฒู ุงูุฐูู: 15 ูุจุงุฏุฆ</a></li>
<li><a href="../ar439076/index.html">ูู ุฃู ุชุทุจููุงุช ุชูุชุธุฑ ุงูููุฏ ุงูุถุงุฑ ุบูุฑ ุงููุนุฑููุ</a></li>
<li><a href="../ar439078/index.html">ุงููุจุถ ุนูู ูุจุฑูุฌ ุจูุฑู ูุฅูุดุงุก ุชุทุจููุงุช ุงููุงุชู ุงููุชุญุฑู ูู ุฎูุงูู ุชุตุฑู ุงูุฃุทูุงู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>