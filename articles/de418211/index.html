<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚭 👩🏽‍🎤 🤽🏾 MIT-Kurs "Computer Systems Security". Vorlesung 4: „Privilegien teilen“, Teil 3 🏩 ⌨️ 🧓🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 4: „Privilegien teilen“, Teil 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418211/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vorträge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gefährden, und Sicherheitstechniken, die auf jüngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen gehören Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: „Einführung: Bedrohungsmodelle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: „Kontrolle von Hackerangriffen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: „Pufferüberläufe: Exploits und Schutz“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: „Trennung von Privilegien“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  Unsere Zeichnung zeigt also ein „Kunstwerk“, das seine Schöpfer vor Bedrohungen schützen wollten.  In ihrem Fall waren sie meiner Meinung nach sehr besorgt, weil sie mit der Erstellung der Dating- <b>Website okcupid.com</b> wirklich sicherstellen wollten, dass der Ruf der Benutzer der Website nicht durch die Offenlegung personenbezogener Daten beeinträchtigt wird.  Aus einem Gespräch mit einem der Entwickler der Website, der den Artikel darüber geschrieben hat, ist bekannt, dass sie nicht wirklich kompromittiert wurden.  Zumindest trat kein Datenverlust aufgrund der Verwendung der <b>OKWS-</b> Architektur und teilweise aufgrund der Überwachung böswilliger Aktivitäten auf. <br><br>  Der Grund, warum Benutzer ihre Anwendungen nicht in kleinere Komponenten aufteilen, liegt darin, dass dieser Prozess einige Anstrengungen erfordert.  Es ist notwendig, alle Teile des Codes auszuwählen, klare Schnittstellen zwischen ihnen zu definieren und zu entscheiden, auf welche Daten jede Komponente Zugriff haben soll.  Wenn Sie eine neue Funktion implementieren möchten, müssen Sie die Daten ändern, auf die jede Komponente des Programms Zugriff hat, um ihr neue Berechtigungen zu erteilen oder einige auszuwählen, und so weiter.  Dies ist also ein ziemlich zeitaufwändiger Prozess. <br><br><img src="https://habrastorage.org/webt/th/7c/nb/th7cnbytweb-shrbg6mai4qmhpw.jpeg"><br><br>  Versuchen wir zu verstehen, wie der Webserver aufgebaut ist. Eine Möglichkeit, dies zu tun, besteht darin, zu verfolgen, wie die http-Anforderung vom <b>OKWS-</b> Server verarbeitet wird.  Ähnlich wie in der vorherigen Abbildung haben wir einen Webbrowser, der zu <b>okcupid.com</b> gehen <b>möchte</b> .  Die Entwickler des Site-Projekts stellten sich vor, dass sie eine Reihe von Maschinen haben würden, aber wir werden uns nur die Oberfläche der Site ansehen, auf der <b>OKWS</b> arbeiten wird, und eine andere Maschine im Hintergrund, auf der die Datenbank gespeichert wird.  Diese zweite Maschine verwendet <b>MySQL,</b> da sie für viele Aufgaben eine gute Software ist.  Sie möchten diese Daten wirklich schützen, da es sehr schwierig ist, auf eine <b>unformatierte</b> Festplatte oder Datenbank mit rohen Rohdatagrammen zuzugreifen. <br><br>  Wie funktioniert die Anfrage, wie wird die Anfrage vom <b>OKWS-</b> Server verarbeitet?  Zuerst kommt es an und wird von einem Prozess namens <b>okd</b> für den <b>OKWS-</b> Dispatcher verarbeitet.  Er prüft, ob er nach dieser Anfrage fragt, und erledigt dann einige Dinge.  Da Sie diese Anforderung möglicherweise zuerst registrieren müssen, wird sie an eine Komponente namens <b>oklogd</b> umgeleitet. <b>Anschließend</b> müssen Sie einige Vorlagen erstellen, und es kann erforderlich sein, sie noch vor dem Eintreffen der Anforderung zu erstellen.  Und es macht eine andere Komponente namens <b>pubd</b> . <br><br><img src="https://habrastorage.org/webt/wq/uz/o0/wquzo0-ivmzrydzbxgj_ckcecsw.jpeg"><br><br>  Und schließlich gibt es einen bestimmten Dienst, an den diese Anforderung gesendet wird. In <b>okd</b> gibt es also eine Tabelle der unterstützten Dienste.  Vermutlich kommt diese Anfrage zu einem dieser Dienste. Nach dem Überprüfen von <b>okd wird</b> diese Anforderung an einen bestimmten <b>SVC-</b> Dienstprozess weitergeleitet.  Dieser Dienst wird genau das tun, was die Anforderung erfordert, z. B. den Benutzer für den Newsletter abonnieren oder es ermöglichen, das Verzeichnis der Benutzer von <b>ocupid</b> mithilfe der Datenbank usw. <b>anzuzeigen</b> . <br><br>  Und dafür benötigen Sie wahrscheinlich den Dienst, um die Anwendungsinformationen im <b>oklogd-</b> Komponentenprotokoll zu <b>belassen</b> .  Und am Ende des Tages sollte er mit der Datenbank "sprechen".  Die Ersteller der Site haben diesen Prozess der "Kommunikation" etwas anders implementiert als normalerweise in <b>Apache</b> , wo Sie einfach mit der Datenbank kommunizieren und beliebige <b>SQL-</b> Abfragen ausgeben.  Sie entwickelten das Konzept eines Datenbank-Proxys, <b>dbproxy</b> , der sich vor der <b>MySQL-Datenbank befindet</b> und Anforderungen des <b>SVC-</b> Dienstes zur Ausführung akzeptiert.  Ich denke, diese Abbildung zeigt im Grunde, wie <b>OKWS</b> funktioniert. <br><br><img src="https://habrastorage.org/webt/e1/nb/be/e1nbbexq_wqwyqtsop6vnvlmfd0.jpeg"><br><br>  Es gibt eine andere Komponente, die all dies initiiert. Sie heißt <b>okld</b> und ist für das Starten aller Prozesse in der Schnittstelle dieses Webservers verantwortlich.  Ich hoffe, einige dieser Dinge kommen Ihnen bekannt vor, denn genau diese Architektur wurde im Labor berücksichtigt.  Es sieht so aus, als wäre es ein gutes Design.  Sie hatten nicht <b>pubd</b> , <b>logd</b> und <b>dbproxy in LR</b> , aber Sie hatten <b>okd</b> und <b>svc</b> .  Haben Sie Fragen zu <b>OKWS</b> ? <br><br>  <b>Zielgruppe:</b> <b>Haben</b> wir richtig verstanden, dass <b>dbproxy</b> keine SQL-Abfragen akzeptiert, sondern eine andere Art von Abfrage? <br><br>  <b>Professor:</b> Ja, richtig!  Wie sieht diese Schnittstelle aus?  Sie beschreiben dies nicht sehr detailliert, aber eine Sache, die Sie mit diesem <b>Datenbankproxy</b> tun <b>könnten,</b> ist, viele Argumente für <b>SQL-</b> <b>Abfragevorlagen aufzubewahren</b> .  Beispielsweise könnte es sich um eine Suchanfragevorlage für Ihre Freunde handeln, bei der diese nach <b>ID ausgewählt werden</b> . <br><br><img src="https://habrastorage.org/webt/0e/fv/33/0efv33jbe-yuwdw82mwqzxof_xc.jpeg"><br><br>  Angenommen, es gibt eine Vorlage wie "Wählen Sie <b>^ ID</b> aus Ihrer Freundesliste aus, wobei <b>^ ID ="% S "</b> .  Angenommen, Sie möchten <b>Alice</b> unter Ihren Freunden finden und eine <b>S-</b> Anfrage senden, in der das Argument <b>„Alice“</b> lautet.  <b>Teilen</b> Sie unserer in der Benutzeroberfläche verfügbaren Anwendung mit, dass <b>dbproxy</b> bereit ist, drei Arten von Anforderungen in seinem Namen auszuführen.  Wenn Sie die Abfrage Nr. 1 ausführen möchten und das Argument <b>"Alice"</b> lautet, erhalten Sie Zugriff auf die Datenbank. <br><br>  <b>Zielgruppe:</b> Kann ein externer Benutzer auf der Ebene eines Webbrowsers eine solche Anfrage an die Datenbank senden oder gilt dies nur für interne Benutzer des Netzwerks? <br><br>  <b>Professor:</b> Ja, vielleicht.  Wie funktioniert es?  In der Tat ist es seltsam, dass sich diese Datenbank auf einem separaten Computer befindet, weil Sie einfach eine Verbindung zur <b>OKWS-</b> Datenbank oder zum <b>MySQL-</b> Server herstellen können.  Was hält das auf? <br><br>  <b>Zielgruppe:</b> Firewall? <br><br>  <b>Professor:</b> Ja, wahrscheinlich auf einer bestimmten Ebene.  Die Entwickler beschreiben dies nicht zu ausführlich, aber auf dem zweiten Computer befindet sich wahrscheinlich ein internes Netzwerk, und es gibt einen Wechsel zwischen der Schnittstelle und der Datenbank, der von außen nicht erreichbar ist.  Tatsächlich befinden sich beide Computer im selben Netzwerk, aber es gibt eine <b>Fw-</b> Firewall mit bestimmten Regeln.  Möglicherweise können Sie nur über Port 80 eine Verbindung zu diesem Schnittstellencomputer herstellen, nicht jedoch direkt zum internen Server.  Dies ist eine der Schutzoptionen. <br><br><img src="https://habrastorage.org/webt/uu/lq/pt/uulqptu9yvouev1n-gdwegusujc.jpeg"><br><br>  Ein weiterer <b>Grund</b> ist wahrscheinlich, dass Sie beim <b>Herstellen einer</b> Verbindung zu diesem <b>Datenbankproxy-</b> Datenbankproxy ein 20-Byte-Kryptografietoken oder einen Schlüssel bereitstellen müssen. Wenn Sie diesen nicht bereitstellen, <b>lehnt dbproxy</b> Ihre Verbindung ab.  Die Regel ist also, dass Sie eine TCP-Verbindung öffnen, Ihre 20 Bytes senden und wenn sie falsch sind, wird die Verbindung geschlossen.  Ich denke, das ist die Bedeutung eines solchen Systemdesigns. <br><br>  Versuchen wir also herauszufinden, wie diese verschiedenen Prozesse hier isoliert sind.  Wie können Sie sicherstellen, dass sich alle diese Komponenten nicht gegenseitig überfordern? <br><br>  <b>Zielgruppe:</b> Unterschiedliche Root-Rechte und unterschiedliche Benutzer-IDs? <br><br>  <b>Professor:</b> Ja, fast jede dieser Komponenten arbeitet als eine andere <b>UID. Daher</b> gibt es hier in der Beschreibung des Systems eine ganze Tabelle, die für jede Komponente beschreibt, wo sie funktioniert und mit welcher <b>UID</b> .  Wir können also schreiben, dass <b>okd</b> eine eigene <b>UID hat</b> , <b>pubd</b> eine eigene <b>UID</b> und <b>oklogd</b> auch eine eigene <b>UID</b> . <br><br>  <b>Okld</b> arbeitet als <b>Root</b> , was eher erfolglos ist, aber vielleicht ist das keine große Sache.  Dann gibt es eine ganze Reihe von dynamisch zugewiesenen Benutzer-IDs für jeden Dienst, zum Beispiel ID 51001 usw. <br><br><img src="https://habrastorage.org/webt/hc/bp/bj/hcbpbjjrkwqqhtdun36v3fm7b_s.jpeg"><br><br>  Auf diese Weise wird sichergestellt, dass nicht jeder Dienst die Prozesse anderer Dienste stören kann.  <b>Chroot wird</b> auch hier häufig verwendet, sodass einige dieser Komponenten <b>Chroot-</b> Rechte in separaten Verzeichnissen haben.  Zum Beispiel sind <b>okd</b> und <b>svc</b> in einigen Verzeichnissen mit gemeinsamen <b>Chroot-</b> Rechten ausgestattet.  Warum haben diese beiden Komponenten Ihrer Meinung nach eine separate und nicht mit anderen <b>Chroot-</b> Komponenten gemeinsame? <br><br>  <b>Zielgruppe:</b> Weil <b>okd</b> keine Root-Rechte hat. <br><br>  <b>Professor:</b> Ja, aber warum setzen sie nicht <b>pubd</b> , <b>oklogd</b> und alle anderen in die gleiche <b>Chroot</b> ? <br><br>  <b>Zielgruppe:</b> Ist es möglich, dass Dienste, die viele Daten gemeinsam nutzen müssen, voneinander isoliert werden sollten? <br><br>  <b>Professor:</b> vielleicht.  Ich denke, dass sie einige Daten teilen sollten, aber diese Daten sind nicht in den Dateien, sie werden über Sockets von <b>okd</b> zu Diensten übertragen.  Tatsächlich speichert jedoch keine dieser Komponenten etwas Interessantes im Dateisystem. <br><br>  Daher gibt es im <b>chroot-</b> Verzeichnis nichts Interessantes, und ich denke, dass die Leute von <b>OKWS</b> einfach beschlossen haben, die unproduktiven Kosten für <b>chroot</b> zu reduzieren, beispielsweise die Notwendigkeit, eine Kopie des Verzeichnisses zu erstellen.  Vielleicht wollten sie auch den Verwaltungsaufwand für jeden <b>Chroot-</b> Befehl loswerden.  Da es hier aber keine echten Dateien gibt, ist alles in Ordnung. <br><br>  Der Grund, warum diese Leute den Umgebungskomponenten unterschiedliche <b>Chroot</b> zugewiesen haben, sind einige interessante Dinge.  Möglicherweise gibt es Vorlagen, aber hier gibt es möglicherweise eine Protokolldatei, sodass die Protokolldatei nicht versehentlich gelesen werden soll, und dergleichen. <br><br>  <b>Zielgruppe:</b> <b>Verfügen</b> diese Dienste beispielsweise über Dateien wie <b>aspx</b> ? <br><br>  <b>Professor:</b> Wie im Artikel beschrieben, handelt es sich bei dem Dienst um eine einzelne kompilierte <b>C ++ -</b> Binärdatei, sodass tatsächlich keine zusätzlichen Dateien vorhanden sind. <br><br>  Es gibt Vorlagen, aber sie werden wirklich über diesen seltsamen Mechanismus übertragen: <b>pubd</b> hat Vorlagen in seinem Verzeichnis, zeigt sie in einem <b>Vorcomputer an</b> , Home-Form in <b>okd</b> , und <b>okd</b> stellt bereits Vorlagen für alle Dienste über <b>RPC-</b> Aufrufe bereit.  Sie befinden sich also im Speicher, sind jedoch direkt über das Dateisystem nicht zugänglich.  Dies ist ein etwas paranoides Design, wenn ich die Vorlagen nicht einmal lesen kann. <br>  Was bringt es also, all diese Komponenten zu trennen?  Warum brauchen wir ein separates <b>oklogd</b> ? <br><br>  <b>Zielgruppe:</b> Um die Möglichkeit des Überschreibens oder Zuschneidens des Journals auszuschließen? <br><br>  <b>Professor:</b> Ja, also wollen wir wirklich sicherstellen, dass das Tagebuch zumindest nicht beschädigt wird, wenn etwas schief geht.  Daher gibt es eine separate Protokolldatei, die von dieser <b>UID geschrieben werden kann</b> , und alle Protokollnachrichten werden als <b>RPC</b> für diesen Protokolldienst gesendet.  Und selbst wenn alles andere ruiniert ist, <b>bleibt</b> das Magazin mit Ausnahme von <b>okld</b> unversehrt. <br><br>  <b>Teilnehmerin:</b> Was ist, wenn Sie versehentlich einen Weg gefunden haben, das Magazin zu lesen und nicht sehen, was die anderen damit gemacht haben? <br><br>  <b>Professor:</b> Nein, ich denke, wenn Sie einen Dienst, eine <b>Kneipe</b> oder etwas anderes „gehackt“ haben, können Sie alles in das Tagebuch schreiben.  Daher ist es <b>sinnvoll</b> , einen separaten <b>oklogd-Eintrag zu erstellen</b> .  Tatsächlich ist <b>oklogd</b> ein separater Prozess und wird nicht nur durch Anhängen von Dateien als <b>Nur-Anhängen-Datei</b> aktualisiert.  Daher kann <b>oklogd</b> nicht jedem Protokolleintrag zusätzliche Informationen hinzufügen. Wenn das Betriebssystem die <b>Nur-Anhängen-</b> Datei unterstützt, wissen Sie in diesem <b>Fall</b> nicht, dass jemand in die Datei geschrieben hat.  Während <b>oklogd</b> für jede Nachricht einen Zeitstempel setzt und Sie herausfinden können, welcher Dienst die Aufnahme gemacht hat oder von <b>okd stammt</b> .  Daher erhalten Sie in dieser Protokolldatei tatsächlich zusätzliche Informationen, da es sich um einen separaten Dienst handelt. <br><br>  Und was bedeutet <b>okld</b> Separation und warum sollte es mit Root-Rechten funktionieren?  Ich denke, dafür gibt es mehrere Gründe. <br><br>  Zielgruppe: Wenn Sie möchten, dass niemand anderes mit Root-Rechten handelt, müssen Sie die <b>okld-</b> Benutzerauthentifizierungsfunktion delegieren. <br><br><img src="https://habrastorage.org/webt/xg/c2/p0/xgc2p0qzezaptmg1jagd1l3koxi.jpeg"><br><br>  <b>Professor:</b> Ja.  Jemand muss diese ganze Sache <b>uid chroot</b> konfigurieren, und Sie benötigen <b>root</b> für dieses <b>Unix</b> , also bietet <b>okld</b> dies an.  Dies ist einer der Gründe.  Noch etwas? <br><br>  <b>Zielgruppe:</b> 80 Port Definition? <br><br>  <b>Professor:</b> Ja natürlich!  Sie müssen das Abhören von Port 80 binden, der <b>okkld ist</b> und noch etwas bietet? <br><br>  <b>Zielgruppe:</b> Das Öffnen der <b>oklogd-</b> Protokolldatei wird abgeschlossen, da <b>oklogd nicht</b> geöffnet <b>bleiben soll</b> , um den Zugriff auf die Protokolldatei zu verhindern. <br><br>  <b>Professor:</b> vielleicht.  Aber ich weiß nicht, ob die Entwickler es wirklich getan haben, weil sie ihren Quellcode nicht angesehen haben.  Denken Sie, dass <b>okld</b> die Protokolldatei öffnet und <b>oklogd übergibt</b> ?  Möglicherweise. <br><br>  <b>Zielgruppe:</b> <b>Andernfalls</b> könnte ein Angreifer, der <b>oklogd</b> kompromittiert <b>hat,</b> das gesamte Protokoll löschen. <br><br>  <b>Professor:</b> Ja, das ist richtig.  Vielleicht möchten Sie es im <b>Anhänge-</b> Modus öffnen und dann <b>oklogd übergeben</b> , dann haben Sie mehr Sicherheitsgarantien für das Protokoll.  Dies ist etwas, was Sie ohne Root-Rechte nicht tun können. <br><br>  Wir hatten also eine Frage zu den Hausaufgaben, was passieren wird, wenn dieses 20-Byte-Token für den Zugriff auf die Datenbank "durchgesickert" ist.  Welchen Schaden kann dies verursachen?  Sollten wir uns darüber Sorgen machen? <br><br>  <b>Zielgruppe:</b> In diesem Fall kann ein Angreifer die Kontrolle über einen bestimmten Dienst übernehmen. <br><br>  <b>Professor:</b> Ja, richtig, denn jetzt können Sie alle Abfragevorlagen verbinden und abrufen.  Es scheint eigentlich ziemlich einfach.  Sie müssen wahrscheinlich eine dieser Komponenten kompromittieren, um zuerst eine Verbindung zur Serverdatenbank herstellen zu können.  Ich denke also, wenn Sie dieses Token haben und eine dieser in der Abbildung gezeigten Komponenten kompromittieren können, könnten Sie alle diese Abfragen verwenden. <br><br>  Nun wollen wir sehen, wie dieses <b>OKWS-</b> Design verbessert werden kann.  Beispielsweise wäre es möglich, jedem Benutzer eine separate <b>UID-</b> Einheit <b>zuzuweisen</b> und zusätzlich jedem Dienst eine separate <b>UID zuzuweisen</b> .  Hier hat jeder Dienst, z. B. Nachrichten, die Suche nach Freunden oder das Erstellen eines Kontos, eine separate <b>Benutzer-ID</b> , aber jeder <b>OKWS-</b> Benutzer <b>wird</b> nicht als <b>Unix-UID dargestellt</b> .  Eigentlich gibt es hier keine <b>Benutzer-ID,</b> hier sind nur Service- <b>IDs</b> vorhanden.  Denken Sie, dass <b>Sie</b> für jeden <b>OKWS-</b> Client eine andere <b>UID</b> <b>benötigen</b> ? <br><br>  <b>Zielgruppe:</b> In diesem Fall stellt sich heraus, dass ein Benutzer, der einen Dienst „hackt“, auf alle Daten anderer Benutzer dieses Servers zugreifen kann. <br><br>  <b>Professor:</b> Ja, das stimmt! <br><br>  <b>Zielgruppe:</b> Wenn Sie jedoch tatsächlich einen separaten Dienst und einen separaten <b>Datenbankproxy</b> für jeden Benutzer hätten, wäre es unmöglich, auf die Daten anderer Personen zuzugreifen. <br><br>  <b>Professor:</b> Ja, aber könnte dies ein stärkeres Modell sein?  Ich denke, dass <b>OKWS-</b> Entwickler aus zwei Gründen keinen solchen Schritt unternehmen.  Das erste ist die Leistung.  Wenn Sie ein paar Millionen Benutzer der <b>okcupid-</b> Site, mehrere Millionen laufende Prozesse und ein paar Millionen <b>dbproxie haben</b> , sind Leistungs-Overheads möglich.  <b>Dadurch kann</b> nicht die gleiche Leistung <b>erzielt werden</b> , die die vorhandene <b>OKWS-</b> Architektur <b>bietet</b> . <br><br>  <b>Zielgruppe: Die</b> <b>OKWS-</b> Beschreibung besagt, dass die Leistung dieses Systems besser ist als bei anderen Systemen.  Wie wurde dies erreicht? <br><br>  <b>Professor:</b> Ich denke, das liegt zum Teil daran, dass sie ihr Design auf eine bestimmte Arbeitslast abgestimmt haben. Außerdem haben sie dies alles in <b>C ++ geschrieben</b> .  Eine Alternative besteht darin, einige Dinge in <b>PHP</b> zu schreiben, dann werden Sie wahrscheinlich Vorteile in dieser Hinsicht erzielen. <br><br>  Darüber hinaus verfügen sie nicht über viele der Funktionen, die <b>Apache</b> bietet.  Es hat ein universelles Design, hat also viele Arbeitsprozesse und lädt sie von Zeit zu Zeit neu.  Es gibt viele <b>TTP-</b> Verbindungen, die die Dauer des Verbindungsprozesses sicherstellen und ihre Aktivität beibehalten.  Es erhöht auch die Anzahl der auf dem System ausgeführten Prozesse.  <b>Apache wurde</b> universeller gestaltet und kann alles tun, was Sie vom Internet-Server <b>erwarten. Die Mitarbeiter</b> von <b>OKWS</b> konzentrieren <b>sich</b> mehr auf die Lösung spezifischer Probleme. <br><br>  Aber ich denke, es gibt <b>heutzutage</b> andere Webserver, die wahrscheinlich mit der <b>OKWS-</b> Leistung <b>mithalten</b> können.  Zum Beispiel ist <b>Nginx</b> ein sehr optimierter Webserver, den Sie heutzutage ausführen können.  Wenn Sie Hochleistungsanwendungen auf der Serverseite wünschen, möchten Sie wahrscheinlich, dass der lange Prozess dem <b>OKWS-</b> Service sehr ähnlich ist.  Und damit es einen Mechanismus für eine schnelle gemeinsame <b>CGI-</b> Gateway-Schnittstelle zum Verbinden eines externen Programms mit einem Webserver oder eine Art Protokoll gibt, das auf der Serverseite verwendet werden könnte, um dies sogar in <b>Apache</b> oder <b>Nginx</b> zu implementieren.  Daher denke ich, dass viele dieser Ideen nicht nur <b>OKWS vorbehalten sind</b> , sondern auch auf anderen Webservern implementiert werden können.  Sie zeigen lediglich, dass die Verbesserung der Sicherheit die Verwendung dieser "Tricks" nicht ausschließt.  Ich denke, sie haben mit einem ähnlichen Schema wie <b>Apache begonnen</b> , aber sie dachten, es wäre nicht sicher genug. <br><br>  Daher denke ich, dass einer der Gründe, warum die <b>Entwickler</b> von <b>OKWS</b> keine separaten Berechtigungen für Benutzer einführen wollten, eine mögliche Leistungsverschlechterung war. <br><br><img src="https://habrastorage.org/webt/ai/s9/zb/ais9zbrgrmnoslcojxk0jacxdyc.jpeg"><br><br>  Ein weiterer Grund ist, dass sich das vollständige Anwendungsmodell um einen Dienst dreht, der versucht, auf die Daten jedes Benutzers zuzugreifen, z. B. die Suche nach Freunden auf <b>okcupid</b> oder nach jemandem, den Sie zu einem Datum einladen können.  Infolgedessen ist dieses Modell der Benutzerisolation nicht sehr sinnvoll, da es letztendlich einen Dienst geben sollte, für den Sie eine Anfrage senden, und der alle anderen Daten überprüft, um eine Übereinstimmung für Ihre Anfrage zu finden.  Selbst wenn Sie über Benutzer-IDs oder einen Mechanismus zum Isolieren verfügen, müssen Sie dennoch für jeden Benutzer den Zugriff auf den Dienst öffnen. <br><br>  Bei anderen Diensten wie <b>Google Mail</b> oder <b>Dropbox</b> , die sich viel stärker auf einen bestimmten Benutzer konzentrieren und keine offene Möglichkeit zum Freigeben ihrer Dateien bieten, kann das Isolieren von Benutzern weitere Vorteile bieten.  Auf dem <b>Dropbox-</b> Server gibt es beispielsweise eine <b>Benutzer-ID</b> für jeden <b>Dropbox-</b> Client.  Und wenn ein Prozess für Sie und ein Prozess für eine andere Person ausgeführt wird, können Sie selbst mit einem böswilligen Exploit nicht auf die Informationen anderer Personen zugreifen. <br>  Lassen Sie uns nun sehen, ob es <b>OKWS wirklich</b> gelungen ist, die Sicherheit in einem solchen <b>Servermodell</b> zu verbessern.  Um die Sicherheit zu bewerten, müssen Sie jede Komponente des Systems berücksichtigen und bestimmen, welche Art von Angriffen es beschädigen könnte. <br><br>  Beginnen wir mit <b>okd</b> .  Es kann beispielsweise mit Anfragen über den Browser angegriffen werden, was zu einem Pufferüberlauf führt.       c++,  ,       - ,   <b>okd</b>  .      ? <br><br><img src="https://habrastorage.org/webt/qz/md/d9/qzmdd9xheqlsc2fpbgs4e5to3_i.jpeg"><br><br> <b>:</b>        ? <br><br> <b>:</b> ,  ,      .   ? <br><br> <b>:</b>       ,  . <br><br> <b>:</b> ,  .  , ,       ,        <b>http</b> ,   ,   ,     .  ,     . <br><br> <b>:</b>           ? <br><br> <b>:</b> ,       .    ,  ,      ,        , ,  <b>match.com</b>    . , ,      <b>OkCupid</b> . , - ?          ? <br><br> <b>:</b> ,    ,      <b>okd</b> .           ,    ? <br><br> <b>:</b> .   , <b>okd</b>     . <br><br> <b>:</b> ,     ? <br><br> <b>:</b> !      ,      , , ,      ,   .      ,   , ,   ,      . , ,   .   «» <b>okd</b> ,     ,     ,         . <br><br> <b>:</b>         DOS-? <br><br> <b>:</b> ,  , , «»       «»  ,   DOS-    -   . <br><br> <b>:</b>       <b>okd</b> ,     ,  … <br><br> <b>:</b> ,  .  ,   , <b>okd</b>    ,         <b>okd</b> ,     .     <b>okd</b> ,           .  ,    <b>okd</b>  ,       ,      ,   ,            . <br><br> <b>:</b>          . <br><br> <b>:</b> ,    .  , <b>okd</b>     .   ,    <b>oklogd</b> ?    ? <br><br> <b>:</b>      . <br><br> <b>:</b> ,          ,             ,   ?       <b>pubd</b> ,  ,     ,  -  . <br><br> <b>:</b> ,    ,   «»  <b>oklogd</b> . <br><br> <b>:</b> ,  .      ,      ,   <b>append-only</b>    ,        . <br><br> <b>:</b> ,      … <br><br> <b>:</b> ,        ,   .          . <br><br>     <b>svc</b> ? ,  ,   .       , ,   <b>okd</b>  <b>oklogd</b>    .         ,  ,        . <br><br>   <b>svc</b>  - -,        ,       ,         .   ,         ,        ,       . <br><br>      <b>okld</b> ?       ,      root.       ? ,       .           <b>dbproxy</b> .    <b>okld</b> ?      «»?    ? <br><br> <b>:</b> ,  -   ? <br><br> <b>:</b> ,       .          ,    ,       . ,        ,  -    ,     , ,     -    .         -     .          root-   . <br><br> <b>:</b> -,    ,     -   <b>dbproxy</b> . <br><br> <b>:</b> ! <br><br> <b>:</b>  ,     ,  ,     <b>RPC</b> ,       ,     ,     ,  ,   !      . <br><br><img src="https://habrastorage.org/webt/qs/cu/x6/qscux6nxwgoo9wqu10wj04npz38.jpeg"><br><br> <b>:</b> ,    .       <b>dbproxy</b> ?  ,            .   ,   «»   ,      <b>dbproxy</b>  - . <br><br> <b>:</b>      ,   <b>svc</b>  … <br><br> <b>:</b> ,  <b>svc</b>   ,     ! <br><br> <b>:</b>  ,    ,     ! <br><br> <b>:</b>  ,  ,      <b>«»</b> ,       … <br><br> <b>:</b>   <b></b>     <b>dbproxy</b> . <br><br> <b>:</b> . ,      <b>dbproxy</b> ,   . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich hoffe, Sie verstehen, was uns das Teilen von Anwendungsberechtigungen gibt. </font><font style="vertical-align: inherit;">Und wie wir sehen können, ist dies nicht perfekt. </font><font style="vertical-align: inherit;">Es gibt noch viele andere Dinge, die schief gehen können. </font><font style="vertical-align: inherit;">Es scheint jedoch, dass diese Lösung auf jeden Fall besser ist als das Entwerfen einzelner Anwendungen ohne Zugriffsrechte, mit denen wir begonnen haben.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/dNl22h1kW1k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Vollversion des Kurses finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Vielen Dank für Ihren Aufenthalt bei uns.  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder sie Ihren Freunden empfehlen. <b>Habr-Benutzer erhalten 30% Rabatt auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418211/">https://habr.com/ru/post/de418211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418201/index.html">Können wir Duck Hunt wiederbeleben?</a></li>
<li><a href="../de418203/index.html">GraphQL API (CRUD) für unterwegs</a></li>
<li><a href="../de418205/index.html">Space Language Vol. 2: Willkommen, GJ273b</a></li>
<li><a href="../de418207/index.html">Überprüfung der Gaming-Laptops ASUS ROG Strix GL504GS SCAR II und ASUS ROG Strix GL504GM HERO II</a></li>
<li><a href="../de418209/index.html">Wir erhalten Daten von Mercury 203.2T-Zählern auf RS-485</a></li>
<li><a href="../de418213/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 5: „Woher kommen Sicherheitssysteme?“, Teil 1</a></li>
<li><a href="../de418215/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 5: „Woher kommen Sicherheitssystemfehler?“, Teil 2</a></li>
<li><a href="../de418217/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: „Chancen“, Teil 1</a></li>
<li><a href="../de418219/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: Chancen, Teil 2</a></li>
<li><a href="../de418221/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: „Chancen“, Teil 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>