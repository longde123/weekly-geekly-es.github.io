<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåù üë©‚Äç‚ù§Ô∏è‚Äçüë© üë©‚Äçüî¨ Kampfflug auf Meteor-e ü•Ä ü•â ‚úãüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine Diskussion √ºber Themen zum Meteor wird unter russischsprachigen Personen selten gesehen (nach dem Kanal im Wagen und der √∂ffentlichen VK, Habr). ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kampfflug auf Meteor-e</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437166/">  Eine Diskussion √ºber Themen zum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Meteor wird</a> unter russischsprachigen Personen selten gesehen (nach dem Kanal im Wagen und der √∂ffentlichen VK, Habr).  Ein Erfahrungsaustausch ist m√∂glich, jedoch gr√∂√ütenteils im offiziellen Meteorforum. <br><br>  Lange Zeit gab es keine Artikel √ºber Habr√© am Meteor, deshalb m√∂chte ich unsere Geschichte teilen. <br><br><img src="https://habrastorage.org/webt/yb/eg/iz/ybegizyju6wrvw5gliiixdzxyoa.png"><br><br>  Ich erz√§hle Ihnen von unserem Projekt, wie wir zu Meteor gekommen sind und wie wir damit fliegen.  Ich werde versuchen, nicht auf Details oder sehr spezifische Dinge einzugehen - ich werde sie zur Diskussion stellen oder einen separaten Artikel. <br><a name="habracut"></a><br><h3>  √úber das Projekt </h3><br>  Wir haben eine Online-Programmierschule f√ºr Kinder.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">PolinaV hat</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel</a> dar√ºber geschrieben, wie wir dies online tun.  Anfang 2018 haben wir begonnen, unser System - Gena - aktiv weiterzuentwickeln. <br><br>  Wir brauchten das Gen aus mehreren Gr√ºnden: <br><br><ul><li>  eine gro√üe Anzahl verschiedener Tools - Excel, ein Service zur Pflege von Zeitpl√§nen, Formularen usw.; </li><li>  Das separate Arbeiten mit Werkzeugen war nicht bequem. </li></ul><br>  In der ersten Version haben wir die wichtigsten Funktionen hervorgehoben: <br><br><ul><li>  Zeitplanverwaltung; </li><li>  Studenten- / Trainer-Management; </li><li>  Verwaltung interner Aufgaben. </li></ul><br>  Wir haben die Anzahl der Benutzer sowie die Datenmenge berechnet, die generiert wird.  Diese Informationen und ein grober Entwicklungsplan haben uns geholfen, die zuk√ºnftige Architektur von Genen zu bestimmen. <br><br><h3>  Gene und Meteor </h3><br>  Ich habe Meteor 2016 ausprobiert, als ich ein paar einfache Prototypen herstellen musste.  Zu dieser Zeit hatte ich die F√§higkeiten von C # (aber nicht ASP), PHP und ein bisschen JS. <br><br>  Ich wollte eine Sprache f√ºr Vorder- und R√ºckseite haben, um das Projekt nicht zu komplizieren und die Logik nicht zu duplizieren (vielleicht habe ich ein bisschen √ºber einfache Prototypen gelogen :)).  Daher habe ich mich entschieden, nur JS und NodeJS und MongoDB zu w√§hlen. <br><br>  Sowohl f√ºr mich als auch f√ºr den Helden aus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem</a> Artikel war die Webentwicklung eine Reihe dunkler Namen.  Und da es bereits Entwicklungserfahrung gab, habe ich verstanden, dass es vorgefertigte L√∂sungen gibt, mit denen Sie "nur die Arbeit erledigen" k√∂nnen, ohne sich um den Rest k√ºmmern zu m√ºssen. <br><br>  Ich kann mich nicht erinnern, wie Meteor gefunden wurde, aber es hat mich mit mehreren Dingen bestochen: <br><br><ul><li>  Einfach zu installieren / konfigurieren.  Ein Befehl in der Konsole - und er geh√∂rt Ihnen. </li><li>  bereit Daten√ºbertragungskanal (WebSocket + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DDP</a> ); </li><li>  eingebaute Datenbank - MongoDB (+ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">minimongo</a> ); </li><li>  ein einfaches Werkzeug zum Schreiben von UI - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Blaze</a> ; </li><li>  gute Dokumentation und verwandte Artikel / Videos. </li></ul><br>  Nachdem ich mehrere Prototypen implementiert hatte, begann ich, die Entwicklung des Meteors zu verfolgen, die Innenseiten zu studieren und kleine Projekte f√ºr mich zu sehen. <br><br>  Und jetzt ist es an der Zeit, ein Werkzeug f√ºr die Implementierung von Genen auszuw√§hlen.  Ich werde die Details der Suche nach anderen Instrumenten weglassen, ich werde die Argumente zugunsten des Meteors belassen: <br><br><ul><li>  wie ich oben schrieb - alles in einer Box; </li><li>  Wir k√∂nnen Leistung und Ressourcenverbrauch opfern, um die Entwicklung zu vereinfachen. </li><li>  Wir m√∂chten schnell neue Funktionen erhalten, damit diese sp√§ter entweder verbessert oder weggeworfen werden k√∂nnen. </li><li>  Es ist f√ºr einen kurzen Zeitraum (2-3 Tage) m√∂glich, den Entwickler JS mit dem Projekt zu verbinden. </li><li>  Es gibt eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Datenbank mit</a> vorgefertigten Paketen. </li></ul><br>  Ich werde separat √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Blaze</a> sprechen - ich habe absichtlich eine einfachere Entscheidung getroffen, um keine Zeit damit zu verschwenden, komplexere React / Vue zu studieren (ja, sie sind nicht in den Hype-Zug gesprungen). <br><br>  Zur Pflege von Aufgaben und Dokumentation verwenden wir Jira + Confluence.  Der Code wurde in Bitbucket festgelegt. <br><br>  Infolgedessen gab es eine solche Meinung: <br><br><ul><li>  Wenn Sie etwas sehr Einfaches haben, nehmen Sie rohes JS / CSS / HTML und machen Sie es (Landung zum Beispiel); </li><li>  Wenn es spezielle Anforderungen an Leistung, Ressourcen und Funktionen gibt, suchen Sie danach. </li><li>  in anderen F√§llen - nehmen Sie ein vorgefertigtes Framework, zum Beispiel Meteor.  Wenn Sie richtig kochen, sollte es keine Probleme geben. </li></ul><br><h3>  Entwicklungsprozess </h3><br>  Nach Auswahl des Tools begann die Implementierungsphase des Plans.  Wir denken nicht immer bis zum Ende √ºber die Anforderungen nach, daher m√ºssen wir die Funktion manchmal mehrmals wiederholen.  Wir haben auch viele Ideen und versuchen, diese so schnell wie m√∂glich bei echten Benutzern einzuf√ºhren. <br><br>  Die Struktur des Projekts (die Struktur von Ordnern und Dateien) hilft, Fragen zu vermeiden, was und wo sein sollte.  Dies ist in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation geschrieben</a> .  Das Schreiben von einfach unterst√ºtztem und erweiterbarem Code ist einfacher, wenn eine klare Trennung vorliegt.  Die UI-Funktionalit√§t ist in Komponenten unterteilt, mit denen Sie Funktionsbl√∂cke isolieren und wiederverwenden k√∂nnen. Beim Refactoring wird der Projektbereich nicht unterbrochen :). <br><br>  Es gibt viele <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorgefertigte Pakete</a> , die bestimmte Probleme l√∂sen.  Meteor bietet beispielsweise sofort eine Kontoverwaltung (Registrierung, Autorisierung usw.) und sendet E-Mails.  Dritte l√∂sen andere Probleme.  Einige von ihnen sind eine Schicht f√ºr <i>npm-</i> Pakete, daher ist die Datenbank mit vorgefertigten L√∂sungen sehr gro√ü. <br><br>  Mein Fehler war, die Tests abzulehnen.  Diese Entscheidung war, Zeit zu sparen, weil "Kunden die Tests nicht sehen".  Als ich jedoch die Situation mit aufkommenden Fehlern in Jire beobachtete, wurde mir klar, dass es Zeit war, den Ansatz zu √§ndern.  Sie gaben die Tests zur√ºck und begannen, auf TDD zu schreiben.  Nachdem der Code in den Entwicklungszweig <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gelangt war</a> , f√ºhrten sie au√üerdem Tests √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CircleCI</a> durch, um sicherzustellen, dass niemand etwas kaputt machte. <br><br>  Um den Codestil beizubehalten, wurde ESLint + prettier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">konfiguriert</a> .  Dies vermeidet Stilkorrekturen und l√§cherliche Fehler in der Phase der Ber√ºcksichtigung von PR (Pull Request).  Und damit der ‚Äûschlechte‚Äú Code den Git nicht erreicht, wurde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Husky</a> eingerichtet - ein Tool, das die erforderlichen Aufgaben in der Commit-Phase (und nicht nur) ausf√ºhren kann.  Bevor der Code in das Commit eingeht, durchl√§uft er die Pr√ºfung durch eslint und h√ºbscher. <br><br>  Es ist erw√§hnenswert, ein wichtiges Minus separat zu erw√§hnen - die Build-Geschwindigkeit des Projekts.  Das erste Mal dauert die Montage je nach B√ºgeleisen etwa 30 Sekunden.  Wenn Sie den Code √§ndern, dauert der Vorgang ca. 5-10 Sekunden.  Bei einem schwachen Eisen k√∂nnen die Zahlen gr√∂√üer sein.  Ich benutze ein MacBook Pro Mitte 15, i7, 16 GB, mir geht es gut. <br><br>  Sie beschlossen, das Gen auf Digital Ocean zu starten.  Es gibt einen Grund - den Preis.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Offizielles Hosting</a> f√ºr Meteor Liebling.  AWS ist billiger, aber komplizierter als DO.  Es gibt andere Alternativen, die sich jedoch f√ºr DO entschieden haben. <br><br><h3>  Flug </h3><br>  Momentan k√∂nnen bis zu 100 Benutzer gleichzeitig mit Gene verbunden sein.  Das ist nicht so sehr, aber wir haben auch einen gro√üen Sicherheitsspielraum.  Wir erwarten, 1000CCU in der aktuellen Konfiguration zu widerstehen. <br><br>  Bisher reichen uns zwei 10 $ Server + 5 $ Proxys (zum Balancieren).  Jeder Server ist NodeJS App + MongoDB.  Der Server f√ºr die √úberwachung wird separat gestartet.  Wir haben ein Verkehrswachstum vorhergesagt, sodass wir Zeit haben, neue Server bereitzustellen (das Tr√∂pfchen erh√∂hen und eine Linie zum Upstream hinzuf√ºgen). <br><br>  Das Eingie√üen einer neuen Version von Genes ist ein Vergn√ºgen.  Zu diesem Zweck wurde ein kleines Skript geschrieben, das das Projekt in tar (mit dem <i>Befehl meteor build</i> ) sammelt, auf den Server hochl√§dt, entpackt, <i>npm i</i> ausf√ºhrt und den Daemon startet.  Es dauert normalerweise 1 Minute. <br>  Wenn Sie die Details weglassen, dann so etwas (wenn es interessant ist, werde ich das Wesentliche vorbereiten): <br><br><div class="spoiler">  <b class="spoiler_title">Geige</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># meteor build --architecture=os.linux.x86_64 --server-only $BUILD_PATH scp $TAR_FILE_PATH $SERVER_APP_PATH #  cd $APP_ROOT rm -r bundle tar -xzf $TAR_NAME cd $APP_ROOT/bundle/programs/server/ &amp;&amp; npm i -q cd $APP_ROOT/bundle sudo forever-service install $SERVICE_NAME --script $APP_ROOT/bundle/main.js --envVars "$ENV_VARS" sudo service $SERVICE_NAME start</span></span></code> </pre> <br></div></div><br>  Wir beobachten Gena durch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kadira</a> (Bild am Anfang des Beitrags).  Ich musste ein wenig mit einem Tamburin tanzen, um in meinen Einrichtungen zu laufen, aber es hat sich gelohnt.  Alles ist klar und verst√§ndlich. <br><br>  Es gab noch keine Probleme mit der Stabilit√§t.  Versehentliche Abst√ºrze oder Speicherlecks werden nicht beobachtet. <br><br><h3>  Fazit </h3><br>  Wir haben das Gen ein halbes Jahr nach dem Start gestartet.  Das Team ist gewachsen, ebenso wie Gene.  H√∂chstwahrscheinlich werden wir aus dem Monolithen herauswachsen und es wird Microservices, Warteschlangen, einzelne Pakete usw. geben.  Aber das ist eine ganz andere Geschichte ... <br><br>  Der Meteor ver√§ndert sich.  F√ºr diejenigen, die es mit Version 1.4 und niedriger ausprobiert haben, empfehle ich, sich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liste der √Ñnderungen anzusehen</a> .  Ich hoffe, Sie werden angenehm √ºberrascht sein. <br><br>  Liste n√ºtzlicher Materialien zum Meteor: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offizieller F√ºhrer</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">behandelte Leistungsprobleme und wie man sie l√∂st</a> </li><li>  <a href="">Entwicklungsplan</a> </li></ul><br>  Wer mit einem Meteor arbeitet oder interessiert ist - nehmen Sie in einem Telegramm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">an</a> unserem Chatraum teil. <br><br>  Ich entschuldige mich, wenn ich keine wichtigen Themen offengelegt habe, ich werde versuchen, in den Kommentaren zu antworten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de437166/">https://habr.com/ru/post/de437166/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de437154/index.html">Positiver</a></li>
<li><a href="../de437156/index.html">Zuk√ºnftiger Geschichtenerz√§hler</a></li>
<li><a href="../de437158/index.html">Drei Prozent</a></li>
<li><a href="../de437160/index.html">Devops</a></li>
<li><a href="../de437164/index.html"># 10Jahre Herausforderung f√ºr Programmierer</a></li>
<li><a href="../de437170/index.html">Facebook schl√§gt vor, Weltraumlaser f√ºr die globale Kommunikation einzusetzen</a></li>
<li><a href="../de437172/index.html">IBM MQ und JMeter: Erster Kontakt</a></li>
<li><a href="../de437174/index.html">.NET, TensorFlow und die Windm√ºhlen von Kaggle - die Reise beginnt</a></li>
<li><a href="../de437176/index.html">App f√ºr iOS und Android auf Kotlin + Flutter UI</a></li>
<li><a href="../de437180/index.html">Harte sibirische JVM: Tolles Interview √ºber Excelsior JET</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>