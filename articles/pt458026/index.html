<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äç‚öñÔ∏è üë©üèº‚Äçüè≠ üêõ Compara√ß√£o de formatos de serializa√ß√£o üë©üèº‚Äç‚öñÔ∏è üëÉüèø ü§¥üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ao escolher o formato de serializa√ß√£o das mensagens que ser√£o gravadas na fila, no log ou em outro local, muitas vezes surgem v√°rias perguntas que afe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Compara√ß√£o de formatos de serializa√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458026/">  Ao escolher o formato de serializa√ß√£o das mensagens que ser√£o gravadas na fila, no log ou em outro local, muitas vezes surgem v√°rias perguntas que afetam de alguma forma a escolha final.  Um desses problemas principais √© a velocidade da serializa√ß√£o e o tamanho da mensagem recebida.  Como existem muitos formatos para esses fins, decidi testar alguns deles e compartilhar os resultados. <br><a name="habracut"></a><br><h2>  Prepara√ß√£o do teste </h2><br>  Os seguintes formatos ser√£o testados: <br><br><ol><li>  Serializa√ß√£o Java </li><li>  Json </li><li>  Avro </li><li>  Protobuf </li><li>  Thrift (bin√°rio, compacto) </li><li>  Msgpack </li></ol><br><br>  Scala foi escolhido como o PL. <br>  A principal ferramenta de teste ser√° o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Scalameter</a> . <br><br>  Os seguintes par√¢metros ser√£o medidos e comparados: o tempo necess√°rio para serializar e desserializar e o tamanho dos arquivos resultantes. <br><br>  Facilidade de uso, a possibilidade de evolu√ß√£o do circuito e outros par√¢metros importantes nesta compara√ß√£o n√£o participar√£o. <br><br><h3>  Gera√ß√£o de Entrada </h3><br>  Para a pureza das experi√™ncias, √© necess√°rio primeiro gerar um conjunto de dados.  O formato de entrada √© um arquivo CSV.  Os dados s√£o gerados usando um simples `Random.next [...]` para valores num√©ricos e `UUID.randomUUID ()` para valores de string.  Os dados gerados s√£o gravados em um arquivo csv usando <a href="">kantan</a> .  No total, foram gerados 3 conjuntos de dados de 100 mil registros cada: <br><br><ol><li>  Dados Mistos - 28 mb <br><br><div class="spoiler">  <b class="spoiler_title">Dados mistos</b> <div class="spoiler_text"><pre><code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MixedData</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> f1: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f2: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f3: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f4: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f5: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f6: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f7: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f8: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f9: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f10: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f11: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f12: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f13: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f14: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f15: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f16: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f17: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f18: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f19: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f20: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span></span></code> </pre> <br></div></div></li><li>  Somente linhas - 71 mb <br><br><div class="spoiler">  <b class="spoiler_title">Onlystrings</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnlyStrings</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> f1: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f2: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f3: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f4: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f5: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f6: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f7: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f8: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f9: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f10: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f11: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f12: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f13: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f14: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f15: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f16: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f17: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f18: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f19: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f20: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span></span></code> </pre> <br></div></div></li><li>  Apenas n√∫meros (longos) - 20 mb <br><br><div class="spoiler">  <b class="spoiler_title">Apenas</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnlyLongs</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> f1: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f2: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f3: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f4: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f5: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f6: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f7: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f8: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f9: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f10: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f11: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f12: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f13: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f14: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f15: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f16: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f17: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f18: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f19: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f20: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span></span></code> </pre> <br></div></div></li></ol><br>  Cada entrada consiste em 20 campos.  O valor de cada campo √© opcional. <br><br><h2>  Teste </h2><br>  Caracter√≠sticas do PC no qual o teste foi realizado, vers√£o do scala e java: <br>  PC: 1,8 GHz Intel Core i5-5350U (2 n√∫cleos f√≠sicos), 8 GB 1600 MHz DDR3, SSD SM0128G <br>  Vers√£o Java: 1.8.0_144-b01;  Ponto de acesso: build 25.144-b01 <br>  Vers√£o Scala: 2.12.8 <br><br><h3>  Serializa√ß√£o Java </h3><br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Dados mistos </th><th>  Apenas anseia </th><th>  Apenas strings </th></tr><tr><td>  Serializa√ß√£o, ms </td><td>  3444.53 </td><td>  2586,23 </td><td>  5548.63 </td></tr><tr><td>  Desserializa√ß√£o, ms </td><td>  852,62 </td><td>  617,65 </td><td>  2006.41 </td></tr><tr><td>  Tamanho, mb </td><td>  36. </td><td>  24 </td><td>  86 </td></tr></tbody></table></div><br><h3>  Json </h3><br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Dados mistos </th><th>  Apenas anseia </th><th>  Apenas strings </th></tr><tr><td>  Serializa√ß√£o, ms </td><td>  5280.67 </td><td>  4358.13 </td><td>  5958.92 </td></tr><tr><td>  Desserializa√ß√£o, ms </td><td>  3347,20 </td><td>  2730.19 </td><td>  4039.24 </td></tr><tr><td>  Tamanho, mb </td><td>  52 </td><td>  36. </td><td>  124 </td></tr></tbody></table></div><br><h3>  Avro </h3><br>  O circuito Avro foi gerado em movimento antes do teste direto.  Para isso, foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">utilizada a</a> biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">avro4s</a> . <br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Dados mistos </th><th>  Apenas anseia </th><th>  Apenas strings </th></tr><tr><td>  Serializa√ß√£o, ms </td><td>  2146.72 </td><td>  1546,95 </td><td>  2829,31 </td></tr><tr><td>  Desserializa√ß√£o, ms </td><td>  692,56 </td><td>  535,96 </td><td>  944,27 </td></tr><tr><td>  Tamanho, mb </td><td>  22 </td><td>  11 </td><td>  73 </td></tr></tbody></table></div><br><h3>  Protobuf </h3><br><div class="spoiler">  <b class="spoiler_title">Esquema Protobuf</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">syntax = "proto3"; package protoBenchmark; option java_package = "protobufBenchmark"; option java_outer_classname = "data"; message MixedData { string f1 = 1; double f2 = 2; sint64 f3 = 3; sint32 f4 = 4; string f5 = 5; double f6 = 6; sint64 f7 = 7; sint32 f8 = 8; sint32 f9 = 9; sint64 f10 = 10; double f11 = 11; double f12 = 12; string f13 = 13; string f14 = 14; sint64 f15 = 15; sint32 f16 = 16; sint32 f17 = 17; string f18 = 18; string f19 = 19; string f20 = 20; } message OnlyStrings { string f1 = 1; string f2 = 2; string f3 = 3; string f4 = 4; string f5 = 5; string f6 = 6; string f7 = 7; string f8 = 8; string f9 = 9; string f10 = 10; string f11 = 11; string f12 = 12; string f13 = 13; string f14 = 14; string f15 = 15; string f16 = 16; string f17 = 17; string f18 = 18; string f19 = 19; string f20 = 20; } message OnlyLongs { sint64 f1 = 1; sint64 f2 = 2; sint64 f3 = 3; sint64 f4 = 4; sint64 f5 = 5; sint64 f6 = 6; sint64 f7 = 7; sint64 f8 = 8; sint64 f9 = 9; sint64 f10 = 10; sint64 f11 = 11; sint64 f12 = 12; sint64 f13 = 13; sint64 f14 = 14; sint64 f15 = 15; sint64 f16 = 16; sint64 f17 = 17; sint64 f18 = 18; sint64 f19 = 19; sint64 f20 = 20; }</code> </pre></div></div><br>  Para gerar classes protobuf3, foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">utilizado</a> o plugin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ScalaPB</a> . <br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Dados mistos </th><th>  Apenas anseia </th><th>  Apenas strings </th></tr><tr><td>  Serializa√ß√£o, ms </td><td>  1169,40 </td><td>  865,06 </td><td>  1856,20 </td></tr><tr><td>  Desserializa√ß√£o, ms </td><td>  113,56 </td><td>  77,38 </td><td>  256,02 </td></tr><tr><td>  Tamanho, mb </td><td>  22 </td><td>  11 </td><td>  73 </td></tr></tbody></table></div><br><h3>  Thrift </h3><br><div class="spoiler">  <b class="spoiler_title">Esquema de economia</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">namespace java thriftBenchmark.java #@namespace scala thriftBenchmark.scala typedef i32 int typedef i64 long struct MixedData { 1:optional string f1, 2:optional double f2, 3:optional long f3, 4:optional int f4, 5:optional string f5, 6:optional double f6, 7:optional long f7, 8:optional int f8, 9:optional int f9, 10:optional long f10, 11:optional double f11, 12:optional double f12, 13:optional string f13, 14:optional string f14, 15:optional long f15, 16:optional int f16, 17:optional int f17, 18:optional string f18, 19:optional string f19, 20:optional string f20, } struct OnlyStrings { 1:optional string f1, 2:optional string f2, 3:optional string f3, 4:optional string f4, 5:optional string f5, 6:optional string f6, 7:optional string f7, 8:optional string f8, 9:optional string f9, 10:optional string f10, 11:optional string f11, 12:optional string f12, 13:optional string f13, 14:optional string f14, 15:optional string f15, 16:optional string f16, 17:optional string f17, 18:optional string f18, 19:optional string f19, 20:optional string f20, } struct OnlyLongs { 1:optional long f1, 2:optional long f2, 3:optional long f3, 4:optional long f4, 5:optional long f5, 6:optional long f6, 7:optional long f7, 8:optional long f8, 9:optional long f9, 10:optional long f10, 11:optional long f11, 12:optional long f12, 13:optional long f13, 14:optional long f14, 15:optional long f15, 16:optional long f16, 17:optional long f17, 18:optional long f18, 19:optional long f19, 20:optional long f20, }</code> </pre></div></div><br>  Para gerar classes de economia semelhantes a scala, foi usado o plug-in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Scrooge</a> . <br><div class="scrollable-table"><table><tbody><tr><th>  Bin√°rio </th><th>  Dados mistos </th><th>  Apenas anseia </th><th>  Apenas strings </th></tr><tr><td>  Serializa√ß√£o, ms </td><td>  1274,69 </td><td>  877,98 </td><td>  2168.27 </td></tr><tr><td>  Desserializa√ß√£o, ms </td><td>  220,58 </td><td>  133,64 </td><td>  514,96 </td></tr><tr><td>  Tamanho, mb </td><td>  37. </td><td>  16 </td><td>  98 </td></tr></tbody></table></div><br><div class="scrollable-table"><table><tbody><tr><th>  Compact </th><th>  Dados mistos </th><th>  Apenas anseia </th><th>  Apenas strings </th></tr><tr><td>  Serializa√ß√£o, ms </td><td>  1294,87 </td><td>  900,02 </td><td>  2199.94 </td></tr><tr><td>  Desserializa√ß√£o, ms </td><td>  240,23 </td><td>  232,53 </td><td>  505,03 </td></tr><tr><td>  Tamanho, mb </td><td>  31 </td><td>  14 </td><td>  98 </td></tr></tbody></table></div><br><h3>  Msgpack </h3><br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Dados mistos </th><th>  Apenas anseia </th><th>  Apenas strings </th></tr><tr><td>  Serializa√ß√£o, ms </td><td>  1142,56 </td><td>  791,55 </td><td>  1974.73 </td></tr><tr><td>  Desserializa√ß√£o, ms </td><td>  289,60 </td><td>  80,36 </td><td>  428,36 </td></tr><tr><td>  Tamanho, mb </td><td>  21 </td><td>  9,6 </td><td>  73 </td></tr></tbody></table></div><br><h3>  Compara√ß√£o final </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/19c/8d6/215/19c8d6215828a408efa4f6a55e875f68.png" alt="serializa√ß√£o"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad9/593/96f/ad959396f0719dc5b9b13a576f7c7e9c.png" alt="desserializa√ß√£o"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/50a/c29/f56/50ac29f5609899325d2054f944ac84a8.png" alt="tamanho"><br><br><div class="spoiler">  <b class="spoiler_title">Precis√£o dos resultados</b> <div class="spoiler_text">  Importante: os resultados da velocidade de serializa√ß√£o e desserializa√ß√£o n√£o s√£o 100% precisos.  H√° um grande erro.  Apesar de os testes terem sido executados muitas vezes com o aquecimento adicional da JVM, √© dif√≠cil chamar os resultados de est√°veis ‚Äã‚Äãe precisos.  √â por isso que eu recomendo n√£o tirar conclus√µes finais sobre um formato de serializa√ß√£o espec√≠fico, com foco nos cronogramas. </div></div><br><br>  Dado o fato de os resultados n√£o serem absolutamente precisos, algumas observa√ß√µes ainda podem ser feitas com base em: <br><br><ol><li>  Mais uma vez, garantimos que a serializa√ß√£o java seja lenta e n√£o a mais econ√¥mica em termos de sa√≠da.  Uma das principais raz√µes para o trabalho lento √© acessar os campos de objetos usando reflex√£o.  A prop√≥sito, os campos s√£o acessados ‚Äã‚Äãe gravados posteriormente, n√£o na ordem em que voc√™ os declarou na classe, mas classificados em ordem lexicogr√°fica.  Este √© apenas um fato interessante; </li><li>  Json √© o √∫nico formato de texto apresentado nesta compara√ß√£o.  Por que os dados serializados no json ocupam muito espa√ßo √© √≥bvio - cada registro √© gravado junto com o circuito.  Isso tamb√©m afeta a velocidade de grava√ß√£o no arquivo: quanto mais bytes voc√™ precisar gravar, mais tempo levar√°.  Al√©m disso, n√£o esque√ßa que um objeto json √© criado para cada registro, o que tamb√©m n√£o reduz o tempo; </li><li>  Ao serializar um objeto, o Avro analisa o circuito para decidir melhor como processar um campo espec√≠fico.  Esses s√£o custos adicionais, levando a um aumento no tempo total de serializa√ß√£o; </li><li>  O Thrift, em compara√ß√£o com, por exemplo, protobuf e msgpack, requer uma quantidade maior de mem√≥ria para gravar um campo, pois suas informa√ß√µes meta s√£o salvas junto com o valor do campo.  Al√©m disso, se voc√™ observar os arquivos de sa√≠da do thrift, poder√° ver que nem uma pequena fra√ß√£o do volume total √© ocupada por v√°rios identificadores do in√≠cio e do fim do registro e o tamanho de todo o registro como separador.  Tudo isso certamente aumenta apenas o tempo gasto na embalagem; </li><li>  O protobuf, como a economia, compacta as informa√ß√µes meta, mas o torna um pouco mais otimizado.  Al√©m disso, a diferen√ßa no algoritmo de empacotar e descompactar permite que esse formato, em alguns casos, funcione mais r√°pido que outros; </li><li>  Msgpack funciona muito r√°pido.  Uma raz√£o para a velocidade √© o fato de que nenhuma meta informa√ß√£o adicional √© serializada.  Isso √© bom e ruim: bom porque ocupa pouco espa√ßo em disco e n√£o requer tempo adicional de grava√ß√£o, ruim porque geralmente n√£o se sabe nada sobre a estrutura de grava√ß√£o, determinando como empacotar e descompactar isso ou aquilo um valor diferente √© executado para cada campo de cada registro. </li></ol><br>  Quanto aos tamanhos dos arquivos de sa√≠da, as observa√ß√µes s√£o bastante inequ√≠vocas: <br><br><ol><li>  O menor arquivo para discagem num√©rica foi obtido no msgpack; </li><li>  O menor arquivo para o conjunto de strings estava no arquivo de origem :) Com exce√ß√£o do arquivo de origem, o avro venceu por uma pequena margem de msgpack e protobuf; </li><li>  O menor arquivo para o conjunto misto veio novamente do msgpack.  No entanto, a diferen√ßa n√£o √© t√£o percept√≠vel e o avro e o protobuf est√£o muito pr√≥ximos; </li><li>  Os maiores arquivos vieram de json.  No entanto, uma observa√ß√£o importante deve ser feita - o formato de texto json e compar√°-lo com o bin√°rio em volume (e em termos de velocidade de serializa√ß√£o) n√£o est√° totalmente correto; </li><li>  O maior arquivo para discagem num√©rica foi obtido da serializa√ß√£o java padr√£o; </li><li>  O maior arquivo para o conjunto de cadeias era o bin√°rio econ√¥mico; </li><li>  O maior arquivo para o conjunto misto era o bin√°rio econ√¥mico.  A seguir, vem a serializa√ß√£o java padr√£o. </li></ol><br><h3>  An√°lise de Formato </h3><br>  Agora, vamos tentar entender os resultados com o exemplo de serializar uma seq√º√™ncia de 36 caracteres (UUID) sem levar em conta os separadores entre registros, v√°rios identificadores do in√≠cio e do final de um registro - apenas registre um campo de string 1, mas levando em considera√ß√£o par√¢metros como, por exemplo, tipo e n√∫mero de campos .  A considera√ß√£o da serializa√ß√£o de strings abrange completamente v√°rios aspectos ao mesmo tempo: <br><br><ol><li>  Serializa√ß√£o de n√∫meros (neste caso, o comprimento da string) </li><li>  Serializa√ß√£o de string </li></ol><br>  Vamos come√ßar com o avro.  Como todos os campos s√£o do tipo `Option ', o esquema para esses campos ser√° o seguinte:` union: [‚Äúnull‚Äù, ‚Äústring‚Äù] `.  Sabendo disso, voc√™ pode obter o seguinte resultado: <br>  1 byte para indicar o tipo de registro (nulo ou string), 1 byte por comprimento de linha (1 byte porque o avro usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">comprimento vari√°vel</a> para escrever n√∫meros inteiros) e 36 bytes por linha.  Total: 38 bytes. <br><br>  Agora considere o msgpack.  Msgpack usa uma abordagem semelhante ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">comprimento vari√°vel</a> para escrever n√∫meros inteiros: <a href="">spec</a> .  Vamos tentar calcular quanto √© realmente necess√°rio para escrever um campo de string: 2 bytes por comprimento de linha (desde que uma string&gt; 31 bytes, ser√£o necess√°rios 2 bytes), 36 bytes por dados.  Total: 38 bytes. <br><br>  O Protobuf tamb√©m usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">comprimento vari√°vel</a> para codificar n√∫meros.  No entanto, al√©m do comprimento da string, o protobuf adiciona outro byte com o n√∫mero e o tipo de campo.  Total: 38 bytes. <br><br>  O <a href="">bin√°rio</a> Thrift n√£o usa nenhuma otimiza√ß√£o para escrever o comprimento da string, mas em vez de 1 byte por n√∫mero e tipo de campo, o thrift leva 3. Portanto, o resultado √© obtido: 1 byte por n√∫mero de campo, 2 bytes por tipo, 4 bytes por comprimento de linha, 36 bytes por string.  Total: 43 bytes. <br><br>  O Thrift <a href="">compact</a> , diferentemente do bin√°rio, usa a abordagem de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">comprimento vari√°vel</a> para escrever n√∫meros inteiros e, se poss√≠vel, usa adicionalmente um registro de cabe√ßalho de campo abreviado.  Com base nisso, obtemos: 1 byte para o tipo e n√∫mero do campo, 1 byte para o comprimento, 36 bytes para os dados.  Total: 38 bytes. <br><br>  A serializa√ß√£o Java levou 45 bytes para escrever uma string, dos quais 36 bytes - uma string, 9 bytes - 2 bytes de comprimento e 7 bytes para algumas informa√ß√µes adicionais, que n√£o pude descriptografar. <br><br>  Apenas avro, msgpack, protobuf e thrift compact s√£o deixados.  Cada um desses formatos exigir√° 38 bytes para escrever utf-8 linhas com 36 caracteres.  Por que, ent√£o, ao compactar registros de 100k strings, o avro obteve uma quantidade menor, embora um esquema n√£o compactado tenha sido escrito junto com os dados?  O Avro possui uma pequena margem de outros formatos e o motivo dessa lacuna √© a falta de 4 bytes adicionais por comprimento de embalagem de todo o registro.  O fato √© que nem o msgpack, nem o protobuf, nem o thrift t√™m um separador de registros especial.  Portanto, para descompactar corretamente os registros, eu precisava saber o tamanho exato de cada registro.  Se n√£o fosse por esse fato, com alta probabilidade, o msgpack teria um arquivo menor. <br><br>  Para um conjunto de dados num√©ricos, o principal motivo pelo qual o msgpack ganhou foi a falta de informa√ß√µes do esquema nos dados compactados e os dados eram escassos.  O Thrift e o protobuf levam at√© mais de 1 byte para valores vazios devido √† necessidade de compactar informa√ß√µes sobre o tipo e o n√∫mero do campo.  O Avro e o msgpack requerem exatamente 1 byte para escrever um valor vazio, mas o avro, como j√° mencionado, salva o circuito com os dados. <br><br>  Msgpack tamb√©m empacotou em um arquivo menor e em um conjunto misto, que tamb√©m era escasso.  As raz√µes para isso s√£o os mesmos fatores. <br><br>  Portanto, os dados compactados no msgpack ocupam menos espa√ßo.  Esta √© uma afirma√ß√£o justa - n√£o foi √† toa que o msgpack foi escolhido como o formato de armazenamento de dados para tarantool e aerospike. <br><br><h2>  Conclus√£o </h2><br>  Ap√≥s o teste, posso tirar as seguintes conclus√µes: <br><br><ol><li>  √â dif√≠cil obter resultados de benchmark est√°veis; </li><li>  Escolher um formato √© uma troca entre velocidade de serializa√ß√£o e tamanho da sa√≠da.  Ao mesmo tempo, n√£o se esque√ßa de par√¢metros t√£o importantes quanto a conveni√™ncia de usar o formato e a possibilidade de evolu√ß√£o do esquema (geralmente esses par√¢metros desempenham um papel dominante). </li></ol><br>  O c√≥digo fonte pode ser encontrado aqui: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458026/">https://habr.com/ru/post/pt458026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458010/index.html">As aventuras dos indescrit√≠veis Malvari, parte II: scripts secretos do VBA</a></li>
<li><a href="../pt458014/index.html">Rob√¥ FEDOR - treinando com a nova equipe da ISS e as primeiras tarefas espaciais</a></li>
<li><a href="../pt458018/index.html">compositor vs npm: desenvolvimento de m√∫ltiplos m√≥dulos</a></li>
<li><a href="../pt458020/index.html">Resumo dos eventos de TI de julho</a></li>
<li><a href="../pt458022/index.html">Impress√£o digital atrav√©s de banners? Agora isso √© comum</a></li>
<li><a href="../pt458030/index.html">JavaScript funcional: cinco maneiras de encontrar a m√©dia aritm√©tica dos elementos da matriz e o m√©todo .reduce ()</a></li>
<li><a href="../pt458040/index.html">De Moscou para Tomsk. A hist√≥ria de um movimento</a></li>
<li><a href="../pt458042/index.html">Como organizei o treinamento de aprendizado de m√°quina na NSU</a></li>
<li><a href="../pt458044/index.html">Seguran√ßa provincial da informa√ß√£o - estagna√ß√£o ou desenvolvimento?</a></li>
<li><a href="../pt458046/index.html">Folha de dicas de Gradle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>