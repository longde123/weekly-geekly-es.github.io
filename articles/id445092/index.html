<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜🏼 💌 🛄 HATEOAS Masalah Tautan Dalam 👩‍👩‍👦 🤹🏼 ☺️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tautan eksternal (deep linking) - di Internet, ini adalah penempatan hyperlink di situs yang menunjuk ke halaman di situs web lain, alih-alih menunjuk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HATEOAS Masalah Tautan Dalam</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445092/"><blockquote>  Tautan eksternal (deep linking) - di Internet, ini adalah penempatan hyperlink di situs yang menunjuk ke halaman di situs web lain, alih-alih menunjuk ke halaman home (home, start) dari situs itu.  Tautan semacam itu disebut tautan eksternal (tautan dalam). <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wikipedia</a> </blockquote>  Istilah <b>"tautan dalam"</b> akan digunakan lebih lanjut sebagai yang terdekat dengan "tautan dalam" dalam bahasa Inggris.  Artikel ini akan fokus pada REST API, jadi tautan yang dalam berarti tautan ke sumber daya HTTP.  Sebagai contoh, tautan mendalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/en/post/426691</a> menunjuk ke artikel tertentu di habr.com. <br><br>  <b>HATEOAS</b> adalah komponen arsitektur REST yang memungkinkan menyediakan informasi kepada klien API melalui hypermedia.  Klien tahu satu-satunya alamat tetap, titik masuk API;  ia mempelajari semua tindakan yang mungkin dari sumber daya yang diterima dari server.  Tampilan sumber daya berisi tautan ke tindakan atau sumber daya lainnya;  klien berinteraksi dengan API, secara dinamis memilih tindakan dari tautan yang tersedia.  Anda dapat membaca lebih lanjut tentang HATEOAS di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wikipedia</a> atau di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> hebat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> tentang Habré. <br><br>  HATEOAS adalah level berikutnya dari REST API.  Berkat penggunaan hypermedia, ia menjawab banyak pertanyaan yang muncul selama pengembangan API: cara mengontrol akses ke tindakan di sisi server, cara menyingkirkan konektivitas yang ketat antara klien dan server, cara mengubah alamat sumber daya jika perlu.  Tapi itu tidak memberikan jawaban atas pertanyaan tentang bagaimana seharusnya tautan mendalam ke sumber daya. <br><a name="habracut"></a><br>  Dalam implementasi REST "klasik", klien mengetahui struktur alamat, ia tahu cara mendapatkan sumber daya dengan pengidentifikasi di REST API.  Misalnya, pengguna mengikuti tautan dalam ke halaman buku di toko online.  Bilah URL <code>https://domain.test/books/1</code> ditampilkan di bilah alamat peramban.  Klien tahu bahwa "1" adalah pengidentifikasi sumber daya buku, dan untuk mendapatkannya Anda harus mengganti pengenal ini di URL API REST <code>https://api.domain.test/api/books/{id}</code> .  Dengan demikian, tautan yang dalam ke sumber daya buku ini di REST API terlihat seperti ini: <code>https://api.domain.test/api/books/1</code> . <br><br>  Di HATEOAS, klien tidak tahu tentang pengidentifikasi sumber daya atau struktur alamat.  Dia tidak melakukan hardcode, tetapi tautan "menemukan".  Selain itu, struktur URL dapat berubah tanpa sepengetahuan klien, HATEOAS memungkinkannya.  Karena perbedaan ini, tautan dalam tidak dapat diimplementasikan dengan cara yang sama dengan API REST klasik.  Anehnya, pencarian di Internet untuk resep untuk menerapkan tautan semacam itu di HATEOAS tidak menghasilkan banyak hasil, hanya beberapa pertanyaan membingungkan tentang Stackoverflow.  Karena itu, kami akan mempertimbangkan beberapa opsi yang mungkin dan mencoba untuk memilih yang terbaik. <br><br>  Opsi nol di luar kompetisi bukanlah untuk menerapkan tautan dalam.  Ini mungkin cocok untuk beberapa admin atau aplikasi seluler yang tidak memerlukan kemampuan untuk langsung beralih ke sumber daya internal.  Ini sepenuhnya dalam semangat HATEOAS, pengguna dapat membuka halaman hanya secara berurutan, mulai dari titik masuk, karena klien tidak tahu cara menuju ke sumber daya internal secara langsung.  Tetapi opsi ini tidak cocok untuk aplikasi web - kami berharap bahwa tautan ke halaman internal dapat di-bookmark, dan memperbarui halaman tidak akan memindahkan kami kembali ke halaman utama situs. <br><br>  Jadi, opsi pertama: hardcode URL HATEOAS API.  Klien tahu struktur alamat sumber daya yang memerlukan tautan dalam, dan tahu cara mendapatkan pengidentifikasi sumber daya untuk pencarian.  Misalnya, server mengembalikan alamat <code>https://api.domain.test/api/books/1</code> sebagai referensi ke sumber daya buku.  Klien tahu bahwa "1" adalah pengidentifikasi buku dan dapat menghasilkan URL ini sendiri ketika mengklik tautan yang dalam.  Ini tentu saja merupakan opsi yang berfungsi, tetapi melanggar prinsip-prinsip HATEOAS.  Struktur alamat dan pengidentifikasi sumber daya tidak lagi dapat diubah, jika tidak klien akan putus, ada koneksi yang kaku.  Ini bukan HATEOAS, yang artinya opsi tidak cocok untuk kita. <br><br>  Opsi kedua adalah mengganti URL API REST di URL klien.  Untuk contoh dengan buku, tautan dalam akan terlihat seperti ini: <code>https://domain.test/books?url=https://api.domain.test/api/books/1</code> .  Di sini, klien mengambil tautan sumber daya yang diterima dari server dan menggantinya sepenuhnya di alamat halaman.  Ini lebih seperti HATEOAS, klien tidak tahu tentang pengidentifikasi dan struktur alamat, ia menerima tautan dan menggunakannya sebagaimana adanya.  Saat mengklik tautan mendalam seperti itu, klien akan menerima sumber daya yang diinginkan melalui tautan REST API dari parameter url.  Tampaknya solusinya bekerja, dan cukup dalam semangat HATEOAS.  Tetapi jika Anda menambahkan tautan seperti itu ke bookmark Anda, di masa mendatang kami tidak akan lagi dapat mengubah alamat sumber daya di API (atau kami akan selalu harus mengarahkan ulang ke alamat baru).  Sekali lagi, salah satu kelebihan HATEOAS hilang, opsi ini juga tidak ideal. <br><br>  Jadi, kami ingin memiliki permalink, yang, bagaimanapun, dapat berubah.  Solusi semacam itu ada dan banyak digunakan di Internet - banyak situs menyediakan tautan pendek ke halaman internal yang dapat dibagikan.  Selain singkatnya, keuntungan mereka adalah bahwa situs dapat mengubah alamat halaman yang sebenarnya, tetapi tautan tersebut tidak akan putus.  Sebagai contoh, Microsoft menggunakan tautan Windows untuk membantu halaman dalam bentuk <code>http://go.microsoft.com/fwlink/?LinkId=XXX</code> .  Selama bertahun-tahun, situs Microsoft telah dirancang ulang beberapa kali, tetapi tautan dalam versi Windows yang lebih lama terus berfungsi. <br><br>  Tetap hanya mengadaptasi solusi ini ke HATEOAS.  Dan ini adalah opsi ketiga - menggunakan pengidentifikasi tautan dalam unik di REST API.  Sekarang alamat halaman buku akan terlihat seperti ini: <code>https://domain.test/books?deepLinkId=3f0fd552-e564-42ed-86b6-a8e3055e2763</code> .  Ketika mengklik tautan yang begitu dalam, klien harus bertanya kepada server: tautan sumber apa yang sesuai dengan pengenal <code>deepLinkId</code> ?  Server akan mengembalikan tautan <code>https://api.domain.test/api/books/1</code> (baik, atau segera sumber daya, agar tidak pergi dua kali).  Jika alamat sumber daya di REST API berubah, server hanya akan mengembalikan tautan lain.  Catatan disimpan dalam database yang pengidentifikasi referensi 3f0fd552-e564-42ed-86b6-a8e3055e2763 sesuai dengan pengidentifikasi entitas buku 1. <br><br>  Untuk ini, sumber daya harus mengandung bidang <code>deepLinkId</code> dengan pengidentifikasi tautan dalam mereka, dan klien harus menggantinya di alamat halaman.  Alamat ini dapat ditandai dengan aman dan dikirim ke teman-teman.  Tidak terlalu baik bahwa klien bekerja secara independen dengan pengidentifikasi tertentu, tetapi ini memungkinkan Anda untuk mempertahankan keuntungan HATEOAS untuk API secara keseluruhan. <br><br><h1>  Contoh </h1><br>  Artikel ini tidak akan lengkap tanpa contoh implementasi.  Untuk menguji konsep, pertimbangkan contoh situs katalog toko online hipotetis dengan backend pada Spring Boot / Kotlin dan frontend SPA pada Vue / JavaScript.  Toko menjual buku dan pensil, situs ini memiliki dua bagian di mana Anda dapat melihat daftar produk dan membuka halaman mereka. <br><br>  Bagian "Buku": <br><br><img src="https://habrastorage.org/webt/ly/nz/v6/lynzv689wey61onndh2dazh9_og.png"><br><br>  Satu halaman buku: <br><br><img src="https://habrastorage.org/webt/th/vh/we/thvhwevb1jq9zrbpht5acjbxg_u.png"><br><br>  Untuk penyimpanan barang, entitas Spring Data JPA didefinisikan: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityType</span></span></span><span class="hljs-class"> </span></span>{ PEN, BOOK } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pen</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> color: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.PEN, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.BOOK, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeepLink</span></span></span></span>( <span class="hljs-meta"><span class="hljs-meta">@Enumerated(EnumType.STRING)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityType: EntityType, <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityId: UUID ) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() }</code> </pre><br>  Untuk membuat dan menyimpan <code>DeepLink</code> tautan dalam, entitas <code>DeepLink</code> , sebuah instance yang dibuat dengan setiap objek domain.  Pengidentifikasi itu sendiri dihasilkan sesuai dengan standar UUID pada saat entitas dibuat.  Tabelnya berisi pengidentifikasi tautan dalam, pengidentifikasi, dan jenis entitas yang digunakan tautan itu. <br><br>  API REST server diatur sesuai dengan konsep HATEOAS, titik masuk API berisi tautan ke koleksi produk, serta tautan <code>#deepLink</code> untuk membentuk tautan dalam dengan mengganti pengidentifikasi: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api { <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"pens"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/pens"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"books"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"deepLink"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/links/{id}"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"templated"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } }</code> </pre><br>  Klien, ketika membuka bagian "Buku", meminta koleksi sumber daya di tautan <code>#books</code> di titik masuk: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api/books ... { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Harry Potter"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"4bda3c65-e5f7-4e9b-a8ec-42d16488276f"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/1272e287-07a5-4ebc-9170-2588b9cf4e20"</span></span> } } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cryptonomicon"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"a23d92c2-0b7f-48d5-88bc-18f45df02345"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/5d04a6d0-5bbc-463e-a951-a9ff8405cc70"</span></span> } } } ...</code> </pre><br>  SPA menggunakan Vue Router, yang lintasan ke halaman buku didefinisikan <code>{ path: '/books/:deepLinkId', name: 'book', component: Book, props: true }</code> , dan tautan dalam daftar buku terlihat seperti ini: <code>&lt;router-link :to="{name: 'book', params: {link: book._links.self.href, deepLinkId: book.deepLinkId}}"&gt;{{ book.name }}&lt;/router-link&gt;</code> . <br><br>  Yaitu, ketika Anda membuka halaman buku tertentu, komponen <code>Book</code> dipanggil, yang menerima dua parameter: <code>link</code> (tautan ke sumber daya buku di REST API, nilai bidang <code>href</code> dari tautan <code>#self</code> ) dan <code>deepLinkId</code> dari sumber daya itu. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Book = { <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">`&lt;div&gt;{{ 'Book: ' + book.name }}&lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">deepLinkId</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">book</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } }, mounted() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-string"><span class="hljs-string">'/api/links/'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.deepLinkId : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link; fetch(url).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json().then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.book = json }) }) } }</code> </pre><br>  Vue Router menetapkan nilai <code>deepLinkId</code> ke alamat halaman <code>/books/:deepLinkId</code> , dan komponen meminta sumber daya dengan tautan langsung dari properti <code>link</code> .  Saat memaksa refresh halaman, Vue Router menetapkan properti komponen <code>deepLinkId</code> , mendapatkannya dari alamat halaman.  Properti <code>link</code> tetap <code>null</code> .  Komponen memeriksa: jika ada tautan langsung yang diperoleh dari koleksi, sumber daya diminta di dalamnya.  Jika hanya pengidentifikasi <code>deepLinkId</code> yang <code>deepLinkId</code> , ia diganti ke tautan <code>#deepLink</code> dari titik masuk untuk menerima sumber daya melalui tautan dalam. <br><br>  Di backend, metode pengontrol untuk tautan dalam terlihat seperti ini: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/links/{id}"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deepLink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@PathVariable</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">UUID</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, response: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HttpServletResponse</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: ResponseEntity&lt;Any&gt; { id!!; response!! <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink = deepLinkRepo.getOne(id) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> path: String = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (deepLink.entityType) { EntityType.PEN -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getPen</span></span></span></span>(deepLink.entityId)) EntityType.BOOK -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getBook</span></span></span></span>(deepLink.entityId)) }.toUri().path response.sendRedirect(path) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ResponseEntity.notFound().build() }</code> </pre><br>  Dengan pengidentifikasi adalah esensi dari tautan yang dalam.  Bergantung pada jenis entitas aplikasi, tautan dibentuk ke metode pengontrol, yang mengembalikan sumber dayanya oleh <code>entityId</code> .  Permintaan diarahkan ke alamat ini.  Dengan demikian, jika di masa depan tautan ke pengontrol entitas berubah, akan sangat mungkin untuk mengubah logika pembentukan tautan dalam metode <code>deepLink</code> . <br><br>  Kode sumber lengkap untuk contoh tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id445092/">https://habr.com/ru/post/id445092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id445082/index.html">Bulan lalu kami menyebut Zuckerberg payudara; dikoreksi: pada kenyataannya, ia dan Facebook-nya hanya memalukan</a></li>
<li><a href="../id445084/index.html">Siapa yang ada di pasar Smart Homes?</a></li>
<li><a href="../id445086/index.html">Misi Lunar "Bereshit" - video pertama dari kamera onboard dan foto baru di luar angkasa</a></li>
<li><a href="../id445088/index.html">Apakah petualangan dalam hidup Anda lebih menarik daripada di game komputer?</a></li>
<li><a href="../id445090/index.html">Akankah YouTube tetap seperti yang kita ketahui?</a></li>
<li><a href="../id445094/index.html">Akses terpusat ke tanda tangan digital dan kunci perlindungan elektronik lainnya menggunakan perangkat keras USB melalui IP</a></li>
<li><a href="../id445098/index.html">DynamicData: Mengubah koleksi, pola desain MVVM, dan ekstensi reaktif</a></li>
<li><a href="../id445100/index.html">Anycubic: Foton S, 4Max Pro, dan penggantian nama besar</a></li>
<li><a href="../id445102/index.html">Flash-animasi di Unity3D dari awal. Bagian satu, liris</a></li>
<li><a href="../id445104/index.html">Sejarah singkat merek audio Klipsch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>