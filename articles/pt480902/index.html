<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶é üëâüèø ‚õ∞Ô∏è Novos recursos de monitoramento do PostgesSQL PostgreSQL üë©üèΩ‚Äçüåæ üåè üèïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Boa tarde, leitores habr! 


 Na primeira observa√ß√£o sobre posgres_exporter , examinei um caso bastante especial ao trabalhar com um novo fitcha da √©p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Novos recursos de monitoramento do PostgesSQL PostgreSQL</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480902/"><p>  Boa tarde, leitores habr! </p><br><p> Na primeira <a href="https://habr.com/ru/post/468573/">observa√ß√£o sobre posgres_exporter</a> , examinei um caso bastante especial ao trabalhar com um novo fitcha da √©poca, a saber, a capacidade de monitorar um conjunto de inst√¢ncias e / ou bancos de dados por um exportador.  E ele descreveu esse "buqu√™" de problemas que encontrou e que solu√ß√µes alternativas ele usou para faz√™-lo funcionar. <br>  E assim, em 25 de novembro, o pr√≥ximo postgres_exporter 0.8.0 foi lan√ßado.  Ele resolveu os problemas descritos no artigo anterior e tamb√©m, o que √© especialmente interessante, adicionou novas funcionalidades. </p><br><p>  Eu pe√ßo um gato ... </p><a name="habracut"></a><br><p>  Para come√ßar, gostaria de apresentar a postgre_exporter em mais detalhes e escrever uma esp√©cie de guia de in√≠cio r√°pido.  Vamos examinar os principais pontos: </p><br><ol><li>  Vari√°veis ‚Äã‚Äãde ambiente e par√¢metros de inicializa√ß√£o </li><li>  O que s√£o m√©tricas padr√£o? </li><li>  Como adicionar suas pr√≥prias m√©tricas </li></ol><br><h2 id="opisanie">  Descri√ß√£o do produto </h2><br><p>  <a href="https://github.com/wrouesnel/postgres_exporter" rel="nofollow">postgres_exporter</a> - um utilit√°rio para coletar m√©tricas de inst√¢ncias de um cluster PostgreSQL DBMS em um formato acess√≠vel Prometheus, escrito em Go, √© de c√≥digo aberto e distribu√≠do gratuitamente. </p><br><h2 id="peremennye-okruzheniya-i-argumenty-komandnoy-stroki">  Vari√°veis ‚Äã‚Äãde ambiente e argumentos de linha de comando </h2><br><p>  O Postgres_exporter, como tal, n√£o possui um arquivo de configura√ß√£o e todos os par√¢metros s√£o transmitidos ao exportador por meio de vari√°veis ‚Äã‚Äãde ambiente ou argumentos de linha de comando.  Ao mesmo tempo, os par√¢metros para conectar-se ao DBMS podem ser transferidos apenas atrav√©s de vari√°veis ‚Äã‚Äãde ambiente. </p><br><h3 id="peremennye-okruzheniya">  Vari√°veis ‚Äã‚Äãde ambiente </h3><br><p>  Como mencionado acima, as vari√°veis ‚Äã‚Äãde ambiente podem ser divididas em dois grupos.  Os primeiros passam a cadeia de conex√£o, os segundos duplicam os argumentos da linha de comando. </p><br><p> Vamos come√ßar com o primeiro grupo.  Essas vari√°veis ‚Äã‚Äãcome√ßam com o prefixo <code>DATA_SOURCE_</code> : </p><br><ul><li><p>  DATA_SOURCE_NAME - usado por padr√£o.  Permite gravar a cadeia de conex√£o no formato <code>=</code> e na forma de um URI e pode conter o logon e a senha da conex√£o. <br>  Op√ß√µes de trabalho v√°lidas para conectar-se ao PostgreSQL: </p><br><ul><li>  <code>postgresql://rolename@dbhost:dbport/datname?sslmode=disable</code> ; </li><li>  <code>postgresql://rolename:rolpass@dbhost:dbport?sslmode=disable&amp;db=datname</code> ; </li><li>  <code>postgresql://rolename:rolpass@?sslmode=disable&amp;dbname=database&amp;host=dbhost&amp;port=dbport</code> ; </li><li>  <code>postgresql://rolename:rolpass@?sslmode=disable&amp;dbname=database&amp;host=/tmp</code> (conex√£o atrav√©s de um soquete UNIX, extra√≠do dos diret√≥rios unix_socket_ de uma inst√¢ncia do PostgreSQL); </li><li>  <code>host=dbhost port=dbport dbname=database user=rolename sslmode=disable</code> ; </li></ul><br><p>  Se voc√™ precisar se conectar a v√°rias inst√¢ncias (n√£o √© permitido usar um espa√ßo ap√≥s o ponto decimal): </p><br><ul><li>  <code>postgresql://rolename@dbhost:dbport/datname?sslmode=disable,postgresql://rolename@dbhost:dbport/datname?sslmode=disable</code> ; </li><li>  <code>sslmode=disable dbname=postgres host=127.0.0.1 port=5434 user=postgres,sslmode=disable dbname=postgres port=5432 user=postgres</code> . </li></ul><br></li><li>  DATA_SOURCE_URI - Alterne para DATA_SOURCE_NAME.  Esta op√ß√£o √© adequada apenas se voc√™ deseja se conectar a uma √∫nica inst√¢ncia do PostgreSQL). <br>  A vari√°vel DATA_SOURCE_URI define a parte do URI sem um nome de usu√°rio e senha, no formato "dbhost: dbport / dbname? Dbname? Key = value".  O nome de usu√°rio e a senha s√£o obtidos das vari√°veis ‚Äã‚Äãde ambiente DATA_SOURCE_USER e DATA_SOURCE_PASS ou dos arquivos DATA_SOURCE_USER_FILE DATA_SOURCE_PASS_FILE. <br>  Quando o nome de usu√°rio e a senha s√£o armazenados em arquivos, seu conte√∫do √© extra√≠do e reatribu√≠do √†s vari√°veis ‚Äã‚ÄãDATA_SOURCE_USER e DATA_SOURCE_PASS.  Al√©m disso, no c√≥digo, tudo isso √© coletado em um URI completo do formul√°rio: <code>"postgresql://" + DATA_SOURCE_USER + ":" + DATA_SOURCE_PASS + "@" + DATA_SOURCE_URI</code> </li><li>  DATA_SOURCE_URI_FILE - o mesmo que DATA_SOURCE_URI, somente leitura do arquivo; </li><li>  DATA_SOURCE_USER - ao usar DATA_SOURCE_URI, define o nome de usu√°rio para conectar-se ao DBMS; </li><li>  DATA_SOURCE_USER_FILE - o mesmo que DATA_SOURCE_USER, somente leitura do arquivo; </li><li>  DATA_SOURCE_PASS - ao usar DATA_SOURCE_URI, define a senha do usu√°rio para conectar-se ao DBMS; </li><li>  DATA_SOURCE_PASS_FILE - o mesmo que DATA_SOURCE_PASS, somente leitura do arquivo; </li></ul><br><p>  O segundo grupo inclui argumentos duplicados vari√°veis.  I.e.  na inicializa√ß√£o, voc√™ pode escolher, definir os par√¢metros operacionais do aplicativo na forma de vari√°veis ‚Äã‚Äãde ambiente ou passar como argumentos na inicializa√ß√£o.  Comece com o prefixo <code>PG_EXPORTER_</code> : </p><br><ul><li>  PG_EXPORTER_WEB_LISTEN_ADDRESS - define o endere√ßo e a porta atrav√©s da qual o exportador receber√° solicita√ß√µes do Prometheus.  Por padr√£o <code>:9187</code> ; </li><li>  PG_EXPORTER_WEB_TELEMETRY_PATH - o caminho ao longo do qual as m√©tricas s√£o fornecidas.  Por padr√£o <code>/metrics</code> ; </li><li>  PG_EXPORTER_DISABLE_DEFAULT_METRICS - desativa a cole√ß√£o de m√©tricas por padr√£o.  O fato de que essas m√©tricas estar√£o abaixo.  Somente true ou false aceita valores.  Falso por padr√£o (a coleta de m√©tricas √© permitida); </li><li>  PG_EXPORTER_DISABLE_SETTINGS_METRICS - desativa a cole√ß√£o de m√©tricas da visualiza√ß√£o pg_settings.  O fato de que essas m√©tricas estar√£o abaixo.  Somente true ou false aceita valores.  Falso por padr√£o (a coleta de m√©tricas √© permitida); </li><li>  PG_EXPORTER_AUTO_DISCOVER_DATABASES - detecta todos os bancos de dados de uma inst√¢ncia de cluster para coletar suas m√©tricas.  Somente true ou false aceita valores.  Por padr√£o, false (as m√©tricas s√£o coletadas apenas no banco de dados especificado nos par√¢metros de conex√£o); </li><li>  PG_EXPORTER_EXCLUDE_DATABASES - exclui o banco de dados da lista de bancos de dados cujas m√©tricas s√£o coletadas se <code>PG_EXPORTER_AUTO_DISCOVER_DATABASES=true</code> .  Representa uma lista separada por v√≠rgula de nomes de banco de dados.  O padr√£o √© uma sequ√™ncia vazia.  <strong>IMPORTANTE</strong> : <br><ul><li>  templates template0 e template1 - n√£o √© necess√°rio excluir, portanto eles s√£o cortados no est√°gio de obten√ß√£o de uma lista de bancos de dados a partir de pg_databases; </li><li>  n√£o pode excluir o banco de dados especificado no URI. </li></ul></li><li>  PG_EXPORTER_EXTEND_QUERY_PATH - O caminho para o arquivo YAML que cont√©m consultas do usu√°rio.  O arquivo queries.yaml cont√©m exemplos; </li><li>  PG_EXPORTER_CONSTANT_LABELS - etiqueta (constante) adicionada a todas as m√©tricas.  Est√° escrito como uma lista de pares <code>=</code> , separados por v√≠rgula. </li></ul><br><h3 id="argumenty-komandnoy-stroki">  Argumentos da linha de comando </h3><br><ul><li>  O endere√ßo web.listen √© o mesmo que PG_EXPORTER_WEB_LISTEN_ADDRESS; </li><li>  web.telemetry-path - o mesmo que PG_EXPORTER_WEB_TELEMETRY_PATH; </li><li>  desativar m√©tricas padr√£o √© o mesmo que PG_EXPORTER_DISABLE_DEFAULT_METRICS; </li><li>  desativar-configura√ß√µes-m√©tricas √© o mesmo que PG_EXPORTER_DISABLE_SETTINGS_METRICS; </li><li>  os bancos de dados de descoberta autom√°tica s√£o os mesmos que PG_EXPORTER_AUTO_DISCOVER_DATABASES; </li><li>  exclude-database √© o mesmo que PG_EXPORTER_EXCLUDE_DATABASES; </li><li>  extend.query-path - o mesmo que PG_EXPORTER_EXTEND_QUERY_PATH; </li><li>  constantLabels - o mesmo que PG_EXPORTER_CONSTANT_LABELS; </li><li>  dumpmaps - exibe o conte√∫do interno do mapa de m√©tricas.  Usado para depurar solicita√ß√µes de usu√°rio.  N√£o inicia o aplicativo; </li><li>  log.level - define um dos n√≠veis de log poss√≠veis: <code>debug</code> , <code>info</code> , <code>warn</code> , <code>error</code> <code>fatal</code> ; </li><li>  log.format - define o m√©todo e o formato da sa√≠da do log.  Por exemplo: <code>logger:syslog?appname=bob&amp;local=7</code> ou <code>logger:stdout?json=true</code> .  Por padr√£o, <code>logger:stderr</code> . </li></ul><br><h2 id="metriki-po-umolchaniyu">  M√©tricas padr√£o </h2><br><p>  <code> -</code> m√©tricas <code> -</code> s√£o um determinado conjunto de m√©tricas de monitoramento, cuja cole√ß√£o √© estabelecida diretamente no c√≥digo.  A cole√ß√£o <code> -</code> pode ser desativada especificando os par√¢metros da linha de comandos --disable-default-metrics e / ou --disable-settings-metrics ou definindo as vari√°veis ‚Äã‚Äãde ambiente apropriadas. <br>  Observo que, na vers√£o atual, o problema do uso de m√©tricas foi resolvido quando a descoberta autom√°tica foi ativada, devido √† duplica√ß√£o de m√©tricas, que levou a erros. </p><br><p>  Por padr√£o, as m√©tricas das seguintes visualiza√ß√µes s√£o enviadas para o monitoramento: </p><br><ul><li>  pg_stat_bgwriter; </li><li>  pg_stat_database; </li><li>  pg_stat_database_conflicts; </li><li>  pg_locks; </li><li>  pg_stat_replication; </li><li>  pg_stat_activity; </li><li>  pg_settings. </li></ul><br><p>  Pelo que voc√™ deve prestar aten√ß√£o, s√£o pg_stat_replication e pg_stat_activity, pois o conjunto de campos retornados depende da vers√£o do PostgreSQL.  Para isso, a vers√£o do DBMS √© verificada no exportador e a solicita√ß√£o correspondente √© selecionada.  Voc√™ n√£o pode especificar uma vers√£o nas consultas do usu√°rio.  Sup√µe-se que o administrador saiba antecipadamente qual vers√£o a inst√¢ncia ser√° monitorada.  Tamb√©m podem surgir problemas se voc√™ tentar coletar m√©tricas de um exportador a partir de inst√¢ncias de vers√µes diferentes. <br>  Com as m√©tricas de configura√ß√£o da inst√¢ncia (pg_settings), tudo √© um pouco mais simples, elas s√£o formadas pela solicita√ß√£o: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, setting, <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(unit, <span class="hljs-string"><span class="hljs-string">''</span></span>), short_desc, vartype <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_settings <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> vartype <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-string"><span class="hljs-string">'bool'</span></span>, <span class="hljs-string"><span class="hljs-string">'integer'</span></span>, <span class="hljs-string"><span class="hljs-string">'real'</span></span>);</code> </pre> <br><p>  Assim, por padr√£o, um conjunto de m√©tricas √© formado apenas a partir de valores num√©ricos. </p><br><p>  Al√©m disso, consideraremos a conclus√£o do exportador, incluindo como entenderemos por que as m√©tricas codificadas t√™m seu direito de existir.  Por exemplo, tome duas m√©tricas: shared_buffers e wal_sender_timeout.  Na sa√≠da do exportador, para cada m√©trica, temos tr√™s linhas. <br>  A primeira linha - representa a dica e consiste no nome da m√©trica em postgres_exporter, uma descri√ß√£o (a coluna short_desc da visualiza√ß√£o pg_settings) e se o tipo foi convertido para o tipo base, √© indicado qual (o valor entre colchetes). <br>  A segunda linha indica o tipo de valor, em termos de Prometeu.  E a terceira linha, uma m√©trica com um conjunto de r√≥tulos e um valor atribu√≠do. </p><br><p>  Retorne valores para shared_buffers. </p><br><pre> <code class="plaintext hljs"># HELP pg_settings_shared_buffers_bytes Sets the number of shared memory buffers used by the server. [Units converted to bytes.] # TYPE pg_settings_shared_buffers_bytes gauge pg_settings_shared_buffers_bytes{server="127.0.0.1:5432"} 1.34217728e+08</code> </pre> <br><p>  <code>pg_settings_shared_buffers_bytes</code> - o nome da m√©trica.  De acordo com as regras de boa forma, √© composto pelo nome da tabela, o nome da m√©trica e a unidade de medida.  Em seguida, vem uma breve descri√ß√£o da tabela pg_settings.  E, finalmente, uma indica√ß√£o de que o valor da m√©trica foi convertido em uma unidade de bytes (unidades convertidas em bytes).  Por que vale a pena prestar aten√ß√£o a este √∫ltimo, porque diretamente no banco de dados o valor parece um pouco diferente, a saber: </p><br><pre> <code class="sql hljs"> name | setting | unit | short_desc <span class="hljs-comment"><span class="hljs-comment">----------------+---------+------+-------------------------------------------------------------- shared_buffers | 16384 | 8kB | Sets the number of shared memory buffers used by the server.</span></span></code> </pre> <br><p>  O tipo de m√©trica que temos √© GAUGE, o que significa que ela pode assumir valores arbitr√°rios ao longo do tempo.  No nosso caso, o n√∫mero de buffers, quando ajustado, pode mudar nas duas dire√ß√µes. <br>  Voc√™ pode aprender mais sobre os tipos de m√©tricas e suas diferen√ßas na documenta√ß√£o do Prometheus. </p><br><p>  A seguinte m√©trica √© wal_sender_timeout.  Os campos de informa√ß√µes s√£o coletados de acordo com o mesmo princ√≠pio descrito acima.  Somente nesse caso, o valor da m√©trica √© convertido em segundos e o banco de dados √© armazenado em milissegundos.  Com esse recurso, voc√™ precisa ter cuidado e considerar ao plotar gr√°ficos. </p><br><pre> <code class="plaintext hljs"># HELP pg_settings_wal_sender_timeout_seconds Sets the maximum time to wait for WAL replication. [Units converted to seconds.] # TYPE pg_settings_wal_sender_timeout_seconds gauge pg_settings_wal_sender_timeout_seconds{server="127.0.0.1:5432"} 60</code> </pre> <br><p>  O valor armazenado no banco de dados: </p><br><pre> <code class="sql hljs">demo=<span class="hljs-comment"><span class="hljs-comment"># SELECT name, setting, COALESCE(unit, ''), short_desc, vartype FROM pg_settings WHERE name='wal_sender_timeout'; name | setting | coalesce | short_desc | vartype --------------------+---------+----------+----------------------------------------------------+--------- wal_sender_timeout | 60000 | ms | Sets the maximum time to wait for WAL replication. | integer</span></span></code> </pre><br><p>  Todos os valores com unidades s√£o reduzidos para dois tipos: m√©tricas de volume em bytes;  m√©tricas de tempo para segundos. </p><br><h3 id="polzovatelskiy-nabor-metrik">  Conjunto de m√©tricas personalizadas </h3><br><p>  Al√©m das m√©tricas padr√£o ou no lugar delas, voc√™ pode usar as suas.  Para fazer isso, basta definir o caminho do arquivo, com consultas do usu√°rio, atrav√©s do argumento --extend.query-path = query.yaml ou atrav√©s da vari√°vel de ambiente PG_EXPORTER_EXTEND_QUERY_PATH. <br>  O reposit√≥rio do projeto possui um arquivo YAML com exemplos: <a href="" rel="nofollow">queries.yaml</a> </p><br><p>  Observo que, em compara√ß√£o com a vers√£o anterior, na 0.8.0, novas chaves master e cache_seconds foram adicionadas.  No exemplo abaixo, analisamos o formato de grava√ß√£o e a finalidade dos campos. </p><br><p>  Conte√∫do de amostra do arquivo queries.yaml </p><br><pre> <code class="plaintext hljs">pg_database: query: "SELECT pg_database.datname, pg_database_size(pg_database.datname) as size_bytes FROM pg_database" master: true cache_seconds: 30 metrics: - datname: usage: "LABEL" description: "Name of the database" - size_bytes: usage: "GAUGE" description: "Disk space used by the database"</code> </pre> <br><p>  Chaves e valores do exemplo acima: </p><br><ul><li>  <code>pg_database</code> - um prefixo arbitr√°rio para as m√©tricas retornadas pela solicita√ß√£o (obrigat√≥rio); </li><li>  <code>query</code> - cont√©m uma consulta SQL (obrigat√≥rio); </li><li>  <code>master</code> - execute a solicita√ß√£o apenas no banco de dados especificado ao conectar-se ao URI (banco de dados mestre).  Necess√°rio ao iniciar o exportador com o sinalizador --auto-discover-database.  Aceita verdadeiro ou falso.  Falso por padr√£o.  (Opcional); </li><li>  <code>cache_seconds</code> - tempo durante o qual os dados em cache ser√£o retornados.  √â definido em segundos; </li><li>  <code>metrics</code> - cont√©m uma lista de tags e m√©tricas; </li><li>  <code>datname</code> , <code>size_bytes</code> - item da lista.  O nome do item da lista deve corresponder ao nome da coluna na consulta; </li><li>  <code>usage</code> - tipo de valor.  Aceita COUNTER, GAUGE, LABLE (mais na documenta√ß√£o do Prometheus) </li><li>  <code>description</code> - Descri√ß√£o da m√©trica personalizada </li></ul><br><p>  M√©tricas de retorno de exemplo: </p><br><pre> <code class="plaintext hljs"># HELP pg_database_size_bytes Disk space used by the database # TYPE pg_database_size_bytes gauge pg_database_size_bytes{datname="dbtest1",server="localhost:5432"} 1.0105503e+07 pg_database_size_bytes{datname="demo",server="localhost:5432"} 2.813719199e+09 pg_database_size_bytes{datname="postgres",server="localhost:5432"} 4.735491e+06 pg_database_size_bytes{datname="template0",server="localhost:5432"} 7.758339e+06 pg_database_size_bytes{datname="template1",server="localhost:5432"} 7.758339e+06</code> </pre><br><h2 id="rezyume">  Sum√°rio </h2><br><p>  Bem, resumimos tudo o que temos na vers√£o mais recente do postgres_exporter 0.8.0.  Basicamente, todas as melhorias est√£o relacionadas ao monitoramento de v√°rias inst√¢ncias e / ou v√°rios bancos de dados em uma inst√¢ncia. </p><br><ul><li>  O argumento excluir bancos de dados (exibido em 0.6.0) permite excluir bancos de dados da lista de bancos de dados para os quais as m√©tricas ser√£o coletadas.  Mas voc√™ n√£o pode excluir o banco de dados especificado na conex√£o URI, pois √© uma base principal; </li><li>  Agora voc√™ pode usar consultas personalizadas para visualiza√ß√µes globais (pg_stat_activity, pg_stat_database, etc.) junto com o argumento de descoberta autom√°tica de bancos de dados.  Para isso, foi adicionado um campo <strong>mestre</strong> adicional, indicando que a solicita√ß√£o deve ser executada apenas no banco de dados mestre; </li><li>  Agora voc√™ pode usar as m√©tricas padr√£o com o argumento descoberta autom√°tica de bancos de dados; </li><li>  Para solicita√ß√µes do usu√°rio, o campo cache_seconds foi adicionado, o que permite definir o tempo (em segundos) pelo qual a resposta do servidor √† solicita√ß√£o correspondente ser√° armazenada em cache. </li></ul><br><h2 id="istochniki">  Fontes </h2><br><ul><li>  <a href="https://prometheus.io/" rel="nofollow">Prometheus</a> [ <a href="https://en.wikipedia.org/wiki/Prometheus_(software)" rel="nofollow">1</a> ] √© um aplicativo de c√≥digo aberto usado para monitorar e alertar eventos.  Ele grava m√©tricas em tempo real em um banco de dados de s√©ries temporais criado usando o modelo de solicita√ß√£o HTTP, com consultas flex√≠veis e alertas em tempo real. </li><li>  <a href="https://github.com/wrouesnel/postgres_exporter" rel="nofollow">O postgres_exporter</a> √© um exportador de m√©tricas do PostgreSQL para o Prometheus. <br>  Vers√£o, no momento da reda√ß√£o, v 0.5.1.  Vers√µes suportadas do PostgreSQL 9.4+ (mas como a pr√°tica demonstrou, ele funciona na 9.3). </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480902/">https://habr.com/ru/post/pt480902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480886/index.html">Redes neurais e a propor√ß√£o √°urea: segunda execu√ß√£o</a></li>
<li><a href="../pt480888/index.html">Corotinas DIY. Parte 1. Geradores Pregui√ßosos</a></li>
<li><a href="../pt480890/index.html">Resultados da pesquisa sobre o uso do painel Express</a></li>
<li><a href="../pt480892/index.html">Internet de bal√£o</a></li>
<li><a href="../pt480900/index.html">Traga de volta meu beb√™! (N.-F. hist√≥ria)</a></li>
<li><a href="../pt480904/index.html">Framework de Microservice PHP: Ambiente de Desenvolvimento para Swoft</a></li>
<li><a href="../pt480906/index.html">Escrevendo um jogo python simples</a></li>
<li><a href="../pt480910/index.html">Como criar uma classe de teste b√°sica para testes do Selenium e inicializar atrav√©s do JUnit RuleChain</a></li>
<li><a href="../pt480912/index.html">Dap em a√ß√£o. Escrevendo TodoMVC. Parte 1</a></li>
<li><a href="../pt480914/index.html">Microsservi√ßos para iniciantes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>