<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСВЁЯП╗ тШЭЁЯП╛ ЁЯд╛ЁЯП╗ рд░рд┐рдПрдХреНрдЯ рдЯреЛрдХрди ЁЯЩПЁЯП╛ ЁЯТкЁЯП╜ ЁЯЪМ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╕рдорд╕реНрдпрд╛ 


 рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдПрдХ рдирдИ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдкрд░ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреА рдкрд╣рд▓реА рд╕рдорд╕реНрдпрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред рдФрд░ рд╕рдмрд╕реЗ рдЖрдо рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдореЗрдВ рд╕реЗ рдПрдХ (рдореЗрд░реЗ рдЕрдиреБрднрд╡ рд╕реЗ) рдЯреЛрдХрди...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд░рд┐рдПрдХреНрдЯ рдЯреЛрдХрди</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485764/"><p><img src="https://habrastorage.org/webt/v-/ss/kz/v-sskznfybocplele4iiabbdl44.png"></p><br><h2 id="problem">  рд╕рдорд╕реНрдпрд╛ </h2><br><p> рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдПрдХ рдирдИ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдкрд░ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреА рдкрд╣рд▓реА рд╕рдорд╕реНрдпрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред  рдФрд░ рд╕рдмрд╕реЗ рдЖрдо рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдореЗрдВ рд╕реЗ рдПрдХ (рдореЗрд░реЗ рдЕрдиреБрднрд╡ рд╕реЗ) рдЯреЛрдХрди рдЖрдзрд╛рд░рд┐рдд рдкреНрд░рд╛рдзрд┐рдХрд░рдг (рдЖрдорддреМрд░ рдкрд░ рдЬреЗрдбрдмреНрд▓реНрдпреВрдЯреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ) рд╣реИред </p><br><p>  рдореЗрд░реЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдпрд╣ рд▓реЗрдЦ "рджреЛ рд╕рдкреНрддрд╛рд╣ рдкрд╣рд▓реЗ рдореИрдВ рдХреНрдпрд╛ рдкрдврд╝рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛" рдЬреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред  рдореЗрд░рд╛ рд▓рдХреНрд╖реНрдп рдПрдХ рд╕рд╛рдл рдФрд░ рд╕рд░рд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╛рде рдиреНрдпреВрдирддрдо рдФрд░ рдкреБрди: рдкреНрд░рдпреЛрдЬреНрдп рдХреЛрдб рд▓рд┐рдЦрдирд╛ рдерд╛ред  рдореЗрд░реЗ рдкрд╛рд╕ рдкреНрд░рдмрдВрдзрди рдкреНрд░рдмрдВрдзрди рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдЕрдЧрд▓реА рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рдереАрдВ: </p><br><ul><li>  рдЯреЛрдХрди рдХреЛ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </li><li>  рдкреЗрдЬ рд░реАрд▓реЛрдб рдкрд░ рдЯреЛрдХрди рдмрд╣рд╛рд▓ рдХрд┐рдП рдЬрд╛рдиреЗ рдЪрд╛рд╣рд┐рдП </li><li>  рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЕрдиреБрд░реЛрдзреЛрдВ рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </li><li>  рдпрджрд┐ рдЕрдВрддрд┐рдо рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рдмрд╛рдж рдЯреЛрдХрди рдкрд╣реБрдВрдЪ рдХреЛ рддрд╛рдЬрд╝рд╛ рдХрд░рдХреЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </li><li>  рдЙрдкрдпреБрдХреНрдд рдпреВрдЖрдИ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдШрдЯрдХреЛрдВ рдХреА рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП </li><li>  рд╕рдорд╛рдзрд╛рди рд╢реБрджреНрдз рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рдмрдирд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (рдмрд┐рдирд╛ Redux, рдердВрдХ, рдЖрджрд┐ ..) </li></ul><a name="habracut"></a><br><p>  рдореЗрд░реЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЪреБрдиреМрддреАрдкреВрд░реНрдг рдкреНрд░рд╢реНрдиреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдереЗ: </p><br><ul><li>  рд╕рд┐рдВрдХ рд░рд┐рдПрдХреНрдЯ рдШрдЯрдХреЛрдВ рд░рд╛рдЬреНрдп рдФрд░ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдбреЗрдЯрд╛ рдореЗрдВ рдХреИрд╕реЗ рд░рдЦреЗрдВ? </li><li>  рдкреВрд░реЗ рддрддреНрд╡реЛрдВ рдХреЗ рдкреЗрдбрд╝ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрд╕реЗ рдкрд╛рд░рд┐рдд рдХрд┐рдП рдмрд┐рдирд╛ рднреНрд░реВрдг рдХреЗ рдЕрдВрджрд░ рдЯреЛрдХрди рдХреИрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ (рд╡рд┐рд╢реЗрд╖рдХрд░ рдпрджрд┐ рд╣рдо рдЗрд╕ рднреНрд░реВрдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдмрд╛рдж рдореЗрдВ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдердВрдХ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ) </li></ul><br><p> рд▓реЗрдХрд┐рди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЪрд░рдг рджрд░ рдЪрд░рдг рд╣рд▓ рдХрд░реЗрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд╣рдо <code>token provider</code> рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>token provider</code> рдмрдирд╛рдПрдВрдЧреЗ рдФрд░ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд╕реБрдирдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдкреНрд░рджрд╛рди рдХрд░реЗрдВрдЧреЗред  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдПрдХ <code>auth provider</code> рдмрдирд╛рдПрдВрдЧреЗ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ <code>token provider</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>token provider</code> рдЪрд╛рд░реЛрдВ рдУрд░ рд░реИрдкрд░, рд░рд┐рдПрдХреНрдЯрд░ рдШрдЯрдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╣реБрдХ, рд╕реНрдЯреЗрд░реЙрдпрдб рдкрд░ рд▓рд╛рдиреЗ рдФрд░ рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рддрд░реАрдХреЗред  рдФрд░ рдЕрдВрдд рдореЗрдВ, рд╣рдо рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдЗрд╕ рд╕рдорд╛рдзрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рджреЗрдЦреЗрдВрдЧреЗред </p><br><h2 id="i-just-wanna-npm-install--and-go-production">  рдореИрдВ рдмрд╕ <code>npm install ...</code> рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдБ <code>npm install ...</code> рдФрд░ рдЙрддреНрдкрд╛рджрди рдЬрд╛рдирд╛ </h2><br><p>  рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдкреИрдХреЗрдЬ рдЗрдХрдЯреНрдард╛ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рд╕рднреА (рдФрд░ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ) рд╣реИрдВред  рдЖрдкрдХреЛ рдмрд╕ рдЗрд╕реЗ рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">npm install react-token-auth</code> </pre> <br><p>  рдФрд░ <a href="https://github.com/obabichev/react-token-auth" rel="nofollow">рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛-рдЯреЛрдХрди-рд╕реНрдерд┐рдд</a> GitHub рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред </p><br><h2 id="solution">  рд╕рдорд╛рдзрд╛рди </h2><br><p>  рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдореИрдВ рдПрдХ рдзрд╛рд░рдгрд╛ рдмрдирд╛рдКрдВрдЧрд╛ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдмреИрдХрдПрдВрдб рд╣реИ рдЬреЛ рдкрд╣реБрдВрдЪ рдФрд░ рддрд╛рдЬрд╝рд╛ рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд╕реНрддреБ рджреЗрддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдЯреЛрдХрди рдореЗрдВ рдПрдХ <code>JWT</code> рдкреНрд░рд╛рд░реВрдк рд╣реИред  рдРрд╕реА рд╡рд╕реНрддреБ рджрд┐рдЦ рд╕рдХрддреА рд╣реИ: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"accessToken"</span></span>: <span class="hljs-string"><span class="hljs-string">"..."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"refreshToken"</span></span>: <span class="hljs-string"><span class="hljs-string">"..."</span></span> }</code> </pre> <br><p>  рджрд░рдЕрд╕рд▓, рдЯреЛрдХрди рдСрдмреНрдЬреЗрдХреНрдЯ рдХреА рд╕рдВрд░рдЪрдирд╛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИред  рд╕рдмрд╕реЗ рд╕рд░рд▓ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рдПрдХ рдЕрдирдВрдд рдкрд╣реБрдВрдЪ рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╣рдо рдпрд╣ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЬрдм рд╣рдо рджреЛ рдЯреЛрдХрди рд░рдЦрддреЗ рд╣реИрдВ рддреЛ рдХрд┐рд╕реА рд╕реНрдерд┐рддрд┐ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХреИрд╕реЗ рдХрд░реЗрдВ, рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рдХреА рд╕рдордп рд╕реАрдорд╛ рд╕рдорд╛рдкреНрдд рд╣реЛ рд╕рдХрддреА рд╣реИ, рдФрд░ рджреВрд╕рд░реЗ рдХреЛ рдкрд╣рд▓реЗ рдПрдХ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><h3 id="jwt">  рдЬреЗрдбрдмреНрд▓реНрдпреВрдЯреА </h3><br><p>  рдпрджрд┐ рдЖрдкрдХреЛ рдирд╣реАрдВ рдкрддрд╛ рдХрд┐ JWT рдЯреЛрдХрди рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рдХреНрдпрд╛ рд╣реИ, рддреЛ <a href="https://jwt.io/" rel="nofollow">jwt.io</a> рдкрд░ <a href="https://jwt.io/" rel="nofollow">рдЬрд╛рдПрдВ</a> рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдЕрдм рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ JWT рдЯреЛрдХрди рдореЗрдВ (рдЖрдзрд╛рд░ <code>Base64</code> рдкреНрд░рд╛рд░реВрдк рдореЗрдВ) рдЙрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛрддреА рд╣реИ рдЬреЛ рдЙрд╕реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </p><br><p>  рдЖрдорддреМрд░ рдкрд░ JWT рдЯреЛрдХрди рдореЗрдВ рдбреЙрдЯреНрд╕ рджреНрд╡рд╛рд░рд╛ рд╡рд┐рднрд╛рдЬрд┐рдд 3 рднрд╛рдЧ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><p> <code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiSm9obiBEb2UiLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTUxNjIzOTAyMn0.yOZC0rjfSopcpJ-d3BWE8-BkoLR_SCqPdJpq8Wn-1Mc</code> </p> <br><p>  рдпрджрд┐ рд╣рдо рдЗрд╕ рдЯреЛрдХрди рдХреЗ рдордзреНрдп рднрд╛рдЧ ( <code>eyJu...Mn0</code> ) рдХреЛ рдбрд┐рдХреЛрдб рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдЕрдЧрд▓рд╛ JSON рдорд┐рд▓реЗрдЧрд╛: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"John Doe"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iat"</span></span>: <span class="hljs-number"><span class="hljs-number">1516239022</span></span>, <span class="hljs-attr"><span class="hljs-attr">"exp"</span></span>: <span class="hljs-number"><span class="hljs-number">1516239022</span></span> }</code> </pre> <br><p>  рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде, рд╣рдо рдЯреЛрдХрди рдХреА рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдВрдЧреЗред </p><br><h3 id="token-provider">  рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ </h3><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ, рд╣рдорд╛рд░рд╛ рдкрд╣рд▓рд╛ рдХрджрдо рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдмрдирд╛ рд░рд╣рд╛ рд╣реИред  рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рд╕реАрдзреЗ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдЧрд╛ рдФрд░ рдЯреЛрдХрди рдХреЗ рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрди рд╣рдо рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд░реЗрдВрдЧреЗред  рдпрд╣ рд╣рдореЗрдВ рдХрд╣реАрдВ рд╕реЗ рднреА рдмрджрд▓рд╛рд╡ рд╕реБрдирдиреЗ рдФрд░ рддреБрд░рдВрдд рд╕реБрдирдиреЗ рд╡рд╛рд▓реЛрдВ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ (рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рдмрд╛рдж рдореЗрдВ)ред  рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдЕрдЧрд▓реЗ рддрд░реАрдХреЗ рд╣реЛрдВрдЧреЗ: </p><br><ul><li>  <code>getToken()</code> рд╡рд░реНрддрдорд╛рди рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП (рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ <code>getToken()</code> рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛) </li><li>  <code>setToken()</code> рд▓реЙрдЧрд┐рди, рд▓реЙрдЧрдЖрдЙрдЯ рдпрд╛ рдкрдВрдЬреАрдХрд░рдг рдХреЗ рдмрд╛рдж рдЯреЛрдХрди рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </li><li>  <code>isLoggedIn()</code> рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд▓реЙрдЧ рдЗрди рд╣реИ </li><li>  <code>subscribe()</code> рдкреНрд░рджрд╛рддрд╛ рдХреЛ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рд╕реЗ рдХрд┐рд╕реА рднреА рдЯреЛрдХрди рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рдж рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </li><li>  <code>unsubscribe()</code> рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ <code>unsubscribe()</code> </li></ul><br><p>  рдлрд╝рдВрдХреНрд╢рди <code>createTokenProvider()</code> рд╡рд░реНрдгрд┐рдд рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╛рде рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдПрдЧрд╛: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createTokenProvider = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/* Implementation */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { getToken, isLoggedIn, setToken, subscribe, unsubscribe, }; };</code> </pre> <br><p>  рд╕рднреА рдЕрдЧрд▓реЗ рдХреЛрдб createTokenProvider рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЖрдЗрдП рдЯреЛрдХрди рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдФрд░ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЪрд░ рдмрдирд╛рдХрд░ рд╢реБрд░реВ рдХрд░реЗрдВ (рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдкреГрд╖реНрда рдкреБрдирдГ рд▓реЛрдб рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рд╕рддреНрд░ рдЦреЛ рдирд╣реАрдВ рдЬрд╛рдПрдЧрд╛): </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> _token: { <span class="hljs-attr"><span class="hljs-attr">accessToken</span></span>: string, <span class="hljs-attr"><span class="hljs-attr">refreshToken</span></span>: string } = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'REACT_TOKEN_AUTH'</span></span>) || <span class="hljs-string"><span class="hljs-string">''</span></span>) || <span class="hljs-literal"><span class="hljs-literal">null</span></span>;</code> </pre> <br><p>  рдЕрдм рд╣рдореЗрдВ JWT рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╡рд░реНрддрдорд╛рди рд╕рдордп рдореЗрдВ, JWT рдЯреЛрдХрди рдореИрдЬрд┐рдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдкрд╛рд░реНрд╕ рдХрд░рдирд╛ рдФрд░ рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдирд╛ рдХреЛрдИ рдмрдбрд╝реА рдмрд╛рдд рдирд╣реАрдВ рд╣реИред  рдлрд╝рдВрдХреНрд╢рди <code>getExpirationDate()</code> рдПрдХ JWT рдЯреЛрдХрди рдХреЛ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗрдЧрд╛ рдФрд░ рд╕рдлрд▓рддрд╛ рдкрд░ рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рд▓реМрдЯрд╛рдПрдЧрд╛ (рдпрд╛ рд╡рд┐рдлрд▓рддрд╛ рдкрд░ <code>null</code> ): </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getExpirationDate = (jwtToken?: string): number | <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">null</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!jwtToken) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> jwt = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(atob(jwtToken.split(<span class="hljs-string"><span class="hljs-string">'.'</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>])); <span class="hljs-comment"><span class="hljs-comment">// multiply by 1000 to convert seconds into milliseconds return jwt &amp;&amp; jwt.exp &amp;&amp; jwt.exp * 1000 || null; };</span></span></code> </pre> <br><p>  рдФрд░ рдПрдХ рдФрд░ рдЙрдкрдпреЛрдЧ рд╕рдорд╛рд░реЛрд╣ рдХреА рдЬрд╛рдВрдЪ рдХреА рдЧрдИ рд╣реИ <code>isExpired()</code> рдХреА рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордпрд╕реАрдорд╛ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ рд╣реИред  рдпрджрд┐ рд╕рдорд╛рдкреНрддрд┐ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рдкреНрд░рд╕реНрддреБрдд рдХреА рдЧрдИ рд╣реИ рдФрд░ рдпрд╣ <code>Date.now()</code> рд╕реЗ рдХрдо рд╣реИ рддреЛ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рд╕рд╣реА рд╣реИред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isExpired = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">exp?: number</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!exp) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() &gt; exp; };</code> </pre> <br><p>  рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдкрд╣рд▓рд╛ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛рдиреЗ рдХрд╛ рд╕рдордпред  рдлрд╝рдВрдХреНрд╢рди <code>getToken()</code> рдХреЛ рдЯреЛрдХрди рд▓реМрдЯрд╛ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдЗрд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рдлрд╝рдВрдХреНрд╢рди <code>async</code> рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЯреЛрдХрди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдкрд╣рд▓реЗ рд╕реЗ рдмрдирд╛рдП рдЧрдП рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдо рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдПрдХреНрд╕рдкрд╛рдпрд░ рдЯреЛрдХрди рдХреА рдЕрд╡рдзрд┐ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ рд╣реИ рдпрд╛ рдирд╣реАрдВ ( <code>isExpired(getExpirationDate(_token.accessToken))</code> )ред  рдФрд░ рдЯреЛрдХрди рдХреЛ рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВред  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдЯреЛрдХрди (рдЕрднреА рддрдХ рд▓рд╛рдЧреВ рдирд╣реАрдВ рдХрд┐рдП рдЧрдП рдлрд╝рдВрдХреНрд╢рди <code>setToken()</code> ) рдХреЗ рд╕рд╛рде рдЯреЛрдХрди рдмрдЪрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдФрд░ рдЕрдВрдд рдореЗрдВ, рд╣рдо рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getToken = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_token) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isExpired(getExpirationDate(_token.accessToken))) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updatedToken = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'/update-token'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: _token.refreshToken }) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()); setToken(updatedToken); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _token &amp;&amp; _token.accessToken; };</code> </pre> <br><p>  рдлрд╝рдВрдХреНрд╢рди <code>isLoggedIn()</code> рд╕рд░рд▓ рд╣реЛрдЧрд╛: рдпрд╣ рд╕рд╣реА рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдЕрдЧрд░ <code>_tokens</code> <code>null</code> рдирд╣реАрдВ рд╣реИ рдФрд░ рдЯреЛрдХрди рд╕рдорд╛рдкреНрддрд┐ рдХреА рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рд╣рдо рдЯреЛрдХрди рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рддрдм рддрдХ рдирд╣реАрдВ рдЬрд╛рди рдкрд╛рдПрдВрдЧреЗ, рдЬрдм рддрдХ рдХрд┐ рд╣рдо рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддреЗ, рд▓реЗрдХрд┐рди рдЖрдорддреМрд░ рдкрд░ рдпрд╣ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ , рдФрд░ рд╣рдореЗрдВ рдлрдВрдХреНрд╢рди рд░рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рд╣реИред рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ): </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isLoggedIn = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !!_token; };</code> </pre> <br><p>  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╕рдордп рд╣реИред  рд╣рдо <a href="https://en.wikipedia.org/wiki/Observer_pattern" rel="nofollow">рдСрдмреНрдЬрд░реНрд╡рд░ рдкреИрдЯрд░реНрди рдХреЗ</a> рд╕рдорд╛рди рдХреБрдЫ рд▓рд╛рдЧреВ рдХрд░реЗрдВрдЧреЗ, рдФрд░ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдорд╛рд░реЗ рд╕рднреА рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рдгреА рдмрдирд╛рдПрдВрдЧреЗред  рд╣рдо рдЙрдореНрдореАрдж рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдЗрд╕ рд╕рд░рдгреА рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡ рд╡рд╣ рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рдж рдХреЙрд▓ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observers: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>&lt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">isLogged: boolean</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; = [];</code> </pre> <br><p>  рдЕрдм рд╣рдо рддрд░реАрдХреЗ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ <code>subscribe()</code> рдФрд░ <code>unsubscribe()</code> ред  рдкрд╣рд▓реЗ рд╡рд╛рд▓рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдСрдмреНрдЬрд░реНрд╡рд░ рдереЛрдбрд╝рд╛ рдкрд╣рд▓реЗ рд╡рд╛рд▓реА рд╕рд░рдгреА рдореЗрдВ рдирдпрд╛ рдСрдмреНрдЬрд░реНрд╡рд░ рдЬреЛрдбрд╝реЗрдЧрд╛, рджреВрд╕рд░рд╛ рд╡реНрдпрдХреНрддрд┐ рдкреНрд░реЗрдХреНрд╖рдХ рдХреЛ рд╕реВрдЪреА рд╕реЗ рд╣рдЯрд╛ рджреЗрдЧрд╛ред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> subscribe = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">observer: (isLogged: boolean</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) =&gt; { observers.push(observer); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> unsubscribe = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">observer: (isLogged: boolean</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) =&gt; { observers = observers.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_observer</span></span></span><span class="hljs-function"> =&gt;</span></span> _observer !== observer); };</code> </pre> <br><p>  рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ <code>subscribe()</code> рдФрд░ <code>unsubscribe()</code> рдХрд┐ рд╣рдо рдХреЗрд╡рд▓ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЛ рднреЗрдЬ рджреЗрдВрдЧреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд▓реЙрдЧ рдЗрди рд╣реИред  рд▓реЗрдХрд┐рди рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЖрдк рдЬреЛ рдХреБрдЫ рднреА рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЙрд╕реЗ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ (рд╕рдВрдкреВрд░реНрдг рдЯреЛрдХрди, рд╕рдорд╛рдкреНрддрд┐ рд╕рдордп, рдЖрджрд┐ ...)ред  рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдмреВрд▓рд┐рдпрди рдзреНрд╡рдЬ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрдЧрд╛ред </p><br><p>  рдЖрдЗрдП рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ рдЙрдкрдпреЛрдЧ рдлрдВрдХреНрд╢рди <code>notify()</code> рдмрдирд╛рдПрдВ рдЬреЛ рдЗрд╕ рдзреНрд╡рдЬ рдХреЛ рд▓реЗрдЧрд╛ рдФрд░ рд╕рднреА рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЛ рднреЗрдЬреЗрдЧрд╛: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> notify = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isLogged = isLoggedIn(); observers.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">observer</span></span></span><span class="hljs-function"> =&gt;</span></span> observer(isLogged)); };</code> </pre> <br><p>  рдФрд░ рдЕрдВрддрд┐рдо рд▓реЗрдХрд┐рди рдХрдо рд╕реЗ рдХрдо рдлрд╝рдВрдХреНрд╢рди рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рд╡рд╣ <code>setToken()</code> ред  рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдореЗрдВ рдЯреЛрдХрди рдХреА рдмрдЪрдд рдХрд░ рд░рд╣рд╛ рд╣реИ (рдпрд╛ рдЯреЛрдХрди рдЦрд╛рд▓реА рд╣реЛрдиреЗ рдкрд░ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдХреЛ рд╕рд╛рдл рдХрд░рдирд╛) рдФрд░ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЛ рд╕реВрдЪрд┐рдд рдХрд░рдирд╛ред  рдЗрд╕рд▓рд┐рдП, рдореИрдВ рд▓рдХреНрд╖реНрдп рджреЗрдЦрддрд╛ рд╣реВрдВ, рдореИрдВ рд▓рдХреНрд╖реНрдп рдкрд░ рдЬрд╛рддрд╛ рд╣реВрдВред </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> setToken = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">token: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">typeof</span></span></span></span><span class="hljs-function"><span class="hljs-params"> _token</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (token) { localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'REACT_TOKEN_AUTH'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(token)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { localStorage.removeItem(<span class="hljs-string"><span class="hljs-string">'REACT_TOKEN_AUTH'</span></span>); } _token = token; notify(); };</code> </pre> <br><p>  рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ, рдпрджрд┐ рдЖрдк рд▓реЗрдЦ рдореЗрдВ рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рдЖрдП рдФрд░ рдЗрд╕реЗ рдЙрдкрдпреЛрдЧреА рдкрд╛рдпрд╛, рддреЛ рдЖрдкрдиреЗ рдореБрдЭреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЦреБрд╢ рдХрд░ рджрд┐рдпрд╛ред  рдпрд╣рд╛рдВ рд╣рдо рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред  рдЖрдк рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рдХреЗ рд╕рд╛рде рдЦреЗрд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдо рдФрд░ рдЕрдзрд┐рдХ рдЕрдореВрд░реНрдд рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдмрдирд╛рдПрдВрдЧреЗ рдЬреЛ рдХрд┐рд╕реА рднреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧреАред </p><br><h3 id="auth-provider">  рдкреНрд░рд╛рдорд╛рдгрд┐рдХ рдкреНрд░рджрд╛рддрд╛ </h3><br><p>  рдЖрдЗрдП рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдПрдХ рдирдпрд╛ рд╡рд░реНрдЧ рдмрдирд╛рддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рд╣рдо рдПрдХ рдкреНрд░рд╛рдорд╛рдгрд┐рдХ рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╣реЗрдВрдЧреЗред  рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ 4 рддрд░реАрдХреЗ рд╣реЛрдВрдЧреЗ: рд╣реБрдХ рдХрд╛ <code>useAuth()</code> рд░рд┐рдПрдХреНрдЯ рдШрдЯрдХ рд╕реЗ рддрд╛рдЬрд╛ рд╕реНрдерд┐рддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЯреЛрдХрди рдФрд░ <code>login()</code> рд╕рд╛рде рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <code>authFetch()</code> <code>login()</code> , <code>logout()</code> рд╡рд┐рдзрд┐рдпрд╛рдВ рдЬреЛ рд╡рд┐рдзрд┐ <code>setToken()</code> рдкреНрд░реЙрдХреНрд╕реА рдХреЙрд▓ <code>setToken()</code> рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдХрд╛) (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреВрд░реА рдмрдирд╛рдИ рдЧрдИ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдПрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдмрд┐рдВрджреБ рд╣реЛрдЧрд╛, рдФрд░ рдмрд╛рдХреА рдХреЛрдб рдХреЛ рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдореМрдЬреВрджрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирдирд╛ рд╣реЛрдЧрд╛)ред  рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣рдо рдлрдВрдХреНрд╢рди рдХреНрд░рд┐рдПрдЯрд░ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createAuthProvider = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/* Implementation */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { useAuth, authFetch, login, logout } };</code> </pre> <br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрджрд┐ рд╣рдо рдПрдХ рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдЗрд╕рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tokenProvider = createTokenProvider();</code> </pre> <br><p>  рддрд░реАрдХреЗ <code>login()</code> рдФрд░ <code>logout()</code> рдмрд╕ рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рдХреЛ рдЯреЛрдХрди рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред  рдореИрдВрдиреЗ рдЗрди рддрд░реАрдХреЛрдВ рдХреЛ рдХреЗрд╡рд▓ рд╕реНрдкрд╖реНрдЯ рдЕрд░реНрде рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рдХрд┐рдпрд╛ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЦрд╛рд▓реА / рдЕрд╢рдХреНрдд рдЯреЛрдХрди рдкрд╛рд╕ рдХрд░рдиреЗ рд╕реЗ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рд╕реЗ рдбреЗрдЯрд╛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ): </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> login: <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> tokenProvider.setToken = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newTokens</span></span></span><span class="hljs-function">) =&gt;</span></span> { tokenProvider.setToken(newTokens); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> logout = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { tokenProvider.setToken(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); };</code> </pre> <br><p>  рдЕрдЧрд▓рд╛ рдЪрд░рдг рднреНрд░реВрдг рдХрд╛ рдХрд╛рд░реНрдп рд╣реИред  рдореЗрд░реЗ рд╡рд┐рдЪрд╛рд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдореВрд▓ рд░реВрдк рдореЗрдВ рдмрд┐рд▓реНрдХреБрд▓ рд╕рдорд╛рди рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рд╕рдорд╛рди рдкреНрд░рд╛рд░реВрдк рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рд▓реЗрдХрд┐рди рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрд░реЛрдз рдкрд░ рдкрд╣реБрдВрдЪ рдЯреЛрдХрди рдЗрдВрдЬреЗрдХреНрд╖рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдлрд╝реЗрдЪ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рджреЛ рддрд░реНрдХ рд▓реЗрдиреЗ рдЪрд╛рд╣рд┐рдП: рдЕрдиреБрд░реЛрдз рдЬрд╛рдирдХрд╛рд░реА (рдЖрдорддреМрд░ рдкрд░ URL) рдФрд░ рдЕрдиреБрд░реЛрдз init (рд╡рд┐рдзрд┐, рдирд┐рдХрд╛рдп рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд╕реНрддреБред рд╣реЗрдбрд░ рдФрд░ рдЗрддрдиреЗ рдкрд░);  рдФрд░ рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрдиреЗ рдХрд╛ рд╡рд╛рджрд╛ рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> authFetch = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (input: RequestInfo, init?: RequestInit): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;Response&gt; =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> token = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> tokenProvider.getToken(); init = init || {}; init.headers = { ...init.headers, <span class="hljs-attr"><span class="hljs-attr">Authorization</span></span>: <span class="hljs-string"><span class="hljs-string">`Bearer </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${token}</span></span></span><span class="hljs-string">`</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fetch(input, init); };</code> </pre> <br><p>  рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рд╣рдордиреЗ рджреЛ рдЪреАрдЬреЗрдВ рдмрдирд╛рдИрдВ: рдЯреЛрдХрди рдкреНрд░рджрд╛рддрд╛ рд╕реЗ рдЯреЛрдХрди рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдмрдпрд╛рди рдХрд╛ <code>await tokenProvider.getToken();</code> рдХрд░реЗрдВ рдЯреЛрдХрди <code>await tokenProvider.getToken();</code>  ( <code>getToken</code> рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рдмрд╛рдж рдЯреЛрдХрди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХрд╛ рддрд░реНрдХ рд╢рд╛рдорд┐рд▓ рд╣реИ) рдФрд░ рдЗрд╕ рдЯреЛрдХрди рдХреЛ рд▓рд╛рдЗрди рдореЗрдВ <code>getToken</code> <code>Authorization</code> рджреНрд╡рд╛рд░рд╛ <code>Authorization</code> рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ <code>Authorization: 'Bearer ${token}'</code> ред  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдХреЗрд╡рд▓ рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЧрдП рддрд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде рд▓реМрдЯрд╛рддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рджрд╛рддрд╛ рдХреЛ рдЯреЛрдХрди рдмрдЪрд╛рдиреЗ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЖрдЦрд┐рд░реА рд╕рдорд╕реНрдпрд╛ рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдЕрдкрдиреЗ рдШрдЯрдХреЛрдВ рд╕реЗ рдЯреЛрдХрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдХрд╛ рд╕рдордпред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рдмрддрд╛рдпрд╛ рдерд╛ рдХрд┐ рд╣рдо рдПрдХ рд╣реБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ <code>useAuth()</code> рдЬреЛ рдШрдЯрдХ рдХреЛ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд▓реЙрдЧ рдЗрди рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдпрд╣ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╣рдо рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ <code>useState()</code> ред  рдпрд╣ рдЙрдкрдпреЛрдЧреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдХреЛрдИ рднреА рдкрд░рд┐рд╡рд░реНрддрди рдЗрд╕ рд╣реБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдШрдЯрдХреЛрдВ рдХреЗ рд░реЗрдВрдбрд░рд░ рдХрд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ред </p><br><p>  рдФрд░ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рд╕реБрдирдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдм рдХреБрдЫ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ред  рд╣реБрдХ рдХреЗ рд╕рд╛рде рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдХрд┐рд╕реА рднреА рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рд╕реБрдирдиреЗ рдХрд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХрд╛ рд╣реБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ <code>useEffect()</code> ред  рдпрд╣ рд╣реБрдХ рджреЛ рддрд░реНрдХ рд▓реЗрддрд╛ рд╣реИ: рдХрд╛рд░реНрдп рдФрд░ рдирд┐рд░реНрднрд░рддрд╛ рдХреА рд╕реВрдЪреАред  рдЙрдкрдпреЛрдЧ рдХреА рдкрд╣рд▓реА рдХреЙрд▓ рдХреЗ рдмрд╛рдж рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдирд┐рдХрд╛рд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдлрд┐рд░ рдирд┐рд░реНрднрд░рддрд╛ рдХреА рд╕реВрдЪреА рдореЗрдВ рдХрд┐рд╕реА рднреА рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рдж рдлрд┐рд░ рд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ, рд╣рдо рд╕реНрдерд╛рдиреАрдп рд╕рдВрдЧреНрд░рд╣рдг рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╕реБрдирдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рд╣рдо рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рд▓реМрдЯ рд╕рдХрддреЗ рд╣реИрдВ ... рдирдпрд╛ рдлрд╝рдВрдХреНрд╢рди рдФрд░, рдЗрд╕ рдирдП рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдпрд╛ рддреЛ рдкрд╣рд▓реЗ рдПрдХ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдпрд╛ рдШрдЯрдХ рдХреЗ рдЕрдирдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдирд┐рдХрд╛рд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдирдП рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ, рд╣рдо рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдЧрд╛рд░рдВрдЯреА рдХреЛ рд╕реБрдирдирд╛ рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдХрд┐ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдирд┐рдХрд╛рд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ (рдХрдо рд╕реЗ рдХрдо рдпрджрд┐ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рдХреЛрдИ рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ)ред  рдереЛрдбрд╝рд╛ рдЬрдЯрд┐рд▓ рд▓рдЧрддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рд╕рд┐рд░реНрдл рдХреЛрдб рджреЗрдЦреЗрдВ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> useAuth = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [isLogged, setIsLogged] = useState(tokenProvider.isLoggedIn()); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> listener = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newIsLogged: boolean</span></span></span><span class="hljs-function">) =&gt;</span></span> { setIsLogged(newIsLogged); }; tokenProvider.subscribe(listener); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { tokenProvider.unsubscribe(listener); }; }, []); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [isLogged] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> isLogged]; };</code> </pre> <br><p>  рдФрд░ рдмрд╕ рдЗрддрдирд╛ рд╣реАред  рд╣рдордиреЗ рдЕрднреА рд╕реНрдкрд╖реНрдЯ API рдХреЗ рд╕рд╛рде рдХреЙрдореНрдкреИрдХреНрдЯ рдФрд░ рдкреБрди: рдкреНрд░рдпреЛрдЬреНрдп рдЯреЛрдХрди рд╕реНрдЯреЛрд░реЗрдЬ рд╕реНрдЯреЛрд░реЗрдЬ рдмрдирд╛рдпрд╛ рд╣реИред  рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдо рдХреБрдЫ рдЙрдкрдпреЛрдЧ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рджреЗрдЦреЗрдВрдЧреЗред </p><br><h2 id="usage">  рдкреНрд░рдпреЛрдЧ </h2><br><p>  рдКрдкрд░ рд╣рдордиреЗ рдЬреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛, рдЙрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рдкреНрд░рджрд╛рддрд╛ рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рд╣рдореЗрдВ рдХрд╛рд░реНрдп рдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рд╕реБрд╡рд┐рдзрд╛ <code>useAuth()</code> , <code>authFetch()</code> , <code>login()</code> , <code>logout()</code> рд╕реНрдерд╛рдиреАрдп рд╕реНрдЯреЛрд░реЗрдЬ рдореЗрдВ рдПрдХ рд╣реА рдЯреЛрдХрди рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИ (рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХреБрдЫ рднреА рдЖрдкрдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЯреЛрдХрди рдХреЗ рд▓рд┐рдП рдСрд╡рд░ рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрд╕ рдмрдирд╛рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ) рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рд╕реНрдерд╛рдиреАрдп рд╕рдВрдЧреНрд░рд╣рдг рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдХреБрдВрдЬреА рдХреЛ рд╕рдореНтАНрдорд┐рд▓рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {useAuth, authFetch, login, logout} = createAuthProvider();</code> </pre> <br><h3 id="login-form">  рд▓реЙрдЧ рдЗрди рдлреЙрд░реНрдо </h3><br><p>  рдЕрдм рд╣рдо рдЙрди рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдореЗрдВ рдорд┐рд▓реЗред  рдЖрдЗрдП рд▓реЙрдЧрд┐рди рдлреЙрд░реНрдо рдШрдЯрдХ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░реЗрдВред  рдЗрд╕ рдШрдЯрдХ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╕рд╛рдЦ рдХреЗ рд▓рд┐рдП рдЗрдирдкреБрдЯ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЗрд╕реЗ рдЖрдВрддрд░рд┐рдХ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рд╣реЗрдЬрдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╕рдмрдорд┐рдЯ рдХрд░рдиреЗ рдкрд░ рд╣рдореЗрдВ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ рдпрд╣рд╛рдВ рд╣рдо рдкреНрд░рд╛рдкреНрдд рдЯреЛрдХрди рдХрд╛ рд╕рдВрдЧреНрд░рд╣ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди <code>login()</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> LoginComponent = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [credentials, setCredentials] = useState({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">password</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> onChange = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{target: {name, value}}: ChangeEvent&lt;HTMLInputElement&gt;</span></span></span><span class="hljs-function">) =&gt;</span></span> { setCredentials({...credentials, [name]: value}) }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> onSubmit = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event?: React.FormEvent</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event) { event.preventDefault(); } fetch(<span class="hljs-string"><span class="hljs-string">'/login'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(credentials) }) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">token</span></span></span><span class="hljs-function"> =&gt;</span></span> login(token)) }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;form onSubmit={onSubmit}&gt; &lt;input name="name" value={credentials.name} onChange={onChange}/&gt; &lt;input name="password" value={credentials.password} onChange={onChange}/&gt; &lt;/form&gt; };</code> </pre> <br><p>  рдФрд░ рд╡рд╣ рд╕рдм рд╣реИ, рдпрд╣ рд╕рдм рдХреБрдЫ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рдЯреЛрдХрди рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЬрдм рдПрдХ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдЗрд╕реЗ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╛ рдШрдЯрдХреЛрдВ рдореЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдЧреА, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдЕрдВрджрд░ рд▓рд╛рдЧреВ рд╣реИред </p><br><p>  рдкрдВрдЬреАрдХрд░рдг рдлреЙрд░реНрдо рд╕рдорд╛рди рд╣реИ, рдЗрдирдкреБрдЯ рдлрд╝реАрд▓реНрдб рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдирд╛рдореЛрдВ рдореЗрдВ рдХреЗрд╡рд▓ рдЕрдВрддрд░ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЗрд╕реЗ рдпрд╣рд╛рдВ рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛ред </p><br><h3 id="router">  рд░реВрдЯрд░ </h3><br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдкреНрд░рджрд╛рддрд╛ рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░реВрдЯрд┐рдВрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдорд╛рди рд▓реЗрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рджреЛ рдкреИрдХ рд░реВрдЯ рд╣реИрдВ: рдПрдХ рдкрдВрдЬреАрдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдФрд░ рдПрдХ рдкрдВрдЬреАрдХреГрдд рди рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдПред  рдЙрдиреНрд╣реЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рдЬрд╛рдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдореЗрдВ рдЯреЛрдХрди рд╣реИ рдпрд╛ рдирд╣реАрдВ, рдФрд░ рдпрд╣рд╛рдВ рд╣рдо рд╣реБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <code>useAuth()</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Router = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [logged] = useAuth(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;BrowserRouter&gt; &lt;Switch&gt; {!logged &amp;&amp; &lt;&gt; &lt;Route path="/register" component={Register}/&gt; &lt;Route path="/login" component={Login}/&gt; &lt;Redirect to="/login"/&gt; &lt;/&gt;} {logged &amp;&amp; &lt;&gt; &lt;Route path="/dashboard" component={Dashboard} exact/&gt; &lt;Redirect to="/dashboard"/&gt; &lt;/&gt;} &lt;/Switch&gt; &lt;/BrowserRouter&gt;; };</code> </pre> <br><p>  рдФрд░ рдЕрдЪреНрдЫреА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдореЗрдВ рдХрд┐рд╕реА рднреА рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рдж рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЗрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреА рд╕рджрд╕реНрдпрддрд╛ рд╣реИред </p><br><h3 id="fetch-requests">  рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </h3><br><p>  рдФрд░ рддрдм рд╣рдо рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЗрдЯрд╛ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕рдореЗрдВ рдПрдХ рд╣реА рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ рдЬреИрд╕реЗ рдХрд┐, рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХреЛрдб рдореЗрдВ <code>authFetch</code> рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдмрд╕ рдЗрд╕реЗ <code>authFetch</code> рджреНрд╡рд╛рд░рд╛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Dashboard = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [posts, setPosts] = useState([]); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { authFetch(<span class="hljs-string"><span class="hljs-string">'/posts'</span></span>) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> r.json()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_posts</span></span></span><span class="hljs-function"> =&gt;</span></span> setPosts(_posts)) }, []); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {posts.map(post =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{post.id}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {post.message} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">)} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> };</code> </pre> <br><h2 id="summary">  рд╕рд╛рд░рд╛рдВрд╢ </h2><br><p>  рд╣рдордиреЗ рдХрд░ рджрд┐рдЦрд╛рдпрд╛ред  рдпрд╣ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдпрд╛рддреНрд░рд╛ рдереА, рд▓реЗрдХрд┐рди рдЗрд╕рдХрд╛ рдЕрдВрдд рднреА рд╣реИ (рд╢рд╛рдпрдж рдЦреБрд╢ рднреА)ред </p><br><p>  рд╣рдордиреЗ рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдХреЗ рдЯреЛрдХрди рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреА рд╕рдордЭ рдХреЗ рд╕рд╛рде рд╢реБрд░реБрдЖрдд рдХреАред  рдлрд┐рд░ рд╣рдордиреЗ рдПрдХ рд╕рдорд╛рдзрд╛рди рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдФрд░ рдЕрдВрдд рдореЗрдВ рдЗрд╕ рдмрд╛рдд рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рджреЗрдЦрд╛ рдХрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд░рд┐рдПрдХреНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рдХрд╣рд╛ рдерд╛, рдЖрдк рдкреБрд╕реНрддрдХрд╛рд▓рдп рдореЗрдВ GitHub рдкрд░ рдореЗрд░рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдереЛрдбрд╝реА рдЕрдзрд┐рдХ рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдСрдмреНрдЬреЗрдХреНрдЯ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдзрд╛рд░рдгрд╛ рдирд╣реАрдВ рдмрдирд╛рддрд╛ рд╣реИ рдпрд╛ рдЯреЛрдХрди рдХреЛ рдХреИрд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдП, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рддрд░реНрдХ рджреЗрдиреЗ рд╣реЛрдВрдЧреЗред  рд▓реЗрдХрд┐рди рд╕рдорд╛рдзрд╛рди рдХрд╛ рд╡рд┐рдЪрд╛рд░ рд╕рдорд╛рди рд╣реИ рдФрд░ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢ рднреА рд╣реИрдВред </p><br><p>  рдпрд╣рд╛рдВ рдореИрдВ рд▓реЗрдЦ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж рдХрд╣ рд╕рдХрддрд╛ рд╣реВрдВ рдФрд░ рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЖрдкрдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдерд╛ред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi485764/">https://habr.com/ru/post/hi485764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi485746/index.html">4 рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдкреНрд░рдпреБрдХреНрдд рд╕рд░реНрд╡рд░ рд╕реЗ рдкреНрд░рд╕реНрдерд╛рди рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi485748/index.html">рд╡реИрдХрд▓реНрдкрд┐рдХ рдЪреЗрдирд┐рдВрдЧ, рдЕрд╢рдХреНрдд рдХреЗ рд╕рд╛рде рдорд┐рд▓рди, рдФрд░ рд╡реЗ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рдХреИрд╕реЗ рдмрджрд▓рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi485750/index.html">рдПрдкреАрдЖрдИ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдпрд╣ рдЕрдВрдд рдореЗрдВ рдЬрд╛рд╡рд╛ 8 рд╕реЗ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рд▓рд╛рдпрдХ рд╣реИред рднрд╛рдЧ 1</a></li>
<li><a href="../hi485758/index.html">рдСрдирд▓рд╛рдЗрди рдирд┐рдпрдВрддреНрд░рдг, рд╕рд╛рде рд╣реА рдХрдкрдбрд╝рд╛ рдФрд░ рдмреБрдирд╛ рд╣реБрдЖ рдХреАрдмреЛрд░реНрдб рдЬреЛ рдкреИрд░рд╛рдбрд┐рд╕реЛ рдХреЗ рд╕рд╛рде рдореЙрдбреНрдпреВрд▓рд░ рд╡рд┐рд╢рд╛рд▓</a></li>
<li><a href="../hi485760/index.html">рдХреЛрдЯрд▓рд┐рди рдореЗрдВ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиред рдЦрддрд░рдирд╛рдХ рдирд╛рд╕реНрддрд┐рдХрддрд╛ рдпрд╛ рдПрдХ рдЙрдкрдпреЛрдЧреА рдЙрдкрдХрд░рдг?</a></li>
<li><a href="../hi485766/index.html">рдЦрд┐рд▓рд╛ рдирд┐рдпрдо</a></li>
<li><a href="../hi485768/index.html">2020 рд╡реЗрдм рдЯреНрд░реЗрдВрдбреНрд╕ рд╡рд░реНрде рдЯреНрд░рд╛рдЗрдВрдЧ</a></li>
<li><a href="../hi485770/index.html">рдЧрд▓рдд рдкреЙрд▓реАрдорд┐рдХ</a></li>
<li><a href="../hi485772/index.html">рдбреЗрд╕реНрдХрдЯреЙрдк рд╕реЗ тАЛтАЛрд╡рд░реНрдЪреБрдЕрд▓ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рддрдХ - рд╣рдо рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдореЗрдВ рдХреИрд╕реЗ рдЧрдП</a></li>
<li><a href="../hi485776/index.html">рдкреВрд░реЗ рднреВрдЧреЛрд▓ рдореЗрдВ: рд╡рд┐рднрд┐рдиреНрди рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рдиреЗрд╡рд┐рдЧреЗрд╢рди рдФрд░ рднреВрдЧрд░реНрднреАрдп рдХрд╛рд░реНрдп</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>