<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëã üñçÔ∏è üöñ Analisando Ethereum, Bitcoin e mais de 1200 outras criptomoedas usando o PostgreSQL üôà üìú üìâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As criptomoedas s√£o a for√ßa motriz por tr√°s da nova corrida do ouro. O autor sugere o uso de an√°lise de dados para entender melhor esse mercado emerge...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analisando Ethereum, Bitcoin e mais de 1200 outras criptomoedas usando o PostgreSQL</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirex/blog/404547/">  <i>As criptomoedas s√£o a for√ßa motriz por tr√°s da nova corrida do ouro.</i>  <i>O autor sugere o uso de an√°lise de dados para entender melhor esse mercado emergente.</i> <br><br>  Recentemente, h√° uma sensa√ß√£o de que o dinheiro est√° crescendo nas √°rvores. <br><br><img src="https://habrastorage.org/web/e41/f86/617/e41f866173634d9f89fdb47999346842.jpg" alt="imagem"><br><br>  Os volumes do com√©rcio de c√¢mbio atingem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">milh√µes de</a> d√≥lares e a capitaliza√ß√£o de mercado - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bilh√µes</a> .  √â justo falar sobre a corrida do ouro, alimentada pelo advento de um n√∫mero crescente de novas criptomoedas. <br><br>  Vivemos em uma era de moedas digitais.  Tendo aparecido h√° menos de 10 anos, o conceito de criptomoeda j√° se espalhou hoje.  Apesar de t√£o pouco tempo, j√° existem mais de mil criptomoedas diferentes no mercado, e as ICOs ocorrem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">quase todos os dias</a> . <br><a name="habracut"></a><br>  √Ä medida que nos acostumamos com o novo mercado em r√°pido crescimento, √© importante tentar entender o que est√° acontecendo com ele.  Existem muitos riscos, tanto no n√≠vel micro (por exemplo, investimento pessoal) quanto no n√≠vel macro (por exemplo, a preven√ß√£o de colapso do mercado ou grandes perdas de capital).  √â aqui que entramos no jogo. <br><br>  Lidamos com dados, ou melhor, eu represento a equipe de desenvolvimento do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TimescaleDB</a> , um novo banco de dados PostgreSQL de c√≥digo aberto para trabalhar com s√©ries temporais.  Achamos que seria √∫til e interessante analisar o mercado de criptomoedas usando o PostgreSQL e o TimescaleDB (e R para visualizar os dados recebidos). <br><br>  No decorrer de nosso trabalho, analisamos os dados hist√≥ricos nas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cartas de OHLC</a> para mais de 1200 criptomoedas, gentilmente fornecidas pela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CryptoCompare</a> (a √∫ltima data de amostragem √© 26 de junho deste ano).  A etapa deste conjunto de dados espec√≠fico √© de 24 horas; no entanto, observe que o TimescaleDB √© facilmente escal√°vel para trabalhar com per√≠odos de tempo muito mais curtos.  Nosso produto, em particular, combina perfeitamente com o papel de uma ferramenta b√°sica para trabalhar com o crescente fluxo de dados sobre novas moedas e trocas. <br><br>  Aqui est√° o que voc√™ pode tirar desta publica√ß√£o: <br><br><ul><li>  Algumas conclus√µes gerais valiosas sobre a situa√ß√£o no mercado de criptomoedas. </li><li>  Uma melhor compreens√£o de como o TimescaleDB + PostgreSQL pode simplificar a an√°lise de dados de s√©ries temporais. </li><li>  Obtenha instru√ß√µes para baixar esse conjunto de dados, descubra novas tend√™ncias (e talvez at√© as use para criar sua pr√≥pria estrat√©gia para entrar no mercado!). </li></ul><br>  Isen√ß√£o de responsabilidade: a an√°lise acima n√£o deve ser considerada uma recomenda√ß√£o para a realiza√ß√£o de certas transa√ß√µes financeiras.  Se voc√™ deseja conduzir sua pr√≥pria an√°lise, preste aten√ß√£o √†s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instru√ß√µes</a> que descrevem como instalar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TimescaleDB</a> e fa√ßa o download <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dos</a> dados do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CryptoCompare</a> . <br><br><h3>  Ent√£o, se voc√™ investisse US $ 100 no Bitcoin h√° 7 anos, agora isso custaria ... </h3><br>  Vamos come√ßar com a boa e velha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">s√≠ndrome do lucro perdido</a> .  Se voc√™ est√° um pouco familiarizado com criptomoedas, provavelmente j√° ouviu falar do Bitcoin, o "bisav√¥" de todas as criptomoedas.  Acontece que se em julho de 2010 voc√™ investisse US $ 100, hoje esse valor teria aumentado para US $ 5 milh√µes. <br><br>  Durante esse per√≠odo, o Bitcoin mostrou uma din√¢mica bastante agrad√°vel (mesmo levando em conta o colapso relativamente pequeno que ocorreu relativamente recentemente): <br><br><pre><code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- BTC USD prices by two week intervals SELECT time_bucket('14 days', time) as period, last(closing_price, time) AS last_closing_price FROM btc_prices WHERE currency_code = 'USD' GROUP BY currency_code, period ORDER BY period;</span></span></code> </pre> <br><br><img src="https://habrastorage.org/web/49d/186/2cf/49d1862cf5ed48d29190e4f57d3a980d.png" alt="imagem"><br><br>  <font color="#808080"><i>BTC em d√≥lares americanos no fechamento da bolsa nos √∫ltimos 7 anos</i></font> <br><br>  Usando o PostgreSQL, solicitamos leituras de pre√ßos do BTC em intervalos de duas semanas, analisando a taxa de c√¢mbio em rela√ß√£o ao d√≥lar americano nas trocas.  Nota: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">time_bucket</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">last</a> nesta consulta s√£o as fun√ß√µes nativas do TimescaleDB (ausentes no PostgreSQL) usadas para an√°lise de s√©ries temporais. <br><br><h3>  Esperamos que voc√™ n√£o tenha comprado bitcoins em fevereiro de 2014 ... </h3><br>  N√£o se pode dizer, no entanto, que tudo sempre foi tranquilo com o BTC.  Vamos dar uma olhada na volatilidade di√°ria do curso e realizar c√°lculos usando as poderosas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√µes da janela do PostgreSQL</a> : <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- Daily BTC returns by day SELECT time, closing_price / lead(closing_price) over prices AS daily_factor FROM ( SELECT time, closing_price FROM btc_prices WHERE currency_code = 'USD' GROUP BY 1,2 ) sub window prices AS (ORDER BY time DESC);</span></span></code> </pre> <br><br><img src="https://habrastorage.org/web/cd0/1fb/e55/cd01fbe5596e41a59383e1d8a935398f.png" alt="imagem"><br><br>  <font color="#808080"><i>A propor√ß√£o de dividir a taxa BTC / USD do dia atual pela taxa do anterior (per√≠odo de 7 anos)</i></font> <br><br>  Devido √† relativa imaturidade do mercado, a taxa de c√¢mbio do Bitcoin est√° sujeita a altera√ß√µes significativas.  Um aumento est√°vel no valor geralmente indica o sucesso da criptomoeda, mas h√° um per√≠odo de forte crescimento que est√° claramente fora de cena em sua hist√≥ria, o que foi observado no in√≠cio de 2014.  Depois de examinar esse per√≠odo com mais detalhes, notamos grandes saltos entre fevereiro e mar√ßo de 2014.  Os investidores que investiram no BTC no pico do mercado tiveram que esperar bastante, pois a taxa logo se estabilizou e logo alcan√ßou indicadores em que as vendas de bitcoins comprados na √©poca se tornaram um neg√≥cio lucrativo. <br><br><img src="https://habrastorage.org/web/25d/888/adc/25d888adca764136aae22e728be18a06.png" alt="imagem"><br><br>  <font color="#808080"><i>O coeficiente de dividir a taxa BTC / USD do dia atual pela taxa anterior (2014)</i></font> <br><br><h3>  Adeus China, Ol√° Jap√£o </h3><br>  O mercado de criptomoedas √© um fen√¥meno internacional.  Estudando os volumes de negocia√ß√£o em termos de moedas, notamos algo interessante: <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- BTC trading volumes by currency SELECT time_bucket('14 days', time) as period, currency_code, sum(volume_btc) FROM btc_prices GROUP BY currency_code, period ORDER BY period;</span></span></code> </pre> <br><br><img src="https://habrastorage.org/web/57b/84f/a15/57b84fa156024ee7bb155404b63fa01d.png" alt="imagem"><br><br>  <font color="#808080"><i>Volumes de negocia√ß√£o de BTC em v√°rias moedas fiduci√°rias nos √∫ltimos 7 anos (intervalos de duas semanas, barras compostas)</i></font> <br><br>  Em 2014, houve um pequeno salto no valor do Bitcoin na China, causado pela suposta desvaloriza√ß√£o do yuan e o enfraquecimento do mercado dom√©stico de a√ß√µes do pa√≠s.  Isso foi seguido por um boom em 2016 e no in√≠cio de 2017: a moeda chinesa dominou o com√©rcio de bitcoin. <br><br><img src="https://habrastorage.org/web/64b/5cc/e63/64b5cce6329243b5b8280a5e55cbc533.png" alt="imagem"><br><br>  <font color="#808080"><i>Participa√ß√£o de RMB na negocia√ß√£o de bitcoin no √∫ltimo ano (intervalos de duas semanas)</i></font> <br><br>  Ao longo de apenas alguns meses, esse n√∫mero caiu acentuadamente. <br><br>  Qual o motivo?  Chegou a hora de ir al√©m da an√°lise de dados num√©ricos e fazer a boa e velha pesquisa.  Nossas conclus√µes ilustram bem o fato de que √© imposs√≠vel confiar apenas em dados quantitativos para pesquisas de mercado. <br><br>  No in√≠cio de 2017, o Banco Popular da China <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">promulgou</a> regulamentos que restringem as atividades de trocas de criptomoedas.  Em fevereiro, as duas maiores bolsas do pa√≠s (OKCoin e Huobi.com) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">suspenderam a</a> retirada de criptomoeda em troca de moeda estrangeira e, em meados deste ano, o fluxo de transa√ß√µes chinesas havia diminu√≠do.  Ao mesmo tempo, o Jap√£o se tornou o l√≠der em termos de volume de opera√ß√µes com bitcoins.  Chegou ao ponto de o Bitcoin ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reconhecido como</a> moeda legal em abril de 2017. <br><br><img src="https://habrastorage.org/web/3a3/8a1/f9f/3a38a1f9fe5d42caa519f2c9adbab393.png" alt="imagem"><br><br>  <font color="#808080"><i>O volume de BTC em v√°rias moedas ap√≥s uma forte queda na participa√ß√£o das transa√ß√µes de BTC / CNY em 2017.</i></font>  <font color="#808080"><i>BTC / JPY - o novo l√≠der em termos de volume (intervalos de duas semanas)</i></font> <br><br><h3>  E agora vamos pensar no que aconteceria se voc√™ investisse US $ 100 na ETH em janeiro de 2017 ... </h3><br>  Apesar do fato de o "trem de bitcoin ter sa√≠do" em 2010, n√£o h√° motivo para preocupa√ß√£o.  Muitos observadores concordam que, mesmo em meio a sua grande volatilidade, as oscila√ß√µes de pre√ßos do Ethereum parecem ainda mais impressionantes (e a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recente ‚Äúcorre√ß√£o‚Äù</a> √© apenas mais uma confirma√ß√£o).  Vejamos os pre√ßos do Ethereum em bitcoin equivalente (como √© habitual citar): <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ETH prices in BTC by two week intervals SELECT time_bucket('14 days', c.time) as period, last(c.closing_price, c.time) AS last_closing_price_in_btc FROM crypto_prices c WHERE c.currency_code = 'ETH' GROUP BY period ORDER BY period;</span></span></code> </pre> <br><br><img src="https://habrastorage.org/web/322/5ec/418/3225ec4185a34ff2ab9cb3c28f5f7e2e.png" alt="imagem"><br><br>  <font color="#808080"><i>Taxa de ETH para BTC no final do preg√£o nos √∫ltimos 3 anos</i></font> <br><br>  No entanto, como sabemos, o pr√≥prio Bitcoin n√£o difere da estabilidade percept√≠vel, o que reduz a utilidade do gr√°fico acima.  Vejamos os pre√ßos ETH em moedas fiduci√°rias usando as cota√ß√µes di√°rias do BTC para moedas fiduci√°rias.  (Para isso, usaremos as propriedades √∫teis dos JOINs do Postgres e v√°rios filtros sofisticados): <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ETH prices in BTC, USD, EUR, and CNY by two week intervals SELECT time_bucket('14 days', c.time) as period, last(c.closing_price, c.time) AS last_closing_price_in_btc, last(c.closing_price, c.time) * last(b.closing_price, c.time) filter (WHERE b.currency_code = 'USD') AS last_closing_price_in_usd, last(c.closing_price, c.time) * last(b.closing_price, c.time) filter (WHERE b.currency_code = 'EUR') AS last_closing_price_in_eur, last(c.closing_price, c.time) * last(b.closing_price, c.time) filter (WHERE b.currency_code = 'CNY') AS last_closing_price_in_cny FROM crypto_prices c JOIN btc_prices b ON time_bucket('1 day', c.time) = time_bucket('1 day', b.time) WHERE c.currency_code = 'ETH' GROUP BY period ORDER BY period;</span></span></code> </pre> <br><br><img src="https://habrastorage.org/web/b0d/8bd/dcd/b0d8bddcd45d4d02ac38aba4eb0db1bb.png" alt="imagem"><br><br>  <font color="#808080"><i>ETH para tr√™s moedas fiduci√°rias no final do preg√£o nos √∫ltimos 3 anos</i></font> <br><br>  No primeiro ano de sua exist√™ncia, a ETH excedeu qualquer um dos indicadores de crescimento anual do BTC na hist√≥ria deste √∫ltimo.  Um aumento impressionante de 530% no pre√ßo m√©dio de fechamento em rela√ß√£o ao ano anterior √© um bom come√ßo.  Em geral, at√© 2017, a taxa de crescimento agregada para todos esses anos caiu em 2017 em compara√ß√£o com 2016 para 200%.  No entanto, mesmo esse resultado ainda parece impressionante para qualquer outro ativo.  Nos √∫ltimos seis meses, agora os pre√ßos da ETH subiram 3000%.  Portanto, se voc√™ investisse US $ 100 na ETH em janeiro deste ano (quase 7 meses atr√°s), hoje o valor seria de US $ 3 mil. <br><br>  Expressando o valor de ETH em moedas est√°veis ‚Äã‚Äã(USD, EUR, CNY), vemos que todos os tr√™s gr√°ficos t√™m a mesma forma.  Nos √∫ltimos seis meses, um r√°pido crescimento foi claramente observado em todos os equivalentes de moeda, exceto no BTC.  O gr√°fico de taxas ETH / BTC, sendo semelhante aos gr√°ficos de moeda fiduci√°ria, √© muito mais propenso a flutua√ß√µes no valor do BTC.  Como resultado, tentativas de expressar o pre√ßo do ETH no BTC criam uma impress√£o implaus√≠vel da instabilidade do primeiro.  Obviamente, o BTC ainda √© uma moeda muito jovem para consider√°-la base. <br><br><h3>  E as outras 1200 criptomoedas? </h3><br>  Esperamos que esta breve vis√£o geral das tend√™ncias de BTC e ETH permita que voc√™ entenda melhor o mundo ca√≥tico das criptomoedas.  Ent√£o, o que faremos com as outras 1200 criptomoedas? <br><br>  Bem, primeiro, vamos usar nosso conjunto de dados para rastrear sua origem: <br><br>  <i>Nota importante: Nosso conjunto de dados cont√©m informa√ß√µes no momento de sua coleta, que poderiam ter ocorrido ap√≥s a OIC.</i> <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- Currencies sorted by first time we have data for them SELECT ci.currency_code, min(c.time) FROM currency_info ci JOIN crypto_prices c ON ci.currency_code = c.currency_code AND c.closing_price &gt; 0 GROUP BY ci.currency_code ORDER BY min(c.time) DESC;</span></span></code> </pre> <br><pre> <code class="sql hljs"> currency_code | min <span class="hljs-comment"><span class="hljs-comment">---------------+------------------------ CIR | 2017-06-26 20:00:00+00 MDC | 2017-06-26 20:00:00+00 WBTC | 2017-06-26 20:00:00+00 NET | 2017-06-26 20:00:00+00 NAS2 | 2017-06-26 20:00:00+00 TPAY | 2017-06-26 20:00:00+00 MRSA | 2017-06-26 20:00:00+00 XCI | 2017-06-26 20:00:00+00 PAY | 2017-06-19 20:00:00+00 SNM | 2017-06-18 20:00:00+00 LGD | 2017-06-17 20:00:00+00 SNT | 2017-06-16 20:00:00+00 IOT | 2017-06-12 20:00:00+00 QRL | 2017-06-09 20:00:00+00 MGO | 2017-06-09 20:00:00+00 CFI | 2017-06-08 20:00:00+00 VERI | 2017-06-07 20:00:00+00 EQT | 2017-06-07 20:00:00+00 ZEN | 2017-06-05 20:00:00+00 BAT | 2017-05-31 20:00:00+00</span></span></code> </pre> <br>  <font color="#808080"><i>Registro de data e hora do primeiro registro para cada criptomoeda (descendente)</i></font> <br><br>  O mercado est√° em constante evolu√ß√£o e, al√©m disso, a julgar pelo crescimento di√°rio de novas criptomoedas, tamb√©m est√° em constante expans√£o.  A lista publicada acima cont√©m apenas os 20 tokens mais recentes em 26 de junho e permite que voc√™ tenha uma id√©ia de quantas novas criptomoedas aparecem a cada semana. <br><br>  Vamos calcular o n√∫mero de novas criptomoedas que aparecem todos os dias com base na primeira data de aparecimento das informa√ß√µes de pre√ßo: <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- Number of new currencies with data sorted by day SELECT day, COUNT(code) FROM ( SELECT min(c.time) AS day, ci.currency_code AS code FROM currency_info ci JOIN crypto_prices c ON ci.currency_code = c.currency_code AND c.closing_price &gt; 0 GROUP BY ci.currency_code ORDER BY min(c.time) )a GROUP BY day ORDER BY day DESC;</span></span></code> </pre> <br><br><img src="https://habrastorage.org/web/924/cba/b33/924cbab33ac749c4a916ffcbb1be71a2.png" alt="imagem"><br><br>  <font color="#808080"><i>O n√∫mero de novas criptomoedas por dia nos √∫ltimos 4 anos</i></font> <br><br><img src="https://habrastorage.org/web/e71/2ff/44f/e712ff44f8d3400fa5931ee4b81a6e16.png" alt="imagem"><br><br>  <font color="#808080"><i>O n√∫mero de novas criptomoedas por dia para o ano atual</i></font> <font color="#808080"><i><br></i></font> <br><pre> <code class="sql hljs"> day | count <span class="hljs-comment"><span class="hljs-comment">------------------------+------- 2017-06-26 20:00:00+00 | 8 2017-06-19 20:00:00+00 | 1 2017-06-18 20:00:00+00 | 1 2017-06-17 20:00:00+00 | 1 2017-06-16 20:00:00+00 | 1 2017-06-12 20:00:00+00 | 1 2017-06-09 20:00:00+00 | 2 2017-06-08 20:00:00+00 | 1 2017-06-07 20:00:00+00 | 2 2017-06-05 20:00:00+00 | 1 2017-05-31 20:00:00+00 | 5 2017-05-28 20:00:00+00 | 29 2017-05-27 20:00:00+00 | 13 2017-05-26 20:00:00+00 | 32 2017-05-25 20:00:00+00 | 303 2017-05-16 20:00:00+00 | 1 2017-05-15 20:00:00+00 | 7</span></span></code> </pre> <br>  <font color="#808080"><i>O n√∫mero de novas criptomoedas por datas, estat√≠sticas di√°rias (descendente)</i></font> <br><br>  Quando solicitamos informa√ß√µes sobre a primeira apari√ß√£o dos dados de criptomoeda (para rastrear sua "idade"), torna-se percept√≠vel que o mercado n√£o √© apenas um grupo de investidores, existe outra categoria de seus participantes - os criadores de ativos digitais.  Recentemente, de 25 a 28 de maio, de acordo com nossos dados de recrutamento, houve um grande fluxo de novas moedas - mais de 300 novos tokens em menos de uma semana.  (Como nosso conjunto registra apenas informa√ß√µes de pre√ßos em criptomoedas, as informa√ß√µes em sua apar√™ncia podem n√£o corresponder √†s datas da OIC.) <br><br><h3>  L√≠deres de criptomoeda e mundos atraentes </h3><br>  Atualmente, existem tantas criptomoedas que tornam dif√≠cil distinguir sensato de duvidoso.  Como voc√™ pode determinar quais merecem aten√ß√£o?  Aqui est√° uma das m√©tricas: o volume total de transa√ß√µes de c√¢mbio na semana passada. <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- 1200+ crypto currencies by total transaction volume (in btc) over the last month SELECT 'BTC' as currency_code, sum(b.volume_currency) as total_volume_in_usd FROM btc_prices b WHERE b.currency_code = 'USD' AND now() - date(b.time) &lt; INTERVAL '8 day' GROUP BY b.currency_code UNION SELECT c.currency_code as currency_code, sum(c.volume_btc) * avg(b.closing_price) as total_volume_in_usd FROM crypto_prices c JOIN btc_prices b ON date(c.time) = date(b.time) WHERE c.volume_btc &gt; 0 AND b.currency_code = 'USD' AND now() - date(b.time) &lt; INTERVAL '8 day' AND now() - date(c.time) &lt; INTERVAL '8 day' GROUP BY c.currency_code ORDER BY total_volume_in_usd DESC;</span></span></code> </pre> <br><pre> <code class="sql hljs"> currency_code | total_volume_in_usd <span class="hljs-comment"><span class="hljs-comment">---------------+--------------------- BTC | 2040879023.54 ETH | 1617388472.94011 LTC | 287613541.293571 XRP | 269417667.514443 ETC | 165712729.612886 ANS | 126377042.5269 SC | 111623857.796786 DASH | 86875922.3588143 ZEC | 78836728.2129428 BTS | 69459051.5958428</span></span></code> </pre> <br>  <font color="#808080"><i>Volume total de transa√ß√µes das 10 principais criptomoedas em d√≥lares americanos na √∫ltima semana (decrescente)</i></font> <br><br><img src="https://habrastorage.org/web/948/cd0/c8b/948cd0c8b6494ee79140bb8041f31c78.png" alt="imagem"><br><br>  <font color="#808080"><i>Volume total de transa√ß√µes das 10 principais criptomoedas em d√≥lares americanos na √∫ltima semana (decrescente)</i></font> <br><br>  <i>Um pequeno esclarecimento para essa solicita√ß√£o: os dados no BTC e outras criptomoedas vivem em tabelas diferentes.</i>  <i>Portanto, temos que combinar essas duas consultas com UNION.</i>  <i>Anteriormente, tamb√©m decidimos que queremos receber cota√ß√µes em moedas fiduci√°rias (por exemplo, em d√≥lares), e n√£o no BTC.</i>  <i>Portanto, a segunda metade da solicita√ß√£o combina os dados com a tabela BTC para converter BTC em USD.</i> <br><br>  Curiosamente, o Bitcoin e o Ethereum se tornaram l√≠deres em termos de volume de opera√ß√µes.  Mas os seguintes participantes do desfile - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Litecoin (LTC)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ripple (XRP)</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ethereum Classic (ETC)</a> s√£o quase iguais.  Presente no mercado h√° cinco anos, o Litecoin √© quase id√™ntico ao Bitcoin e √© frequentemente considerado como um participante importante no mercado.  O Ripple, que se posiciona como uma moeda banc√°ria para representantes do mercado comercial internacional e trabalha para um p√∫blico mais espec√≠fico, tamb√©m √© considerado uma moeda promissora e crescente.  Tamb√©m √© interessante que os cinco primeiros tenham n√£o apenas ETH, mas tamb√©m ETC, o que sugere que o mercado hoje est√° fortemente focado no Ethereum. <br><br><h3>  As criptomoedas mais lucrativas </h3><br>  Outra maneira de "riscar" uma longa lista de criptomoedas √© analisar sua lucratividade, por exemplo, um indicador do lucro di√°rio total.  Nosso conjunto cont√©m dados de pre√ßos para mais de 1200 criptomoedas.  Se voc√™ observar atentamente o maior aumento da taxa por dia, poder√° identificar os l√≠deres do com√©rcio intradi√°rio. <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- Top crypto by daily return, by day SELECT time, last(currency_code,daily_factor), max(daily_factor) FROM ( SELECT currency_code, time, closing_price, lead(closing_price) over (partition BY currency_code ORDER BY time DESC) AS prev_day_closing_price, closing_price / lead(closing_price) over (partition BY currency_code ORDER BY time DESC) AS daily_factor FROM crypto_prices) q GROUP BY time ORDER BY time DESC;</span></span></code> </pre> <br><pre> <code class="sql hljs"> time | last | daily_return <span class="hljs-comment"><span class="hljs-comment">------------------------+--------+------------------ 2017-06-26 20:00:00+00 | CIN | 40.1428571428571 2017-06-25 20:00:00+00 | KC | 38 2017-06-24 20:00:00+00 | VOYA | 14.2747252747253 2017-06-23 20:00:00+00 | PAY | 3.18506315211422 2017-06-22 20:00:00+00 | YOVI | 119.607843137255 2017-06-21 20:00:00+00 | ION | 7.97665369649805 2017-06-20 20:00:00+00 | TES | 5.25157232704403 2017-06-19 20:00:00+00 | KNC | 150000 2017-06-18 20:00:00+00 | ZNY | 22.5217391304348 2017-06-17 20:00:00+00 | YOVI | 22.0590746115759 2017-06-16 20:00:00+00 | LTD | 9.50207468879668 2017-06-15 20:00:00+00 | AMIS | 168758.782201405 2017-06-14 20:00:00+00 | JANE | 6 2017-06-13 20:00:00+00 | YOVI | 690.636254501801 2017-06-12 20:00:00+00 | U | 5.21452145214522 2017-06-11 20:00:00+00 | JANE | 6 2017-06-10 20:00:00+00 | WGO | 3.58744394618834 2017-06-09 20:00:00+00 | BNT | 5000 2017-06-08 20:00:00+00 | XNC | 52.7704485488127 2017-06-07 20:00:00+00 | CBD | 14.3243243243243 2017-06-06 20:00:00+00 | CC | 72 2017-06-05 20:00:00+00 | BLAZR | 7.38461538461538 2017-06-04 20:00:00+00 | GREXIT | 13.0833333333333 2017-06-03 20:00:00+00 | EPY | 4.29880478087649 2017-06-02 20:00:00+00 | YOVI | 1257.67790262172 2017-06-01 20:00:00+00 | FCN | 8.57142857142857 2017-05-31 20:00:00+00 | EPY | 348.611111111111 2017-05-30 20:00:00+00 | BST | 14.1441860465116 2017-05-29 20:00:00+00 | FCN | 45.3086419753086 2017-05-28 20:00:00+00 | NOO | 56536.231884058</span></span></code> </pre> <br>  <font color="#808080"><i>As maiores taxas de diferen√ßa intradi√°ria de valor de criptomoeda (data descendente)</i></font> <br><br>  Vamos definir a criptomoeda com o maior indicador de rentabilidade di√°ria.  Para calcular o lucro di√°rio, usamos novamente a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√£o window</a> e, para procurar a criptomoeda que gerou mais receita a cada dia, usamos a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√∫ltima</a> fun√ß√£o do conjunto TimescaleDB. <br><br>  A conclus√£o dos √∫ltimos tr√™s meses mostra a superioridade quantitativa do AMIS (um aumento de 168 vezes em 15 de junho).  Essa criptomoeda mostrou o maior aumento em 15 dias diferentes.  No entanto, olhando mais de perto, observamos que o crescimento elevado se deve a flutua√ß√µes de pre√ßos igualmente altas: o pre√ßo da AMIS geralmente volta a zero ap√≥s cada aumento. <br><br><img src="https://habrastorage.org/web/016/982/5b4/0169825b42f84e06b2199bf0c0cf1a95.png" alt="imagem"><br><br>  <font color="#808080"><i>Pre√ßo de fechamento da AMIS nos √∫ltimos cinco meses</i></font> <br><br>  Outro l√≠der desta amostra, YOVI, apresentou o melhor resultado tr√™s vezes, mas tamb√©m est√° sujeito a tend√™ncias n√£o confi√°veis ‚Äã‚Äãsemelhantes √†s do AMIS: <br><br><img src="https://habrastorage.org/web/dd4/4ce/ad4/dd44cead467f48498ef53fcb8f970474.png" alt="imagem"><br><br>  <font color="#808080"><i>Pre√ßo de fechamento do dia da YOVI nos √∫ltimos cinco meses</i></font> <br><br>  Apesar da instabilidade desse par de tend√™ncias, elas parecem mais promissoras em compara√ß√£o com a ETH, cujo valor caiu constantemente no primeiro ano de sua exist√™ncia (2015): <br><br><img src="https://habrastorage.org/web/381/7de/fb7/3817defb78224a288dddb8fb549b0f84.png" alt="imagem"><br><br>  <font color="#808080"><i>Pre√ßo de fechamento do dia da ETH em 2015</i></font> <br><br>  <i>(Isen√ß√£o de responsabilidade repetida: o TimescaleDB n√£o oferece suporte a nenhuma dessas moedas criptogr√°ficas e n√£o √© respons√°vel por seu investimento nelas e por eventuais perdas associadas a elas.)</i> <br><br><h3>  Acontece que o dinheiro est√° crescendo ... nas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√°rvores Merkle</a> ? </h3><br>  Neste artigo, tiramos v√°rias conclus√µes de um conjunto de dados de criptomoedas aberto, demonstrando os pontos fortes do PostgreSQL e do TimescaleDB.  No entanto, deve-se lembrar que o mercado de criptomoedas inevitavelmente mudar√° no pr√≥ximo m√™s, na pr√≥xima semana ou at√© amanh√£. <br><br>  No entanto, se voc√™ deseja estudar este conjunto de forma independente e conduzir sua an√°lise, as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instru√ß√µes</a> apropriadas para baixar dados e instalar o TimescaleDB est√£o dispon√≠veis ao seu servi√ßo. <br><br>  Se voc√™ quiser saber mais sobre o TimescaleDB e como ele pode melhorar a efici√™ncia do PostgreSQL para trabalhar com s√©ries temporais, recomendamos que voc√™ se familiarize com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">publica√ß√£o t√©cnica</a> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/4bd/bf6/597/4bdbf659775744b1bdbb4d8a00a0a980.png" alt="imagem"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt404547/">https://habr.com/ru/post/pt404547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt404535/index.html">Envelhecimento e Menopausa - Dois Programas de Controle de Popula√ß√£o</a></li>
<li><a href="../pt404537/index.html">Odontologia Digital - Oficina Top 3D Shop</a></li>
<li><a href="../pt404539/index.html">Outra casa inteligente em v√°rias partes. Conclus√£o</a></li>
<li><a href="../pt404541/index.html">Ornit√≥ptero. Respostas √†s perguntas</a></li>
<li><a href="../pt404543/index.html">M√∫sica ou n√£o m√∫sica: o que fazer com o pr√≥ximo leitor de bolso mais emblem√°tico? O que o povo vai dizer?</a></li>
<li><a href="../pt404549/index.html">Que tipo de doen√ßa: c√¢ncer</a></li>
<li><a href="../pt404553/index.html">"Space Nation" Asgardia lan√ßar√° seu primeiro sat√©lite neste ver√£o</a></li>
<li><a href="../pt404555/index.html">An√°lise do Telefone IP Yealink SIP-T27G</a></li>
<li><a href="../pt404557/index.html">O caminh√£o Progress MS-06 entregar√° √† ISS em 16 de junho de 2017: revis√£o de cargas, experimentos e tarefas</a></li>
<li><a href="../pt404559/index.html">O desafio para crian√ßas de cinco anos que se tornou "viral"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>