<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐘 ✌🏻 👩🏾‍🤝‍👩🏻 EJTAG: atraksi untuk peretas-2 👸 👐🏼 ☣️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam publikasi EJTAG saya sebelumnya : daya tarik bagi peretas dan Black Swift: menggunakan EJTAG dipertimbangkan , cara termudah untuk menggunakan E...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>EJTAG: atraksi untuk peretas-2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383505/"><img src="https://habrastorage.org/files/ac4/ecc/125/ac4ecc125c314e7682edb1a9e0fb99ed.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam publikasi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EJTAG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya sebelumnya </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">: daya tarik bagi peretas</font></a><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Black Swift: menggunakan EJTAG dipertimbangkan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cara termudah untuk menggunakan EJTAG dipertimbangkan - memuat ke dalam RAM dan meluncurkan program pengguna. </font><font style="vertical-align: inherit;">Namun, kemampuan EJTAG tidak terbatas pada hal ini. </font><font style="vertical-align: inherit;">Publikasi ini menjelaskan cara mengatur debug kode sederhana menggunakan EJTAG, menggunakan alat freeware openocd dan GDB.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya diminta untuk menulis publikasi ini dengan sepucuk surat dari seorang pembaca yang meminta saya untuk tetap anonim dan yang meminta saya untuk membantu - perangkat berbasis AR9344 tidak bisa di-boot (tergantung pada tahap inisialisasi U-boot) - bagaimana saya bisa mengetahui apa masalahnya dengan EJTAG? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena saya tidak memiliki perangkat yang didasarkan pada AR9344 yang ada, tetapi papan Black Swift Pro berdasarkan chip AR9331 yang terkait ternyata menjadi narasi dengan memperhatikannya. Saya pikir perubahan yang harus dilakukan untuk AR9344 tidak signifikan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
beralih </font><font style="vertical-align: inherit;">ke pernyataan masalah: Ada </font><font style="vertical-align: inherit;">papan Black Swift Pro, yang kami hubungkan menggunakan openocd melalui EJTAG dan menempatkan prosesor ke mode berhenti.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIPERLUKAN untuk menjalankan beberapa instruksi prosesor secara berurutan, berhenti setelah setiap instruksi dijalankan dan, jika perlu, memeriksa isi RAM, boot ROM, register pengontrol periferal atau register prosesor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengatasi masalah, saya melihat setidaknya dua pendekatan:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sederhana - hanya menggunakan openocd - fungsionalitas dasar untuk melakukan tindakan yang diperlukan sudah ada di openocd. </font><font style="vertical-align: inherit;">Hanya perlu untuk bisa menggunakannya;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kompleks - dengan bantuan bundel openocd + GDB - pengguna akan mengontrol proses eksekusi instruksi prosesor melalui GDB, dan openocd akan mengonversi permintaan GDB menjadi perintah EJTAG.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang pertimbangkan kedua solusi secara lebih rinci.</font></font><br>
<blockquote>    ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Black Swift:  EJTAG</a>.<br>
</blockquote><br>
<br>
<h3> 1:   openocd</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mereka yang membaca publikasi saya sebelumnya tentang EJTAG harus ingat bahwa openocd muncul di dalamnya sebagai pelaksana skrip (file konfigurasi) yang bodoh, yang tampaknya bekerja dalam mode batch dan tidak menyediakan interaksi pengguna. Namun, tidak. Bahkan, ketika perangkat lunak openocd sedang berjalan, dimungkinkan untuk "meminta" untuk mengeksekusi perintah menggunakan antarmuka baris perintah. Untuk mengakses antarmuka baris perintah, openocd meluncurkan server telnet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, port TCP 4444 akan digunakan untuk server telnet. Jika perlu, nomor port TCP dapat diubah menggunakan opsi </font></font><code>telnet_port</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(lihat contoh di bawah). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita coba lacak bootloader dari papan Black Swift dengan openocd. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh File Konfigurasi</font></font><code>black-swift-trace.cfg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk openocd, yang memaksa openocd untuk server telnet untuk menggunakan port 4455:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sumber [temukan antarmuka / ftdi / tumpa.cfg]</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 adapter_khz 6000</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 sumber [temukan black-swift.cfg]</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 telnet_port 4455</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 init</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 berhenti</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menjalankan openocd 0.9.0 sebagai root terlihat seperti ini:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> # openocd -f black-swift-trace.cfg</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Open On-Chip Debugger 0.9.0 (2015-05-28-17: 08)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Berlisensi di bawah GNU GPL v2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Untuk laporan bug, baca</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         http://openocd.org/doc/doxygen/bugs.html</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 tidak ada yang terpisah</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 kecepatan adaptor: 6000 kHz</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Info: memilih otomatis transportasi sesi pertama yang tersedia "jtag". </font><font style="vertical-align: inherit;">Untuk mengganti gunakan 'transport, pilih &lt;transport&gt;'.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Kesalahan: tidak ada perangkat yang ditemukan</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Kesalahan: tidak dapat membuka perangkat ftdi dengan vid 0403, pid 8a98, deskripsi '*' dan serial '*'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Info: kecepatan clock 6000 kHz</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Info: JTAG ketuk: ar9331.cpu ketuk / perangkat ditemukan: 0x00000001 (mfg: 0x000, bagian: 0x0000, ver: 0x0)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 negara target: dihentikan</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 target dihentikan dalam mode MIPS32 karena permintaan debug, pc: 0xbfc00000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 negara target: dihentikan</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 target dihentikan dalam mode MIPS32 karena langkah-tunggal, pc: 0xbfc00404</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita dapat membuka jendela terminal lain dan terhubung ke server telnet openocd menggunakan program </font></font><code>telnet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ telnet localhost 4455</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Mencoba :: 1 ...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Mencoba 127.0.0.1 ...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Terhubung ke localhost.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Karakter melarikan diri adalah '^]'.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Buka debugger on-chip</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 &gt;</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daftar semua perintah openocd mudah diperoleh dengan perintah </font></font><code>help</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk pelaksanaan instruksi prosesor langkah demi langkah, perintah </font></font><code>step</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berikut </font><font style="vertical-align: inherit;">berguna bagi kami </font><font style="vertical-align: inherit;">:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> langkah [alamat]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       jalankan satu instruksi di alamat yang ditentukan oleh register</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       penghitung perintah (PC). </font><font style="vertical-align: inherit;">Jika parameter alamat ditentukan, maka</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       Instruksi akan dieksekusi dimulai dengan alamat alamat.</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eksekusi instruksi prosesor secara bertahap di konsol terlihat seperti ini:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; langkah 0xbfc00400</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 negara target: dihentikan</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 target dihentikan dalam mode MIPS32 karena langkah-tunggal, pc: 0xbfc00404</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 &gt; langkah</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 negara target: dihentikan</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 target dihentikan dalam mode MIPS32 karena langkah-tunggal, pc: 0xbfc00408</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 &gt; langkah</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 negara target: dihentikan</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 target dihentikan dalam mode MIPS32 karena langkah-tunggal, pc: 0xbfc0040c</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perintah openocd berikut mungkin juga berguna:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reg [(register_number | register_name) [(nilai | 'force')]]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       baca atau tulis nilai register prosesor.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       Memanggil reg tanpa parameter menghasilkan output dari semua register.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       Jika parameter 'force' digunakan, terpaksa</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       mengurangi register dari prosesor (bukannya mengeluarkan cache</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       nilai).</font></font><font></font>
 <font></font>
 mwb ['phys'] address value [count]<font></font>
          address ,     value.<font></font>
          phys,   address —  ,<font></font>
          — .<font></font>
          count    address  <font></font>
           count,    <font></font>
         value.<font></font>
 <font></font>
 mwh ['phys'] address value [count]<font></font>
         mwb,     16- .<font></font>
 <font></font>
 mww ['phys'] address value [count]<font></font>
         mwb,     32- .<font></font>
 <font></font>
 mdb ['phys'] address [count]<font></font>
               address.<font></font>
          phys,   address —  ,<font></font>
          — .<font></font>
          count        <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       array pada alamat alamat, jumlah byte.</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 mdh ['phys'] address [count]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       perintahnya mirip dengan mdb, tetapi kata 16-bit dibaca sebagai ganti byte.</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 alamat mdw ['phys'] [hitung]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       perintahnya mirip dengan mdb, tetapi kata 32-bit dibaca sebagai ganti byte.</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, sayangnya, versi terbaru (pada saat penulisan ini) dari openocd 0.9.0 tidak dapat membongkar instruksi prosesor dengan arsitektur MIPS, meskipun </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada pembongkaran untuk prosesor dengan arsitektur ARM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kurangnya disassembler membuat eksekusi instruksi prosesor langkah demi langkah secara langsung dengan openocd menjadi sangat tidak nyaman. </font><font style="vertical-align: inherit;">Anda dapat meningkatkan tingkat kenyamanan jika Anda menggunakan GDB.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solusi 2: gunakan bundel openocd + GDB</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam bundel openocd + GDB, peran didistribusikan sebagai berikut: pengguna berkomunikasi dengan GDB, yang menyediakan antarmuka yang nyaman untuk debugging, mengabstraksi dari mekanisme di mana pelaksanaan instruksi dikontrol, dan openocd melakukan tugas langsung mengendalikan prosesor sesuai dengan instruksi GDB. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan GDB untuk mengontrol pelaksanaan instruksi pada prosesor MIPS melalui EJTAG memiliki beberapa keunggulan dibandingkan openocd:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seperti yang disebutkan di atas, disassembler untuk arsitektur MIPS dibangun ke GDB;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dimungkinkan untuk menggunakan informasi debug dari sumber; </font><font style="vertical-align: inherit;">misalnya, jika Anda men-debug program-C Anda sendiri, maka GDB akan dapat menunjukkan baris kode-C mana yang saat ini dieksekusi dan merinci keadaan variabel program secara tepat, dan bukan sel-sel memori dengan alamat misterius;</font></font></li>
<li>   openocd  GDB   GDB Remote Serial Protocol;  qemu    ,                ,              — GDB;</li>
<li>,    GDB      TAB.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harus diingat bahwa GDB beroperasi dengan konsep tingkat tinggi, dan openocd dipaksa untuk bekerja dengan peralatan yang ada dan tidak selalu. GDB Wishlist dapat diimplementasikan secara efektif menggunakan EJTAG. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, pengguna menginstruksikan GDB untuk menetapkan breakpoint pada alamat yang ditentukan, instruksi ini berlaku untuk openocd, tetapi untuk prosesor MIPS, openocd memiliki setidaknya dua cara untuk menetapkan breakpoint:</font></font><br>
<ul>
<li>        sdbbp,        , openocd  sdbbp   ,    sdbbp     ,   .    software breakpoint.  ,          .</li>
<li>         .          .     , hardware breakpoint, .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun dalam Protokol Serial Remote GDB terdapat perbedaan antara breakpoint perangkat keras dan breakpoint perangkat lunak (lihat paket z dan z0 dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uraian protokol</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), dan GDB menyediakan opsi yang sesuai untuk memilih jenis breakpoint, namun mungkin ada pembatasan penggunaan titik pada prosesor tertentu. gangguan dari satu jenis atau yang lain. Dengan demikian, openocd memiliki opsi </font></font><code>gdb_breakpoint_override</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang memungkinkan Anda untuk memaksa salah satu dari dua metode yang dijelaskan untuk mengatur breakpoints. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghubungkan debugger GDB, openocd mengimplementasikan server GDB, yang secara default menggunakan port TCP 3333. Jika perlu, nomor port TCP dapat diubah menggunakan opsi </font></font><code>gdb_port</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk terhubung ke server GDB openocd yang mengontrol prosesor MIPS, kami membutuhkan versi khusus GDB dengan dukungan MIPS. </font><font style="vertical-align: inherit;">Saya berasumsi bahwa pembaca menggunakan komputer berbasis x86 / amd64 yang menjalankan Debian Linux untuk menjalankan openocd dan GDB, menggunakan mips-linux-gnu-gdb dari paket Sourcery CodeBench. </font><font style="vertical-align: inherit;">Tentang cara menginstal paket ini ditulis di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Anda hanya perlu memperkenalkan amandemen, bahwa pada saat menulis baris ini, yang terakhir adalah versi Sourcery CodeBench mips-2015.05-18-18, dirilis pada Mei 2015, Anda dapat mengunduh arsip di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini menggunakan tautan ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita coba menggunakan bundel openocd + GDB dalam praktiknya. </font><font style="vertical-align: inherit;">Jalankan openocd:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> # openocd -f run-u-boot_mod-trace.cfg \</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 &gt; -c "gdb_breakpoint_override hard" -c "step 0xbfc00400"</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dua perintah terakhir untuk openocd akan memberikan yang berikut:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">breakpoint perangkat keras akan digunakan, terlepas dari apa yang dibayangkan GDB di sana (alamat 0xbfc0xxxx sesuai dengan ROM, sehingga breakpoint perangkat lunak tidak akan berfungsi);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu instruksi akan dieksekusi dari alamat 0xbfc00400, setelah itu prosesor akan berhenti lagi.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buka jendela terminal lain dan luncurkan GDB:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ /opt/mips-2015.05/bin/mips-linux-gnu-gdb</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GNU gdb (Sourcery CodeBench Lite 2015.05-18) 7.7.50.20140217-cvs</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Hak Cipta (C) 2014 Free Software Foundation, Inc.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Lisensi GPLv3 +: GNU GPL versi 3 atau lebih tinggi &lt;http://gnu.org/licenses/gpl.html&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ini adalah perangkat lunak gratis: Anda bebas untuk mengubah dan mendistribusikannya kembali.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 TIDAK ADA GARANSI, sejauh diizinkan oleh hukum. </font><font style="vertical-align: inherit;">Ketik "tampilkan penyalinan"</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 dan "tunjukkan garansi" untuk detailnya.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GDB ini dikonfigurasi sebagai "--host = i686-pc-linux-gnu --target = mips-linux-gnu".</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ketik "tampilkan konfigurasi" untuk detail konfigurasi.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Untuk instruksi pelaporan bug, silakan lihat:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 &lt;https://sourcery.mentor.com/GNUToolchain/&gt;.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Temukan manual GDB dan sumber dokumentasi lainnya secara online di:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 &lt;http://www.gnu.org/software/gdb/documentation/&gt;.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Untuk bantuan, ketik "bantuan".</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ketik "kata yang tepat" untuk mencari perintah yang terkait dengan "kata".</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 (gdb)</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kami jelaskan GDB jenis prosesor yang akan kami gunakan, kami meminta Anda untuk membongkar instruksi yang dapat dieksekusi berikutnya, prosesor, dan akhirnya, terhubung ke server GDB openocd:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (gdb) mengatur arsitektur mips: isa32r2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Arsitektur target diasumsikan sebagai mips: isa32r2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 (gdb) atur endian besar</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Target diasumsikan sebagai big endian</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 (gdb) aktifkan disassemble-next-line</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 (gdb) target jarak jauh: 3333</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Remote debugging menggunakan: 3333</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 0xbfc00404 di ?? </font><font style="vertical-align: inherit;">()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 =&gt; 0xbfc00404: 40 80 08 00 mtc0 nol, c0_random</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menjalankan satu instruksi prosesor di GDB, sebuah perintah digunakan </font></font><code>stepi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mari kita coba mengikuti beberapa instruksi dari prosesor dan jangan bingung dengan peringatan GDB tentang kurangnya informasi debug (tidak dapat menemukan awal fungsi), tidak ada tempat untuk mendapatkan informasi ini dalam situasi ini.</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (gdb) stepi</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 peringatan: GDB tidak dapat menemukan awal fungsi di 0xbfc00408.</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     GDB tidak dapat menemukan awal fungsi di 0xbfc00408</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 dan dengan demikian tidak dapat menentukan ukuran bingkai tumpukan fungsi itu.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ini berarti bahwa GDB mungkin tidak dapat mengakses frame tumpukan itu, atau</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 bingkai di bawahnya.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     Masalah ini kemungkinan besar disebabkan oleh penghitung program yang tidak valid atau</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 tumpukan penunjuk.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     Namun, jika Anda berpikir GDB harus mencari lebih jauh lagi</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 dari 0xbfc00408 untuk kode yang terlihat seperti awal dari a</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 fungsi, Anda dapat meningkatkan jangkauan pencarian menggunakan `set</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 perintah heuristic-fence-post '.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 0xbfc00408 di ?? </font><font style="vertical-align: inherit;">()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 =&gt; 0xbfc00408: 40 80 10 00 mtc0 nol, c0_entrylo0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 (gdb) stepi</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 peringatan: GDB tidak dapat menemukan awal fungsi di 0xbfc0040c.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 0xbfc0040c pada ?? </font><font style="vertical-align: inherit;">()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 =&gt; 0xbfc0040c: 40 80 18 00 mtc0 nol, c0_entrylo1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 (gdb) stepi</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 peringatan: GDB tidak dapat menemukan awal fungsi di 0xbfc00410.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 0xbfc00410 di ?? </font><font style="vertical-align: inherit;">()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 =&gt; 0xbfc00410: 40 80 20 00 mtc0 nol, c0_context</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 (gdb)</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang baca kata 32-bit di 0xbfc00408:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (gdb) p / x * 0xbfc00408</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 $ 1 = 0x40801000</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mencetak status register prosesor, gunakan perintah </font></font><code>info registers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (gdb) register info</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           nol pada v0 v1 a0 a1 a2 a3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  R0 00000000 37c688e2 22b15a00 28252198 0c12d319 4193c014 84e49102 06193640</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             t0 t1 t2 t3 t4 t5 t6 t7</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  R8 00000002 9f003bc0 92061301 1201c163 31d004a0 92944911 ac031248 b806001c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             s0 s1 s2 s3 s4 s5 s6 s7</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  R16 8bc81985 402da011 c94d2454 88d5a554 81808e0d cc445151 4401a826 50020402</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             t8 t9 k0 k1 gp sp s8 ra</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  R24 01c06b30 01000000 10000004 fffffffe 9f003bc0 54854eab 329d626b bfc004b4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         status lo hi badvaddr menyebabkan pc</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       00400004 00244309 b9ca872c ed6a1f00 60808350 bfc00410</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           fcsr fir</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       00000000 00000000</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GDB adalah alat canggih dengan sejumlah besar perintah dan opsi; </font><font style="vertical-align: inherit;">untuk berkenalan lebih dekat dengan GDB, saya merujuk pembaca ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi GDB resmi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menginisialisasi Pengontrol RAM AR9331</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat bagaimana GDB dapat memecahkan masalah tertentu: dengan menelusuri eksekusi U-boot pada papan Black Swift, kami akan mengidentifikasi urutan entri dalam register pengontrol RAM, yang mengarah ke inisialisasi. </font><font style="vertical-align: inherit;">Mendeteksi urutan seperti itu sangat berguna jika kita ingin menjalankan program di Black Swift menggunakan openocd bypassing U-boot. </font><font style="vertical-align: inherit;">Juga, urutan inisialisasi ini berguna ketika membuat bootloader alternatif untuk Black Swift. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jalankan openocd (seperti di bagian sebelumnya):</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> # openocd -f run-u-boot_mod-trace.cfg \</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 &gt; -c "gdb_breakpoint_override hard" -c "step 0xbfc00400"</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menjalankan GDB, buat skrip </font></font><code>bs-u-boot-trace-gdb.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atur arsitektur mips: isa32r2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 atur endian besar</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 aktifkan disassemble-next-line</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 target jarak jauh: 3333</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 nonaktifkan pagination</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 atur file logging bs_gdb.log</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 aktifkan logging</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 sementara $ pc! = (void (*) ()) 0x9f002ab0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         stepi</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         register info</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 akhir</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 melepaskan</font></font><font></font>
 <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 berhenti</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibandingkan dengan contoh di bagian sebelumnya, skrip ini menyebabkan GDB untuk menduplikasi output ke file </font></font><code>bs_gdb.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan menonaktifkan pagination (konfirmasi halaman balik oleh pengguna), dan kemudian mulai menjalankan instruksi prosesor secara siklikal dan menampilkan status register prosesor setelah setiap instruksi. </font><font style="vertical-align: inherit;">Ketika register PC (register alamat dari instruksi berikut) mencapai nilai 0x9f002ab0, GDB terputus dari openocd dan berhenti bekerja. </font><font style="vertical-align: inherit;">Dengan demikian, pada akhir GDB, file </font></font><code>bs_gdb.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan jejak penuh dari eksekusi instruksi prosesor </font><font style="vertical-align: inherit;">akan dibuat </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peluncuran GDB adalah sebagai berikut:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ /opt/mips-2015.05/bin/mips-linux-gnu-gdb -x bs-u-boot-trace-gdb.conf</font></font></pre></blockquote><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan: skrip </font></font><code>bs-u-boot-trace-gdb.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kemungkinan besar tidak akan berfungsi segera setelah daya diterapkan ke board, karena u-boot_mod juga akan mengatur ulang kesalahan anti-misteri AR9331, yang akan menyebabkan skrip berhenti dijalankan. </font><font style="vertical-align: inherit;">Dalam hal ini, hentikan openocd dan GDB, kemudian jalankan openocd dan GDB lagi.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang semuanya tentang yang kecil - Anda harus memilih </font></font><code>bs_gdb.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua instruksi tulis </font><font style="vertical-align: inherit;">dari file </font></font><code>sw</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(simpan kata, yaitu, tulis nilai 32-bit). </font><font style="vertical-align: inherit;">Register dari pengontrol memori AR9331 berukuran 32-bit, sehingga instruksi lain dari keluarga toko dapat diabaikan dengan aman. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena disassembler hanya menghasilkan nama-nama argumen register instruksi</font></font><code>sw</code><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> =&gt; 0xbfc004ec: ad f9 00 00 sw t9,0 (t7)</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tetapi tidak nilainya, tidak cukup </font></font><code>bs_gdb.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk memilih semua baris yang berisi pernyataan sw </font><font style="vertical-align: inherit;">dari file </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Untuk menentukan nilai apa yang ditulis ke alamat mana menggunakan sw, file harus dikenai </font></font><code>bs_gdb.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemrosesan tambahan. </font><font style="vertical-align: inherit;">Pemrosesan dapat dilakukan menggunakan skrip parse_gdb_output.pl:</font></font><br>
<pre><code class="perl hljs"> <span class="hljs-comment">#!/usr/bin/perl -w</span><font></font>
 <font></font>
 <span class="hljs-keyword">my</span> %r;<font></font>
 <font></font>
 <span class="hljs-keyword">foreach</span> $i (<span class="hljs-string">qw(zero at v0 v1 a0 a1 a2 a3 t0 t1 t2 t3 t4 t5 t6 t7
        s0 s1 s2 s3 s4 s5 s6 s7 t8 t9 k0 k1 gp sp s8 ra)</span>) {<font></font>
    $r{$i} = <span class="hljs-string">"none"</span>;<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">parse_reg</span>($)
 </span>{<font></font>
    $_ = $_[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^ R/</span>) {
        <span class="hljs-keyword">my</span> @fields = <span class="hljs-keyword">split</span> <span class="hljs-keyword">m</span><span class="hljs-string">'\s+'</span>;
        <span class="hljs-keyword">my</span> $f = <span class="hljs-number">2</span>;
        <span class="hljs-keyword">my</span> @rgs;<font></font>
 <font></font>
        @rgs = <span class="hljs-string">qw(zero at v0 v1 a0 a1 a2 a3)</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^ R0/</span>);<font></font>
        @rgs = <span class="hljs-string">qw(t0 t1 t2 t3 t4 t5 t6 t7)</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^ R8/</span>);<font></font>
        @rgs = <span class="hljs-string">qw(s0 s1 s2 s3 s4 s5 s6 s7)</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^ R1/</span>);<font></font>
        @rgs = <span class="hljs-string">qw(t8 t9 k0 k1 gp sp s8 ra)</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^ R2/</span>);<font></font>
 <font></font>
        <span class="hljs-keyword">foreach</span> $i (@rgs) {<font></font>
            $r{$i} = $fields[$f];<font></font>
            $f = $f + <span class="hljs-number">1</span>;<font></font>
        }<font></font>
    }<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-keyword">while</span> (&lt;&gt;) {
    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^=&gt;([^s]*)\tsw\t([^,]*),(\d+)\(([^)]*)\)/</span>) {
        <span class="hljs-keyword">my</span> $rs = $2;
        <span class="hljs-keyword">my</span> $offset = $3;
        <span class="hljs-keyword">my</span> $rd = $4;<font></font>
 <font></font>
        parse_reg(&lt;&gt;);<font></font>
        parse_reg(&lt;&gt;);<font></font>
        parse_reg(&lt;&gt;);<font></font>
        parse_reg(&lt;&gt;);<font></font>
 <font></font>
        <span class="hljs-keyword">print</span>(<span class="hljs-string">"$1    sw $rs={0x$r{$rs}}, $offset($rd={0x$r{$rd}})\n"</span>);<font></font>
    }<font></font>
 }</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peluncurannya </font></font><code>parse_gdb_output.pl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah sebagai berikut:</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ grep "^ = \ | ^ R" bs_gdb.log | </font><font style="vertical-align: inherit;">./parse_gdb_output.pl</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah cuplikan output </font></font><code>parse_gdb_output.pl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(tanda ' </font></font><code>&lt;&lt;&lt; PLL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">' dan ' </font></font><code>&lt;&lt;&lt; DDR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">' dimasukkan secara manual nanti):</font></font><br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0x9f002700: ad cf 00 00 sw t7 = {0x00dbd860}, 0 (t6 = {0xb8116248})</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0x9f00271c: ad f9 00 00 sw t9 = {0x000fffff}, 0 (t7 = {0xb800009c})</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0x9f0027a0: ad f9 00 00 sw t9 = {0x00018004}, 0 (t7 = {0xb8050008}) &lt;&lt;&lt; PLL</font></font><font></font>
  0x9f0027dc:   ad f9 00 00    sw t9={0x00000352}, 0(t7={0xb8050004}) &lt;&lt;&lt;<font></font>
  0x9f002840:   ad f9 00 00    sw t9={0x40818000}, 0(t7={0xb8050000}) &lt;&lt;&lt;<font></font>
  0x9f002898:   ad f9 00 00    sw t9={0x001003e8}, 0(t7={0xb8050010}) &lt;&lt;&lt;<font></font>
  0x9f0028f4:   ad f9 00 00    sw t9={0x00818000}, 0(t7={0xb8050000}) &lt;&lt;&lt;<font></font>
  0x9f002970:   ad cf 00 00    sw t7={0x00800000}, 0(t6={0xb8116248})<font></font>
 ...<font></font>
  0x9f002994:   ad cf 00 00    sw t7={0x40800700}, 0(t6={0xb8116248})<font></font>
  0x9f002a54:   ad f9 00 00    sw t9={0x00008000}, 0(t7={0xb8050008})<font></font>
  0x9f00309c:   af 38 00 00    sw t8={0x7fbc8cd0}, 0(t9={0xb8000000}) &lt;&lt;&lt; DDR<font></font>
  0x9f0030b0:   af 38 00 00    sw t8={0x9dd0e6a8}, 0(t9={0xb8000004}) &lt;&lt;&lt;<font></font>
  0x9f0030dc:   af 38 00 00    sw t8={0x00000a59}, 0(t9={0xb800008c}) &lt;&lt;&lt;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0x9f0030ec: af 38 00 00 sw t8 = {0x00000008}, 0 (t9 = {0xb8000010}) &lt;&lt;&lt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ...</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena alamat register clock signal generator (PLL) dan alamat register pengontrol memori dari tipe DDR diketahui, mudah untuk mengetahui nomor apa yang harus ditulis ke alamat mana untuk menginisialisasi pengontrol RAM dengan benar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ringkasan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, debug melalui JTAG menggunakan openocd dan GDB sama sekali tidak sulit, dan metode kerja yang dijelaskan cocok tidak hanya untuk AR9331, tetapi, setelah beberapa adaptasi, dan bahkan untuk prosesor dengan arsitektur yang berbeda, yang untuk itu terdapat dukungan dalam openocd dan GDB.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id383505/">https://habr.com/ru/post/id383505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id383495/index.html">Bertahan hidup di Rusia. “Husky, repost, tweet: bagaimana tidak melanggar undang-undang anti-ekstremis”</a></li>
<li><a href="../id383497/index.html">Porting Lode Runner dari BC ke UKNC</a></li>
<li><a href="../id383499/index.html">Notch mengalami masa-masa sulit</a></li>
<li><a href="../id383501/index.html">Di Amerika Serikat meluncurkan percobaan untuk mensimulasikan penerbangan ke Mars yang berlangsung selama 365 hari</a></li>
<li><a href="../id383503/index.html">Photocell Perovskite: lima gram per meter persegi</a></li>
<li><a href="../id383507/index.html">Proyek Pangkalan Bulan: Sejarah</a></li>
<li><a href="../id383509/index.html">Pendiri Pirate Bay Ditangkap Segera Setelah Keluar</a></li>
<li><a href="../id383511/index.html">Momen-momen pertama fotosintesis dihitung pada superkomputer</a></li>
<li><a href="../id383513/index.html">Pasokan Obat Online Meningkat Bahkan Setelah Penutupan Silk Road</a></li>
<li><a href="../id383517/index.html">RAICamp 2015 - Hari Pertama</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>