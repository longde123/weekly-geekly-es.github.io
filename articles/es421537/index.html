<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ≤Ô∏è ü§∑üèæ üß† Funciones de orden superior en JS: Young Fighter Course üôâ üêà üë©üèº‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo est√° destinado a una persona que da sus primeros pasos t√≠midos en el camino espinoso de aprender JavaScript. A pesar del hecho de que en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Funciones de orden superior en JS: Young Fighter Course</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421537/">  <i>Este art√≠culo est√° destinado a una persona que da sus primeros pasos t√≠midos en el camino espinoso de aprender JavaScript.</i>  <i>A pesar del hecho de que en 2018, uso la sintaxis ES5 para que los j√≥venes padawans que toman el curso JavaScript Nivel 1 en HTML Academy puedan entender el art√≠culo.</i> <br><br>  Una de las caracter√≠sticas que distingue a JS de muchos otros lenguajes de programaci√≥n es que en este lenguaje una funci√≥n es un "objeto de primera clase".  O, en ruso, una funci√≥n es un significado.  Igual que un n√∫mero, cadena u objeto.  Podemos escribir una funci√≥n en una variable, podemos ponerla en una matriz o en una propiedad de objeto.  Incluso podemos sumar dos funciones.  De hecho, nada significativo saldr√° de esto, pero de hecho, ¬°podemos! <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">world</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(hello + world); <span class="hljs-comment"><span class="hljs-comment">//  ,  ,   //   ,    </span></span></code> </pre> <br>  Lo m√°s interesante es que podemos crear funciones que operen en otras funciones: aceptarlas como argumentos o devolverlas como un valor.  Dichas funciones se denominan <i>funciones de orden superior</i> .  Y hoy, ni√±as y ni√±os, hablaremos sobre c√≥mo adaptar esta oportunidad a las necesidades de la econom√≠a nacional.  En el camino, aprender√° m√°s sobre algunas caracter√≠sticas √∫tiles de las funciones en JS. <br><a name="habracut"></a><br><h3>  Tuber√≠a </h3><br>  Digamos que tenemos algo con lo que necesitas hacer muchas piezas.  Digamos que un usuario carg√≥ un archivo de texto que almacena datos en formato JSON, y queremos procesar su contenido.  Primero, necesitamos recortar los caracteres de espacio en blanco adicionales, que podr√≠an "crecer" alrededor de los bordes como resultado de las acciones del usuario o del sistema operativo.  Luego verifique que no haya c√≥digo malicioso en el texto (qui√©n sabe, estos usuarios).  Luego cambie de texto a objeto utilizando el m√©todo <code>JSON.parse</code> .  Luego, elimine los datos que necesitamos de este objeto.  Y al final, env√≠e estos datos al servidor.  Obtienes algo como esto: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trim</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sanitize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extractData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textFromFile = getTextFromFile(); send(extractData(parse(sanitize(trim(testFromFile))));</code> </pre><br>  Se ve muy de acuerdo.  Adem√°s, es probable que no haya notado que falta un soporte de cierre.  Por supuesto, el IDE le dir√≠a esto, pero a√∫n hay un problema.  Para resolverlo, recientemente se propuso un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nuevo operador |&gt;</a> .  De hecho, no es nuevo, pero honestamente se tom√≥ prestado de lenguajes funcionales, pero este no es el punto.  Con este operador, la √∫ltima l√≠nea podr√≠a reescribirse de la siguiente manera: <br><br><pre> <code class="javascript hljs">textFromFile |&gt; trim |&gt; sanitize |&gt; parse |&gt; extractData |&gt; send;</code> </pre><br>  El operador |&gt; toma su operando izquierdo y lo pasa al operando derecho como argumento.  Por ejemplo, <code>"Hello" |&gt; console.log</code> equivalente a <code>console.log("Hello")</code> .  Esto es muy conveniente precisamente para los casos en que se invocan varias funciones a lo largo de la cadena.  Sin embargo, antes de la introducci√≥n de este operador, pasar√° mucho tiempo (si se acepta esta propuesta), pero debe vivir de alguna manera ahora.  Por lo tanto, podemos escribirle a nuestra <s>bicicleta una</s> funci√≥n que simule este comportamiento: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pipe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = args.shift(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(args.length){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = args.shift(); result = f(result); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } pipe( textFromFile, trim, sanitize, parse, extractData, send );</code> </pre><br>  Si es un javascriptista novato (javascript? Javascript?), La primera l√≠nea de la funci√≥n puede parecerle incomprensible.  Es simple: dentro de la funci√≥n, usamos la palabra clave <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">argumentos</a> para acceder a un objeto tipo matriz que contiene todos los argumentos pasados ‚Äã‚Äãa la funci√≥n.  Esto es muy conveniente cuando no sabemos de antemano cu√°ntos argumentos tendr√°.  Un objeto masivo es como una matriz, pero no del todo.  Por lo tanto, lo convertimos a una matriz normal usando el m√©todo <code>Array.from</code> .  Espero que el c√≥digo adicional ya sea bastante legible: comenzamos de izquierda a derecha para extraer elementos de la matriz y aplicarlos entre s√≠ de la misma manera que lo har√≠a el operador |&gt;. <br><br><h3>  Registro </h3><br>  Aqu√≠ hay otro ejemplo cercano a la vida real.  Supongamos que ya tenemos una funci√≥n <code>f</code> que hace ... algo √∫til.  Y en el proceso de probar nuestro c√≥digo, queremos saber m√°s sobre exactamente c√≥mo lo hace <code>f</code> .  En qu√© momentos se llama, qu√© argumentos se le pasan, qu√© valores se devuelven. <br><br>  Por supuesto, con cada llamada de funci√≥n, podemos escribir esto: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = f(a, b); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">" f     "</span></span> + a + <span class="hljs-string"><span class="hljs-string">"  "</span></span> + b + <span class="hljs-string"><span class="hljs-string">"   "</span></span> + result); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">" : "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now());</code> </pre><br>  Pero, en primer lugar, es bastante engorroso.  Y en segundo lugar, es muy f√°cil olvidarlo.  Un d√≠a simplemente escribiremos <code>f(a, b)</code> , y desde entonces la oscuridad de la ignorancia se asentar√° en nuestras mentes.  Se expandir√° con cada nuevo desaf√≠o <code>f</code> , del cual no sabemos nada. <br><br>  Idealmente, me gustar√≠a iniciar sesi√≥n autom√°ticamente.  Para que cada vez que llame a <code>f</code> , todo lo que necesitamos se escriba en la consola.  Y, afortunadamente, tenemos una manera de hacer esto.  ¬°Conoce la nueva funci√≥n de orden superior! <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addLogger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">f</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = f.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, args); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">" "</span></span> + f.name + <span class="hljs-string"><span class="hljs-string">"     "</span></span> + args.join() + <span class="hljs-string"><span class="hljs-string">"    "</span></span> + result + <span class="hljs-string"><span class="hljs-string">"\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" : "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sumWithLogging = addLogger(sum); sum(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   sumWithLogging(1, 2) // </span></span></code> </pre><br>  Una funci√≥n toma una funci√≥n y devuelve una funci√≥n que llama a la funci√≥n pasada a la funci√≥n cuando se cre√≥ la funci√≥n.  Lo siento, no pude dejar de escribir esto.  Ahora en ruso: la funci√≥n <code>addLogger</code> crea un <code>addLogger</code> alrededor de la funci√≥n que se le pasa como argumento.  La envoltura tambi√©n es una funci√≥n.  Cuando se le llama, recopila una matriz de sus argumentos de la misma manera que lo hicimos en el ejemplo anterior.  Luego, usando el m√©todo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">apply</a> , llama a una funci√≥n envuelta con los mismos argumentos y recuerda el resultado.  Despu√©s de eso, el contenedor escribe todo en la consola. <br><br>  Aqu√≠ tenemos el cl√°sico caso de ataque de hombre en el medio.  Si usa un contenedor en lugar de <code>f</code> , desde el punto de vista del c√≥digo que lo usa, pr√°cticamente no hay diferencia.  El c√≥digo puede suponer que se comunica con <code>f</code> directamente.  Mientras tanto, el contenedor informa todo al camarada mayor. <br><br><h3>  Eins, zwei, drei, vier ... </h3><br>  Y una tarea m√°s cerca de la pr√°ctica.  Supongamos que necesitamos numerar algunas entidades.  Cada vez que aparece una nueva entidad, obtenemos un nuevo n√∫mero para ella, uno m√°s que el anterior.  Para hacer esto, comenzamos una funci√≥n de la siguiente forma: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastNumber = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lastNumber++; }</code> </pre><br>  Y luego tenemos un nuevo tipo de entidad.  Digamos, antes de eso, numeramos los conejitos, y ahora tambi√©n hay conejos.  Si usa una funci√≥n para ambos y para otros, entonces cada n√∫mero emitido a los conejos har√° un "agujero" en la serie de n√∫meros emitidos a los conejos.  Entonces, necesitamos la segunda funci√≥n, y con ella la segunda variable: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastHareNumber = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewHareNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lastHareNumber++; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastRabbitNumber = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewRabbitNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lastRabbitNumber++; }</code> </pre><br>  ¬øSientes que este c√≥digo huele mal?  Me gustar√≠a tener algo mejor.  En primer lugar, me gustar√≠a poder declarar tales funciones menos detalladas, sin duplicar el c√≥digo.  Y en segundo lugar, me gustar√≠a "empaquetar" de alguna manera la variable que la funci√≥n utiliza en la funci√≥n misma para no obstruir el espacio de nombres una vez m√°s. <br><br><div class="spoiler">  <b class="spoiler_title">Y luego un hombre irrumpe, familiarizado con el concepto de OOP, y dice:</b> <div class="spoiler_text">  "Elemental, Watson".  Es necesario hacer que los generadores de n√∫meros no sean objetos, sino objetos.  Los objetos est√°n dise√±ados para almacenar funciones que funcionan con datos, junto con estos mismos datos.  Entonces podr√≠amos escribir algo como: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numberGenerator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NumberGenerator(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = numberGenerator.get();</code> </pre><br>  A lo que responder√©: <br>  - Para ser honesto, estoy completamente de acuerdo contigo.  Y, en principio, este es un enfoque m√°s correcto que el que ofrecer√© ahora.  Pero aqu√≠ tenemos un art√≠culo sobre funciones, no sobre OOP.  ¬øPodr√≠as callarte un momento y dejarme terminar? <br></div></div><br>  Aqu√≠ (¬°sorpresa!) La funci√≥n de orden superior nos ayudar√° nuevamente. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createNumberGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n++; } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getNewHareNumber = createNumberGenerator(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getNewRabbitNumber = createNumberGenerator(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( getNewHareNumber(), getNewHareNumber(), getNewHareNumber(), getNewRabbitNumber(), getNewRabbitNumber(), ); <span class="hljs-comment"><span class="hljs-comment">//    0, 1, 2, 0, 1</span></span></code> </pre><br>  Y aqu√≠ algunas personas pueden tener una pregunta, tal vez incluso en forma obscena: ¬øqu√© demonios est√° pasando?  ¬øPor qu√© estamos creando una variable que no se usa en la funci√≥n misma?  ¬øC√≥mo accede a ella una funci√≥n interna si una funci√≥n externa ha completado su ejecuci√≥n hace mucho tiempo?  ¬øPor qu√© dos funciones creadas que se refieren a la misma variable obtienen resultados diferentes?  Una respuesta a todas estas preguntas es el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cierre</a> . <br><br>  Cada vez que se <code>createNumberGenerator</code> funci√≥n <code>createNumberGenerator</code> , el int√©rprete JS crea una cosa m√°gica llamada "contexto de ejecuci√≥n".  En t√©rminos generales, este es un objeto en el que se almacenan todas las variables declaradas en esta funci√≥n.  No podemos acceder a √©l como un objeto javascript ordinario, pero sin embargo lo es. <br><br>  Si la funci√≥n era "simple" (digamos, agregando n√∫meros), luego del final de su trabajo, el contexto de ejecuci√≥n resulta in√∫til.  ¬øSabes qu√© sucede con los datos innecesarios en JS?  Son devorados por un demonio insaciable llamado Garbage Collector.  Sin embargo, si la funci√≥n era "complicada", puede suceder que alguien todav√≠a necesite su contexto incluso despu√©s de que se haya ejecutado esta funci√≥n.  En este caso, el recolector de basura lo salva, y √©l permanece colgado en alg√∫n lugar de su memoria, para que aquellos que lo necesitan puedan tener acceso a √©l. <br><br>  Por lo tanto, la funci√≥n devuelta por <code>createNumberGenerator</code> siempre tendr√° acceso a su propia copia de la variable <code>n</code> .  Puedes pensarlo como una bolsa de tenencia de D&amp;D.  Pones tu mano en tu bolso y te encuentras en un "bolsillo" interdimensional personal donde puedes almacenar todo lo que quieras. <br><br><h3>  Debounce </h3><br>  Existe tal cosa como "eliminar el rebote".  Esto es cuando no queremos que se llame a alguna funci√≥n con demasiada frecuencia.  Supongamos que hay un bot√≥n, al hacer clic en el cual se inicia un proceso "costoso" (largo, o que consume mucha memoria, o Internet, o sacrifica las v√≠rgenes).  Puede suceder que un usuario impaciente comience a hacer clic en este bot√≥n con una frecuencia de m√°s de diez hertzios.  Adem√°s, el proceso mencionado tiene una naturaleza tal que no tiene sentido ejecutarlo diez veces seguidas, porque el resultado final no cambiar√°.  Es entonces cuando aplicamos la "eliminaci√≥n de charla". <br><br>  Su esencia es muy simple: realizamos la funci√≥n no inmediatamente, sino despu√©s de un tiempo.  Si antes de que este tiempo haya pasado, se volvi√≥ a llamar a la funci√≥n, "reiniciamos el temporizador".  Por lo tanto, el usuario puede hacer clic en el bot√≥n al menos mil veces, solo se necesita uno para el sacrificio.  Sin embargo, menos palabras, m√°s c√≥digo: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">debounce</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">f, delay</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastTimeout; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(lastTimeout){ clearTimeout(lastTimeout); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); lastTimeout = setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ f.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, args); }, delay); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrifice</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(name + <span class="hljs-string"><span class="hljs-string">"     * *"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">debounce</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sacrifice, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">500</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">);</span></span></code> </pre><br>  En medio segundo, Lena ser√° sacrificada, y Katya y Sveta sobrevivir√°n gracias a nuestra funci√≥n m√°gica. <br><br>  Si lee atentamente los ejemplos anteriores, debe comprender bien c√≥mo funciona todo aqu√≠.  La funci√≥n de contenedor creada por <code>debounce</code> desencadena la ejecuci√≥n retrasada de la funci√≥n original usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">setTimeout</a> .  En este caso, el identificador de tiempo de espera se almacena en la variable lastTimeout, que es accesible para el reiniciador debido al cierre.  Si el identificador de tiempo de espera ya est√° en esta variable, el reiniciador cancela este tiempo de espera con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clearTimeout</a> .  Si el tiempo de espera anterior ya se ha completado, no pasa nada.  Si no, mucho peor para √©l. <br><br>  Sobre esto, tal vez, termine.  Espero que hoy hayas aprendido muchas cosas nuevas y, lo m√°s importante, hayas entendido todo lo que aprendiste.  Nos vemos de nuevo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es421537/">https://habr.com/ru/post/es421537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es421527/index.html">Lanzamiento de difusi√≥n del proyecto "Servidor en las nubes"</a></li>
<li><a href="../es421529/index.html">Netflix, Uber, Google y usted en MBLT DEV 2018</a></li>
<li><a href="../es421531/index.html">C√≥mo integrar ReactJS en 1C-Bitrix con generaci√≥n autom√°tica de plantillas en el back-end utilizando el ejemplo de la red Globus</a></li>
<li><a href="../es421533/index.html">Elegir un lenguaje de programaci√≥n: 3 consejos de un programador de Apple</a></li>
<li><a href="../es421535/index.html">Aventura - Electr√≥nica. En un columpio alado en el mundo de TI</a></li>
<li><a href="../es421543/index.html">Clonar una tarjeta sin contacto usando una aplicaci√≥n m√≥vil</a></li>
<li><a href="../es421545/index.html">Revisi√≥n de PocketBook 616: la billetera 2018 m√°s econ√≥mica con funci√≥n de retroiluminaci√≥n</a></li>
<li><a href="../es421547/index.html">Aceptaci√≥n del centro de datos independiente</a></li>
<li><a href="../es421549/index.html">Estamos escribiendo documentaci√≥n t√©cnica: una gu√≠a para el profano</a></li>
<li><a href="../es421551/index.html">Dominando Vuex - De cero a h√©roe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>