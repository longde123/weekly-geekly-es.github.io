<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôøÔ∏è ü•á üòÇ Microsservi√ßos. Padr√µes de desenvolvimento e refatora√ß√£o com exemplos Java üåç ‚õëÔ∏è üèâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 

 Estamos come√ßando a traduzir o livro Microservices Patterns de Chris Richardson, com exemplos em Java . Passou meio ano antes da estr√©ia ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Microsservi√ßos. Padr√µes de desenvolvimento e refatora√ß√£o com exemplos Java</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/430062/">  Ol√° Habr! <br><br>  Estamos come√ßando a traduzir o livro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Microservices Patterns de</a> Chris Richardson, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com exemplos em Java</a> .  Passou meio ano antes da estr√©ia em russo, mas gostar√≠amos de oferecer a voc√™ um tipo de trailer - uma resenha um pouco resumida deste livro de Ben Nadel, que leu a vers√£o MEAP.  A revis√£o cita ativamente o texto da vers√£o Kindle de Richardson. <br><br><img src="https://habrastorage.org/webt/uw/yl/ao/uwylaocto8zwc9s9k_roupvabha.jpeg"><br><br>  Bem-vindo ao gato! <br><a name="habracut"></a><br>  Eu aprendi sobre Chris Richardson quando conheci seu recurso on-line <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Microservices.io</a> .  Onde, para ser honesto, h√° uma quantidade impressionante de informa√ß√µes - que decidi adiar para mais tarde, porque naquela √©poca eu n√£o sabia como abord√°-las, especialmente considerando que eu praticamente n√£o tinha rela√ß√µes com microsservi√ßos.  Eu gosto de ler mais  Portanto, quando soube que Chris estava publicando o livro do autor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Microservices Patterns: With Examples In Java</a> , fiquei simplesmente inspirado.  Tanto que ele mal podia esperar pela sa√≠da dela.  Ent√£o, adquiri e li a "vers√£o inicial" de Manning (MEAP).  Na semana passada, acabei de fazer o que estudei neste livro e acho que este √© um estudo fascinante, pragm√°tico e hol√≠stico da abordagem de desenvolvimento de microsservi√ßos. <br><br>  O livro inteiro foi constru√≠do na forma da hist√≥ria de Mary - CTO (CTO) da Food To Go, Inc (FTGO).  A empresa busca expandir os neg√≥cios lan√ßando a refatora√ß√£o de seu antigo aplicativo monol√≠tico e transformando-o em uma arquitetura de microsservi√ßo.  Mary assume esse projeto, porque a velocidade de desenvolvimento diminuiu e os chefes est√£o ficando cada vez mais irritados com o fato de os programadores sob a lideran√ßa de Mary n√£o conseguirem produzir novos recursos de uma forma de alta qualidade. <br><br>  Claro, o principal problema de Mary √© o chamado "inferno monol√≠tico" na terminologia de Richardson.  Embora o mon√≥lito seja uma aplica√ß√£o grande e crescente, Richardson se concentra em um aspecto bastante sutil da migra√ß√£o do FTGO, para que seja mais conveniente expor e transmitir todos os conceitos.  Nesse caso, o conte√∫do do livro √© incrivelmente diger√≠vel.  A maioria das considera√ß√µes de arquitetura geralmente √© excessivamente simplificada ou complicada demais.  No entanto, Richardson conseguiu encontrar um meio termo, construindo um modelo de dom√≠nio que (quase) se encaixa na cabe√ßa, mas √© ao mesmo tempo complexo o suficiente para ilustrar fluxos interessantes de tarefas entre servi√ßos. <br><br>  Desde o in√≠cio, eu esperava que Richardson fosse pragm√°tico em todos os detalhes.  Nenhum aspecto do livro √© apresentado como uma "bala de prata" ou "a √∫nica solu√ß√£o".  Em todos os lugares, vemos uma escolha calculada, um conjunto de compromissos claramente definidos.  Por exemplo, o autor ainda submete a ideia de microsservi√ßos nesse sentido: a arquitetura de microsservi√ßos deve sempre ser evitada, exceto nos casos em que √© absolutamente necess√°rio: <br><blockquote> Outro desafio associado ao uso da arquitetura de microsservi√ßo √© decidir em que momento do ciclo de vida do aplicativo come√ßar a usar essa arquitetura.  Ao desenvolver a primeira vers√£o de um aplicativo, muitas vezes voc√™ ainda n√£o encontra problemas resolvidos por essa arquitetura.  Al√©m disso, o uso de uma arquitetura distribu√≠da bem equilibrada apenas atrasar√° o desenvolvimento.  Esse dilema pode surgir em startups, onde o desafio mais importante geralmente reside no r√°pido desenvolvimento de um modelo de neg√≥cios e em sua pr√≥pria aplica√ß√£o.  Ao usar a arquitetura de microsservi√ßo, √© muito mais dif√≠cil organizar itera√ß√µes r√°pidas.  O desenvolvimento da inicializa√ß√£o definitivamente deve come√ßar com um aplicativo monol√≠tico.  (Vers√£o Kindle, endere√ßo 416) </blockquote>  Richardson tamb√©m considera os microsservi√ßos em uma perspectiva hol√≠stica, discutindo a din√¢mica da equipe como um c√≠rculo completamente independente de problemas, constru√≠do na parte tecnol√≥gica.  Obviamente, ele considera t√≥picos como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a Lei de Conway</a> e a "Manobra Reversa de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conway</a> ", mas, ao mesmo tempo, tamb√©m aborda o fato de que os programadores s√£o personagens de pathos emocionais com os quais voc√™ deve "vender" a id√©ia de microsservi√ßos: <br><blockquote>  Mudando para o paradigma de microsservi√ßo, voc√™ √© for√ßado a mudar sua arquitetura, sua organiza√ß√£o e processos de desenvolvimento.  No entanto, no final, o ambiente de trabalho muda, as condi√ß√µes em que as pessoas trabalham e as pessoas, como j√° mencionado, s√£o emocionais.  Se as emo√ß√µes humanas s√£o ignoradas, a introdu√ß√£o de microsservi√ßos em uma organiza√ß√£o pode se transformar em uma rota √≠ngreme.  (Vers√£o Kindle, endere√ßo 718) </blockquote>  As estrat√©gias descritas pelo autor dizem respeito a todo o neg√≥cio, afetam gerentes e executivos que talvez n√£o se atrevam a iniciar uma grande refatora√ß√£o, retirando recursos valiosos, pessoas que poderiam desenvolver ativamente novos recursos: <br><blockquote>  Um benef√≠cio significativo da refatora√ß√£o passo a passo em dire√ß√£o √† arquitetura de microsservi√ßo √© que essa estrat√©gia come√ßa a render imediatamente.  Essa n√£o √© a situa√ß√£o em que ‚Äúrevisar‚Äù um c√≥digo que n√£o traz nenhum benef√≠cio at√© que seja completamente conclu√≠do ... <br><br>  Outra vantagem da situa√ß√£o em que o valor da transi√ß√£o √© adquirido em um est√°gio inicial √© que podemos atrair suporte comercial para garantir a migra√ß√£o.  Esse suporte cont√≠nuo √© crucial, pois quanto mais ativa a refatora√ß√£o, menos tempo voc√™ poder√° gastar no desenvolvimento de recursos.  Em algumas organiza√ß√µes, √© dif√≠cil se livrar da d√≠vida t√©cnica, pois as tentativas anteriores podem se mostrar excessivamente ambiciosas e n√£o trazem os benef√≠cios desejados.  Como resultado, os neg√≥cios relutam em continuar investindo na ‚Äúlimpeza‚Äù.  A natureza passo a passo da refatora√ß√£o no caso de microsservi√ßos significa que uma equipe pode mostrar resultados valiosos com muita frequ√™ncia.  (Endere√ßo da vers√£o do Kindle 10769) </blockquote>  Do ponto de vista tecnol√≥gico, no livro ‚ÄúMicrosservi√ßos.  Padr√µes de desenvolvimento e refatora√ß√£o ‚Äùexaminaram uma ampla gama de t√≥picos: de arquiteturas hexagonais, testes e integra√ß√£o cont√≠nua a padr√µes de mensagens e a cria√ß√£o de sistemas observ√°veis.  Essa cobertura implica que alguns t√≥picos do livro sejam abordados com mais detalhes que outros.  No entanto, novamente, Richardson consegue perfeitamente equilibrar tudo e fornecer tantos detalhes para que se possa discutir razoavelmente o t√≥pico sem desencorajar o leitor. <br><br>  De fato, o conte√∫do do livro √© organizado de tal maneira que voc√™ mesmo pode escolher quais t√≥picos se aprofundar.  Em cada cap√≠tulo, antes de uma imers√£o detalhada no t√≥pico, √© fornecida uma lista de TL; DR, que lista brevemente todos os pr√≥s e contras.  Assim, voc√™ consegue captar os pontos mais importantes do cap√≠tulo sem ler cada palavra. <br><br>  Honestamente, acabei de ler dois cap√≠tulos sobre o teste de microsservi√ßos e um cap√≠tulo sobre a implanta√ß√£o de microsservi√ßos.  Estou certo de que o autor elaborou esses t√≥picos perfeitamente, mas me pareceu que simplesmente havia mais informa√ß√µes do que eu poderia digerir.  A implanta√ß√£o n√£o √© uma tarefa di√°ria urgente para mim.  Ele escreveu v√°rios testes em sua vida. <br>  Assim, eu queria deixar espa√ßo suficiente em minha consci√™ncia de caverna pouco clara para colocar material de todos os outros cap√≠tulos: sobre design orientado ao assunto (DDD), comunica√ß√£o entre processos e sincroniza√ß√£o de dados. <br><br>  Uma das se√ß√µes que me impressionou especialmente diz sobre qual servi√ßo deve lidar com solicita√ß√µes de um tipo especializado, a saber: encontre restaurantes adequados perto da localiza√ß√£o atual do usu√°rio: <br><blockquote>  No entanto, pode ser dif√≠cil implementar at√© mesmo as solicita√ß√µes locais em termos de um servi√ßo espec√≠fico.  Isso √© poss√≠vel por v√°rios motivos.  Em primeiro lugar, porque (como descrito abaixo), √†s vezes n√£o √© razo√°vel implementar uma solicita√ß√£o no servi√ßo que possui os dados.  Outro motivo √© que, √†s vezes, o banco de dados do servi√ßo (ou modelo de dados) n√£o suporta com efici√™ncia a solicita√ß√£o (vers√£o do Kindle, endere√ßo 5659) </blockquote><blockquote> ... Se no aplicativo FTGO as informa√ß√µes sobre restaurantes estiverem armazenadas em [algum outro] banco de dados, a implementa√ß√£o da consulta <code>findAvailableRestaurant()</code> ser√° muito mais complicada.  Uma r√©plica dos dados do restaurante deve ser armazenada em um formul√°rio que suporte consultas geoespaciais.  Por exemplo, um aplicativo pode usar a Biblioteca de Indexa√ß√£o Geoespacial para DynamoDB, onde a tabela √© usada como um √≠ndice geoespacial.  Alternativa: o aplicativo pode armazenar uma r√©plica dos dados do restaurante em um tipo completamente diferente de banco de dados.  Uma situa√ß√£o semelhante ocorre quando usamos consultas de texto com um banco de dados para pesquisa de texto.  (Vers√£o Kindle, endere√ßo 5675) </blockquote><blockquote>  ... Nesse caso, √© aconselh√°vel (pelo menos √† primeira vista) que a opera√ß√£o de solicita√ß√£o seja implementada pelo pr√≥prio servi√ßo que possui os dados.  No entanto, al√©m da propriedade dos dados, outros fatores devem ser considerados. <br><br>  Tamb√©m √© necess√°rio levar em considera√ß√£o a necessidade de separa√ß√£o de tarefas e evitar sobrecarregar os servi√ßos com muitos recursos.  Por exemplo, a principal responsabilidade da equipe que desenvolve o servi√ßo de Restaurante √© ajudar os gerentes de restaurante a servirem o trabalho do estabelecimento.  Esta tarefa n√£o √© de todo o plano que a implementa√ß√£o de uma solicita√ß√£o cr√≠tica para trabalhar com grandes quantidades de dados.  Al√©m disso, se a equipe de desenvolvimento fosse respons√°vel pela opera√ß√£o <code>findAvailableRestaurants()</code> , estaria constantemente com medo de introduzir essas altera√ß√µes que poderiam impedir os consumidores de fazer pedidos.  (Vers√£o Kindle, endere√ßo 5675) </blockquote>  Aqui, meu c√©rebro explodiu um pouco porque vi um servi√ßo cuja √∫nica fun√ß√£o era otimizar os dados de outro servi√ßo para executar uma tarefa espec√≠fica.  No entanto, como Richardson aponta, essa √© apenas uma abstra√ß√£o mais generalizada da pr√≥pria ideia subjacente √† pesquisa de texto completo, por exemplo, no Apache Lucene (essa ferramenta fornece indexa√ß√£o de texto completo em cima de outro data warehouse). <br><br>  Eu suspeito - ou melhor, eu espero - que, tendo visto uma divis√£o de responsabilidades, o leitor comece a tra√ßar uma nova linha entre os servi√ßos.  Ele pensar√° n√£o apenas na ‚Äúpropriedade dos dados‚Äù, mas tamb√©m come√ßar√° a levar em considera√ß√£o as ‚Äúoportunidades de neg√≥cios‚Äù - isto √©, um fator de valor real para que o banco de dados n√£o pare√ßa ser apenas o local onde o estado est√° armazenado. <br><br>  Outro aspecto destacado nesta discuss√£o √© a import√¢ncia absoluta da sincroniza√ß√£o e replica√ß√£o de dados, al√©m de mensagens ass√≠ncronas na arquitetura de microsservi√ßos.  Este t√≥pico percorre todo o livro de Richardson com um fio vermelho, n√£o importa o que eles falem: a cria√ß√£o de um microsservi√ßo do zero ou a refatora√ß√£o gradual de um mon√≥lito em microsservi√ßos (um cap√≠tulo separado √© dedicado a esse t√≥pico).  Ele deixa bem claro que a sincroniza√ß√£o √© a for√ßa principal que realmente permite que muitas coisas sejam realizadas. <br><br>  Eu poderia mencionar muitas coisas interessantes.  Por que vale, por exemplo, o fato de Richardson falar adequadamente sobre autentica√ß√£o e autoriza√ß√£o em um sistema distribu√≠do? Acho que esse t√≥pico ainda n√£o foi totalmente explorado, para dizer o m√≠nimo.  O autor explica o design orientado ao assunto da maneira mais acess√≠vel.  Ele tamb√©m demonstra que mesmo classes muito simples podem ter comportamento. <br><br>  H√° mais de um ano, venho tentando entender adequadamente a arquitetura de sistemas distribu√≠dos e padr√µes de microsservi√ßos (o que √© especialmente dif√≠cil, pois meu trabalho di√°rio est√° relacionado √† manuten√ß√£o do mon√≥lito).  Muitos dos textos que li sobre esses t√≥picos s√£o excessivamente superficiais ou muito estreitos e, ao mesmo tempo, aprofundados.  O livro "Microsservi√ßos.  Padr√µes de desenvolvimento e refatora√ß√£o ‚Äù√© de fato o meio termo entre esses dois extremos.  <b>Eu recomendo vivamente este livro a todos</b> (em negrito) que est√£o tentando (inclusive, at√© agora sem √™xito) mudar de uma arquitetura monol√≠tica para um sistema distribu√≠do. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430062/">https://habr.com/ru/post/pt430062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430048/index.html">"Voc√™ s√≥ precisa gerar cuidadosamente o IR LLVM." Egor Bogatov sobre Mono e .NET Core</a></li>
<li><a href="../pt430052/index.html">Por que √© importante que os desenvolvedores de hardware conduzam cusdev de qualidade</a></li>
<li><a href="../pt430054/index.html">HolyJS 2018 Moscow: transmiss√£o online gratuita, festa e rap de ci√™ncia e tecnologia</a></li>
<li><a href="../pt430058/index.html">Processos de onda em linhas hidr√°ulicas. O b√°sico</a></li>
<li><a href="../pt430060/index.html">Hackspace, Denis Perevalov, Anastasia Krokhaleva - a m√°gica da programa√ß√£o</a></li>
<li><a href="../pt430064/index.html">C ++: uma sess√£o de arqueologia espont√¢nea e por que voc√™ n√£o deve usar fun√ß√µes vari√°veis ‚Äã‚Äãno estilo de C</a></li>
<li><a href="../pt430068/index.html">Ordem da cris√°lida</a></li>
<li><a href="../pt430070/index.html">Pilha e fila s√£o dois paradigmas ruins e o que pode ser feito sobre isso</a></li>
<li><a href="../pt430072/index.html">Swift do lado do servidor subestimado: Entrevista com Paul Hudson</a></li>
<li><a href="../pt430074/index.html">Como quase peguei um v√≠rus tentando vender botas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>