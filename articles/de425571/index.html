<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤰🏻 🙏🏾 🕎 Sichern eines Webservers unter Linux 🚰 ⏲️ 🧖🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! 

 Wir haben lange Zeit keine neuen Bücher über Linux für Anfänger veröffentlicht - und jetzt übernehmen wir die Übersetzung neuer Produkt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sichern eines Webservers unter Linux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/425571/">  Hallo Habr! <br><br>  Wir haben lange Zeit keine neuen Bücher über Linux für Anfänger veröffentlicht - und jetzt übernehmen wir die Übersetzung neuer Produkte eines solchen Plans.  Clintons Buch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Linux in Action</a> , veröffentlicht von Manning, erzählt uns nicht nur über die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">interne Struktur von Linux</a> , sondern auch über die häufigsten Probleme und wie man sie behebt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pw/vq/ow/pwvqowqz-ymlimiywgpbhj8rzqq.jpeg" width="450"></div><br>  Der Autor hat einen Auszug aus dem 9. Kapitel auf der Hackernoon-Website veröffentlicht, den Sie auswerten sollten. <br><a name="habracut"></a><br>  Die Montage eines LAMP-Servers, die Konfiguration, die Gewährleistung einer zuverlässigen Datenverarbeitung, die Konfiguration des Themenbereichs und die Pflege eines TLS-Zertifikats sind nur der halbe Weg zum Sieg.  Sie müssen auch sicherstellen, dass Ihre Infrastruktur vor den vielen schrecklichen Bedrohungen des Internets geschützt ist. <br><br>  In diesem Artikel untersuchen wir die Sicherheit einer Website, indem wir lernen, wie Sie ordnungsgemäß mit Systemgruppen arbeiten, die Prozessisolation sicherstellen und Systemressourcen regelmäßig prüfen.  Natürlich ist diese Geschichte nicht vollständig (das in Aktion befindliche Linux-Buch behandelte auch andere Themen, z. B. die Installation von TLS-Zertifikaten und die Arbeit mit SELinux), aber dies wird für den Anfang ausreichen. <br><br><h3>  Systemgruppen und das Prinzip der Mindestberechtigungen </h3><br>  Die Entwickler, die Sie (endlich) unterstützen, beginnen zu erkennen, dass es notwendig ist, den allgemeinen Zugriff auf Daten und Konfigurationsdateien auf dem Anwendungsserver zu beschränken, diesen Zugriff jedoch gleichzeitig verschiedenen Programmierern und anderen IT-Teams offen zu lassen. <br><br>  Der erste Teil der Lösung sind <i>Gruppen</i> .  Eine Gruppe ist ein Objekt im System (ähnlich wie ein Benutzer) mit der Einschränkung, dass sich kein Benutzer jemals als Gruppe beim System anmeldet.  Die Stärke von Gruppen liegt in der Tatsache, dass sie wie Benutzer Dateien oder Verzeichnissen „zugewiesen“ werden können, sodass jedes Mitglied der Gruppe die für sie bereitgestellten Berechtigungen nutzen kann.  Dies ist unten dargestellt. <br><br>  Entwickler in der Entwicklergruppe können auf ein bestimmtes Verzeichnis zugreifen. Für Benutzer, die nicht Mitglieder dieser Gruppe sind, wird das Verzeichnis geschlossen <br>  Probieren Sie es aus: Erstellen Sie eine neue Datei in einem Texteditor.  Schreiben Sie einfachen Text hinein, z. B. "Hallo Welt", damit Sie sofort sehen können, wann erfolgreich auf die Datei zugegriffen wurde.  Bearbeiten Sie dann die Berechtigungen mit <code>chmod 770</code> sodass der Eigentümer der Datei und die Mitglieder der Gruppe, zu der er gehört, die vollen Rechte haben, mit der Datei zu arbeiten, während andere sie nicht lesen können. <br><br><pre> <code class="hljs ruby">$ nano datafile.txt $ chmod <span class="hljs-number"><span class="hljs-number">770</span></span> datafile.txt</code> </pre> <br>  Wenn Ihr System noch keine anderen Benutzerkonten als Ihre eigenen hat, erstellen Sie ein solches Konto entweder mit <code>adduser</code> - dies erfolgt in Debian / Ubuntu - oder mit <code>useradd</code> , wie es in CentOS üblich ist.  Der Befehl <code>useradd</code> funktioniert auch unter Ubuntu. <br><br>  Der Befehl <code>adduser</code> erfordert im Gegensatz zum Debian- <code>adduser</code> dass das Benutzerkennwort separat generiert wird: <br><br><pre> <code class="hljs pgsql"># useradd otheruser # passwd otheruser Enter <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> UNIX <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: Retype <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> UNIX <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: passwd: <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> updated successfully</code> </pre> <br>  Mit dem Befehl <code>su</code> wechseln wir zum neuen Benutzer.  Nachdem wir sein Passwort eingegeben haben, werden alle folgenden Befehle im Namen dieses Benutzers ausgeführt.  Sie werden für diesen bestimmten Benutzer arbeiten.  weder mehr noch weniger.  Wenn Sie versuchen, die <code>datafile.txt</code> (mit <code>cat</code> ) zu lesen, funktioniert für Sie nichts mehr.  Wie Sie sich erinnern, haben nur Gruppenmitglieder Leserechte.  Wenn Sie fertig sind, geben Sie <code>exit</code> , um die neue Benutzer-Shell zu beenden und zur ursprünglichen Shell zurückzukehren. <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> su otheruser Password: <span class="hljs-variable"><span class="hljs-variable">$</span></span> cat /home/ubuntu/datafile.txt cat: /home/ubuntu/datafile.txt: Permission denied <span class="hljs-variable"><span class="hljs-variable">$</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span></code> </pre> <br>  All dies wird erwartet und ist durchaus verständlich.  Wie Sie sehen, ist dies manchmal ein Problem, wenn Sie eine Datei eines anderen Benutzers nicht lesen können.  Lassen Sie uns sehen, was Sie tun können, indem Sie die Datei der Gruppe zuordnen und dann die Dateiberechtigungen korrekt konfigurieren. <br><br>  Wir erstellen eine neue Gruppe, mit der wir die Daten unserer Anwendung verwalten und dann die Eigenschaften unserer Datendatei mit dem <code>chown</code> bearbeiten können.  Das Ubuntu-Argument: App-Datengruppe überlässt dem Ubuntu-Benutzer den Besitz der Datei, aber seine Gruppe ändert sich in eine neue: App-Datengruppe. <br><br><pre> <code class="hljs pgsql"># groupadd app-data-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> # chown ubuntu:app-data-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> datafile.txt</code> </pre> <br>  Führen Sie ls aus, um die "erweiterte" Ausgabe dieser Datei abzurufen und ihre neuen Berechtigungen und ihren Status anzuzeigen.  Bitte beachten Sie: Wie erwartet gehört die Datei dem <code>ubuntu</code> Benutzer, der zur <code>app-data-group</code> . <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> ls <span class="hljs-literal"><span class="hljs-literal">-l</span></span> | grep datafile.txt <span class="hljs-literal"><span class="hljs-literal">-rwxrwx</span></span> — — <span class="hljs-number"><span class="hljs-number">1</span></span> ubuntu app<span class="hljs-literal"><span class="hljs-literal">-data</span></span><span class="hljs-literal"><span class="hljs-literal">-group</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> Aug <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span> datafile.txt</code> </pre> <br>  Sie können <code>usermod</code> , um Ihren Benutzer zur <code>app-data-group</code> hinzuzufügen, und dann mit dem Befehl <code>su</code> zu der Shell wechseln, in der das Konto eines anderen Benutzers bereitgestellt wird.  Obwohl die Zugriffsrechte auf die Datei sie für alle "anderen" blockieren - und Sie im Moment definitiv ein "anderer" Benutzer sind - sollten Sie diese Datei frei lesen, da Sie zur erforderlichen Gruppe gehören. <br><br><pre> <code class="hljs smalltalk"># usermod -aG app-data-group otheruser <span class="hljs-string"><span class="hljs-string">$ </span></span>su otheruser <span class="hljs-string"><span class="hljs-string">$ </span></span>cat datafile.txt <span class="hljs-type"><span class="hljs-type">Hello</span></span> <span class="hljs-type"><span class="hljs-type">World</span></span></code> </pre> <br>  Mit dem Befehl <code>su</code> wechseln wir zwischen Benutzerkonten.  Sie werden in meiner Datei <code>datafile.txt</code> aufgezeichnet.  Eine solche Organisation ist der richtige und effektive Weg, um eine Vielzahl komplexer Probleme mit Zugriffsrechten zu beseitigen, die in einem Mehrbenutzersystem auftreten können. <br><br>  Tatsächlich wird es nicht nur verwendet, um einzelnen Benutzern die erforderlichen Zugriffsrechte bereitzustellen - viele Systemprozesse wären auch nicht in der Lage, ihre Aufgaben auszuführen, wenn ihnen keine Mitgliedschaft in den erforderlichen Gruppen vorgeschrieben wäre.  Sie können die Datei / etc / group diagonal anzeigen - beachten Sie, wie viele Systemprozesse zu Ihren eigenen Gruppen gehören ... <br><br>  Verkürzte Auflistung des Inhalts der Datei / etc / group: <br><br><pre> <code class="hljs ruby">$ cat /etc/group <span class="hljs-symbol"><span class="hljs-symbol">root:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">daemon:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">bin:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">sys:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">adm:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-symbol"><span class="hljs-symbol">:syslog</span></span> <span class="hljs-symbol"><span class="hljs-symbol">tty:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">disk:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">lp:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">mail:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">8</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">news:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">9</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">uucp:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">10</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">man:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">12</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">proxy:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">13</span></span>: […]</code> </pre> <br><h3>  Isolierung des Containerprozesses </h3><br>  Vielleicht befürchten Sie, dass viele Dienste, die auf demselben Server ausgeführt werden, gefährdet sind, wenn mindestens einer dieser Dienste gefährdet ist?  Eine Möglichkeit, solche Schäden, die durch unachtsame oder böswillige Benutzer verursacht werden können, auszugleichen, besteht darin, Systemressourcen und -prozesse zu isolieren.  Selbst wenn jemand seine Autorität über die festgelegten Grenzen hinaus erweitern möchte, erhält er keinen physischen Zugriff auf die Daten. <br><br>  Zuvor wurde beschlossen, dieses Problem wie folgt zu lösen: Jedem Dienst wurde eine eigene physische Maschine zugewiesen.  Die Virtualisierung macht es jedoch viel einfacher und billiger, eine "Mesh" -Architektur zu erstellen.  Heutzutage wird diese Architektur häufig als <i>Microservice bezeichnet</i> und ermöglicht es Ihnen, viele Container gleichzeitig auszuführen, von denen beispielsweise eine Datenbank funktioniert, die andere - Apache - und die dritte - Mediendateien, die in Ihre Webseiten eingebettet werden können.  Die Microservice-Architektur ermöglicht nicht nur eine signifikante Steigerung der Produktivität und Effizienz, sondern verringert auch das Risiko eines Hackings jeder einzelnen Komponente erheblich. <br><br>  Die „Container“, von denen ich spreche, müssen mit LXC nicht überzeugen.  Andere Containertechnologien wie Docker werden heute immer beliebter. <br><br><h3>  Überprüfung auf gefährliche Benutzer-ID-Werte </h3><br>  Natürlich kann jeder Benutzer mit Administratorrechten mit dem <code>sudo</code> vorübergehend Root-Zugriff gewähren, aber nur der Administrator ist der eigentliche Administrator.  Wie Sie bereits wissen, ist es unsicher, reguläre Funktionen unter Root-Zugriff auszuführen.  Dies kann jedoch passieren - entweder rein zufällig oder aufgrund von böswilligem Datenbetrug -, dass ein normaler Benutzer ohne Unterbrechungen über Administratorrechte verfügt. <br><br>  In diesem Fall ist es gut, dass es nicht schwierig ist, solche Betrüger zu identifizieren: Ihre Benutzer- und / oder Gruppen-ID ist wie die des Administrators "0".  Schauen Sie sich die passwd-Datei im Verzeichnis / etc / an.  Diese Datei enthält einen Datensatz für jedes reguläre und Systembenutzerkonto, das bereits im System vorhanden ist.  Das erste Feld enthält den Kontonamen (in diesem Fall root und ubuntu), und im zweiten Feld kann x anstelle des Kennworts verwendet werden (falls das Kennwort vorhanden ist, wird es in der Datei / etc / shadow verschlüsselt).  Die folgenden beiden Felder enthalten jedoch die Benutzer- und Gruppen-ID.  Im Fall von <code>ubuntu</code> in diesem Beispiel sind beide IDs 1000. Wie Sie sehen, hat der Administrator hier Nullen. <br><br><pre> <code class="hljs ruby">$ cat /etc/passwd <span class="hljs-symbol"><span class="hljs-symbol">root:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/bin/bash</span></span> […] <span class="hljs-symbol"><span class="hljs-symbol">ubuntu:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">1000</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">1000</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/home/ubuntu</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/bin/bash</span></span></code> </pre> <br>  Wenn Sie jemals einen regulären Benutzer mit einer Benutzer- oder Gruppen-ID = 0 treffen, können Sie sicher sein, dass die Angelegenheit nicht sauber ist und dass die Situation behoben werden muss.  Eine schnelle und einfache Möglichkeit, ein solches Problem zu identifizieren, besteht darin, die <code>passwd</code> mit dem Befehl <code>awk</code> zu überprüfen, der alle Zeilen anzeigt, in deren drittem Feld nur 0 steht. In meinem Fall (Sie können ausatmen) gab es nur eine solche Zeile - die Wurzel.  Sie können es erneut ausführen, indem Sie $ 4 durch $ 3 ersetzen. Dadurch wird das Feld Gruppen-ID überprüft. <br><br><pre> <code class="hljs ruby">$ awk -<span class="hljs-symbol"><span class="hljs-symbol">F:</span></span> <span class="hljs-string"><span class="hljs-string">'($3 == “0”) {print}'</span></span> /etc/passwd <span class="hljs-symbol"><span class="hljs-symbol">root:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/bin/bash</span></span></code> </pre> <br><h3>  System Resource Audit </h3><br>  Je mehr Material sich in Ihrem System befindet, desto höher ist die Wahrscheinlichkeit, dass etwas darin kaputt geht.  Daher ist es ratsam zu verfolgen, was wie funktioniert.  In diesem Fall handelt es sich um Netzwerkports (wenn der Port "offen" ist, sollte er per Definition ein Eingang sein), Dienste (wenn der Dienst aktiv ist, sollte es möglich sein, ihn zu verwenden) und um installierte Programme (wenn das Programm installiert ist, sollte es sein) die Fähigkeit, es auszuführen). <br><br>  Damit ein Audit von Vorteil ist, muss es mehr oder weniger regelmäßig sein.  Da wir alle vergesslich sind, ist es viel besser, Audit-Tools in ein spezielles Skript zu schreiben, das nicht nur regelmäßig ausgeführt wird, sondern im Idealfall die Ergebnisse analysiert, um sie besser lesbar zu machen. <br><br>  Hier stelle ich Ihnen jedoch drei wichtige Audit-Tools vor, mit denen Sie offene Ports, aktive Dienste und unnötige Softwarepakete anzeigen können.  Ihre Aufgabe ist es, all dies zu automatisieren. <br><br><h3>  Port-Scan </h3><br>  Ein Port gilt als "offen", wenn auf einem Host ein Prozess ausgeführt wird, der auf Anforderungen an diesem Port wartet.  Wenn Sie Ihre offenen Ports im Auge behalten, werden Sie besser verstehen, was genau auf Ihrem Server passiert. <br><br>  Sie wissen bereits, dass HTTP (80) - und SSH (22) -Ports wahrscheinlich auf einem normalen Webserver geöffnet sein sollten, sodass Sie nicht überrascht werden.  Es ist jedoch viel wichtiger, auf andere, unerwartete Ergebnisse zu achten.  Der Befehl netstat zeigt alle offenen Ports sowie eine Menge Informationen darüber an, wie sie verwendet werden. <br><br>  In diesem Beispiel testen wir einen sehr typischen Mehrzweckserver, und der Befehl <code>-n</code> weist <code>netstat</code> an, alle numerischen Ports und Adressen zu aktivieren.  <code>-l</code> nur Listening-Sockets und <code>-p</code> fügt die Prozess-ID des Listening-Programms hinzu.  Natürlich, wenn Sie etwas sehen - handeln. <br><br><pre> <code class="hljs pgsql"># netstat -npl Active Internet connections (<span class="hljs-keyword"><span class="hljs-keyword">only</span></span> servers) Proto <span class="hljs-keyword"><span class="hljs-keyword">Local</span></span> Address <span class="hljs-keyword"><span class="hljs-keyword">Foreign</span></span> Address State PID/Program <span class="hljs-type"><span class="hljs-type">name</span></span> tcp <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">3306</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">403</span></span>/mysqld tcp <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:<span class="hljs-number"><span class="hljs-number">139</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">270</span></span>/smbd tcp <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">333</span></span>/sshd tcp <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:<span class="hljs-number"><span class="hljs-number">445</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">270</span></span>/smbd tcp6 :::<span class="hljs-number"><span class="hljs-number">80</span></span> :::* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">417</span></span>/apache2 […]</code> </pre><br>  In den letzten Jahren wurde <code>ss</code> immer häufiger anstelle von <code>netstat</code> .  Nur für den Fall: Wenn Sie sich eines Abends in einem Unternehmen befinden und jemand Sie nach ss fragt, sollte dieses Beispiel (in dem alle installierten SSH-Verbindungen aufgeführt sind) informativ genug sein, damit Sie sich dem Schmutz nicht stellen können: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> ss <span class="hljs-literal"><span class="hljs-literal">-o</span></span> state established <span class="hljs-string"><span class="hljs-string">'( dport = :ssh or sport = :ssh )'</span></span> Netid Recv<span class="hljs-literal"><span class="hljs-literal">-Q</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Send-Q</span></span> Local Address:Port Peer Address:Port tcp <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">3.1</span></span>:<span class="hljs-number"><span class="hljs-number">39874</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">3.96</span></span>:ssh timer:(keepalive,<span class="hljs-number"><span class="hljs-number">18</span></span>min,<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><h3>  Aktive Dienste überprüfen </h3><br>  Wenn Sie eine kurze Momentaufnahme der vom <code>system</code> und derzeit auf Ihrem Computer aktiven Dienste erstellen, hilft der Computer dabei, unerwünschte Aktivitäten zu identifizieren.  Der Befehl <code>systemctl</code> kann alle vorhandenen Dienste <code>systemctl</code> , und dann kann ihre Liste auf diejenigen <code>systemctl</code> werden, deren Beschreibung <code>enabled</code> enthält.  Es werden also nur aktive Dienste zurückgegeben. <br><br><pre> <code class="hljs mel"># systemctl list-<span class="hljs-keyword"><span class="hljs-keyword">unit</span></span>-files — type=service — state=enabled autovt@.service enabled bind9.service enabled cron.service enabled dbus-org.freedesktop.thermald.service enabled docker.service enabled getty@.service enabled haveged.service enabled mysql.service enabled networking.service enabled resolvconf.service enabled rsyslog.service enabled ssh.service enabled sshd.service enabled syslog.service enabled systemd-timesyncd.service enabled thermald.service enabled unattended-upgrades.service enabled ureadahead.service enabled</code> </pre> <br>  Wenn Sie hier etwas finden, das offensichtlich nicht <code>systemctl</code> , können Sie den Dienst <code>systemctl</code> , um den Dienst zu beenden und sicherzustellen, dass er beim nächsten Start nicht neu <code>systemctl</code> . <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># systemctl stop haveged # systemctl disable haveged</span></span></code> </pre> <br>  Tatsächlich gibt es in diesem Beispiel nichts Dunkles und Düsteres, das ich in diesem Beispiel stoppe: Es ist ein solches Tool, das ich häufig ausführe, um zufällige Hintergrundsystemaktivitäten zu erstellen, wenn ich Verschlüsselungsschlüssel erstelle. <br>  Suchen Sie nach installierten Programmen <br><br>  Könnte jemand ohne Ihr Wissen Programme im System installieren?  Um das herauszufinden, müssen Sie schauen.  Der Befehl <code>yum list installed</code> oder im Fall von Debian / Ubuntu <code>dpkg — list</code> gibt Ihnen eine detaillierte Zusammenfassung, und der Befehl remove sollte alle Pakete entfernen, die wir nicht benötigen. <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum list installed # yum remove packageName</span></span></code> </pre> <br>  So wird das gleiche in Ubuntu gemacht: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># dpkg --list # apt-get remove packageName</span></span></code> </pre> <br>  Es ist auch nützlich, die Änderungen zu verfolgen, die an Ihren Systemkonfigurationsdateien vorgenommen werden. Wir werden dies in Kapitel 11 erläutern. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425571/">https://habr.com/ru/post/de425571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425559/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 10: Symbolische Ausführung, Teil 3</a></li>
<li><a href="../de425561/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 10: Symbolische Ausführung, Teil 2</a></li>
<li><a href="../de425563/index.html">Kalifornien verbietet den Verkauf von IoT-Geräten mit oder ohne einfache Passwörter</a></li>
<li><a href="../de425565/index.html">Schnelle Festkomma-Mathematik für Finanzanwendungen in Java</a></li>
<li><a href="../de425569/index.html">PCB-Funktionstests</a></li>
<li><a href="../de425575/index.html">Neuroinflammation</a></li>
<li><a href="../de425581/index.html">Jetpack 11. Oktober 1961: Der Präsident öffnete den Mund ...</a></li>
<li><a href="../de425583/index.html">Alles, was Robomobile noch verblüfft, angefangen bei Möwen</a></li>
<li><a href="../de425587/index.html">Erster Versuch mit Mäusen mit allotopischer Expression geplant</a></li>
<li><a href="../de425589/index.html">Anti-Aging-Nachrichten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>