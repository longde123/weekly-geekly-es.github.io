<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’†ğŸ¾ ğŸ‘ğŸ¿ ğŸ˜˜ SystÃ¨mes distribuÃ©s. ModÃ¨les de conception. Critique de livre ğŸ¤ ğŸ›’ ğŸš£ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour chers collÃ¨gues. Aujourd'hui, nous publions une traduction de la prochaine critique du site de Ben Neidel - ce site vous intÃ©ressera certainem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SystÃ¨mes distribuÃ©s. ModÃ¨les de conception. Critique de livre</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/442514/"> Bonjour chers collÃ¨gues.  Aujourd'hui, nous publions une traduction de la prochaine critique du site de Ben Neidel - ce site vous intÃ©ressera certainement dans l'original.  Cette fois, nous parlerons du livre " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Distributed Systems. Design Patterns</a> ", qui complÃ¨te le livre " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Master Kubernetes</a> " qui a Ã©tÃ© publiÃ© au dÃ©but de cette annÃ©e et, en substance, est un analogue du GoF pour la conception de systÃ¨mes distribuÃ©s. <br><br><img src="https://habrastorage.org/webt/kv/we/4c/kvwe4cf94jbziiik3j87ywbjgyi.png"><br><br>  Bonne lecture. <br><a name="habracut"></a><br>  Au cours du week-end, j'ai lu le livre Distributed Systems.  Design Patterns, par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Brendan Burns</a> .  J'ai vraiment aimÃ© le livre, mÃªme si, je dois l'avouer, je m'attendais Ã  y trouver un peu de matiÃ¨re diffÃ©rente.  Ainsi, dans la description du livre, les conteneurs ne sont mentionnÃ©s qu'en passant.  Dans le mÃªme temps, bien que les modÃ¨les dÃ©crits dans le livre s'appliquent non seulement Ã  la conteneurisation, presque tous les modÃ¨les dÃ©crits ici sont donnÃ©s dans le contexte du conteneur, puis ils sont pris en compte dans le pipeline de dÃ©ploiement de Kubernetes.  Cela s'est avÃ©rÃ© d'ailleurs.  Je commence tout juste Ã  me familiariser avec le dÃ©veloppement et le dÃ©ploiement orientÃ©s conteneurs, et discuter des modÃ¨les architecturaux d'un tel point de vue Â«conteneurÂ» a Ã©tÃ© une rÃ©vÃ©lation pour moi.  Cette approche m'a aidÃ© Ã  bien comprendre comment dans le paysage des microservices les petits services sont correctement diffÃ©renciÃ©s, chacun ayant une opportunitÃ© spÃ©cifique. <br><br>  L'auteur du livre, Brendan Burns, est le co-fondateur du projet open source Kubernetes.  Par consÃ©quent, il n'est pas surprenant que tous ses exemples d'application soient construits autour du dÃ©ploiement de conteneurs basÃ©s sur des fichiers de configuration de Kubernetes.  Au moment de lire le livre, j'Ã©tais un peu versÃ© dans Docker et je ne savais rien de Kubernetes.  Ainsi, j'ai essayÃ© de comprendre le Â«butÂ» des fichiers de configuration de Kubernetes en les lisant simplement.  Cependant, je pense que le livre sera plus utile si le lecteur a au moins une certaine expÃ©rience avec Kubernetes. <br><br>  En lisant le livre, je n'ai pas pu me dÃ©barrasser des associations avec le travail Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ModÃ¨les d'intÃ©gration pour les applications d'entreprise</a> Â» de Gregor Hope et Bobby Wolf.  Beaucoup de modÃ¨les discutÃ©s par Burns sont trÃ¨s similaires aux modÃ¨les de file d'attente de messages discutÃ©s par Hope et Wolfe.  En fait, je dois dire que de nombreux modÃ¨les sont mÃªme mentionnÃ©s dans les deux livres de la mÃªme maniÃ¨re (par exemple, Scatter / Gather).  C'est logique, car le thÃ¨me des deux livres est la partition de systÃ¨mes monolithiques complexes en un ensemble de petits services rÃ©utilisables Ã©troitement adaptÃ©s.  Je pense que l'on peut mÃªme affirmer que Burns dÃ©crit des approches spÃ©cifiques qui seront utiles dans la mise en Å“uvre des services de producteur et des services de consommation impliquÃ©s dans le fonctionnement des workflows basÃ©s sur les messages, les mÃªmes que ceux dÃ©crits dans le livre Â«Enterprise Application Integration TemplatesÂ». <br><br>  Encore une fois, je crois que les parallÃ¨les tracÃ©s entre ces deux livres tÃ©moignent de la puissance des modÃ¨les de conception.  Ã€ la fois dans la faÃ§on dont ils nous conduisent Ã  des solutions Ã©prouvÃ©es et dans le fait que les modÃ¨les de conception facilitent la communication technique, car ils nous permettent de raisonner dans un langage commun. <br><br>  Dans le mÃªme temps, l'une des approches que j'ai le plus apprÃ©ciÃ©e est dÃ©crite dans le livre Â«Distributed Systems.  Design Patterns Â»est prÃ©cisÃ©ment liÃ© Ã  la consommation de la file d'attente de messages.  Burns conseille de ne pas forcer le conteneur de travail Ã  extraire les messages directement du systÃ¨me (similaire Ã  la faÃ§on dont cela se fait dans le systÃ¨me Simple Queue Service (SQS) d'Amazon), mais de crÃ©er un Â«ambassadeurÂ» (modÃ¨le Ambassador).  Un tel conteneur Â«ambassadeurÂ» sera dÃ©ployÃ© avec le conteneur de travail et fournira une API gÃ©nÃ©ralisÃ©e pour manipuler les files d'attente.  Le conteneur Ambassador vous permet d'abstraire les dÃ©tails d'implÃ©mentation liÃ©s au stockage permanent des Ã©lÃ©ments dans la file d'attente de messages, afin que le conteneur de travail soit complÃ¨tement indÃ©pendant de toute solution technologique spÃ©cifique. <br><br>  Â«L'ambassadeur du conteneur-source de la file d'attente de travailÂ» n'est qu'un exemple d'un sujet transversal qui traverse le livre comme un fil rouge: utilisez des collections de petits conteneurs pour que chaque conteneur individuel puisse se concentrer sur une tÃ¢che spÃ©cifique et Ãªtre aussi rÃ©utilisable que possible.  Burns explore ce concept au niveau du conteneur individuel, en parlant de paramÃ©trage des conteneurs Ã  l'aide d'arguments de ligne de commande et de variables d'environnement.  Puis il monte d'un niveau, parle des modÃ¨les de side-car multi-conteneurs et d'ambassadeur dans un contexte Ã  nÅ“ud unique.  Enfin, il montre comment crÃ©er une puissante architecture de microservices Ã  l'aide de modÃ¨les multi-conteneurs. <br><br>  Je pense que Burns a parfaitement articulÃ© le "rÃªve" de l'ensemble du paysage des microservices: <br><br><blockquote>  L'approche microservice prÃ©sente de nombreux avantages, dont beaucoup sont liÃ©s Ã  la fiabilitÃ© et Ã  la flexibilitÃ©.  Les microservices divisent l'application en petites parties, chacune Ã©tant responsable de la fourniture d'un service spÃ©cifique.  En rÃ©duisant la portÃ©e des services, chaque service est en mesure de dÃ©velopper et de maintenir une Ã©quipe qui peut Ãªtre alimentÃ©e avec deux pizzas. <br><br>  La rÃ©duction de la taille de l'Ã©quipe rÃ©duit Ã©galement le coÃ»t de maintien de ses activitÃ©s. <br><br>  De plus, l'Ã©mergence d'une interface formelle entre les microservices affaiblit l'interdÃ©pendance des Ã©quipes et Ã©tablit un contrat fiable entre les services.  Un tel contrat officiel rÃ©duit le besoin d'une synchronisation Ã©troite de l'Ã©quipe, car l'Ã©quipe qui fournit l'API comprend dans quelle mesure il est nÃ©cessaire d'assurer la compatibilitÃ©, et l'Ã©quipe qui utilise l'API peut compter sur un service stable sans se soucier des dÃ©tails de la mise en Å“uvre du service consommÃ©.  Une telle dÃ©composition permet aux Ã©quipes de contrÃ´ler indÃ©pendamment le rythme de dÃ©veloppement et le calendrier de sortie des nouvelles versions, ce qui leur donne la possibilitÃ© d'itÃ©rer, amÃ©liorant ainsi le code de service. <br><br>  Enfin, la division en microservices augmente l'Ã©volutivitÃ©.  Ã‰tant donnÃ© que chaque composant est allouÃ© Ã  un service distinct, il peut Ãªtre mis Ã  l'Ã©chelle indÃ©pendamment des autres </blockquote><br>  (p. 79-80 en traduction russe) <br><br>  Je parle du "rÃªve" car, comme le reconnaÃ®t Burns lui-mÃªme, il est difficile de concevoir un systÃ¨me de microservices et de concevoir son architecture.  Et la surveillance et le dÃ©bogage d'un tel systÃ¨me est beaucoup plus compliquÃ© que la surveillance et le dÃ©bogage d'un analogue monolithique.  Juste avec cela, je peux facilement Ãªtre d'accord.  Selon ma propre expÃ©rience limitÃ©e de travail avec les microservices, je confirme que les services partagÃ©s deviennent rapidement hautement connectÃ©s et que les Â«contrats fiablesÂ» entre les services deviennent rapidement une cible mouvante, subissant de plus en plus de nouveaux changements. <br><br>  En conclusion, je voudrais aborder le concept FaaS - Â«fonctionne comme des servicesÂ».  Des systÃ¨mes comme Lambda Service d'Amazon me font me sentir mÃ©langÃ©.  Dans un sens extrÃªmement abstrait, j'aime de tels systÃ¨mes, mais je ne sais pas comment ils se manifestent dans une application particuliÃ¨re.  Burns aborde FaaS dans la partie II sur les Â«ModÃ¨les de conception des systÃ¨mes de serviceÂ», mais malheureusement cela ne clarifie pas complÃ¨tement le problÃ¨me de Faas pour moi. <br><br>  J'ai vraiment aimÃ© que Burns recommande d'utiliser FaaS pour rÃ©soudre uniquement un sous-ensemble des problÃ¨mes connus: <br><br><blockquote>  Comme pour les autres outils de dÃ©veloppement de systÃ¨mes distribuÃ©s, vous souhaiterez peut-Ãªtre utiliser une solution particuliÃ¨re (par exemple, le traitement orientÃ© Ã©vÃ©nement) comme outil universel.  La vÃ©ritÃ© est qu'une solution particuliÃ¨re rÃ©sout gÃ©nÃ©ralement des problÃ¨mes particuliers.  Dans un certain contexte, il s'avÃ©rera Ãªtre un outil puissant, mais le tirer par les oreilles pour rÃ©soudre des problÃ¨mes communs crÃ©e des architectures complexes et fragiles. </blockquote><br>  (p. 135 en traduction russe) <br><br>  De plus, merci beaucoup Ã  lui d'avoir mentionnÃ© les difficultÃ©s qui se posent lors de l'utilisation de FaaS: <br><br><blockquote>  Comme mentionnÃ© dans la section prÃ©cÃ©dente, le dÃ©veloppement de systÃ¨mes utilisant l'approche FaaS vous oblige Ã  faire des composants systÃ¨me faiblement couplÃ©s.  Chaque fonction est indÃ©pendante par dÃ©finition.  Toutes les interactions sont effectuÃ©es sur le rÃ©seau.  Les instances de fonction n'ont pas leur propre mÃ©moire; par consÃ©quent, elles nÃ©cessitent un stockage partagÃ© pour stocker l'Ã©tat.  L'affaiblissement forcÃ© de la connectivitÃ© des Ã©lÃ©ments du systÃ¨me peut augmenter la flexibilitÃ© et la vitesse de dÃ©veloppement des services, mais en mÃªme temps peut compliquer considÃ©rablement son support. <br>  En particulier, il est assez difficile de voir la structure globale du service, de dÃ©terminer comment les fonctions sont intÃ©grÃ©es les unes aux autres, de comprendre quoi et pourquoi s'est mal passÃ© en cas de dÃ©faillance.  De plus, la nature orientÃ©e requÃªtes et sans serveur des fonctions signifie que certains problÃ¨mes seront difficiles Ã  dÃ©tecter. </blockquote><br>  (p. 136-137 en traduction russe) <br><br>  Encore une fois, j'ai Ã©tÃ© surpris par le fait que la plupart des systÃ¨mes FaaS ne sont pas trop bons pour rÃ©soudre des tÃ¢ches qui nÃ©cessitent un traitement actif: <br><br><blockquote>  ... en outre, en raison de l'implÃ©mentation de services sans serveur, le temps d'exÃ©cution d'une instance de fonction est gÃ©nÃ©ralement limitÃ©.  Cela signifie que l'approche FaaS n'est gÃ©nÃ©ralement pas adaptÃ©e aux applications qui nÃ©cessitent un long traitement de donnÃ©es en arriÃ¨re-plan.  (P. 138 en traduction russe) <br>  Enfin, j'ai Ã©tÃ© satisfait de la remarque selon laquelle les FaaS deviennent Ã©conomiquement inefficaces s'il est impossible d'assurer un fonctionnement long et ininterrompu du processeur: <br>  Mais si vous avez tellement de demandes que la fonction est constamment active, vous risquez de surpayer le nombre de demandes traitÃ©es. <br><br>  ... Ã  mesure que le service se dÃ©veloppe, le nombre de demandes traitÃ©es augmente Ã  un niveau tel que le processeur est constamment occupÃ© Ã  les traiter.  Ã€ ce stade, les frais pour le nombre de demandes commencent Ã  devenir non rentables.  Le coÃ»t par unitÃ© de temps CPU des machines virtuelles cloud diminue Ã  mesure que des cÅ“urs sont ajoutÃ©s, ainsi qu'en rÃ©servant des ressources et des remises pour une utilisation Ã  long terme.  Le coÃ»t du paiement du nombre de demandes augmente gÃ©nÃ©ralement avec le nombre de demandes. </blockquote><br>  (p. 139-140 en traduction russe) <br><br>  En consÃ©quence, je ne comprenais toujours pas: quand est-il prÃ©fÃ©rable d'utiliser des Â«fonctions comme servicesÂ»?  Je note que Burns dÃ©crit briÃ¨vement le travail avec des tÃ¢ches Ã  court terme orientÃ©es Ã©vÃ©nements qui ne chargent pas beaucoup le processeur, comme l'authentification Ã  deux facteurs (2FA).  Cependant, Ã©tant donnÃ© que nous parlons de petites tÃ¢ches Ã  court terme Ã  faible coÃ»t, la question se pose: pourquoi devraient-elles Ãªtre mises Ã  l'Ã©chelle indÃ©pendamment?  Pourquoi ne pas simplement inclure ces fonctionnalitÃ©s dans un autre service de conteneur Ã©troitement liÃ© au premier? <br><br>  J'espÃ¨re mieux gÃ©rer ces problÃ¨mes lorsque j'utiliserai les technologies FaaS dans la pratique. <br><br>  Mis Ã  part une certaine confusion avec FaaS, j'ai vraiment aimÃ© le livre.  Il est lu rapidement, facilement perÃ§u.  Cela nous rappelle une fois de plus l'Ã©norme potentiel d'affaiblissement de la connexion entre les composants Ã  tous les niveaux de dÃ©veloppement d'applications.  Enfin, il sera dÃ©sormais beaucoup plus facile pour moi de maintenir une conversation avec mes collÃ¨gues sur des sujets tels que les Â«conteneurs SidecarÂ». </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442514/">https://habr.com/ru/post/fr442514/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442502/index.html">Nous transformons le lieu de travail en vÃ©lo couchÃ© pour 200 $</a></li>
<li><a href="../fr442504/index.html">Proxy PHP Xdebug: lorsque les fonctionnalitÃ©s standard de Xdebug ne suffisent pas</a></li>
<li><a href="../fr442506/index.html">La Russie est-elle punie pour commerce illÃ©gal de donnÃ©es personnelles?</a></li>
<li><a href="../fr442508/index.html">Comment udalenka accÃ©lÃ¨re l'innovation sur GitLab</a></li>
<li><a href="../fr442512/index.html">Personnalisation de Django ORM sur l'exemple de ZomboDB</a></li>
<li><a href="../fr442516/index.html">Pandas Guide to Big Data Analysis</a></li>
<li><a href="../fr442518/index.html">Top 10 des techniques de piratage Web 2018</a></li>
<li><a href="../fr442520/index.html">Affaire. Ã‰conomie de 300 000 p. par mois sur la publicitÃ© contextuelle</a></li>
<li><a href="../fr442522/index.html">Intuitive RL (Reinforcement Learning): Introduction Ã  Advantage-Actor-Critic (A2C)</a></li>
<li><a href="../fr442524/index.html">Comment accroÃ®tre la sÃ©curitÃ© des systÃ¨mes d'identification personnelle et de contrÃ´le d'accÃ¨s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>