<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜¯ ğŸ˜’ ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Ù…Ø±Ø§Ù‚Ø¨Ø© ØºØ±Ù Zadarma Zabbix ğŸ‘¸ğŸ¾ ğŸï¸ ğŸ¤¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ø£Ù‚Ø¯Ù… Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§ Ø¬Ø§Ù‡Ø²Ù‹Ø§ Ù„Ù€ Zabbix ÙˆÙ†Øµ Ø¨Ø±Ù…Ø¬ÙŠ Python Ù„Ø§ÙƒØªØ´Ø§Ù Ø£Ø±Ù‚Ø§Ù… Ù…ÙˆÙØ±ÙŠ Zadarma Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ (Ø£Ø±Ù‚Ø§Ù… Ø¬Ø¯ÙŠØ¯Ø© ØŒ Ø¨Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªÙŠ Ø§Ø´ØªØ±ÙŠØªÙ‡Ø§). 

 ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ù‚Ø§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ù…Ø±Ø§Ù‚Ø¨Ø© ØºØ±Ù Zadarma Zabbix</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416231/" style=";text-align:right;direction:rtl">  Ø£Ù‚Ø¯Ù… Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§ Ø¬Ø§Ù‡Ø²Ù‹Ø§ Ù„Ù€ Zabbix ÙˆÙ†Øµ Ø¨Ø±Ù…Ø¬ÙŠ Python Ù„Ø§ÙƒØªØ´Ø§Ù Ø£Ø±Ù‚Ø§Ù… Ù…ÙˆÙØ±ÙŠ Zadarma Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ (Ø£Ø±Ù‚Ø§Ù… Ø¬Ø¯ÙŠØ¯Ø© ØŒ Ø¨Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªÙŠ Ø§Ø´ØªØ±ÙŠØªÙ‡Ø§). <br><br>  ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø´ØºÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ÙˆÙ„ Ø§Ù„ØºØ±Ù.  ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ Ù…Ø¹ Zadarma API Ø£Ùˆ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª MySQL. <br><br>  Ù„Ù„Ø¹Ù…Ù„ Ù…Ø¹ MySQL ØŒ Ù…Ù† Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³Ø¨Ù‚Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø¬ Ø£Ùˆ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ù…Ø®Ø·Ø· Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù†ØµÙŠ Ù…Ù†ÙØµÙ„. <br><br>  ÙƒÙ„Ø§ Ø§Ù„Ù†ØµÙŠÙ† ØªØ­Øª Ø§Ù„Ù‚Ø·Ø¹. <br><a name="habracut"></a><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">zadarma_number.py</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ÙŠØ¬Ø¨ ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ ÙÙŠ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ù…Ø¹ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠØ© Ù„Ø¹Ø§Ù…Ù„ zabbiz ØŒ Ù„Ø¯ÙŠ <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">/etc/zabbix/scripts/</code> </pre> <br>  Ø£ÙŠØ¶Ù‹Ø§ ØŒ Ø§Ù…Ù†Ø­Ù‡ Ø§Ù„Ø­Ù‚ ÙÙŠ Ø§Ù„Ø±ÙƒØ¶ ÙˆÙÙ‚Ø· ÙÙŠ Ø­Ø§Ù„Ø© ØªØºÙŠÙŠØ± Ù…Ø§Ù„Ùƒ ÙˆÙ…Ø¬Ù…ÙˆØ¹Ø© zabbix: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">chmod +x /etc/zabbix/scripts/zadarma_number.py chown zabbix:zabbix /etc/zabbix/scripts/zadarma_number.py</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#! /usr/bin/env python3 import json import pymysql import argparse import sys import base64 import hmac import requests from hashlib import sha1, md5 from collections import OrderedDict from urllib.parse import urlencode api_key = '222c2fd22c2d2222a2b2' secret_key = '2a2f2222cee2222f2222' database_address = '192.168.10.18' database_name = 'asterisk' database_user = 'asterisk' database_password = 'dFgXuasfvgas45hAkEb2' zadarma_api_url = 'http://api.zadarma.com' monthly_fee_all = 0 def sql_result(sql): cursor.execute(sql) data = cursor.fetchall() return data def str_for_json(data): json_data = [] for result in data: json_data.append(dict(zip(['{#NUMBER}'], result))) json_data = ({"data":json_data}) return json.dumps(json_data) # return json.dumps(json_data) def createParser(): parser = argparse.ArgumentParser( prog='Zadarma for Zabbix', description='''       Zadarma       zabbiz .''', epilog='''(c)  2018.  ,  ,       .''' ) parser.add_argument('-l', '--allnumbers', action='store_true', help='"Show all found phone numbers in a format suitable for zabbix. ' ' Running a script without parameters (or with the -f option) leads to the same result."') parser.add_argument('-n', '--number', help = '"Phone number and -s or -S or -g or -e or -d or -m or -a "', metavar = 'phone number') parser.add_argument('-S', '--status', action='store_true') parser.add_argument('-g', '--start_date', action='store_true') parser.add_argument('-e', '--stop_date', action='store_true') parser.add_argument('-d', '--description', action='store_true') parser.add_argument('-s', '--sip', action='store_true', help='"can be used in combination with "-c""') parser.add_argument('-m', '--monthly_fee', action='store_true', help='"The amount required to renew a phone number or all phone numbers"') parser.add_argument('-a', '--autorenew', action='store_true') parser.add_argument('-b', '--balance', action='store_true', help='All balance numbers') parser.add_argument('-f', '--force_API', action='store_true',default=False, help = '"Force the use of api, the database is ignored"') parser.add_argument('-c', '--cut', type=int, default=0, help='''Used only in conjunction with "-s" 0 - The whole line, 1- Part of the string before "@", 2 - Part of the line after "@"''', metavar='[0,1,2] or none') return parser def api_zapros(method,data): if not data: data = {'format': 'json'} sorted_dict_params = OrderedDict(sorted(data.items())) query_string = urlencode(sorted_dict_params) h = md5(query_string.encode('utf8')).hexdigest() data = method + query_string + h hashed = hmac.new(secret_key.encode('utf8'), data.encode('utf8'), sha1) auth = api_key + ':' + base64.b64encode(bytes(hashed.hexdigest(), 'utf8')).decode() headers = {'User-Agent': '-', 'Authorization': auth} url = zadarma_api_url + method + '?' + query_string; r = requests.get(url, headers=headers) r.raise_for_status() return json.loads(r.text) def no_sql(*args): number = args[0] parametr = args[1] for number_string in numbers_result['info']: if number_string['number'] == number: if number_string[parametr] == 'true' or number_string[parametr] == 'on': return '0' elif number_string[parametr] == 'false' or number_string[parametr] == 'off': return '1' else: return number_string[parametr] def zapros(*args): if namespace.force_API: return no_sql(namespace.number,args[0]) else: return sql_result(sql)[0][0] parser = createParser() namespace = parser.parse_args(sys.argv[1:]) if not namespace.force_API: try: db = pymysql.connect(database_address, database_user, database_password, database_name) cursor = db.cursor() except pymysql.Error as e: print('\n\t!!!!!!!!!!!SQL no connect!!!!!!!!!!!\n') print(e) exit(1) else: try: numbers_result = api_zapros('/v1/direct_numbers/', '') balance_info = api_zapros('/v1/info/balance/', '') except Exception as e: print('Error connect API zadarma') exit(1) # print('namespace', namespace) if namespace.number and namespace.status: sql = "SELECT status FROM zadarma_numbers WHERE number = %s;" % (namespace.number) print(zapros('status')) elif namespace.number and namespace.start_date: sql = "SELECT start_date FROM zadarma_numbers WHERE number = %s;" % (namespace.number) print(zapros('start_date')) elif namespace.number and namespace.stop_date: sql = "SELECT stop_date FROM zadarma_numbers WHERE number = %s;" % (namespace.number) print(zapros('stop_date')) elif namespace.number and namespace.autorenew: sql = "SELECT autorenew FROM zadarma_numbers WHERE number = %s;" % (namespace.number) print(zapros('autorenew')) elif namespace.number and namespace.description: sql = "SELECT description FROM zadarma_numbers WHERE number = %s;" % (namespace.number) print(zapros('description')) elif namespace.number and namespace.sip: sql = "SELECT sip FROM zadarma_numbers WHERE number = %s;" % (namespace.number) if namespace.cut == 0: print(zapros('sip')) if namespace.cut == 1: try: print(zapros('sip').split('@')[0]) except IndexError: print(zapros('sip')) if namespace.cut == 2: try: print(zapros('sip').split('@')[1]) except IndexError: print(zapros('sip')) elif namespace.number and namespace.monthly_fee: sql = "SELECT monthly_fee FROM zadarma_numbers WHERE number = %s;" % (namespace.number) print(zapros('monthly_fee')) else: if namespace.number: # sql = "SELECT * FROM zadarma_numbers WHERE number = %s;" % (namespace.number) # print(zapros(namespace.number)) print(namespace.number, 'there are not enough arguments or incorrect combination of arguments') sys.exit(1) elif namespace.balance: if namespace.force_API: balance = balance_info['balance'] print(balance) else: print(sql_result('SELECT balance FROM zadarma_balance;')[0][0]) elif namespace.monthly_fee: if namespace.force_API: for result in numbers_result['info']: monthly_fee_all = monthly_fee_all + result['monthly_fee'] print(monthly_fee_all) else: print(sql_result('SELECT monthly_fee FROM zadarma_balance;')[0][0]) elif namespace.allnumbers: if namespace.force_API: json_data = [] for result in numbers_result['info']: print(result['number']) json_data.append(dict(zip(['{#NUMBER}'], [result['number']]))) json_data = ({"data": json_data}) print('jkgkgliuui',json.dumps(json_data)) else: data = sql_result('SELECT number FROM zadarma_numbers WHERE stop_date &gt; date') print(str_for_json(data)) else: if namespace.force_API: json_data = [] for result in numbers_result['info']: json_data.append(dict(zip(['{#NUMBER}'], [result['number']]))) json_data = ({"data": json_data}) print(json.dumps(json_data)) else: data = sql_result('SELECT number FROM zadarma_numbers WHERE stop_date &gt; date') print(str_for_json(data)) if not namespace.force_API: db.close()</span></span></code> </pre><br></div></div><br>  Ù…Ù† Ø§Ù„Ù†Ø§Ø­ÙŠØ© Ø§Ù„Ù†Ø¸Ø±ÙŠØ© ØŒ Ù‚Ø¯ ÙŠØªØ¨ÙŠÙ† Ø£Ù† Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ÙŠÙ†Ø© Ø£ÙƒØ«Ø± ØµÙ„Ø© ØŒ Ø­ÙŠØ« ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù†ØµÙŠ Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø¹Ø¯ ÙƒÙ„ Ù…ÙƒØ§Ù„Ù…Ø©.  ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ ØŒ Ù‚Ø¯ ØªØªØ­ÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø£Ù†Ù‡Ø§ Ø£ÙƒØ«Ø± ØµÙ„Ø© Ø¨Ù‚Ù„ÙŠÙ„ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Zabbix. <br><br>  ÙÙŠ Ù‚Ø§Ù„Ø¨ Zabbix ØŒ ÙŠÙØ±Ø¶ Ø§Ù„Ù…Ø§ÙƒØ±Ùˆ {$ FORCE_API} Ø§Ù„Ù†Øµ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ù„Ù„Ø¹Ù…Ù„ Ù…Ø¹ Zadarma API. <br>  ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø§ÙƒØ±Ùˆ {$ CUT} Ù„ØªÙ‚Ø³ÙŠÙ… Ø³Ù„Ø³Ù„Ø© Ø·Ù„Ø¨ SIP-URI Ø¥Ù„Ù‰ Ø£Ø¬Ø²Ø§Ø¡ Ù‚Ø¨Ù„ "@" ÙˆØ¨Ø¹Ø¯Ù‡Ø§. <br><br>  ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ Ø¹Ù„Ù‰ Ø¹Ø¯Ø© Ù…ÙØ§ØªÙŠØ­ Ù„Ù„ØªØ´ØºÙŠÙ„. <br><br>  Ø¨Ø¯ÙˆÙ† Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø£Ùˆ Ù…Ø¹ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ -l ØŒ Ø³ÙŠØ¹ÙŠØ¯ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¨ØªÙ†Ø³ÙŠÙ‚ json ØŒ ÙˆÙ‡Ùˆ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„ÙƒØ´Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù† Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ zabbix. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø­ÙˆÙ„ Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: Zadarma Ù„Ù€ Zabbix [-h] [-l] [-n number number] [-S] [-g] [-e] [-d] [-s] <br>  [-m] [-a] [-b] [-f] [-c [0ØŒ1ØŒ2] Ø£Ùˆ Ù„Ø§ Ø´ÙŠØ¡] <br><br>  ØªÙ… ØªØµÙ…ÙŠÙ… Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù„Ø±ØµØ¯ Ø¹Ø¯Ø¯ Ù…Ø²ÙˆØ¯ Zadarma Ùˆ <br>  ØªÙ… ØªØµÙ…ÙŠÙ…Ù‡ ÙÙŠ Ø§Ù„Ø£ØµÙ„ ÙƒØ¨Ø±Ù†Ø§Ù…Ø¬ Ù†ØµÙŠ Ù„ÙˆÙƒÙŠÙ„ zabbiz. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">optional arguments: -h, --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> show this <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> message and <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> -l, --allnumbers <span class="hljs-string"><span class="hljs-string">"Show all found phone numbers in a format suitable for zabbix. Running a script without parameters (or with the -f option) leads to the same result."</span></span> -n phone number, --number phone number <span class="hljs-string"><span class="hljs-string">"Phone number and -s or -S or -g or -e or -d or -m or -a "</span></span> -S, --status -g, --start_date -e, --stop_date -d, --description -s, --sip <span class="hljs-string"><span class="hljs-string">"can be used in combination with "</span></span>-c<span class="hljs-string"><span class="hljs-string">""</span></span> -m, --monthly_fee <span class="hljs-string"><span class="hljs-string">"The amount required to renew a phone number or all phone numbers"</span></span> -a, --autorenew -b, --balance All balance numbers -f, --force_API <span class="hljs-string"><span class="hljs-string">"Force the use of api, the database is ignored"</span></span> -c [0,1,2] or none, --cut [0,1,2] or none Used only <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> conjunction with <span class="hljs-string"><span class="hljs-string">"-s"</span></span> 0 - The whole line, 1- Part of the string before <span class="hljs-string"><span class="hljs-string">"@"</span></span>, 2 - Part of the line after <span class="hljs-string"><span class="hljs-string">"@"</span></span></code> </pre> <br></div></div><br>  ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙØ§ØªÙŠØ­ "-S ØŒ -s ØŒ -g ØŒ -e ØŒ -d ØŒ -a" ÙÙ‚Ø· Ù…Ø¹ Ø±Ù‚Ù… <br>  ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… -m Ù…Ø¹ Ø£Ùˆ Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù… <br>  Ù…ÙØªØ§Ø­-Ø¨ ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù… <br>  Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ -c ÙÙ‚Ø· Ù…Ø¹ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ -s <br>  ÙŠÙØ±Ø¶ Ø±Ù…Ø² Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ -f Ø§Ø³ØªØ®Ø¯Ø§Ù… API ØŒ Ø¨Ø¯ÙˆÙ†Ù‡ ØŒ ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø¹ Ø£ÙŠ Ù…ÙØªØ§Ø­ ØªØ­ÙˆÙŠÙ„. <br><br>  Ø§Ù„Ù†Øµ Ø§Ù„Ø«Ø§Ù†ÙŠ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Script API_to_MySql</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  Ù„Ø°Ø§ Ø£Ø¹Ø·Ù‡ Ø§Ù„Ø­Ù‚ ÙÙŠ Ø§Ù„Ø¬Ø±ÙŠ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">chmod +x ./main.py</code> </pre><br>  ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ ÙˆÙ…ÙƒØ§Ù† ÙˆØ¶Ø¹Ù‡ ØŒ ØªÙ‚Ø±Ø± Ø¨Ù†ÙØ³Ùƒ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#! /usr/bin/env python3 from hashlib import sha1, md5 from collections import OrderedDict from urllib.parse import urlencode import hmac import requests import base64 import json import pymysql api_key = '222c2fd22c2d2222a2b2' secret_key = '2a2f2222cee2222f2222' database_address = '192.168.10.18' database_name = 'asterisk' database_user = 'asterisk' database_password = 'dFgXuasfvgas45hAkEb2' zadarma_api_url = 'http://api.zadarma.com' monthly_fee_all = 0 debug = True # debug = False db = pymysql.connect(database_address, database_user, database_password, database_name) cursor = db.cursor() def sql_insert(): sql = "REPLACE zadarma_numbers (id, date, number, number_name, description, sip, start_date, stop_date, monthly_fee, status, channels, autorenew) \ VALUES (NULL, UTC_TIMESTAMP(), '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s');" % \ (number,number_name, description, sip, start_date, stop_date, monthly_fee, status, channels, autorenew) try: # Execute the SQL command cursor.execute(sql) # Commit your changes in the database db.commit() except: # Rollback in case there is any error db.rollback() def zapros(method,data): if not data: data = {'format': 'json'} sorted_dict_params = OrderedDict(sorted(data.items())) query_string = urlencode(sorted_dict_params) h = md5(query_string.encode('utf8')).hexdigest() data = method + query_string + h hashed = hmac.new(secret_key.encode('utf8'), data.encode('utf8'), sha1) auth = api_key + ':' + base64.b64encode(bytes(hashed.hexdigest(), 'utf8')).decode() headers = {'User-Agent': '-', 'Authorization': auth} url = zadarma_api_url + method + '?' + query_string; r = requests.get(url, headers=headers) return json.loads(r.text) # print(r.text) numbers = zapros('/v1/direct_numbers/', '') if debug: print(numbers['info']) for res in numbers['info']: description = res['description'] number = res['number'] number_name = res['number_name'] start_date = res['start_date'] stop_date = res['stop_date'] sip = res['sip'] if res['autorenew'] == 'true': autorenew = 0 else: autorenew = 1 monthly_fee = res['monthly_fee'] if res['status'] == 'on': status = 0 else: status = 1 channels = res['channels'] monthly_fee_all = monthly_fee_all + monthly_fee if debug: print('number', number) print('description', description) print('sip',sip) print('number_name', number_name) print('start_date', start_date) print('stop_date', stop_date) print('monthly_fee',monthly_fee) print('status', status) # print('monthly_fee_all',monthly_fee_all) if autorenew != 0: if debug: print('!!!!!!!!!!!!!!!\nautorenew OFF\n!!!!!!!!!!!!!!!\n') if debug: print() sql_insert() balance_info = zapros('/v1/info/balance/','') balance = balance_info['balance'] if debug: print('balance', balance) print('monthly_fee_all',monthly_fee_all) sql = "REPLACE zadarma_balance (id, date, balance, monthly_fee) VALUES (NULL, UTC_TIMESTAMP(), '%s', '%s');" % (balance, monthly_fee_all) try: cursor.execute(sql) db.commit() except: db.rollback() if debug: print('doplata --&gt;', balance - monthly_fee_all ) print('monthly_fee_all', monthly_fee_all) db.close() &lt;spoiler title="  MySQL  "&gt;</span></span></code> </pre><br>  Ù„ØªØ¹Ø·ÙŠÙ„ Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ù„Ù‰ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… ØŒ Ù‚Ù… Ø¨Ø¥Ù„ØºØ§Ø¡ ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø®Ø· <br>  ØªØµØ­ÙŠØ­ = Ø®Ø·Ø£ <br><br></div></div><br>  Ù„ÙƒÙŠ ÙŠØ¹Ù…Ù„ ÙƒÙ„Ø§ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ÙŠÙ† ØŒ Ø³ØªØ­ØªØ§Ø¬ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¬Ø­ Ø¥Ù„Ù‰ ØªØ«Ø¨ÙŠØª "Ø§Ù„Ø·Ù„Ø¨Ø§Øª" <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">pip install requests</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø¬Ø¯ÙˆÙ„ Ù„Ù„Ø£Ø±Ù‚Ø§Ù…</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`zadarma_numbers`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`date`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0000-00-00 00:00:00'</span></span>, <span class="hljs-string"><span class="hljs-string">`number`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`number_name`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">60</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`description`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">60</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">`sip`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">80</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`start_date`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`stop_date`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`monthly_fee`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`status`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`channels`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`autorenew`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">205</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`zadarma_numbers`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`number`</span></span> (<span class="hljs-string"><span class="hljs-string">`number`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`calldate`</span></span> (<span class="hljs-string"><span class="hljs-string">`date`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`accountcode`</span></span> (<span class="hljs-string"><span class="hljs-string">`monthly_fee`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`zadarma_numbers`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT;</code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø¬Ø¯ÙˆÙ„ Ù„Ù„ØªÙˆØ§Ø²Ù†</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`zadarma_balance`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`date`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0000-00-00 00:00:00'</span></span>, <span class="hljs-string"><span class="hljs-string">`balance`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`monthly_fee`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`zadarma_balance`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`balance`</span></span> (<span class="hljs-string"><span class="hljs-string">`balance`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`calldate`</span></span> (<span class="hljs-string"><span class="hljs-string">`date`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`zadarma_balance`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT;</code> </pre><br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù…Ø³ØªÙˆØ¯Ø¹</a> Ù…Ø¹ Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø®Ù„ÙŠØ© ÙˆØ§Ù„Ù…Ø®Ø·ÙˆØ·Ø§Øª ÙˆÙ…Ù‚Ø§Ù„Ø¨. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar416231/">https://habr.com/ru/post/ar416231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar416213/index.html">ÙØªØ­ Ù†Ø¯ÙˆØ© Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª "Ø­Ù‚Ù† Ø§Ù„ØªØ¨Ø¹ÙŠØ© ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠ"</a></li>
<li><a href="../ar416215/index.html">Ù…Ù„Ø®Øµ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø·Ø¹Ø§Ù… ÙŠÙˆÙ†ÙŠÙˆ 2018</a></li>
<li><a href="../ar416217/index.html">ÙƒÙŠÙ Ù‚Ù…Øª Ø¨ØªÙˆØµÙŠÙ„ Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ù…Ù†Ø§ÙØ° Ø¬Ù‡Ø§Ø² Ø§Ù„Ø´Ø¨ÙƒØ© ÙÙŠ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø±Ø§Ù‚Ø¨Ø© Network MACMonitor</a></li>
<li><a href="../ar416219/index.html">Ø¨Ø¯Ø£Øª Yandex Ø¨ÙÙ‡Ø±Ø³Ø© Ù…Ø³ØªÙ†Ø¯Ø§Øª Google Ø¨ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±</a></li>
<li><a href="../ar416229/index.html">10 ÙƒØªØ¨ Ø¹Ù† Ø§Ù„ØªØ³ÙˆÙŠÙ‚ ÙˆØ§Ù„Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø°Ø§Øª Ø§Ù„ØµÙ„Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙ‚Ø±Ø£Ù‡Ø§ Ø§Ù„Ù…ØµÙ…Ù…</a></li>
<li><a href="../ar416235/index.html">Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙƒÙˆÙ†Ø§Øª Ù…Ø®ØµØµØ© Ù„Ù€ Bootstrap 4</a></li>
<li><a href="../ar416237/index.html">Ø£Ù† ØªØµØ¨Ø­ Ù…ØµÙ…Ù…Ù‹Ø§: Ù…Ù† Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø³ØªÙ‚Ù„ Ù…Ù† Ù†Ø²Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ Ø£ÙØ¶Ù„ Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ¥Ø·Ù„Ø§Ù‚ Ù…Ù†ØªØ¬Ùƒ</a></li>
<li><a href="../ar416239/index.html">Ø¯ÙˆØ± ÙˆÙˆØ¸Ø§Ø¦Ù PMO ÙÙŠ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØµÙ…ÙŠÙ…</a></li>
<li><a href="../ar416241/index.html">Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ù† Super Mario Bros Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Python</a></li>
<li><a href="../ar416243/index.html">Ø¨Ø¯Ø§Ø¦Ù„ Ù„Ù„ÙƒÙˆØ¨Ø§Ù„Øª ØŒ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø§Ø³ Ø§Ù„Ø¯Ù…ÙˆÙŠ Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ§Øª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>