<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôèüèæ üßòüèæ üîΩ Reverse engineering d'une station de soudage haut de gamme üë∂üèº üòê „ÄΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Ceci est la traduction de l' article original r√©alis√© par baragol ) 

 Nous avons eu un tas de photographies du PCB principal, une vid√©o YouTube avec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reverse engineering d'une station de soudage haut de gamme</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451246/"><img src="https://habrastorage.org/webt/zy/do/hq/zydohqpxzvzoygol3o6ci9wkebw.jpeg"><br><br>  <i>(Ceci est la traduction de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> original r√©alis√© par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">baragol</a> )</i> <br><br>  Nous avons eu un tas de photographies du PCB principal, une vid√©o YouTube avec des formes d'onde de tension de drain de MOSFET, un message sur le forum avec une ventilation des valeurs de capacit√© des condensateurs du circuit LC et √©galement un certain nombre de vid√©os de d√©ballage montrant le r√©chauffement du panne √† souder.  La seule chose qui m'a vraiment inqui√©t√© √©tait la vid√©o avec la mesure de la consommation √©lectrique maximale pendant le chauffage.  Il n'y a rien au monde plus impuissant et irresponsable et d√©prav√© que la cartouche br√ªl√©e nouvellement achet√©e pour 60 dollars d'Amazon.  Mais permettez-moi de commencer depuis le d√©but. <br><a name="habracut"></a><br><h4>  Introduction au sujet </h4><br>  Pour comprendre quel type d'appareil nous allons concevoir aujourd'hui, commen√ßons par nous rappeler bri√®vement les types de stations de soudage propos√©es et en quoi elles sont diff√©rentes. <br><br>  Comme vous l'avez peut-√™tre devin√©, tout le segment des prix bas de gamme de cet √©quipement est d√©tenu par des marques chinoises, qui clonent en grande partie la conception assez r√©ussie du fer √† souder japonais Hakko.  Le principe de fonctionnement du mod√®le d'origine et de ses nombreuses r√©pliques est tr√®s simple: un radiateur en nichrome ou √† couche mince transf√®re sa chaleur √† une panne √† souder d√©tachable, sa temp√©rature √©tant r√©gul√©e avec une unit√© de thermocouple ou une thermistance int√©gr√©e au radiateur.  Il s'agit d'une solution simple et bon march√©, mais sa qualit√© peut s'av√©rer l√©g√®rement loin d'√™tre parfaite dans les r√©pliques chinoises, par exemple un radiateur l√©g√®rement de mauvaise taille, un mat√©riau l√©g√®rement moins cher de la pointe, ce qui entra√Æne tous d'avoir √† envelopper le radiateur dans du papier d'aluminium, commander une pointe japonaise originale √† l'√©tranger, remplacer le connecteur par un plus puissant ... en d'autres termes, vous aurez votre assiette pleine en un rien de temps. <br><br>  Quelque part au milieu sur le spectre des prix se trouvent les stations de soudage originales de marques occidentales renomm√©es.  L'ERSA allemand, le Weller am√©ricain, le Hakko japonais - ce genre de marques.  Leur principe de fonctionnement est fondamentalement identique, sauf que vous n'avez pas vraiment besoin d'acc√©der √† vos ressources pour les faire fonctionner;  ils incluent de jolis goodies pr√™ts √† l'emploi, comme un c√¢ble en silicone souple qui ne fond pas au moindre contact du fer √† souder, et ... eh bien, il n'y a pas tellement de goodies en fait!  Le prix?  Correspond √† la promesse.  Les centaines de dollars √† d√©penser pour ces trucs peuvent affliger non seulement un humble amateur de bricolage qui aime passer ses soir√©es √† peaufiner son mat√©riel, mais m√™me une entreprise de taille moyenne. <br><br>  Cependant, l'article d'aujourd'hui porte sur quelque chose de diff√©rent.  Je vais vous parler du v√©ritable ph√©nom√®ne haut de gamme dans le monde des stations de soudage, √† savoir les fers √† souder √† induction fabriqu√©s aux √âtats-Unis de Metcal (ils sont actuellement produits sous cette marque par OK International).  En fait, plusieurs soci√©t√©s produisent ces √©quipements, par exemple en dehors de Metcal, je peux √©galement mentionner Thermaltronics, JBC et m√™me Hakko qui vendent un design similaire.  La conception op√©rationnelle du chauffage par induction de ces appareils est assez √©l√©gante: <br><br> <a href=""><img src="https://habrastorage.org/webt/u_/zy/lj/u_zyljn2jccu9qkjsywbyn1w7ro.jpeg"></a> <br><br>  Comme vous pouvez le voir, il ne contient aucun capteur de temp√©rature.  son embout √† souder est en cuivre avec un rev√™tement ferromagn√©tique qui, lorsqu'il est expos√© √† un champ magn√©tique alternatif √† haute fr√©quence (13,56 MHz), s'√©chauffe puis, √† une certaine temp√©rature, appel√©e temp√©rature de Curie, perd ses qualit√©s magn√©tiques et s'arr√™te chauffer plus loin.  Lorsque vous touchez le point de soudure, l'√©l√©ment ferromagn√©tique perd partiellement sa chaleur et l'inductance commence imm√©diatement √† transmettre sa puissance √† la pointe de soudure.  Les cartouches sont livr√©es avec quatre temp√©ratures fixes, dont vous n'avez vraiment besoin que de deux - pour le soudage au plomb et sans plomb.  C'est tout. <br><br>  OKI / Metcal produit plusieurs mod√®les de stations de soudage par induction √† des prix diff√©rents et avec une puissance de sortie diff√©rente.Cependant, la fourchette de prix de 1000 $ r√©pond √† toutes les envies de profiter de ce bel appareil, aussi beau qu'il puisse para√Ætre.  Ce qui m'am√®ne √† l'id√©e d'essayer d'√©conomiser de l'argent! <br><br><h4>  Problemm </h4><br>  Disons-le comme ceci: en utilisant uniquement des sources accessibles au public, pour entreprendre la r√©tro-ing√©nierie virtuelle du p√©riph√©rique d'origine MX-5200 et finir avec la conception d'un oscillateur de forme d'onde haute fr√©quence monocanal de classe grand public avec la puissance de sortie de 80W, qui reproduira autant que possible les fonctionnalit√©s de la station de soudage d'origine. <br><br>  Si vous effectuez une recherche en ligne, vous trouverez facilement un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">diagramme sch√©matique</a> de la g√©n√©ration pr√©c√©dente de la station Metcal MX-500, soigneusement copi√© de son PCB.  La mise en ≈ìuvre directe des id√©es de conception de ce diagramme ne fonctionnera pas car la puissance de sortie de cet √©quipement n'est que de 40 W et ne peut pas √™tre facilement augment√©e.  Cependant, cet ancien diagramme nous aidera √† comprendre le fonctionnement des assemblages cl√©s. <br><br>  Ainsi, les √©l√©ments suivants peuvent √™tre vus dans le diagramme: <br><br><ol><li>  Un g√©n√©rateur HF haute puissance avec trois circuits r√©sonants de sortie; </li><li>  Un convertisseur abaisseur d'impulsions pour alimenter le g√©n√©rateur (1), avec une tension de sortie allant de 17 √† 21 V; </li><li>  Un circuit de r√©troaction pour r√©guler la tension du convertisseur abaisseur (2) en fonction de la tension sur l'un des circuits r√©sonnants de sortie du g√©n√©rateur (1); </li><li>  Un circuit de protection pour couper le g√©n√©rateur (1) en cas de d√©connexion de l'inductance; </li><li>  Un bloc d'alimentation transformateur avec une tension de sortie de 53V. </li></ol><br>  Examinons rapidement quelques solutions de conception de circuits courantes.  Par exemple, le circuit peut √™tre aliment√© avec un transformateur toro√Ødal √† basse fr√©quence.  Attendez, utilisons plut√¥t un transformateur LLC r√©sonnant avec une micropuce HiperLCS rare de Power Integrations: j'ai longtemps voulu travailler avec lui.  Prenons √©galement un transformateur abaisseur plus √† jour pour contr√¥ler la puissance de sortie et voir si nous pouvons √©ventuellement obtenir 5A d'un package SO-8.  Attendez une minute, un projet peut-il survivre sans Arduino, sans croquis et sans LED?  Ajoutons √©galement une puce STM32 et un petit √©cran pour afficher la puissance de sortie actuelle.  Pour simplifier les choses, nous mesurerons la puissance dans le circuit d'alimentation du g√©n√©rateur HF;  quant √† l'efficacit√©, nous en tiendrons compte (ou l'ignorerons-nous) dans le logiciel.  Nous utiliserons un bo√Ætier m√©tallique de la bonne taille, qui servira √† la fois de bouclier et de dissipateur thermique. <br><br><img src="https://habrastorage.org/webt/gc/u2/w1/gcu2w1dww-mhiyltoow_rpraa8c.jpeg"><br><br>  Pour la soudure, j'irai sur Amazon et j'ach√®terai un kit de mise √† niveau Metcal MX-UK1, y compris un support de travail et le fer √† souder lui-m√™me (qui n'est qu'une pi√®ce √† main attach√©e √† un fil), et des cartouches de soudure.  Sur la base de mon exp√©rience de travail, je trouve plus facile de manipuler de petits objets avec une pointe de fer √† souder √† sabot de 30 ¬∞, et pour souder quelque chose de plus grand, je prendrai quelque chose de plus large, plus lourd et plus chaud, alors voici mon choix: un Metcal SMTC-0167 pour brasage fin et un Thermaltronics M7K100 pour travailler avec des objets √† plus grande √©chelle.  Soit dit en passant, des conseils Thermaltronics moins chers feront √©galement l'affaire. <br><br><img src="https://habrastorage.org/webt/dt/go/ha/dtgohazuklmmwjlzrnkjeqatbrc.jpeg"><br><br>  Pendant que mes articles sont exp√©di√©s, je vais dessiner un organigramme de l'appareil dans le projet. <br><br><img src="https://habrastorage.org/webt/zl/uy/bh/zluybhztltpnmerd00thb0u5smo.png"><br><br>  Il est important de d√©crire la r√©troaction entre la sortie du g√©n√©rateur HF et l'entr√©e de commande du convertisseur abaisseur.  Le fait est qu'apr√®s avoir chauff√© une panne √† la temp√©rature de fonctionnement, l'oscillateur continue de produire une tension d'amplitude assez √©lev√©e (environ 100 V), et la puissance r√©sultante commence √† se dissiper sur la r√©sistance active de la bobine d'inductance, qui, en raison de la effet de peau, est beaucoup plus √©lev√© qu'un multim√®tre ordinaire peut enregistrer.  En cons√©quence, la minuscule bobine devient chauff√©e au rouge et br√ªle.  Pour √©viter cela, les stations d'origine utilisent une r√©troaction n√©gative qui r√©duit la tension d'alimentation de l'oscillateur en r√©ponse au taux d'ondes stationnaires croissant qui accompagne le changement d'imp√©dance de l'inductance.  Le mod√®le 40W utilise une m√©thode relativement simple du brevet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">US4626767A</a> , tandis que le mod√®le 80W utilise une r√©troaction plus sophistiqu√©e impliquant un transformateur de courant.  Jetons un coup d'≈ìil √† cette vid√©o que vous pouvez trouver sur le web: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-55dR4yTJDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  La ligne bleue montre la tension d'alimentation sur l'√©tage de sortie du g√©n√©rateur HF, et comme vous pouvez le voir sur la vid√©o, nous devons pr√©voir que la tension d'alimentation puisse augmenter d'au moins le double (en cons√©quence, la puissance de sortie sera cro√Æt proportionnellement √† la tension au carr√©, soit quatre fois la valeur de la tension).  Comme je n'ai pas r√©ussi √† assurer la m√™me qualit√© de r√©gulation avec un simple circuit de r√©troaction que j'ai mod√©lis√© dans LTSpice, je viens de copier le circuit de r√©troaction de la photo du PCB. <br><br><h4>  G√©n√©rateur haute fr√©quence </h4><br>  Commen√ßons par concevoir le module haute fr√©quence en travaillant d'abord sur le circuit r√©sonnant de sortie.  Jetez un oeil √† cette photo haute r√©solution: <br><br> <a href=""><img src="https://habrastorage.org/webt/ng/9m/ia/ng9miake_7v8hi53skrpz8ko3lm.jpeg"></a> <br><br>  Vous pouvez voir trois bobines enroul√©es autour de noyaux toro√Ødaux jaunes, avec respectivement 4, 6 et 7 tours, de gauche √† droite.  Selon le syst√®me de classification d'Amidon, le jaune est utilis√© pour les noyaux en fer en poudre avec une perm√©abilit√© de 8,5 (mat√©riau n ¬∞ 6).  La taille des bobines peut √™tre calcul√©e en utilisant d'abord une r√®gle pour mesurer le diam√®tre des bobines sur l'√©cran, puis en comparant cela √† la mesure d'un composant bien reconnaissable, tel que le transistor de sortie dans le bo√Ætier TO-247.  Apparemment, cette conception utilise des c≈ìurs T130-6;  cela, √† mon avis, est un peu exag√©r√© - ces gros tores sont destin√©s √† une puissance beaucoup plus √©lev√©e.  Mais je n'ai pas l'intention de jouer √† des pantalons intelligents ici: je ne peux certainement pas me permettre les c≈ìurs am√©ricains d'origine, alors √† la place, je commanderai leurs r√©pliques chinoises bon march√© sur AliExpress et voir s'ils peuvent faire le travail .  Leurs valeurs d'inductance ont √©t√© calcul√©es respectivement √† 180, 400 et 540 nH. <br><br>  Dans les circuits r√©sonnants, les inductances fonctionnent aux c√¥t√©s des condensateurs.  Nous ne pouvons pas d√©duire leurs valeurs de capacit√© de la photographie, mais nous pouvons facilement trouver un message par le mikeselectricstuff pointilleux (l'auteur de la vid√©o ci-dessus) qui a gentiment partag√© ses observations (surlign√©es en jaune): <br><br><img src="https://habrastorage.org/webt/hq/aq/md/hqaqmdiwweyahwjsjwp5ayrhqx0.png"><br><br>  Apr√®s avoir appliqu√© ces valeurs √† un mod√®le d'√©pices, il devient clair que les fr√©quences de r√©sonance des circuits sont l√©g√®rement d√©cal√©es de 13,56 MHz.  Le fait est que plus la fr√©quence est proche de celle √† r√©sonance propre, moins la tension est n√©cessaire pour alimenter le g√©n√©rateur HF et plus sa consommation de courant est √©lev√©e.  La conception originale alimente l'√©tage de sortie avec un convertisseur abaisseur avec une limite de courant de 3A, de sorte que les concepteurs mettent les √©tages de sortie l√©g√®rement hors r√©sonance pour pouvoir augmenter la tension d'alimentation et diminuer l'utilisation du courant.  D'un autre c√¥t√©, nous pr√©voyons d'utiliser une puce 5A, cependant, il s'est av√©r√© √™tre √† court de courant en mode r√©sonnant, nous allons donc √©galement mettre les √©tages de sortie hors de r√©sonance un peu.  Nous d√©couvrirons les valeurs exactes de capacit√© exp√©rimentalement, sur la base des limites du projet pour la tension d'alimentation maximale du circuit de sortie (22V) et l'utilisation maximale du courant (4A). <br><br>  Notez qu'une quantit√© importante d'√©nergie circule dans les circuits r√©sonnants, d√©sireux d'√™tre lib√©r√©e dans l'environnement sous forme de chaleur.  Donc, pour augmenter le facteur Q, utilisons des fils √©maill√©s assez √©pais (1,25 mm) pour les bobines et connectons plusieurs condensateurs en parall√®le. <br><br>  Choisir le bon transistor de sortie est une autre question d√©routante.  Dans le cas o√π la cartouche est remplac√©e ou retir√©e, la surtension peut atteindre 300-350V, mais les auteurs de la conception originale ont choisi de ne pas s'emb√™ter avec une protection sophistiqu√©e et ont simplement √©quip√© l'√©tage de sortie d'un transistor RF IXFH12N50F assez rare, rapide et cher √† partir de IXYS avec la limite de tension de drain de 500V.  Nous ne pouvons pas nous permettre un tel luxe, alors prenons un transistor √† effet de champ standard 200V STP19NF20 qui ne co√ªte que la moiti√© du dollar et connectons-le en parall√®le avec un suppresseur de surtension 150V.  Parfait!  Le suppresseur coupera l√©g√®rement les surtensions des circuits r√©sonnants, les emp√™chant de trop osciller, tandis que le module de protection arr√™tera l'oscillateur dans environ 10 ms apr√®s la disparition de la charge. <br><br><img src="https://habrastorage.org/webt/rf/tg/il/rftgil-a5rpht6bup_enjbtq8kk.jpeg"><br><br>  En raison de la grande capacit√© d'entr√©e et de la haute fr√©quence, nous ne pouvons pas contr√¥ler la grille du transistor de sortie directement avec un pilote de grille habituel.  La photo de la carte d'origine r√©v√®le une bobine d'inductance sans noyau entre les deux transistors de puissance.  C'est une petite astuce couramment utilis√©e: avec la capacit√© grille-source, l'inductance cr√©e un circuit r√©sonant qui maintient le flux d'√©nergie √† travers le circuit grille, ce qui se traduit par une augmentation de l'efficacit√© du pr√©amplificateur.  Dans le m√™me temps, ce m√™me circuit impose une restriction implicite sur le mod√®le possible du transistor de sortie: sa valeur de r√©sistance de grille doit √™tre la plus faible possible pour maintenir un facteur Q raisonnable du circuit.  Sans entrer dans les d√©tails, reproduisons la solution du fabricant.  Nous s√©lectionnerons la bonne valeur d'inductance en fonction de l'efficacit√© maximale du circuit r√©el en resserrant / √©tirant les enroulements de la bobine. <br><br>  √Ä partir de l√†, la conception du circuit devient plus triviale.  Nous piloterons le pr√©amplificateur con√ßu autour d'un transistor IRF510 √† faible capacit√© d'entr√©e √† l'aide d'un double pilote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MAX17602</a> , car ses caract√©ristiques de vitesse semblent bonnes.  Un MAX17600 ou un MAX17601 fonctionnerait encore mieux, et nous pourrions connecter leurs sorties en parall√®le, mais je ne les avais pas imm√©diatement disponibles, donc nous travaillerons avec tout ce que nous avons. <br><br>  La fr√©quence d'oscillation correcte sera fix√©e par un r√©sonateur √† cristal.  Malheureusement, je n'ai pas trouv√© de cristal 13,56 MHz pour l'oscillateur actif.  Mais ne vous inqui√©tez pas, nous prendrons un r√©sonateur 27,12 MHz le plus couramment utilis√© et divisons par deux la fr√©quence.  Nous ferons bon usage d'un microcontr√¥leur, ou plut√¥t d'un de ses temporisateurs programm√©s en cons√©quence.  Je dois √©galement mentionner qu'un MCU ne peut √™tre connect√© directement qu'√† un r√©sonateur √† cristal fonctionnant √† la fr√©quence fondamentale du cristal.  Les r√©sonateurs russes √† troisi√®me tonalit√© de 27,120 kHz couramment utilis√©s ne peuvent √™tre connect√©s que via un hack rapide sous la forme d'un circuit r√©sonnant suppl√©mentaire. <br><br><h4>  Alimentation </h4><br>  Apr√®s une longue s√©rie d'exp√©riences infructueuses avec des produits fabriqu√©s en Chine, j'ai d√©cid√© d'alimenter l'√©tage de sortie de l'oscillateur HF √† partir d'un convertisseur abaisseur bas√© sur la puce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TPS54560</a> de TI.  Pour √©viter tout battement audible, nous allons r√©gler la fr√©quence de l'oscillateur interne √† environ 450 kHz, √† une distance de la plage de fr√©quence de travail du convertisseur LLC.  Alternativement, j'aurais pu faire exactement le contraire, c'est-√†-dire synchroniser le convertisseur abaisseur avec l'oscillateur du convertisseur LLC, mais √† ce moment-l√†, je devenais paresseux, alors j'ai abandonn√© cette id√©e. <br><br>  Le convertisseur TPS54560 lui-m√™me, malgr√© sa petite taille, poss√®de une valeur de courant de sortie importante, donc vous pouvez parfois imaginer que c'est une avanc√©e sans pr√©c√©dent dans une lutte pour l'efficacit√© √©nerg√©tique ... Pourtant, la v√©rit√© est que la puce doit vraiment √™tre correctement refroidie .  La carte de d√©monstration offerte par Texas Instruments contient deux grands plans de masse de 2 oz d'√©paisseur des deux c√¥t√©s;  le transfert de chaleur √† travers les couches est assur√© par six trous via juste en dessous du fond de la puce (o√π il a une broche de dissipation thermique).  Une telle disposition rend un peu plus difficile la fabrication d'une planche de bricolage, je devrai donc √©videmment la commander aupr√®s d'un fabricant chinois.  Bougre! <br><br>  Pour alimenter le pilote et le pr√©amplificateur, retirons la tension non r√©gul√©e de 12 V de la deuxi√®me bobine du convertisseur LLC.  La consommation de courant sur le reste de la carte sera n√©gligeable, donc pour alimenter le contr√¥leur 5V et pour allumer l'√©cran LCD, nous utiliserons le r√©gulateur lin√©aire produit localement KR142EN5A, tandis que la ligne 3,3V pour le MCU sera r√©gul√©e par le minuscule <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LD2985</a> . <br><br>  Pour r√©duire la tension de ligne aux 30 V et 12 V requis, nous utiliserons un convertisseur LLC bas√© sur la puce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LCS708HG</a> . <br><br><img src="https://habrastorage.org/webt/65/l8/ed/65l8edk_ucvq50zsc5hf2jbxxp8.jpeg"><br><br>  Je suis s√ªr que de nombreux lecteurs aimeraient en savoir plus sur les convertisseurs LLC, je vais donc expliquer son principe de fonctionnement plus en d√©tail.  La LLC n'est pas tout √† fait un acronyme, car ces lettres signifient ¬´inducteur-inducteur-condensateur¬ª et, en bref, mettent en ≈ìuvre la conception √©lectrique pour connecter l'enroulement primaire d'un transformateur.  Le fait est que parfois une partie du flux g√©n√©r√© par l'enroulement primaire peut ne pas √™tre li√©e √† l'enroulement secondaire, ce qui provoque ce que l'on appelle l'inductance de fuite - inductance parasite qui est incapable de transf√©rer l'√©nergie accumul√©e vers le circuit secondaire.  Dans les convertisseurs √† retour standard, cette √©nergie doit √™tre dissip√©e sur les suppresseurs ou les r√©sistances d'amortissement, de sorte que les transformateurs (ou, plus pr√©cis√©ment, les selfs √† double bobine) sont g√©n√©ralement con√ßus de mani√®re √† r√©duire autant que possible l'inductance de fuite.  Pourtant, les choses sont compl√®tement diff√©rentes avec les LLC. <br><br>  Dans un convertisseur r√©sonant, l'inductance de fuite combin√©e √† la capacit√© connect√©e en s√©rie √† l'enroulement primaire cr√©e un circuit de r√©servoir qui r√©sout deux probl√®mes importants.  Tout d'abord, il commute les transistors haute tension de sortie du convertisseur √† des valeurs de tension proches de z√©ro (le soi-disant Zero Voltage Switching, ZVS), ce qui r√©duit consid√©rablement les pertes d'√©nergie caus√©es par la commutation.  Deuxi√®mement, l'√©nergie accumul√©e dans l'inductance non coupl√©e retourne dans le circuit, ce qui √©limine tout besoin en amortisseurs car il n'y a en fait aucune perte d'√©nergie.  Dans sa note d'application AN-55, Power Integrations fournit un aper√ßu d√©taill√© de la fa√ßon de concevoir un transformateur pour augmenter son inductance de fuite (cela est n√©cessaire pour garantir la bonne caract√©ristique du transformateur).  J'ai, par exemple, enroul√© les tours primaires et secondaires √† grande distance l'un de l'autre, dans deux sections diff√©rentes: <br><br><img src="https://habrastorage.org/webt/7i/iu/z-/7iiuz-igqg1rhgqisg31neowkm8.jpeg"><br><br>  G√©n√©ralement, une telle conception de mise en page fantaisie se traduit par une valeur d'efficacit√© tr√®s d√©cente, par exemple une puce LCS708HG sans dissipateur thermique, malgr√© sa taille miniature, fournit une puissance de sortie d'environ 200W!  C'est un r√©sultat vraiment exceptionnel, mais vous ne pouvez l'atteindre qu'en fonctionnant exactement √† la fr√©quence d'auto-r√©sonance du circuit de sortie.  C'est l√† que se situe le pi√®ge. <br><br>  La chose est, dans ce cas, la tension de sortie est r√©gul√©e en changeant la fr√©quence d'impulsion plut√¥t que le rapport d'impulsion, et la r√©gulation a lieu dans une plage de tension tr√®s √©troite - environ ¬± 15%.  De plus, en r√©ponse aux fluctuations de la tension d'entr√©e par rapport √† sa valeur nominale, la fr√©quence de conversion s'√©loigne de la r√©sonance, imposant le mode de commutation dure aux transistors √† l'int√©rieur de la puce, les chauffant par cons√©quent beaucoup.  En effet, le convertisseur doit recevoir une tension r√©gul√©e sur son entr√©e! <br><br>  Dans les produits fabriqu√©s en usine, les convertisseurs sont √©quip√©s de correcteurs de facteur de puissance actifs (APFC) √† leur entr√©e, qui, en plus de corriger la puissance, maintiennent √©galement une tension de sortie d'environ 380-390V.  Mais apr√®s tout, nous avons affaire √† une conception de bricolage ici, alors ignorons b√©atement un hoquet aussi insignifiant que la sensibilit√© √† la qualit√© de l'alimentation secteur.  Sur la base des calculs et en tenant compte de la pulsation de tension sur la capacit√© du tampon, la tension d'entr√©e se situe dans la plage d'environ 230 V ¬± 10%, donc si le r√©seau √©lectrique fonctionne dans les normes, tout va fonctionner correctement.  Laissons-le l√† pour l'instant. <br><br>  Nous copierons le reste de la conception du convertisseur √† partir de la fiche technique correspondante.  Je me concentrerais probablement uniquement sur le condensateur r√©sonnant - ce composant apparemment simple.  Si vous vous √™tes d√©j√† demand√© quelle est la diff√©rence entre les condensateurs √† film de polypropyl√®ne et les condensateurs √† film de poly√©thyl√®ne t√©r√©phtalate (PET), voici la r√©ponse: les premiers ont une tangente de perte dix fois plus petite.  C'est pr√©cis√©ment pourquoi ma tentative de remplacer le K78-2 encombrant (un autre produit produit au pays) par un mod√®le PET moins cher et plus petit K73-17 a provoqu√© un comportement curieux: le condensateur est entr√© en surchauffe et a commenc√© √† g√©n√©rer un bruit de cr√©pitement suspect.  Int√©ressant. <br><br>  Les puces de la s√©rie HiperLCS n√©cessitent une ligne d'alimentation 12V d√©di√©e.  Pour √©viter d'avoir √† jouer avec un enroulement suppl√©mentaire, un redresseur et des circuits de d√©marrage, restons-en au manuel.  Nous obtiendrons la tension requise √† partir d'un petit convertisseur s√©par√© sur une puce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LNK304</a> .  Sa caract√©ristique cl√© est sa conception sans transformateur, car le seul inducteur dont nous aurons besoin est un starter bon march√© fabriqu√© en usine.  Le courant de sortie maximum reste dans une petite plage, environ 100mA, et la simplicit√© de la conception ainsi que la possibilit√© de garder le nombre de composants au minimum en font une solution attrayante (alors que le nombre de convertisseurs par pouce carr√© de surface commence pour m'√©nerver. Le Dieu des convertisseurs en demande plus!) <br><br><h4>  Cerveau </h4><br>  Eh bien, juste quelques autres choses √† faire.  La station d'origine a un √©cran LCD qui, pour le prix que vous avez pay√©, affiche une ressemblance avec la puissance de sortie.  Faisons quelque chose de similaire: nous allons prendre le contr√¥leur STM32F030 dans sa configuration minimale (dans un package TSSOP-20).  L'une des entr√©es du convertisseur A / N mesurera la tension d'alimentation de l'√©tage de sortie du g√©n√©rateur HF, tandis que l'autre entr√©e mesurera le courant.  Pour √©viter de rompre le circuit de terre, nous allons attacher la r√©sistance de d√©tection de courant au fil positif et impl√©menter un d√©calage de niveau √† l'aide de la puce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">INA138 √†</a> usage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sp√©cial</a> , une conception de Burr-Brown √† ses beaux jours.  Pour afficher des informations, utilisons un texte OLED avec une r√©solution 16x2 faite par WinStar.  C'est tout en un mot.  Attendez, nous avons laiss√© une broche de processeur inoccup√©e.  Eh bien, laissez clignoter une LED alors.  Ne me demandez pas pourquoi. <br><br>  Le firmware du contr√¥leur a √©t√© √©crit en langage C √† l'aide de STM32CubeMX et de la version gratuite de IAR Embedded Workbench.  Le code est assez banal.  √Ä la cadence de la minuterie du syst√®me, une fois en 300 ms, la boucle principale lit les donn√©es des deux canaux du convertisseur A / N, les multiplie et les envoie √† l'√©cran en tant que lecture de puissance.  En bas de l'√©cran, la valeur de puissance est visualis√©e dans une barre rendue avec des polices personnalis√©es.  Lors de la coupure de la panne √† souder, le gestionnaire de l'interruption provenant de la sortie du d√©tecteur de charge arr√™te le temporisateur de r√©f√©rence de l'oscillateur HF.  Pour m'assurer contre tout gel ou d√©faut dans le MCU, j'ai ajout√© des gestionnaires pour les erreurs mat√©rielles et les signaux de temporisation du chien de garde;  le firmware utilise √©galement la technologie CSS (Clock Security System) qui, en cas d'humidit√© dans les oscillations du r√©sonateur √† cristal primaire, passe √† l'oscillateur RC int√©gr√© et relance le microcontr√¥leur.  La taille totale du firmware est de 10 Ko.  J'ai t√©l√©charg√© le code source du firmware avec les autres fichiers de projet sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> pour que les plus curieux y jettent un ≈ìil (mais ne vous attendez √† rien d'extraordinaire). <br><br><h4>  Disposition </h4><br><div class="spoiler">  <b class="spoiler_title">L'appareil comprend plusieurs bobines sur mesure</b> <div class="spoiler_text"><ul><li>  Les selfs de drain MOSFET et le transformateur de courant ont √©t√© bless√©s sur un noyau annulaire HF-ferrite 16x8x6mm avec une perm√©abilit√© de 50. Il est correct d'utiliser un fil √©maill√© de 0,6 mm, les selfs ont 15 tours, transformateur de courant - 2x14 tours; </li><li>  L'inducteur sans noyau a 10 tours de fil de 0,6 mm r√©partis uniform√©ment sur une longueur de 10 mm.  Le diam√®tre int√©rieur est de 5 mm; </li><li>  Le transformateur principal est bas√© sur un petit noyau EFD25 en mat√©riau Epcos N87.  J'ai ajout√© un espace de 0,2 mm sur chaque jambe en ins√©rant deux couches de papier √† notes.  Cela nous donne un √©cart de 0,4 mm au total.  Pour l'enroulement primaire (33 tours) et le premier enroulement secondaire (2x6 tours), le fil litz √† triple isolation est utilis√© avec une taille de 100/46 et 175/46 respectivement (ici le premier nombre est le nombre de fils, et le second est le diam√®tre AWG).  Le deuxi√®me enroulement secondaire de 10 V comporte deux tours de tout fil souple flexible appropri√© (j'en ai utilis√© un isol√© PTFE). </li></ul></div></div><br>  Les calculs pour tous les composants du convertisseur LLC, y compris les valeurs d'inductance des enroulements du transformateur, sont fournis dans le fichier de mise en page joint au projet, que vous pouvez visualiser √† l'aide de PI Xls Designer.  J'ai √©galement inclus toutes les fiches techniques des pi√®ces √©lectroniques que j'ai utilis√©es dans le projet, t√©l√©charg√© des mod√®les LTspice de certaines parties du circuit et quelques photos bien s√ªr. <br><br>  Le r√©sultat de la conception d√©crite ci-dessus est le sch√©ma √©lectrique suivant: <br><br> <a href=""><img src="https://habrastorage.org/webt/6a/bn/p0/6abnp0p3g-16iu0umf5eq4eo3zq.png"></a> <br><br>  Le diagramme et la disposition des PCB ont √©t√© pr√©par√©s √† l'aide de DipTrace, les dessins ont √©t√© convertis au format Gerber pour √™tre ensuite envoy√©s √† l'usine de fabrication.  La disposition du PCB est con√ßue pour s'adapter √©troitement dans le bo√Ætier de l'appareil, avec une couche enti√®re recouverte d'un plan de masse pour prot√©ger les circuits fragiles √† faible courant.  Une telle disposition facilite la fabrication de la planche √† la maison, car elle ne n√©cessite aucun alignement pr√©cis des mod√®les de photos: vous pouvez remplir presque toute la surface arri√®re de la planche avec un seul plan solide, puis utiliser un foret √©pais pour faire des biseaux de trou autour des broches qui n'ont pas besoin d'√™tre mises √† la terre. <br><br><img src="https://habrastorage.org/webt/py/hr/jg/pyhrjgytrdz7antf8jetd_xzu-4.jpeg"><br><br><img src="https://habrastorage.org/webt/rv/-a/nv/rv-anvkpggckyvycywv2kgr8bja.jpeg"><br><br>  √âtant donn√© que certaines pi√®ces HF utilis√©es dans la conception √©mettent beaucoup de bruit radio et que les composants de puissance sont facilement surchauff√©s, mon choix de mat√©riau pour le bo√Ætier sera naturellement l'aluminium.  Je vais choisir un bo√Ætier G0476 approximativement assorti dans le catalogue de Gainta.  Nous allons d√©couper une fen√™tre dans le bo√Ætier de l'OLED √† l'aide d'un outil rotatif.  Nous connecterons ensuite le bo√Ætier directement au fil de terre du c√¢ble d'alimentation avec le blindage du c√¢ble de soudure et la masse du PCB. <br><br>  Malheureusement, l'id√©e de connecter un OLED plus contrast√© au lieu d'un LCD m'est venue bien apr√®s avoir envoy√© ma commande de PCB √† l'usine de fabrication.  Les niveaux CMOS d'entr√©e d'un OLED <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WEH001602AGPP5N00001</a> de WinStar sont diff√©rents des niveaux TTL standard d'un LCD, donc l'astuce avec l'alimentation + 5 V du contr√¥leur d'affichage et de son √©clairage, puis la lecture des signaux logiques du microprocesseur aliment√© en + 3,3 V ne fonctionnera pas ici.  J'ai d√ª connecter l'√©cran √† une ligne 3,3 V √† l'aide d'un fil s√©par√©. <br><br>  Pour r√©duire le bruit, j'ai install√© des r√©sistances de suppression des interf√©rences de 390 Ohms dans le bus reliant le PCB et l'√©cran, et j'ai recouvert le microcontr√¥leur d'un blindage en feuille de cuivre.  En fonctionnement normal, le connecteur de programmation doit √™tre recouvert d'une partie femelle qui met √† la terre les broches de d√©bogage directement et la broche NRST - via un condensateur. <br><br>  Au final, mon appareil a acquis son aspect final: <br><br><img src="https://habrastorage.org/webt/dp/pj/ay/dppjaykwjjd0xym_k3nxxe5n4g4.jpeg"><br><br>  Voici la proc√©dure r√©sultante pour le chauffage du fer √† souder: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/odTL6zllHzc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Conclusion </h4><br>  Maintenant, totalisons les d√©penses pour ce petit morceau de plaisir: <br><br>  Composants √©lectroniques - environ 50 $ (les plus chers √©taient la puce HiperLCS pour 15 $ et l'OLED pour 10 $); <br>  Fabrication de PCB, co√ªt par 10 pi√®ces.  - un peu plus de 40 $; <br>  Cas - 8 $. <br><br>  Le <b>co√ªt total</b> de l'unit√© d'alimentation haute fr√©quence r√©elle √©tait d'environ 100 $.  J'ai √©galement pay√© un fer √† souder avec un support de travail (170 $) et deux cartouches (100 $). <br><br>  Je pourrais bien s√ªr optimiser les d√©penses dans une certaine mesure, par exemple eBay a une large gamme de pi√®ces Metcal utilis√©es, dans ce cas, nous ne parlons que de quelques dizaines de dollars, mais c'est probablement une question de pr√©f√©rence personnelle. <br><br><h4>  Errata </h4><br><ol><li>  Le r√©seau de condensateurs √† charge cristalline a √©t√© mal achemin√© et est tr√®s sensible au bruit HF.  La bonne fa√ßon est <a href="">que</a> .  Merci √† Alexander Chulkin pour cette importante am√©lioration. </li><li>  Il n'est pas possible de d√©connecter le c√¢ble du fer √† souder d'une station d'exploitation, car il peut parfois red√©marrer le microcontr√¥leur.  Cela vaut la peine d'envisager l'introduction d'un blindage suppl√©mentaire de la partie HF (je ne suis pas s√ªr √† 100% cependant). </li></ol><br><h4>  Conclusions </h4><br>  Maintenant, permettez-moi de partager avec vous le but ultime que je poursuivais avec ce projet - l'exp√©rience que j'ai acquise en travaillant avec l'appareil.  C'est comme utiliser un fer √† souder tr√®s puissant et chauff√© au rouge tout en tenant un petit outil l√©ger dans vos mains.  Que cela en vaille la peine et l'argent d√©pens√©, c'est difficile √† dire.  Je laisse la question ouverte. <br><br><img src="https://habrastorage.org/webt/gy/uj/vn/gyujvninztoywjpa9ruzoae0dts.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451246/">https://habr.com/ru/post/fr451246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451226/index.html">Nouvelle vie des anciens jeux: le r√©pertoire source le plus ouvert des ports source (Java + PHP)</a></li>
<li><a href="../fr451230/index.html">Cinq erreurs commises par les gens lors de la pr√©paration de l'immigration de travail aux √âtats-Unis</a></li>
<li><a href="../fr451232/index.html">L'utilisation du mod√®le de financement continu dans le financement participatif</a></li>
<li><a href="../fr451240/index.html">Pourquoi j'aime les interfaces Go</a></li>
<li><a href="../fr451242/index.html">MMORPG seul (harceleur 2D)</a></li>
<li><a href="../fr451248/index.html">Le c√¥t√© obscur des hackathons</a></li>
<li><a href="../fr451252/index.html">Les cha√Ænes en Python devraient-elles √™tre it√©rables?</a></li>
<li><a href="../fr451254/index.html">Cat√©gorie: unboxing iron IaaS provider</a></li>
<li><a href="../fr451256/index.html">Qu'est-ce qu'un syst√®me de reporting id√©al. Est-il r√©aliste de comprendre ce qui se passe dans l'entreprise?</a></li>
<li><a href="../fr451258/index.html">Attrape-moi si tu peux. Lettre du directeur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>