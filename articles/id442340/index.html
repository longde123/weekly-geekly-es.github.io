<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏿 👩🏼‍🤝‍👨🏽 👩🏿‍🚒 optimasi yang tidak dapat diubah 👌🏻 👩🏿‍✈️ 🦇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kompiler Microsoft memungkinkan Anda untuk menambahkan ekstensi "novtable" untuk atribut "__declspec" ketika mendeklarasikan sebuah kelas. 

 Tujuan y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>optimasi yang tidak dapat diubah</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442340/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/py/7c/hg/py7chgcvugycee-wnogzvn5pkog.png"></div><br>  Kompiler Microsoft memungkinkan Anda untuk menambahkan ekstensi "novtable" untuk atribut "__declspec" ketika mendeklarasikan sebuah kelas. <br><br>  Tujuan yang dinyatakan adalah untuk secara signifikan mengurangi ukuran kode yang dihasilkan.  Dalam percobaan dengan komponen kami, penurunannya dari 0,6 menjadi 1,2 persen dari ukuran DLL. <br><br>  Penerapan: kelas yang tidak dimaksudkan untuk instantiate langsung dari mereka. <br><br>  Misalnya: kelas antarmuka murni. <br><br>  Dalam kode, tampilannya seperti ini: <br><br><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> __</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">declspec</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">novtable</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IDrawable</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; };</code> </pre> <br>  <i>Catatan: kata kunci struct digunakan untuk mendeklarasikan kelas antarmuka untuk menghilangkan contoh detail artikel yang tidak relevan;</i>  <i>sedangkan dalam hal menggunakan kelas, seseorang harus menggunakan publik untuk menunjukkan "publisitas" metode.</i>  <i>Untuk alasan yang sama, saya tidak akan menambahkan destruktor virtual ke kelas antarmuka dalam artikel ini.</i> <br><br>  Nama "novtable" menjanjikan bahwa tidak akan ada tabel virtual ... Tapi bagaimana mekanisme untuk menjalankan fungsi virtual bekerja dalam kode berikut: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,   IDrawable: class Rectangle : public IDrawable { virtual void Draw() const override { } int width; int height; }; … IDrawable* drawable = new Rectangle; drawable-&gt;Draw(); //   Rectangle::Draw …</span></span></code> </pre><br><a name="habracut"></a><br>  Ingat apa yang ditambahkan saat mendeklarasikan fungsi virtual di kelas: <br><br><ol><li>  Menentukan tabel fungsi virtual.  Satu instance dari tabel ini digunakan untuk semua instance kelas. </li><li>  Pointer ke tabel fungsi virtual ditambahkan ke anggota data kelas. </li><li>  Kode untuk menginisialisasi penunjuk ini dalam konstruktor kelas. </li></ol><br>  Dengan demikian, dalam contoh kita, akan ada deklarasi dua tabel fungsi virtual: untuk IDrawable dan untuk Rectangle.  Saat membuat objek Rectangle, konstruktor IDrawable adalah yang pertama kali dieksekusi, yang menginisialisasi pointer ke tabel fungsi virtualnya.  Secara skematis, tampilannya seperti ini: <br><br><img src="https://habrastorage.org/webt/38/dk/dm/38dkdmuwzkydh8bkg9ttmojen60.png"><br>  Karena fungsi draw di IDrawable dideklarasikan virtual murni ("= 0" ditunjukkan sebagai ganti badan fungsi), alamat fungsi purecall yang dihasilkan oleh kompiler dituliskan dalam tabel fungsi virtual. <br><br>  Kemudian konstruktor Rectangle dieksekusi, yang menginisialisasi pointer yang sama, tetapi ke tabel fungsi virtualnya: <br><br><img src="https://habrastorage.org/webt/f7/s6/pn/f7s6pnrpvifpt59sangs9njm83a.png"><br><br><h1>  Apa yang dilakukan “novtable”, dan mengapa Microsoft berjanji untuk mengurangi ukuran kode? </h1><br>  Ini adalah definisi yang tidak perlu dari tabel fungsi virtual IDrawable dan inisialisasi pointer ke dalam konstruktor IDrawable yang dikecualikan dari kode yang dihasilkan ketika menambahkan "novtable". <br><br>  Dalam hal ini, ketika membangun IDrawable, pointer ke tabel fungsi virtual akan berisi nilai yang tidak dapat diprediksi.  Tapi ini seharusnya tidak mengganggu kita, karena membuat implementasi dengan akses ke fungsi virtual sebelum pembangunan objek yang lengkap biasanya merupakan kesalahan.  Jika, misalnya, fungsi non-virtual dari kelas ini dipanggil dalam konstruktor dari kelas dasar, yang pada gilirannya memanggil fungsi virtual, maka fungsi purecall akan dipanggil tanpa novtable, dan perilaku yang tidak dapat diprediksi dengan novtable;  tidak ada opsi yang dapat diterima. <br><br>  Perhatikan bahwa tidak hanya penurunan ukuran, tetapi juga beberapa percepatan program. <br><br><h1>  RTTI </h1><br>  Seperti yang Anda ketahui, std :: dynamic_cast memungkinkan Anda untuk melemparkan pointer dan tautan dari satu instance kelas ke pointer dan tautan ke yang lain, jika kelas-kelas ini terhubung secara hierarkis dan polimorfik (berisi tabel fungsi virtual).  Pada gilirannya, operator typeid memungkinkan Anda untuk mendapatkan informasi tentang suatu objek dalam runtime menggunakan pointer (tautan) ke objek yang diteruskan ke sana.  Kemampuan ini disediakan oleh mekanisme RTTI, yang menggunakan tipe informasi yang terletak dengan merujuk pada tabel kelas.  Rincian struktur dan lokasi tergantung pada kompiler.  Dalam kasus kompiler Microsoft, tampilannya seperti ini: <br><br><img src="https://habrastorage.org/webt/ru/kf/ir/rukfir6ii448tjdtrhpzt84naa4.png"><br><br>  Oleh karena itu, jika selama kompilasi, kompiler diperintahkan untuk mengaktifkan RTTI, maka novtable juga mengecualikan pembuatan definisi type_info untuk IDrawable dan data layanan yang diperlukan untuk itu. <br>  Perhatikan bahwa jika Anda entah bagaimana memberikan pengetahuan bahwa pointer yang direferensikan (tautan) ke kelas dasar menunjukkan implementasi turunan, maka std :: static_cast lebih efisien dan tidak memerlukan RTTI. <br><br><h1>  Spesifik Microsoft </h1><br>  Selain MSVC, fitur ini dengan sintaksis yang sama ada di Dentang ketika mengkompilasi di Windows. <br><br><h1>  Kesimpulan </h1><br><ol><li>  __declspec (novtable) - tidak memengaruhi jumlah memori yang digunakan oleh instance kelas. </li><li>  Mengurangi ukuran dan mempercepat program dipastikan dengan menghilangkan definisi tabel fungsi virtual yang tidak digunakan, RTTI overhead, dan menghilangkan kode inisialisasi untuk pointer ke tabel fungsi virtual di konstruktor kelas antarmuka. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id442340/">https://habr.com/ru/post/id442340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id442328/index.html">Kesalahan programmer umum saat melamar pekerjaan</a></li>
<li><a href="../id442330/index.html">Tugas dari buku teks sekolah II</a></li>
<li><a href="../id442332/index.html">Antisipasi ketika mengembangkan dialog dengan bot obrolan</a></li>
<li><a href="../id442336/index.html">Perencanaan poker: catatan tentang kesan pertama pengembang</a></li>
<li><a href="../id442338/index.html">Redis mengubah lisensi lagi</a></li>
<li><a href="../id442342/index.html">Rekor Kecepatan Jaringan Serat Optik 500 Gbps</a></li>
<li><a href="../id442344/index.html">Meningkatkan Produktivitas Pengembangan dengan Vue - Bagian 2</a></li>
<li><a href="../id442346/index.html">Redux-symbiote - tindakan menulis dan reduksi dengan hampir tanpa rasa sakit</a></li>
<li><a href="../id442348/index.html">Apa yang ditanyakan pada wawancara Juni, atau bagaimana saya mencari pekerjaan kedua saya di TI</a></li>
<li><a href="../id442350/index.html">Perusahaan-perusahaan non-teknologi mulai menggunakan kecerdasan buatan dalam skala besar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>