<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò™ ü§∞ ü§¥üèæ Entwicklung einer neuen Produktbranche: Wie man Unpraktisches loswird und n√ºtzlich bleibt üëäüèª üõÄüèΩ üîè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Mein Name ist Dmitry, ich bin Entwickler bei ISPsystem. K√ºrzlich haben wir im Beta-Test eine neue Version des Virtual Machine Control Pane...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklung einer neuen Produktbranche: Wie man Unpraktisches loswird und n√ºtzlich bleibt</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ispsystem/blog/441968/"><img src="https://habrastorage.org/webt/y1/x1/ec/y1x1ece2ww4irdsajxg6qeme6bw.jpeg"><br><br>  Hallo Habr!  Mein Name ist Dmitry, ich bin Entwickler bei ISPsystem.  K√ºrzlich haben wir im Beta-Test eine neue Version des Virtual Machine Control Panels ver√∂ffentlicht.  Heute werde ich Ihnen erz√§hlen, wie wir entschieden haben, was wir von einem alten Produkt nehmen und was besser abzulehnen ist.  Ich werde die wichtigsten Themen f√ºr uns durchgehen: eine Bibliothek f√ºr die Arbeit mit libvirt, Unterst√ºtzung f√ºr verschiedene Betriebssysteme w√§hrend der Produktinstallation, √úbergang von Monolith zu Microservices, Bereitstellung virtueller Maschinen. <br><br>  Der Artikel handelt von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VMmanager</a> .  Dies ist ein System zum Verwalten, Bereitstellen und √úberwachen von virtuellen Maschinen basierend auf KVM- und OVZ-Virtualisierung.  Die f√ºnfte Generation kam 2012 heraus.  Seitdem ist die Schnittstelle sehr veraltet und die zentralisierte Architektur hat die Entwicklung des Produkts verhindert.  Es ist Zeit, eine neue Version zu erstellen. <br><a name="habracut"></a><br><h2>  Die erste Geschichte.  Wir benutzen die Arbeit von Hauselfen <br></h2><h5>  <font color="#787979">Mit libvirt arbeiten: Optionen ber√ºcksichtigen, Bibliotheken ausw√§hlen</font> </h5><br>  Als Tool zur Verwaltung der KVM-Virtualisierung verwendet unser Produkt libvirt.  Im Jahr 2012 wurde eine in C geschriebene Bibliothek ausgew√§hlt, um damit zu arbeiten, was f√ºr dieses Entwicklungsteam bequemer war.  Infolgedessen - eine gro√üe Menge an Code, der in C ++ geschrieben wurde und die C-Bibliothek aufruft, die die direkte Arbeit mit libvirt implementiert. <br><br>  Und jetzt, an der Schwelle eines neuen Projekts, schauen wir zur√ºck und untersuchen unser Produkt, um zu pr√ºfen, ob es sich lohnt, eine bestimmte L√∂sung / Technologie zu w√§hlen.  was sich bew√§hrt hat und woran man sich erinnern und nie wiederholen muss. <br><br>  Wir setzen uns und machen eine Retrospektive langj√§hriger Arbeit an der vorherigen Version des Produkts.  Wir sind geduldig, nehmen Aufkleber und schreiben drei Arten von Papier: <br><ol><li>  Was ist mit dem Produkt gelungen?  Was haben Benutzer gelobt?  Was hat noch nie Beschwerden geh√∂rt?  Was hat dir gefallen? </li><li>  Was ist fehlgeschlagen?  Was waren die Probleme st√§ndig?  Was hat die Arbeit behindert und warum haben sie eine neue Niederlassung gegr√ºndet? </li><li>  Was kann ge√§ndert werden?  Was verlangen Benutzer?  Was m√∂chten Teammitglieder √§ndern? </li></ol><br>  Zu der Gruppe von Menschen, die das Papier eifrig verderben, sollten sowohl diejenigen geh√∂ren, die seit Jahrhunderten in engem Kontakt mit dem Produkt stehen, als auch diejenigen, die das Produkt neu betrachten k√∂nnen.  Vergessen Sie nicht Feature Request und Produktmanager.  Vorgefertigte Aufkleber werden auf die Tafel geklebt, sie werden uns definitiv helfen. <br><img src="https://habrastorage.org/webt/u8/wv/dp/u8wvdprmraomcmn1ykdj7fhht7i.png"><br>  Zur√ºck zur Geschichte.  Wir untersuchen einen Code, in dem der C ++ 98-Standard friedlich mit C-Bibliotheksaufrufen koexistiert.  Wir erinnern uns, dass 2018 das Jahr ist und beschlie√üen, ihn in Ruhe zu lassen.  Aber wie kann man die Funktionalit√§t der Arbeit mit virtuellen Maschinen (VMs) wiederholen, um den Code kompakter und bequemer f√ºr die Arbeit zu machen? <br><br>  Wir untersuchen das Problem und verstehen, dass es unabh√§ngig von der gew√§hlten L√∂sung und Sprache ein Wrapper √ºber die C-Bibliothek sein wird.  Als interessante Option ist es erw√§hnenswert, dass die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bibliothek von DigitalOcean auf Go verwendet</a> wird. Sie verwendet das RPC-Protokoll, um direkt mit libvirt zu kommunizieren, hat jedoch ihre Nachteile.  Wir haben uns f√ºr die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Python-Bibliothek entschieden</a> . <br><br>  Als Ergebnis haben wir die Geschwindigkeit des Schreibens von Code, die Benutzerfreundlichkeit und das Lesen erhalten.  Es lohnt sich, diese sch√∂nen Worte zu erkl√§ren. <br><ul><li>  <b>Geschwindigkeit</b> .  Jetzt k√∂nnen wir schnell einen bestimmten Teil der Arbeit mit der Dom√§ne direkt von der Konsole auf dem Debug-Server aus prototypisieren, ohne die Hauptanwendung neu erstellen zu m√ºssen. </li><li>  <b>Einfachheit</b> .  Anstatt viele C ++ - Methoden in einem bestimmten Handler aufzurufen, haben wir einen Python-Skriptaufruf mit Parameter√ºbergabe. </li><li>  <b>Das Debuggen ist</b> auch so schnell und schmerzlos wie m√∂glich.  Meiner Meinung nach kann dies auf lange Sicht eine interessante Benutzererfahrung mit sich bringen.  Stellen Sie sich vor, der Systemadministrator, der ungl√ºcklich dar√ºber ist, dass seine virtuellen Maschinen vor dem Zerst√∂ren auf ein Herunterfahren warten, definiert das Skript f√ºr die Methode host_stop neu.  <s>Kann ich auch ein Panel f√ºr Sie schreiben?</s> </li></ul><br>  Als Ergebnis haben wir ein einfaches und praktisches Tool f√ºr die Arbeit mit virtuellen Maschinen auf Serverebene erhalten. <br><br><h2>  Die zweite Geschichte.  Ein gut verpacktes Produkt ben√∂tigt keine zus√§tzlichen Liebkosungen <br></h2><h5>  <font color="#787979">Produktverteilung: Wir lehnen viele Pakete ab und gehen zu Docker √ºber</font> </h5><br><img src="https://habrastorage.org/webt/dr/ow/wm/drowwmt-ru8iwccg64mlsjmmc8y.png"><br>  VMmanager 5 wird als eine Reihe von Linux-Paketen verteilt.  CentOS 6/7 und bis vor kurzem Debian 7 werden unterst√ºtzt. Was bedeutet das?  Dies bedeutet mehr Build-Server f√ºr CI / CD, mehr Tests und mehr Aufmerksamkeit f√ºr Code.  Wir m√ºssen uns daran erinnern, dass im offiziellen Repository von CentOS 7 qemu Version 1.5.3 in CentOS 6 0.12.1 ist.  Gleichzeitig kann der Benutzer Repositorys verwenden, in denen die Version dieses Pakets viel h√∂her ist.  Dies bedeutet, dass Sie verschiedene API-Versionen unterst√ºtzen m√ºssen, wenn Sie mit VMs arbeiten, insbesondere w√§hrend der Migration.  Wir m√ºssen uns an den Unterschied zwischen Initialisierern (init, systemd) erinnern und den Unterschied in den Namen von Paketen und Dienstprogrammen ber√ºcksichtigen.  Die Dienstprogramme, die unter CentOS funktionieren, funktionieren unter Debian nicht, oder ihre Versionen in den offiziellen Repositorys variieren stark.  F√ºr jeden Push m√ºssen Sie Pakete f√ºr alle Versionen sammeln, und es ist ratsam, nicht zu vergessen, sie auch zu testen. <br><br>  All dies in dem neuen Produkt passt nicht zu uns.  Um unterschiedliche Logik nicht zu unterst√ºtzen, geben wir mehrere Systeme auf und belassen nur CentOS 7. Ist das Problem behoben?  Nicht wirklich. <br><br>  Wir m√∂chten auch nicht die Version des Betriebssystems vor der Installation √ºberpr√ºfen, ob die erforderlichen Dienstprogramme verf√ºgbar sind, welche Regeln in SELinux installiert sind, und wir m√∂chten die Firewall- und Repository-Listen nicht neu konfigurieren.  Ich w√ºrde es gerne einmal tun - und das ist alles, indem Sie klicken, <s>um jede Sekunde zu zerst√∂ren</s> und die gesamte Umgebung und das Produkt selbst bereitzustellen.  Es hei√üt - fertig, das Projekt wird in einen Docker-Container verpackt. <br><br>  Jetzt reicht es zu tun: <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker pull vmmanager # docker run -d vmmanager:latest</span></span></code> </pre> <br>  Das Panel ist betriebsbereit. <br><br>  Ich √ºbertreibe nat√ºrlich, der Benutzer muss Docker f√ºr sich selbst installieren, und wir haben mehr als einen Container, und derzeit wird VMmanager im Schwarmmodus als SaaS-Dienst ausgef√ºhrt.  √úber das, was uns bei der Auswahl von Docker begegnet ist und wie es gel√∂st werden kann, k√∂nnen Sie in einem separaten Artikel schreiben. <br><br>  Tatsache ist, wie wichtig es ist, die Entwicklung und vor allem die Bereitstellung Ihres Produkts install.sh zu vereinfachen, das einst <a href="">2097 Zeilen belegte</a> . <br><br>  Als Ergebnis: <br><ol><li>  Eine homogene Produktinstallationsumgebung vereinfacht den Programmcode und reduziert die Montage- und Testkosten. </li><li>  Durch die Verteilung der Anwendung als Docker-Container wird die Bereitstellung einfach und vorhersehbar. </li></ol><br><h2>  Die dritte Geschichte.  Erste Beziehung zu Microservices <br></h2><h5>  <font color="#787979">Architektur: Wir geben den Monolithen zugunsten von Microservices auf oder nicht</font> </h5><br><img src="https://habrastorage.org/webt/h0/x5/hv/h0x5hv2builkoorlw3wxiheknru.png"><br>  Die f√ºnfte Version des Produkts ist ein gro√ües monolithisches System mit dem veralteten C ++ - Standard.  Die problematische Implementierung neuer Technologien und die Schwierigkeit, Legacy-Code umzugestalten, f√ºhren zu einer schlechten horizontalen Skalierung.  In der neuen Niederlassung entschieden sie sich, den Microservice-Ansatz als eine M√∂glichkeit zu verwenden, um solche Probleme zu vermeiden. <br><br>  Microservices sind ein moderner Trend, der sowohl Vor- als auch Nachteile hat.  Ich werde versuchen, meine Vision der St√§rken dieser Architektur vorzustellen und √ºber die L√∂sung der Probleme zu sprechen, die sie mit dem Projekt bringt.  Es ist erw√§hnenswert, dass dies der erste Blick auf die Mikroservice-Architektur in der Praxis von Seiten eines normalen Entwicklers sein wird.  Aspekte, die ich wahrscheinlich nicht erw√§hnen werde, werden in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">guten √úbersichtsartikel behandelt</a> . <br><br><h3>  Positive Seite </h3><br>  <b>Kleiner Service bietet viele M√∂glichkeiten.</b> <br>  Zus√§tzlich zum bequemen Schreiben, Testen und Debuggen haben Microservices eine neue Programmiersprache in das Projekt eingef√ºhrt.  Wenn Ihr Projekt ein Monolith ist, ist es schwer vorstellbar, dass Sie eines Tages versuchen werden, einen Teil davon in einer anderen Sprache umzuschreiben, die Sie interessiert.  In der Microservice-Architektur - bitte.  Neben der Programmiersprache k√∂nnen Sie auch neue Technologien ausprobieren, mit der einzigen Einschr√§nkung, dass all dies f√ºr das Unternehmen gerechtfertigt ist.  Zum Beispiel haben wir einige der Mikrodienste in Golang geschrieben und dabei ziemlich viel Zeit gespart. <br><br>  <b>Team-Skalierung</b> <br>  Wir k√∂nnen viele Leute, die sich fr√ºher auf ein Repository festgelegt haben und versucht haben, die Struktur des Monolithen im Kopf zu behalten, in mehrere Teams aufteilen.  Jedes Team wird mit seinem Dienst besch√§ftigt sein.  Dar√ºber hinaus ist der Einstieg einer neuen Person in die Arbeit aufgrund des begrenzten Kontextes, in dem sie arbeiten wird, viel einfacher und schneller.  Auf der anderen Seite gibt es weniger Menschen-Aggregatoren von Weltwissen, die immer √ºber jeden Aspekt eines riesigen Systems informiert werden k√∂nnen.  Vielleicht werde ich mit der Zeit meine Einstellung zu diesem Punkt √ºberdenken. <br><br>  <b>Unabh√§ngige Degradation</b> <br>  Ich w√ºrde die unabh√§ngige Verschlechterung sowohl der positiven als auch der negativen Seite von Microservices zuschreiben, denn wer braucht Ihre Bewerbung, wenn beispielsweise ein Autorisierungsdienst liegt?  Dies ist jedoch immer noch eine positive Seite.  Zuvor hat unser Monolith durch das Sammeln von Statistiken von mehreren hundert virtuellen Maschinen hart gearbeitet. Zum Zeitpunkt der Spitzenlast nahm die Wartezeit auf eine Benutzeranforderung erheblich zu.  Ein separater Statistiksammlungsdienst kann es erfassen, ohne andere Dienste zu beeintr√§chtigen, w√§hrend es dennoch skaliert werden kann, indem neue Hardware hinzugef√ºgt oder die Anzahl der Sammler derselben Statistik erh√∂ht wird.  Wir k√∂nnen sogar einen separaten Server f√ºr Graphite ausw√§hlen, auf dem dieser Dienst Statistiken aufzeichnet.  Bei einem Monolithen, bei dem es eine Basis gibt, ist dies unm√∂glich. <br><br><h3>  Negative Seite </h3><br>  <b>Kontext anfordern</b> <br>  Mein gesamtes Debuggen im Monolithen ergab zwei Abfragen in der Konsole: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># tail -n 460 var/vmmgr.log | grep ERR # tail -n 460 var/vmmgr.log | grep thread_id_with_err</span></span></code> </pre> <br>  Fertig!  Ich kann die gesamte Anfrage vom Eingang bis zum System verfolgen, bis ein Fehler auftritt. <br><br>  Aber wie sieht es jetzt aus, wenn die Anfrage vom Mikrodienst zum Mikrodienst wechselt, begleitet von zus√§tzlichen Aufrufen benachbarter Dienste und Aufzeichnungen in verschiedenen Datenbanken?  Zu diesem Zweck haben wir Anforderungsinformationen implementiert, die die Anforderungskennung und Informationen zu dem Benutzer oder Dienst enthalten, der sie erstellt hat.  So wird es einfacher, die gesamte Ereigniskette zu verfolgen, aber es besteht der Wunsch, einen Protokollaggregationsdienst zu schreiben, da wir schlie√ülich √ºber eine Mikroservice-Architektur verf√ºgen.  Sie k√∂nnen auch auf Elasticsearch schauen. Dieses Problem ist offen und wird bald behoben. <br><br>  <b>Dateninkonsistenz</b> <br>  Daten in Microservices sind dezentralisiert, es gibt keine einzige Datenbank, in der alle Informationen gespeichert sind.  Als ich √ºber diesen Artikel nachdachte, ging ich die wichtigsten Wechselwirkungen zwischen Mikrodiensten in meinem Kopf durch - wo wir Duplikate erhalten k√∂nnen, wo wir Internetwork-Transaktionen verwenden - und stellte fest, dass wir das Problem der Inkonsistenz mit einem Monolithen gel√∂st haben. <br><br>  Wir haben wirklich einen Monolithen mit einer Hauptbasis gebaut, in den die meisten Transaktionsaktionen eingeschlossen sind.  Um den Monolithen herum wurden alle Mikrodienste gesammelt, die die Konsistenz der Hauptdaten nicht beeinflussen.  Die Ausnahme ist eine Reihe von Serviceberechtigungen + Monolithen.  Das Problem in diesem Fall ist, dass die Basisanwendungsdatenbank keine Benutzer als solche, ihre Rollen und zus√§tzlichen Parameter enth√§lt. Dies alles befindet sich im Autorisierungsdienst. <br><br>  Der Systembenutzer kann mit virtuellen Maschinen in einem Monolithen arbeiten, w√§hrend sich im Autorisierungsdienst seine Rechte √§ndern k√∂nnen oder er vollst√§ndig blockiert wird.  Das System muss rechtzeitig darauf reagieren.  In dieser Situation wird die Datenkonsistenz erreicht, indem Benutzerparameter √ºberpr√ºft werden, bevor eine Anforderung ausgef√ºhrt wird. <br><br>  Bei den verbleibenden Mikrodiensten wirkt sich die Unf√§higkeit, sich im Statistikdienst zu registrieren, nicht auf den Betrieb der virtuellen Maschine aus, und diese Aktion kann immer wiederholt werden.  Nun, wir machen einen Statistik-Microservice.  Der Definitionsdom√§nendienst (Erstellen einer virtuellen Maschine mit libvirt) wird jedoch niemals das Licht der Welt erblicken, da wer einen leeren Bereich der Maschine ohne deren tats√§chliche Existenz ben√∂tigt. <br><br><h2>  Die vierte Geschichte.  Frisch ist der Feind des Guten <br></h2><h5>  <font color="#787979">VM-Bereitstellung: Installation von Images anstelle der Installation √ºber ein Netzwerk</font> </h5><br>  In der f√ºnften Version des Produkts dauert die Bereitstellung einer virtuellen Maschine im Vergleich zu realen Standards ziemlich lange.  Der Grund daf√ºr ist die Installation des Betriebssystems √ºber das Netzwerk. <br><br>  F√ºr Centos, Fedora ist RedHat die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kickstart-Methode</a> : <br>  1. Erstellen Sie eine Kickstart-Datei. <br>  2. Geben Sie den Link zur Antwortdatei in den Kernelparametern an. Linux inst.ks = &lt;Link zur Kickstart-Datei&gt;. <br>  3. F√ºhren Sie die Kickstart-Installation aus. <br><br>  Kickstart-Datei ist sehr flexibel, darin k√∂nnen Sie alle Schritte der Installation beschreiben, angefangen von der Methode √ºber die Zeitzone bis hin zur Partitionierung der Festplatte und Einrichtung des Netzwerks.  Der URL-Parameter in unseren Vorlagen gibt an, dass die Installation von einem Remote-Server stammt. <br><br>  F√ºr Debian und Ubuntu gilt die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vordefinierte</a> Methode: <br>  Es √§hnelt der vorherigen, diese Methode basiert auch auf der Konfigurationsdatei und ihrem Inhalt.  Darin haben wir auch die Installation √ºber das Netzwerk konfiguriert. <br><br>  Die Installation f√ºr FreeBSD ist √§hnlich, aber anstelle einer Kickstart-Datei gibt es ein Shell-Skript unserer eigenen Produktion. <br><br><h3>  Positive Aspekte des Ansatzes </h3><br>  Mit dieser Installationsoption k√∂nnen Sie eine Vorlage in unseren beiden Produkten verwenden: VMmanager und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DCImanager</a> (Verwaltung dedizierter Server). <br><br>  Die Bereitstellung virtueller Maschinen ist sehr flexibel. Der Panel-Administrator kann einfach die Betriebssystemvorlage kopieren und die Konfigurationsdatei nach eigenem Ermessen √§ndern. <br><br>  Alle Benutzer haben immer aktuelle Versionen von Betriebssystemen, wenn sie auf einem Remote-Server rechtzeitig aktualisiert werden. <br><br><img src="https://habrastorage.org/webt/8w/z_/bk/8wz_bkz62ncaywrpb3mbd-eoyae.png"><br><br><h3>  Negative Seite </h3><br>  Wie die Praxis gezeigt hat, ben√∂tigten VMmanager-Benutzer keine Installationsflexibilit√§t: Im Vergleich zu dedizierten Servern machten sich nur wenige Leute Sorgen √ºber bestimmte Kickstart-Dateieinstellungen f√ºr virtuelle Maschinen.  Das Warten auf die Installation des Betriebssystems war jedoch ein unzul√§ssiger Luxus.  Die Kehrseite der Relevanz von Betriebssystemen ist, dass sich ein Teil des Installationsprogramms im Netzwerk befindet und ein Teil lokal f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">initrd ist</a> .  Und ihre Versionen m√ºssen √ºbereinstimmen. <br><br>  Dies sind l√∂sbare Probleme.  Sie k√∂nnen einen Pool installierter Computer erstellen und ein eigenes Repository f√ºr Betriebssysteme erstellen. Dies ist jedoch mit zus√§tzlichen Kosten verbunden. <br><br>  Wie k√∂nnen diese Probleme gel√∂st werden, ohne Repositorys und Pools zu erstellen?  Wir haben Betriebssystem-Image-Dateien ausgew√§hlt.  Jetzt sieht der Installationsprozess folgenderma√üen aus: <br>  1. Kopieren des Betriebssystemabbilds auf die Festplatte der virtuellen Maschine. <br>  2. Vergr√∂√üern Sie den Hauptbereich des Bildes nach dem Kopieren um die Gr√∂√üe des freien Speicherplatzes. <br>  3. Grundeinstellung (Festlegen eines Passworts, einer Zeitzone usw.). <br><br>  Alles Neue ist alt vergessen.  Wir haben Betriebssystem-Images in VDSmanager-Linux, dem Vorl√§ufer von VMmanager, verwendet. <br><br>  Aber was ist mit der Flexibilit√§t bei der Installation?  Die Praxis hat gezeigt, dass die meisten Benutzer nicht an bestimmten Netzwerkeinstellungen und der Festplattenzuordnung auf virtuellen Maschinen interessiert sind. <br>  Und die Relevanz der Daten?  Dies kann durch das Vorhandensein von Images mit den neuesten Betriebssystemversionen im Repository erreicht werden, und kleinere Updates k√∂nnen im Erstkonfigurationsskript installiert werden.  Somit wird die virtuelle Maschine bereits erstellt und ausgef√ºhrt, und wenn Sie sie aufrufen, wird das bedingte yum-Update ausgef√ºhrt. <br><br>  Im Gegenzug erhalten wir eine vorgefertigte virtuelle Maschine, deren Bereitstellung nur vom Kopieren der Festplatte, Erh√∂hen der Festplattenpartition und Starten des Betriebssystems abh√§ngt.  Die Implementierung dieses Ansatzes f√ºr die Arbeit mit Maschinen gibt uns die M√∂glichkeit, eigene Bilder zu erstellen und diese zu teilen.  Der Benutzer kann ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LAMP-</a> Bundle oder eine komplexe Umgebung auf der virtuellen Maschine installieren und dann ein Image dieser Maschine erstellen.  Jetzt m√ºssen andere Benutzer keine Zeit damit verschwenden, die erforderlichen Dienstprogramme zu installieren. <br><br>  Wir haben die Konfiguration und √Ñnderung von Partitionen mithilfe der Dienstprogramme aus der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">libguestfs-Suite implementiert</a> .  Wenn Sie beispielsweise ein Kennwort auf einem Linux-Computer √§ndern, werden aus 40 Codezeilen, bestehend aus mount, chroot und usermod, eine Zeile: <br><br><pre> <code class="cpp hljs">command = <span class="hljs-string"><span class="hljs-string">"/usr/bin/virt-customize --root-password password:{password} --domain '{domain_name}'"</span></span>.format(password=args.password, domain_name=args.domain_name)</code> </pre> <br>  Infolgedessen haben wir die Fertigstellung der fertigen virtuellen Maschine so schnell wie m√∂glich gemacht.  Es ist erw√§hnenswert, dass sich die Bereitstellungszeit mit der Netzwerkeinrichtung und der Installation interner Skripte leicht verl√§ngert hat.  Wir haben dieses Problem gel√∂st, indem wir die Installationsschritte am Frontend angezeigt haben und so die Pause zwischen der Erstellung und der vollst√§ndigen Bereitschaft der Maschine ausgef√ºllt haben. <br><br>  Wir haben auch einen flexibleren Ansatz f√ºr die Bereitstellung virtueller Maschinen, auf dessen Grundlage Sie bequem Ihre eigenen Images mit der erforderlichen Umgebung erstellen k√∂nnen. <br><br><h2>  Was hast du geschafft? </h2><br>  In der sechsten Version des Produkts haben wir versucht, den Hauptnachteil der f√ºnften zu ber√ºcksichtigen: die Komplexit√§t der Benutzerinteraktion mit dem Produkt.  Wir haben die Vorlaufzeit f√ºr Schl√ºsselaktionen verk√ºrzt.  Zusammen mit einer nicht blockierenden Schnittstelle erm√∂glicht dies die Arbeit mit dem Panel ohne erzwungenes Warten.  Die Containerisierung hat den Produktinstallationsprozess einfacher und bequemer gemacht.  Der Einsatz moderner Technologien und verschiedener Programmiersprachen hat den Support und die Wartung sowohl f√ºr Programmierer als auch f√ºr Spezialisten des technischen Supports vereinfacht.  Durch den Wechsel zu Microservices konnten neue Funktionen schnell und mit geringf√ºgigen Einschr√§nkungen hinzugef√ºgt werden. <br><br>  Abschlie√üend m√∂chte ich sagen, dass das neue Produkt eine gute Gelegenheit ist, andere Entwicklungsans√§tze und neue Technologien auszuprobieren.  Denken Sie daran, warum Sie dies tun und welche neuen Dinge es Ihnen und Ihren Benutzern bringen wird.  Mach es! <br><br><blockquote>  Wir laden die Habr-Community ein, die Beta-Version von VMmanager 6 zu sehen und Ihr Feedback zu hinterlassen.  Gehen Sie dazu zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">my.saasvm.com</a> , melden Sie sich an und verbinden Sie einen dedizierten Server (CentOS 7 x64, Internetzugang, √∂ffentliche IP-Adresse). <br><br>  Wenn Sie keinen Server haben, schreiben Sie uns an <a href="">help@ispsystem.com</a> oder chatten Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf der Website</a> . Wir stellen Testger√§te von unserem Partner Selectel zur Verf√ºgung. <br><br>  Lesen Sie mehr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in den Nachrichten auf der ISPsystem-Website</a> . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de441968/">https://habr.com/ru/post/de441968/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de441954/index.html">Benutzerbelohnung an Habrs Autoren</a></li>
<li><a href="../de441956/index.html">Einheitliche Fehlerbehandlung (C ++ - Option f√ºr Mikrocontroller)</a></li>
<li><a href="../de441962/index.html">Indizes in PostgreSQL - 1</a></li>
<li><a href="../de441964/index.html">Tipps und Tricks von Kubernetes: Verschieben von Clusterressourcen auf Helm 2</a></li>
<li><a href="../de441966/index.html">Starter Kit zum Testen der Web-Sicherheit</a></li>
<li><a href="../de441970/index.html">FinFisher Butkit-Analyse</a></li>
<li><a href="../de441972/index.html">Invidious - alternatives YouTube-Frontend</a></li>
<li><a href="../de441974/index.html">Der Weg des Historikers von der Personalabteilung zu Java-Programmierern: ein bisschen Gl√ºck und Ausdauer</a></li>
<li><a href="../de441976/index.html">Mit Ihnen FizTech.Science: Wir suchen nach versteckten Parametern und tauchen in die wunderbare Quantenwelt ein</a></li>
<li><a href="../de441978/index.html">Funktionstests der Yandex Alice-F√§higkeiten auf Node.js.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>