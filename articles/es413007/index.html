<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>梆   Extra帽a s铆ntesis cuando se trabaja con FPGA   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy en d铆a, hay dos de los lenguajes de descripci贸n de hardware m谩s comunes: Verilog / SystemVerilog y VHDL. Los lenguajes de descripci贸n de hardware ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Extra帽a s铆ntesis cuando se trabaja con FPGA</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413007/"> Hoy en d铆a, hay dos de los lenguajes de descripci贸n de hardware m谩s comunes: Verilog / SystemVerilog y VHDL.  Los lenguajes de descripci贸n de hardware en s铆 mismos son medios bastante universales, pero 驴es este siempre el caso?  驴Y de qu茅 puede depender la "no universalidad" del lenguaje de descripci贸n de hardware? <br><br>  La idea de escribir este art铆culo surgi贸 durante la s铆ntesis de un proyecto en diferentes entornos de desarrollo, como resultado de lo cual se obtuvieron resultados diferentes.  Dado que el m贸dulo fuente es bastante voluminoso, se escribi贸 un m贸dulo de prueba de un volumen m谩s peque帽o para demostrar los resultados, pero cuya s铆ntesis caus贸 las mismas advertencias / errores.  Se utiliz贸 un registro de 4 bits con reinicio as铆ncrono como m贸dulo de prueba, y se eligieron Libero SoC 18.1, Quartus Prime 17.1, Vivado 2017.4.1 como entornos de desarrollo. <br><a name="habracut"></a><br>  Primero, se presenta una variante para describir dicho m贸dulo en el lenguaje Verilog, cuyo texto es percibido correctamente por los entornos de desarrollo seleccionados: <br><br><pre><code class="hljs vhdl">module test1 ( input clk, input arst, input [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] data, output reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] q ); always @( posedge clk <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> negedge arst ) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ~ arst ) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= <span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-symbol"><span class="hljs-symbol">'h0</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= data ; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> endmodule</code> </pre> <br>  Como resultado de la s铆ntesis de este m贸dulo, se obtuvieron los siguientes esquemas: <br><br><ol><li>  Libero SoC v11.8 <br><br><div class="spoiler">  <b class="spoiler_title">test1 Libero SoC</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/su/2c/op/su2copn_99lk4jwffmboxidue-4.jpeg"><br></div></div></li><li>  Quartus Prime 17.1 <br><br><div class="spoiler">  <b class="spoiler_title">prueba1 cuarto de prima</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5c/iv/ld/5civldrmgkw5gsrcsqvkwrsttxy.jpeg"><br></div></div></li><li>  Vivado 2017.4.1 <br><br><div class="spoiler">  <b class="spoiler_title">test1 vivado</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ju/dv/nr/judvnrm0awltnilsy-v6ik9sd78.jpeg"><br></div></div></li></ol><br>  En todos los circuitos sintetizados para la prueba 1, los disparadores D se usaron con una entrada de reinicio inverso (Quartus Prime) o con la adici贸n de un inversor (VERIFIC_INV en el caso de Libero SoC y LUT1 en el caso de Vivado). <br><br>  驴Ser谩 diferente el circuito sintetizado si se cambia la verificaci贸n de estado del reinicio as铆ncrono?  Para hacer esto, cambie el texto del m贸dulo test1 a la descripci贸n del m贸dulo test2: <br><br><pre> <code class="hljs pgsql">module test2 ( <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> clk, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> arst, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] data, output reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] q ); <span class="hljs-keyword"><span class="hljs-keyword">always</span></span> @(posedge clk <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> negedge arst) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arst) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q&lt;=data; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q&lt;=<span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-string"><span class="hljs-string">'h0; end end endmodule</span></span></code> </pre> <br>  Se puede suponer que la s铆ntesis del m贸dulo test2 no deber铆a diferir de la s铆ntesis del m贸dulo test1, ya que las l贸gicas de la descripci贸n de ambos m贸dulos no se contradicen entre s铆.  Sin embargo, la s铆ntesis del m贸dulo test2 condujo a los siguientes resultados: <br><br><ol><li>  Libero SoC v11.8 <br>  El circuito se sintetiz贸, pero el siguiente mensaje de advertencia "Borde y condici贸n no coinciden (CG136)" apareci贸 en los mensajes.  Esta advertencia indica un desajuste de la lista de sensibilidad y la verificaci贸n de la condici贸n de reinicio.  Sin embargo, el circuito sintetizado no es diferente del m贸dulo test1. <br><br><div class="spoiler">  <b class="spoiler_title">test2 Libero SoC</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/f1/fr/qf/f1frqfolhxmrhqm-s8dh823_iwq.jpeg"><br></div></div></li><li>  Quartus Prime 17.1 <br><br>  La s铆ntesis del circuito fall贸 con el error: <br><br>  "Error (10200): error de la declaraci贸n condicional de Verilog HDL en test2.v (10): no se pueden hacer coincidir los operandos en la condici贸n con los bordes correspondientes en el control de eventos de cierre de la construcci贸n siempre".  El texto del error es similar a la advertencia emitida por Libero SoC. </li><li>  Vivado 2017.4.1 <br><br>  La s铆ntesis del circuito se realiz贸 con la advertencia: <br><br>  "[Sintetizador 8-5788] Registrar q_reg en la prueba del m贸dulo tiene tanto Establecer como restablecer con la misma prioridad.  Esto puede causar desajustes de simulaci贸n.  Considere reescribir el c贸digo ["/home/vlasovdv0111/project_1/project_1.srcs/sources_1/new/test2.v":10]".  Similar a Libero SoC y Quartus Prime, se emiti贸 una advertencia similar.  Adem谩s, la advertencia dec铆a sobre la posible discrepancia entre los resultados del modelado y el trabajo en el hardware, como resultado de lo cual se propuso reescribir el c贸digo del m贸dulo. <br><br><div class="spoiler">  <b class="spoiler_title">test2 vivado</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/8e/jz/8d/8ejz8dgqvtkpzwo9jf28xv2kd3a.jpeg"><br></div></div></li></ol><br>  Despu茅s de describir los m贸dulos test1 y test2, surgi贸 la idea de verificar qu茅 suceder铆a si sintetizamos el siguiente c贸digo: <br><br><pre> <code class="hljs vhdl">module test3 ( input clk, input arst, input [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] data, output reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] q ); always @(posedge clk <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> negedge arst) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arst) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q&lt;=<span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-symbol"><span class="hljs-symbol">'h0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q&lt;=data; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> endmodule</code> </pre> <br>  La descripci贸n de dicho registro no es l贸gica, ya que el reinicio de los activadores en este caso ocurre cuando la l铆nea de reinicio est谩 inactiva. <br><br>  Los resultados de la s铆ntesis fueron los siguientes: <br><br><ol><li>  Libero SoC v11.8 <br><br>  La s铆ntesis del circuito no se realiz贸 con el error: "La l贸gica para q [3: 0] no coincide con un flip-flop est谩ndar (CL123)", por lo que se niega a sintetizar el circuito, citando la ausencia del tipo de disparadores necesarios para la s铆ntesis. </li><li>  Quartus Prime 17.1 <br><br>  El circuito no se sintetiz贸 con el siguiente error: "Error (10200): error de declaraci贸n condicional HDL de Verilog en test3.v (9): no puede hacer coincidir operando (s) en la condici贸n con los bordes correspondientes en el control de evento de cierre de la construcci贸n siempre" .  El texto de este error no difiere del texto de error para el m贸dulo test2. </li><li>  Vivado 2017.4.1 <br><br>  El esquema fue sintetizado sin errores: <br><br><div class="spoiler">  <b class="spoiler_title">test3 vivado</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dk/gx/we/dkgxwe8f5hw109zv99an5h0wrha.jpeg"><br></div></div></li></ol><br>  Sin embargo, qu茅 suceder谩 si describimos un m贸dulo en el que la lista de sensibilidad no contradiga la verificaci贸n de la condici贸n de reinicio, pero los disparadores se reinician cuando la l铆nea de reinicio est谩 inactiva, como en el caso de la descripci贸n del m贸dulo test3.  La descripci贸n de dicho m贸dulo test4 es la siguiente: <br><br><pre> <code class="hljs pgsql">module test4 ( <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> clk, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> arst, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] data, output reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] q ); <span class="hljs-keyword"><span class="hljs-keyword">always</span></span> @( posedge clk <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> negedge arst ) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ~ arst ) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= data ; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= <span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-string"><span class="hljs-string">'h0 ; end end endmodule</span></span></code> </pre> <br>  Durante la s铆ntesis, se obtuvieron los siguientes resultados: <br><br><ol><li>  Libero SoC v11.8 <br><br>  La s铆ntesis del circuito se realiz贸 con la advertencia: <br><br>  "Se帽al encontrada identificada como reloj del sistema que controla 4 elementos secuenciales, incluido q_1 [3].  El uso de este reloj, que no tiene una restricci贸n de tiempo espec铆fica, puede afectar negativamente el rendimiento del dise帽o.  (MT532) ". <br><br><div class="spoiler">  <b class="spoiler_title">test4 Libero SoC</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ms/el/em/mselemdf578vem0b_ayoxoes5oa.jpeg"><br></div></div></li><li>  Quartus Prime 17.1 <br><br>  Como resultado de la s铆ntesis del circuito, se recibieron advertencias: <br><br> <code>芦Warning (13004): Presettable and clearable registers converted to equivalent circuits with latches. Registers power-up to an undefined state, and DEVCLRn places the registers in an undefined state. <br> Warning (13310): Register "q[0]~reg0" is converted into an equivalent circuit using register "q[0]~reg0_emulated" and latch "q[0]~1" <br> Warning (13310): Register "q[1]~reg0" is converted into an equivalent circuit using register "q[1]~reg0_emulated" and latch "q[1]~1" <br> Warning (13310): Register "q[2]~reg0" is converted into an equivalent circuit using register "q[2]~reg0_emulated" and latch "q[2]~1" <br> Warning (13310): Register "q[3]~reg0" is converted into an equivalent circuit using register "q[3]~reg0_emulated" and latch "q[3]~1"禄 <br></code> <br>  Todas las advertencias descritas anteriormente corresponden al hecho de que se usaron pestillos en lugar de disparadores. <br><br><div class="spoiler">  <b class="spoiler_title">prueba 4 cuartos primos</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4i/yz/_s/4iyz_sacasaemyg-hoykw5-cov8.jpeg"><br></div></div></li><li>  Vivado 2017.4.1 <br><br>  El circuito fue sintetizado con una advertencia: <br><br>  "[Sintetizador 8-5788] Registrar q_reg en la prueba del m贸dulo tiene tanto Establecer como restablecer con la misma prioridad.  Esto puede causar desajustes de simulaci贸n.  Considere reescribir el c贸digo ["/home/vlasovdv0111/project_1/project_1.srcs/sources_1/new/test.v":11]".  El texto de este error repite el texto de error para el m贸dulo test2. <br><br><div class="spoiler">  <b class="spoiler_title">test4 vivado</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/f5/x4/xq/f5x4xqfb1ycj6g_gbxakx_wrf8s.jpeg"><br></div></div></li></ol><br>  De todos los experimentos descritos, se pueden sacar las siguientes conclusiones: <br><br><ol><li>  El lenguaje Verilog es un lenguaje de descripci贸n de hardware universal, cuyas limitaciones son las capacidades de los propios entornos de desarrollo; </li><li>  Para la correcta descripci贸n del equipo, es necesario conocer la sintaxis del lenguaje, as铆 como analizar las listas de advertencias y errores que ocurren en cada etapa de la construcci贸n del proyecto. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413007/">https://habr.com/ru/post/es413007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es412997/index.html">Esconder y buscar, o la primera botnet que no teme reiniciar</a></li>
<li><a href="../es412999/index.html">Desde el zumbido de las jirafas hasta los sonidos de los p谩jaros mim茅ticos: escuchar la naturaleza juntos</a></li>
<li><a href="../es413001/index.html">SamsPcbGuide, Parte 5: Trazar l铆neas de se帽al. Distorsi贸n de l铆nea y adaptaci贸n de impedancia</a></li>
<li><a href="../es413003/index.html">El cliente de Steam elimin贸 una vulnerabilidad peligrosa que se hab铆a escondido all铆 durante diez a帽os.</a></li>
<li><a href="../es413005/index.html">Blockchain: una cura para las principales enfermedades de la educaci贸n moderna</a></li>
<li><a href="../es413009/index.html">Gesti贸n del entorno Python con Pipenv</a></li>
<li><a href="../es413011/index.html">S贸tano de la muerte</a></li>
<li><a href="../es413013/index.html">El deseo de transparencia.</a></li>
<li><a href="../es413015/index.html">C贸mo somos analizados en los cines ... y no solo</a></li>
<li><a href="../es413017/index.html">Una peque帽a nota sobre comodines Vamos a cifrar certificados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>