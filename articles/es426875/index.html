<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öõÔ∏è üî° ü§ö Tacticool Mobile Online Shooter Meta Server Arquitectura üö∂üèø üôÜ üë©üèΩ‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Otra charla con Pixonic DevGAMM Talks , esta vez de nuestros colegas de PanzerDog. El ingeniero de software principal de la compa√±√≠a Pavel Platto desa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tacticool Mobile Online Shooter Meta Server Arquitectura</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/426875/">  Otra charla con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pixonic DevGAMM Talks</a> , esta vez de nuestros colegas de PanzerDog.  El ingeniero de software principal de la compa√±√≠a Pavel Platto desarm√≥ el meta-servidor del juego con una arquitectura orientada al servicio, le dijo qu√© soluciones y tecnolog√≠as fueron elegidas, qu√© y c√≥mo escalaron, y qu√© dificultades tuvieron que enfrentar.  El texto del informe, diapositivas y enlaces a otros discursos del mitap, como siempre, debajo del corte. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/JcuOHUzXXHw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>  Primero, quiero demostrar un peque√±o trailer de nuestro juego: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/yIpGvbbMCn4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> <br>  El informe constar√° de 3 partes.  En el primero, hablar√© sobre qu√© tecnolog√≠as elegimos y por qu√©, en el segundo, c√≥mo est√° organizado nuestro meta-servidor, y en el tercero, hablar√© sobre las diversas infraestructuras de soporte que usamos y c√≥mo implementamos la actualizaci√≥n sin tiempo de inactividad. . <br><br><img src="https://habrastorage.org/webt/-s/fg/tz/-sfgtzhre4ij6b0n9-b_r0cako4.png"><br>  <i>Pila tecnol√≥gica</i> <br><br>  El meta servidor est√° alojado en Amazon y est√° escrito en Elixir.  Es un lenguaje de programaci√≥n funcional con un modelo de c√≥mputo de actor.  Como no tenemos Ops, los programadores est√°n involucrados en la operaci√≥n, y la mayor parte de la infraestructura se describe como un c√≥digo que utiliza HashiCorp Terraform. <br><br>  Tacticool se encuentra actualmente en versi√≥n beta abierta, el meta servidor ha estado en desarrollo durante poco m√°s de un a√±o y ha estado en funcionamiento durante casi un a√±o.  Veamos c√≥mo empez√≥ todo. <br><br><img src="https://habrastorage.org/webt/zs/a0/fa/zsa0favmdahf0gdsnt0-goxhrnq.png"><br><br>  Cuando me un√≠ a la compa√±√≠a, ya ten√≠amos funcionalidades b√°sicas implementadas como un monolito en una mezcla C / C ++ y almacenamiento PostageSQL.  Esta implementaci√≥n tuvo ciertos problemas. <br><br>  En primer lugar, debido al bajo nivel de C, hubo bastantes errores esquivos.  Por ejemplo, para algunos jugadores, el emparejamiento se bloquea debido a la puesta a cero incorrecta de la matriz antes de su reutilizaci√≥n.  Por supuesto, encontrar la relaci√≥n entre estos dos eventos fue bastante dif√≠cil.  Y dado que el estado de varios subprocesos se modific√≥ universalmente en el c√≥digo, las condiciones de carrera no estuvieron exentas. <br><br>  El procesamiento paralelo de una gran cantidad de tareas tambi√©n estaba fuera de discusi√≥n, porque el servidor comenz√≥ al comienzo de aproximadamente 10 procesos de trabajo, que fueron bloqueados por consultas a Amazon o la base de datos.  E incluso si nos olvidamos de estas solicitudes de bloqueo, el servicio comenz√≥ a desmoronarse en un par de cientos de conexiones que no realizaron ninguna operaci√≥n, excepto ping.  Adem√°s, el servicio no pod√≠a escalarse horizontalmente. <br><br>  Despu√©s de pasar un par de semanas buscando y reparando los errores m√°s cr√≠ticos, decidimos que era m√°s f√°cil reescribir todo desde cero que tratar de corregir todas las deficiencias de la soluci√≥n actual. <br><br>  Y cuando comienzas desde cero, tiene sentido intentar elegir un idioma que ayude a evitar algunos de los problemas anteriores.  Ten√≠amos tres candidatos: <br><br><ul><li>  C #; </li><li>  Ir; </li><li>  Elixir </li></ul><br><img src="https://habrastorage.org/webt/_f/vt/q5/_fvtq51jwvlo2uuquqy-4vwsnhw.png"><br><br>  C # estaba en la lista de "conocidos", como  el cliente y el servidor del juego est√°n escritos en Unity, y la mayor parte de la experiencia en el equipo fue con este lenguaje de programaci√≥n.  Go y Elixir fueron considerados porque estos son lenguajes modernos y bastante populares creados para desarrollar aplicaciones de servidor. <br><br>  Los problemas de la iteraci√≥n anterior nos ayudaron a determinar los criterios para evaluar candidatos. <br><br>  El primer criterio fue la conveniencia de trabajar con operaciones asincr√≥nicas.  En C #, el trabajo conveniente con operaciones asincr√≥nicas no apareci√≥ en el primer intento.  Esto llev√≥ al hecho de que tenemos un "zool√≥gico" de soluciones que, en mi opini√≥n, todav√≠a se mantienen un poco al margen.  En Go y Elixir, este problema se tuvo en cuenta al dise√±ar estos lenguajes, ambos usan hilos ligeros (en Go son gorutinas, en Elixir son procesos).  Estas transmisiones tienen una sobrecarga mucho menor que los subprocesos del sistema, y ‚Äã‚Äãdado que podemos crearlos en decenas y cientos de miles, no lamentamos bloquearlos. <br><br>  El segundo criterio fue la capacidad de trabajar con procesos competitivos.  C # listo para usar no ofrece nada m√°s que grupos de subprocesos y memoria compartida, cuyo acceso debe protegerse utilizando varias primitivas de sincronizaci√≥n.  Go tiene un modelo menos propenso a errores en forma de gorutinas y canales.  Elixir, por otro lado, ofrece un modelo de actor sin memoria compartida con mensajes.  La falta de memoria compartida permiti√≥ implementar tecnolog√≠as √∫tiles para un entorno de ejecuci√≥n competitivo en tiempo de ejecuci√≥n, como la multitarea honesta y la recolecci√≥n de basura sin interrupciones en el mundo. <br><br>  El tercer criterio fue la disponibilidad de herramientas para trabajar con tipos de datos inmutables.  Toda mi experiencia en desarrollo ha demostrado que una gran parte de los errores est√°n asociados con cambios de datos incorrectos.  Existe una soluci√≥n a esto hace mucho tiempo: tipos de datos inmutables.  En C #, se pueden crear estos tipos de datos, pero a costa de una tonelada de repetitivo.  En Go, esto no es posible en absoluto.  Y en Elixir, todos los tipos de datos son inmutables. <br><br>  Y el √∫ltimo criterio fue el n√∫mero de especialistas.  Aqu√≠ los resultados son obvios.  Al final, optamos por Elixir. <br><br>  Con la elecci√≥n del alojamiento, todo fue mucho m√°s simple.  Ya alojamos servidores de juegos en Amazon GameLift, adem√°s, Amazon ofrece una gran cantidad de servicios que nos permitir√≠an reducir el tiempo de desarrollo. <br><br><img src="https://habrastorage.org/webt/f2/zm/jn/f2zmjnyjejb3ffw0vhs69hvqjoi.png"><br><br>  Nos rendimos completamente a la nube y no implementamos soluciones de terceros nosotros mismos (bases de datos, colas de mensajes), todo esto es administrado por Amazon para nosotros.  En mi opini√≥n, esta es la √∫nica soluci√≥n para un equipo peque√±o que quiere desarrollar un juego en l√≠nea, y no la infraestructura para ello. <br><br>  Descubrimos la elecci√≥n de tecnolog√≠as, pasemos a c√≥mo funciona el meta servidor. <br><br><img src="https://habrastorage.org/webt/q1/jy/m8/q1jym8itnftw6e3tqyvsbqh-uva.png"><br><br>  En general: los clientes se conectan al equilibrador de carga de Amazon a trav√©s de conexiones de socket web;  el equilibrador dispersa estas conexiones entre varias instancias de front-end, el front-end env√≠a solicitudes de cliente a backends.  Pero el front-end y el back-end se comunican indirectamente, a trav√©s de colas de mensajes.  Hay una cola separada para cada tipo de mensaje, y la interfaz por tipo de mensaje determina d√≥nde escribirla, y los servidores escuchan estas colas. <br><br>  Para que el servidor pueda enviar una respuesta a la solicitud al cliente, o alg√∫n tipo de evento, cada interfaz tiene una cola separada (especialmente asignada para ello).  Y en cada solicitud, el servidor recibe un identificador de interfaz para determinar en qu√© cola se debe escribir la respuesta.  Si necesita enviar un evento, llama a la base de datos para averiguar a qu√© instancia frontend est√° conectado el cliente. <br><br>  Con el esquema general, pasemos a los detalles. <br><br><img src="https://habrastorage.org/webt/xe/rr/u-/xerru-5vn3tx-dwqbylflu18mrm.png"><br><br>  En primer lugar, hablar√© sobre algunas caracter√≠sticas de la interacci√≥n cliente-servidor.  Utilizamos nuestro protocolo binario porque es bastante eficiente y permite ahorrar tr√°fico.  En segundo lugar, para cualquier operaci√≥n con una cuenta que la cambie, el servidor no env√≠a estos cambios al cliente, sino la versi√≥n completa (actualizada) de esta cuenta.  Esto es un poco menos eficiente, pero de todos modos no ocupa mucho espacio y simplifica enormemente nuestra vida tanto en el cliente como en el servidor.  Adem√°s, la interfaz garantiza que el cliente no realice m√°s de una solicitud a la vez.  Esto le permite detectar errores en el cliente, por ejemplo, cuando cambia a otra pantalla antes de que el jugador vea el resultado de la operaci√≥n anterior. <br><br>  Ahora un poco sobre c√≥mo est√° organizada la interfaz. <br><br><img src="https://habrastorage.org/webt/te/-k/ff/te-kffgzvatzj_3tjwcus5lvpdk.png"><br><br>  Un frontend es esencialmente un servidor web que escucha las conexiones de socket web.  Para cada sesi√≥n, se crean dos procesos.  El primer proceso sirve la conexi√≥n de socket web en s√≠, y el segundo es una m√°quina de estado que describe el estado actual del cliente.  En funci√≥n de este estado, determina la validez de las solicitudes del cliente.  Por ejemplo, casi todas las solicitudes no pueden completarse hasta que se complete la autorizaci√≥n.  Dado que no hay estado en la interfaz adem√°s de estas sesiones, es muy f√°cil agregar nuevas instancias de interfaz, pero es un poco m√°s dif√≠cil eliminar las antiguas.  Antes de desinstalar, debe permitir que todos los clientes completen sus solicitudes actuales y pedirles que se vuelvan a conectar a otra instancia. <br><br>  Ahora sobre c√≥mo se ve el backend.  Por el momento, consta de cinco servicios. <br><br><img src="https://habrastorage.org/webt/qh/cj/x4/qhcjx4ckmzg8lcqpriouhi8rnee.png"><br><br>  El primero trata de todo lo relacionado con las cuentas, desde compras de divisas en el juego hasta completar misiones.  El segundo funciona con todo lo relacionado con los partidos: interact√∫a directamente con GameLift y los servidores de juegos.  El tercer servicio es comprar dinero real.  El cuarto y quinto son responsables de las interacciones sociales, una para amigos y otra para un juego de mesa. <br><br>  Cada uno de los servicios de back-end desde un punto de vista arquitect√≥nico se ve absolutamente id√©ntico.  Son un conjunto de tuber√≠as, cada una de las cuales procesa un tipo de mensaje.  La tuber√≠a consta de dos elementos: productor y consumidor. <br><br><img src="https://habrastorage.org/webt/ym/di/eh/ymdiehrcngon3im1my2d8nbbgsk.png"><br><br>  La √∫nica tarea del productor es leer los mensajes de la cola.  Por lo tanto, se implementa de forma completamente general y para cada canalizaci√≥n solo necesitamos indicar cu√°ntos productores hay, de qu√© fila leer y cu√°ntos consumidores servir√° cada productor.  El consumidor, por otro lado, se implementa por separado para cada canalizaci√≥n y es un m√≥dulo con la √∫nica funci√≥n obligatoria que acepta un mensaje, realiza todo el trabajo necesario y devuelve una lista de mensajes que deben enviarse a otros servicios al cliente o al servidor del juego.  El productor tambi√©n implementa la contrapresi√≥n para que con un fuerte aumento en el n√∫mero de mensajes no haya sobrecarga, y solicita mensajes no m√°s de lo que tiene consumidores libres. <br><br>  Los servicios de back-end no contienen ning√∫n estado, por lo que es f√°cil para nosotros agregar y eliminar instancias antiguas.  Lo √∫nico que debe hacer antes de eliminar es pedirles a los productores que dejen de leer nuevos mensajes y les den a los consumidores un poco de tiempo para terminar de procesar los mensajes activos. <br><br>  ¬øC√≥mo ocurre la interacci√≥n con GameLift?  GameLift consta de varios componentes.  De los que usamos, este es un emparejador FlexMatch, una cola de ubicaci√≥n que determina en qu√© regi√≥n particular organizar una sesi√≥n de juego con estos jugadores, y las flotas mismas, que consisten en servidores de juegos. <br><br><img src="https://habrastorage.org/webt/c8/ge/5h/c8ge5huiowlmu5q7b9izd4sew4y.png"><br><br>  ¬øC√≥mo va esta interacci√≥n?  Meta se comunica directamente solo con el emparejador, le env√≠a solicitudes para encontrar el partido.  Y notifica al meta de todos los eventos durante el emparejamiento a trav√©s de las mismas colas de mensajes.  Y tan pronto como encuentra un grupo adecuado de jugadores para comenzar el partido, env√≠a una solicitud a la cola de ubicaci√≥n, que a su vez selecciona un servidor para ellos. <br><br>  La interacci√≥n de meta con el servidor del juego es extremadamente simple.  El servidor del juego necesita informaci√≥n sobre cuentas, bots y un mapa, y el meta env√≠a toda esta informaci√≥n a la cola creada espec√≠ficamente para esta coincidencia en un solo mensaje. <br><br><img src="https://habrastorage.org/webt/vv/zo/y5/vvzoy5ycub5em-qiovlo911pg0k.png"><br><br>  Y el servidor del juego, tras la activaci√≥n, comienza a escuchar esta cola y recibe todos los datos que necesita.  Al final del partido, env√≠a sus resultados a la cola general que el meta est√° escuchando. <br><br>  Ahora pasemos a la infraestructura adicional que utilizamos. <br><br><img src="https://habrastorage.org/webt/l-/st/nu/l-stnuybsqrbk_be4fhlgrsdgpa.png"><br><br>  La implementaci√≥n de servicios es bastante simple.  Todos funcionan en contenedores acoplables, y utilizamos Amazon ECS para la orquestaci√≥n.  Es mucho m√°s simple que Kubernetes, por supuesto, menos sofisticado, pero realiza las tareas que necesitamos de √©l.  A saber: servicios de escalado y lanzamientos continuos, cuando necesitamos completar alg√∫n tipo de correcci√≥n de errores. <br><br>  Y el √∫ltimo servicio que tambi√©n utilizamos es AWS Fargate.  Nos ahorra tener que administrar de forma independiente el grupo de m√°quinas en las que se ejecutan nuestros contenedores acoplables. <br><br><img src="https://habrastorage.org/webt/q1/xl/8m/q1xl8mppdukmbjoezzm6pzlbl9k.png"><br><br>  Como almacenamiento principal usamos DynamoDB.  En primer lugar, lo elegimos porque es muy f√°cil de operar y escalar.  Tambi√©n utilizamos Redis como almacenamiento adicional a trav√©s del servicio administrado Amazon ElasiCache.  Lo usamos para la tarea de calificaci√≥n global del jugador y para almacenar en cach√© los datos b√°sicos de la cuenta en situaciones en las que necesitamos devolver datos de cientos de cuentas de juego al cliente de inmediato (por ejemplo, en la misma tabla de calificaci√≥n o en la lista de amigos). <br><br>  Para almacenar configuraciones, mec√°nicas de meta-juego, descripciones de armas, h√©roes, etc.  Usamos un archivo JSON que adjuntamos a las im√°genes de los servicios que lo necesitan.  Porque es mucho m√°s f√°cil para nosotros implementar una nueva versi√≥n del servicio con datos actualizados (si se descubri√≥ alg√∫n error) que tomar una decisi√≥n que actualizar√° din√°micamente estos datos de alg√∫n almacenamiento externo en tiempo de ejecuci√≥n. <br><br>  Para iniciar sesi√≥n y monitorear, utilizamos bastantes servicios. <br><br><img src="https://habrastorage.org/webt/lh/ub/3u/lhub3urulc1urcn8omuxprcn0rg.png"><br><br>  Comencemos con CloudWatch.  Este es un servicio de monitoreo en el que se agrupan las m√©tricas de todos los servicios de Amazon.  Por lo tanto, decidimos enviar las m√©tricas desde nuestro meta servidor all√≠ tambi√©n.  Y para iniciar sesi√≥n, utilizamos un enfoque com√∫n tanto en el cliente como en el servidor del juego y en el meta servidor.  Enviamos todos los registros al servicio amaz√≥nico Kinesis Firehose, que a su vez los transfiere a Elasticseach y S3. <br><br>  En Elasticseach, solo almacenamos datos relativamente recientes y, con la ayuda de Kibana, buscamos errores, resolvemos algunas de las tareas de an√°lisis de juegos y construimos paneles operativos, por ejemplo, con un horario de CCU y la cantidad de nuevas instalaciones.  S3 contiene todos los datos hist√≥ricos y los usamos a trav√©s del servicio Athena, que proporciona una interfaz SQL sobre los datos en S3. <br><br>  Ahora un poco sobre c√≥mo usamos Terraform. <br><br><img src="https://habrastorage.org/webt/o8/jj/-q/o8jj-qfa1hsyq1qposebwbof4dc.png"><br><br>  Terraform es una herramienta que le permite describir declarativamente la infraestructura y, si hay alg√∫n cambio en la descripci√≥n, determina autom√°ticamente las acciones que debe tomar para llevar su infraestructura a un aspecto actualizado.  Por lo tanto, al tener una descripci√≥n √∫nica, obtenemos un entorno casi id√©ntico para la puesta en escena y la producci√≥n.  Adem√°s, estos entornos est√°n completamente aislados, ya que se implementan en diferentes cuentas.  El √∫nico inconveniente significativo de Terraform para nosotros es el soporte incompleto de GameLift. <br><br>  Tambi√©n hablar√© sobre c√≥mo implementamos la actualizaci√≥n sin tiempo de inactividad. <br><br><img src="https://habrastorage.org/webt/_l/ge/va/_lgevakn50wndn5tvfipi1_ujam.png"><br><br>  Cuando lanzamos actualizaciones, levantamos una copia de la mayor√≠a de los recursos: servicios, colas de mensajes, algunas etiquetas en la base de datos.  Y aquellos jugadores que descarguen la nueva versi√≥n del juego se conectar√°n a este grupo actualizado.  Pero aquellos jugadores que a√∫n no se hayan actualizado pueden continuar jugando durante alg√∫n tiempo en la versi√≥n anterior del juego, conect√°ndose al cl√∫ster anterior. <br><br>  C√≥mo lo implementamos.  En primer lugar, utilizando el motor del m√≥dulo en Terraform.  Hemos asignado un m√≥dulo en el que describimos todos los recursos versionados.  Y estos m√≥dulos se pueden importar varias veces, con diferentes par√°metros.  En consecuencia, para cada versi√≥n importamos este m√≥dulo, indicando el n√∫mero de esta versi√≥n.  La falta de un esquema en DynamoDB tambi√©n nos ayud√≥, lo que hace posible realizar migraciones de datos no durante la actualizaci√≥n, sino posponerlas para cada cuenta hasta que su propietario inicie sesi√≥n en la nueva versi√≥n del juego.  Y en el equilibrador, simplemente indicamos para cada versi√≥n de la regla para que sepa a d√≥nde dirigir a los jugadores con diferentes versiones. <br><br>  Finalmente, un par de cosas que aprendimos.  Primero, la configuraci√≥n de toda la infraestructura debe ser automatizada.  Es decir  configuramos algunas cosas con nuestras manos por un tiempo, pero tarde o temprano cometimos un error en la configuraci√≥n, por lo que hubo fakaps. <br><br><img src="https://habrastorage.org/webt/5i/3n/7f/5i3n7fuurk18kiak_krk6jy8w8s.png"><br><br>  Y lo √∫ltimo: debe tener una r√©plica o una copia de seguridad para cada elemento de su infraestructura.  Y si no lo haces por algo, esta cosa en particular nos decepcionar√°. <br><br><h3>  Preguntas de la audiencia </h3><br>  <b>- Pero, ¬øno le molesta que el autoescalado pueda retrasarse demasiado debido a alg√∫n tipo de error y obtendr√° mucho dinero?</b> <br><br>  - Para la escala autom√°tica, los l√≠mites a√∫n est√°n establecidos.  No estableceremos un l√≠mite demasiado grande para no caer por mucho dinero.  Esta es la soluci√≥n principal + monitoreo.  Puede configurar alertas si algo es demasiado fuerte. <br><br>  <b>- ¬øCu√°les son tus l√≠mites actuales?</b>  <b>Relativo a la infraestructura actual como porcentaje.</b> <br><br>  - Ahora tenemos una fase de prueba beta abierta en 11 pa√≠ses, por lo que no es una CCU tan grande para evaluar al menos de alguna manera.  Ahora la infraestructura est√° demasiado sobreaprovisionada para la cantidad de personas que tenemos. <br><br>  <b>- ¬øY todav√≠a no hay l√≠mites?</b> <br><br>  - S√≠, es solo que son 10-100 veces m√°s que nuestra CCU.  No hagas menos. <br><br>  <b>- Dijiste que tienes l√≠neas entre el frente y el backend, esto es muy inusual.</b>  <b>¬øPor qu√© no directamente?</b> <br><br>  - Quer√≠amos servicios sin estado para implementar f√°cilmente el mecanismo de respaldo, de modo que el servicio no solicite m√°s mensajes de los que tiene controladores gratuitos.  Adem√°s, por ejemplo, cuando falla un controlador, la cola dar√° el mismo mensaje a otro controlador, tal vez tenga √©xito. <br><br>  <b>- ¬øLa cola persiste de alguna manera?</b> <br><br>  - si.  Este es un servicio de Amazon SQS. <br><br>  <b>- En cuanto a las colas: ¬øcu√°ntos canales se crean durante el juego?</b>  <b>¬øTienes un cierto n√∫mero de canales para cada partido?</b> <br><br>  - Crea relativamente poco.  La mayor√≠a de las colas, como las colas de solicitud, son est√°ticas.  Hay una cola de solicitudes de autorizaci√≥n, hay una cola para el inicio del partido.  De las colas creadas din√°micamente, solo tenemos colas para cada interfaz (se crea para los mensajes entrantes para los clientes al inicio) y para cada coincidencia creamos una cola.  En este servicio, no cuesta casi nada, tienen cualquier solicitud facturada de la misma manera.  Es decir  cualquier solicitud a SQS (crear una cola, leer algo de ella) cuesta lo mismo y, al mismo tiempo, no eliminamos estas colas para guardarlas, se eliminar√°n m√°s adelante.  Y el hecho de que existan no nos cuesta nada. <br><br>  <b>- En esta arquitectura, ¬øesto no ser√° un l√≠mite para ti?</b> <br><br>  - No <br><br><h3>  M√°s conversaciones con Pixonic DevGAMM Talks </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Usar c√≥nsul para escalar servicios con estado</a> (Ivan Bubnov, DevOps en BIT.GAMES); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CICD: implementaci√≥n perfecta en sistemas de cl√∫ster distribuidos sin tiempo de inactividad</a> (Egor Panov, administrador del sistema Pixonic); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La pr√°ctica de usar el modelo de actor en la plataforma de back-end del juego Quake Champions</a> (Roman Rogozin, desarrollador de back-end Sabre Interactive); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo ECS, C # Job System y SRP cambian el enfoque de la arquitectura</a> (Valentin Simonov, ingeniero de campo en Unity); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Principio de KISS en desarrollo</a> (Konstantin Gladyshev, Programador principal de juegos en 1C Game Studios); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">L√≥gica general del juego en el cliente y el servidor</a> (Anton Grigoriev, Subdirector T√©cnico de Pixonic). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pepino en la nube: uso de secuencias de comandos BDD para pruebas de estr√©s del producto</a> (Anton Kosyakin, gerente t√©cnico de productos en la plataforma ALICE). </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426875/">https://habr.com/ru/post/es426875/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426861/index.html">Una nueva b√∫squeda de materia oscura tiene lugar debajo de la monta√±a.</a></li>
<li><a href="../es426863/index.html">Disponible sobre cuaterniones y sus beneficios.</a></li>
<li><a href="../es426865/index.html">Un dise√±o de tablero claro para un sofisticado sistema de administraci√≥n de anuncios.</a></li>
<li><a href="../es426869/index.html">C√≥mo realizar videoconferencias de manera efectiva con clientes extranjeros</a></li>
<li><a href="../es426873/index.html">Control autom√°tico mediante acceso remoto al registro de Windows.</a></li>
<li><a href="../es426879/index.html">Configuraci√≥n de un sistema de restricci√≥n el√©ctrica para proyectos que utilizan interfaces de alta velocidad.</a></li>
<li><a href="../es426881/index.html">Lanzamiento de programas para desarrolladores en l√≠nea</a></li>
<li><a href="../es426889/index.html">C√≥mo participar en concursos de aprendizaje autom√°tico. Conferencia en Yandex</a></li>
<li><a href="../es426891/index.html">SAP Process Mining o c√≥mo entender sus procesos de negocio</a></li>
<li><a href="../es426893/index.html">C√≥mo iniciar una aplicaci√≥n de iOS a trav√©s de React Native</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>