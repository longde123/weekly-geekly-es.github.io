<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌎 🌼 🕛 统一服务goszakup.gov.kz-版本2 🏥 👗 🧝🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我在公司电子金融中心JSC中担任开发人员。 
 我们的项目之一是哈萨克斯坦共和国的公共采购门户网站goszakup.gov.kz。 

 一年前，我们启动了一个大型项目-统一服务（OpenData）。 
 为了实现，使用了RestAPI方法。 

 今天，我将讨论我们服务的新版本以及与之合作的新界面...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>统一服务goszakup.gov.kz-版本2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441438/">我在公司电子金融中心JSC中担任开发人员。 <br> 我们的项目之一是哈萨克斯坦共和国的公共采购门户网站goszakup.gov.kz。 <br><br> 一年前，我们启动了一个大型项目-统一服务（OpenData）。 <br> 为了实现，使用了RestAPI方法。 <br><br> 今天，我将讨论我们服务的新版本以及与之合作的新界面。 <br><br><img src="https://habrastorage.org/webt/pt/bj/mx/ptbjmxtr9jqrdj0suzdnoztmabu.png"><br><a name="habracut"></a><br> 我们已经开发并启动了6种开放数据服务： <br><br><ul><li> 参加者名册 </li><li> 不良供应商登记册 </li><li> 年度计划登记册 </li><li> 州公告 采购 </li><li> 批次登记 </li><li> 合同登记 </li></ul><br> 哈萨克斯坦的许多公司已经在连接和接收有关这些服务的数据。 <br> 由于公司不需要编写不同的解析器来收集有关公共采购的数据，因此开放数据的推出使我们可以将数据库负载减少约40％。 完成一个困难的任务就足够了:) <br><br><ol><li> 编写访问令牌请求 </li><li> 在我们的门户网站<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">goszakup.gov.kz/ru/developer/ows</a>上阅读服务文档。 </li><li> 编写您的RestAPI客户端 </li></ol><br><h4> 统一服务-一种新方法 </h4><br> 与解析站点相比，RestAPI可以更方便，更快捷地获取数据，但是标准的Res​​tAPI不能为公司提供灵活性，并且无法与对象建立连接，您必须首先获取所有数据，然后才能建立它们之间的链接。 <br> 为了接收广告上的数据，RestAPI必须先请求公告注册，然后再请求批量注册，最后是计划注册。 这意味着要接收一个公告，必须完成至少3个请求，并且如果您需要接收有关50个广告的数据，则您至少需要101个对RestAPI的请求，前提是每个公告将有1手（1个接收50个广告，50个接收手，50个接收到）。收到计划积分）。 <br><br> 我们找到了一种将这一金额减少到一个请求的方法！ <br><br> 我们正在启动统一服务的第二版<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-ows.goszakup.gov.kz/v2</a> 。 <br> 除了扩展数据集，我们还扩展了使用API​​的能力。 <br><br> 现在可以通过RestAPI和新接口GraphQL获得数据。 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ows.goszakup.gov.kz/v2/graphql</a> <br><br><img src="https://habrastorage.org/webt/jm/q-/tb/jmq-tbqg_fuph_g2mvshivb-gas.png"><br><br> 我不会描述什么是GraphQL，为此，您可以阅读<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">aliksend</a>文章- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是什么GraphQL？</a> <br><br> 我将告诉您启动GraphQL后我们获得了哪些好处： <br><br><ul><li> 要求灵活性； </li><li> 获取相关对象； </li><li> 完整键入请求和响应； </li><li> 新的数据搜索界面。 </li></ul><br><h4> 要求灵活性 </h4><br> 通过一个简单的RestAPI请求，您可以获得预先设置的数据格式。 <br> 查询GraphQL时，将以所需的格式获取数据。 <br><br> 请求数据时，您自己确定所需数据的格式，例如ID和 <br><br> 合约编号 <br><br><pre><code class="javascript hljs">{ contract { id contract_number_sys } }</code> </pre> <br> 作为响应，我们仅获得以下数据： <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span> } ] } }</code> </pre><br> 好吧，这样的查询是最容易实现GraphQL的。 公司有机会选择他们想要接收的数据，而我们不需要像使用RestAPI一样进行任何调整。 您仅获得所需的字段集。 <br><br><img src="https://habrastorage.org/webt/95/cr/jw/95crjwjr7wikz8fhajv-lh6w9iq.gif"><br><br><h4> 检索相关对象 </h4><br> 我们并没有仅仅通过允许部分选择数据来重复RestAPI的功能。 <br><br> 我们已经实现了GraphQL的第二个功能-对象关系。 <br><br> 如果您根据RestAPI接收数据，则为了接收合同和公司上的数据，合同中的客户首先需要从<b>参与者登记簿中</b>获取数据，然后才从<b>合同登记簿中</b>接收数据并在对象之间建立连接。 <br><br> 现在，使用GraphQL时，您不需要从参与者注册中完全接收数据，只需以您感兴趣的格式请求数据： <br><br><pre> <code class="javascript hljs">{ contract { id contract_number_sys customer { name_ru } } }</code> </pre><br> 因此，通过一个请求，我们同时获得了客户的合同数据和公司数据： <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span>, <span class="hljs-string"><span class="hljs-string">"customer"</span></span> : { <span class="hljs-string"><span class="hljs-string">"name_ru"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } } ] } }</code> </pre><br><img src="https://habrastorage.org/webt/9t/q6/_i/9tq6_ixwkyzzqnplhf2gpdfjd2e.gif"><br><br> 而且已经实现了许多这样的关系，现在公司接收数据将大大减少接收数据的请求。 同时，不再需要确切猜测对象之间的相互关系，就可以接收完整的数据集以将它们彼此连接。 <br><br> 我试图部分说明我设法实现的连接结构。 <br><br><img src="https://habrastorage.org/webt/iv/db/sw/ivdbsw9gyxmh7cugosffdj6wcjy.png"><br><br><h4> 键入请求和响应 </h4><br> 许多SOAP请求的支持者总是把最重要的优点放在首位-数据键入。 <br> 与SOAP不同，RestAPI没有对其结构的描述，并且您事先也不知道什么数据类型。 但是GraphQL改变了一切。 <br><br> 现在，您可以在整个数据方案中向GraphQL请求数据，您将收到： <br><br><ul><li> 数据结构的完整描述； </li><li> 描述哪个字段具有数据类型（Int，String，Boolean）； </li><li> 嵌套对象的描述和嵌套对象的字段结构； </li><li> 详细说明，例如，每个领域都用俄语显示； </li><li> 收到有关某个字段已收到带有说明的已弃用标志的通知。 </li></ul><br> 我使用Insomnia REST客户端程序<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-insomnia.rest</a>与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GraphQL</a>一起<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用</a> <br> 使用GraphQL时，它将接收对象的整个结构，并在构造查询时提示。 <br><br> 我将给出一些屏幕截图作为示例。 <br><br>  1.自 该程序收到了完整的对象结构 <br><br><img src="https://habrastorage.org/webt/xl/jj/fb/xljjfbpgh2j1xata_orj0aurhqi.png"><br><br>  2.提示每个字段的描述及其数据类型和描述 <br><br><img src="https://habrastorage.org/webt/6v/ep/93/6vep93hfz0ynsplgm9_kraaktky.png"><br><br>  3.提示某些字段收到标志-不推荐使用 <br><br><img src="https://habrastorage.org/webt/vg/rx/lt/vgrxlti7nowou4kqq1gsr6ov138.png"><br><br> 借助GraphQL的此功能，您可以全面了解要使用的字段和对象。 <br><br><img src="https://habrastorage.org/webt/4f/lg/ux/4flguxg9ruc1mgbvyif7ffcwr9e.gif"><br><br><h4> 新的数据检索界面 </h4><br> 最后我留下了最有趣的部分。 <br><br> 一切似乎都很酷，可以构建自己的数据结构，与其他对象建立连接，所有数据都被键入。 但是仍然缺少一些东西... <br><br> 没有足够的机会搜索此数据。 <br><br> 从一开始，就使用请求本身中的参数实现了搜索格式： <br><br><pre> <code class="javascript hljs">{ trd_buy(ref_buy_status_id: <span class="hljs-number"><span class="hljs-number">1</span></span>) { name_kz name_ru } }</code> </pre><br> 但是在这里我遇到了许多问题： <br><br><ol><li> 在具有大量搜索条件的情况下，查询变得根本无法阅读； </li><li> 搜索数据以搜索一个字段的多个变体时，不可能定义数组。 </li></ol><br> 为了简化查询的结构并扩大搜索能力，我实现了用于过滤数据的嵌套对象。 <br><br> 我们在请求中定义一个指示过滤对象的变量。 <br><br><pre> <code class="javascript hljs">query($filter: TrdBuyFiltersInput){ trd_buy(filters: $filter) { name_kz name_ru } }</code> </pre><br> 我们描述数据搜索参数本身： <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"filter"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ref_buy_status_id"</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>] } }</code> </pre><br> 因此，我们将收到状态为1和2的所有广告。 <br><br> 在请求本身中，我们仅指示数据结构，并且所有搜索参数都进入参数的传输中，在这些参数中，我们已经可以根据几个条件传输数据数组以进行过滤。 <br><br><img src="https://habrastorage.org/webt/cl/gl/di/clgldijd6pe0y7evhlw0k37eawg.gif"><br><br> 此外，在GraphQL模式本身中，我们都对这种搜索对象进行了描述： <br><br><img src="https://habrastorage.org/webt/t5/ns/i1/t5nsi1rf4yy4ubvk3cxakvmqmci.png"><br><br><h4> 统一服务-2.0版： </h4><br> 服务工作： <br><br><ul><li> 参加者名册 </li><li> 公告登记处 </li><li> 合同登记 </li><li> 行为登记 </li><li> 批次登记 </li><li> 年度计划登记册 </li><li> 不良供应商登记册 </li></ul><br> 我们推出了一项新功能，该功能极大地简化了我们API的使用，具有灵活的查询结构，并能够根据指定的条件搜索数据。 <br><br> 我们并没有失去获取数据的速度，只是因此减少了获取数据所需的请求数量。 <br><br> 我们能够在数据模式中警告禁用或重命名的字段。 <br><br> 我们计划进一步开发API，并支持对服务数据进行形态搜索。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN441438/">https://habr.com/ru/post/zh-CN441438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN441424/index.html">如何保护自己免受品牌巨魔的攻击</a></li>
<li><a href="../zh-CN441426/index.html">苹果的最高经理被指控进行内幕交易。 他不得不打她</a></li>
<li><a href="../zh-CN441428/index.html">PowerShell基础知识：用特定字符定义行尾</a></li>
<li><a href="../zh-CN441430/index.html">第一次尝试使用App Center并讲述我们的经验</a></li>
<li><a href="../zh-CN441436/index.html">科学家利用CRISPR工程技术培育了通用干细胞</a></li>
<li><a href="../zh-CN441442/index.html">YouTube已停用反疫苗广告</a></li>
<li><a href="../zh-CN441444/index.html">在手指上：Rust中的关联类型以及它们与类型参数的区别是什么</a></li>
<li><a href="../zh-CN441446/index.html">学习计算机：如何获得新技能</a></li>
<li><a href="../zh-CN441448/index.html">不可能的锅和其他彭罗斯瓷砖获胜</a></li>
<li><a href="../zh-CN441450/index.html">Pentesting Azure-关于云计算安全性的思考</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>