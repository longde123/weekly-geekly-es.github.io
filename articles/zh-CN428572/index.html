<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â‡ï¸ ğŸ† ğŸš¸ Reactä¸­çš„é«˜é˜¶ç»„ä»¶ âš’ï¸ ğŸ  ğŸ˜¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ€è¿‘ï¼Œæˆ‘ä»¬é’ˆå¯¹å­¦ä¹ JavaScriptçš„äººå‘å¸ƒäº†JavaScripté«˜é˜¶å‡½æ•°çš„èµ„æ–™ ã€‚ æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„æ–‡ç« æ˜¯ä¸ºåˆå­¦è€…Reactå¼€å‘äººå‘˜å‡†å¤‡çš„ã€‚ å®ƒç€é‡äºé«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ã€‚ 

  

 Reactä¸­çš„DRYåŸç†å’Œé«˜é˜¶ç»„ä»¶ 
 æ‚¨å°†æ— æ³•åœ¨ç¼–ç¨‹ç ”ç©¶ä¸­å–å¾—è¶³å¤Ÿçš„è¿›æ­¥ï¼Œä¹Ÿä¸ä¼šé‡åˆ°DRYå‡ ä¹å´‡é«˜çš„åŸåˆ™ï¼ˆä¸è¦...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reactä¸­çš„é«˜é˜¶ç»„ä»¶</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/428572/"> æœ€è¿‘ï¼Œæˆ‘ä»¬é’ˆå¯¹å­¦ä¹ JavaScriptçš„äººå‘å¸ƒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†JavaScripté«˜é˜¶å‡½æ•°çš„èµ„æ–™</a> ã€‚ æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„æ–‡ç« æ˜¯ä¸ºåˆå­¦è€…Reactå¼€å‘äººå‘˜å‡†å¤‡çš„ã€‚ å®ƒç€é‡äºé«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ã€‚ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/w5/om/sh/w5omshlclipwxw7f3yjt7itcooe.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Reactä¸­çš„DRYåŸç†å’Œé«˜é˜¶ç»„ä»¶</font> </h2><br> æ‚¨å°†æ— æ³•åœ¨ç¼–ç¨‹ç ”ç©¶ä¸­å–å¾—è¶³å¤Ÿçš„è¿›æ­¥ï¼Œä¹Ÿä¸ä¼šé‡åˆ°DRYå‡ ä¹å´‡é«˜çš„åŸåˆ™ï¼ˆä¸è¦é‡å¤è‡ªå·±ï¼Œä¸è¦é‡å¤ï¼‰ã€‚ æœ‰æ—¶ä»–çš„è¿½éšè€…èµ°å¾—å¤ªè¿œï¼Œä½†æ˜¯ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå€¼å¾—äº‰å–éµå®ˆã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è®¨è®ºæœ€æµè¡Œçš„Reactå¼€å‘æ¨¡å¼ï¼Œè¯¥æ¨¡å¼å¯ç¡®ä¿éµå®ˆDRYåŸåˆ™ã€‚ å®ƒæ˜¯å…³äºé«˜é˜¶ç»„ä»¶ã€‚ ä¸ºäº†äº†è§£é«˜é˜¶ç»„ä»¶çš„ä»·å€¼ï¼Œè®©æˆ‘ä»¬é¦–å…ˆé˜è¿°å’Œç†è§£å®ƒä»¬æ‰“ç®—è§£å†³çš„é—®é¢˜ã€‚ <br><br> å‡è®¾æ‚¨éœ€è¦é‡æ–°åˆ›å»ºç±»ä¼¼äºâ€œæ¡çº¹â€é¢æ¿çš„æ§åˆ¶é¢æ¿ã€‚ å½“ä¸€åˆ‡éƒ½å¾ˆå¥½ç›´åˆ°é¡¹ç›®å®Œæˆçš„é‚£ä¸€åˆ»ï¼Œè®¸å¤šé¡¹ç›®éƒ½æœ‰æ ¹æ®è®¡åˆ’å¼€å‘çš„å±æ€§ã€‚ å½“æ‚¨è®¤ä¸ºå·¥ä½œå³å°†å®Œæˆæ—¶ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°å½“å°†é¼ æ ‡æ‚¬åœåœ¨æŸäº›å…ƒç´ ä¸Šæ—¶ï¼Œæ§åˆ¶é¢æ¿ä¸Šä¼šå‡ºç°è®¸å¤šä¸åŒçš„å·¥å…·æç¤ºã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1e/83b/414/d1e83b414be78bf8944ea3838193aaa5.gif"><br>  <i><font color="#999999">æ§åˆ¶é¢æ¿å’Œå·¥å…·æç¤º</font></i> <br><br> ä¸ºäº†å®ç°è¿™ç§åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨å‡ ç§æ–¹æ³•ã€‚ æ‚¨å†³å®šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šç¡®å®šæŒ‡é’ˆæ˜¯å¦åœ¨å•ä¸ªç»„ä»¶ä¹‹ä¸Šï¼Œç„¶åå†³å®šæ˜¯å¦ä¸ºå…¶æ˜¾ç¤ºæç¤ºã€‚ éœ€è¦ä¸ºä¸‰ä¸ªç»„ä»¶é…å¤‡ç›¸ä¼¼çš„åŠŸèƒ½ã€‚ è¿™äº›æ˜¯<code>Info</code> ï¼Œ <code>TrendChart</code>å’Œ<code>DailyChart</code> ã€‚ <br><br> è®©æˆ‘ä»¬ä»<code>Info</code>ç»„ä»¶å¼€å§‹ã€‚ ç°åœ¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç®€å•çš„SVGå›¾æ ‡ã€‚ <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   ) } }</code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿è¯¥ç»„ä»¶èƒ½å¤Ÿç¡®å®šé¼ æ ‡æŒ‡é’ˆæ˜¯å¦ä½äºå…¶ä¸Šæ–¹ã€‚ æ‚¨å¯ä»¥ä¸ºæ­¤ä½¿ç”¨<code>onMouseOver</code>å’Œ<code>onMouseOut</code>é¼ æ ‡äº‹ä»¶ã€‚ å¦‚æœé¼ æ ‡æŒ‡é’ˆè½å…¥ç»„ä»¶åŒºåŸŸï¼Œåˆ™ä¼ é€’ç»™<code>onMouseOut</code>çš„å‡½æ•°å°†è¢«è°ƒç”¨ï¼›ä¼ é€’ç»™<code>onMouseOut</code>çš„å‡½æ•°å°†åœ¨æŒ‡é’ˆç¦»å¼€ç»„ä»¶æ—¶è¢«è°ƒç”¨ã€‚ ä¸ºäº†ä»¥Reactå¯æ¥å—çš„æ–¹å¼ç»„ç»‡æ‰€æœ‰è¿™äº›å·¥ä½œï¼Œæˆ‘ä»¬å‘ç»„ä»¶ä¸­æ·»åŠ äº†<code>hovering</code>å±æ€§ï¼Œè¯¥å±æ€§å­˜å‚¨åœ¨çŠ¶æ€ä¸­ï¼Œè¿™å…è®¸æˆ‘ä»¬é€šè¿‡åœ¨å±æ€§æ”¹å˜æ—¶æ˜¾ç¤ºæˆ–éšè—å·¥å…·æç¤ºæ¥é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;svg         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}         className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>         height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}         viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;           &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;       &lt;/svg&gt;     &lt;/&gt;   ) } }</code> </pre> <br> ç»“æœå¾ˆå¥½ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å°†ç›¸åŒçš„åŠŸèƒ½æ·»åŠ åˆ°å¦å¤–ä¸¤ä¸ªç»„ä»¶<code>DailyChart</code>å’Œ<code>DailyChart</code> ã€‚ ä¸Šé¢æœ‰å…³<code>Info</code>ç»„ä»¶çš„æœºåˆ¶è¿è¡Œè‰¯å¥½ï¼Œæ²¡æœ‰æŸåçš„éƒ¨åˆ†ä¸éœ€è¦ä¿®å¤ï¼Œå› æ­¤è®©æˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„ä»£ç åœ¨å…¶ä»–ç»„ä»¶ä¸­é‡æ–°åˆ›å»ºç›¸åŒçš„ç»„ä»¶ã€‚ å›æ”¶<code>TrendChart</code>ç»„ä»¶çš„ä»£ç ã€‚ <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TrendChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'tren</span></span>d'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br> æ‚¨å¯èƒ½å·²ç»äº†è§£ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšã€‚ æˆ‘ä»¬çš„æœ€åä¸€ä¸ªç»„ä»¶<code>DailyChart</code>å¯ä»¥å®Œæˆç›¸åŒçš„æ“ä½œã€‚ <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DailyChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'dail</span></span>y'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br> ç°åœ¨ä¸€åˆ‡å°±ç»ªã€‚ æ‚¨å¯èƒ½å·²ç»åœ¨Reactä¸Šå†™è¿‡ç±»ä¼¼çš„æ–‡ç« ã€‚ å½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯ä¸–ç•Œä¸Šæœ€ç³Ÿç³•çš„ä»£ç ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å¾ˆå¥½åœ°éµå¾ªDRYåŸç†ã€‚ å¦‚æ‚¨æ‰€è§ï¼Œé€šè¿‡åˆ†æç»„ä»¶ä»£ç ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªç»„ä»¶ä¸­é‡å¤ç›¸åŒçš„é€»è¾‘ã€‚ <br><br> æˆ‘ä»¬ç°åœ¨é¢ä¸´çš„é—®é¢˜åº”è¯¥å˜å¾—éå¸¸æ˜ç¡®ã€‚ è¿™æ˜¯é‡å¤çš„ä»£ç ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨æ–°ç»„ä»¶éœ€è¦å·²ç»å®ç°çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ‘†è„±å¤åˆ¶ç›¸åŒä»£ç çš„éœ€è¦ã€‚ æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ åœ¨è®¨è®ºè¿™ä¸€ç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å‡ ä¸ªç¼–ç¨‹æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µå°†å¤§å¤§æœ‰åŠ©äºç†è§£æ­¤å¤„æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚ æˆ‘ä»¬æ­£åœ¨è°ˆè®ºå›è°ƒå’Œé«˜é˜¶å‡½æ•°ã€‚ <br><br><h2>  <font color="#3AC1EF">é«˜é˜¶å‡½æ•°</font> </h2><br>  JavaScriptä¸­çš„å‡½æ•°æ˜¯ä¸€æµçš„å¯¹è±¡ã€‚ è¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥åƒå¯¹è±¡ï¼Œæ•°ç»„æˆ–å­—ç¬¦ä¸²ä¸€æ ·åˆ†é…ç»™å˜é‡ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æˆ–ä»å…¶ä»–å‡½æ•°è¿”å›ã€‚ <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">15</span></span></code> </pre> <br> å¦‚æœæ‚¨ä¸ä¹ æƒ¯è¿™ç§è¡Œä¸ºï¼Œé‚£ä¹ˆä¸Šé¢çš„ä»£ç å¯èƒ½å¯¹æ‚¨æ¥è¯´å¾ˆå¥‡æ€ªã€‚ è®©æˆ‘ä»¬è°ˆè°ˆè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å°†<code>add</code>å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>addFive</code>å‡½æ•°ï¼Œå°†å…¶é‡å‘½åä¸º<code>addReference</code>ç„¶åå†è°ƒç”¨å®ƒã€‚ <br><br> ä½¿ç”¨è¿™ç§æ„é€ æ—¶ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ç§°ä¸ºå›è°ƒï¼ˆå›è°ƒå‡½æ•°ï¼‰ï¼Œè€Œå°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æ¥æ”¶çš„å‡½æ•°ç§°ä¸ºé«˜é˜¶å‡½æ•°ã€‚ <br><br> åœ¨ç¼–ç¨‹ä¸­å‘½åå®ä½“å¾ˆé‡è¦ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨çš„ä»£ç ä¸æ ¹æ®åç§°æ‰€è¡¨ç¤ºçš„æ¦‚å¿µè¿›è¡Œæ›´æ”¹çš„ä»£ç ç›¸åŒã€‚ <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x,y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, callback)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } higherOrderFunction(<span class="hljs-number"><span class="hljs-number">10</span></span>, add)</code> </pre> <br> è¿™ç§æ¨¡å¼å¯¹æ‚¨æ¥è¯´åº”è¯¥å¾ˆç†Ÿæ‚‰ã€‚ äº‹å®æ˜¯ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„JavaScriptæ•°ç»„æ–¹æ³•å¯ç”¨äºjQueryæˆ–lodashï¼Œé‚£ä¹ˆæ‚¨å·²ç»ä½¿ç”¨äº†é«˜é˜¶å‡½æ•°å’Œå›è°ƒã€‚ <br><br><pre> <code class="hljs coffeescript">[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function"> =&gt;</span></span> i + <span class="hljs-number"><span class="hljs-number">5</span></span>) _.filter([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n)</span></span></span><span class="hljs-function"> =&gt;</span></span> n % <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span> ); $(<span class="hljs-string"><span class="hljs-string">'#btn'</span></span>).<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Callbacks are everywhere'</span></span>) )</code> </pre> <br> è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„ä¾‹å­ã€‚ å¦‚æœä¸æ˜¯è¦åˆ›å»º<code>addFive</code>å‡½æ•°ï¼Œè€Œæ˜¯è¦åˆ›å»º<code>addTen</code>å‡½æ•°ï¼Œ <code>addTwenty</code>ä»¥åŠå…¶ä»–ç±»ä¼¼çš„æ–¹æ³•ï¼Œè¯¥<code>addTen</code> <code>addTwenty</code> ï¼Ÿ ç»™å®š<code>addFive</code>å‡½æ•°çš„<code>addFive</code> ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸å¤åˆ¶å…¶ä»£ç å¹¶å¯¹å…¶è¿›è¡Œæ›´æ”¹ä»¥åŸºäºè¯¥ä»£ç åˆ›å»ºä¸Šè¿°å‡½æ•°ã€‚ <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTen</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">10</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTwenty</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">20</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">15</span></span> addTen(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">20</span></span> addTwenty(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">30</span></span></code> </pre> <br> åº”å½“æŒ‡å‡ºï¼Œæˆ‘ä»¬çš„ä»£ç å¹¶ä¸æ˜¯é‚£ä¹ˆå™©æ¢¦ï¼Œä½†æ˜¯å¾ˆæ˜¾ç„¶ï¼Œå…¶ä¸­çš„è®¸å¤šç‰‡æ®µéƒ½æ˜¯é‡å¤çš„ã€‚ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºå°½å¯èƒ½å¤šçš„å‡½æ•°ï¼Œä»¥åœ¨éœ€è¦çš„åœ°æ–¹æ·»åŠ ä¸€å®šæ•°é‡çš„æ•°å­—ï¼ˆå¦‚<code>addFive</code> ï¼Œ <code>addTen</code> ï¼Œ <code>addTwenty</code>ç­‰ï¼‰ï¼ŒåŒæ—¶æœ€å¤§ç¨‹åº¦åœ°å‡å°‘ä»£ç é‡å¤ã€‚ ä¹Ÿè®¸è¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª<code>makeAdder</code>å‡½æ•°ï¼Ÿ è¯¥å‡½æ•°å¯ä»¥ä½¿ç”¨ä¸€å®šæ•°é‡ï¼Œå¹¶ä¸”å¯ä»¥å¸¦æœ‰æŒ‡å‘<code>add</code>å‡½æ•°çš„é“¾æ¥ã€‚ ç”±äºæ­¤å‡½æ•°çš„ç›®çš„æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¼ é€’ç»™å®ƒçš„æ•°å­—æ·»åŠ åˆ°ç»™å®šçš„æ•°å­—ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿<code>makeAdder</code>å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«æŸä¸ªæ•°å­—ï¼ˆä¾‹å¦‚<code>makeFive</code>çš„æ•°å­—5ï¼‰çš„æ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥é‡‡ç”¨æ•°å­—æ·»åŠ åˆ°è¯¥å·ç ã€‚ <br><br> çœ‹ä¸€çœ‹ä¸Šè¿°æœºåˆ¶çš„å®ç°ç¤ºä¾‹ã€‚ <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeAdder</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y)</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, y) } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addFive = makeAdder(<span class="hljs-number"><span class="hljs-number">5</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTen = makeAdder(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTwenty = makeAdder(<span class="hljs-number"><span class="hljs-number">20</span></span>, add) addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-comment"><span class="hljs-comment">// 15 addTen(10) // 20 addTwenty(10) // 30</span></span></code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºä»»æ„æ•°é‡çš„<code>add</code>åŠŸèƒ½ï¼ŒåŒæ—¶æœ€å¤§ç¨‹åº¦åœ°å‡å°‘ä»£ç é‡å¤é‡ã€‚ <br><br> å¦‚æœæœ‰æ„æ€çš„è¯ï¼Œå°±æ˜¯è¯´æŸä¸ªåŠŸèƒ½å¯ä»¥å¤„ç†å…¶ä»–åŠŸèƒ½ï¼Œä»¥ä¾¿å¯ä»¥ä½¿ç”¨æ¯”ä»¥å‰æ›´å°‘çš„å‚æ•°çš„æ¦‚å¿µç§°ä¸ºâ€œåŠŸèƒ½çš„éƒ¨åˆ†åº”ç”¨â€ã€‚ æ­¤æ–¹æ³•ç”¨äºå‡½æ•°å¼ç¼–ç¨‹ã€‚ å…¶ç”¨æ³•çš„ä¸€ä¸ªç¤ºä¾‹æ˜¯JavaScriptä¸­ä½¿ç”¨çš„<code>.bind</code>æ–¹æ³•ã€‚ <br><br> æ‰€æœ‰è¿™äº›éƒ½å¾ˆå¥½ï¼Œä½†æ˜¯åœ¨åˆ›å»ºéœ€è¦æ­¤åŠŸèƒ½çš„æ–°ç»„ä»¶æ—¶ï¼ŒReactä¸ä¸Šé¢çš„ä»£ç é‡å¤å¤„ç†é¼ æ ‡äº‹ä»¶çš„å¤„ç†æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ äº‹å®æ˜¯ï¼Œå°±åƒé«˜é˜¶å‡½æ•°<code>makeAdder</code>å¯ä»¥å¸®åŠ©æˆ‘ä»¬æœ€å¤§ç¨‹åº¦åœ°å‡å°‘ä»£ç é‡å¤ä¸€æ ·ï¼Œæ‰€è°“çš„â€œé«˜é˜¶ç»„ä»¶â€ä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†Reactåº”ç”¨ç¨‹åºä¸­çš„ç›¸åŒé—®é¢˜ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œçš„ä¸€åˆ‡çœ‹èµ·æ¥éƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ å³ï¼Œä»£æ›¿å·¥ä½œæ–¹æ¡ˆï¼ˆåœ¨æ­¤æ–¹æ¡ˆä¸­ï¼Œé«˜é˜¶å‡½æ•°è¿”å›è°ƒç”¨å›è°ƒçš„æ–°å‡½æ•°ï¼‰ï¼Œé«˜é˜¶ç»„ä»¶å¯ä»¥å®ç°è‡ªå·±çš„æ–¹æ¡ˆã€‚ å³ï¼Œä»–èƒ½å¤Ÿè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å°†å‘ˆç°ä¸€ä¸ªå……å½“â€œå›è°ƒâ€è§’è‰²çš„ç»„ä»¶ã€‚ ä¹Ÿè®¸æˆ‘ä»¬å·²ç»è¯´äº†å¾ˆå¤šè¯ï¼Œæ‰€ä»¥ç°åœ¨è¯¥ç»§ç»­è¿›è¡Œç¤ºä¾‹äº†ã€‚ <br><br><h2>  <font color="#3AC1EF">æˆ‘ä»¬æœ€é«˜é˜¶çš„åŠŸèƒ½</font> </h2><br> æ­¤åŠŸèƒ½å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š <br><br><ul><li> å¥¹æ˜¯ä¸€ä¸ªåŠŸèƒ½ã€‚ </li><li> å¥¹æ¥å—å›è°ƒä½œä¸ºå‚æ•°ã€‚ </li><li> å®ƒè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚ </li><li> å®ƒè¿”å›çš„å‡½æ•°å¯ä»¥è°ƒç”¨ä¼ é€’ç»™æˆ‘ä»¬çš„é«˜é˜¶å‡½æ•°çš„åŸå§‹å›è°ƒã€‚ </li></ul><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(callback)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback() } }</code> </pre> <br><h2>  <font color="#3AC1EF">æˆ‘ä»¬æœ€é«˜é˜¶çš„ç»„ä»¶</font> </h2><br> è¯¥ç»„ä»¶çš„ç‰¹å¾å¦‚ä¸‹ï¼š <br><br><ul><li> å®ƒæ˜¯ä¸€ä¸ªç»„ä»¶ã€‚ </li><li> ä½œä¸ºå‚æ•°ï¼Œå®ƒåŒ…å«å¦ä¸€ä¸ªç»„ä»¶ã€‚ </li><li> å®ƒè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚ </li><li> å®ƒè¿”å›çš„ç»„ä»¶å¯ä»¥ä½¿åŸå§‹ç»„ä»¶ä¼ é€’ç»™é«˜é˜¶ç»„ä»¶ã€‚ </li></ul><br><pre> <code class="hljs scala">function higherOrderComponent (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> /&gt;   } } }</code> </pre> <br><h2>  <font color="#3AC1EF">HOCå®æ–½</font> </h2><br> ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å¤§è‡´ç¡®å®šäº†é«˜é˜¶ç»„ä»¶æ‰§è¡Œçš„æ“ä½œï¼Œæˆ‘ä»¬å°†å¼€å§‹å¯¹Reactä»£ç è¿›è¡Œæ›´æ”¹ã€‚ å¦‚æœæ‚¨è¿˜è®°å¾—çš„è¯ï¼Œæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜çš„å®è´¨æ˜¯å¿…é¡»å°†å®ç°å¤„ç†é¼ æ ‡äº‹ä»¶çš„é€»è¾‘çš„ä»£ç å¤åˆ¶åˆ°éœ€è¦æ­¤åŠŸèƒ½çš„æ‰€æœ‰ç»„ä»¶ä¸­ã€‚ <br><br><pre> <code class="hljs coffeescript">state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })</code> </pre> <br> é‰´äºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦é«˜é˜¶ç»„ä»¶ï¼ˆç”¨<code>withHover</code>æ¥ç§°å‘¼å®ƒï¼‰æ¥å°è£…é¼ æ ‡äº‹ä»¶å¤„ç†ä»£ç ï¼Œç„¶åå°†<code>withHover</code>å±æ€§ä¼ é€’ç»™å®ƒå‘ˆç°çš„ç»„ä»¶ã€‚ è¿™å°†å…è®¸æˆ‘ä»¬é€šè¿‡å°†å…¶æ”¾ç½®åœ¨<code>withHover</code>ç»„ä»¶ä¸­æ¥é˜²æ­¢ç›¸åº”ä»£ç çš„é‡å¤ã€‚ <br><br> æœ€ç»ˆï¼Œè¿™æ˜¯æˆ‘ä»¬è¦å®ç°çš„ç›®æ ‡ã€‚ æ¯å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªéœ€è¦äº†è§£å…¶<code>hovering</code>å±æ€§çš„ç»„ä»¶æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨<code>withHover</code>å°†è¯¥ç»„ä»¶ä¼ é€’ç»™æ›´é«˜é˜¶çš„ç»„ä»¶ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ç»„ä»¶ã€‚ <br><br><pre> <code class="hljs lisp">const InfoWithHover = withHover(<span class="hljs-name"><span class="hljs-name">Info</span></span>) const TrendChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">TrendChart</span></span>) const DailyChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">DailyChart</span></span>)</code> </pre> <br> ç„¶åï¼Œå½“<code>withHover</code>å†…å®¹å‘ˆç°æ—¶ï¼Œå®ƒå°†æˆä¸ºä¼ é€’<code>hovering</code>å±æ€§çš„æºç»„ä»¶ã€‚ <br><br><pre> <code class="hljs xml">function Info ({ hovering, height }) { return (   <span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>     {hovering === true       ? <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Tooltip</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.props.id}</span></span></span><span class="hljs-tag"> /&gt;</span></span>       : null}     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{height}</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 16 16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag">&gt;</span></span>         <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span></span><span class="hljs-tag"> /&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/&gt;</span></span> ) }</code> </pre> <br> äº‹å®ä¸Šï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦å®ç°<code>withHover</code>ç»„ä»¶ã€‚ ä»ä»¥ä¸Šæ‰€è¿°å¯ä»¥ç†è§£ï¼Œä»–å¿…é¡»æ‰§è¡Œä¸‰ä¸ªåŠ¨ä½œï¼š <br><br><ul><li> ç»™Componentä¸€ä¸ªå‚æ•°ã€‚ </li><li> è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ã€‚ </li><li> é€šè¿‡å°†<code>hovering</code>å±æ€§ä¼ é€’ç»™Componentå‚æ•°æ¥å‘ˆç°å®ƒã€‚ </li></ul><br><h3>  <font color="#3AC1EF">â–æ¥å—Componentå‚æ•°</font> </h3><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Component)</span></span></span></span> { }</code> </pre> <br><h3>  <font color="#3AC1EF">â–è¿”å›æ–°ç»„ä»¶</font> </h3><br><pre> <code class="hljs scala">function withHover (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ } }</code> </pre> <br><h3>  <font color="#3AC1EF">withä½¿ç”¨ä¼ é€’çš„æ‚¬åœå±æ€§æ¸²æŸ“Componentç»„ä»¶</font> </h3><br> ç°åœ¨ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼šå¦‚ä½•è¿›å…¥<code>hovering</code>å±æ€§ï¼Ÿ å®é™…ä¸Šï¼Œæˆ‘ä»¬å·²ç»ç¼–å†™äº†ä½¿ç”¨æ­¤å±æ€§çš„ä»£ç ã€‚ æˆ‘ä»¬åªéœ€è¦å°†å…¶æ·»åŠ åˆ°æ–°ç»„ä»¶ä¸­ï¼Œç„¶ååœ¨å°†ç»„ä»¶ä»¥<code>Component</code>å‚æ•°çš„å½¢å¼ä¼ é€’ç»™é«˜é˜¶ç»„ä»¶æ—¶ï¼Œå°†<code>hovering</code>å±æ€§ä¼ é€’ç»™å®ƒã€‚ <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hovering</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.hovering}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br> æˆ‘æ›´å–œæ¬¢ä»¥ä»¥ä¸‹æ–¹å¼è°ˆè®ºè¿™äº›äº‹æƒ…ï¼ˆæ­£å¦‚Reactæ–‡æ¡£æ‰€è¯´ï¼‰ï¼šç»„ä»¶å°†å±æ€§è½¬æ¢ä¸ºç”¨æˆ·ç•Œé¢ï¼Œè€Œé«˜é˜¶ç»„ä»¶å°†ç»„ä»¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªç»„ä»¶ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠ<code>Info</code> ï¼Œ <code>TrendChart</code>å’Œ<code>DailyChart</code>ç»„ä»¶è½¬æ¢ä¸ºæ–°çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ç”±äºå…·æœ‰<code>DailyChart</code>å±æ€§è€ŒçŸ¥é“é¼ æ ‡æŒ‡é’ˆæ˜¯å¦åœ¨å…¶ä¸Šæ–¹ã€‚ <br><br><h2>  <font color="#3AC1EF">é™„åŠ è¯´æ˜</font> </h2><br> è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å›é¡¾äº†æœ‰å…³é«˜é˜¶ç»„ä»¶çš„æ‰€æœ‰åŸºæœ¬ä¿¡æ¯ã€‚ ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€äº›æ›´é‡è¦çš„äº‹æƒ…è¦è®¨è®ºã€‚ <br><br> å¦‚æœæ‚¨æŸ¥çœ‹æˆ‘ä»¬çš„HOC <code>withHover</code> ï¼Œæ‚¨ä¼šå‘ç°å®ƒè‡³å°‘æœ‰ä¸€ä¸ªå¼±ç‚¹ã€‚ è¿™æ„å‘³ç€<code>hovering</code>å±æ€§çš„æ¥æ”¶å™¨ç»„ä»¶å°†ä¸ä¼šé‡åˆ°æ­¤å±æ€§çš„ä»»ä½•é—®é¢˜ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ç§å‡è®¾å¯èƒ½æ˜¯åˆç†çš„ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯ä¸å¯æ¥å—çš„ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœç»„ä»¶å·²ç»å…·æœ‰<code>hovering</code>å±æ€§è¯¥æ€ä¹ˆåŠï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†å‘ç”Ÿåç§°å†²çªã€‚ å› æ­¤ï¼Œå¯ä»¥å¯¹<code>withHover</code>ç»„ä»¶è¿›è¡Œ<code>withHover</code> ï¼Œä»¥å…è®¸è¯¥ç»„ä»¶çš„ç”¨æˆ·æŒ‡å®šä¼ é€’ç»™ç»„ä»¶çš„<code>hovering</code>å±æ€§åº”ä½¿ç”¨çš„åç§°ã€‚ ç”±äº<code>withHover</code>åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè®©æˆ‘ä»¬å¯¹å…¶è¿›è¡Œé‡å†™ï¼Œä»¥ä¾¿å®ƒ<code>withHover</code>ç¬¬äºŒä¸ªå‚æ•°æ¥è®¾ç½®è¦ä¼ é€’ç»™ç»„ä»¶çš„å±æ€§åç§°ã€‚ <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component, propName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'hovering'</span></span></span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br> ç°åœ¨ï¼Œç”±äºä½¿ç”¨äº†ES6é»˜è®¤å‚æ•°æœºåˆ¶ï¼Œæˆ‘ä»¬å°†ç¬¬äºŒä¸ªå‚æ•°çš„æ ‡å‡†å€¼è®¾ç½®ä¸º<code>withHover</code> ï¼Œä½†æ˜¯å¦‚æœ<code>withHover</code>ç»„ä»¶çš„ç”¨æˆ·æƒ³è¦æ›´æ”¹æ­¤è®¾ç½®ï¼Œä»–å¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­ä¼ é€’ä»–éœ€è¦çš„åç§°ã€‚ <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     const props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> {...props} /&gt;       &lt;/div&gt;     );   } } } function <span class="hljs-type"><span class="hljs-type">Info</span></span> ({ showTooltip, height }) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;&gt;     {showTooltip === <span class="hljs-literal"><span class="hljs-literal">true</span></span>       ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;       : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   &lt;/&gt; ) } const <span class="hljs-type"><span class="hljs-type">InfoWithHover</span></span> = withHover(<span class="hljs-type"><span class="hljs-type">Info</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">'showToolti</span></span>p')</code> </pre> <br><h2>  <font color="#3AC1EF">æ‚¬åœå®æ–½é—®é¢˜</font> </h2><br> æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°<code>withHover</code>çš„å®ç°å­˜åœ¨å¦ä¸€ä¸ªé—®é¢˜ã€‚ å¦‚æœæˆ‘ä»¬åˆ†ææˆ‘ä»¬çš„<code>Info</code>ç»„ä»¶ï¼Œæ‚¨å°†ä¼šæ³¨æ„åˆ°å®ƒæ¥å—äº†<code>height</code>å±æ€§ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å®‰æ’ä¸€åˆ‡çš„æ–¹å¼æ„å‘³ç€<code>height</code>å°†è¢«è®¾ç½®ä¸º<code>undefined</code> ã€‚ å…¶åŸå› æ˜¯å› ä¸º<code>withHover</code>ç»„ä»¶æ˜¯è´Ÿè´£å‘ˆç°ä½œä¸º<code>Component</code>å‚æ•°ä¼ é€’ç»™å®ƒçš„å†…å®¹çš„<code>Component</code> ã€‚ ç°åœ¨ï¼Œé™¤äº†å°†æˆ‘ä»¬åˆ›å»ºçš„<code>hovering</code>ä¼ é€’ç»™<code>Component</code>ç»„ä»¶ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸å†ä¼ é€’ä»»ä½•å…¶ä»–å±æ€§ã€‚ <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> InfoWithHover = withHover(Info) ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;InfoWithHover height=<span class="hljs-string"><span class="hljs-string">"16px"</span></span> /&gt;</code> </pre> <br>  <code>height</code>å±æ€§å°†ä¼ é€’åˆ°<code>InfoWithHover</code>ç»„ä»¶ã€‚ è¿™ä¸ªæˆåˆ†æ˜¯ä»€ä¹ˆï¼Ÿ è¿™æ˜¯æˆ‘ä»¬ä»<code>withHover</code>è¿”å›çš„ç»„ä»¶ã€‚ <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     console.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props) <span class="hljs-comment"><span class="hljs-comment">// { height: "16px" }     const props = {       [propName]: this.state.hovering     }     return (       &lt;div onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     );   } } }</span></span></code> </pre> <br> åœ¨<code>WithHover</code>ç»„ä»¶å†…éƒ¨<code>WithHover</code> <code>this.props.height</code>æ˜¯<code>16px</code> ï¼Œä½†æ˜¯å°†æ¥æˆ‘ä»¬å°†å¯¹è¯¥å±æ€§ä¸åšä»»ä½•äº‹æƒ…ã€‚ æˆ‘ä»¬éœ€è¦å°†è¯¥å±æ€§ä¼ é€’ç»™æ­£åœ¨æ¸²æŸ“çš„<code>Component</code>å‚æ•°ã€‚ <br><br><pre> <code class="hljs kotlin">render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering,       ...<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props,     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     ); }</code> </pre> <br><h2>  <font color="#3AC1EF">å…³äºä½¿ç”¨æœ€é«˜çº§åˆ«çš„ç¬¬ä¸‰æ–¹ç»„ä»¶çš„é—®é¢˜</font> </h2><br> æˆ‘ä»¬ç›¸ä¿¡ï¼Œæ‚¨å·²ç»æ„è¯†åˆ°åœ¨å¤åˆ¶å„ç§ç»„ä»¶ä¸­çš„é€»è¾‘æ—¶ä½¿ç”¨é«˜çº§ç»„ä»¶çš„ä¼˜åŠ¿ï¼Œè€Œæ— éœ€å¤åˆ¶ç›¸åŒçš„ä»£ç ã€‚ ç°åœ¨è®©æˆ‘ä»¬è‡ªé—®ï¼Œé«˜é˜¶ç»„ä»¶æ˜¯å¦å­˜åœ¨ä»»ä½•ç¼ºé™·ã€‚ è¿™ä¸ªé—®é¢˜å¯ä»¥å¾—åˆ°è‚¯å®šçš„å›ç­”ï¼Œæˆ‘ä»¬å·²ç»å…‹æœäº†è¿™äº›ç¼ºç‚¹ã€‚ <br><br> ä½¿ç”¨HOCæ—¶ï¼Œä¼šå‘ç”Ÿ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ§åˆ¶åè½¬</a> ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ä¸æ˜¯æˆ‘ä»¬å¼€å‘çš„é«˜é˜¶ç»„ä»¶ï¼Œä¾‹å¦‚HOC <code>withRouter</code> React Routerã€‚ æ ¹æ®æ–‡æ¡£ï¼Œ <code>withRouter</code>ä¼šå°†<code>match</code> ï¼Œ <code>location</code>å’Œ<code>history</code>å±æ€§ä¼ é€’ç»™å®ƒåœ¨æ¸²æŸ“æ—¶åŒ…è£…çš„ç»„ä»¶ã€‚ <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   const { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>, location, history } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props <span class="hljs-comment"><span class="hljs-comment">// From React Router   ... } } export default withRouter(Game)</span></span></code> </pre> <br> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ²¡æœ‰åˆ›å»º<code>Game</code>å…ƒç´ ï¼ˆå³- <code>&lt;Game /&gt;</code> ï¼‰ã€‚ æˆ‘ä»¬å®Œå…¨è½¬ç§»äº†æˆ‘ä»¬çš„React Routerç»„ä»¶ï¼Œå¹¶ä¸ä»…ä¿¡ä»»è¯¥ç»„ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œè€Œä¸”è¿˜å°†æ­£ç¡®çš„å±æ€§ä¼ é€’ç»™æˆ‘ä»¬çš„ç»„ä»¶ã€‚ åœ¨è®¨è®ºä¼ é€’<code>hovering</code>å±æ€§æ—¶å¯èƒ½å‘ç”Ÿçš„åç§°å†²çªä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»é‡åˆ°äº†æ­¤é—®é¢˜ã€‚ ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å†³å®šå…è®¸HOC <code>withHover</code>ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥é…ç½®ç›¸åº”å±æ€§çš„åç§°ã€‚ åœ¨<code>withRouter</code>ä½¿ç”¨å…¶ä»–äººçš„HOCï¼Œæˆ‘ä»¬æ²¡æœ‰è¿™æ ·çš„æœºä¼šã€‚ å¦‚æœ<code>match</code> ï¼Œ <code>location</code>æˆ–<code>history</code>å±æ€§å·²åœ¨<code>Game</code>ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œåˆ™å¯ä»¥è¯´æˆ‘ä»¬ä¸èµ°è¿ã€‚ å³ï¼Œæˆ‘ä»¬è¦ä¹ˆåœ¨ç»„ä»¶ä¸­æ›´æ”¹è¿™äº›åç§°ï¼Œè¦ä¹ˆæ‹’ç»å°†HOCä¸<code>withRouter</code>ä¸€èµ·ä½¿ç”¨ã€‚ <br><br><h2>  <font color="#3AC1EF">æ€»ç»“</font> </h2><br> è°ˆåˆ°Reactä¸­çš„HOCï¼Œæœ‰ä¸¤ç‚¹éœ€è¦ç‰¢è®°ã€‚ é¦–å…ˆï¼ŒHOCåªæ˜¯ä¸€ç§æ¨¡å¼ã€‚ å°½ç®¡é«˜é˜¶ç»„ä»¶ä¸åº”ç”¨ç¨‹åºçš„ä½“ç³»ç»“æ„æœ‰å…³ï¼Œä½†å®ƒä»¬ç”šè‡³éƒ½ä¸èƒ½ç§°ä¸ºReactç‰¹æœ‰çš„ç»„ä»¶ã€‚ å…¶æ¬¡ï¼Œè¦å¼€å‘Reactåº”ç”¨ç¨‹åºï¼Œæ‚¨ä¸éœ€è¦äº†è§£é«˜é˜¶ç»„ä»¶ã€‚ æ‚¨å¯èƒ½ä¸ç†Ÿæ‚‰å®ƒä»¬ï¼Œä½†æ˜¯ç¼–å†™äº†å‡ºè‰²çš„ç¨‹åºã€‚ ä½†æ˜¯ï¼Œå°±åƒåœ¨ä»»ä½•ä¼ä¸šä¸­ä¸€æ ·ï¼Œæ‚¨æ‹¥æœ‰çš„å·¥å…·è¶Šå¤šï¼Œæ‚¨çš„å·¥ä½œæˆæœå°±è¶Šå¥½ã€‚ è€Œä¸”ï¼Œå¦‚æœæ‚¨ä½¿ç”¨Reactç¼–å†™åº”ç”¨ç¨‹åºï¼Œåˆ™ä¼šç»™è‡ªå·±é€ æˆæŸå®³ï¼Œè€Œä¸ä¼šåœ¨æ‚¨çš„æ­¦å™¨åº“ä¸­æ·»åŠ HOCã€‚ <br><br>  <b>äº²çˆ±çš„è¯»è€…ä»¬ï¼</b> æ‚¨åœ¨Reactä¸­ä½¿ç”¨é«˜é˜¶ç»„ä»¶å—ï¼Ÿ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428572/">https://habr.com/ru/post/zh-CN428572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428562/index.html">Droidconä¼¦æ•¦ã€‚ æ€ä¹ˆæ ·äº†</a></li>
<li><a href="../zh-CN428564/index.html">MapKitæœç´¢ï¼šæç¤ºå’ŒæŠ€å·§</a></li>
<li><a href="../zh-CN428566/index.html">JavaScriptç®­å¤´åŠŸèƒ½ï¼šä¸ºä»€ä¹ˆéœ€è¦å®ƒä»¬ï¼Œå¦‚ä½•å¤„ç†å®ƒä»¬ï¼Œä½•æ—¶ä½¿ç”¨å®ƒä»¬ä»¥åŠä½•æ—¶ä¸ä½¿ç”¨å®ƒä»¬</a></li>
<li><a href="../zh-CN428568/index.html">React Native Webåº”ç”¨ç¨‹åºå¼€å‘æŒ‡å—</a></li>
<li><a href="../zh-CN428570/index.html">JavaScriptä¸­çš„é«˜é˜¶å‡½æ•°</a></li>
<li><a href="../zh-CN428574/index.html">é€šè¿‡Zextras Chatå°†å…¬å¸æ²Ÿé€šæå‡åˆ°ä¸€ä¸ªæ–°çš„æ°´å¹³</a></li>
<li><a href="../zh-CN428576/index.html">[ä¹¦ç­¾] Node.jsæ•™ç¨‹çš„PDFç‰ˆæœ¬å’Œæ–°çš„JavaScriptæŒ‡å—</a></li>
<li><a href="../zh-CN428578/index.html">å¦‚ä½•å¼€å§‹ä½¿ç”¨Hibernate Search</a></li>
<li><a href="../zh-CN428580/index.html">è‰¯å¥½çš„æ²Ÿé€šæŒ‡å—</a></li>
<li><a href="../zh-CN428582/index.html">è¢«é—å¿˜çš„OOPå†å²</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>