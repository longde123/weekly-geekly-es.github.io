<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ฝ ๐ท โฟ๏ธ Terraform ูููุฑ Selectel ๐ ๐ฉ ๐จ๐ฟโ๐ง</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃุทูููุง ูุฒูุฏ Terraform ุงูุฑุณูู ููุนูู ูุน Selectel. ูุณูุญ ูุฐุง ุงูููุชุฌ ูููุณุชุฎุฏููู ุจุชูููุฐ ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุจุดูู ูุงูู ูู ุฎูุงู ูููุฌูุฉ Infrastructure-as-code. 

 ุญุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Terraform ูููุฑ Selectel</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/445162/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yf/si/pf/yfsipfz7j0lfweuvzxwwqzqr94a.png"><br><br>  ุฃุทูููุง ูุฒูุฏ Terraform ุงูุฑุณูู ููุนูู ูุน Selectel.  ูุณูุญ ูุฐุง ุงูููุชุฌ ูููุณุชุฎุฏููู ุจุชูููุฐ ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุจุดูู ูุงูู ูู ุฎูุงู ูููุฌูุฉ Infrastructure-as-code. <br><a name="habracut"></a><br>  ุญุงูููุง ุ ูุฏุนู ุงููุฒูุฏ ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ูู ุฎุฏูุฉ Virtual Private Cloud</a> (ุงููุดุงุฑ ุฅูููุง ูููุง ููู ุจุงุณู VPC).  ูู ุงููุณุชูุจู ุ ูุฎุทุท ูุฅุถุงูุฉ ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ููุฎุฏูุงุช ุงูุฃุฎุฑู ุงูุชู ุชูุฏููุง Selectel ุฅูููุง. <br><br>  ููุง ุชุนูููู ุจุงููุนู ุ ุชุนุชูุฏ ุฎุฏูุฉ VPC ุนูู OpenStack.  ููุน ุฐูู ุ ูุธุฑูุง ูุญูููุฉ ุฃู OpenStack ูุง ูููุฑ ุฃุฏูุงุช ุฃุตููุฉ ูุฎุฏูุฉ ุงูุณุญุงุจุฉ ุงูุนุงูุฉ ุ ููุฏ ุทุจููุง ุงููุธููุฉ ุงูููููุฏุฉ ูู ูุฌููุนุฉ ูู ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูุฅุถุงููุฉ ุงูุชู ุชุนูู ุนูู ุชุจุณูุท ุฅุฏุงุฑุฉ ุงููุงุฆูุงุช ุงููุฑูุจุฉ ุงููุนูุฏุฉ ูุฌุนู ุงูุนูู ุฃูุซุฑ ููุงุกูุฉ.  ุฌุฒุก ูู ุงููุธุงุฆู ุงููุชุงุญุฉ ูู OpenStack ูุบูู ูู ุงูุงุณุชุฎุฏุงู ุงููุจุงุดุฑ ุ ูููู ูููู ุงููุตูู ุฅููู ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">API ุงูุฎุงุตุฉ ุจูุง</a> . <br><br>  ูููุฑ ูููุฑ Selectel Terraform ุงูุขู ุงููุฏุฑุฉ ุนูู ุฅุฏุงุฑุฉ ููุงุฑุฏ VPC ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุดุงุฑูุน ูุญุตุตูุง ุ </li><li style=";text-align:right;direction:rtl">  ุงููุณุชุฎุฏููู ุ ุฃุฏูุงุฑูู ูุฑููุฒูู ุ </li><li style=";text-align:right;direction:rtl">  ุงูุดุจูุงุช ุงููุฑุนูุฉ ุงูุนุงูุฉ ุ ุจูุง ูู ุฐูู ุงูููุงุทู ุงูุฅูููููุฉ ู VRRP ุ </li><li style=";text-align:right;direction:rtl">  ุชุฑุงุฎูุต ุงูุจุฑูุฌูุงุช. </li></ul><br>  ูุณุชุฎุฏู ุงููุฒูุฏ ููุชุจุฉ Go ุงูุนุงูุฉ ุงูุฎุงุตุฉ ุจูุง ููุนูู ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช VPC.  ูู ูู ุงูููุชุจุฉ ูุงููุฒูุฏ ููุณู ููุชูุญ ุงููุตุฏุฑ ุ ููุฌุฑู ุชุทููุฑููุง ุนูู ุฌูุซุจ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุณุชูุฏุน ููุชุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">Go-selvpcclient</a> ุ </li><li style=";text-align:right;direction:rtl">  ูุณุชูุฏุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">Terraform ููุฒูุฏ Selectel</a> . </li></ul><br>  ูุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุณุญุงุจูุฉ ุงูุฃุฎุฑู ุ ูุซู ุงูุฃุฌูุฒุฉ ุงูุธุงูุฑูุฉ ุ ูุงูุฃูุฑุงุต ุ ููุฌููุนุงุช Kubernetes ุ ููููู ุงุณุชุฎุฏุงู ูููุฑ OpenStack Terraform.  ุงููุซุงุฆู ุงูุฑุณููุฉ ูููุง ููุฏูู ุงูุฎุฏูุฉ ูุชุงุญุฉ ุนูู ุงูุฑูุงุจุท ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Selectel Resource Document: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">Terraform-provider Selectel</a> ุ </li><li style=";text-align:right;direction:rtl">  OpenStack Resource Document: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow noopener noreferrer">Terraform-provider OpenStack</a> . </li></ul><br><h2 style=";text-align:right;direction:rtl">  ุงูุงุจุชุฏุงุก </h2><br>  ููุจุฏุก ุ ุชุญุชุงุฌ ุฅูู ุชุซุจูุช Terraform (ูููู ุงูุนุซูุฑ ุนูู ุชุนูููุงุช ูุฑูุงุจุท ุญุฒู ุงูุชุซุจูุช ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow noopener noreferrer">ุงููููุน ุงูุฑุณูู</a> ). <br><br>  ููุนูู ุ ูุชุทูุจ ุงููููุฑ ููุชุงุญ Selectel API ุ ูุงูุฐู ูุชู ุฅูุดุงุคู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ููุญุฉ ุงูุชุญูู ููุญุณุงุจ</a> . <br><br>  ูุชู ุฅูุดุงุก ุจูุงูุงุช ููุนูู ูุน Selectel ุจุงุณุชุฎุฏุงู Terraform ุฃู ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ูู ุงูุฃูุซูุฉ ุงูุฌุงูุฒุฉ ุงููุชููุฑุฉ ูู ูุณุชูุฏุน Github ุงูุฎุงุต ุจูุง: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุฃูุซูุฉ terraform</a> . <br><br>  ูุชู ุชูุณูู ูุณุชูุฏุน ุงูุชุฎุฒูู ุจุฃูุซูุฉ ุฅูู ุฏููููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุงููุญุฏุงุช ุงูููุทูุฉ</strong> ุ ุงูุชู ุชุญุชูู ุนูู <strong>ูุญุฏุงุช</strong> ุตุบูุฑุฉ ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ุชุฃุฎุฐ ูุฌููุนุฉ ูู ุงููุนููุงุช ููุฏุฎูุงุช ูุฅุฏุงุฑุฉ ูุฌููุนุฉ ุตุบูุฑุฉ ูู ุงูููุงุฑุฏ ุ </li><li style=";text-align:right;direction:rtl">  <strong>ุฃูุซูุฉ</strong> ุ ุชุญุชูู ุนูู ุฃูุซูุฉ ููุฌููุนุฉ ูุงููุฉ ูู ุงููุญุฏุงุช ุงููุชุฑุงุจุทุฉ. </li></ul><br>  ุจุนุฏ ุชุซุจูุช Terraform ุ ูุฅูุดุงุก ููุชุงุญ Selectel API ูุชุนุฑูู ููุณู ุจุงูุฃูุซูุฉ ุ ููุชูู ุฅูู ุฃูุซูุฉ ุนูููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุซุงู ุนูู ุฅูุดุงุก ุฎุงุฏู ูุน ูุฑุต ูุญูู </h2><br>  ุงููุธุฑ ูู ูุซุงู ุฅูุดุงุก ูุดุฑูุน ุ ูุณุชุฎุฏู ูุฏูู ุฏูุฑ ูุฌูุงุฒ ุธุงูุฑู ูุน ูุฑุต ูุญูู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">terraform-ุฃูุซูุฉ / ุฃูุซูุฉ / vpc / server_local_root_disk</a> . <br><br>  ูุตู ููู <strong>vars.tf</strong> ุฌููุน ุงููุนููุงุช ุงูุชู ุณูุชู ุงุณุชุฎุฏุงููุง ุนูุฏ ุงุณุชุฏุนุงุก ุงููุญุฏุงุช ุงูููุทูุฉ.  ูุญุชูู ุจุนุถูุง ุนูู ููู ุงูุชุฑุงุถูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุณูุชู ุฅูุดุงุก ุงูุฎุงุฏู ูู ููุทูุฉ <strong>ru-3a</strong> ุจุงูุชููุฆุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">variable <span class="hljs-string"><span class="hljs-string">"server_vcpus"</span></span> { default = 4 } variable <span class="hljs-string"><span class="hljs-string">"server_ram_mb"</span></span> { default = 8192 } variable <span class="hljs-string"><span class="hljs-string">"server_root_disk_gb"</span></span> { default = 8 } variable <span class="hljs-string"><span class="hljs-string">"server_image_name"</span></span> { default = <span class="hljs-string"><span class="hljs-string">"Ubuntu 18.04 LTS 64-bit"</span></span> }</code> </pre> <br>  ูู ุงูููู <b>main.tf</b> ุ ูุชู ุชููุฆุฉ ูููุฑ Selectel: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">provider <span class="hljs-string"><span class="hljs-string">"selectel"</span></span> { token = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.sel_token}</span></span></span><span class="hljs-string">"</span></span> }</code> </pre><br>  ูุญุชูู ูุฐุง ุงูููู ุฃูุถูุง ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูููุชุงุญ SSH ุงูุฐู ุณูุชู ุชุซุจูุชู ุนูู ุงูุฎุงุฏู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">module <span class="hljs-string"><span class="hljs-string">"server_local_root_disk"</span></span> { ... server_ssh_key = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${file("~/.ssh/id_rsa.pub")}</span></span></span><span class="hljs-string">"</span></span> }</code> </pre><br>  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ููููู ุชุญุฏูุฏ ููุชุงุญ ุนุงู ูุฎุชูู.  ูุง ููุฒู ุชุญุฏูุฏ ุงูููุชุงุญ ููุณุงุฑ ููููู ุ ููููู ุฃูุถูุง ุฅุถุงูุฉ ูููุฉ ูุณูุณูุฉ. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ูู ูุฐุง ุงูููู ุ ูุชู ุฅุทูุงู ุงููุญุฏุงุช ุงูููุทูุฉ <strong>project_with_user</strong> ู <strong>server_local_root_disk</strong> ุ ุงูุชู ุชุฏูุฑ ุงูููุงุฑุฏ ุงููุงุฒูุฉ. <br><br>  ุณูููู ุจุชุญููู ูุฐู ุงููุญุฏุงุช ุจูุฒูุฏ ูู ุงูุชูุตูู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุดุฑูุน ููุณุชุฎุฏู ูู ุฏูุฑ </h3><br>  ุงููุญุฏุฉ ุงูุฃููู ุชูุดุฆ ูุดุฑูุนูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ููุณุชุฎุฏููุง</a> ูู ุฏูุฑ ูู ูุฐุง ุงููุดุฑูุน: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">terraform -amples / modules / vpc / project_with_user</a> . <br><br>  ุณูููู ุงููุณุชุฎุฏู ุงูุฐู ุชู ุฅูุดุงุคู ูุงุฏุฑูุง ุนูู ุชุณุฌูู ุงูุฏุฎูู ุฅูู OpenStack ูุฅุฏุงุฑุฉ ููุงุฑุฏู.  ุงููุญุฏุฉ ุจุณูุทุฉ ูุชุฏูุฑ ุซูุงุซุฉ ููุงูุงุช ููุท: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  selectel_vpc_project_v2ุ </li><li style=";text-align:right;direction:rtl">  selectel_vpc_user_v2ุ </li><li style=";text-align:right;direction:rtl">  selectel_vpc_role_v2. </li></ul><br><h3 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุฎุงุฏู ุงูุชุฑุงุถู ูุน ูุฑุต ูุญูู </h3><br>  ุงููุญุฏุฉ ุงูุซุงููุฉ ุชุฏูุฑ ูุงุฆูุงุช OpenStack ุงููุงุฒูุฉ ูุฅูุดุงุก ุฎุงุฏู ูุน ูุฑุต ูุญูู. <br><br>  ูุฌุจ ุงูุงูุชุจุงู ุฅูู ุจุนุถ ุงููุณุงุฆุท ุงููุญุฏุฏุฉ ูู ูุฐู ุงููุญุฏุฉ ุงูููุทูุฉ <strong>ููุตุฏุฑ openstack_compute_instance_v2</strong> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">resource <span class="hljs-string"><span class="hljs-string">"openstack_compute_instance_v2"</span></span> <span class="hljs-string"><span class="hljs-string">"instance_1"</span></span> { ... lifecycle { ignore_changes = [<span class="hljs-string"><span class="hljs-string">"image_id"</span></span>] } vendor_options { ignore_resize_confirmation = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre><br>  ุชุชูุญ <strong>ูู</strong> ูุณูุทุฉ <strong>ignore_changes</strong> ุชุฌุงูู ุชุบููุฑ ุณูุฉ <strong>ุงููุนุฑู</strong> ููุตูุฑุฉ ุงููุณุชุฎุฏูุฉ ูุฅูุดุงุก ุงูุฌูุงุฒ ุงูุธุงูุฑู.  ูู ุฎุฏูุฉ VPC ุ ูุชู ุชุญุฏูุซ ูุนุธู ุงูุตูุฑ ุงูุนุงูุฉ ุชููุงุฆููุง ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฃุณุจูุน ุ ููุชุบูุฑ <strong>ูุนุฑููุง</strong> ุฃูุถูุง.  ููุฑุฌุน ุฐูู ุฅูู ููุฒุงุช ูููู OpenStack - Glance ุ ุญูุซ ุชุนุชุจุฑ ุงูุตูุฑ ููุงูุงุช ุบูุฑ ูุงุจูุฉ ููุชุบููุฑ. <br><br>  ุฅุฐุง ุชู ุฅูุดุงุก ุฃู ุชุนุฏูู ุฎุงุฏู ุฃู ูุฑุต ููุฌูุฏ ุ ูุณุชุฎุฏู <strong>ูุนุฑู</strong> ุงูุตูุฑุฉ ุงูุนุงูุฉ ููุณูุทุฉ <strong>image_id</strong> ุ ูุจุนุฏ ุชุญุฏูุซ ูุฐู ุงูุตูุฑุฉ ุ ุณุชุคุฏู ุฅุนุงุฏุฉ ุชุดุบูู ุจูุงู Terraform ุฅูู ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุฎุงุฏู ุฃู ุงููุฑุต.  ุจุงุณุชุฎุฏุงู ุงููุณูุทุฉ <strong>ignore_changes</strong> ูุชุฌูุจ ูุฐุง ุงููููู. <br><br>  <em>ููุงุญุธุฉ:</em> <em>ุธูุฑุช</em> <em>ูุณูุทุฉ</em> <strong><em>ignore_changes</em></strong> <em>ูู</em> <strong><em>Terraform</em></strong> <em>ููุฐ ููุช ุทููู:</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุณุญุจ # 2525</a> <em>.</em> <br><br>  ููุงู ุญุงุฌุฉ ุฅูู ูุณูุทุฉ <strong>ignore_resize_confirmation</strong> ูุชุบููุฑ ุญุฌู ุงููุฑุต ุฃู ุงูููู ุฃู ุฐุงูุฑุฉ ุงูุฎุงุฏู ุงููุญูู ุจูุฌุงุญ.  ูุชู ุฅุฌุฑุงุก ูุฐู ุงูุชุบููุฑุงุช ูู ุฎูุงู ูููู OpenStack Nova ุจุงุณุชุฎุฏุงู ุทูุจ <b>ุชุบููุฑ ุงูุญุฌู</b> .  ุจุดูู ุงูุชุฑุงุถู ุ ูุถุน Nova ุจุนุฏ ุทูุจ <b>ุชุบููุฑ ุงูุญุฌู</b> ุงูุฎุงุฏู ูู ุญุงูุฉ <b>ุงูุชุญูู ูู ุญุฌูู</b> ูููุชุธุฑ ุชุฃููุฏูุง ุฅุถุงูููุง ูู ุงููุณุชุฎุฏู.  ููุน ุฐูู ุ ูููู ุชุบููุฑ ูุฐุง ุงูุณููู ุจุญูุซ ูุง ุชูุชุธุฑ Nova ุฅุฌุฑุงุกุงุช ุฅุถุงููุฉ ูู ุงููุณุชุฎุฏู. <br><br>  ุชุชูุญ ุงููุณูุทุฉ ุงููุญุฏุฏุฉ ูู <b>Terraform</b> ุนุฏู ุงูุชุธุงุฑ ุญุงูุฉ <b>check_resize</b> ููุฎุงุฏู ููููู ุฌุงูุฒูุง ููููู ุงูุฎุงุฏู ูู ุงูุญุงูุฉ ุงููุดุทุฉ ุจุนุฏ ุชุบููุฑ ุงููุนููุงุช ุงูุฎุงุตุฉ ุจู.  ุชุชููุฑ ุงููุณูุทุฉ ูู ุงูุฅุตุฏุงุฑ 1.10.0 ูู ูููุฑ OpenStack Terraform: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">pull # 422</a> . <br><br><h3 style=";text-align:right;direction:rtl">  ุฎูู ุงูููุงุฑุฏ </h3><br>  ูุจู ุฅุทูุงู ุงูุจูุงูุงุช ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ุงููุซุงู ุงูุฎุงุต ุจูุง ูุชู ุฅุทูุงู ูุฒูุฏูู ูุฎุชูููู ุ ููุนุชูุฏ ูููุฑ OpenStack ุนูู ููุงุฑุฏ ูููุฑ Selectel ุ ูุฃูู ูู ุงููุณุชุญูู ุฅุฏุงุฑุฉ ุงููุงุฆูุงุช ุงูุชุงุจุนุฉ ูู ุฏูู ุฅูุดุงุก ูุณุชุฎุฏู ูู ุงููุดุฑูุน.  ูุณูุก ุงูุญุธ ุ ููุณุจุจ ููุณู ุ ูุง ูููููุง ุชุดุบูู <strong>ุงูุฃูุฑ terraform application</strong> ุฏุงุฎู ูุซุงููุง.  ุณูุญุชุงุฌ ุฃููุงู ุฅูู <strong>ุงูุชูุฏู ุจุทูุจ</strong> ููุญุตูู ุนูู ุงููุญุฏุฉ ุงูููุทูุฉ <strong>project_with_user</strong> ูุจุนุฏ ุฐูู ููู ุดูุก ุขุฎุฑ. <br><br>  <em>ููุงุญุธุฉ: ูู ูุชู ุญู ูุฐู ุงููุดููุฉ ุจุนุฏ ูู Terraform ุ ููููู ูุชุงุจุนุฉ ููุงูุดุชูุง ุญูู Github ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุงูุนุฏุฏ ุฑูู 2430</a> ูุงูุฅุตุฏุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุฑูู 4149</a> .</em> <br><br>  ูุฅูุดุงุก ููุงุฑุฏ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุณููุชูู</a> ุฅูู ุฏููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">terraform- ุฃูุซูุฉ / ุฃูุซูุฉ / vpc / server_local_root_disk</a> ุ ูุฌุจ ุฃู ุชููู ูุญุชููุงุชู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ ls README.md main.tf vars.tf</code> </pre><br>  ูุญู ูููุฆ ุงููุญุฏุงุช ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ terraform init</code> </pre><br>  ููุธูุฑ ุงูุฅุฎุฑุงุฌ ุฃู Terraform ูููู ุจุชูุฒูู ุฃุญุฏุซ ุฅุตุฏุงุฑุงุช ูููุฑู ุงูุฎุฏูุฉ ุงููุณุชุฎุฏูุฉ ูุงูุชุญูู ูู ุฌููุน ุงููุญุฏุงุช ุงูููุถุญุฉ ูู ุงููุซุงู. <br><br>  ุฃููุงู ุ ูู ุจุชุทุจูู ุงููุญุฏุฉ ุงูููุทูุฉ <strong>project_with_user</strong> .  ูู ูุฐู ุงูุญุงูุฉ ุ ุชุญุชุงุฌ ุฅูู ููู ููู ุงููุชุบูุฑุงุช ุงูุชู ูู ูุชู ุชุนููููุง ูุฏูููุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>sel_account</strong> ูุน ุฑูู ุญุณุงุจู ูู Selectel ุ </li><li style=";text-align:right;direction:rtl">  <strong>sel_token</strong> ูุน ุงูููุชุงุญ ุงูุฎุงุต ุจู ู Selectel API ุ </li><li style=";text-align:right;direction:rtl">  <strong>user_password</strong> ุจูููุฉ ูุฑูุฑ ูููุณุชุฎุฏู OpenStack. </li></ul><br>  ูุฌุจ ุฃู ุชุคุฎุฐ ููู ุงููุชุบูุฑูู ุงูุฃูููู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ููุญุฉ ุงูุชุญูู</a> . <br><br>  ุจุงููุณุจุฉ ูููุชุบูุฑ ุงูุฃุฎูุฑ ุ ููููู ุงูุชูููุฑ ูู ุฃู ูููุฉ ูุฑูุฑ. <br><br>  ูุงุณุชุฎุฏุงู ุงููุญุฏุฉ ุงูููุทูุฉ ุ ูู ุงูุถุฑูุฑู ุงุณุชุจุฏุงู ุงูููู <strong>SEL_ACCOUNT</strong> ู <strong>SEL_TOKEN</strong> ู <strong>USER_PASSWORD ุนู ุทุฑูู</strong> ุชุดุบูู ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply -target=module.project_with_user</code> </pre><br>  ุจุนุฏ ุชุดุบูู ุฃูุฑ Terraform ุ ุณูู ูุนุฑุถ ุงูููุงุฑุฏ ุงูุชู ูุฑูุฏ ุฅูุดุงุฆูุง ูุณูุญุชุงุฌ ุฅูู ุชุฃููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Plan: 3 to add, 0 to change, 0 to destroy. Do you want to perform these actions? Terraform will perform the actions described above. Only <span class="hljs-string"><span class="hljs-string">'yes'</span></span> will be accepted to approve. Enter a value: yes</code> </pre><br>  ุจูุฌุฑุฏ ุฅูุดุงุก ุงููุดุฑูุน ูุงููุณุชุฎุฏู ูุงูุฏูุฑ ุ ููููู ุงูุจุฏุก ูู ุฅูุดุงุก ุงูููุงุฑุฏ ุงููุชุจููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply</code> </pre><br>  ุนูุฏ ุฅูุดุงุก ุงูููุงุฑุฏ ุ ุงูุชุจู ุฅูู ุฅุฎุฑุงุฌ Terraform ุจุงุณุชุฎุฏุงู ุนููุงู IP ุฎุงุฑุฌู ุญูุซ ูููู ุงููุตูู ุฅูู ุงูุฎุงุฏู ุงูุฐู ุชู ุฅูุดุงุคู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">module.server_local_root_disk.openstack_networking_floatingip_associate_v2.association_1: Creating... floating_ip: <span class="hljs-string"><span class="hljs-string">""</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"xxxx"</span></span></code> </pre><br>  ููููู ุงูุนูู ูุน ุงูุฌูุงุฒ ุงูุธุงูุฑู ุงูุฐู ุชู ุฅูุดุงุคู ุนุจุฑ SSH ุนูู IP ุงููุญุฏุฏ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุญุฑูุฑ ุงูููุงุฑุฏ </h3><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฅูุดุงุก ููุงุฑุฏ ูู ุฎูุงู Terraform ุ ูููู ุฃูุถูุง ุชุนุฏูููุง. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุจุฒูุงุฏุฉ ุนุฏุฏ ุงูููู ูุงูุฐุงูุฑุฉ <strong>ูุฎุงุฏููุง</strong> ุนู ุทุฑูู ุชุบููุฑ ููู <strong>ูุนููุงุช server_vcpus</strong> ู <strong>server_ram_mb</strong> ูู ููู <strong>ุงูุฃูุซูุฉ / vpc / server_local_root_disk / main.tf</strong> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">- server_vcpus = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.server_vcpus}</span></span></span><span class="hljs-string">"</span></span> - server_ram_mb = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.server_ram_mb}</span></span></span><span class="hljs-string">"</span></span> + server_vcpus = 8 + server_ram_mb = 10240</code> </pre><br>  ุจุนุฏ ุฐูู ุ ูุชุญูู ูู ุงูุชุบููุฑุงุช ุงูุชู ุณูุคุฏู ุจูุง ูุฐุง ุฅูู ุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform plan</code> </pre><br>  ูุชูุฌุฉ ูุฐูู ุ ูุงู <strong>Terraform</strong> ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุงูููุงุฑุฏ <strong>openstack_compute_instance_v2</strong> ู <strong>openstack_compute_flavor_v2</strong> . <br><br>  <em>ูุฑุฌู ููุงุญุธุฉ ุฃู ูุฐุง ุณูุคุฏู ุฅูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุงูุฐู ุชู ุฅูุดุงุคู.</em> <br><br>  ูุชุทุจูู ุชูููู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุงูุฌุฏูุฏ ุ ุงุณุชุฎุฏู <strong>ุงูุฃูุฑ terraform application</strong> ุ ูุงูุฐู ุณุจู ุฃู ูููุง ุจุชุดุบููู ูุณุจููุง. <br><br>  ุณูุชู ุนุฑุถ ุฌููุน ุงููุงุฆูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ููุญุฉ ุงูุชุญูู VPC</a> : <br><br><img src="https://habrastorage.org/webt/eq/e5/3a/eqe53anrxqpnpd6qn7hlcrnuxec.png"><br><br>  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ูุณุชูุฏุน ุงููุซุงู ุงูุฎุงุต</a> ุจูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุ</a> ููููู ุฃูุถูุง ูุดุงูุฏุฉ ุจูุงูุงุช ุญูู ุฅูุดุงุก ุฃุฌูุฒุฉ ุงูุชุฑุงุถูุฉ ูุน ูุญุฑูุงุช ุฃูุฑุงุต ุงูุดุจูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  Kubernetes Cluster ูุซุงู </h2><br>  ูุจู ุงููุชุงุจุนุฉ ุฅูู ุงููุซุงู ุงูุชุงูู ุ ุณูููู ุจูุณุญ ุงูููุงุฑุฏ ุงูุชู ุชู ุฅูุดุงุคูุง ูุณุจููุง.  ููููุงู ุจุฐูู ุ ูู ุฌุฐุฑ ุงููุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">- ุฃูุซูุฉ / ุฃูุซูุฉ / vpc / server_local_root_disk ุ ูู</a> ุจุชุดุบูู ุงูุฃูุฑ ูุญุฐู ูุงุฆูุงุช OpenStack: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform destroy -target=module.server_local_root_disk</code> </pre><br>  ุจุนุฏ ุฐูู ุ ูู ุจุชุดุบูู ุงูุฃูุฑ Selectel VPC API Object Cleanup: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform destroy -target=module.project_with_user</code> </pre><br>  ูู ููุชุง ุงูุญุงูุชูู ุ ุณุชุญุชุงุฌ ุฅูู ุชุฃููุฏ ุญุฐู ุฌููุน ุงููุงุฆูุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Do you really want to destroy all resources? Terraform will destroy all your managed infrastructure, as shown above. There is no undo. Only <span class="hljs-string"><span class="hljs-string">'yes'</span></span> will be accepted to confirm. Enter a value: yes</code> </pre><br>  ุงููุซุงู ุงูุชุงูู ููุฌูุฏ ูู ุงูุฏููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">terraform- ุฃูุซูุฉ / ุฃูุซูุฉ / vpc / kubernetes_cluster</a> . <br><br>  ููุดุฆ ูุฐุง ุงููุซุงู ูุดุฑูุนูุง ุ ูุณุชุฎุฏููุง ูู ุฏูุฑ ูู ุงููุดุฑูุน ุ ููุฑูุน ูุฌููุนุฉ Kubernetes ูุงุญุฏุฉ.  ูู ููู <strong>vars.tf</strong> ุ <strong>ููููู</strong> ุฑุคูุฉ ุงูููู ุงูุงูุชุฑุงุถูุฉ ุ ูุซู ุนุฏุฏ ุงูุนูุฏ ูุฎุตุงุฆุตูุง ูุฅุตุฏุงุฑ Kubernetes ูุงููุฒูุฏ. <br><br>  ูุฅูุดุงุก ููุงุฑุฏ ุ ุนูู ุบุฑุงุฑ ุงููุซุงู ุงูุฃูู ุ ุฃูู ุดูุก ุณููุนูู ูู ุชููุฆุฉ ุงููุญุฏุงุช ูุฅูุดุงุก ููุงุฑุฏ ุงููุญุฏุฉ ุงูููุทูุฉ <strong>project_with_user</strong> ุ ุซู ุฅูุดุงุก ุงูุจุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ terraform init $ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply -target=module.project_with_user $ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply</code> </pre><br>  ูููู ุจุชูุฑูุฑ ุฅูุดุงุก ูุฅุฏุงุฑุฉ ูุฌููุนุงุช Kubernetes ูู ุฎูุงู ูููู OpenStack Magnum.  ููููู ูุนุฑูุฉ ุงููุฒูุฏ ุญูู ููููุฉ ุงูุนูู ูุน ูุฌููุนุฉ ูู ุฃุญุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ููุงูุงุชูุง ุงูุณุงุจูุฉ</a> ุ ููุฐูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ูุงุนุฏุฉ ุงููุนุฑูุฉ</a> . <br><br>  ุฃุซูุงุก ุฅุนุฏุงุฏ ูุธุงู ุงููุฌููุนุฉ ุ ุณูุชู ุฅูุดุงุก ุงูุฃูุฑุงุต ูุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ูุณูุชู ุชุซุจูุช ุฌููุน ุงูููููุงุช ุงูุถุฑูุฑูุฉ.  ูุณุชุบุฑู ุงูุฅุนุฏุงุฏ ุญูุงูู 4 ุฏูุงุฆู ุ ูุนูุฏูุง ูุนุฑุถ Terraform ุฑุณุงุฆู ุงููููุฐุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">module.kubernetes_cluster.openstack_containerinfra_cluster_v1.cluster_1: Still creating... (3m0s elapsed)</code> </pre><br>  ุจุนุฏ ุงูุชูุงู ุงูุชุซุจูุช ุ ุณุชุนููู Terraform ุจุฃู ุงููุชูุฉ ุฌุงูุฒุฉ ูุชุนุฑุถ ูุนุฑููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">module.kubernetes_cluster.openstack_containerinfra_cluster_v1.cluster_1: Creation complete after 4m20s (ID: 3c8...) Apply complete! Resources: 6 added, 0 changed, 0 destroyed.</code> </pre><br>  ูุฅุฏุงุฑุฉ ูุธุงู Kubernetes ุงูุฐู ุชู ุฅูุดุงุคู ูู ุฎูุงู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ kubectl ุ ูุฌุจ ุงูุญุตูู ุนูู ููู ุงููุตูู ุฅูู ูุธุงู ุงููุฌููุนุฉ.  ููููุงู ุจุฐูู ุ ุงูุชูู ุฅูู ุงููุดุฑูุน ุงูุฐู ุชู ุฅูุดุงุคู ูู ุฎูุงู Terraform ูู ูุงุฆูุฉ ุงููุดุงุฑูุน ูู ุญุณุงุจู: <br><br><img src="https://habrastorage.org/webt/pp/7y/rt/pp7yrtw_q-79pkx1j6mr5ebbsyi.png"><br><br>  ุจุนุฏ ุฐูู ุ ุงุชุจุน ุฑุงุจุท ุงููููุฐุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">xxxxxx.selvpc.ru</a> ุ ูุงูุฐู ูุชู ุนุฑุถู ุฃุณูู ุงุณู ุงููุดุฑูุน: <br><br><img src="https://habrastorage.org/webt/yr/in/wk/yrinwkfne83cenropq9t3szxt6c.png"><br><br>  ุงุณุชุฎุฏู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุฎูุงู Terraform ููุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู.  ุฅุฐุง ูู ุชูู ุจุชุบููุฑ <strong>vars.tf</strong> ุฃู <strong>main.tf</strong> ุนูู ุณุจูู ุงููุซุงู ุ ูุณูููู ูุฏู ุงููุณุชุฎุฏู ุงุณู <strong>tf_user</strong> .  ููููุฉ ูุฑูุฑ ุ ุงุณุชุฎุฏู ูููุฉ ุงููุชุบูุฑ <strong>TF_VAR_user_password</strong> ุ ุงูุฐู ุชู ุชุญุฏูุฏู ุนูุฏ ุชุดุบูู <strong>terraform ูู</strong> ููุช ุณุงุจู. <br><br>  ุฏุงุฎู ุงููุดุฑูุน ุ ุชุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ุฅูู ุนูุงูุฉ ุชุจููุจ <strong>Kubernetes</strong> : <br><br><img src="https://habrastorage.org/webt/ft/bp/dj/ftbpdjhjrgxkgzomuxegaujj3wu.png"><br><br>  ููุง ูุฌููุนุฉ ุชู ุฅูุดุงุคูุง ูู ุฎูุงู Terraform.  ููููู ุชูุฒูู ููู <strong>kubectl</strong> ูู ุนูุงูุฉ ุงูุชุจููุจ "ุงููุตูู": <br><br><img src="https://habrastorage.org/webt/y_/pe/ov/y_peovkv0kjznzx95c_vw4wc-4e.png"><br><br>  ุชุญุชูู ุนูุงูุฉ ุงูุชุจููุจ ููุณูุง ุนูู ุฅุฑุดุงุฏุงุช ูุชุซุจูุช <strong>kubectl</strong> ูุงุณุชุฎุฏุงู <strong>config.yaml ุงูุฐู ุชู</strong> ุชูุฒููู. <br><br>  ุจุนุฏ ุจุฏุก <strong>ุชุดุบูู kubectl</strong> ูุฅุนุฏุงุฏ ูุชุบูุฑ ุงูุจูุฆุฉ <strong>KUBECONFIG ุ</strong> ููููู ุงุณุชุฎุฏุงู Kubernetes: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ kubectl get pods --all-namespaces NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-9578f5c87-g6bjf 1/1 Running 0 8m kube-system coredns-9578f5c87-rvkgd 1/1 Running 0 6m kube-system heapster-866fcbc879-b6998 1/1 Running 0 8m kube-system kube-dns-autoscaler-689688988f-8cxhf 1/1 Running 0 8m kube-system kubernetes-dashboard-7bdb5d4cd7-jcjq9 1/1 Running 0 8m kube-system monitoring-grafana-84c97bb64d-tc64b 1/1 Running 0 8m kube-system monitoring-influxdb-7c8ccc75c6-dzk5f 1/1 Running 0 8m kube-system node-exporter-tf-cluster-rz6nggvs4va7-minion-0 1/1 Running 0 8m kube-system node-exporter-tf-cluster-rz6nggvs4va7-minion-1 1/1 Running 0 8m kube-system openstack-cloud-controller-manager-8vrmp 1/1 Running 3 8m prometeus-monitoring grafana-76bcb7ffb8-4tm7t 1/1 Running 0 8m prometeus-monitoring prometheus-75cdd77c5c-w29gb 1/1 Running 0 8m</code> </pre><br>  ูุชู ุชุบููุฑ ุนุฏุฏ ุงูุนูุฏ ุงููุชูุฉ ุจุณูููุฉ ุนุจุฑ Terraform. <br>  ุชู ุชุญุฏูุฏ ุงููููุฉ ุงูุชุงููุฉ ูู ููู <strong>main.tf</strong> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">cluster_node_count = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.cluster_node_count}</span></span></span><span class="hljs-string">"</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุจุฏุงู ูุฐู ุงููููุฉ ูู <strong>vars.tf</strong> : </p><br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">variable <span class="hljs-string"><span class="hljs-string">"cluster_node_count"</span></span> { default = 2 }</code> </pre><br>  ููููู ุฅูุง ุชุบููุฑ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู <strong>vars.tf</strong> ุ ุฃู ุชุญุฏูุฏ ุงููููุฉ ุงููุทููุจุฉ ูุจุงุดุฑุฉ ูู <strong>main.tf</strong> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">- cluster_node_count = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.cluster_node_count}</span></span></span><span class="hljs-string">"</span></span> + cluster_node_count = 3</code> </pre><br>  ูุชุทุจูู ุงูุชุบููุฑุงุช ุ ููุง ูู ุญุงูุฉ ุงููุซุงู ุงูุฃูู ุ ุงุณุชุฎุฏู <strong>ุงูุฃูุฑ terraform application</strong> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply</code> </pre><br>  ุนูุฏูุง ูุชุบูุฑ ุนุฏุฏ ุงูุนูุฏ ุ ุณุชุจูู ุงููุชูุฉ ูุชููุฑุฉ.  ุจุนุฏ ุฅุถุงูุฉ ุนูุฏุฉ ุนุจุฑ Terraform ุ ููููู ุงุณุชุฎุฏุงูู ุฏูู ุชูููู ุฅุถุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ kubectl get nodes NAME STATUS ROLES AGE VERSION tf-cluster-rz6nggvs4va7-master-0 Ready,SchedulingDisabled master 8m v1.12.4 tf-cluster-rz6nggvs4va7-minion-0 Ready &lt;none&gt; 8m v1.12.4 tf-cluster-rz6nggvs4va7-minion-1 Ready &lt;none&gt; 8m v1.12.4 tf-cluster-rz6nggvs4va7-minion-2 Ready &lt;none&gt; 3m v1.12.4</code> </pre><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุชุนูููุง ุนู ุงูุทุฑู ุงูุฃุณุงุณูุฉ ููุนูู ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">"Virtual Private Cloud" ูู</a> ุฎูุงู Terraform.  ุณูููู ุณุนุฏุงุก ุฅุฐุง ููุช ุชุณุชุฎุฏู ูุฒูุฏ Terraform ุงูุฑุณูู Selectel ูุชูุฏูู ููุงุญุธุงุช. <br><br>  ูููู ุงูุฅุจูุงุบ ุนู ุฌููุน ุงูุฃุฎุทุงุก ุงูุชู ุชู ุงูุนุซูุฑ ุนูููุง ููููุฑ Terraform Selectel ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ูุดููุงุช Github</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar445162/">https://habr.com/ru/post/ar445162/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar445152/index.html">ูุงุฐุง ูููู ุงูููุงู ุจู ูู ุงูุจุญุซุ ุชูุฑูุฑ ูุงูุฏูุณ</a></li>
<li><a href="../ar445154/index.html">ุงูุฃุญุฏุงุซ ุงูุฑูููุฉ ูู ููุณูู ูู 25 ูุงุฑุณ ุฅูู 31 ูุงุฑุณ</a></li>
<li><a href="../ar445156/index.html">ุงูุจุฎุงุฎุงุช ุงููุฏูุฌุฉ ูู ุฌููููุงุฑู: ุดูุก ูููุฏ ูู ุงูุญูุงุฉ ุงูููููุฉ</a></li>
<li><a href="../ar445158/index.html">ุชูุฌูู ุงูุฌุฒุก ุงูุฃูุซู ูุชูููู ุงูุฏุนู ูู ุทุงุจุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ</a></li>
<li><a href="../ar445160/index.html">ูููู ุจุชุทููุฑ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุฏูุงุณุฉ ูุชุนูู ุงูุนุฒู ุนูู balalaika</a></li>
<li><a href="../ar445164/index.html">ุฃุฏุงุก ูููุน ูุชูุงุฒู. ุงูุฌุฒุก 5: ุณูููุฉ ุงูุงุณุชุฎุฏุงู</a></li>
<li><a href="../ar445166/index.html">ูู ูุง ุชุญุชุงุฌ ููุนุฑูุชู ุญูู ุงููุงุตูุฉ ุงูุชููุงุฆูุฉ ูู CSS</a></li>
<li><a href="../ar445168/index.html">ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ ุงููุซุงููุฉ ุงูุชู ุณูุฑุญุจ ุจูุง ุงููุฌูุฏ ูุตุงุญุจ ุงูุนูู</a></li>
<li><a href="../ar445170/index.html">ุซูุงุซุฉ ุฃูุงุฐูุจ ูุจูุฑุฉ ุญูู ุฌุงูุง ุณูุฑูุจุช</a></li>
<li><a href="../ar445172/index.html">ุธูุฑุช ูุชุตูุญุงุช Edge ูุน Chromium ูู ุฎุฏูุงุช ุงุณุชุถุงูุฉ ุงููููุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>