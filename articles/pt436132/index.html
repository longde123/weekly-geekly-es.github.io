<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò¶Ô∏è üî∂ ‚ùóÔ∏è 12 coisas estranhas que podem acontecer ap√≥s a instala√ß√£o do pacote npm üòÖ üíñ üë®üèª‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° alguns meses, iniciei um projeto chamado pacotes maliciosos (tamb√©m conhecido como "pacotes maliciosos"). Ele monitora atualiza√ß√µes no reposit√≥rio ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>12 coisas estranhas que podem acontecer ap√≥s a instala√ß√£o do pacote npm</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436132/"><p> H√° alguns meses, iniciei um projeto chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pacotes maliciosos</a> (tamb√©m conhecido como "pacotes maliciosos").  Ele monitora atualiza√ß√µes no reposit√≥rio npm, baixa todos os novos m√≥dulos e depois verifica se h√° piolhos - procura atividades de rede, opera√ß√µes suspeitas com o sistema de arquivos etc.  Mesmo pequenos projetos no node.js geralmente t√™m uma grande √°rvore de depend√™ncias, e os desenvolvedores fisicamente n√£o t√™m como testar todos eles.  Isso oferece aos atacantes uma enorme margem de manobra, e surge a pergunta: quanto registro desagrad√°vel est√° oculto nos cantos escuros do registro npm?  180.000 pacotes verificados depois, recebi uma resposta aproximada. </p><br><p><img src="https://habrastorage.org/webt/bg/9_/qs/bg9_qs2qlravq3d4l6qdi1inr0m.png" alt="imagem"></p><a name="habracut"></a><br><p>  E esta resposta - talvez nem tanto. <br>  <em>[nota: no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">meio</a> h√° uma vers√£o em ingl√™s deste artigo, tamb√©m da minha autoria]</em> </p><br><h2 id="chto-npm-paket-mozhet-sdelat-c-vashey-sistemoy">  O que um pacote npm pode fazer com seu sistema? </h2><br><p>  O pacote tem duas maneiras principais de prejudic√°-lo - ao instalar / desinstalar e no momento em que voc√™ inicia o aplicativo.  Vejamos as duas op√ß√µes com exemplos. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Os scripts do NPM</a> permitem que os pacotes executem comandos arbitr√°rios no momento da instala√ß√£o e desinstala√ß√£o.  Isso inclui <code>preinstall</code> <code>install</code> , <code>install</code> , <code>preuninstall</code> <code>install</code> , <code>preinstall</code> <code>install</code> e <code>postuninstall</code> , que s√£o executados automaticamente pelo npm no momento apropriado no ciclo de vida do pacote.  O que eles podem fazer?  Tudo √© o mesmo que o usu√°rio atual pode fazer - por exemplo, excluir todas as suas fotos das √∫ltimas f√©rias ou mesclar o hist√≥rico do navegador no FBI (embora, provavelmente, ele j√° o tenha).  Esse comportamento pode ser desativado passando o sinalizador <code>--ignore-scripts</code> , mas, primeiro, ningu√©m faz isso e, segundo, dessa maneira, voc√™ pode quebrar um monte de pacotes bastante confi√°veis.  Foi por meio de scripts que foi realizado o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ataque sensacional ao ESLint</a> , que afetou os usu√°rios do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-scope</a> (6 milh√µes de instala√ß√µes por semana) e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-config-eslint</a> (2 mil instala√ß√µes por semana). </p><br><p>  O pacote tem uma segunda chance de complicar sua vida durante a inicializa√ß√£o (geralmente ocorre na primeira chamada a ser <code>require</code> ).  Agora ele tem a oportunidade de modificar vari√°veis ‚Äã‚Äãglobais e outros pacotes, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">roubar a chave privada</a> da sua carteira de bitcoin ou tornar o m√©todo <code>crypto.randomBytes</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o t√£o aleat√≥rio</a> . </p><br><p><img src="https://habrastorage.org/storage2/930/571/c14/930571c142e5a454827cca64cd0855be.png" alt="imagem"></p><br><h2 id="skolko-vredonosnyh-paketov-bylo-obnaruzheno">  Quantos pacotes maliciosos foram detectados? </h2><br><p>  Bem, a lista n√£o pode ser chamada de impressionante. No total, foram encontrados 3 pacotes que foram removidos do reposit√≥rio npm pelos esfor√ßos da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">equipe de seguran√ßa npm</a> .  Vamos passar por isso: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">commander-js</a> tenta se disfar√ßar como <code>commander.js</code> real ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.npmjs.com/package/commander</a> ), mas cont√©m um detalhe incomum, a saber, um script <code>postinstall</code> que baixa e executa o conte√∫do de <a href="">http://23.94.46.191/ update.json</a> (no momento da publica√ß√£o n√£o cont√©m nada de criminoso).  Aviso de seguran√ßa: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.npmjs.com/advisories/763</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O rrgod,</a> atrav√©s dos mesmos scripts, baixa e executa o script em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://static.ricterz.me</a> , que, por sua vez, est√° tentando carregar outro script que n√£o est√° dispon√≠vel no momento.  Aviso de seguran√ßa: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.npmjs.com/advisories/764</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">parcelfatty12</a> n√£o pode ser chamado de completamente malicioso, mas a maneira como o autor coleta estat√≠sticas sobre as configura√ß√µes de sua ideia √© muito duvidosa - isso est√° enviando sua chave p√∫blica ssh ( <code>~/.ssh/id_rsa.pub</code> ) para um servidor que n√£o est√° dispon√≠vel no momento.  Aviso de seguran√ßa: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.npmjs.com/advisories/765</a> . </li></ul><br><p>  Apesar dos resultados muito modestos, no processo de analisar todos os pacotes suspeitos (e eu olhei para mais de 3000 relat√≥rios para encontrar essas tr√™s p√©rolas), muitas coisas engra√ßadas e n√£o muito encontradas foram encontradas nas quais voc√™ geralmente n√£o pensa (ou tenta com cuidado n√£o pensar) digitando <code>npm install</code> .  Ent√£o, vamos imaginar que voc√™ acidentalmente selecione um dos muitos pacotes do reposit√≥rio e o instale.  O que poderia dar errado? </p><br><p>  <strong>1. Um pacote pode substituir m√©todos em outros pacotes (incluindo aqueles da entrega padr√£o do Node.js.)</strong> </p><br><p>  No entanto, se voc√™ ler alguns par√°grafos anteriores ou estiver trabalhando com o ecossistema javascript por mais de uma semana, √© improv√°vel que isso seja novidade para voc√™.  Mas a escala deste desastre pode muito bem escapar de voc√™.  Portanto, se seu projeto tiver pelo menos algumas depend√™ncias, provavelmente o m√©todo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fs.closeSync</a> que voc√™ j√° substituiu (e talvez mais de uma vez).  Um grande n√∫mero de pacotes modifica a API de outra pessoa, mas apenas alguns deles t√™m pelo menos uma boa raz√£o para isso.  Entre os "campe√µes" est√° o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gracioso-fs</a> com 12 milh√µes de instala√ß√µes por semana, o que <a href="">redefine uma d√∫zia de m√©todos dos fs</a> .  Tamb√©m vale a pena observar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ouvinte ass√≠ncrono</a> , que substitui <a href="">46 m√©todos diferentes</a> , incluindo o <code>crypto.randomBytes</code> malfadado, que me incomodou um pouco quando descobri isso pela primeira vez. </p><br><p>  Imagine o que seria um bug causado por essa substitui√ß√£o de alguma depend√™ncia nas profundezas da hierarquia.  No entanto, n√£o h√° motivo para preocupa√ß√µes, porque ... </p><br><p>  <strong>2. O pacote pode determinar a API alterada para fazer corre√ß√µes adicionais</strong> </p><br><p><img src="https://habrastorage.org/webt/aq/vf/vl/aqvfvlvne6ysfueydftxaubwnlg.png" alt="imagem"></p><br><p>  Sim, alguns pacotes fazem isso (geralmente com rela√ß√£o ao mesmo <code>graceful-fs</code> ) usando maravilhas de acrobacias como <code>/graceful-fs/.test(fs.closeSync.toString())</code> .  Portanto, se voc√™ encontrar repentinamente problemas incompreens√≠veis na biblioteca padr√£o, tente instalar alguns pacotes npm aleat√≥rios.  Ou simplesmente desligue o computador e fa√ßa uma caminhada no parque mais pr√≥ximo, a vida √© muito curta para entender tudo isso. </p><br><p>  <strong>3. Ele pode enviar an√°lises</strong> </p><br><p>  O Adblock n√£o o proteger√° se algo acontecer no console, e os autores de alguns pacotes usam isso com sucesso.  Alguns enviam as informa√ß√µes mais b√°sicas, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ecdsa-csr</a> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// POST https://api.therootcompany.com/api/therootcompany.com/public/ping { "package":"ecdsa-csr", "version":"1.1.1", "node":"v10.14.2", "arch":"x64", "platform":"linux", "release":"4.9.125-linuxkit", "action":"install", "ppid":"eDSeYr9XUNRi9WhWli5smBNAvdw=" }</span></span></code> </pre> <br><p>  Alguns n√£o s√£o t√£o t√≠midos.  Aqui, por exemplo, faz parte do relat√≥rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sem servidor</a> (o original √© 2 vezes maior): </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// POST https://tracking.serverlessteam.com/v1/track { "userId":"0e32cba0-14ef-11e9-9f89-b7ed4ca5dbba", "event":"framework_stat", "properties":{ "version":2, "general":{ "userId":"0e32cba0-14ef-11e9-9f89-b7ed4ca5dbba", "context":"install", "timestamp":1547135257977, "timezone":"GMT+0000", "operatingSystem":"linux", "userAgent":"cli", "serverlessVersion":"1.35.1", "nodeJsVersion":"v10.14.2", "isDockerContainer":true, "isCISystem":false, "ciSystem":null } } }</span></span></code> </pre> <br><p>  Felizmente, o <code>jquery</code> n√£o envia nenhuma estat√≠stica, portanto voc√™ ainda pode instal√°-lo secretamente por todos.  Por enquanto. </p><br><p>  <strong>4. Seu computador pode ser usado em vez de um servidor de CI / CD</strong> </p><br><p>  Por que voc√™ compilaria seu pacote se <a href="">seus usu√°rios</a> podem fazer <a href="">isso durante a instala√ß√£o</a> ?  Voc√™ pode obter uma conquista extra se especificar apenas a vers√£o principal do compilador necess√°rio, por exemplo, <code>typescript@3</code> .  Uma esperan√ßa para os caras alfabetizados da Microsoft que sabem como fazer o semver certo. </p><br><p>  √â poss√≠vel ir ainda mais longe?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Claro</a> ! </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --ext .js,.vue --fix src"</span></span></code> </pre> <br><p>  Agora voc√™ pode dormir em paz - todos os usu√°rios receber√£o fontes perfeitamente formatadas para o seu pacote. </p><br><p>  <strong>5. Ele pode tentar te assustar.</strong> </p><br><p><img src="https://habrastorage.org/webt/vg/h7/uf/vgh7uf8gcfpc3c1cxhukl5ax3fo.png" alt="imagem"></p><br><p>  Se voc√™ assistiu todas as s√©ries Sr.  Rob√¥, mas ainda n√£o motivado o suficiente para ler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redes de Computadores</a> e fazer algo realmente impressionante, ou seja, uma solu√ß√£o simples - mostre suas habilidades ao mundo atrav√©s de algumas linhas em um script <code>postinstall</code> .  Foi exatamente isso que o autor da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">massa</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pizza</a> fez (e ao mesmo tempo me apresentou o KDPV). </p><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"pizza-pasta"</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Zeavo"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"install"</span></span>: <span class="hljs-string"><span class="hljs-string">"mkdir -p ~/Desktop/hacked &amp;&amp; touch ~/Desktop/hacked/pwnddddd &amp;&amp; wget https://imgur.com/download/KTDNt5I -P ~/Desktop/hacked/"</span></span>, <span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"find ~/.ssh | xargs cat || true &amp;&amp; printf '\n\n\n\n\n\nOH HEY LOOK SSH KEYS\n\n\n\nHappy Birthday! Youve been h4ck0red\n\n\n'"</span></span> } }</code> </pre> <br><p>  <strong>6. O pacote pode carregar e executar scripts bash</strong> </p><br><p>  Voc√™ j√° ouviu falar que <code>curl|bash</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o</a> <code>curl|bash</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma boa ideia</a> ?  Caso contr√°rio, voc√™ pode muito bem ser um funcion√°rio da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ORESoftware</a> que possui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√°rios</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pacotes</a> com linhas semelhantes em um script <code>postinstall</code> : </p><br><pre> <code class="bash hljs">curl --silent -o- https://raw.githubusercontent.com/oresoftware/realpath/master/assets/install.sh | bash</code> </pre> <br><p>  At√© agora, n√£o h√° nada de criminoso neste script ... Por enquanto.  Espero que todos que tenham acesso ao dom√≠nio em <code>oresoftware/realpath</code> sejam pessoas extremamente honestas e decentes. </p><br><p>  <strong>7. Voc√™ pode ser solicitado por uma senha</strong> </p><br><p>  O autor do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">magicleap</a> apresentou uma maneira bastante incomum de distribuir um pacote privado por meio de um reposit√≥rio p√∫blico.  Seu projeto consiste em um arquivo criptografado e utilit√°rios para descriptograf√°-lo - mas apenas se voc√™ colocar a chave correta na <code>MAGICLEAP</code> ambiente <code>MAGICLEAP</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : https://github.com/modulesio/magicleap/blob/master/decrypt.js var key = process.env['MAGICLEAP']; console.warn('Decrypting magicleap module with MAGICLEAP environment variable'); const ws = fs.createReadStream(path.join(__dirname, 'lib.zip.enc')) .pipe(crypto.createDecipher('aes-256-cbc', Buffer.from(key, 'base64'))) .pipe(fs.createWriteStream(path.join(__dirname, 'lib.zip')));</span></span></code> </pre> <br><p>  <strong>8. O pacote pode se corrigir durante a instala√ß√£o</strong> </p><br><p>  O autor do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modelo falso</a> n√£o tem tempo para separar os testes do c√≥digo imediato, especialmente porque isso √© f√°cil, adicionando um coment√°rio especial ao final das linhas de teste: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : https://github.com/framp/fake-template/blob/master/index.js const template = (string, tag=defaultTag) =&gt; { if (mode !== 'literal') throw new Error('Invalid template') return (context={}) =&gt; tag(literals, ...expressions.map(evalInContext(context))) } assert.equal(template('')(), ``) // TEST assert.equal(template('abc')(), `abc`) // TEST const dog = 'Orlando' // TEST assert.equal(template('abc ${dog} lol ${cat}')({dog}), `abc ${dog} lol ${cat}`) // TEST</span></span></code> </pre> <br><p>  E exclua-os atrav√©s do <code>sed</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"sed -i '/\\/\\/ TEST/d' index.js"</span></span></code> </pre> <br><p>  Simples e elegante! </p><br><p>  <strong>9. O pacote pode alterar <code>npm</code> configura√ß√µes de <code>npm</code></strong> </p><br><p>  Na minha humilde opini√£o, o <code>package-json.lock</code> √© uma grande coisa que pode salvar muitos problemas causados ‚Äã‚Äãpela neglig√™ncia de outros desenvolvedores.  No entanto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">alguns oponentes</a> dessa id√©ia t√™m argumentos bastante bons contra: </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"preinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm config set package-lock false"</span></span></code> </pre> <br><p>  <strong>10. Ele pode mudar o fundo da sua √°rea de trabalho em uma foto de Nicolas Cage</strong> </p><br><p><img src="https://habrastorage.org/webt/sk/od/kv/skodkvowalhyrenoiqlg8fradu4.jpeg" alt="imagem"></p><br><p>  Aqui est√° um link, apenas no caso - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.npmjs.com/package/cage-js</a> .  Talvez valesse a pena registrar este pacote como malicioso. </p><br><p>  <strong>11. O pacote pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rolar</a> voc√™</strong> </p><br><p>  √â isso que o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ember-data-react faz</a> , abrindo o famoso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√≠deo</a> durante a instala√ß√£o.  Infelizmente, n√£o ser√° poss√≠vel transferir dados do Ember para o React com sua ajuda - n√£o h√° uma √∫nica linha de c√≥digo javascript nele. </p><br><p>  <strong>12. Pode simplesmente n√£o ser instalado.</strong> </p><br><p><img src="https://habrastorage.org/webt/wc/ac/nd/wcacndpogbokwtmi_gpywrmxwmw.png" alt="imagem"><br>  Depend√™ncias inexistentes, vers√µes especificadas incorretamente, reposit√≥rios particulares que ca√≠ram no esquecimento - voc√™ n√£o pode instalar cerca de 0,6% de todos os pacotes do reposit√≥rio npm. </p><br><h2 id="vmesto-zaklyucheniya">  Em vez de uma conclus√£o </h2><br><p>  Os pacotes NPM podem fazer coisas estranhas com seu sistema, e voc√™ n√£o tem muitas op√ß√µes para se proteger contra isso.  Use o <code>package-lock.json</code> para evitar atualiza√ß√µes repentinas (e certifique-se de que ningu√©m o desconecte sem o seu conhecimento), configure o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CSP</a> no front-end para que o backdoor no m√≥dulo de terceiros n√£o possa ao menos mesclar dados ao autor.  E fa√ßa backup de suas fotos, apenas por precau√ß√£o. </p><br><p>  Se voc√™ acha que tem for√ßa suficiente para mergulhar no maravilhoso mundo dos pacotes npm - voc√™ pode encontrar todas as fontes aqui: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/malicious-packages/core</a> .  O utilit√°rio est√° cheio de hacks e solu√ß√µes n√£o ideais, mas lida com sua tarefa.  H√° tamb√©m um dump do MongoDB no reposit√≥rio com os resultados da an√°lise de mais de 180.000 pacotes, o mais importante, n√£o esque√ßa de adicionar o filtro <code>{'reports.status': 'unverified'}</code> .  N√£o pretendo mais desenvolver este projeto devido √† falta de tempo, mas tentarei ajudar com todas as perguntas e problemas, se houver. </p><br><p>  Cuide de si e de suas aplica√ß√µes! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436132/">https://habr.com/ru/post/pt436132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436122/index.html">Intel Lakefield: processador h√≠brido Atom + Core em 3D</a></li>
<li><a href="../pt436124/index.html">Lemos coment√°rios sobre Habr√© com conveni√™ncias</a></li>
<li><a href="../pt436126/index.html">Kubernetes: construindo imagens do Docker em um cluster</a></li>
<li><a href="../pt436128/index.html">Entrevista com o ca√ßador de bagagens Artyom Moscow. Ele invadiu o Steam e recebeu o maior pr√™mio da hist√≥ria da Valve.</a></li>
<li><a href="../pt436130/index.html">O projeto do Minist√©rio de Telecomunica√ß√µes e Comunica√ß√£o de Massa para transferir tr√°fego da Internet atrav√©s de esta√ß√µes russas complica a legaliza√ß√£o da OneWeb na R√∫ssia</a></li>
<li><a href="../pt436134/index.html">At√© 20% de direitos de barragem ser√£o impostos aos roteadores de importa√ß√£o</a></li>
<li><a href="../pt436136/index.html">OceanLotus: ataque a po√ßos no sudeste da √Åsia</a></li>
<li><a href="../pt436140/index.html">‚ÄúSob o cap√¥‚Äù do armazenamento da Huawei: tecnologias propriet√°rias e o que os outros n√£o t√™m</a></li>
<li><a href="../pt436144/index.html">Chefes sugadores de sangue no contexto de uma biocenose: por que uma equipe aut√¥noma se separa se n√£o √© centralizada</a></li>
<li><a href="../pt436148/index.html">A hist√≥ria de um j√∫nior - como come√ßar a trabalhar e n√£o ter medo de tudo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>