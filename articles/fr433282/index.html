<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà∂ ü§π üòÜ Passerelles de protocoles d'√©changes industriels sous Linux. Assemblez-vous üí∑ üñáÔ∏è ‚ôæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je suis engag√© dans le d√©veloppement, la mise en ≈ìuvre et l'exploitation de syst√®mes de contr√¥le automatique de processus (ACS TP). Au d√©part, il a tr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Passerelles de protocoles d'√©changes industriels sous Linux. Assemblez-vous</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433282/">  Je suis engag√© dans le d√©veloppement, la mise en ≈ìuvre et l'exploitation de syst√®mes de contr√¥le automatique de processus (ACS TP).  Au d√©part, il a travaill√© avec les syst√®mes SCADA.  Puis il est rapidement pass√© √† travailler avec des protocoles d'√©change d'appareils industriels.  Pilotes √† auto-√©criture et mise en place de syst√®mes de collecte de donn√©es.  En ce moment, mon travail passe par l'atmosph√®re de Modbus-s, IEC-101/104-s, OPC et d'autres protocoles. <br><br><img src="https://habrastorage.org/webt/u2/se/9s/u2se9sycmvuyymqk6fjdukbofpg.png" alt="image"><br>  <i>Fig.</i>  <i>1. La vari√©t√© des protocoles de communication utilis√©s dans les syst√®mes de contr√¥le industriels</i> <br><a name="habracut"></a><br>  En bref sur le fonctionnement d'un syst√®me de collecte de donn√©es typique (un peu simplifi√©). <br><br><img src="https://habrastorage.org/webt/fd/yf/yw/fdyfywlokjlqdu8s8p8-6s7rqhe.png" alt="image"><br>  <i>Fig.</i>  <i>2. Syst√®me d'acquisition de donn√©es</i> <br><br>  Un logiciel sp√©cial appel√© serveur OPC interroge les appareils connect√©s √† l'interface RS-485.  Le serveur OPC est une sorte de couche entre le syst√®me SCADA et les p√©riph√©riques, traduisant la langue dans laquelle les p√©riph√©riques communiquent dans une langue compr√©hensible pour le syst√®me SCADA.  Le convertisseur Ethernet / RS-485 est utilis√© pour convertir les paquets TCP / IP en paquets qui transitent par l'environnement physique de RS-485. <br><br>  Ce sch√©ma pr√©sente plusieurs inconv√©nients: <br><br><ol><li>  D√©finissez, par exemple, dans le serveur OPC un d√©lai d'attente pour une r√©ponse de 200 ms.  Dans le cas id√©al, lorsque les paquets vont sur Ethernet sans retards, la communication avec les appareils se fait √† une bonne vitesse (intensit√©).  Mais si le paquet contenant la r√©ponse est retard√©, par exemple, de 300 ms (c'est plus que le d√©lai de r√©ponse de 200 ms), le serveur OPC consid√®re que la r√©ponse √† la demande n'est pas arriv√©e et envoie la demande suivante.  √Ä ce moment, la r√©ponse √† la demande pr√©c√©dente arrive, mais le serveur OPC pense que c'est la r√©ponse √† la demande actuelle et envoie les mauvaises donn√©es vers le haut.  En cons√©quence, les donn√©es sur le poste de travail "sautent".  Pour √©chapper √† de telles situations, nous allons d√©finir un d√©lai d'expiration plus.  Prenez avec une marge de 3000 ms.  Si la r√©ponse arrive plus t√¥t que 3000 ms, alors nous n'attendons pas le temps restant, nous passons √† la demande suivante.  Jusqu'√† pr√©sent, tout se passe bien, mais d√®s que plusieurs appareils cessent de r√©pondre, il y a des d√©lais de 3000 ms pour chaque appareil.  Le temps de scrutin augmente. </li><li>  La plupart des protocoles utilis√©s dans les syst√®mes de contr√¥le de processus (Modbus, compteurs √©lectriques) sont bas√©s sur une interrogation s√©quentielle des m√™mes param√®tres.  √âtant donn√© que la plupart du temps les valeurs des param√®tres restent inchang√©es, le r√©seau de donn√©es est utilis√© pour les transmettre.  Cela est irrationnel si le support de transmission est GPRS et que le trafic co√ªte de l'argent.  De plus, dans un support de transmission GPRS, les retards de paquets peuvent atteindre plusieurs secondes.  Pourquoi perdre du temps et des ressources √† transf√©rer la m√™me chose? </li></ol><br>  Pour les situations ci-dessus, un protocole est plus appropri√© dans lequel les donn√©es sont transmises vers le haut par changement (sporadiquement) et regroup√©es par plusieurs valeurs dans un seul paquet TCP.  Ces protocoles sont IEC-60870-5-104 et OPC UA.  ModBus-TCP convient √©galement, il n'y a pas de transfert de changement, mais s'il n'y a pas beaucoup de donn√©es, ils peuvent √™tre regroup√©s dans un seul paquet.  Ce serait bien d'avoir une sorte de contr√¥leur qui peut √™tre accroch√© sur un rail DIN, y connecter des appareils via RS-485 et transf√©rer des donn√©es via Ethernet au syst√®me SCADA. <br><br>  En g√©n√©ral, il existe des passerelles mat√©rielles en nombre consid√©rable.  Mais sous la forme de solutions indivisibles toutes faites.  Tout en un.  Et je n'aime pas vraiment √ßa.  Une fois, j'avais besoin d'une passerelle pour convertir les protocoles des compteurs SET-4TM en OPC UA avec six ports RS-485 et deux Ethernet.  Un fabricant a une passerelle qui prend en charge les protocoles de communication n√©cessaires, mais peu de ports RS-485, l'autre a le bon nombre de ports RS-485, mais il n'y a pas deux ports Ethernet.  Le troisi√®me a deux ports Ethernet, mais pas tous les protocoles de communication.  Le quatri√®me a presque tout, mais il n'y a pas d'OPC UA, disponible √† bord de l'IEC-60870-5-104 ou ModBus-TCP n√©cessite un serveur OPC pour ces protocoles. <br><br>  Et comme ce serait merveilleux: acheter un contr√¥leur ou un mini-PC avec OS d'un fabricant.  Achetez un logiciel pour le contr√¥leur d'un autre.  Si un fabricant de logiciels ne prend pas en charge quelque chose, achetez l'un des logiciels d'un autre, combinez les composants logiciels via une interface logicielle standard.  Il semblerait qu'ici c'est un bel avenir! <br><br>  C'est pourquoi les passerelles de protocole sont utilis√©es moins fr√©quemment que le serveur OPC et l'ensemble de convertisseurs Ethernet vers RS-485 en raison de leur indivisibilit√© dans les composants. <br><br>  L'une des raisons pour lesquelles SCADA pour Linux est sous-d√©velopp√©: SCADA est disponible, peu de protocoles d'√©change y sont pris en charge et il n'y a pas de serveurs OPC pour la communication avec l'√©quipement.  SCADA laisse l'int√©grateur un √† un avec le mat√©riel. <br><br>  Le lecteur peut d√©j√† poser une question: que pouvez-vous offrir?  Qu'est-ce qui est d√©j√† l√†?  Il existe des serveurs OPC UA pour Linux pour les protocoles suivants: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CEI 60870-5-104;</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CEI 60870-5-101;</a> </li><li>  Compteurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mercury 230, 231, 233, 234, 236</a> ; </li><li>  Compteurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">-4, -3, -4</a> ; </li><li>  Compteurs d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©nergie;</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SNMP</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MQTT</a> ; </li><li>  Compteurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mercury 200</a> . </li></ul><br>  Afin de transmettre des donn√©es au niveau sup√©rieur non seulement via le protocole OPC UA, les ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OPC UA to Modbus Converter and IEC 60870-5-104</a> ¬ª ont √©t√© cr√©√©s.  En plus de la fonction de transfert de donn√©es de ces protocoles, le ¬´Converter¬ª poss√®de un serveur Web int√©gr√©.  √Ä l'aide d'un √©diteur sp√©cial, vous pouvez dessiner un diagramme, afficher les valeurs des balises dessus, puis l'ouvrir dans un navigateur.  Il s'av√®re que le mini-SCADA directement dans le contr√¥leur.  Comment fonctionne l'animation du circuit, j'ai d√©j√† √©crit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , √† propos de l'√©diteur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  √Ä l'avenir, ¬´OPC UA to MQTT Converter¬ª est pr√©vu. <br><br>  Les serveurs et convertisseurs OPC UA fonctionnent sur les architectures x64, ARMv7 et AARCH64. <br>  Ainsi, pour le mat√©riel, vous pouvez utiliser √† la fois des solutions √©prouv√©es bas√©es sur des mini-ordinateurs industriels et toutes sortes de mini-ordinateurs ARM "compatibles raspberry pi".  Comment installer et configurer le logiciel avec des exemples peut √™tre lu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  En g√©n√©ral, la structure du complexe ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/4w/my/rr/4wmyrra7y9xz2iah4sthdq_mlyy.png" alt="image"><br><br>  Le syst√®me est √©volutif.  Les composants n√©cessaires uniquement √† la r√©solution du probl√®me actuel sont utilis√©s. <br><br>  En utilisant le serveur OPC UA, notre sch√©ma est transform√©: <br><br><img src="https://habrastorage.org/webt/g4/bp/nt/g4bpnttzmoq5fxjadms0qssfwua.png" alt="image"><br><br>  Nous avons ce qui suit: <br><br><ul><li>  Le serveur OPC UA collecte les donn√©es des appareils via RS-485 sans d√©lai important entre les demandes; </li><li>  Les donn√©es dans SCADA sont √©mises en plusieurs morceaux dans un paquet TCP pour modification; </li><li>  Vous pouvez connecter plusieurs postes de travail √©galement configur√©s au serveur OPC UA.  Utile si une duplication est n√©cessaire. </li></ul><br>  Ainsi, au lieu d'un ensemble de serveur OPC et de ¬´convertisseur Ethernet vers RS-485¬ª, nous obtenons un appareil qui combine leurs fonctionnalit√©s.  J'aime plus ce sch√©ma.  Et vous? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433282/">https://habr.com/ru/post/fr433282/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433272/index.html">Entretien avec David Gobel</a></li>
<li><a href="../fr433274/index.html">Oleg Dokuka √† propos du d√©veloppement r√©actif sur jug.msk.ru</a></li>
<li><a href="../fr433276/index.html">√Ä propos des avantages de l'int√©gration de CSS dans JS</a></li>
<li><a href="../fr433278/index.html">Programmation WebGL-wind et GPU. Conf√©rence √† FrontTalks 2018</a></li>
<li><a href="../fr433280/index.html">Conf√©rence DEFCON 18. Trollim Reverse Engineering Using Mathematics</a></li>
<li><a href="../fr433286/index.html">10 r√©unions et hackathons informatiques les plus proches √† Moscou</a></li>
<li><a href="../fr433288/index.html">S√©curit√© Web: Introduction √† HTTP</a></li>
<li><a href="../fr433292/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 279 (du 10 au 16 d√©cembre)</a></li>
<li><a href="../fr433294/index.html">Quelques recommandations de travail d'√©quipe simples</a></li>
<li><a href="../fr433296/index.html">Gestion financi√®re dans une entreprise informatique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>