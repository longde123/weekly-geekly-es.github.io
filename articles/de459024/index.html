<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÖüèª ü•å ü§∏üèº Wie wir die Great Chinese Firewall durchbohrt haben (Teil 3) üêá ü§ôüèº üîü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo! 
 Alle guten Geschichten enden. Und unsere Geschichte dar√ºber, wie wir eine L√∂sung f√ºr den schnellen Durchgang der chinesischen Firewall gefund...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir die Great Chinese Firewall durchbohrt haben (Teil 3)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/semrush/blog/459024/"><p>  Hallo! <br>  Alle guten Geschichten enden.  Und unsere Geschichte dar√ºber, wie wir eine L√∂sung f√ºr den schnellen Durchgang der chinesischen Firewall gefunden haben, ist keine Ausnahme.  Daher beeile ich mich, Ihnen den letzten, <strong>letzten Teil</strong> zu diesem Thema mitzuteilen. </p><br><p>  Im vorherigen Teil haben wir √ºber viele von uns erfundene Pr√ºfst√§nde und deren Ergebnisse gesprochen.  Und wir haben uns darauf geeinigt, dass es sch√∂n w√§re, ein <strong>CDN</strong> hinzuzuf√ºgen <strong>!</strong>  <s>f√ºr die Viskosit√§t</s> in unseren Kreislauf. </p><br><p>  Ich werde Ihnen erz√§hlen, wie wir Alibaba Cloud CDN, Tencent Cloud CDN und Akamai getestet haben und was ich daraus gemacht habe.  Und nat√ºrlich zusammenfassend. </p><br><img src="https://habrastorage.org/webt/8n/xq/ur/8nxqurgug_z7ij3eqorfl5hdm0y.png"><a name="habracut"></a><br><h2 id="alibaba-cloud-cdn">  Alibaba Cloud CDN </h2><br><p>  Wir werden in der Alibaba Cloud gehostet und verwenden IPSEC und CEN von ihnen.  Es w√§re logisch, zuerst ihre L√∂sungen auszuprobieren. </p><br><p>  Alibaba Cloud bietet zwei Arten von Produkten an, die zu uns passen k√∂nnen: <strong>CDN</strong> und <strong>DCDN</strong> .  Die erste Option ist ein klassisches CDN f√ºr eine bestimmte Domain (Subdomain).  Die zweite Option steht f√ºr <em>Dynamic Route for CDN</em> (ich nenne es Dynamic CDN). Sie kann im Full-Site-Modus (f√ºr Platzhalterdom√§nen) aktiviert werden. Sie speichert auch die Statik zwischen und beschleunigt den dynamischen Inhalt auf sich selbst. Das hei√üt, die Seitendynamik wird auch schnell geladen Netzwerkanbieter.  Dies ist f√ºr uns wichtig, da unsere Website im Grunde genommen dynamisch ist, viele Subdomains verwendet und es bequemer ist, CDN einmal f√ºr den "Stern" zu konfigurieren - * .semrushchina.cn. </p><br><p>  Wir haben dieses Produkt bereits in fr√ºheren Phasen unseres chinesischen Projekts gesehen, aber es hat immer noch nicht funktioniert, und die Entwickler haben versprochen, dass das Produkt jetzt allen Kunden zur Verf√ºgung steht.  Und er wurde. </p><br><p>  In DCDN k√∂nnen Sie: </p><br><ul><li>  Konfigurieren Sie die SSL-Beendigung mit Ihrem Zertifikat. </li><li>  dynamische Inhaltsbeschleunigung aktivieren, </li><li>  Caching von statischen Dateien flexibel konfigurieren, </li><li>  Cache bereinigen, </li><li>  werfen Web-Sockets, </li><li>  Aktivieren Sie die Komprimierung und sogar HTML Beautifier. </li></ul><br><p>  Im Allgemeinen ist alles wie bei Erwachsenen und gro√üen CDN-Anbietern. </p><br><p>  Nachdem Origin (der Ort, an dem sich die CDN- <em>Edgeserver befinden</em> ) angegeben ist, muss noch ein CNAME f√ºr das Sternchen erstellt werden, <em>der</em> mit <em>all.semrushchina.cn.w.kunluncan.com</em> (dieser CNAME wurde in der Alibaba Cloud-Konsole abgerufen) und CDN <em>verkn√ºpft ist</em> wird funktionieren. </p><br><p>  Nach den Testergebnissen hat uns dieses CDN sehr geholfen.  Statistiken sind unten angegeben. </p><br><div class="scrollable-table"><table><thead><tr><th>  L√∂sung </th><th>  Betriebszeit </th><th>  Median </th><th>  75 Perzentil </th><th>  95 Perzentil </th></tr></thead><tbody><tr><td>  Cloudflare </td><td>  86.6 </td><td>  18s </td><td>  30er Jahre </td><td>  60er Jahre </td></tr><tr><td>  IPsec </td><td>  99,79 </td><td>  18s </td><td>  21s </td><td>  30er Jahre </td></tr><tr><td>  Cen </td><td>  99,75 </td><td>  16s </td><td>  21s </td><td>  27s </td></tr><tr><td>  CEN / IPsec + GLB </td><td>  99,79 </td><td>  13s </td><td>  16s </td><td>  25s </td></tr><tr><td>  <strong>Ali CDN + CEN / IPsec + GLB</strong> </td><td>  <strong>99,75</strong> </td><td>  <strong>10s</strong> </td><td>  <strong>12.8s</strong> </td><td>  <strong>17.3s</strong> </td></tr></tbody></table></div><br><p>  Dies sind sehr gute Ergebnisse, insbesondere wenn wir sie mit den Anfangszahlen vergleichen.  Wir wussten jedoch, dass der Browsertest der amerikanischen Version unserer Website www.semrush.com in den USA durchschnittlich 8,3 Sekunden lang lief (ein sehr ungef√§hrer Wert).  Es gibt viel zu streben.  Dar√ºber hinaus gab es CDN-Anbieter, die an Tests interessiert waren. </p><br><p> Wir wechseln also reibungslos zu einem anderen Riesen auf dem chinesischen Markt - <strong>Tencent</strong> . </p><br><h2 id="tencent-cloud">  Tencent Wolke </h2><br><p>  Tencent entwickelt nur seine Cloud - dies zeigt sich in einer kleinen Anzahl von Produkten.  Im Laufe der Nutzung wollten wir nicht nur das CDN, sondern auch die gesamte Netzwerkinfrastruktur testen: </p><br><ul><li>  Haben sie etwas √§hnliches wie CEN? </li><li>  Wie funktioniert IPSEC f√ºr sie?  Ist es schnell, was ist Betriebszeit? </li><li>  Haben sie Anycast? </li></ul><br><img src="https://habrastorage.org/webt/jf/ci/aa/jfciaauffli76osi1qyzel6vepq.jpeg"><br><p>  Wir werden diese Fragen separat analysieren. </p><br><h4 id="analog-cen">  Analoges CEN </h4><br><p>  Tencent verf√ºgt √ºber ein <strong>Cloud Connect Network</strong> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CCN</a> ) -Produkt, mit dem Sie VPCs aus verschiedenen Regionen, einschlie√ülich Regionen innerhalb und au√üerhalb Chinas, miteinander verbinden k√∂nnen.  Das Produkt befindet sich jetzt in der internen Beta und Sie m√ºssen ein Ticket mit der Aufforderung erstellen, eine Verbindung herzustellen.  Durch die Unterst√ºtzung haben wir erfahren, dass globale Konten (nicht √ºber chinesische Staatsb√ºrger und nicht juristische Personen) nicht am Beta-Testprogramm teilnehmen k√∂nnen und im Allgemeinen die Region innerhalb Chinas mit der Region au√üerhalb verbinden.  1: 0 zugunsten von Ali Cloud </p><br><h4 id="ipsec">  IPSEC </h4><br><p>  Die s√ºdlichste Region von Tencent ist <em>Guangzhou</em> .  Wir haben einen Tunnel gebaut und ihn im GCP mit der Region Hongkong verbunden (damals war diese Region bereits verf√ºgbar).  Gleichzeitig hoben sie den zweiten Tunnel nach Ali Cloud von Shenzhen nach Hongkong.  Es stellte sich heraus, dass Hongkong √ºber das Tencent-Latenznetz im Allgemeinen besser ist (10 ms) als von Shenzhen √ºber Hongkong nach Ali (120 ms - was?).  Dies beschleunigte jedoch nicht die Arbeit des Standorts, der darauf abzielte, Tencent und diesen Tunnel zu durcharbeiten, was an sich eine erstaunliche Tatsache war und erneut Folgendes bewies: Latenz - f√ºr China ist dies kein Indikator, auf den Sie bei der Entwicklung einer L√∂sung f√ºr die √úbergabe der Chinesen wirklich achten sollten Firewall. </p><br><h4 id="anycast-internet-acceleration">  Anycast Internet-Beschleunigung </h4><br><p>  Ein weiteres Produkt, mit dem Sie Anycast-IP verarbeiten k√∂nnen, ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AIA</a> .  Es ist aber auch f√ºr globale Konten nicht zug√§nglich, daher werde ich nichts dar√ºber erz√§hlen, aber zu wissen, dass ein solches Produkt existiert, kann n√ºtzlich sein. </p><br><p>  Der CDN-Test zeigte jedoch recht interessante Ergebnisse.  Das CDN von Tencent kann nicht auf einer vollst√§ndigen Site aktiviert werden, sondern nur auf bestimmten Dom√§nen.  Wir haben Domains und haben Datenverkehr auf ihnen gestartet: </p><br><img src="https://habrastorage.org/webt/4f/hv/ca/4fhvcabi1rmeqmircvjjlv1dhpa.png"><br><p>  Es stellte sich heraus, dass dieses CDN die folgende Funktion hat: <strong>Grenz√ºberschreitende Verkehrsoptimierung</strong> .  Diese Funktion sollte die Kosten senken, wenn Datenverkehr durch die chinesische Firewall flie√üt.  Als <em>Ursprung</em> wurde die IP-Adresse von Google GLB (GLB anycast) angegeben.  Deshalb wollten wir die Architektur des Projekts vereinfachen. </p><br><p>  Die Ergebnisse waren sehr gut - auf der Ebene von Ali Cloud CDN und an einigen Stellen sogar noch besser.  Dies ist √ºberraschend, denn wenn die Tests erfolgreich sind, k√∂nnen Sie einen erheblichen Teil der Infrastruktur, Tunnel, CEN, virtuellen Maschinen usw. aufgeben. </p><br><p>  Wir waren nicht lange gl√ºcklich, denn das Problem wurde aufgedeckt: Die Tests bei Catchpoint wurden f√ºr den Internetprovider China Mobile gef√§lscht.  Von jedem Ort aus haben wir √ºber Tencent's CDN eine Auszeit bekommen.  Die Korrespondenz mit dem technischen Support f√ºhrte zu nichts.  Ungef√§hr einen Tag lang haben wir versucht, dieses Problem zu l√∂sen, aber es wurde nichts daraus. </p><br><p>  Ich war zu dieser Zeit in China, konnte jedoch kein √∂ffentliches WLAN im Netzwerk dieses Anbieters finden, um das Problem pers√∂nlich zu √ºberpr√ºfen.  Ansonsten sah alles schnell und gut aus. <br>  Aufgrund der Tatsache, dass China Mobile einer der drei gr√∂√üten Betreiber ist, mussten wir den Datenverkehr an Ali CDN zur√ºckgeben. <br>  Im Allgemeinen war dies jedoch eine ziemlich interessante L√∂sung, die l√§ngere Tests und Fehlerbehebungen f√ºr dieses Problem verdient. </p><br><h2 id="akamai">  Akamai </h2><br><p>  Der letzte CDN-Anbieter, den wir getestet haben, ist <strong>Akamai</strong> .  Dies ist ein riesiger Anbieter, der ein eigenes Netzwerk in China hat.  Nat√ºrlich konnten wir nicht an ihm vorbei kommen. </p><br><img src="https://habrastorage.org/webt/vj/pd/am/vjpdamb4wn9kdn_1vlvepokaeb4.png"><br><p>  Von Anfang an haben wir mit Akamai eine Testphase vereinbart, damit wir die Domain wechseln und sehen k√∂nnen, wie sie in ihrem Netzwerk funktioniert.  Ich werde das Ergebnis aller Tests in Form von "Was mir gefallen hat" und "Was mir nicht gefallen hat" sowie die Testergebnisse beschreiben. </p><br><p>  <strong>Was hat dir gefallen:</strong> </p><br><ul><li>  Die Jungs von Akamai haben in allen Angelegenheiten sehr geholfen und uns in allen Testphasen begleitet.  St√§ndig versuchen, etwas auf ihrer Seite zu verbessern.  Sie gaben gute technische Ratschl√§ge. </li><li>  Akamai l√§uft √ºber Ali Cloud CDN etwa 10-15% langsamer als unsere L√∂sung.  Es ist beeindruckend, dass wir in Origin die GLB-IP-Adresse f√ºr Akamai angegeben haben, dh, der Datenverkehr hat unsere L√∂sung nicht durchlaufen (Sie k√∂nnen m√∂glicherweise einen Teil der Infrastruktur aufgeben).  Die Testergebnisse zeigten jedoch, dass diese L√∂sung schlechter ist als unsere aktuelle Version (Vergleichsergebnisse unten). </li><li>  Getestet sowohl Origin GLB als auch Origin in China.  Beide Optionen sind ungef√§hr gleich. </li><li>  Es gibt eine <em>sichere Route</em> (automatische Routing-Optimierung).  Sie k√∂nnen das Testobjekt auf Origin hosten, und der Akamai-Server Edge versucht, es aufzunehmen (regul√§res GET).  F√ºr diese Anforderungen werden Geschwindigkeit und andere Metriken gemessen, auf deren Grundlage das Akamai-Netzwerk die Routen so optimiert, dass der Verkehr f√ºr unsere Site schneller wird, und es ist ersichtlich, dass die Einbeziehung dieser Funktion einen gro√üen Einfluss auf die Geschwindigkeit der Site hatte. </li><li>  Die Versionierung der Konfiguration in der Weboberfl√§che ist cool.  Sie k√∂nnen Versionen vergleichen, siehe Diff.  Vorherige Versionen anzeigen. </li><li>  Sie k√∂nnen die neue Version zuerst nur im Akamai Staging-Netzwerk einf√ºhren - im selben Netzwerk wie die Produktion, nur auf diese Weise sind echte Benutzer nicht betroffen.  F√ºr diesen Test m√ºssen Sie DNS-Eintr√§ge auf dem lokalen Computer f√§lschen. </li><li>  Sehr schnelle Download-Geschwindigkeit durch ihr Netzwerk von gro√üen Statiken und anscheinend von allen anderen Dateien.  Eine Datei aus dem "kalten" Cache wird um ein Vielfaches schneller als dieselbe Datei aus dem "kalten" Ali-CDN-Cache entnommen.  Aus dem "hei√üen" Cache ist die Geschwindigkeit bereits plus oder minus gleich. </li></ul><br><p>  <strong>Ali CDN Test:</strong> </p><br><pre><code class="bash hljs">root@shenzhen1:~<span class="hljs-comment"><span class="hljs-comment"># curl -o /dev/null -w@curl_time https://en.semrushchina.cn/my_reports/build/scripts/simpleInit.js?v=1551879212 % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 5757k 0 5757k 0 0 513k 0 --:--:-- 0:00:11 --:--:-- 526k time_namelookup: 0.004286 time_connect: 0.030107 time_appconnect: 0.117525 time_pretransfer: 0.117606 time_redirect: 0.000000 time_starttransfer: 0.840348 ---------- time_total: 11.208119 ---------- size_download: 5895467 Bytes speed_download: 525999.000B/s</span></span></code> </pre> <br><p>  <strong>Akamai-Test:</strong> </p><br><pre> <code class="bash hljs">root@shenzhen1:~<span class="hljs-comment"><span class="hljs-comment"># curl -o /dev/null -w@curl_time https://www.semrushchina.cn/my_reports/build/scripts/simpleInit.js?v=1551879212 % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 5757k 0 5757k 0 0 1824k 0 --:--:-- 0:00:03 --:--:-- 1825k time_namelookup: 0.509005 time_connect: 0.528261 time_appconnect: 0.577235 time_pretransfer: 0.577324 time_redirect: 0.000000 time_starttransfer: 1.327013 ---------- time_total: 3.154850 ---------- size_download: 5895467 Bytes speed_download: 1868699.000B/s</span></span></code> </pre> <br><p>  Wir haben festgestellt, dass die Situation aus dem obigen Beispiel von verschiedenen Faktoren abh√§ngt.  Zum Zeitpunkt dieses Schreibens habe ich den Test erneut durchgef√ºhrt.  Die Ergebnisse f√ºr beide Plattformen waren ungef√§hr gleich.  Dies zeigt uns, dass sich das Internet in China selbst f√ºr gro√üe Betreiber und Cloud-Anbieter von Zeit zu Zeit anders verh√§lt. </p><br><p>  Ich werde Akamai im vorherigen Absatz ein gro√ües Plus hinzuf√ºgen: Wenn Ali solche Blitze mit hoher Leistung und sehr geringer Leistung sehen kann (dies gilt f√ºr Ali CDN, Ali CEN und Ali IPSEC), dann bei Akamai jedes Mal, egal wie ich ihr Netzwerk teste arbeitet stabil. <br>  Akamai hat wirklich viel Abdeckung in China und arbeitet mit vielen Anbietern zusammen. </p><br><p>  <strong>Was nicht gefallen hat:</strong> </p><br><ul><li>  Ich mag das Webinterface und das Arbeitsschema nicht - diese sind Null.  Aber im Grunde gew√∂hnt man sich (wahrscheinlich) daran. </li><li>  Testergebnisse sind schlechter als unsere Website. </li><li>  W√§hrend der Tests treten mehr Fehler auf als auf unserer Website (Verf√ºgbarkeit unten). </li><li>  In China gibt es keine DNS-Server.  Von hier aus gibt es viele Fehler in Tests aufgrund des Zeitlimits f√ºr die DNS-Aufl√∂sung. </li><li>  <em>Geben</em> Sie ihre IP-Bereiche nicht an -&gt; Es gibt keine M√∂glichkeit, das richtige <em>set_real_ip_from</em> auf unseren Servern zu registrieren. </li></ul><br><p>  Metriken (~ 3626 L√§ufe; alle Metriken au√üer Uptime in ms; Statistiken f√ºr einen bestimmten Zeitraum): </p><br><div class="scrollable-table"><table><thead><tr><th>  CDN-Anbieter </th><th>  Median </th><th>  75% </th><th>  95% </th><th>  Antwort </th><th>  Antwort auf die Webseite </th><th>  Betriebszeit </th><th>  DNS </th><th>  Verbinden </th><th>  Warten Sie </th><th>  Laden </th><th>  SSL </th></tr></thead><tbody><tr><td>  Ali CDN </td><td>  9195 </td><td>  10749 </td><td>  17489 </td><td>  1,715 </td><td>  10.745 </td><td>  99,531 </td><td>  57 </td><td>  17 </td><td>  927 </td><td>  479 </td><td>  200 </td></tr><tr><td>  Akamai </td><td>  9783 </td><td>  11887 </td><td>  19888 </td><td>  2.352 </td><td>  11.550 </td><td>  98.980 </td><td>  424 </td><td>  91 </td><td>  1408 </td><td>  381 </td><td>  50 </td></tr></tbody></table></div><br><p>  Perzentilverteilung (in ms): </p><br><div class="scrollable-table"><table><thead><tr><th>  Perzentil </th><th>  Akamai </th><th>  Ali CDN </th></tr></thead><tbody><tr><td>  10 </td><td>  7,092 </td><td>  6,942 </td></tr><tr><td>  20 </td><td>  7,775 </td><td>  7,583 </td></tr><tr><td>  30 </td><td>  8,446 </td><td>  8,092 </td></tr><tr><td>  40 </td><td>  9,146 </td><td>  8,596 </td></tr><tr><td>  50 </td><td>  9,783 </td><td>  9,195 </td></tr><tr><td>  60 </td><td>  10.497 </td><td>  9.770 </td></tr><tr><td>  70 </td><td>  11.371 </td><td>  10,383 </td></tr><tr><td>  80 </td><td>  12.670 </td><td>  11.255 </td></tr><tr><td>  90 </td><td>  15.882 </td><td>  13.165 </td></tr><tr><td>  100 </td><td>  91.592 </td><td>  91.596 </td></tr></tbody></table></div><br><p>  Die Schlussfolgerung lautet: Die Option mit Akamai ist realisierbar, bietet jedoch nicht die gleichen Stabilit√§ts- und Geschwindigkeitsindikatoren wie unsere eigene L√∂sung in Verbindung mit Ali CDN. </p><br><h2 id="malenkie-zametki">  Kleine Notizen </h2><br><p>  Einige Punkte waren nicht in der Geschichte enthalten, aber ich m√∂chte auch dar√ºber schreiben. </p><br><h3 id="pekin--tokio-i-gonkong">  Peking + Tokio und Hong Kong </h3><br><p>  Wie oben erw√§hnt, haben wir den IPSEC-Tunnel nach Hongkong (HK) getestet.  Wir haben CEN aber auch vor HK getestet.  Es kostet etwas billiger und es war interessant, wie es zwischen St√§dten mit einer Entfernung von ~ 100 km funktionieren wird.  Es stellte sich als interessant heraus, dass die Latenz zwischen diesen St√§dten 100 ms h√∂her ist als in unserer Originalversion (nach Taiwan).  Geschwindigkeit und Stabilit√§t waren auch f√ºr Taiwan besser.  Infolgedessen haben wir HK als Backup-IPSEC-Region verlassen. </p><br><p>  Au√üerdem haben wir versucht, eine solche Installation zu erstellen: </p><br><ul><li>  Kundenbeendigung in Peking, </li><li>  IPSEC und CEN nach Tokio, </li><li>  In Ali wurde das CDN als Ursprungsserver in Peking aufgef√ºhrt. </li></ul><br><p>  Dieses Schema war nicht so stabil, obwohl es in Bezug auf die Geschwindigkeit insgesamt unserer L√∂sung nicht unterlegen war.  Was den Tunnel betrifft, so sah ich sogar f√ºr CEN, das eigentlich stabil sein sollte, periodische Abf√§lle.  Deshalb sind wir zum alten Schema zur√ºckgekehrt und haben diese Inszenierung abgebaut. </p><br><p>  Nachfolgend finden Sie die Statistiken zur Latenz zwischen verschiedenen Regionen auf verschiedenen Kan√§len.  Vielleicht interessiert sich jemand daf√ºr. </p><br><p>  <em>IPsec</em> <br>  Ali cn-Peking &lt;-&gt; GCP Asien-Nordosten1 - 193 ms <br>  Ali cn-shenzhen &lt;-&gt; GCP Asien-Ost2 - 91 ms <br>  Ali cn-shenzhen &lt;-&gt; GCP us-east4 - 200ms </p><br><p>  <em>Cen</em> <br>  Ali cn-beijing &lt;---&gt; Ali ap-nordost-1 - 54ms (!) <br>  Ali cn-shenzhen &lt;---&gt; Ali cn-hongkong - 6 ms (!) <br>  Ali cn-shenzhen &lt;---&gt; Ali us-east1 - 216ms </p><br><h3 id="obschaya-informaciya-pro-internet-v-kitae">  Allgemeine Informationen zum Internet in China </h3><br><p>  Als Erg√§nzung zu den Problemen mit dem Internet, die ganz am Anfang im ersten Teil des Artikels beschrieben wurden. </p><br><ul><li>  Das Internet in China ist innen ziemlich schnell. <br><ul><li>  Die Schlussfolgerung wird auf der Grundlage des Testens √∂ffentlicher Wi-Fi-Netzwerke an verschiedenen Orten gezogen, an denen diese Netzwerke von einer gro√üen Anzahl von Personen verwendet werden. </li><li>  Die Download- und Upload-Geschwindigkeit f√ºr Server in China betrug etwa 20 Mbit / s bzw. 5-10 Mbit / s. </li><li>  Die Geschwindigkeit zu Servern au√üerhalb Chinas ist mit weniger als 1 Mbit / s einfach miserabel. </li></ul></li><li>  Das Internet in China ist nicht sehr stabil. <br><ul><li>  Manchmal k√∂nnen Websites schnell ge√∂ffnet werden, manchmal langsam (zur gleichen Tageszeit an verschiedenen Tagen), sofern sich die Konfiguration nicht √§ndert.  Wir haben dies am Beispiel von semrushchina.cn beobachtet.  Dies kann Ali CDN zugeschrieben werden, das auch so und so funktioniert, abh√§ngig von der Tageszeit, der Position der Sterne usw. </li></ul></li><li>  Mobiles Internet ist fast √ºberall 4G oder 4G +.  F√§nge in der U-Bahn, Aufz√ºge - kurz gesagt, √ºberall. </li><li>  Die Tatsache, dass chinesische Benutzer nur Domains in der .cn-Zone vertrauen, ist ein Mythos.  Wir haben dies direkt von den Benutzern gelernt. <br><ul><li>  Sie k√∂nnen sehen, wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://baidu.cn</a> auf www.baidu.com umleitet (auch auf dem chinesischen Festland). </li></ul></li><li>  Viele Ressourcen sind wirklich blockiert.  Primitiv: google.com, Facebook, Twitter.  Aber viele Google-Ressourcen funktionieren (nat√ºrlich werden nicht alle Wi-Fi und VPNs gleichzeitig verwendet (auch auf der Routerseite ist das sicher). </li><li>  Viele ‚Äûtechnische‚Äú Dom√§nen blockierter Unternehmen funktionieren ebenfalls.  Dies bedeutet, dass Sie nicht immer r√ºcksichtslos alle Google- und anderen scheinbar blockierten Ressourcen ausschneiden sollten.  Sie m√ºssen nach einer Liste verbotener Domains suchen. </li><li>  Sie haben nur drei Haupt-Internetanbieter: China Unicom, China Telecom, China Mobile.  Es gibt noch kleinere, aber ihr Marktanteil ist unbedeutend </li></ul><br><h3 id="bonus-itogovaya-shema-resheniya">  Bonus: endg√ºltiges Entscheidungsschema </h3><br><img src="https://habrastorage.org/webt/jr/qe/uq/jrqeuqrsssdnjbnkp43rqjm29ro.png"><br><h2 id="itog">  Zusammenfassung </h2><br><p>  Seit Projektbeginn ist ein Jahr vergangen.  Wir haben zun√§chst gesagt, dass unsere Website sich im Prinzip weigerte, normal aus China zu arbeiten, aber einfach GET Curl dauerte 5,5 Sekunden. </p><br><p>  Dann mit solchen Indikatoren in der ersten Entscheidung (Cloudflare): </p><br><div class="scrollable-table"><table><thead><tr><th>  L√∂sung </th><th>  Betriebszeit </th><th>  Median </th><th>  75 Perzentil </th><th>  95 Perzentil </th></tr></thead><tbody><tr><td>  Cloudflare </td><td>  86.6 </td><td>  18s </td><td>  30er Jahre </td><td>  60er Jahre </td></tr></tbody></table></div><br><p>  Als Ergebnis kamen wir zu folgenden Ergebnissen (Statistiken f√ºr den letzten Monat): </p><br><div class="scrollable-table"><table><thead><tr><th>  L√∂sung </th><th>  Betriebszeit </th><th>  Median </th><th>  75 Perzentil </th><th>  95 Perzentil </th></tr></thead><tbody><tr><td>  Ali CDN + CEN / IPsec + GLB </td><td>  99,86 </td><td>  8,8s </td><td>  9,5s </td><td>  13.7s </td></tr></tbody></table></div><br><p>  Wie Sie sehen, wurde die Verf√ºgbarkeit zu 100% noch nicht erreicht, aber wir werden uns etwas einfallen lassen und Ihnen dann in einem neuen Artikel √ºber die Ergebnisse berichten :) </p><br><p>  F√ºr den, der alle drei Teile bis zum Ende gelesen hat - Respekt.  Ich hoffe, Sie waren alle genauso interessiert wie ich, als ich das tat. </p><br><h3 id="ps-predyduschie-chasti">  PS Vorherige Teile </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de459024/">https://habr.com/ru/post/de459024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de459012/index.html">Erstellen einer Anwendung f√ºr Bitrix24 von Grund auf neu</a></li>
<li><a href="../de459014/index.html">Verlassen Sie Ihre Komfortzone: von NodeJS bis Dlang</a></li>
<li><a href="../de459018/index.html">Desktop-Rollenspiel-Taktik</a></li>
<li><a href="../de459020/index.html">Warum DFSR einige Dateien nicht repliziert und wie man damit umgeht</a></li>
<li><a href="../de459022/index.html">Video-Kommunikation von Auge zu Auge: Versuche, das Problem des mangelnden Augenkontakts zu l√∂sen</a></li>
<li><a href="../de459028/index.html">Statische Speicherzuordnung in Mikrocontrollern</a></li>
<li><a href="../de459030/index.html">Ein Blick in die Black Box - ein neues System vom MIT zeigt, wie Algorithmen f√ºr maschinelles Lernen funktionieren</a></li>
<li><a href="../de459034/index.html">Einige einfache, aber n√ºtzliche Tipps f√ºr die Arbeit mit Gettern in Vuex</a></li>
<li><a href="../de459038/index.html">Die Sprachf√ºhrung der Kamera ist zug√§nglicher geworden - die universelle SmartCam A12 Voice Tracking-L√∂sung</a></li>
<li><a href="../de459046/index.html">Unabh√§ngige Implementierung (Existenznachweis) in 2 Schritten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>