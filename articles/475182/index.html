<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽 ♓️ 🍣 Cómo decidí una competencia de aprendizaje automático similar a los datos 🐰 🐬 💤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr Recientemente hubo una competencia de Tinkoff y McKinsey. La competencia se llevó a cabo en dos etapas: la primera: calificación, en formato...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cómo decidí una competencia de aprendizaje automático similar a los datos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ods/blog/475182/"><p><img src="https://habrastorage.org/webt/dn/c7/fl/dnc7flggylqet0ug46a30_sm-pk.jpeg"></p><br><p>  Hola Habr  Recientemente hubo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una</a> competencia de Tinkoff y McKinsey.  La competencia se llevó a cabo en dos etapas: la primera: calificación, en formato kaggle, es decir,  enviar predicciones: obtenga una evaluación de la calidad de la predicción;  El ganador es el que tiene la mejor puntuación.  El segundo es el hackathon in situ en Moscú, que alberga a los 20 mejores equipos de la primera etapa.  En este artículo hablaré sobre la etapa de calificación, donde logré tomar el primer lugar y ganar el MacBook.  El equipo en la clasificación se llamaba "los hijos de Lesha". </p><br><p>  La competencia se realizó del 19 de septiembre al 12 de octubre.  Empecé a resolver exactamente una semana antes del final y decidí casi a tiempo completo. </p><br><h2 id="kratkoe-opisanie-sorevnovaniya">  Breve descripción de la competencia: </h2><br><p>  En el verano, aparecieron historias en la aplicación bancaria Tinkoff (como en Instagram).  En la historia, puede reaccionar como, no me gusta, saltar o ver hasta el final.  La tarea es predecir la reacción del usuario a la historia. </p><br><p>  La competencia es principalmente tabular, pero las historias en sí tienen texto e imágenes. </p><a name="habracut"></a><br><h2 id="plan-rasskaza">  Plan de historia </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Métrica</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ingeniería de datos y características</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¿Qué problema resolvemos y cómo formar una predicción?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modelo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Características asesinas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modelo de optimización</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Observaciones interesantes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Predicciones de umbral</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Resultados de la competencia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lo que no funcionó</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conclusiones</a> </li></ul><br><p><img src="https://habrastorage.org/webt/j7/jr/7s/j7jr7saxveytzcbrxeplctbxzo8.jpeg"></p><br><h2 id="metrika-anchormetricsanchor">  Métrica <a name="metrics"></a></h2><br><p>  El pronóstico de reacción puede tomar un valor de -1 a 1 inclusive: cuanto más se acerca a 1, mayor es la probabilidad de obtener un me gusta.  Y con un valor de -1, es mejor eliminar esta historia de los ojos del usuario. </p><br><p>  Para verificar la precisión de las soluciones, se utiliza una fórmula, normalizada al máximo resultado posible: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{array}&amp;#xA0;{l}&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{weight&amp;#xA0;(event)}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;left&amp;#xA0;\&amp;#xA0;{\&amp;#xA0;begin&amp;#xA0;{array}&amp;#xA0;{ll}&amp;#xA0;{-&amp;#xA0;10}&amp;#xA0;&amp;amp;&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{dislike}}&amp;#xA0;\\&amp;#xA0;{-0.1}&amp;#xA0;&amp;amp;&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{skip}}&amp;#xA0;\\&amp;#xA0;{0.1}&amp;#xA0;&amp;amp;&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{view}}&amp;#xA0;\\&amp;#xA0;{0.5}&amp;#xA0;&amp;amp;&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{like}}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{array}&amp;#xA0;\&amp;#xA0;right.}&amp;#xA0;\\&amp;#xA0;[15pt]&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{M&amp;#xE9;trica}&amp;#xA0;\&amp;#xA0;left&amp;#xA0;(y&amp;#xA0;_&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{pred}}&amp;#xA0;\&amp;#xA0;right)&amp;#xA0;=&amp;#xA0;\&amp;#xA0;sum_&amp;#xA0;{i&amp;#xA0;=&amp;#xA0;1}&amp;#xA0;^&amp;#xA0;{n}&amp;#xA0;\&amp;#xA0;left&amp;#xA0;(\&amp;#xA0;text&amp;#xA0;{weight}&amp;#xA0;\&amp;#xA0;left&amp;#xA0;(\&amp;#xA0;text&amp;#xA0;{event}&amp;#xA0;_&amp;#xA0;{i}&amp;#xA0;\&amp;#xA0;right)&amp;#xA0;\&amp;#xA0;cdot&amp;#xA0;y&amp;#xA0;_&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{pred,}&amp;#xA0;i}&amp;#xA0;\&amp;#xA0;right)}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{array}</mtext></merror></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><span class="noError" aria-hidden="true" style="display: inline-block;">\&nbsp;begin&nbsp;{array}&nbsp;{l}&nbsp;{\&nbsp;text&nbsp;{weight&nbsp;(event)}&nbsp;=&nbsp;\&nbsp;left&nbsp;\&nbsp;{\&nbsp;begin&nbsp;{array}&nbsp;{ll}&nbsp;{-&nbsp;10}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{dislike}}&nbsp;\\&nbsp;{-0.1}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{skip}}&nbsp;\\&nbsp;{0.1}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{view}}&nbsp;\\&nbsp;{0.5}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{like}}&nbsp;\&nbsp;end&nbsp;{array}&nbsp;\&nbsp;right.}&nbsp;\\&nbsp;[15pt]&nbsp;{\&nbsp;text&nbsp;{Métrica}&nbsp;\&nbsp;left&nbsp;(y&nbsp;_&nbsp;{\&nbsp;text&nbsp;{pred}}&nbsp;\&nbsp;right)&nbsp;=&nbsp;\&nbsp;sum_&nbsp;{i&nbsp;=&nbsp;1}&nbsp;^&nbsp;{n}&nbsp;\&nbsp;left&nbsp;(\&nbsp;text&nbsp;{weight}&nbsp;\&nbsp;left&nbsp;(\&nbsp;text&nbsp;{event}&nbsp;_&nbsp;{i}&nbsp;\&nbsp;right)&nbsp;\&nbsp;cdot&nbsp;y&nbsp;_&nbsp;{\&nbsp;text&nbsp;{pred,}&nbsp;i}&nbsp;\&nbsp;right)}&nbsp;\&nbsp;end&nbsp;{array}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{array}&nbsp;{l}&nbsp;{\&nbsp;text&nbsp;{weight&nbsp;(event)}&nbsp;=&nbsp;\&nbsp;left&nbsp;\&nbsp;{\&nbsp;begin&nbsp;{array}&nbsp;{ll}&nbsp;{-&nbsp;10}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{dislike}}&nbsp;\\&nbsp;{-0.1}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{skip}}&nbsp;\\&nbsp;{0.1}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{view}}&nbsp;\\&nbsp;{0.5}&nbsp;&amp;&nbsp;{\&nbsp;text&nbsp;{like}}&nbsp;\&nbsp;end&nbsp;{array}&nbsp;\&nbsp;right.}&nbsp;\\&nbsp;[15pt]&nbsp;{\&nbsp;text&nbsp;{Métrica}&nbsp;\&nbsp;left&nbsp;(y&nbsp;_&nbsp;{\&nbsp;text&nbsp;{pred}}&nbsp;\&nbsp;right)&nbsp;=&nbsp;\&nbsp;sum_&nbsp;{i&nbsp;=&nbsp;1}&nbsp;^&nbsp;{n}&nbsp;\&nbsp;left&nbsp;(\&nbsp;text&nbsp;{weight}&nbsp;\&nbsp;left&nbsp;(\&nbsp;text&nbsp;{event}&nbsp;_&nbsp;{i}&nbsp;\&nbsp;right)&nbsp;\&nbsp;cdot&nbsp;y&nbsp;_&nbsp;{\&nbsp;text&nbsp;{pred,}&nbsp;i}&nbsp;\&nbsp;right)}&nbsp;\&nbsp;end&nbsp;{array}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ begin {array} {l} {\ text {weight (event)} = \ left \ {\ begin {array} {ll} {- 10} & {\ text {dislike}} \\ {-0.1} & {\ text {skip}} \\ {0.1} & {\ text {view}} \\ {0.5} & {\ text {like}} \ end {array} \ right.} \\ [15pt] {\ text {Métrica} \ left (y _ {\ text {pred}} \ right) = \ sum_ {i = 1} ^ {n} \ left (\ text {weight} \ left (\ text {event} _ {i} \ right) \ cdot y _ {\ text {pred,} i} \ right)} \ end {array} </script></p><br><h2 id="kakie-dannye-est-anchorfeanchor">  Qué datos hay: <a name="fe"></a></h2><br><ul><li>  Información básica del usuario </li><li>  Transacciones de usuario </li><li>  Información sobre la historia (json desde la cual puedes construirla) </li><li>  Historia de las reacciones de los usuarios a las historias. </li></ul><br><p>  A continuación, hablaré en detalle sobre cada dato, cómo lo procesé y qué características (en adelante denominadas características) extraje. </p><br><h2 id="informaciya-o-polzovatele">  Informacion de usuario </h2><br><p><img src="https://habrastorage.org/webt/8i/db/qy/8idbqykfjkcev60ercr-w4qptza.png"></p><br><p>  lo que es originalmente: </p><br><ul><li>  ID de usuario </li><li>  Productos bancarios anónimos que el usuario ha abierto (OPN), utiliza (UTL) o cierra (CLS) </li><li>  sexo, edad binarizada, estado civil, primera entrada en la solicitud </li><li>  job_title: lo que la gente escribe sobre sí misma </li><li>  job_position_cd - título del trabajo de una persona, como una de las 22 categorías </li></ul><br><p><img src="https://habrastorage.org/webt/eu/nh/qs/eunhqswbbakece3ccak4f77oids.png"></p><br><p>  como características usamos todo lo anterior excepto job_title, porque  suponemos que job_position_cd normalmente describe la posición de una persona. </p><br><h2 id="tranzakcii">  Transacciones </h2><br><p><img src="https://habrastorage.org/webt/yn/1f/dh/yn1fdhno1qtsu-bajpbkkmhydw8.png"></p><br><p>  lo que es originalmente: </p><br><ul><li>  ID de usuario </li><li>  día, mes de transacción </li><li>  monto de la transacción (binario en incrementos de 250) </li><li>  merchant_id: identificación bancaria interna de la caja registradora.  Además no se utiliza. </li><li>  merchant_mcc </li></ul><br><p>  MCC: código de categoría de comerciante.  Este es el código de servicio estandarizado proporcionado por el destinatario.  Esta información está abierta, aquí hay una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">transcripción</a> .  Estos códigos se pueden dividir convenientemente en categorías, por ejemplo: entretenimiento, hoteles, etc. </p><br><p>  Para cada customer_id, comparamos las siguientes características: </p><br><ul><li>  calcular la cantidad de gastos, verificación promedio, desviación estándar </li><li>  cantidad de transacciones </li><li>  Dividimos los códigos mcc en 20 categorías, calculamos cuántas personas gastaron dinero en esta categoría.  Obtén 20 funciones </li><li>  obtendremos otras 20 funciones dividiendo los gastos en la categoría por la cantidad de gastos.  Es decir  Obtenga el porcentaje de dinero gastado en la categoría. </li></ul><br><h2 id="stories">  Cuentos </h2><br><p>  En total, tenemos 959 historias. <br>  lo que es originalmente: </p><br><ul><li>  id id </li><li>  json historias. </li></ul><br><p>  json se ve así: </p><br><p><img src="https://habrastorage.org/webt/cu/j2/mf/cuj2mfpq2vxoil9fgcvg5y2zww0.png"></p><br><p>  Este es un árbol de elementos en el que cada elemento se describe mediante claves: ['guid', 'type', 'description', 'properties', 'content'].  El 'contenido' contiene una lista de hijos.  La historia consta de páginas.  El fondo, el texto y las imágenes aparecen en la página.  No teníamos un constructor de historias, y dibujar todo esto es bastante difícil y no un hecho, lo que será de gran ayuda en el futuro. </p><br><p>  Los habituales extraen todo el texto y el tamaño de fuente correspondiente.  Extraemos las siguientes características: </p><br><ul><li>  número de páginas, enlaces, elementos totales </li><li>  tamaño de fuente de texto promedio </li><li>  cantidad de elementos de texto </li><li>  "volumen de texto" es una heurística para considerar cuidadosamente la longitud del texto dependiendo del tamaño de la fuente. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Código de recuento de volumen</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_text_amount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(all_text, font_sizes)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(all_text) == len(font_sizes) lengths = np.array(list(map(len, all_text))) sizes = (np.array(font_sizes) / <span class="hljs-number"><span class="hljs-number">100</span></span>)**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (lengths * sizes).sum()</code> </pre> </div></div><br><ul><li>  Ahora tomemos todo el texto, usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dostoievski</a> definimos la semántica del texto: ['neutral', 'negativo', 'omitir', 'discurso', 'positivo'].  Y agregue esto como 5 características </li></ul><br><h2 id="reakcii">  Reacciones </h2><br><p><img src="https://habrastorage.org/webt/6l/8m/ic/6l8micjuyle2jhaua16ryjcsnaq.png"></p><br><p>  lo que es originalmente: </p><br><ul><li>  ID de usuario e historial </li><li>  el tiempo </li><li>  reacción </li></ul><br><p>  Procesamos el tiempo y agregamos características como características: </p><br><ul><li>  dia de la semana </li><li>  hora minuto </li></ul><br><p>  A continuación, se agregará un grupo de características basadas en los datos de las reacciones, pero por ahora, vamos a luchar con este arsenal de características para hacer una línea de base. </p><br><h2 id="kakuyu-zadachu-my-reshaem-i-kak-formirovat-predskazanie-anchorpredictionanchor">  ¿Qué problema resolvemos y cómo formar una predicción? <a name="prediction"></a></h2><br><p>  El mejor enfoque que ha utilizado toda la parte superior es el siguiente: reducimos el problema a una clasificación multiclase, es decir,  predecir la probabilidad de cada reacción.  Consideramos la expectativa de una evaluación <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.515ex" height="2.419ex" viewBox="0 -780.1 1082.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> E_i </script>  para esta historia <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> i </script>  : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mo>&amp;#x2212;</mo><mn>10</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mn>0.1</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>s</mi><mi>k</mi><mi>i</mi><mi>p</mi><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mn>0.1</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>v</mi><mi>e</mi><mi>r</mi><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mn>0.5</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>l</mi><mi>i</mi><mi>k</mi><mi>e</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="77.103ex" height="2.66ex" viewBox="0 -832 33196.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-3D" x="1360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2212" x="2416" y="0"></use><g transform="translate(3195,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-63" x="4446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-64" x="4879" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6F" x="5403" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-74" x="5888" y="0"></use><g transform="translate(6250,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="908" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-28" x="7237" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-64" x="7626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="8150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-73" x="8495" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-29" x="8965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2212" x="9576" y="0"></use><g transform="translate(10577,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-31" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-63" x="12107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-64" x="12540" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6F" x="13064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-74" x="13549" y="0"></use><g transform="translate(13911,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="908" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-28" x="14897" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-73" x="15287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6B" x="15756" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="16278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-70" x="16623" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-29" x="17127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2B" x="17739" y="0"></use><g transform="translate(18739,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-31" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-63" x="20269" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-64" x="20702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6F" x="21226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-74" x="21711" y="0"></use><g transform="translate(22073,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="908" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-28" x="23060" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-76" x="23449" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-65" x="23935" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-72" x="24401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-29" x="24853" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2B" x="25464" y="0"></use><g transform="translate(26465,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-35" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-63" x="27995" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-64" x="28428" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6F" x="28952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-74" x="29437" y="0"></use><g transform="translate(29799,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="908" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-28" x="30785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6C" x="31175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="31473" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6B" x="31819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-65" x="32340" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-29" x="32807" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mo>−</mo><mn>10</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy="false">)</mo><mo>−</mo><mn>0.1</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mi>k</mi><mi>i</mi><mi>p</mi><mo stretchy="false">)</mo><mo>+</mo><mn>0.1</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>v</mi><mi>e</mi><mi>r</mi><mo stretchy="false">)</mo><mo>+</mo><mn>0.5</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>l</mi><mi>i</mi><mi>k</mi><mi>e</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> E_i = -10 \ cdot P_i (dis) - 0.1 \ cdot P_i (skip) + 0.1 \ cdot P_i (ver) + 0.5 \ cdot P_i (like) </script></p><br><p>  Binarizar <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.515ex" height="2.419ex" viewBox="0 -780.1 1082.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> E_i </script>  : <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mspace width=&quot;mediummathspace&quot; /><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>o</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>E</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.5ex" height="2.66ex" viewBox="0 -832 6673.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(222,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-3D" x="1373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-73" x="2430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="2899" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-67" x="3245" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6E" x="3725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6F" x="4326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-28" x="4811" y="0"></use><g transform="translate(5201,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="1044" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-29" x="6283" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mspace width="mediummathspace"></mspace><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>o</mi><mo stretchy="false">(</mo><msub><mi>E</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-6"> \: a_i = signo (E_i) </script><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.029ex" height="1.817ex" viewBox="0 -520.7 873.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="748" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> a_i </script>  - nuestra respuesta para el objeto <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> i </script>  que puede tomar valor <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>m</mi><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.953ex" height="2.298ex" viewBox="0 -728.2 2132.5 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6D" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-31" x="1632" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>m</mi><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-9"> \ pm 1 </script></p><br><h2 id="model-anchormodelanchor">  Modelo <a name="model"></a></h2><br><p>  Desde el principio hasta el final, usé CatBoost.  Esto se debe al hecho de que CatBoost crea estadísticas útiles para funciones categóricas.  Y las estadísticas sobre el usuario, cuánto se inclina a qué reacciones, y las estadísticas sobre el historial, cómo no reaccionan con mayor frecuencia, son las características más poderosas en esta tarea. </p><br><p>  El funcionamiento de CatBoost con características categóricas está bien explicado en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación</a> . <br>  TLDR: </p><br><ul><li>  genera múltiples permutaciones de datos </li><li>  va en orden y crea una codificación de destino media (mte) en aquellos objetos que ya vio </li></ul><br><div class="spoiler">  <b class="spoiler_title">brevemente sobre mte en nuestro ejemplo</b> <div class="spoiler_text"><p>  tomamos el valor del signo, por ejemplo, uno de customer_id, consideramos el porcentaje de casos en que este cliente reaccionó como, disgusto, omitido o visto.  Obtenemos 4 números.  Reemplazamos customer_id con estos 4 números y los usamos como signos.  Hacemos esto para cada customer_id. </p></div></div><br><h2 id="tekuschiy-rezultat">  Resultado actual </h2><br><p>  Con las características actuales, con una catbust no optimizada, en la tabla de clasificación pública en ese momento <strong>ocupé el</strong> 11º lugar con un resultado de <strong>0.31209</strong> </p><br><h2 id="killer-fichi-anchorkilleranchor">  Características asesinas <a name="killer"></a></h2><br><p>  En algún momento, apareció una hipótesis de que la aplicación puede mostrar historias con más frecuencia o menos dependiendo de cómo reaccionó el usuario antes.  A continuación, agreguemos características que dirán: </p><br><ul><li>  cuántas veces el usuario vio el historial correspondiente en el pasado / futuro, durante el mes / día / hora / total </li><li>  tiempo desde la última vez que se vio la misma historia </li><li>  tiempo después del cual el usuario la próxima vez mira la misma historia </li><li>  de hecho, el usuario carga varias historias a la vez en un segundo, generalmente alrededor de 5-7.  Llame a este conjunto de historias un <em>grupo</em> .  Agregué este número de historias en el grupo como una característica, lo que dio un gran aumento en la calidad. </li></ul><br><p>  Por supuesto, estas características no se pueden usar en la producción, porque  no serán cursi en el momento de la aplicación del modelo, pero en la competencia cualquier medio es bueno. </p><br><p>  Entonces, se dice - hecho.  <strong>Obtuve 0.35657</strong> en la clasificación. </p><br><h2 id="optimizaciya-modeli-anchoroptimizationanchor">  Modelo de optimización <a name="optimization"></a></h2><br><p>  Revisé los parámetros usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la optimización bayesiana</a> </p><br><p>  De lo interesante, podemos mencionar el parámetro max_ctr_complexity, que es responsable del número máximo de características categóricas que se pueden combinar.  Ejemplo bajo el spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Extracto de la documentación.</b> <div class="spoiler_text"><p>  Suponga que los objetos en el conjunto de entrenamiento pertenecen a dos características categóricas: el género musical ("rock", "indie") y el estilo musical ("danza", "clásico").  Estas características pueden ocurrir en diferentes combinaciones.  CatBoost puede crear una nueva característica que es una combinación de las mencionadas ("dance rock", "rock clásico", "dance indie" o "indie clásico"). </p></div></div><br><h2 id="interesnye-nablyudeniya-anchorinterestinganchor">  Observaciones interesantes <a name="interesting"></a></h2><br><ol><li><p>  CatBoost puede ser entrenado en la GPU, esto acelera significativamente el aprendizaje, pero también introduce muchas restricciones, especialmente con respecto a las características categóricas.  En esta tarea, el entrenamiento en la GPU dio un resultado mucho peor que en la CPU. </p><br></li><li><p>  La importancia de las características según CatBoost.  En muchos sentidos, los nombres de las características hablan por sí mismos, pero algunos, no los más obvios desde arriba, explicaré: </p><br><ul><li>  unique_in_group: la cantidad de historias en el grupo.  (Dentro del grupo siempre son únicos, justo en el momento en que se creó la función, no lo sabía) </li><li>  stories_at_all: la cantidad de historias que una persona vio en el futuro y en el pasado. </li><li>  this_story_before_counter: cuántas veces la gente ha visto esta historia antes. </li><li>  text_amount: esa heurística con el volumen de texto. </li><li>  group_number: número de serie del grupo. </li><li>  arest_story_seconds_before / after - esencialmente este es el tiempo hasta que se muestra el siguiente grupo. <br><br>  Se puede hacer clic en la imagen. <br> <a href=""><img src="https://habrastorage.org/webt/d6/yo/pu/d6yopub7m8jlc9fs3gpoaruqcgu.png"></a> </li></ul><br></li><li><p>  Veamos la distribución de reacciones a lo largo del tiempo: <br><br><img src="https://habrastorage.org/webt/q7/4i/k-/q74ik-2nizvwee3cgdda45hci9m.jpeg"><br><br>  Es decir  en algún momento, la distribución de reacciones varía mucho. <br><br>  A continuación, quiero obtener alguna confirmación de que la distribución en la prueba es la misma que al final de la muestra de entrenamiento.  Enviemos como predicción todos, obtenemos el resultado 0.00237.  Predecimos todos los de la última parte del tren, obtenemos aproximadamente 0.009, en la primera parte, aproximadamente -0.22.  Por lo tanto, la distribución en la prueba probablemente sea la misma que al final del tren y definitivamente no se parece a la parte principal.  Esto da lugar a la hipótesis de que si la distribución se corrige <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>m</mi><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.953ex" height="2.298ex" viewBox="0 -728.2 2132.5 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6D" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-31" x="1632" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>m</mi><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-10"> \ pm 1 </script>  en nuestras predicciones, el resultado en la tabla de clasificación mejorará en gran medida, porque  Las distribuciones en el tren y en la prueba son diferentes. </p><br></li></ol><br><h2 id="treshhold-predskazaniy-anchorthresholdanchor">  Predicciones de umbral <a name="threshold"></a></h2><br><p>  En el último paso para obtener las predicciones finales, agregue un thrashhold: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mspace width=&quot;mediummathspace&quot; /><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>o</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>E</mi><mi>i</mi></msub><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>a</mi><mi>l</mi></mrow><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.352ex" height="2.66ex" viewBox="0 -832 13068.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(222,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-3D" x="1373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-73" x="2430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="2899" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-67" x="3245" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6E" x="3725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6F" x="4326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-28" x="4811" y="0"></use><g transform="translate(5201,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-69" x="1044" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-2B" x="6506" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-74" x="7756" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-65" x="8118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-78" x="8584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-74" x="9157" y="0"></use><g transform="translate(9518,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-75" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6D" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-62" x="1451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-72" x="1880" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-61" x="2332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMATHI-6C" x="2861" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhiY-11T2tmuLZmR-dFaQHKy-ealCA#MJMAIN-29" x="12678" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mspace width="mediummathspace"></mspace><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>o</mi><mo stretchy="false">(</mo><msub><mi>E</mi><mi>i</mi></msub><mo>+</mo><mtext>&nbsp;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>a</mi><mi>l</mi></mrow><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-11"> \: a_i = signo (E_i + \ text {umbral}) </script></p><br><p>  En el último modelo, tenía algo sobre el 66% de las unidades, si se binarizaba con un basurero igual a 0. Resultó que, de hecho, una disminución en el número de +1 dio un fuerte aumento en la calidad.  Solo se evaluaron las últimas 3 premisas, por lo que envié las predicciones del mejor modelo con diferentes basureros para que el porcentaje más uno fuera aproximadamente 62, 58 y 54. </p><br><p>  Como resultado, en una tabla de clasificación pública, mi mejor resultado fue <strong>0.37970</strong> . </p><br><h2 id="rezultaty-sorevnovaniya-anchorresultsanchor">  Resultados de la competencia <a name="results"></a></h2><br><div class="spoiler">  <b class="spoiler_title">sobre tabla de clasificación pública / privada</b> <div class="spoiler_text"><p>  Como es habitual en las competencias de aprendizaje automático, cuando envía predicciones al sistema, el resultado solo se evalúa para una parte de la muestra de prueba completa.  Por lo general, alrededor del 30%.  Los resultados de esta parte se reflejan en la tabla de clasificación pública.  Para el resto de la prueba, se evalúa el resultado final, que se muestra después del final de la competencia en una tabla de clasificación privada. </p></div></div><br><p>  Al final de la competencia en la clasificación pública, la situación era la siguiente: </p><br><ol><li>  0.382 - HereCould BeYourAdvertising </li><li>  0.379 - Los hijos de Lesha </li><li>  0.372 - Jardineros </li><li>  0.35 - perezoso y akulov </li></ol><br><p>  En una tabla de clasificación privada, según la cual se consideraron los resultados finales, tuve suerte y los muchachos, por alguna razón, cayeron del cuarto lugar al cuarto.  Aquí está la posición final. </p><br><ol><li>  0.45807 hijos de Lesha </li><li>  0.45264 Jardineros </li><li>  0.44136 Zhuk </li><li>  0.43704 Aquí podría ser su publicidad </li><li>  0.43474 perezoso y akulov </li></ol><br><h2 id="chto-ne-srabotalo-anchornonworkinganchor">  Lo que no funcionó <a name="nonworking"></a></h2><br><ol><li>  Traté de traducir todo el texto de la historia a un vector usando texto rápido, luego agrupé los vectores y usé el número de grupo como una característica categórica.  Esta característica estaba en el top 3 (después de story_id y customer_id) en la importancia de las características de CatBoost, pero por alguna razón era estable y empeoró significativamente el resultado de la validación. </li><li>  Gracias a los grupos, se podían encontrar historias relacionadas con la Copa del Mundo y solo estaban presentes en el conjunto de entrenamiento. <br>  Sin embargo, expulsar tales objetos del conjunto de datos no mejoró el resultado. </li><li>  de forma predeterminada, CatBoost genera permutaciones aleatorias de objetos y considera signos para características categóricas basadas en ellos.  Pero podemos decirle al katbust que tenemos tiempo en los datos: has_time = True.  Luego irá en orden, sin mezclar el conjunto de datos.  En este problema, a pesar del hecho de que tenemos tiempo, el resultado con has_time fue mucho peor. <br><br>  En el caso general, si hay tiempo, pero no debe tenerse en cuenta al construir la codificación de objetivo media, el modelo utilizará información sobre las respuestas correctas del futuro y puede volver a capacitarse para ello.  En este problema, aparentemente, esto no tuvo mucho efecto y fue más importante repasar varias veces en diferentes permutaciones. </li><li>  Hubo una idea de asignar más peso a los objetos al final del tren, es decir  para tener en cuenta más objetos con la distribución correcta de reacciones.  Pero tanto en la validación como en la tabla de clasificación pública esto dio un resultado peor. </li><li>  Puede tener en cuenta diferentes reacciones con diferentes pesos durante el entrenamiento.  Aunque esto no mejoró para mí, ayudó a algunos equipos. </li></ol><br><h2 id="vyvody-anchorconclusionanchor">  Conclusiones <a name="conclusion"></a></h2><br><p>  La competencia resultó ser interesante, ya que reunió muchos componentes, como datos tabulares, textos e imágenes.  Había mucho espacio para la investigación, mucho con lo que todavía se podía experimentar.  En general, no tuve que aburrirme. </p><br><p>  Gracias a los organizadores del concurso! </p><br><p>  Todo el código se publica en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/475182/">https://habr.com/ru/post/475182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../475168/index.html">Inversiones cambiarias de bajo riesgo: cómo usar las cuentas y bonos del IIA como alternativa a los depósitos bancarios</a></li>
<li><a href="../475170/index.html">Problemas de los patrones básicos para crear aplicaciones basadas en datos en React.JS</a></li>
<li><a href="../475172/index.html">5 maneras de usar la Raspberry Pi de manera beneficiosa Parte tres</a></li>
<li><a href="../475178/index.html">Reemplazar EAV con JSONB en PostgreSQL</a></li>
<li><a href="../475180/index.html">Cómo despegar con baterías o la práctica de operar el paramotor eléctrico SkyMax. Parte 2</a></li>
<li><a href="../475188/index.html">Algoritmo de colocación de mosaicos basado en restricciones</a></li>
<li><a href="../475192/index.html">¿Cómo encontrar un trabajo en una empresa que ayude a combatir el calentamiento global?</a></li>
<li><a href="../475194/index.html">Redacción redux por SOLID</a></li>
<li><a href="../475200/index.html">Noticias del mundo de OpenStreetMap No. 484 (22/10/2019 - 28/10/2019)</a></li>
<li><a href="../475202/index.html">Primera impresión de Xiaomi MIUI 11</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>