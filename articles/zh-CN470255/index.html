<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙎🏾 🤾 🌓 使用ALGLIB优化债券投资组合 🎷 🅱️ 👩🏾‍🤝‍👩🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文将讨论在最小化期限方面开发可创建有效债券投资组合的计划的经验。 也许我不会独树一帜，对于每个投资债券的人来说，确定最佳权重的问题早已得到解决，但我仍然希望所描述的方法和所提供的程序代码对某人有用。 

 由于其中包含少量数学，因此该文章对某人似乎很复杂。 但是，如果您已经决定开始投资，那么您需要...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用ALGLIB优化债券投资组合</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470255/"> 本文将讨论在最小化<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">期限</a>方面开发可创建有效债券投资组合的计划的经验。 也许我不会独树一帜，对于每个投资债券的人来说，确定最佳权重的问题早已得到解决，但我仍然希望所描述的方法和所提供的程序代码对某人有用。 <br><br> 由于其中包含少量数学，因此该文章对某人似乎很复杂。 但是，如果您已经决定开始投资，那么您需要为数学经常出现在金融现实中并且更加复杂的事实做好准备。 <br><br> 该程序的源代码和用于优化的示例产品组合<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可</a>在GitHub上获得。 <br><br>  <b>更新：</b>按照承诺，提供了一个简单的Web服务，该程序使每个人都可以使用该程序，而无需复制或编译代码。 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">链接</a> <br> 在同一地方使用说明。 <br> 如果某些方法不起作用或您需要解决某些问题，请在注释中写下。 <br><br> 因此，我们的任务是形成有效的债券投资组合。 <br><a name="habracut"></a><br><h1> 第1部分。确定投资组合的期限 </h1><br> 从最小化非系统性风险（投资组合多样化）的角度出发，证券的选择是通过考虑特定发行人，发行人（如果不限于<abbr title="联邦贷款债券">OFZ</abbr> ），账面行为等参数来进行的。  （这种分析方法对于每个投资者而言都是非常个别的，因此本文中不予考虑）。 <br><br> 选择了几只最适合投资的证券后，一个自然的问题出现了：您需要购买每期债券多少张债券？ 这是优化投资组合以使投资组合的风险最小化的任务。 <br><br> 将持续时间视为优化参数是很自然的。 因此，任务是确定证券在证券中的权重，以使得对于某些固定的证券收益率，证券的持续时间将最小。 在这里您需要进行一些保留： <br><br><ol><li> 债券投资组合的期限由其组成证券决定。 这些持续时间是已知的（它们是在公共领域中）。 投资组合期限不等于包含在其中的证券的最大期限（存在谬论）。 单个证券的久期与整个投资组合的久期之间的关系不是线性的，即 不等于其构成债券的加权平均期限（要验证这一点，只需考虑期限公式（请参阅下面的（1））并尝试计算有条件投资组合的加权平均期限，例如，由两篇论文组成。在每篇论文的输出中，我们得到的不是投资组合期限的公式，而是一种“废话”，具有两个折现率和不一致的现金流量作为权重。 </li><li> 与持续时间不同，投资组合收益取决于线性投资工具的收益。 即 通过将钱放入固定收益的几种工具中，我们将获得与每种工具的投资额成正比的回报（这适用于复杂的汇率，而不仅仅是简单的汇率）。 确保这更加容易。 </li><li> 到期<abbr title="到期收益率">收益</abbr>率（ <abbr title="到期收益率">YTM</abbr> ）用作债券的收益率。 通常用于计算持续时间。 但是，这里整个投资组合的到期收益率是相当随意的，因为 所有证券的到期日都不同。 形成投资组合时，必须从一定意义上考虑此功能，因为应该对投资组合进行审查，并且不得少于构成其的工具。 </li></ol><br> 因此，第一个任务是正确计算投资组合本身的持续时间。 立即执行此操作的方法是： <i>确定投资组合的所有付款，计算到期收益率，折现付款，将收到的价值乘以这些付款的条件并相加。</i>  <i>为此，您需要将所有工具的付款日历合并到整个投资组合的单个付款日​​历中，组成一个表达式以计算到期收益率，对其进行计算，对每笔付款进行折现，再乘以到期日，加...</i> 一般来说，一场噩梦。 即使对于两篇论文，要做到这一点也是一项艰巨的任务，更不用说将来定期重新计算投资组合了。 这种方式不适合我们。 <br><br> 因此，有必要寻找机会以另一种更快的方式确定投资组合的期限。 可接受的选项是允许您通过已知工具期限确定投资组合的期限。 对持续时间公式的研究表明存在这样一条路径，在此我想详细介绍一下（如果有人对计算的数学细节不感兴趣，则可以安全地跳过包含公式的几段内容，然后直接转到示例）。 <br><br> 债务工具的期限定义如下： <br><p><math> </math> $$ display $$ \ begin {equation} D = \ frac {\ sum_ {i} PV_i \ cdot t_i} {\ sum_ {i} PV_i} ~~~~~~~~~~~~~（1）\结束{equation} $$显示$$ </p> 其中： <br><ul><li>  <i><sub>i</sub></i>是第i次付款的时间点； </li><li><math> </math> $ inline $ \开始{equation} PV_i = \ frac {CF_i} {（1 + r）^ {t_i}} \ end {equation} $ inline $   -第i次折扣付款； </li><li>  <i>CF <sub>i-</sub></i>第i次付款； </li><li>  <i>r</i>是折现率。 </li></ul><br> 我们引入折现系数<i>k =（1 + r），</i>并考虑折现付款额<i>P</i>与<i>k的关系</i> ： <br><p><math> </math> $$显示$$ \开始{等式} P（k）= \ sum_ {i} PV_i = \ sum_ {i} {\ frac {CF_i} {k ^ {t_i}}} ~~~~~~~~~~ ~~~~（2）\ end {等} $$显示$$ </p> 相对于<i>k</i>微分<i>P</i> <i>，</i>我们得到 <br><p><math> </math> $$ display $$ \开始{等式} P'（k）=-\ sum_ {i} {t_i \ frac {CF_i} {k ^ {t_i + 1}}} =-\ frac {1} {k} \ sum_ {i} {t_i \ frac {CF_i} {k ^ {t_i}}} ~~~~~~~~~~~~~（3）\ end {equation} $$显示$$ </p> 在给定后者的情况下，债券期限的表达形式为 <br><p><math> </math> $$ display $$ \开始{等式} D = -k \ frac {P'（k）} {P（k）} ~~~~~~~~~~~~~（4）\结束{等式} $$显示$$ </p> 同时，我们记得在债券情况下，使用折现率<i>r</i>作为到期收益率（YTM）。 <br><br> 获得的表达式对一个债券有效，但我们<u>对</u>债券<u>投资组合</u>感兴趣。 让我们继续确定投资组合的期限。 <br><br> 我们引入以下符号： <br><br><ul><li>  <i>P <sub>i</sub></i>是第i个债券的价格； </li><li>  <i>z <sub>i-</sub></i>投资组合中第i个债券的证券数量； </li><li>  <i>k <sub>i-</sub></i>投资组合中第i个债券的折现系数； </li><li><math> </math> $ inline $ \开始{equation} P_p = \ sum_ {i} {z_iP_i} \ end {equation} $ inline $   -投资组合价格； </li><li><math> </math> $ inline $ \开始{equation} w_i = \ frac {z_iP_i} {\ sum_ {i} z_iP_i} = \ frac {z_iP_i} {P_p} \ end {equation} $ inline $   -投资组合中第i个债券的权重； 明显的要求 <math> </math> $ inline $ \开始{equation} \ sum_ {i} w_i = 1 \ end {equation} $ inline $   ; </li><li><math> </math> $ inline $ \开始{equation} k_p = \ sum_ {i} w_ik_i \ end {equation} $ inline $   -投资组合折现系数； </li></ul><br> 由于微分的线性关系，因此以下是正确的： <br><p><math> </math> $$显示$$ \开始{等式} P'_p（k）= \左（\ sum_ {i} z_iP_i（k）\右）'= \ sum_ {i} z_iP'_i（k）~~~~~ ~~~~~~~~（5）\ end {equation} $$ display $$ </p> 因此，考虑到（4）和（5），投资组合的持续时间可以表示为 <br><p><math> </math> $$ display $$ \ begin {equation} D_p = -k_p \ frac {P'_p} {P_p} =-\ sum_ {i} w_ik_i \ left（\ frac {\ sum_ {j} z_jP'_j} {\ sum_ {j} z_jP_j} \ right）~~~~~~~~~~~~~~（6）\ end {equation} $$ display $$ </p> 从（4）可以清楚地得出 <math> </math> $ inline $ \开始{equation} P'_j =-\ frac {D_jP_j} {k_j} \ end {equation} $ inline $   。 <br> 将表达式替换为（6），我们得出投资组合期限的以下公式： <br><p><math> </math> $$ display $$ \ begin {equation} D_p = \ sum_ {i} w_ik_i \ left（\ frac {\ sum_ {j} \ frac {D_j} {k_j} z_jP_j} {\ sum_ {j} z_jP_j} \ right） = \左（\ sum_ {i} w_ik_i \右）\左（\ sum_ {j} w_j \ frac {D_j} {k_j} \右）~~~~~~~~~~~~~（7）\结束{equation} $$显示$$ </p> 在已知每种工具的期限和到期收益率的条件下（我们记得，我们正处于这样的条件下），表达式（7）是根据其债券期限确定投资组合期限的理想公式。 它看起来似乎很复杂，但是实际上，借助MS Excel最简单的功能，它已经可以实际使用了，我们现在将通过一个示例来做。 <br><br><h4>  <u>例子</u> </h4><br> 为了根据公式（7）计算投资组合的期限，我们需要输入数据，其中包括投资组合中包含的证券的实际集合，其期限和到期收益率。 如上所述，该信息是公开可用的，例如，在债券分析部分的网站rusbonds.ru上。 源数据可以Excel格式下载。 <br><br> 例如，考虑由9个债券组成的证券投资组合。 从rusbonds下载的原始数据表具有以下格式。 <br><br><img src="https://habrastorage.org/webt/86/ad/yr/86adyrfz2ksbzkjv1ldx3qqphjk.png"><br><br> 我们感兴趣的两列持续时间（E列）和到期收益率（L = YTM列）以红色突出显示。 <br><br> 我们为该投资组合中的债券设置权重w（到目前为止，可以通过任意方式，但是它们的总和等于1），并计算<i>k =（1 + YTM / 100）</i>和<i>D / k</i> =（“列E” / k）。 转换后的表（没有多余的列）看起来像 <br><br><img src="https://habrastorage.org/webt/6e/c4/aw/6ec4awiggvfztk-k1p-zgrb3gfq.png" width="75%"><br><br> 接下来，我们计算乘积 <math> </math> $ inline $ \开始{equation} w_j \ frac {D_j} {k_j} \ end {equation} $ inline $  和 <math> </math> $ inline $ \开始{equation} w_ik_i \ end {equation} $ inline $  并将它们相加，然后将结果乘以另一个。 乘法的结果将是给定权重分布所需的持续时间。 <br><br><img src="https://habrastorage.org/webt/qb/yy/as/qbyyasgqfvxylwicpohhbfuewe4.png"><br><br> 因此，投资组合的期望期限为466.44天。 重要的是要注意，在这种特殊情况下，公式（7）计算的持续时间与相同权重（偏差&lt;0.5天）计算出的加权平均持续时间略有不同。 但是，这种差异随着权重分布的增加而增加。 随着纸张持续时间分布的增加，它也会增加。 <br><br> 在获得用于计算投资组合期限的公式之后，下一步是确定证券的权重，以便在给定收益率下，投资组合的估计期限将最小。 我们进入下一部分-投资组合优化。 <br><br><h1> 第2部分。债券投资组合优化 </h1><br> 表达式（7）是二次形式，矩阵 <br><p><math> </math> $$ display $$ \开始{equation} A = \左\ {k_i \ frac {D_j} {k_j} \ right \} = \开始{pmatrix} D_1＆\ ldots＆k_1 \ frac {D_n} {k_n} \ \ \ vdots＆D_j＆\ vdots \\ k_n \ frac {D_1} {k_1}＆\ ldots＆D_n \ end {pmatrix} \ end {equation} $$显示$$ </p> 因此，以矩阵形式，投资组合（7）的持续时间的表达式可以写成如下： <br><p><math> </math> $$ display $$ \开始{equation} D_p = w ^ TAw ~~~~~~~~~~~~~~（8）\ end {equation} $$ display $$ </p> 其中<i><b>w</b></i>是投资组合中债券权重的列向量。 如上所述，向量w的元素之和必须等于1。 另一方面，表达 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-633"><span class="MJXp-msubsup" id="MJXp-Span-634"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-636" style="vertical-align: -0.4em;">p</span></span><span class="MJXp-mo" id="MJXp-Span-637" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-638">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-640">u</span><span class="MJXp-msubsup" id="MJXp-Span-641"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-643" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-644">i</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-645"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-647" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-msubsup" id="MJXp-Span-648"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-650" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> k_p = \ sum_ {i} w_i k_i </script>  （本质上是简单的标量积<i>（ <b>w</b> ， <b>k</b></i> ，其中<i><b>k</b></i>是债券贴现系数的向量））应等于投资组合的目标贴现率，因此应设定目标投资组合收益率。 <br><br> 因此，优化债券投资组合的任务是使具有线性约束的二次函数（8）最小化。 <br><br> 查找多个变量的条件极值的经典方法是拉格朗日乘数法。 但是，此方法仅在矩阵<i>A</i>因构造而退化时才适用（此处不仅如此;我们在此省略了拉格朗日方法的适用性分析的详细信息，以免过多的数学内容使文章不繁琐）。 <br><br> 无法使用简单且负担得起的分析方法导致需要使用数值方法。 优化二次函数的问题是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">众所周知的，</a>并已在公共图书馆中实施了几种长期发展的高效算法。 <br><br> 为了解决这个特定问题，使用了minGLp软件包中包含的ALGLIB库和其中实现的二次优化算法<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">QP-Solvers</a> 。 <br><br> 一般而言，二次优化问题如下： <br><br> 需要找到一个使函数最小的n维向量 <br><p><math> </math> $$ display $$ \开始{等式} F = \ frac {1} {2} w ^ T Qw + b ^ T w ~~~~~~~~~~~~~~（9）\结束{等式} $$显示$$ </p> 在给定限制下 <br>  1） <i>l≤w≤u</i> ; <br>  2） <i>Cw * d</i> ; <br> 其中<i><b>w，l，u，d，b</b></i>是n维实值向量， <i>Q</i>是二次部分的对称矩阵，并且符号*表示≥=≤的任何关系。 <br> 从（8）可以看出，我们目标函数中的线性部分<i>b <sup>T</sup> w</i>等于零。 然而，矩阵<i>A</i>不是对称的，然而，这不防止在不改变函数本身的情况下使其成为对称形式。 为此，只需将表达式代替<i>A</i> <math> </math> $ inline $ \开始{equation} \ frac {A ^ T + A} {2} \ end {equation} $ inline $   。由于公式（9）包含系数 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-691"><span class="MJXp-mtext" id="MJXp-Span-692">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-693">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696">c</span><span class="MJXp-mrow" id="MJXp-Span-697"><span class="MJXp-mn" id="MJXp-Span-698">1</span></span><span class="MJXp-mrow" id="MJXp-Span-699"><span class="MJXp-mn" id="MJXp-Span-700">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> \ frac {1} {2} </script> 那么我们作为<i>Q</i>我们可以接受 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-701"><span class="MJXp-msubsup" id="MJXp-Span-702"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703" style="margin-right: 0.05em;">A</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-704" style="vertical-align: 0.5em;">T</span></span><span class="MJXp-mo" id="MJXp-Span-705" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706">A</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> A ^ T + A </script>  。 <br><br> 向量<i><b>l</b></i>和<i><b>u</b></i>的坐标指定了所需向量的边界，并且在[-1,1]范围内。 由于我们不假定卖空债券，因此在我们的情况下，向量的坐标都不少于0。在下面的示例程序中，为简单起见，假设向量<i><b>l</b></i>为零，向量<i><b>u</b></i>的系数<i><b>均为</b></i> <i>0.3</i> 。 但是，没有什么可以阻止我们改进程序并使约束向量更可定制。 <br><br> 在我们的案例中，矩阵<i>C</i>由两行组成：1）折现系数，当将其标量乘以权重（相同（ <i><b>w</b> ， <b>k</b></i> ））时，应给出投资组合的目标收益率；  2）由单位组成的字符串。 需要设置限制 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-707"><span class="MJXp-mtext" id="MJXp-Span-708">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-709">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">u</span><span class="MJXp-msubsup" id="MJXp-Span-711"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-712" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-713" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-714">i</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-715"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-716" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-717" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-718" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-719">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> \ sum_ {i} w_i = 1 </script>  。 <br><br> 因此，用于我们任务的表达式<i>Cw * d</i>看起来像这样： <br><p><math> </math> $$ display $$ \开始{等式} \左\ {\开始{array} {ccc}（{\ bf w，k}）= k_p \\ \ sum_ {i} w_i = 1 \\ \ end {array} \对。  ~~~~~~~~~~~~~~（10）\ end {equation} $$ display $$ </p><br> 现在，我们转向搜索最佳投资组合的软件实现。 对象中的ALGLIB二次优化器的基础 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-720"><span class="MJXp-mtext" id="MJXp-Span-721">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">t</span><span class="MJXp-mtext" id="MJXp-Span-724">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-725">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-726">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-728">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-730">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-732">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-733">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-736">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-739">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> \ tt \ smallminqpstate </script><br><br><pre><code class="cpp hljs">alglib::minqpstate state;</code> </pre> <br> 为了初始化优化器，该对象与任务维度参数n一起传递给minqpcreate函数。 <br><br><pre> <code class="cpp hljs">alglib::minqpcreate(n, state);</code> </pre> <br> 接下来最重要的一点是选择优化算法（求解器）。 用于二次优化的ALGLIB库提供了三个求解器： <br><br><ul><li>  <b>QP-BLEIC</b>是最通用的算法，旨在解决线性约束数量（形式为<i>Cw * d</i> ）不是很大（根据文档的建议最多为50）的问题。 同时，它可以在大尺寸任务上有效（如文档所述-最多n = 10000）。 </li><li>  <b>QuickQP</b>是一种非常有效的算法，尤其是在优化凸函数时。 但是，不幸的是，它不能用于线性约束-仅适用于边界条件（形式为<i>l≤w≤u</i> ）。 </li><li>  <b>Dense-AUL-</b>针对超大尺寸和大量限制的情况进行了优化。 但是，根据文档，使用其他算法将可以更有效地解决小尺寸任务和限制数量的问题。 </li></ul><br> 鉴于以上特征，很明显，QP-BLEIC求解器最适合我们的任务。 <br><br> 为了指示优化器使用此算法，必须调用该函数 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-740"><span class="MJXp-mtext" id="MJXp-Span-741">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-742">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-743">t</span><span class="MJXp-mtext" id="MJXp-Span-744">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-745">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-748">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-749">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-750">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-751">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-752">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-753">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-755">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-758">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-759">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-761">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-762">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-763">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-764">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-765">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-766">c</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> \ tt \ small minqpsetalgobleic </script>  。 对象本身和停止条件将传递给此函数，在此我们将不对其进行详细介绍：在此处考虑的程序中，将使用默认值。 函数调用如下： <br><br><pre> <code class="cpp hljs">alglib::minqpsetalgobleic(state, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br> 求解器的进一步初始化包括： <br><br><ul><li> 二次部分的矩阵的转移<i>Q-</i> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-767"><span class="MJXp-mtext" id="MJXp-Span-768">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-770">t</span><span class="MJXp-mtext" id="MJXp-Span-771">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-772">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-773">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-774">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-776">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-777">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-778">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-779">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-780">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-781">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-782">b</span><span class="MJXp-mo" id="MJXp-Span-783" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-784">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-785">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-787">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-789">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-790">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-791">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-792">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-793">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-794">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-795">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-796">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-797">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-799">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-800">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-801">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-802">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-803">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-804">m</span><span class="MJXp-mrow" id="MJXp-Span-805"><span class="MJXp-mo" id="MJXp-Span-806" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-807">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-809">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-810">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-811">e</span><span class="MJXp-mrow" id="MJXp-Span-812"><span class="MJXp-mo" id="MJXp-Span-813" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-814">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-816">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-817">a</span><span class="MJXp-mrow" id="MJXp-Span-818"><span class="MJXp-mo" id="MJXp-Span-819" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-820" style="margin-left: 0em; margin-right: 0.222em;">;</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> \ tt \ small alglib :: minqpsetquadraticterm（state，qpma）; </script></li><li> 线性部分的矢量（在本例中为零矢量）的传输- <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-821"><span class="MJXp-mtext" id="MJXp-Span-822">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-823">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-824">t</span><span class="MJXp-mtext" id="MJXp-Span-825">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-826">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-827">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-829">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-830">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-831">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-832">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-833">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-834">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-835">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836">b</span><span class="MJXp-mo" id="MJXp-Span-837" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-838">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-840">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-841">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-843">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-844">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-845">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-847">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-848">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-849">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-850">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-851">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-852">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-853">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-854">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-855">m</span><span class="MJXp-mrow" id="MJXp-Span-856"><span class="MJXp-mo" id="MJXp-Span-857" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-858">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-859">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-860">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-861">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-862">e</span><span class="MJXp-mrow" id="MJXp-Span-863"><span class="MJXp-mo" id="MJXp-Span-864" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-865">b</span><span class="MJXp-mrow" id="MJXp-Span-866"><span class="MJXp-mo" id="MJXp-Span-867" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-868" style="margin-left: 0em; margin-right: 0.222em;">;</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> \ tt \ small alglib :: minqpsetlinearterm（state，b）; </script></li><li> 边界条件向量<i>l</i>和<i>u-</i>的传递 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-869"><span class="MJXp-mtext" id="MJXp-Span-870">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-871">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-872">t</span><span class="MJXp-mtext" id="MJXp-Span-873">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-874">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-875">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-876">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-877">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-878">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-879">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-880">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-881">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-882">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-883">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-884">b</span><span class="MJXp-mo" id="MJXp-Span-885" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-886">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-887">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-888">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-889">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-890">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-891">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-892">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-893">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-894">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-895">c</span><span class="MJXp-mrow" id="MJXp-Span-896"><span class="MJXp-mo" id="MJXp-Span-897" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-898">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-899">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-900">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-901">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-902">e</span><span class="MJXp-mrow" id="MJXp-Span-903"><span class="MJXp-mo" id="MJXp-Span-904" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-905">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-906">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-907">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-908">l</span><span class="MJXp-mrow" id="MJXp-Span-909"><span class="MJXp-mo" id="MJXp-Span-910" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-911">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-912">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-913">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-914">u</span><span class="MJXp-mrow" id="MJXp-Span-915"><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-917" style="margin-left: 0em; margin-right: 0.222em;">;</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> \ tt \ small alglib :: minqpsetbc（state，bndl，bndu）; </script></li><li> 线性传动- <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-918"><span class="MJXp-mtext" id="MJXp-Span-919">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-921">t</span><span class="MJXp-mtext" id="MJXp-Span-922">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-923">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-924">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-926">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-927">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-928">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-929">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-930">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-931">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-932">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-933">b</span><span class="MJXp-mo" id="MJXp-Span-934" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-935">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-936">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-937">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-938">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-939">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-940">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-941">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-942">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-943">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-944">c</span><span class="MJXp-mrow" id="MJXp-Span-945"><span class="MJXp-mo" id="MJXp-Span-946" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-947">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-949">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-950">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-951">e</span><span class="MJXp-mrow" id="MJXp-Span-952"><span class="MJXp-mo" id="MJXp-Span-953" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-954">c</span><span class="MJXp-mrow" id="MJXp-Span-955"><span class="MJXp-mo" id="MJXp-Span-956" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-957">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-958">t</span><span class="MJXp-mrow" id="MJXp-Span-959"><span class="MJXp-mo" id="MJXp-Span-960" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-961" style="margin-left: 0em; margin-right: 0.222em;">;</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> \ tt \ small alglib :: minqpsetlc（state，c，ct）; </script></li><li> 设置向量空间的坐标比例 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-962"><span class="MJXp-mtext" id="MJXp-Span-963">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-964">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-965">t</span><span class="MJXp-mtext" id="MJXp-Span-966">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-967">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-968">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-969">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-970">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-971">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-972">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-973">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-974">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-975">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-976">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-977">b</span><span class="MJXp-mo" id="MJXp-Span-978" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-979">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-980">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-981">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-982">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-983">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-984">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-985">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-986">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-987">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-988">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-989">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-990">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-991">e</span><span class="MJXp-mrow" id="MJXp-Span-992"><span class="MJXp-mo" id="MJXp-Span-993" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-994">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-995">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-996">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-997">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-998">e</span><span class="MJXp-mrow" id="MJXp-Span-999"><span class="MJXp-mo" id="MJXp-Span-1000" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1001">s</span><span class="MJXp-mrow" id="MJXp-Span-1002"><span class="MJXp-mo" id="MJXp-Span-1003" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-1004" style="margin-left: 0em; margin-right: 0.222em;">;</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> \ tt \ small alglib :: minqpsetscale（state，s）; </script></li></ul><br> 让我们来谈谈每个项目： <br> 为了指定向量和矩阵，ALGLIB库使用特殊类型的对象（整数和实值）： <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1005"><span class="MJXp-mtext" id="MJXp-Span-1006">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1007">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1008">t</span><span class="MJXp-mtext" id="MJXp-Span-1009">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1010">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1011">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1012">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1013">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1014">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1015">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1016">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1017">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1018">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1019">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1020">b</span><span class="MJXp-mo" id="MJXp-Span-1021" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mrow" id="MJXp-Span-1022"><span class="MJXp-mo" id="MJXp-Span-1023" style="margin-left: 0.278em; margin-right: 0.278em;">整</span></span><span class="MJXp-mrow" id="MJXp-Span-1024"><span class="MJXp-mo" id="MJXp-Span-1025" style="margin-left: 0.278em; margin-right: 0.278em;">数</span></span><span class="MJXp-msubsup" id="MJXp-Span-1026"><span class="MJXp-mtext" id="MJXp-Span-1027" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1028" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1029">d</span><span class="MJXp-msubsup" id="MJXp-Span-1030"><span class="MJXp-mtext" id="MJXp-Span-1031" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1032" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1033">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1034">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1035">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1036">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> \ tt \ small alglib ::整数\ _1d \ _array </script>  ， <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1037"><span class="MJXp-mtext" id="MJXp-Span-1038">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1039">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1040">t</span><span class="MJXp-mtext" id="MJXp-Span-1041">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1042">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1043">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1044">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1045">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1046">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1047">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1048">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1049">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1050">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1051">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1052">b</span><span class="MJXp-mo" id="MJXp-Span-1053" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mrow" id="MJXp-Span-1054"><span class="MJXp-mo" id="MJXp-Span-1055" style="margin-left: 0.278em; margin-right: 0.278em;">实</span></span><span class="MJXp-msubsup" id="MJXp-Span-1056"><span class="MJXp-mtext" id="MJXp-Span-1057" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1058" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1059">d</span><span class="MJXp-msubsup" id="MJXp-Span-1060"><span class="MJXp-mtext" id="MJXp-Span-1061" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1062" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1063">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1064">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1065">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1066">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> \ tt \ small alglib ::实\ _1d \ _array </script>  ， <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1067"><span class="MJXp-mtext" id="MJXp-Span-1068">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1069">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1070">t</span><span class="MJXp-mtext" id="MJXp-Span-1071">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1072">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1073">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1074">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1075">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1076">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1077">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1078">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1079">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1080">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1081">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1082">b</span><span class="MJXp-mo" id="MJXp-Span-1083" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mrow" id="MJXp-Span-1084"><span class="MJXp-mo" id="MJXp-Span-1085" style="margin-left: 0.278em; margin-right: 0.278em;">整</span></span><span class="MJXp-mrow" id="MJXp-Span-1086"><span class="MJXp-mo" id="MJXp-Span-1087" style="margin-left: 0.278em; margin-right: 0.278em;">数</span></span><span class="MJXp-msubsup" id="MJXp-Span-1088"><span class="MJXp-mtext" id="MJXp-Span-1089" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1090" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1091">d</span><span class="MJXp-msubsup" id="MJXp-Span-1092"><span class="MJXp-mtext" id="MJXp-Span-1093" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1094" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1095">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1096">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1097">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1098">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> \ tt \ small alglib ::整数\ _2d \ _array </script>  ， <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1099"><span class="MJXp-mtext" id="MJXp-Span-1100">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1101">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1102">t</span><span class="MJXp-mtext" id="MJXp-Span-1103">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1104">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1105">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1106">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1107">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1108">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1109">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1110">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1111">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1112">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1113">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1114">b</span><span class="MJXp-mo" id="MJXp-Span-1115" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mrow" id="MJXp-Span-1116"><span class="MJXp-mo" id="MJXp-Span-1117" style="margin-left: 0.278em; margin-right: 0.278em;">真</span></span><span class="MJXp-mrow" id="MJXp-Span-1118"><span class="MJXp-mo" id="MJXp-Span-1119" style="margin-left: 0.278em; margin-right: 0.278em;">实</span></span><span class="MJXp-msubsup" id="MJXp-Span-1120"><span class="MJXp-mtext" id="MJXp-Span-1121" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1122" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1123">d</span><span class="MJXp-msubsup" id="MJXp-Span-1124"><span class="MJXp-mtext" id="MJXp-Span-1125" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1126" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1127">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1128">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1129">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1130">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> \ tt \ small alglib ::真实\ _2d \ _array </script>  。 要准备矩阵，我们需要一个类型 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1131"><span class="MJXp-mtext" id="MJXp-Span-1132">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1133">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1134">t</span><span class="MJXp-mtext" id="MJXp-Span-1135">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1136">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1137">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1138">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1139">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1140">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1141">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1142">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1143">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1144">l</span><span class="MJXp-msubsup" id="MJXp-Span-1145"><span class="MJXp-mtext" id="MJXp-Span-1146" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1147" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1148">d</span><span class="MJXp-msubsup" id="MJXp-Span-1149"><span class="MJXp-mtext" id="MJXp-Span-1150" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1151" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1152">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1153">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1154">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1155">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> \ tt \ small real \ _2d \ _array </script>  。 在程序中，首先创建一个矩阵<i>A</i> （ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1156"><span class="MJXp-mtext" id="MJXp-Span-1157">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1158">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1159">t</span><span class="MJXp-mtext" id="MJXp-Span-1160">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1161">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1162">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1163">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1164">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1165">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1166">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1167">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1168">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1169">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1170">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1171">b</span><span class="MJXp-mo" id="MJXp-Span-1172" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mrow" id="MJXp-Span-1173"><span class="MJXp-mo" id="MJXp-Span-1174" style="margin-left: 0.278em; margin-right: 0.278em;">实</span></span><span class="MJXp-mrow" id="MJXp-Span-1175"><span class="MJXp-mo" id="MJXp-Span-1176" style="margin-left: 0.278em; margin-right: 0.278em;">数</span></span><span class="MJXp-msubsup" id="MJXp-Span-1177"><span class="MJXp-mtext" id="MJXp-Span-1178" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1179" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1180">d</span><span class="MJXp-msubsup" id="MJXp-Span-1181"><span class="MJXp-mtext" id="MJXp-Span-1182" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1183" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1184">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1185">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1186">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1187">y</span><span class="MJXp-mrow" id="MJXp-Span-1188"><span class="MJXp-mo" id="MJXp-Span-1189" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1190">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1191">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1192">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1193">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> \ tt \ small alglib ::实数\ _2d \ _array〜qpma </script>  ），然后根据公式 <math></math><img src="https://habrastorage.org/getpro/habr/formulas/d1b/536/509/d1b536509e8f7da2c92681a57a335ee7.svg" alt="Q = A ^ T + A $" data-tex="inline"> 从中我们构造出矩阵<i>Q</i> （ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1194"><span class="MJXp-mtext" id="MJXp-Span-1195">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1196">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1197">t</span><span class="MJXp-mtext" id="MJXp-Span-1198">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1199">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1200">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1201">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1202">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1203">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1204">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1205">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1206">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1207">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1208">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1209">b</span><span class="MJXp-mo" id="MJXp-Span-1210" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mrow" id="MJXp-Span-1211"><span class="MJXp-mo" id="MJXp-Span-1212" style="margin-left: 0.278em; margin-right: 0.278em;">实</span></span><span class="MJXp-mrow" id="MJXp-Span-1213"><span class="MJXp-mo" id="MJXp-Span-1214" style="margin-left: 0.278em; margin-right: 0.278em;">数</span></span><span class="MJXp-msubsup" id="MJXp-Span-1215"><span class="MJXp-mtext" id="MJXp-Span-1216" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1217" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1218">d</span><span class="MJXp-msubsup" id="MJXp-Span-1219"><span class="MJXp-mtext" id="MJXp-Span-1220" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1221" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1222">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1223">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1224">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1225">y</span><span class="MJXp-mrow" id="MJXp-Span-1226"><span class="MJXp-mo" id="MJXp-Span-1227" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1228">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1229">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1230">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1231">q</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> \ tt \ small alglib ::实数\ _2d \ _array〜qpmq </script>  ） 在ALGLIB中设置矩阵尺寸是一项单独的功能 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1232"><span class="MJXp-mtext" id="MJXp-Span-1233">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1234">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1235">t</span><span class="MJXp-mtext" id="MJXp-Span-1236" style="color: red;">\小</span><span class="MJXp-mrow" id="MJXp-Span-1237"><span class="MJXp-mo" id="MJXp-Span-1238" style="margin-left: 0.278em; margin-right: 0.278em;">设</span></span><span class="MJXp-mrow" id="MJXp-Span-1239"><span class="MJXp-mo" id="MJXp-Span-1240" style="margin-left: 0.278em; margin-right: 0.278em;">定</span></span><span class="MJXp-mrow" id="MJXp-Span-1241"><span class="MJXp-mo" id="MJXp-Span-1242" style="margin-left: 0.278em; margin-right: 0.278em;">长</span></span><span class="MJXp-mrow" id="MJXp-Span-1243"><span class="MJXp-mo" id="MJXp-Span-1244" style="margin-left: 0.278em; margin-right: 0.278em;">度</span></span><span class="MJXp-mrow" id="MJXp-Span-1245"><span class="MJXp-mo" id="MJXp-Span-1246" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1247">n</span><span class="MJXp-mrow" id="MJXp-Span-1248"><span class="MJXp-mo" id="MJXp-Span-1249" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1250">m</span><span class="MJXp-mrow" id="MJXp-Span-1251"><span class="MJXp-mo" id="MJXp-Span-1252" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> \ tt \小设定长度（n，m）</script>  。 <br><br> 要构造矩阵，我们需要折现系数（ <i>k <sub>i</sub></i> ）的向量以及持续时间与这些系数的关系（ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1253"><span class="MJXp-mtext" id="MJXp-Span-1254">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1255">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1256">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1257">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1258">c</span><span class="MJXp-mrow" id="MJXp-Span-1259"><span class="MJXp-msubsup" id="MJXp-Span-1260"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1261" style="margin-right: 0.05em;">D</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1262" style="vertical-align: -0.4em;">j</span></span></span><span class="MJXp-mrow" id="MJXp-Span-1263"><span class="MJXp-msubsup" id="MJXp-Span-1264"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1265" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1266" style="vertical-align: -0.4em;">j</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> \ frac {D_j} {k_j} </script>  ）： <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt; disfactor; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt; durperytm;</code> </pre><br> 下面的清单中显示了实现矩阵构造的代码片段： <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> n = durations.size(); alglib::real_2d_array qpma; qpma.setlength(n,n); <span class="hljs-comment"><span class="hljs-comment">// matrix nxn alglib::real_2d_array qpmq; qpmq.setlength(n,n); // matrix nxn for(size_t j=0; j &lt; n; j++) { for (size_t i = 0; i &lt; n; i++) qpma(i,j) = durperytm[j]*disfactor[i]; //i,j   } for(size_t j=0; j &lt; n; j++) { for (size_t i = 0; i &lt; n; i++) qpmq(i,j) = qpma(i,j) + qpma(j,i); }</span></span></code> </pre><br> 如前所述，线性部分的向量在我们的情况下为零，因此一切都很简单： <br><br><pre> <code class="cpp hljs">alglib::real_1d_array b; b.setlength(n); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) b[i] = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre><br> 向量边界条件通过一个函数传输。 为了解决这个问题，应用了非常简单的边界条件：每张纸的重量不应该小于零（我们不允许负位置）并且不应该超过30％。 如果需要，限制可能会很复杂。 使用该程序进行的实验表明，即使在此范围内进行简单的更改也会极大地影响结果。 因此，下限的增加和/或上限的减少导致最终投资组合的分散化，因为在优化过程中，求解器可能会将某些证券从所得向量中排除（将其权重分配为0％），这是不合适的。 如果将比例的下限设置为5％，则可以保证所有论文都包含在投资组合中。 但是，在这种设置下计算出的持续时间当然会比优化器可以排除纸张的情况下更长。 <br><br> 因此，边界条件由两个向量设置并转移到求解器： <br><br><pre> <code class="cpp hljs">alglib::real_1d_array bndl; bndl.setlength(n); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) bndl[i] = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// low boundary alglib::real_1d_array bndu; bndu.setlength(n); for (size_t i = 0; i &lt; n; i++) bndu[i] = 0.3;// high boundary alglib::minqpsetbc(state, bndl, bndu);</span></span></code> </pre><br> 接下来，优化器需要传递系统指定的线性约束（10）。 在ALGLIB中，这是使用函数完成的 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1267"><span class="MJXp-mtext" id="MJXp-Span-1268">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1269">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1270">t</span><span class="MJXp-mtext" id="MJXp-Span-1271">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1272">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1273">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1274">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1275">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1276">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1277">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1278">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1279">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1280">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1281">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1282">b</span><span class="MJXp-mo" id="MJXp-Span-1283" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1284">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1285">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1286">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1287">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1288">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1289">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1290">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1291">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1292">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1293">c</span><span class="MJXp-mrow" id="MJXp-Span-1294"><span class="MJXp-mo" id="MJXp-Span-1295" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1296">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1297">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1298">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1299">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1300">e</span><span class="MJXp-mrow" id="MJXp-Span-1301"><span class="MJXp-mo" id="MJXp-Span-1302" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1303">c</span><span class="MJXp-mrow" id="MJXp-Span-1304"><span class="MJXp-mo" id="MJXp-Span-1305" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1306">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1307">t</span><span class="MJXp-mrow" id="MJXp-Span-1308"><span class="MJXp-mo" id="MJXp-Span-1309" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> \ tt \ small alglib :: minqpsetlc（state，c，ct）</script>  ，其中c是结合系统（10）左侧和右侧的矩阵，即 视图矩阵 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1310"><span class="MJXp-mrow" id="MJXp-Span-1311"><span class="MJXp-mo" id="MJXp-Span-1312" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1313">C</span><span class="MJXp-mtext" id="MJXp-Span-1314">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-1315">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1316">d</span><span class="MJXp-mrow" id="MJXp-Span-1317"><span class="MJXp-mo" id="MJXp-Span-1318" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41">（C ~~ d）</script>  ，ct是关系的向量（即≥，=或≤形式的对应关系）。 在我们的情况下，ct =（0,0），它对应于系统（10）两行的比率'='。 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) { c(<span class="hljs-number"><span class="hljs-number">0</span></span>,i) = disfactor[i]; <span class="hljs-comment"><span class="hljs-comment">//   -    c(1,i) = 1; //   –  –    } c(0,n) = target_rate; //   ( ) –    c(1,n) = 1; //   ( ) –  ,   alglib::integer_1d_array ct = "[0,0]"; //   alglib::minqpsetlc(state, c, ct);</span></span></code> </pre><br>  ALGLIB库的文档强烈建议在启动优化器之前设置变量的比例。 如果变量以单位计量，其变化相差一个数量级，则这一点尤其重要（例如，在寻找解决方案时，吨可以以百分之一或千的形式更改，单位可以是米;可以在吨米的空间中解决问题），这会影响放弃的标准。 但是，有一个保留意见，即在变量的缩放比例相同的情况下，不必设置缩放比例。 在所考虑的程序中，为了更严格地执行该方法，我们仍然执行规模任务，特别是因为它非常容易执行。 <br><br><pre> <code class="cpp hljs">alglib::real_1d_array s; s.setlength(n); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) s[i] = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     alglib::minqpsetscale(state, s);</span></span></code> </pre><br> 接下来，我们将优化器设置为起点。 通常，此步骤也是可选的，并且程序无需明确定义起点即可成功完成任务。 同样，出于严格的原因，我们设置了起点。 我们不会很聪明：起点将是所有债券权重相同的点。 <br><br><pre> <code class="cpp hljs">alglib::real_1d_array x0; x0.setlength(n); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> sp = <span class="hljs-number"><span class="hljs-number">1</span></span>/n; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) x0[i] = sp; alglib::minqpsetstartingpoint(state, x0);</code> </pre><br> 剩下的就是确定优化器将返回找到的解决方案的变量和状态变量。 然后，您可以运行优化并处理结果 <br><br><pre> <code class="cpp hljs">alglib::real_1d_array x; <span class="hljs-comment"><span class="hljs-comment">//   alglib::minqpreport rep; //  alglib::minqpoptimize(state); //   alglib::minqpresults(state, x, rep); //      alglib::ae_int_t tt = rep.terminationtype; if (tt&gt;=0) //       { std::cout &lt;&lt; "   :" &lt;&lt; '\n'; for(size_t i = 0; i &lt; n; i++) //       { std::cout &lt;&lt; (i+1) &lt;&lt; ".\t" &lt;&lt; bonds[i].bondname &lt;&lt; ":\t\t\t " &lt;&lt; (x(i)*100) &lt;&lt; "\%" &lt;&lt; std::endl; } for (size_t i = 0; i &lt; n; i++) { for (size_t j = 0; j &lt; n; j++) { qpmq(i,j) /= 2; } } }</span></span></code> </pre><br> 特别是，该程序的运行时并未在实验中进行衡量，但是一切运行得非常快。 同时，很明显，私人投资者不太可能优化超过10-15只债券的投资组合。 <br><br> 注意以下几点也很重要。 优化器精确地返回权重向量。 要获得计算的持续时间本身，您必须直接使用公式（8）。 该程序可以做到这一点。 为此，专门增加了两个向量和矩阵相乘的功能。 我们不会在这里给他们。 希望自己的人可以在已发布的源代码中轻松找到它们。 <br><br> 仅此而已。 对所有人的债务工具进行有效投资。 <br><br>  <b>PS</b>理解选择别人的代码并不是最有吸引力的职业，对于许多想要投资的人来说，它根本不是专门的，我稍后将尝试将该程序转变为每个人都可以使用的简单网络服务，无论数学知识如何和编程。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN470255/">https://habr.com/ru/post/zh-CN470255/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN470235/index.html">CTORECORDS频道创建者Dmitry Simonov的访谈：“ techdir的主要素质是取胜的习惯”</a></li>
<li><a href="../zh-CN470237/index.html">周末文学：易学易读</a></li>
<li><a href="../zh-CN470239/index.html">生产中未开发的ERP：在重症监护室还是太平间？</a></li>
<li><a href="../zh-CN470247/index.html">RESHI.RU-机器人解决并解释数学中的学校课文问题</a></li>
<li><a href="../zh-CN470251/index.html">我如何在Flutter上做桌面应用程序（+奖金）</a></li>
<li><a href="../zh-CN470257/index.html">Java中的ImmutableList周围的伪装</a></li>
<li><a href="../zh-CN470259/index.html">搜索中的Aimybox：用于创建语音助手的框架需要iOS向导</a></li>
<li><a href="../zh-CN470265/index.html">C ++缩写备忘单等。 第1部分：C ++</a></li>
<li><a href="../zh-CN470267/index.html">认证温度监控</a></li>
<li><a href="../zh-CN470271/index.html">F＃6：元组</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>