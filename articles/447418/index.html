<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ö±Ô∏è üîØ ‚ûï Procesamos bitcoin. ¬øC√≥mo se organiza la p√°gina de pago B2BinPay? üôéüèæ üò¢ ü§öüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="B2BinPay es un sistema de pago de criptomonedas con muchos backends relacionados para aplicaciones, an√°lisis, nodos, colas, pero solo una p√°gina de IU...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Procesamos bitcoin. ¬øC√≥mo se organiza la p√°gina de pago B2BinPay?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/b2broker/blog/447418/"> B2BinPay es un sistema de pago de criptomonedas con muchos backends relacionados para aplicaciones, an√°lisis, nodos, colas, pero solo una p√°gina de IU que ve el usuario final.  Tiene altos requisitos en cuanto a facilidad de uso.  A pesar de la aparente simplicidad de la p√°gina, el equipo de desarrollo estar√≠a interesado en compartir c√≥mo se organiza desde el interior. <br><br>  Para comprender los procesos comerciales, deber√° sumergirse en el √°rea tem√°tica.  Para los lectores que a√∫n no saben qu√© son las criptomonedas, blockchain y direcciones, hicimos definiciones cortas y comprensibles debajo del corte. <br><br><img src="https://habrastorage.org/webt/9l/st/fh/9lstfhjhpe676a3t3e8mj3fdu-q.jpeg"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Para entender los t√©rminos, aqu√≠ hay algunas analog√≠as con el mundo fiduciario de pagos:</b> <div class="spoiler_text">  <b>Blockchain</b> es una base de datos descentralizada (en el caso ideal) que almacena informaci√≥n sobre direcciones, transacciones y saldos.  Consiste en bloques; cada uno de ellos contiene una cantidad limitada de informaci√≥n.  Los bloques se generan gracias a los mineros a trav√©s de c√°lculos intensivos en energ√≠a (PoW) o prueba de participaci√≥n (PoS).  Cada bloque siguiente contiene una lista de nuevas transacciones y un enlace a la anterior.  Cada criptomoneda tiene su propia cadena de bloques. <br><br>  <b>Comerciante</b> : lo mismo que el propietario de la tienda, que alquila un sistema de pago para recibir pagos de los usuarios finales. <br><br>  <b>Una billetera</b> es lo mismo que una cuenta en el mundo financiero tradicional. <br><br>  <b>Transacci√≥n</b> : un registro en la cadena de bloques en el que los fondos se enviaron de una billetera a otra.  El saldo de la billetera se forma a partir del monto de las transacciones. <br><br>  <b>La direcci√≥n</b> es la misma que los detalles de la cuenta.  La diferencia es que la mayor√≠a de las cadenas de bloques le permiten generar un n√∫mero infinito de direcciones para una billetera. <br><br>  <b>Una transacci√≥n confirmada</b> es una transacci√≥n despu√©s de la cual se ha generado un n√∫mero seguro de bloques.  Un bloque es igual a una confirmaci√≥n.  Si la transacci√≥n no ha recibido 4-8 confirmaciones, no se considera completada. <br><br>  <b>Sistema de pago</b> : software que proporciona la aceptaci√≥n y el procesamiento de pagos en criptomonedas.  Enlaces y pedidos agregados, pagos, transacciones, devoluciones, reabastecimiento, retiros y otra informaci√≥n.  Tambi√©n informa al sistema comercial sobre cambios en el contexto de pedidos y pagos, y no sobre cadenas de bloques y transacciones. <br><br>  <b>Explorer</b> : un servicio o un sitio de navegador para los datos que ingresan a la cadena de bloques.  Con este servicio, puede obtener informaci√≥n convenientemente sobre direcciones, transacciones y bloques. <br><br>  <b>Un nodo</b> es una computadora en la que se almacena una copia de toda la base de datos (blockchain). <br></div></div><br><h3>  Esquema general de trabajo y requisitos para el contenido de la p√°gina de pago. </h3><br>  El ciclo de pago se realiza de la siguiente manera: en el sitio web de la tienda, el comprador selecciona el producto y la moneda de pago.  El sistema redirige al usuario a la p√°gina de pago.  Contiene la siguiente informaci√≥n: moneda, direcci√≥n, comentarios informativos.  El usuario env√≠a la cantidad requerida a la direcci√≥n especificada y espera un n√∫mero suficiente de confirmaciones de red para reconocer el pago como exitoso.  Mientras espera, el comprador puede controlar el estado del pago sin abandonar la p√°gina en el sitio web del explorador.  Una vez que se acepta el pago, el usuario es redirigido a la p√°gina de pago exitosa en el sitio web del vendedor. <br><br><img src="https://habrastorage.org/webt/gz/mu/p8/gzmup8pqrvynkwr7plvc_a3uyqu.png"><br><br>  El proceso de pago se divide en varias etapas.  Cada uno de ellos no requiere la acci√≥n del usuario, excepto la transferencia directa de dinero.  Script exitoso est√°ndar: <br><br><ol><li>  En el sitio web del vendedor, el usuario selecciona el m√©todo de pago B2BinPay y la moneda. </li><li>  La IP del vendedor env√≠a una solicitud para crear una nueva orden de pago, en respuesta recibe un enlace a la p√°gina de pago </li><li>  El usuario redirige a la p√°gina de pago, que contiene informaci√≥n: moneda, cantidad, direcci√≥n y campos adicionales, si es necesario </li><li>  El usuario paga por la compra </li><li>  El sistema detecta que una nueva transacci√≥n ha llegado a la direcci√≥n y la p√°gina entra en estado de seguimiento </li><li>  El estado de la transacci√≥n se supervisa y la informaci√≥n se actualiza en la p√°gina hasta que se alcanza un n√∫mero seguro de confirmaciones. </li><li>  El usuario es redirigido a la p√°gina de pago exitosa en el sitio web del vendedor </li></ol><br>  En consecuencia, la p√°gina de pago puede estar en dos estados: ver detalles y esperar confirmaci√≥n.  Al ver los detalles, puede ingresar la direcci√≥n de dos maneras: escanee el c√≥digo QR o copie la direcci√≥n en forma de texto.  Adem√°s de la informaci√≥n b√°sica, agregaremos una mini instrucci√≥n en forma de texto que le indicar√° c√≥mo pagar, d√≥nde descargar la aplicaci√≥n de billetera y c√≥mo comprar moneda.  Adem√°s de estos campos, hay uno m√°s, cuya presencia depende de la moneda elegida.  A veces, para comparar correctamente la transacci√≥n, la orden de pago y el comprador, es necesario conocer no solo la direcci√≥n, sino tambi√©n informaci√≥n adicional.  Por ejemplo, para la moneda Ripple, al enviar, debe especificar la etiqueta de destino (comentario sobre la transacci√≥n). <br><br>  Para aquellos que copian la direcci√≥n en forma de texto y no escanean el c√≥digo QR, se ha agregado un bot√≥n de copia.  Adem√°s, el logotipo de la moneda debe estar presente en la p√°gina, ya que muchas personas identifican la moneda visualmente, por la forma y el esquema de colores del logotipo, y no por la designaci√≥n de la letra. <br><br>  El cambio de estado ocurre en el momento en que se detecta una transacci√≥n entrante en la direcci√≥n de facturaci√≥n.  En este momento, los detalles desaparecen, ya que ya no son necesarios;  el usuario entra en modo de espera y la p√°gina necesita un flujo constante de informaci√≥n sobre el estado de la transacci√≥n.  Ahora en la p√°gina puede encontrar: el tiempo de espera hasta que se complete la transacci√≥n, el n√∫mero actual de confirmaciones, un breve comentario que explica las acciones adicionales. <br><br>  La p√°gina debe ser f√°cil de entender, intuitiva y al mismo tiempo suficientemente informativa.  Para compradores experimentados, se debe hacer hincapi√© en la direcci√≥n y la cantidad. <br><br>  De los requisitos anteriores, se obtuvo un dise√±o para la p√°gina futura. <br><br><img src="https://habrastorage.org/webt/zb/v3/nv/zbv3nvvp1jnpyu1h1udaydk1vg8.gif"><br><br><h3>  Backend </h3><br>  <b>¬°La primera opci√≥n para</b> implementar el backend es prescindir de √©l!  Al generar la p√°gina de pago, se sabe de antemano a qu√© direcci√≥n se enviar√° el dinero.  Puede recibir nuevas transacciones en esta direcci√≥n del explorador utilizando las herramientas JS.  Por lo tanto, la tarea es escribir conectores en el explorador e interrogar peri√≥dicamente al necesario.  Un diagrama de clase est√°tico podr√≠a verse as√≠: <br><br><img src="https://habrastorage.org/webt/eu/h9/k2/euh9k2ahzvxmqe4wyeco836lary.png"><br><br>  <i>Pros:</i> no hay carga en nuestras capacidades, es f√°cil de implementar, no hay amenazas de seguridad potenciales. <br><br>  <i>Contras:</i> fuentes poco confiables y recepci√≥n prematura de nueva informaci√≥n, dificultades para entregar actualizaciones de c√≥digo base a clientes finales (almacenamiento en cach√© no controlado).  Menos decisivo: muchas monedas no tienen un explorador estable con una API desarrollada. <br><br>  <b>La segunda opci√≥n</b> (en funcionamiento) es su propio microservicio, que recibe informaci√≥n directamente del grupo de nodos, la filtra y la distribuye entre las p√°ginas de pago.  El uso de Eventos del lado del servidor en el cliente reducir√° la redundancia y ahorrar√° tr√°fico.  Los SSE encajan en el caso de uso, ya que la p√°gina es pasiva en su comportamiento: solo acepta nueva informaci√≥n. <br><br>  <i>Contras:</i> muchos costos de implementaci√≥n, carga adicional en el equipo. <br><br>  <i>Pros:</i> alto nivel de confiabilidad e independencia de los servicios de terceros;  El contexto del pedido, no la transacci√≥n. <br>  Diagrama del circuito: <br><br><img src="https://habrastorage.org/webt/fm/cx/p2/fmcxp2z1jvfwu0ugtqviirg1ply.png"><br><br>  Cuando se abre la p√°gina de pago en el navegador del cliente, se env√≠a una solicitud para crear una conexi√≥n SSE al backend as√≠ncrono del microservicio.  La solicitud indica la direcci√≥n que se debe rastrear, el monto del pago, la vida √∫til y otros par√°metros menores.  En el backend, esto se almacena en el almacenamiento noSQL en memoria.  Cada vez que aparece un nuevo bloque en cualquier nodo blockchain, la aplicaci√≥n recibe y extrae informaci√≥n √∫til de este en las direcciones y transacciones almacenadas en la base de datos.  Si el siguiente bloque es √∫til, se env√≠an actualizaciones a los clientes.  Las conexiones se cierran por iniciativa del servidor cuando se reciben suficientes confirmaciones o el TTL ha expirado. <br><br>  Por lo tanto, el backend realiza operaciones intensivas en recursos y dirige el tr√°fico solo cuando llega nueva informaci√≥n al nodo, y no hay una "interrogaci√≥n" peri√≥dica para nueva informaci√≥n.  Gracias a la asincron√≠a, obtenemos alta velocidad con miles de conexiones simult√°neas. <br><br>  Sabiendo que para las monedas con PoW, la demora en recibir nueva informaci√≥n en un segundo es insignificante, la escala horizontal m√≠nima de dicho sistema dar√° un gran aumento en el rendimiento.  En d√≠as especialmente activos, como el Black Friday, la carga aumenta.  En caso de que el sistema falle o est√© fallando t√©cnicamente, el cliente tiene un estado de reserva en el que la p√°gina permanece en el modo de visualizaci√≥n de detalles para siempre.  Para las monedas PoS, se puede omitir el paso de controlar el n√∫mero de confirmaciones, ya que la velocidad de la transacci√≥n suele ser de 2 a 5 segundos. <br><br>  <b>La tercera opci√≥n para la</b> implementaci√≥n del backend es h√≠brida, cuando depende de la velocidad de la transacci√≥n blockchain y de la informaci√≥n sobre la disponibilidad actual de servicios de terceros, se utiliza la interacci√≥n SSE o HTTP con los exploradores.  Es el m√°s efectivo y lento al mismo tiempo. <br><br>  La tecnolog√≠a front-end adecuada para la tarea es vue.js con representaci√≥n declarativa y la capacidad de crear varios estados de componentes.  Es una biblioteca ligera con una estructura elegante y modificaci√≥n DOM reactiva.  La fuente de datos es la conexi√≥n SSE que se abre cuando se inicializa el componente. <br><br><h3>  Dise√±o </h3><br><img src="https://habrastorage.org/webt/xm/c3/vs/xmc3vsycxf9ocy26iwqne_qofqq.gif"><br><br>  Desarrollamos el producto y lo hacemos de alta calidad y confiable para que los pagos de blockchain sean convenientes, masivos y asequibles.  No solo amamos el dinero, sino tambi√©n las tecnolog√≠as m√°s avanzadas, tareas complejas y soluciones elegantes. <br><br>  Al desarrollar el sistema de pago <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">B2BinPay,</a> regularmente resolvemos problemas que, a pesar de su aparente simplicidad, requieren un enfoque no est√°ndar o una nueva apariencia.  Agradecer√≠amos sus comentarios, comentarios y sugerencias.  Si desea aportar ideas nuevas y audaces al servicio de pago que se utiliza en todo el mundo, consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">las vacantes actuales</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447418/">https://habr.com/ru/post/447418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447408/index.html">Aprende ingl√©s de primaria a intermedia: recursos √∫tiles y motivaci√≥n</a></li>
<li><a href="../447410/index.html">Hoguera provincial o nacimiento de una naci√≥n.</a></li>
<li><a href="../447412/index.html">Monitoreo de mensajes en RabbitMQ</a></li>
<li><a href="../447414/index.html">Lanzamiento de ML.NET 1.0 RC. Que hay de nuevo</a></li>
<li><a href="../447416/index.html">PHP Encantador punteado sobre comillas</a></li>
<li><a href="../447420/index.html">Salto de la estratosfera</a></li>
<li><a href="../447422/index.html">Experiencia de video divertida: en lugar de VR: gafas con espejos Ximmerse Visor-X</a></li>
<li><a href="../447424/index.html">Reaktive - biblioteca multiplataforma para Kotlin reactivo</a></li>
<li><a href="../447426/index.html">¬øC√≥mo, a qui√©n y por qu√© ir a consultar? Experiencia personal con Big Data</a></li>
<li><a href="../447430/index.html">IntelliJ IDEA 2019.1: Personalizaci√≥n de temas de interfaz, cambio de expresiones de Java 12, depuraci√≥n dentro de contenedores Docker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>