<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏳️ 👨‍🚀 💕 Développement d'applications Web à Rust 👩🏾‍🚒 🐛 🈴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur du matériel, dont nous publions la traduction aujourd'hui, dit que sa dernière expérience dans le domaine de l'architecture des projets logic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Développement d'applications Web à Rust</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/416933/">  L'auteur du matériel, dont nous publions la traduction aujourd'hui, dit que sa dernière expérience dans le domaine de l'architecture des projets logiciels a été la création d'une application Web fonctionnelle utilisant uniquement le langage Rust et avec le minimum possible d'utilisation du code modèle.  Dans cet article , il veut partager avec les lecteurs du fait qu'il a découvert la conception de l'application et de répondre à la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">question</a> de savoir si déjà Rust prêt à l' utiliser dans différents domaines du développement web. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/tn/-c/pw/tn-cpwgs5issogf9f6j500n3lec.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Aperçu du projet</font> </h2><br>  Le code du projet qui sera discuté ici peut être trouvé sur <a href="">GitHub</a> .  Les parties client et serveur de l'application sont situées dans le même référentiel, ceci pour simplifier la maintenance du projet.  Il convient de noter que Cargo devra compiler les applications frontend et backend avec différentes dépendances.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici,</a> vous pouvez jeter un œil à une application qui fonctionne. <br><br>  Notre projet est une simple démonstration du mécanisme d'authentification.  Il vous permet de vous connecter avec le nom d'utilisateur et le mot de passe sélectionnés (ils doivent être identiques). <br><br>  Si le nom d'utilisateur et le mot de passe sont différents, l'authentification échouera.  Une fois l'authentification réussie, le jeton <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JWT</a> (jeton Web JSON) est stocké à la fois côté client et côté serveur.  Le stockage du jeton sur le serveur dans de telles applications n'est généralement pas nécessaire, mais je l'ai fait à des fins de démonstration.  Ceci, par exemple, peut être utilisé pour savoir combien d'utilisateurs sont connectés.  L'application entière peut être configurée à l'aide d'un seul fichier <a href="">Config.toml</a> , par exemple, en spécifiant les informations d'identification pour accéder à la base de données, ou l'adresse du serveur et le numéro de port.  Voici à quoi ressemble le code standard de ce fichier pour notre application. <br><br><pre><code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">server</span></span>] ip = <span class="hljs-string"><span class="hljs-string">"127.0.0.1"</span></span> port = <span class="hljs-string"><span class="hljs-string">"30080"</span></span> tls = false [<span class="hljs-type"><span class="hljs-type">log</span></span>] actix_web = <span class="hljs-string"><span class="hljs-string">"debug"</span></span> webapp = <span class="hljs-string"><span class="hljs-string">"trace"</span></span> [<span class="hljs-type"><span class="hljs-type">postgres</span></span>] host = <span class="hljs-string"><span class="hljs-string">"127.0.0.1"</span></span> username = <span class="hljs-string"><span class="hljs-string">"username"</span></span> password = <span class="hljs-string"><span class="hljs-string">"password"</span></span> database = <span class="hljs-string"><span class="hljs-string">"database"</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Développement du client d'application</font> </h2><br>  Pour développer le côté client de l'application, j'ai décidé d'utiliser l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">if</a> .  Il s'agit d'un cadre Rust moderne inspiré par Elm, Angular et React.  Il est conçu pour créer des parties clientes d'applications Web multithread à l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebAssembly</a> (Wasm).  Actuellement, ce projet est en développement actif, alors qu'il n'y a pas beaucoup de versions stables. <br><br>  Le framework <code>yew</code> repose sur l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cargo-web</a> , qui est conçu pour la compilation croisée de code dans Wasm. <br><br>  L'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cargo-web</a> est une dépendance directe à l' <code>yew</code> qui simplifie la compilation croisée du code Rust dans Wasm.  Voici trois objectifs principaux pour compiler Wasm qui sont disponibles via cet outil: <br><br><ul><li>  <code>asmjs-unknown-emscripten</code> - utilise asm.js via Emscripten. </li><li>  <code>wasm32-unknown-emscripten</code> - utilise WebAssembly via Emscripten </li><li>  <code>wasm32-unknown-unknown</code> - utilise WebAssembly avec le backend Rust natif pour WebAssembly </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5c/2c4/6b2/d5c2c46b286c3d790ec0880d7919a7de.jpg"></div><br>  <i><font color="#999999">Webassembly</font></i> <br><br>  J'ai décidé d'utiliser la dernière option, qui nécessite l'utilisation de l'assemblage «nuit» du compilateur Rust, mais qui illustre au mieux les capacités natives de Wasm de Rust. <br>  Si nous parlons de WebAssembly, parler de Rust aujourd'hui est le sujet le plus chaud.  Une énorme quantité de travail est en cours sur la compilation croisée de Rust dans Wasm et son intégration dans l'écosystème Node.js (à l'aide des packages npm).  J'ai décidé de mettre en œuvre le projet sans aucune dépendance JavaScript. <br><br>  Lors du démarrage du frontend d'une application web (dans mon projet, cela se fait avec la commande <code>make frontend</code> ), <code>cargo-web</code> compile l'application dans Wasm et l'emballe, en ajoutant des matériaux statiques.  <code>cargo-web</code> lance <code>cargo-web</code> un serveur web local, qui vous permet d'interagir avec l'application à des fins de développement.  Voici ce qui se passe dans la console lorsque vous exécutez la commande ci-dessus: <br><br><pre> <code class="hljs vhdl">&gt; make frontend  Compiling webapp v0.<span class="hljs-number"><span class="hljs-number">3.0</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>:///home/sascha/webapp.rs)   Finished <span class="hljs-keyword"><span class="hljs-keyword">release</span></span> [optimized] target(s) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">11.86</span></span>s   Garbage collecting <span class="hljs-string"><span class="hljs-string">"app.wasm"</span></span>...   Processing <span class="hljs-string"><span class="hljs-string">"app.wasm"</span></span>...   Finished processing <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">"app.wasm"</span></span>! <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> you need <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> serve any extra files put them <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the <span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>' directory <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the root <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> your crate; they will be served alongside your application. You can also put a <span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>' directory <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> your <span class="hljs-symbol"><span class="hljs-symbol">'src</span></span>' directory. Your application <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> being served at '/app.js'. It will be automatically rebuilt <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you make any changes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> your code. You can <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> the web server at `http://<span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>:<span class="hljs-number"><span class="hljs-number">8000</span></span>`.</code> </pre> <br>  Le framework <code>yew</code> présente des fonctionnalités très intéressantes.  Parmi eux, la prise en charge des architectures de composants réutilisables.  Cette fonctionnalité a simplifié la répartition de mon application en trois composants principaux: <br><br>  <a href="">RootComponent</a> .  Ce composant est directement monté sur la <code>&lt;body&gt;</code> du site Web.  Il décide quel composant enfant doit être chargé ensuite.  Si, à la première entrée de la page, un jeton JWT est trouvé, il essaie de mettre à jour ce jeton en contactant la partie serveur de l'application.  Si cela échoue, la transition vers le composant <code>LoginComponent</code> est <code>LoginComponent</code> . <br><br>  <a href="">LoginComponent</a> .  Ce composant est un descendant du composant <code>RootComponent</code> ; il contient un formulaire avec des champs pour entrer les informations d'identification.  De plus, il interagit avec le backend de l'application pour organiser un schéma d'authentification simple basé sur la vérification du nom d'utilisateur et du mot de passe et, en cas d'authentification réussie, enregistre le JWT dans un cookie.  De plus, si l'utilisateur a pu s'authentifier, il effectue la transition vers le composant <code>ContentComponent</code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/965/135/b28965135fb93fd3e077de2f06c45e13.png"></div><br>  <i><font color="#999999">Apparence du composant LoginComponent</font></i> <br><br>  <a href="">ContentComponent</a>  Ce composant est un autre descendant du composant <code>RootComponent</code> .  Il contient ce qui est affiché sur la page principale de l'application (pour le moment c'est juste un titre et un bouton pour quitter le système).  L'accès peut être obtenu via <code>RootComponent</code> (si l'application, au démarrage, a réussi à trouver un jeton de session valide), ou via <code>LoginComponent</code> (en cas d'authentification réussie).  Ce composant échange des données avec le backend lorsque l'utilisateur clique sur le bouton de déconnexion. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7c5/a4f/9f1/7c5a4f9f1b90c19815a0c32fed2582a6.png"></div><br>  <i><font color="#999999">Composant ContentComponent</font></i> <br><br>  <a href="">RouterComponent</a>  Ce composant stocke tous les itinéraires possibles entre les composants contenant du contenu.  De plus, il contient l'état initial du <code>loading</code> et de l' <code>error</code> de l'application.  Il est directement connecté au <code>RootComponent</code> . <br><br>  L'un des concepts clés suivants de l' <code>yew</code> dont nous allons discuter maintenant est celui des services.  Ils vous permettent de réutiliser la même logique dans différents composants.  Imaginons qu'il s'agisse d'interfaces de journalisation ou d'outils pour prendre en charge l'utilisation de <a href="">cookies</a> .  Les services ne stockent aucun état global; ils sont créés lors de l'initialisation des composants.  En plus des services, <code>yew</code> soutient le concept d'agent.  Ils peuvent être utilisés pour organiser le partage des données entre les différents composants, pour maintenir l'état général de l'application, tel que celui nécessaire à l'agent responsable du routage.  Pour organiser le système de routage de notre application, couvrant tous les composants, <a href="">notre propre agent et service de routage</a> ont été mis en place ici.  Il <code>yew</code> pas de routeur standard dans <code>yew</code> , mais dans le référentiel du framework, vous pouvez trouver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un exemple</a> d'implémentation de routeur qui prend en charge diverses opérations d'URL. <br><br>  Je suis heureux de noter que <code>yew</code> utilise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'API Web Workers</a> pour exécuter des agents sur divers threads et utilise un planificateur local attaché au thread pour résoudre des tâches parallèles.  Cela permet de développer des applications de navigateur avec un haut degré de multithreading sur Rust. <br><br>  Chaque composant implémente sa propre <a href="">caractéristique Renderable</a> , qui nous permet d'inclure du code HTML directement dans le code source de Rust à l'aide de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">macro html! {}</a> . <br><br>  C'est une excellente fonctionnalité et, bien sûr, son utilisation correcte est contrôlée par le compilateur.  Voici le <code>Renderable</code> implémentation de <code>Renderable</code> dans le composant <code>LoginComponent</code> . <br><br><pre> <code class="hljs xml">impl Renderable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LoginComponent</span></span></span><span class="hljs-tag">&gt;</span></span> for LoginComponent {   fn view(&amp;self) -&gt; Html<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Self</span></span></span><span class="hljs-tag">&gt;</span></span> {       html! {           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-card uk-card-default uk-card-body uk-width-1-3@s uk-position-center"</span></span></span><span class="hljs-tag">,&gt;</span></span>               <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onsubmit</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"return false"</span></span></span><span class="hljs-tag">,&gt;</span></span>                   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-fieldset"</span></span></span><span class="hljs-tag">,&gt;</span></span>                       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-legend"</span></span></span><span class="hljs-tag">,&gt;</span></span>{"Authentication"}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag">&gt;</span></span>                       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-margin"</span></span></span><span class="hljs-tag">,&gt;</span></span>                           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-input"</span></span></span><span class="hljs-tag">,                                  </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Username"</span></span></span><span class="hljs-tag">,                                  </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">&amp;self.username,</span></span></span><span class="hljs-tag">                                  </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">oninput</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">|e|</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Message::UpdateUsername</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">e.value</span></span></span><span class="hljs-tag">), /&gt;</span></span>                       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>                       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-margin"</span></span></span><span class="hljs-tag">,&gt;</span></span>                           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-input"</span></span></span><span class="hljs-tag">,                                  </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span><span class="hljs-tag">,                                  </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Password"</span></span></span><span class="hljs-tag">,                                  </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">&amp;self.password,</span></span></span><span class="hljs-tag">                                  </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">oninput</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">|e|</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Message::UpdatePassword</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">e.value</span></span></span><span class="hljs-tag">), /&gt;</span></span>                       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>                       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-button uk-button-default"</span></span></span><span class="hljs-tag">,                               </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">,                               </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">self.button_disabled,</span></span></span><span class="hljs-tag">                               </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">|_|</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Message::LoginRequest</span></span></span><span class="hljs-tag">,&gt;</span></span>{"Login"}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span>                       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uk-margin-small-left uk-text-warning uk-text-right"</span></span></span><span class="hljs-tag">,&gt;</span></span>                           {&amp;self.error}                       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>                   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span>               <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       }   } }</code> </pre> <br>  La connexion entre le frontend et le backend est basée sur les connexions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebSocket</a> utilisées par chaque client.  La force de la technologie WebSocket réside dans le fait qu'elle convient à la transmission de messages binaires, ainsi que le fait que le serveur, si nécessaire, peut envoyer des notifications push aux clients.  <code>yew</code> dispose d'un service WebSocket standard, mais j'ai décidé de créer sa <a href="">propre version</a> à des fins de démonstration, principalement en raison de l'initialisation "paresseuse" des connexions directement à l'intérieur du service.  Si le service WebSocket devait être créé lors de l'initialisation du composant, je devrais surveiller de nombreuses connexions. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25e/8bb/d66/25e8bbd66ae29a1b970047bf16a3ad5e.png"></div><br>  <i><font color="#999999">Protocole Cap'n Proto</font></i> <br><br>  J'ai décidé d'utiliser le protocole <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cap'n Proto</a> (au lieu de quelque chose comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSON</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MessagePack</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CBOR</a> ) comme couche pour transmettre des données d'application pour des raisons de vitesse et de compacité.  Il convient de noter que je n'ai pas utilisé l'interface de protocole <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RPC de</a> Cap'n Proto, car son implémentation Rust ne compile pas pour WebAssembly (en raison des dépendances Unix de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">toxio-rs</a> ).  Cela a quelque peu compliqué la sélection des demandes et des réponses des types corrects, mais ce problème peut être résolu en utilisant une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API bien structurée</a> .  Voici la déclaration du protocole Cap'n Proto pour l'application. <br><br><pre> <code class="hljs pgsql">@<span class="hljs-number"><span class="hljs-number">0x998efb67a0d7453f</span></span>; struct Request {   <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> {       <span class="hljs-keyword"><span class="hljs-keyword">login</span></span> :<span class="hljs-keyword"><span class="hljs-keyword">union</span></span> {           credentials :<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> {               username @<span class="hljs-number"><span class="hljs-number">0</span></span> :<span class="hljs-type"><span class="hljs-type">Text</span></span>;               <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> @<span class="hljs-number"><span class="hljs-number">1</span></span> :<span class="hljs-type"><span class="hljs-type">Text</span></span>;           }           token @<span class="hljs-number"><span class="hljs-number">2</span></span> :<span class="hljs-type"><span class="hljs-type">Text</span></span>;       }       logout @<span class="hljs-number"><span class="hljs-number">3</span></span> :<span class="hljs-type"><span class="hljs-type">Text</span></span>; # The <span class="hljs-keyword"><span class="hljs-keyword">session</span></span> token   } } struct Response {   <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> {       <span class="hljs-keyword"><span class="hljs-keyword">login</span></span> :<span class="hljs-keyword"><span class="hljs-keyword">union</span></span> {           token @<span class="hljs-number"><span class="hljs-number">0</span></span> :<span class="hljs-type"><span class="hljs-type">Text</span></span>;           error @<span class="hljs-number"><span class="hljs-number">1</span></span> :<span class="hljs-type"><span class="hljs-type">Text</span></span>;       }       logout: <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> {           success @<span class="hljs-number"><span class="hljs-number">2</span></span> :<span class="hljs-type"><span class="hljs-type">Void</span></span>;           error @<span class="hljs-number"><span class="hljs-number">3</span></span> :<span class="hljs-type"><span class="hljs-type">Text</span></span>;       }   } }</code> </pre> <br>  Vous pouvez voir que nous avons ici deux versions différentes de la demande de connexion. <br><br>  L'un est pour <code>LoginComponent</code> (ici, pour obtenir un jeton, un nom et un mot de passe sont utilisés), et un autre pour <code>RootComponent</code> (il est utilisé pour mettre à jour un jeton existant).  Tout ce qui est nécessaire pour que le protocole fonctionne est emballé dans le service de <a href="">protocole</a> , grâce auquel il est pratique de réutiliser les capacités correspondantes dans diverses parties du frontend. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a0b/c9e/6ed/a0bc9e6ed943353b24475ecee6714648.jpg"></div><br>  <i><font color="#999999">UIkit - un framework frontal modulaire compact pour développer des interfaces web rapides et puissantes</font></i> <br><br>  L'interface utilisateur de la partie client de l'application est basée sur le framework <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UIkit</a> , sa version 3.0.0 sera publiée dans un futur proche.  Un script <a href="">build.rs</a> spécialement préparé télécharge automatiquement toutes les dépendances UIkit nécessaires et compile la feuille de style résultante.  Cela signifie que vous pouvez ajouter vos propres styles à un seul fichier <a href="">style.scss</a> , qui peut être appliqué à l'ensemble de l'application.  C'est très pratique. <br><br><h3>  <font color="#3AC1EF">▍Frontend de test</font> </h3><br>  Je pense qu'il y a des problèmes avec le test de notre solution.  Le fait est qu'il est très simple de tester des services individuels, mais l' <code>yew</code> ne fournit pas au développeur un moyen pratique de tester les composants et les agents.  Désormais, dans le cadre de Pure Rust, l'intégration et les tests de bout en bout du frontend ne sont pas disponibles.  Ici, vous pouvez utiliser des projets comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cypress</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Protractor</a> , mais avec cette approche, vous devrez inclure beaucoup de modèles de code JavaScript / TypeScript dans le projet, j'ai donc décidé d'abandonner la mise en œuvre de ces tests. <br><br>  Soit dit en passant, voici une idée pour un nouveau projet: un cadre pour les tests de bout en bout écrit en Rust. <br><br><h2>  <font color="#3AC1EF">Développement côté serveur d'applications</font> </h2><br>  Pour implémenter le côté serveur de l'application, j'ai choisi le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">framework actix-web</a> .  Il s'agit d'un cadre de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modèle d'acteur</a> basé sur Rust, compact, pratique et très rapide.  Il prend en charge toutes les technologies nécessaires, telles que WebSockets, TLS et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://actix.rs/docs/">HTTP / 2.0</a> .  Ce cadre prend en charge divers gestionnaires et ressources, mais dans notre application, seuls quelques itinéraires principaux ont été utilisés: <br><br><ul><li>  <code>/ws</code> est la principale ressource pour les communications WebSocket. </li><li>  <code>/</code> - le gestionnaire principal qui donne accès à l'application frontale statique. </li></ul><br>  Par défaut, <code>actix-web</code> démarre les workflows dans la quantité correspondant au nombre de cœurs de processeur disponibles sur l'ordinateur local.  Cela signifie que si l'application a un état, elle devra être partagée en toute sécurité entre tous les threads, mais grâce à des modèles informatiques parallèles fiables de Rust, ce n'est pas un problème.  Quoi qu'il en soit, le backend devrait être un système sans état, car de nombreuses copies peuvent être déployées en parallèle dans un environnement cloud (comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes</a> ).  Par conséquent, les données constituant l'état de l'application doivent être séparées du backend.  Par exemple, ils peuvent se trouver dans une instance distincte d'un conteneur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Docker</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58d/740/7b0/58d7407b024db94b6c47fb4433f1c4f6.png"></div><br>  <i><font color="#999999">SGBD PostgreSQL et projet Diesel</font></i> <br><br>  En tant que principal entrepôt de données, j'ai décidé d'utiliser le SGBD <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PostgreSQL</a> .  Pourquoi?  Ce choix a déterminé l'existence d'un merveilleux projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Diesel</a> qui prend déjà en charge PostgreSQL et propose un système ORM sécurisé et extensible et un outil de création de requêtes pour lui.  Tout cela correspond parfaitement aux besoins de notre projet, car <code>actix-web</code> prend déjà en charge Diesel.  Par conséquent, ici, pour effectuer des opérations CRUD avec des informations sur les sessions dans la base de données, vous pouvez utiliser un langage spécial qui prend en compte les spécificités de Rust.  Voici un exemple de gestionnaire <code>UpdateSession</code> pour <code>actix-web</code> basé sur Diesel.rs. <br><br><pre> <code class="hljs rust"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Handler&lt;UpdateSession&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> DatabaseExecutor {   <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Result</span></span></span></span> = <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;Session, Error&gt;;   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, msg: UpdateSession, _: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Self::Context) -&gt; Self::<span class="hljs-built_in"><span class="hljs-built_in">Result</span></span> {       <span class="hljs-comment"><span class="hljs-comment">//         debug!("Updating session: {}", msg.old_id);       update(sessions.filter(id.eq(&amp;msg.old_id)))           .set(id.eq(&amp;msg.new_id))           .get_result::&lt;Session&gt;(&amp;self.0.get()?)           .map_err(|_| ServerError::UpdateToken.into())   } }</span></span></code> </pre> <br>  Le projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r2d2</a> est utilisé pour établir une connexion entre <code>actix-web</code> et Diesel.  Cela signifie que nous avons (en plus de l'application avec ses flux de travail) l'état partagé de l'application, qui prend en charge de nombreuses connexions de base de données en tant que pool de connexions unique.  Cela simplifie considérablement la mise à l'échelle sérieuse du backend, ce qui rend cette solution flexible.  Vous trouverez ici le code responsable de la création de l'instance de serveur. <br><br><h3>  <font color="#3AC1EF">▍Tester le backend</font> </h3><br>  Les <a href="">tests d'intégration</a> backend dans notre projet sont effectués en lançant une instance de serveur de test et en se connectant à une base de données déjà en cours d'exécution.  Ensuite, vous pouvez utiliser le client WebSocket standard (j'ai utilisé de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tungsténite</a> ) pour envoyer au serveur les données générées à l'aide du protocole Cap'n Proto et comparer les résultats avec ceux attendus.  Cette configuration de test s'est avérée excellente.  Je n'ai pas utilisé de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">serveurs de test</a> spéciaux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">actix-web</a> , car beaucoup plus de travail n'est pas nécessaire pour configurer et exécuter un vrai serveur.  Les tests unitaires d'arrière-plan se sont avérés, comme prévu, être une tâche assez simple; la réalisation de tels tests ne pose aucun problème. <br><br><h2>  <font color="#3AC1EF">Déploiement de projet</font> </h2><br>  L'application est très facile à déployer à l'aide de l'image Docker. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dff/f65/21a/dfff6521a8238acb9927a54b515dd3d5.png"></div><br>  <i><font color="#999999">Docker</font></i> <br><br>  À l'aide de la <code>make deploy</code> vous pouvez créer une image appelée <code>webapp</code> qui contient des exécutables backend liés statiquement, le fichier <code>Config.toml</code> actuel, des certificats TLS et du contenu frontal statique.  L'assemblage d'exécutables entièrement liés statiquement dans Rust est implémenté à l'aide d'une version modifiée de l'image Docker de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rust-musl-builder</a> .  Une application Web terminée peut être testée à l'aide de la commande <code>make run</code> , qui lance un conteneur compatible réseau.  Le conteneur PostgreSQL doit être exécuté en parallèle avec le conteneur d'application pour garantir le fonctionnement du système.  En général, le processus de déploiement de notre système est assez simple, de plus, grâce aux technologies utilisées ici, nous pouvons parler de sa flexibilité suffisante, simplifiant son adaptation possible aux besoins d'une application en développement. <br><br><h2>  <font color="#3AC1EF">Technologies utilisées dans le développement de projets</font> </h2><br>  Voici le diagramme de dépendance d'application. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/826/d31/d8a/826d31d8afa0cda478be17a096b194fb.png"></div><br>  <i><font color="#999999">Technologies utilisées pour développer une application web à Rust</font></i> <br><br>  Le seul composant utilisé par le frontend et le backend est la version Rust de Cap'n Proto, qui nécessite la création du compilateur Cap'n Proto installé localement. <br><br><h2>  <font color="#3AC1EF">Les résultats.</font>  <font color="#3AC1EF">La rouille est-elle prête pour la production Web?</font> </h2><br>  C'est une grande question.  Voici ce que je peux répondre.  Du point de vue des serveurs, je suis enclin à répondre «oui», car l'écosystème Rust, en plus d' <code>actix-web</code> , possède une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pile HTTP</a> très mature et de nombreux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">frameworks</a> différents pour le développement rapide d'API et de services serveurs. <br><br>  Si nous parlons du front-end, alors, grâce à l'attention générale portée à WebAssembly, beaucoup de travail se poursuit actuellement.  Cependant, les projets créés dans ce domaine doivent atteindre la même maturité que les projets serveur.  Cela est particulièrement vrai pour la stabilité de l'API et les capacités de test.  Alors maintenant, je dis «non» à l'utilisation de Rust à l'avant, mais je ne peux m'empêcher de noter qu'il se déplace dans la bonne direction. <br><br>  <b>Chers lecteurs!</b>  <b>Utilisez-vous Rust dans le développement Web?</b> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/dm/hr/vi/dmhrvilz-u1viond6zqzzlwi7xg.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416933/">https://habr.com/ru/post/fr416933/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416921/index.html">Comment des centaines de milliers d'antennes se réunissent dans un seul télescope</a></li>
<li><a href="../fr416925/index.html">Ce que nous savons sur Ant Design</a></li>
<li><a href="../fr416927/index.html">Startups de chaussures - et pourquoi la Silicon Valley les aime tant</a></li>
<li><a href="../fr416929/index.html">DesignOps, en rupture rapide avec la tendance</a></li>
<li><a href="../fr416931/index.html">Visualisation des commentaires sur YouTube: vidéos, chaînes, genres, cross-genres</a></li>
<li><a href="../fr416935/index.html">Et quel est votre AppSee? [Re: l'application Burger King enregistre secrètement l'écran de votre téléphone! ]</a></li>
<li><a href="../fr416937/index.html">Vous voulez dépenser un million - demandez-moi comment</a></li>
<li><a href="../fr416939/index.html">Présentation des fonctionnalités du protocole Bitshares</a></li>
<li><a href="../fr416941/index.html">Théorie du bonheur. Introduction à la merphologie</a></li>
<li><a href="../fr416943/index.html">Matériaux utiles pour la conception d'interfaces vocales</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>