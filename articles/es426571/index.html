<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß£ üë©üèº‚Äçüåæ üî∑ Un enfoque sistem√°tico de la velocidad: mediciones en l√≠nea en el front end üë©üèº‚Äç‚úàÔ∏è üí∏ ü•ß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El comando de velocidad Yandex optimiza manualmente los resultados de b√∫squeda. Hacerlo a ciegas es dif√≠cil y, a menudo, simplemente in√∫til. Por lo ta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Un enfoque sistem√°tico de la velocidad: mediciones en l√≠nea en el front end</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/426571/"> El comando de velocidad Yandex optimiza manualmente los resultados de b√∫squeda.  Hacerlo a ciegas es dif√≠cil y, a menudo, simplemente in√∫til.  Por lo tanto, la compa√±√≠a construy√≥ una infraestructura para recopilar m√©tricas, probar la velocidad y analizar los datos. <br><br>  Acerca de qu√© m√©tricas deben usarse y c√≥mo optimizar todo, el desarrollador de las interfaces de Yandex <b>Andrei Prokopyuk</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Andre_487</a> ) lo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">sabe</a> . <br><br><img src="https://habrastorage.org/webt/jh/gn/r4/jhgnr48w9fhjphnfjkjcggtsdds.png"><br><br>  El material se basa en el discurso de Andrey en la conferencia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HolyJS</a> .  Debajo del corte - y video, y una versi√≥n de texto del informe. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Whm2FMBIgA0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><blockquote>  Adem√°s de este informe sobre mediciones en l√≠nea, hay un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">informe de Alexei Kalmakov</a> (tambi√©n de Yandex) sobre mediciones fuera de l√≠nea, en su caso no hay una versi√≥n de texto, pero hay un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">video</a> disponible. </blockquote><br><br>  Los resultados de b√∫squeda de Yandex consisten en muchos bloques diferentes, clases de respuestas a las consultas de los usuarios.  M√°s de 50 personas trabajan en ellos en la empresa, y para que la tasa de emisi√≥n no disminuya, cuidamos constantemente el desarrollo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/044/4e1/e2a/0444e1e2a6db39e37b9c2a085c7433db.jpg"><br><br>  Nadie discutir√° que a los usuarios les gusta m√°s la interfaz r√°pida que la lenta.  Pero antes de comenzar a optimizar, es importante comprender c√≥mo afectar√° esto a su negocio.  ¬øLos desarrolladores necesitan pasar tiempo acelerando la interfaz si esto no afecta las m√©tricas comerciales? <br><br>  Para responder a esta pregunta, contar√© dos historias. <br><br><h2>  Historia de la introducci√≥n de una fuente web espec√≠fica en la emisi√≥n </h2><br>  Despu√©s de establecer un experimento con las fuentes, descubrimos que el tiempo promedio para procesar el contenido se deterior√≥ en un 3%, en 62 milisegundos.  No tanto si lo tomas como un delta en el vac√≠o.  El retraso notable a simple vista comienza con solo 100 milisegundos, y sin embargo, el tiempo hasta el primer clic aument√≥ de inmediato en un uno y medio por ciento. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ef/2b5/548/4ef2b5548ae1789980552312d0b92857.jpg"><br><br>  Los usuarios comenzaron a interactuar m√°s tarde con la p√°gina.  La cantidad de p√°ginas en las que se hizo clic disminuy√≥ en casi medio por ciento.  Se redujo el tiempo de presencia en el servicio y se aument√≥ el tiempo de ausencia. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c15/215/b5f/c15215b5fb72633582890da9e018d4a4.jpg"><br><br>  No comenzamos a implementar la funci√≥n con fuentes.  Despu√©s de todo, estos n√∫meros parecen peque√±os hasta que recuerdas la escala del servicio.  En realidad, uno y medio por ciento: cientos de miles de personas. <br><br>  Adem√°s, la velocidad tiene un efecto acumulativo.  Para una actualizaci√≥n con una participaci√≥n de no reclamada: 0.4% seguir√° m√°s y m√°s.  En Yandex, tales caracter√≠sticas se implementan en docenas por d√≠a, y si no lucha por cada acci√≥n, no durar√° mucho y alcanzar√° el 10%. <br><br><h2>  Historial de almacenamiento en cach√© de LS </h2><br>  Esta historia est√° relacionada con el hecho de que incorporamos una gran cantidad de contenido est√°tico en la p√°gina. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c33/3fd/7d2/c333fd7d205cc0695c8934cb0111c820.jpg"><br><br>  Debido a su alta variabilidad, no podemos compilarlo en un solo paquete o entregarlo con recursos externos.  La pr√°ctica ha demostrado que con la entrega en l√≠nea, la representaci√≥n e inicializaci√≥n de JavaScript es la m√°s r√°pida. <br><br>  Una vez que decidimos que usar un repositorio del navegador ser√≠a una buena idea.  Ponga todo en localStorage y, en las entradas posteriores a la p√°gina, c√°rguelo desde all√≠ y no lo transmita a trav√©s de la red. <br><br>  Luego nos centramos principalmente en las m√©tricas "tama√±o HTML" y "tiempo de entrega HTML" y obtuvimos buenos resultados en ellas.  A medida que pas√≥ el tiempo, inventamos nuevos m√©todos para medir la velocidad, adquirimos experiencia y decidimos hacer una doble verificaci√≥n, realizar un experimento inverso y desactivar la optimizaci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b9/37c/2c9/3b937c2c9c4f0a85c2e76a26d6fdfacf.jpg"><br><br>  El tiempo promedio de entrega de HTML (la m√©trica clave en el momento del desarrollo de la optimizaci√≥n) aument√≥ en un 12%, que es mucho.  Pero al mismo tiempo, el tiempo hasta que se dibuj√≥ el encabezado, antes de que comenzara el an√°lisis del contenido y antes de que se inicializara JavaScript.  Tambi√©n redujo el tiempo hasta el primer clic.  El porcentaje es peque√±o: 0.6, pero si recuerda la escala ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f88/35c/0fd/f8835c0fdce5780914f129f41f445f8d.jpg"><br><br>  Al deshabilitar la optimizaci√≥n, obtuvimos un empeoramiento en la m√©trica, notable solo para los especialistas, y al mismo tiempo, una mejora notable para el usuario. <br><br>  Se pueden extraer las siguientes conclusiones de esto: <br><br>  Primero, la velocidad realmente afecta los negocios y las m√©tricas comerciales. <br><br>  En segundo lugar, las optimizaciones deben ir precedidas de mediciones.  Si implementa algo, despu√©s de haber realizado malas mediciones, es probable que no haga nada √∫til.  La composici√≥n de la audiencia, la flota de dispositivos, los escenarios de interacci√≥n y las redes son diferentes en todas partes, y debe verificar qu√© funcionar√° exactamente para usted. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0bf/2c6/06b/0bf2c606bacfb7bc5769594fbc326a52.jpg"><br><br>  Una vez, Ash nos ense√±√≥ de los muertos siniestros primero a disparar, luego a pensar o no pensar en absoluto.  En velocidad, no tienes que hacer esto. <br><br>  Y el tercer punto: las mediciones deben reflejar la experiencia del usuario.  Por ejemplo, el tama√±o HTML y el tiempo de entrega son m√©tricas de baja velocidad porque el usuario no se sienta con devTools y no selecciona un servicio con menos retraso.  Pero qu√© m√©tricas son buenas y correctas, le diremos m√°s. <br><br><h2>  ¬øQu√© y c√≥mo medir? </h2><br>  Las mediciones deben comenzar con algunas m√©tricas clave que, a diferencia, por ejemplo, el tama√±o HTML, est√°n cerca de la experiencia del usuario. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec1/3c5/783/ec13c57830d7b1b3b8380273dda5bbc8.jpg"><br><br>  Si TTFCP (tiempo para la primera pintura con contenido) y TTFMP (tiempo para la primera pintura con sentido) indican el tiempo hasta la primera representaci√≥n del contenido y el tiempo antes de la representaci√≥n del contenido significativo, entonces el tercero es el tiempo antes de que se inicialice el marco, vale la pena explicarlo. <br><br>  Este es el momento en que el marco ya pas√≥ por la p√°gina, recopil√≥ todos los datos necesarios y colg√≥ los controladores.  Si el usuario hace clic en alg√∫n lugar en ese momento, recibir√° una respuesta din√°mica. <br><br>  Y la √∫ltima, cuarta m√©trica, el tiempo hasta la primera interactividad, generalmente se conoce como tiempo de interacci√≥n (TTI). <br><br>  Estas m√©tricas, a diferencia del tama√±o html o el tiempo de entrega, est√°n cerca de la experiencia del usuario. <br><br><h2>  Tiempo para la primera pintura completa </h2><br>  Para medir el momento en que el usuario vio el primer contenido en la p√°gina, hay una API de sincronizaci√≥n de pintura, hasta ahora solo disponible en cromo.  Los datos de √©l se pueden obtener de la siguiente manera. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e16/80a/c27/e1680ac270e35eaad20070c90e47066d.jpg"><br><br>  Con esta llamada, obtenemos un conjunto de eventos de representaci√≥n.  Hasta ahora se admiten dos tipos de eventos: primera pintura, cualquier representaci√≥n y primera pintura con contenido, cualquier representaci√≥n de contenido que no sea el fondo blanco de la pesta√±a vac√≠a y el contenido de fondo de la p√°gina. <br><br>  Entonces obtenemos una variedad de eventos, filtramos la pintura de primer contenido y enviamos con una determinada ID. <br><br><h2>  Tiempo para la primera pintura significativa </h2><br>  No hay ning√∫n evento en la API Paint Timing que indique que se haya presentado contenido significativo en la p√°gina.  Esto se debe al hecho de que dicho contenido en cada p√°gina es diferente.  Si hablamos del servicio de video, entonces lo principal es el reproductor, en los resultados de b√∫squeda, el primer resultado no publicitario.  Hay muchos servicios y a√∫n no se ha desarrollado una API universal.  Pero aqu√≠ entran en juego muletas probadas y buenas. <br><br>  Hay dos escuelas de muletas en Yandex para medir esta m√©trica: usar RequestAnimationFrame y medir con InterceptionObserver. <br><br>  En RequestAnimationFrame, la representaci√≥n se mide utilizando un intervalo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/22b/dfe/945/22bdfe945df84617220936267638cc21.jpg"><br><br>  Supongamos que hay un contenido significativo.  Aqu√≠ hay un div con clase main-content.  Se coloca un script delante de √©l, donde RequestAnimationFrame se llama dos veces. <br><br>  En la devoluci√≥n de llamada de la primera llamada, escriba el l√≠mite inferior del intervalo.  En la devoluci√≥n de llamada de la segunda - la parte superior.  Esto se debe a la estructura del marco que representa el navegador. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79d/783/a88/79d783a883b6a718095228cfbea29469.jpg"><br><br>  El primero es la ejecuci√≥n de JavaScript, luego el an√°lisis de estilos, luego el c√°lculo del dise√±o, la representaci√≥n y la composici√≥n. <br><br>  La devoluci√≥n de llamada, llamando a RequestAnimationFrame, se activa en la misma etapa que JavaScript, y el contenido se representa en la √∫ltima secci√≥n del marco durante la composici√≥n.  Por lo tanto, en la primera llamada, solo obtenemos el l√≠mite inferior, notablemente eliminado a tiempo de la salida de p√≠xeles en la pantalla. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/81c/788/f38/81c788f38c68e241cf3a34612503f9d0.jpg"><br><br>  Coloque dos cuadros uno al lado del otro.  Se puede ver que al final del primero de ellos el contenido fue procesado.  Escribimos el borde inferior de RequestAnimationFrame, llamado dentro de la primera devoluci√≥n de llamada, y la devoluci√≥n de llamada en el segundo marco.  Por lo tanto, obtenemos el intervalo de JavaScript llamado en el marco donde el contenido se proces√≥ en JavaScript en el segundo marco. <br><br><h2>  Interceptor Observador </h2><br>  Nuestra segunda muleta con el mismo contenido funciona de manera diferente.  Esta vez el gui√≥n se coloca a continuaci√≥n.  En √©l creamos InterceptionObserver y nos suscribimos a domNode. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd6/dea/87d/fd6dea87dd53e374e2ba19aa79d4a379.jpg"><br><br>  No pasamos par√°metros adicionales, por lo que medimos su intersecci√≥n con la ventana gr√°fica.  Este tiempo se registra como el tiempo exacto de renderizado. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/549/5ab/d02/5495abd0268d0d59077d00ade282989a.jpg"><br><br>  Esto funciona porque la intersecci√≥n del contenido principal y la ventana gr√°fica es la intersecci√≥n exacta que ve el usuario.  Esta API fue dise√±ada para saber exactamente cu√°ndo un usuario vio un anuncio, pero nuestra investigaci√≥n ha demostrado que esto tambi√©n funciona en unidades que no son de anuncios. <br><br>  De estos dos m√©todos, a√∫n es mejor usar RequestAnimationFrame: su soporte es m√°s amplio y nosotros lo probamos mejor en la pr√°ctica. <br><br><h2>  Js iniciado </h2><br>  Imagine un marco que tenga alg√∫n tipo de evento "init" al que pueda suscribirse, pero recuerde que en la pr√°ctica JS Inited es una m√©trica simple y compleja. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3bf/6fe/85c/3bf6fe85c743f0ad6c255d8e4c448eae.jpg"><br><br>  Simple: porque solo necesita encontrar el momento en que el marco ha terminado la disposici√≥n de los eventos.  Complejo: porque debe buscar este punto por su cuenta para cada marco. <br><br><h2>  Hora de interactuar </h2><br>  TTI a menudo se confunde con la m√©trica anterior, pero de hecho es un indicador del momento en que se libera la transmisi√≥n principal del navegador.  Durante la carga de la p√°gina, se realizan muchas tareas: desde la representaci√≥n de varios elementos hasta la inicializaci√≥n del marco.  Solo cuando est√° descargado llega el momento de la primera interactividad. <br><br>  El concepto de tareas largas y la API de tareas largas ayuda a medir esto. <br><br>  Primero sobre las tareas largas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f79/67b/828/f7967b8283a7302b1d8d9b1bd076cfac.jpg"><br><br>  Entre las tareas cortas indicadas por flechas, el navegador puede obstaculizar f√°cilmente el procesamiento de un evento de usuario, por ejemplo, entrada, porque tiene una alta prioridad.  Pero con las tareas largas indicadas por las flechas rojas, esto no funcionar√°. <br><br>  El usuario tendr√° que esperar hasta que se agote, y solo despu√©s de que el navegador procese su entrada.  Al mismo tiempo, el marco ya se puede inicializar y los botones funcionar√°n, pero lentamente.  Tal respuesta diferida es una experiencia de usuario bastante desagradable.  En el momento en que se completa la √∫ltima Tarea larga y el subproceso est√° vac√≠o durante mucho tiempo, la ilustraci√≥n aparece en 7 segundos y 300 milisegundos. <br><br>  ¬øC√≥mo medir este intervalo dentro de JavaScript? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/66f/f1b/114/66ff1b114d718aa4e31cf8c2f1094525.jpg"><br><br>  El primer paso se designa condicionalmente como la etiqueta del cuerpo de apertura, despu√©s de lo cual viene el script.  Esto crea un PerformanceObserver que se suscribe al evento Long Task.  Dentro de la devoluci√≥n de llamada PerformanceObserver, la informaci√≥n del evento se recopila en una matriz. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3e3/1c4/c60/3e31c4c60298c19431ca84a93c908394.jpg"><br><br>  Despu√©s de recopilar los datos, llega el momento del segundo paso.  Se designa condicionalmente como una etiqueta de cuerpo de cierre.  Tomamos el √∫ltimo elemento de la matriz, la √∫ltima tarea larga, observamos el momento de su finalizaci√≥n y verificamos si ha pasado suficiente tiempo. <br><br>  En el trabajo original sobre esta m√©trica, se tomaron 5 segundos como una constante, pero la elecci√≥n no se confirm√≥ de ninguna manera.  Result√≥ ser suficiente por 3 segundos.  Si pasan 3 segundos, contamos el tiempo hasta la primera interactividad; de lo contrario, configuramos Timeout y verificamos esta constante nuevamente. <br><br><h2>  ¬øC√≥mo procesar los datos? </h2><br>  Los datos deben recibirse de los clientes, procesarse y presentarse de manera conveniente.  Nuestro concepto de env√≠o de datos es bastante simple.  Se llama un contador. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/38f/158/cba/38f158cbaf1233223fdca1ba255f9e25.jpg"><br><br>  Transferimos los datos de una determinada m√©trica a un bol√≠grafo especial en el backend y los recopilamos en el repositorio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/884/cda/04a/884cda04a3b619b084dfde376a0645cc.jpg"><br><br>  Aqu√≠, la agregaci√≥n de datos se designa convencionalmente como una consulta SQL.  Estas son las principales agregaciones que generalmente consideramos por m√©tricas de velocidad: media aritm√©tica y grupo de percentiles (50, 75, 95, 99). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/354/84a/d7c/35484ad7c51d967118abb42646a09801.jpg"><br><br>  El promedio aritm√©tico en nuestra serie num√©rica es casi 1900. Es notablemente m√°s grande que la mayor√≠a de los elementos del conjunto, porque esta agregaci√≥n es muy sensible a los valores at√≠picos.  Esta propiedad sigue siendo √∫til para nosotros. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6b/2ac/b00/d6b2acb00b844c6294fa80a50e03495c.jpg"><br><br>  Para calcular los percentiles para el mismo conjunto, ord√©nelo y coloque el puntero en el √≠ndice de percentil.  Digamos el 50, que tambi√©n se llama la mediana.  Caemos entre los elementos.  En este caso, puede salir de la situaci√≥n de diferentes maneras, calculamos el promedio entre ellos.  Obtenemos 150. Cuando se compara con el promedio aritm√©tico, se ve claramente que los percentiles son insensibles a los valores at√≠picos. <br><br>  Tenemos en cuenta y usamos estas caracter√≠sticas de agregaciones.  La sensibilidad aritm√©tica de las emisiones es un inconveniente si intenta evaluar la experiencia del usuario con ella.  De hecho, un usuario siempre puede conectarse a la red, por ejemplo, desde un tren, y estropear la selecci√≥n. <br><br>  Pero la misma sensibilidad es una ventaja cuando se trata de monitoreo.  Para no perder un problema importante, utilizamos la media aritm√©tica.  Cambia f√°cilmente, pero el riesgo de un falso positivo en este caso no es un problema tan grande.  Es mejor pasar por alto que pasar por alto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dcb/e92/a6b/dcbe92a6baf2a4ec1e2ef01580dd948d.jpg"><br><br>  Adem√°s, consideramos la mediana (si adjuntamos esto a las m√©tricas de tiempo, la mediana es un indicador del momento en que se ajusta el 50% de las solicitudes) y el percentil 75.  El 75% de las solicitudes se ajustan en este momento, lo tomamos como una estimaci√≥n de la velocidad general.  Se considera que los percentiles 95 y 99 miden la cola larga y lenta.  Estos son n√∫meros muy grandes.  El n√∫mero 95 se considera la solicitud m√°s lenta.  El percentil 99 es anormal. <br><br>  No tiene sentido contar el m√°ximo.  Este es el camino a la locura.  Despu√©s de calcular el m√°ximo, puede resultar que el usuario haya estado esperando que la p√°gina se cargue durante 20 a√±os. <br><br>  Habiendo considerado las agregaciones, solo queda aplicar estos n√∫meros, y lo m√°s obvio que se puede hacer con ellos es presentarlos en gr√°ficos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e8d/552/3e9/e8d5523e9eeebf2545a7f214b75b8ede.jpg"><br><br>  En el gr√°fico, nuestro tiempo real para las primeras m√©tricas de pintura con contenido para la b√∫squeda.  La l√≠nea azul refleja la din√°mica de los equipos de escritorio, la roja, para dispositivos m√≥viles. <br><br>  Tenemos que monitorear constantemente los gr√°ficos de velocidad, y confiamos esta tarea al robot. <br><br><h2>  Monitoreo </h2><br>  Dado que las m√©tricas de velocidad son vol√°tiles y fluct√∫an constantemente con diferentes per√≠odos, la supervisi√≥n debe ajustarse.  Para esto usamos el concepto de frustraciones. <br><br>  La depuraci√≥n es el momento en que un proceso aleatorio cambia sus caracter√≠sticas, como la varianza o la expectativa matem√°tica.  En nuestro caso, esta es la muestra promedio.  Como se mencion√≥, la media es sensible a las emisiones y adecuada para el monitoreo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/621/9a7/c0b/6219a7c0bc99aef5991cda07179a487a.jpg"><br><br>  Aqu√≠ hay un ejemplo de un gr√°fico donde ocurri√≥ la alineaci√≥n y el robot registr√≥ el incidente.  ¬øC√≥mo aisl√≥ este momento de una serie de otras dudas?  Para entender esto, imponemos datos adicionales. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/93e/d21/ec4/93ed21ec4f2a624e3d703dc90b2c2530.jpg"><br><br>  El gr√°fico amarillo es un indicador m√©trico, y el gr√°fico azul es un promedio m√≥vil con un per√≠odo suficientemente grande.  El rojo es la media m√°s tres desviaciones est√°ndar.  El verde es el mismo, solo que con un signo menos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c8/899/b90/4c8899b90f7e2696100aa4c7069a868c.jpg"><br><br>  Los indicadores rojos y verdes forman un corredor seguro.  Si bien la m√©trica y el promedio m√≥vil fluct√∫an entre ellos, todo es normal, estas son fluctuaciones ordinarias.  Pero si salen de la zona segura, se activa el monitoreo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9fb/d41/25e/9fbd4125ece689bd90a84e520304fd3a.jpg"><br><br><h2>  Comprobaci√≥n de las caracter√≠sticas de velocidad </h2><br>  Todo lo que se discuti√≥ fue trabajar con los datos de velocidad de un proyecto ya lanzado, pero quiero medir la velocidad de las caracter√≠sticas individuales antes de enviarlas a una gran producci√≥n.  Para hacer esto, utilizamos pruebas A / B, una comparaci√≥n de m√©tricas para los grupos de control y experimentales. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/819/128/e94/819128e94c08fec52e22da5914d28cbe.jpg"><br><br>  Dividimos a los usuarios en grupos de control y experimentales.  Las lecturas de cada ranura se recopilan por separado, agregadas y tabuladas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31d/89b/1eb/31d89b1eb1915e2a0f8f29bc986f0521.jpg"><br><br>  En las pruebas A / B, como regla, tambi√©n se usa la media aritm√©tica.  Aqu√≠ vemos un delta y, para determinar con precisi√≥n si es un accidente o un resultado significativo, se aplica una prueba estad√≠stica. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e78/37d/134/e7837d1340c59e00cf61a132c6ac72c9.jpg"><br><br>  Se designa como "MW" porque la prueba de Mann-Whitney se utiliza en el c√°lculo.  Con su ayuda, se calcula el llamado "porcentaje de correcci√≥n".  Este indicador tiene un umbral, despu√©s del cual tomamos el delta como verdadero.  Aqu√≠ se establece en 99.9%. <br><br>  Cuando la prueba alcanza este valor, el delta se resalta en la interfaz.  Lo llamamos coloraci√≥n.  Aqu√≠ vemos verde, es decir, un buen color a tiempo para la primera pintura completa.  El tiempo para la primera pintura significativa no alcanza este valor, es decir, el delta tambi√©n es bueno, pero no el 99.9%.  Es completamente imposible confiar en ella.  Tras la inicializaci√≥n del marco y el tiempo para interactuar, se observa una coloraci√≥n roja con mala confianza.  De esto podemos sacar la misma conclusi√≥n que en el caso de las fuentes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/25b/415/b14/25b415b14b30b25549f514aced7b52dd.jpg"><br><br><h2>  ¬øC√≥mo hacerlo t√∫ mismo? </h2><br>  Puede implementar mediciones de velocidad de dos maneras.  Lo primero es hacer todo lo tuyo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e30/344/cb5/e30344cb56179ed9a633ff26c187291e.jpg"><br><br>  Un identificador para recibir datos de clientes, un back-end, que pone todo esto en una base de datos, MongoDB, PostgreSQL, MySQL, cualquier DBMS (tienen agregaciones listas para usar), adem√°s de una de las muchas soluciones de c√≥digo abierto, para dibujar gr√°ficos y organizar el monitoreo. <br><br>  La segunda soluci√≥n es utilizar los sistemas de an√°lisis Yandex Metric o Google Analytics.  En el ejemplo de Yandex Metrics, se ve as√≠. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/424/a97/f61/424a97f61a797dff9419d7df8828046b.jpg"><br><br>  Estas son las m√©tricas que la m√©trica proporciona al usuario fuera de la caja.  Por supuesto, esto no es todo lo anterior, pero ya es algo.  El resto se puede agregar manualmente a trav√©s de la configuraci√≥n del usuario.  Las pruebas y monitoreo A / B tambi√©n est√°n disponibles. <br><br><h2>  Conclusi√≥n </h2><br>  El concepto de medici√≥n de velocidad en l√≠nea del que hablamos se conoce como RUM - Real User Monitoring.  La amamos tanto que incluso dibujamos un logotipo con una fant√°stica di√©resis de rock and roll. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e5f/8a9/448/e5f8a94489f01743c09e5ec04453cc56.jpg"><br><br>  Este enfoque es bueno porque se basa en n√∫meros del mundo real, esos indicadores que tiene la audiencia de su servicio.  Usando m√©tricas, parece que recibe comentarios de cada usuario.  As√≠ que comienza a optimizar y no te detengas. <br><blockquote>  El anuncio al final.  Si te gust√≥ esta charla con <b>HolyJS 2018 Piter</b> , probablemente te interesar√° el pr√≥ximo <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HolyJS 2018 Mosc√∫</a></b> , que se llevar√° a <b>cabo del 24 al 25 de noviembre</b> .  All√≠ no solo puede ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">muchos otros</a> informes JS, sino tambi√©n preguntar a cualquier orador en el √°rea de discusi√≥n despu√©s del informe.  Y ma√±ana, a partir del 1 de noviembre, los precios de los boletos subir√°n a la final, ¬°as√≠ que hoy es la √∫ltima oportunidad de comprarlos con descuento! </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426571/">https://habr.com/ru/post/es426571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426559/index.html">Redes neuronales para procesamiento de im√°genes. Dice Alexander Savsunenko de Skylum Software</a></li>
<li><a href="../es426561/index.html">Los cinco grandes: deben tener herramientas para acelerar el desarrollo</a></li>
<li><a href="../es426563/index.html">Libreta de direcciones jer√°rquica, cambio de correo electr√≥nico principal y otras innovaciones en Zimbra 8.8.10</a></li>
<li><a href="../es426565/index.html">"El mundo de Java nunca volver√° a ser el mismo" - entrevista con Alexander Belokrylov y Alexey Voitilov de BellSoft</a></li>
<li><a href="../es426567/index.html">El libro "Caos matem√°tico. De las matem√°ticas elementales a las abstracciones sublimes "</a></li>
<li><a href="../es426573/index.html">ZeroNights 2018. Recargar</a></li>
<li><a href="../es426575/index.html">Informe del Club de Roma 2018, Cap√≠tulo 1.12: "De un mundo vac√≠o a un mundo completo"</a></li>
<li><a href="../es426579/index.html">Engie y Ledger desarrollan una soluci√≥n de blockchain de hardware para almacenar datos generados por fuentes de energ√≠a verde</a></li>
<li><a href="../es426581/index.html">Lecci√≥n abierta "Descripci√≥n general de las caracter√≠sticas de Node.js"</a></li>
<li><a href="../es426583/index.html">Diez personas en 90 mil sitios: c√≥mo no volverse loco</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>