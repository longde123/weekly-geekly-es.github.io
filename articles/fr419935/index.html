<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ» ğŸ” ğŸ›¬ Exactement une fois n'est PAS exactement la mÃªme: analyse d'article ğŸ‘ğŸ½ ğŸ§”ğŸ½ ğŸ‘©ğŸ½â€ğŸ“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PrÃ©sentation 


 J'ai dÃ©cidÃ© d'analyser un article dÃ©crivant certains dÃ©tails intÃ©ressants du traitement en streaming une seule fois: une seule fois ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exactement une fois n'est PAS exactement la mÃªme: analyse d'article</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419935/"><h2 id="vvedenie">  PrÃ©sentation </h2><br><p>  J'ai dÃ©cidÃ© d'analyser un article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dÃ©crivant certains dÃ©tails intÃ©ressants du traitement en streaming une seule fois: une seule fois</a> .  Le fait est que certains auteurs comprennent trÃ¨s Ã©trangement les termes.  L'analyse de l'article nous permettra de clarifier plus en profondeur de nombreux dÃ©tails, car  l'identification des incohÃ©rences et des bizarreries vous permet de dÃ©couvrir plus pleinement les concepts et la signification. </p><br><p>  CommenÃ§ons. </p><br><h2 id="analiz">  Analyse </h2><br><p>  Tout commence trÃ¨s bien: </p><a name="habracut"></a><br><blockquote> Le traitement distribuÃ© des flux d'Ã©vÃ©nements est devenu un sujet de plus en plus d'actualitÃ© dans le domaine du Big Data.  Les moteurs de traitement de flux (SPE) notables incluent Apache Storm, Apache Flink, Heron, Apache Kafka (Kafka Streams) et Apache Spark (Spark Streaming).  L'une des caractÃ©ristiques les plus notables et les plus discutÃ©es des SPE est leur sÃ©mantique de traitement, Â«exactement une foisÂ» Ã©tant l'une des plus recherchÃ©es et de nombreuses SPE prÃ©tendant fournir une sÃ©mantique de traitement Â«exactement une foisÂ». </blockquote><p>  Autrement dit, le traitement des donnÃ©es est extrÃªmement important, etc., et le sujet en discussion est une seule fois.  Discutons-en. </p><br><blockquote>  Il existe cependant beaucoup de malentendus et d'ambiguÃ¯tÃ©s entourant ce qu'est exactement Â«exactement une foisÂ», ce que cela implique et ce que cela signifie vraiment lorsque des SPE individuelles prÃ©tendent le fournir. </blockquote><p>  En effet, il est trÃ¨s important de comprendre ce que c'est.  Pour ce faire, il serait bon de donner la bonne dÃ©finition avant un long raisonnement.  Et qui suis-je pour donner de si bons conseils? </p><br><blockquote>  Je vais discuter de la faÃ§on dont la sÃ©mantique de traitement Â«une seule foisÂ» diffÃ¨re entre de nombreuses SPE populaires et pourquoi Â«une seule foisÂ» peut Ãªtre mieux dÃ©crit comme efficace une fois </blockquote><p>  Inventer de nouveaux termes est, bien sÃ»r, une tÃ¢che importante.  J'adore cette chose moi-mÃªme.  Juste pour cela, une justification est nÃ©cessaire.  Essayons de le trouver. </p><br><p>  Je ne dÃ©crirai pas les choses Ã©videntes comme des graphiques de traitement dirigÃ© et ainsi de suite.  Les lecteurs peuvent lire eux-mÃªmes l'article original.  De plus, l'analyse de ces dÃ©tails n'est pas pertinente.  Je ne donnerai qu'une photo: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/14b/024/a60/14b024a60f1b9403430bd43ff77cb50b.png"></p><br><p>  Ensuite, il y a une description de la sÃ©mantique: </p><br><ul><li>  Au plus une fois, c'est-Ã -dire  pas plus d'une fois.  Avec une Ã©vidence apparente, un tel comportement est extrÃªmement difficile Ã  garantir dans des scÃ©narios au niveau des limites tels que des plantages, des perturbations de la connectivitÃ© rÃ©seau, etc.  Mais pour l'auteur, tout est simple: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b12/02f/cb0/b1202fcb0c735e893daf0373ba23255e.png"></p><br><ul><li>  Au moins une fois, c'est-Ã -dire  au moins une fois.  Le schÃ©ma est plus complexe.  Et le rÃ¢teau peut Ãªtre collectÃ© plus: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/879/4cd/bd3/8794cdbd351ae965b267e7a3d51ae761.png"></p><br><ul><li>  Exactement une fois.  Qu'est-ce qu'une seule fois? </li></ul><br><blockquote>  Les Ã©vÃ©nements sont garantis pour Ãªtre traitÃ©s Â«une seule foisÂ» par tous les opÃ©rateurs dans l'application de flux, mÃªme en cas de diverses pannes. </blockquote><p>  C'est-Ã -dire  la garantie d'un traitement en une seule fois est lorsque le traitement "une seule fois" a eu lieu. </p><br><p>  Ressentez-vous le pouvoir de la dÃ©termination?  Pour reformuler: le traitement une fois, c'est quand le traitement a lieu Â«une foisÂ».  Eh bien, oui, il dit Ã©galement que cette garantie doit Ãªtre prÃ©servÃ©e en cas de dÃ©faillance.  Mais pour les systÃ¨mes distribuÃ©s, c'est une chose Ã©vidente.  Et les guillemets suggÃ¨rent que quelque chose ne va pas ici.  DÃ©finir avec des guillemets sans expliquer ce que cela signifie est le signe d'une approche profonde et rÃ©flÃ©chie. </p><br><p>  Ce qui suit est une description de la faÃ§on d'implÃ©menter une telle sÃ©mantique.  Et ici, je voudrais m'attarder plus en dÃ©tail. </p><br><blockquote>  Deux mÃ©canismes populaires sont gÃ©nÃ©ralement utilisÃ©s pour rÃ©aliser une sÃ©mantique de traitement Â«en une seule foisÂ». <br><ol><li>  InstantanÃ© distribuÃ© / point de contrÃ´le d'Ã©tat </li><li>  Livraison d'Ã©vÃ©nements au moins une fois plus dÃ©duplication des messages </li></ol><br></blockquote><p>  Si le premier mÃ©canisme concernant les instantanÃ©s et les points de contrÃ´le ne soulÃ¨ve pas de questions, Ã  l'exception de certains dÃ©tails tels que l'efficacitÃ©, il y a alors de petits problÃ¨mes avec le second que l'auteur a ignorÃ©s. </p><br><p>  Pour une raison quelconque, il est entendu qu'un gestionnaire ne peut Ãªtre que dÃ©terministe.  Dans le cas d'un gestionnaire non dÃ©terministe, chaque redÃ©marrage ultÃ©rieur donnera, de maniÃ¨re gÃ©nÃ©rale, d'autres valeurs et Ã©tats de sortie, ce qui signifie que la dÃ©duplication ne fonctionnera pas, car  les valeurs de sortie seront diffÃ©rentes.  Ainsi, le mÃ©canisme gÃ©nÃ©ral sera beaucoup plus compliquÃ© que celui dÃ©crit dans l'article.  Ou, franchement, un tel mÃ©canisme est incorrect. </p><br><p>  Cependant, nous nous tournons vers les plus dÃ©licieux: </p><br><blockquote><h2 id="is-exactly-once-really-exactly-once">  Exactement une fois est-il vraiment exactement une fois? </h2><br><br>  Maintenant, rÃ©examinons ce que la sÃ©mantique de traitement Â«en une seule foisÂ» garantit rÃ©ellement Ã  l'utilisateur final.  L'Ã©tiquette Â«exactement une foisÂ» est trompeuse en dÃ©crivant ce qui est fait exactement une fois. </blockquote><p>  On dit qu'il est temps de reconsidÃ©rer ce concept, car  il y a quelques incohÃ©rences. </p><br><blockquote>  Certains pourraient penser que Â«exactement une foisÂ» dÃ©crit la garantie du traitement des Ã©vÃ©nements dans lequel chaque Ã©vÃ©nement du flux n'est traitÃ© qu'une seule fois.  En rÃ©alitÃ©, aucune SPE ne peut garantir un traitement unique.  Il est impossible de garantir que la logique dÃ©finie par l'utilisateur dans chaque opÃ©rateur ne s'exÃ©cute qu'une fois par Ã©vÃ©nement face Ã  des Ã©checs arbitraires, car l'exÃ©cution partielle du code utilisateur est une possibilitÃ© omniprÃ©sente. </blockquote><p>  Cher auteur, il convient de rappeler le fonctionnement des processeurs modernes.  Chaque processeur en cours de traitement effectue un grand nombre d'Ã©tages parallÃ¨les.  De plus, il existe des branches dans lesquelles le processeur commence Ã  effectuer les mauvaises actions si le prÃ©dicteur de branche est incorrect.  Dans ce cas, les actions sont annulÃ©es.  Ainsi, le processeur peut exÃ©cuter deux fois le mÃªme morceau de code, mÃªme si aucun Ã©chec n'est survenu! </p><br><p>  Le lecteur attentif s'exclamera immÃ©diatement: car l'Ã©chappement est important, et non la maniÃ¨re dont il est effectuÃ©.  Exactement!  Ce qui compte, c'est ce qui s'est passÃ© et non comment cela s'est rÃ©ellement passÃ©.  Si le rÃ©sultat est comme s'il s'est produit exactement une fois, cela signifie qu'il s'est produit exactement une fois.  Vous ne trouvez pas?  Et tout le reste est dÃ©cortiquÃ©, sans importance.  Les systÃ¨mes sont complexes et les abstractions qui en rÃ©sultent ne crÃ©ent que l'illusion de l'exÃ©cution d'une certaine maniÃ¨re.  Il nous semble que le code est exÃ©cutÃ© sÃ©quentiellement, instruction par instruction, qui lit d'abord, puis Ã©crit, puis une nouvelle instruction.  Mais ce n'est pas le cas, tout est beaucoup plus compliquÃ©.  Et l'essence des abstractions correctes est de maintenir l'illusion de garanties simples et comprÃ©hensibles, sans approfondir Ã  chaque fois, lorsque vous devez attribuer des valeurs Ã  une variable. </p><br><p>  Et tout le problÃ¨me de cet article rÃ©side dans le fait qu'exactement une fois est une abstraction qui vous permet de crÃ©er des applications sans penser aux doublons et aux valeurs perdues.  Que tout ira bien, mÃªme en cas de chute.  Et il n'est pas nÃ©cessaire d'inventer de nouveaux termes pour cela. </p><br><p>  L'exemple de code de l'article montre clairement un manque de comprÃ©hension de la faÃ§on d'Ã©crire des gestionnaires: </p><br><pre><code class="hljs cs">Map (Event <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) { Print <span class="hljs-string"><span class="hljs-string">"Event ID: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.getId() Return <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> }</code> </pre> <br><p>  Le lecteur est invitÃ© Ã  rÃ©Ã©crire indÃ©pendamment le code afin de ne pas rÃ©pÃ©ter les erreurs de l'auteur de l'article. </p><br><blockquote>  Alors, qu'est-ce que les SPE garantissent lorsqu'ils revendiquent une sÃ©mantique de traitement Â«une seule foisÂ»?  S'il n'est pas garanti que la logique utilisateur soit exÃ©cutÃ©e une seule fois, qu'est-ce qui est exÃ©cutÃ© une seule fois?  Lorsque les SPE revendiquent une sÃ©mantique de traitement Â«une seule foisÂ», ce qu'ils disent en rÃ©alitÃ©, c'est qu'ils peuvent garantir que les mises Ã  jour de l'Ã©tat gÃ©rÃ© par la SPE ne sont validÃ©es qu'une seule fois dans un magasin d'arriÃ¨re-plan durable. </blockquote><p>  L'utilisateur n'a pas besoin d'une garantie de l'exÃ©cution physique du code.  En sachant comment fonctionne le processeur, il est facile de conclure que ce n'est pas possible.  L'essentiel est l'exÃ©cution logique une seule fois, comme s'il n'y avait aucun Ã©chec.  Attirer les concepts de Â«sâ€™engager dans lâ€™entrepÃ´t de donnÃ©esÂ» ne fait quâ€™aggraver le manque de comprÃ©hension de lâ€™auteur des choses de base, car  il existe des implÃ©mentations de telles sÃ©mantiques sans avoir besoin d'un commit. </p><br><p>  Pour plus d'informations, vous pouvez lire briÃ¨vement mon article: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Traitement concurrentiel hÃ©tÃ©rogÃ¨ne des donnÃ©es en temps rÃ©el strictement une fois</a> . </p><br><blockquote>  En d'autres termes, le traitement d'un Ã©vÃ©nement peut se produire plusieurs fois, mais l'effet de ce traitement n'est reflÃ©tÃ© qu'une seule fois dans la mÃ©moire d'Ã©tat du backend durable. </blockquote><p>  Qu'il existe un "magasin d'Ã©tat backend durable" pour l'utilisateur est absolument violet.  Seul l'effet du traitement est important, c'est-Ã -dire  cohÃ©rence et valeurs de sortie sur toute la durÃ©e du traitement des donnÃ©es en streaming.  Il convient de noter que pour certaines tÃ¢ches, il n'est pas nÃ©cessaire d'avoir un magasin d'Ã©tat backend durable, et il serait bon de garantir exactement une fois. </p><br><blockquote>  Chez Streamlio, nous avons dÃ©cidÃ© qu'effectivement une fois est le meilleur terme pour dÃ©crire ces sÃ©mantiques de traitement. </blockquote><p>  Un exemple typique de saisie stupide de concepts: nous Ã©crirons quelques exemples et de longs arguments pour un paragraphe entier, et Ã  la fin nous ajouterons que Â«nous dÃ©finissons ce concept de cette maniÃ¨reÂ».  La prÃ©cision et la clartÃ© des dÃ©finitions provoquent une rÃ©ponse Ã©motionnelle vraiment vive. </p><br><h2 id="vyvody">  Conclusions </h2><br><p>  La mÃ©connaissance de l'essence des abstractions conduit Ã  une distorsion de la signification originale des concepts existants et Ã  la crÃ©ation ultÃ©rieure de nouveaux termes Ã  partir de zÃ©ro. </p><br><p>  [1] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exactement une fois n'est PAS exactement la mÃªme chose</a> . <br>  [2] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Traitement hÃ©tÃ©rogÃ¨ne des donnÃ©es concurrentielles en temps rÃ©el strictement une fois</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419935/">https://habr.com/ru/post/fr419935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419925/index.html">ContrÃ´le de version de fichiers individuels Ã  l'aide de GitHub Gist</a></li>
<li><a href="../fr419927/index.html">[DotNetBook] Exceptions: Type Architecture du systÃ¨me</a></li>
<li><a href="../fr419929/index.html">[DotNetBook] Ã‰vÃ©nements d'exception et comment obtenir StackOverflow et ExecutionEngineException Ã  partir de zÃ©ro</a></li>
<li><a href="../fr419931/index.html">[DotNetBook] L'heure des histoires divertissantes: des situations exceptionnellement exceptionnelles</a></li>
<li><a href="../fr419933/index.html">Comment faire des recherches d'utilisateurs sur Github en utilisant Angular</a></li>
<li><a href="../fr419939/index.html">Comment j'ai rendu la navigation dans React Native pas si terrible</a></li>
<li><a href="../fr419941/index.html">Visite photo du bureau Audiomania: premiÃ¨re partie</a></li>
<li><a href="../fr419943/index.html">Ce que nous lisons en juillet: comment trouver du temps pour lire, cinq livres pour le chef d'Ã©quipe et quelques articles frais</a></li>
<li><a href="../fr419945/index.html">Comment se prÃ©parer Ã  un entretien sur Google et ne pas le passer. Deux fois</a></li>
<li><a href="../fr419947/index.html">Connectez-vous Ã  PiZeroW avec Raspbian Stretch Lite, sans adaptateurs supplÃ©mentaires ni moniteur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>