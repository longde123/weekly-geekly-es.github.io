<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈 🗽 🚶 Generator Gua Dua Dimensi Acak 🐘 🤵 👨🏼‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar 
 Jika Anda terlalu malas untuk mengurus waktu Anda, membuat level untuk permainan Anda, maka Anda telah datang ke tempat yang tepat. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Generator Gua Dua Dimensi Acak</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416419/"><h2>  Kata Pengantar </h2><br>  Jika Anda terlalu <s>malas untuk</s> mengurus waktu Anda, membuat level untuk permainan Anda, maka Anda telah datang ke tempat yang tepat. <br><br>  Artikel ini akan memberi tahu Anda secara terperinci bagaimana Anda dapat menggunakan salah satu dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">banyak</a> metode generasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lainnya</a> menggunakan contoh dataran tinggi dan gua.  Kami akan mempertimbangkan algoritma <i>Aldous-Broder</i> dan bagaimana membuat gua yang dihasilkan lebih indah. <br><br>  Di akhir membaca artikel, Anda harus mendapatkan sesuatu seperti ini: <br><br><div class="spoiler">  <b class="spoiler_title">Ringkasan</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/jk/zh/jj/jkzhjjuzbr7ab8m9rbf2xqbqbmc.png"><br></div></div><a name="habracut"></a><br><h2>  Teori </h2><br><h4>  Gunung </h4><br>  Sejujurnya, gua bisa dihasilkan dari awal, tetapi apakah itu entah bagaimana jelek?  Dalam peran <i>"platform"</i> untuk penempatan tambang, saya memilih pegunungan. <br>  Gunung ini dihasilkan cukup sederhana: mari kita memiliki <i>array dua dimensi</i> dan <i>tinggi variabel</i> , awalnya sama dengan setengah panjang <i>array</i> di dimensi kedua;  kita cukup menelusuri kolomnya dan mengisi sesuatu dengan semua baris di kolom ke nilai <i>tinggi variabel</i> , mengubahnya dengan peluang acak ke atas atau ke bawah. <br><br><h4>  Gua </h4><br>  Untuk menghasilkan ruang bawah tanah sendiri, saya memilih - <i>seperti yang saya</i> kira - algoritma yang sangat baik.  Secara sederhana, dapat dijelaskan sebagai berikut: mari kita memiliki dua (mungkin sepuluh) variabel <b>X</b> dan <b>Y</b> , dan array dua dimensi dari 50 oleh 50, kami memberikan variabel ini nilai acak dalam array kami, misalnya, <b>X = 26</b> , dan <b>Y = 28</b> .  Setelah itu, kami melakukan tindakan yang sama beberapa kali: kami mendapatkan angka acak dari nol hingga <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>J</mi><mi>u</mi><mi>m</mi><mi>l</mi><mi>a</mi><mi>h</mi><mi>V</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mo>&amp;#x2217;</mo><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.333ex" height="2.057ex" viewBox="0 -780.1 8754.4 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-4A" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-75" x="633" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-6D" x="1206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-6C" x="2084" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-61" x="2383" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-68" x="2912" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-56" x="3489" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-61" x="4258" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-72" x="4788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-69" x="5239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-61" x="5585" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-62" x="6114" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-65" x="6544" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMATHI-6C" x="7010" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMAIN-2217" x="7531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/416419/&amp;usg=ALkJrhjixKSiZrFEAyQenYk8Y_Q9eCHedA#MJMAIN-32" x="8253" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>J</mi><mi>u</mi><mi>m</mi><mi>l</mi><mi>a</mi><mi>h</mi><mi>V</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mo>∗</mo><mn>2</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> Jumlah Variabel * 2 </script></p>  , dalam kasus kami, hingga <i>empat</i> ;  dan kemudian, tergantung pada jumlah yang keluar, kami berubah <br>  variabel kami: <br><br><pre><code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: X += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: X -= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: Y += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: Y -= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> <br>  Kemudian, tentu saja, kami memeriksa untuk melihat apakah ada variabel yang jatuh di luar batas bidang kami: <br><br><pre> <code class="hljs xml"> X = X <span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag"> ? </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">X</span></span></span><span class="hljs-tag"> &gt;</span></span>= 50 ? 49 : X); Y = Y <span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag"> ? </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Y</span></span></span><span class="hljs-tag"> &gt;</span></span>= 50 ? 49 : Y);</code> </pre><br>  Setelah semua pemeriksaan ini, kami melakukan sesuatu dalam nilai <b>X</b> dan <b>Y baru</b> untuk array kami <i>(misalnya: tambahkan satu ke elemen)</i> . <br><br><pre> <code class="hljs powershell">array[<span class="hljs-type"><span class="hljs-type">X</span></span>, <span class="hljs-type"><span class="hljs-type">Y</span></span>] += <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br><h2>  Persiapan </h2><br>  Untuk kesederhanaan implementasi dan visualisasi metode kami, akankah kita menggambar objek yang dihasilkan?  Saya sangat senang Anda tidak keberatan!  Kami akan melakukan ini dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Texture2D</a> . <br><br>  Untuk bekerja, kita hanya perlu dua skrip: <br><blockquote>  <b>ground_libray</b> adalah artikel yang akan <b>diputar</b> .  Di sini kita menghasilkan, dan membersihkan, dan menggambar </blockquote><blockquote>  <b>ground_generator</b> adalah apa yang akan digunakan oleh ground_libray kami </blockquote>  Biarkan yang pertama menjadi <i>statis</i> dan tidak akan diwarisi dari apa pun: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ground_libray</span></span></span></span></code> </pre> <br>  Dan yang kedua adalah normal, hanya saja kita tidak perlu metode <b>Pembaruan</b> . <br><br>  Juga, mari kita buat objek game di atas panggung, dengan komponen <b>SpriteRenderer</b> <br><br><h2>  Bagian praktis </h2><br><h4>  Terdiri dari apa itu? </h4><br>  Untuk bekerja dengan data, kami akan menggunakan array dua dimensi.  Anda dapat mengambil larik tipe yang berbeda, dari <b>byte</b> atau <b>int</b> , ke <b>Warna</b> , tetapi saya percaya ini akan lebih baik dilakukan: <br><br><div class="spoiler">  <b class="spoiler_title">Tipe baru</b> <div class="spoiler_text">  Kami menulis hal ini di <b>ground_libray</b> . <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">System.Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">block</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] color = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[<span class="hljs-number"><span class="hljs-number">3</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">block</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Color col</span></span></span><span class="hljs-function">)</span></span> { color = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[<span class="hljs-number"><span class="hljs-number">3</span></span>] { col.r, col.g, col.b }; } }</code> </pre><br></div></div><br>  Saya akan menjelaskan ini dengan fakta bahwa itu akan memungkinkan kita untuk <i>menyimpan</i> array kita dan <i>memodifikasinya</i> jika perlu. <br><br><h4>  Massif </h4><br>  Mari kita, sebelum kita mulai menghasilkan gunung, tentukan tempat di mana kita akan <i>menyimpannya</i> . <br><br>  Dalam skrip <b>ground_generator,</b> saya menulis ini: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ground_size = <span class="hljs-number"><span class="hljs-number">128</span></span>; ground_libray.block[,] ground; Texture2D myT;</code> </pre><br>  <b>ground_size</b> - ukuran bidang kami (yaitu, array akan terdiri dari 16384 elemen). <br>  <b>ground_libray.block [,]</b> <i>ground</i> - ini adalah bidang kami untuk pembuatan. <br>  <b>Texture2D</b> <i>myT</i> adalah apa yang akan kita gambar. <br><br><div class="spoiler">  <b class="spoiler_title">Bagaimana cara kerjanya?</b> <div class="spoiler_text">  Prinsip kerja bersama kami adalah sebagai <b>berikut</b> - kami akan memanggil beberapa metode <b>ground_libray</b> dari <b>ground_generator</b> , memberikan yang pertama bidang <b>ground</b> kami. <br></div></div><br>  Mari kita buat metode pertama dalam skrip ground_libray: <br><br><div class="spoiler">  <b class="spoiler_title">Pembuatan gunung</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> mount_noise = <span class="hljs-number"><span class="hljs-number">0.02f</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generate_mount</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> block[,] b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> h_now = b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>); x++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; h_now; y++) { b[x, y] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> block(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0.7f</span></span>, <span class="hljs-number"><span class="hljs-number">0.4f</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); h_now += Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &gt; (<span class="hljs-number"><span class="hljs-number">1.0f</span></span> - mount_noise) ? (Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &gt; <span class="hljs-number"><span class="hljs-number">0.5</span></span> ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">-1</span></span>) : <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre><br>  Dan segera kami akan mencoba memahami apa yang terjadi di sini: seperti yang saya katakan, kami hanya pergi ke kolom array kami <b>b</b> , pada saat yang <b>sama</b> mengubah variabel ketinggian <b>h_now</b> , yang awalnya sama dengan setengah <b>128</b> <i>(64)</i> .  Namun masih ada sesuatu yang baru - <b>mount_noise.</b>  Variabel ini bertanggung jawab atas kemungkinan mengubah <b>h_now</b> , karena jika Anda sering mengubah ketinggian, gunung akan terlihat seperti <i>sisir</i> . <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Warna</b> <div class="spoiler_text">  Saya segera mengatur <i>warna yang</i> agak <i>kecoklatan</i> , biarkan setidaknya beberapa - di masa depan kita tidak akan membutuhkannya. <br></div></div><br>  Sekarang mari kita pergi ke <b>ground_generator</b> dan menulis ini di metode <b>Mulai</b> : <br><br><pre> <code class="cs hljs"> ground = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ground_libray.block [ground_size, ground_size]; ground_libray.generate_mount(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> ground);</code> </pre><br>  Kami menginisialisasi variabel <b>tanah</b> <s>setelah itu perlu dilakukan</s> . <br>  Setelah, tanpa penjelasan, kirimkan ke <b>ground_libray</b> . <br>  Jadi kami menghasilkan gunung. <br><br><h4>  Mengapa saya tidak bisa melihat gunung saya? </h4><br>  Sekarang mari kita menggambar apa yang kita dapatkan! <br><br>  Untuk menggambar, kita akan menulis metode berikut di <b>ground_libray</b> kami: <br><br><div class="spoiler">  <b class="spoiler_title">Menggambar</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paint</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">block[,] b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Texture2D t</span></span></span><span class="hljs-function">)</span></span> { t = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture2D(b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>), b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>)); t.filterMode = FilterMode.Point; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>); x++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>); y++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b[x, y] == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { t.SetPixel(x, y, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } t.SetPixel(x, y, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color( b[x, y].color[<span class="hljs-number"><span class="hljs-number">0</span></span>], b[x, y].color[<span class="hljs-number"><span class="hljs-number">1</span></span>], b[x, y].color[<span class="hljs-number"><span class="hljs-number">2</span></span>] ) ); } t.Apply(); }</code> </pre><br>  Di sini kita tidak akan lagi memberi seseorang bidang kita, kita hanya akan memberikan salinannya <i>(meskipun, karena kelas kata, kita memberi sedikit lebih dari sekadar salinan)</i> .  Kami juga akan memberikan <b>Texture2D</b> kami <b>untuk</b> metode ini. <br><br>  Dua baris pertama: kami membuat tekstur <b>ukuran lapangan</b> dan <b>menghapus penyaringan</b> . <br><br>  Setelah itu kita pergi melalui seluruh bidang array dan di mana kita tidak membuat apa-apa <i>(kelas perlu diinisialisasi)</i> - kita menggambar kotak kosong, jika tidak, jika tidak kosong - kita menggambar apa yang kita simpan ke dalam elemen. <br></div></div><br>  Dan, tentu saja, ketika selesai, kita pergi ke <b>ground_generator</b> dan menambahkan ini: <br><br><pre> <code class="cs hljs"> ground = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ground_libray.block [ground_size, ground_size]; ground_libray.generate_mount(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> ground); <span class="hljs-comment"><span class="hljs-comment">//   ground_libray.paint(ground, ref myT); GetComponent&lt;SpriteRenderer&gt;().sprite = Sprite.Create(myT, new Rect(0, 0, ground_size, ground_size), Vector3.zero );</span></span></code> </pre><br>  Tetapi tidak peduli berapa banyak kita menggambar pada tekstur kita, dalam permainan kita dapat melihatnya hanya dengan menempatkan kanvas ini pada sesuatu: <br><br>  <b>SpriteRenderer</b> tidak menerima <b>Texture2D di mana pun</b> , tetapi tidak ada yang mencegah kita membuat <i>sprite</i> dari tekstur ini - <b>Sprite.Create</b> ( <b>tekstur</b> , <b>persegi panjang dengan koordinat sudut kiri bawah dan kanan atas</b> , <b>koordinat sumbu</b> ). <br><br>  Garis-garis ini akan disebut terbaru, kami akan menambahkan sisanya di atas metode <b>cat</b> ! <br><br><h4>  Milik saya </h4><br>  Sekarang kita perlu mengisi ladang kita dengan gua acak.  Untuk tindakan seperti itu, kami juga akan membuat metode terpisah di <b>ground_libray</b> .  Saya ingin segera menjelaskan parameter metode ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> block[,] b -     . <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> thick -    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> size -         Color outLine -  </code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Gua</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make_cave</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> block[,] b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> thick, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size, Color outLine</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xNow = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> yNow = Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; size; i++) { b[xNow, yNow] = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; make_thick(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> b, thick, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-number"><span class="hljs-number">2</span></span>] { xNow, yNow }, outLine); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: xNow += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: xNow -= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: yNow += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: yNow -= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } xNow = xNow &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (xNow &gt;= b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>) ? b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>) - <span class="hljs-number"><span class="hljs-number">1</span></span> : xNow); yNow = yNow &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (yNow &gt;= b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>) ? b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>) - <span class="hljs-number"><span class="hljs-number">1</span></span> : yNow); } }</code> </pre> <br>  Untuk memulainya, kami mendeklarasikan variabel kami <b>X</b> dan <b>Y</b> , tapi saya hanya memanggil mereka <b>xNow</b> dan <b>yNow,</b> masing-masing. <br><br>  Yang pertama, yaitu <b>xNow</b> , mendapat nilai acak dari nol ke ukuran bidang di dimensi pertama. <br><br>  Dan yang kedua - <b>yNow</b> - juga mendapat nilai acak: dari nol ke tengah bidang di dimensi kedua.  <i>Mengapa</i>  Kami menghasilkan gunung kami dari tengah, kemungkinan itu akan tumbuh ke "langit-langit" <i>tidak besar</i> .  Berdasarkan hal ini, saya tidak menganggapnya relevan untuk menghasilkan gua di udara. <br><br>  Setelah itu, satu loop langsung berjalan, jumlah kutu tergantung pada parameter <b>ukuran</b> .  Setiap centang kami perbarui bidang pada posisi <b>xNow</b> dan <b>yNow</b> , dan hanya dengan demikian kami memperbaruinya sendiri <i>(pembaruan bidang dapat dilakukan di akhir - Anda tidak akan merasakan perbedaannya)</i> <br><br>  Ada juga metode <b>make_thick</b> , dalam parameter yang kami lewati <b>bidang</b> kami, <b>lebar stroke gua</b> , <b>posisi pembaruan gua saat ini</b> dan <b>warna stroke</b> : <br><br><div class="spoiler">  <b class="spoiler_title">Stroke</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make_thick</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> block[,] b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> t, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] start, Color o</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = (start[<span class="hljs-number"><span class="hljs-number">0</span></span>] - t); x &lt; (start[<span class="hljs-number"><span class="hljs-number">0</span></span>] + t); x++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || x &gt;= b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = (start[<span class="hljs-number"><span class="hljs-number">1</span></span>] - t); y &lt; (start[<span class="hljs-number"><span class="hljs-number">1</span></span>] + t); y++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || y &gt;= b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b[x, y] == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; b[x, y] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> block(o); } } }</code> </pre><br>  Metode ini mengambil koordinat <b>awal yang</b> dilewatinya, dan di sekitarnya dengan jarak <b>t</b> mengecat ulang semua blok dalam warna <b>o</b> - semuanya sangat sederhana! <br></div></div><br></div></div><br>  Sekarang mari kita <b>tambahkan</b> baris ini ke <b>ground_generator</b> kami: <br><br><pre> <code class="cs hljs">ground_libray.make_cave(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> ground, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">10000</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0.3f</span></span>, <span class="hljs-number"><span class="hljs-number">0.3f</span></span>, <span class="hljs-number"><span class="hljs-number">0.3f</span></span>));</code> </pre><br>  Anda dapat menginstal skrip <b>ground_generator</b> sebagai komponen pada objek kami dan memeriksa cara kerjanya! <br><br><img src="https://habrastorage.org/webt/l3/n5/st/l3n5stambbjalez4h3a4liinkyq.png"><br><br><div class="spoiler">  <b class="spoiler_title">Lebih lanjut tentang gua ...</b> <div class="spoiler_text"><ul><li>  Untuk membuat lebih banyak gua, Anda dapat memanggil metode <b>make_cave</b> beberapa kali <i>(gunakan loop)</i> </li><li>  Mengubah <b>ukuran</b> parameter tidak selalu meningkatkan ukuran gua, tetapi sering mendapat lebih besar </li><li>  Dengan mengubah parameter <b>tebal</b> , Anda secara signifikan meningkatkan jumlah operasi: <br>  jika parameternya 3, maka jumlah kuadrat dalam radius <b>3</b> akan menjadi <b>36</b> , jadi dengan <b>ukuran</b> parameter <b>= 40.000</b> , jumlah operasi akan menjadi <b>36 * 40.000 = 1440000</b> </li></ul><br></div></div><br><h4>  Koreksi Gua </h4><br><img src="https://habrastorage.org/webt/iv/bj/xj/ivbjxj0mhsc2lyktv6-r9n74o5g.png"><br><br>  Pernahkah Anda memperhatikan bahwa dalam pandangan ini gua tidak terlihat terbaik?  Terlalu banyak detail tambahan <i>(mungkin Anda berpikir berbeda)</i> . <br><br>  Untuk menghilangkan inklusi dari beberapa <i># 4d4d4d</i> kita akan menulis metode ini di <b>ground_libray</b> : <br><br><div class="spoiler">  <b class="spoiler_title">Bersih</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear_caves</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> block[,] b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>); x++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>); y++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b[x, y] == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (solo(b, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-number"><span class="hljs-number">2</span></span>] { x, y })) b[x, y] = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre><br>  Tetapi akan sulit untuk memahami apa yang terjadi di sini jika Anda tidak tahu apa fungsi <b>solo</b> : <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">solo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">block[,] b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rad, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] start</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cnt = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = (start[<span class="hljs-number"><span class="hljs-number">0</span></span>] - rad); x &lt;= (start[<span class="hljs-number"><span class="hljs-number">0</span></span>] + rad); x++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || x &gt;= b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = (start[<span class="hljs-number"><span class="hljs-number">1</span></span>] - rad); y &lt;= (start[<span class="hljs-number"><span class="hljs-number">1</span></span>] + rad); y++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || y &gt;= b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b[x, y] == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) cnt += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cnt &gt;= min) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre><br>  Dalam parameter fungsi ini, <b>bidang</b> kami, <b>jari</b> - <b>jari verifikasi titik</b> , <b>"ambang kehancuran"</b> dan <b>koordinat titik yang akan diperiksa</b> harus ada. <br>  Berikut adalah penjelasan terperinci tentang apa fungsi ini: <br><blockquote>  int cnt adalah penghitung "ambang" saat ini <br>  Berikutnya adalah dua siklus yang memeriksa semua titik di sekitar titik yang koordinatnya dilewati untuk <b>memulai</b> .  Jika ada <b>titik kosong</b> , maka kita tambahkan satu ke <b>cnt</b> , setelah mencapai <i>"ambang kehancuran"</i> kita mengembalikan kebenaran - titik <i>itu berlebihan</i> .  Kalau tidak, kami tidak menyentuhnya. <br><br>  Saya menetapkan ambang kehancuran menjadi <i>13</i> poin kosong, dan radius verifikasi adalah <i>2</i> <i>(artinya, ia akan memeriksa 24 poin, tidak termasuk yang pusat)</i> <br></blockquote><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text">  Yang ini akan tetap tidak terluka, karena hanya ada <b>9</b> poin kosong. <br><br><img src="https://habrastorage.org/webt/di/vf/mi/divfmifh9a7xojkprbkyqfdt5im.png"><br><br>  Tapi yang ini tidak beruntung - sekitar sebanyak <b>14</b> poin kosong <br><br><img src="https://habrastorage.org/webt/w6/ls/ab/w6lsabduc8vbb8s2le9xgaacy0q.png"><br></div></div><br>  Uraian singkat algoritme: <i>kami menelusuri seluruh bidang dan memeriksa semua poin untuk melihat apakah diperlukan.</i> <br></div></div><br>  Selanjutnya, kita cukup menambahkan baris berikut ke <b>ground_generator</b> kami: <br><br><pre> <code class="cs hljs">ground_libray.clear_caves(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> ground);</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Ringkasan</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ri/zn/8r/rizn8rrubua8zpkz2ihdg-xbaji.png"><br></div></div><br>  <i>Seperti yang bisa kita lihat, sebagian besar partikel yang tidak perlu hilang begitu saja.</i> <br><br><h4>  Tambahkan beberapa warna </h4><br>  Gunung kami terlihat sangat monoton, menurut saya membosankan. <br><br>  Mari tambahkan beberapa warna.  Tambahkan metode <b>level_paint</b> ke <b>ground_libray</b> : <br><br><div class="spoiler">  <b class="spoiler_title">Melukis di atas pegunungan</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">level_paint</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> block[,] b, Color[] all_c</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; b.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>); x++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lvl_div = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lvl_now = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = b.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>) - <span class="hljs-number"><span class="hljs-number">1</span></span>; y &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; y--) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b[x, y] != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; lvl_div == <span class="hljs-number"><span class="hljs-number">-1</span></span>) lvl_div = y / all_c.Length; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b[x, y] == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; b[x, y] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> block(all_c[lvl_now]); lvl_now += counter &gt;= lvl_div ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>; lvl_now = (lvl_now &gt;= all_c.Length) ? (all_c.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>) : lvl_now; counter = counter &gt;= lvl_div ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (counter += <span class="hljs-number"><span class="hljs-number">1</span></span>); } } } &lt;/ &lt;cut /&gt;source&gt;           .    ,       ,   .       ,      .          &lt;b&gt;Y &lt;/b&gt;  ,      . &lt;/spoiler&gt;     &lt;b&gt;ground_generator &lt;/b&gt; : &lt;source lang=<span class="hljs-string"><span class="hljs-string">"cs"</span></span>&gt; ground_libray.level_paint(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> ground, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color[<span class="hljs-number"><span class="hljs-number">3</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0.2f</span></span>, <span class="hljs-number"><span class="hljs-number">0.8f</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0.6f</span></span>, <span class="hljs-number"><span class="hljs-number">0.2f</span></span>, <span class="hljs-number"><span class="hljs-number">0.05f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0.2f</span></span>, <span class="hljs-number"><span class="hljs-number">0.2f</span></span>, <span class="hljs-number"><span class="hljs-number">0.2f</span></span>), });</code> </pre><br>  Saya hanya memilih 3 warna: <i>Hijau</i> , <i>merah tua</i> , dan <i>abu-abu gelap</i> . <br>  Tentu saja, Anda dapat mengubah jumlah warna dan nilai masing-masing.  Ternyata seperti ini: <br><br><div class="spoiler">  <b class="spoiler_title">Ringkasan</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/oh/5c/mp/oh5cmpywublde_gjvenbun7xili.png"><br></div></div><br>  Tapi tetap terlihat terlalu ketat untuk menambahkan sedikit keacakan warna, kita akan menulis properti ini di <b>ground_libray</b> : <br><br><div class="spoiler">  <b class="spoiler_title">Warna acak</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> color_randomize = <span class="hljs-number"><span class="hljs-number">0.1f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> crnd { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Random.Range(<span class="hljs-number"><span class="hljs-number">1.0f</span></span> - color_randomize, <span class="hljs-number"><span class="hljs-number">1.0f</span></span> + color_randomize); } }</code> </pre><br>  Dan sekarang di metode <b>level_paint</b> dan <b>make_thick</b> , di baris tempat kami menetapkan warna, misalnya di <b>make_thick</b> : <br><br><pre> <code class="cs hljs">b[x, y] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> block(o);</code> </pre> <br>  Kami akan menulis ini: <br><br><pre> <code class="cs hljs">b[x, y] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> block(o * crnd);</code> </pre> <br>  Dan di <b>level_paint</b> <br><br><pre> <code class="cs hljs">b[x, y] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> block(all_c[lvl_now] * crnd);</code> </pre> <br></div></div><br>  Pada akhirnya, semuanya akan terlihat seperti ini: <br><br><div class="spoiler">  <b class="spoiler_title">Ringkasan</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/jk/zh/jj/jkzhjjuzbr7ab8m9rbf2xqbqbmc.png"><br></div></div><br></div></div><br><h2>  Kekurangan </h2><br>  Misalkan kita memiliki bidang 1024 kali 1024, kita perlu menghasilkan 24 gua, ketebalan ujungnya 4, dan ukurannya 80.000. <br><br>  1024 * 1024 + 24 * 64 * 80.000 = 5.368.832.000 000 operasi. <br><br>  Metode ini hanya cocok untuk menghasilkan modul kecil untuk dunia game, tidak <b>mungkin untuk</b> menghasilkan sesuatu yang sangat besar <b>pada suatu waktu</b> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id416419/">https://habr.com/ru/post/id416419/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id416409/index.html">5 kesalahan umum dalam mengembangkan strategi dan cara untuk menghadapinya</a></li>
<li><a href="../id416411/index.html">Ceritakan kisah dengan data</a></li>
<li><a href="../id416413/index.html">Datang, lihat, digeneralisasi: direndam dalam Java Generics</a></li>
<li><a href="../id416415/index.html">Kami memindahkan semua yang ada di unit uji Vivaldi 1.16.1230.3</a></li>
<li><a href="../id416417/index.html">"Sungai Surgawi" - Cina akan menciptakan hujan buatan dengan kekuatan yang belum pernah terjadi sebelumnya</a></li>
<li><a href="../id416421/index.html">Berjalan-jalan di pit lane, atau bagaimana teknologi IaaS membantu tim balap</a></li>
<li><a href="../id416423/index.html">Bagaimana orang Rusia mengingatkan prosesor Amerika, atau ulasan tentang AdvoCam-FD8 Gold-II DVR (GPS + GLONASS)</a></li>
<li><a href="../id416425/index.html">Otorisasi lokal tanpa kata sandi di Ubuntu</a></li>
<li><a href="../id416427/index.html">Apa yang kita baca di bulan Juni: berita tentang Angular, JWT, skandal blockchain dan sedikit zen</a></li>
<li><a href="../id416429/index.html">Prinsip Desain yang Dimaksudkan untuk Jakarta EE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>