<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✈️ ✍🏾 👨🏻‍🌾 Evite trigonometria 👩🏿‍💼 🍿 🧑🏿‍🤝‍🧑🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entrada 
 Parece-me que precisamos usar menos trigonometria em computação gráfica. Uma boa compreensão das projeções, reflexões e operações vetoriais ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Evite trigonometria</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462539/"><h1>  Entrada </h1><br>  Parece-me que precisamos usar menos trigonometria em computação gráfica.  Uma boa compreensão das projeções, reflexões e operações vetoriais (como no verdadeiro significado dos produtos escalares (pontos) e vetoriais (transversais) dos vetores) geralmente vem com um crescente sentimento de ansiedade ao usar a trigonometria.  Mais precisamente, acredito que a trigonometria é boa para inserir dados no algoritmo (para o conceito de ângulos, esta é uma maneira intuitiva de medir a orientação), sinto que algo está errado quando vejo a trigonometria localizada nas profundezas de algum algoritmo de renderização 3D.  Na verdade, acho que em algum lugar um gatinho morre quando a trigonometria se arrasta por lá.  E não estou tão preocupado com velocidade ou precisão, mas com elegância conceitual, acho ... Agora vou explicar. <br><a name="habracut"></a><br>  Em outros lugares, eu já discuti que produtos escalares e vetoriais de vetores contêm todas as informações necessárias para rotações, para essas duas operações "retangulares" - senos e cossenos de ângulos.  Essa informação é equivalente a senos e cossenos em um número tão grande de lugares que parece que você pode simplesmente usar o produto de vetores e se livrar da trigonometria e dos ângulos.  Na prática, você pode fazer isso permanecendo em vetores euclidianos comuns, sem trigonometria.  Isso nos faz pensar: "Não estamos fazendo algo supérfluo?"  Parece estar fazendo.  Infelizmente, mesmo profissionais experientes tendem a abusar da trigonometria e tornam as coisas muito complexas, complicadas e não as mais concisas.  E mesmo possivelmente "errado". <br><br>  Vamos parar de tornar o artigo ainda mais abstrato.  Vamos imaginar um dos casos de substituição de fórmulas trigonométricas por produtos vetoriais e ver o que acabei de falar. <br><br><h1>  Opção incorreta para girar um espaço ou objeto </h1><br>  Vamos ter uma função que calcula a matriz de rotação de um vetor em torno de um vetor normalizado <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.926ex" height="1.455ex" viewBox="0 -520.7 2121 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> \ vec {v} </script>  na esquina <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> a </script>  .  Em qualquer mecanismo 3D ou biblioteca matemática em tempo real, haverá uma dessas funções, que provavelmente será copiada cegamente de outro mecanismo, tutorial da Wikipedia ou do OpenGL ... (sim, neste momento você deve admitir e, dependendo do seu humor, é possível se preocupar com por causa disso). <br><br>  A função será mais ou menos assim: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">mat3x3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotationAxisAngle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vec3 &amp; v, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> si = sinf( a ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> co = cosf( a ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ic = <span class="hljs-number"><span class="hljs-number">1.0f</span></span> - co; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mat3x3( vx*vx*ic + co, vy*vx*ic - si*vz, vz*vx*ic + si*vy, vx*vy*ic + si*vz, vy*vy*ic + co, vz*vy*ic - si*vx, vx*vz*ic - si*vy, vy*vz*ic + si*vx, vz*vz*ic + co ); }</code> </pre> <br>  Imagine que você está vasculhando o interior de uma demo ou jogo, possivelmente finalizando algum tipo de módulo de animação, e precisa girar o objeto em uma determinada direção.  Você deseja girá-lo para que um de seus eixos, digamos, um eixo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.887ex" height="1.455ex" viewBox="0 -520.7 2104 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-7A" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> \ vec {z} </script>  coincidiu com um vetor específico <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.014ex" height="2.057ex" viewBox="0 -780.1 2159 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-64" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ vec {d} </script>  digamos, tangente ao caminho da animação.  Obviamente, você decide criar uma matriz que conterá transformações usando <code>rotationAxisAngle()</code> .  Então, você primeiro precisará medir o ângulo entre o eixo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.088ex" height="1.455ex" viewBox="0 -520.7 468.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-7A" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> z </script>  seu objeto e o vetor de orientação desejado.  Como você é um programador gráfico, sabe que isso pode ser feito com um produto escalar e, em seguida, extraindo o ângulo com <code>acos()</code> . <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="54.486ex" height="2.66ex" viewBox="0 -780.1 23459.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="1635" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="2415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-64" x="2848" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6F" x="3372" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-74" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="4469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="4954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="5421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="5854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-3D" x="6561" y="0"></use><g transform="translate(7618,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-78" x="748" y="-213"></use></g><g transform="translate(8652,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-78" x="607" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-2B" x="9808" y="0"></use><g transform="translate(10809,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-79" x="748" y="-213"></use></g><g transform="translate(11790,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-79" x="607" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-3D" x="12949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="14006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="14535" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="15215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6F" x="15648" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-73" x="16134" y="0"></use><g transform="translate(16603,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6E" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-67" x="1380" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6C" x="1860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="2159" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="2875" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="3361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="3827" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="4261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="5040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="5526" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="5992" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="6426" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> \ vec {a} \ cdot \ vec {b} = a_xb_x + a_yb_y = ab \ cos {\ angle \ vec {a} \ vec {b}} </script></p>  Além disso, você sabe que às vezes <code>acosf()</code> pode retornar valores estranhos se o produto escalar estiver fora do intervalo [-1;  1] e você decide alterar seu valor para que ele caia nesse intervalo ( <i>aprox. Por</i> pinça) (nesse ponto, você pode até culpar a precisão do seu computador, porque o comprimento do vetor normalizado não é exatamente 1).  Nesse ponto, um gatinho morreu.  Mas até você saber, você continua escrevendo seu código.  Em seguida, você calcula o eixo de rotação e sabe que este é um produto vetorial de um vetor <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.887ex" height="1.455ex" viewBox="0 -520.7 2104 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-7A" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> \ vec {z} </script>  seu objeto e a direção escolhida <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.014ex" height="2.057ex" viewBox="0 -780.1 2159 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-64" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> \ vec {d} </script>  , todos os pontos do seu objeto girarão em planos paralelos aos definidos por esses dois vetores, apenas no caso ... (o gatinho foi revivido e morto novamente).  Como resultado, o código se parece com isso: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vec3 axi = normalize( cross( z, d ) ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ang = acosf( clamp( dot( z, d ), <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span> ) ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mat3x3 rot = rotationAxisAngle( axi, ang );</code> </pre> <br>  Para entender por que isso funciona, mas ainda erroneamente, abriremos todo o código <code>rotationAxisAngle()</code> e veremos o que realmente acontece: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vec3 axi = normalize( cross( z, d ) ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ang = acosf( clamp( dot( z, d ), <span class="hljs-number"><span class="hljs-number">-1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span> ) ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> co = cosf( ang ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> si = sinf( ang ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ic = <span class="hljs-number"><span class="hljs-number">1.0f</span></span> - co; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mat3x3 rot = mat3x3( axi.x*axi.x*ic + co, axi.y*axi.x*ic - si*axi.z, axi.z*axi.x*ic + si*axi.y, axi.x*axi.y*ic + si*axi.z, axi.y*axi.y*ic + co, axi.z*axi.y*ic - si*axi.x, axi.x*axi.z*ic - si*axi.y, axi.y*axi.z*ic + si*axi.x, axi.z*axi.z*ic + co);</code> </pre> <br>  Como você deve ter notado, estamos fazendo uma chamada acos bastante imprecisa e cara para cancelá-la imediatamente, calculando o cosseno do valor de retorno.  E a primeira pergunta aparece: "por que não pular a cadeia de chamadas <code>acos()</code> ---&gt; <code>cos()</code> e economizar tempo de CPU?"  Além disso, isso não nos diz que estamos fazendo algo errado e muito complicado, e que algum princípio matemático simples chega até nós que se manifesta através da simplificação dessa expressão? <br><br>  Você pode argumentar que a simplificação não pode ser feita, pois você precisará de um ângulo para calcular o seno.  No entanto, isso não é verdade.  Se você está familiarizado com o produto vetorial de vetores, sabe que, assim como o produto escalar contém cosseno, o vetor contém seno.  A maioria dos programadores gráficos entende por que um produto escalar de vetores é necessário, mas nem todos entendem por que um produto vetorial é necessário (e use-o apenas para ler normais e eixos de rotação).  Basicamente, o princípio matemático que nos ajuda a livrar-se do par cos / acos também nos diz que onde há um produto escalar, possivelmente existe um produto vetorial que relata a informação que falta (parte perpendicular, seno). <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="43.966ex" height="2.66ex" viewBox="0 -832 18929.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-7C" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="1292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="2192" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-74" x="2972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-69" x="3333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6D" x="3679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="4557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-73" x="5024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="5743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="6229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="6695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="7129" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-7C" x="7558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-7C" x="7837" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMAIN-3D" x="8393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="9449" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="9979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-73" x="10658" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-69" x="11128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6E" x="11473" y="0"></use><g transform="translate(12074,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6E" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-67" x="1380" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-6C" x="1860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="2159" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="2875" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="3361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="3827" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-61" x="4261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="5040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="5526" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="5992" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-62" x="6426" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-9"> || \ vec {a} \ times \ vec {b} || = ab \ sin {\ angle \ vec {a} \ vec {b}} </script></p><h1>  A maneira correta de girar um espaço ou objeto </h1><br>  Agora podemos extrair o seno do ângulo entre <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.887ex" height="1.455ex" viewBox="0 -520.7 2104 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-7A" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> \ vec {z} </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.014ex" height="2.057ex" viewBox="0 -780.1 2159 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-64" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> \ vec {d} </script>  apenas olhando o comprimento do produto vetorial ... - lembre-se de que <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.887ex" height="1.455ex" viewBox="0 -520.7 2104 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-7A" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> \ vec {z} </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.014ex" height="2.057ex" viewBox="0 -780.1 2159 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-64" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> \ vec {d} </script>  normalizado!  E isso significa que podemos (devemos !!) reescrever a função desta maneira: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vec3 axi = cross( z, d ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> si = length( axi ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> co = dot( z, d ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mat3x3 rot = rotationAxisCosSin( axi/si, co, si );</code> </pre> <br>  e certifique-se de que nossa nova função de construção da matriz de rotação, <code>rotationAxisCosSin()</code> , não calcule senos e cossenos em qualquer lugar, mas os tome como argumentos: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">mat3x3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotationAxisCosSin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vec3 &amp; v, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> co, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> si )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ic = <span class="hljs-number"><span class="hljs-number">1.0f</span></span> - co; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mat3x3( vx*vx*ic + co, vy*vx*ic - si*vz, vz*vx*ic + si*vy, vx*vy*ic + si*vz, vy*vy*ic + co, vz*vy*ic - si*vx, vx*vz*ic - si*vy, vy*vz*ic + si*vx, vz*vz*ic + co ); }</code> </pre> <br>  Há mais uma coisa que pode ser feita para se livrar de normalizações e raízes quadradas - encapsular toda a lógica em uma nova função e passar <code>1/si</code> para a matriz: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">mat3x3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotationAlign</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vec3 &amp; d, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vec3 &amp; z )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vec3 v = cross( z, d ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> c = dot( z, d ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> k = (<span class="hljs-number"><span class="hljs-number">1.0f</span></span>c)/(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>c*c); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mat3x3( vx*vx*k + c, vy*vx*k - vz, vz*vx*k + vy, vx*vy*k + vz, vy*vy*k + c, vz*vy*k - vx, vx*vz*K - vy, vy*vz*k + vx, vz*vz*k + c ); }</code> </pre> <br>  Mais tarde, Zoltan Vrana notou que <code>k</code> pode ser simplificado para <code>k = 1/(1+c)</code> , que não apenas parece matematicamente mais elegante, mas também move dois recursos para ke, portanto, toda a função ( <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.014ex" height="2.057ex" viewBox="0 -780.1 2159 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-64" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> \ vec {d} </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.887ex" height="1.455ex" viewBox="0 -520.7 2104 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-7A" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> \ vec {z} </script>  paralelo) entra em um (quando <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.014ex" height="2.057ex" viewBox="0 -780.1 2159 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-64" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> \ vec {d} </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.887ex" height="1.455ex" viewBox="0 -520.7 2104 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgvDLh05ok2RA0W90cUF1T4M3NKxQ#MJMATHI-7A" x="1635" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> \ vec {z} </script>  coincidir neste caso, não há rotação clara).  O código final é mais ou menos assim: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">mat3x3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotationAlign</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vec3 &amp; d, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vec3 &amp; z )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vec3 v = cross( z, d ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> c = dot( z, d ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> k = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>/(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>+c); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mat3x3( vx*vx*k + c, vy*vx*k - vz, vz*vx*k + vy, vx*vy*k + vz, vy*vy*k + c, vz*vy*k - vx, vx*vz*K - vy, vy*vz*k + vx, vz*vz*k + c ); }</code> </pre> <br>  Não apenas nos livramos de três funções trigonométricas e nos livramos da pinça feia (e da normalização!), Mas também simplificamos conceitualmente nossa matemática 3D.  Nenhuma função transcendental; apenas vetores são usados ​​aqui.  Vetores criam matrizes que modificam outros vetores.  E isso é importante, porque quanto menos trigonometria em seu mecanismo 3D, não apenas mais rápido e mais claro, mas também, primeiro, matematicamente mais elegante (mais correto!). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462539/">https://habr.com/ru/post/pt462539/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462525/index.html">3CX lança novos softphones SIP para iOS e Android com criptografia de voz de ponta a ponta</a></li>
<li><a href="../pt462527/index.html">Como uma rede neural SincNet aloca freqüências significativas no som por meio da propagação traseira</a></li>
<li><a href="../pt462529/index.html">A idéia da estação lunar da NASA é ruim e boa</a></li>
<li><a href="../pt462533/index.html">IntelliJ IDEA 2019.2: suporte a Java 13 Preview, ferramentas de criação de perfil, uma nova janela de serviços e muito mais</a></li>
<li><a href="../pt462537/index.html">Migração na nuvem</a></li>
<li><a href="../pt462541/index.html">Usando Condicional no Spring</a></li>
<li><a href="../pt462543/index.html">Meetup sobre Java em Raiffeisenbank</a></li>
<li><a href="../pt462545/index.html">Bloqueio de telegrama, sub-rede Hetzner / 16, experiência com ILV</a></li>
<li><a href="../pt462547/index.html">SGX Malvar: como os vilões exploram a nova tecnologia da Intel para propósitos errados</a></li>
<li><a href="../pt462549/index.html">Blockchain de quorum: integração ao código Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>