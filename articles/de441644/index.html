<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👛 👩‍👩‍👧 👮 Wie Tinkoff.ru die Analyse mit Zeppelin automatisiert 👨‍👩‍👦 🌍 🤵🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tinkoff.ru entwickelt viele Dienstleistungen auf dem Finanzdienstleistungsmarkt. Unsere Analysten, Entwickler, Technologen und Manager lösen ihre tägl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie Tinkoff.ru die Analyse mit Zeppelin automatisiert</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/441644/">  Tinkoff.ru entwickelt viele Dienstleistungen auf dem Finanzdienstleistungsmarkt.  Unsere Analysten, Entwickler, Technologen und Manager lösen ihre täglichen Aufgaben.  Jeden Tag generieren wir Ideen, analysieren, entwickeln und tun alles, um das beste Produkt auf dem Markt zu schaffen. <br><br>  Ich arbeite als Backend-Programmierer in der internen Entwicklungsabteilung.  Wir helfen dabei, neue Geschäftsbereiche zu eröffnen, den Workflow zu automatisieren und zu versuchen, eine Bank zu sparen, wo dies möglich ist (z. B. den Kauf einer Lizenz für eine teure Software zu verweigern).  Unser Workflow ist sehr standardisiert: Manager entwickeln Geschäftsfunktionen, Technologen formalisieren sie und legen Aufgaben fest, Analysten analysieren die Daten und Entwickler lösen die ihnen zugewiesenen Aufgaben bereits.  Alles im Leben ist komplizierter, aber das wissen Sie bereits. <a name="habracut"></a><br><br>  Einer unserer Geschäftskunden ist unsere Kundenbindungsabteilung - Tinkoff Target.  Bevor ich über die Automatisierung von Analysen spreche, werde ich erklären, wie unser Treueprogramm funktioniert. <br><br><h3>  Tinkoff.ru Treueprogramm oder wie wir Cashback an Menschen verteilen </h3><br>  Fast alle modernen Banken geben Cashback aus: in Rubel, Meilen oder Papageien (Punkte, die Sie für etwas Bestimmtes ausgeben können). <br><br>  Wir sind keine Ausnahme, wir geben einen Standard-Cashback von 1% für alles und 5% für 3 ausgewählte Kategorien aus (z. B. "Transport", "Kino", "Souvenirs" usw.).  Sie müssen nicht viel solches Cashback ausgeben (aber ich möchte es wirklich), und deshalb haben wir spezielle Angebote von Bankpartnern, die auch Cashback ausgeben möchten.  Als Teil des Geschäftsbereichs der Treueprogramme versuchen wir daher, verschiedene Unternehmen zu finden und zu überzeugen, unseren Kunden unter für beide Seiten vorteilhaften Bedingungen Cashback zu gewähren.  Diese Unternehmen sind unsere Partner. <br><br>  Wie machen wir das?  Stellen Sie sich vor, es gibt eine bedingte Firma Yabloko auf dem Markt.  Der beste Weg, Yabloko für unser Cashback-Programm zu gewinnen, besteht darin, ihm beim Verkauf seines Produkts oder seiner Dienstleistung zu helfen.  Hier geht es darum, ein Publikum für den Partner zu gewinnen.  Zum Beispiel Kunden, die von Wettbewerbern gekauft wurden, oder Kunden, denen die Existenz von Yabloko nicht bekannt ist.  Außerdem kann Yabloko die am besten geeigneten Kunden für das Profil auswählen, die Yabloko wirklich wollen. Sie wissen nur noch nichts darüber - hier geht es um künstliche Intelligenz und maschinelles Lernen. <br><br>  Die Aufgabe, eine solche Zielgruppe auszuwählen, liegt bei den Analysten.  Wir haben zwei davon, und es gibt viele Partner - mehr als 1000. Darüber hinaus haben Analysten immer noch eine Menge interessanter Arbeit, und mit zunehmender Anzahl von Partnern wird die Auswahl des richtigen Publikums zur Routine.  Eine solche Routine muss automatisiert und in einen einzigen Klick auf die Schaltfläche umgewandelt werden (oder besser ohne eine Schaltfläche).  Darüber hinaus bringt der mehrstufige Prozess der Ausführung solcher Aufgaben Fehler mit sich, die durch den menschlichen Faktor verursacht werden.  Als nächstes werde ich Ihnen erzählen, wie wir es geschafft haben, solche Routinearbeiten loszuwerden. <br><br><h3>  Wie wir Analytics erstellen </h3><br>  Bei Tinkoff.ru verwenden die meisten Analysten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apache Zeppelin</a> für ihre täglichen Aufgaben.  Wir haben dieses Tool schon lange in Betrieb genommen und entwickeln es aktiv weiter (auch wenn wir uns zu Open Source verpflichten).  Alle Mitarbeiter haben Zugriff auf ein globales Repository für Daten und Berichte, dh auf alle Analyseressourcen von Tinkoff.ru, mit der Möglichkeit, eine bequeme Analysesprache zu verwenden. <br><br>  Zeppelin ist in Java geschrieben und enthält viele Interpreten moderner Sprachen und Technologien, darunter Python, Hive, Spark, Groovy, R und viele andere.  Geschriebene Skripte werden in Laptops gespeichert, die aus Absätzen bestehen. Die externe Benutzeroberfläche der Arbeitsumgebung ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jupyter</a> sehr ähnlich.  Der Hauptbildschirm der Anwendung lautet wie folgt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/e3/gi/g-/e3gig-lm8l0vmefyjtulz5_tahq.png" alt="Bild"></div><br>  Jeder Geschäftsbereich verfügt hier über ein eigenes Arbeitsverzeichnis mit unterschiedlichen Lese- und Bearbeitungsrechten. <br><br>  Ein großes Plus für uns (Entwickler) ist die Verfügbarkeit einer sehr praktischen und interaktiven <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">API</a> .  Mit der API wird das Leben einfacher.  Über die API mit diesem Tool können Sie alles tun, was Sie wollen, und dabei die Web-Benutzeroberfläche umgehen.  So kam die Idee, die Ergebnisse der Arbeit von Analysten in unser Projekt zu integrieren. <br><br><h3>  Kurz über unser Projekt </h3><br>  Unser Backend ist in Java geschrieben, Frontend in Angular 5 (da das Projekt nicht jung ist, ist ein Teil der Benutzeroberfläche in Vaadin geschrieben, das wir langsam loswerden).  Der größte Teil des Projekts ist eine Webanwendung, mit der Manager zusammenarbeiten können, um Beziehungen zu Partnern zu pflegen, neue Sonderangebote zu erstellen, die Implementierung ihres KPI zu überwachen usw.  Wir haben ein persönliches Partnerkonto, auf dem jeder Partner der Bank die Statistiken seiner gestarteten Sonderangebote (Rückstellungen, Aktivierung usw.) einsehen, Vereinbarungen, Konten und Dokumentbeziehungen im Allgemeinen herunterladen und unterzeichnen kann. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/uq/cz/l9uqcz8olnaxsgvkn789xzanbc0.png" alt="Bild"></div><br>  Wir senden die Daten über den SOAP-Webdienst an die mobile Bank und das Webportal an den Bereich „Boni“.  In React ist eine Landung geschrieben, bei der jeder eine Anfrage zur Teilnahme am Treueprogramm hinterlassen kann.  Wir haben verschiedene Mechanismen zur Berechnung von Cashback und Sonderraten sowie zur Integration in verschiedene Bankdienstleistungen implementiert. <br><br><h3>  Integration mit Apache Zeppelin </h3><br>  Um neue Partner zu gewinnen, schickten Manager Analysten traditionell einen Brief mit einer Reihe von Partnerwünschen, um eine Zielgruppe zu generieren.  Analysten verwendeten zuvor geschriebene Skripte im Zoo der Sprachen und Magic Copy-Paste. <br><br>  Mit der richtigen Formalisierung der Anforderungen können Sie natürlich ein universelles Skript schreiben, was wir auch getan haben.  Und für die Eingabe formalisierter Daten haben sie eine praktische Benutzeroberfläche geschrieben.  Es bleibt nur die Arbeit mit Apache Zeppelin in unserer Webanwendung zu implementieren.  Das Arbeitsschema einer solchen Integration ist wie folgt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lq/vl/nm/lqvlnm1g5ulhayq1bifj_-82ykk.png" alt="Bild"></div><br>  Der Manager erstellt im Verlauf der Kommunikation mit dem Partner eine Aufgabe in der Anwendung und füllt die Parameter auf dem Formular aus, um die Zielgruppe zu bilden.  Ein Beispiel für solche Parameter ist wie folgt: <br><br><ul><li>  Kategorien BCC- und / oder MCC-Codes, in denen der Kunde in einem bestimmten Zeitraum Transaktionen für bestimmte Beträge mit einem bestimmten Durchschnittsscheck abwickelt oder abwickelt. </li><li>  Wettbewerbsfähige Unternehmen, in denen der Kunde in einem bestimmten Zeitraum transportiert oder transportiert. </li></ul><br>  usw. <br><br>  Es gibt viele solcher Parameter und sie werden alle auf der Benutzeroberfläche formalisiert.  Nach Eingabe der Anfangsparameter startet der Manager den Generierungsvorgang und der Algorithmus beginnt seine Arbeit: <br><br><ol><li>  Da alle unsere Skripte in einem Notizbuch geschrieben sind und wir es nicht ändern möchten, klonen wir es in ein separates Verzeichnis.  Zeppelin gibt uns als Antwort auf unsere Anfrage die ID des Klons zurück, über den wir den neuen Laptop kontaktieren werden.  Das Klonen von Arbeitsskripten ist auch für die Verwaltung praktisch, da wir immer die Skripte betrachten können, die für eine bestimmte Aufgabe ausgeführt wurden, und das Problem finden können. </li><li>  Ab Version <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zeppelin API 0.8 müssen Sie</a> nach dem Erstellen eines neuen Laptops einen CRUD-Zugriff für die spätere Verwaltung festlegen. </li><li>  In einem der ersten Absätze eines funktionierenden Laptops werden in der Regel Variablen deklariert und ihre anfänglichen Standardwerte festgelegt, die ersetzt werden müssen.  Zu diesem Zeitpunkt fügen wir unseren Absatz in den Laptop ein (mit der Initialisierung von Variablen und formalisierten Daten), den wir vor dem Senden bilden. </li><li>  Als nächstes starten wir mit einer leichten Anfrage nach der POST-Methode unseren Laptop zur Ausführung.  Oder besser gesagt, wir führen unsere Absätze einzeln aus, um die Ausführung aller Skripte zu überwachen und den Status der Generierung der Zielgruppe in der Anwendung anzuzeigen. </li><li>  Am Ende des Vorgangs erhält der Manager eine Benachrichtigung (falls er den Fortschrittsstatus nicht überwacht hat).  Das Ergebnis der Skripte ist die generierte CSV-Datei mit der Zielgruppe, die in einem freigegebenen Verzeichnis gespeichert ist.  Beim Starten von Sonderangeboten können wir mehrere Zielgruppen generieren und diese beim Hinzufügen zum Angebot mit einem anderen Typ versehen.  Und für Zielgruppen mit unterschiedlichen Typen können wir die Bedingungen und die Größe der Cashback-Rückstellung flexibel festlegen. </li></ol><br><h3>  Ein bisschen unhöfliche Analyse </h3><br>  Nach groben Schätzungen führte die Automatisierung der Erfassung der Zielgruppe dazu, dass mehr als 30% der Arbeitszeit der Analysten freigegeben wurden (ohne Berücksichtigung der Zeit, die für die Kommunikation zwischen Analysten und Managern aufgewendet wurde). <br><br>  Von Juni 2018 bis Januar 2019 betrug die Anzahl der abgeschlossenen Generierungsaufgaben mehr als 400. Laut den Kommunikationsmanagern verbrachten sie zwischen 0,5 und 4 Stunden, um die Zielgruppe zu bilden. Die durchschnittliche Zeit für die Zielgruppe betrug ~ 2 Stunden, und es wurden mehr als 800 Arbeitsstunden eingespart (mehr als 100 Arbeitstage). <br><br><h3>  Abschließend </h3><br>  Das Wichtigste, was durch die Integration mit Zeppelin erreicht werden konnte, war die Minimierung des menschlichen Faktors in allen Phasen des Zielgruppengenerierungsprozesses.  Fehler bei der Bildung eines für den Partner geeigneten Publikums werden in der Regel nach Rückstellungen festgestellt.  Nach dem Start des Sonderangebots ist es sehr schwierig, die anfallenden finanziellen Kosten zu minimieren, und für Fehler, die Sie gemacht haben, müssen Sie teuer bezahlen. <br><br>  Ein weiteres großes Plus ist die Verlagerung der Verantwortung in Richtung der Hauptquelle des Prozesses  Der „Engpass“ des menschlichen Faktors liegt jetzt in der Zone der anfänglichen Datenbildung durch den Manager.  Dies bedeutet, dass derjenige, der die Generierungsaufgabe erstellt und die Anfangsparameter ausfüllt, dies mit erhöhter Aufmerksamkeit tut. <br><br>  Derzeit entwickeln wir die Integration weiter und automatisieren analytische Aufgaben.  Mithilfe des Remote-Starts von in Zeppelin geschriebenen Skripten generieren wir aus der Anwendung verschiedene Arten von Analyseberichten für Manager, die zuvor auf Anfrage einzeln erstellt wurden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de441644/">https://habr.com/ru/post/de441644/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de441628/index.html">2018 Bewertung der IT-Arbeitgeber in Sankt Petersburg und Moskau: Ergebnisse einer Umfrage unter Entwicklern</a></li>
<li><a href="../de441632/index.html">1. März - Teamlead Meetup: Mitarbeiterbewertung und Motivation</a></li>
<li><a href="../de441634/index.html">Gibt es Leben unter Windows 98, Teil zwei - über Software</a></li>
<li><a href="../de441636/index.html">Linux Foundation kündigt Open Source ELISA-Plattform für die Entwicklung automatisierter Systeme an</a></li>
<li><a href="../de441642/index.html">Einführung in Microsoft HoloLens 2</a></li>
<li><a href="../de441646/index.html">So funktioniert die General Electric Smart Plant</a></li>
<li><a href="../de441648/index.html">Einführung in Microsoft HoloLens 2</a></li>
<li><a href="../de441650/index.html">Webinar Group-IB „Forensische Sicht auf den Schutz von CII-Objekten im Jahr 2019“</a></li>
<li><a href="../de441654/index.html">Wie mache ich ein Praktikum bei einem großen IT-Unternehmen?</a></li>
<li><a href="../de441660/index.html">STM32F103C8T6 als Flash-Laufwerk mit FAT12-Dateisystem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>