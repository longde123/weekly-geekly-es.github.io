<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚙️ 👩🏽‍🤝‍👨🏿 👩‍👩‍👦‍👦 Zwei-Faktor-Authentifizierung für SSH 🍓 😤 🍌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Secure Shell" SSH ist ein Netzwerkprotokoll zum Herstellen einer sicheren Verbindung zwischen Hosts, Standard an Port 22 (das besser zu ändern ist). ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zwei-Faktor-Authentifizierung für SSH</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/globalsign/blog/448970/">  "Secure Shell" SSH ist ein Netzwerkprotokoll zum Herstellen einer sicheren Verbindung zwischen Hosts, Standard an Port 22 (das besser zu ändern ist).  SSH-Clients und SSH-Server sind für die meisten Betriebssysteme verfügbar.  Fast jedes andere Netzwerkprotokoll funktioniert innerhalb von SSH, dh Sie können remote auf einem anderen Computer arbeiten, einen Audiostream oder ein Video über einen verschlüsselten Kanal übertragen usw.  Darüber hinaus können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">über SOCKS-Proxys auf einem Remote-Host</a> im Namen dieses Remote-Hosts eine Verbindung zu anderen Hosts herstellen. <br><br>  Die Authentifizierung erfolgt mit einem Kennwort, Entwickler und Systemadministratoren verwenden jedoch traditionell SSH-Schlüssel.  Das Problem ist, dass der geheime Schlüssel gestohlen werden kann.  Das Hinzufügen einer Passphrase schützt theoretisch vor Diebstahl des geheimen Schlüssels. In der Praxis können Schlüssel beim Weiterleiten und Zwischenspeichern <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://web.archive.org/web/20190412143908/">jedoch weiterhin ohne Bestätigung verwendet werden</a> .  Die Zwei-Faktor-Authentifizierung löst dieses Problem. <br><a name="habracut"></a><br><h1>  So implementieren Sie die Zwei-Faktor-Authentifizierung </h1><br>  Die Entwickler von Honeycomb haben kürzlich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">detaillierte Anweisungen</a> zur Implementierung der entsprechenden Infrastruktur auf dem Client und dem Server veröffentlicht. <br><br>  Die Anweisung setzt voraus, dass Sie einen bestimmten Basishost haben, der im Internet geöffnet ist (Bastion).  Sie möchten von Laptops oder Computern über das Internet eine Verbindung zu diesem Host herstellen und Zugriff auf alle anderen dahinter stehenden Geräte erhalten.  2FA stellt sicher, dass ein Angreifer nicht dasselbe tun kann, selbst wenn er beispielsweise durch die Installation von Malware Zugriff auf Ihren Laptop erhält. <br><br><h4>  Die erste Option ist OTP </h4><br>  OTP - Einmalige digitale Passwörter, die in diesem Fall zusammen mit dem Schlüssel für die SSH-Authentifizierung verwendet werden.  Entwickler schreiben, dass dies keine ideale Option ist, da ein Angreifer eine gefälschte Bastion aufheben, Ihr OTP abfangen und verwenden kann.  Das ist aber besser als nichts. <br><br>  In diesem Fall werden die folgenden Zeilen in die Chef-Konfiguration auf der Serverseite geschrieben: <br><br><ul><li><code>metadata.rb</code> </li> <li>  <code>attributes/default.rb</code> (von <code>attributes.rb</code> ) </li><li> <code>files/sshd</code> </li> <li>  <code>recipes/default.rb</code> (Kopie von <code>recipe.rb</code> ) </li><li> <code>templates/default/users.oath.erb</code> </li> </ul><br>  Jede OTP-Anwendung wird auf der Clientseite installiert: Google Authenticator, Authy, Duo, Lastpass, <code>brew install oath-toolkit</code> <code>apt install oathtool openssl</code> oder <code>apt install oathtool openssl</code> , und anschließend wird eine zufällige base16-Zeichenfolge (Schlüssel) generiert.  Es wird in das Base32-Format konvertiert, das von mobilen Authentifikatoren verwendet wird, und direkt in die Anwendung importiert. <br><br>  Infolgedessen können Sie eine Verbindung zur Bastion herstellen und sicherstellen, dass jetzt nicht nur eine Passphrase, sondern auch ein OTP-Code für die Authentifizierung erforderlich ist: <br><br><pre> <code class="plaintext hljs">➜ ssh -A bastion Enter passphrase for key '[snip]': One-time password (OATH) for '[user]': Welcome to Ubuntu 18.04.1 LTS...</code> </pre> <br><h4>  Option Zwei - Hardwareauthentifizierung </h4><br>  In diesem Fall muss der Benutzer nicht jedes Mal einen OTP-Code eingeben, da der zweite Faktor das Hardwaregerät oder die Biometrie ist. <br><br>  Hier ist die Konfiguration von Chef etwas komplizierter und die Konfiguration der Clients hängt vom Betriebssystem ab.  Nach Abschluss aller Schritte können Clients unter MacOS die Authentifizierung in SSH mithilfe einer Passphrase bestätigen und einen Finger auf den Sensor legen (zweiter Faktor). <br><br>  Besitzer von iOS und Android bestätigen die Eingabe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">durch Drücken einer einzigen Taste auf dem Smartphone</a> .  Dies ist eine spezielle Technologie von Krypt.co, die noch sicherer als OTP ist. <br><br>  Unter Linux / ChromeOS besteht die Möglichkeit, mit YubiKey-USB-Token zu arbeiten.  Natürlich kann ein Angreifer Ihren Token stehlen, aber er kennt die Passphrase immer noch nicht. <br><br><hr><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/rw/hk/1y/rwhk1y-msfqaknqu2kbktqf6g7a.jpeg"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/od/n-/xe/odn-xebtl8a5lexzip_kkkezr6s.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448970/">https://habr.com/ru/post/de448970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448960/index.html">Unbegrenzte XR-Technologie im Zeitalter des verteilten Rechnens</a></li>
<li><a href="../de448962/index.html">Die Wirksamkeit des Marketing-Trichters AARRR</a></li>
<li><a href="../de448964/index.html">Der Toaster gibt Benutzern mehr Rechte</a></li>
<li><a href="../de448966/index.html">Android App im Speicher. Optimierungsbericht für Yandex.Luncher</a></li>
<li><a href="../de448968/index.html">Asynchrones PHP. Warum?</a></li>
<li><a href="../de448976/index.html">Gamedev Frühlingsveranstaltungen bei HSE</a></li>
<li><a href="../de448980/index.html">Unser erstes gemeinsames Mittagessen: Warum und wie verbringen wir unseren Testtag?</a></li>
<li><a href="../de448982/index.html">Kopfloses CMS. Warum schreibe ich meine?</a></li>
<li><a href="../de448986/index.html">3D-Reverse Engineering mit 3D-Scannen</a></li>
<li><a href="../de448988/index.html">Kingston SSDs sind geräumiger geworden und haben fast die gleichen Kosten - wir erfüllen die A400-R-Serie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>