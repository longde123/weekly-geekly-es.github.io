<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◀️ ❓ 🖐️ Korolev. Obat untuk web 🍝 ⚱️ 🛳️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sekitar setahun yang lalu, artikel nyata Nikita Prokopov tentang kekecewaan dalam perangkat lunak dirilis. Dilihat oleh umpan balik positif, pengemban...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Korolev. Obat untuk web</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429028/"><p>  Sekitar setahun yang lalu, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel nyata</a> Nikita Prokopov tentang kekecewaan dalam perangkat lunak dirilis.  Dilihat oleh umpan balik positif, pengembang tidak peduli dengan kualitas produk mereka.  Mungkin sudah waktunya untuk mulai berakting? </p><br><p>  Dalam artikel ini saya ingin berbicara tentang perkembangan saya, yang, menurut pendapat saya, dapat menyembuhkan masalah kinerja utama dari web modern dan membuat pengguna sedikit lebih bahagia.  Masalahnya adalah: kode JS berat, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">waktu</a> tinggi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">untuk mulai bekerja dengan halaman (TTI)</a> , memori tinggi dan konsumsi prosesor. </p><a name="habracut"></a><br><p>  Sebelum membaca lebih lanjut, ikuti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautannya</a> .  Coba mainkan beberapa permainan.  Mainkan lebih disukai dari desktop. </p><br><h2 id="nemnogo-istorii">  Sedikit sejarah </h2><br><p> Sejak awal, browser web dikandung sebagai klien tipis untuk server web.  Browser menampilkan halaman hypertext yang diterima dari server.  Sederhana dan elegan.  Seperti yang sering terjadi, ide yang indah dihadapkan dengan kenyataan, dan setelah beberapa tahun, produsen browser telah menambahkan dukungan untuk bahasa scripting.  Pada awalnya, itu berfungsi hanya sebagai hiasan, dan sampai pertengahan 2000-an, itu dianggap bentuk yang baik untuk membuat halaman web berfungsi tanpa dukungan JS. </p><br><p>  Pendekatan modern untuk pengembangan situs web adalah hasil dari pengembangan persyaratan interaktivitas antarmuka pengguna.  Tugas untuk meningkatkan interaktivitas berada di pundak para pembuat kode.  Mereka sering tidak memiliki kompetensi dan wewenang untuk mengembangkan solusi "lintas sektoral".  Desainer tata letak belajar menulis JS dan menjadi front-end.  Logika secara bertahap mulai mengalir dari server ke klien.  Adalah nyaman bagi pelari terdepan untuk menulis untuk browser, dan back-end nyaman untuk tidak memikirkan pengguna (berikan JSON saya kepada Anda, dan setidaknya rumput tidak tumbuh).  Hanya dua tahun yang lalu, ada lonjakan minat dalam arsitektur serverless, di mana disarankan bahwa aplikasi JS akan bekerja secara langsung dengan database dan bus acara. </p><br><p>  Saat ini, "situs web bola dalam ruang hampa" adalah aplikasi JS yang kompleks dan server API sederhana yang digunakan untuk berkomunikasi.  Logika utama berjalan pada klien yang tebal, sisi server berubah menjadi lapisan sederhana ke database. </p><br><p> Kebutuhan untuk menjaga logika pada klien menciptakan masalah.  Jika layanan "lepas landas" dan mulai menghasilkan uang, maka lebih lanjut, dalam hal produktivitas, itu hanya akan bertambah buruk.  Persyaratan akan berubah.  Tim pengembangan akan berubah.  Akan ada semakin banyak kode baru, dan kode lama tidak akan dibersihkan.  Halaman akan membengkak dari dependensi, itu akan memuat JSON tentang tujuan yang tidak ada yang ingat, tapi itu menakutkan untuk dihapus, tiba-tiba ada yang rusak.  Tugas latar belakang SetInterval akan muncul, masing-masing dilakukan selama beberapa milidetik setiap detik, yang setelah beberapa waktu akan menyebabkan rem dan menghangatkan <em>iPad</em> pengguna yang malang hingga ia dapat menggoreng telur goreng di atasnya.  Itu berakhir dengan fakta bahwa front-end yang <em>terbakar</em> akan datang ke manajer dengan proposal untuk menulis ulang semuanya dari awal pada kerangka kerja baru.  Manajer akan menolak, dan front-end akan mulai menggunakan dua kerangka kerja bersama. </p><br><h2 id="kak-rabotaet-korolev">  Cara kerja Korolev </h2><br><p>  Jadi, bagaimana jika kita kembali ke pokok laporan?  Saat ketika seseorang datang dengan ide memperbarui konten tanpa memuat ulang halaman, dan keniscayaan historis memunculkan AJAX?  Bagaimana jika Anda meninggalkan semuanya di server dan membuat klien kurus?  Situs terbaik melakukan pra-rendering halaman server (SSR) sehingga pengguna melihat antarmuka sebelum JS dimuat dan dimulai.  Anda dapat melangkah lebih jauh dan meninggalkan klien hanya kode yang bertanggung jawab untuk memproses I / O, mengingat persyaratan saat ini untuk interaktivitas.  Pikiran tentang ini tumpah ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proyek Korolev</a> . </p><br><p>  Bagaimana cara kerjanya di sisi klien?  Pengguna datang ke halaman.  Server memberikan HTML yang dihasilkan dan skrip kecil (~ 6 Kbytes tanpa kompresi) yang terhubung ke server melalui soket web.  Ketika seorang pengguna menjalankan suatu peristiwa (misalnya, klik), skrip mengirimkannya ke server.  Setelah memproses acara tersebut, server membuat daftar perintah dari bentuk "tambah <code>&lt;div&gt;</code> sana", "tambahkan kelas ke elemen seperti itu", "hapus elemen ini dan itu".  Klien menerapkan daftar perintah ke DOM.  Dengan demikian, bekerja dengan HTML tidak terjadi - skrip bekerja langsung dengan DOM, jadi jangan khawatir bahwa isi formulir atau posisi gulir akan diatur ulang. </p><br><p>  Apa yang terjadi di server?  Ketika permintaan untuk sebuah halaman berasal dari browser, Korolev membuat sesi baru.  Untuk sesi, keadaan awal dibuat, yang disimpan dalam cache.  HTML dihasilkan dari keadaan ini, yang diberikan kepada klien sebagai respons terhadap permintaan.  Selain itu, server menyimpan "DOM virtual" di sesi.  Setelah meminta halaman, server menerima permintaan untuk membuka soket web.  Korolev mengaitkan soket web terbuka dengan sesi.  Setiap acara yang berasal dari klien dapat mengubah status yang terkait dengan sesi.  Setiap perubahan status mengarah ke panggilan ke fungsi <code>render</code> , yang membentuk "DOM virtual" baru, yang dibandingkan dengan versi lama.  Hasil perbandingan dalam daftar perintah untuk dikirim ke klien. </p><br><p>  Apa yang terjadi pada kode dan kepala pengembang?  Di atas dapat mengingatkan Anda tentang Bereaksi, dengan perbedaan bahwa semuanya berjalan di server.  Dalam hal pendekatan pembangunan, kami juga memiliki sesuatu yang serupa.  Oleh karena itu, jika Anda bekerja dengan Bereaksi atau "DOM virtual" lainnya, maka pendekatan Ratu akan familier bagi Anda.  Jika Anda tidak terbiasa dengan Bereaksi, maka bayangkan Anda memiliki data yang Anda masukkan ke dalam templat.  Bayangkan bahwa sesuai dengan templat, pengendali acara tersebar yang dapat mengubah data (tetapi bukan DOM).  Anda mengubah data, halaman berubah sendiri.  Korolev sendiri datang dengan cara mengubah DOM. </p><br><h2 id="proizvoditelnost">  Performa </h2><br><p>  Ada dua pertanyaan populer tentang Korolev: "bagaimana jika penundaannya tinggi" dan "apakah ini tidak memuat server saya".  Kedua pertanyaan itu sangat masuk akal.  Programmer front-end digunakan untuk menjalankan programnya pada mesin lokal pengguna.  Ini berarti bahwa perubahan yang dibuat untuk itu akan diterapkan segera setelah mesin JS selesai mengeksekusi kode dan browser mulai render.  Saya secara khusus menunjukkan contoh menggunakan "pada kecepatan maksimum" di awal.  Anda dapat mengamati penundaan hanya jika Anda datang dari sisi lain dunia (server berada di Moskow) atau Anda duduk di Internet melalui GPRS.  Yah, atau server virtual saya yang menyedihkan dengan satu inti dan 1 GB RAM tidak tahan dengan efek habr. </p><br><p>  Pertanyaan tentang beban server biasanya ditanyakan oleh beckender.  Mesin keluaran perubahan bekerja dengan sangat cepat: ~ 10 ribu kesimpulan per detik untuk dua pohon acak dari 500 node pada macbook junior 2013.  Render statis juga memberikan hasil yang cukup bagus: hingga 1 juta halaman per detik.  Setiap "DOM virtual" disimpan dan diproses dalam bentuk serial khusus dan membutuhkan 128 KB untuk halaman web rata-rata.  Proses output dioptimalkan secara khusus dan tidak memiliki overhead untuk memori dan GC. </p><br><p>  Adapun kecepatan perkembangannya, di sini Korolev memberikan keuntungan besar.  Tidak perlu menulis lapisan tambahan antara database dan server.  Tidak perlu menegosiasikan protokol antara klien dan server.  Tidak perlu khawatir tentang modularitas front-end - bobot JS pada klien akan selalu tetap sama.  Tidak perlu melakukan logika tambahan untuk acara server: cukup terima pesan dari antrian dan ubah status sesi, Korolev akan membuat dan mengirim. </p><br><h2 id="cena">  Harga </h2><br><p>  Anda harus membayar manfaatnya.  Beberapa kebiasaan harus ditinggalkan, dan beberapa kebiasaan baru harus diperoleh.  Misalnya, Anda harus meninggalkan animasi JS dan puas dengan animasi CSS.  Anda harus mempelajari cara membuat infrastruktur yang awalnya didistribusikan secara geografis jika Anda ingin melayani pengguna dari berbagai negara dengan kualitas tinggi.  Harus meninggalkan JS dan pergi ke Scala. </p><br><p>  Saya sedikit malu (sebenarnya tidak) bahwa saya menyesatkan pembaca dan tidak segera mengatakan bahwa Korolev ditulis dalam Scala.  Apakah Anda akan membaca sampai titik ini jika saya segera membicarakan hal ini?  Berbicara tentang Ratu, saya harus mengatasi dua stereotip.  Yang pertama adalah karena fakta bahwa rendering server dianggap sebagai sesuatu yang lambat, bukan interaktif.  Yang kedua terkait dengan fakta bahwa Scala adalah sesuatu yang rumit.  Dan stereotip pertama dan kedua tidak ada hubungannya dengan kenyataan.  Selain itu, pemrograman dalam gaya Bereaksi pada Scala lebih nyaman daripada pada JS.  JS modern condong ke arah pemrograman fungsional, Scala mengeluarkannya dari kotak.  Misalnya, objek apa pun di Scala memiliki metode <code>copy()</code> yang memungkinkan Anda untuk menyalin objek dengan mengubah beberapa bidang.  Koleksi abadi dibangun ke dalam perpustakaan standar Scala. </p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Korolev telah dikembangkan selama tiga tahun oleh beberapa pengembang dan banyak masalah "anak-anak" diselesaikan di dalamnya.  Proyek ini didokumentasikan dengan baik, semua fungsi ditutupi dengan contoh-contoh.  Saya mengusulkan untuk memulai implementasi Ratu dengan layanan independen kecil.  Saya harap Korolev membantu membuat program kurang mengecewakan. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan ke proyek di github</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429028/">https://habr.com/ru/post/id429028/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429016/index.html">Volvo dan Baidu akan mengembangkan kendaraan tanpa awak bersama</a></li>
<li><a href="../id429018/index.html">Mengapa desain Gmail baru begitu lambat?</a></li>
<li><a href="../id429020/index.html">Apa itu setter yang fasih</a></li>
<li><a href="../id429022/index.html">GridGain on Highload: tempat berbicara tentang DBMS, In-Memory, dan sumber terbuka yang didistribusikan</a></li>
<li><a href="../id429024/index.html">Buat GIF dengan OpenCV</a></li>
<li><a href="../id429030/index.html">Logomachine membuat logo gratis per komentar</a></li>
<li><a href="../id429032/index.html">Splunk Essentials untuk Aplikasi Industri Layanan Keuangan, atau bagaimana Splunk memasuki pasar analitik keuangan</a></li>
<li><a href="../id429034/index.html">Beberapa cerita tentang programmer bawah tanah</a></li>
<li><a href="../id429036/index.html">Percayalah, saya tahu apa yang saya lakukan: adaptasi otomatis dari robot modular ke lingkungan pelaksanaan tugas</a></li>
<li><a href="../id429038/index.html">Rust News # 2 (Oktober 2018)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>