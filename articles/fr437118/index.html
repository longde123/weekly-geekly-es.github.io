<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜ ğŸ§›ğŸ½ ğŸ‘©ğŸ½â€ğŸ’» AI et 2048. Partie 1: MÃ©thode Monte Carlo ğŸ’– ğŸš´ğŸ½ ğŸ›€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""2048" dans quelques semaines marque 5 ans, ce qui signifie qu'il est temps d'Ã©crire quelque chose de dÃ©diÃ© Ã  ce merveilleux jeu. 

 Le sujet d'un jeu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AI et 2048. Partie 1: MÃ©thode Monte Carlo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/437118/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img width="690" height="313" src="https://habrastorage.org/webt/7u/sw/lm/7uswlmwcbpmdfhrcmk0-qgp38iu.png"></a> <br><br>  "2048" dans quelques semaines marque 5 ans, ce qui signifie qu'il est temps d'Ã©crire quelque chose de dÃ©diÃ© Ã  ce merveilleux jeu. <br><br>  Le sujet d'un jeu indÃ©pendant d'intelligence artificielle dans un puzzle est particuliÃ¨rement informatif.  Il existe diffÃ©rentes maniÃ¨res de le mettre en Å“uvre et aujourd'hui nous allons en analyser une relativement facile.  Ã€ savoir, nous apprendrons Ã  l'esprit informatique Ã  collecter des degrÃ©s de deux en utilisant la mÃ©thode de Monte Carlo. <a name="habracut"></a><br><br><blockquote> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Logiciel EDISON - dÃ©veloppement web"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="Logiciel EDISON - dÃ©veloppement web"></a> <br clear="right">  Cet article a Ã©tÃ© rÃ©digÃ© avec le soutien d'EDISON Software, une sociÃ©tÃ© qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dÃ©veloppe des applications mobiles</a> et fournit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des services de test de logiciels</a> . </blockquote><br>  L'inspiration pour ce travail a Ã©tÃ© une discussion sur stackoverflow, oÃ¹ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des gars intelligents ont suggÃ©rÃ© des moyens efficaces de jouer sur ordinateur</a> .  Apparemment, le meilleur moyen est la mÃ©thode minimax avec Ã©crÃªtage alpha-bÃªta et dans quelques jours la prochaine publication lui sera consacrÃ©e. <br><br>  MÃ©thode de casino suggÃ©rÃ©e par l'utilisateur stackoverflow <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img width="14" height="14" src="https://habrastorage.org/webt/eo/fj/at/eofjat4aio6bqe8i7xfdcg1iswo.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ronenz</a> dans le cadre de la discussion ci-dessus.  La section suivante entiÃ¨re est une traduction de sa publication. <br><br><h1>  MÃ©thode Monte Carlo </h1><br>  Je me suis intÃ©ressÃ© Ã  l'idÃ©e de l'IA pour ce jeu, dans lequel <b>il</b> n'y a <b>pas d'intelligence codÃ©e en dur</b> (c'est-Ã -dire qu'il n'y a pas d'heuristique, de score, etc.).  L'IA ne doit Â«connaÃ®treÂ» que les rÃ¨gles du jeu et Â«comprendreÂ» le jeu.  Cela le distingue de la plupart des IA (comme dans ce fil), car le gameplay est, en fait, une force brute contrÃ´lÃ©e par la fonction de notation, reflÃ©tant la comprÃ©hension humaine du jeu. <br><br><h2>  Algorithme AI </h2><br>  J'ai trouvÃ© un algorithme de jeu simple mais Ã©tonnamment bon: pour dÃ©terminer le prochain mouvement pour un Ã©tat de terrain donnÃ©, l'IA joue le jeu en RAM, effectuant <b>des mouvements alÃ©atoires</b> jusqu'Ã  ce que le jeu se termine par une dÃ©faite.  Cela se fait plusieurs fois, le score final Ã©tant suivi.  Ensuite, le score final moyen est calculÃ© en tenant compte du parcours initial.  Le coup initial qui a montrÃ© le rÃ©sultat moyen le plus Ã©levÃ© est sÃ©lectionnÃ© comme le coup dÃ©jÃ  choisi. <br><br>  Avec 100 points pour chaque tour initial, l'IA atteint la tuile 2048 dans 80% des cas et la tuile 4096 dans 50% des cas.  En utilisant 10000 essais, 2048 sont obtenus dans 100% des cas, 70% pour 4096 et environ 1% pour 8192. <br><img align="right" width="352" height="524" src="https://habrastorage.org/webt/81/bo/mg/81bomgvnk-q3jy4jae0ux6ljutk.png"><br clear="left">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voir en action</a> <br><br>  Le meilleur rÃ©sultat obtenu est illustrÃ© dans la capture d'Ã©cran: <br><br>  Un fait intÃ©ressant pour cet algorithme est que, bien que les jeux avec des mouvements exÃ©cutÃ©s de maniÃ¨re alÃ©atoire soient censÃ©s Ãªtre assez mauvais, nÃ©anmoins, choisir le meilleur (ou le moins mauvais, si vous le souhaitez) conduit Ã  un trÃ¨s bon gameplay: un jeu typique de Monte Carlo AI peut marquer 70 000 points pour 3000 coups, mais les jeux avec un jeu arbitraire en mÃ©moire Ã  partir d'une position donnÃ©e donnent en moyenne 340 points supplÃ©mentaires pour environ 40 coups supplÃ©mentaires avant de perdre.  (Vous pouvez le vÃ©rifier vous-mÃªme en dÃ©marrant l'IA et en ouvrant la console de dÃ©bogage.) <br><br>  Ce graphique illustre ce concept: la ligne bleue montre le score de la partie aprÃ¨s chaque coup.  La ligne rouge montre le <b>meilleur</b> rÃ©sultat de l'algorithme, effectuant arbitrairement des mouvements de cette position Ã  la fin de la partie.  En fait, les valeurs rouges Â«tirentÂ» les bleues, car ce sont les meilleures phrases de l'algorithme.  Fait intÃ©ressant, la ligne rouge est lÃ©gÃ¨rement au-dessus de la ligne bleue Ã  chaque point, mais la ligne bleue rÃ©duit de plus en plus l'Ã©cart. <br><br><div style="text-align:center;"><img width="666" height="425" src="https://habrastorage.org/webt/ws/u5/j4/wsu5j4-k1wxxdzuk9ambg9amtv0.png"></div><br>  Je trouve plutÃ´t surprenant que l'algorithme n'anticipe pas nÃ©cessairement un bon gameplay, et choisisse nÃ©anmoins les coups qui le produisent (un bon processus). <br><br>  Plus tard, j'ai dÃ©couvert que cette mÃ©thode peut Ãªtre classÃ©e comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un algorithme de recherche d'arbre Monte Carlo</a> . <br><br><h2>  ImplÃ©mentation et liens </h2><br>  Tout d'abord, j'ai crÃ©Ã© une version JavaScript qui peut Ãªtre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vue en action ici</a> .  Cette version est capable d'exÃ©cuter 100 exÃ©cutions dans un dÃ©lai raisonnable.  Ouvrez la console pour plus d'informations.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">source</a> ) <br><br>  Plus tard, pour jouer, j'ai utilisÃ© l'infrastructure @nneonneo hautement optimisÃ©e et implÃ©mentÃ© ma version en C ++.  Cette version permet jusqu'Ã  100 000 courses par tour et mÃªme 1 000 000 si vous Ãªtes prÃªt Ã  attendre.  Instructions de montage incluses.  Tout fonctionne dans la console et dispose Ã©galement d'une tÃ©lÃ©commande pour la lecture dans la version Web.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">source</a> ) <br><br><h2>  RÃ©sultats </h2><br>  Ã‰tonnamment, une augmentation du nombre de runs n'amÃ©liore pas fondamentalement le gameplay.  Il semble que cette stratÃ©gie ait une limite de 80 000 points avec une tuile de 4096 et tous les petits rÃ©sultats trÃ¨s proches d'atteindre la tuile 8192. Une augmentation du nombre de pistes de 100 Ã  100 000 augmente les chances d'atteindre cette limite (de 5% Ã  40%), mais pas le surmonte. <br><br>  La rÃ©alisation de 10 000 descentes avec une augmentation temporaire de jusqu'Ã  1 000 000 de positions proches des points critiques a permis de surmonter cette barriÃ¨re dans moins de 1% des cas avec le nombre maximum de points marquÃ©s 129892 et les tuiles 8192. <br><br><h2>  AmÃ©liorations et optimisations </h2><br>  AprÃ¨s avoir implÃ©mentÃ© cet algorithme, j'ai essayÃ© de nombreuses amÃ©liorations, notamment l'utilisation de notes minimales ou maximales ou une combinaison de valeurs minimales, maximales et moyennes.  J'ai Ã©galement essayÃ© d'utiliser la profondeur: au lieu d'essayer de terminer K courses par tour, j'ai essayÃ© K mouvements par liste de mouvements d'une longueur donnÃ©e (par exemple, Â«haut, haut, gaucheÂ») et j'ai choisi le premier mouvement de la liste des mouvements avec la meilleure victoire. <br><br>  Plus tard, j'ai implÃ©mentÃ© un arbre de score qui tenait compte de la probabilitÃ© conditionnelle qu'il soit capable de terminer un mouvement aprÃ¨s une liste donnÃ©e de mouvements. <br><br>  Cependant, aucune de ces idÃ©es n'a montrÃ© un rÃ©el avantage sur une simple premiÃ¨re idÃ©e.  J'ai laissÃ© du code commentÃ© pour ces idÃ©es dans la source C ++. <br><br>  J'ai ajoutÃ© le mÃ©canisme de recherche approfondie, qui a temporairement augmentÃ© le nombre d'exÃ©cutions Ã  1 000 000 lorsque l'une des exÃ©cutions a accidentellement rÃ©ussi Ã  atteindre la tuile la plus Ã©levÃ©e suivante.  Cela a conduit Ã  une amÃ©lioration des performances temporelles. <br><br>  J'aimerais savoir si quelqu'un a d'autres idÃ©es d'amÃ©lioration qui soutiennent l'indÃ©pendance de l'IA par rapport au sujet? <br><br><h1>  Options et clones 2048 </h1><br>  Pour le plaisir, j'ai Ã©galement implÃ©mentÃ© l'IA en tant que bookmarklet, en le connectant aux commandes du jeu.  Cela vous permet de travailler Ã  la fois avec le jeu original et bon nombre de ses variantes. <br><br>  Cela est possible en raison de la nature indÃ©pendante du domaine de l'IA.  Certaines des options sont assez originales, comme un clone hexagonal. <br><br><div class="scrollable-table"><table><tbody><tr><td>  La traduction est terminÃ©e Ã  ce sujet, mais pas seulement pour le plaisir de cette publication a Ã©tÃ© commencÃ©.  Avant les coliques, je voulais moi-mÃªme tester diffÃ©rentes idÃ©es pour l'IA en 2048. Pour cela, j'ai implÃ©mentÃ© le jeu dans Excel en Ã©crivant une application avec des macros.  La mise en Å“uvre sur VBA en soi n'est pas un exploit - en recherchant sur Google, vous pouvez rapidement le dÃ©couvrir avec une douzaine de bricolages Excel diffÃ©rents.  Mais non seulement pour prÃ©parer 2048 sous forme de feuilles de calcul, mais aussi pour rÃ©aliser un jeu indÃ©pendant de l'ordinateur - je ne l'ai pas encore rencontrÃ©. <br></td></tr></tbody></table></div><br><h1>  2048.xlsm </h1><br>  L'application Excel elle-mÃªme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peut Ãªtre tÃ©lÃ©chargÃ©e depuis Google</a> . <br><br>  L'image est cliquable - une image en taille rÃ©elle s'ouvrira. <br><br> <a href=""><img width="690" height="313" src="https://habrastorage.org/webt/7u/sw/lm/7uswlmwcbpmdfhrcmk0-qgp38iu.png"></a> <br><br>  BriÃ¨vement sur l'interface et les fonctionnalitÃ©s de l'application. <br><br>  Pour commencer Ã  jouer, vous devez cliquer sur le bouton " <b>Utilisateur: dÃ©marrer le jeu</b> ".  Lorsque vous appuyez Ã  nouveau sur ce bouton, l'inscription passe de " <b>Utilisateur: dÃ©marrer le jeu</b> " Ã  " <b>Utilisateur: terminer le jeu</b> " et vice versa, c'est-Ã -dire qu'Ã  tout moment vous pouvez arrÃªter le jeu puis le redÃ©marrer.  Lorsque le jeu s'arrÃªte, vous pouvez modifier manuellement l'alignement sur le terrain, en amÃ©liorant ou en aggravant votre position afin de tester ou de vÃ©rifier certaines idÃ©es. <br><br>  Pendant le jeu lui-mÃªme, vous pouvez effectuer des mouvements de deux maniÃ¨res: <br><br><ul><li>  <b>Clavier:</b> en appuyant simplement sur les touches "haut", "bas", "gauche", "droite". </li><li>  <b>Avec la souris:</b> cliquer sur les cellules avec de grandes flÃ¨ches indiquant la direction souhaitÃ©e. </li></ul><br>  Le bouton " <b>New Field</b> " efface le terrain de jeu et place alÃ©atoirement les "deux" et "quatre" dessus. <br><br>  La chose la plus intÃ©ressante est que la mÃ©thode Monte Carlo a Ã©tÃ© implÃ©mentÃ©e, exactement sous la forme dans laquelle elle a Ã©tÃ© proposÃ©e par le mec avec stackoverflow.  Ã€ chaque position, l'ordinateur en mÃ©moire passe par des branches alÃ©atoires pour chaque premier mouvement (Â«hautÂ», Â«basÂ», Â«gaucheÂ», Â«droiteÂ») jusqu'Ã  ce qu'il entraÃ®ne une perte.  Statistiquement, la direction la plus favorable est surlignÃ©e en rouge dans un tableau spÃ©cial ci-dessous.  Vous pouvez l'utiliser comme indice si vous voyez que votre propre jeu est Ã  l'arrÃªt et que vous devez vous sauver d'une maniÃ¨re ou d'une autre.  ;) <br><br>  Au-dessus du tableau se trouvent des cases Ã  cocher avec des options d'analyse.  Pour le moment, seul Monte Carlo a Ã©tÃ© dÃ©cidÃ©, le reste sera ajoutÃ© dans les prochains jours (Ã  la suite de quoi il y aura plus de harastas avec la mise Ã  jour de l'application Excel et des explications de la thÃ©orie). <br><br>  Il y a aussi un bouton <b>AI: game</b> .  En cliquant dessus, l'assistant informatique effectuera un mouvement conformÃ©ment Ã  la mÃ©thode de Monte Carlo ou Ã  un autre qui est sÃ©lectionnÃ© dans le groupe de commutateurs (minimax et rÃ©seau de neurones fonctionneront dans cette liste un peu plus tard). <br><br><h3>  Tous les articles des sÃ©ries AI et 2048 </h3><br><ul><li>  <strong>Monte Carlo</strong> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ã‰crÃªtage Minimax + alpha beta</a> </li><li>  En attente du maximum </li><li>  RÃ©seau de neurones </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437118/">https://habr.com/ru/post/fr437118/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437108/index.html">La plupart des textes sur Internet sont Ã©crits par des fous.</a></li>
<li><a href="../fr437110/index.html">Les nanomatÃ©riaux changent notre monde et nous n'avons toujours pas de procÃ©dures pour vÃ©rifier leur sÃ©curitÃ©</a></li>
<li><a href="../fr437112/index.html">DMA: mythes et rÃ©alitÃ©</a></li>
<li><a href="../fr437114/index.html">Webinaire ouvert: Â«SSH / NC / Socat: trucs et astucesÂ»</a></li>
<li><a href="../fr437116/index.html">AWS, MongoDB et les rÃ©alitÃ©s Ã©conomiques de l'open source</a></li>
<li><a href="../fr437120/index.html">Chaise de bureau corÃ©enne: sensations Harachair Miracle</a></li>
<li><a href="../fr437122/index.html">Nommer les choses</a></li>
<li><a href="../fr437124/index.html">Un moyen simple d'ajouter plusieurs langues Ã  votre site</a></li>
<li><a href="../fr437126/index.html">Articles avec DevFest SPB 2018</a></li>
<li><a href="../fr437128/index.html">QtCreator et son utilisation comme IDE pour Rust</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>