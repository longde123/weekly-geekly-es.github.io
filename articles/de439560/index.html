<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∞ üê∑ üö® Ethereum-Blockchain-Adapter f√ºr die IRIS-Datenplattform von InterSystems üï¥üèª üíî üñ•Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Blockchain 
 Wenn ich diesen Artikel schreibe, ist der Bitcoin-Wechselkurs im Vergleich zum Maximalwert um mehr als das F√ºnffache gesunken. Als ich...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ethereum-Blockchain-Adapter f√ºr die IRIS-Datenplattform von InterSystems</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/439560/"><h4>  1. Blockchain </h4><br>  Wenn ich diesen Artikel schreibe, ist der Bitcoin-Wechselkurs im Vergleich zum Maximalwert um mehr als das F√ºnffache gesunken. Als ich sagte, dass ich etwas mit der Blockchain zu tun habe, h√∂re ich als erstes offene Skepsis: "Wer braucht das alles jetzt f√ºr Ihre Blockchain?" . <br><br>  Ja, tats√§chlich ist der Hype um die Blockchain vorbei.  Die zugrunde liegenden Technologien blieben jedoch bestehen, sie entwickeln sich weiter und werden in bestimmten Nischen weiterentwickelt und eingesetzt. <a name="habracut"></a>  Im Internet und insbesondere in Habr√© gibt es viele Materialien, die beide allgemeinen Bereiche der Technologieanwendung beschreiben (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/company/bitfury/blog/353350</a> und spezifischere Beispiele f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/company/raiffeisenbank/blog/332756</a> ). <br><br>  Wie Sie wissen, ist Blockchain eine verteilte Registrierung, d. H.  Eine Datenbank, die auf mehrere Knoten verteilt ist, w√§hrend jeder Knoten eine vollst√§ndige Kopie der Registrierung speichert.  Die Besonderheit der Blockchain besteht darin, dass die Datens√§tze (Transaktionen) zu Bl√∂cken zusammengefasst und die Bl√∂cke zu einer Blockkette zusammengefasst werden.  Es sind jedoch nur Datenadditionsvorg√§nge verf√ºgbar.  All dies f√ºhrt dazu, dass es fast unm√∂glich ist, √Ñnderungen an Transaktionen vorzunehmen, die bereits in der Blockchain gespeichert sind. <br><br>  Es gibt viele Materialien zur Funktionsweise der Blockchain (wenn Sie noch nichts √ºber die Blockchain geh√∂rt haben, k√∂nnen Sie mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem einfachen Video beginnen</a> ). <br><br>  Zum Zeitpunkt des gr√∂√üten Anstiegs des Interesses an Blockchain-Technologie gab es viele Aufrufe, Blockchain absolut √ºberall zu verwenden.  Es gibt jedoch bestimmte Anzeichen f√ºr Projekte / Aufgaben, deren Implementierung m√∂glicherweise eine Blockchain erfordert. <br><br>  Erstens die Teilnahme einer gro√üen Anzahl von Spielern (Benutzern), die Daten aufzeichnen, w√§hrend es notwendig ist, Inkonsistenzen zu vermeiden und das Vertrauen zu erh√∂hen. <br><br>  Zweitens das Fehlen eines Dritten, dem jeder vertraut. <br><br>  Drittens die Notwendigkeit eines Mechanismus zur √úberpr√ºfung √∂ffentlicher Daten. <br>  Wenn alle oben genannten Bedingungen erf√ºllt sind, m√ºssen Sie √ºber die Verwendung einer Blockchain nachdenken. <br><br>  Solche Aufgaben k√∂nnen in jeder Branche auftreten.  Das Projekt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.101blockchains.com</a> sammelt Informationen sowohl zu potenziellen als auch zu implementierten Projekten sowie zu den Funktionen der Verwendung von Blockchain in verschiedenen Bereichen. <br><br>  Im Gesundheitswesen kann beispielsweise Blockchain verwendet werden: <br><br><ul><li>  zur sicheren Verwaltung von Patientendaten; </li><li>  Bek√§mpfung von Arzneimittelf√§lschungen durch unver√§nderliche Transaktionen in der gesamten Lieferkette; </li><li>  Verbesserung der √úberwachung und Wirksamkeit klinischer Studien durch Beseitigung von Betrug und Datenmanipulation. </li></ul><br>  Bei der Verwendung von Blockchain im Unternehmenssegment wird normalerweise eine private Blockchain mit verschiedenen Berechtigungsstufen (Private Permissioned Blockchain) verwendet.  Solche Netzwerke haben einen speziellen Satz von Knoten zum Best√§tigen von Transaktionen. <br><br>  Bei der Entwicklung des ersten InterSystems IRIS-Adapters f√ºr die Arbeit mit der Blockchain haben wir uns jedoch f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ethereum</a> entschieden, das zur Kategorie Permissionless Blockchain geh√∂rt - eine offene Plattform ohne Leitungsgremium.  Diese Wahl ist mit der Popularit√§t von Ethereum und einer ziemlich entwickelten Infrastruktur verbunden: dem Vorhandensein verschiedener Tools und Bibliotheken.  Sie k√∂nnen auch feststellen, dass Sie mit der Ethereum-Software <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine private Blockchain erstellen</a> k√∂nnen. <br><br><h4>  2. Der Adapter </h4><br>  Jetzt ist es Zeit, zum Adapter selbst √ºberzugehen. <br><br>  Ein Adapter in InterSystems IRIS (sowie in Ensemble) ist eine Klasse oder ein Paket von InterSystems IRIS-Klassen, die die M√∂glichkeit bieten, mit einem externen System zu arbeiten.  InterSystems-IRIS-Adapter werden in eingehende (zum Empfangen von Daten von einem externen System, wenn das externe System der Initiator der Interaktion ist) und ausgehende (zum Arbeiten mit einem externen System, wenn der Initiator der Interaktion InterSystems IRIS ist) unterteilt. <br><br>  Der IRIS Ethereum-Adapter ist ein ausgehender Adapter und unterscheidet sich geringf√ºgig von den meisten anderen InterSystems-IRIS-Adaptern, da ein Teil dieses Adapters ein Paket von InterSystems-IRIS-Klassen ist, der Adapter jedoch auch ein kleines NodeJS-Modul enth√§lt.  Die Architektur ist in Abbildung 1 dargestellt. <br><br><img src="https://habrastorage.org/webt/mo/kz/3c/mokz3cufv-4t24zab_oeouy5ef8.png"><br>  <i>Abbildung 1</i> <br><br>  Das NodeJS-Adaptermodul verwendet vorhandene NodeJS-Bibliotheken, um mit Ethereum zu arbeiten. <br><br>  Der Adapter bietet die folgenden Funktionen: <br><br><ul><li>  Platzieren Sie einen intelligenten Vertrag in Ethereum (wir planen, einen weiteren Artikel vorzubereiten, in dem wir mehr √ºber intelligente Vertr√§ge und Entwicklungstools sprechen und ein Beispiel diskutieren). </li><li>  Rufen Sie intelligente Vertragsmethoden auf: sowohl Methoden, die den Status der Blockchain nicht √§ndern, als auch Methoden, die den Status der Blockchain √§ndern </li><li>  Speichern einer Transaktion (√úberweisen von Geld von Brieftasche zu Brieftasche) </li><li>  Aufrufen von Hilfsmethoden, um den Blockchain-Status abzurufen </li><li>  Protokollieren aller Anforderungen (f√ºhrt das NodeJS-Modul aus, das zum Debuggen n√ºtzlich ist) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der Adapter ist mit <b>OpenExchange-</b> Quellcode verf√ºgbar</a> . <br><br><h4>  3. Ein einfaches Beispiel </h4><br>  Mit dem Adapter wird ein Beispiel f√ºr "Hallo Welt" installiert. <br><br>  Um mit Ethereum zu arbeiten (einschlie√ülich dieses Beispiels), ben√∂tigen Sie: <br><br><ul><li>  W√§hlen Sie aus, mit welchem ‚Äã‚ÄãNetzwerk Sie arbeiten m√∂chten.  F√ºr die Entwicklung werden √ºblicherweise Testnetzwerke wie Ropsten verwendet. </li><li>  Erstellen Sie eine Brieftasche in diesem Netzwerk und f√ºllen Sie sie auf </li><li>  Installieren Sie einen lokalen Ethereum-Client (z. B. Geth) oder erhalten Sie einen Schl√ºssel f√ºr die Zusammenarbeit mit einem Cloud-Anbieter (z. B. Infura). </li></ul><br>  Beim Einrichten eines Gesch√§ftsvorfalls m√ºssen Sie Folgendes angeben (Abbildung 2): <br><br><ol><li>  Server und Port, auf dem das NodeJS-Modul ausgef√ºhrt wird (Standardport ist 3000) </li><li>  Anbietereinstellungen (in diesem Fall Zugriff auf Infura) </li><li>  Zugriffsdetails (In den Zugriffsdetails m√ºssen Sie Ihre Brieftasche als Benutzernamen und den privaten Schl√ºssel aus der Brieftasche als Kennwort angeben. In InterSystems IRIS werden die Zugriffsdetails in einer separaten Datenbank gespeichert, f√ºr die die Verschl√ºsselung aktiviert sein muss.) </li></ol><br><img src="https://habrastorage.org/webt/ei/kr/bv/eikrbvchchjm5xwkbrfv9qm4olk.png"><br>  <i>Abbildung 2</i> <br><br>  Um mit intelligenten Vertr√§gen arbeiten zu k√∂nnen, m√ºssen Sie (f√ºr jeden intelligenten Vertrag, mit dem Sie Kontakt aufnehmen) einen Ordner im Dateisystem erstellen und dort zwei Dateien ablegen: <br>  * abi.txt <br>  * bytecode.txt <br><br>  Diese Dateien m√ºssen einen ABI-Smart-Vertrag und einen Bytecode haben.  Smart Contract ABI - eine formale Beschreibung der Smart Contract-Oberfl√§che im JSON-Format.  ABI und Bytecode werden zum Zeitpunkt der Erstellung des Smart-Vertrags erstellt. <br><br>  Bytecode wird nur zum Bereitstellen eines Vertrags ben√∂tigt. <br><br>  Mit dem Testdienst k√∂nnen Sie den Betrieb eines Gesch√§ftsvorfalls √ºberpr√ºfen. <br><br>  In Abbildung 3 wird mithilfe des Testdienstes der Smart-Vertrag bereitgestellt.  Das Ergebnis des Aufrufs dieses Gesch√§ftsvorgangs ist eine Nachricht, die einen Transaktions-Hash enth√§lt. <br><br><img src="https://habrastorage.org/webt/it/qm/wk/itqmwkzesdspagy8vxdwh0klpn4.png"><br>  <i>Abbildung 3</i> <br><br>  Mit dem Browser ropsten.etherscan.io (https://etherscan.io/) k√∂nnen Sie diese Transaktion finden und die Adresse des platzierten Smart-Vertrags abrufen. <br><br>  Um intelligente Vertragsmethoden mit dem Adapter auszuf√ºhren, m√ºssen Sie die Einstellungen in der Produktkonfiguration angeben: ContractFolder und ContractAddress. <br><br>  Der Code zum Aufrufen der Smart Contract-Methode ist recht einfach: <br><br><pre><code class="go hljs">set ..ContractABI = [].%FromJSON(..ContractFolder_<span class="hljs-string"><span class="hljs-string">"abi.txt"</span></span>) set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) set result = contract.hello() set pResponse = ##class(Ens.StringContainer).%New(result.args)</code> </pre> <br>  Mit der GetContract-Adaptermethode, der die Adresse des Smart Contract und ABI √ºbergeben wird, wird ein Smart Contract-Objekt erstellt, mit dem die Methoden aufgerufen werden.  In diesem Fall sollte die hello () -Methode im Smart-Vertrag definiert werden, der eine Zeichenfolge zur√ºckgibt. <br><br>  In diesem Beispiel √§ndert die hello () -Methode den Status der Blockchain nicht, sodass sie synchron aufgerufen werden kann.  Methoden, die den Status der Blockchain √§ndern, k√∂nnen jedoch lange dauern (Warten auf Transaktionsbest√§tigung). <br><br>  Um solche Methoden aufzurufen, k√∂nnen Sie den Mechanismus f√ºr verz√∂gerte Antworten in InterSystems IRIS verwenden.  Der Adapter muss das zur√ºckgestellte Token √ºbergeben. Wenn die NodeJS-Transaktion best√§tigt wird, √ºbertr√§gt das Modul das Ergebnis seiner Ausf√ºhrung an InterSystems IRIS.  Dazu m√ºssen Sie die Webanwendung konfigurieren und dem Produkt einen Gesch√§ftsvorgang hinzuf√ºgen, der die empfangene Antwort verarbeitet. <br><br>  Code zum Aufrufen einer Methode, die den Status der Blockchain √§ndert: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// getting EthereumAccount(wallet) and privateKey do ##class(Ens.Config.Credentials).GetCredentialsObj(.cred, "Ethereum.Demo.EthereumOperation", "Ens.Config.Credentials", ..Credentials) set account = ##class(Ethereum.Address).%New(cred.Username) set privateKey = cred.Password //reading contract ABI set ..ContractABI = [].%FromJSON(..ContractFolder_"abi.txt") // get contract object set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) $$$ThrowOnError(..DeferResponse(.deferred)) // estimate gas do contract.SetOptions(account) set gasJSON = contract.EstimateGas("setName",pRequest.Name) $$$TRACE(gasJSON.gas) do contract.SetOptions(account, privateKey, ##class(Ethereum.Wei).%New(1000000000), ##class(Ethereum.Wei).%New(100*gasJSON.gas),,deferred) set result = contract.setName(pRequest.Name)</span></span></code> </pre> <br>  In diesem Fall m√ºssen Sie vor dem Aufrufen der Smart-Contract-Methode setName () eine Reihe von Parametern angeben, einschlie√ülich eines Tokens f√ºr verz√∂gerte Antworten. <br><br>  In unserem n√§chsten Artikel werden wir mehr √ºber intelligente Vertr√§ge sprechen und ein Beispiel f√ºr die L√∂sung einer Anwendung mit dem InterSystems IRIS Ethereum-Adapter geben. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de439560/">https://habr.com/ru/post/de439560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de439546/index.html">Tr√§umen Androiden von elektrischem Punk? Wie ich einem neuronalen Netzwerk das Schreiben von Musik beigebracht habe</a></li>
<li><a href="../de439550/index.html">Hackquest 2018. Ergebnisse & Zuschreibungen. Tag 1-3</a></li>
<li><a href="../de439552/index.html">Sch√§dliche Chrome-Erweiterungen</a></li>
<li><a href="../de439556/index.html">TDMS Fairway. PMBOK-Methoden und russische Designorganisationen</a></li>
<li><a href="../de439558/index.html">Neues altes Telefon. Das PSTN-Telefon neu erfinden</a></li>
<li><a href="../de439562/index.html">Konfigurieren Sie den Kubernetes HA-Cluster auf Bare Metal mit kubeadm. Teil 1/3</a></li>
<li><a href="../de439564/index.html">Praktische Anwendung der AST-Baumtransformation am Beispiel von Putout</a></li>
<li><a href="../de439566/index.html">Warum SRE-Dokumentation wichtig ist. Teil 3</a></li>
<li><a href="../de439568/index.html">QLC-basierte SSDs - ein Festplattenkiller? Nicht wirklich</a></li>
<li><a href="../de439570/index.html">IPython-Magie zum Bearbeiten von Jupyter-Zellen-Tags</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>