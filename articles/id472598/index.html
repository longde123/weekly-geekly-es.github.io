<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöê üöõ üëå Berorientasi Aspek Dinamis üßòüèæ üè∞ ‚ôªÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebuah cerita tentang model subjek tertentu, di mana banyak nilai bidang yang valid bergantung pada nilai orang lain. 

 Tantangan 
 Lebih mudah untuk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Berorientasi Aspek Dinamis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472598/">  Sebuah cerita tentang model subjek tertentu, di mana banyak nilai bidang yang valid bergantung pada nilai orang lain. <br><br><h3>  Tantangan </h3><br>  Lebih mudah untuk membuat dengan contoh spesifik: perlu mengkonfigurasi sensor dengan banyak parameter, tetapi parameter tergantung satu sama lain.  Misalnya, ambang respons tergantung pada jenis sensor, model dan sensitivitas, dan model yang mungkin tergantung pada jenis sensor, dll. <br><a name="habracut"></a><br>  Dalam contoh kami, kami hanya mengambil jenis sensor dan nilainya (ambang batas yang harus dipicu). <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Sensor</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Voltage, Temperature public SensorType Type { get; internal set; } //-400..400 for Voltage, 200..600 for Temperature public decimal Value { get; internal set; } }</span></span></code> </pre> <br>  Pastikan bahwa untuk sensor tegangan dan suhu, nilainya masing-masing hanya berada di kisaran -400..400 dan 200..600.  Semua perubahan dapat dilacak dan dicatat. <br><br><h3>  Solusi "sederhana" </h3><br>  Implementasi termudah untuk menjaga konsistensi data adalah dengan mengatur batasan dan dependensi secara manual dalam setter dan getter: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Sensor</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SensorType _type; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span> _value; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SensorType Type { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _type; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _type = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == SensorType.Temperature) Value = <span class="hljs-number"><span class="hljs-number">273</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == SensorType.Voltage) Value = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span> Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _value; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Type == SensorType.Temperature &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &gt;= <span class="hljs-number"><span class="hljs-number">200</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt;= <span class="hljs-number"><span class="hljs-number">600</span></span> || Type == SensorType.Voltage &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &gt;= <span class="hljs-number"><span class="hljs-number">-400</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt;= <span class="hljs-number"><span class="hljs-number">400</span></span>) _value = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } }</code> </pre><br>  Satu ketergantungan menghasilkan sejumlah besar kode yang sulit dibaca.  Mengubah kondisi atau menambah dependensi baru itu sulit. <br><br><img src="https://habrastorage.org/webt/0u/sw/ba/0uswba-hojjbqtr9nes1dnfu6rw.png" alt="gambar"><br><br>  Dalam proyek nyata, objek seperti itu kami memiliki lebih dari 30 bidang dependen dan lebih dari 200 aturan untuk masing-masing.  Solusi yang dijelaskan, meskipun berfungsi, akan membawa sakit kepala yang sangat besar dalam pengembangan dan dukungan sistem semacam itu. <br><br><h3>  "Ideal" tetapi tidak nyata </h3><br>  Aturan mudah dijelaskan dalam bentuk singkat dan dapat ditempatkan di sebelah bidang yang terkait.  Idealnya: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Sensor</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SensorType Type { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Number(Type = SensorType.Temperature, Min = <span class="hljs-number"><span class="hljs-number">200</span></span>, Max = <span class="hljs-number"><span class="hljs-number">600</span></span>, Force = <span class="hljs-number"><span class="hljs-number">273</span></span>)] [Number(Type = SensorType.Voltage, Min = <span class="hljs-number"><span class="hljs-number">-400</span></span>, Max = <span class="hljs-number"><span class="hljs-number">400</span></span>, Force = <span class="hljs-number"><span class="hljs-number">0</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span> Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br>  Force adalah nilai apa yang harus ditetapkan jika kondisinya berubah. <br><br>  Hanya sintaks C # yang tidak akan mengizinkan penulisan ini dalam atribut, karena daftar bidang yang bergantung pada properti target tidak ditentukan sebelumnya. <br><br><h3>  Pendekatan kerja </h3><br>  Kami akan menulis aturan sebagai berikut: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Sensor</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SensorType Type { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Number(<span class="hljs-string"><span class="hljs-string">"Type=Temperature"</span></span>, <span class="hljs-string"><span class="hljs-string">"200..600"</span></span>, Force = <span class="hljs-string"><span class="hljs-string">"273"</span></span>)] [Number(<span class="hljs-string"><span class="hljs-string">"Type=Voltage"</span></span>, <span class="hljs-string"><span class="hljs-string">"-400..400"</span></span>, Force = <span class="hljs-string"><span class="hljs-string">"0"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span> Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br>  Tetap membuatnya berfungsi.  Kelas semacam itu sama sekali tidak berguna. <br><br><h3>  Dispatcher </h3><br>  Idenya sederhana - tutup setter dan ubah nilai bidang melalui operator tertentu, yang akan memahami semua aturan, memantau pelaksanaannya, memberi tahu tentang perubahan bidang, dan mencatat semua perubahan. <br><br><img src="https://habrastorage.org/webt/db/gn/ac/dbgnac0xng2kq2gb0-tih_hhcqi.png" alt="gambar"><br><br>  Opsi ini berfungsi, tetapi kodenya akan terlihat mengerikan: <br><br><pre> <code class="cs hljs">someDispatcher.Set(mySensor, <span class="hljs-string"><span class="hljs-string">"Type"</span></span>, SensorType.Voltage);</code> </pre><br>  Tentu saja Anda dapat menjadikan operator sebagai bagian integral dari objek dengan dependensi: <br><br><pre> <code class="cs hljs">mySensor.Set(<span class="hljs-string"><span class="hljs-string">"Type"</span></span>, SensorType.Voltage)</code> </pre><br>  Tapi objek saya akan digunakan oleh pengembang lain dan kadang-kadang tidak akan sepenuhnya jelas mengapa <s>mereka</s> perlu menulis.  Lagi pula, saya hanya ingin menulis: <br><br><pre> <code class="cs hljs">mySensor.Type=SensorType.Voltage;</code> </pre><br><h3>  Warisan </h3><br>  Khususnya, dalam model kami, kami sendiri mengelola siklus hidup objek dengan dependensi - kami menciptakannya hanya dalam model itu sendiri dan secara lahiriah hanya menyediakan pengeditannya.  Oleh karena itu, kita akan membuat semua bidang menjadi virtual, kita akan membiarkan antarmuka eksternal dari model tidak berubah, tetapi itu akan bekerja dengan kelas "pembungkus", yang akan menerapkan logika pemeriksaan. <br><br><img src="https://habrastorage.org/webt/p9/dq/an/p9dqanmzswgdce8vaz9emp1eqgc.png" alt="gambar"><br><br>  Ini adalah pilihan ideal untuk pengguna eksternal, ia akan bekerja dengan objek seperti itu dengan cara biasa <br><br><pre> <code class="cs hljs">mySensor.Type=SensorType.Voltage</code> </pre><br>  Masih belajar bagaimana membuat pembungkus seperti itu <br><br><h3>  Generasi kelas </h3><br>  Sebenarnya ada dua cara untuk menghasilkan: <br><br><ul><li>  Hasilkan kode berbasis atribut lengkap </li><li>  Hasilkan kode lengkap yang memanggil pengecekan atribut </li></ul><br>  Membuat kode berdasarkan atribut sudah pasti keren dan akan bekerja dengan cepat.  Tetapi berapa banyak itu akan membutuhkan kekuatan.  Dan, yang paling penting, jika Anda perlu menambahkan batasan / aturan baru, berapa banyak perubahan yang diperlukan dan kompleksitas apa? <br><br>  Kami akan menghasilkan kode standar untuk setiap penyetel, yang akan memanggil metode yang akan menganalisis atribut dan melakukan pemeriksaan. <br><br>  Kami akan meninggalkan pengambil tidak berubah: <br><br><pre> <code class="cs hljs">MethodBuilder getPropMthdBldr = typeBuilder.DefineMethod(<span class="hljs-string"><span class="hljs-string">"get_"</span></span> + property.Name, MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig | MethodAttributes.Virtual, property.PropertyType, Type.EmptyTypes); ILGenerator getIl = getPropMthdBldr.GetILGenerator(); getIl.Emit(OpCodes.Ldarg_0); getIl.Emit(OpCodes.Call, property.GetMethod); getIl.Emit(OpCodes.Ret);</code> </pre><br>  Di sini, parameter pertama yang datang ke metode kami didorong ke stack, ini adalah referensi ke objek (ini).  Kemudian pengambil kelas dasar dipanggil dan hasilnya dikembalikan, yang diletakkan di atas tumpukan.  Yaitu  pengambil kami hanya meneruskan panggilan ke kelas dasar. <br><br>  Setter agak sulit.  Untuk analisis, kami akan membuat metode statis, yang akan menghasilkan analisis kira-kira dengan cara berikut: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (StrongValidate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, property, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = SoftValidate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, property, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (oldValue != <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { &lt;    <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>&gt;; ForceValidate(baseModel, property); Log(baseModel, property, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, oldValue); } }</code> </pre><br>  StrongValidate - akan membuang nilai yang tidak dapat dikonversi ke nilai yang sesuai dengan aturan.  Sebagai contoh, hanya "y" dan "n" yang diizinkan ditulis dalam kotak teks;  ketika Anda mencoba menulis "u", Anda hanya harus menolak perubahan sehingga modelnya tidak hancur. <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">String(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"y, n"</span></span></span><span class="hljs-meta">)</span></span>]</code> </pre><br>  SoftValidate - akan mengonversi nilai dari tidak pantas ke valid.  Misalnya, bidang int hanya dapat menerima angka.  Saat Anda mencoba menulis 111, Anda dapat mengonversi nilainya ke yang cocok terdekat - "9". <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Number(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"0..9"</span></span></span><span class="hljs-meta">)</span></span>]</code> </pre><br>  &lt;panggil setter basis dengan nilai&gt; - setelah kami mendapatkan nilai yang valid, Anda perlu memanggil setter kelas dasar untuk mengubah nilai field. <br><br>  ForceValidate - setelah perubahan, kita bisa mendapatkan model yang tidak valid di bidang yang bergantung pada bidang kita.  Misalnya, mengubah Jenis menyebabkan perubahan Nilai. <br><br>  Log hanyalah pemberitahuan dan pencatatan. <br><br>  Untuk memanggil metode seperti itu, kita perlu objek itu sendiri, nilainya baru dan lama, dan bidang yang berubah.  Kode untuk setter akan terlihat seperti ini: <br><br><pre> <code class="cs hljs">MethodBuilder setPropMthdBldr = typeBuilder.DefineMethod(<span class="hljs-string"><span class="hljs-string">"set_"</span></span> + property.Name, MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig | MethodAttributes.Virtual, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { property.PropertyType }); <span class="hljs-comment"><span class="hljs-comment">//  ,    var setter = typeof(DinamicWrapper).GetMethod("Setter", BindingFlags.Static | BindingFlags.Public); ILGenerator setIl = setPropMthdBldr.GetILGenerator(); setIl.Emit(OpCodes.Ldarg_0);//     - this setIl.Emit(OpCodes.Ldarg_1);//     -  setter    (value) if (property.PropertyType.IsValueType) //  Boxing,    Value,         object { setIl.Emit(OpCodes.Box, property.PropertyType); } setIl.Emit(OpCodes.Ldstr, property.Name); //     setIl.Emit(OpCodes.Call, setter); setIl.Emit(OpCodes.Ret);</span></span></code> </pre><br>  Kita akan membutuhkan metode lain yang secara langsung akan mengubah nilai kelas dasar.  Kode ini mirip dengan pengambil sederhana, hanya ada dua parameter - ini dan nilai: <br><br><pre> <code class="cs hljs">MethodBuilder setPureMthdBldr = typeBuilder.DefineMethod(<span class="hljs-string"><span class="hljs-string">"set_Pure_"</span></span> + property.Name, MethodAttributes.Public, CallingConventions.Standard, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { property.PropertyType }); ILGenerator setPureIl = setPureMthdBldr.GetILGenerator(); setPureIl.Emit(OpCodes.Ldarg_0); setPureIl.Emit(OpCodes.Ldarg_1); setPureIl.Emit(OpCodes.Call, property.GetSetMethod()); setPureIl.Emit(OpCodes.Ret);</code> </pre><br>  Semua kode dengan tes kecil dapat ditemukan di sini: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/wolf-off/DinamicAspect</a> <br><br><h3>  Validasi </h3><br>  Kode validasi sendiri sederhana - mereka hanya mencari atribut aktif saat ini sesuai dengan prinsip kondisi terpanjang dan bertanya kepadanya apakah nilai baru itu valid.  Anda hanya perlu mempertimbangkan dua hal saat memilih aturan (menguraikannya dan menghitung yang sesuai): <br><br><ul><li>  Tembolok hasil GetCustomAttributes.  Fungsi yang mengambil atribut dari bidang berfungsi lambat karena membuatnya setiap waktu.  Cache hasilnya.  Saya menerapkan BaseModel di kelas dasar </li><li>  Saat menghitung aturan yang sesuai, Anda harus berurusan dengan tipe bidang.  Jika semua nilai direduksi menjadi string dan dibandingkan, ini akan bekerja lambat.  Terutama enum.  Diimplementasikan di kelas atribut dasar DependencyAttribute </li></ul><br><h3>  Kesimpulan </h3><br>  Apa keuntungan dari pendekatan ini? <br><br>  Dan itu setelah membuat objek: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> target = DinamicWrapper.Create&lt;Sensor&gt;();</code> </pre><br>  Itu dapat digunakan seperti biasa, tetapi akan berperilaku sesuai dengan atribut: <br><br><pre> <code class="cs hljs">target.Type = SensorType.Temperature; target.Value=<span class="hljs-number"><span class="hljs-number">300</span></span>; Assert.AreEqual(target.Value, <span class="hljs-number"><span class="hljs-number">300</span></span>); <span class="hljs-comment"><span class="hljs-comment">// true target.Value=3; Assert.AreEqual(target.Value, 200); // true - minimum target.Value=3000; Assert.AreEqual(target.Value, 600); // true - maximum target.Type = SensorType.Voltage; Assert.AreEqual(target.Value, 0); // true - minimum target.Value= 3000; Assert.AreEqual(target.Value, 400); // true - maximum</span></span></code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id472598/">https://habr.com/ru/post/id472598/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id472582/index.html">Sejarah Internet: Komputer sebagai Perangkat Komunikasi</a></li>
<li><a href="../id472586/index.html">Analisis speaker ponsel: apa yang ada di dalamnya dan cara kerjanya</a></li>
<li><a href="../id472588/index.html">Segala Sesuatu yang Ingin Anda Ketahui tentang Pendulum Mundur</a></li>
<li><a href="../id472590/index.html">Memilih Pengembang Seluler dalam 5 Langkah: Tampilan Perusahaan IT</a></li>
<li><a href="../id472596/index.html">Cara Membuat Video Untuk Game. Kiat Praktis dan Pedoman Bermanfaat</a></li>
<li><a href="../id472600/index.html">Pengantar Git</a></li>
<li><a href="../id472602/index.html">Bagaimana tidak mempermalukan pertemuan, atau pengembang mengajar pengembang untuk berbicara. Wawancara dengan Alexander Shushunov</a></li>
<li><a href="../id472604/index.html">Buka webinar "Validasi Lancar sebagai Alat Validasi Data"</a></li>
<li><a href="../id472606/index.html">Kami membungkus semua lalu lintas OS di Tor</a></li>
<li><a href="../id472610/index.html">Elemen HTML mana yang lebih diminati: analisis 8 juta halaman dari perspektif SEO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>