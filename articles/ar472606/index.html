<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โ๐พ ๐ญ ูุญู ุงูุชูุงู ุฌููุน ุญุฑูุฉ ุงููุฑูุฑ OS ูู ุชูุฑ ๐จ๐พโโ๏ธ ๐ ๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุชู ุชุทุจูู ูู ูุง ุชู ูุตูู ูู ุงูููุงู ูุฃุฏุงุฉ Toroxy ูุชููุฑุฉ ุนูู GitHub  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ูุงู ุฅุฎูุงุก ุงููููุฉ ุนุจุฑ ุงูุฅูุชุฑูุช ููุถูุน ููุงุด ุณุงุฎู. ููุณ ุณุฑุงู ุฃู ุงูุจูุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุญู ุงูุชูุงู ุฌููุน ุญุฑูุฉ ุงููุฑูุฑ OS ูู ุชูุฑ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postuf/blog/472606/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/z3/d1/g0/z3d1g0m8ezuksztgh1d6wbwenuw.png"><br><br><blockquote style=";text-align:right;direction:rtl">  ูุชู ุชุทุจูู ูู ูุง ุชู ูุตูู ูู ุงูููุงู ูุฃุฏุงุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Toroxy</a> ูุชููุฑุฉ ุนูู GitHub </blockquote>  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ูุงู ุฅุฎูุงุก ุงููููุฉ ุนุจุฑ ุงูุฅูุชุฑูุช ููุถูุน ููุงุด ุณุงุฎู.  ููุณ ุณุฑุงู ุฃู ุงูุจูุงูุงุช ุงููุชุนููุฉ ุจุฒูุงุฑุงุช ููุงุฑุฏ ุงูุฅูุชุฑูุช ูู ุฌูุงุฒ ูุญูู ูููู ุฌูุนูุง ุนูู ูุณุชููุงุช ูุฎุชููุฉ ูู ุฃุฌู ุจูุงุก "ูููุฐุฌ" ูููุณุชุฎุฏู ุ ูููู ุงุณุชุฎุฏุงูู ูุงุญููุง ุถุฏู (ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู</a> ).  ูุฐูู ุ ููุณ ูู ุงููุณุชุบุฑุจ ุฃู ูุตุจุญ ุนุฏุฏ ูุชุฒุงูุฏ ูู ูุณุชุฎุฏูู ุงูุฅูุชุฑูุช ุงููุดุทูู ููุชูุนูู ุจุงูุญุงุฌุฉ ุฅูู ุขููุงุช ุงููููู ูุฅุฎูุงุก ุงููููุฉ.  ูู ูุฐุง ุงูุตุฏุฏ ุ ููุฌุฏ ุงููุฒูุฏ ูุงููุฒูุฏ ูู ุนููุงุก VPN ุงูุฌุฏุฏ ุ ูููู ุ ููุง ุชูุถุญ ุงูููุงุฑุณุฉ ุ ูุง ูููู ุงููุซูู ุจูู ุฌููุนูุง: ุฅูุง ุฃูู ูุง ูุนูู ูู ุดูุก ุ ุซู ูุชู ุฅุฎูุงุก ูููุฉ ุญุฑูุฉ ูุฑูุฑ HTTP ููุท ุ ุซู ุชููู ุฌูุฏุฉ ุงูุชูููุฐ ุนุฑุฌุงุก ุ ุฃู ูุงููุทูุฑูู ููุนููู ุงูุฎุทูุฆุฉ ูู ุฎูุงู ุฏูุฌ ุงูุจูุงูุงุช ุญูู ูุณุชุฎุฏูููู. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณูุญุงูู ุชุฌููุน ุงูุฃุฏุงุฉ ุงูุฎุงุตุฉ ุจูุง ูุน ูุงุฌูุฉ ูุณุชุฎุฏู ูู ุนุฏุฏ ูู ููููุงุช ุงูุจุฑุงูุฌ ุ ููุง ุณูุชูุญ ููุง ุฅุฎูุงุก ุงููููุฉ ุงููุงููุฉ ูุญุฑูุฉ ุงููุฑูุฑ ูู ุงููุธุงู ุงููุญูู ูููุน ุงูุชุณุฑูุจุงุช ุนูู ูููุงุช "ุงูุงุณุชูุงุน" ูู ุฃู ูุฑุญูุฉ ูู ูุฑุงุญู ุงูุนูู. <br><a name="habracut"></a><br>  ุณูููู ูุฏููุง ุงูุฑุฆูุณู ูู "ุจูุงุก" ุฃุฏุงุฉ ููุซููุฉ ูู ุงูุฃุฏูุงุช ุงูุฌุงูุฒุฉ.  ูู ุงููุงุถุญ ุฃู ููุฑุฉ ุฅูุดุงุก ุฃุฏุงุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูู ููุทุฉ ุงูุตูุฑ ูู ููุช ูุนููู ูุญูููุฉ ุจุงูุฃุฎุทุงุก ุ ูุจุงูุชุงูู ุณูููู ูู ุงูุฃุณูู ูุงูุฃูุซุฑ ููุซูููุฉ ุงุฎุชูุงุฑ ุงูููููุงุช ุงูุฌุงูุฒุฉ ุ ุซู ุชูุตูููุง ุจุดูู ุตุญูุญ! <br><br>  ูุง ุงูุฐู ูุฌุจ ุฃู ุชูุนูู ุงูุฃุฏุงุฉุ <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุชูุฌูู ูู ุญุฑูุฉ ูุฑูุฑ ุงููุธุงู ุงููุฏู ุฅูู ุงูุนูุฏ ุงููุชูุณุทุฉ (ูููุถู ุฃู ุชููู ุนุฏุฉ) ูุฅุฎูุงุก ุงููุตุฏุฑ ุจุดูู ููุซูู </li><li style=";text-align:right;direction:rtl">  ุชุชุจุน ุงูุชูุงูุงุช ุนุฏู ุงููุดู ุนู ูููุชู ุงููุญุชููุฉ ูุชุตุญูุญูุง ูุงูุฅุจูุงุบ ุนููุง ุจุงุณุชุฎุฏุงู ุฅุนูุงูุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู </li></ol><br>  ุงูููููุงุช ุงููุญุฏุฏุฉ ูุฅูุดุงุก ุงูุฃุฏุงุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชูุฑ </li><li style=";text-align:right;direction:rtl">  ุฅูุจุชุจูุณ </li><li style=";text-align:right;direction:rtl">  python3 </li><li style=";text-align:right;direction:rtl">  ุณูุณุชู ุฏู </li></ul><br>  ูู ุฎูุงู ูุฒุฌ ุฌููุน ุงูููููุงุช ูู ุบูุงู ูุณูู "Linux" ุ ูููููุง ุจุงูุชุฃููุฏ ุงูุญุตูู ุนูู ุดูุก ุฐู ูููุฉ ูู ุดุฃูู ุฃู ูุณุงุนุฏ ูู ุชุญููู ุงููุฏู ุงูููุงุฆู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููููู ุฑูู 1: Tor </h3><br>  ุญูู ูุฐุง ุงููููู ุณูุชู ุจูุงุก ุจููุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ ููุฃุฏุงุฉ.  ูููุฑ Tor ุขููุฉ ุชุดูู ุฌุฒุกูุง ูู ุฃู ุนููู VPN - ุขููุฉ ูุชุนุจุฆุฉ ุญุฑูุฉ ุงููุฑูุฑ ูู ุฎูุงู ุนูุฏ ูุณูุทุฉ ูุฌูููุฉ ูู ูุฑุงูุจ ุฎุงุฑุฌู (ูู ุงูุชูููู ุงูููุงุณู ููุฐู ุงูุนูุฏ 3). <br><br>  ุงูุชุฑุงุถููุง ุ ูุจุฏุฃ ุนููู Tor ูู ูุณุชูุฏุนุงุช ุงูุฏููุนุงุช ุงูููุงุณูุฉ ุจุนุฏ ุงูุชุซุจูุช ุ ุงูุงุณุชูุงุน ุฅูู ุงููููุฐ 9050 ุ ูุงูุฐู ููุจู ุฃู ุนููู ููููู ุงูุฌูุงุฑุจ.  ุชููู ุงููุดููุฉ ูู ุฃูู ุจุงูุฅุถุงูุฉ ุฅูู ุญุฑูุฉ ุงูุฌูุงุฑุจ ูู ูุธุงููุง ุ ูููู ุฃู ูููู ููุงู ุนุฏุฏ ูุจูุฑ ูู ุงูุฒูุงุฑุงุช ุงูุฃุฎุฑู ูู ุงูุชุทุจููุงุช ุงูุชู ูุง ุชุนูู ุนูู ูุฐุง ุงูุจุฑูุชูููู.  ูู ูุฐุง ุงูุตุฏุฏ ุ ุฃููุงู ููุจู ูู ุดูุก ุ ุฏุงุฎู ุงููุธุงู ุงููุญูู ุ ุณูุชุนูู ุนููู ูุทุน ูุงูุฐุฉ ูู ุดุจูุฉ Tor ูุฃู ุงุชุตุงู ุดุจูุฉ ุฌุฏูุฏ.  ูุชู ุฐูู ุจุจุณุงุทุฉ ุนู ุทุฑูู ุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููู ุงูุดูุงู</a> ูู ุชูููู <a href="">torrc</a> : <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">/etc/tor/torrc ... TransPort 9040 #           python ControlPort 9051 ...</code> </pre> <br>  ูุฌุจ ุฅููุงุก ุงูุชูุงู ุฎุงุต ูุญุฑูุฉ ูุฑูุฑ UDP.  ุงูุญูููุฉ ูู ุฃู ูุจุฏุฃ ุชูุฌูู ุงูุจุตู ูุนุชูุฏ ุนูู ููููู "ุงูุชุฏูู" ุ ูุงูุฐู ุ ููุง ุชุนูููู ุ ููุฌูุฏ ููุท ูู TCP.  ุนู ุทุฑูู ุฅุฑุณุงู ุญุฒูุฉ UDP ุนุจุฑ Tor ุ ูู ูุชููู ุงููุธุงู ุงููุฏู ูู ุชููู ุงุณุชุฌุงุจุฉ ุ ูุฃู ุญุฒูุฉ ุงูุงุณุชุฌุงุจุฉ ูู ุชุฌุฏ ูุณุงุฑ ุงูุฅุฑุฌุงุน.  ูููู ุนูู ุงูุฑุบู ูู ูุฐู ุงูุฎุตูุตูุฉ ุ ูุง ุชุฒุงู ูุฏููุง ุงููุฑุตุฉ ูุฅุฎูุงุก ุงููููุฉ ุนู ุงุณุชูุณุงุฑุงุช DNS ุ ูุงูุชู ููุนุฑู ุฃููุง ุชููุฐ ุนุจุฑ UDP ุ ููู ุงูููุช ููุณู ุชุดูู ูุฑุงุฑ .onion: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/etc/tor/torrc ... AutomapHostsOnResolve 1 DNSPort 53 ...</code> </pre><br>  ูู ูุฐุง ุ ุงููุตูู ุฅูู Tor ููุชูุญ ุฏุงุฎู ุงูุงุณุชุฑุฌุงุน. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููููู ุฑูู 2: ุงูุงุดูุงุก </h3><br>  ูุธุฑูุง ูุฃู ูููุชูุง ุชุชูุซู ูู ุฅุฎูุงุก ุงููุตุฏุฑ ุงูุญูููู ูุญุฑูุฉ ุงููุฑูุฑ ูู ูุฑุงูุจ ุฎุงุฑุฌู ุฏุงุฎู ุงููุธุงู ุจุฃูููู ุ ูุงููุงูุฐุฉ ูู Tor ููุชูุญุฉ ุจุงููุนู ุ ูุจูู ููุท ุงูุชูุงู ูู ุญุฑูุฉ ุงููุฑูุฑ ูู ูุฐู ุงููุงูุฐุฉ.  ุณูุณุงุนุฏูุง ุฌุฏุงุฑ ุงูุญูุงูุฉ ุงูููุฌูุฏ ูู ูุธุงู Linux kernel ุนูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#  tcp iptables -t nat -A OUTPUT -p tcp --syn -j REDIRECT --to-ports $TRANS_PORT #   udp (dns only) iptables -t nat -A OUTPUT -p udp --dport 53 -j REDIRECT --to-ports 53 iptables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT #       iptables -A OUTPUT -j REJECT ip6tables -A OUTPUT -j REJECT</code> </pre><br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ูุญุตู ุนูู ุฃุฏุงุฉ ุนูู ุชุนูู ุจุดูู ูุฎูู ุนูู ุฅุฎูุงุก ูู ุญุฑูุฉ ุงููุฑูุฑ ุงูุตุงุฏุฑุฉ ุ ููู ูุฐุง ููุณ ุณูู ูุตู ุงูุนูู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููููู ุฑูู 3: ุจูุซูู + ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุณุทุญ ุงูููุชุจ </h3><br>  ูู ูู ูุฑุฉ ุ ุณูููู ุงูุชูููู ุงููุฏูู ูู ูุญุฏุฉ ุงูุชุญูู (ุญุชู ูู ูุงู ุณูุชู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู bash) ูุชุนุจูุง ููุบุงูุฉ ุ ูุฐูู ุญุงู ุงูููุช ูุจุฏุก ูุชุงุจุฉ ุฃุฏุงุฉ ูุณุงุนุฏุฉ ุตุบูุฑุฉ ุชุณุงุนุฏูุง ุนูู ูุฌู ุงูุชุญุฏูุฏ ูู ูุง ููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชูููู ุงูุชููุงุฆู </li><li style=";text-align:right;direction:rtl">  ุบูุฑ ูููุชู ุฏุงุฎู Tor ูู ุฃู ููุช </li><li style=";text-align:right;direction:rtl">  ูุฑุงูุจุฉ iptables ููุงุนุฏ ุงููุฒุงูุฉ ูุฅุนุงุฏุฉ ูุชุงุจุฉ ุฅุฐุง ุงูุชููุช </li><li style=";text-align:right;direction:rtl">  ุชุชุจุน ูููุชู ุงูุญุงููุฉ (IP) </li><li style=";text-align:right;direction:rtl">  ุฅุฎุทุงุฑ ุงูููุฑุชูู ุงูุณุงุจูุชูู ูุน ุงูุฅุฎุทุงุฑุงุช ุงูุฑุณูููุฉ </li></ol><br>  ูู ุงูุจุฏุงูุฉ ุ ุณุชููู ุงูุฃุฏุงุฉ ุจุชูุฒูู ุฌููุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููููุงุช ุงูุถุฑูุฑูุฉ</a> ุจููุฑุฏูุง ุ ูุนูุฏ ุงูุฅุทูุงู ุงููุงุญู ุณุชููู ุจุชูููู Tor ุจุงูุชุฒุงูู ูุน iptables ุ ููุง ูู ููุถุญ ุฃุนูุงู. <br><br>  ุฅุฐุง ููุช ุชุฑูุฏ ุชุบููุฑ ุนููุงู IP ุงูุฎุงุฑุฌู ุงูุฎุงุต ุจู ุ ูุณูู ุชุชูุงุนู ูุน ูููุฐ ุฎุฏูุฉ Tor - 9051 ุ ูุงูุฐู ูุงู ููุชูุญูุง ูู ุงูุจุฏุงูุฉ ูุฃุชูุชุฉ ุชุบููุฑ IP: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> Controller.from_port(port = <span class="hljs-number"><span class="hljs-number">9051</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> controller: controller.authenticate() controller.signal(Signal.NEWNYM)</code> </pre><br>  ูููู ุชุทุจูู ุชุชุจุน ุงููุฒุงูุฉ ุจุดูู ุบูุฑ ุนุงุฏู (ูููุฐูุง ุนูู ุงูุฑูุจุฉ) ูู ุฎูุงู ูุฑุงุกุฉ ุจููุฉ ูุงุนุฏุฉ iptables ุจุดูู ุฏูุฑู ูุงูุชุญูู ูู ูุฌููุน SHA256: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rulesOk</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> RULES_CHECKSUM_CMD = <span class="hljs-string"><span class="hljs-string">"{ iptables-save &amp;&amp; ip6tables-save; } | sed s/\-\-uid\-owner\\\\s[0-9]\\\\+\\\\s//g | grep -viE '^#' | grep -viE '^\:' | sort | uniq | sha256sum | cut -d' ' -f 1"</span></span> checkSum = getoutput(RULES_CHECKSUM_CMD).strip() alright = checkSum == Strings.RULES_CHECKSUM_CORRECT_HASH <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> alright: rules = getoutput(<span class="hljs-string"><span class="hljs-string">'iptables-save &amp;&amp; ip6tables-save'</span></span>) self.lastSnapshotFileName = <span class="hljs-string"><span class="hljs-string">"/tmp/broken-rules-%s.log"</span></span> % time.strftime(<span class="hljs-string"><span class="hljs-string">"%d-%m-%Y_%I-%M-%S"</span></span>) open(self.lastSnapshotFileName, <span class="hljs-string"><span class="hljs-string">"w"</span></span>).write(rules) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre><br>  ุฃูุถูุง ุ ุฅุฐุง ูุงู ููุงู ุชุถุงุฑุจ ูุน ุงููุฌููุน ุงูุงุฎุชุจุงุฑู ุงููุชููุน ุ ูููููู ุญูุธ ุชูุฑูุบ ููุงุนุฏ iptables ูู <code>/tmp/broken-rules-%d-%m-%Y_%I-%M-%S.log</code> ููุฒูุฏ ูู ุงูุฅุฌุฑุงุกุงุช.  ุฅุฐุง ุงุชุถุญ ุฐูู <pre style=";text-align:right;direction:rtl"> <code class="python hljs">rulesOk() == <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre>  ุณูุคุฏู ูุฐุง ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุฌุฏูู ููุงุนุฏ iptables. <br><br>  ุณุชุญุฏุซ ูุฑุงูุจุฉ ุนููุงู IP ุงูุญุงูู ุนู ุทุฑูู ุงููุตูู ุงููุณุชูุฑ ุฅูู ุจุนุถ ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ุงูุชู ุชููุฑ ุนููู IP - ุนูู ุณุจูู ุงููุซุงู ุ <code>ident.me</code> . <br><br>  ุญุณููุง ุ ุฃุฎูุฑูุง ุ ุณูุณุชุฎุฏู DE UI ููุฅุจูุงุบ ุนู ุงููุดููุงุช ุงููุชุนููุฉ ุจููุงุนุฏ IP ุฃู ุชุบููุฑูุง.  ุชุนุฏ ูู ุจูุฆุฉ ุฑุณูููุฉ ูุฑูุฏุฉ ูู ููุนูุง ุจุทุฑููุฉ ูุง ุ ุฎุงุตุฉู ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุงุณุชุฎุฏุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ุนูููุฉ ุงูุฎูู ุ ูููู ูู ูุนุธู ุฃูุธูุฉ Linux ุ ุณุชุนุฑุถ ุดูุฑุฉ bash ุงูุชู ุชุณูู ูู Python ุงูุฅุฎุทุงุฑุงุช ุจูุฌุงุญ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># root UI eval "export $(egrep -z DBUS_SESSION_BUS_ADDRESS /proc/$(pgrep -u $LOGNAME gnome-session)/environ)" export DISPLAY=:0 for USR in `ls /home &amp;&amp; echo root` do # ubuntu gnome + root UI export XAUTHORITY=/home/$USR/.Xauthority notify-send -u {0} '{1}' '{2}' # ubuntu parallels for UID in `ls /run/user/` do su $USR -c "DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/$UID/bus notify-send -u {0} '{1}' '{2}'" done done</span></span></code> </pre><br>  ูู ุฎูุงู ุฏูุฌ ูู ูุฐุง ูู ูุต ุจูุซูู ูู 200 ุณุทุฑ ุ ูุญุตู ุนูู ูุง ุญูููุงู.  ููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ููู ุณูุจุฏู ุงูุฅุดุนุงุฑ ุจุฃูู ูุฏ ุชู ุชุญุฏูุซ ูููุชูุง: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c34/9b1/900/c349b19003c9bb00c1e951e6a0b36668.png" alt="ุตูุฑุฉ"><br><br>  ููุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุณูุจุฏู ุจูุง ุงูุฅุดุนุงุฑ ุจุงูุชูุงู ููุงุนุฏ Iptables ููุง ูุดูุฑ ุฅูู ุชูุฑูุบ ุงูุชูุฑูุบ ุงูุฐู ูุญุชูู ุนูู ุงููุฎุงููุฉ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/556/3eb/a2f/5563eba2f4e2abc70ba83caaae1cffdd.png" alt="ุตูุฑุฉ"><br><br><h3 style=";text-align:right;direction:rtl">  ุงููููู ุฑูู 4: systemd </h3><br>  ูุฃุฎูุฑูุง ุ ููุฏ ุจุงูุชุฃููุฏ ุฅุฌุฑุงุก ุฅุนุฏุงุฏ ููุฑุฉ ูุงุญุฏุฉ ูุนุฏู ุงูุชูููุฑ ูู ุณูุงูุชูุง ูู ุงููุณุชูุจู ุ ูุจุงูุชุงูู ูุชู ุชุดุบูู ุงูุชุดุบูู ุงูุชููุงุฆู ูุงูุฎุฏูุงุช.  ูุฏู Linux ุงูุนุฏูุฏ ูู ุงููุธู ุงููุฑุนูุฉ ูุฅุฏุงุฑุฉ ุงูุจุฑูุงูุฌ ุงูุฎูู: systemd ุ ู sysV ุ ู init.  ูู ุญุงูุชูุง ุ ููุน ุงูุงุฎุชูุงุฑ ุนูู systemd ุจุณุจุจ ูุฑููุฉ ุชููููู. <br><br>  ูููุชุฑุถ ุฃู ุงูุจุฑูุงูุฌ ุงููุตู python ุงูููุชูุจ ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ ูุณูู "toroxy" ูููุน ูู <code>/usr/bin/</code> ุ ูุฅู ุงูุชุดุบูู ุงูุชููุงุฆู ูุงููุฑุงูุจุฉ ุงููุงุญูุฉ ูุน ูุฌูุฏ ูุฑููุฉ ูุนููุฉ ููุชุญูู ูู ุงูุจุฑูุงูุฌ ุงูุฎูู ุณุชููู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[Unit] Description=Toroxy After=network.target StartLimitIntervalSec=0 [Service] Type=simple Restart=always RestartSec=1 User=root # service toroxy start ExecStart=/usr/bin/toroxy service # service toroxy stop ExecStop=/usr/bin/toroxy stop # service toroxy reload ExecReload=/usr/bin/toroxy switch [Install] #   init 3,       UI     Tor WantedBy=multi-user.target</code> </pre><br>  ุชูุฑูุจุง ูู ุดูุก ุฌุงูุฒ ููุนูู "ุงูุตูุงุนู".  ุงูููุณุฉ ุงูุฃุฎูุฑุฉ ุงูุชู ุฃูุฏ ุฅุถุงูุชูุง ุฅูู ุงูุฃุฏุงุฉ ููุฒูุฏ ูู ุงูููุซูููุฉ ูู ุงูุชููุฆุฉ ุงูุชููุงุฆูุฉ ูููุงุนุฏ iptables ุนูุฏ ุจุฏุก ุชุดุบูู ุงููุธุงู (ููุง ุชุนูู ุ ุชุชู ุฅุนุงุฏุฉ ุชุนููู ููุงุนุฏ iptables ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู) ุจุงุณุชุฎุฏุงู iptables-persistent: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">iptables-save &gt; /etc/iptables/rules.v4 ip6tables-save &gt; /etc/iptables/rules.v6 netfilter-persistent start &amp;&amp; netfilter-persistent save</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h3><br>  ูุฐูู ูููุง ุจุชุฌููุน ุฃุฏุงุชูุง ุงูุฎุงุตุฉ ูู ูุฌููุนุฉ ูู ุงูููููุงุช ุงููุชููุนุฉ ุ ูุงูุชู ุชุชูุชุน ุจุฏุฑุฌุฉ ุนุงููุฉ ูู ุงูููุซูููุฉ ูู ุงููุฏุฑุฉ ุนูู ุชูููุฑ ูููุฉ ูุณุชูุฑุฉ ููุณุชุฎุฏู Linux ุนูู ุงูุดุจูุฉ.  ูู ุงูุฎุชุงู ุ ููุจุบู ุงูููู ุฃู ูู ูุง ุชู ูุตูู ูู ุงูููุงูุฉ ูุชู ุชูููุฐู ูุฃุฏุงุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Toroxy</a> ูุชููุฑุฉ ุนูู GitHub. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar472606/">https://habr.com/ru/post/ar472606/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar472596/index.html">ููู ุชุตูุน ููุฏูููุงุช ููุฃูุนุงุจ. ูุตุงุฆุญ ุนูููุฉ ูุฅุฑุดุงุฏุงุช ูููุฏุฉ</a></li>
<li><a href="../ar472598/index.html">ุฏููุงููุฉ ุงูุฌุงูุจ ุงูููุฌู</a></li>
<li><a href="../ar472600/index.html">ููุฏูุฉ ุฅูู ุจูุงุจุฉ</a></li>
<li><a href="../ar472602/index.html">ููู ูุง ุชุฎุฌู ูู ุงูุงุฌุชูุงุนุงุช ุ ุฃู ุงููุทูุฑ ูุนูู ุงููุทูุฑูู ุงูุชุญุฏุซ. ููุงุจูุฉ ูุน ุงููุณูุฏุฑ ุดูุดูููู</a></li>
<li><a href="../ar472604/index.html">ูุชุญ ูุฏูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช "ุงูุชุญูู ูู ุตุญุฉ Fluent ูุฃุฏุงุฉ ููุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช"</a></li>
<li><a href="../ar472610/index.html">ูุง ูู ุนูุงุตุฑ HTML ุงูุฃูุซุฑ ุทูุจูุง: ุชุญููู 8 ููุงููู ุตูุญุฉ ูู ููุธูุฑ SEO</a></li>
<li><a href="../ar472612/index.html">ูู ุฃุตุฏูุงุก ุฑุดูู ูุฅุฏุงุฑุฉ ุงููุนุฑูุฉุ</a></li>
<li><a href="../ar472614/index.html">ูุญุงููุงุช ููุจุฏุก ูู ุชุฏุฑูุณ ุงูุจุฑูุฌุฉ ุงููุฑุนูุฉ ุจุงุณุชุฎุฏุงู ุฅุตุฏุงุฑ ุฌูุจ Minecraft</a></li>
<li><a href="../ar472616/index.html">ููู ูุถุนูุง ูุฑูููุง ุฑุงุฆุนูุง ูู ูููุน ุจุนูุฏ ููู ููุฏู ุนููู ุฃุจุฏูุง</a></li>
<li><a href="../ar472620/index.html">ูุชุญู DataArt. ุงูุชูุชูุด ุนูู ูุญุทุฉ ุงูููุฏูู ููุฑุง CM 7209</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>