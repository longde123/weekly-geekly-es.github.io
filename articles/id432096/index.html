<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📴 🤰🏾 😣 Panduan Lengkap CMake. Bagian Dua: Membangun Sistem 👍🏻 🤱🏽 👩🏿‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendahuluan 


 Artikel ini membahas penggunaan sistem bangun CMake yang digunakan dalam sejumlah besar proyek C / C ++. Sangat disarankan agar Anda m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Panduan Lengkap CMake. Bagian Dua: Membangun Sistem</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432096/"><p><img src="https://habrastorage.org/webt/lf/se/70/lfse70sjifxiyddiuym73hdvcho.png"></p><br><h1 id="vvedenie">  Pendahuluan </h1><br><p>  Artikel ini membahas penggunaan sistem bangun CMake yang digunakan dalam sejumlah besar proyek C / C ++.  Sangat disarankan agar Anda membaca bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertama</a> manual ini untuk menghindari kesalahpahaman pada sintaksis bahasa CMake, yang secara eksplisit muncul di seluruh artikel. </p><a name="habracut"></a><br><h1 id="zapusk-cmake">  Peluncuran CMake </h1><br><p>  Berikut ini adalah contoh penggunaan bahasa CMake yang harus Anda praktikkan.  Eksperimen dengan kode sumber dengan memodifikasi perintah yang ada dan menambahkan yang baru.  Untuk menjalankan contoh-contoh ini, instal CMake dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web resmi</a> . </p><br><h1 id="princip-raboty">  Prinsip kerja </h1><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sistem build CMake</a> adalah pembungkus di atas utilitas yang bergantung pada platform lainnya (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ninja</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Make</a> ).  Jadi, dalam proses perakitan itu sendiri, tidak peduli seberapa paradoksal ini terdengar, itu tidak langsung berpartisipasi. </p><br><p> Sistem build CMake menerima file <code>CMakeLists.txt</code> dengan deskripsi aturan build dalam bahasa formal CMake, dan kemudian menghasilkan file build intermediate dan asli dalam direktori yang sama yang diterima pada platform Anda. </p><br><p>  File-file yang dihasilkan akan berisi nama-nama spesifik dari utilitas sistem, direktori dan kompiler, sementara perintah CMake hanya menggunakan konsep abstrak dari kompiler dan tidak terikat pada alat yang bergantung pada platform yang sangat berbeda pada sistem operasi yang berbeda. </p><br><h1 id="proverka-versii-cmake">  Memeriksa Versi CMake </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>cmake_minimum_required</code></a> memeriksa versi CMake yang sedang berjalan: jika lebih kecil dari minimum yang ditentukan, maka CMake berakhir dengan kesalahan fatal.  Contoh yang menunjukkan penggunaan khas dari perintah ini di awal file CMake: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#     CMake: cmake_minimum_required(VERSION 3.0)</span></span></code> </pre> <br><p>  Seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disebutkan</a> dalam komentar, perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>cmake_minimum_required</code></a> menetapkan semua flag kompatibilitas (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>cmake_policy</code></a> ).  Beberapa pengembang sengaja mengatur CMake versi rendah, dan kemudian menyesuaikan fungsionalitas secara manual.  Ini memungkinkan Anda untuk secara bersamaan mendukung versi kuno CMake dan di beberapa tempat memanfaatkan fitur baru. </p><br><h1 id="oformlenie-proekta">  Desain proyek </h1><br><p>  Pada awal <code>CMakeLists.txt</code> harus menentukan karakteristik proyek dengan tim proyek untuk desain yang lebih baik dengan lingkungan terintegrasi dan alat pengembangan lainnya. </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    "MyProject": project(MyProject VERSION 1.2.3.4 LANGUAGES C CXX)</span></span></code> </pre> <br><p>  Perlu dicatat bahwa jika kata kunci <code>LANGUAGES</code> dihilangkan, maka bahasa defaultnya adalah <code>C CXX</code> .  Anda juga dapat menonaktifkan indikasi bahasa apa pun dengan menulis kata kunci <code>NONE</code> sebagai daftar bahasa atau hanya meninggalkan daftar kosong. </p><br><h1 id="zapusk-skriptovyh-faylov">  Menjalankan file skrip </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>include</code></a> menggantikan baris panggilannya dengan kode file yang ditentukan, bertindak serupa dengan perintah C / C ++ preprocessor <code>include</code> .  Contoh ini menjalankan file skrip <code>MyCMakeScript.cmake</code> perintah yang dijelaskan: </p><br><pre> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">message</span></span>(<span class="hljs-string"><span class="hljs-string">"'TEST_VARIABLE' is equal to [${TEST_VARIABLE}]"</span></span>) <span class="hljs-comment"><span class="hljs-comment">#   `MyCMakeScript.cmake`  : include(MyCMakeScript.cmake) message("'TEST_VARIABLE' is equal to [${TEST_VARIABLE}]")</span></span></code> </pre> <br><p>  Dalam contoh ini, pesan pertama akan memberi tahu bahwa variabel <code>TEST_VARIABLE</code> belum didefinisikan, namun, jika skrip <code>MyCMakeScript.cmake</code> variabel ini, pesan kedua akan menginformasikan tentang nilai baru dari variabel uji.  Dengan demikian, file skrip yang dimasukkan oleh perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>include</code></a> tidak membuat cakupannya sendiri, yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disebutkan</a> dalam komentar di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya</a> . </p><br><h1 id="kompilyaciya-ispolnyaemyh-faylov">  Kompilasi file yang dapat dieksekusi </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_executable</code></a> mengkompilasi file yang dapat dieksekusi dengan nama yang diberikan dari daftar sumber.  Penting untuk dicatat bahwa nama file akhir tergantung pada platform target (misalnya, <code>&lt;ExecutableName&gt;.exe</code> atau hanya <code>&lt;ExecutableName&gt;</code> ).  Contoh khas dari pemanggilan perintah ini: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    "MyExecutable"  #  "ObjectHandler.c", "TimeManager.c"  "MessageGenerator.c": add_executable(MyExecutable ObjectHandler.c TimeManager.c MessageGenerator.c)</span></span></code> </pre> <br><h1 id="kompilyaciya-bibliotek">  Kompilasi perpustakaan </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_library</code></a> mengkompilasi perpustakaan dengan tampilan dan nama yang ditentukan dari sumber.  Penting untuk dicatat bahwa nama pustaka akhir tergantung pada platform target (misalnya, <code>lib&lt;LibraryName&gt;.a</code> atau <code>&lt;LibraryName&gt;.lib</code> ).  Contoh khas dari pemanggilan perintah ini: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    "MyLibrary"  #  "ObjectHandler.c", "TimeManager.c"  "MessageConsumer.c": add_library(MyLibrary STATIC ObjectHandler.c TimeManager.c MessageConsumer.c)</span></span></code> </pre> <br><ul><li>  Pustaka statis didefinisikan oleh kata kunci <code>STATIC</code> sebagai argumen kedua dan merupakan arsip file objek yang terkait dengan file yang dapat dieksekusi dan pustaka lainnya pada waktu kompilasi; </li><li>  Pustaka dinamis ditentukan oleh kata kunci <code>SHARED</code> sebagai argumen kedua dan pustaka biner yang dimuat oleh sistem operasi selama eksekusi program; </li><li>  Perpustakaan modular didefinisikan oleh kata kunci <code>MODULE</code> sebagai argumen kedua dan perpustakaan biner dimuat menggunakan teknik eksekusi oleh executable itu sendiri; </li><li>  Pustaka objek didefinisikan oleh kata kunci <code>OBJECT</code> sebagai argumen kedua dan merupakan kumpulan file objek yang terkait dengan file yang dapat dieksekusi dan pustaka lainnya pada waktu kompilasi. </li></ul><br><h1 id="dobavlenie-ishodnikov-k-celi">  Menambahkan sumber ke sasaran </h1><br><p>  Ada beberapa kasus yang membutuhkan beberapa tambahan file sumber ke target.  Untuk melakukan ini, perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_sources</code></a> , yang dapat menambahkan sumber ke target berkali-kali. </p><br><p>  Argumen pertama ke perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_sources</code></a> adalah nama target yang sebelumnya ditentukan menggunakan perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_library</code></a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_executable</code></a> , dan argumen berikutnya adalah daftar file sumber yang akan ditambahkan. </p><br><p>  Panggilan berulang ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_sources</code></a> menambahkan file sumber ke target sesuai urutan pemanggilannya, sehingga dua blok kode terbawah secara fungsional setara: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    "MyExecutable"   # "ObjectPrinter.c"  "SystemEvaluator.c": add_executable(MyExecutable ObjectPrinter.c SystemEvaluator.c) #    "MyExecutable"  "MessageConsumer.c": target_sources(MyExecutable MessageConsumer.c) #    "MyExecutable"  "ResultHandler.c": target_sources(MyExecutable ResultHandler.c)</span></span></code> </pre> <br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    "MyExecutable"   # "ObjectPrinter.c", "SystemEvaluator.c", "MessageConsumer.c"  "ResultHandler.c": add_executable(MyExecutable ObjectPrinter.c SystemEvaluator.c MessageConsumer.c ResultHandler.c)</span></span></code> </pre> <br><h1 id="generiruemye-fayly">  File yang dihasilkan </h1><br><p>  Lokasi file output yang dihasilkan oleh perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_executable</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_library</code></a> hanya ditentukan pada tahap pembuatan, namun, aturan ini dapat diubah dengan beberapa variabel yang menentukan lokasi akhir file biner: </p><br><ul><li>  Variabel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>RUNTIME_OUTPUT_DIRECTORY</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>RUNTIME_OUTPUT_NAME</code></a> menentukan lokasi target eksekusi; </li><li>  Variabel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>LIBRARY_OUTPUT_DIRECTORY</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>LIBRARY_OUTPUT_NAME</code></a> menentukan lokasi perpustakaan; </li><li>  Variabel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>ARCHIVE_OUTPUT_DIRECTORY</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>ARCHIVE_OUTPUT_NAME</code></a> menentukan lokasi arsip. </li></ul><br><p>  File yang dapat dieksekusi selalu dianggap sebagai tujuan eksekusi, perpustakaan statis dianggap sebagai tujuan arsip, dan perpustakaan modular dianggap sebagai tujuan perpustakaan.  Untuk platform "non-DLL", perpustakaan dinamis dianggap sebagai target perpustakaan, dan untuk "platform DLL", tujuan eksekusi.  Variabel semacam itu tidak disediakan untuk pustaka objek, karena pustaka semacam ini dihasilkan di dalam direktori <code>CMakeFiles</code> . </p><br><p>  Penting untuk dicatat bahwa semua platform berbasis Windows, termasuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cygwin,</a> dianggap sebagai "platform DLL". </p><br><h1 id="komponovka-s-bibliotekami">  Tata letak perpustakaan </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_link_libraries</code></a> perpustakaan atau dieksekusi dengan perpustakaan lain yang disediakan.  Argumen pertama untuk perintah ini adalah nama target yang dihasilkan oleh perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_executable</code></a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_library</code></a> , dan argumen selanjutnya adalah nama target pustaka atau jalur lengkap ke pustaka.  Contoh: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    "MyExecutable"  #  "JsonParser", "SocketFactory"  "BrowserInvoker": target_link_libraries(MyExecutable JsonParser SocketFactory BrowserInvoker)</span></span></code> </pre> <br><p>  Perlu dicatat bahwa pustaka modular tidak dapat ditautkan dengan file yang dapat dieksekusi atau pustaka lain, karena pustaka tersebut dimaksudkan hanya untuk memuat dengan teknik eksekusi. </p><br><h1 id="rabota-s-celyami">  Bekerja dengan sasaran </h1><br><p>  Seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disebutkan</a> dalam komentar, target dalam CMake juga tunduk pada manipulasi manual, namun sangat terbatas. </p><br><p>  Dimungkinkan untuk mengontrol sifat-sifat target yang dirancang untuk mengatur proses perakitan proyek.  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>get_target_property</code></a> nilai properti target ke variabel yang disediakan.  Contoh ini menampilkan nilai properti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>C_STANDARD</code></a> dari target <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>C_STANDARD</code></a> di layar: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#   "VALUE"   "C_STANDARD": get_target_property(VALUE MyTarget C_STANDARD) #      : message("'C_STANDARD' property is equal to [${VALUE}]")</span></span></code> </pre> <br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>set_target_properties</code></a> menetapkan properti target yang ditentukan ke nilai yang ditentukan.  Perintah ini menerima daftar sasaran untuk nilai properti yang akan ditetapkan, dan kemudian kata kunci <code>PROPERTIES</code> , diikuti oleh daftar formulir <code>&lt; &gt; &lt; &gt;</code> : </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#   'C_STANDARD'  "11", #   'C_STANDARD_REQUIRED'  "ON": set_target_properties(MyTarget PROPERTIES C_STANDARD 11 C_STANDARD_REQUIRED ON)</span></span></code> </pre> <br><p>  Contoh di atas mengatur properti target <code>MyTarget</code> yang mempengaruhi proses kompilasi, yaitu: ketika mengkompilasi target <code>MyTarget</code> CMake akan <code>MyTarget</code> kompiler untuk menggunakan standar C11.  Semua penamaan properti target yang dikenal tercantum di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman ini</a> . </p><br><p>  Dimungkinkan juga untuk memverifikasi target yang ditentukan sebelumnya menggunakan <code>if(TARGET &lt;TargetName&gt;)</code> konstruksi: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#  "The target was defined!"   "MyTarget"  , #    "The target was not defined!": if(TARGET MyTarget) message("The target was defined!") else() message("The target was not defined!") endif()</span></span></code> </pre> <br><h1 id="dobavlenie-podproektov">  Menambahkan Subproyek </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_subdirectory</code></a> meminta CMake untuk segera memproses file subproyek yang ditentukan.  Contoh di bawah ini menunjukkan penerapan mekanisme yang dijelaskan: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#   "subLibrary"    , #       "subLibrary/build": add_subdirectory(subLibrary subLibrary/build)</span></span></code> </pre> <br><p>  Dalam contoh ini, argumen pertama ke perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_subdirectory</code></a> adalah subproyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_subdirectory</code></a> , dan argumen kedua adalah opsional dan menginformasikan CMake tentang folder yang ditujukan untuk file yang dihasilkan dari subproyek yang disertakan (misalnya, <code>CMakeCache.txt</code> dan <code>cmake_install.cmake</code> ). </p><br><p>  Perlu dicatat bahwa semua variabel dari lingkup induk diwarisi oleh direktori yang ditambahkan, dan semua variabel yang didefinisikan dan didefinisikan ulang dalam direktori ini hanya akan terlihat olehnya (jika kata kunci <code>PARENT_SCOPE</code> tidak ditentukan oleh argumen perintah yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>set</code></a> ).  Fitur ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disebutkan</a> dalam komentar di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya</a> . </p><br><h1 id="poisk-paketov">  Pencarian Paket </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>find_package</code></a> menemukan dan memuat pengaturan proyek eksternal.  Dalam kebanyakan kasus, ini digunakan untuk menghubungkan perpustakaan eksternal berikutnya seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Boost</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GSL</a> .  Contoh ini memanggil perintah yang dijelaskan untuk mencari perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GSL</a> dan kemudian menautkan: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#     "GSL": find_package(GSL 2.5 REQUIRED) #      "GSL": target_link_libraries(MyExecutable GSL::gsl) #      "GSL": target_include_directories(MyExecutable ${GSL_INCLUDE_DIRS})</span></span></code> </pre> <br><p>  Dalam contoh di atas, perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>find_package</code></a> menerima nama paket sebagai argumen pertama, dan kemudian versi yang diperlukan.  Opsi <code>REQUIRED</code> membutuhkan pencetakan kesalahan fatal dan mengakhiri CMake jika paket yang diperlukan tidak ditemukan.  Yang sebaliknya adalah opsi <code>QUIET</code> , membutuhkan CMake untuk melanjutkan pekerjaannya, bahkan jika paket itu tidak ditemukan. </p><br><p>  Selanjutnya, <code>MyExecutable</code> ditautkan ke perpustakaan GSL dengan perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_link_libraries</code></a> menggunakan variabel <code>GSL::gsl</code> , yang merangkum lokasi GSL yang sudah dikompilasi. </p><br><p>  Pada akhirnya, perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_include_directories</code></a> , memberi tahu kompiler tentang lokasi file header perpustakaan GSL.  Harap perhatikan bahwa variabel <code>GSL_INCLUDE_DIRS</code> digunakan untuk <code>GSL_INCLUDE_DIRS</code> lokasi header yang saya jelaskan (ini adalah contoh pengaturan paket yang diimpor). </p><br><p>  Anda mungkin ingin memeriksa hasil pencarian paket jika Anda menentukan opsi <code>QUIET</code> .  Ini dapat dilakukan dengan memeriksa <code>&lt;PackageName&gt;_FOUND</code> , yang secara otomatis ditentukan setelah perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>find_package</code></a> .  Misalnya, jika Anda berhasil mengimpor pengaturan GSL ke proyek Anda, variabel <code>GSL_FOUND</code> akan menjadi benar. </p><br><p>  Secara umum, perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>find_package</code></a> memiliki dua rasa peluncuran: modular dan konfigurasi.  Contoh di atas menerapkan bentuk modular.  Ini berarti bahwa ketika perintah dipanggil, CMake mencari file skrip dari form <code>Find&lt;PackageName&gt;.cmake</code> dalam direktori <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>CMAKE_MODULE_PATH</code></a> , dan kemudian meluncurkannya dan mengimpor semua pengaturan yang diperlukan (dalam hal ini, CMake meluncurkan file <code>FindGSL.cmake</code> standar). </p><br><h1 id="sposoby-vklyucheniya-zagolovkov">  Cara memasukkan header </h1><br><p>  Anda dapat memberi tahu kompilator tentang lokasi header yang disertakan dengan menggunakan dua perintah: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>include_directories</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_include_directories</code></a> .  Anda memutuskan mana yang akan digunakan, namun ada baiknya mempertimbangkan beberapa perbedaan di antara mereka (ide tersebut disarankan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komentar</a> ). </p><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>include_directories</code></a> memengaruhi cakupan direktori.  Ini berarti bahwa semua direktori header yang ditentukan oleh perintah ini akan digunakan untuk semua tujuan <code>CMakeLists.txt</code> saat ini, serta untuk subproyek yang diproses (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_subdirectory</code></a> ). </p><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_include_directories</code></a> memengaruhi target yang ditentukan oleh argumen pertama, dan tidak memengaruhi target lain.  Contoh di bawah ini menunjukkan perbedaan antara dua perintah: </p><br><pre> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">add_executable</span></span>(RequestGenerator RequestGenerator.c) <span class="hljs-keyword"><span class="hljs-keyword">add_executable</span></span>(ResponseGenerator ResponseGenerator.c) <span class="hljs-comment"><span class="hljs-comment">#     "RequestGenerator": target_include_directories(RequestGenerator headers/specific) #    "RequestGenerator"  "ResponseGenerator": include_directories(headers)</span></span></code> </pre> <br><p>  Dalam komentar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disebutkan</a> bahwa dalam proyek modern penggunaan perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>include_directories</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>link_libraries</code></a> tidak diinginkan.  Alternatifnya adalah perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_include_directories</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>target_link_libraries</code></a> yang hanya bertindak pada tujuan tertentu, dan bukan pada seluruh cakupan saat ini. </p><br><h1 id="ustanovka-proekta">  Instalasi Proyek </h1><br><p>  Perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>install</code></a> menghasilkan aturan instalasi untuk proyek Anda.  Perintah ini mampu bekerja dengan sasaran, file, folder, dan lainnya.  Pertama, pertimbangkan untuk menetapkan tujuan. </p><br><p>  Untuk menetapkan tujuan, Anda harus meneruskan kata kunci <code>TARGETS</code> sebagai argumen pertama dari fungsi yang dijelaskan, diikuti oleh daftar tujuan yang akan ditetapkan, dan kemudian kata kunci <code>DESTINATION</code> dengan lokasi direktori di mana tujuan yang ditentukan akan ditetapkan.  Contoh ini menunjukkan pengaturan sasaran yang khas: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#   "TimePrinter"  "DataScanner"   "bin": install(TARGETS TimePrinter DataScanner DESTINATION bin)</span></span></code> </pre> <br><p>  Proses untuk menggambarkan instalasi file serupa, kecuali bahwa <code>TARGETS</code> harus menentukan <code>FILES</code> daripada kata kunci <code>TARGETS</code> .  Contoh yang menunjukkan pemasangan file: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#   "DataCache.txt"  "MessageLog.txt"   "~/": install(FILES DataCache.txt MessageLog.txt DESTINATION ~/)</span></span></code> </pre> <br><p>  Proses untuk menggambarkan pemasangan folder serupa, kecuali Anda harus menentukan <code>DIRECTORY</code> alih-alih kata kunci <code>FILES</code> .  Penting untuk dicatat bahwa selama instalasi seluruh isi folder akan disalin, dan bukan hanya namanya.  Contoh menginstal folder adalah sebagai berikut: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#   "MessageCollection"  "CoreFiles"   "~/": install(DIRECTORY MessageCollection CoreFiles DESTINATION ~/)</span></span></code> </pre> <br><p>  Setelah menyelesaikan pemrosesan CMake dari semua file Anda, Anda dapat menginstal semua objek yang dijelaskan dengan <code>sudo checkinstall</code> (jika CMake menghasilkan <code>Makefile</code> ), atau Anda dapat melakukan tindakan ini dengan lingkungan pengembangan terintegrasi yang mendukung CMake. </p><br><h1 id="naglyadnyy-primer-proekta">  Contoh visual proyek </h1><br><p>  Panduan ini tidak akan lengkap tanpa menunjukkan contoh nyata menggunakan sistem bangun CMake.  Pertimbangkan diagram proyek sederhana menggunakan CMake sebagai satu-satunya sistem build: </p><br><pre> <code class="plaintext hljs">+ MyProject - CMakeLists.txt - Defines.h - StartProgram.c + core - CMakeLists.txt - Core.h - ProcessInvoker.c - SystemManager.c</code> </pre> <br><p>  File assembly utama <code>CMakeLists.txt</code> menjelaskan kompilasi seluruh program: pertama, perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_executable</code></a> untuk mengkompilasi file yang dapat dieksekusi, kemudian perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>add_subdirectory</code></a> , yang merangsang pemrosesan subproyek, dan akhirnya, file yang dapat dieksekusi dihubungkan ke perpustakaan yang dikompilasi: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    CMake: cmake_minimum_required(VERSION 3.0) #   : project(MyProgram VERSION 1.0.0 LANGUAGES C) #      "MyProgram": add_executable(MyProgram StartProgram.c) #    "core/CMakeFiles.txt": add_subdirectory(core) #    "MyProgram"  #    "MyProgramCore": target_link_libraries(MyProgram MyProgramCore) #    "MyProgram"   "bin": install(TARGETS MyProgram DESTINATION bin)</span></span></code> </pre> <br><p>  File <code>core/CMakeLists.txt</code> dipanggil oleh file assembly utama dan mengkompilasi pustaka statis <code>MyProgramCore</code> dimaksudkan untuk menghubungkan dengan file yang dapat dieksekusi: </p><br><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#    CMake: cmake_minimum_required(VERSION 3.0) #      "MyProgramCore": add_library(MyProgramCore STATIC ProcessInvoker.c SystemManager.c)</span></span></code> </pre> <br><p>  Setelah serangkaian perintah <code>cmake . &amp;&amp; make &amp;&amp; sudo checkinstall</code>  <code>cmake . &amp;&amp; make &amp;&amp; sudo checkinstall</code> sistem build CMake selesai dengan sukses.  Perintah pertama mulai memproses file <code>CMakeLists.txt</code> di direktori root proyek, perintah kedua akhirnya mengkompilasi file biner yang diperlukan, dan perintah ketiga menginstal <code>MyProgram</code> dikompilasi yang <code>MyProgram</code> ke dalam sistem. </p><br><h1 id="zaklyuchenie">  Kesimpulan </h1><br><p>  Sekarang Anda dapat menulis sendiri dan memahami file CMake orang lain, dan Anda dapat membaca secara detail tentang mekanisme lain di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web resmi</a> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel selanjutnya dalam</a> panduan ini akan fokus pada pengujian dan pembuatan paket menggunakan CMake dan akan dirilis dalam seminggu.  Sampai ketemu lagi! <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id432096/">https://habr.com/ru/post/id432096/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id432086/index.html">Pencetakan 3D di sekolah internasional dinamai M.V. Lomonosov</a></li>
<li><a href="../id432088/index.html">Ketersediaan Tinggi MySQL di GitHub</a></li>
<li><a href="../id432090/index.html">Magento Meetup Kharkiv No. 4 - laporan video</a></li>
<li><a href="../id432092/index.html">Kesalahan tidak menyenangkan saat menulis unit test</a></li>
<li><a href="../id432094/index.html">Hackathon online gabungan dari OpenGift dan Credits Blockchain Platform</a></li>
<li><a href="../id432098/index.html">Autopilots dalam transportasi jalan, bagaimana berinteraksi dengan spesial. dengan transportasi?</a></li>
<li><a href="../id432100/index.html">Bagaimana Kami Meningkatkan Konversi Penagihan</a></li>
<li><a href="../id432102/index.html">Fitur JavaScript Eksplisit</a></li>
<li><a href="../id432104/index.html">Digest Event IT Desember (Bagian Satu)</a></li>
<li><a href="../id432106/index.html">Intisari Desain Makanan, November 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>