<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë≤üèº üí™üèæ ü•û An√°lise como um recurso: o processo de trabalhar com dados no Plesk ü§ú üíæ üì™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal, escrevemos recentemente sobre como aprendemos a ser orientados por dados com o GoPractice Simulator! Nesta edi√ß√£o, continuaremos o t√≥pico...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>An√°lise como um recurso: o processo de trabalhar com dados no Plesk</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plesk/blog/460395/">  Ol√° pessoal, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">escrevemos</a> recentemente sobre como aprendemos a ser orientados por dados com o GoPractice Simulator!  Nesta edi√ß√£o, continuaremos o t√≥pico de an√°lise de dados e falaremos sobre a cria√ß√£o do processo de trabalho com an√°lises na equipe Plesk. <br><br>  O Plesk √© um produto complexo com um hist√≥rico de 20 anos e nem sempre conseguimos coletar efetivamente as estat√≠sticas necess√°rias.  Durante muito tempo, analisamos os dados apenas em retrospecto e as decis√µes foram tomadas com base em sensa√ß√µes subjetivas "como deveriam ser".  No passado, j√° t√≠nhamos as tristes conseq√º√™ncias dessa abordagem - em 2012, alteramos o design, querendo fazer o melhor, mas recebemos uma onda de feedback negativo, recusando-nos a atualizar para a vers√£o mais recente do produto e a sa√≠da de clientes. <br><br>  Tendo compreendido essa triste experi√™ncia, tiramos conclus√µes e decidimos avan√ßar para o estabelecimento de uma empresa orientada a dados.  Dessa maneira, dificuldades de natureza diferente nos aguardavam.  Em larga escala, eles podem ser divididos em dois grupos principais - sistema e processo, e neste artigo vou focar na tarefa de criar o processo de trabalhar com an√°lises. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bm/hy/gv/bmhygviq89asbliamb-ot77srio.png" alt="imagem"></div><br><a name="habracut"></a>  Os problemas sist√™micos associados √†s especificidades do produto embalado merecem um artigo separado; portanto, n√£o vou me debru√ßar sobre eles aqui em detalhes, apenas listarei os mais significativos. <br><br><ol><li>  Muitos eventos, altos volumes de uso.  Se falarmos apenas sobre o rastreamento das a√ß√µes do usu√°rio no painel, de acordo com nossos c√°lculos, s√£o 60 milh√µes de eventos por m√™s e √© uma pena dar US $ 150 mil para o Google Analytics avan√ßado.  Outra dificuldade √© que, para trabalhar com o GA, voc√™ precisa lidar explicitamente com cada a√ß√£o personalizada, mas desejamos obter um mecanismo unificado que n√£o exija a marca√ß√£o manual de eventos ou a√ß√µes para cada novo recurso. </li><li>  Devido ao volume e formato da caixa (a implementa√ß√£o de qualquer altera√ß√£o leva tempo), a an√°lise n√£o pode ser executada em tempo real.  Os usu√°rios est√£o sentados em 8 vers√µes diferentes do produto, com 4 delas j√° com EOL.  Mesmo nas vers√µes mais recentes, apenas 60% dos usu√°rios sofrem novas altera√ß√µes nas duas primeiras semanas ap√≥s o lan√ßamento. <br></li><li>  Produto complexo.  O Plesk suporta 14 sistemas operacionais da fam√≠lia Linux, 4 OC Windows, um componente de 150 terceiros, v√°rios servidores web, servidores de email, clientes de webmail, visualizadores de estat√≠sticas, solu√ß√µes antiv√≠rus, etc.  Um grande n√∫mero de configura√ß√µes poss√≠veis afeta principalmente a complexidade e o volume dos testes e torna quase imposs√≠vel o uso de testes A / B. <br></li><li>  Espec√≠ficos do B2B2C.  O tomador de decis√£o nem sempre √© igual ao "usu√°rio real do painel". <br></li><li>  GDPR - a necessidade de cumprir a letra da lei exige esfor√ßos adicionais para anonimizar os dados e complica as tarefas de segmenta√ß√£o do usu√°rio, al√©m de nos privar da capacidade de entrar em contato com os clientes com facilidade e rapidez usando suas informa√ß√µes de contato. <br></li></ol><br>  Falaremos sobre dores de processo em mais detalhes.  At√© recentemente, o processo de coleta de an√°lises conosco era completamente separado do processo de desenvolvimento - lembr√°vamos do rastreamento e das m√©tricas no final, estragamos uma solu√ß√£o √∫nica e assim por diante at√© o pr√≥ximo recurso.  Al√©m disso, ao longo dos anos, o Plesk acumulou v√°rias fontes de dados - o que implicou os custos de manuten√ß√£o da consist√™ncia, relev√¢ncia dos dados, a necessidade de ter em mente de onde eles v√™m, sob quais condi√ß√µes eles chegam ao banco de dados e por que as mesmas m√©tricas em locais diferentes diferem (por exemplo, o n√∫mero de chaves de licen√ßa e instala√ß√µes f√≠sicas).  Muitas informa√ß√µes foram gravadas nessas fontes (cortes mensais de um banco de dados de 270 mil chaves e relat√≥rios chegando duas vezes mais que 300 mil servidores), mas apenas algumas pessoas conseguiram trabalhar com esses dados e encontraram tempo.  Eu vim para o Plesk em 2015 e minhas primeiras tarefas foram apenas obter estat√≠sticas heterog√™neas do cubo OLAP e do banco de dados MongoDB.  'Como fazer' para esse banco de dados era uma p√°gina com um nome de usu√°rio e senha do host e um arquivo de texto com um script js da √∫ltima solicita√ß√£o popular. <br><br>  Um monte de fontes significava um monte de ferramentas e servi√ßos, cada um dos quais todo gerente de programa deveria poder usar.  A sensa√ß√£o nos primeiros dias de trabalho era algo assim: <br><br><img src="https://habrastorage.org/webt/53/li/f6/53lif6ghk7jsvfubclw_soksx0y.png"><br><br>  O que fizemos? <br><br>  A solu√ß√£o foi a seguinte: h√° cerca de um ano e meio, iniciamos uma revis√£o completa do processo de coleta de dados - agora desenvolvemos an√°lises da mesma maneira que o pr√≥prio recurso, em cada est√°gio de toda a equipe (equipe de recursos) envolvida, desde PM e desenvolvimento at√© engenheiro de controle de qualidade. <br><br><img src="https://habrastorage.org/webt/lc/ww/m2/lcwwm2vzr5iel3lt_tmabxlawlm.png"><br><br><h3>  Hip√≥tese </h3><br>  Tudo come√ßa no est√°gio de planejamento de recursos: o PM formula uma hip√≥tese com base na qual a m√©trica ser√° selecionada na pr√≥xima etapa.  Por exemplo: O Plesk possui um sistema de recomenda√ß√£o do Advisor que ajuda o usu√°rio a melhorar o estado do servidor seguindo as etapas propostas (adicione um certificado ssl, habilite atualiza√ß√µes, atualize a vers√£o do PHP etc.).  Ao liberar o Advisor, assumimos que o usu√°rio seguir√° as recomenda√ß√µes, a classifica√ß√£o de "sa√∫de" do servidor aumentar√° e, gra√ßas a "conquistas" gamificadas, o usu√°rio estar√° envolvido na intera√ß√£o com o Advisor continuamente. <br><br><img src="https://habrastorage.org/webt/ka/hi/up/kahiuprrqynfopnw1btka65e2b4.png" alt="imagem"><br><br><h3>  M√©trica </h3><br>  Na pr√≥xima etapa, uma m√©trica √© selecionada para cada hip√≥tese: para o Advisor, esse √© o n√∫mero de cliques nas recomenda√ß√µes, a porcentagem de sites protegidos por certificados, pontua√ß√£o de classifica√ß√£o etc.  Toda essa informa√ß√£o (hip√≥tese + m√©trica) √© inserida no documento Vis√£o - com os requisitos para os recursos.  Nesse ponto, os analistas de dados est√£o envolvidos no processo - sua tarefa √© ajudar a tornar a m√©trica mensur√°vel, f√°cil de coletar e inequ√≠voca.  Mesmo detalhes como a estrutura do campo futuro no banco de dados ou no relat√≥rio s√£o importantes - como o gerente respons√°vel pelo recurso geralmente acessa essas informa√ß√µes, √© do seu interesse determinar como √© mais conveniente fazer isso, at√© a estrutura desejada da solicita√ß√£o do banco de dados.  Gra√ßas a essa abordagem, a prop√≥sito, ficou mais f√°cil para todos, no sentido de que a necessidade de subir para 100.500 fontes diminuiu significativamente - agora voc√™ decide em qual formato os dados ser√£o coletados e como prefere obt√™-los.  Ao fixar a l√≥gica da contagem em uma exibi√ß√£o, o MP tamb√©m tem a oportunidade de retornar ao documento a qualquer momento e recordar por quais crit√©rios o banco de dados entra / aumenta o contador / o fato de enviar, etc.  Isso resolve o problema de entender a l√≥gica dos relat√≥rios. <br><br><h3>  Implementa√ß√£o </h3><br>  Quando uma hip√≥tese √© formulada e uma m√©trica √© selecionada, √© a vez da implementa√ß√£o.  Os desenvolvedores implementam ao mesmo tempo o pr√≥prio recurso e o mecanismo para coletar suas estat√≠sticas.  Como j√° mencionado, o uso de solu√ß√µes prontas como o GA √© dif√≠cil para n√≥s por v√°rias raz√µes; portanto, h√° dois anos, nossos engenheiros implementaram seu pr√≥prio mecanismo para rastrear as a√ß√µes dos usu√°rios no painel.  Al√©m das a√ß√µes do usu√°rio, v√°rios detalhes t√©cnicos, defini√ß√µes de configura√ß√£o etc. tamb√©m podem ser interessantes.  - tudo isso √© enviado ao banco de dados MongoDB j√° mencionado. <br><br><h3>  Testes e visualiza√ß√µes </h3><br>  Como qualquer produto, o mecanismo de coleta de dados deve ser testado - no nosso caso, o engenheiro de controle de qualidade verifica se as recomenda√ß√µes s√£o mostradas e abertas, a classifica√ß√£o √© monitorada e as informa√ß√µes sobre todos esses eventos s√£o coletadas no banco de dados.  Freq√ºentemente, os casos de uso selecionados para rastreamento e an√°lise tornam-se novos casos de teste para testar a funcionalidade do pr√≥prio recurso. <br><br>  Depois que o engenheiro de controle de qualidade verificou todos os cen√°rios, o gerente de recursos humanos juntamente com o desenvolvedor analisou os primeiros dados e certificou-se de que o recurso 1) n√£o quebrasse nada e 2) funcionasse conforme o esperado, e as estat√≠sticas coletassem o que lhe interessa - tudo est√° pronto para lan√ßamento lan√ßamento. <br><br><h3>  Vida √∫til </h3><br>  Quando um recurso √© lan√ßado em um release, a parte mais interessante come√ßa - sua "vida" no produto.  N√£o √© mais necess√°rio: ‚Äúvoc√™ sabe qual campo do nosso banco de dados armazena informa√ß√µes sobre a exibi√ß√£o de recomenda√ß√µes?  n√£o?  blin ... ".  O analista de dados n√£o recebe mensagens com folga: "voc√™ pode contar novamente quantas impress√µes h√° na vers√£o mais recente?"  - para isso, existem gr√°ficos em pain√©is com alertas configurados que enviam cartas se o valor monitorado caiu acentuadamente / aumentou / mudou / nenhum registro foi encontrado no banco de dados.  Mas isso n√£o √© tudo.  Entender que o contador aumentou ou diminuiu n% nem sempre √© suficiente para dizer com confian√ßa que se trata de uma mudan√ßa significativa e n√£o de um salto ou flutua√ß√£o sazonal dentro da margem de erro.  Um dos membros da nossa equipe est√° desenvolvendo uma estrutura para medir a signific√¢ncia estat√≠stica das altera√ß√µes m√©tricas.  Usando o aparato de estat√≠stica matem√°tica, ele calcula a amostra m√≠nima (o n√∫mero de usu√°rios / instala√ß√µes / eventos) necess√°ria para avaliar a import√¢ncia das mudan√ßas, seleciona segmentos entre os quais voc√™ pode comparar e determina o intervalo de confian√ßa que provavelmente cont√©m o valor real da m√©trica de interesse para n√≥s.  Essa estrutura j√° foi testada e deu resultados interessantes na semana passada: descobrimos que, depois que come√ßamos a exibir pre√ßos no cat√°logo de extens√µes dentro do painel Plesk, as pessoas come√ßaram a comprar menos chaves de licen√ßa anuais e mais frequentemente mensais para esses produtos.  No momento, nossos colegas est√£o calculando a previs√£o do LTV, ap√≥s o que ficar√° claro que essas mudan√ßas s√£o para n√≥s a longo prazo e que op√ß√£o devemos promover na l√≥gica de mostrar pre√ßos. <br><br><h3>  Rescis√£o do suporte </h3><br>  O resultado da vida √∫til de qualquer produto ou recurso √© a rescis√£o do seu suporte no caso de falta de demanda ou outros motivos (por exemplo, considera√ß√µes de seguran√ßa no caso de rescis√£o do suporte a um sistema operacional ou vers√£o desatualizada do PHP).  Aqui, a an√°lise tamb√©m ajuda: por exemplo, quando decidimos incentivar os usu√°rios a mudar para novas vers√µes do PHP, a primeira coisa que fizemos foi coletar estat√≠sticas de uso da vers√£o entre os usu√°rios do Plesk.  Aprendemos que a porcentagem de uso do PHP 7 atinge apenas 20% dos usu√°rios e percebemos que os custos potenciais de comuta√ß√£o for√ßada na forma de milh√µes de sites danificados superam os riscos de poss√≠veis vulnerabilidades de vers√µes mais antigas.  Como resultado, decidimos medidas de influ√™ncia mais leves e come√ßamos com uma notifica√ß√£o sobre a conveni√™ncia de uma atualiza√ß√£o no painel.  Outro exemplo pode ser in√∫meras hist√≥rias com a descontinua√ß√£o do suporte a sistemas operacionais - no caso em que descobrimos que um dos maiores clientes com dezenas de milhares de instala√ß√µes do Plesk est√° usando um determinado sistema operacional, nos comunicamos de forma direcionada com esse parceiro e, em caso de impossibilidade de uma transi√ß√£o r√°pida, oferecemos a ele a chamada queda lenta - o t√©rmino do suporte para novas instala√ß√µes e a capacidade de continuar trabalhando nas existentes ap√≥s a atualiza√ß√£o para a vers√£o mais recente do Plesk. <br><br><h3>  Conclus√£o </h3><br>  Para resumir, quero mais uma vez expressar o que consideramos mais importante - agora, trabalhar com an√°lises para n√≥s √© parte integrante do trabalho em todos os recursos.  Mas o processo constru√≠do n√£o √© o fim.  Por experi√™ncia pr√≥pria, est√°vamos convencidos de que o controle da qualidade dos dados n√£o √© menos importante que o pr√≥prio processo.  Tudo n√£o faz sentido se, em qualquer est√°gio da coleta, os dados forem perdidos ou distorcidos.  Para evitar que isso aconte√ßa, em cada est√°gio, esfor√ßamo-nos por adicionar verifica√ß√µes de integridade e corre√ß√£o dos dados, al√©m de registrar cada etapa do processamento. <br><br><img src="https://habrastorage.org/webt/yn/b3/je/ynb3jeq4oef_ms5yj5zrg0j0lyk.png"><br><br>  E o √∫ltimo.  N√£o se pese com as m√©tricas simplesmente porque voc√™ pode :) indicar claramente o que essas informa√ß√µes s√£o para voc√™ e, quando recebidas, pergunte a si mesmo se traz alguma conclus√£o que leve √† a√ß√£o.  Afinal, entender o que fazer √© exatamente para o que tudo foi iniciado :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460395/">https://habr.com/ru/post/pt460395/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460377/index.html">Usando o Liquibase para gerenciar a estrutura do banco de dados em um aplicativo Spring Boot. Parte 1</a></li>
<li><a href="../pt460381/index.html">O que √© assertividade e por que √© necess√°rio</a></li>
<li><a href="../pt460383/index.html">As transi√ß√µes de tela em Legend of Zelda usam os recursos n√£o documentados do NES</a></li>
<li><a href="../pt460387/index.html">Guia do Iniciante do SELinux</a></li>
<li><a href="../pt460393/index.html">Hist√≥rico: o que esperar do Fedora Silverblue</a></li>
<li><a href="../pt460397/index.html">In√≠cio r√°pido com WebComponents</a></li>
<li><a href="../pt460399/index.html">Indicador de carregamento SVG no Vue.js</a></li>
<li><a href="../pt460403/index.html">Vantagens e desvantagens do HugePages</a></li>
<li><a href="../pt460405/index.html">Por que voc√™ precisa de mec√¢nica de jogo oculta</a></li>
<li><a href="../pt460409/index.html">Arduino e teclados (guia completo)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>