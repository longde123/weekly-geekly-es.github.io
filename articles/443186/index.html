<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåüèª ü¶É üßñüèΩ El soporte t√©cnico de 3CX responde: 5 reglas de seguridad de IP PBX üïí üôáüèª ‚öíÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los piratas inform√°ticos de las centrales telef√≥nicas autom√°ticas 3CX, que tienen graves consecuencias, son bastante raros. Sin embargo, nuestros clie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El soporte t√©cnico de 3CX responde: 5 reglas de seguridad de IP PBX</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/3cx/blog/443186/">  Los piratas inform√°ticos de las centrales telef√≥nicas autom√°ticas 3CX, que tienen graves consecuencias, son bastante raros.  Sin embargo, nuestros clientes a veces se convierten en v√≠ctimas de estafas.  Como ha demostrado la pr√°ctica, esto se debe principalmente a la configuraci√≥n incorrecta del sistema o al uso de la versi√≥n desactualizada de 3CX.  En este art√≠culo analizaremos los errores m√°s comunes que pueden conducir a piratear su PBX y explicaremos c√≥mo evitarlos. <a name="habracut"></a><br><br><h3>  ¬øC√≥mo funcionan los estafadores telef√≥nicos? </h3><br>  El fraude telef√≥nico es bastante com√∫n: personas externas o un buzo robot hacen llamadas a trav√©s de su PBX a su cargo.  Esto generalmente ocurre tarde en la noche o en d√≠as no laborables.  Las llamadas duran el mayor tiempo posible, con alta frecuencia y a los destinos internacionales m√°s caros.  Y al final del mes, recibir√° una factura del operador de telecomunicaciones por una cantidad enorme, que debe pagar o disputar en la corte. <br><br>  Las llamadas a los destinos internacionales m√°s caros eran el objetivo principal de los piratas inform√°ticos en el per√≠odo inicial del desarrollo de los intercambios de software.  Puede pensar que este tipo de fraude es cosa del pasado, especialmente dado el costo de las negociaciones internacionales.  Sin embargo, esto lo est√°n haciendo grupos internacionales bien organizados que saquean clientes y operadores a escala industrial. <br><br>  Ahora se est√°n pirateando PBX para hacer miles de llamadas a n√∫meros "caros" de varios servicios autom√°ticos pagados que est√°n controlados por los mismos estafadores.  En este caso, el atacante obtiene una ganancia en forma de comisi√≥n del operador por cada minuto de una llamada paga.  Este fraude tambi√©n se llama Fraude Internacional de Distribuci√≥n de Ingresos (IRSF). <br><br>  Otra forma de ganar dinero ilegal es vender credenciales de cliente SIP robadas en intercambios en l√≠nea "clandestinos".  Adem√°s, dicho acceso se usa de diferentes maneras, ya sea para competir con operadores legales de telecomunicaciones, debido a lo cual es posible vender minutos mucho m√°s baratos que el precio de mercado, o para algunas necesidades personales del comprador. <br><br>  3CX tiene varios niveles de seguridad cuya configuraci√≥n predeterminada evita los tipos de ataque m√°s conocidos.  Sin embargo, algunos administradores del sistema cambian o deshabilitan estas configuraciones sin siquiera darse cuenta de cu√°les son las consecuencias. <br><br>  Veamos las configuraciones de seguridad m√°s comunes que hacen los administradores de 3CX. <br><br><h3>  Credenciales de usuario d√©biles </h3><br>  El primer error son las credenciales de cuenta "d√©biles" utilizadas por las aplicaciones 3CX, tel√©fonos IP y usuarios. <br><br>  Cuando crea un usuario (extensi√≥n) en 3CX, se generan autom√°ticamente credenciales seguras para √©l en todos los niveles de acceso.  Esta es una contrase√±a SIP compleja y una contrase√±a de inicio de sesi√≥n del cliente web, contrase√±as generadas aleatoriamente para acceder a la interfaz web de tel√©fonos IP, PIN aleatorios de correo de voz, etc. ... Aseg√∫rese de usar solo estas credenciales seguras, porque las contrase√±as largas y aleatorias garantizan protecci√≥n contra ataques adivinar contrase√±as (tambi√©n llamados ataques de fuerza bruta). <br><br>  A partir de 3CX v15.5, el sistema no le permitir√° establecer la contrase√±a de extensi√≥n m√°s d√©bil de lo requerido por las reglas de seguridad modernas.  Sin embargo, a menudo las contrase√±as de cuenta d√©biles se heredan de las copias de seguridad de versiones anteriores de 3CX.  Por lo tanto, ahora 3CX advierte al administrador si los n√∫meros de extensi√≥n con contrase√±as d√©biles est√°n presentes en el sistema; aparece una advertencia cerca de dichos n√∫meros.  Si pasa el cursor sobre √©l, aparece informaci√≥n adicional. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a45/d60/7c1/a45d607c16ba76b93ef3fcbd317ad14c.png"><br><br>  Por cierto, no recomendamos establecer contrase√±as d√©biles para fines de prueba.  Como regla, las personas se olvidan de cambiarlas y dejan la PBX "llena de agujeros". <br><br><h3>  Acceso remoto SIP habilitado a extensi√≥n </h3><br>  El segundo error es deshabilitar la opci√≥n "Denegar conexi√≥n desde la red p√∫blica" y no volver a encenderla cuando el usuario ya no la necesita. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85b/6aa/c5d/85b6aac5d6519d065624dd17afdadf40.png"><br><br>  Esta opci√≥n est√° incluida en 3CX por defecto y evita el registro de cualquier usuario fuera de su red local.  Tenga en cuenta que puede usar aplicaciones o el cliente web 3CX sin habilitar el acceso remoto, ya que usan tecnolog√≠a de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">t√∫nel</a> para conectarse a la central.  Esta opci√≥n debe deshabilitarse solo si alguien necesita una conexi√≥n SIP directa para un tel√©fono IP de hardware. <br><br>  <b>Intente evitar las conexiones SIP directas a su PBX o perm√≠talas solo desde ciertas direcciones IP especificadas en el firewall.</b> <br><br><h3>  Muchas llamadas permitidas </h3><br>  Al instalar 3CX, el Asistente de configuraci√≥n inicial le pregunta a qu√© pa√≠ses desea permitir las llamadas salientes.  La misma lista de pa√≠ses se puede ver (y cambiar) en la secci√≥n Configuraci√≥n - Seguridad - C√≥digos de pa√≠s internacionales permitidos.  Solo se deben permitir aquellos pa√≠ses (prefijos) donde sus usuarios realmente llaman.  Por defecto, 3CX solo permite llamadas al pa√≠s que se especific√≥ como la ubicaci√≥n para el intercambio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3a/575/676/c3a575676fa7db66ab7d4c679b38be15.png"><br><br>  Una pr√°ctica muy peligrosa es permitir que todos los pa√≠ses instalen centrales telef√≥nicas autom√°ticas y limitarlas m√°s adelante.  Por lo general, se olvidan de esto, lo que permite al atacante llamar en todas las direcciones tan pronto como reciba las credenciales del usuario de PBX. <br><br><h3>  Reglas de salida demasiado flojas </h3><br>  Otra mala pr√°ctica es usar reglas salientes demasiado generales que permitan a cualquier usuario (grupo organizativo predeterminado de 3CX) llamar en cualquier direcci√≥n permitida.  Algunos administradores, para no complicar sus vidas, crean una regla universal para esto. <br><br>  De hecho, debe crear reglas salientes con los permisos m√≠nimos necesarios, de acuerdo con el mismo principio por el cual se crean, por ejemplo, en un firewall.  Enumere espec√≠ficamente los prefijos, especifique la longitud m√≠nima y m√°xima del n√∫mero, indique claramente los grupos de n√∫meros de extensi√≥n que pueden llamar en esta direcci√≥n. <br><br><h3>  Par√°metros de procesamiento no v√°lidos E164 </h3><br>  En la secci√≥n Par√°metros - N√∫meros E164, se define el procesamiento de n√∫meros, en el que el s√≠mbolo "+" al comienzo del n√∫mero se reemplaza por el c√≥digo de marcaci√≥n internacional.  Las reglas de sustituci√≥n se definen para el pa√≠s que se indica como el lugar de instalaci√≥n de la central telef√≥nica.  En la mayor√≠a de los pa√≠ses, "+" se reemplaza por 00, y para Am√©rica, por 011. La sustituci√≥n est√° de acuerdo con los est√°ndares de la UIT. <br><br>  Los par√°metros E164 son importantes porque se utilizan para determinar las direcciones prohibidas (prefijos) que discutimos anteriormente.  Por ejemplo, si un pa√≠s bloqueado es Albania, 3CX analizar√° y bloquear√° los n√∫meros que comienzan con 00355xxx y + 355xxx. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cef/2da/7f0/cef2da7f0b06aeaa7be3778a055d451b.png"><br><br>  Si ingres√≥ incorrectamente el c√≥digo de marcaci√≥n internacional para su pa√≠s, esto conducir√° no solo a la sustituci√≥n err√≥nea "+", sino tambi√©n al funcionamiento incorrecto de la funci√≥n de bloqueo del pa√≠s. <br><br><h3>  Nuevas caracter√≠sticas de seguridad en 3CX v16 </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">3CX v16</a> agrega dos caracter√≠sticas de seguridad interesantes. <br><br>  El primero es restringir el acceso por direcci√≥n IP a la interfaz de administraci√≥n 3CX.  Se configura en la secci√≥n Configuraci√≥n - Seguridad - Restringir el acceso a la interfaz.  De manera predeterminada, todas las direcciones IP est√°n permitidas, pero si la protecci√≥n IP est√° habilitada, el acceso solo se permitir√° desde la red local y las direcciones IP externas especificadas expl√≠citamente.  Tenga en cuenta que esta restricci√≥n no afecta el funcionamiento de otros servicios web de 3CX, como tel√©fonos con autoajuste, cliente web, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/142/3b5/8ec/1423b58ec839a8952e04cb8879f8a33a.png"><br><br>  La segunda caracter√≠stica de seguridad es la lista negra global de autoaprendizaje de IP mantenida por 3CX.  Se incluye en la secci√≥n Configuraci√≥n - Configuraci√≥n de seguridad - Antihacking.  Si esta opci√≥n est√° habilitada, la central transmitir√° autom√°ticamente informaci√≥n sobre actividades sospechosas, incluida la direcci√≥n IP de origen, a nuestro servidor central.  Despu√©s de analizar el evento, la informaci√≥n sobre esta direcci√≥n IP se transmitir√° autom√°ticamente a todos los sistemas 3CX en el mundo que tambi√©n tienen esta funci√≥n habilitada.  Por lo tanto, el tr√°fico sospechoso se bloquear√° debido a la "inteligencia colectiva".  Hoy, nuestra lista global ya contiene m√°s de 1000 direcciones IPvv4 desde las cuales se han repetido constantemente los intentos de escaneo o crack.  ¬°Recomendamos encarecidamente habilitar esta funci√≥n en su PBX! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b67/5b3/aa0/b675b3aa03b05d6b1535af94728921a3.png"><br><br><h3>  Conclusi√≥n </h3><br>  Notamos que la pirater√≠a del sistema est√° precedida inmediatamente por varios errores tomados en conjunto.  Pr√°cticamente no observamos situaciones en las que surgieran consecuencias graves solo por un error. <br><br>  Bueno, si te han pirateado, ¬°no entres en p√°nico!  Es muy importante recopilar registros del servidor antes de realizar acciones radicales.  Posteriormente, esto ayudar√° a realizar una investigaci√≥n de calidad del incidente.  Para recopilar registros, vaya a la secci√≥n Soporte - Crear un archivo para soporte t√©cnico.  Se generar√° un archivo zip, un enlace al cual se le enviar√° por correo electr√≥nico.  Adjunte este archivo y la descripci√≥n del incidente al Soporte t√©cnico de 3CX. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/149/17c/cf8/14917ccf821caade2629806edf87b1f2.png"><br><br>  Debe comunicarse con el soporte t√©cnico si tiene preguntas razonables sobre la seguridad de 3CX o si desea informar un hack que ya ha tenido lugar.  Para comprender la situaci√≥n y obtener las recomendaciones necesarias, abra una apelaci√≥n en la categor√≠a Seguridad - Fraude.  Estas solicitudes se consideran con la m√°xima prioridad.  Tambi√©n puede obtener consejos de seguridad de 3CX en nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">foro de usuarios</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443186/">https://habr.com/ru/post/443186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443176/index.html">7 extensiones de Chrome para aprender ingl√©s</a></li>
<li><a href="../443178/index.html">Crystal Blockchain Analytics: Investigando los Hacks y los Casos de Robo</a></li>
<li><a href="../443180/index.html">Crew Dragon aterrizaje y video de asteroides</a></li>
<li><a href="../443182/index.html">Extraiga YPbPr de Commodore 64</a></li>
<li><a href="../443184/index.html">Del amor para controlar un paso</a></li>
<li><a href="../443188/index.html">Tres ojos cuelgan de un pilar, o la historia de que cinco patas de ATtiny13 son suficientes</a></li>
<li><a href="../443190/index.html">Introducci√≥n a las pol√≠ticas de red de Kubernetes para profesionales de la seguridad</a></li>
<li><a href="../443192/index.html">M√©todos privados sin guiones bajos e interfaces en Python</a></li>
<li><a href="../443194/index.html">Los ingenieros de WFIRM inventaron una bioimpresora que imprime la piel directamente sobre una herida</a></li>
<li><a href="../443196/index.html">Sin un minuto sin conexi√≥n: elegir un enrutador LTE industrial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>