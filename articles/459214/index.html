<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëî üåê üçò Tolerancia a fallos en el almacenamiento de Qsan ü§æüèº üàÇÔ∏è ü§™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy, en la infraestructura de TI, con el uso generalizado de la virtualizaci√≥n, los sistemas de almacenamiento son el n√∫cleo que almacena todas las m√°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tolerancia a fallos en el almacenamiento de Qsan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/459214/"><p> Hoy, en la infraestructura de TI, con el uso generalizado de la virtualizaci√≥n, los sistemas de almacenamiento son el n√∫cleo que almacena todas las m√°quinas virtuales.  La falla de este nodo puede detener completamente el trabajo del centro de datos.  Aunque una parte considerable del equipo del servidor tiene tolerancia a fallas de una forma u otra "por defecto", es precisamente debido a la funci√≥n especial de los sistemas de almacenamiento dentro del centro de datos que tienen mayores requisitos en t√©rminos de "capacidad de supervivencia". </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ql/un/l2/qlunl2stlgw2znymm7koq0fauvg.jpeg"></div><br><a name="habracut"></a><br><p>  El m√©todo m√°s efectivo para garantizar la tolerancia a fallas en TI es el uso de varias instancias de equipos y software (en el caso m√°s simple, duplicaci√≥n).  Por supuesto, el almacenamiento se puede duplicar por completo.  Y para la recuperaci√≥n ante desastres, este es exactamente el enfoque que se utiliza.  Pero no todas las empresas pueden permitirse esa soluci√≥n.  No se trata solo del doble del costo del equipo, sino tambi√©n de otros costos para organizar dicha soluci√≥n y su apoyo adicional. </p><br><p>  Sin embargo, la posibilidad de duplicaci√≥n de equipos no elimina la necesidad de garantizar la tolerancia a fallas a nivel de componente.  En particular, la redundancia se aplica a los sistemas de almacenamiento para fuentes de alimentaci√≥n, m√≥dulos de refrigeraci√≥n, unidades y, por supuesto, controladores.  Todo esto se ha convertido en un lugar com√∫n durante mucho tiempo.  Es dif√≠cil encontrar almacenamiento sin usar un dise√±o similar.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Qsan</a> aqu√≠ no es una excepci√≥n.  Pero queremos hablar en este art√≠culo sobre lo que no es inmediatamente evidente y, al mismo tiempo, est√° dirigido principalmente a aumentar la tolerancia a fallas del sistema en su conjunto. </p><br><h3>  M√≥dulos de enfriamiento </h3><br><p>  Muy a menudo en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sistemas de almacenamiento</a> con cajas 2U-3U, se utilizan m√≥dulos combinados que combinan fuentes de alimentaci√≥n y ventiladores.  Por un lado, es conveniente porque  Solo una unidad necesita servicio.  Por otro lado, si el sistema de enfriamiento falla, la fuente de alimentaci√≥n puede apagarse por la fuerza para evitar el sobrecalentamiento.  Y parece que no surgir√° la situaci√≥n m√°s cr√≠tica, pero obviamente no vale la pena agregar vulnerabilidades de almacenamiento. </p><br><p>  La refrigeraci√≥n en los sistemas de almacenamiento Qsan se organiza en forma de m√≥dulos separados con un reemplazo "en caliente", independiente de las fuentes de alimentaci√≥n.  En realidad, las fuentes de alimentaci√≥n tienen sus propios ventiladores, dise√±ados para explotar la propia fuente de alimentaci√≥n.  El m√≥dulo de enfriamiento acomoda dos ventiladores independientes que se aseguran entre s√≠.  Hay dos m√≥dulos de este tipo en el sistema de almacenamiento: a la derecha y a la izquierda, para un flujo de aire eficiente de todos los componentes.  Si uno de los ventiladores falla, todos los dem√°s aumentan autom√°ticamente su velocidad para compensar la falta de flujo de aire resultante.  Es por eso que un mal funcionamiento del ventilador no conlleva el riesgo de sobrecalentamiento de todo el dispositivo. </p><br><h3>  Topolog√≠a de conexi√≥n de estante de extensi√≥n </h3><br><p>  El esquema cl√°sico para conectar los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estantes de expansi√≥n</a> al almacenamiento significa una topolog√≠a llamada cascada.  En este caso, los controladores de estante y almacenamiento correspondientes est√°n interconectados por un solo cable SAS.  En total, se obtienen 2 cables para un sistema de controlador dual.  Si desea conectar el segundo, entonces est√° conectado de la misma manera al primer estante.  Y as√≠ sucesivamente.  La ventaja de esta topolog√≠a es la facilidad de implementaci√≥n en los equipos.  Y la desventaja ser√° cierta vulnerabilidad a una interrupci√≥n repentina en el circuito SAS debido a la falla cruzada de los controladores y estantes de almacenamiento no conectados o debido a un apag√≥n de uno de los estantes de expansi√≥n en el medio de la cadena.  El resultado ser√° la p√©rdida de acceso a parte de las unidades y un posible colapso del grupo RAID si se "distribuye" en varios casos. </p><br><p>  En caso de fallo de controlador cruzado, Qsan tiene protecci√≥n en forma de comunicaci√≥n l√≥gica interna entre controladores a trav√©s del plano posterior de almacenamiento.  Es decir  el controlador de almacenamiento ve no solo el controlador JBOD directamente conectado a √©l, sino tambi√©n el controlador "vecino" a trav√©s de un enlace especial en el plano posterior.  Como resultado, si ocurre tal situaci√≥n y nadie extrae f√≠sicamente los cables SAS entre el sistema de almacenamiento y el estante, se preservar√° el acceso a todas las unidades. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/a8/kh/7f/a8kh7fjyjtcrxcvkyfbjghld4tk.jpeg"></div><br><p>  Para proteger el circuito SAS de la rotura, por ejemplo, debido a la desenergizaci√≥n del estante de expansi√≥n, generalmente se usa una topolog√≠a de conexi√≥n diferente: la cascada inversa.  En este caso, el sistema de almacenamiento se conecta inmediatamente al primer y √∫ltimo estante de la cadena, obteniendo acceso a las unidades desde ambos lados. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/4w/zq/mr4wzqj7-o1locvqsiiohdbkdzg.jpeg"></div><br><p>  Si desea una protecci√≥n m√°s fuerte, puede crear configuraciones a mayor escala, utilizando, por ejemplo, la topolog√≠a del √°rbol.  O bien, complicar a trav√©s de una combinaci√≥n de las topolog√≠as mencionadas.  Esto es posible debido a la gran cantidad de conectores SAS en los dispositivos (2 para cada controlador de almacenamiento y 5 para cada controlador JBOD) con detecci√≥n autom√°tica de modos operativos de entrada / salida.  Lo principal es que el administrador mismo no est√° confundido.  Y el sistema de almacenamiento podr√° configurar correctamente la configuraci√≥n. </p><br><h3>  Reconstrucci√≥n r√°pida </h3><br><p>  La disponibilidad de discos de repuesto de repuesto din√°mico en el sistema aumenta significativamente la confiabilidad del almacenamiento de informaci√≥n.  Sin embargo, solo el hecho de que tales discos est√©n asignados no significa protecci√≥n absoluta.  El hecho es que el proceso de recuperaci√≥n (reconstrucci√≥n) lleva bastante tiempo y, a menudo, mucho tiempo.  La complejidad surge del acceso continuo a los datos maestros.  Es decir  El sistema, junto con el trabajo actual, tambi√©n debe copiar los datos en un nuevo disco.  Y la duraci√≥n de la reconstrucci√≥n depende directamente de la capacidad del disco y sus caracter√≠sticas de velocidad.  Dado que el sistema no sabe nada sobre el espacio de disco ocupado real, en el proceso de reconstrucci√≥n simplemente copia todo: bloque por bloque. </p><br><p>  Como resultado, la restauraci√≥n de un disco moderno de alta capacidad de 10 + TB con una carga importante en los sistemas de almacenamiento puede ser f√°cilmente una semana o m√°s.  Tambi√©n debe tener en cuenta el hecho de que durante la reconstrucci√≥n, la probabilidad de falla de otras unidades aumenta significativamente debido a la mayor carga en ellas.  Y esto ya puede representar un grave peligro en el caso de utilizar, por ejemplo, RAID5. </p><br><p>  Como soluci√≥n a este problema, muchos desarrolladores de almacenamiento est√°n preocupados por acelerar el proceso de recuperaci√≥n.  Se pueden usar diferentes enfoques para esto, pero la esencia es la misma: copiar solo bloques realmente ocupados durante la reconstrucci√≥n.  Qsan no se mantuvo al margen de este problema.  En el sistema de almacenamiento de este proveedor, cuando la opci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reconstrucci√≥n r√°pida</a> est√° activada, el sistema realiza un seguimiento de los bloques utilizados para la grabaci√≥n y, por lo tanto, tiene la capacidad de copiarlos solo en una nueva unidad en caso de falla del disco. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4j/hx/ld/4jhxldznr4kaf8va446yntwnc6k.jpeg"></div><br><p>  La opci√≥n Reconstrucci√≥n r√°pida no est√° habilitada de manera predeterminada al crear nuevos vol√∫menes, ya que  su uso tiene un impacto en el rendimiento, especialmente con operaciones de escritura aleatorias, porque: </p><br><p></p><ol><li>  Es necesario rastrear registros en bloques; </li><li>  Al reconstruir, las sumas de verificaci√≥n no se vuelven a calcular para el espacio no asignado, por lo tanto, cuando se realiza una nueva entrada en esta √°rea, primero es necesario "inicializarla". </li></ol><br><p>  Por lo tanto, no se recomienda usar Fast Rebuild para vol√∫menes, por ejemplo, con bases de datos altamente cargadas o en sistemas de videovigilancia, donde el volumen a√∫n estar√° 100% lleno.  Pero para los servidores de archivos o correo, esta opci√≥n ser√° muy √∫til. </p><br><h2>  En lugar de una conclusi√≥n </h2><br><p>  Cada fabricante de almacenamiento implica que sus dispositivos son confiables.  Y si no hay errores de c√°lculo fatales en el desarrollo de dispositivos y una sed incre√≠ble de ahorro en el proceso de producci√≥n y prueba, entonces, en general, podemos estar de acuerdo con el proveedor.  Sin embargo, debes entender: </p><br><p></p><ul><li>  La tolerancia b√°sica a fallas de los sistemas de almacenamiento es, en primer lugar, una forma de continuar teniendo acceso a los datos en caso de falla de cualquiera de los componentes; </li><li>  opciones adicionales con respecto a la tolerancia a fallas (como las descritas anteriormente) son la eliminaci√≥n de ciertos tipos de mal funcionamiento y el aumento de sus posibilidades de tener acceso a los datos; </li><li>  100% de fiabilidad, por desgracia, no sucede.  Pero, para acercarse lo m√°s posible, la mayor√≠a de los vendedores de almacenamiento cuerdos (y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Qsan</a> entre ellos) hacen todo lo posible para mejorar continuamente sus productos tanto en hardware como en software. </li></ul><br><p>  Al mismo tiempo, no se debe olvidar que ninguna fiabilidad absoluta de los sistemas de almacenamiento no cancela la disponibilidad de copias de seguridad, planes claros y ensayados para la recuperaci√≥n en caso de accidente, y soporte t√©cnico operativo para el proveedor. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/459214/">https://habr.com/ru/post/459214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459198/index.html">An√°lisis de rendimiento de consultas en ClickHouse. Informe Yandex</a></li>
<li><a href="../459204/index.html">10 ++ formas de trabajar con registros de hardware en C ++ (por ejemplo, IAR y Cortex M)</a></li>
<li><a href="../459206/index.html">9 a√±os en un monolito en Node.JS</a></li>
<li><a href="../459208/index.html">Correr con pr√≥tesis: simulaci√≥n de Nekstgen del movimiento humano usando m√∫sculos, huesos y una red neuronal</a></li>
<li><a href="../459212/index.html">Implementaci√≥n de propiedad en C ++</a></li>
<li><a href="../459216/index.html">Estructura de datos del √°rbol B</a></li>
<li><a href="../459220/index.html">Pruebas de integraci√≥n para verificar p√©rdidas de memoria</a></li>
<li><a href="../459224/index.html">De agente inmobiliario a desarrollador de juegos 2. "Operaci√≥n: Android"</a></li>
<li><a href="../459226/index.html">"Fast-PoE y Perpetual-PoE: ¬øson estos nuevos est√°ndares o no?"</a></li>
<li><a href="../459230/index.html">Un viaje al centro de llamadas y a la cartera de productos a trav√©s de los ojos del desarrollador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>