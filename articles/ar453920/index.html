<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕠 👩🏾‍⚕️ 📡 كيفية السيطرة على البنية التحتية للشبكة الخاصة بك. الفصل الرابع التنفيذ. قوالب 👨🏼‍🚀 🕤 🏴󠁧󠁢󠁳󠁣󠁴󠁿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="هذه المقالة هي السادسة في سلسلة من المقالات بعنوان "كيفية اتخاذ البنية التحتية للشبكة تحت سيطرتك". يمكن العثور على محتويات جميع المقالات في السلسلة وا...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>كيفية السيطرة على البنية التحتية للشبكة الخاصة بك. الفصل الرابع التنفيذ. قوالب</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453920/" style=";text-align:right;direction:rtl">  <i>هذه المقالة هي السادسة في سلسلة من المقالات بعنوان "كيفية اتخاذ البنية التحتية للشبكة تحت سيطرتك".</i>  <i>يمكن العثور على محتويات جميع المقالات في السلسلة والروابط <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هنا</a></i> . <br><br>  ترك بعض المواضيع وراء ، قررت أن أبدأ فصل جديد. <br><br>  سأعود إلى بر الأمان لاحقًا.  أريد هنا مناقشة نهج بسيط ولكنه فعال ، وأنا متأكد أنه ، بشكل أو بآخر ، يمكن أن يكون مفيدًا للكثيرين.  إنها بالأحرى قصة قصيرة عن كيفية تغيير الأتمتة لحياة المهندس.  سيكون حول استخدام temlates.  في النهاية توجد قائمة بمشاريعي ، حيث يمكنك رؤية كيف يعمل كل شيء موصوف هنا. <br><br><h2 style=";text-align:right;direction:rtl">  DevOps للويب </h2><br>  إنشاء تكوين باستخدام برنامج نصي ، باستخدام GIT للتحكم في التغييرات في البنية التحتية لتكنولوجيا المعلومات ، "التحميل" عن بُعد - تأتي هذه الأفكار أولاً عند التفكير في التنفيذ التقني لنهج DevOps.  الإيجابيات واضحة.  ولكن هناك ، للأسف ، عيوب أيضا. <br><br>  عندما مضى أكثر من 5 سنوات ، جاء مطورونا إلينا ، إلى مسئولي الشبكات ، مع هذه العروض ، لم نكن متحمسين. <br><a name="habracut"></a><br>  يجب أن أقول أننا ورثنا شبكة متنافرة إلى حد ما تتألف من معدات لحوالي 10 بائعي مختلفين.  كان هناك شيء مناسب للتهيئة من خلال مبادرة CLI المفضلة لدينا ، ولكن في مكان ما فضلنا استخدام واجهة المستخدم الرسومية.  بالإضافة إلى ذلك ، تم تدريس العمل الطويل على المعدات "المباشرة" للتحكم في الوقت الفعلي.  على سبيل المثال ، عند إجراء التغييرات ، أشعر براحة أكبر في العمل مباشرة من خلال CLI.  لذلك أستطيع أن أرى بسرعة أن هناك خطأ ما و "دحر" التغييرات.  كل هذا كان في تناقض مع أفكارهم. <br><br>  تنشأ أسئلة أخرى ، على سبيل المثال ، من إصدار إلى إصدار البرنامج ، قد تختلف الواجهة قليلاً.  هذا ، في النهاية ، سوف يتسبب في إنشاء البرنامج النصي الخاص بك "التكوين" خاطئ.  لا أريد استخدام الإنتاج في اقتحام. <br><br>  أو ، كيف نفهم أن أوامر التكوين تم تطبيقها بشكل صحيح وماذا تفعل في حالة وجود خطأ؟ <br><br>  لا أريد أن أقول إن كل هذه القضايا غير قابلة للحل.  ما عليك سوى قول "A" ، ربما يكون من الحكمة أن نقول "B" ، وإذا كنت تريد استخدام نفس العمليات للتحكم في التغيير كما هو الحال في التطوير ، فأنت بحاجة إلى وجود بيئات للتطوير والتنظيم بالإضافة إلى الإنتاج.  ثم يبدو هذا النهج كاملاً.  ولكن كم سيكلف؟ <br><br>  ولكن هناك حالة واحدة حيث يتم تكافؤ تقريبا سلبيات ، وتبقى الايجابيات فقط.  أنا أتحدث عن أعمال التصميم. <br><br><h2 style=";text-align:right;direction:rtl">  مشروع </h2><br>  على مدار العامين الماضيين ، شاركت في مشروع لبناء مركز بيانات لمزود رئيسي واحد.  أنا مسؤول عن F5 و Palo Alto في هذا المشروع.  من وجهة نظر شركة سيسكو فهي "معدات الطرف الثالث". <br><br>  بالنسبة لي شخصيا ، هناك مرحلتان متميزتان في هذا المشروع. <br><br><h3 style=";text-align:right;direction:rtl">  المرحلة الاولى </h3><br>  في السنة الأولى كنت مشغولة إلى ما لا نهاية ، وعملت في الليل وفي عطلات نهاية الأسبوع.  لم أستطع رفع رأسي.  كان الضغط من الإدارة والعميل قويًا ومستمرًا.  في روتين ثابت ، لم أستطع حتى محاولة تحسين العملية.  لم يكن فقط وليس فقط تكوين المعدات بقدر إعداد وثائق التصميم. <br><br>  لذلك بدأت الاختبارات الأولى ، وسأندهش من عدد الأخطاء الطفيفة التي ارتكبت.  بالطبع ، لقد نجح كل شيء ، ولكن كان هناك حرف في الاسم مفقود ، سطر مفقود في الفريق ... استمرت الاختبارات واستمرت ، وكنت بالفعل في صراع مستمر يوميًا مع الأخطاء والاختبارات والتوثيق. <br><br>  استمر هذا لمدة عام.  المشروع ، كما أفهمه ، لم يكن سهلاً على الجميع ، ولكن تدريجياً أصبح العميل أكثر راضية ، وهذا مكّن من الاستعانة بمهندسين إضافيين قادرين على تحمل جزء من الروتين. <br><br>  الآن كان من الممكن أن ننظر حولنا قليلا. <br>  وكانت تلك بداية المرحلة الثانية. <br><br><h3 style=";text-align:right;direction:rtl">  المرحلة الثانية </h3><br>  قررت لأتمتة العملية. <br><br>  ما فهمته من التواصل مع المطورين في ذلك الوقت (ويجب أن نشيد به ، كان لدينا فريق قوي) هو أن تنسيق النص ، على الرغم من أنه يبدو للوهلة الأولى شيئًا ما من عالم نظام التشغيل DOS ، لديه عدد من الخصائص القيمة . <br>  على سبيل المثال ، سيكون تنسيق النص مفيدًا إذا كنت ترغب في الاستفادة الكاملة من GIT وجميع مشتقاتها.  أردت أن. <br><br>  حسنًا ، يبدو أنه يمكنك فقط تخزين تهيئة أو قائمة أوامر ، ولكن إجراء تغييرات غير مريح إلى حد ما.  بالإضافة إلى ذلك ، عند التصميم ، هناك مهمة أخرى مهمة.  يجب أن يكون لديك وثائق تصف التصميم العام (تصميم منخفض المستوى) والتنفيذ المحدد (خطة تنفيذ الشبكة).  وفي هذه الحالة ، يبدو أن استخدام القوالب خيار مناسب للغاية. <br><br>  لذلك ، عند استخدام YAML و Jinja2 ، ملف YAML مع معلمات التكوين ، مثل عناوين IP ، وأرقام BGP AS ، ... يفي تمامًا بدور NIP ، بينما تشتمل قوالب Jinja2 على بناء جملة مناسب للتصميم ، وهذا في الواقع ، انعكاس لـ LLD. <br><br>  استغرق الأمر يومين لتعلم اللغات YAML و Jinja2.  بعض الأمثلة الجيدة تكفي لفهم كيف يعمل هذا.  ثم استغرق الأمر حوالي أسبوعين لإنشاء جميع القوالب التي تناسب تصميمنا: أسبوع لـ Palo Alto وأسبوع آخر لـ F5.  تم نشر كل هذا على جيثاب للشركات. <br><br>  الآن كانت عملية التغيير على النحو التالي: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  تغيير ملف yaml </li><li style=";text-align:right;direction:rtl">  إنشاء ملف تكوين باستخدام قالب (Jinja2) </li><li style=";text-align:right;direction:rtl">  حفظها إلى مستودع بعيد </li><li style=";text-align:right;direction:rtl">  تم تحميل التكوين الذي تم إنشاؤه على الجهاز </li><li style=";text-align:right;direction:rtl">  رأيت خطأ </li><li style=";text-align:right;direction:rtl">  تم تغيير ملف YAML أو قالب Jinja2 </li><li style=";text-align:right;direction:rtl">  إنشاء ملف تكوين باستخدام قالب (Jinja2) </li><li style=";text-align:right;direction:rtl">  ... </li></ul><br>  من الواضح أنه في البداية تم إنفاق الكثير من الوقت على التحرير ، ولكن بعد أسبوع أو أسبوعين كان من النادر حدوثه بالفعل. <br><br>  كان الاختبار الجيد والقدرة على تصحيح كل شيء رغبة العميل في تغيير اصطلاح التسمية.  الذين عملوا مع F5 يفهم طغيان الوضع.  لكن بالنسبة لي كان الأمر بسيطًا جدًا.  لقد غيرت الأسماء الموجودة في ملف YAML ، وحذفت التكوين بالكامل من الجهاز ، وقمت بإنشاء اسم جديد وتحميله.  كل شيء ، مع مراعاة إصلاحات الأخطاء ، استغرق 4 أيام: يومين لكل تقنية.  بعد ذلك ، كنت مستعدًا للخطوة التالية ، وهي إنشاء مراكز بيانات DEV و Staging. <br><br><h3 style=";text-align:right;direction:rtl">  ديف والتدريج </h3><br>  التدريج يكرر فعلا الإنتاج تماما.  ديف نسخة جردت بشدة بنيت في المقام الأول على الأجهزة الافتراضية.  الوضع المثالي لنهج جديد.  إذا قمت بعزل الوقت الذي قضيته في العملية العامة ، فإن العمل ، على ما أعتقد ، لم يستغرق أكثر من أسبوعين.  الوقت الرئيسي هو وقت انتظار الجانب الآخر ، والبحث المشترك عن المشاكل.  كان تنفيذ الطرف الثالث غير مرئي تقريبًا للآخرين.  كان هناك حتى وقت لتدريس شيء ما وكتابة مقالتين عن هابري :) <br><br><h2 style=";text-align:right;direction:rtl">  لتلخيص </h2><br>  إذن ماذا لدي في الخلاصة؟ <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  كل ما هو مطلوب بالنسبة لي لتغيير التكوين هو تعديل ملف YAML بسيط ومنظم بشكل واضح مع معلمات التكوين.  أنا لا أغير أبدًا نص بيثون ونادراً جدًا (فقط إذا كان هناك خطأ) أغير Jinja2 </li><li style=";text-align:right;direction:rtl">  من وجهة نظر الوثائق ، يتم الحصول على وضع مثالي تقريبًا.  يمكنك تغيير الوثائق (ملفات YAML بمثابة NIP) وتحميل هذا التكوين إلى الجهاز.  وبالتالي ، فإن مستنداتك محدثة دائمًا. </li></ul><br>  كل هذا أدى إلى حقيقة أن <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  انخفضت نسبة الأخطاء إلى 0 تقريبًا </li><li style=";text-align:right;direction:rtl">  استغرق الأمر 90 في المئة من الروتين </li><li style=";text-align:right;direction:rtl">  زادت سرعة التنفيذ بشكل كبير </li></ul><br><h2 style=";text-align:right;direction:rtl">  الدفع ، F5Y ، ACY </h2><br>  قلت بعض الأمثلة تكفي لفهم كيف يعمل هذا. <br>  إليك نسخة مختصرة (ومعدلة بالطبع) لما تم إنشاؤه في عملي. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PAY</a> = نشر <b>P</b> alo <b>A</b> lto من <b>Y</b> aml = Palo Alto من Yaml <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">F5Y</a> = نشر <b>F5</b> من <b>Y</b> aml = <b>F5</b> من <b>Y</b> aml (قريبًا) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ACY</a> = النشر <b>AC</b> i من <b>Y</b> aml = <b>F5</b> من <b>Y</b> aml <br><br>  سأضيف بضع كلمات حول ACY (لا ينبغي الخلط بينه وبين ACI). <br><br>  أولئك الذين عملوا مع ACI يعرفون أن هذه المعجزة (وبطريقة جيدة ، أيضًا) لم يتم إنشاؤها بواسطة الشبكات :).  نسيت كل ما تعرفه عن الشبكة - لن يكون مفيدًا لك! <br>  إنه مبالغ فيه بعض الشيء ، لكنه ينقل شعورًا بأنني دائمًا ما أعاني منه لمدة 3 سنوات ، وأنا أعمل مع ACI. <br><br>  وفي هذه الحالة ، لا تعد ACY مجرد فرصة لبناء عملية التحكم في التغيير (والتي تعد مهمة بشكل خاص في حالة ACI ، لأنه من المفترض أن هذا هو الجزء المركزي والأكثر أهمية في مركز البيانات الخاص بك) ، ولكنه يوفر لك أيضًا واجهة سهلة الاستخدام لإنشاء تكوين. <br><br>  يستخدم المهندسون في هذا المشروع Excel لاستخدام ACI بدلاً من YAML لنفس الغرض تمامًا.  هناك بعض المزايا لاستخدام Excel ، بالطبع: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ارتشف في ملف واحد </li><li style=";text-align:right;direction:rtl">  علامات جميلة أن العميل مسرور للنظر </li><li style=";text-align:right;direction:rtl">  يمكنك استخدام بعض أدوات التفوق </li></ul><br>  ولكن هناك عيب واحد ، وفي رأيي يفوق إيجابيات.  السيطرة على التغييرات وتنسيق العمل الجماعي يصبح أكثر صعوبة. <br><br>  تقوم ACY بالفعل بتطبيق نفس الأساليب التي استخدمتها للطرف الثالث لتكوين ACI. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar453920/">https://habr.com/ru/post/ar453920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar453904/index.html">تخلص من "vk.com/away.php" أو اتبع روابط الشخص السليم</a></li>
<li><a href="../ar453906/index.html">ما هو "نموذج المجال"؟</a></li>
<li><a href="../ar453908/index.html">RTOS Neutrino في أجهزة الكمبيوتر الصناعية</a></li>
<li><a href="../ar453914/index.html">TON اختبار تعليمات التثبيت العميل</a></li>
<li><a href="../ar453916/index.html">كيف تحمي نفسك من المحتالين المحمول</a></li>
<li><a href="../ar453926/index.html">كيف تعمل خدمة مشاركة السيارات وأعمالها</a></li>
<li><a href="../ar453930/index.html">مقارنة واختيار نظم ترحيل البيانات</a></li>
<li><a href="../ar453932/index.html">بضع كلمات في الدفاع عن متراصة</a></li>
<li><a href="../ar453934/index.html">11 سؤالًا للمناقشة قبل بدء العمل</a></li>
<li><a href="../ar453938/index.html">NB-IoT تعقب الدراجة المسروقة</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>