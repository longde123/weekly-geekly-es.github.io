<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍⚕️ 🏫 🏣 Nous fabriquons nous-mêmes un radiomètre à scintillation. Partie 1, matériel 🗒️ ⁉️ 🎪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article précédent, j'ai montré un peu dans mon travail un radiomètre à scintillation fait maison. L'appareil a intéressé le public et à cet ég...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous fabriquons nous-mêmes un radiomètre à scintillation. Partie 1, matériel</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456878/">  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article précédent,</a> j'ai montré un peu dans mon travail un radiomètre à scintillation fait maison.  L'appareil a intéressé le public et à cet égard sort cet article décrivant le radiomètre de l'intérieur. <br><br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/qj/h9/-u/qjh9-uoln8w3rzdv26mm2jzrcqu.jpeg"></div><a name="habracut"></a><br><h4>  Qu'est-ce que c'est et pourquoi </h4><br>  La grande majorité des dosimètres et radiomètres de poche sont des instruments basés sur un compteur Geiger.  Ce type de détecteur a ses avantages, dont les principaux sont la simplicité et le faible coût, mais aussi un certain nombre d'inconvénients.  Tout d'abord, il s'agit d'une très faible efficacité d'enregistrement des rayons gamma et d'un manque total d'informations sur leur énergie.  Un compteur Geiger ne capture qu'un seul rayon gamma de plusieurs centaines, tandis qu'un détecteur à scintillation basse énergie fournit une efficacité de près de 100%.  En conséquence, avec un fond naturel avec les mêmes dimensions des détecteurs, lorsque le compteur Geiger ne donne que 10-15 impulsions par minute, le scintillateur donne le même nombre d'impulsions, mais <i>par seconde</i> .  Ainsi, afin d'avoir au moins une idée du débit de dose, nous devons passer au moins une minute sur un ensemble d'impulsions avec un compteur Geiger, et avec un scintillateur, nous pouvons recevoir des informations sur la situation de rayonnement chaque seconde.  Le détecteur à scintillation nous donne donc tout d'abord la vitesse de réaction aux faibles sources de radioactivité. <br><br>  De plus, le détecteur à scintillation a la propriété de proportionnalité.  Plus l'énergie des particules est élevée, plus l'amplitude de l'impulsion à la sortie du détecteur est grande.  À quoi ça sert?  Tout d'abord, c'est ainsi que nous obtenons des informations sur la source du rayonnement.  Chaque isotope radioactif a sa propre énergie caractéristique de rayonnement gamma (ou un ensemble d'énergies).  La méthode de spectrométrie gamma est basée sur cela.  Dans cet appareil, l'énergie moyenne absorbée par quantum sera affichée à l'écran (pas encore fait). <br>  Deuxièmement, si nous comptons simplement les impulsions sans tenir compte de l'énergie, nous obtenons une chose désagréable appelée «un mouvement avec rigidité».  Supposons que nous ayons étalonné notre radiomètre au césium 137.  Et puis ils se trouvaient dans un endroit infecté par l'américium-241.  L'énergie du quantum de césium 137 est de 667 keV, l'Amérique - 59 keV, c'est-à-dire plus d'un ordre de grandeur en moins.  Ainsi, avec le même nombre de particules capturées par le détecteur (et, par conséquent, avec les mêmes lectures de l'appareil), la dose absorbée sera inférieure de plus d'un ordre de grandeur.  Autrement dit, les mesures seront erronées.  Et pour que le radiomètre puisse mesurer correctement la dose à différentes énergies (c'est-à-dire être un <i>dosimètre</i> ), l'énergie de chaque quantum enregistré doit être prise en compte. <br><br><div style="text-align:center;"><img width="60%" src="https://habrastorage.org/webt/4z/xv/fh/4zxvfht8dlj0aaampaiqirumalo.jpeg"></div><br>  Les radiomètres-dosimètres à scintillation portables sont sur le marché depuis longtemps.  Mais pour la plupart, ce sont des appareils très coûteux à usage professionnel.  Je ne connais qu'un seul appareil, destiné à un usage domestique et amateur - c'est Atom Fast fabriqué par KB Radar.  Le reste - les appareils Polimaster, un certain nombre de sociétés étrangères - sont très chers. <br><br>  Dans cet appareil, je voulais obtenir ce qui suit: <br><br><ul><li>  Travail autonome sans référence à un smartphone ou autre appareil avec son propre écran (contrairement à Atom Fast); </li><li>  Essayez de faire une compensation de puissance; </li><li>  Enregistrement automatique des mesures sur support amovible, en perspective avec référence cartographique; </li><li>  Apparence culturelle, ne donnant pas particulièrement l'origine maison à toutes sortes de limiers et de gardiens différents. </li></ul><br>  En conséquence, le dispositif décrit a été obtenu.  Ce n'est pas encore fini, il y a encore assez de travail, surtout avec les logiciels. <br><br><h4>  Fonctions principales </h4><br>  Le radiomètre fonctionne dans l'un des deux modes: recherche et mesure.  En mode recherche, les relevés de l'appareil sont mis à jour toutes les secondes, tandis qu'en plus des relevés sous forme numérique, ils sont affichés dans un graphique.  En mode recherche, aucune attention n'est portée aux erreurs; dans ce mode, l'appareil est avant tout un indicateur.  L'écran affiche: le débit de dose actuel, le taux de comptage en impulsions par seconde (CPS), ainsi que le débit de dose moyen sur la dernière minute et la dose intégrale accumulée après la mise sous tension de l'appareil ou après une réinitialisation.  En mode mesure, au contraire, le temps de mesure est réglé par l'opérateur (en appuyant sur le bouton «Entrée» pour démarrer puis pour terminer la mesure), et l'erreur calculée est affichée à l'écran avec la valeur mesurée, et un mini-journal des derniers est affiché dans son «sous-sol» mesures.  De plus, en mode mesure, la première tentative a été faite de prendre en compte l'énergie des quanta et de compenser le «coup avec raideur».  Le mode de mesure est en cours de construction et il n'est pas encore dans la version de firmware donnée. <br><br>  Quel que soit le mode, le deuxième cycle de mesures se poursuit, les résultats étant enregistrés dans la RAM.  En particulier, pour cette raison, lors du passage en mode recherche, le graphique affiche les lectures qui étaient pendant le séjour de l'appareil en mode mesure, ainsi qu'en entrant dans le menu, etc.  Quel que soit le mode, l'alarme de dépassement des seuils fonctionne également. <br><br>  Il y a trois seuils dans ce dernier.  Les premier et deuxième traditionnels - sont réglés via le menu à la demande de l'opérateur et lorsqu'ils sont déclenchés par les résultats du deuxième cycle de comptage suivant, un signal sonore retentit.  En plus d'eux, il existe également un seuil adaptatif.  Il est automatiquement réglé à un niveau moyen par minute, réglé sur un, deux ou trois sigma (vous pouvez sélectionner dans les paramètres).  Si une opération sur ce seuil se produit dans le cycle suivant, la valeur du cycle précédent est prise pour le cycle suivant, de sorte qu'avec une augmentation lente mais régulière du rayonnement, une alarme stable est obtenue.  Par la suite, un journal des alarmes sera mis en place, mais jusqu'à présent ce n'est pas le cas. <br><br>  Il n'a pas encore été implémenté pour enregistrer les résultats de mesure sur une carte microSD, dont le connecteur est monté sur la carte du radiomètre.  Il prévoit également la connexion d'un module GPS, dont l'utilisation est également une question d'avenir. <br><br>  La commutation des modes et le changement rapide de certains paramètres se fait via les "touches de raccourci", le reste des opérations - en utilisant le menu.  L'entrée dans le menu, comme déjà mentionné, n'arrête pas le processus de mesure. <br><br><h4>  Plan général de l'appareil </h4><br>  Le radiomètre est monté dans un boîtier standard Chip-and-Dip Gainta G1389G mesurant 122x77x25 mm.  Sur le panneau supérieur, il y a un écran LCD couleur de 3,5 pouces avec une résolution de 480x320 pixels. Le module IHM Nextion NX4832T035 est utilisé comme écran, qui diffère des écrans conventionnels par son propre microcontrôleur, qui contient un programme prêt à l'emploi pour afficher les éléments d'interface, mais nous avons juste besoin d'envoyer des commandes pour les afficher, les supprimer ou les modifier - par exemple, changer l'un ou l'autre chiffre, dessiner un autre point sur le graphique ou changer la couleur de l'une ou l'autre inscription. Sous l'écran se trouve un clavier à cinq boutons.  Il reste de la place pour le récepteur GNSS et un détecteur à scintillation est situé à l'extrémité supérieure. <br><br><div style="text-align:center;"><img width="80%" src="https://habrastorage.org/webt/qp/9d/wo/qp9dwouqqw837oxu8itor67-2iu.jpeg"></div><br>  <i>Les chiffres rouges indiquent: 1 - module d'affichage, 2 - clavier, 3 - détecteur, 4 - carte analogique, 6 - carte système.</i> <i><br></i> <br>  Le circuit électronique de l'appareil (sans compter l'écran et le récepteur de navigation, ainsi que le clavier) est assemblé sur deux circuits imprimés.  Sur le premier, la partie analogique de l'appareil est montée, sur le second - tout le reste: un microcontrôleur avec un cerclage, un circuit de puissance et sa commutation, la charge de la batterie et une source haute tension pour le détecteur. <br><br><h4>  Détecteur </h4><br>  Un cristal de scintillation activé au thallium d'iodure de césium est utilisé comme détecteur dans le radiomètre.  Ce cristal a la propriété de la radioluminescence - des particules chargées et des photons à haute énergie (rayons X et gamma) excitent une lueur en lui, et la lumière est émise sous la forme d'un bref éclair de lumière d'environ une microseconde - scintillation.  Ce flash est trop faible pour être vu à l'œil nu ou détecté de la manière habituelle.  Les photocellules, les photodiodes et les photorésistances sont trop insensibles pour cela.  Pour évaluer l'ampleur de la catastrophe, je donnerai les chiffres suivants. <br><br>  Un rayon gamma d'une énergie de 1 MeV, complètement absorbé dans un cristal CsI (Tl), génère environ 40 000 photons de lumière verte.  Essayons d'attraper cette lumière avec une photodiode.  Supposons qu'ils montent tous sur une photodiode (en fait, c'est irréaliste et bon si seulement la moitié d'entre eux y montent).  Et disons que nous avons une photodiode idéale, avec une sortie quantique de 100%.  Cela signifie que chacun des photons créera une paire électron-trou dans la structure de la photodiode.  Et pour l'élan, nous obtenons 40 000 photoélectrons.  Et cette impulsion dure, comme nous le savons, 1 μs.  Donc, dans une seconde, nous aurons 4 ∙ 10 <sup>10</sup> photoélectrons.  La charge d'électrons est de 1,6 ∙ 10 <sup>-19</sup> C, et la charge 4 ∙ 10 <sup>10</sup> photoélectrons est de 6,4 ∙ 10 <sup>-9</sup> C, c'est-à-dire que l'intensité du courant que le flash à scintillation provoquera dans notre photodiode n'est que de quelques nanoampères!  Et si l'on se souvient que tous les photons ne pénètrent pas également sur la photodiode, et que son rendement quantique n'est pas de 100% ... Et d'ailleurs, le mégaélectron-volt est l'énergie d'un rayonnement gamma assez dur, et ce serait bien de voir des énergies beaucoup plus faibles.  En général, les photodiodes ne nous conviennent pratiquement pas ici.  Ils conviennent plutôt - mais avec beaucoup de difficulté. <br><br>  Habituellement, des multiplicateurs photoélectroniques étaient utilisés (et sont maintenant utilisés) pour capturer ces faibles impulsions lumineuses.  En eux, chaque photoélectron frappé hors de la photocathode se multiplie sur le système de dynode, donnant un gain de millions de fois, et l'impulsion de courant à son anode n'est plus nano, mais milliampères, et l'enregistrement d'une telle impulsion n'est plus difficile.  Mais les PMT sont un cylindre en verre fragile de taille solide, ce sont des kilovolts de puissance, qui nécessitent en outre une grande stabilité.  En général, il est mal représenté dans un appareil de poche. <br><br>  Heureusement, des photodétecteurs à semi-conducteurs sont maintenant disponibles et peuvent rivaliser en sensibilité avec les PMT.  Qui a dit photodiodes à avalanche?  Oui, c'est presque eux.  Seules les diodes à avalanche, bien qu'elles aient une amplification interne du photocourant due à la multiplication des avalanches de porteurs, présentent un certain nombre de problèmes technologiques qui ne permettent pas de réaliser une zone sensible d'un diamètre d'au moins quelques millimètres.  De plus, la diode à avalanche classique a un coefficient d'amplification d'avalanche sans astuces complexes de seulement 10-200, ce qui est minuscule par rapport à un gain d'un million caractéristique d'un PMT.  Tous ces inconvénients de la photodiode à avalanche sont supprimés dans le récent Si-PMT ou SiPM.  Ils sont essentiellement une matrice de nombreuses photodiodes à avalanche fonctionnant en mode pré-éclatement, dans lesquelles un seul photon est capable de provoquer le développement de la rupture d'avalanche.  Ce mode est similaire au fonctionnement du compteur Geiger.  Chacune des cellules a son propre schéma de suppression, grâce auquel la panne d'avalanche cesse immédiatement et la cellule redevient prête à enregistrer un nouveau photon.  Toutes les cellules (avec leurs schémas d'extinction) sont connectées en parallèle sur un cristal Si-PMT, et les impulsions de courant qui les traversent sont additionnées, de sorte que le courant moyen est proportionnel à l'illumination du cristal.  Et il est très simple d'utiliser un tel PMT au silicium - il suffit de lui appliquer une polarisation inverse - environ 28-29 V à travers une résistance de plusieurs kilo-ohms, d'où le signal est pris.  Rien de plus n'est nécessaire - ni une source d'alimentation en kilovolts, ni un diviseur pour les dynodes.  Et le Si-PMT lui-même est un petit carré de silicium mesurant 3x3 ou 6x6 mm.  Soit dit en passant, si vous supprimez la polarisation inverse ou si vous la réduisez à quelques volts, cela fonctionne comme une photodiode ordinaire. <br><br><div style="text-align:center;"><img width="40%" src="https://habrastorage.org/webt/z6/wb/nu/z6wbnuaixbonzr-lunbvzc7avmg.png"></div><br>  Ainsi, notre détecteur utilise des Si-PMT et un cristal CsI (Tl), entre lesquels une couche de lubrifiant optique est appliquée pour éliminer l'entrefer entre le cristal et la fenêtre du photodétecteur.  Et au-dessus du cristal et du Si-PMT sont recouverts de nombreuses couches d'un mince film fluoroplastique, appelé ruban FUM.  Ce revêtement a une réflectance diffuse très élevée.  Le détecteur est recouvert de ruban d'aluminium sur le dessus, offrant une protection contre la lumière extérieure et l'étanchéité - le cristal d'iodure de césium est extrêmement soluble dans l'eau et la moindre trace d'humidité pénétrant dans le détecteur le détruirait.  Heureusement, contrairement à son «relatif» - l'iodure de sodium, le CsI n'a pratiquement pas la propriété d'hygroscopicité - c'est-à-dire qu'il n'attire pas l'humidité de l'air.  Les cristaux d'iodure de sodium doivent être traités uniquement dans un environnement de gaz inerte absolument sec et placés dans de tels conteneurs hermétiquement fermés comme s'il serait nécessaire de créer un vide ultra-élevé en eux, et dans l'air ordinaire, ils se brouillent juste sous nos yeux.  Et vice versa, l'iodure de césium sous forme de monocristaux peut être facilement traité à l'air (par exemple, scié avec une scie à métaux ordinaire pour le métal et poncé avec une peau), en évitant uniquement les traces d'eau liquide et en se souvenant que le cristal contient du thallium extrêmement toxique.  Cependant, en raison de la petitesse de sa quantité, la toxicité aiguë (mais pas chronique!) Sera déterminée par l'iode et non par le thallium. <br><br>  Je ne donnerai pas de conseils sur l'auto-fabrication du détecteur, puisque je ne l'ai pas traité (le détecteur fini m'a été aimablement fourni par le développeur et fabricant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">KBRadar</a> en échange de quelques artefacts précieux pour les ingénieurs en électronique), je ne donnerai que ses paramètres.  Ce sont: la taille du cristal est de 8x8x50 mm, et le Si-PMT MicroFC 30035 de la société irlandaise SensL (maintenant une division d'On Semi) comme photodétecteur.  Divers conseils de fabrication sont disponibles en ligne.  Avec une légère augmentation de taille, vous pouvez prendre un cristal CsI (Tl) ou NaI (Tl) standard dans un emballage «natif» de petites tailles (10x40, 18x30 mm, etc.).  Cependant, plus la taille de la fenêtre de sortie est grande, plus le photodétecteur avec une taille de 3x3 mm fonctionnera, donc je recommande fortement de prendre un MicroFC 60035 plus grand (et beaucoup plus cher) avec le diamètre de la fenêtre de sortie plus grand. Soit dit en passant, les analogues Broadcom de ces photodétecteurs ne sont pas recommandé d'utiliser.  En plus du boîtier (WLCSP-16), qui est complètement indigeste pour le soudage à domicile, ils ont également un niveau de bruit presque plus élevé. <br><blockquote>  Les cristaux de CsI (Tl) ont été traités comme suit.  Dans tous les échantillons, la surface latérale a été matée.  Le meulage des extrémités a été effectué d'abord sur du papier de verre fin, puis sur du tissu de soie.  Pour un meilleur broyage, de l'oxyde de cérium dilué dans de l'alcool éthylique a été utilisé.  Lors du broyage, la transparence du verre a été atteinte.  S'il était nécessaire de réduire le cristal à de grandes épaisseurs, il était simplement scié avec un fil plongé dans l'eau.  Ensuite, le traitement a été effectué dans la même séquence. <br><br>  (Gorbunov V.I., Kuleshov V.K. Sur la question du choix des tailles optimales de scintillateurs pour la défectoscopie des produits // Izv. Tomsk Polytechnic Institute. 1965. V.138. S.42-48.) <br></blockquote><br><h4>  Partie analogique </h4><br><img src="https://habrastorage.org/webt/uj/s5/e2/ujs5e2ncmks99c7i1uoxktifnps.png"><br><br>  Son schéma est illustré dans la figure ci-dessus.  Il se compose des nœuds principaux suivants: <br><br><ul><li>  Circuit d'entrée; </li><li>  Comparateur; </li><li>  Détecteur de crête. </li></ul><br>  Le détecteur est connecté au connecteur d'entrée XP1.  La cathode Si-PMT - à la broche 3 (HV), l'anode - à la broche 1 (DET) et à la broche 2 (GND) l'écran métallique du détecteur est connecté - son emballage est fait de ruban adhésif en aluminium. <br><br>  Le circuit d'entrée se compose de la résistance de charge du détecteur R2 et de la résistance de limitation de courant R1, qui tentera de protéger le détecteur en cas de problème, comme par exemple en fournissant accidentellement une tension de polarisation inverse trop élevée ou en fournissant incorrectement une tension de polarité inversée, si le détecteur lui-même n'est pas correctement connecté.  Avec la capacité d'un PMT au silicium (environ 900 pF), ils forment des impulsions de tension avec un temps de montée d'environ 1 μs et un temps de descente d'environ 15 μs.  Avant de s'appliquer à l'entrée du comparateur, le signal passe à travers un condensateur de 470 pF, qui découplera le circuit en courant continu et, avec la résistance d'entrée du diviseur R3R5R6, raccourcit l'impulsion à 2-3 μs. <br><br>  Un microcircuit LMV7239 a été utilisé comme comparateur, combinant une faible consommation d'énergie avec une vitesse suffisamment élevée (&lt;100 ns) à de faibles tensions d'entrée différentielles.  Le diviseur de tension R3R5R6 et le circuit d'intégration R4C3 forment une tension de seuil "flottante", rendant le comparateur quelque peu insensible au courant d'obscurité du détecteur et aux variations du courant d'entrée avec la température.  La sensibilité du comparateur est contrôlée par la sélection de la résistance R5 dans la gamme de plusieurs dizaines d'Ohm.  Une impulsion rectangulaire de polarité négative est formée à la sortie du comparateur.  Le bord de fuite de cette impulsion peut vibrer légèrement en raison du bruit du détecteur, mais une tentative de se débarrasser de ce rebond en introduisant une hystérésis a entraîné une diminution de la sensibilité et, en général, des résultats pires.  Cette impulsion déclenche le détecteur de crête et est envoyée à la partie numérique, où elle génère une interruption du microcontrôleur. <br><br>  Un seul coup sur la minuterie intégrée DA2 (LMC555CM, en fait - une minuterie conventionnelle 555, uniquement en version CMOS) génère une impulsion (polarité positive) d'une durée de 10 μs au bord d'attaque de l'impulsion à la sortie du comparateur (spécifié par la chaîne de synchronisation R7C6).  Cette impulsion est inversée à l'aide de DD1 (un seul onduleur TinyLogic dans le boîtier SOT23-5) et appliquée à la touche DD2, qui court-circuite le condensateur du détecteur de crête C12 en l'absence d'impulsions d'entrée.  Au moment de l'arrivée de l'impulsion, le court-circuit est supprimé par les 10 μs indiqués. <br><br>  Le détecteur de crête est construit selon le circuit non inverseur classique.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les inconvénients de ce schéma sont bien connus, mais dans ce mode de réalisation, une chose intéressante se pose. Le fait est que, en prévision d'une impulsion, la boucle de rétroaction de DA2.1 est rompue et l'ampli-op au moment de l'arrivée de l'impulsion d'entrée doit être dans une condition de surcharge, dont la sortie prend beaucoup de temps, et l'état de l'amplificateur avant l'impulsion n'est pas du tout déterminé (à partir de laquelle tous inconvénients des détecteurs de pointe de ce type). D'autre part, la tension à l'entrée non inverseuse au moment précédent est proche de zéro et le condensateur est court-circuité, de sorte que la tension à l'entrée inverseuse est également nulle. Au moment de l'arrivée de l'impulsion, la sortie de l'ampli-op à ce moment est en mode court-circuit et les circuits de protection de celui-ci couvrent l'ampli-op avec un circuit de rétroaction interne limitant le courant de sortie! De ce fait, l'étage de sortie de l'amplificateur n'est plus en mode limitant,mais il s'avère être forcé en mode linéaire, dont il sort déjà facilement et rapidement. Par conséquent, un tel détecteur de crête fonctionne beaucoup plus rapidement que s'il était réinitialisé à la fin de l'impulsion en court-circuitant le condensateur C12.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une condition pour le fonctionnement normal de ce circuit est l'absence d'une composante constante dans le signal du détecteur, ce qui met immédiatement l'ampli-op en mode surcharge, et un courant important traversera la diode et un condensateur court-circuité (limité, cependant, par le circuit de rétroaction intégré mentionné, de sorte que rien ne brûle). Par conséquent, l'entrée et voici le condensateur d'isolement C9. La résistance R8 assure la décharge de ce condensateur s'il se charge soudainement (sinon il n'a nulle part où se décharger - l'impédance d'entrée du DA2 approche du téraom). En son absence, des tours amusants sont observés lorsque le circuit fonctionne normalement pendant un certain temps, puis s'arrête soudainement et rétablit le travail après un certain temps.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les paramètres du condensateur du détecteur de crête dépendent généralement directement de son bon fonctionnement. Habituellement, ils mettent un film non polaire, souvent un fluoroplastique, car une faible absorption avec une faible fuite est nécessaire. Ici, les exigences sont atténuées par le fait qu'il est constamment court-circuité en l'absence d'impulsion (qui supprime l'effet d'absorption) et par le fait que le temps de stockage de charge n'est que de 10 μs, donc, un condensateur en céramique de haute qualité de taille 1206, nécessairement avec un diélectrique de type NP0, est tout à fait applicable ici. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un tampon à haute résistance d'entrée est monté sur le deuxième ampli-op du microcircuit DA2, ce qui permet de supprimer la tension du condensateur du détecteur de crête sans la décharger, dont l'amplification est donnée par les résistances R9 et R10.</font></font><br><br><div style="text-align:center;"><img width="60%" src="https://habrastorage.org/webt/y7/j_/dl/y7j_dlhv35lhusnptfshpgfeyfg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce circuit, lorsqu'une impulsion est reçue du détecteur à l'entrée, génère une impulsion de niveau zéro à la sortie TRIG d'une durée de 2 à 4 μs et une impulsion proche du rectangulaire d'une durée de 10 μs avec un niveau proportionnel à l'amplitude de l'impulsion reçue du détecteur à la sortie SP. Pour la plupart de ces 10 μs, le niveau de tension reste constant, ce qui permet de le mesurer plusieurs fois à l'aide de l'ADC intégré du microcontrôleur, et le signal TRIG doit d'abord «réveiller» le MC et démarrer le gestionnaire d'interruption dans lequel cette mesure (avec comptage d'impulsions) mis en œuvre.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour le fonctionnement, le circuit nécessite deux tensions d'alimentation: 3,3 - 5 V pour le fonctionnement du circuit et une tension "haute" de 28-29 V pour polariser le détecteur. La consommation de courant est d'environ 2,5 mA. Selon le circuit «haute tension», la consommation de courant dépend de la charge du détecteur et aux niveaux de rayonnement de fond est de plusieurs microampères. Il est assemblé sur une carte de circuit imprimé d'une taille de 64x22 mm en utilisant un montage en surface.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après l'assemblage, tout devrait fonctionner immédiatement, mais lors de la vérification, vous devez vous rappeler que la sortie TRIG est une sortie de comparateur à très haute vitesse et est capable de générer de puissantes interférences. </font><font style="vertical-align: inherit;">Grâce à eux, lorsqu'ils sont connectés (par exemple, à un oscilloscope) avec un long conducteur non blindé, tout sera excité. </font><font style="vertical-align: inherit;">Pour la même raison, sur ma version développée de la carte, il y a un micro de ce signal au signal TRIG sous la forme d'une «sonnerie» haute fréquence. </font><font style="vertical-align: inherit;">Lors de l'assemblage du périphérique fini, la carte doit être connectée à la carte système avec un faisceau de longueur minimale dans lequel les lignes TRIG et SP sont blindées séparément, par exemple, à l'aide d'un tissu de nickel adhésif mis à la terre sur un fil commun.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Carte mère </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Les nœuds principaux suivants y sont situés: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Alimentations et leur circuit de commutation, y compris le circuit de charge de batterie; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le microcontrôleur et tout ce dont vous avez besoin pour son travail; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Circuits auxiliaires pour clavier, écran, carte SD, etc. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le schéma d'alimentation (je m'excuse immédiatement de ne pas avoir mis les autres schémas aux normes et pris directement d'Eagle) est illustré dans la figure ci-dessous. </font></font><br><br><img src="https://habrastorage.org/webt/gi/dx/rg/gidxrgbeospmec3wrlqzq58mfsq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'appareil est alimenté par une batterie lithium-ion monocellulaire connectée au connecteur X1. J'ai utilisé une batterie lithium-polymère "Robiton" à 2,3 Ah *, en principe, n'importe quelle batterie de smartphones, etc. fera l'affaire. à une capacité similaire. Sur DA1, un chargeur est construit, fonctionnant à partir d'un port USB. Ici, sans aucune caractéristique, le tout sur la fiche technique du LTC4054-4.2. Le courant de charge peut être augmenté de 350 à 700 mA en tirant le plus bas selon le circuit de sortie de la résistance R4 vers le fil commun en utilisant le port MK. Ceci est alors nécessaire afin de ne pas dépasser les 500 mA autorisés du port USB et en même temps permettre à la batterie de se charger plus rapidement si l'appareil est connecté à une carte réseau. En utilisant DA2, le MK apprend que la batterie est morte et éteint l'appareil, et le diviseur R5R6C3 vous permet de mesurer la tension sur celle-ci (connectée à l'une des entrées analogiques du MK).La ligne CHRG de DA1 permet au MK de contrôler l'état du chargeur selon un algorithme délicat: lorsqu'il n'y a pas de charge, il a un zéro, une unité apparaît dans le processus de charge qui est facilement attirée à zéro, et lorsqu'elle est complètement chargée, elle cesse d'être attirée et reste une même avec une charge de plusieurs kilogrammes. Au lieu de DA1, en plus du cher LTC4054-4.2 d'origine, son clone de ST - STC4054 est également applicable. Je mets en garde contre l'utilisation du LTC4054 chinois avec Aliexpress: soit ils ne fonctionnent pas du tout, soit ils ne fonctionnent pas comme ils le devraient, tuant la batterie et créant une menace d'explosion. C'est pour cette raison que j'ai refusé d'utiliser le TP4056 "populaire": l'original n'a pas été produit depuis longtemps et il est impossible de l'obtenir, mais les clones non plus n'ont pas de précharge, alors la tension est de 4,2 V - presque un volt, puis la protection thermique est déracinée ... En général ,la seule copie fonctionnant normalement de ce microcircuit que j'ai est sur un petit foulard pour charger le lithium que j'ai acheté une fois. Mais c'est dommage: elle a une indication plus simple des modes, et le courant de charge maximum est plus grand, et le refroidissement à travers le SO-8 avec l'abdomen est meilleur que via les bornes SOT-23-5.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le circuit VT1VD1R7 déconnecte la charge de la batterie et la met sous tension depuis le port USB lorsque la tension apparaît dessus, afin de ne pas interférer avec le DA1 pour maintenir correctement le mode de charge et détecter sa fin. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viennent ensuite les convertisseurs pour obtenir les bonnes tensions d'alimentation. Le microcircuit DA3 élève la tension de la batterie à 5 V, l'affichage est alimenté par eux, ce qui augmente le convertisseur pour obtenir 28 V pour le détecteur, et à travers le stabilisateur linéaire - une carte analogique. MK peut payer tous ces consommateurs en mettant zéro sur la ligne POWER_ON. L'écran est masqué séparément par le commutateur DA6.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour obtenir une haute tension, un convertisseur élévateur sur le DA5 est assemblé. La version à tension la plus élevée du convertisseur DC-DC LM2731 a été sélectionnée. Initialement, il était censé utiliser le MT3608 chinois, qui était beaucoup plus économique dans ce circuit, mais il a montré une très faible fiabilité avec une tension de sortie de 28-29 V (en fait, selon la fiche technique, sa tension de sortie maximale autorisée est de 28 V, ce n'est donc pas surprenant). Lors de la configuration de cette section du circuit, il convient de garder à l'esprit que lorsque le bras inférieur du diviseur (R12R13) se casse, la tension de sortie saute à 50-60 V, assommant le condensateur C20, qui est dangereux avec une blessure à l'œil (ils explosent très cool!). Et si R11 est accidentellement court-circuité, l'entrée FB (broche 3 de DA5) s'éteint avec le même effet (en plus, vous devrez changer la puce).À cet égard, une attention particulière doit être portée à la qualité de la résistance d'accord et à l'installation correcte. Un filtre de sortie est nécessaire pour supprimer l'ondulation à la sortie de cette conversion. Le convertisseur est fermé par un écran en étain, soudé sur les bords à une décharge en terre sur la carte.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au lieu de DA3, comme l'a montré la pratique, avec la correction de la carte, vous pouvez installer un interrupteur similaire à DA6 (en conséquence, vous n'avez pas besoin d'une self et d'une diode, ainsi que de deux résistances R9 et R10). Cela rendra l'appareil un peu plus économique. Ensuite, le stabilisateur DA4 doit être installé non pas à 3,3 V, mais à 3,0 pour que l'alimentation analogique soit stabilisée sur toute la plage de décharge de la batterie. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le convertisseur DA7 fonctionne tout le temps, y compris lorsque l'appareil est éteint, fournissant un MK de 3,3 V. Au ralenti, il ne consomme que quelques dizaines de microampères, de sorte que l'appareil éteint ne décharge presque pas une batterie de 2,3 Ah. Malheureusement, le STM32L151 n'a pas d'entrée séparée pour alimenter le RTC, c'est pourquoi j'ai dû prendre une telle décision (ou je devrais compliquer la commutation).</font></font><br><br><img src="https://habrastorage.org/webt/dn/co/ot/dncootnvdgigasbfknafqpetn58.png"><br><div style="text-align:center;"><img width="60%" src="https://habrastorage.org/webt/lk/59/vz/lk59vz_km8wsoj5l0aaj7odcfri.png"></div><br>  Et c'est le reste des circuits de la carte système. <br><br>  Le cœur du système est MK STM32L151CBT6A (contrairement à l'analogue sans index A, il a deux fois plus de RAM - 32 kB).  Presque tous les 48 de ses résultats étaient impliqués.  Les exceptions étaient PA9 et PA10, ce sont aussi les RxD et TxD du premier USART, juste au cas où j'aurais fait des plots de contact pour eux, qui seront faciles à souder à l'avenir.  Parmi les fonctionnalités, voici un système légèrement délicat pour déterminer l'état de la sortie du CHRG DA1 avec l'inclusion d'une suspension de PB14, lorsque vous devez déterminer si la batterie est en charge ou a déjà été chargée, et le tweeter est connecté en phase via l'onduleur DD2.  Mon erreur est indiquée dans le diagramme: lorsque le MK est mis en mode STANDBY, l'entrée de cet onduleur est suspendue dans l'air, ce qui entraîne une consommation supplémentaire importante et même une génération.  Ici, vous devez tirer cette entrée au sol via une résistance de 100 kilos.  Vous devez faire attention à la qualité des résonateurs à quartz, en particulier ZQ1.  Avec le quartz d'horloge standard de 12 pF, l'horloge du contrôleur ne fonctionnera pas normalement, vous devrez rechercher un quartz rare avec une capacité de charge de 7 pF.  Pour ZQ2 MK est plus fidèle, mais avec le premier quartz chinois rencontré, ici vous pouvez rattraper un manque de démarrage ou travailler sur la mauvaise fréquence.  Malheureusement, la ligne STM32Lxx (c'est elle) est très exigeante sur la qualité du quartz. <br><br>  Le clavier est connecté de manière assez standard - les lignes de port sont tirées par des résistances externes R17-R21 à l'alimentation et pressées au sol avec des boutons.  Sur la carte du clavier pour supprimer le bavardage, les chaînes RC sont soudées en parallèle avec les boutons.  Lorsque vous appuyez sur le bouton On à l'aide de l'onduleur DD3, un signal de haut niveau est généré, qui est envoyé à l'entrée WKUP et réveille le MK s'il est à l'état STANDBY.  Pour éviter toute mise en marche accidentelle contre les interférences, la chaîne R22C23 est installée.  Les lignes de clavier sont connectées à des lignes de port consécutives, ce qui vous permet de le lire dans une seule commande de lecture de port. <br>  Une carte microSD est connectée en mode SPI en raison de l'absence d'un contrôleur SDIO dans ce MK.  Le port USB est connecté de la manière la plus simple via deux résistances dans les lignes DP et DM.  Les STM32 MK eux-mêmes sont assez «en chêne» en termes de statique, et il n'y aura pas d'autres communications externes (à l'exception du firmware SWD) pour le radiomètre, vous ne pouvez donc pas faire de protection de port sérieuse contre les surtensions. <br><br>  Le circuit de puissance de MK est tiré d'une fiche technique et n'a aucune fonctionnalité.  Lors du réglage de l'inductance L6, j'ai ajouté séquentiellement une résistance de 100 ohms, ce qui a considérablement réduit les fluctuations de tension sur le VDDA.  La capacité de C30 peut être augmentée à 1 μF en soudant en parallèle (sur les mêmes sites) un autre condensateur de 0,01 μF. <br><br>  Lorsque l'alimentation est appliquée, la source 3,3 V commence immédiatement à fonctionner, générant de l'énergie pour le MK.  Les autres sources d'alimentation sont coupées.  Après avoir démarré le MC et initialisé les périphériques, il lève la ligne POWER_ON (port PA15), démarre la source 5 V et alimente la partie analogique et la source haute tension.  Pour allumer l'écran, vous devez augmenter la ligne DISP_ON (PA8), de même, pour allumer le module de navigation par satellite, la ligne GPS_EN (PA1) est élevée, mais contrairement à l'écran, il n'y a pas d'interrupteur d'alimentation spécial pour cela, l'entrée de contrôle de puissance du récepteur lui-même est utilisée (elle devrait l'être).  L'écran s'éteint lorsque l'appareil fonctionne simplement en lui coupant l'alimentation. <br><br>  Les impulsions de comptage (TRIG) du bloc analogique sont envoyées à la ligne PB0, provoquant une interruption sur le front descendant.  Les impulsions transportant des informations sur l'énergie des particules (SP) sont envoyées au 21ème canal de l'ADC.  La durée du «plateau» de cette impulsion, pendant laquelle le niveau reste inchangé, est de près de 10 μs, ce qui permet de faire plusieurs conversions ADC après le «réveil» du MC et entre dans l'interruption.  La résistance R34 supprime la "sonnerie". <br><br>  La carte mère a une taille de 64x80 mm, conçue pour installer la plupart des résistances et des condensateurs de taille 0603. La plupart des éléments sont installés sur un côté, à l'exception de trois condensateurs dans le circuit d'alimentation du MK et de deux résistances qui forment le diviseur de tension de la batterie pour la mesurer. <br><br><h4>  Conseils de montage et de mise en service </h4><br>  La carte analogique commence à fonctionner immédiatement si elle est assemblée sans erreur.  Dans la version originale, il n'y avait pas d'éléments R8 et C9 sur la carte, sans eux le circuit fonctionnait parfaitement depuis le générateur, mais l'amplitude d'impulsion à la sortie SP était aléatoire et indépendante de l'amplitude d'impulsion à l'entrée.  L'introduction de ces éléments a corrigé la situation. <br><br>  Si la partie analogique de l'appareil est excitée, il n'y a qu'une seule difficulté à cela - blinder la ligne TRIG et minimiser la longueur du câble de connexion.  La connexion au détecteur doit également être la plus courte et blindée. <br><br>  R5 doit être sélectionné par le passage fiable d'impulsions données par le détecteur avec le médicament américium-241 en l'absence de réaction de comparaison au bruit d'obscurité du Si-PMT à la température de fonctionnement maximale. <br><br>  La carte analogique doit être soigneusement et soigneusement éliminée de la moindre trace de flux, en particulier dans la zone du détecteur de pic, et elle doit être bien séchée puis réchauffée à 150 ° C.  La résistance à l'isolement, même en gigaoctets, aggravera considérablement son travail et le rendra instable. <br><br>  Commencez à construire la carte système à partir de sources d'alimentation.  Commencez par collecter une source 3,3 V et assurez-vous qu'elle fonctionne.  Ensuite - une source 5 V (sans oublier de connecter temporairement POWER_ON au bus + 3,3 V), puis une haute tension.  Avant de l'allumer pour la première fois, réglez R13 en position haute dans le diagramme et ne soudez pas C20 tant que la tension n'est pas réglée.  Réglez la tension sur 28 V sur la source haute tension. Assurez-vous que le chargeur fonctionne correctement en surveillant la tension de la batterie pendant la charge.  Après avoir vérifié les performances et la tension correcte sur tous les bus d'alimentation, vous pouvez souder le MK et tous les détails qui s'y rapportent.  Pour vérifier le MK, il est conseillé d'écrire et de flasher du Blink dessus.  N'oubliez pas de flasher et d'afficher. <br><br>  Le processus d'étalonnage sera décrit dans le prochain numéro. <br><br><h4>  * * * </h4><br>  Ce n'est que la première partie de l'article.  Le second décrira la partie logicielle et la procédure d'étalonnage.  En attendant, pour ceux qui ne peuvent pas attendre - des <i>documents</i> . <br><br>  Les fichiers Eagle avec des schémas de circuits et des dispositions de circuits imprimés, ainsi que la version stable actuelle du micrologiciel et de l'affichage MK, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peuvent être téléchargés à partir de Google Drive à ce lien.</a>  Seul le mode de recherche fonctionne dans ce firmware, et le modèle actuel à la place du menu.  Je ne suis pas encore prêt à mettre en place un firmware plus fonctionnel. <br><br>  Veuillez noter: les désignations de position dans les circuits de la carte analogique dans la figure de l'article et dans le projet Eagle ne coïncident pas, il n'y a pas non plus d'éléments R8 et C9 (selon le schéma de l'article) que j'ai installés avec un scalpel sur la carte finie. <br><br>  Le câblage des cartes est conçu pour leur fabrication en usine, pour LUT, etc.  il devra être recyclé (ça fait mal pas mal de vias).  Oui, j'ai des planches toutes faites.  Si quelqu'un en a besoin - écrivez un accord personnel. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456878/">https://habr.com/ru/post/fr456878/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456866/index.html">Quand ils fabriqueront des «cheburnet» à partir d'Internet: aperçu du projet</a></li>
<li><a href="../fr456868/index.html">Nouveau gestionnaire de connexion à distance 3CX SBC dans la version bêta de la mise à jour 2 V16</a></li>
<li><a href="../fr456870/index.html">Comment gagner de l'argent sur des actions sans spéculation: 5 entreprises avec des dividendes élevés</a></li>
<li><a href="../fr456872/index.html">Contrôle des appareils électroniques à la frontière - un besoin ou une violation des droits de l'homme?</a></li>
<li><a href="../fr456876/index.html">Certification ISTQB: avantages et caractéristiques</a></li>
<li><a href="../fr456880/index.html">Pourquoi Math.Round ouvre une fenêtre d'impression à partir d'un navigateur dans Try .NET</a></li>
<li><a href="../fr456886/index.html">Liste de contrôle ASO: comment ne rien manquer</a></li>
<li><a href="../fr456888/index.html">Comment les satellites fondent dans l'atmosphère terrestre</a></li>
<li><a href="../fr456890/index.html">Télécommande IR sur stm32</a></li>
<li><a href="../fr456892/index.html">Comment rechercher les vulnérabilités des applications Web: comparer huit scanners populaires</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>