<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ¥ ‚õ∞Ô∏è üìî Recursos de Middleware e Pipeline no Laravel üîö üìè üëèüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Laravel √© um sistema verdadeiramente grande e complexo que tenta resolver a maioria das tarefas di√°rias de um desenvolvedor web da maneira mais eleg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Recursos de Middleware e Pipeline no Laravel</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429214/"><img src="https://habrastorage.org/webt/gq/9y/lj/gq9yljr_yvia5supmq_lo1ify0a.jpeg"><br><br>  <b>O Laravel</b> √© um sistema verdadeiramente grande e complexo que tenta resolver a maioria das tarefas di√°rias de um desenvolvedor web da maneira mais elegante e coletar o maior n√∫mero poss√≠vel de ferramentas e, o mais importante, com o m√°ximo de interface humana poss√≠vel. <br><br>  E hoje vamos nos concentrar em uma dessas ferramentas, ou melhor, no seu uso e implementa√ß√£o pelo programador.  A falta de documenta√ß√£o completa, bem como a falta de artigos em russo e um n√∫mero muito pequeno de artigos estrangeiros, levaram-me a decidir revelar um certo v√©u de sigilo sobre esse recurso interessante da estrutura e escolher esse t√≥pico como meu primeiro artigo sobre Habr√©. <br><a name="habracut"></a><br><h4>  Middleware </h4><br><blockquote>  Este artigo pressup√µe que o leitor j√° esteja familiarizado com o uso b√°sico dessa funcionalidade da estrutura, portanto, n√£o vou me deter neste ponto por muito tempo. </blockquote><br>  Pronto para uso, o Laravel nos fornece uma funcionalidade bastante poderosa para filtrar solicita√ß√µes HTTP recebidas em nosso aplicativo.  Estamos falando do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Middleware</a> amado (ou n√£o) de todos - o desenvolvedor encontra essas classes rapidamente no caminho para dominar o Laravel, enquanto l√™ a se√ß√£o "No√ß√µes b√°sicas" da documenta√ß√£o oficial, e isso n√£o √© surpreendente - o Middleware √© um dos principais e mais importantes tijolos com base nos quais todo o sistema √© constru√≠do. <br><br>  Exemplos de casos de usu√°rio padr√£o desse componente no Laravel s√£o: <i>EncryptCookies / RedirectIfAuthenticated / VerifyCsrfToken</i> e, como exemplo de uma implementa√ß√£o personalizada, voc√™ pode citar a localiza√ß√£o de aplicativos de middleware (definindo a localiza√ß√£o necess√°ria com base em determinados dados da solicita√ß√£o) antes de transferir a solicita√ß√£o ainda mais. <br><br><h2>  Mais fundo no abismo </h2><br><h4>  Desista da esperan√ßa de que todos venham aqui </h4><br>  Bem, agora que os principais pontos terminaram - podemos mergulhar em um lugar terr√≠vel para muitos - em alfa e √¥mega, o come√ßo e o fim - nas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fontes</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Laravel</a> .  Aqueles que tentaram fechar o artigo imediatamente - n√£o se apresse.  De fato, no c√≥digo-fonte dessa estrutura, quase n√£o h√° nada realmente complicado do lado conceitual - os criadores est√£o claramente tentando n√£o apenas criar uma interface clara e conveniente para trabalhar com sua ideia, mas tamb√©m est√£o tentando fazer o mesmo diretamente no n√≠vel do c√≥digo-fonte, o que n√£o pode para n√£o agradar. <br><br>  Tentarei explicar o conceito de como o <i>Middleware</i> e o <i>Pipeline funcionam</i> no n√≠vel do c√≥digo e da l√≥gica o mais simples e acess√≠vel poss√≠vel, e tentarei n√£o entrar nisso - onde isso n√£o √© necess√°rio na estrutura do artigo.  Portanto, se h√° pessoas nos coment√°rios que conhecem todas as linhas de origem de cor, pe√ßo que se abstenha de criticar minha narra√ß√£o superficial.  Mas quaisquer recomenda√ß√µes e corre√ß√µes de imprecis√µes s√£o bem-vindas. <br><br><h4>  Middleware - atrav√©s das barricadas </h4><br>  Acredito que aprender qualquer coisa √© sempre mais f√°cil quando bons exemplos s√£o fornecidos.  Portanto, convido voc√™ e eu a estudar esta besta misteriosa sob o nome <i>Pipeline</i> .  Se esses homens valentes realmente existirem, antes de continuar lendo, precisaremos instalar uma vers√£o vazia do projeto Laravel 5.7 - a vers√£o deve-se apenas ao fato de ser a √∫ltima no momento da escrita, todas as op√ß√µes acima devem ser id√™nticas pelo menos √† vers√£o 5.4.  Quem quer apenas conhecer a ess√™ncia e as conclus√µes do artigo pode pular esta parte com seguran√ßa. <br><br>  O que poderia ser melhor do que estudar o comportamento de um componente, exceto estudar o comportamento j√° incorporado no sistema?  Talvez algo possa, mas faremos sem complica√ß√µes desnecess√°rias e iniciaremos nossa an√°lise com o Middleware padr√£o - ou seja, com o mais simples e mais compreens√≠vel de toda a turma - <b>RedirectIfAuthenticated</b> : <br><br><div class="spoiler">  <b class="spoiler_title">RedirectIfAuthenticated.php</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedirectIfAuthenticated</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**      * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Http\Request $request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string|null $guard * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request, Closure $next, $guard = null)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Auth::guard($guard)-&gt;check()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect(<span class="hljs-string"><span class="hljs-string">'/'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($request); } }</code> </pre> <br></div></div><br>  Em qualquer classe cl√°ssica de middleware, existe um m√©todo principal que deve processar diretamente a solicita√ß√£o e passar o processamento para o pr√≥ximo da cadeia - no nosso caso, esse √© o m√©todo <i>handle</i> .  Nesta classe em particular, o processamento da solicita√ß√£o √© bastante simples - "se o usu√°rio estiver autorizado, redirecione-o para a p√°gina principal e, assim, encerre a cadeia". <br><br>  Se observarmos o registro deste Middleware em <i>app / Http / Kernel.php</i> , veremos que ele est√° registrado no 'route middleware'.  Para descobrirmos como o sistema funciona com esse middleware, vamos para a classe da qual nosso <i>aplicativo / Http / Kernel</i> herda - e herda da classe <i>Illuminate \ Foundation \ Http \ Kernel</i> .  Nesta fase, abriremos diretamente os port√µes para o <s>inferno, o</s> c√≥digo fonte de nossa estrutura, ou melhor, para a parte mais importante e principal dela - para o n√∫cleo do trabalho com HTTP.  A prop√≥sito, quem se importa - o Laravel √© baseado em muitos componentes do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Symfony</a> , especificamente nesta parte - no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://github.com/symfony/">HttpFoundation</a> e no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://github.com/symfony/">HttpKernel</a> . <br><br>  A defini√ß√£o e implementa√ß√£o do nosso middleware no construtor do kernel √© a seguinte: <br><br><div class="spoiler">  <b class="spoiler_title">Illuminate \ Foundation \ Http \ Kernel (aplicativo $ app, roteador $ roteador)</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/**    HTTP Kernel . * Create a new HTTP kernel instance. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Contracts\Foundation\Application $app * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Routing\Router $router * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Application $app, Router $router)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;app = $app; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;router = $router; $router-&gt;middlewarePriority = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;middlewarePriority; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;middlewareGroups <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $key =&gt; $middleware) { $router-&gt;middlewareGroup($key, $middleware); } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;routeMiddleware <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $key =&gt; $middleware) { $router-&gt;aliasMiddleware($key, $middleware); } }</code> </pre><br></div></div><br>  O c√≥digo √© bastante simples e direto - para cada middleware na matriz, o registramos com um alias / index em nosso roteador.  Os m√©todos aliasMiddleware e middlewareGroups da nossa classe Route est√£o apenas adicionando middleware a uma das matrizes do objeto roteador.  Mas isso n√£o est√° inclu√≠do no contexto do artigo, ent√£o pularemos este momento e seguiremos em frente. <br><br>  O que realmente interessa √© o m√©todo <b>sendRequestThroughRoute</b> , que literalmente traduz como <b>enviar uma</b> <b>solicita√ß√£o por meio da rota</b> : <br><br><div class="spoiler">  <b class="spoiler_title">Illuminate \ Foundation \ Http \ Kernel :: sendRequestThroughRouter ($ request)</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/**     middleware / router. * Send the given request through the middleware / router. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Http\Request $request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \Illuminate\Http\Response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendRequestThroughRouter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// *    * return (new Pipeline($this-&gt;app)) -&gt;send($request) -&gt;through($this-&gt;app-&gt;shouldSkipMiddleware() ? [] : $this-&gt;middleware) -&gt;then($this-&gt;dispatchToRouter()); }</span></span></code> </pre><br></div></div><br>  Como par√¢metro, este m√©todo recebe uma solicita√ß√£o.  Neste ponto, devemos examinar novamente nosso c√≥digo <b>RedirectIfAuthenticated</b> .  Tamb√©m recebemos uma solicita√ß√£o no m√©todo <i>handle</i> do nosso middleware; precisaremos dessa nota um pouco mais tarde. <br><br>  O c√≥digo acima possui uma interface muito clara e leg√≠vel - <i>"Pipeline", que envia uma solicita√ß√£o atrav√©s de cada um dos middlewares registrados e depois a "transfere" para o roteador</i> .  Charmoso e maravilhoso.  Penso que, nesta fase, n√£o tentaremos decompor mais esta se√ß√£o do c√≥digo, apenas descreverei brevemente o papel desta se√ß√£o em todo o sistema: <br><br>  Antes de uma solicita√ß√£o entrar no seu controlador, muitas a√ß√µes passam, desde a simples an√°lise do pr√≥prio URL at√© a inicializa√ß√£o da classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Request</a> .  O middleware tamb√©m est√° envolvido nessa <b>cadeia de</b> a√ß√£o.  As pr√≥prias classes de middleware implementam o (quase) padr√£o de design da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cadeia de Responsabilidade</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ou Cadeia de Responsabilidade</a> , de modo que cada classe espec√≠fica de midleware √© apenas um elo na cadeia. <br><br>  Acima, n√£o acabamos de retornar √† nossa classe <b>RedirectIfAuthenticated</b> originalmente considerada.  A solicita√ß√£o est√° "circulando" ao longo da cadeia, incluindo a que passa por tudo o necess√°rio para a rota do middleware.  Esse momento nos ajudar√° a trabalhar com nossos pr√≥prios elos em nossa pr√≥pria cadeia, mais sobre isso mais tarde. <br><br><h3>  Gasoduto - Esgoto de nossa aplica√ß√£o </h3><br>  Um exemplo da implementa√ß√£o do <i>Pipeline</i> que vimos acima.  Mas o objetivo do artigo n√£o era apenas explicar a opera√ß√£o desse componente no n√≠vel de integra√ß√£o com o Laravel, mas tamb√©m explicar o princ√≠pio b√°sico de trabalhar com essa classe em nosso pr√≥prio c√≥digo. <br><br>  A pr√≥pria classe pode ser encontrada por sua defini√ß√£o completa com espa√ßo para nome: <blockquote>  Iluminar \ Pipeline \ Pipeline </blockquote><br>  Pode haver muitas aplica√ß√µes para esse componente, dependendo da tarefa espec√≠fica que voc√™ precisa resolver, mas uma das motiva√ß√µes mais √≥bvias √© o requisito de criar sua pr√≥pria cadeia de manipuladores de solicita√ß√µes, o que n√£o interfere nos processos de todo o sistema e √© determinado exclusivamente no n√≠vel da l√≥gica de neg√≥cios.  Al√©m disso, a interface da classe possui um n√≠vel suficiente de abstra√ß√£o e funcionalidade suficiente para implementar diferentes tipos de filas. <br><br><h4>  Exemplo de implementa√ß√£o no Laravel </h4><br>  Implementamos a cadeia de consulta mais simples e remota da realidade.  Usaremos a string "HELLO WORLD" como dados e, com a ajuda de dois manipuladores, formaremos a string "Hello User".  O c√≥digo √© intencionalmente simplificado. <br><br>  Antes da implementa√ß√£o imediata de nosso pr√≥prio "Pipe", precisamos identificar os elementos desse pipe.  Os elementos s√£o escritos por analogia com o middleware: <br><br><div class="spoiler">  <b class="spoiler_title">Definindo manipuladores</b> <div class="spoiler_text">  StrToLowerAction.php: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Closure</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StrToLowerAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $content * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $content, Closure $next)</span></span></span><span class="hljs-function"> </span></span>{ $content = strtolower($content); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($content); } }</code> </pre><br>  SetUserAction.php: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Closure</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SetUserAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $content * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $content, Closure $next)</span></span></span><span class="hljs-function"> </span></span>{ $content = ucwords(str_replace(<span class="hljs-string"><span class="hljs-string">'world'</span></span>, <span class="hljs-string"><span class="hljs-string">'user'</span></span>, $content)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($content); } }</code> </pre><br></div></div><br>  Em seguida, criamos um "pipeline", determinamos que tipo de dados queremos enviar sobre ele, determinamos atrav√©s de qual cole√ß√£o de processadores queremos enviar esses dados e tamb√©m definimos um retorno de chamada, que recebe como argumento que nossos dados passaram por toda a cadeia.  Caso os dados em toda a cadeia permane√ßam inalterados, a parte com retorno de chamada pode ser omitida: <br><br><pre> <code class="php hljs">$pipes = [ StrToLowerAction::class, SetUserNameAction::class ]; $data = <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>; $finalData = app(Pipeline::class) -&gt;send($data) <span class="hljs-comment"><span class="hljs-comment">// ,       -&gt;through($pipes) //   -&gt;then(function ($changedData) { return $changedData; //  ,    }); var_dump($finalData); //      $finalData</span></span></code> </pre><br>  Al√©m disso, se voc√™ deseja ou precisa definir seu pr√≥prio m√©todo em manipuladores, a interface Pipeline fornece um m√©todo <i>via ('method_name') especial</i> , ent√£o o processamento em cadeia pode ser escrito desta maneira: <br><br><pre> <code class="php hljs">$finalData = app(Pipeline::class) -&gt;send($data) -&gt;through($pipes) -&gt;via(<span class="hljs-string"><span class="hljs-string">'handle'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//      ,         -&gt;then(function ($changedData) { return $changedData; });</span></span></code> </pre><br>  Diretamente, os dados que passamos pelos processadores podem ser absolutamente qualquer coisa, bem como a intera√ß√£o com eles.  Digitar dicas e definir o tipo do objeto retornado na cadeia ajudar√° a evitar erros de integridade dos dados. <br><br><h2>  Conclus√£o </h2><br>  O Laravel fornece um grande n√∫mero de classes integradas, e a flexibilidade de muitas delas nos permite desenvolver algo complexo com simplicidade suficiente.  Este artigo examinou a possibilidade de criar filas simples para solicita√ß√µes com base na classe Pipeline incorporada ao Laravel.  As implementa√ß√µes dessa classe no c√≥digo final podem ser completamente diferentes, e a flexibilidade dessa ferramenta permite que voc√™ se livre de muitas a√ß√µes desnecess√°rias ao criar determinados algoritmos. <br><br>  Como usar especificamente esse recurso da estrutura depende das tarefas atribu√≠das a voc√™. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429214/">https://habr.com/ru/post/pt429214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429198/index.html">O Kernel-Bridge Framework: Ponte no Ring0</a></li>
<li><a href="../pt429202/index.html">Cursos caros: vale a pena?</a></li>
<li><a href="../pt429204/index.html">Os equ√≠vocos mais importantes sobre desenvolvimento de jogos</a></li>
<li><a href="../pt429210/index.html">Realidade severa: seus stakeholders n√£o querem uma an√°lise de neg√≥cios</a></li>
<li><a href="../pt429212/index.html">A Microsoft confirmou a presen√ßa de problemas (em massa) com a ativa√ß√£o do Windows 10</a></li>
<li><a href="../pt429216/index.html">Verifique as vendas no Google Play - vale a pena a preocupa√ß√£o?</a></li>
<li><a href="../pt429218/index.html">Julia e equa√ß√µes diferenciais parciais</a></li>
<li><a href="../pt429220/index.html">FSIN versus as leis da f√≠sica ou abelhas versus mel</a></li>
<li><a href="../pt429222/index.html">A Duma do Estado devolver√° a conta dos grandes dados do usu√°rio para revis√£o</a></li>
<li><a href="../pt429224/index.html">Padr√µes de formul√°rio da Web escuros ou qual seria o formul√°rio de convers√£o mais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>