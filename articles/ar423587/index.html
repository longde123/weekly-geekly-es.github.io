<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฃ๐ป โก๏ธ ๐ญ ุจูุงุก ูุฌููุนุฉ InnoDB ูู ุงูุฎููุฉ 5.7 ุนูู ุณูุชูุณ 7 ๐ธ ๐คน๐ป ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ุจุงูุฌููุน! 

 ุจูุฌุฑุฏ ุธููุฑ ูููุฉ ูู ุงููุธููุฉ - ูุจุฏู ุฃู ููุงู ูุฌููุนุฉ InnoDB ุงุฎุชุจุงุฑ ุชู ุชูููููุง ุนูู ุงูุนุฏูุฏ ูู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ูุน ุงูุณูุชูุณ 7.5 ุ ุชุญุชุงุฌ ุฅู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุจูุงุก ูุฌููุนุฉ InnoDB ูู ุงูุฎููุฉ 5.7 ุนูู ุณูุชูุณ 7</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423587/" style=";text-align:right;direction:rtl">  ูุฑุญุจุง ุจุงูุฌููุน! <br><br>  ุจูุฌุฑุฏ ุธููุฑ ูููุฉ ูู ุงููุธููุฉ - ูุจุฏู ุฃู ููุงู ูุฌููุนุฉ InnoDB ุงุฎุชุจุงุฑ ุชู ุชูููููุง ุนูู ุงูุนุฏูุฏ ูู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ูุน ุงูุณูุชูุณ 7.5 ุ ุชุญุชุงุฌ ุฅูู ุฏุฑุงุณุชูุง ูุฅุถุงูุฉ ุจุถุน ุนูุฏ ุฃุฎุฑู.  ููููู ูุณุฑ ูุงูุณุฎุฑูุฉ ููุง ุชุดุงุก.  ูุจุฏู ูุบุฑูุง. <br><a name="habracut"></a><br>  ูุจู ุฐูู ุ ูู ููู ูุฏู ุฃู ุฎุจุฑุฉ ูุน ูุฐู ุงููุฌููุนุฉ ุ ูููู Google ูููุณุงุนุฏุฉ. <br>  ูุน ุจุนุถ ุงูุงุณุชุซูุงุกุงุช ุ ูุงูุช ุฌููุน ุงูุฑูุงุจุท ุงูููุฌูุฏุฉ ููู ููู Yandex ุฅูุง ุนูู dev.mysql.com ุ ุฃู ุนูู ูุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงู ุนูู Habr</a> .  ูุจุฏู ุฃูู ุชู ุชูููู ูุฌููุนุฉ ูู ุนูุฏุชูู ุนููู. <br><br>  ุญุณููุง ุ ููุฏ ูุฑุฃุช ุงูููุงูุฉ ุ ููุฏ ููุฌุฆุช ุฅูู ุญุฏ ูุง ุจุชุนููุฏ ุฅุถุงูุฉ ุงูุนูุฏ ูููุต ุงูุนุฏูุฏ ูู ุงูุชูุงุตูู ุ ููู ุญุณููุง.  ูุน ุฎุทูุฆุฉ ุ ุฃุถูุช ูู ูุตู ุนูุฏุฉ ุฌุฏูุฏุฉ (ุจุนุถ ุงูุฃูุงูุฑ ูู ุชูู ูููุฏุฉ ุ ูุจุนุถูุง ุจุดูู ุนุงู ูุณุฑ ูู ุดูุก) ุ ูุจุนุฏ ุฐูู ุจุฏุฃุช ูู ุชุฌุฑุจุฉ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูุฏ ุ ููุง ุฅูู ุฐูู. <br><br>  ุจุนุฏ ุนุฏุฉ ููุงูุฌ ููููุงุช ูุง ุญุตุฑ ููุง ูู ุงูุฎูุงูุง ุงูุนุตุจูุฉ ุ ูู ุชุณุชุทุน ุงููุชูุฉ ุงููููู.  ูู ุชุฑุบุจ ุฅุญุฏู ุงูุนูุฏุฉ ูู ุฅุถุงูุชูุง ุชุญุช ุฃู ุธุฑู ุ ูุฃุบููุช ุงูุฃุฎุฑู ุนูุฏ ูุญุงููุฉ ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุชุธุงูุฑ ุงูุซุงูุซ ุฃู ูู ุดูุก ูุงู ูู ูุญูู.  ูุงู ุนูู ุฃู ุฃุทูู ุงููุงุฑ ูุฃุจุฏุฃ ูู ุงูุตูุฑ. <br><br>  ุนูุฏ ุฅูุดุงุก ูุฌููุนุฉ ุฌุฏูุฏุฉ ุ ูุณูุก ุงูุญุธ ุ ูุดุฃุช ุงููุซูุฑ ูู ุงููุดุงูู ูุงูุชูุงูุถุงุช.  ุฑุจูุง ูุงูุช ุงูููุทุฉ ูู ุฅุตุฏุงุฑุงุช ุงูุจุฑุงูุฌ ุ ุญุงููุช mysql 5.7.  ุฑุจูุง ูู ุงูุชูุฒูุน.  ููุชูุฌุฉ ูุฐูู ุ ุชูููุช ุนู ูุญุงููุงุช ุทุงุฆุดุฉ ููููุงู ุจูู ุดูุก ุนูู ูุทุนุฉ ูุฑู ูุจุฏุฃุช ูู ุฅุนุฏุงุฏูุง ุนู ุทุฑูู ุงููุชุงุจุฉ.  ูุฌูุฌู. <br><br>  ุงุฌุชูุนุช ุฃูุณูุงุช ูููุงูู ููุชุนุฉ ูุงููุชูุฉ ุจู ูุฑูุถุช ุงูุงูููุงุฑ. <br>  ูู ุงูููุช ููุณู ุ ูุงูุช ุทุฑููุฉ ุฅูุดุงุฆูุง ูุฎุชููุฉ ุจุดูู ูุจูุฑ ุนู ุงููุญุงููุงุช ุงูุณุงุจูุฉ ูุฃุฑุฏุช ูุดุงุฑูุชูุง ุ ูุฃู  ุนูู ุงูุฅูุชุฑูุช ุ ูู ุฃุฌุฏ ุชุนูููุงุช ุฃุฎุฑู ุฐุงุช ุตูุฉ ูููุตูุฉ ููููููุฉ ูุฅุนุฏุงุฏ ูุฌููุนุฉ inDoDB. <br><br>  ูุฐุง ุ ูุฏููุง ุซูุงุซุฉ ุฃุฌูุฒุฉ ุงูุชุฑุงุถูุฉ ูุชุทุงุจูุฉ ูุน ุชุนุทูู Centos 7.5 ุงูุญุฏ ุงูุฃุฏูู 1804 ู selinux ูุฌุฏุงุฑ ุงูุญูุงูุฉ ุงููุนุทูุงู: <br><br>  1.1.1.1 <br>  1.1.1.2 <br>  1.1.1.3 <br><br>  ููุนูู ุ ุงุณุชุฎุฏูุช mysql 5.7 ุ ูุฐูู ูุณุชุฎุฏููุง.  ููุจุฏุฃ ุจู 1.1.1.1: <br><br>  1. ุชุซุจูุช ูุณุชูุฏุน ุงูุฎููุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="hljs powershell">rpm <span class="hljs-literal"><span class="hljs-literal">-i</span></span> https://dev.mysql.com/get/mysql80<span class="hljs-literal"><span class="hljs-literal">-community</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-el7</span></span><span class="hljs-literal"><span class="hljs-literal">-1</span></span>.noarch.rpm</code> </pre> <br>  ูู ุจุฅููุงู ุชุดุบูู ุงููุณุชูุฏุน ูู 8 ุ ููู ุจุชุดุบููู ูู 5.7 ูุชุญูู - ุฅุฐุง ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ููู ุจุชุซุจูุช mysql: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">yum install yum<span class="hljs-literal"><span class="hljs-literal">-utils</span></span> yum<span class="hljs-literal"><span class="hljs-literal">-config</span></span><span class="hljs-literal"><span class="hljs-literal">-manager</span></span> -<span class="hljs-literal"><span class="hljs-literal">-disable</span></span> mysql80<span class="hljs-literal"><span class="hljs-literal">-community</span></span> yum<span class="hljs-literal"><span class="hljs-literal">-config</span></span><span class="hljs-literal"><span class="hljs-literal">-manager</span></span> -<span class="hljs-literal"><span class="hljs-literal">-enable</span></span> mysql57<span class="hljs-literal"><span class="hljs-literal">-community</span></span> yum repolist yum install mysql<span class="hljs-literal"><span class="hljs-literal">-community</span></span><span class="hljs-literal"><span class="hljs-literal">-server</span></span> mysql<span class="hljs-literal"><span class="hljs-literal">-shell</span></span></code> </pre> <br>  2. ูุฃุชู /etc/my.cnf ุฅูู ูุฐุง ุงููููุฐุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">[mysqld] datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock symbolic-links=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">log</span></span>-error=/var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/mysqld.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> pid-file=/var/run/mysqld/mysqld.pid bind-address=<span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> port=<span class="hljs-number"><span class="hljs-number">3301</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">Replication</span></span> part server_id=<span class="hljs-number"><span class="hljs-number">1</span></span> gtid_mode=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> enforce_gtid_consistency=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> master_info_repository=<span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> relay_log_info_repository=<span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> binlog_checksum=<span class="hljs-keyword"><span class="hljs-keyword">NONE</span></span> log_slave_updates=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> log_bin=binlog binlog_format=<span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> plugin-<span class="hljs-keyword"><span class="hljs-keyword">load</span></span> = group_replication.so # <span class="hljs-keyword"><span class="hljs-keyword">Group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replication</span></span> part transaction_write_set_extraction=XXHASH64 loose-group_replication_start_on_boot = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span> loose-group_replication_local_address = <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">33011</span></span> loose-group_replication_bootstrap_group = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span> report_port = <span class="hljs-number"><span class="hljs-number">3301</span></span> report_host = <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre><br>  3301 ููุง ูู ุงููููุฐ ุงูุฐู ุณุชุณุชูุน ุฅููู ุงูุฎููุฉ ุ ู 33011 ูู ุงููููุฐ ุงูุฐู ุชุชูุงุตู ููู ุงูุนูุฏ ูุน ุจุนุถูุง ุงูุจุนุถ. <br><br>  3. ุฅุทูุงู ุงูุฎููุฉ ูุฃุฏุงุก ุงูุชูููู ุงูุฃููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> mysqld grep <span class="hljs-string"><span class="hljs-string">'password'</span></span> /var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/mysqld.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> mysql_secure_installation</code> </pre> <br>  4. ุญุณููุง ุ ุฃูุดุฆ ูุฌููุนุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุณุชุฎุฏู ูููุตู ูุฅุฏุงุฑุชูุง.  ุฅุฐุง ููุช ุชุนุฑู ูุณุจููุง ุนูุงููู IP ููุนูุฏ ุ ูููููู ุฅุฏุฑุงุฌูุง ุนูู ุงูููุฑ ูู ูุงุฆูุฉ IPWhitelist.  ุณูู ูุชุธุงูุฑ ุจุฃููุง ูุง ูุนุฑู ุญุชู ุงูุขู ุนู 1.1.1.2.  ู 1.1.1.3: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl">mysqlsh &gt; \c <span class="hljs-number"><span class="hljs-number">127.0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.configureLocalInstance(<span class="hljs-string"><span class="hljs-string">"127.0.0.1:3301"</span></span>, {mycnfPath: <span class="hljs-string"><span class="hljs-string">"/etc/my.cnf"</span></span>, clusterAdmin: <span class="hljs-string"><span class="hljs-string">"cladmin"</span></span>, clusterAdminPassword: <span class="hljs-string"><span class="hljs-string">"SomePassword!123"</span></span>}) &gt; \c cladmin@1.<span class="hljs-number"><span class="hljs-number">1.1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.checkInstanceConfiguration() &gt; cl=dba.createCluster(<span class="hljs-string"><span class="hljs-string">'TestCluster'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1'</span></span>}) &gt; dba.configureLocalInstance() &gt; cl.status()</code> </pre> <br>  ุงูุชูู!  ูุฌุจ ุฃู ูููู cl.status ุจุฅุฎุฑุงุฌ ุดูุก ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK_NO_TOLERANCE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is NOT tolerant to any failures."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  ุนูุฏ ุชุบููุฑ ุงููุชูุฉ ุ ุณูููู ูู ุงูุถุฑูุฑู ุชูููุฐ ุงูุฃูุฑ dba.configureLocalInstance () ูุญูููุง ุนูู ุฌููุน ุงูุนูุฏ ูุญูุธ ุงูุชุบููุฑุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">WARNING</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">On</span></span> instance <span class="hljs-string"><span class="hljs-string">'1.1.1.1:3301'</span></span> membership change cannot be persisted since MySQL <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">5.7</span></span><span class="hljs-number"><span class="hljs-number">.23</span></span> does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> support the <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> PERSIST command (MySQL <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> &gt;= <span class="hljs-number"><span class="hljs-number">8.0</span></span><span class="hljs-number"><span class="hljs-number">.11</span></span> required). Please use the &lt;Dba&gt;.configureLocalInstance command locally <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> persist the changes.</code> </pre> <br>  ูุฃู  ุณูููู ุจุฅุถุงูุฉ ุนูุฏุชูู ุฃุฎุฑููู ุ ูุญู ูุง ูุบูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู 1.1.1.1 ุ ุณูููู ูููุฏูุง ููุง. <br><br>  ุงูุขู ุฏุนูุง ูุญุงูู ุฅุถุงูุฉ ุงูุนูุฏุฉ 1.1.1.2 ุฅูู ุงููุชูุฉ.  ููููุงู ุจุฐูู ุ ูููู ุจุชูููุฐ ุฌููุน ุงูุฃูุงูุฑ ููุณูุง ุนููู ุญุชู 3 ุฎุทูุงุช ุดุงููุฉ ุ ููุง ููุณู ุชุบููุฑ server_id ู loose-group_replication_local_address ู report_host. <br><br>  4. ูููู ุจุชูููุฐ 1.1.1.2: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">mysql -p &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GLOBAL</span></span> group_replication_allow_local_disjoint_gtids_join=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>;</code> </pre> <br>  ุญุงููุช ุชุนููู ูุฐุง ุงููุชุบูุฑ ูู ุฎูุงู mysqlsh ุ ุจุงูุชุจุฏูู ุฅูู ูุถุน SQL ุ ูููู ุงูุฅุฌุฑุงุกุงุช ููุงู ูู ุชุคุซุฑ ุนููู ูู ุงูุฎููุฉ.  ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs swift">mysqlsh &gt; \<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">127.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.configureLocalInstance(<span class="hljs-string"><span class="hljs-string">"127.0.0.1:3301"</span></span>, {mycnfPath: <span class="hljs-string"><span class="hljs-string">"/etc/my.cnf"</span></span>, clusterAdmin: <span class="hljs-string"><span class="hljs-string">"cladmin"</span></span>, clusterAdminPassword: <span class="hljs-string"><span class="hljs-string">"SomePassword!123"</span></span>}) &gt; \<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> cladmin@<span class="hljs-number"><span class="hljs-number">1.1</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.checkInstanceConfiguration()</code> </pre> <br><br>  5. ุงูุนูุฏุฉ ุฅูู ุงูุนูุฏุฉ ุงูุฃููู 1.1.1.1.  ุฅุฐุง ุฃุบููุช ุงูุงุชุตุงู ุ ูููููู ุงูุงุชุตุงู ุจุณุฑุนุฉ ุจุงููุชูุฉ ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel">mysqlsh --uri cladmin@1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span> &gt; \sql &gt; STOP GROUP_REPLICATION; &gt; SET GLOBAL group_replication_ip_whitelist=<span class="hljs-string"><span class="hljs-string">"1.1.1.1,1.1.1.2"</span></span>; &gt; START GROUP_REPLICATION; &gt; \js &gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.addInstance(<span class="hljs-string"><span class="hljs-string">'cladmin@1.1.1.2:3301'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1,1.1.1.2'</span></span>}) &gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.status()</code> </pre><br>  ูุณุจุจ ูุง ุ ุนูุฏ ุฅุถุงูุฉ ุนูุฏุฉ ุจุฏูู ุฎูุงุฑ ipWhitelist ุ ูุง ูุชู ุฅุฑุณุงููุง ุชููุงุฆููุง ุ ูุฐูู ูุญุฏุฏูุง ูุฏูููุง. <br>  ุฅุฐุง ุชู ุชูููู ุงููุงุฆูุฉ ุงูุจูุถุงุก ุงูุฎุงุตุฉ ุจู ูู ุงูุจุฏุงูุฉ ูุฌููุน ุงูุนูุฏ ุฃู ุงูุดุจูุฉ ุงููุฑุนูุฉ ุ ููููู ุชุฎุทู ุงูุฃูุงูุฑ ูู ูุถุน SQL. <br><br>  ูุง ุชูุณ ุชูููุฐ dba.configureLocalInstance () ุนูู ุฌููุน ุงูุนูุฏ ูุญูุธ ุงูุชูููู. <br><br>  ุชุญููุช ูุฌููุนุฉ ุงูุนูุฏุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK_NO_TOLERANCE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is NOT tolerant to any failures."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.2:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.2:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  ุญุณููุง ุ ููุงู ูุฌููุนุฉ ูู ุนูุฏุชูู ุ ูููู ูู ูุถุน "ุงููุชูุฉ ูุง ุชุชุณุงูุญ ูุน ุฃู ุฅุฎูุงูุงุช" <br>  ุฃุถู ุซุงูุซูุง ุ ุงูุฎูุงุฑุฒููุฉ ูู ููุณูุง ุชูุงููุง ูุซู ุฅุถุงูุฉ ูุงุญุฏุฉ ุฃุฎุฑู. <br><br>  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชุบููุฑ ุงููุงุฆูุฉ ุงูุจูุถุงุก ูุฑุฉ ุฃุฎุฑู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุชูููุฐ ุงูุฃูุงูุฑ ุนูู ุงูุนูุฏุฉ r / w ุ ูุฃู  ุนูู ุนูุฏ r / o ูุง ูุจุฏู ุฃููุง ุชุคุฏู ุฅูู ุฃู ุดูุก.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุณูุท ุนููุฏ r / o ูุณูุชุนูู ุฅุนุงุฏุฉ ุชูุตูููุง ุ ูุงูุฅุจูุงุบ ูู ุงูููุช ููุณู ุนู ูุงุฆูุฉ ุจูุถุงุก ุฌุฏูุฏุฉ. <br>  ูู ุญุงูุชูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">&gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.rejoinInstance(<span class="hljs-string"><span class="hljs-string">'cladmin@1.1.1.2:3301'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1,1.1.1.2,1.1.1.3'</span></span>})</code> </pre> <br>  ุญุณููุง ุ ูุฑุฉ ุฃุฎุฑู ุ ูุง ุชูุณ ุชูููุฐ dba.configureLocalInstance () ุนูู ุฌููุน ุงูุนูุฏ ูุญูุธ ุงูุชูููู. <br><br>  ุชุจุฏู ูุฌููุนุฉ ูู ุซูุงุซ ุนูุฏ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is ONLINE and can tolerate up to ONE failure."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.2:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.2:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.3:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.3:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  ุฅุฐุง ุงููุงุฑุช ุงููุชูุฉ ุฅูู ุญุงูุฉ ุนูุฏุฉ ูุงุญุฏุฉ ุ ูุณุชุญุชุงุฌ ุฅูู ุงูุจุฏุก ุจุงููุนููุฉ loose-group_replication_bootstrap_group = ON ูู /etc/my.cnf <br>  ุจุนุฏ ุงูุจุฏุก ุ ุณุชุญุชุงุฌ ุฅูู ุฅููุงู ุชุดุบูู ุงููุนููุฉ ูุฑุฉ ุฃุฎุฑู ุ ูุฅูุง ุณูุชู ูุตู ูุฐู ุงูุนูุฏุฉ ุฏุงุฆููุง ุนู ุงููุชูุฉ ูุงูุญูุงุธ ุนูู ุงูุฎุงุตุฉ ุจูุง. <br><br>  ูุชู ูุตู ุชุซุจูุช mysql-router ุจุดูู ุฌูุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ุ ูุฐูู ูุง ุฃุฑู ุฃู ูุนูู ูู ุงูุชูุฑุงุฑ. <br><br>  ูุฐุง ูู ุดูุก ุ ูุฐุง ูู ุดูุก ุ ุขูู ุฃู ูุฌุฏ ุดุฎุต ูุง ุชุฌุฑุจุชู ูููุฏุฉ. <br><br>  ุดูุฑุง ููู ุนูู ุงูุชูุงููู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar423587/">https://habr.com/ru/post/ar423587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar423575/index.html">ูุนุงููุฑ ุงูุชุตููู ูู ุงูุฅููุชุฑูููุงุช ุงูุฏูููุฉ: ุฃูู ุชูุฌุฏ 7 ูุงูููุชุฑ ูู ุชูููุฉ 7 ูุงูููุชุฑุ</a></li>
<li><a href="../ar423577/index.html">ุฅูุดุงุก ูุนุจุฉ ููุทููุฉ ูููุตุฉ ุงูุฃูุนุงุจ</a></li>
<li><a href="../ar423579/index.html">ุงูุฎุฏูุงุช ุงูุณุญุงุจูุฉ ูู WebGLุ ูุง ุดูุฑูุง</a></li>
<li><a href="../ar423583/index.html">ุงูุญุตูู ุนูู ุงูุญูุงุฏุซ ูู ุฎูุงู NotificationIRP ูู OSS</a></li>
<li><a href="../ar423585/index.html">ูุจุงุดุฑ: CI / CD ุนูู iOS ู Android</a></li>
<li><a href="../ar423589/index.html">ููู ุงุฎุชุฑูุง TTS ุนูู ุณุจูู ุงููุซุงู ุงูุฃุตูุงุช ูู ุงููุงููุณ</a></li>
<li><a href="../ar423591/index.html">ุฃุบุงูู ูุฏููุฉ ุนู ุงูุดูุก ุงูุฑุฆูุณู. ุทูุจุงุช ุฌุงูุง ูุงูุตุงุฏุฑุฉ</a></li>
<li><a href="../ar423593/index.html">ุฃุนููุช ุฌูุฌู ูุณุงุจูุฉ ูููุฌูุงุช ุนูู ุฎูุงุฑุฒููุงุช ุฑุคูุฉ ุงูุฌูุงุฒ</a></li>
<li><a href="../ar423595/index.html">ูุฑุงูุฌู ุฃูููุงูู ุ ุงูุชุจุงุฏู</a></li>
<li><a href="../ar423597/index.html">ููู ููุง ูู ุงููุฌููุนุงุช ุงูุชู ูููู ุชุฎุตูุตูุง ูู ูุงุนุฏุฉ ุงูุนููุงุก</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>