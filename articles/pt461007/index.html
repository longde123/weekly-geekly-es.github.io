<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüé® üèÇüèø ‚ûñ Introdu√ß√£o ao Analisador Est√°tico PVS-Studio para Visual C ++ üëäüèæ üñçÔ∏è üë®üèº‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, vou falar sobre o PVS-Studio, um analisador de c√≥digos C e C ++, e mostrar como us√°-lo no ambiente Visual C ++. Este guia √© destinado es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introdu√ß√£o ao Analisador Est√°tico PVS-Studio para Visual C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/461007/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e61/add/44c/e61add44c3ad8d47978a57af0b2b60cb.png" alt="Quadro 8"></div><br>  Neste artigo, vou falar sobre o PVS-Studio, um analisador de c√≥digos C e C ++, e mostrar como us√°-lo no ambiente Visual C ++.  Este guia √© destinado especificamente a usu√°rios iniciantes. <br><a name="habracut"></a><br><h2>  Instalando o analisador </h2><br>  O PVS-Studio suporta o Microsoft Visual Studio 2019, 2017, 2015, 2013, 2012 e 2010. Consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> para obter os requisitos do sistema.  Atualmente, o PVS-Studio pode analisar projetos escritos em C, C ++, C # e Java.  No entanto, este artigo enfoca os programadores que trabalham no Visual C ++ e procuram ajuda para come√ßar a usar o analisador. <br><br>  O pacote de instala√ß√£o pode ser baixado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Depois de execut√°-lo, voc√™ ter√° v√°rias op√ß√µes de integra√ß√£o (Figura 1) para escolher.  As op√ß√µes indispon√≠veis est√£o acinzentadas. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f73/fd3/04d/f73fd304d32b6083509934876f4cc581.png" alt="Figura 1. Janela de sele√ß√£o de componentes de integra√ß√£o."></div><br>  <font color="#999999"><i>Figura 1. Janela de sele√ß√£o de componentes de integra√ß√£o.</i></font> <br><br>  Depois de instalar o PVS-Studio, abra a janela Sobre do Visual Studio e verifique se o analisador est√° presente entre os produtos instalados. <br><br><h2>  Verificando um projeto </h2><br>  Depois que a instala√ß√£o estiver conclu√≠da, voc√™ poder√° verificar seu projeto.  Voc√™ tamb√©m pode tentar analisar a solu√ß√£o inteira.  Para fazer isso, clique em Extens√µes ‚Üí PVS-Studio ‚Üí Verificar ‚Üí Solu√ß√£o (Figura 2). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/ee3/2d8/716ee32d88dcc6bac832be8356dfaca6.png" alt="Figura 2. Verificando uma solu√ß√£o com o PVS-Studio."></div><br>  <font color="#999999"><i>Figura 2. Verificando uma solu√ß√£o com o PVS-Studio.</i></font> <br><br>  Se voc√™ tiver alguma dificuldade para executar a verifica√ß√£o, consulte a se√ß√£o " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PVS-Studio: Troubleshooting</a> " em nosso site.  Essas n√£o s√£o algumas dicas idiotas como "verifique se o plugue est√° conectado √† tomada".  A se√ß√£o descreve problemas t√≠picos que nossos usu√°rios relataram e maneiras de resolv√™-los. <br><br><h2>  Manipulando a lista de avisos </h2><br>  Quando a verifica√ß√£o estiver conclu√≠da, as mensagens de diagn√≥stico aparecer√£o em uma janela especial.  Essa janela possui muitos elementos, que servem para manipular a lista, para que voc√™ possa visualizar apenas os avisos de interesse.  No come√ßo, por√©m, pode parecer um pouco complicado. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/700/7c4/b287007c4520a416cd531e31962c01ca.png" alt="Figura 3. Janela de avisos. Clique na imagem para ampliar."></div><br>  <font color="#999999"><i>Figura 3. Janela de avisos.</i></font>  <font color="#999999"><i>Clique na imagem para ampliar.</i></font> <br><br>  A vis√£o geral completa dos elementos da janela pode ser encontrada na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> , mas agora vamos nos concentrar apenas nos b√°sicos: <br><br><ol><li>  N√≠veis de certeza dos avisos.  A captura de tela acima mostra os n√≠veis m√©dio e alto ativados.  O n√≠vel baixo lida mais com "Code Smells" e avisos que, infelizmente, tendem a produzir muitos falsos positivos.  Por que existem tantos avisos de n√≠vel baixo e m√©dio, mas t√£o poucos avisos de alto n√≠vel?  A resposta √© que o diagn√≥stico MISRA foi ativado, que cont√©m regras como "a fun√ß√£o deve ter apenas um √∫nico ponto de sa√≠da".  Obviamente, voc√™ normalmente n√£o precisa desses diagn√≥sticos, ent√£o eles est√£o desativados por padr√£o.  Nota: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como verificar rapidamente avisos interessantes fornecidos pelo analisador PVS-Studio para c√≥digos C e C ++?</a> ". </li><li>  O filtro  Voc√™ pode filtrar as mensagens por c√≥digo, CWE, texto, projeto ou arquivo. </li><li>  O n√∫mero da linha de disparo.  Alguns diagn√≥sticos podem se referir a v√°rias linhas: esses avisos possuem retic√™ncias ao lado do n√∫mero da linha. </li></ol><br><h2>  SAST </h2><br>  O PVS-Studio √© uma ferramenta para teste de seguran√ßa de aplicativos est√°ticos (SAST), o que significa que ele pode detectar poss√≠veis vulnerabilidades no c√≥digo-fonte e mostrar o identificador de fraqueza correspondente de acordo com uma classifica√ß√£o espec√≠fica. <br><br>  O PVS-Studio suporta as seguintes classifica√ß√µes de fraqueza: <br><br><ol><li>  CWE </li><li>  SEI CERT </li><li>  Misra </li></ol><br>  Para ativar os c√≥digos CWE, abra o menu suspenso da janela do analisador e marque Mostrar colunas&gt; CWE <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/919/85b/e34/91985be349bf7385fa7f3878ef57dcde.png" alt="Figura 4. Ativando c√≥digos CWE no menu suspenso."></div><br>  <font color="#999999"><i>Figura 4. Ativando c√≥digos CWE no menu suspenso.</i></font> <br><br>  Outra maneira de fazer isso √© Extens√µes&gt; PVS-Studio&gt; Exibir c√≥digos CWE na janela Sa√≠da na barra de menus do Visual Studio <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b6/582/d8c/0b6582d8c2626066567dfd111439cbc6.png" alt="Figura 5. Submenu PVS-Studio no menu Extens√µes."></div><br>  <font color="#999999"><i>Figura 5. Submenu PVS-Studio no menu Extens√µes.</i></font> <br><br>  Diferentemente disso, os diagn√≥sticos MISRA s√£o ativados na janela de op√ß√µes: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b89/898/709/b89898709db7045f949fb564c6c80059.png" alt="Figura 6. Lista de pontos fracos detect√°veis."></div><br>  <font color="#999999"><i>Figura 6. Lista de pontos fracos detect√°veis.</i></font> <br><br>  Voc√™ pode aprender mais sobre essas classifica√ß√µes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  Verificando Projetos na Linha de Comandos </h2><br>  PVS-Studio_Cmd.exe √© um utilit√°rio para verificar projetos e solu√ß√µes em C ++ .vcxproj na linha de comando.  Pode ser √∫til se voc√™ deseja automatizar o processo de an√°lise.  O programa pode ser encontrado no diret√≥rio de instala√ß√£o, que √© 'C: \ Arquivos de Programas (x86) \ PVS-Studio' por padr√£o. <br><br>  O utilit√°rio possui v√°rios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">par√¢metros</a> , mas voc√™ precisar√° de apenas tr√™s para come√ßar: <ul><li>  --target: o arquivo do projeto ou solu√ß√£o a ser verificado. </li><li>  --output: o arquivo plog no qual o relat√≥rio de an√°lise √© armazenado. </li><li>  --progress: rastreia o progresso da an√°lise. </li></ul><br>  Isto √© o que voc√™ ver√° ap√≥s iniciar a verifica√ß√£o: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ce/ee2/aa1/3ceee2aa11c0bf9f887ad8959d7cdd65.png" alt="Figura 7. Sa√≠da do utilit√°rio PVS-Studio_Cmd.exe"></div><br>  <font color="#999999"><i>Figura 7. Sa√≠da do utilit√°rio PVS-Studio_Cmd.exe</i></font> <br><br>  Depois que a verifica√ß√£o for conclu√≠da, um arquivo plog contendo o relat√≥rio de an√°lise ser√° criado no diret√≥rio especificado nos par√¢metros de in√≠cio.  Este relat√≥rio pode ser convertido em outros formatos usando o utilit√°rio PlogConverter.exe e, se voc√™ deseja abrir o relat√≥rio no IDE, basta clicar duas vezes no arquivo plog no Windows Explorer. <br><br>  O arquivo de relat√≥rio tamb√©m pode ser aberto no menu Extens√µes: Extens√µes&gt; PVS-Studio&gt; Abrir / Salvar&gt; Abrir relat√≥rio de an√°lise ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/490/7ac/cc5/4907accc516b05ccfedf52acc9c85d9f.png" alt="Figura 8. Abrindo um relat√≥rio de an√°lise no menu do plug-in."></div><br>  <font color="#999999"><i>Figura 8. Abrindo um relat√≥rio de an√°lise no menu do plug-in.</i></font> <br><br>  Consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> para obter detalhes sobre o utilit√°rio e seus par√¢metros. <br><br><h2>  Suprimindo falsos positivos </h2><br>  O analisador fornece uma variedade de meios para suprimir falsos positivos.  Eles s√£o descritos em detalhes nas seguintes se√ß√µes: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ajuste fino</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Supress√£o em massa</a> , que √© especialmente √∫til quando voc√™ deseja suprimir apenas os avisos que se referem a c√≥digo novo ou modificado. </li></ul><br><h2>  Aviso de amostra </h2><br>  Vamos dar uma olhada em um exemplo de aviso emitido pelo analisador.  O seguinte snippet de c√≥digo √© obtido do projeto ReactOS: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">VOID NTAPI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AtapiDmaInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... ULONG treg = <span class="hljs-number"><span class="hljs-number">0x54</span></span> + (dev &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>) ? (dev &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) : <span class="hljs-number"><span class="hljs-number">7</span></span>; .... }</code> </pre> <br>  Mensagem de diagn√≥stico do PVS-Studio: V502 Talvez o operador '?:' Funcione de maneira diferente do esperado.  O operador '?:' Tem uma prioridade mais baixa que o operador '+'.  uniata id_dma.cpp 1610 <br><br>  A <i>express√£o 0x54 + (dev &lt;3)</i> sempre ser√° avaliada como <i>verdadeira</i> : a constante n√£o nula <i>0x54</i> √© adicionada primeiro ao resultado da express√£o <i>(dev &lt;3)</i> , que pode ser avaliada como 0 ou 1 e somente ent√£o √© a valor resultante comparado com zero. <br><br>  √â assim que a vers√£o correta se parece: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">VOID NTAPI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AtapiDmaInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... ULONG treg = <span class="hljs-number"><span class="hljs-number">0x54</span></span> + ((dev &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>) ? (dev &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) : <span class="hljs-number"><span class="hljs-number">7</span></span>); .... }</code> </pre> <br>  Resolvemos o problema colocando a opera√ß√£o <i>'?:'</i> Entre par√™nteses, para que seu resultado agora dependa do resultado da express√£o <i>(dev &lt;3)</i> . <br><br><h2>  Conclus√£o </h2><br>  Essa foi uma breve introdu√ß√£o √† introdu√ß√£o ao PVS-Studio for Visual C ++.  Obviamente, ele n√£o cobre todos os aspectos, portanto seja bem-vindo ao nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">blog</a> , onde explicamos em detalhes como trabalhar com o analisador e consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> para obter descri√ß√µes completas das mensagens de diagn√≥stico e configura√ß√µes da ferramenta. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461007/">https://habr.com/ru/post/pt461007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460995/index.html">Implementamos o projeto ML usando o Flask como uma API REST e o tornamos acess√≠vel atrav√©s do aplicativo Flutter</a></li>
<li><a href="../pt460997/index.html">Turistas ajudam cientistas a estimar o n√∫mero de grandes predadores</a></li>
<li><a href="../pt460999/index.html">Vamos jogar um joguinho com Lamoda</a></li>
<li><a href="../pt461003/index.html">An√°lise: como funciona o mercado de negocia√ß√£o de alta frequ√™ncia na bolsa</a></li>
<li><a href="../pt461005/index.html">Teste para a empresa: fazendo as perguntas certas na entrevista</a></li>
<li><a href="../pt461009/index.html">Como fazer um padr√£o em 10 dias. Parte Dois Chato</a></li>
<li><a href="../pt461013/index.html">Reservando conex√£o √† Internet</a></li>
<li><a href="../pt461015/index.html">Viva e aprenda. Parte 2. Universidade: 5 anos ou 5 corredores?</a></li>
<li><a href="../pt461017/index.html">Novo algoritmo de rastreamento de GPU: rastreamento de caminho do Wavefront</a></li>
<li><a href="../pt461019/index.html">Como √© a vida dos desenvolvedores no Ir√£</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>