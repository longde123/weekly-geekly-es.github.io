<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∞üèº üîπ üéÆ Base de donn√©es KDB +: de la finance √† la Formule 1 üè• üíáüèø üßëüèø‚Äçü§ù‚ÄçüßëüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="KDB +, un produit KX , est une base de donn√©es √† colonnes √©troites tr√®s connue, extr√™mement rapide, con√ßue pour stocker des s√©ries chronologiques et d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Base de donn√©es KDB +: de la finance √† la Formule 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dbtc/blog/446412/">  KDB +, un produit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">KX</a> , est une base de donn√©es √† colonnes √©troites tr√®s connue, extr√™mement rapide, con√ßue pour stocker des s√©ries chronologiques et des calculs analytiques bas√©s sur eux.  Initialement, il jouissait (et jouit) d'une grande popularit√© dans le secteur financier - il est utilis√© par les 10 premi√®res banques d'investissement et de nombreux hedge funds, bourses et autres organisations bien connus.  R√©cemment, KX a d√©cid√© d'√©largir sa base de clients et propose d√©sormais des solutions dans d'autres domaines o√π il y a une grande quantit√© de donn√©es tri√©es par le temps ou d'une autre mani√®re - t√©l√©com, bioinformatique, production, etc.  En particulier, ils sont devenus un partenaire de l'√©quipe Aston Martin Red Bull Racing en Formule 1, o√π ils aident √† collecter et √† traiter les donn√©es des capteurs de voiture et √† analyser les tests dans une soufflerie.  Dans cet article, je veux vous dire quelles fonctionnalit√©s de KDB + le rendent super-productif, pourquoi les entreprises sont pr√™tes √† d√©penser beaucoup d'argent dessus, et enfin, pourquoi ce n'est pas vraiment une base de donn√©es. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/efa/f84/839/efaf84839e64d7c0026568d2b8019cd9.jpg"><br><a name="habracut"></a><br>  Dans cet article, je vais essayer de dire en g√©n√©ral ce qu'est KDB +, quelles sont ses fonctionnalit√©s et ses limites, quels sont ses avantages pour les entreprises qui souhaitent traiter de gros volumes de donn√©es.  Je n'entrerai pas dans les d√©tails de l'impl√©mentation de KDB + et les d√©tails de son langage de programmation Q. Ces deux sujets sont tr√®s √©tendus et m√©ritent des articles s√©par√©s.  De nombreuses informations sur ces sujets peuvent √™tre trouv√©es sur code.kx.com, y compris un livre sur Q-Q For Mortals (voir le lien ci-dessous). <br><br><h2>  Quelques termes </h2><br><ul><li>  <b>Base de donn√©es en m√©moire.</b>  Une base de donn√©es qui stocke les donn√©es dans la RAM pour un acc√®s plus rapide.  Les avantages d'une telle base de donn√©es sont compr√©hensibles, et les inconv√©nients sont la possibilit√© de perte de donn√©es, la n√©cessit√© d'avoir beaucoup de m√©moire sur le serveur. <br></li><li> <b>Base de donn√©es de colonnes.</b>  Une base de donn√©es o√π les donn√©es sont stock√©es en s√©rie et non enregistrement par enregistrement.  Le principal avantage d'une telle base de donn√©es est que les donn√©es d'une colonne sont stock√©es ensemble sur disque et en m√©moire, ce qui acc√©l√®re consid√©rablement leur acc√®s.  Il n'est pas n√©cessaire de charger des colonnes qui ne sont pas utilis√©es dans la demande.  Le principal inconv√©nient est qu'il est difficile de modifier et de supprimer des enregistrements. <br></li><li>  <b>S√©ries chronologiques.</b>  Donn√©es avec une colonne telle que la date ou l'heure.  En r√®gle g√©n√©rale, l'ordre dans le temps est important pour ces donn√©es, afin que vous puissiez facilement d√©terminer quel enregistrement pr√©c√®de ou suit celui en cours, ou pour appliquer des fonctions dont le r√©sultat d√©pend de l'ordre des enregistrements.  Les bases de donn√©es classiques sont construites sur un principe compl√®tement diff√©rent - repr√©sentant un ensemble d'enregistrements comme un ensemble, o√π l'ordre des enregistrements n'est pas d√©fini en principe. <br></li><li>  <b>Vecteur.</b>  Dans le contexte, KDB + est une liste d'√©l√©ments du m√™me type atomique, par exemple des nombres.  En d'autres termes, un tableau d'√©l√©ments.  Contrairement aux listes, les tableaux peuvent √™tre stock√©s de mani√®re compacte et trait√©s √† l'aide d'instructions de processeur vectoriel. <br></li></ul><br><h2>  Contexte historique </h2><br>  KX a √©t√© fond√©e en 1993 par Arthur Whitney, qui a pr√©c√©demment travaill√© chez Morgan Stanley Bank sur A +, le successeur d'APL, un langage tr√®s original et populaire dans le monde financier.  Bien s√ªr, dans KX, Arthur a continu√© dans le m√™me esprit et a cr√©√© le langage vectoriel fonctionnel K, guid√© par les id√©es du minimalisme radical.  Les programmes K ressemblent √† un ensemble d√©sordonn√© de signes de ponctuation et de caract√®res sp√©ciaux, la signification des caract√®res et des fonctions d√©pend du contexte, et chaque op√©ration a beaucoup plus de sens que dans les langages de programmation habituels.  Pour cette raison, le programme K prend un minimum d'espace - plusieurs lignes peuvent remplacer des pages de texte d'un langage verbeux comme Java - et est une impl√©mentation super concentr√©e de l'algorithme. <br><br>  Une fonction sur K qui impl√©mente la plupart du g√©n√©rateur d'analyseur LL1 selon une grammaire donn√©e: <br><br><pre><code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> pp:{q:{(x;p3(),y)};r:$[<span class="hljs-number"><span class="hljs-number">-11</span></span>=@x;$x;<span class="hljs-number"><span class="hljs-number">11</span></span>=@x;q[`N;$*x];<span class="hljs-number"><span class="hljs-number">10</span></span>=abs@@x;q[`N;x]  <span class="hljs-number"><span class="hljs-number">2.</span></span>   ($)~*x;(`P;p3 x <span class="hljs-number"><span class="hljs-number">1</span></span>);(<span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-meta"><span class="hljs-meta">#x)&amp;11=@*x;pp[{(1#x;$[2=#x;;,:]1_x)}@*x]  3.      (?)~*x;(`Q;pp[x 1]);(*)~*x;(`M;pp[x 1]);(+)~*x;(`MP;pp[x 1]);(!)~*x;(`Y;p3 x 1)  4.      (2=#x)&amp;(@x 1)in 100 101 107 7 -7h;($[(@x 1)in 100 101 107h;`Ff;`Fi];p3 x 1;pp[*x])  5.      (|)~*x;`S,(pp'1_x);2=#x;`C,{@[@[x;-1+#x;{x,")"}];0;"(",]}({$[".sC"~4#x;6_-2_x;x]}'pp'x);'`pp];  6.   $[@r;r;($[1&lt;#r;".s.";""],$*r),$[1&lt;#r;"[",(";"/:1_r),"]";""]]}</span></span></code> </pre> <br>  Arthur a √©galement incarn√© cette philosophie d'efficacit√© extr√™me avec un minimum de mouvements corporels dans KDB +, qui est apparu en 2003 (je pense qu'il est maintenant clair d'o√π vient la lettre K du nom) et il n'y a rien de plus qu'un interpr√®te de la quatri√®me version de la langue K.Une version plus agr√©able √† l'≈ìil de l'utilisateur est ajout√©e √† K K sous le nom Q. Q ajoute √©galement la prise en charge d'un dialecte SQL sp√©cifique - QSQL, et dans l'interpr√©teur - la prise en charge des tables comme type de donn√©es syst√®me, des outils pour travailler avec des tables en m√©moire et sur disque, etc. <br><br>  Ainsi, du point de vue de l'utilisateur, KDB + n'est qu'un interpr√©teur Q avec prise en charge des tables et des expressions de style LINQ de type SQL √† partir de C #.  C'est la diff√©rence la plus importante entre KDB + et d'autres bases de donn√©es et son principal avantage concurrentiel, qui est souvent n√©glig√©.  Ce n'est pas une base de donn√©es + un langage auxiliaire qui est d√©sactiv√©, mais un langage de programmation puissant √† part enti√®re + un support int√©gr√© pour les fonctions de base de donn√©es.  Cette diff√©rence jouera un r√¥le d√©cisif dans l'√©num√©ration de tous les avantages de KDB +.  Par exemple ... <br><br><h2>  La taille </h2><br>  Selon les normes modernes, KDB + est juste une taille microscopique.  Il s'agit litt√©ralement d'un fichier ex√©cutable plus petit qu'un m√©gaoctet et d'un petit fichier texte avec certaines fonctions syst√®me.  En fait - moins d'un m√©gaoctet et pour ce programme, les entreprises paient des dizaines de milliers de dollars par an pour un processeur sur le serveur. <br><br><ul><li>  Cette taille permet √† KDB + de se sentir bien sur n'importe quel mat√©riel - du micro-ordinateur Pi aux serveurs avec des t√©raoctets de m√©moire.  Cela n'affecte en rien la fonctionnalit√©; de plus, Q d√©marre instantan√©ment, ce qui permet de l'utiliser notamment en tant que langage de script. <br></li><li>  Avec cette taille, l'interpr√©teur Q est compl√®tement plac√© dans le cache du processeur, ce qui acc√©l√®re l'ex√©cution des programmes. <br></li><li>  Avec cette taille du fichier ex√©cutable, le processus Q occupe un espace m√©moire n√©gligeable; vous pouvez les ex√©cuter par centaines.  Dans le m√™me temps, si n√©cessaire, Q peut fonctionner avec des dizaines ou des centaines de gigaoctets de m√©moire en un seul processus. <br></li></ul><br><h2>  Polyvalence </h2><br>  Q est parfait pour une vari√©t√© de t√¢ches.  Le processus Q peut servir de base de donn√©es historique et fournir un acc√®s rapide √† des t√©raoctets d'informations.  Par exemple, nous avons des dizaines de bases de donn√©es historiques, dans certaines desquelles une journ√©e de donn√©es non compress√©e prend plus de 100 gigaoctets.  Cependant, avec des restrictions raisonnables, la requ√™te de base de donn√©es sera ex√©cut√©e en dizaines √† centaines de millisecondes.  En g√©n√©ral, nous avons un d√©lai d'expiration universel pour les demandes des utilisateurs - 30 secondes - et cela fonctionne tr√®s rarement. <br><br>  Avec la m√™me facilit√©, Q peut √™tre une base de donn√©es en m√©moire.  L'ajout de nouvelles donn√©es aux tables en m√©moire est si rapide que les requ√™tes des utilisateurs sont un facteur limitant.  Les donn√©es des tables sont stock√©es dans des colonnes, ce qui signifie que toute op√©ration dans la colonne utilisera le cache du processeur √† pleine capacit√©.  En plus de cela, KX a essay√© d'impl√©menter toutes les op√©rations de base telles que l'arithm√©tique via des instructions de processeur vectoriel, en maximisant leur vitesse.  Q peut effectuer des t√¢ches qui ne sont pas caract√©ristiques des bases de donn√©es - par exemple, traiter des donn√©es en continu et calculer en ¬´temps r√©el¬ª (avec un retard de plusieurs dizaines de millisecondes √† plusieurs secondes selon la t√¢che) diverses fonctions d'agr√©gation pour les instruments financiers pour diff√©rents intervalles de temps ou construire un mod√®le de l'impact de la perfection transactions sur le march√© et effectuer son profilage presque imm√©diatement apr√®s son ach√®vement.  Dans de tels probl√®mes, le plus souvent, le retard principal n'est pas Q, mais la n√©cessit√© de synchroniser les donn√©es de diff√©rentes sources.  La vitesse √©lev√©e est obtenue du fait que les donn√©es et les fonctions qui les traitent sont dans le m√™me processus, et le traitement est r√©duit √† l'ex√©cution de plusieurs expressions et jointures QSQL qui ne sont pas interpr√©t√©es, mais sont ex√©cut√©es en code binaire. <br><br>  Enfin, tout processus de service peut √©galement √™tre √©crit en Q.  Par exemple, les processus de passerelle qui distribuent automatiquement les demandes des utilisateurs aux bases de donn√©es et aux serveurs n√©cessaires.  Le programmeur a la libert√© totale d'impl√©menter n'importe quel algorithme pour l'√©quilibrage, la priorisation, la tol√©rance aux pannes, les droits d'acc√®s, les quotas et g√©n√©ralement tout ce que votre c≈ìur d√©sire.  Le principal probl√®me ici est que vous devez impl√©menter tout cela vous-m√™me. <br><br>  Pour un exemple, je vais √©num√©rer les types de processus que nous avons.  Tous sont activement utilis√©s et fonctionnent ensemble, combinant des dizaines de bases de donn√©es diff√©rentes, traitant des donn√©es provenant de nombreuses sources et desservant des centaines d'utilisateurs et d'applications. <br><br><ul><li>  <b>Connecteurs (feedhandler) aux sources de donn√©es.</b>  Ces processus utilisent g√©n√©ralement des biblioth√®ques externes charg√©es en Q. L'interface C de Q est extr√™mement simple et vous permet de cr√©er facilement des fonctions proxy pour n'importe quelle biblioth√®que C / C ++.  Q est suffisamment rapide pour g√©rer, par exemple, le traitement simultan√© du flux de messages FIX de toutes les bourses europ√©ennes. <br></li><li>  <b>Distributeurs Tickerplant,</b> qui servent de lien interm√©diaire entre les connecteurs et les consommateurs.  Dans le m√™me temps, ils √©crivent les donn√©es entrantes dans un journal binaire sp√©cial, offrant aux consommateurs une r√©sistance √† la perte de connexion ou au red√©marrage. <br></li><li>  <b>Base de donn√©es en m√©moire (rdb).</b>  Ces bases de donn√©es fournissent l'acc√®s le plus rapide aux donn√©es brutes et fra√Æches, en les stockant en m√©moire.  En r√®gle g√©n√©rale, ils accumulent des donn√©es dans des tableaux pendant la journ√©e et les remettent √† z√©ro la nuit. <br></li><li>  <b>Base de donn√©es persistante (pdb).</b>  Ces bases de donn√©es fournissent aujourd'hui un stockage de donn√©es dans la base de donn√©es historique.  En r√®gle g√©n√©rale, contrairement √† rdb, ils ne stockent pas de donn√©es en m√©moire, mais utilisent un cache sp√©cial sur le disque pendant une journ√©e et copient les donn√©es √† minuit dans la base de donn√©es historique. <br></li><li>  <b>Bases historiques (hdb).</b>  Ces bases de donn√©es permettent d'acc√©der aux donn√©es des jours, mois et ann√©es pr√©c√©dents.  Leur taille (en jours) n'est limit√©e que par la taille des disques durs.  Les donn√©es peuvent √™tre localis√©es n'importe o√π, en particulier sur diff√©rents disques pour un acc√®s plus rapide.  Il est possible de compresser les donn√©es en utilisant plusieurs algorithmes au choix.  La structure de la base de donn√©es est bien document√©e et simple, les donn√©es sont stock√©es sur une base unitaire dans des fichiers ordinaires, afin qu'elles puissent √™tre trait√©es, y compris en utilisant le syst√®me d'exploitation. <br></li><li>  <b>Bases de donn√©es avec informations agr√©g√©es.</b>  Diff√©rentes agr√©gations sont stock√©es, g√©n√©ralement avec, regroup√©es par nom d'instrument et intervalle de temps.  Les bases de donn√©es en m√©moire mettent √† jour leur √©tat √† chaque message entrant, et les historiques stockent des donn√©es pr√©calcul√©es pour acc√©l√©rer l'acc√®s aux donn√©es historiques. <br></li><li>  Enfin, les <b>processus de passerelle au</b> service des applications et des utilisateurs.  Q vous permet de mettre en ≈ìuvre un traitement compl√®tement asynchrone des messages entrants, en les r√©partissant entre les bases de donn√©es, en v√©rifiant les droits d'acc√®s, etc.  Je note que les messages ne sont pas limit√©s et le plus souvent ne sont pas des instructions SQL, comme c'est le cas dans d'autres bases de donn√©es.  Le plus souvent, l'expression SQL est cach√©e dans une fonction sp√©ciale et est construite en fonction des param√®tres demand√©s par l'utilisateur - le temps est converti, filtr√©, les donn√©es sont normalis√©es (par exemple, le prix des actions est √©galis√© si des dividendes ont √©t√© pay√©s), etc. <br></li></ul><br>  Architecture typique pour un type de donn√©es: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99a/13e/5e9/99a13e5e9813f09a2d40b676669c052a.png"><br><br><h2>  La vitesse </h2><br>  Bien que Q soit un langage interpr√©t√©, il est simultan√©ment un langage vectoriel.  Cela signifie que de nombreuses fonctions int√©gr√©es, en particulier l'arithm√©tique, acceptent des arguments de toute forme - nombres, vecteurs, matrices, listes, et le programmeur devrait impl√©menter le programme comme des op√©rations sur des tableaux.  Dans un tel langage, si vous ajoutez deux vecteurs dans un million d'√©l√©ments, peu importe que le langage soit interpr√©t√©, l'addition sera effectu√©e par une fonction binaire superoptimis√©e.  √âtant donn√© que la majeure partie du temps dans les programmes Q est consacr√©e √† des op√©rations avec des tables utilisant ces fonctions vectoris√©es de base, la sortie a une vitesse tr√®s d√©cente qui vous permet de traiter une √©norme quantit√© de donn√©es m√™me en un seul processus.  Ceci est similaire aux biblioth√®ques math√©matiques de python - bien que python lui-m√™me soit un langage tr√®s lent, il poss√®de de nombreuses biblioth√®ques numpy excellentes qui vous permettent de traiter des donn√©es num√©riques √† la vitesse d'un langage compil√© (en passant, numpy est id√©ologiquement proche de Q). <br><br>  De plus, KX a tr√®s soigneusement abord√© la conception des tables et optimis√© le travail avec elles.  Premi√®rement, plusieurs types d'index sont pris en charge, qui sont pris en charge par les fonctions int√©gr√©es et peuvent √™tre appliqu√©s non seulement aux colonnes de table, mais √©galement √† tous les vecteurs - regroupement, tri, attribut d'unicit√© et regroupement sp√©cial pour les bases de donn√©es historiques.  L'index est superpos√© √©l√©mentairement et est automatiquement ajust√© lors de l'ajout d'√©l√©ments √† la colonne / au vecteur.  Les index peuvent √©galement chevaucher des colonnes de table en m√©moire et sur disque.  Lors de l'ex√©cution d'une requ√™te QSQL, les index sont utilis√©s automatiquement, si possible.  Deuxi√®mement, le travail avec les donn√©es historiques se fait via le m√©canisme de mappage de fichiers OS (carte m√©moire).  Les grandes tables ne sont jamais charg√©es en m√©moire, au lieu de cela, les colonnes n√©cessaires sont directement mapp√©es en m√©moire et seule cette partie d'entre elles est r√©ellement charg√©e (les index aident ici aussi).  Il n'y a aucune diff√©rence pour le programmeur, que les donn√©es soient en m√©moire ou non, le m√©canisme de travail avec mmap est compl√®tement cach√© dans les entrailles de Q. <br><br>  KDB + n'est pas une base de donn√©es relationnelle, les tables peuvent contenir des donn√©es arbitraires, tandis que l'ordre des lignes dans la table ne change pas lorsque de nouveaux √©l√©ments sont ajout√©s et peuvent et doivent √™tre utilis√©s lors de l'√©criture de requ√™tes.  Cette fonctionnalit√© est requise de toute urgence pour travailler avec des s√©ries chronologiques (donn√©es d'√©changes, t√©l√©m√©trie, journaux d'√©v√©nements), car si les donn√©es sont tri√©es par heure, l'utilisateur n'a pas besoin d'utiliser d'astuces SQL pour trouver la premi√®re ou la derni√®re ligne ou N lignes dans la table , d√©terminez quelle ligne suit la Ni√®me ligne, etc.  Les jointures de tableaux sont encore plus simplifi√©es, par exemple, en trouvant pour 16 000 transactions VOD.L (Vodafone) la derni√®re cotation dans un tableau de 500 millions d'√©l√©ments prend environ une seconde sur disque et une dizaine de millisecondes en m√©moire. <br><br>  Un exemple de jointure temporelle est que la table de devis est mapp√©e en m√©moire, il n'est donc pas n√©cessaire de sp√©cifier VOD.L o√π, l'index de la colonne sym est implicitement utilis√© et le fait que les donn√©es sont tri√©es par heure.  Presque toutes les jointures dans Q sont des fonctions ordinaires, ne faisant pas partie de l'instruction select: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> aj[`sym`time;<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> trade <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> date=<span class="hljs-number"><span class="hljs-number">2019.03</span></span><span class="hljs-number"><span class="hljs-number">.26</span></span>, sym=`VOD.L;<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> quote <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> date=<span class="hljs-number"><span class="hljs-number">2019.03</span></span><span class="hljs-number"><span class="hljs-number">.26</span></span>]</code> </pre><br>  Enfin, il convient de noter que les ing√©nieurs de KX, √† commencer par Arthur Whitney lui-m√™me, sont vraiment obs√©d√©s par l'efficacit√© et s'efforcent de tirer le meilleur parti des fonctions Q standard et d'optimiser les mod√®les d'utilisation les plus courants. <br><br><h2>  R√©sum√© </h2><br>  KDB + est populaire parmi les entreprises principalement en raison de sa polyvalence exceptionnelle - il sert aussi bien comme base en m√©moire que comme base de stockage de t√©raoctets de donn√©es historiques et comme plate-forme d'analyse de donn√©es.  Du fait que le traitement des donn√©es s'effectue directement dans la base de donn√©es, une vitesse de fonctionnement √©lev√©e et une √©conomie de ressources sont obtenues.  Un langage de programmation √† part enti√®re, int√©gr√© aux fonctions de la base de donn√©es, vous permet de mettre en ≈ìuvre sur la m√™me plate-forme toute la pile des processus n√©cessaires - de la r√©ception des donn√©es au traitement des demandes des utilisateurs. <br><br><h2>  Information additionnelle </h2><br><h3>  Inconv√©nients </h3><br>  Un inconv√©nient important de KDB + / Q est son seuil d'entr√©e √©lev√©.  Le langage a une syntaxe √©trange, certaines fonctions sont fortement surcharg√©es (la valeur, par exemple, a environ 11 cas d'utilisation).  Plus important encore, cela n√©cessite une approche radicalement diff√©rente de l'√©criture de programmes.  Dans un langage vectoriel, vous devez penser tout le temps en termes de transformations de tableaux, impl√©menter tous les cycles √† travers plusieurs options des fonctions map / r√©duire (appel√©es adverbes en Q), ne jamais essayer d'√©conomiser de l'argent en rempla√ßant les op√©rations vectorielles par des op√©rations atomiques.  Par exemple, pour trouver l'index de la N√®me occurrence d'un √©l√©ment dans un tableau, √©crivez: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">where</span></span> element=vector)[N]</code> </pre><br>  bien que cela semble terriblement inefficace par rapport aux normes C / Java (= cr√©e un vecteur bool√©en, o√π renvoie les indices des vrais √©l√©ments qu'il contient).  Mais un tel enregistrement rend le sens de l'expression plus compr√©hensible et vous utilisez des op√©rations vectorielles rapides au lieu de celles atomiques lentes.  La diff√©rence conceptuelle entre le langage vectoriel et le reste est comparable √† la diff√©rence entre les approches imp√©ratives et fonctionnelles de la programmation, et vous devez vous y pr√©parer. <br><br>  Certains utilisateurs sont √©galement m√©contents de QSQL.  Le fait est qu'il ne ressemble qu'√† du vrai SQL.  En fait, c'est juste un interpr√©teur d'expressions de type SQL qui ne prend pas en charge l'optimisation des requ√™tes.  L'utilisateur lui-m√™me doit √©crire les requ√™tes optimales, et sur Q, pour lesquelles beaucoup ne sont pas pr√™tes.  D'un autre c√¥t√©, bien s√ªr, vous pouvez toujours √©crire votre propre requ√™te optimale vous-m√™me, et ne pas compter sur un optimiseur de bo√Æte noire. <br><br>  En plus, un livre sur Q - Q For Mortals est disponible gratuitement sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web de l'entreprise</a> , et il existe √©galement de nombreux autres documents utiles. <br><br>  Un autre gros inconv√©nient est le co√ªt de la licence.  Cela repr√©sente des dizaines de milliers de dollars par an pour un processeur.  Seules les grandes entreprises peuvent se permettre de telles d√©penses.  R√©cemment, KX a rendu la politique de licence plus flexible et offre la possibilit√© de payer uniquement pour le temps d'utilisation ou de louer KDB + dans les clouds Google et Amazon.  KX propose √©galement de t√©l√©charger une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">version gratuite √† des fins non commerciales</a> (version 32 bits ou 64 bits sur demande). <br><br><h3>  Concurrents </h3><br>  Il existe un certain nombre de bases de donn√©es sp√©cialis√©es reposant sur des principes similaires - en colonnes, en m√©moire, ax√©es sur de tr√®s grandes quantit√©s de donn√©es.  Le probl√®me est qu'il s'agit de bases de donn√©es sp√©cialis√©es.  Un exemple typique est Clickhouse.  Cette base de donn√©es a un principe tr√®s similaire au stockage de donn√©es sur disque et √† la construction de l'index KDB +; elle effectue certaines requ√™tes plus rapidement que KDB +, mais pas de mani√®re significative.  Mais m√™me si la base de donn√©es Clickhouse est plus sp√©cialis√©e que KDB + - analyse Web vs s√©ries temporelles arbitraires (cette diff√©rence est tr√®s importante - √† cause de cela, par exemple, il n'y a aucun moyen d'utiliser l'ordre des enregistrements dans Clickhouse).  Mais, plus important encore, Clickhouse n'a pas l'universalit√© de KDB +, un langage qui permettrait de traiter les donn√©es directement dans la base de donn√©es, plut√¥t que de les charger pr√©c√©demment dans une application distincte, de cr√©er des expressions SQL arbitraires, d'appliquer des fonctions arbitraires dans une requ√™te, de cr√©er des processus non li√©s √† l'ex√©cution des fonctions de base de donn√©es historiques. .  Par cons√©quent, il est difficile de comparer KDB + avec d'autres bases de donn√©es, elles peuvent √™tre meilleures dans des cas d'utilisation distincts ou simplement meilleures si nous parlons des t√¢ches des bases de donn√©es classiques, mais je ne connais pas d'autre outil tout aussi efficace et universel pour le traitement des donn√©es temporaires. <br><br><h3>  Int√©gration Python </h3><br>  Pour rendre KDB + plus facile pour les personnes nouvelles dans la technologie, KX a cr√©√© des biblioth√®ques pour une int√©gration √©troite avec Python dans un seul processus.  Vous pouvez soit appeler n'importe quelle fonction python depuis Q, ou vice versa - appeler n'importe quelle fonction Q depuis Python (en particulier les expressions QSQL).  Les biblioth√®ques convertissent si n√©cessaire (pour des raisons d'efficacit√© pas toujours) les donn√©es du format d'une langue au format d'une autre.  En cons√©quence, Q et Python vivent dans une symbiose si √©troite que les fronti√®res entre eux sont effac√©es.  En cons√©quence, un programmeur, d'une part, a un acc√®s complet √† de nombreuses biblioth√®ques Python utiles, d'autre part, il obtient une base rapide pour travailler avec des m√©gadonn√©es int√©gr√©es dans Python, ce qui est particuli√®rement utile pour ceux impliqu√©s dans l'apprentissage automatique ou la mod√©lisation. <br><br>  Travailler avec Q en Python: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> &gt;&gt;&gt; q() <span class="hljs-number"><span class="hljs-number">2.</span></span>q)trade:([]date:();sym:();qty:()) <span class="hljs-number"><span class="hljs-number">3.</span></span> q)\ <span class="hljs-number"><span class="hljs-number">4.</span></span> &gt;&gt;&gt; q.insert(<span class="hljs-string"><span class="hljs-string">'trade'</span></span>, (date(<span class="hljs-number"><span class="hljs-number">2006</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>)) <span class="hljs-number"><span class="hljs-number">5.</span></span> k(<span class="hljs-string"><span class="hljs-string">',0'</span></span>) <span class="hljs-number"><span class="hljs-number">6.</span></span> &gt;&gt;&gt; q.insert(<span class="hljs-string"><span class="hljs-string">'trade'</span></span>, (date(<span class="hljs-number"><span class="hljs-number">2006</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), <span class="hljs-string"><span class="hljs-string">'MSFT'</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>)) <span class="hljs-number"><span class="hljs-number">7.</span></span> k(<span class="hljs-string"><span class="hljs-string">',1'</span></span>)</code> </pre><br><h3>  Les r√©f√©rences </h3><br>  Site Web de l'entreprise - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://kx.com/</a> <br>  Site Web pour les d√©veloppeurs - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://code.kx.com/v2/</a> <br>  Livre Q For Mortals (en anglais) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://code.kx.com/q4m3/</a> <br>  Articles sur le sujet des applications KDB + / Q des employ√©s de kx - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://code.kx.com/v2/wp/</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr446412/">https://habr.com/ru/post/fr446412/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr446396/index.html">R√©initialisation du compteur hebdomadaire GPS</a></li>
<li><a href="../fr446400/index.html">Dmitry Dumik, Chatfuel: √Ä propos de Y Combinator, entrepreneuriat technologique, changement de comportement et sensibilisation</a></li>
<li><a href="../fr446402/index.html">Applications multilingues en angulaire</a></li>
<li><a href="../fr446404/index.html">Alternatives modernes au PGP</a></li>
<li><a href="../fr446408/index.html">DRO universel bas√© sur Arduino Nano - shDRO</a></li>
<li><a href="../fr446414/index.html">Une bonne chose n'est pas appel√©e rouille</a></li>
<li><a href="../fr446418/index.html">Cloudflare a pr√©sent√© son propre service VPN bas√© sur l'application 1.1.1.1 pour les appareils mobiles</a></li>
<li><a href="../fr446422/index.html">QuietOn - des √©couteurs qui tuent ...</a></li>
<li><a href="../fr446424/index.html">Historique d'un rapport</a></li>
<li><a href="../fr446428/index.html">Comment l'usine de bourdons de HR a construit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>