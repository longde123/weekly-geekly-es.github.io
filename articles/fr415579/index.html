<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍⚖️ 🍊 👁‍🗨 Apprenez OpenGL. Leçon 5.5 - Cartographie normale 🛷 🎫 ✌🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cartographie normale 
 Toutes les scènes que nous utilisons sont constituées de polygones, eux-mêmes constitués de centaines, de milliers de triangles...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apprenez OpenGL. Leçon 5.5 - Cartographie normale</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415579/"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" width="300"><br><h1>  Cartographie normale </h1><br>  Toutes les scènes que nous utilisons sont constituées de polygones, eux-mêmes constitués de centaines, de milliers de triangles absolument plats.  Nous avons déjà réussi à augmenter légèrement le réalisme des scènes grâce à des détails supplémentaires qui fournissent l'application de textures bidimensionnelles sur ces triangles plats.  La texturation permet de masquer le fait que tous les objets de la scène ne sont qu'une collection de nombreux petits triangles.  Une grande technique, mais ses possibilités ne sont pas illimitées: à l'approche de n'importe quelle surface, tout le monde se rend compte qu'elle est constituée de surfaces planes.  La plupart des objets réels ne sont pas complètement plats et montrent beaucoup de détails en relief. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Table des matières</b> <div class="spoiler_text">  Partie 1. Pour commencer <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Création de fenêtres</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bonjour fenêtre</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bonjour triangle</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shaders</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Textures</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Transformations</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Systèmes de coordonnées</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Appareil photo</a> </li></ol><br>  Partie 2. Éclairage de base <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les couleurs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bases d'éclairage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Matériaux</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes de texture</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources lumineuses</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources d'éclairage multiples</a> </li></ol><br>  Partie 3. Télécharger des modèles 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bibliothèque Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Classe de polygone de maillage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Classe de modèle 3D</a> </li></ol><br>  Partie 4. Fonctionnalités avancées d'OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test de profondeur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test au pochoir</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mélange de couleurs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Couper les visages</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tampon de trame</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes cubiques</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Traitement avancé des données</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GLSL avancé</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shader géométrique</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Instanciation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lissage</a> </li></ol><br>  Partie 5. Éclairage avancé <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Éclairage avancé.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Modèle Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Correction gamma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes fantômes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes ombrées omnidirectionnelles</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartographie normale</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mappage de parallaxe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rendu différé</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SSAO</a> </li></ol><br>  Partie 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Théorie</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources de lumière analytiques</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Irradiation diffuse.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exposition miroir.</a> </li></ol><br></div></div><br>  Par exemple, prenez la maçonnerie.  Sa surface est très rugueuse et, évidemment, n'est pas représentée par un plan: il y a des évidements avec du ciment et de nombreux petits détails tels que des trous et des fissures.  Si nous analysons une scène avec imitation de maçonnerie en présence d'éclairage, l'illusion d'un relief de surface est très facilement détruite.  Voici un exemple d'une telle scène contenant un plan avec une texture de maçonnerie et une source de lumière ponctuelle: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lo/-g/gf/lo-ggfg3yplmjm4cx-6bq74m_6g.png"></div><br>  Comme vous pouvez le voir, l'éclairage ne prend pas du tout en compte les détails de relief supposés pour cette surface: toutes les petites fissures et cavités avec du ciment sont également indiscernables du reste de la surface.  On pourrait utiliser une carte brillante spéculaire afin de limiter l'illumination de certains détails qui se trouvent dans les creux de la surface.  Mais cela ressemble plus à un hack sale qu'à une solution de travail.  Ce dont nous avons besoin, c'est d'un moyen de fournir aux équations d'éclairage des données sur le microrelief en surface. <br>  Dans le cadre des équations d'éclairage connues de nous, considérons cette question: dans quelles conditions la surface sera-t-elle illuminée comme parfaitement plane?  La réponse est liée à la normale à la surface.  Du point de vue de l'algorithme d'éclairage, les informations sur la forme de la surface ne sont transmises que par le vecteur normal.  Puisque le vecteur normal est constant partout sur la surface présentée ci-dessus, l'illumination sort également uniforme, correspondant au plan.  Mais que se passe-t-il si nous passons à l'algorithme d'éclairage non pas la seule constante normale pour tous les fragments appartenant à l'objet, mais la normale unique pour chaque fragment?  Ainsi, le vecteur normal changera légèrement en fonction de la topographie de la surface, ce qui créera une illusion plus convaincante de la complexité de la surface: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/y_/68/kay_684wpm4mpkko92gl1nemjh4.png"></div><br>  Grâce à l'utilisation de normales fragmentairement différentes, l'algorithme d'éclairage considérera la surface comme composée de nombreux plans microscopiques perpendiculaires à son vecteur normal.  En conséquence, cela ajoutera considérablement de la texture à l'objet.  La technique d'application de normales uniques à un fragment, et non à toute la surface - c'est la <b>cartographie normale</b> ou la <b>cartographie de relief</b> .  Comme appliqué à une scène déjà familière: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0c/pp/vt/0cppvtgpjw48at0r2crvdy3omfg.png"></div><br>  Vous pouvez voir l'augmentation impressionnante de la complexité visuelle en raison du coût très modeste des performances.  Puisque nous sommes tous des changements dans le modèle d'éclairage qui ne sont que dans la fourniture d'une normale unique dans chaque fragment, aucune formule de calcul n'est modifiée.  Ce n'est qu'à l'entrée, au lieu de la normale interpolée, que la normale du fragment courant vient à la surface.  Toutes les mêmes équations d'éclairage font le reste du travail pour créer l'illusion de relief. <br><br><h2>  Cartographie normale </h2><br>  Il s'avère donc que nous devons fournir à l'algorithme d'éclairage des normales qui sont uniques à chaque fragment.  Nous utiliserons la méthode déjà familière dans les textures de réflexion diffuse et spéculaire et utiliserons la texture 2D habituelle pour stocker des données normales à chaque point de la surface.  Ne soyez pas surpris, les textures sont également idéales pour stocker des vecteurs normaux.  Il suffit ensuite de sélectionner dans la texture, de restaurer le vecteur normal et d'effectuer des calculs d'éclairage. <br><br>  À première vue, il peut ne pas être très clair comment enregistrer les données vectorielles dans une texture régulière, qui est généralement utilisée pour stocker des informations sur les couleurs.  Mais réfléchissez un instant: la triade de couleurs RVB est essentiellement un vecteur tridimensionnel.  De la même manière, vous pouvez enregistrer les composants du vecteur normal XYZ dans les composants de couleur correspondants.  Les valeurs des composantes du vecteur normal se situent dans l'intervalle [-1, 1] et nécessitent donc une conversion supplémentaire à l'intervalle [0, 1]: <br><br><pre><code class="cpp hljs">vec3 rgb_normal = normal * <span class="hljs-number"><span class="hljs-number">0.5</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   [-1,1]  [0,1]</span></span></code> </pre> <br>  Une telle réduction du vecteur normal à l'espace des composantes de couleur RVB nous permettra de sauvegarder le vecteur normal dans la texture, obtenu sur la base du relief réel de l'objet modélisé et unique pour chaque fragment.  Un exemple d'une telle texture - cartes normales - pour la même maçonnerie: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/si/jp/nb/sijpnb3we6vaxhlr4eeh9jp3mvq.png"></div><br>  Il est intéressant de noter la teinte bleue de cette carte normale (presque toutes les cartes normales ont une teinte similaire).  Cela se produit parce que toutes les normales sont orientées approximativement le long de l'axe oZ, qui est représenté par le triple de coordonnées (0, 0, 1), c'est-à-dire  sous la forme d'une triade de couleurs - bleu pur.  De petits changements de teinte sont la conséquence de la déviation des normales du demi-axe positif oZ dans certaines zones, ce qui correspond à un terrain inégal.  Ainsi, vous pouvez voir que sur les bords supérieurs de chaque brique, la texture prend une teinte verte.  Et c'est logique: sur les faces supérieures de la brique, les normales doivent être davantage orientées vers l'axe oY (0, 1, 0), ce qui correspond au vert. <br><br>  Pour la scène de test, prenez un plan orienté vers le demi-axe positif oZ et utilisez pour cela la <a href="">carte diffuse</a> et <a href="">la carte normale suivantes</a> . <br><blockquote>  Veuillez noter que la carte normale sur le lien et dans l'image ci-dessus est différente.  Dans l'article, l'auteur mentionne plutôt nonchalamment les raisons des différences, se limitant à conseiller les cartes normales à convertir de sorte que la composante verte indique «bas» plutôt que «haut» dans le système local au plan de texture. <br>  Si vous regardez plus en détail, deux facteurs interagissent ici: <br><ul><li>  La différence réside dans la façon dont les texels sont traités dans la mémoire client et dans la mémoire de texture OpenGL </li><li>  La présence de deux notations pour les cartes normales.  Classiquement, deux camps: style DirectX et style OpenGL </li></ul><br>  En ce qui concerne les notations normales de carte, deux camps sont historiquement familiers: DirectX et OpenGL. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vt/f_/bo/vtf_botw_8tazlodtepbgp0zyvk.png"></div><br>  Apparemment, ils ne sont pas compatibles.  Et avec un peu de réflexion, vous pouvez comprendre que DirectX considère l'espace tangent comme étant gaucher et OpenGL comme droitier.  Faire glisser la carte normale X de notre application sans aucune modification entraînera un éclairage incorrect, et il n'est pas toujours immédiatement clair qu'elle est incorrecte.  Plus particulièrement, les renflements au format OpenGL deviennent des indentations pour DirectX et vice versa. <br>  Quant à l'adressage: chargement des données d'un fichier de texture en mémoire, nous supposons que le premier texel est le texel supérieur gauche de l'image.  Pour représenter des données de texture dans la mémoire d'application, cela est généralement vrai.  Mais OpenGL utilise un système de coordonnées de texture différent: pour cela, le premier texel est en bas à gauche.  Pour une texturation correcte, les images sont généralement inversées le long de l'axe Y dans le code de l'un ou l'autre chargeur de fichier image.  Pour Stb_image utilisé dans les leçons, vous devez ajouter une case à cocher <br><br><pre> <code class="cpp hljs">stbi_set_flip_vertically_on_load(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br>  Le plus drôle est que deux options sont correctement affichées en termes d'éclairage: une carte normale en notation OpenGL avec réflexion Y activée ou une carte normale en notation DirectX avec réflexion Y désactivée. L'éclairage dans les deux cas fonctionne correctement, la différence ne restera que dans l'inverse de la texture le long de l'axe Y. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ld/tq/1m/ldtq1mzn-lkbnz3tqeuqvs0n6ke.jpeg"></div><br><br>  <b><i>Remarque</i></b>  <b><i>trans.</i></b> <br></blockquote><br>  Donc, chargez les deux textures, liez-les aux blocs de texture et rendez le plan préparé, en tenant compte des modifications suivantes du code du shader de fragment: <br><br><pre> <code class="cpp hljs">uniform sampler2D normalMap; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         [0,1] normal = texture(normalMap, fs_in.TexCoords).rgb; //      [-1,1] normal = normalize(normal * 2.0 - 1.0); [...] //  ... }</span></span></code> </pre> <br>  Ici, nous appliquons la transformation inverse de l'espace de valeurs RVB à un vecteur normal complet, puis nous l'utilisons simplement dans le modèle d'éclairage Blinn-Fong bien connu. <br><br>  Maintenant, si vous changez lentement la position de la source de lumière dans la scène, vous pouvez sentir l'illusion du relief de surface fourni par la carte normale: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ii/3v/fm/ii3vfmiowd37o6nqoyp7e3tlaay.png"></div><br>  Mais il reste un problème qui réduit considérablement la plage d'utilisation possible des cartes normales.  Comme déjà noté, la teinte bleue de la carte normale laissait entendre que tous les vecteurs de la texture sont orientés en moyenne le long de l'axe positif oZ.  Dans notre scène, cela n'a pas créé de problèmes, car la normale à la surface de l'avion était également alignée avec oZ.  Cependant, que se passe-t-il si nous modifions la position du plan dans la scène afin que la normale à celui-ci soit alignée avec l'axe positif oY? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ni/2h/md/ni2hmdd81cp3updbfbl7z9iilxw.png"></div><br>  L'éclairage s'est avéré complètement faux!  Et la raison est simple: les normales de la carte renvoient toujours des vecteurs orientés le long du demi-axe positif oZ, bien que dans ce cas, ils devraient être orientés dans la direction du demi-axe positif oY de la normale de surface.  Dans le même temps, le calcul de l'éclairage est comme si les normales à la surface étaient situées comme si le plan était toujours orienté vers le demi-axe positif oZ, ce qui donne un résultat incorrect.  La figure ci-dessous montre plus clairement l'orientation des normales lues sur la carte par rapport à la surface: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wt/dn/wl/wtdnwlrqopjfi5vjpiflloybohm.png"></div><br>  On peut voir que les normales sont généralement alignées le long du demi-axe positif oZ, bien qu'elles auraient dû être alignées le long de la normale à la surface qui est dirigée le long du demi-axe positif oY. <br>  Une solution possible serait d'établir une carte normale distincte pour chaque orientation de la surface considérée.  Pour un cube, six cartes normales seraient nécessaires, mais pour des modèles plus complexes, le nombre d'orientations possibles peut être trop élevé et ne pas convenir à la mise en œuvre. <br><br>  Il existe une autre approche, mathématiquement plus compliquée, qui propose de calculer l'éclairage dans un système de coordonnées différent: de telle sorte que les vecteurs normaux coïncident toujours approximativement avec le demi-axe positif oZ.  Les autres vecteurs requis pour les calculs d'éclairage sont ensuite convertis dans ce système de coordonnées.  Cette méthode permet d'utiliser une carte normale pour n'importe quelle orientation de l'objet.  Et ce système de coordonnées spécifique est appelé <b>espace</b> <b>tangent</b> ou <b>espace tangent</b> . <br><br><h2>  Espace tangent </h2><br>  Il convient de noter que le vecteur normal dans la carte normale est exprimé directement dans l'espace tangent, c'est-à-dire  dans un système de coordonnées tel que la normale soit toujours dirigée approximativement dans la direction du demi-axe positif oZ.  L'espace tangent est défini comme un système de coordonnées local au plan du triangle, et chaque vecteur normal est défini dans ce système de coordonnées.  Vous pouvez imaginer ce système comme un système de coordonnées locales pour une carte normale: tous les vecteurs qu'il contient sont dirigés vers le demi-axe positif oZ, quelle que soit l'orientation finale de la surface.  En utilisant des matrices de transformation spécialement préparées, il est possible de transformer des vecteurs normaux de ce système de coordonnées tangentes locales en coordonnées mondiales ou de vue, en les orientant en fonction de la position finale des surfaces texturées. <br>  Prenons l'exemple précédent avec l'utilisation incorrecte de la cartographie normale, où le plan était orienté le long de l'axe positif oY.  Étant donné que la carte des normales est définie dans l'espace tangent, l'une des options de réglage consiste à calculer la matrice de transition des normales de l'espace tangent à celles-ci devenant orientées normalement par rapport à la surface.  Cela entraînerait l'alignement des normales le long de l'axe positif oY.  Une propriété remarquable de l'espace tangent est le fait qu'en calculant une telle matrice nous pouvons réorienter les normales vers n'importe quelle surface et son orientation. <br><br>  Une telle matrice est abrégée en <i>TBN</i> , qui est une abréviation pour le nom du triple des vecteurs <i>Tangent</i> , <i>Bitangent</i> et <i>Normal</i> .  Nous devons trouver ces trois vecteurs afin de former cette matrice de changement de base.  Une telle matrice fait la transition d'un vecteur de l'espace tangent à un autre et pour sa formation trois vecteurs mutuellement perpendiculaires sont nécessaires, dont l'orientation correspond à l'orientation du plan normal de la carte.  C'est un vecteur de direction vers le haut, vers la droite et vers l'avant, un ensemble qui nous est familier de la leçon sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">caméra virtuelle</a> . <br>  Avec le vecteur du haut, tout est clair tout de suite - c'est notre vecteur normal.  Les <i>vecteurs</i> droit et avant sont respectivement appelés tangents et <i>bitangents</i> .  La figure suivante donne une idée de leur position relative sur le plan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/su/id/oz/suidozydrgjf0miyfpocfndaiu0.png"></div><br>  Le calcul de la tangente et de la bi-tangente n'est pas aussi évident que le calcul du vecteur normal.  Dans la figure, vous pouvez voir que les directions de la tangente et la carte tangente de la normale sont alignées avec les axes qui spécifient les coordonnées de texture de la surface.  Ce fait est la base du calcul de ces deux vecteurs, ce qui nécessitera une certaine compétence en mathématiques.  Regardez l'image: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4a/nq/k0/4anqk0pjl85p8ei96uporxchq6s.png"></div><br>  Modifications des coordonnées de texture le long d'une face triangulaire <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-1"> E_2 </script>  désigné comme <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.993ex" height="2.298ex" viewBox="0 -780.1 3871.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="2205" y="0"></use><g transform="translate(2734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="966" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ Delta U_2 </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.761ex" height="2.298ex" viewBox="0 -780.1 3771.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="2205" y="0"></use><g transform="translate(2734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="825" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ Delta V_2 </script>  exprimé dans les mêmes directions que les vecteurs tangents <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> T </script>  et bi-tangente <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> B </script>  .  Sur la base de ce fait, vous pouvez exprimer les bords d'un triangle <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> E_1 </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> E_2 </script>  sous la forme d'une combinaison linéaire de vecteurs tangents et bi-tangents: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mi>T</mi><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mi>B</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.862ex" height="2.298ex" viewBox="0 -780.1 12857.2 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-3D" x="1470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="2776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="3604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="4071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="4369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="4731" y="0"></use><g transform="translate(5260,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="6398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2B" x="7325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="8575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="9404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="9870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="10169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="10530" y="0"></use><g transform="translate(11060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="12097" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mi>T</mi><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mi>B</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> E_1 = \ Delta U_1T + \ Delta V_1B </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>E</mi><mn>2</mn></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mi>T</mi><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mi>B</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.862ex" height="2.298ex" viewBox="0 -780.1 12857.2 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-3D" x="1470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="2776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="3604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="4071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="4369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="4731" y="0"></use><g transform="translate(5260,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="6398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2B" x="7325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="8575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="9404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="9870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="10169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="10530" y="0"></use><g transform="translate(11060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="12097" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>E</mi><mn>2</mn></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mi>T</mi><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mi>B</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-9"> E_2 = \ Delta U_2T + \ Delta V_2B </script></p><br>  En nous transformant en un enregistrement au niveau du bit, nous obtenons: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mi>z</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="61.971ex" height="2.78ex" viewBox="0 -832 26681.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-78" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="1986" y="0"></use><g transform="translate(2431,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-79" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="3976" y="0"></use><g transform="translate(4421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-7A" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-29" x="5944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-3D" x="6612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="7918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="8746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="9213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="9511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="9873" y="0"></use><g transform="translate(10402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-28" x="11540" y="0"></use><g transform="translate(11929,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-78" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="13019" y="0"></use><g transform="translate(13464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-79" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="14500" y="0"></use><g transform="translate(14945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-7A" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-29" x="15961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2B" x="16573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="17824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="18652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="19119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="19417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="19779" y="0"></use><g transform="translate(20308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-31" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-28" x="21345" y="0"></use><g transform="translate(21735,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-78" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="22999" y="0"></use><g transform="translate(23444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-79" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="24656" y="0"></use><g transform="translate(25101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-7A" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-29" x="26292" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mi>z</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> (E_ {1x}, E_ {1y}, E_ {1z}) = \ Delta U_1 (T_x, T_y, T_z) + \ Delta V_1 (B_x, B_y, B_z) </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mi>z</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="61.971ex" height="2.78ex" viewBox="0 -832 26681.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-78" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="1986" y="0"></use><g transform="translate(2431,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-79" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="3976" y="0"></use><g transform="translate(4421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-7A" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-29" x="5944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-3D" x="6612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="7918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="8746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="9213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="9511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="9873" y="0"></use><g transform="translate(10402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-28" x="11540" y="0"></use><g transform="translate(11929,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-78" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="13019" y="0"></use><g transform="translate(13464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-79" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="14500" y="0"></use><g transform="translate(14945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-7A" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-29" x="15961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2B" x="16573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="17824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="18652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="19119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="19417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="19779" y="0"></use><g transform="translate(20308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-32" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-28" x="21345" y="0"></use><g transform="translate(21735,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-78" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="22999" y="0"></use><g transform="translate(23444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-79" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-2C" x="24656" y="0"></use><g transform="translate(25101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-7A" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMAIN-29" x="26292" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mi>z</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> (E_ {2x}, E_ {2y}, E_ {2z}) = \ Delta U_2 (T_x, T_y, T_z) + \ Delta V_2 (B_x, B_y, B_z) </script></p><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>E</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.776ex" height="2.057ex" viewBox="0 -780.1 764.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-45" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>E</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> E </script>  est calculé comme le vecteur de la différence de deux vecteurs, et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.134ex" height="2.057ex" viewBox="0 -780.1 3502 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-55" x="2734" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> \ Delta U </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.138ex" height="2.057ex" viewBox="0 -780.1 3504 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-56" x="2734" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> \ Delta V </script>  comme la différence de coordonnées de texture.  Reste à trouver deux inconnues dans deux équations: la tangente <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> T </script>  et biais <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> B </script>  .  Si vous vous souvenez des leçons d'algèbre, vous savez que de telles conditions permettent de résoudre le système de <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-17"> T </script>  et pour <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-18"> B </script>  . <br>  La dernière forme d'équations donnée nous permet de la réécrire sous forme de multiplication matricielle: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;E_&amp;#xA0;{1x}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{1y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{1z}&amp;#xA0;\\&amp;#xA0;E_&amp;#xA0;{2x}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{2y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{2z}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1&amp;#xA0;\\&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;T_x&amp;#xA0;&amp;amp;&amp;#xA0;T_y&amp;#xA0;&amp;amp;&amp;#xA0;T_z&amp;#xA0;\\&amp;#xA0;B_x&amp;#xA0;&amp;amp;&amp;#xA0;B_y&amp;#xA0;&amp;amp;&amp;#xA0;B_z&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}</mtext></merror></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><span class="noError" aria-hidden="true" style="display: inline-block;">\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;&amp;&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;&amp;&nbsp;E_&nbsp;{2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;&amp;&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;&amp;&nbsp;E_&nbsp;{2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-19"> \ begin {bmatrix} E_ {1x} & E_ {1y} & E_ {1z} \\ E_ {2x} & E_ {2y} & E_ {2z} \ end {bmatrix} = \ begin {bmatrix} \ Delta U_1 & \ Delta V_1 \\ \ Delta U_2 & \ Delta V_2 \ end {bmatrix} \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} </script></p><br>  Essayez de faire une multiplication matricielle dans votre esprit pour vous assurer que l'enregistrement est correct.  L'écriture d'un système sous forme matricielle facilite la compréhension de l'approche de recherche <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-20"> T </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-21"> B </script>  .  Multipliez les deux côtés de l'équation par l'inverse de <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.272ex" height="2.057ex" viewBox="0 -780.1 7006 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-55" x="2734" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-44" x="3752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-65" x="4580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-6C" x="5047" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-74" x="5345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-61" x="5707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-56" x="6236" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-22"> \ Delta U \ Delta V </script>  : <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1&amp;#xA0;\\&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;^&amp;#xA0;{-&amp;#xA0;1}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;E_&amp;#xA0;{1x}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{1y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{1z&amp;#xA0;}&amp;#xA0;\\&amp;#xA0;E_&amp;#xA0;{2x}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{2y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{2z}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;T_x&amp;#xA0;&amp;amp;&amp;#xA0;T_y&amp;#xA0;&amp;amp;&amp;#xA0;T_z&amp;#xA0;\\&amp;#xA0;B_x&amp;#xA0;&amp;amp;&amp;#xA0;B_y&amp;#xA0;&amp;amp;&amp;#xA0;B_z&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}</mtext></merror></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><span class="noError" aria-hidden="true" style="display: inline-block;">\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;^&nbsp;{-&nbsp;1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;&amp;&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z&nbsp;}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;&amp;&nbsp;E_&nbsp;{2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;^&nbsp;{-&nbsp;1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;&amp;&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z&nbsp;}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;&amp;&nbsp;E_&nbsp;{2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-23"> \ begin {bmatrix} \ Delta U_1 & \ Delta V_1 \\ \ Delta U_2 & \ Delta V_2 \ end {bmatrix} ^ {- 1} \ begin {bmatrix} E_ {1x} & E_ {1y} & E_ {1z } \\ E_ {2x} & E_ {2y} & E_ {2z} \ end {bmatrix} = \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} </script></p><br>  Nous obtenons une décision concernant <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-24"> T </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-25"> B </script>  , ce qui nécessite cependant le calcul de la matrice inverse des changements de coordonnées de texture.  Nous n'entrerons pas dans les détails du calcul des matrices inverses - l'expression de la matrice inverse ressemble au produit du nombre inverse du déterminant de la matrice d'origine et de la matrice adjointe: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;T_x&amp;#xA0;&amp;amp;&amp;#xA0;T_y&amp;#xA0;&amp;amp;&amp;#xA0;T_z&amp;#xA0;\\&amp;#xA0;B_x&amp;#xA0;&amp;amp;&amp;#xA0;B_y&amp;#xA0;&amp;amp;&amp;#xA0;B_z&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;frac&amp;#xA0;{1}&amp;#xA0;{\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;-&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;&amp;amp;&amp;#xA0;-&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1&amp;#xA0;\\&amp;#xA0;-&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;E_&amp;#xA0;{1x}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{1y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{1z}&amp;#xA0;\\&amp;#xA0;E_&amp;#xA0;{2x}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{&amp;#xA0;2y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{2z}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}</mtext></merror></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><span class="noError" aria-hidden="true" style="display: inline-block;">\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;frac&nbsp;{1}&nbsp;{\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;\&nbsp;Delta&nbsp;V_1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;&amp;&nbsp;-&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;&amp;&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;&amp;&nbsp;E_&nbsp;{&nbsp;2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;frac&nbsp;{1}&nbsp;{\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;\&nbsp;Delta&nbsp;V_1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;&amp;&nbsp;-&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;&amp;&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;&amp;&nbsp;E_&nbsp;{&nbsp;2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} = \ frac {1} {\ Delta U_1 \ Delta V_2 - \ Delta U_2 \ Delta V_1} \ begin {bmatrix} \ Delta V_2 & - \ Delta V_1 \\ - \ Delta U_2 & \ Delta U_1 \ end {bmatrix} \ begin {bmatrix} E_ {1x} & E_ {1y} & E_ {1z} \\ E_ {2x} & E_ { 2y} & E_ {2z} \ end {bmatrix} </script></p><br>  Cette expression est la formule de calcul du vecteur tangent <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-27"> T </script>  et bi-tangente <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhiaPc05d1_d1FD9yu5t7s38pL8TLA#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-28"> B </script>  basé sur les coordonnées des faces du triangle et les coordonnées de texture correspondantes. <br>  Ne vous inquiétez pas si l'essence des calculs mathématiques ci-dessus vous échappe.  Si vous comprenez que nous obtenons la tangente et la tangente de biais en fonction des coordonnées des sommets du triangle et de leurs coordonnées de texture (puisque les coordonnées de texture appartiennent également à l'espace tangent) - c'est déjà la moitié de la bataille. <br><br><h4>  Calcul des tangentes et des bitangentes </h4><br>  Dans l'exemple de cette leçon, nous avons pris un plan simple en regardant vers le demi-axe positif oZ.  Nous allons maintenant essayer d'implémenter une cartographie normale en utilisant l'espace tangent afin de pouvoir orienter le plan dans l'exemple comme nous le souhaitons sans détruire l'effet de cartographie normal.  En utilisant le calcul ci-dessus, nous trouvons manuellement la tangente et la bi-tangente à la surface considérée. <br>  Nous supposons que le plan est composé des sommets suivants avec des coordonnées de texture (deux triangles sont donnés par les vecteurs 1, 2, 3 et 1, 3, 4): <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   glm::vec3 pos1(-1.0, 1.0, 0.0); glm::vec3 pos2(-1.0, -1.0, 0.0); glm::vec3 pos3( 1.0, -1.0, 0.0); glm::vec3 pos4( 1.0, 1.0, 0.0); //   glm::vec2 uv1(0.0, 1.0); glm::vec2 uv2(0.0, 0.0); glm::vec2 uv3(1.0, 0.0); glm::vec2 uv4(1.0, 1.0); //   glm::vec3 nm(0.0, 0.0, 1.0);</span></span></code> </pre> <br>  Dans un premier temps, nous calculons les vecteurs décrivant les faces du triangle, ainsi que les deltas des coordonnées de texture: <br><br><pre> <code class="cpp hljs">glm::vec3 edge1 = pos2 - pos1; glm::vec3 edge2 = pos3 - pos1; glm::vec2 deltaUV1 = uv2 - uv1; glm::vec2 deltaUV2 = uv3 - uv1;</code> </pre> <br>  Ayant en main les données initiales nécessaires, nous pouvons commencer à calculer la tangente et la bi-tangente directement par les formules de la section précédente: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> f = <span class="hljs-number"><span class="hljs-number">1.0f</span></span> / (deltaUV1.x * deltaUV2.y - deltaUV2.x * deltaUV1.y); tangent1.x = f * (deltaUV2.y * edge1.x - deltaUV1.y * edge2.x); tangent1.y = f * (deltaUV2.y * edge1.y - deltaUV1.y * edge2.y); tangent1.z = f * (deltaUV2.y * edge1.z - deltaUV1.y * edge2.z); tangent1 = glm::normalize(tangent1); bitangent1.x = f * (-deltaUV2.x * edge1.x + deltaUV1.x * edge2.x); bitangent1.y = f * (-deltaUV2.x * edge1.y + deltaUV1.x * edge2.y); bitangent1.z = f * (-deltaUV2.x * edge1.z + deltaUV1.x * edge2.z); bitangent1 = glm::normalize(bitangent1); [...] <span class="hljs-comment"><span class="hljs-comment">//        </span></span></code> </pre> <br>  Tout d'abord, nous retirons la composante fractionnaire de l'expression finale dans une variable distincte <i>f</i> .  Ensuite, pour chaque composante des vecteurs, nous effectuons la partie correspondante de la multiplication matricielle et multiplions par <i>f</i> .  En comparant ce code avec la formule de calcul finale, vous pouvez voir que c'est son arrangement littéral.  N'oubliez pas de normaliser à la fin, afin que les vecteurs trouvés soient unitaires. <br><br>  Puisque le triangle est une figure plate, il suffit de calculer la tangente et la bi-tangente une fois par triangle - elles seront les mêmes pour tous les sommets.  Il convient de noter que la plupart des implémentations de travail avec des modèles (tels que des chargeurs ou des générateurs de paysage) utilisent une telle organisation de triangles, où ils partagent des sommets avec d'autres triangles.  Dans de tels cas, les développeurs ont généralement recours à des paramètres de moyenne aux sommets communs, tels que les vecteurs normaux, tangents et bi-tangents, pour obtenir un résultat plus fluide.  Les triangles qui composent notre plan partagent également plusieurs sommets, mais comme ils se trouvent tous deux dans le même plan, la moyenne n'est pas requise.  Néanmoins, il est utile de rappeler la présence d'une telle approche dans des applications et tâches réelles. <br><br>  Les vecteurs tangents et bi-tangents résultants doivent avoir des valeurs (1, 0, 0) et (0, 1, 0), respectivement.  Cela avec le vecteur normal (0, 0, 1) forme la matrice orthogonale TBN.  Si vous visualisez la base résultante avec l'avion, vous obtenez l'image suivante: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4q/k-/qu/4qk-qubyv3blgflpspploqrmz8i.png"></div><br>  Maintenant, après avoir calculé les vecteurs, vous pouvez procéder à la mise en œuvre complète du mappage normal. <br><br><h4>  Cartographie normale dans l'espace tangent </h4><br>  Vous devez d'abord créer une matrice TBN dans les shaders.  À cette fin, nous allons transférer les vecteurs tangents et bi-tangents pré-préparés au shader de vertex à travers les attributs de vertex: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 330 core layout (location = 0) in vec3 aPos; layout (location = 1) in vec3 aNormal; layout (location = 2) in vec2 aTexCoords; layout (location = 3) in vec3 aTangent; layout (location = 4) in vec3 aBitangent;</span></span></code> </pre> <br>  Dans le code du vertex shader lui-même, nous formons directement la matrice: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] vec3 T = normalize(vec3(model * vec4(aTangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 B = normalize(vec3(model * vec4(aBitangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 N = normalize(vec3(model * vec4(aNormal, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); mat3 TBN = mat3(T, B, N) }</code> </pre> <br>  Dans le code ci-dessus, nous convertissons d'abord tous les vecteurs de la base de l'espace tangent en un système de coordonnées dans lequel nous sommes à l'aise de travailler - dans ce cas, c'est le système de coordonnées mondial et nous multiplions les vecteurs par le modèle de matrice <i>modèle</i> .  Ensuite, nous créons la matrice TBN elle-même en passant simplement les trois vecteurs correspondants à un constructeur de type <i>mat3</i> .  Veuillez noter que pour l'exactitude de l'ordre de calcul, il est nécessaire de multiplier les vecteurs non pas par la matrice du modèle, mais par la matrice normale, car nous ne nous intéressons qu'à l'orientation des vecteurs, mais pas à leur déplacement ou à leur mise à l'échelle <br><blockquote>  À strictement parler, il n'est pas nécessaire de transférer le vecteur bi-tangent au shader. <br>  Puisque le triple des vecteurs TBN est mutuellement perpendiculaire, la bi-tangente peut être trouvée dans le shader par multiplication vectorielle: <br><br><pre> <code class="cpp hljs"> vec3 B = cross(N, T)</code> </pre> </blockquote><br>  Ainsi, la matrice TBN est reçue, comment l'utilisons-nous?  En fait, il existe deux approches pour son utilisation dans la cartographie normale: <br><br><ol><li>  Utilisez la matrice TBN pour transformer tous les vecteurs nécessaires de la tangente à l'espace mondial.  Transférez les résultats dans le fragment shader, où, en utilisant également la matrice, transformez le vecteur de la carte normale en espace mondial.  En conséquence, le vecteur normal sera dans l'espace où tout l'éclairage est calculé. </li><li>  Prenez la matrice inverse en TBN et convertissez tous les vecteurs nécessaires de l'espace mondial en tangente.  C'est-à-dire  utilisez cette matrice pour transformer les vecteurs impliqués dans les calculs d'éclairage en espace tangent.  Dans ce cas, le vecteur normal reste également dans le même espace que les autres participants au calcul de l'éclairage. </li></ol><br>  Regardons la première option.  Le vecteur normal de la texture correspondante est spécifié dans l'espace tangent, tandis que les autres vecteurs utilisés dans le calcul de l'éclairage sont définis dans l'espace du monde.  En passant la matrice TBN au fragment shader, nous pourrions transformer le vecteur normal obtenu par échantillonnage de la texture de l'espace tangent au monde, assurant l'unité des systèmes de coordonnées pour tous les éléments du calcul d'éclairage.  Dans ce cas, tous les calculs (en particulier les multiplications vectorielles scalaires) seront corrects. <br><br>  Le transfert de la matrice TBN se fait de la manière la plus simple: <br><br><pre> <code class="cpp hljs">out VS_OUT { vec3 FragPos; vec2 TexCoords; mat3 TBN; } vs_out; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] vs_out.TBN = mat3(T, B, N); }</code> </pre> <br>  Dans le code de shader de fragment, respectivement, nous définissons une variable d'entrée de type mat3: <br><br><pre> <code class="cpp hljs">in VS_OUT { vec3 FragPos; vec2 TexCoords; mat3 TBN; } fs_in;</code> </pre> <br>  Ayant la matrice sous la main, vous pouvez spécifier le code pour obtenir la normale par l'expression de la traduction de la tangente à l'espace mondial: <br><br><pre> <code class="cpp hljs">normal = texture(normalMap, fs_in.TexCoords).rgb; normal = normalize(normal * <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">1.0</span></span>); normal = normalize(fs_in.TBN * normal);</code> </pre> <br>  Étant donné que la normale résultante est désormais définie dans l'espace mondial, il n'est pas nécessaire de changer quoi que ce soit d'autre dans le code du shader.  Calculs d'éclairage, et supposons donc un vecteur normal donné en coordonnées universelles. <br><br>  Examinons également la deuxième approche.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela nécessitera l'obtention de la matrice TBN inverse, ainsi que le transfert de tous les vecteurs impliqués dans le calcul d'éclairage du système de coordonnées universelles vers celui qui correspond aux vecteurs normaux obtenus à partir de la texture - la tangente. Dans ce cas, la formation de la matrice TBN reste inchangée, mais avant de passer au fragment shader nous devons obtenir la matrice inverse:</font></font><br><br><pre> <code class="cpp hljs">vs_out.TBN = transpose(mat3(T, B, N));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notez que la fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transpose ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utilisée à la </font><font style="vertical-align: inherit;">place de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inverse ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Une telle substitution est vraie, car pour les matrices orthogonales (où tous les axes sont représentés par des vecteurs unitaires perpendiculaires), l'obtention de la matrice inverse donne un résultat identique à la transposition. </font><font style="vertical-align: inherit;">Et cela est très utile, car, dans le cas général, le calcul de la matrice inverse est une tâche beaucoup plus coûteuse en termes de calcul que la transposition. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le code de shader de fragment, nous ne convertirons pas le vecteur normal, nous convertirons plutôt d'autres vecteurs importants du système de coordonnées mondial en tangente, à savoir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lightDir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewDir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cette solution rassemble également tous les éléments des calculs dans un seul système de coordonnées, cette fois la tangente.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ vec3 normal = texture(normalMap, fs_in.TexCoords).rgb; normal = normalize(normal * <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">1.0</span></span>); vec3 lightDir = fs_in.TBN * normalize(lightPos - fs_in.FragPos); vec3 viewDir = fs_in.TBN * normalize(viewPos - fs_in.FragPos); [...] }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La deuxième approche semble prendre plus de temps et nécessite plus de multiplications matricielles dans le fragment shader (ce qui affecte considérablement les performances). Pourquoi avons-nous même commencé à le démonter? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le fait est que la traduction de vecteurs des coordonnées du monde en tangentes offre un avantage supplémentaire: en fait, nous pouvons déplacer le code de transformation entier du fragment au vertex shader! Cette approche fonctionne car </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lightPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne changent pas de fragment en fragment, et la valeur est </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fs_in.FragPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous pouvons également traduire en espace tangent dans le vertex shader, la valeur interpolée à l'entrée du fragment shader sera tout à fait correcte. </font><font style="vertical-align: inherit;">Ainsi, pour la deuxième approche, il n'est pas nécessaire de traduire tous ces vecteurs dans l'espace tangent dans le code de shader de fragment, tandis que le premier l'exige - car la normale est unique pour chaque fragment.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En conséquence, nous nous éloignons du transfert de la matrice inverse de TBN au fragment shader et lui passons plutôt le vecteur de position du sommet, de la source lumineuse et de l'observateur dans l'espace tangent. </font><font style="vertical-align: inherit;">Nous allons donc nous débarrasser des multiplications de matrice coûteuses dans le fragment shader, ce qui sera une optimisation importante, car le vertex shader est exécuté beaucoup moins souvent. </font><font style="vertical-align: inherit;">C'est cet avantage qui place la deuxième approche dans la catégorie d'utilisation préférée dans la plupart des cas.</font></font><br><br><pre> <code class="cpp hljs">out VS_OUT { vec3 FragPos; vec2 TexCoords; vec3 TangentLightPos; vec3 TangentViewPos; vec3 TangentFragPos; } vs_out; uniform vec3 lightPos; uniform vec3 viewPos; [...] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] mat3 TBN = transpose(mat3(T, B, N)); vs_out.TangentLightPos = TBN * lightPos; vs_out.TangentViewPos = TBN * viewPos; vs_out.TangentFragPos = TBN * vec3(model * vec4(aPos, <span class="hljs-number"><span class="hljs-number">0.0</span></span>));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le fragment shader, nous passons à l'utilisation de nouvelles variables d'entrée dans les calculs d'éclairage dans l'espace tangent. </font><font style="vertical-align: inherit;">Puisque les normales sont définies conditionnellement dans cet espace, tous les calculs restent corrects. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant que tous les calculs de cartographie normaux sont effectués dans un espace tangent, nous pouvons changer l'orientation de la surface de test dans l'application comme nous le voulons et l'éclairage restera correct:</font></font><br><br><pre> <code class="cpp hljs">glm::<span class="hljs-function"><span class="hljs-function">mat4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">model</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0f</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; model = glm::rotate(model, (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)glfwGetTime() * <span class="hljs-number"><span class="hljs-number">-10.0f</span></span>, glm::normalize(glm::vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>))); shader.setMat4(<span class="hljs-string"><span class="hljs-string">"model"</span></span>, model); RenderQuad();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En effet, extérieurement tout se passe comme il se doit: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/do/ex/uedoexgmihcpjjyf5mmcm09vpps.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les sources sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Objets complexes </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons donc compris comment effectuer une cartographie normale dans un espace tangent et comment calculer indépendamment les vecteurs tangents et tangents pour cela. </font><font style="vertical-align: inherit;">Heureusement, un tel calcul manuel n'est pas si souvent une tâche: pour la plupart, ce code est implémenté par les développeurs quelque part dans les entrailles du chargeur de modèle. </font><font style="vertical-align: inherit;">Dans notre cas, cela est vrai pour </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le chargeur Assimp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisé </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assimp fournit un indicateur d'option très utile lors du chargement de modèles: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiProcess_CalcTangentSpace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lorsqu'elle est passée à la fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadFile ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la </font><font style="vertical-align: inherit;">bibliothèque elle-même calculera les lignes tangentes et bi-tangentes lisses pour chacun des sommets chargés - un processus similaire à celui discuté ici.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> aiScene *scene = importer.ReadFile( path, aiProcess_Triangulate | aiProcess_FlipUVs | aiProcess_CalcTangentSpace );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Après cela, vous pouvez accéder directement aux tangentes calculées: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.x = mesh-&gt;mTangents[i].x; <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.y = mesh-&gt;mTangents[i].y; <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.z = mesh-&gt;mTangents[i].z; vertex.Tangent = <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous devrez également mettre à jour le code de téléchargement pour prendre en compte la réception de cartes normales pour les modèles texturés. Le format Wavefront Object (.obj) exporte les cartes normales de telle manière que l'indicateur Assimp </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiTextureType_NORMAL ne</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> garantit pas que ces cartes se chargent correctement, tandis que </font><font style="vertical-align: inherit;">tout fonctionne correctement </font><font style="vertical-align: inherit;">avec l'indicateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiTextureType_HEIGHT</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Par conséquent, personnellement, je charge généralement les cartes normales de la manière suivante:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Texture&gt; normalMaps = loadMaterialTextures(material, aiTextureType_HEIGHT, <span class="hljs-string"><span class="hljs-string">"texture_normal"</span></span>);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien entendu, cette approche peut ne pas convenir à d'autres formats de description de modèle et types de fichiers. Je note également que la définition de l'indicateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiProcess_CalcTangentSpace ne fonctionne</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pas toujours. Nous savons que le calcul des tangentes est basé sur les coordonnées de texture, cependant, souvent les auteurs de modèles appliquent diverses astuces aux coordonnées de texture, ce qui rompt le calcul des tangentes. Ainsi, une image miroir des coordonnées de texture est souvent utilisée pour les modèles à texture symétrique. Si le fait de refléter n'est pas pris en compte, alors le calcul des tangentes sera incorrect. Assimp ne fait pas cette comptabilité. Le modèle de nanosuit familier ici ne convient pas pour la démonstration, car il utilise également la mise en miroir.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mais avec un modèle correctement texturé utilisant des cartes normales et spéculaires, l'application de test donne un très bon résultat: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qs/fc/45/qsfc45x4jkxagyufkoq6mbspf5k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme vous pouvez le voir, l'utilisation de la cartographie normale fournit une augmentation tangible des détails et est bon marché en termes de coûts de performance. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N'oubliez pas que l'utilisation d'un mappage normal peut aider à améliorer les performances d'une scène particulière. </font><font style="vertical-align: inherit;">Sans son utilisation, la réalisation des détails du modèle n'est possible qu'en augmentant la densité du maillage polygonal, le maillage. </font><font style="vertical-align: inherit;">Mais cette technique vous permet d'atteindre visuellement le même niveau de détail pour les maillages low-poly. </font><font style="vertical-align: inherit;">Ci-dessous, vous pouvez voir une comparaison de ces deux approches:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qm/eq/s2/qmeqs2ocgdhnikxrfmlyjvkqxc8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le niveau de détail sur le modèle à haute poly et sur le modèle à faible poly utilisant la cartographie normale est pratiquement indiscernable. </font><font style="vertical-align: inherit;">Cette technique est donc un excellent moyen de remplacer les modèles à haute poly dans la scène par des modèles simplifiés avec pratiquement aucune perte de qualité visuelle.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dernier commentaire </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a un autre détail technique concernant la cartographie normale, qui améliore un peu la qualité avec peu ou pas de coût supplémentaire. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans les cas où les tangentes sont calculées pour des maillages grands et complexes avec un nombre significatif de sommets appartenant à plusieurs triangles, les vecteurs tangents sont généralement moyennés pour obtenir un résultat de mappage normal lisse et visuellement agréable. Cependant, cela crée un problème: après la moyenne, le triple des vecteurs TBN peut perdre la perpendicularité mutuelle, ce qui signifie également la perte d'orthogonalité pour la matrice TBN. Dans le cas général, le résultat d'une cartographie normale obtenue à partir d'une matrice non orthogonale n'est que légèrement incorrect, mais on peut encore l'améliorer. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour ce faire, il suffit d'appliquer une méthode mathématique simple:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processus de Gram-Schmidt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou ré-orthogonalisation de notre triple de vecteurs TBN. </font><font style="vertical-align: inherit;">Dans le code du vertex shader:</font></font><br><br><pre> <code class="cpp hljs">vec3 T = normalize(vec3(model * vec4(aTangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 N = normalize(vec3(model * vec4(aNormal, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); <span class="hljs-comment"><span class="hljs-comment">// - T  N T = normalize(T - dot(T, N) * N); //    B    T  N vec3 B = cross(N, T); mat3 TBN = mat3(T, B, N)</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cet amendement, bien que modeste, améliore la qualité de la cartographie normale en échange de faibles frais généraux. </font><font style="vertical-align: inherit;">Si vous êtes intéressé par les détails de cette procédure, vous pouvez regarder la dernière partie de la vidéo Mathématiques cartographiques normales, dont le lien est donné ci-dessous.</font></font><br><br><h2>  Ressources supplémentaires </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutoriel 26: Cartographie normale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : une leçon sur la cartographie normale d' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ogldev</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctionnement du mappage normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : didacticiel vidéo expliquant les bases du mappage normal de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TheBennyBox</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mathématiques de cartographie normale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un film lié à la précédente qui explique les mathématiques utilisées dans la méthode de cartographie normale, également de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TheBennyBox</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutoriel 13: Cartographie normale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : une autre leçon de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opengl-tutorial.org</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Nous avons un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">télégramme conf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour la coordination des transferts. </font><font style="vertical-align: inherit;">Si vous avez un sérieux désir d'aider à la traduction, alors vous êtes les bienvenus!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr415579/">https://habr.com/ru/post/fr415579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr415569/index.html">HOWTO setup ubuntu 18.04 sendmail + DKIM + SPF + DMARC ou comment j'ai réussi à entrer dans le bastion Gmail</a></li>
<li><a href="../fr415571/index.html">kaggle: Identification du modèle de caméra de l'IEEE</a></li>
<li><a href="../fr415573/index.html">Optimisation d'un modèle pour l'impression 3D en utilisant le logiciel Blender comme exemple</a></li>
<li><a href="../fr415575/index.html">Fonctions de documentation des bases de données PostgreSQL. Première partie</a></li>
<li><a href="../fr415577/index.html">Diapositives du cours "Technologies et développement du SGBD"</a></li>
<li><a href="../fr415581/index.html">International Fintech - Digest: 12 nouvelles sur la chose la plus importante de l'industrie</a></li>
<li><a href="../fr415587/index.html">StereoPi - notre matériel pour étudier la vision par ordinateur, les drones et les robots</a></li>
<li><a href="../fr415589/index.html">"Un peu plus sur PD": les sociétés de télévision américaines cesseront de vendre les géodonnées de leurs clients</a></li>
<li><a href="../fr415591/index.html">Apple Engineers Trap Piège à clavier MacBook Pro</a></li>
<li><a href="../fr415593/index.html">6 ans plus tard, une nouvelle version de la légendaire distribution de crash Hiren's BootCD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>