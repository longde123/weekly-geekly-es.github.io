<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≥ üè´ ‚õ™Ô∏è Erstellen Sie eine Android-App. Aufgabe mit einem Sternchen üìí üìâ ü•ì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Im Sommer sprach ich beim Summer Droid Meetup mit einem Bericht √ºber die Erstellung einer Android-Anwendung. Die Videoversion finden Sie h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen Sie eine Android-App. Aufgabe mit einem Sternchen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/469771/"><img src="https://habrastorage.org/webt/-b/02/yh/-b02yhihv1wljls_lzryoh__sbe.png"><br><br>  Hallo Habr!  Im Sommer sprach ich beim Summer Droid Meetup mit einem Bericht √ºber die Erstellung einer Android-Anwendung.  Die Videoversion finden Sie hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/ru/company/funcorp/blog/462825</a> .  Und f√ºr diejenigen, die gerne mehr lesen, habe ich gerade diesen Artikel geschrieben. <br><br>  Es geht darum, was es ist - eine Android-Anwendung.  Wir werden auf verschiedene Arten sammeln Hallo, Welt !: Beginnen Sie an der Konsole und sehen Sie, was unter der Haube von Build-Systemen passiert, und kehren Sie dann in die Vergangenheit zur√ºck. Erinnern Sie sich an Maven und lernen Sie moderne Bazel- und Buck-L√∂sungen kennen.  Und schlie√ülich ist das alles vergleichbar. <br><a name="habracut"></a><br>  Wir haben √ºber eine m√∂gliche √Ñnderung des Montagesystems nachgedacht, als wir ein neues Projekt gestartet haben.  Es schien uns, dass dies eine gute Gelegenheit ist, nach Alternativen zu Gradle zu suchen.  Dar√ºber hinaus ist es zu Beginn einfacher, dies zu tun, als ein vorhandenes Projekt zu √ºbersetzen.  Die folgenden Gradle-Fehler haben uns zu diesem Schritt gef√ºhrt: <br><br><ul><li>  Er hat definitiv Probleme mit der inkrementellen Montage, obwohl er Fortschritte in dieser Richtung sehen kann. </li><li>  er macht schlecht mit sehr gro√üen monolithischen Projekten; </li><li>  es kommt vor, dass ein D√§mon sehr lange anf√§ngt; </li><li>  anspruchsvoll an der Maschine, auf der es l√§uft. </li></ul><br><h2>  APK </h2><br>  Denken Sie zun√§chst daran, woraus die Android-Anwendung besteht: kompilierter Code, Ressourcen und AndroidManifest.xml. <br><br><img src="https://habrastorage.org/webt/pe/do/sm/pedosmtvfcqralxv1td9d4xcjg0.jpeg"><br><br>  Die Quellen befinden sich in der Datei classes.dex (je nach Gr√∂√üe der Anwendung k√∂nnen mehrere Dateien vorhanden sein) in einem speziellen Dex-Format, mit dem die virtuelle Android-Maschine arbeiten kann.  Heute ist es KUNST auf √§lteren Ger√§ten - Dalvik.  Au√üerdem finden Sie den Ordner lib, in dem die nativen Quellen in Unterordnern angeordnet sind.  Sie werden abh√§ngig von der Zielprozessorarchitektur benannt, z. B. x86, arm usw.  Wenn Sie Exoplayer verwenden, haben Sie wahrscheinlich lib.  Und der Ordner aidl, der Interprozess-Kommunikationsschnittstellen enth√§lt.  Sie sind n√ºtzlich, wenn Sie auf einen Dienst zugreifen m√ºssen, der in einem anderen Prozess ausgef√ºhrt wird.  Solche Schnittstellen werden sowohl in Android selbst als auch in GooglePlayServices verwendet. <br><br>  Verschiedene nicht kompilierte Ressourcen wie Bilder befinden sich im Ordner res.  Alle kompilierten Ressourcen wie Stile, Linien usw. werden in einer resource.arsc-Datei zusammengef√ºhrt.  Im Assets-Ordner legen sie in der Regel alles ab, was nicht in Ressourcen passt, z. B. benutzerdefinierte Schriftarten. <br><br>  Dar√ºber hinaus enth√§lt die APK AndroidManifest.xml.  Darin beschreiben wir verschiedene Komponenten der Anwendung, wie z. B. Aktivit√§t, Dienst, verschiedene Berechtigungen usw.  Es liegt in bin√§rer Form vor, und um nach innen zu schauen, muss es zuerst in eine f√ºr Menschen lesbare Datei konvertiert werden. <br><br><h2>  KONSOLE </h2><br>  Jetzt, da wir wissen, woraus die Anwendung besteht, k√∂nnen wir versuchen, Hello, world!  von der Konsole mit den Tools, die das Android SDK bereitstellt.  Dies ist ein ziemlich wichtiger Schritt, um zu verstehen, wie Build-Systeme funktionieren, da sie alle in gewissem Ma√üe auf diese Dienstprogramme angewiesen sind.  Da das Projekt in Kotlin geschrieben ist, ben√∂tigen wir seinen Compiler f√ºr die Befehlszeile.  Es ist einfach, separat herunterzuladen. <br><br>  Die Montage der Anwendung kann in folgende Schritte unterteilt werden: <br><br><ul><li>  Laden Sie alle Bibliotheken herunter und entpacken Sie sie, von denen das Projekt abh√§ngt.  In meinem Fall ist dies die Abw√§rtskompatibilit√§tsbibliothek von appcompat, die wiederum vom appcompat-Kern abh√§ngt. Wir pumpen sie also ebenfalls aus. </li><li>  generiere R.java.  Diese wunderbare Klasse enth√§lt die Bezeichner aller Ressourcen in der Anwendung und wird verwendet, um im Code darauf zuzugreifen. </li><li>  Wir kompilieren die Quellen in Bytecode und √ºbersetzen sie in Dex, da die virtuelle Android-Maschine nicht wei√ü, wie sie mit dem √ºblichen Bytecode arbeiten soll. </li><li>  Wir packen alles in die APK, richten aber zuerst alle inkompressiblen Ressourcen, wie z. B. Bilder, relativ zum Anfang der Datei aus.  Dies erm√∂glicht es dem Preis einer v√∂llig unbedeutenden Vergr√∂√üerung der APK, ihre Arbeit erheblich zu beschleunigen.  Somit kann das System mithilfe der Funktion mmap () Ressourcen direkt dem RAM zuordnen. </li><li>  Unterschreiben Sie den Antrag.  Dieses Verfahren sch√ºtzt die Integrit√§t der APK und best√§tigt die Urheberschaft.  Auf diese Weise kann der Play Market beispielsweise √ºberpr√ºfen, ob die Anwendung von Ihnen erstellt wurde. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Skript erstellen</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">preparedir</span></span></span></span>() { rm -r -f <span class="hljs-variable"><span class="hljs-variable">$1</span></span> mkdir <span class="hljs-variable"><span class="hljs-variable">$1</span></span> } PROJ=<span class="hljs-string"><span class="hljs-string">"src/main"</span></span> LIBS=<span class="hljs-string"><span class="hljs-string">"libs"</span></span> LIBS_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$LIBS</span></span></span><span class="hljs-string">/out"</span></span> BUILD_TOOLS=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/build-tools/28.0.3"</span></span> ANDROID_JAR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/platforms/android-28/android.jar"</span></span> DEBUG_KEYSTORE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo ~)</span></span></span><span class="hljs-string">/.android/debug.keystore"</span></span> GEN_DIR=<span class="hljs-string"><span class="hljs-string">"build/generated"</span></span> KOTLIN_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/kotlin"</span></span> DEX_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/dex"</span></span> OUT_DIR=<span class="hljs-string"><span class="hljs-string">"out"</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">""</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">""</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span> aars=$(ls -p <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> | grep -v /) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> filename <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$aars</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> DESTINATION=<span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span>/<span class="hljs-variable"><span class="hljs-variable">${filename%.*}</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"unpacking </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$filename</span></span></span><span class="hljs-string"> into </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">"</span></span> unzip -o -q <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span>/<span class="hljs-variable"><span class="hljs-variable">$filename</span></span> -d <span class="hljs-variable"><span class="hljs-variable">$DESTINATION</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_res</span></span></span><span class="hljs-string"> -S </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/res"</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/classes.jar"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -J <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay preparedir <span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span> compiledKotlin=<span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span>/compiled.jar kotlinc <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/java <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> -include-runtime \ -cp <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_JAR</span></span></span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">"</span></span>\ -d <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span> dex=<span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span>/classes.dex <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/dx --dex --output=<span class="hljs-variable"><span class="hljs-variable">$dex</span></span> <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span> unaligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/unaligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -F <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay cp <span class="hljs-variable"><span class="hljs-variable">$dex</span></span> . <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt add <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> classes.dex rm classes.dex aligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/aligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/zipalign -f 4 <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/apksigner sign --ks <span class="hljs-variable"><span class="hljs-variable">$DEBUG_KEYSTORE</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span></code> </pre> <br></div></div><br>  Den Zahlen zufolge stellt sich heraus, dass eine saubere Assembly 7 Sekunden dauert und die inkrementelle Assembly nicht dahinter zur√ºckbleibt, da wir nichts zwischenspeichern und jedes Mal alles neu erstellen. <br><br><h2>  Maven </h2><br>  Es wurde von den Mitarbeitern der Apache Software Foundation entwickelt, um Java-Projekte zu erstellen.  Build-Konfigurationen daf√ºr werden in XML beschrieben.  Die fr√ºhen Revisionen von Maven wurden von Ant gesammelt und jetzt auf die neueste stabile Version umgestellt. <br><br>  Vorteile von Maven: <br><br><ul><li>  Es unterst√ºtzt das Zwischenspeichern von Baugruppenartefakten, d.h.  Inkrementeller Build sollte schneller als sauber sein. </li><li>  Abh√§ngigkeiten von Drittanbietern k√∂nnen aufgel√∂st werden.  Das hei√üt,  Wenn Sie in der Maven- oder Gradle-Konfiguration eine Abh√§ngigkeit von einer Drittanbieter-Bibliothek angeben, m√ºssen Sie sich keine Gedanken dar√ºber machen, wovon sie abh√§ngt. </li><li>  Es gibt eine Reihe detaillierter Dokumentationen, da diese schon seit einiger Zeit auf dem Markt sind. </li><li>  und es kann ein vertrauter Build-Mechanismus sein, wenn Sie k√ºrzlich vom Backend aus in die Welt der Android-Entwicklung gekommen sind. </li></ul><br>  Nachteile von Maven: <br><br><ul><li>  H√§ngt von der Java-Version ab, die auf dem Computer installiert ist, auf dem die Assembly stattfindet. </li><li>  Das Android-Plugin wird jetzt von Drittentwicklern unterst√ºtzt: Ich pers√∂nlich halte dies f√ºr einen sehr erheblichen Nachteil, da sie eines Tages m√∂glicherweise damit aufh√∂ren werden. <br></li><li>  XML eignet sich aufgrund seiner Redundanz und Umst√§ndlichkeit nicht sehr gut zur Beschreibung von Build-Konfigurationen. </li><li>  Nun, und wie wir sp√§ter sehen werden, l√§uft es zumindest bei einem Testprojekt langsamer als Gradle. </li></ul><br>  Zum Erstellen m√ºssen wir pom.xml erstellen, die eine Beschreibung unseres Projekts enth√§lt.  Geben Sie in der Kopfzeile die grundlegenden Informationen zum gesammelten Artefakt sowie die Version von Kotlin an. <br><br><div class="spoiler">  <b class="spoiler_title">Erstelle config pom.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.example<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>myapplication<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>My Application<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.41<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.google.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.1.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.simpligility.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>28<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span>28.0.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  In Zahlen ist nicht alles zu rosig.  Eine saubere Assembly dauert ungef√§hr 12 Sekunden, eine inkrementelle - 10. Dies bedeutet, dass Maven Artefakte aus fr√ºheren Assemblys irgendwie wiederverwendet, oder meiner Meinung nach ist es wahrscheinlicher, dass das Plug-In zum Erstellen eines Android-Projekts dies verhindert <br><br>  Jetzt nutzen sie das alles, ich denke, zuallererst sind die Macher des Plugins die Jungs von der Einfachheit.  Zuverl√§ssigere Informationen zu diesem Problem wurden nicht gefunden. <br><br><h2>  Bazel </h2><br>  Ingenieure im Darm von Google haben Bazel erfunden, um ihre Projekte zu erstellen, und es vor relativ kurzer Zeit auf Open Source √ºbertragen.  F√ºr die Beschreibung von Build-Configs werden python√§hnliche Skylark oder Starlark verwendet, beide Namen haben einen Platz zu sein.  Es wird mit seiner neuesten stabilen Version zusammengebaut. <br><br>  Vorteile von Bazel: <br><br><ul><li>  Unterst√ºtzung f√ºr verschiedene Programmiersprachen.  Wenn Sie der Dokumentation glauben, wei√ü er, wie man Projekte f√ºr iOs, Android oder sogar ein Backend sammelt. </li><li>  Kann zuvor gesammelte Artefakte zwischenspeichern </li><li>  in der Lage, mit Maven-Abh√§ngigkeiten zu arbeiten; </li><li>  Bazel hat meiner Meinung nach eine sehr coole Unterst√ºtzung f√ºr verteilte Projekte.  Er kann bestimmte Revisionen von Git-Repositorys als Abh√§ngigkeiten angeben und diese w√§hrend des Erstellungsprozesses entladen und zwischenspeichern.  Um die Skalierbarkeit zu unterst√ºtzen, kann Bazel beispielsweise verschiedene Ziele auf Cloud-basierten Build-Servern verteilen, sodass Sie schnell umfangreiche Projekte erstellen k√∂nnen. </li></ul><br>  Nachteile von Bazel: <br><br><ul><li>  All dieser Charme ist sehr schwer aufrechtzuerhalten, da die Build-Konfigurationen sehr detailliert sind und die Baugruppe auf einer niedrigen Ebene beschreiben. </li><li>  unter anderem scheint sich Bazel jetzt aktiv zu entwickeln.  Aus diesem Grund werden einige Beispiele nicht erfasst, und diejenigen, die erfasst werden, k√∂nnen die veraltete Funktionalit√§t verwenden, die als veraltet markiert ist. </li><li>  Die Dokumentation l√§sst jetzt auch zu w√ºnschen √ºbrig, insbesondere im Vergleich zu Gradle. </li><li>  Bei kleinen Projekten kann das Aufw√§rmen und Analysieren von Build-Konfigurationen l√§nger dauern als die Montage selbst, was meiner Meinung nach nicht gut ist. </li></ul><br>  Konzeptionell besteht die grundlegende Bazel-Konfiguration aus WORKSPACE, in dem wir alle m√∂glichen globalen Dinge f√ºr ein Projekt beschreiben, und BUILD, das direkt Ziele f√ºr die Montage enth√§lt. <br>  Beschreiben wir den WORKSPACE.  Da wir ein Android-Projekt haben, konfigurieren wir zun√§chst das Android SDK.  Au√üerdem wird hier eine Regel zum Entladen von Konfigurationen importiert.  Da das Projekt in Kotlin geschrieben ist, m√ºssen wir die Regeln daf√ºr angeben.  Hier tun wir dies und verweisen auf eine bestimmte Revision direkt aus dem Git-Repository. <br><br><div class="spoiler">  <b class="spoiler_title">ARBEITSPLATZ</b> <div class="spoiler_text"><pre> <code class="python hljs">android_sdk_repository( name = <span class="hljs-string"><span class="hljs-string">"androidsdk"</span></span>, api_level = <span class="hljs-number"><span class="hljs-number">28</span></span>, build_tools_version = <span class="hljs-string"><span class="hljs-string">"28.0.3"</span></span> ) load(<span class="hljs-string"><span class="hljs-string">"@bazel_tools//tools/build_defs/repo:http.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"http_archive"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># # KOTLIN RULES # RULES_KOTLIN_VERSION = "990fcc53689c8b58b3229c7f628f843a60cb9f5c" http_archive( name = "io_bazel_rules_kotlin", url = "https://github.com/bazelbuild/rules_kotlin/archive/%s.zip" % RULES_KOTLIN_VERSION, strip_prefix = "rules_kotlin-%s" % RULES_KOTLIN_VERSION ) load("@io_bazel_rules_kotlin//kotlin:kotlin.bzl", "kotlin_repositories", "kt_register_toolchains") kotlin_repositories() kt_register_toolchains()</span></span></code> </pre><br></div></div><br>  Jetzt fangen wir mit dem BUILD an. <br><br>  Zuerst importieren wir die Regel zum Zusammenstellen von Kotlin und beschreiben, was wir sammeln m√∂chten.  In unserem Fall ist dies eine Android-Anwendung, daher verwenden wir android_binary, wo wir das Manifest, das minimale SDK usw. festlegen.  Unsere Anwendung h√§ngt von der Quelle ab, daher erw√§hnen wir sie in Deps und gehen weiter zu dem, was sie sind und wo sie zu finden sind.  Der Code h√§ngt auch von den Ressourcen und der Appcompat-Bibliothek ab.  F√ºr Ressourcen verwenden wir das √ºbliche Ziel zum Zusammenstellen von Android-Quellen, weisen ihm jedoch nur Ressourcen ohne Java-Klassen zu.  Und wir beschreiben einige Regeln, die Bibliotheken von Drittanbietern importieren.  Au√üerdem wird appcompat_core erw√§hnt, von dem appcompat abh√§ngt. <br><br><div class="spoiler">  <b class="spoiler_title">BAUEN</b> <div class="spoiler_text"><pre> <code class="python hljs">load(<span class="hljs-string"><span class="hljs-string">"@io_bazel_rules_kotlin//kotlin:kotlin.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"kt_android_library"</span></span>) android_binary( name = <span class="hljs-string"><span class="hljs-string">"app"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, manifest_values = { <span class="hljs-string"><span class="hljs-string">"minSdkVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"15"</span></span>, }, deps = [ <span class="hljs-string"><span class="hljs-string">":lib"</span></span>, ], ) kt_android_library( name = <span class="hljs-string"><span class="hljs-string">"lib"</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">"src/main/java/**/*"</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">":res"</span></span>, <span class="hljs-string"><span class="hljs-string">":appcompat"</span></span>, ], ) android_library( name = <span class="hljs-string"><span class="hljs-string">"res"</span></span>, resource_files = glob([<span class="hljs-string"><span class="hljs-string">"src/main/res/**/*"</span></span>]), manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">":appcompat_core"</span></span>, ] ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat_core"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  In Zahlen f√ºr ein so kleines Projekt sieht alles traurig aus.  Mehr als eine halbe Minute f√ºr einen sauberen Build Hallo Welt!  - sehr viel.  Inkrementelle Bauzeiten sind ebenfalls alles andere als perfekt. <br><br>  Bazel wird von seinen Entwicklern (Google) f√ºr einige ihrer Projekte verwendet, einschlie√ülich Serverprojekten, sowie f√ºr Dropbox und Huawei, die mobile Anwendungen f√ºr sie sammeln.  Und der ber√ºchtigte Dolch 2 geht auch nach Bazel. <br><br><h2>  Buck </h2><br>  Es wurde von √úberl√§ufern von Google bis Facebook erfunden.  Er benutzte Python, um die Konfigurationen zu beschreiben, und wanderte dann zu der heute erw√§hnten Lerche aus.  Er benutzt pl√∂tzlich das Ameisensystem. <br><br>  Buck Pros: <br><br><ul><li>  unterst√ºtzt verschiedene Programmiersprachen und kann sowohl Andriod als auch iOS erstellen; </li><li>  Kann zuvor gesammelte Artefakte zwischenspeichern </li><li>  Buck hat eine eigene Dex-Implementierung erstellt, die schneller als die Standardimplementierung funktioniert und mit dem Systemd√§mon h√§ngt.  So sparen sie Zeit bei der Dex-Initialisierung.  Ingenieure haben wirklich viel optimiert.  Beispielsweise sammelt Buck keinen Code, der von der Bibliothek abh√§ngt, wenn sich die Schnittstelle beim √Ñndern der Bibliotheksinternale nicht ge√§ndert hat.  √Ñhnliches gilt f√ºr Ressourcen: Wenn sich die Bezeichner nicht ge√§ndert haben, wird der Code beim √Ñndern von Ressourcen nicht wieder zusammengesetzt. </li><li>  Es gibt ein Plugin, das Buck hinter der Gredlovsky-Konfiguration verstecken kann.  Das hei√üt,  Sie erhalten so etwas wie ein normales Gradle-Projekt, das tats√§chlich √ºber Buck erstellt wird. </li></ul><br>  Nachteile Buck: <br><br><ul><li>  es ist so schwer zu pflegen wie Bazel.  Das hei√üt,  hier ist es auch notwendig, Regeln auf niedriger Ebene zu beschreiben, die den Montageprozess klar beschreiben; </li><li>  Buck kann Maven-Abh√§ngigkeiten unter anderem nicht alleine aufl√∂sen. </li></ul><br>  Also, was macht die Assembly-Konfiguration f√ºr Hallo Welt!  durch Geld?  Hier beschreiben wir eine Konfigurationsdatei, in der wir angeben, dass wir ein Android-Projekt erstellen m√∂chten, das mit einem Debug-Schl√ºssel signiert wird.  Die Anwendung h√§ngt ebenfalls von der Quell-Lib im deps-Array ab.  Als n√§chstes kommt das Ziel mit den Signatureinstellungen.  Ich verwende einen Debit-Schl√ºssel, der mit dem Android SDK geliefert wird.  Unmittelbar danach folgt das Ziel, das die Quellen von Kotlin f√ºr uns sammelt.  Wie bei Bazel h√§ngt es von Ressourcen und Kompatibilit√§tsbibliotheken ab. <br><br>  Wir beschreiben sie.  In Buck gibt es ein separates Ziel f√ºr Ressourcen, daher sind Fahrr√§der nicht n√ºtzlich.  Im Folgenden finden Sie die Regeln f√ºr heruntergeladene Bibliotheken von Drittanbietern. <br><br><div class="spoiler">  <b class="spoiler_title">BAUEN</b> <div class="spoiler_text"><pre> <code class="python hljs">android_binary( name = <span class="hljs-string"><span class="hljs-string">'app'</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">'src/main/AndroidManifest.xml'</span></span>, manifest_entries = { <span class="hljs-string"><span class="hljs-string">'min_sdk_version'</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, }, keystore = <span class="hljs-string"><span class="hljs-string">':debug_keystore'</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">':lib'</span></span>, ], ) keystore( name = <span class="hljs-string"><span class="hljs-string">'debug_keystore'</span></span>, store = <span class="hljs-string"><span class="hljs-string">'debug.keystore'</span></span>, properties = <span class="hljs-string"><span class="hljs-string">'debug.keystore.properties'</span></span>, ) android_library( name = <span class="hljs-string"><span class="hljs-string">'lib'</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">'src/main/java/*.kt'</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">':res'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat_core'</span></span>, ], language = <span class="hljs-string"><span class="hljs-string">'kotlin'</span></span>, ) android_resource( name = <span class="hljs-string"><span class="hljs-string">'res'</span></span>, res = <span class="hljs-string"><span class="hljs-string">"src/main/res"</span></span>, package = <span class="hljs-string"><span class="hljs-string">'com.example.myapplication'</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat_core'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  Das Ganze l√§uft sehr z√ºgig.  Eine saubere Baugruppe dauert etwas mehr als 7 Sekunden, w√§hrend eine inkrementelle Baugruppe 200 Millisekunden lang vollst√§ndig unsichtbar ist.  Ich denke, das ist ein sehr gutes Ergebnis. <br><br>  Das macht Facebook.  Zus√§tzlich zu ihrer Flaggschiff-Anwendung sammeln sie Facebook Messenger f√ºr sie.  Und Uber, der mit Lyft das Plugin f√ºr Gradle und Airbnb erstellt hat. <br><br><h2>  Schlussfolgerungen </h2><br>  Nachdem wir √ºber jedes Build-System gesprochen haben, k√∂nnen wir sie anhand des Beispiels Hallo, Welt!  Die Konsolenbaugruppe √ºberzeugt durch ihre Stabilit√§t.  Die Ausf√ºhrungszeit des Skripts vom Terminal aus kann als Referenz f√ºr die Zusammenstellung sauberer Builds angesehen werden, da die Kosten von Drittanbietern f√ºr das Parsen von Skripten hier minimal sind.  In diesem Fall w√ºrde ich Maven als offensichtlichen Au√üenseiter f√ºr eine √§u√üerst unbedeutende Zunahme der inkrementellen Montage bezeichnen.  Bazel analysiert Konfigurationen sehr lange und initialisiert sie: Es besteht die Idee, dass die Initialisierungsergebnisse irgendwie zwischengespeichert werden, da ihr inkrementeller Build viel schneller als sauber ist.  Buck ist der unbestrittene Anf√ºhrer dieser Sammlung.  Sehr schnelle saubere und inkrementelle Montage. <br><br><img src="https://habrastorage.org/webt/br/f3/_p/brf3_pzmfeixbecyexdghd5ivfs.jpeg"><br><br>  Vergleichen Sie nun die Vor- und Nachteile.  Ich werde Maven nicht in den Vergleich einbeziehen, da es eindeutig gegen Gradle verliert und auf dem Markt fast nie verwendet wird.  Ich vereine Buck und Bazel, weil sie ungef√§hr die gleichen Vor- und Nachteile haben. <br><br>  Also, √ºber Gradle: <br><br><ul><li>  Das erste und meiner Meinung nach wichtigste ist, dass es einfach ist.  Sehr einfach; </li><li>  Entladen und Entladen von Abh√§ngigkeiten; </li><li>  F√ºr ihn gibt es viele verschiedene Schulungen und Dokumentationen; </li><li>  aktiv von Google und der Community unterst√ºtzt.  Hervorragende Integration in Android Studio, das aktuelle Flaggschiff-Entwicklungstool.  Alle neuen Funktionen zum Erstellen einer Android-Anwendung werden zuerst in Gradle angezeigt. </li></ul><br>  √úber Buck / Bazel: <br><br><ul><li>  kann definitiv sehr schnell sein im Vergleich zu Gradle.  Ich glaube, dass sich dies besonders bei sehr gro√üen Projekten bemerkbar macht </li><li>  Sie k√∂nnen ein Projekt behalten, in dem Quellcodes f√ºr iOS und Android vorhanden sind, und diese mit einem Build-System zusammenstellen.  Dadurch k√∂nnen einige Teile der Anwendung zwischen Plattformen fummeln.  So l√§uft beispielsweise Chrom. </li><li>  gezwungen, Abh√§ngigkeiten im Detail zu beschreiben und so den Entwickler buchst√§blich zu zwingen, multimodular zu sein. </li></ul><br>  Vergessen Sie nicht die Nachteile. <br><br>  Gradle zahlt f√ºr seine Einfachheit, indem es langsam und ineffizient ist. <br>  Buck / Bazel hingegen leidet aufgrund seiner Geschwindigkeit unter der Notwendigkeit, den Erstellungsprozess in Konfigurationen detaillierter zu beschreiben.  Nun, da sie vor relativ kurzer Zeit auf dem Markt erschienen sind, gibt es nicht viele Dokumentationen und verschiedene Spickzettel. <br><br><h2>  iFUNNY </h2><br>  Vielleicht haben Sie eine Frage, wie wir iFunny sammeln.  Genau wie viele andere - mit Gradle.  Und daf√ºr gibt es Gr√ºnde: <br><br><ol><li>  Es ist noch nicht klar, welchen Gewinn an Montagegeschwindigkeit dies f√ºr uns bringen wird.  Ein sauberer Build von iFunny dauert fast 3 Minuten und ist inkrementell - ungef√§hr eine Minute, was eigentlich nicht sehr lang ist. </li><li>  Buck- oder Bazel-Build-Konfigurationen sind schwieriger zu warten.  Im Fall von Buck m√ºssen Sie auch die Relevanz der verbundenen Bibliotheken und der Bibliotheken √ºberwachen, von denen sie abh√§ngen. </li><li>  Es ist banal teuer, ein bestehendes Projekt von Gradle nach Buck / Bazel zu √ºbertragen, insbesondere unter Bedingungen unverst√§ndlichen Gewinns. </li></ol><br>  Wenn Ihr Projekt l√§nger als 45 Minuten dauert und etwa 20 Mitarbeiter im Android-Entwicklungsteam sind, ist es sinnvoll, √ºber eine √Ñnderung des Build-Systems nachzudenken.  Wenn Sie und Ihr Freund ein Startup s√§gen, verwenden Sie Gradle und lassen Sie diese Gedanken fallen. <br><br><img src="https://habrastorage.org/webt/ah/po/1o/ahpo1oen8smqi1ks_fdqfqeydea.jpeg"><br><br>  Gerne diskutiere ich die Aussichten f√ºr Alternativen zu Gradle in den Kommentaren! <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zum Projekt</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469771/">https://habr.com/ru/post/de469771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469755/index.html">Wie man ein guter Programmierer ist</a></li>
<li><a href="../de469757/index.html">AR-Technologie im Dienste der Malerei</a></li>
<li><a href="../de469761/index.html">Wie implementiere ich Analysen und breche die Anwendung nicht?</a></li>
<li><a href="../de469765/index.html">Lob entspannt sich und Kritik beleidigt - wie man die Arbeit eines anderen bewertet, damit es allen gut geht</a></li>
<li><a href="../de469767/index.html">Wie wir uns f√ºr ServiceDesk entschieden haben. Teil 1</a></li>
<li><a href="../de469775/index.html">Zeichne einen Ton</a></li>
<li><a href="../de469779/index.html">Outdoor Future London Academy Treffen</a></li>
<li><a href="../de469783/index.html">Warum die Zukunft der Lieferung m√∂glicherweise noch hinter den Luftschiffen liegt</a></li>
<li><a href="../de469785/index.html">Intels Use NUC - Gewinnen Sie den NUC-Wettbewerb. Ergebnisse und Gewinner</a></li>
<li><a href="../de469799/index.html">OWASP TOP 10 Schwachstellen von IoT-Ger√§ten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>