<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚èèÔ∏è üìº üë∞üèΩ Rede aberta de telegrama: teoria e pr√°tica do validador de rede üöô üíáüèø üîÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nos √∫ltimos meses, toda a aten√ß√£o da comunidade mundial de blockchain foi atra√≠da para o lan√ßamento de um dos maiores projetos de criptomoeda - Telegr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rede aberta de telegrama: teoria e pr√°tica do validador de rede</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mercuryo/blog/479354/"><img src="https://habrastorage.org/webt/dv/br/cr/dvbrcry8avlorp_luis0jjona4i.jpeg"><br><br>  Nos √∫ltimos meses, toda a aten√ß√£o da comunidade mundial de blockchain foi atra√≠da para o lan√ßamento de um dos maiores projetos de criptomoeda - Telegram Open Network (TON). <br>  Como √© realmente o blockchain da TON?  A rede TON √© realmente descentralizada?  Qual √© a sua real escalabilidade?  Como se tornar um validador de rede? <br><br>  As respostas a essas e outras perguntas foram tentadas encontrar pela equipe do projeto <a href="https://mercuryo.io/ru/%3Futm_source%3Dhabr%26utm_medium%3Dhabr%26utm_campaign%3DHabr">Mercuryo</a> , que participa ativamente da rede de testes desde o in√≠cio de setembro de 2019. <br><br>  Em 15 de novembro de 2019, os servi√ßos do Telegram foram transferidos para o testnet 2 e a terceira fase do teste come√ßou.  Nossa equipe continuou a participar dos testes, tornando-se os primeiros validadores da rede ap√≥s o TON. <br><br>  Para participar do processo de valida√ß√£o, √© necess√°rio que o usu√°rio n√£o tenha apenas um n√∫mero suficiente de moedas (tokens GRAM), mas tamb√©m um n√≥ de rede completo em execu√ß√£o constante (N√≥ Completo da TON Blockchain). <br><br>  Teoricamente, qualquer usu√°rio pode se tornar um validador sujeito √† condi√ß√£o de possuir a parcela m√≠nima necess√°ria do ativo (em moedas de grama) na cadeia principal, mas, na pr√°tica, surgem v√°rias perguntas que nossa equipe responder√° neste artigo. <br><br>  Al√©m disso, queremos compartilhar experi√™ncias sobre o uso do <b>tonlib-cli</b> , como  Atualmente, praticamente n√£o h√° informa√ß√µes documentadas, ao contr√°rio da vers√£o b√°sica descrita em detalhes no <a href="https://test.ton.org/HOWTO.txt">HowTo.</a> <a name="habracut"></a><br><br><h3>  TON Blockchain </h3><br>  O principal componente da Telegram Open Network √© um sistema flex√≠vel de blockchain, a seguir denominado TON Blockchain, que, segundo os pr√≥prios desenvolvedores, √© capaz de processar milh√µes de transa√ß√µes por segundo, suportando Turing Complete Smart Contracts, especifica√ß√µes oficiais atualizadas de blockchain, transfer√™ncias de v√°rias moedas, bem como canais de micropagamentos para redes de pagamento fora da cadeia (fora da cadeia). <br><br>  ‚ÄúA arquitetura TON Blockchain √© √∫nica porque possui recursos espec√≠ficos, como um mecanismo vertical de autocorre√ß√£o e um Instant Hypercube Routing, que permite que o blockchain seja r√°pido, confi√°vel escal√°vel e sustent√°vel ". <br><br>  Como mencionado acima, <b>TON Blockchain</b> √© o nome convencional para uma rede descentralizada (um conjunto de cadeias de blocos) ou uma cadeia de blocos 2D que consiste em tr√™s tipos principais de cadeias de blocos. <br><cut></cut><br>  Master blockchain ou Masterchain √© uma cadeia √∫nica de blocos que cont√©m informa√ß√µes gerais sobre o protocolo e os valores atuais de seus par√¢metros, um conjunto de validadores e suas a√ß√µes, um conjunto de cadeias de trabalho atualmente ativas e seus "shards", al√©m de um conjunto de hashes dos √∫ltimos blocos masterchains e shardchaynov. <br><br>  <b>Blockchains de trabalho ou Workchains</b> - um conjunto (at√© 232) de blockchains que s√£o "cavalos de trabalho" que cont√™m transa√ß√µes de transfer√™ncia de ativos e contratos inteligentes.  Ao mesmo tempo, cadeias de trabalho individuais podem ter suas pr√≥prias ‚Äúregras‚Äù, formatos de endere√ßo de conta, formatos de transa√ß√£o, v√°rias m√°quinas virtuais (VMs) para contratos inteligentes, diferentes tokens ou criptomoedas etc.  Mas todos eles devem satisfazer alguns crit√©rios b√°sicos de interoperabilidade para garantir uma intera√ß√£o relativamente simples entre si.  Portanto, o Blockchain da TON √© inerentemente heterog√™neo, assim como as blockchains EOS e Polkadot. <br><br>  <b>Shard blockchains ou Shardchains</b> - um subconjunto de blockchains (at√© 260) em um conjunto de cadeias de trabalho, garantindo a opera√ß√£o do sistema de sharding e tendo as mesmas regras e formato de bloco que as cadeias de trabalho.  Os shardchains cont√™m apenas um subconjunto de contas, dependendo dos primeiros bits (mais significativos) do endere√ßo de cada conta espec√≠fica.  Como todos os shardchains t√™m um formato e regras comuns para os blocos de constru√ß√£o, a blockchain TON a esse respeito √© homog√™nea e atende aos requisitos descritos em uma das propostas de dimensionamento da Ethereum. <br><br><img src="https://habrastorage.org/webt/nn/m7/4i/nnm74iexx7lj9xjp4jyajurkick.png"><br><br>  Cada bloco do shardchain (assim como o masterchain) na verdade n√£o √© apenas um bloco, mas uma pequena blockchain.  Como regra geral, essa "blockchain blockchain" ou "blockchain vertical" consiste em exatamente um bloco, portanto, pode ser considerado apenas um bloco da blockchain "comum" correspondente (ou "cadeia horizontal de blocos").  No entanto, se for necess√°rio corrigir blocos incorretos, um novo bloco √© inserido na "cadeia vertical de blocos", contendo a substitui√ß√£o do bloco "horizontal" existente ou a "diferen√ßa de bloco", contendo apenas uma descri√ß√£o das partes da vers√£o anterior do bloco que precisam ser substitu√≠das.  Esse mecanismo espec√≠fico da TON para substituir blocos inv√°lidos detectados sem a necessidade de um hard fork √© chamado de <b>blockchain 2D</b> ou <b>simplesmente 2-blockchain.</b> <br><br><h3>  Algoritmos de consenso e mecanismo de prote√ß√£o de rede </h3><br>  A TON oferece uma blockchain baseada no <b>Paradigma de Fragmento Infinito</b> (Prova de Participa√ß√£o ou PoS).  De acordo com a documenta√ß√£o do desenvolvedor: <br><br>  ‚ÄúQuase todas as implementa√ß√µes de blockchains usando sharding s√£o baseadas no modelo de cima para baixo: primeiro imaginamos uma blockchain e depois decidimos como dividi-la em v√°rias partes interagindo umas com as outras (shardchains) para aumentar a efici√™ncia e a escalabilidade. <br><br>  A abordagem da TON ao sharding √© baseada no princ√≠pio de baixo para cima, o que significa que o blockchain original √© extremamente escal√°vel e cada shardchain individual cont√©m apenas uma conta ou contrato inteligente.  No pr√≥ximo n√≠vel, temos um grande n√∫mero de "cadeias de contas", cada uma das quais descreve as transi√ß√µes entre os estados de apenas uma conta e envia mensagens contendo informa√ß√µes sobre transa√ß√µes.  Ao mesmo tempo, √© impratic√°vel ter centenas de milh√µes de blockchains, atualiza√ß√µes (ou seja, novos blocos) em cada um deles aparecem muito raramente; portanto, para uma implementa√ß√£o mais eficaz, agrupamos essas "cadeias de contas" em "shardchains", cada bloco essencialmente √© uma cole√ß√£o de blocos de cadeias de contas que foram vinculadas a esse fragmento espec√≠fico.  Assim, ‚Äúcadeias de contas‚Äù s√£o na verdade apenas blocos l√≥gicos ou virtuais dentro dos ‚Äúshardchains‚Äù realmente existentes.  Esse mecanismo lan√ßa luz sobre muitas das decis√µes de design do blockchain TON e chamamos de "Paradigma do Fragmento Infinito". <br><br>  A rede de consenso da TON consiste em v√°rios tipos de n√≥s: <b>validadores, nominadores, phishers e coletores.</b> <br><br><img src="https://habrastorage.org/webt/ze/ui/kr/zeuikreid-4ifyrg6aizdb02szc.png"><br><br>  <b>Os validadores</b> s√£o n√≥s PoS e fabricantes de blocos.  <b>Os pescadores</b> monitoram a rede de consenso para encontrar um erro ou identificar um n√≥ de consenso supostamente malicioso e, se o phisher confirmar inequivocamente que o n√≥ √© esse, recebe uma recompensa na forma de confisco de parte da parte desse validador. <br><br>  A tarefa dos <b>coletores</b> √© preparar blocos shardchain e fornec√™-los para valida√ß√£o em n√≥s PoS, para os quais eles recebem sua parte da recompensa por criar o bloco.  Ao mesmo tempo, os coletores s√£o essencialmente participantes adicionais no consenso, uma vez que os validadores quase sempre geram blocos por conta pr√≥pria. <br><br>  <b>Os nomeadores</b> emprestam seus ativos (tokens <b>Gram</b> ) aos validadores para obter lucro.  De fato, os candidatos n√£o s√£o inclu√≠dos na infraestrutura dos validadores, mas apenas compartilham sua grande parte inicial do ativo entre eles em troca de uma porcentagem proporcional da remunera√ß√£o total.  Assim, o esquema e a quantia de remunera√ß√£o que os indicados recebem dependem inteiramente dos resultados do trabalho dos validadores, enquanto os indicados ‚Äúvotam‚Äù nos validadores, emprestando-lhes tokens Gram.  Os nomeados podem ser detentores de tokens individuais ou conjuntos que gerenciam os fundos de usu√°rios individuais de TON e, ao mesmo tempo, atuam como validadores, atuando como delegados atrav√©s do contrato inteligente de TON.  Nesse caso, a remunera√ß√£o total desse pool √© distribu√≠da entre seus participantes na propor√ß√£o de suas contribui√ß√µes. <br><br>  O processo de gera√ß√£o de novos blocos √© o seguinte: um certo n√∫mero de validadores seleciona blocos de cadeia mestre (shards) adequados para valida√ß√£o usando um algoritmo especial; em seguida, um subconjunto menor de validadores √© selecionado para cada um desses shard na ordem determinada de forma pseudo-aleat√≥ria, com um intervalo de aproximadamente a cada 1024 blocos. <br><br>  Portanto, para cada bloco, existe um conjunto de validadores pseudo-aleatoriamente selecionados para determinar qual bloco candidato tem a maior prioridade.  Validadores e outros n√≥s verificam a validade dos candidatos ao bloco proposto.  Se o validador assina automaticamente (n√£o intencionalmente) um candidato inv√°lido para os bloqueios, ele √© punido com a perda de parte ou de toda a sua remunera√ß√£o ou com a suspens√£o da participa√ß√£o na sele√ß√£o de validadores por algum tempo. <br><br>  Em seguida, os validadores precisam chegar a um consenso com base no algoritmo BFT (Protocolo de Resili√™ncia Bizantino), semelhante ao protocolo <b>pBFT</b> ou <b>Honey Badger BFT</b> .  Depois que o consenso √© alcan√ßado, um novo bloco √© criado, enquanto as taxas de transa√ß√£o s√£o distribu√≠das entre os validadores. <br><br>  Note-se que cada validador pode ser selecionado para participar de v√°rios subconjuntos de validadores; portanto, assume-se que todos os algoritmos de valida√ß√£o e consenso s√£o executados em paralelo. <br><br>  Depois que todos os novos blocos de shards da cadeia s√£o gerados ou o tempo limite termina, aparece uma mensagem de que um novo bloco da cadeia principal foi criado, o que inclui hashes dos √∫ltimos blocos de todos os shards com base no consenso pBFT de todos os validadores. <br><br><h2>  TON Testnet: experi√™ncia pr√°tica na rede aberta do telegrama </h2><br>  A equipe do projeto <a href="https://mercuryo.io/ru/%3Futm_source%3Dhabr%26utm_medium%3Dhabr%26utm_campaign%3DHabr">Mercuryo</a> participa ativamente da rede de testes desde setembro de 2019 e, durante o per√≠odo de testes, adquirimos alguma experi√™ncia que gostar√≠amos de compartilhar com voc√™. <br><br><h3>  M√©todos de acesso √† rede </h3><br>  A intera√ß√£o com a rede TON, de uma maneira ou de outra, se resume ao uso de especifica√ß√µes TL que descrevem como interagir com a API.  Os arquivos de especifica√ß√£o est√£o dispon√≠veis <a href="https://github.com/ton-blockchain/ton/tree/master/tl/generate/scheme">aqui</a> . <br><br>  Existem tr√™s tipos de APIs: <br><br>  <b>ton_api</b> - para interagir com o validator-engine-console do Full Node <br>  <b>lite_api</b> - para trabalhar com lite-client <br>  <b>tonlib</b> - tudo sobre a carteira √© coletado aqui e esta √© a √∫nica <b>API tonlib-cli</b> dispon√≠vel ao p√∫blico <br><br><h3>  Cria√ß√£o de carteira </h3><br>  A maneira mais f√°cil de criar uma carteira √© usar a Test Gram Wallet, dispon√≠vel no <a href="https://wallet.ton.org/">site</a> oficial dos sistemas operacionais Windows, macOS e Linux. <br><br><img src="https://habrastorage.org/webt/my/em/6v/myem6vpqzwfyzxc17pyp5ddimwy.png"><br><img src="https://habrastorage.org/webt/pu/iz/n4/puizn4ai30qgix2biqtzbkax74c.png"><br><br>  Existem tamb√©m v√°rias maneiras de interagir atrav√©s da interface da linha de comandos: b√°sica e usando <b>tonlib-cli</b> .  Infelizmente, no momento n√£o h√° compatibilidade entre eles. <br><br>  Aqui consideraremos apenas as ferramentas que os pr√≥prios desenvolvedores da TON oferecem.  Se a vers√£o b√°sica estiver documentada em detalhes no <a href="https://test.ton.org/HOWTO.txt">HowTo</a> , as informa√ß√µes sobre o uso do <b>tonlib-cli estar√£o</b> praticamente ausentes. <br><br>  Como mencionado acima, em TON existem tr√™s APIs para tarefas diferentes.  As fun√ß√µes associadas √† opera√ß√£o da carteira s√£o respons√°veis ‚Äã‚Äãpelo <b>tonlib</b> . <br><br>  Para come√ßar a trabalhar com o <b>tonlib-cli</b> , al√©m da pr√≥pria interface da linha de comandos, voc√™ deve ter um arquivo de configura√ß√£o para conectar-se ao servidor de rede p√∫blico da TON, dispon√≠vel <a href="">aqui</a> . <br><br>  A conex√£o √© realizada pela equipe <br><br>  <b>tonlib-cli -c ton-lite-client-test1.config.json -v 0</b> <br><br>  onde -v 0 √© o par√¢metro respons√°vel pela sa√≠da das informa√ß√µes de depura√ß√£o. <br><br><h3>  Lista de comandos: </h3><br><img src="https://habrastorage.org/webt/hh/i8/in/hhi8inliqyjpl11cmbf_glax-bq.png"><br><br>  Para criar um endere√ßo de carteira, use o comando <b>genkey</b> e uma lista de frases mnem√¥nicas que podem ser necess√°rias para restaurar o acesso ao endere√ßo em caso de perda da chave privada. <br><br><img src="https://habrastorage.org/webt/mt/we/cq/mtwecq-g9afzaxiyf5neygidnqq.png"><br><br><h3>  Lista de chaves </h3><br>  O comando <b>keys</b> exibe uma lista de chaves.  Para opera√ß√µes adicionais ao executar outros comandos, √© necess√°rio usar o n√∫mero de s√©rie, ou seja,  para a primeira chave, haver√° <b>id 0</b> . <br><br><img src="https://habrastorage.org/webt/sa/xd/q0/saxdq0xebpvyzr033qnb5qi96jm.png"><br><br><h3>  Inicializa√ß√£o de endere√ßo </h3><br>  Depois de criar o endere√ßo, ele deve ser registrado na rede.  Para fazer isso, voc√™ deve primeiro reabastecer.  Inicialmente, um contrato inteligente especial foi usado para isso - <b>testgiver</b> , mas agora √© mais f√°cil e conveniente usar um bot especial no telegrama <b>@test_ton_bot</b> . <br><br>  Imediatamente ap√≥s o reabastecimento, o status da conta √© definido como uninited_accountState e ser√° alterado somente ap√≥s o envio de tokens de teste GRM desse endere√ßo. <br><br>  Se voc√™ j√° possui tokens em sua balan√ßa e precisa ativar outra carteira, pode usar o comando <b>transferf</b> e, juntamente com o reabastecimento da carteira, ele ser√° inicializado. <br><br><img src="https://habrastorage.org/webt/v_/0h/mi/v_0hmiomkiqguimn1ptf1zk-dhy.png"><br><br>  Voc√™ pode descobrir o status da carteira usando o comando <b>getstate 0.</b> <br><br><img src="https://habrastorage.org/webt/fs/mw/sz/fsmwszaop6impkokx1m519-zphw.png"><br><br>  Obter hist√≥rico de transa√ß√µes usando o comando <br><br>  <b>gethistory &lt;num_of_key&gt;</b> <br><br>  onde &lt;num_of_key&gt; √© o n√∫mero de sequ√™ncia da chave <br><br><img src="https://habrastorage.org/webt/wc/8i/yw/wc8iywbafrylnebycxbt5qvro9s.png"><br><br><h3>  Base de rede </h3><br>  Como na maioria das blockchains existentes, o TON √© baseado em servidores que armazenam um hist√≥rico completo de todas as blockchains j√° criadas na rede. <br><br>  Para executar um n√≥ completo na rede de teste TON, 8 n√∫cleos produtivos, 4-8 GB de RAM s√£o suficientes, no momento da escrita, os dados ocupavam cerca de 50 GB de disco r√≠gido, mas √© melhor ter uma margem de pelo menos 100 GB.  Note-se que √© melhor usar uma unidade SSD, pois  √â necess√°rio um grande n√∫mero de IOPS para a grava√ß√£o; caso contr√°rio, a sincroniza√ß√£o com a rede ser√° muito lenta. <br><br>  Como sistema operacional ativo, √© melhor usar o Ubuntu 18.04, como  a maioria dos testes da comunidade √© realizada. <br><br>  <b>Guias de Instala√ß√£o</b> <br><br>  <a href="https://test.ton.org/README.txt">README.txt</a> <br>  <a href="https://test.ton.org/FullNode-HOWTO.txt">FullNode-HOWTO.txt</a> <br>  <a href="https://test.ton.org/Validator-HOWTO.txt">Validator-HOWTO.txt</a> <br><br><h3>  Sistema validador </h3><br>  Sabe-se que a blockchain TON consiste em blocos shardchain e masterchain, que s√£o criados e verificados por n√≥s designados especiais chamados validadores.  Os validadores recebem alguma recompensa por seu "trabalho": manter a sa√∫de da blockchain TON, enquanto a renda √© distribu√≠da proporcionalmente dentro da comunidade de validadores. <br><br>  √Ä primeira vista, tudo est√° claro, mas, na pr√°tica, surgem v√°rias quest√µes relacionadas a isso: <br><br><ul><li>  <b>Existe uma restri√ß√£o de rede no bife m√°ximo do validador?</b> </li></ul><br>  O limite do tamanho de um compartilhamento para um validador sempre pode ser verificado com o comando <b>getconfig 17</b> , que mostrar√° os tamanhos reais dos bifes permitidos: <br><br><img src="https://habrastorage.org/webt/ai/hh/zq/aihhzqztupdjgzsxkox665modzu.png"><br><br>  A captura de tela mostra que, no momento, o tamanho m√≠nimo de compartilhamento √© de 10.000 GRAM.  No entanto, se um validador n√£o recebe mais de 100.000 GRAM por uma rodada de vota√ß√£o, ele n√£o tem direito a participar das elei√ß√µes.  Ao mesmo tempo, o n√∫mero m√°ximo de tokens por validador n√£o pode exceder 10.000.000 GRAM e, para que a vota√ß√£o ocorra, o tamanho m√≠nimo do bife total deve exceder 1.000.000 GRAM. <br><br><ul><li>  <b>Como os validadores s√£o selecionados?</b> </li></ul><br>  Para se candidatar √† participa√ß√£o no processo de valida√ß√£o, voc√™ deve ter no m√≠nimo 10.000 GRAM.  O algoritmo do processo de elei√ß√£o √© descrito em detalhes no contrato inteligente <b>elector-code.fc</b> <br>  Provavelmente, o contrato ser√° diferente na rede principal, portanto a vers√£o atual √© aplic√°vel apenas √† rede de teste. <br><br>  Uma parte de 10.000 GRAM n√£o significa que voc√™ pode se tornar um validador, pois  o recebimento de tokens de teste pode ser facilmente automatizado por solicita√ß√µes ao <b>testgiver</b> . <br><br>  No momento, quase todos os validadores, ao participar da vota√ß√£o, definem o fator m√°ximo no valor de 2,7 e um bife no valor de 120.000 GRAM, uma vez que existem muitas apostas, devido ao seu peso, o bife m√≠nimo sobe para 120.000 / 2,7 = 45.000 GRAM (diferentemente 100.000 de acordo com a documenta√ß√£o oficial).  Mas mesmo com um bife t√£o m√≠nimo, suas chances s√£o quase nulas, pois os tr√™s principais validadores t√™m um fator m√°ximo de 2, o que aumenta a participa√ß√£o m√≠nima para 60.000 GRAM, o que permite que voc√™ se torne um validador na rede de teste. <br><br>  Se todos os validadores atuais aumentassem seu fator m√°ximo ou reduzissem o tamanho do bife, seria poss√≠vel se tornar um validador com um bife m√≠nimo, uma vez que o n√∫mero m√°ximo de validadores (1000 n√≥s) n√£o seria excedido. <br><br><ul><li>  <b>Se o sistema validador estiver centralizado, todo o blockchain tamb√©m?</b> </li></ul><br>  N√£o h√° verifica√ß√µes, ou seja,  ningu√©m controla centralmente os validadores; os pr√≥prios nominadores determinam os riscos ao escolher um validador. <br><br><ul><li>  <b>Que tipos de multas s√£o fornecidas aos validadores?</b> </li></ul><br>  N√£o h√° informa√ß√µes no momento, provavelmente haver√° um mecanismo de consenso no documento, porque mesmo os n√≥s fora de sincronia receberam pr√™mios na rede de teste. <br><br><ul><li>  <b>Contratos inteligentes</b> </li></ul><br>  Para criar contratos inteligentes de TON, duas linguagens de programa√ß√£o especiais s√£o usadas: <b>Fift</b> e <b>FunC</b> .  Se o <b>Fift</b> tiver pelo menos <a href="https://test.ton.org/fiftbase.pdf">documenta√ß√£o</a> geral, <b>√©</b> quase imposs√≠vel encontrar informa√ß√µes sobre o <b>FunC</b> (mesmo nas <a href="https://rb.ru/news/telegram-contest/">condi√ß√µes de</a> um <a href="https://rb.ru/news/telegram-contest/">concurso de</a> desenvolvimento <a href="https://rb.ru/news/telegram-contest/">, √©</a> indicado que ele s√≥ pode ser obtido analisando seu c√≥digo-fonte). <br><br>  Durante o teste, foi poss√≠vel descobrir que a base de c√≥digo do <b>FunC</b> n√£o <b>√©</b> t√£o volumosa (em compara√ß√£o com o <b>Fift</b> ) e permite que voc√™ o aprenda muito mais rapidamente, portanto, trabalhar com o <b>FunC √©</b> muito mais f√°cil do que com o <b>Fift</b> . <br><br><ul><li>  <b>Perguntas reais / urgentes / abertas</b> </li></ul><br>  Sincroniza√ß√£o lenta <br>  <a href="https://github.com/ton-blockchain/ton/issues/100">https://github.com/ton-blockchain/ton/issues/100</a> <br><br>  Permiss√µes para mecanismo de valida√ß√£o <br>  +0 = consultas usuais de lite-client <br>  +1 = consultas estat√≠sticas completas do n√≥ <br>  +2 = consultas de modifica√ß√£o de configura√ß√£o de c√≥digo completo <br>  +4 = consultas potencialmente perigosas (como exporta√ß√£o de chave privada ou assinatura de cadeias arbitr√°rias) <br>  +8 = reservado para extens√µes futuras (n√£o faz nada no momento) <br><br><ul><li>  <b>Como fazer o PIPE funcionar com lite-client?</b> </li></ul><br>  Por padr√£o, a sa√≠da lite-client √© enviada ao stderr; portanto, para process√°-lo, voc√™ deve primeiro redirecionar a sa√≠da do stderr para o stdout: <br><br>  $ lite-client 2 &gt;&gt; (grep ...) <br><br><ul><li>  <b>Quais s√£o as op√ß√µes para acesso program√°tico √† rede?</b> </li></ul><br>  <a href="https://github.com/ton-blockchain/ton/issues/76">https://github.com/ton-blockchain/ton/issues/76</a> <br><br><ul><li>  <b>Qual configura√ß√£o de servidor √© necess√°ria para o validador?</b> </li></ul><br>  O uso de um servidor com processador duplo √© oficialmente recomendado (pelo menos 8 n√∫cleos por processador).  O software n√£o √© muito exigente em RAM, ent√£o 16 GB √© suficiente.  Voc√™ deve usar um SSD como unidade principal, cujo tamanho m√≠nimo recomendado √© 512 GB.  Um disco r√≠gido de 8 TB √© suficiente para armazenar dados arquivados. <br><br>  √â essencial que voc√™ tenha uma conex√£o √† Internet de alta velocidade: com uma carga m√©dia prevista de 100 Mbit / s, voc√™ deve poder lidar com cargas de pico de at√© 1 Gbit / s. <br><br>  √â recomend√°vel usar o XFS como sistema de arquivos, pois as informa√ß√µes sobre cada bloco s√£o armazenadas em um arquivo separado.  Sabe-se que, por exemplo, o ext4 n√£o funciona muito bem com um grande n√∫mero de arquivos pequenos e pode levar a uma situa√ß√£o em que voc√™ simplesmente n√£o possui inodes livres com espa√ßo em disco suficiente. <br><br><ul><li>  <b>Como sei que um n√≥ est√° sincronizado?</b> </li></ul><br>  O log concluir√° a mensagem de sincroniza√ß√£o ou o uso do <b>validator-engine-console -c "getstats"</b> unixtime e o masterchainblocktime devem ser quase os mesmos. <br><br><ul><li>  <b>Quantos validadores podem estar online?</b> </li></ul><br>  Getconfig 16 <br>  max_validators: 1000 max_main_validators: 100 min_validators: 5 <br><br><ul><li>  <b>Como descobrir os validadores ativos atuais?</b> </li></ul><br>  Getconfig 34 <br><br>  Conjunto de validadores getconfig 32 anterior <br><br><ul><li>  <b>Hora em que validadores s√£o selecionados?</b> </li></ul><br>  O whitepaper indica que os validadores s√£o selecionados por um m√™s, mas no testnet esse tempo √© muito menor e voc√™ pode descobrir isso na <b>configura√ß√£o</b> do <b>getconfig 15.</b> <br><br>  Ap√≥s reiniciar o testnet, os intervalos de tempo para os validadores foram alterados: <br><br>  ConfigParam (15) = (validators_elected_for: 65536 elei√ß√µes_start_before: 32768 elei√ß√µes_end_before: 8192 stake_held_for: 32768) <br><br>  A partir do qual se conclui que um grupo de validadores √© selecionado por 65536 segundos. <br><br><ul><li> <b>      ?</b> </li></ul><br>       <a href="https://test.ton.org/Validator-HOWTO.txt">Validator-HOWTO</a> .     -,          <b>getconfig 1</b> .     . <br><br><img src="https://habrastorage.org/webt/-b/ka/ux/-bkauxbdrcknqeqglguol2ecfwa.png"><br><br>    result: [ 0 ],     ,      timestamp,      .      ,       : <br><br> &gt; runmethod -1:A4C2C7C05B093D470DE2316DBA089FA0DD775FD9B1EBFC9DC9D04B498D3A2DDA participant_list <br><br><ul><li> <b>   TON?</b> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apesar do design complexo da pilha de rede baseada em redes de sobreposi√ß√£o, o UDP e o TCP ainda s√£o usados ‚Äã‚Äãcomo protocolos de transporte TON. Sabe-se que hoje os bloqueios de telegrama n√£o s√£o bem-sucedidos, porque √â poss√≠vel alterar endere√ßos IP, usar proxies e atualizar configura√ß√µes por push. No entanto, a TON n√£o ter√° essas oportunidades: n√£o √© poss√≠vel mover os n√≥s rapidamente, enquanto os validadores n√£o desejam arriscar suas a√ß√µes. Portanto, provavelmente, em um futuro pr√≥ximo, os desenvolvedores do Telegram introduzir√£o novas solu√ß√µes para ignorar bloqueios, por exemplo, usando o ADNL Proxy. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abaixo est√° o tr√°fego de um n√≥ completo ap√≥s o processamento de 10 milh√µes de pacotes. Uma lista de 159 endere√ßos IP executando n√≥s de rede de teste completos √© a seguinte:</font></font><br><br> 126 DIGITAL OCEAN (    TON) <br> 13 AMAZON <br> 4 GOOGLE <br> 3 HETZNER <br> 3 ALIBABA CLOUD <br> 2 OVH <br> 2 SELECTEL <br> 2 ONLINE.NET <br> 1 LINODE <br> 1 hosteurope.de <br> 1 contabo.de <br> and 1 person possibly hosting it at home in Italy telecomitalia.it <br><br>          IP-  . ,     TON,     -. <br><br>  , Telegram Open Network           WEB 3.0    ,           Telegram. <br><br>     TON   ,     ¬´ ¬ª,     .        , : <br><br><ul><li>      ,       ; </li><li>        - (Fift  FunC),           ; </li><li>   ,       ; </li><li>  telegram-,     TON; </li></ul><br><h3>     TON </h3><br>    (Infinite Sharding Paradigm)  ,        , ..     ,    , ,  ,      ,  ,         . TON   ,     ¬´   ¬ª       . ,       ,          TON    . <br><br>   ,      ,    TON   ,     ,  ¬´  ¬ª    ,   ,  ,     . <br><br><h3>    </h3><br> ,        ,  TON        ( Gram).     ,      ,     ,          TON         PoS,  ,                  -. <br><br>   PoS         .  ,   -        ,    PoS       ,        .       PoS,    ,       .  ,       PoS       ,    . <br><br><h3> Grams Wallet ‚Äî     Gram </h3><br>         -     <a href="https://telegram.org/tos/wallet">TON Grams Wallet</a> ,       Telegram,    -  ,    Telegram FZ-LLC              (  ). <br><br> ,     ,  ,          ,   ,      18        ,    ,    ,            ,  Telegram FZ-LLC       . <br><br>  ,        ,          (.  Linux).  ,          (. 4, . 4.3),      ,      Telegram Open Network: <br><blockquote> ¬´   TON Blockchain           ¬ª. </blockquote><br><h2> Our open source </h2><br> <b>Go-binding library</b> <br><br>   ,       TON    TONLIB. <br><br>     Mercuryo    Go,        ,  -,   . <br> <a href="https://github.com/mercuryoio/tonlib-go">https://github.com/mercuryoio/tonlib-go</a> <br><br>  <b>tonlib api</b>      ,           ,    : <br><br><ul><li>   (//// ); </li><li>  /gram/boc-  ; </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obtendo o status da carteira e informa√ß√µes sobre ela; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obtendo uma lista de transa√ß√µes por carteira; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tongo √© um utilit√°rio de carteira leve; </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Atualmente, as prioridades no desenvolvimento da biblioteca s√£o: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitoramento de rede. </font><font style="vertical-align: inherit;">A capacidade de receber informa√ß√µes sobre cada transa√ß√£o de todos os blocos de rede. </font><font style="vertical-align: inherit;">Estamos realmente ansiosos para apoiar o pr√≥prio tonlib;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intera√ß√µes com contratos. </font><font style="vertical-align: inherit;">O trabalho j√° est√° em andamento;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estendendo a funcionalidade do assistente do console tongo. </font><font style="vertical-align: inherit;">Estamos tentando adicionar algo novo a cada vers√£o;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gera√ß√£o de estruturas de interface conforme especifica√ß√£o tl. </font><font style="vertical-align: inherit;">Isso nos permitir√° ser mais m√≥veis e lan√ßar atualiza√ß√µes com atrasos m√≠nimos;</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Continuaremos uma s√©rie de posts sobre o teste da Rede Aberta do Telegrama, da Carteira Grams e compartilharemos nossas observa√ß√µes. </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de fontes</font></font></b> <div class="spoiler_text"> <a href="https://test.ton.org/ton.pdf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">White paper. </font></font></a> <a href="https://test.ton.org/ton.pdf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test.ton.org/ton.pdf </font></font></a> <br> <a href="https://github.com/ton-blockchain/ton"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><a href="https://github.com/ton-blockchain/ton"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/ton-blockchain/ton </font></font></a> <br> <a href="https://test.ton.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docas de teste </font></font></a> <font style="vertical-align: inherit;"><a href="https://docs.ton.dev/"><font style="vertical-align: inherit;">Documenta√ß√£o do </font></a></font><br> <a href="https://docs.ton.dev/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desenvolvedor </font></font></a> <a href="https://docs.ton.dev/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.ton.dev </font></font></a> <br> <a href="https://en.bitcoinwiki.org/wiki/TON%3Ffbclid%3DIwAR1xGVsR1g7TSNTxfH09wbPXr0QhpPDAGd84dM6OA_sFUry3rVk5xdy32KA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TON - </font></font></a> <font style="vertical-align: inherit;"><a href="https://telegram.org/tos/wallet"><font style="vertical-align: inherit;">Carteira de Gramas de </font></a><a href="https://en.bitcoinwiki.org/wiki/TON%3Ffbclid%3DIwAR1xGVsR1g7TSNTxfH09wbPXr0QhpPDAGd84dM6OA_sFUry3rVk5xdy32KA"><font style="vertical-align: inherit;">Rede Aberta para Telegrama</font></a></font><br> <a href="https://telegram.org/tos/wallet"><font style="vertical-align: inherit;"></font></a> </div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt479354/">https://habr.com/ru/post/pt479354/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt479344/index.html">Apresentando o m√≥dulo Terraform program√°vel da AWS Landing Zone</a></li>
<li><a href="../pt479346/index.html">Texto com significado: v√≠deo da primeira mitap para editores de UX</a></li>
<li><a href="../pt479348/index.html">Roscosmos seria um an√°logo √∫til do programa Spinoff</a></li>
<li><a href="../pt479350/index.html">Dicas de ferramenta no FAQ.Net registra programa ou navega√ß√£o em documentos RTF sem alterar os pr√≥prios documentos</a></li>
<li><a href="../pt479352/index.html">Digite IT: minha pesquisa sobre a migra√ß√£o para TI de outros setores</a></li>
<li><a href="../pt479356/index.html">Antecedentes: o principal dos novos "plugs" AirPods Pro</a></li>
<li><a href="../pt479358/index.html">Refer√™ncia r√°pida das categorias de valor C ++: Parte 2</a></li>
<li><a href="../pt479360/index.html">Crie um projeto de c√≥digo aberto para o Angels com apenas alguns cliques</a></li>
<li><a href="../pt479364/index.html">Classifica√ß√£o das melhores CPUs para PCs para jogos em 2019</a></li>
<li><a href="../pt479366/index.html">Resultados da pesquisa m√≥vel de sexta-feira</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>