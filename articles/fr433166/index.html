<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèº üéß ü§û Pr√©dire le temps de solution de ticket √† l'aide du Machine Learning ‚ùóÔ∏è üèüÔ∏è üçû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Faire un ticket dans le syst√®me de gestion de projet et de suivi des t√¢ches, chacun de nous est heureux de voir les termes approximatifs de la d√©cisio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pr√©dire le temps de solution de ticket √† l'aide du Machine Learning</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dins/blog/433166/"><p>  Faire un ticket dans le syst√®me de gestion de projet et de suivi des t√¢ches, chacun de nous est heureux de voir les termes approximatifs de la d√©cision sur notre appel. <br>  Lors de la r√©ception d'un flux de billets entrants, une personne / une √©quipe doit les aligner en priorit√© et en temps, ce qui prendra pour r√©soudre chaque appel. <br>  Tout cela vous permet de planifier plus efficacement votre temps pour les deux parties. </p><br><p>  Sous la coupe, je vais parler de la fa√ßon dont j'ai analys√© et form√© des mod√®les ML qui pr√©disent le temps n√©cessaire pour r√©soudre les tickets √©mis √† notre √©quipe. </p><a name="habracut"></a><br><p>  Je travaille moi-m√™me pour le poste SRE dans une √©quipe appel√©e LAB.  Nous recevons des appels des d√©veloppeurs et de QA concernant le d√©ploiement de nouveaux environnements de test, leurs mises √† jour vers les derni√®res versions, les solutions aux divers probl√®mes qui se posent, et bien plus encore.  Ces t√¢ches sont assez h√©t√©rog√®nes et, logiquement, prennent un temps diff√©rent √† accomplir.  Il y a notre √©quipe depuis plusieurs ann√©es et pendant ce temps une bonne base de demandes a r√©ussi √† s'accumuler.  J'ai d√©cid√© d'analyser cette base et √† partir de l√†, √† l'aide du machine learning, d'√©laborer un mod√®le qui traitera de la pr√©diction de l'heure probable de cl√¥ture d'un appel (ticket). </p><br><p>  Dans notre travail, nous utilisons JIRA, cependant, le mod√®le que je pr√©sente dans cet article n'a aucun rapport avec un produit sp√©cifique - les informations n√©cessaires ne sont pas un probl√®me √† obtenir √† partir d'une base de donn√©es. </p><br><p>  Passons donc des mots aux actes. </p><br><h2 id="predvaritelnyy-analiz-dannyh">  Analyse pr√©liminaire des donn√©es </h2><br><p>  Nous chargeons tout ce dont nous avons besoin et affichons les versions des packages utilis√©s. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> warnings warnings.simplefilter(<span class="hljs-string"><span class="hljs-string">'ignore'</span></span>) %matplotlib inline <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> nltk.corpus <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> stopwords <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.model_selection <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> train_test_split <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.metrics <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mean_absolute_error, mean_squared_error <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.neighbors <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> KNeighborsRegressor <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.linear_model <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> LinearRegression <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time, date <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> package <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [pd, np, matplotlib, sklearn, nltk]: print(package.__name__, <span class="hljs-string"><span class="hljs-string">'version:'</span></span>, package.__version__)</code> </pre> </div></div><br><pre> <code class="plaintext hljs">pandas version: 0.23.4 numpy version: 1.15.0 matplotlib version: 2.2.2 sklearn version: 0.19.2 nltk version: 3.3</code> </pre> <br><p>  T√©l√©chargez les donn√©es du fichier csv.  Il contient des informations sur les tickets ferm√©s au cours des 1,5 derni√®res ann√©es.  Avant d'√©crire les donn√©es dans un fichier, elles √©taient l√©g√®rement pr√©trait√©es.  Par exemple, les virgules et les points ont √©t√© supprim√©s des champs de texte avec descriptions.  Cependant, il ne s'agit que d'un traitement pr√©liminaire et √† l'avenir, le texte sera encore clarifi√©. </p><br><p>  Voyons ce qu'il y a dans notre ensemble de donn√©es.  Au total, 10783 billets y sont entr√©s. </p><br><div class="spoiler">  <b class="spoiler_title">Explication du champ</b> <div class="spoiler_text"><table><tbody><tr><td width="88">  Cr√©√© </td><td>  Date et heure de cr√©ation du ticket </td></tr><tr><td>  R√©solu </td><td>  Date et heure de fermeture des billets </td></tr><tr><td>  Resolution_time </td><td>  Le nombre de minutes √©coul√©es entre la cr√©ation et la fermeture d'un ticket.  Il est consid√©r√© comme l'heure du calendrier, car  l'entreprise a des bureaux dans diff√©rents pays, travaillant dans diff√©rents fuseaux horaires et il n'y a pas d'heure fixe pour l'ensemble du d√©partement. </td></tr><tr><td>  Engineer_N </td><td>  Noms ¬´cod√©s¬ª des ing√©nieurs (afin de ne pas divulguer par inadvertance d'informations personnelles ou confidentielles √† l'avenir, il y aura pas mal de donn√©es ¬´cod√©es¬ª dans l'article, qui sont essentiellement simplement renomm√©es).  Ces champs contiennent le nombre de tickets en mode ¬´en cours¬ª au moment de la r√©ception de chacun des tickets dans le jeu de dates pr√©sent√©.  Je vais m'attarder sur ces domaines s√©par√©ment vers la fin de l'article, car  ils m√©ritent une attention particuli√®re. </td></tr><tr><td>  Cessionnaire </td><td>  L'employ√© qui a particip√© √† la r√©solution du probl√®me. </td></tr><tr><td>  Issue_type </td><td>  Type de billet. </td></tr><tr><td>  L'environnement </td><td>  Le nom de l'environnement de travail de test pour lequel le ticket a √©t√© cr√©√© (cela peut signifier soit un environnement sp√©cifique, soit l'emplacement dans son ensemble, par exemple, un centre de donn√©es). </td></tr><tr><td>  Priorit√© </td><td>  Priorit√© du ticket. </td></tr><tr><td>  Type de travail </td><td>  Le type de travail attendu pour ce ticket (ajout ou suppression de serveurs, mise √† jour de l'environnement, travail de surveillance, etc.) </td></tr><tr><td>  La description </td><td>  La description </td></tr><tr><td>  R√©sum√© </td><td>  Titre du billet. </td></tr><tr><td>  Observateurs </td><td>  Le nombre de personnes qui "regardent" le ticket, c'est-√†-dire  ils re√ßoivent des notifications par e-mail pour chaque activit√© du ticket. </td></tr><tr><td>  Votes </td><td>  Le nombre de personnes qui ont "vot√©" pour le billet, montrant ainsi son importance et leur int√©r√™t pour celui-ci. </td></tr><tr><td>  Journaliste </td><td>  La personne qui a √©mis le billet. </td></tr><tr><td>  Engineer_N_vacation </td><td>  Si l'ing√©nieur √©tait en vacances au moment de l'√©mission du billet. </td></tr></tbody></table><br><pre> <code class="python hljs">df.info()</code> </pre> <br><pre> <code class="plaintext hljs">&lt;class 'pandas.core.frame.DataFrame'&gt; Index: 10783 entries, ENV-36273 to ENV-49164 Data columns (total 37 columns): Created 10783 non-null object Resolved 10783 non-null object Resolution_time 10783 non-null int64 engineer_1 10783 non-null int64 engineer_2 10783 non-null int64 engineer_3 10783 non-null int64 engineer_4 10783 non-null int64 engineer_5 10783 non-null int64 engineer_6 10783 non-null int64 engineer_7 10783 non-null int64 engineer_8 10783 non-null int64 engineer_9 10783 non-null int64 engineer_10 10783 non-null int64 engineer_11 10783 non-null int64 engineer_12 10783 non-null int64 Assignee 10783 non-null object Issue_type 10783 non-null object Environment 10771 non-null object Priority 10783 non-null object Worktype 7273 non-null object Description 10263 non-null object Summary 10783 non-null object Watchers 10783 non-null int64 Votes 10783 non-null int64 Reporter 10783 non-null object engineer_1_vacation 10783 non-null int64 engineer_2_vacation 10783 non-null int64 engineer_3_vacation 10783 non-null int64 engineer_4_vacation 10783 non-null int64 engineer_5_vacation 10783 non-null int64 engineer_6_vacation 10783 non-null int64 engineer_7_vacation 10783 non-null int64 engineer_8_vacation 10783 non-null int64 engineer_9_vacation 10783 non-null int64 engineer_10_vacation 10783 non-null int64 engineer_11_vacation 10783 non-null int64 engineer_12_vacation 10783 non-null int64 dtypes: float64(12), int64(15), object(10) memory usage: 3.1+ MB</code> </pre> </div></div><br><p>  Au total, nous avons 10 champs ¬´objet¬ª (c'est-√†-dire contenant une valeur texte) et 27 champs num√©riques. <br>  Tout d'abord, recherchez imm√©diatement les √©missions dans nos donn√©es.  Comme vous pouvez le voir, il existe de tels tickets dans lesquels le temps de d√©cision est estim√© en millions de minutes.  Il ne s'agit manifestement pas d'informations pertinentes, ces donn√©es n'interf√©reront qu'avec la construction du mod√®le.  Ils sont arriv√©s ici, car la collecte de donn√©es √† partir de JIRA a √©t√© effectu√©e par une requ√™te dans le champ R√©solu, et non cr√©√©e.  En cons√©quence, ces billets qui ont √©t√© ferm√©s au cours des 1,5 derni√®res ann√©es sont arriv√©s ici, mais ils auraient pu √™tre ouverts beaucoup plus t√¥t.  Il est temps de s'en d√©barrasser.  Nous supprimerons les billets cr√©√©s avant le 1er juin 2017.  Il nous reste 9493 billets. </p><br><p>  En ce qui concerne les raisons - je pense que dans chaque projet, vous pouvez facilement trouver des demandes qui tra√Ænent depuis un certain temps en raison de diverses circonstances et qui sont le plus souvent ferm√©es non pas en r√©solvant le probl√®me lui-m√™me, mais en "expirant le d√©lai de prescription". </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df[[<span class="hljs-string"><span class="hljs-string">'Created'</span></span>, <span class="hljs-string"><span class="hljs-string">'Resolved'</span></span>, <span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>]].sort_values(<span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>, ascending=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).head()</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/gm/ay/ju/gmayjuxuxwxsuljj5xhg8dqrd00.png"><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df = df[df[<span class="hljs-string"><span class="hljs-string">'Created'</span></span>] &gt;= <span class="hljs-string"><span class="hljs-string">'2017-06-01 00:00:00'</span></span>] print(df.shape)</code> </pre> </div></div><br><pre> <code class="plaintext hljs">(9493, 33)</code> </pre> <br><p>  Commen√ßons donc par examiner ce que nous pouvons trouver int√©ressant dans nos donn√©es.  Pour commencer, d√©couvrons les environnements les plus simples - les plus populaires parmi nos tickets, les "reporters" les plus actifs, etc. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df.describe(include=[<span class="hljs-string"><span class="hljs-string">'object'</span></span>])</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/hj/ta/oe/hjtaoeo7rsqv2dcxzvzyiyqkqi4.png"><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df[<span class="hljs-string"><span class="hljs-string">'Environment'</span></span>].value_counts().head(<span class="hljs-number"><span class="hljs-number">10</span></span>)</code> </pre> </div></div><br><pre> <code class="plaintext hljs">Environment_104 442 ALL 368 Location02 367 Environment_99 342 Location03 342 Environment_31 322 Environment_14 254 Environment_1 232 Environment_87 227 Location01 202 Name: Environment, dtype: int64</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df[<span class="hljs-string"><span class="hljs-string">'Reporter'</span></span>].value_counts().head()</code> </pre> </div></div><br><pre> <code class="plaintext hljs">Reporter_16 388 Reporter_97 199 Reporter_04 147 Reporter_110 145 Reporter_133 138 Name: Reporter, dtype: int64</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df[<span class="hljs-string"><span class="hljs-string">'Worktype'</span></span>].value_counts()</code> </pre> </div></div><br><pre> <code class="plaintext hljs">Support 2482 Infrastructure 1655 Update environment 1138 Monitoring 388 QA 300 Numbers 110 Create environment 95 Tools 62 Delete environment 24 Name: Worktype, dtype: int64</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df[<span class="hljs-string"><span class="hljs-string">'Priority'</span></span>].value_counts().plot(kind=<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>), rot=<span class="hljs-number"><span class="hljs-number">0</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">14</span></span>, title=<span class="hljs-string"><span class="hljs-string">'   '</span></span>);</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/bh/qh/lf/bhqhlfwmdxys3_y1k6qpdom5o4w.png"><br><p>  Eh bien, quelque chose que nous avons d√©j√† appris.  Le plus souvent, la priorit√© des tickets est normale, environ 2 fois moins souvent √©lev√©e et encore moins critique.  Tr√®s rarement, il y a une faible priorit√©, apparemment les gens ont peur de l'exposer, croyant que dans ce cas, il restera assez longtemps dans la file d'attente et le temps pour sa d√©cision peut √™tre retard√©.  Plus tard, lorsque nous allons d√©j√† construire le mod√®le et analyser ses r√©sultats, nous verrons que de telles craintes peuvent ne pas √™tre infond√©es, car une faible priorit√© affecte vraiment le d√©lai de la t√¢che et, bien s√ªr, pas dans le sens de l'acc√©l√©ration. </p><br><p>  √Ä partir des colonnes des environnements les plus populaires et des journalistes les plus actifs, nous voyons que Reporter_16 passe par une large marge et Environment_104 vient en premier dans les environnements.  M√™me si vous n'avez pas encore devin√©, je vais vous dire un petit secret - ce journaliste est de l'√©quipe travaillant sur cet environnement particulier. <br>  Voyons de quel type d'environnement proviennent les tickets les plus critiques. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df[df[<span class="hljs-string"><span class="hljs-string">'Priority'</span></span>] == <span class="hljs-string"><span class="hljs-string">'Critical'</span></span>][<span class="hljs-string"><span class="hljs-string">'Environment'</span></span>].value_counts().index[<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre> </div></div><br><pre> <code class="plaintext hljs">'Environment_91'</code> </pre> <br><p>  Nous allons maintenant imprimer des informations sur le nombre de tickets de priorit√©s diff√©rentes provenant du m√™me environnement ¬´critique¬ª. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df[df[<span class="hljs-string"><span class="hljs-string">'Environment'</span></span>] == df[df[<span class="hljs-string"><span class="hljs-string">'Priority'</span></span>] == <span class="hljs-string"><span class="hljs-string">'Critical'</span></span>][<span class="hljs-string"><span class="hljs-string">'Environment'</span></span>].value_counts().index[<span class="hljs-number"><span class="hljs-number">0</span></span>]][<span class="hljs-string"><span class="hljs-string">'Priority'</span></span>].value_counts()</code> </pre> </div></div><br><pre> <code class="plaintext hljs">High 62 Critical 57 Normal 46 Name: Priority, dtype: int64</code> </pre> <br><p>  Regardons le temps d'ex√©cution du ticket dans le contexte des priorit√©s.  Par exemple, il est amusant de remarquer que la dur√©e moyenne d‚Äôex√©cution d‚Äôun ticket de faible priorit√© est sup√©rieure √† 70 000 minutes (pr√®s de 1,5 mois).  La d√©pendance du temps d'ex√©cution du ticket √† sa priorit√© est √©galement facilement identifiable. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df.groupby([<span class="hljs-string"><span class="hljs-string">'Priority'</span></span>])[<span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>].describe()</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/tc/gs/gc/tcgsgc07_eog0hnm0mcj5i3m790.png"><br><p>  Ou ici sous forme de graphique, la valeur m√©diane.  Comme vous pouvez le voir, l'image n'a pas beaucoup chang√©, par cons√©quent, les √©missions n'affectent pas grandement la distribution. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">df.groupby([<span class="hljs-string"><span class="hljs-string">'Priority'</span></span>])[<span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>].median().sort_values().plot(kind=<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>), rot=<span class="hljs-number"><span class="hljs-number">0</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">14</span></span>);</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/ir/zc/go/irzcgo8mkcwkmfeybj2vriormwq.png"><br><p>  Examinons maintenant le temps moyen de solution de ticket pour chacun des ing√©nieurs, en fonction du nombre de tickets que l'ing√©nieur avait √† ce moment-l√†.  En fait, ces graphiques, √† ma grande surprise, ne montrent aucune image.  Pour certains, le temps d'ex√©cution augmente √† mesure que les tickets actuels du travail augmentent, tandis que pour certains, cette relation est l'inverse.  Pour certains, la d√©pendance n'est pas du tout tra√ßable. </p><br><p>  Cependant, pour l'avenir, je dirai que la pr√©sence de cette fonctionnalit√© dans l'ensemble de donn√©es a augment√© la pr√©cision du mod√®le de plus de 2 fois et qu'il y a certainement un effet sur le temps d'ex√©cution.  Nous ne le voyons tout simplement pas.  Et le mod√®le voit. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">engineers = [i.replace(<span class="hljs-string"><span class="hljs-string">'_vacation'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df.columns <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'vacation'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> i] cols = <span class="hljs-number"><span class="hljs-number">2</span></span> rows = int(len(engineers) / cols) fig, axes = plt.subplots(nrows=rows, ncols=cols, figsize=(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">24</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(rows): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(cols): df.groupby(engineers[i * cols + j])[<span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>].mean().plot(kind=<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, rot=<span class="hljs-number"><span class="hljs-number">0</span></span>, ax=axes[i, j]).set_xlabel(<span class="hljs-string"><span class="hljs-string">'Engineer_'</span></span> + str(i * cols + j + <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> cols, rows, fig, axes</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Image longue comme r√©sultat</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xn/vb/zk/xnvbzk-0flci0_llfpn6ghuqpts.png"></div></div><br><p>  Faisons une petite matrice d'interaction par paire des fonctionnalit√©s suivantes: temps de solution du ticket, nombre de votes et nombre d'observateurs.  Avec un bonus diagonal, nous avons la distribution de chaque attribut. </p><br><p>  De l'int√©ressant, on peut voir la d√©pendance de la r√©duction du temps de solution de ticket sur le nombre croissant d'observateurs.  On voit √©galement que les gens ne sont pas tr√®s actifs dans l'utilisation des votes. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">pd.scatter_matrix(df[[<span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>, <span class="hljs-string"><span class="hljs-string">'Watchers'</span></span>, <span class="hljs-string"><span class="hljs-string">'Votes'</span></span>]], figsize=(<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>), diagonal=<span class="hljs-string"><span class="hljs-string">'hist'</span></span>);</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Image du r√©sultat</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/bf/qo/qq/bfqoqq3djaiib4mxn1l5mdsy6ru.png"></div></div><br><p>  Ainsi, nous avons effectu√© une petite analyse pr√©liminaire des donn√©es, vu les d√©pendances existantes entre l'attribut cible, qui est le temps qu'il faut pour r√©soudre le ticket, et des signes tels que le nombre de votes pour le ticket, le nombre "d'observateurs" derri√®re lui et sa priorit√©.  Nous continuons. </p><br><h2 id="postroenie-modeli-vystraivaem-priznaki">  Construire un mod√®le.  Panneaux de construction </h2><br><p>  Il est temps de passer √† la construction du mod√®le lui-m√™me.  Mais d'abord, nous devons mettre nos fonctionnalit√©s sous une forme compr√©hensible pour le mod√®le.  C'est-√†-dire  d√©composer les signes cat√©goriques en vecteurs clairsem√©s et √©liminer l'exc√®s.  Par exemple, nous n'avons pas besoin des champs avec l'heure √† laquelle le ticket a √©t√© cr√©√© et ferm√© dans le mod√®le, ainsi que le champ Destinataire, car  nous utiliserons √©ventuellement ce mod√®le pour pr√©dire le temps d'ex√©cution d'un ticket qui n'a encore √©t√© attribu√© √† personne ("assassin√©"). </p><br><p>  Le signe cible, comme je viens de le mentionner, est le moment de r√©soudre le probl√®me pour nous, nous le prenons donc comme un vecteur distinct et le supprimons √©galement de l'ensemble de donn√©es g√©n√©rales.  De plus, certains des champs √©taient vides car les journalistes ne remplissent pas toujours le champ de description lors de l'√©mission d'un ticket.  Dans ce cas, les pandas d√©finissent leurs valeurs sur NaN, nous les rempla√ßons simplement par une cha√Æne vide. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">y = df[<span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>] df.drop([<span class="hljs-string"><span class="hljs-string">'Created'</span></span>, <span class="hljs-string"><span class="hljs-string">'Resolved'</span></span>, <span class="hljs-string"><span class="hljs-string">'Resolution_time'</span></span>, <span class="hljs-string"><span class="hljs-string">'Assignee'</span></span>], axis=<span class="hljs-number"><span class="hljs-number">1</span></span>, inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) df[<span class="hljs-string"><span class="hljs-string">'Description'</span></span>].fillna(<span class="hljs-string"><span class="hljs-string">''</span></span>, inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) df[<span class="hljs-string"><span class="hljs-string">'Summary'</span></span>].fillna(<span class="hljs-string"><span class="hljs-string">''</span></span>, inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> </div></div><br><p>  Nous d√©composons les signes cat√©goriels en vecteurs clairsem√©s ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">codage √† chaud</a> ).  Jusqu'√† ce que nous touchions les champs avec la description et la table des mati√®res du ticket.  Nous les utiliserons un peu diff√©remment.  Certains noms de reporter contiennent un [X].  JIRA marque donc les employ√©s inactifs qui ne travaillent plus dans l'entreprise.  J'ai d√©cid√© de les laisser parmi les panneaux, bien qu'il soit possible d'effacer les donn√©es d'eux, car √† l'avenir, lors de l'utilisation du mod√®le, nous ne verrons pas de tickets de ces employ√©s. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_df</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dic, feature_list)</span></span></span><span class="hljs-function">:</span></span> out = pd.DataFrame(dic) out = pd.concat([out, pd.get_dummies(out[feature_list])], axis = <span class="hljs-number"><span class="hljs-number">1</span></span>) out.drop(feature_list, axis = <span class="hljs-number"><span class="hljs-number">1</span></span>, inplace = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> out X = create_df(df, df.columns[df.dtypes == <span class="hljs-string"><span class="hljs-string">'object'</span></span>].drop([<span class="hljs-string"><span class="hljs-string">'Description'</span></span>, <span class="hljs-string"><span class="hljs-string">'Summary'</span></span>])) X.columns = X.columns.str.replace(<span class="hljs-string"><span class="hljs-string">' \[X\]'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>)</code> </pre> </div></div><br><p>  Et maintenant, nous allons traiter le champ de description dans le ticket.  Nous travaillerons avec lui de l'une des mani√®res peut-√™tre les plus simples - nous rassemblerons tous les mots utilis√©s dans nos billets, compterons les plus populaires parmi eux, √©liminerons les mots "suppl√©mentaires" - ceux qui ne peuvent √©videmment pas affecter le r√©sultat, comme, par exemple, le mot "please" (s'il vous pla√Æt - toutes les communications dans JIRA se font strictement en anglais), qui est la plus populaire.  Oui, ce sont nos gens polis. </p><br><p>  Nous supprimons √©galement les ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mots</a> vides¬ª, selon la biblioth√®que nltk, et effa√ßons plus compl√®tement le texte des caract√®res inutiles.  Permettez-moi de vous rappeler que c'est la chose la plus simple qui puisse √™tre faite avec le texte.  Nous ne ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tamponnons</a> ¬ª pas les mots, vous pouvez √©galement compter les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">N-grammes de</a> mots les plus populaires, mais nous nous limiterons √† cela. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">all_words = np.concatenate(df[<span class="hljs-string"><span class="hljs-string">'Description'</span></span>].apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> s: s.split()).values) stop_words = stopwords.words(<span class="hljs-string"><span class="hljs-string">'english'</span></span>) stop_words.extend([<span class="hljs-string"><span class="hljs-string">'please'</span></span>, <span class="hljs-string"><span class="hljs-string">'hi'</span></span>, <span class="hljs-string"><span class="hljs-string">'-'</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-string"><span class="hljs-string">'3'</span></span>, <span class="hljs-string"><span class="hljs-string">'4'</span></span>, <span class="hljs-string"><span class="hljs-string">'5'</span></span>, <span class="hljs-string"><span class="hljs-string">'6'</span></span>, <span class="hljs-string"><span class="hljs-string">'7'</span></span>, <span class="hljs-string"><span class="hljs-string">'8'</span></span>, <span class="hljs-string"><span class="hljs-string">'9'</span></span>, <span class="hljs-string"><span class="hljs-string">'('</span></span>, <span class="hljs-string"><span class="hljs-string">')'</span></span>, <span class="hljs-string"><span class="hljs-string">'='</span></span>, <span class="hljs-string"><span class="hljs-string">'{'</span></span>, <span class="hljs-string"><span class="hljs-string">'}'</span></span>]) stop_words.extend([<span class="hljs-string"><span class="hljs-string">'h3'</span></span>, <span class="hljs-string"><span class="hljs-string">'+'</span></span>, <span class="hljs-string"><span class="hljs-string">'-'</span></span>, <span class="hljs-string"><span class="hljs-string">'@'</span></span>, <span class="hljs-string"><span class="hljs-string">'!'</span></span>, <span class="hljs-string"><span class="hljs-string">'#'</span></span>, <span class="hljs-string"><span class="hljs-string">'$'</span></span>, <span class="hljs-string"><span class="hljs-string">'%'</span></span>, <span class="hljs-string"><span class="hljs-string">'^'</span></span>, <span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>, <span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-string"><span class="hljs-string">'(for'</span></span>, <span class="hljs-string"><span class="hljs-string">'output)'</span></span>]) stop_symbols = [<span class="hljs-string"><span class="hljs-string">'=&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'|'</span></span>, <span class="hljs-string"><span class="hljs-string">'['</span></span>, <span class="hljs-string"><span class="hljs-string">']'</span></span>, <span class="hljs-string"><span class="hljs-string">'#'</span></span>, <span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-string"><span class="hljs-string">'\\'</span></span>, <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-string"><span class="hljs-string">'-&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>] words_series = pd.Series(list(all_words)) <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> all_words words_series = words_series[~words_series.isin(stop_words)] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> symbol <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> stop_symbols: words_series = words_series[~words_series.str.contains(symbol, regex=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, na=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>)]</code> </pre> </div></div><br><p>  Apr√®s tout cela, nous avons obtenu l'objet pandas.Series contenant tous les mots utilis√©s.  Regardons les plus populaires d'entre eux et prenons les 50 premiers de la liste pour les utiliser comme signes.  Pour chacun des tickets, nous verrons si ce mot est utilis√© dans la description, et si oui, mettez 1 dans la colonne correspondante, sinon 0. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">usefull_words = list(words_series.value_counts().head(<span class="hljs-number"><span class="hljs-number">50</span></span>).index) print(usefull_words[<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>])</code> </pre> </div></div><br><pre> <code class="plaintext hljs">['error', 'account', 'info', 'call', '{code}', 'behavior', 'array', 'update', 'env', 'actual']</code> </pre> <br><p>  Maintenant, dans notre ensemble de donn√©es g√©n√©rales, nous allons cr√©er des colonnes s√©par√©es pour les mots que nous avons s√©lectionn√©s.  Sur ce point, vous pouvez vous d√©barrasser du champ de description lui-m√™me. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> usefull_words: X[<span class="hljs-string"><span class="hljs-string">'Description_'</span></span> + word] = X[<span class="hljs-string"><span class="hljs-string">'Description'</span></span>].str.contains(word).astype(<span class="hljs-string"><span class="hljs-string">'int64'</span></span>) X.drop(<span class="hljs-string"><span class="hljs-string">'Description'</span></span>, axis=<span class="hljs-number"><span class="hljs-number">1</span></span>, inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> </div></div><br><p>  Nous ferons de m√™me pour le champ du titre du ticket. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">all_words = np.concatenate(df[<span class="hljs-string"><span class="hljs-string">'Summary'</span></span>].apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> s: s.split()).values) words_series = pd.Series(list(all_words)) <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> all_words words_series = words_series[~words_series.isin(stop_words)] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> symbol <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> stop_symbols: words_series = words_series[~words_series.str.contains(symbol, regex=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, na=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>)] usefull_words = list(words_series.value_counts().head(<span class="hljs-number"><span class="hljs-number">50</span></span>).index) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> usefull_words: X[<span class="hljs-string"><span class="hljs-string">'Summary_'</span></span> + word] = X[<span class="hljs-string"><span class="hljs-string">'Summary'</span></span>].str.contains(word).astype(<span class="hljs-string"><span class="hljs-string">'int64'</span></span>) X.drop(<span class="hljs-string"><span class="hljs-string">'Summary'</span></span>, axis=<span class="hljs-number"><span class="hljs-number">1</span></span>, inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> </div></div><br><p>  Voyons ce que nous avons fini dans la matrice d'entit√©s X et le vecteur de r√©ponse y. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">print(X.shape, y.shape)</code> </pre> </div></div><br><pre> <code class="plaintext hljs">((9493, 1114), (9493,))</code> </pre> <br><p>  Nous allons maintenant diviser ces donn√©es en un √©chantillon de formation (formation) et un √©chantillon de test dans un rapport de pourcentage de 75/25.  Au total, nous avons 7119 exemples sur lesquels nous allons nous entra√Æner, et 2374 sur lesquels nous √©valuerons nos mod√®les.  Et la dimension de notre matrice d'attributs est pass√©e √† 1114 en raison de la mise en place de signes cat√©goriques. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">X_train, X_holdout, y_train, y_holdout = train_test_split(X, y, test_size=<span class="hljs-number"><span class="hljs-number">0.25</span></span>, random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>) print(X_train.shape, X_holdout.shape)</code> </pre> </div></div><br><pre> <code class="plaintext hljs">((7119, 1114), (2374, 1114))</code> </pre> <br><h2 id="treniruem-model">  Nous formons le mod√®le. </h2><br><h3 id="lineynaya-regressiya">  R√©gression lin√©aire </h3><br><p>  Commen√ßons par le mod√®le le plus l√©ger et (attendu) le moins pr√©cis - la r√©gression lin√©aire.  Nous √©valuerons √† la fois la pr√©cision des donn√©es d'entra√Ænement et l'√©chantillon retard√© (holdout) - donn√©es que le mod√®le n'a pas vues. </p><br><p>  Dans le cas d'une r√©gression lin√©aire, le mod√®le plus ou moins acceptable se montre sur les donn√©es d'apprentissage, mais la pr√©cision sur l'√©chantillon retard√© est monstrueusement faible.  Bien pire que de pr√©voir la moyenne habituelle pour tous les billets. </p><br><p>  Ici, vous devez prendre une courte pause et dire comment le mod√®le √©value la qualit√© en utilisant sa m√©thode de score. <br>  L'√©valuation se fait par le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">coefficient de d√©termination</a> : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msup><mi>R</mi><mn>2</mn></msup><mo>=</mo><mn>1</mn><mo>&amp;#x2212;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi></mrow></msubsup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>v</mi><mi>e</mi><mi>r</mi><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi></mrow></msubsup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="61.298ex" height="3.262ex" viewBox="0 -987.6 26392.1 1404.6" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-32" x="1074" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-3D" x="1491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-31" x="2547" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-2212" x="3270" y="0"></use><g transform="translate(4270,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-75" x="719" y="0"></use><g transform="translate(1292,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6D" x="1242" y="499"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-28" x="3419" y="0"></use><g transform="translate(3808,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-2212" x="4865" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-68" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-61" x="6692" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-74" x="7222" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-79" x="7583" y="0"></use><g transform="translate(8081,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-32" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6F" x="9174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-76" x="9660" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-65" x="10145" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-72" x="10612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-73" x="11313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-75" x="11783" y="0"></use><g transform="translate(12355,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6D" x="1242" y="499"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-28" x="14483" y="0"></use><g transform="translate(14872,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-2212" x="15929" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6F" x="17180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-76" x="17665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-65" x="18151" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-72" x="18617" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6C" x="19069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-69" x="19367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6E" x="19713" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-65" x="20313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-79" x="20780" y="0"></use><g transform="translate(21277,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMAIN-32" x="550" y="583"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msup><mi>R</mi><mn>2</mn></msup><mo>=</mo><mn>1</mn><mo>‚àí</mo><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>m</mi></mrow></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mtext>&nbsp;</mtext><mi>o</mi><mi>v</mi><mi>e</mi><mi>r</mi><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>m</mi></mrow></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> R ^ 2 = 1 - {\ sum_ {i = 1} ^ {m} (y_ {i} - \ hat {y}) ^ 2 \ over \ sum_ {i = 1} ^ {m} (y_ {i } - \ overline {y}) ^ 2} </script></p><br><p>  O Where <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>h</mi><mi>a</mi><mi>p</mi><mi>e</mi><mi>a</mi><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.124ex" height="2.419ex" viewBox="0 -780.1 4359 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-63" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-68" x="683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-61" x="1260" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-70" x="1789" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-65" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-61" x="2759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-75" x="3289" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-79" x="3861" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>c</mi><mi>h</mi><mi>a</mi><mi>p</mi><mi>e</mi><mi>a</mi><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ chapeau {y} </script>  Le r√©sultat est-il pr√©dit par le mod√®le a <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.097ex" height="2.419ex" viewBox="0 -780.1 4347.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-76" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-65" x="1221" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-72" x="1687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6C" x="2139" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-69" x="2437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-6E" x="2783" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-65" x="3383" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/dins/blog/433166/&amp;usg=ALkJrhgvChTyt50Jjtr18xmUHVQUFJPlCw#MJMATHI-79" x="3850" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ overline {y} </script>  - la valeur moyenne pour l'ensemble de l'√©chantillon. </p><br><p>  Nous ne nous attarderons pas trop sur le coefficient maintenant.  Nous constatons seulement qu'il ne refl√®te pas pleinement l'exactitude du mod√®le qui nous int√©resse.  Par cons√©quent, en m√™me temps, nous utiliserons l'erreur moyenne absolue (MAE) pour l'√©valuer et nous y fier. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">lr = LinearRegression() lr.fit(X_train, y_train) print(<span class="hljs-string"><span class="hljs-string">'R^2 train:'</span></span>, lr.score(X_train, y_train)) print(<span class="hljs-string"><span class="hljs-string">'R^2 test:'</span></span>, lr.score(X_holdout, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>, mean_absolute_error(lr.predict(X_train), y_train)) print(<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>, mean_absolute_error(lr.predict(X_holdout), y_holdout))</code> </pre> </div></div><br><pre> <code class="plaintext hljs">R^2 train: 0.3884389470220214 R^2 test: -6.652435243123196e+17 MAE train: 8503.67256637168 MAE test: 1710257520060.8154</code> </pre> <br><h3 id="gradientnyy-busting">  Augmentation du gradient </h3><br><p>  Eh bien, o√π sans elle, sans boost de gradient?  Essayons de former le mod√®le et voyons ce qui se passe.  Nous utiliserons pour cela le fameux XGBoost.  Commen√ßons par les param√®tres hyperparam√©triques standard. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> xgboost xgb = xgboost.XGBRegressor() xgb.fit(X_train, y_train) print(<span class="hljs-string"><span class="hljs-string">'R^2 train:'</span></span>, xgb.score(X_train, y_train)) print(<span class="hljs-string"><span class="hljs-string">'R^2 test:'</span></span>, xgb.score(X_holdout, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>, mean_absolute_error(xgb.predict(X_train), y_train)) print(<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>, mean_absolute_error(xgb.predict(X_holdout), y_holdout))</code> </pre> </div></div><br><pre> <code class="plaintext hljs">R^2 train: 0.5138516547636054 R^2 test: 0.12965507684512545 MAE train: 7108.165167471887 MAE test: 8343.433260957032</code> </pre> <br><p>  Le r√©sultat hors de la bo√Æte n'est plus mauvais.  Essayons de mod√©liser le mod√®le en s√©lectionnant des hyperparam√®tres: n_estimators, learning_rate et max_depth.  En cons√©quence, nous nous attardons sur les valeurs de 150, 0,1 et 3, respectivement, comme montrant le meilleur r√©sultat sur l'√©chantillon de test en l'absence de surentra√Ænement du mod√®le sur les donn√©es d'entra√Ænement. </p><br><div class="spoiler">  <b class="spoiler_title">Nous s√©lectionnons n_estimateurs</b> <div class="spoiler_text"><p>  * <em>Au lieu de R ^ 2, le score de l'image doit √™tre MAE.</em> </p><br><pre> <code class="python hljs">xgb_model_abs_testing = list() xgb_model_abs_training = list() rng = np.arange(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">151</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rng: xgb = xgboost.XGBRegressor(n_estimators=i) xgb.fit(X_train, y_train) xgb.score(X_holdout, y_holdout) xgb_model_abs_testing.append(mean_absolute_error(xgb.predict(X_holdout), y_holdout)) xgb_model_abs_training.append(mean_absolute_error(xgb.predict(X_train), y_train)) plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) plt.plot(rng, xgb_model_abs_testing, label=<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>); plt.plot(rng, xgb_model_abs_training, label=<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>); plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Number of estimators'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'$R^2 Score$'</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) plt.show();</code> </pre> <br><img src="https://habrastorage.org/webt/yw/_k/fe/yw_kfe9ov-i5usxjjbvhgnyjnss.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Nous s√©lectionnons learning_rate</b> <div class="spoiler_text"><pre> <code class="python hljs">xgb_model_abs_testing = list() xgb_model_abs_training = list() rng = np.arange(<span class="hljs-number"><span class="hljs-number">0.05</span></span>, <span class="hljs-number"><span class="hljs-number">0.65</span></span>, <span class="hljs-number"><span class="hljs-number">0.05</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rng: xgb = xgboost.XGBRegressor(n_estimators=<span class="hljs-number"><span class="hljs-number">150</span></span>, random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>, learning_rate=i) xgb.fit(X_train, y_train) xgb.score(X_holdout, y_holdout) xgb_model_abs_testing.append(mean_absolute_error(xgb.predict(X_holdout), y_holdout)) xgb_model_abs_training.append(mean_absolute_error(xgb.predict(X_train), y_train)) plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) plt.plot(rng, xgb_model_abs_testing, label=<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>); plt.plot(rng, xgb_model_abs_training, label=<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>); plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Learning rate'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'MAE'</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) plt.show();</code> </pre> <br><img src="https://habrastorage.org/webt/iv/7n/5n/iv7n5n1dfgccqjx2frkjsjdzxxq.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Nous s√©lectionnons max_depth</b> <div class="spoiler_text"><pre> <code class="python hljs">xgb_model_abs_testing = list() xgb_model_abs_training = list() rng = np.arange(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rng: xgb = xgboost.XGBRegressor(n_estimators=<span class="hljs-number"><span class="hljs-number">150</span></span>, random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>, learning_rate=<span class="hljs-number"><span class="hljs-number">0.1</span></span>, max_depth=i) xgb.fit(X_train, y_train) xgb.score(X_holdout, y_holdout) xgb_model_abs_testing.append(mean_absolute_error(xgb.predict(X_holdout), y_holdout)) xgb_model_abs_training.append(mean_absolute_error(xgb.predict(X_train), y_train)) plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) plt.plot(rng, xgb_model_abs_testing, label=<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>); plt.plot(rng, xgb_model_abs_training, label=<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>); plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Maximum depth'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'MAE'</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) plt.show();</code> </pre> <br><img src="https://habrastorage.org/webt/2b/ej/70/2bej70cirp-wehkeolsd-6klzic.png"></div></div><br><p>  Nous allons maintenant former le mod√®le avec des hyperparam√®tres s√©lectionn√©s. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">xgb = xgboost.XGBRegressor(n_estimators=<span class="hljs-number"><span class="hljs-number">150</span></span>, random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>, learning_rate=<span class="hljs-number"><span class="hljs-number">0.1</span></span>, max_depth=<span class="hljs-number"><span class="hljs-number">3</span></span>) xgb.fit(X_train, y_train) print(<span class="hljs-string"><span class="hljs-string">'R^2 train:'</span></span>, xgb.score(X_train, y_train)) print(<span class="hljs-string"><span class="hljs-string">'R^2 test:'</span></span>, xgb.score(X_holdout, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>, mean_absolute_error(xgb.predict(X_train), y_train)) print(<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>, mean_absolute_error(xgb.predict(X_holdout), y_holdout))</code> </pre> </div></div><br><pre> <code class="plaintext hljs">R^2 train: 0.6745967150462303 R^2 test: 0.15415143189670344 MAE train: 6328.384400466232 MAE test: 8217.07897417256</code> </pre> <br><p>  Le r√©sultat final avec les param√®tres s√©lectionn√©s et la visualisation pr√©sente une importance - l'importance des signes selon le mod√®le.  En premier lieu, il y a le nombre d'observateurs de billets, mais ensuite 4 ing√©nieurs partent imm√©diatement.  Par cons√©quent, la dur√©e d'emploi d'un ticket peut √™tre assez fortement affect√©e par l'emploi d'un ing√©nieur.  Et il est logique que le temps libre de certains d'entre eux soit plus important.  Du moins parce que l'√©quipe a √† la fois des ing√©nieurs seniors et des interm√©diaires (nous n'avons pas de juniors dans l'√©quipe).  Au fait, toujours en secret, l'ing√©nieur en premier lieu (barre orange) est vraiment l'un des plus exp√©riment√©s de toute l'√©quipe.  De plus, ces 4 ing√©nieurs ont tous un pr√©fixe senior √† leur poste.  Il s'av√®re que le mod√®le l'a une nouvelle fois confirm√©. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs">features_df = pd.DataFrame(data=xgb.feature_importances_.reshape(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>), columns=X.columns).sort_values(axis=<span class="hljs-number"><span class="hljs-number">1</span></span>, by=[<span class="hljs-number"><span class="hljs-number">0</span></span>], ascending=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) features_df.loc[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>].plot(kind=<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>), rot=<span class="hljs-number"><span class="hljs-number">75</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">14</span></span>);</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/yn/er/7o/yner7ojqi-tz7a5je4g8phkmyki.png"><br><h3 id="neyronnaya-set">  R√©seau de neurones </h3><br><p>  Mais nous ne nous arr√™terons pas √† un seul boost de gradient et essayerons de former le r√©seau neuronal, ou plut√¥t le perceptron multicouche, un r√©seau neuronal √† distribution directe enti√®rement connect√©.  Cette fois, nous ne commencerons pas avec les param√®tres standard des hyperparam√®tres, car  dans la biblioth√®que sklearn, que nous utiliserons, par d√©faut, il n'y a qu'une seule couche cach√©e avec 100 neurones et pendant la formation, le mod√®le donne un avertissement sur le d√©saccord pour les 200 it√©rations standard.  Nous utilisons imm√©diatement 3 couches cach√©es avec 300, 200 et 100 neurones, respectivement. </p><br><p>  Par cons√©quent, nous constatons que le mod√®le n'est pas surentra√Æn√© sur l'√©chantillon d'apprentissage, ce qui ne l'emp√™che toutefois pas de montrer un r√©sultat d√©cent sur l'√©chantillon d'essai.  Ce r√©sultat est un peu inf√©rieur au r√©sultat de l'augmentation du gradient. </p><br><div class="spoiler">  <b class="spoiler_title">Code source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.neural_network <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MLPRegressor nn = MLPRegressor(random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>, hidden_layer_sizes=(<span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span> ,<span class="hljs-number"><span class="hljs-number">100</span></span>), alpha=<span class="hljs-number"><span class="hljs-number">0.03</span></span>, learning_rate=<span class="hljs-string"><span class="hljs-string">'adaptive'</span></span>, learning_rate_init=<span class="hljs-number"><span class="hljs-number">0.0005</span></span>, max_iter=<span class="hljs-number"><span class="hljs-number">200</span></span>, momentum=<span class="hljs-number"><span class="hljs-number">0.9</span></span>, nesterovs_momentum=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) nn.fit(X_train, y_train) print(<span class="hljs-string"><span class="hljs-string">'R^2 train:'</span></span>, nn.score(X_train, y_train)) print(<span class="hljs-string"><span class="hljs-string">'R^2 test:'</span></span>, nn.score(X_holdout, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>, mean_absolute_error(nn.predict(X_train), y_train)) print(<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>, mean_absolute_error(nn.predict(X_holdout), y_holdout))</code> </pre> </div></div><br><pre> <code class="plaintext hljs">R^2 train: 0.9771443840549647 R^2 test: -0.15166596239118246 MAE train: 1627.3212161350423 MAE test: 8816.204561947616</code> </pre> <br><p>  Voyons ce que nous pouvons r√©aliser en essayant de choisir la meilleure architecture de notre r√©seau.             ,     ,          200  ,    ,      .       . </p><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"><pre> <code class="python hljs">plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [(<span class="hljs-number"><span class="hljs-number">500</span></span>,), (<span class="hljs-number"><span class="hljs-number">750</span></span>,), (<span class="hljs-number"><span class="hljs-number">1000</span></span>,), (<span class="hljs-number"><span class="hljs-number">500</span></span>,<span class="hljs-number"><span class="hljs-number">500</span></span>)]: nn = MLPRegressor(random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>, hidden_layer_sizes=i, alpha=<span class="hljs-number"><span class="hljs-number">0.03</span></span>, learning_rate=<span class="hljs-string"><span class="hljs-string">'adaptive'</span></span>, learning_rate_init=<span class="hljs-number"><span class="hljs-number">0.0005</span></span>, max_iter=<span class="hljs-number"><span class="hljs-number">200</span></span>, momentum=<span class="hljs-number"><span class="hljs-number">0.9</span></span>, nesterovs_momentum=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) nn.fit(X_train, y_train) plt.plot(nn.loss_curve_, label=str(i)); plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Iterations'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'MSE'</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) plt.show()</code> </pre> <br><img src="https://habrastorage.org/webt/eg/xx/3k/egxx3kwhm28pfdsbvn_sp2_sewo.png"></div></div><br><p>         .  3    10        . </p><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"><pre> <code class="python hljs">plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [(<span class="hljs-number"><span class="hljs-number">500</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>), (<span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), (<span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), (<span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), (<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>), (<span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>), (<span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-number"><span class="hljs-number">250</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>)]: nn = MLPRegressor(random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>, hidden_layer_sizes=i, alpha=<span class="hljs-number"><span class="hljs-number">0.03</span></span>, learning_rate=<span class="hljs-string"><span class="hljs-string">'adaptive'</span></span>, learning_rate_init=<span class="hljs-number"><span class="hljs-number">0.001</span></span>, max_iter=<span class="hljs-number"><span class="hljs-number">200</span></span>, momentum=<span class="hljs-number"><span class="hljs-number">0.9</span></span>, nesterovs_momentum=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) nn.fit(X_train, y_train) plt.plot(nn.loss_curve_, label=str(i)); plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Iterations'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'MSE'</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) plt.show()</code> </pre> <br><img src="https://habrastorage.org/webt/p9/8z/d7/p98zd7u3ppxuzyykvyt91skxjiq.png"></div></div><br><p>    ""    (200, 100, 100, 100, 80, 80, 80, 40, 20)    : <br> 2506    <br> 7351    </p><br><p>   ,    ,        .      learning rate    . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="python hljs">nn = MLPRegressor(random_state=<span class="hljs-number"><span class="hljs-number">17</span></span>, hidden_layer_sizes=(<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>), alpha=<span class="hljs-number"><span class="hljs-number">0.1</span></span>, learning_rate=<span class="hljs-string"><span class="hljs-string">'adaptive'</span></span>, learning_rate_init=<span class="hljs-number"><span class="hljs-number">0.007</span></span>, max_iter=<span class="hljs-number"><span class="hljs-number">200</span></span>, momentum=<span class="hljs-number"><span class="hljs-number">0.9</span></span>, nesterovs_momentum=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) nn.fit(X_train, y_train) print(<span class="hljs-string"><span class="hljs-string">'R^2 train:'</span></span>, nn.score(X_train, y_train)) print(<span class="hljs-string"><span class="hljs-string">'R^2 test:'</span></span>, nn.score(X_holdout, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'MAE train'</span></span>, mean_absolute_error(nn.predict(X_train), y_train)) print(<span class="hljs-string"><span class="hljs-string">'MAE test'</span></span>, mean_absolute_error(nn.predict(X_holdout), y_holdout))</code> </pre> </div></div><br><pre> <code class="plaintext hljs">R^2 train: 0.836204705204337 R^2 test: 0.15858607391959356 MAE train: 4075.8553476632796 MAE test: 7530.502826043687</code> </pre> <br><p>  ,  .      ,        .   ,       ,    . </p><br><p>     .    :                 ( ,   200 ).  ,        ""   .  , 30   200 ,   issue type: Epic       .         , ..    ,   ,                ,     ,           .    4  5    .         ,    .           ,      . </p><br><p>       ‚Äî      9  ,             .     ,           ,        ,          . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="python hljs">pd.Series([X_train.columns[abs(nn.coefs_[<span class="hljs-number"><span class="hljs-number">0</span></span>][:,i]).argmax()] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(nn.hidden_layer_sizes[<span class="hljs-number"><span class="hljs-number">0</span></span>])]).value_counts().head(<span class="hljs-number"><span class="hljs-number">5</span></span>).sort_values().plot(kind=<span class="hljs-string"><span class="hljs-string">'barh'</span></span>, title=<span class="hljs-string"><span class="hljs-string">'Feature importance'</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">14</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>));</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/t3/f_/pk/t3f_pkvagtacmshpf6ultiteoki.png"><br><h2 id="ansambl-modeley">   </h2><br><p>             . ?       7530   8217.     (7530 + 8217) / 2 = 7873,  ,    , ? ,  .    ,   .     ,     7526. </p><br><p>      ,     kaggle .     , ,    . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="python hljs">nn_predict = nn.predict(X_holdout) xgb_predict = xgb.predict(X_holdout) print(<span class="hljs-string"><span class="hljs-string">'NN MSE:'</span></span>, mean_squared_error(nn_predict, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'XGB MSE:'</span></span>, mean_squared_error(xgb_predict, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'Ensemble:'</span></span>, mean_squared_error((nn_predict + xgb_predict) / <span class="hljs-number"><span class="hljs-number">2</span></span>, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'NN MAE:'</span></span>, mean_absolute_error(nn_predict, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'XGB MSE:'</span></span>, mean_absolute_error(xgb_predict, y_holdout)) print(<span class="hljs-string"><span class="hljs-string">'Ensemble:'</span></span>, mean_absolute_error((nn_predict + xgb_predict) / <span class="hljs-number"><span class="hljs-number">2</span></span>, y_holdout))</code> </pre> </div></div><br><pre> <code class="plaintext hljs">NN MSE: 628107316.262393 XGB MSE: 631417733.4224195 Ensemble: 593516226.8298339 NN MAE: 7530.502826043687 XGB MSE: 8217.07897417256 Ensemble: 7526.763569558157</code> </pre> <br><h2 id="analiz-rezultatov">   </h2><br><p>       ?      7500   .  C'est-√†-dire  5   .          .     .  ,         . </p><br><p>      ( ): </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="python hljs">((nn_predict + xgb_predict) / <span class="hljs-number"><span class="hljs-number">2</span></span> - y_holdout).apply(np.abs).sort_values(ascending=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).head(<span class="hljs-number"><span class="hljs-number">10</span></span>).values</code> </pre> </div></div><br><pre> <code class="plaintext hljs">[469132.30504392, 454064.03521379, 252946.87342439, 251786.22682697, 224012.59016987, 15671.21520735, 13201.12440327, 203548.46460229, 172427.32150665, 171088.75543224]</code> </pre> <br><p>  . ,    . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="python hljs">df.loc[((nn_predict + xgb_predict) / <span class="hljs-number"><span class="hljs-number">2</span></span> - y_holdout).apply(np.abs).sort_values(ascending=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).head(<span class="hljs-number"><span class="hljs-number">10</span></span>).index][[<span class="hljs-string"><span class="hljs-string">'Issue_type'</span></span>, <span class="hljs-string"><span class="hljs-string">'Priority'</span></span>, <span class="hljs-string"><span class="hljs-string">'Worktype'</span></span>, <span class="hljs-string"><span class="hljs-string">'Summary'</span></span>, <span class="hljs-string"><span class="hljs-string">'Watchers'</span></span>]]</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/9d/sy/mt/9dsymtwss-2wkd1xy_3h0nx3qvu.png"><br><p>           ,       -  ,          .     4           . </p><br><p>    ,       . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="python hljs">print(((nn_predict + xgb_predict) / <span class="hljs-number"><span class="hljs-number">2</span></span> - y_holdout).apply(np.abs).sort_values().head(<span class="hljs-number"><span class="hljs-number">10</span></span>).values) df.loc[((nn_predict + xgb_predict) / <span class="hljs-number"><span class="hljs-number">2</span></span> - y_holdout).apply(np.abs).sort_values().head(<span class="hljs-number"><span class="hljs-number">10</span></span>).index][[<span class="hljs-string"><span class="hljs-string">'Issue_type'</span></span>, <span class="hljs-string"><span class="hljs-string">'Priority'</span></span>, <span class="hljs-string"><span class="hljs-string">'Worktype'</span></span>, <span class="hljs-string"><span class="hljs-string">'Summary'</span></span>, <span class="hljs-string"><span class="hljs-string">'Watchers'</span></span>]]</code> </pre> </div></div><br><pre> <code class="plaintext hljs">[ 1.24606014, 2.6723969, 4.51969139, 10.04159236, 11.14335444, 14.4951508, 16.51012874, 17.78445744, 21.56106258, 24.78219295]</code> </pre> <br><img src="https://habrastorage.org/webt/c0/ah/h7/c0ahh76a9u5tti2oinyzpycip3c.png"><br><p> ,      ,     -     ,    -        . ,  ,            ,     . </p><br><h2 id="kak-pole-engineer-uvelichilo-tochnost">   Engineer   </h2><br><p> ,        'Engineer',    ,   ,         ?  . </p><br><p>   ,             2 . , ,    ,       ,       .  ,  ,   ,     ""    ,       (  ) ,         ,     ,   . ,         " ",              . </p><br><p>    ,      .      ,     ,                     12 ,     (  JQL   JIRA): </p><br><pre> <code class="sql hljs">assignee was engineer_N during (ticket_creation_date) and status was "In Progress"</code> </pre> <br><p>    10783 * 12 = 129396 ,  ‚Ä¶ . ,  ,                 , ..   5   . <br>  ,    ,     ,   ,      2 .              . </p><br><h2 id="itogi-i-plany-na-buduschee">      </h2><br><p>               .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SLO</a>    ,    . </p><br><p>  ,          ,      (      : -   , -  ,  -    )        ,           . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433166/">https://habr.com/ru/post/fr433166/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433152/index.html">Nous transf√©rons Zimbra d'une infrastructure √† serveur unique vers une infrastructure √† serveurs multiples</a></li>
<li><a href="../fr433154/index.html">Exp√©rience utilisateur 5G NR attendue dans le monde r√©el</a></li>
<li><a href="../fr433156/index.html">Dell devient public et se dirige vers le cloud hybride</a></li>
<li><a href="../fr433158/index.html">Parodies musicales de SUSE sur Kubernetes, Linus Torvalds et autres</a></li>
<li><a href="../fr433164/index.html">Rapide et furieux: Forza Horizon 4 acc√©l√®re avec les shaders de fen√™tre</a></li>
<li><a href="../fr433168/index.html">Pourquoi un programmeur fait-il un stage en cuisine - une conversation avec Dodo Pizza sur le gemba, .NET et l'ouverture</a></li>
<li><a href="../fr433172/index.html">Nous attachons le multijoueur au jeu mobile "Make words from words" sur iOS et Android, √©crit en C ++</a></li>
<li><a href="../fr433174/index.html">Tous les correctifs ne sont pas √©galement utiles.</a></li>
<li><a href="../fr433178/index.html">Comment nous avons restaur√© un fichier .wav endommag√©</a></li>
<li><a href="../fr433180/index.html">R√©solution des probl√®mes de type de donn√©es dans Ruby ou Fiabilisation des donn√©es</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>