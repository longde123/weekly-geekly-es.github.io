<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÑ üÜñ üêä Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 1 üòó üêå üßõüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula n¬∫ 6.858. "Seguran√ßa de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418223/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula n¬∫ 6.858.  "Seguran√ßa de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security √© um curso sobre o desenvolvimento e implementa√ß√£o de sistemas de computador seguros.  As palestras abrangem modelos de amea√ßas, ataques que comprometem a seguran√ßa e t√©cnicas de seguran√ßa baseadas em trabalhos cient√≠ficos recentes.  Os t√≥picos incluem seguran√ßa do sistema operacional (SO), recursos, gerenciamento de fluxo de informa√ß√µes, seguran√ßa de idiomas, protocolos de rede, seguran√ßa de hardware e seguran√ßa de aplicativos da web. <br><br>  Palestra 1: ‚ÄúIntrodu√ß√£o: modelos de amea√ßas‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: ‚ÄúControle de ataques de hackers‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: ‚ÄúEstouros de Buffer: Explora√ß√µes e Prote√ß√£o‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: ‚ÄúSepara√ß√£o de Privil√©gios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: ‚ÄúSandbox do Cliente Nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Hoje falaremos sobre um sistema chamado <b>Native Client</b> , que o <b>Google</b> usa no mundo real.  √â uma tecnologia sandbox para executar c√≥digo em diferentes plataformas.  √â usado no <b>navegador Chrome</b> , permitindo que aplicativos da Web executem c√≥digos de m√°quina arbitr√°rios.  Este √© realmente um sistema bem legal.  Tamb√©m ilustra os recursos de isolamento e uma t√©cnica peculiar de separa√ß√£o de sandbox ou privil√©gio chamada <b>isolamento de falhas de software, isolamento de falhas de software</b> , sem usar o sistema operacional ou a m√°quina virtual para criar a sandbox. <br><br><img src="https://habrastorage.org/webt/pm/pn/i2/pmpni2s7ydakqxa5tzszbpp2pbu.jpeg"><br><br>  Em vez disso, o <b>Native Client</b> adota uma abordagem completamente diferente para examinar instru√ß√µes espec√≠ficas em um arquivo bin√°rio para descobrir se √© seguro execut√°-lo ou n√£o.  Portanto, antes de come√ßarmos a estudar os detalhes t√©cnicos do sistema, vamos descobrir por que esses caras realmente querem executar c√≥digo de m√°quina?  O interesse espec√≠fico deles √© aplicar esta solu√ß√£o em um navegador da Web, onde voc√™ j√° pode executar o c√≥digo <b>JavaScript</b> , o <b>Flash Player</b> e alguns outros processos.  Por que esses caras est√£o t√£o empolgados com a capacidade de executar c√≥digo na plataforma <b>x86</b> ?  Afinal, parece que este √© um passo para tr√°s. <br><br>  <b>P√∫blico:</b> eles querem obter c√°lculos muito r√°pidos. <br><br>  <b>Professor:</b> Sim, essa √© uma enorme vantagem do c√≥digo de m√°quina.  Mesmo que n√£o seja seguro a longo prazo, fornece alto desempenho.  Tudo o que voc√™ n√£o faria em <b>JavaScript</b> , por exemplo, escreva um programa e o compile, realmente funcionar√° muito mais r√°pido.  Existem outras raz√µes? <br><br>  <b>P√∫blico:</b> executando c√≥digo existente? <br><br>  <b>Professor:</b> certo.  √â importante que nem tudo possa ser escrito em <b>JavaScript</b> .  Portanto, se voc√™ possui um aplicativo existente ou, na terminologia do setor, c√≥digo "herdado" que pretende executar na Internet, essa parece ser uma √≥tima solu√ß√£o.  Como voc√™ pode usar apenas uma biblioteca existente, por exemplo, algum tipo de "mecanismo" gr√°fico complexo que √© sens√≠vel ao desempenho e a muitas outras coisas complexas que voc√™ n√£o deseja reimplementar, e essa ser√° uma boa solu√ß√£o. <br>  Se voc√™ est√° apenas programando um novo aplicativo da Web, deve usar seu pr√≥prio cliente se n√£o estiver particularmente preocupado com heran√ßa ou desempenho? <br><br>  <b>P√∫blico-alvo:</b> ent√£o voc√™ n√£o precisa usar <b>JavaScript</b> . <br><br>  <b>Professor:</b> sim, essa √© uma boa raz√£o.  Se voc√™ n√£o gosta de <b>JavaScript</b> , n√£o precisa us√°-lo, certo?  Voc√™ pode usar, por exemplo, <b>C</b> , executar c√≥digo <b>Python</b> , escrever em <b>Haskell</b> , em qualquer idioma que achar mais adequado. <br><br>  Portanto, esta √© uma lista bastante convincente de motiva√ß√£o para executar seu pr√≥prio c√≥digo em um navegador, e √© muito dif√≠cil obter direitos para tal a√ß√£o.  Em apenas um segundo, consideraremos os detalhes t√©cnicos e agora quero mostrar uma demonstra√ß√£o simples de treinamento que recebi do site do <b>Native Client</b> . <br><br><img src="https://habrastorage.org/webt/eu/nh/qv/eunhqvmixughsk_piecmnsfwcpy.jpeg"><br><br>  Isso √© bastante simples, porque voc√™ pode pegar um programa <b>C ++</b> ou <b>C</b> e execut√°-lo em um navegador.  Voc√™ pode olhar para esta p√°gina da web, que √© um arquivo <b>HTML</b> que possui um monte de c√≥digo <b>JavaScript</b> . <br><br><img src="https://habrastorage.org/webt/no/fp/is/nofpisdyic-0xbo1xfg-ptmbsta.jpeg"><br><br>  O motivo da exist√™ncia desse c√≥digo <b>JavaScript</b> √© que ele permite que voc√™ interaja com partes do <b>Native Client</b> .  Em rela√ß√£o √† opera√ß√£o do navegador, o significado de uma solu√ß√£o √© que voc√™ tenha algum tipo de p√°gina da Web que cont√©m c√≥digo <b>JavaScript</b> .  E essa solu√ß√£o funciona com os privil√©gios das p√°ginas e permite que voc√™ fa√ßa v√°rias coisas na pr√≥pria p√°gina da Web, por exemplo, se comunique com a rede em algumas circunst√¢ncias. <br><br>  <b>O Native Client</b> permite que voc√™ execute seu m√≥dulo dentro do navegador, para que o c√≥digo <b>JavaScript</b> possa interagir com ele e receber uma resposta.  Isso mostra alguns dos c√≥digos <b>JavaScript</b> necess√°rios para o <b>Native Client</b> para interagir com o m√≥dulo <b>NaCl</b> espec√≠fico que estamos prestes a executar. <br><br><img src="https://habrastorage.org/webt/kl/hz/hr/klhzhr6znxavpre0y7ro-bjrgbw.jpeg"><br><br>  E voc√™ pode enviar mensagens para este m√≥dulo.  Como isso √© feito?  Voc√™ pega o objeto deste m√≥dulo em <b>JavaScript</b> , denomina-se <b>postMessage</b> e <b>,</b> portanto, suporta o envio dessa mensagem para o m√≥dulo <b>NaCl</b> .  Quando o m√≥dulo <b>NaCl</b> responder, ele iniciar√° a fun√ß√£o de mensagem em <b>JavaScript</b> .  E, nesse caso em particular, uma caixa de di√°logo √© exibida no navegador. <br><br><img src="https://habrastorage.org/webt/n1/6f/ct/n16fct-epmcvq47bqh35b7wvc8i.jpeg"><br><br>  Portanto, no lado do <b>JavaScript</b> , essa √© uma interface de p√°gina da web bastante simples.  A √∫nica coisa que voc√™ precisa fazer adicionalmente √© atribuir o m√≥dulo <b>NaCl</b> dessa maneira.  Ou seja, basta inserir um m√≥dulo com um <b>ID</b> espec√≠fico <b>aqui</b> .  O mais interessante aqui √© o c√≥digo <b>hello</b> com a extens√£o <b>nmf</b> .  Ele apenas diz que h√° um arquivo execut√°vel que voc√™ precisa baixar e come√ßar a trabalhar com ele em um ambiente <b>NaCl</b> . <br><br><img src="https://habrastorage.org/webt/14/r_/xn/14r_xn80sp_m3ubrkfftdryomqw.jpeg"><br><br>  Esse c√≥digo nativo √© realmente como qualquer outro c√≥digo C ++ que voc√™ possa escrever.  A parte interessante √© essa fun√ß√£o de processamento de mensagens do <b>HandleMessage</b> . <br><br><img src="https://habrastorage.org/webt/hr/rn/kn/hrrnkncebsasx-lajbmnlf089xc.jpeg"><br><br>  Esta √© uma classe <b>C ++</b> e, sempre que o c√≥digo <b>JavaScript</b> enviar uma mensagem para o c√≥digo <b>nativo</b> , ele executar√° essa fun√ß√£o.  Ele executa uma verifica√ß√£o <b>if (message = = 'hello')</b> .  Nesse caso, ele criar√° algum tipo de linha de resposta e a enviar√° de volta.  Isso √© coisa bem simples.  Mas, para detalhes, vamos tentar execut√°-lo e ver o que acontece. <br><br>  Podemos construir e executar um pequeno servidor Web que servir√° a esta p√°gina e ao m√≥dulo <b>Native Client</b> .  Aqui eu posso ir para este <b>URL</b> , e aqui vemos a p√°gina do <b>NaCl</b> .  O m√≥dulo recebeu nossa mensagem de boas-vindas do <b>JavaScript</b> , respondeu de volta com uma string no <b>JavaScript</b> e o c√≥digo <b>JavaScript</b> acionou uma caixa de di√°logo pop-up contendo essa resposta. <br><br><img src="https://habrastorage.org/webt/rh/hi/xv/rhhixv0gqz8vgls10i0dkus3vgw.jpeg"><br><br>  Ent√£o isso realmente funciona. <br><br>  Tente descobrir se podemos causar uma falha no <b>cliente nativo</b> .  Espero que n√£o, mas podemos pegar esse c√≥digo e esse buffer e escrever um monte de bobagens nele, por exemplo, 65536 e ver o que acontece. <br><br><img src="https://habrastorage.org/webt/hi/gc/iy/higciynre_pzpduwpdkhsw-6hlq.jpeg"><br><br>  Espero que isso n√£o cause o travamento do meu navegador porque o <b>Native Client est√°</b> tentando fornecer isolamento.  Mas vamos ver o que acontece. <br><br>  Reinicie o servidor web.  Vemos que a entrada do m√≥dulo ainda √© bem-sucedida, nosso navegador n√£o foi ferido.  No entanto, as mensagens com o cliente n√£o ocorreram; portanto, a caixa de di√°logo est√° ausente.  Vamos dar uma olhada no console <b>JavaScript</b> na parte inferior da p√°gina e ver se o m√≥dulo <b>Native Client</b> nos informa sobre a falha do m√≥dulo <b>NaCl</b> . <br><br><img src="https://habrastorage.org/webt/5d/ec/ev/5decevvdddfz81augpqkdi25tni.jpeg"><br><br>  √â poss√≠vel que o argumento que inseri tenha causado um estouro de buffer ou acesso a algum endere√ßo errado, mas, em qualquer caso, o m√≥dulo <b>NaCl</b> √© realmente capaz de isolar a corrup√ß√£o acidental de mem√≥ria de forma que n√£o afete o navegador. <br><br>  Esta √© uma demonstra√ß√£o r√°pida desse sistema na forma em que voc√™ pode us√°-lo como usu√°rio final ou desenvolvedor.  Vejamos mais alguns exemplos.  Por exemplo, como o <b>Native Client</b> funcionar√°, ou por que precisamos disso, e n√£o de um design alternativo. <br><br>  Portanto, se seu objetivo √© isolar seu pr√≥prio c√≥digo, existem v√°rias alternativas com as quais voc√™ pode fazer isso.  De fato, as pessoas costumavam ter problemas ao usar c√≥digo legado e outros idiomas antes do aparecimento do <b>Native Client</b> .  Eles os resolveram de v√°rias maneiras, o que pode n√£o ter sido t√£o seguro e conveniente quanto o <b>Native Client</b> , mas forneceu os mesmos recursos de isolamento. <br><br>  Ent√£o, o que voc√™ deve fazer se realmente deseja executar o c√≥digo da m√°quina em um navegador?  Uma op√ß√£o √© confiar no desenvolvedor.  Talvez uma variante dessa abordagem seja a pergunta ao usu√°rio se ele deseja executar algum trecho de c√≥digo no navegador ou n√£o. <br><br>  Ent√£o, todo mundo entende aproximadamente que tipo de plano √© esse, certo?  Por exemplo, em vez de toda essa estrat√©gia de compila√ß√£o do <b>Native Client</b> , eu poderia apenas criar um programa <b>C</b> , execut√°-lo em um navegador e ele me perguntaria se eu quero executar este site ou n√£o?  E se eu clicar em "sim", acidentalmente em "ro√ßada" na mem√≥ria do navegador, ele travar√°.  Ent√£o √© poss√≠vel, certo?  Isso, √© claro, resolve todos esses problemas, mas o que h√° de errado nisso? <br><br>  Eu acho que o ruim √© que esta solu√ß√£o √© insegura.  Essa √© uma maneira de contornar esse sistema e muitos outros sistemas. <br><br>  <b>A Microsoft</b> tinha um sistema chamado <b>ActiveX</b> que basicamente implementou esse plano.  Voc√™ pode enviar os bin√°rios para o <b>IE</b> , o navegador do seu computador, e at√© que eles retornem com um certificado de um desenvolvedor espec√≠fico assinado por, por exemplo, <b>Microsoft</b> ou outra pessoa, o navegador n√£o executar√° seu c√≥digo.  Voc√™ acha que esse √© um plano √∫til? <br><br>  P√∫blico: √â uma quest√£o de confian√ßa! <br><br>  Professor: sim, √©.  Voc√™ realmente precisa confiar um pouco que o desenvolvedor assinar√° apenas os "bin√°rios" que n√£o far√£o nada errado.  Mas muitas vezes √© imposs√≠vel descobrir se isso √© algo ruim ou n√£o, ent√£o eles simplesmente escrevem o c√≥digo <b>C</b> e o assinam cegamente sem fazer uma enorme quantidade de trabalho.  Nesse caso, voc√™ pode obter certos problemas no futuro. <br><br>  Da mesma forma, a decis√£o de perguntar ao usu√°rio se ele realmente deseja executar alguma coisa n√£o garante seguran√ßa.  Mesmo que o usu√°rio queira ter cuidado, na verdade n√£o est√° claro como ele deve decidir?  Suponha que eu realmente queira entender se posso deixar este programa funcionar?  Disseram-me que est√° tudo bem, talvez tenha sido criado por desenvolvedores respeit√°veis ‚Äã‚Äãdo <b>Google.com</b> ou <b>Microsoft.com</b> .  No entanto, este √© o arquivo execut√°vel <b>foo.exe</b> e eu absolutamente n√£o sei o que est√° dentro dele.  Mesmo se eu desmontar o c√≥digo dele, ser√° muito dif√≠cil dizer se ele far√° algo ruim ou n√£o.  Portanto, √© realmente dif√≠cil para o usu√°rio decidir se a execu√ß√£o do c√≥digo √© segura para o sistema. <br><br><img src="https://habrastorage.org/webt/yj/sh/fa/yjshfa6jbfjytpoxjzdt2qfgdpw.jpeg"><br><br>  Assim, o <b>Native Client</b> pode atuar como um mecanismo pelo qual os usu√°rios podem ter alguma confian√ßa em dizerem sim ou n√£o a algum programa. <br><br>  Ent√£o, na pr√°tica, acho que deveria haver uma op√ß√£o proposta por nosso palestrante convidado Paul Yang na semana passada.  Ele aconselhou a execu√ß√£o do plug-in " <b>play extension</b> " ou "play the extension" no <b>navegador Chrome</b> .  Ou seja, antes de iniciar qualquer extens√£o, incluindo o <b>Native Client</b> , voc√™ precisa clicar nessa coisa.  De certa forma, √© o mesmo que perguntar ao usu√°rio.  Mas, neste caso, mesmo que o usu√°rio decida responder "sim", o sistema ainda estar√° seguro, porque o <b>Native Client ser√° inclu√≠do</b> no trabalho.  Nesse sentido, temos um mecanismo de seguran√ßa duplo: primeiro pergunte ao usu√°rio e, em seguida, com uma resposta positiva, inicie o cliente sandbox, o que n√£o permitir√° que o navegador trave. <br><br>  Portanto, outra abordagem que deve ser aplicada √© usar o sandbox, implementado por meio do SO ou hardware, ou isolar processos.  Foi isso que examinamos nas duas √∫ltimas palestras. <br><br>  Talvez voc√™ usaria mecanismos de isolamento do <b>Unix</b> .  Se voc√™ tivesse algo mais complexo, usaria o <b>FreeBSD</b> ou o <b>Capsicum</b> .  √â √≥timo para isolar um peda√ßo de c√≥digo na sandbox, porque voc√™ pode limitar seus recursos.  <b>O Linux</b> possui um mecanismo semelhante chamado <b>Seccomp</b> , que abordamos brevemente na √∫ltima palestra, e tamb√©m permite que voc√™ fa√ßa essas coisas. <br><br>  Portanto, j√° existe um mecanismo para escrever c√≥digo isoladamente em sua m√°quina.  Por que esses caras est√£o contra o uso desta solu√ß√£o existente?  Parece que eles est√£o "inventando a roda" por algum motivo.  Ent√£o o que est√° acontecendo? <br><br>  <b>P√∫blico:</b> talvez eles queiram minimizar erros? <br><br>  <b>Professor:</b> sim, de certa forma, eles n√£o confiam no sistema operacional.  Talvez eles estejam realmente preocupados com erros do SO.  √â prov√°vel que o kernel do <b>FreeBSD</b> ou <b>Linux</b> contenha bastante c√≥digo <b>C</b> que eles n√£o desejam ou n√£o podem verificar se est√£o corretos, mesmo que quisessem.  E no <b>Capsicum</b> ou no <b>Seccomp, o</b> trabalho √© realizado com base no plano de isolamento; portanto, basta que o kernel tenha apenas um pequeno e fiel peda√ßo de c√≥digo, para que o sandbox mantenha e aplique o isolamento. <br><br><img src="https://habrastorage.org/webt/wr/iq/ew/wriqewh7dx-iiwc-q2wymixcw1k.jpeg"><br><br>  <b>P√∫blico-alvo:</b> como voc√™ tem muito mais maneiras de usar navegadores, precisa lidar com v√°rios sistemas operacionais, como iOS e Android, e acessar ... <br><br>  <b>Professor:</b> sim, de fato, outra considera√ß√£o interessante √© que geralmente muitos sistemas operacionais apresentam erros.  Al√©m disso, de fato, diferentes sistemas operacionais s√£o de alguma forma incompat√≠veis entre si.  Isso significa que cada sistema operacional possui seu pr√≥prio mecanismo, conforme mostrado aqui: O <b>Unix</b> possui <b>Capsicum</b> , o <b>Linux</b> possui <b>Seccomp</b> , mas essas s√£o apenas varia√ß√µes do <b>Unix</b> .  <b>O Mac OS</b> possui <b>cinto de seguran√ßa</b> , o <b>Windows</b> tem outra coisa e a lista continua. <br><br>  Portanto, no final, cada plataforma com a qual voc√™ trabalha tem seu pr√≥prio mecanismo de isolamento.  E o que realmente n√£o os incomoda muito √© que eles ter√£o que escrever um c√≥digo diferente para <b>Mac</b> , <b>Windows</b> e <b>Linux</b> .  Mais ainda, isso afeta a maneira como voc√™ escreve essas coisas para trabalhar dentro da caixa de areia.  Como no <b>Native Client,</b> voc√™ realmente escreve um peda√ßo de c√≥digo que √© executado da mesma maneira que o c√≥digo do SO "nativo", da mesma forma que <b>o</b> c√≥digo da <b>Apple</b> , <b>o</b> c√≥digo do <b>Windows</b> ou <b>o</b> c√≥digo do sistema <b>Linux</b> √© executado. <br><br>  E se voc√™ usar esses mecanismos de isolamento, eles realmente imp√µem restri√ß√µes diferentes ao programa colocado na sandbox.  Portanto, voc√™ precisa escrever um programa que ser√° executado dentro da caixa de prote√ß√£o do <b>Linux</b> , outro programa para ser executado dentro da caixa de prote√ß√£o do <b>Windows</b> e assim por diante. <br><br>  Isso √© o que √© realmente inaceit√°vel para eles.  Eles n√£o querem lidar com problemas desse tipo.  Que outras considera√ß√µes voc√™ tem? <br><br>  <b>P√∫blico-alvo:</b> presumivelmente desempenho do sistema.  Porque se voc√™ usar <b>Capsicum</b> , precisar√° cuidar de recursos suficientes para garantir que os processos funcionem dentro da caixa de prote√ß√£o.  Aqui eles podem enfrentar o mesmo problema. <br><br>  <b>Professor:</b> sim, √© verdade.  O plano de isolamento de falhas de software √© realmente muito intensivo em recursos, o que no n√≠vel do sistema operacional pode causar uma falta de recursos para dar suporte √† sandbox.  Acontece que, em seu pr√≥prio <b>cliente nativo,</b> eles realmente usam a sandbox e a sandbox do SO para fornecer seguran√ßa adicional.  Assim, de fato, eles n√£o ganham no desempenho de sua implementa√ß√£o, embora provavelmente possam. <br><br>  <b>P√∫blico:</b> talvez eles queiram controlar tudo.  Como eles podem controlar o que acontece no navegador, mas se o enviaram ao computador do cliente no sistema operacional, eles n√£o sabem o que poderia acontecer l√°. <br><br>  <b>Professor:</b> pode-se dizer que sim, o sistema operacional pode ter erros ou n√£o gerenciar o sandbox suficientemente bem.  Ou a interface √© um pouco diferente, ent√£o voc√™ n√£o sabe o que o sistema operacional est√° prestes a revelar. <br><br>  <b>P√∫blico:</b> e isso n√£o impedir√° que o c√≥digo fa√ßa algumas coisas ruins.  H√° muitas coisas que o c√≥digo faz, por exemplo, que voc√™ deseja executar an√°lise est√°tica, mas os loops de c√≥digo impedem a a√ß√£o do programa. <br><br>  <b>Professor:</b> na verdade, √© muito dif√≠cil determinar se existe ou n√£o um processo em loop infinito, mas, em princ√≠pio, essa abordagem permite detectar alguns problemas de c√≥digo.  Eu acho que um exemplo realmente interessante, que eu n√£o conhecia at√© ler o artigo deles, mostra que esses caras est√£o preocupados com erros de hardware e n√£o apenas com vulnerabilidades do SO que podem ser executadas pelo c√≥digo.  Por exemplo, o pr√≥prio processador possui algumas instru√ß√µes que podem congelar ou reiniciar o computador.  Basicamente, seu equipamento n√£o deve ter esse erro, porque o sistema operacional depende do fato de que o hardware, em qualquer caso, ajudar√° a alcan√ßar o kernel, a fim de eliminar as consequ√™ncias de um erro do usu√°rio. <br><br>  Mas acontece que os processadores s√£o t√£o complexos que t√™m erros, e esses caras dizem que encontraram evid√™ncias disso.  Se houver instru√ß√µes complexas que o processador n√£o esperava receber, ele ser√° interrompido em vez de processar o n√∫cleo do sistema.  Isso √© ruim.  Eu acho que isso n√£o √© catastr√≥fico se eu apenas executar algumas coisas √∫teis no meu laptop, mas muito pior se o computador congelar quando visito algum tipo de p√°gina da web. <br><br>  Portanto, eles queriam criar um n√≠vel de prote√ß√£o mais alto para os m√≥dulos do <b>Native Client do</b> que aquele que fornece isolamento no n√≠vel do sistema operacional, mesmo sem erros de hardware.  Ent√£o, sobre seguran√ßa, eles se comportam como paran√≥icos, incluindo o problema de seguran√ßa de hardware. <br><br>  Vamos ver agora como o <b>Native Client</b> realmente isola os processos na sandbox.  Assim, o <b>Native Client</b> adota uma abordagem diferente, que pode ser chamada de "isolar falhas de software". <br><br><img src="https://habrastorage.org/webt/rk/a1/gv/rka1gv4vu6qut_1tjda81we9u6w.jpeg"><br><br>  O plano n√£o √© confiar no fato de que o sistema operacional ou o equipamento verificar√° as coisas enquanto o programa estiver em execu√ß√£o, mas confiar neles para revisar as instru√ß√µes com anteced√™ncia e decidir que elas podem ser executadas com seguran√ßa.  Assim, de fato, basta examinar o arquivo bin√°rio para verificar todas as instru√ß√µes poss√≠veis e verificar se elas ser√£o seguras ou n√£o.  Depois de ter decidido que tudo estar√° seguro, voc√™ pode simplesmente iniciar o processo porque sabe que ele consiste em coisas seguras e n√£o haver√° falhas. <br><br>  Portanto, o que eles far√£o √© examinar quase todas as instru√ß√µes no c√≥digo bin√°rio enviado ao navegador e decidir se instru√ß√µes espec√≠ficas s√£o seguras ou n√£o. <br><br>      ?     .      ? ,  ,          . <br><br>     -  <b>ALU</b> ,  ,      .         ,    .       ,   ,        .   ,      ,   ,           . <br><br><img src="https://habrastorage.org/webt/jh/gt/nb/jhgtnbhw2ijz1h3_9t_ypdy-nr4.jpeg"><br><br>     ?  ,   ,     .   ,     ,     ,       .  ,    ¬´¬ª  ,  ?           . <br><br>       , ,     ,    -  ,        .    ¬´¬ª    ,    -   .   ,      ¬´¬ª ,     .        ,   ,        ,      ,       . <br> ,         (      )    .      . ,      <b>if</b>  ,      ,    .   ,  ,   ‚Äì  . <br><br>  ,     ,         ,       .               .  ,       ,        . ,   ,        ,       ,    ¬´¬ª      . <br><br><img src="https://habrastorage.org/webt/na/m3/8e/nam38efcfifztldcv1vxg6zfhpu.jpeg"><br><br>        .       ,          ,     .   ,      ,         . <br><br>          ,    ,    ,   ,       - ,      .       ,  ,   , , .               <b>Trusted Service Runtime</b> ,     .          .         <b>Google</b> .    ,    <b>NaCl</b>    . <br><br>     ,   , ,  ,  ,    ‚Äî  ,      ‚Äî   .        ,        . <br><br> <b>:</b> ,        ,       <b>NaCl</b> ?        ,      ? <br><br> <b>:</b>  ,     ,   ,      <b>NaCl</b> .    ,   <b>malloc</b>  <b>pthread_create</b> ,       <b>Trusted Service Runtime</b> .     -        ,        <b>Unix</b> ,       - . ,     ,        <b>JavaScript</b>   -.        <b>RPC</b>   <b>JavaScript</b> ,         . <br><br><img src="https://habrastorage.org/webt/t9/yv/c3/t9yvc38rfpu-anjcegov4zusgjg.jpeg"><br><br> ,   ,     <b>NaCl</b>  <b>Unix</b> -,    - ,          -. <br><br>        .  ,       <b>Native Client</b> .          ‚Äì       <b>Native Client</b> ? <br><br>    ,  <b>Native Client</b>    .   ,     ,    .        ,      ,    <b>x86</b>            . ,        ,       ¬´¬ª,     . <br><br>            ,           .  ,         ,     0  256   .  ,    ,      ,    ,         . <br><br>        ?   ,      ? <br><br> <b>:</b>  ,     . <br><br> <b>:</b> ,     . ,        ,        .     ,      ,         ?    ,     ? <br><br> <b>:</b>              . <br><br> <b>:</b> ! <br><br> <b>:</b>  -,       ,    .       . <br><br> <b>:</b> ,     .    ,       .  ,  ,       .  ,           ,       ,  <b>Trusted Service Runtime</b> .       ,        ,         <b>Trusted Service Runtime</b>   ,     .  ,          . <br><br>  ,         ,      <b>NaCl</b>    ,     .              ,       0.  ,          <b>NaCl</b>   .         . <br><br> 28:00  <br><br> : <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Seguran√ßa de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> 7: ¬´ Native Client¬ª,  2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/I0Psvvky-44" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . <br><br> ,    .  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 meses de gra√ßa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ao pagar por um novo Dell R630 por um per√≠odo de seis meses - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x HDD Intel Deca-Core Xeon E5-2630 v4 / 128GB DDR4 / 4x1TB ou SSD 2x240GB / 1Gbps 10 TB - de US $ 99,33 por m√™s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , apenas at√© o final de agosto, fa√ßa o pedido pode estar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418223/">https://habr.com/ru/post/pt418223/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418213/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa‚Äù, parte 1</a></li>
<li><a href="../pt418215/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Aula 5: ‚ÄúDe onde v√™m os erros do sistema de seguran√ßa‚Äù, Parte 2</a></li>
<li><a href="../pt418217/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 6: ‚ÄúOportunidades‚Äù, parte 1</a></li>
<li><a href="../pt418219/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 6: Oportunidades, Parte 2</a></li>
<li><a href="../pt418221/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 6: ‚ÄúOportunidades‚Äù, parte 3</a></li>
<li><a href="../pt418225/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 7: Sandbox do Cliente Nativo Parte 2</a></li>
<li><a href="../pt418227/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 3</a></li>
<li><a href="../pt418229/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Aula 8: Modelo de Seguran√ßa de Rede, Parte 1</a></li>
<li><a href="../pt418233/index.html">Mnem√¥nicos da BMW para encontrar valores-limite</a></li>
<li><a href="../pt418235/index.html">Saga orquestrada ou como criar transa√ß√µes comerciais em servi√ßos com o banco de dados por padr√£o de servi√ßo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>