<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฌ ๐๏ธ ๐ ููู ูููุงุฐุง ูููุง ุจุชุญุณูู ุงูุฎูุงุฑุฒููุฉ ูุชูุธูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู SLAB ูู ููุงุฉ Linux ๐คซ ๐ฌ ๐ฐ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุดูุช ุงูุดุนุจูุฉ ุงููุชุฒุงูุฏุฉ ููุญุงููุงุช ูุงุณุชุฎุฏุงููุง ูุน ูุฌููุนุงุช ุงูุชุญูู ุนู ูุฌูุฏ ูุดููุฉ ุฎุทูุฑุฉ ูู ูุงุจููุฉ ุงูุชูุณุน ุ ููุง ูุคุฏู ุฅูู ุงูุฎูุงุถ ูุจูุฑ ูู ุงูุฃุฏุงุก ุนูู ุงูุฃุฌูุฒุฉ ุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููู ูููุงุฐุง ูููุง ุจุชุญุณูู ุงูุฎูุงุฑุฒููุฉ ูุชูุธูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู SLAB ูู ููุงุฉ Linux</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/virtuozzo/blog/435694/" style=";text-align:right;direction:rtl">  ูุดูุช ุงูุดุนุจูุฉ ุงููุชุฒุงูุฏุฉ ููุญุงููุงุช ูุงุณุชุฎุฏุงููุง ูุน ูุฌููุนุงุช ุงูุชุญูู ุนู ูุฌูุฏ ูุดููุฉ ุฎุทูุฑุฉ ูู ูุงุจููุฉ ุงูุชูุณุน ุ ููุง ูุคุฏู ุฅูู ุงูุฎูุงุถ ูุจูุฑ ูู ุงูุฃุฏุงุก ุนูู ุงูุฃุฌูุฒุฉ ุงููุจูุฑุฉ.  ุงููุดููุฉ ูู ุฃู ููุช ุงูุชุฌุงูุฒ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู SLAB ูุนุชูุฏ ูู ุงููุงุญูุฉ ุงูุชุฑุจูุนูุฉ ุนูู ุนุฏุฏ ุงูุญุงููุงุช ุ ูุฃู ุงูุงุณุชููุงู ุงููุดุท ููููุงุช ูุจูุฑุฉ ูู ุงูุฐุงูุฑุฉ ูู ูุชุฑุฉ ูุตูุฑุฉ ูููู ุฃู ูุชุณุจุจ ูู ุฏุฎูู ุงููุธุงู ูู ุญููุฉ ูุดุบูู ุ ููุณุชููู 100ูช ูู ููุช ุงููุนุงูุฌ.  ุงูููู ุฃูุฏ ุฃู ุฃุฎุจุฑูู ููู ุชู ุญู ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุชุบููุฑ ุฎูุงุฑุฒููุฉ ุงููุญุงุณุจุฉ ูุงุณุชุฎุฏุงู ูุฌููุนุฉ ุงูุชุญูู memcg ูุงุณุชุฎุฏุงู ูุงุฆูุงุช ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู SLAB ูุชุญุณูู ูุธููุฉ shrink_slab (). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99b/7f3/83b/99b7f383beadeec2c814a6792e507b6c.jpg" alt="ุชูุธูู ุงูุฐุงูุฑุฉ"><br><a name="habracut"></a><br>  ููุงุฐุง ุฃุซูุฑ ุณุคุงู ุชุญุณูู ุงูุนูููุงุช ูู ุงูููุงุฉุ  ุจุฏุฃ ูู ุดูุก ุจุญูููุฉ ุฃู ุฃุญุฏ ุนููุงุฆูุง ุ ุจุงุณุชุฎุฏุงู ุงูุญุงููุงุช ููุฌููุนุงุช ุงูุชุญูู ูู ุงูุฐุงูุฑุฉ (memcg) ุจูุดุงุท ุ ููุช ุงูุงูุชุจุงู ุฅูู ุงูููู ุงูุบุฑูุจุฉ ูุงุณุชููุงู ููุงุฑุฏ ุงููุนุงูุฌ ุงูุชู ุชุญุฏุซ ูู ููุช ูุขุฎุฑ.  ูุงู ุงูุญูู ุงูุนุงุฏู ูููุธุงู ุญูุงูู 50ูช ุ ููู ุฃููุงุช ุงูุฐุฑูุฉ ุ ุชู ุงูุงุณุชุบูุงุก ุนู 100ูช ูู ููุช ุงููุนุงูุฌ ุ ูุงุณุชููู ุงูููุงุฉ ุฌููุนูุง ุชูุฑูุจูุง. <br>  ูุงูุช ุงูุนูุฏุฉ ููุณูุง ูุชุนุฏุฏุฉ ุงููุณุชุฎุฏููู ุ ูุชู ุฅุทูุงู ุญูุงูู 200 ุญุงููุฉ OpenVZ ุนูููุง.  ุฃุธูุฑ ุงูุชุญููู ุฃู ุนุฏุฏูุง ูุจูุฑูุง ูู ุงููุณุชุฎุฏููู ูุงููุง ุจุฅูุดุงุก ุญุงููุงุช Docker ูุชุฏุงุฎูุฉ ูุชุณูุณูุงุช ูุฑููุฉ ูุชุนุฏุฏุฉ ุงููุณุชููุงุช ููุฌููุนุงุช ุงูุชุญูู ูู ุงูุฐุงูุฑุฉ.  ุชุญุชูู ูู ุญุงููุฉ ูุฎุตุตุฉ ูู ุงููุณุชูู ุงูุฃุนูู ุนูู ุญูุงูู 20 ููุทุฉ ุชุญููู ู 20 ูุฌููุนุฉ ุฐุงูุฑุฉ ููุชุญูู (memcg) ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ systemd.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุงูุช ููุงู ููุงุท ุชุญููู ููุฌููุนุงุช ุชุญูู ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุนุงูู ุงููููุงุก ุงููุฐููุฑ ุฃุนูุงู.  ุจุจุณุงุทุฉ ุ ุชู ุชุญููู ุงูุนูุฏุฉ ุจูุซุงูุฉ ุ ููุงู ุงูุญูู ุนูููุง ุฃููู ุจูุซูุฑ ูู ุงููุชูุณุท โโูุฌููุน ุนููุงุฆูุง ุงูุขุฎุฑูู.  ููุฏ ููุง ููุชููู ุจุฅูุฌุงุฏ ุณุจุจ ุธููุฑ ูุฐู ุงูููู ุ ุญูุซ ูููู ุฃู ุชุธูุฑ ููุณ ุงููุดููุฉ ุนูู ุงูุฃุฌูุฒุฉ ุงูุฃูู ุงุฒุฏุญุงููุง ุ ุญูุซ ูุงู ูู ุงูุตุนุจ ููุงุญุธุชูุง (ุนูู ุณุจูู ุงููุซุงู ุ ุฃุนุท ุงูููู ูู ููุช + 5ูช sys ุ ููุง ูุคุฏู ุฅูู ุงูุฎูุงุถ ุงูุฃุฏุงุก). <br><br>  ูู ุฎูุงู ุงูุชูุงุนุจ ุจุงูููุงู ุ ุชูููุช ูู ุงููุญุงู ุจุงูุฑูุจ ูุฅุฒุงูุฉ ุงูููุฑ.  ููุฏ ุงุชุถุญ ุฃู ูุนุธู ููุช ุงููุนุงูุฌ ููุถู ูู ูุญู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู SLAB ุ ุฃู ุฐุงูุฑุงุช ุงูุชุฎุฒูู ุงููุจูุฑุฉ ุงููุงุฆูุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="markdown hljs"><span class="hljs-bullet"><span class="hljs-bullet">- </span></span>100,00% 0,00% kswapd0 [kernel.vmlinux] [k] kthread - 99,31% balance<span class="hljs-emphasis"><span class="hljs-emphasis">_pgdat - 82,11% shrink_</span></span>zone - 61,69% shrink<span class="hljs-emphasis"><span class="hljs-emphasis">_slab - 58,29% super_</span></span>cache<span class="hljs-emphasis"><span class="hljs-emphasis">_count + 54,56% list_</span></span>lru<span class="hljs-emphasis"><span class="hljs-emphasis">_count_</span></span>one</code> </pre> <br><br>  ููุง ูุณุชุญู ุชูุฏูู ุดุฑุญ ูุงูุชูุตูู ุญูู ูุฐู ุงููุณุฃูุฉ ุจูุฒูุฏ ูู ุงูุชูุงุตูู.  ูุนูู ุงูุฌููุน ุฃู ุงูููุงุฉ ุชุฎุฒู ุงูุจูุงูุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ููุชุฑุฉ ูู ุงูููุช ูุจู ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ูู ุงูููุงูุฉ.  ุชุณุชููุฏ ุงูููุงุฉ ูู ูุฐุง ุงููุจุฏุฃ ุนูู ูุทุงู ูุงุณุน.  ุนูู ุณุจูู ุงููุซุงู ุ ุชุญุชูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุตูุญุฉ ุนูู ุตูุญุงุช ูู ุงูุจูุงูุงุช ุงููุชุนููุฉ ุจุงูููู ุ ููุง ูุคุฏู ุฅูู ุฒูุงุฏุฉ ุณุฑุนุฉ ุงููุตูู ุฅูููุง ุจุดูู ูุชูุฑุฑ ุนูุฏ ุงููุฑุงุกุฉ (ูุฃูู ูุง ุชุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ุงููุฑุต ูุฑุฉ ุฃุฎุฑู).  ูู ุญุงูุชูุง ุ ูุดุฃุช ุงููุดููุฉ ูุน ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุชุฉ ููุจูุงูุงุช ุงููุตููุฉ ุงููุงุฆูุฉ ุงูููุฌูุฏุฉ ูู ูุงุฆูุชูู LRU: s_dentry_lru ู s_inode_lru. <br><br>  <b>LRU (ุงูุฃูู ุงุณุชุฎุฏุงููุง ูุคุฎุฑูุง)</b> <b><br></b> <br>  ูุดูุฑ ุงููููู lru_list ุฅูู ูุฌููุนุฉ ูู ุงูููุงุฆู ุงููุฑุชุจุทุฉ ุ ููู ุนูุตุฑ memcg ูุดุท ูุชูุงูู ูุน ุนูุตุฑ ูุงุญุฏ (list_lru_one) ูู ูุฐู ุงููุฌููุนุฉ.  ุนูุฏูุง ูุง ูุชู ุงุณุชุฎุฏุงู ูุงุฆู SLAB ูุนููู ุจูุงุณุทุฉ kernel ุ ูุถููู kernel ุฅูู ุฅุญุฏู ููุงุฆู ุงูุตููู ุงููุฑุชุจุทุฉ (ุจูุงุกู ุนูู memcg ุงูุฐู ููุชูู ุฅููู ุงููุงุฆู ุ ุฃู ุจูุนูู ุชูุฑูุจูุง ุ ุฃู memcg ุงูุนูููุฉ ุงููุณุชุฎุฏูุฉ ุนูุฏ ุฅูุดุงุก ูุฐุง ุงููุงุฆู).  ูุชู ูุตู ุงูุตููู ููุณู ููุง ููู (lru_list :: node :: memcg_lrus): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru_memcg</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rcu_head</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rcu</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* array of per cgroup lists, indexed by memcg_cache_id */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru_one</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lru</span></span></span><span class="hljs-class">[0];</span></span> <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru_one</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_head</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* may become negative during memcg reparenting */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> nr_items; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> };</code> </pre><br>  ูุดูุฑ lru [0] ุฅูู ูุงุฆูุฉ ุงููุงุฆูุงุช ุงููุชุนููุฉ memcg ุจุงูููุฏ 0 ุ <br>  ูุดูุฑ lru [1] ุฅูู ูุงุฆูุฉ ุงููุงุฆูุงุช ุงููุชุนููุฉ memcg ุจุงูููุฏ 1 ุ <br>  ... <br>  ูุดูุฑ lru [n] ุฅูู ูุงุฆูุฉ ุงููุงุฆูุงุช ุงููุชุนููุฉ ุจู memcg ุฐุงุช ุงููุนุฑู n ุ <br><br>  ูุณุฑุฏ LRU ูุงุฆูุฉ s_dentry_lru ู s_inode_lru ุชุธูุฑ ูู ูุดููุชูุง ุ ูููุง ููุญู ุงูุงุณู ุ ููู ุชุญุชูู ุนูู ูุงุฆูุงุช ุบูุฑ ูุณุชุนููุฉ ูู ูุธุงู ุงููููุงุช ู inode. <br>  ูู ุงููุณุชูุจู ุ ุฅุฐุง ูู ููู ููุงู ุฐุงูุฑุฉ ูุงููุฉ ูู ุงููุธุงู ุฃู memcg ูุนูู ุ ูุชู ุชุญุฑูุฑ ุจุนุถ ุนูุงุตุฑ ุงููุงุฆูุฉ ูู ุงูููุงูุฉ ุ ูุชููู ุขููุฉ ุฎุงุตุฉ ุชุณูู shrinker ุจูุฐุง. <br><br>  <b>ุงูููุงุด</b> <b><br></b> <br>  ุนูุฏูุง ุชุญุชุงุฌ ุงูููุงุฉ ุฅูู ุชุฎุตูุต ุตูุญุงุช ุงูุฐุงูุฑุฉ ุ ูููู ูุง ุชูุฌุฏ ุฐุงูุฑุฉ ุฎุงููุฉ ุนูู ุนูุฏุฉ NUMA ุฃู ูู ุงููุธุงู ุ ุชุจุฏุฃ ุขููุฉ ุชูุธูููุง.  ุฅูู ูุญุงูู ุฑูู ุฃู ุชุฌุงูู ููุฏุงุฑ ูุนูู ูู ุงููุฑุต: 1) ุตูุญุงุช ูู ูุญุชููุงุช ุงููููุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุตูุญุฉ ุ  2) ุงูุตูุญุงุช ุงููุชุนููุฉ ุจุงูุฐุงูุฑุฉ ุงููุฌูููุฉ ูู ุงููุจุงุฏูุฉ ุ ู 3) ูุงุฆูุงุช SLAB ุงููุฎุฒูุฉ ูุคูุชูุง (ุงููุดููุฉ ุงูุชู ูุงุฌููุงูุง ูุฑุชุจุทุฉ ุจูุง). <br><br>  ูุง ูุคุซุฑ ุงูุชุฎูุต ูู ุฌุฒุก ูู ูุงุฆูุงุช SLAB ุงููุฎุฒูุฉ ูุคูุชูุง ุจุดูู ูุจุงุดุฑ ุนูู ุฅุตุฏุงุฑ ุงูุตูุญุงุช: ุญุฌููุง ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ุฃุตุบุฑ ุจูุซูุฑ ูู ุญุฌู ุงูุตูุญุฉ ุ ูุชุญุชูู ุตูุญุฉ ูุงุญุฏุฉ ุนูู ูุฆุงุช ุงููุงุฆูุงุช.  ุนูุฏูุง ูุชู ุชุญุฑูุฑ ุฌุฒุก ูู ุงููุงุฆูุงุช ุ ุชุธูุฑ ูุฌูุงุช ุฐุงูุฑุฉ ุญุฑุฉ ูู ุตูุญุงุช SLAB ุ ูุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูุฅูุดุงุก ูุงุฆูุงุช SLAB ุฃุฎุฑู.  ูุชู ูุจูู ูุฐู ุงูุฎูุงุฑุฒููุฉ ูู ุงูููุงุฉ ุนู ูุตุฏ: ุฅููุง ุจุณูุทุฉ ููุนุงูุฉ ููุบุงูุฉ.  ูููู ูููุงุฑุฆ ุงูููุชู ุฑุคูุฉ ุงูุตูุบุฉ ุงูุฎุงุตุฉ ุจุชุญุฏูุฏ ุฌุฒุก ูู ุงููุงุฆูุงุช ูุชูุธูููุง ูู ูุธููุฉ do_shrink_slab (). <br><br>  ุชููู ูุฐู ุงููุธููุฉ ุจุงูุชูุธูู ุงููุนูู ูุฌุฒุก ูู ุงููุงุฆูุงุช ุ ูุณุชุฑุดุฏุฉ ุจุงููุตู ุงูุฐู ุชู ุชูุฑูุฑู ุฅูููุง ูู ุชููุต ุงููููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_shrink_slab</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct shrink_control *shrinkctl, struct shrinker *shrinker, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> priority)</span></span></span><span class="hljs-function"> </span></span>{ โฆ <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> freeable = shrinker-&gt;count_objects(shrinker, shrinkctl); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (freeable == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; total_scan = _(freeable); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (total_scan &gt;= batch_size) { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ret = shrinker-&gt;scan_objects(shrinker, shrinkctl); total_scan -= shrinkctl-&gt;nr_scanned; } ... }</code> </pre> <br>  ูููุง ูุชุนูู ุจุงููุชูุฉ ุงููุงุฆูุฉ ุงููุชููุตุฉ ุ ูุชู ุชูููุฐ ูุฐู ุงููุธุงุฆู ุนูู ุงููุญู ุงูุชุงูู.  ูุญุชูุธ ูู ูุชูุฉ ุฑุฆูุณูุฉ ุจูุงุฆูุชูุง s_dentry_lru ู s_inode_lru ุงูุฎุงุตุชูู ุจุงููุงุฆูุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ุงููุฑุชุจุทุฉ ุจู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">super_block</span></span></span><span class="hljs-class"> {</span></span> ... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shrinker</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_shrink</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* per-sb shrinker handle */</span></span> ... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_dentry_lru</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_inode_lru</span></span></span><span class="hljs-class">;</span></span> โฆ };</code> </pre> <br><br>  ุฅุฑุฌุงุน ุงูุฃุณููุจ .count_objects ุนุฏุฏ ุงููุงุฆูุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">super_cache_count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct shrinker *shrink, struct shrink_control *sc)</span></span></span><span class="hljs-function"> </span></span>{ total_objects += list_lru_shrink_count(&amp;sb-&gt;s_dentry_lru, sc); total_objects += list_lru_shrink_count(&amp;sb-&gt;s_inode_lru, sc); <span class="hljs-comment"><span class="hljs-comment">/*     ) */</span></span> total_objects = vfs_pressure_ratio(total_objects); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> total_objects; }</code> </pre> <br><br>  ุงูุฃุณููุจ .scan_objects ูุนูููุง ูุญุฑุฑ ุงููุงุฆูุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">super_cache_scan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct shrinker *shrink, struct shrink_control *sc)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*     s_dentry_lru */</span></span> prune_dcache_sb(sb, sc); <span class="hljs-comment"><span class="hljs-comment">/*     s_inode_lru */</span></span> prune_icache_sb(sb, sc); }</code> </pre> <br>  ูุชู ุชูุฑูุฑ ุนุฏุฏ ุงููุงุฆูุงุช ุงูุชู ุณูุชู ุชุญุฑูุฑูุง ูู ุงููุนููุฉ sc.  ุฃูุถูุง ุ ูุชู ุงูุฅุดุงุฑุฉ ุฅูู memcg ููุงู ุ ูุงูุชู ูุฌุจ ุฅุฎุฑุงุฌ ุงููุงุฆูุงุช ูููุง ูู LRU: <br><br><pre style=";text-align:right;direction:rtl"> <b><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shrink_control</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nid; <span class="hljs-comment"><span class="hljs-comment">/* ID NUMA  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> nr_to_scan; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mem_cgroup</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">memcg</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* memcg */</span></span> };</code></b> </pre><br>  ูุจุงูุชุงูู ุ ูุญุฏุฏ prune_dcache_sb () ูุงุฆูุฉ ูุฑุชุจุทุฉ ูู ูุฌููุนุฉ ุงูุตููู list_lru_memcg :: lru [] ููุนูู ูุนูุง.  Prune_icache_sb () ููุนู ููุณ ุงูุดูุก. <br><br>  <b>ุงูุฎูุงุฑุฒููุฉ ุงูุงูุชูุงููุฉ ุงููุฏููุฉ ุงูุงูุชูุงููุฉ</b> <b><br></b> <br>  ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูููุงุณูุฉ ุ "ุฅุฎุฑุงุฌ" ุงููุงุฆูุงุช ูู SLAB ูุน ููุงุฏ ุงูุฐุงูุฑุฉ ูู <br>  ูุญุฏุซ sc-&gt; target_mem_cgroup ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">shrink_node() { โฆ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mem_cgroup</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">root</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sc</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">target_mem_cgroup</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      sc-&gt;target_mem_cgroup  */</span></span> memcg = mem_cgroup_iter(root, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, &amp;reclaim); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { โฆ shrink_slab(memcg, ...); โฆ } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((memcg = mem_cgroup_iter(root, memcg, &amp;reclaim))); ... }</code> </pre><br>  ูุฐูุจ ูู ุฎูุงู ุฌููุน memcg ุงูุทูู ููุฏุนู shrink_slab () ููู ูููู.  ุจุนุฏ ุฐูู ุ ูู ุฏุงูุฉ shrink_slab () ุ ูุฐูุจ ุฅูู ุฌููุน ุงููุชููุตุงุช ูููู ูููู ุงุณุชุฏุนุงุก do_shrink_slab (): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shrink_slab</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">gfp_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gfp_mask, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nid, struct mem_cgroup *memcg, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> priority)</span></span></span><span class="hljs-function"> </span></span>{ list_for_each_entry(shrinker, &amp;shrinker_list, <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>) { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shrink_control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sc</span></span></span><span class="hljs-class"> = {</span></span> .nid = nid, .memcg = memcg, }; ret = do_shrink_slab(&amp;sc, shrinker, ...); } }</code> </pre><br>  ุชุฐูุฑ ุฃูู ููู ูุชูุฉ ุนุธูู ุ ุชุชู ุฅุถุงูุฉ ุงูููุงุดูุง ุงูุฎุงุต ุฅูู ูุฐู ุงููุงุฆูุฉ.  ุฏุนูุง ูุญุณุจ ุนุฏุฏ ุงููุฑุงุช ุงูุชู ุณูุชู ูููุง ุงุณุชุฏุนุงุก do_shrink_slab () ููุญุงูุฉ ูุน 200 ุญุงููุฉ ูู 20 memcg ู 20 ููุทุฉ ุชุญููู ูู ูู ูููุง.  ูู ุงููุฌููุน ุ ูุฏููุง 200 * 20 ููุทุฉ ุชุญููู ู 200 * 20 ูุฌููุนุงุช ุงูุชุญูู.  ุฅุฐุง ูู ุชูู ููุงู ุฐุงูุฑุฉ ูุงููุฉ ูู ุฃุนูู memcg ุ ูุณูุถุทุฑ ูุชุฌุงูุฒ ูู memcg ุงูุชุงุจุนุฉ ููุง (ุฃู ุ ูู ุดูุก ุจุดูู ุนุงู) ุ ูููู ูููู ุงุณุชุฏุนุงุก ูู ูู ุงููุชููุต ูู ูุงุฆูุฉ shrinker_list.  ูุจุงูุชุงูู ุ ุณุชููู ุงูููุงุฉ ุจุฅุฌุฑุงุก 200 * 20 * 200 * 20 = 16000000 ููุงููุงุช ุฅูู ุงูุฏุงูุฉ do_shrink_slab (). <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ุณูููู ุงูุนุฏุฏ ุงููุงุฆู ูู ุงูููุงููุงุช ุฅูู ูุฐู ุงููุธููุฉ ุนุฏูู ุงููุงุฆุฏุฉ: ุนุงุฏุฉู ูุง ุชููู ุงูุญุงููุงุช ูุนุฒููุฉ ูููุง ุจูููุง ุ ูุงุญุชูุงู ุงุณุชุฎุฏุงู CT1 super_block2 ุงูุฐู ุชู ุฅูุดุงุคู ูู CT2 ููุฎูุถ ุจุดูู ุนุงู.  ุฃู ุ ูุง ูู ููุณู ุ ุฅุฐุง ูุงูุช memcg1 ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ุชุญูู ูู CT1 โโุ ูุณูููู ุงูุนูุตุฑ ุงูููุงุจู ูู super_block2-&gt; s_dentry_lru-&gt; node-&gt; memcg_lrus-&gt; lru [memcg1_id] ุตููููุง ูุงุฑุบูุง ููุง ุชูุฌุฏ ููุทุฉ ูู ุงุณุชุฏุนุงุก do_shrink_slab (). <br><br>  ูููู ููุฐุฌุฉ ูุฐู ุงููุดููุฉ ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ูุตู ุจุณูุท ููุจุงุด (ูุชู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู patchset ุ ูุงูุชู ุชู ููููุง ูููุง ุจุนุฏ ุฅูู kernel ุ ููุง): <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$echo</span></span> 1 &gt; /sys/fs/cgroup/memory/memory.use_hierarchy <span class="hljs-variable"><span class="hljs-variable">$mkdir</span></span> /sys/fs/cgroup/memory/ct <span class="hljs-variable"><span class="hljs-variable">$echo</span></span> 4000M &gt; /sys/fs/cgroup/memory/ct/memory.kmem.limit_in_bytes <span class="hljs-variable"><span class="hljs-variable">$for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> `seq 0 4000`; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> mkdir /sys/fs/cgroup/memory/ct/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> $$ &gt; /sys/fs/cgroup/memory/ct/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>/cgroup.procs; mkdir -ps/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>; mount -t tmpfs <span class="hljs-variable"><span class="hljs-variable">$is</span></span>/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>; touch s/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>/file; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br>  ุฏุนููุง ูุฑู ูุง ูุญุฏุซ ุฅุฐุง ููุช ุจุงุณุชุฏุนุงุก ุฅุฌุฑุงุก ุฅุนุงุฏุฉ ุชุนููู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช 5 ูุฑุงุช ุนูู ุงูุชูุงูู: <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$time</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 3 &gt; /proc/sys/vm/drop_caches</code> </pre> <br>  ูุณุชูุฑ ุงูุชูุฑุงุฑ ุงูุฃูู 14 ุซุงููุฉ ุ ูุฃู ุงููุงุฆูุงุช ุงููุฎุฒูุฉ ูุคูุชูุง ููุฌูุฏุฉ ูุนูููุง ูู ุงูุฐุงูุฑุฉ: <i>0.00 user 13.78 system <b>0: 13.78 ุงููููุถู</b> 99ูช CPU.</i> <br>  ูุณุชุบุฑู ุงูุชูุฑุงุฑ ุงูุซุงูู 5 ุซูุงูู ุ ุนูู ุงูุฑุบู ูู ุนุฏู ูุฌูุฏ ุงููุฒูุฏ ูู ุงููุงุฆูุงุช: <i>0.00user 5.59system <b>0: 05.60eleled</b> 99ูช CPU.</i> <br>  ูุณุชุบุฑู ุงูุชูุฑุงุฑ ุงูุซุงูุซ 5 ุซูุงูู: <i>0.00user 5.48system <b>0: 05.48elapsed</b> 99ูช CPU</i> <br>  ูุณุชุบุฑู ุงูุชูุฑุงุฑ ุงูุฑุงุจุน 8 ุซูุงูู: <i>0.00user 8.35system <b>0: 08.35elapsed</b> 99ูช CPU</i> <br>  ูุณุชุบุฑู ุงูุชูุฑุงุฑ ุงูุฎุงูุณ 8 ุซูุงูู: <i>0.00user 8.34system <b>0: 08.35elapsed</b> 99ูช CPU</i> <br><br>  ุฃุตุจุญ ูู ุงููุงุถุญ ุฃู ุฎูุงุฑุฒููุฉ ุงูุงูุชูุงููุฉ ุงููุชููุตุฉ ุงููุณุชุฎุฏูุฉ ูู ููุจู ุงููุงููููุง ููุณุช ูุซุงููุฉ ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุชุบููุฑูุง ููุฃูุถู ูู ุญูุซ ูุงุจููุฉ ุงูุชูุณุน. <br><br>  <b>ุฎูุงุฑุฒููุฉ ุงูุงูุชูุงููุฉ ุงูุฌุฏูุฏุฉ ุงููุชููุจุฉ</b> <b><br></b> <br>  ูู ุงูุฎูุงุฑุฒููุฉ ุงูุฌุฏูุฏุฉ ุฃุฑุฏุช ุชุญููู ูุง ููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุญุฑูุฑู ูู ุนููุจ ุงููุฏูู ู </li><li style=";text-align:right;direction:rtl">  ูุง ุชุถูู ุฃููุงู ุฌุฏูุฏุฉ.  ุงุณุชุฏุนุงุก do_shrink_slab () ููุท ุนูุฏูุง ูููู ุฐูู ููุทูููุง (ุฃู ุ ุงููุงุฆูุฉ ุงููุฑุชุจุทุฉ ุงูููุงุจูุฉ ูู ุตููู s_dentry_lru ุฃู ูู ุตููู s_inode_lru ููุณุช ูุงุฑุบุฉ) ุ ููู ูุง ุชุตู ูุจุงุดุฑุฉ ุฅูู ุฐุงูุฑุฉ ุงููุงุฆูุฉ ุงููุฑุชุจุทุฉ. </li></ol><br>  ูุงู ูู ุงููุงุถุญ ุฃูู ูุง ูููู ุชูููุฑ ุฐูู ุฅูุง ูู ุฎูุงู ุจููุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุฃุนูู ูู ุชููุต ุบูุฑ ุงููุชุฌุงูุณุฉ (ููุงู ุชููุต ููุณ ููุท ูู superblock ุ ูููู ุฃูุถุง ูุงุฆูุงุช ุงูุจูุงูุงุช ุงูุฃุฎุฑู ุบูุฑ ุงูููุตููุฉ ูู ูุฐู ุงูููุงูุฉ. ูููู ูููุงุฑุฆ ุงูุชุนุฑู ุนูููุง ูู ุฎูุงู ุงูุจุญุซ ุนู ุงููููุฉ ุงูุฑุฆูุณูุฉ prealloc_shrinker () ูู ุฑูุฒ ุงูููุงุฉ).  ูุฌุจ ุฃู ุชุณูุญ ุจููุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุจุชุฑููุฒ ุญุงูุชูู: "ูู ุงูููุทูู ุงุณุชุฏุนุงุก do_shrink_slab ()" ู "ูู ุบูุฑ ุงูููุทูู ุงุณุชุฏุนุงุก do_shrink_slab ()". <br><br>  ุชู ุฑูุถ ุจููุฉ ุจูุงูุงุช ููุน IDA ุจุณุจุจ  ูุณุชุฎุฏููู ุงูุฃููุงู ุฏุงุฎู ุฃููุณูู.  ูููู ุงูุจูุงูุงุช ูุญูู ุงูุจุชุงุช ููุงุณุจ ุชูุงููุง ููุฐุง ุงูุฏูุฑ: ููู ูุชูุญ ุงูุชุนุฏูู ุงูุฐุฑู ููุจุชุงุช ุงููุฑุฏูุฉ ุ ููู ุชุฑููุจุฉ ูุน ุญูุงุฌุฒ ุงูุฐุงูุฑุฉ ุชุณูุญ ูู ุจุจูุงุก ุฎูุงุฑุฒููุฉ ูุนุงูุฉ ุฏูู ุงุณุชุฎุฏุงู ุงูุฃููุงู. <br><br>  ูุญุตู ูู ุชูููุต ุนูู ุงููุนุฑู ุงููุฑูุฏ ุงูุฎุงุต ุจู (shrinker :: id) ุ ููุญุตู ูู memcg ุนูู ุตูุฑุฉ ููุทูุฉ ูููููุง ุงุณุชูุนุงุจ ุฃูุจุฑ ูุนุฑูู ูุณุฌู ุญุงูููุง.  ุนูุฏ ุฅุถุงูุฉ ุงูุนูุตุฑ ุงูุฃูู ุฅูู s_dentry_lru-&gt; ุงูุนูุฏุฉ-&gt; memcg_lrus-&gt; lru [memcg_id] ุ ูุชู ุชุนููู ุงูุตูุฑุฉ ุงูููุทูุฉ memcg ุงูููุงุจูุฉ ุฅูู 1 ุจุช ูุน ูุนุฑู ุชููุต ุงูุฃุฑูุงู&gt;.  ููุณ ุงูุดูุก ูุน s_inode_id. <br><br>  ุงูุขู ูููู ุชุญุณูู ุญููุฉ ูู shrink_slab () ูุชุฌุงูุฒ ููุท shrinkers ุงูุถุฑูุฑูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shrink_slab</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ โฆ for_each_set_bit(i, <span class="hljs-built_in"><span class="hljs-built_in">map</span></span>, shrinker_nr_max) { โฆ shrinker = idr_find(&amp;shrinker_idr, i); โฆ do_shrink_slab(&amp;sc, shrinker, priority); โฆ } }</code> </pre><br>  (ูุชู ุชูููุฐ ุชูุธูู ุงูุจุช ุฃูุถูุง ุนูุฏ ุฏุฎูู ุงููุชููุต ุงูุญุงูุฉ "ููุณ ูู ุงูููุทูู ุงุณุชุฏุนุงุก do_shrink_slab (). ุฑุงุฌุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงูุชุฒุงู</a> ุนูู ุฌูุซุจ ููุญุตูู ุนูู ุงูุชูุงุตูู. <br><br>  ุฅุฐุง ูุฑุฑุช ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุชุนููู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูุฅู ุงุณุชุฎุฏุงู ุงูุฎูุงุฑุฒููุฉ ุงูุฌุฏูุฏุฉ ููุธูุฑ ูุชุงุฆุฌ ุฃูุถู ุจูุซูุฑ: <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$time</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 3 &gt; /proc/sys/vm/drop_caches</code> </pre> <br>  ุงูุชูุฑุงุฑ ุงูุฃูู: <i>0.00user 1.10system <b>0: 01.10 ุงููููุถู</b> 99 ูช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ</i> <i><br></i>  ุงูุชูุฑุงุฑ ุงูุซุงูู: <i>0.00user 0.00system <b>0: 00.01elapsed</b> 64ูช CPU</i> <i><br></i>  ุงูุชูุฑุงุฑ ุงูุซุงูุซ: <i>0.00user 0.01system <b>0: 00.01elapsed</b> 82ูช CPU</i> <i><br></i>  ุงูุชูุฑุงุฑ ุงูุฑุงุจุน: <i>0.00user 0.00system <b>0: 00.01elapsed</b> 64ูช CPU</i> <i><br></i>  ุงูุชูุฑุงุฑ ุงูุฎุงูุณ: <i>0.00user 0.01system <b>0: 00.01elapsed</b> 82ูช CPU</i> <br>  ูุฏุฉ ุงูุชูุฑุงุฑ ูู ุงูุซุงูู ุฅูู ุงูุฎุงูุณ ูู 0.01 ุซุงููุฉ ุ <b>ุฃุณุฑุน 548 ูุฑุฉ ูู ูุจู.</b> <br><br>  ูุธุฑูุง ูุฅุฌุฑุงุกุงุช ููุงุซูุฉ ูุฅุนุงุฏุฉ ุชุนููู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุชุญุฏุซ ูุน ูู ููุต ูู ุงูุฐุงูุฑุฉ ุนูู ุงูุฌูุงุฒ ุ ูุฅู ูุฐุง ุงูุชุญุณูู ูุญุณู ุจุดูู ูุจูุฑ ูู ุชุดุบูู ุงูุขูุงุช ูุน ุนุฏุฏ ูุจูุฑ ูู ุงูุญุงููุงุช ููุฌููุนุงุช ุงูุชุญูู ูู ุงูุฐุงูุฑุฉ.  ุชู ูุจูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฌููุนุฉ ูู ุงูุชุตุญูุญุงุช</a> (17 ูุทุนุฉ) ูู ููุจ ุงููุงููููุง ุ ูููููู ุงูุนุซูุฑ ุนูููุง ููุงู ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ 4.19. <br><br>  ุฃุซูุงุก ูุฑุงุฌุนุฉ ุงูุชุตุญูุญุงุช ุ ุธูุฑ ุฃุญุฏ ููุธูู Google ุ ูุงุชุถุญ ุฃู ูุฏููู ููุณ ุงููุดููุฉ.  ูุฐูู ุ ุชู ุงุฎุชุจุงุฑ ุจูุน ุฃุฎุฑู ุนูู ููุน ูุฎุชูู ูู ุงูุญูู. <br>  ููุชูุฌุฉ ูุฐูู ุ ุชู ุงุนุชูุงุฏ patchset ูู ุงูุชูุฑุงุฑ ุงูุชุงุณุน.  ูุฏุฎูููุง ุฅูู ุงููุงููููุง ุงูุฃุณุงุณูุฉ ุงุณุชุบุฑู ุญูุงูู 4 ุฃุดูุฑ.  ุงูููู ุฃูุถูุง ุ ูุชู ุชุถููู patchset ูู Virtuozzo 7 kernel ุงูุฎุงุตุฉ ุจูุง ุ ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ vz7.71.9 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar435694/">https://habr.com/ru/post/ar435694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar435684/index.html">ุญู ูุฎุชุจุฑ ุฃูู ุฑูุฏุฌ ุงููุทูู ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ููุทูุฑู ุงูุฃุฌูุฒุฉ ุงููุถุงุฆูุฉ: ููุต ุงูุจููุชููููู 238</a></li>
<li><a href="../ar435686/index.html">ุจุงููู ุฏูุฑูู ูุตู Telegram Messenger LLP</a></li>
<li><a href="../ar435688/index.html">ูุซุงู ุนูู ุชุทุจูู ุฎุงุฏู ุงูุฑูุฑูุฉ</a></li>
<li><a href="../ar435690/index.html">[ูุง ูู ุงูุฎุทุฃ ูู GraphQL] ... ูููููุฉ ุงูุชุนุงูู ูุนูุง</a></li>
<li><a href="../ar435692/index.html">Y Combinator: "ูู ุงูุจุฏุงูุฉ ุ ุชุจุฏู ุจุนุถ ุฃูุจุฑ ุดุฑูุงุช ุงูุชูููููุฌูุง ููุฃููุง ุฃูุนุงุจ"</a></li>
<li><a href="../ar435696/index.html">ุงูุขุซุงุฑ: 1997 ุงูููุจููุชุฑ ุงูุฅุนูุงู</a></li>
<li><a href="../ar435698/index.html">ุงูุชุจ ูุฏูุฑ ุงูุฐุงูุฑุฉ ุงูุฌูุฏ ุงูุฎุงุต ุจู</a></li>
<li><a href="../ar435700/index.html">8 ุฃุณูุฃ ุฃุณุฆูุฉ ููุงุจูุฉ ูุน Vue.js</a></li>
<li><a href="../ar435702/index.html">ูุจุฏุฃ ุงููุชุตูุฏูู ูู ุจุฑุงุกุงุช ุงูุงุฎุชุฑุงุน ููููุฒูู: ููู ุจููุช ุจุฏูู ูุนุจุฉ</a></li>
<li><a href="../ar435704/index.html">ุงูุญููู ุงููุนูุงุฑูุฉ ููุนุจุฉ ุงููุญููู. ุงูุฌุฒุก 2: ุงูููุงุฏุฉ ูููุงุฆู ุงูุงูุชุธุงุฑ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>