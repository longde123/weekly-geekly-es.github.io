<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœğŸ¾ ğŸ’…ğŸ¿ ğŸ¤¦ æˆ‘ä»¬å¦‚ä½•å¯¹14,000ä¸ªå¯¹è±¡è¿›è¡Œç½‘ç»œç›‘æ§ ğŸ» â›µï¸ ğŸ¡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬æœ‰14,000ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬zabbixï¼Œapiï¼Œpythonå’Œä¸æ„¿æ‰‹åŠ¨æ·»åŠ å¯¹è±¡çš„å¯¹è±¡ã€‚ é‡ç‚¹ä»‹ç»äº†ç½‘ç»œç®¡ç†å‘˜å¦‚ä½•é€šè¿‡è‡ªåŠ¨æ·»åŠ ç½‘ç»œèŠ‚ç‚¹æ¥å®æ–½ç›‘è§†ï¼Œä»¥åŠæœ‰å…³æˆ‘å¿…é¡»ç»å†çš„ç—›è‹¦ã€‚ 

 æœ¬æ–‡çš„é‡ç‚¹æ˜¯ç¼ºä¹pythonç»éªŒçš„ç½‘ç»œå·¥ç¨‹å¸ˆã€‚ åœ¨æ— éœ€æ‰‹åŠ¨æ›´æ–°æ•´ä¸ªå¯¹è±¡ç¾¤çš„æƒ…å†µä¸‹ï¼Œå¸®åŠ©å®ç°è‡ªåŠ¨åŒ–ç›‘è§†å¹¶æ”¹å–„ç”Ÿæ´»å’Œå·¥ä½œè´¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬å¦‚ä½•å¯¹14,000ä¸ªå¯¹è±¡è¿›è¡Œç½‘ç»œç›‘æ§</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/438754/"> æˆ‘ä»¬æœ‰14,000ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬zabbixï¼Œapiï¼Œpythonå’Œä¸æ„¿æ‰‹åŠ¨æ·»åŠ å¯¹è±¡çš„å¯¹è±¡ã€‚ é‡ç‚¹ä»‹ç»äº†ç½‘ç»œç®¡ç†å‘˜å¦‚ä½•é€šè¿‡è‡ªåŠ¨æ·»åŠ ç½‘ç»œèŠ‚ç‚¹æ¥å®æ–½ç›‘è§†ï¼Œä»¥åŠæœ‰å…³æˆ‘å¿…é¡»ç»å†çš„ç—›è‹¦ã€‚ <br><br> æœ¬æ–‡çš„é‡ç‚¹æ˜¯ç¼ºä¹pythonç»éªŒçš„ç½‘ç»œå·¥ç¨‹å¸ˆã€‚ åœ¨æ— éœ€æ‰‹åŠ¨æ›´æ–°æ•´ä¸ªå¯¹è±¡ç¾¤çš„æƒ…å†µä¸‹ï¼Œå¸®åŠ©å®ç°è‡ªåŠ¨åŒ–ç›‘è§†å¹¶æ”¹å–„ç”Ÿæ´»å’Œå·¥ä½œè´¨é‡ã€‚ <br><br><img src="https://habrastorage.org/webt/mw/-u/ev/mw-uevvuik_o6poo21krw2rt0gy.jpeg"><br><a name="habracut"></a><br><h2> é•¿è¯çŸ­è¯´ï¼Œæˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªç›‘æ§ </h2><br> ä½ å¥½ æˆ‘å«Alexander Prokhorovï¼Œæˆ‘ä»¬å’Œæˆ‘ä»¬éƒ¨é—¨çš„ç½‘ç»œå·¥ç¨‹å¸ˆå›¢é˜Ÿä¸€èµ·åœ¨ITX5ï¼ƒç½‘ç»œä¸­å·¥ä½œã€‚ æˆ‘ä»¬éƒ¨é—¨å¼€å‘ç½‘ç»œåŸºç¡€æ¶æ„ï¼Œç½‘ç»œç›‘æ§å’Œè‡ªåŠ¨åŒ–ã€‚ æ˜¯çš„ï¼Œæ‰€æœ‰ä¸æ•°æ®ä¼ è¾“æœ‰å…³çš„ä¸œè¥¿ã€‚ <br><br><img src="https://habrastorage.org/webt/g1/mu/mr/g1mumrtfj5tkbmqs52gl05_d2la.png"><br><br> æˆ‘å°†ç›‘è§†ç³»ç»Ÿåˆ†ä¸º5ä¸ªå­ä»»åŠ¡ï¼š <br><br><ul><li> ä¸‹è½½ä¸»æ•°æ® </li><li> è·å–æœ‰å…³å¯¹è±¡çŠ¶æ€çš„ä¿¡æ¯ </li><li> è§¦å‘å™¨å’Œè­¦æŠ¥ </li><li> æŠ¥å‘Šä¸­ </li><li> å¯è§†åŒ– </li></ul><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åˆ†äº«æˆ‘ä»¬å¦‚ä½•å°†ç›‘æ§ä¸å…¬å¸ä¸­çš„ä¸»æ•°æ®é›†æˆåœ¨ä¸€èµ·ã€‚ <br><br> æˆ‘ä»¬æ‹¥æœ‰14,000ä¸ªé›¶å”®ç‰©ä¸šï¼Œæˆ‘ä»¬è¦è§£å†³çš„ç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯ç¡®å®šä¸å¯è®¿é—®çš„ç‰©å“ï¼Œç‰©å“çš„æ•°é‡å’Œåœ°ç†åˆ†å¸ƒã€‚ <br><br> ç›‘è§†åœ¨<b><font color="#cc0000">Zabbixä¸Š</font></b>å®Œæˆã€‚ ç®€è€Œè¨€ä¹‹ï¼Œä¸ºä»€ä¹ˆ-å¹¸è¿å’Œé—äº§ã€‚ å…¶ä½™çš„ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">é•¿è¯çŸ­è¯´ã€‚</b> <div class="spoiler_text">è¿™ä¸€åˆ‡éƒ½å§‹äºåœ¨æ¡Œå­ä¸‹æ–¹çš„è®¡ç®—æœºä¸Šå®‰è£…ç›‘æ§ç¨‹åº... <br><br> å½“æˆ‘åœ¨2013å¹´ä¸ºå…¬å¸å·¥ä½œæ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰ç½‘ç»œç›‘æ§ï¼Œå°½ç®¡å½“æ—¶çš„ç½‘ç»œå¾ˆå¤§ï¼Œå¤§çº¦æœ‰4000ä¸ªå¯¹è±¡ã€‚ æˆ‘ä»¬ä»ç±»ä¼¼é›ªå´©èˆ¬çš„åº”ç”¨ç¨‹åºï¼Œç”¨æˆ·æˆ–å…¶ä»–éƒ¨é—¨çš„æ¥æ”¶ä¸­äº†è§£åˆ°å¤§é‡ï¼ˆå¹¶éå¦‚æ­¤ï¼‰ä¸‹é™ã€‚ <br><br><img src="https://habrastorage.org/webt/ge/6l/du/ge6lduplk0odlklh6iazcjsw6vk.jpeg"><br><br> ç¬¬ä¸€ä¸ªå®‰è£…äº†Zabbix 1.8ï¼Œè¿™æ˜¯ä¸€ç§è¶Šæ¥è¶Šæµè¡Œçš„äº§å“ï¼ˆæ—¶å°šï¼Œç°ä»£ï¼Œé’å¹´ï¼‰ï¼Œé‡é‡è½»ä¸”ä»·æ ¼ä½å»‰ï¼Œå¯ä»¥åœ¨å¤§å‹ç¤¾åŒºä¸­å®‰è£…å¼€æºã€‚ æˆ‘ä»¬å¾ˆå¹¸è¿æœ‰è¿™ä¸ªé€‰æ‹©ã€‚ <br><br> æ²¡æœ‰å®‰è£…èµ„æºï¼Œæ²¡æœ‰äººè¦æ±‚ã€‚ ç›®å‰å°šä¸æ¸…æ¥šè¿™æ˜¯å¦ä¼šå¥æ•ˆï¼›æ²¡æœ‰äººæœ‰ä»»ä½•å®æ–½ç»éªŒã€‚ ä½†æ˜¯æˆ‘ä»¬éœ€è¦å°†å…¶å®‰è£…åœ¨â€œæ¡Œå­ä¸‹é¢â€çš„è®¡ç®—æœºä¸Šã€‚ å†—ä½™çº§åˆ«-UPSã€‚ <br><br> å®‰è£…åçš„ä¸»è¦é—®é¢˜æ˜¯å¦‚ä½•å°†æ‰€æœ‰å¯¹è±¡ï¼ˆ4kï¼ï¼‰å€’å…¥ç›‘è§†ä¸­ï¼ŒåŒæ—¶è®¾æ³•åˆ¶ä½œå·²åœ¨Remedyä¸­æŒ‚èµ·çš„åº”ç”¨ç¨‹åºã€‚  Zabbixå·²ç»æ”¯æŒä½¿ç”¨ä¸»æœºä¸Šçš„æ•°æ®å¯¼å…¥/å¯¼å‡ºxmlã€‚ å¯¹è±¡çš„æ•°é‡å¾ˆå¤§ï¼Œæ²¡æœ‰å¿…è¦ä¸ºè¯¥å¯¹è±¡åˆ›å»ºå•ç‹¬çš„ç»„ï¼ˆå¹¶ä¸”å®ƒæ²¡æœ‰å‡ºç°ï¼‰ï¼Œå› æ­¤å†³å®šå°†å¯¹è±¡è·¯ç”±å™¨ä¸Šä¼ ä¸ºç½‘ç»œèŠ‚ç‚¹ã€‚ æ›´å¤šçš„ç½‘ç»œè®¾å¤‡æœªå¾—åˆ°æ§åˆ¶ï¼ˆå·²ç»ç®¡ç†ï¼‰ã€‚ <br><br> å®Œæˆäº†ä½¿ç”¨ç½‘ç»œä¸»æœºï¼ˆexcelä¸­çš„IPAMï¼‰å¯¹æ–‡ä»¶çš„è§£æï¼Œå¹¶å°†å…¶é‡æ–°æ ¼å¼åŒ–ä¸ºxmlï¼ŒZabbixåŒæ„å°†å…¶æ¶ˆåŒ–ã€‚ è¿™ä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œè€Œæ˜¯æ‰€æœ‰ä¸»æœºéƒ½å·²åŠ è½½ï¼Œæ¯ä¸‰ä¸ªæœˆæ‰§è¡Œä¸€æ¬¡æ›´æ–°ï¼Œåˆ é™¤å…³é—­çš„å¯¹è±¡å¹¶æ·»åŠ æ–°çš„å¯¹è±¡ã€‚ éšç€æ—¶é—´çš„æµé€ï¼Œäº‹å®è¯æ˜ï¼ŒZabbixæˆä¸ºæˆ‘ä»¬çš„ä¸»è¦ä¸”å”¯ä¸€çš„ä¿¡æ¯æ¥æºï¼Œä¹Ÿæ˜¯æœ‰å…³è®¾å¤‡å¯ç”¨æ€§ä»¥åŠæœ€é‡è¦çš„æ˜¯å¤§è§„æ¨¡ä¸‹é™çš„çƒ­çº¿ç”µè¯ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿åœ¨æ™šä¸Šï¼Œçƒ­çº¿ä¹Ÿå¯ä»¥äº†è§£å¤§è§„æ¨¡äº‹æ•…çš„å‘ç”Ÿï¼Œå¹¶é€šè¿‡ç”µè¯å”¤é†’å·¥ç¨‹å¸ˆï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œå½“æ²¡äººçŸ¥é“å®ƒæ—¶ï¼Œå®ƒæ›´å®¹æ˜“ç”Ÿæ´»ï¼‰ã€‚ å¹¶éæ€»æ˜¯åŠå…¬å®¤æ™šä¸Šåœç”µï¼ŒUPSæ‰èƒ½å……åˆ†ç»´æŠ¤å¯¹æˆ‘ä»¬ç½‘ç»œçš„ç›‘è§†ã€‚ åœ¨æŸä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¼€å§‹è¿›è¡Œå¤‡ä»½ã€‚ å› ä¸º ç›‘è§†æ˜¯ä¸ç¨³å®šä¸”æ–­æ–­ç»­ç»­çš„ï¼Œä¸¤å®¶å…¬å¸å†³å®šåªç»„ç»‡ä¸€ä¸ªä¸“é—¨è´Ÿè´£æ­¤ä»»åŠ¡çš„å°ç»„ã€‚ å¾ˆå¿«ï¼Œå¥¹å¼€å§‹å®æ–½é›†ä¸­å¼çš„Zabbixï¼Œå®ƒä¸ä»…æ£€æŸ¥ç½‘ç»œã€‚ <br><br> æˆ‘ä»¬çš„æ—§Zabbixä»ç„¶ä½åœ¨æ¡Œå­åº•ä¸‹ã€‚ æ·»åŠ ä¸€å®šæ•°é‡çš„é¡¹ç›®åï¼Œæ•°æ®åº“å¼€å§‹å˜æ…¢ï¼Œç½‘ç»œï¼Œé˜Ÿåˆ—å’Œè½®è¯¢å»¶è¿Ÿéƒ½å¢åŠ äº†ï¼Œæ‰€ä»¥å¾ˆå¿«æˆ‘ä¸å¾—ä¸å†è·å¾—ä¸¤å°è®¡ç®—æœºä½œä¸ºä»£ç†ï¼Œå¹¶å°†å®ƒä»¬å…¨éƒ¨æ”¾åœ¨åå­—æ¶ä¸Šï¼Œè¿™æ ·çœŸæ­£çš„ä¿ç•™ï¼ˆä»¥åŠæ¡Œå­åº•ä¸‹çš„åœ°æ–¹å°±å®Œäº†ï¼‰ ã€‚ æ”¯æŒå…¶ä¸­çš„ç”Ÿå‘½ï¼Œä»¥ä¾¿å¿«é€Ÿæ·»åŠ æŸç§è‡ªå®šä¹‰å‚æ•°æ¥ç›‘è§†å’Œè§‚å¯Ÿå®ƒã€‚ å¯¹äºå…¶ä½™çš„ï¼Œæˆ‘ä»¬è½¬ç§»åˆ°ä¸€ä¸ªé›†ä¸­çš„ã€‚ <br><br> é›†ä¸­ç›‘æ§è´Ÿè´£æ‰€æœ‰ITè®¾å¤‡-è·¯ç”±å™¨ï¼ŒæœåŠ¡å™¨ï¼Œæ”¶é“¶æœºï¼Œç»ˆç«¯ã€‚ è¿‡äº†ä¸€ä¼šå„¿ï¼Œä»–é•¿æ»¡äº†å¾ˆå¤šä¸œè¥¿ã€‚ è¦è®¿é—®å®è´µçš„å¯è®¿é—®æ€§ä¿¡æ¯ï¼Œæ‚¨å¿…é¡»ç¨ç­‰ç‰‡åˆ»ï¼Œç”šè‡³å¯èƒ½è¦å–å’–å•¡ã€‚ æ­¤å¤–ï¼Œå¯¹äºè¶Šæ¥è¶Šå…·ä½“å’Œè‡ªå®šä¹‰çš„ç½‘ç»œç›‘æ§ï¼Œæˆ‘ä»¬æœ‰è¶Šæ¥è¶Šå¤šçš„è¦æ±‚ã€‚ å½“æ—¶æœ‰ä¸€äº›ä½¿ç”¨è¯¥ç³»ç»Ÿçš„ç»éªŒï¼Œæˆ‘ä»¬å†³å®šä»å¤´å¼€å§‹åšæ—§çš„å®ç°ï¼Œä½†æ˜¯æ­£ç¡®çš„æ˜¯-ä»¥zabbix.noc.x5.ruä¸ºåã€‚å®ƒä½äºæ•°æ®ä¸­å¿ƒï¼Œç”±æˆ‘ä»¬è‡ªå·±æ‰§è¡Œå¿…è¦çš„åŠŸèƒ½ã€‚ å…³äºæœ¬ä»‹ç»å’Œæ–‡ç« çš„ä¸»ä½“ã€‚ <br></div></div><br>  Zabbixç‰ˆæœ¬æ˜¯3.0 <abbr title="é•¿æœŸæ”¯æŒ">LTS</abbr> ã€‚ ä»…åœ¨LTSç‰ˆæœ¬å†…æ›´æ–°ã€‚ <br><br> é…ç½®-4ä¸ªè™šæ‹Ÿæœºï¼šæœåŠ¡å™¨+æ•°æ®åº“ï¼Œä»£ç†ï¼Œä»£ç†ï¼ŒWeb <br><br> é€šè¿‡èµ„æºï¼Œæˆ‘ä»¬å°è¯•éµå¾ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">zabbix.com</a>ä¸Šçš„å»ºè®®è¿›è¡Œå¤§å‹å®æ–½ã€‚ <br><br> æˆ‘ä»¬é¢ä¸´çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å°†ç½‘ç»œèŠ‚ç‚¹è‡ªåŠ¨æ·»åŠ åˆ°ç›‘è§†ä¸­ã€‚ å®šæœŸå‘ç°ç«‹å³æ¶ˆå¤±ã€‚ æˆ‘ä»¬çš„ç½‘ç»œèŒƒå›´åœ¨10/8è¶…çº§ç½‘ç»œçš„æ‰€æœ‰å¼€æ”¾ç©ºé—´ä¸­ã€‚ å¿…é¡»è½®è¯¢è®¸å¤šåœ°å€ï¼Œå¹¶ä¸”è‡ªåŠ¨å‘ç°å°†å ç”¨å¤§é‡ç³»ç»Ÿèµ„æºï¼Œä½†ä¸èƒ½è§£å†³æ·»åŠ æœ‰å…³å¯¹è±¡çš„éæŠ€æœ¯ä¿¡æ¯çš„é—®é¢˜ã€‚ <br><br><img src="https://habrastorage.org/webt/1r/on/nm/1ronnmq5d1dutzqrzwn-3tfypdm.png" align="right" width="240"><h2> å¦‚ä½•æ·»åŠ å¯¹è±¡ </h2><br> è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨å¤–éƒ¨è„šæœ¬æ·»åŠ å¯¹è±¡ã€‚ åœ¨å…¬å¸ä½¿ç”¨çš„SAPä¸­æ‰¾åˆ°æœ‰å…³è´¸æ˜“å¯¹è±¡çš„ä¸»æ•°æ®ã€‚ æ— æ³•ç›´æ¥ä»SAPä¸ŠåŒæ­¥è®¿é—®<i>WebæœåŠ¡</i>ä»¥ä¸Šä¼ æ•°æ®ï¼Œå¯¹æ‰€æœ‰å¯¹è±¡çš„è¯·æ±‚èŠ±è´¹äº†ç›¸å½“é•¿çš„æ—¶é—´ã€‚ è¿›è¡Œäº†å¼‚æ­¥è°ƒç”¨ã€‚ æ°å¥½åœ¨åˆå¤œï¼Œå°†ä»SAPçš„å…¨éƒ¨å¯¼å‡ºä»¥<i>XML</i>çš„å½¢å¼æ·»åŠ åˆ°ftpä¸­ï¼Œå¹¶ä¸”åœ¨ç™½å¤©ï¼Œ <i>XML</i>çš„æœ€æ–°ç‰ˆæœ¬ä¸ä¹‹ä¸åŒã€‚ <br><br clear="right">  Zabbixä½¿ç”¨<b><font color="#cc0000">Zabbix API</font></b>åŠ è½½æ•°æ®ï¼Œå¹¶é€šè¿‡<i>Python</i>ä¸ä¹‹äº¤äº’ã€‚ <br><br> åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œç¡®å®šäº†æˆ‘ä»¬åˆ›å»ºå¯¹è±¡æ‰€éœ€çš„æ•°æ®é›†ã€‚ æˆ‘ä»¬å°†æ‰€æœ‰è·å¾—çš„ç¬¦å·ç”¨äºç³»ç»Ÿä¸­å¯¹è±¡çš„æ­£ç¡®åˆ†ç±»æˆ–è¿›ä¸€æ­¥çš„ä¾¿åˆ©ã€‚ è¿™äº›æ ‡å¿—åŒ…æ‹¬ï¼š <br><br><ul><li>  <i>IPåœ°å€</i> -åˆ›å»ºç›‘è§†æ¥å£çš„æœ€é‡è¦å­—æ®µ </li><li>  <i>SAP ID-</i>æˆ‘ä»¬æœ‰ä¸€ä¸ªå”¯ä¸€çš„å¯¹è±¡æ ‡è¯†ç¬¦ </li><li>  <i>çŠ¶æ€</i> -æ‰“å¼€/å…³é—­ </li><li>  <i>åç§°</i> -å¯¹è±¡çš„åç§°æˆ–ç¼–å·ï¼Œç”¨æˆ·åœ¨è”ç³»æ—¶ç»å¸¸ä½¿ç”¨ </li><li>  <i>ä½ç½®</i> -å®é™…åœ°å€ </li><li>  <i>ç”µè¯</i> -è”ç³»ç”µè¯ </li><li>  <i>ç»„</i> -è¯¥ç»„ç»„æ˜¯æ ¹æ®å¯¹è±¡çš„ç±»å‹å’Œä½ç½®å½¢æˆçš„ </li></ul><br><img src="https://habrastorage.org/webt/hr/hc/29/hrhc29q4zq8axnta-ift3gjpcwm.png"><br><br><h3>  sap-sync.pyæ¨¡å— </h3><br><div class="spoiler">  <b class="spoiler_title">SAPä¸­çš„XML</b> <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">werks</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WERKS</span></span></span><span class="hljs-tag">&gt;</span></span>1234<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WERKS</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NAME1</span></span></span><span class="hljs-tag">&gt;</span></span>4321-<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NAME1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PLANT_IP</span></span></span><span class="hljs-tag">&gt;</span></span>192.168.1.50<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PLANT_IP</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">REGION</span></span></span><span class="hljs-tag">&gt;</span></span>31<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">REGION</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PSTLZ</span></span></span><span class="hljs-tag">&gt;</span></span>308580<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PSTLZ</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CITY1</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CITY1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CITY2</span></span></span><span class="hljs-tag">&gt;</span></span> .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CITY2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STREET</span></span></span><span class="hljs-tag">&gt;</span></span> .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STREET</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HOUSE_NUM1</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HOUSE_NUM1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TEL_NUMBER</span></span></span><span class="hljs-tag">&gt;</span></span>(999)777-77-77<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TEL_NUMBER</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BRANCH</span></span></span><span class="hljs-tag">&gt;</span></span>CH<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BRANCH</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">REGION</span></span></span><span class="hljs-tag">&gt;</span></span>CH_MSK<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">REGION</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">REGION_NAME</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">REGION_NAME</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FORMAT</span></span></span><span class="hljs-tag">&gt;</span></span>CH_MSK_D<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FORMAT</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STATUS</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STATUS</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">werks</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">sap-sync.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 import sys, os, getopt, ipaddress from datetime import datetime as dt from zabbix.api import ZabbixAPI import xml.etree.cElementTree as et from report import report import existhost def ping(ip): if os.system('ping -c 2 -W 1 %s &gt; /dev/null'%ip) == 0: return True else: return False def main(argv): global opath try: opts, args = getopt.getopt(argv,"hp:",["path="]) except getopt.GetoptError: print('sync-sap-chg.py -p &lt;path&gt;') sys.exit(2) for opt, arg in opts: if opt == '-h': print('sync-sap-chg.py -p &lt;path&gt;') sys.exit() elif opt in ("-p", "--path"): opath = arg def asynchronization(file, reportdata): zapi = ZabbixAPI(url='http://z.noc.x5.ru', user='user', password='pwd') #,    left_kidney = '17855' right_kidney = '17856' f_type={'S':'Super','D':'DK','H':'Giper','A':'DK'} format={'D':'13','S':'14','H':'12','A':'13'} region={'CT':'21','UR':'19','SZ':'17',~omit~} try: #  XML tree = et.ElementTree(file=file) root = tree.getroot() for werks in root.iter('werks'): #     Zabbix interfaces=[{ 'main':'1', 'type':'2', 'useip':'1', 'port':'161' }] shop={ 'inventory':{}, 'interfaces':interfaces, 'groups':[], 'templates':[{'templateid':'10194'}], 'inventory_mode':'1' } #,     XML di = { 'WERKS':'', ~omit~, 'STATUS':'Object Opened' } #    for item in werks: di[item.tag] = item.text #  SAPID   if item.tag == 'WERKS': n_proxy = ''.join(filter(lambda x: x.isdigit(), item.text)) # IP    .   /26 try: ipaddress.ip_interface('%s/%s'%(di['PLANT_IP'].strip(),26)) ip_chk = True except: ip_chk = False # ,   IP   if (di['PLANT_IP'] != '1.1.1.1') and ip_chk: #    if di['FORMAT'][-1] in ['D','A','S','H']: shop['inventory']['alias']=di['WERKS'] shop['inventory']['name']=di['NAME1'] shop['inventory']['poc_1_phone_a']=di['TEL_NUMBER'] shop['inventory']['location']=di['STREET'] #    if (di['FORMAT'][-1] in ['H']): shop['host']=f_type[di['FORMAT'][-1]]+di['WERKS'] shop['interfaces'][0]['ip']=str(ipaddress.ip_interface('%s/%s'%(di['PLANT_IP'].strip(),24)).network[1]) # ID     shop['templates'][0]['templateid']='29529' elif (di['FORMAT'][-1] in ['S']): ~omit~ #For D balance in proxies if int(n_proxy[-1]) % 2 == 0: shop['proxy_hostid'] = right_kidney else: shop['proxy_hostid'] = left_kidney # inventory   IP shop['inventory']['oob_ip']=shop['interfaces'][0]['ip'] #    format  region shop['groups']=[{'groupid':'9'}] shop['groups'].append({'groupid':format[di['FORMAT'][-1]]}) shop['groups'].append({'groupid':region[di['FORMAT'][:2]]}) #   if di['STATUS'] == ' ': shop['status']='0' else: shop['status']='1' #   T = dt.date(dt.now()).strftime("%d %B %Y") shop['inventory']['date_hw_decomm'] = T #      Zabbix hostid = existhost.exist(shop['host']) ip = shop['interfaces'][0]['ip'] #  - ! if hostid == 0 and shop['status'] == '0' and ping(ip): zapi.host.create(shop) reportdata['new'].append(di['WERKS']) #   - ! elif hostid != 0 and di['PLANT_IP'] != '1.1.1.1': #  HOSTID  shop['hostid']=hostid #     shop.pop('interfaces') zapi.host.update(shop) reportdata['update'].append(di['WERKS']) #     os.system('mv %s /mnt/ftp/old_data/'%(file)) except: reportdata['error'].append(di['WERKS']) report('   %s.   :%s'%(file, str(reportdata['error'])), 'SAP Sync Failed!') sys.exit() def checking(path): files = os.listdir(path) files.sort() reportdata ={'new':[], 'update':[], 'error':[]} for file in files: asynchronization(path+file, reportdata) if files != []: report(' %s  ! \n  %s . \n  sap:\n %s. \n  %s . \n  sap:\n %s'%(str(files), len(reportdata['new']), str(reportdata['new']), len(reportdata['update']), str(reportdata['update'])), 'SAP Sync Succeed!') if __name__ == "__main__": main(sys.argv[1:]) checking(opath)</span></span></code> </pre><br></div></div><br> è¯¥æ¨¡å—çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºZabbix APIè¿›è¡Œ<i>XML</i>è§£æå’Œ<font color="#008080"><abbr title="JavaScriptå¯¹è±¡ç¬¦å·">JSON</abbr></font>è½¬æ¢ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨Pythonå­—å…¸éå¸¸æ–¹ä¾¿ï¼Œå› ä¸º æ— éœ€é¢å¤–æ ¼å¼åŒ–å®ƒä»¬-ä½¿ç”¨<font color="#008080">zabbix.api</font>æ¨¡å—ï¼Œ <font color="#008080">æ‚¨</font>åªéœ€ä¸ºä»–æä¾›å…·æœ‰æ­£ç¡®ç»“æ„çš„å­—å…¸å³å¯ã€‚  <i>JSON</i>çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="json hljs">{ 'host': 'Hostname' 'groups': [...] 'interfaces': [{},{},{}] 'inventory': {} 'templates': [{},{},{}] 'inventory_mode': '<span class="hljs-number"><span class="hljs-number">1</span></span>' 'proxy_hostid': 'INT' 'status': '<span class="hljs-number"><span class="hljs-number">0</span></span>' } [] -  {} - </code> </pre><br> åœ¨æˆ‘ä»¬å…·æœ‰SAPä¸­IPåœ°å€çš„å­—æ®µä¸­ï¼Œå­˜å‚¨äº†æœåŠ¡å™¨çš„åœ°å€ï¼Œè€Œä¸æ˜¯è·¯ç”±å™¨çš„åœ°å€ï¼Œä½†æ˜¯ä½¿ç”¨<font color="#008080">ipaddress</font>æ¨¡å—ï¼Œæˆ‘ä»¬è€ƒè™‘äº†ç¬¬ä¸€ä¸ªå­ç½‘åœ°å€ï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œå®ƒå§‹ç»ˆæ˜¯è·¯ç”±å™¨ã€‚ <br><br><pre> <code class="python hljs">str(ipaddress.ip_interface(<span class="hljs-string"><span class="hljs-string">'%s/%s'</span></span>%(di[<span class="hljs-string"><span class="hljs-string">'PLANT_IP'</span></span>].strip(),<span class="hljs-number"><span class="hljs-number">24</span></span>)).network[<span class="hljs-number"><span class="hljs-number">1</span></span>])</code> </pre><br> ä¸Šæ¬¡æˆåŠŸæ›´æ–°çš„æ—¥æœŸè®°å½•åœ¨<i>åº“å­˜ä¸­</i> ï¼Œåœ¨æœ‰äº‰è®®çš„æƒ…å†µä¸‹ï¼Œè¿™æœ‰åŠ©äºäº†è§£ä¿¡æ¯åœ¨ç³»ç»Ÿä¸­çš„ç›¸å…³æ€§ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   T = dt.date(dt.now()).strftime("%d %B %Y") shop['inventory']['date_hw_decomm'] = T</span></span></code> </pre><br> ç„¶åï¼Œåœ¨åº“å­˜æ•°æ®ä¸­æŸ¥çœ‹æœ‰å…³æ›´æ–°æ—¥æœŸçš„ç»Ÿè®¡ä¿¡æ¯éå¸¸æ–¹ä¾¿ï¼š <br><br><img src="https://habrastorage.org/webt/ja/7j/kp/ja7jkpml-hjexniqyu-_5e2vrau.png"><br><br> æœ€é‡è¦çš„å­—æ®µ<b>STATUS</b> ï¼ˆ <i>â€œæ‰“å¼€â€</i> ï¼‰å·²æ·»åŠ å¹¶å¼€å§‹å—åˆ°ç›‘è§†ï¼Œè€Œå…¶ä»–ä»»ä½•çŠ¶æ€éƒ½å°†åœç”¨ä¸»æœºã€‚ æˆ‘ä»¬ä¸ä¼šä¸ºäº†ä¿ç•™å†å²æ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯è€Œåˆ é™¤å¯¹è±¡ã€‚ <br><br> æµ‹è¯•ä¹‹åï¼Œæˆ‘å¿…é¡»æ·»åŠ pingå‡½æ•°ï¼Œä»¥ä¾¿åœ¨åˆå§‹æ·»åŠ ä¹‹å‰æ£€æŸ¥ä¸»æœºæ˜¯å¦å¯è®¿é—®ï¼Œå› ä¸º åœ¨å®è·µä¸­ï¼Œ <i>â€œå¼€æ”¾â€</i>çŠ¶æ€å¼€å§‹å‡ºç°ï¼Œè™½ç„¶è¿˜ä¸æ˜¯å¾ˆå¼€æ”¾ï¼Œä½†æ˜¯å‡ ä¹æ˜¯å¼€æ”¾çš„ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ping</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ip)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> os.system(<span class="hljs-string"><span class="hljs-string">'ping -c 2 -W 1 %s &gt; /dev/null'</span></span>%ip) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre><br> ä»¥å‰ï¼ŒZabbix APIå…·æœ‰<b><font color="#008080">host.exist</font></b>å‡½æ•°ï¼Œä½†æ˜¯åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œå®ƒä¸<b><font color="#008080">host.get</font></b>ç»“åˆåœ¨ä¸€èµ·ã€‚ å¦‚æœè¯¥èŠ‚ç‚¹å­˜åœ¨ï¼Œé‚£ä¹ˆè¯·æ±‚å°†åœ¨zabbixæ•°æ®åº“ä¸­è¿”å›<i>hostid</i> ã€‚ å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™è¿”å›0ã€‚ä¸ºäº†è¿›è¡ŒéªŒè¯ï¼Œæˆ‘ç°åœ¨å¿…é¡»æ·»åŠ <font color="#008080">existhost</font> ï¼Œä½†å®é™…ä¸Šå®ƒæ˜¯<b><font color="#008080">host.get</font></b> ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å­˜åœ¨ä¸»æœº</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 import sys, getopt from zabbix.api import ZabbixAPI def main(argv): global aname try: opts, args = getopt.getopt(argv,"hn:",["name="]) except getopt.GetoptError: print('existhost.py -n &lt;name&gt;') sys.exit(2) for opt, arg in opts: if opt == '-h': print('existhost.py -n &lt;name&gt;') sys.exit() elif opt in ("-n", "--name"): aname = arg def exist(name): zapi = ZabbixAPI(url='http://z.noc.x5.ru/', user='user', password='pwd') hostget = zapi.host.get(search={'name':'%s'%name}, output='hostid') if hostget == []: return 0 else: return int(hostget[0]['hostid']) if __name__ == "__main__": main(sys.argv[1:]) print(exist(aname))</span></span></code> </pre><br></div></div><br> æœ€åï¼Œæˆ‘ä»¬æ”¶é›†æœ‰å…³å·²å®Œæˆå·¥ä½œçš„ä¿¡æ¯ï¼Œå°†å…¶æ·»åŠ åˆ°æ—¥å¿—ï¼ŒæŠ¥å‘Šä¸­ï¼Œå¹¶å°†å¤„ç†åçš„æ–‡ä»¶ç§»åŠ¨åˆ°OLDä¸­çš„å­˜å‚¨åº“ä¸­ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">report.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 # -*- coding: utf-8 -*- import smtplib, sys from email.mime.text import MIMEText def report(message, subject): me = 'zbx-scripts@x5.ru' you = 'mail@x5.ru' smtp_server = 'smtp.ru' msg = MIMEText(message) msg['Subject'] = subject msg['From'] = me msg['To'] = you s = smtplib.SMTP(smtp_server) s.sendmail(me, [you], msg.as_string()) s.quit() if __name__ == '__main__': report(sys.argv[2], sys.argv[1])</span></span></code> </pre><br></div></div><br> é€šå¸¸ï¼Œç›‘è§†åº“å·²å‡†å¤‡å°±ç»ªï¼Œåœ¨cronä¸­è¿è¡Œè„šæœ¬ä»¥è¿›è¡Œè‡ªåŠ¨è¿è¡Œï¼Œç„¶åå°†å…¶å¿˜è®°ã€‚ <br><br><img src="https://habrastorage.org/webt/il/hk/0r/ilhk0rph3lcm1azoquz00y_zck0.jpeg"><br><br><h2> å¦‚ä½•å¡«å†™åº“å­˜ </h2><br>  <i>æˆ‘ä»¬ä¸å†æ˜¯æˆ‘ä»¬ï¼Œæˆ‘ä»¬æ˜¯ç½‘ç»œäººã€‚</i> <br><br> ç¬¬äºŒé˜¶æ®µæ˜¯ç”¨å·¥ç¨‹å¸ˆéœ€è¦å¤„ç†çš„æ•°æ®å¡«å……å¯¹è±¡ã€‚ å¿…é¡»æŸ¥çœ‹æ‰€æœ‰æ•°æ®ä»¥è§£å†³ä¸€ä¸ªç³»ç»Ÿä¸­çš„äº‹ä»¶ï¼Œä»¥å…è·¨ç³»ç»Ÿè¿è¡Œï¼Œä»ä¸åŒæ¥æºæ”¶é›†ä¿¡æ¯ã€‚ å¹¶ä¸”ç”±äºä¸»è¦æŠ€æœ¯æ•°æ®éƒ½åœ¨ç›‘è§†ä¸­ï¼Œå› æ­¤æˆ‘ä»¬è¿˜å°†å…¶ä½™éƒ¨åˆ†å¼•å…¥ç›‘è§†ä¸­ã€‚ <br> ä¸ºäº†æ”¶é›†å’Œä¼ è¾“å¿…è¦çš„ä¿¡æ¯ï¼ŒZabbixç¼–å†™äº†stock.pyï¼Œè¯¥æ–‡ä»¶ä¸»è¦ç”¨äºä»è®¾å¤‡æ”¶é›†<font color="#008080"><abbr title="ç®€å•çš„ç½‘ç»œç®¡ç†åè®®">SNMP</abbr></font>æ•°æ®ï¼Œå¹¶åœ¨è¾ƒå°ç¨‹åº¦ä¸Šåˆ†æExcelæ–‡ä»¶ã€‚ <br><br> é—®é¢˜æ˜¯-ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å†…ç½®<i>é¡¹ç›®</i> ï¼Œå¹¶ä½¿ç”¨Zabbixæœ¬èº«çš„å·¥å…·å°†å…¶ç»“æœè¾“å…¥<i>åº“å­˜</i> ï¼Ÿ æœ‰ä¸‰ä¸ªç­”æ¡ˆï¼š <br><br><ol><li> åŠ¨ä½œåµŒå¥—ä¸è¶³ï¼Œä¾‹å¦‚ é€šå¸¸æœ‰å¿…è¦é€šè¿‡SNMPæå–å€¼å¹¶åœ¨ä¸‹ä¸€ä¸ªæŸ¥è¯¢ä¸­ä½¿ç”¨ç»“æœã€‚ </li><li> æ¯å¤©ä½¿ç”¨å¤–éƒ¨è„šæœ¬åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šè¿è¡Œä¸€æ¬¡æ•°æ®æ”¶é›†ä¸ä¼šåŠ è½½ä¸»ç›‘è§†æ´»åŠ¨ï¼Œå¹¶ä¸”æ²¡æœ‰é¡¹ç›®çš„æ—¶é—´æ’é˜Ÿ </li><li> å­˜åœ¨æ— æ³•é€šè¿‡SNMPæ”¶é›†çš„æ•°æ® </li></ol><br> ä¸€çº¿å’ŒäºŒçº¿å·¥ç¨‹å¸ˆæ— æ³•åšåˆ°çš„å…³äºæä¾›å•†çš„æ•°æ®å­˜å‚¨åœ¨å…±äº«ç½‘ç»œé©±åŠ¨å™¨ä¸Šçš„excelæ–‡ä»¶ä¸­ï¼Œå¹¶ç”±æ‰§è¡Œé€šä¿¡åˆåŒçš„ç»ç†æ›´æ–°ã€‚ ä¸æ–‡ä»¶çš„é›†æˆå¼•èµ·äº†æå¤§çš„æ€€ç–‘-excelè§£æï¼Œæ‰‹åŠ¨å¡«å†™ï¼Œè¿™å¯èƒ½ä¼šæ›´æ”¹ç»“æ„ï¼Œåç§°ï¼Œä½ç½®ç­‰ï¼Œå¾ˆå¯èƒ½ä¼šä¸æ–­æŠ›å‡ºé”™è¯¯ã€‚ ä½†æ˜¯ç”±äºç¼ºå°‘æ­¤ç±»æ•°æ®çš„å¦ä¸€ä¸ªç›¸å…³æ¥æºï¼Œæˆ‘ä¸å¾—ä¸ä½¿ç”¨å®ƒã€‚ ä¸ºäº†ä»¥æŸç§æ–¹å¼ä¿æŠ¤è‡ªå·±å…å—è„šæœ¬çš„ä¸æ–­ç¼–è¾‘ï¼Œæˆ‘ä»¬ä¸ç®¡ç†äººå‘˜å°±ç»“æ„å’Œæ­£ç¡®çš„å¡«å……è¾¾æˆäº†ä¸€è‡´ï¼Œå¹¶è§£é‡Šäº†å¦‚ä½•æ‰§è¡Œè‡ªåŠ¨å¸è½½ï¼Œå¹¶ä¸”è§‚å¯Ÿå½“å‰ç»“æ„éå¸¸é‡è¦ã€‚ å½“ç„¶ï¼Œå®é™…ä¸Šåœ¨å®è·µä¸­ä¼šå‘ç”Ÿé”™è¯¯ï¼Œä½†æ˜¯æˆ‘ä»¬è¿…é€Ÿå¯¹å…¶è¿›è¡Œäº†è·Ÿè¸ªï¼Œè¯…å’’å¹¶åŠ ä»¥çº æ­£ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">stock.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 # -*- coding: utf-8 -*- import sys, json, pysnmp, ipaddress, xlrd from datetime import datetime as dt from pysnmp.entity.rfc3413.oneliner import cmdgen def snmp(host, operation, *oid): generator = cmdgen.CommandGenerator() auth_data = cmdgen.UsmUserData('user', 'pwd', 'hash') transport = cmdgen.UdpTransportTarget((host, 161)) getAtt = getattr(generator, '%sCmd'%operation) rst = (errorIndication, errorStatus, errorIndex, varBinds) = getAtt(auth_data, transport, *oid) if not errorIndication is None or errorStatus is True: return "Error: %s %s %s %s" % rst else: if operation=='get': return varBinds elif operation=='next': result=[] for var in varBinds: result.append(var) return result def xlsdata(file, sap): rb = xlrd.open_workbook(file) sheet = rb.sheet_by_index(0) base = {} for i in range(0, sheet.nrows-1): sapnum = str(round(sheet.cell(i,4).value)) if isinstance(sheet.cell(i,4).value,float) else sheet.cell(i,4).value name = str(round(sheet.cell(i,8).value)) if isinstance(sheet.cell(i,8).value,float) else sheet.cell(i,8).value if sap.upper() == sapnum.upper(): base = { 'type' : (sheet.cell(i,2).value), 'serialno_a' : (sheet.cell(i,13).value), 'serialno_b' : (sheet.cell(i,20).value), 'tag' : ('2') if sheet.cell(i, 20).value != '' else ('1'), 'macaddress_a' : (sheet.cell(i, 15).value), 'macaddress_b' : (sheet.cell(i, 22).value) } base['date_hw_purchase'] = dt.date(dt.now()).strftime("%d %B %Y") return (base) def inventory(host, sap): BGPASBASE={} for line in open('/path/a.prokhorov/integration/BGP-AS-BASE.cfg'): if ':' in line: line = line.split(':') BGPASBASE[line[0]]='%s(%s)'%(line[1].rstrip(), line[0]) ### Get Data from Operator shop = xlsdata('/mnt/oprf/providers_base.xlsx', sap) shop['date_hw_expiry'] = 'Failed' ### Get SNMP data shop['host_router'] = 'None' shop['host_netmask'] = 'None' shop['host_networks'] = 'None' try: ### Get Networks from router networks = '' for ip,mask in snmp(host, 'next', 'iso.3.6.1.2.1.4.20.1.1', 'iso.3.6.1.2.1.4.20.1.3'): networks = networks+str(ipaddress.ip_interface(u'%s/%s'%(ip[1].prettyPrint(), mask[1].prettyPrint())))+'\n' shop['host_networks']=networks ### Get BGP information bgppeers, ispnames = '','' for peer,asbgp in snmp(host, 'next', 'iso.3.6.1.2.1.15.3.1.7', 'iso.3.6.1.2.1.15.3.1.9'): asbgp = asbgp[1].prettyPrint() bgppeers = bgppeers+peer[1].prettyPrint()+'\n' ispnames = ispnames+(BGPASBASE.get(asbgp) if BGPASBASE.get(asbgp)!=None else asbgp)+'\n' shop['host_router'] = bgppeers.strip()[:38] shop['host_netmask'] = ispnames.strip()[:38] ### Get Vendor name and Model type hardware = snmp(host, 'get', 'iso.3.6.1.2.1.47.1.1.1.1.13.1', 'iso.3.6.1.2.1.47.1.1.1.1.10.1', 'iso.3.6.1.2.1.47.1.1.1.1.12.1', 'iso.3.6.1.2.1.1.1.0', 'iso.3.6.1.2.1.47.1.1.1.1.7.1') if str(hardware[0][1]) == '0235A325': shop['model'] = hardware[4][1].prettyPrint() else: shop['model'] = hardware[0][1].prettyPrint() shop['os_short'] = hardware[1][1].prettyPrint() shop['vendor'] = hardware[2][1].prettyPrint() version = hardware[3][1].prettyPrint() os = version.split('\n')[0] shop['os_full'] = version[:250] shop['os'] = ''.join(os.split(',')[:2])[:60] ### Make indicators shop['date_hw_expiry'] = 'Success' shop['date_hw_install'] = dt.date(dt.now()).strftime("%d %B %Y") except: shop.pop('host_router') shop.pop('host_netmask') shop.pop('host_networks') return shop #return json.dumps(dict([('inventory',shop)]), sort_keys=True, indent=4) if __name__ == "__main__": print(inventory(sys.argv[1], sys.argv[2]))</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">BGP-AS-BASE.cfg</b> <div class="spoiler_text"> <code>3216:Beeline <br> 9002:Retn <br> 2854:Orange <br> ~omit~ <br> 8359:MTS <br></code> <br></div></div><br>  <i>BGP-AS-BASE.cfgæ–‡ä»¶</i>è¡¨ç¤º<i>AS</i>ç¼–å·ä¸æä¾›ç¨‹åºåç§°çš„å¯¹åº”å…³ç³»ã€‚ å¿…é¡»ç¡®å®šä¸<i>BGPä¸€èµ·</i>å®‰è£…çš„æä¾›ç¨‹åºï¼ˆåˆåŒä¸­çš„æ–‡ä»¶çªç„¶å‡ºç°é”™è¯¯ï¼‰ã€‚ æœªä½¿ç”¨å¤–éƒ¨åŸºåº§ï¼Œå› ä¸º æœ‰è®¸å¤šç§äºº<i>AS</i>ç¼–å·ã€‚ <br><br> å°±<font color="#008080">SNMPè€Œè¨€</font> ï¼š <br><br><ul><li> æˆ‘ä»¬åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­é€šè¿‡<i>OID</i> <i>1.3.6.1.2.1.4.20.1.1</i>å‘è·¯ç”±å™¨å­ç½‘æå‡ºè¯·æ±‚ï¼Œå¹¶é€šè¿‡<font color="#008080"><abbr title="å¯¹è±¡æ ‡è¯†ç¬¦">OID</abbr></font> <i>1.3.6.1.2.1.4.20.1.3å‘</i>å­ç½‘æ©ç æå‡ºè¯·æ±‚ã€‚ æˆ‘ä»¬å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå°†å…¶è½¬æ¢ä¸º<i>xxxx / xx</i>å¹¶å°†å…¶å†™å…¥<i>host_networks</i>å•å…ƒä¸­ã€‚ </li><li> æˆ‘ä»¬åœ¨<i>BGP</i>å¯¹ç­‰ä½“çš„IPåœ°å€åŠå…¶<i>ASN</i>ä¸Šè¯·æ±‚æ•°æ®ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºçš„æ•°æ®åº“ä¸­æŒ‰ç¼–å·æŸ¥æ‰¾æä¾›è€…åç§°ã€‚ æˆ‘ä»¬å°†å®ƒä»¬å†™åœ¨<i>host_router</i>å’Œ<i>host_netmaskå­—æ®µä¸­</i> ã€‚ é‡è¦çš„æ˜¯ç«‹å³é™åˆ¶ä¸º38ä¸ªå­—ç¬¦ï¼Œå› ä¸º è¿™äº›å­—æ®µä¸æ”¯æŒæ›´å¤šã€‚ æˆ‘ä»¬æ•°æ®åº“ä¸­çš„å­—æ®µåç§°å¹¶ä¸æ€»æ˜¯ä¸å…¶å­˜å‚¨çš„æ•°æ®ä¸€è‡´ï¼Œå› ä¸º ä½¿ç”¨Zabbixæ•°æ®åº“ä¸­çš„ç°æœ‰å­—æ®µï¼Œä»¥å…åœ¨è¡¨ä¸­åˆ›å»ºæ–°å­—æ®µã€‚ æ­£ç¡®çš„å­—æ®µåç§°å·²åœ¨WEBä¸­æ›´æ­£ï¼Œæ²¡æœ‰æ··æ·†ã€‚ </li><li> æˆ‘ä»¬ä¸Šè½½æœ‰å…³ä¾›åº”å•†ï¼Œæ¨¡å‹å’Œè½¯ä»¶è®¾å¤‡çš„æ•°æ®ã€‚  Parsimï¼Œå†™å…¥å˜é‡ã€‚ ä¸ç¼–å†™ç¡¬ä»¶æ¨¡å‹ç›¸å…³çš„è®¾è®¡æ˜¯ç”±äºä»¥ä¸‹äº‹å®ï¼šå¯¹äºæŸäº›æ¨¡å‹ï¼Œ <i>Cisco</i>ç”¨ä¸åŒçš„<font color="#008080">OID</font>ç¼–å†™<i>äº†</i>åç§°ï¼ˆé€šå¸¸æ˜¯é’ˆå¯¹æœºç®±ï¼‰ï¼Œå› æ­¤æˆ‘å¿…é¡»è¿›è¡Œå…¶ä»–æ•°æ®æ£€æŸ¥ã€‚ </li></ul><br> ä¸SNMPç›¸å…³çš„æ•´ä¸ªå—éƒ½åŒ…å«åœ¨<i>try-exceptä¸­</i> ï¼Œå› æ­¤ï¼Œå¦‚æœè®¾å¤‡ä¸Šæ²¡æœ‰SNMPï¼Œåˆ™è„šæœ¬ä¸ä¼šä¸¢å¤±ï¼Œå¹¶ä¸”è‡³å°‘ç”±æä¾›å•†ä»Excelä¸­è·å–æ•°æ®ã€‚ ä¸ºäº†äº†è§£è„šæœ¬çš„å“ªä¸ªéƒ¨åˆ†å·²æ‰§è¡Œè€Œå“ªäº›éƒ¨åˆ†æ²¡æœ‰æ‰§è¡Œï¼Œæˆ‘ä»¬åœ¨<i>date_hw_expiry</i>å­—æ®µä¸­<i>å†™ä¸‹</i> SNMPå—çš„æˆåŠŸ<i>ä¿¡æ¯</i> ï¼Œå¹¶å†™ä¸‹æœ€åä¸€æ¬¡å¯ä»¥åˆ é™¤SNMPä¸Šæ‰€æœ‰æ•°æ®çš„æ—¥æœŸä»¥åŠæœ€åä¸€æ¬¡å¯ä»¥åœ¨Excelæ–‡ä»¶ä¸­æ‰¾åˆ°æ•°æ®çš„æ—¥æœŸã€‚ <br><img src="https://habrastorage.org/webt/cc/he/en/ccheenqcce-qkrwbxcerarkji2e.png"><br><br> æ‰€æœ‰è¿™äº›éƒ½ä»¥å‡†å¤‡å¥½Zabbixçš„<i>JSON</i>å½¢å¼è¿”å›ã€‚ <br><br> æ¯å¤©ä¸€æ¬¡å¼€å§‹æ›´æ–°æ‰€æœ‰æ¸…å•æ•°æ®ï¼Œå¸è½½æ‰€æœ‰ä¸»æœºå¹¶ä¸ºæ¯ä¸ªå¯¹è±¡å¯åŠ¨<b><i>æ¸…å•</i></b> .pyã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">mp-update.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 # -*- coding: utf-8 -*- from multiprocessing import Pool import time from zabbix.api import ZabbixAPI from inventory import inventory from report import report def updating(shop): try: shop['inventory'] = inventory(shop['interfaces'][0]['ip'], shop['host'][-4:]) shop.pop('interfaces') shop['inventory_mode'] = '1' shop.pop('host') print (shop['hostid']) return zapi.host.update(shop) except: print("&gt;&gt;&gt;",shop['hostid']) with open ('/home/local/integration/error.txt', 'a') as err: err.write(shop['hostid']) err.write("\n") if __name__ =='__main__': t = time.time() zapi = ZabbixAPI(url='http://z.noc.x5.ru/', user='user', password='pwd') shopbase = zapi.host.get(output=['host', 'hostid'], groupids= ['12', '13', '14'], monitored="1", selectInterfaces=['ip']) pool = Pool(processes=10) p=[0 for x in range(0,len(shopbase))] for i in range(0, len(shopbase), 10): print ("Index:", i,"\n",shopbase[i],"\n") pool.map(updating,shopbase[i:i+10]) pool.close() pool.join() print(time.time()-t) report('    Zabbix.', 'Inventory updating succeed')</span></span></code> </pre><br></div></div><br> ä½¿ç”¨äº†<font color="#008080">å¤šå¤„ç†</font> ï¼ˆä¸€ä¸ªä¾‹å­æ˜¯ä»äº’è”ç½‘çš„å¹¿é˜”é¢†åŸŸä¸­æå–çš„ï¼‰ã€‚ è¦è¿›è¡Œæœç´¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸»æœºåä¸­çš„<i>SAP ID</i> ã€‚ ç»“æœè¾“å‡ºåœ¨Zabbixä¸­å†™å…¥update'ohmã€‚ <br><br><h3> æ€»ç»“ </h3><br> å¯¹äºæ‰€æœ‰å†…ç½®æœºåˆ¶çš„é›†æˆï¼Œè‡ªåŠ¨æ›´æ–°å’Œæ›´æ–°çš„å®ç°ï¼ŒZabbix APIç»°ç»°æœ‰ä½™ã€‚ ä½¿ç”¨çš„ä¸»è¦åŠŸèƒ½æ˜¯<i>host.get</i> ï¼Œ <i>host.create</i>å’Œ<i>host.update</i> ï¼Œå®ƒä»¬ä¸€èµ·ä½¿æ‚¨å¯ä»¥å®Œå…¨æ§åˆ¶ç›‘è§†å¯¹è±¡æ•°æ®åº“çš„åˆ›å»ºå’Œæ›´æ–°ã€‚ è¿™äº›åŠŸèƒ½çš„è¾“å…¥æ•°æ®å¯ä»¥ä»ä»»ä½•å¯ç”¨çš„ç³»ç»Ÿå’Œæºä¸­æäº¤ã€‚ <br><br> å¸®åŠ©æˆ‘ä»¬å®Œæˆæ­¤ä»»åŠ¡çš„ä¸»è¦pythonæ¨¡å—ï¼š <i>pysnmp</i> ï¼Œ <i>xlrd</i> ï¼Œ <i>zabbix.api</i> ï¼Œ <i>xml</i> ï¼Œ <i>ipaddress</i> ï¼Œ <i>json</i> ã€‚ <br>  <i><font color="#008080">xlrd-</font></i>è§£æExcelã€‚ <br>  <i><font color="#008080">xml</font></i> -XMLè§£æã€‚ <br>  <i><font color="#008080">pysnmp-</font></i>ä»è®¾å¤‡æå–SNMPæ•°æ®ã€‚ <br><br>  SNMPäº¤äº’æ¯”SSHæ›´å®¹æ˜“ï¼Œè‡³å°‘æ˜¯å› ä¸ºåœ¨å®è·µä¸­ï¼Œç¡¬ä»¶å¯¹SNMPçš„å“åº”æ¯”å¯¹SSHçš„å“åº”è¦å¿«ï¼Œè§£æSNMPå“åº”å®é™…ä¸Šæ˜¯ä¸å¿…è¦çš„ï¼Œå°½ç®¡ä¸åŒä¾›åº”å•†çš„CLIå¾€å¾€å½¼æ­¤éå¸¸ä¸åŒï¼Œå¹¶ä¸”ç»“è®ºæ˜¯ç›¸åŒçš„å³ä½¿åŒä¸€ä¾›åº”å•†çš„ä¸åŒå‹å·ï¼Œå›¢é˜Ÿä¹Ÿå¯èƒ½æœ‰æ‰€ä¸åŒã€‚ <br><br> ä¸»è¦åº”ç”¨çš„<i>OID</i> ï¼š <br>  <i>iso.3.6.1.2.1.4.20.1.1-</i>æ‰€æœ‰è·¯ç”±å™¨æ¥å£çš„åœ°å€ <br>  <i>iso.3.6.1.2.1.4.20.1.3-</i>æ‰€æœ‰è·¯ç”±å™¨æ¥å£çš„å­ç½‘æ©ç  <br>  <i>iso.3.6.1.2.1.15.3.1.7-</i>è·¯ç”±å™¨çš„æ‰€æœ‰BGPå¯¹ç­‰ä½“ <br>  <i>iso.3.6.1.2.1.15.3.1.9-</i>è·¯ç”±å™¨çš„æ‰€æœ‰BGPå¯¹ç­‰ä½“çš„AS <br>  <i>iso.3.6.1.2.1.47.1.1.1.1.13.1-</i>æ¨¡å‹ <br>  <i>iso.3.6.1.2.1.47.1.1.1.1.10.1-</i>è½¯ä»¶çš„ç®€çŸ­ç‰ˆæœ¬ <br>  <i>iso.3.6.1.2.1.47.1.1.1.1.1.12.1-</i>ä¾›åº”å•† <br>  <i>iso.3.6.1.2.1.1.1.0-</i>è¯¦ç»†çš„è½¯ä»¶ç‰ˆæœ¬ <br>  <i>iso.3.6.1.2.1.47.1.1.1.1.7.1-</i>å‹å·ï¼Œåº•ç›˜ç±»å‹ <br><br> å¿…é¡»æ·»åŠ <i>ä»ªè¡¨æ¿</i>ä¸€ç‚¹ï¼Œä»¥åˆ†é…é…ç”µç½‘ç»œä¸Šçš„é—®é¢˜ï¼Œå¹¶ä¸”ä¸è¦åœ¨å †ä¸­å¹²æ‰°å®ƒä»¬ã€‚ è¿˜è¦æ·»åŠ å‡ ä¸ªå­—æ®µï¼Œä¾‹å¦‚ipï¼Œæä¾›ç¨‹åºåç§°å’Œåœ°å€ï¼Œä»¥ä¾¿åœ¨å‘ç”Ÿå¤§è§„æ¨¡äº‹æ•…çš„æƒ…å†µä¸‹ï¼Œåªè¦å°†æä¾›ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æ•°æ®ç«‹å³ä»æµè§ˆå™¨å¤åˆ¶ç²˜è´´åˆ°æ¶ˆæ¯ä¸­çš„æ‰€æœ‰æœ‰é—®é¢˜çš„å¯¹è±¡å°±è¶³å¤Ÿäº†ã€‚ <br><img src="https://habrastorage.org/webt/ea/m3/zo/eam3zojwyhottbk5offhtkltg3o.png"><br><br>  <i>â€œ Workviewâ€</i>æ˜¯<i>å•ç‹¬</i>ç¼–å†™çš„ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ‰€æ”¶é›†çš„æ‰€æœ‰ä¿¡æ¯ä»¥åŠä¸ºæ­¤å¯¹è±¡æ”¶é›†çš„å›¾å½¢ã€‚ <br><br><img src="https://habrastorage.org/webt/m1/m-/jp/m1m-jpml-eypxjlgqlsoltn7in4.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438754/">https://habr.com/ru/post/zh-CN438754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438740/index.html">ä½¿ç”¨HashiCorp Vaultç®¡ç†ç§˜å¯†</a></li>
<li><a href="../zh-CN438746/index.html">å…³äºç”Ÿç‰©è¿›åŒ–çš„ç‰©ç†åŸç†ã€‚ å»¶ç»­æ€§</a></li>
<li><a href="../zh-CN438748/index.html">åŸºç¡€æ¶æ„å³ä»£ç ï¼Œæˆ‘ä»¬å–å¾—äº†æˆåŠŸï¼ˆKirill Vetchinkinï¼ŒTYMEï¼‰</a></li>
<li><a href="../zh-CN438750/index.html">æ³‰åŸæ–‡æ˜ï¼Œ4/5</a></li>
<li><a href="../zh-CN438752/index.html">ç›´æ¥åœ¨é“¶è¡Œæ ¸ç®—ï¼šå¦‚ä½•ä½¿ä¸ªä½“ä¼ä¸šå®¶é«˜å…´</a></li>
<li><a href="../zh-CN438756/index.html">ç¬¬å…­æ¬¡é“¬æ£€æŸ¥ï¼Œåè®°</a></li>
<li><a href="../zh-CN438758/index.html">Googleä¸ºä»€ä¹ˆæ›´æ”¹æµè§ˆå™¨ä¸­çš„æ ‡å‡†URLç•Œé¢</a></li>
<li><a href="../zh-CN438762/index.html">DBXï¼šå°è¯•æ‘†è„±ç¼–è¯‘MySQLæŸ¥è¯¢</a></li>
<li><a href="../zh-CN438764/index.html">ç¬¬å…­æ¬¡é“¬æµ‹è¯•ï¼Œåè®°</a></li>
<li><a href="../zh-CN438766/index.html">ç»†èƒå¤–DNAä½œä¸ºè¡°è€å’Œå„ç§ç—…ç†çš„ç”Ÿç‰©æ ‡å¿—</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>