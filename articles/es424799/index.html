<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏼 🤹🏼 🤲🏽 Análisis bidireccional para widgets de iframe de afiliados con el Administrador de etiquetas de Google 🤘🏿 🔺 📄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los widgets de hoy en día son una parte integral de muchos portales grandes, ya que le permiten usar diseños de asociación complejos al tiempo que evi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Análisis bidireccional para widgets de iframe de afiliados con el Administrador de etiquetas de Google</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424799/"> Los widgets de hoy en día son una parte integral de muchos portales grandes, ya que le permiten usar diseños de asociación complejos al tiempo que evitan largos procedimientos de implementación.  Al mismo tiempo, el análisis web de widgets es interesante para todas las partes, pero en el caso de iFrame, surgen dificultades para transferir el 100% de los datos a los participantes de la asociación.  ¿Cuáles son estas dificultades y cómo logramos superarlas? Me gustaría decir en este artículo.  En primer lugar, será interesante para todos los involucrados en el desarrollo e implementación de widgets en iFrame, así como para los analistas atraídos. <br><a name="habracut"></a><br>  Primero, un poco de historia.  Estamos desarrollando nuestras propias soluciones para la automatización en el campo del transporte de pasajeros, así como productos para usar en sitios asociados.  Uno de ellos fue el proyecto de reserva automatizada de VIP y salas de negocios en los aeropuertos del mundo y en Rusia, con el objetivo de satisfacer las necesidades de clientes comerciales y premium de varias aerolíneas.  Una base de datos única de servicios temáticos en varios aeropuertos es de interés principalmente para compañías asociadas con viajes aéreos de pasajeros, agencias de viajes en línea, así como agencias de viajes con sitios en Internet.  Se creó un widget "VIP-hall" para dichas empresas, que permite a los usuarios de cualquier sitio asociado acceder a esta base de datos. <br><br>  El widget se instala de forma estándar a través de iFrame, el socio solo necesita colocar el código en su sitio web y configurar los parámetros de apariencia de acuerdo con el concepto de diseño general.  Como resultado, un módulo para seleccionar y reservar salas VIP en el aeropuerto de interés aparece en el sitio con acceso a servicios premium del aeropuerto, como un servicio de traslado (traslado individual desde la sala al avión), una reunión en la sala con un cartel, acompañar a un empleado y acceso al estacionamiento para VIP clientes  El proceso de reserva se lleva a cabo en unos simples pasos, dentro de los cuales el usuario puede variar el contenido del pedido (Fig. 1). <br><br><img src="https://i.imgur.com/hGuf48V.gif" alt="imagen"><br>  <i>Figura 1 - La apariencia del widget en el sitio</i> <br><br>  Dada la variabilidad de los datos de relleno, por supuesto, surge la pregunta de seguir este proceso desde el punto de vista de la analítica.  Además, el análisis web es interesante tanto para el <b>propietario del</b> widget como para el <b>socio</b> que lo configura, por lo que durante el proceso de desarrollo apareció la tarea de rastrear eventos dentro del widget y enviarlos simultáneamente en dos direcciones: <br><br>  A. Desde todos los sitios en los que está instalado el widget, hasta los análisis web del propietario (desarrollador). <br>  B. Desde el sitio en el que está instalado un widget en particular, hasta la analítica web del socio. <br><br>  <b>¿Cuál es la dificultad aquí?</b>  Básicamente, el socio toma un único código de widget, que no es personalizable para un sitio de socio específico, pero al mismo tiempo quiere ver información en el análisis solo en su widget.  La segunda dificultad es que el desarrollador (propietario) del widget debe recibir datos de todos los sitios de socios a la vez en un contador, lo que va en contra del deseo del socio de ver solo su propia información.  Al final, solo necesita diferenciar entre los datos que el socio debe ver y los que verá el propietario.  El problema se resolvió mediante el <b>Administrador de etiquetas de Google</b> (en adelante, GTM). <br><br>  Esta herramienta es ampliamente utilizada para el análisis web y la gestión de etiquetas en los sitios, no tiene sentido describir en detalle el principio de su funcionamiento, para comprenderlo es suficiente para familiarizarse con el concepto de GTM <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de otros artículos</a> .  En este caso, es importante comprender que Google Tag Manager (Fig. 2) le permite consolidar los datos del sitio dentro de sus propios contenedores y distribuirlos a varios contadores de análisis web utilizando las reglas especificadas. <br><br><img src="https://i.imgur.com/SnMpud3.gif" alt="imagen"><br>  <i>Figura 2: la ventana "Etiquetas" de Google Tag Manager con etiquetas ya configuradas para el widget</i> <br><br>  Para comenzar, describiremos el algoritmo para resolver este problema, a fin de comprender de inmediato en qué dirección fuimos para lograr el resultado.  Entonces <br><br><ol><li>  El socio, como el propietario, quiere rastrear el widget de una o dos formas a la vez, usando Yandex.Metrica o Google Analytics. </li><li>  Una solución satisfactoria debe pasar los datos a 4 contadores: el contador de métricas del propietario, el contador de Google Analytics del propietario, el contador de métricas del socio y el contador de Google Analytics del socio. </li><li>  Se instala un único contenedor de Google Tag Manager dentro del widget, que recopilará todos los datos y los distribuirá para que cada participante reciba solo la información que necesita. </li><li>  Los identificadores de los contadores del propietario se configuran de manera predeterminada, los identificadores del socio se les deben indicar al momento de generar el código del widget en la oficina del socio para su posterior instalación en el sitio. </li><li>  Dado que la oficina del socio ya está configurada para el socio, los identificadores se pueden configurar y arrojar al widget para que Tag Manager los use. </li><li>  Dentro de GTM, los identificadores se sustituyen en los códigos para desencadenar eventos objetivo, así como la distribución de la transmisión de datos por parte del propietario y los contadores asociados. </li><li>  En este caso, GTM envía todos los datos recopilados a los contadores del propietario, y los datos en el sitio del socio, solo a los contadores del socio, porque  al sustituir identificadores, solo se rastrea el sitio especificado por el socio. </li></ol><br>  Para facilitar la comprensión, damos un diagrama de flujo del proceso (Fig. 3): <br><br><img src="https://i.imgur.com/chOfcFZ.jpg" alt="imagen"><br>  <i>Figura 3 - Diagrama del proceso de transferencia de datos</i> <br><br>  Para comenzar, determinaremos que, además del código del Administrador de etiquetas de Google, el sitio también contiene códigos de contador Yandex.Metrica y Google Analytics generados automáticamente.  En ellos, al generar código para el sitio, se reenvían los identificadores de contador establecidos por el socio. <br><br>  Estos códigos no se pueden configurar en el widget, ya que las capacidades de GTM le permiten generarlos automáticamente en el sitio como etiquetas apropiadas (tipo - HTML personalizado - Fig. 4), pero en este caso, fue necesario escribir en el código del widget; algunos eventos en el sitio requieren para que el contador se instale inmediatamente dentro del widget.  Básicamente se trata de eventos de carga, la aparición de preroll.  Si no tiene este tipo de evento, puede generar el código de contador a través de GTM: <br><br><img src="https://i.imgur.com/OlldDXp.gif" alt="imagen"><br>  <i>Figura 4: un ejemplo de transferencia del código métrico al sitio a través de GTM</i> <br><br>  Para transferir datos a dos contadores a la vez (socio y propietario), debe establecer no dos códigos métricos o analíticos diferentes, sino crear un <b>código doble especial</b> .  Al momento de escribir, los códigos correctos se ven así (Fig. 5): <br><br><img src="https://i.imgur.com/yf9ROGE.gif" alt="imagen"><br>  <i>Figura 5 - El uso correcto de los códigos duales Metric y GA</i> <br><br>  A continuación, debe pasar el identificador especificado por el socio al código del contador.  La dificultad aquí es que el código del widget se genera automáticamente para todos los sitios, mientras que los identificadores ya están configurados en una oficina afiliada separada.  Para el reenvío correcto, el programador implementó la siguiente solución: <br><br>  Cuando se inicializa el widget, se crea un iFrame, en cuyos parámetros se pasan los identificadores de los contadores del socio (los contadores se pasan al src iFrame, después de lo cual se analizan en el widget desde la ubicación).  iFrame abre la aplicación de widgets y el enlace del ciclo de vida creado por el widget (SPA) procesa los parámetros de entrada de los números de contador antes del montaje, y los números (identificadores) se almacenan en el almacenamiento local. <br><br>  La siguiente construcción se utiliza para colocar el código de Google Analytics en index.html: <br><br><pre><code class="javascript hljs">&lt;script&gt; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer || []; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gtag</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ dataLayer.push(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); } gtag(<span class="hljs-string"><span class="hljs-string">'js'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>()); gtag(<span class="hljs-string"><span class="hljs-string">'config'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-15930803-13'</span></span>); gtag(<span class="hljs-string"><span class="hljs-string">'config'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'partnerGA'</span></span>)] || <span class="hljs-string"><span class="hljs-string">'UA-15930803-14'</span></span>); <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Las secuencias de comandos con la variable src se insertan dinámicamente cuando se inicializan los contadores: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>) script.setAttribute(<span class="hljs-string"><span class="hljs-string">'src'</span></span>, <span class="hljs-string"><span class="hljs-string">`https://www.googletagmanager.com/gtag/js?id=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ga || </span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'UA-15930803-14'</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">`</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.insertBefore(script, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.firstChild)</code> </pre> <br>  Aquí, UA-15930803-14 es el contador "contador" del propietario, que se utiliza si el socio no establece el contador.  Esta situación puede ocurrir si el socio no especificó los identificadores de los contadores en general, o si solo se especificó un identificador; siempre debe haber un código de reemplazo para que el sitio no encuentre errores de JavaScript asociados con la ausencia de un identificador para la operación correcta del código de transmisión de cualquier evento.  UA-15930803-13 en este caso es el identificador principal del Propietario, al que llegan los datos en cualquier caso y desde cualquier sitio. <br><br>  De manera similar a GA, se genera el código Yandex.Metrica, que utiliza el identificador especificado de la métrica del Propietario, el identificador sustituto del contador del propietario de forma predeterminada y el diseño para transmitir el identificador del socio.  El código se genera de acuerdo con el esquema que se muestra en la Fig. 5 utilizando las estructuras del ejemplo anterior. <br><br>  Después de los códigos de contador, debe reenviar los identificadores establecidos por el socio a los identificadores del Administrador de etiquetas de Google.  Dentro del contenedor, ya se utilizarán como variables internas, cuyos valores se pueden suministrar a los eventos generados. <br><br>  Para GTM, la técnica más utilizada son las variables de nivel de datos (dataLayer).  La capa de datos es una variable de JavaScript cuya inicialización se describe automáticamente dentro del contenedor del Administrador de etiquetas de Google.  Al usarlo, puede transferir eventos que ocurren en el sitio web como eventos, o establecer sus propias variables para GTM.  Esto se hace usando la construcción <br><br><pre> <code class="javascript hljs">dataLayer.push(<span class="hljs-string"><span class="hljs-string">'_'</span></span>: <span class="hljs-string"><span class="hljs-string">'_'</span></span>);</code> </pre> <br>  Se activa después del anuncio del código GTM en el sitio.  Sin embargo, en nuestro caso, la variable de nivel de datos no funcionó, quizás el problema sea la dificultad de trabajar específicamente con el iframe.  Si configura la construcción push () automáticamente, el contenedor no recibe variables y, en este caso, queríamos tal implementación de la tarea.  Si intenta establecer la variable de nivel de datos manualmente (por ejemplo, con cualquier clic en el sitio), el reenvío de la variable pasa normalmente. <br><br>  Para no perder tiempo analizando el proceso, utilizamos una solución alternativa: crear variables globales de JavaScript a través de <b>localStorage</b> . <br><br>  La propiedad localStorage le permite almacenar variables con los valores dados sin estar vinculado a la página abierta del sitio, y los datos dentro de este repositorio no se pueden eliminar simplemente.  En consecuencia, los identificadores de contador de socios se enviaron utilizando los siguientes diseños: <br><br><pre> <code class="javascript hljs">localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'partnerMetrika1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>); localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'partnerMetrika2'</span></span>, <span class="hljs-string"><span class="hljs-string">'yaCounter'</span></span>); localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'partnerGA'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA--'</span></span>);</code> </pre> <br>  Aquí, la primera construcción transmite el número métrico del socio en sí, la segunda construcción transmite el valor colectivo yaCounter para la conveniencia de crear la etiqueta "Evento" en el Administrador de etiquetas de Google (más sobre esto más adelante), y el tercero, el identificador de Google Analytics. <br><br>  Esto completa la transferencia de datos y configura el propio GTM. <br><br>  Primero, decidamos cómo funciona el Administrador de etiquetas de Google.  Presenta 3 niveles de interacción: <br><br>  <b>Etiqueta</b> .  Esto es parte del código que se puede alojar en un sitio con GTM instalado y se puede ejecutar como cualquier otro código, cambiando el contenido del sitio o transfiriendo datos a contadores de análisis web. <br><br>  La etiqueta se activa si se cumple una condición en el sitio. <br><br>  <b>Disparador</b>  Esta es en realidad una condición, cuyo cumplimiento hace que la etiqueta se active.  Esto puede ser un evento en un sitio, un cambio en el valor de las variables o una acción estándar, como un clic o una visita a la página. <br><br>  <b>Variable</b>  Contiene algunos valores que se pueden transmitir de varias maneras y se utiliza como proveedor de datos para etiquetas o un marcador de condición. <br><br>  El contenido de las variables activa el activador, y el activador activa a su vez la etiqueta correspondiente.  Los identificadores de los contadores afiliados se configuran exactamente como variables, a partir de esto vale la pena comenzar la formación de datos en el contenedor GTM. <br><br>  Creamos tres variables principales del tipo "Código JavaScript nativo" (Fig. 6): <br><br><img src="https://i.imgur.com/qWZwXhw.gif" alt="imagen"><br>  <i>Figura 6: un ejemplo de una variable que toma el identificador de métrica de afiliado</i> <br><br>  Aquí el valor de la variable = el valor que tomamos de localStorage. <br><br>  Ahora, si GTM accede a la variable, recibirá su valor: el identificador de la métrica asociada.  Del mismo modo, creamos variables para el número métrico afiliado y el identificador de Google Analytics asociado. <br><br>  ¿Para qué se usan estas variables?  Resuelven el problema de enviar datos sobre la activación de eventos en el sitio a contadores afiliados.  Google Tag Manager tiene un procedimiento estándar para transferir objetivos a Google Analytics, donde puede usar el valor de una variable como identificador de contador.  Y para la métrica, se usa una etiqueta en forma de código HTML personalizado que contiene la métrica estándar de JavaScript: <br><br><pre> <code class="javascript hljs">yaCounterXXXXXX.reachGoal(<span class="hljs-string"><span class="hljs-string">'TARGET_NAME'</span></span>);</code> </pre> <br>  Aquí TARGET_NAME es el nombre interno del evento objetivo para la métrica (dichos objetivos se crean en la configuración del contador a través del tipo "evento JavaScript"), y  es el número del contador. <br><br>  Por lo tanto, creamos etiquetas correspondientes para diferentes tipos de contadores. <br><br>  <b>Para Google Analytics:</b> <br><br>  El tipo de etiqueta es "Universal Analytics", el identificador de seguimiento es de nuestra variable. <br><br><img src="https://i.imgur.com/WssMHHk.gif" alt="imagen"><br>  <i>Figura 7: un ejemplo de configuración de una etiqueta que pasa datos a Google Analytics.</i> <br><br>  Aquí, Categoría y Acción son los valores que Google Analytics debe capturar como parámetros para activar el objetivo.  El ID de seguimiento es una variable definida previamente que toma el identificador de socio de localStorage. <br><br>  <b>Para Yandex.Metrica:</b> <br><br>  El tipo de etiqueta es "HTML personalizado" utilizando construcciones de JavaScript. <br><br><img src="https://i.imgur.com/vhg9L0m.gif" alt="imagen"><br>  <i>Figura 8 - Un ejemplo de configuración de una etiqueta que transfiere datos a Yandex.Metrica</i> <br><br>  Aquí {{PartnerMetrikaCounter}} es la declaración interna de la variable que toma el identificador Métrico asociado de localStorage.  Al usar el objeto de ventana, sustituimos el valor de la variable en el código ejecutable, y en la salida obtenemos yaCounterXXXXXXXX.reachGoal ('widget_loading'); donde widget_loading es el valor que Metric captura como parámetro de respuesta del objetivo. <br><br>  Solo queda establecer los desencadenantes para desencadenar las etiquetas correspondientes.  Los desencadenantes en nuestro caso son, por ejemplo: <br><br><ul><li>  Eventos para la carga exitosa del widget; </li><li>  Eventos de finalización exitosa o no exitosa de un paso en un widget; </li><li>  Relleno en ciertos campos; </li><li>  Selección de condiciones A o B dentro del widget; </li><li>  Interacción con formularios, botones y enlaces. </li></ul><br>  Además, en la configuración de los contadores de Metrics y Google Analytics, solo queda crear los objetivos correspondientes: <br><br><img src="https://i.imgur.com/Tj70YS0.gif" alt="imagen"><br>  <i>Figura 9 - Un ejemplo de establecer una meta en Yandex.Metrica</i> <br><br><img src="https://i.imgur.com/HstDw1o.gif" alt="imagen"><br>  <i>Figura 10 - Un ejemplo de establecer una meta en Google Analytics</i> <br><br>  El problema está resuelto.  Los códigos de contador doble sustituyen los valores establecidos por ellos para los identificadores de Métrica y Analítica del socio, y los valores de los identificadores de propietario permanecen sin cambios.  Al mismo tiempo, Google Tag Manager reenvía la respuesta de los objetivos correspondientes a los contadores del socio solo si recibe de las variables exactamente los identificadores que el socio específico especificó en su sitio.  Paralelamente, GTM envía al propietario todos los eventos de destino desde todos los sitios. <br><br>  Si el socio no especificó uno o ambos identificadores, se utilizan los valores predeterminados: identificadores de contadores de prueba, establecidos por el propietario de antemano. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424799/">https://habr.com/ru/post/es424799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424787/index.html">Entrevista con Aaron Patterson, presidente de la Conferencia RubyRussia 2018</a></li>
<li><a href="../es424789/index.html">Cómo implementar una aplicación Ruby on Rails con HAProxy Ingress, unicornio / puma y sockets web</a></li>
<li><a href="../es424791/index.html">Expandir las capacidades de red de un relé programable usando WI-FI</a></li>
<li><a href="../es424793/index.html">Cómo imprimir un motor eléctrico</a></li>
<li><a href="../es424795/index.html">¿Qué tan grande puede ser un dron con energía solar?</a></li>
<li><a href="../es424801/index.html">Zeppelin OS: otro paso hacia contratos inteligentes seguros</a></li>
<li><a href="../es424803/index.html">El hacker taiwanés estaba a punto de hackear la página de Facebook de Mark Zuckerberg en línea, pero luego abandonó sus amenazas.</a></li>
<li><a href="../es424805/index.html">Cómo escribí un diploma en LaTeX con GitHub, Docker y TravisCI</a></li>
<li><a href="../es424807/index.html">EOIP entre DD-WRT y Keenetic Giga 2 para combinar dos apartamentos en una red o un HDD en dos apartamentos</a></li>
<li><a href="../es424809/index.html">ADN Mecanismos para almacenar y procesar información. Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>