<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👧 🗾 📕 Materi dari pertemuan #RuPostgres - video, presentasi, analisis kuis, dan laporan foto 🍼 👾 🛩️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada 15 September, sebuah pertemuan diadakan di Avito, di mana kami berbicara tentang penskalaan aplikasi di PostgreSQL. Hari ini saya ingin berbagi m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Materi dari pertemuan #RuPostgres - video, presentasi, analisis kuis, dan laporan foto</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/424249/"><p>  Pada 15 September, sebuah pertemuan diadakan di Avito, di mana kami berbicara tentang penskalaan aplikasi di PostgreSQL.  Hari ini saya ingin berbagi materi darinya - video, presentasi dari pembicara, tunjukkan foto.  Juga, di bawah potongan, saya menerbitkan diskusi tentang pertanyaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kuis</a> yang kami lakukan di sini di Habré, sebelum mitap.  Dan saya berbicara tentang kesan saya tentang pertemuan itu. </p><br><p><img src="https://habrastorage.org/webt/tq/w8/ff/tqw8ffbp5stottfooubdrhw_yje.jpeg"></p><a name="habracut"></a><br><h1 id="doklady">  Laporan </h1><br><h3 id="raspredelennye-tranzakcii-i-puteshestviya-vo-vremeni-stas-kelvich-postgres-professional">  Transaksi terdistribusi dan perjalanan waktu.  Stas Kelvich, Postgres Professional </h3><br><p>  Stas berbicara tentang transaksi yang didistribusikan dan perjalanan waktu. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/DFLEkWi-vRc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Presentasi</a> </p><br><p>  Ulasan: </p><br><blockquote>  Stas dan timnya melakukan pekerjaan yang sangat baik!  Saya berharap keputusan mereka akan disetujui oleh komunitas dan kami akan melihat solusi ini dalam versi baru Postgres. </blockquote><br><h3 id="masshtabirovanie-prilozheniya-na-postgresql-v-avito-tips-and-tricks-konstantin-evteev-avito">  Melakukan penskalaan aplikasi pada PostgreSQL di Avito: tips dan trik.  Konstantin Evteev, Avito </h3><br><p>  Saya membuat presentasi tentang penskalaan aplikasi pada PostgreSQL di Avito dan membagikan tips dan trik kami. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/78UNk0UfrRg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Presentasi</a> </p><br><p>  Ulasan: </p><br><blockquote>  Pendekatan yang menarik: di mana Kostantin dengan sangat menarik dan cerdas menjelaskan masalah apa yang mungkin Anda temui ketika bekerja dengan data dalam arsitektur layanan mikro, dan juga menyarankan solusi untuk penskalaan IP.  Saga diingat :) </blockquote><br><h3 id="logicheskaya-replikaciya-i-urovni-izolyacii-tranzakciy-postgresql-mihail-tyurin">  Replikasi logis dan tingkat isolasi transaksi PostgreSQL.  Mikhail Tyurin </h3><br><p>  Michael menyiapkan laporan replikasi logis dan tingkat isolasi transaksi PostgreSQL. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5i07k-uvxXY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Presentasi</a> </p><br><p>  Ulasan: </p><br><blockquote>  Michael menyoroti momen-momen transaksi yang halus, yang jauh dari langsung terlihat tidak hanya bagi pemula.  Semua orang perlu tahu tentang ini. </blockquote><br><h3 id="ozo--asinhronnaya-tipobezopasnaya-header-only-biblioteka-klient-postgresql-dlya-c17-sergey-handrikov-yandeks">  OZO adalah pustaka klien PostgreSQL khusus-jenis header yang tidak sinkron untuk C ++ 17.  Sergey Handrikov, Yandex </h3><br><p> Sergey memberi tahu para hadirin tentang bagaimana OZO, pustaka klien PostgreSQL header-only asynchronous type-safe untuk C ++ 17 diatur, dan diundang untuk berkontribusi padanya. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/7Kq_sNSuolw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Presentasi</a> </p><br><p>  Ulasan: </p><br><blockquote>  Penulis, menurut pendapat saya, berhasil dengan cepat mengungkapkan masalah di perpustakaan yang ada dan solusi di perpustakaan C ++ baru dalam waktu singkat.  Oleh karena itu, saya akan senang jika perpustakaan ini dikembangkan di opensource, hal-hal yang lebih mendasar sudah diterapkan, yang tidak bisa tidak bersuka cita. </blockquote><br><h1 id="otvety-na-voprosy-viktoriny">  Jawaban untuk pertanyaan kuis </h1><br><p>  Sebelum pertemuan, kami mengundang Anda untuk menjawab pertanyaan tentang Postgres.  Hari ini saya ingin menunjukkan jawaban yang benar.  Mereka berada di bawah spoiler (untuk berjaga-jaga). </p><br><p>  <strong>Ada tabel kosong tanpa catatan pengguna ("UserId" int, "balance" int).</strong>  <strong>Apa yang akan kembali sebagai hasil dari permintaan?</strong> </p><br><pre><code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> ins <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">users</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> gs, gs * <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> generate_series(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) gs <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gs%<span class="hljs-number"><span class="hljs-number">2</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">users</span></span>;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text"><p>  Tidak ada </p></div></div><br><p>  <strong>Apa yang akan mengembalikan permintaan</strong> <code>select * from users where UserId = 10;</code>  <strong>saat mengakses tabel pengguna setelah menyelesaikan pekerjaan sebelumnya?</strong> </p><br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text"><p>  GALAT: kolom "userid" tidak ada. </p></div></div><br><p>  <strong>Didefinisikan oleh Enum CREATE TYPE status AS ENUM ('wait', 'init', 'run', 'stop');</strong>  <strong>Perintah mana yang dapat menghapus nilai 'init'?</strong> </p><br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text"><p>  Tidak ada cara standar untuk menghapus nilai dari enum. </p></div></div><br><p>  <strong>Bagaimana saya bisa mendapatkan daftar fungsi di PostgreSQL?</strong> </p><br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text"><p>  pilih * Dari pg_proc; </p></div></div><br><p>  <strong>Apa yang akan kembali sebagai hasil dari permintaan?</strong> </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>::<span class="hljs-type"><span class="hljs-type">smallint</span></span>::<span class="hljs-type"><span class="hljs-type">boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>::<span class="hljs-type"><span class="hljs-type">bigint</span></span> &gt; <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text"><p>  GALAT: tidak bisa menggunakan tipe smallint ke boolean. </p></div></div><br><p>  <strong>Pengembang junior Vasya diperintahkan untuk menulis kueri yang menampilkan semua entri dari tabel <code>parent</code> yang tidak ada entri di tabel <code>child</code> .</strong> </p><br><p>  <strong>Skema Data:</strong> </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> (parent_id <span class="hljs-built_in"><span class="hljs-built_in">serial</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>, payload <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">child</span></span> (child_id <span class="hljs-built_in"><span class="hljs-built_in">serial</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>, parent_id <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unique</span></span> <span class="hljs-keyword"><span class="hljs-keyword">references</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> (parent_id));</code> </pre> <br><p>  <strong>Vasya berusaha sangat keras dan tidak ingin menghadapi kotoran, jadi dia datang dengan delapan pertanyaan berbeda untuk menyelesaikan masalah:</strong> </p><br><pre> <code class="hljs cs">-- <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> not </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exists</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">where</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id = p.parent_id</span></span></span><span class="hljs-function">)</span></span>; -- <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">not</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">array[p.parent_id] &amp;&amp; array(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c</span></span></span><span class="hljs-function">))</span></span>; -- <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> distinct p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p full </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">join</span></span></span><span class="hljs-function"> child c </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c.parent_id = p.parent_id</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> c.parent_id </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">is</span></span></span><span class="hljs-function"> </span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-literal">null</span></span></span></span>; -- <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.payload <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> parent p <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p.<span class="hljs-function"><span class="hljs-function">parent_id not </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c</span></span></span><span class="hljs-function">)</span></span>; -- <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p left </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">join</span></span></span><span class="hljs-function"> child c </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c.parent_id = p.parent_id</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> c.parent_id </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">is</span></span></span><span class="hljs-function"> </span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-literal">null</span></span></span></span>; -- <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-function"><span class="hljs-function">with w_child_with_parents </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">as</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id, ( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count(*</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> c.parent_id</span></span> = p.parent_id) = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> parent_exists <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> child c) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.payload <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> parent p <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p.<span class="hljs-function"><span class="hljs-function">parent_id </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pc.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w_child_with_parents pc </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">where</span></span></span></span><span class="hljs-function"><span class="hljs-params"> not pc.parent_exists</span></span></span><span class="hljs-function">)</span></span>; -- <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p full </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">join</span></span></span><span class="hljs-function"> child c </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c.parent_id = p.parent_id</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">group</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">by</span></span></span><span class="hljs-function"> p.parent_id, p.payload having </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">)</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; -- <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.payload <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> parent p <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p.<span class="hljs-function"><span class="hljs-function">parent_id </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> p2.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parent p2 except all </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c2.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c2</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p>  <strong>Vasya mempresentasikan pilihannya kepada Anda sehingga Anda dapat membantunya memilih yang terbaik.</strong>  <strong>Dia mengklaim bahwa semua kueri bekerja dengan cara yang sama: tabel ditempatkan di memori dan perbedaan kinerja tidak signifikan (atau bahkan tidak terlihat).</strong>  <strong>Namun, Anda, sebagai pengembang yang lebih berpengalaman, telah memperhatikan bahwa mungkin tidak semua permintaan menyelesaikan tugas.</strong>  <strong>Buat daftar pertanyaan yang tidak menyelesaikan tugas (dan jelaskan alasannya).</strong> </p><br><div class="spoiler">  <b class="spoiler_title">Jawaban singkat</b> <div class="spoiler_text"><p>  Tugas 2, 3, dan 5 tidak menyelesaikan masalah ini (dalam beberapa kasus, juga meminta 1). </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Jawaban atas hasil percobaan</b> <div class="spoiler_text"><h3 id="testovye-dannye">  Data uji: </h3><br><p>  "Ketidaktepatan" dari perilaku dimanifestasikan ketika ada catatan dalam tabel anak dengan parent_id adalah nol. </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> (parent_id, payload) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 1'</span></span>), (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 2'</span></span>), (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 3'</span></span>), (<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 4'</span></span>), (<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 5'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">child</span></span> (child_id, parent_id) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>), (<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>);</code> </pre> <br><h3 id="na-privedennyh-testovyh-dannyh">  Pada data uji yang diberikan </h3><br><ul><li>  Kueri 1, tergantung pada apakah ekstensi intarray diinstal, mungkin atau tidak berfungsi. </li><li>  Kueri 2 mengembalikan string ekstra (null, null). </li><li>  Kueri 3 dan 5 mengembalikan set hasil kosong. </li></ul><br><h3 id="interpretaciya-rezultatov-eksperimenta">  Interpretasi hasil eksperimen </h3><br><p>  Permintaan 1: jika ekstensi intarray dipasang di database ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.postgresql.org/docs/current/static/intarray.html</a> ), permintaan macet dengan kesalahan "ERROR: array tidak boleh mengandung nulls".  Perilaku ini disebabkan oleh fakta bahwa ekstensi menimpa operator standar dan mengubah perilaku untuk array yang mengandung elemen nol. </p><br><p>  Dokumentasi mengatakan sebagai berikut: </p><br><blockquote>  Operator &amp;&amp;, @&gt; dan &lt;@ setara dengan operator built-in PostgreSQL dengan nama yang sama, kecuali mereka hanya bekerja pada array integer yang tidak mengandung null, sedangkan operator built-in bekerja untuk semua tipe array.  Pembatasan ini membuat mereka lebih cepat daripada operator built-in dalam banyak kasus. </blockquote><p>  Permintaan 2: karena bergabung penuh, string tambahan (null, null) muncul sebagai hasilnya. </p><br><p>  Permintaan 3: mengembalikan resultset kosong karena fakta bahwa set yang dibentuk oleh subquery memiliki elemen nol. </p><br><p>  Dokumentasi ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.postgresql.org/docs/current/static/functions-subquery.html#FUNCTIONS-SUBQUERY-NOTIN</a> ): </p><br><blockquote>  Perhatikan bahwa jika ekspresi sebelah kiri menghasilkan nol, atau jika tidak ada nilai kanan yang sama dan setidaknya satu baris kanan menghasilkan nol, hasil dari konstruksi NOT IN akan menjadi nol, tidak benar.  Ini sesuai dengan aturan normal SQL untuk kombinasi Boolean dari nilai nol. </blockquote><p>  Kueri 5: mengembalikan hasil kosong karena bagian w_child_with_parents dipanggil, tabel child dan parent_id kosong atau tidak tercermin sama sekali di bagian tersebut. </p></div></div><br><p>  Semua pertanyaan kuis dijawab dengan benar oleh tiga peserta.  Kami menyerahkan satu ke hadiah di pertemuan itu, dua set suvenir lagi dikirimkan melalui pos. </p><br><p><img src="https://habrastorage.org/webt/jd/3f/20/jd3f207khh7jg6oy9lg0cm_rul8.jpeg"></p><br><h1 id="posleslovie">  Kata penutup </h1><br><p>  Lebih dari seratus orang datang ke pertemuan itu.  Sangat menyenangkan bertemu dengan penonton seperti itu.  Menurut sebuah survei, lebih dari 60% tamu mitap memiliki pengalaman bekerja dengan database selama lebih dari lima tahun.  Dan itu sangat bagus ketika laporan mendapat tanggapan yang semarak dari audiens: </p><br><p><img src="https://habrastorage.org/webt/lu/gd/6e/lugd6eme6c-_m6f1vunleyq58ys.jpeg"></p><br><p>  Di sela-sela pertemuan, ada banyak pembicaraan tentang PostgreSQL menjadi alat yang semakin umum.  Memang benar.  Saya mengambil kesempatan ini untuk mengatakan bahwa kami dalam Avito berencana untuk memperluas tim DBA, dan jika Anda tertarik pada tugas-tugas ambisius pada proyek besar, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lowongan di Lingkaran Saya</a> atau kirim surat kepada saya. </p><br><p><img src="https://habrastorage.org/webt/1y/2x/dm/1y2xdm33_9kqv36tu2rdplca27w.jpeg"></p><br><p>  Sebagai penutup, saya ingin mengucapkan terima kasih kepada rekan-rekan dari Yandex, Postgres Professional dan, tentu saja, Avito untuk laporan indah yang kami dengar.  Terima kasih kepada para tamu yang datang kepada kami pada hari Sabtu ini dan kepada pemirsa langsung.  Dan tentu saja, komunitas #RuPostgres untuk kepercayaan. </p><br><p>  Daftar putar dengan semua laporan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  Kami memposting <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">laporan foto di Facebook</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">VKontakte</a> . </p><br><p><img src="https://habrastorage.org/webt/ve/lb/ja/velbjat75n66wq_-rgvbeois4pg.jpeg"></p><br><p>  Sampai ketemu lagi! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id424249/">https://habr.com/ru/post/id424249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id424239/index.html">Seminar Musim Gugur IBM - Kontainer, Visi Komputer, Transformasi Digital</a></li>
<li><a href="../id424241/index.html">Cetak duniamu</a></li>
<li><a href="../id424243/index.html">5 cara mudah untuk meningkatkan komunikasi dengan pelanggan</a></li>
<li><a href="../id424245/index.html">Menulis klien Telegram itu mudah</a></li>
<li><a href="../id424247/index.html">KotlinConf 2018 Live - tonton siarannya 4-5 Oktober</a></li>
<li><a href="../id424251/index.html">Kami mempertimbangkan statistik percobaan di hh.ru</a></li>
<li><a href="../id424255/index.html">Cara menggunakan analisis statis dengan benar</a></li>
<li><a href="../id424257/index.html">Hexagon Maps in Unity: Bagian 1-3</a></li>
<li><a href="../id424259/index.html">Minggu Keamanan 36: Telnet harus ditutup</a></li>
<li><a href="../id424261/index.html">Bagaimana mengatasi masalah pemrograman</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>