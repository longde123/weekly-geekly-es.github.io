<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåüèΩ ‚úåüèº üë©‚Äçüíª Creamos un sensor de control de calidad del aire en InfluxDB, Grafana, Docker y Raspberry Pi üí† ‚õëÔ∏è üêÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alguna vez pens√≥ en monitorear la calidad del aire dentro o fuera de su hogar: ¬ød√≥nde vive y trabaja? Este proyecto, que hemos bautizado como balenaSe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Creamos un sensor de control de calidad del aire en InfluxDB, Grafana, Docker y Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449484/">  Alguna vez pens√≥ en monitorear la calidad del aire dentro o fuera de su hogar: ¬ød√≥nde vive y trabaja?  Este proyecto, que hemos bautizado como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">balenaSense</a> , es una unidad para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">medir la</a> temperatura, la humedad, la presi√≥n barom√©trica y la calidad del aire, as√≠ como un panel de control al que puede acceder desde cualquier lugar para ver estad√≠sticas resumidas y rastrear tendencias. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ad/95d/d7a/9ad95dd7a878fefb4e5ea05732dba925.png"><br><a name="habracut"></a><br><h1>  Contenido </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Introduccion</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Equipo necesario</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Software</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Montaje de equipos</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configurar Raspberry Pi</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Implementaci√≥n de software</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ver tablero de instrumentos</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Como funciona</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Que sigue</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">√öltimos pensamientos</a> </li></ul><br><a name="1"></a><h1>  Introduccion </h1><br>  Para controlar la calidad del aire y la estaci√≥n meteorol√≥gica, se requieren muchos cables y varios sensores, pero la situaci√≥n se hizo m√°s f√°cil despu√©s de la aparici√≥n de sensores que combinan todas las lecturas en una buena placa peque√±a, con lo cual es f√°cil comenzar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/462/14c/ff9/46214cff9e49ae84360e58fb5ebb4a4e.jpg"><br><br>  Considere monitorear la temperatura, la humedad, la presi√≥n barom√©trica y la calidad del aire utilizando un sensor todo en uno que se conecta directamente a la Raspberry Pi sin componentes adicionales.  No necesita ninguna experiencia en electr√≥nica, pero un soldador ser√≠a bienvenido (aunque tambi√©n es opcional).  Este proyecto implementa una base de datos para almacenar lecturas hist√≥ricas junto con una interfaz gr√°fica para ver las lecturas actuales e inmediatamente ver las tendencias. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d0/63e/8b2/7d063e8b2d6111ed55553a3b3e3c0a47.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce0/600/884/ce06008843e25c57e8b0979bce73b6b6.png"><br><br><a name="2"></a><h1>  Equipo necesario </h1><br>  Esto es lo que necesita comprar para este proyecto.  Dependiendo de si desea utilizar un soldador o no, elegimos una placa de sensor: algunos funcionan de inmediato, otros requieren un poco de soldadura. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/005/300/15d/00530015dce4ec449e0477a8d7bc6d14.jpg"><br><br><h3>  No quiero soldar </h3><br>  Si no desea soldar, necesitar√°: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Raspberry Pi Zero WH</a> (2Bv1.2 / 3B / 3B + / 3A + tambi√©n encajan) <br></li><li>  Tarjeta Micro-SD de 8 GB (o m√°s), recomendamos las tarjetas SD Sandisk Extreme Pro <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuente de alimentaci√≥n y cable</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pimoroni BME680 Sensor de placa de transici√≥n</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pimoroni Breakout Garden pHAT</a> </li></ul><br><h3>  Quiero soldar, ¬°dame! </h3><br>  Si est√° contento de recoger un soldador, necesitar√°: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Raspberry Pi Zero W</a> (2Bv1.2 / 3B / 3B + / 3A + tambi√©n caben) <br></li><li>  Tarjeta Micro-SD de 8 GB (o m√°s), recomendamos las tarjetas SD Sandisk Extreme Pro <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuente de alimentaci√≥n y cable</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sensor BME680 de Bosch con elevador</a> (consulte las alternativas a continuaci√≥n) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cable de conexi√≥n</a> </li></ul><br><h3>  Otros sensores </h3><br>  Si ya tiene alg√∫n tipo de sensor, este proyecto es compatible con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sense HAT</a> con una ventaja adicional: ¬°una carita sonriente en la matriz LED (dependiendo de la calidad del aire, por supuesto)! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ede/763/1ad/ede7631adecd352c97c0675c3adcde95.png"><br><br>  Bosch BME680 con elevador se puede pedir a diferentes proveedores a diferentes precios. <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pimoroni BME680</a> ¬£ 18.50 (puede haber una versi√≥n sin soldar con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">su pHAT</a> ) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Adafruit BME680</a> US $ 22.50 <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sparkfun SparkX BME680</a> US $ 19.95 (puede haber una versi√≥n sin soldar con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">su pHAT</a> ) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BME680 sin nombre</a> US $ 9.92 </li></ul><br>  <b>Nota</b>  En el art√≠culo usamos Pimoroni: esta placa tiene la ventaja adicional de que los contactos se rompen en el orden correcto para el GPIO Raspberry Pi.  Al usar otras tarjetas, debe verificar que las clavijas de alimentaci√≥n, tierra y bus I2C (SDA y SCL) coincidan, como se explica m√°s adelante en el manual. <br><br><a name="3"></a><h1>  Software </h1><br>  Abrimos el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">balena-sense</a> en GitHub, que contiene todo el software, la configuraci√≥n y el c√≥digo que necesita para un sistema en funcionamiento.  Vamos a implementar este proyecto en una cuenta gratuita de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">balenaCloud</a> para distribuir todo el software para Raspberry Pi, as√≠ como proporcionar acceso remoto.  Por lo tanto, necesitar√°: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Herramienta de escritura de</a> tarjeta flash SD como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">balenaEtcher</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cuenta</a> gratuita de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">balenaCloud</a> <br></li><li>  Clone o descargue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nuestro proyecto desde GitHub</a> </li></ul><br><a name="4"></a><h1>  Montaje de equipos </h1><br>  Hay poco trabajo en el frente de hardware de este proyecto.  Nuestro objetivo es conectar la placa del sensor al pin GPIO en la Raspberry Pi. <br><br>  El BME680 se comunica con la Raspberry Pi a trav√©s de un bus llamado I2C (ojo cuadrado), que es un bus serie con dos cables.  Estos dos cables se denominan l√≠nea de sincronizaci√≥n (SCK) y l√≠nea de datos (SDA).  Adem√°s de los dos cables, es necesario suministrar energ√≠a al sensor (3.3V o 3V3) y conectarlo a tierra. <br><br>  Si elige la opci√≥n sin soldar desde Pimoroni o Sparkfun o utilizando Sense HAT, simplemente conecte los nuevos componentes brillantes a la Raspberry Pi y todas las conexiones se realizar√°n por usted: ¬°contin√∫e con el siguiente paso! <br><br>  Si decide conectar el sensor directamente a la Raspberry Pi utilizando Pimoroni u otro elevador, lo principal es garantizar la conexi√≥n correcta de los contactos descritos anteriormente (SDA, SCK, 3V3 y GND). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/55f/165/c76/55f165c76f33633d3539393b1472d2f5.png"></div><br><br>  Un sitio √∫til para trabajar con GPIO en Raspberry Pi es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pinout.xyz</a> ;  muestra claramente que necesitamos los pines 1 (potencia 3V3), 3 (SDA), 5 (SCL) y 9 (tierra).  Un GPIO de 40 pines es est√°ndar en Pi 2 y versiones posteriores.  Si utiliza una placa Pimoroni, los contactos est√°n en el orden correcto para conectar las placas.  Observe c√≥mo la inscripci√≥n en el tablero coincide con el diagrama de pinout anterior. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebb/832/900/ebb832900d72244bfc6038de82e9164a.jpg"><br><br>  Pero si conecta el sensor de esta manera, el calor del procesador Raspberry Pi afectar√° las lecturas.  Para recopilar lecturas m√°s precisas, debe quitar el sensor de la placa: h√°galo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">con los cables DuPont de</a> madre a madre (o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Jumper Jerky</a> ), como se muestra a continuaci√≥n: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b6/5c1/45a/4b65c145a0bd694d5ca9e266d5771d1b.jpg"><br><br>  Del mismo modo, si usa otro sensor, donde los diagramas de pines no coinciden exactamente, puede conectar estas placas al Pi utilizando el mismo m√©todo.  Lo principal es garantizar el cumplimiento de 3V3, SDA, SCL y GND.  Si la placa tiene contactos para SDI, SDO, CS, puede ignorarlos, ya que se usan para una interfaz SPI alternativa, que no usamos en este proyecto. <br><br>  En las fotos de arriba, tenemos la Raspberry Pi 3A +, pero Pi Zero tambi√©n es adecuada como una soluci√≥n m√°s barata. <br><br><a name="5"></a><h1>  Configurar Raspberry Pi </h1><br>  Vamos a actualizar la tarjeta SD con el sistema operativo balenaOS, conectarla a la nube balenaCloud, agregar nuestro dispositivo all√≠ y configurar el proyecto para que pueda actualizarse f√°cilmente m√°s tarde. <br><br>  Primero debe configurar una cuenta de balenaCloud.  Esto significa registrarse, agregar una aplicaci√≥n y agregar un dispositivo. <br><br><h3>  Paso 1. Reg√≠strate en balenaCloud </h3><br>  Si ya tiene una cuenta de GitHub o Google, puede usarla para iniciar sesi√≥n sin pasar por el proceso de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">registro</a> . <br><br><h3>  Paso 2. Creando la aplicaci√≥n </h3><br>  Agregue la aplicaci√≥n seleccionando el tipo de dispositivo correcto y <code>Starter</code> como tipo de aplicaci√≥n, luego haga clic en <code>Create New Application</code> .  Este tipo admite todos los microservicios y es gratuito hasta diez dispositivos. <br><br>  A continuaci√≥n, se lo dirigir√° al tablero de la aplicaci√≥n reci√©n creada, donde puede ir al siguiente paso y agregar el dispositivo.  Puede darle a la aplicaci√≥n un nombre arbitrario, pero lo necesitar√° m√°s adelante en el manual cuando escribamos el c√≥digo. <br><br><h3>  Paso 3. Agregue el dispositivo y arranque el SO </h3><br>  Despu√©s de crear la aplicaci√≥n, puede agregar un dispositivo a esta aplicaci√≥n haciendo clic en el bot√≥n verde <i>Agregar dispositivo</i> .  Al agregar un dispositivo, especifique el tipo de dispositivo correcto.  Si se est√° conectando a una red inal√°mbrica, puede configurar su SSID y frase de contrase√±a de WiFI. <br><br>  <b>Nota:</b> Raspberry Pi 3 se indica en la animaci√≥n, ¬°no olvide seleccionar el tipo correcto de su dispositivo! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e74/09c/595/e7409c595001458580b80e39809973a6.gif"><br><br>  Este proceso crea una imagen personalizada para la aplicaci√≥n y el tipo de dispositivo, que incluye la configuraci√≥n de red, si se especifica. <br><br>  <b>Nota:</b> para empezar, es mejor elegir una imagen de desarrollo para realizar algunas pruebas y solucionar problemas.  Para obtener m√°s informaci√≥n sobre las diferencias entre las im√°genes de desarrollo y producci√≥n, consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Si est√° seguro de que puede comenzar a implementar una imagen de producci√≥n en este momento, por favor. <br><br><h3>  Paso 4. Grabe la tarjeta SD y el dispositivo de arranque </h3><br>  Cuando se carga la imagen del sistema operativo, es hora de flashear la tarjeta SD.  Puedes usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">balenaEtcher</a> para esto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a57/b06/e30/a57b06e30b246d399ee8f8ef47c3b03f.gif"><br><br>  Una vez completado el proceso, inserte la tarjeta SD en la Raspberry Pi y conecte la fuente de alimentaci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/845/649/28f/84564928f5f8fc0e7907089bc0818870.gif"><br><br>  Cuando el dispositivo se inicia por primera vez, se conecta al panel de control de balenaCloud, despu√©s de lo cual puede verlo en la lista en l√≠nea y pasar al siguiente paso. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/740/785/d6c/740785d6c8aef63170470b81139a1a7b.png"><br><br>  <b>Soluci√≥n de problemas: el</b> dispositivo deber√≠a aparecer en el panel en unos minutos.  Si no aparece, algo sali√≥ mal.  La documentaci√≥n tiene una extensa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gu√≠a de soluci√≥n de problemas</a> con mucha informaci√≥n sobre por qu√© esto podr√≠a suceder.  Si la documentaci√≥n no ayud√≥, comun√≠quese con los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">foros</a> . <br><br><a name="6"></a><h1>  Implementaci√≥n de software </h1><br>  Cuando su Raspberry Pi est√© preparada, descargada y conectada a balenaCloud, estar√° listo para instalar el c√≥digo de la aplicaci√≥n en el dispositivo. <br><br><h4>  Instalar herramientas CLI de balena en una estaci√≥n de trabajo </h4><br>  BalenaCloud le permite transferir de forma remota el software / c√≥digo de la aplicaci√≥n a Raspberry Pi y otros dispositivos.  Para que esto sea posible, su estaci√≥n de trabajo (no la Raspberry Pi) debe cumplir con algunos requisitos m√≠nimos de software.  <b>Nota:</b> Para implementar con √©xito este proyecto, no necesita ejecutar ning√∫n comando en el dispositivo, ya sea a trav√©s de SSH o desde el panel de control de balenaCloud.  ¬°Todo se hace de forma remota! <br><br>  Si ya tiene (o puede configurar) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">npm</a> en su computadora, entonces esta es la forma m√°s r√°pida de ejecutar las herramientas CLI.  Tambi√©n hay <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">binarios para Windows, macOS y Linux</a> .  <b>Nota:</b> si ya instal√≥ estas herramientas para nuestros otros proyectos, puede omitir esta parte e ir directamente al siguiente paso. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La documentaci√≥n de las herramientas CLI</a> describe la instalaci√≥n y configuraci√≥n del paquete npm, as√≠ como los binarios. <br><br>  Cuando la CLI est√° instalada y ejecut√°ndose, el primer paso es iniciar sesi√≥n en balenaCloud ejecutando el comando de <code>balena login</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebe/2dd/a9e/ebe2dda9e415ee46f57ec346b89e0360.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8e/7ef/cda/c8e7efcda08bb42ef11aadfb231d5706.png"><br><br>  Cuando hay una CLI en funcionamiento registrada en la cuenta, est√° listo para instalar programas en la Raspberry Pi. <br><br><h4>  Descargar un proyecto desde GitHub </h4><br>  El siguiente paso es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descargar el c√≥digo para este proyecto desde GitHub</a> . <br><br>  El bot√≥n azul cargar√° el archivo zip del proyecto, pero si ya est√° familiarizado con Git, puede usar <code>git clone</code> manera habitual. <br><br><h4>  Instalar en Raspberry Pi </h4><br>  Como la CLI y el √∫ltimo c√≥digo est√°n instalados, puede ejecutar este c√≥digo en balenaCloud con un solo comando.  All√≠, la imagen de Docker se recopila y configura, que se ejecutar√° en su dispositivo. <br><br>  Desde el directorio del proyecto despu√©s de desempacarlo, ejecute el <code>balena push &lt;appName&gt;</code> , donde appName es el nombre de la aplicaci√≥n especificada al comienzo del manual.  Por ejemplo, <code>balena push balenaSense</code> . <br><br>  Si todo se hace correctamente, despu√©s de unos minutos, la pantalla de informaci√≥n de su dispositivo en el panel de control deber√≠a mostrar los servicios en ejecuci√≥n, uno para cada uno de los componentes del software, algo como esto: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/452/08c/652/45208c6529a5735789917e8ca2783b8b.png"><br><br>  La primera vez que la descarga puede tardar varios minutos (dependiendo de la velocidad de su conexi√≥n a Internet), pero solo se descargan los cambios en el contenedor, por lo que todo sucede mucho m√°s r√°pido. <br><br>  <b>Nota:</b> cuando la aplicaci√≥n se inicia por primera vez (y usa BME680, no Sense HAT), el sensor realiza un 'quemado' durante aproximadamente cinco minutos.  Durante este per√≠odo, las lecturas <i>no ser√°n</i> tomadas e insertadas en la base de datos.  La aplicaci√≥n registrar√° la cuenta regresiva, que se muestra en el panel balenaCloud: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/607/cd8/809/607cd8809b0176d8cb5888f9ae766fc3.png"><br><br>  Cuando el recuento llegue a cero, ver√° el mensaje 'Bucle de inicio ...'.  Despu√©s de eso, las lecturas se tomar√°n e insertar√°n en la base de datos cada 10 segundos. <br><br><a name="7"></a><h1>  Ver tablero de instrumentos </h1><br>  Espero que hayas flasheado el dispositivo, conectado a la red y comenzado sin ning√∫n problema.  Uno de los grandes beneficios de usar una cuenta gratuita de balenaCloud es la funci√≥n <code>Public Device URL</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75e/0be/d3f/75e0bed3f3dccd7b2d43baa9a84b8134.png"><br><br>  Active este interruptor y haga clic en el icono de flecha azul para acceder al tablero.  Puede compartir este enlace o marcarlo en su tel√©fono u otro dispositivo.  Mientras el dispositivo balenaSense est√© conectado y funcionando, ¬°puede mirar el tablero desde cualquier lugar! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce0/600/884/ce06008843e25c57e8b0979bce73b6b6.png"><br><br>  Si no desea habilitar el acceso p√∫blico, a√∫n puede ver el tablero desde su propia red local por direcci√≥n IP, como se puede ver en la captura de pantalla anterior.  El tuyo ser√° diferente, pero solo ingresa <code>http://&lt;ip-&gt;</code> en el navegador, y a√∫n tendr√°s acceso al tablero si est√°s en la misma red que el dispositivo.  Por ejemplo, para acceder a mi dispositivo, ingresar√≠a <code>http://10.1.231.36</code> . <br><br>  Si desea iniciar sesi√≥n en Grafana y jugar con la configuraci√≥n, las credenciales predeterminadas son <code>admin</code> y <code>admin</code> . <br><br><a name="8"></a><h1>  Como funciona </h1><br>  Este proyecto tiene tres componentes principales, tres servicios.  Estos nombres est√°n en el panel de balenaCloud: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">InfluxDB</a> : una base de datos utilizada para almacenar lecturas de sensores <br></li><li>  Sensor: biblioteca de Python y c√≥digo para acceder al sensor, tomar lecturas y guardarlas en la base de datos <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Grafana</a> : se usa para crear un tablero con gr√°ficos e informes </li></ul><br>  El sensor BME680 de Bosch detecta la temperatura, la humedad, la presi√≥n y la resistencia a los gases.  Los sensores de temperatura, humedad y presi√≥n funcionan de inmediato, pero las lecturas de resistencia a los gases por s√≠ solas no son muy √∫tiles.  Estos son indicadores de cambios en la composici√≥n del aire.  Cuando se inicia el sensor, establece la base y luego monitorea los cambios.  Los indicadores indicativos de la calidad del aire se dan en porcentaje y tienen en cuenta la influencia de la humedad y la resistencia a los gases. <br><br>  Si usa Sense HAT, donde no hay un sensor de resistencia al gas, aproximamos las lecturas de calidad del aire en funci√≥n de los valores de temperatura y humedad objetivo. <br><br><a name="9"></a><h1>  Que sigue </h1><br>  Espero que ahora haya lanzado completamente el proyecto, haya obtenido acceso al panel de control, haya tomado lecturas y haya comenzado a completar su base de datos.  Menciona algunas cosas m√°s importantes. <br><br><h3>  Cambiar contrase√±a </h3><br>  Si abre el dispositivo para acceso p√∫blico, se recomienda cambiar la contrase√±a de Grafana. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f5/bb8/75e/3f5bb875e74b17bf2eff4447f1245212.png"><br><br>  Configuramos el sistema con el nombre de usuario y la contrase√±a predeterminada <code>admin</code> <code>admin</code> .  Para cambiarlos, inicie sesi√≥n en Grafana usando el bot√≥n en la esquina inferior izquierda del panel.  Se le pedir√° que cambie la contrase√±a la primera vez que inicie sesi√≥n. <br><br><h3>  Personalizaci√≥n </h3><br>  El programa Grafana para el tablero y los informes tiene muchos par√°metros y configuraciones de configuraci√≥n.  Hemos creado un panel b√°sico que muestra un cuadro y un gr√°fico para cada una de las cuatro opciones de medici√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ca/cab/417/9cacab417c06bb7568701a26bfa5f2b2.png"><br><br>  Puede personalizar cada panel de Grafana al pasar el cursor sobre el t√≠tulo y pasar a la edici√≥n.  Recomiendo jugar con la configuraci√≥n: los cambios en el tablero no se guardan autom√°ticamente, por lo que si comete un error, simplemente vuelva a cargar la p√°gina y todo volver√° a su forma original.  Si desea guardar los cambios, haga <i>clic</i> en <i>Guardar</i> en la parte superior del panel de control, y todas las configuraciones se guardar√°n en su dispositivo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5b/036/336/b5b03633659cfdf57133ba45f598f94c.png"><br><br>  Tambi√©n puede configurar los sensores.  Por ejemplo, en el diagrama del man√≥metro, configuramos varios rangos b√°sicos y valores de texto en lugar de n√∫meros.  ¬°Todo esto cambia a tu gusto! <br><br><h3>  Vivienda </h3><br>  Dichos sensores son ideales para colocarlos en una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cabina meteorol√≥gica</a> , que protege a los sensores de la luz solar y el calor irradiado.  Si controla el ambiente en la habitaci√≥n, esto no es tan importante, pero si el sensor est√° instalado en el exterior, su posicionamiento y protecci√≥n son importantes para obtener lecturas precisas. <br><br>  Las cabinas meteorol√≥gicas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est√°n a la venta</a> , pero pueden ser bastante caras, as√≠ que considera las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">opciones de bricolaje</a> . <br><br>  Thingiverse tiene varios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">edificios BME680</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cabinas meteorol√≥gicas</a> . <br><br><a name="10"></a><h1>  √öltimos pensamientos </h1><br>  Gracias por leer!  Si decide construir su propia estaci√≥n meteorol√≥gica con control de calidad del aire, d√≠ganos c√≥mo fue todo, qu√© problemas surgieron.  Las ideas para el desarrollo de nuestro proyecto se pueden expresar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en los foros</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/449484/">https://habr.com/ru/post/449484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449468/index.html">C√≥mo el "truco √©tico" del fabricante de software de juego se convirti√≥ en una pesadilla completa</a></li>
<li><a href="../449472/index.html">Cataclysm Dark Days Ahead, An√°lisis est√°tico y panecillos</a></li>
<li><a href="../449476/index.html">Un nuevo tipo de almacenamiento SSD reducir√° el consumo de energ√≠a en el centro de datos: c√≥mo funciona</a></li>
<li><a href="../449478/index.html">Agregar UICollectionViews a un UITableViewCell personalizado que se realiza a trav√©s de Xib</a></li>
<li><a href="../449480/index.html">Elija el seguimiento de errores apropiado</a></li>
<li><a href="../449486/index.html">√âxodo masivo de juegos de navegador</a></li>
<li><a href="../449488/index.html">Cataclysm Dark Days Ahead: An√°lisis est√°tico y juegos Roguelike</a></li>
<li><a href="../449490/index.html">Slurm: Intenso de Kubernetes. Programa y bonificaciones</a></li>
<li><a href="../449494/index.html">Interfaces de IA y d√≥nde viven</a></li>
<li><a href="../449496/index.html">Hackathon DevDays'19 (parte 2): analizador de mensajes de audio para Telegram y verificaci√≥n de gram√°tica en IntelliJ IDEA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>