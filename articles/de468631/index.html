<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßöüèΩ üåπ ü•ê Testen von Flatteranwendungen. Starten Sie üë®üèø‚Äç‚öïÔ∏è üçñ üëêüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Flutter wird in Erinnerung behalten, wenn es notwendig ist, schnell eine sch√∂ne und reaktionsschnelle Anwendung f√ºr mehrere Plattformen gleichzeitig z...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Testen von Flatteranwendungen. Starten Sie</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/surfstudio/blog/468631/"><p>  Flutter wird in Erinnerung behalten, wenn es notwendig ist, schnell eine sch√∂ne und reaktionsschnelle Anwendung f√ºr mehrere Plattformen gleichzeitig zu erstellen, aber wie kann die Qualit√§t des ‚Äûschnellen‚Äú Codes garantiert werden? <br>  Sie werden √ºberrascht sein, aber Flutter hat die M√∂glichkeit, nicht nur die Qualit√§t des Codes sicherzustellen, sondern auch die Funktionsf√§higkeit der visuellen Oberfl√§che zu gew√§hrleisten. <br>  In dem Artikel werden wir untersuchen, wie es mit Tests auf Flutter l√§uft, wir werden Widget-Tests und Integrationstests der gesamten Anwendung analysieren. </p><br><p><img src="https://habrastorage.org/webt/nr/vc/tb/nrvctbv08rqv1xge9z2zknv69ym.jpeg"></p><a name="habracut"></a><br><p>  Ich habe vor mehr als einem Jahr vor seiner offiziellen Ver√∂ffentlichung angefangen, Flutter zu studieren. W√§hrend der Studie war es kein Problem, Entwicklungsinformationen zu finden.  Und als ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TDD</a> ausprobieren wollte, stellte sich heraus, dass die Informationen zum Testen katastrophal klein waren.  Auf Russisch und im Allgemeinen fast keine.  Testprobleme mussten gem√§√ü dem Quellcode von Fluttertests und seltenen Artikeln in englischer Sprache unabh√§ngig untersucht werden.  Alles, was ich zum Testen visueller Elemente studiert habe, habe ich in einem Artikel beschrieben, um denjenigen zu helfen, die gerade erst anfangen, sich mit dem Thema zu besch√§ftigen. </p><br><h2 id="widget-testing-vidzhet-testy">  Widget-Test </h2><br><h3 id="obschie-svedeniya">  Allgemeine Informationen </h3><br><p>  Ein Widget-Test testet ein einzelnes Widget.  Es kann auch als Komponententest bezeichnet werden.  Mit dem Test soll nachgewiesen werden, dass die Benutzeroberfl√§che des Widgets wie geplant aussieht und interagiert.  Das Testen eines Widgets erfordert eine Testumgebung, die den geeigneten Kontext f√ºr den Lebenszyklus des Widgets bietet. <br>  Das getestete Widget kann Benutzeraktionen und -ereignisse empfangen und darauf reagieren und einen Baum untergeordneter Widgets erstellen.  Daher sind Widget-Tests komplexer als Unit-Tests.  Wie der Unit-Test ist auch die Widget-Testumgebung eine einfache Simulation, die viel einfacher ist als ein vollwertiges Benutzeroberfl√§chensystem. </p><br><p>  Mit Widget-Tests k√∂nnen Sie das Verhalten eines einzelnen Elements der visuellen Oberfl√§che isolieren und testen.  Und was bemerkenswert ist, alle √úberpr√ºfungen in der Konsole durchzuf√ºhren, was ideal f√ºr Tests ist, die als Teil des CI / CD-Prozesses ausgef√ºhrt werden. </p><br><p>  Dateien, die Tests enthalten, befinden sich normalerweise im <strong>Test-</strong> Unterverzeichnis des Projekts. <br>  Tests k√∂nnen entweder √ºber die IDE oder √ºber die Konsole mit dem folgenden Befehl ausgef√ºhrt werden: </p><br><pre><code class="plaintext hljs">$ flutter test</code> </pre> <br><p>  In diesem Fall werden alle Tests mit der Maske * <strong>_test.dart</strong> aus dem Unterverzeichnis <strong>test</strong> ausgef√ºhrt. <br>  Sie k√∂nnen einen separaten Test ausf√ºhren, indem Sie den Dateinamen angeben: </p><br><pre> <code class="plaintext hljs">$ flutter test test/phone_screen_test.dart</code> </pre> <br><p>  Der Test wird von der Funktion <strong>testWidgets erstellt</strong> , die ein Tool als <strong>Testerparameter</strong> empf√§ngt, mit dem der <strong>Testcode</strong> mit dem zu <strong>testenden</strong> Widget interagiert: </p><br><pre> <code class="java hljs">testWidgets(<span class="hljs-string"><span class="hljs-string">' '</span></span>, (WidgetTester tester) async { <span class="hljs-comment"><span class="hljs-comment">//   });</span></span></code> </pre> <br><p>  Um Tests zu logischen Bl√∂cken zu kombinieren, k√∂nnen Testfunktionen innerhalb der <strong>Gruppenfunktion</strong> zu Gruppen <strong>zusammengefasst</strong> werden: </p><br><pre> <code class="java hljs">group(<span class="hljs-string"><span class="hljs-string">'  '</span></span>, (){ testWidgets(<span class="hljs-string"><span class="hljs-string">' '</span></span>, (WidgetTester tester) async { <span class="hljs-comment"><span class="hljs-comment">//   }); testWidgets(' ', (WidgetTester tester) async { //   }); });</span></span></code> </pre> <br><p>  Mit den <strong>Funktionen</strong> <strong>setUp</strong> und <strong>tearDown k√∂nnen</strong> Sie Code "vor" und "nach" jedem Test ausf√ºhren.  Dementsprechend k√∂nnen Sie mit den <strong>Funktionen</strong> <strong>setUpAll</strong> und <strong>tearDownAll</strong> den Code "vor" und "nach" allen Tests ausf√ºhren. Wenn diese Funktionen innerhalb der Gruppe aufgerufen werden, werden sie "vor" und "nach" der Ausf√ºhrung aller Tests in der Gruppe aufgerufen: </p><br><pre> <code class="java hljs">setUp(() { <span class="hljs-comment"><span class="hljs-comment">//    }); tearDown(() { //    });</span></span></code> </pre> <br><h3 id="poisk-vidzhetov">  Widget-Suche </h3><br><p>  Um eine Aktion f√ºr ein verschachteltes Widget auszuf√ºhren, m√ºssen Sie sie im Widget-Baum finden.  Zu diesem Zweck gibt es ein globales Suchobjekt, mit dem Sie Widgets finden k√∂nnen: </p><br><ul><li>  im Baum nach Text - <strong>find.text</strong> , <strong>find.widgetWithText</strong> ; </li><li>  per Schl√ºssel - <strong>find.byKey</strong> ; </li><li>  durch icon - <strong>find.byIcon</strong> , <strong>find.widgetWithIcon</strong> ; </li><li>  nach Typ - <strong>find.byType</strong> ; </li><li>  nach Position im Baum - <strong>find.descendant</strong> und <strong>find.ancestor</strong> ; </li><li>  Verwenden einer Funktion, die Widgets in einer Liste analysiert - <strong>find.byWidgetPredicate</strong> . </li></ul><br><h3 id="vzaimodeystvie-s-testiruemym-vidzhetom">  Testen Sie die Widget-Interaktion </h3><br><p>  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>WidgetTester-</strong></a> Klasse bietet Funktionen zum Erstellen eines Test-Widgets, zum Warten auf eine √Ñnderung des Status und zum Ausf√ºhren einiger Aktionen f√ºr diese Widgets. <br>  Jede √Ñnderung im Widget f√ºhrt zu einer √Ñnderung des Status.  Die Testumgebung erstellt das Widget jedoch nicht gleichzeitig neu.  Sie m√ºssen der Testumgebung unabh√§ngig angeben, dass Sie das Widget neu <strong>erstellen</strong> m√∂chten, indem Sie die <strong>Funktionen</strong> <strong>pump</strong> oder <strong>pumpAndSettle aufrufen</strong> . </p><br><ul><li>  <strong>pumpWidget</strong> - <strong>Erstellt</strong> ein Test-Widget. </li><li>  <strong>pump</strong> - Startet die Verarbeitung des Status√ºbergangs des Widgets und wartet, bis dieser innerhalb des angegebenen Zeitlimits (standardm√§√üig 100 ms) abgeschlossen ist. </li><li>  <strong>pumpAndSettle</strong> - <strong>Ruft</strong> pump in einem Zyklus auf, um den <strong>Status</strong> w√§hrend eines bestimmten Timeouts zu √§ndern (standardm√§√üig 100 ms). Dies ist die Wartezeit, bis alle Animationen abgeschlossen sind. </li><li>  <strong>Tippen Sie auf</strong> - Senden Sie einen Klick an das Widget. </li><li>  <strong>longPress</strong> - langes Dr√ºcken; </li><li>  <strong>schleudern</strong> - wischen / wischen; </li><li>  <strong>Drag</strong> - Transfer; </li><li>  <strong>enterText</strong> - Texteingabe. </li></ul><br><p>  Tests k√∂nnen sowohl positive als auch negative Szenarien implementieren, um geplante Opportunities zu √ºberpr√ºfen und sicherzustellen, dass sie keine fatalen Folgen haben, z. B. wenn ein Benutzer in die falsche Richtung klickt und nicht das eingibt, was erforderlich ist: </p><br><pre> <code class="java hljs">await tester.enterText(find.byKey(Key(<span class="hljs-string"><span class="hljs-string">'phoneField'</span></span>)), <span class="hljs-string"><span class="hljs-string">'bla-bla-bla'</span></span>);</code> </pre> <br><p>  Nach allen Aktionen mit Widgets m√ºssen Sie <strong>tester.pumpAndSettle ()</strong> aufrufen, um den <strong>Status</strong> zu √§ndern. </p><br><h3 id="moki">  Moki </h3><br><p>  Viele kennen die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>Mockito-</strong></a> Bibliothek.  Diese Bibliothek aus der Java-Welt erwies sich als so erfolgreich, dass es Implementierungen dieser Bibliothek in vielen Programmiersprachen gibt, einschlie√ülich Dart. </p><br><p>  Um eine Verbindung herzustellen, m√ºssen Sie die Abh√§ngigkeit zum Projekt hinzuf√ºgen.  F√ºgen Sie der Datei <strong>pubspec.yaml</strong> die folgenden Zeilen <strong>hinzu</strong> : </p><br><pre> <code class="plaintext hljs">dependencies: mockito: any</code> </pre> <br><p>  Und verbinden Sie sich in der Testdatei: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:mockito/mockito.dart'</span></span>;</code> </pre> <br><p>  Mit dieser Bibliothek k√∂nnen Sie Moque-Klassen erstellen, von denen das getestete Widget abh√§ngt, sodass der Test einfacher ist und nur den Code abdeckt, den wir testen. <br>  Wenn wir beispielsweise das <strong>PhoneInputScreen-</strong> Widget testen, das beim <strong>Klicken</strong> mit dem <strong>AuthInteractor-</strong> Dienst eine Anforderung an das <strong>Backend</strong> authInteractor.checkAccess <strong>()</strong> ausf√ºhrt und dann den Mock anstelle des Dienstes ersetzt, k√∂nnen wir das Wichtigste √ºberpr√ºfen - die Tatsache, dass auf diesen Dienst zugegriffen wird. </p><br><p>  Abh√§ngigkeitsmobs werden als Nachkommen der <strong>Mock-</strong> Klasse erstellt und implementieren die Abh√§ngigkeitsschnittstelle: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AuthInteractorMock</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mock</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AuthInteractor</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><p>  Eine Klasse in Dart ist auch eine Schnittstelle, sodass die Schnittstelle nicht wie in einigen anderen Programmiersprachen separat deklariert werden muss. </p><br><p>  Um die Funktionalit√§t des Mok zu bestimmen, wird die Funktion <strong>when</strong> verwendet, mit der Sie die Reaktion des Mok auf einen Aufruf einer bestimmten Funktion bestimmen k√∂nnen: </p><br><pre> <code class="java hljs">when( authInteractor.checkAccess(any), ).thenAnswer((_) =&gt; Future.value(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>));</code> </pre> <br><p>  Moki kann Fehler oder fehlerhafte Daten zur√ºckgeben: </p><br><pre> <code class="java hljs">when( authInteractor.checkAccess(any), ).thenAnswer((_) =&gt; Future.error(UnknownHttpStatusCode(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>)));</code> </pre> <br><h3 id="proverki">  Schecks </h3><br><p>  W√§hrend des Tests k√∂nnen Sie auf dem Bildschirm nach Widgets suchen.  Auf diese Weise k√∂nnen Sie sicherstellen, dass der neue Status des Bildschirms in Bezug auf die Sichtbarkeit der gew√ºnschten Widgets korrekt ist: </p><br><pre> <code class="java hljs">expect(find.text(<span class="hljs-string"><span class="hljs-string">' '</span></span>), findsOneWidget); expect(find.text(<span class="hljs-string"><span class="hljs-string">'  '</span></span>), findsNothing);</code> </pre> <br><p>  Nach Abschluss des Tests k√∂nnen Sie auch √ºberpr√ºfen, welche Methoden der Mob-Klasse w√§hrend des Tests wie oft aufgerufen wurden.  Dies ist beispielsweise erforderlich, um zu verstehen, ob diese oder jene Daten zu oft angefordert werden und ob sich der Anwendungsstatus unn√∂tig √§ndert: </p><br><pre> <code class="java hljs">verify(appComponent.authInteractor).called(<span class="hljs-number"><span class="hljs-number">1</span></span>); verify(authInteractor.checkAccess(any)).called(<span class="hljs-number"><span class="hljs-number">1</span></span>); verifyNever(appComponent.profileInteractor);</code> </pre> <br><h3 id="otladka">  Debuggen </h3><br><p>  Tests werden in der Konsole ohne Grafiken durchgef√ºhrt.  Sie k√∂nnen Tests im Debug-Modus ausf√ºhren und Haltepunkte im Widget-Code festlegen. </p><br><p>  Um eine Vorstellung davon zu bekommen, was im Widget-Baum passiert, k√∂nnen Sie die Funktion <strong>debugDumpApp ()</strong> verwenden, die beim Aufruf im <strong>Testcode</strong> die Textdarstellung der Hierarchie des gesamten Widget-Baums zu einem bestimmten Zeitpunkt in der Konsole anzeigt. </p><br><p>  Um zu verstehen, wie das Widget Moki verwendet, gibt es eine <strong>logInvocations ()</strong> -Funktion.  Als Parameter wird eine Liste von Moxas verwendet und eine Folge von Methodenaufrufen f√ºr diese Moxas, die im Test ausgef√ºhrt wurden, an die Konsole ausgegeben. </p><br><p>  Ein Beispiel f√ºr eine solche Schlussfolgerung ist unten.  Die Markierung <strong>VERIFIED</strong> steht f√ºr Anrufe, die im Test mit der <strong>√úberpr√ºfungsfunktion √ºberpr√ºft wurden</strong> : </p><br><pre> <code class="plaintext hljs">AppComponentMock.sessionChangedInteractor [VERIFIED] AppComponentMock.authInteractor [VERIFIED] AuthInteractorMock.checkAccess(71111111111)</code> </pre> <br><h3 id="podgotovka">  Vorbereitung </h3><br><p>  Alle Abh√§ngigkeiten sollten in Form eines Moks an das getestete Widget gesendet werden: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeComponentMock</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mock</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeComponent</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AuthInteractorMock</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mock</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AuthInteractor</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><p>  Die √úbertragung von Abh√§ngigkeiten auf die getestete Komponente sollte in einer Weise erfolgen, die in Ihrer Anwendung akzeptiert wird.  Betrachten Sie zur Vereinfachung des Geschichtenerz√§hlens ein Beispiel, in dem Abh√§ngigkeiten durch den Konstruktor √ºbergeben werden. </p><br><p>  Im Codebeispiel ist <strong>PhoneInputScreen</strong> ein Test-Widget, das auf <strong>StatefulWidget</strong> basiert und in <strong>Scaffold eingeschlossen ist</strong> .  Es wird in einer Testumgebung mit der Funktion <strong>pumpWidget () erstellt</strong> : </p><br><pre> <code class="java hljs">await tester.pumpWidget(PhoneInputScreen(mock));</code> </pre> <br><p>  Ein echtes Widget kann jedoch die Ausrichtung f√ºr verschachtelte Widgets verwenden, f√ºr die <strong>MediaQuery</strong> im Widget-Baum erforderlich ist. <strong>F√ºr</strong> die Navigation wird wahrscheinlich <strong>Navigator.of (Kontext) verwendet.</strong> <strong>Daher</strong> ist es praktischer, das zu testende Widget in <strong>MaterialApp</strong> oder <strong>CupertinoApp</strong> zu verpacken: </p><br><pre> <code class="java hljs">await tester.pumpWidget( MaterialApp( home: PhoneInputScreen(mock), ), );</code> </pre> <br><p>  Nach dem Erstellen eines Test-Widgets und nach allen damit verbundenen Aktionen m√ºssen Sie <strong>tester.pumpAndSettle ()</strong> aufrufen, damit die Testumgebung alle √Ñnderungen im Status des Widgets verarbeitet. </p><br><h2 id="integration-tests-integracionnye-testy">  Integrationstests </h2><br><h3 id="obschie-svedeniya-1">  Allgemeine Informationen </h3><br><p>  Im Gegensatz zu Widget-Tests √ºberpr√ºft der Integrationstest die gesamte Anwendung oder einen gro√üen Teil davon.  Ziel des Integrationstests ist es, sicherzustellen, dass alle Widgets und Dienste wie erwartet zusammenarbeiten.  Der Betrieb des Integrationstests kann im Simulator oder auf dem Ger√§tebildschirm beobachtet werden.  Diese Methode ist ein guter Ersatz f√ºr manuelle Tests.  Dar√ºber hinaus k√∂nnen Integrationstests verwendet werden, um die Anwendungsleistung zu testen. </p><br><p>  Der Integrationstest wird normalerweise auf einem realen Ger√§t oder Emulator wie iOS Simulator oder Android Emulator durchgef√ºhrt. </p><br><p>  Dateien mit Integrationstests befinden sich normalerweise im Unterverzeichnis <strong>test_driver</strong> des Projekts. </p><br><p>  Die Anwendung ist vom Testtreibercode isoliert und startet danach.  Mit dem Testtreiber k√∂nnen Sie die Anwendung w√§hrend des Tests steuern.  Es sieht so aus: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter_driver/driver_extension.dart'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:app_package_name/main.dart'</span></span> as app; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ enableFlutterDriverExtension(); app.main(); }</code> </pre> <br><p>  Die Tests werden √ºber die Befehlszeile ausgef√ºhrt.  Wenn der Start der Zielanwendung in der Datei <strong>app.dart</strong> beschrieben ist und das <strong>Testskript</strong> <strong>app_test.dart</strong> hei√üt, reicht der folgende Befehl aus: </p><br><pre> <code class="plaintext hljs">$ flutter drive --target=test_driver/app.dart</code> </pre> <br><p>  Wenn das Testskript einen anderen Namen hat, m√ºssen Sie ihn explizit angeben: </p><br><pre> <code class="plaintext hljs">$ flutter drive --target=test_driver/app.dart --driver=test_driver/home_test.dart</code> </pre> <br><p>  Ein Test wird von der <strong>Testfunktion erstellt</strong> und von der <strong>Gruppenfunktion</strong> gruppiert. </p><br><pre> <code class="java hljs">group(<span class="hljs-string"><span class="hljs-string">'park-flutter app'</span></span>, () { <span class="hljs-comment"><span class="hljs-comment">// ,       FlutterDriver driver; //     setUpAll(() async { driver = await FlutterDriver.connect(); }); //     tearDownAll(() async { if (driver != null) { driver.close(); } }); test(' ', () async { //   }); test(' ', () async { //   }); }</span></span></code> </pre> <br><p>  Dieses Beispiel zeigt den Code zum Erstellen eines Testtreibers, √ºber den Tests mit der zu testenden Anwendung interagieren. </p><br><h3 id="vzaimodeystvie-s-testiruemym-prilozheniem">  Interaktion mit der getesteten Anwendung </h3><br><p>  Das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>FlutterDriver-</strong></a> Tool interagiert mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>Testanwendung</strong></a> √ºber die folgenden Methoden: </p><br><ul><li>  <strong>Tippen Sie auf</strong> - Senden Sie einen Klick an das Widget. </li><li>  <strong>waitFor</strong> - Warten Sie, bis das Widget auf dem Bildschirm angezeigt wird. </li><li>  <strong>waitForAbsent</strong> - Warten Sie, bis das Widget verschwindet. </li><li>  <strong>scroll</strong> and <strong>scrollIntoView</strong> , <strong>scrollUntilVisible</strong> - <strong>Scrollen</strong> <strong>Sie auf</strong> dem Bildschirm zum angegebenen Versatz oder zum gew√ºnschten Widget. </li><li>  <strong>enterText</strong> , <strong>getText</strong> - <strong>Geben</strong> <strong>Sie</strong> Text ein oder √ºbernehmen Sie den Text des Widgets. </li><li>  <strong>Screenshot</strong> - Screenshot erstellen; </li><li>  <strong>requestData</strong> - komplexere Interaktion durch einen Funktionsaufruf innerhalb der zu <strong>testenden</strong> Anwendung. </li></ul><br><p>  Es kann vorkommen, dass Sie den globalen Status der Anwendung √ºber den Testcode beeinflussen m√ºssen.  Zum Beispiel, um den Integrationstest zu vereinfachen, indem ein Teil der Dienste in der Anwendung durch moki ersetzt wird.  In der Anwendung k√∂nnen Sie einen Anforderungshandler angeben, auf den √ºber einen Aufruf von <strong>driver.requestData ('some param')</strong> im <strong>Testcode zugegriffen</strong> werden kann: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Future&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dataHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String msg)</span></span></span><span class="hljs-function"> async </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (msg == <span class="hljs-string"><span class="hljs-string">"some param"</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//       return 'some result'; } } enableFlutterDriverExtension(handler: dataHandler); app.main(); }</span></span></code> </pre> <br><h3 id="poisk-vidzhetov-1">  Widget-Suche </h3><br><p>  Die Suche nach Widgets w√§hrend des Integrationstests mit dem globalen Suchobjekt unterscheidet sich in der Zusammensetzung der Methoden von √§hnlichen Funktionen beim Testen von Widgets.  Die allgemeine Bedeutung √§ndert sich jedoch praktisch nicht: </p><br><ul><li>  im Baum nach Text - <strong>find.text</strong> , <strong>find.widgetWithText</strong> ; </li><li>  per Schl√ºssel - <strong>find.byValueKey</strong> ; </li><li>  nach Typ - <strong>find.byType</strong> ; </li><li>  an der Eingabeaufforderung - <strong>find.byTooltip</strong> ; </li><li>  nach semantischem Label - <strong>find.bySemanticsLabel</strong> ; </li><li>  nach Position im Baum <strong>find.descendant</strong> und <strong>find.ancestor</strong> . </li></ul><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Wir haben nach M√∂glichkeiten gesucht, das Testen einer mit Flutter geschriebenen Anwendungsschnittstelle zu organisieren.  Wir k√∂nnen sowohl Tests implementieren, um zu √ºberpr√ºfen, ob der Code den Anforderungen der technischen Spezifikationen entspricht, als auch Tests mit genau dieser Aufgabe durchf√ºhren.  Von den festgestellten M√§ngeln bei Integrationstests gibt es keine M√∂glichkeit, mit den Systemdialogen der Plattform zu interagieren.  Zum Beispiel k√∂nnen Berechtigungsanforderungen vermieden werden, indem Berechtigungen √ºber die Befehlszeile in der Anwendungsinstallationsphase ausgegeben werden, wie in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Ticket beschrieben</a> . </p><br><p>  Dieser Artikel ist der Ausgangspunkt f√ºr die Untersuchung eines Testthemas, das den Leser kurz in die Funktionsweise des Testens von Benutzeroberfl√§chen einf√ºhrt.  Es wird keine Lesedokumentation gespeichert, anhand derer Sie leicht herausfinden k√∂nnen, wie eine bestimmte Klasse oder Methode funktioniert.  Schlie√ülich erfordert das Studium eines neuen Themas f√ºr sich selbst zun√§chst ein Verst√§ndnis aller laufenden Prozesse als Ganzes ohne √ºberm√§√üige Details. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de468631/">https://habr.com/ru/post/de468631/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de468621/index.html">Wir √ºbersetzen das Heimnetzwerk in DoH oder einen weiteren Klick auf die Filternase</a></li>
<li><a href="../de468623/index.html">Ich m√∂chte Bewertungen zu Habr</a></li>
<li><a href="../de468625/index.html">Serverlos: 15% langsamer und achtmal teurer</a></li>
<li><a href="../de468627/index.html">ADAM-6200 E / A-Module</a></li>
<li><a href="../de468629/index.html">Wie ich einen Filter erstellt habe, der das Bild auch nach einer Million L√§ufen nicht besch√§digt - Teil 2</a></li>
<li><a href="../de468635/index.html">√úbergangsmetall-Dichalkogenide: Enth√ºllung der Geheimnisse des WS2-Kristallwachstums</a></li>
<li><a href="../de468637/index.html">Umgang mit gro√üen Datenmengen in Pandas. Wir arbeiten mit der FIAS-Datenbank unter Verwendung von Python und 8 GB Speicher</a></li>
<li><a href="../de468639/index.html">Was ist neu in Webkonsolen 2019</a></li>
<li><a href="../de468641/index.html">Tutorial zum Erstellen einer Blockchain-L√∂sung in Hyperledger Composer</a></li>
<li><a href="../de468645/index.html">Zwei Seiten reichten aus, um die 30-j√§hrige Hypothese aus dem Bereich der Informatik zu belegen.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>