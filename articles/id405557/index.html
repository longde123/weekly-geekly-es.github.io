<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘©ğŸ» â¸ï¸ ğŸ‘¨ğŸ½â€âš•ï¸ Rumah pintar dari smartphone lama atau otomatisasi rumah antik ğŸ¥ƒ ğŸš£ ğŸŒ™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo para pembaca! Kisah lain tentang bagaimana manajer tautan tengah, meniup debu dari kelenjar basi di rak, melakukan hal ini, yang membuat para pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rumah pintar dari smartphone lama atau otomatisasi rumah antik</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/405557/">  Halo para pembaca!  Kisah lain tentang bagaimana manajer tautan tengah, meniup debu dari kelenjar basi di rak, melakukan hal ini, yang membuat para profesional dari semua garis memiliki rasa sakit di mata.  Â¡Tapi, itu berhasil, amigo! <br><br><img src="https://habrastorage.org/web/f60/376/42b/f6037642b6b94e65a098cf7d930fbc45.jpg"><br><br>  Saya akui, kali ini saya ingin melakukan semuanya dengan benar.  Mengambil Raspbery Pi dari rak.  Kue itu sama dengan yang sudah saya gunakan di mesin pemotong rumput robot saya: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ke pos</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ke pos lain</a> .  Dia mengambil mosquitto, semuanya seharusnya bekerja pada mqtt, tetapi Anda tidak akan lari dari mana pun dari diri Anda sendiri.  Di bawah luka, lautan garu, sepeda, solder yang buruk, neraka bagi seorang perfeksionis. <br><a name="habracut"></a><br><img src="https://habrastorage.org/files/4c5/827/fc2/4c5827fc2a714b56bb64c18700b69382.jpg" alt="gambar"><br><br>  Semuanya dimulai dengan keinginan untuk melengkapi proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Noorik</a> saya, yang saya taruh di pintu gerbang saya.  Singkatnya - ini adalah solusi DIY untuk blok GSM yang membuka gerbang. <br>  Untuk membuka gerbang, cukup untuk menutup kontak tertentu di papan tulis. <br><br><img src="https://habrastorage.org/files/5f3/8e2/40c/5f38e240c82f4e4692737b0f5e600041.jpg" alt="gambar"><br><br>  Arduino diganti dengan esp8266 dan membuat antarmuka web dengan tombol terbuka.  Ternyata menarik, tetapi kemudian saya ingin antarmuka tunggal untuk membuka pintu geser, pintu garasi sectional dan gerbang. <br><br>  Ketika saya mulai melukis semua Daftar Keinginan saya, ternyata saya membutuhkan hal yang sama: <br><br><ol><li>  sistem kontrol ketel </li><li>  sistem keamanan </li><li>  antarmuka seluler ke kamera pengintai </li><li>  data suhu di rumah dan di jalan </li></ol><br><h2>  Backend </h2><br>  Malinka bekerja dengan baik, tetapi kali berikutnya dinyalakan, ia berhenti menyala.  LED daya pertama menyala, kemudian mati dengan lancar dalam 3-5 detik, elemen (polyfuse T075) di dekat soket daya sangat panas.  Dan di sini sudah tangan gatal untuk menerapkan mqtt, blackger, untuk mengundang pelacur dan kesenangan lainnya. <br><br><img src="https://habrastorage.org/web/62d/d94/26c/62dd9426ccc24ae5ae0a851147fb62ae.jpg"><br><br>  Tidak masalah, manfaat nasibnya sudah menunggu pasien lain.  Pi oranye nol ke studio.  Betapa saya tidak menderita dengan mukjizat pemikiran Cina ini - untuk menghembuskan nafas hidup menjadi kue kecil ternyata merupakan masalah di luar kekuatan saya.  Saya mengunduh firmware di situs resmi dan kiri, saya membeli firmware dari tangan saya dan ditukar dengan cryptocurrency.  Saya pikir saya baru saja menemukan sampel yang rusak. <br><br><img src="https://habrastorage.org/web/63c/64d/d6f/63c64dd6f17f48c687b33e036ef859f6.jpg"><br><br>  Saya menyadari bahwa takdir itu sendiri yang mendorong saya ke lengan konstruksi sepeda, dan untuk menyembunyikan kegembiraan saya, saya terjun ke dalam kegiatan ini dengan kepala. <br><br><img src="https://habrastorage.org/web/206/f40/1e3/206f401e31ff4a06b895f513756e181e.jpg"><br><br>  Pertama-tama, saya memutuskan untuk menggunakan ponsel pintar sebagai head unit (broker, server).  Anda tahu hal-hal lama ini tidak hilang begitu saja.  Saya menggunakannya, istri saya, anak perempuan, kemudian saya mengendalikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">robot saya dengan peniup salju</a> dari smartphone ini, saya mencoba untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menenggelamkannya di sungai</a> (saya tidak pernah mencapai Sungai Moskow, tetapi pipa ini membuat desiran di Pakhra asli saya).  Dan inilah dia - kehidupan baru untuk Samsung Galaxy S3. <br><br>  Menginstal Palapa Web Server dan server FTP pada smartphone.  Idenya sederhana dalam database MySQL dengan hanya tiga tabel: nilai, log, aturan. <br><br><ul><li>  Dalam tabel nilai, pasangan kunci / nilai. </li><li>  Tabel log menunjukkan riwayat perubahan nilai. </li><li>  Di tabel aturan, aturan untuk mengubah beberapa sel tergantung pada nilai yang lain. </li></ul><br>  Semua tambak ini menyajikan satu skrip php, yang menulis atau mengeluarkan data dari database dengan permintaan http, dan juga melayani aturan terjadwal. <br>  Saya bahkan tidak mengerti apa level pemrograman yang harus dilihat seseorang, tetapi saya siap menunjukkan kode tersebut kepada Anda - tulis ke LAN. <br><br><h2>  Frontend </h2><br><img src="https://habrastorage.org/web/f60/376/42b/f6037642b6b94e65a098cf7d930fbc45.jpg"><br><br>  Jangan melemparkan batu ke arahku, aku mengakui diriku.  Saya menggunakan Bootstrap.  Ya, berdosa. <br>  Pikiran awal adalah untuk membungkus semuanya melalui Phonegap dan mendapatkan aplikasi lengkap.  Saya akan mengatakan lebih banyak, saya melakukan hal itu, tetapi pada akhirnya versi online ternyata lebih efisien.  Saya dan istri di telepon hanya membuat pintasan di desktop untuk membuka halaman yang diinginkan pada ip internal. <br><br>  Setiap elemen merespons peristiwa klik + keadaan ajax diperiksa oleh permintaan ke server dan diubah jika perlu.  Sangat nyaman, karena Anda melihat semua perubahan yang telah diberlakukan oleh aturan atau dibuat oleh pengguna lain. <br>  Sebenarnya, kode on demand tanpa masalah. <br><br><h2>  ESP-8266 </h2><br><img src="https://habrastorage.org/web/900/20a/853/90020a8530cc491cadc9aa15c8fb4e5c.jpg"><br><br>  Saya mencoba berbagai modul dan ESP-8266 murni.  Hasilnya, modul LOLIN V3 ternyata menjadi pilihan yang paling nyaman. <br><br><img src="https://habrastorage.org/web/325/c58/cda/325c58cda83f4c9a8cef58f7a1d88e8a.jpg"><br><br>  Catu daya menggunakan catu daya switching. <br><br><img src="https://habrastorage.org/web/268/d77/8ee/268d778ee71443c9a369bea9bb71491a.jpg"><br><br>  Modul gerbang memerlukan relay dan saya khawatir bahwa relay kontak akan terpicu.  Hasilnya, kondisi solid dan kontak berfungsi.  Masalahnya adalah bahwa sejumlah besar modul bahkan tanpa label tentang itu dipicu rendah. <br><br><img src="https://habrastorage.org/web/c81/9a8/130/c819a813070a47b5b6ebcb23a6d1bc8d.jpg"><br><br>  Ketika modul dihidupkan, pembukaan jangka pendek terjadi, yang mengarah ke pembukaan tidak disengaja ketika daya dihidupkan.  Itu diselesaikan dengan menarik ke nol dan menyatakan negara sebelum menyatakan jenis output. <br><br><pre><code class="hljs lisp">digitalWrite(<span class="hljs-name"><span class="hljs-name">rele</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)<span class="hljs-comment"><span class="hljs-comment">; digitalWrite(rele2, 1); pinMode(rele, OUTPUT); pinMode(rele2, OUTPUT);</span></span></code> </pre> <br>  Hasilnya, modul untuk bengkel garasi terlihat seperti ini.  Sensor PIR untuk mendeteksi gerakan digigit lembut ke kulit asli. <br><br><img src="https://habrastorage.org/web/2ed/8f6/3b6/2ed8f63b60ea4b7abfb7bda9c04697c6.jpg"><br><br>  Di ruang ketel, ketel saya sangat sederhana dan tidak ada pertanyaan tentang otomatisasi kompleks. <br><br><img src="https://habrastorage.org/web/49a/966/18a/49a96618a1ec46b28d2ac11a79096533.jpg"><br><br>  Selain itu, setiap rangkaian melayani pompa yang terpisah. <br><br><img src="https://habrastorage.org/web/220/bc5/af7/220bc5af7fcd43e0b90dcbf335f9b66a.jpg"><br><br>  Serangkaian dengan mesin, relay untuk mengendalikan pompa dan boiler dihidupkan. <br><br><img src="https://habrastorage.org/web/ae4/8b6/e04/ae48b6e0415047b58588b2a2cbfc5b1d.jpg"><br><br>  Dengan lembut mendorong seluruh perekonomian ke dalam perisai. <br><br><img src="https://habrastorage.org/web/0cc/5d3/28d/0cc5d328d26b4f2a83450df8e2ced105.jpg"><br><br><h2>  Firmware </h2><br>  Saya memutuskan untuk menggunakan IDE Arduino untuk firmware agar tidak mengacaukan nodemcu dan lua.  Di Internet dan di GT khususnya, sejumlah besar informasi untuk pemula. <br>  Dari yang menarik, menurut saya, fungsi koneksi ke wifi.  Faktanya adalah di rumah saya ada 4 jaringan wifi dan dapat ditambahkan.  Agar tidak menetapkan nama jaringan dengan kaku, pertama-tama kami memindai jaringan yang tersedia. <br><br><div class="spoiler">  <b class="spoiler_title">Kode SetupWiFi ()</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">void</span></span> setupWiFi() { WiFi.mode(WIFI_STA); WiFi.disconnect(); delay(<span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(WiFi.status() != WL_CONNECTED) { <span class="hljs-type"><span class="hljs-type">int</span></span> n = WiFi.scanNetworks(); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println("scan done"); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println("no networks found"); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print(n); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println(" networks found"); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; ++i) { <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println(""); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print(i + <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print(": "); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print(WiFi.SSID(i)); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print(" ("); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print(WiFi.RSSI(i)); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print(")"); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println((WiFi.encryptionType(i) == ENC_TYPE_NONE)?" ":"*"); j=<span class="hljs-number"><span class="hljs-number">0</span></span>; ssid=WiFi.SSID(i); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print("Connecting"); ssid.toCharArray(charBuf, <span class="hljs-number"><span class="hljs-number">50</span></span>); WiFi.<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>(charBuf,WIFI_PASS); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(WiFi.status() != WL_CONNECTED) { delay(<span class="hljs-number"><span class="hljs-number">500</span></span>); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print("."); j++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(j&gt;<span class="hljs-number"><span class="hljs-number">20</span></span>){ break; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((WiFi.status() == WL_CONNECTED)){ break; } } } } <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println("Connected"); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println(WiFi.localIP()); }</code> </pre> <br></div></div><br>  Ketika mode otomatis ruang ketel menyala, suhu luar dan suhu pendingin diperiksa sesuai jadwal. <br><br><ul><li>  Pada suhu di bawah 14 * C, lantai hangat lantai pertama dihidupkan. </li><li>  Pada suhu di bawah 4 * C, semua sirkuit dinyalakan. </li></ul><br>  Suhu pendingin dipilih sesuai dengan tabel tergantung pada penampang pipa dan suhu luar.  Ketika suhu ruangan yang dibutuhkan tercapai, boiler akan mati.  Untuk semua menerapkan histeresis tertentu untuk memperlancar nilai transisi. <br><br>  Sistem keamanan bekerja lebih mudah.  Ada aturan dalam tabel bahwa ketika sistem keamanan aktif, jika pergerakan terdeteksi di salah satu sensor PIR, SMS dikirim melalui API dari salah satu layanan. <br><br><h2>  Paket </h2><br><ul><li>  Pembuatan versi online pada server jarak jauh dan sinkronisasi perubahan untuk kemungkinan kendali jarak jauh. </li><li>  Menampilkan data dari beacon GSM / GPS di dalam mobil; </li><li>  Membuka gerbang ketika mobil kami muncul di area tertentu; </li><li>  Koneksi ke sistem kendali jarak jauh; </li></ul><br>  <b>Voting berdasarkan foto.</b>  <b>Proyek mana yang harus dilakukan selanjutnya?</b> <br><br><div class="spoiler">  <b class="spoiler_title">Selesaikan KickBrick</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://geektimes.ru/post/281716/</a> <br><img src="https://habrastorage.org/web/626/a41/9a5/626a419a5b1143f092c0549638cbf9cc.jpg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Selesaikan printer Delta 3D pada pin konstruksi</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/7ff/ec2/55e/7ffec255ec8b4196a7f1c9cc92ca9c4e.jpg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Stabilizer untuk kamera SLR</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/138/3b8/b61/1383b8b61f724649b6cb832d0e69b6da.jpg"><br></div></div><br>  Terima kasih atas perhatian anda  Denganmu adalah SlavaGik. <br><br><img src="https://habrastorage.org/web/ebc/aa9/11a/ebcaa911ade648528ae7128e3031e563.jpg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id405557/">https://habr.com/ru/post/id405557/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id405545/index.html">Letakkan oven pada mode Apocalypse: tinjauan perangkat untuk kontrol pra-penerbangan senjata nuklir</a></li>
<li><a href="../id405547/index.html">Dua cara baru untuk mengarahkan camcorder secara otomatis</a></li>
<li><a href="../id405551/index.html">Casey Rias: Perangkat Lunak sebagai Seni</a></li>
<li><a href="../id405553/index.html">Kekuasaan menyebabkan kerusakan otak</a></li>
<li><a href="../id405555/index.html">Navi untuk iPhone Terbang: DJI Spark Fly More Combo</a></li>
<li><a href="../id405561/index.html">Ulasan Langsung Chocola3D Food 3D Printer</a></li>
<li><a href="../id405563/index.html">Microsoft sedang mengembangkan akselerator AI untuk HoloLens</a></li>
<li><a href="../id405565/index.html">DNK | PRIME Bagian Dua: Pengujian</a></li>
<li><a href="../id405567/index.html">Neurogenesis: dasar fisiologis dan perspektif regulasi untuk tujuan terapeutik</a></li>
<li><a href="../id405571/index.html">Elemen Sistem Inovasi Nasional AS, Bagian 1: Lingkungan Bisnis dan Pajak, Perdagangan dan Kebijakan Ekonomi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>