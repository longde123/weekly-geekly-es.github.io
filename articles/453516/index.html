<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ûüèø üë©üèª‚Äçüåæ ‚õ∑Ô∏è Automatizaci√≥n para los m√°s peque√±os. Parte cero Planificacion üëÄ üö∑ üèÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SDSM ha terminado, pero el deseo incontrolado de escribir permanece. 

  

 Durante muchos a√±os, nuestro hermano sufri√≥ el desempe√±o del trabajo de ru...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatizaci√≥n para los m√°s peque√±os. Parte cero Planificacion</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453516/"> SDSM ha terminado, pero el deseo incontrolado de escribir permanece. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/a63/9b0/65d/a639b065d34f28321bd9918e155eb964.jpg" width="800"></a> <br><br>  Durante muchos a√±os, nuestro hermano sufri√≥ el desempe√±o del trabajo de rutina, cruz√≥ los dedos antes de comprometerse y no pudo dormir debido a los retrocesos nocturnos. <br>  Pero los tiempos oscuros est√°n llegando a su fin. <br><br>  Con este art√≠culo, comenzar√© una serie sobre c√≥mo veo la automatizaci√≥n. <br>  En el proceso, abordaremos las etapas de automatizaci√≥n, almacenando variables, formalizando el dise√±o, con RestAPI, NETCONF, YANG, YDK y programaremos mucho. <br>  Significa para <i>m√≠</i> que a) esta no es una verdad objetiva, b) no incondicionalmente el mejor enfoque c) mi opini√≥n puede cambiar incluso durante el movimiento del primer al √∫ltimo art√≠culo; para ser honesto, desde la etapa de borrador hasta la publicaci√≥n, reescrib√≠ todo dos veces. <br><br><a name="habracut"></a><br><h1>  Contenido </h1><br><ol><li>  <b>Objetivos</b> <br><ol><li>  La red es como un solo organismo. </li><li>  Prueba de configuraci√≥n </li><li>  Versionado </li><li>  Servicios de monitoreo y autocuraci√≥n </li></ol><br></li><li>  <b>Significa</b> <br><ol><li>  Sistema de inventario </li><li>  Sistema de gesti√≥n de espacio IP </li><li>  Sistema de descripci√≥n de servicios de red </li><li>  Mecanismo de inicializaci√≥n del dispositivo </li><li>  Modelo de configuraci√≥n agn√≥stica del proveedor </li><li>  Conductor espec√≠fico del proveedor </li><li>  El mecanismo para entregar la configuraci√≥n al dispositivo. </li><li>  CI / CD </li><li>  Mecanismo de respaldo y desviaci√≥n </li><li>  Sistema de monitoreo </li></ol><br></li><li>  <b>Conclusi√≥n</b> <br></li></ol><br><hr><br><br>  Intentar√© mantener el ADSM en un formato ligeramente diferente del SDSM.  Continuar√°n apareciendo grandes art√≠culos detallados y numerados, y entre ellos publicar√© peque√±as notas de la experiencia cotidiana.  Tratar√© de luchar contra el perfeccionismo aqu√≠ y no lamer cada uno de ellos. <br><br><blockquote>  Qu√© gracioso que la segunda vez tengas que ir por el mismo camino. <br><br>  Primero, tuve que escribir art√≠culos sobre la red en s√≠ debido al hecho de que no estaban en RuNet. <br><br>  Ahora no pude encontrar un documento completo que sistematizara los enfoques de automatizaci√≥n y utilizara ejemplos pr√°cticos simples para analizar las tecnolog√≠as anteriores. <br><br>  Quiz√°s me equivoque, por lo tanto, arroje enlaces a recursos adecuados.  Sin embargo, esto no cambiar√° mi determinaci√≥n de escribir, porque el objetivo principal sigue siendo aprender algo por m√≠ mismo, y facilitarle la vida a mi vecino es un bono agradable que acaricia el gen para la difusi√≥n de la experiencia. <br></blockquote><br><br>  Intentaremos tomar un centro de datos LAN DC de tama√±o mediano y resolver todo el esquema de automatizaci√≥n. <br>  Har√© algunas cosas casi la primera vez contigo. <br><br><blockquote>  En las ideas y herramientas descritas aqu√≠, no ser√© original.  Dmitry Figol tiene un excelente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canal con transmisiones sobre este tema</a> . <br>  Los art√≠culos en muchos aspectos se superpondr√°n con ellos. <br></blockquote><br><br>  La LAN DC tiene 4 DC, unos 250 conmutadores, media docena de enrutadores y un par de firewalls. <br>  No es Facebook, pero es suficiente para pensar profundamente sobre la automatizaci√≥n. <br>  Sin embargo, existe la opini√≥n de que si tiene m√°s de 1 dispositivo, ya necesita automatizaci√≥n. <br>  De hecho, es dif√≠cil imaginar que alguien pueda vivir sin al menos un mont√≥n de guiones hasta la rodilla. <br>  Aunque escuch√© que existen tales oficinas donde las direcciones IP se mantienen en Excel, y cada uno de los miles de dispositivos de red se configura manualmente y tiene su propia configuraci√≥n √∫nica.  Esto, por supuesto, puede pasarse como arte contempor√°neo, pero los sentimientos del ingeniero ciertamente se ofender√°n. <br><br><h1>  Objetivos </h1><br>  Ahora estableceremos los objetivos m√°s abstractos: <br><ul><li>  La red es como un solo organismo. </li><li>  Prueba de configuraci√≥n </li><li>  Versiones de estado de red </li><li>  Servicios de monitoreo y autocuraci√≥n </li></ul><br>  M√°s adelante en este art√≠culo analizaremos qu√© medios usaremos, y en lo siguiente, metas y medios en detalle. <br><br><h2>  La red es como un solo organismo. </h2><br>  La frase definitoria del ciclo, aunque a primera vista puede no parecer tan significativa: <b>configuraremos la red, no los dispositivos individuales</b> . <br>  En los √∫ltimos a√±os, hemos visto un cambio en el √©nfasis en c√≥mo tratar la red como una entidad √∫nica, por lo tanto, la <i>red definida por software</i> , <i>las redes impulsadas por la intenci√≥n</i> y <i>las</i> redes <i>aut√≥nomas</i> llegan a nuestras vidas. <br>  Despu√©s de todo, lo que necesitan globalmente las aplicaciones de la red: conectividad entre los puntos A y B (bueno, a veces + B-Z) y aislamiento de otras aplicaciones y usuarios. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b86/c83/12c/b86c8312c49342c64d8ec3c2c471782c.jpg" width="400"><br><br>  Y, por lo tanto, nuestra tarea en esta serie es <b>construir un sistema</b> que admita la configuraci√≥n actual de <b>toda la red</b> , que ya se descompone en la configuraci√≥n actual en cada dispositivo de acuerdo con su funci√≥n y ubicaci√≥n. <br>  <b>El</b> sistema de administraci√≥n de red implica que para hacer cambios recurrimos a √©l, y este, a su vez, calcula el estado deseado para cada dispositivo y lo configura. <br>  Por lo tanto, minimizamos el uso de CLI en nuestras manos a casi cero (cualquier cambio en la configuraci√≥n del dispositivo o el dise√±o de la red debe formalizarse y documentarse) y solo luego desplegarse en los elementos de red necesarios. <br><blockquote>  Es decir, por ejemplo, si decidimos que a partir de ahora los conmutadores de montaje en bastidor de Kazan deber√≠an anunciar dos redes en lugar de una, <br><ol><li>  Primero documentamos los cambios en los sistemas. </li><li>  Generamos la configuraci√≥n de destino de todos los dispositivos de red. </li><li>  Iniciamos el programa de actualizaci√≥n de la configuraci√≥n de la red, que calcula qu√© debe eliminarse en cada nodo, qu√© agregar y lleva los nodos al estado deseado. </li></ol><br>  Al mismo tiempo, con nuestras manos hacemos cambios solo en el primer paso. <br></blockquote><br><br><h2>  Prueba de configuraci√≥n </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Se sabe</a> que el 80% de los problemas suceden durante los cambios de configuraci√≥n; una evidencia indirecta de esto es que durante las vacaciones de A√±o Nuevo, generalmente todo est√° tranquilo. <br>  Personalmente, presenci√© docenas de tiempos de inactividad globales debido a un error humano: el comando incorrecto, la configuraci√≥n se ejecut√≥ en la rama incorrecta, la comunidad olvid√≥, demoli√≥ MPLS globalmente en el enrutador, configur√≥ cinco piezas de hierro y no not√≥ el sexto error, cometi√≥ los viejos cambios realizados por otra persona .  Escenarios la oscuridad es oscura. <br><br>  La automatizaci√≥n nos permitir√° cometer menos errores, pero a mayor escala.  Por lo tanto, puede bloquear no un dispositivo, sino toda la red a la vez. <br><br>  Desde tiempos inmemoriales, nuestros abuelos verificaron la correcci√≥n de los cambios realizados con un ojo agudo, huevos de acero y la eficiencia de la red despu√©s de desplegarlos. <br>  Esos abuelos, cuyo trabajo condujo al tiempo de inactividad y p√©rdidas catastr√≥ficas, dejaron menos descendientes y deber√≠an morir con el tiempo, pero la evoluci√≥n es un proceso lento y, por lo tanto, no todos verifican los cambios en el laboratorio antes. <br>  Sin embargo, a la vanguardia de aquellos que automatizaron el proceso de probar la configuraci√≥n y su posterior aplicaci√≥n a la red.  En otras palabras, tom√© prestado el procedimiento CI / CD ( <a href="">Integraci√≥n continua, Implementaci√≥n continua</a> ) de los desarrolladores. <br>  En una parte, veremos c√≥mo implementar esto usando un sistema de control de versiones, probablemente un github. <br><br><blockquote>  Tan pronto como se acostumbre a la idea de un CI / CD de red, de la noche a la ma√±ana, el m√©todo de verificar la configuraci√≥n aplic√°ndolo a la red de producci√≥n le parecer√° una ignorancia medieval temprana.  Sobre c√≥mo martillar una ojiva con un martillo. <br></blockquote><br><br>  Una continuaci√≥n org√°nica de las ideas sobre <b>el</b> sistema de administraci√≥n de red y CI / CD es la versi√≥n completa de la configuraci√≥n. <br><br><h2>  Versionado </h2><br>  Asumiremos que con cualquier cambio, incluso el m√°s peque√±o, incluso en un dispositivo discreto, toda la red pasa de un estado a otro. <br>  Y siempre no ejecutamos el comando en el dispositivo, cambiamos el estado de la red. <br>  ¬øAhora vamos a obtener estos estados y llamarlos versiones? <br><br>  Digamos que la versi√≥n actual es 1.0.0. <br>  ¬øHa cambiado la direcci√≥n IP de la interfaz Loopback en uno de los ToR?  Esta es una versi√≥n menor: obtenga el n√∫mero 1.0.1. <br>  Se revisaron las pol√≠ticas de importaci√≥n de rutas en BGP, un poco m√°s serio, ya 1.1.0 <br>  Decidimos deshacernos de IGP y cambiar solo a BGP; este es un cambio de dise√±o radical: 2.0.0. <br><br>  Al mismo tiempo, diferentes DC pueden tener diferentes versiones: la red se est√° desarrollando, se est√°n instalando nuevos equipos, en alg√∫n lugar se agregan nuevos niveles de columna vertebral, en alg√∫n lugar, no, etc. <br><br>  Hablaremos sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">versiones sem√°nticas</a> en un art√≠culo separado. <br><br>  Repito: cualquier cambio (excepto los comandos de depuraci√≥n) es una actualizaci√≥n de la versi√≥n.  Los administradores deben ser notificados de cualquier desviaci√≥n de la versi√≥n actual. <br><br>  Lo mismo se aplica a la reversi√≥n de los cambios: esta no es la abolici√≥n de los √∫ltimos comandos, no es una reversi√≥n por parte del sistema operativo del dispositivo, esto est√° llevando a toda la red a una nueva (antigua) versi√≥n. <br><br><h2>  Servicios de monitoreo y autocuraci√≥n </h2><br>  Esta tarea evidente en las redes modernas llega a un nuevo nivel. <br>  A menudo, los grandes proveedores de servicios practican el enfoque de que un servicio ca√≠do debe terminarse r√°pidamente y plantearse uno nuevo, en lugar de averiguar qu√© sucedi√≥. <br>  "Muy" significa que desde todos los lados es necesario untar abundantemente con el monitoreo, que en segundos detectar√° las m√°s m√≠nimas desviaciones de la norma. <br>  Y aqu√≠ no hay suficientes m√©tricas familiares, como cargar una interfaz o la accesibilidad de un nodo.  No hay suficiente y seguimiento manual del oficial de servicio para ellos. <br>  Para muchas cosas, generalmente deber√≠a haber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una autocuraci√≥n</a> : los controles se encendieron en rojo y se fueron del pl√°tano, donde duele. <br><br>  Y aqu√≠ tambi√©n monitoreamos no solo dispositivos individuales, sino tambi√©n el estado de la red en su conjunto, tanto whitebox, que es relativamente claro, como blackbox, que ya es m√°s complicado. <br><br><hr><br>  ¬øQu√© necesitamos para implementar planes tan ambiciosos? <br><ul><li>  Tenga una lista de todos los dispositivos en la red, su ubicaci√≥n, roles, modelos, versiones de software. <br>  <i>kazan-leaf-1.lmu.net, Kazan, hoja, Juniper QFX 5120, R18.3.</i> <br></li><li>  Tener un sistema para describir servicios de red. <br>  <i>IGP, BGP, L2 / 3VPN, Pol√≠tica, ACL, NTP, SSH.</i> </li><li>  Poder inicializar el dispositivo. <br>  <i>Nombre de host, gesti√≥n de IP, ruta de gesti√≥n, usuarios, claves RSA, LLDP, NETCONF</i> </li><li>  Configure el dispositivo y lleve la configuraci√≥n a la versi√≥n deseada (incluida la anterior). </li><li>  Configuraci√≥n de prueba </li><li>  Verifique peri√≥dicamente el estado de todos los dispositivos en busca de desviaciones del actual y diga qui√©n deber√≠a hacerlo. <br>  <i>Por la noche, alguien silenciosamente agreg√≥ una regla a la ACL</i> . </li><li>  Supervisar el rendimiento. </li></ul><br><hr><br><br><h1>  Significa </h1><br>  Suena lo suficientemente complicado como para comenzar a descomponer un proyecto en componentes. <br><br>  Y habr√° diez de ellos: <br><ol><li>  Sistema de inventario </li><li>  Sistema de gesti√≥n de espacio IP </li><li>  Sistema de descripci√≥n de servicios de red </li><li>  Mecanismo de inicializaci√≥n del dispositivo </li><li>  Modelo de configuraci√≥n agn√≥stica del proveedor </li><li>  Conductor espec√≠fico del proveedor </li><li>  El mecanismo para entregar la configuraci√≥n al dispositivo. </li><li>  CI / CD </li><li>  Mecanismo de respaldo y desviaci√≥n </li><li>  Sistema de monitoreo </li></ol><br><br><blockquote>  Esto, por cierto, es un ejemplo de c√≥mo cambi√≥ la visi√≥n sobre los objetivos del ciclo: hab√≠a 4 componentes en el borrador de componentes. <br></blockquote><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a5/d86/b10/5a5d86b106e67b2999c659a438394321.png" width="800"><br><br>  En la ilustraci√≥n, describ√≠ todos los componentes y el dispositivo en s√≠. <br>  Los componentes de intersecci√≥n interact√∫an entre s√≠. <br>  Cuanto m√°s grande es el bloque, m√°s atenci√≥n debe prestar a este componente. <br><br><hr><br><h2>  Componente 1. Sistema de inventario </h2><br>  Obviamente, queremos saber a qu√© equipo, d√≥nde se encuentra, a qu√© est√° conectado. <br>  El sistema de inventario es una parte integral de cualquier empresa. <br>  Con mayor frecuencia, para dispositivos de red, la empresa tiene un sistema de inventario separado que resuelve tareas m√°s espec√≠ficas. <br>  Como parte de una serie de art√≠culos, lo llamaremos DCIM - Data Center Infrastructure Management.  Aunque el t√©rmino DCIM en s√≠ mismo, estrictamente hablando, incluye mucho m√°s. <br><br>  Para nuestras tareas, almacenaremos la siguiente informaci√≥n sobre el dispositivo: <br><ul><li>  N√∫mero de inventario </li><li>  T√≠tulo / Descripci√≥n </li><li>  Modelo ( <i>Huawei CE12800, Juniper QFX5120, etc.</i> ) </li><li>  Par√°metros t√≠picos ( <i>placas, interfaces, etc.</i> ) </li><li>  Rol ( <i>hoja, columna vertebral, enrutador de borde, etc.</i> ) </li><li>  Ubicaci√≥n ( <i>regi√≥n, ciudad, centro de datos, bastidor, unidad</i> ) </li><li>  Interconexiones entre dispositivos </li><li>  Topolog√≠a de red </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fa/be1/8fd/1fabe18fd786b3e5aeb432ee382fee64.png" width="400"><br><br>  Est√° perfectamente claro que nosotros mismos queremos saber todo esto. <br>  ¬øPero ayudar√° a la automatizaci√≥n? <br>  Por supuesto <br>  Por ejemplo, sabemos que en este centro de datos en los conmutadores Leaf, si es Huawei, las ACL para filtrar cierto tr√°fico deben aplicarse en la VLAN, y si es Juniper, entonces en la unidad 0 de la interfaz f√≠sica. <br>  O necesita implementar un nuevo servidor Syslog para todos los hu√©spedes de la regi√≥n. <br><br>  En √©l, almacenaremos dispositivos de red virtuales, como enrutadores virtuales o reflectores ra√≠z.  Podemos agregar un servidor DNS, NTP, Syslog y, en general, todo lo que de alguna manera se relaciona con la red. <br><hr><br><h2>  Componente 2. Sistema de gesti√≥n del espacio IP </h2><br>  S√≠, y en nuestro tiempo hay equipos de personas que realizan un seguimiento de los prefijos y las direcciones IP en un archivo de Excel.  Pero el enfoque moderno sigue siendo una base de datos, con una interfaz en nginx / apache, una API y amplias funciones para tener en cuenta las direcciones IP y las redes con separaci√≥n en VRF. <br>  IPAM - Gesti√≥n de direcciones IP. <br><br>  Para nuestras tareas, almacenaremos la siguiente informaci√≥n: <br><ul><li>  VLAN </li><li>  VRF </li><li>  Redes / Subredes </li><li>  Direcciones IP </li><li>  Enlace de direcciones a dispositivos, redes a ubicaciones y n√∫meros de VLAN </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c77/6f7/0fd/c776f70fd00c9292163c3e85e85b7ab2.png" width="400"><br><br>  Una vez m√°s, est√° claro que queremos estar seguros de que al asignar una nueva direcci√≥n IP para el bucle de retorno de ToR, no tropezaremos con el hecho de que ya est√° asignado a alguien.  O que usamos el mismo prefijo dos veces en diferentes extremos de la red. <br>  Pero, ¬øc√≥mo ayuda esto en la automatizaci√≥n? <br>  F√°cil <br>  Solicitamos un prefijo en el sistema con la funci√≥n Loopbacks, en el que hay direcciones IP disponibles para la asignaci√≥n; si es as√≠, seleccione la direcci√≥n; de lo contrario, solicitamos la creaci√≥n de un nuevo prefijo. <br>  O, al crear una configuraci√≥n de dispositivo, desde el mismo sistema podemos averiguar en qu√© VRF debe estar la interfaz. <br>  Y cuando inicia un nuevo servidor, el script ingresa al sistema, descubre en qu√© servidor est√° el conmutador, en qu√© puerto y qu√© subred est√° asignada a la interfaz; la direcci√≥n del servidor se asignar√° desde √©l. <br><br><hr><br>  Pide el deseo de DCIM e IPAM de combinarse en un solo sistema para no duplicar funciones y no servir a dos entidades similares. <br>  Entonces lo haremos. <br><hr><br><h2>  Componente 3. Sistema de descripci√≥n de servicios de red </h2><br>  Si los dos primeros sistemas almacenan variables que a√∫n deben usarse de alguna manera, entonces el tercero describe para cada rol del dispositivo c√≥mo debe configurarse. <br>  Cabe destacar dos tipos diferentes de servicios de red: <br><ul><li>  Infraestructura </li><li>  Cliente </li></ul><br><br>  Los primeros est√°n dise√±ados para proporcionar conectividad b√°sica y administraci√≥n de dispositivos.  Estos incluyen VTY, SNMP, NTP, Syslog, AAA, protocolos de enrutamiento, CoPP, etc. <br>  Los segundos organizan el servicio para el cliente: MPLS L2 / L3VPN, GRE, VXLAN, VLAN, L2TP, etc. <br>  Por supuesto, tambi√©n hay casos l√≠mite: ¬ød√≥nde incluir MPLS LDP, BGP?  S√≠, y los protocolos de enrutamiento se pueden usar para los clientes.  Pero esto no es importante. <br><br>  Ambos tipos de servicios se descomponen en primitivas de configuraci√≥n: <br><ul><li>  interfaces f√≠sicas y l√≥gicas (tag / anteg, mtu) </li><li>  Direcciones IP y VRF (IP, IPv6, VRF) </li><li>  ACL y pol√≠ticas de manejo de tr√°fico </li><li>  Protocolos (IGP, BGP, MPLS) </li><li>  Pol√≠ticas de enrutamiento (listas de prefijos, comunidad, filtros ASN). </li><li>  Servicios de servicio (SSH, NTP, LLDP, Syslog ...) </li><li>  Etc. </li></ul><br>  C√≥mo haremos exactamente esto, no lo pensar√© todav√≠a.  Trataremos en un art√≠culo separado. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/40b/ffe/b1b/40bffeb1b4f75f83d690bb96d2ca8ae1.png" width="400"><br><br>  Si un poco m√°s cerca de la vida, podr√≠amos describir eso <br>  El conmutador hoja debe tener sesiones BGP con todos los conmutadores Spine conectados, importar las redes conectadas al proceso y aceptar solo redes de un prefijo espec√≠fico de los conmutadores Spine.  Limite CoPP IPv6 ND a 10 pps, etc. <br>  A su vez, los giros llevan a cabo sesiones con todos los corpi√±os conectados, actuando como reflectores de la ra√≠z, y reciben de ellos solo rutas de cierta longitud y con una determinada comunidad. <br><hr><br><h2>  Componente 4. Mecanismo de inicializaci√≥n del dispositivo </h2><br>  Bajo este encabezado, combino las muchas acciones que deben ocurrir para que el dispositivo aparezca en los radares y se acceda de forma remota. <br><ol><li>  Inicie el dispositivo en el sistema de inventario. </li><li>  Resalte la direcci√≥n IP de administraci√≥n. </li><li>  Configure el acceso b√°sico a √©l: <br>  Nombre de host, direcci√≥n IP de administraci√≥n, ruta a la red de administraci√≥n, usuarios, claves SSH, protocolos - telnet / SSH / NETCONF </li></ol><br><br>  Hay tres enfoques: <br><ul><li>  Todo es completamente manual.  El dispositivo se lleva a un soporte donde una persona org√°nica com√∫n lo llevar√° al sistema, se conectar√° a la consola y se configurar√°.  Puede funcionar en peque√±as redes est√°ticas. </li><li>  ZTP: aprovisionamiento cero t√°ctil.  Iron vino, se puso de pie, recibi√≥ una direcci√≥n a trav√©s de DHCP, fue a un servidor especial y se configur√≥. </li><li>  La infraestructura de los servidores de consola, donde la configuraci√≥n inicial se produce a trav√©s del puerto de la consola en modo autom√°tico. </li></ul><br><br>  Hablaremos de los tres en un art√≠culo separado. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/16e/464/8dd/16e4648dd13249dc1da87a0b341c305c.png" width="400"><br><br><hr><br><h2>  Componente 5. Modelo de configuraci√≥n independiente del proveedor </h2><br>  Hasta ahora, todos los sistemas han sido trapos dispersos que dan variables y una descripci√≥n declarativa de lo que nos gustar√≠a ver en la red.  Pero tarde o temprano, tienes que lidiar con detalles. <br>  En esta etapa, para cada dispositivo en particular, las primitivas, los servicios y las variables se combinan en un modelo de configuraci√≥n que realmente describe la configuraci√≥n completa de un dispositivo en particular, solo de manera independiente del proveedor. <br>  ¬øQu√© da este paso?  ¬øPor qu√© no configurar inmediatamente el dispositivo, que simplemente puede completar? <br>  De hecho, esto nos permite resolver tres problemas: <br><ol><li>  No se adapte a una interfaz espec√≠fica para interactuar con el dispositivo.  Ya sea CLI, NETCONF, RESTCONF, SNMP, el modelo ser√° el mismo. </li><li>  No conserve el n√∫mero de plantillas / scripts por el n√∫mero de proveedores en la red y, en caso de un cambio de dise√±o, cambie el mismo en varios lugares. </li><li>  Descargue la configuraci√≥n del dispositivo (copia de seguridad), col√≥quela exactamente en el mismo modelo y compare directamente la configuraci√≥n de destino y la disponible para calcular el delta y preparar el parche de configuraci√≥n, que cambiar√° solo aquellas partes que sean necesarias o para detectar desviaciones. </li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/eda/ebf/9c0/edaebf9c0fc5b62c45a9bb555cc30824.png" width="400"><br><br>  Como resultado de esta etapa, obtenemos una configuraci√≥n independiente del proveedor. <br><hr><br><h2>  Componente 6. Controlador espec√≠fico de la interfaz del proveedor </h2><br>  No se consuele con la esperanza de que una vez que pueda configurar un tsiska, ser√° posible de la misma manera que un puente, simplemente envi√°ndoles exactamente las mismas llamadas.  A pesar de la creciente popularidad de las cajas blancas y la aparici√≥n de soporte para NETCONF, RESTCONF, OpenConfig, el contenido espec√≠fico que ofrecen estos protocolos es diferente de un proveedor a otro, y esta es una de sus diferencias competitivas que simplemente no van a renunciar. <br>  Esto es casi lo mismo que OpenContrail y OpenStack, con RestAPI como su interfaz NorthBound, esperan llamadas completamente diferentes. <br><br>  Entonces, en el quinto paso, el modelo independiente del vendedor debe tomar la forma en que ir√° al hierro. <br>  Y aqu√≠, todos los medios son buenos (no): CLI, NETCONF, RESTCONF, SNMP en una simple ca√≠da. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Por lo tanto, necesitamos un controlador que traduzca el resultado del paso anterior al formato deseado para un proveedor en particular: un conjunto de comandos CLI, una estructura XML. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/10d/e75/b99/10de75b9994bbfbb08fef4617baf8382.png" width="400"><br><br><hr><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Componente 7. El mecanismo para entregar la configuraci√≥n al dispositivo. </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generamos la configuraci√≥n, pero a√∫n debe entregarse a los dispositivos, y, obviamente, no a mano. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En primer lugar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nos enfrentamos a la pregunta, ¬øqu√© tipo de transporte utilizaremos? </font><font style="vertical-align: inherit;">Y la elecci√≥n hoy ya no es peque√±a:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CLI (telnet, ssh) </font></font></li><li> <s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SNMP</font></font></s> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> NETCONF </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RESTCONF </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> API REST </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenFlow (aunque est√° eliminado de la lista, ya que esta es una forma de entregar FIB, no configuraciones) </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos a salpicar aqu√≠ con e. </font><font style="vertical-align: inherit;">CLI es legado. </font><font style="vertical-align: inherit;">SNMP ... jeje. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTCONF sigue siendo un animal desconocido; la API REST casi no es compatible con nadie. </font><font style="vertical-align: inherit;">Por lo tanto, nos centraremos en NETCONF en un bucle. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De hecho, como el lector ya entendi√≥, ya hab√≠amos decidido la interfaz en este punto: el resultado del paso anterior ya se present√≥ en el formato de la interfaz seleccionada. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En segundo lugar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ¬øcon qu√© herramientas haremos esto? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ la elecci√≥n tambi√©n es grande:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gui√≥n o plataforma autoescrita. </font><font style="vertical-align: inherit;">Nos armamos con ncclient y asyncIO y hacemos todo nosotros mismos. </font><font style="vertical-align: inherit;">¬øCu√°nto nos cuesta construir un sistema de implementaci√≥n desde cero?</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ansible con su rica biblioteca de m√≥dulos de red. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Salt con su exiguo trabajo en red y paquete con Napalm. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En realidad, Napalm, que conoce a un par de vendedores y eso es todo, adi√≥s. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nornir es otra bestia que estamos preparando para el futuro. </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todav√≠a no hay ning√∫n favorito elegido: pisotearemos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© m√°s es importante aqu√≠? </font><font style="vertical-align: inherit;">Las consecuencias de aplicar la configuraci√≥n. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con √©xito o no. </font><font style="vertical-align: inherit;">Acceso restante a la pieza de hardware o no. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parece que commit ayudar√° aqu√≠ con la confirmaci√≥n y validaci√≥n de lo que se descarg√≥ en el dispositivo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto, combinado con la implementaci√≥n correcta de NETCONF, reduce significativamente la gama de dispositivos adecuados; no muchos fabricantes admiten confirmaciones normales. </font><font style="vertical-align: inherit;">Pero este es solo uno de los requisitos previos en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Al final, a nadie le preocupa que ning√∫n proveedor ruso pase bajo la condici√≥n de interfaz 32 * 100GE. </font><font style="vertical-align: inherit;">O preocupaciones?</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/368/608/fda/368608fdaff0eafaf308ce37ac008273.png" width="400"><br><hr><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Componente 8. CI / CD </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En este punto, ya estamos listos para todos los dispositivos de red. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escribo "para todo" porque estamos hablando de versionar el estado de la red. E incluso si necesita cambiar la configuraci√≥n de un solo conmutador, se calculan los cambios para toda la red. Obviamente, pueden ser cero para la mayor√≠a de los nodos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero, como ya se mencion√≥ anteriormente, no somos unos b√°rbaros para lanzar todo de una vez al mercado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La configuraci√≥n generada primero debe pasar por el Pipeline CI / CD.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CD significa Integraci√≥n continua, Despliegue continuo. </font><font style="vertical-align: inherit;">Este es un enfoque en el que el equipo publica una versi√≥n principal importante m√°s de una vez cada seis meses, reemplazando por completo la anterior, y regularmente Deploment introduce nuevas funcionalidades en lotes peque√±os, cada uno de los cuales prueba exhaustivamente la compatibilidad, la seguridad y el rendimiento (Integraci√≥n).</font></font><br></blockquote><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para hacer esto, tenemos un sistema de control de versiones que monitorea los cambios de configuraci√≥n, un laboratorio donde verificamos si el servicio al cliente est√° fallando, un sistema de monitoreo que verifica este hecho, y el √∫ltimo paso es implementar los cambios en la red de producci√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con la excepci√≥n de los equipos de depuraci√≥n, absolutamente todos los cambios en la red deben pasar por la canalizaci√≥n de CI / CD: esta es nuestra garant√≠a de una vida tranquila y una carrera larga y feliz.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f14/979/119/f14979119a9580b9d2f43c3f31cde326.png" width="400"><br><br><hr><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Componente 9. Sistema de respaldo y rechazo </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bueno, no tengo que volver a hablar de copias de seguridad. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplemente los agregaremos de acuerdo a la corona o al hecho de un cambio de configuraci√≥n en el git. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero la segunda parte es m√°s interesante: alguien deber√≠a vigilar estas copias de seguridad. </font><font style="vertical-align: inherit;">Y en algunos casos, este alguien tiene que ir y rotar todo como estaba, y en otros, maullar a alguien, ese trastorno. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por ejemplo, si hay un nuevo usuario que no est√° registrado en las variables, debe eliminarlo del hack. </font><font style="vertical-align: inherit;">Y si es mejor no tocar la nueva regla de firewall, tal vez alguien simplemente activ√≥ la depuraci√≥n, o tal vez un nuevo servicio, un desastre, no se registr√≥ de acuerdo con las reglas, pero la gente ya lo hizo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todav√≠a no nos escaparemos de un cierto peque√±o delta en la escala de toda la red, a pesar de los sistemas de automatizaci√≥n y una mano de obra de acero. </font><font style="vertical-align: inherit;">Para depurar problemas de todos modos, nadie traer√° la configuraci√≥n al sistema. </font><font style="vertical-align: inherit;">Adem√°s, puede que ni siquiera sean provistos por el modelo de configuraci√≥n.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Por ejemplo, una regla de firewall para contar el n√∫mero de paquetes en una IP espec√≠fica, para localizar el problema, una configuraci√≥n temporal completamente ordinaria. </font></font><br></blockquote><br><br><img src="https://habrastorage.org/getpro/habr/post_images/902/93e/570/90293e570db42ff6e1c9ca25fa8cead7.png" width="400"><br><br><hr><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Componente 10. Sistema de monitoreo </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al principio, no iba a cubrir el tema del monitoreo, que sigue siendo un tema voluminoso, controvertido y complejo. Pero en el camino, result√≥ que esto es una parte integral de la automatizaci√≥n. Y no puedes evitarlo incluso sin pr√°ctica. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desarrollar el pensamiento es una parte org√°nica del proceso de CI / CD. Despu√©s de implementar la configuraci√≥n en la red, debemos poder determinar si todo est√° bien ahora. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y no se trata solo y no tanto de las gr√°ficas del uso de interfaces o la disponibilidad del host, sino de cosas m√°s sutiles: la disponibilidad de las rutas necesarias, los atributos en ellas, la cantidad de sesiones BGP, vecinos OSPF, servicios de tiempo de actividad de extremo a extremo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPero los syslogs en el servidor externo dejaron de plegarse, el agente SFlow se descompuso, las ca√≠das en las colas comenzaron a crecer y la conexi√≥n entre cualquier par de prefijos se rompi√≥? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En otro art√≠culo, reflexionamos sobre esto.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c4/347/940/7c4347940b12f7eb41fd05a4102e4564.png" width="400"><br><hr><br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ec/0ff/45f/0ec0ff45ff4384becf2ede765a56c091.png" width="800"><br><br><hr><br><h1>  Conclusi√≥n </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como base, eleg√≠ uno de los dise√±os de red de centros de datos modernos: L3 Clos Fabric con BGP como protocolo de enrutamiento. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta vez construiremos una red en Juniper, porque ahora la interfaz de JunOs es un vanlav. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos a complicar nuestras vidas usando solo herramientas de c√≥digo abierto y una red de m√∫ltiples proveedores; por lo tanto, aparte del enebro, en el camino elegir√© a otro tipo con suerte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El plan para las pr√≥ximas publicaciones es algo como esto: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primero hablar√© sobre redes virtuales. En primer lugar, porque quiero, y en segundo lugar, porque sin esto, el dise√±o de la red de infraestructura no ser√° muy claro. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luego sobre el dise√±o de la red en s√≠: topolog√≠a, enrutamiento, pol√≠ticas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armemos el soporte de laboratorio.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consideremos y quiz√°s practiquemos inicializar el dispositivo en la red. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y luego sobre cada componente en detalles √≠ntimos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y s√≠, no prometo terminar con elegancia este ciclo con una soluci√≥n preparada.</font></font> :) <br><br><h5>  Enlaces utiles </h5><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de profundizar en la serie, debe leer el libro de Natasha Samoilenko </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python para ingenieros de redes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Y, tal vez, tomar un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n ser√° √∫til leer el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre el dise√±o de f√°bricas de centros de datos de Facebook para la autor√≠a de Peter Lapukhov.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La documentaci√≥n de arquitectura de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tungsten Fabric</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (anteriormente Open Contrail) </font><font style="vertical-align: inherit;">le dar√° una idea de c√≥mo funciona el Overlay SDN </font><font style="vertical-align: inherit;">.</font></font></li></ul><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gracias </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garganta Romana. </font><font style="vertical-align: inherit;">Para comentarios y ediciones. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artyom Chernobay. </font><font style="vertical-align: inherit;">Para KDPV</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/453516/">https://habr.com/ru/post/453516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453502/index.html">Mi rastrillo: de trapos a riquezas</a></li>
<li><a href="../453508/index.html">Hombre sin tel√©fono inteligente</a></li>
<li><a href="../453510/index.html">Todo tuyo: Tutorial sobre la creaci√≥n de nuevas acciones para UiPath RPA</a></li>
<li><a href="../453512/index.html">Transferencia de estilo</a></li>
<li><a href="../453514/index.html">Gu√≠a de ofertas introductorias en iOS</a></li>
<li><a href="../453520/index.html">Acelera Ansible con Mitogen</a></li>
<li><a href="../453522/index.html">Feliz cumplea√±os, Habr ‚ù§</a></li>
<li><a href="../453524/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 299 (del 20 al 26 de mayo)</a></li>
<li><a href="../453526/index.html">ITSM: qu√© es y d√≥nde comenzar la implementaci√≥n</a></li>
<li><a href="../453528/index.html">Psion SIBO: PDA que ni siquiera necesitan ser emulados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>