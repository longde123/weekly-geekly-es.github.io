<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚦 👩🏼‍⚖️ 🍉 人脸识别如何帮助您找到测试手机 🙍🏾 🚴🏼 🏦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您好，哈布罗夫斯克市民！ EastBanc Technologies有大量与移动开发相关的项目。 在这方面，需要整个设备的动物园来进行所有阶段的测试。 而且，典型地，各种各样的人不断需要每一个设备，即使在几十个人的移动开发部门中找到它也是一个故事。 更不用说最后有测试人员，设计师，项目经理！ 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>人脸识别如何帮助您找到测试手机</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/426437/"> 您好，哈布罗夫斯克市民！  EastBanc Technologies有大量与移动开发相关的项目。 在这方面，需要整个设备的动物园来进行所有阶段的测试。 而且，典型地，各种各样的人不断需要每一个设备，即使在几十个人的移动开发部门中找到它也是一个故事。 更不用说最后有测试人员，设计师，项目经理！ <br><br> 为了不丢失电话，而是清楚地知道它在哪里以及与谁在一起，我们使用了一个在线数据库，该数据库可以根据员工的面孔来识别他们。 现在，我们将告诉我们如何实现它并实现它。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/934/a48/83e934a48d88da29a8d0d95c6aca33bc.jpg" alt="图片"><br><a name="habracut"></a><br><h2> 历史背景 </h2><br> 我们有一个带有基本信息的设备“卡”的标牌，还有一块用来指示员工的磁铁。 每个人都提到要携带设备。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/625/ec6/08d/625ec608d24c28558991679a78dab2e7.jpg" alt="图片"><br><br> 该系统有其缺点-不是很严重，但通常不舒服： <br><br><ul><li> 磁铁从一个地方移动到另一个地方并不是那么容易。 </li><li> 要查看这样的董事会，您肯定必须去另一个办公室。 </li><li> 而且，某人可能一次需要很多设备……这意味着每个员工需要几个磁铁。 </li><li> 哦，是的，甚至有时员工也会辞职而新员工来了，还需要制造磁铁。 </li></ul><br><h4> 行动应用程式 </h4><br> 在一家从事业务流程自动化的公司中，使用上述“模拟”解决方案不是很健康。 自然，我们决定自动化寻找合适设备的任务。 第一步是编写一个移动应用程序，该应用程序可以通过Wi-Fi接入点确定并报告其在房间中的位置。 在整个过程中，为方便起见，他们使设备能够通知服务器有关OS版本的信息，并显示了诸如电池电量之类的重要特性。 <br><br> 看来问题已解决。 您查看数据库中设备上次看到Wi-Fi的列表，然后转到那里并... <br><br> 在操作中，事实证明并非一切都那么简单。 我们在测试设备上安装了该应用程序，并使用了几个月。 原来，此选项很方便，但也不理想。 <br><br> 设备放电后，只需关闭电源，将Wi-Fi接入点从一个位置重新布置到另一个位置，而地理位置本身仅表示该设备在办公室中。 谢谢队长！ <br><br> 您当然可以尝试优化现有系统，但是为什么不基于21世纪的技术来重新发明它呢？ 言归正传。 <br><br><h2> 我们希望它成为 </h2><br> 我们提出了一种系统的概念，该系统可以识别员工的脸孔，通过特殊标签测试设备，请求确认设备状态的变化，然后对在线数据库进行更改，任何员工都可以看到在线数据库而无需从椅子上站起来。 <br><br><h2> 人脸识别 </h2><br> 人脸识别整体上解决了2018年的问题。 因此，我们并没有重新发明轮子并尝试训练自己的模型，而是利用了现成的解决方案。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>FaceRecognition</b></a>模块似乎是最方便的选择，因为 它不需要额外的培训，即使没有在GPU上加速也可以非常快速地工作。 <br><br> 使用<b>face_locations</b>函数， <b>可以</b>在员工照片<b>中检测到</b>面部，并使用<b>face_encodings</b>从中提取特定员工的面部特征。 <br><br> 收到的数据收集在数据库中。 为了使用<b>face_distance</b>函数确定特定员工，考虑了检测到的员工编码与数据库编码之间的“差异”。 <br><br> 通常，在这一阶段，可以进一步创建分类器，例如，基于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">KNN</a>的分类器，以便该系统对员工面孔动态的敏感度降低。 但是，实际上这需要大量时间。 如今，在数据库中的人脸与系统发现的更改设备状态的人脸之间的平均编码达到了平庸的平均水平，这足以避免在实践中累积错误。 <br><br><div class="spoiler">  <b class="spoiler_title">人脸识别码</b> <div class="spoiler_text"><pre><code class="python hljs">face_locations = face_recognition.face_locations(rgb_small_frame) face_encodings = face_recognition.face_encodings(rgb_small_frame, face_locations) face_names = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> face_encoding <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> face_encodings: matches = face_recognition.face_distance( known_face_encodings, face_encoding) name = <span class="hljs-string"><span class="hljs-string">"Unknown"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> np.min(matches) &lt;= <span class="hljs-number"><span class="hljs-number">0.45</span></span>: best_match_index = np.argmin(matches) name = known_face_info[str(best_match_index)][<span class="hljs-string"><span class="hljs-string">'name'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: best_match_index = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span></code> </pre> <br></div></div><br><h2> 设备识别 </h2><br> 最初，出现了使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">QR码</a>进行设备识别的想法，在此同时输入有关设备的信息。 然而，为了稳定地识别QR码，必须将其非常靠近相机，这很不方便。 <br><br> 结果，出现了使用增强现实标记的想法。 它们携带的信息较少，但是被更稳定地识别。 在实验过程中，相机识别出了30毫米的标记，与垂直方向（3-5度）的偏差很小，最远可达两米半。 <br><br> 这个选项看起来好多了。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ARu​​co</a>是从整套增强现实<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">标记中选择的</a> ，  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">opencv-contrib-python发行版</a>中提供了使用它们的所有必需工具。 <br><br><div class="spoiler">  <b class="spoiler_title">ARu​​co令牌识别码</b> <div class="spoiler_text"><pre> <code class="python hljs">self.video_capture = cv2.VideoCapture(<span class="hljs-number"><span class="hljs-number">0</span></span>) ret, frame = self.video_capture.read() gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY) markers = cv2.aruco.detectMarkers(gray, self.dictionary)</code> </pre> <br></div></div><br> 结果，为每个设备分配了一个数字索引，标记与此索引相关联。 <br><br><h2> 是帽子吗？ </h2><br> 看来我们已经学会了识别设备和面部，这项工作已经完成。 夸奖，鼓掌！ 可能还需要什么？ <br><br> 实际上，这项工作才刚刚开始。 现在，必须使系统的所有组件在战斗中稳定，快速地工作。 <br><br> 有必要优化空闲状态下服务器资源的成本，仔细考虑用户案例并了解其图形外观。 <br><br><h2> 介面 </h2><br> 此类系统开发中最重要的一点也许就是接口。 有人可能会争论，但是在这种情况下，用户是核心要素。 <br><br> 您可以尽快使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Tkinter</a>实现前端部分。 <br><br><div class="spoiler">  <b class="spoiler_title">关于Tkinter的一些注意事项</b> <div class="spoiler_text"><ul><li> 注意元素的缩进单位/大小（相对或绝对）。 </li><li> 请记住，相对单位和绝对单位可以一起使用（它们的值被简单地求和）。 </li><li> 参量 <pre> <code class="python hljs">.attributes(<span class="hljs-string"><span class="hljs-string">"-fullscreen"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> 允许您制作一个单窗口应用程序，并扩展到全屏显示，以免使用户与系统界面元素混淆。 </li></ul></div></div><br> 该界面由卡片组成，其中包含有关设备以及当前正在使用该设备的用户的信息。 屏幕的大部分内容都被卡目录占据-主要的会计工具。 顶部有一个过滤器，您可以使用该过滤器按平台或操作系统版本过滤目录。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/de5/5ee/b81/de55eeb81d57374bccd0c0c0e47ba3e6.jpg" alt="图片"><br><br><h4> 以下是界面的关键组件： </h4><br><ul><li>  <b>装置</b> <br> 设备卡将显示在屏幕上，其中包含操作系统的版本，设备的名称和ID以及当前已注册该设备的用户。 </li><li>  <b>照相定影</b> <br> 右侧是控制单元，用于显示来自网络摄像头的图像，以及用于注册和编辑个人信息的按钮。 <br><br> 我们显示图像以给用户反馈-您一定会在屏幕上看到设备标签。 </li><li>  <b>操作系统版本选择</b> <br> 我们列出了感兴趣的操作系统版本，因为 通常，对于测试，您不需要特定的设备，而需要特定版本的Android或iOS。 版本筛选器水平放置，以节省空间并在一个屏幕上无需滚动即可访问版本列表。 </li></ul><br><h2> 最佳化 </h2><br> 系统任何组件的一次通过都不会花费太多时间。 但是，如果您同时开始识别标记和面部，则尝试识别相机每秒提供的所有30帧图像将导致在没有GPU的情况下完全耗尽计算机资源。 <br><br> 显然，系统将有99％的时间闲置此工作。 <br><br> 为了避免这种情况，做出了以下优化决策： <br><br><ol><li> 仅每第八帧被送入处理。 <br><br><div class="spoiler">  <b class="spoiler_title">代号</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.lastseen + self.rec_threshold &gt; time.time() <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> self.frame_number != <span class="hljs-number"><span class="hljs-number">8</span></span>: ret, frame = self.video_capture.read() self.frame_number += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.frame_number &gt; <span class="hljs-number"><span class="hljs-number">8</span></span>: self.frame_number = <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> frame, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span></code> </pre> </div></div><br> 系统的响应延迟上升到大约8/30秒，而人类的反应时间大约是一秒钟。 因此，这种延迟对于用户而言仍然不会被注意到。 而且我们已经减少了八倍于系统的负载。 </li><li> 首先，在框架中搜索设备标记，并且只有在检测到它时，才启动面部识别。 由于在帧中搜索标记的成本比搜索面部大约便宜300倍，因此我们决定在待机模式下，我们将仅检查标记的存在。 </li><li> 为了减少在图像中没有人脸时搜索人脸时的“刹车”，在face_locations函数中禁用了number_of_time_to_upsample参数。 <br><br>  <i>face_locations = face_recognition.face_locations（rgb_small_frame，number_of_times_to_upsample = 0）</i> <br><br> 因此，在其上没有面部的帧的处理时间等于在其中容易检测面部的帧的处理时间。 </li></ol><br><h2> 结果如何？ </h2><br> 目前，该系统已成功部署在即将推出的MacMini 2009上的两个Core 2 Duo内核上。 作为测试的一部分，它甚至可以在Docker容器中的一个具有1024 MB RAM和4 GB只读内存的虚拟内核上运行得非常成功。  MacMini连接了触摸屏，使外观简约。 <br><br> 现在，即使是那些不热衷于使用旧板的用户，也对自己注册设备微笑的人，搜索失败的情况要少得多！ <br><br><h2> 接下来是什么？ </h2><br> 毫无疑问，当前系统中还有很多可以改进的方面： <br><br><ul><li> 确保在出现对话框时没有出现OS控件（现在这是Tkinter包中的消息框）。 </li><li> 通过接口处理将计算和服务器请求分成不同的线程（现在它们在主线程mainloop Tkinter中执行，该主线程在将请求发送到在线数据库时冻结了接口）。 </li><li> 将接口与其他公司资源用于同一设计。 </li><li> 制作完整的Web界面以远程查看数据。 </li><li> 使用语音识别来确认/取消操作并填写文本字段。 </li><li> 同时实现多个设备的注册。 </li></ul><br>  <b>PS这就是它的工作原理。</b> <br>  <i>以GUI测试版录制的视频</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://vk.com/video_ext.php" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN426437/">https://habr.com/ru/post/zh-CN426437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN426427/index.html">对“东西”有用的东西：少量低价选择</a></li>
<li><a href="../zh-CN426429/index.html">在Debian 9上安装FreeSWITCH 1.8（Raspbian Stretch，Rasbperri Pi上MajorDoMo智能家庭系统的基本映像）</a></li>
<li><a href="../zh-CN426431/index.html">拆卸Qlie视觉小说引擎</a></li>
<li><a href="../zh-CN426433/index.html">餐厅的美味SMM</a></li>
<li><a href="../zh-CN426435/index.html">最好的专家是我自己准备的专家：Mail.Ru集团专家提供的游戏测试课程</a></li>
<li><a href="../zh-CN426439/index.html">伪造图表，替换报价和操纵价格：如何破解交易所交易应用程序</a></li>
<li><a href="../zh-CN426441/index.html">Mail.Ru集团20年：代码和技术检查站</a></li>
<li><a href="../zh-CN426443/index.html">似乎我们开始忘记太空探索的样子。</a></li>
<li><a href="../zh-CN426449/index.html">iPhone XS：为什么是全新的相机</a></li>
<li><a href="../zh-CN426451/index.html">告别机器人中最温柔的巨人巴克斯特（Baxter）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>