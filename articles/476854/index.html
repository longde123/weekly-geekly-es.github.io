<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüé§ üë®üèΩ‚Äçüîß üÜï Gesti√≥n programada de recursos de hardware üê¨ üÖ∞Ô∏è üîì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo analiza una posible implementaci√≥n de un sistema automatizado para administrar recursos de hardware (usando rel√©s electromagn√©ticos como...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gesti√≥n programada de recursos de hardware</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476854/">  Este art√≠culo analiza una posible implementaci√≥n de un sistema automatizado para administrar recursos de hardware (usando rel√©s electromagn√©ticos como ejemplo) con referencia al tiempo absoluto.  Tal sistema puede ser muy √∫til para resolver el problema de la automatizaci√≥n de pruebas de varios equipos. <br><br>  Por ejemplo, en algunos laboratorios de prueba es necesario automatizar el restablecimiento de la alimentaci√≥n de los dispositivos estudiados / probados en puntos de tiempo estrictamente establecidos con referencia a la escala absoluta (por ejemplo, el lunes a las 10:00 de la ma√±ana).  Sin embargo, la tarea se complica por el hecho de que la decisi√≥n sobre la posibilidad de realizar una operaci√≥n de administraci√≥n de energ√≠a se ve afectada por el estado actual de otros recursos de hardware del dispositivo en estudio (por ejemplo, uno u otro nivel en la l√≠nea GPIO de salida). <br><br>  La √∫ltima circunstancia complica un poco la soluci√≥n y nos hace pensar en usar alg√∫n m√≥dulo de hardware externo en el que haya soporte para los recursos de hardware necesarios para resolver dicho problema, a saber: rel√©s, relojes en tiempo real, l√≠neas GPIO de entrada. <br><a name="habracut"></a><br>  Los primeros experimentos que hicimos con la plataforma Arduino.  Sin embargo, cuando se hizo necesario copiar esta soluci√≥n en grandes cantidades con calidad estable, comenzaron a buscar soluciones preparadas.  Como resultado, ajustamos el sistema utilizando un m√≥dulo de hardware externo Laurent-5 con la capacidad de monitorear el proceso de control a trav√©s de Ethernet. <br><br><img src="https://habrastorage.org/webt/zz/2d/4f/zz2d4fw8lxsg86l9utv0i5kbvdw.jpeg"><br><br>  Para detalles, necesitamos restablecer brevemente la potencia del dispositivo probado todos los d√≠as estrictamente a las 07:00 de la ma√±ana.  Sin embargo, nunca se debe reiniciar si el dispositivo contin√∫a realizando operaciones cr√≠ticas.  En este caso, se establece un nivel l√≥gico alto (+3,3 V) en la l√≠nea GPIO de salida discreta del dispositivo. <br><br>  El m√≥dulo Laurent-5 se conect√≥ al dispositivo de prueba de la siguiente manera.  La se√±al de dispositivo listo se llev√≥ a la l√≠nea discreta de entrada IO_1.  Y la potencia del dispositivo se envi√≥ a trav√©s de contactos normalmente cerrados del rel√© RELE_1.  Si el rel√© est√° encendido, se corta la alimentaci√≥n del dispositivo bajo prueba. <br><br><img src="https://habrastorage.org/webt/es/wb/qj/eswbqjlblddxx5_lbj7nqsshxmc.png"><br><br>  Para configurar el sistema, en primer lugar, debe cambiar la direcci√≥n del GPIO IO_1 del m√≥dulo Laurent-5 "en la entrada".  La forma m√°s f√°cil de configurar es a trav√©s de la interfaz web (la direcci√≥n predeterminada es 192.168.0.101).  Vamos a la secci√≥n "L√≠neas generales IO1 - IO8" en el panel de control principal. <br><br><img src="https://habrastorage.org/webt/kb/hx/kb/kbhxkbqp7o_xpffc_r6rr9dqsi0.png"><br><br>  Hacemos clic en la "flecha" en la l√≠nea IO_1 y cambiamos la direcci√≥n de esta l√≠nea GPIO al estado "encendido" para analizar el estado de la l√≠nea de "preparaci√≥n" del dispositivo bajo prueba. <br><br><img src="https://habrastorage.org/webt/sl/44/vt/sl44vtxi3u0-ewmcvsj4-vndkde.png"><br><br>  A continuaci√≥n, creamos reglas l√≥gicas de CAT que servir√°n para la automatizaci√≥n del an√°lisis de l√≠nea de "preparaci√≥n" y controlar√°n el rel√©. <br><br>  Entramos en la secci√≥n CAT y hacemos clic en el bot√≥n "Crear un nuevo evento".  Aparecer√° una ventana en la que ID = 1 se asignar√° a la nueva regla l√≥gica. <br><br><img src="https://habrastorage.org/webt/b8/kp/6n/b8kp6nmybfnuw4-xtykndpugevw.png"><br><br>  Elija el tipo de evento RTC: la tarea se completar√° a la hora especificada. <br><br><img src="https://habrastorage.org/webt/x9/0z/11/x90z11hsooa22drer_pievghll4.png"><br><br>  En la configuraci√≥n del evento, indicamos el tiempo de respuesta, todos los d√≠as a las 07:00 de la ma√±ana. <br><br><img src="https://habrastorage.org/webt/ca/ne/b4/caneb4o1mlrsogy3k9baclsibju.png"><br><br>  En respuesta a la ocurrencia de este evento usando los comandos Ke, habilitamos la operaci√≥n de los eventos CAT 2,3 y 4 que crearemos m√°s.  Se necesitan reglas l√≥gicas adicionales para analizar la "preparaci√≥n" de la se√±al del dispositivo y evitar el reinicio de la alimentaci√≥n si no est√° listo para esto. <br><br><img src="https://habrastorage.org/webt/o9/1f/vs/o91fvsqnyb7tpvracojjprfbljs.png"><br><br>  Pongamos un nombre simb√≥lico a esta regla l√≥gica para mayor claridad. <br><br><img src="https://habrastorage.org/webt/le/uj/fd/leujfdee4ccg6gseknn-mvdb618.png"><br><br>  Como resultado, aparecer√° un nuevo evento con ID = 1 en la lista de reglas l√≥gicas: <br><br><img src="https://habrastorage.org/webt/rq/pq/cc/rqpqccypdsyaleov4sfbwzbgr9m.png"><br><br>  Agregue la siguiente regla l√≥gica con ID = 2 que se ejecutar√° en un temporizador con una frecuencia de 1 vez por segundo. <br><br><img src="https://habrastorage.org/webt/s-/a7/uq/s-a7uqfybia7afxlyioo9kahhns.png"><br><br><img src="https://habrastorage.org/webt/h6/dd/lq/h6ddlqp8iqsiqxgem4g5tbsrcxc.png"><br><br>  Indicamos una condici√≥n adicional que debe cumplirse para que la regla l√≥gica funcione, a saber, especificamos la necesidad de un nivel l√≥gico bajo en IO_1, lo que indica que el dispositivo est√° listo para un reinicio de energ√≠a. <br><br><img src="https://habrastorage.org/webt/s2/aw/5l/s2aw5lhfyhs0zbysrs6c-stbpdk.png"><br><br>  Si se cumplen todas las condiciones, apague los eventos 2, 3 y 4. Restableceremos el contador de respuesta para el evento 3 (consulte a continuaci√≥n) y activaremos el rel√© RELE_1 durante 4 segundos, despu√©s de lo cual volver√° autom√°ticamente a su estado original (apagado). <br><br><img src="https://habrastorage.org/webt/45/rp/6x/45rp6xytgrzymc0j9knlkyckjfy.png"><br><br>  Sin embargo, ¬øqu√© debo hacer si el dispositivo se "congela" y la alarma suena todo el tiempo?  Para esto, utilizaremos eventos con ID = 3 y 4 en los que implementaremos una apariencia de temporizador de vigilancia con el env√≠o de un mensaje de alarma si, dentro de un tiempo especificado, el dispositivo no ha indicado que est√° listo para un reinicio de hardware. <br><br>  Creemos un evento con ID = 3 de acuerdo con el temporizador habitual con una frecuencia de respuesta de una vez cada 1 segundo.  Este evento en realidad no har√° nada, solo env√≠e un comando $ KE vac√≠o.  Sin embargo, con cada operaci√≥n, el contador de operaciones de este evento aumentar√°.  Usando una regla l√≥gica con ID = 4, monitorearemos este valor y si excede un cierto umbral (por ejemplo, 300 operaciones, que corresponde a 5 minutos), detendremos la operaci√≥n e incrementaremos el valor de la variable de programa VAR_1 para el an√°lisis posterior del n√∫mero de operaciones fallidas. <br><br>  En total, un conjunto de reglas l√≥gicas se ver√° de la siguiente manera.  Para iniciar todo el sistema, es suficiente habilitar el procesamiento de eventos con ID = 1. <br><br><img src="https://habrastorage.org/webt/uu/gk/hm/uugkhmktxtbvttqtvdwwvusiey0.png"><br><br>  Y luego habr√° lo siguiente: todos los d√≠as a las 07:00 de la ma√±ana se activar√° una regla l√≥gica con ID = 1. En este caso, se incluir√° como reacci√≥n el procesamiento de eventos con las ID 2, 3 y 4. Si el dispositivo bajo prueba est√° listo para restablecer la alimentaci√≥n (nivel l√≥gico 0 a l√≠nea de se√±al): como parte de la regla ID = 2, el procesamiento de los eventos 2-4 se desactivar√°, el contador de operaciones para la tercera regla se reinicia para un caso aleatorio y el dispositivo se reinicia al encender brevemente el rel√©. <br><br>  En paralelo, comenzamos el temporizador de guardia con un reloj una vez por segundo.  Al verificar el valor del temporizador de vigilancia dentro del marco de la regla ID = 4, podemos bloquear la espera y se√±alar el fallo de toda la operaci√≥n en ese d√≠a al incrementar la variable del programa VAR_1, cuyo valor puede solicitarse a trav√©s de TCP / HTTP para su posterior an√°lisis. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/476854/">https://habr.com/ru/post/476854/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../476838/index.html">C√≥mo atrapar la luz con espuma: red de espuma-fotones</a></li>
<li><a href="../476842/index.html">C√≥mo construir un sistema efectivo de atenci√≥n al cliente</a></li>
<li><a href="../476844/index.html">Espec√≠fico y global: programa Mobius 2019 Mosc√∫</a></li>
<li><a href="../476848/index.html">Hackney pipeline: hackathon de OZON, Netology y Yandex.Tolki</a></li>
<li><a href="../476852/index.html">Experiencia pr√°ctica actualizando MySQL 5.7 a la versi√≥n 8.0</a></li>
<li><a href="../476858/index.html">Mostrar n√∫meros por LED</a></li>
<li><a href="../476862/index.html">C√≥mo escribir un contrato inteligente de Python en la red Ontology. Parte 3: API de tiempo de ejecuci√≥n</a></li>
<li><a href="../476864/index.html">USB4: novedades y por qu√© es importante</a></li>
<li><a href="../476868/index.html">IBM, memoria de l√≠nea de retardo e historial de visualizaci√≥n de 80 √ó 24 caracteres</a></li>
<li><a href="../476870/index.html">Los matem√°ticos comienzan a domesticar el "problema del girasol"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>