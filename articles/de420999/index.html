<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥔 🎗️ 😁 Kivy. Xamarin Native reagieren. Drei Frameworks - ein Experiment (Teil 2) ⏺️ 🚪 👨🏾‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist der zweite Artikel in einer Reihe, in der wir Kivy, Xamarin.Forms und React Native vergleichen. Darin werde ich versuchen, denselben Taskplan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kivy. Xamarin Native reagieren. Drei Frameworks - ein Experiment (Teil 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/devexpress/blog/420999/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gx/n_/ry/gxn_rykvsvbib9patx2rd4pnyho.png"></div><br>  Dies ist der zweite Artikel in einer Reihe, in der wir Kivy, Xamarin.Forms und React Native vergleichen.  Darin werde ich versuchen, denselben Taskplaner zu schreiben, aber mit Xamarin.Forms.  Ich werde sehen, wie ich es mache und was ich zu Gesicht bekommen muss. <br><br>  Ich werde TK nicht wiederholen, es ist im ersten Artikel zu sehen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kivy.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Xamarin</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Native reagieren.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drei Frameworks - ein Experiment</a> <br><br>  Der dritte Teil handelt von React Native: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kivy.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Xamarin</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Native reagieren.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drei Frameworks - ein Experiment (Teil 3)</a> <br><a name="habracut"></a><br>  Zunächst möchte ich einige Worte zur Xamarin.Forms-Plattform und zur Herangehensweise an die Lösung der Aufgabe sagen.  Xamarin.Forms ist ein Add-On für Xamarin.iOs und Xamarin.Android.  Nach der Assembly wird der allgemeine Teil auf nativen Standardsteuerelementen „bereitgestellt“, sodass Sie im Wesentlichen vollständig native Anwendungen für alle unterstützten Plattformen erhalten. <br><br>  Die Syntax von Xamarin.Forms kommt der Syntax von WPF sehr nahe, und der allgemeine Teil ist in .NET Standard geschrieben.  Als Ergebnis erhalten Sie die Möglichkeit, den MVVM-Ansatz bei der Entwicklung der Anwendung zu verwenden und auf eine große Anzahl von Bibliotheken von Drittanbietern zuzugreifen, die für .NET Standard und bereits in NuGet geschrieben wurden und die Sie sicher in Ihren Xamarin.Forms-Anwendungen verwenden können. <br><br>  Der Quellcode für die Anwendung hier ist auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> verfügbar. <br><br>  Erstellen wir also eine leere Xamarin.Forms-Anwendung und legen los.  Wir werden ein einfaches Datenmodell mit nur zwei Note- und Project-Klassen haben: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Note</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> UserIconPath { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> UserName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime EditTime { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Project</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ObservableCollection&lt;Note&gt; Notes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Project</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Notes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObservableCollection&lt;Note&gt;(); } }</code> </pre> <br>  Ich werde versuchen, mich an den MVVM-Ansatz zu halten, aber ich werde keine spezielle Bibliothek verwenden, um den Code nicht zu komplizieren.  Alle Modellklassen und Ansichtsmodelle implementieren die INotifyPropertyChanged-Schnittstelle.  Ich werde die Implementierung in den angegebenen Codebeispielen der Kürze halber entfernen. <br><br>  Der erste Bildschirm, den wir haben werden, ist eine Liste von Projekten mit der Möglichkeit, ein neues zu erstellen oder das aktuelle zu löschen.  Machen wir ein Modell für ihn: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ObservableCollection&lt;Project&gt; Projects { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Projects = Project.GetTestProjects(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddNewProject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { Project project = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Project() { Name = name }; Projects.Add(project); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DeleteProject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Project project</span></span></span><span class="hljs-function">)</span></span> { Projects.Remove(project); } }</code> </pre><br>  Bildschirmcode selbst: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://xamarin.com/schemas/2014/forms"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2009/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:local</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:TodoList.View"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TodoList.View.ProjectsPage"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToolbarItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AddNew_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"plus.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemsSource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Projects}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemTapped</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"List_ItemTapped"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Name}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TextColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Black"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DeleteItem_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsDestructive</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding .}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Delete"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Das Markup erwies sich als recht einfach. Ich möchte nur auf die Implementierung von Wischschaltflächen zum Löschen von Projekten eingehen.  In ListView gibt es das Konzept von ContextActions. Wenn Sie es festlegen, werden sie in iOS durch Wischen und in Android implementiert - durch langes Tippen.  Dieser Ansatz ist in Xamarin.Forms implementiert, da er für jede Plattform nativ ist.  Wenn wir jedoch in Android wischen möchten, müssen wir es mit unseren Händen im nativen Teil des Android implementieren.  Ich habe keine Aufgabe, viel Zeit damit zu verbringen, also war ich mit dem Standardansatz zufrieden :) Als Ergebnis werden Swipe in iOS und das Kontextmenü in Android ganz einfach implementiert: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DeleteItem_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsDestructive</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding .}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Delete"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Durch Ersetzen der Testdaten erhalten wir die folgende Liste: <br><br><img src="https://habrastorage.org/webt/n0/p5/-b/n0p5-bq3joxvrfbimbndtqucyga.png"><br><br>  Fahren wir nun mit dem Ereignishandler fort.  Beginnen wir mit einem einfachen - löschen Sie ein Projekt: <br><br><pre> <code class="cs hljs">MainViewModel ViewModel { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BindingContext <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MainViewModel; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DeleteItem_Clicked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e</span></span></span><span class="hljs-function">)</span></span> { MenuItem menuItem = sender <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MenuItem; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (menuItem == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; Project project = menuItem.CommandParameter <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Project; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (project == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> answer = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> DisplayAlert(<span class="hljs-string"><span class="hljs-string">"Are you sure?"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"Would you like to remove the {0} project"</span></span>, project.Name), <span class="hljs-string"><span class="hljs-string">"Yes"</span></span>, <span class="hljs-string"><span class="hljs-string">"No"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(answer) ViewModel.DeleteProject(project); }</code> </pre><br>  Es ist nicht gut, etwas zu löschen, ohne den Benutzer zu fragen, und in Xamarin.Forms ist es einfach, dies mit der Standardmethode DisplayAlert zu tun.  Nach dem Aufruf wird das folgende Fenster angezeigt: <br><br><img src="https://habrastorage.org/webt/l3/tt/n0/l3ttn0euz7uze7sr2blh3fwckbk.png"><br><br>  Dieses Fenster stammt von iOs.  Android wird eine eigene Version eines ähnlichen Fensters haben. <br><br>  Als nächstes werden wir das Hinzufügen eines neuen Projekts implementieren.  Es scheint, dass dies analog erfolgt, aber in Xamarin.Forms gibt es keine Implementierung eines Dialogs, der dem von mir bestätigten Löschen ähnelt, sondern die Eingabe von Text ermöglicht.  Es gibt zwei mögliche Lösungen: <br><br><ul><li>  Schreiben Sie Ihren eigenen Dienst, der native Dialoge auslöst. </li><li>  Implementieren Sie eine Problemumgehung auf der Seite von Xamarin.Forms. </li></ul><br>  Ich wollte keine Zeit damit verschwenden, den Dialog über den Muttersprachler zu führen, und entschied mich für den zweiten Ansatz, dessen Implementierung ich dem Thread <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">entnommen habe</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie erstelle ich einen einfachen InputBox-Dialog?</a>  , nämlich die Task InputBox-Methode (INavigation Navigation). <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddNew_Clicked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> InputBox(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Navigation); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; ViewModel.AddNewProject(result); }</code> </pre><br>  Jetzt werden wir tippenweise verarbeiten, um das Projekt zu öffnen: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">List_ItemTapped</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, Xamarin.Forms.ItemTappedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { Project project = e.Item <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Project; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (project == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Navigation.PushAsync(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotesPage() { BindingContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProjectViewModel(project) }); }</code> </pre><br>  Wie Sie dem obigen Code entnehmen können, benötigen wir zum Anzeigen des Projektfensters das Ansichtsmodell und das Seitenobjekt des Fensters. <br><br>  Ich möchte ein paar Worte zur Navigation sagen.  Die Navigationseigenschaft ist in der VisualElement-Klasse definiert und ermöglicht es Ihnen, mit dem Navigationsbereich in jeder Ansicht Ihrer Anwendung zu arbeiten, ohne ihn dort mit den Händen rollen zu müssen.  Damit dieser Ansatz funktioniert, müssen Sie dieses Panel jedoch noch selbst erstellen.  Deshalb schreiben wir in App.xaml.cs: <br><br><pre> <code class="cs hljs">NavigationPage navigation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NavigationPage(); navigation.PushAsync(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.ProjectsPage() { BindingContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainViewModel() }); MainPage = navigation;</code> </pre><br>  Wobei ProjectsPage genau das Fenster ist, das ich jetzt beschreibe. <br><br>  Das Fenster mit Notizen ist dem Fenster mit Projekten sehr ähnlich, daher werde ich es nicht im Detail beschreiben, sondern mich nur auf interessante Nuancen konzentrieren. <br><br>  Das Layout dieses Fensters erwies sich als komplizierter, da in jeder Zeile weitere Informationen angezeigt werden sollten: <br><br><div class="spoiler">  <b class="spoiler_title">Notizenansicht</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://xamarin.com/schemas/2014/forms"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2009/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TodoList.View.NotesPage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:local</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:TodoList.View"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:utils</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:TodoList.Utils"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Project.Name}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.Resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ResourceDictionary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">utils:PathToImageConverter</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PathToImageConverter"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ResourceDictionary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.Resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToolbarItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AddNew_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"plus.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemsSource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Project.Notes}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"list"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemTapped</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"List_ItemTapped"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HasUnevenRows</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Image</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Source</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding UserIconPath, Converter={StaticResource PathToImageConverter}}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding UserName}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Bold"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding EditTime}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BackgroundColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Image</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"menu.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalOptions</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FillAndExpand"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"RowMenu_Clicked"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyLabel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0,10,0,0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.ColumnSpan</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Text}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DeleteItem_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsDestructive</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding .}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Delete"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Im Inhalt des Fensters haben wir wieder eine ListView, die an die Sammlung von Notizen angehängt ist.  Wir möchten jedoch die Höhe der Zellen im Inhalt, jedoch nicht mehr als 150, dafür setzen wir HasUnevenRows = "True", damit die Zellen in der ListView so viel Platz beanspruchen können, wie sie benötigen.  In dieser Situation können die Zeilen jedoch eine Höhe von mehr als 150 anfordern, und in der ListView können sie wie folgt angezeigt werden.  Um dies in der Zelle zu vermeiden, habe ich meinen Erben des Grid-Panels verwendet: MyCellGrid.  Dieses Feld für die Messoperation fordert die Höhe der internen Elemente an und gibt sie entweder 150 zurück, wenn sie größer ist: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyCellGrid</span></span> : <span class="hljs-title"><span class="hljs-title">Grid</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> SizeRequest </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMeasure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> widthConstraint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> heightConstraint</span></span></span><span class="hljs-function">)</span></span> { SizeRequest sizeRequest = <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnMeasure(widthConstraint, heightConstraint); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sizeRequest.Request.Height &lt;= <span class="hljs-number"><span class="hljs-number">150</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sizeRequest; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SizeRequest(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size() { Width = sizeRequest.Request.Width, Height = <span class="hljs-number"><span class="hljs-number">150</span></span> }); } }</code> </pre><br>  Da wir laut TOR in der Lage sein müssen, neben Tippen und Wischen auch das Menü zu bearbeiten und zu löschen, das durch Klicken auf die Schaltfläche in der Ecke der Zeile geöffnet wird, fügen wir diese Schaltfläche der Zellenvorlage hinzu und abonnieren das Tippen darauf.  Wenn der Benutzer in diesem Fall auf die Schaltfläche klickt, fängt er die Geste ab und wir erhalten keine Ereignisse beim Klicken auf die Zeile. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BackgroundColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Image</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"menu.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalOptions</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FillAndExpand"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"RowMenu_Clicked"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Mit Testdaten sieht unser Formular folgendermaßen aus: <br><br><img src="https://habrastorage.org/webt/tm/mq/g6/tmmqg6ubrpian_argfz2dmn2dve.png"><br><br>  Die Verarbeitung von Benutzeraktionen in dieser Form entspricht vollständig der für das Projektlistenfenster geschriebenen.  Ich möchte nur im Kontextmenü über unsere Schaltfläche in der Ecke der Zeile anhalten.  Zuerst dachte ich, dass ich es auf der Xamarin.Forms-Ebene ohne Probleme tun würde. <br><br>  In der Tat müssen wir nur eine Ansicht von so etwas erstellen: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">”Edit”/</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">”Delete”/</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Und zeigen Sie es neben der Schaltfläche.  Das Problem ist jedoch, dass wir nicht genau wissen können, wo es sich "neben der Schaltfläche" befindet.  Dieses Kontextmenü sollte sich oben in der ListView befinden und beim Öffnen in den Koordinaten des Fensters positioniert sein.  Dazu müssen Sie die Koordinaten der gedrückten Taste relativ zum Fenster kennen.  Wir können die Koordinaten der Schaltfläche nur relativ zur internen ScrollView in der ListView abrufen.  Wenn also die Linien nicht verschoben werden, ist alles in Ordnung, aber wenn die Linien gescrollt werden, müssen wir bei der Berechnung der Koordinaten berücksichtigen, wie viel gescrollt wurde.  ListView gibt uns nicht den Bildlaufwert.  Also muss es aus dem Eingeborenen herausgezogen werden, was ich wirklich nicht wollte.  Aus diesem Grund habe ich mich für einen einfacheren und einfacheren Weg entschieden: Zeigen Sie das Standard-Systemkontextmenü an.  Infolgedessen stellt der Button-Click-Handler Folgendes fest: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RowMenu_Clicked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, System.EventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> action = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> DisplayActionSheet(<span class="hljs-string"><span class="hljs-string">"Note action:"</span></span>, <span class="hljs-string"><span class="hljs-string">"Cancel"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Edit"</span></span>, <span class="hljs-string"><span class="hljs-string">"Delete"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; BindableObject bindableSender = sender <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> BindableObject; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(bindableSender != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Note note = bindableSender.BindingContext <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Note; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action == <span class="hljs-string"><span class="hljs-string">"Edit"</span></span>) { EditNote(note); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(action == <span class="hljs-string"><span class="hljs-string">"Delete"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> DeleteNote(note); } } }</code> </pre><br>  Beim Aufrufen der DisplayActionSheet-Methode wird nur das reguläre Kontextmenü angezeigt: <br><br><img src="https://habrastorage.org/webt/nr/hn/fi/nrhnfiz1y02p8izy6nczaxaiks4.png"><br><br>  Wenn Sie bemerken, wird der Text der Notiz in meinem MyLabel-Steuerelement und nicht im regulären Label angezeigt.  Dies wird für was getan.  Wenn der Benutzer den Text der Notiz ändert, werden Ordner ausgelöst und neuer Text kommt automatisch in Label an.  Xamarin.Forms berechnet jedoch nicht gleichzeitig die Zellgröße neu.  Xamarin-Entwickler behaupten, dass dies eine ziemlich teure Operation ist.  Ja, und ListView selbst hat keine Methode, mit der es seine Größe wiedergeben könnte. InvalidateLayout hilft auch nicht.  Das einzige, was sie dafür haben, ist die ForceUpdateSize-Methode des Cell-Objekts.  Um zum richtigen Zeitpunkt dorthin zu gelangen und zu ziehen, habe ich meinen Label-Erben geschrieben und diese Methode für jede Textänderung angewendet: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyLabel</span></span> : <span class="hljs-title"><span class="hljs-title">Label</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[CallerMemberName] </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnPropertyChanged(propertyName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (propertyName == <span class="hljs-string"><span class="hljs-string">"Text"</span></span>) { ((<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Parent <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MyCellGrid).Parent <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Cell).ForceUpdateSize(); } } }</code> </pre><br>  Nach dem Bearbeiten einer Notiz passt ListView die Zellengröße automatisch an den neuen Text an. <br><br>  Beim Bearbeiten oder Erstellen einer neuen Notiz wird ein Fenster mit dem Editor im Inhalt und der Schaltfläche Speichern in der Symbolleiste geöffnet: <br><br><img src="https://habrastorage.org/webt/a6/ps/4z/a6ps4z8waexmy7quhxvm4og3jak.png"><br><br>  Dieses Fenster unterscheidet sich geringfügig von dem, was wir in der TK haben: das Fehlen eines runden Knopfes unten.  Wenn Sie es einfach über dem Editor platzieren, wird es durch die verlassene Tastatur blockiert.  Gleichzeitig fand ich keine schöne Lösung, um es zu bewegen und nicht mit einer schnellen Suche in den Eingeborenen zu gehen.  Daher habe ich es entfernt und nur die Schaltfläche Speichern im oberen Bereich belassen.  Dieses Fenster selbst ist sehr einfach, daher werde ich seine Beschreibung weglassen. <br><br>  Was ich am Ende sagen möchte. <br><br>  Xamarin.Forms eignet sich gut für diejenigen, die mit der .NET-Infrastruktur vertraut sind und schon lange damit arbeiten.  Sie müssen nicht auf neue IDEs und Frameworks aktualisieren.  Wie Sie sehen können, unterscheidet sich der Anwendungscode nicht wesentlich vom Code einer anderen XAML-basierten Anwendung.  Darüber hinaus können Sie mit Xamarin iOS-Anwendungen in Visual Studio für Windows entwickeln und erstellen.  Wenn Sie die endgültige Anwendung zum Testen und Erstellen entwickeln, müssen Sie eine Verbindung zu einem MacOS-Computer herstellen.  Und Bibliotheken können ohne sie gemacht werden. <br><br>  Um mit dem Schreiben von Anwendungen auf Xamarin.Forms zu beginnen, benötigen Sie keine roten Augen mit der Konsole.  Installieren Sie einfach Visual Studio und schreiben Sie Anwendungen.  Alles andere wurde bereits für Sie erledigt.  Unabhängig davon, wie Microsoft mit kostenpflichtigen Produkten verbunden ist, ist Xamarin kostenlos und es gibt kostenlose Versionen von Visual Studio. <br><br>  Die Tatsache, dass Xamarin.Forms den .NET-Standard unter der Haube verwendet, ermöglicht Ihnen den Zugriff auf eine Reihe bereits dafür geschriebener Bibliotheken, die Ihnen das Leben bei der Entwicklung Ihrer Anwendungen erleichtern. <br><br>  Mit Xamarin.Forms können Sie ganz einfach etwas in die nativen Teile Ihrer Anwendung einfügen, wenn Sie etwas Plattformspezifisches implementieren möchten.  Dort erhalten Sie das gleiche C #, aber die API ist für jede Plattform nativ. <br><br>  Natürlich gab es einige Mängel. <br><br>  Die im allgemeinen Teil verfügbare API ist eher dürftig, da sie nur das enthält, was allen Plattformen gemeinsam ist.  Wie in meinem Beispiel zu sehen ist, enthalten beispielsweise alle Plattformen Warnmeldungen und Kontextmenüs, und diese Funktion ist in Xamarin.Forms verfügbar.  Das Standardmenü, in das Sie Text eingeben können, ist jedoch nur in iOS verfügbar, in Xamarin.Forms hingegen nicht. <br><br>  Ähnliche Einschränkungen bestehen bei der Verwendung von Komponenten.  Etwas kann getan werden, etwas ist unmöglich.  Das gleiche Wischen zum Löschen eines Projekts oder einer Notiz funktioniert nur unter iOS.  In Android wird diese Kontextaktion als Menü angezeigt, das bei langem Tippen angezeigt wird.  Und wenn Sie in den Android wischen möchten, dann willkommen im Android-Teil und schreiben Sie es mit Ihren Händen. <br><br>  Und natürlich Leistung.  Die Geschwindigkeit der Anwendung auf Xamarin.Forms ist in jedem Fall niedriger als die Geschwindigkeit der nativen Anwendung.  Microsoft selbst sagt also, dass Xamarin.Forms genau das Richtige für Sie ist, wenn Sie eine Anwendung ohne Schnickschnack in Bezug auf Design und Leistung benötigen.  Wenn Sie Hübschheit oder Geschwindigkeit brauchen, sollten Sie bereits zum Eingeborenen gehen.  Glücklicherweise verfügt Xamarin auch über native Versionen, die bereits sofort mit ihren nativen Plattform-APIs arbeiten und schneller als Formulare arbeiten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420999/">https://habr.com/ru/post/de420999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar486164/index.html">فيروس كورونا 2019-nCoV. أسئلة وأجوبة عن حماية الجهاز التنفسي والتطهير</a></li>
<li><a href="../ar486174/index.html">لدي صفر دوران</a></li>
<li><a href="../de420993/index.html">5 einfache Schritte zum Erstellen eines Servers zum Testen von Android-REST-Anforderungen</a></li>
<li><a href="../de420995/index.html">Wir wählen das Passwort für die indische TIN in zwei Sekunden oder warum Brute-Force-Mathematik</a></li>
<li><a href="../de420997/index.html">KDD 2018, vierter Tag, Nobelpreisträger tritt auf</a></li>
<li><a href="../de421001/index.html">RPC - eine Gelegenheit, neu in C ++ 14/17 zu testen</a></li>
<li><a href="../de421005/index.html">REST-versichert: Nützliche Tipps</a></li>
<li><a href="../de421007/index.html">Kassettenrekorder - ein Tool zum Aufzeichnen von Autotests</a></li>
<li><a href="../de421009/index.html">25. und 26. August: Online-Konferenz zum operativen Management</a></li>
<li><a href="../de421011/index.html">Fragen beim Interview, die Sie für dumm halten. Aber nicht wirklich</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>