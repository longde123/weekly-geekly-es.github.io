<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùóÔ∏è ‚ú°Ô∏è üôÑ QBS-Vorlage zum Programmieren von Mikrocontrollern in QtCreator am Beispiel von Milander-Controllern üö£üèæ ‚öôÔ∏è üèâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor nicht allzu langer Zeit half er bei der Entwicklung von Mikrocontrollern eines wenig bekannten Unternehmens - Milander. Die offizielle Keil-Entwic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>QBS-Vorlage zum Programmieren von Mikrocontrollern in QtCreator am Beispiel von Milander-Controllern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467455/">  Vor nicht allzu langer Zeit half er bei der Entwicklung von Mikrocontrollern eines wenig bekannten Unternehmens - Milander.  Die offizielle Keil-Entwicklungsumgebung.  Es hat mir nicht gefallen, aber der Prozessor basiert auf der Architektur eines anderen wenig bekannten ARM-Unternehmens, was bedeutet, dass es einen gcc-Compiler daf√ºr gibt.  Und wo es gcc gibt, kann QtCreator auch als IDE verwendet werden. <br><br><img alt="Metall Keramikgeh√§use sind wundersch√∂n" src="https://habrastorage.org/webt/el/xq/74/elxq743z2r7bl4v7-fcntkey_28.png"><br><a name="habracut"></a><br><h3>  Einf√ºhrung </h3><br>  Anfangs war die Aufgabe recht einfach.  Suchen Sie die Dateien, die Sie zum Erstellen des Projekts ben√∂tigen.  Nehmen Sie ein Projekt, das bereits unter stm32f407 erstellt wurde, und verarbeiten Sie es mit einer Datei.  Bei der Umsetzung eines so einfachen Plans bestand jedoch der Wunsch, ein etwas interessanteres Projekt zu realisieren, als urspr√ºnglich angenommen. <br><br><h3>  Vorbereitung </h3><br>  Zuerst m√ºssen Sie den Compiler und den Debugger f√ºr Mikrocontroller herunterladen, die auf den Kernen der Cortex-M-Serie basieren.  Die neueste Version ist hier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[1]</a> .  Sie ben√∂tigen auch QtCreator, nicht faule k√∂nnen aus dem Quellcode kompilieren, faule k√∂nnen hierher kommen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[2]</a> .  Wir brauchen auch openocd zum Flashen und Debuggen des Mikrocontrollers.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[3]</a> GCC-Compiler f√ºr Cortex-M auf der ARM-Site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[9]</a> <br><br>  Installieren Sie die angegebene Software sowie alle erforderlichen Abh√§ngigkeiten.  Dann fahren wir mit der Einrichtung der Umgebung fort. <br><br><div class="spoiler">  <b class="spoiler_title">QtCreator'a in Bildern einstellen</b> <div class="spoiler_text">  Wenn nicht aktiviert, aktivieren Sie die Bare-Metal-Unterst√ºtzung unter Hilfe -&gt; Informationen zu Modulen <br>  F√ºgen Sie Compiler hinzu <br><br>  g ++ <br><br><img src="https://habrastorage.org/webt/vn/vb/yb/vnvbybvdfgsw14uwvfi5uvbakpk.png"><br><br>  gcc <br><br><img src="https://habrastorage.org/webt/ev/og/y9/evogy9s8q0huptyocb8mw0ma5fc.png"><br><br>  F√ºgen Sie den GDB-Debugger hinzu <br><br><img src="https://habrastorage.org/webt/df/ib/un/dfibunh8vhliggxza0r2ynmfi2g.png"><br><br>  Wir erstellen ein Openocd-Debugging-Profil, dies ist <s>keine</s> gro√üe Kr√ºcke.  Der Pfad zur Konfigurationsdatei muss absolut angegeben werden.  Die Datei f√ºr jeden Mikrocontroller ist unterschiedlich, was zu gewissen Unannehmlichkeiten f√ºhrt. <br><br><img src="https://habrastorage.org/webt/-k/a-/s7/-ka-s72tf4nxvvwozzs_rikqi14.png"><br><br>  Bare Metal einstellen <br><br><img src="https://habrastorage.org/webt/s_/ev/uz/s_evuzqmckfqm0ohyivdz3szecc.png"><br><br>  Und alles in einem Satz <br><br><img src="https://habrastorage.org/webt/10/vl/1a/10vl1amni2mqskr4uzo-dlj6pgu.png"><br></div></div><br><h3>  Mikrocontroller-Bibliotheken </h3><br>  Eine fl√ºchtige Suche auf der Milander-Website ergab keine offizielle Sammlung von Bibliotheken f√ºr die Arbeit mit Peripherieger√§ten und dem Kern des Mikrocontrollers.  Die Baugruppe unterst√ºtzt gcc und befindet sich am Github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[4]</a> .  Die Baugruppe ging recht einfach zum fertigen Projekt f√ºr stm32f407, und nachdem sie an einigen Stellen repariert worden war, war sie bereits sehr gespannt darauf, den Mikrocontroller zu flashen.  Bearbeiten Sie die openocd-Konfigurationsdatei und jetzt blinkt alles.  Ein bisschen mehr Schlosserarbeit und Debugging funktionieren bereits.  Und es scheint, dass das alles ist - ein einfacher Sieg.  Bibliotheken unterst√ºtzen jedoch mehrere Mikrocontroller.  Und Mikrocontroller auf verschiedenen Kernen verwenden auch verschiedene periphere Bibliotheken.  Sofort kam die Idee auf, ein Projekt zu erstellen, damit Sie den gew√ºnschten Mikrocontroller einfach ausw√§hlen k√∂nnen und die Umgebung selbst die erforderlichen Kernbibliotheken und Peripherieger√§te ausw√§hlt.  Diese Idee kam mir zu der Zeit, als ich stm32f407 beherrschte.  Die Gelegenheit, eine so interessante Idee zu verwirklichen, durfte nicht fehlen. <br><br>  Ein paar N√§chte in Bibliotheken und qbs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[5]</a> ergaben ein positives Ergebnis.  Es war m√∂glich, die Kompilierung f√ºr die folgenden Mikrocontroller zu konfigurieren: MDR1901VC1T (1901-1), MDR1986VE1T (1986 BE1T), MDR1986VE3 (1986 BE3), MDR1986BE4 (1986 BE4x), MDR1986VE8T (1986 BE8x), MDR1986VE9x (1986 BE8x), MDR1986VE9x (1986 BE).  Obwohl die Beschreibung der Quellbibliotheken MDR1986VE8T nicht unterst√ºtzte, gab es einen Teil der Kernbibliothek und der Peripheriebibliotheksdateien.  Einige der Header-Dateien, die im ARM-Repository gefunden wurden, fehlten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[6]</a> . <br><br><h3>  Abschlussprojekt </h3><br>  Das Ergebnis war eine eher bescheidene Vorlage, mit der Sie Projekte f√ºr mehrere Mikrocontroller schreiben k√∂nnen.  Liegt Vorlage auf Github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[7]</a> .  Die Quellbibliothek hat eine Reihe von kosmetischen √Ñnderungen erfahren.  Obwohl ich die Kompatibilit√§t mit dem urspr√ºnglichen Projekt beibehalten wollte, musste ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[8]</a> die Kompatibilit√§t verlieren, aber dies ist eine Geb√ºhr f√ºr die Vielseitigkeit.  Sie k√∂nnen das Projekt wie folgt herunterladen. <br><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/WicRus/emdr1986x-std-per-lib-qbs.git --recursive</code> </pre> <br>  Sie k√∂nnen ein Projekt auch direkt aus QtCreator klonen, indem Sie die Repository-Adresse angeben und Rekursiv aktivieren. <br><br><h3>  Zucht </h3><br>  Das Hauptergebnis ist eine universelle Vorlage mit Unterst√ºtzung f√ºr mehrere Mikrocontroller mit verschiedenen Kern- und Peripheriebibliotheken.  Es gab jedoch eine Reihe von Punkten, die beachtet werden sollten: <br><br><ul><li>  Firmware und Debugging konnten nur auf MDR1986VE1T √ºberpr√ºft werden. </li><li>  Openocd-Zielkonfigurationsdateien wurden nur f√ºr MDR1986VE1T und MDR1986VE9x gefunden.  F√ºr den Rest der Controller m√ºssen Sie selbst etwas mitnehmen oder schreiben. </li><li>  Bibliotheken f√ºr den MDR1986VE8T wurden ohne viel Verst√§ndnis des Problems zusammengestellt.  Es ist notwendig, den korrekten Betrieb zu √ºberpr√ºfen. </li><li>  Quellbibliotheken wurden erheblich ge√§ndert.  M√∂gliche Zusammenf√ºhrungsprobleme. </li><li>  Beim Erstellen f√ºr MDR1901VC1T, MDR1986BE4, MDR1986VE9x wird eine Warnung √ºber veraltete Kernelbibliotheken ausgegeben.  Es ist notwendig, die Kernel-Bibliotheken analog zu MDR1986VE8T zu aktualisieren und dann den korrekten Betrieb zu √ºberpr√ºfen. </li><li>  Funktion zum Erstellen einer Openocd-Konfiguration.  F√ºr jeden einzelnen Mikrocontrollertyp ben√∂tigen Sie m√∂glicherweise ein separates Build-Kit in QtCreator. </li></ul><br>  <b>Referenzen</b> <br><br>  Achtung, in diesem Fenster √∂ffnen sich Links. <br><br><a name="L0"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">0. Die Basis f√ºr den KDPV-Standort Milander</a> <br><a name="L1"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1. https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a> <br><a name="L2"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2. https://www.qt.io/download-qt-installer</a> <br><a name="L3"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">3. http://openocd.org</a> <br><a name="L4"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">4. https://github.com/eldarkg/emdr1986x-std-per-lib</a> <br><a name="L5"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">5. https://doc.qt.io/qbs/</a> <br><a name="L6"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">6. https://github.com/ARM-software/CMSIS_5</a> <br><a name="L7"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">7. https://github.com/WicRus/emdr1986x-std-per-lib-qbs</a> <br><a name="L8"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">8. https://github.com/WicRus/emdr1986x-std-per-lib</a> <br><a name="L9"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">9. https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a> <br><div class="spoiler">  <b class="spoiler_title">Bearbeitungsverlauf.</b> <div class="spoiler_text">  17.09.19 Link zur GNU Arm Embedded Toolchain hinzugef√ºgt. <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467455/">https://habr.com/ru/post/de467455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467439/index.html">Warum ist Vinyl zur√ºckgekommen und wie h√§ngen Streaming-Dienste damit zusammen?</a></li>
<li><a href="../de467443/index.html">Multimedia Center "Kodi" und Yocto Project</a></li>
<li><a href="../de467445/index.html">Schwer fassbare Liste der installierten Windows-Updates</a></li>
<li><a href="../de467449/index.html">Erkennung von Schwachstellen und Bewertung der Resistenz gegen Hackerangriffe von Smartcards und Kryptoprozessoren mit integriertem Schutz</a></li>
<li><a href="../de467453/index.html">L√∂sung des Problems der Nummer 42 mit einem planetaren Supercomputer</a></li>
<li><a href="../de467457/index.html">Der Weg von der Operation zum Spieleentwickler oder die ersten Erfahrungen mit der mobilen Entwicklung auf Unity</a></li>
<li><a href="../de467459/index.html">Wie ein Mikrocontroller Daten mit 1,6 Gbit / s lesen kann</a></li>
<li><a href="../de467461/index.html">RubyRussia 2019. Julian Pokrovsky: Wie man einen Monolithen optimiert</a></li>
<li><a href="../de467463/index.html">Nur Teilung oder wie man eine mathematische Theorie erstellt und 400.000 Dollar damit verdient. Serie Drei, Finale</a></li>
<li><a href="../de467465/index.html">Spart die Cloud Ultra-Budget-Smartphones?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>