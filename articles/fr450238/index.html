<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧘 🐧 🥤 Validation de l'interface TypeScript à l'aide de Joi ☹️ 👼🏾 🧑🏿‍🤝‍🧑🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'histoire de comment passer deux jours à réécrire plusieurs fois le même code. 



 Entrée 


 Dans cet article, je vais omettre les détails sur Hapi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Validation de l'interface TypeScript à l'aide de Joi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450238/"><p>  L'histoire de comment passer deux jours à réécrire plusieurs fois le même code. </p><br><p><img src="https://habrastorage.org/webt/kv/do/eq/kvdoeq2qi2shhsd1gtl76hjorvs.png" alt="Joi &amp; TypeScript. A love story" title="Joi et TypeScript. Une histoire d'amour"></p><a name="habracut"></a><br><h1 id="vstuplenie">  Entrée </h1><br><p> Dans cet article, je vais omettre les détails sur Hapi, Joi, le routage et <code>validate: { payload: ... }</code> , ce qui implique que vous comprenez déjà de quoi il s'agit, ainsi que la terminologie, les «interfaces», les «types», etc. .  Je vais seulement vous parler d'une stratégie au tour par tour, pas la plus réussie, de ma formation dans ces domaines. </p><br><h2 id="nemnogo-predystorii">  Un peu de fond </h2><br><p>  Maintenant, je suis le seul développeur backend (à savoir, écrire du code) sur le projet.  La fonctionnalité n'est pas l'essence, mais l'essence clé est un profil assez long avec des données personnelles.  La vitesse et la qualité du code sont basées sur ma petite expérience de travail indépendant sur des projets à partir de zéro, encore moins d'expérience de travail avec JS (seulement le 4ème mois), et en cours de route, de manière très croisée, j'écris en TypeScript (ci-après - TS).  Les dates sont compressées, les rouleaux sont compressés, les modifications arrivent constamment et il s'avère d'abord écrire du code logique métier, puis les interfaces en haut.  Néanmoins, un devoir technique est capable de rattraper et de taper sur le capuchon, ce qui nous est arrivé approximativement. </p><br><p>  Après 3 mois de travail sur le projet, j'ai finalement convenu avec mes collègues de passer à un seul dictionnaire pour que les propriétés de l'objet soient nommées et écrites de la même manière partout.  Dans le cadre de cette entreprise, bien sûr, je me suis engagé à écrire une interface et je suis resté coincé avec elle pendant deux jours ouvrables. </p><br><h1 id="problema">  Le problème </h1><br><p>  Un simple profil d'utilisateur sera un exemple abstrait. </p><br><ul><li><del>  <strong>D'abord</strong> </del>  <strong>L'étape zéro d'un bon développeur:</strong> <del>  décrire les données </del>  écrire des tests; </li><li>  <strong>Première étape:</strong> <del>  écrire des tests </del>  Décrire les données </li><li>  et ainsi de suite. </li></ul><br><p>  Supposons que des tests aient déjà été écrits pour ce code, il reste à décrire les données: </p><br><pre> <code class="javascript hljs">interface IUser { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: string; age: number; phone: string | number; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> aleg: IUser = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Aleg'</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: <span class="hljs-string"><span class="hljs-string">'79001231212'</span></span> };</code> </pre> <br><p>  Eh bien, ici, tout est clair et extrêmement simple.  Tout ce code, comme nous nous en souvenons, sur le backend, ou plutôt, dans l'API, c'est-à-dire que l'utilisateur est créé à partir de données provenant du réseau.  Ainsi, nous devons valider les données entrantes et aider Joi dans ce domaine: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> joiUserValidator = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Joi.string(), <span class="hljs-attr"><span class="hljs-attr">age</span></span>: Joi.number(), <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Joi.alternatives([Joi.string(), Joi.number()]) };</code> </pre> <br><p>  La solution "sur le front" est prête.  L'inconvénient évident de cette approche est que le validateur est complètement séparé de l'interface.  Si pendant la durée de vie de l'application les champs changent / ajoutent ou que leur type change, alors ce changement devra être suivi manuellement et indiqué dans le validateur.  Je pense qu'il n'y aura pas de développeurs aussi responsables jusqu'à ce que quelque chose tombe.  De plus, dans notre projet, le questionnaire comprend plus de 50 champs à trois niveaux d'imbrication et il est extrêmement difficile de le comprendre, même en sachant tout par cœur. </p><br><p>  Nous ne pouvons tout simplement pas spécifier <code>const joiUserValidator: IUser</code> , car <code>Joi</code> utilise ses types de données, ce qui génère des erreurs lors de la compilation du type <code>Type 'NumberSchema' is not assignable to type 'number'</code> .  Mais il doit y avoir un moyen d'effectuer une validation sur l'interface? <br><img src="https://habrastorage.org/getpro/habr/post_images/c86/32b/ef0/c8632bef03e0bc08cb00b9040e05dd8c.jpg" alt="      " title="Je suis allé en ligne avec cette question"></p><br><p>  Peut-être que je ne l'ai pas recherché correctement sur Google, ou que j'ai mal étudié les réponses, mais toutes les décisions ont été prises pour <code>extractTypes</code> des types et des vélos féroces, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ceci</a> : </p><br><pre> <code class="javascript hljs">type ValidatedValueType&lt;T extends joi.Schema&gt; = T extends joi.StringSchema ? string : T extends joi.NumberSchema ? number : T extends joi.BooleanSchema ? boolean : T extends joi.ObjectSchema ? ValidatedObjectType&lt;T&gt; : <span class="hljs-comment"><span class="hljs-comment">/* ... more schemata ... */</span></span> never;</code> </pre> <br><h1 id="reshenie">  Solution </h1><br><h2 id="ispolzovat-storonnie-biblioteki">  Utiliser des bibliothèques tierces </h2><br><p>  Pourquoi pas.  Lorsque j'ai interrogé les gens sur ma tâche, j'ai reçu dans l'une des réponses, et plus tard, et ici, dans les commentaires (grâce aux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">keenondrums</a> ), des liens vers ces bibliothèques: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/typestack/class-validator</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/typestack/class-transformer</a> </p><br><p>  Cependant, il y avait un intérêt à le comprendre vous-même, à mieux comprendre le travail de TS, et rien ne poussait à résoudre le problème momentanément. </p><br><h2 id="poluchit-vse-svoystva">  Obtenez toutes les propriétés </h2><br><p>  Comme je n'avais aucun travail antérieur avec la statique, le code ci-dessus a découvert l'Amérique en termes d'utilisation d'opérateurs ternaires dans les types.  Heureusement, il n'a pas été possible de l'appliquer dans le projet.  Mais j'ai trouvé un autre vélo intéressant: </p><br><pre> <code class="javascript hljs">interface IUser { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: string; age: number; phone: string | number; } type UserKeys&lt;T&gt; = { [key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> keyof T]; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> evan: UserKeys&lt;IUser&gt; = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Evan'</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: <span class="hljs-number"><span class="hljs-number">791234567890</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> joiUser: UserKeys&lt;IUser&gt; = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Joi.string(), <span class="hljs-attr"><span class="hljs-attr">age</span></span>: Joi.number(), <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Joi.alternatives([Joi.string(), Joi.number()]) };</code> </pre> <br><p>  <code>TypeScript</code> dans des conditions plutôt délicates et mystérieuses vous permet d'obtenir, par exemple, des clés de l'interface, comme s'il s'agissait d'un objet JS normal, cependant, uniquement dans la construction de <code>type</code> et via <code>key in keyof T</code> et uniquement via des génériques.  En raison du type <code>UserKeys</code> , tous les objets qui implémentent les interfaces doivent avoir le même ensemble de propriétés, mais les types de valeurs peuvent être arbitraires.  Cela inclut des conseils dans l'IDE, mais ne permet toujours pas d'indiquer clairement les types de valeurs. </p><br><p>  Voici un autre cas intéressant que je n'ai pas pu utiliser.  Peut-être pouvez-vous me dire pourquoi cela est nécessaire (bien que je suppose en partie, il n'y a pas assez d'exemples appliqués): </p><br><pre> <code class="javascript hljs">interface IUser { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: string; age: number; phone: string | number; } interface IUserJoi { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Joi.StringSchema, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: Joi.NumberSchema, <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Joi.AlternativesSchema } type UserKeys&lt;T&gt; = { [key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> keyof T]: T[key]; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> evan: UserKeys&lt;IUser&gt; = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Evan'</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: <span class="hljs-number"><span class="hljs-number">791234567890</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> userJoiValidator: UserKeys&lt;IUserJoi&gt; = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Joi.string(), <span class="hljs-attr"><span class="hljs-attr">age</span></span>: Joi.number(), <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Joi.alternatives([Joi.string(), Joi.number()]) };</code> </pre> <br><h2 id="ispolzovat-variativnye-tipy">  Utiliser des types de variables </h2><br><p>  Vous pouvez définir explicitement les types, et en utilisant "OU" et en extrayant les propriétés, obtenir un code de travail local: </p><br><pre> <code class="javascript hljs">type TString = string | Joi.StringSchema; type TNumber = number | Joi.NumberSchema; type TStdAlter = TString | TNumber; type TAlter = TStdAlter | Joi.AlternativesSchema; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface IUser { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: TString; age: TNumber; phone: TAlter; } type UserKeys&lt;T&gt; = { [key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> keyof T]; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> olex: UserKeys&lt;IUser&gt; = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Olex'</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">67</span></span>, <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: <span class="hljs-string"><span class="hljs-string">'79998887766'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> joiUser: UserKeys&lt;IUser&gt; = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Joi.string(), <span class="hljs-attr"><span class="hljs-attr">age</span></span>: Joi.number(), <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Joi.alternatives([Joi.string(), Joi.number()]) };</code> </pre> <br><p>  Le problème de ce code se manifeste lorsque nous voulons récupérer un objet valide, par exemple, dans la base de données, c'est-à-dire que TS ne sait pas à l'avance quel type de données sera - simple ou Joi.  Cela peut provoquer une erreur lors de la tentative d'effectuer des opérations mathématiques sur un champ prévu comme <code>number</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> someUser: IUser = getUserFromDB({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Aleg'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> someWeirdMath = someUser.age % <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-comment"><span class="hljs-comment">// error TS2362: The left-hand side of an arithmetic operation must be of type'any', 'number', 'bigint' or an enum type</span></span></code> </pre> <br><p>  Cette erreur provient de <code>Joi.NumberSchema</code> car l'âge peut être non seulement un <code>number</code> .  Ce pour quoi ils se sont battus et ont rencontré. </p><br><h2 id="soedinit-dva-resheniya-v-odno">  Combinez deux solutions en une seule? </h2><br><p>  Quelque part à ce stade, la journée de travail approchait de sa conclusion logique.  J'ai pris une grande inspiration, j'ai bu du café et j'ai effacé cette putain de baise.  Il faut moins les lire sur Internet!  Le temps est venu <del>  prendre un fusil de chasse et </del>  lavage de cerveau: </p><br><ol><li>  Un objet doit être formé avec des types de valeurs explicites; </li><li>  Vous pouvez utiliser des génériques pour lancer des types dans une seule interface; </li><li>  Les génériques prennent en charge les types par défaut; </li><li>  La construction de <code>type</code> est clairement capable d'autre chose. </li></ol><br><p>  Nous écrivons l'interface générique avec des types par défaut: </p><br><pre> <code class="javascript hljs">interface IUser &lt; TName = string, TAge = number, TAlt = string | number &gt; { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: TName; age: TAge; phone: TAlt; }</code> </pre> <br><p>  Pour Joi, vous pouvez créer une seconde interface, héritant de la principale de cette manière: </p><br><pre> <code class="javascript hljs">interface IUserJoi extends IUser &lt; Joi.StringSchema, Joi.NumberSchema, Joi.AlternativesSchema &gt; {}</code> </pre> <br><p>  Pas assez bon, car le prochain développeur peut étendre <code>IUserJoi</code> avec un cœur léger ou pire.  Une option plus limitée consiste à obtenir un comportement similaire: </p><br><pre> <code class="javascript hljs">type IUserJoi = IUser&lt;Joi.StringSchema, Joi.NumberSchema, Joi.AlternativesSchema&gt;;</code> </pre> <br><p>  Nous essayons: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> aleg: IUser = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Aleg'</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: <span class="hljs-string"><span class="hljs-string">'79001231212'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> joiUser: IUserJoi = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Joi.string(), <span class="hljs-attr"><span class="hljs-attr">age</span></span>: Joi.number(), <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Joi.alternatives([Joi.string(), Joi.number()]) };</code> </pre> <br><p>  <strong>UPD:</strong> <br>  Pour terminer dans <code>Joi.object</code> j'ai dû me battre avec l'erreur <code>TS2345</code> et la solution la plus simple était la <code>as any</code> .  Je pense que ce n'est pas une hypothèse critique, car l'objet ci-dessus est toujours sur l'interface. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> joiUserInfo = { <span class="hljs-attr"><span class="hljs-attr">info</span></span>: Joi.object(joiUser <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> any).required() };</code> </pre> <br><p>  Il compile, semble soigné sur le lieu d'utilisation et, en l'absence de conditions spéciales, définit toujours les types par défaut!  La beauté ... <br><img src="https://habrastorage.org/getpro/habr/post_images/f8c/4c4/96b/f8c4c496b545e0d6bd4a249feda9095f.jpg" alt="-" title="triste ennui"><br>  ... ce que j'ai passé deux jours ouvrables </p><br><h1 id="rezyumirovanie">  Résumé </h1><br><p>  <strong>Quelles conclusions peut-on tirer de tout cela:</strong> </p><br><ol><li>  Évidemment, je n'ai pas appris à trouver des réponses aux questions.  Certes, avec une demande réussie, cette solution (ou mieux encore) se trouve dans les premiers 5k liens du moteur de recherche; </li><li>  Passer à la pensée statique de la dynamique n'est pas si facile, beaucoup plus souvent je martèle simplement un tel essaimage; </li><li>  Les génériques sont cool.  Sur Habr et stackoverflow est plein <del>  de vélos </del>  des solutions non évidentes pour créer un typage fort ... en dehors du runtime. </li></ol><br><p>  <strong>Ce que nous avons gagné:</strong> </p><br><ol><li>  Lors du changement d'interface, tout le code tombe, y compris le validateur; </li><li>  Dans l'éditeur, des conseils sont apparus sur les noms de propriété et les types de valeurs d'objet pour écrire un validateur; </li><li>  Le manque de bibliothèques tierces obscures dans le même but; </li><li>  Les règles Joi ne seront appliquées que lorsque cela est nécessaire, dans d'autres cas, les types par défaut; </li><li>  Si quelqu'un veut changer le type de valeur d'une propriété, alors avec la bonne organisation du code, il ira à l'endroit où tous les types associés à cette propriété sont rassemblés; </li><li>  Nous avons appris à masquer magnifiquement et simplement les génériques derrière l'abstraction de <code>type</code> , déchargeant visuellement le code des constructions monstrueuses. </li></ol><br><p>  <strong>Morale: l'</strong> expérience n'a pas de prix; pour le reste, il y a une carte du monde. </p><br><p>  Vous pouvez voir, toucher, exécuter le résultat final: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://repl.it/@Melodyn/Joi-by-interface</a> <br><img src="https://i01.fotocdn.net/s27/157/public_pin_m/250/2670655900.jpg" alt="" title="tut"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr450238/">https://habr.com/ru/post/fr450238/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr450228/index.html">10 mythes sur la rage</a></li>
<li><a href="../fr450230/index.html">Vous n'êtes pas google</a></li>
<li><a href="../fr450232/index.html">Systèmes de purification d'eau par osmose inverse - super ou pas?</a></li>
<li><a href="../fr450234/index.html">Comment les machines communiquent: protocole Modbus</a></li>
<li><a href="../fr450236/index.html">Comment j'ai cessé de m'inquiéter et jeté un regard différent sur les systèmes de suivi du temps</a></li>
<li><a href="../fr450240/index.html">Walmart ouvre son premier magasin axé sur l'IA</a></li>
<li><a href="../fr450242/index.html">Pourquoi aviez-vous besoin d'un autre framework PHP?</a></li>
<li><a href="../fr450244/index.html">Comment rédiger et promouvoir le Livre blanc?</a></li>
<li><a href="../fr450246/index.html">Le module de suppression de rebond de tube de l'ordinateur IBM 705. Que se passe-t-il si vous essayez de l'allumer?</a></li>
<li><a href="../fr450248/index.html">Enregistrement de la couleur des éléments dans la base de données Navisworks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>