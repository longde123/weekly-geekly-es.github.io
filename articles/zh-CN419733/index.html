<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍⚖️ 💃 😪 Git发生了！ 6个常见的Git错误以及如何修复 ✌🏻 👏 💉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注意事项 佩雷夫 ：几天前，博客中为我们最喜​​欢的GitLab项目的工程师提供了一个很小但非常有用的注释，其中的说明可以帮助您节省时间和精力，以防在使用Git时出现各种问题。 对于经验丰富的用户来说，它们不太可能是新手，但肯定会有一些对他们有用的人。 在本材料的最后，我们从自己身上获得了一点好处。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Git发生了！ 6个常见的Git错误以及如何修复</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/419733/"><img src="https://habrastorage.org/webt/n_/nq/m6/n_nqm6jyinrnpra6in4_sfpjhgy.png"><br><br>  <i><b>注意事项</b></i>  <i><b>佩雷夫</b></i>  <i>：几天前，博客中为我们最喜​​欢的GitLab项目的工程师提供了一个很小但非常有用的注释，其中的说明可以帮助您节省时间和精力，以防在使用Git时出现各种问题。</i>  <i>对于经验丰富的用户来说，它们不太可能是新手，但肯定会有一些对他们有用的人。</i>  <i>在本材料的最后，我们从自己身上获得了一点好处。</i>  <i>祝你星期五愉快！</i> <br><br> 我们都会犯错，尤其是在使用Git之类的复杂系统时。 但是请记住：Git发生了！ <a name="habracut"></a><br><br> 如果您只是刚开始使用Git，请在命令行上学习<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用它</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">基础知识</a> 。 在这里，我将讨论如何解决Git中最常见的六个错误。 <br><br><h2>  1.糟糕...我在上次提交的消息中误认了 </h2><br> 经过几个小时的编码，很容易在提交消息中犯错误。 幸运的是，这很容易解决： <br><br><pre><code class="bash hljs">git commit --amend</code> </pre> <br> 使用此命令，将打开一个文本编辑器，并允许您将消息更改为上一次提交。 没有人会知道您用三个“ ds”写了“ added”。 <br><br><h2>  2.糟糕...我忘记了将文件添加到上一次提交 </h2><br>  Git中另一个流行的错误是过于仓促的提交。 您是否忘记了添加文件，忘记了保存文件，还是应该做一些小的改动以使提交有意义？ 您的朋友将会再次<code>--amend</code> 。 <br><br> 添加丢失的文件并运行以下正确命令： <br><br><pre> <code class="bash hljs">git add missed-file.txt git commit --amend</code> </pre> <br> 现在，您可以更正消息，或简单地将其保存为原始格式（添加文件）。 <br><br><h2>  3.糟糕...我添加了一个不应在此存储库中的文件 </h2><br> 但是，如果您遇到相反的情况怎么办？ 如果您添加了不想提交的文件怎么办？ 带有欺骗性的ENV文件，构建目录或照片，以及被误保存在错误目录中的猫...一切解决。 <br><br> 如果您只完成了文件的<i>阶段</i>而尚未提交，则所有操作都可以通过简单地<i>重置</i>所需文件（位于阶段）来完成： <br><br><pre> <code class="bash hljs">git reset /assets/img/misty-and-pepper.jpg</code> </pre> <br> 如果您仍然提交更改，则需要执行额外的准备步骤： <br><br><pre> <code class="bash hljs">git reset --soft HEAD~1 git reset /assets/img/misty-and-pepper.jpg rm /assets/img/misty-and-pepper.jpg git commit</code> </pre> <br> 提交将被回滚，图片将被删除，然后进行新的提交。 <br><br>  <i><b>注意事项</b></i>  <i><b>佩雷夫</b></i>  <i>：如原始文章的注释中所述，也可以使用已经提到的<code>--amend</code>解决此问题。</i>  <i>显然，在本段中，作者想展示还有什么方法可以更改提交历史记录以修复错误。</i> <br><br><h2>  4.糟糕...我已将更改提交给主 </h2><br> 因此，您正在开发一个新功能，因此匆匆忙忙，却忘记为其创建新分支。 您已经提交了一堆文件，所有这些提交都在主数据库中。 幸运的是，GitLab <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可以</a>直接在master中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">阻止</a> push'y。 因此，我们可以使用以下三个命令将所有必要的更改回滚到新分支： <br><br>  <i><b>注意</b> ：请务必先提交或<i>隐藏</i>零，否则所有更改将全部丢失！</i> <br><br><pre> <code class="bash hljs">git branch future-brunch git reset HEAD~ --hard git checkout future-brunch</code> </pre> <br> 将在master中创建一个新分支-将还原到更改之前的状态，然后使用所有更改<i>对</i>新分支进行<i>检出</i> 。 <br><br><h2>  5.糟糕...我在分支名称中弄错了 </h2><br> 最细心的人可能会在前面的示例中注意到分支名称中的错误。 快到下午三点了，我还没吃晚饭，所以我的饥饿感把新的分支称为“分支”。 好东西！ <br><br><img src="https://habrastorage.org/webt/m0/lw/uh/m0lwuheyhfeewx0culyotitcaqg.png"><br><br> 以与使用<i>mv</i>命令重命名文件时相同的方式重命名此分支，即将其放置在具有正确名称的新位置： <br><br><pre> <code class="bash hljs">git branch -m future-brunch feature-branch</code> </pre> <br> 如果您已经按下该分支，则需要执行几个附加步骤。 我们将从<i>远程</i>删除旧分支，然后推送新分支： <br><br><pre> <code class="bash hljs">git push origin --delete future-brunch git push origin feature-branch</code> </pre> <br>  <i><b>注意事项</b></i>  <i><b>佩雷夫</b></i>  <i>：您仍然可以使用以下方法从远程删除分支：</i> <br><br><pre> <code class="bash hljs">git push origin :future-brunch</code> </pre> <br><h2>  6.糟糕...我又做了一次！ </h2><br> 万一出错时的最后一条命令。 当您使用Stack Overflow积累并推出了许多解决方案后，存储库中的所有内容都变得比开始时还要糟糕。 我们所有人曾经都面临着类似的... <br><br>  <code>git reflog</code>显示您执行的所有操作的列表。 然后，您可以使用Git的神奇时光旅行功能，即 回到过去的任何时刻。 我必须指出，这是您的最后希望-在简单的情况下，您不应求助于此。 因此，要获取列表，请执行以下操作： <br><br><pre> <code class="bash hljs">git reflog</code> </pre> <br> 我们的每个步骤都在Git的监视下进行。 在上述项目上运行团队，结果如下： <br><br><pre> <code class="bash hljs">3ff8691 (HEAD -&gt; feature-branch) HEAD@{0}: Branch: renamed refs/heads/future-brunch to refs/heads/feature-branch 3ff8691 (HEAD -&gt; feature-branch) HEAD@{2}: checkout: moving from master to future-brunch 2b7e508 (master) HEAD@{3}: reset: moving to HEAD~ 3ff8691 (HEAD -&gt; feature-branch) HEAD@{4}: commit: Adds the client logo 2b7e508 (master) HEAD@{5}: reset: moving to HEAD~1 37a632d HEAD@{6}: commit: Adds the client logo to the project 2b7e508 (master) HEAD@{7}: reset: moving to HEAD 2b7e508 (master) HEAD@{8}: commit (amend): Added contributing info to the site dfa27a2 HEAD@{9}: reset: moving to HEAD dfa27a2 HEAD@{10}: commit (amend): Added contributing info to the site 700d0b5 HEAD@{11}: commit: Addded contributing info to the site efba795 HEAD@{12}: commit (initial): Initial commit</code> </pre> <br> 注意最左边的列-这是索引。 如果要返回历史记录的任何点，请运行以下命令，将<code>{index}</code>替换为适当的值（例如<code>dfa27a2</code> ）： <br><br><pre> <code class="bash hljs">git reset HEAD@{index}</code> </pre> <br> 因此，现在您有六种方法可以摆脱最常见的Gitfall <i>（双关语：陷阱将其翻译为“陷阱，错误”- <b>大约翻译</b> ）</i> 。 <br><br><h2> 翻译者的奖金 </h2><br> 首先，对以上所有内容（第5段除外）提出宝贵意见。 请记住，这些操作会更改提交的历史记录，因此，只有在未将更改发送到<i>远程</i> （push'nut）的情况下，才应执行这些操作。 否则，旧的错误提交将已经在<i>远程</i>分支上，您将不得不执行<code>git pull</code> （ <i>合并</i>将完成，然后尝试“清除”历史记录将导致更糟的后果），或者<code>git push --force</code> ，在处理时会丢失数据几个人的分支... <br><br><img src="https://habrastorage.org/webt/b5/a3/jo/b5a3jomkgjnpqnzncgub0ok9xng.jpeg"><br><br> 现在-我们经验中的一些有用的补充： <br><br><ul><li> 如果（偶然地或不是偶然地）更改了分支并且需要返回到前一个分支，最快的方法是使用<code>git checkout -</code> 。 </li><li> 如果您不小心将一个文件添加到提交中，但该文件不应添加到该位置，但尚未提交，请使用<code>git reset HEAD path/to/file</code> 。 第3段描述了类似的情况，但实际上范围更广，因为 指的是提交中的任何不必要的更改（不只是额外文件的情况）。 </li><li> 最好不要提交太多，在将文件添加到提交时使用<code>-p</code>选项（ <code>git add -p</code> ）。 这使您可以查看提交中的每个更改。 但是值得记住的是，它不会将未跟踪的文件添加到提交中-需要在没有此参数的情况下添加它们。 </li><li> 在2014年的文章“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Git教程：10个常见的Git问题以及如何解决它们</a> ”中可以找到许多好的建议（包括更复杂的建议）。 特别要注意<code>git revert</code>和<code>git rebase -i</code> 。 </li></ul><br><h2> 译者的PS </h2><br> 另请参阅我们的博客： <br><br><ul><li>  “用于在生产中持续集成和交付的GitLab CI”： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1部分（我们的管道）</a> ；  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第二部分（克服困难）</a> ； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes和GitLab的最佳CI / CD实践（审查和视频报告）</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用GitLab CI构建项目：一个.gitlab-ci.yml用于数百个应用程序</a> 。” </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN419733/">https://habr.com/ru/post/zh-CN419733/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN419721/index.html">衰老的生物标志物。 面板脆弱。 第一部分</a></li>
<li><a href="../zh-CN419725/index.html">飞镖，骰子和硬币：离散分布算法</a></li>
<li><a href="../zh-CN419727/index.html">港口-开箱即用的Docker容器的注册表</a></li>
<li><a href="../zh-CN419729/index.html">慈善活动“为孩子们展翅高飞”</a></li>
<li><a href="../zh-CN419731/index.html">牙科光敏聚合物3D打印机MoonRay S的迷你回顾</a></li>
<li><a href="../zh-CN419735/index.html">使用Adobe Audition使用SDR检查I / Q信号</a></li>
<li><a href="../zh-CN419743/index.html">流行文章告诉我foo比bar快怎么办？</a></li>
<li><a href="../zh-CN419745/index.html">经典的AI风格：ML追求诗歌</a></li>
<li><a href="../zh-CN419747/index.html">DJI Ronin S-首次发布和主要功能</a></li>
<li><a href="../zh-CN419757/index.html">安德鲁·安（Andrew Un）的书《机器学习的激情》第1至14章的翻译</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>