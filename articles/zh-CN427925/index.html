<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👤 👬 🐀 无受害者迁移：将站点移至新域的技术清单 ⛪️ ⏪ 👨🏻‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="从长远来看，移动或迁移站点是一项带来巨大收益的事件，从短期来看，这同样具有重要的意义。 las，绝对不可能避免后者，但是提前考虑应如何以及以何种顺序处理它们是很现实的。 

 如果稍稍提起即将到来的举动使您不寒而栗，并且无可避免地渴望进入世界的尽头，并且以前已经将笔记本电脑扔到了窗外，那么我们的举动...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>无受害者迁移：将站点移至新域的技术清单</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427925/">从长远来看，移动或迁移站点是一项带来巨大收益的事件，从短期来看，这同样具有重要的意义。  las，绝对不可能避免后者，但是提前考虑应如何以及以何种顺序处理它们是很现实的。 <br><br> 如果稍稍提起即将到来的举动使您不寒而栗，并且无可避免地渴望进入世界的尽头，并且以前已经将笔记本电脑扔到了窗外，那么我们的举动清单就是为您设计的：) <br><a name="habracut"></a><br><h2>  1.创建备份 </h2><br> 无论您多么谨慎地进行此迁移，最好还是安全地使用服务器上的内置工具或外部其他工具备份所有站点文件和数据库。 <br><br><h2>  2.了解新领域的历史 </h2><br> 对于仅考虑移动和“感受土壤”的人以及不看而购买域名的人来说，此项目尤为重要。 有许多原因使您应特别注意新域的过去： <br><br><ol><li> 如果以前的所有者设法从搜索引擎获得禁令，那么您将很难与之抗争。 </li><li> 各种反向链接都可以访问该站点，您需要考虑并重定向该站点。 而且，反向链接可以是高质量的，反之亦然。 浏览通向该域的反向链接列表，您可以看到正常的自然反向链接或明显的垃圾邮件。 此外，每个引荐域都将具有不同的信任和权限指标，基于这些指标可以得出有关站点质量的结论。 </li><li> 如果您之前已经使用过该域，并且该域的主题在许多方面与您重叠，请最大程度地利用这种情况。 将重定向从该域的旧页面重定向到站点的相关新页面，这些新页面将在移动后的新地址提供。 因此，您可以免费获得免费的反向链接和更多的引荐流量。 </li></ol><br><h2>  3.创建一个临时页面以在移动过程中显示 </h2><br> 如果您购买的是带有“历史记录”的域名，并且已经有指向该域名的链接，我们建议您在该域名上放置一个临时的“存根”-要求您日后返回的页面或指向公司其他信息渠道的链接。 绝对应该向在技术工作结束之前进入新域页面之一的所有用户显示该信息。 如果您已经为新域上的站点设置了确切的发布日期，则甚至可以添加倒数计时器。 此页面<strong>必须</strong>返回503 Service Unavailable响应代码。 <br><br><img src="https://cdn.wpbeginner.com/wp-content/uploads/2017/03/github-maintenance.png" alt="alt_text" title="GitHub上的存根页面示例"><br>  <em>GitHub Stub示例</em> <br><br><h2>  4.上传完整的页面列表并设置重定向 </h2><br> 在将站点移至另一个域并在其上创建所有旧页面的新版本之前，您应该找出原则上有多少页面以及哪些页面。 这将需要构建重定向及其后续配置的映射。 为此，您将需要一个爬网程序，该爬网程序能够编译站点上所有<strong>可见</strong>页面的列表，以及您选择的任何反向链接监视服务。 <br><br><h3>  4.1。 使用搜寻器收集网站页面列表 </h3><br> 若要收集和上传站点的可见页面列表，可以使用任何方便的桌面搜寻器（在本文的框架内，我将使用Netpeak Spider的示例来描述过程）。 在禁用设置中的索引说明以及选择最少的分析参数集之后，只需考虑所有子域和目录就可以开始爬网整个站点。 <br><br><img src="https://img.netpeaksoftware.com/metiza/1PQYQM2.png" alt="    Netpeak Spider" title="网峰蜘蛛"><br><br> 此外，这样的检查将识别并消除新域上与服务器响应代码有关的所有问题-所有断开的链接，使用301以外的响应代码进行重定向等。 <br><br> 扫描完成后，您只需导出结果即可将页面列表保存为表格形式。 <br><br><h3>  4.2。 使用反向链接监视服务收集页面列表 </h3><br> 强烈建议您不仅限于在抓取过程中获得的页面列表，而且要遍历反向链接列表。 首先，它将有助于考虑您可能会丢失的链接。 其次，您将有很好的理由检查常规列表中是否包含看似通向您网站的破旧反向链接，但最后它们提供了404响应代码。 它们上的流量丢失了，因此可以与网站所有者联系并立即用新域替换链接，或为其注册正确的重定向。 <br><p> 可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Serpstat中</a>的“链接分析”， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Ahrefs</a>中的“站点浏览器” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">工具</a>以及许多其他类似服务来完成此操作。 选择将取决于您的个人喜好。 <br></p><br><h3>  4.3。 清单预清洁 </h3><br> 卸载了站点的内部和外部链接的链接列表后，请执行一些简单的步骤，以防止在新域中出现许多严重错误： <br><br><ol><li> 确保要移动的页面列表没有在不同地址提供完整的重复页面。 您可以通过扫描启用了页面哈希和文本哈希分析的列表页面来检测它们。 如果在旧域上发现具有外部反向链接的重复项，建议您将所有重复项重定向到一个新的规范页面。 最好在此阶段立即消除重复项，而不必等待最终的错误检查。 </li><li> 检查指向您站点上可用的外部站点的所有链接：如果可能，将其替换为相关的链接，或者将其完全删除。 </li><li> 查明该网站是否具有可导致内部页面无法访问的链接。 如果它们仅在您的站点上可用，并且没有人安装反向链接，则在转移到新域时将其删除并替换。 如果这些发现的无效地址出现在背光列表中，请在移动时考虑它们，并将重定向放置在最相关的页面上。 </li></ol><br><h3>  4.4。 配置服务器转发 </h3><br> 两种方法获得的列表必须合并到一个表中，以消除重复，并注册相应的地址以重定向到新域。 对于重定向，您应该使用301服务器重定向，该服务器使用.htaccess文件配置。 并且最简单的方法是提供新旧页面具有相同的名称（ <em>old.com/page-about-seo</em>和<em>new.com/page-about.seo</em> ）。 <br><br> 负责服务器级重定向的代码如下所示： <br><br><pre><code class="hljs powershell">RewriteCond %{HTTP_HOST} ^www\.old\.com<span class="hljs-variable"><span class="hljs-variable">$</span></span> [<span class="hljs-type"><span class="hljs-type">NC</span></span>] RewriteRule ^(.*)<span class="hljs-variable"><span class="hljs-variable">$</span></span> http://new.com/<span class="hljs-variable"><span class="hljs-variable">$1</span></span> [<span class="hljs-type"><span class="hljs-type">R</span></span>=<span class="hljs-number"><span class="hljs-number">301</span></span>,<span class="hljs-type"><span class="hljs-type">L</span></span>] RewriteCond %{HTTP_HOST} ^old\.com RewriteRule ^(.*)<span class="hljs-variable"><span class="hljs-variable">$</span></span> http://new.com/<span class="hljs-variable"><span class="hljs-variable">$1</span></span> [<span class="hljs-type"><span class="hljs-type">R</span></span>=<span class="hljs-number"><span class="hljs-number">301</span></span>,<span class="hljs-type"><span class="hljs-type">L</span></span>]</code> </pre> <br> 另外，在.htaccess中为重定向编写代码时，请不要忘记考虑到站点主镜像的重定向-带有<i>www</i>前缀<i>。</i> 使用或不使用HTTP和HTTPS。 <br><br><h2>  5.创建站点地图 </h2><br> 在新域上创建所有必要页面之后，您需要执行下一步-创建站点地图。 <br><br> 总共有6种类型的地图，其中三种是最常用的-用于站点所有页面的基本XML Sitemap，用于图像的Image Sitemap和HTML Sitemap，其主要任务是为用户简化站点内的导航。 第一种是为几乎所有类型的网站创建的，第二种是为包含大量图形内容的网站创建的，这也可能带来来自图像搜索的流量。 <br><br> 您可以使用多种工具来创建地图： <br><br><ol><li> 您使用的CMS的内置功能或其他外部插件。 </li><li> 在线站点地图生成器（XML Sitemap Generator，XML-Sitemaps.com，Check Domains和其他）。 </li><li> 用于自动生成站点地图的特殊脚本。 </li><li> 带有内置Sitemaps生成器的桌面工具（InSpyder）和搜寻器（例如Netpeak Spider） <br></li></ol><br> 在创建地图并将其放置在网站的根目录中之后，请不要忘记在robots.txt文件的<em>Sitemap</em>指令中指定其地址。 <br><br><h2>  6.准备一个新的robots.txt文件 </h2><br> 在发布新网站并删除“存根”之前，请务必仔细编译robots.txt文件。 验证这些索引说明正确性的一种方法是使用Netpeak Spider中的Virtual Robots.txt功能。 <br><br><img src="https://img.netpeaksoftware.com/metiza/1PQYZVL.png" alt=" robots.txt  netpeak spider" title="netpeak蜘蛛虚拟robots.txt"><br><br> 有了它，您可以在不更改真实robots.txt文件的情况下将搜索机器人的说明加载到程序中，然后“通过搜索引擎的眼光”查看该站点。 这将使您能够了解某些重要页面是否已从索引中关闭，反之亦然。 <br><br> 应用新的索引编制说明后，请确保对站点进行可索引性的最终检查。 如果事实证明您在某个地方犯了一个错误，即使只是出于粗心大意，您网站的很大一部分也可能不会包含在搜索引擎索引中。 结果将是损失大量的自然流量。 <br><br><h2>  7.设置rel = canonical属性 </h2><br> 消除所有重复项和断开的链接，配置重定向并将所有内容成功移动到新域之后，请务必注意rel = canonical属性。 首先，请确保在转到页面代码后，没有指向旧域地址的规范属性。 其次，在以前未进行标准化的页面上，建议在它们上设置rel = canonical。 <br><br><h2>  8.搜索引擎关于移动的通知 </h2><br> 在完成所有基本技术工作后，您只需要将站点地址的更改通知搜索引擎即可。 <br><br><h3>  8.1。 在Google Search Console中更改地址 </h3><br> 要在GSC中更改地址，您首先需要注册一个新站点，然后转到旧域的设置并选择“更改地址”。 <br><br><img src="https://img.netpeaksoftware.com/metiza/1OQ3W32.png" alt="alt_text" title="image_tooltip"><br><br> 从下拉列表中选择一个新域，然后遍历Google Search Console清单的所有项目。 之后，您确认发送了地址更改请求。 <br><br><img src="https://img.netpeaksoftware.com/metiza/1OQ2DKY.png" alt="alt_text" title="image_tooltip"><br><br><h3>  8.2。 在Yandex.Webmaster中更改地址 </h3><br> 在Yandex搜索系统的网站管理员面板中，移动过程几乎以相同的方式执行。 您可以在“索引”→“站点移动”部分中轻松指定新地址。 建议（但不是必需）此时，新域已在您的网站管理员帐户中注册。 <br><br><img src="https://img.netpeaksoftware.com/metiza/1P6944S.png" alt="alt_text" title="image_tooltip"><br><br><h3>  8.3。 更改Google Analytics（分析）中的地址 </h3><br> 要在Google Analytics（分析）的设置中更改地址，请转到设置部分，然后选择“帐户设置”→“资源设置”。 在此部分中，您将找到“默认URL”字段，在其中您需要指定一个新地址。 <br><br><img src="https://img.netpeaksoftware.com/metiza/1PAPGPI.png" alt="alt_text" title="image_tooltip"><br><br> 请注意，与移动相关的所有先前与电子商务相关的设置都需要更新。 <br><br><h3>  8.4。  Yandex.Metrica中地址的更改 </h3><br> 要更改您的Yandex.Metrica帐户中的域，请转到“设置”部分，然后在“摘要”选项卡上，写下新的站点地址。 <br><br><img src="https://img.netpeaksoftware.com/metiza/1PAQ2HU.png" alt="alt_text" title="image_tooltip"><br><br><h2>  9.验证跟踪代码 </h2><br> 尽管采取了这种措施，但您的站点总体上并未发生任何重大变化。 但是，与此同时，您仍应确保所有必要的跟踪代码都能正常工作，并出现在网站的所有页面上。 我们建议按照以下步骤进行操作： <br><ol><li> 看一下实时分析报告：在它们的帮助下，您可以了解站点上的代码是否原则上有效。 </li><li> 使用解析（数据提取）在站点上搜索代码。 您可以为此使用搜寻器：您只需要根据跟踪代码的片段来配置解析，以了解它位于哪些页面上以及哪些页面缺失。 </li></ol><br><h2>  10.最终错误检查 </h2><br> 在完成与搬迁有关的所有技术工作之后，进行最终检查并迅速纠正所有错误也很重要。 您越早找到它们，就越容易消除它们并避免可能的负面影响。 <br><br><h3>  10.1。 检查旧域中的页面 </h3><br> 成功传输内容并设置从旧域到新域的转发后，请确保使用旧URL列表运行扫描。 这对于检查重定向以及搜索可能断开的链接和具有错误响应代码的重定向（仅允许<strong>永久移动301</strong> ）是必要的。 <br><br> 作为检查的一部分，搜寻器将显示是否存在： <br><br><ul><li> 重定向链 </li><li> 而不是301重定向， </li><li> 重定向失败。 </li></ul><br><br><h3>  10.2。 检查新域上的页面 </h3><br> 您可以使用桌面搜寻器以相同的方式执行此测试。 希望该站点没有任何高危和中危的错误，但是特别重要的是要确保它没有以下问题： <br><br><ol><li> 不正确的服务器响应代码。 <br> 该站点只能提供3个响应代码选项： <strong>200 OK</strong> ， <strong>301永久移动</strong>和<strong>200 OK＆Canonicalized</strong> 。 没有给出第四，第五和第六。 所有其他代码（包括所有4xx和5xx）将指示网站设置中的错误，并阻止其被搜索引擎索引。 唯一的例外是代码为200 OK＆Disallowed和200 OK＆Noindex / Nofollow的页面，它们应显示在网站上，但不应包含在索引中。 <br><img src="https://img.netpeaksoftware.com/metiza/1PPWT4L.png" alt="alt_text" title="image_tooltip"><br></li><li> 重复项 <br> 如果您在迁移过程中已经必须进行大规模的技术工作，我们建议您不要推迟修正旧的技术错误，而要一口气完成所有工作。 这些包括所有现有的重复类型：重复页面，文本内容，H1，标题和描述。 <br></li><li> 缺少元数据。 <br> 当然，您有充分的理由将网站移至新域，其中最有可能的是，网站在有机行业中的位置有所改善，点击率也有所提高。 为确保您的努力没有白费，请确保该代码段不仅显示更新的URL，而且还显示正确的标题以及正确书写的描述。 </li><li> 网站地图中的错误。 <br> 正如他们所说，狗屎会发生，因此即使在站点地图中也可以发现错误。 它们的存在可能会对搜索机器人对网站的索引产生不利影响，尤其是当您拥有一个拥有数万个页面的巨型网站时。 要检查地图，请在Netpeak Spider的内置工具列表中选择“ XML Sitemap Validator”，然后指定要检查的地图地址。 <br></li></ol><br><h2> 简要介绍主要内容 </h2><br> 不管将站点移至新域的原因是什么，您都应该认真对待移交的技术方面。 该过程涉及10个主要阶段，没有这些阶段，不能认为搬迁已完成： <br><br><ol><li> 创建站点的备份副本。 </li><li> 了解要移动的域的历史。 </li><li> 在移动期间设置“插头”。 </li><li> 完整的页面列表集合，用于设置重定向。 </li><li> 站点地图的开发和实施。 </li><li> 创建一个新的robots.txt文件。 </li><li> 设置规范属性。 </li><li> 更改网站管理员和分析系统面板中的设置。 </li><li> 在网站上检查跟踪代码。 </li><li> 最终错误检查。 </li></ol><br> 要完成上述所有步骤，您将需要以下服务：收集反向链接，搜寻器，市场上可用于创建站点地图的工具之一，以及Google Analytics（分析），Google Search Console，Yandex.Metrica和Yandex.Webmaster。 <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN427925/">https://habr.com/ru/post/zh-CN427925/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN427915/index.html">愚蠢的推定</a></li>
<li><a href="../zh-CN427917/index.html">回复介意帖子</a></li>
<li><a href="../zh-CN427919/index.html">将COM移植到Linux</a></li>
<li><a href="../zh-CN427921/index.html">4关于拖延症的视频</a></li>
<li><a href="../zh-CN427923/index.html">我如何将新设备添加到SmartThings Hub，第1部分</a></li>
<li><a href="../zh-CN427927/index.html">B-残酷。 巴什科尔托斯坦共和国乒乓球联合会（FTN RB）的官方网站</a></li>
<li><a href="../zh-CN427929/index.html">劳动部：测试任务是一种雇佣关系</a></li>
<li><a href="../zh-CN427931/index.html">互联网信息架构第4部分</a></li>
<li><a href="../zh-CN427933/index.html">Steam开发人员意见：阀门的最大收益和低责任</a></li>
<li><a href="../zh-CN427935/index.html">在2018年底重新安装预安装的Windows 8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>