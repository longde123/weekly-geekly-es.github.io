<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â™ï¸ ğŸ‘¨ğŸ¼â€ğŸ³ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ Perbarui perpustakaan dan pembenci SPPermission ğŸ§’ğŸ¼ ğŸŒµ ğŸ‘¨ğŸ¼â€ğŸ’»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- " Beberapa jenis perpustakaan, seseorang memperbarui ... Apa hubungannya Haiter dengan itu?" Mengapa saya, pengembang yang hebat, perlu menghabiskan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perbarui perpustakaan dan pembenci SPPermission</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430886/"> - " <i>Beberapa jenis perpustakaan, seseorang memperbarui ... Apa hubungannya Haiter dengan itu?"</i>  <i>Mengapa saya, pengembang yang hebat, perlu menghabiskan waktu untuk artikel ini?</i>  â€ <br><br>  Anda mungkin berpikir, sahabatku.  Tidak perlu buang waktu.  Ini hanya bacaan sore dengan tawa lucu.  Teks akan tentang perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RequestPermission</a> dan penulis misteriusnya. <br><a name="habracut"></a><br>  Mari kita mulai dengan hal utama - rebranding!  Perpustakaan telah diubah namanya menjadi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SPPermission</a> .  Saya tidak tahu apakah ini masalahnya atau tidak, tetapi setelah mengubah nama, itu tergantung di bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">atas GitHub</a> sebagai minggu kedua.  Ya, ada top seperti itu, itu bersyarat, tetapi proyek menarik masih dapat ditemukan di sana.  Penulis (orang misterius), memperbarui spanduk di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman proyek</a> , deskripsi, sebagian besar <i>donat</i> dimasukkan.  Benar-benar serakah! <br><br>  Tapi mari kita beralih ke proyek itu sendiri: <br><br><img src="https://habrastorage.org/webt/g8/b4/pb/g8b4pbkznhzv5e-fhz_rifcodpo.gif" width="600"><br><br>  Seperti yang dapat Anda lihat dari ukuran besar gif <i>(non-Ortodoks 4 megabita)</i> , proyek meminta daftar izin, ada ikon, teks.  Anda bahkan dapat mengatakan bahwa itu terlihat bagus. <br><br><h3>  Instal </h3><br>  Anda cukup menyeret kode sumber ke proyek Anda, ini adalah folder file terstruktur.  Dan Anda <s>tidak</s> dapat <s>menderita omong kosong</s> untuk membangun perpustakaan menggunakan <i>SocoaPods</i> .  Saya tidak akan memberi tahu pro dan kontra, bukan tentang artikel ini.  Tambahkan baris ke file <i>pod</i> : <br><br><pre><code class="ruby hljs">pod <span class="hljs-string"><span class="hljs-string">'SPPermission'</span></span></code> </pre> <br>  dan perbarui dependensi.  Kemungkinan besar, ini adalah langkah paling sulit dari semua yang akan datang) <br><br><h3>  Gunakan </h3><br>  Jika Anda hanya menyeret file ke proyek, modul <i>SPPermission</i> sudah tersedia.  Jika Anda <s>tidak menderita omong kosong, Anda</s> menggunakan <i>ocoaPods</i> , maka Anda harus mengimpor perpustakaan ke controller: <br><br><pre> <code class="plaintext hljs">import SPPermission</code> </pre><br>  Sekarang di fungsi <i>viewDidAppear</i> , <i>kami</i> memanggil konstruk berikut: <br><br><pre> <code class="plaintext hljs">override func viewDidAppear(_ animated: Bool) { super.viewDidAppear(animated) SPPermission.Dialog.request( with: [.camera, .calendar, .notification], on: self ) }</code> </pre><br>  Kami melewati daftar izin dan pengontrol di mana kami akan menyajikan kotak dialog.  Masih memulai proyek. <br><br><h3>  Kustomisasi </h3><br>  Jika Anda, teman baik, telah bekerja dengan tabel atau koleksi, maka kata-kata <i>Delegasi</i> dan <i>DataSource</i> tidak akan membuat takut.  Dan jika Anda sedikit terobsesi dengan pola, maka Anda bahkan akan berteriak: <br><br>  - â€œ <i>Wow!</i>  <i>Pendekatan berbasis protokol!</i>  â€ <br><br>  Kamu lihat!  Kamu lihat?  Tetapi saya mengatakan bahwa itu tidak akan lucu.  Tapi begitu saya membaca ke baris ini, maka mari kita lanjutkan. <br><br>  Mari kita mulai dengan protokol <i>SPPermissionDialogDataSource</i> , itu akan bertanggung jawab untuk menyesuaikan kotak dialog dan akan memungkinkan integrasi perpustakaan yang lebih loyal ke dalam proyek.  Mari kita lihat parameternya: <br><br><pre> <code class="plaintext hljs">@objc public protocol SPPermissionDialogDataSource: class { @objc optional var dialogTitle: String { get } @objc optional var dialogSubtitle: String { get } @objc optional var dialogComment: String { get } @objc optional var allowTitle: String { get } @objc optional var allowedTitle: String { get } @objc optional var bottomComment: String { get } @objc optional var showCloseButton: Bool { get } @objc optional func name(for permission: SPPermissionType) -&gt; String? @objc optional func description(for permission: SPPermissionType) -&gt; String? @objc optional func image(for permission: SPPermissionType) -&gt; UIImage? }</code> </pre><br>  Sejujurnya, saya tidak melihat alasan untuk memikirkan semua orang, karena nama mereka berbicara.  Mari kita <i>menganalisis</i> beberapa yang ambigu: <i>bottomComment</i> dan <i>showCloseButton</i> . <br><br>  Parameter pertama bertanggung jawab untuk komentar di bawah kotak dialog, misalnya, Anda dapat menempatkan prompt " <i>Gesek untuk menutup</i> ": <br><br><img src="https://habrastorage.org/webt/o3/ju/ol/o3juolykpylxcrkpb1jumil_t5s.jpeg"><br><br>  Parameter kedua, <i>showCloseButton</i> , bertanggung jawab atas tombol tutup di sudut kanan atas layar.  Saya juga punya gambar dengan contoh: <br><br><img src="https://habrastorage.org/webt/dx/8z/va/dx8zva68cc4b6zwllgs5yk95ps0.jpeg"><br><br>  Beberapa fungsi memungkinkan <i>nihil</i> untuk dikembalikan, ini diperlukan jika Anda tidak perlu menyesuaikan semua header / ikon atau teks.  Cukup mengembalikan <i>nihil</i> untuk meninggalkan nilai default: <br><br><pre> <code class="plaintext hljs">func description(for permission: SPPermissionType) -&gt; String? { if permission == .calendar { return "" } lse { return nil } }</code> </pre><br>  Tetap meneruskan objek <i>DataSource</i> ke struktur utama: <br><br><pre> <code class="plaintext hljs">SPPermission.Dialog.request( with: [.camera, .calendar, .microphone, .notification], on: self, dataSource: self )</code> </pre><br><h3>  Delegasikan </h3><br>  Ini memungkinkan Anda untuk melacak beberapa acara.  Mari kita lihat protokolnya: <br><br><pre> <code class="plaintext hljs">@objc public protocol SPPermissionDialogDelegate: class { @objc optional func didHide() @objc optional func didAllow(permission: SPPermissionType) }</code> </pre><br>  Hmm, tidak banyak ... Dan, apa lagi yang dibutuhkan?) Saya pikir tidak ada gunanya menjelaskan acara apa yang akan dipanggil fungsi.  Nama-nama berbicara.  Saya menarik perhatian Anda - delegasi tidak boleh lupa untuk menunjukkan: <br><br><pre> <code class="plaintext hljs">SPPermission.Dialog.request( with: [.camera, .calendar, .microphone, .notification], on: self, delegate: self dataSource: self )</code> </pre><br><h3>  Izin </h3><br><img src="https://habrastorage.org/webt/og/ow/qt/ogowqtraw3cz4vrwpjjupu4vmuo.jpeg"><br><br>  Daftar akan diisi ulang jika ada saran atau kritik dari perpustakaan, ada baiknya membuat masalah baru <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di sini</a> <br><br><h3>  Roti </h3><br>  Perlu memperhatikan fungsi yang bermanfaat: <br><br><pre> <code class="plaintext hljs">func isAllow(_ permission: SPPermissionType) -&gt; Bool</code> </pre><br>  Ini akan memberi tahu Anda jika pengguna telah memberikan izin.  Untuk meningkatkan loyalitas, disarankan untuk meminta izin tidak dalam bundel, tetapi sebelum digunakan.  Dan tidak lebih dari 3 mantan!  Meskipun saya merasa sulit untuk menemukan situasi di mana saya membutuhkan lebih banyak) Gunakan ini: <br><br><pre> <code class="plaintext hljs">let isAvailableCamera = SPPermission.isAllow(.amera)</code> </pre><br><h3>  Mengapa diperbarui? </h3><br>  Versi lama terlihat seperti ini, dan mungkin setahun yang lalu itu bukan apa-apa: <br><br><img src="https://habrastorage.org/files/270/1d0/037/2701d00370d74987ae03348cc59d24b0.gif" width="600"><br><br>  Sebenarnya, saya tidak memperbaruinya selama setahun (oh well, jangan pura-pura Anda tidak mengerti bahwa saya adalah penulis perpustakaan), tetapi baru-baru ini, saya menerima surat ... meskipun mari kita bicarakan tentang cerita ini sedikit kemudian.  Kami sedang melakukan bisnis serius di sini! <br><br><h3>  Arsitektur </h3><br>  Sekitar setahun yang lalu, saya menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sebuah artikel</a> di mana saya langsung mengalahkan pecinta penggunaan arsitektur yang tidak dapat dibenarkan.  Tapi hanya saya yang berpikir demikian, dan pesan utama tidak terdengar.  Keinginan saya untuk menyederhanakan tahun ini belum berhenti.  Ketika saya menyusun desain ulang, saya menyadari bahwa proyek tersebut harus ditulis ulang secara keseluruhan.  Ini adalah semacam rig pengeboran dengan kemampuan untuk mendengarkan radio, memotong sayuran dan pemanas setengah tingkat.  Saya melihatnya setahun kemudian!  Sekarang saya merasa bodoh menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ini</a> , memiliki contoh yang sangat rumit.  Mungkin di tahun lain, saya akan membuatnya lebih mudah.  Mari lihat) <br><br><h3>  Jadi bagaimana ceritanya? </h3><br>  Tutorial sobsna telah berakhir dan kami beralih ke obrolan.  Beberapa minggu yang lalu saya menerima surat yang meminta saya menjelaskan cara kerja perpustakaan.  Itu adalah pertanyaan aneh, dan karena saya meninggalkan perpustakaan, saya hanya menjawab dengan templat: <br><br>  - â€œ <i>Teman, saya tidak mendukung perpustakaan sekarang, saya tidak punya waktu luang.</i>  <i>Semua yang terbaik</i> â€ <br><br>  Saya hanya menulisnya dengan benar, hanya di Zabugorsk.  Dan saya lupa.  Memasuki poppy, saya melihat sekitar selusin !!!  pesan di folder spam.  Nah, semuanya, jelas beberapa portal telah menyimpang, sekarang bagaimana cara saya berhenti berlangganan dari surat mereka!  Dan nnnet ... Orang yang sama menulis kepadaku, hanya saja kali ini dengan marah.  Dalam surat-surat yang saya pelajari bahwa saya bukan penulis perpustakaan (karena itu, saya tidak dapat memberi tahu Anda), saya menemukan bahwa orang-orang seperti saya adalah orang yang paling mengerikan (dan kami perlu melarang pendaftaran di GitHub), saya menemukan bahwa saya ingin banyak uang untuk pekerjaan saya yang tidak berharga.  Uang?  Di halaman lama bahkan tidak ada formulir donat.  Tapi saya mengerti intinya, pria itu hanya marah. <br><br>  Saya memutuskan untuk membantu, tetapi bukan karena kebaikan - saya sangat tertarik pada apa yang luar biasa yang perlu disesuaikan, yang memicu gelombang kemarahan yang besar.  Ternyata dia sedang mencari metode yang dipanggil ketika kotak dialog ditutup.  Tidak ada batasan untuk tawa saya melalui air mata!  Delegasi itu dijelaskan dalam versi pertama. <br><br>  Ceritanya sedih, tapi lebih sedih lagi!  Ya, ya!  Saya menjelaskan secara rinci kepadanya secara pribadi bagaimana menggunakan delegasi, sehingga, tentu saja, kursus umum.  Saya tidak melewatkan kesempatan untuk bersenang-senang dan mengatakan bahwa semua ini ada di halaman utama proyek sejak awal.  Saya mendapat jawabannya ... tetapi saya ingin lebih menangis: <br><br>  â€œ <i>Saya baru-baru ini memulai pemrograman dan saya tidak ingin mengerti dokumentasinya.</i>  <i>Sampai jumpa</i> â€ <br><br>  Saya tertawa untuk waktu yang lama. <br><br><h3>  Kita selesai </h3><br>  Sebuah program pendidikan singkat telah diperkenalkan, untuk perhatian saya akan meninggalkan tautan ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">selang</a> waktu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dengan desain</a> (saya menjilat indentasi dan warna dari aplikasi elektronik) dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tutorial</a> yang akan menunjukkan semua yang saya jelaskan di sini, tetapi jelas. <br><br>  Semua migrasi sukses ke Swift baru! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id430886/">https://habr.com/ru/post/id430886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id430876/index.html">Pengembangan melalui pengujian: meningkatkan keterampilan</a></li>
<li><a href="../id430878/index.html">PhpStorm 2018.3 tersedia</a></li>
<li><a href="../id430880/index.html">Implementasi Pemrosesan Data Lainnya</a></li>
<li><a href="../id430882/index.html">Xiaomi Aqara Beralih redo dari ZigBee ke Z-Wave</a></li>
<li><a href="../id430884/index.html">Pabrik percetakan: mengapa "LANIT-Integration" membuka "percetakan" sendiri</a></li>
<li><a href="../id430888/index.html">Seberapa aman menggunakan paket R untuk bekerja dengan API sistem periklanan</a></li>
<li><a href="../id430890/index.html">Di mana lincah itu mengerikan, terutama scrum</a></li>
<li><a href="../id430892/index.html">Kombinasi dari cross-platform dan pendekatan asli dalam pengembangan aplikasi mobile</a></li>
<li><a href="../id430894/index.html">Situasi: merek semakin banyak menghabiskan uang untuk beriklan di podcast - kami mengerti mengapa</a></li>
<li><a href="../id430896/index.html">Linux Foundation telah membentuk dana untuk GraphQL dan Ceph - mengapa mereka dibutuhkan dan apa yang diharapkan dari mereka</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>