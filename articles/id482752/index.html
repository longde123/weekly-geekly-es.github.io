<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚ÄçüöÄ üôá ü§òüèø "Epik Baru". Kami makan gajah di beberapa bagian üë©üèæ‚ÄçüöÄ ‚è∏Ô∏è üàØÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini saya akan membuat lingkungan kerja untuk pengembangan game "Epics", dan juga saya akan membagi game itu sendiri menjadi bagian-bagian...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Epik Baru". Kami makan gajah di beberapa bagian</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/482752/"><p><img src="https://habrastorage.org/webt/gd/be/ip/gdbeip7f5h-k71jqzl7gmb1axva.jpeg"></p><br><p>  Pada artikel ini saya akan membuat lingkungan kerja untuk pengembangan game "Epics", dan juga saya akan membagi game itu sendiri menjadi bagian-bagian yang cocok untuk digunakan di OpenFaaS.  Saya akan melakukan semua manipulasi di Linux, Kubernetes akan digunakan di minikube menggunakan VirtualBox.  Di mesin saya yang bekerja ada 2 core prosesor dan 12GB RAM, saya menggunakan SSD sebagai disk sistem.  Saya akan menggunakan debian 8 sebagai sistem utama untuk pengembangan, dengan paket emacs, sudo, git dan virtualbox diinstal, saya akan menginstal sisanya dengan mengunduh dari GitHub dan sumber lainnya.  Kami akan menginstal aplikasi ini di / usr / local / bin, kecuali ditentukan lain.  Ayo mulai! </p><a name="habracut"></a><br><h2 id="podgotovka-rabochego-okruzheniya">  Persiapan lingkungan kerja </h2><br><h3 id="ustanovka-go">  Pergi instalasi </h3><br><p>  Ikuti instruksi dari situs web resmi: </p><br><pre><code class="plaintext hljs">$ curl -L0 https://dl.google.com/go/go1.13.5.linux-amd64.tar.gz -o go.tar.gz $ sudo tar -C /usr/local -xzf go.tar.gz $ echo 'export PATH=$PATH:/usr/local/go/bin' &gt;&gt; ~/.profile</code> </pre> <br><p>  Periksa kinerja: </p><br><pre> <code class="plaintext hljs">$ mkdir -p ~/go/src/hello &amp;&amp; cd ~/go/src/hello $ echo 'package main import "fmt" func main() { fmt.Printf("hello, world\n") }' &gt; hello.go $ go build $ ./hello hello, world</code> </pre> <br><h3 id="ustanovka-faas-cli">  Instal faas-cli </h3><br><p>  Ikuti instruksi dari situs web resmi: </p><br><pre> <code class="plaintext hljs">$ curl -sSL https://cli.openfaas.com | sudo -E sh x86_64 Downloading package https://github.com/openfaas/faas-cli/releases/download/0.11.3/faas-cli as /tmp/faas-cli Download complete. Running with sufficient permissions to attempt to move faas-cli to /usr/local/bin New version of faas-cli installed to /usr/local/bin Creating alias 'faas' for 'faas-cli'. ___ _____ ____ / _ \ _ __ ___ _ __ | ___|_ _ __ _/ ___| | | | | '_ \ / _ \ '_ \| |_ / _` |/ _` \___ \ | |_| | |_) | __/ | | | _| (_| | (_| |___) | \___/| .__/ \___|_| |_|_| \__,_|\__,_|____/ |_| CLI: commit: 73004c23e5a4d3fdb7352f953247473477477a64 version: 0.11.3</code> </pre> <br><p>  Selain itu, Anda dapat mengaktifkan bash-completion: </p><br><pre> <code class="plaintext hljs">faas-cli completion --shell bash | sudo tee /etc/bash_completion.d/faas-cli</code> </pre> <br><h3 id="ustanovka-i-nastroyka-kubernetes">  Instal dan konfigurasikan Kubernetes </h3><br><p>  Minikube sudah cukup untuk pengembangan, jadi kami akan menginstalnya dan kubelet di / usr / local / bin, kami juga akan menginstal helm untuk menginstal aplikasi: </p><br><pre> <code class="plaintext hljs">$ curl https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 -o minikube &amp;&amp; chmod +x minikube &amp;&amp; sudo mv minikube /usr/local/bin/ $ curl https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl -o kubectl &amp;&amp; chmod +x kubectl &amp;&amp; sudo mv kubectl /usr/local/bin/ $ curl https://get.helm.sh/helm-v3.0.2-linux-amd64.tar.gz | tar -xzvf - linux-amd64/helm --strip-components=1; sudo mv helm /usr/local/bin</code> </pre> <br><p>  Luncurkan minikube: </p><br><pre> <code class="plaintext hljs">$ minikube start minikube v1.6.2 on Debian 8.11 Automatically selected the 'virtualbox' driver (alternates: []) Downloading VM boot image ... &gt; minikube-v1.6.0.iso.sha256: 65 B / 65 B [--------------] 100.00% ? p/s 0s &gt; minikube-v1.6.0.iso: 150.93 MiB / 150.93 MiB [-] 100.00% 5.67 MiB p/s 27s Creating virtualbox VM (CPUs=2, Memory=8192MB, Disk=20000MB) ... Preparing Kubernetes v1.17.0 on Docker '19.03.5' ... Downloading kubeadm v1.17.0 Downloading kubelet v1.17.0 Pulling images ... Launching Kubernetes ... Waiting for cluster to come online ... Done! kubectl is now configured to use "minikube"</code> </pre> <br><p>  Kami memeriksa: </p><br><pre> <code class="plaintext hljs">$ kubectl get pods --all-namespaces NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-6955765f44-knlcb 1/1 Running 0 29m kube-system coredns-6955765f44-t9cpn 1/1 Running 0 29m kube-system etcd-minikube 1/1 Running 0 28m kube-system kube-addon-manager-minikube 1/1 Running 0 28m kube-system kube-apiserver-minikube 1/1 Running 0 28m kube-system kube-controller-manager-minikube 1/1 Running 0 28m kube-system kube-proxy-hv2wc 1/1 Running 0 29m kube-system kube-scheduler-minikube 1/1 Running 0 28m kube-system storage-provisioner 1/1 Running 1 29m</code> </pre> <br><h3 id="ustanovka-openfaas">  Instal OpenFaaS </h3><br><p>  Pengembang merekomendasikan membuat 2 namespace untuk pekerjaan: </p><br><pre> <code class="plaintext hljs">$ kubectl apply -f https://raw.githubusercontent.com/openfaas/faas-netes/master/namespaces.yml namespace/openfaas created namespace/openfaas-fn created</code> </pre> <br><p>  Tambahkan repositori untuk helm: </p><br><pre> <code class="plaintext hljs">$ helm repo add openfaas https://openfaas.github.io/faas-netes/ "openfaas" has been added to your repositories</code> </pre> <br><p>  Bagan memiliki kemampuan untuk mengatur kata sandi sebelum instalasi, menggunakannya dan menyimpan data akses dalam bentuk rahasia k8s: </p><br><pre> <code class="plaintext hljs">$ PASSWORD=verysecurerandompasswordstring $ kubectl -n openfaas create secret generic basic-auth --from-literal=basic-auth-user=admin --from-literal=basic-auth-password="$PASSWORD" secret/basic-auth created</code> </pre> <br><p>  Menyebarkan: </p><br><pre> <code class="plaintext hljs">$ helm repo update Hang tight while we grab the latest from your chart repositories... ...Successfully got an update from the "openfaas" chart repository Update Complete. Happy Helming! $ helm upgrade openfaas --install openfaas/openfaas --namespace openfaas --set functionNamespace=openfaas-fn --set generateBasicAuth=false Release "openfaas" does not exist. Installing it now. NAME: openfaas LAST DEPLOYED: Fri Dec 25 10:28:22 2019 NAMESPACE: openfaas STATUS: deployed REVISION: 1 TEST SUITE: None NOTES: To verify that openfaas has started, run: kubectl -n openfaas get deployments -l "release=openfaas, app=openfaas"</code> </pre> <br><p>  Setelah beberapa waktu, jalankan perintah yang diusulkan: </p><br><pre> <code class="plaintext hljs">$ kubectl -n openfaas get deployments -l "release=openfaas, app=openfaas" NAME READY UP-TO-DATE AVAILABLE AGE alertmanager 1/1 1 1 114s basic-auth-plugin 1/1 1 1 114s faas-idler 1/1 1 1 114s gateway 1/1 1 1 114s nats 1/1 1 1 114s prometheus 1/1 1 1 114s queue-worker 1/1 1 1 114s</code> </pre> <br><p>  Periksa kinerja: </p><br><pre> <code class="plaintext hljs">$ kubectl rollout status -n openfaas deploy/gateway deployment "gateway" successfully rolled out $ kubectl port-forward -n openfaas svc/gateway 8080:8080 &amp; [1] 6985 Forwarding from 127.0.0.1:8080 -&gt; 8080 $ echo -n $PASSWORD | faas-cli login --username admin --password-stdin Calling the OpenFaaS server to validate the credentials... Handling connection for 8080 WARNING! Communication is not secure, please consider using HTTPS. Letsencrypt.org offers free SSL/TLS certificates. credentials saved for admin http://127.0.0.1:8080 $ faas-cli list Function Invocations Replicas</code> </pre> <br><h3 id="ustanovka-mongodb">  Instal Mongodb </h3><br><p>  Kami menempatkan semuanya menggunakan helm: </p><br><pre> <code class="plaintext hljs">$ helm repo add stable https://kubernetes-charts.storage.googleapis.com/ "stable" has been added to your repositories $ helm install stable/mongodb --generate-name NAME: mongodb-1577466908 LAST DEPLOYED: Fri Dec 25 11:15:11 2019 NAMESPACE: default STATUS: deployed REVISION: 1 TEST SUITE: None NOTES: ** Please be patient while the chart is being deployed ** MongoDB can be accessed via port 27017 on the following DNS name from within your cluster: mongodb-1577466908.default.svc.cluster.local To get the root password run: export MONGODB_ROOT_PASSWORD=$(kubectl get secret --namespace default mongodb-1577466908 -o jsonpath="{.data.mongodb-root-password}" | base64 --decode) To connect to your database run the following command: kubectl run --namespace default mongodb-1577466908-client --rm --tty -i --restart='Never' --image bitnami/mongodb --command -- mongo admin --host mongodb-1577466908 --authenticationDatabase admin -u root -p $MONGODB_ROOT_PASSWORD To connect to your database from outside the cluster execute the following commands: kubectl port-forward --namespace default svc/mongodb-1577466908 27017:27017 &amp; mongo --host 127.0.0.1 --authenticationDatabase admin -p $MONGODB_ROOT_PASSWORD</code> </pre> <br><p>  Kami memeriksa: </p><br><pre> <code class="plaintext hljs">kubectl run --namespace default mongodb-1577466908-client --rm --tty -i --restart='Never' --image bitnami/mongodb --command -- mongo admin --host mongodb-1577466908 --authenticationDatabase admin -u root -p $(kubectl get secret --namespace default mongodb-1577466908 -o jsonpath="{.data.mongodb-root-password}" | base64 --decode) If you don't see a command prompt, try pressing enter. &gt; db.version(); 4.0.14</code> </pre> <br><p>  Tekan ctrl + D untuk keluar dari wadah. </p><br><h3 id="nastroyka-emacs">  Pengaturan Emacs </h3><br><p>  Pada prinsipnya, semuanya sudah dikonfigurasi untuk <a href="http://reangdblog.blogspot.com/2016/06/emacs-ide-go.html">artikel ini</a> , jadi saya tidak akan melukis secara detail. </p><br><h2 id="razbienie-igry-na-funkcii">  Memecah game menjadi beberapa fungsi </h2><br><p>  Interaksi dengan fungsi dilakukan melalui protokol http, otentikasi end-to-end antara fungsi yang berbeda disediakan oleh JWT.  Untuk menyimpan token, serta keadaan permainan, data pemain, urutan gerakan semua game dan informasi lainnya, mongodb digunakan.  Mari kita lihat lebih dekat fitur-fitur yang paling menarik. </p><br><h3 id="registraciya">  Pendaftaran </h3><br><p>  Pada input fungsi ini adalah JSON dengan alias permainan dan kata sandi.  Ketika fungsi ini dipanggil, ia memeriksa tidak adanya alias ini di basis data; pada verifikasi yang berhasil, ia memasukkan hash alias dan kata sandi ke dalam basis data.  Registrasi diperlukan untuk partisipasi aktif dalam permainan. </p><br><h3 id="vhod">  Login </h3><br><p>  Pada input fungsi adalah JSON dengan alias permainan dan kata sandi, jika ada alias dalam database dan kata sandi berhasil diverifikasi dengan kata sandi yang disimpan sebelumnya dalam database, JWT dikembalikan, yang harus diteruskan ke fungsi lain saat dipanggil.  Berbagai catatan layanan juga dimasukkan ke dalam basis data, misalnya, waktu login terakhir, dll. </p><br><h3 id="prosmotr-spiska-igr">  Lihat Daftar Game </h3><br><p>  Setiap pengguna yang tidak sah dapat meminta daftar semua game kecuali yang aktif.  Pengguna yang berwenang juga melihat daftar game yang aktif.  Hasil dari fungsinya adalah JSON yang berisi daftar game (pengidentifikasi game, nama yang bisa dibaca manusia, dll.). </p><br><h3 id="sozdanie-igry">  Pembuatan game </h3><br><p>  Fungsi ini hanya berfungsi dengan pengguna yang diizinkan, jumlah maksimum pemain, serta parameter gim (misalnya, karakter mana yang harus diaktifkan dalam gim ini, jumlah pemain maksimum, dll.) Yang diterima pada input.  Parameter permainan yang terpisah adalah adanya kata sandi untuk bergabung, yang memungkinkan Anda membuat game non-publik.  Secara default, game publik dibuat.  Hasil dari eksekusi fungsi adalah JSON, di mana ada bidang keberhasilan pembuatan, pengidentifikasi unik untuk permainan, serta parameter lainnya. </p><br><h3 id="prisoedinenie-k-igre">  Bergabung dengan game </h3><br><p>  Fungsi ini hanya bekerja dengan pengguna yang sah, di pintu masuk - pengidentifikasi permainan dan kata sandinya, jika itu adalah game non-publik, pada output - JSON dengan parameter permainan.  Pengguna yang sah yang telah bergabung dengan game, serta pencipta game, kemudian disebut sebagai peserta dalam game. </p><br><h3 id="prosmotr-sobytiy-igry">  Lihat acara permainan </h3><br><p>  Setiap pengguna yang tidak sah dapat meminta daftar acara dari game yang tidak aktif, dan pengguna yang berwenang bisa mendapatkan daftar acara dan game yang aktif.  Parameter tambahan untuk fungsi dapat berupa nomor acara yang sudah dimiliki pengguna.  Dalam hal ini, hanya peristiwa yang terjadi kemudian yang akan dikembalikan dalam daftar.  Dengan meluncurkan fungsi ini secara berkala, pengguna yang berwenang mengawasi apa yang terjadi dalam game.  Fungsi ini juga mengembalikan permintaan untuk tindakan yang dapat ditanggapi pengguna dengan menggunakan fungsi mengirim acara permainan. </p><br><h3 id="otpravka-sobytiya-igry">  Pengiriman acara game </h3><br><p>  Fungsi ini hanya berfungsi untuk peserta game: kemampuan untuk meluncurkan game, bergerak, memberikan suara, menulis pesan teks yang muncul dalam daftar acara permainan, dll. Diterapkan. <br>  Pengguna yang berwenang yang membuat game memulai distribusi peran ke semua peserta dalam game, termasuk mereka sendiri, mereka harus mengkonfirmasi peran mereka menggunakan fungsi yang sama.  Setelah semua peran dikonfirmasi, game secara otomatis beralih ke mode malam. </p><br><h3 id="statistika-igry">  Statistik game </h3><br><p>  Fungsi ini hanya berfungsi untuk peserta dalam permainan, menunjukkan keadaan permainan, daftar dan jumlah pemain (alias), peran dan status mereka (bergerak atau tidak), serta informasi lainnya.  Sedangkan untuk fungsi sebelumnya, semuanya bekerja hanya untuk peserta game. </p><br><h3 id="periodicheski-zapuskaemye-funkcii">  Menjalankan Fungsi secara berkala </h3><br><p>  Jika gim belum diluncurkan untuk beberapa waktu yang ditentukan selama pembuatan gim, gim ini akan dihapus secara otomatis dari daftar gim yang aktif menggunakan fungsi sapuan. </p><br><p>  Tugas periodik lainnya adalah pemindahan paksa dari mode permainan dari malam ke hari dan kembali untuk permainan di mana ini tidak terjadi selama belokan (misalnya, seorang pemain yang perlu merespons acara pertandingan tidak mengirim keputusannya dengan alasan apa pun). </p><br><h2 id="anons">  Pengumuman </h2><br><ul><li>  <a href="https://habr.com/ru/company/southbridge/blog/482010/">Pendahuluan</a> </li><li>  Mengatur lingkungan pengembangan, membagi tugas menjadi beberapa fungsi </li><li>  Bekerja di backend </li><li>  Pekerjaan frontend </li><li>  Pengaturan CI \ CD, organisasi penguji </li><li>  Memulai sesi uji coba permainan </li><li>  Ringkasan </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id482752/">https://habr.com/ru/post/id482752/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id482736/index.html">Menggunakan TSDuck untuk Memantau Streaming IP (TS)</a></li>
<li><a href="../id482740/index.html">Wawancara untuk posisi seorang penyair</a></li>
<li><a href="../id482742/index.html">Memasuki Pasar Barat: Bagaimana Berinteraksi dengan Pelanggan</a></li>
<li><a href="../id482744/index.html">Menemukan Peluru Perak: Amunisi Tidak Biasa</a></li>
<li><a href="../id482748/index.html">Membuat bisnis pemesanan taksi di Dubai: Bagaimana cara meluncurkan aplikasi taksi yang berpusat pada pelanggan seperti Careem & Hala?</a></li>
<li><a href="../id482756/index.html">Apakah ini masa depan hijau yang berkabut?</a></li>
<li><a href="../id482762/index.html">42.000.000.000 kunjungan. PornHub diringkas hingga 2019</a></li>
<li><a href="../id482772/index.html">Aplikasi Web Progresif pada tahun 2020</a></li>
<li><a href="../id482774/index.html">Seoshniki hitam dan metode promosi terbaik. Dewasa, farmasi, esai, kencan. Shestakov | Orang PRO # 75</a></li>
<li><a href="../id482778/index.html">Ventilasi dengan pemulihan di apartemen. Tanpa saluran dan SMS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>