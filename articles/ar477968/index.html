<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โ๏ธ ๐ ุงููููุน ูู ุญูุฑุฉ ุฃุฑูุจ: ูุตุฉ ุนู ุฎุทุฃ ูุงุญุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงููุฑููุด - ุงูุฌุฒุก ุงูุฃูู ๐ด๐ฟ ๐ง ๐ต</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ghostinushanka ุ ุจุนุฏ ุฃู ุณุญู ุงูุฃุฒุฑุงุฑ ูู ุงูุฏูุงุฆู ุงูุนุดุฑูู ุงููุงุถูุฉ ุ ููุง ูู ูุงูุช ุญูุงุชู ุชุนุชูุฏ ุนููู ุ ููุฌุฃ ุฅูู ุจุชุนุจูุฑ ูุตู ูุชูุญุด ูู ุนูููู ูุงุจุชุณู ุงุจุชุณุงูุฉ ุนุฑูุถ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงููููุน ูู ุญูุฑุฉ ุฃุฑูุจ: ูุตุฉ ุนู ุฎุทุฃ ูุงุญุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงููุฑููุด - ุงูุฌุฒุก ุงูุฃูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477968/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <a href="https://habr.com/en/users/ghostinushanka/" class="user_link">ghostinushanka</a> ุ ุจุนุฏ ุฃู ุณุญู ุงูุฃุฒุฑุงุฑ ูู ุงูุฏูุงุฆู ุงูุนุดุฑูู ุงููุงุถูุฉ ุ ููุง ูู ูุงูุช ุญูุงุชู ุชุนุชูุฏ ุนููู ุ ููุฌุฃ ุฅูู ุจุชุนุจูุฑ ูุตู ูุชูุญุด ูู ุนูููู ูุงุจุชุณู ุงุจุชุณุงูุฉ ุนุฑูุถุฉ - "ูุง ุตุฏูู ุ ุฃุนุชูุฏ ุฃููู ุฃููู". </p><br><p style=";text-align:right;direction:rtl">  "ุงูุธุฑ ููุง" - ูููู ุ ูุดูุฑูุง ุฅูู ุฃุญุฏ ุงูุฑููุฒ ุงูุชู ุชุธูุฑ ุนูู ุงูุดุงุดุฉ - "ุฃุฑุงูู ุนูู ูุจุนุชู ุงูุญูุฑุงุก ุฃูู ุฅุฐุง ุฃุถููุง ููุง ูุง ุฃุฑุณูุชู ููุชู" - ูุดูุฑ ุฅูู ุฌุฒุก ุขุฎุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ - "ูู ูุนุฏ ุงูุฎุทุฃ" ุณูุชู ุนุฑุถูุง. " </p><br><p style=";text-align:right;direction:rtl"> ููููุง ูู ุงูุญูุฑุฉ ูุงูุชุนุจ ุ ุฃููู ุจุชุบููุฑ ุชุนุจูุฑ sed ุงูุฐู ููุง ูุนูู ุนููู ููุฐ ุจุนุถ ุงูููุช ุ ููู ุจุญูุธ ุงูููู ูุชุดุบูู <code>systemctl varnish reload</code> .  ุงุฎุชูุช ุฑุณุงูุฉ ุงูุฎุทุฃ ... </p><br><p style=";text-align:right;direction:rtl">  "ุงูุฑุณุงุฆู ุงูุชู ุชุจุงุฏูุชูุง ูุน ุงููุฑุดุญ" ุ ุชุงุจุน ุฒูููู ุ ุจูููุง ุชุชุญูู ุงุจุชุณุงูุชู ุฅูู ุงุจุชุณุงูุฉ ุญููููุฉ ูููุฆุฉ ุจุงูุจูุฌุฉ ุ "ููุฏ ุจุฒุบ ูุฌุฑูุง ูู ุฃู ูุฐู ูู ุงููุดููุฉ ููุณูุง ุชูุงููุง!" </p><a name="habracut"></a><br><h3 id="s-chego-ono-vsyo-nachinalos" style=";text-align:right;direction:rtl">  ููู ุจุฏุฃ ูู ุดูุก </h3><br><p style=";text-align:right;direction:rtl">  <em>ุชูุชุฑุถ ูุฐู ุงูููุงูุฉ ููู ููููุฉ ุนูู bash ู awk ู sed ู systemd.</em>  <em>ูุนุฑูุฉ ุจุงููุฑููุด ูุฑุญุจ ุจูุง ูููู ุบูุฑ ูุทููุจ.</em> <em><br></em>  <em>ุชู ุชุบููุฑ ููุชุทูุงุช ุงูุทูุงุจุน ุงูุฒูููุฉ.</em> <em><br></em>  <em>ููุชูุจ ูุน <a href="https://habr.com/en/users/ghostinushanka/" class="user_link">ghostinushanka</a> .</em> <em><br></em>  <em>ูุฐุง ุงููุต ูู ุชุฑุฌูุฉ ูููุต ุงูุฃุตูู ุงูููุดูุฑ ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ูุจู ุฃุณุจูุนูู ุ</em>  <em>ุชุฑุฌูุฉ <a href="https://habr.com/en/users/boikoden/" class="user_link">boikoden</a> .</em> </p><br><p style=";text-align:right;direction:rtl">  ุชุดุฑู ุงูุดูุณ ูู ุฎูุงู ุงูููุงูุฐ ุงูุจุงููุฑุงููุฉ ูู ุตุจุงุญ ุฎุฑูู ุฏุงูุฆ ุขุฎุฑ ุ ุชูุน ูุฃุณ ุงููุดุฑูุจ ุงูุทุงุฒุฌ ุงููุญุชูู ุนูู ุงููุงูููู ุจุนูุฏูุง ุนู ููุญุฉ ุงูููุงุชูุญ ุ ูุงูุณูููููุฉ ุงูููุถูุฉ ููุฃุตูุงุช ุงูุฃุตูุงุช ูู ุณูุงุนุงุช ุงูุฑุฃุณ ุ ูุชุชุฏุงุฎู ูุน ุญููู ููุญุงุช ุงูููุงุชูุญ ุงููููุงููููุฉ ุ ูููุนุจ ุงูุนููุงู ุงููุดุคูู "Investigate varnishre" ุจูุฏูุก ุงูุฅุฏุฎุงู ุงูุฃูู ูู ูุงุฆูุฉ ุงูุชุฐุงูุฑ ุงููุชุฑุงููุฉ ุนูู ููุญุฉ kanban. sh: echo: ุฎุทุฃ I / O ูู ุงูุชุฏุฑูุฌ "(ุชุญูู ูู" varnishreload sh: echo: I / O error "ูู ุงููุฑุญูุฉ).  ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุงููุฑููุด ุ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ููุง ูููู ุฃู ูููู ููุงู ููุงู ุ ุญุชู ูู ูู ุชุชุฑุฌู ุฅูู ุฃู ูุดุงูู ุ ููุง ูู ูุฐู ุงูุญุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ููุณูุง ุนูู ุฏุฑุงูุฉ <a href="https://github.com/varnishcache/pkg-varnish-cache/blob/weekly/systemd/varnishreload">ุจุงููุฑููุด</a> ุ ูุฐุง ูู ุจุฑูุงูุฌ ูุตู ุจุณูุท ูุณุชุฎุฏู ูุฅุนุงุฏุฉ ุชุญููู ุชูููู <a href="https://varnish-cache.org/">ุงููุฑููุด</a> - ูุณูู ุฃูุถูุง VCL. </p><br><p style=";text-align:right;direction:rtl">  ููุง ููุญู ุงุณู ุงูุชุฐูุฑุฉ ุ ุญุฏุซ ุฎุทุฃ ุนูู ุฃุญุฏ ุงูุฎูุงุฏู ุนูู ุงููุณุฑุญ ุ ูุจูุง ุฃููู ููุช ูุชุฃูุฏูุง ูู ุฃู ุชูุฌูู ุงููุฑููุด ุนูู ุงููุณุฑุญ ูุนูู ุจุดูู ุตุญูุญ ุ ููุฏ ุงูุชุฑุถุช ุฃู ูุฐุง ุณูููู ุฎุทุฃู ุจุณูุทูุง.  ูุฐูู ุ ูุฌุฑุฏ ุฑุณุงูุฉ ูุตูุช ุฅูู ุฏูู ุฅุฎุฑุงุฌ ูุบูู ุจุงููุนู.  ุขุฎุฐ ุงูุจุทุงูุฉ ุฅูู ููุณู ุ ูุฃูุง ูุงุซู ุชูุงููุง ูู ุฃููู ุณุฃุถุน ุนูุงูุฉ ุนูููุง ุฌุงูุฒุฉ ูู ุฃูู ูู 30 ุฏูููุฉ ุ ูุฃุฑุชุจ ุนูู ุงููุชู ูุชูุธูู ุงูููุญุฉ ูู ุงูููุงูุฉ ุงูุชุงููุฉ ูุงูุนูุฏุฉ ุฅูู ุฃููุฑ ุฃูุซุฑ ุฃูููุฉ. </p><br><h3 id="vrezayas-v-stenu-na-skorosti-200-kmch" style=";text-align:right;direction:rtl">  ุชุญุทูู ุฌุฏุงุฑ ุจุณุฑุนุฉ 200 ูู / ุณุงุนุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฃู ูุชุญุช ููู <code>varnishreload</code> ุ ุนูู ุฃุญุฏ ุงูุฎูุงุฏู ุงูุชู ุชุดุบูู Debian Stretch ุ ุฑุฃูุช <code>varnishreload</code> ุจุทูู ุฃูู ูู 200 ุณุทุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ุ ูู ุฃูุงุญุธ ุฃู ุดูุก ูููู ุฃู ูุคุฏู ุฅูู ุญุฏูุซ ูุดุงูู ุนูุฏ ุชุดุบููู ุนุฏุฉ ูุฑุงุช ูุจุงุดุฑุฉู ูู ุงูุฌูุงุฒ ุงูุทุฑูู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุงูุฉ ุ ูุฐู ูุฑุญูุฉ ุ ุญุชู ูู ุงููุงุฑุช ุ ููู ูุดุชูู ุฃุญุฏ ุ ุญุณููุง ... ููุณ ูุซูุฑูุง.  ุฃููู ุจุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ููุนุฑูุฉ ูุง ุณูุชู ูุชุงุจุชู ุฅูู ุงูุฌูุงุฒ ุ ููู ูุง ูููููู ุฑุคูุฉ ุฃู ุฃุฎุทุงุก. </p><br><p style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุฒูุฌุงู ุขุฎุฑุงู ูู ุงูุชุฃูุฏ ูู ุฃููู ูุง ุฃุณุชุทูุน ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุฎุทุฃ ุฏูู ุจุฐู ุฃู ุฌูุฏ ุฅุถุงูู ุ ูุจุฏุฃุช ูู ูุนุฑูุฉ ููููุฉ ุชุบููุฑ ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู ูุฌุนูู ูุง ูุฒุงู ูุฎุทุฆ. </p><br><p style=";text-align:right;direction:rtl">  ูู ูููู ููุจุฑูุงูุฌ ุงููุตู ุชุฌุงูุฒ STDOUT (ุจุงุณุชุฎุฏุงู <code>&gt; &amp;-</code> )ุ  ุฃู STDERRุ  ูุง ุฃุญุฏ ูุนูู ูุชูุฌุฉ ูุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุถุญ ุฃู systemd ูุนุฏู ุจุทุฑููุฉ ูุง ุจูุฆุฉ ุจุฏุก ุงูุชุดุบูู ุ ููู ููู ูููุงุฐุงุ <br>  ุฃููู ุจูุทุน ูุชุนุฏูู <code>varnishreload</code> ุ ูุถูููุง <code>set -x</code> ูุจุงุดุฑุฉู ุชุญุช shebang ุ ุนูู ุฃูู ุฃู <code>varnishreload</code> ุฅุฎุฑุงุฌ ุชุตุญูุญ ุงูุจุฑูุงูุฌ ุงููุตู ููููุงู. </p><br><p style=";text-align:right;direction:rtl">  ุชู ุฅุตูุงุญ ุงูููู ุ ูุฐุง ุฃุนูุฏ ุชุดุบูู ุงููุฑููุด ูุฃุฑู ุฃู ุงูุชุบููุฑ ูุฏ ูุณุฑ ูู ุดูุก ุชูุงููุง ... ุงูุนุงุฏู ุนุจุงุฑุฉ ุนู ููุถู ูุงููุฉ ุ ุญูุซ ููุฌุฏ ุงููุซูุฑ ูู ุงูุดูุฑุงุช ุงูุชู ุชุดุจู C.  ุญุชู ุงูุชูุฑูุฑ ูู ุงููุญุทุฉ ูุง ูููู ููุนุซูุฑ ุนูู ุงูููุงู ุงูุฐู ุชุจุฏุฃ ููู.  ุฃูุง ูุฑุชุจู ุชูุงูุง.  ูู ูููู ุฃู ูุคุซุฑ ูุถุน ุงูุชุตุญูุญ ุนูู ุนูู ุงูุจุฑุงูุฌ ุงูุชู ูุชู ุชุดุบูููุง ูู ุจุฑูุงูุฌ ูุตูุ  ูุง ุ ูุฐุง ูุฑุงุก.  ุญุดุฑุฉ ูู ุงูุตุฏูุฉุ  ุชูุฏูุน ุนุฏุฉ ุณููุงุฑูููุงุช ูุญุชููุฉ ูู ุฑุฃุณู ูุซู ุงูุตุฑุงุตูุฑ ูู ุงุชุฌุงูุงุช ูุฎุชููุฉ.  ุฃูุฑุบ ููุจ ูู ูุดุฑูุจ ูุงูู ุงููุงูููู ุนูู ุงูููุฑ ุ ุฑุญูุฉ ุณุฑูุนุฉ ุฅูู ุงููุทุจุฎ ูุชุฌุฏูุฏ ุงููุฎุฒูู ู ... ุฏุนูุง ูุฐูุจ.  ุฃูุชุญ ุงูุจุฑูุงูุฌ ุงููุตู ูููุธุฑ ุฅูู shebang: <code>#!/bin/sh</code> . </p><br><p style=";text-align:right;direction:rtl">  <code>/bin/sh</code> ูู ุจุจุณุงุทุฉ bash symlink ุ ูุฐูู ูุชู ุชูุณูุฑ ุงูุจุฑูุงูุฌ ุงููุตู ูู ูุถุน ูุชูุงูู ูุน POSIX ุ ุฃููุณ ูุฐููุ  ูุงู ููุงู!  ุงููุดุฑุฉ ุงูุงูุชุฑุงุถูุฉ ูู ุฏุจูุงู ูู ุดุฑุทุฉ ุ ููุฐุง ูู ุจุงูุถุจุท ูุง <a href="https://wiki.debian.org/Shell">ูุดูุฑ</a> ุฅููู <code>/bin/sh</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ls -l /bin/sh lrwxrwxrwx 1 root root 4 Jan 24 2017 /bin/sh -&gt; dash</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุงููุญุงููุฉ ุ ููุฏ ุบูุฑุช shebang ุฅูู <code>#!/bin/bash</code> ุ ูุญุฐู <code>set -x</code> ูุญุงูู ูุฑุฉ ุฃุฎุฑู.  ุฃุฎูุฑูุง ุ ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุชูููุฏ ูููุฑููุด ุ ุธูุฑ ุฎุทุฃ ููุจูู ูู ุงูุฅุฎุฑุงุฌ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Jan 01 12:00:00 hostname varnishreload[32604]: /usr/sbin/varnishreload: line 124: <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>: write error: Broken pipe Jan 01 12:00:00 hostname varnishreload[32604]: VCL <span class="hljs-string"><span class="hljs-string">'reload_20190101_120000_32604'</span></span> compiled</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฎุท 124 ุ ููุงู! </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">114 <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_vcl_file</span></span></span></span>() { 115 VCL_SHOW=$(varnishadm vcl.show -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_NAME</span></span></span><span class="hljs-string">"</span></span> 2&gt;&amp;1) || : 116 VCL_FILE=$( 117 <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_SHOW</span></span></span><span class="hljs-string">"</span></span> | 118 awk <span class="hljs-string"><span class="hljs-string">'$1 == "//" &amp;&amp; $2 == "VCL.SHOW" {print; exit}'</span></span> | { 119 <span class="hljs-comment"><span class="hljs-comment"># all this ceremony to handle blanks in FILE 120 read -r DELIM VCL_SHOW INDEX SIZE FILE 121 echo "$FILE" 122 } 123 ) || : 124 125 if [ -z "$VCL_FILE" ] 126 then 127 echo "$VCL_SHOW" &gt;&amp;2 128 fail "failed to get the VCL file name" 129 fi 130 131 echo "$VCL_FILE" 132 }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ููุง ุงุชุถุญ ุ ุงูุณุทุฑ 124 ูุงุฑุบ ุชูุงููุง ูููุณ ูู ุฃู ูุงุฆุฏุฉ.  ูุง ูููููู ุฅูุง ุฃู ุฃูุชุฑุถ ุฃู ุงูุฎุทุฃ ูุฏ ูุดุฃ ูุฌุฒุก ูู ุฎุท ูุชุนุฏุฏ ุงูุฎุทูุท ูุจุฏุฃ ูู ุงูุณุทุฑ 116. <br>  ูุง ุงูููุชูุจ ุฃุฎูุฑูุง ุฅูู ุงููุชุบูุฑ <code>VCL_FILE</code> ููุชูุฌุฉ ูุชูููุฐ ุงููุณุฎุฉ ุงููุฑุนูุฉ ุงููุฐููุฑุฉ ุฃุนูุงูุ </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ุ ูุฑุณู ูุญุชููุงุช ุงููุชุบูุฑ <code>VLC_SHOW</code> ุชู ุฅูุดุงุคู ุนูู ุงูุณุทุฑ 115 ุฅูู ุงูุฃูุฑ ุงูุชุงูู ูู ุฎูุงู ุชูุฌูู <code>VLC_SHOW</code> .  ุซู ูุงุฐุง ูุญุฏุซ ุจุนุฏ ุฐููุ </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูุณุชุฎุฏู <code>varnishadm</code> ุ ููู ุฌุฒุก ูู ุญุฒูุฉ ุชุซุจูุช ุงููุฑููุด ุ ูุชูููู ุงููุฑููุด ุฏูู ุฅุนุงุฏุฉ ุงูุชุดุบูู. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฎุฏุงู <code>vcl.show -v</code> ูุฅุฎุฑุงุฌ ุชูููู VCL ุจุฃูููู ุงููุญุฏุฏ ูู <code>${VCL_NAME}</code> ุฅูู STDOUT. </p><br><p style=";text-align:right;direction:rtl">  ูุนุฑุถ ุชูููู VCL ุงููุดุท ุงูุญุงูู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุนุฏูุฏ ูู ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ ูู ุชููููุงุช ุชูุฌูู ุงููุฑููุด ุงูุชู ูุง ุชุฒุงู ูู ุงูุฐุงูุฑุฉ ุ ููููู ุงุณุชุฎุฏุงู <code>varnishadm vcl.list</code> ุ ูุงูุฐู ุณูููู <code>varnishadm vcl.list</code> ุฃุฏูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">discarded cold/busy 1 reload_20190101_120000_11903 discarded cold/busy 2 reload_20190101_120000_12068 discarded cold/busy 16 reload_20190101_120000_12259 discarded cold/busy 16 reload_20190101_120000_12299 discarded cold/busy 28 reload_20190101_120000_12357 active auto/warm 32 reload_20190101_120000_12397 available auto/warm 0 reload_20190101_120000_12587</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุชุนููู ูููุฉ ุงููุชุบูุฑ <code>${VCL_NAME}</code> ูู ุฌุฒุก ุขุฎุฑ ูู ุงูุจุฑูุงูุฌ ุงููุตู <code>varnishreload</code> ุฅูู ุงุณู VCL ุงููุดุท ุญุงูููุง ุ ุฅู ูุฌุฏ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู "reload_20190101_120000_12397". </p><br><p style=";text-align:right;direction:rtl">  ุฑุงุฆุน ุ ุงููุชุบูุฑ <code>${VCL_SHOW}</code> ูุญุชูู ุนูู ุงูุชูููู ุงููุงูู <code>${VCL_SHOW}</code> ุ ููู ูุงุถุญ ุญุชู ุงูุขู.  ุงูุขู ุ ุฃุฏุฑูุช ุฃุฎูุฑูุง ุณุจุจ ุชููู ุฅุฎุฑุงุฌ ุดุฑุทุฉ dash ูุน <code>set -x</code> ุฅูู ูุฐุง ุงูุญุฏ - ููุฏ ุชุถููุช ูุญุชููุงุช ุงูุชูููู ุงููุงุชุฌ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููู ุฃู ูููู ุฃู ุชูููู VCL ุงููุงูู ูููู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุชุฌููุนู ูุนูุง ูู ูููุงุช ูุชุนุฏุฏุฉ.  ุชูุณุชุฎุฏู ุชุนูููุงุช ุงูููุท C ูุชุญุฏูุฏ ุงูููุงู ุงูุฐู ุชู ููู ุชุถููู ุจุนุถ ูููุงุช ุงูุชูููู ูู ูููุงุช ุฃุฎุฑู ุ ููุฐุง ูู ุจุงูุถุจุท ูุง ูุฏูุฑ ุญููู ูุงูู ุณุทุฑ ููุชุทู ุงูุดูุฑุฉ ุฃุฏูุงู. <br>  ูุญุชูู ุจูุงุก ุฌููุฉ ุงูุชุนูููุงุช ุงูุชู ุชุตู ุงููููุงุช ุงููุถููุฉ ุนูู ุงูุชูุณูู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// VCL.SHOW &lt;NUM&gt; &lt;NUM&gt; &lt;FILENAME&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฃุฑูุงู ูู ูุฐุง ุงูุณูุงู ููุณุช ูููุฉ ุ ูุญู ููุชููู ุจุงุณู ุงูููู. </p><br><p style=";text-align:right;direction:rtl">  ููุง ุงูุฐู ูุฌุฑู ูู ูุณุชููุน ุงููุฑู ุงูุชู ุชุจุฏุฃ ุนูู ุงูุฎุท 116ุ <br>  ุฏุนููุง ูุนุฑูุฉ ุฐูู. <br>  ูุชููู ุงููุฑูู ูู ุฃุฑุจุนุฉ ุฃุฌุฒุงุก: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>echo</code> ุจุณูุท ูุนุฑุถ ูููุฉ ุงููุชุบูุฑ <code>${VCL_SHOW}</code> <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_SHOW</span></span></span><span class="hljs-string">"</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  <code>awk</code> ุ ุงูุฐู ูุจุญุซ ุนู ุณุทุฑ (ุณุฌู) ุ ุญูุซ ูููู ุงูุญูู ุงูุฃูู ุ ุจุนุฏ ูุณุฑ ุงููุต ุ ูู "//" ุ ูุงูุซุงูู "VCL.SHOW". <br>  ุณูู ููุชุจ Awk ุงูุณุทุฑ ุงูุฃูู ุงููุทุงุจู ููุฐู ุงูุฃููุงุท ุ ุซู ูุชููู ุนู ุงููุนุงูุฌุฉ ููุฑูุง. <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">awk <span class="hljs-string"><span class="hljs-string">'$1 == "//" &amp;&amp; $2 == "VCL.SHOW" {print; exit}'</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  ูุชูุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชุฎุฒู ูู ุฎูุณ ููู ุญููู ูุชุบูุฑุฉ ููุตููุฉ ุจูุณุงูุงุช.  ูุญุตู ุงููุชุบูุฑ FILE ุงูุฎุงูุณ ุนูู ุจููุฉ ุงูุณูุณูุฉ.  ุฃุฎูุฑูุง ุ ููุชุจ ุงูุตุฏู ุงูุฃุฎูุฑ ูุญุชููุงุช ุงููุชุบูุฑ <code>${FILE}</code> . <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">{ <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> -r DELIM VCL_SHOW INDEX SIZE FILE; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$FILE</span></span></span><span class="hljs-string">"</span></span> }</code> </pre> </li><li style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุฌููุน ุงูุฎุทูุงุช ูู 1 ุฅูู 3 ูุฑููุฉ ูู ุบูุงู ูุฑุนู ุ ุณูุชู ูุชุงุจุฉ ุฅุฎุฑุงุฌ ุงููููุฉ <code>$FILE</code> ุฅูู ุงููุชุบูุฑ <code>VCL_FILE</code> . </li></ol><br><p style=";text-align:right;direction:rtl">  ุนูู ุงููุญู ุงูุชุงูู ูู ุงูุชุนููู ุนูู ุงูุณุทุฑ 119 ุ ูุฎุฏู ูุฐุง ุบุฑุถูุง ูุงุญุฏูุง: ุงูุชุนุงูู ุจุดูู ููุซูู ูุน ุงูุญุงูุงุช ุงูุชู ูุดูุฑ ูููุง VCL ุฅูู ุงููููุงุช ุงูุชู ุชุญุชูู ุนูู ุฃุญุฑู ูุณุงูุงุช ูู ุงูุงุณู. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุนููุช ุจููุทู ุงููุนุงูุฌุฉ ุงูุฃุตูู ูู <code>${VCL_FILE}</code> ูุญุงููุช ุชุบููุฑ ุชุณูุณู ุงูุฃูุงูุฑ ุ ููู ูุฐุง ูู ูุคุฏ ุฅูู ุฃู ุดูุก.  ูู ุดูุก ูุนูู ุจุดูู ุฌูุฏ ุจุงููุณุจุฉ ูู ุ ููู ุญุงูุฉ ุจุฏุก ุงูุฎุฏูุฉ ุ ุฃุนุทู ุฎุทุฃ. </p><br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุฃู ุงูุฎุทุฃ ุจุจุณุงุทุฉ ููุณ ูุงุจูุงู ููุชูุฑุงุฑ ุนูุฏ ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ูุฏูููุง ุ ูู ุญูู ุฃู 30 ุฏูููุฉ ูุชููุนุฉ ูุฏ ุงูุชูุช ุจุงููุนู ุณุช ูุฑุงุช ุ ููู ุงูููุญู ุ ุธูุฑุช ูููุฉ ุฐุงุช ุฃููููุฉ ุฃุนูู ุ ููุง ุฏูุน ุจููุฉ ุงูุญุงูุงุช ุฌุงูุจุงู.  ูุงูุช ุจููุฉ ุงูุฃุณุจูุน ูููุฆุฉ ุจูุฌููุนุฉ ูุชููุนุฉ ูู ุงูููุงู ููุงูุช ูุฎููุฉ ููููุงู ููุท ูุน ุชูุฑูุฑ ุนู sed ูููุงุจูุฉ ูุน ุงููุฑุดุญ.  ุงููุดููุฉ ูุน <code>varnishreload</code> ุถุงุนุช ุจุดูู ูุง ุฑุฌุนุฉ ููู ูู ุฑูุงู ุงูุฒูู. </p><br><h3 id="vashe-tak-nazyvaemoe-sed-fu-na-samom-dele-dryan" style=";text-align:right;direction:rtl">  ูุฏูู ูุง ูุณูู sed ูู ... ุญูุง ... ุงูููุงูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุชุจูู ุฃู ุงูุฃุณุจูุน ุงูุชุงูู ูุงู ููููุง ูุฌุงูููุง ุ ูุฐุง ูุฑุฑุช ูุฑุฉ ุฃุฎุฑู ุชูุงูู ูุฐู ุงูุชุฐูุฑุฉ.  ููุช ุขูู ุฃูู ูู ุฐููู ุ ูุงูุช ููุงู ุนูููุฉ ุฎูููุฉ ูู ูู ูุฐุง ุงูููุช ุชุจุญุซ ุนู ุญู ููุฐู ุงููุดููุฉ ุ ููุฐู ุงููุฑุฉ ุฃููููุง ุจุงูุชุฃููุฏ. </p><br><p style=";text-align:right;direction:rtl">  ููุฐ ุขุฎุฑ ูุฑุฉ ูู ูุณุงุนุฏ ูููุง ุชุบููุฑ ุจุณูุท ูู ุงูุฑูุฒ ุ ูุฑุฑุช ููุท ุฅุนุงุฏุฉ ูุชุงุจุชู ุจุฏุกูุง ูู ุงูุณุทุฑ 116.  ูู ุฃู ุญุงู ุ ูุงู ุงูุฑูุฒ ุงูุญุงูู ุฑุฏูุก.  ูููุณ ููุงู ุญุงุฌุฉ ุนูู ุงูุฅุทูุงู ูุงุณุชุฎุฏุงู <code>read</code> . </p><br><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู ุงูุฎุทุฃ ูุฑุฉ ุฃุฎุฑู: <br>  <code>sh: echo: broken pipe</code> - ูู ูุฐุง ุงูุฃูุฑ ุ ูููู ุงูุตุฏู ูู ููุงููู ุ ููููู ุฃุธู ุฃู ุงูุฃูู ูู ุงูุฌุงูู ุงูุฃูุซุฑ ุงุญุชูุงููุง (ุฌูุฏูุง ุ ุฃู ุนูู ุงูุฃูู ุดุฑูู).  Awk ูู ุฃูุถุง ุบูุฑ ููุซูู ุจูุง.  ููู ุญุงู ูุงู ุงูุฃูุฑ <code>awk | {read; echo}</code> <code>awk | {read; echo}</code>  <code>awk | {read; echo}</code> ุงูุจูุงุก ูุคุฏู ุฅูู ูู ูุฐู ุงููุดุงูู ุ ููุงุฐุง ูุง ุชุญู ูุญููุงุ  ูุง ูุณุชุฎุฏู ูุฐุง ุงูุฃูุฑ ุงููููู ูู ุณุทุฑ ูุงุญุฏ ุฌููุน ููุฒุงุช awk ุ ูุญุชู ูุฐู <code>read</code> ุงูุฅุถุงููุฉ ูู ุงูููุญู. </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ููุฌูุฏ ุชูุฑูุฑ ุนู <code>sed</code> ุงูุฃุณุจูุน ุงููุงุถู ุ ุฃุฑุฏุช ุชุฌุฑุจุฉ ููุงุฑุงุชู ุงูููุชุณุจุฉ ุญุฏูุซูุง ูุชุจุณูุท <code>echo | awk | { read; echo}</code> <code>echo | awk | { read; echo}</code>  <code>echo | awk | { read; echo}</code> ูู <code>echo | sed</code> ุฃูุซุฑ ูุงุจููุฉ ููููู <code>echo | sed</code>  <code>echo | sed</code> .  ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ููุณ ุจุงูุชุฃููุฏ ุฃูุถู ุทุฑููุฉ ูููุดู ุนู ุฎุทุฃ ูุง ุ ููุฏ ุงุนุชูุฏุช ุฃููู ุนูู ุงูุฃูู ุณุฃุญุงูู ุงุณุชุฎุฏุงู ูุนุจุฉ sed-ูู ุงูุฎุงุตุฉ ุจู ูุฑุจูุง ุฃุชุนูู ุดูุฆูุง ุฌุฏูุฏูุง ุญูู ุงููุดููุฉ.  ูู ูุฐู ุงูุนูููุฉ ุ ุทูุจุช ูู ุฒูููู ุ ูุคูู ุงูุชูุฑูุฑ ุนู sed ุ ูุณุงุนุฏุชู ูู ุงูุชูุตู ุฅูู ูุต ุฃูุซุฑ ูุงุนููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุฃุณูุทุช ูุญุชููุงุช <code>varnishadm vcl.show -v "$VCL_NAME"</code> ูู ุงูููู ุ ูุฐูู ูููููู ุงูุชุฑููุฒ ุนูู ูุชุงุจุฉ ูุต sed ุจุฏูู ุฃู ูุชุงุนุจ ูุฑุชุจุทุฉ ุจุฅุนุงุฏุฉ ุชุญููู ุงูุฎุฏูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงูุนุซูุฑ ุนูู ูุตู ููุฌุฒ ูููููุฉ ุชุนุงูู sed ูุน ุงููุฏุฎูุงุช ูู <a href="https://www.gnu.org/software/sed/manual/sed.html">ุฏููู GNU</a> .  ูู ูุตุงุฏุฑ sed ุ ูุชู ุชุญุฏูุฏ ุงูุญุฑู <code>\n</code> ุจุดูู ุตุฑูุญ ุจุงุนุชุจุงุฑู ูุงุตู ุฃุณุทุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุนุฏูุฏ ูู ุงูุชูุฑูุฑุงุช ูุชูุตูุงุช ุฒูููู ุ ูุชุจูุง ูุตูุง ูุตููุง ุฃุนุทู ููุณ ุงููุชูุฌุฉ ูุซู ุงูุณุทุฑ ุงููุตุฏุฑ ุจุฃูููู 116. </p><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ูููุฐุฌ ูููู ุงูุฅุฏุฎุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">&gt; cat vcl-example.vcl Text // VCL.SHOW 0 1578 file with 3 spaces.vcl More text // VCL.SHOW 0 1578 file.vcl Even more text // VCL.SHOW 0 1578 file with TWOspaces.vcl Final text</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏ ูุง ูููู ูุฐุง ูุงุถุญูุง ูู ุงููุตู ุฃุนูุงู ุ ููููุง ููุชููู ููุท ุจุงูุชุนููู ุงูุฃูู <code>// VCL.SHOW</code> ุ ููุฏ ูููู ููุงู ุงูุนุฏูุฏ ูููู ูู ุงูุฅุฏุฎุงู.  ูุฐุง ูู ุงูุณุจุจ ูู ุฃู awk ุงูุฃุตูู ููุชูู ุนููู ุจุนุฏ ุงููุจุงุฑุงุฉ ุงูุฃููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  ,      #   sed,  -    '\#'    '/',           #    โ// VCL.SHOWโ,       #  -n   ,  sed     ,       (.  ) # -E      &gt; cat vcl-processor-1.sed \#// VCL.SHOW#p &gt; sed -En -f vcl-processor-1.sed vcl-example.vcl // VCL.SHOW 0 1578 file with 3 spaces.vcl // VCL.SHOW 0 1578 file.vcl // VCL.SHOW 0 1578 file with TWOspaces.vcl #  ,     #   โsubstituteโ,     ,    a #      ,    &gt; cat vcl-processor-2.sed \#// VCL.SHOW# { s#.* [0-9]+ [0-9]+ (.*)$#\1# p } &gt; sed -En -f vcl-processor-2.sed vcl-example.vcl file with 3 spaces.vcl file.vcl file with TWOspaces.vcl #  ,      #      awk,         &gt; cat vcl-processor-3.sed \#// VCL.SHOW# { s#.* [0-9]+ [0-9]+ (.*)$#\1# p q } &gt; sed -En -f vcl-processor-3.sed vcl-example.vcl file with 3 spaces.vcl #  ,    ,      &gt; sed -En -e '\#// VCL.SHOW#{s#.* [0-9]+ [0-9]+ (.*)$#\1#p;q;}' vcl-example.vcl file with 3 spaces.vcl</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุฅู ูุญุชููุงุช ุงูุจุฑูุงูุฌ ุงููุตู varnishreload ุณุชุจุฏู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">VCL_FILE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo "$VCL_SHOW" | sed -En '\#// VCL.SHOW#{s#.*[0-9]+ [0-9]+ (.*)</span></span></span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$#</span></span></span><span class="hljs-string">\1#p;q;};')"</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุชูุฎูุต ุงูููุทู ุฃุนูุงู ุนูู ุงููุญู ุงูุชุงูู: <br>  ุฅุฐุง ูุงู ุงูุณุทุฑ ูุทุงุจู ุงูุชุนุจูุฑ ุงูุนุงุฏู <code>// VCL.SHOW</code> ุ <code>// VCL.SHOW</code> ุจุชูุงูู ุงููุต ุงูุฐู ูุชุถูู ููุง ุงูุฑูููู ูู ูุฐุง ุงูุณุทุฑ ุ ุซู ุงุญูุธ ูู ูุง ุชุจูู ุจุนุฏ ูุฐู ุงูุนูููุฉ.  ุฅุนุทุงุก ุงููููุฉ ุงููุญููุธุฉ ูุฅููุงุก ุงูุจุฑูุงูุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุจุณูุท ุ ุฃููุณ ูุฐููุ </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุณุฑุฑูุง ุจุงููุชุงุจุฉ ุงููุตูุฉ ูุญูููุฉ ุฃููุง ุชุญู ูุญู ุงูููุฏ ุงูุฃุตูู.  ุฃุนุทุช ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงูุฎุงุตุฉ ุจู ุงููุชุงุฆุฌ ุงููุฑุฌูุฉ ุ ูุฐูู ููุช ุจุชุบููุฑ "ุงููุฑููุด" ุนูู ุงูุฎุงุฏู ูุฑูุถุช <code>systemctl reload varnish</code> ูุฑุฉ ุฃุฎุฑู.  ุฎุทุฃ ุงููุฐุฑุฉ <code>echo: write error: Broken pipe</code> ุถุญู <code>echo: write error: Broken pipe</code> ูุฑุฉ ุฃุฎุฑู ูู ูุฌูููุง.  ูุงู ููุงู ูุคุดุฑ ุบูุฒ ูู ุงูุชุธุงุฑ ุฅุฏุฎุงู ุฃูุฑ ุฌุฏูุฏ ูู ุงููุฑุงุบ ุงููุธูู ูููุญุทุฉ ... </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar477968/">https://habr.com/ru/post/ar477968/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar477950/index.html">ุงููุงุนุฏุฉ ุงูุฃููู ูููุงูุญุฉ ุงูุงุญุชูุงู ูู ุนุฏู ุฅุฎุจุงุฑ ุฃู ุดุฎุต ุนู ุงูุงุญุชูุงู</a></li>
<li><a href="../ar477956/index.html">ุฌุงูุง ุณูุฑูุจุช ูู 3D: ููุฏูุฉ ู Three.js</a></li>
<li><a href="../ar477958/index.html">ุฃูุถู 10 ุงุชุฌุงูุงุช ูู ุชูุฑูุฑ ุงุชุฌุงูุงุช ุงูุฌุฑููุฉ ุงูุนุงููุฉ ุงูุชูููุฉ ุงูุฌุฏูุฏุฉ 2019/2020 Group-IB</a></li>
<li><a href="../ar477964/index.html">ุดูุฑูู ูู ุงูููุฑุฉ ุฅูู ุงูุจูุน ุงูุฃูู: ุชุฌุฑุจุฉ ูุฑูู ุณูุฑ ุงูุชูููู</a></li>
<li><a href="../ar477966/index.html">HolyJS 2019 ููุณูู ูู ุฎูุงู ุนููู ุงููุดุงุฑู</a></li>
<li><a href="../ar477976/index.html">ุงูุชุตูุฑ ูุชุญููู ุจููุฉ ุงููุฌุชูุน ุจุงุณุชุฎุฏุงู ุงูุฑุณูู ุงูุจูุงููุฉ</a></li>
<li><a href="../ar478472/index.html">Linux Kernel Library: Linux kernel in so or dll form factor</a></li>
<li><a href="../ar478474/index.html">ููุง ุฃุตุฏุฑ ุงูุฃุฎ ุจุงุจูู ุฅุณููุจุงุฑ ูุงุชููุง ุฐูููุง ูุฑููุง</a></li>
<li><a href="../ar478480/index.html">ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุ ITSM ุ ูุจุดูู ุนุงู ุ ุฃูู ุงูุนุฌุงูุ</a></li>
<li><a href="../ar478482/index.html">ูุงู ุงููุทูุฑ ุจูุชุญ ุดุฑูุท ูููุทูุฑูู ูุงุณุชุถุงูุฉ ุงูุงุฌุชูุงุนุงุช ููุงู ุนูู ุงูุฒุงูู ุ ุงูุชุฎุทูุท ุ PHP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>