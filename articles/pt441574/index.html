<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ ğŸ‘†ğŸ» ğŸŒ“ Docker de aprendizagem Parte 6: Trabalhando com dados ğŸ—¡ï¸ ğŸ”ï¸ ğŸˆ³</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na ediÃ§Ã£o de hoje da sÃ©rie Docker, falaremos sobre como trabalhar com dados. Em particular, volumes Docker. Nesses materiais, comparamos constantement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker de aprendizagem Parte 6: Trabalhando com dados</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/441574/">  Na ediÃ§Ã£o de hoje da sÃ©rie Docker, falaremos sobre como trabalhar com dados.  Em particular, volumes Docker.  Nesses materiais, comparamos constantemente os mecanismos de software do Docker com vÃ¡rias analogias comestÃ­veis.  NÃ£o vamos nos afastar dessa tradiÃ§Ã£o aqui.  Os dados do Docker devem ser condimentados.  Existem muitos tipos de especiarias no mundo e, no Docker, existem muitas maneiras de trabalhar com dados. <br><br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1: o bÃ¡sico</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2: termos e conceitos</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3: arquivos Dockerfile</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 4: reduzindo o tamanho das imagens e acelerando sua montagem</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 5: equipes</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 6: trabalhando com dados</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62a/5e2/05d/62a5e205d3d0f416ca1341ea301c27c3.jpg"></div><br><a name="habracut"></a><br>  Observe que este material foi preparado usando a versÃ£o 18.09.1 â€‹â€‹do mecanismo Docker e a versÃ£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1.39 da</a> API. <br><br>  Os dados do Docker podem ser armazenados temporariamente ou permanentemente.  Vamos comeÃ§ar com os dados de tempo. <br><br><h2>  <font color="#3AC1EF">Armazenamento temporÃ¡rio de dados</font> </h2><br>  HÃ¡ duas maneiras de organizar o trabalho com dados temporÃ¡rios nos contÃªineres do Docker. <br><br>  Por padrÃ£o, os arquivos criados por um aplicativo em execuÃ§Ã£o em um contÃªiner sÃ£o salvos em uma camada de contÃªiner habilitada para gravaÃ§Ã£o.  Para que esse mecanismo funcione, vocÃª nÃ£o precisa configurar nada especificamente.  Acontece barato e com raiva.  Um aplicativo sÃ³ precisa salvar dados e continuar a fazer suas prÃ³prias coisas.  No entanto, depois que o contÃªiner deixar de existir, os dados armazenados de maneira simples desaparecerÃ£o. <br><br>  Para armazenar arquivos temporÃ¡rios no Docker, vocÃª pode usar outra soluÃ§Ã£o adequada para os casos em que Ã© necessÃ¡rio um nÃ­vel mais alto de desempenho comparado ao que Ã© possÃ­vel obter usando o mecanismo padrÃ£o para armazenamento temporÃ¡rio de dados.  Se vocÃª nÃ£o precisar que seus dados sejam armazenados por mais tempo que o contÃªiner, existe possÃ­vel conectar tmpfs ao contÃªiner, um armazenamento temporÃ¡rio de informaÃ§Ãµes que usa a RAM do host.  Isso irÃ¡ acelerar o desempenho da gravaÃ§Ã£o e leitura de dados. <br><br>  Muitas vezes acontece que os dados precisam ser armazenados mesmo depois que o contÃªiner deixa de existir.  Para fazer isso, precisamos de mecanismos Ãºteis para armazenamento permanente de dados. <br><br><h2>  <font color="#3AC1EF">Armazenamento permanente de dados</font> </h2><br>  Existem duas maneiras de aumentar a vida Ãºtil dos dados que a vida Ãºtil do contÃªiner.  Uma maneira Ã© usar a tecnologia de montagem de ligaÃ§Ã£o.  Com essa abordagem, vocÃª pode montar, por exemplo, uma pasta realmente existente no contÃªiner.  Os processos localizados fora do Docker poderÃ£o trabalhar com os dados armazenados nessa pasta.  Ã‰ assim <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">que a</a> tecnologia tmpfs mount and bind mount se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">parece</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29c/1ea/9a4/29c1ea9a4546930dd8d03c7c5f521cc8.png"></div><br>  <i><font color="#999999">Monte tmpfs e monte bind</font></i> <br><br>  As desvantagens do uso da tecnologia de montagem de ligaÃ§Ã£o sÃ£o que seu uso complica o backup de dados, a migraÃ§Ã£o de dados e o compartilhamento de dados entre vÃ¡rios contÃªineres.  Ã‰ muito melhor usar volumes do Docker para armazenamento de dados persistente. <br><br><h2>  <font color="#3AC1EF">Tom Docker</font> </h2><br>  Um volume Ã© um sistema de arquivos que reside em uma mÃ¡quina host fora dos contÃªineres.  A criaÃ§Ã£o e o gerenciamento de volumes sÃ£o feitos pelo Docker.  Aqui estÃ£o as propriedades bÃ¡sicas dos volumes do Docker: <br><br><ul><li>  Eles representam um meio para o armazenamento permanente de informaÃ§Ãµes. </li><li>  Eles sÃ£o independentes e separados dos contÃªineres. </li><li>  Eles podem ser compartilhados entre diferentes contÃªineres. </li><li> Eles permitem que vocÃª organize a leitura e a gravaÃ§Ã£o eficazes dos dados. </li><li>  Os volumes podem ser hospedados no provedor de nuvem remota. </li><li>  Eles podem ser criptografados. </li><li>  Eles podem receber nomes. </li><li>  O contÃªiner pode providenciar para que o volume seja preenchido com dados antecipadamente. </li><li>  Eles sÃ£o convenientes para teste. </li></ul><br>  Como vocÃª pode ver, os volumes do Docker tÃªm Ã³timos recursos.  Vamos falar sobre como criÃ¡-los. <br><br><h2>  <font color="#3AC1EF">CriaÃ§Ã£o de Volume</font> </h2><br>  Ã‰ possÃ­vel criar volumes usando o Docker ou por meio de solicitaÃ§Ãµes de API. <br><br>  Aqui estÃ¡ a instruÃ§Ã£o no Dockerfile que permite criar um volume quando o contÃªiner Ã© iniciado. <br><br><pre><code class="plaintext hljs">VOLUME /my_volume</code> </pre> <br>  Ao usar uma instruÃ§Ã£o Docker semelhante, depois de criar o contÃªiner, ele criarÃ¡ um volume contendo dados que jÃ¡ existem no local especificado.  Observe que, se vocÃª criar um volume usando o Dockerfile, isso nÃ£o dispensa a necessidade de especificar um ponto de montagem para o volume. <br><br>  VocÃª tambÃ©m pode criar volumes no Dockerfile usando o formato JSON. <br><br>  AlÃ©m disso, Ã© possÃ­vel criar volumes usando a linha de comandos enquanto o contÃªiner estiver em execuÃ§Ã£o. <br><br><h2>  <font color="#3AC1EF">Trabalhando com volumes da linha de comandos</font> </h2><br><h3>  <font color="#3AC1EF">â–Criar um volume</font> </h3><br>  VocÃª pode criar um volume independente com o seguinte comando: <br><br><pre> <code class="plaintext hljs">docker volume create â€”-name my_volume</code> </pre> <br><h3>  <font color="#3AC1EF">InformationDobrar informaÃ§Ãµes de volume</font> </h3><br>  Para visualizar a lista de volumes do Docker, use o seguinte comando: <br><br><pre> <code class="plaintext hljs">docker volume ls</code> </pre> <br>  VocÃª pode explorar um volume especÃ­fico como este: <br><br><pre> <code class="plaintext hljs">docker volume inspect my_volume</code> </pre> <br><h3>  <font color="#3AC1EF">EmRemover Volume</font> </h3><br>  VocÃª pode excluir um volume como este: <br><br><pre> <code class="plaintext hljs">docker volume rm my_volume</code> </pre> <br>  Para excluir todos os volumes que nÃ£o sÃ£o usados â€‹â€‹por contÃªineres, vocÃª pode recorrer ao seguinte comando: <br><br><pre> <code class="plaintext hljs">docker volume prune</code> </pre> <br>  Antes de excluir volumes, o Docker solicitarÃ¡ a confirmaÃ§Ã£o desta operaÃ§Ã£o. <br><br>  Se o volume estiver associado a um contÃªiner, esse volume nÃ£o poderÃ¡ ser excluÃ­do atÃ© que o contÃªiner correspondente seja excluÃ­do.  Nesse caso, mesmo que o contÃªiner seja removido, o Docker nem sempre entende isso.  Se isso acontecer, vocÃª pode usar o seguinte comando: <br><br><pre> <code class="plaintext hljs">docker system prune</code> </pre> <br>  Ele foi projetado para limpar os recursos do Docker.  ApÃ³s executar este comando, vocÃª poderÃ¡ excluir volumes cujo status foi determinado anteriormente incorretamente. <br><br><h2>  <font color="#3AC1EF">Sinalizadores --mount e --volume</font> </h2><br>  Para trabalhar com volumes, quando vocÃª chama o <code>docker</code> , geralmente Ã© necessÃ¡rio usar sinalizadores.  Por exemplo, para criar um volume durante a criaÃ§Ã£o de um contÃªiner, vocÃª pode usar a seguinte construÃ§Ã£o: <br><br><pre> <code class="plaintext hljs">docker container run --mount source=my_volume, target=/container/path/for/volume my_image</code> </pre> <br>  Nos tempos antigos (atÃ© 2017), a bandeira <code>--volume</code> era <code>--volume</code> .  Inicialmente, esse sinalizador (tambÃ©m pode ser usado de forma abreviada e, em seguida, parece <code>-v</code> ) foi usado para contÃªineres independentes, e o sinalizador <code>--mount</code> foi <code>--mount</code> no ambiente do Docker Swarm.  No entanto, a partir do Docker 17.06, o sinalizador <code>--mount</code> pode ser usado em qualquer cenÃ¡rio. <br><br>  Deve-se notar que, ao usar o sinalizador <code>--mount</code> , a quantidade de dados adicionais que devem ser especificados no comando aumenta, mas, por vÃ¡rias razÃµes, Ã© melhor usar esse sinalizador em vez de <code>--volume</code> .  O sinalizador <code>--mount</code> Ã© o Ãºnico mecanismo que permite trabalhar com serviÃ§os ou especificar configuraÃ§Ãµes do driver de volume.  AlÃ©m disso, trabalhar com esse sinalizador Ã© mais fÃ¡cil. <br><br>  Nos exemplos existentes de comandos destinados a trabalhar com dados no Docker, vocÃª pode encontrar muitos exemplos do uso do sinalizador <code>-v</code> .  Ao tentar adaptar esses comandos, lembre-se de que os <code>--mount</code> e <code>--volume</code> usam formatos de parÃ¢metros diferentes.  Ou seja, vocÃª nÃ£o pode simplesmente substituir <code>-v</code> por <code>--mount</code> e obter um comando de trabalho. <br><br>  A principal diferenÃ§a entre <code>--mount</code> e <code>--volume</code> Ã© que, ao usar o sinalizador <code>--volume</code> todos os parÃ¢metros sÃ£o coletados juntos em um campo e, ao usar <code>--mount</code> parÃ¢metros sÃ£o separados. <br><br>  Ao trabalhar com <code>--mount</code> parÃ¢metros sÃ£o representados como pares de chave-valor, ou seja, se parece com <code>key=value</code> .  Esses pares sÃ£o separados por vÃ­rgulas.  Aqui estÃ£o as opÃ§Ãµes <code>--mount</code> comumente usadas: <br><br><ul><li>  <code>type</code> - <code>type</code> montagem.  O valor para a chave correspondente pode ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bind</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">volume</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tmpfs</a> .  Estamos falando de volumes aqui, isto Ã© - estamos interessados â€‹â€‹no valor do <code>volume</code> . </li><li>  <code>source</code> - monte a fonte.  Para volumes nomeados, este Ã© o nome do volume.  Para volumes sem nome, essa chave nÃ£o estÃ¡ especificada.  Pode ser reduzido para <code>src</code> . </li><li>  <code>destination</code> - o caminho no qual o arquivo ou pasta estÃ¡ montado no contÃªiner.  Essa chave pode ser reduzida para <code>dst</code> ou <code>target</code> . </li><li>  <code>readonly</code> - monta um volume <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">somente leitura</a> .  O uso dessa chave Ã© opcional; nenhum valor Ã© atribuÃ­do a ela. </li></ul><br>  Aqui estÃ¡ um exemplo do uso de <code>--mount</code> com muitas opÃ§Ãµes: <br><br><pre> <code class="plaintext hljs">docker run --mount type=volume,source=volume_name,destination=/path/in/container,readonly my_image</code> </pre> <br><h2>  <font color="#3AC1EF">SumÃ¡rio</font> </h2><br>  Aqui estÃ£o alguns comandos Ãºteis que vocÃª pode usar ao trabalhar com volumes do Docker: <br><br><ul><li> <code>docker volume create</code> </li> <li> <code>docker volume ls</code> </li> <li> <code>docker volume inspect</code> </li> <li> <code>docker volume rm</code> </li> <li> <code>docker volume prune</code> </li> </ul><br>  Aqui estÃ¡ uma lista de opÃ§Ãµes comumente usadas para <code>--mount</code> , aplicÃ¡veis â€‹â€‹a um comando como <code>docker run --mount my_options my_image</code> : <br><br><ul><li> <code>type=volume</code> </li> <li> <code>source=volume_name</code> </li> <li> <code>destination=/path/in/container</code> </li> <li> <code>readonly</code> </li> </ul><br>  Agora que terminamos esta sÃ©rie do Docker, Ã© hora de dizer algumas palavras sobre para onde aqueles que estudam o Docker podem seguir em frente.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui estÃ¡ um</a> Ã³timo artigo sobre o Docker.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui estÃ¡ um</a> livro sobre o Docker (ao comprar este livro, tente obter a ediÃ§Ã£o mais recente).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> estÃ¡ outro livro que irÃ¡ atender aqueles que acreditam que a prÃ¡tica Ã© a melhor maneira de aprender tecnologia. <br><br>  <b>Caros leitores!</b>  Quais materiais sobre o Docker vocÃª recomendaria aos iniciantes para estudar? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt441574/">https://habr.com/ru/post/pt441574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt441562/index.html">Galope do pixel - parte cinco - animaÃ§Ã£o do carÃ¡ter. Caminhada</a></li>
<li><a href="../pt441566/index.html">12 conceitos de JavaScript para conhecer</a></li>
<li><a href="../pt441568/index.html">Gerenciamento de memÃ³ria Python</a></li>
<li><a href="../pt441570/index.html">O resumo de materiais frescos do mundo do front-end da Ãºltima semana n Â° 353 (17 a 24 de fevereiro de 2019)</a></li>
<li><a href="../pt441572/index.html">Frontend Weekly Digest (18 a 24 de fevereiro de 2019)</a></li>
<li><a href="../pt441576/index.html">Redes Kubernetes: Pods</a></li>
<li><a href="../pt441578/index.html">Tutorial Reagir Parte 19: MÃ©todos do Ciclo de Vida dos Componentes</a></li>
<li><a href="../pt441580/index.html">Tutorial Reagir Parte 20: Primeira liÃ§Ã£o de renderizaÃ§Ã£o condicional</a></li>
<li><a href="../pt441582/index.html">OtimizaÃ§Ã£o do sistema de controle LQR</a></li>
<li><a href="../pt441584/index.html">PHP Digest No. 150 (11 a 25 de fevereiro de 2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>