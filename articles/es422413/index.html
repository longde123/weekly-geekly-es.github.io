<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüëß üë®‚Äç‚úàÔ∏è üßùüèΩ Aplicaci√≥n del sistema operativo Arm Mbed. Ajuste fino üò° üîï üë®‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Despu√©s de usar el sistema operativo Arm Mbed, fue posible parpadear el LED , lleg√≥ el momento de probar y configurar otros servicios importantes. Se ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aplicaci√≥n del sistema operativo Arm Mbed. Ajuste fino</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422413/"><p><img src="https://habrastorage.org/webt/db/tg/fq/dbtgfq4owssxgshqlazk5lwycxm.png" alt="LNDC1"></p><br><p>  Despu√©s de usar el <strong>sistema operativo Arm Mbed,</strong> fue posible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">parpadear el LED</a> , lleg√≥ el momento de probar y configurar otros servicios importantes.  Se describe lo siguiente: </p><br><ul><li>  <strong>Tecnolog√≠a de</strong> configuraci√≥n de <strong>Mbed</strong> </li><li>  ¬øPor qu√© es dif√≠cil cambiar a <strong>C ++</strong> en <strong>RTOS</strong> regular? </li><li>  C√≥mo ahorrar memoria en <strong>RTOS</strong> </li><li>  ¬øC√≥mo se organizan las interrupciones en <strong>Mbed OS?</strong> </li><li>  De lo que es conveniente depurar <strong>Mbed OS</strong> </li><li>  C√≥mo deshacerse de una capa adicional de abstracci√≥n <strong>SDK</strong> </li></ul><a name="habracut"></a><br><p>  <em>Continuamos conociendo la tecnolog√≠a de programaci√≥n de microcontroladores de la familia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MKE18F</a> utilizando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ARM Mbed OS</a></em> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Primer articulo</a> </li></ul><br><h2 id="tehnologiya-konfigurirovaniya-mbed">  Tecnolog√≠a de configuraci√≥n de Mbed </h2><br><p>  Un componente importante del proyecto Mbed es un <strong>sistema de configuraci√≥n</strong> y ensamblaje autom√°tico, tanto en <strong>l√≠nea</strong> como <strong>fuera de l√≠nea</strong> , es decir.  localmente en la computadora del usuario.  Se propone configurar editando <strong>archivos .json</strong> con nombres especiales.  Luego, los scripts en el proyecto <strong>Python</strong> convierten estos archivos en archivos de encabezado, archivos de espacio de trabajo del IDE seleccionado por el usuario, archivos de comando de enlazador y otros archivos de soporte. </p><br><p>  Pero el problema del m√©todo descrito est√° en la opacidad desde el punto de vista de los textos fuente, ya que es muy dif√≠cil para nosotros rastrear d√≥nde y qu√© cambia el sistema de configuraci√≥n en las fuentes.  Por otro lado, en nuestro caso no hay motivo para respaldar la capacidad del proyecto de ser transferido autom√°ticamente a diferentes IDEs. </p><br><p>  Por lo tanto, se decidi√≥ abandonar este enfoque.  Como se indic√≥ en un art√≠culo anterior, simplemente se form√≥ en un proyecto en l√≠nea para <strong>IDE IAR</strong> , se obtuvo un mont√≥n de archivos no estructurados en el espacio de trabajo de IDE, luego se sistematizaron y se descartaron innecesarios.  Como resultado, ya no necesita hacer la configuraci√≥n a trav√©s de archivos <strong>.json</strong> y solo hay tres lugares espec√≠ficos donde se encuentran los par√°metros que afectan la configuraci√≥n de <strong>Mbed</strong> : </p><br><ul><li>  <strong>Opciones del compilador</strong> IDE </li><li>  <strong>Archivo por lotes Linker MKE18F512xxx16_flash.icf</strong> </li><li>  Archivo de encabezado <strong>mbed_config.h</strong> </li></ul><br><p>  En el archivo <strong>mbed_config.h</strong> , puede contar alrededor de 130 definiciones, lo cual es muy molesto al principio.  Pero afortunadamente, la mayor√≠a de ellos se relacionan con pilas de protocolos inal√°mbricos que no se utilizan actualmente en el proyecto.  Por conveniencia, las entradas se ordenaron de modo que las reales se ubicaran en la parte superior.  Inicialmente, las definiciones para diferentes m√≥dulos en el archivo <strong>mbed_config.h se</strong> ubican de forma aleatoria, pero despu√©s de ordenarlas se ve as√≠: </p><br><div class="spoiler">  <b class="spoiler_title">Abierto</b> <div class="spoiler_text"><pre><code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> __MBED_CONFIG_DATA__ <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __MBED_CONFIG_DATA__ // <span class="hljs-type"><span class="hljs-type">Configuration</span></span> parameters <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_RTOS_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:rtos <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_ALL_STATS_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> //<span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">DEVICE_SLEEP</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>       <span class="hljs-type"><span class="hljs-type">SLEEP</span></span>      <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_MAIN_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_TIMER_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_IDLE_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_DEFAULT_SERIAL_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">3000000</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_ALL_THREADS_INFO</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_FILENAME_CAPTURE_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_HIST_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_HIST_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_FORCE_NON_COPYABLE_ERROR</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_MAX_ERROR_FILENAME_LEN</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_POLL_USE_LOWPOWER_TIMER</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">3000000</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_BUFFERED_SERIAL</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_CONVERT_NEWLINES</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_CONVERT_TTY_NEWLINES</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_FLUSH_AT_EXIT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_DRIVERS_UART_SERIAL_RXBUF_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:drivers <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_DRIVERS_UART_SERIAL_TXBUF_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:drivers <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_DISPATCH_FROM_APPLICATION</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_EVENTSIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_HIGHPRIO_EVENTSIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_HIGHPRIO_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_USE_LOWPOWER_TIMER_TICKER</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_DEBUG_AT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_RANDOM_MAX_START_DELAY</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_USE_APN_LOOKUP</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_FILESYSTEM_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:filesystem <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_KINETIS_EMAC_RX_RING_LEN</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:kinetis-emac <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_KINETIS_EMAC_TX_RING_LEN</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> // set by library:kinetis-emac <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_ADR_ON</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APP_PORT</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPLICATION_EUI</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPLICATION_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPSKEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_AUTOMATIC_UPLINK_MESSAGE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DEVICE_ADDRESS</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DEVICE_EUI</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DUTY_CYCLE_ON</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_LBT_ON</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_NB_TRIALS</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_NWKSKEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_OVER_THE_AIR_ACTIVATION</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_PHY</span></span> <span class="hljs-type"><span class="hljs-type">EU868</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_PUBLIC_NETWORK</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_TX_MAX_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ADDR_TIMEOUT</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ADDR_TIMEOUT_MODE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_DEBUG_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_DEFAULT_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ENABLE_PPP_TRACE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ETHERNET_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IP_VER_PREF</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IPV4_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IPV6_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_MEM_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">36560</span></span> // set by library:lwip[<span class="hljs-type"><span class="hljs-type">Freescale</span></span>] <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_PPP_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">768</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_SERVER_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCPIP_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1200</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_UDP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_USE_MBED_TRACE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL_MASK</span></span> <span class="hljs-number"><span class="hljs-number">0x7fff800</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL_PAGE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_DEVICE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">NET_6LOWPAN_ROUTER</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PANID_FILTER</span></span> <span class="hljs-number"><span class="hljs-number">0xffff</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PSK_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0xa0</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xa2</span></span>, <span class="hljs-number"><span class="hljs-number">0xa3</span></span>, <span class="hljs-number"><span class="hljs-number">0xa4</span></span>, <span class="hljs-number"><span class="hljs-number">0xa5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa6</span></span>, <span class="hljs-number"><span class="hljs-number">0xa7</span></span>, <span class="hljs-number"><span class="hljs-number">0xa8</span></span>, <span class="hljs-number"><span class="hljs-number">0xa9</span></span>, <span class="hljs-number"><span class="hljs-number">0xaa</span></span>, <span class="hljs-number"><span class="hljs-number">0xab</span></span>, <span class="hljs-number"><span class="hljs-number">0xac</span></span>, <span class="hljs-number"><span class="hljs-number">0xad</span></span>, <span class="hljs-number"><span class="hljs-number">0xae</span></span>, <span class="hljs-number"><span class="hljs-number">0xaf</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PSK_KEY_ID</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_SEC_LEVEL</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_SECURITY_MODE</span></span> <span class="hljs-type"><span class="hljs-type">NONE</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_HEAP_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">32500</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL_MASK</span></span> <span class="hljs-number"><span class="hljs-number">0x7fff800</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL_PAGE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_COMMISSIONING_DATASET_TIMESTAMP</span></span> <span class="hljs-number"><span class="hljs-number">0x10000</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_EXTENDED_PANID</span></span> {<span class="hljs-number"><span class="hljs-number">0xf1</span></span>, <span class="hljs-number"><span class="hljs-number">0xb5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xb2</span></span>,<span class="hljs-number"><span class="hljs-number">0xc4</span></span>, <span class="hljs-number"><span class="hljs-number">0xd5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xbd</span></span> } // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_ML_PREFIX</span></span> {<span class="hljs-number"><span class="hljs-number">0xfd</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0d</span></span>, <span class="hljs-number"><span class="hljs-number">0xb8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_NETWORK_NAME</span></span> <span class="hljs-comment"><span class="hljs-comment">"Thread Network"</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_PANID</span></span> <span class="hljs-number"><span class="hljs-number">0x0700</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_PSKC</span></span> {<span class="hljs-number"><span class="hljs-number">0xc8</span></span>, <span class="hljs-number"><span class="hljs-number">0xa6</span></span>, <span class="hljs-number"><span class="hljs-number">0x2e</span></span>, <span class="hljs-number"><span class="hljs-number">0xae</span></span>, <span class="hljs-number"><span class="hljs-number">0xf3</span></span>, <span class="hljs-number"><span class="hljs-number">0x68</span></span>, <span class="hljs-number"><span class="hljs-number">0xf3</span></span>, <span class="hljs-number"><span class="hljs-number">0x46</span></span>, <span class="hljs-number"><span class="hljs-number">0xa9</span></span>, <span class="hljs-number"><span class="hljs-number">0x9e</span></span>, <span class="hljs-number"><span class="hljs-number">0x57</span></span>, <span class="hljs-number"><span class="hljs-number">0x85</span></span>, <span class="hljs-number"><span class="hljs-number">0x98</span></span>, <span class="hljs-number"><span class="hljs-number">0x9d</span></span>, <span class="hljs-number"><span class="hljs-number">0x1c</span></span>, <span class="hljs-number"><span class="hljs-number">0xd0</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_DEVICE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">MESH_DEVICE_TYPE_THREAD_ROUTER</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_MASTER_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x10</span></span>, <span class="hljs-number"><span class="hljs-number">0x11</span></span>, <span class="hljs-number"><span class="hljs-number">0x22</span></span>, <span class="hljs-number"><span class="hljs-number">0x33</span></span>, <span class="hljs-number"><span class="hljs-number">0x44</span></span>, <span class="hljs-number"><span class="hljs-number">0x55</span></span>, <span class="hljs-number"><span class="hljs-number">0x66</span></span>, <span class="hljs-number"><span class="hljs-number">0x77</span></span>, <span class="hljs-number"><span class="hljs-number">0x88</span></span>, <span class="hljs-number"><span class="hljs-number">0x99</span></span>, <span class="hljs-number"><span class="hljs-number">0xaa</span></span>, <span class="hljs-number"><span class="hljs-number">0xbb</span></span>, <span class="hljs-number"><span class="hljs-number">0xcc</span></span>, <span class="hljs-number"><span class="hljs-number">0xdd</span></span>, <span class="hljs-number"><span class="hljs-number">0xee</span></span>, <span class="hljs-number"><span class="hljs-number">0xff</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_PSKD</span></span> <span class="hljs-comment"><span class="hljs-comment">"ABCDEFGH"</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_SECURITY_POLICY</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_USE_STATIC_LINK_CONFIG</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_USE_MALLOC_FOR_HEAP</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_CONFIGURATION</span></span> nanostack_full // set by library:nanostack <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_CRITICAL_SECTION_USABLE_FROM_INTERRUPT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_DISPATCH_FROM_APPLICATION</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">6144</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_USE_MBED_EVENTS</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_NVM_CFSTORE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_MESH_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">THREAD</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_STACK</span></span> <span class="hljs-type"><span class="hljs-type">LWIP</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_WIFI_SECURITY</span></span> <span class="hljs-type"><span class="hljs-type">NONE</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_CACHE_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_RESPONSE_WAIT_TIME</span></span> <span class="hljs-number"><span class="hljs-number">5000</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_RETRIES</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_TOTAL_ATTEMPTS</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_APN_LOOKUP</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_AT_PARSER_BUFFER_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_AT_PARSER_TIMEOUT</span></span> <span class="hljs-number"><span class="hljs-number">8000</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">115200</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_TARGET_NETWORK_DEFAULT_INTERFACE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">ETHERNET</span></span> // set by target:<span class="hljs-type"><span class="hljs-type">K66F</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_BLOCK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_ENABLE_INFO</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_INTRINSICS</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_LOOKAHEAD</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_PROG_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_READ_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_IPV4_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_IPV6_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NVSTORE_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:nvstore <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NVSTORE_MAX_KEYS</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:nvstore // <span class="hljs-type"><span class="hljs-type">Macros</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> _RTE_ // defined by library:rtos <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NS_USE_EXTERNAL_MBED_TLS</span></span> // defined by library:nanostack <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INCLUDE_CONFIG_H</span></span> // defined by library:utest <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span></code> </pre> </div></div><br><h2 id="osobennosti-perehoda-na-c-v-primenenii-k-rtos">  Caracter√≠sticas de la transici√≥n a C ++ aplicada a RTOS </h2><br><p>  <strong>La API de</strong> nivel superior en <strong>Mbed</strong> est√° escrita en <strong>C ++</strong> , por lo que este lenguaje debe usarse en el c√≥digo de la aplicaci√≥n.  Pero hay matices que debes conocer. <br>  El uso de <strong>C ++</strong> para <strong>RTOS</strong> en peque√±os sistemas integrados sigue siendo relativamente raro.  El problema aqu√≠ es que los proyectos <strong>RTOS</strong> exitosos se esfuerzan por ser multiplataforma, mientras que <strong>C ++</strong> impone altas demandas en la gesti√≥n de recursos de la plataforma en comparaci√≥n con <strong>C.</strong>  La raz√≥n es el deseo de ocultar al usuario los detalles de la gesti√≥n de recursos de bajo nivel.  Se trata principalmente de recursos de memoria.  Los constructores, destructores, hilos, excepciones con destrucci√≥n autom√°tica, plantillas de objetos de estructura de datos, etc. utilizan operaciones impl√≠citas con memoria din√°mica.  Pero el recurso de <strong>RAM</strong> en sistemas peque√±os es muy limitado.  RAM es el recurso m√°s escaso en tales sistemas y especialmente en <strong>RTOS</strong> .  En <strong>RTOS, a</strong> cada tarea se le asigna una pila, el desarrollador no puede predecir su tama√±o exacto por adelantado y, por lo tanto, elige con un margen.  Por lo tanto, la presencia de <strong>RTOS</strong> con una docena de tareas requiere de inmediato un tama√±o de <strong>RAM</strong> de 10 a 30 kB.  Se necesita mucha memoria para varios analizadores y protocolos (HTTP, HTML ...) y sistemas de archivos.  Si se utiliza una pantalla, los requisitos de <strong>RAM</strong> libre se incrementan a√∫n m√°s. </p><br><p>  Las bibliotecas de entornos de desarrollo como <strong>IAR</strong> est√°n equipadas con buenos administradores de memoria din√°mica, pero est√°n dise√±adas para un entorno de tiempo de ejecuci√≥n de subproceso √∫nico.  Para que puedan comenzar a trabajar en <strong>RTOS,</strong> debe escribir c√≥digo adicional.  Este proceso se llama <strong>retargeting</strong> . <br>  En <strong>RTOS</strong> escrito en <strong>C, el</strong> retargeting generalmente no se realiza.  Como no hay operaciones impl√≠citas con memoria din√°mica a nivel de lenguaje, todas las operaciones se realizan expl√≠citamente llamando a sus propias versiones seguras de subprocesos de <strong>malloc</strong> y funciones <strong>libres</strong> .  El programador tiene control total sobre las operaciones con memoria din√°mica y puede aplicar f√°cilmente todas las medidas posibles para guardarlo. </p><br><p>  En el caso de <strong>C ++,</strong> si queremos usar todas las caracter√≠sticas de este lenguaje, tendremos que <strong>reorientar</strong> .  Pero la <strong>reorientaci√≥n</strong> en cada entorno de desarrollo es un proceso puramente individual.  Esto dificulta la vida de los desarrolladores de <strong>RTOS</strong> . </p><br><p>  La siguiente figura es un ejemplo de una estructura de llamada con retargeting.  Las <em>funciones __write</em> , <em>__lseek</em> , <em>__read</em> pueden no ser implementadas por el usuario, pero su funcionalidad queda a discreci√≥n del <strong>IDE</strong> .  Y ciertamente <strong>printf</strong> y <strong>scanf</strong> no ser√°n multiproceso. </p><br><img src="https://habrastorage.org/webt/xq/fa/8e/xqfa8eksi4rb4ytbicaehymj0py.png"><br><p>  <strong>Mbed es</strong> uno de los pocos, si no el √∫nico <strong>RTOS</strong> que proporciona c√≥digos fuente con retargeting ya realizado para una tr√≠ada de herramientas de desarrollo conocidas: <strong>GCC</strong> , <strong>IAR</strong> , <strong>Keil</strong> <br>  A pesar de todo lo anterior, puede encontrar art√≠culos sobre c√≥mo portar <strong>RTOS</strong> a <strong>C ++</strong> sin realizar el retargeting, por ejemplo, resolviendo el problema simplemente reemplazando algunas funciones est√°ndar comunes por las suyas.  Esto puede funcionar, pero luego el programador debe ser consciente de varias restricciones impl√≠citas y no documentadas cuando utiliza construcciones <strong>C ++</strong> en <strong>IAR</strong> (solo constructores est√°ticos, verifique todas las plantillas para ver si hay <strong>nuevas</strong> excepciones de descarte, etc.)  Ya ser√° dif√≠cil llamar a <strong>C ++</strong> .  <strong>Mbed,</strong> como un sistema f√°cil de usar, elimina muchas de estas limitaciones, acerc√°ndose a <strong>Arduino</strong> con simplicidad. </p><br><p>  Adem√°s de todas las versiones recientes de IAR, existen dificultades para cambiar a C11 y C ++ 14, que se describe aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.iar.com/support/resources/articles/exploring-c11-and-c14/</a> </p><br><h2 id="kak-organizuyutsya-preryvaniya-v-mbed">  ¬øC√≥mo se organizan las interrupciones en Mbed? </h2><br><p>  Por extra√±o que parezca, no ser√° posible encontrar una clase o funci√≥n o algo adecuado para organizar el servicio de interrupci√≥n en la API de Mbed.  Solo puede encontrar la clase <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">InterruptIn</a></strong> , que est√° destinada solo a puertos externos. </p><br><p>  Las respuestas a tales preguntas deben buscarse en <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CMSIS-RTOS</a></strong> , es decir, en la <em>capa de acceso perif√©rico central CMSIS Cortex-M4</em> .  Las macros se definen all√≠: </p><br><ul><li>  <strong><em>NVIC_SetVector</em></strong> : establece la rutina de servicio de interrupci√≥n (ISR) para un vector dado </li><li>  <strong><em>NVIC_SetPriority</em></strong> : establece la prioridad para el vector de interrupci√≥n especificado. </li><li>  <strong><em>NVIC_EnableIRQ</em></strong> : permite interrumpir llamadas en un vector determinado </li></ul><br><p>  <strong>As√≠</strong> se inicializa la organizaci√≥n de interrupci√≥n del temporizador <strong>SysTick</strong> : </p><br><pre> <code class="hljs lisp"> NVIC_SetVector(<span class="hljs-name"><span class="hljs-name">mbed_get_m0_tick_irqn</span></span>(), (<span class="hljs-name"><span class="hljs-name">uint32_t</span></span>)SysTick_Handler)<span class="hljs-comment"><span class="hljs-comment">; //   mbed_get_m0_tick_irqn       SysTick. //        SysTick_IRQn    MKE18F16.h //  SysTick_Handler   . NVIC_SetPriority(mbed_get_m0_tick_irqn(), 0xFF); // 0xFF    .      .   NVIC    MKE18F16   16  . ..   4-  . NVIC_EnableIRQ(mbed_get_m0_tick_irqn()); //    .</span></span></code> </pre> <br><p>  Las prioridades de tareas de Mbed y las prioridades de interrupci√≥n no deben confundirse. </p><br><p>  Si no se asigna la prioridad, de manera predeterminada se establece en el m√°ximo. <br>  Desde los manejadores de interrupciones asignados de esta manera, puede llamar a cualquier servicio <strong>RTOS</strong> que no genere expectativas.  Es decir  transmitir banderas, sem√°foros, mensajes, buzones, etc.  Sin embargo, los servicios se llaman no desde el <strong>ISR en</strong> s√≠, sino llamando a las interrupciones de software configurando el bit <strong>PENDSVSET</strong> en el <em>Control de interrupci√≥n y el Registro de estado</em> ( <strong>ICSR</strong> ) del <em>bloque de control</em> del <em>sistema</em> ( <strong>SCB</strong> ) del <strong>n√∫cleo Cortex-M</strong> .  Es decir  despu√©s de completar el controlador de interrupci√≥n actual, si no hay otras interrupciones de prioridad, el vector <strong>PendSV</strong> llamar√° al controlador del sistema donde se realizar√° el servicio. </p><br><h2 id="kak-v-mbed-proishodit-rabota-s-dinamicheskoy-pamyatyu">  ¬øC√≥mo funciona Mbed con memoria din√°mica? </h2><br><p>  <strong>La memoria din√°mica,</strong> o bien <strong>mont√≥n</strong> o <strong>mont√≥n,</strong> es un componente requerido cuando se programa en <strong>C ++</strong> .  En nuestro proyecto <strong>Mbed</strong> bajo <strong>IAR</strong> , el tama√±o de esta √°rea de memoria se determina en el archivo de configuraci√≥n del vinculador <strong>MKE18F512xxx16_flash.icf</strong> escribiendo en la variable <strong>__size_heap__</strong> .  Establecemos el tama√±o para que ocupe toda la memoria libre restante.  Sabemos <strong>cu√°nta</strong> memoria libre queda del archivo <strong>.map</strong> despu√©s de la compilaci√≥n, es decir.  dimensionar el <strong>mont√≥n</strong> es un proceso iterativo. </p><br><h3 id="vyzov-staticheskih-konstruktorov-obektov-c">  Llamar a constructores est√°ticos de objetos C ++ </h3><br><p>  Un problema importante al usar <strong>C ++</strong> es d√≥nde y c√≥mo se llaman los constructores de objetos globales.  Incluso en <strong>RTOS que</strong> afirman seriedad, por ejemplo, <strong>MAX</strong> , esto se ignora, es decir,  dejado al azar.  All√≠, los dise√±adores participan en una biblioteca de entorno de desarrollo de subproceso √∫nico est√°ndar con el mecanismo habitual de asignaci√≥n de memoria de subproceso √∫nico.  Pero despu√©s del comienzo, los <strong>RTOS</strong> comunes crean su propio mecanismo para administrar la memoria din√°mica, y la memoria ocupada por objetos globales permanece olvidada.  Este es un agujero en nuestros esfuerzos por ahorrar memoria y controlar todo. </p><br><p>  <strong>Mbed</strong> abord√≥ este tema mucho m√°s en serio.  Hay para cada entorno de desarrollo tiene su propio enfoque.  En el <strong>IAR,</strong> esto se hace as√≠: </p><br><ul><li>  la secuencia de inicializaci√≥n es interceptada por el c√≥digo de usuario incluso antes de que los dise√±adores llamen </li><li>  los m√©todos de bloqueo de flujos de <strong>la API RTOS se</strong> sustituyen en la biblioteca est√°ndar </li><li>  Las funciones est√°ndar <strong>new</strong> , <strong>delete</strong> , <strong>malloc</strong> , <strong>free</strong> ... se redirigen a llamadas a la <strong>API de</strong> memoria din√°mica <strong>RTOS</strong> . </li></ul><br><p>  <strong>Mbed</strong> utiliza adaptadores de biblioteca <strong>IAR</strong> para operaci√≥n multihilo <br>  Puede leer sobre la adaptaci√≥n de IAR para subprocesos m√∫ltiples aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://supp.iar.com/FilesPublic/UPDINFO/005691/arm/doc/infocenter/DLIBThreadSupport.html</a> <br>  <strong>Mbed ha</strong> adaptado tanto los <em>bloqueos del</em> sistema como <em>los bloqueos de flujo de archivos de</em> la biblioteca <strong>IAR</strong> .  Se implementan en el archivo <em>mbed_boot.c</em> y usan <strong>mutexes del sistema operativo</strong> . </p><br><p>  La funci√≥n <strong>__iar_program_start</strong> ejecutable en las primeras l√≠neas del archivo <strong>startup_MKE18F16.s</strong> inicializa la pila del sistema operativo y la memoria din√°mica llamando a <em>mbed_set_stack_heap</em> </p><br><h2 id="naznachenie-razmerov-stekov-zadach">  Dimensionar pilas de tareas </h2><br><p>  Recortar pilas de tareas al m√≠nimo es la opci√≥n m√°s atractiva para ahorrar <strong>RAM</strong> . <br>  Para las tareas que requieren menos apilamiento, se utilizan diferentes t√©cnicas.  Por ejemplo, las funciones de la biblioteca afectan fuertemente a la pila para generar y formatear l√≠neas <strong>printf</strong> , <strong>sprintf</strong> , <strong>scanf</strong> , etc.  Tienen la capacidad de asignar grandes √°reas temporales para el almacenamiento de datos en la pila.  Si nos negamos a usar estas funciones en la tarea, podemos reducir la pila de tareas en unos pocos cientos de bytes. </p><br><p>  Mbed OS al inicio crea inmediatamente tres tareas con nombres: <strong>"main_thread"</strong> , <strong>"timer_thread"</strong> , <strong>"idle_thread"</strong> .  El tama√±o de pila predeterminado para ellos fue determinado por macros en el archivo de encabezado <strong>mbed_rtx_conf.h</strong> .  <strong>Movimos</strong> las declaraciones de estas pilas al <strong>archivo de</strong> configuraci√≥n <strong>mbed_config.h</strong> y redujimos el tama√±o de las pilas.  Ahora las definiciones se ven as√≠: </p><br><ul><li>  La pila de tareas <strong>"main_thread"</strong> est√° definida por la macro <strong>MBED_CONF_APP_MAIN_STACK_SIZE</strong> = 1024 bytes </li><li>  La pila de tareas <strong>timer_thread</strong> est√° definida por la macro <strong>MBED_CONF_APP_TIMER_THREAD_STACK_SIZE</strong> = 512 bytes </li><li>  La pila de tareas <strong>idle_thread</strong> est√° definida por la macro <strong>MBED_CONF_APP_IDLE_THREAD_STACK_SIZE</strong> = 512 bytes </li></ul><br><h2 id="sredstva-kontrolya-za-ispolzovaniem-resursov-pamyati-v-mbed">  Controles de uso de memoria Mbed </h2><br><p>  La memoria din√°mica y la pila son recursos que requieren atenci√≥n constante.  Para ver cu√°nta memoria din√°mica se usa y cu√°l es la intensidad de las solicitudes, cu√°nta pila queda para cada tarea y cu√°l fue la carga m√°xima de la pila en Mbed, hay contadores especiales.  De manera predeterminada, est√°n deshabilitados por la directiva de compilaci√≥n condicional; para habilitarlos, debe declarar <strong>MBED_ALL_STATS_ENABLED</strong> .  Cuando se declara la definici√≥n, debe escribir su propio procedimiento para mostrar informaci√≥n al usuario.  Escribimos un procedimiento especial para enviar estad√≠sticas al emulador de terminal VT100, que se discutir√° m√°s adelante. </p><br><p>  Adem√°s de las herramientas proporcionadas por el sistema operativo, el entorno de desarrollo IAR en las versiones recientes agrega una nueva caracter√≠stica: los <strong>canarios apilados</strong> .  Lee sobre ellos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Los problemas generales de protecci√≥n de la pila del desbordamiento se analizan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><h2 id="sredstva-otladki-i-analiza-koda-mbed">  Herramientas de an√°lisis y depuraci√≥n de c√≥digo Mbed </h2><br><p>  Un estudio realmente profundo del trabajo de <strong>Mbed</strong> en la nueva plataforma solo es posible utilizando el depurador <strong>JTAG / SWD</strong> . </p><br><img width="300" align="left" src="https://habrastorage.org/webt/64/xh/my/64xhmylaiz-_eejrufyuqmo_2n8.png"><br><p>  <strong>Las fuentes de Mbed</strong> est√°n llenas de macros multinivel e instrucciones de compilaci√≥n condicional.  Simplemente mirando la fuente, no puede decir qu√© funciones funcionan y cu√°les no, d√≥nde se ejecuta el programa y d√≥nde no.  La √∫nica salida es conectar el depurador y, paso a paso, analizar la ruta de ejecuci√≥n del programa.  Ya en la etapa de portabilidad, es casi imposible hacerlo sin una depuraci√≥n paso a paso. </p><br><p>  Recomendar√≠a las versiones de depuradores <strong>Segger</strong> de <strong>J-Link Pro</strong> y <strong>J-Link Ultra</strong> .  Se distinguen por un alto ancho de banda, varias veces mayor que el de los modelos baratos comunes.  Para los sistemas de depuraci√≥n con tiempo real dif√≠cil, esto es importante.  Al rastrear eventos r√°pidos, tales depuradores son menos propensos a desbordamientos y requieren menos iteraciones de depuraci√≥n.  Adem√°s de la depuraci√≥n paso a paso, pueden registrar interrupciones, mantener estad√≠sticas de las interrupciones, incluida su duraci√≥n, admitir tecnolog√≠as de depuraci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>RTT</strong></a> e <strong>ITM</strong> , detectar excepciones de hardware y otras funciones. </p><br><p>  A continuaci√≥n se muestra una vista de la ventana del depurador IAR cuando se trabaja a trav√©s del adaptador J-Link. </p><br><p><img src="https://habrastorage.org/webt/n2/of/it/n2ofit9jpectc6sncr6c3sl1gzo.png"></p><br><p>  No vale la pena ahorrar, el 90% del tiempo de desarrollo se dedica a la depuraci√≥n.  Aunque los trazadores Segger <strong>J-Trace</strong> m√°s caros ya no ofrecen una gran ventaja, ya que la serie <strong>MKE18F</strong> no tiene una interfaz de <strong>trazado</strong> especial. </p><br><p>  <strong>La segunda</strong> herramienta de depuraci√≥n, por supuesto, es E / S a trav√©s de <strong>UART</strong> .  Mbed tiene al menos cuatro tecnolog√≠as diferentes para acceder a un canal de datos en serie a trav√©s de <strong>UART</strong> , </p><br><p>  Esto es: </p><br><ul><li>  redirecci√≥n a trav√©s de la clase <strong>DirectSerial</strong> de funciones est√°ndar de <strong>E / S C / C ++</strong> </li><li>  clase <strong>RawSerial</strong> </li><li>  clase <strong>serial</strong> </li><li>  clase <strong>UARTSerial</strong> </li></ul><br><p>  Toda una variedad inusual.  Los cuatro se pueden usar simult√°neamente para la salida al mismo puerto.  Algunos de ellos son m√°s funcionales, otros son menos, otros est√°n documentados y otros no.  En el futuro, en nuestro proyecto usaremos <strong>RawSerial</strong> , como la clase que <strong>requiere</strong> menos recursos. </p><br><h2 id="skolko-my-teryaem-taymerov-portirovav-mbed">  ¬øCu√°ntos temporizadores perdemos portando Mbed? </h2><br><p>  Para parpadear el LED, <strong>se</strong> utiliz√≥ la funci√≥n de <strong>espera</strong> de <strong>la API del</strong> sistema operativo Mbed.  El √∫ltimo art√≠culo habl√≥ sobre los problemas de portarlo.  Pero esto no es todo, excepto que Mbed mantiene un contador de su trabajo (la funci√≥n <strong>mbed_stats_cpu_get</strong> puede leerlo) y hay una <strong>API de temporizador</strong> .  Estos servicios utilizan las funciones de bajo nivel del archivo <strong>lp_ticker.c</strong> .  En este archivo, el temporizador <strong>LPTMR</strong> del kit perif√©rico <strong>Kinetis</strong> se usa para organizar el <strong>conteo de</strong> tiempo.  Durante el proceso de portabilidad, este archivo se edit√≥ para que coincida con los m√©todos de sincronizaci√≥n utilizados en el microcontrolador <strong>MKE18F512VLL16</strong> . </p><br><p>  Por lo tanto, el <strong>puerto Mbed</strong> captura completamente dos m√≥dulos de contador: <strong>PIT</strong> y <strong>LPTMR</strong> y el <strong>temporizador</strong> central <strong>SysTick</strong> .  Esto debe recordarse cuando se planifican recursos para una tarea aplicada. </p><br><h2 id="osobennosti-nachalnoy-zagruzki-mke18f">  Caracter√≠sticas de Bootstrap MKE18F </h2><br><p>  La familia de <strong>chips MKE18F</strong> tiene una <strong>ROM</strong> incorporada con un gestor de arranque a trav√©s de interfaces seriales: <strong>UART, CAN, SPI, I2C</strong> .  Pero est√° planeado usar nuestro gestor de arranque seguro en nuestra placa, por lo que el trabajo de un gestor de arranque normal no es deseable. <br>  En este caso, los chips <strong>Kinetis deben</strong> prestar atenci√≥n al contenido del <strong>√°rea Flash</strong> del <strong>programa</strong> en <strong>0x040D</strong> .  Se almacena una constante que determina el orden de arranque.  En nuestro caso, la constante <strong>0x7B</strong> debe escribirse <strong>all√≠</strong> , indicando el inicio desde la memoria <strong>Flash</strong> , y no desde la <strong>ROM,</strong> y desactivando la funci√≥n <strong>NMI</strong> en la salida externa.  Con un valor diferente para esta constante, el programa puede congelarse en el gestor de arranque incorporado llamado accidentalmente desde la ROM. </p><br><p>  Tambi√©n es importante recordar que escribir en la memoria Flash del controlador solo es posible a una frecuencia central de <strong>120 MHz</strong> y no m√°s alta, es decir  En el modo <strong>HRUN</strong> , la grabaci√≥n con <strong>flash</strong> no es posible. </p><br><h2 id="aktiviziruem-watchdog">  Activar perro guardi√°n </h2><br><p>  La placa de nuestro controlador est√° dise√±ada para uso industrial, lo que significa que no puede prescindir de <strong>Watchdog</strong> . </p><br><p>  Inicialmente, la macro <strong>DISABLE_WDOG</strong> en el archivo <strong>system_MKE18F16.h</strong> se configur√≥ para deshabilitar el <strong>perro guardi√°n</strong> .  Para corregir la situaci√≥n, se borr√≥ esta macro y <strong>se</strong> implement√≥ su propia inicializaci√≥n de <strong>WDOG</strong> . </p><br><p>  La inicializaci√≥n de <strong>Watchdog se</strong> realiza en la funci√≥n <strong>SystemInit</strong> .  El contador de <strong>vigilancia</strong> se actualiza en la tarea <strong>IDLE</strong> . </p><br><p>  Tal enfoque requiere que las tareas de mayor prioridad no capturen exclusivamente el procesador durante m√°s de <strong>100 ms</strong> .  Pero esto puede suceder f√°cilmente, por ejemplo, cuando se env√≠an grandes volcados de datos al terminal.  Por lo tanto, en todas partes dividimos procedimientos largos en tareas con prioridad mayor que <strong>IDLE</strong> en fragmentos cortos intercalados con pausas usando la funci√≥n de <strong>espera</strong> . </p><br><h2 id="vopros-drayverov-iz-postavki-sdk">  Problema de controladores de la entrega del SDK </h2><br><p>  <strong>Los</strong> controladores de <strong>SDK</strong> tienen el prefijo <strong>fsl</strong> ubicado en el directorio <strong>NXP_MKE18F_drivers</strong> y son una especie de capa de abstracci√≥n perif√©rica.  Se supone que facilitan la programaci√≥n de perif√©ricos dif√≠ciles de aprender, pero desafortunadamente est√°n m√≠nimamente documentados.  M√°s bien, su documentaci√≥n se limita a comentarios en encabezados de funci√≥n.  Hay desconcierto para qui√©n est√°n escritos, y c√≥mo pueden liberarnos de estudiar manuales en la periferia del microcontrolador.  Mi respuesta es de ninguna manera.  Los controladores simplemente facilitan la transferencia de programas a diferentes microcontroladores dentro de la misma familia.  Pero para aplicarlos de manera efectiva, debe tratar muy bien con la documentaci√≥n perif√©rica.  Por lo tanto, los controladores <strong>SDK</strong> resuelven un problema bastante privado de los desarrolladores de los propios controladores, lejos de las necesidades de los usuarios que est√°n comenzando a aprender <strong>Kinetis</strong> . </p><br><p>  Los controladores tambi√©n est√°n dise√±ados para funcionar en todos los chips de la familia, es decir  sea ‚Äã‚Äãuniversal y, por lo tanto, saturado de macros condicionales y verifica que para cada chip en particular no tengan ninguna funci√≥n √∫til. </p><br><p>  Los controladores a√∫n pueden ayudar de alguna manera a comprender mejor c√≥mo manejar los perif√©ricos, pero despu√©s de comprender el controlador, puede ignorarlo con seguridad. <br>  En este sentido, no deber√≠a sorprendernos que en este proyecto, el acceso a los perif√©ricos no afectados por el puerto Mbed pasa directamente por alto al controlador. </p><br><p>  Sin embargo, puede haber preocupaciones sobre las dependencias de un perif√©rico particular en la disponibilidad de controladores SDK.  Aqu√≠ debe examinar el c√≥digo fuente de los controladores.  El principal peligro de las dependencias proviene de la separaci√≥n de funciones de los controladores <strong>DMA</strong> .  Para evitar esto, debe rastrear y prohibir que los servicios regulares de Mbed usen <strong>DMA</strong> cuando trabajen con perif√©ricos.  Si los controladores de <strong>SDK</strong> no <strong>tocan</strong> <strong>DMA</strong> , entonces casi todo lo que no se aplica a los 2 m√≥dulos de temporizador mencionados ( <strong>PIT</strong> y <strong>LPTMR</strong> ) y el UART de depuraci√≥n se pueden eliminar o ignorar del directorio <strong>NXP_MKE18F_drivers</strong> . </p><br><p>  Un peligro menor, pero tambi√©n significativo, puede provenir de priorizar los perif√©ricos involucrados a trav√©s de los controladores SDK.  Por ejemplo, debe saber qu√© prioridad se asigna a las interrupciones SysTick, depurar UART y temporizadores.  En una situaci√≥n donde su prioridad es igual o mayor que la prioridad de la periferia utilizada en la gesti√≥n en tiempo real, esto puede conducir a la degradaci√≥n de la calidad de la gesti√≥n. </p><br><p>  Recuerde que el puerto <strong>Mbed</strong> para el <strong>MKE18F</strong> inicia interrupciones UART y temporizador sin priorizaci√≥n, es decir.  obtienen el nivel m√°ximo por defecto. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es422413/">https://habr.com/ru/post/es422413/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es422401/index.html">Otro marco de plugin de C ++</a></li>
<li><a href="../es422403/index.html">20 de septiembre, Mosc√∫: una reuni√≥n para analistas</a></li>
<li><a href="../es422407/index.html">Buscar y ordenar textos relacionados</a></li>
<li><a href="../es422409/index.html">Python: metaprogramaci√≥n en producci√≥n. Primera parte</a></li>
<li><a href="../es422411/index.html">Nuevos roles en las empresas en la era de la servitizaci√≥n.</a></li>
<li><a href="../es422415/index.html">Python: metaprogramaci√≥n en producci√≥n. Parte dos</a></li>
<li><a href="../es422417/index.html">Slavik y GMT + 3 o beneficio para las personas</a></li>
<li><a href="../es422419/index.html">No sin p√°nico en Go</a></li>
<li><a href="../es422421/index.html">Microsoft va a mejorar radicalmente Skype</a></li>
<li><a href="../es422423/index.html">Python y DataScience: Explorando el poder de la Biblioteca Universal de Numpy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>