<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úäüèΩ üë©üèæ‚Äçüîß üíÑ GeoPuzzle - mach die Welt St√ºck f√ºr St√ºck ü•Ö üõ¢Ô∏è üôèüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich m√∂chte √ºber ein Projekt sprechen, das sich in den letzten Jahren entwickelt hat. Es hei√üt GeoPuzzle und ist ein Puzzlespiel auf der politischen We...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GeoPuzzle - mach die Welt St√ºck f√ºr St√ºck</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427209/"><img src="https://habrastorage.org/webt/yi/rt/rr/yirtrrid9bdhlygy86tfho1fg8g.png" alt="Bild"><br><br>  Ich m√∂chte √ºber ein Projekt sprechen, das sich in den letzten Jahren entwickelt hat.  Es hei√üt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GeoPuzzle</a> und ist ein Puzzlespiel auf der politischen Weltkarte.  Ziel ist es, Teile des Landes an seine Stelle zu setzen.  Die Idee wurde in dem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Mercator Puzzle for Geography Professionals" entdeckt</a> , der in der Kindheit auch Tetris aus L√§ndern (noch unter DOS) spielte, aber ich erinnere mich nicht an den Namen des Programms.  Die Idee hat mich so inspiriert, dass ich ein komplettes Produkt herstellen wollte, das nicht nur f√ºr Schulkinder, sondern auch f√ºr Geografieexperten interessant ist.  Die Entwicklung des Projekts kann auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> beobachtet werden. <br><a name="habracut"></a><br><h2>  Prototyp </h2><br>  Der Artikel "Puzzle Mercator f√ºr Geographie-Experten" wurde am 8. Februar 2013 ver√∂ffentlicht, aber nach 4 Monaten hatte ich einen Prototyp fertig, in dem die Polygone aller L√§nder der Welt zusammengesetzt waren.  Wenig sp√§ter f√ºgte ich die Regionen Russlands und der US-Bundesstaaten hinzu und w√§hlte die Ausgangsposition auf der Karte f√ºr Polygone zuf√§llig aus.  Ich habe den Entwicklungsprozess <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in meinem Blog beschrieben</a> und den Quellcode auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> gepostet.  Und das war's - stecken.  Ich hatte viel weniger Freizeit, meine Motivation war weg (es wurde keine Entscheidung getroffen) und die Komplexit√§t nahm exponentiell zu.  Es war ein Haustierprojekt, und die Hauptaufgabe bestand darin, etwas Neues zu lernen, also war ich ein wenig pervers mit Technologie.  Auf dem Client war nat√ºrlich Javascript (mit dem ich damals nicht viel gearbeitet habe), das Ruby-Skript (wieder eine neue Sprache f√ºr mich) f√ºr die Aufbereitung der Daten verantwortlich, aber auf dem Server gab es Erlang (ich wollte etwas rein Funktionales ausprobieren).  Vollst√§ndiger Ausstieg aus der Komfortzone: Es war schwierig, direkt mit PostGIS-Objekten zu arbeiten. Der Aufwand, Zeichenfolgen in erlang zu konvertieren und YAWS zu konfigurieren, war ein separates Problem. In der n√§chsten Phase wurde mir klar, dass ich mit diesem ganzen Zoo einfach nicht fertig werden konnte, um ein vollwertiges Produkt herzustellen, und ging denke ein paar Jahre nach. <br><br><h2>  GeoPuzzle </h2><br><img src="https://habrastorage.org/webt/k3/rp/5d/k3rp5dfmluyjvoqm0tffbva4b_g.gif" alt="Bild"><br><br>  Die Seite hat die ganze Zeit funktioniert, die Leute waren sogar dort, aber ich wollte wirklich noch ein kleines Detail hinzuf√ºgen: um zumindest einige Informationen √ºber das neu entdeckte Polygon anzuzeigen.  Daher hatte ich vor, die Neujahrsferien 2017 mit Nutzen zu verbringen.  Aufgrund von Problemen im Prototyp habe ich beschlossen, alles neu zu schreiben und das Produkt auf etwas Bekanntem zu machen - Django.  Es gibt Dinge, die mein Leben stark vereinfacht haben, zum Beispiel das Admin-Panel und die Arbeit mit PostGIS √ºber ORM.  F√ºr den Anfang war es jedoch notwendig, die bereits funktionierende Funktionalit√§t neu zu erstellen.  Es dauerte nur ein paar Abende, und die meiste Zeit wurde mit dem Laden von Daten aus KML-Dateien verbracht.  Nicht so sehr der Importprozess selbst als vielmehr die Vorbereitung und Wiederherstellung meines Wissens dar√ºber, wie man mit ihnen arbeitet.  √úbrigens habe ich damals <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Polygone</a> von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gadm.org genommen</a> .  Dies funktionierte gut f√ºr L√§nder, aber es gab bestimmte Probleme mit der Genauigkeit der Regionen, so dass ich mir eine Auszeit f√ºr dieses Problem nahm. <br><br><div class="spoiler">  <b class="spoiler_title">Ein paar Worte zu Verwaltungsebenen in Geodaten (Ebenen).</b> <div class="spoiler_text">  Alle L√§nder sind in viele Regionen unterteilt, die in noch kleinere Teile unterteilt sind.  Insgesamt gibt es 12 Ebenen in einer solchen Hierarchie. <br><br>  Zum Beispiel f√ºr Russland: <br><br><ul><li>  Russland (2) -&gt; S√ºdlicher Bundesbezirk (3) -&gt; Krasnodar-Gebiet (4) -&gt; Vyselkovsky-Bezirk (6) -&gt; Art.  D√∂rfer (8) </li><li>  Russland (2) -&gt; S√ºdlicher Bundesbezirk (3) -&gt; Krasnodar-Gebiet (4) -&gt; Krasnodar (6) -&gt; Prikubansky-Bezirk (9) -&gt; Kopanskaya (10) </li><li>  Frankreich (2) -&gt; Metropole Frankreich (3) -&gt; Normandie (4) -&gt; Departement Orne (6) -&gt; Kanton Donfron (7) -&gt; Gemeinde Donfron-en-Poiret (8) -&gt; Donfron (9) </li></ul><br>  Territoriale Einheiten in verschiedenen L√§ndern werden auf ihre eigene Weise genannt, aber f√ºr mich habe ich diese Unterteilung abgeleitet: Land (2) -&gt; Region (4) -&gt; Distrikt (6).  Weitere administrative Aufteilung f√ºr sp√§ter verlassen. <br></div></div><br><h2>  Projektentwicklung </h2><br>  Zu dieser Zeit war die Anwendung nur eine Sammlung von HTML-Seiten mit einem Minimum an CSS.  Ich wollte die Idee schnell √ºberpr√ºfen und mich nicht um das Design k√ºmmern.  Die Idee erwies sich als realisierbar und es ist Zeit, eine sch√∂ne H√ºlle daf√ºr zu machen.  Weil  Ich habe keinen Sinn f√ºr Sch√∂nheit in der Benutzeroberfl√§che, dann Bootstrap, um mir zu helfen.  Es gibt keine Schnittstelle, aber es erschien und wurde sogar f√ºr mobile Ger√§te angepasst.  Dies war jedoch nur der erste Schritt, um das Frontend in Ordnung zu bringen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie f√ºhlt es sich an, 2016 JavaScript zu lernen</a> ?!  Wenn der Code in einen anderen Dialekt kompiliert wird, wird er als Vorlage verwendet und zusammengeklebt, damit er sp√§ter in St√ºcke geschnitten werden kann.  Als Backend hatte ich Angst, aber die Komplexit√§t des Client-Teils war gro√ü genug geplant, was die Verwendung eines Frameworks oder einer Bibliothek erforderlich machte.  Ich habe mich aus zwei Gr√ºnden f√ºr React entschieden: Ich brauchte kein SPA, sondern eine Reihe von Komponenten f√ºr verschiedene Seiten, und ich wollte das Ergebnis schnell sehen.  Bevor Sie mit dem Programmieren begannen, mussten Sie die Umgebung einrichten.  Jetzt verstehe ich das vertraute Frontend, das sagte, dass er Webpack f√ºr 2 Tage eingerichtet hat.  Es stellt sich heraus, dass es kein Witz war. <br><br>  Zu dieser Zeit erlag ich der √úberzeugung und implementierte die Logik der Anwendung mit Redux.  Vielleicht war das kein Fehler, weil  darf das Thema schnell eingeben.  Durch formale Regeln konnte ich Code schreiben und sicherstellen, dass er funktionierte, ohne unter die Haube zu schauen.  Redux, das seine Middleware verwendet, hat mich von der Netzwerkinteraktion abstrahiert, wodurch ich die Antworten auf den Server √ºberpr√ºfen konnte.  Ja, bis zu diesem Punkt arbeitete der Client selbstst√§ndig - Ajax Request holte alle erforderlichen Daten heraus und √ºberpr√ºfte die Antworten selbstst√§ndig.  Der Benutzer k√∂nnte betr√ºgen, indem er sich die Daten ansieht, die vom Server stammen.  Au√üerdem flogen die Daten beim Laden ein, was erst nach der richtigen Antwort erforderlich war.  Nach der Implementierung der √úberpr√ºfung √ºber Web-Sockets ist der Prozess ideologisch korrekter geworden - die Antwort √ºberpr√ºft Code, der dem Client nicht zur Verf√ºgung steht.  F√ºr den Benutzer sah dies immer noch sofort so aus: Senden der Extrempunkte des Polygons an den Server, √úberpr√ºfen, ob sie das Quadrat mit einem Fehler eingegeben haben, Packen der Daten f√ºr das Infobox und des detaillierten Polygons in json und √úbertragen an den Client - Anpassung in ~ 200 ms. <br><br><img src="https://habrastorage.org/webt/va/s_/kz/vas_kzccg7izp3-lys7pztcfktm.png" alt="Bild"><br><br>  Nachdem Sie die ganze Kraft von Javascript gelernt haben, ist es schwer aufzuh√∂ren.  Sofort gab es Ideen, wo man Animationen, Faltbl√∂cke, Blinken und neue Versionen von Spielen hinzuf√ºgen konnte.  Eines davon ist das ‚ÄûQuiz‚Äú, bei dem Sie das Land anhand von Name, Flagge, Wappen oder Hauptstadt erraten m√ºssen.  W√§hrend des Testprozesses stellte sich heraus, dass einige Regionen keine Flaggen hatten, w√§hrend andere kein Kapital hatten, so dass einige L√§nder von der Liste der verf√ºgbaren L√§nder ausgeschlossen werden mussten.  Gleichzeitig erschien auf der physischen Weltkarte ein Spielmodus - f√ºr echte Profis ohne L√§ndergrenzen. <br><br><h2>  √ñffnen Sie Datenquellen </h2><br>  Derzeit befinden sich ca. 50.000 Polygone im Spiel, und ich m√∂chte mich ganz herzlich bei so gro√üartigen Projekten wie Wikipedia und Open Street Map bedanken, ohne die das Ausf√ºllen der Basis nicht m√∂glich gewesen w√§re.  Grundvoraussetzung war das Empfangen und Aktualisieren von Daten aus Open Source, also ohne manuelle Bearbeitung, weil  Ich m√∂chte keine komplexe Synchronisationslogik machen.  Als Ergebnis habe ich 2 Skripte, die Infoboxen und Polygone aktualisieren k√∂nnen. <br><br><h3>  Wikipedia und SPARQL </h3><br><img src="https://habrastorage.org/webt/vh/-l/-9/vh-l-9bii6guq-jufnz3lcxtkia.png" alt="Bild"><br><br>  Was ist die gr√∂√üte Datenbank von L√§ndern und Regionen?  Wikipedia!  Anfangs wollte ich den Benutzern die gesamte Infobox zeigen, gab diese Idee aber bald auf.  Ja, es gab wichtige Dinge wie Namen, Flaggen, Hauptst√§dte und andere Dinge, aber es gab auch viel M√ºll (Telefoncode, Regierungsform, BIP ...).  Ich habe versucht, bereits gesammelte zu analysieren, aber festgestellt, dass sie eine andere Struktur haben.  Dies stellte sich als Katastrophe heraus: Die Arbeitskosten f√ºr die Implementierung stiegen um ein Vielfaches.  Es war Zeit anzuhalten und nachzudenken.  Gleich am n√§chsten Tag erfuhr ich von der Existenz einer speziellen Abfragesprache - SPARQL.  Im Aussehen √§hnelt es SQL - auch deklarativ, mit den Schl√ºsselw√∂rtern <code>SELECT</code> , <code>WHERE</code> , <code>ORDER BY</code> , aber es funktioniert auf eine ganz andere Art und Weise.  Ein kleines Beispiel, das eine Liste von Staaten mit ihren Hauptst√§dten in Englisch und Russisch zur√ºckgibt: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> ?country ?capital ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> { ?country wdt:P31 wd:Q3624078 . <span class="hljs-keyword"><span class="hljs-keyword">FILTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> {?country wdt:P31 wd:Q3024240} OPTIONAL { ?country wdt:P36/rdfs:label ?capital } . BIND(lang(?capital) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> (?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'ru'</span></span> || ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'en'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> ?capital</code> </pre><br>  Sieht wild aus, nicht wahr ?!  √úberpr√ºfen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  Ich habe sogar eine kleine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Notiz in meinem Blog geschrieben,</a> um meine Erfahrungen irgendwie zu strukturieren und dabei zu helfen, in das Thema einzusteigen, weil  Es gibt nur wenige detaillierte Materialien im Internet.  Sie k√∂nnen lernen, solche Anfragen ziemlich schnell zu lesen, aber ich habe ein ganzes Wochenende gebraucht, um etwas Sinnvolles zu schreiben.  Viel "Magie" von <code>wd:Q3624078</code> und anderen Attributen.  Sie m√ºssen wissen, dass <code>wdt:P31</code> eine ‚ÄûEinheit‚Äú und <code>wd:Q3624078</code> ein ‚Äûsouver√§ner Staat‚Äú ist.  Unbekannte Personen beginnen mit einem Fragezeichen, und die Erf√ºllung der Anfrage besteht in der Suche nach solchen dreifachen Tatsachen, die die Bedingungen erf√ºllen w√ºrden.  Beispiel <code>?country wdt:P31 wd:Q3024240</code> - "Alle Objekte finden, die historische Zust√§nde sind";  und dann nimmt das gleiche Objekt an anderen Dreifach- <code>?country wdt:P36/rdfs:label ?capital</code> - woher kommt das Kapital <code>?country wdt:P36/rdfs:label ?capital</code> <br><br>  Ungef√§hr eine Woche sp√§ter hatte ich die erste Version des Skripts fertig, mit der regionale Informationen von Wikipedia heruntergeladen wurden.  Und dann wurde ein anderes Problem klar - diesmal mit Daten.  Einige SVG-Dateien haben nicht mit <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code> und wurden vom Browser nicht als g√ºltige Bilder erkannt.  Gl√ºcklicherweise kann die Quelldatei bearbeitet werden.  Die Registrierung auf wikipedia.org ist nicht kompliziert, aber Sie befinden sich sofort f√ºr einen Tag in einem Badehaus.  Hier ist ihr Schutz gegen Roboter.  Gleich am n√§chsten Abend regierte ich XML und war froh, wie einfach es sich herausstellte, und Flaggen und Embleme erschienen auf der Karte. <br><br><h3>  Polygone </h3><br><img src="https://habrastorage.org/webt/gd/g7/t-/gdg7t-ssoht6cbt3kifldfm_bvk.png" alt="Bild"><br><br>  Wenn wir f√ºr Fakten zu Wikipedia gehen, dann f√ºr Geodaten - in der Open Street Map.  Es w√§re cool, eine lokale Kopie abzuholen und die Sprache der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√úberf√ºhrungsanfragen zu</a> lernen, aber ich kann mir nicht einmal vorstellen, wie lange es dauern w√ºrde.  Und Sie m√ºssen auch die Hierarchie von irgendwoher √ºbernehmen ... Gl√ºcklicherweise hat eine freundliche Person <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieses Problem bereits f√ºr mich gel√∂st</a> .  Der Dienst bietet sogar eine API zum Abrufen von Informationen.  Ich habe es geschafft, von dort alle Polygone bis einschlie√ülich Level 6 (Distrikt) herunterzuladen und alles in Postgres zu f√ºllen, etwas mehr als 2 GB kamen heraus.  Es war nicht ohne Abenteuer - einige Polygone waren so gro√ü (zum Beispiel wiegt Kanada in einem GeoJSON mit Rei√üverschluss mehr als 100 MB), dass der Server entweder abst√ºrzte oder nicht reagierte.  Ich musste solche Momente manuell umgehen.  Ich habe alle Kinder heruntergeladen und in QGIS zusammengef√ºhrt.  Dies ist √ºbrigens ein weiteres Beispiel f√ºr ein Open Source-Projekt, das mir sehr geholfen hat. <br><br><h2>  Big Data-Probleme </h2><br>  Also, ich habe eine Datenbank mit Daten, ich starte das Spiel und ... und warte ... wieder warte ich ... erschien!  Ich habe versucht, das Polygon zu ziehen - Er ist tot, Jim!  Chrome konnte mit einem solchen Punktevolumen nicht umgehen und fiel ab.  Die Stirnstrategie funktioniert nicht mehr, es ist Zeit zum Nachdenken.  Am naheliegendsten ist es, die Details von Polygonen zu reduzieren.  Empirisch abgeleitet eine Formel, die von der Fl√§che der Figur abh√§ngt - es wurde besser.  Auf einem funktionierenden Computer arbeitete der Algorithmus im laufenden Betrieb, w√§hrend die Ressourcen des Servers stark eingeschr√§nkt sind.  Verbundene Redis, es wurde schon auf dem Server besser.  Aber abgeschnittene Polygone sind gut f√ºr Drag'n'Drop, und wenn sie an der richtigen Stelle eingestellt sind, stimmen die R√§nder nicht mit denen √ºberein, die Google Maps zeichnen.  Nun, dies kann umgangen werden, indem eine nicht so aggressive Formel angewendet wird, um Details zu reduzieren.  Da es bereits 2 Caches gibt, warum nicht versuchen, alles zwischenzuspeichern, was √ºberhaupt m√∂glich ist ?!  Infoboxen (in zwei Sprachen) flogen nach Redis, den Grenzen, anhand derer die Antwort berechnet wird, der Mitte des Polygons sowie den statischen Seiten der Site.  Infolgedessen begann das Spiel viel schneller zu arbeiten, und Postgres wurde viel Arbeit abgenommen, was theoretisch der Engpass sein k√∂nnte.  Minus - die Anwendung funktioniert ohne Redis √ºberhaupt nicht. <br><br><h2>  Erste Bereitstellung </h2><br>  Es ist also Zeit, das Projekt Freunden zur R√ºckmeldung zu zeigen.  Es blieb nur wenig √ºbrig: sitemap.xml generieren, robots.txt hinzuf√ºgen, Metriken verbinden, soziale Schaltfl√§chen hinzuf√ºgen.  Netzwerke und ... bereitstellen!  Ich habe AWS als Hosting gew√§hlt  hoffte, in die freien Ressourcen zu passen.  Und dies ist ein sehr guter Stapel f√ºr ein Anf√§ngerprojekt: <br><br><ul><li>  Anwendungsserver (t2.micro: 1xCPU, 1 GB RAM, 20 GB SSD) </li><li>  Datenbank (db.t2.micro: 1xCPU, 1 Gb RAM, 20 Gb SSD) </li><li>  Dateispeicherung mit CDN (5 GB S3, 50 GB Datenverkehr) </li><li>  Caching-Server (cache.t2.micro: 1xCPU, 0,5 GB RAM) </li><li>  Elasticsearch + Kibana (t2.small.elasticsearch: 1xCPU, 2 GB RAM) </li></ul><br>  Dies ist nur eine Liste dessen, was ich verwendet habe.  Unterwegs beschloss ich, meinen Rechen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in Form von Artikeln</a> zu erstellen, starb aber schnell.  Die Zeit vergeht anst√§ndig, aber es ist nicht klar, ob jemand sie braucht. <br><br>  Infolgedessen zahlte ich f√ºr das Dienstjahr etwas in der Gr√∂√üenordnung von 10 Dollar, und sogar das aus Dummheit.  Aber hier ging die Probezeit zu Ende und ich musste umziehen, weil  Die Kosten f√ºr den Besitz dieser gesamten Wirtschaft n√§herten sich mehreren hundert Dollar.  Tarife verglichen und auf DigitalOcean festgelegt.  Im Moment habe ich genug Computer mit 2 GB RAM f√ºr alles (Anwendungsserver, Datenbank und Cache), aber ich habe die Statik und das CDN auf AWS belassen.  Jetzt fand ich heraus, dass DO auch ein CDN und einen Speicher f√ºr 5 US-Dollar pro Monat hat. Daher ist es sinnvoll, auch √ºber das Verschieben dieses Teils nachzudenken. <br><br><h2>  √úbertragung auf Open Source </h2><br>  An diesem Januarabend erhielt ich einen Brief von einer d√§nischen Schule.  Das Wesentliche war, dass sie 100 Dollar haben und sie mir geben wollen.  Es gibt jedoch eine Bedingung: Der Quellcode des Projekts muss ge√∂ffnet sein.  Bis zu diesem Moment hatte ich noch nicht einmal an Open Source gedacht.  Ein paar Abende lang wurde √ºber eine Lizenz nachgedacht und sie ausgew√§hlt.  Infolgedessen habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Quellen</a> unter der GPLv3-Lizenz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf Github hochgeladen</a> und die versprochenen 100 US-Dollar erhalten.  Dies hat die Motivation stark erh√∂ht - mein Projekt war wirklich n√ºtzlich!  Und ich eilte zum n√§chsten Ziel - dem Spieleditor.  Damit jeder seine eigenen R√§tsel erstellen kann.  Zum Beispiel "L√§nder, die am Zweiten Weltkrieg teilnehmen", "Bezirke des Krasnodar-Territoriums", "Binnenl√§nder" ... Daf√ºr waren jedoch eine Registrierung und ein primitiver pers√∂nlicher Account erforderlich.  Infolgedessen zog sich die Entwicklung √ºber lange 3 Monate hin.  W√§hrend dieser Zeit schrieb ich einen Baum von Regionen, die Daten durch Ajax ziehen, die Lokalisierung verbinden, lernen, wie man eine Google-Karte als Bild speichert, um Vorschauen zu generieren und Redux zu schneiden.  Ja, er hat mir am Anfang geholfen, mit den Daten umzugehen, aber jetzt ist es wahrscheinlicher, dass sie st√∂ren.  Ich m√ºsste Reduzierungen ziehen, um Polygone auf der Karte zu zeichnen, zusammen mit Code, der ihre Bewegung handhaben w√ºrde.  Gl√ºcklicherweise dauerte das Entfernen der Bindung an den globalen Status nur ein paar Tage, und das Verschieben des Codes in den lokalen Status vereinfachte die Anwendung sogar.  Und nat√ºrlich ist das eine gute Erfahrung :) <br><br><h3>  Serviceverbindung </h3><br>  Es stellt sich heraus, dass viele kostenpflichtige Dienste ihre Dienste f√ºr Open Source-Projekte kostenlos anbieten.  Ich werde nur diejenigen auflisten, die ich mit meinen eigenen verbunden habe. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wachposten</a> .  Ich denke, dieser Service zum Abfangen von Fehlern ist jedem bekannt.  Als ich das Projekt gerade bereitgestellt habe, bestand die Protokollierung darin, einen Stack-Trace an die E-Mail zu senden.  Dies funktionierte nur f√ºr das Backend, aber ich wollte auch Fehler im Frontend verfolgen.  Und nicht umsonst - ich habe das Limit f√ºr kostenlose Nachrichten in nur 2 Wochen ausgesch√∂pft.  Die meisten Fehler befanden sich im Darm der Google-Kartenbibliothek, was auf den ersten Blick sehr seltsam ist.  W√§hrend der Untersuchung stellte sich heraus, dass alles meine Schuld war.  Korrekturen dauerten mehr als einen Monat, aber es war eine sehr n√ºtzliche Methode zur Behandlung von Javascript-Fehlern. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Crowdin.com</a> - Lokalisierung.  Ich plane, das Projekt f√ºr alle zug√§nglich zu machen.  Einschlie√ülich dieser Infoboxen wurden in seiner Muttersprache angezeigt.  Das Ausf√ºllen aus Wikipedia ist kein Problem, aber aus Gr√ºnden der Konsistenz m√∂chte ich auch eine Benutzeroberfl√§che in derselben Sprache haben, die bisher nur ins Russische und Englische √ºbersetzt wurde. <br><br><img src="https://habrastorage.org/webt/rq/c-/e7/rqc-e7xybyag2pgp9iaylqfobp4.png" alt="Bild"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CircleCI</a> .  Kein modernes Projekt kann ohne CI / CD, Tests und automatische Bereitstellung auskommen.  Ich habe mich ausschlie√ülich f√ºr CircleCI entschieden, weil ich bereits mit TravisCI zusammengearbeitet habe, als ich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bibliothek f√ºr die Arbeit mit Yandex.Disk geschrieben habe</a> .  Ich hatte den Eindruck, dass es besser zum Testen von Bibliotheken geeignet ist, als  Es ist einfach, die Matrix der Umgebungen festzulegen, in denen der Code getestet werden soll.  Aber mit den Tests selbst habe ich ein Problem - es gibt nicht so viele, wie wir m√∂chten, obwohl die Infrastruktur bereits bereit ist. <br><br><img src="https://habrastorage.org/webt/39/og/14/39og14nvsqwi9mkruslrydqjhh0.png" alt="Bild"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Overalls</a> .  Visualisierungsdienst f√ºr die Codeabdeckung.  Kann auch ein Etikett zum Einf√ºgen in das README.md-Projekt angeben. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SonarQube</a> .  Harvester zur Kontrolle der Codequalit√§t.  Es √ºberpr√ºft den Code nach einer Vielzahl von Regeln, ber√ºcksichtigt die zyklomatische Komplexit√§t, √ºberwacht die Abdeckung durch Tests und erkennt sogar Codeduplikationen!  Ein sehr interessanter Service, f√ºr den ich noch keine Zeit hatte, ihn vollst√§ndig zu verstehen. <br><br><img src="https://habrastorage.org/webt/og/lk/gp/oglkgp9ndcldy3r14m5iojv9_xi.png" alt="Bild"><br><br>  - Github Bots.  Bisher ist nur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dependabot</a> verbunden, wodurch Abh√§ngigkeiten aktualisiert werden. <br><br><img src="https://habrastorage.org/webt/r1/eh/9j/r1eh9jidp-k_nzmyhplghbdpsiq.png" alt="Bild"><br><br>  Ich schlage in den Kommentaren vor, die Liste der Dienste und Bots zu ihren Projekten zu teilen. <br><br><h2>  Bugs </h2><br>  Die Analyse von Fehlern und Problemen verdient einen separaten Artikel.  Es war lustig und komplex und schwer zu reparieren (daher steht Chukotka immer an seiner Stelle).  Derzeit gibt es eine, die Benutzer wirklich st√∂rt.  Nach Erhalt der Antwort werden die Polygone gel√∂scht und neu erstellt (in der React-Google-Maps-Bibliothek). Wenn der Benutzer zu diesem Zeitpunkt eine gezogen hat, geht die Google Map weiterhin davon aus, dass der Vorgang noch nicht abgeschlossen ist.  Es sieht so aus, als ob beim Ziehen und Tropfen das Polygon verschwindet und Sie kein anderes mehr greifen k√∂nnen.  Sie k√∂nnen die Antwortverarbeitung nat√ºrlich im Drag'n'Drop-Prozess sperren, aber dies wird garantiert das Multiplayer-Spiel beenden, an dessen Implementierung ich gerade arbeite.  Ich habe versucht, einen Weg zu finden, um das Ziehen und Ablegen programmgesteuert abzubrechen, aber am Ende habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine Frage zu StackOverflow</a> und einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fehler in Google Maps gestellt,</a> in der Hoffnung, dass sie darauf achten w√ºrden.  Bis dahin f√ºgte er eine Schaltfl√§che "Das Spiel ist kaputt!" Hinzu, die die gesamte Karte neu initialisiert, das Ergebnis jedoch nicht zur√ºcksetzt. <br><br><h2>  Was kommt als n√§chstes? </h2><br><ol><li>  Design.  Ich gebe zu, dass damit alles v√∂llig schlecht ist.  Es ist notwendig, einen Designer und Layoutdesigner einzustellen, da ich selbst nicht mit Layout und Layouts befreundet bin. </li><li>  Monetarisierung.  Anfangs hatte ich nichts geplant.  Das Projekt ist der Grundbildung gewidmet, die meiner Meinung nach f√ºr jedermann zug√§nglich sein sollte.  Ich war sehr inspiriert von einem Brief einer d√§nischen Schule, aber fast ein Jahr verging, und w√§hrend dieser Zeit gab es nur eine √úberweisung von 5 Dollar.  Ich habe nicht geglaubt, dass es sich √ºberhaupt f√ºr den Server auszahlt.  Trotzdem startete er eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kampagne auf Patreon</a> .  Gleichzeitig k√∂nnen Sie wahrscheinlich dar√ºber nachdenken, bezahlte M√∂glichkeiten f√ºr Lehrer oder Organisationen einzuf√ºhren.  Ich habe beispielsweise Erfahrung mit der Integration in Learning Management Systems - eine Reihe von Plattformen, mit denen Sie Kurse erstellen k√∂nnen und die in Europa und den USA sehr beliebt sind.  Soweit ich wei√ü, hindert mich dies als Autor nicht daran, eine parallele kommerzielle Version zu entwickeln, obwohl sich der Quellcode auch unter der GPL von Github befindet. </li><li>  Handys.  Ich m√∂chte eine Anwendung f√ºr iOS / Android ver√∂ffentlichen.  Gemessen an der Yandex-Metrik versucht ein Viertel der Benutzer, von einem Telefon oder Tablet aus zu spielen, aber es stellt sich heraus, dass sie Schwierigkeiten haben. </li><li>  Entwicklung.  Alle Arbeiten werden an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub durchgef√ºhrt</a> .  Ich m√∂chte das Projekt weiterentwickeln, aber es ist schwierig, es alleine zu machen.  Die Pl√§ne beinhalten das Hinzuf√ºgen von Multiplayer, das Erstellen von Tags, Bewertungen und Filtern im Workshop sowie das Hinzuf√ºgen von Polygonen f√ºr eine physische Karte (Berge, Meere, Halbinseln).  Es gibt immer noch viele interessante Dinge, daher ist es eines der Ziele des Artikels, Gleichgesinnte zu finden.  Eine andere M√∂glichkeit besteht darin, zur Stiftung zu gehen, beispielsweise zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Python Software Foundation,</a> und einen Zuschuss zu erhalten. </li></ol><br>  Hier ist was im Moment ist.  Vielen Dank f√ºr das Lesen bis zum Ende!  Sie k√∂nnen hier spielen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">geopuzzle.org</a> , und den Quellcode auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> ansehen. <br><br><blockquote><img src="https://habrastorage.org/webt/jy/sd/rr/jysdrr7tqgfjt50wtcshw89ctho.png" align="left"><h3>  UFO Pflege Minute </h3><br>  Dieses Material kann zu widerspr√ºchlichen Gef√ºhlen f√ºhren. Aktualisieren Sie daher vor dem Schreiben eines Kommentars etwas Wichtiges in Ihrem Ged√§chtnis: <br><br><div class="spoiler">  <b class="spoiler_title">Wie man einen Kommentar schreibt und √ºberlebt</b> <div class="spoiler_text"><ul><li>  Schreiben Sie keine beleidigenden Kommentare, werden Sie nicht pers√∂nlich. </li><li>  Vermeiden Sie obsz√∂ne Sprache und toxisches Verhalten (auch in verschleierter Form). </li><li>  Um Kommentare zu melden, die gegen die Regeln der Website versto√üen, verwenden Sie die Schaltfl√§che "Melden" (falls verf√ºgbar) oder das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Feedback-Formular</a> . </li></ul><br>  Was tun, wenn: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">minus Karma</a> |  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gesperrtes Konto</a> <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Autorenkodex Habr</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habraetiket</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vollversion der Site-Regeln</a> </div></div></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427209/">https://habr.com/ru/post/de427209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427195/index.html">Morgen werden wir anfangen, dich zu t√∂ten, oder warum brauchen wir Ingenieure</a></li>
<li><a href="../de427199/index.html">Enge Bekanntschaft mit dem elektromechanischen Lochkartensortierer (Ausflug zum Beginn des 20. Jahrhunderts)</a></li>
<li><a href="../de427203/index.html">‚ÄûLeichte Musik‚Äú: Sprechen Sie √ºber vier ungew√∂hnliche elektronische Werkzeuge mit Fotozellen</a></li>
<li><a href="../de427205/index.html">Habrakvest zu Ehren des 20-j√§hrigen Jubil√§ums der Mail.Ru Group: Gewinner und Antworten</a></li>
<li><a href="../de427207/index.html">Rockstar-Mitarbeiter setzen sich nach Kritik an 100-Stunden-Arbeitswochen f√ºr das Unternehmen ein</a></li>
<li><a href="../de427211/index.html">Electron ist ein Flash f√ºr den Desktop</a></li>
<li><a href="../de427215/index.html">Microservices m√ºssen wachsen, nicht damit beginnen</a></li>
<li><a href="../de427217/index.html">Leistungsanalyse von WSGI-Servern: Teil Zwei</a></li>
<li><a href="../de427219/index.html">Nutzloses, nicht blockierendes Messaging in MPI: Lichtanalyse und Tutorial f√ºr diejenigen, die ein wenig "im Thema" sind</a></li>
<li><a href="../de427221/index.html">Was ich auf dem Weg zu meinem Traum von k√ºnstlicher Intelligenz realisiert habe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>