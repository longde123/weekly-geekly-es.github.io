<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÖ ‚õèÔ∏è üöØ Istio Service Mesh Beitr√§ge Serie üçã üë®‚Äçüíº üëßüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir starten eine Reihe von Beitr√§gen, in denen wir einige der vielen Funktionen des Istio Service Mesh in Verbindung mit Red Hat OpenShift und Kuberne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Istio Service Mesh Beitr√§ge Serie</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/481182/">  Wir starten eine Reihe von Beitr√§gen, in denen wir einige der vielen Funktionen des Istio Service Mesh in Verbindung mit Red Hat OpenShift und Kubernetes demonstrieren. <br><br><img src="https://habrastorage.org/webt/aw/mw/2u/awmw2uxurtsrtuxoo9ik40xk3vw.png" width="100%"><br><br>  Teil eins, heute: <br><br><ul><li>  Erl√§utern wir das Konzept der Kubernetes-Beiwagencontainer und formulieren das Leitmotiv dieser Postserie: <b>"Sie m√ºssen an Ihrem Code nichts √§ndern</b> . <b>"</b> </li><li>  Stellen Sie sich das Wesentliche vor - die Routing-Regeln von Istio.  Sie bilden alle anderen Funktionen von Istio, da Sie anhand der Regeln den Datenverkehr mithilfe der YAML-Dateien au√üerhalb des Dienstcodes an Microservices leiten k√∂nnen.  Wir betrachten auch das Bereitstellungsschema f√ºr Canary Deployment.  Neujahrsbonus - 10 interaktive Istio-Lektionen </li></ul><a name="habracut"></a><br>  <a href="https://habr.com/ru/company/redhatrussia/blog/483262/">Teil zwei</a> wird Ihnen sagen: <br><br><ul><li>  Wie Istio Pool Ejection in Verbindung mit Circuit Breaker implementiert und demonstriert, wie Istio einen defekten oder schlecht funktionierenden Pod aus dem Auswuchtschema entfernt. </li><li>  Und wir werden das Thema Leistungsschalter ab dem ersten Beitrag behandeln, wie Istio hier verwendet werden kann.  Wir zeigen, wie Datenverkehr weitergeleitet und Netzwerkfehler mithilfe der YAML-Konfigurationsdateien und Terminalbefehle behandelt werden, ohne dass sich der Servicecode √§ndert. </li></ul><br>  <a href="https://habr.com/ru/company/redhatrussia/blog/485136/">Dritter Teil</a> : <br><br><ul><li>  Eine Geschichte √ºber Nachverfolgung und √úberwachung, die bereits integriert sind oder Istio problemlos hinzugef√ºgt werden k√∂nnen.  Wir zeigen Ihnen, wie Sie Tools wie Prometheus, Jaeger und Grafana in Kombination mit der OpenShift-Skalierung verwenden, um Ihre Microservice-Architektur einfach zu verwalten. </li><li>  Wir gehen von der √úberwachung und Fehlerbehandlung √ºber und f√ºhren sie absichtlich in das System ein.  Mit anderen Worten, wir lernen, Fehler zu injizieren, ohne den Quellcode zu √§ndern, was aus Sicht des Tests sehr wichtig ist - denn wenn Sie den Code selbst √§ndern, besteht die Gefahr, dass zus√§tzliche Fehler eingef√ºgt werden. </li></ul><br>  Im <a href="https://habr.com/ru/company/redhatrussia/blog/487214/">letzten Beitrag</a> zum Istio Service Mesh: <br><br><ul><li>  Gehen wir weiter zur dunklen Seite.  Genauer gesagt werden wir lernen, das Dark-Launch-Schema zu verwenden, wenn der Code direkt auf Produktionsdaten implementiert und getestet wird, ohne jedoch den Betrieb des Systems zu beeintr√§chtigen.  Hier ist Istios F√§higkeit, Datenverkehr zu teilen, von Vorteil.  Und die M√∂glichkeit, Tests an Live-Produktionsdaten durchzuf√ºhren, ohne die Leistung des Kampfsystems zu beeintr√§chtigen, ist der √ºberzeugendste Weg, dies zu √ºberpr√ºfen. </li><li>  Ausgehend von Dark Launch werden wir zeigen, wie Sie mit dem Canary Deployment-Modell Risiken reduzieren und die Inbetriebnahme von neuem Code vereinfachen k√∂nnen.  Canary Deployment selbst ist keine Neuigkeit, aber mit Istio k√∂nnen Sie dieses Schema mit einfachen YAML-Dateien implementieren. </li><li>  Abschlie√üend zeigen wir, wie Sie mit Istio Egress den Zugriff auf Dienste f√ºr Benutzer au√üerhalb Ihrer Cluster erm√∂glichen, um die Funktionen von Istio bei der Arbeit mit dem Internet zu nutzen. </li></ul><br>  Also fing es an ... <br><br>  <b>Istio √úberwachungs- und Steuerungstools - alles, was Sie zum Koordinieren von Mikrodiensten im <a href="https://developers.redhat.com/topics/service-mesh/">Servicegitter</a> ben√∂tigen.</b> <br><br><h3>  Was ist das Istio-Servicenetz? </h3><br>  Ein Service-Grid implementiert Funktionen f√ºr eine Gruppe von Diensten, z. B. Verkehrs√ºberwachung, Zugriffskontrolle, Erkennung, Sicherheit, Fehlertoleranz und andere n√ºtzliche Dinge.  Mit Istio k√∂nnen Sie all dies tun, ohne den Code der Dienste selbst zu √§ndern.  Was ist das Geheimnis der Magie?  Istio bindet an jeden Service seinen Proxy in Form eines Sidecar-Containers (Sidecar ist ein Motorrad-Kinderwagen), wonach der gesamte Datenverkehr zu diesem Service √ºber einen Proxy geleitet wird, der anhand festgelegter Richtlinien entscheidet, wie, wann und ob dieser Datenverkehr den Service √ºberhaupt erreichen soll.  Mit Istio k√∂nnen auch fortgeschrittene DevOps-Techniken implementiert werden, z. B. kanarische Eins√§tze, Leistungsschalter, Fehlerinjektion und viele andere. <br><br><h3>  Wie Istio mit Containern und Kubernetes arbeitet </h3><br>  Das Istio-Service-Grid ist eine Sidecar-Implementierung von allem, was Sie zum Erstellen und Verwalten von Mikrodiensten ben√∂tigen: √úberwachung, Nachverfolgung, Leistungsschalter, Routing, Lastausgleich, Fehlerinjektion, Wiederholungsversuche, Zeit√ºberschreitung, Spiegelung, Zugriffskontrolle, Geschwindigkeitsbegrenzungen und vieles mehr eine andere.  Und obwohl es heutzutage viele Bibliotheken gibt, die diese Funktionen direkt im Code implementieren, k√∂nnen Sie mit Istio das Gleiche erreichen, ohne irgendetwas an Ihrem Code zu √§ndern. <br><br>  Nach dem Beiwagenmodell l√§uft Istio in einem Linux-Container, der sich im selben <a href="https://developers.redhat.com/topics/kubernetes/">Kubernetes-</a> Pod mit einem kontrollierten Dienst befindet und Funktionen und Informationen gem√§√ü einer bestimmten Konfiguration einspeist und extrahiert.  Wir betonen, dass dies Ihre eigene Konfiguration ist und sich au√üerhalb Ihres Codes befindet.  Daher wird der Code viel einfacher und k√ºrzer. <br><br>  Was noch wichtiger ist, die betriebliche Komponente von Microservices ist in diesem Fall in keiner Weise mit dem Code selbst verbunden, so dass ihr Betrieb sicher an IT-Spezialisten √ºbertragen werden kann.  In der Tat, warum sollte ein Entwickler f√ºr Leistungsschalter und Fehlerinjektion verantwortlich sein?  Reagieren - ja, aber verarbeiten und erstellen?  Wenn Sie all dies aus dem Code entfernen, k√∂nnen sich die Programmierer vollst√§ndig auf die Anwendungsfunktionalit√§t konzentrieren.  Und der Code selbst wird k√ºrzer und einfacher. <br><br><h3>  Servicenetz </h3><br>  Istio, das Mikroservice-Management-Funktionen au√üerhalb seines Codes implementiert, ist das Konzept des Service Mesh-Service-Grids.  Mit anderen Worten, es ist eine koordinierte Gruppe von einer oder mehreren Bin√§rdateien, die ein Netzwerk von Netzwerkfunktionen bilden. <br><br><h3>  So arbeitet Istio mit Microservices </h3><br>  So funktionieren die Beiwagencontainer in Verbindung mit <a href="https://developers.redhat.com/topics/kubernetes/">Kubernetes</a> und <a href="https://www.openshift.org/minishift/">Minishift</a> aus der Vogelperspektive: Starten Sie eine Instanz von Minishift, erstellen Sie ein Projekt f√ºr Istio (nennen wir es ‚Äûistio-system‚Äú), installieren Sie alle mit Istio zusammenh√§ngenden Komponenten und f√ºhren Sie sie aus.  F√ºgen Sie dann beim Erstellen von Projekten und Pods Konfigurationsinformationen zu Ihren Bereitstellungen hinzu, und Ihre Pods verwenden Istio.  Ein vereinfachtes Diagramm sieht folgenderma√üen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/do/5q/tgdo5qc7nwdm1ibalvf51_exd2q.png"></div><br><br>  Jetzt k√∂nnen Sie die Einstellungen von Istio √§ndern, um beispielsweise die Fehlerinjektion, die Unterst√ºtzung f√ºr <a href="https://istio.io/blog/2017/0.1-canary.html">Canary Deployment</a> oder andere Funktionen von Istio zu organisieren, ohne den Code der Anwendungen selbst zu ber√ºhren.  Angenommen, Sie m√∂chten den gesamten Webdatenverkehr von Benutzern Ihres gr√∂√üten Kunden (Foo Corporation) auf eine neue Version der Site umleiten.  Dazu erstellen Sie einfach eine Istio-Routing-Regel, die in der Benutzer-ID nach @ foocorporation.com sucht, und f√ºhren die entsprechende Umleitung durch.  F√ºr alle anderen Benutzer √§ndert sich nichts.  In der Zwischenzeit testen Sie ruhig die neue Version der Website.  Beachten Sie, dass Sie daf√ºr keine Entwickler gewinnen m√ºssen. <br><br><h3>  Und daf√ºr m√ºssen Sie teuer bezahlen? </h3><br>  Gar nicht.  Istio arbeitet ziemlich schnell, es ist in <a href="https://golang.org/">Go geschrieben</a> und erzeugt einen sehr kleinen Overhead.  Dar√ºber hinaus wird ein m√∂glicher Verlust an Online-Produktivit√§t durch eine Steigerung der Entwicklerproduktivit√§t ausgeglichen.  Zumindest theoretisch: Vergessen Sie nicht, dass Entwicklungszeit teuer ist.  Was die Softwarekosten angeht, so handelt es sich bei Istio um Open-Source-Software, die Sie kostenlos herunterladen und verwenden k√∂nnen. <br><br><h3>  Lernen Sie selbst </h3><br>  Das Red Hat Developer Experience Team hat einen ausf√ºhrlichen praktischen <a href="https://github.com/redhat-developer-demos/istio-tutorial">Leitfaden</a> f√ºr Istio (in englischer Sprache) entwickelt.  Es l√§uft unter Linux, MacOS und Windows, und der Code ist in Java und Node.js enthalten. <br><br><h3>  10 interaktive Lektionen zu Istio </h3><br><h4>  Block 1 - F√ºr Anf√§nger </h4><br>  <b>Einf√ºhrung in Istio</b> <br>  30 Minuten <br>  Wir machen uns mit Service Mesh vertraut und lernen, wie man Istio im Kubernetes OpenShift-Cluster installiert. <br>  <a href="https://developers.redhat.com/courses/service-mesh/istio-introduction/">Fangen Sie an</a> <br><br>  <b>Bereitstellen von Microservices in Istio</b> <br>  30 Minuten <br>  Wir verwenden Istio, um drei Microservices mit Spring Boot und Vert.x bereitzustellen. <br>  <a href="https://developers.redhat.com/courses/service-mesh/deploy-microservices/">Fangen Sie an</a> <br><br><h4>  Block 2 - Mittelstufe </h4><br>  <b>√úberwachung und Verfolgung in Istio</b> <br>  60 Minuten <br>  Wir untersuchen Istios integrierte √úberwachungstools, benutzerdefinierte Metriken und OpenTracing √ºber Prometheus und Grafana. <br>  <a href="https://developers.redhat.com/courses/service-mesh/monitoring-tracing/">Fangen Sie an</a> <br><br>  <b>Einfaches Routing in Istio</b> <br>  60 Minuten <br>  Erfahren Sie, wie Sie das Routing in Istio mit einfachen Regeln verwalten. <br>  <a href="https://developers.redhat.com/courses/service-mesh/simple-route-rules/">Fangen Sie an</a> <br><br>  <b>Erweiterte Routing-Regeln</b> <br>  60 Minuten <br>  Einf√ºhrung von intelligentem Istio-Routing, Zugriffskontrolle, Lastenausgleich und Geschwindigkeitsbegrenzung. <br>  <a href="https://developers.redhat.com/courses/service-mesh/advanced-routerules/">Fangen Sie an</a> <br><br><h4>  Block 3 - Fortgeschrittener Benutzer </h4><br>  <b>Fehlereinspritzung in Istio</b> <br>  60 Minuten <br>  Wir untersuchen Failover-Szenarien in verteilten Anwendungen, verursachen HTTP-Fehler und Netzwerkverz√∂gerungen und lernen, wie Sie mit Chaos Engineering die Umgebung wiederherstellen. <br>  <a href="https://developers.redhat.com/courses/service-mesh/fault-injection/">Fangen Sie an</a> <br><br>  <b>Leistungsschalter bei Istio</b> <br>  30 Minuten <br>  Installieren Sie Sie Siege f√ºr Stresstest-Sites und erfahren Sie, wie Sie die Ausfallsicherheit des Backends durch Wiederholungen, Leistungsschalter und Pool-Auswurf verbessern. <br>  <a href="https://developers.redhat.com/courses/service-mesh/circuit-breaker/">Fangen Sie an</a> <br><br>  <b>Egress und Istio</b> <br>  10 Minuten <br>  Wir verwenden die Egress-Routen, um Regeln f√ºr die Interaktion interner Services mit externen APIs und Services zu erstellen. <br>  <a href="https://developers.redhat.com/courses/service-mesh/egress/">Fangen Sie an</a> <br><br>  <b>Istio und Kiali</b> <br>  15 Minuten <br>  Wir lernen, mit Kiali ein allgemeines Bild des Service-Grids zu erhalten und den Fluss von Anfragen und Daten zu untersuchen. <br>  <a href="https://developers.redhat.com/courses/service-mesh/observe-kiali/">Fangen Sie an</a> <br><br>  Gegenseitiges TLS in Istio <br>  15 Minuten <br>  Wir erstellen Istio Gateway und VirtualService und untersuchen dann detailliert das gegenseitige TLS (mTLS) und seine Einstellungen. <br>  <a href="https://developers.redhat.com/courses/service-mesh/mtls/">Fangen Sie an</a> <br><br><h4>  Block 3.1 - Tiefes Eintauchen: Istio Service Mesh f√ºr Microservices </h4><br><img src="https://habrastorage.org/webt/ng/eu/w5/ngeuw5-icu_9p74agioj4huuqoa.png" align="left" width="35%"><br>  √úber was das Buch: <br><ul><li>  Was ist ein Servicegitter? </li><li>  Das Istio-System und seine Rolle in der Microservice-Architektur. </li><li>  Verwenden von Istio zur L√∂sung der folgenden Probleme: <br><ul><li>  Fehlertoleranz; </li><li>  Routing </li><li>  Chaostests; </li><li>  Sicherheit; </li><li>  Telemetriesammlung mit Tracing, Metriken und Grafana. </li></ul><br></li></ul><br>  <a href="https://developers.redhat.com/books/introducing-istio-service-mesh-microservices/">Buch herunterladen</a> <br><br><h3>  Artikelserie zu Service Grids und Istio </h3><br><ul><li>  <a href="https://developers.redhat.com/blog/2018/03/13/istio-route-rules-service-requests/">Istio-Routing-Regeln: Wir leiten Serviceanfragen dorthin, wo wir sie ben√∂tigen</a> </li><li>  <a href="https://developers.redhat.com/blog/2018/03/20/istio-circuit-breaker-pool-ejection/">Leistungsschalter bei Isio: Handhabung des Poolauswurfs</a> </li><li>  <a href="https://developers.redhat.com/blog/2018/03/27/istio-circuit-breaker-when-failure-is-an-option/">Istios Leistungsschalter: Wenn ein Ausfall eine Option ist</a> </li><li>  <a href="https://developers.redhat.com/blog/2018/04/03/istio-tracing-monitoring/">Verfolgung und √úberwachung in Istio: Wo sich alles bewegt und wie schnell</a> </li><li>  <a href="https://developers.redhat.com/blog/2018/04/10/istio-chaos-engineering/">Chaos Engineering bei Istio: Es wurde konzipiert</a> </li><li>  <a href="https://developers.redhat.com/blog/2018/04/17/istio-dark-launch-secret-services/">Dark Launch bei Istio: Secret Services</a> </li><li>  <a href="https://developers.redhat.com/blog/2018/04/24/istio-smart-canary-launch/">Canary Deployment bei Istio: Vereinfachung der Inbetriebnahme</a> </li><li>  <a href="https://developers.redhat.com/blog/2018/05/01/istio-egress-exit-through-the-gift-shop/">Istio Egress: Ausfahrt durch den Souvenirshop</a> </li></ul><br><h3>  Probieren Sie es aus </h3><br>  Diese Postenserie soll nicht zu einem tiefen Eintauchen in die Welt von Istio f√ºhren.  Wir m√∂chten Ihnen nur das Konzept selbst vorstellen und Sie vielleicht dazu inspirieren, Istio selbst auszuprobieren.  Dies ist v√∂llig kostenlos und Red Hat bietet alle notwendigen Tools, um OpenShift, Kubernetes, Linux-Container und Istio kennenzulernen: <a href="https://www.openshift.com/products/container-platform/trial/">Red Hat Developer OpenShift Container Platform</a> , <a href="https://github.com/redhat-developer-demos/istio-tutorial">unseren Istio-Leitfaden</a> und andere Ressourcen auf unserer <a href="https://github.com/redhat-developer-demos/istio-tutorial">Microsite</a> <a href="https://developers.redhat.com/topics/service-mesh/">unter Service Mesh</a> .  Nicht aufschieben, noch heute anfangen! <br><br><h3>  Istio-Routing-Regeln: Wir leiten Serviceanfragen dorthin, wo wir sie ben√∂tigen </h3><br>  <a href="https://developers.redhat.com/products/openshift/overview/">OpenShift</a> und <a href="https://developers.redhat.com/topics/kubernetes/">Kubernetes</a> <a href="https://developers.redhat.com/products/openshift/overview/">leiten</a> <a href="https://developers.redhat.com/topics/microservices/">Microservice-</a> Aufrufe hervorragend an die richtigen Pods weiter.  Dies ist eines der Ziele von Kubernetes - Routing und Load Balancing.  Was aber, wenn Sie ein feineres und ausgefeilteres Routing ben√∂tigen?  Zum Beispiel, um zwei Versionen eines Mikrodienstes gleichzeitig zu verwenden.  Wie helfen die Istio-Routenregeln hier? <br><br>  Routing-Regeln sind Regeln, die tats√§chlich die Wahl der Route bestimmen.  Auf jeder Ebene der Systemkomplexit√§t bleibt das allgemeine Funktionsprinzip dieser Regeln einfach: Anforderungen werden basierend auf bestimmten Parametern und HTTP-Headerwerten weitergeleitet. <br>  Schauen wir uns Beispiele an: <br><br><h3>  Kubernetes default: trivial "50 to 50" </h3><br>  In unserem Beispiel zeigen wir, wie zwei Versionen des Mikrodienstes in OpenShift gleichzeitig verwendet werden. Nennen wir sie v1 und v2.  Jede Version l√§uft in einem eigenen Kubernetes-Pod und arbeitet standardm√§√üig mit gleichm√§√üigem Round-Robin-Routing.  Jeder Pod erh√§lt seinen Anteil an Anforderungen nach der Anzahl seiner Mikroservice-Instanzen, dh der Replikate.  Mit Istio k√∂nnen Sie diesen Kontostand auch manuell √§ndern. <br><br>  Angenommen, wir haben zwei Versionen unseres Empfehlungsdienstes auf OpenShift bereitgestellt, Empfehlung-v1 und Empfehlung-v2. <br>  In Abb.  Abbildung 1 zeigt, dass, wenn jeder Dienst in einer Instanz dargestellt wird, die Anforderungen gleichm√§√üig zwischen ihnen abgewechselt werden: 1-2-1-2- ... So funktioniert das Routing von Kubernetes standardm√§√üig: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7z/my/sb/7zmysbky9edajmrd7g8cuc1n4vs.png"></div><br><br><h3>  Gewichtete Verteilung zwischen den Versionen </h3><br>  In Abb.  Abbildung 2 zeigt, was passiert, wenn Sie die Anzahl der v2-Dienstreplikationen von eins auf zwei erh√∂hen (dies erfolgt mit dem Befehl oc scale --replicas = 2 deployment / recommended-v2).  Wie Sie sehen, sind die Anforderungen zwischen v1 und v2 jetzt in eine Eins-zu-Drei-Beziehung unterteilt: 1-2-2-1-2-2-2- ...: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/iw/r-/_b/iwr-_bep68fipt56luimyij8xta.png"></div><br><br><h3>  Ignoriere die Version mit Istio </h3><br>  Mit Istio ist es einfach, die Verteilung von Abfragen nach Bedarf zu √§ndern.  Senden Sie beispielsweise den gesamten Datenverkehr nur mit der folgenden Istio-Yaml-Datei an Recommendation-v1: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/er/w-/mn/erw-mn6zqj5ii7sve6igiduibdu.png"></div><br><br>  Hierbei ist zu beachten: Die Schoten werden entsprechend der Beschriftung ausgew√§hlt.  In unserem Beispiel wird das Label v1 verwendet.  Der Parameter ‚Äûweight: 100‚Äú bedeutet, dass 100% des Datenverkehrs an alle Pods des Dienstes weitergeleitet werden, die das Label v1 haben. <br><br><h3>  Verzeichnisverteilung zwischen Versionen (Canary Deployment) </h3><br>  Mithilfe des weight-Parameters k√∂nnen Sie den Datenverkehr zu beiden Pods leiten und dabei die Anzahl der in jedem Pod ausgef√ºhrten Microservice-Instanzen ignorieren.  In diesem Beispiel leiten wir 90% des Datenverkehrs an v1 und 10% an v2 weiter: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/to/9v/wu/to9vwuxzwvwf9_nq-64gtmx-c-a.png"></div><br><br><h3>  Separates Routing f√ºr mobile Benutzer </h3><br>  Abschlie√üend wird gezeigt, wie der Datenverkehr mobiler Benutzer zum v2-Dienst und der gesamte Rest zum v1-Dienst gezwungen werden kann.  Dazu analysieren wir mit regul√§ren Ausdr√ºcken den Wert von user-agent im Anforderungsheader: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kf/iq/zy/kfiqzyi0vlq1ohvytxtevjtpl4s.png"></div><br><br><h3>  Jetzt sind Sie dran </h3><br>  Ein Beispiel mit regul√§ren Ausdr√ºcken zum Analysieren von Headern sollte Sie dazu motivieren, nach eigenen Optionen f√ºr die Anwendung von Istio-Routing-Regeln zu suchen.  Dar√ºber hinaus sind die M√∂glichkeiten hier sehr umfangreich, da die Werte der Header im Quellcode der Anwendungen gebildet werden k√∂nnen. <br><br><h3>  Und denk dran, Ops, nicht Dev </h3><br>  Alles, was wir in den obigen Beispielen gezeigt haben, geschieht ohne die geringsten √Ñnderungen im Quellcode, au√üer in den F√§llen, in denen es notwendig ist, spezielle Anforderungsheader zu bilden.  Istio wird sowohl Entwicklern von Nutzen sein, die es beispielsweise in der Testphase einsetzen k√∂nnen, als auch Spezialisten f√ºr den Betrieb von IT-Systemen, die er in der Produktion ma√ügeblich unterst√ºtzen wird. <br><br>  Wiederholen <b>wir also</b> das Leitmotiv dieser Reihe von Beitr√§gen: <b>Sie m√ºssen nichts an Ihrem Code √§ndern</b> .  Sie m√ºssen keine neuen Bilder sammeln oder neue Container starten.  All dies wird au√üerhalb des Codes implementiert. <br><br><h3>  Schalten Sie die Fantasie ein </h3><br>  Stellen Sie sich die Perspektiven der √úberschriftenanalyse mit regul√§ren Ausdr√ºcken vor.  M√∂chten Sie Ihren gr√∂√üten Kunden auf eine spezielle Version Ihrer <a href="https://developers.redhat.com/topics/microservices/">Microservices</a> umleiten?  Einfach!  Ben√∂tigen Sie eine separate Version f√ºr den Chrome-Browser?  Kein Problem!  Sie k√∂nnen den Verkehr nach fast allen Merkmalen leiten. <br><br><h3>  Probieren Sie es aus </h3><br>  √úber Istio, Kubernetes und OpenShift zu lesen ist eine Sache, aber warum nicht mit eigenen H√§nden anfassen?  Das <a href="https://developers.redhat.com/">Red Hat Developer Program-</a> Team hat ein detailliertes Handbuch (in englischer Sprache) erstellt, mit dessen Hilfe Sie diese Technologien schnell beherrschen k√∂nnen.  Das Handbuch ist ebenfalls zu 100% Open Source und daher √∂ffentlich verf√ºgbar.  Die Datei funktioniert unter MacOS, Linux und Windows, und der Quellcode ist in Versionen in Java und node.js (Versionen in anderen Sprachen werden bald verf√ºgbar sein).  √ñffnen Sie einfach das entsprechende <a href="https://github.com/redhat-developer-demos/istio-tutorial">Red Hat Developer Demo-</a> Git-Repository in Ihrem Browser. <br><br><h3>  Im n√§chsten Beitrag: Wir arbeiten die Probleme sch√∂n aus </h3><br>  Heute haben Sie gesehen, wozu Istios Routing-Regeln in der Lage sind.  Stellen Sie sich nun dasselbe vor, aber nur in Bezug auf die Fehlerbehandlung.  Dar√ºber werden wir im n√§chsten Beitrag sprechen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481182/">https://habr.com/ru/post/de481182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481172/index.html">Starkes KI-Modell</a></li>
<li><a href="../de481174/index.html">Die 10 h√§ufigsten Fehler in C # -Projekten im Jahr 2019</a></li>
<li><a href="../de481176/index.html">Kuriere Yandex.Food and Delivery Club brauchen eine Gewerkschaft</a></li>
<li><a href="../de481178/index.html">Top 10 Bugs in C # -Projekten f√ºr 2019</a></li>
<li><a href="../de481180/index.html">M√ºssen Entwickler Vorschl√§ge von Benutzern erhalten?</a></li>
<li><a href="../de481184/index.html">Die 10 h√§ufigsten Fehler in Java-Projekten im Jahr 2019</a></li>
<li><a href="../de481186/index.html">Top 10 Bugs in Java-Projekten f√ºr 2019</a></li>
<li><a href="../de481188/index.html">Die 10 h√§ufigsten Fehler in C ++ - Projekten im Jahr 2019</a></li>
<li><a href="../de481190/index.html">Top 10 Bugs in C ++ Projekten f√ºr 2019</a></li>
<li><a href="../de481200/index.html">Sprachsteuerung und VoiceOver: So passen Sie die Anwendung f√ºr Blinde oder Standbilder an</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>