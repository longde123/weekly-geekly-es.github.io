<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЩЛя╕П ЁЯШ│ ЁЯИ╕ Terraform рдкреНрд░рджрд╛рддрд╛ рдЪрдпрдирдХрд░реНрддрд╛ ЁЯСЖЁЯП╝ ЁЯСиЁЯП╜тАНЁЯПл ЁЯТГЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рдордиреЗ Selectel рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдзрд┐рдХрд╛рд░рд┐рдХ Terraform рдкреНрд░рджрд╛рддрд╛ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ред рдпрд╣ рдЙрддреНрдкрд╛рдж рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░-рдП-рдХреЛрдб рдкрджреНрдзрддрд┐ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдВрд╕рд╛рдз...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Terraform рдкреНрд░рджрд╛рддрд╛ рдЪрдпрдирдХрд░реНрддрд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/445162/"><img src="https://habrastorage.org/webt/yf/si/pf/yfsipfz7j0lfweuvzxwwqzqr94a.png"><br><br>  рд╣рдордиреЗ Selectel рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдзрд┐рдХрд╛рд░рд┐рдХ Terraform рдкреНрд░рджрд╛рддрд╛ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ред  рдпрд╣ рдЙрддреНрдкрд╛рдж рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░-рдП-рдХреЛрдб рдкрджреНрдзрддрд┐ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдмрдВрдзрди рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><a name="habracut"></a><br>  рд╡рд░реНрддрдорд╛рди рдореЗрдВ, рдкреНрд░рджрд╛рддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреНрд▓рд╛рдЙрдб рд╕рд░реНрд╡рд┐рд╕</a> рдХреЗ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдмрдВрдзрди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ (рдмрд╛рдж рдореЗрдВ рдЗрд╕реЗ VPC рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрджрд░реНрднрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред  рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рд╣рдо рдЗрд╕реЗ рд╕реЗрд▓реЗрд▓ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХреА рдЧрдИ рдЕрдиреНрдп рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдмрдВрдзрди рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВред <br><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрд╛рдирддреЗ рд╣реИрдВ, рд╡реАрдкреАрд╕реА рд╕реЗрд╡рд╛ рдУрдкрдирд╕реНрдЯреИрдХ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдУрдкрдирд╕реНрдЯреИрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреНрд▓рд╛рдЙрдб рд╕рд░реНрд╡рд┐рд╕рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рджреЗрд╢реА рдЙрдкрдХрд░рдг рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд╣рдордиреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдПрдкреАрдЖрдИ рдХреЗ рдПрдХ рд╕реЗрдЯ рдореЗрдВ рд▓рд╛рдкрддрд╛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИ рдЬреЛ рдЬрдЯрд┐рд▓ рд╕рдордЧреНрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЛ рд╕рд░рд▓ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХрд╛рдо рдХреЛ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛рддрд╛ рд╣реИред  рдУрдкрдирд╕реНрдЯреИрдХ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдкреНрд░рддреНрдпрдХреНрд╖ рдЙрдкрдпреЛрдЧ рд╕реЗ рдмрдВрдж рд╣реИ, рд▓реЗрдХрд┐рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рд╣рдорд╛рд░реЗ рдПрдкреАрдЖрдИ рдХреЗ</a> рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд▓рдн <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рд╣реИ</a> ред <br><br>  рдЪрдпрдирдХрд░реНрддрд╛ рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо рдкреНрд░рджрд╛рддрд╛ рдЕрдм рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд VPC рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдФрд░ рдЙрдирдХреЗ рдХреЛрдЯрд╛; </li><li>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рдЙрдирдХреА рднреВрдорд┐рдХрд╛рдПрдВ рдФрд░ рдЯреЛрдХрди; </li><li>  рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╕рдмрдиреЗрдЯ, рдЬрд┐рд╕рдореЗрдВ рдХреНрд░реЙрд╕-рдХреНрд╖реЗрддреНрд░реАрдп рдФрд░ рд╡реАрдЖрд░рдЖрд░рдкреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВ; </li><li>  рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд▓рд╛рдЗрд╕реЗрдВрд╕ред </li></ul><br>  рдкреНрд░рджрд╛рддрд╛ рд╡реАрдкреАрд╕реА рдПрдкреАрдЖрдИ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реА рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЧреЛ-рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдФрд░ рдкреНрд░рджрд╛рддрд╛ рджреЛрдиреЛрдВ рд╣реА рдУрдкрди-рд╕реЛрд░реНрд╕ рд╣реИрдВ, рдЗрдиреНрд╣реЗрдВ рдЬреАрдердм рдкрд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЧреЛ- selvpcclient</a> рдкреБрд╕реНрддрдХрд╛рд▓рдп рднрдВрдбрд╛рд░, </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">Terraform- рдкреНрд░рджрд╛рддрд╛ рдЪрдпрдирдХрд░реНрддрд╛ рдкреНрд░рджрд╛рддрд╛</a> рд░рд┐рдкреЙрдЬрд┐рдЯрд░реАред </li></ul><br>  рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди, рдбрд┐рд╕реНрдХ, рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдЬреИрд╕реЗ рдЕрдиреНрдп рдХреНрд▓рд╛рдЙрдб рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдУрдкрдирд╕реНрдЯреИрдХ рдЯреЗрд░реАрдлрд╝реЙрд░реНрдо рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рджреЛрдиреЛрдВ рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рджрд╕реНрддрд╛рд╡реЗрдЬ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд▓рд┐рдВрдХ рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ: <br><br><ul><li>  рдЪрдпрдирдХрд░реНрддрд╛ рд╕рдВрд╕рд╛рдзрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЯреЗрд░рд╛рдлреЙрд░реНрдо-рдкреНрд░рджрд╛рддрд╛ рдЪрдпрдирдХрд░реНрддрд╛</a> , </li><li>  рдУрдкрдирд╕реНрдЯреИрдХ рд░рд┐рд╕реЛрд░реНрд╕ рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener noreferrer">рдЯреЗрд░рд╛рдлреЙрд░реНрдо-рдкреНрд░реЛрд╡рд╛рдЗрдбрд░ рдУрдкрдирд╕реНрдЯреИрдХ</a> ред </li></ul><br><h2>  рд╢реБрд░реБрдЖрдд рд╣реЛ рд░рд╣реА рд╣реИ </h2><br>  рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдкреИрдХреЗрдЬ рдХреЗ рдирд┐рд░реНрджреЗрд╢ рдФрд░ рд▓рд┐рдВрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener noreferrer">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╡реЗрдмрд╕рд╛рдЗрдЯ</a> рдкрд░ рдкрд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ)ред <br><br>  рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░рджрд╛рддрд╛ рдХреЛ Selectel API рдХреБрдВрдЬреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдпрдВрддреНрд░рдг рдХрдХреНрд╖</a> рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд╣реИред <br><br>  рд╕реЗрд▓реЗрдХреНрдЯ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдирд┐рдлрд╝реЗрд╕реНрдЯ рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрд╛ рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рдПрдХ рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рд╣рдорд╛рд░реЗ рдЧрд┐рдереВрдм рднрдВрдбрд╛рд░ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЯреЗрд░рд╛рдлреЙрд░реНрдо-рдЙрджрд╛рд╣рд░рдг</a> ред <br><br>  рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рднрдВрдбрд╛рд░ рджреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рд╣реИ: <br><br><ul><li>  <strong>рдореЙрдбреНрдпреВрд▓</strong> , рдЫреЛрдЯреЗ рдкреБрди: рдкреНрд░рдпреЛрдЬреНрдп рдореЙрдбреНрдпреВрд▓ рдпреБрдХреНрдд рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗрдЯ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╣реИрдВ; </li><li>  <strong>рдЙрджрд╛рд╣рд░рдг</strong> , рдЖрдкрд╕ рдореЗрдВ рдЬреБрдбрд╝реЗ рдореЙрдбреНрдпреВрд▓ рдХреЗ рдПрдХ рдкреВрд░реНрдг рд╕реЗрдЯ рдХреЗ рдЙрджрд╛рд╣рд░рдгред </li></ul><br>  рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдПрдХ рд╕реЗрд▓реЗрдмрд▓ рдПрдкреАрдЖрдИ рдХреБрдВрдЬреА рдмрдирд╛рдиреЗ рдФрд░ рдЙрджрд╛рд╣рд░рдгреЛрдВ рд╕реЗ рдЦреБрдж рдХреЛ рдкрд░рд┐рдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рдУрд░ рдмрдврд╝рддреЗ рд╣реИрдВред <br><br><h2>  рдПрдХ рд╕реНрдерд╛рдиреАрдп рдбрд┐рд╕реНрдХ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд░реНрд╡рд░ рдмрдирд╛рдиреЗ рдХрд╛ рдЙрджрд╛рд╣рд░рдг </h2><br>  рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ, рдПрдХ рднреВрдорд┐рдХрд╛ рд╡рд╛рд▓рд╛ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдПрдХ рд╕реНрдерд╛рдиреАрдп рдбрд┐рд╕реНрдХ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЯреЗрд░рд╛рдлреЙрд░реНрдо-рдЙрджрд╛рд╣рд░рдг / рдЙрджрд╛рд╣рд░рдг / vpc / server_local_root_disk</a> ред <br><br>  <strong>Vars.tf</strong> рдлрд╝рд╛рдЗрд▓ рдЙрди рд╕рднреА рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреА рд╣реИ рдЬреЛ рдореЙрдбреНрдпреВрд▓ рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╕рдордп рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред  рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕рд░реНрд╡рд░ рдирд┐рдореНрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде <strong>ru-3a</strong> рдЬрд╝реЛрди рдореЗрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><pre><code class="bash hljs">variable <span class="hljs-string"><span class="hljs-string">"server_vcpus"</span></span> { default = 4 } variable <span class="hljs-string"><span class="hljs-string">"server_ram_mb"</span></span> { default = 8192 } variable <span class="hljs-string"><span class="hljs-string">"server_root_disk_gb"</span></span> { default = 8 } variable <span class="hljs-string"><span class="hljs-string">"server_image_name"</span></span> { default = <span class="hljs-string"><span class="hljs-string">"Ubuntu 18.04 LTS 64-bit"</span></span> }</code> </pre> <br>  <b>Main.tf</b> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, Selectel рдкреНрд░рджрд╛рддрд╛ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">provider <span class="hljs-string"><span class="hljs-string">"selectel"</span></span> { token = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.sel_token}</span></span></span><span class="hljs-string">"</span></span> }</code> </pre><br>  рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ SSH рдХреБрдВрдЬреА рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рднреА рд╣реИ рдЬреЛ рд╕рд░реНрд╡рд░ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><pre> <code class="bash hljs">module <span class="hljs-string"><span class="hljs-string">"server_local_root_disk"</span></span> { ... server_ssh_key = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${file("~/.ssh/id_rsa.pub")}</span></span></span><span class="hljs-string">"</span></span> }</code> </pre><br>  рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЖрдк рдПрдХ рдЕрд▓рдЧ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреБрдВрдЬреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХреБрдВрдЬреА рдХреЛ рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдкрде рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЖрдк рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдореВрд▓реНрдп рднреА рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЖрдЧреЗ <strong>Project_with_user</strong> рдФрд░ <strong>server_local_root_disk</strong> рдореЙрдбреНрдпреВрд▓ рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рдЬреЛ рдЖрд╡рд╢реНрдпрдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╣реИрдВред <br><br>  рд╣рдо рдЗрди рдореЙрдбреНрдпреВрд▓реЛрдВ рдХрд╛ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВрдЧреЗред <br><br><h3>  рдПрдХ рднреВрдорд┐рдХрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдирд╛ </h3><br>  рдкрд╣рд▓рд╛ рдореЙрдбреНрдпреВрд▓ рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдФрд░ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдПрдХ рднреВрдорд┐рдХрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рддрд╛ рд╣реИ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЯреЗрд░рд╛рдлреЙрд░реНрдо-рдЙрджрд╛рд╣рд░рдг / рдореЙрдбреНрдпреВрд▓ / vpc / project_with_user</a> ред <br><br>  рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдУрдкрдирд╕реНрдЯреИрдХ рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд░рдиреЗ рдФрд░ рдЕрдкрдиреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ред  рдореЙрдбреНрдпреВрд▓ рд╕рд░рд▓ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рддреАрди рд╕рдВрд╕реНрдерд╛рдУрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  selectel_vpc_project_v2, </li><li>  selectel_vpc_user_v2, </li><li>  selectel_vpc_role_v2ред </li></ul><br><h3>  рдПрдХ рд╕реНрдерд╛рдиреАрдп рдбрд┐рд╕реНрдХ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рд╕рд░реНрд╡рд░ рдмрдирд╛рдирд╛ </h3><br>  рджреВрд╕рд░рд╛ рдореЙрдбреНрдпреВрд▓ рдУрдкрдирд╕реНрдЯреИрдХ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдПрдХ рд╕реНрдерд╛рдиреАрдп рдбрд┐рд╕реНрдХ рдХреЗ рд╕рд╛рде рд╕рд░реНрд╡рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><br>  рдЖрдкрдХреЛ рдХреБрдЫ рдРрд╕реЗ рддрд░реНрдХреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рдЗрд╕ рдореЙрдбреНрдпреВрд▓ рдореЗрдВ <strong>рдУрдкрдирд╕реНрдЯреИрдХ_рдХрдВрдкреНрдпреВрдЯ_рд╕реНрдЯреЗрдВрд╕_рдЯреАрд╡реА 2 рдХреЗ</strong> рд▓рд┐рдП рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">resource <span class="hljs-string"><span class="hljs-string">"openstack_compute_instance_v2"</span></span> <span class="hljs-string"><span class="hljs-string">"instance_1"</span></span> { ... lifecycle { ignore_changes = [<span class="hljs-string"><span class="hljs-string">"image_id"</span></span>] } vendor_options { ignore_resize_confirmation = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre><br>  <strong>Ign_changes</strong> рддрд░реНрдХ <strong>рдЖрдкрдХреЛ</strong> рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдЫрд╡рд┐ рдХреЗ рд▓рд┐рдП <strong>рдЖрдИрдбреА</strong> рд╡рд┐рд╢реЗрд╖рддрд╛ рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╡реАрдкреАрд╕реА рд╕реЗрд╡рд╛ рдореЗрдВ, рдЕрдзрд┐рдХрд╛рдВрд╢ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЫрд╡рд┐рдпрд╛рдВ рд╕рдкреНрддрд╛рд╣ рдореЗрдВ рдПрдХ рдмрд╛рд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рдХреА рдЬрд╛рддреА рд╣реИрдВ, рдФрд░ рдЙрдирдХреА <strong>рдЖрдИрдбреА</strong> рднреА рдмрджрд▓ рдЬрд╛рддреА рд╣реИред  рдпрд╣ OpenStack - Glance рдШрдЯрдХ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдХрд╛рд░рдг рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЫрд╡рд┐рдпреЛрдВ рдХреЛ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдирд┐рдХрд╛рдп рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдпрджрд┐ рдХрд┐рд╕реА рдореМрдЬреВрджрд╛ рд╕рд░реНрд╡рд░ рдпрд╛ рдбрд┐рд╕реНрдХ рдХреЛ рдмрдирд╛рдпрд╛ рдпрд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЫрд╡рд┐ рдХреА <strong>рдЖрдИрдбреА</strong> рдХреЛ <strong>image_id</strong> рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЗрд╕ рдЫрд╡рд┐ рдХреЗ рдЕрдкрдбреЗрдЯ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, <strong>рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо</strong> рдореЗрдирд┐рдлрд╝реЗрд╕реНрдЯ рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░рдиреЗ рд╕реЗ рд╕рд░реНрд╡рд░ рдпрд╛ рдбрд┐рд╕реНрдХ рдХреЛ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  <strong>Ign_changes</strong> рддрд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдЗрд╕ рд╕реНрдерд┐рддрд┐ рд╕реЗ рдмрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  <em>рдиреЛрдЯ:</em> <strong><em>ign_changes рдХрд╛</em></strong> <em>рддрд░реНрдХ</em> <em>рдХрд╛рдлреА рд╕рдордп рдкрд╣рд▓реЗ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдореЗрдВ рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ рдерд╛:</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer"># 2525 рдХреЛ рдЦреАрдВрдЪреЗрдВ</a> <em>ред</em> <br><br>  рд╕реНрдерд╛рдиреАрдп рдбрд┐рд╕реНрдХ, рдХреЛрд░ рдпрд╛ рд╕рд░реНрд╡рд░ рдореЗрдореЛрд░реА рдХреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЖрдХрд╛рд░ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП <strong>ign_resize_confirmation</strong> рддрд░реНрдХ <strong>рдХреА</strong> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдмрджрд▓рд╛рд╡ OpenStack Nova рдШрдЯрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЬреЛ <b>рд░рд┐рд╕рд╛рдЗрдЬрд╝</b> рдЕрдиреБрд░реЛрдз рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдиреЛрд╡рд╛ рдПрдХ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХреЗ рдмрд╛рдж рд╕рд░реНрд╡рд░ рдХреЛ <b>рд╡реЗрд░рд┐рдлрд╛рдЗ_рд░рд╛рдЗрдЬрд╝</b> рд╕реНрдЯреЗрдЯрд╕ рдореЗрдВ рдбрд╛рд▓ рджреЗрддрд╛ рд╣реИ рдФрд░ рдпреВрдЬрд╝рд░ рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдкреБрд╖реНрдЯрд┐ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдиреЛрд╡рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░реНрдпреЛрдВ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рди рдХрд░реЗрдВред <br><br>  рдирд┐рд░реНрджрд┐рд╖реНрдЯ рддрд░реНрдХ Terraform рдХреЛ рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП <b>Ver_resize</b> рд╕реНрдерд┐рддрд┐ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдирд╣реАрдВ рдХрд░рдиреЗ рджреЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рдмрд╛рдж рд╕рд░реНрд╡рд░ рдХреЛ рд╕рдХреНрд░рд┐рдп рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд░рд╣рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рддрд░реНрдХ OpenStack рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд╕рдВрд╕реНрдХрд░рдг 1.10.0 рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реИ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer"># 422 рдХреЛ рдЦреАрдВрдЪреЗрдВ</a> ред <br><br><h3>  рд╕рдВрд╕рд╛рдзрди рдирд┐рд░реНрдорд╛рдг </h3><br>  рдореИрдирд┐рдлреЗрд╕реНрдЯреЛрдВ рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░рджрд╛рддрд╛ рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рдФрд░ рдУрдкрдирд╕реНрдЯреИрдХ рдкреНрд░рджрд╛рддрд╛ рдЪрдпрдирдХрд░реНрддрд╛ рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдП рдмрд┐рдирд╛ рдЗрд╕рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕реА рдХрд╛рд░рдг рд╕реЗ, рд╣рдо рдЕрдкрдиреЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рдЕрдВрджрд░ рдХреЗрд╡рд▓ <strong>рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо рд▓рд╛рдЧреВ рдХрдорд╛рдВрдб</strong> рдирд╣реАрдВ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдореЗрдВ рдкрд╣рд▓реЗ <strong>project_with_user</strong> рдореЙрдбреНрдпреВрд▓ рдХреЗ рд▓рд┐рдП <strong>рдЖрд╡реЗрджрди</strong> рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдмрд╛рдХреА рд╕рднреА рдЪреАрдЬреЛрдВ рдХреЗ рд▓рд┐рдПред <br><br>  <em>рдиреЛрдЯ: рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдЕрднреА рддрдХ рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо рдореЗрдВ рд╣рд▓ рдирд╣реАрдВ рдХреА рдЧрдИ рд╣реИ, рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer"># 2430 рдХреЗ рдЕрдВрдХ</a> рдореЗрдВ рдЬреАрдереВрдм рдкрд░ рдЗрд╕рдХреА рдЪрд░реНрдЪрд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer"># 4149 рдЬрд╛рд░реА</a> рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</em> <br><br>  рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо-рдЙрджрд╛рд╣рд░рдгреЛрдВ / рдЙрджрд╛рд╣рд░рдгреЛрдВ / vpc / server_local_root_disk рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ рдЬрд╛рдПрдВрдЧреЗ</a> , рдЗрд╕рдХреА рд╕рд╛рдордЧреНрд░реА рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="bash hljs">$ ls README.md main.tf vars.tf</code> </pre><br>  рд╣рдо рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ terraform init</code> </pre><br>  рдЖрдЙрдЯрдкреБрдЯ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╕рднреА рдореЙрдбреНрдпреВрд▓ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <strong>project_with_user</strong> рдореЙрдбреНрдпреВрд▓ рд▓рд╛рдЧреВ рдХрд░реЗрдВред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдкрдХреЛ рдЙрди рдЪрд░ рдХреЗ рд▓рд┐рдП рдорд╛рдиреЛрдВ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рд╕реЗрдЯ рдирд╣реАрдВ рдХрд┐рдП рдЧрдП рд╣реИрдВ: <br><br><ul><li>  <strong>sel_account</strong> рдЕрдкрдиреЗ <strong>рд╕реЗрд▓реЗрдХреНрдЯ</strong> рдЕрдХрд╛рдЙрдВрдЯ рдирдВрдмрд░ рдХреЗ рд╕рд╛рде; </li><li>  <strong>рд╕реЗрд▓реЗрд▓</strong> рдПрдкреАрдЖрдИ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреА рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде <strong>sel_token</strong> ; </li><li>  рдУрдкрдирд╕реНрдЯреИрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП <strong>user_password</strong> рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рдеред </li></ul><br>  рдкрд╣рд▓реЗ рджреЛ рдЪрд░ рдХреЗ рд▓рд┐рдП рдорд╛рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдирд┐рдпрдВрддреНрд░рдг рдХрдХреНрд╖</a> рд╕реЗ рд▓рд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдЕрдВрддрд┐рдо рдЪрд░ рдХреЗ рд▓рд┐рдП, рдЖрдк рдХрд┐рд╕реА рднреА рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрдорд╛рдВрдб рдЪрд▓рд╛рдиреЗ рд╕реЗ <strong>SEL_ACCOUNT</strong> , <strong>SEL_TOKEN</strong> рдФрд░ <strong>USER_PASSWORD</strong> рдорд╛рдиреЛрдВ рдХреЛ рдмрджрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ: <br><br><pre> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply -target=module.project_with_user</code> </pre><br>  рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХрдорд╛рдВрдб рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдпрд╣ рджрд┐рдЦрд╛рдПрдЧрд╛ рдХрд┐ рд╡рд╣ рдХреМрди рд╕реЗ рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ рдФрд░ рдкреБрд╖реНрдЯрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: <br><br><pre> <code class="bash hljs">Plan: 3 to add, 0 to change, 0 to destroy. Do you want to perform these actions? Terraform will perform the actions described above. Only <span class="hljs-string"><span class="hljs-string">'yes'</span></span> will be accepted to approve. Enter a value: yes</code> </pre><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рднреВрдорд┐рдХрд╛ рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рд╢реЗрд╖ рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply</code> </pre><br>  рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рддреЗ рд╕рдордп, рдПрдХ рдмрд╛рд╣рд░реА рдЖрдИрдкреА рдкрддреЗ рдХреЗ рд╕рд╛рде рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ, рдЬрд┐рд╕ рдкрд░ рдирд┐рд░реНрдорд┐рдд рд╕рд░реНрд╡рд░ рд╕реБрд▓рдн рд╣реЛрдЧрд╛: <br><br><pre> <code class="bash hljs">module.server_local_root_disk.openstack_networking_floatingip_associate_v2.association_1: Creating... floating_ip: <span class="hljs-string"><span class="hljs-string">""</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"xxxx"</span></span></code> </pre><br>  рдЖрдк рдирд┐рд░реНрджрд┐рд╖реНрдЯ IP рдкрд░ SSH рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдИ рдЧрдИ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h3>  рд╕рдВрд╕рд╛рдзрди рд╕рдВрдкрд╛рджрди </h3><br>  рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЙрдиреНрд╣реЗрдВ рд╕рдВрд╢реЛрдзрд┐рдд рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <strong>рдЙрджрд╛рд╣рд░рдгреЛрдВ / vpc / server_local_root_disk / main.tf рдлрд╝рд╛рдЗрд▓</strong> рдореЗрдВ <strong>server_vcpus</strong> рдФрд░ <strong>server_ram_mb</strong> рдХреЗ рдорд╛рдиреЛрдВ рдХреЛ рдмрджрд▓рдХрд░ рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рдХреЛрд░ рдФрд░ рдореЗрдореЛрд░реА рдХреА рд╕рдВрдЦреНрдпрд╛ <strong>рдмрдврд╝рд╛рдПрдБ</strong> : <br><br><pre> <code class="bash hljs">- server_vcpus = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.server_vcpus}</span></span></span><span class="hljs-string">"</span></span> - server_ram_mb = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.server_ram_mb}</span></span></span><span class="hljs-string">"</span></span> + server_vcpus = 8 + server_ram_mb = 10240</code> </pre><br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдЬрд╛рдБрдЪрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдмрджрд▓рд╛рд╡ рд▓рд╛рдПрдЧрд╛: <br><br><pre> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform plan</code> </pre><br>  рдирддреАрдЬрддрди, рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдиреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ <strong>рдУрдкрдирд╕реНрдЯреИрдХ_рдХрдВрдкреНрдпреВрдЯ_рд╕реНрдЯрд╛рдВрд╕_рд╡реА 2</strong> рдФрд░ <strong>рдУрдкрдирд╕реНрдЯреИрдХ_рдХрдВрдкреНрдпреВрдЯ_рдлреНрд▓реЗрд╡рд░_рд╡реА 2 рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХрд┐рдпрд╛</strong> ред <br><br>  <em>рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрд╕рд╕реЗ рдирд┐рд░реНрдорд┐рдд рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХрд╛ рд░рд┐рдмреВрдЯ рд╣реЛрдЧрд╛ред</em> <br><br>  рдирдП рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <strong>рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдЕрдкреНрд▓рд╛рдИ рдХрдорд╛рдВрдб рдХрд╛</strong> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЬрд┐рд╕реЗ рд╣рдо рдкрд╣рд▓реЗ рд╣реА рдЪрд▓рд╛ рдЪреБрдХреЗ рд╣реИрдВред <br><br>  рд╕рднреА рдирд┐рд░реНрдорд┐рдд рд╡рд╕реНрддреБрдУрдВ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">VPC рдХрдВрдЯреНрд░реЛрд▓ рдкреИрдирд▓</a> рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><img src="https://habrastorage.org/webt/eq/e5/3a/eqe53anrxqpnpd6qn7hlcrnuxec.png"><br><br>  рд╣рдорд╛рд░реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЙрджрд╛рд╣рд░рдг рдХреЗ рднрдВрдбрд╛рд░ рдореЗрдВ,</a> рдЖрдк рдиреЗрдЯрд╡рд░реНрдХ рдбреНрд░рд╛рдЗрд╡ рдХреЗ рд╕рд╛рде рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдирд┐рдлрд╝реЗрд╕реНрдЯ рднреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h2>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рдЙрджрд╛рд╣рд░рдг </h2><br>  рдЕрдЧрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рдмрдирд╛рдП рдЧрдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕рд╛рдл рдХрд░ рджреЗрдВрдЧреЗред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд░реВрдЯ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо-рдЙрджрд╛рд╣рд░рдг / рдЙрджрд╛рд╣рд░рдг / vpc / server_local_root_disk рдореЗрдВ,</a> рдУрдкрдирд╕реНрдЯреИрдХ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ: <br><br><pre> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform destroy -target=module.server_local_root_disk</code> </pre><br>  рдЗрд╕рдХреЗ рдмрд╛рдж, Selectel VPC API рдСрдмреНрдЬреЗрдХреНрдЯ рдХреНрд▓реАрдирдЕрдк рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ: <br><br><pre> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform destroy -target=module.project_with_user</code> </pre><br>  рджреЛрдиреЛрдВ рд╣реА рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЖрдкрдХреЛ рд╕рднреА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреА рд╣реЛрдЧреА: <br><br><pre> <code class="bash hljs">Do you really want to destroy all resources? Terraform will destroy all your managed infrastructure, as shown above. There is no undo. Only <span class="hljs-string"><span class="hljs-string">'yes'</span></span> will be accepted to confirm. Enter a value: yes</code> </pre><br>  рдирд┐рдореНрди рдЙрджрд╛рд╣рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЯреЗрд░рд╛рдлреЙрд░реНрдо-рдЙрджрд╛рд╣рд░рдг / рдЙрджрд╛рд╣рд░рдг / vpc / kubernetes_cluster рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╣реИ</a> ред <br><br>  рдпрд╣ рдЙрджрд╛рд╣рд░рдг рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рддрд╛ рд╣реИ, рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдПрдХ рднреВрдорд┐рдХрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рдФрд░ рдПрдХ рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдЙрдард╛рддрд╛ рд╣реИред  <strong>Vars.tf</strong> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, <strong>рдЖрдк</strong> рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдиреЛрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛, рдЙрдирдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ, рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХрд╛ рд╕рдВрд╕реНрдХрд░рдг, рдФрд░ рдмрд╣реБрдд рдХреБрдЫред <br><br>  рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рдорд╛рди, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░реЗрдВрдЧреЗ рдФрд░ <strong>project_with_user</strong> рдореЙрдбреНрдпреВрд▓ рд╕рдВрд╕рд╛рдзрди <strong>рдмрдирд╛рдПрдВрдЧреЗ</strong> , рдФрд░ рдлрд┐рд░ рдмрд╛рдХреА рдмрдирд╛рдПрдБ: <br><br><pre> <code class="bash hljs">$ terraform init $ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply -target=module.project_with_user $ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply</code> </pre><br>  рд╣рдо рдУрдкрдирд╕реНрдЯреИрдХ рдореИрдЧреНрдирдо рдШрдЯрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреБрдмреЗрд░рдиреЗрдЯ рд╕рдореВрд╣реЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдФрд░ рдкреНрд░рдмрдВрдзрди рд╕реЗ рдЧреБрдЬрд░рддреЗ рд╣реИрдВред  рдЖрдк рд╣рдорд╛рд░реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦреЛрдВ рдореЗрдВ</a> , рд╕рд╛рде рд╣реА рд╕рд╛рде <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">рдЬреНрдЮрд╛рдирдХреЛрд╖</a> рдореЗрдВ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдХрд╛рдо рдХрд░реЗрдВ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рди рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдХреНрд▓рд╕реНрдЯрд░ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреЗ рджреМрд░рд╛рди, рдбрд┐рд╕реНрдХ, рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдмрдирд╛рдИ рдЬрд╛рдПрдЧреА рдФрд░ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдШрдЯрдХ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред  рддреИрдпрд╛рд░реА рдореЗрдВ рд▓рдЧрднрдЧ 4 рдорд┐рдирдЯ рд▓рдЧрддреЗ рд╣реИрдВ, рдЬрд┐рд╕ рд╕рдордп рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо рдлреЙрд░реНрдо рдХреЗ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛: <br><br><pre> <code class="bash hljs">module.kubernetes_cluster.openstack_containerinfra_cluster_v1.cluster_1: Still creating... (3m0s elapsed)</code> </pre><br>  рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, Terraform рдЖрдкрдХреЛ рд╕реВрдЪрд┐рдд рдХрд░реЗрдЧрд╛ рдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рддреИрдпрд╛рд░ рд╣реИ рдФрд░ рдЗрд╕рдХреА рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">module.kubernetes_cluster.openstack_containerinfra_cluster_v1.cluster_1: Creation complete after 4m20s (ID: 3c8...) Apply complete! Resources: 6 added, 0 changed, 0 destroyed.</code> </pre><br>  рдХреБрдмреНрд▓реЗрдЯ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рд░реНрдорд┐рдд рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <strong>рдЖрдкрдХреЛ</strong> рдХреНрд▓рд╕реНрдЯрд░ рдПрдХреНрд╕реЗрд╕ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреА рд╣реЛрдЧреАред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЕрдкрдиреЗ рдЦрд╛рддреЗ рдХреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреА рд╕реВрдЪреА рдореЗрдВ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдИ рдЧрдИ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдкрд░ рдЬрд╛рдПрдВ: <br><br><img src="https://habrastorage.org/webt/pp/7y/rt/pp7yrtw_q-79pkx1j6mr5ebbsyi.png"><br><br>  рдЕрдЧрд▓рд╛, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">xxxxxx.selvpc.ru</a> рдлреЙрд░реНрдо рдХреЗ рд▓рд┐рдВрдХ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ, рдЬреЛ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдирд╛рдо рдХреЗ рдиреАрдЪреЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/yr/in/wk/yrinwkfne83cenropq9t3szxt6c.png"><br><br>  рд▓реЙрдЧрд┐рди рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдП рдЧрдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдпрджрд┐ рдЖрдкрдиреЗ рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП <strong>vars.tf</strong> рдпрд╛ <strong>main.tf</strong> рдирд╣реАрдВ рдмрджрд▓рд╛ рд╣реИ, рддреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ <strong>tf_user</strong> рдирд╛рдо <strong>рд╣реЛрдЧрд╛</strong> ред  рдПрдХ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд░реВрдк рдореЗрдВ, рдЪрд░ <strong>TF_VAR_user_password</strong> рдХреЗ рдорд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЬреЛ рдХрд┐ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдЬрдм <strong>рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо</strong> <strong>рд▓рд╛рдЧреВ</strong> рдкрд╣рд▓реЗ рдЪрд▓рд╛рдпрд╛ <strong>рдЧрдпрд╛</strong> рдерд╛ред <br><br>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдЕрдВрджрд░, рдЖрдкрдХреЛ <strong>рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕</strong> рдЯреИрдм рдкрд░ рдЬрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/ft/bp/dj/ftbpdjhjrgxkgzomuxegaujj3wu.png"><br><br>  рдпрд╣рд╛рдВ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЖрдк "рдПрдХреНрд╕реЗрд╕" рдЯреИрдм рдкрд░ <strong>kubectl рдХреЗ</strong> рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/y_/pe/ov/y_peovkv0kjznzx95c_vw4wc-4e.png"><br><br>  рдЙрд╕реА рдЯреИрдм рдореЗрдВ <strong>kubectl</strong> рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдП рдЧрдП <strong>config.yaml</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢ рд╣реИрдВред <br><br>  <strong>Kubectl</strong> рд╢реБрд░реВ рдХрд░рдиреЗ рдФрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ <strong>KUBECONFIG</strong> рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж <strong>,</strong> рдЖрдк Kubernetes рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ kubectl get pods --all-namespaces NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-9578f5c87-g6bjf 1/1 Running 0 8m kube-system coredns-9578f5c87-rvkgd 1/1 Running 0 6m kube-system heapster-866fcbc879-b6998 1/1 Running 0 8m kube-system kube-dns-autoscaler-689688988f-8cxhf 1/1 Running 0 8m kube-system kubernetes-dashboard-7bdb5d4cd7-jcjq9 1/1 Running 0 8m kube-system monitoring-grafana-84c97bb64d-tc64b 1/1 Running 0 8m kube-system monitoring-influxdb-7c8ccc75c6-dzk5f 1/1 Running 0 8m kube-system node-exporter-tf-cluster-rz6nggvs4va7-minion-0 1/1 Running 0 8m kube-system node-exporter-tf-cluster-rz6nggvs4va7-minion-1 1/1 Running 0 8m kube-system openstack-cloud-controller-manager-8vrmp 1/1 Running 3 8m prometeus-monitoring grafana-76bcb7ffb8-4tm7t 1/1 Running 0 8m prometeus-monitoring prometheus-75cdd77c5c-w29gb 1/1 Running 0 8m</code> </pre><br>  рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрджрд▓ рдЬрд╛рддреА рд╣реИред <br>  рдореБрдЦреНрдп рдорд╛рди <strong>рдореБрдЦреНрдп</strong> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">cluster_node_count = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.cluster_node_count}</span></span></span><span class="hljs-string">"</span></span></code> </pre><br><p>  рдпрд╣ рдорд╛рди <strong>vars.tf</strong> рд╕реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ <strong>рдЧрдпрд╛ рд╣реИ</strong> : </p><br><br><pre> <code class="bash hljs">variable <span class="hljs-string"><span class="hljs-string">"cluster_node_count"</span></span> { default = 2 }</code> </pre><br>  рдЖрдк рдпрд╛ рддреЛ <strong>vars.tf</strong> рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рдХреЛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдореБрдЦреНрдп рдореВрд▓реНрдп рдХреЛ рд╕реАрдзреЗ <strong>main.tf</strong> рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">- cluster_node_count = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.cluster_node_count}</span></span></span><span class="hljs-string">"</span></span> + cluster_node_count = 3</code> </pre><br>  рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, <strong>рдЯреЗрд░рд╛рдлрд╝реЙрд░реНрдо рд▓рд╛рдЧреВ рдХрдорд╛рдВрдб рдХрд╛</strong> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">$ env \ TF_VAR_sel_account=SEL_ACCOUNT \ TF_VAR_sel_token=SEL_TOKEN \ TF_VAR_user_password=USER_PASSWORD \ terraform apply</code> </pre><br>  рдЬрдм рдиреЛрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдХреНрд▓рд╕реНрдЯрд░ рдЙрдкрд▓рдмреНрдз рд░рд╣реЗрдЧрд╛ред  рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдиреЛрдб рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЗрд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдмрд┐рдирд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ kubectl get nodes NAME STATUS ROLES AGE VERSION tf-cluster-rz6nggvs4va7-master-0 Ready,SchedulingDisabled master 8m v1.12.4 tf-cluster-rz6nggvs4va7-minion-0 Ready &lt;none&gt; 8m v1.12.4 tf-cluster-rz6nggvs4va7-minion-1 Ready &lt;none&gt; 8m v1.12.4 tf-cluster-rz6nggvs4va7-minion-2 Ready &lt;none&gt; 3m v1.12.4</code> </pre><br><h2>  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рд╣рдордиреЗ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">"рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреНрд▓рд╛рдЙрдб" рдХреЗ</a> рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдмреБрдирд┐рдпрд╛рджреА рддрд░реАрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрдЦрд╛ред  рд╣рдореЗрдВ рдЦреБрд╢реА рд╣реЛрдЧреА рдЕрдЧрд░ рдЖрдк рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдЯреЗрд░рд╛рдлреЙрд░реНрдо рдкреНрд░рджрд╛рддрд╛ рд╕рд┐рд▓реЗрдХреНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдВред <br><br>  Terraform рдкреНрд░рджрд╛рддрд╛ Selectel рдХреЗ рд╕рднреА рдкрд╛рдП рдЧрдП рдмрдЧреНрд╕ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="noopener noreferrer">Github рдХреЗ рдореБрджреНрджреЛрдВ рдХреЗ</a> рдорд╛рдзреНрдпрдо рд╕реЗ рд░рд┐рдкреЛрд░реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi445162/">https://habr.com/ru/post/hi445162/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi445152/index.html">рдЦреЛрдЬ рдореЗрдВ рдФрд░ рдХреНрдпрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ? рдпреИрдВрдбреЗрдХреНрд╕ рд░рд┐рдкреЛрд░реНрдЯ</a></li>
<li><a href="../hi445154/index.html">25 рдорд╛рд░реНрдЪ рд╕реЗ 31 рдорд╛рд░реНрдЪ рддрдХ рдорд╛рд╕реНрдХреЛ рдореЗрдВ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi445156/index.html">рдЧреНрд▓реЗрдирдорд╛рд░реНрдХ рдХреЙрдореНрдкреИрдХреНрдЯ рдиреЗрдмреБрд▓рд╛рдЗрдЬрд╝рд░: рд░реЛрдЬрдорд░реНрд░рд╛ рдХреА рдЬрд┐рдВрджрдЧреА рдореЗрдВ рдПрдХ рдЙрдкрдпреЛрдЧреА рдЪреАрдЬ</a></li>
<li><a href="../hi445158/index.html">3 рдбреА рдкреНрд░рд┐рдВрдЯрд░ рдореЗрдВ рдСрдкреНрдЯрд┐рдорд▓ рдкрд╛рд░реНрдЯ рдУрд░рд┐рдПрдВрдЯреЗрд╢рди рдФрд░ рд╕рдкреЛрд░реНрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</a></li>
<li><a href="../hi445160/index.html">рд╣рдо рдмрд╛рд▓рд┐рдХрд╛ рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреИрдбрд▓ рдлрд░реНрдорд╡реЗрдпрд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi445164/index.html">рд╕рдВрддреБрд▓рд┐рдд рд╕рд╛рдЗрдЯ рдкреНрд░рджрд░реНрд╢рдиред рднрд╛рдЧ 5: рдкреНрд░рдпреЛрдЬреНрдпрддрд╛</a></li>
<li><a href="../hi445166/index.html">рдЖрдк рд╕рднреА CSS Auto Hyphenation рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi445168/index.html">рдПрдХ рдЖрджрд░реНрд╢ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдЬрд┐рд╕рдХрд╛ рд╕реНрд╡рд╛рдЧрдд рдПрдХ рднрд░реНрддреА рдФрд░ рдирд┐рдпреЛрдХреНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛</a></li>
<li><a href="../hi445170/index.html">рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рддреАрди рдмрдбрд╝реЗ рдЭреВрда</a></li>
<li><a href="../hi445172/index.html">рдХреНрд░реЛрдорд┐рдпрдо рдХреЗ рд╕рд╛рде рдПрдЬ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдлрд╝рд╛рдЗрд▓ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рд╕реЗрд╡рд╛рдУрдВ рдкрд░ рджрд┐рдЦрд╛рдИ рджрд┐рдП</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>