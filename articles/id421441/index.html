<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â†–ï¸ ğŸ‘† ğŸ‘†ğŸ½ Embox mulai mendaki Gunung Elbrus ğŸœ ğŸ•“ ğŸšŒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mereka yang mengikuti proyek kami mungkin telah memperhatikan bahwa folder e2k telah muncul di direktori dengan arsitektur, yang berisi dukungan untuk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Embox mulai mendaki Gunung Elbrus</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/embox/blog/421441/"><img src="https://habrastorage.org/webt/ic/4z/5o/ic4z5olelesc04boln85goculk4.png" align="right" width="320">  Mereka yang mengikuti proyek kami mungkin telah memperhatikan bahwa folder e2k telah muncul di direktori dengan arsitektur, yang berisi dukungan untuk prosesor dalam negeri dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">arsitektur Elbrus</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Serangkaian</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> tentang porting <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Embox</a> ke platform domestik tidak akan lengkap tanpa cerita tentang arsitektur ini. <br><br>  Saya akan membuat beberapa komentar pada isi artikel.  Pertama, proses penguasaan arsitektur ini oleh kami adalah pada tahap awal, kami berhasil meluncurkan Embox pada platform ini, tetapi kami belum mengimplementasikan banyak bagian yang diperlukan, yang akan dibahas dalam publikasi mendatang.  Kedua, arsitektur ini kompleks, dan <br>  deskripsi terperinci membutuhkan lebih banyak teks daripada format yang dibolehkan <br>  satu artikel.  Karena itu, kami sarankan untuk menggunakan artikel ini sebagai pengantar, <br>  berisi informasi teknis minimum tentang arsitektur itu sendiri. <br><br>  Mari kita mulai. <br><a name="habracut"></a><br><h3>  Objek Penelitian - Tata Letak Sistem Tertanam pada Elbrus </h3><br>  Karena kami terlibat dalam Embox (dan jika ada yang tidak sadar, itu difokuskan pada embedded system), kami terutama tertarik pada opsi bahwa MTsST sendiri diposisikan, termasuk untuk embedded system.  Beralih ke MCST kami menemukan bahwa perusahaan tertarik menggunakan prosesor untuk sistem embedded.  Salah satu solusi terbaru untuk segmen ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">papan E4C-COM</a> .  Dalam proses berkomunikasi dengan MCST, menjadi jelas bahwa untuk porting dan menguasai arsitektur, Anda dapat menggunakan salah satu mesin yang tersedia, dan kami diberi komputer yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Temperament</a> untuk penggunaan sementara.  Secara umum, monocube tidak cukup seperti yang kita terbiasa dalam sistem embedded.  Biasanya, sistem tertanam menggunakan komputer papan tunggal, chip - sistem pada chip atau bahkan mikrokontroler, tetapi monocube adalah komputer yang lengkap, tetapi karena telah diuji dalam â€œiklim dan mekanikaâ€, masih dapat dianggap sebagai sistem tertanam. <br><br><h3>  Kompiler, bangun, isi gambar </h3><br>  Setelah menerima unit sistem, muncul pertanyaan secara alami - bagaimana cara mengisi gambar.  MCST menggunakan BIOS-nya sendiri (pemuat boot sistem tingkat pertama).  Secara default, OS Elbrus diinstal (mis. Debian dengan modifikasi).  Kami tertarik untuk meluncurkan citra kami sendiri.  Untungnya, loader MTST dapat menjalankan gambar melalui jaringan.  Untuk melakukan ini, gunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">protokol ATA over Ethernet</a> . <br><br>  Setelah kami dibantu untuk membuat dudukan dan meluncurkan gambar eksternal melalui jaringan, kami mulai mengembangkan gambar kami sendiri.  Untuk melakukan ini, kami memerlukan kompiler.  Kami tidak menemukan kompiler di domain publik, tetapi karena kami menandatangani NDA, kami diberi binari untuk Linux.  Kompiler ternyata sangat kompatibel dengan gcc, dan kami tidak perlu mengubah apa pun, tentu saja, dengan pengecualian pada flag kompilasi, yang kami letakkan dalam file konfigurasi terpisah.  Yang sangat mudah ditebak, karena Linux, walaupun dengan modifikasi, dirakit oleh kompiler ini. <br><br><h3>  Beberapa pertanyaan teknis </h3><br>  Mereka yang terlibat dalam kegiatan spesifik seperti porting OS ke platform tahu bahwa hal pertama yang harus dilakukan adalah menempatkan kode program dengan benar dalam memori.  Yaitu, tulis skrip tautan (lds) dan terapkan kode mulai.  Kami dengan cepat menemukan skrip tautan, tetapi ketika menerapkan kode awal, kami dihadapkan dengan sihir pertama, yang kami tidak sepenuhnya mengerti.  Faktanya adalah bahwa Elbrus memiliki mode kompatibilitas x86 dan pada 0x00FF0000 ada kode yang saya hanya akan memberikan <a href="">tautan</a> , karena kami meminjamnya dari contoh MCST.  Skrip tautan berisi <br><br><pre><code class="hljs pgsql">.bootinfo : { _bootinfo_start = .; <span class="hljs-comment"><span class="hljs-comment">/* . = 0x1000000 - 0x10000; */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* 0x00FF0000 */</span></span> *(.x86_boot) . = _bootinfo_start + <span class="hljs-number"><span class="hljs-number">0x10000</span></span>; _bootinfo_end = .; } SECTION_REGION(bootinfo) .text : { _start = .; <span class="hljs-comment"><span class="hljs-comment">/* 0x01000000 */</span></span> *(.e2k_entry);</code> </pre> <br>  Kode starter itu sendiri bahkan tidak ditulis dalam assembler, tetapi hanya dalam <a href="">C.</a>  Itu diletakkan di bagian yang terletak di 0x01000000, yang, omong-omong, sesuai dengan alamat awal mesin x86 biasa - di sana pada alamat ini terletak header <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">multiboot</a> atau header lainnya. <br><br>  Untuk memastikan kode awal dan alamat sudah benar, Anda perlu mendapatkan beberapa keluaran.  Jika Anda dapat mencetak karakter apa pun, maka kemungkinan besar tidak akan ada masalah dengan output string.  Dengan menggunakan output ini, sudah dimungkinkan untuk menggunakan printf () yang familier untuk debugging.  Selain itu, sebagian besar platform memberikan kemampuan untuk menampilkan karakter dengan membuat entri sederhana dalam register tertentu (karena bootloader kemungkinan besar mengkonfigurasi UART sesuai kebutuhan). <br><br>  Komputer kami menggunakan pengontrol port serial am85c30 (alias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">z85c30</a> kami cukup cepat menemukan cara mencetak satu karakter, dan ini sudah cukup untuk printf kami berfungsi. Kami segera menghadapi masalah aneh - beberapa karakter yang dicetak oleh printf tampaknya digandakan, tetapi kadang-kadang campur aduk. Misalnya, ketika saya mencoba untuk output Halo, dunia! Ternyata seperti Hhelellloo ,, woworrlldd. Sekarang tampak jelas bahwa masalahnya adalah multi-core, tetapi pada awalnya kami menyodok pada driver itu sendiri. + (1891VM7YA) (  empat core DSP tidak masuk hitungan) dan bootloader mengaktifkan semua core prosesor. Akibatnya, agar tidak mengacaukan dengan multicore (SMP), semua core kecuali yang pertama dikirim ke loop tak terbatas. Untuk melakukan ini, kami memperkenalkan variabel untuk nomor prosesor dan menambahkannya menggunakan penambahan atom. Inti nol terus bekerja, sementara kernel lainnya berputar. <br><br><pre> <code class="hljs cpp"> cpuid = __e2k_atomic32_add(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;last_cpuid); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cpuid &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/* XXX currently we support only single core */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/* copy of trap table */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)<span class="hljs-number"><span class="hljs-number">0</span></span>, &amp;_t_entry, <span class="hljs-number"><span class="hljs-number">0x1800</span></span>); kernel_start();</code> </pre> <br>  Panggilan kernel_start () sudah menjadi transfer kontrol ke kode kami. <br>  Kami juga meminjam penambahan atom, bagi kami itu terlihat seperti sihir.  Tapi, seperti yang Anda tahu, itu berfungsi - jangan sentuh! <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> WMB_AFTER_ATOMIC </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">".word 0x00008001\n"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">".word 0x30000084\n"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __e2k_atomic32_add(__val, __addr) \ ({ \ int __rval; \ asm volatile (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n1:"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tldw,0 %[addr], %[rval], mas=0x7"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tadds %[rval], %[val], %[rval]"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\t{"</span></span></span><span class="hljs-meta">\ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tstw,2 %[addr], %[rval], mas=0x2"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tibranch 1b ? %%MLOCK"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\t}"</span></span></span><span class="hljs-meta"> \ WMB_AFTER_ATOMIC \ : [rval] </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"=&amp;r"</span></span></span><span class="hljs-meta"> (__rval), [addr] </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"+m"</span></span></span><span class="hljs-meta"> (*(__addr)) \ : [val] </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ir"</span></span></span><span class="hljs-meta"> (__val) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"memory"</span></span></span><span class="hljs-meta">); \ __rval; \ })</span></span></code> </pre> <br>  Keajaiban lain yang harus saya pinjam adalah beberapa kode, yang diperlukan untuk semua core.  Yaitu <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e2k_wait_all</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ _Pragma (<span class="hljs-string"><span class="hljs-string">"no_asm_inline"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">asm</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"wait \ttrap = %0, ma_c = %1, fl_c = %2, ld_c = %3, "</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"st_c = %4, all_e = %5, all_c = %6"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">) : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"memory"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; }</code> </pre> <br>  Sebagai hasilnya, setelah menulis kode startup, kami tidak hanya menampilkan pesan menggunakan printk, tetapi juga mulai memuat modul, yang umumnya tidak terlalu sepele karena kompiler yang tidak cukup standar.  Jadi sekali lagi saya perhatikan bahwa kompatibilitas kali ini dengan gcc sangat senang. <br><br>  Langkah selanjutnya adalah memulai pengendali dan penghitung waktu interupsi, tetapi setelah berpikir bahwa kami harus menerapkan tidak hanya dukungan untuk perangkat ini, tetapi juga kode arsitektur untuk penangan interupsi, kami memutuskan bahwa kami dapat mulai dari pinggiran.  Monocub memiliki bus PCIe, untuk programmer sepertinya PCI biasa.  Kami terutama tertarik pada dua perangkat: pengontrol tampilan dan pengontrol jaringan. <br><br>  Monocube menggunakan pengontrol grafis dari seri <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sm750</a> .  Ini adalah pengontrol grafis untuk aplikasi tertanam, memiliki dukungan onboard untuk grafis 2d.  Chip disolder langsung ke motherboard, seperti yang saya mengerti.  Sumber untuk driver untuk Linux dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Setelah driver ditemukan, sepertinya masalah kami sudah selesai, hanya tinggal mengimplementasikan controller untuk PCI.  lebih tepatnya, baca / tulis operasi ruang konfigurasi PCI untuk mengetahui parameternya.  Implementasi fungsi-fungsi ini harus dipinjam lagi.  Akibatnya, membaca catatan turun ke makro suka <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* * Do load with specified MAS */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _E2K_READ_MAS(addr, mas, type, size_letter, chan_letter) \ ({ \ register type res; \ asm volatile (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ld"</span></span></span><span class="hljs-meta"> #size_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">","</span></span></span><span class="hljs-meta"> #chan_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">" \t0x0, [%1] %2, %0"</span></span></span><span class="hljs-meta"> \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"=r"</span></span></span><span class="hljs-meta"> (res) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"r"</span></span></span><span class="hljs-meta"> ((__e2k_ptr_t) (addr)), \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"i"</span></span></span><span class="hljs-meta"> (mas)); \ res; \ }) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _E2K_WRITE_MAS(addr, val, mas, type, size_letter, chan_letter) \ ({ \ asm volatile (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"st"</span></span></span><span class="hljs-meta"> #size_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">","</span></span></span><span class="hljs-meta"> #chan_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">" \t0x0, [%0] %2, %1"</span></span></span><span class="hljs-meta"> \ : \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"r"</span></span></span><span class="hljs-meta"> ((__e2k_ptr_t) (addr)), \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"r"</span></span></span><span class="hljs-meta"> ((type) (val)), \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"i"</span></span></span><span class="hljs-meta"> (mas) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"memory"</span></span></span><span class="hljs-meta">); \ })</span></span></code> </pre><br>  Ada beberapa pemahaman tentang apa yang terjadi.  Elbrus memiliki beberapa ruang alamat alternatif, seperti, misalnya, dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">arsitektur SPARC</a> .  Identifikasi dilakukan menggunakan pengidentifikasi ruang alamat.  Artinya, perintah ld yang sama sampai ke alamat internal yang berbeda, juga menghasilkan operasi baca dengan panjang yang berbeda (8, 16, 32, 64 bit).  Jika dalam SPARC ini adalah perintah lda / sta yang terpisah, maka di Elbrus karena parameternya, ini adalah perintah ld.  Jendela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">register</a> dipinjam dari arsitektur SPARC.  Saya akan menunda cerita yang lebih rinci untuk artikel selanjutnya. <br><br>  Akibatnya, semuanya berubah dengan PCI.  Kami bisa mendapatkan semua data yang diperlukan, mentransfer driver grafis ke diri kami sendiri, tetapi kemudian kami mengalami masalah berikut.  Untuk menggambar di memori video, Anda harus menulis dua kali.  Semuanya menunjuk ke cache.  Untuk mengatasi masalah ini, perlu untuk berurusan dengan MMU, dan ini, seperti yang mereka katakan, tidak dapat diselesaikan dengan condachka, karena, pada prinsipnya, banyak masalah lain yang kami temui dan akan temui lebih dari satu kali selama pengembangan arsitektur ini. <br><br>  Kami telah berkembang ke arah lain: gangguan dan panggilan sistem, tetapi kami juga akan membicarakan hal ini di artikel subseries berikutnya.  Pada akhir artikel ini, saya hanya akan membawa output ke konsol (melalui port serial). <br><img src="https://habrastorage.org/webt/uc/un/u2/ucunu20_gi-newvjygt_hfiygpe.png"><br><br><h3>  Kesimpulan </h3><br>  Seperti yang saya katakan di bagian pendahuluan, saya ingin fokus terutama bukan pada detail teknis, tetapi pada perasaan umum.  Jadi, perasaan itu kontradiktif, meski tentu lebih positif.  Di satu sisi, prosesor ada dan sangat menarik dalam hal fitur arsitektur.  Berdasarkan prosesor ini, sistem komputer diproduksi, ada perangkat lunak dengan kualitas yang cukup tinggi.  Seperti yang saya katakan, tidak ada keluhan tentang kompiler (sampai titik tertentu, yang akan saya jelaskan nanti), ada Linux penuh (OS "Elbrus").  Saya pribadi melihat bagaimana di ICST itu sendiri, pengembang dibuat langsung di desktop dengan arsitektur Elbrus. <br><br>  Tetapi di sisi lain, saya tidak mengerti mengapa dengan kegigihan seperti itu mereka mencoba melakukan penggantian dangkal Intel x86 dari prosesor ini.  Memang, tidak ada tempat di dunia yang mereka gunakan prosesor berdasarkan arsitektur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">VLIW</a> sebagai komputer pribadi universal.  VLIW, karena fitur arsitekturnya, adalah â€œpenghancur angkaâ€ yang keren, mereka membuat DSP di sana, mereka membuat server itanium, mereka membuat kartu grafis.  Tidak, dengan excavator, tentu saja, Anda bisa menggali lubang untuk menanam pohon, tetapi apakah itu layak dilakukan. <br><br>  Masalah utama yang menghambat pengembangan arsitektur, menurut saya, adalah sifat tertutup dari keseluruhan ekosistem.  Ya, untuk mendapatkan deskripsi sistem perintah, Anda hanya perlu menandatangani NDA, tetapi ini tidak cukup.  Arsitekturnya tidak dikenal dan sangat kompleks.  Ya, saya selalu berpikir bahwa beberapa perangkat lunak dasar harus dikembangkan langsung dari produsen prosesor, baik, atau dalam kerja sama yang erat dengannya.  Menurut prinsip ini, PC pada Elbrus memiliki paket perangkat lunak dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OS Elbrus</a> .  Tetapi masih terlalu naif untuk percaya bahwa satu perusahaan, bahkan yang besar, dapat memberikan dukungan kualitas untuk semua komponen: prosesor, kompiler, alat pengembangan dan debugging, perangkat lunak sistem (berbagai OS), perangkat lunak aplikasi, ...  bahkan Intel tidak dapat melakukannya.  Dunia telah lama bergerak menuju apa yang disebut kolaborasi atau pengembangan bersama. <br><br>  Biarkan saya memberi Anda contoh masalah kompiler yang kami temukan.  Driver port serial di beberapa titik berhenti menampilkan karakter, dan, pada pandangan pertama, tidak ada yang berubah.  Ternyata kami menghapus fungsi debugging yang tidak digunakan, yang kami masukkan untuk memahami melalui disassembler cara meneruskan argumen ke fungsi di assembler.  Artinya, jika fungsinya hadir, semuanya baik-baik saja, jika tidak, maka output menghilang.  Pada awalnya mereka berdosa untuk penyelarasan, tetapi ternyata fungsinya dapat ditransfer ke akhir C-Schnick, sehingga semua karakter dari pengemudi berada di tempat yang sama seperti sebelumnya, tetapi masalahnya direproduksi.  Meskipun masalah ini belum terpecahkan, kami terus menyelidiki untuk menunjukkan kepada pengembang kompiler dari MCST atau untuk memahami di mana kami membuat kesalahan. <br><br>  Masalah di atas, menurut saya, bisa dihindari jika ada lebih banyak pengguna pihak ketiga.  Minimal, masalah akan terungkap lebih awal, atau, orang hanya bisa google apa yang kami lakukan salah. <br><br>  ICST juga menyadari masalah penutupan, karena proses pembukaan hal-hal yang tidak rahasia telah dimulai.  Sebagai contoh, saya melihat Alt-Linux bekerja pada beberapa PC Elbrus di beberapa konferensi.  Berikut adalah gambar tampilan dari salah satu konferensi tahun ini (maaf melihat buruk, itu gelap).  Kami juga terhubung dengan pengembangan.  Kami berharap bahwa kami akan berguna bagi ICST, karena, ternyata, beberapa hal penting dari arsitektur Elbrus tidak dapat didukung di Linux (atau biayanya sangat besar), misalnya, memori yang ditandai. <br><br><img src="https://habrastorage.org/webt/yy/e9/jr/yye9jr5eg1nw99rppron_47drlw.jpeg" align="right" width="50%"><br><br><img src="https://habrastorage.org/webt/ki/n1/vk/kin1vkulag_gynsmlebiv146das.jpeg" align="left" width="50%">  Poin penting lainnya ketika kami membahas masalah penutupan dengan pengembang MCST, mereka keberatan bahwa, misalnya, sumber kernel Linux terbuka untuk waktu yang lama, tetapi hanya kami dan pengembang Dolomant yang mengajukan pertanyaan dan menggunakannya entah bagaimana. <br><br>  Selain itu, menurut informasi saya, MCST akan mengatur pendirian <br>  dapat diakses dari jarak jauh.  Di mana dimungkinkan untuk merakit dan menjalankan perangkat lunak pada PC dengan arsitektur Elbrus.  Jika ada minat yang sama dan Anda ingin menggunakan dudukan, maka Anda harus menghubungi, misalnya, untuk saya: jelaskan bagaimana rencananya menggunakannya, berapa lama dan seterusnya, karena untuk berbagi dengan mengubah perangkat lunak, Anda perlu mengatur jadwal.  Saya akan mentransfer data ke ICST atau saya akan menghubungkan mereka yang ingin dengan penyelenggara. <br><br><hr><br>  Tautan yang bermanfaat: <br><br>  Alamat surat untuk pengguna adalah pengguna [at] mcst.ru <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penjelasan singkat tentang arsitektur Elbrus</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber embox</a> <br><br>  PS Kami akan menunjukkan kepada semua orang yang menginginkan apa yang kami dapatkan di festival IT <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">TechTrain pada</a> 1-2 September. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421441/">https://habr.com/ru/post/id421441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421429/index.html">LSTM - ANN Dynamic Pricing dalam Retail Barang Rumah</a></li>
<li><a href="../id421431/index.html">Manajemen Waktu, atau Manajemen Kekacauan yang Efektif</a></li>
<li><a href="../id421433/index.html">Hanya ada satu hari tersisa sebelum server dimulai.</a></li>
<li><a href="../id421435/index.html">"Kenapa kita semua melakukan ini?" - Pencipta Prisma dan mantan pemimpin proyek VK tentang proyek rahasia barunya</a></li>
<li><a href="../id421439/index.html">Jepang memperkenalkan prosesor prototipe untuk superkomputer exaflops: cara kerja chip</a></li>
<li><a href="../id421443/index.html">Baru di Pasar Kami: Tinjauan Seluler IP Snom D385 dan D785</a></li>
<li><a href="../id421445/index.html">Kami sedang menulis penerjemah sederhana dalam Lisp - II</a></li>
<li><a href="../id421447/index.html">Rapat Redmadrobot iOS</a></li>
<li><a href="../id421451/index.html">Cara melindungi anak Anda dari sampah di YouTube dan membuat pemutar khusus dengan daftar saluran putih</a></li>
<li><a href="../id421453/index.html">Situasi: Sonos go public dan mungkin "keluar dari ruangan"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>