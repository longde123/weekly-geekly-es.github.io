<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏇🏽 🧑🏼‍🤝‍🧑🏼 😬 Java中的密码学。 Keytool实用程序 📜 👗 🎮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！ 我向您展示了Jakob Jenkov撰写的第十篇文章“ Java Keytool”的译文，该文章来自于一系列初学者 ，他们希望学习Java密码学的基础知识。 
 目录： 


1. Java密码学 
2. Java密码 
3. 留言摘要 
4. Mac电脑 
5. 签章 
6. 密钥对 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java中的密码学。 Keytool实用程序</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446322/"><p> 哈Ha！ 我向您展示了Jakob Jenkov撰写的第十篇文章“ Java Keytool”的译文，该文章来自于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一系列初学者</a> ，他们希望学习Java密码学的基础知识。 </p><a name="habracut"></a><br><h2 id="oglavlenie"> 目录： </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Java密码学</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Java密码</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">留言摘要</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Mac电脑</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">签章</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">密钥对</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">密钥生成器</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">密钥对生成器</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">密钥库</a> </li><li> 按键工具 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">证明书</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">证书工厂</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">证书路径</a> </li></ol><br><h2 id="utilita-keytool">  Keytool实用程序 </h2><br><p> Java Keytool是一种命令行工具，可以生成公用密钥/专用密钥对并将其存储在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">密钥库中</a> 。 该实用程序可执行文件与Java SDK（或JRE）一起分发，因此，如果您已安装SDK，则还将预安装该文件。 <br> 可执行文件称为<code>keytool</code> 。 要执行它，请打开命令提示符（cmd，控制台，shell等）。 并将当前目录更改为Java SDK安装目录中的<code>bin</code>目录。 键入<code>keytool</code> ，然后按<code>Enter</code> 。 您应该看到类似以下内容： </p><br><pre> <code class="plaintext hljs">C:\Program Files\Java\jdk1.8.0_111\bin&gt;keytool Key and Certificate Management Tool Commands: -certreq Generates a certificate request -changealias Changes an entry's alias -delete Deletes an entry -exportcert Exports certificate -genkeypair Generates a key pair -genseckey Generates a secret key -gencert Generates certificate from a certificate request -importcert Imports a certificate or a certificate chain -importpass Imports a password -importkeystore Imports one or all entries from another keystore -keypasswd Changes the key password of an entry -list Lists entries in a keystore -printcert Prints the content of a certificate -printcertreq Prints the content of a certificate request -printcrl Prints the content of a CRL file -storepasswd Changes the store password of a keystore Use "keytool -command_name -help" for usage of command_name C:\Program Files\Java\jdk1.8.0_111\bin&gt;</code> </pre> <br><p> 如您所见， <code>keytool</code>实用程序支持一组用于处理密钥，证书和密钥库的命令。 本指南将介绍这些命令中最常用的。 </p><br><h3 id="skripty-keytool"> 键盘工具脚本 </h3><br><p>  <code>Keytool</code>命令<code>Keytool</code>许多参数，安装起来可能很难记住。 因此，建议您使用一系列<code>Keytool</code>命令创建多个CMD或Shell脚本。 这些脚本使重新执行命令变得很容易，还使您可以返回并查看密钥库的创建方式。 </p><br><h3 id="generaciya-klyuchevoy-pary"> 密钥对生成 </h3><br><p> 生成密钥对（公钥/私钥）是使用<code>Keytool</code>实用程序的最常见任务之一。 生成的密钥对作为自签名密钥对插入到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">KeyStore</a>文件中。 这是用于生成密钥对的常见命令行格式： </p><br><pre> <code class="plaintext hljs">-genkeypair -alias alias -keyalg keyalg -keysize keysize -sigalg sigalg -dname dname -keypass keypass -validity valDays -storetype storetype -keystore keystore -storepass storepass -providerClass provider_class_name -providerArg provider_arg -v -protected -Jjavaoption</code> </pre> <br><p> 参数在“ Keytool参数”部分中进行了说明。 并非所有这些参数都是必需的，许多是可选的。 如果您错过了必需的参数，该实用程序将通知您。 这是将证书导入<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">KeyStore</a>的命令示例。 在命令行上输入命令时，切记要删除换行符。 </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -importcert -alias testkey -keypass 123456 -storetype JKS -keystore keystore2.jks -file cert.cert -rfc -storepass abcdef</code> </pre> <br><h3 id="spisok-zapisey-hranilischa"> 保管库记录列表 </h3><br><p> 要列出密钥库中的条目，可以使用<code>list</code>命令。 下面是<code>list</code>命令的格式。 换行符旨在易于阅读。 在执行命令之前，请删除换行符： </p><br><pre> <code class="plaintext hljs">-list -alias alias -storetype storetype -keystore keystore -storepass storepass -providerName provider_name -providerClass provider_class_name -providerArg provider_arg -v -rfc -protected -Jjavaoption</code> </pre> <br><p> 这是一个示例<code>list</code>命令。 记住要删除换行符！ </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -list -storetype JKS -keystore keystore.jks -storepass abcdef</code> </pre> <br><p> 此命令将列出此密钥库中的所有条目。 输出将如下所示： </p><br><pre> <code class="plaintext hljs">Keystore type: JKS Keystore provider: SUN Your keystore contains 1 entry testkey, 19-Dec-2017, PrivateKeyEntry, Certificate fingerprint (SHA1): 4F:4C:E2:C5:DA:36:E6:A9:93:6F:10:36:9E:E5:E8:5A:6E:F2:11:16</code> </pre> <br><p> 如果在<code>list</code>命令中包括<code>alias</code>参数，则仅列出与给定别名匹配的条目。 这是带有<code>alias</code>参数的示例<code>list</code>命令： </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -list -alias testkey -storetype JKS -keystore keystore.jks -storepass abcdef</code> </pre> <br><p> 上面命令的结果： </p><br><pre> <code class="plaintext hljs">testkey, 15-Dec-2017, PrivateKeyEntry, Certificate fingerprint (SHA1): 71:B0:6E:F1:E9:5A:E7:F5:5E:78:71:DC:08:80:47:E9:5F:F8:6D:25</code> </pre> <br><h3 id="udalenie-zapisi-hranilischa-klyuchey"> 删除密钥库条目 </h3><br><p> 同样在<code>keytool</code>实用程序中，有一个命令可以从密钥库中<code>delete</code>条目： <code>delete</code> 。 这是此命令的格式： </p><br><pre> <code class="plaintext hljs">-delete -alias alias -storetype storetype -keystore keystore -storepass storepass -providerName provider_name -providerClass provider_class_name -providerArg provider_arg -v -protected -Jjavaoption</code> </pre> <br><p> 这是调用<code>delete</code>的示例。 切记在开始之前删除换行符！ </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -delete -alias testkey -storetype JKS -keystore keystore.jks -storepass abcdef</code> </pre> <br><p> 此命令将删除别名存储在<code>keystore.jks</code>文件中的<code>keystore.jks</code>库条目。 </p><br><h3 id="generaciya-zaprosa-na-sertifikat"> 证书申请生成 </h3><br><p>  <code>keytool</code>实用程序可以使用<code>certreq</code>生成证书请求。 证书请求是对证书颁发机构（CA）创建组织的公共证书的请求。 创建证书请求后，必须将其发送到要创建证书的证书颁发机构（例如，Verisign，Thawte或其他证书颁发机构）。 在生成私钥和一对公钥的证书请求之前，必须在密钥存储区中生成此私钥和一对公钥（或将其导入）。 如何做到这一点可以在相应的章节中找到。 这是用于生成证书请求的命令格式。 使用此命令时，请记住删除所有换行符： </p><br><pre> <code class="plaintext hljs">-certreq -alias alias -sigalg sigalg -file certreq_file -keypass keypass -storetype storetype -keystore keystore -storepass storepass -providerName provider_name -providerClass provider_class_name -providerArg provider_arg -v -protected -Jjavaoption</code> </pre> <br><p> 这是<code>-certreq</code>的示例： </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -certreq -alias testkey -keypass 123456 -storetype JKS -keystore keystore.jks -storepass abcdef -file certreq.certreq</code> </pre> <br><p> 该命令将为以别名<code>testkey</code>保存在<code>keystore.jks</code>文件中的<code>keystore.jks</code>生成证书请求，并将证书请求写入名为<code>certreq.certreq</code>的文件中。 </p><br><h3 id="argumenty-utility-keytool">  Keytool实用程序参数 </h3><br><p> 以下是各种<code>keytool</code>命令<code>keytool</code>的参数列表。 请记住，并非所有团队都接受所有这些论点。 查看特定的命令以查看需要什么参数。 </p><br><ul><li>  <code>-alias</code>条目的别名。 记住别名 <br> 只能指向一个键。 </li><li>  <code>-keyalg</code>用于生成密钥的算法的名称。 常用的RSA。 </li><li>  <code>-keysize</code>密钥大小（以位为单位）。 通常，密钥大小为多个。 另外，各种算法只能支持某些预定义的密钥大小。 </li><li>  <code>-sigalg</code>用于对密钥对进行签名的签名算法。 </li><li>  <code>-dname</code> X.500标准中的唯一名称。 此名称将与 <br> 密钥库中此密钥对的别名，也 <br> 在自签名中用作字段“发出者”和“主题” <br> 证书。 </li><li>  <code>-keypass</code>所需的密钥对密码 <br> 访问密钥库中的此特定密钥对。 </li><li>  <code>-validity</code>证书的天数 <br> 附加在密钥对上的密码必须有效。 </li><li>  <code>-storetype</code>应当保存密钥库的文件格式。 默认值为JKS。 另一种选择是PKCS11格式。 </li><li>  <code>-keystore</code>用于存储生成的对的存储库文件的名称 <br> 键。 如果文件不存在，将创建它。 </li><li>  <code>-file</code>读取或写入证书或请求证书的文件名。 </li><li>  <code>-storepass</code>密钥库中的密码，给想要工作的任何人 <br> 使用它，您需要此密码。  <code>storepass</code>和<code>keypass</code>之间的区别 <br> 第一个提供对存储库的访问，第二个提供对单独存储库的访问 <br> 一对钥匙。 您将需要两个密码才能访问任何密钥， <br> 存储在存储中。 </li><li>  <code>-rfc</code>如果启用此标志，则该实用程序将使用文本格式而不是二进制格式，例如，用于导出或导入证书。  -Rfc值 <br> 参考RFC 1421 </li><li>  <code>-providerName</code>创建密钥对时要使用的加密API提供程序的名称。 提供程序名称必须在Java安全属性文件中指定。 </li><li>  <code>-providerClass</code>您要使用的加密API提供程序的根类的名称。 在Java安全属性文件中未指定提供者名称时使用。 </li><li>  <code>-providerArg</code>初始化期间传递给自己的密码提供程序的参数（如果提供程序有必要）。 </li><li>  <code>-v</code>是冗长的缩写，Keytool将以可读格式将许多其他信息打印到命令行。 </li><li>  <code>-protected</code>确定是否应通过某种外部机制（例如，硬件令牌）提供密钥库密码。 有效值为true和false。 </li><li>  <code>-Jjavaoption</code> Java VM <code>-Jjavaoption</code>选项字符串，它生成密钥对并创建存储。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN446322/">https://habr.com/ru/post/zh-CN446322/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN446306/index.html">遥远的核战争？</a></li>
<li><a href="../zh-CN446308/index.html">推荐人招聘在IT中还活着吗？</a></li>
<li><a href="../zh-CN446312/index.html">x86系统中的外部中断。 第1部分。中断控制器的演变</a></li>
<li><a href="../zh-CN446316/index.html">只是空间！ 6.5天之内的大量钛金属</a></li>
<li><a href="../zh-CN446320/index.html">3D扫描仪如何允许放弃桥梁的全面控制组件</a></li>
<li><a href="../zh-CN446324/index.html">使用Yandex.Navigator在DataGrip中导航</a></li>
<li><a href="../zh-CN446326/index.html">解决交通问题</a></li>
<li><a href="../zh-CN446328/index.html">为什么我们需要短信接收服务，以及它们与什么一起吃</a></li>
<li><a href="../zh-CN446330/index.html">自动机器反对意大利面条代码</a></li>
<li><a href="../zh-CN446332/index.html">IBM System i（又名AS / 400）-我们如何进行绿屏应用程序自动测试</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>