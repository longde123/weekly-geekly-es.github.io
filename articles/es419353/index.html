<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçü§ù‚Äçüë®üèª üë®üèæ‚Äçüè≠ üì± Lo que le espera antes, despu√©s y durante la transici√≥n a Kubernetes - nota comercial üçÉ ü§æüèΩ üëÇüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! 

 En este art√≠culo, decidimos especular un poco sobre cu√°ndo y por qu√© las empresas necesitan Kubernetes. Qu√© dif√≠cil es la tecnolog√≠a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lo que le espera antes, despu√©s y durante la transici√≥n a Kubernetes - nota comercial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/419353/">  Hola a todos! <br><br>  En este art√≠culo, decidimos especular un poco sobre cu√°ndo y por qu√© las empresas necesitan Kubernetes.  Qu√© dif√≠cil es la tecnolog√≠a de entrada, qu√© tan r√°pido y c√≥mo valdr√° la pena.  ¬øVale la pena y lo que todo amenaza?  No nos propusimos la tarea de escribir una revisi√≥n t√©cnica profunda, de la cual hay muchas, pero en los siguientes materiales definitivamente compartiremos nuestras mejores pr√°cticas en t√©rminos de arquitectura de aplicaciones y estabilidad bajo Kubernetes.  Ahora nos enfocamos en si el juego vale la pena y lo que obtenemos al salir. <br><br><img src="https://habrastorage.org/webt/tn/tb/cj/tntbcjekwq04x9inchtup9hyahi.png"><br><a name="habracut"></a><br>  El tiempo de comercializaci√≥n, la velocidad de actualizaci√≥n de las actualizaciones en el mercado, hoy se est√° convirtiendo en un factor clave en la efectividad de las soluciones de TI.  El producto debe mejorarse todos los d√≠as: agregue nuevas funciones y m√≥dulos, mantenga la documentaci√≥n y los scripts en perfectas condiciones.  Al mismo tiempo, los sistemas en l√≠nea deben funcionar sin problemas y actualizarse sin afectar a los usuarios. <br><br>  Protegiendo la discreta actualizaci√≥n continua est√°n los microservicios, los contenedores y la infraestructura para su orquestaci√≥n: Kubernetes (o K8S, se llama en c√≠rculos t√©cnicos). <br><br><h2>  C√≥mo Kubernetes proporciona actualizaciones continuas del sistema </h2><br>  La tarea principal al actualizar una soluci√≥n de TI es garantizar su correcto funcionamiento despu√©s de la transferencia del entorno de desarrollo a la plataforma del producto.  Y tambi√©n en el buen funcionamiento del sistema a la hora de actualizar el producto. <br><br>  El problema radica en el hecho de que la configuraci√≥n del entorno de desarrollo y los servidores industriales a menudo no coinciden.  Los contenedores solucionan este problema combinando todos los componentes de software en un paquete aislado del entorno externo.  Esto le permite implementar aplicaciones de manera r√°pida y confiable en cualquier infraestructura y facilita la actualizaci√≥n de la base de c√≥digo del sistema. <br><br>  Inadvertidos por los usuarios, las actualizaciones se realizan mediante la duplicaci√≥n de contenedores y la redirecci√≥n secuencial de los usuarios de uno a otro.  Para la gesti√≥n de contenedores (orquestaci√≥n) utilizamos Kuberenetes.  En √∫ltima instancia, facilita la gesti√≥n de la soluci√≥n, la implementaci√≥n y la actualizaci√≥n, la supervisi√≥n del rendimiento y la depuraci√≥n en caso de falla. <br><br><h2>  Cuando una empresa necesita Kubernetes </h2><br>  Es hora de que las empresas piensen en cambiarse a la plataforma Kubernetes cuando: <br><br><ul><li>  Un proyecto o sistema es una herramienta importante para las empresas y, por lo tanto, debe ser tolerante a fallas y continuar funcionando, incluso si alguna parte est√° fuera de servicio. </li><li>  El sistema est√° muy cargado, mientras mantiene actualizaciones o mejoras r√°pidas. </li><li>  El sistema necesita peri√≥dicamente capacidad adicional.  Y los necesita con prontitud. </li><li>  Y con todo esto, la velocidad de entrega de actualizaciones al entorno industrial se mide en semanas, meses, a√±os, pero nunca en horas o d√≠as. </li></ul><br>  Tambi√©n necesita Kubernetes como herramienta para la automatizaci√≥n y estandarizaci√≥n del trabajo con la soluci√≥n, si adem√°s de lo anterior: <br><br><ul><li>  No hay aislamiento entre los sistemas de TI de la empresa y cada uno puede influir en el otro. </li><li>  Si necesita escribir un script por separado cada vez para comunicarse con los par√°metros del servidor en el que se implementa el sistema, es decir, puede escalar este proceso solo a mano. </li><li> Hay personas clave en el equipo de desarrollo: portadores de "conocimiento secreto" sobre el proyecto o sistema, y ‚Äã‚Äãparecen √∫nicos e irremplazables. </li></ul><br>  Esencialmente, cambiar a Kubernetes es una necesidad para las empresas que necesitan soportar sistemas de informaci√≥n en l√≠nea 24/7. <br><br><h2>  ¬øPor qu√© kubernetes? </h2><br>  Kubernetes no es la √∫nica alternativa para la integraci√≥n y la implementaci√≥n continuas (CI / CD).  Pero fue Kubernetes el que se convirti√≥ en el est√°ndar de la industria para administrar sistemas que requieren alta disponibilidad. <br><br>  Para nosotros, como desarrolladores, los argumentos decisivos a favor de Kubernetes son los siguientes: <br><br><ul><li>  La plataforma se centra en aplicaciones, no en infraestructura. </li><li>  Kubernetes es conveniente para trabajar con un centro de datos, as√≠ como con varios, distribuidos en diferentes ciudades. </li><li>  Soporte de soluci√≥n f√°cil a trav√©s de documentaci√≥n clara y una comunidad activa. </li><li>  Configuraci√≥n flexible de diferentes aplicaciones, distribuci√≥n segura del tr√°fico. </li><li>  Soporte para contenedores Docker. </li></ul><br><h2>  ¬øCu√°les son los beneficios del negocio de Kubernetes? </h2><br><ul><li>  Configuraci√≥n flexible y proceso de actualizaci√≥n automatizado. <br>  Usted mismo determina qu√© parte del sistema poner en operaci√≥n comercial.  Kubernetes te permite hacer un ciclo de lanzamiento corto.  Todas las operaciones, desde el c√≥digo fuente del sistema hasta el lanzamiento al entorno del producto, se realizan autom√°ticamente.  No necesita un equipo de ingenieros para que el sistema funcione.  Las actualizaciones actuales no afectan el rendimiento del sistema y pueden llevarse a cabo en cualquier momento conveniente para los desarrolladores. </li><li>  Colocaci√≥n y escalado del sistema. <br>  El sistema se puede colocar tanto en la potencia inform√°tica del cliente (o en el centro de datos) como en cualquier proveedor de la nube, por ejemplo, Amazon o Azure.  Cualquier nivel de rendimiento y tolerancia a fallas se puede lograr f√°cilmente escalando el cl√∫ster. </li><li>  Estandarizaci√≥n y auto documentaci√≥n <br>  La soluci√≥n no requiere instrucciones.  Se auto documenta y se empaqueta autom√°ticamente en una unidad de uso: un contenedor.  Describimos la configuraci√≥n en Kubernetes como un plan / diagrama.  No escribimos guiones que preparen el entorno, como era antes de Kubernetes.  En cambio, pasamos a Kubernetes informaci√≥n (un diagrama) sobre c√≥mo deber√≠a funcionar la soluci√≥n.  Y √©l mismo implementa este esquema. <br><br>  Los desarrolladores ahora est√°n escribiendo una aplicaci√≥n para trabajar en un contenedor.  Los ingenieros de DevOps escriben un diagrama de c√≥mo deber√≠a funcionar una aplicaci√≥n en un contenedor, y Kubernetes realiza las tareas de crear una soluci√≥n. <br><br>  La tecnolog√≠a de Kubernetes est√° estandarizada.  Le resultar√° f√°cil capacitar a un nuevo empleado en su sistema de liberaci√≥n o transferir el sistema a un nuevo contratista. <br><br>  La descripci√≥n final de la configuraci√≥n que crea Kubernetes es tambi√©n la documentaci√≥n del sistema.  De los nombres queda claro de inmediato qu√© par√°metros est√°n configurados y para qu√© sirven. <br><br>  Debido a esto, la plataforma Kubernetes en su conjunto universaliza los lanzamientos, las actualizaciones y el lanzamiento de la aplicaci√≥n. </li></ul><br><ul><li>  Prueba en vivo sin dolor <br>  El proceso de probar la soluci√≥n ha cambiado.  Los desarrolladores pueden, bajo demanda, crear entornos que sean id√©nticos a los del producto para pruebas automatizadas.  Y los registros generales de la aplicaci√≥n y Kubernetes que trabajan con la aplicaci√≥n ayudan a investigar problemas y encontrar errores a√∫n m√°s r√°pido. </li></ul><br><h2>  Lo que requerir√° una transici√≥n comercial a Kubernetes </h2><br>  Kubernetes solo ser√° una peque√±a parte de su nuevo sistema.  Debe estar preparado para que Kubernetes sea una herramienta para estandarizar todo el ciclo de desarrollo, actualizar y publicar aplicaciones implicar√° un cambio en todo en el momento de la transici√≥n: arquitectura de software, proceso de desarrollo y mantenimiento de la infraestructura. <br><br><ul><li>  Arquitectura de soluciones <br>  Desde el punto de vista del producto, la transici√≥n es posible solo si el sistema se implementa o actualiza a una arquitectura de microservicio basada en servicios que se pueden empaquetar en contenedores (servicios sin estado). </li><li>  Proceso de desarrollo <br>  Desde el punto de vista del proceso de desarrollo, la transici√≥n implica principalmente un cambio de pensamiento.  Cualquier mejora situacional y "muletas" agregadas en el √∫ltimo momento est√°n completamente excluidas.  Un desarrollador de soluciones de TI puede trabajar solo como un equipo, lo que inicialmente hace un producto descompuesto, compatible, compatible y inicialmente probado.  Todo debe construirse l√≥gicamente desde la primera l√≠nea de c√≥digo hasta la operaci√≥n. </li><li>  Proceso de actualizaci√≥n <br>  Incluso en la etapa de desarrollo de la arquitectura de la aplicaci√≥n, debe pensar en c√≥mo actualizar la soluci√≥n sin detenerse.  E inmediatamente comprenda c√≥mo actualizar√° la base de datos, la API, c√≥mo es l√≥gico admitir varias versiones de la aplicaci√≥n, teniendo en cuenta el hecho de que las personas trabajan con el sistema durante la actualizaci√≥n y pueden caer en diferentes versiones. <br><br>  Y un pensamiento m√°s est√° relacionado con el hecho de que cuando se cambia a Kubernetes, la infraestructura comienza a funcionar en modo de solo lectura, y para actualizar el sistema, debe crear nuevas versiones de las im√°genes de la aplicaci√≥n y decirle a Kubernetes que use la nueva versi√≥n, y luego apagar√° la versi√≥n anterior y se eliminar√° a s√≠ mismo. </li></ul><br><br>  Para que las mejoras del sistema y los cambios en la tecnolog√≠a del trabajo no puedan evitarse.  Moverse no ser√° r√°pido.  Pero necesitar√° cambiar el paradigma solo una vez. <br><br><h2>  Caso.  C√≥mo transferimos el sistema de microservicios a Kubernetes </h2><br>  Operamos en un entorno de producto una soluci√≥n altamente cargada basada en la arquitectura de microservicios, que transmite m√°s de 300 mil transacciones por d√≠a, y en las horas punta: 60-80 mil por hora.  Actualizamos regularmente el producto, tambi√©n hay versiones m√°s urgentes que antes requer√≠an suspender el sistema o parte de su funcionalidad por un tiempo. <br><br>  Entramos en el entorno de la tienda de comestibles sin K8S, pero desarrollamos el sistema inicialmente con un ojo.  Tom√≥ 6 semanas traducir la soluci√≥n a Kubernetes.  Nos movimos en las siguientes direcciones: <br><br><h4>  1) Configuraci√≥n de la tuber√≠a de implementaci√≥n </h4><br>  a.  Configurar la canalizaci√≥n para el ensamblaje continuo, las pruebas y la actualizaci√≥n de aplicaciones (CI / CD) en entornos de prueba. <br>  b.  Configure actualizaciones continuas en un entorno industrial. <br>  c.  Preparaci√≥n y configuraci√≥n del entorno lo m√°s cerca posible del entorno industrial (preprod).  Implementamos y probamos el cl√∫ster junto a las m√°quinas virtuales actuales. <br>  d.  Desarrollo de un plan de migraci√≥n a un entorno industrial. <br><br>  Entonces, todo parece ser simple, tenemos una tuber√≠a de CI / CD para todos los entornos y puede cambiar, ¬°pero es demasiado pronto! <br><br><h4>  2) Selecci√≥n de configuraci√≥n de cl√∫ster </h4><br>  Pasamos un par de semanas seleccionando la configuraci√≥n m√°s estable de componentes y versiones del cl√∫ster de Kubernetes: sistema operativo + Docker + Kubernetes. <br><br>  Probamos 3 configuraciones diferentes de sistemas operativos (Ubuntu, CentOS, √∫ltimas versiones de Oracle Linux).  En cada sistema operativo, verificamos 2 versiones diferentes de Docker y Kubernetes, la que se entreg√≥ en las √∫ltimas versiones de los paquetes est√°ndar del sistema operativo y la √∫ltima versi√≥n del fabricante.  Como resultado, las configuraciones de la distribuci√≥n est√°ndar de Oracle Linux mostraron la mayor estabilidad, y nos decidimos por ellas. <br><br><h4>  3) Configurar ajustes de contenedor </h4><br>  Dedicamos un poco m√°s de tiempo a ajustar los par√°metros del contenedor: configuramos los requisitos de memoria, disco y procesos. <br><br>  Y solo despu√©s de que hicimos todo esto y probamos varios par√°metros del funcionamiento del sistema (estabilidad, tolerancia a fallas y otros) en el preproceso bajo cargas cercanas a las de combate, y el sistema funcion√≥ de manera estable, pasamos a la etapa final: migraci√≥n. <br><br>  Entonces todo fue simple. <br><br><h4>  D√≠a C. Migraci√≥n </h4><br>  Para la migraci√≥n de combate, elegimos el tiempo con la carga m√≠nima del sistema: el n√∫mero m√≠nimo de usuarios y la ausencia de una carga aumentada de acuerdo con el programa de trabajo interno de los algoritmos del sistema. <br><br>  El tiempo de inactividad del sistema fue de aproximadamente una hora y pr√°cticamente no afect√≥ a los usuarios.  La migraci√≥n en s√≠ consisti√≥ en cambiar a los usuarios de un sistema a otro y observar que todo sali√≥ bien. <br><br><h4>  La vida con kubernetes </h4><br>  Ahora el proceso de actualizaci√≥n no afecta el rendimiento del sistema, puede llevarse a cabo en cualquier momento conveniente para los desarrolladores y tiene el siguiente aspecto: <br><br><ol><li>  Los desarrolladores hicieron una revisi√≥n, la probaron y enviaron el c√≥digo a la publicaci√≥n. </li><li>  El c√≥digo se ensambl√≥ autom√°ticamente, se empaquet√≥ en im√°genes acoplables y se public√≥ en un repositorio privado de acopladores. </li><li>  Kubernetes genera autom√°ticamente nuevas versiones de servicios, verifica que los servicios funcionen correctamente, cambia a los usuarios para que usen nuevas versiones de servicios, detiene el trabajo de versiones antiguas y las elimina del cl√∫ster.  La actualizaci√≥n ha tenido lugar. </li></ol><br><h2>  Resumiendo nuestra experiencia </h2><br>  Necesitas Kubernetes si: <br><br><ol><li>  Se requiere alta disponibilidad del sistema. </li><li>  El sistema se est√° desarrollando din√°micamente y debe realizar cambios en el entorno del producto con los ojos cerrados. </li><li>  Desea trabajar como un solo equipo desde el c√≥digo hasta el entorno del producto. </li><li>  Est√° creando un sistema din√°mico y en evoluci√≥n que operar√° durante a√±os. </li></ol><br>  Kubernetes es "costoso", ya que ingresar a la tecnolog√≠a requerir√°: <br><br><ol><li>  Estudiar por desarrolladores de tecnolog√≠as relacionadas. </li><li>  Revisi√≥n de los procesos de dise√±o, desarrollo, implementaci√≥n, pruebas y gesti√≥n ambiental. </li><li>  Experiencia en el funcionamiento de Kubernetes: ahora necesita supervisar no solo su sistema, sino tambi√©n los servicios de aplicaciones de Kubernetes. </li></ol><br>  Paga a Kubernetes muy r√°pido: <br><br><ol><li>  El procedimiento de actualizaci√≥n del sistema es mucho m√°s simple y r√°pido.  Los desarrolladores se liberan de todo un bloque de mano de obra. </li><li>  Cada nuevo especialista ingresar√° al proyecto ya sobre rieles. </li><li>  El transportador ser√° transparente y automatizado. </li><li>  Su equipo repetir√° la experiencia para otros sistemas. </li><li>  Actualizar√° el sistema sin ponerlo fuera de operaci√≥n, lo que significa que no detendr√° el negocio. </li></ol><br>  PD Consejos pr√°cticos: divida la entrada a la tecnolog√≠a en dos etapas: desarrollar un sistema con la arquitectura de microservicio adecuada y moverlo bajo el control de K8S.  Por lo tanto, la transici√≥n bajo Kubernetes no se convertir√° en una refactorizaci√≥n global. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419353/">https://habr.com/ru/post/es419353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419339/index.html">Desaf√≠os de Boeing y √©xitos de SpaceX en la Conferencia del Grupo Asesor de Seguridad Aeroespacial</a></li>
<li><a href="../es419341/index.html">Lo que no dicen sobre el informe Tesla</a></li>
<li><a href="../es419345/index.html">Informe del Club de Roma 2018, Cap√≠tulo 3.8: ‚ÄúLa econom√≠a de ciclo cerrado requiere una l√≥gica diferente‚Äù</a></li>
<li><a href="../es419347/index.html">UE4 | Inventario para Multijugador # 3 | Estructura de interacci√≥n</a></li>
<li><a href="../es419349/index.html">Por qu√© la priorizaci√≥n laboral y de valor no funciona</a></li>
<li><a href="../es419357/index.html">Actualizaci√≥n de Webmeeting de 3CX: mejora de la interfaz de usuario, barra multimedia y estad√≠sticas de calidad de comunicaci√≥n</a></li>
<li><a href="../es419359/index.html">PHP Digest No. 136 (24 de julio - 6 de agosto de 2018)</a></li>
<li><a href="../es419361/index.html">thindf - nuevo formato de datos de texto (alternativa a JSON)</a></li>
<li><a href="../es419363/index.html">Lanzamiento de GitLab 11.1: Panel de control de seguridad y b√∫squeda avanzada</a></li>
<li><a href="../es419365/index.html">Historias de un abogado de TI. Negocio de outsourcing de vida. Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>