<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö£üèº üëäüèæ üåÆ Qu√£o seguro √© usar pacotes R para trabalhar com a API de sistemas de publicidade üéÖüèª üò® ‚ùì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, muitas vezes eles come√ßaram a me fazer uma pergunta sobre o qu√£o seguro √© usar v√°rias extens√µes prontas, ou seja, pacotes escritos para ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qu√£o seguro √© usar pacotes R para trabalhar com a API de sistemas de publicidade</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430888/"><p> Recentemente, muitas vezes eles come√ßaram a me fazer uma pergunta sobre o qu√£o seguro √© usar v√°rias extens√µes prontas, ou seja,  pacotes escritos para o idioma R, existe a chance de a conta de publicidade cair nas m√£os erradas </p><br><p>  Neste artigo, falarei detalhadamente sobre como o mecanismo de autoriza√ß√£o funciona na maioria dos pacotes e APIs de servi√ßos de publicidade e como usar os pacotes descritos no artigo da maneira mais segura poss√≠vel. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bca/7b8/9dc/bca7b89dc9efcb6238b8ab3f6f0a1116.jpg" alt="imagem"></div><a name="habracut"></a><br>  As informa√ß√µes contidas neste artigo n√£o s√£o tecnicamente as mais f√°ceis, portanto, para que o texto n√£o seja t√£o √°rduo e t√©cnico quanto a ajuda usual, ouso tentar o papel de um guia e guiar√° voc√™ pelos materiais deste artigo para sua percep√ß√£o mais simples. <br><p>  Nosso √¥nibus j√° chegou, sente-se e confira nosso itiner√°rio atual. </p><br><h2 id="soderzhanie">  Conte√∫do </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como o processo de autoriza√ß√£o funciona nos servi√ßos de publicidade mais modernos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">De onde veio a pergunta de seguran√ßa</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que o amea√ßa com uma intercep√ß√£o de token</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que fazer se algu√©m tomou posse do seu token</a> </li><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como usar com mais seguran√ßa os pacotes R para trabalhar com os sistemas de publicidade da API</a> </p><br><p>  5.1  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#ryandexdirecthttpsgithubcomselesnowryandexdirect-i-rym">ryandexdirect e rym - Pacotes para trabalhar com as APIs Yandex.Direct e Yandex.Metrica</a> <br>  5.2  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#rfacebookstat">rfacebookstat- Pacotes para trabalhar com a conta de publicidade do Facebook</a> <br>  5.3  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#rvkstat">rvkstat - Pacotes para trabalhar com a conta VK</a> <br>  5.4  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#rmytarget">rmytarget - Pacotes do painel MyTarget</a> </p><br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conclus√£o</a> </li></ol><br><h2 id="kak-ustroen-process-avtorizacii-v-bolshinstve-sovremennyh-reklamnyh-servisov">  Como o processo de autoriza√ß√£o funciona nos servi√ßos de publicidade mais modernos </h2><br><p>  O ponto de encontro do nosso grupo de excurs√£o √© o protocolo OAuth. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2f8/fe9/b7a/2f8fe9b7a06b8ee4007f04aedd3bbbca.jpg"></p><br><p>  Quase todos os servi√ßos com os quais a API eu tive que trabalhar executam a autoriza√ß√£o usando o protocolo OAuth 2.0, eles j√° escreveram com mais detalhes sobre isso no hub, que est√£o interessados ‚Äã‚Äãem dar uma volta pela natureza, por favor, voc√™ tem essa oportunidade, pode faz√™-lo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Se voc√™ explica seu significado em poucas palavras, o OAuth permite que o aplicativo (no nosso caso, o pacote R seja um aplicativo), ao qual voc√™ concedeu permiss√£o, execute algumas a√ß√µes em seu nome, sem a necessidade de transferir seu nome de usu√°rio e senha da conta de publicidade para esse aplicativo, novamente por raz√µes de seguran√ßa. </p><br><p>  Em vez de um nome de usu√°rio e senha, o protocolo OAuth usa um token, √© uma sequ√™ncia gerada que consiste em um conjunto de letras e n√∫meros, que armazena informa√ß√µes na forma criptografada: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/7ad/5e4/eed/7ad5e4eed98381e9d537fdcbd9e59fcd.png"></p><br><ul><li>  Em nome de qual usu√°rio o aplicativo executa a solicita√ß√£o </li><li>  O usu√°rio realmente permitiu que esse aplicativo acesse seus dados </li><li>  O pr√≥prio usu√°rio tem as permiss√µes necess√°rias para trabalhar com os materiais publicit√°rios aos quais ele se refere </li></ul><br><p>  Para o processo de autoriza√ß√£o e o trabalho com a API, geralmente voc√™ precisa registrar o aplicativo na API.  Al√©m disso, esse aplicativo deve receber confirma√ß√£o da equipe de suporte da API de um sistema de publicidade espec√≠fico, ou seja,  o autor descreve inicialmente detalhadamente como e por que ele usar√° a API, tudo isso √© verificado, moderado e somente se o suporte ao lado da plataforma de publicidade n√£o tiver perguntas de seguran√ßa o autor do pacote ter√° acesso √† API e, com a ajuda de seu aplicativo registrado, voc√™ pacote, voc√™ pode se autenticar usando o ID e o segredo emitidos para este aplicativo. </p><br><h2 id="otkuda-voznik-vopros-bezopasnosti">  De onde veio a pergunta de seguran√ßa </h2><br><p>  Estamos seguindo em frente, vamos tentar descobrir onde a quest√£o de seguran√ßa surgiu ao usar pacotes? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/936/2cc/0c6/9362cc0c6ecf870b58c9b45d32e9299f.jpg"></p><br><p>  Em geral, a quest√£o da seguran√ßa do acesso aos pain√©is de publicidade √© mais do que justificada, uma vez que os escrit√≥rios de publicidade t√™m dinheiro, e geralmente n√£o s√£o pequenos o suficiente, ent√£o a seguran√ßa das contas de publicidade √© uma quest√£o muito mais s√©ria do que a seguran√ßa do acesso, por exemplo, a um perfil de usu√°rio comum nas redes sociais. </p><br><p>  O fato √© que, na maioria dos casos, ao autorizar, o R redireciona os usu√°rios dos pacotes para o navegador, inicialmente para confirmar o acesso √† conta; nesse momento, voc√™ est√° na p√°gina de servi√ßo da API com a qual trabalhar√°.  Ap√≥s a confirma√ß√£o, o usu√°rio √© redirecionado para a p√°gina em que o token ser√° gerado ou o c√≥digo de confirma√ß√£o da autoriza√ß√£o, que deve ser posteriormente inserido no R. </p><br><p>  Portanto, a maioria dos usu√°rios est√° preocupada porque os sites em que o pr√≥prio token ou o c√≥digo de confirma√ß√£o de autoriza√ß√£o s√£o gerados s√£o de terceiros e n√£o t√™m nada a ver com o pr√≥prio servi√ßo de publicidade, √© claro que eles t√™m um contador do Google Analytics ou um Yandex.Metrica e o propriet√°rio do site, que na maioria dos casos tamb√©m √© o autor do pacote, de acordo com muitos, atrav√©s deste site, ele pode se apossar de seus tokens e obter acesso para gerenciar seus materiais de publicidade por meio deles. </p><br><h2 id="chem-vam-grozit-perehvat-tokena">  O que o amea√ßa com uma intercep√ß√£o de token </h2><br><p>  Vamos falar sobre o que geralmente permite que voc√™ fa√ßa um token se ele cair nas m√£os de um invasor. </p><br><p>  O token deve ser armazenado da mesma maneira que todos os outros dados necess√°rios para acessar a conta, ou seja,  se o token cair nas m√£os erradas, quem o possui poder√° gerenciar seus materiais de publicidade: exclua-os, altere, por exemplo, ser√° poss√≠vel alterar o texto do an√∫ncio e o link para o qual ele leva. </p><br><p>  A boa not√≠cia √© que, como escrevi acima, o protocolo OAuth permite que voc√™ gerencie seus materiais de publicidade sem fornecer um nome de usu√°rio e senha de sua conta, ou seja,  mesmo que algu√©m tenha tomado posse do seu token, ele n√£o poder√° roubar sua conta com a ajuda dele.  Nem uma √∫nica API permite que voc√™ solicite, e mais ainda, altere sua senha para n√£o perder sua conta, mas √© f√°cil anunciar seu site por meio dela. </p><br><h2 id="chto-delat-esli-kto-to-zavladel-vashim-tokenom">  O que fazer se algu√©m tomou posse do seu token </h2><br><p>  Se aconteceu que voc√™ acidentalmente transferiu seu token, n√£o entre em p√¢nico.  Na verdade, esse n√£o √© o fim do mundo; na maioria dos casos, existem v√°rias a√ß√µes que redefinem tokens emitidos anteriormente; por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nesta se√ß√£o da refer√™ncia da API Yandex.Direct, o</a> processo de recupera√ß√£o de tokens emitidos anteriormente √© descrito em detalhes. </p><br><p>  Na maioria dos casos, independentemente da API do sistema de publicidade em que voc√™ estiver trabalhando, basta alterar a senha da sua conta. </p><br><h2 id="kak-naibolee-bezopasno-ispolzovat-r-pakety-dlya-raboty-s-api-reklamnyh-sistem">  Como usar com mais seguran√ßa os pacotes R para trabalhar com os sistemas de publicidade da API </h2><br><p>  E agora que chegamos √† parte mais interessante de nosso tour, falarei sobre como √© mais seguro usar os pacotes que desenvolvi, j√° que estou familiarizado com as APIs dos sistemas com os quais trabalham. </p><br><p>  Quero observar que todos os tokens emitidos s√£o armazenados no lado da plataforma de publicidade, e n√£o o aplicativo pelo qual o pacote R funciona, portanto, mesmo o usu√°rio do aplicativo registrado para trabalhar com a API da plataforma de publicidade n√£o tem acesso ao pr√≥prio token. </p><br><h3 id="ryandexdirecthttpsgithubcomselesnowryandexdirect-i-rymhttpsgithubcomselesnowrym---pakety-dlya-raboty-s-api-yandeksdirekt-i-yandeksmetriki">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ryandexdirect</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rym</a> - Pacotes para trabalhar com as APIs Yandex.Direct e Yandex.Metrica </h3><br><p>  Ambos os pacotes usam o servi√ßo Yandex OAuth; para obter mais detalhes, consulte este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> . </p><br><p>  Existem 2 fun√ß√µes no pacote ryandexdirect para autoriza√ß√£o: </p><br><ul><li> <code>yadirAuth</code> - autoriza√ß√£o em duas etapas </li><li>  <code>yadirGetToken</code> - solicita√ß√£o de um token de autoriza√ß√£o </li></ul><br><p>  Ao usar a fun√ß√£o yadirAuth, ou seja, eu recomendo us√°-la ao trabalhar com o ryandexdirect, o processo de autoriza√ß√£o prossegue de acordo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com o</a> esquema descrito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , a √∫nica vulnerabilidade nesse caso √© o per√≠odo a partir do momento em que o c√≥digo de confirma√ß√£o √© gerado at√© que seja inserido no console R. </p><br><p>  Explicarei o motivo: veja como o Google Analytics exibe dados sobre visitas √† p√°gina de gera√ß√£o de <strong>c√≥digo de verifica√ß√£o</strong> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/61e/43a/5bc/61e43a5bcd179c4a8008feb36245f9e1.png"></p><br><p>  I.e.  o c√≥digo vem ap√≥s o sinal '?' e √© considerado um par√¢metro GET que captura o contador do Google Analytics, mas a vida √∫til desse c√≥digo de confirma√ß√£o termina imediatamente ap√≥s o uso, ou seja,  logo ap√≥s inseri-lo no console R. A vida √∫til m√°xima desse c√≥digo √© de 10 minutos. </p><br><p>  A segunda fun√ß√£o, <code>yadirGetToken</code> , executa a autoriza√ß√£o de acordo com o outro esquema descrito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  E ao us√°-lo, nenhum c√≥digo de confirma√ß√£o √© gerado, ou seja,  Depois de conceder ao pacote permiss√£o para acessar os dados, voc√™ acessa a p√°gina de gera√ß√£o de token.  O token no pr√≥prio URL √© retornado ap√≥s o sinal '#', este n√£o √© um par√¢metro get, mas uma √¢ncora ou, como essa parte do URL tamb√©m √© chamada de hash.  O navegador n√£o transmite esses dados; portanto, n√£o √© transferido para os relat√≥rios do Google Analytics, ou seja,  as visitas a esta p√°gina nos relat√≥rios s√£o exibidas assim: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/633/040/b06/633040b066ca52c3ffba4d6d464dee02.png"></p><br><p>  Nesse segundo caso, n√£o h√° riscos, mas o menos do uso da fun√ß√£o yadirGetToken √© que ela n√£o salva as credenciais em um arquivo no seu PC e, portanto, n√£o pode usar esses dados entre diferentes sess√µes R, o que n√£o √© muito conveniente.  Voc√™ armazenar√° o token obtido com sua ajuda e usar√° nos scripts como uma sequ√™ncia de texto, a vida √∫til desse token √© de 1 ano, ap√≥s o qual o pacote n√£o poder√° substitu√≠-lo automaticamente, como acontece ao usar a fun√ß√£o yadirGetAuth. </p><br><p>  Existe uma fun√ß√£o rym_auth no pacote rym para autoriza√ß√£o, que √© um an√°logo completo da fun√ß√£o yadirAuth, cujo esquema de opera√ß√£o j√° descrevi em detalhes. </p><br><h3 id="rfacebookstathttpsgithubcomselesnowrfacebookstat---pakety-dlya-raboty-s-reklamnym-kabinetom-facebook">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rfacebookstat</a> - Pacotes para trabalhar com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conta de</a> publicidade do Facebook </h3><br><p>  O processo de autentica√ß√£o na API de marketing do Facebook √© descrito em detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Para passar a autoriza√ß√£o, o pacote rfacebookstat tem a fun√ß√£o <code>fbGetToken</code> , funciona da mesma forma que a fun√ß√£o <code>yadirGetToken</code> descrita anteriormente no pacote ryandexdirect, ou seja,  tudo √© implementado atrav√©s da autentica√ß√£o em uma etapa.  N√£o h√° perigo de que seu token seja interceptado por meio dos relat√≥rios do Google Analytics; h√° uma tela de como √© a apar√™ncia de uma visita √† p√°gina de gera√ß√£o de token no Google Analytics. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2c5/c13/5e7/2c5c135e71c0fdf1270aed25d59d4cef.png"></p><br><h3 id="rvkstathttpsgithubcomselesnowrvkstat---pakety-dlya-raboty-s-reklamnym-kabinetom-vkontakte">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rvkstat</a> - Pacotes para trabalhar com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conta VK</a> </h3><br><p>  O processo de autentica√ß√£o do Vkontakte √© descrito na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ajuda</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API</a> . <br>  No rvkstat, voc√™ pode usar uma das duas fun√ß√µes para autoriza√ß√£o: </p><br><ul><li>  <code>vkAuth</code> - Esquema de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">autoriza√ß√£o Fluxo do c√≥digo de autoriza√ß√£o</a> , ou seja,  autoriza√ß√£o em duas etapas. </li><li>  <code>vkGetToken</code> - autoriza√ß√£o de acordo com o esquema de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fluxo impl√≠cito</a> , autoriza√ß√£o em uma etapa, com o token vinculado ao dispositivo. </li></ul><br><p>  <code>vkAuth</code> fornece autentica√ß√£o em duas etapas, essencialmente um an√°logo da fun√ß√£o <code>yadirAuth</code> descrita no in√≠cio deste bloco, mas apenas para autoriza√ß√£o na API do Vkontakte e n√£o no Yandex. </p><br><p>  A peculiaridade de trabalhar com a API Vkontakte nesse caso √© que o registro do aplicativo e o acesso √† API s√£o bastante simples, n√£o √© necess√°rio preencher os formul√°rios nos quais voc√™ deve descrever em detalhes como e por que usar a API.  Portanto, como voc√™ usa seu aplicativo ao trabalhar com o rvkstat, mesmo a intercepta√ß√£o do c√≥digo de confirma√ß√£o n√£o funciona, porque  ele est√° vinculado ao seu aplicativo e, para interceptar um token, √© necess√°rio conhecer o <em>ID</em> e o <em>segredo do</em> seu aplicativo; o c√≥digo em si n√£o permitir√° que voc√™ obtenha um token para voc√™. </p><br><p>  A fun√ß√£o <code>vkGetToken</code> permite que voc√™ obtenha o token da maneira mais r√°pida; al√©m disso, o token recebido est√° vinculado ao dispositivo do qual foi solicitado, ou seja,  mesmo que algu√©m entenda, ele pode us√°-lo apenas no mesmo PC em que foi solicitado.  Ao mesmo tempo, o token no URL ao gerar √© ap√≥s o sinal '#' e, como eu disse anteriormente, ele n√£o entra nos relat√≥rios do Google Analytics. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/3d7/f57/b52/3d7f57b52c9f662007c801a4f8c214fc.png"></p><br><h3 id="rmytargethttpsgithubcomselesnowrmytarget---pakety-dlya-raboty-s-reklamnym-kabinetom-mytarget">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rmytarget</a> - Pacotes do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">painel MyTarget</a> </h3><br><p>  No momento, existem tr√™s esquemas de autoriza√ß√£o na API MyTarget. Para obter detalhes sobre cada um, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . </p><br><p>  A fun√ß√£o myTarAuth destina-se √† autoriza√ß√£o na API MyTarget em rmytarget; por padr√£o, ela usa o esquema de autoriza√ß√£o <em>Grant Grant do C√≥digo de Autoriza√ß√£o</em> , que permite trabalhar com a API MyTarget sem ter que acess√°-lo pessoalmente.  I.e.  J√° registrei o aplicativo, ele foi aprovado pelo suporte da API MyTarget e voc√™ concede acesso a ele para trabalhar com a conta em seu nome. </p><br><p>  <em>O c√≥digo de</em> autoriza√ß√£o concedido √© um esquema de autoriza√ß√£o em dois est√°gios, que √© semelhante ao implementado pela fun√ß√£o <code>yadirAuth</code> no pacote ryandexdirect. </p><br><p>  Funciona da seguinte maneira: </p><br><ul><li>  Voc√™ inicia a fun√ß√£o, ap√≥s a qual o navegador √© aberto. </li><li>  Na p√°gina de servi√ßo MyTarget, voc√™ d√° permiss√£o para acessar sua conta. </li><li>  Voc√™ ser√° redirecionado para a p√°gina do pacote em que o c√≥digo de confirma√ß√£o √© gerado.  A vida √∫til m√°xima desse c√≥digo √© de 1 hora, mas termina imediatamente ap√≥s o recebimento de um token. </li><li>  Voc√™ insere o c√≥digo de confirma√ß√£o copiado no console do R e obt√©m um token para trabalhar com a API. </li></ul><br><p>  Nesse caso, o c√≥digo de confirma√ß√£o √© um par√¢metro get e √© registrado nos relat√≥rios do Google Analytics. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f08/183/573/f08183573b76c823fd84e754382fe9bf.png"></p><br><p>  Mas, se voc√™ observar com aten√ß√£o, al√©m do c√≥digo <em>(obter o c√≥digo do par√¢metro)</em> , a URL cont√©m mais um par√¢metro - <em>state</em> .  Essa √© uma sequ√™ncia, tamb√©m um token que √© gerado pelo pr√≥prio pacote rmytarget e enviado ao navegador imediatamente ap√≥s o in√≠cio da fun√ß√£o, esse par√¢metro √© exclusivo e o c√≥digo de confirma√ß√£o de autoriza√ß√£o √© anexado a ele.  Mesmo se voc√™ interceptar o c√≥digo de confirma√ß√£o e o token de estado, ainda n√£o poder√° usar essa combina√ß√£o porque  Em primeiro lugar, n√£o h√° lugar para inserir o token do estado, e como eu j√° escrevi, ele √© √∫nico e, mesmo que houvesse um local para inseri-lo, ele n√£o pode ser enviado novamente.  Portanto, esse esquema de autoriza√ß√£o √© totalmente seguro. </p><br><p>  Mas, mesmo assim, essa op√ß√£o ainda parece suspeita para voc√™, ent√£o rmytarget e a fun√ß√£o <code>myTarAuth</code> permitem usar os dois esquemas de autoriza√ß√£o restantes: </p><br><ul><li>  <em>Concess√£o de credenciais de cliente</em> , usada para trabalhar com dados pessoais da conta por meio da API </li><li>  <em>Concess√£o de credenciais de cliente da ag√™ncia</em> , usada para trabalhar com os dados de seus pr√≥prios clientes de ag√™ncias / gerentes. </li></ul><br><p>  Nesse caso, voc√™ deve acessar de forma independente a API do MyTarget, no momento em que ela s√≥ pode ser obtida por entidades legais e √© emitida manualmente. Para solicitar o acesso, √© necess√°rio usar o formul√°rio de feedback. Voc√™ pode encontrar todos os detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Portanto, se voc√™ ainda conseguiu registrar seu aplicativo para trabalhar com a API MyTarget, √© poss√≠vel autenticar com facilidade usando um dos dois esquemas listados acima, usando a fun√ß√£o <code>myTarAuth</code> , para isso, transmita o valor FALSE ao argumento <em>code_grant</em> e use os seguintes argumentos: </p><br><ul><li>  <em>grant_type</em> - O tipo de sua conta, nesse caso, uma conta de cliente comum, aceita os valores "client_credentials" ou "agency_client_credentials". </li><li>  <em>agency_client_name</em> - login do cliente a partir da conta do agente, usada apenas se grant_type = "agency_client_credentials". </li><li>  <em>client_id</em> - o ID √© emitido para voc√™ ao confirmar o acesso √† API MyTarget. </li><li>  <em>client_secret</em> - Emitido a voc√™ quando voc√™ confirma o acesso √† API MyTarget junto com o ID do cliente. </li></ul><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de exemplo de autoriza√ß√£o de concess√£o de credenciais de cliente</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">myTargetAuth &lt;- myTarAuth(code_grant = FALSE, grant_type = "client_credentials", client_id = "XXXXXXXXXX", client_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de amostra para esquema de autoriza√ß√£o Concess√£o de credenciais do cliente da ag√™ncia</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">myTargetAuth &lt;- myTarAuth(code_grant = FALSE, grant_type = "agency_client_credentials", client_id = "XXXXXXXXXX", client_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", agency_client_name = "xxxxxxxxx@agency_client")</code> </pre> </div></div><br><p>  No caso de usar essa abordagem, a autentica√ß√£o passar√° sem nenhuma intera√ß√£o com o site do pacote rmytarget. </p><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  √â aqui que o nosso tour termina, j√° que hoje mais de 10.000 pacotes s√£o publicados nos reposit√≥rios principais - CRAN e mais de 80.000 no GitHub. Concluindo, quero dizer mais algumas palavras sobre a seguran√ßa de seu uso. </p><br><p>  Antes de tudo, preste aten√ß√£o se existe um pacote que voc√™ precisa no CRAN, uma vez que este √© o reposit√≥rio oficial da linguagem R, os pacotes est√£o sujeitos a modera√ß√£o bastante rigorosa por uma equipe de especialistas desse reposit√≥rio antes de serem publicados l√°.  E o pacote n√£o ser√° publicado l√° at√© que seja totalmente compat√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com a pol√≠tica do CRAN</a> .  Portanto, se o pacote estiver presente no CRAN, voc√™ poder√° ter certeza de que seu uso √© seguro para voc√™. </p><br><p>  Al√©m disso, quero observar que o c√≥digo de todos os pacotes para a linguagem R est√° aberto; voc√™ sempre pode visualizar o c√≥digo de qualquer uma de suas fun√ß√µes antes de inici√°-lo. </p><br><p>  Tente tamb√©m encontrar artigos sobre a aplica√ß√£o deste pacote, os usu√°rios do R est√£o bastante dispostos a compartilhar informa√ß√µes e provavelmente encontrar√° casos de uso de pacotes mais ou menos populares.  Se eles escrevem sobre um pacote, significa que o est√£o usando e, aparentemente, ningu√©m teve problemas com ele. </p><br><p>  Veja tamb√©m quem √© o autor do pacote, existem duas maneiras de fazer isso: </p><br><ol><li>  Depois de instalar o pacote, execute o <code>utils::packageDescription("_")$Author</code> </li><li>  Veja o arquivo <em>DESCRIPTION</em> na fonte do pacote. </li></ol><br><p>  Tente encontrar algumas informa√ß√µes sobre o autor em uma rede mundial. Se uma pessoa √© p√∫blica, pelo menos, √© improv√°vel que ela arrisque sua reputa√ß√£o para obter um sinal de acesso √† sua conta de publicidade e seus materiais de publicidade.  Muitas vezes, uma reputa√ß√£o √© mais cara que o dinheiro recebido de maneira d√∫bia. </p><br><p>  Se voc√™ instalar um pacote do GitHub, em seguida, instale-o no reposit√≥rio do autor, e n√£o em qualquer filial, como regra, existem muitas ramifica√ß√µes nos reposit√≥rios populares: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a0b/805/0cf/a0b8050cfecfc935ff10f0af4c9bc339.png" alt="Ryandexdirect branches"></p><br><p>  O fato √© que as ramifica√ß√µes n√£o s√£o atualizadas pelo autor do pacote, o que significa que voc√™ n√£o receber√° a vers√£o mais atual.  Al√©m disso, o usu√°rio do GitHub que criou a ramifica√ß√£o pode fazer altera√ß√µes no pr√≥prio c√≥digo, independentemente de voc√™ decidir confiar nessas altera√ß√µes. </p><br><p>  Voc√™ pode ver em qual reposit√≥rio sua ramifica√ß√£o foi criada em sua p√°gina no GitHub. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0e5/d1f/797/0e5d1f797cdb3a225a4f43ebc5b4f174.png"></p><br><p>  N√£o transfira seus tokens para ningu√©m sob nenhuma circunst√¢ncia, armazene-os da mesma maneira que armazena senhas de contas, mesmo que voc√™ precise mostrar um exemplo de c√≥digo, fa√ßa isso sem especificar tokens. </p><br><p>  Lembre-se de que, na grande maioria dos casos, o uso de pacotes R √© totalmente seguro para voc√™. Espero que este artigo o conven√ßa e fale sobre como funciona o processo de autoriza√ß√£o na API das plataformas de publicidade mais populares. </p><br><p>  Boa sorte, tenha cuidado, mas n√£o ceda √† paran√≥ia. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430888/">https://habr.com/ru/post/pt430888/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430878/index.html">Dispon√≠vel PhpStorm 2018.3</a></li>
<li><a href="../pt430880/index.html">Outra implementa√ß√£o de processamento de dados</a></li>
<li><a href="../pt430882/index.html">Xiaomi Aqara Switch refaz de ZigBee para Z-Wave</a></li>
<li><a href="../pt430884/index.html">F√°brica de impress√£o: por que a "LANIT-Integration" abriu sua pr√≥pria "gr√°fica"</a></li>
<li><a href="../pt430886/index.html">Atualizar biblioteca SPPermission e hater</a></li>
<li><a href="../pt430890/index.html">Onde o √°gil √© terr√≠vel, especialmente o scrum</a></li>
<li><a href="../pt430892/index.html">A combina√ß√£o de plataforma cruzada e abordagem nativa no desenvolvimento de aplicativos m√≥veis</a></li>
<li><a href="../pt430894/index.html">Situa√ß√£o: as marcas est√£o gastando cada vez mais dinheiro em publicidade em podcasts - entendemos por que</a></li>
<li><a href="../pt430896/index.html">A Linux Foundation estabeleceu fundos para GraphQL e Ceph - por que eles s√£o necess√°rios e o que esperar deles</a></li>
<li><a href="../pt430900/index.html">O primeiro laser na hist√≥ria: o que era</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>