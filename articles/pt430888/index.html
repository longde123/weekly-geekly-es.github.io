<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚣🏼 👊🏾 🌮 Quão seguro é usar pacotes R para trabalhar com a API de sistemas de publicidade 🎅🏻 😨 ❓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, muitas vezes eles começaram a me fazer uma pergunta sobre o quão seguro é usar várias extensões prontas, ou seja, pacotes escritos para ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Quão seguro é usar pacotes R para trabalhar com a API de sistemas de publicidade</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430888/"><p> Recentemente, muitas vezes eles começaram a me fazer uma pergunta sobre o quão seguro é usar várias extensões prontas, ou seja,  pacotes escritos para o idioma R, existe a chance de a conta de publicidade cair nas mãos erradas </p><br><p>  Neste artigo, falarei detalhadamente sobre como o mecanismo de autorização funciona na maioria dos pacotes e APIs de serviços de publicidade e como usar os pacotes descritos no artigo da maneira mais segura possível. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bca/7b8/9dc/bca7b89dc9efcb6238b8ab3f6f0a1116.jpg" alt="imagem"></div><a name="habracut"></a><br>  As informações contidas neste artigo não são tecnicamente as mais fáceis, portanto, para que o texto não seja tão árduo e técnico quanto a ajuda usual, ouso tentar o papel de um guia e guiará você pelos materiais deste artigo para sua percepção mais simples. <br><p>  Nosso ônibus já chegou, sente-se e confira nosso itinerário atual. </p><br><h2 id="soderzhanie">  Conteúdo </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como o processo de autorização funciona nos serviços de publicidade mais modernos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">De onde veio a pergunta de segurança</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que o ameaça com uma intercepção de token</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que fazer se alguém tomou posse do seu token</a> </li><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como usar com mais segurança os pacotes R para trabalhar com os sistemas de publicidade da API</a> </p><br><p>  5.1  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#ryandexdirecthttpsgithubcomselesnowryandexdirect-i-rym">ryandexdirect e rym - Pacotes para trabalhar com as APIs Yandex.Direct e Yandex.Metrica</a> <br>  5.2  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#rfacebookstat">rfacebookstat- Pacotes para trabalhar com a conta de publicidade do Facebook</a> <br>  5.3  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#rvkstat">rvkstat - Pacotes para trabalhar com a conta VK</a> <br>  5.4  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/430888/&amp;usg=ALkJrhjN2gQ8PkKEZTuFeXPlaCA8263FMg#rmytarget">rmytarget - Pacotes do painel MyTarget</a> </p><br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conclusão</a> </li></ol><br><h2 id="kak-ustroen-process-avtorizacii-v-bolshinstve-sovremennyh-reklamnyh-servisov">  Como o processo de autorização funciona nos serviços de publicidade mais modernos </h2><br><p>  O ponto de encontro do nosso grupo de excursão é o protocolo OAuth. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2f8/fe9/b7a/2f8fe9b7a06b8ee4007f04aedd3bbbca.jpg"></p><br><p>  Quase todos os serviços com os quais a API eu tive que trabalhar executam a autorização usando o protocolo OAuth 2.0, eles já escreveram com mais detalhes sobre isso no hub, que estão interessados ​​em dar uma volta pela natureza, por favor, você tem essa oportunidade, pode fazê-lo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Se você explica seu significado em poucas palavras, o OAuth permite que o aplicativo (no nosso caso, o pacote R seja um aplicativo), ao qual você concedeu permissão, execute algumas ações em seu nome, sem a necessidade de transferir seu nome de usuário e senha da conta de publicidade para esse aplicativo, novamente por razões de segurança. </p><br><p>  Em vez de um nome de usuário e senha, o protocolo OAuth usa um token, é uma sequência gerada que consiste em um conjunto de letras e números, que armazena informações na forma criptografada: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/7ad/5e4/eed/7ad5e4eed98381e9d537fdcbd9e59fcd.png"></p><br><ul><li>  Em nome de qual usuário o aplicativo executa a solicitação </li><li>  O usuário realmente permitiu que esse aplicativo acesse seus dados </li><li>  O próprio usuário tem as permissões necessárias para trabalhar com os materiais publicitários aos quais ele se refere </li></ul><br><p>  Para o processo de autorização e o trabalho com a API, geralmente você precisa registrar o aplicativo na API.  Além disso, esse aplicativo deve receber confirmação da equipe de suporte da API de um sistema de publicidade específico, ou seja,  o autor descreve inicialmente detalhadamente como e por que ele usará a API, tudo isso é verificado, moderado e somente se o suporte ao lado da plataforma de publicidade não tiver perguntas de segurança o autor do pacote terá acesso à API e, com a ajuda de seu aplicativo registrado, você pacote, você pode se autenticar usando o ID e o segredo emitidos para este aplicativo. </p><br><h2 id="otkuda-voznik-vopros-bezopasnosti">  De onde veio a pergunta de segurança </h2><br><p>  Estamos seguindo em frente, vamos tentar descobrir onde a questão de segurança surgiu ao usar pacotes? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/936/2cc/0c6/9362cc0c6ecf870b58c9b45d32e9299f.jpg"></p><br><p>  Em geral, a questão da segurança do acesso aos painéis de publicidade é mais do que justificada, uma vez que os escritórios de publicidade têm dinheiro, e geralmente não são pequenos o suficiente, então a segurança das contas de publicidade é uma questão muito mais séria do que a segurança do acesso, por exemplo, a um perfil de usuário comum nas redes sociais. </p><br><p>  O fato é que, na maioria dos casos, ao autorizar, o R redireciona os usuários dos pacotes para o navegador, inicialmente para confirmar o acesso à conta; nesse momento, você está na página de serviço da API com a qual trabalhará.  Após a confirmação, o usuário é redirecionado para a página em que o token será gerado ou o código de confirmação da autorização, que deve ser posteriormente inserido no R. </p><br><p>  Portanto, a maioria dos usuários está preocupada porque os sites em que o próprio token ou o código de confirmação de autorização são gerados são de terceiros e não têm nada a ver com o próprio serviço de publicidade, é claro que eles têm um contador do Google Analytics ou um Yandex.Metrica e o proprietário do site, que na maioria dos casos também é o autor do pacote, de acordo com muitos, através deste site, ele pode se apossar de seus tokens e obter acesso para gerenciar seus materiais de publicidade por meio deles. </p><br><h2 id="chem-vam-grozit-perehvat-tokena">  O que o ameaça com uma intercepção de token </h2><br><p>  Vamos falar sobre o que geralmente permite que você faça um token se ele cair nas mãos de um invasor. </p><br><p>  O token deve ser armazenado da mesma maneira que todos os outros dados necessários para acessar a conta, ou seja,  se o token cair nas mãos erradas, quem o possui poderá gerenciar seus materiais de publicidade: exclua-os, altere, por exemplo, será possível alterar o texto do anúncio e o link para o qual ele leva. </p><br><p>  A boa notícia é que, como escrevi acima, o protocolo OAuth permite que você gerencie seus materiais de publicidade sem fornecer um nome de usuário e senha de sua conta, ou seja,  mesmo que alguém tenha tomado posse do seu token, ele não poderá roubar sua conta com a ajuda dele.  Nem uma única API permite que você solicite, e mais ainda, altere sua senha para não perder sua conta, mas é fácil anunciar seu site por meio dela. </p><br><h2 id="chto-delat-esli-kto-to-zavladel-vashim-tokenom">  O que fazer se alguém tomou posse do seu token </h2><br><p>  Se aconteceu que você acidentalmente transferiu seu token, não entre em pânico.  Na verdade, esse não é o fim do mundo; na maioria dos casos, existem várias ações que redefinem tokens emitidos anteriormente; por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nesta seção da referência da API Yandex.Direct, o</a> processo de recuperação de tokens emitidos anteriormente é descrito em detalhes. </p><br><p>  Na maioria dos casos, independentemente da API do sistema de publicidade em que você estiver trabalhando, basta alterar a senha da sua conta. </p><br><h2 id="kak-naibolee-bezopasno-ispolzovat-r-pakety-dlya-raboty-s-api-reklamnyh-sistem">  Como usar com mais segurança os pacotes R para trabalhar com os sistemas de publicidade da API </h2><br><p>  E agora que chegamos à parte mais interessante de nosso tour, falarei sobre como é mais seguro usar os pacotes que desenvolvi, já que estou familiarizado com as APIs dos sistemas com os quais trabalham. </p><br><p>  Quero observar que todos os tokens emitidos são armazenados no lado da plataforma de publicidade, e não o aplicativo pelo qual o pacote R funciona, portanto, mesmo o usuário do aplicativo registrado para trabalhar com a API da plataforma de publicidade não tem acesso ao próprio token. </p><br><h3 id="ryandexdirecthttpsgithubcomselesnowryandexdirect-i-rymhttpsgithubcomselesnowrym---pakety-dlya-raboty-s-api-yandeksdirekt-i-yandeksmetriki">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ryandexdirect</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rym</a> - Pacotes para trabalhar com as APIs Yandex.Direct e Yandex.Metrica </h3><br><p>  Ambos os pacotes usam o serviço Yandex OAuth; para obter mais detalhes, consulte este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> . </p><br><p>  Existem 2 funções no pacote ryandexdirect para autorização: </p><br><ul><li> <code>yadirAuth</code> - autorização em duas etapas </li><li>  <code>yadirGetToken</code> - solicitação de um token de autorização </li></ul><br><p>  Ao usar a função yadirAuth, ou seja, eu recomendo usá-la ao trabalhar com o ryandexdirect, o processo de autorização prossegue de acordo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com o</a> esquema descrito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , a única vulnerabilidade nesse caso é o período a partir do momento em que o código de confirmação é gerado até que seja inserido no console R. </p><br><p>  Explicarei o motivo: veja como o Google Analytics exibe dados sobre visitas à página de geração de <strong>código de verificação</strong> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/61e/43a/5bc/61e43a5bcd179c4a8008feb36245f9e1.png"></p><br><p>  I.e.  o código vem após o sinal '?' e é considerado um parâmetro GET que captura o contador do Google Analytics, mas a vida útil desse código de confirmação termina imediatamente após o uso, ou seja,  logo após inseri-lo no console R. A vida útil máxima desse código é de 10 minutos. </p><br><p>  A segunda função, <code>yadirGetToken</code> , executa a autorização de acordo com o outro esquema descrito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  E ao usá-lo, nenhum código de confirmação é gerado, ou seja,  Depois de conceder ao pacote permissão para acessar os dados, você acessa a página de geração de token.  O token no próprio URL é retornado após o sinal '#', este não é um parâmetro get, mas uma âncora ou, como essa parte do URL também é chamada de hash.  O navegador não transmite esses dados; portanto, não é transferido para os relatórios do Google Analytics, ou seja,  as visitas a esta página nos relatórios são exibidas assim: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/633/040/b06/633040b066ca52c3ffba4d6d464dee02.png"></p><br><p>  Nesse segundo caso, não há riscos, mas o menos do uso da função yadirGetToken é que ela não salva as credenciais em um arquivo no seu PC e, portanto, não pode usar esses dados entre diferentes sessões R, o que não é muito conveniente.  Você armazenará o token obtido com sua ajuda e usará nos scripts como uma sequência de texto, a vida útil desse token é de 1 ano, após o qual o pacote não poderá substituí-lo automaticamente, como acontece ao usar a função yadirGetAuth. </p><br><p>  Existe uma função rym_auth no pacote rym para autorização, que é um análogo completo da função yadirAuth, cujo esquema de operação já descrevi em detalhes. </p><br><h3 id="rfacebookstathttpsgithubcomselesnowrfacebookstat---pakety-dlya-raboty-s-reklamnym-kabinetom-facebook">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rfacebookstat</a> - Pacotes para trabalhar com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conta de</a> publicidade do Facebook </h3><br><p>  O processo de autenticação na API de marketing do Facebook é descrito em detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Para passar a autorização, o pacote rfacebookstat tem a função <code>fbGetToken</code> , funciona da mesma forma que a função <code>yadirGetToken</code> descrita anteriormente no pacote ryandexdirect, ou seja,  tudo é implementado através da autenticação em uma etapa.  Não há perigo de que seu token seja interceptado por meio dos relatórios do Google Analytics; há uma tela de como é a aparência de uma visita à página de geração de token no Google Analytics. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2c5/c13/5e7/2c5c135e71c0fdf1270aed25d59d4cef.png"></p><br><h3 id="rvkstathttpsgithubcomselesnowrvkstat---pakety-dlya-raboty-s-reklamnym-kabinetom-vkontakte">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rvkstat</a> - Pacotes para trabalhar com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conta VK</a> </h3><br><p>  O processo de autenticação do Vkontakte é descrito na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ajuda</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API</a> . <br>  No rvkstat, você pode usar uma das duas funções para autorização: </p><br><ul><li>  <code>vkAuth</code> - Esquema de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">autorização Fluxo do código de autorização</a> , ou seja,  autorização em duas etapas. </li><li>  <code>vkGetToken</code> - autorização de acordo com o esquema de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fluxo implícito</a> , autorização em uma etapa, com o token vinculado ao dispositivo. </li></ul><br><p>  <code>vkAuth</code> fornece autenticação em duas etapas, essencialmente um análogo da função <code>yadirAuth</code> descrita no início deste bloco, mas apenas para autorização na API do Vkontakte e não no Yandex. </p><br><p>  A peculiaridade de trabalhar com a API Vkontakte nesse caso é que o registro do aplicativo e o acesso à API são bastante simples, não é necessário preencher os formulários nos quais você deve descrever em detalhes como e por que usar a API.  Portanto, como você usa seu aplicativo ao trabalhar com o rvkstat, mesmo a interceptação do código de confirmação não funciona, porque  ele está vinculado ao seu aplicativo e, para interceptar um token, é necessário conhecer o <em>ID</em> e o <em>segredo do</em> seu aplicativo; o código em si não permitirá que você obtenha um token para você. </p><br><p>  A função <code>vkGetToken</code> permite que você obtenha o token da maneira mais rápida; além disso, o token recebido está vinculado ao dispositivo do qual foi solicitado, ou seja,  mesmo que alguém entenda, ele pode usá-lo apenas no mesmo PC em que foi solicitado.  Ao mesmo tempo, o token no URL ao gerar é após o sinal '#' e, como eu disse anteriormente, ele não entra nos relatórios do Google Analytics. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/3d7/f57/b52/3d7f57b52c9f662007c801a4f8c214fc.png"></p><br><h3 id="rmytargethttpsgithubcomselesnowrmytarget---pakety-dlya-raboty-s-reklamnym-kabinetom-mytarget">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rmytarget</a> - Pacotes do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">painel MyTarget</a> </h3><br><p>  No momento, existem três esquemas de autorização na API MyTarget. Para obter detalhes sobre cada um, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documentação</a> . </p><br><p>  A função myTarAuth destina-se à autorização na API MyTarget em rmytarget; por padrão, ela usa o esquema de autorização <em>Grant Grant do Código de Autorização</em> , que permite trabalhar com a API MyTarget sem ter que acessá-lo pessoalmente.  I.e.  Já registrei o aplicativo, ele foi aprovado pelo suporte da API MyTarget e você concede acesso a ele para trabalhar com a conta em seu nome. </p><br><p>  <em>O código de</em> autorização concedido é um esquema de autorização em dois estágios, que é semelhante ao implementado pela função <code>yadirAuth</code> no pacote ryandexdirect. </p><br><p>  Funciona da seguinte maneira: </p><br><ul><li>  Você inicia a função, após a qual o navegador é aberto. </li><li>  Na página de serviço MyTarget, você dá permissão para acessar sua conta. </li><li>  Você será redirecionado para a página do pacote em que o código de confirmação é gerado.  A vida útil máxima desse código é de 1 hora, mas termina imediatamente após o recebimento de um token. </li><li>  Você insere o código de confirmação copiado no console do R e obtém um token para trabalhar com a API. </li></ul><br><p>  Nesse caso, o código de confirmação é um parâmetro get e é registrado nos relatórios do Google Analytics. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f08/183/573/f08183573b76c823fd84e754382fe9bf.png"></p><br><p>  Mas, se você observar com atenção, além do código <em>(obter o código do parâmetro)</em> , a URL contém mais um parâmetro - <em>state</em> .  Essa é uma sequência, também um token que é gerado pelo próprio pacote rmytarget e enviado ao navegador imediatamente após o início da função, esse parâmetro é exclusivo e o código de confirmação de autorização é anexado a ele.  Mesmo se você interceptar o código de confirmação e o token de estado, ainda não poderá usar essa combinação porque  Em primeiro lugar, não há lugar para inserir o token do estado, e como eu já escrevi, ele é único e, mesmo que houvesse um local para inseri-lo, ele não pode ser enviado novamente.  Portanto, esse esquema de autorização é totalmente seguro. </p><br><p>  Mas, mesmo assim, essa opção ainda parece suspeita para você, então rmytarget e a função <code>myTarAuth</code> permitem usar os dois esquemas de autorização restantes: </p><br><ul><li>  <em>Concessão de credenciais de cliente</em> , usada para trabalhar com dados pessoais da conta por meio da API </li><li>  <em>Concessão de credenciais de cliente da agência</em> , usada para trabalhar com os dados de seus próprios clientes de agências / gerentes. </li></ul><br><p>  Nesse caso, você deve acessar de forma independente a API do MyTarget, no momento em que ela só pode ser obtida por entidades legais e é emitida manualmente. Para solicitar o acesso, é necessário usar o formulário de feedback. Você pode encontrar todos os detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Portanto, se você ainda conseguiu registrar seu aplicativo para trabalhar com a API MyTarget, é possível autenticar com facilidade usando um dos dois esquemas listados acima, usando a função <code>myTarAuth</code> , para isso, transmita o valor FALSE ao argumento <em>code_grant</em> e use os seguintes argumentos: </p><br><ul><li>  <em>grant_type</em> - O tipo de sua conta, nesse caso, uma conta de cliente comum, aceita os valores "client_credentials" ou "agency_client_credentials". </li><li>  <em>agency_client_name</em> - login do cliente a partir da conta do agente, usada apenas se grant_type = "agency_client_credentials". </li><li>  <em>client_id</em> - o ID é emitido para você ao confirmar o acesso à API MyTarget. </li><li>  <em>client_secret</em> - Emitido a você quando você confirma o acesso à API MyTarget junto com o ID do cliente. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Código de exemplo de autorização de concessão de credenciais de cliente</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">myTargetAuth &lt;- myTarAuth(code_grant = FALSE, grant_type = "client_credentials", client_id = "XXXXXXXXXX", client_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Código de amostra para esquema de autorização Concessão de credenciais do cliente da agência</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">myTargetAuth &lt;- myTarAuth(code_grant = FALSE, grant_type = "agency_client_credentials", client_id = "XXXXXXXXXX", client_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", agency_client_name = "xxxxxxxxx@agency_client")</code> </pre> </div></div><br><p>  No caso de usar essa abordagem, a autenticação passará sem nenhuma interação com o site do pacote rmytarget. </p><br><h2 id="zaklyuchenie">  Conclusão </h2><br><p>  É aqui que o nosso tour termina, já que hoje mais de 10.000 pacotes são publicados nos repositórios principais - CRAN e mais de 80.000 no GitHub. Concluindo, quero dizer mais algumas palavras sobre a segurança de seu uso. </p><br><p>  Antes de tudo, preste atenção se existe um pacote que você precisa no CRAN, uma vez que este é o repositório oficial da linguagem R, os pacotes estão sujeitos a moderação bastante rigorosa por uma equipe de especialistas desse repositório antes de serem publicados lá.  E o pacote não será publicado lá até que seja totalmente compatível <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com a política do CRAN</a> .  Portanto, se o pacote estiver presente no CRAN, você poderá ter certeza de que seu uso é seguro para você. </p><br><p>  Além disso, quero observar que o código de todos os pacotes para a linguagem R está aberto; você sempre pode visualizar o código de qualquer uma de suas funções antes de iniciá-lo. </p><br><p>  Tente também encontrar artigos sobre a aplicação deste pacote, os usuários do R estão bastante dispostos a compartilhar informações e provavelmente encontrará casos de uso de pacotes mais ou menos populares.  Se eles escrevem sobre um pacote, significa que o estão usando e, aparentemente, ninguém teve problemas com ele. </p><br><p>  Veja também quem é o autor do pacote, existem duas maneiras de fazer isso: </p><br><ol><li>  Depois de instalar o pacote, execute o <code>utils::packageDescription("_")$Author</code> </li><li>  Veja o arquivo <em>DESCRIPTION</em> na fonte do pacote. </li></ol><br><p>  Tente encontrar algumas informações sobre o autor em uma rede mundial. Se uma pessoa é pública, pelo menos, é improvável que ela arrisque sua reputação para obter um sinal de acesso à sua conta de publicidade e seus materiais de publicidade.  Muitas vezes, uma reputação é mais cara que o dinheiro recebido de maneira dúbia. </p><br><p>  Se você instalar um pacote do GitHub, em seguida, instale-o no repositório do autor, e não em qualquer filial, como regra, existem muitas ramificações nos repositórios populares: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a0b/805/0cf/a0b8050cfecfc935ff10f0af4c9bc339.png" alt="Ryandexdirect branches"></p><br><p>  O fato é que as ramificações não são atualizadas pelo autor do pacote, o que significa que você não receberá a versão mais atual.  Além disso, o usuário do GitHub que criou a ramificação pode fazer alterações no próprio código, independentemente de você decidir confiar nessas alterações. </p><br><p>  Você pode ver em qual repositório sua ramificação foi criada em sua página no GitHub. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0e5/d1f/797/0e5d1f797cdb3a225a4f43ebc5b4f174.png"></p><br><p>  Não transfira seus tokens para ninguém sob nenhuma circunstância, armazene-os da mesma maneira que armazena senhas de contas, mesmo que você precise mostrar um exemplo de código, faça isso sem especificar tokens. </p><br><p>  Lembre-se de que, na grande maioria dos casos, o uso de pacotes R é totalmente seguro para você. Espero que este artigo o convença e fale sobre como funciona o processo de autorização na API das plataformas de publicidade mais populares. </p><br><p>  Boa sorte, tenha cuidado, mas não ceda à paranóia. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430888/">https://habr.com/ru/post/pt430888/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430878/index.html">Disponível PhpStorm 2018.3</a></li>
<li><a href="../pt430880/index.html">Outra implementação de processamento de dados</a></li>
<li><a href="../pt430882/index.html">Xiaomi Aqara Switch refaz de ZigBee para Z-Wave</a></li>
<li><a href="../pt430884/index.html">Fábrica de impressão: por que a "LANIT-Integration" abriu sua própria "gráfica"</a></li>
<li><a href="../pt430886/index.html">Atualizar biblioteca SPPermission e hater</a></li>
<li><a href="../pt430890/index.html">Onde o ágil é terrível, especialmente o scrum</a></li>
<li><a href="../pt430892/index.html">A combinação de plataforma cruzada e abordagem nativa no desenvolvimento de aplicativos móveis</a></li>
<li><a href="../pt430894/index.html">Situação: as marcas estão gastando cada vez mais dinheiro em publicidade em podcasts - entendemos por que</a></li>
<li><a href="../pt430896/index.html">A Linux Foundation estabeleceu fundos para GraphQL e Ceph - por que eles são necessários e o que esperar deles</a></li>
<li><a href="../pt430900/index.html">O primeiro laser na história: o que era</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>