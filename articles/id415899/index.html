<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¾â€ğŸ’» ğŸŒ¹ ğŸ‘¨ğŸ»â€âš–ï¸ Office 365 Outlook menemukan API tidak berdokumen dengan log aktivitas pengguna terperinci ğŸ§™ğŸ½ ğŸ‘‡ğŸ¿ ğŸ’†ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Log Office 365 Outlook terperinci diekstraksi oleh Magic-Unicorn-Tool : penyerang sedang mencari faktur pembayaran. Huruf pertama permintaan pencarian...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Office 365 Outlook menemukan API tidak berdokumen dengan log aktivitas pengguna terperinci</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/globalsign/blog/415899/"><img src="https://habrastorage.org/webt/ss/4n/1h/ss4n1hztnfofodcmqntzih5xmee.png"><br><br>  <i><font color="gray">Log Office 365 Outlook terperinci diekstraksi oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Magic-Unicorn-Tool</a> : penyerang sedang mencari faktur pembayaran.</font></i>  <i><font color="gray">Huruf pertama permintaan pencarian dimasukkan pada 10: 42: 44.548, terakhir pada 10: 43: 07.214.</font></i>  <i><font color="gray">Informasi aktivitas disimpan dalam log selama enam bulan.</font></i> <br><br>  Untuk waktu yang lama, ada desas-desus bahwa Office 365 memiliki alat rahasia bawaan untuk merekam aktivitas pengguna.  Pada Juni 2018, rumor ini dikonfirmasi sepenuhnya.  Semuanya dimulai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video yang</a> diterbitkan oleh <i>Anonymous</i> , dan kemudian spesialis CrowdSrtike mengunggah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">laporan terperinci</a> . <br><br>  Microsoft memperkenalkan API Kegiatan ke klien email bukan untuk tujuan jahat, tetapi untuk tugas forensik digital, yaitu, menyelidiki insiden yang melibatkan peretasan surat perusahaan dan kebocoran data lainnya.  Untuk melakukan ini, log aktivitas terperinci disimpan selama enam bulan, <i>bahkan jika pengguna telah menonaktifkan logging</i> . <br><a name="habracut"></a><br><h1>  Epidemi Peretasan Akun Email </h1><br>  Meretas akun email korporat di seluruh dunia telah menjadi begitu luas sehingga beberapa pakar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menyebut ini sebagai epidemi</a> .  Penyerang mendapatkan akses ke spreadsheet dengan nomor jaminan sosial, informasi terperinci tentang faktur keuangan dan rahasia dagang.  Mereka mencari informasi tentang transfer bank dan mencuri uang, mengambil keuntungan dari kurangnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tanda tangan digital pada dokumen</a> .  Berbagai jenis penipuan melalui surat bisnis yang dikompromikan dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">brosur CrowdStrike</a> . <br><br>  Misalnya, pada awal Juni, FBI melakukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">operasi internasional</a> dan menahan 74 orang di beberapa negara yang terlibat dalam bisnis ini. <br><br>  Ketika fakta peretasan diketahui, penting untuk dipahami: data apa yang diperoleh cracker, apa yang dilihatnya dan informasi apa yang disalinnya.  Apakah data rahasia bocor?  Investigasi insiden menjadi lebih sulit karena masuk Office 365 dimatikan secara default.  Dengan tidak adanya informasi nyata, perusahaan diwajibkan oleh hukum untuk mengumumkan secara terbuka kebocoran data dengan semua konsekuensi yang terjadi - biaya reputasi, denda, dll. <br><br>  Tetapi sekarang diketahui bahwa ada API Kegiatan dengan pendataan terperinci di Office 365, dan banyak dari skandal ini dapat dihindari jika perusahaan tahu tentang API ini.  Mungkin, akses ke log rahasia ini hanya diterima oleh beberapa klien istimewa.  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">informasi</a> bahwa beberapa perusahaan yang berspesialisasi dalam forensik digital tahu tentang alat audit Office 365 rahasia tahun lalu, atau bahkan lebih awal.  Seseorang menganggap pernyataan mereka sebagai omong kosong pemasaran, tetapi ternyata itu benar.  Anehnya, API Aktivitas ada, dan Microsoft benar-benar menyembunyikan keberadaan alat yang penting dan bermanfaat ini, yang disebut Magic Unicorn profesional, oleh karena itu nama program untuk analisis mandiri log, yang disebutkan di bawah ini. <br><br> <a href=""><img src="https://habrastorage.org/webt/ji/-f/e0/ji-fe0abu-a7c-v-x6xnh6cbogc.png"></a> <br><br>  <i><font color="gray">Penyerang memindai pesan yang berisi faktur pembayaran dan formulir W-9.</font></i>  <i><font color="gray">Detail log diekstraksi oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Magic-Unicorn-Tool</a></font></i> <br><br><h1>  Investigasi CrowdStrike </h1><br>  CrowdStrike <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menjelaskan secara rinci</a> cara kerja penjurnalan Office 365 untuk semua pengguna secara default.  Fitur ini terdiri dari API web yang mengambil informasi aktivitas Office 365 Outlook melalui Exchange Web Services (EWS).  Akses ke API terbuka untuk siapa saja yang mengetahui titik akhir dan header HTTP tertentu. <br><br>  API Aktivitas yang tidak berdokumen adalah subset dari ketiga versi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API Outlook REST</a> (1.0, 2.0, dan beta).  Seperti halnya subset lainnya, panggilan API harus disahkan menggunakan OAuth 2.0 atau otentikasi dasar. <br><br>  Titik akhirnya adalah sebagai berikut: <br><br><pre><code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/outlook.office.com/api</span></span><span class="hljs-regexp"><span class="hljs-regexp">/v2.0/</span></span>{user_context}/Activities</code> </pre> <br>  Semua permintaan dikirim sebagai paket HTTP GET, yang harus menyertakan tajuk HTTP berikut: <br><br><pre> <code class="hljs objectivec">Prefer: exchange.behavior=<span class="hljs-string"><span class="hljs-string">"ActivityAccess"</span></span></code> </pre> <br>  Permintaan tanpa tajuk ini akan mengembalikan <code>HTTP 400 Bad Request</code> . <br><br>  Header <code>Authorization</code> juga <code>Authorization</code> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Authorization</span></span>: Bearer &lt;<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> token&gt;</code> </pre> <br>  Permintaan tanpa tajuk ini akan mengembalikan respons <code>HTTP 403 Unauthorized</code> . <br><br>  Untuk tujuan pengujian, token akses OAuth 2.0 dapat dibuat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kotak pasir Oauth</a> .  Itu berlaku selama 60 menit. <br><br>  Panggilan paling sederhana ke API adalah meminta sepuluh aktivitas terakhirnya. <br><br><pre> <code class="hljs ruby">GET <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/outlook.office.com/api</span></span><span class="hljs-regexp"><span class="hljs-regexp">/v2.0/me</span></span><span class="hljs-regexp"><span class="hljs-regexp">/Activities</span></span></code> </pre> <br>  Contoh respons dari API dalam format JSON menunjukkan properti aktivitas standar: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"Id"</span></span>:<span class="hljs-string"><span class="hljs-string">"WOGVSAiPKrfJ4apAPcBksT2en7whzDz4NIbUs3=="</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ActivityCreationTime"</span></span>:<span class="hljs-string"><span class="hljs-string">"2010-04-01T12:34:56.789Z"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ActivityIdType"</span></span>:<span class="hljs-string"><span class="hljs-string">"ReadingPaneDisplayStart"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"AppIdType"</span></span>:<span class="hljs-string"><span class="hljs-string">"Outlook"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ClientVersion"</span></span>:<span class="hljs-string"><span class="hljs-string">"15.00.0000.000"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ClientSessionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"679126f3-02de-3513-e336-0eac1294b120"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ActivityItemId"</span></span>:<span class="hljs-string"><span class="hljs-string">"NjKG5m6OmaCjGKq6WlbjIzvp94czUDg30qGopD=="</span></span>, <span class="hljs-attr"><span class="hljs-attr">"TimeStamp"</span></span>:<span class="hljs-string"><span class="hljs-string">"2010-04-01T12:34:56.789Z"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"TenantId"</span></span>:<span class="hljs-string"><span class="hljs-string">"679126f3-02de-3513-e336-0eac1294b120"</span></span>, } ] }</code> </pre> <br>  Melalui API, Anda dapat meminta aktivitas tidak hanya untuk diri Anda sendiri, tetapi juga untuk pengguna lain, jika izin diperoleh melalui Kotak Surat Bersama atau Izin Aplikasi: <br><br><pre> <code class="hljs ruby">GET <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/outlook.office.com/api</span></span><span class="hljs-regexp"><span class="hljs-regexp">/v2.0/</span></span>Users(<span class="hljs-string"><span class="hljs-string">'victim@contoso.com'</span></span>)/Activities</code> </pre> <br>  API Aktivitas mendukung beberapa parameter kueri: <br><br><ul><li>  <code>$orderby</code> : urutkan hasil berdasarkan ekspresi yang diberikan </li><li>  <code>$filter</code> : memfilter hasil berdasarkan tanggal dan / atau jenis kegiatan </li><li>  <code>$select</code> : pilih return properties </li><li>  <code>$top</code> : jumlah maksimum dari kegiatan yang dikembalikan </li><li>  <code>$skip</code> : jumlah kegiatan yang dilewati dalam hasil </li></ul><br>  Saat ini, CrowdStrike telah mengidentifikasi 30 jenis kegiatan, tetapi pada kenyataannya mungkin ada lebih banyak.  Inilah yang paling bermanfaat: <br><br><ul><li>  <code>Delete</code> : hapus surat </li><li>  <code>Forward</code> : Penerusan Email </li><li>  <code>LinkClicked</code> : mengklik tautan dalam email </li><li>  <code>MarkAsRead</code> : pesan ditandai sudah dibaca </li><li>  <code>MarkAsUnread</code> : pesan ditandai belum dibaca </li><li>  <code>MessageDelivered</code> : surat dikirim ke kotak surat </li><li>  <code>MessageSent</code> : email yang dikirim dari kotak surat </li><li>  <code>Move</code> : email telah dijadwal ulang </li><li>  <code>OpenedAnAttachment</code> : buka aplikasi </li><li>  <code>ReadingPaneDisplayEnd</code> : <code>ReadingPaneDisplayEnd</code> huruf di panel tampilan </li><li>  <code>ReadingPaneDisplayStart</code> : Pilih sorotan untuk ditulis di panel tampilan. </li><li>  <code>Reply</code> : balas surat itu </li><li>  <code>SearchResult</code> : menghasilkan hasil pencarian </li><li>  <code>ServerLogon</code> : acara otorisasi </li></ul><br>  Ada jenis kegiatan menarik lainnya yang berguna dalam menyelidiki insiden: <code>SenderSmtpAddress</code> , <code>Recipients</code> , <code>Subject</code> , <code>SentTime</code> , <code>InternetMessageId</code> , <code>ClientIP</code> , <code>UserAgent</code> , dll. <br><br>  Spesialis CrowdStrike telah menerbitkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">modul Python</a> yang mengekstraksi informasi dari Office 365 Outlook Activities API dan menulis data yang diterima ke file CSV. <br><br><h1>  Alat Sihir-Unicorn </h1><br>  Program <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Magic-Unicorn-Tool</a> mem-parsing log API Aktivitas yang diperoleh oleh modul Python tersebut.  Saat ini, ia dapat mengurai dan menampilkan informasi berikut: <br><br><ul><li>  Cari kueri di kotak surat, waktu untuk melihat pesan dan / atau sesi resmi. </li><li>  Peristiwa otorisasi (Logon dan ServerLogon), tanggal, waktu, alamat IP, dan jenis browser. </li><li>  Semua aktivitas email dikirim dan ditandai sebagai huruf yang dibaca. </li><li>  Cari acara yang direkam dari ID sesi dengan referensi ke acara otorisasi terakhir. </li><li>  Membaca panel. </li><li>  Lihat lampiran. </li></ul><br><img src="https://habrastorage.org/webt/fj/xw/n9/fjxwn9xwhiceprwy0hk8whevtu4.png"><br>  <i><font color="gray">Masuk ke akun Anda dari berbagai alamat IP</font></i> <br><br>  Magic-Unicorn-Tool didistribusikan tanpa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penandatanganan kode</a> , tetapi dengan open source. <br><br>  Menerapkan alat-alat seperti Activity API tanpa sepengetahuan pengguna menimbulkan sejumlah masalah praktis dan etis untuk seluruh industri forensik digital.  Secara default, penjurnalan dinonaktifkan pada akun Office 365. Ini bukan bagian dari paket ProPlus dan E1 standar.  Perusahaan harus membayar uang ekstra untuk mengaudit akun, dan karena kurangnya log (seperti yang mereka duga), banyak perusahaan menderita kerugian.  Pada saat yang sama, granularity log Activity API jauh melebihi granularity dari metode logging yang terdokumentasi seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Unified Audit Log</a> . <br><br>  Ahli forensik digital dari LMG Security <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menyerukan</a> adopsi standar untuk aktivitas logging dan menempatkannya sebagai beban wajib pada penyedia cloud, karena sekarang beban wajib adalah sistem alarm kebakaran di pusat data. <br><br>  Penerapan standar diperlukan agar penyedia tidak hanya memelihara log, tetapi juga menyediakannya dalam bentuk standar untuk klien dan perusahaan audit, dan tidak merahasiakan klien terpilih sebagai bagian dari rencana tarif yang lebih mahal atau sebagai layanan berbayar yang terpisah. <br><br><hr><br>  <b>GMO GlobalSign Russia ACTION untuk Pelanggan Habr</b> <b><br><img src="https://habrastorage.org/webt/u3/my/b4/u3myb4ifqihiox-vpuqxbx4kij0.jpeg"></b> <br><br>  Anda dapat memperoleh informasi tambahan dengan menghubungi manajer GlobalSign melalui telepon: +7 (499) 678 2210, atau mengisi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">formulir di situs web, yang</a> menunjukkan kode promo CS002HBFR. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id415899/">https://habr.com/ru/post/id415899/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id415887/index.html">Robot laba-laba macam apa yang terbang di atas stadion dan menembak bola. Wawancara dengan pencipta Robycam</a></li>
<li><a href="../id415891/index.html">Apa saja game sekuel yang keren?</a></li>
<li><a href="../id415893/index.html">Cara membuat proses Java berjalan di Linux / Docker sederhana dan mudah</a></li>
<li><a href="../id415895/index.html">Pola paling penting dalam pemrograman</a></li>
<li><a href="../id415897/index.html">Fungsi untuk mendokumentasikan database PostgreSQL. Bagian dua</a></li>
<li><a href="../id415901/index.html">Komisi Dewan Federasi mendukung gagasan untuk menciptakan basis IMEI untuk semua telepon putih</a></li>
<li><a href="../id415903/index.html">Selamat datang di Pertemuan DIYorDIE musim panas pada 7 Juli</a></li>
<li><a href="../id415905/index.html">Cara menumbuhkan produk yang sehat (contoh Juno)</a></li>
<li><a href="../id415907/index.html">Cara memecat karyawan tanpa membahayakan citra perusahaan</a></li>
<li><a href="../id415909/index.html">Ekstensi web lintas browser untuk skrip khusus Bagian 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>