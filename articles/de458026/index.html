<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜñ ü•ë üö¨ Vergleich der Serialisierungsformate üë®üèæ‚Äçüî¨ üêí ‚ôíÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bei der Auswahl des Formats f√ºr die Serialisierung von Nachrichten, die in die Warteschlange, das Protokoll oder anderswo geschrieben werden, treten h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vergleich der Serialisierungsformate</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458026/">  Bei der Auswahl des Formats f√ºr die Serialisierung von Nachrichten, die in die Warteschlange, das Protokoll oder anderswo geschrieben werden, treten h√§ufig eine Reihe von Fragen auf, die sich irgendwie auf die endg√ºltige Auswahl auswirken.  Eines dieser Hauptprobleme ist die Geschwindigkeit der Serialisierung und die Gr√∂√üe der empfangenen Nachricht.  Da es f√ºr solche Zwecke viele Formate gibt, habe ich beschlossen, einige davon zu testen und die Ergebnisse zu teilen. <br><a name="habracut"></a><br><h2>  Testvorbereitung </h2><br>  Folgende Formate werden getestet: <br><br><ol><li>  Java-Serialisierung </li><li>  Json </li><li>  Avro </li><li>  Protobuf </li><li>  Sparsamkeit (bin√§r, kompakt) </li><li>  Msgpack </li></ol><br><br>  Scala wurde als PL gew√§hlt. <br>  Das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Haupttestwerkzeug</a> ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scalameter</a> . <br><br>  Die folgenden Parameter werden gemessen und verglichen: die Zeit, die zum Serialisieren und Deserialisieren ben√∂tigt wird, und die Gr√∂√üe der resultierenden Dateien. <br><br>  Benutzerfreundlichkeit, die M√∂glichkeit der Entwicklung der Schaltung und andere wichtige Parameter in diesem Vergleich werden nicht teilnehmen. <br><br><h3>  Eingabeerzeugung </h3><br>  F√ºr die Reinheit der Experimente muss zuerst ein Datensatz generiert werden.  Das Eingabeformat ist eine CSV-Datei.  Daten werden mit einer einfachen "Random.next [...]" f√ºr numerische Werte und "UUID.randomUUID ()" f√ºr Zeichenfolgenwerte generiert.  Die generierten Daten werden mit <a href="">kantan</a> in eine CSV-Datei <a href="">geschrieben</a> .  Insgesamt wurden 3 Datens√§tze mit jeweils 100.000 Datens√§tzen generiert: <br><br><ol><li>  Gemischte Daten - 28 mb <br><br><div class="spoiler">  <b class="spoiler_title">Gemischte Daten</b> <div class="spoiler_text"><pre><code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MixedData</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> f1: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f2: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f3: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f4: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f5: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f6: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f7: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f8: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f9: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f10: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f11: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f12: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f13: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f14: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f15: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f16: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f17: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f18: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f19: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f20: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span></span></code> </pre> <br></div></div></li><li>  Nur Linien - 71 mb <br><br><div class="spoiler">  <b class="spoiler_title">Onlystrings</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnlyStrings</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> f1: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f2: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f3: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f4: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f5: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f6: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f7: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f8: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f9: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f10: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f11: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f12: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f13: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f14: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f15: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f16: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f17: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f18: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f19: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f20: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">], </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span></span></code> </pre> <br></div></div></li><li>  Nur Zahlen (lang) - 20 mb <br><br><div class="spoiler">  <b class="spoiler_title">Nur lange</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnlyLongs</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> f1: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f2: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f3: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f4: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f5: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f6: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f7: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f8: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f9: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f10: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f11: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f12: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f13: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f14: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f15: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f16: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f17: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f18: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f19: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], f20: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Option</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-class"><span class="hljs-params">], </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span></span></code> </pre> <br></div></div></li></ol><br>  Jeder Eintrag besteht aus 20 Feldern.  Der Wert jedes Feldes ist optional. <br><br><h2>  Testen </h2><br>  Eigenschaften des PCs, auf dem die Tests durchgef√ºhrt wurden, Version von Scala und Java: <br>  PC: 1,8 GHz Intel Core i5-5350U (2 physische Kerne), 8 GB 1600 MHz DDR3, SSD SM0128G <br>  Java-Version: 1.8.0_144-b01;  Hotspot: Build 25.144-b01 <br>  Scala-Version: 2.12.8 <br><br><h3>  Java-Serialisierung </h3><br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Gemischte Daten </th><th>  Nur sehnt sich </th><th>  Nur Saiten </th></tr><tr><td>  Serialisierung, ms </td><td>  3444,53 </td><td>  2586,23 </td><td>  5548,63 </td></tr><tr><td>  Deserialisierung, ms </td><td>  852,62 </td><td>  617,65 </td><td>  2006.41 </td></tr><tr><td>  Gr√∂√üe, mb </td><td>  36 </td><td>  24 </td><td>  86 </td></tr></tbody></table></div><br><h3>  Json </h3><br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Gemischte Daten </th><th>  Nur sehnt sich </th><th>  Nur Saiten </th></tr><tr><td>  Serialisierung, ms </td><td>  5280,67 </td><td>  4358.13 </td><td>  5958,92 </td></tr><tr><td>  Deserialisierung, ms </td><td>  3347,20 </td><td>  2730.19 </td><td>  4039,24 </td></tr><tr><td>  Gr√∂√üe, mb </td><td>  52 </td><td>  36 </td><td>  124 </td></tr></tbody></table></div><br><h3>  Avro </h3><br>  Die Avro-Schaltung wurde vor dem direkten Testen unterwegs generiert.  Hierzu wurde die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">avro4s-</a> Bibliothek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verwendet</a> . <br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Gemischte Daten </th><th>  Nur sehnt sich </th><th>  Nur Saiten </th></tr><tr><td>  Serialisierung, ms </td><td>  2146,72 </td><td>  1546,95 </td><td>  2829,31 </td></tr><tr><td>  Deserialisierung, ms </td><td>  692,56 </td><td>  535,96 </td><td>  944,27 </td></tr><tr><td>  Gr√∂√üe, mb </td><td>  22 </td><td>  11 </td><td>  73 </td></tr></tbody></table></div><br><h3>  Protobuf </h3><br><div class="spoiler">  <b class="spoiler_title">Protobuf-Schema</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">syntax = "proto3"; package protoBenchmark; option java_package = "protobufBenchmark"; option java_outer_classname = "data"; message MixedData { string f1 = 1; double f2 = 2; sint64 f3 = 3; sint32 f4 = 4; string f5 = 5; double f6 = 6; sint64 f7 = 7; sint32 f8 = 8; sint32 f9 = 9; sint64 f10 = 10; double f11 = 11; double f12 = 12; string f13 = 13; string f14 = 14; sint64 f15 = 15; sint32 f16 = 16; sint32 f17 = 17; string f18 = 18; string f19 = 19; string f20 = 20; } message OnlyStrings { string f1 = 1; string f2 = 2; string f3 = 3; string f4 = 4; string f5 = 5; string f6 = 6; string f7 = 7; string f8 = 8; string f9 = 9; string f10 = 10; string f11 = 11; string f12 = 12; string f13 = 13; string f14 = 14; string f15 = 15; string f16 = 16; string f17 = 17; string f18 = 18; string f19 = 19; string f20 = 20; } message OnlyLongs { sint64 f1 = 1; sint64 f2 = 2; sint64 f3 = 3; sint64 f4 = 4; sint64 f5 = 5; sint64 f6 = 6; sint64 f7 = 7; sint64 f8 = 8; sint64 f9 = 9; sint64 f10 = 10; sint64 f11 = 11; sint64 f12 = 12; sint64 f13 = 13; sint64 f14 = 14; sint64 f15 = 15; sint64 f16 = 16; sint64 f17 = 17; sint64 f18 = 18; sint64 f19 = 19; sint64 f20 = 20; }</code> </pre></div></div><br>  Um Protobuf3-Klassen zu generieren, wurde das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ScalaPB-</a> Plugin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verwendet</a> . <br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Gemischte Daten </th><th>  Nur sehnt sich </th><th>  Nur Saiten </th></tr><tr><td>  Serialisierung, ms </td><td>  1169.40 </td><td>  865.06 </td><td>  1856.20 </td></tr><tr><td>  Deserialisierung, ms </td><td>  113,56 </td><td>  77,38 </td><td>  256,02 </td></tr><tr><td>  Gr√∂√üe, mb </td><td>  22 </td><td>  11 </td><td>  73 </td></tr></tbody></table></div><br><h3>  Sparsamkeit </h3><br><div class="spoiler">  <b class="spoiler_title">Sparsamkeitsschema</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">namespace java thriftBenchmark.java #@namespace scala thriftBenchmark.scala typedef i32 int typedef i64 long struct MixedData { 1:optional string f1, 2:optional double f2, 3:optional long f3, 4:optional int f4, 5:optional string f5, 6:optional double f6, 7:optional long f7, 8:optional int f8, 9:optional int f9, 10:optional long f10, 11:optional double f11, 12:optional double f12, 13:optional string f13, 14:optional string f14, 15:optional long f15, 16:optional int f16, 17:optional int f17, 18:optional string f18, 19:optional string f19, 20:optional string f20, } struct OnlyStrings { 1:optional string f1, 2:optional string f2, 3:optional string f3, 4:optional string f4, 5:optional string f5, 6:optional string f6, 7:optional string f7, 8:optional string f8, 9:optional string f9, 10:optional string f10, 11:optional string f11, 12:optional string f12, 13:optional string f13, 14:optional string f14, 15:optional string f15, 16:optional string f16, 17:optional string f17, 18:optional string f18, 19:optional string f19, 20:optional string f20, } struct OnlyLongs { 1:optional long f1, 2:optional long f2, 3:optional long f3, 4:optional long f4, 5:optional long f5, 6:optional long f6, 7:optional long f7, 8:optional long f8, 9:optional long f9, 10:optional long f10, 11:optional long f11, 12:optional long f12, 13:optional long f13, 14:optional long f14, 15:optional long f15, 16:optional long f16, 17:optional long f17, 18:optional long f18, 19:optional long f19, 20:optional long f20, }</code> </pre></div></div><br>  Um Scala-√§hnliche Sparsamkeitsklassen zu generieren, wurde das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scrooge-</a> Plugin verwendet. <br><div class="scrollable-table"><table><tbody><tr><th>  Bin√§r </th><th>  Gemischte Daten </th><th>  Nur sehnt sich </th><th>  Nur Saiten </th></tr><tr><td>  Serialisierung, ms </td><td>  1274,69 </td><td>  877,98 </td><td>  2168,27 </td></tr><tr><td>  Deserialisierung, ms </td><td>  220,58 </td><td>  133,64 </td><td>  514,96 </td></tr><tr><td>  Gr√∂√üe, mb </td><td>  37 </td><td>  16 </td><td>  98 </td></tr></tbody></table></div><br><div class="scrollable-table"><table><tbody><tr><th>  Kompakt </th><th>  Gemischte Daten </th><th>  Nur sehnt sich </th><th>  Nur Saiten </th></tr><tr><td>  Serialisierung, ms </td><td>  1294,87 </td><td>  900,02 </td><td>  2199,94 </td></tr><tr><td>  Deserialisierung, ms </td><td>  240,23 </td><td>  232,53 </td><td>  505.03 </td></tr><tr><td>  Gr√∂√üe, mb </td><td>  31 </td><td>  14 </td><td>  98 </td></tr></tbody></table></div><br><h3>  Msgpack </h3><br><div class="scrollable-table"><table><tbody><tr><th></th><th>  Gemischte Daten </th><th>  Nur sehnt sich </th><th>  Nur Saiten </th></tr><tr><td>  Serialisierung, ms </td><td>  1142,56 </td><td>  791,55 </td><td>  1974,73 </td></tr><tr><td>  Deserialisierung, ms </td><td>  289,60 </td><td>  80,36 </td><td>  428,36 </td></tr><tr><td>  Gr√∂√üe, mb </td><td>  21 </td><td>  9.6 </td><td>  73 </td></tr></tbody></table></div><br><h3>  Abschlie√üender Vergleich </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/19c/8d6/215/19c8d6215828a408efa4f6a55e875f68.png" alt="Serialisierung"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad9/593/96f/ad959396f0719dc5b9b13a576f7c7e9c.png" alt="Deserialisierung"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/50a/c29/f56/50ac29f5609899325d2054f944ac84a8.png" alt="Gr√∂√üe"><br><br><div class="spoiler">  <b class="spoiler_title">Genauigkeit der Ergebnisse</b> <div class="spoiler_text">  Wichtig: Die Ergebnisse der Serialisierungs- und Deserialisierungsgeschwindigkeit sind nicht 100% genau.  Es liegt ein gro√üer Fehler vor.  Trotz der Tatsache, dass die Tests viele Male mit zus√§tzlichem Aufw√§rmen der JVM durchgef√ºhrt wurden, ist es schwierig, die Ergebnisse als stabil und genau zu bezeichnen.  Aus diesem Grund empfehle ich dringend, keine endg√ºltigen Schlussfolgerungen zu einem bestimmten Serialisierungsformat zu ziehen, wobei der Schwerpunkt auf Zeitpl√§nen liegt. </div></div><br><br>  Angesichts der Tatsache, dass die Ergebnisse nicht absolut genau sind, k√∂nnen einige Beobachtungen auf ihrer Grundlage gemacht werden: <br><br><ol><li>  Wir haben erneut sichergestellt, dass die Java-Serialisierung langsam und in Bezug auf die Ausgabe nicht die wirtschaftlichste ist.  Einer der Hauptgr√ºnde f√ºr langsames Arbeiten ist der Zugriff auf die Felder von Objekten mithilfe von Reflexion.  √úbrigens wird auf die Felder zugegriffen und diese nicht in der Reihenfolge aufgezeichnet, in der Sie sie in der Klasse deklariert haben, sondern in lexikografischer Reihenfolge sortiert.  Dies ist nur eine interessante Tatsache; </li><li>  Json ist das einzige Textformat, das in diesem Vergleich dargestellt wird.  Warum in json serialisierte Daten viel Platz beanspruchen, liegt auf der Hand - jeder Datensatz wird zusammen mit der Schaltung geschrieben.  Dies wirkt sich auch auf die Geschwindigkeit des Schreibens in die Datei aus: Je mehr Bytes Sie schreiben m√ºssen, desto l√§nger dauert es.  Vergessen Sie auch nicht, dass f√ºr jeden Datensatz ein JSON-Objekt erstellt wird, was auch die Zeit nicht verk√ºrzt. </li><li>  Bei der Serialisierung eines Objekts analysiert Avro die Schaltung, um weiter zu entscheiden, wie ein bestimmtes Feld verarbeitet werden soll.  Dies sind zus√§tzliche Kosten, die zu einer Verl√§ngerung der gesamten Serialisierungszeit f√ºhren. </li><li>  Im Vergleich zu beispielsweise protobuf und msgpack erfordert Thrift eine gr√∂√üere Speichermenge, um ein Feld zu schreiben, da seine Metainformationen zusammen mit dem Feldwert gespeichert werden.  Wenn Sie sich die Ausgabedateien von Thrift ansehen, k√∂nnen Sie auch feststellen, dass nicht ein kleiner Teil des Gesamtvolumens von verschiedenen Bezeichnern des Beginns und des Endes des Datensatzes und der Gr√∂√üe des gesamten Datensatzes als Trennzeichen belegt ist.  All dies erh√∂ht sicherlich nur den Zeitaufwand f√ºr die Verpackung. </li><li>  Protobuf packt wie Sparsamkeit Metainformationen, macht sie aber etwas optimierter.  Der Unterschied im Algorithmus zum Ein- und Auspacken erm√∂glicht es diesem Format in einigen F√§llen, schneller als in anderen zu arbeiten. </li><li>  Msgpack arbeitet ziemlich schnell.  Ein Grund f√ºr die Geschwindigkeit ist die Tatsache, dass keine zus√§tzlichen Metainformationen serialisiert werden.  Dies ist sowohl gut als auch schlecht: gut, weil es wenig Speicherplatz beansprucht und keine zus√§tzliche Aufnahmezeit erfordert, schlecht, weil im Allgemeinen nichts √ºber die Aufzeichnungsstruktur bekannt ist, also bestimmen, wie dies oder jenes gepackt und entpackt werden soll F√ºr jedes Feld jedes Datensatzes wird ein anderer Wert ausgef√ºhrt. </li></ol><br>  In Bezug auf die Gr√∂√üe der Ausgabedateien sind die Beobachtungen ziemlich eindeutig: <br><br><ol><li>  Die kleinste Datei f√ºr das numerische W√§hlen wurde von msgpack erhalten; </li><li>  Die kleinste Datei f√ºr den String-Satz befand sich in der Quelldatei :) Mit Ausnahme der Quelldatei gewann avro mit einem kleinen Vorsprung von msgpack und protobuf; </li><li>  Die kleinste Datei f√ºr den gemischten Satz stammt wieder von msgpack.  Die L√ºcke ist jedoch nicht so auff√§llig und Avro und Protobuf sind sehr eng; </li><li>  Die gr√∂√üten Dateien stammten von json.  Es muss jedoch eine wichtige Bemerkung gemacht werden: Das JSON-Textformat und der Vergleich mit dem Bin√§rformat (und der Serialisierungsgeschwindigkeit) sind nicht ganz korrekt. </li><li>  Die gr√∂√üte Datei f√ºr das numerische W√§hlen wurde aus der Standard-Java-Serialisierung erhalten. </li><li>  Die gr√∂√üte Datei f√ºr den String-Satz war Thrift Binary. </li><li>  Die gr√∂√üte Datei f√ºr den gemischten Satz war Thrift Binary.  Es folgt die Standard-Java-Serialisierung. </li></ol><br><h3>  Formatanalyse </h3><br>  Versuchen wir nun, die Ergebnisse anhand des Beispiels der Serialisierung einer 36-stelligen Zeichenfolge (UUID) zu verstehen, ohne Trennzeichen zwischen Datens√§tzen, verschiedene Bezeichner f√ºr den Anfang und das Ende eines Datensatzes zu ber√ºcksichtigen - nur das Zeichenfolgenfeld f√ºr Datensatz 1, jedoch Parameter wie z. B. Feldtyp und Nummer .  Die Ber√ºcksichtigung der String-Serialisierung deckt mehrere Aspekte gleichzeitig vollst√§ndig ab: <br><br><ol><li>  Serialisierung von Zahlen (in diesem Fall die L√§nge der Zeichenfolge) </li><li>  String-Serialisierung </li></ol><br>  Beginnen wir mit avro.  Da alle Felder vom Typ "Option" sind, lautet das Schema f√ºr solche Felder wie folgt: "union: [" null "," string "]".  Wenn Sie dies wissen, k√∂nnen Sie das folgende Ergebnis erhalten: <br>  1 Byte zur Angabe des Datensatztyps (Null oder Zeichenfolge), 1 Byte pro Zeilenl√§nge (1 Byte, da avro zum Schreiben von Ganzzahlen eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">variable L√§nge verwendet</a> ) und 36 Byte pro Zeile.  Gesamt: 38 Bytes. <br><br>  Betrachten Sie nun msgpack.  Msgpack verwendet einen Ansatz √§hnlich der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">variablen L√§nge</a> , um Ganzzahlen zu schreiben: <a href="">spec</a> .  Versuchen wir zu berechnen, wie viel tats√§chlich ben√∂tigt wird, um ein Zeichenfolgenfeld zu schreiben: 2 Bytes pro Zeilenl√§nge (da eine Zeichenfolge&gt; 31 Bytes sind, sind 2 Bytes erforderlich), 36 Bytes pro Daten.  Gesamt: 38 Bytes. <br><br>  Protobuf verwendet auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">variable L√§nge</a> , um Zahlen zu codieren.  Zus√§tzlich zur L√§nge der Zeichenfolge f√ºgt protobuf jedoch ein weiteres Byte mit der Anzahl und dem Typ des Felds hinzu.  Gesamt: 38 Bytes. <br><br>  Thrift <a href="">Binary</a> verwendet keine Optimierung, um die L√§nge der Zeichenfolge zu schreiben, aber anstelle von 1 Byte pro Feldnummer und Typ ben√∂tigt Thrift 3. Daher wird das folgende Ergebnis erhalten: 1 Byte pro Feldnummer, 2 Bytes pro Typ, 4 Bytes pro Zeilenl√§nge, 36 Bytes pro Zeichenfolge.  Gesamt: 43 Bytes. <br><br>  Thrift <a href="">Compact verwendet</a> im Gegensatz zu Binary den Ansatz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">variabler L√§nge</a> , um Ganzzahlen zu schreiben, und verwendet, wenn m√∂glich, zus√§tzlich einen abgek√ºrzten Feldheaderdatensatz.  Basierend darauf erhalten wir: 1 Byte f√ºr den Typ und die Nummer des Feldes, 1 Byte f√ºr die L√§nge, 36 Bytes f√ºr die Daten.  Gesamt: 38 Bytes. <br><br>  Die Java-Serialisierung ben√∂tigte 45 Bytes, um eine Zeichenfolge zu schreiben, von denen 36 Bytes - eine Zeichenfolge, 9 Bytes - 2 Bytes lang und 7 Bytes f√ºr einige zus√§tzliche Informationen, die ich nicht entschl√ºsseln konnte. <br><br>  Nur avro, msgpack, protobuf und thrift compact sind √ºbrig.  Jedes dieser Formate ben√∂tigt 38 Bytes, um utf-8 Zeilen mit einer L√§nge von 36 Zeichen zu schreiben.  Warum hat avro dann beim Packen von 100.000 String-Datens√§tzen eine geringere Menge erhalten, obwohl ein unkomprimiertes Schema zusammen mit den Daten geschrieben wurde?  Avro hat einen kleinen Spielraum gegen√ºber anderen Formaten und der Grund f√ºr diese L√ºcke ist das Fehlen zus√§tzlicher 4 Bytes pro Packungsl√§nge des gesamten Datensatzes.  Tatsache ist, dass weder msgpack noch protobuf noch thrift ein spezielles Datensatztrennzeichen haben.  Damit ich die Datens√§tze wieder korrekt auspacken konnte, musste ich die genaue Gr√∂√üe jedes Datensatzes kennen.  Ohne diese Tatsache h√§tte msgpack mit hoher Wahrscheinlichkeit eine kleinere Datei. <br><br>  Bei einem numerischen Datensatz war der Hauptgrund f√ºr den Gewinn von msgpack das Fehlen von Schemainformationen in den gepackten Daten und die geringe Dichte der Daten.  Thrift und Protobuf ben√∂tigen sogar mehr als 1 Byte, um Werte zu leeren, da Informationen √ºber den Typ und die Nummer des Felds gepackt werden m√ºssen.  Avro und msgpack ben√∂tigen genau 1 Byte, um einen leeren Wert zu schreiben, aber avro speichert, wie bereits erw√§hnt, die Schaltung mit den Daten. <br><br>  Msgpack packte auch in einer kleineren Datei und einem gemischten Satz, der ebenfalls sp√§rlich war.  Die Gr√ºnde daf√ºr sind alle die gleichen Faktoren. <br><br>  Somit stellt sich heraus, dass die in msgpack gepackten Daten den geringsten Speicherplatz beanspruchen.  Dies ist eine faire Aussage - nicht umsonst wurde msgpack als Datenspeicherformat f√ºr Tarantool und Aerospike ausgew√§hlt. <br><br><h2>  Fazit </h2><br>  Nach dem Testen kann ich folgende Schlussfolgerungen ziehen: <br><br><ol><li>  Es ist schwierig, stabile Benchmark-Ergebnisse zu erzielen. </li><li>  Die Auswahl eines Formats ist ein Kompromiss zwischen Serialisierungsgeschwindigkeit und Ausgabegr√∂√üe.  Vergessen Sie dabei nicht so wichtige Parameter wie die Bequemlichkeit der Verwendung des Formats und die M√∂glichkeit der Weiterentwicklung des Schemas (h√§ufig spielen diese Parameter eine dominierende Rolle). </li></ol><br>  Den Quellcode finden Sie hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de458026/">https://habr.com/ru/post/de458026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de458010/index.html">Die Abenteuer der schwer fassbaren Malvari, Teil II: Geheime VBA-Skripte</a></li>
<li><a href="../de458014/index.html">FEDOR Robot - Training mit der neuen ISS-Crew und den ersten Weltraumaufgaben</a></li>
<li><a href="../de458018/index.html">Komponist vs npm: Multi-Modul-Entwicklung</a></li>
<li><a href="../de458020/index.html">Juli IT Events Digest</a></li>
<li><a href="../de458022/index.html">Fingerabdruck durch Bannerwerbung? Nun ist das √ºblich</a></li>
<li><a href="../de458030/index.html">Funktionales JavaScript: F√ºnf M√∂glichkeiten, um das arithmetische Mittel von Array-Elementen und die .reduce () -Methode zu ermitteln</a></li>
<li><a href="../de458040/index.html">Von Moskau nach Tomsk. Die Geschichte eines Zuges</a></li>
<li><a href="../de458042/index.html">Wie ich das maschinelle Lernen an der NSU organisiert habe</a></li>
<li><a href="../de458044/index.html">Informationssicherheit in der Provinz - Stagnation oder Entwicklung?</a></li>
<li><a href="../de458046/index.html">Gradle Spickzettel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>