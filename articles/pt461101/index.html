<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíâ üè° üë©üèΩ‚Äçüé® O Android Jetpack comp√µe a primeira impress√£o ‚ôêÔ∏è üôÖ üÖ±Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depois de assistir a uma palestra sobre o Android Jetpack Compose no Google IO 2019, eu quis experimentar imediatamente. Al√©m disso, a abordagem imple...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O Android Jetpack comp√µe a primeira impress√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461101/"><p>  Depois de assistir a uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">palestra sobre o Android Jetpack Compose</a> no Google IO 2019, eu quis experimentar imediatamente.  Al√©m disso, a abordagem implementada lembrou muito a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Flutter, da qual eu estava interessado anteriormente</a> . </p><br><p><img src="https://habrastorage.org/webt/i1/-6/fz/i1-6fzjfxbzx-ajpwg-5y7ey7cq.png"></p><a name="habracut"></a><br><p>  A pr√≥pria biblioteca de composi√ß√£o est√° no est√°gio pr√©-alfa; portanto, n√£o existem muitas documenta√ß√µes e artigos sobre ela.  Em seguida, contarei com v√°rios recursos que consegui encontrar, al√©m da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">biblioteca de c√≥digo aberto</a> . </p><br><p>  Esses recursos s√£o: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Desenvolvedores Android nos bastidores: Epis√≥dio 115: Jetpack Compose</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Compor a partir dos primeiros princ√≠pios</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mergulhando no jetpack compor</a> </li></ul><br><h1 id="chto-takoe-android-jetpack-compose">  O que √© o Android Jetpack Compose? </h1><br><p>  Anteriormente, toda a interface do usu√°rio do Android era baseada na classe View.  Este tem sido o caso desde os primeiros dias do Android.  E nesse sentido, muitas falhas herdadas e arquitet√¥nicas se acumularam, o que poderia ser aprimorado.  Mas fazer isso √© bastante dif√≠cil sem quebrar todo o c√≥digo escrito em sua base. </p><br><p>  Nos √∫ltimos anos, muitos novos conceitos apareceram no mundo dos aplicativos clientes (incluindo as tend√™ncias do Frontend); portanto, a equipe do Google seguiu um caminho radical e reescreveu todo o n√≠vel da interface do usu√°rio no Android.  Assim, apareceu a biblioteca Android Jetpack Compose, que inclui truques conceituais de React, Litho, Vue, Flutter e muitos outros. </p><br><p>  Vamos examinar alguns dos recursos da interface do usu√°rio existente e compar√°-lo com o Redigir. </p><br><h3 id="1--nezavisimost-ot-relizov-android">  1. Independ√™ncia das vers√µes do Android </h3><br><p>  A interface do usu√°rio existente est√° intimamente relacionada √† plataforma.  Quando os primeiros componentes do Design de materiais apareceram, eles funcionavam apenas com o Android 5 (API21) e superior.  Para trabalhar em vers√µes mais antigas do sistema, voc√™ deve usar a Biblioteca de Suporte. </p><br><p>  O Compose faz parte do Jetpack, que o torna independente das vers√µes do sistema e √© poss√≠vel us√°-lo mesmo em vers√µes mais antigas do Android (pelo menos com a API21). </p><br><h3 id="2-ves-api-na-kotlin">  2. Toda a API do Kotlin </h3><br><p>  Anteriormente, era necess√°rio lidar com arquivos diferentes para criar uma interface do usu√°rio.  Descrevemos a marca√ß√£o em xml e, em seguida, usamos o c√≥digo Java / Kotlin para faz√™-lo funcionar.  Depois voltamos a outros arquivos xml para definir temas, anima√ß√£o, navega√ß√£o, ... E at√© tentamos escrever c√≥digo em xml (Data Binding). </p><br><p>  O uso do Kotlin permite que voc√™ escreva UIs de estilo declarativo diretamente no c√≥digo, em vez de xml. </p><br><h3 id="3-composable--kompozitnyy-ispolzovanie-kompozicii-vmesto-nasledovaniya">  3. Composable = Composite: usando composi√ß√£o em vez de heran√ßa </h3><br><p>  Criar elementos de interface do usu√°rio personalizados pode ser bastante complicado.  Precisamos herdar do View ou de seus descendentes e cuidar de muitas propriedades importantes antes de iniciar corretamente.  Por exemplo, a classe TextView cont√©m cerca de 30 mil linhas de c√≥digo Java.  Isso se deve ao fato de que ela cont√©m muita l√≥gica desnecess√°ria que √© herdada por elementos descendentes. </p><br><p>  A composi√ß√£o surgiu por outro lado, substituindo heran√ßa por composi√ß√£o. </p><br><p> <code>Padding</code> √© o mais adequado para ilustrar o que √©: </p><br><p>  Na interface do usu√°rio existente, para renderizar o <code>TextView</code> recuado em <code>30dp</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="imagem" width="500"></div><br><p>  precisamos escrever o seguinte c√≥digo: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Isso significa que em algum lugar dentro do TextView.java ou em suas superclasses existe uma l√≥gica que sabe como contar e desenhar recuos. </p><br><p>  Vamos ver como voc√™ pode fazer o mesmo no Compose: </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// note: the cyan background color is omitted for now to keep it simple Padding(30.dp) { Text("Drag or tap on the seek bar") }</span></span></code> </pre> <br><p>  <strong>Altera√ß√µes</strong> <br>  <code>TextView</code> tornou apenas <code>Text()</code> .  A propriedade <code>android:padding</code> se transformou em um <code>Padding</code> que envolve o <code>Text</code> . </p><br><p>  <strong>Os benef√≠cios</strong> <br>  Assim, o <code>Text</code> √© respons√°vel apenas por renderizar o pr√≥prio texto.  Ele n√£o sabe contar travess√µes.  <code>Padding</code> , por outro lado, √© respons√°vel apenas pelo preenchimento e nada mais.  Pode ser usado em torno de qualquer outro elemento. </p><br><h3 id="4-odnonapravlennyy-potok-dannyh">  4. Fluxo de dados unidirecional </h3><br><p>  O fluxo de dados unidirecional √© um conceito importante se falarmos, por exemplo, sobre o controle do estado de um <code>CheckBox</code> em um sistema de interface do usu√°rio existente.  Quando o usu√°rio toca na <code>CheckBox</code> , seu estado fica <code>checked = true</code> : a classe atualiza o estado View e chama um retorno de chamada do c√≥digo que monitora a altera√ß√£o do estado. </p><br><p>  Em seguida, no pr√≥prio c√≥digo, por exemplo, no <code>ViewModel</code> , voc√™ precisa atualizar a vari√°vel de <code>state</code> correspondente.  Agora voc√™ tem duas c√≥pias do estado pressionado, o que pode criar problemas.  Por exemplo, alterar o valor da vari√°vel de <code>state</code> dentro do <code>ViewModel</code> far√° com que o <code>CheckBox</code> atualizado, o que pode terminar em um loop sem fim.  Para evitar isso, teremos que criar algum tipo de muleta. </p><br><p>  Usar o Compose ajudar√° a resolver esses problemas, pois ele se baseia no princ√≠pio da unidirecionalidade.  A mudan√ßa de estado ser√° processada dentro da estrutura: simplesmente fornecemos o modelo de dados para dentro.  Al√©m disso, o componente no Compose agora n√£o altera seu estado por conta pr√≥pria.  Em vez disso, ele apenas chama de retorno de chamada e agora √© tarefa do aplicativo alterar a interface do usu√°rio. </p><br><h3 id="5-uluchshenie-otladki">  5. Melhorando a depura√ß√£o </h3><br><p>  Como toda a interface do usu√°rio agora est√° escrita no Kotlin, voc√™ pode depurar a interface do usu√°rio.  Eu n√£o tentei isso sozinho, mas no podcast eles disseram que o depurador e os pontos de interrup√ß√£o funcionam no Compose. </p><br><h1 id="hvatit-slov-pokazhite-kod">  Palavras suficientes, mostre o c√≥digo </h1><br><p>  Eu sei, quero ver rapidamente como √© a interface do usu√°rio no c√≥digo (spoiler: muito semelhante ao Flutter se voc√™ tentar escrever nele). </p><br><p>  Come√ßaremos criando algumas <code>View</code> simples e comparando a apar√™ncia delas na interface do usu√°rio existente e em Compor. </p><br><h3 id="1-framelayout-vs-wrap--padding--background">  1. <code>FrameLayout</code> vs <code>Wrap + Padding + Background</code> </h3><br><p>  Reutilizamos nosso exemplo acima e tentamos fazer esse <code>TextView</code> recuado a <code>30dp</code> com um fundo turquesa: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="`TextView` recuado em` 30dp` e fundo turquesa" width="500"></div><br><p>  UI existente: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">--------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AND</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Agora observe o c√≥digo que faz o mesmo em Redigir: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Wrap { Padding(<span class="hljs-number"><span class="hljs-number">30</span></span>.dp) { DrawRectangle(color = Color.Cyan) Text(<span class="hljs-string"><span class="hljs-string">"Drag or tap on the seek bar"</span></span>) } } }</code> </pre> <br><p>  Aqui est√£o algumas coisas novas.  Como o <code>Text</code> sabe apenas sobre a renderiza√ß√£o, ele n√£o se importa com preenchimento e plano de fundo.  Portanto, para adicion√°-los, precisamos usar tr√™s fun√ß√µes separadas: </p><br><ul><li>  <code>DrawRectangle</code> plano de fundo </li><li>  <code>Padding</code> </li><li>  <code>Wrap</code> autom√°tica √© uma fun√ß√£o que sobrep√µe par√¢metros como <code>FrameLayout</code> . </li></ul><br><p>  F√°cil.  Mas √© um pouco diferente do sistema de interface do usu√°rio existente com o qual estamos acostumados. </p><br><h3 id="2-vertikalnyy-linearlayout-vs-column">  2. <code>LinearLayout</code> vertical vs <code>Column</code> </h3><br><p>  Agora vamos tentar fazer algo equivalente ao nosso bom e velho <code>LinearLayout</code> . <br>  Para colocar dois elementos um abaixo do outro, como na figura abaixo, podemos usar a <code>Column</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/32c/9e9/29e/32c9e929e70b2f811aad977075a79e87.png" alt="Dois elementos um abaixo do outro" width="500"></div><br><p>  O c√≥digo ficar√° assim: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) Button(text = <span class="hljs-string"><span class="hljs-string">"Next"</span></span>) } }</code> </pre> <br><p>  Aninhado no elemento <code>Column</code> ser√° localizado verticalmente um abaixo do outro. </p><br><h3 id="2a-otstupy">  2a  Indenta√ß√£o </h3><br><p>  Voc√™ provavelmente notou que o texto e o bot√£o est√£o muito pr√≥ximos da borda.  Portanto, adicione <code>Padding</code> . </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">//   Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text("Click the button below: ") Button(text = "Next") } } }</span></span></code> </pre> <br><p>  Parece melhor: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d1/d83/053/4d1d83053a411a9858b0feedab75de4a.png" alt="Dois elementos recuam um abaixo do outro" width="500"></div><br><h3 id="2b-intervaly">  2b.  Intervalos </h3><br><p>  Tamb√©m podemos adicionar alguma indenta√ß√£o entre <code>Text</code> e <code>Button</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) <span class="hljs-comment"><span class="hljs-comment">//    Button(text = "Next") } } }</span></span></code> </pre> <br><p>  Como √© nossa tela agora: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2be/3d8/709/2be3d8709c5f83c72f15ab9b450e0ba6.png" alt="Dois elementos, um abaixo do outro, recuado e espa√ßado" width="500"></div><br><h3 id="2c-gorizontalnyy-linearlayout-vs-row">  2c.  Horizontal <code>LinearLayout</code> vs <code>Row</code> </h3><br><p>  Coloque o segundo bot√£o ao lado do primeiro: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/351/842/b31/351842b31ea3fd8ec51a7585ea8efcad.png" alt="Adicionado um segundo bot√£o" width="500"></div><br><p>  C√≥digo para isso: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) Row { <span class="hljs-comment"><span class="hljs-comment">//   Button(text = "Back") //   WidthSpacer(10.dp) //    Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  Dentro da <code>Row</code> dois bot√µes estar√£o na horizontal.  <code>WidthSpacer</code> adiciona dist√¢ncia entre eles. </p><br><h3 id="2d-gravity-vs-alignment">  2d.  <code>Gravity</code> vs <code>Alignment</code> </h3><br><p>  Alinhe nossos elementos no centro, como a <code>gravity</code> faz na interface atual.  Para mostrar diff, vou comentar as linhas antigas e substitu√≠-las por novas: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">// Column(crossAxisAlignment = CrossAxisAlignment.Start) { Column(crossAxisAlignment = CrossAxisAlignment.Center) { //  Text("Click the button below: ") HeightSpacer(10.dp) // Row { Row(mainAxisSize = FlexSize.Min) { //    Button(text = "Back") WidthSpacer(10.dp) Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  Teremos sucesso: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/346/e5c/ad7/346e5cad7f27352c91076001d2bf5cf0.png" alt="Alinhamento central" width="500"></div><br><p>  Com <code>crossAxisAlignment = CrossAxisAlignment.Center</code> os elementos aninhados ser√£o centralizados horizontalmente.  Tamb√©m devemos definir o par√¢metro <code>Row</code> como <code>mainAxisSize = FlexSize.Min</code> , semelhante em comportamento a <code>layout_width = wrap_content</code> , para que n√£o se estenda pela tela devido ao padr√£o <code>mainAxisSize = FlexSize.Max</code> , que se comporta como <code>layout_width = match_parent</code> . </p><br><h3 id="2d-zamechanie">  2d.  Observa√ß√£o </h3><br><p>  Pelo que vimos nos exemplos acima, voc√™ pode ver que todos os elementos s√£o constru√≠dos compostos de fun√ß√µes separadas: o <code>padding</code> √© uma fun√ß√£o separada, o <code>spacer</code> √© uma fun√ß√£o separada, em vez de ser propriedades dentro de <code>Text</code> , <code>Button</code> ou <code>Column</code> . </p><br><p>  Elementos mais complexos, como <code>RecyclerView</code> ou <code>ConstraintLayout</code> est√£o em desenvolvimento: portanto, n√£o consegui encontrar um exemplo com eles nas fontes de demonstra√ß√£o. </p><br><h3 id="3stili-i-temy">  3. Estilos e Temas </h3><br><p>  Voc√™ provavelmente notou que os bot√µes acima s√£o roxos por padr√£o.  Isso ocorre porque eles usam estilos padr√£o.  Vamos ver como os estilos funcionam no Compose. </p><br><p>  Nos exemplos acima, <code>FormDemo</code> marcado com anota√ß√£o <code>@Composable</code> .  Agora vou mostrar como esse elemento √© usado na <code>Activity</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ MaterialTheme { FormDemo() } } } }</code> </pre> <br><p>  Em vez da fun√ß√£o <code>setContentView()</code> , usamos <code>setContent()</code> , uma fun√ß√£o de extens√£o da biblioteca <code>Compose.kt</code> . </p><br><p>  <code>CraneWrapper</code> cont√©m a √°rvore de composi√ß√£o e fornece acesso a <code>Context</code> , <code>Density</code> , <code>FocusManager</code> e <code>TextInputService</code> . </p><br><p>  <code>MaterialTheme</code> permite personalizar o tema para elementos. </p><br><p>  Por exemplo, posso alterar a cor principal do tema para marrom da seguinte maneira: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ <span class="hljs-comment"><span class="hljs-comment">// MaterialTheme { MaterialTheme(colors = MaterialColors(primary = Color.Maroon)) { FormDemo() } } } }</span></span></code> </pre> <br><p>  Agora nossa tela ficar√° assim: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f1/783/c01/8f1783c0159c45c314c05724969d7000.png" alt="Marrom como cor prim√°ria" width="500"></div><br><p>  Outras cores e fontes que podem ser alteradas: <a href="">MaterialTheme.kt # 57</a> </p><br><p>  O Rally Activity fornece um bom exemplo de como personalizar um t√≥pico: <a href="">c√≥digo fonte para RallyTheme.kt</a> </p><br><h1 id="chto-posmotretpochitat">  O que ver / ler </h1><br><p>  Se voc√™ quiser mais, poder√° montar o projeto de amostra de acordo com as <a href="">instru√ß√µes aqui</a> . </p><br><p>  Como os usu√°rios do Windows escrevem, agora n√£o h√° uma maneira oficial de iniciar o Compose, mas h√° um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guia</a> n√£o oficial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">do kotlinlang Slack</a> . </p><br><p>  Perguntas sobre o Compose podem ser feitas aos desenvolvedores no canal <code>#compose</code> kotlinlang Slack. </p><br><p>  Deixe outros links nos coment√°rios - os mais √∫teis ser√£o adicionados aqui. </p><br><h1 id="vyvody">  Conclus√µes </h1><br><p>  O desenvolvimento desta biblioteca est√° em pleno andamento, portanto, quaisquer interfaces mostradas aqui est√£o sujeitas a altera√ß√µes.  Ainda h√° muitas coisas que voc√™ pode aprender no c√≥digo-fonte, como <code>@Model</code> e fluxo de dados unidirecional (fluxo de dados unidirecional).  Talvez este seja um t√≥pico para artigos futuros. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461101/">https://habr.com/ru/post/pt461101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt461087/index.html">Gerando masmorras e cavernas para o meu jogo</a></li>
<li><a href="../pt461091/index.html">L√¢mpadas LED Camelion</a></li>
<li><a href="../pt461093/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 469 (09/07/2019 - 07/07/2019)</a></li>
<li><a href="../pt461095/index.html">Computador de orienta√ß√£o Apollo - arquitetura e software de sistema. Parte 1</a></li>
<li><a href="../pt461099/index.html">Jogo AirAttack! - nossa primeira experi√™ncia de desenvolvimento de VR</a></li>
<li><a href="../pt461105/index.html">5 plugins √∫teis para webpack</a></li>
<li><a href="../pt461107/index.html">Dos√≠metro para Seryozha. Parte II Tubos centen√°rios vs √°tomo pac√≠fico</a></li>
<li><a href="../pt461113/index.html">Cinco anos de uso do C ++ em projetos de microcontroladores em produ√ß√£o</a></li>
<li><a href="../pt461121/index.html">Pequenas experi√™ncias multitarefa em um microcontrolador</a></li>
<li><a href="../pt461125/index.html">A tarefa de criar c√≥digos num√©ricos seq√ºenciais para numerar mensagens no c√≥digo-fonte no Visual Studio (ex. C #)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>