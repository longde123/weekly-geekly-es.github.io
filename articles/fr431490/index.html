<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóø üëºüèø ‚ôëÔ∏è Externe - GUI pour Golang üôÜüèº üçÇ üôåüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations, coll√®gues! 

 Il y a environ un mois, j'ai publi√© un article ici sur les cadres GUI - un fil qui a sugg√©r√© la technologie pour cr√©er des ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Externe - GUI pour Golang</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431490/">  Salutations, coll√®gues! <br><br>  Il y a environ un mois, j'ai publi√© un article ici sur les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cadres GUI - un fil</a> qui a sugg√©r√© la technologie pour cr√©er des cadres GUI pour diff√©rents langages de programmation, bas√©e sur la connexion (tcp / ip ou autre) √† un processus externe qui joue le r√¥le d'une sorte de serveur GUI.  Ici, je veux pr√©senter une mise en ≈ìuvre concr√®te de cette id√©e - un nouveau cadre GUI pour <i>Golang</i> - <i>Externe</i> . <br><br>  Pourquoi √©tait-il n√©cessaire d'√©crire une nouvelle interface graphique pour <i>Golang</i> , s'il existe d√©j√† de nombreux outils de ce type?  D'abord parce qu'aucun d'eux ne me convenait pleinement.  Il fallait quelque chose pour cr√©er des applications de bureau, multiplateforme, pour avoir l'air naturel pour chaque plate-forme.  Si possible, pas tr√®s encombrant, avec un minimum de d√©pendances - je me suis engag√© dans une approche minimaliste. <a name="habracut"></a><br><br>  J'ai √©t√© guid√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">par cette liste</a> .  Deux positions - <i>application</i> et <i>marche</i> ont √©t√© imm√©diatement barr√©es car ne r√©pondant pas aux exigences de la multiplateforme.  Apr√®s r√©flexion, il a rejet√© ceux bas√©s sur html / css / javascript.  Premi√®rement, il me semble quelque peu inhabituel de cr√©er une application de bureau en tant que page Web et, deuxi√®mement, ils entra√Ænent des moteurs assez lourds avec eux.  Ainsi, par exemple, <i>go-astilectron</i> et <i>gowd</i> sont bas√©s sur <i>Electron</i> et <i>nw.js</i> , respectivement, et ceux-ci, √† leur tour, sont bas√©s sur <i>node.js.</i>  Imaginez combien tout doit √™tre install√© par l'utilisateur final pour ex√©cuter m√™me un petit utilitaire?  A moins que <i>go-sctiter ne</i> semble pr√©f√©rable de ce point de vue: le <i>Sciter qui se</i> tient derri√®re <i>n'est</i> pas si monstrueux. <br><br>  <i>Go-gtk</i> et <i>gotk3</i> sont bas√©s sur GTK.  Ce sont, apparemment, des paquets bien faits, mais je les ai √©galement refus√©s, car, √† mon avis, l'utilisation de GTK sous Windows n'est pas la meilleure solution.  Les fen√™tres GTK ne semblent pas natives sous Windows.  <i>La</i> liaison <i>Qt</i> est une chose puissante, bien s√ªr, mais plut√¥t compliqu√©e, et les dimensions ... Quand je lis: "Vous avez √©galement besoin de 2,5 Go de RAM libre (qui n'√©taient n√©cessaires que lors de la configuration initiale) et d'au moins 5 Go d'espace disque libre", les derniers doutes ont disparu.  Go lui-m√™me prend dix fois moins d'espace.  Et puis il y a des restrictions de licence: ¬´cette liaison avec sa licence LGPL ne convient pas pour √™tre utilis√©e dans une application de source ferm√©e destin√©e √† √™tre distribu√©e au grand public¬ª. <br><br>  Que nous reste-t-il de la liste?  <i>L'interface utilisateur</i> peut √™tre une bonne option, mais elle est toujours au stade mi-alpha.  <i>Fyne a</i> √©galement l'air plut√¥t bien, mais ne semble pas tout √† fait pr√™t.  Il √©tait quelque peu g√™nant que, d'une part, "Fyne soit enti√®rement construit √† l'aide de graphiques vectoriels", et, d'autre part, "les packages Windows EFL sont actuellement beaucoup plus anciens, de sorte que vous ne verrez pas les parties graphiques vectorielles des applications Fyne" - comme ceci.  Eh bien, je n'aime pas √ßa pour installer <i>EFL</i> (la biblioth√®que graphique sur laquelle <i>Fyne</i> est bas√©) sous Windows, vous avez besoin de <i>MSYS</i> . <br><br>  En bref, avec tout le respect que je dois aux auteurs de ces packages et aux produits de leur travail, je n'ai rien choisi pour moi et, en toute conscience, j'ai proc√©d√© √† ce que je voulais faire - √©crire un nouveau cadre GUI - <i>Externe</i> . <br><br>  Comme je l'ai √©crit dans un article pr√©c√©dent, <i>External</i> n'impl√©mente pas les √©l√©ments GUI seul, il utilise une application distincte pour cela, un processus distinct agissant comme un serveur GUI, cette application est appel√©e <i>GuiServer</i> .  <i>External le</i> lance, le rejoint via tcp / ip, envoie des commandes / requ√™tes pour cr√©er des fen√™tres et des widgets, les manipuler, etc., et en re√ßoit des messages. <br><br>  Voici un programme simple qui cr√©e une fen√™tre avec l'inscription traditionnelle Hello, world: <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> egui <span class="hljs-string"><span class="hljs-string">"github.com/alkresin/external"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> egui.Init(<span class="hljs-string"><span class="hljs-string">""</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } pWindow := &amp;egui.Widget{X: <span class="hljs-number"><span class="hljs-number">100</span></span>, Y: <span class="hljs-number"><span class="hljs-number">100</span></span>, W: <span class="hljs-number"><span class="hljs-number">400</span></span>, H: <span class="hljs-number"><span class="hljs-number">140</span></span>, Title: <span class="hljs-string"><span class="hljs-string">"My GUI app"</span></span>} egui.InitMainWindow(pWindow) pWindow.AddWidget(&amp;egui.Widget{Type: <span class="hljs-string"><span class="hljs-string">"label"</span></span>, X: <span class="hljs-number"><span class="hljs-number">20</span></span>, Y: <span class="hljs-number"><span class="hljs-number">60</span></span>, W: <span class="hljs-number"><span class="hljs-number">160</span></span>, H: <span class="hljs-number"><span class="hljs-number">24</span></span>, Title: <span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span> }) pWindow.Activate() egui.Exit() }</code> </pre> <br>  La fonction Init () d√©marre <i>GuiServer</i> et le rejoint.  Un param√®tre de cha√Æne peut lui √™tre transmis, qui d√©termine, si n√©cessaire, le nom de <i>GuiServer</i> et son chemin, son adresse IP et son port, ainsi que le niveau de journalisation. <br><br>  InitMainWindow () cr√©e la fen√™tre principale de l'application avec les param√®tres sp√©cifi√©s.  M√©thode AddWidget () - Ajoute un widget de type √©tiquette. <br><br>  Activer () - affiche une fen√™tre √† l'√©cran et met le programme en mode veille. <br>  Les fen√™tres et les widgets sont d√©finis dans la structure Widget - je n'ai pas fait de structures distinctes pour chaque objet, car  Je n'ai pas trouv√© de moyen pratique d'impl√©menter cela, √©tant donn√© que <i>Go</i> n'a pas d'h√©ritage.  Cette structure comprend des champs communs √† la plupart des widgets et une cha√Æne de mappage [cha√Æne], qui contient des propri√©t√©s sp√©cifiques √† un objet particulier: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Widget <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Parent *Widget Type <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> [...] Font *Font AProps <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> aWidgets []*Widget }</code> </pre> <br>  Les m√©thodes de cette structure incluent le AddWidget () familier, ainsi que SetText (), SetImage (), SetParam (), SetColor (), SetFont (), GetText (), Move (), Enable (), etc. Je voudrais mentionner SetCallBackProc () et SetCallBackFunc () - pour d√©finir les gestionnaires d'√©v√©nements. <br>  Il serait inappropri√© de lister ici toutes les fonctions, structures et m√©thodes, pour cela il y en a plus pr√©cis√©ment.  il doit y avoir de la documentation.  Je n'en dirai que quelques-uns pour donner une id√©e g√©n√©rale: <br><br>  Menu (), MenuContext (), EndMenu (), AddMenuItem (), AddMenuSeparator () - un ensemble de fonctions pour cr√©er un menu, principal ou contextuel. <br>  EvalProc (cha√Æne sCode), EvalFunc (cha√Æne sCode) transmet un fragment de code Harbour (plusieurs lignes peut √™tre) pour ex√©cution sur GuiServer - une sorte d'impl√©mentation du langage de script int√©gr√©. <br>  OpenForm (cha√Æne sPath) - cr√©e une fen√™tre bas√©e sur la description du fichier xml cr√©√© par HwGui Designer. <br>  OpenReport (cha√Æne sPath) - imprime un rapport bas√© sur la description du fichier xml cr√©√© par HwGui Designer. <br>  MsgInfo (), ..., SelectFile (), SelectColor (), SelectFont () - appeler les bo√Ætes de dialogue et les bo√Ætes de dialogue standard. <br>  InitPrinter () et un ensemble de m√©thodes de structure d'imprimante: Say (), Box (), Line (), etc. fournissent une impression √† l'imprimante avec la possibilit√© de pr√©visualiser. <br><br>  Voici la liste compl√®te des widgets actuellement pris en charge: <br>  √©tiquette, modifier, bouton, v√©rifier, radio, radiogr, groupe, combo, bitmap, ligne, panneau (con√ßu pour h√©berger d'autres widgets dessus), paneltop, panelbot, ownbtn (bouton dessin√© par le propri√©taire), s√©parateur, mise √† jour, arbre, progression, onglet, parcourir (tableau, comme beaucoup l'appellent), cedit (modifier avec des fonctionnalit√©s avanc√©es), monthcal. <br><br>  Tous sont r√©pertori√©s dans la fonction init () de extwidg.go avec des propri√©t√©s suppl√©mentaires.  accessible pour chacun d'eux - ces propri√©t√©s sont d√©finies via Widget.AProps.  Beaucoup de ces widgets ont d'autres propri√©t√©s, en particulier une navigation riche en eux;  ils peuvent √™tre d√©finis s√©par√©ment √† l'aide de la m√©thode SetParam (). <br><br>  <i>Externe</i> s'est av√©r√© √™tre de petit volume, il est √©crit en pur <i>Go</i> , il ne tire pas d'autres paquets sauf quelques standards.  La multiplateforme est fournie par <i>GuiServer</i> , qui peut √™tre compil√© sous Windows, Linux / Unix, Mac OS.  Un certain inconv√©nient est associ√© pr√©cis√©ment √† la n√©cessit√© d'utiliser ce module externe, que vous devez soit compiler √† partir des sources, soit t√©l√©charger celui termin√© sur mon site et le placer dans le r√©pertoire sp√©cifi√© dans PATH.  Soit dit en passant, il est petit - seulement environ un m√©gaoctet et demi pour Windows et environ trois - pour Linux. <br><br>  √Ä quoi cela ressemble, je vais vous montrer un exemple d'une petite application <i>ETutor</i> - le tutoriel Golang.  Ce programme pr√©sente une collection de fragments de code sur Go sous la forme d'une arborescence.  Le code peut √™tre √©dit√©, ex√©cut√© pour ex√©cution.  Rien de sp√©cial, mais assez confortable.  La collection peut √™tre r√©approvisionn√©e, ajoutez de nouvelles collections.  Maintenant, il y a collect√© (pas encore compl√®tement) A Tour of Go, Go by Example et plusieurs exemples sur <i>External</i> lui-m√™me.  <i>ETutor</i> peut <i>√©galement</i> √™tre utilis√© pour, par exemple, organiser un ensemble d'utilitaires sur Go.  Donc, des captures d'√©cran. <br><br>  Windows 10: <br><br><img src="https://habrastorage.org/webt/cv/q3/yz/cvq3yzi7n_q3qzxxr6ipdi51l9i.png"><br><br>  Debian, Gnome: <br><br><img src="https://habrastorage.org/webt/-7/7e/1q/-77e1qmycrfuqeyerqsxfplixq0.png"><br><br>  Et enfin, les liens: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Externe sur Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GuiServer sur Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ETutor sur Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une page sur GuiServer sur mon site Web o√π vous pouvez t√©l√©charger des binaires pr√™ts √† l'emploi</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://groups.google.com/d/forum/guiserver</a> - Un groupe pour discuter de tous les probl√®mes li√©s √† GuiServer et √† External <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article sur GuiServer sur Habr√©</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr431490/">https://habr.com/ru/post/fr431490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr431478/index.html">Conf√©rence de Roskomnadzor "Protection des donn√©es personnelles"</a></li>
<li><a href="../fr431480/index.html">Magento a publi√© une nouvelle version de plate-forme majeure - 2.3.0 GA</a></li>
<li><a href="../fr431482/index.html">Et toi, Yota ...</a></li>
<li><a href="../fr431486/index.html">Mouches invisibles: une nouvelle m√©thode pour √©tudier le syst√®me nerveux par la d√©pigmentation tissulaire</a></li>
<li><a href="../fr431488/index.html">Modulation sonore</a></li>
<li><a href="../fr431492/index.html">Analyse du quiz du concours React depuis le stand HeadHunter √† HolyJs 2018</a></li>
<li><a href="../fr431496/index.html">Comment la technologie aide les enseignants des classes sp√©ciales</a></li>
<li><a href="../fr431498/index.html">WebP reprendra bient√¥t le Web, mais ce ne sera pas long</a></li>
<li><a href="../fr431500/index.html">Bases de donn√©es et Kubernetes (revue et rapport vid√©o)</a></li>
<li><a href="../fr431502/index.html">Conf√©rence pour les d√©veloppeurs iOS Kolesa Mobile 3.0. Reportage vid√©o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>