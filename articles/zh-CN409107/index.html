<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ• â˜ ï¸ â™ï¸ ä½¿ç”¨ESP8266è¿›è¡Œç©ºä¸­ç¼–ç¨‹å¹¶å°†æ•°æ®ä¼ è¾“åˆ°Arduinoã€‚ ç¬¬ä¸‰éƒ¨åˆ†ã€‚ æ‚¨å¥½ï¼ŒANDROID ğŸ¤™ğŸ¿ ğŸšƒ ğŸ‘¼ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="äº²çˆ±çš„GeekTimesè¯»è€…ï¼Œæˆ‘ä¸ºæ‚¨æä¾›äº†å¦ä¸€ç¯‡æœ‰å…³å°†ESP8266èŠ¯ç‰‡ç”¨ä½œAVRå¾®æ§åˆ¶å™¨çš„æ— çº¿ç½‘æ¡¥çš„æ–‡ç« ï¼Œä»¥Arduino Unoï¼ˆNanoï¼‰ç¡¬ä»¶å¹³å°ä¸ºä¾‹ã€‚ è¿™æ¬¡ï¼Œ ä¸ºäº†é£å¾€æœˆçƒä»¥æ§åˆ¶å¹³å°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºäºANDROIDçš„è®¾å¤‡ï¼Œè€Œä¸æ˜¯è®¡ç®—æœºã€‚ å¥½å§ï¼Œä¾‹å¦‚æ™ºèƒ½æ‰‹æœºã€‚ 



 è£åˆ‡ç»†èŠ‚ï¼š 

 å¯¹äºæˆ‘...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨ESP8266è¿›è¡Œç©ºä¸­ç¼–ç¨‹å¹¶å°†æ•°æ®ä¼ è¾“åˆ°Arduinoã€‚ ç¬¬ä¸‰éƒ¨åˆ†ã€‚ æ‚¨å¥½ï¼ŒANDROID</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409107/"> äº²çˆ±çš„GeekTimesè¯»è€…ï¼Œæˆ‘ä¸ºæ‚¨æä¾›äº†å¦ä¸€ç¯‡æœ‰å…³å°†ESP8266èŠ¯ç‰‡ç”¨ä½œAVRå¾®æ§åˆ¶å™¨çš„æ— çº¿ç½‘æ¡¥çš„æ–‡ç« ï¼Œä»¥Arduino Unoï¼ˆNanoï¼‰ç¡¬ä»¶å¹³å°ä¸ºä¾‹ã€‚ è¿™æ¬¡ï¼Œ <s>ä¸ºäº†é£å¾€æœˆçƒä»¥</s>æ§åˆ¶å¹³å°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºäºANDROIDçš„è®¾å¤‡ï¼Œè€Œä¸æ˜¯è®¡ç®—æœºã€‚ å¥½å§ï¼Œä¾‹å¦‚æ™ºèƒ½æ‰‹æœºã€‚ <br><br><img src="https://habrastorage.org/webt/lq/eo/as/lqeoas8icifnezwk-g6ufh6pdhc.png"><br><br> è£åˆ‡ç»†èŠ‚ï¼š <br><a name="habracut"></a><br> å¯¹äºæˆ‘ä»¬çš„å·¥ä½œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‰ä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„å·¥å…·-ESP8266ä¸­ä¼ è¾“çš„BABUINOæ— çº¿ç¼–ç¨‹å™¨å’ŒMPDEï¼ˆç”¨äºç¼–ç¨‹å’Œæ•°æ®äº¤æ¢çš„æ¨¡å—ï¼‰æ¨¡å—ã€‚ <br><br> ä»ç”¨æˆ·çš„åé¦ˆä¸­å¯ä»¥çœ‹å‡ºï¼Œç¨‹åºå‘˜æœ¬äººé€šå¸¸ä¼šå‡ºåº­ï¼Œç”šè‡³æœ‰äº›äººç”šè‡³å¯ä»¥æˆåŠŸä½¿ç”¨ä»–ã€‚ å¥½å§ï¼ŒåŸºæœ¬ä¸Šï¼Œäº‹æƒ…çœŸçš„å¾ˆæ–¹ä¾¿ã€‚ æˆ‘åœ¨Windowsä¸‹å¯åŠ¨äº†è¯¥åº”ç”¨ç¨‹åºï¼Œä»æ‰€éœ€çš„æ–‡ä»¶å¤¹ä¸­é€‰æ‹©äº†hexæ–‡ä»¶ï¼Œä»…æ­¤è€Œå·²-å‡ ç§’é’Ÿä¹‹å†…ï¼Œæ­£ç¡®çš„è®¾å¤‡ä¸­çš„ç¨‹åºå°±æ²¡æœ‰äº†ç”µçº¿ã€‚ å¦ä¸€ä»¶äº‹æ˜¯ï¼Œæˆ‘å¾’åŠ³æ— åŠŸï¼Œä»¥æå¤§çš„çƒ­æƒ…æ”»å‡»äº†ä½¿ç”¨Wiring Cç¼–å†™å¹¶ä½¿ç”¨ARDUINO IDEåŠå…¶è‰å›¾å’Œåº“çš„ARDUINOè½¯ä»¶ç”¨æˆ·ã€‚ å½“ç„¶ï¼Œæ— è®ºæ˜¯åœ¨Arduin Wiring Cè¿˜æ˜¯AVRå·¥ä½œå®¤çš„Cä¸­ï¼Œæ¯ä¸ªäººéƒ½ä¸ºä»–åšæ–¹ä¾¿çš„äº‹æƒ…ã€‚ ä½†æ˜¯æœ€åï¼Œä¸€äº›ç”¨æˆ·å‡ºäºæŸç§åŸå› ç«‹å³å†³å®šè¯¥ç¼–ç¨‹å™¨ä¸ARDUINOè½¯ä»¶å®Œå…¨ä¸å…¼å®¹ã€‚ <br><br> å®é™…ä¸Šï¼Œå½“ç„¶ä¸å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚ ç»å¯¹ä¹Ÿå¯ä»¥åœ¨æ–¹ä¾¿çš„åœ°æ–¹ç¼–è¯‘æ‚¨çš„è‰å›¾ä»¥è·å–åå…­è¿›åˆ¶æ–‡ä»¶çš„çŠ¶æ€ï¼Œå¹¶åƒé€šè¿‡æ— çº¿ç¼–ç¨‹å™¨å°†å…¶è½»æ¾å‘é€åˆ°Arduino UNOæˆ–NANOä¸€æ ·æ–¹ä¾¿ã€‚ <br><br> åœ¨ARDUINOè½¯ä»¶ä¸‹è¿›è¡Œæ•°æ®äº¤æ¢ä¹Ÿä¸ä¼šå¼•èµ·ä»»ä½•é—®é¢˜ã€‚ å†™ä¸‹ç¥å¥‡çš„è¯ï¼š <br><br>  <b>Serial.beginï¼ˆ9600ï¼‰;</b> <br><br> ç„¶åæ˜¯è¿™æ ·çš„ï¼š <br><br>  <b>receiveByte = Serial.readï¼ˆï¼‰;</b>  //ä»ç¼“å†²åŒºè¯»å–å­—èŠ‚ <br><br> æˆ–ï¼š <br><br>  <b>Serial.writeï¼ˆreceiveByteï¼‰;</b>  //å­—èŠ‚è®°å½• <br><br> è€Œä¸”æ‚¨å¯ä»¥éå¸¸è½»æ¾åœ°é€šè¿‡WI-FIäº¤æ¢å­—èŠ‚æµã€‚ å¯¹äºAVRå¾®æ§åˆ¶å™¨ï¼Œå®ƒé€šè¿‡ä¸²è¡ŒUARTç«¯å£å‘é€åˆ°ESP8266å¹¶ä»é‚£é‡Œæ¥æ”¶å­—èŠ‚ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„é‚£æ ·ï¼Œä»»ä½•äººé“ä¸»ä¹‰äººå‘˜éƒ½å¯ä»¥åœ¨Arduinoä¸­é…ç½®ä¸ä¹‹åä½œçš„å·¥ä½œã€‚ <br><br> ç°åœ¨å›åˆ°æœ¬æ–‡çš„ä¸»é¢˜ã€‚ ä¸ºäº†é€šè¿‡æ™ºèƒ½æ‰‹æœºæ§åˆ¶æœºå™¨äººï¼Œæ‚¨å¿…é¡»ä¸ºæ­¤æ™ºèƒ½æ‰‹æœºç¼–å†™é€‚å½“çš„åº”ç”¨ç¨‹åºã€‚ <br><br> ä½œä¸ºä¸€ä¸ªæœˆå‰éå¸¸æ¨¡ç³Šåœ°æå‡ºè¿™ä¸€ç¨‹åºçš„äººï¼Œæˆ‘ç°åœ¨å¯ä»¥æ¯«æ— è´£ä»»åœ°å®£å¸ƒæ­¤äº‹æœ¬è´¨ä¸Šå¹¶ä¸å¤æ‚ã€‚ å½“ç„¶ï¼Œé™¤éæ‚¨è‡³å°‘å…·æœ‰Javaé¢†åŸŸçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ã€‚ <br><br> å¯¹äºç¼–å†™Androidåº”ç”¨ç¨‹åºï¼Œæºä»£ç æ˜¯ç”¨Javaç¼–å†™çš„ï¼Œç„¶åä½¿ç”¨ä¼ ç»Ÿçš„Javaå·¥å…·ç¼–è¯‘æˆæ ‡å‡†Javaå­—èŠ‚ç ã€‚ ç„¶åï¼Œä»£ç ä¸­å‘ç”Ÿäº†å…¶ä»–æœ‰è¶£çš„äº‹æƒ…ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œä¸éœ€è¦è¿™äº›ç»†èŠ‚ã€‚ <br><br> å¯¹äºè‡­åæ˜­è‘—çš„é“æ†å·¥ä½œè€…ï¼Œä¼¼ä¹ä»ç„¶æœ‰å¯èƒ½ç”¨çº³ç§’çº§çš„åˆ†æ•°æ¥ç¼–å†™Cåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”åœ¨æŸå¤„æœ‰æŸç§åŒ…å¯ä»¥å°†æ‚¨çš„ä»£ç ä»Pythonè½¬æ¢å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘åœ¨è¿™é‡Œæ— æ³•é€éœ²ä»»ä½•ä¿¡æ¯ï¼Œå› ä¸ºæˆ‘åšäº†å¾ˆé•¿æ—¶é—´çš„æ­£ç¡®é€‰æ‹©ã€‚ <br><br> å› æ­¤ï¼ŒJavaå’ŒAndroid Studioè½¯ä»¶åŒ…-ä¸€ä¸ªé›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œå¯ä¸åŸºäºJetBrainsçš„IntelliJ IDEAè½¯ä»¶çš„Androidå¹³å°ä¸€èµ·ä½¿ç”¨ï¼ŒJetBrainsæ˜¯Androidåº”ç”¨ç¨‹åºçš„å®˜æ–¹å¼€å‘å·¥å…·ã€‚ <br><br><img src="https://habrastorage.org/webt/mi/vo/b5/mivob5v-pisjrb1qvojlg1pgsf0.png"><br><br> å¦‚æœæ‚¨å·²ç»åœ¨ä½¿ç”¨IntelliJ IDEAè½¯ä»¶ï¼Œç†Ÿæ‚‰çš„ç•Œé¢å°†ä½¿æ‚¨æ„Ÿåˆ°æƒŠå–œã€‚ <br><br> æˆ‘ä»B. Phillipså’ŒC. Stewartçš„ä¹¦ä¸­ç†Ÿæ‚‰äº†æ„å»ºåº”ç”¨ç¨‹åºçš„åŸºç¡€-ä¸“ä¸šäººå£«çš„â€œ ANDROIDâ€ç¼–ç¨‹ã€‚â€œæ®æˆ‘æ‰€çŸ¥ï¼Œä¸“ä¸šäººå£«è®¤ä¸ºè¯»è€…è‡³å°‘å¯¹Java SEæœ‰ç‚¹ç†Ÿæ‚‰ã€‚è¿™æœ¬ä¹¦æœ‰ç‚¹å¤æ‚æˆ‘æ²¡æœ‰å‘ç°ï¼Œå¯¹äºæˆ‘ä»¬çš„ç›®çš„ï¼Œæœ¬ä¹¦çš„å‰åç« å·²ç»è¶³å¤Ÿäº†ï¼Œå¹¸è¿çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨ä¸Šè¿°Android Studioæ—¶ï¼Œæœ¬ä¹¦ä¸­ç»™å‡ºäº†æ‰€æœ‰ä»£ç ç¤ºä¾‹ã€‚ <br><br> é€šè¿‡å°†å…¶åˆ‡æ¢ä¸ºâ€œå¼€å‘äººå‘˜æ¨¡å¼â€ï¼Œå¯ä»¥åœ¨è½¯ä»¶ä»¿çœŸå™¨ä¸Šæˆ–ç›´æ¥åœ¨æ™ºèƒ½æ‰‹æœºä¸Šæ‰§è¡Œè°ƒè¯•åº”ç”¨ç¨‹åºã€‚ <br><br> åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæè¿°äº†é€šè¿‡Windowsä¸Šçš„Windowsåº”ç”¨ç¨‹åºè¿›è¡Œå°è½¦æ§åˆ¶ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç†è®ºä¸Šå·²ç»å­˜åœ¨ç”¨äºåˆ›å»ºHTTPå’ŒUDPè¿æ¥çš„æ‰€æœ‰ä»£ç ä»¥åŠæ§åˆ¶é€»è¾‘ã€‚ å› æ­¤ï¼Œé‡‡ç”¨äº†Oracleçš„å£å·â€œåœ¨ä¸€ä¸ªåœ°æ–¹ç¼–å†™ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨â€ï¼Œæˆ‘ä»¬åªéœ€å°†è¿™äº›ç±»è½¬ç§»åˆ°é€‚ç”¨äºAndroidåº”ç”¨ç¨‹åºçš„æ–°ç¨‹åºä¸­å³å¯ã€‚ ä½†æ˜¯GUIæ˜¯å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œå‡ºäºæ˜æ˜¾çš„åŸå› ï¼Œæ‚¨å¿…é¡»ç¦»å¼€åŸä½ç½®ã€‚ ä½†å¦ä¸€æ–¹é¢ï¼Œåœ¨Androidä¸Šï¼Œæ‰€æœ‰æ“ä½œéƒ½éå¸¸ç›¸ä¼¼ä¸”éå¸¸å¿«é€Ÿï¼Œå› æ­¤æˆ‘ä»¬ä¸ä¼šé™·å…¥å¤±è´¥è€…çš„è¡Œåˆ—ã€‚ <br><br>  <b>å°†æ‰‹æŒ‡æˆ³å…¥å±å¹•</b> <br><br><img src="https://habrastorage.org/webt/yh/ec/kw/yheckwfcoqj3p01duei5y84mcle.jpeg"><br><br> å› æ­¤ï¼Œæˆ‘ä»¬åœ¨Android Studioä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®â€œ FourWheelRobotControlâ€ã€‚ <br> è¿™æ˜¯ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå®ƒå°†åŒ…å«æ´»åŠ¨ <br><br><div class="spoiler">  <b class="spoiler_title">ç±»MainActivity.java</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.Sensor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.MotionEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.View; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.ImageButton; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.TextView; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.Toast; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonUP; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonDOWN; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonLEFT; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonRIGHT; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> direction = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HTTP_client(<span class="hljs-number"><span class="hljs-number">40000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Udp_client(); mButtonUP = (ImageButton) findViewById(R.id.imageButtonUP); mButtonUP.setOnTouchListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnTouchListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v, MotionEvent event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_DOWN) { direction = <span class="hljs-number"><span class="hljs-number">3</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_UP) { direction = <span class="hljs-number"><span class="hljs-number">100</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }); mButtonDOWN = (ImageButton) findViewById(R.id.imageButtonDown); mButtonDOWN.setOnTouchListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnTouchListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v, MotionEvent event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_DOWN) { direction = <span class="hljs-number"><span class="hljs-number">4</span></span>; Toast.makeText(MainActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span> + direction, Toast.LENGTH_SHORT).show(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_UP) { direction = <span class="hljs-number"><span class="hljs-number">100</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }); mButtonLEFT = (ImageButton) findViewById(R.id.imageButtonLeft); mButtonLEFT.setOnTouchListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnTouchListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v, MotionEvent event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_DOWN) { direction = <span class="hljs-number"><span class="hljs-number">1</span></span>; Toast.makeText(MainActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span> + direction, Toast.LENGTH_SHORT).show(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_UP) { direction = <span class="hljs-number"><span class="hljs-number">100</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }); mButtonRIGHT = (ImageButton) findViewById(R.id.imageButtonRight); mButtonRIGHT.setOnTouchListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnTouchListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v, MotionEvent event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_DOWN) { direction = <span class="hljs-number"><span class="hljs-number">2</span></span>; Toast.makeText(MainActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span> + direction, Toast.LENGTH_SHORT).show(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.getAction() == MotionEvent.ACTION_UP) { direction = <span class="hljs-number"><span class="hljs-number">100</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }); }</code> </pre> </div></div><br> å’Œå¸ƒå±€ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">å¸ƒå±€å›¾</b> <div class="spoiler_text"><pre> <code class="xml hljs"> /spoiler/ activity_main.xml <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.ConstraintLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mikhail_akhmetov.fourweelsrobotcontrol.MainActivity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImageButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/imageButtonRight"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Widget.Holo.ImageButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginEnd</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginRight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginStart</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:color/holo_orange_dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintBottom_toTopOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/linearLayout"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintHorizontal_bias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.417"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintLeft_toRightOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/imageButtonLeft"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintRight_toRightOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintTop_toTopOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintVertical_bias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.513"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:srcCompat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:drawable/ic_media_ff"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImageButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/imageButtonUP"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Widget.ImageButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginBottom</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginTop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:color/holo_orange_dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintBottom_toTopOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/imageButtonDown"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintLeft_toLeftOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintRight_toRightOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintTop_toTopOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintVertical_bias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.486"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:srcCompat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:drawable/arrow_up_float"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImageButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/imageButtonDown"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Widget.ImageButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginBottom</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"57dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:color/holo_orange_dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:fadingEdge</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"horizontal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintBottom_toTopOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/linearLayout"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintHorizontal_bias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.487"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintLeft_toLeftOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintRight_toRightOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:srcCompat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:drawable/arrow_down_float"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginStart</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImageButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/imageButtonLeft"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Widget.ImageButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"52dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"94dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginStart</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"94dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:color/holo_orange_dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintBottom_toTopOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/linearLayout"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintLeft_toLeftOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintTop_toTopOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintVertical_bias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.513"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:srcCompat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:drawable/ic_media_rew"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/linearLayout"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"368dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"227dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginBottom</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"11dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginEnd</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginRight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginStart</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:weightSum</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintBottom_toBottomOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintHorizontal_bias</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintLeft_toLeftOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layout_constraintRight_toRightOf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"parent"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/textViewX"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_weight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.28"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/textViewY"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_weight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.28"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/textViewZ"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_weight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.23"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.constraint.ConstraintLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br> æ— éœ€ç”¨ç¬”ä¹¦å†™ï¼Œå®ƒæ˜¯åœ¨ç¼–è¾‘å™¨ä¸­åˆ›å»ºåè‡ªåŠ¨ç”Ÿæˆçš„ã€‚ <br><br> ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€ä»ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ç»™å‡ºçš„ç¨‹åºä¸­è½¬ç§»ä¸¤ä¸ªç±»ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">HTTP_client.java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.InputStreamReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.OutputStreamWriter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.PrintWriter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.InetAddress; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTTP_client</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Thread</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> port; String s; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String host_address=<span class="hljs-string"><span class="hljs-string">"192.168.1.138"</span></span>;<span class="hljs-comment"><span class="hljs-comment">//    public String Greetings_from_S; HTTP_client(int port) { this.port = port; start(); } public void run() { try (Socket socket = new Socket(host_address,port)){ PrintWriter pw = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()), true); BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream())); pw.println("stop data\r");//  ,    pw.println("data\r");// Greetings with SERVER Greetings_from_S = br.readLine(); if (Greetings_from_S.equals("ready")) { new Udp_client(); } } catch (Exception e) { e.printStackTrace(); } } }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Udp_clent.java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.DatagramPacket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.DatagramSocket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.InetAddress; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Udp_client</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Thread</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i =<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> [] data = {<span class="hljs-number"><span class="hljs-number">0</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> udp_port=<span class="hljs-number"><span class="hljs-number">50000</span></span>; InetAddress addr; DatagramSocket ds; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Udp_client</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ds = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DatagramSocket(); addr = InetAddress.getByName(HTTP_client.host_address); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { } start(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> temp = MainActivity.direction; String s = <span class="hljs-string"><span class="hljs-string">""</span></span> + MainActivity.direction; data = s.getBytes(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(temp!=<span class="hljs-number"><span class="hljs-number">100</span></span> ) { DatagramPacket pack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DatagramPacket(data, data.length, addr, udp_port); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ds.send(pack); i=<span class="hljs-number"><span class="hljs-number">0</span></span>; Thread.sleep(<span class="hljs-number"><span class="hljs-number">200</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(i==<span class="hljs-number"><span class="hljs-number">0</span></span>) { s = <span class="hljs-string"><span class="hljs-string">""</span></span> + <span class="hljs-number"><span class="hljs-number">0</span></span>; data = s.getBytes(); DatagramPacket pack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DatagramPacket(data, data.length, addr, udp_port); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ds.send(pack); Thread.sleep(<span class="hljs-number"><span class="hljs-number">200</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { } } i=<span class="hljs-number"><span class="hljs-number">1</span></span>;<span class="hljs-comment"><span class="hljs-comment">//     } } } }</span></span></code> </pre></div></div><br> è¯¥ç¨‹åºçš„æœ¬è´¨ä¿æŒä¸å˜ã€‚  MainActivityé¦–å…ˆå¯åŠ¨HTTPå’ŒUDPå®¢æˆ·ç«¯ï¼Œç„¶åæ•è·æŒ‰é’®çš„æŒ‰ä¸‹å’ŒæŒ‰ä¸‹ï¼Œå‘é€æ–¹å‘æ¨é€ä»£ç ä»¥å½¢æˆUDPæ•°æ®åŒ…ã€‚ ä»é‚£é‡Œå¼€å§‹ï¼Œä¸€åˆ‡å·²ç»å°±ç»ª-â€œå‰è¿›â€ï¼Œâ€œåé€€â€ï¼Œâ€œå·¦â€ï¼Œâ€œå³â€ï¼Œå½“æ‚¨æŒ‰â€œåœæ­¢â€æ—¶ï¼Œå®ƒä»¬é€šè¿‡WI-FIç¦»å¼€è´­ç‰©è½¦ã€‚ <br><br> é™¤äº†æ‰€æœ‰è¿™äº›ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¨å¾®ä¿®æ”¹æ‰€è°“çš„æ¸…å•æ–‡ä»¶ï¼Œè¯¥æ¸…å•åŒæ ·ä¸»è¦ç”±å…¶è‡ªèº«ç”Ÿæˆã€‚ <br><br><blockquote> æ¸…å•æ˜¯å¸¦æœ‰æè¿°æ‚¨çš„Androidåº”ç”¨ç¨‹åºçš„å…ƒæ•°æ®çš„XMLæ–‡ä»¶ã€‚ æ¸…å•æ–‡ä»¶å§‹ç»ˆç§°ä¸ºAndroidManifest.xmlï¼Œä½äºé¡¹ç›®çš„app /æ¸…å•ç›®å½•ä¸­ã€‚ </blockquote><br> æ²¡é”™ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´å·¥ä½œå¾ˆå°‘ã€‚ <br><br> ç¦æ­¢å±å¹•æ—‹è½¬ï¼š <br><br><pre> <code class="xml hljs">android:screenOrientation="portrait"</code> </pre><br> æˆ‘ä»¬å…è®¸åœ¨Internetä¸Šè¿›è¡Œå·¥ä½œï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.INTERNET"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br> è¿™å°±æ˜¯å…¨éƒ¨ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">AndroidManifest.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mikhail_akhmetov.fourweelsrobotcontrol"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:allowBackup</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@mipmap/ic_launcher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:roundIcon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@mipmap/ic_launcher_round"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:supportsRtl</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@style/AppTheme"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".MainActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:screenOrientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"portrait"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MAIN"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.LAUNCHER"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.INTERNET"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br> åœ¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š <br><br><img src="https://habrastorage.org/webt/up/nv/yr/upnvyrkc5r2ti2kuzm7e0ktjswa.png"><br><br> åŸºæœ¬ä¸Šå°±æ˜¯å…¨éƒ¨ã€‚ ç°åœ¨ï¼Œå¯ä»¥é€šè¿‡æ‰‹æœºæ§åˆ¶æ‰‹æ¨è½¦ã€‚ è¯¥åº”ç”¨ç¨‹åºéå¸¸ç®€å•ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ¼”ç¤ºåº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰ä»»ä½•â€œå¹å£å“¨â€ï¼Œä¾‹å¦‚åœ¨å®¶åº­ç½‘ç»œä¸Šæœç´¢è´­ç‰©è½¦ï¼Œè¿æ¥ï¼Œæ–­å¼€è¿æ¥ä»¥åŠå…¶ä»–æœ‰ç”¨çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä½¿ç”Ÿæ´»æ›´è½»æ¾ï¼Œä½†ä½¿ä»£ç éš¾ä»¥ç†è§£ã€‚ <br><br> å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨å±å¹•ä¸Šçš„æŒ‰é’®è¿›è¡Œæ“ä½œæ˜¯ç›¸åŒçš„ <blockquote>  â€œå¦‚ä½•å–ä¼ç‰¹åŠ é…’ï¼Œç”šè‡³æ˜¯ä»è„–å­å–çš„ä¼ç‰¹åŠ é…’ï¼Œé™¤äº†ç²¾ç¥å’Œå¤§æƒŠå°æ€ªä¹‹å¤–ï¼Œåˆ«æ— å…¶ä»–ã€‚â€ </blockquote>  Venya Erofeevå½“ç„¶æ˜¯æ­£ç¡®çš„ã€‚ <br><br> ä¾‹å¦‚ï¼Œåœ¨åŒä¸€éƒ¨æ™ºèƒ½æ‰‹æœºçš„æ ‡å‡†åŠ é€Ÿåº¦è®¡çš„å¸®åŠ©ä¸‹æ“çºµå°è½¦ä¼šæ›´åŠ æœ‰è¶£ã€‚ <br><br> æ­¤å¤–ï¼Œè¿˜é€šè¿‡æ‰€è°“çš„æ„å›¾éå¸¸ç®€å•åœ°å®ç°äº†æ­¤åŠŸèƒ½ã€‚ æ²¡é”™ï¼Œåˆ›å»ºè‡ªå·±çš„æ„å›¾æ¯”ä½¿ç”¨ç°æˆçš„æ„å›¾æ›´åŠ å›°éš¾ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæ²¡æœ‰äººç¦æ­¢ä½¿ç”¨ç°æˆçš„äº§å“ã€‚ <br><br>  <b>è´¨é‡åŠ é€Ÿè®¡</b> <br><br><img src="https://habrastorage.org/webt/n5/tr/_n/n5tr_nioum4avgw97qqcsqm63zi.jpeg"><br><br> å› æ­¤ï¼Œæˆ‘ä»¬åœ¨MainActivityä¸­ï¼ˆä¸”ä»…åœ¨å…¶ä¸­ï¼‰çš„ä»£ç å°†å‘ç”Ÿæœ€å°çš„å˜åŒ–ã€‚ <br><br> ä¸ºåŠ é€Ÿåº¦è®¡æ·»åŠ å˜é‡ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SensorManager mSensorManager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Sensor mOrientation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xy_angle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xz_angle;</code> </pre><br> æˆ‘ä»¬ä»ç³»ç»Ÿè·å–ä¼ æ„Ÿå™¨æœ¬èº«ï¼Œå¹¶å°†å…¶æ³¨å†Œä¸ºä¾¦å¬å™¨ã€‚ <br><br><pre> <code class="java hljs">mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE); <span class="hljs-comment"><span class="hljs-comment">//    mOrientation = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER); //    mSensorManager.registerListener(this, mOrientation, SensorManager.SENSOR_DELAY_NORMAL);</span></span></code> </pre><br> æˆ‘ä»¬å®ç°ç›‘å¬å™¨æ¥å£æœ¬èº«ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SensorEventListener</span></span></span></span></code> </pre><br> æˆ‘ä»¬å°†ç¼–å†™å››ç§å¼ºåˆ¶æ€§æ–¹æ³•ï¼Œå…¶ä¸­ä»…ä½¿ç”¨æœ€åä¸€ç§ã€‚ ä¸€ç§åœ¨æ›´æ”¹åŠ é€Ÿåº¦è®¡è¯»æ•°æ—¶æœ‰æ•ˆçš„æ–¹æ³•ã€‚ å®é™…ä¸Šï¼Œæˆ‘æƒ³äº²è‡ªè¯¢é—®åŠ é€Ÿåº¦è®¡ï¼Œå°±åƒæ­£å¸¸çš„å¤–å›´è®¾å¤‡ä¸€æ ·ï¼Œå‘¨æœŸå¤§çº¦ä¸º100æ¯«ç§’ï¼Œå› ä¸ºæœ‰äººæ€€ç–‘ï¼ˆç”±äºåç§°ä¸ºonChangedï¼‰è¯¥æ–¹æ³•å®æ–½å¾—å¤ªé¢‘ç¹äº†ã€‚ ä½†æ˜¯ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ˜¯ç§æœ‰çš„ï¼Œå¹¶ä¸”æ‚¨å°†è·å¾—æ¥å£çš„æ— èŠ±æœã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onAccuracyChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sensor sensor, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> accuracy)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    } @Override protected void onResume() { super.onResume(); } @Override protected void onPause() { super.onPause(); } @Override public void onSensorChanged(SensorEvent event) {} //  </span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">ç»“æœï¼ŒMainActivity.javaå°†é‡‡ç”¨ä»¥ä¸‹å½¢å¼</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.SensorEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.SensorEventListener; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.SensorManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.Sensor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.ImageButton; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.TextView; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SensorEventListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonUP; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonDOWN; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonLEFT; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonRIGHT; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> direction = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SensorManager mSensorManager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Sensor mOrientation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xy_angle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xz_angle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextView xyView; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextView xzView; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextView zyView; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HTTP_client(<span class="hljs-number"><span class="hljs-number">40000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Udp_client(); mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE); <span class="hljs-comment"><span class="hljs-comment">//    mOrientation = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER); //    mSensorManager.registerListener(this, mOrientation, SensorManager.SENSOR_DELAY_NORMAL); xyView = (TextView) findViewById(R.id.textViewX); // xzView = (TextView) findViewById(R.id.textViewY); //       zyView = (TextView) findViewById(R.id.textViewZ);//   "direction" mButtonUP = (ImageButton) findViewById(R.id.imageButtonUP); mButtonDOWN = (ImageButton) findViewById(R.id.imageButtonDown); mButtonLEFT = (ImageButton) findViewById(R.id.imageButtonLeft); mButtonRIGHT = (ImageButton) findViewById(R.id.imageButtonRight); //    } @Override public void onAccuracyChanged(Sensor sensor, int accuracy) { //    } @Override protected void onResume() { super.onResume(); } @Override protected void onPause() { super.onPause(); } @Override public void onSensorChanged(SensorEvent event) { //   xy_angle = event.values[0]*10; // XY xz_angle = event.values[1]*10; // XZ x=-(int) xy_angle*1; y=-(int) xz_angle*1; xyView.setText(" x = "+ String.valueOf(x)); xzView.setText(" y = "+String.valueOf(y)); zyView.setText(" direction "+String.valueOf(direction)); if(y&gt;-40&amp;&amp;y&lt;-20){ direction=100;//   ,   ,     if (x&gt;10){//   10  30  20  direction=(byte)(x+30); if (direction&gt;60){direction=60;} } if(x&lt;-10){ direction=(byte)(-x+50); if (direction&gt;80){direction=80;} } } else { if (y &gt; -20) {//  ,  -20: 20  40  direction = (byte) (y / 2 + 10); if (direction &gt; 20) { direction = 20; } ; } if (y &lt; -40) {//  ,  -40: -80  40  direction = (byte) (-y - 20); if (direction &gt; 40) { direction = 40; } ; } } } } //   direction 100  // 1-20  ,   -20 // 21-40  ,   -40 // 41-60 ,  10 // 61-80 ,   -10</span></span></code> </pre><br></div></div><br> è¯¥ç¨‹åºåœ¨æ™ºèƒ½æ‰‹æœºçš„å±å¹•ä¸Šåœ¨ä¸¤ä¸ªè½´ä¸Šæ˜¾ç¤ºä¼ æ„Ÿå™¨ã€‚ ä»£æ›¿æœªä½¿ç”¨çš„ç¬¬ä¸‰è½´ï¼Œæ˜¾ç¤ºæ–¹å‘å˜é‡â€œ directionâ€ã€‚ åŒæ ·çš„æ•°æ®ä»¥å­—èŠ‚æµçš„å½¢å¼æµå‘è´­ç‰©è½¦ã€‚ ä½†æ˜¯ï¼Œç”±äºè¯¥æµæ˜¯çº¯å­—èŠ‚çš„äº‹å®ï¼Œå› æ­¤å¾ˆéš¾ç¡®å®šâ€œè½¬å‘â€æˆ–â€œåœæ­¢â€å‘½ä»¤çš„ä½ç½®ã€‚ å› æ­¤ï¼Œæˆ‘çš„è¡Œä¸ºå¾ˆç®€å•ï¼šæ¯ä¸ªæ–¹å‘å’Œå€¾æ–œè§’åº¦éƒ½æœ‰è‡ªå·±çš„æ•°å­—èŒƒå›´ã€‚ å¤§è‡´æ¥è¯´ï¼Œ1-20æ˜¯â€œå‰è¿›â€é€Ÿåº¦ï¼Œè€Œ21-40æ˜¯â€œåé€€â€ï¼Œä¾æ­¤ç±»æ¨ã€‚ å½“ç„¶ï¼Œæœ‰å¯èƒ½é€šè¿‡UDPä¼ è¾“çº¯æ•°æ®ï¼Œå¹¶ä¸”æ§åˆ¶å‘½ä»¤æœ¬èº«åº”é€šè¿‡TCPåè®®è¿›è¡Œè®¾ç½®ï¼Œè¿™è‚¯å®šä¼šæ›´æ­£ç¡®ã€‚ ä½†æ˜¯ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦åœ¨ESP8266æœ¬èº«ä¸Šç¼–è¾‘ç¨‹åºï¼Œæˆ‘ç°åœ¨è¿˜ä¸æƒ³è¦ã€‚ <br><br> å› æ­¤ï¼Œè´­ç‰©è½¦åœ¨å…¬å¯“å‘¨å›´æ»šåŠ¨ï¼Œå¯¹æˆ‘çš„GalaxyS7çš„æ–œå¡æ•æ„Ÿåœ°åšå‡ºååº”ï¼Œä½†æ˜¯ï¼Œæ­£å¦‚è‡­åæ˜­è‘—çš„Venyaæ›¾ç»è¯´è¿‡çš„é‚£æ ·ï¼Œä»ç„¶ä¸æ˜¯é‚£æ ·ã€‚ <br><br><blockquote>  â€œç°åœ¨ï¼Œæˆ‘ä¸ºæ‚¨æä¾›æœ€å¥½çš„ã€‚ æ­£å¦‚è¯—äººæ‰€è¯´ï¼Œâ€œåŠ³åŠ¨ä¹‹å† é¦–å…ˆæ˜¯å›æŠ¥ã€‚â€ ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä¸ºæ‚¨æä¾›â€œ Offal Offâ€é¸¡å°¾é…’ï¼Œè¿™ç§é¥®æ–™ä½¿ä¸€åˆ‡é»¯ç„¶å¤±è‰²ã€‚ è¿™ä¸å†æ˜¯é¥®æ–™ï¼Œè€Œæ˜¯é¢†åŸŸçš„éŸ³ä¹ã€‚  â€ </blockquote><br> åœ¨Siriå’ŒAlexaçš„è¿™ä¸ªæ—¶ä»£ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥è½¬åŠ¨çš„å—ï¼Ÿ è®©è¯­éŸ³æ§åˆ¶æœä»ï¼ <br><br>  <b>ç°åœ¨å¬æˆ‘è¯´ï¼</b> <br><br><img src="https://habrastorage.org/webt/lq/2y/wi/lq2ywi0undiqsci5pf5rc2bkwqk.jpeg"><br><br> æˆ‘å¼•ç”¨ï¼š <br><br><blockquote> å®é™…ä¸Šï¼Œåœ¨Androidä¸­ä½¿ç”¨è¯­éŸ³è¯†åˆ«å’Œè¯­éŸ³åˆæˆéå¸¸ç®€å•ã€‚ æˆ‘ä»¬å°†æ‰€æœ‰å¤æ‚çš„è®¡ç®—éšè—åœ¨ä¸€ä¸ªå…·æœ‰ç®€å•APIçš„ä¼˜é›…åº“ä¸­ã€‚ å³ä½¿æ‚¨éå¸¸äº†è§£Androidç¼–ç¨‹ï¼Œä¹Ÿå¯ä»¥ç²¾é€šæœ¬è¯¾ç¨‹ã€‚ </blockquote><br> å®é™…ä¸Šï¼Œä¸€åˆ‡å¯¹æˆ‘æ¥è¯´éƒ½å¾ˆç¬¨æ‹™ï¼Œä½†è¿™å¾ˆå¯èƒ½æ˜¯å› ä¸ºæˆ‘ä½¿ç”¨äº†æœ€ç®€å•çš„é€‰é¡¹ï¼Œå¹¶ä¸”æ²¡æœ‰æ­£ç¡®ç ”ç©¶æ­¤APIã€‚ ä¸€åˆ‡ä¹Ÿéƒ½é€šè¿‡æ„å›¾æ¥å®Œæˆï¼Œå€ŸåŠ©è¿™äº›æ„å›¾ï¼Œæˆ‘ä»¬æ±‚åŠ©äºGoogleè¯­éŸ³å¼•æ“ï¼Œå³è¯­éŸ³è¯†åˆ«åŠŸèƒ½ã€‚ å› æ­¤ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªæ­£å¸¸å·¥ä½œçš„Internetã€‚ <br><br> å†æ¬¡ï¼Œåªæœ‰MainActivity.javaè¿›è¡Œäº†æ›´æ”¹ï¼Œå°½ç®¡æˆ‘å¯¹å¸ƒå±€è¿›è¡Œäº†ä¸€äº›æ›´æ”¹ï¼ˆç°åœ¨å››ä¸ªæŒ‰é’®åœ¨é‚£é‡Œå®Œå…¨æ²¡æœ‰ç”¨ï¼Œä¸€ä¸ªå°±è¶³å¤Ÿäº†ï¼‰ã€‚ <br><br> ä»¥ä¸‹å†…å®¹å·²æ·»åŠ åˆ°MainActivity.javaä¸­ï¼š <br><br> ç›¸åŒçš„æ„å›¾ï¼š <br><br><pre> <code class="java hljs">Intent intent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH); intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM); intent.putExtra(RecognizerIntent.EXTRA_PROMPT, <span class="hljs-string"><span class="hljs-string">", ,  -??? "</span></span>); startActivityForResult(intent, Print_Words);</code> </pre><br> ä»¥åŠè¿”å›çš„å†…å®¹ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onActivityResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> requestCode, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> resultCode, Intent data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    : if (requestCode==Print_Words &amp;&amp; resultCode==RESULT_OK) { //     ,   : ArrayList&lt;String&gt;result=data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS); //     TextView: stroka_otveta = result.toString(); }</span></span></code> </pre><br> ç„¶åï¼Œä»–ä»¥å„ç§å½¢å¼çš„æ–¹æ‹¬å·å’Œé€—å·è¿”å›äº†ä¸€ç³»åˆ—ç±»ä¼¼çš„è¯è¯­ï¼Œå¹¶ä¸”å½¢å¼ç›¸å½“â€œåƒåœ¾åŒ–â€ã€‚ æ‚¨åªéœ€è¦é€‰æ‹©ä¸€ä¸ªä¸æ‚¨è¯´çš„å•è¯ç›¸ä¼¼çš„å•è¯å³å¯ã€‚ å¥½å§ï¼Œå› æ­¤ï¼Œå¦‚æœæŠ“ä½äº†â€œå‰è¿›â€ä¸€è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‰è¿›ï¼›å¦‚æœâ€œæ­£ç¡®â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‰è¿›è‡³å³è¾¹ï¼Œä¾æ­¤ç±»æ¨ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘åˆ°é€šè¿‡â€œ Eâ€åœ¨ä½•å¤„é™„åŠ äº†å¤šä½™çš„é€—å·ï¼ˆæˆ‘ç æ‰äº†æ‹¬å·ï¼Œä½†æ˜¯å¯¹äºé€—å·æ²¡æœ‰è¶³å¤Ÿçš„å¼ºåº¦ï¼‰ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ€»çš„æ¥è¯´ï¼ŒMainActivity.javaæœ¬èº«çš„æ–‡æœ¬å˜ä¸º</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.MotionEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.View; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.ImageButton; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.TextView; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Intent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.speech.RecognizerIntent; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton mButtonUP; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> direction = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String stroka_otveta; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Print_Words = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextView EnteredText1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextView EnteredText2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TextView EnteredText3; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> slovo_raspoznano =<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Udp_client(); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HTTP_client(<span class="hljs-number"><span class="hljs-number">40000</span></span>); EnteredText1 = (TextView) findViewById(R.id.textViewX); <span class="hljs-comment"><span class="hljs-comment">// EnteredText2 = (TextView) findViewById(R.id.textViewY); // EnteredText3 = (TextView) findViewById(R.id.textViewZ); // mButtonUP = (ImageButton) findViewById(R.id.imageButtonUP); mButtonUP.setOnTouchListener(new View.OnTouchListener() { @Override public boolean onTouch(View v, MotionEvent event) { if (event.getAction() == MotionEvent.ACTION_DOWN){ if(HTTP_client.ok){ // RecognizerIntent        : EnteredText3.setText(" http  "); Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH); intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM); intent.putExtra(RecognizerIntent.EXTRA_PROMPT, ", ,  -??? "); startActivityForResult(intent, Print_Words); } else { EnteredText3.setText("  "); } } if (event.getAction() == MotionEvent.ACTION_UP ){ } return false; } }); } @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) { //    : if (requestCode==Print_Words &amp;&amp; resultCode==RESULT_OK) { //     ,   : ArrayList&lt;String&gt;result=data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS); //     TextView: stroka_otveta = result.toString(); } StringBuffer sb = new StringBuffer(stroka_otveta); sb.deleteCharAt(stroka_otveta.length()-1); sb.deleteCharAt(0); stroka_otveta=sb.toString(); String[] words = stroka_otveta.split("\\s"); //        () //    for(int i = 0; i&lt; words.length;i++) { if(words[i].equals(",")||words[i].equals("")) { direction = 1; slovo_raspoznano=true; stroka_otveta=words[i]; } if(words[i].equals(",")||words[i].equals("")){ direction=2; slovo_raspoznano=true; stroka_otveta=words[i]; } if(words[i].equals(",")|| words[i].equals("")){ direction=4; slovo_raspoznano=true; stroka_otveta=words[i]; } if(words[i].equals(",")|| words[i].equals(",")|| words[i].equals("") || words[i].equals("")){ direction=3; slovo_raspoznano=true; stroka_otveta=words[i]; } if(words[i].equals(",")|| words[i].equals(",")|| words[i].equals("") || words[i].equals("")){ direction=100; slovo_raspoznano=true; stroka_otveta=words[i]; } } if(!slovo_raspoznano){ direction=100; stroka_otveta=" ,   ... "; } EnteredText1.setText(" "+direction+" " +stroka_otveta); slovo_raspoznano=false; super.onActivityResult(requestCode, resultCode, data); } }</span></span></code> </pre></div></div><br> å¥½å§ï¼Œç›´åˆ°ä½¿ç”¨ä¸€ä¸ªæŒ‰é’®çš„å †å¸ƒå±€ <br><br><div class="spoiler">  <b class="spoiler_title">activity_main.xmlã€‚</b> <div class="spoiler_text"><pre> <code class="java hljs"> &lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"utf-8"</span></span>?&gt; &lt;android.support.constraint.ConstraintLayout xmlns:android=<span class="hljs-string"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span> xmlns:app=<span class="hljs-string"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span> xmlns:tools=<span class="hljs-string"><span class="hljs-string">"http://schemas.android.com/tools"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> tools:context=<span class="hljs-string"><span class="hljs-string">"mikhail_akhmetov.fourwheelsrobotandroidvoice.MainActivity"</span></span>&gt; &lt;ImageButton android:id=<span class="hljs-string"><span class="hljs-string">"@+id/imageButtonUP"</span></span> style=<span class="hljs-string"><span class="hljs-string">"@android:style/Widget.ImageButton"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"160dp"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"146dp"</span></span> android:layout_marginTop=<span class="hljs-string"><span class="hljs-string">"8dp"</span></span> android:background=<span class="hljs-string"><span class="hljs-string">"@android:color/holo_orange_dark"</span></span> app:layout_constraintLeft_toLeftOf=<span class="hljs-string"><span class="hljs-string">"parent"</span></span> app:layout_constraintRight_toRightOf=<span class="hljs-string"><span class="hljs-string">"parent"</span></span> app:layout_constraintTop_toTopOf=<span class="hljs-string"><span class="hljs-string">"parent"</span></span> app:srcCompat=<span class="hljs-string"><span class="hljs-string">"@android:drawable/arrow_up_float"</span></span> android:layout_marginBottom=<span class="hljs-string"><span class="hljs-string">"8dp"</span></span> app:layout_constraintBottom_toTopOf=<span class="hljs-string"><span class="hljs-string">"@+id/linearLayout"</span></span>/&gt; &lt;LinearLayout android:id=<span class="hljs-string"><span class="hljs-string">"@+id/linearLayout"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"368dp"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"227dp"</span></span> android:layout_marginBottom=<span class="hljs-string"><span class="hljs-string">"11dp"</span></span> android:layout_marginEnd=<span class="hljs-string"><span class="hljs-string">"8dp"</span></span> android:layout_marginLeft=<span class="hljs-string"><span class="hljs-string">"8dp"</span></span> android:layout_marginRight=<span class="hljs-string"><span class="hljs-string">"8dp"</span></span> android:layout_marginStart=<span class="hljs-string"><span class="hljs-string">"8dp"</span></span> android:orientation=<span class="hljs-string"><span class="hljs-string">"vertical"</span></span> android:weightSum=<span class="hljs-string"><span class="hljs-string">"1"</span></span> app:layout_constraintBottom_toBottomOf=<span class="hljs-string"><span class="hljs-string">"parent"</span></span> app:layout_constraintHorizontal_bias=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> app:layout_constraintLeft_toLeftOf=<span class="hljs-string"><span class="hljs-string">"parent"</span></span> app:layout_constraintRight_toRightOf=<span class="hljs-string"><span class="hljs-string">"parent"</span></span>&gt; &lt;TextView android:id=<span class="hljs-string"><span class="hljs-string">"@+id/textViewTitle"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"   "</span></span> android:textColor=<span class="hljs-string"><span class="hljs-string">"@android:color/holo_red_dark"</span></span>/&gt; &lt;TextView android:id=<span class="hljs-string"><span class="hljs-string">"@+id/textViewX"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_weight=<span class="hljs-string"><span class="hljs-string">"0.28"</span></span> /&gt; &lt;TextView android:id=<span class="hljs-string"><span class="hljs-string">"@+id/textViewY"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_weight=<span class="hljs-string"><span class="hljs-string">"0.28"</span></span> /&gt; &lt;TextView android:id=<span class="hljs-string"><span class="hljs-string">"@+id/textViewZ"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_weight=<span class="hljs-string"><span class="hljs-string">"0.23"</span></span> /&gt; &lt;/LinearLayout&gt; &lt;/android.support.constraint.ConstraintLayout&gt;</code> </pre></div></div><br> æœ€ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œå®ƒç¡®å®å¯ä»¥éª‘ä¹˜å¹¶è†å¬å£°éŸ³ï¼ˆé€šå¸¸ï¼‰ã€‚ ä½†æ˜¯ï¼Œå½“ç„¶æ˜¯åˆ¶åŠ¨æ¥å£ï¼› å½“æ‚¨è¯´æ—¶ï¼Œç›´åˆ°å®ƒè¢«è¯†åˆ«å¹¶è¿”å›ï¼› ç®€è€Œè¨€ä¹‹ï¼Œé¢„å…ˆé€‰æ‹©è¾ƒå°çš„é€Ÿåº¦ï¼Œå¦åˆ™æˆ¿é—´åä¹‹äº¦ç„¶ã€‚ <br><br> ä»Šå¤©å°±è¿™äº›ï¼Œå¦‚æœæˆ‘å–œæ¬¢çš„è¯ï¼Œæˆ‘ä¼šå¾ˆé«˜å…´ã€‚ <br><br><img src="https://habrastorage.org/webt/0x/ah/jw/0xahjw5wdyqdmgwkwkwrqqf7kaa.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN409107/">https://habr.com/ru/post/zh-CN409107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN409097/index.html">ç§‘å­¦å®¶ç°åœ¨å¯ä»¥ç›´æ¥æ¿€å‘çŒ´å­è¿›å…¥å¤§è„‘</a></li>
<li><a href="../zh-CN409099/index.html">æ–°å¹´è¦ä»˜å‡ºä»€ä¹ˆï¼Ÿ é—®é¢˜2017</a></li>
<li><a href="../zh-CN409101/index.html">å…‹æœç–²åŠ³çš„ç§‘å­¦æ–¹æ³•ï¼šä¿ƒæ™ºè¯ï¼Œå’–å•¡å’Œç¥ç»æŠ€æœ¯</a></li>
<li><a href="../zh-CN409103/index.html">Crispr Therapeuticsè®¡åˆ’è¿›è¡Œé—ä¼ ç—…æ²»ç–—çš„é¦–ä¸ªä¸´åºŠè¯•éªŒ</a></li>
<li><a href="../zh-CN409105/index.html">æœ€å¤§çš„åŠ å¯†è´§å¸ï¼Œå…¶ç»“æœä»¥åŠNiceHashä¸ºä»€ä¹ˆä¸åœ¨å®¶å·çªƒçš„åŸå› </a></li>
<li><a href="../zh-CN409111/index.html">Modbus RTUç½‘ç»œä»¿çœŸè½¯ä»¶</a></li>
<li><a href="../zh-CN409113/index.html">çäº‹ï¼Œä½†å¾ˆå¥½ï¼šå¯è°ƒèŠ‚é¥®æ–™æ¸©åº¦çš„æ¯å­</a></li>
<li><a href="../zh-CN409115/index.html">é‚ªæ•™æ¸¸æˆçš„é…ä¹ï¼šç˜Ÿç–«ï¼Œä¹Œæ‰˜é‚¦å’Œå†°æ–§</a></li>
<li><a href="../zh-CN409119/index.html">è‹±ç‰¹å°”Â®2017ã€‚å¹´åº¦ä¸šç»©</a></li>
<li><a href="../zh-CN409121/index.html">è¿™æ˜¯ä»€ä¹ˆï¼šä¿„ç½—æ–¯æµåª’ä½“æœåŠ¡å¸‚åœº</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>