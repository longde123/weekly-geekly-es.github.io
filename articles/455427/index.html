<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèª üíª üë®üèæ‚Äçüíº C√≥mo aprendimos a predecir la solicitud de un usuario y acelerar la carga de resultados de b√∫squeda ‚ö´Ô∏è üë®üèæ‚Äç‚öñÔ∏è üïó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las sugerencias de b√∫squeda (sjest) no son solo un servicio de usuario, sino tambi√©n un modelo de lenguaje muy poderoso que almacena miles de millones...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo aprendimos a predecir la solicitud de un usuario y acelerar la carga de resultados de b√∫squeda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/455427/"><p>  Las sugerencias de b√∫squeda (sjest) no son solo un servicio de usuario, sino tambi√©n un modelo de lenguaje muy poderoso que almacena miles de millones de consultas de b√∫squeda, admite b√∫squedas difusas, personalizaci√≥n y mucho m√°s.  Aprendimos a usar sujest para predecir la consulta final del usuario y cargar los resultados de b√∫squeda antes de hacer clic en el bot√≥n "Buscar". </p><br><p>  La introducci√≥n de esta tecnolog√≠a, el pre-renderizador, requiri√≥ muchas soluciones interesantes en el desarrollo m√≥vil, el desarrollo de tiempo de ejecuci√≥n de b√∫squeda, registros y m√©tricas.  Y, por supuesto, necesit√°bamos un clasificador genial que determinara si se debe cargar una consulta de b√∫squeda por adelantado: este clasificador debe encontrar un equilibrio entre la aceleraci√≥n de descarga, el tr√°fico adicional y la carga de b√∫squeda.  Hoy hablar√© sobre c√≥mo logramos crear un clasificador de este tipo. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ei/dx/0s/eidx0szyy2cvdzcwwtar86_h6bw.png"><br></a> </p><a name="habracut"></a><br><h2 id="1-srabotaet-li-ideya">  <strong>1. ¬øFuncionar√° la idea?</strong> </h2><br><p>  En las tareas de investigaci√≥n, rara vez est√° claro de antemano que existe una buena soluci√≥n.  Y en nuestro caso, nosotros tampoco sab√≠amos inicialmente qu√© datos se necesitaban para construir un clasificador suficientemente bueno.  En tal situaci√≥n, es √∫til comenzar con algunos modelos muy simples que le permitir√°n evaluar los beneficios potenciales del desarrollo. </p><br><p>  La idea m√°s simple result√≥ ser la siguiente: cargaremos los resultados de b√∫squeda en el primer aviso de la sugerencia de b√∫squeda;  cuando el aviso cambia, descartamos la descarga anterior y comenzamos a descargar un nuevo candidato.  Result√≥ que dicho algoritmo funciona bien y casi todas las solicitudes se pueden precargar, sin embargo, la carga en los backends de b√∫squeda aumenta en consecuencia y el tr√°fico de usuarios aumenta en consecuencia.  Est√° claro que tal soluci√≥n no se puede implementar. </p><br><p>  La siguiente idea tambi√©n fue bastante simple: es necesario cargar sugerencias de b√∫squeda probables no en todos los casos, sino solo cuando tenemos la confianza suficiente de que realmente son necesarias.  La soluci√≥n m√°s simple ser√° un clasificador que funcione directamente en tiempo de ejecuci√≥n de acuerdo con los datos que ya tiene el m√°s seguro. </p><br><p>  El primer clasificador se cre√≥ utilizando solo diez factores.  Estos factores depend√≠an de la distribuci√≥n de probabilidad sobre el conjunto de indicaciones (idea: cuanto mayor sea el "peso" de la primera solicitud, m√°s probable ser√° que se ingrese) y la longitud de la entrada (idea: cuantas menos letras tiene que ingresar el usuario, m√°s seguro es precargar).  La belleza de este clasificador tambi√©n fue que, para construirlo, no era necesario liberar nada.  Los factores necesarios para el candidato se pueden recopilar haciendo una solicitud http al demonio m√°s sagrado, y los objetivos se construyen de acuerdo con los registros m√°s simples: el candidato se considera "bueno" si la solicitud total del usuario coincide por completo.  Fue posible armar un grupo de este tipo, entrenar varias regresiones log√≠sticas y construir un diagrama de dispersi√≥n en solo unas pocas horas. </p><br><p> Las m√©tricas para el pre-renderizador no est√°n completamente organizadas como en la clasificaci√≥n binaria habitual.  Solo dos par√°metros son importantes, pero esto no es precisi√≥n o integridad. </p><br><p>  Dejar <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>r</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.049ex" height="1.455ex" viewBox="0 -520.7 451.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> r </script>  - n√∫mero total de solicitudes, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> p </script>  - el n√∫mero total de todos los prerenders, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>e</mi><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.253ex" height="1.817ex" viewBox="0 -520.7 970 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-70" x="466" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> ep </script>  - el n√∫mero total de pre-procesadores exitosos, es decir  los que finalmente coinciden con la entrada del usuario  Luego, dos caracter√≠sticas interesantes se calculan de la siguiente manera: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>g</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>s</mi><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mo>+</mo><mi>r</mi><mo>&amp;#x2212;</mo><mi>e</mi><mi>p</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>r</mi></mrow><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="39.764ex" height="2.419ex" viewBox="0 -780.1 17120.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-67" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-61" x="480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-73" x="1010" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-74" x="1479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-6F" x="1841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-73" x="2326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-67" x="2796" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="3276" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-6E" x="3743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="4810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-61" x="5261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-6C" x="5791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="6089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-73" x="6556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-3D" x="7303" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-66" x="8609" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="9160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-61" x="9611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-63" x="10141" y="0"></use><g transform="translate(10574,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-2B" x="725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="1726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-2212" x="2400" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="3400" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-70" x="3867" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="14945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-2212" x="15619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-31" x="16619" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>g</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>s</mi><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mo>+</mo><mi>r</mi><mo>‚àí</mo><mi>e</mi><mi>p</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>r</mi></mrow><mo>‚àí</mo><mn>1</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> gastos generales = \ frac {p + r - ep} {r} - 1 </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>e</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>i</mi><mi>a</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>e</mi><mi>p</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>r</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.036ex" height="2.419ex" viewBox="0 -780.1 9487.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-66" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-69" x="1017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-63" x="1362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-69" x="1796" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="2141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-6E" x="2608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-63" x="3208" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-69" x="3642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-61" x="3987" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-3D" x="4794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-66" x="6101" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="6651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-61" x="7103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-63" x="7632" y="0"></use><g transform="translate(8066,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-70" x="466" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="9036" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>e</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>i</mi><mi>a</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>e</mi><mi>p</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>r</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> eficiencia = \ frac {ep} {r} </script></p><br><p>  Por ejemplo, si se realiza exactamente una presentaci√≥n previa por solicitud, y la mitad de los presentadores son exitosos, la eficiencia de la presentaci√≥n previa ser√° del 50%, y esto significa que fue posible acelerar la carga de la mitad de las solicitudes.  Al mismo tiempo, para aquellas solicitudes en las que la representaci√≥n funcion√≥ correctamente, no se cre√≥ tr√°fico adicional;  para aquellas solicitudes en las que fall√≥ la representaci√≥n previa, se tuvo que establecer una solicitud adicional;  as√≠ que el n√∫mero total de solicitudes es una vez y media mayor que el original, las solicitudes "extra" representan el 50% del n√∫mero original, por lo tanto <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>g</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>s</mi><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo><mn>0.5</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.388ex" height="2.419ex" viewBox="0 -780.1 9639.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-67" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-61" x="480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-73" x="1010" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-74" x="1479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-6F" x="1841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-73" x="2326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-67" x="2796" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="3276" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-6E" x="3743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-72" x="4810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-61" x="5261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-6C" x="5791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-65" x="6089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMATHI-73" x="6556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-3D" x="7303" y="0"></use><g transform="translate(8359,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/455427/&amp;usg=ALkJrhg4N7Nyj7JTk5dY0NPm6FvJWEeBTQ#MJMAIN-35" x="779" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>g</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>s</mi><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo><mn>0.5</mn></math></span></span><script type="math/tex" id="MathJax-Element-6"> gastos generales = 0.5 </script>  . </p><br><p>  En estas coordenadas, dibuj√© el primer diagrama de dispersi√≥n.  Se ve√≠a as√≠: </p><br><p><img src="https://habrastorage.org/webt/7z/vk/z6/7zvkz6wapvyzyd_wv56iyu1u-r4.png"></p><br><p>  Estos valores conten√≠an una buena cantidad de suposiciones, pero al menos ya estaba claro que, muy probablemente, un buen clasificador funcionar√≠a: acelerar la carga para varias decenas de por ciento de las solicitudes, aumentar la carga en varias decenas de por ciento es un cambio interesante. </p><br><p>  Fue interesante ver c√≥mo funciona el clasificador.  De hecho, result√≥ que la duraci√≥n de la solicitud result√≥ ser un factor muy fuerte: si el usuario ya casi ha ingresado la primera pista, y es bastante probable al mismo tiempo, puede realizar una captaci√≥n previa.  Entonces, la predicci√≥n del clasificador aumenta bruscamente hacia el final de la consulta. </p><br><pre><code class="plaintext hljs">margin prefix candidate -180.424   -96.096    -67.425    -198.641    -138.851    -123.803    -109.841    -96.805    -146.568     -135.725     -125.448     -58.615      31.414     -66.754      1.716        </code> </pre> <br><p>  Una entrega previa ser√° √∫til incluso si ocurri√≥ en el momento de ingresar la √∫ltima letra de la solicitud.  El hecho es que los usuarios a√∫n pasan alg√∫n tiempo haciendo clic en el bot√≥n "Buscar" despu√©s de ingresar la solicitud.  Este tiempo tambi√©n se puede guardar. </p><br><h2 id="2-pervoe-vnedrenie">  <strong>2. Primera implementaci√≥n</strong> </h2><br><p>  Despu√©s de un tiempo, fue posible armar un dise√±o completamente funcional: la aplicaci√≥n fue a buscar pistas sobre el demonio del m√°s sajest.  Envi√≥, entre otras cosas, informaci√≥n sobre si precargar la primera pista.  La aplicaci√≥n, despu√©s de recibir la bandera apropiada, descarg√≥ los resultados y, si la entrada del usuario finalmente coincidi√≥ con el candidato, present√≥ los resultados. </p><br><p>  En ese momento, el clasificador adquiri√≥ nuevos factores, y el modelo ya no era una regresi√≥n log√≠stica, sino un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CatBoost</a> .  Inicialmente, implementamos umbrales bastante conservadores para el clasificador, pero incluso nos permitieron cargar instant√°neamente casi el 10% de los resultados de b√∫squeda.  Fue un lanzamiento muy exitoso, porque  logramos cambiar significativamente los cuantiles menores de la velocidad de carga de b√∫squeda, y los usuarios notaron esto y comenzaron a regresar estad√≠sticamente significativamente a la b√∫squeda: una aceleraci√≥n significativa de la b√∫squeda afect√≥ la frecuencia con la que los usuarios realizan sesiones de b√∫squeda. </p><br><h2 id="3-dalneyshie-uluchsheniya">  <strong>3. Mejoras adicionales</strong> </h2><br><p>  Aunque la implementaci√≥n fue exitosa, la soluci√≥n a√∫n era extremadamente imperfecta.  Un estudio cuidadoso de los registros de operaciones mostr√≥ que hay varios problemas. </p><br><ol><li><p>  El clasificador es inestable.  Por ejemplo, puede resultar que por el prefijo Yandex predice la consulta Yandex, por el prefijo Yandex no predice nada, y por el prefijo Yandex nuevamente predice la consulta Yandex.  Luego, nuestra primera implementaci√≥n directa hace dos solicitudes, aunque bien podr√≠a administrarse con una. </p><br></li><li><p>  La representaci√≥n no sabe c√≥mo procesar pistas palabra por palabra.  Al hacer clic en un mensaje palabra por palabra, aparece un espacio adicional en la solicitud.  Por ejemplo, si un usuario ingres√≥ a Yandex, su primer aviso ser√≠a Yandex;  pero si el usuario utiliz√≥ la pista palabra por palabra, la entrada ya ser√° la cadena "Yandex", y el primer mensaje ser√° "tarjetas Yandex".  Esto conducir√° a consecuencias desastrosas: la solicitud Yandex ya descargada ser√° rechazada, en su lugar se cargar√° la solicitud de la tarjeta Yandex.  Despu√©s de eso, el usuario hace clic en el bot√≥n "Buscar" y ... esperar√° la entrega completa de la emisi√≥n a solicitud de Yandex. </p><br></li><li><p>  En algunos casos, los candidatos no tienen posibilidades de tener √©xito.  Una b√∫squeda de coincidencias inexactas funciona en sujest, de modo que un candidato puede, por ejemplo, contener solo una palabra del usuario ingresado;  o el usuario puede hacer un error tipogr√°fico, y luego el primer mensaje nunca coincidir√° exactamente con su entrada. </p><br></li></ol><br><p>  Por supuesto, dejar una reprensi√≥n con tales imperfecciones era una pena, incluso si era √∫til.  Me ofendi√≥ especialmente el problema con las pistas palabra por palabra.  Considero que la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">introducci√≥n de consejos de palabra</a> en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">palabra</a> en la b√∫squeda m√≥vil de Yandex es una de mis mejores implementaciones durante todo el tiempo que trabaj√© en la empresa, ¬°pero aqu√≠ la representaci√≥n no sabe c√≥mo trabajar con ellos!  Verg√ºenza, no de otra manera. </p><br><p>  En primer lugar, solucionamos el problema de la inestabilidad del clasificador.  La soluci√≥n se eligi√≥ de manera muy simple: incluso si el clasificador devolvi√≥ una predicci√≥n negativa, no dejamos de cargar al candidato anterior.  Esto ayuda a guardar solicitudes adicionales, porque cuando el mismo candidato regrese la pr√≥xima vez, no necesitar√° volver a descargar el problema correspondiente.  Al mismo tiempo, esto le permite cargar los resultados m√°s r√°pido, ya que el candidato se descarga en el momento en que el clasificador trabaj√≥ por primera vez para √©l. </p><br><p>  Luego lleg√≥ el turno de las pistas proverbiales.  Un servidor sagest es un demonio sin estado, por lo que es dif√≠cil implementar la l√≥gica asociada con el procesamiento del candidato anterior para el mismo usuario.  Buscar solicitudes simult√°neamente para una solicitud de usuario y para una solicitud de usuario sin un espacio final significa en realidad duplicar el RPS por un demonio m√°s sajest, por lo que tampoco era una buena opci√≥n.  Como resultado, hicimos esto: el cliente pasa en un par√°metro especial el texto del candidato, que se est√° cargando en este momento;  Si este candidato, hasta espacios, es similar a la entrada del usuario, lo regalamos, incluso si el candidato para la entrada actual ha cambiado. </p><br><p>  Despu√©s de este lanzamiento, finalmente se hizo posible ingresar consultas usando mensajes palabra por palabra y disfrutar de la captaci√≥n previa.  Es bastante divertido que antes de este lanzamiento, solo aquellos usuarios que terminaron de ingresar su solicitud usando el teclado, sin un sjest, usaran la captaci√≥n previa. </p><br><p>  Finalmente, resolvimos el tercer problema con la ayuda de ML: factores agregados sobre las fuentes de sugerencias, coincidencia con la entrada del usuario;  Adem√°s, gracias al primer lanzamiento, pudimos recopilar m√°s estad√≠sticas y aprender de los datos mensuales. </p><br><h2 id="4-chto-v-itoge">  <strong>4. ¬øCu√°l es el resultado?</strong> </h2><br><p>  Cada uno de estos lanzamientos gener√≥ un aumento del diez por ciento en las descargas instant√°neas.  La mejor parte es que pudimos mejorar el rendimiento de la reproducci√≥n m√°s de dos veces, pr√°cticamente sin tocar la parte sobre el aprendizaje autom√°tico, sino solo mejorando la f√≠sica del proceso.  Esta es una lecci√≥n importante: a menudo la calidad del clasificador no es el cuello de botella en el producto, pero su mejora es la tarea m√°s interesante y, por lo tanto, el desarrollo se distrae. </p><br><p>  Desafortunadamente, los SERP <em>cargados</em> instant√°neamente no son un √©xito completo;  la salida cargada a√∫n necesita ser <em>renderizada</em> , lo que no ocurre instant√°neamente.  Por lo tanto, todav√≠a tenemos que trabajar para convertir mejor las descargas instant√°neas de datos en representaciones instant√°neas de resultados de b√∫squeda. </p><br><p>  Afortunadamente, las implementaciones implementadas ya nos permiten hablar sobre el pre-renderizador como una caracter√≠stica bastante estable;  Tambi√©n probamos las implementaciones descritas en la cl√°usula 2: todas juntas tambi√©n conducen al hecho de que los propios usuarios comienzan a realizar sesiones de b√∫squeda con m√°s frecuencia.  Esta es otra lecci√≥n √∫til: las mejoras significativas en la velocidad del servicio pueden afectar estad√≠sticamente significativamente su retenci√≥n. </p><br><p>  En el video a continuaci√≥n, puede ver c√≥mo funciona la reproducci√≥n en mi tel√©fono. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/xzFb_sy_ZUc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/455427/">https://habr.com/ru/post/455427/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455411/index.html">Meg√°fono realiz√≥ una actualizaci√≥n t√©cnica ... nombres de red</a></li>
<li><a href="../455413/index.html">Convierta Pocket en un servicio de noticias</a></li>
<li><a href="../455419/index.html">Apple Beta Alive: Trivia no revelada en la presentaci√≥n</a></li>
<li><a href="../455421/index.html">Descomponiendo una UICollectionViewCell</a></li>
<li><a href="../455425/index.html">Creaci√≥n del t√∫nel IPSec GRE entre Mikrotik hEX S y Juniper SRX a trav√©s del m√≥dem USB</a></li>
<li><a href="../455429/index.html">C√≥mo Doom lleg√≥ a Super Nintendo</a></li>
<li><a href="../455439/index.html">El nuevo algoritmo creado por cient√≠ficos le permite crear "cabezas parlantes" casi perfectas con personas reales</a></li>
<li><a href="../455441/index.html">21 de junio, Mosc√∫, Deworkacy - AnalyzeIT MeetUp # 2</a></li>
<li><a href="../455443/index.html">15 consejos para llevar su aplicaci√≥n de suscripci√≥n a la tienda de aplicaciones</a></li>
<li><a href="../455445/index.html">Implementaci√≥n de software Clase D Clase</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>