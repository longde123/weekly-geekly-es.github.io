<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìô ‚óªÔ∏è üö© Como adicionar cheques ao NoVerify sem escrever uma √∫nica linha de c√≥digo Go üßîüèº üç© üíÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Um recurso matador apareceu no analisador est√°tico NoVerify : uma maneira declarativa de descrever inspe√ß√µes que n√£o requerem programa√ß√£o Go e compila...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como adicionar cheques ao NoVerify sem escrever uma √∫nica linha de c√≥digo Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vk/blog/473718/"><p>  Um recurso matador apareceu no analisador est√°tico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NoVerify</a> : uma maneira declarativa de descrever inspe√ß√µes que n√£o requerem programa√ß√£o Go e compila√ß√£o de c√≥digo. </p><br><p>  Para intrig√°-lo, mostrarei uma descri√ß√£o de uma inspe√ß√£o simples, mas √∫til: </p><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> duplicated sub-expressions inside boolean expression */</span></span> $x &amp;&amp; $x;</code> </pre> <br><p>  Essa inspe√ß√£o localiza todas as express√µes l√≥gicas e <code>&amp;&amp;</code> onde os operandos esquerdo e direito s√£o id√™nticos. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NoVerify</a> √© um analisador est√°tico para PHP escrito em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Go</a> .  Voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ler</a> sobre isso no artigo ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NoVerify: Linter for PHP da equipe VKontakte</a> ‚Äù.  E nesta revis√£o, falarei sobre a nova funcionalidade e como chegamos a ela. </p><br><p><img src="https://habrastorage.org/webt/gv/ru/74/gvru74yeqcbjdphiuwj4tieehoq.png"></p><a name="habracut"></a><br><h1 id="predposylki">  Antecedentes </h1><br><p>  Quando, mesmo para uma nova verifica√ß√£o simples, voc√™ precisa escrever algumas dezenas de linhas de c√≥digo no Go, come√ßa a se perguntar: √© poss√≠vel o contr√°rio? </p><br><p>  On Go, escrevemos a infer√™ncia de tipo, todo o pipeline do linter, o cache de metadados e muitos outros elementos importantes sem os quais o NoVerify √© imposs√≠vel.  Esses componentes s√£o √∫nicos, mas tarefas como "proibir a chamada de uma fun√ß√£o X com um conjunto de argumentos Y" n√£o o fazem.  Apenas para tarefas simples, o mecanismo de regras din√¢micas foi adicionado. </p><br><p>  As regras din√¢micas permitem separar componentes internos complexos da solu√ß√£o de problemas t√≠picos.  O arquivo de defini√ß√£o pode ser armazenado e versionado separadamente - ele pode ser editado por pessoas que n√£o est√£o relacionadas ao desenvolvimento do pr√≥prio NoVerify.  Cada regra implementa uma inspe√ß√£o de c√≥digo (que √†s vezes chamaremos de verifica√ß√£o). </p><br><p>  Sim, se tivermos um idioma para descrever essas regras, voc√™ sempre poder√° escrever um modelo semanticamente incorreto ou ignorar algumas restri√ß√µes de tipo - e isso leva a falsos positivos.  No entanto, a corrida de dados ou desreferenciamento do ponteiro <code>nil</code> atrav√©s do idioma das regras n√£o √© inserida. </p><br><h1 id="yazyk-opisaniya-shablonov">  Idioma da descri√ß√£o do modelo </h1><br><p>  A linguagem de descri√ß√£o √© sintaticamente compat√≠vel com PHP.  Isso simplifica seu estudo e tamb√©m permite editar arquivos de regras usando o mesmo PhpStorm. </p><br><p>  No in√≠cio do arquivo de regras, √© recomend√°vel inserir uma diretiva que acalme seu IDE favorito: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** *      , *        PHP-. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@noinspection</span></span></span><span class="hljs-comment"> ALL */</span></span> <span class="hljs-comment"><span class="hljs-comment">// ...  ‚Äî   .</span></span></code> </pre> <br><p>  Minha primeira experi√™ncia com sintaxe e poss√≠veis filtros para modelos foi o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">phpgrep</a> .  Pode ser √∫til por si s√≥, mas dentro do NoVerify se tornou ainda mais interessante, porque agora ele tem acesso ao tipo de informa√ß√£o. </p><br><p>  Alguns de meus colegas j√° tentaram o phpgrep em seus trabalhos, e esse foi outro argumento a favor da escolha dessa <a href="">sintaxe</a> . </p><br><p>  O pr√≥prio phpgrep √© uma adapta√ß√£o do gogrep para PHP (voc√™ tamb√©m pode estar interessado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cgrep</a> ).  Usando este programa, voc√™ pode procurar por c√≥digo atrav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modelos de sintaxe</a> . </p><br><p>  Uma alternativa seria a sintaxe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estrutural de pesquisa e substitui√ß√£o</a> (SSR) do PhpStorm.  As vantagens s√£o √≥bvias - esse √© um formato existente, mas descobri esse recurso depois de implementar o phpgrep.  √â claro que voc√™ pode fornecer uma explica√ß√£o t√©cnica: existe uma sintaxe incompat√≠vel com o PHP e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nosso analisador</a> n√£o a domina, mas esse convincente motivo "real" foi descoberto depois de escrever a bicicleta. </p><br><div class="spoiler">  <b class="spoiler_title">De fato, havia outra op√ß√£o</b> <div class="spoiler_text"><hr><br><p>  Pode ser necess√°rio exibir um modelo com c√≥digo PHP quase um para um - ou seguir o outro caminho: inventar uma nova linguagem, por exemplo, com a sintaxe das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">express√µes S.</a> </p><br><pre> <code class="plaintext hljs">PHP-like Lisp-like ----------------------------- $x = $y | (expr = $x $y) fn($x, 1) | (expr call fn $x 1)          : (or (expr == (type string (expr)) (expr)) (expr == (expr) (type string (expr))))</code> </pre> <br><p>  No final, pensei que a legibilidade dos modelos ainda √© importante, e podemos adicionar filtros atrav√©s dos atributos phpdoc. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">clang-query</a> √© um exemplo de uma id√©ia semelhante, mas usa uma sintaxe mais tradicional. </p><br><hr></div></div><br><h1 id="sozdayom-i-zapuskaem-svoyu-diagnostiku">  Criamos e executamos nossos pr√≥prios diagn√≥sticos! </h1><br><p>  Vamos tentar implementar nossos novos diagn√≥sticos para o analisador. </p><br><p>  Para fazer isso, voc√™ precisa instalar o NoVerify.  Fa√ßa o <a href="">lan√ßamento bin√°rio</a> se voc√™ n√£o tiver uma cadeia de ferramentas Go no sistema (se voc√™ tiver uma, poder√° compilar tudo a partir da fonte). </p><br><div class="scrollable-table"><table><tbody><tr><td>  Se voc√™ n√£o instalar o NoVerify, poder√° continuar a ler mais, mas finja reproduzir as etapas listadas e admirar o resultado! <br></td></tr></tbody></table></div><br><h2 id="postanovka-zadachi">  Declara√ß√£o do problema </h2><br><p>  O PHP tem muitas fun√ß√µes interessantes, uma delas √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">parse_str</a> .  A assinatura dela: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//   encoded_string,     //   URL,      //   (  ,    result). parse_str ( string $encoded_string [, array &amp;$result ] ) : void</span></span></code> </pre> <br><p>  Voc√™ entender√° o que est√° errado aqui se observar este exemplo da documenta√ß√£o: </p><br><pre> <code class="php hljs">$str = <span class="hljs-string"><span class="hljs-string">"first=value&amp;arr[]=foo+bar&amp;arr[]=baz"</span></span>; parse_str($str); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $first; <span class="hljs-comment"><span class="hljs-comment">// value echo $arr[0]; // foo bar echo $arr[1]; // baz</span></span></code> </pre> <br><p>  Mmm, os par√¢metros da string estavam no escopo atual.  Para evitar isso, em nosso novo teste, solicitaremos o uso do segundo par√¢metro da fun√ß√£o, <code>$result</code> , para que o resultado seja gravado nessa matriz. </p><br><h2 id="sozdanie-svoey-diagnostiki">  Crie seu pr√≥prio diagn√≥stico </h2><br><p>  Crie o arquivo <code>myrules.php</code> : </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> parse_str without second argument */</span></span> parse_str($_);</code> </pre> <br><p>  O arquivo de regras em geral √© uma lista de express√µes no n√≠vel superior, cada uma das quais √© interpretada como um modelo phpgrep.  Um coment√°rio especial do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">phpdoc</a> √© esperado para cada modelo.  Somente um atributo √© necess√°rio - uma categoria de erro com um texto de aviso. </p><br><p>  Agora existem quatro n√≠veis no total: <code>error</code> , <code>warning</code> , <code>info</code> e <code>maybe</code> .  Os dois primeiros s√£o cr√≠ticos: o linter retornar√° um c√≥digo diferente de zero ap√≥s a execu√ß√£o se pelo menos uma das regras cr√≠ticas funcionar.  Ap√≥s o pr√≥prio atributo, h√° um texto de aviso que ser√° emitido pelo linter, caso o modelo seja acionado. </p><br><p>  O modelo que escrevemos usa <code>$_</code> - essa √© uma vari√°vel de modelo sem nome.  Poder√≠amos cham√°-lo, por exemplo, <code>$x</code> , mas como n√£o estamos fazendo nada com essa vari√°vel, podemos dar um nome "vazio".  A diferen√ßa entre vari√°veis ‚Äã‚Äãde modelo e vari√°veis ‚Äã‚Äãde PHP √© que a primeira coincide com absolutamente qualquer express√£o, e n√£o apenas com uma vari√°vel "literal".  Isso √© conveniente: geralmente precisamos procurar express√µes desconhecidas, em vez de vari√°veis ‚Äã‚Äãespec√≠ficas. </p><br><h2 id="zapusk-novoy-diagnostiki">  Iniciando um novo diagn√≥stico </h2><br><p>  Crie um pequeno arquivo de teste para depura√ß√£o, <code>test.php</code> : </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span></span>{ parse_str($x); <span class="hljs-comment"><span class="hljs-comment">//      }</span></span></code> </pre> <br><p>  Em seguida, execute o NoVerify com as nossas regras neste arquivo: </p><br><pre> <code class="bash hljs">$ noverify -rules myrules.php test.php</code> </pre> <br><p>  Nosso aviso ser√° mais ou menos assim: </p><br><pre> <code class="plaintext hljs">WARNING myrules.php:4: parse_str without second argument at test.php:4 parse_str($x); ^^^^^^^^^^^^^</code> </pre> <br><p>  O nome da verifica√ß√£o padr√£o √© o nome do arquivo de regras e a linha que define essa verifica√ß√£o.  No nosso caso, este √© <code>myrules.php:4</code> . </p><br><p>  Voc√™ pode definir seu nome usando o atributo <code>@name &lt;name&gt;</code> . </p><br><div class="spoiler">  <b class="spoiler_title">Exemplo @Name</b> <div class="spoiler_text"><hr><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@name</span></span></span><span class="hljs-comment"> parseStrResult * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> parse_str without second argument */</span></span> parse_str($_);</code> </pre> <br><pre> <code class="plaintext hljs">WARNING parseStrResult: parse_str without second argument at test.php:4 parse_str($x); ^^^^^^^^^^^^^</code> </pre> <br><p>  As regras nomeadas sucumbem √†s leis de outros diagn√≥sticos: </p><br><ul><li>  Pode ser desativado atrav√©s de <code>-exclude-checks</code> </li><li>  <code>-critical</code> n√≠vel de <code>-critical</code> pode ser redefinido via <code>-critical</code> </li></ul><br><hr></div></div><br><h1 id="rabota-s-tipami">  Trabalhar com tipos </h1><br><p>  O exemplo anterior √© bom para o hello world - mas geralmente precisamos conhecer os tipos de express√µes para reduzir o n√∫mero de opera√ß√µes de diagn√≥stico </p><br><p>  Por exemplo, para a fun√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">in_array,</a> solicitamos o argumento <code>$strict=true</code> quando o primeiro argumento ( <code>$needle</code> ) √© do tipo string. </p><br><p>  Para isso, temos filtros de resultados. </p><br><p>  Um desses filtros √© <code>@type &lt;type&gt; &lt;var&gt;</code> .  Ele permite descartar tudo o que n√£o se encaixa nos tipos enumerados. </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> 3rd arg of in_array must be true when comparing strings * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@type</span></span></span><span class="hljs-comment"> string $needle */</span></span> in_array($needle, $_);</code> </pre> <br><p>  Aqui, demos o nome do primeiro argumento √† chamada <code>in_array</code> para vincular um filtro de tipo a ele.  Um aviso ser√° emitido apenas quando o tipo de <code>$needle</code> for <code>string</code> . </p><br><p>  Os conjuntos de filtros podem ser combinados com o operador <code>@or</code> : </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** *     -. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> strings must be compared using '===' operator * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@type</span></span></span><span class="hljs-comment"> string $x * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@or</span></span></span><span class="hljs-comment"> * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@type</span></span></span><span class="hljs-comment"> string $y */</span></span> $x == $y;</code> </pre> <br><p>  No exemplo acima, o padr√£o corresponder√° apenas √†s express√µes <code>==</code> , onde qualquer um dos operandos √© do tipo <code>string</code> .  Pode-se supor que sem <code>@or</code> todos os filtros sejam combinados por <code>@and</code> , mas isso n√£o precisa ser indicado explicitamente. </p><br><h1 id="ogranichivaem-oblast-deystviya-diagnostiki">  Limitar o escopo do diagn√≥stico </h1><br><p>  Para cada teste, voc√™ pode especificar <code>@scope &lt;name&gt;</code> : </p><br><ul><li>  <code>@scope all</code> - o valor padr√£o, a valida√ß√£o funciona em qualquer lugar; </li><li>  <code>@scope root</code> - inicie apenas no n√≠vel superior; </li><li>  <code>@scope local</code> - execute apenas dentro de fun√ß√µes e m√©todos. </li></ul><br><p>  Suponha que desejamos relatar <code>return</code> fora do corpo da fun√ß√£o.  No PHP, isso √†s vezes faz sentido - por exemplo, quando um arquivo √© conectado a partir de uma fun√ß√£o ... Mas neste artigo, condenamos isso. </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> don't use return outside of functions * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@scope</span></span></span><span class="hljs-comment"> root */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $_;</code> </pre> <br><p>  Vamos ver como esta regra se comportar√°: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"OK"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"NOT OK"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Gives a warning class C { public function m() { return "ALSO OK"; } }</span></span></code> </pre> <br><p>  Da mesma forma, voc√™ pode fazer uma solicita√ß√£o para usar <code>*_once</code> vez de <code>require</code> e <code>include</code> : </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@maybe</span></span></span><span class="hljs-comment"> prefer require_once over require * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@scope</span></span></span><span class="hljs-comment"> root */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> $_; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@maybe</span></span></span><span class="hljs-comment"> prefer include_once over include * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@scope</span></span></span><span class="hljs-comment"> root */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> $_;</code> </pre> <br><blockquote>  Agora, ao combinar padr√µes, os colchetes n√£o s√£o levados em considera√ß√£o de maneira bastante consistente.  O padr√£o <code>(($x))</code> n√£o encontrar√° ‚Äútodas as express√µes entre colchetes‚Äù, mas simplesmente quaisquer express√µes, ignorando os colchetes.  No entanto, <code>$x+$y*$z</code> e <code>($x+$y)*$z</code> se comportam como deveriam.  Esse recurso vem das dificuldades de trabalhar com tokens <code>(</code> e <code>)</code> , mas h√° uma chance de que o pedido seja restaurado em um dos pr√≥ximos lan√ßamentos. </blockquote><br><h1 id="gruppirovanie-shablonov">  Modelos de agrupamento </h1><br><p>  Quando a duplica√ß√£o dos coment√°rios do phpdoc aparece nos modelos, a capacidade de combinar modelos chega ao resgate. </p><br><p>  Um exemplo simples para demonstrar: </p><br><div class="scrollable-table"><table><tbody><tr><th>  Was </th><th>  Tornou-se (com agrupamento) </th></tr><tr><td><pre> / ** @ talvez n√£o use exit ou morra * /
 morrer ($ _);<font></font>
<font></font>
 / ** @ talvez n√£o use exit ou morra * /
 exit ($ _);
</pre></td><td><pre> / ** @ talvez n√£o use exit ou morra * /
 {
   morrer ($ _);
   exit ($ _);
 }
</pre></td></tr></tbody></table></div><br><p>  Agora imagine como seria desagrad√°vel descrever uma regra no exemplo a seguir sem esse recurso! </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> don't compare arrays with numeric types * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@type</span></span></span><span class="hljs-comment"> array $x * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@type</span></span></span><span class="hljs-comment"> int|float $y * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@or</span></span></span><span class="hljs-comment"> * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@type</span></span></span><span class="hljs-comment"> int|float $x * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@type</span></span></span><span class="hljs-comment"> array $y */</span></span> { $x &gt; $y; $x &lt; $y; $x &gt;= $y; $x &lt;= $y; $x == $y; }</code> </pre> <br><p>  O formato de grava√ß√£o especificado no artigo √© apenas uma das op√ß√µes propostas.  Se voc√™ deseja participar da escolha, tem uma oportunidade: voc√™ precisa colocar +1 nas ofertas que voc√™ mais gosta do que outras.  Para mais detalhes, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">clique aqui</a> . </p><br><h1 id="kak-integrirovany-dinamicheskie-pravila">  Como as regras din√¢micas s√£o integradas </h1><br><p><img src="https://habrastorage.org/webt/1l/hl/x4/1lhlx4vcasmxii4zhwf6fmzlgn8.jpeg"></p><br><p>  No momento do lan√ßamento, o NoVerify tenta localizar o arquivo de regras especificado no argumento de <code>rules</code> . </p><br><p>  Em seguida, esse arquivo √© analisado como um script PHP regular e, a partir do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AST</a> resultante, um conjunto de objetos de regra com modelos phpgrep vinculados a eles √© coletado. </p><br><p>  Em seguida, o analisador inicia o trabalho de acordo com o esquema usual - a √∫nica diferen√ßa √© que, para algumas se√ß√µes verificadas do c√≥digo, ele inicia um conjunto de regras vinculadas.  Se a regra for acionada, um aviso ser√° exibido. </p><br><p>  Considera-se sucesso a combina√ß√£o do modelo phpgrep e a passagem de pelo menos um dos conjuntos de filtros (eles s√£o separados por <code>@or</code> ). </p><br><p>  Nesse est√°gio, o mecanismo de regras n√£o diminui significativamente a opera√ß√£o do linter, mesmo se houver muitas regras din√¢micas. </p><br><h2 id="algoritm-matchinga">  Algoritmo de Correspond√™ncia </h2><br><p>  Com a abordagem ing√™nua, para cada n√≥ AST, precisamos aplicar todas as regras din√¢micas.  Esta √© uma implementa√ß√£o muito ineficiente, porque a maior parte do trabalho ser√° realizada em v√£o: muitos modelos t√™m um prefixo espec√≠fico pelo qual podemos agrupar as regras. </p><br><p>  Isso √© semelhante √† id√©ia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">correspond√™ncia paralela</a> , mas, em vez de construir honestamente a NFA, apenas ‚Äúparalelizamos‚Äù a primeira etapa dos c√°lculos. </p><br><p>  Considere isso com um exemplo com tr√™s regras: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> duplicated then/else parts of ternary */</span></span> $_ ? $x : $x; <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> don't call explode with delim="" */</span></span> explode(<span class="hljs-string"><span class="hljs-string">""</span></span>, ${<span class="hljs-string"><span class="hljs-string">"*"</span></span>}); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@maybe</span></span></span><span class="hljs-comment"> suspicious empty body of the if statement */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($_);</code> </pre> <br><p>  Se temos N elementos e regras M, com uma abordagem ing√™nua, temos opera√ß√µes N * M para executar.  Em teoria, essa complexidade pode ser reduzida para linear e obter <code>O(N)</code> - se voc√™ combinar todos os padr√µes em um e executar a correspond√™ncia como ocorre, por exemplo, o pacote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">regexp</a> do Go. </p><br><p>  No entanto, na pr√°tica, at√© agora, concentrei-me na implementa√ß√£o parcial dessa abordagem.  Isso permitir√° que as regras do arquivo acima sejam divididas em tr√™s categorias e para os elementos AST aos quais nenhuma regra corresponde, para atribuir uma quarta categoria vazia.  Por esse motivo, n√£o √© executada mais de uma regra para cada elemento. </p><br><p>  Se tivermos milhares de regras e sentiremos uma desacelera√ß√£o significativa, o algoritmo ser√° finalizado.  Enquanto isso, a simplicidade da solu√ß√£o e a acelera√ß√£o resultante me agradam. </p><br><h2 id="muki-vybora-ili-nemnogo-o-forme-zapisi-type">  O tormento da escolha, ou Um pouco sobre o formul√°rio de <code>@type</code> </h2><br><div class="scrollable-table"><table><tbody><tr><td>  Tarefa: selecionar boa sintaxe para filtros nas anota√ß√µes do phpdoc. <br></td></tr></tbody></table></div><br><p>  A sintaxe atual duplica <code>@var</code> e <code>@var</code> , mas podemos precisar de novos operadores, por exemplo, "o tipo n√£o √© igual".  Imagine como pode parecer. </p><br><p>  Temos pelo menos duas prioridades importantes: </p><br><ol><li>  A sintaxe leg√≠vel e concisa das anota√ß√µes. </li><li>  O suporte mais alto poss√≠vel do IDE sem esfor√ßo extra. </li></ol><br><p>  Para o PhpStorm, existe um plug <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">-</a> in de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anota√ß√µes php</a> que adiciona preenchimento autom√°tico, transi√ß√£o para classes de anota√ß√£o e outras utilidades para trabalhar com coment√°rios do phpdoc. </p><br><p>  Prioridade (2) na pr√°tica significa que voc√™ toma decis√µes que n√£o contradizem as expectativas do IDE e dos plugins.  Por exemplo, voc√™ pode fazer anota√ß√µes em um formato que o plugin php-annotations possa reconhecer: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Type is a filter that checks that $value * satisfies the given type constraints. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@Annotation</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Filter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** Variable name that is being filtered */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $value; <span class="hljs-comment"><span class="hljs-comment">/** Check that value type is equal to $type */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $type; <span class="hljs-comment"><span class="hljs-comment">/** Check that value text is equal to $text */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $text; }</code> </pre> <br><p>  Em seguida, aplicar um filtro aos tipos seria algo como isto: </p><br><pre> <code class="plaintext hljs">@Type($needle, eq=string) @Type($x, not_eq=Foo)</code> </pre> <br><p>  Os usu√°rios podem ir para a defini√ß√£o de <code>Filter</code> , eles receber√£o uma lista de poss√≠veis par√¢metros (tipo / texto / etc). </p><br><p>  M√©todos de grava√ß√£o alternativos, alguns dos quais foram sugeridos pelos colegas: </p><br><pre> <code class="plaintext hljs">@type string $needle @type !Foo $x @type $needle == string @type $x != Foo @type(==) string $needle @type(!=) Foo $x @type($needle) == string @type($x) != Foo @filter type($needle) == string @filter type($x) != Foo</code> </pre> <br><p>  Ent√£o nos distra√≠mos um pouco e esquecemos que estava tudo dentro do phpdoc, e isso apareceu: </p><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">eq</span></span> string (<span class="hljs-name"><span class="hljs-name">typeof</span></span> $needle)) (<span class="hljs-name"><span class="hljs-name">neq</span></span> Foo (<span class="hljs-name"><span class="hljs-name">typeof</span></span> $x))</code> </pre> <br><p>  Embora a op√ß√£o com a grava√ß√£o do postfix por divers√£o tamb√©m tenha sido tocada.  Uma linguagem para descrever restri√ß√µes de tipo e valor pode ser chamada de sexta: </p><br><pre> <code class="plaintext hljs">@eval string $needle typeof = @eval Foo $x typeof &lt;&gt;</code> </pre> <br><p>  A busca pela melhor op√ß√£o ainda n√£o est√° conclu√≠da ... </p><br><h1 id="sravnenie-rasshiryaemosti-s-phan">  Compara√ß√£o de extensibilidade com Phan </h1><br><p>  Como uma das vantagens do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Phan</a> , o artigo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">An√°lise est√°tica do c√≥digo PHP usando o exemplo do PHPStan, Phan e Salmo</a> " indica extensibilidade. </p><br><p>  Aqui est√° o que foi implementado no plug-in de amostra: </p><br><blockquote>  Quer√≠amos avaliar como nosso c√≥digo est√° pronto para o PHP 7.3 (em particular, para descobrir se ele tem constantes que n√£o diferenciam mai√∫sculas de min√∫sculas).  Est√°vamos quase certos de que n√£o existiam essas constantes, mas tudo poderia acontecer em 12 anos - deveria ser verificado.  E n√≥s escrevemos um plugin para o Phan que juraria se o terceiro par√¢metro fosse usado em define (). </blockquote><p>  √â assim que o c√≥digo do plugin se parece (a formata√ß√£o √© otimizada para largura): </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Phan</span></span>\<span class="hljs-title"><span class="hljs-title">AST</span></span>\<span class="hljs-title"><span class="hljs-title">ContextNode</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Phan</span></span>\<span class="hljs-title"><span class="hljs-title">CodeBase</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Phan</span></span>\<span class="hljs-title"><span class="hljs-title">Language</span></span>\<span class="hljs-title"><span class="hljs-title">Context</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Phan</span></span>\<span class="hljs-title"><span class="hljs-title">Language</span></span>\<span class="hljs-title"><span class="hljs-title">Element</span></span>\<span class="hljs-title"><span class="hljs-title">Func</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Phan</span></span>\<span class="hljs-title"><span class="hljs-title">PluginV2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Phan</span></span>\<span class="hljs-title"><span class="hljs-title">PluginV2</span></span>\<span class="hljs-title"><span class="hljs-title">AnalyzeFunctionCallCapability</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">ast</span></span>\<span class="hljs-title"><span class="hljs-title">Node</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefineThirdParamTrue</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PluginV2</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnalyzeFunctionCallCapability</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAnalyzeFunctionCallClosures</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CodeBase $code_base)</span></span></span><span class="hljs-function"> </span></span>{ $def = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CodeBase $cb, Context $ctx, Func $fn, $args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count($args) &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;emitIssue( $cb, $ctx, <span class="hljs-string"><span class="hljs-string">'PhanDefineCaseInsensitiv'</span></span>, <span class="hljs-string"><span class="hljs-string">'define with 3 arguments'</span></span>, [] ); }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'define'</span></span> =&gt; $def]; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefineThirdParamTrue();</code> </pre> <br><p>  E aqui est√° como isso pode ser feito no NoVerify: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@warning</span></span></span><span class="hljs-comment"> define with 3 arguments */</span></span> define($_, $_, $_);</code> </pre> <br><p>  Quer√≠amos alcan√ßar aproximadamente o mesmo resultado - para que coisas triviais pudessem ser feitas da maneira mais simples poss√≠vel. </p><br><h1 id="zaklyuchenie">  Conclus√£o </h1><br><ul><li>  Experimente o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NoVerify</a> no seu projeto. </li><li>  Se voc√™ tiver alguma id√©ia para melhorias ou relat√≥rios de erros, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conte-nos</a> . </li><li>  Se voc√™ quiser participar do desenvolvimento, seja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bem-vindo</a> ! </li></ul><br><h1 id="ssylki-poleznye-materialy">  Links, materiais √∫teis </h1><br><p>  Links importantes s√£o coletados aqui, alguns dos quais j√° podem ter sido mencionados no artigo, mas para maior clareza e conveni√™ncia, eu os coletei em um s√≥ lugar. </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O artigo sobre NoVerify no Habr√©</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O artigo sobre phpgrep em Habr√©</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Phpgrep conversa v√≠deo com noites de TI</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gogrep</a> - Busca de c√≥digo por padr√µes de sintaxe </li><li>  Conceito de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seletores do</a> ESLint <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AST</a> semelhante aos modelos de sintaxe </li></ul><br><p>  Se voc√™ precisar de mais exemplos de regras que podem ser implementadas, d√™ uma olhada nos <a href="">testes do NoVerify</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473718/">https://habr.com/ru/post/pt473718/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473706/index.html">Zoia: CMS reativo leve para desenvolvimento r√°pido de sites</a></li>
<li><a href="../pt473708/index.html">Carro el√©trico caseiro - nem tudo √© o que voc√™ pensa</a></li>
<li><a href="../pt473710/index.html">Os princ√≠pios de documenta√ß√£o e localiza√ß√£o ou como obter uma boa localiza√ß√£o a um custo m√≠nimo</a></li>
<li><a href="../pt473714/index.html">Como cheguei √† especifica√ß√£o formal de um processador RISC-V em F #</a></li>
<li><a href="../pt473716/index.html">Widgets acionados por mouse. Arraste e solte dentro da janela</a></li>
<li><a href="../pt473720/index.html">Duas maneiras de fazer testes de unidade confi√°veis</a></li>
<li><a href="../pt473722/index.html">Isolamento remoto, ansiedade e depress√£o</a></li>
<li><a href="../pt473726/index.html">N√£o basta saber o que s√£o Mutex, Sem√°foro e Async / Wait. Voc√™ precisa saber tudo, desde quanta</a></li>
<li><a href="../pt473728/index.html">Implementa√ß√£o t√≠pica de monitoramento. Nikolay Sivko</a></li>
<li><a href="../pt473732/index.html">O hist√≥rico de fraudes na constru√ß√£o de uma rede a cabo no √Årtico por US $ 1 bilh√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>