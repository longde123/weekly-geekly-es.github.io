<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤔 👨‍✈️ 👩🏾‍🤝‍👨🏼 Statistik und Überwachung von PHP-Skripten in Echtzeit. ClickHouse und Grafana helfen Pinba ↪️ 👨🏿‍🎓 👩🏻‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel zeige ich Ihnen, wie Sie Pinba mit Clickhouse und Grafana anstelle von Pinba_engine und Pinnwand verwenden. 

 Bei einem PHBA-Projek...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Statistik und Überwachung von PHP-Skripten in Echtzeit. ClickHouse und Grafana helfen Pinba</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444610/"> In diesem Artikel zeige ich Ihnen, wie Sie Pinba mit Clickhouse und Grafana anstelle von Pinba_engine und Pinnwand verwenden. <br><br>  Bei einem PHBA-Projekt ist Pinba wahrscheinlich der einzige zuverlässige Weg, um zu verstehen, was mit der Leistung geschieht.  Richtig, Pinba wird normalerweise nur implementiert, wenn bereits Probleme beobachtet wurden und nicht klar ist, wo man graben soll. <br><br>  Oft hat niemand eine Ahnung, wie oft pro Sekunde / Minute ein bestimmtes Skript aufgerufen wird, und beginnt, „durch Berühren“ zu optimieren, beginnend an den Stellen, die logischer erscheinen. <br><br>  Jemand analysiert Nginx-Protokolle und jemand hat langsame Abfragen in der Datenbank. <br><br>  Natürlich wäre Pinba nicht überflüssig, aber es gibt mehrere Gründe, warum es nicht bei jedem Projekt so ist. <br><br> <a href=""><img src="https://habrastorage.org/webt/br/zm/qz/brzmqzc8itwc2lt3gjp0q2p-kse.png"></a> <br><a name="habracut"></a><br>  Und der erste Grund ist die Installation. <br><br>  Um mehr oder weniger eine Art „Auspuff“ aus der Einführung von Pinba zu ziehen, ist es sehr wünschenswert, Metriken nicht nur in den letzten Minuten, sondern auch über einen langen Zeitraum (von Tagen bis Monaten) zu sehen. <br><br>  Dazu benötigen Sie: <br><br><ul><li>  Installiere die Erweiterung für PHP (und vielleicht möchtest du ein Modul für Nginx) </li><li>  Kompilierungserweiterung für MySQL </li><li>  Installieren Sie die Pinnwand und konfigurieren Sie cron </li></ul><br>  Aufgrund der geringen Menge an Informationen über Pinba haben viele den Eindruck, dass es nur auf PHP5 funktioniert hat und schon lange in der Vergangenheit war, aber wie wir später sehen werden, ist dies nicht der Fall. <br><br>  Der erste Schritt ist der einfachste. Sie müssen lediglich den folgenden Befehl ausführen: <br><br><pre><code class="bash hljs">apt install php-pinba</code> </pre> <br>  In den Repositories ist diese Erweiterung bis zu PHP 7.3 einschließlich und Sie müssen nichts kompilieren. <br><br>  Nach dem Ausführen des Installationsbefehls erhalten wir sofort eine bereits funktionierende Erweiterung, die die Metriken jedes Skripts (Dauer, Speicher usw.) im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Protobuf-</a> Format von udp an 127.0.0.1 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">{0002</a> sammelt und sendet. <br><br>  Bisher hat noch niemand diese udp-Pakete abgefangen oder verarbeitet, aber dies hat keinen Einfluss auf die Geschwindigkeit oder Stabilität Ihrer PHP-Skripte. <br><br>  Bis vor kurzem war nur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pinba_engine</a> die einzige Anwendung, die diese udp-Pakete abfangen und verarbeiten konnte.  Die Beschreibung der " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einfachen und prägnanten</a> " Installation entmutigt den Wunsch, sie jemals wieder zu lesen und zu vertiefen.  In kilometerlangen Abhängigkeitslisten gibt es sowohl Paketnamen als auch Programmnamen und Links zu einzelnen Seiten mit ihrer Installation, und diese haben ihre eigenen Links zu anderen Abhängigkeiten.  Um mit diesem Mist fertig zu werden, hat niemand weder die Zeit noch den Wunsch. <br><br>  Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pinba2-</a> Installationsprozess <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ist</a> nicht <a href="">viel einfacher geworden</a> . <br><br>  Vielleicht kann pinba10 eines Tages mit ein oder zwei Befehlen installiert werden und nicht eine Menge Material lesen, um zu verstehen, wie es geht, aber bisher ist dies nicht so. <br><br>  Wenn Sie pinba_engine noch installiert haben, ist dies nur die halbe Miete.  Schließlich müssen Sie sich ohne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pinnwand</a> nur in den letzten Minuten auf Daten beschränken oder Ihre Daten selbst aggregieren, speichern und visualisieren.  Es ist gut, dass die Pinnwand recht einfach zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">installieren ist</a> . <br><br>  Es scheint, warum solch ein Leid, wenn alle Metriken von PHP bereits im Protobuf-Format an den UDP-Port gehen und alles, was benötigt wird, ist, eine Anwendung zu schreiben, die sie abfängt und in einer Art Speicher speichert?  Anscheinend haben sich die Entwickler, die auf diese Idee gekommen sind, sofort hingesetzt, um ihre eigenen Fahrräder zu schreiben, von denen einige auf den Github fielen. <br><br>  Das Folgende ist eine Übersicht über vier Open-Source-Projekte, in denen Metriken gespeichert sind, aus denen diese Daten leicht abgerufen und visualisiert werden können, beispielsweise mit grafana. <br><br><h4>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">olegfedoseev / pinba-server</a> (november 2017) </h4><br>  udp server on go, der Metriken in OpenTSDB speichert.  Wenn Sie OpenTSDB bereits für das Projekt verwenden, passt eine solche Lösung möglicherweise zu Ihnen. Andernfalls empfehle ich, vorbeizukommen. <br><br><h4>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Olegfedoseev / pinba-influxdb</a> (Juni 2018) </h4><br>  udp server on go, vom selben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habrayuzer,</a> der diesmal metriken in influxDB speichert.  In vielen Projekten wird InfluxDB bereits zur Überwachung verwendet, daher kann diese Lösung für sie großartig sein. <br><br>  Vorteile: <br><br><ul><li>  Mit InfluxDB <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">können</a> Sie die empfangenen Metriken aggregieren und das Original nach einer bestimmten Zeit löschen. </li></ul><br>  Nachteile: <br><br><ul><li>  Diese Lösung speichert keine Timerinformationen. </li><li>  InfluxDB speichert die Seitenadressen als Tags. Wenn Sie viele eindeutige Seitenadressen haben, führt dies zu einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erhöhten</a> Speicherverbrauch.  Ab einem bestimmten Moment wird er " <a href="">anfangen, Erinnerungen zu essen, als ob er nicht in sich selbst wäre</a> ".  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> ) </li></ul><br><h4>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ClickHouse-Ninja / Proton</a> (Januar 2019) </h4><br>  udp server on go speichert Metriken in ClickHouse.  Dies ist die Entscheidung meines Freundes.  Nachdem ich ihn kennengelernt hatte, entschied ich, dass es Zeit war, Pinbu und Clickhouse zu übernehmen. <br><br>  Vorteile: <br><br><ul><li>  Das Clickhouse ist ideal für solche Aufgaben. Es ermöglicht Ihnen, Daten so stark zu komprimieren, dass Sie alle Rohdaten auch ohne Aggregationen speichern können </li><li>  Bei Bedarf können Sie die resultierenden Metriken einfach aggregieren </li><li>  fertige Vorlage für Grafana </li><li>  speichert Timer-Informationen </li></ul><br>  Nachteile: <br><br><ul><li>  <s><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tödlicher Fehler</a></s> </li><li>  Es gibt keine Konfiguration, in der der Name der Datenbank und der Tabellen, die Adresse und der Port des Servers konfiguriert werden könnten. </li><li>  Beim Speichern von Rohdaten wird eine Hilfswörterbuchtabelle zum Speichern von Seiten- und Domänenadressen verwendet, wodurch Abfragen kompliziert werden </li><li>  andere kleine Dinge, die aus dem ersten Minus fließen </li></ul><br><h4>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pinba-Server / Pinba-Server</a> (April 2019) </h4><br>  UDP-Server in PHP, der Metriken in ClickHouse speichert.  Dies ist meine Lösung, die sich aus meiner Bekanntschaft mit Pinba, ClickHouse und Protobuf ergibt.  Während ich mich mit diesem ganzen Haufen beschäftigte, schrieb ich einen „Proof of Concept“, der für mich unerwartet keine nennenswerten Ressourcen verbrauchte (30 MB RAM und weniger als 1% eines der acht Prozessorkerne), und beschloss, ihn der Öffentlichkeit zugänglich zu machen. <br><br>  Die Vorteile sind die gleichen wie in der vorherigen Lösung. Ich habe auch die üblichen Namen aus der ursprünglichen pinba_engine verwendet.  Ich habe auch eine Konfiguration hinzugefügt, mit der Sie mehrere Pinbaserver-Instanzen gleichzeitig ausführen können, um Metriken in verschiedenen Tabellen zu speichern. Dies ist nützlich, wenn Sie Daten nicht nur von PHP, sondern auch von Nginx erfassen möchten. <br>  Nachteile - ein "schwerwiegender Fehler" und die kleinen Dinge, mit denen Sie sich persönlich nicht wohl fühlen, aber meine Lösung ist "so einfach wie Hausschuhe" und besteht aus nur etwa 100 Codezeilen, sodass jeder PHP-Entwickler in wenigen Minuten ändern kann, was ihm nicht gefällt. <br><br>  <b>Arbeitsprinzip</b> <br><br>  Der udp-Port 30002 wird abgehört. Alle eingehenden Pakete werden gemäß dem Protobuf-Schema decodiert und aggregiert.  Einmal pro Minute wird das Paket in das Clickhouse in der Tabelle pinba.requests eingefügt.  (Alle Parameter werden in der Konfiguration konfiguriert) <br><br>  <b>Ein bisschen über Clickhouse</b> <br><br>  Clickhouse unterstützt verschiedene Speicher-Engines.  Am häufigsten wird MergeTree verwendet. <br><br>  Wenn Sie sich irgendwann dazu entschließen, aggregierte Daten für die gesamte Zeit und Rohdaten nur für die letzte Zeit zu speichern, können Sie eine materialisierte Ansicht mit einer Gruppierung erstellen und die Haupttabelle pinba.requests regelmäßig bereinigen, während alle Daten in der materialisierten Ansicht verbleiben.  Darüber hinaus können Sie beim Erstellen der Tabelle pinba.requests "engine = Null" angeben. Die Rohdaten werden dann überhaupt nicht auf der Festplatte gespeichert und gleichzeitig in die materialisierte Ansicht übertragen und aggregiert gespeichert.  Ich benutze dieses Schema für Nginx-Metriken, weil ich auf Nginx 50-mal mehr Anfragen habe als auf PHP. <br><br>  Sie haben also einen langen Weg zurückgelegt, und ich möchte Sie nicht auf halbem Weg verlassen. Dann finden Sie eine detaillierte Beschreibung der Installation und Konfiguration meiner Lösung und alles, was Sie benötigen, sowie Fallstricke, gegen die mehr als ein Schiff gekracht ist.  Der gesamte Installationsprozess wird für Ubuntu 18.04 LTS und Centos 7 beschrieben. Bei anderen Distributionen und Versionen kann der Prozess geringfügig variieren. <br><br><h4>  Installation </h4><br>  Ich habe alle notwendigen Befehle in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Docker-Datei ausgeführt</a> , um die Reproduzierbarkeit von Anweisungen zu erleichtern.  Im Folgenden werden nur Fallstricke beschrieben. <br><br>  <b>PHP Pinba</b> <br><br>  Stellen Sie nach der Installation sicher, dass in der Datei /etc/php/7.2/fpm/conf.d/20-pinba.ini alle Optionen nicht kommentiert sind.  In einigen Distributionen (z. B. Centos) können sie auskommentiert werden. <br><br><pre> <code class="plaintext hljs">extension=pinba.so pinba.enabled=1 pinba.server=127.0.0.1:30002</code> </pre> <br>  <b>Clickhouse</b> <br><br>  Während der Installation werden Sie von clickhouse aufgefordert, ein Kennwort für den Standardbenutzer festzulegen.  Standardmäßig ist dieser Benutzer für alle IP-Adressen verfügbar. Wenn Sie also keine Firewall auf dem Server haben, müssen Sie ein Kennwort dafür festlegen.  Dies kann auch nach der Installation in der Datei /etc/clickhouse-server/users.xml erfolgen. <br><br>  Es ist auch erwähnenswert, dass Clickhouse mehrere Ports verwendet, einschließlich 9000. Dieser Port wird in einigen Distributionen (z. B. Centos) auch für PHP-Fpm verwendet.  Wenn Sie diesen Port bereits verwendet haben, können Sie ihn in der Datei /etc/clickhouse-server/config.xml in einen anderen ändern. <br><br>  <b>grafana mit clickhouse plugin</b> <br><br>  Verwenden Sie nach der Installation von grafana den Administrator-Benutzernamen und das Administratorkennwort.  Beim ersten Eingang werden Sie vom Graphan aufgefordert, ein neues Passwort festzulegen. <br><br>  Gehen Sie als Nächstes zum Menü "+" -&gt; Importieren und geben Sie die Dashboard-Nummer für den Import <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">10011 an</a> .  Ich habe dieses Dashboard vorbereitet und ausgefüllt, damit Sie es nicht noch einmal selbst tun müssen. <br><br>  Die grafana unterstützt die Arbeit mit dem Clickhouse über ein Plug-In eines Drittanbieters. Bei Plug-Ins von Drittanbietern funktioniert grafana jedoch nicht für Warnungen (ein Ticket dafür gibt es seit mehreren Jahren). <br><br>  <b>Pinba Server</b> <br><br>  Die Installation von protobuf und libevent ist optional, verbessert jedoch die Leistung des Pinba-Servers.  Wenn Sie pinba-server in einem anderen Ordner als / opt installieren, müssen Sie auch die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">systemd-Skriptdatei</a> reparieren. <br><br>  <b>Pinba-Modul unter Nginx</b> <br><br>  Zum Kompilieren des Moduls benötigen Sie die Quellen derselben Version von nginx, die bereits auf Ihrem Server installiert ist, sowie dieselben Kompilierungsoptionen. Andernfalls ist die Assembly erfolgreich. Wenn das Modul verbunden ist, wird jedoch ein Fehler generiert, dass das Modul binär inkompatibel ist.  Kompilierungsoptionen können mit dem Befehl nginx -V angezeigt werden <br><br>  <b>Leben hackt</b> <br><br>  Alle meine Websites funktionieren nur unter https.  Das Schema-Feld wird bedeutungslos, daher verwende ich es, um das Web / die Konsole zu trennen. <br><br>  In Skripten, auf die über das Internet zugegriffen werden kann, verwende ich: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ini_get(<span class="hljs-string"><span class="hljs-string">'pinba.enabled'</span></span>)) { pinba_schema_set(<span class="hljs-string"><span class="hljs-string">'web'</span></span>); }</code> </pre><br>  Und in der Konsole (zum Beispiel Kronenskripte): <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ini_get(<span class="hljs-string"><span class="hljs-string">'pinba.enabled'</span></span>)) { pinba_schema_set(<span class="hljs-string"><span class="hljs-string">'console'</span></span>); }</code> </pre> <br>  In meinem Dashboard in Graphan gibt es einen Web- / Konsolenschalter zum separaten Anzeigen von Statistiken. <br><br>  Sie können Ihre Tags auch auf Pinbu übertragen, zum Beispiel: <br><br><pre> <code class="php hljs">pinba_tag_set(<span class="hljs-string"><span class="hljs-string">'country'</span></span>, $countryCode);</code> </pre> <br>  <b>Das ist alles</b> <br><br>  Eine große Bitte, die Umfragen unter dem Artikel zu beantworten. <br><br>  Traditionell warne ich, dass ich nicht berate und nicht durch persönliche Nachrichten von Habr und sozialen Netzwerken helfe. <br><br>  Starten Sie ein Ticket auf Github. <br><br>  Bitte unterstützen Sie auch die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">englische Version</a> dieses Artikels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf reddit mit Likes</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de444610/">https://habr.com/ru/post/de444610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de444594/index.html">Big o</a></li>
<li><a href="../de444596/index.html">Jodid: Mozilla Interactive Science Editor</a></li>
<li><a href="../de444598/index.html">Die CD ist 40 Jahre alt und er ist tot (oder?)</a></li>
<li><a href="../de444600/index.html">Rückblick auf 14 kopflose cm 2019</a></li>
<li><a href="../de444602/index.html">Kapselung in C ++ und C.</a></li>
<li><a href="../de444612/index.html">Makroschaden für C ++ - Code</a></li>
<li><a href="../de444614/index.html">Die ganze Geschichte von Linux. Teil II: Unternehmen Höhen und Tiefen</a></li>
<li><a href="../de444616/index.html">Erstellen Sie Ihren eigenen Android Voice Recorder mit Kotlin</a></li>
<li><a href="../de444620/index.html">Verwenden von Linux-Kernel-Sequenzdateien</a></li>
<li><a href="../de444622/index.html">R tidyr-Paket und seine neuen Funktionen pivot_longer und pivot_wider</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>