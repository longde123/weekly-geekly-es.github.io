<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂🏿 🗄️ 🎽 Google Style Guide en C ++. Partie 9 🌭 😞 😏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Partie 1. Introduction 
 ... 
 Partie 8. Dénomination 
 Partie 9. Commentaires 
 ... 


 Cet article est une traduction d'une partie du guide de style...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Google Style Guide en C ++. Partie 9</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480424/">  <a href="https://habr.com/ru/post/480422/">Partie 1. Introduction</a> <br>  ... <br>  <a href="https://habr.com/ru/post/477722/">Partie 8. Dénomination</a> <br>  <b>Partie 9. Commentaires</b> <br>  ... <br><img src="https://habrastorage.org/webt/xw/iw/gv/xwiwgvrv9mtijocibex24w3tgu8.jpeg"><br><br>  Cet article est une traduction d'une partie du guide de style Google en C ++ en russe. <br>  <a href="https://github.com/evgenykislov/styleguide/blob/gh-pages/cppguide.html">Article original</a> (fork sur github), <a href="https://evgenykislov.com/wp-content/custom/cpp_codestyle/cppguide_ru.html">traduction mise à jour</a> . <br><a name="habracut"></a><br><h2>  Commentaires </h2><br>  Des commentaires sont requis pour le code (si vous prévoyez de le lire).  Les règles suivantes décrivent ce que vous devez commenter et comment.  Mais rappelez-vous: bien que les commentaires soient très importants, le code parfait est auto-documenté.  L'utilisation de noms "parlants" pour les types et les variables est bien meilleure que les noms obscurs, qui doivent ensuite être écrits dans les commentaires. <br><br>  Commentez le code en tenant compte de ses lecteurs suivants: des programmeurs qui ont besoin de comprendre votre code.  Gardez à l'esprit que vous pouvez être le prochain lecteur! <br><br><h3>  Style de commentaire </h3><br>  Utilisez <b>//</b> ou <b>/ * * /</b> jusqu'à ce que l'uniformité soit violée. <br><br>  Vous pouvez utiliser <b>//</b> ou <b>/ ** /</b> , cependant <b>// est de</b> <em>loin</em> préférable.  Cependant, alignez toujours votre style de commentaire sur le code existant. <br><br><h3>  Commentaires dans l'en-tête du fichier </h3><br>  Insérez un en-tête de licence en haut de chaque fichier. <br><br>  Les commentaires dans le fichier doivent décrire son contenu.  Si un fichier déclare, décrit ou teste une abstraction (pour laquelle il existe déjà un commentaire), une description supplémentaire dans l'en-tête du fichier n'est pas nécessaire.  Sinon, insérez une description du contenu en haut du fichier. <br><br><h4>  Informations légales et liste des auteurs </h4><br>  Chaque fichier doit contenir des informations de licence.  Le format de la description dépend de la licence utilisée dans le projet.  Chaque licence (Apache 2.0, BSD, LGPL, GPL, etc.) peut avoir ses propres exigences de conception. <br><br>  Si vous apportez des modifications importantes au fichier, pensez à supprimer la liste précédente des auteurs.  Les fichiers mis à jour ne peuvent plus contenir de mention du droit d'auteur et une liste d'auteurs. <br><br><h4>  Contenu du fichier </h4><br>  Si <b>.h</b> déclare plusieurs abstractions, le commentaire dans l'en-tête du fichier doit généralement décrire le contenu du fichier et comment les abstractions sont liées les unes aux autres.  Une, deux phrases dans un commentaire suffisent généralement.  Des informations plus détaillées sont signées ailleurs (pas dans l'en-tête du fichier). <br><br>  Ne dupliquez pas les commentaires dans les fichiers <b>.h</b> et <b>.cc</b> - les commentaires deviennent différents au fil du temps. <br><br><h3>  Commentaires de classe </h3><br>  Chaque déclaration de classe (à l'exception des déclarations très évidentes) doit être accompagnée d'un commentaire, à quoi sert la classe et comment l'utiliser. <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   GargantuanTable. // : // GargantuanTableIterator* iter = table-&gt;NewIterator(); // for (iter-&gt;Seek("foo"); !iter-&gt;done(); iter-&gt;Next()) { // process(iter-&gt;key(), iter-&gt;value()); // } // delete iter; class GargantuanTableIterator { ... };</span></span></code> </pre> <br>  Le commentaire sur la classe doit être suffisant pour comprendre: comment et quand utiliser la classe, des exigences supplémentaires pour une utilisation correcte de la classe.  Décrivez, si nécessaire, les restrictions (hypothèses) sur la synchronisation dans la classe.  Si une instance de la classe peut être utilisée à partir de différents threads, assurez-vous de noter les règles multi-thread. <br><br>  Vous pouvez également fournir de courts exemples de code dans le commentaire de la classe pour montrer à quel point il est plus facile d'utiliser la classe. <br><br>  En règle générale, une classe est déclarée / définie dans différents fichiers ( <b>.h</b> et <b>.cc</b> ).  Les commentaires décrivant l'utilisation de la classe doivent être à côté de la définition de l'interface.  Les commentaires sur les subtilités de l'implémentation doivent être proches du code des méthodes elles-mêmes. <br><br><h3>  Commentaires sur la fonction </h3><br>  Les commentaires sur une déclaration de fonction doivent décrire l'utilisation de la fonction (sauf dans les cas les plus évidents).  Les commentaires sur la définition de la fonction décrivent l'implémentation. <br><br><h4>  Déclaration de fonction </h4><br>  La déclaration de chaque fonction doit avoir un commentaire (juste avant la déclaration), ce que fait la fonction et comment l'utiliser.  Un commentaire ne peut être omis que si la fonction est simple et son utilisation évidente (par exemple, la fonction de soustraction de valeurs de variable).  Essayez de commencer les commentaires à titre indicatif («Ouvrir le fichier»).  L'utilisation de l'humeur impérative («Ouvrir un fichier») n'est pas recommandée.  Un commentaire décrit l'essence d'une fonction, pas comment elle le fait. <br><br>  Dans le commentaire sur la déclaration de fonction, notez ce qui suit: <br><br><ul><li>  Ce qui est envoyé à l'entrée de la fonction, qui est retourné en conséquence. </li><li>  Pour une fonction membre d'une classe: l'instance conserve-t-elle des arguments de référence, <br>  Dois-je libérer de la mémoire? </li><li>  La fonction alloue-t-elle la mémoire que le code appelant doit supprimer. </li><li>  Peut-il y avoir des arguments nullptr. </li><li>  La complexité de la fonction (algorithmique). </li><li>  Les appels provenant de différents threads sont-ils autorisés en même temps?  Et la synchronisation? </li></ul><br>  Un exemple: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    .    //   .    //    GargantuanTable  . // //      . // //    : // Iterator* iter = table-&gt;NewIterator(); // iter-&gt;Seek(""); // return iter; //         , //    NewIterator()     . Iterator* GetIterator() const;</span></span></code> </pre><br>  Cependant, ne mâchez pas les choses évidentes. <br><br>  Lorsque vous documentez des fonctions surchargées, effectuez les principaux changements tenaces par rapport à la fonction d'origine.  Et s'il n'y a pas de changement (ce qui arrive souvent), des commentaires supplémentaires ne sont pas du tout nécessaires. <br><br>  Lorsque vous commentez des constructeurs et des destructeurs, gardez à l'esprit que le lecteur de code connaît leur objectif.  Par conséquent, le commentaire du type "détruit cet objet" est stupide.  Vous pouvez décrire ce que le constructeur fait avec les arguments (par exemple, changer la propriété des pointeurs) ou quel type d'opérations de nettoyage le destructeur fait. Si tout est clair, ne commentez rien.  En général, les destructeurs n'ont généralement aucun commentaire (lorsqu'ils sont déclarés). <br><br><h4>  Définition de fonction </h4><br>  S'il y a des astuces dans l'implémentation de la fonction, vous pouvez ajouter un commentaire explicatif à la définition.  Vous pouvez y décrire des astuces avec le code, donner un aperçu de toutes les étapes des calculs, expliquer le choix de telle ou telle implémentation (surtout s'il existe de meilleures alternatives).  Vous pouvez décrire les principes de la synchronisation du code (ici nous bloquons, mais ici nous emballons le poisson). <br><br>  Notez que vous <em>ne</em> devez <em>pas</em> répéter le commentaire sur la déclaration de la fonction (à partir d'un fichier <b>.h</b> ou similaire). Il est possible de décrire brièvement ce que fait la fonction, mais l'essentiel devrait être <em>comment</em> elle le fait. <br><br><h3>  Commentaires sur les variables </h3><br>  Dans le bon sens, le nom de la variable devrait immédiatement dire de quoi il s'agit et pourquoi, mais dans certains cas, des commentaires supplémentaires sont nécessaires. <br><br><h4>  Membre de données de classe </h4><br>  Le but de chaque membre de la classe doit être évident.  S'il y a des subtilités non évidentes (significations spéciales, liens avec d'autres membres, restrictions sur la durée de vie) - tout cela doit être commenté.  Cependant, si le type et le nom sont suffisants - vous n'avez pas besoin d'ajouter de commentaires. <br><br>  En revanche, des descriptions de valeurs spéciales (et non évidentes) (nullptr ou -1) seront utiles.  Par exemple: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-comment"><span class="hljs-comment">//       // -1 - ,         int num_total_entries_;</span></span></code> </pre><br><h4>  Variables globales </h4><br>  Toutes les variables globales doivent être commentées sur leur objectif et (si elles ne sont pas évidentes) pourquoi elles doivent être globales. Par exemple: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,     const int kNumTestCases = 6;</span></span></code> </pre><br><h3>  Commentaires sur la mise en œuvre </h3><br>  Commentez l'implémentation d'une fonction ou d'un algorithme dans le cas de morceaux de code non évidents, intéressants et importants. <br><br><h4>  Commentaires descriptifs </h4><br>  Les blocs de code complexes ou non standard doivent être précédés d'un commentaire.  Par exemple: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    2.  x    for (int i = 0; i &lt; result-&gt;size(); ++i) { x = (x &lt;&lt; 8) + (*result)[i]; (*result)[i] = x &gt;&gt; 1; x &amp;= 1; }</span></span></code> </pre><br><h4>  Commentaires de ligne </h4><br>  Il est conseillé de compléter les lignes de code avec une signification non évidente par un commentaire (généralement situé à la fin de la ligne) Ce commentaire doit être séparé du code par 2 espaces.  Par exemple: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,    mmap_budget = max&lt;int64&gt;(0, mmap_budget - index_-&gt;length()); if (mmap_budget &gt;= data_size_ &amp;&amp; !MmapData(mmap_chunk_bytes, mlock)) return; //   </span></span></code> </pre><br>  Notez qu'il y a 2 commentaires sur le bloc de code: l'un décrit ce que fait le code, l'autre rappelle que l'erreur est déjà dans le journal s'il y a un retour de la fonction. <br><br><h4>  Commentaires sur les arguments de fonction </h4><br>  Lorsque l'affectation d'un argument à une fonction n'est pas évidente, envisagez les options suivantes: <br><br><ul><li>  Si l'argument est une valeur fixe (constante littérale) et cette valeur <br>  utilisé dans différents blocs de code (et il est entendu que cette valeur est la même chose) <br>  vous devez créer une constante et l'utiliser explicitement. </li><li>  Vous devriez peut-être remplacer l'argument de type <b>bool</b> par <br>  <b>énumération</b> énumération.  Cela rendra l'argument autodéterminé. </li><li>  Pour les fonctions qui utilisent plusieurs options de configuration dans les arguments, vous pouvez <br>  créer une classe (ou structure) distincte qui combine toutes les options.  Et passer à fonctionner <br>  une instance de cette classe. <br>  Cette approche présente plusieurs avantages: les options sont indiquées par des noms, ce qui explique <br>  leur but.  Le nombre d'arguments dans la fonction est réduit - le code est plus facile à écrire et à lire. <br>  Et si vous devez ajouter plus d'options, vous n'aurez pas à modifier l'appel de fonction lui-même. <br></li><li>  Au lieu d'expressions complexes dans les arguments, utilisez une variable intermédiaire à laquelle vous affectez une expression. </li><li>  En dernier recours, écrivez des commentaires à l'endroit de l'appel pour clarifier le but des arguments. </li></ul><br>  Considérez les exemples suivants: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    ? const DecimalNumber product = CalculateProduct(values, 7, false, nullptr);</span></span></code> </pre><br>  Essayons de peigner le code: <br><br><pre> <code class="cpp hljs">ProductOptions options; options.set_precision_decimals(<span class="hljs-number"><span class="hljs-number">7</span></span>); options.set_use_cache(ProductOptions::kDontUseCache); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DecimalNumber product = CalculateProduct(values, options, <span class="hljs-comment"><span class="hljs-comment">/*completion_callback=*/</span></span><span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>);</code> </pre><br><h4>  Que ne pas faire </h4><br>  N'expliquez pas l'évidence.  En particulier, il n'est pas nécessaire d'expliquer des choses qui sont évidentes pour une personne qui connaît le C ++.  Au lieu de cela, vous pouvez décrire <i>pourquoi</i> ce code le fait (ou même rendre le code auto-descriptif). <br><br>  Comparez: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    . &lt;-- :  ! auto iter = std::find(v.begin(), v.end(), element); if (iter != v.end()) { Process(element); }</span></span></code> </pre><br>  Avec ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  (Process) "element"     auto iter = std::find(v.begin(), v.end(), element); if (iter != v.end()) { Process(element); }</span></span></code> </pre><br>  Le code auto-descriptif ne nécessite aucun commentaire. <br>  Le commentaire sur le code ci-dessus peut être généralement évident (et non nécessaire): <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsAlreadyProcessed(element)) { Process(element); }</code> </pre><br><h3>  Ponctuation, orthographe et grammaire </h3><br>  Faites attention à la ponctuation, l'orthographe et la grammaire: il est beaucoup plus facile de lire des commentaires correctement écrits. <br><br>  Les commentaires doivent être écrits comme une histoire: avec la disposition correcte des majuscules et des signes de ponctuation.  Dans la plupart des cas, des phrases complètes sont plus faciles à comprendre que des fragments de phrases.  Les commentaires courts, tels que ligne par ligne, peuvent être moins formels, mais devraient toujours suivre un style commun. <br><br>  Bien que l'accent mis par le réviseur de code sur l'utilisation de virgules au lieu de points-virgules puisse être légèrement ennuyeux, il est important de maintenir un niveau élevé de lisibilité et de compréhensibilité.  Une ponctuation, une orthographe et une grammaire appropriées y contribuent grandement. <br><br><h3>  Commentaires TODO </h3><br>  Utilisez les commentaires <b>TODO</b> pour un code temporaire ou une solution suffisamment bonne (intermédiaire, pas parfaite). <br><br>  Le commentaire doit inclure la ligne <b>TODO</b> (toutes les majuscules), suivie du nom, de l'adresse e-mail, de l'ID du défaut ou d'autres informations pour identifier le développeur et la nature du problème pour lequel <b>TODO</b> est écrit. Le but de cette description est de pouvoir trouver plus de détails plus tard. <b>TODO</b> avec description ne signifie pas que le programmeur spécifié résoudra le problème.  Par conséquent, lorsque vous créez <b>TODO</b> , le nom usuel est votre nom. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// TODO(kl@gmail.com):  "*"  . // TODO(Zeke)   . // TODO(bug 12345):   " ".</span></span></code> </pre><br>  Si votre <b>TODO</b> ressemble à «Faisons-le différemment à l'avenir», indiquez soit une date spécifique («Corriger en novembre 2005») ou un événement («Supprimer ce code lorsque tous les clients traiteront les requêtes XML»). <br><br>  Remarque: <br>  - Les liens peuvent conduire à des sections du manuel qui n'ont pas encore été traduites. <br>  - une discussion des questions générales est mieux faite dans la <a href="https://habr.com/ru/post/480422/">partie 1. Introduction</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480424/">https://habr.com/ru/post/fr480424/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480408/index.html">52 jeu de données pour les projets de formation</a></li>
<li><a href="../fr480412/index.html">Alexei Ragozin à propos des nouvelles et anciennes fonctionnalités de Java Flight Recorder dans OpenJDK 11 lors de la réunion jug.msk.ru</a></li>
<li><a href="../fr480414/index.html">Le condensé de matières fraîches du monde du front-end de la dernière semaine n ° 393 (9-15 décembre 2019)</a></li>
<li><a href="../fr480416/index.html">Maths génériques dangereux en C #</a></li>
<li><a href="../fr480422/index.html">Google Style Guide en C ++. Partie 1</a></li>
<li><a href="../fr480428/index.html">La méthode de raccourci le plus simple. Alphabet et police pour elle.</a></li>
<li><a href="../fr480430/index.html">Fonctionnement du codec vidéo. Partie 2. Quoi, pourquoi, comment</a></li>
<li><a href="../fr480432/index.html">Le problème du premier visualiseur ou la difficile conversion des flux vidéo WebRTC en HLS</a></li>
<li><a href="../fr480438/index.html">Événements numériques à Moscou du 16 au 22 décembre</a></li>
<li><a href="../fr480440/index.html">Événements numériques à Saint-Pétersbourg du 16 au 22 décembre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>