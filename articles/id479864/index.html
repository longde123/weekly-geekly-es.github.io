<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¨ ğŸ’© ğŸ¤šğŸ¼ Game on WinForms + C # dalam 16 tahun (2 bagian) ğŸ™‰ ğŸ‘ğŸ¾ ğŸ¤¦ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Latar belakang 
 Sudah cukup lama sejak penulisan artikel sebelumnya. Seperti yang dijanjikan, saya menulis bagian kedua. Saya ingin mengucapkan terim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Game on WinForms + C # dalam 16 tahun (2 bagian)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479864/"><h2>  Latar belakang </h2><br>  Sudah cukup lama sejak penulisan <a href="http://habr.com/ru/post/458630/">artikel</a> sebelumnya.  Seperti yang dijanjikan, saya menulis bagian kedua.  Saya ingin mengucapkan terima kasih kepada semua yang memberi saran dalam komentar, dari semuanya saya bisa belajar sesuatu yang baru.  Nah, bagi mereka yang ingin melihat proyek segera, <a href="http://github.com/danilluk1/WForms-Fishing-MVP" rel="nofollow">berikut ini tautan</a> ke proyek GitHub. <br><br>  Hanya ingin mencatat bahwa segala sesuatu yang ditambahkan dan diubah dalam versi ini dilakukan dengan sangat <br>  banyak pekerjaan, banyak kesalahan.  Google saya dipenuhi dengan sejumlah besar permintaan, mulai dari fitur implementasi MVP, hingga metode asinkron. <br><br><img src="https://habrastorage.org/webt/ze/tc/9o/zetc9o9bylklnr81oeua1ril6yk.png" alt="gambar"><br><a name="habracut"></a><br><br><h2>  Pembaruan </h2><br><ol><li>  Menambahkan editor peta Anda sendiri (seperti dalam gim asli). </li><li>  Sounder diimplementasikan. </li><li>  Ditambahkan kemampuan untuk menangkap donk dan pemintalan. </li><li>  Ditambahkan banyak jenis ikan. </li><li>  Peningkatan kinerja proyek. </li><li>  Memperbaiki sejumlah besar bug. </li><li>  Juga, peningkatan signifikan dalam arsitektur aplikasi (lebih tepatnya, penampilannya). </li><li>  Menambahkan profil pemain yang disimpan. </li><li>  Piala yang direalisasikan. </li><li>  Menambahkan perubahan siang dan malam. </li><li>  Perjalanan ditambahkan. </li><li>  Diimplementasikan sebuah toko kelontong. </li><li>  Menerapkan pola MVP. </li><li>  Menerapkan sistem acara dalam game </li><li>  Umpan yang diterapkan, dengan kemampuan untuk mencampur bahan </li><li>  Akting suara ditambahkan </li><li>  Animasi ditambahkan </li><li>  Keausan batang diterapkan, tergantung pada ukuran ikan dan waktu bertahan hidup </li></ol><br>  Saya akan menambahkan lebih banyak perubahan pada file proyek README Git. <br><br><h3>  Bagaimana kode orang lain disesatkan. </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/402/ae2/357/402ae2357ed10901e1543c1212724317.png" alt="gambar"><br><br>  Kita melihat dalam tangkapan layar editor peta untuk memancing, yaitu kotak kedalaman untuk setiap lokasi (Ini adalah elemen Label dengan FormBorderStyle = 0, untuk menunjukkan bingkai).  Omong-omong, tangkapan layar dibuat menggunakan <a href="https://github.com/danilluk1/ScreenshotManager" rel="nofollow">gunting</a> saya sendiri <a href="https://github.com/danilluk1/ScreenshotManager" rel="nofollow">.</a>  Apa masalahnya? <br><br><div class="spoiler">  <b class="spoiler_title">Kode sumber</b> <div class="spoiler_text"><pre><code class="cmake hljs">for (int x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; <span class="hljs-number"><span class="hljs-number">51</span></span>; x++){ for (int y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; <span class="hljs-number"><span class="hljs-number">18</span></span>; y++){ Point between = new Point(Game.CastPoint.X - LVL.Deeparr[x, y].Location.X, Game.CastPoint.Y - LVL.Deeparr[x, y].Location.Y); float distance = (float)<span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Sqrt(between.X * between.X + between.Y * between.Y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance &lt; <span class="hljs-number"><span class="hljs-number">20</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Player.getPlayer().lure != null){ Game.gui.DeepLabel.Text = LVL.Deeparr[x, y].Tag.ToString(); Sounder.setY(x); Sounder.setX(y); } } Game.Deep = Convert.ToInt32(Game.gui.DeepLabel.Text); } }</code> </pre> <br><br></div></div><br>  Di sini kita melihat pass sederhana melalui array dua dimensi (dan bukan yang tepat).  Kemudian kita menghitung hipotenus dengan teorema Pythagoras, dan jika &lt;20, kita menentukan sel yang diinginkan.  Tetapi metode ini bekerja sangat buruk bahkan dengan kotak.  Dan di sini adalah persegi panjang.  Karena itu, sel sering terdeteksi secara tidak benar.  Dalam pembelaan saya, saya dapat mengatakan bahwa saya mengambil kode ini dari YouTube. <br><br>  Jadi, kita perlu menentukan di mana sel kursornya.  Untuk melakukan ini, Anda dapat menggunakan kode sumber ini: <br><br><div class="spoiler">  <b class="spoiler_title">Kode</b> <div class="spoiler_text"><pre> <code class="cmake hljs">for (var y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; CurLvl.Height; y++) { for (var x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; CurLvl.Widgth; x++) { var r = new Rectangle(CurLvl.DeepArray[x, y].Location, new System.Drawing.Size(LabelInfo.Width, LabelInfo.Height)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r.IntersectsWith(new Rectangle(point, new System.Drawing.Size(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)))) { //SomeCode } } }</code> </pre><br></div></div><br>  Di sini kita mengambil koordinat kursor, menempelkannya ke dalam PointToClient, dan meneruskannya ke konstruktor Rectangle, tentukan ukuran 1 dan 1. Kemudian kita menggunakan metode pemeriksaan IntersectsWith standar, persimpangan kursor, dan label.  Selain itu, kami tidak dapat hanya memproses klik pada label, karena formulir dengan mereka tidak muncul. <br>  Juga, itu memungkinkan untuk menerapkan dukungan untuk 3 pancing. <br><br><h2>  Generasi ikan </h2><br>  Jadi, bagian utama dari permainan adalah generasi ikan.  Itu terjadi dalam beberapa tahap: <br>  1. Ketika memasuki lokasi, kami dari garis seperti: <br>  Ikan Mas: 25 250-400 [Keju, Cacing, Belatung, Jagung] Di mana ukuran ikan sebagai persentase dari maksimum, kedalaman minimum, kedalaman maksimum, dan daftar umpan kita mendapatkan objek ikan (Jangan lupa untuk memeriksa ulang garis melalui ekspresi reguler).  Untuk keindahan kode, saya mendefinisikan operator yang melemparkan string ke ikan. <br><br><pre> <code class="cmake hljs">public static explicit operator Fish(FishString fs) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fs.GetFishByStr(); }</code> </pre><br><br>  Akibatnya, pendekatan ini memungkinkan kita untuk menulis: <br><br><pre> <code class="cmake hljs">Fish fish = (Fish)new FishString(<span class="hljs-string"><span class="hljs-string">" : 25 250 - 400 [ , , ,  ]"</span></span>);</code> </pre><br>  Kode diberikan sebagai contoh dan tidak ditemukan dalam proyek dalam formulir ini. <br><br>  2. Sekarang kita perlu menunggu joran untuk dilemparkan, setelah itu kita memulai timer (kita sendiri untuk setiap joran) dengan waktu gigitan acak, kemudian ikuti centang timer dari daftar ikan dengan ukuran 1000 unit, pilih ikan yang kedalaman habitatnya mencakup kedalaman pancing. <br><br>  3. Dari daftar ini, pilih ikan secara acak.  Kami memeriksa apakah umpan yang diset dapat dimakan, dan juga memeriksa bahwa waktu hari aktivitas ikan sesuai dengan waktu saat ini dalam permainan. <br><br>  4. Jika ikan bisa memakan umpan, kita menyerang umpan.  Kami menghitung apakah akan ada penurunan dan setelah jam berapa, berdasarkan peluang penurunan kait yang dipasang.  Jika ikan tidak bisa memakan umpan, maka kita menggilir umpan saat ini (jika ada).  Kami memeriksa apakah ada ikan di dekatnya yang dapat mematuk umpan, dan mengulangi hal yang sama. <br><br>  Berkat proses pembuatannya, saya telah menjadi pengguna LINQ yang percaya diri. <br><br><h2>  Game itu sendiri </h2><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bde/8f4/621/bde8f46210cb712aa08f181d4694cf92.png" alt="Makanan"><br><br>  Screenshot dari toko kelontong. <br><br>  Sumbernya dapat dilihat di repositori.  Di sana, penangan MouseEnter dan MouseLeft untuk memodifikasi gambar makanan agak menarik dieksekusi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/30f/ad2/471/30fad2471b6900614fd74f66af269583.png" alt="gambar"><br><br>  Cuplikan layar formulir perjalanan.  (Semua badan air adalah uji dan nama mereka tidak asli.) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c3/160/568/4c3160568020c3b3d6a2b32473339273.png" alt="gambar"><br><br>  Tangkapan Layar Game <br><br><h2>  Paket </h2><br><ol><li>  Buat server klien untuk game </li><li>  Pengembang Junior FPGA (FPGA) </li><li>  Pengenalan wajah melalui webcam (Saya mencari literatur yang mungkin berguna) </li><li>  Mengganti ListView biasa dengan ObjectListView </li></ol><br>  Di akhir artikel sebelumnya, saya menulis bahwa saya ingin mendapatkan pekerjaan.  Nah, pada bulan September, saya menutup TOR pertama saya dengan SNMP, meskipun di C. <br><br><h2>  Kesimpulan </h2><br>  Proyek ini telah menjadi sangat besar, dengan setidaknya basis kode yang ideal, tetapi sangat layak, nyaman untuk dipertahankan. Di suatu tempat prinsip-prinsip SOLID mungkin dilanggar, tetapi ini disebabkan oleh fakta bahwa proyek itu sangat panjang.  Juga, jika Anda adalah pengembang pemula, dan mencari proyek di mana Anda dapat berpartisipasi, Anda dapat membuat komitmen untuk repositori ini.  Daftar perubahan yang diharapkan dapat ditemukan di file README proyek. <br><br>  Saya juga ingin mencatat bahwa saya tidak melihat prospek dalam karier pengembang C #, atau lebih tepatnya saya ingin sesuatu yang lebih dekat dengan perangkat keras, jadi saya mencoba mempelajari bahasa tingkat rendah. <br><br>  Terima kasih semua yang membaca sampai akhir, setiap kritik terhadap kode sumber disambut dan akan segera dipertimbangkan. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479864/">https://habr.com/ru/post/id479864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id479852/index.html">Panggilan video di bawah tenda: dari jutaan per hari hingga 100 peserta dalam satu konferensi</a></li>
<li><a href="../id479854/index.html">12 Desember pagi Jawa dicerna</a></li>
<li><a href="../id479858/index.html">Mencari LD_PRELOAD</a></li>
<li><a href="../id479860/index.html">Variasi pada topik pemodelan kehidupan. Bagian 2</a></li>
<li><a href="../id479862/index.html">Bagaimana cara menyimpan 15 000 rubel saat mendaftar perangkat lunak</a></li>
<li><a href="../id479870/index.html">Kami mengubah kerangka kerja dan profil kerja saat bepergian - dan tidak hanya. Apa yang akan terjadi pada mitap kedua PHP NN</a></li>
<li><a href="../id479874/index.html">Bagaimana saya masuk ke ThoughtWorks atau wawancara teladan</a></li>
<li><a href="../id479876/index.html">Apakah bantal diperlukan di pusat data?</a></li>
<li><a href="../id479878/index.html">TK universal untuk Wi-Fi, dengan penjelasan</a></li>
<li><a href="../id479880/index.html">Buat bangunan perawatan yang indah dengan Cetak Biru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>