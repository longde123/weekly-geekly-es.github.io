<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏿 ⚽️ ㊙️ Comment écrire D sur ARM 🏴‍☠️ 🐝 🏇🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 


 Aujourd'hui, je souhaite partager mon expérience de développement de mini-ordinateurs sous linux (RPI, BBB et autres) en langage de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment écrire D sur ARM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428982/"><p>  Bonjour, Habr! </p><br><p>  Aujourd'hui, je souhaite partager mon expérience de développement de mini-ordinateurs sous linux (RPI, BBB et autres) en langage de programmation <strong>D.</strong>  Sous la coupe, des instructions complètes sur la façon de le faire sans douleur.  Eh bien, ou presque ... =) </p><br><p><img src="https://habrastorage.org/webt/qc/it/_p/qcit_pcwf3saydn3_anct9wvb_o.png"></p><a name="habracut"></a><br><h3 id="pochemu-d">  Pourquoi d? </h3><br><p>  Au travail, la tâche consistait à écrire un système de surveillance pour ARM, même en tant que grand fan de D, je me demandais s'il devait être considéré comme l'outil principal.  En général, je ne suis pas une personne fantasque, et je suis sur D depuis longtemps, donc j'ai pensé que ça valait la peine d'essayer et ... tout n'est pas si simple.  D'une part, il n'y a pas eu de problèmes particuliers (à l'exception d'un problème pas tout à fait clair qui est parti avec l'arrivée de la nouvelle version du compilateur), d'autre part, les personnes qui développent pour ARM peuvent constamment penser que la boîte à outils n'est pas prête du tout.  Cela dépend de vous. </p><br><h3 id="instrumentariy">  Boîte à outils </h3><br><p> Je peux conseiller <code>Visual Studio Code</code> avec le plugin <code>D Programming Language</code> de camarade.  WebFreak (Jan Jurzitza).  Dans les paramètres, vous pouvez définir le paramètre <code>Beta Stream</code> pour toujours disposer de la dernière version de <code>serve-d</code> .  Le plugin lui-même installe le logiciel nécessaire. </p><br><h3 id="obschaya-struktura-proekta">  Structure générale du projet </h3><br><p>  En général, cela s'est avéré assez confus (en comparaison avec le projet habituel sur D), mais, il me semble, il est assez flexible et pratique. </p><br><pre> <code class="hljs ruby">. ├── arm-lib/ <span class="hljs-params"><span class="hljs-params">|  ├── libcrypto.a |</span></span>  ├── libssl.a <span class="hljs-params"><span class="hljs-params">|  └── libz.a ├── docker-ctx/ |</span></span>  ├── Dockerfile <span class="hljs-params"><span class="hljs-params">|  └── entry.sh ├── source |</span></span>  └── app.d ├── .gitignore ├── build-docker ├── ddb ├── dub.sdl ├── ldc └── makefile</code> </pre> <br><p>  <code>arm-lib</code> - bibliothèques nécessaires au fonctionnement de notre application (compilées sous arm) <br>  <code>docker-ctx</code> - contexte pour assembler une image docker <br>  <code>entry.sh</code> - effectuera certaines actions à chaque lancement ultérieur du conteneur, dont plus tard <br>  <code>dub.sdl</code> - fichier de projet en D, vous permet d'inclure des bibliothèques tierces et bien plus encore <br>  <code>build-docker</code> - script de construction de conteneur (essentiellement 1 ligne, mais toujours) <br>  <code>ddb</code> - docker D builder - script de lancement de conteneur (également une ligne, mais en fait plus pratique) <br>  <code>ldc</code> - un script qui vous permet d'appeler ldc avec tous les paramètres nécessaires <br>  <code>makefile</code> - contient des recettes de construction pour arm et x86 et des actions supplémentaires <br>  <code>source/app.d</code> - sources du projet </p><br><p>  Quelques mots sur <code>arm-lib</code> . <br>  Il y a les fichiers nécessaires pour que vibe fonctionne.  L'ajout de fichiers binaires au référentiel est une mauvaise forme.  Mais ici, pour vous simplifier la vie, il est plus facile de faire exactement cela.  Vous pouvez les ajouter à l'intérieur du conteneur, mais ensuite, afin de former entièrement la recette d'assemblage du conteneur, vous devrez stocker le dossier <code>arm-lib</code> dans <code>dockert-ctx</code> .  Le goût et la couleur ... </p><br><h3 id="obschiy-algoritm-sborki">  Algorithme d'assemblage général </h3><br><pre> <code class="hljs go">./ddb <span class="hljs-built_in"><span class="hljs-built_in">make</span></span></code> </pre> <br><ol><li>  <code>ddb</code> démarre le conteneur, exécute le script <code>entry.sh</code> </li><li>  <code>entry.sh</code> configure <code>dub</code> peu le <code>dub</code> pour qu'il utilise le dossier de bibliothèque à l'intérieur du conteneur, qui sera situé dans le répertoire courant, ce qui vous permettra de ne pas pomper et collecter les bibliothèques utilisées dans le projet lorsque vous redémarrez l'assembly </li><li>  <code>entry.sh</code> finit par passer le contrôle à la commande d'entrée ( <code>make</code> dans notre cas) </li><li>  <code>make</code> à son tour lit <code>makefile</code> </li><li>  tous les drapeaux pour la compilation croisée et le répertoire de construction sont stockés dans le <code>makefile</code> , une ligne d'appel <code>dub</code> est formée </li><li>  lors de l'appel à <code>dub</code> script <code>ldc</code> du répertoire courant est passé en tant que compilateur et les variables d'environnement sont définies </li><li>  les bibliothèques d'exécution sont définies comme des dépendances de maquillage dans le <code>makefile</code> , qui, si elles sont manquantes, sont collectées par le programme <code>ldc-build-runtime</code> </li><li>  les variables sont passées au script <code>ldc</code> et aux paramètres <code>dub.sdl</code> </li></ol><br><h3 id="soderzhanie-osnovnyh-faylov">  Le contenu des fichiers principaux </h3><br><h4 id="dockerfile">  Dockerfile </h4><br><p>  Comme nous écrirons sous RPI3, nous sélectionnons l'image du système <code>debian:stretch-slim</code> base <code>debian:stretch-slim</code> , où <code>gcc-arm-linux-gnueabihf</code> utilise la même version de <code>glibc</code> que la distribution officielle de raspbian (il y avait un problème avec fedora, où le mainteneur du compilateur croisé utilisait une version trop récente de <code>glibc</code> ) </p><br><pre> <code class="hljs powershell">FROM debian:stretch<span class="hljs-literal"><span class="hljs-literal">-slim</span></span> RUN apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> update &amp;&amp; apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> install <span class="hljs-literal"><span class="hljs-literal">-y</span></span> \ make cmake bash p7zip<span class="hljs-literal"><span class="hljs-literal">-full</span></span> tar wget gpg xz<span class="hljs-literal"><span class="hljs-literal">-utils</span></span> \ gcc<span class="hljs-literal"><span class="hljs-literal">-arm</span></span><span class="hljs-literal"><span class="hljs-literal">-linux</span></span><span class="hljs-literal"><span class="hljs-literal">-gnueabihf</span></span> ca<span class="hljs-literal"><span class="hljs-literal">-certificates</span></span> \ &amp;&amp; apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> autoremove <span class="hljs-literal"><span class="hljs-literal">-y</span></span> &amp;&amp; apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> clean ARG ldcver=<span class="hljs-number"><span class="hljs-number">1.11</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> RUN wget <span class="hljs-literal"><span class="hljs-literal">-O</span></span> /root/ldc.tar.xz https://github.com/ldc<span class="hljs-literal"><span class="hljs-literal">-developers</span></span>/ldc/releases/download/v<span class="hljs-variable"><span class="hljs-variable">$ldcver</span></span>/ldc2-<span class="hljs-variable"><span class="hljs-variable">$ldcver</span></span><span class="hljs-literal"><span class="hljs-literal">-linux</span></span><span class="hljs-literal"><span class="hljs-literal">-x86_64</span></span>.tar.xz \ &amp;&amp; tar xf /root/ldc.tar.xz <span class="hljs-literal"><span class="hljs-literal">-C</span></span> /root/ &amp;&amp; rm /root/ldc.tar.xz ENV PATH <span class="hljs-string"><span class="hljs-string">"/root/ldc2-</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ldcver</span></span></span><span class="hljs-string">-linux-x86_64/bin:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PATH</span></span></span><span class="hljs-string">"</span></span> ADD entry.sh /entry.sh RUN chmod +x /entry.sh WORKDIR /workdir ENTRYPOINT [ <span class="hljs-string"><span class="hljs-string">"/entry.sh"</span></span> ]</code> </pre> <br><p>  Le compilateur <code>ldc</code> partir de <code>github</code> , où il est compilé sur la base du <code>llvm</code> actuel. </p><br><h4 id="entrysh">  entry.sh </h4><br><pre> <code class="hljs mel">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ ! -d <span class="hljs-string"><span class="hljs-string">".dpack"</span></span> ]; then mkdir .dpack fi ln -s $(<span class="hljs-keyword"><span class="hljs-keyword">pwd</span></span>)/.dpack /root/.dub <span class="hljs-keyword"><span class="hljs-keyword">exec</span></span> $@</code> </pre> <br><p>  Tout est simple ici: s'il n'y a pas de dossier <code>.dpack</code> , alors créez, utilisez <code>.dpack</code> pour créer un lien symbolique vers <code>/root/.dub</code> . <br>  Cela vous permettra de stocker les packages téléchargés par le <code>dub</code> dans le dossier du projet. </p><br><h4 id="build-docker-ddb-ldc">  build-docker, ddb, ldc </h4><br><p>  Ce sont trois fichiers simples sur une seule ligne.  Deux d'entre eux sont facultatifs, mais pratiques, mais écrits pour linux (bash).  Pour Windows, vous devrez créer des fichiers similaires sur le script local ou simplement l'exécuter à la main. </p><br><p>  <code>build-docker</code> démarre la construction du conteneur (appelé une fois, uniquement pour linux): </p><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash docker build -t dcross docker-ctx</span></span></code> </pre> <br><p>  <code>ddb</code> lance le conteneur pour l'assemblage et passe les paramètres (linux uniquement): </p><br><pre> <code class="hljs mel">#!/bin/bash docker run -v <span class="hljs-string"><span class="hljs-string">`pwd`</span></span>:/workdir -t --rm dcross $@</code> </pre> <br><p>  Veuillez noter que le nom du conteneur est utilisé <code>dcross</code> (le nom lui-même n'a pas d'importance, mais il doit correspondre dans les deux fichiers) et la commande <code>pwd</code> est utilisée pour <code>Dockerfile</code> répertoire actuel dans <code>/workdir</code> (le répertoire est spécifié comme <code>WORKDIR</code> dans le <code>Dockerfile</code> ) (dans win, il semble, vous devez utiliser <code>%CD%</code> ). </p><br><p>  <code>ldc</code> démarre <code>ldc</code> , curieusement, en utilisant des variables d’environnement (uniquement linux, mais il démarre dans le conteneur, il n’a donc pas besoin d’être modifié pour être construit sous win): </p><br><pre> <code class="hljs mel">#!/bin/bash $LDC $LDC_FLAGS $@</code> </pre> <br><h4 id="dubsdl">  dub.sdl </h4><br><p>  Par exemple, ce sera assez simple: </p><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">name</span></span> "chw" description "Cross Hello World" license "MIT" targetType "executable" targetPath "$TP" dependency "vibe-d" version="~&gt;0.8.4" dependency "vibe-d:tls" version="~&gt;0.8.4" subConfiguration "vibe-d:tls" "openssl-1.1"</code> </pre> <br><p>  <code>targetPath</code> est extrait de la variable d'environnement car <code>dub</code> ne peut pas spécifier les champs de la recette d'assemblage par plate-forme (par exemple, <code>lflags "-L.libs" platform="arm"</code> ajoutera un indicateur à l'éditeur de liens uniquement lors de la construction sous arm). </p><br><h4 id="makefile">  makefile </h4><br><p>  Et voici le plus intéressant.  En fait, <code>make</code> pas utilisé pour construire en tant que tel, il appelle un <code>dub</code> pour cela, et <code>dub</code> lui-même surveille ce qui doit être réassemblé et ce qui ne l'est pas.  Mais à l'aide d'un <code>makefile</code> toutes les variables d'environnement nécessaires sont formées, des commandes supplémentaires sont exécutées dans des cas plus complexes (construction de bibliothèques en C, compression des fichiers de mise à jour, etc.). </p><br><p>  Le contenu du <code>makefile</code> plus grand que le reste: </p><br><pre> <code class="hljs mel">#     arm arch = arm # target path -- ,      TP = build-$(arch) LDC_DFLAGS = -mtriple=armv7l-linux-gnueabihf -<span class="hljs-keyword"><span class="hljs-keyword">disable</span></span>-inlining -mcpu=cortex-a8 #         EMPTY := SPACE :=$(EMPTY) $(EMPTY) LDC_BRT_DFLAGS = $(subst $(SPACE),;,$(LDC_DFLAGS)) ifeq ($(force), y) #        #  , .. dub      FORCE = --force <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> FORCE = endif ifeq ($(release), y) BUILD_TYPE = --build=release <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> BUILD_TYPE = endif DUB_FLAGS = build --parallel --compiler=./ldc $(FORCE) $(BUILD_TYPE) $(info DUB_FLAGS: $(DUB_FLAGS)) #     LDC = ldc2 LDC_BRT = ldc-build-runtime #    ldc,    runtime   ARM LDC_RT_DIR = .ldc-rt #  gcc      GCC = arm-linux-gnueabihf-gcc ifeq ($(arch), x86) LDC_FLAGS = <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ifeq ($(arch), arm) LDC_FLAGS = $(LDC_DFLAGS) -LL./$(LDC_RT_DIR)/lib -LL./arm-lib -gcc=$(GCC) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> $(<span class="hljs-keyword"><span class="hljs-keyword">error</span></span> unknown arch) endif DUB = TP=$(TP) LDC=$(LDC) LDC_FLAGS=<span class="hljs-string"><span class="hljs-string">"$(LDC_FLAGS)"</span></span> dub $(DUB_FLAGS) #      .PHONY: all clean rtlibs stat #    all: rtlibs $(DUB) DRT_LIBS=$(addprefix $(LDC_RT_DIR)/lib/, libdruntime-ldc.a libdruntime-ldc-debug.a libphobos2-ldc.a libphobos2-ldc-debug.a) $(DRT_LIBS): CC=$(GCC) $(LDC_BRT) -j8 --dFlags=<span class="hljs-string"><span class="hljs-string">"$(LDC_BRT_DFLAGS)"</span></span> --buildDir=$(LDC_RT_DIR) \ --targetSystem=<span class="hljs-string"><span class="hljs-string">"Linux;UNIX"</span></span> BUILD_SHARED_LIBS=OFF # D runtime  ARM rtlibs: $(DRT_LIBS) #      stat: find <span class="hljs-keyword"><span class="hljs-keyword">source</span></span> -name <span class="hljs-string"><span class="hljs-string">'*.d'</span></span> | xargs wc -l clean: rm -rf $(TP) rm -rf .dub $(LDC_BRT) --buildDir=$(LDC_RT_DIR) --resetOnly</code> </pre> <br><p>  Un tel <code>makefile</code> vous permet de construire un projet sous arm et x86 avec presque une commande: </p><br><pre> <code class="hljs go">./ddb <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> ./ddb <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> arch=x86 #     x86 <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> arch=x86 #   host    ldc</code> </pre> <br><p>  Les fichiers pour arm entrent dans <code>build-arm</code> , pour x86 dans <code>build-x86</code> . </p><br><h4 id="appd">  app.d </h4><br><p>  Eh bien, pour l'apéritif, pour l'image complète, le code <code>app.d</code> : </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> vibe.core.core : runApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> vibe.http.server; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleRequest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(scope HTTPServerRequest req, scope HTTPServerResponse res)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (req.path == <span class="hljs-string"><span class="hljs-string">"/"</span></span>) res.writeBody(<span class="hljs-string"><span class="hljs-string">"Hello, World!"</span></span>, <span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> settings = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HTTPServerSettings; settings.port = <span class="hljs-number"><span class="hljs-number">8080</span></span>; settings.bindAddresses = [<span class="hljs-string"><span class="hljs-string">"::1"</span></span>, <span class="hljs-string"><span class="hljs-string">"0.0.0.0"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> l = listenHTTP(settings, &amp;handleRequest); scope (<span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>) l.stopListening(); runApplication(); }</code> </pre> <br><p>  Tout le monde a maintenant besoin du web =) </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  En général, tout n'est pas aussi compliqué qu'il n'y paraît à première vue, c'est juste qu'une approche universelle n'est pas encore prête.  Personnellement, j'ai passé beaucoup de temps à essayer de me passer de <code>make</code> .  Avec lui, tout est devenu plus simple et plus varié. </p><br><p>  Mais vous devez comprendre que D n'est pas Go, dans D, il est habituel d'utiliser des bibliothèques externes et vous devez être prudent avec leurs versions. <br>  La façon la plus simple d'obtenir une bibliothèque pour armer est de la copier à partir d'un périphérique de travail. </p><br><h3 id="ssylki">  Les références </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici le</a> code source de l'exemple.  Dans ce référentiel, la communauté russophone recueille progressivement des informations, des exemples, des liens. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Il</a> y a des informations supplémentaires ici, comme comment construire pour YoctoLinux. </p><br><p>  <a href="">Fil de nouvelles en VK</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428982/">https://habr.com/ru/post/fr428982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428964/index.html">Les vulnérabilités du SSD chiffré par le matériel permettent aux attaquants de contourner facilement les mesures de protection</a></li>
<li><a href="../fr428972/index.html">Intégration continue dans Yandex</a></li>
<li><a href="../fr428974/index.html">Intéressant à Interlight 2018</a></li>
<li><a href="../fr428976/index.html">Colline de fourmis ou forteresse? Je construis une maison pour le prix d'un appartement. Partie 2: Chauffage</a></li>
<li><a href="../fr428980/index.html">Broker JavaScript hors ligne</a></li>
<li><a href="../fr428984/index.html">Julia et portraits de phases de systèmes dynamiques</a></li>
<li><a href="../fr428986/index.html">Conférence ThinkJava n ° 8 à Kharkov</a></li>
<li><a href="../fr428988/index.html">Conseils nature - Veilleuse nuageuse</a></li>
<li><a href="../fr428990/index.html">Exemples de configuration d'UIViewControllers utilisant RouteComposer</a></li>
<li><a href="../fr428992/index.html">Contournement sélectif des verrous sur les routeurs avec le firmware Padavan et Keenetic OS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>