<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏿‍🤝‍🧑🏽 💽 👨‍⚕️ StackOverflow历史上最受欢迎的代码有一个错误！ 👨🏽‍🎤 🎅🏿 🈹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近的一项研究“在GitHub项目中使用和分配Stack Overflow代码片段”突然发现，在大多数开源项目中，我的答案差不多是十年前写的。 具有讽刺意味的是，有一个错误。 

 很久以前... 
 早在2010年，我就坐在办公室里胡说八道：我喜欢打高尔夫球，并为Stack Overflow评分。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>StackOverflow历史上最受欢迎的代码有一个错误！</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478878/"> 最近的一项研究<a href="https://doi.org/10.1007/s10664-018-9650-5" rel="nofollow">“在GitHub项目中使用和分配Stack Overflow代码片段”</a>突然发现，在大多数开源项目中，我的<a href="https://stackoverflow.com/a/3758880/276052" rel="nofollow">答案</a>差不多是十年前写的。 具有讽刺意味的是，有一个错误。 <br><br><h2> 很久以前... </h2><br> 早在2010年，我就坐在办公室里胡说八道：我<a href="https://en.wikipedia.org/wiki/Code_golf" rel="nofollow">喜欢打高尔夫球，</a>并为Stack Overflow评分。 <br><br> 以下问题引起了我的注意：如何以可读格式显示字节数？ 也就是说，如何将类似123456789字节的内容转换为“ 123.5 MB”。 <br><br> <a href="https://stackoverflow.com/q/3758606/276052" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/7ca/00b/1f7/7ca00b1f7d4f57f0f8afa4ed9554797a.png"></a> <br>  <i><font color="gray">良好的2010年旧界面，感谢Wayback Machine</font></i> <br><a name="habracut"></a><br> 隐式地，结果将是1到999.9之间的数字（具有适当的单位）。 <br><br> 已经有了一个循环的答案。 这个想法很简单：检查从最大单位（EB = 10 <sup>18</sup>字节）到最小单位（B = 1字节）的所有度数，然后应用第一个小于字节数的度数。 在伪代码中，它看起来像这样： <br><br><pre><code class="plaintext hljs">suffixes = [ "EB", "PB", "TB", "GB", "MB", "kB", "B" ] magnitudes = [ 10^18, 10^15, 10^12, 10^9, 10^6, 10^3, 10^0 ] i = 0 while (i &lt; magnitudes.length &amp;&amp; magnitudes[i] &gt; byteCount) i++ printf("%.1f %s", byteCount / magnitudes[i], suffixes[i])</code> </pre> <br> 通常，如果答案正确且得分为正，则很难追上它。 在Stack Overflow中，这被称为<a href="https://meta.stackexchange.com/questions/9731/fastest-gun-in-the-west-problem" rel="nofollow">西方最快射手</a>的<a href="https://meta.stackexchange.com/questions/9731/fastest-gun-in-the-west-problem" rel="nofollow">问题</a> 。 但是这里的答案有几个缺陷，所以我仍然希望超越它。 至少可以大大减少带有循环的代码。 <br><br><h2> 好吧，这就是代数，一切都很简单！ </h2><br> 然后它突然降临在我身上。 前缀为千，兆，千兆，...-仅为1000度（在IEC标准中为1024），因此可以使用对数而不是循环来确定正确的前缀。 <br><br> 基于这个想法，我发表了以下文章： <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">humanReadableByteCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bytes, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> si)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> unit = si ? <span class="hljs-number"><span class="hljs-number">1000</span></span> : <span class="hljs-number"><span class="hljs-number">1024</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bytes &lt; unit) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bytes + <span class="hljs-string"><span class="hljs-string">" B"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> exp = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (Math.log(bytes) / Math.log(unit)); String pre = (si ? <span class="hljs-string"><span class="hljs-string">"kMGTPE"</span></span> : <span class="hljs-string"><span class="hljs-string">"KMGTPE"</span></span>).charAt(exp-<span class="hljs-number"><span class="hljs-number">1</span></span>) + (si ? <span class="hljs-string"><span class="hljs-string">""</span></span> : <span class="hljs-string"><span class="hljs-string">"i"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format(<span class="hljs-string"><span class="hljs-string">"%.1f %sB"</span></span>, bytes / Math.pow(unit, exp), pre); }</code> </pre> <br> 当然，这不是很可读，并且log / pow的效率不如其他选项。 但是没有循环，几乎没有分支，所以我认为结果非常漂亮。 <br><br><blockquote>  <b>数学很简单</b> 。 字节数表示为byteCount = 1000 <sup>s</sup> ，其中<i>s</i>表示度（以二进制表示，基数为1024。）解决方案<i>s</i>给出<i>s</i> = log <sub>1000</sub> （byteCount）。 <br><br>  API中没有简单的表达式log <sub>1000</sub> ，但是我们可以用自然对数来表示它，如下所示：s = log（byteCount）/ log（1000）。 然后将<i>s</i>转换为int，因此，例如，如果我们有一个以上的兆字节（但不完整的千兆字节），则MB将用作度量单位。 <br><br> 事实证明，如果<i>s</i> = 1，则维度为千字节，如果<i>s</i> = 2-兆字节，依此类推。 将byteCount除以1000 <sup>s，</sup>然后将相应的字母拍入前缀。 </blockquote><br> 剩下的就是等着看社区如何看待答案。 我不认为这段代码会成为Stack Overflow历史上使用最广泛的代码。 <br><br><h2> 归因研究 </h2><br> 快进到2018年。 研究生Sebastian Baltes在科学期刊<i>Empirical Software Engineering上</i>发表了一篇文章，题为<a href="https://doi.org/10.1007/s10664-018-9650-5" rel="nofollow">“在GitHub Projects中使用和归因于堆栈溢出代码段”</a> 。 他的研究主题是多少尊重Stack Overflow CC BY-SA 3.0许可证，即作者是否将Stack Overflow链接作为代码源。 <br><br> 为了进行分析，从<a href="https://archive.org/details/stackexchange" rel="nofollow">堆栈溢出转储</a>中提取了代码片段，并将其映射到公共GitHub存储库中的代码。 引用摘要： <br><br><blockquote>  <i>我们提供了一项大规模实证研究的结果，分析了公共GitHub（GH）项目中来自SO答案的Java代码非平凡片段的使用和归因。</i> </blockquote><br>  （扰流器：不，大多数程序员不符合许可证要求）。 <br><br> 该文章有这样一个表格： <br><br><img src="https://habrastorage.org/webt/d_/jb/az/d_jbazgu5cmhwyw__yxdxkzdhwy.png"><br><br> 上面带有标识符<a href="https://stackoverflow.com/a/3758880/276052" rel="nofollow">3758880</a>的答案原来是我八年前发布的答案。 目前，他的浏览量已超过10万，而且有超过一千个优点。 <br><br> 在GitHub上进行的快速搜索实际上使用代码<code>humanReadableByteCount</code>生成了数千个存储库。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4c/3de/bc6/c4c3debc6c290c209b90c2dca5be46ab.png"><br><br> 在您的存储库中搜索此片段： <br><br><pre> <code class="bash hljs">$ git grep humanReadableByteCount</code> </pre> <br><blockquote> 我发现这项研究<b>很有趣</b> 。 <br><br>  Sebastian在OpenJDK存储库中找到了一个匹配项，没有任何出处，并且OpenJDK许可证与CC BY-SA 3.0不兼容。 在<a href="http://mail.openjdk.java.net/pipermail/jdk9-dev/2016-December/005327.html" rel="nofollow">jdk9-dev邮件列表中，</a>他问：是从OpenJDK复制了堆栈溢出代码，反之亦然？ <br><br> 有趣的是，我刚在Oracle的OpenJDK项目中工作，所以我的前同事和朋友写道： <br><br>  <i>你好</i> <i><br><br></i>  <i>为什么不直接在SO（aioobe）上问这篇文章的作者呢？</i>  <i>他是OpenJDK的成员，并在此代码出现在OpenJDK源代码库中时在Oracle工作。</i> <br><br>  Oracle非常重视这些问题。 我知道有些经理在读完此答案并找到“罪魁祸首”后松了一口气。 <br><br> 然后塞巴斯蒂安（Sebastian）给我写信以澄清情况，我做到了： <i>在</i>加入Oracle <i>之前</i>添加了此代码，并且与提交无关。 最好不要和Oracle开玩笑。  <a href="https://bugs.openjdk.java.net/browse/JDK-8170860" rel="nofollow">打开票证</a>后<a href="https://bugs.openjdk.java.net/browse/JDK-8170860" rel="nofollow">的</a>几天<a href="https://bugs.openjdk.java.net/browse/JDK-8170860" rel="nofollow">，</a>该代码<a href="http://hg.openjdk.java.net/jdk9/jdk9/hotspot/rev/b552b596203f" rel="nofollow">已被删除</a> 。 </blockquote><br><h2> 虫子 </h2><br> 我敢打赌，您已经考虑过了。 代码中出现哪种错误？ <br><br> 再一次： <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">humanReadableByteCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bytes, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> si)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> unit = si ? <span class="hljs-number"><span class="hljs-number">1000</span></span> : <span class="hljs-number"><span class="hljs-number">1024</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bytes &lt; unit) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bytes + <span class="hljs-string"><span class="hljs-string">" B"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> exp = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (Math.log(bytes) / Math.log(unit)); String pre = (si ? <span class="hljs-string"><span class="hljs-string">"kMGTPE"</span></span> : <span class="hljs-string"><span class="hljs-string">"KMGTPE"</span></span>).charAt(exp-<span class="hljs-number"><span class="hljs-number">1</span></span>) + (si ? <span class="hljs-string"><span class="hljs-string">""</span></span> : <span class="hljs-string"><span class="hljs-string">"i"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format(<span class="hljs-string"><span class="hljs-string">"%.1f %sB"</span></span>, bytes / Math.pow(unit, exp), pre); }</code> </pre> <br> 有哪些选择？ <br><br> 在EB（10 <sup>18</sup> ）之后是Zettabytes（10 <sup>21</sup> ）。 也许会有很大一部分超越kMGTPE？ 不行 最大值是2 <sup>63</sup> -1≈9.2×10 <sup>18</sup> ，因此没有值会超过EB。 <br><br> 可能是SI单位和二进制系统之间的混淆？ 不行 答案的第一版中有些混乱，但很快就解决了。 <br><br> 也许exp最终归零，导致charAt（exp-1）崩溃？ 也不行 第一个if语句涵盖了这种情况。  exp值将始终至少为1。 <br><br> 引渡中可能有一些奇怪的舍入错误？ 好吧，终于... <br><br><h2> 许多九 </h2><br> 该解决方案一直有效，直到接近1 MB。 当指定<code>"1000,0 kB"</code>字节作为输入时，结果（在SI模式下）为<code>"1000,0 kB"</code> 。 尽管999,999比999.9×1000 <sup>1</sup>更接近1000×1000 <sup>1</sup> ，但本规范禁止使用符号1000。 正确的结果是<code>"1.0 MB"</code> 。 <br><br> 为了辩护，我可以说在撰写本文时，所有22个已发布的答案（包括Apache Commons和Android库）中都存在这种错误。 <br><br> 如何解决？ 首先，我们注意到，一旦字节数更接近于1×1,000 <sup>2</sup> （1 MB），而不是999.9×1000 <sup>1</sup> （999.9 k），则指数（exp）必须从'k'变为'M'。 ） 这发生在999,950。同样，当我们经历999,950,000时，我们应该从“ M”切换为“ G”，依此类推。 <br><br> 我们计算此阈值，如果<code>bytes</code>更大，则增加<code>exp</code> ： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bytes &gt;= Math.pow(unit, exp) * (unit - <span class="hljs-number"><span class="hljs-number">0.05</span></span>)) exp++;</code> </pre> <br> 通过此更改，代码可以正常工作，直到字节数接近1 EB。 <br><br><h2> 更多尼尼斯 </h2><br> 计算999949949999999999999999时，代码给出<code>1000.0 PB</code> ，正确的结果是<code>999.9 PB</code> 。 从数学上讲，代码是准确的，那么这里会发生什么呢？ <br><br> 现在，我们面临<code>double</code>约束。 <br><br><blockquote><h4> 浮点算法简介 </h4><br> 根据IEEE 754规范，接近零的浮点值具有非常密集的表示，而较大的值具有非常稀疏的表示。 实际上，所有值的一半在-1和1之间，并且当涉及大数时， <code>Long.MAX_VALUE</code>大小的值并不意味着任何东西。 从字面上看。 <br><br><pre> <code class="plaintext hljs">double l1 = Double.MAX_VALUE; double l2 = l1 - Long.MAX_VALUE; System.err.println(l1 == l2); // prints true</code> </pre> <br> 有关详细信息，请参见<a href="https://programming.guide/bits-of-a-floating-point-value.html" rel="nofollow">“浮点位”</a> 。 </blockquote><br> 该问题由两个计算表示： <br><br><ul><li>  <code>String.format</code>除法和 <br></li><li> 扩展阈值<code>exp</code> </li></ul><br> 我们可以切换到<code>BigDecimal</code> ，但这很无聊。 此外，这里还会出现问题，因为标准API没有<code>BigDecimal</code>的对数。 <br><br><h4> 减少中间值 </h4><br> 为了解决第一个问题，我们可以将<code>bytes</code>的值减小到精度更好的所需范围，并相应地调整<code>exp</code> 。 在任何情况下，最终结果都是四舍五入的，因此我们将最低有效位舍去就没有关系了。 <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (exp &gt; <span class="hljs-number"><span class="hljs-number">4</span></span>) { bytes /= unit; exp--; }</code> </pre> <br><h4> 最低有效位设置 </h4><br> 要解决第二个问题<i>，</i>最低有效位<i>对</i>我们<i>很重要</i> （99994999 ... 9和99995000 ... 0必须具有不同的度数），因此我们必须找到不同的解决方案。 <br><br> 首先，请注意有12个不同的阈值（每种模式为6个），只有其中一个会导致错误。 由于错误结果以D00 <sub>16</sub>结尾，因此可以唯一标识错误结果。 因此，您可以直接修复它。 <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> th = (<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) (Math.pow(unit, exp) * (unit - <span class="hljs-number"><span class="hljs-number">0.05</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (exp &lt; <span class="hljs-number"><span class="hljs-number">6</span></span> &amp;&amp; bytes &gt;= th - ((th &amp; <span class="hljs-number"><span class="hljs-number">0xFFF</span></span>) == <span class="hljs-number"><span class="hljs-number">0xD00</span></span> ? <span class="hljs-number"><span class="hljs-number">52</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>)) exp++;</code> </pre> <br> 由于我们依赖浮点结果中的某些位模式，因此我们使用strictfp修饰符来确保代码独立于硬件运行。 <br><br><h2> 负输入值 </h2><br> 目前尚不清楚在什么情况下负数字节可能有意义，但是由于Java没有unsigned <code>long</code> ，因此最好处理此选项。 现在，输入<code>-10000 B</code>会产生<code>-10000 B</code> <br><br> 让我们写<code>absBytes</code> ： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> absBytes = bytes == Long.MIN_VALUE ? Long.MAX_VALUE : Math.abs(bytes);</code> </pre> <br> 该表达式非常冗长，因为<code>-Long.MIN_VALUE == Long.MIN_VALUE</code> 。 现在我们使用<code>absBytes</code>而不是<code>bytes</code>进行所有<code>exp</code>计算。 <br><br><h2> 最终版本 </h2><br> 这是代码的最终版本，本着原始版本的精神进行了简化和压缩： <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// From: https://programming.guide/the-worlds-most-copied-so-snippet.html public static strictfp String humanReadableByteCount(long bytes, boolean si) { int unit = si ? 1000 : 1024; long absBytes = bytes == Long.MIN_VALUE ? Long.MAX_VALUE : Math.abs(bytes); if (absBytes &lt; unit) return bytes + " B"; int exp = (int) (Math.log(absBytes) / Math.log(unit)); long th = (long) (Math.pow(unit, exp) * (unit - 0.05)); if (exp &lt; 6 &amp;&amp; absBytes &gt;= th - ((th &amp; 0xfff) == 0xd00 ? 52 : 0)) exp++; String pre = (si ? "kMGTPE" : "KMGTPE").charAt(exp - 1) + (si ? "" : "i"); if (exp &gt; 4) { bytes /= unit; exp -= 1; } return String.format("%.1f %sB", bytes / Math.pow(unit, exp), pre); }</span></span></code> </pre> <br> 请注意，这开始是为了避免循环和过多的分支。 但是在消除所有边界情况之后，该代码变得比原始版本更具可读性。 就个人而言，我不会在生产中复制此片段。 <br><br> 有关生产质量的更新版本，请参阅另一篇文章： <a href="https://programming.guide/java/formatting-byte-size-to-human-readable-format.html" rel="nofollow">“以可读格式设置字节大小</a> 。 <a href="https://programming.guide/java/formatting-byte-size-to-human-readable-format.html" rel="nofollow">”</a> <br><br><h2> 主要发现 </h2><br><ul><li> 即使有数千个加号，Stack Overflow的答案中也可能有错误。 <br></li><li> 检查所有边界情况， <i>尤其是</i>在带有堆栈溢出的代码中。 <br></li><li> 浮点运算很复杂。 <br></li><li> 复制代码时，请确保包括正确的归因。 有人可能会带您去清洗水。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN478878/">https://habr.com/ru/post/zh-CN478878/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN478856/index.html">SD-WAN-2020年的最新趋势和预测</a></li>
<li><a href="../zh-CN478858/index.html">在XHProf Admin中比较分析会话</a></li>
<li><a href="../zh-CN478862/index.html">Yandex.Market中如何安排前端测试，以及为什么我们拒绝每周发布</a></li>
<li><a href="../zh-CN478866/index.html">满足空间-JetBrains的新产品</a></li>
<li><a href="../zh-CN478874/index.html">东芝宣布了两条新的容量高达6 TB的HDD系列产品，并宣布自2020年以来专注于企业领域</a></li>
<li><a href="../zh-CN478880/index.html">雇主在2019年下半年向IT专家提供了哪些薪水</a></li>
<li><a href="../zh-CN478884/index.html">如何在2020年在现场准备RTSP，或为何公猪没有时间逃脱</a></li>
<li><a href="../zh-CN478886/index.html">内联内容的角度组件</a></li>
<li><a href="../zh-CN478888/index.html">关于模块化CSS和代码支持问题的一些想法</a></li>
<li><a href="../zh-CN478890/index.html">我的包裹在哪里？ 人工智能将促进交付任务</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>