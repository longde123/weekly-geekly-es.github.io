<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßö ‚ñ™Ô∏è üë¶üèº Se√±ales desde arriba: c√≥mo salvamos a los cart√≥grafos del trabajo innecesario y los ojos rojos üë©üèΩ‚ÄçüöÄ ü•ú üëãüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2GIS se enorgullece de la precisi√≥n de los datos. Todos los d√≠as h√°biles en cada ciudad, nuestros expertos recorren √°reas enteras para corregir todos ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Se√±ales desde arriba: c√≥mo salvamos a los cart√≥grafos del trabajo innecesario y los ojos rojos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/2gis/blog/457342/"><img src="https://habrastorage.org/webt/qh/ar/dd/qharddtefsq8_kvfphp1wpxe9y8.jpeg" alt="imagen"><br><br>  2GIS se enorgullece de la precisi√≥n de los datos.  Todos los d√≠as h√°biles en cada ciudad, nuestros expertos recorren √°reas enteras para corregir todos los cambios en el mapa: casas nuevas, carreteras e incluso caminos.  Y tambi√©n recolectan y colocan se√±ales de tr√°fico en √©l, ayudando a construir adecuadamente carreteras y rutas a pie.  En este art√≠culo, le contar√© c√≥mo decidimos ayudar a los cart√≥grafos y comenzamos a recolectar se√±ales de tr√°fico autom√°ticamente. <br><a name="habracut"></a><br><h2>  ¬øQu√© es Fiji y por qu√© hay signos? </h2><br>  Fiji es un editor de mapas que desarrollamos para nuestros especialistas en SIG.  Esta es una aplicaci√≥n cl√°sica de cliente-servidor.  Ya hay varios art√≠culos sobre el centro: en los que hablamos de Fiji: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">UI en una aplicaci√≥n Enterprise, o c√≥mo creamos un sistema conveniente para crear mapas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øC√≥mo hacemos una tarjeta para aquellos que hacen una tarjeta?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Localizaci√≥n infinita, o c√≥mo traducimos un mapa en tiempo real</a> </li></ul><br><h2>  C√≥mo recoger signos antes </h2><br>  Fiji tiene un modo de operaci√≥n especial para recolectar y actualizar carteles.  En este modo, el mapeador puede abrir el video grabado por el DVR.  El video en s√≠ se muestra en una ventana separada, y su seguimiento se muestra en el mapa.  El marcador muestra la posici√≥n actual. <br><br><img src="https://habrastorage.org/webt/sn/ve/vf/snvevfj1qfrrvqtr4fzry_cb5ms.jpeg" alt="imagen"><br><br>  Se aplica una cuadr√≠cula en la parte superior del video, que le permite determinar la distancia a la se√±al.  Tan pronto como el personaje se convierte en el tama√±o de una celda, el cart√≥grafo hace una pausa y crea el personaje.  En este momento, conocemos la posici√≥n actual y la distancia al letrero, por lo que lo movemos hacia adelante y lo acercamos al enlace.  El enlace en nuestra terminolog√≠a es una representaci√≥n esquem√°tica de un tramo de carretera.  Cada personaje tiene su propio c√≥digo num√©rico, su cart√≥grafo ingresa en un campo especial. <br><br>  Si ya hemos ingresado un car√°cter, lo cargamos en el editor de caracteres.  El cart√≥grafo revisa el video y, si es necesario, realiza cambios utilizando los mismos c√≥digos num√©ricos.  O, si el signo es correcto, lo marca como actualizado. <br><br>  Por supuesto, este m√©todo requiere que el cart√≥grafo vea cada video, y luego tambi√©n dedique tiempo a ingresar cada personaje.  Adem√°s, la posici√≥n de la se√±al en el mapa no se determina con precisi√≥n: simplemente nos desviamos de la posici√≥n actual por una distancia determinada por la cuadr√≠cula, y luego dibujamos el punto resultante a la carretera m√°s cercana.  Como resultado, los signos pueden no crearse exactamente all√≠ (o incluso nada) cuando sea necesario.  Esto significa que el cart√≥grafo tambi√©n debe moverlo al lugar correcto, lo que tambi√©n consume su tiempo.  Adem√°s, es posible que el video no tenga ning√∫n signo, pero el cart√≥grafo a√∫n se ve obligado a verlo.  Por supuesto, el programa le permite aumentar la velocidad del video, pero el costo de tiempo en cualquier caso ser√° m√°s de cero.  Por lo tanto, decidimos automatizar este proceso. <br><br><h2>  C√≥mo coleccionar ahora </h2><br>  Todav√≠a necesitamos videos de registradores.  Pero ahora, en lugar de mirar cada uno, el cart√≥grafo simplemente selecciona los archivos necesarios y presiona el bot√≥n "Descargar".  Despu√©s de eso, puede hacer otras cosas: el video se procesar√° y las se√±ales de tr√°fico aparecer√°n en el mapa.  Varios casos dudosos ser√°n notados espec√≠ficamente.  Por lo tanto, todo lo que le queda al cart√≥grafo es revisar estos casos y corregirlos. <br><br><h2>  Arquitectura </h2><br><img src="https://habrastorage.org/webt/kf/b9/ln/kfb9lnyqkgw-erepgi-icq-myne.jpeg" alt="imagen"><br><br>  Para obtener objetos de las clases requeridas con los atributos necesarios del video, escribimos varios servicios. <br><br>  El primero es VideoPreprocessingService: aqu√≠ es donde se carga el archivo de video.  El servicio env√≠a el archivo al repositorio, realiza un registro al respecto en la base de datos y crea tareas para su procesamiento.  Debe cortar fotogramas del video con una cierta frecuencia, seleccionar puntos GPS para ellos de la pista para ellos, enviar el resultado al servicio de Procesamiento de cuadros. <br><br>  Las dos primeras tareas las realiza no el servicio en s√≠, sino el trabajador.  Esto se hace para que pueda cambiar f√°cilmente el n√∫mero de estos trabajadores.  Incrementando as√≠ la productividad, si existe tal necesidad. <br><br>  FrameProcessingService guarda todos los marcos y puntos recibidos.  Tambi√©n sube fotogramas a la cola.  Es le√≠do por un servicio escrito por nuestros colegas expertos en Machine Learning.  Reconoce las se√±ales de tr√°fico.  Por supuesto, FrameProcessingService lee las respuestas de este servicio: estos son los c√≥digos de caracteres, si est√°n en el marco, y los rect√°ngulos en los que se inscribe este car√°cter.  Conociendo el tama√±o del rect√°ngulo, entendemos la distancia al signo.  Y cuando se procesan todos los cuadros del video, los env√≠a a nuestro servidor de mapas. <br><br>  El servidor de mapas es la parte m√°s importante del sistema.  Los clientes reciben de √©l todos los datos que almacenamos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">excepto los mosaicos</a> ).  Guarda estos datos y ejecuta toda la l√≥gica empresarial. <br><br><h2>  Descripci√≥n general </h2><br>  Nuestros datos de mapas son geo objetos.  Un objeto geo es una geometr√≠a (es decir, la ubicaci√≥n de un objeto en el espacio) y un conjunto de atributos.  Los almacenamos en la base de datos y los operamos.  Pero de FrameProcessingService obtenemos solo el c√≥digo del signo, las coordenadas del punto desde el cual se reconoci√≥ el signo, el marco en s√≠ y la m√°scara de signos en este marco.  Por lo tanto, debemos convertir este conjunto de datos en un objeto geogr√°fico.  Cada objeto geogr√°fico pertenece a alguna clase.  Cada tipo de se√±al de tr√°fico es una clase separada.  Podemos obtenerlo f√°cilmente del c√≥digo de se√±al.  Del c√≥digo de signo podemos obtener atributos espec√≠ficos de esta clase.  Por ejemplo, recibimos el c√≥digo 3_24_60.  3_24: dice que este es un l√≠mite de velocidad (se√±al 3.24 en las reglas de tr√°fico).  El valor de restricci√≥n debe indicarse para estos caracteres.  Nos dice la tercera parte del c√≥digo: aqu√≠ ser√° de 60 km / h. <br><br>  Entonces, la clase de objeto geo est√° definida, sus atributos tambi√©n son espec√≠ficos.  Parece que ya puedes crear un objeto geo.  Pero es muy temprano.  En primer lugar, cada signo tiene un atributo "Direcci√≥n", que dice en qu√© direcci√≥n act√∫a el signo.  En segundo lugar, todav√≠a no tenemos geometr√≠a para este objeto geogr√°fico.  Tenemos un punto desde el cual vimos una se√±al.  Entonces, el signo en s√≠ est√° a cierta distancia de nosotros.  Adem√°s, su geometr√≠a afecta el valor del atributo Direcci√≥n. <br><br><img src="https://habrastorage.org/webt/8f/lb/pw/8flbpwm0fabred0ai5qdhfgeqyg.jpeg" alt="imagen"><br><br>  Aqu√≠ haremos una peque√±a digresi√≥n.  Por supuesto, tenemos una red de carreteras.  Consiste en enlaces individuales.  Cada enlace es una l√≠nea.  En la primera parte de la figura acabamos de dibujar dos enlaces.  Las flechas muestran la direcci√≥n en que fueron dibujadas, es decir  la izquierda se dibuj√≥ de abajo hacia arriba y la derecha, de arriba a abajo. <br><br>  Cada enlace contiene informaci√≥n sobre en qu√© direcci√≥n puede moverse.  La direcci√≥n del movimiento es un atributo separado; no es igual a la direcci√≥n del renderizado.  Este atributo nos dice en qu√© direcci√≥n puede moverse a lo largo del enlace, en relaci√≥n con la direcci√≥n del dibujo.  En la segunda parte de la figura, ambos enlaces tienen el mismo valor para este atributo, y en la tercera figura, valores opuestos. <br><br>  ¬øC√≥mo se relaciona esto con los signos?  Entonces, nos movemos a lo largo de los enlaces de abajo hacia arriba, y vemos alg√∫n tipo de se√±al.  Entonces, en el enlace izquierdo, el letrero tendr√° la direcci√≥n "Solo recto", a la derecha - "Solo atr√°s", es decir  igual que los enlaces en la tercera figura.  Aqu√≠ todo result√≥ simple, pero esto se debe a que nuestros enlaces son unidireccionales.  En realidad, una gran cantidad de enlaces son bilaterales, es decir  su direcci√≥n tiene el significado de "en ambas direcciones".  Y la se√±al siempre se dirige en una direcci√≥n, y debemos entender en qu√© direcci√≥n. <br><br><h2>  Correspondencia de mapas </h2><br>  Antes de comenzar a colocar letreros en el mapa, debemos entender qu√© caminos condujimos cuando grabamos el video.  Los datos de GPS no son suficientes para esto: a menudo se confunden con decenas de metros.  Adem√°s, los mapas siguen siendo esquemas y pueden no coincidir con el terreno real.  Por ejemplo, en carreteras anchas de varios carriles. <br><br>  Esto resolver√° varios problemas a la vez: <br><br><ul><li>  Ya se pueden crear carteles en estos caminos, por lo que podemos hacer cambios en ellos, si los hay; </li><li>  Es posible que algunos de estos signos no aparezcan en el video, y podemos encontrarlos y ponerles una etiqueta especial; </li><li>  Podemos entender en qu√© camino est√°bamos cuando vimos una se√±al reconocida, que, a su vez, nos ayudar√° a colocar esta se√±al en el lugar correcto en el mapa. </li></ul><br><h3>  Algoritmo </h3><br>  El algoritmo que utilizamos es bastante simple.  Ya hay un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> sobre Habr√© con su descripci√≥n.  En t√©rminos generales, suena as√≠: tenemos una carretera seleccionada, tome el punto GPS m√°s cercano a su final desde la pista.  Y con respecto a este punto, evaluamos los caminos que se unen a nuestro camino, es decir, evaluamos la probabilidad de que nuestro punto se refiera a este camino en particular.  Cada camino recibe puntos, se selecciona el que tiene m√°s puntos.  Repita hasta que la pista termine. <br><br>  En el proceso, realizamos varias adiciones al algoritmo.  El algoritmo no tuvo en cuenta las direcciones en los enlaces de carretera, por lo que lo primero que hicimos fue comenzar a tenerlos en cuenta: ahora, si el enlace es unidireccional, entendemos en qu√© direcci√≥n debemos avanzar.  Y si esta direcci√≥n no coincide con la direcci√≥n del enlace, descartamos este enlace. <br><br>  Inicialmente, nos pareci√≥ que esto ser√≠a suficiente, y las primeras pruebas lo confirmaron.  Pero luego comenzamos a revisar los videos grabados en vecindarios residenciales, y todo result√≥ no tan atractivo.  El hecho es que tenemos una precisi√≥n de datos muy alta, incluso en carreteras.  En consecuencia, hemos dibujado todas las entradas de veh√≠culos dentro del trimestre, hasta el m√°s m√≠nimo detalle.  Por otro lado, como dije, el GPS puede no ser muy preciso o incluso muy inexacto.  Y si vas por un camino alrededor del cual hay edificios altos, entonces los puntos en la pista pueden salir con bastante fuerza.  Sol√≠a ‚Äã‚Äãsuceder que los puntos se mov√≠an hacia m√°s de 20 metros.  Como resultado, resulta que muchos puntos est√°n cerca de esos caminos en los que no fuimos.  El resultado de la reducci√≥n de tales pistas fue esta imagen: <br><br><img src="https://habrastorage.org/webt/w_/ur/qe/w_urqefphdidxo2ap6w66ipauz4.jpeg" alt="imagen"><br>  El sentido com√∫n nos dijo que hay pocas se√±ales en tales caminos, y por lo tanto no hay una raz√≥n particular para recogerlos all√≠.  Por lo tanto, lo m√°s probable, en la mayor√≠a de los casos, el autom√≥vil se movi√≥ por las calles principales.  Por lo tanto, para las entradas de veh√≠culos dentro del trimestre, introdujimos una multa.  Por multa nos referimos a una disminuci√≥n en el n√∫mero de puntos a lo largo del camino.  Como resultado, el problema con las entradas de veh√≠culos dentro del trimestre se resolvi√≥: no salieron cuando no los recorrimos, y cuando realmente los recorrimos, incluso a pesar de la multa, resultan ser la mejor opci√≥n y luego los elegimos. <br><br>  Despu√©s de eso, los resultados ya fueron muy buenos.  Y nos pareci√≥ que la correspondencia de mapas hab√≠a terminado.  Pero el problema vino, de donde no esperaron.  De repente, result√≥ que hay casos en que otro camino se bifurca y lo hace sin problemas.  Y todo se vio agravado por el hecho de que el ramal tambi√©n puede ir en paralelo con el nuestro, al menos por un tiempo.  Al mismo tiempo, le recuerdo, la pista GPS casi nunca se encuentra en la parte superior de los enlaces a los que viajamos, est√° ligeramente desplazada hacia alg√∫n lado.  Y, por supuesto, gracias a todo esto, el algoritmo comenz√≥ a aferrarse a estas ramas.  Debido a lo cual, en el mejor de los casos, recibimos varios enlaces por los que no pasamos realmente.  Y en el peor de los casos, asentaron la pista bastante equivocada. <br><br><img src="https://habrastorage.org/webt/2z/gs/y9/2zgsy9lrsmmots0z2wcbnnovcki.jpeg" alt="imagen"><br><br>  Por lo tanto, se nos ocurri√≥ una evaluaci√≥n adicional del camino.  Tomamos los puntos anteriores y siguientes de la pista GPS en relaci√≥n con el punto desde el que seleccionamos el enlace.  Y vemos que el acimut en estos puntos no difiere demasiado del acimut de movimiento a lo largo de este enlace.  Si difiere mucho, ajustamos este enlace. <br><br>  Como resultado, obtuvimos un resultado que nos conviene, aunque a veces todav√≠a ocurren peque√±os errores (a veces se puede elegir un enlace adicional que no pasamos).  Pero son bastante raros y, por lo tanto, no son cr√≠ticos para nosotros. <br><br><h2>  Colocaci√≥n de personajes </h2><br>  Ahora tenemos un conjunto de enlaces de carretera en los que condujimos, y un conjunto de marcos con se√±ales.  Adem√°s de la informaci√≥n sobre qu√© personaje est√° en este cuadro, desde qu√© punto de la pista se obtiene este cuadro y la m√°scara del personaje (un rect√°ngulo que describe el personaje en este cuadro).  Para que pueda colocar estos signos en el mapa. <br><br>  El primer paso es obtener informaci√≥n adicional que nos ayudar√° a colocar el letrero en el lugar correcto: <br><br><ol><li>  Signo de acimut.  Si la marca se encuentra exactamente en el centro del cuadro, coincide con el acimut en el punto GPS.  Si el signo no est√° centrado, este es el acimut en el punto + el √°ngulo entre el centro del marco y el signo.  Ya tenemos el acimut del punto GPS, y podemos calcular el √°ngulo entre el centro del marco y el signo, porque  sabemos d√≥nde se encuentra la m√°scara de se√±al en el marco y sabemos el √°ngulo de visi√≥n con el que se grab√≥ el video. </li><li>  La distancia a la marca desde el punto GPS.  Podemos calcularlo porque  Conocemos el tama√±o de la m√°scara de se√±al, la resoluci√≥n del marco y el √°ngulo de visi√≥n con el que se graba el video. </li></ol><br>  Ahora puede ir directamente a la instalaci√≥n del letrero.  Porque  los puntos en la pista no siempre (pero en realidad nunca) se encuentran en los enlaces de la carretera, primero debemos poner nuestro punto de detecci√≥n de se√±ales en el enlace.  Lo hacemos de la siguiente manera: <br><br><ol><li>  Entre las carreteras en las que estaba asentada la pista, dejamos solo aquellas que cruzan alg√∫n tipo de amortiguaci√≥n alrededor de nuestro punto GPS; </li><li>  Calculamos la distancia a cada carretera seleccionada y las clasificamos por su aumento; </li><li>  Tomamos el camino, calculamos la proyecci√≥n del punto GPS en √©l; </li><li>  Obtenemos la direcci√≥n con la que nos movemos en este punto a lo largo de este camino; </li><li>  Si la direcci√≥n del √≠tem 4 es inaceptable en este camino, entonces volvemos al √≠tem 3 y tomamos el siguiente camino all√≠; </li><li>  Si la direcci√≥n es aceptable, entonces det√©ngase. </li></ol><br>  Ahora tenemos el camino que tomamos cuando configuramos el punto GPS, y la proyecci√≥n de este punto en nuestro camino.  De hecho, este camino, y de ah√≠ el punto, puede no elegirse correctamente.  Por ejemplo, en las curvas, es muy f√°cil cometer un error. <br><br><img src="https://habrastorage.org/webt/qt/2k/1b/qt2k1bdnjoo0gxkoeytgv2a-2zm.jpeg" alt="imagen"><br><br>  Por lo tanto, antes de continuar, debe asegurarse de que no nos equivoquemos.  O, si comete un error, reemplace el camino con el correcto y obtenga una proyecci√≥n sobre √©l.  Para hacer esto, tome los caminos que se conectan a nuestro camino y eval√∫elos por distancia y acimut.  Como resultado, obtenemos el camino m√°s adecuado para un punto dado y construimos una proyecci√≥n sobre √©l. <br><br>  Ahora que nuestro punto GPS se encuentra en la carretera, podemos calcular la ubicaci√≥n de la se√±al relativa a √©l.  Para hacer esto, construya un vector desde este punto con una longitud igual a la distancia al signo en la direcci√≥n que coincida con el acimut del signo.  Despu√©s de eso, tratamos de tirar de la se√±al a una de las carreteras en las que estaba sentada nuestra pista.  En este caso, tenemos en cuenta la direcci√≥n de las carreteras y la direcci√≥n de la se√±al, que se calcula para cada carretera a trav√©s del acimut de la se√±al. <br><br>  En esta etapa, puede resultar que no hab√≠a un camino adecuado.  Por ejemplo, debido al hecho de que el letrero tendr√° una direcci√≥n que es inaceptable en estos caminos (es decir, son unidireccionales).  En este caso, esta se√±al se encuentra en una carretera vecina por la que no pasamos, lo que significa que simplemente no la crearemos. <br><br>  Ahora que tenemos la coordenada de la se√±al dibujada en la carretera, queda por verificar que est√© configurada adecuadamente, porque a veces podemos cometer un error.  Para hacer esto, verificamos que la se√±al no est√° demasiado lejos del punto GPS original comparando esta distancia con la distancia a la se√±al obtenida a trav√©s del marco, con cierta suposici√≥n.  Tambi√©n verifique que la marca no est√© detr√°s del punto GPS.  Si las validaciones son exitosas, obtenemos las coordenadas de la se√±al en el camino y su direcci√≥n, lo que significa que nuestro objeto geogr√°fico tiene geometr√≠a y todos los atributos necesarios.  Puede proceder a guardarlo. <br><br><h2>  Fusionar signos </h2><br>  De hecho, es demasiado pronto para pasar a la conservaci√≥n.  El hecho es que cada se√±al puede verse desde varios marcos, con la excepci√≥n de algunos casos especiales, cuando para algunas partes del marco la se√±al est√° oculta detr√°s de cualquier obst√°culo, por ejemplo, detr√°s de un cami√≥n. <br><br>  De cada uno de estos cuadros obtuvimos un objeto geo para el signo, tienen los mismos atributos y se encuentran aproximadamente en el mismo punto.  Esto significa que necesitamos dejar solo uno de ellos.  Adem√°s, si este signo no es nuevo, entonces ya lo tenemos en la base de datos, lo que significa que debemos marcarlo como actualizado y no crear un nuevo objeto geogr√°fico. <br><br>  Para ello, realizamos la fusi√≥n de nuevos objetos geogr√°ficos entre nosotros y con los existentes. <br>  En primer lugar, obtenemos todas las se√±ales que ya hemos creado, en los enlaces en los que condujimos.  A ellos agregamos todos los caracteres que reconocimos de los marcos. <br><br>  Lo que necesitamos hacer con ellos: necesitamos entender de sus clases, atributos y geometr√≠as que alg√∫n conjunto de estos objetos geogr√°ficos es el mismo signo.  Si hay un objeto geo existente en este conjunto, d√©jelo solo y tenga en cuenta que se ha actualizado.  Si el conjunto contiene solo nuevos objetos geogr√°ficos, deje solo uno de ellos. <br><br>  Hacemos esto en cuatro pasos: <br><br><ol><li>  Agrupar objetos geogr√°ficos por su clase; </li><li>  En cada grupo del paso 1 obtenemos grupos por atributos; </li><li>  Para cada grupo del paso 2, recopilamos los grupos por geometr√≠a; </li><li>  Si hay un signo existente en el grupo del paso 3, solo lo dejamos (si hay varios de ellos, d√©jelos a todos), y si no hay signos existentes en el grupo, dejamos el que est√° en el medio. </li></ol><br>  Despu√©s de eso, tenemos el n√∫mero deseado de caracteres que finalmente se pueden guardar. <br><br><img src="https://habrastorage.org/webt/lr/hd/wi/lrhdwidcpddigmpg98qtqfwu8-y.jpeg" alt="imagen"><br><br>  Por supuesto, puede resultar que tengamos alg√∫n tipo de se√±al, pero no lo reconocimos con el video.  En este caso, este s√≠mbolo no se actualizar√°.  Desafortunadamente, no podemos estar seguros de que este signo ya no est√© en el suelo, porque  podr√≠a estar cubierto por alg√∫n tipo de obst√°culo mientras graba un video.  Por lo tanto, no eliminamos este signo de inmediato, sino que lo marcamos como perdido en el video.  Si este signo es visible en alg√∫n otro video, simplemente eliminamos esta marca y lo actualizamos.  Si todav√≠a no ser√° visible, el cart√≥grafo tendr√° que lidiar con este signo.  Y elim√≠nelo si realmente ya no existe. <br><br><h2>  Planes inmediatos </h2><br><h3>  Se√±ales de los caminos laterales </h3><br>  Las se√±ales en el video no solo provienen de los caminos que manejamos, sino tambi√©n de los caminos laterales: estos pueden ser caminos que cruzan el nuestro o que est√°n junto al nuestro.  O viceversa: caminos que se bifurcan.  Incluso puede ser caminos paralelos a los nuestros.  Es muy dif√≠cil distinguir las se√±ales que se encuentran en estos caminos de las se√±ales que necesitamos.  Despu√©s de todo, a menudo est√°n cerca de nuestro camino. <br><br>  Para resolver el problema, planeamos usar una serie de reglas sem√°nticas al colocar un signo en un enlace.  Por ejemplo, es poco probable que haya un l√≠mite de velocidad de 5 km / h en la carretera, pero es muy probable que est√© en la entrada de la estaci√≥n de servicio. <br><br><h3>  Se√±ales de seguimiento </h3><br>  A veces no guardamos signos, y a veces viceversa, tenemos signos que no necesitan fusionarse.  Por lo tanto, planeamos rastrear caracteres por cuadros, para reconocer el mismo personaje en diferentes cuadros incluso antes de convertirlos en objetos geogr√°ficos.  Y use este conocimiento con fusi√≥n. <br><br><h2>  Conclusi√≥n </h2><br>  La versi√≥n actual es esencialmente beta.  Por lo tanto, es imperfecto.  Hay problemas que vamos a resolver en el futuro cercano.  Hay problemas que a√∫n no est√°n claros sobre c√≥mo resolverlos.   ,         . , GPS-     .  ,      ‚Äî    ,   .  ,    ,    . <br><br>        .  ,  .   , ,    - . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/457342/">https://habr.com/ru/post/457342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457332/index.html">¬øC√≥mo ver r√°pidamente advertencias interesantes generadas por el analizador PVS-Studio para c√≥digo C y C ++?</a></li>
<li><a href="../457334/index.html">TacacsGUI, Administrador de configuraci√≥n</a></li>
<li><a href="../457336/index.html">Las consecuencias de la extracci√≥n prematura de las muelas del juicio</a></li>
<li><a href="../457338/index.html">Blitz con Ilya Krasinsky: ¬øc√≥mo disparar malas hip√≥tesis, por qu√© descartar un producto y c√≥mo crecer para un m√≠nimo de acci√≥n?</a></li>
<li><a href="../457340/index.html">10 complementos PostCSS que le ahorrar√°n tiempo de dise√±o</a></li>
<li><a href="../457348/index.html">Implementaci√≥n en PythonAnywhere desde GitHub</a></li>
<li><a href="../457350/index.html">¬øPor qu√© el osciloscopio necesita soporte de criptograf√≠a?</a></li>
<li><a href="../457352/index.html">Conclusi√≥n de la informaci√≥n en la pantalla del comprador.</a></li>
<li><a href="../457354/index.html">Ofuscaci√≥n de datos para pruebas de rendimiento</a></li>
<li><a href="../457362/index.html">Promoci√≥n de RUVDS: prepara el servidor en verano</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>