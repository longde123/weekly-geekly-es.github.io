<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçµ üôá üò¶ Si les donn√©es ne tiennent pas en m√©moire. M√©thodes les plus simples üö® ü§öüèø ‚¨áÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Femelle Aardvark avec cub. Photo: Scotto Bear , CC BY-SA 2.0 

 Vous √©crivez un programme de traitement de donn√©es, il passe parfaitement le test sur ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Si les donn√©es ne tiennent pas en m√©moire. M√©thodes les plus simples</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dcmiran/blog/479282/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d9/123/a92/6d9123a92cd8eaa7935353ab9ed3f029.jpg"></div><br>  <i><font color="gray">Femelle Aardvark avec cub.</font></i>  <i><font color="gray">Photo: <a href="">Scotto Bear</a> , CC BY-SA 2.0</font></i> <br><br>  Vous √©crivez un programme de traitement de donn√©es, il passe parfaitement le test sur un petit fichier, mais il se bloque √† une charge r√©elle. <br><br>  Le probl√®me est insuffisant.  Si vous avez 16 gigaoctets de RAM, vous ne pourrez pas y t√©l√©charger une centaine de gigaoctets.  √Ä un moment donn√©, le syst√®me d'exploitation manquera de m√©moire, il ne pourra pas en allouer de nouveau et le programme se bloquera. <br><br>  Que faire <br><a name="habracut"></a><br>  Eh bien, vous pouvez d√©ployer un cluster Big Data, simplement: <br><br><ul><li>  Trouvez un cluster d'ordinateurs. <br></li><li>  Configurez-le en une semaine. <br></li><li>  Apprenez la nouvelle API et r√©√©crivez votre code. </li></ul><br>  C'est cher et d√©sagr√©able.  Heureusement, ce n'est souvent pas n√©cessaire. <br><br>  <b>Nous avons besoin d'une solution simple et facile: traiter les donn√©es sur un seul ordinateur, avec une configuration minimale et une utilisation maximale des biblioth√®ques d√©j√† connect√©es.</b>  Cela est presque toujours possible √† l'aide de m√©thodes simples, parfois appel√©es ¬´calculs hors c≈ìur¬ª. <br><br>  Dans cet article, nous discutons: <br><br><ul><li>  Pourquoi avons-nous besoin de RAM? <br></li><li>  Le moyen le plus simple de traiter des donn√©es qui ne tiennent pas en m√©moire est de d√©penser un peu d'argent. <br></li><li>  Trois m√©thodes logicielles principales pour traiter des quantit√©s excessives de donn√©es: compression, blocage et indexation. </li></ul><br>  Les prochains articles montreront en pratique comment appliquer ces m√©thodes avec des biblioth√®ques sp√©cifiques telles que NumPy et Pandas.  Mais d'abord, la th√©orie. <br><br><h2>  Pourquoi la RAM est-elle n√©cessaire? </h2><br>  Avant d'entrer dans la discussion des solutions, clarifions pourquoi ce probl√®me existe.  Vous pouvez √©crire des donn√©es dans la m√©moire vive (RAM), mais aussi sur le disque dur, alors pourquoi avez-vous besoin de RAM?  Un disque est moins cher, il n'a g√©n√©ralement aucun probl√®me de manque d'espace, pourquoi ne pas vous limiter √† lire et √† √©crire sur un disque? <br><br>  Th√©oriquement, cela pourrait fonctionner.  Mais m√™me les SSD rapides modernes fonctionnent <a href="https://people.eecs.berkeley.edu/~rcs/research/interactive_latency.html">beaucoup, beaucoup plus lentement</a> que la RAM: <br><br><ul><li>  Lecture √† partir du SSD: ~ 16 000 nanosecondes <br></li><li>  Lecture √† partir de la RAM: ~ 100 nanosecondes </li></ul><br>  Pour des calculs rapides, nous n'avons pas le choix: les donn√©es doivent √™tre √©crites en RAM, sinon le code ralentira 150 fois. <br><br><h2>  La solution la plus simple: plus de RAM </h2><br>  La solution la plus simple au probl√®me de manquer de RAM est de d√©penser de l'argent.  Vous pouvez acheter un ordinateur puissant, un serveur ou louer une machine virtuelle avec beaucoup de m√©moire.  En novembre 2019, une recherche rapide et une comparaison de prix tr√®s br√®ve donnent les options suivantes: <br><br><ul><li>  <b>Achetez la</b> Thinkpad M720 Tower avec 6 c≈ìurs et 64 Go de RAM pour 1074 $ <br></li><li>  <b>Louez</b> une machine virtuelle dans le cloud avec 64 c≈ìurs et 432 Go de RAM pour 3,62 $ / heure </li></ul><br>  Ce ne sont que des chiffres apr√®s une recherche rapide.  Apr√®s avoir fait une bonne recherche, vous trouverez s√ªrement de meilleures offres. <br><br>  <b>D√©penser un peu d'argent en mat√©riel pour int√©grer les donn√©es dans la RAM est souvent la solution la moins ch√®re.</b>  <b>Apr√®s tout, notre temps est cher.</b>  Mais parfois, cela ne suffit pas. <br><br>  Par exemple, si vous effectuez de nombreuses t√¢ches de traitement de donn√©es sur une p√©riode de temps, le cloud computing peut √™tre une solution naturelle, mais il peut √©galement √™tre co√ªteux.  Dans l'un de nos projets, ces co√ªts informatiques auraient consomm√© tous les revenus projet√©s du produit, y compris les revenus les plus importants n√©cessaires pour payer mon salaire. <br><br>  <b>Si l'achat / la location d'une grande quantit√© de RAM ne r√©sout pas le probl√®me ou n'est pas possible, l'√©tape suivante consiste √† optimiser l'application elle-m√™me afin qu'elle consomme moins de m√©moire.</b> <br><br><h2>  Technique num√©ro 1. Compression </h2><br>  La compression vous permet de mettre les m√™mes donn√©es dans moins de m√©moire.  Il existe deux formes de compression: <br><br><ul><li>  <b>Sans perte</b> : apr√®s compression, exactement les m√™mes informations sont enregistr√©es que dans les donn√©es d'origine. <br></li><li>  <b>Avec perte</b> : les donn√©es stock√©es perdent certains d√©tails, mais id√©alement cela n'affecte pas grandement les r√©sultats du calcul. </li></ul><br>  Pour plus de clart√©, il ne s'agit pas de fichiers zip ou gzip lorsque les donn√©es sont compress√©es <i>sur le disque</i> .  Pour traiter les donn√©es d'un fichier ZIP, vous devez g√©n√©ralement le d√©compresser, puis charger les fichiers en m√©moire.  Donc, cela n'aidera pas. <br><br>  <b>Nous avons besoin d'une compression de la repr√©sentation des donn√©es en <i>m√©moire</i> .</b> <br><br>  Supposons que vos donn√©es ne stockent que deux valeurs possibles, et rien d'autre: <code>"AVAILABLE"</code> et <code>"UNAVAILABLE"</code> .  Au lieu de stocker des cha√Ænes de 10 octets ou plus par enregistrement, vous pouvez les enregistrer en tant que valeurs bool√©ennes <code>True</code> ou <code>False</code> , qui sont cod√©es sur un seul octet.  Vous pouvez m√™me compresser les informations sur un bit, r√©duisant ainsi la consommation de m√©moire de huit fois. <br><br><h2>  Technique n ¬∞ 2. Division en blocs, chargement des donn√©es un bloc √† la fois </h2><br>  La fragmentation est utile dans les situations o√π les donn√©es ne doivent pas √™tre charg√©es en m√™me temps.  Au lieu de cela, nous pouvons les charger en plusieurs parties, en traitant un fragment √† la fois (ou, comme nous le verrons dans l'article suivant, plusieurs parties en parall√®le). <br><br>  Supposons que vous vouliez trouver le plus gros mot d'un livre.  Vous pouvez charger toutes les donn√©es en m√©moire √† la fois: <br><br><pre> <code class="python hljs">largest_word = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> book.get_text().split(): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(word) &gt; len(largest_word): largest_word = word</code> </pre> <br>  Mais si le livre ne tient pas en m√©moire, vous pouvez le charger page par page: <br><br><pre> <code class="python hljs">largest_word = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> page <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> book.iterpages(): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> page.get_text().split(): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(word) &gt; len(largest_word): largest_word = word</code> </pre> <br>  Cela r√©duit consid√©rablement la consommation de m√©moire car une seule page d'un livre est charg√©e √† la fois.  Dans ce cas, le r√©sultat sera la m√™me r√©ponse. <br><br><h2>  Technique n ¬∞ 3. Indexation lorsqu'un seul sous-ensemble de donn√©es est requis </h2><br>  L'indexation est utile si vous souhaitez utiliser uniquement un sous-ensemble de donn√©es et que vous allez charger diff√©rents sous-ensembles √† des moments diff√©rents. <br><br>  En principe, dans une telle situation, vous pouvez filtrer la partie n√©cessaire et √©liminer l'inutile.  Mais le filtrage est lent et n'est pas optimal, car vous devez d'abord charger beaucoup de donn√©es suppl√©mentaires en m√©moire avant de les supprimer. <br><br>  <b>Si vous n'avez besoin que d'une partie des donn√©es, au lieu de la fragmentation, il est pr√©f√©rable d'utiliser un index - une <i>compression des</i> donn√©es qui indique leur emplacement r√©el.</b> <br><br>  Imaginez que vous souhaitez lire uniquement des fragments d'un livre mentionnant aardvark (un mammif√®re mignon sur la photo au d√©but de l'article).  Si vous v√©rifiez toutes les pages tour √† tour, le livre entier sera charg√© en parties, page par page, √† la recherche de aardvarks - et cela prendra beaucoup de temps. <br><br>  Ou vous pouvez imm√©diatement ouvrir l'index alphab√©tique √† la fin du livre - et trouver le mot ¬´aardvark¬ª.  Il indique que le mot est mentionn√© aux pages 7, 19 et 120-123.  Vous pouvez maintenant lire ces pages, et seulement elles, ce qui est beaucoup plus rapide. <br><br>  Il s'agit d'une m√©thode efficace car l'index est beaucoup plus petit que l'ensemble du livre, il est donc beaucoup plus facile de charger uniquement l'index en m√©moire pour trouver les donn√©es pertinentes. <br><br><h4>  La m√©thode d'indexation la plus simple </h4><br>  L'indexation la plus simple et la plus courante consiste √† nommer des fichiers dans un r√©pertoire: <br><br><pre> <code class="plaintext hljs">mydata/ 2019-Jan.csv 2019-Feb.csv 2019-Mar.csv 2019-Apr.csv ...</code> </pre> <br>  Si vous avez besoin de donn√©es pour mars 2019, il vous suffit de t√©l√©charger le fichier <code>2019-Mar.csv</code> - il n'est pas n√©cessaire de t√©l√©charger les donn√©es pour f√©vrier, juillet ou tout autre mois. <br><br><h2>  Suivant: appliquer ces m√©thodes </h2><br>  Le probl√®me du manque de RAM est plus facile √† r√©soudre avec de l'argent, apr√®s avoir achet√© de la RAM.  Mais si cela n'est pas possible ou pas suffisant, vous utiliserez quand m√™me la compression, la fragmentation ou l'indexation. <br><br>  <b>Les m√™mes m√©thodes sont utilis√©es dans divers progiciels et outils</b> .  M√™me les syst√®mes Big Data hautes performances sont construits sur eux: par exemple, le traitement parall√®le de fragments de donn√©es individuels. <br><br>  Dans les articles suivants, nous verrons comment appliquer ces m√©thodes dans des biblioth√®ques et des outils sp√©cifiques, y compris NumPy et Pandas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr479282/">https://habr.com/ru/post/fr479282/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr479270/index.html">Quelles nouveaut√©s pouvez-vous attendre de Node.js en 2020?</a></li>
<li><a href="../fr479272/index.html">[signet] 9 outils qui augmentent la productivit√© des d√©veloppeurs Web</a></li>
<li><a href="../fr479274/index.html">10 astuces Python √† conna√Ætre</a></li>
<li><a href="../fr479276/index.html">Trois m√©thodes Pandas que vous ne connaissez peut-√™tre pas</a></li>
<li><a href="../fr479278/index.html">Cent √† cinq cents chiffres du nombre pi sur le genou</a></li>
<li><a href="../fr479284/index.html">La maison que le robot a construite</a></li>
<li><a href="../fr479286/index.html">√âcriture d'une application Web simple √† l'aide de Spring MVC, Spring Data JPA et Hibernate</a></li>
<li><a href="../fr479288/index.html">Pourquoi impl√©menter Service Desk et comment choisir une solution pour votre entreprise</a></li>
<li><a href="../fr479290/index.html">Algorithmes de recherche du volume et du centre de masse d'un poly√®dre</a></li>
<li><a href="../fr479292/index.html">Comment enseigner √† un r√©seau de neurones √† reproduire la physique des jeux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>