<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🤝‍👨🏼 👲🏻 🌕 Wie ich PWA auf Svelte bei Google Play gepostet habe 👨🏿‍🤝‍👨🏻 🙎🏿 🤴🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich mag Metal Musik aus verschiedenen Richtungen. Um neue Produkte zu verfolgen, habe ich einen Parser erstellt, der nach neuen Alben sucht und diese ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie ich PWA auf Svelte bei Google Play gepostet habe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462003/"><p>  Ich mag Metal Musik aus verschiedenen Richtungen.  Um neue Produkte zu verfolgen, habe ich einen Parser erstellt, der nach neuen Alben sucht und diese in die Datenbank stellt.  Während der Existenz der Anwendung habe ich den Parser fast nicht berührt, obwohl dies alles andere als ideal ist, aber das Front-End wurde mehrmals überarbeitet. </p><br><img src="https://habrastorage.org/webt/mr/a8/mm/mra8mmaxfr4odearjgnfbtisbu0.png" alt="metalz.web.app"><br><p>  Unter der Katze ist eine Geschichte darüber, wie ich die Anwendung von React-Native nach Svelte kopiert und auf Google Play veröffentlicht habe. </p><a name="habracut"></a><br><h2 id="sozdanie-prilozheniya">  Anwendungserstellung </h2><br><p>  Die erste Version von Metalz wurde in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mobx-State-Tree geschrieben</a> .  Dann wollte ich die Anwendung auf Google Play stellen und alles auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React-Native</a> mithilfe der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Expo-</a> Vorlage neu erstellen.  Als Google, das vom Löschen bedroht war, eine 64-Bit-Version forderte, habe ich alles auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Svelte neu geschrieben</a> .  Zum Vergleich wog die Build-on-Reaktion ~ 300 kb, die Build-on-Reaktion ~ 90 kb.  Ich habe keine Baugruppenoptimierungen durchgeführt, nur Standardvorlagen. </p><br><h2 id="dobavlenie-reklamy">  Anzeige Anzeige </h2><br><p> In der reaktionsnativen Anwendung habe ich Ad-Mob-Anzeigen verwendet, die Webplattform wird jedoch nicht unterstützt.  Ich habe mich für AdSence entschieden, aber die Moderation nicht bestanden.  Die Ablehnung ergab, dass auf meiner Website kein Inhalt vorhanden war und Empfehlungen zum Schreiben hochwertiger Artikel gegeben wurden.  Und ich habe sozusagen keine Artikel, also ist auch die Berufung gescheitert.  Ich musste den Werbeanbieter wechseln.  Die Wahl fiel auf das Yandex-Werbenetzwerk.  Ich habe die Svelte-Komponente erstellt, in deren Modul der Anzeigenblockzähler herausgenommen wird.  Es ist eine für alle Instanzen der Komponente, sodass Sie diese Option in Bändern mit unendlichem Bildlauf verwenden können. </p><br><div class="spoiler">  <b class="spoiler_title">Ad.svelte</b> <div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> id = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { onMount } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"svelte"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> internalId = id; onMount(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> { id += </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">; (</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">w, d, n, s, t</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ w[n] = w[n] || []; w[n].push(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ Ya.Context.AdvManager.render({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">blockId</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"RA--1"</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">renderTo</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">`yandex_rtb_R-A--</span></span><span class="hljs-subst"><span class="javascript"><span class="hljs-string"><span class="hljs-subst">${internalId}</span></span></span></span><span class="javascript"><span class="hljs-string">`</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">async</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript"> }); }); t = d.getElementsByTagName(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">)[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]; s = d.createElement(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">); s.type = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"text/javascript"</span></span></span><span class="javascript">; s.src = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"//an.yandex.ru/system/context.js"</span></span></span><span class="javascript">; s.async = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">; t.parentNode.insertBefore(s, t); })(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.document, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"yandexContextAsyncCallbacks"</span></span></span><span class="javascript">); }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag">`</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">yandex_rtb_R-A-</span></span></span><span class="hljs-tag"></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span><span class="hljs-tag">${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">internalId</span></span></span><span class="hljs-tag">}`} /&gt;</span></span></code> </pre> </div></div><br><h2 id="dobavlenie-funkcionala-pwa">  PWA-Funktionalität hinzufügen </h2><br><p>  Nachdem der Antrag geschrieben wurde, hatte ich eine Frage zur Versammlung.  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">svelte-Vorlage</a> kann einem Bundle keinen Hash hinzufügen.  Ich habe den Sammler nicht eingerichtet, sondern sofort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sapper mitgenommen</a> .  Nach dem Auspacken habe ich eine Bundle-Assembly mit Hash, SSR, PWA und Routing erhalten.  Weitere Informationen finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> . </p><br><h2 id="sborka-apk">  Build apk </h2><br><p>  Das Erstellen der Anwendung erwies sich als recht einfach.  Ich habe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diese Anweisung verwendet</a> . <br>  Vergessen Sie nicht, die Symbole durch Ihre eigenen zu ersetzen. Dies wird im Tutorial nicht erwähnt. <br>  Die apk-Größe mit PWA im Inneren stellte sich als ~ 1,3 MB heraus.  Das reaktionsnative Bündel wog ~ 16,4 MB.  Ich habe keine Baugruppenoptimierungen durchgeführt. </p><br><h2 id="publikaciya-v-google-play">  In Google Play veröffentlichen </h2><br><p>  Nachdem ich den Antrag auf Überprüfung gesendet hatte, erhielt ich eine Ablehnung der Veröffentlichung wegen Verstoßes gegen die Bedingungen. </p><br><blockquote>  Status der App MetalZ - Neue Metal-Musikveröffentlichungen (com.az67128.metalz): Wegen Verstoßes gegen die Richtlinien von Google Play gesperrt <br><br>  Bei der Überprüfung haben wir festgestellt, dass Ihre App gegen die <strong>Richtlinien für Webviews und Affiliate-Spam</strong> verstößt.  Wir erlauben keine Apps, deren Hauptzweck darin besteht, den Affiliate-Verkehr auf eine Website zu lenken oder eine Webansicht einer Website ohne Erlaubnis des Website-Eigentümers oder Administrators bereitzustellen. </blockquote><p>  Als nächstes legte ich Berufung ein, in der ich darauf hinwies, dass das TWA-Bestätigungsverfahren durchgeführt wurde, und fügte den Bildschirm für den Anweisungslistengenerator und den Tester sowie einen Link zur Datei assetlinks.json hinzu. <br>  Die Anwendung wurde nach einigen Tagen entsperrt.  Dabei erhielt ich Ratschläge vom Support: </p><br><blockquote>  Wenn Sie in Zukunft einen Nachweis über die Erlaubnis zur Nutzung des geistigen Eigentums eines Dritten haben, können Sie diesen über dieses Formular vorab an unser Team senden.  Der Link befindet sich auch auf Ihrer Shop-Listingseite im Abschnitt Vollständige Beschreibung. </blockquote><p>  Wenn Sie planen, PWA zu veröffentlichen und Probleme vermeiden möchten, senden Sie daher vorab einen Nachweis über den Domainbesitz. </p><br><p>  Wenn Sie in Ihrer Bewerbung Werbung schalten möchten, wird Ihnen möglicherweise die Veröffentlichung verweigert, wenn keine Nutzungsrichtlinie vorliegt.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der Generator</a> für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">App-Datenschutzrichtlinien</a> hat mir geholfen. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Das Veröffentlichen einer PWA-Anwendung auf Google Play war einfacher als erwartet.  Von den Profis bekam ich: </p><br><ul><li>  Leichte Anwendung; </li><li>  Eine Codebasis; </li><li>  Updates ohne Google Play. </li></ul><br><p>  Der Quellcode der Svelte-Anwendung kann in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gitlab'e angezeigt werden</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de462003/">https://habr.com/ru/post/de462003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461989/index.html">Entwicklung einer Spieloberfläche für verschiedene Bildschirmanteile</a></li>
<li><a href="../de461993/index.html">Wie man ein Lebensmittelgeschäft von einem „normalen Designer“ wird</a></li>
<li><a href="../de461995/index.html">Verwendung von residenten Proxys für Marketing und Website-Werbung</a></li>
<li><a href="../de461997/index.html">Optimieren der Abfrageleistung in PostgreSQL</a></li>
<li><a href="../de461999/index.html">Eine andere Version der WordPress-Entwicklungsumgebung (Docker, wp-cli)</a></li>
<li><a href="../de462005/index.html">Funktionen von Google PageSpeed: Verbesserte Website-Bewertung und verbessertes Suchranking</a></li>
<li><a href="../de462007/index.html">Entwicklung robuster Python-Skripte</a></li>
<li><a href="../de462009/index.html">Programmtrends: Was ist im Jahr 2020 zu erwarten?</a></li>
<li><a href="../de462011/index.html">Web-Geoservices. Überblick über moderne Lösungen</a></li>
<li><a href="../de462013/index.html">Verlauf des Docker-Speicher-Migrationsproblems (Docker-Root)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>