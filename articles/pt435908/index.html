<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø üåπ ‚ò¢Ô∏è Ascetic web: prot√≥tipos de mercados de pulgas em movimento e js üç≠ üêπ ‚õ¥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° a todos, quero compartilhar o resultado de meus pensamentos sobre o t√≥pico sobre o que pode ser um aplicativo da web moderno. Como exemplo, consid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ascetic web: prot√≥tipos de mercados de pulgas em movimento e js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435908/"><p> <a href=""><img src="https://habrastorage.org/webt/jl/lq/qo/jllqqo3xn1mthylxxodb2-digfw.png" alt="captura de tela"></a> </p><br><p>  Ol√° a todos, quero compartilhar o resultado de meus pensamentos sobre o t√≥pico sobre o que pode ser um aplicativo da web moderno.  Como exemplo, considere criar um quadro de avisos para quadrinhos.  De certa forma, o produto em quest√£o foi projetado para um p√∫blico de geeks e simpatizantes, o que permite mostrar liberdade na interface.  No componente t√©cnico, pelo contr√°rio, √© necess√°ria aten√ß√£o aos detalhes. </p><br><p>  Na verdade, eu n√£o entendo nada nos quadrinhos, mas eu amo mercados de pulgas, especialmente no formato de f√≥rum, que eram populares no zero.  Portanto, a suposi√ß√£o (possivelmente falsa), da qual decorrem as conclus√µes a seguir, √© apenas uma - o principal tipo de intera√ß√£o com o aplicativo est√° sendo visualizado, os secund√°rios est√£o publicando an√∫ncios e discuss√µes. </p><br><p> Nosso objetivo ser√° criar um aplicativo simples, sem <del>  conhecimento t√©cnico </del>  assobios extras, no entanto, consistentes com as realidades modernas.  Os principais requisitos que eu gostaria de alcan√ßar s√£o: </p><a name="habracut"></a><br><ol><li><p>  Lado do servidor: </p><br><p>  a) Executa as fun√ß√µes de armazenamento, valida√ß√£o e envio de dados do usu√°rio para o cliente <br>  b) As opera√ß√µes acima consomem uma quantidade aceit√°vel de recursos (tempo, inclusive) <br>  c) O aplicativo e os dados s√£o protegidos contra vetores de ataque populares <br>  d) Possui uma API simples para clientes de terceiros e intera√ß√£o entre servidores <br>  e) Implementa√ß√£o simples entre plataformas </p><br></li><li><p>  Lado do cliente: </p><br><p>  a) Fornece a funcionalidade necess√°ria para criar e consumir conte√∫do <br>  b) A interface √© conveniente para uso regular, o caminho m√≠nimo para qualquer a√ß√£o, a quantidade m√°xima de dados por tela <br>  c) Fora de comunica√ß√£o com o servidor, todas as fun√ß√µes dispon√≠veis nesta situa√ß√£o est√£o dispon√≠veis <br>  d) A interface exibe a vers√£o atual do estado e do conte√∫do, sem reiniciar e aguardar <br>  d) Reiniciar o aplicativo n√£o afeta seu estado <br>  f) Se poss√≠vel, reutilize elementos DOM e c√≥digo JS <br>  g) N√£o usaremos bibliotecas e estruturas de terceiros em tempo de execu√ß√£o <br>  h) O layout √© sem√¢ntico para acessibilidade, analisadores, etc. <br>  i) A navega√ß√£o do conte√∫do principal √© acess√≠vel usando a URL e o teclado </p><br></li></ol><br><p>  Na minha opini√£o, os requisitos l√≥gicos e as aplica√ß√µes mais modernas, em um grau ou outro, atendem a essas condi√ß√µes.  Vamos ver o que acontece conosco (link para fonte e demonstra√ß√£o no final do post). </p><br><div class="spoiler">  <b class="spoiler_title">Advert√™ncias:</b> <div class="spoiler_text"><ul><li>  Quero pedir desculpas aos autores desconhecidos das imagens usadas na demonstra√ß√£o sem permiss√£o, bem como G√∂sse G., Prozorovskaya B. D. e a editora "Library of Florence Pavlenkov" por usar trechos da obra "Siddhartha". </li><li>  O autor n√£o √© um programador real, n√£o recomendo usar o c√≥digo ou as t√©cnicas usadas neste projeto se voc√™ n√£o souber o que est√° fazendo. </li><li>  Pe√ßo desculpas pelo estilo do c√≥digo; ele poderia ter sido escrito de maneira mais f√°cil e √≥bvia, mas isso n√£o √© divertido.  Um projeto para a alma e para um amigo, como √© o que eles dizem. </li><li>  Tamb√©m pe√ßo desculpas pela taxa de alfabetiza√ß√£o, especialmente no texto em ingl√™s.  Anos Falam De Maio Hart. </li><li>  O desempenho do prot√≥tipo apresentado foi testado em [cr√≥mio 70;  linux x86_64;  1366x768], serei extremamente grato aos usu√°rios de outras plataformas e dispositivos por mensagens de erro. </li><li>  Este √© um prot√≥tipo e um t√≥pico proposto para discuss√£o - abordagens e princ√≠pios, pe√ßo que todas as cr√≠ticas √† implementa√ß√£o e ao lado est√©tico sejam acompanhadas de argumentos. </li></ul></div></div><br><h2 id="server">  Servidor </h2><br><p>  O idioma para o servidor √© golang.  Uma linguagem simples e r√°pida, com uma excelente biblioteca e documenta√ß√£o padr√£o ... um pouco irritante.  A escolha inicial recaiu no elixir / erlang, mas como eu j√° sabia que era (relativamente), foi decidido n√£o complic√°-lo (e os pacotes necess√°rios eram apenas para levar). </p><br><p>  O uso de estruturas da web na comunidade go n√£o √© incentivado (justificadamente, vale a pena admitir), escolhemos um compromisso e usamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">microframework labstack / eco</a> , reduzindo assim a quantidade de rotina e, para mim, sem perder muito desempenho. </p><br><p>  Usamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tidwall / buntdb</a> como banco de dados.  Em primeiro lugar, a solu√ß√£o integrada √© mais conveniente e reduz os custos indiretos e, em segundo lugar, na mem√≥ria + chave / valor - <del>  elegante, elegante </del>  R√°pido e sem cache necess√°rio.  Armazenamos e fornecemos dados em JSON, validando apenas ao alterar. </p><br><p>  No i3 de segunda gera√ß√£o, o criador de logs incorporado mostra o tempo de execu√ß√£o para diferentes solicita√ß√µes de 0,5 a 10ms.  A execu√ß√£o de wrk na mesma m√°quina tamb√©m mostra resultados suficientes para nossos prop√≥sitos: </p><br><pre><code class="plaintext hljs">‚ûú comico git:(master) wrk -t2 -c500 -d60s http://localhost:9001/pub/mtimes Running 1m test @ http://localhost:9001/pub/mtimes 2 threads and 500 connections Thread Stats Avg Stdev Max +/- Stdev Latency 20.74ms 16.68ms 236.16ms 72.69% Req/Sec 13.19k 627.43 15.62k 73.58% 1575522 requests in 1.00m, 449.26MB read Requests/sec: 26231.85 Transfer/sec: 7.48MB</code> </pre> <br><pre> <code class="plaintext hljs">‚ûú comico git:(master) wrk -t2 -c500 -d60s http://localhost:9001/pub/goods Running 1m test @ http://localhost:9001/pub/goods 2 threads and 500 connections Thread Stats Avg Stdev Max +/- Stdev Latency 61.79ms 65.96ms 643.73ms 86.48% Req/Sec 5.26k 705.24 7.88k 70.31% 628215 requests in 1.00m, 8.44GB read Requests/sec: 10454.44 Transfer/sec: 143.89MB</code> </pre> <br><h3 id="struktura-proekta">  Estrutura do projeto </h3><br><p>  O pacote <u>comico / model</u> √© dividido em tr√™s arquivos: <br>  model.go - cont√©m uma descri√ß√£o dos tipos de dados e fun√ß√µes gerais: cria√ß√£o / atualiza√ß√£o (o buntdb n√£o faz distin√ß√£o entre essas opera√ß√µes e verificamos a presen√ßa de um registro manualmente), valida√ß√£o, exclus√£o, obten√ß√£o de um registro e obten√ß√£o de uma lista; <br>  rules.go - cont√©m regras de valida√ß√£o para um tipo espec√≠fico e fun√ß√£o de registro; <br>  files.go - trabalhe com imagens. <br>  O tipo Mtimes armazena dados na √∫ltima altera√ß√£o dos tipos restantes no banco de dados, informando ao cliente quais dados foram alterados. </p><br><p>  O pacote <u>comico / bd</u> cont√©m fun√ß√µes generalizadas para interagir com o banco de dados: cria√ß√£o, exclus√£o, sele√ß√£o, etc. O Buntdb salva todas as altera√ß√µes em um arquivo (no nosso caso, uma vez por segundo), no formato de texto, o que √© conveniente em algumas situa√ß√µes.  O arquivo db n√£o √© editado; as altera√ß√µes em caso de sucesso da transa√ß√£o s√£o adicionadas ao final.  Todas as minhas tentativas de violar a integridade dos dados foram malsucedidas; no pior dos casos, as altera√ß√µes no √∫ltimo segundo foram perdidas. <br>  Em nossa implementa√ß√£o, cada tipo corresponde a um banco de dados separado em um arquivo separado (exceto para logs armazenados exclusivamente na mem√≥ria e redefinidos para zero ap√≥s a reinicializa√ß√£o).  Isso se deve em grande parte √† conveni√™ncia de backup e administra√ß√£o, uma pequena vantagem - uma transa√ß√£o aberta para edi√ß√£o bloqueia o acesso a apenas um tipo de dados. <br>  Este pacote pode ser facilmente substitu√≠do por um similar usando outro banco de dados, SQL, por exemplo.  Para fazer isso, basta implementar as seguintes fun√ß√µes: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Exist</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Insert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key, val </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, pattern </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(str </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, err error)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadOne</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(str </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, err error)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Renew</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(err error, newId </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span></code> </pre> <br><p>  O <u>pacote comico / cnst</u> cont√©m algumas constantes necess√°rias em todos os pacotes (tipos de dados, tipos de a√ß√£o, tipos de usu√°rio).  Al√©m disso, este pacote cont√©m todas as mensagens leg√≠veis por humanos com as quais nosso servidor responder√° ao mundo externo. </p><br><p>  O pacote <u>comico / server</u> cont√©m informa√ß√µes de roteamento.  Al√©m disso, apenas algumas linhas (gra√ßas aos desenvolvedores do Echo), autoriza√ß√£o usando JWT, CORS, cabe√ßalhos CSP, criador de logs, distribui√ß√£o est√°tica, gzip, certificado autom√°tico ACME, etc. </p><br><h3 id="tochki-vhoda-api">  Pontos de entrada da API </h3><br><table><thead><tr><th>  URL </th><th>  Dados </th><th>  Descri√ß√£o do produto </th></tr></thead><tbody><tr><td>  get / pub / (mercadorias | mensagens | usu√°rios | cmnts | arquivos) </td><td>  - </td><td>  Obtendo uma variedade de an√∫ncios, postagens, usu√°rios, coment√°rios, arquivos relevantes </td></tr><tr><td>  get / pub / mtimes </td><td>  - </td><td>  Obtendo o hor√°rio da √∫ltima altera√ß√£o para cada tipo de dados </td></tr><tr><td>  post / pub / login </td><td>  {id *: login, passe *: senha} </td><td>  Retorna o token JWT e sua dura√ß√£o </td></tr><tr><td>  post / pub / passe </td><td>  {id *, passe *} </td><td>  Cria um novo usu√°rio se os dados estiverem corretos </td></tr><tr><td>  colocar / api / pass </td><td>  {id *, passe *} </td><td>  Atualiza√ß√£o da senha </td></tr><tr><td>  post | put / api / goods </td><td>  {id *, auth *, t√≠tulo *, tipo *, pre√ßo *, texto *, imagens: [], Tabela: {key: value}} </td><td>  Criar / atualizar an√∫ncio </td></tr><tr><td>  post | put / api / posts </td><td>  {id *, auth *, t√≠tulo *, tipo *, texto *} </td><td>  Criar / atualizar postagem do f√≥rum </td></tr><tr><td>  post | put / api / users </td><td>  {id *, t√≠tulo, tipo, status, escribas: [], ignora: [], Tabela: {key: value}} </td><td>  Criar / Atualizar Usu√°rio </td></tr><tr><td>  post / api / cmnts </td><td>  {id *, auth *, owner *, digite *, para, texto *} </td><td>  Cria√ß√£o de coment√°rios </td></tr><tr><td>  delete / api / (mercadorias | mensagens | usu√°rios | cmnts) / [id] </td><td>  - </td><td>  Exclui uma entrada com o ID </td></tr><tr><td>  get / api / activity </td><td>  - </td><td>  Atualiza o √∫ltimo tempo de leitura dos coment√°rios recebidos para o usu√°rio atual </td></tr><tr><td>  get / api / (assine | ignore) / [tag] </td><td>  - </td><td>  Adiciona ou remove (se houver) marca ao usu√°rio na lista de assinaturas / ignora </td></tr><tr><td>  post / api / upload / (mercadorias | usu√°rios) </td><td>  multipart (nome, arquivo) </td><td>  Carrega an√∫ncios fotogr√°ficos / avatar do usu√°rio </td></tr></tbody></table><br><p>  * - campos obrigat√≥rios <br>  api - requer autoriza√ß√£o, pub - n√£o </p><br><p>  Com uma solicita√ß√£o get que n√£o corresponde ao acima, o servidor procura por um arquivo no diret√≥rio para static (por exemplo, / img / * - images, /index.html - o cliente). <br>  Qualquer ponto da API retornar√° um c√≥digo de resposta 200 se for bem-sucedido, 400 ou 404 para um erro e uma mensagem curta, se necess√°rio. <br>  Os direitos de acesso s√£o simples: a cria√ß√£o de uma entrada est√° dispon√≠vel para um usu√°rio autorizado, a edi√ß√£o para o autor e o moderador, o administrador pode editar e nomear moderadores. <br>  A API est√° equipada com o anti-vandalismo mais simples: as a√ß√µes s√£o registradas junto com o ID do usu√°rio e o IP e, em caso de acesso frequente, √© retornado um erro pedindo que voc√™ espere um pouco (√∫til contra a adivinha√ß√£o de senha). </p><br><h2 id="klient">  Cliente </h2><br><p>  Gosto do conceito de web reativo, acho que a maioria dos sites / aplicativos modernos deve ser feita dentro da estrutura desse conceito ou completamente est√°tica.  Por outro lado, um site simples com megabytes de c√≥digo JS n√£o pode deixar de pressionar.  Na minha opini√£o, este (e n√£o apenas) problema pode ser resolvido por Svelte.  Essa estrutura (ou melhor, a linguagem para a constru√ß√£o de interfaces reativas) n√£o √© inferior ao Vue na funcionalidade necess√°ria, mas possui uma vantagem ineg√°vel - os componentes s√£o compilados no vanilla JS, o que reduz o tamanho do pacote e a carga na m√°quina virtual (bundle.min.js.gz nosso mercado de pulgas √© modesto, pelos padr√µes atuais, 24KB).  Detalhes podem ser encontrados na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> oficial. </p><br><p>  Escolhemos o mercado de pulgas SvelteJS para o lado do cliente, desejamos tudo de melhor para Rich Harris e o desenvolvimento do projeto! </p><br><p>  PS Eu n√£o quero ofender ningu√©m.  Estou certo de que cada especialista e cada projeto tem suas pr√≥prias ferramentas. </p><br><h3 id="klient--dannye">  Cliente / Dados </h3><br><h4 id="url">  URL </h4><br><p>  Usamos para navega√ß√£o.  N√£o simularemos um documento de v√°rias p√°ginas; em vez disso, usamos p√°ginas de hash com par√¢metros de consulta.  Para transi√ß√µes, voc√™ pode usar o &lt;a&gt; usual sem js. </p><br><p>  As se√ß√µes correspondem aos tipos de dados: <u>/ # mercadorias</u> , <u>/ # postagens</u> , <u>/ # usu√°rios</u> . <br>  Par√¢metros <u>:? Id =</u> <em>record_id</em> <u>,? Page =</u> <em>page_number</em> <u>,? Search =</u> <em>search_query</em> . </p><br><p>  Alguns exemplos: </p><br><ul><li>  <u>/ # posts? id = 1542309643 &amp; page = 999 &amp; search = {auth: anon}</u> - <em>postagens de</em> se√ß√£o, ID da postagem - <em>1542309643</em> , p√°gina de coment√°rios - <em>999</em> , consulta de pesquisa - <em>{auth: anon}</em> </li><li>  <u>/ # goods? page = 2 &amp; search = siddhartha</u> - se√ß√£o <em>goods</em> , se√ß√£o page - <em>2</em> , consulta de pesquisa - <em>siddhartha</em> </li><li>  <u>/ # goods? search = wer {key: value}</u> <em>produtos da</em> se√ß√£o <u>t</u> , consulta de pesquisa - consiste em procurar a substring <em>wert</em> no cabe√ßalho ou no texto do an√∫ncio e o <em>valor</em> do substring na propriedade <em>key</em> da parte tabular do an√∫ncio </li><li>  <u>/ # goods? search = {model: 100, display: 256}</u> - acho que tudo est√° claro aqui por analogia </li></ul><br><p>  As fun√ß√µes de an√°lise e gera√ß√£o de URL em nossa implementa√ß√£o s√£o assim: </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'hashchange'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hash = location.hash.slice(<span class="hljs-number"><span class="hljs-number">1</span></span>).split(<span class="hljs-string"><span class="hljs-string">'?'</span></span>), result = {} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!hash[<span class="hljs-number"><span class="hljs-number">1</span></span>]) hash[<span class="hljs-number"><span class="hljs-number">1</span></span>].split(<span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>).forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> { str = str.split(<span class="hljs-string"><span class="hljs-string">'='</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!str[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp;&amp; !!str[<span class="hljs-number"><span class="hljs-number">1</span></span>]) result[<span class="hljs-built_in"><span class="hljs-built_in">decodeURI</span></span>(str[<span class="hljs-number"><span class="hljs-number">0</span></span>]).toLowerCase()] = <span class="hljs-built_in"><span class="hljs-built_in">decodeURI</span></span>(str[<span class="hljs-number"><span class="hljs-number">1</span></span>]).toLowerCase() }) result.type = hash[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-string"><span class="hljs-string">'goods'</span></span> store.set({ <span class="hljs-attr"><span class="hljs-attr">hash</span></span>: result }) }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goto</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ type, id, page, search }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { hash } = store.get(), args = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>], query = [] <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-string"><span class="hljs-string">'search'</span></span>).forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value = args[key] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? args[key] : hash[key] || <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) query.push(key + <span class="hljs-string"><span class="hljs-string">'='</span></span> + value) }) location.hash = (type || hash.type || <span class="hljs-string"><span class="hljs-string">'goods'</span></span>) + (!!query.length ? <span class="hljs-string"><span class="hljs-string">'?'</span></span> + query.join(<span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>) : <span class="hljs-string"><span class="hljs-string">''</span></span>) }</code> </pre> <br><h4 id="api">  API </h4><br><p>  Para trocar dados com o servidor, usaremos a API de busca.  Para baixar registros atualizados em intervalos curtos, solicitamos <em>/ pub / mtimes</em> . Se a hora da √∫ltima altera√ß√£o de qualquer tipo for diferente da local, carregamos uma lista desse tipo.  Sim, foi poss√≠vel implementar a notifica√ß√£o de atualiza√ß√µes via SSE ou WebSockets e carregamento incremental, mas, neste caso, podemos fazer sem ele.  O que conseguimos: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GET</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetch(location.origin + <span class="hljs-string"><span class="hljs-string">'/pub/'</span></span> + type) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">ok</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type === <span class="hljs-string"><span class="hljs-string">'mtimes'</span></span>) store.set({ <span class="hljs-attr"><span class="hljs-attr">online</span></span>: response.ok }) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.ok ? <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() : [] } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type, mtimes, updates = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> local = store.get()._mtimes, net = mtimes || <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GET(<span class="hljs-string"><span class="hljs-string">'mtimes'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!net[type] || local[type] === net[type]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value = updates[<span class="hljs-string"><span class="hljs-string">'_'</span></span> + type] = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GET(type) local[type] = net[type]; updates._mtimes = local <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!value &amp;&amp; !!value.sort) store.set(updates) } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkUpdates</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> checkUpdates(), <span class="hljs-number"><span class="hljs-number">30000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mtimes = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> store.GET(<span class="hljs-string"><span class="hljs-string">'mtimes'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-string"><span class="hljs-string">'users'</span></span>, <span class="hljs-string"><span class="hljs-string">'goods'</span></span>, <span class="hljs-string"><span class="hljs-string">'posts'</span></span>, <span class="hljs-string"><span class="hljs-string">'cmnts'</span></span>, <span class="hljs-string"><span class="hljs-string">'files'</span></span>) .forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function"> =&gt;</span></span> checkUpdate(type, mtimes)) }</code> </pre> <br><p>  Para filtragem e pagina√ß√£o, usamos as propriedades calculadas do Svelte, com base nos dados de navega√ß√£o.  A dire√ß√£o dos valores calculados √©: <strong>items</strong> (matrizes de registros provenientes do servidor) =&gt; <strong>ignoredItems</strong> (registros filtrados com base na lista de ignorados do usu√°rio atual) =&gt; <strong>scribedItems</strong> (filtra os registros de acordo com a lista de assinaturas, se ativada) =&gt; <strong>curItem</strong> e <strong>curItems</strong> (calcula os registros atuais dependendo da se√ß√£o) =&gt; <strong>filterItems</strong> (filtra os registros dependendo da consulta de pesquisa, se houver apenas um registro - filtra os coment√°rios) =&gt; <strong>maxPage</strong> (calcula o n√∫mero de p√°ginas na taxa de 12 registros / coment√°rios por p√°gina) =&gt; <strong>pagedItem</strong> (retorna a matriz final com  postagens / coment√°rios com base no n√∫mero da p√°gina atual). </p><br><p>  Coment√°rios e imagens ( <strong>coment√°rios</strong> e <strong>_images</strong> ) s√£o calculados separadamente, agrupados por tipo e registro do propriet√°rio. </p><br><p>  Os c√°lculos ocorrem automaticamente e somente quando os dados associados s√£o alterados, os dados intermedi√°rios est√£o constantemente na mem√≥ria.  Nesse sentido, fazemos uma conclus√£o desagrad√°vel - para uma grande quantidade de informa√ß√µes e / ou sua atualiza√ß√£o frequente, uma grande quantidade de recursos pode ser gasta. </p><br><h4 id="cache">  Cache </h4><br><p>  De acordo com a decis√£o de criar um aplicativo offline, implementamos o armazenamento de registros e alguns aspectos do estado no localStorage, arquivos de imagem no CacheStorage.  Trabalhar com localStorage √© extremamente simples, concordamos que as propriedades com o prefixo "_" s√£o salvas e restauradas automaticamente ap√≥s a reinicializa√ß√£o quando alteradas.  Ent√£o, nossa solu√ß√£o pode ficar assim: </p><br><pre> <code class="javascript hljs">store.on(<span class="hljs-string"><span class="hljs-string">'state'</span></span>, ({ changed, current }) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(changed).forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prop</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!prop.indexOf(<span class="hljs-string"><span class="hljs-string">'_'</span></span>)) localStorage.setItem(prop, <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(current[prop])) }) }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; localStorage.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> prop = localStorage.key(i) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(localStorage.getItem(prop) || <span class="hljs-string"><span class="hljs-string">'null'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!value &amp;&amp; !prop.indexOf(<span class="hljs-string"><span class="hljs-string">'_'</span></span>)) state[prop] = value } store.set(state) }</code> </pre> <br><p>  Os arquivos s√£o um pouco mais complicados.  Primeiro, usaremos a lista de todos os arquivos relevantes (com a hora da cria√ß√£o) provenientes do servidor.  Ao atualizar esta lista, comparamos com os valores antigos, colocamos os novos arquivos no CacheStorage, exclu√≠mos os desatualizados de l√°: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cacheImages</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newFiles</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldFiles = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'_files'</span></span>) || <span class="hljs-string"><span class="hljs-string">'[]'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cache = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> caches.open(<span class="hljs-string"><span class="hljs-string">'comico'</span></span>) oldFiles.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">file</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!~newFiles.indexOf(file)) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [ id, type ] = file.split(<span class="hljs-string"><span class="hljs-string">':'</span></span>) cache.delete(<span class="hljs-string"><span class="hljs-string">`/img/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${type}</span></span></span><span class="hljs-string">_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">_sm.jpg`</span></span>) }}) newFiles.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">file</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!~oldFiles.indexOf(file)) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [ id, type ] = file.split(<span class="hljs-string"><span class="hljs-string">':'</span></span>), src = <span class="hljs-string"><span class="hljs-string">`/img/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${type}</span></span></span><span class="hljs-string">_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">_sm.jpg`</span></span> cache.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request(src, { <span class="hljs-attr"><span class="hljs-attr">cache</span></span>: <span class="hljs-string"><span class="hljs-string">'no-cache'</span></span> })) }}) }</code> </pre> <br><p>  Em seguida, voc√™ precisa redefinir o comportamento de busca para que o arquivo seja retirado do CacheStorage sem conectar-se ao servidor.  Para fazer isso, voc√™ precisa usar o ServiceWorker.  Ao mesmo tempo, configuraremos outros arquivos para serem armazenados em cache para funcionarem fora da comunica√ß√£o com o servidor: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CACHE = <span class="hljs-string"><span class="hljs-string">'comico'</span></span>, FILES = [ <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-string"><span class="hljs-string">'/bundle.css'</span></span>, <span class="hljs-string"><span class="hljs-string">'/bundle.js'</span></span> ] self.addEventListener(<span class="hljs-string"><span class="hljs-string">'install'</span></span>, (e) =&gt; { e.waitUntil(caches.open(CACHE).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cache</span></span></span><span class="hljs-function"> =&gt;</span></span> cache.addAll(FILES)) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> self.skipWaiting())) }) self.addEventListener(<span class="hljs-string"><span class="hljs-string">'fetch'</span></span>, (e) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> r = e.request <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r.method !== <span class="hljs-string"><span class="hljs-string">'GET'</span></span> || !!~r.url.indexOf(<span class="hljs-string"><span class="hljs-string">'/pub/'</span></span>) || !!~r.url.indexOf(<span class="hljs-string"><span class="hljs-string">'/api/'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!~r.url.lastIndexOf(<span class="hljs-string"><span class="hljs-string">'_sm.jpg'</span></span>) &amp;&amp; e.request.cache !== <span class="hljs-string"><span class="hljs-string">'no-cache'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> e.respondWith(fromCache(r)) e.respondWith(toCache(r)) }) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> caches.open(CACHE)).match(request) || <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Response(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-number"><span class="hljs-number">404</span></span> }) } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetch(request).catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> fromCache(request)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!response &amp;&amp; response.ok) (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> caches.open(CACHE)).put(request, response.clone()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response }</code> </pre> <br><p>  Parece um pouco desajeitado, mas executa suas fun√ß√µes. </p><br><h3 id="klient--interfeys">  Cliente / Interface </h3><br><p>  Estrutura do componente: <br>  index.html |  main.js <br>  == <u>header.html</u> - cont√©m um logotipo, barra de status, menu principal, menu inferior de navega√ß√£o, formul√°rio de <u>envio de</u> coment√°rios <br>  == <u>apart.html</u> - √© um cont√™iner para todos os componentes modais <br>  ==== <u>goodForm.html</u> - formul√°rio para adicionar e editar um an√∫ncio <br>  ==== <u>userForm.html</u> - edita o formul√°rio do usu√°rio atual <br>  ====== <u>tableForm.html</u> - um fragmento do formul√°rio para inserir dados tabulares <br>  ==== <u>postForm.html</u> - formul√°rio para postagem no f√≥rum <br>  ==== <u>login.html</u> - formul√°rio de login / registro <br>  ==== <u>activity.html</u> - exibe coment√°rios endere√ßados ao usu√°rio atual <br>  ==== <u>goodImage.html</u> - veja os an√∫ncios principais e adicionais de fotos <br>  == <u>main.html</u> - cont√™iner para o conte√∫do principal <br>  ==== <u>goods.html</u> - lista ou cart√µes de an√∫ncio √∫nicos <br>  ==== <u>users.html</u> - o mesmo para usu√°rios <br>  ==== <u>posts.html</u> - acho claro <br>  ==== <u>cmnts.html</u> - lista de coment√°rios na <u>postagem</u> atual <br>  ====== <u>cmntsPager.html</u> - pagina√ß√£o para coment√°rios </p><br><ul><li>  Em cada componente, tentamos minimizar o n√∫mero de tags html. </li><li>  N√≥s usamos classes apenas como um indicador de estado. </li><li>  Desempenhamos fun√ß√µes semelhantes √†s da loja (as propriedades e m√©todos da loja sofisticada podem ser usados ‚Äã‚Äãdiretamente dos componentes, adicionando o prefixo '$' a eles). </li><li>  A maioria das fun√ß√µes espera um evento do usu√°rio ou altera√ß√£o de determinadas propriedades, manipula os dados do estado, salva o resultado de seu trabalho de volta ao estado e ao final.  Assim, √© alcan√ßada uma pequena coer√™ncia e extensibilidade do c√≥digo. </li><li>  Para a velocidade aparente das transi√ß√µes e outros eventos da interface do usu√°rio, separamos, na medida do poss√≠vel, as manipula√ß√µes com os dados que ocorrem em segundo plano e as a√ß√µes associadas √† interface, que por sua vez usam o resultado do c√°lculo atual, reconstruindo se necess√°rio, o restante do trabalho ser√° gentilmente executado pela estrutura. </li><li>  Os dados do formul√°rio a ser preenchido s√£o armazenados em localStorage para cada entrada, a fim de evitar sua perda. </li><li>  Em todos os componentes, usamos o modo imut√°vel no qual o objeto-propriedade √© considerado alterado apenas quando um novo link √© recebido, independentemente da altera√ß√£o nos campos, acelerando um pouco nossos aplicativos, embora devido a um pequeno aumento na quantidade de c√≥digo. </li></ul><br><h3 id="klient--upravlenie">  Cliente / Gerenciamento </h3><br><p>  Para controlar usando o teclado, usamos as seguintes combina√ß√µes: <br>  <strong>Alt + s</strong> / <strong>Alt + a</strong> - alterna a p√°gina de registros para frente / tr√°s, pois um registro alterna a p√°gina de coment√°rios. <br>  <strong>Alt + w</strong> / <strong>Alt + q</strong> - move para o registro seguinte / anterior (se houver), funciona no modo de lista, registro √∫nico e visualiza√ß√£o de imagem <br>  <strong>Alt + x</strong> / <strong>Alt + z</strong> - rola a p√°gina para baixo / para cima.  Na exibi√ß√£o de imagem, alterna as imagens para frente / tr√°s <br>  <strong>Escape</strong> - fecha a janela modal, se aberta, retorna √† lista, se uma √∫nica entrada estiver aberta, cancela a consulta de pesquisa no modo de lista <br>  <strong>Alt + c</strong> - foca no campo de pesquisa ou coment√°rio, dependendo do modo atual <br>  <strong>Alt + v</strong> - ativar / desativar o modo de visualiza√ß√£o de fotos para um √∫nico an√∫ncio <br>  <strong>Alt + r</strong> - abre / fecha a lista de coment√°rios recebidos para um usu√°rio autorizado <br>  <strong>Alt + t</strong> - alterna temas claros / escuros <br>  <strong>Alt + g</strong> - Lista de an√∫ncios <br>  <strong>Alt + u</strong> - Usu√°rios <br>  <strong>Alt + p</strong> - f√≥rum <br>  Eu sei que em muitos navegadores essas combina√ß√µes s√£o usadas pelo pr√≥prio navegador, mas para o meu chrome n√£o consegui encontrar algo mais conveniente.  Ficarei feliz em suas sugest√µes. </p><br><p>  Al√©m do teclado, voc√™ tamb√©m pode usar o console do navegador.  Por exemplo, <em>store.goBack ()</em> , <em>store.nextPage ()</em> , <em>store.prevPage ()</em> , <em>store.nextItem ()</em> , <em>store.prevItem ()</em> , <em>store.search (stringValue)</em> , <em>store.checkUpdate ('goods' || ' users '||' posts '||' files '||' cmnts ')</em> - fa√ßa o que o nome indica;  <em>store.get (). comments</em> e <em>store.get () ._ images</em> - retorna arquivos e coment√°rios agrupados;  <em>store.get (). ignororedItems</em> e <em>store.get (). scribedItems</em> s√£o listas de registros que voc√™ ignora e rastreia.  Uma lista completa de todos os dados intermedi√°rios e calculados est√° dispon√≠vel em <em>store.get ()</em> .  N√£o acho que algu√©m possa precisar disso seriamente, mas, por exemplo, filtrar registros por usu√°rio e excluir me pareceu bastante conveniente no console. </p><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  √â aqui que voc√™ pode encerrar seu conhecimento do projeto; voc√™ pode encontrar mais detalhes no c√≥digo-fonte.  Como resultado, obtivemos uma aplica√ß√£o bastante r√°pida e compacta, na maioria dos validadores, seguran√ßa, velocidade, disponibilidade, etc. verificadores, ela mostra bons resultados sem otimiza√ß√£o direcionada. <br>  Gostaria de saber a opini√£o da comunidade sobre o qu√£o justificadas s√£o as abordagens para organizar os aplicativos usados ‚Äã‚Äãno prot√≥tipo, quais podem ser as armadilhas, o que voc√™ implementaria de uma maneira completamente diferente? <br>  C√≥digo fonte, instru√ß√µes de instala√ß√£o de amostra e demonstra√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> (por favor <del>  vandalizar </del>  para testar no √¢mbito do C√≥digo Penal). </p><br><p>  Postscript.  Um pouco mercantil em conclus√£o.  Diga-me, com esse n√≠vel, posso realmente come√ßar a programar por dinheiro?  Se n√£o, o que procurar antes de tudo, se sim, diga-me onde eles est√£o procurando um trabalho interessante em uma pilha semelhante agora.  Obrigada </p><br><p>  Postscript.  Um pouco mais sobre dinheiro e trabalho.  Como voc√™ gosta dessa id√©ia: suponha que uma pessoa esteja pronta para trabalhar em um projeto interessante por qualquer sal√°rio, no entanto, dados sobre tarefas e seu pagamento estar√£o dispon√≠veis publicamente (disponibilidade e um c√≥digo para avaliar a qualidade do desempenho s√£o desej√°veis), se o pagamento estiver significativamente abaixo do mercado, os concorrentes do empregador pode oferecer muito dinheiro pelo desempenho de suas tarefas, se superior - muitos artistas poder√£o oferecer seus servi√ßos a um pre√ßo mais baixo.  Esse esquema, em algumas situa√ß√µes, equilibrar√° o mercado de maneira mais otimizada e justa? </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt435908/">https://habr.com/ru/post/pt435908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt435898/index.html">O que pensar em uma entrevista do NALSD</a></li>
<li><a href="../pt435900/index.html">Encapsule-o</a></li>
<li><a href="../pt435902/index.html">Voc√™ n√£o pode simplesmente pegar e escrever SELECT se o fornecedor n√£o permitir ... mas escreveremos</a></li>
<li><a href="../pt435904/index.html">IA traduziu a atividade cerebral em fala</a></li>
<li><a href="../pt435906/index.html">Armazenamento de Cluster de Marcapasso + DRBD (Prim√°rio Duplo) + ctdb</a></li>
<li><a href="../pt435910/index.html">Por que o BSD perdeu a batalha com o GNU / Linux?</a></li>
<li><a href="../pt435912/index.html">Os principais problemas do desenvolvimento de interfaces modernas</a></li>
<li><a href="../pt435914/index.html">Empacotando aplicativos principais do ASP.NET usando o Docker</a></li>
<li><a href="../pt435916/index.html">Ao invadir a VK, a autentica√ß√£o de dois fatores n√£o salvar√°</a></li>
<li><a href="../pt435920/index.html">Livro de receitas do desenvolvedor: Receitas DDD (parte 4, estruturas)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>