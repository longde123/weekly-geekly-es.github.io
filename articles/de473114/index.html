<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçú „Ä∞Ô∏è ‚ìÇÔ∏è Laravel: Wir analysieren die Grundkonzepte. Dritter Teil: Das Finale üçÆ üí≥ üôÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bis zum Start eines neuen Kurses von OTUS - ‚ÄûFramework Laravel‚Äú - verbleiben noch einige Tage. Im Vorgriff auf den Beginn des Kurses teilen wir den le...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Laravel: Wir analysieren die Grundkonzepte. Dritter Teil: Das Finale</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/473114/">  <i>Bis zum Start eines neuen Kurses von OTUS - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûFramework Laravel‚Äú</a> - verbleiben noch einige Tage.</i>  <i>Im Vorgriff auf den Beginn des Kurses teilen wir den letzten Teil der Ver√∂ffentlichung des Autors zu den Grundkonzepten in Laravel.</i>  <i><b>Wichtig: Diese Reihe von Ver√∂ffentlichungen bezieht sich nicht auf das Bildungsprogramm des Kurses und ist ein wenig n√ºtzliches Material f√ºr Anf√§nger</b> .</i>  <i>Das Kursprogramm finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .</i> <br><br><img src="https://habrastorage.org/webt/yx/1u/tr/yx1utrpgu8ucbkhazc8ktkfww7w.png"><br><hr><br>  Im letzten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel haben</a> wir begonnen, eine Galerie zu schreiben, in der sich ein Benutzer anmelden und registrieren sowie Alben mit Beschreibung, Cover und Titel erstellen kann.  In der erstellten Anwendung gibt es den Hauptwert unserer <code>view</code> und jetzt ist es notwendig, sie ein wenig zu erweitern. <a name="habracut"></a><br>  Auch der vorhandene Code ist eine kleine Verbesserung wert: <br><br>  Wir haben bereits zwei Controller - <code>AlbumController</code> und <code>ImageController</code> .  F√ºgen Sie den Import einer zus√§tzlichen Klasse hinzu, die f√ºr die Arbeit mit Zeichenfolgen verantwortlich ist: <br><br><pre> <code class="plaintext hljs"> use Illuminate\Support\Str;</code> </pre><br>  Und √§ndern Sie die Zeile, die f√ºr die Generierung eines zuf√§lligen Bildnamens in unserer Datenbank verantwortlich ist: <br><br><pre> <code class="plaintext hljs"> $random_name = Str::random(8);</code> </pre><br>  Au√üerdem lohnt es sich jetzt, den Migrationscode ein wenig zu √§ndern, um die Zuverl√§ssigkeit unserer Anwendung zu erh√∂hen, da der Benutzer das Recht haben muss, unser <code>description</code> leer zu lassen (andernfalls benachrichtigt uns Laravel mit Dynamit √ºber einen Fehler).  Gehen wir zur Migration, die der Bildtabelle zugeordnet ist, und korrigieren dort die Zeile, die sich auf die Bildbeschreibung bezieht, auf diese: <br><br><pre> <code class="php hljs"> $table-&gt;string(<span class="hljs-string"><span class="hljs-string">'description'</span></span>)-&gt;nullable();</code> </pre><br>  Nun, mit dem "Refactoring" der Anwendung ist fertig.  Als n√§chstes m√ºssen Sie das Aussehen unserer Anwendung beenden.  Erstellen Sie ein Formular, in dem der Benutzer seine Alben erstellen kann: <br><br>  <code>addimage.blade.php</code> Datei <br><br><pre> <code class="php hljs"> @<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>(<span class="hljs-string"><span class="hljs-string">'includes.header'</span></span>) &lt;body&gt; @<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>(<span class="hljs-string"><span class="hljs-string">'includes.nav'</span></span>) &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">container</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">style</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">align</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">center</span></span></span><span class="hljs-class">;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span4</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">style</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">display</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inline</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">block</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">margin</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">:100</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">px</span></span></span><span class="hljs-class">;"&gt; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">isset</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">errors</span></span></span><span class="hljs-class">) &amp;&amp; $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">errors</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">has</span></span></span><span class="hljs-class">('')) &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alert</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alert</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">block</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alert</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fade</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class">"</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">block</span></span></span><span class="hljs-class">"&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">messages</span></span></span><span class="hljs-class"> = $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">errors</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">all</span></span></span><span class="hljs-class">('&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt;:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">message</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt;'); ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">button</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">button</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">close</span></span></span><span class="hljs-class">"</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dismiss</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alert</span></span></span><span class="hljs-class">"&gt;√ó&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">button</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h4</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Warning</span></span></span><span class="hljs-class">!&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h4</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ul</span></span></span><span class="hljs-class">&gt; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">messages</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">message</span></span></span><span class="hljs-class">) </span></span>{{$message}} @<span class="hljs-keyword"><span class="hljs-keyword">endforeach</span></span> &lt;/ul&gt; &lt;/div&gt; @<span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> &lt;form name=<span class="hljs-string"><span class="hljs-string">"createnewalbum"</span></span> method=<span class="hljs-string"><span class="hljs-string">"POST"</span></span>action=<span class="hljs-string"><span class="hljs-string">"{{route('create_album')}}"</span></span> enctype=<span class="hljs-string"><span class="hljs-string">"multipart/form-data"</span></span>&gt; {{ csrf_field() }} &lt;fieldset&gt; &lt;legend&gt; &lt;/legend&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">form</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">group</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">label</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">"&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">label</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">input</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">form</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class">"</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">placeholder</span></span></span><span class="hljs-class">=" " </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">="</span></span>{{old(<span class="hljs-string"><span class="hljs-string">'name'</span></span>)}}<span class="hljs-string"><span class="hljs-string">"&gt; &lt;/div&gt; &lt;div class="</span></span>form-group<span class="hljs-string"><span class="hljs-string">"&gt; &lt;label for="</span></span>description<span class="hljs-string"><span class="hljs-string">"&gt; &lt;/label&gt; &lt;textarea name="</span></span>description<span class="hljs-string"><span class="hljs-string">" type="</span></span>text<span class="hljs-string"><span class="hljs-string">"class="</span></span>form-control<span class="hljs-string"><span class="hljs-string">" placeholder="</span></span> <span class="hljs-string"><span class="hljs-string">"&gt;{{old('descrption')}}&lt;/textarea&gt; &lt;/div&gt; &lt;div class="</span></span>form-group<span class="hljs-string"><span class="hljs-string">"&gt; &lt;label for="</span></span>cover_image<span class="hljs-string"><span class="hljs-string">"&gt;   &lt;/label&gt; {{Form::file('cover_image')}} &lt;/div&gt; &lt;button type="</span></span>submit<span class="hljs-string"><span class="hljs-string">" class=¬´btn btn-default"</span></span>&gt;!&lt;/button&gt; &lt;/fieldset&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"</span></span>&gt;&lt;/script&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"</span></span>&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre><br>  Ich m√∂chte Sie daran erinnern, dass in den <code>includes</code> oben auf der Seite die Navigation und die Bibliotheken verwendet werden, die im letzten Teil beschrieben wurden. <br><br>  Au√üerdem m√ºssen wir das Aussehen von <code>album.blade.php</code> <br><br><pre> <code class="plaintext hljs"> @include('includes.header') &lt;body&gt; @include('includes.nav') &lt;div class="container"&gt; &lt;div class="starter-template"&gt; &lt;div class="media"&gt; &lt;img class="media-object pull-left"alt="{{$album-&gt;name}}" src="/albums/{{$album-&gt;cover_image}}" width="350px"&gt; &lt;div class="media-body"&gt; &lt;h2 class="media-heading" style="font-size: 26px;"&gt; :&lt;/h2&gt; &lt;p&gt;{{$album-&gt;name}}&lt;/p&gt; &lt;div class="media"&gt; &lt;h2 class="media-heading" style="font-size: 26px;"&gt;  :&lt;/h2&gt; &lt;p&gt;{{$album-&gt;description}}&lt;p&gt; &lt;a href="{{route('add_image',array('id'=&gt;$album-&gt;id))}}"&gt;&lt;button type="button"class="btn btn-primary btn-large"&gt;    &lt;/button&gt;&lt;/a&gt; &lt;a href="{{route('delete_album',array('id'=&gt;$album-&gt;id))}}" onclick="return confirm(' ?')"&gt;&lt;button type="button"class="btn btn-danger btn-large"&gt; &lt;/button&gt;&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class="row"&gt; @foreach($album-&gt;Photos as $photo) &lt;div class="col-lg-3"&gt; &lt;div class="thumbnail" style="max-height: 350px;min-height: 350px;"&gt; &lt;img alt="{{$album-&gt;name}}" src="/albums/{{$photo-&gt;image}}"&gt; &lt;div class="caption"&gt; &lt;p&gt;{{$photo-&gt;description}}&lt;/p&gt; &lt;p&gt; : {{ date("d FY",strtotime($photo-&gt;created_at)) }}at {{ date("g:ha",strtotime($photo-&gt;created_at)) }}&lt;/p&gt; &lt;a href="{{route('delete_image',array('id'=&gt;$photo-&gt;id))}}" onclick="returnconfirm(' ?')"&gt;&lt;button type="button"class="btn btn-danger btn-small"&gt; &lt;/button&gt;&lt;/a&gt; &lt;p&gt;     :&lt;/p&gt; &lt;form name="movephoto" method="POST"action="{{route('move_image')}}"&gt; {{ csrf_field() }} &lt;select name="new_album"&gt; @foreach($albums as $others) &lt;option value="{{$others-&gt;id}}"&gt;{{$others-&gt;name}}&lt;/option&gt; @endforeach &lt;/select&gt; &lt;input type="hidden" name="photo"value="{{$photo-&gt;id}}" /&gt; &lt;button type="submit" class="btn btn-smallbtn-info" onclick="return confirm(' ?')"&gt; &lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; @endforeach &lt;/div&gt; &lt;/div&gt; &lt;script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"&gt;&lt;/script&gt; &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre><br>  Au√üerdem k√∂nnen wir unser Routing leicht aktualisieren, beispielsweise in <code>nav.blade.php</code> : <br><br><pre> <code class="plaintext hljs"> &lt;li&gt;&lt;a href="{{URL::route('create_album_form')}}"&gt;  &lt;/a&gt;&lt;/li&gt;</code> </pre><br>  Zu einer neueren und modischeren Option: <br><br><pre> <code class="plaintext hljs"> &lt;li&gt;&lt;a href="{{route('create_album_form')}}"&gt;  &lt;/a&gt;&lt;/li&gt;</code> </pre><br>  Andererseits funktionierte die vorherige Version auf 6 Laravel.  Wir haben also bereits eine Form, in der der Benutzer Fotos zum Album hinzuf√ºgen kann, und es gibt die Hauptansicht unseres Albums.  Als n√§chstes m√ºssen wir einen Controller hinzuf√ºgen, der f√ºr die Verarbeitung eines einzelnen Fotos verantwortlich ist. <br><br>  Also erstellen wir einen Controller, der f√ºr die Arbeit mit einzelnen Fotos verantwortlich ist: <br><br><pre> <code class="plaintext hljs"> php artisan make:controller ImageController</code> </pre><br>  Also, was sollte in uns sein: <br><br><pre> <code class="php hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Controllers</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Illuminate</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Illuminate</span></span>\<span class="hljs-title"><span class="hljs-title">Support</span></span>\<span class="hljs-title"><span class="hljs-title">MessageBag</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Validator</span></span>; <span class="hljs-comment"><span class="hljs-comment">//       use App\Album; use App\Image; use Illuminate\Support\Str; class ImageController extends Controller { public function getForm($id) { $album = Album::find($id); return view('addimage') -&gt;with('album',$album); //  ,          } public function postAdd(Request $request) { //    ,       $rules = [ 'album_id' =&gt; 'required|numeric|exists:albums,id', 'image'=&gt;'required|image' ]; $input = ['album_id' =&gt; null]; $validator = Validator::make($request-&gt;all(), $rules); if($validator-&gt;fails()){ return redirect()-&gt;route('add_image', ['id' =&gt; $request-&gt;get('album_id')])-&gt;withErrors($validator)-&gt;withInput(); } $file = $request-&gt;file('image'); //   $random_name = Str::random(8); //  $destinationPath = 'albums/'; $extension = $file-&gt;getClientOriginalExtension(); $filename=$random_name.'_album_image.'.$extension; $uploadSuccess = $request-&gt;file('image')-&gt;move($destinationPath, $filename); Image::create(array( 'description' =&gt; $request-&gt;get('description'), //   'image' =&gt; $filename, //   'album_id'=&gt; $request-&gt;get('album_id') //         )); return redirect()-&gt;route('show_album',['id'=&gt;$request-&gt;get('album_id')]); } public function getDelete($id) //       { $image = Image::find($id); $image-&gt;delete(); return redirect()-&gt;route('show_album',['id'=&gt;$image-&gt;album_id]); } //       public function postMove(Request $request) { $rules = array( 'new_album' =&gt; 'required|numeric|exists:albums,id', 'photo'=&gt;'required|numeric|exists:images,id' ); //    $validator = Validator::make($request-&gt;all(), $rules); if($validator-&gt;fails()){ return redirect()-&gt;route('index'); } $image = Image::find($request-&gt;get('photo')); $image-&gt;album_id = $request-&gt;get('new_album'); $image-&gt;save(); return redirect()-&gt;route('show_album', ['id'=&gt;$request-&gt;get('new_album')]); } }</span></span></code> </pre><br><img src="https://habrastorage.org/webt/jp/0h/e_/jp0he_0gbimkbbxjcwm83x39pfs.png"><br><br><h3>  Registrierung und Autorisierung </h3><br>  Im Moment ist unsere Bewerbung fast fertig.  Wir m√ºssen jedoch noch die M√∂glichkeit verbessern, uns in unserer Anwendung zu registrieren, sich abzumelden und sich bei einem vorhandenen Konto anzumelden. <br><br>  Im letzten Teil haben wir bereits gezeigt, wie unsere <code>includes/nav.blade.php</code> aussieht.  Weil  Wir m√∂chten, dass die Schaltfl√§chen <b>Anmelden</b> und <code></code> angezeigt werden, wenn sich der Benutzer noch nicht registriert hat, und die Schaltfl√§che <b>Abmelden,</b> wenn er bei uns registriert ist. <br><br>  So sehen wir uns nun die Liste in <code>includes/nav.blade.php</code> : <br><br><pre> <code class="plaintext hljs"> &lt;ul class="nav navbar-nav"&gt; @if (Auth::check()) &lt;li&gt; &lt;button type="button" class="btn btn-primary"&gt; &lt;!--   ,  -&gt;   --&gt; {{{ Auth::user()-&gt;name}}} &lt;/button&gt; &lt;/li&gt; &lt;li&gt;&lt;a href="{{route('create_album_form')}}"&gt;  &lt;/a&gt;&lt;/li&gt; @else &lt;!--    --&gt; &lt;li&gt;&lt;a href="{{route('register')}}"&gt;&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href="{{route('login')}}"&gt;&lt;/a&gt;&lt;/li&gt; @endif @if (Auth::check()) &lt;!--  ,       --&gt; &lt;!--      --&gt; &lt;li&gt; &lt;a href="{{url('/logout') }}" onclick="event.preventDefault(); document.getElementById('logout-form').submit();"&gt;  &lt;/a&gt; &lt;form id="logout-form" action="{{ url('/logout') }}" method="POST" style="display: none;"&gt; {{ csrf_field() }} &lt;/form&gt; &lt;/li&gt; @endif &lt;/ul&gt;</code> </pre><br>  Mit der <code>Auth::check</code> Konstruktion und der Elementar-Funktion <code>if else</code> wir √Ñnderungen in unserer <code>view</code> vornehmen, je nachdem, ob unser Benutzer registriert ist oder nicht. <br><br>  Mit √Ñnderungen an der <code>view</code> vor dem Erstellen des Modells und der Steuerung laufen wir jedoch der Engine ein wenig voraus.  Um unsere Authentifizierung vorzunehmen, werden wir alle vorgefertigten und schnellen L√∂sungen verwenden, die in Laravel 6 enthalten sind. <br><br>  Also, √ºber das <i>Benutzermodell</i> - wir werden das im Lieferumfang enthaltene verwenden.  Einerseits reicht es f√ºr eine vollwertige Bewerbung eindeutig nicht aus, andererseits m√∂chte ich mich nicht auf den Umfang einer bestimmten Bewerbung beschr√§nken.  Was f√ºr eine Galerie willst du?  Wo kann ein Benutzer seine eigenen privaten Alben erstellen, auf die niemand zugreifen kann?  Oder wo teilen alle ihre Fotos?  Wir werden keine Einschr√§nkungen in unserer Anwendung haben - ich denke, der Leser wird sie ohne Probleme f√ºr seinen Geschmack und seine Farbe fertigstellen k√∂nnen. <br><br>  In Laravel 6 ist das Erstellen der Authentifizierung noch einfacher geworden.  Wir gehen zur Kommandozeile unserer Anwendung: <br><br><pre> <code class="plaintext hljs"> composer require laravel/ui ‚Äîdev</code> </pre><br>  Welches gibt uns die notwendigen Pakete.  Jetzt erstellen: <br><br><pre> <code class="plaintext hljs"> php artisan ui:auth</code> </pre><br>  Was gibt uns dieses Team?  Erstens haben wir einen neuen <code>auth</code> Ordner in <code>resources/views</code> , in dem wir alle <code>views</code> , die erforderlich sind, um den Benutzer zu autorisieren und zu registrieren: <code>login</code> , <code>register</code> und <code>verify</code> .  Es gibt auch einen Unterordner f√ºr <code>passwords</code> , in dem Kennw√∂rter zur√ºckgesetzt und wiederhergestellt werden.  Im Ordner " <code>HomeController</code> <code>Http/Controllers</code> " befindet sich der <code>HomeController</code> , der ben√∂tigt wird, um nach der Benutzerregistrierung zur Startseite umzuleiten.  Wir werden auch ein Unterordner- <code>app.blade.php</code> , das <code>app.blade.php</code> enth√§lt, das wir heute nicht analysieren werden, aber es kann eine hervorragende Basis f√ºr eine von Grund auf neu erstellte Anwendung sein. <br><br>  Generierte Blade-Vorlagen haben bereits ein anf√§ngliches Layout, das auf <code>Bootstrap</code> zugeschnitten ist.  Wir haben es bereits in <code>header.blade.php</code> . <br>  Au√üerdem haben wir ein bisschen Routing in <code>routes/web.php</code> .  Die folgenden Zeilen wurden hinzugef√ºgt: <br><br><pre> <code class="plaintext hljs"> Auth::routes(); Route::get('/home', 'HomeController@index')-&gt;name('home'); Route::post('/logout', 'Auth\LoginController@logout')-&gt;name('logout');</code> </pre><br>  Der Pfad nach <code>home</code> automatisch generiert, und ich habe die Umleitung durchgef√ºhrt, um mich <code>logout</code> . <br><br>  Damit Ihr Layout an den generierten Vorlagen arbeiten kann, verbinden wir unser <code>nav</code> und unseren <code>header</code> mit diesen: <br><br><pre> <code class="plaintext hljs"> @include('includes.header') &lt;body&gt; @include('includes.nav') @extends('layouts.app')</code> </pre><br>  Gro√üartig, jetzt ist alles fertig.  Versuchen Sie sich zu registrieren.  Die Passwortbest√§tigung sollte auch funktionieren: <br><br><img src="https://habrastorage.org/webt/6n/h6/0l/6nh60lmhlkzsm1wqrvhcrhkqf9k.png"><br><br><img src="https://habrastorage.org/webt/2q/zu/z0/2qzuz0pqdygk5cdkvph9dh2m9d0.png"><br><br>  In Zukunft kann der Benutzer ausw√§hlen, zu welcher Seite des Dienstes er gehen m√∂chte (oder der Leser kann selbst eine Weiterleitung vornehmen, dies ist nicht kompliziert genug).  Wir m√ºssen nur ein kleines Detail korrigieren: Damit nur registrierte und autorisierte Benutzer unsere wertvollen Alben sehen k√∂nnen. <br><br>  Zu diesem Zweck f√ºgen wir unserem Routing eine Bedingung hinzu, damit sich der Benutzer anmeldet, um auf die Alben zuzugreifen. <br><br>  Aktualisierung unserer <code>web.php</code> : <br><br><pre> <code class="plaintext hljs"> Route::get('/', array('as' =&gt; 'index','uses' =&gt; 'AlbumsController@getList')) -&gt;middleware('auth');; //middleware     http    Route::get('/createalbum', array('as' =&gt; 'create_album_form','uses' =&gt; 'AlbumsController@getForm')) -&gt;middleware('auth');; //    Route::post('/createalbum', array('as' =&gt; 'create_album','uses' =&gt; 'AlbumsController@postCreate')) -&gt;middleware('auth');; //   Route::get('/deletealbum/{id}', array('as' =&gt; 'delete_album','uses' =&gt; 'AlbumsController@getDelete')) -&gt;middleware('auth');; //   Route::get('/album/{id}', array('as' =&gt; 'show_album','uses' =&gt; 'AlbumsController@getAlbum')) -&gt;middleware('auth');; //  </code> </pre><br>  Grunds√§tzlich k√∂nnen wir zu diesem Zeitpunkt bereits fertig sein.  Ich √ºberlasse es dem Leser, welchen Antrag er stellen m√∂chte: mit privaten oder mit √∂ffentlichen Alben.  Rein theoretisch kann die Anwendung bereits verwendet werden, wenn Sie die M√∂glichkeit der Registrierung ausgeschlossen und einen Benutzer separat direkt in der Datenbank erstellt haben - beispielsweise, wenn Sie und Ihre Kollegen Ihre privaten Alben organisieren und aus irgendeinem Grund keine anderen Dienste nutzen m√∂chten. <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit!  Wie immer n√ºtzliche Links: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Informationen zum Erstellen einer Autorisierung in Laravel 6</a> </li><li>  <a href="">Coole Bibliothek, wenn Sie noch mehr vorgefertigte Autorisierungsl√∂sungen in der Anwendung ben√∂tigen</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473114/">https://habr.com/ru/post/de473114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473094/index.html">Erstaunliche Entwicklergeschichten, Teil 5: Geheimnisse des Universums</a></li>
<li><a href="../de473096/index.html">Erweiterte Datenstrukturen. Erster Teil: Directional Acyclic Graph</a></li>
<li><a href="../de473098/index.html">Kompilieren von FFmpeg zu WebAssembly (= ffmpeg.js): Teil 1 - Kochen</a></li>
<li><a href="../de473100/index.html">Die asynchrone Kommunikation ist der eigentliche Grund, warum Remote-Arbeit effizienter ist.</a></li>
<li><a href="../de473108/index.html">Agulare Komponenten im Winkel</a></li>
<li><a href="../de473120/index.html">Der Entwickler m√∂chte zum Start gehen. Was tun mit dem Arbeitgeber?</a></li>
<li><a href="../de473124/index.html">Wie wir Markov-Ketten verwenden, um L√∂sungen zu bewerten und Fehler zu finden. Mit Python Script</a></li>
<li><a href="../de473128/index.html">FutureVSReal - bei # X5TechFutureNight</a></li>
<li><a href="../de473130/index.html">Geschichte der Videoprozessoren: 1976 - 1995</a></li>
<li><a href="../de473134/index.html">Kompilieren von FFmpeg zu WebAssembly (= ffmpeg.js): Teil 2 - Kompilieren mit Emscripten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>