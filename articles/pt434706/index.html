<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéôÔ∏è ‚õÖÔ∏è üßôüèæ UDB. O que √© isso? Parte 3. Datapath FIFO üíÖüèº ‚ö∞Ô∏è üí™üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos a traduzir a documenta√ß√£o propriet√°ria do Cypress para blocos UDB. Al√©m disso, tudo coincide muito bem. Para continuar o artigo pr√°tico so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UDB. O que √© isso? Parte 3. Datapath FIFO</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434706/"><img src="https://habrastorage.org/webt/et/v5/rr/etv5rr-xdmsl0tyw4vtp_doh75k.jpeg"><br><br>  Continuamos a traduzir a documenta√ß√£o propriet√°ria do Cypress para blocos UDB.  Al√©m disso, tudo coincide muito bem.  Para continuar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo pr√°tico sobre UDB, voc√™</a> precisar√° usar o FIFO e, na parte te√≥rica, chegamos √† pr√≥pria descri√ß√£o deles.  Portanto, come√ßamos a estud√°-los em detalhes. <br><a name="habracut"></a><br>  O conte√∫do geral do ciclo ‚ÄúUDB.  O que √© isso? " <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1. Introdu√ß√£o.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pld.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2. Datapath.</a> <br>  Parte 3. Datapath FIFO.  (Artigo atual) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 4. Datapath ALU.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 5. Caminho de Dados.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pequenas coisas √∫teis.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 6. M√≥dulo de gerenciamento e status.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 7. M√≥dulo de controle de tempo e redefini√ß√£o</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 8. Endere√ßando UDB</a> <br><br><h2>  21.3.2.2 FIFO do Datapath </h2><br><h3>  Modos e configura√ß√µes FIFO </h3><br>  Cada buffer FIFO possui v√°rios modos e configura√ß√µes operacionais dispon√≠veis: <br><br>  Tabela 21-2.  Modos e configura√ß√µes FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Mode </th><th>  Descri√ß√£o do produto </th></tr><tr><td>  Entrada / sa√≠da <br>  (Buffer de entrada / sa√≠da) </td><td>  No modo de buffer de entrada, a CPU ou DMA grava <br>  dados no FIFO e o Datapath os l√™.  No modo <br>  dados do buffer de sa√≠da entram no FIFO de <br>  Datapath e os l√™ de l√° CPU ou DMA. </td></tr><tr><td>  Buffer √∫nico <br>  (Buffer √∫nico) </td><td>  O FIFO funciona como um buffer √∫nico sem status. <br>  Os dados registrados no FIFO s√£o imediatamente leg√≠veis e podem <br>  ser substitu√≠do a qualquer momento. </td></tr><tr><td>  N√≠vel / borda <br>  (N√≠vel / Delta) </td><td>  O par√¢metro respons√°vel por carregar o FIFO do Datapath, <br>  pode ser acionado por n√≠vel ou diferencial. </td></tr><tr><td>  Normal / r√°pido <br>  (Normal / r√°pido) </td><td>  Par√¢metro respons√°vel por carregar o FIFO da fonte <br>  Caminho de dados: √© cronometrado na frequ√™ncia do caminho de dados selecionado. <br>  fonte de rel√≥gio (normal) ou frequ√™ncia de barramento (r√°pida). <br>  Isso permite capturar na frequ√™ncia mais alta. <br>  no sistema (frequ√™ncia do barramento), independentemente da frequ√™ncia do rel√≥gio do Datapath. </td></tr><tr><td>  Captura de software <br>  (Captura de software) </td><td>  Quando este modo est√° ativado e o FIFO est√° no modo <br>  buffer de sa√≠da, leia CPU ou DMA relacionado <br>  bateria (A0 para F0, A1 para F1), inicializa <br>  Transfira sincronicamente o valor da bateria para FIFO. <br>  O valor capturado √© imediatamente leg√≠vel no FIFO. <br>  Se o suporte de encadeamento estiver ativado, <br>  a opera√ß√£o seguir√° a cadeia at√© o bloco MS para que <br>  Datapath poderia executar leitura at√¥mica de multibyte <br>  valores. </td></tr><tr><td>  Ass√≠ncrono <br>  (Ass√≠ncrono) </td><td>  Quando os rel√≥gios do Datapach e do barramento do sistema n√£o s√£o <br>  sincronizados, os sinais de status FIFO podem ser <br>  encaminhado para o resto do caminho de dados <br>  diretamente, com freq√º√™ncia da freq√º√™ncia do rel√≥gio do Datapath, <br>  ou com sincroniza√ß√£o dupla, no modo ass√≠ncrono. </td></tr><tr><td>  Polaridade do rel√≥gio independente <br>  (Polaridade do rel√≥gio independente) </td><td>  Cada FIFO possui um bit de controle para inverter <br>  Polaridade do rel√≥gio FIFO versus rel√≥gio do Datapath. </td></tr></tbody></table></div><br>  A Figura 21-7 mostra as op√ß√µes de configura√ß√£o poss√≠veis para o par FIFO, dependendo dos modos de entrada / sa√≠da selecionados para cada um deles.  Se um FIFO estiver no modo de entrada e outro no modo de sa√≠da, obteremos a configura√ß√£o RX / TX.  Um exemplo t√≠pico em que essa configura√ß√£o √© necess√°ria √© o controlador de barramento SPI.  A configura√ß√£o <b>Dual Capture</b> (ambos os FIFOs est√£o configurados para sa√≠da) fornece captura independente dos pares A0 e A1 ou duas capturas independentes dos registros A0 ou A1.  Finalmente, no modo <b>Dual Buffer</b> (ambos na entrada), √© poss√≠vel usar um par de registradores ou dois registradores independentes para carregar ou comparar. <br><br><img src="https://habrastorage.org/webt/jw/ii/lz/jwiilz_qkbulrpqu4n1xahxnsjq.png"><br><br>  Figura 21-7.  Configura√ß√µes FIFO. <br><br>  A Figura 21-8 mostra em detalhes as fontes e receptores do FIFO. <br><br><img src="https://habrastorage.org/webt/lj/rf/4l/ljrf4lqn5lyyq2xsi6sml5ywi5o.png"><br><br>  Figura 21-8.  Fontes e receptores FIFO. <br><br>  Quando o FIFO opera no modo de buffer de entrada, a fonte √© o barramento do sistema e os receptores s√£o os registros Dx e Ax.  Ao trabalhar no modo de buffer de sa√≠da, as fontes s√£o os registros Ax e ALU e o receptor √© o barramento do sistema.  A sele√ß√£o do multiplexador √© definida estaticamente no registro de configura√ß√£o do UDB CFG15, conforme mostrado na tabela para F0_INSEL [1: 0] ou F1_INSEL [1: 0]: <br><br>  Tabela 21-3.  Um conjunto de multiplexadores FIFO no registro de configura√ß√£o do UDB. <br><div class="scrollable-table"><table><tbody><tr><th>  Fx_INSEL [1: 0] </th><th>  Descri√ß√£o do produto </th></tr><tr><td>  00 </td><td>  Modo buffer de entrada: o barramento do sistema grava no FIFO, enquanto o receptor <br>  FIFO √© Ax ou Dx. </td></tr><tr><td>  01 </td><td>  Modo buffer de sa√≠da: a fonte FIFO √© A0 e o receptor <br>  FIFO - barramento do sistema. </td></tr><tr><td>  10 </td><td>  Modo Buffer de Sa√≠da: A fonte do FIFO √© A1 e o receptor <br>  FIFO - barramento do sistema. </td></tr><tr><td>  11 </td><td>  Modo Buffer de Sa√≠da: A fonte FIFO √© uma sa√≠da ALU e o receptor <br>  FIFO - barramento do sistema. </td></tr></tbody></table></div><br><h3>  Status FIFO </h3><br>  Cada FIFO gera dois sinais de status, "barramento" e "bloco", que s√£o transmitidos aos recursos de rastreio do UDB por meio do multiplexador de sa√≠da do Datapath.  O status do barramento pode ser usado para interromper ou solicitar uma leitura / grava√ß√£o de DMA ao FIFO.  O estado "bloco" √© destinado principalmente a passar o estado FIFO para entidades internas do UDB.  a finalidade dos bits de status depende da dire√ß√£o configurada (Fx_INSEL [1: 0]) e dos bits de n√≠vel FIFO.  Os bits de n√≠vel FIFO (Fx_LVL) s√£o definidos no registro de Controle Auxiliar no espa√ßo de registro de trabalho.  As op√ß√µes de status s√£o mostradas na tabela a seguir: <br><br>  Tabela 21-4.  Op√ß√µes de status FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Fx_INSEL [1: 0] </th><th>  Fx_lvl </th><th>  Condi√ß√£o </th><th>  Signal </th><th>  Descri√ß√£o do produto </th></tr><tr><td>  Entrar </td><td>  0 0 </td><td>  N√£o est√° cheio </td><td>  Status do barramento </td><td>  Armado quando existe um FIFO <br>  coloque por pelo menos um byte. </td></tr><tr><td>  Entrar </td><td>  1 </td><td>  Devastado <br>  pelo menos <br>  metade </td><td>  Status do barramento </td><td>  Armado quando existe um FIFO <br>  espa√ßo para pelo menos 2 bytes. </td></tr><tr><td>  Entrar </td><td>  N / A </td><td>  Est√° vazio </td><td>  Status do bloco </td><td>  Armado quando nenhum FIFO <br>  nem um √∫nico byte. <br>  Quando o FIFO n√£o est√° vazio, o Datapath <br>  pode ler bytes. <br>  Quando o FIFO est√° vazio, o Datapath <br>  pode ser capaz <br>  expectativas geram <br>  estado de devasta√ß√£o. </td></tr><tr><td></td></tr><tr><td>  Conclus√£o </td><td>  0 0 </td><td>  N√£o est√° vazio </td><td>  Status do barramento </td><td>  Armado quando em FIFO <br>  pelo menos 1 byte dispon√≠vel <br>  para leitura. </td></tr><tr><td>  Conclus√£o </td><td>  1 </td><td>  Est√° cheio <br>  pelo menos <br>  metade </td><td>  Status do barramento </td><td>  Armado quando dispon√≠vel no FIFO <br>  pelo menos 2 bytes para ler. </td></tr><tr><td>  Conclus√£o </td><td>  N / A </td><td>  Est√° cheio </td><td>  Status do bloco </td><td>  Armado quando o FIFO est√° cheio. <br>  Quando o FIFO n√£o est√° completo, o Datapath <br>  pode escrever bytes em FIFO. <br>  Quando FIFO est√° cheio, Datapath <br>  pode estar em <br>  em espera ou <br>  gerar condi√ß√£o <br>  estouro. </td></tr></tbody></table></div><br><h3>  Ilustra√ß√£o de trabalho FIFO </h3><br>  A Figura 21-9 mostra uma sequ√™ncia t√≠pica de leitura e escrita, bem como a gera√ß√£o de status associados a essas opera√ß√µes.  Na figura, a leitura e a escrita ocorrem em momentos diferentes, mas podem ser realizadas simultaneamente. <br><br><img src="https://habrastorage.org/webt/pp/kr/-p/ppkr-pcweqaiz61mam-o3d4oeti.png"><br><br>  Figura 21-9 Opera√ß√£o dos receptores FIFO. <br><br><h3>  Modo r√°pido FIFO (FIFO R√ÅPIDO) </h3><br>  Quando o FIFO est√° no modo de buffer de sa√≠da, a opera√ß√£o de inicializa√ß√£o do FIFO normalmente usa a frequ√™ncia do clock do Datapath selecionado para registrar o sinal de grava√ß√£o.  Como mostra a Figura 21-10, ao selecionar o modo r√°pido FIFO (FIFO FAST), voc√™ pode selecionar a frequ√™ncia do barramento para esta opera√ß√£o espec√≠fica.  Quando usada em conjunto com o modo <b>N√≠vel / Borda = Borda</b> , essa opera√ß√£o reduz o atraso da transmiss√£o da bateria para o FIFO do per√≠odo do rel√≥gio do Datapath para o per√≠odo do rel√≥gio do barramento, pois a frequ√™ncia do barramento pode ser muito maior.  Isso permite que a CPU ou o DMA leia o resultado FIFO recebido com um atraso m√≠nimo. <br><br>  Conforme mostrado na Figura 21-10, a opera√ß√£o de inicializa√ß√£o r√°pida √© executada independentemente do rel√≥gio atual do Datapath, no entanto, o uso da velocidade do rel√≥gio do barramento pode aumentar o consumo de energia. <br><br><img src="https://habrastorage.org/webt/au/4c/0i/au4c0iq5pfcnnebsvxxq1hmf-zu.png"><br><br>  Figura 21-10.  Receptores de configura√ß√£o r√°pida FIFO. <br><br><h3>  Modo de grava√ß√£o FIFO Edge / Level (diferencial / n√≠vel) </h3><br>  Existem dois modos de grava√ß√£o no FIFO do Datapath.  No primeiro modo, os dados s√£o transferidos de forma s√≠ncrona das baterias para o FIFO.  O sinal de controle desse registro (FX_LD) geralmente √© gerado por uma m√°quina de estado ou por uma condi√ß√£o sincronizada com o rel√≥gio do Datapath.  A grava√ß√£o no FIFO ser√° realizada em qualquer ciclo em que o sinal de controle de carga de entrada seja '1'.  No segundo modo, o FIFO √© usado para capturar os valores da bateria em resposta a uma margem positiva do sinal FX_LD.  Nesse modo, o formato do sinal √© arbitr√°rio (no entanto, seu per√≠odo deve ser igual a pelo menos um ciclo de rel√≥gio do Datapath).  Um exemplo desse modo √© capturar o valor da bateria usando a entrada do p√© externo como gatilho.  Uma limita√ß√£o deste modo √© que o par√¢metro de entrada deve retornar ao valor '0' pelo menos um ciclo antes que outra diferen√ßa positiva seja detectada. <br><br>  A Figura 21-11 mostra a implementa√ß√£o do modo de detec√ß√£o diferencial na entrada FX_LD.  O modo de ambos os FIFOs no UDB √© controlado pelo mesmo bit, alternando esta op√ß√£o.  Observe que a detec√ß√£o diferencial √© cronometrada em uma frequ√™ncia igual √† frequ√™ncia do FIFO selecionado. <br><br><img src="https://habrastorage.org/webt/xv/hq/u8/xvhqu8l5xwjgn-4aaww9ru8tkli.png"><br><br>  Figura 21-11.  Detec√ß√£o diferencial para receptores de grava√ß√£o FIFO internos. <br><br><h3>  Modo de captura de software FIFO </h3><br>  Um requisito comum e importante √© permitir que a CPU e o DMA leiam de forma confi√°vel o conte√∫do da bateria durante a opera√ß√£o normal.  Isso √© feito usando a captura de software e ativado usando o bit de configura√ß√£o FIFO Cap.  Este bit se aplica a ambos os FIFOs no UDB, mas s√≥ funciona quando o FIFO est√° no modo de buffer de sa√≠da.  Ao usar a captura de software, F0 deve ler de A0 e F1 de A1. <br><br>  Como mostra a Figura 21-12, a leitura da bateria inicia a grava√ß√£o no FIFO a partir da bateria.  O sinal √© vinculado em uma cadeia, de modo que a leitura de um byte espec√≠fico captura ao mesmo tempo os valores da bateria de todos os UDBs da cadeia.  Isso permite que o processador de 8 bits leia com √™xito 16 bits ou mais ao mesmo tempo.  Os dados retornados ao ler a bateria devem ser ignorados e o valor capturado pode ser lido imediatamente no FIFO. <br><br>  O sinal FX_LD rastreado, que gera a carga FIFO, √© enviado para o termo OR junto com o sinal de captura do programa.  Quando a captura de hardware e software √© usada ao mesmo tempo, o resultado pode ser imprevis√≠vel.  Como regra, essas fun√ß√µes devem ser mutuamente exclusivas, no entanto, a captura de hardware e software pode ser usada simultaneamente nas seguintes condi√ß√µes: <br><br><ul><li>  O modo de rel√≥gio de captura FIFO est√° definido como FIFO FAST. </li><li>  O modo de grava√ß√£o FIFO est√° definido como FIFO EDGE. </li></ul><br>  Sob as condi√ß√µes descritas acima, as capturas de hardware e software funcionam essencialmente da mesma maneira e, durante qualquer ciclo de clock do barramento, qualquer um desses sinais pode desencadear uma captura. <br><br>  Tamb√©m √© recomend√°vel que voc√™ limpe o FIFO de destino no c√≥digo do programa (registro ACTL) antes do in√≠cio da captura do programa.  Gra√ßas a isso, os indicadores de leitura e grava√ß√£o FIFO ser√£o configurados para um estado conhecido. <br><br><img src="https://habrastorage.org/webt/0n/c7/zg/0nc7zgc7je5sn3emupt2ij7kdc0.png"><br><br>  Figura 21-12.  Configura√ß√£o de captura de software. <br><br>  <i><b>Nota do tradutor:</b></i> <i><br></i>  <i>Durante muito tempo, n√£o consegui entender o significado desta se√ß√£o.</i>  <i>Por um longo tempo, tive certeza de que a se√ß√£o foi escrita para o PSoC3, cujo n√∫cleo de oito bits n√£o pode acessar mais do que byte.</i>  <i>Mas, ao criar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">oitava parte da tradu√ß√£o</a> , descobriu-se que, mesmo no PSoC5LP, para todo o n√∫cleo do processador ARM de 32 bits, o acesso aos registros UDB em funcionamento pode ser realizado no modo de oito ou dezesseis bits.</i>  <i>A julgar pelo documento, n√£o mais.</i>  <i>√â aqui que a funcionalidade descrita √© √∫til.</i> <i><br></i> <br><br><h3>  Bocados de controle FIFO </h3><br>  O registro do Controle Auxiliar, que pode ser usado para controlar o FIFO durante a opera√ß√£o normal, cont√©m 4 bits. <br><br>  Os bits FIFO0 CLR e FIFO1 CLR s√£o usados ‚Äã‚Äãpara redefinir ou limpar FIFOs.  Quando um desses bits recebe o valor '1', o FIFO associado √© redefinido.  O bit deve ser restaurado ao seu valor original ('0') para que o FIFO continue trabalhando.  Se o valor do bit permanecer igual a um, o FIFO correspondente ser√° desativado e funcionar√° como um buffer de byte √∫nico sem status.  Os dados podem ser gravados no FIFO, os dados s√£o imediatamente leg√≠veis e podem ser substitu√≠dos a qualquer momento.  A dire√ß√£o dos dados com os bits de configura√ß√£o FX INSEL [1: 0] ainda pode ser definida. <br><br>  Os bits FIFO0 LVL e FIFO1 LVL determinam o n√≠vel em que o FIFO armar√° o bit de status <b>"bus"</b> (quando o barramento l√™ ou grava no FIFO).  Ou seja, o status do <b>"barramento"</b> depende da dire√ß√£o especificada, conforme mostrado na tabela abaixo. <br><br>  Tabela 21-5.  Bocados de controle de n√≠vel FIFO <br><div class="scrollable-table"><table><tbody><tr><th>  FIFO LVL </th><th>  Modo de buffer de entrada <br>  (o barramento grava no FIFO) </th><th>  Modo de buffer de sa√≠da <br>  (o barramento l√™ do FIFO) </th></tr><tr><td>  0 0 </td><td>  N√£o est√° cheio <br>  Pelo menos 1 byte pode ser gravado. </td><td>  N√£o est√° vazio <br>  Pelo menos 1 byte pode ser lido. </td></tr><tr><td>  1 </td><td>  Esvazie pelo menos a meio caminho <br>  Pelo menos 2 bytes podem ser gravados. </td><td>  Meio cheio <br>  Pelo menos 2 bytes podem ser lidos. </td></tr></tbody></table></div><br><h3>  Opera√ß√£o ass√≠ncrona FIFO </h3><br>  A Figura 21-13 mostra o princ√≠pio da opera√ß√£o ass√≠ncrona de FIFO.  Como exemplo, imagine que F0 opere no modo buffer de entrada e F1 no modo buffer de sa√≠da, que √© uma configura√ß√£o t√≠pica dos registros TX e RX. <br><br><img src="https://habrastorage.org/webt/ct/ei/lo/cteilo6ne7nn0ah0hprjtkbawvo.png"><br><br>  Figura 21-13.  Opera√ß√£o FIFO ass√≠ncrona. <br><br>  No lado TX, a m√°quina de estado Datapath usa o sinalizador <b>Vazio</b> para determinar se existem bytes dispon√≠veis para recebimento.  O valor <b>Vazio</b> √© definido de forma s√≠ncrona com a m√°quina de estado Datapath e √© limpo de forma ass√≠ncrona devido √† grava√ß√£o do barramento.  Ap√≥s a limpeza, o status √© novamente sincronizado com a m√°quina de estado do Datapath. <br><br>  No lado do RX, a m√°quina de estado do RX usa <b>Full</b> para determinar se h√° espa√ßo livre para gravar no FIFO.  O valor <b>Total</b> √© configurado de forma s√≠ncrona com a m√°quina de estado Datapath e √© limpo de forma ass√≠ncrona devido √† leitura do barramento.  Ap√≥s a limpeza, o status √© novamente sincronizado com a m√°quina de estado do Datapath. <br><br>  Um bit FIFO ASYNCH √© usado para habilitar esse m√©todo de sincroniza√ß√£o; ap√≥s a ativa√ß√£o, esse m√©todo √© aplicado aos dois FIFOs. <br><br>  Aplica-se apenas ao status do <b>bloco</b> , pois √© assumido que o status do <b>barramento</b> √© naturalmente sincronizado pelo processo de interrup√ß√£o. <br><br>  Tabela 21-6.  <b>Bloquear</b> op√ß√µes de sincroniza√ß√£o de status FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Ass√≠ncrono </th><th>  ADICIONAR SINCRONIZA√á√ÉO </th><th>  Opera√ß√£o </th><th>  Modelo de uso </th></tr><tr><td>  0 0 </td><td>  0 0 </td><td>  Sincronizado com o tempo do barramento </td><td>  Altera√ß√µes no status de grava√ß√£o / leitura da CPU <br>  ocorrem na frequ√™ncia do barramento.  Pode <br>  use para o m√≠nimo <br>  atrasos se voc√™ pode conseguir <br>  Frequ√™ncias do rel√≥gio do datapatch <br>  igual √† frequ√™ncia do barramento. </td></tr><tr><td>  0 0 </td><td>  1 </td><td>  Ressincroniza√ß√£o de frequ√™ncia <br>  pneus √† frequ√™ncia do Datapath. </td><td>  Este modo deve ser <br>  modo de opera√ß√£o padr√£o.  Quando <br>  A CPU realiza opera√ß√µes de leitura / grava√ß√£o, <br>  mudan√ßa de status ser√° ressincronizada <br>  com a frequ√™ncia usada no Datapath. <br>  Ele permite que voc√™ use o <br>  Per√≠odo de frequ√™ncia do caminho de dados a ser configurado <br>  sinal para l√≥gica UDB. </td></tr><tr><td>  1 </td><td>  0 0 </td><td>  Reservado </td><td>  - </td></tr><tr><td>  1 </td><td>  1 </td><td>  Sincroniza√ß√£o de dupla frequ√™ncia <br>  pneus √† frequ√™ncia do Datapath. </td><td>  Quando o rel√≥gio pulsa para o Datapath <br>  n√£o apenas n√£o sincronizado com <br>  sist√™mica em frequ√™ncia, mas tamb√©m <br>  produzido separadamente <br>  gerador independente <br>  esse par√¢metro pode ser <br>  usado para o dobro <br>  opera√ß√µes de sincroniza√ß√£o <br>  ler e escrever CPU <br>  com rel√≥gio do Datapath. </td></tr></tbody></table></div><br><h3>  Excesso de FIFO durante a opera√ß√£o </h3><br>  Para a implementa√ß√£o segura de opera√ß√µes de leitura e grava√ß√£o internas (Datapath) e externas (CPU ou DMA), devem ser utilizados sinais de status FIFO.  N√£o h√° prote√ß√£o integrada contra condi√ß√µes de esvaziamento e transbordamento.  Se o FIFO estiver cheio e as opera√ß√µes de grava√ß√£o subseq√ºentes forem executadas (estouro), os novos dados substituir√£o o in√≠cio do FIFO (os dados que est√£o sendo produzidos no momento s√£o os pr√≥ximos na fila de leitura).  Se o FIFO estiver vazio e as leituras subsequentes forem executadas (esvaziamento ou exaust√£o), o valor da leitura ser√° indefinido.  Os indicadores FIFO permanecem precisos, independentemente do fluxo insuficiente e insuficiente. <br><br><h3>  Invers√£o do Rel√≥gio FIFO </h3><br>  Cada FIFO possui um bit de controle Fx CK INV, respons√°vel pela polaridade do rel√≥gio FIFO Em rela√ß√£o √† polaridade do rel√≥gio Datapath.  Por padr√£o, o FIFO trabalha com a mesma polaridade que o rel√≥gio do Datapath.  Quando esse bit √© 1, o FIFO opera com polaridade reversa em rela√ß√£o ao Datapath.  Isso fornece suporte de protocolo para troca de dados em ambas as frentes, como SPI. <br><br><h3>  Controle FIFO din√¢mico </h3><br>  Normalmente, os FIFOs s√£o configurados estaticamente no modo de buffer de entrada ou no modo de buffer de sa√≠da.  Como alternativa, cada FIFO pode ser configurado para operar em um modo no qual a dire√ß√£o √© controlada dinamicamente (sob a influ√™ncia de sinais externos).  Um bit de configura√ß√£o por FIFO (Fx DYN) √© respons√°vel por ativar este modo.  A Figura 21-14 mostra as configura√ß√µes dispon√≠veis no modo din√¢mico FIFO. <br><br><img src="https://habrastorage.org/webt/ny/ei/vo/nyeivo9hrnmr6vg8tkcbnnkaz8i.png"><br><br>  Figura 21-14.  Modo FIFO din√¢mico. <br><br>  No modo de Acesso Interno, o Datapath pode ler e gravar no FIFO.  Nesta configura√ß√£o, para selecionar a fonte de opera√ß√µes de grava√ß√£o no FIFO, os bits Fx INSEL devem ser definidos como 1. Fx INSEL = 0 (fonte do barramento da CPU) neste modo est√° incorreto, pode apenas assumir os valores 1, 2 ou 3 (A0, A1 ou ALU )  Vale ressaltar que a leitura tem acesso apenas √† bateria apropriada, a dire√ß√£o dos registros de dados neste modo n√£o est√° dispon√≠vel. <br><br>  No modo de acesso externo, a CPU ou o DMA pode ler ou gravar no FIFO. <br><br>  A configura√ß√£o alterna dinamicamente entre o acesso externo e interno, encaminhando sinais do Datapath.  Para isso, os sinais de entrada Datapath d0_load e d1_load s√£o usados.  Vale ressaltar que no modo de controle din√¢mico, d0_load e d1_load n√£o est√£o dispon√≠veis para seu uso normal ao carregar os registros D0 / D1 de F0 / F1.  Os sinais Dx_load podem ser acionados por qualquer sinal de rastreamento, incluindo constantes. <br><br>  Considere um exemplo no qual, come√ßando com o acesso externo (dx_load == 1), a CPU ou o DMA pode gravar um ou mais bytes de dados no FIFO.  Em seguida, ao alternar para o acesso interno (dx_load == 0), o Datapath pode executar opera√ß√µes nos dados.  Depois disso, ao alternar para acesso externo, a CPU ou o DMA pode ler o resultado dos c√°lculos. <br>  Como o Fx INSEL sempre deve ser 01, 10 ou 11 (A0, A1 ou ALU), que corresponde ao "modo de buffer de sa√≠da" durante a opera√ß√£o normal, os sinais de status FIFO t√™m as seguintes defini√ß√µes (dependendo do par√¢metro Fx LVL): <br><br>  Tabela 21-7.  Status FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  Sinal de status </th><th>  Valor </th><th>  Fx LVL = 0 </th><th>  Fx LVL = 1 </th></tr><tr><td>  fx_blk_stat </td><td>  Status do registro </td><td>  FIFO est√° cheio </td><td>  FIFO est√° cheio </td></tr><tr><td>  fx_bus_stat </td><td>  Status de leitura </td><td>  FIFO n√£o est√° completo </td><td>  Meio cheio </td></tr></tbody></table></div><br>  Como o Datapath e a CPU podem gravar e ler a partir de FIFOs, esses sinais n√£o s√£o mais considerados status de bloco e barramento.  O sinal blk_stat √© usado para o status de grava√ß√£o e o sinal bus_stat para o status de leitura <br><br><h2>  21.3.2.3 Status FIFO </h2><br>  Existem quatro sinais de status FIFO, dois para cada FIFO: fifo0_bus_stat, fifo0_blk_stat, fifo1_bus_stat e fifo1_blk_stat.  O significado desses sinais depende da dire√ß√£o do FIFO espec√≠fico, que √© determinado pela configura√ß√£o est√°tica.  O status FIFO √© descrito em detalhes na se√ß√£o <b>21.3.2.2 FIFO do Datapath</b> . <br><br>  Na pr√≥xima parte, passaremos para a an√°lise da Unidade L√≥gica Aritm√©tica (ALU). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434706/">https://habr.com/ru/post/pt434706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434696/index.html">Funcion√°rios de gigantes de TI descobriram como influenciar as pol√≠ticas de suas empresas</a></li>
<li><a href="../pt434698/index.html">Pessimismo sobre multithreading</a></li>
<li><a href="../pt434700/index.html">Vantagens de seguir as guias de estilo ao desenvolver aplicativos Angular</a></li>
<li><a href="../pt434702/index.html">Por que o SSD moderno me trava</a></li>
<li><a href="../pt434704/index.html">Raz√µes para o decl√≠nio no custo do tr√°fego m√≥vel na R√∫ssia e a previs√£o para 2019</a></li>
<li><a href="../pt434708/index.html">HL 2018. Resumo do relat√≥rio ‚ÄúTorne as senhas √≥timas novamente! Como vencer a for√ßa bruta e deixar os hackers sem nada ‚Äù</a></li>
<li><a href="../pt434710/index.html">Blog RUVDS sobre Habr: ano em tr√™s</a></li>
<li><a href="../pt434712/index.html">Terceiro teste de Turing em russo</a></li>
<li><a href="../pt434714/index.html">Sincroniza√ß√£o de solicita√ß√£o de cliente no Spring</a></li>
<li><a href="../pt434716/index.html">Movendo-se para o data center: Prepara√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>