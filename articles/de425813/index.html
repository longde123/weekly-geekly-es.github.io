<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµüèø üë®‚Äçüë©‚Äçüëß‚Äçüë¶ üë¨ CICD: Nahtlose Bereitstellung auf verteilten Clustersystemen ohne Ausfallzeiten üÜñ üì≥ üî≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich poste den zweiten Bericht von unserem ersten Mitap , der im September stattfand. Das letzte Mal, dass Sie lesen (und sehen) konnten, wie Sie mit C...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>CICD: Nahtlose Bereitstellung auf verteilten Clustersystemen ohne Ausfallzeiten</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/425813/">  Ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">poste</a> den zweiten Bericht von unserem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Mitap</a> , der im September stattfand.  Das letzte Mal, dass Sie lesen (und sehen) konnten, wie Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mit Consul Stateful Services</a> von Ivan Bubnov von BIT.GAMES skalieren, und heute werden wir √ºber CICD sprechen.  Genauer gesagt wird unser Systemadministrator Egor Panov dar√ºber berichten, der f√ºr die Verf√ºgbarkeit von Infrastruktur und Diensten in Pixonic verantwortlich ist.  Unter der Cut-Decodierung der Performance. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U6AE8J7q81M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  Zun√§chst ist die Spielebranche riskanter - man wei√ü nie, was genau im Herzen des Spielers versinkt.  Und so schaffen wir viele Prototypen.  Nat√ºrlich erstellen wir Prototypen auf dem Knie von St√∂cken, Seilen und anderen improvisierten Materialien. <br><br>  Es scheint, dass es mit diesem Ansatz im Allgemeinen unm√∂glich ist, etwas zu tun, das dann unterst√ºtzt werden kann.  Aber auch in dieser Phase halten wir fest.  Wir halten an drei S√§ulen fest: <br><br><ol><li>  ausgezeichnete Expertise von Testern; </li><li>  enge Interaktion mit ihnen; </li><li>  die Zeit, die wir zum Testen geben. </li></ol><br>  Wenn wir also unsere Prozesse nicht aufbauen, z. B. Bereitstellung oder CI (kontinuierliche Integration), werden wir fr√ºher oder sp√§ter zu dem Schluss kommen, dass die Testdauer immer l√§nger wird.  Und wir werden entweder alles langsam machen und den Markt verlieren, oder wir werden einfach bei jedem Einsatz explodieren. <br><br>  Der Aufbau eines CICD-Prozesses ist jedoch nicht so einfach.  Einige werden sagen, nun ja, ich werde Jenkins setzen, ich werde schnell etwas anrufen, jetzt habe ich CICD fertig.  Nein, dies ist nicht nur ein Werkzeug, sondern auch eine √úbung.  Beginnen wir in der richtigen Reihenfolge. <br><br><img src="https://habrastorage.org/webt/3e/di/1h/3edi1hvgrx4zntc1usxtekz-09w.png"><br>  Der erste.  In vielen Artikeln wird geschrieben, dass alles in einem Repository aufbewahrt werden muss: Code, Tests, Bereitstellung und sogar das Datenbankschema sowie IDE-Einstellungen, die allen gemeinsam sind.  Wir sind unseren eigenen Weg gegangen. <br><br>  Wir haben verschiedene Repositorys zugewiesen: Bereitstellung in unserem Repository, Tests in einem anderen.  Es funktioniert schneller.  Es passt vielleicht nicht zu Ihnen, aber f√ºr uns ist es viel bequemer.  Da es an dieser Stelle einen wichtigen Punkt gibt: Sie m√ºssen einen einfachen und transparenten Punkt f√ºr alle Trefferfl√ºsse erstellen.  Nat√ºrlich k√∂nnen Sie das fertige irgendwo herunterladen, aber in jedem Fall m√ºssen Sie es selbst optimieren und verbessern.  F√ºr uns lebt eine Bereitstellung beispielsweise von einem eigenen Gitflow, der eher einem GitHub-Flow √§hnelt, und die Serverentwicklung lebt von einem eigenen Gitflow. <br><br>  Der n√§chste Absatz.  Sie m√ºssen einen vollautomatischen Build konfigurieren.  Es ist klar, dass der Entwickler das Projekt in der ersten Phase pers√∂nlich sammelt, es dann mithilfe von SCP pers√∂nlich bereitstellt, selbst startet und an jeden sendet, der es ben√∂tigt.  Diese Option hielt nicht lange an, ein Bash-Skript wurde angezeigt.  Nun, da sich die Umgebung der Entwickler st√§ndig √§ndert, ist ein spezieller dedizierter Build-Server erschienen.  Er lebte sehr lange. W√§hrend dieser Zeit gelang es uns, die Anzahl der Server auf bis zu 500 zu erh√∂hen, Serverkonfigurationen auf Puppet zu konfigurieren, Legacy auf Puppet zu sammeln, Puppet abzulehnen, zu Ansible zu wechseln, und dieser Buildserver lebte weiter. <br><br>  Sie beschlossen, nach zwei Anrufen alles zu √§ndern, sie warteten nicht auf einen dritten.  Die Geschichte ist klar: Der Buildserver ist ein einzelner Fehlerpunkt, und wenn wir etwas bereitstellen mussten, fiel das Rechenzentrum nat√ºrlich vollst√§ndig mit unserem Buildserver zusammen.  Und der zweite Aufruf: Wir mussten die Java-Version aktualisieren - wir haben sie auf dem Build-Server aktualisiert, auf der B√ºhne installiert, alles ist cool, alles ist gro√üartig, und wir mussten sofort einen kleinen Bugfix auf dem Produkt starten.  Nat√ºrlich haben wir vergessen zur√ºckzurollen und alles ist einfach auseinander gefallen. <br><br>  Danach haben sie alles neu geschrieben, sodass der gesamte Build auf absolut jedem TeamCity-Agenten ausgef√ºhrt werden kann, und ihn auf Ansible neu geschrieben, da er auf Ansible konfiguriert wurde. Warum nicht dasselbe Tool auch f√ºr die Bereitstellung verwenden? <br><br>  Die folgende Regel: Je √∂fter Sie sich verpflichten, desto besser.  Und warum?  Weil es ein viertes gibt: Jedes Commit wird gesammelt.  Und in der Tat noch mehr als jedes Commit.  Ich habe bereits gesagt, dass wir TeamCity haben, und es erm√∂glicht Ihnen, ein Commit von Ihrer Lieblings-IDE aus auszuf√ºhren (Sie raten, was ich meine).  Eigentlich schnelles Feedback, alles ist super. <br><br>  Ein defekter Build wird sofort repariert.  Sobald Sie die automatische Bereitstellung eingerichtet haben, m√ºssen Sie die automatische Benachrichtigung in Slack einrichten.  Wir alle wissen sehr gut, dass ein Entwickler nur in dem Moment wei√ü, wie sein Code funktioniert, wenn er ihn schreibt.  Deshalb: die Person hat es herausgefunden - sofort repariert. <br><br>  Wir testen die Umgebung, indem wir Produkte wiederholen.  Es ist ganz einfach, wir haben Ansible und AWX gew√§hlt.  Jemand k√∂nnte fragen, aber was ist mit Docker, Kubernetes, OpenShift, wo alle Probleme, die sofort einsatzbereit sind, schon lange gel√∂st sind?  Ich habe vergessen zu sagen, dass wir Komponenten von Linux und Windows haben.  Und zum Beispiel den Photon-Server, der unter Windows l√§uft, konnten wir erst k√ºrzlich mehr oder weniger normal in einen 10-GB-Docker-Container packen.  Dementsprechend haben wir eine Windows-Anwendung, die nicht gut in einen Container gepackt werden kann.  Es gibt eine Anwendung unter Linux (in Java), die perfekt verpackt ist, aber es gibt keinen Grund daf√ºr. Sie funktioniert √ºberall dort, wo Sie sie ausf√ºhren.  Das ist Java. <br><br>  Als n√§chstes w√§hlten wir zwischen Ansible und Chef.  Beide funktionieren gut mit Windows, aber Ansible hat sich f√ºr uns als viel einfacher herausgestellt.  Als wir AWX bereits installiert hatten, wurde im Allgemeinen alles Feuer.  AWX hat Geheimnisse, Grafiken, Geschichte.  Sie k√∂nnen einem Menschen weit davon entfernt zeigen, dass er sofort alles sieht und alles klar wird. <br><br>  Und Sie m√ºssen den Build immer schnell halten.  Ich wei√ü nicht warum, aber wenn Sie ein neues Projekt starten, vergessen Sie den Buildserver, die Agenten und w√§hlen einen Computer aus, der herumlag - dies ist unser Buildserver.  Es ist unerw√ºnscht, diesen Fehler zu wiederholen, da alles, wor√ºber ich spreche (schnelles Feedback, Pluspunkte) - alles ist nicht so relevant, wenn die Montage auf Ihrem eigenen Laptop viel schneller beginnt als auf einer Art Server-Farm. <br><br><img src="https://habrastorage.org/webt/ll/ab/zl/llabzlqv49woxdlukv36uohavcg.png"><br>  7 Punkte - und wir haben bereits eine Art CI-Prozess aufgebaut.  Gro√üartig  Das folgende Diagramm ist nicht sichtbar, aber auf der Seite befindet sich noch Graylog.  Wer liest unsere Artikel √ºber Habr√©, der hat schon gesehen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wie wir Graylog gew√§hlt haben</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wie man es installiert</a> .  In jedem Fall hilft es, abzulenken, wenn noch ein Problem aufgetreten ist. <br><br><img src="https://habrastorage.org/webt/7d/g7/vo/7dg7vonpatitv6azg812qcycovw.png"><br>  Auf dieser Basis ist es bereits m√∂glich, mit der Bereitstellung fortzufahren. <br><br><img src="https://habrastorage.org/webt/z4/9d/ey/z49deyle1javphwp9unxx8stk24.png"><br>  Aber ich habe bereits im zweiten Absatz √ºber den Einsatz gesprochen, daher werde ich nicht viel darauf eingehen.  Ich werde eines √ºber das Leben sagen: Wenn Sie Ansible verwenden, f√ºgen Sie unbedingt diese Serie hinzu, die sich auf der Folie befindet.  Es ist mehr als einmal passiert, dass Sie etwas gestartet haben und dann verstehen Sie, aber ich habe es entweder falsch oder falsch oder falsch gestartet, und dann sehen Sie, dass dies nur ein Server ist.  Und wir k√∂nnen leicht einen Server verlieren und Sie laden ihn einfach erneut hoch, niemand hat es bemerkt. <br><br>  Au√üerdem haben sie das Artefakt-Repository auf Nexus installiert - es ist ein einziger Einstiegspunkt f√ºr absolut jeden, nicht nur f√ºr CI. <br><br><img src="https://habrastorage.org/webt/vd/gn/bx/vdgnbxlqrwunngs2a2qwec-rqqa.gif"><br>  Und es hilft uns sehr, die Wiederholbarkeit sicherzustellen.  Da nexus in verschiedenen Regionen als Proxy-Dienste fungieren kann, beschleunigen sie die Bereitstellung, Installation von RPM-Paketen, Docker-Images usw. <br><br>  Bei der Erstellung eines neuen Projekts ist es ratsam, Komponenten auszuw√§hlen, die einfach zu automatisieren sind.  Zum Beispiel war der Photon-Server nicht erfolgreich.  In jedem Fall war es die beste L√∂sung.  Aber Cassandra zum Beispiel ist sehr bequem zu aktualisieren und zu automatisieren. <br><br><img src="https://habrastorage.org/webt/47/0d/dp/470ddpcmyhjgdxscckex6l_drow.png"><br>  Hier ist ein Beispiel f√ºr eines unserer Projekte.  Der Client kommt zum APP-Server, wo er ein Profil in der Cassandra-Datenbank hat, und geht dann zum Master-Server, der ihm mithilfe von Matchmaking einen Spieleserver mit einer Art Raum gibt.  Alle anderen Dienste werden in Form einer ‚ÄûAnwendungsdatenbank‚Äú erbracht und genauso aktualisiert. <br><br>  Der zweite Punkt: Sie m√ºssen eine einfache, lose gekoppelte Bereitstellungsarchitektur bereitstellen.  Wir haben es geschafft. <br><br><img src="https://habrastorage.org/webt/hi/_u/gg/hi_uggurj1cdydwxnel9t_wfawi.png"><br>  Siehe zum Beispiel das Aktualisieren des App-Servers.  Wir haben dedizierte Erkennungsdienste, die den Balancer neu konfigurieren. Wir gehen also einfach zum App-Server, l√∂schen ihn, er st√ºrzt beim Balancing ab und wir aktualisieren alles.  Und so mit jedem einzeln. <br><br>  Master-Server werden fast identisch aktualisiert.  Der Client pingt jeden Master-Server in der Region an und wechselt zu dem, auf dem der Ping besser ist.  Wenn wir den Master-Server aktualisieren, wird das Spiel m√∂glicherweise etwas langsamer, aber es wird einfach und unkompliziert aktualisiert. <br><br>  Spieleserver werden etwas anders aktualisiert, da noch ein Spiel l√§uft.  Wir gehen zum Matchmaking, bitten ihn, einen bestimmten Server aus dem Gleichgewicht zu bringen, kommen zum Spieleserver, warten, bis die Spiele genau Null werden, und aktualisieren.  Dann kehren wir zum Balancieren zur√ºck. <br><br><img src="https://habrastorage.org/webt/yk/iv/eu/ykiveufay9i9b2xbtv11e09pw58.gif"><br>  Der entscheidende Punkt hierbei sind die Endpunkte, √ºber die jede der Komponenten verf√ºgt und mit denen die Kommunikation einfach und unkompliziert ist.  Wenn Sie ein Beispiel ben√∂tigen, gibt es einen Elasticsearch-Cluster.  Mit regul√§ren http-Anfragen in JSON k√∂nnen Sie problemlos mit ihm kommunizieren.  Und er gibt sofort im selben JSON alle m√∂glichen unterschiedlichen Metriken und allgemeinen Informationen √ºber den Cluster an: gr√ºn, gelb, rot. <br><br>  Nach Abschluss dieser 12 Schritte haben wir die Anzahl der Umgebungen erh√∂ht, mehr Tests durchgef√ºhrt, die Bereitstellung wurde beschleunigt und die Mitarbeiter erhielten schnelles Feedback. <br><br><img src="https://habrastorage.org/webt/ax/sx/jh/axsxjh2bd2vw8cazn5tdf1kcguq.png"><br>  Was sehr wichtig ist, wir haben die Einfachheit und Geschwindigkeit der Experimente.  Und das ist sehr wichtig, denn wenn es viele Experimente gibt, k√∂nnen wir leicht fehlerhafte Ideen herausfiltern und uns auf die richtigen konzentrieren.  Und das nicht aufgrund subjektiver Einsch√§tzungen, sondern anhand objektiver Indikatoren. <br><br>  Tats√§chlich verfolge ich nicht mehr, wenn wir dort eine Bereitstellung haben, wenn die Ver√∂ffentlichung.  Es gibt kein "Oh, Befreiung!" Gef√ºhl, alles gesammelt und G√§nsehaut.  Nun, das ist so eine Routineoperation, dass ich regelm√§√üig in einem Chatroom sehe, dass etwas passiert ist, okay.  Das ist wirklich cool.  Ihre Systemadministratoren werden vor Freude br√ºllen, wenn Sie dies tun. <br><br>  Aber die Welt steht nicht still, sie prallt manchmal ab.  Wir m√ºssen etwas verbessern.  Zum Beispiel m√∂chte ich die Protokolle des Builds auch in Graylog einf√ºgen.  Dies erfordert eine weitere Verfeinerung der Protokollierung, sodass es keine separate Story gibt, sondern eindeutig: Auf diese Weise wurde der Build zusammengestellt, also getestet, bereitgestellt und verh√§lt sich auf dem Produkt.  Und kontinuierliche √úberwachung - das ist eine kompliziertere Geschichte. <br><br><img src="https://habrastorage.org/webt/bk/b1/pn/bkb1pnqqin9etc8d-ze3jcjl0wa.png"><br>  Wir verwenden Zabbix, und er ist f√ºr solche Ans√§tze √ºberhaupt nicht bereit.  Die 4. Version wird bald ver√∂ffentlicht, wir werden herausfinden, was da ist und wenn alles schlecht ist, werden wir eine andere L√∂sung finden.  Ich werde Ihnen sagen, wie es beim n√§chsten Treffen ausgehen wird. <br><br><h4>  Fragen aus dem Publikum </h4><br>  <b>Und was passiert, wenn Sie M√ºll in die Produktion werfen?</b>  <b>Sie haben beispielsweise nichts nach Leistung berechnet und bei der Integration ist alles in Ordnung. In der Produktion sehen Sie jedoch, dass Ihre Server abst√ºrzen.</b>  <b>Wie rollst du zur√ºck?</b>  <b>Gibt es einen Save Me Button?</b> <br><br>  Wir haben versucht, eine Rollback-Automatisierung durchzuf√ºhren.  Sie k√∂nnen dann in Berichten dar√ºber sprechen, wie cool es funktioniert, wie wunderbar alles ist.  Aber zuerst entwerfen wir so, dass die Versionen abw√§rtskompatibel sind, und testen dies.  Und als wir dieses vollautomatische Ding machten, das etwas pr√ºft und zur√ºckrollt und dann anf√§ngt, damit zu leben, stellten wir fest, dass wir uns viel mehr M√ºhe geben, als wenn wir nur die alte Version mit demselben Pedal nehmen . <br><br>  <b>In Bezug auf die automatische Aktualisierung der Bereitstellung: Warum nehmen Sie √Ñnderungen am aktuellen Server vor und f√ºgen keinen neuen hinzu und f√ºgen ihn nur der Zielgruppe oder dem Balancer hinzu?</b> <br><br>  Also schneller. <br><br>  <b>Wenn Sie beispielsweise die Java-Version aktualisieren m√ºssen, √§ndern Sie den Instanzstatus bei Amazon, aktualisieren die Java-Version oder etwas anderes. Wie k√∂nnen Sie dann in diesem Fall ein Rollback durchf√ºhren?</b>  <b>Nehmen Sie √Ñnderungen am Produktionsserver vor?</b> <br><br>  Ja, jede Komponente funktioniert gut mit der neuen und der alten Version.  Ja, m√∂glicherweise m√ºssen Sie den Server neu laden. <br><br>  <b>Es gibt Zustands√§nderungen, wenn gro√üe Probleme m√∂glich sind ...</b> <br><br>  Dann explodieren. <br><br>  <b>Es scheint mir nur, einen neuen Server hinzuzuf√ºgen und ihn einfach der Zielgruppe in der Zielgruppe zuzuordnen - eine kleine Aufgabe in Komplexit√§t und eine ziemlich gute Praxis.</b> <br><br>  Wir werden auf Hardware gehostet, nicht in den Clouds.  Wir k√∂nnen einen Server hinzuf√ºgen - es ist m√∂glich, aber etwas l√§nger als nur in die Cloud zu klicken.  Daher nehmen wir unseren aktuellen Server (wir haben keine solche Last, damit wir einige der Maschinen nicht herausnehmen k√∂nnen) - wir nehmen einige der Maschinen heraus, aktualisieren sie, setzen den Verkaufsverkehr dort ein, sehen, wie es funktioniert, wenn alles in Ordnung ist, werden wir weiterhin alles tun andere Autos. <br><br>  <b>Sie sagen, wenn jedes Commit gesammelt wird und wenn alles schlecht ist, regiert der Entwickler alles sofort.</b>  <b>Verstehst du, dass alles schlecht ist?</b>  <b>Welche Commits werden gemacht?</b> <br><br>  Anfangs war es nat√ºrlich eine Art manueller Test, das Feedback ist langsam.  Mit einer Art automatischer Tests auf Appium wird all dies abgedeckt, es funktioniert und gibt eine Art Feedback dar√ºber, ob die Tests gefallen sind oder nicht. <br><br>  <b>Das hei√üt,</b>  <b>Zuerst wird jedes Commit ausgerollt und beobachten die Tester es?</b> <br><br>  Nun, nicht jeder, das ist √úbung.  Aus diesen 12 Punkten haben wir ein Training gemacht - beschleunigt.  In der Tat ist dies eine lange und harte Arbeit, vielleicht im Laufe des Jahres.  Aber im Idealfall kommen Sie dazu und alles funktioniert.  Ja, wir brauchen eine Art Autotest, zumindest einen minimalen Satz, damit alles f√ºr Sie funktioniert. <br><br>  <b>Und die Frage ist kleiner: Es gibt einen App-Server auf dem Bild und so weiter. Interessiert mich das dort?</b>  <b>Sie sagten, dass Sie anscheinend keinen Docker haben. Was ist ein Server?</b>  <b>Nacktes Java oder was?</b> <br><br>  Irgendwo ist dies Photon unter Windows (ein Spieleserver), der App-Server ist eine Java-Anwendung unter Tomcat. <br><br>  <b>Das hei√üt,</b>  <b>Keine Virtualoks, keine Container, nichts?</b> <br><br>  Java ist ein Container. <br><br>  <b>Und l√§uft alles mit Ansible?</b> <br><br>  Ja  Das hei√üt,  Zu einem bestimmten Zeitpunkt haben wir einfach nicht in Orchestrierung investiert, denn warum?  In jedem Fall muss das Windows auf die gleiche Weise separat verwaltet werden, und hier wird absolut alles mit einem Tool abgedeckt. <br><br>  <b>Und wie wird die Datenbank bereitgestellt?</b>  <b>Abh√§ngigkeit von Komponente oder Dienstleistung?</b> <br><br>  Es gibt ein Schema im Dienst selbst, das bereitgestellt wird, wenn es angezeigt wird und entwickelt werden muss, damit nichts gel√∂scht wird, sondern nur etwas hinzugef√ºgt wird und abw√§rtskompatibel ist. <br><br>  <b>Ist Ihre Basis auch Eisen oder befindet sich die Basis irgendwo in der Cloud bei Amazon?</b> <br><br>  Die gr√∂√üte Basis ist Eisen, aber es gibt andere.  Es gibt kleine, RDS ist nicht mehr eisern, virtuell.  Diese kleinen Dienste, die ich gezeigt habe: Chats, Ligen, Chatten mit Facebook, Clans, einer davon ist RDS. <br><br>  <b>Master Server - wie ist das?</b> <br><br>  Dies ist in der Tat der gleiche Spielserver, nur mit einem Zeichen des Meisters und er ist ein Balancer.  Das hei√üt,  Der Client pingt alle Master an, dann empf√§ngt er denjenigen, an den der Ping geringer ist, und bereits sammelt der Master-Server mithilfe von Matchmaking R√§ume auf Spielservern und sendet den Spieler. <br><br>  <b>Ich verstehe richtig, dass Sie f√ºr jeden Rollout, den Sie schreiben (falls Funktionen angezeigt werden), eine Migration durchf√ºhren, um die Daten zu aktualisieren.</b>  <b>Sie sagten, Sie nehmen alte Artefakte und f√ºllen sie - was passiert mit den Daten?</b>  <b>Schreiben Sie eine Migration, um die Basis zur√ºckzusetzen?</b> <br><br>  Dies ist eine sehr seltene Rollback-Operation.  Ja, Sie schreiben die Migration von Stiften und was zu tun ist. <br><br>  <b>Wie wird ein Server-Update mit Client-Updates synchronisiert?</b>  <b>Das hei√üt,</b>  <b>Sie m√ºssen eine neue Version des Spiels ver√∂ffentlichen. Aktualisieren Sie zuerst alle Server, dann werden die Clients aktualisiert?</b>  <b>Unterst√ºtzt der Server sowohl die alte als auch die neue Version?</b> <br><br>  Ja, wir entwickeln das Umschalten und Dimmen von Funktionen.  Das hei√üt,  Dies ist ein spezieller Griff, ein Hebel, mit dem Sie einige Funktionen sp√§ter aktivieren k√∂nnen.  Sie k√∂nnen absolut ruhig upgraden, um sicherzustellen, dass alles f√ºr Sie funktioniert, aber diese Funktion nicht einschlie√üen.  Und wenn Sie den Client bereits verteilt haben, k√∂nnen Sie durch Fiddimming um 10% straffen, sicherstellen, dass alles in Ordnung ist, und dann in vollem Umfang. <br><br>  <b>Sie sagen, dass Sie Teile des Projekts separat in verschiedenen Repositorys gespeichert haben, d. H.</b>  <b>Hast du einen Entwicklungsprozess?</b>  <b>Wenn Sie das Projekt selbst √§ndern, sollten Ihre Tests fallen, da Sie das Projekt ge√§ndert haben.</b>  <b>Daher m√ºssen die separat liegenden Tests so schnell wie m√∂glich behoben werden.</b> <br><br>  Ich habe dir von der "engen Interaktion der Wale mit den Testern" erz√§hlt.  Dieses Schema mit verschiedenen Repositorys funktioniert nur dann sehr gut, wenn eine sehr dichte Kommunikation besteht.  Dies ist f√ºr uns kein Problem, jeder kommuniziert leicht miteinander, es gibt eine gute Kommunikation. <br><br>  <b>Das hei√üt,</b>  <b>Unterst√ºtzen Tester das Test-Repository in Ihrem Team?</b>  <b>Und Autotests liegen getrennt?</b> <br><br>  Ja  Sie haben eine Funktion erstellt und k√∂nnen genau die Autotests, die Sie ben√∂tigen, aus dem Tester-Repository erfassen und nicht alles andere √ºberpr√ºfen. <br><br>  <b>Solch ein Ansatz, wenn alles schnell l√§uft - Sie k√∂nnen es sich leisten, bei jedem Commit sofort zum Produkt zu gehen.</b>  <b>Folgen Sie solchen Taktiken oder komponieren Sie einige Ver√∂ffentlichungen?</b>  <b>Das hei√üt,</b>  <b>Einmal in der Woche, nicht freitags, nicht am Wochenende. Haben Sie eine Ver√∂ffentlichungstaktik oder ist die Funktion bereit? Kann ich sie ver√∂ffentlichen?</b>  <b>Denn wenn Sie aus kleinen Funktionen eine kleine Version machen, ist es weniger wahrscheinlich, dass alles kaputt geht, und wenn etwas kaputt geht, wissen Sie definitiv was.</b> <br><br>  Es ist keine Eisidee, Client-Benutzer zu zwingen, alle f√ºnf Minuten oder jeden Tag eine neue Version herunterzuladen.  In jedem Fall werden Sie an den Kunden gebunden.  Es ist gro√üartig, wenn Sie ein Webprojekt haben, in dem Sie mindestens jeden Tag aktualisieren k√∂nnen und nichts tun m√ºssen.  Die Geschichte ist mit dem Kunden komplizierter, wir haben eine Art Release-Taktik und bleiben dabei. <br><br>  <b>Sie haben √ºber die Einf√ºhrung der Automatisierung auf Produktservern gesprochen, und (so wie ich es verstehe) gibt es auch die Einf√ºhrung der Automatisierung f√ºr einen Test - was ist mit Entwicklungsumgebungen?</b>  <b>Gibt es irgendeine Art von Automatisierung, die von den Entwicklern bereitgestellt wird?</b> <br><br>  Fast das Gleiche.  Das einzige, was nicht die Eisenserver sind, sondern in der virtuellen Maschine, aber das Wesentliche ist ungef√§hr dasselbe.  Zur gleichen Zeit haben wir auf demselben Ansible (wir haben Ovirt) die Erstellung dieser virtuellen Maschine und die R√§ndelung darauf geschrieben. <br><br>  <b>Haben Sie die ganze Geschichte in einem Projekt zusammen mit den Ansible-Produkten und Testkonfigurationen gespeichert oder lebt und entwickelt sie sich separat?</b> <br><br>  Wir k√∂nnen sagen, dass dies separate Projekte sind.  Dev (wir nennen es devbox) ist eine Geschichte, wenn alles in einer Packung ist, und auf dem Produkt ist es eine verteilte Geschichte. <br><br><h3>  Weitere Gespr√§che mit Pixonic DevGAMM Talks </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verwendung des Konsuls zur Skalierung staatlicher Dienste</a> (Ivan Bubnov, DevOps bei BIT.GAMES); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Praxis der Verwendung des Schauspielermodells in der Backend-Plattform des Quake Champions-Spiels</a> (Roman Rogozin, Backend-Entwickler Sabre Interactive); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Meta-Server-Architektur f√ºr mobile Online-Shooter von</a> Tacticool (Pavel Platto, Lead Software Engineer bei PanzerDog); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie ECS, C # Job System und SRP den Architekturansatz √§ndern</a> (Valentin Simonov, Field Engineer bei Unity); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">KISS-Prinzip in der Entwicklung</a> (Konstantin Gladyshev, Lead Game Programmer bei 1C Game Studios); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Allgemeine Spielelogik auf Client und Server</a> (Anton Grigoriev, stellvertretender technischer Mitarbeiter bei Pixonic). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gurke in der Cloud: Verwenden von BDD-Skripten f√ºr Produktstresstests</a> (Anton Kosyakin, Technischer Produktmanager auf der ALICE-Plattform). </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425813/">https://habr.com/ru/post/de425813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425803/index.html">Der Kampf um Ressourcen, Teil 3: Es gibt wenig Ged√§chtnis</a></li>
<li><a href="../de425805/index.html">DevOops 2018: kostenloses Online-Streaming, Party und mehr</a></li>
<li><a href="../de425807/index.html">Komplexit√§t von Systemen und Methoden des ‚ÄûKampfes‚Äú damit</a></li>
<li><a href="../de425809/index.html">Dabei Programmiersprachen lernen: Softwareentwickler √ºber komplexe Projekte</a></li>
<li><a href="../de425811/index.html">Ein weiteres Problem mit der Anzeige des MacBook Pro</a></li>
<li><a href="../de425815/index.html">Wer kein SEO braucht, wie man einen Optimierer ausw√§hlt und seine Arbeit testet</a></li>
<li><a href="../de425817/index.html">Ziehen Sie Ihre iOS-Apps per Drag & Drop</a></li>
<li><a href="../de425819/index.html">GitLab 11.3 mit Maven-Repository und sicheren Umgebungen ver√∂ffentlicht</a></li>
<li><a href="../de425821/index.html">So werden Sie 2018 React-Entwickler</a></li>
<li><a href="../de425823/index.html">IPO-Statistik 2018: 45 Milliarden US-Dollar gesammelt, Dropbox weniger Geld gesammelt als Pharmaunternehmen und Immobilienverk√§ufer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>