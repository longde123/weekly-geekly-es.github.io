<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🏭 🐡 🔠 Menulis Permainan Kartu Memori di Swift 👨🏾‍🔬 🧒🏼 🏏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini menjelaskan proses membuat game pelatihan memori sederhana yang sangat saya sukai. Selain bagus dan dengan sendirinya, Anda akan belajar s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menulis Permainan Kartu Memori di Swift</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/447598/"><img src="https://habrastorage.org/getpro/habr/post_images/bd8/736/e74/bd8736e74ae382f71c8c0c8220a5b4be.jpg"><br><br>  Artikel ini menjelaskan proses membuat game pelatihan memori sederhana yang sangat saya sukai.  Selain bagus dan dengan sendirinya, Anda akan belajar sedikit lebih banyak tentang kelas dan protokol Swift selama bekerja.  Tapi sebelum Anda mulai, mari kita cari tahu permainannya sendiri. <br><a name="habracut"></a><br><blockquote>  <b>Kami mengingatkan Anda:</b> <i>untuk semua pembaca "Habr" - diskon 10.000 rubel saat mendaftar untuk kursus Skillbox apa pun menggunakan kode promo "Habr".</i> <br><br>  <b>Skillbox merekomendasikan:</b> Kursus pendidikan online <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang Java Profesi"</a> . </blockquote><br><h3>  Cara memainkan Kartu Memori </h3><br>  Permainan dimulai dengan demonstrasi serangkaian kartu.  Mereka berbaring "baju" ke atas (masing-masing, menghadap ke bawah).  Ketika Anda mengklik salah satu, gambar terbuka selama beberapa detik. <br><br>  Tugas pemain adalah menemukan semua kartu dengan gambar yang sama.  Jika setelah membuka kartu pertama Anda membalik kartu kedua dan gambar-gambarnya cocok, kedua kartu tetap terbuka.  Jika tidak cocok, kartu ditutup kembali.  Tugasnya adalah membuka segalanya. <br><br><h3>  Struktur proyek </h3><br>  Untuk membuat versi sederhana dari gim ini, Anda memerlukan komponen berikut: <br><br><ul><li>  One Controller: GameController.swift. </li><li>  Satu Tampilan: CardCell.swift. </li><li>  Dua Model: MemoryGame.swift dan Card.swift. </li><li>  Main.storyboard sehingga seluruh set komponen tersedia. </li></ul><br>  Kami mulai dengan komponen permainan yang paling sederhana, kartu. <br><br>  <b>Card.swift</b> <br><br>  Model kartu akan memiliki tiga properti: id untuk mengidentifikasi masing-masing, variabel logis ditunjukkan untuk memperjelas status kartu (tersembunyi atau terbuka) dan artworkURL untuk gambar pada kartu. <br><br><pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Card</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> id: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shown: <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artworkURL: <span class="hljs-type"><span class="hljs-type">UIImage!</span></span> }</code> </pre> <br>  Anda juga akan memerlukan metode ini untuk mengontrol interaksi pengguna dengan kartu: <br><br>  <b>Metode untuk menampilkan gambar pada kartu.</b>  Di sini kita mengatur ulang semua properti ke default.  Untuk id, buat id acak dengan memanggil NSUUIS (). UuidString. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(image: <span class="hljs-type"><span class="hljs-type">UIImage</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.id = <span class="hljs-type"><span class="hljs-type">NSUUID</span></span>().uuidString <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.shown = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.artworkURL = image }</code> </pre> <br>  <b>Metode untuk membandingkan kartu id.</b> <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> card: Card)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (card.id == id) }</code> </pre> <br>  <b>Metode untuk membuat salinan dari setiap kartu</b> adalah untuk mendapatkan jumlah yang lebih besar dari <b>kartu</b> yang identik.  Metode ini akan mengembalikan kartu dengan nilai yang sama. <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">copy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Card</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Card</span></span>(card: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(card: <span class="hljs-type"><span class="hljs-type">Card</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.id = card.id <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.shown = card.shown <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.artworkURL = card.artworkURL }</code> </pre> <br>  <b>Dan metode lain diperlukan untuk mencampur kartu di awal.</b>  Kami akan membuatnya menjadi perpanjangan dari kelas Array. <br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Array</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shuffle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>...<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">sort</span></span> { (<span class="hljs-number"><span class="hljs-number">_</span></span>,<span class="hljs-number"><span class="hljs-number">_</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arc4random() &lt; arc4random() } } } }</code> </pre> <br>  Dan di sini adalah implementasi kode untuk model Kartu dengan semua properti dan metode. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Card</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> id: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shown: <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artworkURL: <span class="hljs-type"><span class="hljs-type">UIImage!</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> allCards = [<span class="hljs-type"><span class="hljs-type">Card</span></span>]() <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(card: <span class="hljs-type"><span class="hljs-type">Card</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.id = card.id <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.shown = card.shown <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.artworkURL = card.artworkURL } <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(image: <span class="hljs-type"><span class="hljs-type">UIImage</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.id = <span class="hljs-type"><span class="hljs-type">NSUUID</span></span>().uuidString <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.shown = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.artworkURL = image } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> card: Card)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (card.id == id) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">copy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Card</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Card</span></span>(card: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Array</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">mutating</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shuffle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>...<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">sort</span></span> { (<span class="hljs-number"><span class="hljs-number">_</span></span>,<span class="hljs-number"><span class="hljs-number">_</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arc4random() &lt; arc4random() } } } }</code> </pre> <br>  Silakan. <br><br>  Model kedua adalah MemoryGame, di sini kita mengatur kisi 4 * 4.  Model akan memiliki properti seperti kartu (array kartu di grid), array cardsShown dengan kartu yang sudah terbuka, dan boolean isPlaying untuk melacak status permainan. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemoryGame</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cards:[<span class="hljs-type"><span class="hljs-type">Card</span></span>] = [<span class="hljs-type"><span class="hljs-type">Card</span></span>]() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cardsShown:[<span class="hljs-type"><span class="hljs-type">Card</span></span>] = [<span class="hljs-type"><span class="hljs-type">Card</span></span>]() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isPlaying: <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br>  Kita juga perlu mengembangkan metode untuk mengontrol interaksi pengguna dengan kisi. <br><br>  <b>Metode yang mengocok kartu dalam kotak.</b> <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shuffleCards</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cards:[Card])</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Card</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> randomCards = cards randomCards.shuffle() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> randomCards }</code> </pre> <br>  <b>Metode untuk membuat game baru.</b>  Di sini kita memanggil metode pertama untuk memulai tata letak awal dan menginisialisasi variabel isPlaying sebagai true. <br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newGame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cardsArray:[Card])</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Card</span></span>] { cards = shuffleCards(cards: cardsArray) isPlaying = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cards }</code> </pre> <br>  <b>Jika kami ingin memulai kembali gim,</b> kami mengatur variabel isPlaying menjadi false dan menghapus tata letak awal kartu. <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restartGame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { isPlaying = <span class="hljs-literal"><span class="hljs-literal">false</span></span> cards.removeAll() cardsShown.removeAll() }</code> </pre> <br>  <b>Metode untuk verifikasi kartu yang ditekan.</b>  Lebih banyak tentang itu nanti. <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cardAtIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index: Int)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Card?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cards.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> &gt; index { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cards[index] } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } }</code> </pre> <br>  <b>Metode yang mengembalikan posisi kartu tertentu.</b> <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexForCard</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> card: Card)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> index <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>...cards.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> card === cards[index] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Memeriksa kepatuhan kartu yang dipilih dengan standar. <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unmatchedCardShown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cardsShown.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> % <span class="hljs-number"><span class="hljs-number">2</span></span> != <span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br>  Metode ini membaca elemen terakhir dalam array ** cardsShown ** dan mengembalikan kartu yang tidak pantas. <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">didSelectCard</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> card: Card?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> card = card <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> unmatchedCardShown() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> unmatched = unmatchedCard()! <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> card.equals(unmatched) { cardsShown.append(card) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondCard = cardsShown.removeLast() } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cardsShown.append(card) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cardsShown.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> == cards.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> { endGame() } }</code> </pre> <br><h3>  Main.storyboard dan GameController.swift </h3><br>  Main.storyboard terlihat seperti ini: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/560/fdb/a5b/560fdba5bf68f57bd0b8741b0b91cd0f.png"><br><br>  Awalnya, di controller Anda perlu menginstal game baru sebagai viewDidLoad, termasuk gambar untuk grid.  Dalam game, semua ini akan diwakili oleh 4 * 4 collectionView.  Jika Anda tidak terbiasa dengan collectionView, di sini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anda bisa mendapatkan informasi yang diperlukan</a> . <br><br>  Kami akan mengonfigurasi GameController sebagai pengontrol root aplikasi.  Akan ada collectionView di GameController, yang akan kami rujuk sebagai IBOutlet.  Tautan lain adalah ke tombol IBAction onStartGame (), ini adalah UIButton, Anda dapat melihatnya di storyboard yang disebut PLAY. <br><br>  Sedikit tentang implementasi pengendali: <br><br><ul><li>  Pertama, kita menginisialisasi dua objek utama - kisi (permainan): game = MemoryGame (), dan pada set kartu: kartu = [Kartu] (). </li><li>  Tetapkan variabel awal sebagai viewDidLoad, ini adalah metode pertama yang disebut selama permainan. </li><li>  atur collectionView sebagai tersembunyi, karena semua peta disembunyikan hingga pengguna menekan MAINKAN. </li><li>  Segera setelah kami menekan PLAY, bagian IBAction onStartGame dimulai, dan kami mengatur properti collectionView isHidden menjadi false sehingga kartu dapat menjadi terlihat. </li><li>  Setiap kali pengguna memilih kartu, metode didSelectItemAt dipanggil.  Dalam metode ini, kami memanggil didSelectCard untuk menerapkan logika dasar permainan. </li></ul><br>  Inilah implementasi akhir dari GameController: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> collectionView: <span class="hljs-type"><span class="hljs-type">UICollectionView!</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> game = <span class="hljs-type"><span class="hljs-type">MemoryGame</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cards = [<span class="hljs-type"><span class="hljs-type">Card</span></span>]() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewDidLoad() game.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> collectionView.dataSource = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> collectionView.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> collectionView.isHidden = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-type"><span class="hljs-type">APIClient</span></span>.shared.getCardImages { (cardsArray, error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-number"><span class="hljs-number">_</span></span> = error { <span class="hljs-comment"><span class="hljs-comment">// show alert } self.cards = cardsArray! self.setupNewGame() } } override func viewDidDisappear(_ animated: Bool) { super.viewDidDisappear(animated) if game.isPlaying { resetGame() } } func setupNewGame() { cards = game.newGame(cardsArray: self.cards) collectionView.reloadData() } func resetGame() { game.restartGame() setupNewGame() } @IBAction func onStartGame(_ sender: Any) { collectionView.isHidden = false } } // MARK: - CollectionView Delegate Methods extension GameController: UICollectionViewDelegate, UICollectionViewDataSource { func numberOfSections(in collectionView: UICollectionView) -&gt; Int { return 1 } func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int { return cards.count } func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell { let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "CardCell", for: indexPath) as! CardCell cell.showCard(false, animted: false) guard let card = game.cardAtIndex(indexPath.item) else { return cell } cell.card = card return cell } func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) { let cell = collectionView.cellForItem(at: indexPath) as! CardCell if cell.shown { return } game.didSelectCard(cell.card) collectionView.deselectItem(at: indexPath, animated:true) } }</span></span></code> </pre> <br>  Sekarang mari kita membahas beberapa protokol penting. <br><br><h3>  Protokol </h3><br>  Bekerja dengan protokol adalah dasar dari pemrograman Swift.  Protokol menyediakan kemampuan untuk menetapkan aturan untuk kelas, struktur, atau enumerasi.  Prinsip ini memungkinkan Anda untuk menulis kode modular dan extensible.  Ini sebenarnya sebuah template yang sudah kami terapkan untuk collectionView di GameController.  Sekarang mari kita buat versi kita sendiri.  Sintaksnya akan terlihat seperti ini: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemoryGameProtocol</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//protocol definition goes here }</span></span></code> </pre> <br>  Kami tahu bahwa protokol memungkinkan Anda untuk mendefinisikan aturan atau instruksi untuk mengimplementasikan kelas, jadi mari kita pikirkan tentang apa yang seharusnya.  Hanya empat yang dibutuhkan. <br><br><ul><li>  Mulai dari gim: memoryGameDidStart. </li><li>  Perlu membalik kartu ke bawah: memoryGameShowCards. </li><li>  Perlu membalik kartu ke bawah: memoryGameHideCards. </li><li>  Penyelesaian game: memoryGameDidEnd. </li></ul><br>  Kami menerapkan keempat metode untuk kelas utama, dan ini adalah GameController. <br><br><h3>  memoryGameDidStart </h3><br>  Ketika metode ini diluncurkan, game harus dimulai (pengguna menekan MAINKAN).  Di sini, kita cukup memuat ulang konten dengan memanggil collectionView.reloadData (), yang akan menyebabkan peta menjadi acak. <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memoryGameDidStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> game: MemoryGame)</span></span></span></span> { collectionView.reloadData() }</code> </pre> <br><h3>  memoryGameShowCard </h3><br>  Panggil metode ini dari collectionSDViewSelectItemAt.  Pertama, ini menunjukkan peta yang dipilih.  Kemudian memeriksa untuk melihat apakah ada kartu yang tidak cocok dalam array cardsShown (jika jumlah cardsShown ganjil).  Jika ada, kartu yang dipilih dibandingkan dengannya.  Jika gambarnya sama, kedua kartu ditambahkan ke cardsShown dan tetap terbuka.  Jika berbeda, kartu tersebut meninggalkan cardShown, dan keduanya terbalik. <br><br><h3>  memoryGameHideCards </h3><br>  Jika kartu tidak cocok, metode ini disebut, dan gambar kartu disembunyikan. <br><br>  ditampilkan = salah. <br><br><h3>  memoryGameDidEnd </h3><br>  Ketika metode ini dipanggil, itu berarti bahwa semua kartu sudah terbuka dan berada di daftar cardsShown: cardsShown.count = cards.count, sehingga permainan selesai.  Metode ini dipanggil secara khusus setelah kami memanggil endGame () untuk mengatur isPlaying var ke false, setelah itu pesan tentang penyelesaian permainan ditampilkan.  AlertController juga digunakan sebagai indikator untuk pengontrol.  ViewDidDisappear dipanggil dan permainan diatur ulang. <br><br>  Begini tampilannya di GameController: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemoryGameProtocol</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memoryGameDidStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> game: MemoryGame)</span></span></span></span> { collectionView.reloadData() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memoryGame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> game: MemoryGame, showCards cards: [Card])</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> card <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> cards { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = game.indexForCard(card) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> cell = collectionView.cellForItem( at: <span class="hljs-type"><span class="hljs-type">IndexPath</span></span>(item: index, section:<span class="hljs-number"><span class="hljs-number">0</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">CardCell</span></span> cell.showCard(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, animted: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memoryGame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> game: MemoryGame, hideCards cards: [Card])</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> card <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> cards { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = game.indexForCard(card) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> cell = collectionView.cellForItem( at: <span class="hljs-type"><span class="hljs-type">IndexPath</span></span>(item: index, section:<span class="hljs-number"><span class="hljs-number">0</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">CardCell</span></span> cell.showCard(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, animted: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memoryGameDidEnd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> game: MemoryGame)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> alertController = <span class="hljs-type"><span class="hljs-type">UIAlertController</span></span>( title: defaultAlertTitle, message: defaultAlertMessage, preferredStyle: .alert ) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> cancelAction = <span class="hljs-type"><span class="hljs-type">UIAlertAction</span></span>( title: <span class="hljs-string"><span class="hljs-string">"Nah"</span></span>, style: .cancel) { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] (action) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.collectionView.isHidden = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> playAgainAction = <span class="hljs-type"><span class="hljs-type">UIAlertAction</span></span>( title: <span class="hljs-string"><span class="hljs-string">"Dale!"</span></span>, style: .<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] (action) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.collectionView.isHidden = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.resetGame() } alertController.addAction(cancelAction) alertController.addAction(playAgainAction) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.present(alertController, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { } resetGame() } }</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/1fd/b6b/1e7/1fdb6b1e7b62a4d49397b1e2d590d57b.gif"><br>  Itu saja.  Anda dapat menggunakan proyek ini untuk membuat versi gim Anda sendiri. <br><br>  Pengodean yang bagus! <br><br><blockquote>  <b>Skillbox merekomendasikan:</b> <br><br><ul><li>  Kursus praktis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"PRO Pengembang Seluler"</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Analis Data Python</a> Terapan online saja. </li><li>  Kursus praktis dua tahun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Saya adalah pengembang web PRO</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"</a> </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id447598/">https://habr.com/ru/post/id447598/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id447584/index.html">Anatomi "Space Data Center". Server setinggi langit: lihat di bawah kap</a></li>
<li><a href="../id447586/index.html">Interpolasi string lanjutan di Swift 5.0</a></li>
<li><a href="../id447588/index.html">Cara membuat aplikasi lebih stabil dengan 2 jenis unit test</a></li>
<li><a href="../id447592/index.html">WhatsApp di telapak tangan Anda: di mana dan bagaimana Anda dapat mendeteksi artefak forensik?</a></li>
<li><a href="../id447594/index.html">Instrumen khusus: ketika plang tidak cukup</a></li>
<li><a href="../id447604/index.html">Gigi halus, C ++ dan matematika - bagaimana mereka terkait? Percakapan dengan Align</a></li>
<li><a href="../id447606/index.html">CLRium # 5 Pengumpul Sampah: Peter - Habis</a></li>
<li><a href="../id447608/index.html">Evolusi CI dalam tim pengembangan seluler</a></li>
<li><a href="../id447610/index.html">Bagaimana mengendalikan infrastruktur jaringan Anda. Bab Tiga Keamanan jaringan. Bagian tiga</a></li>
<li><a href="../id447612/index.html">Pusat Data Luar Angkasa. Terjemahan teks dari peluncuran server ke stratosfer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>