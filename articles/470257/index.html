<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîå üèôÔ∏è üôÜ Capa alrededor de ImmutableList en Java üë®üèª‚Äçüéì üë®üèº‚Äçüî¨ üë®üèæ‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le√≠ el art√≠culo "No habr√° colecciones inmutables en Java, ni ahora ni nunca", y pens√© que el problema de la ausencia de listas inmutables en Java, lo ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Capa alrededor de ImmutableList en Java</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470257/"><p>  Le√≠ el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"No habr√° colecciones</a> inmutables <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en Java, ni ahora ni nunca",</a> y pens√© que el problema de la ausencia de listas inmutables en Java, lo que entristece al autor, es bastante solucionable en una escala limitada.  Ofrezco mis pensamientos y piezas de c√≥digo sobre este tema. </p><a name="habracut"></a><br><p>  (Este es un art√≠culo de respuesta, lea primero el art√≠culo original). </p><br><h2 id="unmodifiablelist-vs-immutablelist">  InmodificableList vs ImmutableList </h2><br><p> La primera pregunta que surge es: ¬øpor qu√© necesito una <code>UnmodifiableList</code> , si hay una <code>ImmutableList</code> ?  Como resultado de la discusi√≥n, se ven dos ideas con respecto al significado de <code>UnmodifiableList</code> en los comentarios del art√≠culo original: </p><br><ul><li>  el m√©todo recibe una <code>UnmodifiableList</code> , no puede cambiarlo por s√≠ mismo, pero sabe que el contenido puede ser cambiado por otro hilo (y sabe c√≥mo manejarlo correctamente) </li><li>  otros hilos no afectan, <code>UnmodifiableList</code> e <code>ImmutableList</code> son equivalentes para un m√©todo, pero <code>UnmodifiableList</code> usa como uno m√°s "ligero". </li></ul><br><p>  La primera opci√≥n parece demasiado rara en la pr√°ctica.  Por lo tanto, si puede hacer una implementaci√≥n "f√°cil" de <code>ImmutableList</code> , entonces <code>UnmodifiableList</code> no ser√° muy necesario.  Por lo tanto, en el futuro lo olvidaremos y solo implementaremos <code>ImmutableList</code> . </p><br><h2 id="postanovka-zadachi">  Declaraci√≥n del problema. </h2><br><p>  Implementaremos la opci√≥n <code>ImmutableList</code> : </p><br><ul><li>  La API debe ser id√©ntica a la API de <code>List</code> normal en la parte de "lectura".  La parte de "escritura" debe estar ausente. </li><li>  <code>ImmutableList</code> y <code>List</code> no deber√≠an estar relacionadas por relaciones de herencia.  ¬øPor qu√©? - entiende el art√≠culo original. </li><li>  Tiene sentido hacer la implementaci√≥n por analog√≠a con <code>ArrayList</code> .  Esta es la opci√≥n m√°s f√°cil. </li><li>  La implementaci√≥n debe evitar copiar matrices siempre que sea posible. </li></ul><br><h2 id="realizaciya-immutablelist">  Implementaci√≥n de ImmutableList </h2><br><p>  Primero, tratamos con la API.  Examinamos las interfaces de <code>Collection</code> y <code>List</code> y copiamos la parte de "lectura" de ellas en nuestras nuevas interfaces. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyCollection</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isEmpty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span></span>; Object[] toArray(); &lt;T&gt; T[] toArray(T[] a); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">containsAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;?&gt; c)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyCollection</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">E </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lastIndexOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ListIterator&lt;E&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listIterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ListIterator&lt;E&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listIterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ReadOnlyList&lt;E&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fromIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toIndex)</span></span></span></span>; }</code> </pre> <br><p>  A continuaci√≥n, cree la clase <code>ImmutableList</code> .  La firma es similar a <code>ArrayList</code> (pero implementa la interfaz <code>ReadOnlyList</code> en lugar de <code>List</code> ). </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomAccess</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cloneable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span></span></code> </pre> <br><p>  Copiamos la implementaci√≥n de la clase de <code>ArrayList</code> y refaccionamos firmemente, desechando todo lo relacionado con la parte de "escritura", comprobando la modificaci√≥n concurrente, etc. </p><br><p>  Los constructores ser√°n los siguientes: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E[] original)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends E&gt; original)</span></span></span></span></code> </pre> <br><p>  El primero crea una lista vac√≠a.  El segundo crea una lista copiando la matriz.  No podemos prescindir de la copia si queremos lograr que sea inmutable.  El tercero es m√°s interesante.  Un constructor de <code>ArrayList</code> similar tambi√©n copia datos de la colecci√≥n.  Haremos lo mismo, a menos que <code>orginal</code> sea ‚Äã‚Äãuna instancia de <code>ArrayList</code> o <code>Arrays$ArrayList</code> (esto es lo que devuelve el m√©todo <code>Arrays.asList()</code> ).  Podemos suponer con seguridad que estos casos cubrir√°n el 90% de las llamadas del constructor. </p><br><p>  En estos casos, "robaremos" la matriz <code>original</code> trav√©s de reflexiones (hay esperanza de que esto sea m√°s r√°pido que copiar matrices de gigabytes).  La esencia del "robo": </p><br><ul><li>  llegamos al campo privado <code>original</code> , que almacena la matriz ( <code>ArrayList.elementData</code> ) </li><li>  copiar el enlace a la matriz a nosotros mismos </li><li>  poner en el campo fuente nulo </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Field data_ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { data_ArrayList = ArrayList.class.getDeclaredField(<span class="hljs-string"><span class="hljs-string">"elementData"</span></span>); data_ArrayList.setAccessible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NoSuchFieldException | SecurityException e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(e); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends E&gt; original)</span></span></span><span class="hljs-function"> </span></span>{ Object[] arr = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (original <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> ArrayList) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { arr = (Object[]) data_ArrayList.get(original); data_ArrayList.set(original, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-meta"><span class="hljs-meta">@SuppressWarnings</span></span>(<span class="hljs-string"><span class="hljs-string">"unused"</span></span>) IllegalArgumentException | IllegalAccessException e) { arr = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arr == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   ArrayList,      -  arr = original.toArray(); } this.data = arr; }</span></span></code> </pre> <br><p>  Como contrato, suponemos que cuando se llama al constructor, la lista mutable se <code>ImmutableList</code> en una <code>ImmutableList</code> .  La lista original no se puede usar despu√©s de eso.  Al intentar usar, llega una <code>NullPointerException</code> .  Esto asegura que la matriz "robada" no cambiar√° y nuestra lista ser√° realmente inmutable (excepto en el caso de que alguien llegue a la matriz a trav√©s de reflexiones). </p><br><h2 id="prochie-klassy">  Otras clases </h2><br><p>  Supongamos que decidimos usar una <code>ImmutableList</code> en un proyecto real. </p><br><p>  El proyecto interact√∫a con las bibliotecas: recibe de ellas y les env√≠a varias listas.  En la gran mayor√≠a de los casos, estas listas ser√°n una <code>ArrayList</code> .  La implementaci√≥n descrita de <code>ImmutableList</code> permite convertir r√°pidamente la <code>ArrayList</code> resultante en una <code>ImmutableList</code> .  Tambi√©n es necesario implementar la conversi√≥n para las listas enviadas a las bibliotecas: <code>ImmutableList</code> to <code>List</code> .  Para una conversi√≥n r√°pida, necesita un contenedor <code>ImmutableList</code> que implemente <code>List</code> , lanzando excepciones al intentar escribir en la lista (similar a <code>Collections.unmodifiableList</code> ). </p><br><p>  Adem√°s, el proyecto mismo de alguna manera procesa las listas.  Tiene sentido crear una clase <code>MutableList</code> que represente una lista mutable, con una implementaci√≥n basada en <code>ArrayList</code> .  En este caso, puede refactorizar el proyecto sustituyendo por todo <code>ArrayList</code> clase que declara expl√≠citamente la intenci√≥n: <code>MutableList</code> o <code>MutableList</code> . </p><br><p>  Necesita una conversi√≥n r√°pida de <code>MutableList</code> a <code>MutableList</code> y viceversa.  Al mismo tiempo, a diferencia de la conversi√≥n de <code>ArrayList</code> a <code>ImmutableList</code> , ya no podemos estropear la lista original. </p><br><p>  La conversi√≥n all√≠ generalmente ser√° lenta, con la copia de la matriz.  Pero para los casos en que la <code>MutableList</code> recibida no siempre cambia, puede hacer un contenedor: <code>MutableList</code> , que guarda una referencia a <code>ImmutableList</code> y la usa para m√©todos de "lectura", y si se llama a un m√©todo de "escritura", solo se olvida de <code>ImmutableList</code> , despu√©s de copiar su contenido matriz para s√≠ mismo, y luego ya funciona con su matriz (algo remotamente similar est√° en <code>CopyOnWriteArrayList</code> ). </p><br><p>  Convertir "atr√°s" implica recibir una instant√°nea del contenido de <code>MutableList</code> en el momento en que se llama al m√©todo.  Nuevamente, en la mayor√≠a de los casos no puede prescindir de copiar una matriz, pero puede hacer un contenedor para optimizar los casos de varias conversiones entre las cuales el contenido de <code>MutableList</code> no cambi√≥.  Otra opci√≥n para convertir "atr√°s": algunos datos se recopilan en <code>MutableList</code> , y cuando se completa la recopilaci√≥n de datos, <code>MutableList</code> debe convertirse para siempre en una <code>ImmutableList</code> .  Tambi√©n se implementa sin problemas con otro contenedor. </p><br><h2 id="itogo">  Total </h2><br><p>  <a href="">Los resultados del experimento en forma de c√≥digo se publican aqu√≠.</a> </p><br><p>  Se <code>ImmutableList</code> s√≠, que se describe en la secci√≥n "Otras clases" (¬øtodav√≠a no?). </p><br><p>  Podemos suponer que la premisa del art√≠culo original, "colecciones inmutables en Java no ser√°" es err√≥nea. </p><br><p>  Si hay un deseo, entonces es muy posible utilizar un enfoque similar.  S√≠, con muletas peque√±as.  S√≠, no dentro de todo el sistema, sino solo en sus proyectos (aunque si muchos penetran, se ir√° incorporando gradualmente a las bibliotecas). </p><br><p>  Una cosa: si hay un deseo ... <em>(Tahit√≠, Tahit√≠ ... ¬°No est√°bamos en ning√∫n Tahit√≠! Nos alimentan bien aqu√≠).</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/470257/">https://habr.com/ru/post/470257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../470239/index.html">ERP no desarrollado en producci√≥n: en cuidados intensivos o en una morgue?</a></li>
<li><a href="../470241/index.html">Historial de inicio: c√≥mo desarrollar una idea paso a paso, ingresar a un mercado inexistente y alcanzar la expansi√≥n internacional</a></li>
<li><a href="../470247/index.html">RESHI.RU: un robot resuelve y explica problemas de texto escolar en matem√°ticas</a></li>
<li><a href="../470251/index.html">C√≥mo hice una aplicaci√≥n de escritorio en Flutter (+ bonus)</a></li>
<li><a href="../470255/index.html">Optimizaci√≥n de la cartera de bonos con ALGLIB</a></li>
<li><a href="../470265/index.html">C ++ abreviatura hoja de trucos y m√°s. Parte 1: C ++</a></li>
<li><a href="../470267/index.html">Monitoreo de temperatura certificado</a></li>
<li><a href="../470269/index.html">ReactOS 0.4.12: Âçé‰∏∫ Ôºå ‰Ω† ËÆ§‰∏∫ Ëøô‰∏™ ÊÄé‰πà Ê†∑Ôºü</a></li>
<li><a href="../470271/index.html">F # 6: Tuplas</a></li>
<li><a href="../470273/index.html">F # 7: Registros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>