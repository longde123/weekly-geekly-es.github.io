<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚲 🤚 👩🏻‍💻 来自IT世界的好奇变态-4 🌳 👩‍🌾 🐻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="每日WTF网站已经收集了来自IT界的有趣，荒诞和/或悲伤的故事已有15年了。 我翻译了一些我觉得很有趣的故事。 所有公司名称和名称均已更改。 以前的问题可以在“ 好奇的变态 ”标签下找到。 

 第一个故事。 月底 
 [原创] 

 如果您询问设计工程师过桥是否安全，他将很乐意告诉您桥梁的可靠性，...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>来自IT世界的好奇变态-4</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446714/"><div style="text-align:center;"><img src="https://ic.pics.livejournal.com/egor_23/73280836/1707368/1707368_1000.jpg" alt="图片"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">每日WTF</a>网站已经收集了来自IT界的有趣，荒诞和/或悲伤的故事已有15年了。 我翻译了一些我觉得很有趣的故事。 所有公司名称和名称均已更改。 以前的问题可以在“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">好奇的变态</a> ”标签下找到。 <br><br><h2> 第一个故事。 月底 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[原创]</a> <br><br> 如果您询问设计工程师过桥是否安全，他将很乐意告诉您桥梁的可靠性，数学在桥梁中的工作原理，在建筑安全方面的进展。 与他交谈后，您会得到一个印象，那就是地球上不会再有一座桥梁会坍塌。 但是，如果您向软件开发工程师询问有关银行的信息，那么您很可能会感到恐惧，并且以50/50的概率说服自己将所有资金投资于比特币。 银行因创建软件时的错误决策而臭名昭著-不是因为这些决策令人作呕，而是因为大多数人都认为银行对安全性更加准确和谨慎。 <br><br>  <b>加藤（Kato）</b>在Inibank工作，在那里，一种名为T24的商业产品被用作银行系统的核心。  T24系统被全球数百家银行使用。 可以针对各种银行解决方案进行定制。 与大多数自定义程序包一样。 有一些专门为它编写代码的程序员，还有一些帮助银行进行重大更新的顾问。 <br><a name="habracut"></a><br>  Inibank员工很忙，因此该银行邀请了一名顾问参加一个特殊项目。 在工作日结束时，银行进行了完成过程，这是必要的，以便使所有款项都转到所指示的位置，重新计算所有必需的输出数据，并执行所有必需的报告。 在银行，此过程还将系统日期更改为下一个工作日。 这就是为什么当您在星期日进行网上银行业务时，直到星期一早晨才开始处理任何一笔交易。 顾问必须创建一个新报告，该报告将在完成过程中执行，并且如果日期对应于月底，则包括其他处理。 <br><br> 加藤向新顾问介绍了该银行如何设置日终报告。  “瞧，我们有上一个工作日，今天和下一个工作日的全局变量。 它们的格式为YYMMDD，以便于使用。 <br><br>  “是的，是的。 知道了 它们采用什么格式？” <br><br>  “……呃……我只能假设这是年，月和日。” <br><br>  “是的，是的，好的。 太好了 然后我开始工作。” <br><br> 谈话之后，加藤对此感到不好。 但是他试图摆脱他。 顾问说，一切都准备就绪。 他完全知道自己在做什么，对吗？  Kato从头顶上扔了下来，不再担心，直到代码审查的时间到了，他发现了一颗明珠： <br><br><pre> <code class="hljs pgsql">TH.DATE = R.DATES(EB.DAT.NEXT.WORKING.DAY)[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>]:"01" <span class="hljs-keyword"><span class="hljs-keyword">CALL</span></span> CDT(<span class="hljs-string"><span class="hljs-string">'ES00'</span></span>,TH.DATE,"-1C") WTODAY = OCONV(<span class="hljs-type"><span class="hljs-type">DATE</span></span>(),"DY") : FMT(OCONV(<span class="hljs-type"><span class="hljs-type">DATE</span></span>(),"DM"),<span class="hljs-string"><span class="hljs-string">'R%2'</span></span>) : FMT(OCONV(<span class="hljs-type"><span class="hljs-type">DATE</span></span>(),"DD"),<span class="hljs-string"><span class="hljs-string">'R%2'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> TH.DATE EQ WTODAY <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span></code> </pre> <br> 简要解释一下这里发生的情况： <br><br><ol><li> 以下一个工作日并将日期更改为01，以获取该月的第一天。 </li><li> 我们通过在西班牙的日历中减去1个日历日来更改此日期。 </li><li> 我们从服务器获取日期并将其转换为YYYYMMDD格式，并三次调用Date命令。 </li><li> 如果在步骤2中计算的日期等于在步骤3中计算的日期，则开始该过程。 </li></ol><br> 好吧，实际上...有效。 在大多数情况下。 除非出于某种原因，否则一天的倒数第二天倒数第二天才不会结束。 在这种情况下，代码将错误地认为这是该月的最后一天，并将开始创建报告。 这很好地解决了另一个问题：如果同一个月的最后一天发生了同样的事情，那么创建报告就不会错误地开始。 最好的错误：如果一个月的最后一天是星期天，则服务器的日历将永远不会安装在该日历上，因为它会跳过非工作日。 <br><br> 说到非工作日：由于Inibank位于美国，因此没有理由使用西班牙日历。 是的，月份和星期是相同的，但是在西班牙语软件日历中，您需要指定在美国的银行假期，否则该程序将继续运行。 最后，似乎还不够，三重日期调用意味着刚好在午夜开始时可能存在分歧：要求月值在午夜之前以及之后的第二天。 <br><br>  Kato添加了一条注释，提出了一种更改代码的方法： <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">IF</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">R</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DATES</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">EB</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DAT</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.TODAY</span></span>)<span class="hljs-selector-attr"><span class="hljs-selector-attr">[5,2]</span></span> # <span class="hljs-selector-tag"><span class="hljs-selector-tag">R</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DATES</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">EB</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DAT</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.LAST</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.WORKING</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DAY</span></span>)<span class="hljs-selector-attr"><span class="hljs-selector-attr">[5,2]</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">THEN</span></span></code> </pre> <br> 五分钟后，顾问去了他的办公桌。  “此编辑是什么意思？” <br><br> 加藤当时不愿争论。  “您的密码已损坏，朋友。 所有这些都是不必要的。” <br><br>  “我明白了，我明白了。 这实际上只是我们行业的标准操作程序。 好吧，好的。” <br><br> 加藤对此表示怀疑，但只是耸了耸肩。  “那么这个行业是错误的。 我在评论中解释了所有内容。” <br><br> 是的。 是的，我读了。 但我会再读一遍。” 然后他突然消失，消失了。 <br><br> 进行了编辑，加藤批准了守则，顾问消失了。 <br><br> 有时，加藤在晚上躺在床上，想知道：顾问真的了解自己做错了什么吗，还是只是同意看一下，收到了支票，然后继续写一个可怕的代码，价格是加藤的两倍？ 在那些没有员工可以验证代码的银行中。 <br><br> 但是不要把所有的钱都投入到比特币上。 那里更糟。 <br><br><h2> 第二个故事。 这是怎么做的 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[原创]</a> <br><br> 人们喜欢吃热狗，直到发现如何做饭为止。 大多数人不问，因为他们不想知道并继续吃热狗。 在开发软件时，我们有时<em>不得不</em>问。 不仅要解决问题，还因为一些程序员担心他们的汽车中的软件以胶带和胶条组装而成，它们以100 km / h的速度沿着高速公路行驶。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们整个行业的工作做得很差</a> 。 <br><br>  <strong>Brett</strong>在MedStitute医学研究中心担任系统分析师。  MedStitute使用了称为MedTech的专有软件来存储和分析数据。 医生和研究人员都喜欢MedTech的结果，但是同事Brett Tyree知道它们是如何创建的。 <br><br> 该软件无权访问后端，并且整个开发过程都在“可编程鼠标” GUI中进行。 这个界面看起来像是一个人写的，他是从90年代开始通过复制粘贴网站研究编程的，然后看了十分钟<em>的《侏罗纪公园》，</em>并寻找StackOverflow的答案，直到可以编译某些东西为止。  “编程语言”在设计理念上也表现出相似的思想水平。 每个都<em>必须</em>有一个<code>else</code> 。 一些模块使用布尔值，其他模块返回空字符串以指示错误值。 从文档中，不清楚哪种情况发生在哪种情况下。 实际上，每个<code>if</code>变成了三个语句。 <br><br> 布雷特需要开始一项新的研究。 它基于一组简单的统计数据，并使用随机变量对患者进行分组。 布雷特（Brett）在列表中寻找可以随机化的变量，但认为没有必要。 他建议他犯了一个错误，并通过复制进行搜索以返回几个屏幕来检查她的名字。  Brett返回到随机变量列表。 她不在那里。 他仔细查看了该列表，并注意到随机变量列表包含来自多项选择字段的数据。 他需要随机分配的字段是基于计算得出的字段。 <br><br>  Brett知道Tyree正在从事另一个按计算场随机分配的项目，因此他在Slack与他联系。  “您如何编码此随机变量？  Medtech是否可以阻止这种情况的发生？” <br><br> 泰里写道：“我正在谈论会议，稍后我会给您回电。” <br><br> 几分钟后，Tyree打电话给Brett。 <br><br>  “您需要从两个领域入手。 比方说 我们称它们<code>$variable_choice</code> （即多项选择题）和<code>$variable_calced</code> （即您的计算字段）。 当您要创建一个基于计算字段执行随机选择的变量时，您可以告诉Medtech该随机变量基于<code>$variable_choice</code> 。 然后删除<code>$variable_choice</code> ，并将<code>$variable_calced</code>重命名为<code>$variable_choice</code> ” <br><br>  “停止，系统允许您执行此操作，但不允许您以任何其他方式随机化计算字段吗？ 她不检查吗？” <br><br>  “我希望一切都没有改变，直到我的项目完成，她才开始验证这一点，”泰瑞回答。 <br><br>  “这项研究应该持续十年。 它的成功完成取决于开发人员是否将此技巧视为错误？” <br><br>  “我设法只找到了这样的解决方案。 让我知道您是否找到更好的选择。” <br><br> 布雷特（Brett）不满意这样的破解，因此他重新研究了文档。 他找到了一个“更好”的解决方案：您可以使用唯一的默认值（即计算所得字段的值）创建一个只读的多选字段。 不幸的是，用户可能会<em>在</em>计算计算字段的值<em>之前</em>通过回答多项选择题来无意中更改列表。 <br><br> 最后，布雷特剩下的唯一一件事就是休息一下，去自助餐厅买几个热狗。 <br><br><h2> 第三个故事。 便携性和硬件 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[原创]</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52e/2cb/0c2/52e2cb0c2e0b8465a1b713aa60dfd474.jpg"></div><br> 许多个月前，当PC装有重金属和塑料外壳时， <b>Matt</b>和他的同事被要求为即将到来的销售部门运营评估软件包。 不幸的是，他和他的同事在同一城市的不同办公室工作。 在那个时代，还没有有效的在线协作工具，因此Matt经常不得不带着PC前往另一个办公室。 这意味着每次需要从机箱473断开外围电缆的连接，沿着走廊和楼梯将计算机携带起来，乘公共汽车去另一个办公室时，他以相反的顺序进行所有操作。 有时，不正确的劳动安排迫使这对夫妇在周末工作，这意味着他们将工作机器带回家。 <br><br> 在此过程中，Matt的计算机中的20 MB硬盘驱动器溢出。 从他的办公室，他向IT部门发送了一个请求。 为了完成该应用程序，任命了Gary的技术人员，该技术人员在一段时间后出现在Matt的立方体中，他拿着新的硬盘和螺丝刀。 加里（Gary）送马特（Matt）喝咖啡，专注于他的“病人”。 经过一番手术后，Matt的PC开机并使用大硬盘驱动器。 <br><br> 在项目截止日期的前一天，Matt几乎完成了自己的工作。 他只需要对报告进行一些补充，然后将其复制到软盘上并发送给销售部门。 将PC放回立方体并连接电线后，他打开电源并听到一声pop啪声。  PC已死，没有任何生命迹象。 <br><br> 在致电IT部门后，加里再次用螺丝刀出现在他的办公室。 他打开电脑机箱，立即尖叫：“等一下！ 您是否将计算机拖到某处？” <br><br> 马特皱了皱眉。  “嗯，是的。 那是东西吗？” <br><br>  “是的，当然！ 你不应该那样做！”加里开始诅咒。  “硬盘开始挂出并短路了里面的所有东西！” <br><br> 马特俯身看加里，亲自看一下计算机内部。 他立即注意到新硬盘已“固定”到磁带上。 <br><br>  “停！ 那<i>你</i>不应该这样做！” 马特指着一块透明胶带。  “以防万一，我应该联系您的主管吗？” <br><br> 加里的脸皱了皱眉。  “他们没有给我必要的紧固件！” <br><br>  “然后找到拥有它们的人！” <br><br> 鉴于迫在眉睫的最后期限，在老板的允许下，马特将他的申请书转更高了。 几乎立即，胶带被真正的硬件所取代。 他从来不理解<i>为什么</i> IT部门的员工无法获得必要的设备； <i>为什么</i> ？ 他建议节省金钱是一些白痴的绝妙主意。  Matt只能猜测还有其他绝望的即兴创作使他们的IT基础架构正常工作，以及如果PC不会损坏，它们会在多长时间内被忽略。 <br><br><h2> 第四个故事。 这就是PL / SQL如何影响您的大脑。 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[原创]</a> <br><br> 在最奇怪，最失败的决定中，永恒的冠军将永远是<em>甲骨文</em> 。 今天我们来看一些PL / SQL代码。 <br><br>  PL / SQL是一种奇怪的语言，它是SQL和语言（过程）语言（语言）的混合体，并且面向对象的内容粘在了一边。 语法极有能力给人以它是1970年代开发的印象，并且每种新功能或语言更改都延续了这一传统。 <br><br> 每个PL / SQL代码模块的结构都是基于<em>块</em>的。 每个块都是一个独立的名称空间。 简而言之，他的解剖结构如下： <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> <span class="hljs-comment"><span class="hljs-comment">-- variable declarations go here BEGIN -- code goes here EXCEPTIONS -- exception handling code goes here, using WHEN clauses END;</span></span></code> </pre> <br> 如果要编写存储过程或事件处理程序，则将<code>DECLARE</code>关键字替换为<code>CREATE [OR REPLACE]</code> 。 您还可以将块嵌套在其他块中，因此经常可以看到以这种方式构造的代码： <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> <span class="hljs-comment"><span class="hljs-comment">--stuff BEGIN --actions END; --more actions END;</span></span></code> </pre> <br> 是的，很快它开始变得混乱。 是的，如果您想至少提供近似结构化的错误处理，则<em>必须</em>开始将各个块放在一起。 <br><br> 语言和数据库还有其他有趣的功能。 在版本12c之前，它们没有<code>IDENTITY</code>列类型。 在以前的版本中，您必须使用<code>SEQUENCE</code>对象并编写执行强制自动编号的过程或事件处理程序。 通常，使用<code>SELECT INTO…</code>运算符将值分配给变量。 奖励：Oracle SQL <em>始终</em>要求在<code>FROM</code>语句中指定一个表，因此您必须使用发明的<code>dual</code>表，如下所示： <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> <span class="hljs-string"><span class="hljs-string">"SOME_TABLE_AUTONUMBER"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEFORE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">"SOME_TABLE"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EACH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> myseq.nextval <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> :new.id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dual; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>;</code> </pre> <br>  <code>:new</code>在这种情况下， <code>:new</code>表示我们要为其自动编号的行。 在旧版本的Oracle中，这是使用自动编号创建列的“常用”方法。  <strong>Benoit</strong>发现了执行相同操作的另一种不太常见的方法： <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> <span class="hljs-string"><span class="hljs-string">"SCHEMA1"</span></span>.<span class="hljs-string"><span class="hljs-string">"TABLE1_TRIGGER"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEFORE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">"SCHEMA1"</span></span>.<span class="hljs-string"><span class="hljs-string">"TABLE1"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EACH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> pl_error_id table1.error_id%<span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span>; CURSOR get_seq IS <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> table1_seq.nextval <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dual; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OPEN</span></span> get_seq; FETCH get_seq INTO pl_error_id; IF get_seq%NOTFOUND THEN raise_application_error(-20001, 'Sequence TABLE1_SEQ does not exist'); CLOSE get_seq; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span>; CLOSE get_seq; :new.error_id := pl_error_id; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> table1_trigger;</code> </pre> <br> 这里发生了很多事情。 首先，请注意<code>DECLARE</code>节包含<code>CURSOR</code>语句。 游标允许您遍历记录。 它们非常昂贵，在Oracle世界中，这是一种需要释放的资源。 <br><br> 此事件处理程序（触发）无缘无故地使用嵌套块。 它还使用附加变量<code>pl_error_id</code> ，可以省去。 <br><br> 但是真正奇怪的是<code>IF get_seq%NOTFOUND</code>块<code>IF get_seq%NOTFOUND</code> 。 一切都很简单：它检查游标不返回字符串的条件。 对于此游标，即使从<em>理论上讲</em>也不会发生这种情况，因此永远不会执行内部操作。 序列始终返回一个值。 考虑到进一步的代码，这<em>很好</em> 。 <br><br>  <code>raise_application_error</code>与Oracle中的throw类似。 该语句在可执行块的堆栈中向上移动，直到找到<code>EXCEPTIONS</code>节来处理该错误为止。 请注意，我们<em>在</em>此语句<em>之后</em>关闭了游标-实际上，我们<em>从不</em>关闭游标。 如上所述，游标很昂贵，Oracle仅允许使用数量有限的游标。 <br><br> 在这里，我们看到一个奇怪的示例，说明开发人员如何尝试防御无法发生的错误，这种错误会随着时间的推移导致新的错误。 <br><br><h2> 第五个故事。 双重加密登录 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[原创]</a> <br><br> 为Web API创建身份验证是一项<em>艰巨的</em>任务，但是它具有<em>许多</em>完善的解决方案。 实际上，最困难的事情是选择各种选项之一，然后仅添加一个组件就足够了。 <br><br> 正确实施后，系统将不依赖于客户端的类型。 我可以通过浏览器，胖客户端或cURL访问该服务。 如果实施不正确，您将了解<strong>Amira的情况</strong> 。 <br><br> 她解决了从后端提取所需统计信息的问题，但无法确定身份验证方法。 因此，她研究了前端代码以了解其如何执行身份验证： <br><br><pre> <code class="javascript hljs">crypt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JSEncrypt(); crypt.setPublicKey(<span class="hljs-string"><span class="hljs-string">'&lt;removed&gt;'</span></span>); challenge = <span class="hljs-string"><span class="hljs-string">"&lt;removed&gt;"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doChallengeResponse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.password.value.replace(<span class="hljs-regexp"><span class="hljs-regexp">/&amp;/g</span></span>, <span class="hljs-string"><span class="hljs-string">'%26'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.password.value.replace(<span class="hljs-regexp"><span class="hljs-regexp">/\\+/g</span></span>, <span class="hljs-string"><span class="hljs-string">'%2B'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.password.value = crypt.encrypt(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.password.value); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.response.value = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.password.value; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.password.value = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.loginForm.submit(); }</code> </pre> <br> 一方面，考虑到用于与DOM元素进行交互的<code>document.loginForm</code> ，我可以假设这段代码很旧。 另一方面， <code>JSEncrypt</code>于2013年首次发布，为我们提供了最大的年龄限制。 <br><br> 我们通过提交表单将访问参数传递给后端，根据代码开发人员的要求，该表单需要进行清理-密码中的所有<code>&amp;</code> <code>+</code>都将被替换，但是...这不是必需的，因为表单必须满足<code>POST</code>请求，此外， <em>我们还对数据进行了加密</em> 。 <br><br> 这就是我的想法。 该代码<em>实际上已经</em>很旧了。 开发人员从2005年左右在StackOverflow上的帖子中复制了该帖子，该帖子未使用加密和通过<code>POST</code>表单。 年复一年，对其进行了小的更改。 但基本机制从未改变。 <br><br>  Amira检查了历史记录，发现以前的版本未使用加密。      <code>challenge</code> ,    MD5,     <em></em>  ,     ,       . <br><br>     :   ,     ,         ,     ,    cURL      -.          ,    <em>    SSL/TLS</em> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN446714/">https://habr.com/ru/post/zh-CN446714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN446702/index.html">还有另一个怪异的耳机-睡觉</a></li>
<li><a href="../zh-CN446706/index.html">PostgreSQL中的并行查询</a></li>
<li><a href="../zh-CN446708/index.html">空间通信系统比较</a></li>
<li><a href="../zh-CN446710/index.html">使用微服务架构的四个真实故事-后端United 3 mitap的报告：Kholodets</a></li>
<li><a href="../zh-CN446712/index.html">HTTPS并不总是看起来那么安全。 在5.5％的HTTPS站点中发现漏洞</a></li>
<li><a href="../zh-CN446716/index.html">世界末日的意识和争论</a></li>
<li><a href="../zh-CN446718/index.html">回顾CodeFest 2019最有趣的报告：True Engineering版本</a></li>
<li><a href="../zh-CN446722/index.html">测试将显示：如何为实施思科ISE做准备，并了解所需的系统功能</a></li>
<li><a href="../zh-CN446724/index.html">iOS开发人员如何通过云计算提高竞争力</a></li>
<li><a href="../zh-CN446726/index.html">光学流量计算中的深度学习</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>