<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úãüèº üé° üë©‚Äçüé® Mono-r√©f√©rentiels: veuillez ne pas le faire (partie 2) ‚úíÔ∏è üë®üèæ‚Äçüîß üë©üèø‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! 

 Donc, une nouvelle partie de l'holivar promis sur les monorepositoires. Dans la premi√®re partie, nous avons discut√© de la traductio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mono-r√©f√©rentiels: veuillez ne pas le faire (partie 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436264/"> Bonjour √† tous! <br><br>  Donc, une nouvelle partie de l'holivar promis sur les monorepositoires.  Dans la premi√®re partie, nous avons discut√© de la traduction d'un article par un ing√©nieur respect√© de Lyft (et pr√©c√©demment Twitter) sur quels sont les inconv√©nients des mono-r√©f√©rentiels et pourquoi ils nivellent presque tous les avantages de cette approche.  Personnellement, je suis largement d'accord avec les arguments pr√©sent√©s dans l'article d'origine.  Mais, comme promis, pour mettre un terme √† cette discussion, je voudrais exprimer quelques points suppl√©mentaires, √† mon avis encore plus importants et plus pratiques. <br><a name="habracut"></a><br>  Je vais vous parler un peu de moi - j'ai travaill√© √† la fois dans de petits projets et dans des projets relativement importants, j'ai utilis√© des polyrepositoires dans un projet avec plus de 100 microservices (et SLA √† 99,999%).  En ce moment, je suis engag√© dans la traduction d'un petit mono-d√©p√¥t (en fait pas, juste le front js + backend java) de maven en bazel.  N'a pas fonctionn√© sur Google, Facebook, Twitter, c.-√†-d.  Je n'ai pas eu le plaisir d'utiliser un mono-r√©f√©rentiel correctement configur√© et r√©gl√©. <br><br>  Alors, pour commencer, qu'est-ce qu'un monorepositaire?  Les commentaires sur la traduction de l'article original ont montr√© que beaucoup pensent qu'un mono-r√©f√©rentiel, c'est quand les 5 d√©veloppeurs de l'entreprise travaillent sur un seul r√©f√©rentiel et y stockent le frontend et le backend ensemble.  Bien s√ªr, ce n'est pas le cas.  Un mono-r√©f√©rentiel est un moyen de stocker tous les projets de l'entreprise, les biblioth√®ques, les outils de construction, les plug-ins IDE, les scripts de d√©ploiement et tout le reste dans un grand r√©f√©rentiel.  Les d√©tails ici sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trunkbaseddevelopment.com</a> . <br><br>  Comment s'appelle l'approche lorsque l'entreprise est petite et qu'elle n'a tout simplement pas autant de projets, modules, composants?  C'est aussi un monorepositaire, seulement petit. <br>  Naturellement, l'article original dit que tous les probl√®mes d√©crits commencent √† appara√Ætre √† une certaine √©chelle.  Par cons√©quent, ceux qui √©crivent que leur mono-r√©f√©rentiel de 1.5 digger fonctionne parfaitement ont certainement tout √† fait raison. <br><br>  Donc, le premier fait que je voudrais corriger: un <b>monorepositaire est un bon d√©but pour votre nouveau projet</b> .  En mettant tout le code dans un m√™me tas, au d√©but, vous n'aurez qu'un seul avantage, car  la prise en charge de plusieurs r√©f√©rentiels ajoutera certainement un peu de surcharge. <br><br>  Quel est donc le probl√®me?  Et le probl√®me, comme indiqu√© dans l'article d'origine, commence √† une certaine √©chelle.  Et surtout, ne manquez pas le moment o√π une telle √©chelle est d√©j√† arriv√©e. <br><br>  Par cons√©quent, je suis enclin √† affirmer que, essentiellement, les probl√®mes qui se posent ne sont pas les probl√®mes de l'approche ¬´mettre tout votre code dans un seul tas¬ª, mais ce sont des probl√®mes de r√©f√©rentiels de code source simplement volumineux.  C'est-√†-dire  en supposant que vous avez utilis√© des polyrepositoires pour diff√©rents services / composants, et que l'un de ces services est devenu si grand (quelle taille, nous en discuterons un peu plus tard), vous obtiendrez tr√®s probablement exactement les m√™mes probl√®mes, mais aussi sans les avantages des mono-r√©f√©rentiels (s'ils Bien s√ªr qu'il y en a). <br><br>  Alors, quelle devrait √™tre la taille du r√©f√©rentiel pour commencer √† √™tre consid√©r√© comme probl√©matique? <br>  Il y a certainement 2 indicateurs dont cela d√©pend - la quantit√© de code et le nombre de d√©veloppeurs travaillant avec ce code.  Si votre projet contient des t√©raoctets de code, mais que 1-2 personnes y travaillent, il est fort probable qu'ils ne remarqueront presque pas de probl√®mes (enfin, ou du moins il sera plus facile de ne rien faire, m√™me s'ils le remarquent :) <br><br>  Comment d√©terminer qu'il est temps de r√©fl√©chir √† la fa√ßon d'am√©liorer votre r√©f√©rentiel?  Bien s√ªr, c'est un indicateur subjectif, vos d√©veloppeurs commenceront probablement √† se plaindre que quelque chose ne leur convient pas.  Mais le probl√®me est qu'il peut √™tre trop tard pour changer quelque chose.  Permettez-moi de vous donner quelques chiffres personnels: si le clonage de votre r√©f√©rentiel prend plus de 10 minutes, si la construction d'un projet prend plus de 20-30 minutes, si le nombre de d√©veloppeurs d√©passe 50, et ainsi de suite. <br><br><div class="spoiler">  <b class="spoiler_title">Un fait int√©ressant de la pratique personnelle:</b> <div class="spoiler_text">  J'ai travaill√© sur un assez gros monolithe au sein d'une √©quipe d'une cinquantaine de d√©veloppeurs, r√©partis en plusieurs petites √©quipes.  Le d√©veloppement a √©t√© effectu√© dans des brunchs de fonctionnalit√©s, et la fusion a eu lieu juste avant le gel des fonctionnalit√©s.  Une fois, j'ai pass√© 3 jours sur la fusion de notre branche d'√©quipe apr√®s que 6 autres √©quipes se sont fig√©es devant moi. <br></div></div><br>  Passons maintenant en revue la liste de ces probl√®mes qui surviennent dans les grands r√©f√©rentiels (certains d'entre eux ont √©t√© mentionn√©s dans l'article d'origine, d'autres ne le sont pas). <br><br><h4>  1) Temps de t√©l√©chargement du r√©f√©rentiel </h4><br>  D'une part, on peut dire qu'il s'agit d'une op√©ration ponctuelle que le d√©veloppeur effectue lors de la configuration initiale de son poste de travail.  Personnellement, j'ai souvent des situations o√π je veux cloner un projet dans un dossier voisin, creuser plus profond√©ment dans celui-ci, puis le supprimer.  Cependant, si le clonage prend plus de 10 √† 20 minutes, cela ne sera pas aussi pratique. <br><br>  Mais en plus, n'oubliez pas qu'avant d'assembler le projet sur le serveur CI, vous devez cloner le r√©f√©rentiel de chaque agent de build.  Et ici, vous commencez √† comprendre comment gagner du temps, car si chaque assemblage prend 10 √† 20 minutes de plus et que le r√©sultat de l'assemblage appara√Æt 10 √† 20 minutes plus tard, cela ne conviendra √† personne.  Ainsi, le r√©f√©rentiel commence √† appara√Ætre dans les images des machines virtuelles √† partir desquelles les agents sont d√©ploy√©s, une complexit√© suppl√©mentaire et des co√ªts suppl√©mentaires pour la prise en charge de cette solution apparaissent. <br><br><h4>  2) Construire le temps </h4><br>  C'est un point assez √©vident qui a √©t√© discut√© √† plusieurs reprises.  En fait, si vous avez beaucoup de codes sources, l'assemblage prendra en tout cas un temps consid√©rable.  Une situation famili√®re survient lorsque, apr√®s avoir modifi√© une ligne de code, vous devez attendre une demi-heure jusqu'√† ce que les modifications soient r√©assembl√©es et test√©es.  En fait, il n'y a qu'une seule issue: utiliser un syst√®me de build bas√© sur les r√©sultats de mise en cache et les builds incr√©mentiels. <br><br>  Il n'y a pas tellement d'options ici - malgr√© le fait que les capacit√©s de mise en cache ont √©t√© ajout√©es au m√™me gradle (malheureusement, je ne les ai pas utilis√©es dans la pratique), elles n'apportent pas d'avantages pratiques car les syst√®mes de construction traditionnels n'ont pas de r√©sultats reproductibles (versions reproductibles).  C'est-√†-dire  en raison des effets secondaires de la version pr√©c√©dente, de toute fa√ßon, √† un moment donn√©, il sera n√©cessaire d'appeler le nettoyage du cache (l'approche standard de <code>maven clean build</code> ).  Par cons√©quent, il ne reste que l'option d'utiliser Bazel / Buck / Pants et d'autres comme eux.  Pourquoi ce n'est pas tr√®s bon, nous en discuterons un peu plus tard. <br><br><h4>  3) Indexation IDE </h4><br>  Mon projet actuel est index√© dans Intellij IDEA pendant 30 √† 40 minutes.  Et le v√¥tre?  Bien s√ªr, vous ne pouvez ouvrir qu'une partie du projet ou exclure tous les modules inutiles de l'indexation, mais ... Le probl√®me est que la r√©indexation se produit chaque fois que vous passez d'une branche √† une autre.  C'est pourquoi j'aime cloner un projet dans un r√©pertoire voisin.  Certaines personnes commencent √† mettre en cache le cache IDE :) <br>  &lt;Image DiCaprio avec les yeux pliss√©s&gt; <br><br><h4>  4) Cr√©er des journaux </h4><br>  Quel serveur CI utilisez-vous?  Fournit-il une interface pratique pour afficher et parcourir plusieurs gigaoctets de journaux de build?  Malheureusement, le mien n'est pas :( <br><br><h4>  5) Historique des commits </h4><br>  Aimez-vous regarder l'historique des commit?  J'adore, surtout dans un outil avec une interface graphique (je per√ßois mieux l'information visuellement, ne gronde pas :). <br><div class="spoiler">  <b class="spoiler_title">Voici √† quoi ressemble l'historique des validations dans mon r√©f√©rentiel</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/h1/y5/_4/h1y5_4hjo4iyeo6frm57gjwsvgk.png" alt="image"><br></div></div><br>  Vous l'aimez?  Est-ce pratique?  Personnellement, je n'en ai pas! <br><br><h4>  6) Tests bris√©s </h4><br>  Que se passe-t-il si quelqu'un a pu ex√©cuter des tests cass√©s / du code non compilable dans le ma√Ætre?  Vous direz certainement que votre CI ne vous permet pas de le faire.  Qu'en est-il des tests instables que l'auteur r√©ussit, et personne d'autre?  Imaginez maintenant que ce code se propage aux machines de 300 d√©veloppeurs, et qu'aucun d'eux ne peut assembler un projet?  Que faire dans une telle situation?  Attendez que l'auteur remarque et corrige?  Correct pour lui?  Annuler les modifications?  Bien s√ªr, id√©alement, il vaut la peine de n'engager que du bon code et d'√©crire imm√©diatement sans bugs.  Un tel probl√®me ne se posera alors pas. <br>  (pour ceux qui n'ont pas compris les indices dans le r√©servoir, le discours sur l'effet n√©gatif si cela se produit dans le r√©f√©rentiel avec 10 d√©veloppeurs et dans le r√©f√©rentiel avec 300 sera l√©g√®rement diff√©rent) <br><br><h4>  7) Fusionner le bot </h4><br>  Avez-vous d√©j√† entendu parler d'une telle chose?  Savez-vous pourquoi vous en avez besoin?  Vous allez rire, mais c'est un autre outil qui n'aurait pas d√ª exister :) Imaginez que le temps de construction de votre projet soit de 30 minutes.  Et 100 d√©veloppeurs travaillent sur votre projet.  Supposons que chacun d'eux envoie 1 commit par jour.  Imaginez maintenant un CI honn√™te, qui vous permet de fusionner les modifications apport√©es au ma√Ætre uniquement apr√®s qu'elles ont √©t√© appliqu√©es √† la derni√®re validation du ma√Ætre (rebase). <br><br>  Attention, la question est: combien d'heures devrait-il y avoir dans une journ√©e pour qu'un serveur CI aussi honn√™te √©trangle les changements de tous les d√©veloppeurs?  La bonne r√©ponse est 50. Ceux qui ont r√©pondu correctement peuvent prendre une carotte sur une √©tag√®re.  Eh bien, ou imaginez comment vous venez de couper votre commit sur le tout dernier commit sur le master, que vous avez commenc√© l'assemblage, et quand il a √©t√© termin√©, le master a d√©j√† pass√© 20 commits.  Encore une fois? <br><br>  Ainsi, le bot de fusion ou la file d'attente de fusion est un service qui automatise le processus de rebasage de toutes les demandes de fusion pour un nouveau ma√Ætre, l'ex√©cution de tests et la fusion elle-m√™me, et peut √©galement combiner des validations en lots et les tester ensemble.  Chose tr√®s pratique.  Voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mergify.io</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">k8s test-infra Prow</a> de Google, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bors-ng</a> , etc. (je promets d'√©crire plus √† ce sujet √† l'avenir) <br><br>  Maintenant pour des probl√®mes moins techniques: <br><br><h4>  8) Utilisation d'un seul outil de construction </h4><br>  Honn√™tement, c'est toujours un myst√®re pour moi pourquoi assembler le mono-r√©f√©rentiel entier en utilisant un syst√®me de construction commun.  Pourquoi ne pas construire javascript avec Yarn, java avec gradle, Scala avec sbt, etc.?  Si quelqu'un conna√Æt la r√©ponse √† cette question (ne devine pas ou ne sugg√®re pas, √† savoir sait), √©crivez dans les commentaires. <br><br>  Bien s√ªr, il semble √©vident que l'utilisation d'un syst√®me de build est meilleure que plusieurs syst√®mes diff√©rents.  Mais ils comprennent toujours que toute chose universelle est √©videmment pire qu'une chose sp√©cialis√©e, car  il n'a probablement qu'un sous-ensemble des fonctions de tous les sp√©cialistes.  Mais pire encore, diff√©rents langages de programmation peuvent avoir des paradigmes diff√©rents en termes d'assemblage, de gestion des d√©pendances, etc., qui seront tr√®s difficiles √† encapsuler dans un seul wrapper commun.  Je ne veux pas entrer dans les d√©tails, je vais donner un exemple sur bazel (voir les d√©tails dans un article s√©par√©) - nous avons trouv√© 5 impl√©mentations ind√©pendantes des r√®gles d'assemblage javascript pour bazel de 5 entreprises diff√©rentes sur GitHub, ainsi que celle officielle de Google.  √áa vaut la peine d‚Äôy penser. <br><br><h4>  9) Approches g√©n√©rales </h4><br>  En r√©ponse √† l'article original, le CTO de Chef a √©crit sa r√©ponse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Monorepo: s'il vous pla√Æt!</a>  .  Dans sa r√©ponse, il soutient que "l'essentiel du monorepo est qu'il vous fait parler et rend les d√©fauts visibles".  Il signifie que lorsque vous souhaitez modifier votre API, vous devrez trouver toutes ses utilisations et discuter de vos modifications avec les responsables de ces morceaux de code. <br><br>  Mon exp√©rience est donc exactement le contraire.  Il est clair que cela d√©pend beaucoup de la culture d'ing√©nierie de l'√©quipe, mais je vois de solides inconv√©nients dans cette approche.  Imaginez que vous utilisez une certaine approche qui vous a fid√®lement servi pendant un certain temps.  Et vous avez donc d√©cid√© pour une raison quelconque, en r√©solvant un probl√®me similaire, d'utiliser une m√©thode l√©g√®rement diff√©rente, peut-√™tre plus moderne.  Quelle est la probabilit√© que l'ajout d'une nouvelle approche passe par un examen? <br><br>  Dans mon pass√© r√©cent, j'ai re√ßu plusieurs fois des commentaires tels que ¬´nous avons d√©j√† un chemin prouv√©, utilisez-le¬ª et ¬´si vous voulez mettre en ≈ìuvre une nouvelle approche, mettez √† jour le code dans les 120 endroits o√π l'ancienne approche est utilis√©e et obtenez la mise √† jour de toutes les √©quipes responsables de ces morceaux de code. "  Habituellement, l'enthousiasme de l '¬´innovateur¬ª s'arr√™te l√†. <br><br>  Et combien, √† votre avis, cela co√ªtera-t-il d'√©crire un nouveau service dans un nouveau langage de programmation?  Dans le r√©f√©rentiel - pas du tout.  Vous cr√©ez un nouveau r√©f√©rentiel et √©crivez, et prenez m√™me le syst√®me de construction le plus appropri√©.  Et maintenant la m√™me chose dans le monorepositaire? <br><br>  Je comprends tr√®s bien que ¬´standardisation, r√©utilisation, partage de code¬ª, mais le projet doit √™tre d√©velopp√©.  √Ä mon avis subjectif, un monorepositaire emp√™che plut√¥t cela. <br><br><h4>  10) Open source </h4><br>  R√©cemment, on m'a demand√©: ¬´ <b>existe-t-il des outils open source pour les mono-r√©f√©rentiels?</b> ¬ª J'ai r√©pondu: ¬´Le probl√®me est que les outils pour les mono-r√©f√©rentiels, assez curieusement, sont d√©velopp√©s √† l'int√©rieur du mono-r√©f√©rentiel lui-m√™me.  Par cons√©quent, les mettre en open source est assez difficile! ¬ª <br><br>  Par exemple, regardez un projet sur Github avec un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin bazel pour Intellij IDEA</a> .  Google le d√©veloppe dans son r√©f√©rentiel interne, puis en ¬´√©clabousse¬ª certaines parties sur Github avec une perte d'historique de validation, sans possibilit√© d'envoyer une demande de pull, etc.  Je ne pense pas que ce soit open source (voici un exemple de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mon petit PR</a> , qui a √©t√© ferm√©, au lieu d'une fusion, puis les changements sont apparus dans la prochaine version).  Soit dit en passant, ce fait a √©t√© mentionn√© dans l'article d'origine que les mono-r√©f√©rentiels les emp√™chent de publier en open-source et de cr√©er une communaut√© autour du projet.  Je pense que beaucoup n'ont pas attach√© beaucoup d'importance √† cet argument. <br><br><h4>  Alternatives </h4><br>  Eh bien, si nous parlons de quoi faire pour √©viter tous ces probl√®mes?  Il y a exactement un conseil - efforcez-vous d'avoir un r√©f√©rentiel aussi petit que possible. <br>  Mais qu'en est-il du monorepositaire?  Et m√™me si cette approche vous prive de la possibilit√© d'avoir des r√©f√©rentiels petits, l√©gers et ind√©pendants. <br><br>  Quels sont les inconv√©nients de l'approche polyr√©f√©rentielle?  Je vois exactement 1: l'incapacit√© de garder une trace de qui est le consommateur de votre API.  Cela est particuli√®rement vrai de l'approche des microservices <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´ne rien partager¬ª</a> , dans laquelle le code ne cherche pas entre les microservices.  (Soit dit en passant, pensez-vous que quelqu'un utilise cette approche dans les mono-r√©f√©rentiels?) Malheureusement, ce probl√®me doit √™tre r√©solu soit par des moyens organisationnels, soit essayer d'utiliser des outils de navigation dans le code qui prennent en charge des r√©f√©rentiels ind√©pendants (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://sourcegraph.com /</a> ). <br><br>  Qu'en est-il des commentaires comme <b>¬´nous avons essay√© des polyrepositories, mais nous avons ensuite d√ª constamment impl√©menter des fonctionnalit√©s dans plusieurs r√©f√©rentiels √† la fois, ce qui √©tait fastidieux, et nous avons tout fusionn√© dans une seule chaudi√®re¬ª</b> ?  La r√©ponse √† cette question est tr√®s simple: <b>"ne confondez pas les probl√®mes de l'approche avec une d√©composition incorrecte</b> . <b>"</b>  Personne ne pr√©tend que le r√©f√©rentiel doit contenir exactement un microservice et c'est tout.  Lorsque j'utilisais des polyrepositoires, nous avons parfaitement r√©uni une famille de microservices √©troitement li√©s dans un m√™me r√©f√©rentiel.  N√©anmoins, compte tenu du fait qu'il y avait plus de 100 services, il y avait plus de 20 r√©f√©rentiels de ce type. La chose la plus importante √† consid√©rer en termes de d√©composition est de savoir comment ces services seront d√©ploy√©s. <br><br>  Mais qu'en est-il de l'argument de la version?  Apr√®s tout, les mono-r√©f√©rentiels vous permettent de n'avoir aucune version et de tout d√©ployer √† partir d'un seul commit!  Premi√®rement, le versioning est le plus simple de tous les probl√®mes √©voqu√©s ici.  M√™me dans une vieille chose comme maven, il existe un plugin maven-version qui vous permet de r√©trograder la version en un seul clic.  Et deuxi√®mement et surtout, votre entreprise dispose-t-elle d'applications mobiles?  Si c'est le cas, alors vous avez d√©j√† des versions, et vous n'irez nulle part! <br><br>  Eh bien, il y a toujours l'argument principal en faveur des mono-r√©f√©rentiels - cela vous permet de refactoriser la base de code en un seul commit!  En fait, non.  Comme mentionn√© dans l'article d'origine, en raison des limitations impos√©es par le d√©ploiement.  Vous devez toujours garder √† l'esprit que pendant longtemps (la dur√©e d√©pend de la fa√ßon dont votre processus est construit), vous aurez 2 versions du m√™me service en parall√®le.  Par exemple, sur mon dernier projet, notre syst√®me √©tait dans cet √©tat pendant plusieurs heures √† chaque d√©ploiement.  Cela conduit au fait qu'il est impossible de proc√©der √† des refactorings globaux affectant les interfaces d'interaction dans un seul commit, m√™me dans un mono-r√©f√©rentiel. <br><br><h4>  Au lieu d'une conclusion: </h4><br>  Donc, ces respect√©s et quelques coll√®gues qui travaillent dans Google, Facebook, etc.  et venez ici pour d√©fendre leurs mono-r√©f√©rentiels, je veux dire: "Ne vous inqui√©tez pas, vous faites tout correctement, profitez de votre r√©glage, qui a √©t√© d√©pens√© des centaines de milliers ou des millions d'heures humaines.  Ils ont d√©j√† √©t√© d√©pens√©s, donc si vous ne les utilisez pas, personne ne le fera. " <br><br>  Et √† tout le monde: <b>"Vous n'√™tes pas Google, n'utilisez pas de mono-r√©f√©rentiels!"</b> <br><br>  <b>P.S.</b>  comme l'a not√© le respect√© Bobuk dans le podcast <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">radio-T</a> lors de la discussion de l'article original: ¬´Il y a environ 20 entreprises dans le monde qui peuvent utiliser un seul r√©f√©rentiel.  <b>Les autres ne devraient m√™me pas essayer</b> . ¬ª </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436264/">https://habr.com/ru/post/fr436264/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436250/index.html">Patrons suceurs de sang hors de leur contexte ou pourquoi ils √©chouent toujours</a></li>
<li><a href="../fr436254/index.html">Un bot pour Starcraft en rouille, C ou toute autre langue</a></li>
<li><a href="../fr436256/index.html">Obtenir un emploi en Allemagne sera plus facile</a></li>
<li><a href="../fr436260/index.html">Erreurs et pi√®ges des startups dans le brevetage de leur propri√©t√© intellectuelle</a></li>
<li><a href="../fr436262/index.html">* La mise √† jour d'Ethereum "Constantinople" est report√©e en raison d'une vuln√©rabilit√© potentielle trouv√©e au dernier moment</a></li>
<li><a href="../fr436266/index.html">Mise √† l'√©chelle extr√™me dans Alibaba JDK</a></li>
<li><a href="../fr436268/index.html">Nous collectons un jeu complet</a></li>
<li><a href="../fr436270/index.html">35% de l'audience Runet n'utilise pas du tout d'ordinateur pour Internet</a></li>
<li><a href="../fr436272/index.html">Programmation visuelle pour Sonoff Basic</a></li>
<li><a href="../fr436276/index.html">Visualisation tridimensionnelle dans des simulateurs de mat√©riel roulant bas√©s sur le moteur OpenSceneGraph</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>