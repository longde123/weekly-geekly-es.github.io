<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ½ï¸ ğŸ‡ğŸ» ğŸŒ“ Arsitektur dan Fitur Tarantool Data Grid ğŸ‘©â€ğŸ³ ğŸ’‘ ğŸšˆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada tahun 2017, kami memenangkan persaingan untuk pengembangan inti transaksi bisnis investasi Bank Alfa dan mulai bekerja (di HighLoad ++ 2018 , Vla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arsitektur dan Fitur Tarantool Data Grid</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/466155/"><img src="https://habrastorage.org/webt/v7/6-/di/v76-dikmo5ifekbsg35xutol68s.jpeg"><br><br>  Pada tahun 2017, kami memenangkan persaingan untuk pengembangan inti transaksi bisnis investasi Bank Alfa dan mulai bekerja (di HighLoad ++ 2018 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">,</a> Vladimir Drynkin, Kepala Inti Transaksional Bisnis Investasi Bank Alfa, menyajikan laporan tentang inti bisnis investasi).  Sistem ini untuk mengumpulkan data transaksi dari berbagai sumber dalam berbagai format, membawa data ke bentuk terpadu, menyimpannya dan menyediakan akses ke sana. <br><br>  Dalam proses pengembangan, sistem berevolusi dan menjadi fungsional, dan pada titik tertentu kami menyadari bahwa kami mengkristalkan sesuatu yang lebih dari sekadar perangkat lunak aplikasi yang dirancang untuk memecahkan berbagai tugas yang didefinisikan dengan ketat: kami mendapat <b>sistem untuk membangun aplikasi terdistribusi dengan penyimpanan persisten</b> .  Pengalaman kami membentuk dasar dari produk baru - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tarantool Data Grid</a> (TDG). <br><br>  Saya ingin berbicara tentang arsitektur TDG dan solusi yang kami buat selama proses pengembangan, memperkenalkan Anda dengan fungsi dasar dan menunjukkan bagaimana produk kami dapat menjadi dasar untuk membangun solusi lengkap. <br><a name="habracut"></a><br>  Secara arsitektur, kami membagi sistem menjadi <i>peran yang</i> terpisah, yang masing-masing bertanggung jawab untuk menyelesaikan serangkaian tugas tertentu.  Satu instance menjalankan aplikasi mengimplementasikan satu atau lebih tipe peran.  Cluster dapat memiliki beberapa peran dengan tipe yang sama: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdc/d63/482/cdcd634820cb3878bb338fcc6c5c5829.png"><br><br><h3>  Konektor </h3><br>  Connector bertanggung jawab untuk komunikasi dengan dunia luar;  tugasnya adalah menerima permintaan, menguraikannya, dan jika itu berhasil, kemudian mengirim data untuk diproses ke prosesor input.  Kami mendukung format HTTP, SOAP, Kafka, FIX.  Arsitektur memungkinkan Anda untuk hanya menambahkan dukungan untuk format baru, dukungan IBM MQ segera hadir.  Jika parsing permintaan gagal, konektor akan mengembalikan kesalahan;  jika tidak, ia akan menjawab bahwa permintaan berhasil diproses, bahkan jika terjadi kesalahan selama proses selanjutnya.  Ini dilakukan dengan sengaja, agar dapat bekerja dengan sistem yang tidak tahu cara mengulangi permintaan - atau sebaliknya, melakukannya terlalu agresif.  Agar tidak kehilangan data, antrian perbaikan digunakan: objek pertama kali memasukkannya dan hanya setelah pemrosesan berhasil dihapus dari itu.  Administrator dapat menerima pemberitahuan tentang objek yang tersisa dalam antrian perbaikan, dan setelah menghilangkan kesalahan perangkat lunak atau kegagalan perangkat keras, coba lagi. <br><br><h3>  Prosesor masukan </h3><br>  Prosesor input mengklasifikasikan data yang diterima berdasarkan karakteristik dan memanggil penangan yang sesuai.  Handler adalah kode Lua yang berjalan di kotak pasir, sehingga tidak dapat memengaruhi fungsi sistem.  Pada tahap ini, data dapat direduksi menjadi bentuk yang diinginkan, dan jika perlu, jalankan sejumlah tugas sewenang-wenang yang dapat mengimplementasikan logika yang diperlukan.  Misalnya, dalam produk MDM (Master Data Management) yang dibangun di Tarantool Data Grid, saat menambahkan pengguna baru, kami menjalankan tugas terpisah agar tidak memperlambat pemrosesan permintaan.  Kotak pasir mendukung permintaan untuk membaca, mengubah, dan menambahkan data, memungkinkan Anda untuk melakukan beberapa fungsi pada semua peran seperti penyimpanan dan mengagregasikan hasilnya (memetakan / mengurangi). <br><br>  Penangan dapat dijelaskan dalam file: <br><br><pre><code class="lua hljs">sum.lua <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> x, y = <span class="hljs-built_in"><span class="hljs-built_in">unpack</span></span>(...) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y</code> </pre> <br>  Dan kemudian, dinyatakan dalam konfigurasi: <br><br><pre> <code class="lua hljs">functions: sum: { __file: sum.lua }</code> </pre><br><blockquote>  Kenapa Lua?  Lua adalah bahasa yang sangat sederhana.  Berdasarkan pengalaman kami, beberapa jam setelah bertemu dengannya, orang-orang mulai menulis kode yang memecahkan masalah mereka.  Dan ini bukan hanya pengembang profesional, tetapi misalnya, analis.  Selain itu, berkat kompiler jit, Lua sangat cepat. </blockquote><br><h3>  Penyimpanan </h3><br>  Penyimpanan menyimpan data persisten.  Sebelum menyimpan, data divalidasi untuk kepatuhan dengan skema data.  Untuk menjelaskan skema, kami menggunakan format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apache Avro yang</a> diperluas.  Contoh: <br><br><pre> <code class="lua hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"User"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"record"</span></span>, <span class="hljs-string"><span class="hljs-string">"logicalType"</span></span>: <span class="hljs-string"><span class="hljs-string">"Aggregate"</span></span>, <span class="hljs-string"><span class="hljs-string">"fields"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"first_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"last_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>} ], <span class="hljs-string"><span class="hljs-string">"indexes"</span></span>: [<span class="hljs-string"><span class="hljs-string">"id"</span></span>] }</code> </pre> <br>  Berdasarkan uraian ini, DDL (Data Definition Language) untuk Tarantula DBMS dan skema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GraphQL</a> untuk akses data secara otomatis dihasilkan. <br><br>  Replikasi data asinkron didukung (rencana untuk menambahkan sinkron). <br><br><h3>  Prosesor keluaran </h3><br>  Terkadang perlu untuk memberi tahu konsumen eksternal tentang kedatangan data baru, untuk ini ada peran prosesor Output.  Setelah menyimpan data, mereka dapat ditransfer ke penangan yang sesuai (misalnya, untuk membawanya ke bentuk yang diminta konsumen) - dan kemudian ditransfer ke konektor untuk pengiriman.  Antrian perbaikan juga digunakan di sini: jika tidak ada yang menerima objek, administrator dapat mencoba lagi nanti. <br><br><h3>  Scaling </h3><br>  Peran konektor, prosesor input, dan prosesor output tidak memiliki kewarganegaraan, yang memungkinkan kami untuk menskala sistem secara horizontal, cukup menambahkan instance aplikasi yang baru dengan memasukkan peran yang termasuk dalam tipe yang diinginkan.  Untuk penskalaan penyimpanan horisontal, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pendekatan</a> untuk organisasi kelompok menggunakan ember virtual digunakan.  Setelah menambahkan server baru, bagian dari ember dari server lama di latar belakang pindah ke server baru;  ini terjadi secara transparan kepada pengguna dan tidak mempengaruhi operasi seluruh sistem. <br><br><h3>  Properti Data </h3><br>  Objek bisa sangat besar dan berisi objek lain.  Kami memastikan keaslian menambahkan dan memperbarui data, menyimpan objek dengan semua dependensi pada satu ember virtual.  Ini menghilangkan "noda" objek di beberapa server fisik. <br><br>  Versi didukung: setiap pembaruan objek membuat versi baru, dan kami selalu dapat membuat irisan waktu dan melihat bagaimana dunia terlihat saat itu.  Untuk data yang tidak memerlukan riwayat panjang, kami dapat membatasi jumlah versi atau bahkan hanya menyimpan satu - yang terakhir - yaitu, sebenarnya menonaktifkan versi untuk jenis tertentu.  Anda juga dapat membatasi riwayat berdasarkan waktu: misalnya, menghapus semua objek dari jenis tertentu yang lebih tua dari 1 tahun.  Pengarsipan juga didukung: kita dapat membongkar objek yang lebih tua dari waktu yang ditentukan, membebaskan ruang di cluster. <br><br><h3>  Tugasnya </h3><br>  Dari fungsi-fungsi yang menarik, perlu dicatat kemampuan untuk menjalankan tugas sesuai jadwal, atas permintaan pengguna, atau secara terprogram dari kotak pasir: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ca/c14/fcf/0cac14fcf839b96ebf4ca0b544c25f68.png"><br><br>  Di sini kita melihat pelari peran lainnya.  Peran ini tidak memiliki status, dan jika perlu, contoh aplikasi tambahan dengan peran ini dapat ditambahkan ke kluster.  Tanggung jawab pelari adalah menyelesaikan tugas.  Sebagaimana dinyatakan, pembuatan tugas baru dari kotak pasir dimungkinkan;  mereka mengantri di penyimpanan dan kemudian dijalankan di pelari.  Jenis tugas ini disebut Ayub.  Kami juga memiliki jenis tugas yang disebut Tugas - ini adalah tugas yang ditentukan pengguna yang dijadwalkan untuk dijalankan (menggunakan sintaks cron) atau sesuai permintaan.  Untuk menjalankan dan melacak tugas-tugas tersebut, kami memiliki pengelola tugas yang praktis.  Agar fungsi ini tersedia, Anda harus mengaktifkan peran penjadwal;  peran ini memiliki keadaan, oleh karena itu tidak skala, yang, bagaimanapun, tidak diperlukan;  Namun, dia, seperti semua peran lain, mungkin memiliki replika yang mulai bekerja jika sang master tiba-tiba menolak. <br><br><h3>  Logger </h3><br>  Peran lain disebut logger.  Itu mengumpulkan log dari semua anggota cluster dan menyediakan antarmuka untuk mengunggah dan melihatnya melalui antarmuka web. <br><br><h3>  Layanan </h3><br>  Perlu disebutkan bahwa sistem membuatnya mudah untuk membuat layanan.  Dalam file konfigurasi, Anda dapat menentukan permintaan mana yang harus dikirim ke handler yang ditulis pengguna yang berjalan di kotak pasir.  Dalam penangan ini, Anda dapat, misalnya, menjalankan beberapa jenis permintaan analitik dan mengembalikan hasilnya. <br><br>  Layanan dijelaskan dalam file konfigurasi: <br><br><pre> <code class="lua hljs">services: sum: doc: <span class="hljs-string"><span class="hljs-string">"adds two numbers"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">return_type</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">args</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">y</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span></code> </pre><br>  API GraphQL dihasilkan secara otomatis dan layanan menjadi tersedia untuk menelepon: <br><br><pre> <code class="lua hljs">query { sum(x: <span class="hljs-number"><span class="hljs-number">1</span></span>, y: <span class="hljs-number"><span class="hljs-number">2</span></span>) }</code> </pre> <br>  Ini akan memanggil <code>sum</code> handler, yang akan mengembalikan hasilnya: <br><br><pre> <code class="plaintext hljs">3</code> </pre><br><h3>  Profil dan Metrik Permintaan </h3><br>  Untuk memahami sistem dan profil permintaan, kami menerapkan dukungan untuk protokol OpenTracing.  Sistem dapat, sesuai permintaan, mengirim informasi ke alat yang mendukung protokol ini, misalnya, Zipkin, yang akan memungkinkan Anda untuk memahami bagaimana permintaan itu dijalankan: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ed3/43f/3a6/ed343f3a63b49ad49c41b603786eb72d.png"><br><br>  Secara alami, sistem ini menyediakan metrik internal yang dapat dikumpulkan menggunakan Prometheus dan divisualisasikan menggunakan Grafana. <br><br><h3>  Sebarkan </h3><br>  Tarantool Data Grid dapat digunakan dari paket atau arsip RPM, menggunakan utilitas dari pengiriman atau Ansible, ada juga dukungan untuk Kubernetes ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Operator Tarantool Kubernetes</a> ). <br><br>  Aplikasi yang mengimplementasikan logika bisnis (konfigurasi, prosesor) dimuat ke dalam cluster Tarantool Data Grid sebagai arsip melalui UI atau menggunakan skrip melalui API yang disediakan oleh kami. <br><br><h3>  Contoh aplikasi </h3><br>  Aplikasi apa yang dapat saya buat dengan Tarantool Data Grid?  Bahkan, sebagian besar tugas bisnis entah bagaimana terkait dengan pemrosesan aliran data, menyimpan dan mengaksesnya.  Karena itu, jika Anda memiliki aliran data yang besar yang perlu disimpan dengan aman dan memiliki akses ke sana, maka produk kami dapat menghemat banyak waktu dalam pengembangan dan fokus pada logika bisnis Anda. <br><br>  Misalnya, kami ingin mengumpulkan informasi tentang pasar real estat untuk selanjutnya, misalnya, memiliki informasi tentang penawaran terbaik.  Dalam hal ini, kami membedakan tugas-tugas berikut: <br><br><ol><li>  Robot mengumpulkan informasi dari sumber terbuka - ini akan menjadi sumber data kami.  Anda dapat memecahkan masalah ini menggunakan solusi yang sudah jadi atau dengan menulis kode dalam bahasa apa pun. <br></li><li>  Selanjutnya, Tarantool Data Grid akan menerima dan menyimpan data.  Jika format data dari sumber yang berbeda berbeda, maka Anda dapat menulis kode dalam bahasa Lua, yang akan mengarah pada konversi ke format tunggal.  Pada tahap pra-pemrosesan, Anda juga dapat, misalnya, memfilter penawaran berulang atau memperbarui informasi tentang agen yang beroperasi di pasar dalam database. <br></li><li>  Sekarang Anda sudah memiliki solusi terukur di kluster, yang dapat diisi dengan data dan membuat sampel data.  Kemudian Anda dapat mengimplementasikan fungsionalitas baru, misalnya, menulis layanan yang akan meminta data dan mengeluarkan penawaran paling menguntungkan dalam sehari - ini akan memerlukan beberapa baris dalam file konfigurasi dan sedikit kode Lua. <br></li></ol><br><h3>  Apa selanjutnya </h3><br>  Prioritas kami adalah meningkatkan kenyamanan pengembangan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tarantool Data Grid</a> .  Misalnya, ini adalah IDE dengan dukungan untuk profil dan debugging penangan kotak pasir. <br><br>  Kami juga sangat memperhatikan masalah keamanan.  Saat ini kami sedang melewati sertifikasi FSTEC Rusia untuk mengkonfirmasi tingkat keamanan yang tinggi dan memenuhi persyaratan untuk sertifikasi produk perangkat lunak yang digunakan dalam sistem informasi data pribadi dan sistem informasi negara. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id466155/">https://habr.com/ru/post/id466155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id466143/index.html">Bagaimana kami membuat kode kardus atau versi Awal dari game papan Golem Battle</a></li>
<li><a href="../id466147/index.html">Manajer Tampilan Data Reaktif. Pendahuluan</a></li>
<li><a href="../id466149/index.html">Membuat simbol konektor dengan teks "dinamis" di OrCAD</a></li>
<li><a href="../id466151/index.html">Investigasi: program aneh dalam Daftar perangkat lunak domestik</a></li>
<li><a href="../id466153/index.html">Membuat dokumen desain misi game naratif menggunakan contoh Last of Us</a></li>
<li><a href="../id466157/index.html">Blockchain: apa yang harus kita bangun PoC?</a></li>
<li><a href="../id466159/index.html">Mengapa kecepatan penting dalam pertukaran modern dan cara menyalip pesaing: 3 cara praktis</a></li>
<li><a href="../id466165/index.html">Bagaimana Kecerdasan Buatan Membantu Mengelola Proyek</a></li>
<li><a href="../id466169/index.html">Penawaran khusus untuk siswa yang bekerja dari JetBrains</a></li>
<li><a href="../id466171/index.html">Lima alasan untuk menggunakan JUG.EKB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>