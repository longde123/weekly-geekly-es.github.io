<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ö ü•Ñ ‚úÇÔ∏è Un cadeau de Geek - faire une minuterie de cuisine üë®üèª üë©üèº‚Äç‚öïÔ∏è üå∂Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Choisissez un cadeau 
 La grand-m√®re de mon fils f√™tera bient√¥t son anniversaire. Depuis que j'√©tais fascin√© par les microcontr√¥leurs, j'ai eu l'id√©e ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Un cadeau de Geek - faire une minuterie de cuisine</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408027/"><h2>  Choisissez un cadeau </h2><br>  La grand-m√®re de mon fils f√™tera bient√¥t son anniversaire.  Depuis que j'√©tais fascin√© par les microcontr√¥leurs, j'ai eu l'id√©e de faire don d'une sorte d'appareil, naturellement, √† un microcontr√¥leur et fabriqu√© par moi-m√™me.  Comme toutes les grand-m√®res, notre grand-m√®re n'est une utilisatrice avanc√©e d'aucun appareil et, en principe, elle n'a rien de sp√©cial en √©lectronique.  Ainsi, vous pouvez cr√©er n'importe quel appareil, pas tr√®s complexe. <br><br>  Lorsque nous venons lui rendre visite, nous sommes toujours accueillis par une table riche, avec un grand nombre de plats.  Par cons√©quent, nous avons imm√©diatement d√©cid√© de rendre un appareil utile dans la cuisine.  Ensemble, nous jouons souvent √† divers jeux de soci√©t√© - loto, divers jeux de d√©s.  Donc, notre appareil devrait aider ici. <br><br>  En r√©fl√©chissant un peu, le fils a d√©cid√© de fabriquer une <b>minuterie de cuisine avanc√©e</b> . <a name="habracut"></a>  Je l'ai aid√© un peu avec le plan.  Les principales fonctions de notre cadeau: <br><br><ul><li>  Mode minuterie jusqu'√† 3 heures <br></li><li>  Mode chronom√®tre <br></li><li>  Signal fort <br></li><li>  Taille compacte <br></li><li>  Batteries "√©ternelles" - batteries, se rechargeant comme un t√©l√©phone, par micro usb <br></li><li>  Et bien s√ªr, des jeux - un cube (un nombre al√©atoire de 1 √† 6), un loto, une bombe (un jeu tr√®s amusant) <br></li></ul><br><h2>  Nous s√©lectionnons les composants </h2><br>  Comme indicateur, nous avons choisi un indicateur LED √† trois chiffres avec une anode commune - il n'a que 11 broches, tr√®s pratique.  Il n'est pas difficile √† acheter, et, en principe, assez √©conomique en consommation d'√©nergie (mais certainement pas LCD). <br><br>  Le microcontr√¥leur - STM8S003F3P6 - nous l'avons d√©j√† travaill√©, donc tout est familier.  ST-link est d√©j√† l√†. <br><br>  Le microcircuit de charge et l'ensemble du harnais du MK, comme un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ordinateur de v√©lo</a> . <br><br><img src="https://habrastorage.org/webt/uc/cu/0i/uccu0iqrus_rksaftplhismo_l8.jpeg"><br><br>  En tant que tweeter, tweeter tr√®s compact et puissant HC0903A <br><br><img src="https://habrastorage.org/webt/ri/ke/kf/rikekfmhij_plv-w6oecxmdrn48.jpeg"><br><br>  La batterie est LIR2032.  Seulement 45 mAh, mais cela suffit pour 40 heures de fonctionnement continu de la minuterie.  Nous avons d√©cid√© d'abandonner le r√©sonateur √† quartz (nous avons besoin de conclusions), nous n'avons pas besoin d'une pr√©cision particuli√®re, et le STM8 dispose d'un g√©n√©rateur interne assez pr√©cis.  Charge de puce - TP4056. <br><br>  Gestion - 2 boutons d'horloge.  L'appareil est en mode veille tout le temps, la consommation est inf√©rieure √† 5 ŒºA, il peut dormir longtemps.  Ils n'ont pas commenc√© √† fabriquer une carte de protection pour la batterie, surtout pas n√©cessaire.  MK a une limite inf√©rieure de 3V, donc il ne s'affaissera pas beaucoup.  Lorsque vous allumez la musique, le voyant (surtension actuelle) s'allume et si la batterie est morte, le MK red√©marre et passe en mode veille, ce qui est un signal √† charger.  Il se charge avec un courant de 100 mA pendant environ 40 minutes, ce qui est en principe tr√®s rapide.  Le sch√©ma et le programme peuvent √™tre t√©l√©charg√©s sur github, le lien √† la fin. <br><br>  Le fils a d√©cid√© de fabriquer lui-m√™me le bo√Ætier √† partir du bo√Ætier de montage 40 x 16 mm.  Peint avec des peintures acryliques, d√©coupez un morceau d'un disque DVD comme du verre.  Cela s'est av√©r√© tr√®s agr√©able. <br><br><img src="https://habrastorage.org/webt/v4/kw/uo/v4kwuopcekclyf2ywq0idcueqou.jpeg"><br><br>  Le fils a fait lui-m√™me la trace de la planche √† Kicad.  L'emplacement des composants a √©t√© invent√© par lui.  Boutons sur les c√¥t√©s de l'indicateur, tweeter ci-dessous, batterie dessus.  Tout est entr√© √©troitement, rien ne pend nulle part.  La planche est double face.  Ils ont √©t√© fabriqu√©s √† partir de fibre de verre unilat√©rale de 0,8 mm d'√©paisseur en utilisant la m√©thode de transfert de toner √† froid.  Deux moiti√©s de la carte sont connect√©es et fix√©es avec des cavaliers.  Des connecteurs - micro usb, alimentation et programmation. <br><br><img src="https://habrastorage.org/webt/qf/vt/eg/qfvteg-mxesokxk8mfolappmndu.jpeg"><br><br><h2>  Le programme </h2><br>  Cet indicateur a une anode commune; par cons√©quent, une seule d√©charge peut √™tre √©mise √† la fois.  Pour afficher simultan√©ment trois chiffres, une indication dynamique est requise. <br><br>  Par programme, cela se fait tr√®s simplement.  La minuterie est activ√©e, et √† intervalles de temps √©gaux, avec une fr√©quence √©lev√©e, par exemple toutes les 300 Œºs, nous √©mettrons un bit dans un cercle - 1-2-3-1-2-3.  On nous montrera que les chiffres brillent en m√™me temps, comme dans un film.  Si vous ajoutez des bits vides suppl√©mentaires, vous pouvez contr√¥ler la luminosit√©.  Autrement dit, il y aura un tel sch√©ma pour la sortie d'informations - 1-2-3-vide-vide-vide-vide-1-2-3-vide-vide ... Un contr√¥le de la luminosit√© est n√©cessaire afin de r√©duire la consommation d'√©nergie.  Ainsi, par exemple, sans l'utilisation de la luminosit√©, une d√©charge consomme 24 mA, et avec l'application, elle peut √™tre r√©duite √† 1-2 mA.  Dans le m√™me temps, les chiffres sont encore clairement et bien visibles.  Le fils a jou√© avec la fr√©quence, la luminosit√©, quand tout a cess√© de clignoter, il a aim√©.  Il s'est av√©r√© que la programmation de ce type d'indicateur est assez simple et pratique. <br>  Le deuxi√®me moment difficile est de proposer une interface simple, comme on dit, intuitive, lorsque nous avons 3 chiffres de l'indicateur et 2 boutons.  Mais je pense qu'il a r√©ussi. <br><br>  Ils ont propos√© des boutons comme celui-ci: <br><br><ul><li>  Bouton droit - appui long, changement de mode, il y en a trois - Minuterie, Chronom√®tre, Jeux <br></li><li>  Bouton droit - simple pression, changement de sous-mode.  Pour le chronom√®tre, c'est le choix d'heures pr√©d√©finies, pour le chronom√®tre, le choix d'un chronom√®tre r√©gulier et avec confirmation, pour le jeu, respectivement.  Jeux divers <br></li><li>  Bouton gauche - simple pression - d√©marrer / arr√™ter ou d√©placer dans le jeu, appui long - param√®tres, mode de programmation <br></li></ul><br>  Avec un indicateur comme celui-ci: <br><ul><li>  Lorsqu'une minuterie est s√©lectionn√©e, un certain nombre de param√®tres pr√©d√©finis sont imm√©diatement affich√©s (par exemple, 5,15.30 minutes), ils peuvent √™tre reprogramm√©s, stock√©s dans la ROM <br></li><li>  Lorsque le chronom√®tre est s√©lectionn√©, alors 000 <br></li><li>  Quand les jeux - L - loto, 6 - bombe, C - cube. <br></li><li>  Les chiffres sont intelligemment affich√©s sur l'indicateur, car il n'y a que trois chiffres, nous affichons alors le nombre maximal d'√©l√©ments significatifs.  Par exemple, une minuterie - 200 minutes 30 secondes - alors nous imprimons 200., si la minuterie est de 10 min 15 s, alors nous imprimons 10.1, si 1 minute 25 s, alors 1,25.  Dans le m√™me temps, afin de comprendre que le chronom√®tre ou le chronom√®tre fonctionne, le point clignote au rythme des secondes. <br></li><li>  Lorsque le chronom√®tre est arr√™t√©, par exemple, pendant 10 minutes 25 secondes, nous affichons alternativement 10. et .25, une fois par seconde, pour voir √©galement les secondes. <br></li></ul><br>  Le programme n'√©tait pas si simple, mon fils l'a √©crit pendant pr√®s de 3 semaines √† l'√©cole, avec un peu d'aide de ma part.  Il y a beaucoup de conditions, diff√©rents drapeaux - d√©marrage, arr√™t, travail avec la m√©moire, etc. Mais il √©tait tr√®s satisfait du r√©sultat. <br><br><h2>  Test </h2><br>  Les premiers tests ont eu lieu √† l'√©cole.  Au lieu d'un cube, la bonne aventure sur les notes.  Je me suis demand√© toute la classe.  Ensuite, la bombe est un super jeu.  L'appareil effectue un temps al√©atoire de 5 √† 20 secondes et commence √† cocher toutes les secondes.  Vous le faites circuler.  Lorsque la minuterie atteint z√©ro - un signal d'explosion.  Celui entre les mains de l'appareil a √©t√© perdu. <br><br>  Les premiers tests du chronom√®tre et de la minuterie se sont bien d√©roul√©s.  Ils ont suivi diff√©rentes heures, v√©rifi√© avec les heures exactes, une erreur de 1-2 secondes par heure.  Ils ont travaill√© sur le son du signal. <br><br><h2>  Pr√©senter un cadeau </h2><br>  C'est mon anniversaire.  Ma grand-m√®re s'est rapidement form√©e et √©tait tr√®s heureuse.  Tous ensemble exp√©riment√© Lotto, enti√®rement automatis√©.  Toutes les 5 secondes, l'appareil grince et √©met un nouveau num√©ro √† partir du reste dans le sac.  Tout le monde joue, conduit l'appareil!  Qui n'a pas eu le temps, il √©tait en retard. <br><br><h2>  R√©sum√© </h2><br>  Ainsi, l'appareil s'est av√©r√© tout simplement excellent.  La pratique de la programmation est tr√®s int√©ressante.  Si vous √™tes √©galement int√©ress√© par les microcontr√¥leurs, vous pouvez faire vous-m√™me (ou en cadeau) le m√™me et le programmer.  Vous apprendrez certainement: <br><br><ul><li>  faire des planches <br></li><li>  composants smd √† souder <br></li><li>  programme STM8 <br></li><li>  travailler avec des piles <br></li><li>  boutons de poign√©e <br></li><li>  faire divers sons <br></li><li>  travailler avec des minuteries et g√©rer des √©v√©nements temporaires <br></li><li>  combattre l'√©nergie <br></li></ul><br>  Sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github il</a> y a un circuit et une carte au format Kicad.  Le projet initial pour STM8 a √©t√© d√©fini, la partie la plus compliqu√©e est l'indication dynamique, l'initialisation du microcontr√¥leur, le traitement compliqu√© des boutons - appui court, double, long.  Je vous sugg√®re d'√©crire le reste du programme vous-m√™me, c'est tellement int√©ressant! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr408027/">https://habr.com/ru/post/fr408027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr408015/index.html">R√©flexions sur les jetons (traduction)</a></li>
<li><a href="../fr408017/index.html">Probl√®me de reconnaissance vocale pas encore r√©solu</a></li>
<li><a href="../fr408019/index.html">Caract√©ristiques int√©ressantes de la BMW S√©rie 7</a></li>
<li><a href="../fr408023/index.html">Raise3D: l'utilisation d'imprimantes 3D dans le film</a></li>
<li><a href="../fr408025/index.html">Transmission "Miracle de la technologie" sur les lecteurs: nous vous recommandons de regarder. Et tirer des conclusions</a></li>
<li><a href="../fr408029/index.html">Apple remporte enfin un proc√®s de 120 millions de dollars contre Samsung pour violation de brevet sur la diapositive √† d√©verrouiller</a></li>
<li><a href="../fr408033/index.html">Facebook invite les victimes potentielles de pornographie √† se transmettre √† l'avance leurs photos nues</a></li>
<li><a href="../fr408035/index.html">Le manque de sommeil entra√Æne une rupture des connexions entre les cellules du cerveau</a></li>
<li><a href="../fr408037/index.html">Vues modernes sur le processus de vieillissement - th√©orie mitochondriale du vieillissement</a></li>
<li><a href="../fr408039/index.html">Saturne - la raison de l'existence d'un oc√©an liquide sur Encelade</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>