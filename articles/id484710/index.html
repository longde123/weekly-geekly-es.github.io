<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👓 🕺🏿 🌧️ Melanggar Aturan Pengumpulan Sampah Persatuan 👨🏽‍⚖️ 📡 🤛🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sekali waktu, ada programmer game persatuan bernama Lancelot. Saya sangat bersemangat. Dia belum tahu, tapi akhirnya dia akan menghadapi sisi paling g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Melanggar Aturan Pengumpulan Sampah Persatuan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484710/"> Sekali waktu, ada programmer game persatuan bernama Lancelot.  Saya sangat bersemangat.  Dia belum tahu, tapi akhirnya dia akan menghadapi sisi paling gelap dari pengumpulan sampah Unity. <br><br><div style="text-align:center;"><img src="https://thegamedevguru.b-cdn.net/wp-content/uploads/2019/12/GC-GarbageCollection-Thumbnail.jpg" alt="gambar"></div><br>  Lancelot selalu mencari <b>judul yang lebih</b> besar dan <b>lebih besar</b> untuk dikerjakan.  Maka ia bekerja keras untuk mendapatkan peluang besar di industri game. <br><br>  Itu tidak mudah, yang dia tahu. <br><a name="habracut"></a><br>  Bintik-bintik ini di industri game dulu dan masih dicadangkan untuk sebagian kecil programmer game.  Dan dia tidak yakin akan memenuhi standar itu. <br><br>  Tetapi dia bertahan dan terus mempertajam keterampilan pemrogramannya. <br><br>  Lancelot mulai mengerjakan game-game kecil.  Mungkin pada titik tertentu, dia akan mendapatkan peluang besar yang dia cari, pikirnya. <br><br>  Tahun-tahun berlalu sampai dia mendapatkan kesempatan yang dia tunggu-tunggu.  Dia diminta untuk port game VR besar ke platform mobile.  Semeriah Lancelot, dia tidak bisa berhenti bertanya-tanya apakah dia <b>cukup baik</b> untuk tugas itu.  Itu menakutkan tetapi dia menerima tantangan itu.  Dia tahu bahwa dia hanya bisa tumbuh dari itu. <br><br>  Kekhawatiran terbesar Lancelot adalah kebutuhan untuk secara besar-besaran meningkatkan kinerja permainan.  Sebenarnya itu adalah tantangan ganda.  Dia harus <b>meningkatkan kinerja sebesar 20%</b> untuk <b>platform yang</b> secara signifikan <b>kurang kuat</b> . <br><br>  Setelah berbulan-bulan bekerja tanpa henti, ia akhirnya berhasil mengoptimalkan permainan cukup untuk memiliki baseline kinerja yang solid. <br><br>  Namun, masalah tak terduga hanya sekitar sudut ... <br><br>  Profiler kesatuan mengungkapkan penurunan frame-rate yang signifikan setiap beberapa detik.  Dan itu membuatnya khawatir karena itu tidak akan memungkinkannya untuk mengirim permainan.  Rilis game dalam bahaya.  Itu membuatnya benar-benar tidak nyaman. <br><br>  Berdasarkan pengalamannya sebelumnya, Lancelot dengan cepat mencurigai adanya <b>pemulung</b> .  Bagaimanapun, ia tahu bahwa mengalokasikan memori sementara dalam game terlalu sering dapat menyebabkan lonjakan kinerja ini.  Sama seperti tempat sampah di dapur semua orang, Anda tahu sudah waktunya untuk membersihkannya ketika mencapai 80% dari kapasitasnya. <br><br>  Maka ia menghabiskan waktu berhari-hari melawan alokasi memori yang menyusahkan.  Dia melakukan semua jenis optimasi yang bisa dia pikirkan.  Kumpulan objek, cache data, optimisasi struktur data ... <br><br>  Menghabiskan hari-hari ini dengan mengoptimalkan membuatnya sedikit unggul dalam perjalanan kinerja.  Lancelot bangga dengan pekerjaannya, tetapi kekhawatirannya hanya bertambah ketika dia melihat pengumpul sampah masih berjalan setiap 15 detik. <br><br>  Memainkan game dalam VR dengan penurunan kinerja ini akan membuat orang terlihat pucat. <br><br>  “Bagaimana itu bisa terjadi?” Dia bertanya-tanya. <br><br>  Dengan lebih sabar dan menggali, Lancelot menemukan sumber alokasi memori kedua yang tidak dia lihat sebelumnya.  Itu terjadi di <b>perpustakaan pihak ke</b> - <b>3</b> . <br><br>  Dia melihat dan segera menyadari bahwa dia berada di posisi terburuk yang pernah ada: perpustakaan itu adalah sumber tertutup.  Tidak hanya itu, dia juga mencoba menggunakan <b>pengumpul sampah tambahan</b> Unity tetapi dia tidak mampu membayar harga kinerjanya. <br><br>  Lancelot kehabisan pilihan. <br><br>  Dia merasa putus asa tetapi berhasil tetap tenang.  Dia berada dalam situasi yang lebih buruk. <br><br>  Dia bisa <b>merekayasa balik</b> perpustakaan dan melakukan optimasi alokasi memori sendiri.  Masalahnya adalah lisensi melarang hal-hal seperti itu.  Dan dia terlalu muda untuk masuk penjara. <br><br>  Opsi kedua yang dia pertimbangkan adalah <b>mengalokasikan</b> banyak memori di heap.  Dia tahu bahwa persatuan memicu proses pengumpulan sampah ketika penggunaan tumpukan mencapai persentase tertentu.  Jadi menambah tumpukan harus memberinya lebih banyak waktu di antara pengumpulan sampah. <br><br>  Sayangnya, itu masih belum cukup. <br><br>  Perlahan-lahan terasa seolah-olah dia tidak memiliki kendali atas situasi.  Itu sulit, tapi sekali lagi, dia <b>bertahan</b> . <br><br>  Jadi Lancelot datang dengan <b>ide gila</b> .  Bagaimana jika dia sepenuhnya menonaktifkan pengumpulan sampah?  Apakah itu mungkin?  Dia merasakan di tulangnya betapa berisiko ide semacam itu.  Dia tidak ingin menambahkan kemungkinan game crash pada poin yang tidak terduga.  Terakhir kali dia memeriksa, itu tidak menyenangkan bagi para pemain.  Mungkin waktu memang berubah, tetapi lebih baik aman daripada menyesal. <br><br>  Selain itu, ia khawatir akan menunda rilis game.  Dia tidak ingin para pemainnya melewatkan gelar ini untuk Natal.  Dia ingat betapa menyenangkan dia bermain EverQuest selama liburan ini.  Dia tidak akan mengambil itu dari para pemain. <br><br>  Mencapai titik ini, dia tidak punya pilihan selain untuk menonaktifkan pengumpul sampah. <br><br>  Dia masuk ke mode penelitian dan menemukan bahwa dia memang bisa <b>secara manual menonaktifkan pengumpulan sampah</b> .  Dia menjalankan puluhan percobaan untuk melihat berapa lama permainan akan bertahan tanpa kehabisan memori.  Dia melakukan segala macam tes untuk menekankan sistem.  Mengklik di mana-mana, berjalan dan melompat-lompat, beralih di antara berbagai aplikasi. <br><br>  <b>Angka-angka</b> mulai berdatangan dalam spreadsheet-nya: 25 menit, 28 menit, 30 menit ... Dia juga mencatat bagaimana penggunaan tumpukan meningkat dari waktu ke waktu untuk memastikan dia tidak pernah melebihi anggaran yang aman. <br><br>  Dengan angka-angka itu, Lancelot membentuk <b>margin aman yang</b> murah hati dan menyiapkan <b>prototipe</b> .  Dia akan menjalankan pengumpulan sampah secara manual selama memuat layar dan setiap beberapa menit. <br><br>  Dia punya harapan lagi. <br><br>  Dia dengan sopan meminta QA untuk melalui permainan puluhan kali. <br><br>  Memori selalu sesuai anggaran.  Tidak ada crash.  Tidak ada efek samping. <br><br>  Perjalanan panjang ini membawanya ke titik di mana ia bisa <b>mengirimkan</b> permainan. <br><br>  Dan coba tebak?  Ratusan pemain sekarang menikmatinya selama periode Natal. <br><br>  Awalnya, ia merasa tidak nyaman dengan solusi ini.  Itu adalah langkah yang berisiko dan dia tahu itu.  Tapi dia berhasil melakukannya. <br><br>  Lancelot belajar untuk merasa nyaman dengan yang <b>tidak nyaman</b> .  Dia belajar menjadi lebih <b>pragmatis</b> .  Karena ada saatnya ketika seorang programmer harus. <br><br>  Apakah ada di antara cerita itu yang berbunyi?  Jika demikian, intuisi Anda mungkin benar. <br><br>  Pemrogram itu adalah saya. <br><br>  Untuk saat-saat Anda membutuhkannya, inilah cara Anda dapat mengelola pemulung: <br><br>  Cuplikan kode itu menunjukkan kepada Anda cara menonaktifkan pengumpulan sampah otomatis.  Ini menjalankan proses GC secara manual setiap menit dan mungkin selama transisi layar (pudar menjadi hitam). <br><br>  Waspadai kemungkinan efek sampingnya: <br><br><ul><li>  <b>Gangguan</b> : jika Anda tidak bermain cukup aman Anda akan kehabisan memori.  Lebih buruk lagi, OS mungkin membunuh game Anda ketika Anda beralih di antara aplikasi </li><li>  <b>Waktu pengumpulan sampah yang lebih lama</b> : menambah tumpukan akan membuat pengumpulan sampah di masa depan lebih lambat </li></ul><br>  Jika Anda perlu menghasilkan sampah dalam jumlah besar, berikut ini adalah metode sederhana yang hanya akan berfungsi: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GenerousGarbageCreator</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> garbageCreationRate = <span class="hljs-number"><span class="hljs-number">1024</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] _garbage; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _garbage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[garbageCreationRate]; } }</code> </pre> <br>  Inilah yang akan Anda dapatkan di profiler: <br><br><img src="https://thegamedev.guru/wp-content/uploads/2019/12/GC-Garbage-Collection-Management-Highlight.gif" alt="gambar"><br>  <i>Pengumpulan Sampah Unity: Pemicu Manual Berbasis Waktu</i> <br><br>  Di sana Anda melihat peningkatan penggunaan memori.  Penggunaan tumpukan yang meningkat disorot sebagai "mono".  Beruntung bagi kami, kami menjalankan pengumpul sampah manual setiap 3 detik. <br><br>  Anda dapat dengan jelas melihat siklus pembersihan generasi sampah ini dalam grafik profiler.  Bagi para pengembang game yang mempelajari fisika, Anda mungkin mengenalinya sebagai bentuk gelombang gigi gergaji. <br><br>  Jika Anda menginginkan kode sumber proyek ini, Anda tahu di mana menemukannya (spoiler: sini). <br><br>  Untuk optimasi memori yang lebih umum, Anda mungkin tertarik pada Unity Addressables.  Dengan addressables Anda dapat mengurangi penggunaan memori total sehingga Anda dapat memicu pengumpulan sampah lebih jarang.  Pada gilirannya, ini akan mengurangi lonjakan kinerja yang akan dialami pemain Anda. <br><br>  Saya berharap dapat bekerja sama dengan Anda semua pada tahun 2020. <br>  Ruben </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id484710/">https://habr.com/ru/post/id484710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id484692/index.html">Vitamin C - Apakah saya perlu mengonsumsi suplemen atau apakah ini merupakan langkah komersial?</a></li>
<li><a href="../id484700/index.html">Java 14: catatan pratinjau</a></li>
<li><a href="../id484702/index.html">Alternatif Prestashop pada tahun 2020: Platform eCommerce Teratas</a></li>
<li><a href="../id484706/index.html">Berlatih dalam bekerja dengan ban khusus dari kompleks Redd</a></li>
<li><a href="../id484708/index.html">Richard Hamming "Bab tidak ada": Bagaimana kita tahu apa yang kita ketahui (versi lengkap)</a></li>
<li><a href="../id484712/index.html">Kompatibilitas biner reaktive: bagaimana kami menyediakannya</a></li>
<li><a href="../id484716/index.html">Berhenti memanggil semuanya AI</a></li>
<li><a href="../id484718/index.html">Printer modern HP menolak untuk bekerja tanpa berlangganan tinta</a></li>
<li><a href="../id484720/index.html">Konser untuk kota dengan orkestra: siapa dan mengapa merekam suara kehidupan sehari-hari</a></li>
<li><a href="../id484722/index.html">Alat Pengembangan Ruby on Rails Yang Sesuai dengan Proyek Anda: Ruby Top on Rails untuk 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>