<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔜 🕶️ 🙅🏼 Melatih model TensorFlow dengan Layanan Pembelajaran Azure Machine 🌟 ⛹🏻 👊🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Untuk pelatihan deep neural network (DNN) dengan TensorFlow, Azure Machine Learning menyediakan TensorFlow Estimator alat TensorFlow kelas yang ditent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Melatih model TensorFlow dengan Layanan Pembelajaran Azure Machine</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/442120/"><p> Untuk pelatihan deep neural network (DNN) dengan TensorFlow, Azure Machine Learning menyediakan <code>TensorFlow</code> <code>Estimator</code> alat <code>TensorFlow</code> kelas yang ditentukan pengguna.  <code>TensorFlow</code> evaluasi <code>TensorFlow</code> di Azure SDK (jangan dikelirukan dengan kelas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>tf.estimator.Estimator</code></a> ) membuatnya mudah untuk menyerahkan pekerjaan pelatihan TensorFlow untuk node-tunggal dan berjalan di sumber daya komputasi Azure. </p><br><img src="https://habrastorage.org/webt/vc/ug/bv/vcugbv2krcfpaqlxwymazqdloba.jpeg"><a name="habracut"></a><br><br><h2>  Pelatihan satu situs </h2><br><p>  Belajar dengan <code>TensorFlow</code> asesmen <code>TensorFlow</code> mirip dengan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>  Estimator</code></a> , jadi pertama-tama bacalah artikel how-to dan pelajari konsep-konsepnya. </p><br><p>  Untuk menyelesaikan tugas TensorFlow, Anda harus membuat objek <code>TensorFlow</code> .  Anda seharusnya sudah membuat objek <code>compute_target</code> dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sumber daya komputasi target</a> . </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> azureml.train.dnn <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TensorFlow script_params = { <span class="hljs-string"><span class="hljs-string">'--batch-size'</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-string"><span class="hljs-string">'--learning-rate'</span></span>: <span class="hljs-number"><span class="hljs-number">0.01</span></span>, } tf_est = TensorFlow(source_directory=<span class="hljs-string"><span class="hljs-string">'./my-tf-proj'</span></span>, script_params=script_params, compute_target=compute_target, entry_script=<span class="hljs-string"><span class="hljs-string">'train.py'</span></span>, conda_packages=[<span class="hljs-string"><span class="hljs-string">'scikit-learn'</span></span>], use_gpu=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> <br><p>  Tentukan parameter berikut dalam konstruktor TensorFlow. </p><table><thead><tr><th width="150">  Parameter </th><th>  DESKRIPSI </th></tr></thead><tbody><tr><td> <code>source_directory</code> </td> <td>  Direktori lokal yang berisi semua kode yang diperlukan untuk menyelesaikan pelatihan.  Folder ini disalin dari komputer lokal ke sumber daya komputasi jarak jauh. </td></tr><tr><td> <code>script_params</code> </td> <td>  Kamus yang menetapkan argumen baris perintah untuk <code>entry_script</code> pelatihan <code>entry_script</code> sebagai pasangan &lt;argumen baris perintah, nilai&gt;. </td></tr><tr><td> <code>compute_target</code> </td> <td>  Target perhitungan jarak jauh tempat skrip pelatihan akan dijalankan.  Dalam kasus kami, ini adalah sekelompok Lingkungan Belajar Komputer Mesin Azure ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AmlCompute</a> ). </td></tr><tr><td> <code>entry_script</code> </td> <td>  Jalur ke file (relatif ke <code>source_directory</code> ) dari skrip pelatihan yang akan dieksekusi pada sumber daya komputasi jarak jauh.  File ini dan file tambahan yang menjadi sandarannya harus berada di folder ini. </td></tr><tr><td> <code>conda_packages</code> </td> <td>  Daftar paket Python yang diperlukan agar skrip pelatihan diinstal menggunakan conda.  Dalam hal ini, skrip pelatihan menggunakan <code>sklearn</code> untuk mengunduh data, jadi Anda harus menentukan paket ini untuk instalasi.  Parameter <code>pip_packages</code> dari konstruktor dapat digunakan untuk semua paket pip yang diperlukan. </td></tr><tr><td> <code>use_gpu</code> </td> <td>  Atur bendera ini ke <code>True</code> untuk menggunakan GPU untuk pelatihan.  Standarnya adalah <code>False</code> . </td></tr></tbody></table><p>  Karena Anda bekerja dengan alat evaluasi TensorFlow, wadah yang digunakan untuk pelatihan secara default akan berisi paket TensorFlow dan dependensi terkait yang diperlukan untuk pelatihan dalam CPU dan GPU. </p><br><p>  Kemudian kirimkan pekerjaan TensorFlow: </p><br><pre> <code class="python hljs">run = exp.submit(tf_est)</code> </pre> <br><h2>  Pelatihan yang didistribusikan </h2><br><p>  Alat Evaluasi TensorFlow juga memungkinkan Anda melatih model dalam kluster CPU dan GPU mesin virtual Azure.  Pelatihan TensorFlow yang didistribusikan disampaikan melalui beberapa panggilan API, dengan layanan Azure Machine Learning di latar belakang mengelola infrastruktur dan fitur orkestrasi yang diperlukan untuk menyelesaikan beban kerja ini. </p><br><p>  Layanan Pembelajaran Mesin Azure mendukung dua metode pembelajaran terdistribusi di TensorFlow. </p><br><ul><li>  Pembelajaran terdistribusi berbasis MPI menggunakan platform <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Horovod</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pelatihan</a> asli <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">didistribusikan TensorFlow</a> menggunakan metode server parameter. </li></ul><br><h3>  Horovod </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Horovod</a> adalah platform berbasis-ring-allreduce-based-based learning-source yang dikembangkan oleh Uber. </p><br><p>  Untuk menjalankan pelatihan terdistribusi TensorFlow menggunakan platform Horovod, buat objek TensorFlow sebagai berikut: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> azureml.train.dnn <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TensorFlow tf_est = TensorFlow(source_directory=<span class="hljs-string"><span class="hljs-string">'./my-tf-proj'</span></span>, script_params={}, compute_target=compute_target, entry_script=<span class="hljs-string"><span class="hljs-string">'train.py'</span></span>, node_count=<span class="hljs-number"><span class="hljs-number">2</span></span>, process_count_per_node=<span class="hljs-number"><span class="hljs-number">1</span></span>, distributed_backend=<span class="hljs-string"><span class="hljs-string">'mpi'</span></span>, use_gpu=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> <br><p>  Kode di atas menunjukkan opsi baru berikut di konstruktor TensorFlow. </p><table><thead><tr><th width="190">  Parameter </th><th>  DESKRIPSI </th><th width="100">  nilai default </th></tr></thead><tbody><tr><td> <code>node_count</code> </td> <td>  Jumlah node yang akan digunakan untuk tugas pelatihan. </td><td> <code>1</code> </td> </tr><tr><td> <code>process_count_per_node</code> </td> <td>  Jumlah proses (atau peran kerja) yang berjalan pada setiap node. </td><td> <code>1</code> </td> </tr><tr><td> <code>distributed_backend</code> </td> <td>  Sisi server untuk menjalankan pembelajaran terdistribusi, yang ditawarkan oleh alat penilaian MPI.  Untuk melakukan pelatihan paralel atau terdistribusi (misalnya, <code>node_count</code> &gt; 1 atau <code>process_count_per_node</code> &gt; 1, atau keduanya) menggunakan MPI (dan Horovod), atur <code>distributed_backend='mpi'</code> Azure Machine Learning menggunakan MPI <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Open MPI</a> implementasi. </td><td> <code>None</code> </td> </tr></tbody></table><p>  Dalam contoh di atas, pelatihan yang didistribusikan akan dilakukan dengan dua peran kerja - satu peran kerja untuk setiap node. </p><br><p>  Horovod dan dependensinya akan diinstal secara otomatis, jadi Anda cukup mengimpornya ke <code>train.py</code> pelatihan <code>train.py</code> sebagai berikut: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tensorflow <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> horovod</code> </pre> <br><p>  Akhirnya, kirimkan pekerjaan TensorFlow Anda: </p><br><pre> <code class="python hljs">run = exp.submit(tf_est)</code> </pre> <br><h3>  Server Parameter </h3><br><p>  Anda juga dapat memulai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pelatihan terdistribusi TensorFlow Anda sendiri</a> yang menggunakan model server parameter.  Dalam metode ini, pelatihan dilakukan dalam sekelompok server parameter dan peran kerja.  Selama pelatihan, peran pekerja menghitung gradien, dan server parameter melakukan pemrosesan statistik gradien. </p><br><p>  Buat objek TensorFlow: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> azureml.train.dnn <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TensorFlow tf_est = TensorFlow(source_directory=<span class="hljs-string"><span class="hljs-string">'./my-tf-proj'</span></span>, script_params={}, compute_target=compute_target, entry_script=<span class="hljs-string"><span class="hljs-string">'train.py'</span></span>, node_count=<span class="hljs-number"><span class="hljs-number">2</span></span>, worker_count=<span class="hljs-number"><span class="hljs-number">2</span></span>, parameter_server_count=<span class="hljs-number"><span class="hljs-number">1</span></span>, distributed_backend=<span class="hljs-string"><span class="hljs-string">'ps'</span></span>, use_gpu=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> <br><p>  Perhatikan parameter berikut dalam konstruktor TensorFlow dalam kode di atas. </p><table><thead><tr><th width="150">  Parameter </th><th>  DESKRIPSI </th><th width="100">  nilai default </th></tr></thead><tbody><tr><td> <code>worker_count</code> </td> <td>  Jumlah peran pekerjaan. </td><td> <code>1</code> </td> </tr><tr><td> <code>parameter_server_count</code> </td> <td>  Jumlah server parameter. </td><td> <code>1</code> </td> </tr><tr><td> <code>distributed_backend</code> </td> <td>  Bagian server yang akan digunakan untuk pelatihan terdistribusi. Untuk melakukan pelatihan terdistribusi menggunakan server parameter, atur nilai <code>distributed_backend='ps'</code> . </td><td> <code>None</code> </td> </tr></tbody></table><h4>  Catatan tentang <code>TF_CONFIG</code> </h4><br><p>  Anda juga akan memerlukan alamat dan port jaringan cluster untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>tf.train.ClusterSpec</code></a> , sehingga layanan Pembelajaran Mesin Azure secara otomatis menetapkan <code>TF_CONFIG</code> lingkungan <code>TF_CONFIG</code> . </p><br><p>  <code>TF_CONFIG</code> lingkungan <code>TF_CONFIG</code> adalah string JSON.  Berikut ini adalah contoh variabel untuk server parameter. </p><br><pre> <code class="python hljs">TF_CONFIG=<span class="hljs-string"><span class="hljs-string">'{ "cluster": { "ps": ["host0:2222", "host1:2222"], "worker": ["host2:2222", "host3:2222", "host4:2222"], }, "task": {"type": "ps", "index": 0}, "environment": "cloud" }'</span></span></code> </pre> <br><p>  Jika Anda menggunakan API tingkat tinggi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>tf.estimator</code></a> TensorFlow, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>tf.estimator</code></a> akan menguraikan variabel <code>TF_CONFIG</code> ini dan membentuk spesifikasi kluster. </p><br><p>  Jika Anda menggunakan API level rendah untuk pelatihan, Anda perlu menganalisis variabel <code>TF_CONFIG</code> dan membuat <code>tf.train.ClusterSpec</code> dalam kode pelatihan.  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh ini,</a> tindakan ini dilakukan dalam <strong>skrip pelatihan</strong> sebagai berikut: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os, json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tensorflow <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf tf_config = os.environ.get(<span class="hljs-string"><span class="hljs-string">'TF_CONFIG'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> tf_config <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> tf_config == <span class="hljs-string"><span class="hljs-string">""</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValueError(<span class="hljs-string"><span class="hljs-string">"TF_CONFIG not found."</span></span>) tf_config_json = json.loads(tf_config) cluster_spec = tf.train.ClusterSpec(cluster)</code> </pre> <br><p>  Setelah menyelesaikan skrip pelatihan dan membuat objek TensorFlow, kirimkan tugas pelatihan: </p><br><pre> <code class="python hljs">run = exp.submit(tf_est)</code> </pre> <br><h2>  Contohnya </h2><br><p>  Untuk buku catatan pembelajaran terdistribusi yang mendalam, lihat repositori GitHub </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagaimana-menggunakan-azureml / pelatihan-dengan-pembelajaran mendalam</a> </li></ul><br><p>  Pelajari cara menjalankan buku catatan dengan mengikuti arahan dalam artikel tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cara mempelajari layanan ini dengan buku catatan Jupyter</a> . </p><br><h2>  Informasi tambahan </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Melacak metrik kinerja selama pelatihan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengaturan Hyper</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menyebarkan model yang terlatih</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id442120/">https://habr.com/ru/post/id442120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id442110/index.html">Vim Antipatterns</a></li>
<li><a href="../id442112/index.html">Bahasa pemrograman baru secara diam-diam mematikan koneksi kita dengan kenyataan</a></li>
<li><a href="../id442114/index.html">Panduan untuk audit otomatis kontrak pintar. Bagian 3: Mythril</a></li>
<li><a href="../id442116/index.html">Meningkatkan Fungsi Komponen Bereaksi dengan React.memo ()</a></li>
<li><a href="../id442118/index.html">Kelompok penambangan Coinhive berhenti bekerja</a></li>
<li><a href="../id442122/index.html">Levelord Muscovite yang sederhana: sebuah wawancara dengan pencipta Duke Nukem</a></li>
<li><a href="../id442124/index.html">Facebook akan memberi pengguna kesempatan untuk membersihkan cerita mereka</a></li>
<li><a href="../id442128/index.html">Kehidupan di partikel</a></li>
<li><a href="../id442130/index.html">3CX v16 menguji pada Raspberry Pi 3B + dan pembaruan WebMeeting</a></li>
<li><a href="../id442132/index.html">Mulai dengan Azure Machine Learning menggunakan Python SDK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>