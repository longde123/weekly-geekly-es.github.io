<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‚ â˜‘ï¸ ğŸ• Arm Mbed OSçš„åº”ç”¨ã€‚ å¾®è°ƒ ğŸ½ï¸ ğŸ’‡ğŸ½ ğŸ§“ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä½¿ç”¨Arm Mbed OSåï¼Œå¯ä»¥ä½¿LEDé—ªçƒ ï¼Œè¯¥æ˜¯æµ‹è¯•å’Œé…ç½®å…¶ä»–é‡è¦æœåŠ¡çš„æ—¶å€™äº†ã€‚ æè¿°å¦‚ä¸‹ï¼š 


- Mbedé…ç½®æŠ€æœ¯ 
- ä¸ºä»€ä¹ˆåœ¨å¸¸è§„RTOSä¸­å¾ˆéš¾åˆ‡æ¢åˆ°C ++ 
- å¦‚ä½•åœ¨RTOSä¸­èŠ‚çœå†…å­˜ 
- åœ¨Mbed OSä¸­å¦‚ä½•ç»„ç»‡ä¸­æ–­ 
- æ¯”è°ƒè¯•Mbed OSæ›´æ–¹ä¾¿ 
- å¦‚ä½•æ‘†è„±é¢å¤–çš„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arm Mbed OSçš„åº”ç”¨ã€‚ å¾®è°ƒ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422413/"><p><img src="https://habrastorage.org/webt/db/tg/fq/dbtgfq4owssxgshqlazk5lwycxm.png" alt="LNDC1"></p><br><p> ä½¿ç”¨<strong>Arm Mbed OSåï¼Œ</strong>å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿LEDé—ªçƒ</a> ï¼Œè¯¥æ˜¯æµ‹è¯•å’Œé…ç½®å…¶ä»–é‡è¦æœåŠ¡çš„æ—¶å€™äº†ã€‚ æè¿°å¦‚ä¸‹ï¼š </p><br><ul><li>  <strong>Mbed</strong>é…ç½®<strong>æŠ€æœ¯</strong> </li><li> ä¸ºä»€ä¹ˆåœ¨å¸¸è§„<strong>RTOSä¸­</strong>å¾ˆéš¾åˆ‡æ¢åˆ°<strong>C ++</strong> </li><li> å¦‚ä½•åœ¨<strong>RTOSä¸­</strong>èŠ‚çœå†…å­˜ </li><li> åœ¨<strong>Mbed OSä¸­</strong>å¦‚ä½•ç»„ç»‡ä¸­æ–­ </li><li> æ¯”è°ƒè¯•<strong>Mbed OS</strong>æ›´æ–¹ä¾¿ </li><li> å¦‚ä½•æ‘†è„±é¢å¤–çš„<strong>SDK</strong>æŠ½è±¡å±‚ </li></ul><a name="habracut"></a><br><p>  <em>æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ARM Mbed OS</a>å¯¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MKE18F</a>ç³»åˆ—å¾®æ§åˆ¶å™¨è¿›è¡Œç¼–ç¨‹çš„æŠ€æœ¯ã€‚</em> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€ç¯‡</a> </li></ul><br><h2 id="tehnologiya-konfigurirovaniya-mbed">  Mbedé…ç½®æŠ€æœ¯ </h2><br><p>  Mbedé¡¹ç›®çš„é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯<strong>åœ¨çº¿</strong>å’Œ<strong>ç¦»çº¿</strong>çš„<strong>è‡ªåŠ¨é…ç½®</strong>å’Œç»„è£…ç³»ç»Ÿï¼Œå³ åœ¨ç”¨æˆ·è®¡ç®—æœºä¸Šæœ¬åœ°ã€‚ å»ºè®®é€šè¿‡ç¼–è¾‘å…·æœ‰ç‰¹æ®Šåç§°çš„<strong>.jsonæ–‡ä»¶</strong>è¿›è¡Œé…ç½®ã€‚ ç„¶åï¼Œ <strong>Python</strong>é¡¹ç›®ä¸­çš„è„šæœ¬å°†è¿™äº›æ–‡ä»¶è½¬æ¢ä¸ºå¤´æ–‡ä»¶ï¼Œç”¨æˆ·é€‰æ‹©çš„IDEçš„å·¥ä½œç©ºé—´æ–‡ä»¶ï¼Œé“¾æ¥å™¨å‘½ä»¤æ–‡ä»¶ä»¥åŠå…¶ä»–æ”¯æŒæ–‡ä»¶ã€‚ </p><br><p> ä½†æ˜¯ï¼Œä»æºæ–‡æœ¬çš„è§’åº¦æ¥çœ‹ï¼Œæ‰€æè¿°çš„æ–¹æ³•çš„é—®é¢˜åœ¨äºä¸é€æ˜ï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆéš¾è·Ÿè¸ªæºä¸­é…ç½®ç³»ç»Ÿåœ¨å“ªé‡Œå’Œä»€ä¹ˆå‘ç”Ÿäº†å˜åŒ–ã€‚ å¦ä¸€æ–¹é¢ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæ²¡æœ‰åŠ¨æœºæ”¯æŒå°†é¡¹ç›®è‡ªåŠ¨è½¬ç§»åˆ°ä¸åŒçš„IDEçš„åŠŸèƒ½ã€‚ </p><br><p> å› æ­¤ï¼Œå†³å®šæ”¾å¼ƒè¿™ç§æ–¹æ³•ã€‚ å¦‚ä¸Šä¸€ç¯‡æ–‡ç« æ‰€è¿°ï¼Œå®ƒåªæ˜¯è¢«ç®€å•åœ°å½¢æˆä¸º<strong>IDE IAR</strong>çš„åœ¨çº¿é¡¹ç›®ï¼Œåœ¨IDEå·¥ä½œåŒºä¸­è·å¾—äº†éç»“æ„åŒ–çš„æ–‡ä»¶å †ï¼Œç„¶åå°†å®ƒä»¬ç³»ç»ŸåŒ–å¹¶ä¸¢å¼ƒäº†ä¸å¿…è¦çš„æ–‡ä»¶ã€‚ å› æ­¤ï¼Œæ‚¨ä¸å†éœ€è¦é€šè¿‡<strong>.json</strong>æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œå¹¶ä¸”ä»…åœ¨ä¸‰ä¸ªç‰¹å®šä½ç½®æ”¾ç½®äº†å½±å“<strong>Mbed</strong>é…ç½®çš„å‚æ•°ï¼š </p><br><ul><li>  IDE <strong>ç¼–è¯‘å™¨é€‰é¡¹</strong> </li><li>  <strong>é“¾æ¥å™¨MKE18F512xxx16_flash.icfæ‰¹å¤„ç†æ–‡ä»¶</strong> </li><li> å¤´æ–‡ä»¶<strong>mbed_config.h</strong> </li></ul><br><p> åœ¨<strong>mbed_config.h</strong>æ–‡ä»¶ä¸­ï¼Œ <strong>æ‚¨</strong>å¯ä»¥è®¡ç®—å¤§çº¦130ä¸ªå®šä¹‰ï¼Œä¸€å¼€å§‹éå¸¸çƒ¦äººã€‚ ä½†å¹¸è¿çš„æ˜¯ï¼Œå®ƒä»¬å¤§å¤šæ•°ä¸è¯¥é¡¹ç›®ä¸­å½“å‰æœªä½¿ç”¨çš„æ— çº¿åè®®æ ˆæœ‰å…³ã€‚ ä¸ºæ–¹ä¾¿èµ·è§ï¼Œå¯¹æ¡ç›®è¿›è¡Œäº†æ’åºï¼Œä»¥ä¾¿å°†å®é™…æ¡ç›®æ”¾åœ¨é¡¶éƒ¨ã€‚ æœ€åˆï¼Œ <strong>mbed_config.h</strong>æ–‡ä»¶<strong>ä¸­</strong>ç”¨äºä¸åŒæ¨¡å—çš„å®šä¹‰<strong>æ˜¯</strong>éšæœº<strong>æ”¾ç½®çš„</strong> ï¼Œä½†æ˜¯åœ¨æ’åºä¹‹åï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">å¼€é—¨</b> <div class="spoiler_text"><pre><code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> __MBED_CONFIG_DATA__ <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __MBED_CONFIG_DATA__ // <span class="hljs-type"><span class="hljs-type">Configuration</span></span> parameters <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_RTOS_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:rtos <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_ALL_STATS_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> //<span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">DEVICE_SLEEP</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>       <span class="hljs-type"><span class="hljs-type">SLEEP</span></span>      <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_MAIN_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_TIMER_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_IDLE_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_DEFAULT_SERIAL_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">3000000</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_ALL_THREADS_INFO</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_FILENAME_CAPTURE_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_HIST_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_HIST_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_FORCE_NON_COPYABLE_ERROR</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_MAX_ERROR_FILENAME_LEN</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_POLL_USE_LOWPOWER_TIMER</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">3000000</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_BUFFERED_SERIAL</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_CONVERT_NEWLINES</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_CONVERT_TTY_NEWLINES</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_FLUSH_AT_EXIT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_DRIVERS_UART_SERIAL_RXBUF_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:drivers <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_DRIVERS_UART_SERIAL_TXBUF_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:drivers <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_DISPATCH_FROM_APPLICATION</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_EVENTSIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_HIGHPRIO_EVENTSIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_HIGHPRIO_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_USE_LOWPOWER_TIMER_TICKER</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_DEBUG_AT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_RANDOM_MAX_START_DELAY</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_USE_APN_LOOKUP</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_FILESYSTEM_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:filesystem <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_KINETIS_EMAC_RX_RING_LEN</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:kinetis-emac <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_KINETIS_EMAC_TX_RING_LEN</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> // set by library:kinetis-emac <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_ADR_ON</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APP_PORT</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPLICATION_EUI</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPLICATION_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPSKEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_AUTOMATIC_UPLINK_MESSAGE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DEVICE_ADDRESS</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DEVICE_EUI</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DUTY_CYCLE_ON</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_LBT_ON</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_NB_TRIALS</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_NWKSKEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_OVER_THE_AIR_ACTIVATION</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_PHY</span></span> <span class="hljs-type"><span class="hljs-type">EU868</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_PUBLIC_NETWORK</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_TX_MAX_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ADDR_TIMEOUT</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ADDR_TIMEOUT_MODE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_DEBUG_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_DEFAULT_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ENABLE_PPP_TRACE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ETHERNET_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IP_VER_PREF</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IPV4_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IPV6_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_MEM_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">36560</span></span> // set by library:lwip[<span class="hljs-type"><span class="hljs-type">Freescale</span></span>] <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_PPP_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">768</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_SERVER_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCPIP_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1200</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_UDP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_USE_MBED_TRACE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL_MASK</span></span> <span class="hljs-number"><span class="hljs-number">0x7fff800</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL_PAGE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_DEVICE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">NET_6LOWPAN_ROUTER</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PANID_FILTER</span></span> <span class="hljs-number"><span class="hljs-number">0xffff</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PSK_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0xa0</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xa2</span></span>, <span class="hljs-number"><span class="hljs-number">0xa3</span></span>, <span class="hljs-number"><span class="hljs-number">0xa4</span></span>, <span class="hljs-number"><span class="hljs-number">0xa5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa6</span></span>, <span class="hljs-number"><span class="hljs-number">0xa7</span></span>, <span class="hljs-number"><span class="hljs-number">0xa8</span></span>, <span class="hljs-number"><span class="hljs-number">0xa9</span></span>, <span class="hljs-number"><span class="hljs-number">0xaa</span></span>, <span class="hljs-number"><span class="hljs-number">0xab</span></span>, <span class="hljs-number"><span class="hljs-number">0xac</span></span>, <span class="hljs-number"><span class="hljs-number">0xad</span></span>, <span class="hljs-number"><span class="hljs-number">0xae</span></span>, <span class="hljs-number"><span class="hljs-number">0xaf</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PSK_KEY_ID</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_SEC_LEVEL</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_SECURITY_MODE</span></span> <span class="hljs-type"><span class="hljs-type">NONE</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_HEAP_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">32500</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL_MASK</span></span> <span class="hljs-number"><span class="hljs-number">0x7fff800</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL_PAGE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_COMMISSIONING_DATASET_TIMESTAMP</span></span> <span class="hljs-number"><span class="hljs-number">0x10000</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_EXTENDED_PANID</span></span> {<span class="hljs-number"><span class="hljs-number">0xf1</span></span>, <span class="hljs-number"><span class="hljs-number">0xb5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xb2</span></span>,<span class="hljs-number"><span class="hljs-number">0xc4</span></span>, <span class="hljs-number"><span class="hljs-number">0xd5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xbd</span></span> } // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_ML_PREFIX</span></span> {<span class="hljs-number"><span class="hljs-number">0xfd</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0d</span></span>, <span class="hljs-number"><span class="hljs-number">0xb8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_NETWORK_NAME</span></span> <span class="hljs-comment"><span class="hljs-comment">"Thread Network"</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_PANID</span></span> <span class="hljs-number"><span class="hljs-number">0x0700</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_PSKC</span></span> {<span class="hljs-number"><span class="hljs-number">0xc8</span></span>, <span class="hljs-number"><span class="hljs-number">0xa6</span></span>, <span class="hljs-number"><span class="hljs-number">0x2e</span></span>, <span class="hljs-number"><span class="hljs-number">0xae</span></span>, <span class="hljs-number"><span class="hljs-number">0xf3</span></span>, <span class="hljs-number"><span class="hljs-number">0x68</span></span>, <span class="hljs-number"><span class="hljs-number">0xf3</span></span>, <span class="hljs-number"><span class="hljs-number">0x46</span></span>, <span class="hljs-number"><span class="hljs-number">0xa9</span></span>, <span class="hljs-number"><span class="hljs-number">0x9e</span></span>, <span class="hljs-number"><span class="hljs-number">0x57</span></span>, <span class="hljs-number"><span class="hljs-number">0x85</span></span>, <span class="hljs-number"><span class="hljs-number">0x98</span></span>, <span class="hljs-number"><span class="hljs-number">0x9d</span></span>, <span class="hljs-number"><span class="hljs-number">0x1c</span></span>, <span class="hljs-number"><span class="hljs-number">0xd0</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_DEVICE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">MESH_DEVICE_TYPE_THREAD_ROUTER</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_MASTER_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x10</span></span>, <span class="hljs-number"><span class="hljs-number">0x11</span></span>, <span class="hljs-number"><span class="hljs-number">0x22</span></span>, <span class="hljs-number"><span class="hljs-number">0x33</span></span>, <span class="hljs-number"><span class="hljs-number">0x44</span></span>, <span class="hljs-number"><span class="hljs-number">0x55</span></span>, <span class="hljs-number"><span class="hljs-number">0x66</span></span>, <span class="hljs-number"><span class="hljs-number">0x77</span></span>, <span class="hljs-number"><span class="hljs-number">0x88</span></span>, <span class="hljs-number"><span class="hljs-number">0x99</span></span>, <span class="hljs-number"><span class="hljs-number">0xaa</span></span>, <span class="hljs-number"><span class="hljs-number">0xbb</span></span>, <span class="hljs-number"><span class="hljs-number">0xcc</span></span>, <span class="hljs-number"><span class="hljs-number">0xdd</span></span>, <span class="hljs-number"><span class="hljs-number">0xee</span></span>, <span class="hljs-number"><span class="hljs-number">0xff</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_PSKD</span></span> <span class="hljs-comment"><span class="hljs-comment">"ABCDEFGH"</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_SECURITY_POLICY</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_USE_STATIC_LINK_CONFIG</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_USE_MALLOC_FOR_HEAP</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_CONFIGURATION</span></span> nanostack_full // set by library:nanostack <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_CRITICAL_SECTION_USABLE_FROM_INTERRUPT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_DISPATCH_FROM_APPLICATION</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">6144</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_USE_MBED_EVENTS</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_NVM_CFSTORE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_MESH_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">THREAD</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_STACK</span></span> <span class="hljs-type"><span class="hljs-type">LWIP</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_WIFI_SECURITY</span></span> <span class="hljs-type"><span class="hljs-type">NONE</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_CACHE_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_RESPONSE_WAIT_TIME</span></span> <span class="hljs-number"><span class="hljs-number">5000</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_RETRIES</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_TOTAL_ATTEMPTS</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_APN_LOOKUP</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_AT_PARSER_BUFFER_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_AT_PARSER_TIMEOUT</span></span> <span class="hljs-number"><span class="hljs-number">8000</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">115200</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_TARGET_NETWORK_DEFAULT_INTERFACE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">ETHERNET</span></span> // set by target:<span class="hljs-type"><span class="hljs-type">K66F</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_BLOCK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_ENABLE_INFO</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_INTRINSICS</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_LOOKAHEAD</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_PROG_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_READ_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_IPV4_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_IPV6_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NVSTORE_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:nvstore <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NVSTORE_MAX_KEYS</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:nvstore // <span class="hljs-type"><span class="hljs-type">Macros</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> _RTE_ // defined by library:rtos <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NS_USE_EXTERNAL_MBED_TLS</span></span> // defined by library:nanostack <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INCLUDE_CONFIG_H</span></span> // defined by library:utest <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span></code> </pre> </div></div><br><h2 id="osobennosti-perehoda-na-c-v-primenenii-k-rtos"> åº”ç”¨äºRTOSçš„å‘C ++è¿‡æ¸¡çš„åŠŸèƒ½ </h2><br><p>  <strong>Mbedä¸­</strong> <strong>çš„</strong>é¡¶çº§<strong>API</strong>ç”¨<strong>C ++</strong>ç¼–å†™ï¼Œå› æ­¤è¯¥è¯­è¨€å¿…é¡»åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­ä½¿ç”¨ã€‚ ä½†æ˜¯ï¼Œæ‚¨éœ€è¦äº†è§£ä¸€äº›ç»†å¾®å·®åˆ«ã€‚ <br> åœ¨å°å‹åµŒå…¥å¼ç³»ç»Ÿä¸Šä½¿ç”¨<strong>C ++</strong>è¿›è¡Œ<strong>RTOSçš„</strong>æƒ…å†µä»ç„¶å¾ˆå°‘ã€‚ è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼ŒæˆåŠŸçš„<strong>RTOS</strong>é¡¹ç›®åŠ›äº‰æˆä¸ºå¤šå¹³å°çš„ï¼Œè€Œä¸<strong>C</strong>ç›¸æ¯”ï¼Œ <strong>C ++</strong>å¯¹å¹³å°èµ„æºç®¡ç†æœ‰å¾ˆé«˜çš„è¦æ±‚<strong>ã€‚</strong> åŸå› æ˜¯å¸Œæœ›å‘ç”¨æˆ·éšè—ä½çº§èµ„æºç®¡ç†çš„è¯¦ç»†ä¿¡æ¯ã€‚ å®ƒä¸»è¦ä¸å†…å­˜èµ„æºæœ‰å…³ã€‚ æ„é€ å‡½æ•°ï¼Œææ„å‡½æ•°ï¼Œçº¿ç¨‹ï¼Œå…·æœ‰è‡ªåŠ¨é”€æ¯çš„å¼‚å¸¸ï¼Œæ•°æ®ç»“æ„å¯¹è±¡çš„æ¨¡æ¿ç­‰ä½¿ç”¨å…·æœ‰åŠ¨æ€å†…å­˜çš„éšå¼æ“ä½œã€‚ ä½†æ˜¯å°å‹ç³»ç»Ÿä¸­çš„<strong>RAM</strong>èµ„æºéå¸¸æœ‰é™ã€‚ åœ¨æ­¤ç±»ç³»ç»Ÿä¸­ï¼Œå°¤å…¶æ˜¯<strong>RTOS</strong>ä¸­ï¼ŒRAMæ˜¯æœ€ç¨€ç¼ºçš„èµ„æºã€‚ åœ¨<strong>RTOSä¸­ï¼Œä¸º</strong>æ¯ä¸ªä»»åŠ¡åˆ†é…äº†ä¸€ä¸ªå †æ ˆï¼Œå¼€å‘äººå‘˜æ— æ³•é¢„å…ˆé¢„æµ‹å…¶ç¡®åˆ‡å¤§å°ï¼Œå› æ­¤é€‰æ‹©æ—¶è¦ç•™ä¸€äº›ä½™é‡ã€‚ å› æ­¤ï¼Œå­˜åœ¨æ•°åä¸ªä»»åŠ¡çš„<strong>RTOS</strong>ç«‹å³éœ€è¦10åˆ°30 kBçš„<strong>RAM</strong>å¤§å°ã€‚ å„ç§è§£æå™¨å’Œåè®®ï¼ˆHTTPï¼ŒHTML ...ï¼‰å’Œæ–‡ä»¶ç³»ç»Ÿéœ€è¦å¤§é‡å†…å­˜ã€‚ å¦‚æœä½¿ç”¨æ˜¾ç¤ºå™¨ï¼Œåˆ™å¯¹ç©ºé—²<strong>RAM</strong>çš„è¦æ±‚ä¼šè¿›ä¸€æ­¥æé«˜ã€‚ </p><br><p>  <strong>IAR</strong>ç­‰å¼€å‘ç¯å¢ƒçš„åº“é…å¤‡äº†è‰¯å¥½çš„åŠ¨æ€å†…å­˜ç®¡ç†å™¨ï¼Œä½†å®ƒä»¬æ˜¯ä¸ºå•çº¿ç¨‹è¿è¡Œæ—¶ç¯å¢ƒè®¾è®¡çš„ã€‚ ä»–ä»¬å¼€å§‹åœ¨<strong>RTOSä¸­</strong>å·¥ä½œï¼Œæœ‰å¿…è¦ç¼–å†™å…¶ä»–ä»£ç ã€‚ æ­¤è¿‡ç¨‹ç§°ä¸º<strong>é‡å®šå‘</strong> ã€‚ <br> åœ¨ç”¨<strong>Cè¯­è¨€</strong>ç¼–å†™çš„<strong>RTOS</strong>ä¸­<strong>ï¼Œ</strong>é€šå¸¸ä¸ä¼šæ‰§è¡Œé‡æ–°å®šå‘ã€‚ ç”±äºåœ¨è¯­è¨€çº§åˆ«æ²¡æœ‰åŠ¨æ€å†…å­˜çš„éšå¼æ“ä½œï¼Œå› æ­¤æ‰€æœ‰æ“ä½œéƒ½é€šè¿‡è°ƒç”¨å®ƒä»¬è‡ªå·±çš„<strong>malloc</strong>å’Œ<strong>free</strong>å‡½æ•°çš„çº¿ç¨‹å®‰å…¨ç‰ˆæœ¬æ¥æ˜¾å¼æ‰§è¡Œã€‚ ç¨‹åºå‘˜å¯ä»¥å®Œå…¨æ§åˆ¶å…·æœ‰åŠ¨æ€å†…å­˜çš„æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾åœ°åº”ç”¨æ‰€æœ‰å¯èƒ½çš„æªæ–½æ¥ä¿å­˜å®ƒã€‚ </p><br><p> å¯¹äº<strong>C ++ï¼Œ</strong>å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨è¯¥è¯­è¨€çš„æ‰€æœ‰åŠŸèƒ½ï¼Œåˆ™å¿…é¡»è¿›è¡Œ<strong>é‡å®šå‘</strong> ã€‚ ä½†æ˜¯åœ¨æ¯ä¸ªå¼€å‘ç¯å¢ƒä¸­<strong>é‡æ–°å®šå‘</strong>æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å•ç‹¬è¿‡ç¨‹ã€‚ è¿™ä½¿<strong>RTOS</strong>å¼€å‘äººå‘˜çš„ç”Ÿæ´»å˜å¾—å›°éš¾ã€‚ </p><br><p> ä¸‹å›¾æ˜¯å¸¦æœ‰é‡å®šå‘çš„è°ƒç”¨ç»“æ„çš„ç¤ºä¾‹ã€‚  <em>__write</em> ï¼Œ <em>__lseek</em> ï¼Œ <em>__readå‡½æ•°</em>å¯èƒ½æ— æ³•ç”±ç”¨æˆ·å®ç°ï¼Œä½†å…¶åŠŸèƒ½<em>ä»ç”±</em> <strong>IDE</strong>è‡ªè¡Œå†³å®šã€‚ å¹¶ä¸”è‚¯å®š<strong>printf</strong>å’Œ<strong>scanf</strong>å°†ä¸ä¼šæ˜¯å¤šçº¿ç¨‹çš„ã€‚ </p><br><img src="https://habrastorage.org/webt/xq/fa/8e/xqfa8eksi4rb4ytbicaehymj0py.png"><br><p>  <strong>Mbedæ˜¯</strong>ä¸ºå°‘æ•°å‡ ä¸ªçŸ¥åå¼€å‘å·¥å…·ï¼ˆ <strong>GCC</strong> ï¼Œ <strong>IAR</strong> ï¼Œ <strong>Keilï¼‰</strong>æä¾›é‡æ–°å®šä½ç›®æ ‡çš„<strong>RTOS</strong>ä¹‹ä¸€ï¼Œå³ä½¿ä¸æ˜¯å”¯ä¸€çš„<strong>RTOS</strong>ä¹‹ä¸€ã€‚ <br> å°½ç®¡æœ‰ä¸Šè¿°æ‰€æœ‰å†…å®¹ï¼Œæ‚¨ä»å¯ä»¥æ‰¾åˆ°æœ‰å…³å°†<strong>RTOS</strong>ç§»æ¤åˆ°<strong>C ++</strong>è€Œä¸æ‰§è¡Œé‡æ–°å®šä½çš„æ–‡ç« ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡ç®€å•åœ°ç”¨æ‚¨è‡ªå·±çš„é€šç”¨æ ‡å‡†å‡½æ•°æ›¿æ¢æ¥è§£å†³é—®é¢˜ã€‚ è¿™å¯èƒ½å¯è¡Œï¼Œä½†æ˜¯å½“åœ¨<strong>IARä¸­</strong>ä½¿ç”¨<strong>C ++</strong>æ„é€ æ—¶ï¼Œç¨‹åºå‘˜éœ€è¦æ„è¯†åˆ°å„ç§éšå¼å’Œæœªè®°å½•çš„é™åˆ¶ï¼ˆä»…é™æ€æ„é€ å™¨ï¼Œæ£€æŸ¥æ‰€æœ‰æ¨¡å¼çš„<strong>new</strong> ï¼Œä¸¢å¼ƒå¼‚å¸¸ç­‰ï¼‰ã€‚ è°ƒç”¨<strong>C ++</strong>å·²ç»å¾ˆå›°éš¾ã€‚ ä½œä¸ºç”¨æˆ·å‹å¥½çš„ç³»ç»Ÿï¼Œ <strong>Mbed</strong>æ¶ˆé™¤äº†è®¸å¤šè¿™äº›é™åˆ¶ï¼Œä»¥ç®€å•çš„æ–¹å¼æ¥è¿‘<strong>Arduino</strong> ã€‚ </p><br><p> é™¤äº†æ‰€æœ‰æœ€æ–°ç‰ˆæœ¬çš„IARï¼Œåˆ‡æ¢åˆ°C11å’ŒC ++ 14éƒ½æœ‰å›°éš¾ï¼Œè¿™åœ¨æ­¤å¤„è¿›è¡Œäº†æè¿°-https: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//www.iar.com/support/resources/articles/exploring-c11-and-c14/</a> </p><br><h2 id="kak-organizuyutsya-preryvaniya-v-mbed">  Mbedä¸­çš„ä¸­æ–­å¦‚ä½•ç»„ç»‡ </h2><br><p> å¥‡æ€ªçš„æ˜¯ï¼Œå°†æ— æ³•åœ¨Mbed APIä¸­æ‰¾åˆ°ç”¨äºç»„ç»‡ä¸­æ–­æœåŠ¡çš„ç±»æˆ–å‡½æ•°æˆ–æŸäº›ä¸œè¥¿ã€‚ æ‚¨åªèƒ½æ‰¾åˆ°<strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">InterruptIn</a></strong>ç±»ï¼Œè¯¥ç±»ä»…ç”¨äºå¤–éƒ¨ç«¯å£ã€‚ </p><br><p> è¿™äº›é—®é¢˜çš„ç­”æ¡ˆåº”åœ¨<strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CMSIS-RTOSä¸­</a></strong> ï¼Œå³åœ¨<em>CMSIS Cortex-M4æ ¸å¿ƒå¤–å›´è®¿é—®å±‚ä¸­</em>å¯»æ±‚ã€‚ å®åœ¨æ­¤å¤„å®šä¹‰ï¼š </p><br><ul><li>  <strong><em>NVIC_SetVector-</em></strong>ä¸ºç»™å®šçš„å‘é‡è®¾ç½®ä¸­æ–­æœåŠ¡ç¨‹åºï¼ˆISRï¼‰ </li><li>  <strong><em>NVIC_SetPriority-</em></strong>è®¾ç½®æŒ‡å®šä¸­æ–­å‘é‡çš„ä¼˜å…ˆçº§ã€‚ </li><li>  <strong><em>NVIC_EnableIRQ-</em></strong>å…è®¸åœ¨ç»™å®šå‘é‡ä¸Šè¿›è¡Œä¸­æ–­è°ƒç”¨ </li></ul><br><p> åˆå§‹åŒ–<strong>SysTick</strong>è®¡æ—¶å™¨çš„ä¸­æ–­ç»„ç»‡çš„æ–¹æ³•å¦‚ä¸‹ï¼š </p><br><pre> <code class="hljs lisp"> NVIC_SetVector(<span class="hljs-name"><span class="hljs-name">mbed_get_m0_tick_irqn</span></span>(), (<span class="hljs-name"><span class="hljs-name">uint32_t</span></span>)SysTick_Handler)<span class="hljs-comment"><span class="hljs-comment">; //   mbed_get_m0_tick_irqn       SysTick. //        SysTick_IRQn    MKE18F16.h //  SysTick_Handler   . NVIC_SetPriority(mbed_get_m0_tick_irqn(), 0xFF); // 0xFF    .      .   NVIC    MKE18F16   16  . ..   4-  . NVIC_EnableIRQ(mbed_get_m0_tick_irqn()); //    .</span></span></code> </pre> <br><p>  Mbedä»»åŠ¡ä¼˜å…ˆçº§å’Œä¸­æ–­ä¼˜å…ˆçº§ä¸åº”æ··æ·†ã€‚ </p><br><p> å¦‚æœæœªåˆ†é…ä¼˜å…ˆçº§ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹å°†å…¶è®¾ç½®ä¸ºæœ€å¤§ã€‚ <br> ä»ä»¥è¿™ç§æ–¹å¼åˆ†é…çš„ä¸­æ–­å¤„ç†ç¨‹åºä¸­ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ä»»ä½•ä¸ä¼šå¼•èµ·æœŸæœ›çš„<strong>RTOS</strong>æœåŠ¡ã€‚ å³ ä¼ è¾“æ ‡å¿—ï¼Œä¿¡å·é‡ï¼Œæ¶ˆæ¯ï¼Œé‚®ç®±ç­‰ ä½†æ˜¯ï¼Œä¸æ˜¯ä»<strong>ISR</strong>æœ¬èº«è°ƒç”¨æœåŠ¡ï¼Œè€Œæ˜¯é€šè¿‡å°†<strong>Cortex-M</strong>å†…æ ¸çš„<em>ç³»ç»Ÿæ§åˆ¶å—</em> ï¼ˆ <strong>SCB</strong> ï¼‰çš„<em>ä¸­æ–­æ§åˆ¶å’ŒçŠ¶æ€å¯„å­˜å™¨</em> ï¼ˆ <strong>ICSR</strong> ï¼‰ä¸­çš„<strong>PENDSVSET</strong>ä½ç½®1æ¥è°ƒç”¨è½¯ä»¶ä¸­æ–­ã€‚ å³ å½“å‰ä¸­æ–­å¤„ç†ç¨‹åºå®Œæˆåï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–ä¼˜å…ˆçº§ä¸­æ–­ï¼Œåˆ™å°†é€šè¿‡<strong>PendSV</strong>å‘é‡è°ƒç”¨ç³»ç»Ÿå¤„ç†ç¨‹åºï¼Œå¹¶åœ¨å…¶ä¸­æ‰§è¡ŒæœåŠ¡ã€‚ </p><br><h2 id="kak-v-mbed-proishodit-rabota-s-dinamicheskoy-pamyatyu">  Mbedå¦‚ä½•ä¸åŠ¨æ€å†…å­˜ä¸€èµ·ä½¿ç”¨ï¼Ÿ </h2><br><p> ä½¿ç”¨<strong>C ++è¿›è¡Œ</strong>ç¼–ç¨‹æ—¶<strong>ï¼Œ</strong> <strong>åŠ¨æ€å†…å­˜ï¼ˆ</strong>æˆ–<strong>å †</strong>æˆ–<strong>å †ï¼‰</strong>æ˜¯å¿…éœ€çš„ç»„ä»¶ã€‚ åœ¨<strong>IAR</strong>ä¸‹çš„<strong>Mbed</strong>é¡¹ç›®ä¸­ï¼Œè¯¥å­˜å‚¨åŒºçš„å¤§å°åœ¨<strong>MKE18F512xxx16_flash.icf</strong>é“¾æ¥å™¨çš„è®¾ç½®æ–‡ä»¶ä¸­é€šè¿‡å†™å…¥<strong>__size_heap__</strong>å˜é‡æ¥ç¡®å®šã€‚ æˆ‘ä»¬è®¾ç½®å¤§å°ä»¥ä½¿å…¶å ç”¨æ‰€æœ‰å‰©ä½™çš„å¯ç”¨å†…å­˜ã€‚ æˆ‘ä»¬çŸ¥é“ç¼–è¯‘å<strong>.map</strong>æ–‡ä»¶è¿˜å‰©ä¸‹å¤šå°‘å¯ç”¨å†…å­˜ï¼Œå³ è°ƒæ•´<strong>å †</strong>å¤§å°æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ã€‚ </p><br><h3 id="vyzov-staticheskih-konstruktorov-obektov-c"> è°ƒç”¨C ++å¯¹è±¡çš„é™æ€æ„é€ å‡½æ•° </h3><br><p> ä½¿ç”¨<strong>C ++</strong>æ—¶çš„ä¸€ä¸ªé‡è¦é—®é¢˜æ˜¯åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•è°ƒç”¨å…¨å±€å¯¹è±¡æ„é€ å‡½æ•°ã€‚ å³ä½¿åœ¨<strong>RTOS</strong>å£°ç§°ä¸¥é‡æ€§ï¼ˆä¾‹å¦‚<strong>MAXï¼‰ä¸­</strong> ï¼Œä¹Ÿå°†å¿½ç•¥å®ƒï¼Œå³ ç•™ç»™æœºä¼šã€‚ åœ¨é‚£é‡Œï¼Œè®¾è®¡äººå‘˜å¯ä»¥ä½¿ç”¨é€šå¸¸çš„å•çº¿ç¨‹å†…å­˜åˆ†é…æœºåˆ¶æ¥å¼€å‘æ ‡å‡†çš„å•çº¿ç¨‹å¼€å‘ç¯å¢ƒåº“ã€‚ ä½†æ˜¯åœ¨å¼€å§‹ä¹‹åï¼Œé€šç”¨<strong>RTOS</strong>åˆ›å»ºäº†è‡ªå·±çš„ç”¨äºç®¡ç†åŠ¨æ€å†…å­˜çš„æœºåˆ¶ï¼Œè€Œå…¨å±€å¯¹è±¡å ç”¨çš„å†…å­˜ä»ç„¶è¢«é—å¿˜äº†ã€‚ è¿™æ˜¯æˆ‘ä»¬åŠªåŠ›èŠ‚çœå†…å­˜å¹¶æ§åˆ¶ä¸€åˆ‡çš„ä¸€ä¸ªæ¼æ´ã€‚ </p><br><p>  <strong>Mbed</strong>æ›´è®¤çœŸåœ°å¤„ç†äº†è¿™ä¸ªé—®é¢˜ã€‚ é‚£é‡Œå¯¹äºæ¯ç§å¼€å‘ç¯å¢ƒéƒ½æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚ åœ¨<strong>IARä¸­ï¼Œ</strong>è¿™æ ·åšæ˜¯è¿™æ ·çš„ï¼š </p><br><ul><li> ç”šè‡³åœ¨è®¾è®¡è€…è°ƒç”¨ä¹‹å‰ï¼Œåˆå§‹åŒ–æµå°±è¢«ç”¨æˆ·ä»£ç æ‹¦æˆª </li><li> ä»<strong>RTOS API</strong>é˜»æ­¢æµçš„æ–¹æ³•<strong>å·²</strong>æ›¿æ¢ä¸ºæ ‡å‡†åº“ </li><li> æ ‡å‡†å‡½æ•°<strong>new</strong> ï¼Œ <strong>delete</strong> ï¼Œ <strong>malloc</strong> ï¼Œ <strong>free</strong> ...è¢«é‡å®šå‘åˆ°å¯¹<strong>RTOS</strong>åŠ¨æ€å†…å­˜<strong>APIçš„è°ƒç”¨</strong> ã€‚ </li></ul><br><p>  <strong>Mbed</strong>ä½¿ç”¨<strong>IAR</strong>åº“é€‚é…å™¨è¿›è¡Œå¤šçº¿ç¨‹æ“ä½œ <br> æ‚¨å¯ä»¥åœ¨æ­¤å¤„äº†è§£æœ‰å…³å°†IARè°ƒæ•´ä¸ºå¤šçº¿ç¨‹çš„ä¿¡æ¯-http://supp.iar.com/FilesPublic/UPDINFO/005691/arm/doc/infocenter/DLIBThreadSupport.html <br>  <strong>Mbed</strong>ä¿®æ”¹äº†<strong>IAR</strong>åº“çš„ç³»ç»Ÿ<em>é”</em>å’Œ<em>æ–‡ä»¶æµé”</em> ã€‚ å®ƒä»¬åœ¨<em>mbed_boot.c</em>æ–‡ä»¶ä¸­å®ç°ï¼Œå¹¶ä½¿ç”¨<strong>æ“ä½œç³»ç»Ÿäº’æ–¥é”</strong> ã€‚ </p><br><p> åœ¨<strong>startup_MKE18F16.s</strong>æ–‡ä»¶çš„ç¬¬ä¸€è¡Œä¸­æ‰§è¡Œçš„<strong>__iar_program_start</strong>å‡½æ•°é€šè¿‡è°ƒç”¨<em>mbed_set_stack_heap</em>åˆå§‹åŒ–æ“ä½œç³»ç»Ÿå †æ ˆå’ŒåŠ¨æ€å†…å­˜ã€‚ </p><br><h2 id="naznachenie-razmerov-stekov-zadach"> è°ƒæ•´ä»»åŠ¡å †æ ˆçš„å¤§å° </h2><br><p> å°†ä»»åŠ¡å †æ ˆæœ€å°åŒ–æ˜¯èŠ‚çœ<strong>RAM</strong>çš„æœ€æœ‰å¸å¼•åŠ›çš„é€‰æ‹©ã€‚ <br> å¯¹äºéœ€è¦è¾ƒå°‘å †æ ˆçš„ä»»åŠ¡ï¼Œä½¿ç”¨äº†ä¸åŒçš„æŠ€æœ¯ã€‚ ä¾‹å¦‚ï¼Œåº“å‡½æ•°å¼ºçƒˆå½±å“ç”¨äºè¾“å‡ºå’Œæ ¼å¼åŒ–<strong>printf</strong> ï¼Œ <strong>sprintf</strong> ï¼Œ <strong>scanf</strong>è¡Œç­‰çš„å †æ ˆã€‚ ä»–ä»¬å…·æœ‰ä¸ºå †æ ˆä¸Šçš„æ•°æ®å­˜å‚¨åˆ†é…è¾ƒå¤§çš„ä¸´æ—¶åŒºåŸŸçš„èƒ½åŠ›ã€‚ å¦‚æœæˆ‘ä»¬æ‹’ç»åœ¨ä»»åŠ¡ä¸­ä½¿ç”¨è¿™äº›åŠŸèƒ½ï¼Œåˆ™å¯ä»¥å°†ä»»åŠ¡å †æ ˆå‡å°‘å‡ ç™¾ä¸ªå­—èŠ‚ã€‚ </p><br><p>  Mbed OSåœ¨å¯åŠ¨æ—¶ä¼šç«‹å³åˆ›å»ºä¸‰ä¸ªåç§°ä¸º<strong>â€œ main_threadâ€</strong> ï¼Œ <strong>â€œ timer_threadâ€</strong> ï¼Œ <strong>â€œ idle_threadâ€çš„ä»»åŠ¡</strong> ã€‚ å®ƒä»¬çš„é»˜è®¤å †æ ˆå¤§å°<strong>ç”±å¤´</strong>æ–‡ä»¶<strong>mbed_rtx_conf.h</strong>ä¸­çš„å®ç¡®å®šã€‚ æˆ‘ä»¬å°†è¿™äº›å †æ ˆçš„å£°æ˜ç§»è‡³<strong>mbed_config.h</strong>é…ç½®<strong>æ–‡ä»¶ä¸­ï¼Œ</strong>å¹¶å‡å°äº†å †æ ˆçš„å¤§å°ã€‚ ç°åœ¨å®šä¹‰å¦‚ä¸‹ï¼š </p><br><ul><li>  <strong>â€œ main_threadâ€</strong>ä»»åŠ¡å †æ ˆç”±å®<strong>MBED_CONF_APP_MAIN_STACK_SIZE</strong> = 1024å­—èŠ‚å®šä¹‰ </li><li>  <strong>timer_thread</strong>ä»»åŠ¡å †æ ˆç”±å®<strong>MBED_CONF_APP_TIMER_THREAD_STACK_SIZE</strong> = 512å­—èŠ‚å®šä¹‰ </li><li>  <strong>idle_thread</strong>ä»»åŠ¡å †æ ˆç”±å®<strong>MBED_CONF_APP_IDLE_THREAD_STACK_SIZE</strong> = 512å­—èŠ‚å®šä¹‰ </li></ul><br><h2 id="sredstva-kontrolya-za-ispolzovaniem-resursov-pamyati-v-mbed">  Mbedå†…å­˜ä½¿ç”¨æƒ…å†µæ§ä»¶ </h2><br><p> åŠ¨æ€å†…å­˜ä»¥åŠå †æ ˆéƒ½æ˜¯éœ€è¦ä¸æ–­å…³æ³¨çš„èµ„æºã€‚ è¦æŸ¥çœ‹ä½¿ç”¨äº†å¤šå°‘åŠ¨æ€å†…å­˜ä»¥åŠå¯¹å®ƒçš„è¯·æ±‚å¼ºåº¦æ˜¯å¤šå°‘ï¼Œæ¯ä¸ªä»»åŠ¡è¿˜â€‹â€‹å‰©ä¸‹å¤šå°‘å †æ ˆä»¥åŠMbedä¸­çš„å³°å€¼å †æ ˆè´Ÿè½½æ˜¯å¤šå°‘ï¼Œè¿™é‡Œæœ‰ä¸€äº›ç‰¹æ®Šçš„è®¡æ•°å™¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬è¢«æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ç¦ç”¨ï¼›è¦å¯ç”¨å®ƒä»¬ï¼Œå¿…é¡»å£°æ˜<strong>MBED_ALL_STATS_ENABLED</strong> ã€‚ å£°æ˜å®šä¹‰åï¼Œæ‚¨éœ€è¦ç¼–å†™è‡ªå·±çš„è¿‡ç¨‹ä»¥å‘ç”¨æˆ·æ˜¾ç¤ºä¿¡æ¯ã€‚ æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªç‰¹æ®Šçš„è¿‡ç¨‹ï¼Œç”¨äºå°†ç»Ÿè®¡ä¿¡æ¯è¾“å‡ºåˆ°VT100ç»ˆç«¯ä»¿çœŸå™¨ï¼Œç¨åå°†è¿›è¡Œè®¨è®ºã€‚ </p><br><p> é™¤äº†OSæä¾›çš„å·¥å…·å¤–ï¼Œæœ€æ–°ç‰ˆæœ¬çš„IARå¼€å‘ç¯å¢ƒè¿˜æ·»åŠ äº†æ–°çš„åŠŸèƒ½<strong>æ ˆcanaries</strong> ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨è¿™é‡Œ</a>é˜…è¯»æœ‰å…³å®ƒä»¬çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¿¡æ¯</a> ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>è®¨è®ºäº†æœ‰å…³æº¢å‡ºçš„ä¸€èˆ¬å †æ ˆä¿æŠ¤é—®é¢˜ã€‚ </p><br><h2 id="sredstva-otladki-i-analiza-koda-mbed">  Mbedä»£ç è°ƒè¯•å’Œåˆ†æå·¥å…· </h2><br><p> åªæœ‰ä½¿ç”¨<strong>JTAG / SWD</strong>è°ƒè¯•å™¨ï¼Œ <strong>æ‰èƒ½</strong>å¯¹<strong>Mbed</strong>åœ¨æ–°å¹³å°ä¸Šçš„å·¥ä½œè¿›è¡ŒçœŸæ­£æ·±å…¥çš„ç ”ç©¶ã€‚ </p><br><img width="300" align="left" src="https://habrastorage.org/webt/64/xh/my/64xhmylaiz-_eejrufyuqmo_2n8.png"><br><p>  <strong>Mbedæº</strong>å……æ»¡äº†å¤šçº§å®å’Œæ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ã€‚ ä»…æŸ¥çœ‹æºä»£ç å°±æ— æ³•è¯´å‡ºå“ªäº›åŠŸèƒ½æœ‰æ•ˆï¼Œå“ªäº›åŠŸèƒ½æ— æ•ˆï¼Œç¨‹åºåœ¨å“ªé‡Œè¿è¡Œä»¥åŠåœ¨å“ªé‡Œæ— æ•ˆã€‚ å”¯ä¸€çš„å‡ºè·¯æ˜¯è¿æ¥è°ƒè¯•å™¨å¹¶é€æ­¥åˆ†æç¨‹åºæ‰§è¡Œè·¯å¾„ã€‚ åœ¨ç§»æ¤é˜¶æ®µï¼Œå¦‚æœä¸è¿›è¡Œé€æ­¥è°ƒè¯•ï¼Œå‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚ </p><br><p> æˆ‘å»ºè®®ä½¿ç”¨<strong>J-Link Pro</strong>å’Œ<strong>J-Link Ultraçš„</strong> <strong>Segger</strong>è°ƒè¯•å™¨ç‰ˆæœ¬ã€‚ å®ƒä»¬çš„ç‰¹ç‚¹æ˜¯å¸¦å®½é«˜ï¼Œæ¯”æ™®é€šçš„å»‰ä»·å‹å·é«˜å‡ å€ã€‚ å¯¹äºå®æ—¶è°ƒè¯•ç³»ç»Ÿï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚ è·Ÿè¸ªå¿«é€Ÿäº‹ä»¶æ—¶ï¼Œæ­¤ç±»è°ƒè¯•å™¨ä¸å¤ªå®¹æ˜“å‘ç”Ÿæº¢å‡ºï¼Œå¹¶ä¸”æ‰€éœ€çš„è°ƒè¯•è¿­ä»£æ¬¡æ•°ä¹Ÿæ›´å°‘ã€‚ é™¤äº†åˆ†æ­¥è°ƒè¯•ä¹‹å¤–ï¼Œå®ƒä»¬è¿˜èƒ½å¤Ÿè®°å½•ä¸­æ–­ï¼Œä¿ç•™ä¸­æ–­ç»Ÿè®¡ä¿¡æ¯ï¼ˆåŒ…æ‹¬å…¶æ‰§è¡ŒæŒç»­æ—¶é—´ï¼‰ï¼Œæ”¯æŒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>RTT</strong></a>å’Œ<strong>ITM</strong>è°ƒè¯•æŠ€æœ¯ï¼Œæ•è·ç¡¬ä»¶å¼‚å¸¸å’Œå…¶ä»–åŠŸèƒ½ã€‚ </p><br><p> ä¸‹é¢æ˜¯é€šè¿‡J-Linké€‚é…å™¨å·¥ä½œæ—¶IARè°ƒè¯•å™¨çª—å£çš„è§†å›¾ã€‚ </p><br><p><img src="https://habrastorage.org/webt/n2/of/it/n2ofit9jpectc6sncr6c3sl1gzo.png"></p><br><p> è¿™ä¸å€¼å¾—èŠ‚çœï¼Œå¼€å‘æ—¶é—´çš„90ï¼…ç”¨äºè°ƒè¯•ã€‚ å°½ç®¡æ›´æ˜‚è´µçš„Segger <strong>J-Traceè·Ÿè¸ª</strong>å™¨ä¸å†å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œä½†ç”±äº<strong>MKE18F</strong>ç³»åˆ—<strong>æ²¡æœ‰</strong>ç‰¹æ®Šçš„è·Ÿè¸ªå™¨æ¥å£ã€‚ </p><br><p>  <strong>ç¬¬äºŒç§</strong>è°ƒè¯•å·¥å…·ï¼Œå½“ç„¶æ˜¯é€šè¿‡<strong>UARTçš„</strong> I / Oã€‚  Mbedå…·æœ‰è‡³å°‘å››ç§ä¸åŒçš„æŠ€æœ¯ï¼Œå¯é€šè¿‡<strong>UART</strong>è®¿é—®ä¸²è¡Œæ•°æ®é€šé“ï¼Œ </p><br><p> è¿™æ˜¯ï¼š </p><br><ul><li> é€šè¿‡æ ‡å‡†<strong>C / C ++</strong> I / Oå‡½æ•°çš„<strong>DirectSerial</strong>ç±»è¿›è¡Œé‡å®šå‘ </li><li>  <strong>RawSerial</strong>ç±» </li><li> ç±»<strong>åºåˆ—</strong> </li><li>  <strong>UARTSerial</strong>ç±» </li></ul><br><p> éå¸¸ä¸åŒçš„å“ç§ã€‚ å¯ä»¥åŒæ—¶ä½¿ç”¨æ‰€æœ‰å››ä¸ªè¾“å‡ºåˆ°åŒä¸€ç«¯å£ã€‚ å…¶ä¸­ä¸€äº›åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä¸€äº›åŠŸèƒ½æ›´å°‘ï¼Œæœ‰æ–‡ä»¶è®°å½•ï¼Œè€Œå¦ä¸€äº›åˆ™æ²¡æœ‰ã€‚ å°†æ¥ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<strong>RawSerial</strong>ä½œä¸ºèµ„æºæœ€å°‘çš„ç±»ã€‚ </p><br><h2 id="skolko-my-teryaem-taymerov-portirovav-mbed"> é€šè¿‡ç§»æ¤Mbedæˆ‘ä»¬å¤±å»äº†å¤šå°‘ä¸ªè®¡æ—¶å™¨ </h2><br><p> è¦ä½¿LEDé—ªçƒï¼Œä½¿ç”¨<strong>äº†</strong> Mbed OS <strong>APIä¸­</strong>çš„<strong>ç­‰å¾…</strong>åŠŸèƒ½ã€‚ ä¸Šä¸€ç¯‡æ–‡ç« è®¨è®ºäº†ç§»æ¤çš„é—®é¢˜ã€‚ ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ï¼Œé™¤äº†Mbedä¿ç•™å…¶å·¥ä½œè®¡æ•°å™¨ï¼ˆå¯ä»¥ç”±<strong>mbed_stats_cpu_get</strong>å‡½æ•°è¯»å–ï¼‰å¹¶ä¸”æœ‰ä¸€ä¸ª<strong>è®¡æ—¶å™¨API</strong> ã€‚ è¿™äº›æœåŠ¡ä½¿ç”¨<strong>lp_ticker.c</strong>æ–‡ä»¶ä¸­çš„ä½çº§åŠŸèƒ½ã€‚ åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œ <strong>Kinetis</strong>å¤–è®¾å¥—ä»¶ä¸­çš„<strong>LPTMR</strong>è®¡æ—¶å™¨ç”¨äºç»„ç»‡æ—¶é—´<strong>è®¡æ•°</strong> ã€‚ åœ¨ç§»æ¤è¿‡ç¨‹ä¸­ï¼Œå¯¹è¯¥æ–‡ä»¶è¿›è¡Œäº†ç¼–è¾‘ä»¥åŒ¹é…<strong>MKE18F512VLL16</strong>å¾®æ§åˆ¶å™¨ä¸­ä½¿ç”¨çš„æ—¶é’Ÿæ–¹æ³•ã€‚ </p><br><p> å› æ­¤ï¼Œ <strong>Mbedç«¯å£</strong>å®Œå…¨æ•è·äº†ä¸¤ä¸ªè®¡æ•°å™¨æ¨¡å—<strong>-PIT</strong>å’Œ<strong>LPTMR</strong>ä»¥åŠ<strong>SysTick</strong>æ ¸å¿ƒ<strong>è®¡æ—¶å™¨</strong> ã€‚ åœ¨ä¸ºåº”ç”¨ä»»åŠ¡è®¡åˆ’èµ„æºæ—¶ï¼Œåº”è®°ä½è¿™ä¸€ç‚¹ã€‚ </p><br><h2 id="osobennosti-nachalnoy-zagruzki-mke18f">  MKE18Få¼•å¯¼ç¨‹åºåŠŸèƒ½ </h2><br><p>  <strong>MKE18F</strong>ç³»åˆ—<strong>èŠ¯ç‰‡</strong>å…·æœ‰ä¸€ä¸ªå†…ç½®<strong>ROMï¼Œå®ƒ</strong>å…·æœ‰ä¸€ä¸ªé€šè¿‡ä¸²è¡Œæ¥å£<strong>UARTï¼ŒCANï¼ŒSPIï¼ŒI2C</strong>è¿›è¡Œå¼•å¯¼åŠ è½½çš„ç¨‹åºã€‚ ä½†æ˜¯è®¡åˆ’åœ¨æ¿ä¸Šä½¿ç”¨æˆ‘ä»¬çš„å®‰å…¨å¼•å¯¼åŠ è½½ç¨‹åºï¼Œå› æ­¤å¸¸è§„å¼•å¯¼åŠ è½½ç¨‹åºçš„å·¥ä½œæ˜¯ä¸å¯å–çš„ã€‚ <br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <strong>Kinetis</strong>èŠ¯ç‰‡<strong>éœ€è¦</strong>æ³¨æ„<strong>0x040D</strong>å¤„çš„<strong>Program FlashåŒºåŸŸ</strong>çš„<strong>å†…å®¹</strong> ã€‚ å­˜å‚¨ä¸€ä¸ªç¡®å®šå¯åŠ¨é¡ºåºçš„å¸¸æ•°ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¸¸æ•°<strong>0x7B</strong>åº”è¯¥å†™å…¥<strong>é‚£é‡Œ</strong> ï¼ŒæŒ‡ç¤ºä»<strong>é—ªå­˜</strong>è€Œä¸æ˜¯ä»<strong>ROM</strong>å¼€å§‹ï¼Œå¹¶åœ¨å¤–éƒ¨è¾“å‡ºä¸Šç¦ç”¨<strong>NMI</strong>åŠŸèƒ½ã€‚ ä½¿ç”¨æ­¤å¸¸æ•°çš„ä¸åŒå€¼ï¼Œç¨‹åºå¯èƒ½ä¼šå†»ç»“åœ¨æ„å¤–ä»ROMè°ƒç”¨çš„å†…ç½®å¼•å¯¼ç¨‹åºä¸­ã€‚ </p><br><p> åŒæ ·é‡è¦çš„æ˜¯è¦è®°ä½ï¼Œåªæœ‰åœ¨æ ¸å¿ƒé¢‘ç‡ä¸º<strong>120 MHz</strong>è€Œä¸æ˜¯æ›´é«˜æ—¶ï¼ˆå³æœ€é«˜é¢‘ç‡ï¼‰ï¼Œæ‰å¯ä»¥å†™å…¥æ§åˆ¶å™¨çš„é—ªå­˜ã€‚ åœ¨<strong>HRUN</strong>æ¨¡å¼ä¸‹ï¼Œæ— æ³•è¿›è¡Œ<strong>Flash</strong>å½•åˆ¶ã€‚ </p><br><h2 id="aktiviziruem-watchdog"> æ¿€æ´»çœ‹é—¨ç‹— </h2><br><p> æˆ‘ä»¬æ§åˆ¶å™¨çš„ç”µè·¯æ¿ä¸“ç”¨äºå·¥ä¸šç”¨é€”ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰<strong>Watchdog</strong>ä¸èƒ½åšçš„äº‹æƒ…ã€‚ </p><br><p> æœ€åˆï¼Œå°†<strong>system_MKE18F16.h</strong>æ–‡ä»¶ä¸­çš„<strong>DISABLE_WDOG</strong>å®è®¾ç½®ä¸ºç¦ç”¨<strong>çœ‹é—¨ç‹—</strong> ã€‚ ä¸ºäº†çº æ­£è¿™ç§æƒ…å†µï¼Œè¯¥å®è¢«æ“¦é™¤ï¼Œå¹¶å®ç°äº†å…¶è‡ªå·±çš„<strong>WDOG</strong>åˆå§‹åŒ–ã€‚ </p><br><p>  <strong>çœ‹é—¨ç‹—</strong>çš„åˆå§‹åŒ–<strong>æ˜¯</strong>åœ¨<strong>SystemInit</strong>å‡½æ•°ä¸­å®Œæˆçš„ã€‚  <strong>çœ‹é—¨ç‹—</strong>è®¡æ•°å™¨åœ¨<strong>IDLE</strong>ä»»åŠ¡ä¸­æ›´æ–°ã€‚ </p><br><p> è¿™ç§æ–¹æ³•è¦æ±‚ä¼˜å…ˆçº§è¾ƒé«˜çš„ä»»åŠ¡ä¸èƒ½ç‹¬å å¤„ç†å™¨è¶…è¿‡<strong>100æ¯«ç§’</strong> ã€‚ ä½†è¿™å¾ˆå®¹æ˜“å‘ç”Ÿï¼Œä¾‹å¦‚åœ¨å‘ç»ˆç«¯è¾“å‡ºå¤§å‹æ•°æ®è½¬å‚¨æ—¶ã€‚ å› æ­¤ï¼Œåœ¨ä»»ä½•åœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨<strong>ç­‰å¾…</strong>åŠŸèƒ½å°†ä¼˜å…ˆçº§å¤§äº<strong>IDLEçš„</strong>ä»»åŠ¡ä¸­çš„å†—é•¿è¿‡ç¨‹åˆ†è§£ä¸ºä¸€äº›å°ç‰‡æ®µï¼Œå¹¶æ•£å¸ƒç€æš‚åœã€‚ </p><br><h2 id="vopros-drayverov-iz-postavki-sdk">  SDKäº¤ä»˜ä¸­çš„é©±åŠ¨ç¨‹åºé—®é¢˜ </h2><br><p>  <strong>SDK</strong>é©±åŠ¨ç¨‹åºçš„å‰ç¼€ä¸º<strong>NXP_MKE18F_drivers</strong>ç›®å½•ä¸­çš„<strong>fsl</strong> ï¼Œæ˜¯ä¸€ç§å¤–å›´æŠ½è±¡å±‚ã€‚ å®ƒä»¬è¢«è®¤ä¸ºå¯ä»¥ä¿ƒè¿›éš¾ä»¥å­¦ä¹ çš„å¤–å›´è®¾å¤‡çš„ç¼–ç¨‹ï¼Œä½†æ˜¯ä¸å¹¸çš„æ˜¯æ–‡æ¡£å¾ˆå°‘ã€‚ ç›¸åï¼Œå®ƒä»¬çš„æ–‡æ¡£ä»…é™äºå‡½æ•°å¤´ä¸­çš„æ³¨é‡Šã€‚ ç„¶åä¸ºä»–ä»¬å†™çš„ä¸œè¥¿å¾ˆå›°æƒ‘ï¼Œåˆä½¿ä»–ä»¬ä»ç ”ç©¶å¾®æ§åˆ¶å™¨å¤–å›´çš„æ‰‹å†Œä¸­è§£è„±å‡ºæ¥ã€‚ æˆ‘çš„ç­”æ¡ˆæ˜¯æ²¡æœ‰åŠæ³•ã€‚ é€šè¿‡é©±åŠ¨ç¨‹åºï¼Œå¯ä»¥æ›´è½»æ¾åœ°å°†ç¨‹åºä¼ è¾“åˆ°åŒä¸€ç³»åˆ—ä¸­çš„ä¸åŒå¾®æ§åˆ¶å™¨ã€‚ ä½†æ˜¯ä¸ºäº†æœ‰æ•ˆåœ°åº”ç”¨å®ƒä»¬ï¼Œæ‚¨éœ€è¦å¾ˆå¥½åœ°å¤„ç†å¤–å›´æ–‡æ¡£ã€‚ å› æ­¤ï¼Œ <strong>SDK</strong>é©±åŠ¨ç¨‹åºè§£å†³äº†é©±åŠ¨ç¨‹åºå¼€å‘äººå‘˜è‡ªå·±çš„ä¸€ä¸ªç›¸å½“ç§äººçš„é—®é¢˜ï¼Œè€Œä¸æ˜¯å¼€å§‹å­¦ä¹ <strong>Kinetis</strong>çš„ç”¨æˆ·çš„éœ€æ±‚ã€‚ </p><br><p> é©±åŠ¨ç¨‹åºè¿˜å¯ä»¥åœ¨è¯¥ç³»åˆ—çš„æ‰€æœ‰èŠ¯ç‰‡ä¸Šå·¥ä½œï¼Œä¾‹å¦‚ æ˜¯é€šç”¨çš„ï¼Œå› æ­¤å……æ»¡äº†æ¡ä»¶å®ï¼Œå¹¶æ£€æŸ¥æ¯ä¸ªç‰¹å®šèŠ¯ç‰‡æ˜¯å¦æ²¡æœ‰ä»»ä½•æœ‰ç”¨çš„åŠŸèƒ½ã€‚ </p><br><p> é©±åŠ¨ç¨‹åºä»ç„¶å¯ä»¥é€šè¿‡æŸç§æ–¹å¼å¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£å¦‚ä½•å¤„ç†å¤–å›´è®¾å¤‡ï¼Œä½†æ˜¯åœ¨äº†è§£äº†é©±åŠ¨ç¨‹åºä¹‹åï¼Œæ‚¨å¯ä»¥æ”¾å¿ƒåœ°å¿½ç•¥å®ƒã€‚ <br> å°±è¿™ä¸€ç‚¹è€Œè¨€ï¼Œåœ¨æ­¤é¡¹ç›®ä¸­ï¼Œä¸å—Mbedç«¯å£å½±å“çš„å¤–å›´è®¾å¤‡çš„è®¿é—®ç›´æ¥ç»•è¿‡é©±åŠ¨ç¨‹åºä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚ </p><br><p> ä½†æ˜¯ï¼Œå¯èƒ½ä¼šæ‹…å¿ƒç‰¹å®šå¤–å›´è®¾å¤‡å¯¹SDKé©±åŠ¨ç¨‹åºå¯ç”¨æ€§çš„ä¾èµ–æ€§ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¿…é¡»æ£€æŸ¥é©±åŠ¨ç¨‹åºçš„æºä»£ç ã€‚ ä¾èµ–å…³ç³»çš„ä¸»è¦å±é™©æ¥è‡ª<strong>DMA</strong>é©±åŠ¨ç¨‹åºåŠŸèƒ½çš„åˆ†ç¦»ã€‚ ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œåœ¨ä½¿ç”¨å¤–è®¾æ—¶ï¼Œæ‚¨éœ€è¦è·Ÿè¸ªå¹¶ç¦æ­¢å¸¸è§„çš„MbedæœåŠ¡ä½¿ç”¨<strong>DMA</strong> ã€‚ å¦‚æœ<strong>DMA</strong>ä»ç„¶ä¸å—<strong>SDK</strong>é©±åŠ¨ç¨‹åºçš„å½±å“ï¼Œé‚£ä¹ˆä»<strong>NXP_MKE18F_drivers</strong>ç›®å½•ä¸­å¯ä»¥ä¸¢å¼ƒæˆ–å¿½ç•¥å‡ ä¹æ‰€æœ‰ä¸é€‚ç”¨äºä¸Šè¿°2ä¸ªè®¡æ—¶å™¨æ¨¡å—ï¼ˆ <strong>PIT</strong>å’Œ<strong>LPTMR</strong> ï¼‰å’Œè°ƒè¯•UARTçš„<strong>å†…å®¹</strong> ã€‚ </p><br><p> ä¼˜å…ˆè€ƒè™‘é€šè¿‡SDKé©±åŠ¨ç¨‹åºæ¶‰åŠçš„å¤–å›´è®¾å¤‡çš„å±é™©è¾ƒå°ï¼Œä½†ä¹Ÿå¾ˆé‡è¦ã€‚ ä¾‹å¦‚ï¼Œæ‚¨éœ€è¦çŸ¥é“ä¸ºSysTickä¸­æ–­ï¼Œè°ƒè¯•UARTå’Œè®¡æ—¶å™¨åˆ†é…äº†ä»€ä¹ˆä¼˜å…ˆçº§ã€‚ åœ¨å…¶ä¼˜å…ˆçº§ç­‰äºæˆ–å¤§äºå®æ—¶ç®¡ç†ä¸­ä½¿ç”¨çš„å¤–å›´è®¾å¤‡çš„ä¼˜å…ˆçº§çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½å¯¼è‡´ç®¡ç†è´¨é‡ä¸‹é™ã€‚ </p><br><p> è¯·è®°ä½ï¼Œ <strong>MKE18Fçš„Mbed</strong>ç«¯å£åœ¨æ²¡æœ‰ä¼˜å…ˆçº§çš„æƒ…å†µä¸‹å¯åŠ¨UARTå’Œå®šæ—¶å™¨ä¸­æ–­ï¼Œå³ ä»–ä»¬é»˜è®¤æƒ…å†µä¸‹ä¼šè·å¾—æœ€é«˜çº§åˆ«ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN422413/">https://habr.com/ru/post/zh-CN422413/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN422401/index.html">å¦ä¸€ä¸ªC ++æ’ä»¶æ¡†æ¶</a></li>
<li><a href="../zh-CN422403/index.html">9æœˆ20æ—¥ï¼Œè«æ–¯ç§‘-åˆ†æå¸ˆä¼šè®®</a></li>
<li><a href="../zh-CN422407/index.html">æŸ¥æ‰¾å’Œæ’åºç›¸å…³æ–‡æœ¬</a></li>
<li><a href="../zh-CN422409/index.html">Pythonï¼šç”Ÿäº§ä¸­çš„å…ƒç¼–ç¨‹ã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN422411/index.html">æœåŠ¡åŒ–æ—¶ä»£å…¬å¸ä¸­çš„æ–°è§’è‰²</a></li>
<li><a href="../zh-CN422415/index.html">Pythonï¼šç”Ÿäº§ä¸­çš„å…ƒç¼–ç¨‹ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN422417/index.html">Slavikå’ŒGMT + 3æˆ–ä¸ºäººä»¬å¸¦æ¥å¥½å¤„</a></li>
<li><a href="../zh-CN422419/index.html">åœ¨Goä¸­å¹¶éæ²¡æœ‰ææ…Œ</a></li>
<li><a href="../zh-CN422421/index.html">å¾®è½¯å°†ä»æ ¹æœ¬ä¸Šæ”¹å–„Skype</a></li>
<li><a href="../zh-CN422423/index.html">Pythonå’ŒDataScienceï¼šæ¢ç´¢Numpyé€šç”¨åº“çš„åŠŸèƒ½</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>