<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš… ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¼ ğŸŒ» Ilusi ruang: bagaimana Spiderman baru membuat kamar tanpa geometri ğŸ• ğŸ˜ ğŸ›ŒğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam permainan Marvel Spider-Man yang baru-baru ini dirilis, banyak bangunan memiliki interior di luar jendela. Mereka tampak hebat, tetapi tampaknya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ilusi ruang: bagaimana Spiderman baru membuat kamar tanpa geometri</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424827/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ss/pw/49/sspw499wnlg2zjfkih9ofjhk8ge.png"></div><br>  Dalam permainan Marvel Spider-Man yang baru-baru ini dirilis, banyak bangunan memiliki interior di luar jendela.  Mereka tampak hebat, tetapi tampaknya mereka diimplementasikan menggunakan rendering licik - geometri interior tidak benar-benar ada dan dihasilkan oleh shader.  Saya tidak melihat pernyataan resmi Insomnia tentang bagaimana mereka melakukannya, tetapi berdasarkan pada bagaimana efeknya terlihat, sangat mungkin bahwa teknik <em>pemetaan interior</em> yang saya buat pada tahun 2007 saat mengerjakan disertasi dilaksanakan.  Saya tidak menulis tentang itu di blog sebelumnya, jadi sekarang adalah saat yang tepat untuk menjelaskan shader kecil yang penasaran yang saya buat. <br><br>  Mari kita mulai dengan menonton gameplay Marvel's Spider-Man.  Game ini terlihat sangat mengagumkan.  Situs web Kotaku merekam video terpisah di windows: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YQVHtlVEirs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Seperti yang dapat Anda lihat pada sekitar 40 detik video, pada kenyataannya, kamar-kamar itu bukan bagian dari geometri: di mana jendelanya seharusnya berada, pintunya berada.  Selain itu, melihat dalam satu ruangan dari berbagai sudut bangunan, kita melihat interior yang berbeda.  Dalam beberapa kasus, bahkan ada tembok di sekitar sudut bangunan.  Semua ini membuat kita mengerti bahwa kamarnya ditiru.  Namun, dari sudut pandang perspektif, mereka ditampilkan dengan benar dan memiliki kedalaman nyata. <a name="habracut"></a>  Saya pikir kelemahan kamar seperti itu tidak terlalu penting selama pertandingan, karena pemain biasanya tidak mempelajari kamar begitu dekat: interior hanya latar belakang, dan bukan subjek studi yang cermat.  Saya percaya bahwa cara menciptakan kamar ini menambah kedalaman dan kehidupan kota tanpa menghabiskan terlalu banyak sumber daya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b77/b8d/bc9/b77b8dbc9c2a8f05cb6e547c626ffd0b.jpg"></div><br>  <i>Untuk menghemat sumber daya, bangunan dalam game sering tidak memiliki interior, seperti yang dapat dilihat pada tangkapan layar dari GTA V</i> <br><br>  Pertama-tama, saya ingin menjelaskan bahwa posting saya bukan keluhan: Saya senang bahwa peralatan saya digunakan dalam permainan skala besar dan sama sekali tidak menuduh Insomniac mencuri.  Seperti yang saya katakan di publikasi pertama tentang pemetaan interior, akan menjadi suatu kehormatan bagi saya jika seseorang menggunakan teknik ini.  Jika Insomniac benar-benar memanfaatkan ide saya dalam tekniknya, maka saya pikir itu hebat.  Jika dia tidak menggunakannya, maka sepertinya dia datang dengan sesuatu yang anehnya mirip.  Maka saya akan tertarik pada bagaimana ini dilakukan. <br><br>  Jadi bagaimana cara kerja pemetaan interior?  Idenya adalah bahwa bangunan itu sendiri tidak mengandung geometri tambahan.  Interior hanya ada di shader.  Shader ini melakukan raycasting dengan dinding, langit-langit dan lantai untuk menghitung apa yang harus dilihat pemain di interior. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af4/7e7/b8f/af47e7b8ff8b0237682a9e6573b42183.jpg"></div><br>  <i>Dari kiri ke kanan: hanya jendela dengan pantulan, jendela dengan Pemetaan Interior, model rangka gambar - Pemetaan Interior tidak menambahkan poligon apa pun.</i> <br><br>  Sinar yang digunakan untuk raycast hanyalah sinar dari kamera ke piksel.  Pixel yang kami render terletak di bagian luar gedung, jadi kami hanya menggunakan bagian balok setelah piksel, karena ini adalah bagian yang sebenarnya berada di dalam bangunan. <br><br>  Raycasting mungkin tampak seperti operasi yang rumit dan mahal, tetapi dalam kasus khusus ini sebenarnya sangat sederhana dan cepat.  Caranya adalah Anda dapat menambahkan batasan sederhana: dengan pemetaan interior, langit-langit dan lantai berada pada jarak yang konstan.  Mengetahui hal ini, kita dapat dengan mudah menghitung ruangan tempat kita berada dan di mana lantai dan langit-langit berada di ruangan ini.  Langit-langit dan lantai itu sendiri adalah bidang geometris yang tak berujung.  Menghitung persimpangan antara bidang yang tak terbatas dan sinar hanya membutuhkan beberapa langkah dan menghabiskan sedikit sumber daya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/99a/36a/cc3/99a36acc3fb2962935e9d0b76c4512d0.gif"></div><br>  Kamar ini memiliki 6 pesawat: langit-langit, lantai, dan 4 dinding.  Namun, kita hanya perlu mempertimbangkan mereka bertiga, karena kita tahu ke arah mana kita mencari.  Misalnya, jika kita melihat ke atas, maka kita tidak perlu memeriksa lantai di bawah, karena kita akan melihat langit-langit di atas.  Demikian pula, alih-alih 4 dinding, kita hanya perlu mempertimbangkan dua ke arah yang kita cari. <br><br>  Untuk menentukan apa yang kita lihat, kita perlu menghitung persimpangan sinar dengan masing-masing dari tiga bidang ini.  Persimpangan dengan sinar yang paling dekat dengan kamera memberi tahu kita pesawat mana yang kita lihat dalam piksel ini.  Kemudian kita menggunakan titik persimpangan sebagai koordinat tekstur untuk menemukan warna piksel.  Misalnya, jika balok memotong pada posisi (x, y, z) dengan langit-langit, maka kita menggunakan (x, y) sebagai tekstur yang terkoordinasi dan diabaikan z. <br><br>  Di sini saya menambahkan optimisasi yang baik: bagian dari perhitungan persimpangan untuk masing-masing dari tiga pesawat dapat dilakukan secara bersamaan.  Shader yang digunakan bekerja dengan float4 pada kecepatan yang sama dengan float, jadi berkat pengemasan variabel yang cerdas, dimungkinkan untuk memotong ketiga sinar dengan pesawat pada saat yang bersamaan.  Ini menyelamatkan saya beberapa sumber daya dan membantu mencapai frame rate tinggi dengan pemetaan interior bahkan pada tahun 2007.  Saya diberi tahu bahwa kartu video modern dengan float bekerja lebih cepat daripada dengan float4;  itu berarti bahwa pada perangkat keras saat ini optimasi ini tidak lagi berfungsi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5d/1f5/751/d5d1f57518f274783ab5b797d861a4d0.jpg"></div><br>  <i>Pemetaan Interior tanpa tekstur jendela menunjukkan bahwa kamar ditampilkan dengan perspektif dan tekstur yang benar, meskipun geometri tambahan tidak diperlukan.</i> <br><br>  Anda dapat mempelajari lebih lanjut tentang pemetaan interior di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel saya</a> .  Artikel ini diterbitkan di Computer Graphics International Conference pada 2008. Memiliki publikasi yang ditinjau sejawat ini adalah aplikasi pertama saya (dan satu-satunya) untuk gelar ilmuwan yang bangga.  Artikel ini juga menjelaskan eksperimen tambahan untuk menambahkan detail, misalnya, mengubah jarak antara dinding untuk kamar dengan ukuran yang tidak sama dan secara acak memilih tekstur dari atlas tekstur untuk variabilitas ruangan yang lebih besar.  Ini juga menjelaskan secara rinci dua variasi yang ditunjukkan pada gambar di bawah ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed8/17a/28a/ed817a28adbc6f0dd9ea44ce6f61294b.jpg"></div><br>  <i>Pencahayaan di kamar dapat dinyalakan dan dimatikan secara dinamis untuk mensimulasikan perubahan siang dan malam.</i>  <i>Ini dilakukan dengan menggunakan tekstur suara dari mana kita membaca, menggunakan indeks ruang sebagai koordinat tekstur.</i> <br><br>  Karena kami hanya memancarkan sinar di pesawat, semua kamar adalah kotak sederhana dengan tekstur.  Semua furnitur di ruangan akan berada di tekstur, yang berarti tetap rata.  Di Spiderman, ini terlihat ketika Anda mendekati kamera: meja di kamar sebenarnya tekstur datar di dinding.  Seperti yang Anda lihat pada gambar di bawah, kami dapat melengkapi teknik kami dengan satu atau lebih lapisan tekstur tambahan per kamar, tetapi ini terkait dengan biaya kinerja tambahan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea2/e0d/2dc/ea2e0d2dc5b8b6783928931e15e612a5.jpg"></div><br>  <i>Dengan melakukan raytracing pada bidang lain yang sejajar dengan permukaan luar bangunan, Anda dapat menambahkan furnitur dan orang ke ruangan.</i>  <i>Namun, mereka akan tetap datar.</i> <br><br>  Setelah publikasi posting ini, salah satu programmer Simcity (2013) mengatakan kepada saya bahwa teknik pemetaan interior juga digunakan dalam game ini.  Di dalamnya, dia terlihat sangat keren, dan para pengembang merekam video yang bagus tentang itu.  Mereka menyempurnakan ide asli saya dengan menyimpan semua tekstur dalam satu tekstur dan menambahkan ruang dengan kedalaman berbeda.  Bagian pemetaan interior dimulai pukul 01:00 .: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_x88tvkAGuo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Jika Anda ingin menjelajahi teknik ini lebih dalam, Anda dapat mengunduh <a href="">demo pemetaan interior saya</a> dengan kode sumber.  Jika Anda bekerja di Unreal Engine 4, Anda dapat menemukan pemetaan interior sebagai fungsi engine standar dalam bentuk fungsi InteriorCubeMap. <br><br>  Setelah bertahun-tahun, senang akhirnya melihat bahwa teknik pemetaan interior saya digunakan dalam produksi video game skala besar!  Jika Anda terbiasa dengan game yang menggunakan sesuatu yang serupa, tuliskan tentang hal itu kepada saya. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id424827/">https://habr.com/ru/post/id424827/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id424817/index.html">Desain produk digital. Tujuan, Peran, Metode</a></li>
<li><a href="../id424819/index.html">Validasi Data - Validasi Java & Spring</a></li>
<li><a href="../id424821/index.html">Tentang setan dan teleportasi: dua teknologi yang membawa masa depan kuantum lebih dekat</a></li>
<li><a href="../id424823/index.html">Bagaimana Nutrisi Rendah Kalori Mempengaruhi Penuaan</a></li>
<li><a href="../id424825/index.html">Robot dan Komunisme</a></li>
<li><a href="../id424831/index.html">Apa yang diinvestasikan dalam ekonomi digital</a></li>
<li><a href="../id424835/index.html">Cara mengurangi risiko investasi di bursa: 3 faktor diversifikasi</a></li>
<li><a href="../id424841/index.html">Menyimpan arsip gambar untuk situs di penyimpanan Azure BLOB</a></li>
<li><a href="../id424843/index.html">Apakah IBOutlet pribadi di aplikasi iOS Anda?</a></li>
<li><a href="../id424845/index.html">Menghitung Kotak Ajaib Menggunakan GPU</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>