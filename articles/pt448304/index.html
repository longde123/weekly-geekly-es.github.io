<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí™üèª ‚ùì üßù O livro "Vue.js em a√ß√£o" üà∫ üåñ üîí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi, habrozhiteli! O objetivo deste livro √© fornecer o conhecimento com o qual voc√™ n√£o hesitar√° em ingressar em qualquer projeto usando esta bibliotec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O livro "Vue.js em a√ß√£o"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/448304/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/7u/pn/a0/7upna0knmll01vosthivrjtjhpi.jpeg" align="left" alt="imagem"></a>  Oi, habrozhiteli!  O objetivo deste livro √© fornecer o conhecimento com o qual voc√™ n√£o hesitar√° em ingressar em qualquer projeto usando esta biblioteca.  O livro √© destinado a todos os interessados ‚Äã‚Äãem aprender o Vue.js e possui experi√™ncia com JavaScript, HTML e CSS.  Voc√™ n√£o precisa ter um conhecimento profundo dessa √°rea, mas entender o b√°sico, como matrizes, vari√°veis, loops e elementos HTML, n√£o prejudicar√°. <br><br>  Sob o corte, h√° uma passagem na forma do cap√≠tulo Vuex, descrevendo: qual √© a condi√ß√£o;  o uso de getters;  implementa√ß√£o de muta√ß√µes;  adicionando a√ß√µes;  trabalhar com m√©todos auxiliares do Vuex;  m√≥dulos e configura√ß√£o do projeto. <br><a name="habracut"></a><br><h3>  10.1  Por que precisamos do Vuex </h3><br>  A biblioteca Vuex gerencia o estado.  Ele √© armazenado centralmente, o que facilita o acesso a qualquer componente.  Status s√£o informa√ß√µes ou dados que d√£o suporte ao aplicativo.  Isso √© importante porque precisamos de um mecanismo confi√°vel e compreens√≠vel para trabalhar com essas informa√ß√µes. <br><br>  Se voc√™ j√° possui experi√™ncia em trabalhar com outras estruturas para criar aplicativos de p√°gina √∫nica, alguns desses conceitos podem parecer familiares.  Por exemplo, o React usa um sistema de gerenciamento de estado semelhante chamado Redux.  Vuex e Redux s√£o influenciados pelo projeto Flux.  Essa √© a arquitetura proposta pelo Facebook, projetada para simplificar a constru√ß√£o de aplicativos Web clientes.  Contribui para a movimenta√ß√£o de dados em uma dire√ß√£o: das a√ß√µes para o expedidor, depois para o armazenamento e, no final, para a visualiza√ß√£o.  Essa abordagem permite separar o estado do restante do aplicativo e incentiva as atualiza√ß√µes s√≠ncronas.  Voc√™ pode aprender mais sobre o Flux na documenta√ß√£o oficial em facebook.github.io/flux/docs/overview.html. <br><br>  O Vuex trabalha com o mesmo princ√≠pio, ajudando a mudar de estado de forma previs√≠vel e s√≠ncrona.  Os desenvolvedores n√£o precisam se preocupar com as conseq√º√™ncias da atualiza√ß√£o do estado com fun√ß√µes s√≠ncronas e ass√≠ncronas.  Imagine que estamos interagindo com uma API do servidor que retorna dados no formato JSON.  O que acontece se, ao mesmo tempo, esses dados forem modificados por uma biblioteca de terceiros?  N√£o queremos um resultado imprevis√≠vel.  O Vuex ajuda a evitar tais situa√ß√µes, eliminando quaisquer altera√ß√µes ass√≠ncronas. <br>  Voc√™ provavelmente est√° se perguntando por que precisamos da biblioteca Vuex.  No final, o Vue.js permite passar informa√ß√µes aos componentes.  Como voc√™ sabe nos cap√≠tulos anteriores, os par√¢metros de entrada e os eventos do usu√°rio s√£o destinados a isso.  Poder√≠amos at√© criar nosso pr√≥prio barramento de eventos para transfer√™ncia de dados e comunica√ß√£o entre componentes.  Um exemplo de tal mecanismo √© apresentado na Fig.  10.1 <br><br>  Isso seria apropriado para pequenas aplica√ß√µes com um punhado de componentes.  Nesse caso, voc√™ precisa transferir informa√ß√µes para apenas alguns destinat√°rios.  Mas e se o aplicativo for maior, mais complexo e em camadas?  √â claro que em um projeto grande n√£o √© t√£o f√°cil acompanhar todas as fun√ß√µes de retorno de chamada, par√¢metros de entrada e eventos. <br><br>  Apenas para essas situa√ß√µes, a biblioteca Vuex foi criada.  Ele permite que voc√™ organize o trabalho com o estado na forma de um reposit√≥rio centralizado.  Imagine um cen√°rio que vale a pena pensar em usar o Vuex.  Por exemplo, estamos trabalhando em um blog com artigos e coment√°rios que voc√™ pode criar, editar e excluir.  Ao mesmo tempo, temos um painel de administra√ß√£o que permite bloquear e adicionar usu√°rios. <br><br>  Vamos ver como isso √© implementado usando o Vuex.  Na fig.  A Figura 10.2 mostra que o componente EditBio √© filho do painel de administra√ß√£o.  Ele precisa acessar as informa√ß√µes do usu√°rio para poder atualiz√°-las.  Trabalhando com o Vuex, podemos acessar o reposit√≥rio central, modificar os dados e salvar as altera√ß√µes diretamente do componente EditBio.  Isso √© muito melhor do que passar informa√ß√µes da inst√¢ncia raiz do Vue.js para o componente Admin e depois para o EditBio usando os par√¢metros de entrada.  Seria dif√≠cil para n√≥s acompanhar dados localizados em lugares diferentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xr/0b/03/xr0b03q-1ielejscatrwuawsmfw.png" alt="imagem"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/az/hj/6x/azhj6xybhs1mchcgfshl3ardskq.png" alt="imagem"></div><br>  No entanto, o uso do Vuex tem um pre√ßo na forma de c√≥digo adicional padr√£o e complexidade da estrutura do aplicativo.  Como j√° mencionado, √© melhor n√£o usar essa biblioteca em projetos simples que consistem em v√°rios componentes.  Seu potencial real se manifesta em grandes aplica√ß√µes com um estado mais complexo. <br><br><h3>  10.2  Estado e muta√ß√£o em Vuex </h3><br>  O Vuex armazena o estado de todo o aplicativo em um √∫nico objeto, tamb√©m chamado de fonte √∫nica de verdade.  Como o nome sugere, todos os dados s√£o coletados em um √∫nico local e n√£o s√£o duplicados em outras partes do c√≥digo. <br><blockquote>  DICA <br><br>  Vale ressaltar que n√£o somos obrigados a armazenar todos os nossos dados no Vuex.  Componentes individuais podem ter seu pr√≥prio estado local.  Em certas situa√ß√µes, isso √© prefer√≠vel.  Por exemplo, seu componente tem uma vari√°vel que √© usada apenas dentro dele.  Ela deve permanecer local. </blockquote>  Considere um exemplo simples de como trabalhar com o estado no Vuex.  Todo o nosso c√≥digo ser√° colocado em um arquivo.  Mais tarde, voc√™ aprender√° como adicionar o Vuex a um projeto usando o Vue-CLI.  Abra um editor de texto e crie o arquivo vuex-state.html.  Iremos exibir uma mensagem localizada no reposit√≥rio central e um contador.  O resultado √© mostrado na fig.  10.3 <br><br><img src="https://habrastorage.org/webt/iv/4v/tn/iv4vtnbwgbqcbfgp-gmmh1ujhsg.png" align="left" alt="imagem">  Primeiro, adicione tags de script com links para o Vue e o Vuex.  Em seguida, crie a marca√ß√£o HTML.  Usaremos as tags H1, H2, H3 e o bot√£o.  A tag h1 exibe o cabe√ßalho com uma vari√°vel local declarada na inst√¢ncia Vue.js.  As mensagens de boas-vindas e de contador s√£o executadas como propriedades calculadas com base no reposit√≥rio Vuex. <br><br>  O elemento button aciona uma a√ß√£o de incremento.  Copie o c√≥digo da Listagem 10.1 no arquivo vuex-state.html. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i8/0x/34/i80x34aujec0yim7ew-xuroqslu.png" alt="imagem"></div><br>  Quando voc√™ terminar a marca√ß√£o HTML, vamos come√ßar a criar o reposit√≥rio Vuex.  Ele conter√° todos os dados do aplicativo, incluindo as propriedades msg e count. <br><br>  Para atualizar o estado, usamos muta√ß√µes.  Isso √© algo como setters de outras linguagens de programa√ß√£o.  O setter define o valor, a muta√ß√£o atualiza o estado do programa.  No Vuex, as muta√ß√µes devem ser s√≠ncronas.  Em nosso exemplo, o contador √© incrementado apenas com o clique de um bot√£o, portanto, n√£o h√° necessidade de se preocupar com c√≥digo ass√≠ncrono (mais tarde, consideraremos a√ß√µes que ajudam a resolver problemas com assincronia). <br><br>  Crie uma fun√ß√£o de incremento dentro do objeto de muta√ß√µes que incrementa o estado.  Pegue o c√≥digo na Listagem 10.2 e cole-o na parte inferior do arquivo vuex-state.html. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ev/35/cc/ev35cct8d2bymgoqwg47n6loghi.png" alt="imagem"></div><br>  Ent√£o, preparamos a marca√ß√£o HTML e o reposit√≥rio Vuex.  Agora voc√™ pode adicionar uma l√≥gica que os conectar√°.  Queremos que o modelo exiba os valores de msg e contador, que fazem parte do estado Vuex.  Al√©m disso, o contador precisa ser atualizado. <br><br>  Crie uma inst√¢ncia do Vue.js com uma nova fun√ß√£o de dados que retornar√° uma propriedade de cabe√ßalho local com o texto do aplicativo Vuex.  Na se√ß√£o computada, adicione as propriedades calculadas bem-vindo e contador.  O primeiro retornar√° store.state.msg e o segundo - store.state.count. <br><br>  Por fim, voc√™ precisa adicionar um m√©todo chamado incremento.  Uma muta√ß√£o foi declarada no reposit√≥rio Vuex, mas n√£o podemos us√°-la diretamente para atualizar o estado.  Uma fun√ß√£o de confirma√ß√£o especial √© fornecida para isso.  Ele diz ao Vuex para atualizar o reposit√≥rio e, assim, salvar as altera√ß√µes.  A express√£o store.commit ('incremento') executa a muta√ß√£o.  Insira o seguinte snippet (Listagem 10.3) imediatamente ap√≥s o c√≥digo criado na Listagem 10.2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ou/fr/fx/oufrfxchrwxh0ilabltkow4vl6e.png" alt="imagem"></div><br>  Este √© um aplicativo de trabalho completo baseado no Vuex!  Tente pressionar o bot√£o - cada vez que voc√™ pressiona o contador deve aumentar em 1. <br><br>  Atualize o c√≥digo para que pressionar o bot√£o aumente o contador em 10. Se voc√™ observar atentamente a muta√ß√£o do incremento, perceber√° que s√£o necess√°rios apenas um argumento, estado.  Vamos passar outro - vamos cham√°-lo de carga √∫til.  Ser√° transmitido pelo m√©todo increment, criado na inst√¢ncia raiz do Vue.js. <br><br>  Copie o conte√∫do de vuex-state.html para o novo arquivo vuex-state-pass.html.  Usando este aplicativo como exemplo, mostramos como os argumentos s√£o passados. <br><br>  Como voc√™ pode ver na Listagem 10.4, apenas o objeto de muta√ß√µes e o m√©todo de incremento precisam ser atualizados.  Adicione ao incremento da muta√ß√£o outro argumento chamado carga √∫til.  Esse √© o valor pelo qual state.count aumentar√°.  Localize a chamada para store.commit dentro do m√©todo de incremento e especifique 10 como o segundo argumento.  Atualize o arquivo vuex-state.html como mostrado abaixo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lp/ar/lp/lparlpajbodkpiupswhu-5sj814.png" alt="imagem"></div><br>  Salve o arquivo vuex-state-pass.html e abra-o em um navegador.  Agora, quando o bot√£o √© pressionado, o contador deve aumentar em 10 e n√£o em 1. Se algo der errado, verifique o console do navegador e verifique se n√£o h√° erros de digita√ß√£o. <br><br><h3>  10.3  Getters e a√ß√µes </h3><br>  No exemplo anterior, acessamos a loja diretamente a partir das propriedades calculadas.  Mas e se tiv√©ssemos v√°rios componentes que precisassem do mesmo acesso?  Suponha que desejamos exibir uma mensagem de boas-vindas em letras mai√∫sculas.  Nesse caso, os getters nos ajudar√£o. <br><br>  Getters fazem parte da Vuex.  Eles permitem implementar o acesso unificado ao estado em todos os componentes.  Vamos dar um exemplo da se√ß√£o 10.2 e, em vez de acesso direto ao reposit√≥rio atrav√©s de propriedades calculadas, usamos getters.  Al√©m disso, fazemos com que o getter da propriedade msg traduza todas as suas letras para mai√∫sculas. <br><br>  Copie o conte√∫do do arquivo vuex-state-pass.html para vuex-state-getter-action.html.  Para simplificar a tarefa, deixe o c√≥digo HTML inalterado.  No final, voc√™ deve obter algo semelhante ao da fig.  10.4 <br><br><img src="https://habrastorage.org/webt/sw/po/np/swponphqaqcwiinwh-5b-gai7b0.png" align="left" alt="imagem">  Como voc√™ pode ver, a mensagem Hello World agora √© exibida em palavras.  Pressionar o bot√£o Press Me aumenta o contador da mesma maneira que no exemplo anterior. <br><br>  Localize a constru√ß√£o Vuex.Store dentro do novo arquivo vuex-state-getter-action.html imediatamente abaixo da tag <img src="https://habrastorage.org/webt/ux/wq/hg/uxwqhgjw_hle7zwwssn_a6kylcw.png" alt="imagem">  Adicione um novo objeto ap√≥s muta√ß√µes chamadas getters.  Crie os m√©todos msg e count dentro deste objeto, conforme mostrado na Listagem 10.5.  Ambos os m√©todos aceitam o mesmo argumento de estado. <br><br>  O msg getter retornar√° state.msg.toUppercase ().  Gra√ßas a isso, a mensagem √© sempre exibida em mai√∫sculas.  No get getter, retornaremos state.count.  Depois de adicionar getters abaixo das muta√ß√µes, o arquivo vuex-state-getter-action.html deve ficar assim. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/17/hg/lh17hghhfqmvinzfxxyvd6kfw10.png" alt="imagem"></div><br>  A√ß√µes s√£o outra parte integrante da Vuex.  Eu mencionei anteriormente que as muta√ß√µes devem ser s√≠ncronas.  Mas e se trabalharmos com c√≥digo ass√≠ncrono?  Como fazer chamadas ass√≠ncronas capazes de mudar de estado?  As a√ß√µes da Vuex nos ajudar√£o nisso. <br>  Imagine que o aplicativo esteja acessando o servidor e aguardando uma resposta.  Este √© um exemplo de uma a√ß√£o ass√≠ncrona.  Infelizmente, as muta√ß√µes s√£o ass√≠ncronas, portanto n√£o podemos us√°-las aqui.  Em vez disso, adicione uma opera√ß√£o ass√≠ncrona com base na a√ß√£o Vuex. <br><br>  Para criar um atraso, use a fun√ß√£o setTimeout.  Abra o arquivo vuex-state-getter-action.html e adicione o objeto de a√ß√µes imediatamente ap√≥s os getters.  Dentro deste objeto, coloque a a√ß√£o de incremento, que recebe os argumentos de contexto e carga √∫til.  Usando o contexto, salvaremos as altera√ß√µes.  Coloque a opera√ß√£o context.commit dentro de setTimeout.  Dessa forma, simulamos um atraso no servidor.  Tamb√©m podemos passar o argumento de carga √∫til para context.commit, que entra na muta√ß√£o.  Atualize o c√≥digo com base na Listagem 10.6. <br><br>  Ap√≥s atualizar o Vuex.Store, voc√™ pode prosseguir para a inst√¢ncia raiz do Vue.js.  A propriedade computada n√£o acessar√° a loja diretamente, como antes, mas usando getters.  Tamb√©m estamos modificando o m√©todo de incremento.  Para acessar a nova propriedade Vuex que criamos anteriormente, ela usar√° a chamada store.dispatch ('increment', 10). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ow/na/tk/ownatktwrqjz5jnedkigjoqbqdg.png" alt="imagem"></div><br>  O primeiro argumento para a chamada de despacho √© o nome da a√ß√£o e o segundo argumento sempre cont√©m dados adicionais que s√£o passados ‚Äã‚Äãpara essa a√ß√£o. <br><blockquote>  DICA <br><br>  Dados adicionais podem ser uma vari√°vel regular ou at√© um objeto. <br>  Atualize a inst√¢ncia Vue.js no arquivo vuex-state-getter-action.html, como mostra a Listagem 10.7. </blockquote><img src="https://habrastorage.org/webt/9r/m1/b1/9rm1b1-hossqa_axypdxhp47v7q.png" alt="imagem"><br><br>  Baixe o aplicativo e pressione o bot√£o v√°rias vezes.  Voc√™ deve notar um atraso, mas o contador aumentar√° em 10 ap√≥s cada pressionamento. <br><br><h3>  10.4  Usando o Vuex em um projeto de pet shop usando o Vue-CLI </h3><br>  Vamos voltar ao projeto da loja de animais em que est√°vamos trabalhando.  Se voc√™ n√£o esqueceu, decidimos adicionar anima√ß√µes e transi√ß√µes.  Agora integramos a biblioteca Vuex que conhecemos anteriormente. <br><br>  Transferimos os dados das mercadorias para o armaz√©m.  Como voc√™ se lembra dos cap√≠tulos anteriores, os dados foram inicializados no gancho criado dentro do componente Principal.  Agora esse gancho deve gerar um novo evento que inicializa o reposit√≥rio Vuex.  Tamb√©m adicionaremos os produtos calculados da propriedade, que recuperam produtos usando o getter (criaremos mais tarde).  O resultado final ser√° semelhante na Fig.  10.5 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-s/6q/nf/-s6qnfzox3qmsvozrfvla8liuqe.png" alt="imagem"></div><br><h3>  10.4.1  Instale o Vuex com o Vue-CLI </h3><br>  Primeiro, instale o Vuex!  Este √© um processo simples.  Prepare a vers√£o mais recente da pet shop em que trabalhamos no cap√≠tulo 8. Voc√™ tamb√©m pode baixar todo o c√≥digo deste cap√≠tulo no GitHub em github.com/ErikCH/VuejsInActionCode. <br><br>  Abra uma janela do terminal e v√° para o diret√≥rio raiz do projeto.  Para instalar a vers√£o mais recente do Vuex, execute o seguinte comando: <br><br><pre><code class="plaintext hljs">$ npm install vuex</code> </pre> <br>  e salve o registro no arquivo package.json da pet shop. <br><br>  Agora voc√™ precisa adicionar o armazenamento ao arquivo main.js, localizado na pasta src.  O reposit√≥rio em si ainda n√£o existe, mas n√≥s o importamos de qualquer maneira.  Geralmente, ele est√° no arquivo src / store / store.js, mas voc√™ pode escolher um caminho diferente - todos os desenvolvedores t√™m suas pr√≥prias prefer√™ncias.  Vamos nos debru√ßar sobre a op√ß√£o geralmente aceita.  Mais adiante neste cap√≠tulo, discutiremos uma estrutura de diret√≥rios alternativa usando m√≥dulos. <br><br>  Voc√™ precisa adicionar armazenamento √† inst√¢ncia raiz do Vue.js abaixo do roteador, conforme mostrado na Listagem 10.8.  A prop√≥sito, usamos o padr√£o ES6, portanto, store: store pode ser reduzido para armazenar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/gj/ns/dugjnsblenm_dydxirxudmpqbbk.png" alt="imagem"></div><br>  Ap√≥s conectar o armazenamento √† inst√¢ncia raiz, podemos acess√°-lo em qualquer parte do aplicativo.  Crie o arquivo src / store / store.js.  Nele, colocaremos o reposit√≥rio Vuex com informa√ß√µes sobre os produtos oferecidos pela pet shop.  Na parte superior, adicione duas instru√ß√µes de importa√ß√£o, uma para o Vue e o Vuex.  Em seguida, especifique Vue.use (Vuex) para juntar tudo. <br><br>  Importamos o reposit√≥rio no arquivo main.js. de ./store/store.  Agora voc√™ precisa exportar o objeto de loja dentro de store.js.  Como voc√™ pode ver na Listagem 10.9, exportamos um valor de armazenamento const igual a Vuex.Store. <br><br>  Primeiro, adicione objetos com estado e muta√ß√µes.  O estado conter√° um objeto vazio chamado produtos.  Em breve iremos preench√™-lo com o m√©todo initStore.  A muta√ß√£o √© chamada SET_STORE, atribuir√° os bens transferidos √† propriedade state.products.  Cole o c√≥digo da lista a seguir no arquivo src / store / store.js que acabamos de criar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rq/2a/hi/rq2ahigjzyp0u3khuvvkrerrqxk.png" alt="imagem"></div><br>  Precisamos criar uma a√ß√£o e getter no reposit√≥rio.  Um getter retornar√° um objeto de produtos.  A a√ß√£o √© um pouco mais complicada.  Voc√™ deve transferir o gancho criado, que l√™ o arquivo static / products.json usando o Axios, para o objeto de a√ß√µes no Vuex. <br><br>  Mencionei anteriormente que as muta√ß√µes devem ser s√≠ncronas e que somente as a√ß√µes dentro do Vuex podem aceitar c√≥digo ass√≠ncrono.  Para contornar essa limita√ß√£o, coloque o c√≥digo Axios na a√ß√£o Vuex. <br><br>  Crie um objeto de a√ß√µes no arquivo store.js e inclua o m√©todo initStore.  Copie o conte√∫do do gancho criado do arquivo components / Main.vue para este m√©todo.  Em vez de atribuir response.data.products ao objeto products, invocamos a muta√ß√£o usando a fun√ß√£o commit.  Passe response.data.products como argumento para SET_STORE.  O c√≥digo resultante deve se parecer com isso (Listagem 10.10). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nj/cp/od/njcpodi_wkiwlkhc5o_0du-1udu.png" alt="imagem"></div><br>  Estamos quase terminando, basta atualizar o arquivo Main.vue e transferir as mercadorias do objeto de produtos locais para o reposit√≥rio Vuex.  Abra o arquivo src / components / Main.vue e localize a fun√ß√£o de dados.  Remova os produtos de linha: {}.  Acessaremos as mercadorias a partir da propriedade computada que a loja retorna. <br><br>  Localize as propriedades calculadas cartItemCount e selectedProducts dentro de Main.vue, eles devem ir logo ap√≥s a se√ß√£o de m√©todos.  Inclua a propriedade products e fa√ßa com que ela retorne o getter com o mesmo nome. <br><br>  Conectamos o reposit√≥rio √† inst√¢ncia raiz do Vue.js no arquivo main.js. Portanto, n√£o precisamos mais import√°-lo.  Al√©m disso, ao usar o Vue-CLI, o armazenamento est√° sempre dispon√≠vel no formato. $ Store.  N√£o esque√ßa o sinal de $, caso contr√°rio, isso resultar√° em um erro.  Adicione a propriedade de produtos computados, conforme mostrado na Listagem 10.11. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1f/nj/ry/1fnjry2y8uanpzheonuljtcbzvi.png" alt="imagem"></div><br>  Encontre o gancho criado no qual o objeto de produtos √© inicializado e exclua seu conte√∫do.  Em vez disso, insira a chamada de a√ß√£o initStore que criamos anteriormente no reposit√≥rio Vuex.  Para chamar uma a√ß√£o, use a fun√ß√£o de despacho, como no exemplo anterior.  A Listagem 10.12 mostra a apar√™ncia do gancho criado ap√≥s a atualiza√ß√£o do arquivo Main.vue. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vn/1b/40/vn1b40pqnqauvsjz-jsh7amutty.png" alt="imagem"></div><br>  Isso deve ser o suficiente.  Execute o comando npm run dev no terminal e uma janela com o aplicativo pet store deve aparecer na tela.  Tente colocar as mercadorias na cesta e verifique se tudo funciona como deveria.  Se algo der errado, procure por erros no console.  No arquivo src / store / store.js, em vez de Vuex.store, voc√™ pode digitar acidentalmente Vuex.Store.  Lembre-se disso! <br><br><h3>  10.5  M√©todos auxiliares Vuex </h3><br>  O Vuex fornece m√©todos auxiliares convenientes que tornam o c√≥digo mais conciso e eliminam a adi√ß√£o dos mesmos getters, setters, muta√ß√µes e a√ß√µes.  Para obter uma lista completa dos m√©todos auxiliares do Vuex, consulte o guia oficial em vuex.vuejs.org/guide/core-concepts.html.  Vamos ver como eles funcionam. <br><br>  O principal m√©todo auxiliar que voc√™ deve conhecer √© chamado mapGetters.  √â usado para adicionar todos os getters dispon√≠veis √† se√ß√£o computada e n√£o requer a listagem de cada um deles.  Mas antes de us√°-lo, voc√™ precisa import√°-lo dentro do componente.  Mais uma vez, volte para a loja de animais e adicione o m√©todo mapGetters. <br><br>  Abra o arquivo src / components / Main.vue e localize a tag de script.  Em algum lugar dessa tag, o componente Cabe√ßalho deve ser importado.  Conecte mapGetters imediatamente ap√≥s essa importa√ß√£o, conforme mostrado na Listagem 10.13. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/df/1a/oy/df1aoyonrmhjh26zev5aehqhtec.png" alt="imagem"></div><br>  Agora voc√™ precisa atualizar a propriedade computada.  Encontre a fun√ß√£o de produtos na se√ß√£o computada e insira o objeto mapGetters em seu lugar. <br><br>  mapGetters √© um objeto exclusivo; para sua opera√ß√£o correta, √© necess√°rio usar o operador de spread do ES6 - ele expande a express√£o em uma situa√ß√£o em que qualquer argumento √© esperado (zero ou mais).  Voc√™ pode ler mais sobre essa sintaxe na documenta√ß√£o do MDN em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_syntax</a> . <br><br>  mapGetters garantir√° que todos os getters sejam adicionados como propriedades calculadas.  Essa √© uma maneira muito mais simples e elegante do que escrever uma propriedade computada separada para cada getter.  Todos os getters est√£o listados na matriz mapGetters.  Adicione este m√©todo auxiliar ao arquivo Main.vue (Listagem 10.14). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w8/uc/4r/w8uc4rzccr0ygnfvoooi_7j8mda.png" alt="imagem"></div><br>  Ap√≥s executar o comando npm run dev, a loja de animais deve funcionar como antes.  O m√©todo auxiliar mapGetters n√£o parece muito √∫til at√© agora, mas quanto mais getters adicionarmos, mais tempo ele economizar√°. <br><br>  Existem mais tr√™s m√©todos auxiliares que voc√™ deve conhecer: mapState, mapMutations e mapActions.  Todos eles funcionam de maneira semelhante, reduzindo a quantidade de c√≥digo padr√£o que voc√™ precisa escrever manualmente. <br><br>  Imagine que seu reposit√≥rio contenha v√°rias partes de dados e o acesso ao estado seja realizado diretamente a partir do componente, sem o uso de getters.  Nesse caso, voc√™ pode usar o m√©todo mapState dentro da se√ß√£o computada (Listagem 10.15). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/09/yf/2w/09yf2w3fnle9nujbxlsqsdku3g4.png" alt="imagem"></div><br>  Agora imagine que voc√™ precisa usar v√°rias muta√ß√µes em um componente.  Para simplificar esse processo, use o m√©todo auxiliar mapMutations (Listagem 10.16), como √© feito com mapState e mapGetters.  Em seguida, mut1 liga this.mut1 () a isso. $ Store.commit ('mut1'). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6h/7y/py/6h7ypy5x0dsc400qmndzolgzr-m.png" alt="imagem"></div><br>  Por fim, considere o m√©todo auxiliar mapActions.  Permite adicionar a√ß√µes Vuex ao aplicativo, eliminando a necessidade de criar m√©todos com chamadas de despacho em cada caso.  Voltando ao exemplo anterior, imagine que o aplicativo contenha algumas opera√ß√µes ass√≠ncronas.  Como o uso de muta√ß√µes √© exclu√≠do, devemos recorrer √† a√ß√£o.  Depois de cri√°-los no Vuex, voc√™ precisa acess√°-los no objeto de m√©todos do componente.  Esse problema pode ser resolvido usando mapActions.  act1 ligar√° this.act1 () a isso. $ store.dispatch ('act1'), conforme mostrado na Listagem 10.17. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6b/lf/e2/6blfe2nzmh7iotgvmia9d8nksto.png" alt="imagem"></div><br>  Por fim, considere o m√©todo auxiliar mapActions.  Permite adicionar a√ß√µes Vuex ao aplicativo, eliminando a necessidade de criar m√©todos com chamadas de despacho em cada caso.  Voltando ao exemplo anterior, imagine que o aplicativo contenha algumas opera√ß√µes ass√≠ncronas.  Como o uso de muta√ß√µes √© exclu√≠do, devemos recorrer √† a√ß√£o.  Depois de cri√°-los no Vuex, voc√™ precisa acess√°-los no objeto de m√©todos do componente.  Esse problema pode ser resolvido usando mapActions.  act1 ligar√° this.act1 () a isso. $ store.dispatch ('act1'), conforme mostrado na Listagem 10.17. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ov/5m/jm/ov5mjmyoyymzvr09mtyibqsrhmk.png" alt="imagem"></div><br>  √Ä medida que o aplicativo cresce, esses m√©todos auxiliares ser√£o cada vez mais √∫teis, reduzindo a quantidade de c√≥digo que precisa ser gravada.  Lembre-se de que voc√™ precisa pensar nos nomes das propriedades em seu reposit√≥rio, pois os m√©todos auxiliares permitem que voc√™ os acesse nos componentes. <br><br><h3>  10.6  Breve introdu√ß√£o aos m√≥dulos </h3><br>  No in√≠cio deste cap√≠tulo, criamos o arquivo store.js no diret√≥rio src / store.  Para um projeto pequeno, essa abordagem √© bastante apropriada.  Mas e se estivermos lidando com um aplicativo muito maior?  O arquivo store.js aumentar√° rapidamente e ser√° dif√≠cil acompanhar tudo o que acontece nele. <br>  Para resolver esse problema, a Vuex oferece o conceito de m√≥dulos.  Os m√≥dulos permitem dividir o armazenamento em v√°rias partes menores.  Cada m√≥dulo tem seus pr√≥prios estados, muta√ß√µes, a√ß√µes e getters, voc√™ pode at√© torn√°-los aninhados um no outro. <br><br>  Reescrevemos a loja de animais usando m√≥dulos.  O arquivo store.js permanecer√° no local, mas ao lado dele, voc√™ deve criar a pasta modules e colocar o arquivo products.js l√°.  A estrutura de diret√≥rios deve se parecer com a da fig.  10.6 <br><br><img src="https://habrastorage.org/webt/-a/xi/tt/-axittmozbvjtdxsblaraowkbdy.png" align="left" alt="imagem">  Dentro do products.js, voc√™ precisa criar quatro objetos: estado, getters, a√ß√µes e muta√ß√µes.  O conte√∫do de cada um deles deve ser copiado do arquivo store.js. <br><br>  Abra o arquivo src / store / store.js e comece a copiar o c√≥digo dele.  Quando conclu√≠do, o arquivo products.js deve se parecer com isso (Listagem 10.18). <br><br>  Agora precisamos exportar todo o c√≥digo que adicionamos ao arquivo product.js.  Isso ir√° import√°-lo para o store.js.  Na parte inferior do arquivo, adicione a express√£o padr√£o de exporta√ß√£o.  Esta √© uma instru√ß√£o de exporta√ß√£o no formato ES6 que permite importar esse c√≥digo de outros arquivos (Listagem 10.19). <br><br>  O arquivo store.js deve ser atualizado.  Adicione um objeto de m√≥dulos a ele, dentro do qual voc√™ poder√° listar todos os novos m√≥dulos.  Lembre-se de importar o arquivo de m√≥dulos / produtos que criamos anteriormente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qn/t1/mo/qnt1moalahiofswpasrzsw7dsec.png" alt="imagem"></div><br>  Nosso exemplo cont√©m apenas um m√≥dulo, ent√£o adicione-o imediatamente ao objeto modules.  Voc√™ tamb√©m precisa remover todos os itens desnecess√°rios do Vuex.Store, conforme mostrado na Listagem 10.20. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wf/f0/0u/wff00uliblovkw3hhwsr4xfsxni.png" alt="imagem"></div><br>  Ao importar os m√≥dulos, conclu√≠mos o processo de refatora√ß√£o.  Ap√≥s atualizar a p√°gina, o aplicativo deve funcionar exatamente como antes. <br><blockquote>  Namespaces no Vuex <br><br>  Em alguns projetos grandes, a modulariza√ß√£o pode causar certos problemas.  √Ä medida que novos m√≥dulos s√£o adicionados, podem surgir conflitos com os nomes de a√ß√µes, getters, muta√ß√µes e propriedades de estado.  Por exemplo, voc√™ pode atribuir acidentalmente o mesmo nome a dois getters em arquivos diferentes.  E, como tudo est√° em um espa√ßo de nomes global global no Vuex, ocorrer√° um erro de chave duplicada no console. <br>  Para evitar esse problema, coloque cada m√≥dulo em um espa√ßo para nome separado.  Para fazer isso, basta especificar namespaced: true na parte superior do Vuex.store.  Leia mais sobre esse recurso na documenta√ß√£o oficial da Vuex em vuex.vuejs.org/en/guide/modules.html. </blockquote>  ¬ªMais informa√ß√µes sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trecho</a> <br><br>  Cupom de 25% para <b>vendedores ambulantes</b> - <b>Vue.js</b> <br><br>  Ap√≥s o pagamento da vers√£o em papel do livro, uma vers√£o eletr√¥nica do livro √© enviada por e-mail. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt448304/">https://habr.com/ru/post/pt448304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt448294/index.html">A lei sobre o isolamento do Runet √© adotada pela Duma do Estado em tr√™s leituras</a></li>
<li><a href="../pt448296/index.html">Freelance e Finan√ßas: 5 maneiras de se estabelecer entre um cliente e um freelancer</a></li>
<li><a href="../pt448298/index.html">GLTF e GLB Basics, Parte 2</a></li>
<li><a href="../pt448300/index.html">Confer√™ncia mailto: CLOUD - sobre nuvens e arredores</a></li>
<li><a href="../pt448302/index.html">Vulnerabilidade nos filtros AdBlock e uBlock permite que c√≥digo arbitr√°rio seja executado no lado do usu√°rio</a></li>
<li><a href="../pt448308/index.html">Data Science Digest (abril de 2019)</a></li>
<li><a href="../pt448310/index.html">Escrevendo um bot de telegrama em python usando a parte 1 da biblioteca de telebot</a></li>
<li><a href="../pt448316/index.html">Determinando a ra√ßa de um c√£o: um ciclo completo de desenvolvimento, de uma rede neural em Python a um aplicativo no Google Play</a></li>
<li><a href="../pt448320/index.html">Por que sil√≠cio e por que CMOS?</a></li>
<li><a href="../pt448322/index.html">C ++ R√∫ssia 2019: transmiss√£o gratuita do primeiro sal√£o e um pouco sobre o que ser√° na confer√™ncia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>