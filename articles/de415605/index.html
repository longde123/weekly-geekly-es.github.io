<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüíº ‚ûñ üßíüèΩ Wie wir die Kartenverarbeitung mit Exadata gespeichert haben üîé üîµ üà≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In den letzten 10 Jahren hat VTB einen massiven Anstieg der Rechenlast verzeichnet. Jedes Jahr stieg es um das Eineinhalbfache und das Volumen der Anm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir die Kartenverarbeitung mit Exadata gespeichert haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/415605/">  In den letzten 10 Jahren hat VTB einen massiven Anstieg der Rechenlast verzeichnet.  Jedes Jahr stieg es um das Eineinhalbfache und das Volumen der Anmeldeinformationen um zwei.  Die Support-Services waren sehr bem√ºht, aber mit diesem Tempo Schritt zu halten war nicht einfach: Abfragepl√§ne wurden verschoben, der Speicherplatz ging zur Neige, Aktualisierungen des Anwendungscodes verbrauchten alle Ressourcen.  In diesem Beitrag zeigen wir Ihnen, wie Sie das Problem l√∂sen k√∂nnen, ohne viel Geld f√ºr ein anderes IBM System auszugeben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a55/f47/8f9/a55f478f97c84c3363d6d9d206c78321.png"><br><a name="habracut"></a><br>  Im Jahr 2013 befand sich die Kartenverarbeitung, damals noch VTB24-Bank, auf einem der leistungsst√§rksten Server dieser Zeit - IBM System p.  Dies wurde durch Repliken f√ºr verschiedene Berichte erg√§nzt.  Die Replikate f√ºr die Berichterstellung lebten von zus√§tzlichen Ger√§ten: einer n√§chtlich aktualisierten Datenbank f√ºr die t√§gliche Berichterstellung, Tools f√ºr das aktive Oracle Active Data Guard-Replikat f√ºr die operative Berichterstellung und einer Datenbank f√ºr die Zentralbankberichterstattung, die wir monatlich aktualisierten. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/823/78d/d62/82378dd621f5bbda38616763295770db.png"><br><br>  Wir haben die Funktionalit√§t der Systeme aktiv angepasst - der gr√∂√üte Teil des Anwendungscodes war mit internen Verbesserungen belegt.  Gleichzeitig wuchsen die Daten sehr schnell.  Infolgedessen verschlechterte sich der Abfrageplan f√ºr vier Basen regelm√§√üig.  Frontsysteme waren langsam.  Aus technischer Sicht gab es noch eine weitere Schwierigkeit: Die OLTP-Last von Kartentransaktionen wurde mit der DWH / DSS-Last von angepassten Funktionen und Berichten gemischt. <br><br>  Der Standardausweg aus dieser Situation besteht darin, Ressourcen zu entleeren und zu einem steileren Subsystem der Datenspeicherung zu wechseln.  Wir haben uns eine interessantere Option ausgedacht - wir haben f√ºr die Berichterstellung zwei f√ºr den Datenbankbetrieb optimierte Oracle Exadata-Hardware- und -Softwarekomplexe verwendet. <br><br>  Der Verarbeitungskomplex wurde in ‚Äûwarme‚Äú und ‚Äûhei√üe‚Äú Zonen unterteilt.  Die Hot Zone wurde mit IBM System p nirgendwo verschoben, und nur die Datenbank wurde darin beibehalten.  Die "warme" Zone war eine Kopie der Hauptdatenbank von Exadata.  Hier finden Sie alle Berichts- und benutzerdefinierten Funktionen.  Replizierte Daten mit Oracle GoldenGate. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d73/b61/31b/d73b6131b164b4e2d9f564a683ff5098.png"><br><br>  Wir haben Replikattests f√ºr Exadata durchgef√ºhrt: Dank der Architektur und der Funktionen der Oracle Exadata Storage-Software - Smartscans, Speicherindizes, Bloom-Filter usw. - wurde die Berichterstellung im Durchschnitt f√ºnfmal schneller.  Der Zeitaufwand f√ºr die Erstellung von Berichten f√ºr die Zentralbank wurde um den Faktor zehn reduziert, und jetzt werden einige Berichte in weniger als einer Stunde erstellt.  Das Wichtigste, was getan werden musste, um Abfragen w√§hrend der Portierung nach Exadata zu optimieren, war, die Hinweise zu entfernen, die zuvor bei der Arbeit auf der alten Plattform hilfreich waren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/272/74c/6d7/27274c6d76d407783d1a4f84a5e69520.png"><br><br>  Wir haben eine Machbarkeitsstudie durchgef√ºhrt, in der Optionen f√ºr verschiedene Parameter mit der √ºblichen Erweiterung aktueller Systeme und der Beteiligung von zwei Exadata-Komplexen verglichen wurden. <br><br><ul><li>  <i>Leistung.</i>  40.000 IOPS gegen√ºber 400.000 IOPS bei Exadata.  Die Oracle-L√∂sung ist auf gro√üe Datenmengen ausgerichtet, der vollst√§ndige Tabellenscan ist viel schneller. <br></li><li> <i>Anpassungsoptionen.</i>  In der Standardl√∂sung k√∂nnen wir die Struktur von Objekten nicht √§ndern, ohne die produktive Datenbank zu √§ndern. Dies ist vom Anbieter verboten.  In Exadata k√∂nnen wir unn√∂tige Indizes entfernen, die erforderlichen hinzuf√ºgen und die Reaktion des Systems verbessern. <br></li><li>  <i>Skalieren.</i>  Exadata bietet eine lineare Produktivit√§tssteigerung zu relativ geringeren Kosten. <br></li><li>  <i>Berichterstattung.</i>  Die Berichtsgeschwindigkeit mit dem Exadata-Komplex erh√∂ht sich um das F√ºnffache und mit der Skalierung vorhandener Systeme um das 1,5-fache. <br></li><li>  <i>Service.</i>  Die Oracle-Infrastruktur verf√ºgt √ºber einen einheitlichen technischen Support, ein einziges Update-System f√ºr Server, Festplattensubsysteme und Netzwerkinfrastruktur.  Bei normaler Skalierung m√ºssen Sie mit verschiedenen Anbietern zusammenarbeiten - es gibt mehr Ausfallzeiten und andere Unannehmlichkeiten. <br></li><li>  <i>Kosten.</i>  Exadata gewinnt hier. <br></li></ul><br>  Die GoldenGate-Replikation stellte sich zun√§chst als Schwachstelle heraus: Bei langen Transaktionen an der Quelle blieb sie zur√ºck.  Wir haben dies gel√∂st, indem wir einige Bewerbungsprozesse aktualisiert und verfeinert haben.  Danach hat uns die Arbeit mit Exadata nur noch Vorteile gebracht. <br><br>  Wir haben benutzerdefinierte Indizes und Partitionierungen eingef√ºhrt, mit denen wir die Leistung benutzerdefinierter Funktionen steigern konnten.  IBM erlaubt diese Optimierung nicht. <br><br>  Durch die √úbertragung der analytischen Berichterstattung in die ‚Äûwarme‚Äú Zone konnte die Speichertiefe der historischen Daten der ‚Äûhei√üen‚Äú Zone verringert werden.  Dies hat die Kosten f√ºr teure Lagerung reduziert.  Es gelang, das Einf√ºgen in Indizes zu beschleunigen.  Das L√∂schen von Daten durch das Housekeeping-Modul wurde auf GoldenGate-Ebene gefiltert. Infolgedessen enthielt das Replikat frische Daten und die gesamte Story. <br>  Exadata verwendet die Hybrid Column Compression (HCC). Dies spart erheblich Speicherplatz.  Daten, die √§lter als ein Jahr sind, werden mit der Methode "Niedrig archivieren" komprimiert. Daten, die √§lter als ein Monat sind, werden mit der erweiterten Komprimierungsmethode komprimiert. Neuere Daten werden nicht komprimiert, um die Geschwindigkeit zu erh√∂hen. <br><br>  F√ºr das Upgrade ist es am effizientesten, ganze Speicherzellen in Exadata durch Zellen mit gr√∂√üeren Festplatten und leistungsstarken Prozessoren zu ersetzen.  Sie k√∂nnen jedoch Speicherzellen verschiedener Versionen innerhalb desselben Systems verwenden - Oracle erm√∂glicht dies. <br>  Die auf Oracle Exadata- und Datenbanktechnologien implementierte Berichterstellung f√ºr die Kartenverarbeitung hat bisher einwandfrei funktioniert, und neue Bankensysteme werden nach demselben Prinzip erstellt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415605/">https://habr.com/ru/post/de415605/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de415593/index.html">6 Jahre sp√§ter eine neue Version der legend√§ren Crash-Distribution Hiren's BootCD</a></li>
<li><a href="../de415595/index.html">Methoden zur Erh√∂hung der Spielerbindung am Beispiel von SLOT-Spielen: Teil 1</a></li>
<li><a href="../de415597/index.html">Postfix - amavisd-new ohne localhost oder Mailserver auf neue Weise</a></li>
<li><a href="../de415599/index.html">Indien will auch Helium-3 bekommen</a></li>
<li><a href="../de415601/index.html">Kubernetes HA-Cluster mit Containerd. Oder gibt es ein Leben ohne Hafenarbeiter?</a></li>
<li><a href="../de415611/index.html">PKI: GCrypt- und KSBA-Bibliotheken als Alternative zu OpenSSL mit Unterst√ºtzung f√ºr die russische Kryptographie. Fortsetzung</a></li>
<li><a href="../de415613/index.html">Warum sollten Sie keine LED-Kronleuchter kaufen</a></li>
<li><a href="../de415615/index.html">Interaktion mit dem Server √ºber die API in iOS unter Swift 3. Teil 2</a></li>
<li><a href="../de415617/index.html">Verwenden der InternetPCools-FPC-Bibliothek in Delphi</a></li>
<li><a href="../de415619/index.html">Apple und Samsung schlie√üen 7-j√§hrigen Patentkrieg ab</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>