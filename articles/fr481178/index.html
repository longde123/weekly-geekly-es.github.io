<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛠️ ⁉️ 🕧 Top 10 des bugs dans les projets C # pour 2019 👨🏾 👃🏽 🏂🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations à tous les amoureux des insectes. La nouvelle année arrive bientôt, il est donc temps de faire le point sur l'année qui s'en va. Par tradi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Top 10 des bugs dans les projets C # pour 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/481178/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/970/122/d8c/970122d8c4434832fba26edb674ff23d.png" alt="Image 1"></div><br>  Salutations à tous les amoureux des insectes.  La nouvelle année arrive bientôt, il est donc temps de faire le point sur l'année qui s'en va.  Par tradition, un classement des erreurs les plus intéressantes découvertes par l'équipe PVS-Studio dans les projets ouverts C # pour 2019.  Êtes-vous prêt?  Commençons alors. <br><a name="habracut"></a><br><h2>  Dixième place: «confondre tout le monde» </h2><br>  <a href="https://www.viva64.com/ru/w/v3066/">V3066</a> Ordre incorrect possible des arguments passés à la méthode 'AdjustCellBorderStyle': 'isFirstDisplayedRow' et 'isFirstDisplayedColumn'.  DataGridViewComboBoxCell.cs 1934 <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseMove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DataGridViewCellMouseEventArgs e</span></span></span><span class="hljs-function">)</span></span> { .... dgvabsEffective = AdjustCellBorderStyle( DataGridView.AdvancedCellBorderStyle, dgvabsPlaceholder, singleVerticalBorderAdded, singleHorizontalBorderAdded, isFirstDisplayedRow, <span class="hljs-comment"><span class="hljs-comment">// &lt;= isFirstDisplayedColumn); // &lt;= .... }</span></span></code> </pre> <br>  Erreur de l'article " <a href="https://www.viva64.com/ru/b/0653/">WinForms: Erreurs, Holmes</a> ".  L'analyseur indique que lors du passage d'arguments à la méthode, les deux derniers arguments ont été inversés.  Jetez un œil à la <i>déclaration AdjustCellBorderStyle</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> DataGridViewAdvancedBorderStyle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustCellBorderStyle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> DataGridViewAdvancedBorderStyledataGridViewAdvancedBorderStyleInput, DataGridViewAdvancedBorderStyle dataGridViewAdvancedBorderStylePlaceholder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> singleVerticalBorderAdded, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> singleHorizontalBorderAdded, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isFirstDisplayedColumn, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isFirstDisplayedRow</span></span></span><span class="hljs-function">)</span></span> { .... }</code> </pre> <br>  Il semble que l'analyseur ait raison.  Souvent, certains arguments sont délibérément passés dans l'ordre inverse, par exemple, afin d'échanger certaines variables.  Mais il ne semble pas que ce soit exactement le cas.  Tout d'abord, les variables de type <i>booléen</i> sont confuses.  Deuxièmement, les noms des méthodes sont également courants: pas de «Swap» ou «Reverse».  De plus, il n'est pas si difficile de se tromper comme ceci: les gens perçoivent souvent différemment l'ordre de la paire ligne / colonne. <br><br><h2>  Neuvième place: "L'Infini est proche" </h2><br>  <a href="https://www.viva64.com/ru/w/v3110/">V3110 Récursion</a> infinie possible dans la méthode 'TryValidateModel'.  PrefixedModuleUpdater.cs 48 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryValidateModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> model, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> prefix</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TryValidateModel(model, Prefix(prefix)); }</code> </pre> <br>  Erreur de l'article " <a href="https://www.viva64.com/ru/b/0681/">Recherche et analyse des erreurs dans le code Orchard CMS</a> ".  Une erreur a été commise qui provoque une récursion infinie.  Pour comprendre comment cette erreur a pu être commise, vous devez examiner la surcharge de la méthode <i>TryValidateModel</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryValidateModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> model</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _updateModel.TryValidateModel(model); }</code> </pre> <br>  Il est probable que dans le premier cas un appel du formulaire soit utilisé: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryValidateModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> model, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> prefix</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _updateModel.TryValidateModel(model, Prefix(prefix)); }</code> </pre> <br>  Le code compilé car <i>_updateModel</i> est de type <i>IUpdateModel</i> et la classe actuelle implémente également l'interface <i>IUpdateModel</i> . <br><br><h2>  Huitième place: «Essayez, trouvez» </h2><br>  <a href="https://www.viva64.com/ru/w/v3091/">V3091</a> Analyse empirique.  Il est possible qu'une faute de frappe soit présente à l'intérieur du littéral de chaîne: "ID du groupe de gestion".  Le mot «Id» est suspect.  Constants.cs 36 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HelpMessages</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SubscriptionId = <span class="hljs-string"><span class="hljs-string">"Subscription Id of the subscription associated with the management"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> GroupId = <span class="hljs-string"><span class="hljs-string">"Management Group Id"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= public const string Recurse = "Recursively list the children of the management group"; public const string ParentId = "Parent Id of the management group"; public const string GroupName = "Management Group Id"; // &lt;= public const string DisplayName = "Display Name of the management group"; public const string Expand = "Expand the output to list the children of the management group"; public const string Force = "Force the action and skip confirmations"; public const string InputObject = "Input Object from the Get call"; public const string ParentObject = "Parent Object"; }</span></span></code> </pre> <br>  L'erreur provient de l'article « <a href="https://www.viva64.com/ru/b/0678/">Azure PowerShell:« fondamentalement inoffensif</a> ». L'analyseur soupçonne que la constante <i>GroupName a</i> été initialisée avec une chaîne d'erreur. Il devrait probablement y avoir quelque chose comme <i>« Management Group Name »</i> . Il est difficile de juger de la criticité de cette erreur, mais elle est particulièrement rare et difficile à détecter. <br><br><h2>  Septième place: "Juste négligé" </h2><br>  <a href="https://www.viva64.com/ru/w/v3078/">V3078</a> L'ordre de tri d'origine sera perdu après un appel répétitif à la méthode 'OrderBy'.  Utilisez la méthode 'ThenBy' pour conserver le tri d'origine.  GridModel.Selection.cs 107 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GridModel</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BuildCellSelectionRegions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.MergeCellSelectionRegions(selectedItemsInView .OrderBy(c =&gt; c.Column.ItemInfo.LayoutInfo.Line) .OrderBy(c =&gt; c.RowItemInfo.LayoutInfo.Line)); } }</code> </pre> <br>  Erreur de l'article " <a href="https://www.viva64.com/ru/b/0677/">Vérification de l'interface utilisateur de Telerik pour UWP pour se familiariser avec PVS-Studio</a> ".  En raison de la réutilisation de <i>OrderBy</i> pour une collection déjà triée, le résultat du tri précédent sera perdu.  Vous devez utiliser <i>ThenBy</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.MergeCellSelectionRegions(selectedItemsInView .OrderBy(c =&gt; c.Column.ItemInfo.LayoutInfo.Line) .ThenBy(c =&gt; c.RowItemInfo.LayoutInfo.Line));</code> </pre> <br>  De telles erreurs sont commises par négligence ou par ignorance.  Je pense que le copier-coller est à blâmer. <br><br><h2>  Sixième place: «Le code est documenté», ont-ils déclaré </h2><br>  <a href="https://www.viva64.com/ru/w/v3009/">V3009</a> Il est étrange que cette méthode renvoie toujours une seule et même valeur de 'true'.  MaskedTextProvider.cs 1529 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Remove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> testPosition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> MaskedTextResultHint resultHint</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lastAssignedPos == INVALID_INDEX) { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// nothing to remove. } .... return true; }</span></span></code> </pre> <br>  Erreur de l'article " <a href="https://www.viva64.com/ru/b/0656/">Vérification du code source des bibliothèques .NET Core avec l'analyseur statique PVS-Studio</a> ".  La méthode retournera toujours <i>true</i> .  Oui, c'est une erreur, mais quelque chose d'autre est curieux.  Un commentaire détaillé est joint à la méthode: <br><br>  <i>Supprime le dernier caractère de la chaîne formatée.</i>  <i>(Supprimer le dernier caractère de la chaîne virtuelle).</i>  <i>A la sortie, le paramètre out contient la position où l'opération a été réellement effectuée.</i>  <i>Cette position est relative à la chaîne de test.</i>  <i>Le paramètre MaskedTextResultHint out donne plus d'informations sur le résultat de l'opération.</i>  <i>Renvoie</i> <b><i>vrai</i></b> <i>en</i> <b><i>cas</i></b> <i>de succès,</i> <b><i>faux</i></b> <i>sinon.</i> <br><br>  Concentrez-vous sur la dernière phrase.  Mais qui a jamais lu ces commentaires?  Mais sérieusement, une telle erreur se glisse facilement, par exemple, lors de la refactorisation ou du débogage.  Nous voulions vérifier l'option lorsque le résultat de la méthode sera toujours <i>vrai</i> , eh bien, nous avons oublié de tout renvoyer tel qu'il était. <br><br><h2>  Cinquième place: "Indexez-moi, immédiatement!" </h2><br>  <a href="https://www.viva64.com/ru/w/v3102/">V3102</a> Accès suspect à l'élément de l'objet 'seq' par un index constant à l'intérieur d'une boucle.  XmlQueryRuntime.cs 738 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MatchesXmlType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IList&lt;XPathItem&gt; seq, ....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; seq.Count; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CreateXmlType(seq[<span class="hljs-number"><span class="hljs-number">0</span></span>]).IsSubtypeOf(....)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  Erreur de l'article " <a href="https://www.viva64.com/ru/b/0656/">Vérification du code source des bibliothèques .NET Core avec l'analyseur statique PVS-Studio</a> ".  Lors de la traversée de la collection <i>seq</i> , la boucle <i>for</i> utilise par erreur uniquement l'accès à son premier élément à toutes les itérations (index 0 au lieu de <i>i</i> ). <br><br><h2>  Quatrième place: «Juste un dollar et pas assez» </h2><br>  <a href="https://www.viva64.com/ru/w/v3138/">V3138</a> Le littéral de chaîne contient une expression interpolée potentielle.  Envisagez d'inspecter: e.  SSPIHandleCache.cs 42 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CacheCredential</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SafeFreeCredentials newHandle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ExceptionCheck.IsFatal(e)) { NetEventSource.Fail(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Attempted to throw: {e}"</span></span>); } } }</code> </pre> <br>  Erreur de l'article " <a href="https://www.viva64.com/ru/b/0656/">Vérification du code source des bibliothèques .NET Core avec l'analyseur statique PVS-Studio</a> ".  La chaîne <i>«Tentative to throw: {e}» semble</i> être interpolée.  En raison du caractère <i>$</i> manquant, la représentation sous forme de chaîne de l'exception <i>e</i> ne sera pas remplacée dans la chaîne.  Par conséquent, la chaîne sera utilisée «telle quelle». <br><br><h2>  Troisième place: "Il n'y a pas d'issue" </h2><br>  <a href="https://www.viva64.com/ru/w/v3008/">V3008</a> [CWE-563] La variable 'this.linker.s3.region' reçoit des valeurs successives deux fois.  C'est peut-être une erreur.  Vérifiez les lignes: 116, 114. AWSSDK.DynamoDBv2.Net45 S3Link.cs 116 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Region { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (String.IsNullOrEmpty(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.linker.s3.region = <span class="hljs-string"><span class="hljs-string">"us-east-1"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.linker.s3.region = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } }</code> </pre> <br>  Erreur de l'article « <a href="https://www.viva64.com/ru/b/0605/">Recherche d'erreurs dans le code source du SDK Amazon Web Services pour .NET</a> ».  Dans le corps du bloc <i>if</i> , le <i>retour a</i> été ignoré.  Par conséquent, la variable <i>this.linker.s3.region obtiendra</i> toujours une <i>valeur</i> , y compris une chaîne vide et <i>null</i> . <br><br><h2>  Deuxième place: "Devenez en ordre!" </h2><br>  <a href="https://www.viva64.com/ru/w/v3070/">V3070</a> La variable non initialisée 'LANG_USER_DEFAULT' est utilisée lors de l'initialisation de la variable 'LOCALE_USER_DEFAULT'.  NativeMethods.cs 890 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">NativeMethods</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LOCALE_USER_DEFAULT = MAKELCID(LANG_USER_DEFAULT); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LANG_USER_DEFAULT = MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT); .... }</code> </pre> <br>  Erreur de l'article " <a href="https://www.viva64.com/ru/b/0653/">WinForms: Erreurs, Holmes</a> ".  L'ordre d'initialisation des champs de classe est mélangé.  Pour calculer la valeur du champ <i>LOCALE_USER_DEFAULT</i> , utilisez le champ <i>LANG_USER_DEFAULT</i> , qui n'est pas encore initialisé et a une valeur de 0. La variable <i>LANG_USER_DEFAULT</i> n'est utilisée nulle part ailleurs dans le code.  Pour comprendre à quoi cette erreur conduit, un programme de test a été écrit contenant des méthodes du code WinForms.  Par souci de simplicité, certaines constantes réelles ont été remplacées par leurs valeurs réelles: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">NativeMethods</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LOCALE_USER_DEFAULT = MAKELCID(LANG_USER_DEFAULT); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LANG_USER_DEFAULT = MAKELANGID(<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x01</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MAKELANGID</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> primary, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sub</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((((<span class="hljs-keyword"><span class="hljs-keyword">ushort</span></span>)(sub)) &lt;&lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) | (<span class="hljs-keyword"><span class="hljs-keyword">ushort</span></span>)(primary)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MAKELCID</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lgid</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MAKELCID(lgid, <span class="hljs-number"><span class="hljs-number">0x0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MAKELCID</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lgid, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sort</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((<span class="hljs-number"><span class="hljs-number">0xFFFF</span></span> &amp; lgid) | (((<span class="hljs-number"><span class="hljs-number">0x000f</span></span>) &amp; sort) &lt;&lt; <span class="hljs-number"><span class="hljs-number">16</span></span>)); } } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { System.Console.WriteLine(NativeMethods.LOCALE_USER_DEFAULT); } }</code> </pre> <br>  À la suite du lancement, les éléments suivants seront affichés sur la console: 0. Nous allons maintenant corriger l'erreur en échangeant la déclaration des <i>champs</i> <i>LOCALE_USER_DEFAULT</i> et <i>LANG_USER_DEFAULT</i> .  Le résultat du programme sous cette forme: 1024. <br><br><h2>  Première place: "Faites confiance, mais vérifiez" </h2><br>  La première place est toujours difficile.  Il doit y avoir quelque chose d'extraordinaire et de très intéressant.  Au départ, j'ai sélectionné plus de vingt erreurs intéressantes pour cet article, mais il n'y avait rien de digne de leur première place.  Et puis je me suis souvenu d'un article de mon collègue Sergey Vasiliev, consacré à une seule erreur.  La beauté de cette erreur est qu'elle a directement affecté le fonctionnement de notre analyseur.  Comment?  Cela ressort déjà du titre de l'article " <a href="https://www.viva64.com/ru/b/0654/">Historique de la façon dont PVS-Studio a trouvé une erreur dans la bibliothèque utilisée dans ... PVS-Studio</a> ".  Encore une fois, la paresse n'a pas été annulée.  :) Et là, j'ai complètement honte et je ne donnerai pas de description de l'erreur, mais je proposerai de suivre le lien vers l'article et d'en savoir plus.  Je le garantis - ça vaut le coup.  Et l'article est court. <br><br><h2>  Conclusion </h2><br>  J'espère que les erreurs ont été intéressantes, mais l'article ne s'est pas fatigué.  Je vous rappelle que vous pouvez toujours <a href="https://www.viva64.com/ru/pvs-studio-download/">télécharger l'</a> analyseur PVS-Studio pour rechercher vous-même les erreurs dans vos propres projets et ceux de tiers, pour vous faire plaisir, amis et collègues.  Et qu'il y ait moins d'erreurs et plus de temps pour s'améliorer!  :) <br><br>  As-tu lu?  Félicitations pour le passage au niveau suivant!  Dans les articles suivants de notre blog, les meilleurs bugs de 2019 dans <a href="https://habr.com/ru/company/pvs-studio/blog/481186/">les</a> projets <a href="https://habr.com/ru/company/pvs-studio/blog/481186/">Java</a> et <a href="https://habr.com/ru/company/pvs-studio/blog/481190/">C ++</a> <a href="https://habr.com/ru/company/pvs-studio/blog/481186/">sont</a> <a href="https://habr.com/ru/company/pvs-studio/blog/481190/">mis en évidence</a> . <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4c/f27/4c0/b4cf274c045d32ce12b08487befdede7.png" alt="Image 2"></div><br><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/481174/"><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Sergey Khrenov.  <a href="https://habr.com/en/company/pvs-studio/blog/481174/">Top 10 des bugs trouvés dans les projets C # en 2019</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481178/">https://habr.com/ru/post/fr481178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481166/index.html">Prototypage d'interfaces de jeu pour les sciences humaines</a></li>
<li><a href="../fr481168/index.html">De Hadoop à Cassandra: Top 5 des outils Big Data</a></li>
<li><a href="../fr481172/index.html">Modèle d'IA solide</a></li>
<li><a href="../fr481174/index.html">Top 10 des bugs trouvés dans les projets C # en 2019</a></li>
<li><a href="../fr481176/index.html">Couriers Yandex.Le Food and Delivery Club a besoin d'un syndicat</a></li>
<li><a href="../fr481180/index.html">Les développeurs doivent-ils recevoir des suggestions des utilisateurs?</a></li>
<li><a href="../fr481182/index.html">Istio Service Mesh Posts Series</a></li>
<li><a href="../fr481184/index.html">Top 10 des bugs trouvés dans les projets Java en 2019</a></li>
<li><a href="../fr481186/index.html">Top 10 des bugs dans les projets Java pour 2019</a></li>
<li><a href="../fr481188/index.html">Top 10 des bugs trouvés dans les projets C ++ en 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>