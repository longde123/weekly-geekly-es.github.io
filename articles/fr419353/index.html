<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® ü§∂üèº üë®‚Äçüíª Ce qui vous attend avant, apr√®s et pendant la transition vers Kubernetes - business note üë©üèæ‚Äç‚úàÔ∏è üòû üèéÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! 

 Dans cet article, nous avons d√©cid√© de sp√©culer un peu sur quand et pourquoi les entreprises ont besoin de Kubernetes. La technolog...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ce qui vous attend avant, apr√®s et pendant la transition vers Kubernetes - business note</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/419353/">  Bonjour √† tous! <br><br>  Dans cet article, nous avons d√©cid√© de sp√©culer un peu sur quand et pourquoi les entreprises ont besoin de Kubernetes.  La technologie d'entr√©e est-elle difficile, √† quelle vitesse et comment elle sera rentable.  Est-ce que cela en vaut la peine et ce que tout cela menace.  Nous ne nous fixons pas la t√¢che de r√©diger une revue technique approfondie, dont il existe de nombreux, mais dans les documents suivants, nous partagerons certainement nos meilleures pratiques en termes d'architecture et de stabilit√© des applications sous Kubernetes.  Maintenant, nous nous concentrons sur si le jeu en vaut la chandelle et ce que nous obtenons √† la sortie. <br><br><img src="https://habrastorage.org/webt/tn/tb/cj/tntbcjekwq04x9inchtup9hyahi.png"><br><a name="habracut"></a><br>  Le d√©lai de mise sur le march√© - la vitesse de mise √† jour des mises √† jour sur le march√© - devient aujourd'hui un facteur cl√© de l'efficacit√© des solutions informatiques.  Le produit doit √™tre am√©lior√© chaque jour: ajoutez-lui de nouvelles fonctions et modules, maintenez la documentation et les scripts en parfait √©tat.  Dans le m√™me temps, les syst√®mes en ligne doivent fonctionner correctement et √™tre mis √† jour sans affecter les utilisateurs. <br><br>  Les microservices, les conteneurs et l'infrastructure pour leur orchestration - Kubernetes (ou K8S, on l'appelle dans les cercles techniques) prot√®gent la mise √† jour continue discr√®te. <br><br><h2>  Comment Kubernetes fournit des mises √† jour syst√®me continues </h2><br>  La t√¢che principale lors de la mise √† jour d'une solution informatique est d'assurer son bon fonctionnement apr√®s le transfert de l'environnement de d√©veloppement vers la plateforme produit.  Et aussi dans le bon fonctionnement du syst√®me au moment de la mise √† jour du produit. <br><br>  Le probl√®me r√©side dans le fait que les param√®tres de l'environnement de d√©veloppement et des serveurs industriels ne correspondent souvent pas.  Les conteneurs r√©solvent ce probl√®me en combinant tous les composants logiciels dans un seul package isol√© de l'environnement externe.  Cela vous permet de d√©ployer des applications rapidement et de mani√®re fiable sur n'importe quelle infrastructure et facilite la mise √† jour de la base de code du syst√®me. <br><br>  Inaper√ßues par les utilisateurs, les mises √† jour ont lieu gr√¢ce √† la duplication des conteneurs et √† la redirection s√©quentielle des utilisateurs de l'un √† l'autre.  Pour la gestion des conteneurs (orchestration), nous utilisons Kuberenetes.  En fin de compte, il facilite la gestion, le d√©ploiement et la mise √† niveau de la solution, la surveillance des performances et le d√©bogage en cas de panne. <br><br><h2>  Quand une entreprise a besoin de Kubernetes </h2><br>  Il est temps pour les entreprises de penser √† passer √† la plateforme Kubernetes lorsque: <br><br><ul><li>  Un projet ou un syst√®me est un outil important pour les entreprises et doit donc √™tre tol√©rant aux pannes et continuer √† fonctionner, m√™me si une partie est en panne. </li><li>  Le syst√®me est lourdement charg√©, tout en conservant des mises √† jour ou des am√©liorations rapides. </li><li>  Le syst√®me a p√©riodiquement besoin de capacit√©s suppl√©mentaires.  Et en a besoin rapidement. </li><li>  Et avec tout cela, la vitesse de livraison des mises √† jour √† l'environnement industriel est mesur√©e en semaines, mois, ann√©es, mais jamais - heures ou jours. </li></ul><br>  Vous avez √©galement besoin de Kubernetes comme outil d'automatisation et de standardisation du travail avec la solution, si en plus des √©l√©ments ci-dessus: <br><br><ul><li>  Il n'y a pas d'isolement entre les syst√®mes informatiques de l'entreprise et chacun peut influencer l'autre. </li><li>  Si vous devez √©crire un script distinct √† chaque fois pour communiquer avec les param√®tres du serveur sur lequel le syst√®me est d√©ploy√©, c'est-√†-dire que vous pouvez faire √©voluer ce processus uniquement √† la main. </li><li> Il y a des personnes cl√©s dans l'√©quipe de d√©veloppement - porteuses de ¬´connaissances secr√®tes¬ª sur le projet ou le syst√®me, et elles semblent uniques et irrempla√ßables. </li></ul><br>  Essentiellement, le passage √† Kubernetes est un must pour les entreprises qui ont besoin de prendre en charge les syst√®mes d'information en ligne 24/7. <br><br><h2>  Pourquoi Kubernetes? </h2><br>  Kubernetes n'est pas la seule alternative pour l'int√©gration et le d√©ploiement continus (CI / CD).  Mais c'est Kubernetes qui est devenu la norme de l'industrie pour la gestion des syst√®mes qui n√©cessitent une haute disponibilit√©. <br><br>  Pour nous en tant que d√©veloppeur, les arguments d√©cisifs en faveur de Kubernetes sont les suivants: <br><br><ul><li>  La plateforme se concentre sur les applications, pas sur les infrastructures. </li><li>  Kubernetes est pratique pour travailler avec un centre de donn√©es, ainsi qu'avec plusieurs, r√©partis dans diff√©rentes villes. </li><li>  Prise en charge facile de la solution gr√¢ce √† une documentation claire et une communaut√© active. </li><li>  Configuration flexible de diff√©rentes applications, distribution s√©curis√©e du trafic. </li><li>  Prise en charge du conteneur Docker. </li></ul><br><h2>  Quels sont les avantages de l'activit√© Kubernetes? </h2><br><ul><li>  Configuration flexible et processus de mise √† jour automatis√© <br>  Vous d√©terminez vous-m√™me quelle partie du syst√®me mettre en service commercial.  Kubernetes vous permet de faire un cycle de lib√©ration court.  Toutes les op√©rations - du code source du syst√®me √† la version dans l'environnement du produit - se d√©roulent automatiquement.  Vous n'avez pas besoin d'une √©quipe d'ing√©nieurs pour faire fonctionner le syst√®me.  Les mises √† jour actuelles n'affectent pas les performances du syst√®me et peuvent √™tre effectu√©es √† tout moment pour les d√©veloppeurs. </li><li>  Placement et mise √† l'√©chelle du syst√®me <br>  Le syst√®me peut √™tre plac√© √† la fois sur la puissance de calcul du client (ou dans le centre de donn√©es) et sur n'importe quel fournisseur de cloud, par exemple Amazon ou Azure.  Tout niveau de performances et de tol√©rance aux pannes peut √™tre facilement atteint en faisant √©voluer le cluster. </li><li>  Normalisation et auto-documentation <br>  La solution ne n√©cessite pas d'instructions.  Il est auto-document√© et imm√©diatement emball√© automatiquement dans une unit√© d'utilisation - un conteneur.  Nous d√©crivons la configuration dans Kubernetes comme un plan / diagramme.  Nous n'√©crivons pas de scripts qui pr√©parent l'environnement, comme c'√©tait le cas avant Kubernetes.  Au lieu de cela, nous transmettons √† Kubernetes des informations (un diagramme) sur le fonctionnement de la solution.  Et il met lui-m√™me en ≈ìuvre ce sch√©ma. <br><br>  Les d√©veloppeurs √©crivent maintenant une application pour travailler dans un conteneur.  Les ing√©nieurs DevOps √©crivent un sch√©ma de fonctionnement d'une application dans un conteneur, et Kubernetes lui-m√™me effectue les t√¢ches de construction d'une solution. <br><br>  La technologie Kubernetes est standardis√©e.  Il vous sera facile de former un nouvel employ√© √† votre syst√®me de lib√©ration ou de transf√©rer le syst√®me √† un nouvel entrepreneur. <br><br>  La description de configuration finale cr√©√©e par Kubernetes est √©galement la documentation du syst√®me.  √Ä partir des noms, il est imm√©diatement clair quels param√®tres sont configur√©s et √† quoi ils servent. <br><br>  Pour cette raison, la plate-forme Kubernetes dans son ensemble universalise les versions, les mises √† jour et la version de l'application. </li></ul><br><ul><li>  Test en direct sans douleur <br>  Le processus de test de la solution a chang√©.  Les d√©veloppeurs peuvent, √† la demande, cr√©er des environnements identiques √† ceux des produits pour des tests automatis√©s.  De plus, les journaux g√©n√©raux du fonctionnement de l'application et du fonctionnement de Kubernetes avec l'application aident √† rechercher les probl√®mes et √† trouver les erreurs encore plus rapidement. </li></ul><br><h2>  Ce que n√©cessitera une transition commerciale vers Kubernetes </h2><br>  Kubernetes lui-m√™me ne sera qu'une petite partie de votre nouveau syst√®me.  Vous devez √™tre pr√™t √† ce que Kubernetes, en tant qu'outil de normalisation de l'ensemble du cycle de d√©veloppement, de mise √† jour et de publication des applications, entra√Æne un changement de tout au moment de la transition: architecture logicielle, processus de d√©veloppement et maintenance de l'infrastructure. <br><br><ul><li>  Architecture de la solution <br>  Du point de vue du produit, la transition n'est possible que si le syst√®me est impl√©ment√© ou mis √† niveau vers une architecture de microservices bas√©e sur des services qui peuvent √™tre conditionn√©s dans des conteneurs (services sans √©tat). </li><li>  Processus de d√©veloppement <br>  Du point de vue du processus de d√©veloppement, la transition implique principalement un changement de pens√©e.  Toute am√©lioration de la situation et ¬´b√©quilles¬ª ajout√©es au dernier moment sont compl√®tement exclues.  Un d√©veloppeur de solutions informatiques ne peut travailler que comme une seule √©quipe, ce qui cr√©e initialement un produit d√©composable test√©, pris en charge, pris en charge et conditionn√©.  Tout doit √™tre construit logiquement de la premi√®re ligne de code √† l'op√©ration. </li><li>  Processus de mise √† jour <br>  M√™me au stade du d√©veloppement de l'architecture de l'application, vous devez r√©fl√©chir √† la fa√ßon de mettre √† jour la solution sans s'arr√™ter.  Et comprenez imm√©diatement comment vous allez mettre √† jour la base de donn√©es, l'API, comment il est logique de prendre en charge plusieurs versions de l'application, en tenant compte du fait que les gens travaillent avec le syst√®me pendant la mise √† jour et qu'ils peuvent tomber dans diff√©rentes versions. <br><br>  Et une autre fa√ßon de penser est li√©e au fait que lors du passage √† Kubernetes, l'infrastructure commence √† fonctionner en mode lecture seule, et pour mettre √† jour le syst√®me, vous devez cr√©er de nouvelles versions des images d'application et dire √† Kubernetes d'utiliser la nouvelle version, et elle d√©sactivera plus tard l'ancienne version et se supprimera. </li></ul><br><br>  De sorte que les am√©liorations du syst√®me et les changements dans la technologie de travail ne peuvent √™tre √©vit√©s.  Le d√©m√©nagement ne sera pas rapide.  Mais vous ne devrez changer le paradigme qu'une seule fois. <br><br><h2>  Affaire.  Comment nous avons transf√©r√© le syst√®me de microservices √† Kubernetes </h2><br>  Nous op√©rons dans un environnement de produit une solution tr√®s charg√©e bas√©e sur une architecture de microservices, qui transmet plus de 300 000 transactions par jour, et aux heures de pointe - 60 √† 80 000 par heure.  Nous mettons r√©guli√®rement √† jour le produit, il existe √©galement des versions plus urgentes qui n√©cessitaient auparavant de suspendre le syst√®me ou une partie de ses fonctionnalit√©s pendant un certain temps. <br><br>  Nous sommes entr√©s dans l'environnement de l'√©picerie sans K8S, mais nous avons d'abord d√©velopp√© le syst√®me avec un ≈ìil.  Il a fallu 6 semaines pour traduire la solution en Kubernetes.  Nous avons √©volu√© dans les directions suivantes: <br><br><h4>  1) Configuration du pipeline de d√©ploiement </h4><br>  a.  Configuration du pipeline pour l'assemblage continu, les tests et la mise √† jour des applications (CI / CD) dans les environnements de test. <br>  b.  Mettre en place des mises √† jour continues dans un environnement industriel. <br>  c.  Pr√©paration et configuration de l'environnement au plus pr√®s de l'environnement industriel (pr√©prod).  Nous avons d√©ploy√© et test√© le cluster √† c√¥t√© des machines virtuelles actuelles. <br>  d.  D√©veloppement d'un plan de migration vers un environnement industriel. <br><br>  Donc, tout semble √™tre simple, nous avons un pipeline CI / CD pour tous les environnements et vous pouvez changer, mais c'est trop t√¥t! <br><br><h4>  2) S√©lection de la configuration du cluster </h4><br>  Nous avons pass√© quelques semaines √† s√©lectionner la configuration la plus stable des composants et des versions du cluster Kubernetes: syst√®me d'exploitation + Docker + Kubernetes. <br><br>  Nous avons test√© 3 configurations diff√©rentes de syst√®mes d'exploitation (Ubuntu, CentOS, Oracle Linux derni√®res versions).  Sur chaque syst√®me d'exploitation, nous avons v√©rifi√© 2 versions diff√©rentes de Docker et Kubernetes - celle qui √©tait livr√©e dans les derni√®res versions des packages de syst√®me d'exploitation standard et la derni√®re version du fabricant.  En cons√©quence, les configurations de la distribution standard d'Oracle Linux ont montr√© la plus grande stabilit√©, et nous nous sommes install√©s sur elles. <br><br><h4>  3) Configuration des param√®tres du conteneur </h4><br>  Nous avons pass√© un peu plus de temps √† r√©gler les param√®tres du conteneur - nous avons configur√© les exigences de m√©moire, de disque et de processus. <br><br>  Et seulement apr√®s avoir fait tout cela et test√© divers param√®tres du fonctionnement du syst√®me (stabilit√©, tol√©rance aux pannes, etc.) dans le pr√©prode sous des charges proches de celles du combat, et que le syst√®me a fonctionn√© de mani√®re stable, nous sommes pass√©s √† l'√©tape finale - la migration. <br><br>  Ensuite, tout √©tait simple. <br><br><h4>  Jour C. Migration </h4><br>  Pour la migration de combat, nous avons choisi le temps avec la charge syst√®me minimale: le nombre minimum d'utilisateurs et l'absence d'une charge augment√©e selon le planning de fonctionnement interne des algorithmes syst√®me. <br><br>  Le temps d'arr√™t du syst√®me √©tait d'environ une heure et n'a pratiquement pas affect√© les utilisateurs.  La migration elle-m√™me consistait √† basculer les utilisateurs d'un syst√®me √† un autre et √† constater que tout se passait bien. <br><br><h4>  La vie avec Kubernetes </h4><br>  Maintenant, le processus de mise √† jour n'affecte pas les performances du syst√®me, il peut √™tre effectu√© √† tout moment qui convient aux d√©veloppeurs et se pr√©sente comme suit: <br><br><ol><li>  Les d√©veloppeurs ont fait une r√©vision, l'ont test√©e, ont envoy√© le code √† la publication. </li><li>  Le code a √©t√© automatiquement assembl√©, empaquet√© dans des images de docker et publi√© dans un r√©f√©rentiel de docker priv√©. </li><li>  Kubernetes l√®ve automatiquement de nouvelles versions de services, v√©rifie que les services fonctionnent correctement, permute les utilisateurs √† utiliser de nouvelles versions de services, arr√™te le travail des anciennes versions et les supprime du cluster.  La mise √† jour a eu lieu. </li></ol><br><h2>  R√©sumant notre exp√©rience </h2><br>  Vous avez besoin de Kubernetes si: <br><br><ol><li>  Une haute disponibilit√© du syst√®me est requise. </li><li>  Le syst√®me √©volue de mani√®re dynamique et vous devez apporter des modifications √† l'environnement du produit les yeux ferm√©s. </li><li>  Vous souhaitez travailler en √©quipe unique, du code √† l'environnement du produit. </li><li>  Vous cr√©ez un syst√®me dynamique et √©volutif que vous op√©rerez pendant des ann√©es. </li></ol><br>  Kubernetes est ¬´cher¬ª, car entrer dans la technologie n√©cessitera: <br><br><ol><li>  √âtude par des d√©veloppeurs de technologies connexes. </li><li>  Examen des processus de conception, de d√©veloppement, de d√©ploiement, de test et de gestion de l'environnement. </li><li>  Exp√©rience dans le fonctionnement de Kubernetes lui-m√™me: vous devez maintenant surveiller non seulement votre syst√®me, mais aussi les services d'application Kubernetes. </li></ol><br>  Remboursez Kubernetes tr√®s rapidement: <br><br><ol><li>  La proc√©dure de mise √† jour du syst√®me est beaucoup plus simple et plus rapide.  Les d√©veloppeurs sont lib√©r√©s de tout un bloc de travail. </li><li>  Chaque nouveau sp√©cialiste entrera d√©j√† dans le projet sur rails. </li><li>  Le convoyeur sera transparent et automatis√©. </li><li>  L'exp√©rience sera r√©p√©t√©e par votre √©quipe pour d'autres syst√®mes. </li><li>  Vous mettrez √† jour le syst√®me sans le mettre hors service, ce qui signifie que vous n'arr√™terez pas l'activit√©. </li></ol><br>  PS Conseils pratiques: divisez l'entr√©e de la technologie en deux √©tapes: d√©velopper un syst√®me avec la bonne architecture de microservices et le d√©placer sous le contr√¥le de K8S.  Ainsi, la transition sous Kubernetes ne se transformera pas en refactoring global. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419353/">https://habr.com/ru/post/fr419353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419339/index.html">Les d√©fis de Boeing et les succ√®s de SpaceX √† la conf√©rence du Groupe consultatif de la s√©curit√© a√©rospatiale</a></li>
<li><a href="../fr419341/index.html">Ce qu'ils ne disent pas sur le rapport Tesla</a></li>
<li><a href="../fr419345/index.html">Rapport du Club de Rome 2018, chapitre 3.8: ¬´L'√©conomie en boucle ferm√©e n√©cessite une logique diff√©rente¬ª</a></li>
<li><a href="../fr419347/index.html">UE4 | Inventaire pour Multijoueur # 3 | Structure d'interaction</a></li>
<li><a href="../fr419349/index.html">Pourquoi la priorisation du travail et de la valeur ne fonctionne pas</a></li>
<li><a href="../fr419357/index.html">Mise √† jour de la webmestre 3CX: am√©lioration de l'interface utilisateur, de la barre multim√©dia et des statistiques de qualit√© de la communication</a></li>
<li><a href="../fr419359/index.html">PHP Digest n ¬∞ 136 (24 juillet - 6 ao√ªt 2018)</a></li>
<li><a href="../fr419361/index.html">thindf - nouveau format de donn√©es texte (alternative √† JSON)</a></li>
<li><a href="../fr419363/index.html">GitLab 11.1: publication du panneau de contr√¥le de s√©curit√© et de la recherche avanc√©e</a></li>
<li><a href="../fr419365/index.html">Histoires d'un avocat en informatique. Entreprise d'externalisation de la vie. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>