<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòä üìù ü§öüèΩ QUIC, TLS 1.3, DNS sobre HTTPS e depois em todos os lugares üÄÑÔ∏è üï¥üèΩ üëµüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habr, ol√°! Esta √© uma transcri√ß√£o do relat√≥rio de Artyom ximaera Gavrichenkov, que ele leu no BackendConf 2018 como parte do festival RIT ++. 


 Ol√°!...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>QUIC, TLS 1.3, DNS sobre HTTPS e depois em todos os lugares</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/qrator/blog/416633/"><blockquote> Habr, ol√°!  Esta √© uma transcri√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">relat√≥rio de</a> Artyom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">ximaera</a> Gavrichenkov, que ele leu no BackendConf 2018 como parte do festival RIT ++. </blockquote><br><img src="https://habrastorage.org/webt/s9/tf/te/s9tftefyrqefeppf1utoqkcna0k.png"><br><br>  Ol√°! <br><br>  O t√≠tulo do relat√≥rio cont√©m uma longa lista de protocolos; passaremos por ele gradualmente, mas vamos come√ßar com o que n√£o est√° no t√≠tulo. <br><br>  Este (sob o corte) do cabe√ßalho de um dos blogs, na Internet, voc√™ pode ver muitos desses t√≠tulos.  Nesse post est√° escrito que o HTTP / 2 n√£o √© um futuro distante, √© o nosso presente;  Este √© um protocolo moderno desenvolvido pelo Google e centenas de profissionais de muitas empresas avan√ßadas, lan√ßado pela IETF como RFC em 2015, ou seja, j√° h√° 3 anos. <br><br>  Os padr√µes da IETF s√£o aceitos pela ind√∫stria, como documentos de concreto armado, como uma l√°pide, de fato. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/rg/qa/2d/rgqa2dwlrpkuquyubcmvfii_rma.png"><br><br>  Est√° planejado que eles determinem o desenvolvimento da Internet e levem em considera√ß√£o todos os cen√°rios de uso poss√≠veis.  Ou seja, se tiv√©ssemos uma vers√£o antiga do protocolo e, em seguida, uma nova aparecesse, ele definitivamente mant√©m a compatibilidade com todos os casos de usu√°rios anteriores e, al√©m disso, resolve v√°rios problemas, otimiza o trabalho e assim por diante. <br><br>  O HTTP / 2 teve que ser adaptado para a Web avan√ßada, pronto para uso em servi√ßos e aplicativos modernos; de fato, seria <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um substituto</a> para as vers√µes mais antigas do protocolo HTTP.  Era para aumentar o desempenho do site e reduzir a carga de back-end. <br><br><img src="https://habrastorage.org/webt/3d/yd/se/3dydsef7xody_9ws6fn41ugwrng.png"><br><br>  At√© os SEOs disseram que precisavam de HTTP / 2. <br><br><img src="https://habrastorage.org/webt/ol/sp/qb/olspqbfkum9ag0vk7tauqfiyzbq.png"><br><br>  E parecia ser muito f√°cil de apoiar.  Em particular, Neil Craig, da BBC, escreveu em seu blog que bastava "apenas ativ√°-lo" no servidor.  Voc√™ ainda pode encontrar muitas apresenta√ß√µes em que diz que o HTTP / 2 est√° inclu√≠do da seguinte maneira: se voc√™ tiver o Nginx, poder√° corrigir a configura√ß√£o em um √∫nico local;  se n√£o houver HTTPS, voc√™ tamb√©m precisar√° colocar um certificado;  mas, em princ√≠pio, √© uma quest√£o de um token no arquivo de configura√ß√£o. <br><br>  E, √© claro, depois de registrar esse token, voc√™ imediatamente come√ßa a receber b√¥nus por aumento de produtividade, novos recursos dispon√≠veis, oportunidades - em geral, tudo se torna maravilhoso. <br><br><img src="https://habrastorage.org/webt/nr/of/tf/nroftfq7qetylwplv7q8dnzzkgk.png"><br>  <sup>Links do slide:</sup> <sup><br></sup>  <sup>1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://medium.com/%40DarkDrag0nite/how-">medium.com/@DarkDrag0nite/how-http-2-reduces-server-cpu-and-bandwidth-10dbb8458feb</a></sup> <sup><br></sup>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.cloudflare.com/website-optimization/">2.www.cloudflare.com/website-optimization/http2</a></sup> <br><br>  A hist√≥ria adicional √© baseada em eventos reais.  A empresa possui algum servi√ßo online que processa cerca de 500-1000 solicita√ß√µes HTTP por segundo.  Este servi√ßo est√° sob prote√ß√£o DDoS do Cloudflare. <br><br>  Existem muitos par√¢metros de refer√™ncia que confirmam que a mudan√ßa para HTTP / 2 reduz a carga no servidor devido ao fato de que, ao mudar para HTTP / 2, o navegador estabelece n√£o 7 conex√µes, mas uma de acordo com o plano.  Esperava-se que, ao alternar para HTTP / 2, a mem√≥ria usada se tornasse menor e o processador menos carregado. <br><br>  Al√©m disso, o blog Cloudflare e o site Cloudflare sugerem a ativa√ß√£o do HTTP / 2 com apenas um clique.  Pergunta: Por que n√£o fazer isso? <br><br><img src="https://habrastorage.org/webt/ph/rt/kb/phrtkbwij6hltr_zrwhagtgisxg.png"><br><br>  Em 1 de fevereiro de 2018, a empresa inclui HTTP / 2 com este bot√£o no Cloudflare e no Nginx local tamb√©m o inclui.  Os dados do m√™s s√£o coletados.  Em 1¬∫ de mar√ßo, os recursos consumidos s√£o medidos e, em seguida, os sysops analisam o n√∫mero de solicita√ß√µes nos logs enviados via HTTP / 2 para o servidor atr√°s do Cloudflare.  O pr√≥ximo slide ser√° a porcentagem de solicita√ß√µes que chegaram ao servidor via HTTP / 2.  Levante as m√£os, quem sabe qual ser√° esse percentual? <br><br>  <i>[Da plat√©ia: "1-2%!"]</i> <br><br><img src="https://habrastorage.org/webt/be/4u/vo/be4uvovz3k3v0gsrmyiafgycz4s.png"><br><br>  Zero.  Por que raz√£o? <br><br><img src="https://habrastorage.org/webt/hz/cg/d4/hzcgd42l9dx42w_5qilkk-ikxgo.png"><br><br>  O Cloudflare, bem como outros servi√ßos de prote√ß√£o contra ataques, MSSP e servi√ßos em nuvem, operam no modo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">proxy reverso</a> .  Se em uma situa√ß√£o normal o navegador se conectar diretamente ao seu Nginx, ou seja, a conex√£o for diretamente do navegador ao seu servidor HTTP, voc√™ poder√° usar o protocolo que o navegador suporta. <br><br>  Se houver uma nuvem entre o navegador e o servidor, a conex√£o TCP de entrada ser√° encerrada na nuvem, o TLS tamb√©m ser√° encerrado l√° e a solicita√ß√£o HTTP primeiro ser√° direcionada para a nuvem, e a nuvem realmente processar√° essa solicita√ß√£o. <br><br>  A nuvem possui seu pr√≥prio servidor HTTP, na maioria dos casos o mesmo Nginx; em casos raros, √© um servidor "auto-escrito".  Este servidor analisa a solicita√ß√£o, de alguma forma a processa, consulta com caches e, por fim, forma uma nova solicita√ß√£o e a envia j√° para o servidor usando o protocolo que ele suporta. <br><br>  Todas as nuvens existentes que pretendem oferecer suporte a HTTP / 2 oferecem suporte a HTTP / 2 na lateral do navegador.  Mas n√£o o apoie do lado olhando para voc√™. <br><br><img src="https://habrastorage.org/webt/f7/ps/ds/f7psdsfavtyffzytqap4rcsvfni.png"><br><br>  Porque <br><br>  Uma resposta simples e n√£o totalmente correta: "Como na maioria dos casos eles t√™m o Nginx implantado, o Nginx n√£o pode passar o HTTP / 2 para o upstream".  Ok, bem, esta resposta est√° <i>correta</i> , mas n√£o <i>completa</i> . <br><br><img src="https://habrastorage.org/webt/h3/6g/w4/h36gw4is8zafm1kuvjb6a7xn_wc.png"><br><br>  A resposta completa nos √© dada pelos engenheiros do Cloudflare.  O fato √© que o foco da especifica√ß√£o HTTP / 2, escrita e lan√ßada em 2015, era aumentar o desempenho do navegador em casos de uso espec√≠ficos, por exemplo, para o Google. <br><br>  O Google usa suas pr√≥prias tecnologias, n√£o usa proxy reverso na frente de seus servidores de produ√ß√£o; portanto, ningu√©m pensou em proxy reverso, e √© por isso que o HTTP / 2 da nuvem para o upstream n√£o √© usado.  De fato, h√° pouco lucro, porque no modo proxy reverso, do que √© descrito no protocolo HTTP / 2, por exemplo, o Server Push n√£o √© suportado, porque n√£o est√° claro como ele deve funcionar se tivermos pipelining. <br><br>  O fato de o HTTP / 2 salvar conex√µes √© legal, mas apenas o proxy reverso as salva porque n√£o abre uma conex√£o por usu√°rio.  H√° pouco sentido em oferecer suporte ao HTTP / 2 aqui, e a sobrecarga e os problemas associados a isso s√£o grandes. <br><br><img src="https://habrastorage.org/webt/f7/-z/bv/f7-zbvczf1uvyvyep24gs5w3ju0.png"><br><br>  O que √© importante: o proxy reverso √© uma tecnologia que come√ßou a ser usada ativamente h√° cerca de 13 anos.  Ou seja, esta √© a tecnologia de meados dos anos 2000: eu fui para a escola enquanto ela j√° estava em uso.  N√£o √© mencionado no padr√£o emitido em 2015, n√£o √© suportado e o trabalho para apoi√°-lo atualmente n√£o √© realizado no grupo de trabalho httpbis na IETF. <br><br>  Este √© um exemplo dos problemas que surgem quando as pessoas come√ßam a implementar o HTTP / 2.  De fato, quando voc√™ conversa com pessoas que j√° implantaram e j√° t√™m alguma experi√™ncia com isso, ouve constantemente as mesmas palavras. <br><br><img src="https://habrastorage.org/webt/0l/jy/kc/0ljykccm1adxyk_t1rp7jku2zly.png"><br><br>  Eles foram melhor formulados por Maxim Matyukhin, do Badoo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em um post</a> no Habr√©, onde ele falou sobre como o HTTP / 2 Server Push funciona.  Ele escreveu que ficou muito surpreso com o qu√£o diferente era a intera√ß√£o dessa funcionalidade espec√≠fica com os navegadores, <i>porque ele pensava que era um recurso totalmente desenvolvido, pronto para uso na produ√ß√£o</i> .  J√° ouvi essa frase em rela√ß√£o ao HTTP / 2 muitas vezes: pens√°vamos que era um protocolo de substitui√ß√£o drop-in - ou seja, voc√™ a ativa e est√° tudo bem - por que tudo √© t√£o complicado na pr√°tica, de onde v√™m todos esses problemas e falhas? <br><br>  Vamos descobrir. <br><br><img src="https://habrastorage.org/webt/fm/li/o7/fmlio7ozq95pxvcssjradjsa8qy.png"><br><br>  Historicamente, nos tempos antigos, a arquitetura da Internet era algo assim.  N√£o havia ret√¢ngulo verde em algum momento, mas ele apareceu. <br><br>  Os seguintes protocolos foram utilizados: como estamos falando da Internet e n√£o da rede local, no n√≠vel inferior, come√ßamos com o IPv4.  Acima dele, o protocolo TCP ou UDP foi usado, mas em 90% dos casos (uma vez que 80-90% do tr√°fego na Internet √© a Web), o TCP foi o pr√≥ximo, o SSL (o qual foi substitu√≠do pelo TLS) e, acima, o hipertexto HTTP .  Gradualmente, surgiu a situa√ß√£o de que, de acordo com o plano, at√© 2020 a arquitetura da Internet deveria ter mudado radicalmente. <br><br><img src="https://habrastorage.org/webt/2p/sq/fn/2psqfnp54a19mapgwsimz1_5evq.png"><br><br>  O IPv6 est√° conosco h√° muito tempo.  O TLS foi atualizado recentemente, ainda discutiremos como isso aconteceu.  E o protocolo HTTP / 2 tamb√©m foi atualizado. <br><br>  O maravilhoso escritor de fic√ß√£o cient√≠fica nacional Vadim Panov, no ciclo dos Enclaves, tinha uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">frase</a> t√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maravilhosa</a> : ‚ÄúVoc√™ estava esperando o futuro.  Voc√™ quer um futuro?  Chegou.  Voc√™ n√£o o queria?  Chegou assim mesmo.  A √∫nica coisa que permaneceu praticamente intocada - h√° alguns anos - √© o protocolo TCP. <br><br>  As pessoas envolvidas no design da Internet n√£o puderam passar por uma flagrante injusti√ßa e decidiram lan√ßar o protocolo TCP tamb√©m. <br><br>  Ok, isso √©, claro, uma piada.  O problema n√£o √© apenas que o protocolo seja muito antigo.  Existem falhas no TCP.  Para muitos, foi especialmente preocupante o fato de o protocolo HTTP / 2 j√° estar escrito, o padr√£o de 2015 j√° estar sendo implementado, mas nem sempre ele estava trabalhando especificamente com o TCP, e seria bom colocar outro transporte sob ele, mais adequado para o que antes chamado SPDY quando essas conversas foram e, em seguida, para HTTP / 2. <br><br><img src="https://habrastorage.org/webt/2f/yf/r4/2fyfr4gnrglu6rzdjsn-3dqkxza.png"><br><br>  O protocolo decidiu ligar para o QUIC.  O QUIC √© um protocolo atualmente sendo desenvolvido para transporte.  √â baseado em UDP, ou seja, √© um protocolo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">datagrama</a> .  O primeiro rascunho do padr√£o foi lan√ßado em julho de 2016 e a vers√£o de rascunho atual ... <br><br>  <i>[Alto-falante verifica e-mails no telefone]</i> <br><br>  "... sim, ainda o dia 12". <br><br>  No momento, o QUIC ainda n√£o √© um padr√£o - ele est√° escrito ativamente.  Se n√£o me engano - n√£o escrevi no slide porque tinha medo de cometer um erro - mas na IETF 101 em Londres, foi dito que em novembro de 2018 estava planejado lan√ß√°-lo como um documento final.  √â o pr√≥prio padr√£o QUIC, porque h√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mais oito</a> documentos no grupo de trabalho. <br><br><img src="https://habrastorage.org/webt/du/5l/dv/du5ldvkxwvzhuzniontwgnmdhgy.png"><br><br>  Ou seja, ainda n√£o existe um padr√£o, mas o hype ativo j√° est√° em andamento.  Listei apenas as confer√™ncias em que estive nos √∫ltimos seis meses, nas quais houve pelo menos uma apresenta√ß√£o sobre o QUIC.  Sobre "como √© legal", "como precisamos mudar para ele", "o que fazer para os operadores", "pare de filtrar o UDP - o QUIC funcionar√° agora".  Todo esse hype vem acontecendo h√° algum tempo - eu j√° vi muitos artigos que instavam a ind√∫stria de jogos a mudar para o QUIC em vez do UDP usual. <br><br><img src="https://habrastorage.org/webt/xu/ig/y8/xuigy8cwl8gwah9vnxnnbmwvqfk.png"><br>  <sup>Links do slide:</sup> <sup><br></sup>  <sup>1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conferences.sigcomm.org/imc/2017/papers/imc17-final39.pdf</a></sup> <sup><br></sup>  <sup>2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">blog.apnic.net/2018/01/29/measuring-quic-vs-tcp-mobile-desktop</a></sup> <br><br>  Em novembro de 2017, o seguinte link apareceu na lista de discuss√£o do grupo de trabalho QUIC: o principal do whitepaper e o inferior para aqueles que acham dif√≠cil ler o whitepaper - este √© um link para o blog da APNIC com um resumo. <br><br>  Os pesquisadores decidiram comparar o desempenho do TCP e do QUIC em sua forma atual.  Para compara√ß√£o, para n√£o lidar com quem √© o culpado e onde o Windows pode ser culpado, no lado do cliente, eles usaram o Chrome para Ubuntu e tamb√©m usaram dois dispositivos m√≥veis: um Nexus e outro Samsung <i>(nota do editor: Nexus 6 e MotoG)</i> com as vers√µes Android 4 e 6 e tamb√©m lan√ßaram o Chrome. <br><br>  No lado do servidor, eles instalaram o Apache para ver como o servidor TCP funciona e, para monitorar o QUIC, extraem uma parte do c√≥digo-fonte aberto que est√° no projeto Chromium.  Os resultados de benchmark mostraram que, embora em todas as condi√ß√µes de efeito estufa o QUIC realmente supere o TCP, existem algumas pedras angulares que ele perde. <br><br><img src="https://habrastorage.org/webt/hc/wx/tz/hcwxtzorjdk-lng08zptuujvg0y.png"><br><br>  Por exemplo, a implementa√ß√£o QUIC do Google funciona significativamente pior que o TCP se a reordena√ß√£o de pacotes ocorrer na rede, ou seja, os pacotes chegarem na ordem errada em que foram enviados pelo servidor.  Em 2017-2018, na era das redes m√≥veis e sem fio, geralmente n√£o h√° garantia de que o pacote voe em princ√≠pio, sem mencionar em que ordem.  O QUIC funciona muito bem em uma rede com fio, mas quem usa uma rede com fio agora? <br><br><img src="https://habrastorage.org/webt/xa/us/vk/xausvk9tjrjrp0b6shiznlz2q34.png"><br><br>  Em geral, os desenvolvedores desse c√≥digo no Google, aparentemente, realmente n√£o gostam de telefones celulares. <br><br>  QUIC √© um protocolo implementado sobre o UDP no espa√ßo do usu√°rio.  E tamb√©m em dispositivos m√≥veis, no espa√ßo do usu√°rio.  De acordo com os resultados da medi√ß√£o, em uma situa√ß√£o normal, ou seja, ao trabalhar atrav√©s de uma rede sem fio, a implementa√ß√£o do protocolo QUIC passa 58% do tempo no Android no estado "Application Limited".  O que √© essa condi√ß√£o?  √â o estado em que enviamos alguns dados e aguardamos confirma√ß√£o.  Para compara√ß√£o, em desktops, houve um valor de cerca de 7%. <br><br>  Apenas dois casos de uso: o primeiro √© uma rede sem fio, o segundo √© um dispositivo m√≥vel;  e o QUIC funciona como TCP ou substancialmente pior.  Naturalmente, isso acabou no grupo de trabalho da IETF dedicado ao QUIC e, naturalmente, o Google reagiu a isso.  A resposta do Google foi a seguinte: <br><br><img src="https://habrastorage.org/webt/cn/0u/sn/cn0usny9sypzirgyp2conurfoby.png"><br>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mailarchive.ietf.org/arch/msg/quic/QktVML_qNDfqjIGirj4t5D0JRGE</a></sup> <br><br>  Bem, n√≥s rimos, mas na verdade √© absolutamente l√≥gico. <br><br>  Porque  Porque o design do QUIC - apesar de j√° estarmos falando sobre implementa√ß√£o na produ√ß√£o, mas - de fato, √© o experimento mais selvagem. <br><br>  Aqui est√°, digamos, um modelo ISO / OSI de sete n√≠veis.  Quem se lembra dela aqui?  Lembre-se dos n√≠veis: f√≠sico, canal, rede, transporte, algumas bobagens, algumas bobagens e aplica√ß√£o, certo? <br><br>  Sim, foi desenvolvido h√° muito tempo e, de alguma forma, viv√≠amos com esse modelo de n√≠vel.  QUIC √© um experimento para eliminar o pr√≥prio sistema de camadas da rede.  Combina criptografia, transporte e entrega confi√°vel de dados.  Tudo isso n√£o est√° na estrutura de camadas, mas na combina√ß√£o, onde cada componente tem acesso √† API de outros componentes. <br><br><img src="https://habrastorage.org/webt/cr/ar/eg/craregpu9oaxwq7vekophoklne4.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Citando um dos projetistas do</a> protocolo QUIC, Christian Guitem: "Uma das principais vantagens do QUIC, do ponto de vista arquitet√¥nico, √© a falta de uma estrutura de n√≠veis".  Temos reconhecimento, controle de fluxo, criptografia e toda a criptografia - tudo isso em um s√≥ transporte, e nossas inova√ß√µes em transporte implicam acesso a tudo isso diretamente √† API da rede, portanto, n√£o queremos uma arquitetura em camadas no QUIC. <br><br><img src="https://habrastorage.org/webt/1j/zq/2k/1jzq2k1qnrdpbz9t8imuybuzcd0.png"><br><br>  A conversa no grupo de trabalho sobre isso come√ßou devido ao fato de que, no in√≠cio de mar√ßo, outro projetista de protocolo QUIC, chamado Eric Rescorla, decidiu propor para discuss√£o uma variante na qual toda a criptografia √© removida do QUIC, em geral.  Tudo o que resta √© uma fun√ß√£o de transporte executada sobre o DTLS.  O DTLS, por sua vez, √© TLS sobre UDP; no total, verifica-se: QUIC sobre TLS sobre UDP. <br><br>  De onde veio essa oferta?  A prop√≥sito, o Rescorla escreveu um documento grande, mas n√£o se tornou um padr√£o - era um assunto para discuss√£o, porque no processo de projetar a arquitetura QUIC, no processo de testar a interoperabilidade e a implementa√ß√£o, muitos problemas surgiram.  Principalmente relacionado ao "fluxo 0". <br><br>  O que √© o fluxo 0 no QUIC?  √â a mesma id√©ia que no HTTP / 2: temos uma conex√£o; dentro dela, temos v√°rios fluxos multiplexados.  Por design QUIC, eu me lembro, a criptografia √© fornecida pelo mesmo protocolo.  Isso foi feito da seguinte maneira: um fluxo "m√°gico" n√∫mero 0 √© aberto, respons√°vel por estabelecer uma conex√£o, agitando as m√£os e a criptografia, ap√≥s o que esse fluxo 0 √© criptografado e todos os outros tamb√©m s√£o criptografados.  Com isso muitos problemas surgiram, eles est√£o listados na lista de discuss√£o, existem 10 itens, eu n√£o pararei em cada um.  Vou destacar apenas um que eu realmente gosto. <br><br><img src="https://habrastorage.org/webt/fn/93/mg/fn93mgcb8o5_34hrqqemf3zdy4k.png"><br>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.ietf.org/mail-archive/web/quic/current/msg03498.html</a></sup> <br><br>  O problema com o segmento 0, um dos quais, √© que, se estamos perdendo pacotes, precisamos reenvi√°-los.  E, ao mesmo tempo, por exemplo, no lado do servidor, a conex√£o j√° pode ser marcada como criptografada e o pacote perdido remonta ao momento em que n√£o foi criptografado.  Nesse caso, ao encaminhar, a implementa√ß√£o pode criptografar aleatoriamente pacotes. <br><br>  Mais uma vez: <br><br><img src="https://habrastorage.org/webt/2x/75/lu/2x75lujvrw2rftktfww_egfka00.png"><br><br>  <i>Criptografar aleatoriamente pacotes.</i> <br><br>  Isso √© bastante dif√≠cil de comentar, al√©m de dizer como tudo isso foi realmente projetado.  O desenvolvimento do QUIC realmente usa a abordagem ersatz-√°gil.  Ou seja, n√£o √© que algu√©m tenha escrito um padr√£o de concreto refor√ßado que possa ser lan√ßado oficialmente ap√≥s algumas itera√ß√µes.  N√£o. <br><br><img src="https://habrastorage.org/webt/fo/fr/ft/fofrfthq-wwbeld8cwbltzvc5sq.png"><br><br>  O trabalho √© o seguinte: <br>  1. O rascunho da norma inicia, por exemplo, o n√∫mero 5; <br>  2. Nas listas de discuss√£o, bem como nas reuni√µes da IETF - tr√™s partes por ano - √© realizada uma discuss√£o, em seguida, a implementa√ß√£o √© realizada em hackathons, testes de interoperabilidade e coleta de feedback; <br>  3. O Google implementa algumas das altera√ß√µes no Chrome, em sua pr√≥pria infraestrutura, analisa as consequ√™ncias e, em seguida, o contador √© incrementado e o padr√£o 6 √© exibido. <br><br>  Agora, eu lembro, vers√£o 12. <br>  <i>Nota</i>  <i>Ed.: Em 10 de julho de 2018, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">j√°</a> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o 13¬∫.</a></i> <br><br>  O que √© importante aqui? <br><br>  Em primeiro lugar, acabamos de ver os contras, mas h√° vantagens.  De fato, voc√™ pode participar desse processo.  O feedback √© coletado de todas as partes envolvidas: se voc√™ est√° envolvido em jogos, se acha que na ind√∫stria de jogos pode simplesmente mudar e alterar o UDP, configure o QUIC e tudo funcionar√° - n√£o, n√£o funcionar√°.  Mas, no momento em que voc√™ pode influenci√°-lo, de alguma forma pode trabalhar com ele. <br><br><img src="https://habrastorage.org/webt/bk/vs/9w/bkvs9waujdp6yk4mqqmjskuinsq.png"><br><br>  E isso √©, de fato, uma hist√≥ria comum.  O seu feedback √© esperado, todo mundo quer v√™-lo. <br><br>  O Google est√° desenvolvendo um protocolo, colocando algumas id√©ias nele - para seus pr√≥prios prop√≥sitos.  Empresas que fazem outras coisas (se isso n√£o √© t√≠pico da Web, jogos ou aplicativos m√≥veis, SEO √© o mesmo), eles n√£o podem, por padr√£o, esperar que o protocolo leve em considera√ß√£o seus interesses: n√£o apenas porque n√£o interessa a ningu√©m, mas porque ningu√©m sabe sobre esses interesses. <br><br>  Ali√°s, √© uma confiss√£o.  Obviamente, a pergunta √© para mim por que n√≥s, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Qrator Labs</a> , em particular, n√£o participamos do desenvolvimento do protocolo HTTP / 2 e n√£o falamos a ningu√©m sobre proxy reverso.  Mas o mesmo Cloudflare e Nginx tamb√©m n√£o participaram l√°. <br><br>  Embora a ind√∫stria n√£o esteja envolvida nisso, Google, Facebook, algumas outras empresas e <i>acad√™micos</i> est√£o se desenvolvendo.  Para que voc√™ saiba, no partido pr√≥ximo √† IETF, a palavra "acad√™mico" n√£o √©, digamos, louv√°vel.  Soa como os ep√≠tetos "esquizofr√™nico" e "hipocondr√≠aco".  As pessoas costumam chegar sem objetivos pr√°ticos, sem entender as tarefas reais, mas se encaixam, porque √© mais f√°cil obter uma disserta√ß√£o de doutorado. <br><br>  Obviamente, √© preciso participar disso e n√£o h√° outras op√ß√µes. <br><br><img src="https://habrastorage.org/webt/bo/ab/qb/boabqbmiii9bpbkmep16tfjz4qm.png"><br><br>  Voltando ao QUIC: ent√£o, o protocolo √© implementado no espa√ßo do usu√°rio, em dispositivos m√≥veis h√° ... Bl√° bl√°.  "Implementado no espa√ßo do usu√°rio."  Vamos conversar sobre isso. <br><br>  Como geralmente organizamos o transporte antes de criarmos o QUIC?  Como funciona agora na produ√ß√£o?  Existe um protocolo TCP se estivermos falando sobre a Web. <br><br><img src="https://habrastorage.org/webt/ok/bx/gg/okbxggq9x80u5wndpya6q6romhs.png"><br><br>  No TCP, existe um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aperto de m√£o triplo</a> : SYN, SYN / ACK, ACK.  √â necess√°rio para v√°rias coisas: impedir que o servidor seja usado para atacar outras pessoas, filtrar com √™xito determinados ataques no protocolo TCP, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">inunda√ß√£o SYN</a> .  Somente ap√≥s a passagem de tr√™s segmentos do handshake triplo, come√ßamos a enviar dados. <br><br><img src="https://habrastorage.org/webt/fz/0u/_w/fz0u_wzp2ewwigidhg7fbsuiqgc.png"><br><br>  Ao mesmo tempo, existem 4 a√ß√µes, 3 das quais ocorrem no kernel, elas ocorrem com bastante efici√™ncia e os dados j√° entram no espa√ßo do usu√°rio quando a conex√£o √© estabelecida. <br><br><img src="https://habrastorage.org/webt/j0/ln/sf/j0lnsfcpk0gjosep7zgr6l6xh3m.png"><br><br>  Na situa√ß√£o com QUIC, toda essa felicidade est√° no espa√ßo do usu√°rio.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Existe um asterisco aqui, porque a terminologia n√£o √© exatamente ‚ÄúSYN, SYN / ACK‚Äù, mas, de fato, esse √© o mesmo handshake, apenas movido completamente para o espa√ßo do usu√°rio. </font><font style="vertical-align: inherit;">Se 20 Gbit / s de flooding voam e antes no TCP, eles poderiam ser processados ‚Äã‚Äãno kernel com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cookies SYN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , agora eles precisam ser processados ‚Äã‚Äãno espa√ßo do usu√°rio, pois passam pelo kernel inteiro por todas as altern√¢ncias de contexto. </font><font style="vertical-align: inherit;">E a√≠ eles precisam ser apoiados de alguma forma. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que isso √© feito? </font><font style="vertical-align: inherit;">Por que o QUIC √© um protocolo de espa√ßo do usu√°rio? </font><font style="vertical-align: inherit;">Embora o transporte, ao que parece, seja o pr√≥prio lugar para ele em algum lugar no n√≠vel do sistema.</font></font><br><br><img src="https://habrastorage.org/webt/bu/qm/t_/buqmt_x8oimytiwlu8vjovzg_rk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Porque, novamente, esse √© o interesse do Google e de outros membros da equipe. Eles querem ver o novo protocolo implementado, n√£o querem esperar at√© que todos os sistemas operacionais no distrito sejam atualizados. Se for implementado no espa√ßo do usu√°rio, poder√° ser usado (em particular, no navegador, mas n√£o apenas) agora. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O fato de voc√™ precisar gastar muitos recursos no lado do servidor n√£o √© um problema para o Google. Em algum lugar, havia um bom ditado: para resolver a maioria dos problemas de desempenho no back-end da Internet moderna, o Google s√≥ precisa confiscar metade dos servidores (e de prefer√™ncia tr√™s quartos). O que n√£o deixa de ter bom senso, porque o Google, de fato, n√£o √© trocado por essas ninharias. </font></font><br><br><img src="https://habrastorage.org/webt/3w/3p/xw/3w3pxwqxaykeroltwvczktrtyxm.png"><br> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.ietf.org/mail-archive/web/quic/current/msg03736.html</font></font></a></sup> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na tela, h√° uma cita√ß√£o literal da lista de discuss√£o QUIC, onde a discuss√£o era sobre apenas que o protocolo est√° planejado para implementa√ß√£o no espa√ßo do usu√°rio. Esta √© uma cita√ß√£o literal: ‚ÄúQueremos implantar o QUIC em qualquer m√°quina sem o suporte do sistema operacional. Se algu√©m tiver problemas de desempenho, levar√° tudo ao essencial. ‚Äù O QUIC j√° √© t√£o flex√≠vel que √© assustador levar isso ao n√∫cleo com criptografia e tudo mais, mas o grupo de trabalho sobre esse assunto tamb√©m n√£o est√° particularmente preocupado.</font></font><br><br><img src="https://habrastorage.org/webt/2i/6d/yn/2i6dynbascfqen9tmbpzyb4i_ds.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E por que essa abordagem √© usada no lado do cliente - eu posso entender. Mas a mesma abordagem √© usada no lado do servidor. Teoricamente, nesse caso, o QUIC realmente valeria a pena ser levado ao cerne, mas, novamente, o trabalho sobre isso n√£o est√° em andamento e, quando terminar, teremos cabelos grisalhos na melhor das hip√≥teses, e n√£o pretendo viver para sempre. E quando isso acontece - n√£o √© muito claro. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falando sobre o kernel Linux, n√£o se pode deixar de mencionar que uma das principais raz√µes para a exist√™ncia do QUIC foi que ele foi implementado sobre o protocolo UDP leve e, por isso, funciona com mais efici√™ncia, rapidez ... e, em geral, por que precisamos do TCP, que √© t√£o grande e volumoso. </font></font><br><br><img src="https://habrastorage.org/webt/e_/bn/6u/e_bn6u06vaxneecv1kacdlvnsba.png"><br> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vger.kernel.org/netconf2017_files/rx_hardening_and_udp_gso.pdf</font></font></a></sup> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui est√° outro link para o benchmark. Acontece que enviar datagramas UDP para Linux √© mais caro do que enviar um fluxo TCP, muito mais caro, muito mais caro. Existem 2 pontos principais (ou seja, muitos pontos, mas apenas dois pontos principais): </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. A pesquisa na tabela de roteamento leva mais tempo no caso de um datagrama UDP; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Uma pe√ßa chamada "descarga de grande segmento". No TCP, podemos simplesmente fazer upload de um grande fluxo de dados na transmiss√£o, n√£o precisamos dividi-lo em segmentos na CPU, enquanto no UDP precisamos preparar cada datagrama, n√£o temos um fluxo. No momento, os desenvolvedores do kernel pensam no que fazer com ele, mas, em geral, o TCP trabalha no envio de grandes dados que n√£o cabem em um pacote, mais eficientes que o UDP, no qual o QUIC √© baseado.</font></font><br><br><img src="https://habrastorage.org/webt/0y/z7/ng/0yz7ngnso7rnfcu1-rgzixaarje.png"><br> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.ietf.org/mail-archive/web/quic/current/msg03720.html</font></font></a></sup> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esta √© novamente uma cita√ß√£o de um funcion√°rio do Google, em particular eu tamb√©m fiz essa pergunta. Afinal, podemos apenas culpar o Linux, dizer que no Windows, talvez tudo n√£o seja t√£o ruim, mas n√£o. Alega-se que em qualquer plataforma na qual o Google implantou o QUIC, h√° um problema com o aumento do custo (do ponto de vista do processador central) do envio de um pacote UDP contra um fluxo TCP. Ou seja, n√£o √© apenas o Linux assim, mas uma abordagem geral.</font></font><br><br><img src="https://habrastorage.org/webt/jd/ht/rs/jdhtrssfidxdzt5gnl_ib3w2n8a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que nos leva a um pensamento simples.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pare de falar sobre o QUIC. Chega. A id√©ia simples de sair daqui √© que antes de implementar qualquer novo protocolo em vez do antigo: HTTP / 2 vs. HTTP / 1.1, QUIC em vez de TCP, criptografia DNS, IPv6 em vez de IPv4 ... a primeira coisa a fazer antes de decidir e definir na produ√ß√£o √©, obviamente, benchmarking. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o acredite em ningu√©m que diga que o protocolo ‚Äúvoc√™ pode simplesmente mudar / ativar / pressionar o bot√£o‚Äù - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! Isso nunca vai acontecer - e nunca foi e nunca ser√° no futuro, e ningu√©m garante isso. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, apenas uma refer√™ncia e, √© claro, que se voc√™ n√£o fizer isso, mas simplesmente implantar algo, ent√£o, √© claro, ningu√©m fornecer√° a voc√™ uma garantia de trabalho de qualidade.</font></font><br><br><img src="https://habrastorage.org/webt/se/h7/bs/seh7bsb43c8clkqq-2yckkzmxaa.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A prop√≥sito, sobre IPv6. O fato √© que nos dias do IPv6, quando foi desenvolvido, os protocolos foram desenvolvidos de uma maneira um pouco mais direta, ou seja, sem tecnologias √°geis. Mas a adapta√ß√£o deles na Internet ainda levou um tempo substancial muito grande. E, no momento, ainda est√° em andamento, e ainda est√° pendendo de 10 a 20% no caso do IPv6. Al√©m disso, dependendo do pa√≠s, porque na R√∫ssia √© ainda mais baixo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No caminho para implementar o IPv6, muitos problemas foram resolvidos. Quem sabe o que s√£o os globos oculares felizes? Em geral, havia muitos problemas associados ao IPv6, al√©m disso, quando os usu√°rios ativos reclamavam. Digamos que voc√™ feche seu laptop, saia de casa onde voc√™ tem IPv6, v√° ao caf√© onde n√£o h√° IPv6, abra o laptop - nada funciona, porque os caches do navegador e do sistema operacional continuam a olhar para o IPv6, mas n√£o h√° conectividade local . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma abordagem chamada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúHappy Eyeballs‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tamb√©m um padr√£o emitido pela IETF) </font><font style="vertical-align: inherit;">foi inventada </font><font style="vertical-align: inherit;">: se em 0,3 segundos n√£o encontrarmos conectividade IPv6, n√£o conseguiremos conectar, reverteremos para o IPv4.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma muleta, mas parece funcionar quase sempre, mas! Problemas m√≠sticos com a implementa√ß√£o surgem constantemente. Em particular, por algum motivo, um dos problemas mais populares foi com o iPad, que passou do IPv6 para o IPv4 e volta muito mais devagar do que em 0,3 segundos: cerca de 1 segundo ou at√© 1 minuto. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesmo em algum momento, uma oferta maluca surgiu na IETF 99 em Praga: "Deixe o Happy Eyeballs estar em cada rede via syslog para um servidor centralizado, se os problemas enviarem alguma coisa". Colete o syslog de todos os dispositivos conectados - √© claro, ningu√©m concordou com isso. Mas isso √© um indicador de que existem muitos problemas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outros problemas s√£o a luta contra todos os tipos de atividades maliciosas, porque a rede local no IPv6 √© / 64 e existem muitos endere√ßos pelos quais um invasor pode come√ßar a classificar, a prote√ß√£o precisa agreg√°-los a tempo e tudo mais. √â necess√°rio lidar de alguma forma com isso, tudo isso deve ser realizado.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, ainda temos problemas de implementa√ß√£o, que n√£o s√£o apenas expressos no fato de algu√©m estar implementando lentamente o IPv6. N√£o, eles come√ßaram a deslig√°-lo novamente. Volte para o IPv4. Porque mesmo sem problemas, era dif√≠cil justificar os benef√≠cios da transi√ß√£o para o gerenciamento, mas se, ap√≥s a ativa√ß√£o, os usu√°rios tamb√©m come√ßaram a reclamar, isso √© tudo. Esse √© um exemplo quando mesmo um protocolo desenvolvido com vista √† implementa√ß√£o ainda causa os problemas mais graves da implementa√ß√£o, expressos em uma lavagem de cabe√ßa ao departamento t√©cnico. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagine o que acontecer√° ao implementar protocolos que n√£o foram projetados para implementa√ß√£o em larga escala em seus respectivos casos de uso. </font></font><br><br><img src="https://habrastorage.org/webt/s5/n5/uh/s5n5uh4bv7i9rzunpqd1o3xwug4.png"><br> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog.apnic.net/2018/02/26/peak-dnssec</font></font></a></sup> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro exemplo sobre este t√≥pico √© DNSSEC. N√£o pedirei que levante a m√£o para descobrir quem a possui, porque sei que ningu√©m a possui. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A implanta√ß√£o do IPv6, por um lado, est√° desenvolvendo, por outro lado, h√° problemas, mas pelo menos est√° chegando. Desde o final do ano passado, a implementa√ß√£o do DNSSEC no mundo diminuiu e foi na dire√ß√£o oposta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste gr√°fico, vemos o n√∫mero di√°rio de usu√°rios da Internet (medido pelo APNIC Labs) usando resolvedores que validam o DNSSEC. Uma tend√™ncia de baixa √© muito claramente vis√≠vel aqui: aqui come√ßa ap√≥s o √∫ltimo pico, e este pico √© em outubro de 2016. O </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNSSEC tem um objetivo, tem as tarefas corretas, mas sua implanta√ß√£o realmente parou e algum tipo de processo reverso foi iniciado e continua a ser investigado. de onde veio esse processo.</font></font><br><br><img src="https://habrastorage.org/webt/3a/8j/lt/3a8jlt3wvd7k30ocp7emjkvbwoi.png"><br> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datatracker.ietf.org/meeting/101/materials/slides-101-dnsop-sessa-the-dns-camel-01</font></font></a></sup> <br><br><a name="dns-camel"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em geral, h√° muitos problemas com o DNS. </font><font style="vertical-align: inherit;">O grupo de trabalho </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dnsop da</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> IETF </font><font style="vertical-align: inherit;">agora tem 3 presidentes, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15 rascunhos do que √© chamado de "em voo"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : eles est√£o se preparando para o lan√ßamento como uma RFC. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O DNS, em particular, aprendeu a transferir em cima de tudo. </font><font style="vertical-align: inherit;">Al√©m do TCP, funcionou por muito tempo (mas as pessoas ainda precisam mostrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como faz√™-lo corretamente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Agora eles come√ßaram a execut√°-lo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por TLS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://datatracker.ietf.org/doc/draft-ietf-doh-dns-over-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QUIC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tudo isso parecia absolutamente maravilhoso at√© que as pessoas come√ßaram a perceber isso e n√£o come√ßaram a doer no quinto ponto. </font><font style="vertical-align: inherit;">Em mar√ßo de 2017, os desenvolvedores do OpenDNS trouxeram uma </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">apresenta√ß√£o chamada ‚ÄúDNS Camel‚Äù</font></a><font style="vertical-align: inherit;"> para a IETF</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou "camel dns". A apresenta√ß√£o se resume ao seguinte pensamento: quanto mais podemos carregar esse camelo (tamb√©m conhecido como protocolo DNS) antes que o pr√≥ximo galho quebre sua espinha? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essa √© uma abordagem geral de como vemos o design agora. Recursos s√£o adicionados, existem muitos recursos, eles </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interferem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entre si de </font><font style="vertical-align: inherit;">maneiras diferentes. E nem sempre de uma maneira previs√≠vel, e nem sempre os autores da implementa√ß√£o compreendem todos os poss√≠veis pontos de interfer√™ncia. Implementa√ß√£o de cada um desses novos recursos, implementa√ß√£o, implementa√ß√£o na produ√ß√£o - adicione um conjunto de pontos de falha em potencial em todos os lugares em que essa interfer√™ncia ocorre. Sem uma refer√™ncia, sem monitoramento - em lugar nenhum.</font></font><br><br><img src="https://habrastorage.org/webt/0z/0l/hw/0z0lhwxtte2bzqnlpbkfpgeqkv8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que √© importante participar de todo esse processo? Porque o padr√£o IETF - "RFC" - ainda √© um padr√£o. Existem estat√≠sticas t√£o boas: cronogramas de desenvolvimento para v√°rias vers√µes dos protocolos de criptografia SSL e TLS. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observe que o versionamento do SSL come√ßa no n√∫mero 2, porque as vers√µes 0.9 e 1.0 nunca foram lan√ßadas na produ√ß√£o, eram mais vazias do que o Netscape podia dar ao luxo de lan√ßar. Portanto, a hist√≥ria come√ßou com o protocolo SSL 2.0, que foi desenvolvido por ano. Em seguida, o SSL 3.0 foi desenvolvido mais um ano. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em seguida, o TLS 1.0 foi desenvolvido por 3 anos; vers√£o 1.1 - 7 anos; 1.2 foi desenvolvido apenas 2 anos, porque n√£o houve grandes mudan√ßas; mas a √∫ltima vers√£o, lan√ßada em mar√ßo deste ano - a 27¬™ vers√£o, a prop√≥sito - foi desenvolvida </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 anos</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No grupo de trabalho correspondente, em algum momento houve um grande p√¢nico nesse t√≥pico, porque o TLS 1.3 estava quebrando muitos casos de uso, principalmente em organiza√ß√µes financeiras, com monitoramento e firewalls. Mas mesmo grandes empresas como o US Bank n√£o puderam mudar isso, tendo chegado a uma conclus√£o j√° na fase do d√©cimo oitavo rascunho. Eles n√£o tiveram tempo para fazer nada a respeito, porque quando voc√™ chega √† festa no momento em que todos j√° recebem a conta, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voc√™ n√£o pode esperar que sua proposta de continuar a divers√£o seja tratada com compreens√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, se em algum protocolo - isso √© novamente uma quest√£o de feedback - houver / haver√° / houver recursos que n√£o lhe conv√™m, a √∫nica op√ß√£o √© rastrear isso no tempo e intervir no tempo, porque, caso contr√°rio, ser√° liberado e tem que construir muletas em torno disso. </font></font><br><br><img src="https://habrastorage.org/webt/yq/k0/vv/yqk0vvl02q3gukrk9qymnqm90rk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui no slide, de fato, h√° tr√™s conclus√µes principais de todo o processo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro: como eu disse, a introdu√ß√£o de um novo protocolo n√£o √© f√°cil na configura√ß√£o "tweak something". Este √© um plano de implementa√ß√£o planejado, uma avalia√ß√£o de adequa√ß√£o com refer√™ncias obrigat√≥rias, pois, na realidade, tudo se comportar√°. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ponto n√∫mero dois: os protocolos n√£o s√£o desenvolvidos por alien√≠genas, eles n√£o nos s√£o fornecidos de cima, voc√™ pode e deve participar desse processo, porque ningu√©m promover√° seus casos de usu√°rio para voc√™.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E a terceira, realmente: √© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">necess√°rio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> feedback </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O mais importante √© que o pr√≥prio Google, n√£o √© mau, apenas persegue seus pr√≥prios objetivos, n√£o tem tarefa de desenvolver um protocolo para voc√™ e para voc√™, apenas voc√™ pode faz√™-lo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, no caso geral, a introdu√ß√£o de algo novo em vez de antigo, apesar do n√∫mero de artigos elogiosos em blogs, come√ßa com o fato de que voc√™ precisa investir n√£o apenas na implanta√ß√£o, mas no processo de design do protocolo, veja como ele funciona, e s√≥ ent√£o tome uma decis√£o informada.</font></font><br><br>  Obrigada </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt416633/">https://habr.com/ru/post/pt416633/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt416621/index.html">Homo Extensis. Expandir as capacidades humanas ou como combinar humano e rob√¥</a></li>
<li><a href="../pt416623/index.html">A objetividade da psicoterapia</a></li>
<li><a href="../pt416625/index.html">Novo sistema de reconhecimento facial instalado pela pol√≠cia de Londres n√£o reconhece ningu√©m</a></li>
<li><a href="../pt416627/index.html">Gerenciamento do transportador de TI, ou L√° e volta</a></li>
<li><a href="../pt416629/index.html">RabbitMQ vs. Kafka: Duas Abordagens Diferentes de Mensagens</a></li>
<li><a href="../pt416635/index.html">Da direita para a esquerda. Como ativar a interface do site em RTL</a></li>
<li><a href="../pt416637/index.html">M√∫sica de papel e papel√£o: uma breve hist√≥ria do variofone e do ‚Äúsom desenhado‚Äù</a></li>
<li><a href="../pt416639/index.html">Entrevista com um pioneiro do rejuvenescimento</a></li>
<li><a href="../pt416641/index.html">8 etapas do processo de desenvolvimento de uma interface de aplicativo m√≥vel</a></li>
<li><a href="../pt416643/index.html">Implantando o Elasticsearch na AWS com o Kubernetes em 10 etapas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>