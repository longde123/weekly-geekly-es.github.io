<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜🏽 🧥 🎞️ Bibliothèque JavaScript Webix vue par un débutant. Partie 2. Travailler avec des formulaires 👩🏻‍💻 ✉️ 📏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je suis un développeur front-end débutant. Maintenant, j'étudie et je m'entraîne dans une entreprise informatique de Minsk. L'apprentissage des bases ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bibliothèque JavaScript Webix vue par un débutant. Partie 2. Travailler avec des formulaires</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484310/"><img src="https://habrastorage.org/webt/fu/sm/m3/fusmm34sg2nauzjdqk_lznmcjso.png"><br><br>  Je suis un développeur front-end débutant.  Maintenant, j'étudie et je m'entraîne dans une entreprise informatique de Minsk.  L'apprentissage des bases de web-ui a lieu avec la bibliothèque <a href="https://webix.com/" rel="nofollow">Webix</a> JS à titre d' <a href="https://webix.com/" rel="nofollow">exemple</a> et je veux partager ma modeste expérience et l'enregistrer comme un petit tutoriel pour cette intéressante bibliothèque d'interface utilisateur. <br><a name="habracut"></a><br><h3>  Deuxième tâche </h3><br>  Dans la dernière <a href="https://habr.com/ru/post/483558/">mission,</a> j'ai créé une page en utilisant la bibliothèque Webix.  Et maintenant, je dois définir la logique suivante pour l'interaction de l'utilisateur avec le formulaire: <br><br><ul><li>  <a href="https://docs.webix.com/api__values_getvalues.html" rel="nofollow">lire</a> et <a href="https://docs.webix.com/desktop__data_validation.html" rel="nofollow">valider le</a> formulaire; </li><li>  <a href="https://docs.webix.com/api__values_clear.html" rel="nofollow">nettoyage de moisissures</a> ; </li><li>  <a href="https://docs.webix.com/api__link__ui.proto_click_config.html" rel="nofollow">traitement des clics sur les boutons</a> ; </li><li>  <a href="https://docs.webix.com/desktop__message_boxes.html" rel="nofollow">messages interactifs</a> et <a href="https://docs.webix.com/api___confirm.html" rel="nofollow">fenêtres de confirmation</a> ; </li><li>  <a href="https://docs.webix.com/api__link__ui.proto_add.html" rel="nofollow">Ajoutez des données de</a> formulaire à la table. </li></ul><br>  Le widget principal avec lequel l'article fonctionnera est le <b>formulaire</b> .  De plus, il peut être lu dans la <a href="https://docs.webix.com/desktop__form.html" rel="nofollow">documentation</a> . <br><br>  Vous pouvez télécharger le <a href="https://github.com/sashko-web/webix/tree/master/Webix%2520first%2520task" rel="nofollow">lien</a> source. <br><br>  L'application de démonstration qui en résulte peut être trouvée <a href="https://snippet.webix.com/17w1dodb" rel="nofollow">ici</a> . <br><br><h3>  Étape 1. Ajout de nouvelles données à la table. </h3><br>  Pour la commodité de lire le code et de diviser le projet en blocs logiques, je vais créer un fichier functions.js et indiquer le chemin d'accès dans le fichier index.html.  J'y définirai les fonctions responsables du comportement de l'application. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"functions.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"script.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Dans le nouveau fichier, je crée la fonction <b>addItem</b> , qui ajoute de nouvelles données à la table: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addItem = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item_data = $$(<span class="hljs-string"><span class="hljs-string">"film_form"</span></span>).getValues(); $$(<span class="hljs-string"><span class="hljs-string">"film_list"</span></span>).add(item_data); }</code> </pre><br>  Pour accéder à un élément de la bibliothèque Webix, utilisez <b>la méthode $$</b> , dans laquelle l'ID d'élément est passé.  Dans le code ci-dessus, le formulaire est accessible à l'aide de la construction <code><b>$$("film_form")</b></code> . <br><blockquote>  La fonction <i>addItem</i> fonctionne comme suit: j'obtiens les données actuelles du formulaire via sa <a href="https://docs.webix.com/api__values_getvalues.html" rel="nofollow">méthode getValues</a> et je les <b>écris dans la</b> variable <b>item_data</b> .  En utilisant ces données, je crée un nouvel enregistrement dans la feuille en <a href="https://docs.webix.com/api__link__ui.proto_add.html" rel="nofollow">utilisant la méthode add</a> . <br></blockquote><br>  Pour appeler cette fonction en cliquant sur le widget <code><b>"button"</b></code> avec la valeur <code>"Add new"</code> je définis la propriété <a href="https://docs.webix.com/api__link__ui.proto_click_config.html" rel="nofollow">click</a> . <br><br><pre> <code class="javascript hljs">margin:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">cols</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_add"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Add new"</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>:<span class="hljs-string"><span class="hljs-string">"webix_primary"</span></span>, <span class="hljs-attr"><span class="hljs-attr">click</span></span>:addItem}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_clear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Clear"</span></span>} ]</code> </pre><br>  Par conséquent, les données du formulaire doivent être ajoutées au tableau: <br><img src="https://habrastorage.org/webt/dw/3j/sc/dw3jsclc_mapg-xxeifw5velyju.png"><br><br><h3>  Étape 2. Validation du formulaire.  Message contextuel </h3><br>  Avant d'ajouter de nouvelles données, les informations des champs de saisie doivent être vérifiées (validées).  La validation est déclenchée <a href="https://docs.webix.com/desktop__data_validation.html" rel="nofollow">par la méthode validate ()</a> , que j'appellerai à l'intérieur de la fonction <b>addItem</b> immédiatement avant de travailler avec les données.  Je mettrai également ici le code d'un message contextuel sur une validation réussie. <br><br>  Un simple message dans Webix est créé par la fonction <a href="https://docs.webix.com/desktop__message_boxes.html" rel="nofollow">webix.message ()</a> , qui prend le texte du message comme paramètre.  Un message apparaîtra dans le coin supérieur droit. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addItem = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($$(<span class="hljs-string"><span class="hljs-string">"film_form"</span></span>).validate()){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item_data = $$(<span class="hljs-string"><span class="hljs-string">"film_form"</span></span>).getValues(); $$(<span class="hljs-string"><span class="hljs-string">"film_list"</span></span>).add(item_data); webix.message(<span class="hljs-string"><span class="hljs-string">"Validation is successful!"</span></span>); } }</code> </pre><br><blockquote>  La fonction fonctionne comme ceci.  Dans la condition <b>If</b> , nous accédons au formulaire et appelons la méthode <b>validate ()</b> .  Si le test réussit, la méthode renvoie true et le code est exécuté plus loin.  Après avoir ajouté des données à la table, une fonction est appelée avec le message - <code>"Validation is successful!"</code>  . <br></blockquote><br>  Message contextuel: <br><img src="https://habrastorage.org/webt/cv/0r/nj/cv0rnj0qoulwycax8bg-zqfnqd8.png"><br><br>  Maintenant, je dois créer un objet de <a href="https://docs.webix.com/desktop__data_validation.html" rel="nofollow">règles</a> dans <i>le</i> widget de <i>formulaire</i> .  Il est nécessaire que la fonction <b>validate ()</b> vérifie la conformité des informations de tous les champs du formulaire avec les critères spécifiés. <br><br>  Les conditions d'une validation réussie seront les suivantes: <br><ul><li>  Le champ de titre ne doit pas être vide; </li><li>  L'année sur le terrain ne doit pas être inférieure à 1970 et supérieure à l'année en cours; </li><li>  le champ Rating ne doit pas être nul; </li><li>  Le champ des votes doit être supérieur à 1 et inférieur à 1 000 000. </li></ul><br>  Ensuite, le code source du widget de <i>formulaire</i> avec des règles de validation sera comme ceci: <br><br><pre> <code class="javascript hljs">view:<span class="hljs-string"><span class="hljs-string">"form"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"film_form"</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">350</span></span>, <span class="hljs-attr"><span class="hljs-attr">elements</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">type</span></span>:<span class="hljs-string"><span class="hljs-string">"section"</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>:<span class="hljs-string"><span class="hljs-string">"EDIT FILMS"</span></span>}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Title"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Must be filled in"</span></span>}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Year"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Should be between 1970 and current"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"rating"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Rating"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Cannot be empty or 0"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"votes"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Votes"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Must be less than 100000"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">margin</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">cols</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_add"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Add new"</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>:<span class="hljs-string"><span class="hljs-string">"webix_primary"</span></span>, <span class="hljs-attr"><span class="hljs-attr">click</span></span>:addItem}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_clear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Clear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">click</span></span>:clearForm} ] }, {} ], <span class="hljs-attr"><span class="hljs-attr">rules</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: webix.rules.isNotEmpty, rating(value){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(webix.rules.isNumber(value)){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }, votes(value){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value &lt; <span class="hljs-number"><span class="hljs-number">1000000</span></span> &amp;&amp; value &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; }, year(value){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value&gt;=<span class="hljs-number"><span class="hljs-number">1970</span></span> &amp;&amp; value &lt;= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getFullYear(); } }</code> </pre><br>  Les propriétés de l'objet règles doivent correspondre aux valeurs du <code><b>name: "…"</b></code> propriété <code><b>name: "…"</b></code> des éléments du formulaire.  Les <a href="https://docs.webix.com/desktop__data_validation.html" rel="nofollow">règles prédéfinies</a> webix.rules.isNotEmpty et webix.rules.isNumber sont définies dans les propriétés title, rating et votes, l'année où une fonction définit <a href="https://docs.webix.com/desktop__data_validation.html" rel="nofollow">les règles utilisateur</a> . <br><br>  Les règles doivent renvoyer true en cas de succès et false en cas d'erreur.  Le formulaire passe la validation lorsque toutes les propriétés de l'objet règles retournent true.  Sinon, les champs dont la validation échoue seront surlignés en rouge. <br><br>  Résultat du test: <br><img src="https://habrastorage.org/webt/zs/cy/cx/zscycxjvs2jnjc6suvf7lls2-im.png"><br><br><h3>  Étape 3. Message d'erreur </h3><br>  Les règles sont définies, j'ai maintenant besoin d'un mécanisme pour afficher un message d'erreur pour informer l'utilisateur que les données saisies ne répondent pas aux critères spécifiés.  Pour ce faire, vous pouvez mettre en surbrillance le champ en rouge et ajouter un message d'erreur. <br><br>  Les champs peuvent avoir la propriété <a href="https://docs.webix.com/api__link__ui.texthighlight_invalidmessage_config.html" rel="nofollow">invalidMessage définie</a> ; sa valeur est le texte avec le message d'erreur.  Ce message apparaîtra sous le champ si la validation échoue. <br><br>  Code: <br><pre> <code class="javascript hljs">elements:[ { <span class="hljs-attr"><span class="hljs-attr">type</span></span>:<span class="hljs-string"><span class="hljs-string">"section"</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>:<span class="hljs-string"><span class="hljs-string">"EDIT FILMS"</span></span>}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Title"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Must be filled in"</span></span>}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Year"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Should be between 1970 and current"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"rating"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Rating"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Cannot be empty or 0"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"votes"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>:<span class="hljs-string"><span class="hljs-string">"Votes"</span></span>, <span class="hljs-attr"><span class="hljs-attr">invalidMessage</span></span>:<span class="hljs-string"><span class="hljs-string">"Must be less than 100000"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">margin</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">cols</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_add"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Add new"</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>:<span class="hljs-string"><span class="hljs-string">"webix_primary"</span></span>, <span class="hljs-attr"><span class="hljs-attr">click</span></span>:addItem}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_clear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Clear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">click</span></span>:clearForm} ] }, {} ]</code> </pre><br>  Résultat: <br><img src="https://habrastorage.org/webt/t9/l0/kd/t9l0kdtmzyg4jezz03ta-vjkctq.png"><br><br><h3>  Étape 4. Nettoyage du formulaire </h3><br>  Pour effacer le formulaire, vous devez créer une fonction appelée par le bouton <code>"Clear"</code> .  Elle est également responsable de la sortie d'un message d'avertissement et, en cas de réponse positive, elle effacera les données saisies et réinitialisera l'indication d'erreur. <br><br>  Message d'avertissement: <br><img src="https://habrastorage.org/webt/ck/yq/nd/ckyqnddkxn5e2ru_dekxv3r6z-e.png"><br><br>  Je vais appeler la fonction <b>clearForm</b> et y écrire le code suivant: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearForm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ webix.confirm({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>:<span class="hljs-string"><span class="hljs-string">"All data will be lost!"</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>:<span class="hljs-string"><span class="hljs-string">"Are you sure?"</span></span> }).then( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { $$(<span class="hljs-string"><span class="hljs-string">"film_form"</span></span>).clear(); $$(<span class="hljs-string"><span class="hljs-string">"film_form"</span></span>).clearValidation(); } )};</code> </pre><br>  La méthode de rappel <a href="https://docs.webix.com/api___confirm.html" rel="nofollow">webback.confirm ({...})</a> est utilisée pour la fenêtre de confirmation, qui accepte un objet avec les propriétés suivantes: <b>texte</b> et <b>titre</b> .  Puisque la méthode renvoie promesse, je peux utiliser le gestionnaire <b>.then</b> .  Si la réponse est oui, dans le gestionnaire .then, j'appellerai deux méthodes: clear () - pour effacer les champs du formulaire et clearValidation (), qui supprime les étiquettes d'erreur de validation. <br><br>  La dernière action consiste à lier l'appel de fonction au bouton <code>"Clear"</code> . <br><br><pre> <code class="javascript hljs">margin:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">cols</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_add"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Add new"</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>:<span class="hljs-string"><span class="hljs-string">"webix_primary"</span></span>, <span class="hljs-attr"><span class="hljs-attr">click</span></span>:addItem}, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>:<span class="hljs-string"><span class="hljs-string">"button"</span></span>, <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-string"><span class="hljs-string">"btn_clear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>:<span class="hljs-string"><span class="hljs-string">"Clear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">click</span></span>:clearForm} ]</code> </pre><br>  Le code et la démo peuvent être consultés ici - <a href="https://snippet.webix.com/17w1dodb" rel="nofollow">snippet.webix.com/17w1dodb</a> . <br><br><h3>  Généralisation </h3><br>  De la source, il était clair que le code de l'article précédent est assez simple, mais avec le développement du projet, il devient progressivement plus compliqué et son nombre augmente.  Afin de ne pas se perdre dans l'infinité des lignes de code, il devient important de maintenir la facilité de lecture et la simplicité de structure.  Un exemple d'interaction avec un formulaire ne décrit que des méthodes de base, mais il ressort également clairement que pour donner la dynamique de la page, webix propose un petit code, lisible et intuitif.  Comparé au JavaScript pur, son volume doublerait au mieux de taille. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr484310/">https://habr.com/ru/post/fr484310/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr484296/index.html">Lytko s'unit</a></li>
<li><a href="../fr484300/index.html">Powershell fonctionnel avec des classes - pas un oxymore, je le garantis</a></li>
<li><a href="../fr484302/index.html">Slurm DevOps - une meilleure mésange fonctionnelle en 3 jours qu'une belle grue dans un avenir lointain</a></li>
<li><a href="../fr484304/index.html">La Chine a adopté son "paquet de printemps"</a></li>
<li><a href="../fr484306/index.html">La capacité d'apprentissage peut être indécidable</a></li>
<li><a href="../fr484312/index.html">Stockage efficace de centaines de millions de petits fichiers. Solution auto-hébergée</a></li>
<li><a href="../fr484320/index.html">Création d'un microservice sur Quarkus, Kotlin et Gradle</a></li>
<li><a href="../fr484326/index.html">Aller à Londres ou mon stage chez Jump Trading</a></li>
<li><a href="../fr484328/index.html">Paul Graham annonce un nouveau langage de programmation Bel</a></li>
<li><a href="../fr484330/index.html">[Nginx] Comment battre response_status = 0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>