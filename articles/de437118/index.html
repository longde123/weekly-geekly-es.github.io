<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚱 🎦 👝 AI und 2048. Teil 1: Monte-Carlo-Methode 👩‍🔬 🖨️ 🛣️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""2048" in ein paar Wochen markiert 5 Jahre, was bedeutet, dass es Zeit ist, etwas zu schreiben, das diesem wunderbaren Spiel gewidmet ist. 

 Das Them...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AI und 2048. Teil 1: Monte-Carlo-Methode</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/437118/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img width="690" height="313" src="https://habrastorage.org/webt/7u/sw/lm/7uswlmwcbpmdfhrcmk0-qgp38iu.png"></a> <br><br>  "2048" in ein paar Wochen markiert 5 Jahre, was bedeutet, dass es Zeit ist, etwas zu schreiben, das diesem wunderbaren Spiel gewidmet ist. <br><br>  Das Thema eines unabhängigen Spiels der künstlichen Intelligenz in einem Puzzle ist besonders informativ.  Es gibt verschiedene Möglichkeiten, dies zu implementieren, und heute werden wir eine relativ einfache analysieren.  Wir werden dem Computergeist nämlich beibringen, mit der Monte-Carlo-Methode Zweiergrade zu sammeln. <a name="habracut"></a><br><br><blockquote> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="EDISON Software - Webentwicklung"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="EDISON Software - Webentwicklung"></a> <br clear="right">  Dieser Artikel wurde mit Unterstützung von EDISON Software verfasst, einem Unternehmen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das mobile Anwendungen entwickelt</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Softwaretestservices anbietet</a> . </blockquote><br>  Die Inspiration für diese Arbeit war eine Diskussion über Stackoverflow, in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kluge Jungs effektive Wege für ein Computerspiel vorschlugen</a> .  Anscheinend ist der beste Weg die Minimax-Methode mit Alpha-Beta-Clipping, und in ein paar Tagen wird die nächste Veröffentlichung ihr gewidmet sein. <br><br>  Vom Stackoverflow-Benutzer vorgeschlagene Casino-Methode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img width="14" height="14" src="https://habrastorage.org/webt/eo/fj/at/eofjat4aio6bqe8i7xfdcg1iswo.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ronenz</a> als Teil der obigen Diskussion.  Der gesamte nächste Abschnitt ist eine Übersetzung aus seiner Veröffentlichung. <br><br><h1>  Monte-Carlo-Methode </h1><br>  Ich interessierte mich für die Idee der KI für dieses Spiel, in dem <b>es keine fest codierte Intelligenz gibt</b> (dh es gibt keine Heuristiken, Punkte usw.).  KI sollte nur die Spielregeln „kennen“ und das Spiel „verstehen“.  Dies unterscheidet es von den meisten AIs (wie in diesem Thread), da das Gameplay in der Tat Brute Force ist, die von der Scoring-Funktion gesteuert wird und das menschliche Verständnis des Spiels widerspiegelt. <br><br><h2>  AI-Algorithmus </h2><br>  Ich habe einen einfachen, aber überraschend guten Spielalgorithmus gefunden: Um den nächsten Zug für einen bestimmten Feldzustand zu bestimmen, spielt die KI das Spiel im RAM und macht <b>zufällige Züge,</b> bis das Spiel mit einer Niederlage endet.  Dies wird mehrmals durchgeführt, wobei das Endergebnis verfolgt wird.  Dann wird die durchschnittliche Endpunktzahl unter Berücksichtigung des Anfangskurses berechnet.  Der erste Zug, der das höchste durchschnittliche Ergebnis zeigte, wird als bereits tatsächlich gewählter Zug ausgewählt. <br><br>  Mit 100 Läufen für jede erste Runde erreicht die KI in 80% der Fälle 2048 und in 50% der Fälle 4096.  Bei Verwendung von 10.000 Läufen wird in 100% der Fälle 2048 erhalten, bei 4096 70% und bei 8192 etwa 1%. <br><img align="right" width="352" height="524" src="https://habrastorage.org/webt/81/bo/mg/81bomgvnk-q3jy4jae0ux6ljutk.png"><br clear="left">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">In Aktion anzeigen</a> <br><br>  Das beste erzielte Ergebnis zeigt der Screenshot: <br><br>  Eine interessante Tatsache für diesen Algorithmus ist, dass Spiele mit zufällig ausgeführten Zügen zwar ziemlich schlecht sein dürften, die Auswahl des besten (oder am wenigsten schlechten, wenn Sie möchten) Zugs jedoch zu einem sehr guten Gameplay führt: Ein typisches Monte-Carlo-KI-Spiel kann 70.000 Punkte erzielen Punkte für 3000 Züge, aber Spiele mit einem beliebigen Spiel im Speicher von einer bestimmten Position aus ergeben durchschnittlich 340 zusätzliche Punkte für etwa 40 zusätzliche Züge, bevor sie verlieren.  (Sie können dies selbst überprüfen, indem Sie die KI starten und die Debug-Konsole öffnen.) <br><br>  Diese Grafik veranschaulicht dieses Konzept: Die blaue Linie zeigt die Punktzahl des Spiels nach jedem Zug.  Die rote Linie zeigt das <b>beste</b> Ergebnis des Algorithmus und bewegt sich willkürlich von dieser Position bis zum Ende des Spiels.  Tatsächlich „ziehen“ die roten Werte die blauen nach oben, da sie die besten Sätze des Algorithmus sind.  Interessanterweise liegt die rote Linie an jedem Punkt leicht über der blauen Linie, aber die blaue Linie verringert die Lücke immer mehr. <br><br><div style="text-align:center;"><img width="666" height="425" src="https://habrastorage.org/webt/ws/u5/j4/wsu5j4-k1wxxdzuk9ambg9amtv0.png"></div><br>  Ich finde es ziemlich überraschend, dass der Algorithmus nicht unbedingt ein gutes Gameplay vorwegnimmt und dennoch die Bewegungen auswählt, die ihn erzeugen (ein guter Prozess). <br><br>  Später entdeckte ich, dass diese Methode als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Monte-Carlo-Baumsuchalgorithmus</a> klassifiziert werden kann. <br><br><h2>  Implementierung und Links </h2><br>  Zuerst habe ich eine JavaScript-Version erstellt, die hier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in Aktion</a> zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sehen ist</a> .  Diese Version kann 100 Läufe in angemessener Zeit ausführen.  Öffnen Sie die Konsole für weitere Informationen.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> ) <br><br>  Später habe ich zum Herumspielen die hochoptimierte @ nneonneo-Infrastruktur verwendet und meine Version in C ++ implementiert.  Diese Version erlaubt bis zu 100.000 Läufe pro Runde und sogar 1.000.000, wenn Sie bereit sind zu warten.  Montageanleitung enthalten.  Alles funktioniert in der Konsole und verfügt auch über eine Fernbedienung für die Wiedergabe in der Webversion.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> ) <br><br><h2>  Ergebnisse </h2><br>  Überraschenderweise verbessert eine Erhöhung der Anzahl der Läufe das Gameplay nicht grundlegend.  Es scheint, dass diese Strategie ein Limit von 80.000 Punkten mit einem Plättchen von 4096 und allen kleineren Ergebnissen hat, die sehr nahe am Erreichen von Plättchen 8192 liegen. Eine Erhöhung der Anzahl der Läufe von 100 auf 100.000 erhöht die Chancen, dieses Limit zu erreichen (von 5% auf 40%), aber nicht überwindet es. <br><br>  Die Durchführung von 10.000 Läufen mit einer vorübergehenden Erhöhung von bis zu 1.000.000 in der Nähe kritischer Positionen ermöglichte es, diese Barriere in weniger als 1% der Fälle mit der maximalen Punktzahl von 129892 und den Kacheln 8192 zu überwinden. <br><br><h2>  Verbesserungen und Optimierungen </h2><br>  Nach der Implementierung dieses Algorithmus habe ich viele Verbesserungen versucht, einschließlich der Verwendung von minimalen oder maximalen Bewertungen oder einer Kombination aus minimalen, maximalen und durchschnittlichen Werten.  Ich habe auch versucht, die Tiefe zu verwenden: Anstatt zu versuchen, K Läufe pro Runde abzuschließen, habe ich K Züge pro Liste von Zügen einer bestimmten Länge versucht (z. B. „hoch, hoch, links“) und den ersten Zug aus der Liste der Züge mit dem besten Gewinn ausgewählt. <br><br>  Später implementierte ich einen Punktebaum, der die bedingte Wahrscheinlichkeit berücksichtigte, dass er einen Zug nach einer bestimmten Liste von Zügen ausführen kann. <br><br>  Keine dieser Ideen zeigte jedoch einen echten Vorteil gegenüber einer einfachen ersten Idee.  Ich habe auskommentierten Code für diese Ideen in der C ++ - Quelle hinterlassen. <br><br>  Ich habe den Deep Search-Mechanismus hinzugefügt, der die Anzahl der Läufe vorübergehend auf 1.000.000 erhöhte, wenn einer der Läufe versehentlich die nächsthöhere Kachel erreichte.  Dies führte zu einer Verbesserung der Zeitleistung. <br><br>  Es würde mich interessieren, ob jemand andere Verbesserungsideen hat, die die Unabhängigkeit der KI vom Themenbereich unterstützen. <br><br><h1>  Optionen und Klone 2048 </h1><br>  Zum Spaß habe ich die KI auch als Lesezeichen implementiert und sie mit den Steuerelementen des Spiels verbunden.  Auf diese Weise können Sie sowohl mit dem Originalspiel als auch mit vielen seiner Variationen arbeiten. <br><br>  Dies ist aufgrund der domänenunabhängigen Natur der KI möglich.  Einige der Optionen sind recht originell, z. B. ein hexagonaler Klon. <br><br><div class="scrollable-table"><table><tbody><tr><td>  Die Übersetzung ist damit abgeschlossen, aber nicht nur wegen dieser Veröffentlichung wurde begonnen.  Vor der Kolik wollte ich 2048 selbst verschiedene Ideen für KI testen. Zu diesem Zweck implementierte ich das Spiel in Excel, indem ich eine Anwendung mit Makros schrieb.  Die Implementierung auf VBA an sich ist keine Leistung - durch Googeln können Sie schnell mit einem Dutzend verschiedener Excel-Handwerke herausfinden.  Aber nicht nur um 2048 in Form von Tabellenkalkulationen zu kochen, sondern auch um ein computerunabhängiges Spiel zu realisieren - darauf bin ich noch nicht gestoßen. <br></td></tr></tbody></table></div><br><h1>  2048.xlsm </h1><br>  Die Excel-Anwendung selbst <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kann von Google heruntergeladen werden</a> . <br><br>  Das Bild kann angeklickt werden - ein Bild in voller Größe wird geöffnet. <br><br> <a href=""><img width="690" height="313" src="https://habrastorage.org/webt/7u/sw/lm/7uswlmwcbpmdfhrcmk0-qgp38iu.png"></a> <br><br>  Kurz auf die Oberfläche und Funktionalität der Anwendung. <br><br>  Um mit dem Spielen zu beginnen, müssen Sie auf die Schaltfläche " <b>Benutzer: Spiel starten</b> " klicken.  Wenn Sie diese Taste erneut drücken, ändert sich die Beschriftung von " <b>Benutzer: Spiel starten</b> " zu " <b>Benutzer: Spiel beenden</b> " und umgekehrt, dh Sie können das Spiel jederzeit stoppen und dann erneut starten.  Wenn das Spiel stoppt, können Sie die Ausrichtung auf dem Spielfeld manuell ändern und Ihre Position verbessern oder verschlechtern, um einige Ideen zu testen oder zu verifizieren. <br><br>  Während des Spiels können Sie auf zwei Arten Züge machen: <br><br><ul><li>  <b>Tastatur:</b> einfach durch Drücken der Tasten "hoch", "runter", "links", "rechts". </li><li>  <b>Mit der Maus:</b> Klicken Sie auf Zellen mit großen Pfeilen, die die gewünschte Richtung angeben. </li></ul><br>  Die Schaltfläche " <b>Neues Feld</b> " löscht das Spielfeld und platziert zufällig die "zwei" und "vier" darauf. <br><br>  Das Interessanteste ist, dass die Monte-Carlo-Methode genau in der Form implementiert wurde, in der sie vom Typ mit Stackoverflow vorgeschlagen wurde.  An jeder Position durchläuft der Computer im Speicher bei jeder ersten Bewegung zufällige Verzweigungen („auf“, „ab“, „links“, „rechts“), bis dies zu einem Verlust führt.  Statistisch gesehen ist die günstigste Richtung in einer speziellen Tabelle unten rot hervorgehoben.  Sie können es als Hinweis verwenden, wenn Sie sehen, dass Ihr eigenes Spiel zum Stillstand kommt und Sie sich irgendwie retten müssen.  ;) <br><br>  Über der Tabelle befinden sich Kontrollkästchen mit Analyseoptionen.  Momentan wurde nur Monte Carlo entschieden, der Rest wird in den kommenden Tagen hinzugefügt (aufgrund dessen wird es mehr Harastas mit der Aktualisierung der Excel-Anwendung und Erklärungen der Theorie geben). <br><br>  Es gibt auch einen <b>AI: Game-</b> Button.  Wenn Sie darauf klicken, führt der Computerassistent eine Bewegung gemäß der Monte-Carlo-Methode oder einer anderen in der Switch-Gruppe ausgewählten Methode aus (Minimax und neuronales Netzwerk funktionieren in dieser Liste etwas später). <br><br><h3>  Alle Artikel der Serien AI und 2048 </h3><br><ul><li>  <strong>Monte Carlo</strong> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Minimax + Alpha Beta Clipping</a> </li><li>  Warten auf Maximum </li><li>  Neuronales Netz </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de437118/">https://habr.com/ru/post/de437118/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de437108/index.html">Die meisten Texte im Internet werden von Verrückten geschrieben.</a></li>
<li><a href="../de437110/index.html">Nanomaterialien verändern unsere Welt, und wir haben immer noch keine Verfahren zur Überprüfung ihrer Sicherheit</a></li>
<li><a href="../de437112/index.html">DMA: Mythen und Realität</a></li>
<li><a href="../de437114/index.html">Offenes Webinar: „SSH / NC / Socat: Tipps und Tricks“</a></li>
<li><a href="../de437116/index.html">AWS, MongoDB und die wirtschaftlichen Realitäten von Open Source</a></li>
<li><a href="../de437120/index.html">Koreanischer Bürostuhl: Harachair Miracle Sensations</a></li>
<li><a href="../de437122/index.html">Dinge benennen</a></li>
<li><a href="../de437124/index.html">Eine einfache Möglichkeit, mehrere Sprachen hinzuzufügen</a></li>
<li><a href="../de437126/index.html">Papiere mit DevFest SPB 2018</a></li>
<li><a href="../de437128/index.html">QtCreator und seine Verwendung als IDE für Rust</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>