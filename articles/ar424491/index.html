<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฆ ๐๐ผ ๐๐ฝ ุฎุฑุงุฆุท Unity Hexagon: ุงูุฎุดููุฉ ูุงูุฃููุงุฑ ูุงูุทุฑู ๐ฑ๏ธ ๐ ๐ฉ๐ปโ๐ค</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ 

 ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู 

 ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ 

 ุงูุฃุฌุฒุงุก 12-1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฎุฑุงุฆุท Unity Hexagon: ุงูุฎุดููุฉ ูุงูุฃููุงุฑ ูุงูุทุฑู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424491/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/716/b6b/8a9/716b6b8a9d024dc87b2d645b5d4bdbb6.jpg" alt="ุงูุตูุฑุฉ"></div><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 12-15: ุงูุญูุธ ูุงูุชุญููู ุ ุงูููุงู ุ ุงููุณุงูุงุช</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 16-19: ุฅูุฌุงุฏ ุงูุทุฑูู ููุฑู ุงููุงุนุจูู ูุงูุฑุณูู ุงููุชุญุฑูุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 20-23: ุถุจุงุจ ุงูุญุฑุจ ุ ุจุญุซ ุงูุฎุฑุงุฆุท ุ ุงูุฌูู ุงูุฅุฌุฑุงุฆู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 24-27: ุฏูุฑุฉ ุงููุงุก ุ ุงูุชุขูู ุ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุ ุงูุฎุฑูุทุฉ ุงูุฃุณุทูุงููุฉ</a> <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก ุงูุฑุงุจุน: ุงูุฎุดููุฉ </h1><br><h2 style=";text-align:right;direction:rtl">  ุฌุฏูู ุงููุญุชููุงุช </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุฑ ูุณูุฌ ุงูุถุฌูุฌ. </li><li style=";text-align:right;direction:rtl">  ุชุญุฑูู ุงูููู. </li><li style=";text-align:right;direction:rtl">  ูุญุงูุธ ุนูู ุชุณุทูุญ ุงูุฎูุงูุง. </li><li style=";text-align:right;direction:rtl">  ุชูุณูู ุญูุงู ุงูุฎูุงูุง. </li></ul><br>  ุจูููุง ูุงูุช ุดุจูุชูุง ููุทูุง ุตุงุฑููุง ูู ุฃูุฑุงุต ุงูุนุณู.  ูู ูุฐุง ุงูุฌุฒุก ุ ุณูุถูู ูุชูุกุงุช ูุฌุนู ุงูุฎุฑูุทุฉ ุชุจุฏู ุฃูุซุฑ ุทุจูุนูุฉ. <br><a name="habracut"></a><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e33/034/982/e33034982aafb942e1e656b76dde0981.png"></div><br>  <i>ูุง ูุฒูุฏ ูู ุงูุณุฏุงุณูุงุช.</i> <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุถุฌูุฌ </h2><br>  ูุฅุถุงูุฉ ุงููุทุจุงุช ุ ูุญุชุงุฌ ุฅูู ุงูุชูุฒูุน ุงูุนุดูุงุฆู ุ ูููู ููุณ ุงูุนุดูุงุฆูุฉ ุงูุญููููุฉ.  ูุฑูุฏ ุฃู ูููู ูู ุดูุก ูุชุณููุง ุนูุฏ ุชุบููุฑ ุงูุฎุฑูุทุฉ.  ุฎูุงู ุฐูู ุ ุนูุฏ ุฅุฌุฑุงุก ุฃู ุชุบููุฑ ุ ุณุชููุฒ ุงููุงุฆูุงุช.  ุฃู ุฃููุง ุจุญุงุฌุฉ ุฅูู ุดูู ูู ุฃุดูุงู ุงูุถูุถุงุก ุงูุนุดูุงุฆูุฉ ุงูุฒุงุฆูุฉ ุงููุงุจูุฉ ููุชูุฑุงุฑ. <br><br>  ุงููุฑุดุญ ุงูุฌูุฏ ูู ุถุฌูุฌ ุจูุฑููู.  ูููู ุงุณุชูุณุงุฎู ูู ุฃู ููุงู.  ุนูุฏ ุงูุฌูุน ุจูู ุนุฏุฉ ุชุฑุฏุฏุงุช ุ ูุฅูู ูุฎูู ุฃูุถูุง ุถูุถุงุก ุ ูุงูุชู ูููู ุฃู ุชุฎุชูู ุงุฎุชูุงููุง ูุจูุฑูุง ุนูุฏ ูุณุงูุงุช ูุจูุฑุฉ ุ ูููููุง ุชุธู ููุง ูู ุชูุฑูุจูุง ูู ุงููุณุงูุงุช ุงูุตุบูุฑุฉ.  ุจูุถู ูุฐุง ุ ูููู ุฅูุดุงุก ุชุดููุงุช ุณูุณุฉ ูุณุจููุง.  ุนุงุฏุฉู ูุง ุชุจูู ุงูููุงุท ุงููุฌุงูุฑุฉ ูุจุนุถูุง ุงูุจุนุถ ูู ููุงู ูุฑูุจ ุ ูููุณุช ูุจุนุซุฑุฉ ูู ุงุชุฌุงูุงุช ูุนุงูุณุฉ. <br><br>  ูููููุง ุชูููุฏ ุถูุถุงุก ุจูุฑููู ุจุฑูุฌูุงู.  ูู ุดุฑุญ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุถูุถุงุก</a> ุ ุฃุดุฑุญ ููููุฉ ุงูููุงู ุจุฐูู.  ูููู ูููููุง ุฃูุถูุง ุฃุฎุฐ ุนููุงุช ูู ูุณูุฌ ุถูุถุงุก ุชู ุฅูุดุงุคู ูุณุจููุง.  ููุฒุฉ ุงุณุชุฎุฏุงู ุงููููุณ ูู ุฃูู ุฃุจุณุท ูุฃุณุฑุน ุจูุซูุฑ ูู ุญุณุงุจ ุถุฌูุฌ ุจูุฑููู ูุชุนุฏุฏ ุงูุชุฑุฏุฏุงุช.  ุนูุจู ูู ุฃู ุงููููุณ ูุดุบู ูุณุงุญุฉ ุฃูุจุฑ ูู ุงูุฐุงูุฑุฉ ููุบุทู ูุณุงุญุฉ ุตุบูุฑุฉ ููุท ูู ุงูุถูุถุงุก.  ูุฐูู ุ ูุฌุจ ุฃู ูููู ูุชุตูุงู ุจุณูุงุณุฉ ููุจูุฑูุง ุจูุง ูููู ุจุญูุซ ูุง ูููู ุงูุชูุฑุงุฑ ูุฏูุดูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุณูุฌ ุงูุถูุถุงุก </h3><br>  ุณูุณุชุฎุฏู ุงููููุณ ุ ูุฐูู ูุฅู ุงูุจุฑูุงูุฌ ุงูุชุนูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุถูุถุงุก</a> ุงุฎุชูุงุฑู.  ูุฐูู ูุญู ุจุญุงุฌุฉ ุฅูู ูุณูุฌ.  ูุง ูู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fbd/8e8/5d7/fbd8e85d783626c737decd6bc69a2519.png"></div><br>  <i>ุฑุจุท ูุณูุฌ ุงูุถูุถุงุก ุจูุฑููู ุจุณูุงุณุฉ.</i> <br><br>  ูุญุชูู ุงููููุณ ุงูููุถุญ ุฃุนูุงู ุนูู ุถูุถุงุก ุจูุฑููู ุงูููุชุฑูุฉ ุจุณูุงุณุฉ ูุชุนุฏุฏุฉ ุงูุชุฑุฏุฏุงุช.  ูุฐู ุตูุฑุฉ ุฑูุงุฏูุฉ.  ูุชูุณุท โโูููุชูุง 0.5 ุ ูุชููู ุงูููู ุงููุตูู ุฅูู 0 ู 1. <br><br>  ูููู ุงูุชุธุฑ ุ ููุงู ูููุฉ ูุงุญุฏุฉ ููุท ููู ููุทุฉ.  ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ุชุดููู ุซูุงุซู ุงูุฃุจุนุงุฏ ุ ูุฅููุง ูุญุชุงุฌ ุนูู ุงูุฃูู ุฅูู ุซูุงุซ ุนููุงุช ุนุดูุงุฆูุฉ ุฒุงุฆูุฉ!  ูุฐูู ุ ูุญุชุงุฌ ุฅูู ูุณูุฌูู ุขุฎุฑูู ุจุถุฌูุฌ ูุฎุชูู. <br><br>  ูููููุง ุฅูุดุงุคูุง ุฃู ุชุฎุฒูู ููู ุถูุถุงุก ูุฎุชููุฉ ูู ูู ูู ูููุงุช ุงูุฃููุงู.  ุณูุณูุญ ููุง ูุฐุง ุจุชุฎุฒูู ูุง ูุตู ุฅูู ุฃุฑุจุนุฉ ุฃููุงุท ุถูุถุงุก ูู ูุณูุฌ ูุงุญุฏ.  ููุง ูุฐุง ุงููููุณ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a1d/509/aca/a1d509acaf05d64de002829afc59cb90.png"></div><br>  <i>ุฃุฑุจุนุฉ ูู ูุงุญุฏ.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููููุฉ ุฅูุดุงุก ูุซู ูุฐุง ุงููููุณุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ููุฏ ุงุณุชุฎุฏูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">NumberFlow</a> .  ูุฐุง ูู ูุญุฑุฑ ุงููุณูุฌ ุงูุฅุฌุฑุงุฆู ุงูุฐู ุฃูุดุฃุชู ูู Unity. </div></div><br>  ูู ุจุชูุฒูู ูุฐุง ุงููููุณ ูุงุณุชูุฑุงุฏู ูู ูุดุฑูุน ุงููุญุฏุฉ ุงูุฎุงุต ุจู.  ูุธุฑูุง ูุฃููุง ุณูููู ุจุชุฌุฑุจุฉ ุงููุงุฏุฉ ูู ุฎูุงู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ููุฌุจ ุฃู ุชููู ูุงุจูุฉ ูููุฑุงุกุฉ.  ูู <em>ุจุชุจุฏูู ููุน ูุงุฏุฉ</em> ุฅูู <em>ูุชูุฏูุฉ</em> ูุชูููู ุชูููู <em>ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ</em> .  ุณูุญูุธ ูุฐุง ุจูุงูุงุช ุงููุณูุฌ ูู ุงูุฐุงูุฑุฉ ููููู ุงููุตูู ุฅููู ูู ููุฏ C #.  ุงุถุจุท <em>ุงูุชูุณูู</em> ุนูู <em>Truecolor ุงูุชููุงุฆู</em> ุ ูุฅูุง ูู ูุนูู ุฃู ุดูุก.  ูุง ูุฑูุฏ ุฃู ูุคุฏู ุถุบุท ุงููููุณ ุฅูู ุชุฏููุฑ ููุท ุงูุถุฌูุฌ ูุฏููุง. <br><br>  ููููู ุชุนุทูู <em>ุฅูุดุงุก ุฎุฑุงุฆุท Mip</em> ุ ูุฃููุง ูุณูุง ุจุญุงุฌุฉ ุฅูููุง.  ูู ุฃูุถูุง ุจุชูููู <em>Bypass sRGB Sampling</em> .  ูู ูุญุชุงุฌ ูุฐุง ุ ูููู ุณูููู ูุฐูู.  ุชุดูุฑ ูุฐู ุงููุนููุฉ ุฅูู ุฃู ุงููุณูุฌ ูุง ูุญุชูู ุนูู ุจูุงูุงุช ุงูููู ูู ูุณุงุญุฉ ุฌุงูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3aa/c36/e45/3aac36e45d7ead64823dc57b55afe67e.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5fe/6c8/99a/5fe6c899a966eecb34046d5c243036b7.png"></div><br>  ูุณูุฌ ุถุฌูุฌ ูุณุชูุฑุฏ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุชู ูููู ุฃุฎุฐ ุนููุงุช sRGB ููููุงุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุฅุฐุง ุฃุฑุฏูุง ุงุณุชุฎุฏุงู ูุณูุฌ ูู ุชุธููู ุ ูุฅู ุฐูู ุณูุญุฏุซ ูุฑููุง.  ุนูุฏ ุงุณุชุฎุฏุงู ูุถุน ุงูุชูุฏูู ุงูุฎุทู ุ ูุคุฏู ุฃุฎุฐ ุนููุงุช ุงููุณูุฌ ุชููุงุฆููุง ุฅูู ุชุญููู ุจูุงูุงุช ุงูููู ูู ุงููุทุงู ุฅูู ูุณุงุญุฉ ููู ุฎุทูุฉ.  ูู ุญุงูุฉ ูุณูุฌ ุงูุถุฌูุฌ ูุฏููุง ุ ุณูุคุฏู ูุฐุง ุฅูู ูุชุงุฆุฌ ุบูุฑ ุตุญูุญุฉ ุ ูุฐูู ูุง ูุญุชุงุฌ ุฅูู ุฐูู. </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ุชุจุฏู ุฅุนุฏุงุฏุงุช ุงุณุชูุฑุงุฏ ุงููุณูุฌ ูุฎุชููุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุชู ุชุบููุฑูุง ุจุนุฏ ูุชุงุจุฉ ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู.  ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุฅุนุฏุงุฏุงุช ูุณูุฌ ุซูุงุฆู ุงูุฃุจุนุงุฏ ุงูุงูุชุฑุงุถูุฉ ุ ููุฌุจ ุชุนุทูู <em>sRGB (Color Texture)</em> ุ ููุฌุจ ุถุจุท <em>ุงูุถุบุท</em> ุนูู <em>None</em> . </div></div><br><h3 style=";text-align:right;direction:rtl">  ุฃุฎุฐ ุนููุงุช ุงูุถูุถุงุก </h3><br>  ุฏุนูุง ูุถูู ูุธููุฉ ุฃุฎุฐ ุนููุงุช ุงูุถูุถุงุก ุฅูู <code>HexMetrics</code> ุจุญูุซ ููููู ุงุณุชุฎุฏุงููุง ูู ุฃู ููุงู.  ูุฐุง ูุนูู ุฃู <code>HexMetrics</code> ูุฌุจ ุฃู ูุญุชูู ุนูู ุฅุดุงุฑุฉ ุฅูู ูุณูุฌ ุงูุถูุถุงุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Texture2D noiseSource;</code> </pre> <br>  ูุธุฑูุง ูุฃู ูุฐุง ููุณ ูููููุง ุ ูุง ูููููุง ุชุนูููู ูู ุฎูุงู ุงููุญุฑุฑ.  ูุฐูู ุ ููุณูุท ุ ูุณุชุฎุฏู <code>HexGrid</code> .  ูุธุฑูุง ูุฃู <code>HexGrid</code> ุณุชุนูู ุฃููุงู ุ ูุณูููู ูู ุงูุฌูุฏ ุฅุฐุง ูุฑุฑูุง ุงููุณูุฌ ูู ุจุฏุงูุฉ ุทุฑููุฉ <code>Awake</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Texture2D noiseSource; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexMetrics.noiseSource = noiseSource; โฆ }</code> </pre> <br>  ููุน ุฐูู ุ ูู ููุฌู ูุฐุง ุงูููุฌ ูู ุฅุนุงุฏุฉ ุงูุชุฑุฌูุฉ ูู ูุถุน ุงูุชุดุบูู.  ูุง ูููู ูุญุฑู ุงููุญุฏุฉ ุจุชุณูุณู ุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ.  ูุญู ูุฐู ุงููุดููุฉ ุ ูู ุจุฅุนุงุฏุฉ ุชุนููู ุงููููุณ ูู ุทุฑููุฉ ุญุฏุซ <code>OnEnable</code> .  ุณูุชู ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุฑุฌูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexMetrics.noiseSource = noiseSource; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d87/4fd/3a5/d874fd3a57faad4e57e5af830b202a19.png"></div><br>  <i>ุชุนููู ูุณูุฌ ุงูุถุฌูุฌ.</i> <br><br>  ุงูุขู ุจุนุฏ ุฃู <code>HexMetrics</code> ูุฏูู ุญู ุงููุตูู ุฅูู ุงููููุณ ุ ุฏุนูุง ูุถูู ุทุฑููุฉ ููุงุฆูุฉ ูุนููุงุช ุงูุถูุถุงุก ุฅูููุง.  ุชุฃุฎุฐ ูุฐู ุงูุทุฑููุฉ ูููุนูุง ูู ุงูุนุงูู ูุชูุดุฆ ูุชุฌููุง ุฑุจุงุนู ุงูุฃุจุนุงุฏ ูุญุชูู ุนูู ุฃุฑุจุน ุนููุงุช ุถูุถุงุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SampleNoise</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br>  ุชู ุฅูุดุงุก ุนููุงุช ุนู ุทุฑูู ุฃุฎุฐ ุนููุงุช ูู ุงููุณูุฌ ุจุงุณุชุฎุฏุงู ุงูุชุตููุฉ ุงูุซูุงุฆูุฉ ุ ุญูุซ ุชู ุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช ุงูุนุงูู X ู Z ูู ุฅุญุฏุงุซูุงุช ููุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ.ุจูุง ุฃู ูุตุฏุฑ ุงูุถูุถุงุก ูุฏููุง ุซูุงุฆู ุงูุฃุจุนุงุฏ ุ ูุฅููุง ูุชุฌุงูู ุงูุฅุญุฏุงุซูุงุช ุงูุซุงูุซุฉ ูู ุงูุนุงูู.  ุฅุฐุง ูุงู ูุตุฏุฑ ุงูุถูุถุงุก ุซูุงุซู ุงูุฃุจุนุงุฏ ุ ูุณูุณุชุฎุฏู ุฃูุถูุง ุฅุญุฏุงุซูุงุช ุต. <br><br>  ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ููู ูููู ุชุญูููู ุฅูู ูุงูู ุฑุจุงุนู ุงูุฃุจุนุงุฏ.  ูููู ุฃู ูููู ูุฐุง ุงูุชุฎููุถ ุบูุฑ ูุจุงุดุฑ ุ ุฃู ูููููุง ุฅุฑุฌุงุน ุงูููู ูุจุงุดุฑุฉ ุ ูููุณ ุจูุง ูู ุฐูู ุตุฑุงุญุฉ <code>(Vector4)</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SampleNoise</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> noiseSource.GetPixelBilinear(position.x, position.z); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููู ูุนูู ุงูุชุตููุฉ ุงูุซูุงุฆูุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ููุญุตูู ุนูู ุดุฑุญ ุญูู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูุชุตููุฉ ุงููุณูุฌ ุ ุฑุงุฌุน ุงูุจุฑูุงูุฌ ุงูุชุนูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Rendering 2 ุ Shader Fundamentals</a> . </div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุญุฑูุฉ ููุฉ ุงูุฑุฃุณ </h2><br>  ุณูู ูููู ุจุชุดููู ุดุจูุชูุง ุงููุงุนูุฉ ูู ุฃูุฑุงุต ุงูุนุณู ุ ูุน ุชุญุฑูู ูู ุฑุฃุณ ูู ุงูููู ุจุดูู ูุฑุฏู.  ููููุงู ุจุฐูู ุ ุฏุนูุง ูุถูู ุฃุณููุจ <code>Perturb</code> ุฅูู <code>Perturb</code> .  ูุฃุฎุฐ ููุทุฉ ุบูุฑ ูุชุญุฑู ููุนูุฏ ุงูููุทุฉ ุงููููููุฉ.  ููููุงู ุจุฐูู ุ ูุณุชุฎุฏู ููุทุฉ ุบูุฑ ูุชุบูุฑุฉ ุนูุฏ ุฃุฎุฐ ุนููุงุช ุงูุถูุถุงุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perturb</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { Vector4 sample = HexMetrics.SampleNoise(position); }</code> </pre> <br>  ุฏุนูุง ููุท ูุถูู ุนููุงุช ุงูุถุฌูุฌ X ู Y ู Z ูุจุงุดุฑุฉ ุฅูู ุฅุญุฏุงุซูุงุช ุงูููุทุฉ ุงูููุงุจูุฉ ููุณุชุฎุฏููุง ูุชูุฌุฉ ูุฐูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perturb</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { Vector4 sample = HexMetrics.SampleNoise(position); position.x += sample.x; position.y += sample.y; position.z += sample.z; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br>  ููู ูุบูุฑ <code>HexMesh</code> ุจุณุฑุนุฉ ูุชุญุฑูู ุฌููุน ุงููููุ  ุจุชุบููุฑ ูู ููุฉ ุนูุฏ ุฅุถุงูุฉ ุฑุคูุณ ุฅูู ุงููุงุฆูุฉ ูู <code>AddTriangle</code> ู <code>AddQuad</code> .  ููููุนู ุฐูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddTriangle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 v1, Vector3 v2, Vector3 v3</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> vertexIndex = vertices.Count; vertices.Add(Perturb(v1)); vertices.Add(Perturb(v2)); vertices.Add(Perturb(v3)); โฆ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddQuad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> vertexIndex = vertices.Count; vertices.Add(Perturb(v1)); vertices.Add(Perturb(v2)); vertices.Add(Perturb(v3)); vertices.Add(Perturb(v4)); โฆ }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูู ุณุชุจูู ุงูุฒูุงูุง ุงูุฑุจุงุนูุฉ ูุณุทุญุฉ ุจุนุฏ ุชุญุฑูู ุฑุคูุณูุงุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุนูู ุงูุฃุฑุฌุญ ูุง.  ุชุชููู ูู ูุซูุซูู ูู ููููุง ุจุนุฏ ุฐูู ูู ููุณ ุงููุณุชูู.  ููุน ุฐูู ุ ูุธุฑูุง ูุฃู ูุฐู ุงููุซูุซุงุช ููุง ุฑุฃุณุงู ูุดุชุฑูุงู ุ ูุณูุชู ุชูุนูู ุงูููุงุนุฏ ุงูุนุงุฏูุฉ ููุฐู ุงูููู.  ูุฐุง ูุนูู ุฃูู ูู ูููู ูุฏููุง ุงูุชูุงูุงุช ุญุงุฏุฉ ุจูู ูุซูุซูู.  ุฅุฐุง ูู ููู ุงูุชุดููู ูุจูุฑูุง ุฌุฏูุง ุ ูุณูู ูุธู ููุธุฑ ุฅูู ุงูุฒูุงูุง ุงูุฑุจุงุนูุฉ ุนูู ุฃููุง ูุณุทุญุฉ. </div></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/589/55c/47d/58955c47d221104096d943df9f9b948c.png"></div><br>  <i>ูุชู ุชุญุฑูู ุงูููู ุฃู ูุง.</i> <br><br>  ูู ุญูู ุฃู ุงูุชุบููุฑุงุช ููุณุช ููุญูุธุฉ ููุบุงูุฉ ุ ุงุฎุชูุช ููุท ุชุณููุงุช ุงูุฎูุงูุง.  ุญุฏุซ ูุฐุง ูุฃููุง ุฃุถููุง ุนููุงุช ุถูุถุงุก ุฅูู ุงูููุงุท ุ ููู ุฏุงุฆููุง ุฅูุฌุงุจูุฉ.  ูุฐูู ุ ูุชูุฌุฉ ูุฐูู ุ ุงุฑุชูุนุช ุฌููุน ุงููุซูุซุงุช ููู ุนูุงูุงุชูุง ุ ููุง ุฃุฏู ุฅูู ุฅุบูุงููุง.  ูุฌุจ ุฃู ูุฑูุฒ ุงูุชุบููุฑุงุช ุญุชู ุชุญุฏุซ ูู ููุง ุงูุงุชุฌุงููู.  ูู ุจุชุบููุฑ ุงููุงุตู ุงูุฒููู ูุนููุฉ ุงูุถูุถุงุก ูู 0-1 ุฅูู -1-1. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perturb</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { Vector4 sample = HexMetrics.SampleNoise(position); position.x += sample.x * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>; position.y += sample.y * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>; position.z += sample.z * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1f0/bd6/83a/1f0bd683ad92592fa6c5df171eab646c.png"></div><br>  <i>ูุฒูุญ ูุฑูุฒู.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุญุฌู (ููุฉ) ุงููุฒูุญ </h3><br>  ุงูุขู ูู ุงููุงุถุญ ุฃููุง ูููุง ุจุชุดููู ุงูุดุจูุฉ ุ ูููู ุงูุชุฃุซูุฑ ุจุงููุงุฏ ููุญูุธ.  ุงูุชุบููุฑ ูู ูู ุจูุนุฏ ูุง ูุฒูุฏ ุนู ูุญุฏุฉ ูุงุญุฏุฉ.  ุฃู ุฃู ุงูุฅุฒุงุญุฉ ุงููุตูู ุงููุธุฑูุฉ ูู โ3 โ 1.73 ูุญุฏุฉ ุ ููู ูุง ูุญุฏุซ ูุงุฏุฑูุง ููุบุงูุฉ ุ ุนูู ุงูุฅุทูุงู.  ุจูุง ุฃู ูุตู ุงููุทุฑ ุงูุฎุงุฑุฌู ููุฎูุงูุง ูู 10 ูุญุฏุงุช ุ ูุฅู ุงูุฅุฒุงุญุฉ ุตุบูุฑุฉ ูุณุจููุง. <br><br>  ุงูุญู ูู ุฅุถุงูุฉ ูุนููุฉ <code>HexMetrics</code> ุฅูู <code>HexMetrics</code> ุจุญูุซ ููููู ุชุญุฌูู ุงูุญุฑูุงุช.  ุฏุนูุง ูุญุงูู ุงุณุชุฎุฏุงู ุงูููุฉ 5. ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ุงูุฅุฒุงุญุฉ ุงููุตูู ุงููุธุฑูุฉ โ75 โ 8.66 ูุญุฏุฉ ุ ููู ุฃูุซุฑ ูุถูุญูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cellPerturbStrength = <span class="hljs-number"><span class="hljs-number">5f</span></span>;</code> </pre> <br>  ูุทุจู ุงูููุฉ ุจุถุฑุจูุง ุจุนููุงุช ูู <code>HexMesh.Perturb</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perturb</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { Vector4 sample = HexMetrics.SampleNoise(position); position.x += (sample.x * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * HexMetrics.cellPerturbStrength; position.y += (sample.y * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * HexMetrics.cellPerturbStrength; position.z += (sample.z * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * HexMetrics.cellPerturbStrength; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fa8/2ef/fc0/fa82effc05a418729e81ee54f0922f26.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b19/fc8/3f0/b19fc83f0828160b2100a346083f1047.png"></div><br>  <i>ุฒูุงุฏุฉ ุงูููุฉ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ูููุงุณ ุงูุถูุถุงุก </h3><br>  ุนูู ุงูุฑุบู ูู ุฃู ุงูุดุจูุฉ ุชุจุฏู ุฌูุฏุฉ ูุจู ุงูุชุบููุฑ ุ ุฅูุง ุฃู ูู ุดูุก ูุฏ ูุณูุก ุจุนุฏ ุธููุฑ ุงูุญูุงู.  ูููู ุฃู ุชุดูู ููููู ูู ุงุชุฌุงูุงุช ูุฎุชููุฉ ูุง ูููู ุงูุชูุจุค ุจูุง ุ ูุฎูู ุงูููุถู.  ุนูุฏ ุงุณุชุฎุฏุงู ุถูุถุงุก Perlin ุ ูุง ููุจุบู ุฃู ูุญุฏุซ ูุฐุง. <br><br>  ุชุจุฑุฒ ุงููุดููุฉ ูุฃููุง ูุณุชุฎุฏู ุฅุญุฏุงุซูุงุช ุงูุนุงูู ุจุดูู ูุจุงุดุฑ ูุฃุฎุฐ ุงูุถุฌูุฌ.  ูุจุณุจุจ ูุฐุง ุ ูุชู ุฅุฎูุงุก ุงููุณูุฌ ูู ุฎูุงู ูู ูุญุฏุฉ ุ ูุงูุฎูุงูุง ุฃูุจุฑ ุจูุซูุฑ ูู ูุฐู ุงููููุฉ.  ูู ุงููุงูุน ุ ูุชู ุฃุฎุฐ ุนููุงุช ุงููุณูุฌ ูู ููุงุท ุนุดูุงุฆูุฉ ุ ููุง ูุคุฏู ุฅูู ุชุฏููุฑ ุณูุงูุชู ุงูุญุงููุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f3f/bd1/717/f3fbd1717515fdf4e500e9674d82a08f.png"></div><br>  <i>ุตููู ูู 10 ุฅูู 10 ุฎูุงูุง ูุชุฏุงุฎูุฉ ูู ุงูุดุจูุฉ.</i> <br><br>  ุณูุชุนูู ุนูููุง ุชูุณูุน ูุทุงู ุฃุฎุฐ ุนููุงุช ุงูุถูุถุงุก ุจุญูุซ ูุบุทู ุงููุณูุฌ ูุณุงุญุฉ ุฃูุจุฑ ุจูุซูุฑ.  ุฏุนูุง ูุถูู ูุฐุง ุงููููุงุณ ุฅูู <code>HexMetrics</code> ูููุฉ 0.003 ุ ุซู <code>HexMetrics</code> ุฅุญุฏุงุซูุงุช ุงูุนููุงุช ุจูุฐุง ุงูุนุงูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> noiseScale = <span class="hljs-number"><span class="hljs-number">0.003f</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SampleNoise</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> noiseSource.GetPixelBilinear( position.x * noiseScale, position.z * noiseScale ); }</code> </pre> <br>  ุงุชุถุญ ูุฌุฃุฉ ุฃู ูุณูุฌูุง ูุบุทู 333 &amp; frac13ุ  ุงููุญุฏุงุช ุงููุฑุจุนุฉ ุ ูุชุตุจุญ ุณูุงูุชูุง ุงููุญููุฉ ูุงุถุญุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9de/219/e7a/9de219e7ae0495bcc9dfc2eca4ce52d6.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/53c/0fc/e14/53c0fce142f96daecfd5001ac45e2222.png"></div><br>  <i>ุถูุถุงุก ูุชุฏุฑุฌุฉ.</i> <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููุงุณ ุฌุฏูุฏ ูุฒูุฏ ุงููุณุงูุฉ ุจูู ููุงุตู ุงูุถูุถุงุก.  ูู ุงููุงูุน ุ ูุธุฑูุง ูุฃู ุงูุฎูุงูุง ูุจูุบ ูุทุฑูุง ุงูุฏุงุฎูู 10โ3 ูุญุฏุฉ ุ ููู ูุชู ุชุฌุงูุจูุง ุชูุงููุง ูู ุงูุจุนุฏ X. ููุน ุฐูู ุ ูุธุฑูุง ููุณูุงูุฉ ุงููุญููุฉ ููุถูุถุงุก ุ ุนูู ูุทุงู ุฃูุณุน ุ ุณูุธู ูุงุฏุฑูู ุนูู ุงูุชุนุฑู ุนูู ุฃููุงุท ุงูุชูุฑุงุฑ ุ ูู 20 ุฎููุฉ ุชูุฑูุจูุง ุ ุญุชู ูู ูู ุชุชุทุงุจู ุงูุชูุงุตูู.  ููููุง ุณุชููู ูุงุถุญุฉ ููุท ุนูู ุงูุฎุฑูุทุฉ ุจุฏูู ููุฒุงุช ูููุฒุฉ ุฃุฎุฑู. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ูุญุงุฐุงุฉ ูุฑุงูุฒ ุงูุฎูุงูุง </h2><br>  ุชุญุฑูู ุฌููุน ุงูููู ูุนุทู ุงูุฎุฑูุทุฉ ูุธูุฑูุง ุฃูุซุฑ ุทุจูุนูุฉ ุ ูููู ููุงู ุงูุนุฏูุฏ ูู ุงููุดุงูู.  ุจูุง ุฃู ุงูุฎูุงูุง ูุชุนุฑุฌุฉ ุงูุขู ุ ุชุชูุงุทุน ุชุณููุงุชูุง ูุน ุงูุดุจูุฉ.  ููู ููุงุตู ุงูุญูุงู ุจุงูููุญุฏุฑุงุช ุ ุชูุดุฃ ุดููู.  ุณูุชุฑู ุงูุดููู ูู ููุช ูุงุญู ุ ููููุง ุณูุฑูุฒ ุงูุขู ุนูู ุฃุณุทุญ ุงูุฎูุงูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/320/626/85f/32062685fe221819ba4d9375175f66ee.png"></div><br>  <i>ุฃุตุจุญุช ุงูุฎุฑูุทุฉ ุฃูู ุตุฑุงูุฉ ุ ูููู ุธูุฑุช ุงููุฒูุฏ ูู ุงููุดุงูู.</i> <br><br>  ุฃุณูู ุทุฑููุฉ ูุญู ูุดููุฉ ุงูุชูุงุทุน ูู ุฌุนู ูุฑุงูุฒ ุงูุฎูุงูุง ูุณุทุญุฉ.  ุฏุนูุง ูุง ูุบูุฑ ุฅุญุฏุงุซูุงุช Y ูู <code>HexMesh.Perturb</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perturb</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { Vector4 sample = HexMetrics.SampleNoise(position); position.x += (sample.x * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * HexMetrics.cellPerturbStrength; <span class="hljs-comment"><span class="hljs-comment">// position.y += (sample.y * 2f - 1f) * HexMetrics.cellPerturbStrength; position.z += (sample.z * 2f - 1f) * HexMetrics.cellPerturbStrength; return position; }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bfb/6f6/38e/bfb6f638e8cdb45d6178d1f18cdb723b.png"></div><br>  <i>ูุญุงุฐุงุฉ ุงูุฎูุงูุง.</i> <br><br>  ูุน ูุฐุง ุงูุชุบููุฑ ุ ุณุชุจูู ุฌููุน ุงูููุงุถุน ุงูุฑุฃุณูุฉ ุฏูู ุชุบููุฑ ุ ุณูุงุก ูู ูุฑุงูุฒ ุงูุฎูุงูุง ุฃู ุนูู ุฏุฑุฌุงุช ุงูุญูุงู.  ูุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐุง ูููู ูู ุงูุฅุฒุงุญุฉ ุงููุตูู ุฅูู โ50 โ 7.07 ููุท ูู ุงููุณุชูู XZ. <br><br>  ูุฐุง ุชุบููุฑ ุฌูุฏ ุ ูุฃูู ูุจุณุท ุชุญุฏูุฏ ุงูุฎูุงูุง ุงููุฑุฏูุฉ ููุง ูุณูุญ ููุญูุงู ุจุฃู ุชุตุจุญ ููุถููุฉ ููุบุงูุฉ.  ูููู ุณูููู ูู ุงูุฌููู ุฅุถุงูุฉ ุญุฑูุฉ ุฑุฃุณูุฉ ุตุบูุฑุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุญุฑูู ุงุฑุชูุงุน ุงูุฎููุฉ </h3><br>  ุจุฏูุงู ูู ุชุทุจูู ุงูุญุฑูุฉ ุงูุฑุฃุณูุฉ ุนูู ูู ููุฉ ุ ูููููุง ุชุทุจูููุง ุนูู ุฎููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุธู ูู ุฎููุฉ ูุณุทุญุฉ ุ ูููู ุณูุธู ุงูุชุจุงูู ุจูู ุงูุฎูุงูุง.  ุณูููู ูู ุงูููุทูู ุฃูุถูุง ุงุณุชุฎุฏุงู ูููุงุณ ูุฎุชูู ูุชุญุฑูู ุงูุงุฑุชูุงุน ุ ูุฐุง ูู ุจุฅุถุงูุชู ุฅูู <code>HexMetrics</code> .  ุชุฎูู ููุฉ 1.5 ูุญุฏุฉ ุงุฎุชูุงููุง ุทููููุง ุ ูุณุงูู ุชูุฑูุจูุง ุงุฑุชูุงุน ุฎุทูุฉ ูุงุญุฏุฉ ูู ุงูุญุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> elevationPerturbStrength = <span class="hljs-number"><span class="hljs-number">1.5f</span></span>;</code> </pre> <br>  ุชุบููุฑ ุฎุงุตูุฉ <code>HexCell.Elevation</code> ุจุญูุซ ูุชู <code>HexCell.Elevation</code> ูุฐุง ุงูุงูุชูุงู ุฅูู ุงูููุถุน ุงูุนููุฏู ููุฎููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Elevation { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> elevation; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { elevation = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; Vector3 position = transform.localPosition; position.y = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> * HexMetrics.elevationStep; position.y += (HexMetrics.SampleNoise(position).y * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * HexMetrics.elevationPerturbStrength; transform.localPosition = position; Vector3 uiPosition = uiRect.localPosition; uiPosition.z = -position.y; uiRect.localPosition = uiPosition; } }</code> </pre> <br>  ูู ุฃุฌู ุชุทุจูู ุงูููู ุนูู ุงูููุฑ ุ ูุญุชุงุฌ ุฅูู ุถุจุท ุงุฑุชูุงุน ูู ุฎููุฉ ุจุดูู <code>HexGrid.CreateCell</code> ูู <code>HexGrid.CreateCell</code> .  ุฎูุงู ุฐูู ุ ุณุชููู ุงูุดุจูุฉ ูู ุงูุจุฏุงูุฉ ูุณุทุญุฉ.  ูููู ุจุฐูู ูู ุงูููุงูุฉ ุ ุจุนุฏ ุฅูุดุงุก ูุงุฌูุฉ ุงููุณุชุฎุฏู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { โฆ cell.Elevation = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d4f/dd7/15c/d4fdd715c130c8cd8b2519ff37c837de.png"></div><br>  <i>ุงุฑุชูุงุนุงุช ุงููุงุฒุญูู ูุน ุงูุดููู.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ููุณ ุงูุงุฑุชูุงุนุงุช </h3><br>  ุธูุฑุช ุงูุนุฏูุฏ ูู ุงูุดููู ูู ุงูุดุจูุฉ ุ ูุฃูู ุนูุฏูุง ูููู ุจุชุซููุซ ุงูุดุจูุฉ ุ ูุฅููุง ูุง ูุณุชุฎุฏู ููุณ ุงุฑุชูุงุนุงุช ุงูุฎููุฉ.  ุฏุนูุง ูุถูู ุฎุงุตูุฉ ุฅูู <code>HexCell</code> ููุญุตูู ุนูู ูููุนูุง ุจุญูุซ ููููู ุงุณุชุฎุฏุงูู ูู ุฃู ููุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 Position { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> transform.localPosition; } }</code> </pre> <br>  ุงูุขู ูููููุง ุงุณุชุฎุฏุงู ูุฐู ุงูุฎุงุตูุฉ ูู <code>HexMesh.Triangulate</code> ูุชุญุฏูุฏ ูุฑูุฒ ุงูุฎููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector3 center = cell.Position; โฆ }</code> </pre> <br>  ููููููุง ุงุณุชุฎุฏุงูู ูู <code>TriangulateConnection</code> ุนูุฏ ุชุญุฏูุฏ ุงูููุงุถุน ุงูุฑุฃุณูุฉ ููุฎูุงูุง ุงููุฌุงูุฑุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateConnection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 v1, Vector3 v2 </span></span></span><span class="hljs-function">)</span></span> { โฆ Vector3 bridge = HexMetrics.GetBridge(direction); Vector3 v3 = v1 + bridge; Vector3 v4 = v2 + bridge; v3.y = v4.y = neighbor.Position.y; โฆ HexCell nextNeighbor = cell.GetNeighbor(direction.Next()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction &lt;= HexDirection.E &amp;&amp; nextNeighbor != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Vector3 v5 = v2 + HexMetrics.GetBridge(direction.Next()); v5.y = nextNeighbor.Position.y; โฆ } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/69b/9a2/d90/69b9a2d90b7f29ef57f658f8206f6dda.png"></div><br>  <i>ุงูุงุณุชุฎุฏุงู ุงููุชุณู ูุงุฑุชูุงุน ุงูุฎููุฉ.</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุญุงูุฉ ุงูุฎููุฉ </h2><br>  ุนูู ุงูุฑุบู ูู ุฃู ุงูุฎูุงูุง ูุฏููุง ุงุฎุชูุงู ุฌููู ุ ุฅูุง ุฃููุง ูุง ุชุฒุงู ุชุจุฏู ููุฃููุง ุณุฏุงุณูุงุช ูุงุถุญุฉ.  ูุฐุง ูู ุญุฏ ุฐุงุชู ููุณ ูุดููุฉ ุ ูููู ูููููุง ุชุญุณูู ูุธูุฑูู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6d5/895/e86/6d5895e8650286653b532d9c6fa1c10d.png"></div><br>  <i>ุฎูุงูุง ุณุฏุงุณูุฉ ูุงุถุญุฉ ููุนูุงู.</i> <br><br>  ุฅุฐุง ูุงู ูุฏููุง ุงููุฒูุฏ ูู ุงูููู ุ ูุณูููู ููุงู ูุฏุฑ ุฃูุจุฑ ูู ุงูุชุจุงูู ุงููุญูู.  ูุฐุง ุฏุนููุง ููุณู ูู ุญุงูุฉ ูู ุงูุฎููุฉ ุฅูู ุฌุฒุฃูู ุนู ุทุฑูู ุฅุถุงูุฉ ุงูุฌุฒุก ุงูุนููู ูู ุงูุญุงูุฉ ูู ุงูููุชุตู ุจูู ูู ุฒูุฌ ูู ุงูุฒูุงูุง.  ูุฐุง ูุนูู ุฃู <code>HexMesh.Triangulate</code> ูุฌุจ ุฃูุง ุชุถูู <code>HexMesh.Triangulate</code> ูุงุญุฏูุง ุ ุจู ูุซูุซูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector3 center = cell.Position; Vector3 v1 = center + HexMetrics.GetFirstSolidCorner(direction); Vector3 v2 = center + HexMetrics.GetSecondSolidCorner(direction); Vector3 e1 = Vector3.Lerp(v1, v2, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); AddTriangle(center, v1, e1); AddTriangleColor(cell.color); AddTriangle(center, e1, v2); AddTriangleColor(cell.color); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction &lt;= HexDirection.SE) { TriangulateConnection(direction, cell, v1, v2); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b09/03c/d20/b0903cd20983599abdc064f04c95aa4f.png"></div><br>  <i>ุงุซูุง ุนุดุฑ ุฌุงูุจูุง ุจุฏูุงู ูู ุณุชุฉ.</i> <br><br>  ูุถูู ุชุถุงุนู ุงูููู ูุงููุซูุซุงุช ุงููุฒูุฏ ูู ุงูุชุจุงูู ุฅูู ุญูุงู ุงูุฎููุฉ.  ุฏุนููุง ูุฌุนููุง ุฃูุซุฑ ุชูุงูุชูุง ูู ุฎูุงู ุฒูุงุฏุฉ ุนุฏุฏ ุงูููู ุจุซูุงุซุฉ ุฃุถุนุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 e1 = Vector3.Lerp(v1, v2, <span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); Vector3 e2 = Vector3.Lerp(v1, v2, <span class="hljs-number"><span class="hljs-number">2f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); AddTriangle(center, v1, e1); AddTriangleColor(cell.color); AddTriangle(center, e1, e2); AddTriangleColor(cell.color); AddTriangle(center, e2, v2); AddTriangleColor(cell.color);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ad2/852/e6c/ad2852e6ccbf3db0adca140818545bb3.png"></div><br>  <i>18 ุฌุงูุจ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ูุณู ุงูุถูุน ุงููุดุชุฑู </h3><br>  ุจุงูุทุจุน ุ ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุชูุณูู ููุงุตู ุงูุญุงูุฉ.  ูุฐูู ุ ุณููุฑุฑ ุญูุงู ุงูููุฉ ุงูุฌุฏูุฏุฉ ุฅูู <code>TriangulateConnection</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction &lt;= HexDirection.SE) { TriangulateConnection(direction, cell, v1, e1, e2, v2); }</code> </pre> <br>  ุฃุถู ุงููุนููุงุช ุงูููุงุณุจุฉ ุฅูู <code>TriangulateConnection</code> ุญุชู ูููููุง ุงูุนูู ูุน ุงูููู ุงูุฅุถุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateConnection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 v1, Vector3 e1, Vector3 e2, Vector3 v2 </span></span></span><span class="hljs-function">)</span></span> { โฆ }</code> </pre> <br>  ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุญุณุงุจ ุงูุญูุงู ุงูุฅุถุงููุฉ ููุญูุงู ููุฎูุงูุง ุงููุฌุงูุฑุฉ.  ูููููุง ุญุณุงุจูุง ุจุนุฏ ุชูุตูู ุงูุฌุณุฑ ุจุงูุฌุงูุจ ุงูุขุฎุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 bridge = HexMetrics.GetBridge(direction); Vector3 v3 = v1 + bridge; Vector3 v4 = v2 + bridge; v3.y = v4.y = neighbor.Position.y; Vector3 e3 = Vector3.Lerp(v3, v4, <span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); Vector3 e4 = Vector3.Lerp(v3, v4, <span class="hljs-number"><span class="hljs-number">2f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>);</code> </pre> <br>  ุจุนุฏ ุฐูู ูุญุชุงุฌ ุฅูู ุชุบููุฑ ุชุซููุซ ุงูุถูุน.  ุญุชู ูุชุฌุงูู ุงูููุญุฏุฑุงุช ุจุงูุญูุงู ุ ุฃุถู ุซูุงุซุฉ ููุท ุจุฏูุงู ูู ุฑุจุงุนูุฉ ูุงุญุฏุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.GetEdgeType(direction) == HexEdgeType.Slope) { TriangulateEdgeTerraces(v1, v2, cell, v3, v4, neighbor); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { AddQuad(v1, e1, v3, e3); AddQuadColor(cell.color, neighbor.color); AddQuad(e1, e2, e3, e4); AddQuadColor(cell.color, neighbor.color); AddQuad(e2, v2, e4, v4); AddQuadColor(cell.color, neighbor.color); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/afa/9d6/708/afa9d67080045b6ea2951a715c569003.png"></div><br>  <i>ุงุชุตุงูุงุช ููุณูุฉ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงุชุญุงุฏ ุญูุงู ุงูุญูุงู </h3><br>  ูุธุฑูุง ููุตู ุงูุญูุงู ุ ูุญุชุงุฌ ุงูุขู ุฅูู ุฃุฑุจุนุฉ ุฑุคูุณ ุ ุณูููู ูู ุงูููุทูู ุฏูุฌูุง ูู ูุฌููุนุฉ.  ูุฐุง ุฃูุซุฑ ููุงุกูุฉ ูู ุงูุนูู ูุน ุฃุฑุจุนุฉ ุฑุคูุณ ูุณุชููุฉ.  ูู <code>EdgeVertices</code> ุจููุฉ <code>EdgeVertices</code> ุจุณูุทุฉ ููุฐุง.  ูุฌุจ ุฃู ูุญุชูู ุนูู ุฃุฑุจุนุฉ ุฑุคูุณ ุชุชุญุฑู ุจุงุชุฌุงู ุนูุงุฑุจ ุงูุณุงุนุฉ ุนูู ุทูู ุญุงูุฉ ุงูุฎููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> EdgeVertices { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 v1, v2, v3, v4; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃูุง ูุฌุจ ุฃู ุชููู ูุงุจูุฉ ููุชุณูุณูุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุณูุณุชุฎุฏู ูุฐุง ุงููููู ููุท ููุชุซููุซ.  ูู ูุฐู ุงููุฑุญูุฉ ุ ูุง ูุญุชุงุฌ ุฅูู ุชุฎุฒูู ุฑุคูุณ ุงูุญูุงู ุ ูุฐูู ููุณ ูู ุงูุถุฑูุฑู ุฃู ุชููู ูุงุจูุฉ ููุชุณูุณู. </div></div><br>  ุฃุถู ุทุฑููุฉ ุจูุงุก ููุงุณุจุฉ ููุง ุ ูุงูุชู ุณุชุชุนุงูู ูุน ุญุณุงุจ ุงูููุงุท ุงููุณูุทุฉ ููุญุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EdgeVertices</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 corner1, Vector3 corner2</span></span></span><span class="hljs-function">)</span></span> { v1 = corner1; v2 = Vector3.Lerp(corner1, corner2, <span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); v3 = Vector3.Lerp(corner1, corner2, <span class="hljs-number"><span class="hljs-number">2f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); v4 = corner2; }</code> </pre> <br>  ูููููุง ุงูุขู ุฅุถุงูุฉ ุทุฑููุฉ ุชุซููุซ ูููุตูุฉ ุฅูู <code>HexMesh</code> ูุฅูุดุงุก ูุฑูุญุฉ ูู ุงููุซูุซุงุช ุจูู ูุฑูุฒ ุงูุฎููุฉ ูุฃุญุฏ ุญูุงููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeFan</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 center, EdgeVertices edge, Color color</span></span></span><span class="hljs-function">)</span></span> { AddTriangle(center, edge.v1, edge.v2); AddTriangleColor(color); AddTriangle(center, edge.v2, edge.v3); AddTriangleColor(color); AddTriangle(center, edge.v3, edge.v4); AddTriangleColor(color); }</code> </pre> <br>  ูุทุฑููุฉ ูุชุซููุซ ุดุฑูุท ุฑุจุงุนู ุงูุฒูุงูุง ุจูู ุญุงูุชูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeStrip</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices e1, Color c1, EdgeVertices e2, Color c2 </span></span></span><span class="hljs-function">)</span></span> { AddQuad(e1.v1, e1.v2, e2.v1, e2.v2); AddQuadColor(c1, c2); AddQuad(e1.v2, e1.v3, e2.v2, e2.v3); AddQuadColor(c1, c2); AddQuad(e1.v3, e1.v4, e2.v3, e2.v4); AddQuadColor(c1, c2); }</code> </pre> <br>  ูุฐุง ุณูุณูุญ ููุง ุจุชุจุณูุท ุทุฑููุฉ <code>Triangulate</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector3 center = cell.Position; EdgeVertices e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( center + HexMetrics.GetFirstSolidCorner(direction), center + HexMetrics.GetSecondSolidCorner(direction) ); TriangulateEdgeFan(center, e, cell.color); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction &lt;= HexDirection.SE) { TriangulateConnection(direction, cell, e); } }</code> </pre> <br>  ุฏุนูุง ููุชูู ุฅูู <code>TriangulateConnection</code> .  ุงูุขู ูููููุง ุงุณุชุฎุฏุงู <code>TriangulateEdgeStrip</code> ุ ูููู ูุฌุจ ุฅุฌุฑุงุก ุจุฏุงุฆู ุฃุฎุฑู.  ุญูุซ ุงุณุชุฎุฏููุง <code>v1</code> ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู <code>e1.v1</code> .  ูุจุงููุซู ุ ูุตุจุญ <code>v2</code> <code>e1.v4</code> ุ ู <code>v3</code> ูุตุจุญ <code>e2.v1</code> ุ ู <code>v4</code> ูุตุจุญ <code>e2.v4</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateConnection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, EdgeVertices e1 </span></span></span><span class="hljs-function">)</span></span> { HexCell neighbor = cell.GetNeighbor(direction); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Vector3 bridge = HexMetrics.GetBridge(direction); bridge.y = neighbor.Position.y - cell.Position.y; EdgeVertices e2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( e1.v1 + bridge, e1.v4 + bridge ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.GetEdgeType(direction) == HexEdgeType.Slope) { TriangulateEdgeTerraces(e1.v1, e1.v4, cell, e2.v1, e2.v4, neighbor); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateEdgeStrip(e1, cell.color, e2, neighbor.color); } HexCell nextNeighbor = cell.GetNeighbor(direction.Next()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction &lt;= HexDirection.E &amp;&amp; nextNeighbor != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Vector3 v5 = e1.v4 + HexMetrics.GetBridge(direction.Next()); v5.y = nextNeighbor.Position.y; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation &lt;= neighbor.Elevation) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.Elevation &lt;= nextNeighbor.Elevation) { TriangulateCorner( e1.v4, cell, e2.v4, neighbor, v5, nextNeighbor ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateCorner( v5, nextNeighbor, e1.v4, cell, e2.v4, neighbor ); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Elevation &lt;= nextNeighbor.Elevation) { TriangulateCorner( e2.v4, neighbor, v5, nextNeighbor, e1.v4, cell ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateCorner( v5, nextNeighbor, e1.v4, cell, e2.v4, neighbor ); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุชูุณูู ุงูุญุงูุฉ </h3><br>  ูุญู ุจุญุงุฌุฉ ูุชูุณูู ุงูุญูุงู.  ูุฐูู ุ ููุฑ ุงูุญูุงู ุฅูู <code>TriangulateEdgeTerraces</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.GetEdgeType(direction) == HexEdgeType.Slope) { TriangulateEdgeTerraces(e1, cell, e2, neighbor); }</code> </pre> <br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุนุฏูู <code>TriangulateEdgeTerraces</code> ุจุญูุซ ูุชู ุงูุงุณุชููุงุก ุจูู ุงูุญูุงู ูููุณ ุจูู ุฃุฒูุงุฌ ุงูููู.  ูููุชุฑุถ ุฃู <code>EdgeVertices</code> ูุฏููุง ุทุฑููุฉ ุซุงุจุชุฉ ููุงุณุจุฉ ููููุงู ุจุฐูู.  ุณูุณูุญ ููุง ูุฐุง ุจุชุจุณูุท <code>TriangulateEdgeTerraces</code> ุจุฏูุงู ูู ุชุนููุฏูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices begin, HexCell beginCell, EdgeVertices end, HexCell endCell </span></span></span><span class="hljs-function">)</span></span> { EdgeVertices e2 = EdgeVertices.TerraceLerp(begin, end, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c2 = HexMetrics.TerraceLerp(beginCell.color, endCell.color, <span class="hljs-number"><span class="hljs-number">1</span></span>); TriangulateEdgeStrip(begin, beginCell.color, e2, c2); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { EdgeVertices e1 = e2; Color c1 = c2; e2 = EdgeVertices.TerraceLerp(begin, end, i); c2 = HexMetrics.TerraceLerp(beginCell.color, endCell.color, i); TriangulateEdgeStrip(e1, c1, e2, c2); } TriangulateEdgeStrip(e2, c2, end, endCell.color); }</code> </pre> <br>  ุชููู ุทุฑููุฉ <code>EdgeVertices.TerraceLerp</code> ุจุจุณุงุทุฉ ุจุงุณุชููุงุก ุงูุญูุงู ุจูู ุงูุฃุฒูุงุฌ ุงูุฃุฑุจุนุฉ ููุฑุคูุณ ูู <code>EdgeVertices.TerraceLerp</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> EdgeVertices </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TerraceLerp</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices a, EdgeVertices b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> step</span></span></span><span class="hljs-function">)</span></span> { EdgeVertices result; result.v1 = HexMetrics.TerraceLerp(a.v1, b.v1, step); result.v2 = HexMetrics.TerraceLerp(a.v2, b.v2, step); result.v3 = HexMetrics.TerraceLerp(a.v3, b.v3, step); result.v4 = HexMetrics.TerraceLerp(a.v4, b.v4, step); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a7d/ead/906/a7dead9066cbd1f7ddd29ca751d81cb0.png"></div><br>  <i>ุญูุงู ููุณูุฉ.</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุฑุจุท ุงูููุญุฏุฑุงุช ูุงูุญูุงู </h2><br>  ุญุชู ุงูุขู ุ ุชุฌุงูููุง ุงูุดููู ูู ุชูุงุทุน ุงูููุญุฏุฑุงุช ูุงูุญูุงู.  ุญุงู ุงูููุช ูุญู ูุฐู ุงููุดููุฉ.  ุฏุนููุง ุฃููุงู ูููู ูุธุฑุฉ ุนูู ุญุงูุงุช ุงูููุญุฏุฑ ุงูููุญุฏุฑ ุงูููุญุฏุฑ (OSS) ูุงูููุญุฏุฑ ุงูููุญุฏุฑ ุงูููุญุฏุฑ (SOS). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/402/951/0fa/4029510fa08226cc4e4aee18faf1959b.png"></div><br>  <i>ุซููุจ ุดุจูุฉ.</i> <br><br>  ุชูุดุฃ ุงููุดููุฉ ูุฃู ููู ุงูุญุฏูุฏ ูุฏ ุชุญุฑูุช.  ูุฐุง ูุนูู ุฃููู ุงูุขู ูุง ูุณุชูููู ุจุงูุถุจุท ุนูู ุฌุงูุจ ุงูุฌุฑู ุ ููุง ูุคุฏู ุฅูู ุชุตุฏุน.  ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ูุฐู ุงูุซููุจ ุบูุฑ ูุฑุฆูุฉ ูุฃุญูุงููุง ูุงูุชุฉ ูููุธุฑ. <br><br>  ุงูุญู ูู ุนุฏู ุชุญุฑูู ุงูุฌุฒุก ุงูุนููู ูู ุงูุญุฏูุฏ.  ูุฐุง ูุนูู ุฃููุง ุจุญุงุฌุฉ ููุณูุทุฑุฉ ุนูู ูุง ุฅุฐุง ูุงูุช ุงูููุทุฉ ุณูุชู ููููุง.  ุฃุณูู ุทุฑููุฉ ูู ุฅูุดุงุก ุจุฏูู <code>AddTriangle</code> ูุง ูุญุฑู ุงูููู ุนูู ุงูุฅุทูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddTriangleUnperturbed</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 v1, Vector3 v2, Vector3 v3</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> vertexIndex = vertices.Count; vertices.Add(v1); vertices.Add(v2); vertices.Add(v3); triangles.Add(vertexIndex); triangles.Add(vertexIndex + <span class="hljs-number"><span class="hljs-number">1</span></span>); triangles.Add(vertexIndex + <span class="hljs-number"><span class="hljs-number">2</span></span>); }</code> </pre> <br>  ูู ุจุชุบููุฑ <code>TriangulateBoundaryTriangle</code> ุจุญูุซ ูุณุชุฎุฏู ูุฐุง ุงูุฃุณููุจ.  ูุฐุง ูุนูู ุฃูู ุณูุชุนูู ุนููู ุชุญุฑูู ุฌููุน ุงูููู ุตุฑุงุญุฉ ุ ุจุงุณุชุซูุงุก ุงูุญุฏูุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateBoundaryTriangle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 boundary, Color boundaryColor </span></span></span><span class="hljs-function">)</span></span> { Vector3 v2 = HexMetrics.TerraceLerp(begin, left, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c2 = HexMetrics.TerraceLerp(beginCell.color, leftCell.color, <span class="hljs-number"><span class="hljs-number">1</span></span>); AddTriangleUnperturbed(Perturb(begin), Perturb(v2), boundary); AddTriangleColor(beginCell.color, c2, boundaryColor); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { Vector3 v1 = v2; Color c1 = c2; v2 = HexMetrics.TerraceLerp(begin, left, i); c2 = HexMetrics.TerraceLerp(beginCell.color, leftCell.color, i); AddTriangleUnperturbed(Perturb(v1), Perturb(v2), boundary); AddTriangleColor(c1, c2, boundaryColor); } AddTriangleUnperturbed(Perturb(v2), Perturb(left), boundary); AddTriangleColor(c2, leftCell.color, boundaryColor); }</code> </pre> <br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ูุง ููู: ูุธุฑูุง ูุฃููุง ูุง ูุณุชุฎุฏู <code>v2</code> ููุญุตูู ุนูู ููุทุฉ ุฃุฎุฑู ุ ูููููุง ููููุง ุนูู ุงูููุฑ.  ูุฐุง ุชุญุณูู ุจุณูุท ููููู ูู ูููุฉ ุงูููุฏ ุ ูุฐูู ุฏุนููุง ููุฏูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateBoundaryTriangle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 boundary, Color boundaryColor </span></span></span><span class="hljs-function">)</span></span> { Vector3 v2 = Perturb(HexMetrics.TerraceLerp(begin, left, <span class="hljs-number"><span class="hljs-number">1</span></span>)); Color c2 = HexMetrics.TerraceLerp(beginCell.color, leftCell.color, <span class="hljs-number"><span class="hljs-number">1</span></span>); AddTriangleUnperturbed(Perturb(begin), v2, boundary); AddTriangleColor(beginCell.color, c2, boundaryColor); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { Vector3 v1 = v2; Color c1 = c2; v2 = Perturb(HexMetrics.TerraceLerp(begin, left, i)); c2 = HexMetrics.TerraceLerp(beginCell.color, leftCell.color, i); AddTriangleUnperturbed(v1, v2, boundary); AddTriangleColor(c1, c2, boundaryColor); } AddTriangleUnperturbed(v2, Perturb(left), boundary); AddTriangleColor(c2, leftCell.color, boundaryColor); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3fd/221/0ed/3fd2210ed0a8148ba9d39ef1655848e8.png"></div><br>  <i>ุญุฏูุฏ ุบูุฑ ูููููุฉ.</i> <br><br>  ูุจุฏู ุฃูุถู ุ ููููุง ูู ููุชูู ุจุนุฏ.  ุฏุงุฎู ุทุฑููุฉ <code>TriangulateCornerTerracesCliff</code> ุ ูุชู ุงุณุชููุงุก ููุทุฉ ุงูุญุฏูุฏ ุจูู ุงูููุทุชูู ุงููููู ูุงููุณุฑู.  ููุน ุฐูู ุ ูู ูุชู ููู ูุฐู ุงูููุงุท ุญุชู ุงูุขู.  ููู ุชุชูุงูู ููุทุฉ ุงูุญุฏูุฏ ูุน ุงูุฌุฑู ุงููุงุชุฌ ุ ูุญุชุงุฌ ุฅูู ุงูุงุณุชููุงุก ุจูู ุงูููุงุท ุงููููููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 boundary = Vector3.Lerp(Perturb(begin), Perturb(right), b);</code> </pre> <br>  ูููุทุจู ุงูุดูุก ููุณู ุนูู ุทุฑููุฉ <code>TriangulateCornerCliffTerraces</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 boundary = Vector3.Lerp(Perturb(begin), Perturb(left), b);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c18/917/670/c189176704e7ebcdfd92bc6a1cffaee3.png"></div><br>  <i>ุฐูุจุช ุงูุซููุจ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ููุญุฏุฑุงุช ูุฒุฏูุฌุฉ ูููุญุฏุฑ </h3><br>  ูู ุฌููุน ุงูุญุงูุงุช ุงูุฅุดูุงููุฉ ุงููุชุจููุฉ ุ ููุฌุฏ ุฌุฑูุงู ูููุญุฏุฑ ูุงุญุฏ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/408/f2f/4a6/408f2f4a6fca5fffd8659b4380f59e51.png"></div><br>  <i>ุญูุฑุฉ ูุจูุฑุฉ ุจุณุจุจ ูุซูุซ ูุงุญุฏ.</i> <br><br>  ูุชู ุญู ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุชุญุฑูู ูุซูุซ ูุงุญุฏ ูุฏูููุง ูู ุงููุชูุฉ <code>else</code> ูู ููุงูุฉ <code>TriangulateCornerTerracesCliff</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { AddTriangleUnperturbed(Perturb(left), Perturb(right), boundary); AddTriangleColor(leftCell.color, rightCell.color, boundaryColor); }</code> </pre> <br>  ูููุทุจู ุงูุดูุก ููุณู ุนูู <code>TriangulateCornerCliffTerraces</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { AddTriangleUnperturbed(Perturb(left), Perturb(right), boundary); AddTriangleColor(leftCell.color, rightCell.color, boundaryColor); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9ff/b34/64a/9ffb3464a6de3dc443cede9d42797022.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฎูุต ูู ุฃุญุฏุซ ุงูุดููู. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุชูุงู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุฏููุง ุดุจูุฉ ูุดููุฉ ุตุญูุญุฉ ุชูุงููุง. </font><font style="vertical-align: inherit;">ูุนุชูุฏ ูุธูุฑู ุนูู ุงูุถุฌูุฌ ุงููุญุฏุฏ ูุญุฌูู ูููู ุงูุชุดููู. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ูุฏ ูุจุฏู ุงูุชุดููู ููููุง ุฌุฏูุง. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุชูุงูุช ูุจุฏู ุฌููููุง ุ ุฅูุง ุฃููุง ูุง ูุฑูุฏ ุฃู ุชูุญุฑู ุงูุฎูุงูุง ูุซูุฑูุง ุนู ุงูุดุจูุฉ ุงูุฒูุฌูุฉ. </font><font style="vertical-align: inherit;">ูู ุงูููุงูุฉ ุ ูุง ุฒููุง ูุณุชุฎุฏููุง ูุชุญุฏูุฏ ุงูุฎููุฉ ุงูุชู ุณูุชู ุชุบููุฑ ุญุฌููุง. </font><font style="vertical-align: inherit;">ูุฅุฐุง ูุงู ุญุฌู ุงูุฎูุงูุง ูุฎุชูู ูุซูุฑูุง ุ ูุณูููู ูู ุงูุตุนุจ ุนูููุง ูุถุน ุงููุญุชููุงุช ูููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/35f/32e/d06/35f32ed066f03b1079ed0bec70ba83ca.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/eac/3f5/d6c/eac3f5d6cd6a1e65185d1aec48e8abb0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุจูุงุช ุบูุฑ ูุดููุฉ ููุดููุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏู ุฃู ุงูููุฉ 5 ูุชุดููู ุงูุฎูุงูุง ูุจูุฑุฉ ุฌุฏูุง.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดููู ุงูุฎูุงูุง ูู 0 ุฅูู 5.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ูุฎูุถูุง ุฅูู 4 ูุฒูุงุฏุฉ ุฑุงุญุฉ ุงูุดุจูุฉ ุ ุฏูู ุฌุนููุง ุตุญูุญุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุถูู ุฃู ุฃูุตู ุฅุฒุงุญุฉ XZ ุณุชููู โ32 โ 5.66 ูุญุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cellPerturbStrength = <span class="hljs-number"><span class="hljs-number">4f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/803/2f6/b8d/8032f6b8d0cf048f5d55c30e2d0e465d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฉ ุชุดููู ุงูุฎููุฉ 4.</font></font></i> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุฉ ุฃุฎุฑู ูููู ุชุบููุฑูุง ูู ูุนุงูู ุงูุชูุงูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ุฒุฏูุงูุง ุ ูุณุชุตุจุญ ุงููุฑุงูุฒ ุงููุณุทุญุฉ ููุฎูุงูุง ุฃูุจุฑ ุ ุฃู ุฃูู ุณูููู ููุงู ูุณุงุญุฉ ุฃูุจุฑ ูููุญุชูู ุงููุณุชูุจูู. </font><font style="vertical-align: inherit;">ูุจุทุจูุนุฉ ุงูุญุงู ุ ุณูุตุจุญูู ุจุฐูู ุณุฏุงุณูุฉ.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูู ุงููุฒุงูุฉ ูู 0.75 ุฅูู 0.95. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒูุงุฏุฉ ุทูููุฉ ูู ูุนุงูู ุงููุฒุงูุฉ ุฅูู 0.8 ุณุชุจุณุท ุญูุงุชูุง ููููุงู ูู ุงููุณุชูุจู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> solidFactor = <span class="hljs-number"><span class="hljs-number">0.8f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a9a/9a2/036/a9a9a2036fbcd0e4e5f11e56078911c1.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูู ุงููุฒุงูุฉ 0.8. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูุฏ ุชูุงุญุธ ุฃู ุงูุงุฎุชูุงูุงุช ุจูู ูุณุชููุงุช ุงูุงุฑุชูุงุน ุดุฏูุฏุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ููุงุณุจ ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฅูุดุงุก ุงูุดุจูุฉ ุจุดูู ุตุญูุญ ุ ูููููุง ูุฏ ุงูุชูููุง ุจุงููุนู ูู ุฐูู. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุฎูุถูุง ุฅูู ูุญุฏุฉ ูุงุญุฏุฉ ููู ุฎุทูุฉ ุ ุฃู 3.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> elevationStep = <span class="hljs-number"><span class="hljs-number">3f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5cc/4b0/028/5cc4b002843f822556c7ced67b9f54db.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชูููู ุฏุฑุฌุฉ ุงูุตูุช ุฅูู 3.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุฃูุถูุง ุชุบููุฑ ููุฉ ุชุดููู ุงูููุนุจ. </font><font style="vertical-align: inherit;">ูููู ุงูุขู ุชุจูุบ ูููุชูุง 1.5 ุ ููู ูุง ูุนุงุฏู ูุตู ุฎุทูุฉ ูู ุงูุงุฑุชูุงุน ุ ููู ูุง ููุงุณุจูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณูุญ ุงูุฏุฑุฌุงุช ุงูุตุบูุฑุฉ ูู ุงููุฑุชูุนุงุช ุจุงุณุชุฎุฏุงู ุฃูุซุฑ ููุทููุฉ ูุฌููุน ูุณุชููุงุช ุงูุงุฑุชูุงุน ุงูุณุจุนุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุฒูุฏ ูู ุชููุน ุงูุฎุฑูุทุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f63/9b3/aac/f639b3aac128c4c72c28fa85d68cc0e4.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุณุจุนุฉ ูุณุชููุงุช ูู ุงููุฑุชูุนุงุช. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 5: ุจุทุงูุงุช ุฃูุจุฑ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณู ุงูุดุจูุฉ ุฅูู ุฃุฌุฒุงุก. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุชุญูู ูู ุงููุงููุฑุง. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูููู ุงูุฃููุงู ูุงูุงุฑุชูุงุนุงุช ุจุดูู ูููุตู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุฎุฏู ุงููุฑุดุงุฉ ุงูููุจุฑุฉ ููุฎูุงูุง. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ูุญู ูุนูู ูุน ุฎุฑูุทุฉ ุตุบูุฑุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ุญุงู ุงูููุช ูุฒูุงุฏุชู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0c8/11c/4b4/0c811c4b480c13b584a2b824fdae1cee.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงู ุงูููุช ููุชูุจูุฑ.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุดุธุงูุง ุดุจูุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููููุง ุฌุนู ุงูุดุจูุฉ ูุจูุฑุฉ ุฌุฏูุง ุ ูุฃููุง ููุงุฌู ุญุฏูุฏ ูุง ูููู ุงุญุชูุงุคู ูู ุดุจูุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ููู ุชุญู ูุฐู ุงููุดููุฉุ </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏู ุดุจูุงุช ูุชุนุฏุฏุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุชูุณูู ุดุจูุชูุง ุฅูู ุนุฏุฉ ุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุดุธุงูุง ูุณุชุทููุฉ ุฐุงุช ุญุฌู ุซุงุจุช.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/423/453/db2/423453db217ed74da2457198c576ef63.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุณูู ุงูุดุจูุฉ ุฅูู ุฃุฌุฒุงุก 3 ร 3.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ูุณุชุฎุฏู 5 ร 5 ูุชู ุ ุฃู 25 ุฎููุฉ ููู ุฌุฒุก. </font><font style="vertical-align: inherit;">ุญุฏุฏูุง </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkSizeX = <span class="hljs-number"><span class="hljs-number">5</span></span>, chunkSizeZ = <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุญุฌู ุงูุฌุฒุก ุงูุฐู ูููู ุงุนุชุจุงุฑู ููุงุณุจูุงุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  .       ,     .      .      ,       (frustum culling),       .            . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุง ูููููุง ุงุณุชุฎุฏุงู ุฃู ุญุฌู ููุดุจูุฉ ุ ูุฌุจ ุฃู ูููู ูุถุงุนููุง ูุญุฌู ุงูุฌุฒุก. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ูุบูุฑูุง </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูุง ุชุญุฏุฏ ุญุฌููุง ููุณ ูู ุฎูุงูุง ูููุตูุฉ ุ ูููู ูู ุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ูู ุจุชุนููู ุงูุญุฌู ุงูุงูุชุฑุงุถู ุนูู 4 ร 3 ุฃุฌุฒุงุก ุ ุฃู 12 ุฌุฒุกูุง ููุท ุฃู 300 ุฎููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ูุญุตู ุนูู ุจุทุงูุฉ ุงุฎุชุจุงุฑ ูุฑูุญุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkCountX = <span class="hljs-number"><span class="hljs-number">4</span></span>, chunkCountZ = <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅููุง ููุงุตู ุงุณุชุฎุฏุงู </font></font><code>width</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>height</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููููู ุงูุขู ุฃุตุจุญูุง ุงูุฎุงุต. </font><font style="vertical-align: inherit;">ูุฅุนุงุฏุฉ ุชุณููุชูุง ุจู </font></font><code>cellCountX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>cellCountZ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏู ุงููุญุฑุฑ ูุฅุนุงุฏุฉ ุชุณููุฉ ูู ุชูุฑุงุฑุงุช ูุฐู ุงููุชุบูุฑุงุช ุฏูุนุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ุงูุขู ุณูููู ูู ุงููุงุถุญ ุนูุฏูุง ูุชุนุงูู ูุน ุนุฏุฏ ุงูุฃุฌุฒุงุก ุฃู ุงูุฎูุงูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public int width = 6; // public int height = 6; int cellCountX, cellCountZ;</span></span></code> </pre> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/227/ff4/160/227ff41602f115787a8a0e5d98ca89c9.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏุฏ ุงูุญุฌู ูู ุงูุฃุฌุฒุงุก. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุบููุฑ </font></font><code>Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูุชู ุญุณุงุจ ุนุฏุฏ ุงูุฎูุงูุง ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูู ุนุฏุฏ ุงูุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ูุณูุท ุงูุถูุก ุนูู ุฅูุดุงุก ุงูุฎูุงูุง ุจุทุฑููุฉ ูููุตูุฉ ุ ุญุชู ูุง ุชุณุฏ </font></font><code>Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexMetrics.noiseSource = noiseSource; gridCanvas = GetComponentInChildren&lt;Canvas&gt;(); hexMesh = GetComponentInChildren&lt;HexMesh&gt;(); cellCountX = chunkCountX * HexMetrics.chunkSizeX; cellCountZ = chunkCountZ * HexMetrics.chunkSizeZ; CreateCells(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCells</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { cells = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCell[cellCountZ * cellCountX]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> z = <span class="hljs-number"><span class="hljs-number">0</span></span>, i = <span class="hljs-number"><span class="hljs-number">0</span></span>; z &lt; cellCountZ; z++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; cellCountX; x++) { CreateCell(x, z, i++); } } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุดุธุงูุง ุงูุฌุงูุฒุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุตู ุฃุฌุฒุงุก ุงูุดุจูุฉ ุ ูุญุชุงุฌ ุฅูู ููุน ุฌุฏูุฏ ูู ุงูููููุงุช. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexGridChunk</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุณูููู ุจุฅูุดุงุก ุฌุฒุก ุงูุฌุงูุฒุฉ. </font><font style="vertical-align: inherit;">ุณููุนู ุฐูู ุจุชูุฑุงุฑ ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Grid</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฅุนุงุฏุฉ ุชุณููุชู ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Grid Chunk</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ุจุฅุฒุงูุฉ ุงููููู ุงูุฎุงุต ุจู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุถุงูุฉ ูููู ุจุฏูุงู ูู ุฐูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุซู ูู ุจุชุญูููู ุฅูู ุณุงุจู ุงูุฅุนุฏุงุฏ ูุฅุฒุงูุฉ ุงููุงุฆู ูู ุงููุดูุฏ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/106/a02/bea/106a02bead67c37151be26d5f6a4bea9.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1cb/586/7a3/1cb5867a3851159ce2bf1747a4e213bc.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุนุฉ ุฌุงูุฒุฉ ูุน ููุงุด ุฎุงุต ุจูุง ูุดุจูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู ุณูููู ุจุฅูุดุงุก ุญุงูุงุช ูู ูุฐู ุงูุฃุฌุฒุงุก </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณูู ูุนุทูู ุฑุงุจุทูุง ุฅูู ุงููููู ุงูุฌุงูุฒ ููุฌุฒุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexGridChunk chunkPrefab;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2a9/6b8/882/2a96b8882c5d6cc5bdb6345d5217ae83.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุน ุดุธุงูุง. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ูุซููุงุช ููุดุธุงูุง ูุดุจู ุฅูู ุญุฏ ูุจูุฑ ุฅูุดุงุก ูุซููุงุช ููุฎูุงูุง. </font><font style="vertical-align: inherit;">ุณูุชุชุจุนูู ุจูุณุงุนุฏุฉ ูุฌููุนุฉ ุ ููุณุชุฎุฏู ุญููุฉ ูุฒุฏูุฌุฉ ูููุฆู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexGridChunk[] chunks; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ CreateChunks(); CreateCells(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateChunks</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { chunks = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexGridChunk[chunkCountX * chunkCountZ]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> z = <span class="hljs-number"><span class="hljs-number">0</span></span>, i = <span class="hljs-number"><span class="hljs-number">0</span></span>; z &lt; chunkCountZ; z++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; chunkCountX; x++) { HexGridChunk chunk = chunks[i++] = Instantiate(chunkPrefab); chunk.transform.SetParent(transform); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุจู ุชููุฆุฉ ุฌุฒุก ูุง ููููุฉ ุชููุฆุฉ ุดุจูุฉ ูู ุงูุณุฏุงุณูุงุช. </font><font style="vertical-align: inherit;">ุฅููุง ุชุถุน ูู ุดูุก ูู </font></font><code>Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุงุฎู ูุชููู ุจุฅุฌุฑุงุก ุงูุชุซููุซ </font></font><code>Start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุชุทูุจ ุฅุดุงุฑุฉ ุฅูู ููุงุดูุง ูุดุจูุชูุง ุ ุจุงูุฅุถุงูุฉ ุฅูู ุตููู ููุฎูุงูุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุฅู ุงูุฌุฒุก ูู ูุฎูู ูุฐู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ุณุชุณุชูุฑ ุงูุดุจูุฉ ูู ุงูููุงู ุจุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexGridChunk</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { HexCell[] cells; HexMesh hexMesh; Canvas gridCanvas; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gridCanvas = GetComponentInChildren&lt;Canvas&gt;(); hexMesh = GetComponentInChildren&lt;HexMesh&gt;(); cells = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCell[HexMetrics.chunkSizeX * HexMetrics.chunkSizeZ]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.Triangulate(cells); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนููู ุงูุฎูุงูุง ุฅูู ุฃุฌุฒุงุก </font></font></h3><br> <code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุฒุงู ูุฎูู ุฌููุน ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุทุจูุนู ุ ููููุง ูุญุชุงุฌ ุงูุขู ุฅูู ุฅุถุงูุฉ ูู ุฎููุฉ ุฅูู ุฌุฒุก ููุงุณุจ ุ ูุนุฏู ุชุนููููุง ุจุงุณุชุฎุฏุงู ุดุจูุชูุง ูููุญุฉ ุงูููุงุด ุงูุฎุงุตุฉ ุจูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { โฆ HexCell cell = cells[i] = Instantiate&lt;HexCell&gt;(cellPrefab); <span class="hljs-comment"><span class="hljs-comment">// cell.transform.SetParent(transform, false); cell.transform.localPosition = position; cell.coordinates = HexCoordinates.FromOffsetCoordinates(x, z); cell.color = defaultColor; โฆ Text label = Instantiate&lt;Text&gt;(cellLabelPrefab); // label.rectTransform.SetParent(gridCanvas.transform, false); label.rectTransform.anchoredPosition = new Vector2(position.x, position.z); label.text = cell.coordinates.ToStringOnSeparateLines(); cell.uiRect = label.rectTransform; cell.Elevation = 0; AddCellToChunk(x, z, cell); } void AddCellToChunk (int x, int z, HexCell cell) { }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุนุซูุฑ ุนูู ุฌุฒุก ุงูุตุญูุญ ุจุงุณุชุฎุฏุงู ุนุฏุฏ ุตุญูุญ ุชูุณูู </font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>z</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุญุฌู ุดุธูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddCellToChunk</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkX = x / HexMetrics.chunkSizeX; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkZ = z / HexMetrics.chunkSizeZ; HexGridChunk chunk = chunks[chunkX + chunkZ * chunkCountX]; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ุงููุชุงุฆุฌ ุงููุณูุทุฉ ุ ูููููุง ุฃูุถูุง ุชุญุฏูุฏ ุงูููุฑุณ ุงููุญูู ููุฎููุฉ ูู ูุฐุง ุงูุฌุฒุก. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ููููู ุฅุถุงูุฉ ุฎููุฉ ุฅูู ุงูุฌุฒุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddCellToChunk</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkX = x / HexMetrics.chunkSizeX; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> chunkZ = z / HexMetrics.chunkSizeZ; HexGridChunk chunk = chunks[chunkX + chunkZ * chunkCountX]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> localX = x - chunkX * HexMetrics.chunkSizeX; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> localZ = z - chunkZ * HexMetrics.chunkSizeZ; chunk.AddCell(localX + localZ * HexMetrics.chunkSizeX, cell); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู </font></font><code>HexGridChunk.AddCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุถุน ุงูุฎููุฉ ูู ุงูุตููู ุงูุฎุงุต ุจูุง ุ ุซู ุชููู ุจุชุนููู ุงูุนูุงุตุฑ ุงูุฑุฆูุณูุฉ ููุฎููุฉ ููุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฎุงุตุฉ ุจูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { cells[index] = cell; cell.transform.SetParent(transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); cell.uiRect.SetParent(gridCanvas.transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุณุงุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ูุฐู ุงูููุทุฉ ุ </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุงูุชุฎูุต ูู ููุงุด ุฃุทูุงูู ูุดุจูุฉ ุณุฏุงุณูุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Canvas gridCanvas; // HexMesh hexMesh; void Awake () { HexMetrics.noiseSource = noiseSource; // gridCanvas = GetComponentInChildren&lt;Canvas&gt;(); // hexMesh = GetComponentInChildren&lt;HexMesh&gt;(); โฆ } // void Start () { // hexMesh.Triangulate(cells); // } // public void Refresh () { // hexMesh.Triangulate(cells); // }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุง ุฃููุง ุชุฎูุตูุง </font></font><code>Refresh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุนุฏ </font><font style="vertical-align: inherit;">ุนูููุง </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { cell.color = activeColor; cell.Elevation = activeElevation; <span class="hljs-comment"><span class="hljs-comment">// hexGrid.Refresh(); }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5a0/f4b/c99/5a0f4bc99bce766e53ff1a0192abd16e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุจูุฉ ุชูุธูู ุงูุณุฏุงุณู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุจุฏุก ูุถุน ุงูุชุดุบูู ุ ูุง ุชุฒุงู ุงูุจุทุงูุฉ ููุง ูู. </font><font style="vertical-align: inherit;">ููู ุงูุชุณูุณู ุงููุฑูู ููุฃุดูุงุก ุณูููู ูุฎุชูููุง. </font><font style="vertical-align: inherit;">ุชููุดุฆ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Grid</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูุงุฆูุงุช ูุฑุนูุฉ ูุฌุฒุฃุฉ ุชุญุชูู ุนูู ุฎูุงูุง ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุดุจูุฉ ูุงูููุญุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a7f/bc4/f8e/a7fbc4f8e4898504bc34a4a918ebb567.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุธุงูุง ุงูุฃุทูุงู ูู ูุถุน ุงูุชุดุบูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุจูุง ูุฏููุง ุจุนุถ ุงููุดุงูู ูุน ููุตูุงุช ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ูููุง ุจุชุนููู ุนุฑุถ ุงูููุตู ุนูู 5. ูุงู ูุฐุง ูุงูููุง ูุนุฑุถ ุงูุญุฑููู ุงููุฐูู ูุงูุง ูุงูููู ุจุงููุณุจุฉ ููุง ุนูู ุฎุฑูุทุฉ ุตุบูุฑุฉ. </font><font style="vertical-align: inherit;">ูููู ุงูุขู ูููู ุฃู ูููู ูุฏููุง ุฅุญุฏุงุซูุงุช ูุซู โ10 ุ ุญูุซ ููุฌุฏ ุซูุงุซุฉ ุฃุญุฑู. </font><font style="vertical-align: inherit;">ูู ุชููู ููุงุณุจุฉ ูุณูุชู ูุทุนูุง. </font><font style="vertical-align: inherit;">ูุฅุตูุงุญ ุฐูู ุ ูู ุจุฒูุงุฏุฉ ุนุฑุถ ุชุณููุฉ ุงูุฎููุฉ ุฅูู 10 ุ ุฃู ุญุชู ุฃูุซุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2e7/fd3/4a5/2e7fd34a5b649256e326b73a3aa9227a.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f7c/926/fae/f7c926fae8356aa8d2402a21359fea8f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณููุงุช ุงูุฎูุงูุง ุงูููุณุนุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฅูุดุงุก ุฎุฑุงุฆุท ุฃูุจุฑ ุจูุซูุฑ! </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ููุดุฆ ุงูุดุจูุฉ ุจุงููุงูู ุนูุฏ ุจุฏุก ุงูุชุดุบูู ุ ููุฏ ูุณุชุบุฑู ุฅูุดุงุก ุฎุฑุงุฆุท ูุจูุฑุฉ ููุชูุง ุทูููุงู. </font><font style="vertical-align: inherit;">ูููู ุจุนุฏ ุงูุงูุชูุงุก ุ ุณูููู ูุฏููุง ูุณุงุญุฉ ูุจูุฑุฉ ููุชุฌุฑูุจ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุตูุงุญ ุชุญุฑูุฑ ุงูุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุจุฏู ุฃู ุงูุชุญุฑูุฑ ูุนูู ูู ุงููุฑุญูุฉ ุงูุญุงููุฉ ุ ูุฃููุง ูู ูุนุฏ ูููู ุจุชุญุฏูุซ ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุงูุฃุฌุฒุงุก ุงููุฑุฏูุฉ ุ ูุฐุง ุฃุถู ุทุฑููุฉ </font></font><code>Refresh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Refresh</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.Triangulate(cells); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ูุฌุจ ุฃู ูุณูู ูุฐู ุงูุทุฑููุฉุ </font><font style="vertical-align: inherit;">ูููุง ุจุชุญุฏูุซ ุงูุดุจูุฉ ุจุฃููููุง ูู ูู ูุฑุฉ ูุฃูู ูุงู ูุฏููุง ุดุจูุฉ ูุงุญุฏุฉ ููุท. </font><font style="vertical-align: inherit;">ูููู ุงูุขู ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุดุธุงูุง. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุชุญุฏูุซูุง ูู ูุฑุฉ ุ ุณูููู ุชุญุฏูุซ ุงูุฃุฌุฒุงุก ุงููุชุบูุฑุฉ ุฃูุซุฑ ููุงุกุฉ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุณูู ูุตุจุญ ุชุบููุฑ ุงูุจุทุงูุงุช ุงููุจูุฑุฉ ุนูููุฉ ุจุทูุฆุฉ ููุบุงูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ููู ูุนุฑู ุฃู ุฌุฒุก ูุฌุจ ุชุญุฏูุซูุ </font><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูู ุฌุนู ูู ุฎููุฉ ุชุนุฑู ุฃู ุฌุฒุก ุชูุชูู ุฅููู. </font><font style="vertical-align: inherit;">ุซู ุณุชุชููู ุงูุฎููุฉ ูู ุชุญุฏูุซ ุฌุฒุฃูุง ุนูุฏ ุชุบููุฑ ูุฐู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนููุง ูุนุทู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุงุจุทูุง ูุฌุฒุกู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexGridChunk chunk;</code> </pre> <br> <code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุฃู ุชุถูู ููุณูุง ุฅูู ุงูุฎููุฉ ุนูุฏ ุงูุฅุถุงูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { cells[index] = cell; cell.chunk = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; cell.transform.SetParent(transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); cell.uiRect.SetParent(gridCanvas.transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฎูุงู ุฑุจุทูุง ุ ูุถูู ุฅูู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>Refresh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ูู ูุฑุฉ ูุชู ูููุง ุชุญุฏูุซ ุฎููุฉ ุ ุณุชููู ุจุจุณุงุทุฉ ุจุชุญุฏูุซ ุฌุฒุกูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Refresh</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { chunk.Refresh(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฌุนููุง </font></font><code>HexCell.Refresh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุงุฆุนุฉ ุ ูุฃู ุงูุฎููุฉ ููุณูุง ุชุนุฑู ุฃูุถู ุนูุฏูุง ูุชู ุชุบููุฑูุง. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุจุนุฏ ุชุบููุฑ ุงุฑุชูุงุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Elevation { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> elevation; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { โฆ Refresh(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุซู ููุท ุนูุฏูุง ูุชุบูุฑ ุงุฑุชูุงุนู ุฅูู ูููุฉ ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ุฅููุง ูุง ุชุญุชุงุฌ ุญุชู ุฅูู ุฅุนุงุฏุฉ ุญุณุงุจ ุฃู ุดูุก ุฅุฐุง ูููุง ุจุชุนููููุง ุจููุณ ุงูุงุฑุชูุงุน ููุง ูุงู ูู ูุจู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููููุง ุงูุฎุฑูุฌ ูู ุจุฏุงูุฉ ุงููุญุฏุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Elevation { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> elevation; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elevation == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } โฆ } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุณูููู ุฃูุถูุง ุจุชุฎุทู ุงูุญุณุงุจุงุช ูุฃูู ูุฑุฉ ุนูุฏูุง ูุชู ุชุนููู ุงูุงุฑุชูุงุน ุฅูู 0 ุ ูุฃู ูุฐู ูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูุงุฑุชูุงุน ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ูุชุฌูุจ ุฐูู ุ ุณูุฌุนู ุงููููุฉ ุงูุฃูููุฉ ูุซู ุนุฏู ุงุณุชุฎุฏุงููุง ูุทูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> elevation = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MinValue;</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูู int.MinValueุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">   ,    integer.    C# integer โ <br>  32- ,   2 <sup>32</sup>  integer,    ,    .       . <br><br>  โ  โ2 <sup>31</sup> = โ2 147 483 648.        ! <br><br>   2 <sup>31</sup> โ 1 = 2 147 483 647.     2 <sup>31</sup> - . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุนุฑู ุนูู ุชุบูุฑ ููู ุงูุฎููุฉ ุ ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุชุญููููุง ุฅูู ุฎุงุตูุฉ. </font><font style="vertical-align: inherit;">ุฅุนุงุฏุฉ ุชุณููุชู </font></font><code>Color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฃุญุฑู ูุจูุฑุฉ ุ ุซู ุชุญูููู ุฅูู ุฎุงุตูุฉ ุฐุงุช ูุชุบูุฑ ุฎุงุต </font></font><code>color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณุชููู ูููุฉ ุงูููู ุงูุงูุชุฑุงุถูุฉ ุณูุฏุงุก ุดูุงูุฉ ุ ููู ูุง ููุงุณุจูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Color Color { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> color; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (color == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } color = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; Refresh(); } } Color color;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุนูุฏูุง ูุจุฏุฃ ูุถุน ุงูุชุดุบูู ุ ูุญุตู ุนูู ุงุณุชุซูุงุกุงุช ุฎุงููุฉ ูู ุงููุฑุฌุน. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุฃููุง ูููุง ุจุชุนููู ุงูููู ูุงูุงุฑุชูุงุน ูููููุง ุงูุงูุชุฑุงุถูุฉ ูุจู ุชุนููู ุฎููุฉ ุฅูู ุฌุฒุกูุง. </font><font style="vertical-align: inherit;">ูู ุงูุทุจูุนู ุฃููุง ูุง ูููู ุจุชุญุฏูุซ ุงูุฃุฌุฒุงุก ูู ูุฐู ุงููุฑุญูุฉ ุ ูุฃููุง ูููู ุจุชุซููุซูุง ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูุชููุฆุฉ. </font><font style="vertical-align: inherit;">ุจูุนูู ุขุฎุฑ ุ ูููู ุจุชุญุฏูุซ ุฌุฒุก ููุท ุฅุฐุง ุชู ุชุนูููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Refresh</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunk) { chunk.Refresh(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฃุฎูุฑุง ุชุบููุฑ ุงูุฎูุงูุง ูุฑุฉ ุฃุฎุฑู! </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุชูุดุฃ ูุดููุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุงูุฑุณู ุนูู ุทูู ุญุฏูุฏ ุงูุดุธุงูุง ุ ุชุธูุฑ ุงููุญุงูุงุช.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/41a/94f/50c/41a94f50c430ce8f13fb1a3be274b520.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎุทุงุก ูู ุญุฏูุฏ ุงูุดุธุงูุง.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ุฃูุฑ ููุทูู ุ ูุฃูู ุนูุฏูุง ุชุชุบูุฑ ุฎููุฉ ูุงุญุฏุฉ ุ ุชุชุบูุฑ ุฌููุน ุงูุงุชุตุงูุงุช ูุน ุฌูุฑุงููุง ุฃูุถูุง. ููุฏ ูููู ูุคูุงุก ุงูุฌูุฑุงู ูู ุฃุฌุฒุงุก ุฃุฎุฑู. ุงูุญู ุงูุฃุจุณุท ูู ุชุญุฏูุซ ุฌููุน ุงูุฎูุงูุง ุงููุฌุงูุฑุฉ ุฅุฐุง ูุงูุช ูุฎุชููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Refresh</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunk) { chunk.Refresh(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; neighbors.Length; i++) { HexCell neighbor = neighbors[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; neighbor.chunk != chunk) { neighbor.chunk.Refresh(); } } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูุนูู ุ ููุฏ ูุชุจูู ุฃููุง ูููู ุจุชุญุฏูุซ ุฌุฒุก ูุงุญุฏ ุนุฏุฉ ูุฑุงุช. ูุนูุฏูุง ูุจุฏุฃ ูู ุชูููู ุนุฏุฉ ุฎูุงูุง ูู ููุช ูุงุญุฏ ุ ุณูุฒุฏุงุฏ ูู ุดูุก ุณูุกูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ูุณูุง ูุทุงูุจูู ุจุงูุชุซููุซ ููุฑูุง ุจุนุฏ ุชุญุฏูุซ ุงูุฌุฒุก. ุจุฏูุงู ูู ุฐูู ุ ููุชุจ ุจุจุณุงุทุฉ ุฃู ุงูุชุญุฏูุซ ูุทููุจ ูุซูุงุซู ุจุนุฏ ุงูุชูุงู ุงูุชุบููุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ููุนู ุฃู ุดูุก ุขุฎุฑ ุ ูููููุง ุงุณุชุฎุฏุงู ุญุงูุชู ุงูููููุฉ ููุฅุดุงุฑุฉ ุฅูู ุงูุญุงุฌุฉ ุฅูู ุงูุชุญุฏูุซุงุช. ุนูุฏ ุชุญุฏูุซู ุ ูููู ุจุชุถููู ุงููููู. ูู ูุคุฏู ุชุดุบููู ุนุฏุฉ ูุฑุงุช ุฅูู ุชุบููุฑ ุฃู ุดูุก. ุชู ุชุญุฏูุซ ุงููููู ูุงุญููุง. ุณูููู ุจุงูุชุซููุซ ุนูุฏ ูุฐู ุงูููุทุฉ ููุนุทู ุงููููู ูุฑุฉ ุฃุฎุฑู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู </font></font><code>LateUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู</font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถูุงู ุญุฏูุซ ุงูุชุซููุซ ุจุนุฏ ุงูุชูุงู ุงูุชุบููุฑ ููุฅุทุงุฑ ุงูุญุงูู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Refresh</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// hexMesh.Triangulate(cells); enabled = true; } void LateUpdate () { hexMesh.Triangulate(cells); enabled = false; }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงููุฑู ุจูู ุงูุชุญุฏูุซ ูุงูุชุญุฏูุซ ุงููุชุฃุฎุฑุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     <code>Update</code>    -     .          <code>LateUpdate</code> .      ,   . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงููููู ููููู ุงูุชุฑุงุถููุง ุ ูุฅููุง ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ุงูุชุซููุซ ุจุดูู ุตุฑูุญ </font></font><code>Start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููู ุฅุฒุงูุฉ ูุฐู ุงูุทุฑููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// void Start () { // hexMesh.Triangulate(cells); // }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a6f/104/7c3/a6f1047c34bb9cf9b69360343ab53aac.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุธุงูุง 20 ร 20 ุชุญุชูู ุนูู 10000 ุฎููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงุฆู ุงููุนููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูุฏ ูููุง ุจุชุบููุฑ ุทุฑููุฉ ุงูุดุจูุฉ ุจุดูู ูุจูุฑ ุ </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุง ุฃููุง ุชุธู ููุง ูู. </font><font style="vertical-align: inherit;">ูู ูุง ูุญุชุงุฌู ููุนูู ูู ูุฌููุนุฉ ูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุง ููุชู ุฅุฐุง ูุงูุช ููุงู ุดุจูุฉ ูุงุญุฏุฉ ูู ุงูุณุฏุงุณูุงุช ุ ุฃู ุงูุนุฏูุฏ ูููุง. </font><font style="vertical-align: inherit;">ููููุง ูู ูููุฑ ุจุนุฏ ูู ุงุณุชุฎุฏุงู ุดุจูุงุช ูุชุนุฏุฏุฉ. </font><font style="vertical-align: inherit;">ุฑุจูุง ูููู ุชุญุณูู ุดูุก ููุงุ </font><font style="vertical-align: inherit;">ุงูููุงุฆู </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชุฎุฏูุฉ </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูู ุงูุฃุณุงุณ ูุฎุงุฒู ูุคูุชุฉ. </font><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงููุง ููุท ููุชุซููุซ. </font><font style="vertical-align: inherit;">ููุชู ุชุซููุซ ุงูุดุธุงูุง ูู ููุช ูุงุญุฏ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุงููุงูุน ุ ูุญู ุจุญุงุฌุฉ ุฅูู ูุฌููุนุฉ ูุงุญุฏุฉ ููุท ูู ุงูููุงุฆู ุ ูููุณ ูุฌููุนุฉ ูุงุญุฏุฉ ููู ูุงุฆู ุดุจูุฉ ุณุฏุงุณู. </font><font style="vertical-align: inherit;">ูููู ุชุญููู ุฐูู ุจุฌุนู ุงูููุงุฆู ุซุงุจุชุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Vector3&gt; vertices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Vector3&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Color&gt; colors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Color&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; triangles = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GetComponent&lt;MeshFilter&gt;().mesh = hexMesh = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mesh(); meshCollider = gameObject.AddComponent&lt;MeshCollider&gt;(); hexMesh.name = <span class="hljs-string"><span class="hljs-string">"Hex Mesh"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// vertices = new List&lt;Vector3&gt;(); // colors = new List&lt;Color&gt;(); // triangles = new List&lt;int&gt;(); }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุงุฆู ุงูุซุงุจุชุฉ ูููุฉ ุญููุงุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">           .    ,   ,       . <br><br>     ,           .    20  20     100. </div></div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญูู ุจุงููุงููุฑุง </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงููุฑุง ุงููุจูุฑุฉ ุฑุงุฆุนุฉ ุ ููููุง ุบูุฑ ูุฌุฏูุฉ ุฅุฐุง ูู ูุชููู ูู ุฑุคูุชูุง. ููุญุต ุงูุฎุฑูุทุฉ ุจุฃููููุง ุ ูุญุชุงุฌ ุฅูู ุชุญุฑูู ุงููุงููุฑุง. ุงูุชูุจูุฑ ูููุฏ ุฃูุถูุง. ูุฐูู ุ ุฏุนูุง ููุดุฆ ูุงููุฑุง ูุฃุฏุงุก ูุฐู ุงูุฅุฌุฑุงุกุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ูุงุฆู ูููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุณูููุง Hex Map Camera</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฅุณูุงุท ูููู ุงูุชุญููู ุงูุฎุงุต ุจู ุจุญูุซ ููุชูู ุฅูู ุงูุฃุตู ุฏูู ุชุบููุฑ ุฏูุฑุงูู ููููุงุณู. ุฅุถุงูุฉ ุทูู ุฅูููุง ูุฏุนู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swivel</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฅุถุงูุฉ ุทูู ุฅูููุง </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stick</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงุฌุนู ุงููุงููุฑุง ุงูุฑุฆูุณูุฉ ุชุงุจุนุฉ ููุนุตุง ุ ูุฃุนุฏ ุถุจุท ูููู ุงูุชุญููู ุงูุฎุงุต ุจูุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0a8/33f/3d9/0a833f3d9eea9b9fef1682ef63a7f372.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุณูุณู ุงููุฑูู ูููุงููุฑุง. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฏู ูู ููุตู ุงููุงููุฑุง (Swivel) ูู ุงูุชุญูู ูู ุงูุฒุงููุฉ ุงูุชู ุชูุธุฑ ุจูุง ุงููุงููุฑุง ุฅูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ููููู ุจุฏูุฑูุง (45 ุ 0 ุ 0). </font><font style="vertical-align: inherit;">ูุชุญูู ุงูููุจุถ (Stick) ูู ุงููุณุงูุฉ ุงูุชู ุชูุน ุจูุง ุงููุงููุฑุงุช. </font><font style="vertical-align: inherit;">ููุถุนูุง ูู ูุฑูุฒ (0 ุ 0 ุ -45). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุนูุตุฑ ููุชุญูู ูู ูุฐุง ุงููุธุงู. </font><font style="vertical-align: inherit;">ูู ุจุชุนููู ูุฐุง ุงููููู ุฅูู ุฌุฐุฑ ุงูุชุณูุณู ุงููุฑูู ูููุงููุฑุง. </font><font style="vertical-align: inherit;">ุฃุนุทู ุฑุงุจุทูุง ููููุตูุฉ ูุงูููุจุถ ุ ูุฃุฏุฎููุง </font></font><code>Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexMapCamera</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { Transform swivel, stick; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { swivel = transform.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>); stick = swivel.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/eb6/2e5/44b/eb62e544b9e00bc558dfbc504802cfba.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงููุฑุง ุฎุฑูุทุฉ ุณุฏุงุณูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุจูุฑ / ุชุตุบูุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุธููุฉ ุงูุฃููู ุงูุชู ุณููุดุฆูุง ูู ุงูุชูุจูุฑ (ุงูุชูุจูุฑ). </font><font style="vertical-align: inherit;">ูููููุง ุงูุชุญูู ูู ูุณุชูู ุงูุฒูู ุงูุญุงูู ุจุงุณุชุฎุฏุงู ุงููุชุบูุฑ ุงูุนุงุฆู. </font><font style="vertical-align: inherit;">ุชุนูู ุงููููุฉ 0 ุฃููุง ุจุนูุฏูู ุชูุงููุง ุ ูุชุนูู ุงููููุฉ 1 ุฃููุง ูุฑูุจูู ุชูุงููุง. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุงูุชูุจูุฑ ุงูุฃูุตู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zoom = <span class="hljs-number"><span class="hljs-number">1f</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุฌุฑุงุก ุงูุฒูู ุนุงุฏุฉู ุจุงุณุชุฎุฏุงู ุนุฌูุฉ ุงููุงูุณ ุฃู ุงูุชุญูู ุงูุชูุงุธุฑู. </font><font style="vertical-align: inherit;">ูููููุง ุชูููุฐู ุจุงุณุชุฎุฏุงู ูุญูุฑ ุฅุฏุฎุงู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mouse ScrollWheel</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงูุชุฑุงุถู. </font><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุญูู ูู ูุฌูุฏ ุฏูุชุง ุงูุฅุฏุฎุงู ุ ูุฅุฐุง ูุงู ููุงู ูุงุญุฏุฉ ุ ูุฅููุง ุชุณุชุฏุนู ุทุฑููุฉ ุชุบููุฑ ุงูุชูุจูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zoomDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Mouse ScrollWheel"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (zoomDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span>) { AdjustZoom(zoomDelta); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustZoom</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุบููุฑ ูุณุชูู ุงูุชูุจูุฑ / ุงูุชุตุบูุฑ ุ ูุถูู ุจุจุณุงุทุฉ ุฏูุชุง ุฅููู ุซู ูุญุฏ ูู ุงููููุฉ (ุงููุดุจู) ููุจูุงุก ูู ุงููุทุงู ูู 0 ุฅูู 1. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustZoom</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta</span></span></span><span class="hljs-function">)</span></span> { zoom = Mathf.Clamp01(zoom + delta); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุชูุจูุฑ ูุงูุชุตุบูุฑ ุ ูุฌุจ ุฃู ุชุชุบูุฑ ุงููุณุงูุฉ ุฅูู ุงููุงููุฑุง ููููุง ูุฐูู. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุบููุฑ ููุถุน ุงูููุจุถ ูู Z. ุฃุถู ูุชุบูุฑูู ุนุงุฆููู ูุดุชุฑููู ูุถุจุท ููุถุน ุงูููุจุถ ุนูุฏ ุงูุญุฏ ุงูุฃุฏูู ูุงูุญุฏ ุงูุฃูุตู ูู ุงูุฒูู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูููู ุจุชุทููุฑ ุฎุฑูุทุฉ ุตุบูุฑุฉ ูุณุจููุง ุ ูู ุจุชุนููู ุงูููู ุนูู -250 ู -45.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> stickMinZoom, stickMaxZoom;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุชุบููุฑ ุงูุฒูู ุ ูููู ุจุฅุฌุฑุงุก ุงุณุชููุงุก ุฎุทู ุจูู ูุงุชูู ุงููููุชูู ุจูุงุกู ุนูู ูููุฉ ุงูุฒูู ุงูุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ุซู ูู ุจุชุญุฏูุซ ููุถุน ุงูููุจุถ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustZoom</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta</span></span></span><span class="hljs-function">)</span></span> { zoom = Mathf.Clamp01(zoom + delta); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = Mathf.Lerp(stickMinZoom, stickMaxZoom, zoom); stick.localPosition = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, distance); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cec/f4c/f07/cecf4cf07d627d6eaab94ecdc2953d30.png"></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุญุฏ ุงูุฃุฏูู ูุงูุญุฏ ุงูุฃูุตู ููุนุตุง. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุนูู ุงูุชูุจูุฑ ุ ูููู ุญุชู ุงูุขู ููุณุช ูููุฏุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ุ ุนูุฏูุง ูููู ุงูุฒููู ุจุนูุฏูุง ุ ุชูุชูู ุงููุงููุฑุง ุฅูู ููุธุฑ ุนููู. </font><font style="vertical-align: inherit;">ูููููุง ุฃู ูุฏุฑู ุฐูู ุนู ุทุฑูู ุชุฏููุฑ ุงูููุตูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุถูู ุงููุชุบูุฑุงุช min ู max ููููุตูุฉ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุญุฏุฏ ููู ุงูููู 90 ู 45.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> swivelMinZoom, swivelMaxZoom;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูุน ููุถุน ุงูููุจุถ ุ ูุฅููุง ูุณุชููู ูุฅูุฌุงุฏ ุฒุงููุฉ ุชูุฑูุจ ููุงุณุจุฉ. </font><font style="vertical-align: inherit;">ุซู ูููู ุจุชุนููู ุฏูุฑุงู ุงูููุตูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustZoom</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta</span></span></span><span class="hljs-function">)</span></span> { zoom = Mathf.Clamp01(zoom + delta); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = Mathf.Lerp(stickMinZoom, stickMaxZoom, zoom); stick.localPosition = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, distance); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angle = Mathf.Lerp(swivelMinZoom, swivelMaxZoom, zoom); swivel.localRotation = Quaternion.Euler(angle, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/766/0c3/fcd/7660c3fcd621567398ea7c013fae549c.png"></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏ ุงูุฃุฏูู ูุงูุฃูุตู ููููุฉ Swivel. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชุนุฏูู ูุนุฏู ุชุบููุฑ ุงูุฒูู ุนู ุทุฑูู ุชุบููุฑ ุญุณุงุณูุฉ ูุนููุงุช ุงูุฅุฏุฎุงู ูุนุฌูุฉ ุงููุงูุณ. </font><font style="vertical-align: inherit;">ูููู ุงูุนุซูุฑ ุนูููุง ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฑูุฑ / ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน / ุงูุฅุฏุฎุงู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุชุบููุฑูุง ูู 0.1 ุฅูู 0.025 ุ ูุญุตู ุนูู ุชุบููุฑ ุฃุจุทุฃ ูุฃูุซุฑ ุณูุงุณุฉ ูู ุงูุชูุจูุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d43/f86/ef3/d43f86ef3587be1bfd15ca208eec418f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุงุฑุงุช ุฅุฏุฎุงู ุนุฌูุฉ ุงููุงูุณ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุญุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุฏุนูุง ููุชูู ุฅูู ุชุญุฑูู ุงููุงููุฑุง. </font><font style="vertical-align: inherit;">ุงูุญุฑูุฉ ูู ุงุชุฌุงู X ู Z ูุฌุจ ุฃู ูููุฐูุง </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ูู ุญุงูุฉ ุงูุฒูู. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ูุฐู ุงููุฏุฎูุงุช ูุญูุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุฃุณู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฐุง ุณูุณูุญ ููุง ุจุชุญุฑูู ุงููุงููุฑุง ูุน ุงูุฃุณูู ูููุงุชูุญ WASD.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zoomDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Mouse ScrollWheel"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (zoomDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span>) { AdjustZoom(zoomDelta); } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Horizontal"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span> || zDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span>) { AdjustPosition(xDelta, zDelta); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xDelta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> zDelta</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅู ุฃุจุณุท ุทุฑููุฉ ูู ุงูุญุตูู ุนูู ุงูููุถุน ุงูุญุงูู ููุธุงู ุงููุงููุฑุง ุ ูุฅุถุงูุฉ deltas X ู Z ุฅููู ุ ูุชุนููู ุงููุชูุฌุฉ ูููุถุน ุงููุธุงู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xDelta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> zDelta</span></span></span><span class="hljs-function">)</span></span> { Vector3 position = transform.localPosition; position += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(xDelta, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zDelta); transform.localPosition = position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณุชุชุญุฑู ุงููุงููุฑุง ุฃุซูุงุก ุญูู ุงูุฃุณูู ุฃู WASD ุ ูููู ููุณ ุจุณุฑุนุฉ ุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ุณูุนุชูุฏ ุนูู ูุนุฏู ุงูุฅุทุงุฑ. </font><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ุงููุณุงูุฉ ุงูุชู ุชุญุชุงุฌ ุฅูู ุชุญุฑูููุง ุ ูุณุชุฎุฏู ุฏูุชุง ุงูููุช ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุณุฑุนุฉ ุงููุทููุจุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุถูู ูุชุบูุฑูุง ูุดุชุฑููุง ููุถุจุทู </font></font><code>moveSpeed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู 100 ุ ุซู ูุถุฑุจู ูู ุฏูุชุง ุงูููุช ููุญุตูู ุนูู ููุถุน ุฏูุชุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> moveSpeed; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xDelta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> zDelta</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = moveSpeed * Time.deltaTime; Vector3 position = transform.localPosition; position += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(xDelta, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zDelta) * distance; transform.localPosition = position; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6da/1bc/307/6da1bc3074dc31868b934a35aaa31b10.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฑุนุฉ ุงูุชุญุฑู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุขู ุงูุชุญุฑู ุจุณุฑุนุฉ ุซุงุจุชุฉ ุนูู ุทูู ุงููุญูุฑ X ุฃู Z. ูููู ุนูุฏ ุงูุชุญุฑู ุนูู ุทูู ุงููุญูุฑูู ูู ููุณ ุงูููุช (ูุทุฑููุง) ุณุชููู ุงูุญุฑูุฉ ุฃุณุฑุน. </font><font style="vertical-align: inherit;">ูุฅุตูุงุญ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุทุจูุน ูุชุฌู ุฏูุชุง. </font><font style="vertical-align: inherit;">ุณูุณูุญ ูู ุฐูู ุจุงุณุชุฎุฏุงูู ููุฌูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xDelta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> zDelta</span></span></span><span class="hljs-function">)</span></span> { Vector3 direction = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(xDelta, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zDelta).normalized; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = moveSpeed * Time.deltaTime; Vector3 position = transform.localPosition; position += direction * distance; transform.localPosition = position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชูููุฐ ุงูุญุฑูุฉ ุงููุทุฑูุฉ ุจุดูู ุตุญูุญ ุงูุขู ุ ูููู ูุฌุฃุฉ ุงุชุถุญ ุฃู ุงููุงููุฑุง ุชุณุชูุฑ ูู ุงูุชุญุฑู ููุชุฑุฉ ุทูููุฉ ุฅูู ุญุฏ ูุง ุญุชู ุจุนุฏ ุชุญุฑูุฑ ุฌููุน ุงูููุงุชูุญ. ูุญุฏุซ ูุฐุง ูุฃู ูุญุงูุฑ ุงูุฅุฏุฎุงู ูุง ุชููุฒ ุนูู ุงูููุฑ ุฅูู ุงูููู ุงูุญุฏูุฉ ููุฑูุง ุจุนุฏ ุงูุถุบุท ุนูู ุงูููุงุชูุญ. ูุญุชุงุฌูู ุจุนุถ ุงูููุช ููุฐุง. ูููุทุจู ุงูุดูุก ููุณู ุนูู ุชุญุฑูุฑ ุงูููุงุชูุญ. ูุณุชุบุฑู ุงูุฃูุฑ ููุชูุง ููุนูุฏุฉ ุฅูู ููู ุงููุญูุฑ ุตูุฑ. ููุน ุฐูู ุ ูุธุฑูุง ูุฃููุง ูููุง ุจุชุทุจูุน ููู ุงูุฅุฏุฎุงู ุ ูุชู ุงูุญูุงุธ ุนูู ุงูุณุฑุนุฉ ุงููุตูู ุจุงุณุชูุฑุงุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุถุจุท ูุนููุงุช ุงูุฅุฏุฎุงู ููุชุฎูุต ูู ุงูุชุฃุฎูุฑุงุช ุ ูููููุง ุชุนุทู ุดุนูุฑูุง ุจุงููุนููุฉ ุงูุชู ุชุณุชุญู ุงูุชูููุฑ. ูููููุง ุชุทุจูู ุฃูุตู ูููุฉ ูููุญุงูุฑ ููุนุงูู ุงูุชุฎููุฏ ููุญุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 direction = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(xDelta, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zDelta).normalized; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> damping = Mathf.Max(Mathf.Abs(xDelta), Mathf.Abs(zDelta)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = moveSpeed * damping * Time.deltaTime;</code> </pre><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฑูุฉ ูุน ุงูุชูููู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนูู ุงูุญุฑูุฉ ุงูุขู ุจุดูู ุฌูุฏ ุ ุนูู ุงูุฃูู ูุน ุฒูุงุฏุฉ ุงูุชูุจูุฑ. </font><font style="vertical-align: inherit;">ููู ุนูู ูุณุงูุฉ ุงุชุถุญ ุฃููุง ุจุทูุฆุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูุน ุชูููู ุงูุชูุจูุฑ ุ ูุญุชุงุฌ ุฅูู ุชุณุฑูุน. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุงุณุชุจุฏุงู ูุชุบูุฑ ูุงุญุฏ ุจูุชุบูุฑูู </font></font><code>moveSpeed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃุฌู ุงูุชูุจูุฑ ุงูุฃุฏูู ูุงูุฃูุตู ุ ุซู ุงูุงุณุชููุงุก. </font><font style="vertical-align: inherit;">ูู ุจุชุนููู ููู 400 ู 100 ููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public float moveSpeed; public float moveSpeedMinZoom, moveSpeedMaxZoom; void AdjustPosition (float xDelta, float zDelta) { Vector3 direction = new Vector3(xDelta, 0f, zDelta).normalized; float damping = Mathf.Max(Mathf.Abs(xDelta), Mathf.Abs(zDelta)); float distance = Mathf.Lerp(moveSpeedMinZoom, moveSpeedMaxZoom, zoom) * damping * Time.deltaTime; Vector3 position = transform.localPosition; position += direction * distance; transform.localPosition = position; }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5a9/cb8/65e/5a9cb865ee0a67d4b3ad056317faf479.png"></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฎุชูู ุณุฑุนุฉ ุงูุญุฑูุฉ ุจุงุฎุชูุงู ูุณุชูู ุงูุชูุจูุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุชุญุฑู ุจุณุฑุนุฉ ุญูู ุงูุฎุฑูุทุฉ! </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูููููุง ุฃู ูุชุฌุงูุฒ ุงูุฎุฑูุทุฉ ุ ููู ูุฐุง ุบูุฑ ูุฑุบูุจ ููู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุจูู ุงููุงููุฑุง ุฏุงุฎู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุถูุงู ุฐูู ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุญุฏูุฏ ุงูุฎุฑูุทุฉ ุ ูุฐุง ููุฒู ูุฌูุฏ ุฑุงุจุท ุจุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุฃุถูู ูุฑุจุทู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexGrid grid;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e71/f87/68e/e71f8768e16aee250700a7bd694a0e6b.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุทูุจ ุญุฌู ุงูุดุจูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุงูุชูุงู ุฅูู ูุฑูุฒ ุฌุฏูุฏ ุ ุณูููู ุจุชุญุฏูุฏู ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xDelta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> zDelta</span></span></span><span class="hljs-function">)</span></span> { โฆ transform.localPosition = ClampPosition(position); } <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClampPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ุชูู ูููุฉ ุงูููุถุน X ุนู 0 ุ ููุชู ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃูุตู ูู ุฎูุงู ุญุฌู ุงูุฎุฑูุทุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClampPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xMax = grid.chunkCountX * HexMetrics.chunkSizeX * (<span class="hljs-number"><span class="hljs-number">2f</span></span> * HexMetrics.innerRadius); position.x = Mathf.Clamp(position.x, <span class="hljs-number"><span class="hljs-number">0f</span></span>, xMax); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃูุฑ ููุณู ููุทุจู ุนูู ุงูููุถุน Z. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClampPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xMax = grid.chunkCountX * HexMetrics.chunkSizeX * (<span class="hljs-number"><span class="hljs-number">2f</span></span> * HexMetrics.innerRadius); position.x = Mathf.Clamp(position.x, <span class="hljs-number"><span class="hljs-number">0f</span></span>, xMax); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zMax = grid.chunkCountZ * HexMetrics.chunkSizeZ * (<span class="hljs-number"><span class="hljs-number">1.5f</span></span> * HexMetrics.outerRadius); position.z = Mathf.Clamp(position.z, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zMax); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุฐุง ุบูุฑ ุฏููู ุจุนุถ ุงูุดูุก. </font><font style="vertical-align: inherit;">ููุทุฉ ุงูุจุฏุงูุฉ ูู ูุณุท ุงูุฎููุฉ ุ ูููุณ ุนูู ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฑูุฏ ุฃู ุชุชููู ุงููุงููุฑุง ูู ูุณุท ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ูู ุฃูุตู ุงููููู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุงุทุฑุญ ูุตู ุงูุฎููุฉ ูู ุงูุญุฏ ุงูุฃูุตู ูู X.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xMax = (grid.chunkCountX * HexMetrics.chunkSizeX - <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) * (<span class="hljs-number"><span class="hljs-number">2f</span></span> * HexMetrics.innerRadius); position.x = Mathf.Clamp(position.x, <span class="hljs-number"><span class="hljs-number">0f</span></span>, xMax);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณุจุจ ููุณู ุ ูุญุชุงุฌ ุฅูู ุชูููู ุงูุญุฏ ุงูุฃูุตู Z. ูุธุฑูุง ูุฃู ุงูููุงููุณ ูุฎุชููุฉ ููููุงู ุ ูุญุชุงุฌ ุฅูู ุทุฑุญ ุงูุฎููุฉ ุงููุงููุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zMax = (grid.chunkCountZ * HexMetrics.chunkSizeZ - <span class="hljs-number"><span class="hljs-number">1</span></span>) * (<span class="hljs-number"><span class="hljs-number">1.5f</span></span> * HexMetrics.outerRadius); position.z = Mathf.Clamp(position.z, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zMax);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงูุญุฑูุฉ ุงูุชู ูููุง ุจูุง ุ ุชุจูู ุชูุงุตูู ุตุบูุฑุฉ ููุท. </font><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุฃุญูุงู ุ ุชุชูุงุนู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุน ููุงุชูุญ ุงูุฃุณูู ุ ููุฐุง ูุคุฏู ุฅูู ุญูููุฉ ุฃูู ุนูุฏ ุชุญุฑูู ุงููุงููุฑุง ุ ูุชุญุฑู ุดุฑูุท ุงูุชูุฑูุฑ. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ุนูุฏูุง ุชุนุชุจุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุณูุง ูุดุทุฉ ุ ุจุนุฏ ุงูููุฑ ููููุง ููุธู ุงููุคุดุฑ ููููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ููุน ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ุงูุงุณุชูุงุน ุฅูู ุฅุฏุฎุงู ููุญุฉ ุงูููุงุชูุญ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุดุงุฏ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฆู </font><em><font style="vertical-align: inherit;">EventSystem</font></em><font style="vertical-align: inherit;"> ุจุนุฏู ุชูููุฐ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุณุงู ุฃุญุฏุงุซ ุงูุชููู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/008/313/35c/00831335c530f6fcb06d4fe15890c316.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุฒูุฏ ูู ุงูุฃุญุฏุงุซ ุงูููุงุญุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุณุชุฏุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑูุฏ ุฃู ุชุฑู ูุง ูุฑุงุก ุงูุฌุฑูุ </font><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุงุฆู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุชุฏููุฑ ุงููุงููุฑุง! </font><font style="vertical-align: inherit;">ุฏุนูุง ูุถูู ูุฐู ุงูููุฒุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูู ุงูุชูุจูุฑ ููุณ ููููุง ููุฏูุฑุงู ุ ููุท ุงูุณุฑุนุฉ ูุงููุฉ. </font><font style="vertical-align: inherit;">ุฃุถู ูุชุบูุฑูุง ูุดุชุฑููุง ูุงุถุจุทู </font></font><code>rotationSpeed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู 180 ุฏุฑุฌุฉ. </font><font style="vertical-align: inherit;">ุชุญูู ูู ุฏูุชุง ุงูุฏูุฑุงู </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนู ุทุฑูู ุฃุฎุฐ ุนููุงุช ูู ูุญูุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏูุฑุงู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุบููุฑ ุงูุฏูุฑุงู ุฅุฐุง ูุฒู ุงูุฃูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotationSpeed; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zoomDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Mouse ScrollWheel"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (zoomDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span>) { AdjustZoom(zoomDelta); } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotationDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Rotation"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rotationDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span>) { AdjustRotation(rotationDelta); } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Horizontal"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zDelta = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span> || zDelta != <span class="hljs-number"><span class="hljs-number">0f</span></span>) { AdjustPosition(xDelta, zDelta); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustRotation</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c17/189/c8f/c17189c8f16ef3e50aa8af32f7ff34c8.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฑุนุฉ ุงูุฏูุฑุงู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุญูุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฏููุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณ ุจุดูู ุงูุชุฑุงุถู. </font><font style="vertical-align: inherit;">ุณูุชุนูู ุนูููุง ุฃู ูุฎูููุง ุจุฃููุณูุง. </font><font style="vertical-align: inherit;">ุงูุชูู ุฅูู ูุนููุงุช ุงูุฅุฏุฎุงู ููุฑุฑ ุฃุนูู ุฅุฏุฎุงู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุฏู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ุงุณู ุงูุชูุฑุงุฑ ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rotation</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ุจุชุบููุฑ ุงูููุงุชูุญ ุฅูู QE ููุงุตูุฉ (ุ) ุจููุทุฉ (.).</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/549/6a8/50a/5496a850af906515b57a0d0fd1aea7b5.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุฑู ูุญูุฑ ุงูุฅุฏุฎุงู.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ููุช ุจุชูุฒูู ุญุฒูุฉ ุงูุญุฒู ุ ููุงุฐุง ูุง ุฃููู ูุฐุง ุงูุฅุฏุฎุงูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     .       Unity.  ,     .    ,    ,     . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒุงููุฉ ุงูุฏูุฑุงู ุณูุชุชุจุนูุง ููุชุบูุฑ ุจูุง </font></font><code>AdjustRotation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุณูููู ุจุชุฏููุฑ ูุธุงู ุงููุงููุฑุง ุจุงููุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotationAngle; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustRotation</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta</span></span></span><span class="hljs-function">)</span></span> { rotationAngle += delta * rotationSpeed * Time.deltaTime; transform.localRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">0f</span></span>, rotationAngle, <span class="hljs-number"><span class="hljs-number">0f</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธุฑูุง ูุฃู ุงูุฏุงุฆุฑุฉ ุงููุงููุฉ ุชุจูุบ 360 ุฏุฑุฌุฉ ุ ูุฅููุง ููู ุฒุงููุฉ ุงูุชุฏููุฑ ุจุญูุซ ุชููู ูู ุงููุทุงู ูู 0 ุฅูู 360. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustRotation</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> delta</span></span></span><span class="hljs-function">)</span></span> { rotationAngle += delta * rotationSpeed * Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rotationAngle &lt; <span class="hljs-number"><span class="hljs-number">0f</span></span>) { rotationAngle += <span class="hljs-number"><span class="hljs-number">360f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rotationAngle &gt;= <span class="hljs-number"><span class="hljs-number">360f</span></span>) { rotationAngle -= <span class="hljs-number"><span class="hljs-number">360f</span></span>; } transform.localRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">0f</span></span>, rotationAngle, <span class="hljs-number"><span class="hljs-number">0f</span></span>); }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุฑู ูู ุงูุนูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุงูุฏูุฑุงู ูุนูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจูุญุตูุง ุ ููููู ุฃู ุชุฑู ุฃู ุงูุญุฑูุฉ ูุทููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุนุฏ ุฃู ุชุญููุช ุจููุฏุงุฑ 180 ุฏุฑุฌุฉ ุ ุณุชููู ุงูุญุฑูุฉ ุนูุณ ูุง ูุงู ูุชููุนูุง. </font><font style="vertical-align: inherit;">ุณูููู ุฃูุซุฑ ููุงุกูุฉ ูููุณุชุฎุฏู ุฃู ูุชู ุชูููุฐ ุงูุญุฑูุฉ ุจุงููุณุจุฉ ูุฒุงููุฉ ุนุฑุถ ุงููุงููุฑุง. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุถุฑุจ ุงูุฏูุฑุงู ุงูุญุงูู ูู ุงุชุฌุงู ุงูุญุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AdjustPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xDelta, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> zDelta</span></span></span><span class="hljs-function">)</span></span> { Vector3 direction = transform.localRotation * <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(xDelta, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zDelta).normalized; โฆ }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฒูุญ ุงููุณุจู. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญุฑูุฑ ุงููุชูุฏู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ูุฏููุง ุฎุฑูุทุฉ ุฃูุจุฑ ุ ููููู ุชุญุณูู ุฃุฏูุงุช ุชุนุฏูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุชุบููุฑ ุฎููุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ ุทููู ุฌุฏูุง ุ ูุฐุง ุณูููู ูู ุงูุฑุงุฆุน ุฅูุดุงุก ูุฑุดุงุฉ ุฃูุจุฑ. </font><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุงุฆู ุฃูุถูุง ุฃู ุชุฎุชุงุฑ ุงูุทูุงุก ุฃู ุชุบููุฑ ุงูุงุฑุชูุงุน ุ ุชุงุฑููุง ูู ุดูุก ุขุฎุฑ ุฏูู ุชุบููุฑ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููู ูุงูุงุฑุชูุงุน ุงูุงุฎุชูุงุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฌุนู ุงูุฃููุงู ุงุฎุชูุงุฑูุฉ ุนู ุทุฑูู ุฅุถุงูุฉ ุฎูุงุฑ ุชุญุฏูุฏ ูุงุฑุบ ุฅูู ูุฌููุนุฉ ุงูุชุจุฏูู. </font><font style="vertical-align: inherit;">ูุฑุฑ ุฃุญุฏ ูุญููุงุช ุงูุฃููุงู ูุงุณุชุจุฏู ุงูููุตู ุงูุฎุงุต ุจู ุจู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุดูุก ูุดุงุจู ููุฅุดุงุฑุฉ ุฅูู ุฃูู ููุณ ููููุง. </font><font style="vertical-align: inherit;">ุซู ูู ุจุชุบููุฑ ูุณูุทุฉ ุญุฏุซ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On Value Changed</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู โ1.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/786/485/b0c/786485b0cbbae8edee6c80873f19afc3.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุดุฑ ููู ุบูุฑ ุตุงูุญ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ูุฐุง ุงูููุฑุณ ุบูุฑ ุตุงูุญ ููุฌููุนุฉ ูู ุงูุฃููุงู. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงูู ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ูุฌุจ ุชุทุจูู ุงูููู ุนูู ุงูุฎูุงูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> applyColor; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectColor</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index</span></span></span><span class="hljs-function">)</span></span> { applyColor = index &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyColor) { activeColor = colors[index]; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyColor) { cell.Color = activeColor; } cell.Elevation = activeElevation; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงูุชุญูู ูู ุงูุงุฑุชูุงุน ุจูุงุณุทุฉ ุดุฑูุท ุชูุฑูุฑ ุ ูุฐูู ูุง ูููููุง ุฅุถุงูุฉ ููุชุงุญ ุชุจุฏูู ุฅููู. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุงุณุชุฎุฏุงู ููุชุงุญ ูููุตู ูุชูููู ุชุนุฏูู ุงูุงุฑุชูุงุน ุฃู ุชุนุทููู. </font><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ ุณูุชู ุชููููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> applyElevation = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyColor) { cell.Color = activeColor; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyElevation) { cell.Elevation = activeElevation; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ููุชุงุญ ุงุฑุชูุงุน ุฌุฏูุฏ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ุณุฃุถุน ุฃูุถูุง ูู ุดูุก ุนูู ููุญุฉ ุฌุฏูุฏุฉ ุ ูุฃุฌุนู ุดุฑูุท ุชูุฑูุฑ ุงูุงุฑุชูุงุน ุฃููููุง ุญุชู ุชููู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุฃูุซุฑ ุฌูุงููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/07d/cab/84d/07dcab84d8e8fe4daac4b6120df34d60.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู ูุงูุงุฑุชูุงุน ุงูุงุฎุชูุงุฑู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูููู ุงูุงุฑุชูุงุน ุ ูุญุชุงุฌ ุฅูู ุทุฑููุฉ ุฌุฏูุฏุฉ ุณูุชุตู ุจูุง ุจูุงุฌูุฉ ุงููุณุชุฎุฏู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetApplyElevation</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toggle</span></span></span><span class="hljs-function">)</span></span> { applyElevation = toggle; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฎูุงู ุชูุตููู ุจููุชุงุญ ุงูุงุฑุชูุงุน ุ ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุทุฑููุฉ bool ุงูุฏููุงููููุฉ ูู ุงูุฌุฒุก ุงูุนููู ูู ูุงุฆูุฉ ุงูุทุฑู. </font><font style="vertical-align: inherit;">ูุง ุชุนุฑุถ ุงูุฅุตุฏุงุฑุงุช ุงูุตุญูุญุฉ ุนูุงูุฉ ุงุฎุชูุงุฑ ูู ุงูููุชุด.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/887/d5b/1b2/887d5b1b275cb18957b63bcbecf145d4.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุณู ุญุงูุฉ ููุชุงุญ ุงูุงุฑุชูุงุน. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุฎุชูุงุฑ ุงูุชูููู ููุท ุจุงููุฑูุฏ ุฃู ุงูุงุฑุชูุงุน ููุท. </font><font style="vertical-align: inherit;">ุฃู ููุงููุง ุ ูุงูุนุงุฏุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุญุชู ุฃู ูุฎุชุงุฑ ุนุฏู ุชุบููุฑ ุฃุญุฏููุง ุฃู ุงูุขุฎุฑ ุ ูููู ุญุชู ุงูุขู ููุณ ูููุฏูุง ููุง ุจุดูู ุฎุงุต.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจุฏูู ุจูู ุงูููู ูุงูุงุฑุชูุงุน.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ููุทูุฆ ุงูุงุฑุชูุงุน ุนูุฏ ุงุฎุชูุงุฑ ุงููููุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,       toggle group. ,          ,     toggle group. </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฌู ุงููุฑุดุงุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุนู ุญุฌู ุงููุฑุดุงุฉ ุงููุงุจู ูุชุบููุฑ ุงูุญุฌู ุ ุฃุถู ูุชุบูุฑูุง ุตุญูุญูุง </font></font><code>brushSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุฑููุฉ ูุชุนูููู ูู ุฎูุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ุณูุณุชุฎุฏู ุดุฑูุท ุงูุชูุฑูุฑ ุ ูุฐูู ูุฑุฉ ุฃุฎุฑู ุณูุชุนูู ุนูููุง ุชุญููู ุงููููุฉ ูู ุชุนููู ุฅูู int.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> brushSize; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetBrushSize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size</span></span></span><span class="hljs-function">)</span></span> { brushSize = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)size; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/794/bfb/60f/794bfb60f2f1c777fa0363ede3f19540.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูู ุญุฌู ุงููุฑุดุงุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฅูุดุงุก ุดุฑูุท ุชูุฑูุฑ ุฌุฏูุฏ ูู ุฎูุงู ุชูุฑุงุฑ ุดุฑูุท ุชูุฑูุฑ ุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ูููุชู ุงููุตูู ุฅูู 4 ูุฃุฑูููุง ุจุงูุทุฑููุฉ ุงูููุงุจูุฉ. </font><font style="vertical-align: inherit;">ุฃุถูุช ุฃูุถูุง ุนูุงูุฉ ูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/88e/8b2/f58/88e8b2f58abfd48657387e6670c51215.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุฏุงุฏุงุช ุดุฑูุท ุชูุฑูุฑ ุญุฌู ุงููุฑุดุงุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ุจุฅููุงููุง ุชุญุฑูุฑ ุนุฏุฉ ุฎูุงูุง ูู ููุณ ุงูููุช ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ </font></font><code>EditCells</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณุชุฏุนู ูุฐู ุงูุทุฑููุฉ </font></font><code>EditCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌููุน ุงูุฎูุงูุง ุงููุนููุฉ. </font><font style="vertical-align: inherit;">ุณูุชู ุงุนุชุจุงุฑ ุงูุฎููุฉ ุงููุญุฏุฏุฉ ูุจุฏุฆููุง ูุฑูุฒ ุงููุฑุดุงุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Ray inputRay = Camera.main.ScreenPointToRay(Input.mousePosition); RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(inputRay, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit)) { EditCells(hexGrid.GetCell(hit.point)); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCells</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell center</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฏ ุญุฌู ุงููุฑุดุงุฉ ูุตู ูุทุฑ ุงูุชุญุฑูุฑ. </font><font style="vertical-align: inherit;">ูุน ูุตู ูุทุฑ 0 ุ ุณุชููู ูุฐู ุฎููุฉ ูุฑูุฒูุฉ ูุงุญุฏุฉ ููุท. </font><font style="vertical-align: inherit;">ูุน ูุตู ูุทุฑ 1 ุ ุณูููู ูุฐุง ุงููุฑูุฒ ูุฌูุฑุงูู. </font><font style="vertical-align: inherit;">ุนูุฏ ูุตู ูุทุฑ 2 ุ ูุชู ุชุดุบูู ุฌูุฑุงู ุงููุฑูุฒ ูุฌูุฑุงููู ุงููุจุงุดุฑูู.</font></font> ูููุฐุง ุฏูุงููู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/612/14d/b65/61214db6508869c0ceda156c103ca032.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุดุนุงุน 3.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุญุฑูุฑ ุงูุฎูุงูุง ุ ุชุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ุนูููุง ูู ุญููุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃููุงู ุฅูู ุฅุญุฏุงุซูุงุช X ู Z ูููุฑูุฒ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCells</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell center</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerX = center.coordinates.X; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerZ = center.coordinates.Z; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุฏ ุงูุญุฏ ุงูุฃุฏูู ููุฅุญุฏุงุซูุงุช Z ุจุทุฑุญ ูุตู ุงููุทุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ูุญุฏุฏ ุฎุท ุงูุตูุฑ. </font><font style="vertical-align: inherit;">ุจุฏุกูุง ูู ูุฐุง ุงูุฎุท ุ ููุชูู ุฎูุงูู ุญุชู ูุบุทู ุงูุฎุท ูู ุงูููุชุตู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCells</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell center</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerX = center.coordinates.X; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerZ = center.coordinates.Z; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r = <span class="hljs-number"><span class="hljs-number">0</span></span>, z = centerZ - brushSize; z &lt;= centerZ; z++, r++) { } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ุงูุฎููุฉ ุงูุฃููู ูู ุงูุตู ุงูุณููู ุนูู ููุณ ุฅุญุฏุงุซูุงุช X ูุซู ุงูุฎููุฉ ุงููุฑูุฒูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุงูุชูุณูู ููุฎูุถ โโุจุฒูุงุฏุฉ ุฑูู ุงูุณุทุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ ุฏุงุฆููุง ุนูู ุฅุญุฏุงุซู ุณ ูุณุงูู ุฅุญุฏุงุซูุงุช ุงููุฑูุฒ ุจุงูุฅุถุงูุฉ ุฅูู ูุตู ุงููุทุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุชูุฑุงุฑ ุญูู ูู ุตู ูุงูุญุตูู ุนูู ุงูุฎูุงูุง ุญุณุจ ุฅุญุฏุงุซูุงุชูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r = <span class="hljs-number"><span class="hljs-number">0</span></span>, z = centerZ - brushSize; z &lt;= centerZ; z++, r++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = centerX - r; x &lt;= centerX + brushSize; x++) { EditCell(hexGrid.GetCell(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCoordinates(x, z))); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณ ูุฏููุง ุญุชู ุงูุขู ุทุฑููุฉ </font></font><code>HexGrid.GetCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุนููุฉ ุฅุญุฏุงุซูุงุช ุ ูุฐุง ูู ุจุฅูุดุงุฆูุง. </font><font style="vertical-align: inherit;">ุชุญููู ุฅูู ุฅุญุฏุงุซูุงุช ุงููุฒูุญ ูุงูุญุตูู ุนูู ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCoordinates coordinates</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> z = coordinates.Z; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = coordinates.X + z / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cells[x + z * cellCountX]; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b59/490/9f2/b594909f28de1c2d52c954d312d7b90f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุณููู ูู ุงููุฑุดุงุฉ ุ ุงูุญุฌู 2.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุบุทู ุจููุฉ </font><i><font style="vertical-align: inherit;">ุงููุฑุดุงุฉ ุ</font></i><font style="vertical-align: inherit;"> ููููู ุจุฏูุฑุฉ ูู ุงูุฃุนูู ุฅูู ุงูุฃุณูู ุฅูู ุงููุฑูุฒ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุนูุณ ุงูููุทู ููุฌุจ ุงุณุชุจุนุงุฏ ุงูุตู ุงููุฑูุฒู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCells</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell center</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerX = center.coordinates.X; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerZ = center.coordinates.Z; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r = <span class="hljs-number"><span class="hljs-number">0</span></span>, z = centerZ - brushSize; z &lt;= centerZ; z++, r++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = centerX - r; x &lt;= centerX + brushSize; x++) { EditCell(hexGrid.GetCell(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCoordinates(x, z))); } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r = <span class="hljs-number"><span class="hljs-number">0</span></span>, z = centerZ + brushSize; z &gt; centerZ; z--, r++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = centerX - brushSize; x &lt;= centerX + r; x++) { EditCell(hexGrid.GetCell(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCoordinates(x, z))); } } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9e8/add/c7c/9e8addc7cf0012210cdd5dc0588bc6cf.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุดุงุฉ ูุงููุฉ ุ ุงูุญุฌู 2.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูุนูู ุ ูุง ูู ุชุชุฌุงูุฒ ุงููุฑุดุงุฉ ุญุฏูุฏ ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุฏุซ ูุฐุง ุ ูุญุตู ุนูู ุงุณุชุซูุงุก ุฎุงุฑุฌ ุงููุทุงู. </font><font style="vertical-align: inherit;">ูุชุฌูุจ ุฐููุ ุชุญูู ูู ุงูุญุฏูุฏ </font></font><code>HexGrid.GetCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุณุชุฑุฏุงุฏ </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทูุจ ุฎููุฉ ุบูุฑ ููุฌูุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCoordinates coordinates</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> z = coordinates.Z; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (z &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || z &gt;= cellCountZ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = coordinates.X + z / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || x &gt;= cellCountX) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cells[x + z * cellCountX]; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌูุจ ุงุณุชุซูุงุก ูุฑุฌุน ูุงุฑุบ ุ </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุงูุชุญูู ูุจู ุงูุชุญุฑูุฑ ูุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ููุฌูุฏุฉ ุจุงููุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyColor) { cell.Color = activeColor; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyElevation) { cell.Elevation = activeElevation; } } }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงุณุชุฎุฏุงู ุฃุญุฌุงู ูุฑุดุงุฉ ูุชุนุฏุฏุฉ. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุจุฏูู ุฑุคูุฉ ุชุณููุฉ ุงูุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃุบูุจ ุงูุฃุญูุงู ุ ูุง ูุญุชุงุฌ ุฅูู ุฑุคูุฉ ููุตูุงุช ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุฐูู ุฏุนููุง ูุฌุนููุง ุงุฎุชูุงุฑูุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูู ุฌุฒุก ูุชุญูู ูู ููุญุฉ ุงูุฑุณู ุงูุฎุงุตุฉ ุจู ุ ูุฃุถู ุทุฑููุฉ </font></font><code>ShowUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุนูุฏูุง ุชููู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฑุฆูุฉ ุ ูููู ุจุชูุดูุท ุงูููุญุฉ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูู ุจุฅูุบุงุก ุชูุดูุทู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowUI</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> visible</span></span></span><span class="hljs-function">)</span></span> { gridCanvas.gameObject.SetActive(visible); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ูุฎูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจุดูู ุงูุชุฑุงุถู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gridCanvas = GetComponentInChildren&lt;Canvas&gt;(); hexMesh = GetComponentInChildren&lt;HexMesh&gt;(); cells = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCell[HexMetrics.chunkSizeX * HexMetrics.chunkSizeZ]; ShowUI(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุฑุคูุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุชู ุชุจุฏูููุง ููุฎุฑูุทุฉ ุจุฃููููุง ุ ูุฅููุง ูุถูู ุงูุทุฑููุฉ </font></font><code>ShowUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุฑุฑ ุงูุทูุจ ููุท ุฅูู ุดุธุงูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowUI</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> visible</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; chunks.Length; i++) { chunks[i].ShowUI(visible); } }</code> </pre> <br> <code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุตู ุนูู ููุณ ุงูุทุฑููุฉ ุ ูููุฑุฑ ุงูุทูุจ ุฅูู ุงูุดุจูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowUI</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> visible</span></span></span><span class="hljs-function">)</span></span> { hexGrid.ShowUI(visible); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุฎูุฑูุง ุ ูููููุง ุฅุถุงูุฉ ููุชุงุญ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุชูุตููู. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/120/637/740/120637740d174168d298407ec129c0d3.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุฏูู ุฑุคูุฉ ุงูุนูุงูุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก ุงูุณุงุฏุณ: ุงูุฃููุงุฑ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุถุงูุฉ ุงูุฃููุงุฑ ุฅูู ุงูุฎูุงูุง. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณุญุจ ูุฅุณูุงุท ุงูุฏุนู ูุฑุณู ุงูุฃููุงุฑ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ูุฌุงุฑู ุงูุฃููุงุฑ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุฎุฏุงู ุดุจูุงุช ูุชุนุฏุฏุฉ ููู ุฌุฒุก. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ุชุฌูุน ูุงุฆูุฉ ูุดุชุฑู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุซููุซ ูุชุญุฑูู ุงูููุงู ุงููุชุฏููุฉ. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏุซูุง ูู ุงูุฌุฒุก ุงูุณุงุจู ุนู ุฏุนู ุงูุฎุฑุงุฆุท ุงููุจูุฑุฉ. </font><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุงูุชูุงู ุฅูู ุนูุงุตุฑ ุงูุฅุบุงุซุฉ ุงูุฃูุจุฑ. </font><font style="vertical-align: inherit;">ูุฐู ุงููุฑุฉ ุณูุชุญุฏุซ ุนู ุงูุฃููุงุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/56a/e66/4fb/56ae664fb799dd59d5d8e85397945937.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุฏูู ุงูุฃููุงุฑ ูู ุงูุฌุจุงู.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎูุงูุง ุงูููุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุซูุงุซ ุทุฑู ูุฅุถุงูุฉ ุงูุฃููุงุฑ ุฅูู ุดุจูุฉ ูู ุงูุณุฏุงุณูุงุช. ุงูุทุฑููุฉ ุงูุฃููู ูู ุงูุณูุงุญ ููู ุจุงูุชุฏูู ูู ุฎููุฉ ุฅูู ุฃุฎุฑู. ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุชู ุชูููุฐูุง ูู Endless Legend. ุงูุทุฑููุฉ ุงูุซุงููุฉ ูู ุงูุณูุงุญ ููู ุจุงูุชุฏูู ุจูู ุงูุฎูุงูุง ุ ูู ุงูุญุงูุฉ ุฅูู ุงูุญุงูุฉ. ูุฐูู ูุชู ุชูููุฐู ูู ุงูุญุถุงุฑุฉ 5. ุงูุทุฑููุฉ ุงูุซุงูุซุฉ ููุณุช ุฅูุดุงุก ููุงูู ููุงุฑูุฉ ุฎุงุตุฉ ุนูู ุงูุฅุทูุงู ุ ูููู ุงุณุชุฎุฏุงู ุฎูุงูุง ุงูููุงู ูุงูุชุฑุงุญูุง. ูุฐูู ูุชู ุชูููุฐ ุงูุฃููุงุฑ ูู Age of Wonders 3. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ุญูุงู ุงูุฎูุงูุง ูุดุบููุฉ ุจุงููุนู ุจุงูููุญุฏุฑุงุช ูุงูููุญุฏุฑุงุช. ูุฐุง ูุชุฑู ูุณุงุญุฉ ุตุบูุฑุฉ ููุฃููุงุฑ. ูุฐูู ุ ุณูุฌุนููุง ุชุชุฏูู ูู ุฎููุฉ ุฅูู ุฃุฎุฑู. ูุฐุง ูุนูู ุฃูู ูู ูู ุฎููุฉ ูู ูููู ููุงู ููุฑ ุ ุฃู ุณูุชุฏูู ููุฑ ุนูู ุทููู ุ ุฃู ุณูููู ููุงู ุจุฏุงูุฉ ุฃู ููุงูุฉ ููููุฑ ูููุง. ูู ุชูู ุงูุฎูุงูุง ุงูุชู ูุชุฏูู ุนูู ุทูููุง ุงูููุฑ ุ ูููู ุฃู ูุชุฏูู ูุจุงุดุฑุฉ ุ ุซู ููุนุทู ุฎุทูุฉ ูุงุญุฏุฉ ุฃู ุฎุทูุชูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e7f/db2/2a4/e7fdb22a4346f9281865ad95a1946f75.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุณุฉ ุชุดูููุงุช ููุฑูุฉ ููููุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฏุนู ุงูุชูุฑุน ุฃู ุฏูุฌ ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุณูุคุฏู ูุฐุง ุฅูู ุชุนููุฏ ุงูุฃููุฑ ุฃูุซุฑ ุ ูุฎุงุตุฉ ุชุฏูู ุงูููุงู. </font><font style="vertical-align: inherit;">ููุง ุฃููุง ูู ูุฑุจู ูููุงุช ูุจูุฑุฉ ูู ุงูููุงู. </font><font style="vertical-align: inherit;">ุณููุธุฑ ูููุง ูู ุจุฑูุงูุฌ ุชุนูููู ุขุฎุฑ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงุนุชุจุงุฑ ุงูุฎููุฉ ุงูุชู ูุชุฏูู ูุนูุง ุงูููุฑ ูู ููุณ ุงูููุช ุนูู ุฃููุง ููุฑ ูุงุฑุฏ ูุตุงุฏุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุญุชูู ุนูู ุจุฏุงูุฉ ููุฑ ุ ููู ูููู ูู ุณูู ููุฑ ุตุงุฏุฑ. </font><font style="vertical-align: inherit;">ูุฅุฐุง ูุงู ูุญุชูู ุนูู ููุงูุฉ ุงูููุฑ ุ ููู ูููู ูู ุณูู ููุฑ ูุงุฑุฏ. </font><font style="vertical-align: inherit;">ูููููุง ุชุฎุฒูู ูุฐู ุงููุนูููุงุช </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูููุชูู ููุทููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> hasIncomingRiver, hasOutgoingRiver;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฐุง ูุง ูููู. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃูุถูุง ุฅูู ูุนุฑูุฉ ุงุชุฌุงู ูุฐู ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ููุฑ ุตุงุฏุฑ ุ ูุฅูู ูุดูุฑ ุฅูู ุฃูู ูุชุญุฑู. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ูุฌูุฏ ููุฑ ูุงุฑุฏ ุ ูุฅูู ูุดูุฑ ุฅูู ูุตุฏุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> hasIncomingRiver, hasOutgoingRiver; HexDirection incomingRiver, outgoingRiver;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุญุชุงุฌ ุฅูู ูุฐู ุงููุนูููุงุช ุนูุฏ ุชุซููุซ ุงูุฎูุงูุง ุ ูุฐูู ุณูุถูู ุฎุตุงุฆุต ูููุตูู ุฅูููุง. </font><font style="vertical-align: inherit;">ูู ูุฏุนู ุชุนููููู ูุจุงุดุฑุฉู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุณูุถูู ุฃูุถูุง ุทุฑููุฉ ูููุตูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasIncomingRiver { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasIncomingRiver; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasOutgoingRiver { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasOutgoingRiver; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexDirection IncomingRiver { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> incomingRiver; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexDirection OutgoingRiver { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> outgoingRiver; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุคุงู ุงูููู ูู ูุง ุฅุฐุง ูุงู ููุงู ููุฑ ูู ุงูุฎููุฉ ุ ุจุบุถ ุงููุธุฑ ุนู ุงูุชูุงุตูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ูุถูู ุฎุงุตูุฉ ููุฐุง ุฃูุถูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasRiver { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasIncomingRiver || hasOutgoingRiver; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุคุงู ููุทูู ุขุฎุฑ: ุจุฏุงูุฉ ุฃู ููุงูุฉ ุงูููุฑ ูู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุญุงูุฉ ุงูููุฑ ุงููุงุฑุฏ ูุงูุตุงุฏุฑ ูุฎุชููุฉ ุ ููุฐุง ูู ุงูุญุงู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูุฌุนู ูุฐุง ุฎุงุตูุฉ ุฃุฎุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasRiverBeginOrEnd { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasIncomingRiver != hasOutgoingRiver; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุฎูุฑูุง ุ ุณูููู ูู ุงููููุฏ ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงูููุฑ ูุชุฏูู ุนุจุฑ ุณูุณูุฉ ูุนููุฉ ุ ุณูุงุก ูุงูุช ูุงุฑุฏุฉ ุฃู ุตุงุฏุฑุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HasRiverThroughEdge</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasIncomingRiver &amp;&amp; incomingRiver == direction || hasOutgoingRiver &amp;&amp; outgoingRiver == direction; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฒุงูุฉ ุงูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุฃู ูุจุฏุฃ ุจุฅุถุงูุฉ ููุฑ ุฅูู ุฎููุฉ ุ ุฏุนูุง ูููุฐ ุฃููุงู ุฏุนู ุฅุฒุงูุฉ ุงูููุฑ. </font><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณููุชุจ ุทุฑููุฉ ูุฅุฒุงูุฉ ุงูุฌุฒุก ุงูุตุงุฏุฑ ููุท ูู ุงูููุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ููุงู ููุฑ ุตุงุฏุฑ ูู ุงูุฒูุฒุงูุฉ ุ ููุง ุฏุงุนู ููููุงู ุจุฃู ุดูุก. </font><font style="vertical-align: inherit;">ูุฅูุง ุ ูู ุจุฅููุงู ุชุดุบููู ููู ุจุฅุฌุฑุงุก ุงูุชุญุฏูุซ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveOutgoingRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!hasOutgoingRiver) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } hasOutgoingRiver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; Refresh(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฐุง ููุณ ูู ุดูุก </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชุญุฑู ุงูููุฑ ุงูุตุงุฏุฑ ูู ููุงู ูุง. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฌุจ ุฃู ูููู ููุงู ุฌุงุฑ ูุน ุงูููุฑ ุงููุงุฏู. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ููุชุฎูุต ูููุง ุฃูุถูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveOutgoingRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!hasOutgoingRiver) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } hasOutgoingRiver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; Refresh(); HexCell neighbor = GetNeighbor(outgoingRiver); neighbor.hasIncomingRiver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; neighbor.Refresh(); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุฃู ูุชุฏูู ููุฑ ูู ุงูุฎุฑูุทุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">      ,     .     ,   . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฒุงูุฉ ููุฑ ูู ุฎููุฉ ูุบูุฑ ูุธูุฑ ุชูู ุงูุฎููุฉ ููุท. </font><font style="vertical-align: inherit;">ุจุฎูุงู ุชุญุฑูุฑ ุงูุงุฑุชูุงุน ุฃู ุงูููู ุ ูุฅูู ูุง ูุคุซุฑ ุนูู ุงูุฌูุฑุงู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุงูุฎููุฉ ููุณูุง ููุท ุ ูููุณ ุชุญุฏูุซ ุฌูุฑุงููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveOutgoingRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!hasOutgoingRiver) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } hasOutgoingRiver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; RefreshSelfOnly(); HexCell neighbor = GetNeighbor(outgoingRiver); neighbor.hasIncomingRiver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; neighbor.RefreshSelfOnly(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู ูุฐู ุงูุทุฑููุฉ </font></font><code>RefreshSelfOnly</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุจุณุงุทุฉ ุจุชุญุฏูุซ ุงูุฌุฒุก ุงูุฐู ุชูุชูู ุฅููู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุง ูุบูุฑ ุงูููุฑ ุฃุซูุงุก ุชููุฆุฉ ุงูุดุจูุฉ ุ ููุง ุฏุงุนู ููููู ุฅุฐุง ุชู ุชุนููู ุฌุฒุก ุจุงููุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RefreshSelfOnly</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { chunk.Refresh(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนูู ุฅุฒุงูุฉ ุงูุฃููุงุฑ ุงููุงุฑุฏุฉ ุจููุณ ุงูุทุฑููุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveIncomingRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!hasIncomingRiver) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } hasIncomingRiver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; RefreshSelfOnly(); HexCell neighbor = GetNeighbor(incomingRiver); neighbor.hasOutgoingRiver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; neighbor.RefreshSelfOnly(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฅุฒุงูุฉ ุงูููุฑ ุจุงููุงูู ูุนูู ุจุจุณุงุทุฉ ุฅุฒุงูุฉ ุงูุฃุฌุฒุงุก ุงููุงุฑุฏุฉ ูุงูุตุงุฏุฑุฉ ูู ุงูููุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RemoveOutgoingRiver(); RemoveIncomingRiver(); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถููุง ุงูุฃููุงุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุนู ุฅูุดุงุก ุงูุฃููุงุฑ ุ ูุญุชุงุฌ ุฅูู ุทุฑููุฉ ูุชุญุฏูุฏ ุงูููุฑ ุงูุฎุงุฑุฌ ููุฎููุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุนููู ุฅุนุงุฏุฉ ุชุนุฑูู ุฌููุน ุงูุฃููุงุฑ ุงูุณุงุจูุฉ ุงูุณุงุจูุฉ ูุชุนููู ุงูููุฑ ุงููุงุฑุฏ ุงูููุงุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุณูุง ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฃู ุดูุก ุฅุฐุง ูุงู ุงูููุฑ ููุฌูุฏูุง ุจุงููุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetOutgoingRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasOutgoingRiver &amp;&amp; outgoingRiver == direction) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ูุฌูุฏ ุฌุงุฑ ูู ุงูุงุชุฌุงู ุงูุตุญูุญ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูููู ููุฃููุงุฑ ุฃู ุชุชุฏูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฌุจ ุฃู ูููู ุงูุนูููุฉ ุฅุฐุง ูุงู ุงูุฌุงุฑ ุฃุนูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell neighbor = GetNeighbor(direction); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor || elevation &lt; neighbor.elevation) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ูุญุชุงุฌ ุฅูู ูุณุญ ุงูููุฑ ุงูุณุงุจู ุงูุณุงุจู. </font><font style="vertical-align: inherit;">ููุญุชุงุฌ ุฃูุถูุง ุฅูู ุฅุฒุงูุฉ ุงูููุฑ ุงููุงุฏู ุ ุฅุฐุง ูุงู ูุชุฑุงูุจูุง ุนูู ููุฑ ุตุงุฏุฑ ุฌุฏูุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> RemoveOutgoingRiver(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasIncomingRiver &amp;&amp; incomingRiver == direction) { RemoveIncomingRiver(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูููููุง ุฃู ููุชูู ุฅูู ุฅูุดุงุก ุงูููุฑ ุงูุตุงุฏุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> hasOutgoingRiver = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; outgoingRiver = direction; RefreshSelfOnly();</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ุชูุณ ุชุนููู ุงูููุฑ ุงููุงุฑุฏ ูุฎููุฉ ุฃุฎุฑู ุจุนุฏ ุฅุฒุงูุฉ ุงูููุฑ ุงููุงุฑุฏ ุงูุญุงูู ุ ุฅุฐุง ูุงู ููุฌูุฏูุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> neighbor.RemoveIncomingRiver(); neighbor.hasIncomingRiver = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; neighbor.incomingRiver = direction.Opposite(); neighbor.RefreshSelfOnly();</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุฎูุต ูู ุงูุฃููุงุฑ ุงููุชุฏููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุฌุนููุง ูู ุงููููู ุฅุถุงูุฉ ุงูุฃููุงุฑ ุงูุตุญูุญุฉ ููุท ุ ูุง ูุฒุงู ุจุฅููุงู ุงูุฅุฌุฑุงุกุงุช ุงูุฃุฎุฑู ุฅูุดุงุก ุงูุฃููุงุฑ ุงูุฎุงุทุฆุฉ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุบูุฑ ุงุฑุชูุงุน ุงูุฎููุฉ ุ ูุฌุจ ุนูููุง ูุฑุฉ ุฃุฎุฑู ุฃู ูุชุฃูุฏ ุจููุฉ ูู ุฃูู ูุง ูููู ุฃู ุชุชุฏูู ุงูุฃููุงุฑ ููุท. </font><font style="vertical-align: inherit;">ูุฌุจ ุฅุฒุงูุฉ ุฌููุน ุงูุฃููุงุฑ ุบูุฑ ุงูููุชุธูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Elevation { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> elevation; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( hasOutgoingRiver &amp;&amp; elevation &lt; GetNeighbor(outgoingRiver).elevation ) { RemoveOutgoingRiver(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( hasIncomingRiver &amp;&amp; elevation &gt; GetNeighbor(incomingRiver).elevation ) { RemoveIncomingRiver(); } Refresh(); } }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ุงูุฃููุงุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุนู ุชุญุฑูุฑ ุงูููุฑ ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุชุจุฏูู ููุฑ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ูู ุงูุญูููุฉ. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุฏุนู ูุซูุงุซุฉ ุฃูุถุงุน ุชุญุฑูุฑ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุชุฌุงูู ุงูุฃููุงุฑ ุ ุฃู ุฅุถุงูุชูุง ุ ุฃู ุญุฐููุง. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุชุนุฏุงุฏ ุจุณูุท ููููุงุชูุญ ูุชุชุจุน ุงูุญุงูุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ุณูุณุชุฎุฏูู ููุท ุฏุงุฎู ุงููุญุฑุฑ ุ ูููููุง ุชุญุฏูุฏู ุฏุงุฎู ุงููุตู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุฌูุจูุง ุฅูู ุฌูุจ ูุน ุญูู ูุถุน ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> OptionalToggle { Ignore, Yes, No } OptionalToggle riverMode;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุญู ุจุญุงุฌุฉ ุฅูู ุทุฑููุฉ ูุชุบููุฑ ูุธุงู ุงูููุฑ ูู ุฎูุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetRiverMode</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mode</span></span></span><span class="hljs-function">)</span></span> { riverMode = (OptionalToggle)mode; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุญูู ูู ูุธุงู ุงูููุฑ ุ ุฃุถู ุซูุงุซุฉ ููุงุชูุญ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฑุจุทูุง ุจูุฌููุนุฉ ุงูุชุจุฏูู ุงูุฌุฏูุฏุฉ ุ ููุง ูุนููุง ูุน ุงูุฃููุงู. </font><font style="vertical-align: inherit;">ููุฏ ููุฃุช ููุงุชูุญ ุงูุชุจุฏูู ุจุญูุซ ุชููู ุชุณููุงุชูุง ุชุญุช ูุฑุจุนุงุช ุงูุงุฎุชูุงุฑ. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณุชุธู ุฑูููุฉ ุจูุง ูููู ูุชูุงุณุจ ุฌููุน ุงูุฎูุงุฑุงุช ุงูุซูุงุซุฉ ูู ุณุทุฑ ูุงุญุฏ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0f5/1bf/d9c/0f51bfd9ce2a73bc23f1ef99cbd4b24e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูุง ุชุณุชุฎุฏู ูุงุฆูุฉ ููุณุฏูุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,    .   dropdown list  Unity        Play.    ,      . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณุญุจ ูุฅุณูุงุท ุงูุงุนุชุฑุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก ููุฑ ุ ูุญุชุงุฌ ุฅูู ุฎููุฉ ูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุฒูุฏูุง ุจูุฐู ุงููุนูููุงุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุฏุนู ุงูุณุญุจ ูุงูุฅููุงุช ูู ุฎููุฉ ุฅูู ุฃุฎุฑู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ูุฐุง ุงูุณุญุจ ุณูููู ุตุญูุญูุง ุ ููุฐูู ุชุญุฏูุฏ ุงุชุฌุงูู. </font><font style="vertical-align: inherit;">ูููุชุนุฑู ุนูู ุงูุณุญุจ ูุงูุฅููุงุช ุ ูุญุชุงุฌ ุฅูู ุชุฐูุฑ ุงูุฎููุฉ ุงูุณุงุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isDrag; HexDirection dragDirection; HexCell previousCell;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ุนูุฏูุง ูุง ูุชู ุฅุฌุฑุงุก ุงูุณุญุจ ุ ูุง ูุชู ุชูููุฐ ุงูุฎููุฉ ุงูุณุงุจูุฉ. </font><font style="vertical-align: inherit;">ุฃู ุนูุฏูุง ูุง ูููู ููุงู ุฅุฏุฎุงู ุฃู ูุง ูุชูุงุนู ูุน ุงูุจุทุงูุฉ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุชุนููู ูููุฉ ููุง </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( Input.GetMouseButton(<span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; !EventSystem.current.IsPointerOverGameObject() ) { HandleInput(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { previousCell = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Ray inputRay = Camera.main.ScreenPointToRay(Input.mousePosition); RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(inputRay, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit)) { EditCells(hexGrid.GetCell(hit.point)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { previousCell = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎููุฉ ุงูุญุงููุฉ ูู ุงูุฎููุฉ ุงูุชู ูุฌุฏูุงูุง ุจุนุจูุฑ ุงูุดุนุงุน ุจุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุชุญุฑูุฑ ุงูุฎูุงูุง ุ ูุชู ุชุญุฏูุซูุง ูุชุตุจุญ ุงูุฎููุฉ ุงูุณุงุจูุฉ ูุชุญุฏูุซ ุฌุฏูุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Ray inputRay = Camera.main.ScreenPointToRay(Input.mousePosition); RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(inputRay, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit)) { HexCell currentCell = hexGrid.GetCell(hit.point); EditCells(currentCell); previousCell = currentCell; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { previousCell = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุชุญุฏูุฏ ุงูุฎููุฉ ุงูุญุงููุฉ ุ ูููููุง ููุงุฑูุชูุง ุจุงูุฎููุฉ ุงูุณุงุจูุฉ ุ ุฅู ูุฌุฏุช. </font><font style="vertical-align: inherit;">ุฅุฐุง ุญุตููุง ุนูู ุฎููุชูู ูุฎุชููุชูู ุ ููุฏ ูููู ูุฏููุง ุงูุณุญุจ ูุงูุฅููุงุช ุงูุตุญูุญ ููุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุฐูู. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูุฐุง ุจุงูุชุฃููุฏ ููุณ ุงูุณุญุจ ูุงูุฅููุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(inputRay, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit)) { HexCell currentCell = hexGrid.GetCell(hit.point); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousCell &amp;&amp; previousCell != currentCell) { ValidateDrag(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { isDrag = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } EditCells(currentCell); previousCell = currentCell; isDrag = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุชุญูู ูู ุงูุณุญุจ ูุงูุฅุณูุงุทุ </font><font style="vertical-align: inherit;">ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุงูุญุงููุฉ ูู ุฌูุงุฑ ุงูุฎููุฉ ุงูุณุงุจูุฉ. </font><font style="vertical-align: inherit;">ูุชุญูู ูู ุฐูู ูู ุฎูุงู ุงูุชุญุงูู ุนูู ุฌูุฑุงููุง ูู ุฏูุฑุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุฌุฏูุง ุชุทุงุจููุง ุ ูุชุนุฑู ุฃูุถูุง ุนูู ุงูููุฑ ุนูู ุงุชุฌุงู ุงูุณุญุจ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ValidateDrag</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell currentCell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( dragDirection = HexDirection.NE; dragDirection &lt;= HexDirection.NW; dragDirection++ ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousCell.GetNeighbor(dragDirection) == currentCell) { isDrag = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } isDrag = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุณูููู ุจุนูู ุฌุฑ ูุชุดูุฌุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">       ,          .         ยซยป ,     . <br><br>    ,   .            . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ุงูุฎูุงูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุชุนุฑู ุนูู ุงูุณุญุจ ูุงูุฅููุงุช ุ ูููููุง ุชุญุฏูุฏ ุงูุฃููุงุฑ ุงูุตุงุฏุฑุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุฃูุถูุง ุฅุฒุงูุฉ ุงูุฃููุงุฑ ุ ูุฐูู ุ ูุง ููุฒู ุฏุนู ุงูุณุญุจ ูุงูุฅููุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyColor) { cell.Color = activeColor; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyElevation) { cell.Elevation = activeElevation; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (riverMode == OptionalToggle.No) { cell.RemoveRiver(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isDrag &amp;&amp; riverMode == OptionalToggle.Yes) { previousCell.SetOutgoingRiver(dragDirection); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุคุฏู ูุฐุง ุงูุฑูุฒ ุฅูู ุฑุณู ุงูููุฑ ูู ุงูุฎููุฉ ุงูุณุงุจูุฉ ุฅูู ุงูุชูุงุฑ. </font><font style="vertical-align: inherit;">ูููู ูุชุฌุงูู ุญุฌู ุงููุฑุดุงุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ููุทูู ุชูุงููุง ุ ูููู ุฏุนูุง ูุฑุณู ุงูุฃููุงุฑ ูุฌููุน ุงูุฎูุงูุง ุงููุบููุฉ ุจูุงุณุทุฉ ุงููุฑุดุงุฉ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุฌุฑุงุก ุงูุนูููุงุช ุนูู ุงูุฎููุฉ ุงููุญุฑุฑุฉ. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ูุฌูุฏ ุฎููุฉ ุฃุฎุฑู ุจุงููุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isDrag &amp;&amp; riverMode == OptionalToggle.Yes) { HexCell otherCell = cell.GetNeighbor(dragDirection.Opposite()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherCell) { otherCell.SetOutgoingRiver(dragDirection); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุชุญุฑูุฑ ุงูุฃููุงุฑ ุ ููู ูุง ูุฑุงูุง ุจุนุฏ. </font><font style="vertical-align: inherit;">ูููููุง ุงูุชุญูู ูู ุฃู ูุฐุง ูุนูู ูู ุฎูุงู ูุญุต ุงูุฎูุงูุง ุงููุนุฏูุฉ ูู ููุชุด ุงูุชุตุญูุญ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4fe/927/46f/4fe92746f97fc517dc0d1da7c0aeee62.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎููุฉ ุจูุง ููุฑ ูู ููุชุด ุงูุชุตุญูุญ.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูู ููุชุด ุงูุชุตุญูุญุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">             .        .    ,     . </div></div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุงุฑู ุงูููุฑ ุจูู ุงูุฎูุงูุง </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุชุซููุซ ููุฑ ุ ูุญุชุงุฌ ุฅูู ุงููุธุฑ ูู ุฌุฒุฃูู: ูููุน ูุงุน ุงูููุฑ ูุงูููุงู ุงูุชู ุชุชุฏูู ูู ุฎูุงูู. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุณููุดุฆ ููุงุฉ ููุชุฑู ุงูููุงู ูููุช ูุงุญู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุจุณุท ุฌุฒุก ูู ุงูููุฑ ูู ุญูุซ ูุชุฏูู ูู ุงูุชูุงุทุนุงุช ุจูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ุจูููุง ูููู ุจุชุซููุซ ูุฐู ุงูููุทูุฉ ุจุดุฑูุท ูู ุซูุงุซุฉ ุฃุฑุจุงุน. </font><font style="vertical-align: inherit;">ูููููุง ุฅุถุงูุฉ ูุงุน ููุฑ ุฅูููุง ุนู ุทุฑูู ุฎูุถ ุงูุฑุจุงุนู ุงูุฃูุณุท ูุฅุถุงูุฉ ุฌุฏุงุฑูู ููููุงุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/545/b3c/b93/545b3cb9373e9479011916513c3c51da.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุถุงูุฉ ููุฑ ุฅูู ุดุฑูุท ุถูุน. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐุง ุ ูู ุญุงูุฉ ุงูููุฑ ุ ุณุชููู ููุงู ุญุงุฌุฉ ุฅูู ููุงุฏุชูู ุฅุถุงููุชูู ูุณูุชู ุฅูุดุงุก ููุงุฉ ุจุฌุฏุงุฑูู ุฑุฃุณููู. </font><font style="vertical-align: inherit;">ููุฌ ุจุฏูู ูุงุณุชุฎุฏุงู ุฃุฑุจุนุฉ ุฃุฑุจุงุน. </font><font style="vertical-align: inherit;">ุซู ูุฎูุถ ุงูููุฉ ุงููุณุทู ูุฅูุดุงุก ุณุฑูุฑ ุจุฌุฏุฑุงู ูุงุฆูุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/757/7d9/ac1/7577d9ac1978be05cbdda0f8925c75d0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงุฆูุง ุฃุฑุจุนุฉ ุฃุฑุจุงุน. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุชุฎุฏุงู ุงููุณุชูุฑ ูููุณ ุงูุนุฏุฏ ูู ุงูุฒูุงูุง ุงูุฑุจุงุนูุฉ ููุงุณุจ ุ ูุฐูู ุฏุนูุง ูุฎุชุงุฑ ูุฐุง ุงูุฎูุงุฑ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถููุง ููู ุงูุญุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุทูุจ ุงูุงูุชูุงู ูู ุซูุงุซุฉ ุฅูู ุฃุฑุจุนุฉ ููู ุญุงูุฉ ุฅูุดุงุก ููุฉ ุฅุถุงููุฉ ููุญุงูุฉ. </font><font style="vertical-align: inherit;">ุฅุนุงุฏุฉ ูุชุงุจุฉ </font></font><code>EdgeVertices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฅุนุงุฏุฉ ุชุณููุฉ ูุฃูู ูุฑุฉ </font></font><code>v4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>v5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ุฃุนูุฏุช ุชุณููุชู </font></font><code>v3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>v4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุถูู ุงูุฅุฌุฑุงุกุงุช ูู ูุฐุง ุงูุชุฑุชูุจ ุฃู ุฌููุน ุงูุดูุฑุงุช ุชุณุชูุฑ ูู ุงูุฑุฌูุน ุฅูู ุงูููู ุงูุตุญูุญุฉ. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏู ุฎูุงุฑ ุฅุนุงุฏุฉ ุงูุชุณููุฉ ุฃู ุฅุนุงุฏุฉ ุงูุจูุงุก ูู ุงููุญุฑุฑ ุงูุฎุงุต ุจู ูุฅุฌุฑุงุก ุงูุชุบููุฑุงุช ูู ูู ููุงู. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุณูููู ุนููู ูุญุต ุงูููุฏ ุจุฃูููู ูุฏูููุง ูุฅุฌุฑุงุก ุงูุชุบููุฑุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 v1, v2, v4, v5;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฅุนุงุฏุฉ ุชุณููุฉ ูู ุดูุก ุ ุฃุถู ูุงุญุฏุฉ ุฌุฏูุฏุฉ </font></font><code>v3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 v1, v2, v3, v4, v5;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ููุฉ ุฌุฏูุฏุฉ ููููุดุฆ. </font><font style="vertical-align: inherit;">ููู ุชูุน ูู ุงููุณุท ุจูู ููู ุงูุฒุงููุฉ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ุฃู ุชููู ุงูููู ุงูุฃุฎุฑู ูู ยฝ ู ยพ ุ ูููุณ ูู &amp; frac13 ุ </font><font style="vertical-align: inherit;">ู &amp; frac23 ุ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EdgeVertices</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 corner1, Vector3 corner2</span></span></span><span class="hljs-function">)</span></span> { v1 = corner1; v2 = Vector3.Lerp(corner1, corner2, <span class="hljs-number"><span class="hljs-number">0.25f</span></span>); v3 = Vector3.Lerp(corner1, corner2, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); v4 = Vector3.Lerp(corner1, corner2, <span class="hljs-number"><span class="hljs-number">0.75f</span></span>); v5 = corner2; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุถุงูุฉ </font></font><code>v3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>TerraceLerp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> EdgeVertices </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TerraceLerp</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices a, EdgeVertices b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> step</span></span></span><span class="hljs-function">)</span></span> { EdgeVertices result; result.v1 = HexMetrics.TerraceLerp(a.v1, b.v1, step); result.v2 = HexMetrics.TerraceLerp(a.v2, b.v2, step); result.v3 = HexMetrics.TerraceLerp(a.v3, b.v3, step); result.v4 = HexMetrics.TerraceLerp(a.v4, b.v4, step); result.v5 = HexMetrics.TerraceLerp(a.v5, b.v5, step); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุง </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏ </font><font style="vertical-align: inherit;">ูู ูู </font><font style="vertical-align: inherit;">ุชุถููู ููุฉ ุฅุถุงููุฉ ูู ูุฑุงูุญ ูุซูุซุงุช ุงูุถูุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeFan</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 center, EdgeVertices edge, Color color</span></span></span><span class="hljs-function">)</span></span> { AddTriangle(center, edge.v1, edge.v2); AddTriangleColor(color); AddTriangle(center, edge.v2, edge.v3); AddTriangleColor(color); AddTriangle(center, edge.v3, edge.v4); AddTriangleColor(color); AddTriangle(center, edge.v4, edge.v5); AddTriangleColor(color); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃูุถุง ูู ุฎุทูุท ุงูุฒูุงูุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeStrip</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices e1, Color c1, EdgeVertices e2, Color c2 </span></span></span><span class="hljs-function">)</span></span> { AddQuad(e1.v1, e1.v2, e2.v1, e2.v2); AddQuadColor(c1, c2); AddQuad(e1.v2, e1.v3, e2.v2, e2.v3); AddQuadColor(c1, c2); AddQuad(e1.v3, e1.v4, e2.v3, e2.v4); AddQuadColor(c1, c2); AddQuad(e1.v4, e1.v5, e2.v4, e2.v5); AddQuadColor(c1, c2); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/819/89d/599/81989d5996d7c2832e3dd7f61b4a9bb1.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/625/9b1/6a2/6259b16a2776344c51725d32d70001e8.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฑูุฉ ุจูู ุฃุฑุจุนุฉ ูุฎูุณ ุฑุคูุณ ูู ูู ุญุงูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุฑุชูุงุน ูุงุน ุงูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุดุฃูุง ุงูููุงุฉ ุจุฎูุถ ุงูุฌุฒุก ุงูุนููู ุงูุณููู ูู ุงูุถูุน. </font><font style="vertical-align: inherit;">ูุญุฏุฏ ุงููุถุน ุงูุฑุฃุณู ููุงุน ุงูููุฑ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุงููุถุน ุงูุฑุฃุณู ุงูุฏููู ููู ุฎููุฉ ูุดูู ุ ูุฌุจ ุฃู ูุญุงูุธ ุนูู ููุณ ุงุฑุชูุงุน ูุงุน ุงูููุฑ ูู ุงูุฎูุงูุง ุจููุณ ุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐู ุงูููุงู ุ ูุง ูุฌุจ ุฃู ุชุชุฏูู ุฅูู ุฃุนูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ุฃู ูููู ุงูุณุฑูุฑ ููุฎูุถูุง ุจูุง ูููู ููุจูุงุก ุจุงูุฃุณูู ุ ุญุชู ูู ุญุงูุฉ ุงูุฎูุงูุง ุงูุฃูุซุฑ ุงูุญุฑุงููุง ุนููุฏููุง ุ ุจูููุง ูุชุฑู ูู ููุณ ุงูููุช ูุณุงุญุฉ ูุงููุฉ ูููุงุก. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุชุนููู ูุฐุง ุงูุฅุฒุงุญุฉ ุฅูู </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุชุนุจูุฑ ุนูู ุนูู ุฃูู ุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ุชุนููุถุงุช ูุณุชูู ูุงุญุฏ ุณุชููู ูุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> streamBedElevationOffset = <span class="hljs-number"><span class="hljs-number">-1f</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ูุฐุง ุงููููุงุณ ูุฅุถุงูุฉ ุฎุตุงุฆุต </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุตูู ุนูู ุงููุถุน ุงูุฑุฃุณู ููุงุน ููุฑ ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> StreamBedY { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (elevation + HexMetrics.streamBedElevationOffset) * HexMetrics.elevationStep; } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ููุงุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุซููุซ ุฃุญุฏ ุงูุฃุฌุฒุงุก ุงูุซูุงุซุฉ ุงููุซูุซุฉ ููุฎููุฉ ุ ูููููุง ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูููุฑ ูุชุฏูู ุนูู ุทูู ุญุงูุชู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููููููุง ุฎูุถ ุงูููุฉ ุงููุณุทู ููุถูุน ุฅูู ุงุฑุชูุงุน ูุงุน ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector3 center = cell.Position; EdgeVertices e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( center + HexMetrics.GetFirstSolidCorner(direction), center + HexMetrics.GetSecondSolidCorner(direction) ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction)) { e.v3.y = cell.StreamBedY; } TriangulateEdgeFan(center, e, cell.Color); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction &lt;= HexDirection.SE) { TriangulateConnection(direction, cell, e); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d0d/a57/028/d0da570288985442d990858b2831c07a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ููุฉ ููุชุตู ุงูุถูุน. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฃู ูุฑู ููู ุชุธูุฑ ุงูุนูุงูุงุช ุงูุฃููู ููููุฑ ุ ูููู ุชุธูุฑ ุซููุจ ูู ุงูุฑุงุญุฉ. </font><font style="vertical-align: inherit;">ูุฅุบูุงููุง ุ ูุญุชุงุฌ ุฅูู ุชุบููุฑ ุญุงูุฉ ุฃุฎุฑู ุซู ุชุซููุซ ุงูุงุชุตุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateConnection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, EdgeVertices e1 </span></span></span><span class="hljs-function">)</span></span> { HexCell neighbor = cell.GetNeighbor(direction); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Vector3 bridge = HexMetrics.GetBridge(direction); bridge.y = neighbor.Position.y - cell.Position.y; EdgeVertices e2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( e1.v1 + bridge, e1.v5 + bridge ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction)) { e2.v3.y = neighbor.StreamBedY; } โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b4c/aa9/5f4/b4caa95f424004569e7876bc19c73a20.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุช ุงูููุชููุฉ ููููุงุตู ุงูุถูุนูุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุงุฑู ุงูุฃููุงุฑ ุชูุฑ ุนุจุฑ ุฒูุฒุงูุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุฏููุง ูุฌุงุฑู ุงูุฃููุงุฑ ุงูุตุญูุญุฉ ุจูู ุงูุฎูุงูุง. ูููู ุนูุฏูุง ูุชุฏูู ุงูููุฑ ุนุจุฑ ุงูุฎููุฉ ุ ุชูุชูู ุงููููุงุช ุฏุงุฆููุง ูู ูุฑูุฒูุง. ูุญู ูุฐู ุงููุดููุฉ ูุฌุจ ุฃู ุชุนูู. ููุจุฏุฃ ุจุงูุญุงูุฉ ุนูุฏูุง ูุชุฏูู ููุฑ ุนุจุฑ ุฎููุฉ ูุจุงุดุฑุฉ ุ ูู ุญุงูุฉ ุฅูู ุงูุนูุณ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ููุงู ููุฑ ุ ููููู ุฃู ูููู ูู ุฌุฒุก ูู ุงูุฎููุฉ ูุฑูุญุฉ ุจุณูุทุฉ ูููุซูุซุงุช. ูููู ุนูุฏูุง ูุชุฏูู ุงูููุฑ ูุจุงุดุฑุฉ ุ ูู ุงูุถุฑูุฑู ุฅุฏุฎุงู ููุงุฉ. ูู ุงููุงูุน ุ ูุญุชุงุฌ ุฅูู ุชูุฏูุฏ ุงูุฑุฃุณ ุงููุฑูุฒู ุฅูู ุฎุท ุ ูุจุงูุชุงูู ุชุญููู ุงููุซูุซูู ุงูุฃูุณุทูู ุฅูู ุฃุฑุจุนุฉ ุฒูุงูุง. ุซู ุชุชุญูู ูุฑูุญุฉ ุงููุซูุซุงุช ุฅูู ุดุจู ููุญุฑู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9a9/919/ffb/9a9919ffbb99bcded8d44f45e62c3955.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุฅุฏุฎุงู ุงูููุงุฉ ูู ุงููุซูุซ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชููู ูุฐู ุงููููุงุช ุฃุทูู ุจูุซูุฑ ูู ุชูู ุงูุชู ุชูุฑ ุนุจุฑ ุงุชุตุงู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุตุจุญ ูุฐุง ูุงุถุญูุง ุนูุฏูุง ูุชู ุชุดููู ููุงุถุน ุงูููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ููุณู ุดุจู ุงูููุญุฑู ุฅูู ูุณููู ุนู ุทุฑูู ุฅุฏุฑุงุฌ ูุฌููุนุฉ ุฃุฎุฑู ูู ุญูุงู ุงูููุฉ ูู ุงููุณุท ุจูู ุงููุฑูุฒ ูุงูุญุงูุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/650/f94/109/650f9410923cb781f145b5211dbe4950.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุซููุซ ุงูููุงุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุง ุฃู ุงูุชุซููุซ ูุน ุงูููุฑ ุณูููู ูุฎุชูููุง ุชูุงููุง ุนู ุงูุชุซููุซ ุจุฏูู ููุฑ ุ ููููู ุจุฅูุดุงุก ุทุฑููุฉ ูููุตูุฉ ูุฐูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง ููุฑ ุ ูุฅููุง ูุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ุ ูุฅูุง ุณูุชุฑู ูุฑูุญุฉ ูู ุงููุซูุซุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector3 center = cell.Position; EdgeVertices e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( center + HexMetrics.GetFirstSolidCorner(direction), center + HexMetrics.GetSecondSolidCorner(direction) ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction)) { e.v3.y = cell.StreamBedY; TriangulateWithRiver(direction, cell, center, e); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateEdgeFan(center, e, cell.Color); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction &lt;= HexDirection.SE) { TriangulateConnection(direction, cell, e); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/928/f0f/526/928f0f526852960fce6c37bdb480b5bc.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซููุจ ูุฌุจ ุฃู ูููู ูููุง ุฃููุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุคูุฉ ูุง ูุญุฏุซ ุจุดูู ุฃูุถู ุ ูู ุจุชุนุทูู ุชุดููู ุงูุฎููุฉ ูุคูุชูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cellPerturbStrength = <span class="hljs-number"><span class="hljs-number">0f</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 4f;</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2aa/f49/ae3/2aaf49ae366805585727f1a1ed11c2aa.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุบูุฑ ูุดููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุซููุซ ูุจุงุดุฑุฉ ูู ุฎูุงู ุงูุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก ููุงุฉ ูุจุงุดุฑุฉ ูู ุฎูุงู ุฌุฒุก ูู ุงูุฎููุฉ ุ ูุญุชุงุฌ ุฅูู ุชูุฏูุฏ ุงููุฑูุฒ ุฅูู ุฎุท. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู ููุฐุง ุงูุฎุท ููุณ ุนุฑุถ ุงูููุงุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุฌุงุฏ ุงูุฑุฃุณ ุงูุฃูุณุฑ ุจููู ยผ ุงููุณุงูุฉ ูู ุงููุฑูุฒ ุฅูู ุงูุฒุงููุฉ ุงูุฃููู ูู ุงูุฌุฒุก ุงูุณุงุจู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { Vector3 centerL = center + HexMetrics.GetFirstSolidCorner(direction.Previous()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงููุซู ุจุงููุณุจุฉ ููุฑุฃุณ ุงูุฃููู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุงูุฒุงููุฉ ุงูุซุงููุฉ ูู ุงูุฌุฒุก ุงูุชุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 centerL = center + HexMetrics.GetFirstSolidCorner(direction.Previous()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; Vector3 centerR = center + HexMetrics.GetSecondSolidCorner(direction.Next()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุงูุนุซูุฑ ุนูู ุงูุฎุท ุงูุฃูุณุท ูู ุฎูุงู ุฅูุดุงุก ุญูุงู ููุฉ ุจูู ุงููุณุท ูุงูุญุงูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> EdgeVertices m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( Vector3.Lerp(centerL, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), Vector3.Lerp(centerR, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุฐูู ุ ูู ุจุชุบููุฑ ุงูุฑุฃุณ ุงูุฃูุณุท ููุถูุน ุงูุฃูุณุท ุ ููุฐูู ุงููุฑูุฒ ุ ูุฃููุง ุณุชุตุจุญ ุงูููุงุท ุงูุณูููุฉ ููููุงุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> m.v3.y = center.y = e.v3.y;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุณุชุฎุฏุงู </font></font><code>TriangulateEdgeStrip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุก ุงููุฑุงุบ ุจูู ุงูุฎุท ุงูุฃูุณุท ูุฎุท ุงูุญุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> TriangulateEdgeStrip(m, cell.Color, e, cell.Color);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3ab/050/b30/3ab050b301f8815479142c5b8feae26e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุช ุงููุถุบูุทุฉ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณูุก ุงูุญุธ ุ ุชุจุฏู ุงููููุงุช ูุถุบูุทุฉ. ูุญุฏุซ ูุฐุง ูุฃู ุงูููู ุงููุณุทู ูู ุงูุถูุน ูุฑูุจุฉ ุฌุฏูุง ูู ุจุนุถูุง ุงูุจุนุถ. ููุงุฐุง ุญุฏุซ ูุฐุงุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุงูุชุฑุถูุง ุฃู ุทูู ุงูุญุงูุฉ ุงูุฎุงุฑุฌูุฉ ูู 1 ุ ูุณูููู ุทูู ุงูุฎุท ุงููุฑูุฒู ยฝ. ุจูุง ุฃู ุงูุญุงูุฉ ุงููุณุทู ูู ุงูููุชุตู ุจููููุง ุ ูุฌุจ ุฃู ูููู ุทูููุง ูุณุงูู ยพ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูููุงุฉ ยฝ ููุฌุจ ุฃู ูุธู ุซุงุจุชูุง. ุจูุง ุฃู ุทูู ุงูุญุงูุฉ ุงููุณุทู ูู ยพ ุ ูุจูู ููุท only ุ ููููุง ูู &amp; frac18 ุ ุนูู ุฌุงูุจู ุงูููุงุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2e1/25f/037/2e125f03727f078ccfd094a29ad4d596.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุทูุงู ุงููุณุจูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุง ุฃู ุทูู ุงูุญุงูุฉ ุงููุณุทู ูู ยพ ุ ูุฅู &amp; frac18 ุ </font><font style="vertical-align: inherit;">ูุตุจุญ ูุณุจุฉ ุฅูู ุทูู ุงูุถูุน ุงูุฃูุณุท ูุณุงูู &amp; frac16 ุ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ูุฌุจ ุฃู ุชููู ุฐุฑูุชู ุงูุซุงููุฉ ูุงูุฑุงุจุนุฉ ูุญููุฉ ุจุงูุณุฏุงุณ ูููุณ ุงูุฃุฑุจุงุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุชูุฏูู ุงูุฏุนู ููุซู ูุฐุง ุงูุงุณุชููุงุก ุงูุจุฏูู ุนู ุทุฑูู ุงูุฅุถุงูุฉ ุฅูู </font></font><code>EdgeVertices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุดุฆ ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุจุฏูุง ูู ุงูุงุณุชููุงุก ุงูุซุงุจุชุฉ </font></font><code>v2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>v4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ูุณุชุฎุฏู ูุฐุง ุงูุฎูุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EdgeVertices</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 corner1, Vector3 corner2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> outerStep</span></span></span><span class="hljs-function">)</span></span> { v1 = corner1; v2 = Vector3.Lerp(corner1, corner2, outerStep); v3 = Vector3.Lerp(corner1, corner2, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); v4 = Vector3.Lerp(corner1, corner2, <span class="hljs-number"><span class="hljs-number">1f</span></span> - outerStep); v5 = corner2; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุณุชุฎุฏุงูู ูุน &amp; frac16 ุ </font><font style="vertical-align: inherit;">ุฌ </font></font><code>HexMesh.TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> EdgeVertices m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( Vector3.Lerp(centerL, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), Vector3.Lerp(centerR, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), <span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">6f</span></span> );</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c4a/df8/cb5/c4adf8cb5aa6b1685f6d5c592976ea3b.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุช ุงููุจุงุดุฑุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฃู ุฌุนููุง ุงูููุงุฉ ูุณุชูููุฉ ุ ูููููุง ุงูุฐูุงุจ ุฅูู ุงูุฌุฒุก ุงูุซุงูู ูู ุดุจู ุงูููุญุฑู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ูููููุง ุงุณุชุฎุฏุงู ุดุฑูุท ุงูุถูุน ุ ูุฐูู ูุฌุจ ุนูููุง ุงูููุงู ุจุฐูู ูุฏูููุง. </font><font style="vertical-align: inherit;">ูููู ุฃููุงู ุจุฅูุดุงุก ูุซูุซุงุช ุนูู ุงูุฌุงูุจูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> AddTriangle(centerL, m.v1, m.v2); AddTriangleColor(cell.Color); AddTriangle(centerR, m.v4, m.v5); AddTriangleColor(cell.Color);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/10b/dc7/a5b/10bdc7a5b1d32d03dbc155a2d00bbfb5.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซูุซุงุช ุฌุงูุจูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏู ุงูุฃูุฑ ุฌูุฏูุง ุ ูุฐุง ุฏุนูุง ูููุฃ ุงููุณุงุญุฉ ุงููุชุจููุฉ ุจุฃุฑุจุนุฉ ุฒูุงูุง ุ ูุฅูุดุงุก ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุงูููุงุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> AddTriangle(centerL, m.v1, m.v2); AddTriangleColor(cell.Color); AddQuad(centerL, center, m.v2, m.v3); AddQuadColor(cell.Color); AddQuad(center, centerR, m.v3, m.v4); AddQuadColor(cell.Color); AddTriangle(centerR, m.v4, m.v5); AddTriangleColor(cell.Color);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ููุณ ูุฏููุง ุจุฏูู </font></font><code>AddQuadColor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุทูุจ ูุนููุฉ ูุงุญุฏุฉ ููุท. </font><font style="vertical-align: inherit;">ุจูููุง ูู ููู ุจุญุงุฌุฉ ุฅูููุง. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนููุง ููุดุฆูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddQuadColor</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Color color</span></span></span><span class="hljs-function">)</span></span> { colors.Add(color); colors.Add(color); colors.Add(color); colors.Add(color); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/af0/b62/c32/af0b62c3232b36cd0a136b1fc009b7dd.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุช ุงููุณุชูููุฉ ุงูููุชููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฏุงูุฉ ูููุงูุฉ ุงูุชุซููุซ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุชูู ุงูุชุซููุซ ููุฌุฒุก ุงูุฐู ูู ุจุฏุงูุฉ ุฃู ููุงูุฉ ููุฑ ููุท ุ ูุจุงูุชุงูู ูุชุทูุจ ุฃุณููุจู ุงูุฎุงุต. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูู ูุชุญูู ูู ุฐูู </font></font><code>Triangulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุชุฏุนู ุงูุทุฑููุฉ ุงูููุงุณุจุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction)) { e.v3.y = cell.StreamBedY; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverBeginOrEnd) { TriangulateWithRiverBeginOrEnd(direction, cell, center, e); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateWithRiver(direction, cell, center, e); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุฑูุฏ ุงุณุชููุงู ุงูููุงุฉ ูู ุงููุฑูุฒ ุ ููููุง ูุง ุฒููุง ูุณุชุฎุฏู ูุฑุญูุชูู ููุฐุง. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูููู ูุฑุฉ ุฃุฎุฑู ุจุฅูุดุงุก ุงูุญุงูุฉ ุงููุณุทู ุจูู ุงููุฑูุฒ ุฃู ุงูุญุงูุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุฑูุฏ ุฅููุงู ุงูููุงุฉ ุ ูุณุนุฏูุง ุชูุงููุง ุฃูู ุณูุชู ุถุบุทูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiverBeginOrEnd</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { EdgeVertices m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) ); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุง ุชุตุจุญ ุงูููุงุฉ ุถุญูุฉ ุจุณุฑุนุฉ ูุจูุฑุฉ ุ ุณูููู ุจุชุนููู ุงุฑุชูุงุน ูุงุน ุงูููุฑ ุฅูู ุงูููุฉ ุงููุณุทู. </font><font style="vertical-align: inherit;">ููู ุงููุฑูุฒ ูุง ูุญุชุงุฌ ุฅูู ุชุบููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> m.v3.y = e.v3.y;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุงูุชุซููุซ ุจุดุฑูุท ุถูุน ููุฑูุญุฉ ูุงุญุฏุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> TriangulateEdgeStrip(m, cell.Color, e, cell.Color); TriangulateEdgeFan(center, m, cell.Color);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/16b/0c5/9e0/16b0c59e0999f2a505e709648c1e1af7.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุท ุงูุจุฏุงูุฉ ูุงูููุงูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุญูู ุฎุทูุฉ ูุงุญุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุถุน ูู ุงุนุชุจุงุฑู ุงูููุนุทูุงุช ุงูุญุงุฏุฉ ุงูุชู ุชุชุนุฑุฌ ุจูู ุงูุฎูุงูุง ุงููุฌุงูุฑุฉ. </font><font style="vertical-align: inherit;">ุณูุชุนุงูู ูุนูู ุฃูุถุง </font></font><code>TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ููุน ุงูููุฑ ุงูุฐู ูุนูู ูุนู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/523/c03/e37/523c03e370096f804df6b84a97dbdfbf.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑ ูุชุนุฑุฌ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุฎููุฉ ููุฑ ูุชุฏูู ูู ุงูุงุชุฌุงู ุงููุนุงูุณ ุ ููุฐูู ูู ุงูุงุชุฌุงู ุงูุฐู ูุนูู ููู ุ ููุฌุจ ุฃู ูููู ูุฐุง ููุฑูุง ูุณุชููููุง. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูููููุง ุญูุธ ุฎุท ุงููุณุท ุงูุฐู ูููุง ุจุญุณุงุจู ุจุงููุนู. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูุฅูู ูุนูุฏ ุฅูู ููุทุฉ ูุงุญุฏุฉ ุ ูุน ุทู ุฎุท ุงููุณุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 centerL, centerR; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Opposite())) { centerL = center + HexMetrics.GetFirstSolidCorner(direction.Previous()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; centerR = center + HexMetrics.GetSecondSolidCorner(direction.Next()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { centerL = centerR = center; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/90c/992/4c0/90c9924c049cf8033e7480c90b74b903.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนุฑุฌ ูุชุนุฑุฌ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุชุนุฑู ุนูู ุงูููุนุทูุงุช ุงูุญุงุฏุฉ ูู ุฎูุงู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุชุญุชูู ุนูู ููุฑ ููุฑ ุนุจุฑ ุงูุฌุฒุก ุงูุชุงูู ุฃู ุงูุณุงุจู ูู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ูุญุงุฐุงุฉ ุฎุท ุงููุณุท ูุน ุงูุญุงูุฉ ุจูู ูุฐุง ูุงูุฌุฒุก ุงููุฌุงูุฑ. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ูุถุน ุงูุฌุงูุจ ุงูููุงุจู ูู ุงูุฎุท ูู ุงูููุชุตู ุจูู ุงููุฑูุฒ ูุงูุฒุงููุฉ ุงููุดุชุฑูุฉ. </font><font style="vertical-align: inherit;">ุซู ูุตุจุญ ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุฎุท ูู ุงููุฑูุฒ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Opposite())) { centerL = center + HexMetrics.GetFirstSolidCorner(direction.Previous()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; centerR = center + HexMetrics.GetSecondSolidCorner(direction.Next()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next())) { centerL = center; centerR = Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Previous())) { centerL = Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); centerR = center; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { centerL = centerR = center; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุชุญุฏูุฏ ููุงู ุงูููุทุชูู ุงููููู ูุงููุณุฑู ุ ูููููุง ุชุญุฏูุฏ ุงููุฑูุฒ ุงููุงุชุฌ ุนู ุทุฑูู ุญุณุงุจ ูุชูุณุทูุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Opposite())) { โฆ } center = Vector3.Lerp(centerL, centerR, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f14/cc6/4f9/f14cc64f953da69fb270ff2adf613b2e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููุถ ุงูุถูุน ุงููุฑูุฒู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุงูููุงุฉ ููุง ููุณ ุงูุนุฑุถ ุนูู ููุง ุงูุฌุงูุจูู ุ ุฅูุง ุฃููุง ุชุจุฏู ูุถุบูุทุฉ ุชูุงููุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุงุชุฌ ุนู ุชุญููู ุฎุท ุงููุณุท 60 ุฏุฑุฌุฉ. </font><font style="vertical-align: inherit;">ููููู ุชูุนูู ูุฐุง ุงูุชุฃุซูุฑ ุนู ุทุฑูู ุฒูุงุฏุฉ ุนุฑุถ ุงูุฎุท ุงููุฑูุฒู ููููุงู. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุงูุงุณุชููุงุก ยฝ ุ ูุณุชุฎุฏู &amp; frac23 ุ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next())) { centerL = center; centerR = Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">2f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Previous())) { centerL = Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">2f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); centerR = center; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/28c/c01/ea3/28cc01ea3d203243a1dfe49cde5e9802.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนุฑุฌ ุจุฏูู ุถุบุท.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุญูู ูุฑุญูุชูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุงูุงุช ุงููุชุจููุฉ ุจูู ุงูุชุนุฑุฌุงุช ูุงูุฃููุงุฑ ุงููุณุชูููุฉ. </font><font style="vertical-align: inherit;">ูุฐู ูู ุงูููุนุทูุงุช ุนูู ูุฑุญูุชูู ุงูุชู ุชุฎูู ุฃููุงุฑูุง ููุญููุฉ ุจูุทู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/67d/bab/9b2/67dbab9b235833d69b3201c9b38ac653.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฑ ุงููุชุนุฑุฌ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูููุฒ ุจูู ุงุชุฌุงููู ูุญุชูููู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู </font></font><code>direction.Next().Next()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุฏุนููุง ุฌุนูู ุฃูุซุฑ ููุงุกูุฉ ุจุฅุถุงูุฉ </font></font><code>HexDirection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ุงูุฅุฑุดุงุฏ </font></font><code>Next2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>Previous2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> HexDirection </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Previous2</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { direction -= <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> direction &gt;= HexDirection.NE ? direction : (direction + <span class="hljs-number"><span class="hljs-number">6</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> HexDirection </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Next2</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { direction += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> direction &lt;= HexDirection.NW ? direction : (direction - <span class="hljs-number"><span class="hljs-number">6</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุฏุฉ ุงูู </font></font><code>HexMesh.TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุชุนุฑู ุนูู ุงุชุฌุงู ููุฑูุง ุงููุชุนุฑุฌ </font></font><code>direction.Next2()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Opposite())) { centerL = center + HexMetrics.GetFirstSolidCorner(direction.Previous()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; centerR = center + HexMetrics.GetSecondSolidCorner(direction.Next()) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next())) { centerL = center; centerR = Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">2f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Previous())) { centerL = Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">2f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); centerR = center; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next2())) { centerL = centerR = center; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { centerL = centerR = center; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุงุชูู ุงูุญุงูุชูู ุงูุฃุฎูุฑุชูู ุ ูุญุชุงุฌ ุฅูู ุชุญููู ุฎุท ุงูููุชุตู ุฅูู ุฌุฒุก ุงูุฎููุฉ ุงูููุฌูุฏ ุฏุงุฎู ุงูููุญูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง ูุชุฌู ุฅูู ููุชุตู ุญุงูุฉ ุตูุจุฉ ุ ููููููุง ุงุณุชุฎุฏุงูู ูุชุญุฏูุฏ ููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุชุฎูู ุฃู ูุฏููุง ุทุฑููุฉ ูุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next2())) { centerL = center; centerR = center + HexMetrics.GetSolidEdgeMiddle(direction.Next()) * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { centerL = center + HexMetrics.GetSolidEdgeMiddle(direction.Previous()) * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; centerR = center; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ูุญุชุงุฌ ุงูุขู ุฅูู ุฅุถุงูุฉ ูุซู ูุฐู ุงูุทุฑููุฉ </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฏูู ููุท ูุชูุณุท โโูุชุฌููู ูู ุงูุฒูุงูุง ุงููุฌุงูุฑุฉ ูุชุทุจูู ูุนุงูู ุงููุฒุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSolidEdgeMiddle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (corners[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction] + corners[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction + <span class="hljs-number"><span class="hljs-number">1</span></span>]) * (<span class="hljs-number"><span class="hljs-number">0.5f</span></span> * solidFactor); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/be1/058/429/be1058429e3d36cd25b8e1da0c1be77a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญููุงุช ูุถุบูุทุฉ ููููุงู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุฏููุฑ ุฎุทูุท ุงููุฑูุฒ ุงูุขู ุจุดูู ุตุญูุญ 30 ุฏุฑุฌุฉ. </font><font style="vertical-align: inherit;">ููููุง ููุณุช ุทูููุฉ ุจูุง ููู ุงูููุงูุฉ ุ ูููุฐุง ุงูุณุจุจ ูุชู ุถุบุท ุงููููุงุช ููููุงู. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุฃู ููุทุฉ ููุชุตู ุงูุถูุน ุฃูุฑุจ ุฅูู ุงููุฑูุฒ ูู ุฒุงููุฉ ุงูุถูุน. </font><font style="vertical-align: inherit;">ูุณุงูุชู ุชุณุงูู ูุตู ุงููุทุฑ ุงูุฏุงุฎูู ุ ูููุณ ุงููุณุงูุฉ ุงูุฎุงุฑุฌูุฉ. </font><font style="vertical-align: inherit;">ุฃู ุฃููุง ูุนูู ุนูู ูุทุงู ุฎุงุทุฆ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุงููุนู ุจุงูุชุญููู ูู ูุตู ูุทุฑ ุฎุงุฑุฌู ุฅูู ุฏุงุฎูู ูู </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ุงูุนูููุฉ ุงูุนูุณูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุฏุนููุง ูุฌุนู ูู ูู ุนูุงูู ุงูุชุญููู ูุชุงุญุฉ ูู ุฎูุงู </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> outerToInner = <span class="hljs-number"><span class="hljs-number">0.866025404f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> innerToOuter = <span class="hljs-number"><span class="hljs-number">1f</span></span> / outerToInner; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> outerRadius = <span class="hljs-number"><span class="hljs-number">10f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> innerRadius = outerRadius * outerToInner;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฃู ููุชูู ุฅูู ุงููููุงุณ ุงูุตุญูุญ </font></font><code>HexMesh.TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณุชุจูู ุงููููุงุช ูุถุบูุทุฉ ููููุงู ุจุณุจุจ ุฏูุฑูุง ุ ูููู ูุฐุง ุฃูู ูุถูุญูุง ุจูุซูุฑ ูู ุญุงูุฉ ุงูุชุนุฑุฌุงุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุณูุง ุจุญุงุฌุฉ ููุชุนููุถ ุนู ุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next2())) { centerL = center; centerR = center + HexMetrics.GetSolidEdgeMiddle(direction.Next()) * (<span class="hljs-number"><span class="hljs-number">0.5f</span></span> * HexMetrics.innerToOuter); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { centerL = center + HexMetrics.GetSolidEdgeMiddle(direction.Previous()) * (<span class="hljs-number"><span class="hljs-number">0.5f</span></span> * HexMetrics.innerToOuter); centerR = center; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2a2/849/49c/2a284949c066c558391613611b93d093.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญููุงุช ูุงุนูุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุซููุซ ุจุงููุฑุจ ูู ุงูุฃููุงุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงุฑูุง ุฌุงูุฒุฉ. </font><font style="vertical-align: inherit;">ููููุง ูู ููู ุจุนุฏ ุจุชุซููุซ ุฃุฌุฒุงุก ุฃุฎุฑู ูู ุงูุฎูุงูุง ุงูุชู ุชุญุชูู ุนูู ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุงูุขู ุณูุบูู ูุฐู ุงูุซููุจ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f47/5fd/74d/f475fd74d147a577e8adb72cd1ff63fb.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซููุจ ุจุงููุฑุจ ูู ุงููููุงุช. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุชุญุชูู ุนูู ููุฑ ุ ููููุง ูุง ุชุชุฏูู ูู ุงูุงุชุฌุงู ุงูุญุงูู ุ </font></font><code>Triangulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุณุชุฏุนู ุทุฑููุฉ ุฌุฏูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction)) { e.v3.y = cell.StreamBedY; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverBeginOrEnd) { TriangulateWithRiverBeginOrEnd(direction, cell, center, e); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateWithRiver(direction, cell, center, e); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateAdjacentToRiver(direction, cell, center, e); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateEdgeFan(center, e, cell.Color); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูุทุฑููุฉ ุ ูููุฃ ูุซูุซ ุงูุฎููุฉ ุจุดุฑูุท ููุฑูุญุฉ. </font><font style="vertical-align: inherit;">ูุฌุฑุฏ ูุฑูุญุฉ ูู ุชููู ูุงููุฉ ุจุงููุณุจุฉ ููุง ุ ูุฃู ุงูููู ูุฌุจ ุฃู ุชุชูุงูู ูุน ุงูุญุงูุฉ ุงููุณุทู ููุฃุฌุฒุงุก ุงูุชู ุชุญุชูู ุนูู ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateAdjacentToRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { EdgeVertices m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) ); TriangulateEdgeStrip(m, cell.Color, e, cell.Color); TriangulateEdgeFan(center, m, cell.Color); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/059/4df/7bb/0594df7bb3225d20852c9e0d0d708101.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุงูุจ ูู ุงูููุญููุงุช ูุงูุฃููุงุฑ ุงููุณุชูููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุทุงุจู ุงูููุงุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ูุญู ุจุญุงุฌุฉ ูุฌุนู ุงููุฑูุฒ ุงูุฐู ูุณุชุฎุฏูู ูุทุงุจู ุงูุฌุฒุก ุงููุฑูุฒู ุงูุฐู ุชุณุชุฎุฏูู ุฃุฌุฒุงุก ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุน ุงูุชุนุฑุฌุงุช ุ ูู ุดูุก ูู ูุญูู ุ ูุชุชุทูุจ ุงูููุญููุงุช ูุงูุฃููุงุฑ ุงููุณุชูููุฉ ุงูุงูุชุจุงู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ููุน ุงูููุฑ ูุงุชุฌุงูู ุงููุณุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุงูุชุญูู ููุง ุฅุฐุง ููุง ุฏุงุฎู ุงูููุญูู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชูู ููุง ุงูุงุชุฌุงููู ุงูุณุงุจู ูุงูุชุงูู ุนูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุชุญุฑูู ุงููุฑูุฒ ุฅูู ุงูุญุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next())) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Previous())) { center += HexMetrics.GetSolidEdgeMiddle(direction) * (HexMetrics.innerToOuter * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); } } EdgeVertices m = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EdgeVertices( Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) );</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/016/620/d89/016620d89847368d487d49bb1c81cdc7.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุฅุตูุงุญ ุญุงูุฉ ุชุฏูู ุงูููุฑ ูู ููุง ุงูุฌุงูุจูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง ููุฑ ูู ุงุชุฌุงู ูุฎุชูู ุ ูููู ููุณ ูู ุงูุงุชุฌุงู ุงูุณุงุจู ุ ูุฅููุง ูุชุญูู ููุฑู ูุง ุฅุฐุง ูุงู ูุณุชูููุงู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุงูุชูู ุงููุฑูุฒ ุฅูู ุงูุฒุงููุฉ ุงูุฃููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next())) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Previous())) { center += HexMetrics.GetSolidEdgeMiddle(direction) * (HexMetrics.innerToOuter * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( cell.HasRiverThroughEdge(direction.Previous2()) ) { center += HexMetrics.GetFirstSolidCorner(direction) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a1d/85a/366/a1d85a3669a55984eb69a43af5e8631f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู ุชุฑุงูุจ ุซุงุจุช ุจููุฑ ูุณุชููู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ูููุง ุจุญู ุงููุดููุฉ ูุน ูุตู ุงูุฃุฌุฒุงุก ุงููุฌุงูุฑุฉ ููุฃููุงุฑ ุงููุณุชูููุฉ. </font><font style="vertical-align: inherit;">ุงูุญุงูุฉ ุงูุฃุฎูุฑุฉ - ูุฏููุง ููุฑ ูู ุงูุงุชุฌุงู ุงูุณุงุจู ุ ููู ูุณุชููู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุชุญุชุงุฌ ุฅูู ุชุญุฑูู ุงููุฑูุฒ ุฅูู ุงูุฒุงููุฉ ุงูุชุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next())) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Previous())) { center += HexMetrics.GetSolidEdgeMiddle(direction) * (HexMetrics.innerToOuter * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( cell.HasRiverThroughEdge(direction.Previous2()) ) { center += HexMetrics.GetFirstSolidCorner(direction) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( cell.HasRiverThroughEdge(direction.Previous()) &amp;&amp; cell.HasRiverThroughEdge(direction.Next2()) ) { center += HexMetrics.GetSecondSolidCorner(direction) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c9d/d1a/20c/c9dd1a20c213658aeed27b9065e6bf58.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุฒูุฏ ูู ุงูุชุฑุงูุจุงุช. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนููู HexMesh </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุฃููููุง ุชุซููุซ ุงููููุงุช. </font><font style="vertical-align: inherit;">ุงูุขู ูููููุง ููุฆูุง ุจุงููุงุก. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงููุงุก ูุฎุชูู ุนู ุงูุฃุฑุถ ุ ูุณูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุดุจูุฉ ูุฎุชููุฉ ูุน ุจูุงูุงุช ููุฉ ูุฎุชููุฉ ูููุงุฏ ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุงุฆู ููุบุงูุฉ ุฃู ูุณุชุฎุฏู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูุดู ูุงููุงุก. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนูุง ูุนูู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุญููููุง ุฅูู ูุฆุฉ ุชุชุนุงูู ูุน ูุฐู ุงูุดุจูุงุช ุ ุจุบุถ ุงููุธุฑ ุนู ุงูุบุฑุถ ูููุง. </font><font style="vertical-align: inherit;">ุณูููู ูููุฉ ุชุซููุซ ุฎูุงูุงู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฑูู ุทุฑููุฉ ุจูุฑุชูุฑุจ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุทุฑููุฉ </font></font><code>Perturb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนููุฉ ุชูุงููุง ูุณูุชู ุงุณุชุฎุฏุงููุง ูู ุฃูุงูู ูุฎุชููุฉ ุ ููููุชูู ุฅูููุง </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุฃุนุฏ ุชุณููุชู ุฅูู </font></font><code>HexMetrics.Perturb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ุงุณู ุฃุณููุจ ุบูุฑ ุตุญูุญ ุ ูููู ูุนูุฏ ุตูุงุบุฉ ูู ุงูููุฏ ูุงุณุชุฎุฏุงูู ุงูุตุญูุญ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุญุฑุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุต ุจู ูุญุชูู ุนูู ูุธุงุฆู ุฎุงุตุฉ ูุทุฑู ุงูููู ุ ูุงุณุชุฎุฏููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุญุฑูู ุงูุทุฑููุฉ ููุฏุงุฎู </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ุงุฌุนููุง </font><font style="vertical-align: inherit;">ุนุงูุฉ ูุซุงุจุชุฉ ุ ุซู ูู ุจุชุตุญูุญ ุงุณููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perturb</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { Vector4 sample = SampleNoise(position); position.x += (sample.x * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * cellPerturbStrength; position.z += (sample.z * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * cellPerturbStrength; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฑูู ุทุฑู ุงูุชุซููุซ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุจุฏุงู ุงููุชุบูุฑ ุจูุชุบูุฑ </font></font><code>hexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุชุฑู </font></font><code>terrain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexMesh terrain; <span class="hljs-comment"><span class="hljs-comment">// HexMesh hexMesh; void Awake () { gridCanvas = GetComponentInChildren&lt;Canvas&gt;(); // hexMesh = GetComponentInChildren&lt;HexMesh&gt;(); cells = new HexCell[HexMetrics.chunkSizeX * HexMetrics.chunkSizeZ]; ShowUI(false); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูููู ุจุฅุนุงุฏุฉ ุจูุงุก ุฌููุน ุงูุทุฑู </font></font><code>Addโฆ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font><code>terrain.Addโฆ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุซู ุงููู ูู ุงูุทุฑู </font></font><code>Triangulateโฆ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููููู ุซู ุชุตุญูุญ ุฃุณูุงุก ุงูุทุฑู </font></font><code>Addโฆ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุนููุง ูุดุชุฑูุฉ. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณูุชู ุงูุนุซูุฑ ุนูู ุฌููุน ุทุฑู ุงูุชุซููุซ ุงููุนูุฏุฉ ุ ูุณุชุจูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุงูุจุณูุทุฉ ูุฅุถุงูุฉ ุงูุจูุงูุงุช ุฅูู ุงูุดุจูุฉ </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุชูู ุจุนุฏ. </font><font style="vertical-align: inherit;">ุงูุขู </font></font><code>HexGridChunk.LateUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุทูู ุทุฑููุชู ุงูุฎุงุตุฉ </font></font><code>Triangulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ููุจุบู ุฃู ููุฑุฑ ุงูุฎูุงูุง ูุญุฌุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ </font></font><code>Triangulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ุชููุฏ ุงููุนููุฉ ุงูุฎุงุตุฉ ุจู. </font><font style="vertical-align: inherit;">ููุฌุจ ุนููู ุชูููุถ ุชูุธูู ูุชุทุจูู ุจูุงูุงุช ุงูุดุจูุฉ </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LateUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Triangulate(); <span class="hljs-comment"><span class="hljs-comment">// hexMesh.Triangulate(cells); enabled = false; } public void Triangulate () { terrain.Clear(); // hexMesh.Clear(); // vertices.Clear(); // colors.Clear(); // triangles.Clear(); for (int i = 0; i &lt; cells.Length; i++) { Triangulate(cells[i]); } terrain.Apply(); // hexMesh.vertices = vertices.ToArray(); // hexMesh.colors = colors.ToArray(); // hexMesh.triangles = triangles.ToArray(); // hexMesh.RecalculateNormals(); // meshCollider.sharedMesh = hexMesh; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุถุงูุฉ ุงูุฃุณุงููุจ ุงููุทููุจุฉ </font></font><code>Clear</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>Apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.Clear(); vertices.Clear(); colors.Clear(); triangles.Clear(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Apply</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.SetVertices(vertices); hexMesh.SetColors(colors); hexMesh.SetTriangles(triangles, <span class="hljs-number"><span class="hljs-number">0</span></span>); hexMesh.RecalculateNormals(); meshCollider.sharedMesh = hexMesh; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุนู SetVertices ู SetColors ู SetTrianglesุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">        <code>Mesh</code> .        .  ,           . <br><br>  <code>SetTriangles</code>    integer,    .      ,    . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูู ุจุชูุตูู ุชุงุจุน ุงูุดุจูุฉ ูุฏูููุง ุจุงูุฌุฒุก ุงูุฌุงูุฒ. </font><font style="vertical-align: inherit;">ูู ูุนุฏ ุจุฅููุงููุง ูุนู ุฐูู ุชููุงุฆููุง ุ ูุฃููุง ุณูุถูู ุทูููุง ุซุงูููุง ุฅูู ุงูุดุจูุฉ ูุฑูุจูุง. </font><font style="vertical-align: inherit;">ุฅุนุงุฏุฉ ุชุณููุชู ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terrain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฅุดุงุฑุฉ ุฅูู ุงูุบุฑุถ ููู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/614/3b4/0dc/6143b40dc88ecec6761348d9e6208944.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู ุงูุฅุบุงุซุฉ.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุงุฏุฉ ุชุณููุฉ ุทูู ุฌุงูุฒ ูุง ูุนููุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">          .    ,   .  ,     <em>Apply</em> ,       .        . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ุชุฌูุนุงุช ุงูููุงุฆู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูููุง ุจููู ุงููููู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ุฅูุง ุฃู ุฎุฑูุทุชูุง ูุฌุจ ุฃู ุชุนูู ููุง ูุงูุช ูู ูุจู. </font><font style="vertical-align: inherit;">ูู ุชุคุฏู ุฅุถุงูุฉ ุดุจูุฉ ุฃุฎุฑู ุฅูู ุงูุฌุฒุก ุฅูู ุชุบููุฑ ุฐูู. </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ูุนููุง ุฐูู ูุน ุงูุญุงุถุฑ </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุฏ ุชูุดุฃ ุฃุฎุทุงุก. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดููุฉ ูู ุฃููุง ุงูุชุฑุถูุง ุฃููุง ุณูุนูู ููุท ูุน ุดุจูุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ. </font><font style="vertical-align: inherit;">ุณูุญ ููุง ูุฐุง ุจุงุณุชุฎุฏุงู ุงูููุงุฆู ุงูุซุงุจุชุฉ ูุชุฎุฒูู ุจูุงูุงุช ุงูุดุจูุฉ ุงููุคูุชุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุนุฏ ุฅุถุงูุฉ ุงููุงุก ุ ุณูุนูู ูู ุงูููุช ููุณู ูุน ุดุจูุชูู ุ ูุฐูู ูู ูุนุฏ ุจุฅููุงููุง ุงุณุชุฎุฏุงู ุงูููุงุฆู ุงูุซุงุจุชุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูู ูุนูุฏ ุฅูู ูุฌููุนุงุช ุงูููุงุฆู ููู ูุซูู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูุณุชุฎุฏู ุชุฌูุน ูุงุฆูุฉ ุซุงุจุช. </font><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ ูุฐุง ุงูุชุฌูุน ุบูุฑ ููุฌูุฏ ุ ูุฐูู ุฏุนููุง ูุจุฏุฃ ุจุฅูุดุงุก ูุฆุฉ ุชุฌูุน ูุงุฆูุฉ ูุดุชุฑูุฉ ุจุฃููุณูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ListPool</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุนูู ListPool &lt;T&gt;ุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     ,  <code>List&lt;int&gt;</code>    .  <code>&lt;T&gt;</code>    <code>ListPool</code> ,  ,    .      ,    <code>T</code> (  template). </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฎุฒูู ูุฌููุนุฉ ูู ุงูููุงุฆู ูู ุงูุชุฌูุน ุ ูููููุง ุงุณุชุฎุฏุงู ุงูููุฏุณ. </font><font style="vertical-align: inherit;">ุนุงุฏุฉู ูุง ุฃุณุชุฎุฏู ุงูููุงุฆู ูุฃู Unity ูุง ุชููู ุจุชุณูุณููุง ุ ูููู ูู ูุฐู ุงูุญุงูุฉ ูุง ููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ListPool</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Stack&lt;List&lt;T&gt;&gt; stack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stack&lt;List&lt;T&gt;&gt;(); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ูุนูู ุงูููุฏุณ &lt;list &lt;t&gt;&gt;ุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     .  ,     .      . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ ุซุงุจุชุฉ ุดุงุฆุนุฉ ููุญุตูู ุนูู ุงููุงุฆูุฉ ูู ุงูุชุฌูุน. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูููุฏุณ ูุงุฑุบูุง ุ ูุณูููู ุจุงุณุชุฎุฑุงุฌ ุงููุงุฆูุฉ ุงูุนูููุฉ ูุฅุฑุฌุงุน ูุฐู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุณูู ูููู ุจุฅูุดุงุก ูุงุฆูุฉ ุฌุฏูุฏุฉ ูู ุงูููุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (stack.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> stack.Pop(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;T&gt;(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููุงุฆู ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุชูุง ุฅูู ุงูุชุฌูุน ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุนูู ูุนูู. </font></font><code>ListPool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ููุณุญ ุงููุงุฆูุฉ ููุฏูุนูุง ุฅูู ุงูููุฏุณ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;T&gt; list</span></span></span><span class="hljs-function">)</span></span> { list.Clear(); stack.Push(list); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุณุชุฎุฏุงู ุญูุงูุงุช ุงูุณุจุงุญุฉ </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงุณุชุจุฏู ุงูููุงุฆู ุงูุซุงุจุชุฉ ุจุฑูุงุจุท ุฎุงุตุฉ ุบูุฑ ุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ูููุถุน ุนูููุง ุนูุงูุฉ </font></font><code>NonSerialized</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุง ุชุญุงูุธ ุนูููุง ุงููุญุฏุฉ ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุชุฑุฌูุฉ. </font><font style="vertical-align: inherit;">ุฃู ุงูุชุจ </font></font><code>System.NonSerialized</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ุฃุถู </font></font><code>using System;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฏุงูุฉ ุงููุต.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">NonSerialized</span></span>] List&lt;Vector3&gt; vertices; [NonSerialized] List&lt;Color&gt; colors; [NonSerialized] List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; triangles; <span class="hljs-comment"><span class="hljs-comment">// static List&lt;Vector3&gt; vertices = new List&lt;Vector3&gt;(); // static List&lt;Color&gt; colors = new List&lt;Color&gt;(); // static List&lt;int&gt; triangles = new List&lt;int&gt;();</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธุฑูุง ูุฃู ุงูุดุจูุฉ ูุชู ุชูุธูููุง ูุจุงุดุฑุฉ ูุจู ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุฅูููุง ุ ููู ููุง ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ููุงุฆู ูู ุงูุชุฌูุนุงุช. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.Clear(); vertices = ListPool&lt;Vector3&gt;.Get(); colors = ListPool&lt;Color&gt;.Get(); triangles = ListPool&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Get(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุชุทุจูู ูุฐู ุงูุดุจูุงุช ุ ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูููุง ุ ูุฐุง ูููููุง ููุง ุฅุถุงูุชูุง ุฅูู ุงูุชุฌูุนุงุช. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Apply</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.SetVertices(vertices); ListPool&lt;Vector3&gt;.Add(vertices); hexMesh.SetColors(colors); ListPool&lt;Color&gt;.Add(colors); hexMesh.SetTriangles(triangles, <span class="hljs-number"><span class="hljs-number">0</span></span>); ListPool&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Add(triangles); hexMesh.RecalculateNormals(); meshCollider.sharedMesh = hexMesh; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐูู ูููุง ุจุชูููุฐ ุงุณุชุฎุฏุงูุงุช ูุชุนุฏุฏุฉ ููููุงุฆู ุ ุจุบุถ ุงููุธุฑ ุนู ุนุฏุฏ ุงูุดุจูุงุช ุงูุชู ูููุฃูุง ูู ููุณ ุงูููุช. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุตุงุฏู ุงุฎุชูุงุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุชุถุงุฑูุณูุง ุชุญุชุงุฌ ุฅูู ูุตุงุฏู ุ ุฅูุง ุฃููุง ููุณุช ุถุฑูุฑูุฉ ุญููุง ููุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุณูู ุชูุฑ ุงูุฃุดุนุฉ ุจุจุณุงุทุฉ ุนุจุฑ ุงููุงุก ูุชุชูุงุทุน ูุน ุงูููุงุฉ ุชุญุชูุง. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฌุนููุง ุญุชู ูุชููู ูู ุชูููู ูุฌูุฏ ูุตุงุฏู ู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญู ูุฏุฑู ุฐูู ุจุฅุถุงูุฉ ุญูู ูุดุชุฑู </font></font><code>bool useCollider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุชุถุงุฑูุณ ุ ูุดุบููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> useCollider;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4e7/f19/a3c/4e7f19a3c7eb01a1432618a8be6903e5.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุตุงุฏู ุดุจูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุงููุตุงุฏู ูุชุนูููู ููุท ุนูุฏ ุชุดุบููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GetComponent&lt;MeshFilter&gt;().mesh = hexMesh = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mesh(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useCollider) { meshCollider = gameObject.AddComponent&lt;MeshCollider&gt;(); } hexMesh.name = <span class="hljs-string"><span class="hljs-string">"Hex Mesh"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Apply</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useCollider) { meshCollider.sharedMesh = hexMesh; } โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃููุงู ุงุฎุชูุงุฑูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ุชููู ุฃููุงู Vertex ุงุฎุชูุงุฑูุฉ ุฃูุถูุง. </font><font style="vertical-align: inherit;">ูุญุชุงุฌูู ูุฅุธูุงุฑ ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฅุบุงุซุฉ ุ ููู ุงููุงุก ูุง ูุบูุฑ ุงูููู. </font><font style="vertical-align: inherit;">ูููููุง ุฌุนููุง ุงุฎุชูุงุฑูุฉ ุชูุงููุง ููุง ุฌุนููุง ุงููุตุงุฏู ุงุฎุชูุงุฑููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> useCollider, useColors; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.Clear(); vertices = ListPool&lt;Vector3&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useColors) { colors = ListPool&lt;Color&gt;.Get(); } triangles = ListPool&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Get(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Apply</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.SetVertices(vertices); ListPool&lt;Vector3&gt;.Add(vertices); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useColors) { hexMesh.SetColors(colors); ListPool&lt;Color&gt;.Add(colors); } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุทุจุน ุ ูุฌุจ ุฃู ุชุณุชุฎุฏู ุงูุชุถุงุฑูุณ ุฃููุงู ุงูููู ุ ูุฐุง ูู ุจุชุดุบูููุง. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/624/c01/bbd/624c01bbda8ad0250747b9c1af852590.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู ุงูุฃููุงู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงุฎุชูุงุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุซูุงุก ููุงููุง ุจุฐูู ุ ูููููุง ุฃูุถูุง ุฅุถุงูุฉ ุฏุนู ูุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุงุฎุชูุงุฑูุฉ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุงูุฅุบุงุซุฉ ูุง ุชุณุชุฎุฏููุง ุ ุณูุญุชุงุฌ ุฅูููุง ููุญุตูู ุนูู ุงููุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> useCollider, useColors, useUVCoordinates; [NonSerialized] List&lt;Vector2&gt; uvs; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.Clear(); vertices = ListPool&lt;Vector3&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useColors) { colors = ListPool&lt;Color&gt;.Get(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useUVCoordinates) { uvs = ListPool&lt;Vector2&gt;.Get(); } triangles = ListPool&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Get(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Apply</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { hexMesh.SetVertices(vertices); ListPool&lt;Vector3&gt;.Add(vertices); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useColors) { hexMesh.SetColors(colors); ListPool&lt;Color&gt;.Add(colors); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useUVCoordinates) { hexMesh.SetUVs(<span class="hljs-number"><span class="hljs-number">0</span></span>, uvs); ListPool&lt;Vector2&gt;.Add(uvs); } โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b01/a99/559/b01a9955989cdc83a2e8de2582c1cbeb.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุง ูุณุชุฎุฏู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุณุชุฎุฏุงู ูุฐู ุงููุธููุฉ ุ ูู ุจุฅูุดุงุก ุทุฑู ูุฅุถุงูุฉ ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุฅูู ุงููุซูุซุงุช ูุงูุฑุจุงุนูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddTriangleUV</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector2 uv1, Vector2 uv2, Vector3 uv3</span></span></span><span class="hljs-function">)</span></span> { uvs.Add(uv1); uvs.Add(uv2); uvs.Add(uv3); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddQuadUV</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector2 uv1, Vector2 uv2, Vector3 uv3, Vector3 uv4</span></span></span><span class="hljs-function">)</span></span> { uvs.Add(uv1); uvs.Add(uv2); uvs.Add(uv3); uvs.Add(uv4); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ูุถูู ุทุฑููุฉ ุฅุถุงููุฉ </font></font><code>AddQuadUV</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุถุงูุฉ ููุทูุฉ UV ูุณุชุทููุฉ ุจุดูู ููุงุฆู. </font><font style="vertical-align: inherit;">ูุฐู ูู ุงูุญุงูุฉ ุงูููุงุณูุฉ ุนูุฏูุง ุชููู ุงูุฑุจุงุนูุฉ ููููุณูุง ูุชูุงุซูุงู ุ ุณูุณุชุฎุฏููุง ูููุงู ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddQuadUV</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> uMin, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> uMax, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vMin, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vMax</span></span></span><span class="hljs-function">)</span></span> { uvs.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(uMin, vMin)); uvs.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(uMax, vMin)); uvs.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(uMin, vMax)); uvs.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(uMax, vMax)); }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃููุงุฑ ุงูุญุงููุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑุง ุญุงู ุงูููุช ูุฎูู ุงููุงุก! </font><font style="vertical-align: inherit;">ุณููุนู ุฐูู ูุน ุฑุจุงุนู ุ ูุงูุฐู ุณูุดูุฑ ุฅูู ุณุทุญ ุงููุงุก. </font><font style="vertical-align: inherit;">ูุจูุง ุฃููุง ูุนูู ูุน ุงูุฃููุงุฑ ุ ูุฌุจ ุฃู ูุชุฏูู ุงููุงุก. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุณุชุฎุฏู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุชู ุชุดูุฑ ุฅูู ุงุชุฌุงู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุชุตูุฑ ูุฐุง ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชุธููู ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุจุฅูุดุงุก ุชุธููู ููุงุณู ุฌุฏูุฏ ูุชุณููุชู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ุจุชุบููุฑู ุจุญูุซ ูุชู ุชุณุฌูู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูู ูููุงุช ุงูุจูุงุถ ุงูุฎุถุฑุงุก ูุงูุญูุฑุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">Shader "Custom/River" { โฆ <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { fixed4 c = tex2D(_MainTex, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex) * _Color; o.Albedo = c.rgb * <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.color; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; o.Albedo.rg = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex; } ENDCG } FallBack "Diffuse" }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู ุงูุนุงู </font></font><code>HexMesh rivers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุจุชูุธููู ูุชุทุจููู ุจููุณ ุงูุทุฑููุฉ ููุง ูู ุญุงูุฉ ุงูุฅุบุงุซุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexMesh terrain, rivers; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { terrain.Clear(); rivers.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { Triangulate(cells[i]); } terrain.Apply(); rivers.Apply(); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุณูููู ูุฏููุง ููุงููุงุช ุณุญุจ ุฅุถุงููุฉ ุ ุญุชู ูู ูู ููู ูุฏููุง ุฃููุงุฑุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  Unity  ,        .     ,  -  . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ุงูุฅุนุฏุงุฏ ุงููุณุจู (ูู ุฎูุงู ุงููุซุงู) ุ ูุชูุฑุงุฑ ูุงุฆู ุงูุชุถุงุฑูุณ ุ ูุฅุนุงุฏุฉ ุชุณููุชู ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ูุฑุจุทู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/efd/0d6/680/efd0d66801d78d636d07f59b34e5c615.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e46/119/b43/e46119b43f4cd398d96261715975a36a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฒุก ุงูุฌุงูุฒุฉ ูุน ุงูุฃููุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุงููุงุฏู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฐูู ุจุงุณุชุฎุฏุงู ูุฏููุง ุชุธููู ุงูุฌุฏูุฏุ ูุณูู ูุชุฃูุฏ ูู ุฃู ูุณุชุฎุฏู ูุง ูุฏูู ูู ูุฌูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูููู ุฃูุถูุง ุจุฅุนุฏุงุฏ ูููู ุงูุดุจูุฉ ุงูุณุฏุงุณูุฉ ูููุงุฆู ุจุญูุซ ูุณุชุฎุฏู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุ ููู ูุง ูุณุชุฎุฏู ุฃููุงู ุงูุฑุฃุณ ุฃู ุงููุตุงุฏู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7df/db6/134/7dfdb6134b4dc27d843db92492b61708.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ุงููุฑุนูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุซููุซ ุงูููุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุฃู ูุชููู ูู ุชุซููุซ ุงููุงุก ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูุณุชูู ุณุทุญู. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฌุนููุง ุชุญููุง ูู ุงูุงุฑุชูุงุน </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ูุนููุง ูุน ูุงุน ุงูููุฑ. </font><font style="vertical-align: inherit;">ุจูุง ุฃู ุงูุชุดููู ุงูุฑุฃุณู ููุฎููุฉ ูุณุงูู ูุตู ุฅุฒุงุญุฉ ุงูุงุฑุชูุงุน ุ ูููุณุชุฎุฏูู ูุชุบููุฑ ุณุทุญ ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ููุญู ูุถูู ุฃู ุงููุงุก ูู ูููู ุฃุจุฏุงู ููู ุชุถุงุฑูุณ ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> riverSurfaceElevationOffset = <span class="hljs-number"><span class="hljs-number">-0.5f</span></span>;</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูุง ุชุฌุนููุง ุฃูู ููููุงูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">          ,   . ,         . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุตูุฉ ููุญุตูู ุนูู ุงูููุถุน ุงูุนููุฏู ูุณุทุญ ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> RiverSurfaceY { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (elevation + HexMetrics.riverSurfaceElevationOffset) * HexMetrics.elevationStep; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุนูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ุณููุดุฆ ุงูุนุฏูุฏ ูู ุงูุฒูุงูุง ุงูุฑุจุงุนูุฉ ููุฃููุงุฑ ุ ูููุถูู ุทุฑููุฉ ูููุตูุฉ ูุฐูู. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุนุทููุง ุฃุฑุจุนุฉ ููู ูุงุฑุชูุงุน ููุนููุงุช. </font><font style="vertical-align: inherit;">ุณูุชูุญ ููุง ุฐูู ุถุจุท ุงููุถุน ุงูุฑุฃุณู ูุฌููุน ุงูููู ุงูุฃุฑุจุนุฉ ุจุดูู ูุชุฒุงูู ูุจู ุฅุถุงูุฉ ุงูุฑุจุงุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRiverQuad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y </span></span></span><span class="hljs-function">)</span></span> { v1.y = v2.y = v3.y = v4.y = y; rivers.AddQuad(v1, v2, v3, v4); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุถูู ููุง ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ููุฑุจุงุนู. </font><font style="vertical-align: inherit;">ููุท ุงูุชูู ูู ุงููุณุงุฑ ุฅูู ุงููููู ููู ุงูุฃุณูู ุฅูู ุงูุฃุนูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> rivers.AddQuad(v1, v2, v3, v4); rivers.AddQuadUV(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>);</code> </pre> <br> <code>TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุฐู ูู ุงูุทุฑููุฉ ุงูุฃููู ุงูุชู ุณูุถูู ุฅูููุง ุงูุฒูุงูุง ุงูุฑุจุงุนูุฉ ููุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุงูุฑุจุงุนู ุงูุฃูู ููุน ุจูู ุงููุณุท ูุงููุณุท. </font><font style="vertical-align: inherit;">ูุงูุซุงูู ุจูู ุงููุณุท ูุงูุฃุถูุงุน. </font><font style="vertical-align: inherit;">ูุญู ููุท ูุณุชุฎุฏู ุงูููู ุงูุชู ูุฏููุง ุจุงููุนู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐู ุงูููู ุณูุชู ุงูุชูููู ูู ุดุฃููุง ุ ูุณุชููู ุงูููุงู ูุชูุฌุฉ ูุฐูู ุฌุฒุฆููุง ุชุญุช ุงูุฌุฏุฑุงู ุงููุงุฆูุฉ ููููุงุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุง ุฏุงุนู ููููู ุจุดุฃู ุงูููุถุน ุงูุฏููู ูุญุงูุฉ ุงููุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { โฆ TriangulateRiverQuad(centerL, centerR, m.v2, m.v4, cell.RiverSurfaceY); TriangulateRiverQuad(m.v2, m.v4, e.v2, e.v4, cell.RiverSurfaceY); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/418/a40/e9c/418a40e9c73fd3da885ce467e475ff63.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃููู ุนูุงูุงุช ุงููุงุก. </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูุชุบูุฑ ุนุฑุถ ุงููุงุกุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,     ,      โ .           .      . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุญุฑู ูุน ุงูุชุฏูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ูุง ุชุชูุงูู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูุน ุงุชุฌุงู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ููุญูุงุธ ุนูู ุงูุงุชุณุงู ููุง. </font><font style="vertical-align: inherit;">ุงูุชุฑุถ ุฃู ุฅุญุฏุงุซูุงุช U ูู 0 ุนูู ุงูุฌุงูุจ ุงูุฃูุณุฑ ูู ุงูููุฑ ุ ู 1 ุนูู ุงููููู ุ ุนูุฏ ุงููุธุฑ ูู ุงุชุฌุงู ุงููุตุจ. </font><font style="vertical-align: inherit;">ููุฌุจ ุฃู ุชุฎุชูู ุฅุญุฏุงุซูุงุช V ูู 0 ุฅูู 1 ูู ุงุชุฌุงู ุงูููุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุฐู ุงูููุงุตูุงุช ุ ุณุชููู ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุตุญูุญุฉ ุนูุฏูุง ูุชู ุชุซููุซ ุงูููุฑ ุงูุตุงุฏุฑ ุ ูููููุง ุณุชุตุจุญ ุบูุฑ ุตุญูุญุฉ ูุณุชุญุชุงุฌ ุฅูู ููุจูุง ุนูุฏ ุชุซููุซ ุงูููุฑ ุงููุงุฑุฏ. </font><font style="vertical-align: inherit;">ูุชุจุณูุท ุงูุนูู ุ ุฃุถู ุฅูู </font></font><code>TriangulateRiverQuad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนููุฉ </font></font><code>bool reversed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏูู ูููุจ ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRiverQuad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> reversed </span></span></span><span class="hljs-function">)</span></span> { v1.y = v2.y = v3.y = v4.y = y; rivers.AddQuad(v1, v2, v3, v4); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reversed) { rivers.AddQuadUV(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { rivers.AddQuadUV(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง </font></font><code>TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุง ูุนุฑู ุฃููุง ูู ุญุงุฌุฉ ูุชุญููู ุงูุงุชุฌุงูุ ุนูุฏ ุงูุชุนุงูู ูุน ุงูููุฑ ูุงุฑุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> reversed = cell.IncomingRiver == direction; TriangulateRiverQuad( centerL, centerR, m.v2, m.v4, cell.RiverSurfaceY, reversed ); TriangulateRiverQuad( m.v2, m.v4, e.v2, e.v4, cell.RiverSurfaceY, reversed );</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/546/c86/e9d/546c86e9d2d8752caa30523098283542.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุชุฌุงู ุงููุชูู ุนููู ููุฃููุงุฑ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฏุงูุฉ ูููุงูุฉ ุงูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฏุงุฎู ุ </font></font><code>TriangulateWithRiverBeginOrEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ููุท ููุชุญูู ููุง ุฅุฐุง ูุงู ูุฏููุง ููุฑ ูุงุฑุฏ ูุชุญุฏูุฏ ุงุชุฌุงู ุงูุชุฏูู. </font><font style="vertical-align: inherit;">ุซู ูููููุง ุฅุฏุฎุงู ููุฑ ุฑุจุงุนู ุขุฎุฑ ุจูู ุงููุณุท ูุงูุถูุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiverBeginOrEnd</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> reversed = cell.HasIncomingRiver; TriangulateRiverQuad( m.v2, m.v4, e.v2, e.v4, cell.RiverSurfaceY, reversed ); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุจูู ุงููุฑูุฒ ูุงููุณุท ูู ูุซูุซ ุ ูุฐูู ูุง ูููููุง ุงุณุชุฎุฏุงูู </font></font><code>TriangulateRiverQuad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงูุงุฎุชูุงู ุงููุญูุฏ ุงูููู ููุง ูู ุฃู ุงูููุฉ ุงููุฑูุฒูุฉ ุชูุน ูู ููุชุตู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฅู ุฅุญุฏุงุซูุงุชู โโU ุชุณุงูู ุฏุงุฆููุง ยฝ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> center.y = m.v2.y = m.v4.y = cell.RiverSurfaceY; rivers.AddTriangle(center, m.v2, m.v4); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reversed) { rivers.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>) ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { rivers.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>) ); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c04/07f/539/c0407f539ce2ff6a91081e84062a4097.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุก ูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุงู ุฃุฌุฒุงุก ููููุฏุฉ ูู ุงููุงุก ูู ุงูููุงูุงุชุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">       ,   quad  ,     .           .           . <br><br>      ,  .     ,      .      . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุฏูู ุจูู ุงูุฎูุงูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุฅุถุงูุฉ ุงููุงุก ุจูู ุงูุฎูุงูุง ุ ูุฌุจ ุฃู ูููู ุญุฐุฑูู ุจุดุฃู ุงูุงุฎุชูุงู ูู ุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ููู ูุชุฏูู ุงููุงุก ุฅูู ุฃุณูู ุงูููุญุฏุฑุงุช ูุงูููุญุฏุฑุงุช ุ </font></font><code>TriangulateRiverQuad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุฏุนู ูุนููุชูู ููุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนูุง ูุถูู ูุงุญุฏุฉ ุฃุฎุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRiverQuad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> reversed </span></span></span><span class="hljs-function">)</span></span> { v1.y = v2.y = y1; v3.y = v4.y = y2; rivers.AddQuad(v1, v2, v3, v4); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reversed) { rivers.AddQuadUV(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { rivers.AddQuadUV(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถูุง ุ ูู ุฃุฌู ุงูุฑุงุญุฉ ุ ุฏุนูุง ูุถูู ุฎูุงุฑูุง ุณูุญุตู ุนูู ุงุฑุชูุงุน ูุงุญุฏ. </font><font style="vertical-align: inherit;">ุณุชุณุชุฏุนู ููุท ุทุฑููุฉ ุฃุฎุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRiverQuad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> reversed </span></span></span><span class="hljs-function">)</span></span> { TriangulateRiverQuad(v1, v2, v3, v4, y, y, reversed); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฅุถุงูุฉ ููุฑ ุฑุจุงุนู ูุฏุงุฎู </font></font><code>TriangulateConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููููุง ุจูู ุงูุฎูุงูุง ุ ูุง ูููููุง ูุนุฑูุฉ ููุน ุงูููุฑ ุงูุฐู ูุชุนุงูู ูุนู ุนูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุชุญูู ุถุฑูุฑููุง ุ ูุฌุจ ุนูููุง ุงูุชุญูู ููุง ุฅุฐุง ูุงู ูุฏููุง ููุฑ ูุงุฑุฏ ููุง ุฅุฐุง ูุงู ูุชุญุฑู ูู ุงุชุฌุงููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction)) { e2.v3.y = neighbor.StreamBedY; TriangulateRiverQuad( e1.v2, e1.v4, e2.v2, e2.v4, cell.RiverSurfaceY, neighbor.RiverSurfaceY, cell.HasIncomingRiver &amp;&amp; cell.IncomingRiver == direction ); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/283/1f2/62e/2831f262ed46e82bebabf45d0a8215f2.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฑ ุงูููุชูู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุณูู V ุชูุชุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ูู ูู ุฌุฒุก ูู ุงูููุฑ ุ ูุฏููุง ุฅุญุฏุงุซูุงุช V ุชุชุฑุงูุญ ูู 0 ุฅูู 1. ุฃู ุฃู ููุงู ุฃุฑุจุนุฉ ููุท ุนูู ุงูุฎููุฉ. ุฎูุณุฉ ุฅุฐุง ุฃุถููุง ุฃูุถูุง ุฑูุงุจุท ุจูู ุงูุฎูุงูุง. ุฃูุง ูุงู ูุง ูุณุชุฎุฏูู ููุณูุฌ ุงูููุฑ ุ ูุฌุจ ุฃู ูุชูุฑุฑ ุนุฏุฉ ูุฑุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุชูููู ุนุฏุฏ ุงูุชูุฑุงุฑ ุนู ุทุฑูู ุชูุฏูุฏ ุฅุญุฏุงุซูุงุช V ุจุญูุซ ุชูุชูู ูู 0 ุฅูู 1 ูู ุฌููุน ุฃูุญุงุก ุงูุฎููุฉ ุจุงูุฅุถุงูุฉ ุฅูู ุงุชุตุงู ูุงุญุฏ. ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฒูุงุฏุฉ ุฅุญุฏุงุซูุงุช V ูู ูู ููุทุน ุจููุฏุงุฑ 0.2. ุฅุฐุง ูุถุนูุง 0.4 ูู ุงูููุชุตู ุ ูุณูุตุจุญ ูู ุงูููุชุตู 0.6 ุ ูุนูู ุงูุญุงูุฉ ุณูุตู ุฅูู 0.8. ุซู ูู ุงุชุตุงู ุงูุฎููุฉ ุ ุณุชููู ุงููููุฉ 1.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูููุฑ ูุชุฏูู ูู ุงูุงุชุฌุงู ุงููุนุงูุณ ุ ููุง ูุฒุงู ุจุฅููุงููุง ูุถุน 0.4 ูู ุงูููุชุตู ุ ูููู ูู ุงูููุชุตู ูุตุจุญ 0.2 ุ ูุนูู ุงูุญุงูุฉ - 0. ุฅุฐุง ูุงุตููุง ูุฐุง ุญุชู ุชูุถู ุงูุฎููุฉ ุ ุณุชููู ุงููุชูุฌุฉ -0.2. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุทุจูุนู ูุฃูู ูุดุจู 0.8 ููุงุฏุฉ ุฐุงุช ูุถุน ุชุตููุฉ ูุชูุฑุฑ ุ ุชูุงููุง ูุซู 0 ูุนุงุฏู 1.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/22e/4de/cd9/22e4decd99e9c2f0c9312be9eaaceb9a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุบููุฑ ุงูุฅุญุฏุงุซูุงุช V.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฅูุดุงุก ุฏุนู ููุฐุง ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ </font></font><code>TriangulateRiverQuad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนููุฉ ุฃุฎุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRiverQuad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> reversed </span></span></span><span class="hljs-function">)</span></span> { TriangulateRiverQuad(v1, v2, v3, v4, y, y, v, reversed); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRiverQuad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> reversed </span></span></span><span class="hljs-function">)</span></span> { โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏูุง ูุง ูุชู ุนูุณ ุงูุงุชุฌุงู ุ ูุณุชุฎุฏู ุจุจุณุงุทุฉ ุงูุฅุญุฏุงุซูุงุช ุงููุฑุณูุฉ ูู ุงูุฌุฒุก ุงูุณููู ูู ุงูุฒูุงูุง ุงูุฑุจุงุนูุฉ ููุถูู 0.2 ูู ุงูุฃุนูู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { rivers.AddQuadUV(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, v, v + <span class="hljs-number"><span class="hljs-number">0.2f</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุงูุนูู ูุน ุงูุงุชุฌุงู ุงูููููุจ ุจุทุฑุญ ุงูุฅุญุฏุงุซูุงุช ูู 0.8 ู 0.6. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reversed) { rivers.AddQuadUV(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.8f</span></span> - v, <span class="hljs-number"><span class="hljs-number">0.6f</span></span> - v); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุฌุจ ุฃู ูููู ุงูุฅุญุฏุงุซูุงุช ุงูุตุญูุญุฉ ุ ููุง ูู ููุง ูุชุนุงูู ูุน ููุฑ ุตุงุฏุฑ. </font><font style="vertical-align: inherit;">ููุจุฏุฃ </font></font><code>TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> TriangulateRiverQuad( centerL, centerR, m.v2, m.v4, cell.RiverSurfaceY, <span class="hljs-number"><span class="hljs-number">0.4f</span></span>, reversed ); TriangulateRiverQuad( m.v2, m.v4, e.v2, e.v4, cell.RiverSurfaceY, <span class="hljs-number"><span class="hljs-number">0.6f</span></span>, reversed );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูู </font></font><code>TriangulateConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุบููุฑ ูุง ููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> TriangulateRiverQuad( e1.v2, e1.v4, e2.v2, e2.v4, cell.RiverSurfaceY, neighbor.RiverSurfaceY, <span class="hljs-number"><span class="hljs-number">0.8f</span></span>, cell.HasIncomingRiver &amp;&amp; cell.IncomingRiver == direction );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฎูุฑูุง </font></font><code>TriangulateWithRiverBeginOrEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> TriangulateRiverQuad( m.v2, m.v4, e.v2, e.v4, cell.RiverSurfaceY, <span class="hljs-number"><span class="hljs-number">0.6f</span></span>, reversed ); center.y = m.v2.y = m.v4.y = cell.RiverSurfaceY; rivers.AddTriangle(center, m.v2, m.v4); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reversed) { rivers.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.4f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0.2f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.2f</span></span>) ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { rivers.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.4f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.6f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0.6f</span></span>) ); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/44e/786/63f/44e78663f2d77264660f30917a5e1a94.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุญุฏุงุซูุงุช V ุงูููุชุฏุฉ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนุฑุถ ุทู </font><i><font style="vertical-align: inherit;">ุฅุญุฏุงุซูุงุช V</font></i><font style="vertical-align: inherit;"> ุจุดูู ุตุญูุญ ุ ุชุฃูุฏ ูู ุฃููุง ูุง ุชุฒุงู ุฅูุฌุงุจูุฉ ูู ุชุธููู ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y += <span class="hljs-number"><span class="hljs-number">1</span></span>; } o.Albedo.rg = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/aec/30e/a84/aec30ea849af0c8ba42cd6e0cef44635.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุญุฏุงุซูุงุช </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุฑุฉ V.packpackage</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณูู ุงููุชุญุฑูุฉ ุงูููุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุงูุชูุงุก ูู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุ ูููููุง ุงูุงูุชูุงู ุฅูู ุชุญุฑูู ุงูุฃููุงุฑ. ุณููุนู ุดุงุฏุฑ ุงูููุฑ ูุฐุง ุญุชู ูุง ูุถุทุฑ ุฅูู ุชุญุฏูุซ ุงูุดุจูุฉ ุจุงุณุชูุฑุงุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููู ุจุฅูุดุงุก ุชุธููู ููุฑ ูุนูุฏ ูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ูููููุง ุณููุนู ุฐูู ูุงุญููุง. ูู ุงูููุช ุงูุญุงูู ุ ุณููุดุฆ ุชุฃุซูุฑูุง ุจุณูุทูุง ูููุฑ ููููุง ูููููุฉ ุนูู ุงูุฑุณูู ุงููุชุญุฑูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅูุดุงุก ุงูุฑุณูู ุงููุชุญุฑูุฉ ุนู ุทุฑูู ุชุญููู ุฅุญุฏุงุซูุงุช V ุจูุงุกู ุนูู ููุช ุงููุนุจุฉ. ุงููุญุฏุฉ ุชุณูุญ ูู ุจุงูุญุตูู ุนูู ูููุชู ุจุงุณุชุฎุฏุงู ูุชุบูุฑ </font></font><code>_Time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุญุชูู ุงููููู Y ุนูู ุงูููุช ุจุฏูู ุชุบููุฑ ุ ูุงูุฐู ูุณุชุฎุฏูู. ุชุญุชูู ุงูููููุงุช ุงูุฃุฎุฑู ุนูู ููุงููุณ ุฒูููุฉ ูุฎุชููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชุฎูุต ูู ุงูุทู ุนูู ุทูู V ุ ูุฃููุง ูู ูุนุฏ ุจุญุงุฌุฉ ุฅููู. ุจุฏูุงู ูู ุฐูู ุ ูุทุฑุญ ุงูููุช ุงูุญุงูู ูู ุฅุญุฏุงุซูุงุช V. ููุฐุง ูุบูุฑ ุงูุฅุญุฏุงุซูุงุช ูุฃุณูู ุ ููุง ูุฎูู ุงูููู ุจุชุฏูู ุงูุชูุงุฑ ุงููุชุฏูู ูู ูุฌุฑู ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">// <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { // <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y += <span class="hljs-number"><span class="hljs-number">1</span></span>; // } <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y -= _Time.y; o.Albedo.rg = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุซุงููุฉ ูุงุญุฏุฉ ุ ุณุชุตุจุญ ุฅุญุฏุงุซูุงุช V ูู ุฌููุน ุงูููุงุท ุฃูู ูู ุงูุตูุฑ ุ ูุฐูู ูู ูุฑู ุงููุฑู ุจุนุฏ ุงูุขู. </font><font style="vertical-align: inherit;">ูุฑุฉ ุฃุฎุฑู ุ ูุฐุง ุฃูุฑ ุทุจูุนู ุนูุฏ ุงุณุชุฎุฏุงู ุงูุชุตููุฉ ูู ูุถุน ุชูุฑุงุฑ ุงููุณูุฌ. </font><font style="vertical-align: inherit;">ูููู ููุนุฑูุฉ ูุง ูุญุฏุซ ุ ูููููุง ุฃู ูุฃุฎุฐ ุงูุฌุฒุก ุงููุณุฑู ูู ุฅุญุฏุงุซูุงุช V.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y -= _Time.y; <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y = frac(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.y); o.Albedo.rg = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex;</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุญุฏุงุซูุงุช V ุงููุชุญุฑูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุฎุฏุงู ุงูุถูุถุงุก </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุฃุตุจุญ ููุฑูุง ูุชุญุฑููุง ุ ูููู ูู ุงูุงุชุฌุงู ูุงูุณุฑุนุฉ ููุงู ุงูุชูุงูุงุช ุญุงุฏุฉ. </font><font style="vertical-align: inherit;">ููุท ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูุฏููุง ูุฌุนููุง ูุงุถุญุฉ ุฌุฏูุง ุ ูููู ุณูููู ูู ุงูุตุนุจ ุงูุชุนุฑู ุนูู ูุง ุฅุฐุง ููุช ุชุณุชุฎุฏู ููุทูุง ุดุจูููุง ุจุงููุงุก. </font><font style="vertical-align: inherit;">ูุฐุง ุ ุจุฏูุงู ูู ุนุฑุถ ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุฎุงู ุ ููุฃุฎุฐ ุนููุฉ ูู ุงููุณูุฌ. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ูุณูุฌ ุงูุถุฌูุฌ ุงูููุฌูุฏ ูุฏููุง. </font><font style="vertical-align: inherit;">ูุฃุฎุฐ ุนููุงุช ููู ููุถุฑุจ ููู ุงููุงุฏุฉ ูู ููุงุฉ ุงูุถุฌูุฌ ุงูุฃููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { float2 uv = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex; uv.y -= _Time.y; <span class="hljs-type"><span class="hljs-type">float4</span></span> noise = tex2D(_MainTex, uv); fixed4 c = _Color * noise.r; o.Albedo = c.rgb; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนููู ูุงุฏุฉ ุงูุถุฌูุฌ ุฅูู ูุงุฏุฉ ุงูููุฑ ูุชุฃูุฏ ูู ุฃููุง ุจูุถุงุก. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/dd4/e4e/dc8dd4e4ee9b92f2f104ba3107da30ce.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b3f/0ca/319/b3f0ca31928fd594a715868ebbb7265c.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุณูุฌ ุงูุถุฌูุฌ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุฅุญุฏุงุซูุงุช V ููุชุฏุฉ ููุบุงูุฉ ุ ูุฅู ูุณูุฌ ุงูุถุฌูุฌ ููุชุฏ ุฃูุถูุง ุนูู ุทูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ุงูุฏูุฑุฉ ููุณุช ุฌูููุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุญุงูู ุชูุฏูุฏูุง ุจุทุฑููุฉ ุฃุฎุฑู - ุชูููู ุญุฌู ุฅุญุฏุงุซูุงุช U. ุฅูู ุญุฏ ูุจูุฑ ุณูููู ูุงููุงู. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃููุง ูู ูุฃุฎุฐ ุณูู ุนููุฉ ูู ูุทุงู ุถูู ูู ูุณูุฌ ุงูุถุฌูุฌ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> float2 uv = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex; uv.x *= <span class="hljs-number"><span class="hljs-number">0.0625</span></span>; uv.y -= _Time.y;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/aa9/957/2a9/aa99572a9c0ad3daaa7b5b4eb3978cc0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏุฏ ุฅุญุฏุงุซูุงุช U.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ูุจุทุฆ ุฃูุถูุง ุฅูู ุฑุจุน ูู ุงูุซุงููุฉ ุญุชู ูุณุชุบุฑู ุฅููุงู ุฏูุฑุฉ ุงููุณูุฌ ุฃุฑุจุน ุซูุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs"> uv.y -= _Time.y * 0.25;</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุถุฌูุฌ ุงูุญุงูู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎูุท ุงูุถูุถุงุก </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดูุก ูุจุฏู ุจุงููุนู ุฃูุถู ุจูุซูุฑ ุ ููู ุงูููุท ูุจูู ุฏุงุฆููุง ุนูู ุญุงูู. ุงููุงุก ูุง ูุชุตุฑู ููุฐุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ููุท ูุทุงููุง ุตุบูุฑูุง ูู ุงูุถูุถุงุก ุ ูููููุง ุชุบููุฑ ุงูููุท ุนู ุทุฑูู ุชุญุฑูู ูุฐุง ุงููุทุงู ุนูู ุทูู ุงููุณูุฌ. ูุชู ุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ุงูููุช ุฅูู ุฅุญุฏุงุซูุงุช U. ูุฌุจ ุฃู ููุนู ุฐูู ุจุจุทุก ุ ูุฅูุง ุณูุจุฏู ุงูููุฑ ูุชุฏูููุง ุจุดูู ุฌุงูุจู. ููุฌุฑุจ ูุนุงูู 0.005. ููุฐุง ูุนูู ุฃู ุฅููุงู ุงูููุท ูุณุชุบุฑู 200 ุซุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs markdown"> uv.x = uv.x <span class="hljs-bullet"><span class="hljs-bullet">* 0.0625 + _Time.y *</span></span> 0.005;</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฑูู ุงูุถูุถุงุก. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุง ูุจุฏู ูุฐุง ุฌููููุง ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูุง ูุฒุงู ุงููุงุก ูุจุฏู ุซุงุจุชูุง ููู ุงููุงุถุญ ุฃู ุงูุชุญูู ููุญูุธ ุ ุนูู ุงูุฑุบู ูู ุฃูู ุจุทูุก ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูููููุง ุฅุฎูุงุก ุงูุชุญูู ุจุฏูุฌ ุนููุชู ุถูุถุงุก ูุชุญูููููุง ูู ุงุชุฌุงููู ูุชุนุงูุณูู. </font><font style="vertical-align: inherit;">ูุฅุฐุง ุงุณุชุฎุฏููุง ููููุง ูุฎุชููุฉ ููููุงู ูุชุญุฑูู ุงูุนููุฉ ุงูุซุงููุฉ ุ ูุณููุดุฆ ุฑุณููุง ูุชุญุฑููุง ุฎููููุง ููุชุบููุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูุง ูุชุฏุงุฎู ุฃุจุฏูุง ูุน ููุณ ููุท ุงูุถุฌูุฌ ุ ูุณุชุฎุฏู ููุงุฉ ูุฎุชููุฉ ููุนููุฉ ุงูุซุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> float2 uv = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex; uv.x = uv.x * <span class="hljs-number"><span class="hljs-number">0.0625</span></span> + _Time.y * <span class="hljs-number"><span class="hljs-number">0.005</span></span>; uv.y -= _Time.y * <span class="hljs-number"><span class="hljs-number">0.25</span></span>; <span class="hljs-type"><span class="hljs-type">float4</span></span> noise = tex2D(_MainTex, uv); float2 uv2 = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex; uv2.x = uv2.x * <span class="hljs-number"><span class="hljs-number">0.0625</span></span> - _Time.y * <span class="hljs-number"><span class="hljs-number">0.0052</span></span>; uv2.y -= _Time.y * <span class="hljs-number"><span class="hljs-number">0.23</span></span>; <span class="hljs-type"><span class="hljs-type">float4</span></span> noise2 = tex2D(_MainTex, uv2); fixed4 c = _Color * (noise.r * noise2.a);</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒูุฌ ูู ููุทู ุถูุถุงุก ูุชุบูุฑูู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุก ุดูุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏู ููุทูุง ุฏููุงูููููุง ุชูุงููุง. </font><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฌุนููุง ุดูุงูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ ุชุฃูุฏ ูู ุฃู ุงููุงุก ูุง ูููู ุจุงูุธูุงู. </font><font style="vertical-align: inherit;">ููููู ุชุนุทูููุง ูู ุฎูุงู ูููู ุงูุนุงุฑุถ ูููุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rivers</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูุฅุนุฏุงุฏ ุงููุณุจู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a61/894/e14/a61894e14d9999315d59b5ff0c0de517.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุชุนุทูู ุตุจ ุงูุธู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูู ุจุชุจุฏูู ุงูุชุธููู ุฅูู ุงููุถุน ุงูุดูุงู. </font><font style="vertical-align: inherit;">ููุฅุดุงุฑุฉ ุฅูู ุฐูู ุ ุงุณุชุฎุฏู ุนูุงูุงุช ุชุธููู. </font><font style="vertical-align: inherit;">ุซู ุฃุถู </font></font><code>#pragma surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฉ ุงูุฃุณุงุณูุฉ </font><font style="vertical-align: inherit;">ุฅูู ุงูุณุทุฑ </font></font><code>alpha</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃุซูุงุก ูุฌูุฏูุง ููุง ุ ููููู ุฅุฒุงูุฉ ุงููููุฉ ุงูุฑุฆูุณูุฉ </font></font><code>fullforwardshadows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฃููุง ูุง ุฒููุง ูุง ูููู ุงูุธูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs cs"> Tags { <span class="hljs-string"><span class="hljs-string">"RenderType"</span></span>=<span class="hljs-string"><span class="hljs-string">"Transparent"</span></span> <span class="hljs-string"><span class="hljs-string">"Queue"</span></span>=<span class="hljs-string"><span class="hljs-string">"Transparent"</span></span> } LOD <span class="hljs-number"><span class="hljs-number">200</span></span> CGPROGRAM <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> surface surf Standard alpha // fullforwardshadows #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> target 3.0</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุณูููู ุจุชุบููุฑ ุงูุทุฑููุฉ ุงูุชู ูุญุฏุฏ ุจูุง ููู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุถุฑุจ ุงูุถุฌูุฌ ุญุณุจ ุงูููู ุ ุณูุถูู ุถูุถุงุก ุฅููู. </font><font style="vertical-align: inherit;">ุซู ูุณุชุฎุฏู ุงููุธููุฉ </font></font><code>saturate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ุงููุชูุฌุฉ ุจุญูุซ ูุง ุชุชุฌุงูุฒ 1.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs swift"> fixed4 <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> = saturate(_Color + noise.r * noise2.a);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุณูุญ ููุง ุฐูู ุจุงุณุชุฎุฏุงู ููู ุงููุงุฏุฉ ูููู ุฃุณุงุณู. </font><font style="vertical-align: inherit;">ุงูุถูุถุงุก ุณุชุฒูุฏ ูู ุณุทูุนูุง ูุชุนุชูููุง. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุญุงูู ุงุณุชุฎุฏุงู ููู ุฃุฒุฑู ูุน ุนุชุงูุฉ ููุฎูุถุฉ ุฅูู ุญุฏ ูุง. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ูุงุก ุดูุงู ุฃุฒุฑู ูุน ุจูุน ุจูุถุงุก.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/af8/3f7/5a1/af83f75a143aabdd3b83525e4114fc3b.png"></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุก ุงูุดูุงู ุงููููู. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุชูุงู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุจุฏุง ุฃู ูู ุดูุก ูุนูู ุ ุญุงู ุงูููุช ูุชุดููู ุงูููู ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุชุดููู ุญูุงู ุงูุฎูุงูุง ุ ุณูุฌุนู ูุฐุง ุฃููุงุฑูุง ุบูุฑ ูุชุณุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cellPerturbStrength = <span class="hljs-number"><span class="hljs-number">4f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8c8/ff5/96b/8c8ff596bc247be79a30122e49ca27f5.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/664/808/6ca66480859e94d00e2e558caa17cbf4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุดููุฉ ููุดููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ููุญุต ุงูุชุถุงุฑูุณ ุจุญุซูุง ุนู ุงููุดุงูู ุงูุชู ูุดุฃุช ุจุณุจุจ ุงูุชุดููู. </font><font style="vertical-align: inherit;">ูุจุฏู ุฃููู! </font><font style="vertical-align: inherit;">ุฏุนููุง ุชุญูู ูู ุงูุดูุงูุงุช ุงูุทูููุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/df1/95b/a33/df195ba33947744e97173412373f5ad4.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงู ุงูููุทูุนุฉ ุจูุงุณุทุฉ ุงูููุญุฏุฑุงุช.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎุชูู ุงููุงุก ุงููุชุณุงูุท ูู ุดูุงู ูุฑุชูุน ุฎูู ุฌุฑู. ุนูุฏูุง ูุญุฏุซ ูุฐุง ุ ูููู ููุญูุธูุง ุฌุฏูุง ุ ูุฐูู ูุญุชุงุฌ ุฅูู ุงูููุงู ุจุดูุก ุญูุงู ุฐูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ูุถูุญุง ุจูุซูุฑ ูู ุฃู ุงูุดูุงูุงุช ูููู ุฃู ุชูุญุฏุฑ ุ ุจุฏูุง ูู ุงููุฒูู ูุจุงุดุฑุฉ ุฅูู ุฃุณูู. ุนูู ุงูุฑุบู ูู ุฃู ุงูููุงู ูู ุงููุงูุน ูุง ุชุชุฏูู ุนูู ูุฐุง ุงููุญู ุ ุฅูุง ุฃููุง ููุณุช ููุญูุธุฉ ุจุดูู ุฎุงุต. ุณูู ููุณุฑูุง ุฏูุงุบูุง ุจุทุฑููุฉ ุชุจุฏู ุทุจูุนูุฉ ุจุงููุณุจุฉ ููุง. ูุฐุง ููุท ุชุฌุงูููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูุชุฌูุจ ููุฏุงู ุงูููุงู ูู ุชุนููู ูุฌุงุฑู ุงูุฃููุงุฑ. ูุฐุง ุณูุฎูู ูุณุงุญุฉ ุฃูุจุฑ ุจูู ุณุทุญ ุงููุงุก ููุงุน ุงูููุฑ. ููุง ุฃูู ุณูุฌุนู ุฌุฏุฑุงู ุงูููุงุฉ ุฃูุซุฑ ุนููุฏูุฉ ุ ูุฐูู ูุง ุชุชุนูู ุฃูุซุฑ ูู ุงููุงุฒู. ุฏุนูุง ูุณุฃู</font></font><code>HexMetrics.streamBedElevationOffset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฉ -1.75. </font><font style="vertical-align: inherit;">ุณูุคุฏู ุฐูู ุฅูู ุญู ุงูุฌุฒุก ุงูุฃูุจุฑ ูู ุงููุดุงูู ุ ููู ูุตุจุญ ุงูุณุฑูุฑ ุนููููุง ุฌุฏูุง. </font><font style="vertical-align: inherit;">ุณูุธู ุฌุฒุก ูู ุงููุงุก ููุทูุนูุง ุ ูููู ููุณ ูู ุงูุดูุงูุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> streamBedElevationOffset = <span class="hljs-number"><span class="hljs-number">-1.75f</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/57b/80c/d26/57b80cd2687ff6afb9be83176e984b7d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงุช ูุชุนููุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก ุงูุณุงุจุน: ุงูุทุฑู </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุถุงูุฉ ุฏุนู ุงูุทุฑูู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุซููุซ ุงูุทุฑูู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุฌูุน ุจูู ุงูุทุฑู ูุงูุฃููุงุฑ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุณูู ูุธูุฑ ุงูุทุฑู. </font></font></li></ul><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9f7/b24/05e/9f7b2405e5ceed9842cc1ebd7b549b0a.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููู ุนูุงูุงุช ุงูุญุถุงุฑุฉ.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎูุงูุง ูุน ุงูุทุฑู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซู ุงูุฃููุงุฑ ุ ุชูุชูู ุงูุทุฑู ูู ุฎููุฉ ุฅูู ุฃุฎุฑู ุ ูู ุฎูุงู ููุชุตู ุญูุงู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุงููุงุฑู ุงููุจูุฑ ูู ุฃูู ูุง ุชูุฌุฏ ููุงู ุชุชุฏูู ุนูู ุงูุทุฑู ุ ูุฐูู ููู ุซูุงุฆูุฉ ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููุฒู ูุฌูุฏ ุชูุงุทุนุงุช ูุดุจูุฉ ุทุฑู ูุนุงูุฉ ุ ูุฐูู ูุญุชุงุฌ ุฅูู ุฏุนู ุฃูุซุฑ ูู ุทุฑูููู ููู ุฎููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุณูุญุช ููุทุฑู ุจุงูุณูุฑ ูู ุฌููุน ุงูุงุชุฌุงูุงุช ุงูุณุชุฉ ุ ููููู ุฃู ุชุญุชูู ุงูุฎููุฉ ูู ุตูุฑ ุฅูู ุณุชุฉ ุทุฑู. </font><font style="vertical-align: inherit;">ูุฐุง ูุง ูุฌููุนู ุฃุฑุจุนุฉ ุนุดุฑ ุชูููููุง ูููููุง ููุทุฑูู. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุซุฑ ุจูุซูุฑ ูู ุฎูุณุฉ ุชููููุงุช ููุฑูุฉ ููููุฉ. </font><font style="vertical-align: inherit;">ููุชุนุงูู ูุน ูุฐุง ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ููุฌ ุฃูุซุฑ ุนููููุฉ ููููู ุงูุชุนุงูู ูุน ุฌููุน ุงูุชููููุงุช.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d46/965/5b7/d469655b7efdbab33a6cac1c42e61a7e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14 ุชูููู ุทุฑูู ูููู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงูุทุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅู ุฃุจุณุท ุทุฑููุฉ ูุชุชุจุน ุงูุทุฑู ูู ุงูุฎููุฉ ูู ุงุณุชุฎุฏุงู ูุฌููุนุฉ ูู ุงูููู ุงูููุทููุฉ. </font><font style="vertical-align: inherit;">ูู ุจุฅุถุงูุฉ ุงูุญูู ุงูุฎุงุต ููุตููู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุนูู ูุงุจูุงู ููุชุณูุณู ุจุญูุซ ููููู ุฑุคูุชู ูู ุงูููุชุด. </font><font style="vertical-align: inherit;">ูู ุจุชุนููู ุญุฌู ุงูุตููู ูู ุฎูุงู ุงูุฎููุฉ ุงูุฌุงูุฒุฉ ุจุญูุซ ูุฏุนู ุณุชุฉ ุทุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[] roads;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/439/167/2c4/4391672c4c1de9075138eef3f1cafd73.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎููุฉ ุฌุงูุฒุฉ ูุน ุณุชุฉ ุทุฑู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ ููุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ููุง ูุณุงุฑ ูู ุงุชุฌุงู ูุนูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HasRoadThroughEdge</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> roads[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction]; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุงุฆู ุฃูุถูุง ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ููุงู ุทุฑูู ูุงุญุฏ ุนูู ุงูุฃูู ูู ุงูุฎููุฉ ุ ูุฐูู ุณูุถูู ุฎุงุตูุฉ ูุฐูู. </font><font style="vertical-align: inherit;">ูุง ุนููู ุณูู ุงูุชุฌูู ูู ุงูุตููู ูู ุงูุญููุฉ ูุงูุนูุฏุฉ </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุฌุฑุฏ ุงูุนุซูุฑ ุนูู ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ููุงู ุทุฑู ุ ูุงุฑุฌุน </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasRoads { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; roads.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roads[i]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฒุงูุฉ ุงูุทุฑูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูุน ุงูุฃููุงุฑ ุ ุณูุถูู ุทุฑููุฉ ูุฅุฒุงูุฉ ุฌููุน ุงูุทุฑู ูู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ูู ุฎูุงู ุญููุฉ ุชูุตู ุจูู ูู ุทุฑูู ุชู ุชูููููุง ูุณุจููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveRoads</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; neighbors.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roads[i]) { roads[i] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุทุจุน ุ ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุชุนุทูู ุงูุฎูุงูุง ุงูุจุงูุธุฉ ุงูุซูู ุงูููุงุจูุฉ ูู ุงูุฌูุฑุงู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roads[i]) { roads[i] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; neighbors[i].roads[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)((HexDirection)i).Opposite()] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ูู ุฎููุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุทุฑู ูุญููุฉ ููุฎูุงูุง ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุชุญุฏูุซ ุงูุฎูุงูุง ููุณูุง ููุท ุฏูู ุฌูุฑุงููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roads[i]) { roads[i] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; neighbors[i].roads[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)((HexDirection)i).Opposite()] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; neighbors[i].RefreshSelfOnly(); RefreshSelfOnly(); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุถุงูุฉ ุทุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุจู ุฅุถุงูุฉ ุงูุทุฑู ุฅุฒุงูุฉ ุงูุทุฑู. </font><font style="vertical-align: inherit;">ูุงููุฑู ุงููุญูุฏ ูู ุฃููุง ูุนูู ูููุฉ ูู Boolean </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููุณ </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุดุงุก ุทุฑููุฉ ุฎุงุตุฉ ูููููุง ุชูููุฐ ููุชุง ุงูุนูููุชูู. </font><font style="vertical-align: inherit;">ุซู ุณูููู ูู ุงููููู ุงุณุชุฎุฏุงูู ูุฅุถุงูุฉ ูุฅุฒุงูุฉ ุงูุทุฑูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddRoad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!roads[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction]) { SetRoad((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveRoads</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; neighbors.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roads[i]) { SetRoad(i, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetRoad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state</span></span></span><span class="hljs-function">)</span></span> { roads[index] = state; neighbors[index].roads[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)((HexDirection)index).Opposite()] = state; neighbors[index].RefreshSelfOnly(); RefreshSelfOnly(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุฃู ูููู ูุฏููุง ููุฑ ูุทุฑูู ูุณูุฑุงู ูู ููุณ ุงูุงุชุฌุงู ูู ููุณ ุงูููุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุจู ุฅุถุงูุฉ ุงูุทุฑูู ุ ุณูุชุญูู ููุง ุฅุฐุง ูุงู ููุงู ููุงู ููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddRoad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!roads[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction] &amp;&amp; !HasRiverThroughEdge(direction)) { SetRoad((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูููู ุงูุฌูุน ุจูู ุงูุทุฑู ูุงูููุญุฏุฑุงุช ูุฃููุง ุญุงุฏุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ุฃู ุฑุจูุง ูุฌุฏุฑ ุชูููุฏ ุงูุทุฑูู ูู ุฎูุงู ุฌุฑู ููุฎูุถ ุ ูููู ููุณ ูู ุฎูุงู ุงุฑุชูุงุนุ </font><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุทุฑููุฉ ุชุฎุจุฑูุง ุจูุฑู ุงูุงุฑุชูุงุน ูู ุงุชุฌุงู ูุนูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetElevationDifference</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> difference = elevation - GetNeighbor(direction).elevation; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> difference &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> ? difference : -difference; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฃู ูุฌุนู ุงูุทุฑู ุชุถูู ุจูุงุฑู ุงุฑุชูุงุน ุตุบูุฑ ุจูุง ููู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ุณุฃูุชุตุฑ ุนูู ุงูููุญุฏุฑุงุช ููุท ุ ุฃู ุจุญุฏ ุฃูุตู ูุญุฏุฉ ูุงุญุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddRoad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !roads[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction] &amp;&amp; !HasRiverThroughEdge(direction) &amp;&amp; GetElevationDifference(direction) &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span> ) { SetRoad((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)direction, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฒุงูุฉ ุงูุทุฑู ุงูุฎุงุทุฆุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุนููุง ุงูุทุฑู ุชุถูู ููุท ุนูุฏูุง ูุณูุญ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุงูุขู ุฅูู ุงูุชุฃูุฏ ูู ุฅุฒุงูุชูุง ุฅุฐุง ุฃุตุจุญุช ุบูุฑ ุตุญูุญุฉ ูู ููุช ูุงุญู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุฅุถุงูุฉ ููุฑ. </font><font style="vertical-align: inherit;">ูููููุง ุญุธุฑ ูุถุน ุงูุฃููุงุฑ ููู ุงูุทุฑู ุ ูููู ุงูุฃููุงุฑ ูุง ุชูุทุนูุง ุงูุทุฑู. </font><font style="vertical-align: inherit;">ุฏุนูู ูุบุณููู ุงูุทุฑูู ุจุนูุฏูุง ุนู ุงูุทุฑูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูุงููุง ุจุงููุณุจุฉ ููุง ุฃู ูุณุฃู ุนู ุงูุทุฑูู </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุบุถ ุงููุธุฑ ุนูุง ุฅุฐุง ูุงู ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ูุฏุงุฆูุง ูุชู ุชุญุฏูุซู ููุงู ูู ูู ุงูุฎูุงูุงุ ูุฐูู ูุญู ูู ุชุนุฏ ูู ุญุงุฌุฉ ุฅูู ุงูุฏุนูุฉ ุจุดูู ุตุฑูุญ </font></font><code>RefreshSelfOnly</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>SetOutgoingRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetOutgoingRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasOutgoingRiver &amp;&amp; outgoingRiver == direction) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } HexCell neighbor = GetNeighbor(direction); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!neighbor || elevation &lt; neighbor.elevation) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } RemoveOutgoingRiver(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasIncomingRiver &amp;&amp; incomingRiver == direction) { RemoveIncomingRiver(); } hasOutgoingRiver = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; outgoingRiver = direction; <span class="hljs-comment"><span class="hljs-comment">// RefreshSelfOnly(); neighbor.RemoveIncomingRiver(); neighbor.hasIncomingRiver = true; neighbor.incomingRiver = direction.Opposite(); // neighbor.RefreshSelfOnly(); SetRoad((int)direction, false); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุฉ ุฃุฎุฑู ูููู ุฃู ุชุฌุนู ุงูุทุฑูู ุฎุงุทุฆูุง ูู ุชุบููุฑ ุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุชุนูู ุนูููุง ุงูุชุญูู ูู ุงูุทุฑู ูู ุฌููุน ุงูุงุชุฌุงูุงุช. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฑู ุงูุงุฑุชูุงุน ูุจูุฑูุง ุฌุฏูุง ุ ููุฌุจ ุญุฐู ุงูุทุฑูู ุงูููุฌูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Elevation { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> elevation; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; roads.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roads[i] &amp;&amp; GetElevationDifference((HexDirection)i) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { SetRoad(i, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); } } Refresh(); } }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฑูุฑ ุงูุทุฑูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฏูู ุงูุทุฑู ูุนูู ุชูุงููุง ูุซู ุชุญุฑูุฑ ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ูุฐูู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุฒู ุชุจุฏูู ูุงุญุฏ ุขุฎุฑ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุทุฑููุฉ ูุชุนููู ุญุงูุชู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> OptionalToggle riverMode, roadMode; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetRiverMode</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mode</span></span></span><span class="hljs-function">)</span></span> { riverMode = (OptionalToggle)mode; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetRoadMode</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mode</span></span></span><span class="hljs-function">)</span></span> { roadMode = (OptionalToggle)mode; }</code> </pre> <br><font style="vertical-align: inherit;"></font><code>EditCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุฏุนู </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุงูุขู ุงูุฅุฒุงูุฉ ุจุฅุถุงูุฉ ุทุฑู. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุนูุฏ ุงูุณุญุจ ูุงูุฅููุงุช ุ ููููู ุชูููุฐ ุฃุญุฏ ุงูุฅุฌุฑุงุกูู ุงููุญุชูููู. </font><font style="vertical-align: inherit;">ูุญู ุจุตุฏุฏ ุฅุนุงุฏุฉ ููููุฉ ุงูููุฏ ููููุงู ุญุชู ุนูุฏ ุฅุฌุฑุงุก ุงูุณุญุจ ูุงูุฅููุงุช ุงูุตุญูุญูู ุ ูุชู ุงูุชุญูู ูู ุญุงูุฉ ููุง ุงูููุชุงุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyColor) { cell.Color = activeColor; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (applyElevation) { cell.Elevation = activeElevation; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (riverMode == OptionalToggle.No) { cell.RemoveRiver(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roadMode == OptionalToggle.No) { cell.RemoveRoads(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isDrag) { HexCell otherCell = cell.GetNeighbor(dragDirection.Opposite()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherCell) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (riverMode == OptionalToggle.Yes) { otherCell.SetOutgoingRiver(dragDirection); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (roadMode == OptionalToggle.Yes) { otherCell.AddRoad(dragDirection); } } } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุจุณุฑุนุฉ ุฅุถุงูุฉ ุดุฑูุท ุทุฑูู ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุนู ุทุฑูู ูุณุฎ ุดุฑูุท ุงูููุฑ ูุชุบููุฑ ุงูุทุฑููุฉ ุงูุชู ุชุณุชุฏุนููุง ุงูููุงุชูุญ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ูุงุฌูุฉ ูุณุชุฎุฏู ุนุงููุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูุฅุตูุงุญ ุฐูู ุ ููุช ุจุชุบููุฑ ุชุฎุทูุท ููุญุฉ ุงูุฃููุงู ูุชูุงุณุจ ููุญุงุช ุงูุทุฑู ูุงูุฃููุงุฑ ุงูุฃูุซุฑ ุฅุญูุงูุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0fd/de5/a8a/0fdde5a8a4abc86308b771f43b36bf4a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฌูุฉ ูุณุชุฎุฏู ููุทุฑู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููู ุงูุขู ุฃุณุชุฎุฏู ุณุทุฑูู ูู ุซูุงุซุฉ ุฎูุงุฑุงุช ููุฃููุงู ุ ูููุงู ูุณุงุญุฉ ูููู ุขุฎุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ุฃุถูุช ุนูุตุฑูุง ุจุงูููู ุงูุจุฑุชูุงูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a06/9c6/08d/a069c608dfe531a5e1b2a8c59fef5846.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e96/12a/499/e9612a49993e3a2d4cb20790186ecf02.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุณุฉ ุฃููุงู: ุงูุฃุตูุฑ ูุงูุฃุฎุถุฑ ูุงูุฃุฒุฑู ูุงูุจุฑุชูุงูู ูุงูุฃุจูุถ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุขู ุชุนุฏูู ุงูุทุฑู ุ ููููุง ุบูุฑ ูุฑุฆูุฉ ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ุงูููุชุด ููุชุฃูุฏ ูู ุนูู ูู ุดูุก.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/160/c4f/0e4/160c4f0e496acec2a2a2d739152a7cfa.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎููุฉ ุจูุง ุทุฑู ูู ุงูููุชุด. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุซููุซ ุงูุทุฑูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑุถ ุงูุทุฑู ุ ุชุญุชุงุฌ ุฅูู ุชุซููุซูุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุดุงุจู ูุฅูุดุงุก ุดุจูุฉ ููุฃููุงุฑ ุ ูู ูุธูุฑ ููุท ูู ูุฌุฑู ุงูููุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ ูู ุจุฅูุดุงุก ุชุธููู ููุงุณู ุฌุฏูุฏ ูุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูุทูุงุก ุณุทุญ ุงูุทุฑูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">Shader "Custom/Road" { Properties { _Color ("Color", Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) _MainTex ("Albedo (RGB)", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} _Glossiness ("Smoothness", Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.5</span></span> _Metallic ("Metallic", Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.0</span></span> } SubShader { Tags { "RenderType"="Opaque" } LOD <span class="hljs-number"><span class="hljs-number">200</span></span> CGPROGRAM #pragma surface surf Standard fullforwardshadows #pragma target <span class="hljs-number"><span class="hljs-number">3.0</span></span> sampler2D _MainTex; struct <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> { float2 uv_MainTex; }; half _Glossiness; half _Metallic; fixed4 _Color; <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { fixed4 c = fixed4(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); o.Albedo = c.rgb; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; } ENDCG } FallBack "Diffuse" }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ูุงุฏุฉ ุทุฑูู ุจุงุณุชุฎุฏุงู ูุฐุง ุงูุชุธููู. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/973/9e3/2b8/9739e32b82ad2148c559b8f7c4caa868.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑูู ูุงุฏู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุถุจุท ุงูุฌุงูุฒุฉ ููุฌุฒุก ุจุญูุซ ูุณุชูุจู ุดุจูุฉ ูุฑุนูุฉ ุฃุฎุฑู ูู ุงูุณุฏุงุณู ููุทุฑู. </font><font style="vertical-align: inherit;">ูุง ูุฌุจ ุฃู ุชููู ูุฐู ุงูุดุจูุฉ ุงูุธูุงู ููุฌุจ ุฃู ุชุณุชุฎุฏู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ููุท. </font><font style="vertical-align: inherit;">ุฃุณุฑุน ุทุฑููุฉ ููููุงู ุจุฐูู ูู ูู ุฎูุงู ูุซูู ุฌุงูุฒ - ุชูุฑุงุฑ ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุณุชุจุฏุงู ูุงุฏุชู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bf8/476/a9e/bf8476a9e950a13c69051a5cd43480c1.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a64/4d8/776/a644d8776f3c6f0ba64cf3aef666f475.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ุงููุงุฆูุงุช ุงููุฑุนูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุฃุถู ุฅูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู ุงูุนุงู </font></font><code>HexMesh roads</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุจุฅุฏุฑุงุฌู ูู </font></font><code>Triangulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุจุชูุตููู ูู ุงูููุชุด ุจูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexMesh terrain, rivers, roads; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { terrain.Clear(); rivers.Clear(); roads.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { Triangulate(cells[i]); } terrain.Apply(); rivers.Apply(); roads.Apply(); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a95/c0e/c2a/a95c0ec2ae59dccbb249e6a02ccdc7c5.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆู ุงูุทุฑู ูุชุตู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑู ุจูู ุงูุฎูุงูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ูููู ูุธุฑุฉ ุฃููุงู ุนูู ุฃุฌุฒุงุก ุงูุทุฑูู ุจูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุซู ุงูุฃููุงุฑ ุ ูุชู ุฅุบูุงู ุงูุทุฑู ุจูุงุณุทุฉ ุงุซููู ูุชูุณุทุฉ ุฑุจุงุนูุฉ. </font><font style="vertical-align: inherit;">ูุญู ูุบุทู ูุฐู ุงูุฒูุงูุง ุงูุฃุฑุจุนุฉ ุจุงููุงูู ุจุฃุฑุจุนุฉ ุฒูุงูุง ููุทุฑู ุจุญูุซ ูููู ุงุณุชุฎุฏุงู ููุงุถุน ุงูููู ุงูุณุชุฉ ููุณูุง. </font><font style="vertical-align: inherit;">ุฃุถู ููุฐุง </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุณููุจ </font></font><code>TriangulateRoadSegment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoadSegment</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, Vector3 v5, Vector3 v6 </span></span></span><span class="hljs-function">)</span></span> { roads.AddQuad(v1, v2, v4, v5); roads.AddQuad(v2, v3, v5, v6); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูู ูุนุฏ ุจุญุงุฌุฉ ููููู ุจุดุฃู ุชุฏูู ุงูููุงู ุ ูุฅู ุฅุญุฏุงุซูุงุช V ุบูุฑ ูุทููุจุฉ ุ ูุฐูู ูุฅููุง ูุนูููุง ุงููููุฉ 0 ูู ูู ููุงู. ูููููุง ุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช U ูุชูุถูุญ ูุง ุฅุฐุง ููุง ูู ููุชุตู ุงูุทุฑูู ุฃู ุนูู ุงูุฌุงูุจ. </font><font style="vertical-align: inherit;">ุฏุนูุง ุชุณุงูู 1 ูู ุงูููุชุตู ุ ูุชุณุงูู 0 ูู ููุง ุงูุฌุงูุจูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoadSegment</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 v1, Vector3 v2, Vector3 v3, Vector3 v4, Vector3 v5, Vector3 v6 </span></span></span><span class="hljs-function">)</span></span> { roads.AddQuad(v1, v2, v4, v5); roads.AddQuad(v2, v3, v5, v6); roads.AddQuadUV(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); roads.AddQuadUV(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/26a/730/868/26a73086896099b06098de0a25eb63ae.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฒุก ูู ุงูุทุฑูู ุจูู ุงูุฎูุงูุง. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุทูู ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ </font></font><code>TriangulateEdgeStrip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ููุท ุฅุฐุง ูุงู ููุงู ุทุฑูู ุจุงููุนู. </font><font style="vertical-align: inherit;">ุฃุถู ูุนููุฉ ููุทููุฉ ุฅูู ุงูุทุฑููุฉ ูุชูุฑูุฑ ูุฐู ุงููุนูููุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeStrip</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices e1, Color c1, EdgeVertices e2, Color c2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoad </span></span></span><span class="hljs-function">)</span></span> { โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ุณูุชููู ุงูุขู ุฃุฎุทุงุก ุงููุชุฑุฌู ุ ูุฃูู ุญุชู ุงูุขู ูู ูุชู ุฅุฑุณุงู ูุฐู ุงููุนูููุงุช ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ูุญุฌุฉ ุฃุฎูุฑุฉ ูู ุฌููุน ุงูุญุงูุงุช ุ </font></font><code>TriangulateEdgeStrip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฅุถุงูุฉ </font><font style="vertical-align: inherit;">ุงูููุงููุฉ </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูููููุง ุฃูุถูุง ุฃู ูุนูู ุฃู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููุฐู ุงููุนููุฉ ูุชุณุงููุฉ </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณุชุตุจุญ ุงููุนููุฉ ุงุฎุชูุงุฑูุฉ ูุณุชุฎุชูู ุฃุฎุทุงุก ุงูุชุฑุฌูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeStrip</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices e1, Color c1, EdgeVertices e2, Color c2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoad = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> { โฆ }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุนูู ุงููุนููุงุช ุงูุงุฎุชูุงุฑูุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">        ,   . ,  <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyMethod</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y; }</code> </pre> <br>    <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyMethod</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyMethod</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MyMethod(x, <span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyMethod</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MyMethod(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>}; }</code> </pre> <br>   .      .    .      . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุซููุซ ุงูุทุฑูู ุ ูุง ุนููู ุณูู ุงูุงุชุตุงู </font></font><code>TriangulateRoadSegment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูููู ุงูุณุชุฉ ุงููุณุทู ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeStrip</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices e1, Color c1, EdgeVertices e2, Color c2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoad = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> { terrain.AddQuad(e1.v1, e1.v2, e2.v1, e2.v2); terrain.AddQuadColor(c1, c2); terrain.AddQuad(e1.v2, e1.v3, e2.v2, e2.v3); terrain.AddQuadColor(c1, c2); terrain.AddQuad(e1.v3, e1.v4, e2.v3, e2.v4); terrain.AddQuadColor(c1, c2); terrain.AddQuad(e1.v4, e1.v5, e2.v4, e2.v5); terrain.AddQuadColor(c1, c2); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasRoad) { TriangulateRoadSegment(e1.v2, e1.v3, e1.v4, e2.v2, e2.v3, e2.v4); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุชุนุงูู ุจูุง ูุน ุงุชุตุงูุงุช ุงูุฎูุงูุง ุงููุณุทุญุฉ. </font><font style="vertical-align: inherit;">ูุฏุนู ุงูุทุฑู ุนูู ุงูุญูุงู ุ ูุญุชุงุฌ ุฃูุถูุง ุฅูู ูุนุฑูุฉ </font></font><code>TriangulateEdgeTerraces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุฅุถุงูุฉ ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ููููู ุจุจุณุงุทุฉ ููู ูุฐู ุงููุนูููุงุช </font></font><code>TriangulateEdgeStrip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices begin, HexCell beginCell, EdgeVertices end, HexCell endCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoad </span></span></span><span class="hljs-function">)</span></span> { EdgeVertices e2 = EdgeVertices.TerraceLerp(begin, end, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c2 = HexMetrics.TerraceLerp(beginCell.Color, endCell.Color, <span class="hljs-number"><span class="hljs-number">1</span></span>); TriangulateEdgeStrip(begin, beginCell.Color, e2, c2, hasRoad); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { EdgeVertices e1 = e2; Color c1 = c2; e2 = EdgeVertices.TerraceLerp(begin, end, i); c2 = HexMetrics.TerraceLerp(beginCell.Color, endCell.Color, i); TriangulateEdgeStrip(e1, c1, e2, c2, hasRoad); } TriangulateEdgeStrip(e2, c2, end, endCell.Color, hasRoad); }</code> </pre> <br> <code>TriangulateEdgeTerraces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนุง ุจุงูุฏุงุฎู </font></font><code>TriangulateConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููููุง ููุง ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ููุงู ุจุงููุนู ุทุฑูู ูุณูุฑ ูู ุงูุงุชุฌุงู ุงูุญุงูู ุ ุณูุงุก ุนูุฏ ุชุซููุซ ุญุงูุฉ ูุง ุฃู ุนูุฏ ุชุซููุซ ุงูุญูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.GetEdgeType(direction) == HexEdgeType.Slope) { TriangulateEdgeTerraces( e1, cell, e2, neighbor, cell.HasRoadThroughEdge(direction) ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateEdgeStrip( e1, cell.Color, e2, neighbor.Color, cell.HasRoadThroughEdge(direction) ); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d7a/67d/e7d/d7a67de7d2edeb2d23b63e9b37bc7508.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฌุฒุงุก ุงูุทุฑูู ุจูู ุงูุฎูุงูุง.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎููุฉ ุนูู ุชูุฏูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุฑุณู ุงูุทุฑู ุ ุณุชุฑู ุฃู ุฃุฌุฒุงุก ุงูุทุฑูู ุชุธูุฑ ุจูู ุงูุฎูุงูุง. ุณูููู ููุชุตู ูุฐู ุงูุฃุฌุฒุงุก ุจุงูููู ุงูุฃุฑุฌูุงูู ูุน ุงูุชูุงู ุฅูู ุงูููู ุงูุฃุฒุฑู ุนูุฏ ุงูุญูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุนูุฏ ุชุญุฑูู ุงููุงููุฑุง ุ ูุฏ ุชููุถ ุงูุฃุฌุฒุงุก ุ ูุฃุญูุงููุง ุชุฎุชูู ุชูุงููุง. ูุฐูู ูุฃู ูุซูุซุงุช ุงูุทุฑู ุชุชุฏุงุฎู ุชูุงููุง ูุน ูุซูุซุงุช ุงูุชุถุงุฑูุณ. ูุชู ุชุญุฏูุฏ ูุซูุซุงุช ุงูุนุฑุถ ุจุดูู ุนุดูุงุฆู. ูููู ุฅุตูุงุญ ูุฐู ุงููุดููุฉ ุนูู ูุฑุญูุชูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ ูุฑูุฏ ุฑุณู ุงูุทุฑู ุจุนุฏ ุฑุณู ุงูุฅุบุงุซุฉ. ูููู ุชุญููู ุฐูู ูู ุฎูุงู ุชูุฏูููุง ุจุนุฏ ุชูุฏูู ุงูููุฏุณุฉ ุงููุนุชุงุฏุฉ ุ ุฃู ุนู ุทุฑูู ูุถุนูุง ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุนุฑุถ ูุงุญูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs objectivec"> Tags { <span class="hljs-string"><span class="hljs-string">"RenderType"</span></span>=<span class="hljs-string"><span class="hljs-string">"Opaque"</span></span> <span class="hljs-string"><span class="hljs-string">"Queue"</span></span> = <span class="hljs-string"><span class="hljs-string">"Geometry+1"</span></span> }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูููุง ุ ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฑุณู ุงูุทุฑู ููู ูุซูุซุงุช ุงูุชุถุงุฑูุณ ูู ููุณ ุงูููุถุน. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ุฅุฒุงุญุฉ ุงุฎุชุจุงุฑ ุงูุนูู. </font><font style="vertical-align: inherit;">ุณูุณูุญ ููุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณููุงุช ุจุงูุชุฑุงุถ ุฃู ุงููุซูุซุงุช ุฃูุฑุจ ุฅูู ุงููุงููุฑุง ููุง ูู ุนููู ุจุงููุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell"> Tags { <span class="hljs-string"><span class="hljs-string">"RenderType"</span></span>=<span class="hljs-string"><span class="hljs-string">"Opaque"</span></span> <span class="hljs-string"><span class="hljs-string">"Queue"</span></span> = <span class="hljs-string"><span class="hljs-string">"Geometry+1"</span></span> } LOD <span class="hljs-number"><span class="hljs-number">200</span></span> Offset <span class="hljs-literal"><span class="hljs-literal">-1</span></span>, <span class="hljs-literal"><span class="hljs-literal">-1</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑู ุนุจุฑ ุงูุฎูุงูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุชุซููุซ ุงูุฃููุงุฑ ุ ูุงู ุนูููุง ุงูุชุนุงูู ูุน ุฃูุซุฑ ูู ุงุชุฌุงููู ููููุฑ ููู ุฎููุฉ. ูููููุง ุชุญุฏูุฏ ุฎูุณุฉ ุฎูุงุฑุงุช ููููุฉ ูุชุซููุซูุง ุจุดูู ูุฎุชูู ูุฅูุดุงุก ุงูุฃููุงุฑ ุงูููุงุณุจุฉ. ููุน ุฐูู ุ ูู ุญุงูุฉ ุงูุทุฑู ุ ููุงู ุฃุฑุจุนุฉ ุนุดุฑ ุฎูุงุฑูุง ูููููุง. ูู ูุณุชุฎุฏู ููุงูุฌ ูููุตูุฉ ููู ูู ูุฐู ุงูุฎูุงุฑุงุช. ุจุฏูุงู ูู ุฐูู ุ ุณูููู ุจูุนุงูุฌุฉ ูู ุงุชุฌุงู ูู ุงุชุฌุงูุงุช ุงูุฎูุงูุง ุงูุณุช ุจููุณ ุงูุทุฑููุฉ ุ ุจุบุถ ุงููุธุฑ ุนู ุชูููู ุงูุทุฑูู ุงููุญุฏุฏ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชูุฑ ุทุฑูู ุนูู ุทูู ุฌุฒุก ูู ุงูุฎููุฉ ุ ุณูุฑุณููุง ูุจุงุดุฑุฉ ุฅูู ูุฑูุฒ ุงูุฎููุฉ ุ ุฏูู ูุบุงุฏุฑุฉ ููุทูุฉ ุงููุซูุซุงุช. ุณูุฑุณู ุฌุฒุกูุง ูู ุงูุทุฑูู ูู ุงูุญุงูุฉ ุฅูู ุงููุตู ูู ุงุชุฌุงู ุงููุฑูุฒ. ุซู ูุณุชุฎุฏู ูุซูุซูู ูุฅุบูุงู ุงูุจุงูู ุฅูู ุงููุฑูุฒ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/df0/659/a13/df0659a13206731d401579ba8c7f3b8f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุซููุซ ุฌุฒุก ูู ุงูุทุฑูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุซููุซ ูุฐุง ุงููุฎุทุท ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูุฑูุฒ ุงูุฎููุฉ ูุงูุฑุคูุณ ุงููุณุทู ุงููุณุฑู ูุงููููู ูุฑุคูุณ ุงูุญุงูุฉ. </font><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ </font></font><code>TriangulateRoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงููุนููุงุช ุงูููุงุณุจุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 center, Vector3 mL, Vector3 mR, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจูุงุก ุฌุฒุก ูู ุงูุทุฑูู ุ ูุญุชุงุฌ ุฅูู ุฐุฑูุฉ ุฅุถุงููุฉ. </font><font style="vertical-align: inherit;">ููู ุชูุน ุจูู ุงูููู ุงููุณุทู ุงููุณุฑู ูุงููููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 center, Vector3 mL, Vector3 mR, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { Vector3 mC = Vector3.Lerp(mL, mR, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); TriangulateRoadSegment(mL, mC, mR, e.v2, e.v3, e.v4); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูููููุง ุฃูุถูุง ุฅุถุงูุฉ ุงููุซูุซูู ุงููุชุจูููู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> TriangulateRoadSegment(mL, mC, mR, e.v2, e.v3, e.v4); roads.AddTriangle(center, mL, mC); roads.AddTriangle(center, mC, mR);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุฅุถุงูุฉ ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูููุซูุซุงุช. </font><font style="vertical-align: inherit;">ุงุซูุงู ูู ูููููุง ูู ููุชุตู ุงูุทุฑูู ุ ูุงูุจุงูู ุนูู ุงูุญุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> roads.AddTriangle(center, mL, mC); roads.AddTriangle(center, mC, mR); roads.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>) ); roads.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>) );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ุฏุนูุง ููุชุตุฑ ุนูู ุงูุฎูุงูุง ุงูุชู ูุง ุชูุฌุฏ ูููุง ุฃููุงุฑ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุงุช ุ </font></font><code>Triangulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎูู ุจุจุณุงุทุฉ ูุฑูุญุฉ ูู ุงููุซูุซุงุช. </font><font style="vertical-align: inherit;">ุงููู ูุฐุง ุงูุฑูุฒ ุฅูู ุทุฑููุฉ ูููุตูุฉ. </font><font style="vertical-align: inherit;">ุซู ูุถูู ููุงููุฉ </font></font><code>TriangulateRoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูููู ุงูุทุฑูู ุจุงููุนู. </font><font style="vertical-align: inherit;">ูููู ุงูุนุซูุฑ ุนูู ุงูููู ุงููุณุทู ุงููุณุฑู ูุงููููู ูู ุฎูุงู ุงูุงุณุชููุงู ุจูู ุงููุฑูุฒ ูููุชูู ุงูุฒุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangulate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiver) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateWithoutRiver(direction, cell, center, e); } โฆ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithoutRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { TriangulateEdgeFan(center, e, cell.Color); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRoadThroughEdge(direction)) { TriangulateRoad( center, Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), e ); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/29d/ae4/def/29dae4def1f841ae190e64b267f6e4ea.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุงูุชู ุชูุฑ ุจุงูุฎูุงูุง.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุถููุน ุงูุทุฑูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุขู ุฑุคูุฉ ุงูุทุฑู ุ ูููู ุฃูุฑุจ ุฅูู ูุฑูุฒ ุงูุฎูุงูุง ุงูุชู ุชุถูู. ูุธุฑูุง ูุฃููุง ูุง ูุชุญูู ูู ุงูุฎูุงุฑุงุช ุงูุฃุฑุจุนุฉ ุนุดุฑ ุงูุชู ูุชุนุงูู ูุนูุง ุ ููุง ูููููุง ุชุบููุฑ ูุฑูุฒ ุงูุทุฑูู ูุฅูุดุงุก ุฃุดูุงู ุฃูุซุฑ ุฌูุงููุง. ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุฅุถุงูุฉ ุญูุงู ุทุฑูู ุฅุถุงููุฉ ูู ุฃุฌุฒุงุก ุฃุฎุฑู ูู ุงูุฎููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชูุฑ ุงูุทุฑู ุนุจุฑ ุงูุฎููุฉ ุ ูููู ููุณ ูู ุงูุงุชุฌุงู ุงูุญุงูู ุ ุณูุถูู ูุซูุซูุง ุฅูู ุญูุงู ุงูุทุฑูู. ูุชู ุชุนุฑูู ูุฐุง ุงููุซูุซ ุจูุงุณุทุฉ ุงูููู ุงููุณุทู ุงููุณุฑู ูุงููููู. ูู ูุฐู ุงูุญุงูุฉ ุ ุชูุน ุงูููุฉ ุงููุฑูุฒูุฉ ููุท ูู ููุชุตู ุงูุทุฑูู. ุงูุงุซูุงู ุงูุขุฎุฑุงู ููุนุงู ุนูู ุถูุนูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoadEdge</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 center, Vector3 mL, Vector3 mR</span></span></span><span class="hljs-function">)</span></span> { roads.AddTriangle(center, mL, mR); roads.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>) ); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bd1/293/6ec/bd12936ec0833f7d7da4e038158bb167.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฒุก ูู ุญุงูุฉ ุงูุทุฑูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุชุงุฌ ุฅูู ุชุซููุซ ุทุฑูู ูุงูู ุฃู ูุฌุฑุฏ ุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุชุฑูู ู </font></font><code>TriangulateRoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุฌุจ ุฃู ุชุนุฑู ูุฐู ุงูุทุฑููุฉ ูุง ุฅุฐุง ูุงูุช ุงูุทุฑูู ุชูุฑ ุนุจุฑ ุงุชุฌุงู ุญุงูุฉ ุงูุฎููุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุถูู ูุนููุฉ ููุฐุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoad</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 center, Vector3 mL, Vector3 mR, EdgeVertices e, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoadThroughCellEdge </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasRoadThroughCellEdge) { Vector3 mC = Vector3.Lerp(mL, mR, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); TriangulateRoadSegment(mL, mC, mR, e.v2, e.v3, e.v4); roads.AddTriangle(center, mL, mC); roads.AddTriangle(center, mC, mR); roads.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>) ); roads.AddTriangleUV( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>) ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateRoadEdge(center, mL, mR); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู </font></font><code>TriangulateWithoutRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชุนูู ุนูููุง ุงูุงุชุตุงู </font></font><code>TriangulateRoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชูุฑ ุฃู ุทุฑู ุนุจุฑ ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูุณูุชุนูู ุนููู ุฅุฑุณุงู ูุนูููุงุช ุญูู ูุง ุฅุฐุง ูุงูุช ุงูุทุฑูู ุชูุฑ ุนุจุฑ ุงูุญุงูุฉ ุงูุญุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithoutRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { TriangulateEdgeFan(center, e, cell.Color); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRoads) { TriangulateRoad( center, Vector3.Lerp(center, e.v1, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), Vector3.Lerp(center, e.v5, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>), e, cell.HasRoadThroughEdge(direction) ); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/89e/f99/1a0/89ef991a0790911d140b68b1457fb9df.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุฐุงุช ุงูุฃุถูุงุน ุงูููุชููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูููุฏ ุงูุทุฑูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชููุช ุงูุทุฑู ุงูุขู. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุฎูู ูุฐุง ุงูููุฌ ุงูุชูุงุฎุงุช ูู ูุณุท ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ุฅู ูุถุน ุงูููู ุงููุณุฑู ูุงููููู ูู ุงูููุชุตู ุจูู ุงููุฑูุฒ ูุงูุฒูุงูุง ููุงุณุจูุง ุนูุฏูุง ูููู ููุงู ุทุฑูู ูุฌุงูุฑ ููุง. </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ูู ููู ูุฐูู ุ ูููุงู ุงูุชูุงุฎ. </font><font style="vertical-align: inherit;">ูุชุฌูุจ ุฐูู ุ ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูููููุง ูุถุน ุงูููู ุจุงููุฑุจ ูู ุงููุฑูุฒ. </font><font style="vertical-align: inherit;">ุจุดูู ุฃูุซุฑ ุชุญุฏูุฏุง ุ ุซู ุงูุงุณุชููุงุก ยผ ุ ูููุณ with. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ููุดุฆ ุทุฑููุฉ ูููุตูุฉ ููุนุฑูุฉ ุฃู ูู ุงููุชูุงุนูุงุช ุงูุชู ูุฌุจ ุงุณุชุฎุฏุงููุง. </font><font style="vertical-align: inherit;">ูุธุฑูุง ููุฌูุฏ ุงุซููู ูููู ุ ูููููุง ูุถุน ุงููุชูุฌุฉ </font></font><code>Vector2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูููู ุงููููู X ูู ููุญููููู ููููุทุฉ ุงููุณุฑู ุ ูุงููููู Y ุณูููู ููุญููููููุง ููููุทุฉ ุงููููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRoadInterpolators</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector2 interpolators; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> interpolators; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ูุงู ููุงู ุทุฑูู ูุณูุฑ ูู ุงูุงุชุฌุงู ุงูุญุงูู ุ ููููููุง ูุถุน ุงูููุงุท ูู ุงูููุชุตู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRoadInterpolators</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector2 interpolators; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRoadThroughEdge(direction)) { interpolators.x = interpolators.y = <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> interpolators; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูุฏ ุชููู ุงูุฎูุงุฑุงุช ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููููุทุฉ ุงููุณุฑู ุ ูููููุง ุงุณุชุฎุฏุงู ยฝ ุฅุฐุง ูุงู ููุงู ุทุฑูู ูุณูุฑ ูู ุงูุงุชุฌุงู ุงูุณุงุจู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ููุฌุจ ุนูููุง ุงุณุชุฎุฏุงู ยผ. </font><font style="vertical-align: inherit;">ุงูุฃูุฑ ููุณู ููุทุจู ุนูู ุงูููุทุฉ ุงูุตุญูุญุฉ ุ ูููู ูุน ูุฑุงุนุงุฉ ุงูุงุชุฌุงู ุงูุชุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRoadInterpolators</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexDirection direction, HexCell cell</span></span></span><span class="hljs-function">)</span></span> { Vector2 interpolators; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRoadThroughEdge(direction)) { interpolators.x = interpolators.y = <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { interpolators.x = cell.HasRoadThroughEdge(direction.Previous()) ? <span class="hljs-number"><span class="hljs-number">0.5f</span></span> : <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; interpolators.y = cell.HasRoadThroughEdge(direction.Next()) ? <span class="hljs-number"><span class="hljs-number">0.5f</span></span> : <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> interpolators; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุงูุขู ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ ูุชุญุฏูุฏ ุฃู interpolators ุงููุณุชุฎุฏูุฉ. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐุง ุ ุณูุชู ุชูููุฏ ุงูุทุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithoutRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { TriangulateEdgeFan(center, e, cell.Color); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRoads) { Vector2 interpolators = GetRoadInterpolators(direction, cell); TriangulateRoad( center, Vector3.Lerp(center, e.v1, interpolators.x), Vector3.Lerp(center, e.v5, interpolators.y), e, cell.HasRoadThroughEdge(direction) ); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3c9/d0b/d12/3c9d0bd1262c2d47a3efc2d300212efd.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/84c/5fa/4f8/84c5fa4f8ef27bd4f6d294d0bf50acf6.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ุณูุณุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฒูุฌ ูู ุงูุฃููุงุฑ ูุงูุทุฑู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุฑุญูุฉ ุงูุญุงููุฉ ุ ูุฏููุง ุทุฑู ูุธูููุฉ ุ ูููู ููุท ุฅุฐุง ูู ููู ููุงู ุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ููุฑ ูู ุงูุฒูุฒุงูุฉ ุ ููู ูุชู ุชุซููุซ ุงูุทุฑู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f5e/76f/814/f5e76f814407359057d0c1bb1688988c.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชูุฌุฏ ุทุฑู ุจุงููุฑุจ ูู ุงูุฃููุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุทุฑููุฉ </font></font><code>TriangulateRoadAdjacentToRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุนุงูู ูุน ูุฐุง ุงููููู. </font><font style="vertical-align: inherit;">ูุถุนู ุนูู ุงููุนููุงุช ุงููุนุชุงุฏุฉ. </font><font style="vertical-align: inherit;">ุณูู ูุณูููุง ูู ุจุฏุงูุฉ ุงูุทุฑููุฉ </font></font><code>TriangulateAdjacentToRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateAdjacentToRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRoads) { TriangulateRoadAdjacentToRiver(direction, cell, center, e); } โฆ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoadAdjacentToRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณููุนู ุงูุดูุก ููุณู ุจุงููุณุจุฉ ููุทุฑู ุงูุชู ูุง ุชุญุชูู ุนูู ุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุณูู ูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุทุฑูู ููุฑ ุนุจุฑ ุงูุญุงูุฉ ุงูุญุงููุฉ ุ ููุญุตู ุนูู interpolators ุ ูููุดุฆ ููู ูุชูุณุทุฉ ููุชุตู </font></font><code>TriangulateRoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ูุธุฑูุง ูุฃู ุงูุฃููุงุฑ ุณุชุธูุฑ ุนูู ุงููุณุงุฑ ุ ููุญู ุจุญุงุฌุฉ ุฅูู ููู ุงูุทุฑู ุจุนูุฏูุง ุนููุง. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณูููู ูุฑูุฒ ุงูุทุฑูู ูู ูุถุน ูุฎุชูู. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุชุบูุฑ ูุชุฎุฒูู ูุฐุง ุงููููู ุงูุฌุฏูุฏ </font></font><code>roadCenter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ุณุชููู ูุณุงููุฉ ููุฑูุฒ ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateRoadAdjacentToRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> hasRoadThroughEdge = cell.HasRoadThroughEdge(direction); Vector2 interpolators = GetRoadInterpolators(direction, cell); Vector3 roadCenter = center; Vector3 mL = Vector3.Lerp(roadCenter, e.v1, interpolators.x); Vector3 mR = Vector3.Lerp(roadCenter, e.v5, interpolators.y); TriangulateRoad(roadCenter, mL, mR, e, hasRoadThroughEdge); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุณููุดุฆ ุทุฑููุง ุฌุฒุฆูุฉ ูู ุงูุฎูุงูุง ุฐุงุช ุงูุฃููุงุฑ. </font><font style="vertical-align: inherit;">ุงูุงุชุฌุงูุงุช ุงูุชู ุชูุฑ ูู ุฎูุงููุง ุงูุฃููุงุฑ ุณุชูุทุน ุงููุฌูุงุช ูู ุงูุทุฑู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/95e/029/595/95e0295954967415965a3992ffd91882.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุฐุงุช ุงููุณุงุญุงุช.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฏุงูุฉ ุงูููุฑ ุฃู ููุงูุชู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ููุธุฑ ุฃููุงู ุฅูู ุงูุฎูุงูุง ุงูุชู ุชุญุชูู ุนูู ุจุฏุงูุฉ ุงูููุฑ ุฃู ููุงูุชู. </font><font style="vertical-align: inherit;">ุญุชู ูุง ุชุชุฏุงุฎู ุงูุทุฑู ูุน ุงููุงุก ุ ุฏุนูุง ูููู ูุฑูุฒ ุงูุทุฑูู ูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ููุญุตูู ุนูู ุงุชุฌุงู ุงูููุฑ ุงููุงุฑุฏ ุฃู ุงูุตุงุฏุฑ ุ ุฃุถู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexDirection RiverBeginOrEndDirection { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasIncomingRiver ? incomingRiver : outgoingRiver; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุณุชุฎุฏุงู ูุฐู ุงูุฎุงุตูุฉ </font></font><code>HexGridChunk.TriangulateRoadAdjacentToRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฑูู ูุฑูุฒ ุงูุทุฑูู ูู ุงูุงุชุฌุงู ุงููุนุงูุณ. </font><font style="vertical-align: inherit;">ุณูููู ูุงููุงู ูุชุญุฑูู ุงูุซูุซ ุฅูู ุงูุถูุน ุงูุฃูุณุท ูู ูุฐุง ุงูุงุชุฌุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> hasRoadThroughEdge = cell.HasRoadThroughEdge(direction); Vector2 interpolators = GetRoadInterpolators(direction, cell); Vector3 roadCenter = center; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverBeginOrEnd) { roadCenter += HexMetrics.GetSolidEdgeMiddle( cell.RiverBeginOrEndDirection.Opposite() ) * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); } Vector3 mL = Vector3.Lerp(roadCenter, e.v1, interpolators.x); Vector3 mR = Vector3.Lerp(roadCenter, e.v5, interpolators.y); TriangulateRoad(roadCenter, mL, mR, e, hasRoadThroughEdge);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f18/12b/280/f1812b2807add77e4d173b85ad65e4da.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ูุนุฏูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ูุญุชุงุฌ ุฅูู ุณุฏ ุงููุฌูุงุช. </font><font style="vertical-align: inherit;">ุณูููู ุจุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ูุซูุซุงุช ุฅุถุงููุฉ ุฅูู ุญูุงู ุงูุทุฑูู ุนูุฏูุง ูููู ูุฑูุจูู ูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ููุฑ ูู ุงูุงุชุฌุงู ุงูุณุงุจู ุ ูุฅููุง ูุถูู ูุซูุซูุง ุจูู ูุฑูุฒ ุงูุทุฑูู ููุฑูุฒ ุงูุฎููุฉ ูููุทุฉ ุงููุณุท ุงููุณุฑู. </font><font style="vertical-align: inherit;">ูุฅุฐุง ูุงู ุงูููุฑ ูู ุงูุงุชุฌุงู ุงูุชุงูู ุ ูุฅููุง ูุถูู ูุซูุซูุง ุจูู ูุฑูุฒ ุงูุทุฑูู ูุงูููุทุฉ ุงููููู ุงููุณุทู ููุฑูุฒ ุงูุฎููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณููุนู ุฐูู ุจุบุถ ุงููุธุฑ ุนู ุชูููู ุงูููุฑ ุ ูุฐูู ุถุน ูุฐุง ุงูุฑูุฒ ูู ููุงูุฉ ุงูุทุฑููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 mL = Vector3.Lerp(roadCenter, e.v1, interpolators.x); Vector3 mR = Vector3.Lerp(roadCenter, e.v5, interpolators.y); TriangulateRoad(roadCenter, mL, mR, e, hasRoadThroughEdge); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Previous())) { TriangulateRoadEdge(roadCenter, center, mL); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverThroughEdge(direction.Next())) { TriangulateRoadEdge(roadCenter, mR, center); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ููููู ุงุณุชุฎุฏุงู ุจูุงู ุขุฎุฑุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">      .   ,     . </div></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/93d/485/bc8/93d485bc8072e6fa8471fb98d084467a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ุฌุงูุฒุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃููุงุฑ ุงููุณุชูููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุชุจุฑ ุงูุฎูุงูุง ุฐุงุช ุงูุฃููุงุฑ ุงููุณุชูููุฉ ุตุนุจุฉ ุจุดูู ุฎุงุต ูุฃููุง ุชูุณู ูุฑูุฒ ุงูุฎููุฉ ุฅูู ูุณููู. </font><font style="vertical-align: inherit;">ููุฏ ุฃุถููุง ุจุงููุนู ูุซูุซุงุช ุฅุถุงููุฉ ูููุก ุงููุฌูุงุช ุจูู ุงูุฃููุงุฑ ุ ูููู ุนูููุง ุฃูุถูุง ูุตู ุงูุทุฑู ุงูููุฌูุฏุฉ ุนูู ุฌุงูุจู ุงูููุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ab6/203/055/ab62030558305530ed4aed038669ba9c.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฏุงุฎู ุงูุทุฑู ูุน ููุฑ ูุณุชููู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ููุฎููุฉ ุจุฏุงูุฉ ุฃู ููุงูุฉ ุงูููุฑ ุ ููููููุง ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฃููุงุฑ ุงููุงุฑุฏุฉ ูุงูุตุงุฏุฑุฉ ุชุณูุฑ ูู ุงุชุฌุงููู ูุชุนุงูุณูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุฏููุง ููุฑ ูุจุงุดุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverBeginOrEnd) { roadCenter += HexMetrics.GetSolidEdgeMiddle( cell.RiverBeginOrEndDirection.Opposite() ) * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Opposite()) { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ููุงู ุงูููุฑ ุจุงููุณุจุฉ ููุงุชุฌุงู ุงูุญุงูู ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุงูุงุชุฌุงูุงุช ุงููุฌุงูุฑุฉ. </font><font style="vertical-align: inherit;">ุงูููุฑ ุฅูุง ูุณุงุฑูุง ุฃู ูููููุง. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูููู ุจุฐูู ูู ููุงูุฉ ุงูุทุฑููุฉ ุ ูุฅููุง ูููู ุจุชุฎุฒูู ูุฐู ุงูุทูุจุงุช ูู ูุชุบูุฑุงุช ููุทููุฉ. </font><font style="vertical-align: inherit;">ุณูุคุฏู ุฐูู ุฃูุถูุง ุฅูู ุชุจุณูุท ูุฑุงุกุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> hasRoadThroughEdge = cell.HasRoadThroughEdge(direction); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> previousHasRiver = cell.HasRiverThroughEdge(direction.Previous()); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> nextHasRiver = cell.HasRiverThroughEdge(direction.Next()); Vector2 interpolators = GetRoadInterpolators(direction, cell); Vector3 roadCenter = center; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverBeginOrEnd) { roadCenter += HexMetrics.GetSolidEdgeMiddle( cell.RiverBeginOrEndDirection.Opposite() ) * (<span class="hljs-number"><span class="hljs-number">1f</span></span> / <span class="hljs-number"><span class="hljs-number">3f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Opposite()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver) { } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { } } Vector3 mL = Vector3.Lerp(roadCenter, e.v1, interpolators.x); Vector3 mR = Vector3.Lerp(roadCenter, e.v5, interpolators.y); TriangulateRoad(roadCenter, mL, mR, e, hasRoadThroughEdge); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver) { TriangulateRoadEdge(roadCenter, center, mL); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextHasRiver) { TriangulateRoadEdge(roadCenter, mR, center); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุชุญููู ูุฑูุฒ ุงูุทุฑูู ุฅูู ูุชุฌู ุฒุงูู ูุดูุฑ ูู ุงูุงุชุฌุงู ุงููุนุงูุณ ูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูููุฑ ููุฑ ูู ุฎูุงู ุงูุงุชุฌุงู ุงูุณุงุจู ุ ููุฐู ูู ุงูุฒุงููุฉ ุงูุตูุจุฉ ุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูุฐู ูู ุงูุฒุงููุฉ ุงูุตูุจุฉ ุงูุฃููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Opposite()) { Vector3 corner; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver) { corner = HexMetrics.GetSecondSolidCorner(direction); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { corner = HexMetrics.GetFirstSolidCorner(direction); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฑูู ุงูุทุฑูู ุจุญูุซ ูููู ูุฌุงูุฑูุง ููููุฑ ุ ูุญุชุงุฌ ุฅูู ุชุญุฑูู ูุฑูุฒ ุงูุทุฑูู ูุตู ุงููุณุงูุฉ ุฅูู ูุฐุง ุงูุฑูู. </font><font style="vertical-align: inherit;">ุซู ุนูููุง ุฃูุถูุง ุชุญุฑูู ูุฑูุฒ ุงูุฎููุฉ ุฑุจุน ุงููุณุงูุฉ ูู ูุฐุง ุงูุงุชุฌุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Opposite()) { Vector3 corner; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver) { corner = HexMetrics.GetSecondSolidCorner(direction); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { corner = HexMetrics.GetFirstSolidCorner(direction); } roadCenter += corner * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; center += corner * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e4c/6bf/85b/e4c6bf85b3120697996ad75a3256a3a0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ููุณูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุงุฑููุง ุดุจูุฉ ูู ุงูุทุฑู ุฏุงุฎู ูุฐู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุทุจูุนู ุนูุฏูุง ุชููู ุงูุทุฑู ุนูู ุฌุงูุจู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ูู ููู ููุงู ุทุฑูู ุนูู ุฌุงูุจ ูุงุญุฏ ุ ูุณูููู ูุฏููุง ุฌุฒุก ุตุบูุฑ ูู ุทุฑูู ูุนุฒูู. </font><font style="vertical-align: inherit;">ูุฐุง ุบูุฑ ููุทูู ุ ูุฐูู ุฏุนููุง ูุชุฎูุต ูู ูุฐู ุงูุฃุฌุฒุงุก. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃูุฏ ูู ูุฌูุฏ ุทุฑูู ูุณูุฑ ูู ุงูุงุชุฌุงู ุงูุญุงูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ูุชุญูู ูู ุงูุงุชุฌุงู ุงูุขุฎุฑ ูููุณ ุงูุฌุงูุจ ูู ุงูููุฑ ููุฌูุฏ ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ููุงู ุทุฑูู ุนุงุจุฑ ุณูุงุก ููุงู ุฃู ููุงู ุ ูุฅููุง ูุฎุฑุฌ ูู ุงูุทุฑููุฉ ูุจู ุงูุชุซููุซ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !hasRoadThroughEdge &amp;&amp; !cell.HasRoadThroughEdge(direction.Next()) ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } corner = HexMetrics.GetSecondSolidCorner(direction); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !hasRoadThroughEdge &amp;&amp; !cell.HasRoadThroughEdge(direction.Previous()) ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } corner = HexMetrics.GetFirstSolidCorner(direction); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/09e/398/532/09e398532543dcd7f78987c23e012571.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุงูููุทูุนุฉ.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุนู ุงูุฌุณูุฑุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     .         . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃููุงุฑ ุงููุชุนุฑุฌุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุน ุงูุชุงูู ูู ุงูุฃููุงุฑ ูุชุนุฑุฌ. </font><font style="vertical-align: inherit;">ูุง ุชุดุงุฑู ูุฐู ุงูุฃููุงุฑ ุดุจูุฉ ุงูุทุฑู ุ ูุฐูู ูุญุชุงุฌ ููุท ุฅูู ุชุญุฑูู ูุฑูุฒ ุงูุทุฑูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/851/29b/f56/85129bf56e4948296b17916094fd9d8b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนุฑุฌ ููุฑ ุนุจุฑ ุงูุทุฑู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ููุชุญูู ูู ูุฌูุฏ ุนูุงูุงุช ูุชุนุฑุฌุฉ ุจููุงุฑูุฉ ุงุชุฌุงูุงุช ุงูุฃููุงุฑ ุงููุงุฑุฏุฉ ูุงูุตุงุฏุฑุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ูุชุฌุงูุฑุฉ ุ ููุฏููุง ุฎุท ูุชุนุฑุฌ. </font><font style="vertical-align: inherit;">ูุฐุง ูุคุฏู ุฅูู ุฎูุงุฑูู ูููููู ุ ุงุนุชูุงุฏูุง ุนูู ุงุชุฌุงู ุงูุชุฏูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.HasRiverBeginOrEnd) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Opposite()) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Previous()) { } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Next()) { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุชุญุฑูู ูุฑูุฒ ุงูุทุฑูู ุจุงุณุชุฎุฏุงู ุฃุญุฏ ุฃุฑูุงู ุงุชุฌุงู ุงูููุฑ ุงููุงุฑุฏ. </font><font style="vertical-align: inherit;">ุชุนุชูุฏ ุงูุฒุงููุฉ ุงูุชู ุชุญุฏุฏูุง ุนูู ุงุชุฌุงู ุงูุชุฏูู. </font><font style="vertical-align: inherit;">ุงููู ูุฑูุฒ ุงูุทุฑูู ูู ูุฐู ุงูุฒุงููุฉ ุจูุนุงูู 0.2.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Previous()) { roadCenter -= HexMetrics.GetSecondCorner(cell.IncomingRiver) * <span class="hljs-number"><span class="hljs-number">0.2f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Next()) { roadCenter -= HexMetrics.GetFirstCorner(cell.IncomingRiver) * <span class="hljs-number"><span class="hljs-number">0.2f</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/3c6/f27/1fa3c6f277079e277491027207f9398f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูุนุช ุงูุทุฑูู ุจุนูุฏุง ุนู ุงูุชุนุฑุฌุงุช.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุงุฎู ุงูุฃููุงุฑ ุงูููุชููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููู ุงูููุฑ ุงูุฃุฎูุฑ ูู ููุญูู ุณูุณ. </font><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูุน ุงูููุฑ ุงููุจุงุดุฑ ุ ูููู ููุฐุง ุงูุทุฑูู ุฃูุถูุง ูุตู ุงูุทุฑู. </font><font style="vertical-align: inherit;">ูููู ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชููู ุงูุฃุทุฑุงู ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃููุงู ููุนูู ูุน ุฏุงุฎู ุงูููุญูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/566/b8f/3db/566b8f3dbffec4cdc91556abe0f2bf5e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑ ููุญูู ูุน ุทุฑู ูุนุจุฏุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูููู ูุฏููุง ููุฑ ุนูู ุฌุงูุจู ุงูุงุชุฌุงู ุงูุญุงูู ุ ูุฅููุง ุฏุงุฎู ุงูููุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.IncomingRiver == cell.OutgoingRiver.Next()) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver &amp;&amp; nextHasRiver) { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุชุญุฑูู ูุฑูุฒ ุงูุทุฑูู ูุญู ุงูุญุงูุฉ ุงูุญุงููุฉ ููุฎููุฉ ุ ูุชูุตูุฑ ุงูุทุฑูู ููููุงู. </font><font style="vertical-align: inherit;">ูุนุงูู 0.7 ุณููุนู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชุญูู ูุฑูุฒ ุงูุฎููุฉ ุฃูุถูุง ุจูุนุงูู 0.5.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver &amp;&amp; nextHasRiver) { Vector3 offset = HexMetrics.GetSolidEdgeMiddle(direction) * HexMetrics.innerToOuter; roadCenter += offset * <span class="hljs-number"><span class="hljs-number">0.7f</span></span>; center += offset * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a2d/64f/a82/a2d64fa828544540d43856bf94e34f9d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุตูุฑ ุงูุทุฑู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุญุงูุฉ ุงูุฃููุงุฑ ุงููุณุชูููุฉ ุ ุณูุญุชุงุฌ ุฅูู ูุทุน ุงูุฃุฌุฒุงุก ุงููุนุฒููุฉ ูู ุงูุทุฑู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุงูุชุญูู ูู ุงูุงุชุฌุงู ุงูุญุงูู ููุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver &amp;&amp; nextHasRiver) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!hasRoadThroughEdge) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Vector3 offset = HexMetrics.GetSolidEdgeMiddle(direction) * HexMetrics.innerToOuter; roadCenter += offset * <span class="hljs-number"><span class="hljs-number">0.7f</span></span>; center += offset * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/30b/6a0/d9d/30b6a0d9db5fe0960265713c62ef2ae5.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุน ุงูุทุฑู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุงุฑุฌ ุงูุฃููุงุฑ ุงูููุชููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุชุญูู ูู ุฌููุน ุงูุญุงูุงุช ุงูุณุงุจูุฉ ุ ูุงู ุงูุฎูุงุฑ ุงููุญูุฏ ุงููุชุจูู ูู ุงูุฌุฒุก ุงูุฎุงุฑุฌู ูู ุงูููุฑ ุงูููุญูู. </font><font style="vertical-align: inherit;">ูู ุงูุฎุงุฑุฌ ููุงู ุซูุงุซุฉ ุฃุฌุฒุงุก ูู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุฅูุฌุงุฏ ุงูุงุชุฌุงู ุงูุฃูุณุท. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงุณุชูุงููุง ุ ูููููุง ุชุญุฑูู ูุฑูุฒ ุงูุทุฑูู ูุญู ูุฐุง ุงูุถูุน ุจูุนุงูู 0.25.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver &amp;&amp; nextHasRiver) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { HexDirection middle; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver) { middle = direction.Next(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextHasRiver) { middle = direction.Previous(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { middle = direction; } roadCenter += HexMetrics.GetSolidEdgeMiddle(middle) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8b8/84c/a29/8b884ca29118c36e522674cd00ab8613.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุบููุฑ ุงูุฌุฒุก ุงูุฎุงุฑุฌู ูู ุงูุทุฑูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุทูุฉ ุฃุฎูุฑุฉ ุ ูุญุชุงุฌ ุฅูู ูุทุน ุงูุทุฑู ุนูู ูุฐุง ุงูุฌุงูุจ ูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูู ุงูุชุญูู ูู ุฌููุน ุงุชุฌุงูุงุช ุงูุทุฑูู ุงูุซูุงุซ ุจุงููุณุจุฉ ุฅูู ุงูููุชุตู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ููุงู ุทุฑู ุ ูุชููู ุนู ุงูุนูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { HexDirection middle; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousHasRiver) { middle = direction.Next(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextHasRiver) { middle = direction.Previous(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { middle = direction; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !cell.HasRoadThroughEdge(middle) &amp;&amp; !cell.HasRoadThroughEdge(middle.Previous()) &amp;&amp; !cell.HasRoadThroughEdge(middle.Next()) ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } roadCenter += HexMetrics.GetSolidEdgeMiddle(middle) * <span class="hljs-number"><span class="hljs-number">0.25f</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/56d/69a/d1b/56d69ad1b8d6ffdf74e9adb1c4800695.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a9a/8c3/178/a9a8c3178c8a44738b4bbd01ef5f221d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ูุจู ูุจุนุฏ ุงููุต. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ูุนุงูุฌุฉ ุฌููุน ุฎูุงุฑุงุช ุงูุฃููุงุฑ ุ ูููู ุฃู ุชุชุนุงูุด ุงูุฃููุงุฑ ูุงูุทุฑู. </font><font style="vertical-align: inherit;">ุชุชุฌุงูู ุงูุฃููุงุฑ ุงูุทุฑู ูุชุชููู ุงูุทุฑู ูุน ุงูุฃููุงุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b32/6e4/28b/b326e428b45df027cac2f99a336e71e9.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒูุฌ ูู ุงูุฃููุงุฑ ูุงูุทุฑู. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธูุฑ ุงูุทุฑู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุชูู ุงููุญุธุฉ ุ ุงุณุชุฎุฏููุง ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูุฃููุงู ููุทุฑู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุชุบููุฑ ุฅุญุฏุงุซูุงุช U ููุท ุ ููุฏ ุนุฑุถูุง ุจุงููุนู ุงูุงูุชูุงู ุจูู ููุชุตู ุงูุทุฑูู ูุญูุงูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/084/cb2/8ac/084cb28ac448ddb258846c09d8b3b83a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุชู ุชุซููุซ ุงูุทุฑู ุจุดูู ุตุญูุญ ุชูุงููุง ุ ูููููุง ุชุบููุฑ ุชุธููู ุงูุทุฑูู ุจุญูุซ ูุนุฑุถ ุดูุฆูุง ุฃุดุจู ุจุงูุทุฑู. </font><font style="vertical-align: inherit;">ููุง ูู ุญุงูุฉ ุงูุฃููุงุฑ ุ ุณูููู ูุฐุง ุชุตูุฑูุง ุจุณูุทูุง ุ ุจุฏูู ุฒุฎุฑูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุจุฏุฃ ุจุงุณุชุฎุฏุงู ููู ุฎุงูุต ููุทุฑู. </font><font style="vertical-align: inherit;">ููุท ุงุณุชุฎุฏู ููู ุงููุงุฏุฉ. </font><font style="vertical-align: inherit;">ููุฏ ุฌุนูุชูุง ุญูุฑุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { fixed4 c = _Color; o.Albedo = c.rgb; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/304/2e4/ab4/3042e4ab4b01b3389822072244208cb6.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุงูุญูุฑุงุก. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏู ุจุงููุนู ุฃูุถู ุจูุซูุฑ! </font><font style="vertical-align: inherit;">ูููู ุฏุนูุง ููุงุตู ูููุฒุฌ ุงูุทุฑูู ูุน ุงูุชุถุงุฑูุณ ุ ุจุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช U ูุนุงูู ุฎูุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { fixed4 c = _Color; <span class="hljs-type"><span class="hljs-type">float</span></span> blend = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.x; o.Albedo = c.rgb; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = blend; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏู ุฃู ูุฐุง ูู ูุบูุฑ ุฃู ุดูุก. </font><font style="vertical-align: inherit;">ุญุฏุซ ุฐูู ูุฃู ุดุงุฏุฑูุง ุบูุฑ ุดูุงู. </font><font style="vertical-align: inherit;">ุงูุขู ูุญุชุงุฌ ุฅูู ูุฒุฌ ุฃููุง. </font><font style="vertical-align: inherit;">ุนูู ูุฌู ุงูุฎุตูุต ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชุธููู ูุณุทุญ ุตุงุฆู ุงูุชุฒุงูุฌ. </font><font style="vertical-align: inherit;">ูููููุง ุงูุญุตูู ุนูู ุชุธููู ุงููุทููุจุฉ ุนู ุทุฑูู ุฅุถุงูุฉ </font></font><code>#pragma surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุท </font><font style="vertical-align: inherit;">ุฅูู ุงูุชูุฌูู </font></font><code>decal:blend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs cs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> surface surf Standard fullforwardshadows decal:blend</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7a0/66c/501/7a066c5015ea14533f1b9ed881469323.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒูุฌ ุงูุทุฑู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ูููุง ุจุฅูุดุงุก ูุฒูุฌ ุฎุทู ุณูุณ ูู ููุชุตู ุฅูู ุงูุญุงูุฉ ูุง ูุจุฏู ุฌููููุง ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูุฌุนููุง ุชุจุฏู ูุทุฑูู ุ ูุญุชุงุฌ ุฅูู ููุทูุฉ ุตูุจุฉ ุ ูุชุจุนูุง ุงูุชูุงู ุณุฑูุน ุฅูู ููุทูุฉ ุบูุฑ ุดูุงูุฉ. </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ุงููุธููุฉ ููุฐุง </font></font><code>smoothstep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญูู ุงูุชูุฏู ุงูุฎุทู ูู 0 ุฅูู 1 ุฅูู ููุญูู ุนูู ุดูู S.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2b0/030/f57/2b0030f57819183470fc7fae72ea18bd.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏู ุฎุทู ูุณูุณ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ุงููุธููุฉ </font></font><code>smoothstep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ูุนููุฉ ุงูุญุฏ ุงูุฃุฏูู ูุงูุฃูุตู ูุชูุงุณุจ ุงูููุญูู ูู ูุงุตู ุชุนุณูู. </font><font style="vertical-align: inherit;">ุชููู ููู ุงูุฅุฏุฎุงู ุฎุงุฑุฌ ุงููุทุงู ูุญุฏูุฏุฉ ููุญูุงุธ ุนูู ุงูููุญูู ูุณุทุญูุง. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุณุชุฎุฏู 0.4 ูู ุจุฏุงูุฉ ุงูููุญูู ู 0.7 ูู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃู ุฅุญุฏุงุซูุงุช U ูู 0 ุฅูู 0.4 ุณุชููู ุดูุงูุฉ ุชูุงููุง. </font><font style="vertical-align: inherit;">ูุณุชููู ุฅุญุฏุงุซูุงุช U ูู 0.7 ุฅูู 1 ูุนุชูุฉ ุชูุงููุง. </font><font style="vertical-align: inherit;">ูุญุฏุซ ุงูุงูุชูุงู ุจูู 0.4 ู 0.7.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">float</span></span> blend = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.x; blend = smoothstep(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, <span class="hljs-number"><span class="hljs-number">0.7</span></span>, blend);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/543/fe1/4b4/543fe14b4d760b820ec106626230876f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุงู ุณุฑูุน ุจูู ุงูููุงุทู ุงูุดูุงูุฉ ูุงูุดูุงููุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑูู ูุน ุงูุถุฌูุฌ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุดุจูุฉ ุงูุทุฑู ุณูุชู ุชุดููููุง ุ ูุฅู ุงูุทุฑู ููุง ุนุฑูุถ ูุชูุงูุชุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูููู ุนุฑุถ ุงูุงูุชูุงู ุนูุฏ ุงูุญูุงู ูุชุบูุฑูุง ุฃูุถูุง. </font><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ุถุจุงุจูุฉ ุ ูุฃุญูุงููุง ูุงุณูุฉ. </font><font style="vertical-align: inherit;">ูุซู ูุฐุง ุงูุชููุน ููุงุณุจูุง ุ ุฅุฐุง ุฑุฃููุง ุงูุทุฑู ุนูู ุฃููุง ุฑูููุฉ ุฃู ุชุฑุงุจูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฃุฎุฐ ุงูุฎุทูุฉ ุงูุชุงููุฉ ููุถูู ุถูุถุงุก ุฅูู ุญูุงู ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ูุฐุง ุณูุฌุนููุง ุฃูุซุฑ ุชูุงูุชูุง ูุฃูู ูุถูุนุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฃุฎุฐ ุนููุงุช ูู ูุณูุฌ ุงูุถูุถุงุก. </font><font style="vertical-align: inherit;">ูุฃุฎุฐ ุงูุนููุงุช ุ ููููู ุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช ุนุงูู XZ ุ ุชูุงููุง ููุง ูุนููุง ุนูุฏ ุชุดููู ุฑุคูุณ ุงูุฎูุงูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุตูู ุฅูู ูููุน ุงูุนุงูู ูู ุชุธููู ุงูุณุทุญ ุ ุฃุถู ุฅูู ุจููุฉ ุงูุฅุฏุฎุงู </font></font><code>float3 worldPos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs swift"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Input</span></span></span><span class="hljs-class"> </span></span>{ float2 uv_MainTex; float3 worldPos; };</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุณุชุฎุฏุงู ูุฐุง ุงูููุถุน </font></font><code>surf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฐูู ุงููุณูุฌ ุงูุฑุฆูุณู. </font><font style="vertical-align: inherit;">ูู ุจุงูุชุตุบูุฑ ุฃูุถูุง ุ ูุฅูุง ุณูุชูุฑุฑ ุงููุณูุฌ ูุซูุฑูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">float4</span></span> noise = tex2D(_MainTex, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos.xz * <span class="hljs-number"><span class="hljs-number">0.025</span></span>); fixed4 c = _Color; <span class="hljs-type"><span class="hljs-type">float</span></span> blend = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex.x;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุชุดููู ุงูุงูุชูุงู ุจุถุฑุจ ุฅุญุฏุงุซูุงุช U ูู </font></font><code>noise.x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ูุธุฑูุง ูุฃู ููู ุงูุถูุถุงุก ูู ุงููุชูุณุท โโ0.5 ุ ูุณุชุฎุชูู ูุนุธู ุงูุทุฑู. </font><font style="vertical-align: inherit;">ูุชุฌูุจ ุฐูู ุ ุฃุถู 0.5 ุฅูู ุงูุถูุถุงุก ูุจู ุงูุถุฑุจ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> blend = IN.uv_MainTex.x; blend *= <span class="hljs-keyword"><span class="hljs-keyword">noise</span></span>.x + <span class="hljs-number"><span class="hljs-number">0.5</span></span>; blend = <span class="hljs-keyword"><span class="hljs-keyword">smoothstep</span></span>(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, <span class="hljs-number"><span class="hljs-number">0.7</span></span>, blend);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c08/b7d/e28/c08b7de2879b84c816286530871b6a6f.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4be/bdf/28f/4bebdf28fc519b3f186f119b6e501261.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุงู ูุดููุฉ ููุทุฑูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅููุงุก ูุฐุง ุ ุณูููู ุฃูุถูุง ุจุชุดููู ููู ุงูุทุฑู. </font><font style="vertical-align: inherit;">ุณูุนุทู ูุฐุง ุงูุทุฑูู ุฅุญุณุงุณูุง ุจุงูุฃูุณุงุฎ ุงูููุงุจูุฉ ููุญูุงู ุงููุดูุดุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุถุฑุจ ุงูููู ูู ููุงุฉ ุถูุถุงุก ุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู </font></font><code>noise.y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ูุญุตู ุนูู ูุชูุณุท โโูุตู ูููุฉ ุงูููู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐุง ูุซูุฑ ุฌุฏูุง ุ ูุณูุฎูุถ ูููุงุณ ุงูุถูุถุงุก ููููุงู ููุถูู ุซุงุจุชูุง ุญุชู ูุตู ุงููุฌููุน ุฅูู 1.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs swift"> fixed4 <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> = _Color * (noise.y * <span class="hljs-number"><span class="hljs-number">0.75</span></span> + <span class="hljs-number"><span class="hljs-number">0.25</span></span>);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6d2/a25/d49/6d2a25d4929cf56f7c4059352b4ed70a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุงููุนุฑุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar424491/">https://habr.com/ru/post/ar424491/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar424475/index.html">ุชูุฑูุฑ ูุฑูุฒ ูุฑุงูุจุฉ ุฃูู ุงููุนูููุงุช ูููุตู ุงูุฃูู ูู ุนุงู 2018</a></li>
<li><a href="../ar424477/index.html">ุชูุงูุฑ ุงูุฃูุนุงุจ ุนูู pygame</a></li>
<li><a href="../ar424481/index.html">ุงูุญูููุฉ ุงููุงููุฉ ุนู RTOS. ุงููุงุฏุฉ ุฑูู 11. ุงูููุงู: ุงูุชูููู ูุงูููุฏูุฉ ููุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช</a></li>
<li><a href="../ar424483/index.html">ุตููุฉ ุจูููุฉ 38 ูููุงุฑ ุฏููุงุฑ ูุขุซุงุฑูุง: ููู ูุญุงุฑุจ ููููุงุณุช ูุฏูุฒูู ุฃูุงุฒูู ููุชููููุณ ุจุงูุงุณุชุซูุงุฑ</a></li>
<li><a href="../ar424485/index.html">ุชุฌุงูุฒ ุชุซุจูุช SSL ูู ุชุทุจูู iOS</a></li>
<li><a href="../ar424495/index.html">ุณูุถูู Google Chrome ุงููุฏุฑุฉ ุนูู ุฑูุถ ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ ููููู ุงูุดุฎุตู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุฎุฏูุงุช ุงูุดุฑูุฉ *</a></li>
<li><a href="../ar424497/index.html">ุชููู ุนู ุงูุดู ูู ูุทูุฑู ุงูุบุด. ุชุนูู ููู ุชูุงุจู ุจุดูู ุฃูุถู</a></li>
<li><a href="../ar424499/index.html">ุญุณูุงู ุ ุฃุฎุชู</a></li>
<li><a href="../ar424501/index.html">ุงููุญุทุงุช ุงูุชุดุฎูุตูุฉ ููุงููุญุงู ุงูุญูููู</a></li>
<li><a href="../ar424503/index.html">ุชูููุฏ ููุณู ุ ุงูุฑุจูุน ูุงุฏู (ุงูุฌุฒุก 1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>