<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî® üé¨ üìé Station de travail cryptographique bas√©e sur des normes de cl√© publique. √âmettez des certificats SSL. √âpilogue ‚úäüèª üë®üèº‚Äçüíº üòà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous sommes donc arriv√©s √† la cr√©ation de certificats auto-sign√©s. 
 O√π s'appliquent les certificats auto-sign√©s? Bien s√ªr, avec un certificat auto-si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Station de travail cryptographique bas√©e sur des normes de cl√© publique. √âmettez des certificats SSL. √âpilogue</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468817/"><img src="https://habrastorage.org/webt/do/z3/os/doz3osvqqu8h2gglv3xjuhcrhjo.png" align="left" width="200">  Nous sommes donc <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font color="#6096b0">arriv√©s</font></a> √† la cr√©ation de certificats auto-sign√©s. <br>  O√π s'appliquent les certificats auto-sign√©s?  Bien s√ªr, avec un certificat auto-sign√©, vous ne pourrez pas vous inscrire sur le site Web des services d'√âtat ou soumettre une d√©claration sign√©e au Service f√©d√©ral des imp√¥ts.  Mais pour le flux de travail interne de l'entreprise, ils peuvent √™tre utilis√©s.  Vous pouvez √©galement les utiliser pour prot√©ger la correspondance e-mail personnelle, dans les r√©seaux VPN, etc.  Mais le plus souvent, ils utilisent des certificats SSL auto-sign√©s pour fournir un acc√®s s√©curis√© via le protocole https aux applications Web.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenSSL</a> reste l'outil le plus populaire pour cr√©er des certificats auto-sign√©s.  La proc√©dure pour obtenir des certificats SSL en utilisant le m√™me OpenSSL est bien d√©crite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Mais l√†, vous ne trouverez pas de mention de certificats GOST, de jetons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font color="#6096b0">PKCS # 11</font></a> , etc.  Nous examinons ici une interface graphique simple qui vous permet d'obtenir des certificats bas√©s sur GOST R 34.10-2012 et sans aucune utilisation d'OpenSSL. <a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">L'utilitaire cryptoarmpkcs peut √™tre obtenu ici</b> <div class="spoiler_text"><ul><li>  <a href="">Linux32</a> </li><li>  <a href="">Linux64</a> </li><li>  <a href="">OS X</a> </li><li>  <a href="">WIN32</a> </li><li>  <a href="">WIN64</a> </li></ul><br></div></div><br>  Cliquez donc sur le bouton "Certificat auto-sign√©": <br><br><img src="https://habrastorage.org/webt/oi/ax/2f/oiax2f3cqjcbbb643gnrdsquzuu.png"><br><br>  Comme vous pouvez le voir, cet onglet n'est pas tr√®s diff√©rent du m√™me onglet lors de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©ation d'une demande de</a> certificat.  Ici apparaissent les boutons permettant de s√©lectionner le type de certificat g√©n√©r√© "Type de certificat": <br>  - certificat d'utilisateur (bouton utilisateur); <br>  - certificat racine (bouton CA); <br>  - Certificat SSL (bouton SSL). <br>  Naturellement, vous devez commencer √† travailler en √©mettant un certificat racine, sur la base duquel tous les autres certificats seront ensuite √©mis.  Lors de la cr√©ation d'un certificat racine, n'oubliez pas d'activer la case √† cocher ¬´Signature du certificat¬ª dans l'affectation de cl√© (utilisation): <br><br><img src="https://habrastorage.org/webt/li/6u/ex/li6uexdcowrogr5i7z96t3npf14.png"><br><br>  Nous omettons de remplir les principaux champs du certificat, ils ne sont pas diff√©rents de remplir les m√™mes champs pour la demande, et passons imm√©diatement aux pages finales.  Voici le premier: <br><br><img src="https://habrastorage.org/webt/df/ir/yw/dfirywymvzgoqq5u46qa4th6tcw.png"><br><br>  Sur cette page, vous devez s√©lectionner le dossier dans lequel le certificat racine et sa cl√© priv√©e seront enregistr√©s.  Ce dossier devra ensuite √™tre sp√©cifi√© lors de l'√©mission d'autres certificats.  Vous devez √©galement d√©terminer la p√©riode de validit√© du certificat.  Vous pouvez √©galement sp√©cifier le point auquel vous pouvez obtenir le certificat racine.  √Ä sa sortie, le certificat et la cl√© priv√©e seront emball√©s dans un grand nombre des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font color="#6096b0">conteneurs</font></a> s√©curis√©s pr√©f√©r√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font color="#6096b0">PKCS # 12</font></a> .  √Ä cet √©gard, vous devez d√©finir un mot de passe pour le conteneur.  En cons√©quence, apr√®s avoir cliqu√© sur le bouton "Terminer", un certificat racine sera re√ßu: <br><br><img src="https://habrastorage.org/webt/hl/on/1i/hlon1i0kamsrthpm0r3yzrj4ns8.png"><br><br>  Lors de la d√©livrance du certificat, nous obtenons quatre fichiers dans le r√©pertoire sp√©cifi√©: <br><ul><li>  rootCA.cer avec le certificat lui-m√™me au format (PEM / DER) que vous avez s√©lectionn√©; </li><li>  rootCA.csr avec une demande de certificat; </li><li>  rootCA.pfx Conteneur PKCS # 12 prot√©g√© par mot de passe avec certificat et cl√© priv√©e; </li><li>  rootCA.key avec la cl√© priv√©e au format (PEM / DER) que vous avez s√©lectionn√©. </li></ul><br>  Le fichier rootCA.key, si vous ne comptez pas l'utiliser, il est pr√©f√©rable de le d√©truire imm√©diatement.  Sinon, rangez-le dans un endroit inaccessible aux autres.  Cachez √©galement le mot de passe du conteneur rooCA.pfx aux regards indiscrets. <br>  Maintenant que nous avons le certificat racine, nous pouvons commencer √† √©mettre des certificats utilisateur, y compris des certificats SSL: <br><br><img src="https://habrastorage.org/webt/-_/vo/mm/-_vommqj6ezfnr5v5zdzl_axj4o.png"><br><br>  Apr√®s avoir choisi le type de certificat (certificat SSL), le type de cl√©, ses param√®tres et comment il (cl√©) sera utilis√©, nous allons √† la page suivante: <br><br><img src="https://habrastorage.org/webt/uq/hj/iz/uqhjiz-hl8xcsotu-s6qmfdcdg8.png"><br><br>  Cette page d√©finit le nom de domaine principal, qui sera entr√© dans le champ Nom commun, et vous pouvez √©galement sp√©cifier des noms (alternatifs) suppl√©mentaires pour votre domaine.  Vous pouvez √©galement sp√©cifier les adresses IP o√π se trouve votre domaine.  Tout cela est fait pour le ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ch√¢teau vert convoit√©</a> ¬ª. <br>  Apr√®s avoir trait√© les domaines, les adresses IP vont dans les onglets suivants.  Tout y est comme d'habitude.  La seule diff√©rence est qu'apr√®s avoir cliqu√© sur le bouton "Terminer", le mot de passe du conteneur racine rootCA.pfx sera demand√©: <br><br><img src="https://habrastorage.org/webt/1a/xv/gq/1axvgqrmtqyxifcpywxcjyeqbla.png"><br><br>  Apr√®s avoir correctement saisi le mot de passe, nous obtenons √©galement quatre fichiers: <br><br><img src="https://habrastorage.org/webt/3p/q1/-n/3pq1-nedzedsvgcrlzyagoqakvg.png"><br><br>  Tous les commentaires concernant le mot de passe et la cl√© priv√©e ci-dessus concernant le certificat racine s'appliquent au reste du certificat.  Tous les certificats que nous avons d√©livr√©s.  Et ensuite? <br>  Utilisez-les.  S'il s'agit de certificats utilisateur, vous pouvez les utiliser dans le m√™me utilitaire via des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font color="#6096b0">conteneurs PKCS # 12</font></a> , dans le flux de documents pour la signature de documents, par exemple: <br><br><img src="https://habrastorage.org/webt/2b/nd/-g/2bnd-g7s-n5s89k9zo-0th3jz5s.png"><br><br>  Quant aux certificats SSL, ils doivent √™tre utilis√©s conform√©ment √† leur destination pour organiser un canal s√©curis√© avec une application Web.  En tant que telle application, nous avons pris une autorit√© de certification o√π l'acc√®s √† ses ressources pour les administrateurs est organis√© selon GOST https.  L'AC est d√©ploy√©e sur la base d'Apache2-2.4.10 avec le module mod_ssl, qui prend en charge les syst√®mes de cryptage russes.  Sur le serveur (nous l'avons Linux), placez le certificat SSL re√ßu (&lt;votre r√©pertoire&gt; /self_xxx.cer) et sa cl√© priv√©e (&lt;votre r√©pertoire&gt; /sel_xxx.key) dans le dossier / etc / ssl et √©crivez leurs chemins d'acc√®s dans le fichier / etc / apache2 / sites-available / default-ssl: <br><pre><code class="bash hljs">... SSLCertificateFile &lt; &gt;/self_xxx.cer SSLCertificateKeyFile &lt; &gt;/self_xxx.key ....</code> </pre> <br>  Red√©marrez apache2: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#service pache2 restart #</span></span></code> </pre> <br>  Sur le lieu de travail (j'ai Linux) dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">navigateur</a> prenant en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">charge la cryptographie russe,</a> installez notre certificat racine (&lt;votre r√©pertoire&gt; /rootCA.cer) en toute confiance.  Sur l'ordinateur de travail, ajoutez la ligne suivante au fichier / etc / hosts: <br><pre> <code class="bash hljs">192.168.0.233 www.shield-ra.ru shield-ra.ru shield-ra</code> </pre> <br><br>  et allez √† l'une de ces adresses: <br><br><img src="https://habrastorage.org/webt/ag/hb/h4/aghbh4rbiqxx-d-bpddzsp9qz5i.png"><br><br>  Allum√©, br√ªl√© le ¬´verrou vert tant attendu¬ª. <br>  V√©rifiez les adresses restantes: <br><br><img src="https://habrastorage.org/webt/vj/mw/wm/vjmwwmrvlz6gtzlzqazm6ky1uos.png"><br><br>  Vert autour.  Et enfin, voyons quelle suite de chiffrement nous avons utilis√©e: <br><br><img src="https://habrastorage.org/webt/ov/5n/lw/ov5nlwyztcmep84xczily73orjq.png"><br><br>  Pour cr√©er des certificats auto-sign√©s pour des demandes de certificat cr√©√©es pr√©c√©demment, la fonctionnalit√© de la page "Afficher la demande / le certificat" a √©t√© √©tendue: <br><br><img src="https://habrastorage.org/webt/zc/ka/ra/zckarap5cmya9irvf85ln2vje2u.png"><br><br>  Comme vous pouvez le voir sur la capture d'√©cran, vous pouvez d√©sormais non seulement afficher la demande, mais √©galement √©mettre un certificat dessus.  Le conteneur rootCA.pfx est utilis√© comme certificat racine.  Lorsque vous cliquez sur le bouton "D√©livrer", une fen√™tre appara√Æt avec une demande, apr√®s avoir regard√©, vous pouvez cliquer sur le bouton "D√©livrer le certificat": <br><br><img src="https://habrastorage.org/webt/ay/oq/m2/ayoqm2hjakkkx9nrqam0cvira7s.png"><br><br>  Apr√®s avoir cliqu√© sur le bouton, un mot de passe pour le conteneur racine sera demand√© et un certificat sera √©mis: <br><br><img src="https://habrastorage.org/webt/bl/2n/7b/bl2n7br1g0ajjav56fhoxq66y64.png"><br><br>  √Ä propos, vous pouvez voir le certificat re√ßu sur la m√™me page (bouton "Fichier de certificat"). <br>  Ainsi, notre utilitaire cryptographique cryptoarmpkcs vous permet de: <br>  - travailler avec des jetons PKCS # 11 avec prise en charge de la cryptographie russe; <br>  - cr√©er des demandes de certificats; <br>  - cr√©er et v√©rifier une signature √©lectronique (jusqu'√† CAdes XLT1) √† l'aide de jetons PKCS # 11; <br>  - cr√©er une signature √©lectronique (jusqu'√† CAdes XLT1) √† l'aide de conteneurs PKCS # 12; <br>  - d√©livrer des certificats auto-sign√©s; <br>  - Afficher les certificats et les demandes. <br>  Probablement, il manque quelque chose, dites-moi, nous en tiendrons compte.  Merci de votre patience. <br>  <font color="#6096b0">PS</font> Maintenant, vous pouvez t√©l√©charger des versions mises √† jour directement depuis l'utilitaire.  Pour ce faire, d√©placez simplement le curseur de la souris sur la rubrique ¬´PKCS # 11, X509v3 ...¬ª, appuyez sur le bouton droit de la souris et s√©lectionnez l'√©l√©ment de menu ¬´√Ä propos du programme¬ª: <br><br><img src="https://habrastorage.org/webt/uq/ls/l1/uqlsl1m3tv8awyoxtgewlvnkdgy.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468817/">https://habr.com/ru/post/fr468817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468797/index.html">Longueur focale de l'≈ìil. Qu'est-ce que c'est? (Mis √† jour)</a></li>
<li><a href="../fr468799/index.html">Antipatterns dans React ou Bad Tips pour les d√©butants</a></li>
<li><a href="../fr468803/index.html">Comment nous avons cr√©√© notre moteur de workflow</a></li>
<li><a href="../fr468805/index.html">System.Console, Mono et NCurses</a></li>
<li><a href="../fr468813/index.html">G√©olocalisation et g√©olocalisation - m√©ga-outil</a></li>
<li><a href="../fr468821/index.html">Comment √©crire un contrat intelligent avec Python sur l'ontologie? Partie 1: l'API Blockchain & Block</a></li>
<li><a href="../fr468825/index.html">Arr√™tez de penser que le SLA vous sauvera. Il faut calmer et cr√©er un faux sentiment de s√©curit√©.</a></li>
<li><a href="../fr468827/index.html">Gadgets pour dormir</a></li>
<li><a href="../fr468833/index.html">Algorithmes de recherche de nombres premiers</a></li>
<li><a href="../fr468835/index.html">Temps "perdu": qu'est-ce qui soudoie une montre m√©canique aujourd'hui?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>