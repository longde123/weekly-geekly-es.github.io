<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôªÔ∏è üõê üëçüèª Wir essen den Elefanten in Teilen. Beispiel f√ºr eine Strategie zur √úberwachung des Anwendungszustands üî¢ üëäüèΩ üêÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! 

 Unser Unternehmen besch√§ftigt sich mit Softwareentwicklung und anschlie√üendem technischen Support. Im Rahmen des technischen Supp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir essen den Elefanten in Teilen. Beispiel f√ºr eine Strategie zur √úberwachung des Anwendungszustands</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463121/">  Hallo allerseits! <br><br>  Unser Unternehmen besch√§ftigt sich mit Softwareentwicklung und anschlie√üendem technischen Support.  Im Rahmen des technischen Supports m√ºssen Sie nicht nur Fehler beheben, sondern auch die Leistung unserer Anwendungen √ºberwachen. <br><br>  Wenn beispielsweise einer der Dienste ‚Äûabst√ºrzt‚Äú, m√ºssen Sie dieses Problem automatisch beheben und mit der L√∂sung beginnen. Warten Sie nicht auf Anrufe beim technischen Support f√ºr unzufriedene Benutzer. <br><br>  Wir haben ein kleines Unternehmen, es gibt keine Ressourcen zum Studieren und enthalten komplexe L√∂sungen f√ºr die √úberwachung von Anwendungen. Es war notwendig, eine einfache und effektive L√∂sung zu finden. <br><br><img src="https://habrastorage.org/webt/qo/zb/np/qozbnp3tqosarppzcbttecwzpda.png"><br><a name="habracut"></a><br><h2>  √úberwachungsstrategie </h2><br>  Das Durchf√ºhren einer √úberpr√ºfung des Anwendungszustands ist nicht einfach. Diese Aufgabe ist nicht trivial, man k√∂nnte sogar sagen, kreativ.  Es ist besonders schwierig, ein komplexes Mehrverbindungssystem zu testen. <br><br>  Wie man einen Elefanten isst?  Nur in Teilen!  Wir verwenden diesen Ansatz, um Anwendungen zu √ºberwachen. <br><br>  Das Wesentliche unserer √úberwachungsstrategie: <br><blockquote>  Teilen Sie die Anwendung in Komponenten auf. <br>  Erstellen Sie f√ºr jede Komponente Kontrollpr√ºfungen. </blockquote>  Eine Komponente gilt als fehlerfrei, wenn alle Kontrollpr√ºfungen fehlerfrei durchgef√ºhrt werden.  Eine Anwendung gilt als fehlerfrei, wenn alle ihre Komponenten funktionsf√§hig sind. <br><br>  Somit kann jedes System als ein Baum von Komponenten dargestellt werden.  Komplexe Komponenten werden in einfachere unterteilt.  Einfache Komponenten haben Pr√ºfungen. <br><br><img src="https://habrastorage.org/webt/ts/jj/un/tsjjunljmwoa6dex7za-zfnqvwq.png"><br><br>  Kontrollpr√ºfungen sollten keine Funktionstests durchf√ºhren, dies sind keine Komponententests.  Kontrollpr√ºfungen sollten pr√ºfen, wie sich die Komponente zum aktuellen Zeitpunkt anf√ºhlt, ob alle f√ºr ihre Funktion erforderlichen Ressourcen vorhanden sind und ob Probleme vorliegen. <br><br>  Es gibt keine Wunder, die meisten Kontrollen m√ºssen unabh√§ngig voneinander entwickelt werden.  Aber keine Angst, denn in den meisten F√§llen dauert eine Pr√ºfung 5-10 Codezeilen, aber dann k√∂nnen Sie jede Logik implementieren und es wird Ihnen klar sein, wie die Pr√ºfung funktioniert. <br><br><h2>  √úberwachungssystem </h2><br>  Angenommen, wir teilen die Anwendung in Komponenten auf, erfinden und implementieren √úberpr√ºfungen f√ºr jede Komponente. Was tun wir jedoch mit den Ergebnissen dieser √úberpr√ºfungen?  Woher wissen wir, dass eine √úberpr√ºfung fehlgeschlagen ist? <br><br>  Wir brauchen ein √úberwachungssystem.  Sie wird folgende Aufgaben ausf√ºhren: <br><br><ul><li>  Erhalten Sie Testergebnisse und bestimmen Sie den Status der Komponenten daraus. <br>  Optisch sieht es so aus, als w√ºrde der Komponentenbaum hervorgehoben.  Wartungsf√§hige Komponenten werden gr√ºn, fehlerhafte Komponenten werden rot. <br></li><li>  F√ºhren Sie sofort allgemeine √úberpr√ºfungen durch. <br>  Das √úberwachungssystem kann einige √úberpr√ºfungen selbst durchf√ºhren.  Warum das Rad neu erfinden, werden wir sie verwenden.  Sie k√∂nnen beispielsweise √ºberpr√ºfen, ob die Site-Seite ge√∂ffnet wird oder der Server antwortet. <br></li><li>  Senden Sie Problembenachrichtigungen an interessierte Parteien. </li><li>  Visualisierung von √úberwachungsdaten, Bereitstellung von Berichten, Grafiken und Statistiken. </li></ul><br><h2>  Kurzbeschreibung des ASMO-Systems </h2><br>  Am besten anhand eines Beispiels erkl√§ren.  Mal sehen, wie die √úberwachung des Betriebs des ASMO-Systems organisiert ist. <br><br>  ASMO ist ein automatisiertes Wetterunterst√ºtzungssystem.  Das System hilft Stra√üendienstspezialisten zu verstehen, wo und wann die Stra√üe mit Vereisungsschutzmitteln behandelt werden muss.  Das System sammelt Daten von Verkehrskontrollpunkten.  Ein Stra√üenkontrollpunkt ist ein Ort auf der Stra√üe, an dem die Ausr√ºstung installiert ist: eine Wetterstation, eine Videokamera und mehr.  Um gef√§hrliche Situationen vorherzusagen, erh√§lt das System Wettervorhersagen von externen Quellen. <br><br><img src="https://habrastorage.org/webt/yo/wo/ib/yowoibav3w7q6pcrq4wbldp3bjw.png"><br><br>  Die Zusammensetzung des Systems ist also recht typisch: Website, Agent, Ausr√ºstung.  Beginnen wir mit der √úberwachung. <br><br><h2>  Wir zerlegen das System in Komponenten </h2><br>  Folgende Komponenten k√∂nnen im ASMO-System unterschieden werden: <br><br>  <b>1. Pers√∂nliches Konto</b> <br>  Dies ist eine Webanwendung.  Sie m√ºssen mindestens √ºberpr√ºfen, ob die Anwendung im Internet verf√ºgbar ist. <br><br>  <b>2. Datenbank</b> <br>  Wichtige Daten f√ºr die Berichterstellung werden in der Datenbank gespeichert. Es muss √ºberpr√ºft werden, ob die Datenbanksicherungen erfolgreich erstellt wurden. <br><br>  <b>3. Server</b> <br>  Mit Server ist Hardware gemeint, auf der Anwendungen ausgef√ºhrt werden.  Es ist notwendig, den Status von Festplatte, RAM, CPU zu √ºberpr√ºfen. <br><br>  <b>4. Agent</b> <br>  Dies ist ein Windows-Dienst, der viele verschiedene geplante Aufgaben ausf√ºhrt.  Sie m√ºssen mindestens √ºberpr√ºfen, ob der Dienst ausgef√ºhrt wird. <br><br>  <b>5. Agentenaufgabe</b> <br>  Nur zu wissen, dass der Agent arbeitet, reicht nicht aus.  Ein Agent kann arbeiten, aber die ihm zugewiesenen Aufgaben nicht erf√ºllen.  Wir unterteilen die Agentenkomponente in Aufgaben und pr√ºfen, ob jede Agentenaufgabe erfolgreich funktioniert. <br><br>  <b>6. Stra√üenkontrollpunkte (Container aller MPCs)</b> <br>  Es gibt viele Punkte der Stra√üenkontrolle, daher werden wir alle MPCs in einer Komponente kombinieren.  Dies erleichtert das Lesen von √úberwachungsdaten.  Wenn Sie den Status der Komponente "ASMO-System" anzeigen, wird sofort klar, wo die Probleme liegen: in Anwendungen, Hardware oder in MPC. <br><br>  <b>7. Stra√üenkontrollpunkt (ein MPC)</b> <br>  Wir werden diese Komponente als wartungsf√§hig betrachten, wenn alle Ger√§te auf diesem MPC gewartet werden k√∂nnen. <br><br>  <b>8. Ger√§t</b> <br>  Dies ist eine Videokamera oder Wetterstation, die auf dem MPC installiert ist.  Sie m√ºssen √ºberpr√ºfen, ob das Ger√§t ordnungsgem√§√ü funktioniert. <br><br>  Im √úberwachungssystem sieht der Komponentenbaum folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/fx/rm/ki/fxrmkikhpp6we9dhhgifttv_9k4.png"><br><br><h2>  √úberwachung von Webanwendungen </h2><br>  Also haben wir das System in Komponenten unterteilt. Jetzt m√ºssen wir f√ºr jede Komponente √úberpr√ºfungen durchf√ºhren. <br><br>  Zur √úberwachung der Webanwendung verwenden wir die folgenden √úberpr√ºfungen: <br><br>  <b>1. √úberpr√ºfen Sie die √ñffnung der Hauptseite</b> <br>  Diese Pr√ºfung wird vom √úberwachungssystem durchgef√ºhrt.  F√ºr die Ausf√ºhrung geben wir die Seitenadresse, das erwartete Antwortfragment und die maximale Ausf√ºhrungszeit der Abfrage an. <br><br>  <b>2. √úberpr√ºfung der Zahlungsfrist der Domain</b> <br>  Sehr wichtige √úberpr√ºfung.  Wenn eine Domain nicht bezahlt wird, k√∂nnen Benutzer die Site nicht √∂ffnen.  Es kann mehrere Tage dauern, bis das Problem behoben ist.  DNS-√Ñnderungen werden nicht sofort angewendet. <br><br>  <b>3. √úberpr√ºfung des SSL-Zertifikats</b> <br>  Mittlerweile verwenden fast alle Websites das https-Protokoll f√ºr den Zugriff.  Damit das Protokoll ordnungsgem√§√ü funktioniert, ben√∂tigen Sie ein g√ºltiges SSL-Zertifikat. <br><br>  Unten ist die Komponente "Pers√∂nliches Konto" im √úberwachungssystem: <br><br><img src="https://habrastorage.org/webt/2q/ib/gu/2qibguw4p_2djjqryrp0mozkt20.png"><br><br>  Alle oben genannten Pr√ºfungen sind f√ºr die meisten Anwendungen geeignet und erfordern kein Schreiben von Code.  Dies ist gro√üartig, da Sie jede Webanwendung in 5 Minuten √ºberwachen k√∂nnen.  Im Folgenden finden Sie zus√§tzliche √úberpr√ºfungen, die f√ºr eine Webanwendung durchgef√ºhrt werden k√∂nnen. Ihre Implementierung ist jedoch komplexer und spezifischer f√ºr verschiedene Anwendungen. Daher werden wir sie in diesem Artikel nicht analysieren. <br><br>  Was kann ich noch √ºberpr√ºfen? <br><br>  F√ºr eine umfassendere √úberwachung der Webanwendung k√∂nnen Sie die folgenden √úberpr√ºfungen durchf√ºhren: <br><br><ul><li>  Anzahl der JavaScript-Fehler pro Periode </li><li>  Die Anzahl der Fehler auf der Seite der Webanwendung (Back-End) f√ºr den Zeitraum </li><li>  Die Anzahl der nicht erfolgreichen Antworten der Webanwendung (Antwortcode 404, 500 usw.) </li><li>  Durchschnittliche Ausf√ºhrungszeit der Abfrage </li></ul><br><h2>  √úberwachung des Windows-Dienstes (Agent) </h2><br>  Im ASMO-System fungiert der Agent als Taskplaner, der im Hintergrund geplante Aufgaben ausf√ºhrt. <br><br>  Wenn alle Aufgaben des Agenten erfolgreich sind, funktioniert der Agent ordnungsgem√§√ü.  Es stellt sich heraus, dass zur √úberwachung eines Agenten seine Aufgaben √ºberwacht werden m√ºssen.  Daher unterteilen wir die Agent-Komponente in Aufgaben.  Wir erstellen f√ºr jede Aufgabe eine separate Komponente im √úberwachungssystem, wobei die Komponente "Agent" die "√ºbergeordnete Komponente" ist. <br><br>  Wir unterteilen die Agentenkomponente in untergeordnete Komponenten (Aufgaben): <br><br><img src="https://habrastorage.org/webt/4c/qc/tg/4cqctgxm0ynlhbmsrptau2cxdue.png"><br><br>  Wir haben also eine komplexe Komponente in mehrere einfache unterteilt.  Jetzt m√ºssen Sie f√ºr jede einfache Komponente √úberpr√ºfungen erstellen.  Bitte beachten Sie, dass die √ºbergeordnete Komponente "Agent" keine einzige Pr√ºfung hat, da das √úberwachungssystem ihren Status auf der Grundlage des Status seiner untergeordneten Komponenten berechnet.  Mit anderen Worten, wenn alle Aufgaben erfolgreich abgeschlossen wurden, arbeitet der Agent auch erfolgreich. <br><br>  Es gibt mehr als hundert Aufgaben im ASMO-System. Ist es wirklich notwendig, f√ºr jede Aufgabe eindeutige Pr√ºfungen zu erstellen?  Nat√ºrlich ist die Kontrolle besser, wenn wir f√ºr jede Aufgabe des Agenten eigene Spezialpr√ºfungen durchf√ºhren, aber in den meisten F√§llen reicht es aus, universelle Pr√ºfungen zu verwenden. <br><br>  Das ASMO-System verwendet nur universelle √úberpr√ºfungen f√ºr Aufgaben. Dies reicht aus, um die Systemleistung zu √ºberwachen. <br><br>  <b>√úberpr√ºfen Sie die Ausf√ºhrung</b> <br>  Die einfachste und effektivste √úberpr√ºfung ist eine √úberpr√ºfung des Fortschritts.  Die √úberpr√ºfung √ºberpr√ºft, ob die Aufgabe ohne Fehler ausgef√ºhrt wird.  Alle Aufgaben haben diese Pr√ºfung. <br><blockquote>  Validierungsalgorithmus <br><br>  Nach jeder Taskausf√ºhrung muss das Ergebnis der SUCCESS-Pr√ºfung an das √úberwachungssystem gesendet werden, wenn die Task erfolgreich war, oder ERROR, wenn die Ausf√ºhrung fehlgeschlagen ist. </blockquote>  Mit dieser √úberpr√ºfung k√∂nnen Sie die folgenden Probleme erkennen: <br><br><ol><li>  Die Aufgabe wird ausgef√ºhrt, schl√§gt jedoch fehl. </li><li>  Die Task wurde nicht mehr ausgef√ºhrt, z. B. eingefroren. </li></ol><br>  Betrachten wir genauer, wie diese Probleme gel√∂st werden. <br><br>  <b>Problem 1 - Die Aufgabe wird ausgef√ºhrt, schl√§gt jedoch fehl</b> <br>  Unten ist der Fall, wenn die Aufgabe ausgef√ºhrt wird, aber von 14:00 bis 16:00 fehlschl√§gt. <br><br><img src="https://habrastorage.org/webt/s0/rg/8p/s0rg8pg32epl1ncyrkwuoncpxiy.png"><br><br>  Die Abbildung zeigt, dass bei Fehlschlagen der Aufgabe das Signal sofort an das √úberwachungssystem gesendet wird und der Status der entsprechenden Pr√ºfung im √úberwachungssystem alarmiert. <br><br>  Bitte beachten Sie, dass im √úberwachungssystem der Status der Komponente vom Status der √úberpr√ºfung abh√§ngt.  Der Alarmstatus der Pr√ºfung √ºbersetzt alle √ºbergeordneten Komponenten in einen Alarm (siehe Abbildung unten). <br><br><img src="https://habrastorage.org/webt/fo/gl/yz/foglyzszffhzaf0mrpk_6my0jp0.png"><br><br>  <b>Problem 2 - Die Aufgabe funktioniert nicht mehr (h√§ngt)</b> <br>  Wie versteht das √úberwachungssystem, dass die Aufgabe eingefroren ist? <br><br>  Das Ergebnis der Pr√ºfung hat eine relevante Zeit, beispielsweise 1 Stunde.  Wenn eine Stunde vergeht und kein neues √úberpr√ºfungsergebnis vorliegt, setzt das √úberwachungssystem den Alarmstatus in der √úberpr√ºfung. <br><br><img src="https://habrastorage.org/webt/qk/sy/o7/qksyo76gplxby3hfwoxjsr3zvla.png"><br><br>  Im Bild oben um 14:00 Uhr wurden die Lichter ausgeschaltet.  Um 15:00 Uhr erkennt das √úberwachungssystem, dass das Testergebnis (ab 14:00 Uhr) schlecht ist, weil  Die Relevanzzeit ist abgelaufen (eine Stunde), es liegt jedoch kein neues Ergebnis vor, und die Pr√ºfung wird in den Alarmstatus versetzt. <br><br>  Um 16:00 Uhr wurde das Licht wieder eingeschaltet, das Programm beendet die Aufgabe und sendet das Ergebnis an das √úberwachungssystem. Der Verifizierungsstatus wird wieder erfolgreich. <br><br>  Was ist die G√ºltigkeitsdauer der Pr√ºfung? <br><br>  Die Relevanzzeit sollte l√§nger sein als der Ausf√ºhrungszeitraum der Aufgabe.  Ich empfehle, die relevante Zeit 2-3 mal l√§nger als die Dauer der Aufgabe einzustellen.  Dies ist erforderlich, um keine falschen Benachrichtigungen zu erhalten, wenn beispielsweise die Aufgabe l√§nger als gew√∂hnlich gedauert hat oder jemand das Programm neu geladen hat. <br><br>  <b>Fortschrittskontrolle</b> <br><br>  Das ASMO-System hat die Aufgabe ‚ÄûHerunterladen einer Prognose‚Äú, die einmal pro Stunde versucht, eine neue Prognose von einer externen Quelle herunterzuladen.  Der genaue Zeitpunkt, zu dem eine neue Prognose im externen System angezeigt wird, ist nicht bekannt, es ist jedoch bekannt, dass dies zweimal t√§glich geschieht.  Es stellt sich heraus, dass wenn es mehrere Stunden lang keine neue Prognose gibt, dies normal ist, aber wenn es l√§nger als einen Tag keine neue Prognose gibt, ist irgendwo etwas kaputt gegangen.  In einem externen Prognosesystem kann sich beispielsweise das Datenformat √§ndern, wodurch ASMO keine neue Prognoseversion sieht. <br><blockquote>  Validierungsalgorithmus <br><br>  Die Task sendet das Ergebnis der SUCCESS-Pr√ºfung an das √úberwachungssystem, wenn es m√∂glich ist, Fortschritte zu erzielen (neue Wettervorhersage herunterladen).  Wenn kein Fortschritt vorliegt oder ein Fehler aufgetreten ist, wird nichts an das √úberwachungssystem gesendet. <br><br>  Das Audit sollte ein relevantes Intervall haben, damit in dieser Zeit garantiert neue Fortschritte erzielt werden. </blockquote><img src="https://habrastorage.org/webt/4c/oa/ot/4coaotwdujcgv41vjexohnepxv8.png"><br><br>  Bitte beachten Sie, dass wir das Problem mit einer Verz√∂gerung erfahren, da das √úberwachungssystem wartet, bis der Zeitpunkt der Relevanz des letzten Testergebnisses abgelaufen ist.  Daher muss der Zeitpunkt der Relevanz der Pr√ºfung nicht zu lang sein. <br><br><h2>  Datenbank√ºberwachung </h2><br>  Um die Datenbank im ASMO-System zu steuern, f√ºhren wir die folgenden √úberpr√ºfungen durch: <br><br><ol><li>  √úberpr√ºfen Sie die Sicherungen </li><li>  √úberpr√ºfen des freien Speicherplatzes </li></ol><br>  <b>√úberpr√ºfen Sie die Sicherungen</b> <br>  In den meisten Anwendungen ist es wichtig, √ºber aktuelle Datenbanksicherungen zu verf√ºgen, damit Sie das Programm im Falle eines Serverausfalls auf einem neuen Server bereitstellen k√∂nnen. <br><br>  ASMO erstellt einmal pro Woche eine Sicherungskopie und sendet sie an das Repository.  Wenn dieser Vorgang erfolgreich abgeschlossen wurde, wird das Ergebnis der Erfolgspr√ºfung an das √úberwachungssystem gesendet.  Das Ergebnis der Pr√ºfung hat eine G√ºltigkeitsdauer von 9 Tagen.  Das hei√üt,  Um die Erstellung von Backups zu steuern, wird der oben untersuchte Mechanismus zum √úberpr√ºfen des Fortschritts verwendet. <br><br>  <b>√úberpr√ºfen des freien Speicherplatzes</b> <br>  Wenn auf der Festplatte nicht gen√ºgend freier Speicherplatz vorhanden ist, kann die Datenbank nicht normal funktionieren. Daher ist es wichtig, die Menge an freiem Speicherplatz zu steuern. <br><br>  Es ist praktisch, Metriken zu verwenden, um die numerischen Parameter zu √ºberpr√ºfen. <br><blockquote>  <b>Metrik</b> ist eine numerische Variable, deren Wert an das √úberwachungssystem √ºbergeben wird.  Das √úberwachungssystem √ºberpr√ºft Schwellenwerte und berechnet den Status der Metrik. </blockquote>  Unten sehen Sie ein Bild davon, wie die Komponente ‚ÄûDatenbank‚Äú im √úberwachungssystem aussieht: <br><br><img src="https://habrastorage.org/webt/me/k2/3i/mek23iw6yn36d1ocos5hq_3pxga.png"><br><br><h2>  Server√ºberwachung </h2><br>  Zur √úberwachung des Servers verwenden wir die folgenden √úberpr√ºfungen und Metriken: <br><br>  <b>1. Freier Speicherplatz</b> <br>  Wenn der Speicherplatz knapp wird, kann die Anwendung nicht mehr arbeiten.  Wir verwenden 2 Schwellenwerte: Die erste Ebene ist WARNUNG, die zweite Ebene ist ALARM. <br><br>  <b>2. Der durchschnittliche RAM-Wert in Prozent pro Stunde</b> <br>  Wir verwenden den Durchschnittswert pro Stunde als  Wir sind nicht an seltenen Rennen interessiert. <br><br>  <b>3. Der Durchschnittswert der CPU in Prozent pro Stunde</b> <br>  Wir verwenden den Durchschnittswert pro Stunde als  Wir sind nicht an seltenen Rennen interessiert. <br><br>  <b>4. Ping-Check</b> <br>  √úberpr√ºft, ob der Server online ist.  Das √úberwachungssystem kann diese Pr√ºfung durchf√ºhren, ohne dass Code geschrieben werden muss. <br><br>  Unten sehen Sie ein Bild davon, wie die ‚ÄûServer‚Äú -Komponente im √úberwachungssystem aussieht: <br><br><img src="https://habrastorage.org/webt/pw/pp/xb/pwppxbrmsqreuojevziycqoda7q.png"><br><br><h2>  Ger√§te√ºberwachung </h2><br>  Ich werde Ihnen sagen, wie Daten empfangen werden.  F√ºr jeden Punkt der Stra√üensteuerung (MPC) im Aufgabenplaner gibt es eine Aufgabe, z. B. "MPC M2 km 200 abfragen".  Die Aufgabe empf√§ngt alle 30 Minuten Daten von allen MPC-Ger√§ten. <br><br>  <b>Kommunikationskanalproblem</b> <br>  Die meisten Ger√§te befinden sich au√üerhalb der Stadt. F√ºr die Daten√ºbertragung wird ein GSM-Netz verwendet, das nicht stabil funktioniert (dh das Netz ist nicht vorhanden). <br><br>  Aufgrund h√§ufiger Netzwerkausf√§lle sah die erste √úberpr√ºfung der MPC-Umfrage bei der √úberwachung folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/0e/at/me/0eatme_jcfrfkkzu8k7tkimmlpc.png"><br><br>  Es wurde klar, dass dies keine funktionierende Option ist, da viele falsche Warnungen zu den Problemen eingegangen sind.  Dann wurde f√ºr jedes Ger√§t entschieden, eine "Fortschrittspr√ºfung" zu verwenden, d.h.  Nur das Erfolgssignal wird an das √úberwachungssystem gesendet, wenn das Ger√§t fehlerfrei abgefragt wird.  Die Relevanzzeit wurde auf 5 Stunden eingestellt. <br><br><img src="https://habrastorage.org/webt/ql/pm/4f/qlpm4fedlrheg_dw33mb9uspvay.png"><br><br>  Jetzt sendet die √úberwachung nur dann eine Benachrichtigung √ºber Probleme, wenn das Ger√§t l√§nger als 5 Stunden nicht abgefragt werden kann.  Mit hoher Wahrscheinlichkeit handelt es sich nicht um Fehlalarme, sondern um echte Probleme. <br><br>  Unten sehen Sie ein Bild davon, wie das Ger√§t in einem √úberwachungssystem aussieht: <br><br><img src="https://habrastorage.org/webt/a7/o8/m1/a7o8m1fjmicudpjx9ynmepfl-jg.png"><br><br>  <b>Wichtig!</b> <br>  Wenn das GSM-Netz nicht mehr funktioniert, werden nicht alle MPC-Ger√§te abgefragt.  Um die Anzahl der Buchstaben vom √úberwachungssystem zu verringern, abonnieren unsere Ingenieure Benachrichtigungen √ºber Komponentenprobleme mit dem Typ "MPC" und nicht mit "Ger√§t".  Auf diese Weise k√∂nnen Sie eine Benachrichtigung f√ºr jeden MAC erhalten, anstatt f√ºr jedes Ger√§t eine separate Benachrichtigung zu erhalten. <br><br><h2>  Das endg√ºltige √úberwachungsschema ASMO </h2><br>  Lassen Sie uns alles zusammenfassen und sehen, welche Art von √úberwachungsschema wir haben. <br><br><img src="https://habrastorage.org/webt/b7/1l/nr/b71lnrqwuh-gv2boh9pbd7uao3y.png"><br><br><h2>  Fazit </h2><br>  Fassen wir zusammen. <br>  Was hat uns die √úberwachung der Leistung des ASMO gebracht? <br><br>  <b>1. Verk√ºrzte Fehlerbehebungszeit</b> <br>  Fr√ºher haben wir von Benutzern Fehler erfahren, aber nicht alle Benutzer melden Fehler.  So kam es, dass wir eine Woche nach ihrem Erscheinen von der Fehlfunktion einer Komponente des Systems erfuhren.  Jetzt benachrichtigt uns das √úberwachungssystem √ºber Probleme, sobald das Problem erkannt wird. <br><br>  <b>2. Erh√∂hte Systemstabilit√§t</b> <br>  Da Fehler fr√ºher behoben wurden, begann das gesamte System wesentlich stabiler zu arbeiten. <br><br>  <b>3. Reduzierung der Anzahl der technischen Supportanrufe</b> <br>  Viele Probleme sind jetzt behoben, bevor Benutzer davon erfahren.  Benutzer haben weniger Kontakt zum technischen Support.  All dies hat einen guten Einfluss auf unseren Ruf. <br><br>  <b>4. Steigerung der Kunden- und Benutzerbindung</b> <br>  Der Kunde stellte positive Ver√§nderungen in der Stabilit√§t des Systems fest.  Es ist weniger wahrscheinlich, dass Benutzer Probleme mit dem System haben. <br><br>  <b>5. Reduzieren Sie die Kosten f√ºr den technischen Support</b> <br>  Wir haben aufgeh√∂rt, alle √úberpr√ºfungen manuell durchzuf√ºhren.  Jetzt sind alle Pr√ºfungen automatisiert.  Fr√ºher haben wir von Benutzern etwas √ºber Probleme gelernt. Oft war es schwierig zu verstehen, √ºber welches Problem der Benutzer sprach.  Jetzt werden die meisten Probleme vom √úberwachungssystem gemeldet, Benachrichtigungen enthalten technische Daten, auf denen immer klar ist, was und wo es kaputt gegangen ist. <br><br>  <b>Wichtig!</b> <br>  Sie k√∂nnen kein √úberwachungssystem auf demselben Server installieren, auf dem Ihre Anwendungen ausgef√ºhrt werden.  Wenn der Server abst√ºrzt, funktionieren die Anwendungen nicht mehr und es wird niemand eine Benachrichtigung dar√ºber senden. <br><br>  Das √úberwachungssystem sollte auf einem separaten Server in einem anderen Rechenzentrum arbeiten. <br><br>  Wenn Sie im neuen Rechenzentrum keinen dedizierten Server verwenden m√∂chten, k√∂nnen Sie das Cloud-√úberwachungssystem verwenden.  Unser Unternehmen verwendet das Zidium-Cloud-√úberwachungssystem, Sie k√∂nnen jedoch jedes andere √úberwachungssystem verwenden.  Die Kosten f√ºr ein Cloud-√úberwachungssystem sind niedriger als f√ºr die Anmietung eines neuen Servers. <br><br>  <b>Empfehlungen:</b> <br><br><ol><li>  Brechen Sie Anwendungen und Systeme in Form eines Baums von Komponenten so detailliert wie m√∂glich auf, damit Sie bequem verstehen k√∂nnen, wo und was defekt ist, und die Steuerung vollst√§ndiger ist. </li><li>  Verwenden Sie Pr√ºfungen, um den Zustand einer Komponente zu √ºberpr√ºfen.  Es ist besser, viele einfache Pr√ºfungen zu verwenden als eine komplexe. </li><li>  Schwellenwertmetrikwerte werden auf der Seite des √úberwachungssystems konfiguriert und schreiben nicht in den Code.  Dies erspart Ihnen das Neukompilieren, Neukonfigurieren oder Neustarten der Anwendung. </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden Sie f√ºr benutzerdefinierte √úberpr√ºfungen die aktuelle Zeit mit einem Rand, um keine falschen Benachrichtigungen zu erhalten, da eine √úberpr√ºfung etwas l√§nger als gew√∂hnlich dauerte. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stellen Sie sicher, dass die Komponenten im √úberwachungssystem nur dann rot werden, wenn ein Problem vorliegt. </font><font style="vertical-align: inherit;">Wenn sie f√ºr nichts rot werden, h√∂ren Sie auf, auf Benachrichtigungen des √úberwachungssystems zu achten, und ihre Bedeutung geht verloren.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie noch kein √úberwachungssystem verwenden, legen Sie los! </font><font style="vertical-align: inherit;">Es ist nicht so schwierig, wie es scheint. </font><font style="vertical-align: inherit;">Werfen Sie einen Blick auf den gr√ºnen Komponentenbaum, den Sie selbst gez√ºchtet haben.</font></font><br><br>  Viel Gl√ºck. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463121/">https://habr.com/ru/post/de463121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463105/index.html">Mein vierter Tag mit Haiku: Installations- und Bootprobleme</a></li>
<li><a href="../de463107/index.html">ShIoTiny: kleine Automatisierung, das Internet der Dinge oder ‚Äûsechs Monate vor den Ferien‚Äú</a></li>
<li><a href="../de463113/index.html">Daten und Modelle Versionskontrolle im Computer Vision-Meetup</a></li>
<li><a href="../de463115/index.html">Das T√ºrproblem im Shooter-Design</a></li>
<li><a href="../de463117/index.html">Vorladen in PHP 7.4</a></li>
<li><a href="../de463123/index.html">Assembler-Codegenerator-Bibliothek f√ºr AVR-Mikrocontroller. Teil 3</a></li>
<li><a href="../de463125/index.html">OOP in Bildern</a></li>
<li><a href="../de463127/index.html">USV-√úberwachung. Teil Zwei - Analytics automatisieren</a></li>
<li><a href="../de463135/index.html">In welchen L√§ndern ist es rentabel, 2019 IT-Unternehmen zu registrieren?</a></li>
<li><a href="../de463137/index.html">Selbst wenn Sie ein Spieledesigner sein m√∂chten, wird Ihnen niemand beibringen, wie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>