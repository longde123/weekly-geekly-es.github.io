<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👩‍👦 ⌛️ 👪 Keranjang Mailchimp yang Ditinggalkan: Panduan untuk Malas 🍪 🧑 💃🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pertama, sedikit mengomel :) Cepat atau lambat, toko online mana pun memiliki pertanyaan untuk menyiapkan keranjang yang ditinggalkan. Statistik dan p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Keranjang Mailchimp yang Ditinggalkan: Panduan untuk Malas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421393/">  Pertama, sedikit mengomel :) Cepat atau lambat, toko online mana pun memiliki pertanyaan untuk menyiapkan keranjang yang ditinggalkan.  Statistik dan perasaan kehilangan uang mengisap di perut tidak menyayangkan siapa pun. <br><br><h4>  Persentase keranjang terlantar dari 2006 hingga 2017 </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/a39/77d/91a/a3977d91a0ebd3217886009fec230985.jpg" alt="Persentase keranjang terlantar dari 2006 hingga 2017"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber</a></i> <br><br>  Persentase keranjang terlantar untuk kuartal pertama 2018 menurut industri: <br><img src="https://habrastorage.org/getpro/habr/post_images/633/2b5/be6/6332b5be64d04bbd4ca0d1defe9e7b14.jpg" alt="Persentase keranjang terlantar untuk kuartal pertama 2018 menurut industri"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber</a></i> <br><br>  Pada saat yang sama, terlepas dari statistik yang tersedia secara umum, sebagian besar toko online tidak menggunakan fitur yang tersedia dan tidak menghubungkan keranjang yang ditinggalkan.  Sebuah studi "rumah" baru-baru ini dari EmailSoldiers jelas menunjukkan bahwa sebagian besar toko tidak peduli sama sekali. <br><a name="habracut"></a><br><h4>  Statistik terkini untuk keranjang terlantar yang terhubung </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/fd4/b56/83f/fd4b5683f724d5004046e14523b95f69.jpg" alt="Penelitian EmailSoldiers"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber</a></i> <br><br>  Pada saat yang sama, semua orang (dan kami juga bukan orang suci) mengejar lalu lintas, menjalankan iklan dan materi iklan, tetapi bahkan tidak mencoba mengembalikan orang yang bangkrut pada saat terakhir. <br><br>  Namun dalam iterasi pertama Anda bisa mendapatkan peningkatan pesanan menggunakan surat tanpa konten dinamis, Anda hanya perlu mengkonfigurasinya.  Berusaha hanya sekali sehingga di latar belakang itu menghasilkan uang - bukankah ini dongeng? <br><br>  Secara alami, surat dengan konten dinamis tempat barang dari keranjang ditarik dapat berfungsi lebih baik.  Atau mungkin anak kucing lain dengan mata sedih akan lebih berpengaruh bagi audiens Anda.  Atau Anda menarik barang-barang yang direkomendasikan ke barang-barang di keranjang dan memastikan bahwa barang-barang tersebut dibeli lebih sering dari surat dan menambah rata-rata cek.  Atau Anda akan dapat membuat serangkaian surat dari mana konversi akan lebih besar. <br><br>  Anda dapat meningkatkan dan menguji surat dari keranjang yang ditinggalkan ke cita-cita yang tidak dapat dicapai, tetapi surat yang pernah dikonfigurasikan sudah jauh lebih baik daripada tidak sama sekali. <br><br><h4>  Konversi untuk keranjang yang ditinggalkan menurut RetailRocket </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/df2/2f9/684/df22f968450761e23695591fcd2931af.jpg" alt="Konversi keranjang ditinggalkan RetailRocket"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber</a></i> <br><br>  Maka, Kamerad <a href="">Artem Aleksandrov dan saya</a> mulai memperkenalkan keranjang dari dua sisi. <br><br><h2>  Implementasi teknis </h2><br><h4>  TOR untuk integrasi </h4><br>  Jelaskan secara singkat esensi dari tugas tersebut. <br><br>  Tugas: sambungkan kereta yang ditinggalkan untuk situs xxx.xx dengan layanan pengiriman Mailchimp <br><br>  Kami memberikan semua materi yang diperlukan. <br><br>  Kunci API: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX-usXX <br><br>  Di mana mendapatkan kuncinya? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9f/511/fc0/f9f511fc0d1ff7d44d41d19463cd362e.jpg" alt="Di mana mendapatkan kuncinya?"><br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kami memberikan tautan ke dokumentasi</a> <br><br>  ID sheet tempat kami menghubungkan Store: XXXXXXXXXX <br><br>  Di mana saya bisa mendapatkan lembar ID? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/215/996/6cb/2159966cb62dc60e25079b86c5905aca.jpg" alt="Di mana saya bisa mendapatkan lembar ID?"><br><br>  Layanan surat harus dibuat terlebih dahulu.  Segera setelah permintaan API diterima oleh layanan pengiriman, pesan secara otomatis dihasilkan dan penerima ditambahkan ke antrian untuk dikirim. <br><br>  Untuk kasus kami, kami memilih logika berikut untuk mengirim keranjang yang ditinggalkan: <br>  pengguna yang berwenang di situs menambahkan barang ke keranjang, tidak menyelesaikan transaksi dan tidak menyelesaikan pesanan, keranjang tetap tidak berubah selama 1 jam.  Setelah itu, permintaan dikirim ke Mailchimp, di mana email, komposisi pesanan pengguna, gambar produk, harga barang dan tautan ke keranjang pengguna ditransmisikan. <br><br><h4>  Templat Tata Letak </h4><br>  Saat membuat otomatisasi untuk keranjang yang ditinggalkan, mailchim segera bertanya apakah akan ada satu atau beberapa huruf dan menyarankan memilih toko yang terhubung. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12d/288/b80/12d288b80aed84cc9ac1b3b81b4d3d6d.jpg" alt="Buat otomatisasi untuk keranjang yang ditinggalkan di Mailchimp"><br><br>  Dalam templat dasar, mch menawarkan tiga pilihan: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f2/402/d62/7f2402d625f7174f3a18f42849080bea.jpg" alt="Pilih huruf untuk keranjang Mailchimp yang ditinggalkan"><br><ol><li>  Keranjang yang ditinggalkan dengan barang dinamis </li><li>  Keranjang yang ditinggalkan dengan rekomendasi bahan makanan (perlu dikonfigurasi secara terpisah) </li><li>  Keranjang yang ditinggalkan tanpa barang (hanya surat teks) </li></ol><br>  Dalam tradisi terbaik, jika Anda punya waktu, Anda dapat membuat keranjang sendiri. <br><br>  Produk dinamis tanpa gaya terlihat seperti ini (lupakan lekukan, mereka ditampilkan dengan buruk di sini): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> *|ABANDONED_CART:[$total=3]|* <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*|CART:URL|*"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*|PRODUCT:TITLE|*"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">target</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_blank"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*|PRODUCT:IMAGE_URL|*"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> *|PRODUCT:TITLE|* — *|PRODUCT:PRICE|* <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> *|END:ABANDONED_CART|* <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> *|END:ABANDONED_CART|* <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Tampaknya jika Anda mengubah angka dalam variabel <b>* | ABANDONED_CART: [$ total = 3] | *</b> , maka surat itu akan menampilkan jumlah barang yang berbeda, tetapi tidak, letakkan setidaknya 5, setidaknya 100, mch menolak untuk menunjukkan kuantitas lain. <br><br>  Dan, yang juga sedikit aneh, variabel <b>* | PRODUCT: PRICE | *</b> diganti dengan nilai format RUB288, dan untuk beberapa alasan juga tidak mungkin untuk mengubah ini, tetapi lebih lanjut tentang itu nanti. <br><br>  Untuk perubahan, kami mencoba mengganti variabel dengan jumlah game dan dengan total biaya pesanan, yang kami kirimkan melalui api, tetapi mailchimp di sini mengatakan tidak.  Baiklah, jadi itu. <br><br><h4>  Sepatah kata untuk programmer :) </h4><br>  Dengan mailchimp ada pengalaman historis integrasi dengan mandrill layanan pihak ketiga mereka, semuanya sederhana dan jelas di sana.  Dokumentasi yang sangat ramah (tentu saja, dalam bahasa Inggris), tetapi tidak ada sisi yang kasar dan berhasil sejak tendangan pertama. <br><br>  Juga, mekanisme berlangganan melalui formulir khusus telah diperkenalkan di situs kami.  Di sini, kami sepenuhnya merasakan pernyataan dan pernyataan ambiguitas yang diremehkan.  Bahasa Inggris bukan masalah bagi pengembang yang berpengalaman, tetapi pengetahuan dialek Klingon tidak tersirat secara default. <br><br>  Data awal adalah: bahasa php7 dan kerangka kerja yii2, yang telah berkembang pesat dengan ekosistemnya.  Yaitu  Kami sudah memiliki 6 proyek kecil yang mencoba menggunakan komponen umum baik di backend dan front-end.  Dengan demikian, pelaksanaan tugas apa pun membutuhkan penyelesaian proyeknya secara independen, tetapi ini tidak menyiratkan kerangka kerja independensi, karena  Anda harus membayarnya dengan jam kerja manusia, yang selalu ada kekurangan. <br><br>  Setelah menerima tugas integrasi, pertama-tama kita harus melihat-lihat.  Apa yang diberikan kepada kita?  Pertama, layanan mailchimp yang perlu Anda berteman.  Kami pergi ke github dan melihat bahwa ada cukup banyak implementasi.  Tapi pilihannya sederhana - paket paling populer dari bintang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">1.5k</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">drewm / mailchimp-api</a> ). <br><br>  Paket ini memberikan pembungkus sederhana atas interaksi-istirahat dengan penyimpanan surat.  Kami hanya dapat memperoleh ini dengan logika kami. <br><br>  Kedua, kami diberikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> .  Berdasarkan dokumentasi, kami memiliki sumber daya Toko dengan sumber daya bersarang: Keranjang, Pelanggan, Pemesanan, Produk, aturan Promo.  Untuk keranjang yang ditinggalkan tanpa produk yang direkomendasikan, kami hanya membutuhkan Produk, Keranjang, dan Pelanggan.  Keranjang, pada gilirannya, terdiri dari rangkaian garis Keranjang, dan Produk berisi varian Produk. <br><br>  Kami mendekomposisi tugas sebagai berikut: <br><br><ol><li>  Unggah data toko ke Toko </li><li>  Unduh semua produk yang dapat dibeli di Produk </li><li>  Siapkan pemuatan keranjang dengan pengguna sesuai jadwal </li></ol><br>  Ok, ayo pergi.  Pertama-tama, kami mengambil esensi dari "toko".  Kami memutuskan untuk segera menggunakan versi uji dan tempur toko dan, tergantung pada variabel lingkungan yang bertanggung jawab untuk mode perdananya, kami bekerja baik dengan satu toko atau dengan yang lain. <br><br>  Untuk mengunduh data toko, kami mengetuk permintaan pos di / ecommerce / store dengan serangkaian parameter berikut: <br><br><pre> <code class="php hljs">[ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'dev.***.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'list_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'****'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'*** - test'</span></span>, <span class="hljs-string"><span class="hljs-string">'domain'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'dev.***.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'email_address'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'admin@***.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'currency_code'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'RUB'</span></span>, <span class="hljs-string"><span class="hljs-string">'primary_locale'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'money_format'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'₽'</span></span>, ]</code> </pre> <br>  Ada beberapa opsi lagi, tetapi semuanya tergantung pada kebutuhan.  Karena  kami tidak akan menggunakan detail kontak toko dalam surat, kami tidak mengisi bidang telepon, alamat, zona waktu, dll. <br>  Tapi kejutan kecil menunggu kami.  Bidang money_format tampaknya dibuat khusus untuk kemampuan menyajikan harga dalam format yang nyaman bagi kami.  Tetapi ketika membangun templat keranjang yang ditinggalkan, kepala surat dengan keras kepala mengganti RUB sebelum nomor itu.  MailChimp, hentikan! <br><br>  Setelah mengunduh, kita dapat memeriksa data menggunakan permintaan-mendapatkan di alamat / ecommerce / store untuk melihat semua toko yang dimuat, atau / ecommerce / stores / {id} untuk mendapatkan data di toko tertentu. <br><br>  Sekarang Anda dapat menambahkan semua data lainnya, karena Store adalah titik root di pohon data kami, karena  kami akan mengunggah semua data lain ke toko tertentu. <br><br>  Jadi, agar KIA bisa mengganti barang dalam keranjang yang ditinggalkan, ia perlu memberi makan barang-barang ini.  Untuk melakukan ini, kami memiliki alamat / ecommerce / store / {store_id} / produk, tempat kami mengirim permintaan pasca untuk membuat produk dalam sistem. <br><br><pre> <code class="php hljs">[ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'742'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'handle'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'kastrulya'</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://***.ru/catalog/kastrulya/'</span></span>, <span class="hljs-string"><span class="hljs-string">'description'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' —    .  ,       .  ,        !           !'</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'vendor'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-string"><span class="hljs-string">'image_url'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://***.ru/images/742/product.png'</span></span>, <span class="hljs-string"><span class="hljs-string">'variants'</span></span> =&gt; [ [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'742'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://***.ru/catalog/kastrulya/'</span></span>, <span class="hljs-string"><span class="hljs-string">'price'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">890</span></span>, <span class="hljs-string"><span class="hljs-string">'sku'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'KA453'</span></span>, <span class="hljs-string"><span class="hljs-string">'inventory_quantity'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-string"><span class="hljs-string">'image_url'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://***.ru/images/742/product.png'</span></span>, <span class="hljs-string"><span class="hljs-string">'visibility'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'visible'</span></span>, ], ], ]</code> </pre><br>  Apa yang luar biasa?  Pertama, setiap produk harus terdiri dari setidaknya satu penawaran produk.  Intinya, Produk adalah wadah untuk memuat penawaran produk.  Selain itu, id produk dan penawaran produk dapat bersinggungan, karena ini adalah sumber daya yang berbeda dalam api KIA. <br><br>  Dan di sini pernyataan tentang dokumentasi KIA dimulai.  Saya harus menebak, walaupun itu tidak sulit, tetapi Anda bisa melakukannya secara normal, dan tidak seperti biasanya. <br><br>  Bidang pegangan telah dideskripsikan sebagai “pegangan suatu produk”.  Ok, setelah berkonsultasi, kami memutuskan bahwa ini adalah bagian dari URL yang terkait dengan produk itu sendiri (cnc).  Tapi ini dikonfirmasi hanya selama tes. <br><br>  Anda juga dapat melampirkan serangkaian gambar ke produk, tetapi kami memutuskan bahwa itu tidak akan berguna bagi kami dan oleh karena itu hanya gambar utama yang dimuat ke produk dan untuk setiap penawaran produk. <br><br>  Dan di sini kami punya masalah, karena alasan tertentu barang tidak muncul di templat bagan pos. <br><br>  Kami mulai menggali ke dermaga untuk Produk.  Dan mereka menemukan bidang visibilitas dengan deskripsi mewah: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/525/123/aae/525123aae8eff2a8a1a595072d92b2f6.jpg" alt="deskripsi bidang visibilitas"><br><br>  Nah, ketik String!  Dan apa yang bisa ditransfer ke sana?  Mengapa tidak mungkin menggambarkan semua arti yang mungkin?!  Saya dapat mengirim ke sana, misalnya, "tunjukkan padaku pls!". <br><br>  Untungnya ada contoh permintaan! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/57b/e08/dbe/57be08dbe97502fc302cc4de5dc0e4bf.jpg" alt="contoh permintaan"><br><br>  Ya, ini tidak membatalkan masalah.  Saya tidak tahu nilai lain apa yang mungkin berguna. <br><br>  Semua orang diatasi dengan ini!  Sekarang pemasar email dapat memverifikasi ketersediaan barang dalam sistem melalui membangun templat dengan partisipasi barang atau semuanya melalui permintaan dapatkan yang sama menggunakan konsol. <br><br>  Selanjutnya, kita dihadapkan dengan tugas memuat keranjang yang ditinggalkan di KIA.  Awalnya, 2 pilihan muncul di benak: <br><br><ol><li>  Setiap kali Anda mengganti keranjang (menambah / menghapus barang), kami mengulangi tindakan ini dalam KIA.  Dari minus - sejumlah besar permintaan ke layanan eksternal segera menunjukkan dirinya. </li><li>  Sekali setiap n menit, perhatikan keranjang yang belum berubah lebih dari satu jam yang lalu.  Lalu kami kirim ke KIA.  Hanya ada satu masalah - untuk melacak keranjang yang dilanjutkan setelah mereka pergi ke KIA. </li></ol><br>  Pertama, kami membuat permintaan ke database kami (selanjutnya disebut sebagai DB) untuk data kami di jendela dari 1 jam hingga 3. Mengapa 3?  Satu jam setelah perubahan terakhir, kami mengirim keranjang ke sistem.  Dalam KIA interval minimum yang mungkin untuk mengirim keranjang adalah 1 jam.  Karena itu, secara teori, setelah 2 jam ± 5 menit, surat akan dikirim.  Jadi 3 jam adalah nilai bahkan dengan margin. <br><br>  Setelah menerima data dari database, kami membuat permintaan dapatkan di alamat / ecommerce / store / {store_id} / troli.  Dengan demikian, kami mendapatkan semua keranjang yang duduk di sistem e-commerce dan menunggu giliran mereka untuk mengirim (atau sudah dikirim).  Mengapa kita membutuhkan ini?  Diperlukan untuk sinkronisasi dengan data kami.  Kami akan mengirim semua keranjang yang diterima dari basis data, tetapi kami perlu menghapus keranjang yang tidak lagi dalam kisaran 1-3 jam.  Setelah 3x - sudah data yang tidak relevan.  Hingga satu jam - keranjang yang bisa diperbarui lagi, atau memesan. <br><br>  Untuk menghapus, kita hanya perlu menemukan perbedaan antara dua array / koleksi keranjang. <br>  Setelah menerima keranjang yang perlu dihapus, kami mengirim permintaan penghapusan / ecommerce / stores / {store_id} / carts / {cart_id}. <br><br>  Selanjutnya, kami mengambil keranjang untuk diunduh dan mengirimkannya melalui pos-permintaan ke sistem dalam satu siklus. <br><br>  Parameter keranjang terlihat seperti ini: <br><br><pre> <code class="php hljs">[ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1207'</span></span>, <span class="hljs-string"><span class="hljs-string">'customer'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'25'</span></span>, <span class="hljs-string"><span class="hljs-string">'email_address'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'email@example.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'opt_in_status'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, ], <span class="hljs-string"><span class="hljs-string">'currency_code'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'RUB'</span></span>, <span class="hljs-string"><span class="hljs-string">'order_total'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1597</span></span>, <span class="hljs-string"><span class="hljs-string">'checkout_url'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://***.ru/cart/abandoned/?cart=eyJpdGVtcyI6eyI1OTgwIjoxLCIzNDA0IjoxLCI3NzMiOjEsIjkwNTgiOjEsIjkwOTEiOjEsIjE4ODciOjEsIjc4NCI6MSwiNTExMSI6MSwiODA1MyI6MSwiMTk0MSI6MSwiNTQ0NSI6MSwiNzk1NCI6MywiOTA2NyI6NCwiOTA2NSI6NCwiNzg0MyI6MSwiOTA2NiI6M30sInByb21vY29kZSI6bnVsbH0%253D'</span></span>, <span class="hljs-string"><span class="hljs-string">'lines'</span></span> =&gt; [ <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'123'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'5980'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_variant_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'5980'</span></span>, <span class="hljs-string"><span class="hljs-string">'quantity'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'price'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">841</span></span>, ], <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'124'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'3404'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_variant_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'3404'</span></span>, <span class="hljs-string"><span class="hljs-string">'quantity'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'price'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">756</span></span>, ], ], ]</code> ? //***.Ru/cart/abandoned/ keranjang = eyJpdGVtcyI6eyI1OTgwIjoxLCIzNDA0IjoxLCI3NzMiOjEsIjkwNTgiOjEsIjkwOTEiOjEsIjE4ODciOjEsIjc4NCI6MSwiNTExMSI6MSwiODA1MyI6MSwiMTk0MSI6MSwiNTQ0NSI6MSwiNzk1NCI6MywiOTA2NyI6NCwiOTA2NSI6NCwiNzg0MyI6MSwiOTA2NiI6M30sInByb21vY29kZSI6bnVsbH0% 253D', <code class="php hljs">[ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1207'</span></span>, <span class="hljs-string"><span class="hljs-string">'customer'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'25'</span></span>, <span class="hljs-string"><span class="hljs-string">'email_address'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'email@example.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'opt_in_status'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, ], <span class="hljs-string"><span class="hljs-string">'currency_code'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'RUB'</span></span>, <span class="hljs-string"><span class="hljs-string">'order_total'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1597</span></span>, <span class="hljs-string"><span class="hljs-string">'checkout_url'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://***.ru/cart/abandoned/?cart=eyJpdGVtcyI6eyI1OTgwIjoxLCIzNDA0IjoxLCI3NzMiOjEsIjkwNTgiOjEsIjkwOTEiOjEsIjE4ODciOjEsIjc4NCI6MSwiNTExMSI6MSwiODA1MyI6MSwiMTk0MSI6MSwiNTQ0NSI6MSwiNzk1NCI6MywiOTA2NyI6NCwiOTA2NSI6NCwiNzg0MyI6MSwiOTA2NiI6M30sInByb21vY29kZSI6bnVsbH0%253D'</span></span>, <span class="hljs-string"><span class="hljs-string">'lines'</span></span> =&gt; [ <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'123'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'5980'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_variant_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'5980'</span></span>, <span class="hljs-string"><span class="hljs-string">'quantity'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'price'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">841</span></span>, ], <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'124'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'3404'</span></span>, <span class="hljs-string"><span class="hljs-string">'product_variant_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'3404'</span></span>, <span class="hljs-string"><span class="hljs-string">'quantity'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'price'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">756</span></span>, ], ], ]</code> </pre><br>  Dan lagi, rubrik favorit kami adalah "tebak cara kerja bidang ini."  Misalnya, dengan metode poking ilmiah, terungkap bahwa adalah mungkin untuk tidak membuat pembeli dengan permintaan terpisah.  Diperlukan untuk mentransfer set bidang minimum yang diperlukan, dan itu akan secara otomatis dibuat jika tidak ada dalam sistem.  Dalam kasus kami, kami membatasi diri untuk id, email, opt_in_status.  Parameter terakhir bertanggung jawab untuk status langganan pengguna di lembar kami.  Jika itu benar, maka ini berarti negara berlangganan, jika tidak transaksional. <br><br>  Daftar produk dimuat tanpa masalah melalui larik Cart Lines, yang pada gilirannya adalah sumber daya entitas Cart.  Yaitu  kami dapat mengelola set ini secara terpisah dengan permintaan lainnya. <br><br>  Yah, itu saja, sepertinya?  Tapi tidak. <br><br>  Saat menguji, kami perhatikan bahwa mengirim keranjang yang sama, hanya dikirimkan satu kali.  Meskipun kami menghapusnya dari sistem dan mengunduh lagi.  Tidak ada yang dikatakan di mana pun, tidak satu kata pun!  Sebagai hasilnya, secara empiris, dengan bantuan beberapa ibu, kami mengambil sebagai dasar hipotesis bahwa keranjang dengan id yang sama dapat dikirim hanya sekali. <br><br>  Di sini saya sepenuhnya setuju dengan pembuat bahwa pembatasan ini menyelamatkan kami dari pengguna yang melakukan spam.  Tapi tulis tentang itu!  Kami tidak membutuhkan pencarian, kami memiliki cukup banyak kesalahan mistik dalam kode yang kami tulis. <br><br>  Setelah kami melakukan semua ini, KIA mulai mengirimi kami surat-surat indah tentang keranjang yang ditinggalkan.  Dan kemudian pertanyaan kedua muncul.  Jika pengguna telah melempar keranjang dan kembali dari surat ke akunnya sendiri, yaitu, ia diizinkan pada saat mengklik tautan, maka ia akan masuk ke keranjangnya tanpa masalah.  Dan ternyata surat itu mengatakan "hidup!  ambil keranjangmu kembali! ", dan ketika kita menyeberanginya kita berkata," oops, ada yang hilang!  Kami tidak menyentuh apa pun!  Itu sendiri! " <br><br>  Diputuskan untuk menyandikan komposisi keranjang menjadi string dan meneruskannya ke checkout_url saat mengirim keranjang ke KIA.  Dan ketika Anda pergi ke situs, tangkap garis ini, decode dan buang semua barang di keranjang, jangan lupa untuk mengatur ulang sepenuhnya sebelum itu. <br><br>  Jadi, apa pun browser yang kami kirimkan kepada pengguna, ia mendapatkan keranjangnya, seperti yang kami janjikan.  Satu-satunya negatif adalah bahwa ia hanya dapat masuk.  Tetapi untuk mengotorisasi melalui tautan adalah perilaku buruk, dan memang itu adalah bisnis yang berbahaya, pertama-tama untuk klien kami. <br>  Apa hasilnya?  Pada prinsipnya, tidak ada masalah khusus selama implementasi, karena sangat sering tanggapan KIA membantu kesalahan terkait dengan validasi bidang yang ditransfer.  Tetapi akan ada lebih sedikit lagi dari mereka jika mereka biasanya secara manusiawi menggambarkan semua seluk-beluk pekerjaan KIA ini dan menggambarkan bidang-bidang tersebut secara lebih rinci. <br><br><h2>  Laporkan pengaturan di Google.Analytics </h2><br>  Untuk melacak keberhasilan seluruh operasi, Anda harus mengonfigurasi dan melihat laporan secara analitik secara berkala.  Bayangkan bahwa semua orang, seperti orang dewasa, memiliki e-commerce yang terhubung, jika tidak keajaiban tidak akan berhasil :) <br><br>  Untuk mengumpulkan laporan baru untuk keranjang yang ditinggalkan, buka "Laporan Saya": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/afe/749/f87/afe749f87d1c6bd4e5a0810dab40b4ef.jpg" alt="Laporan saya"><br><br>  Selanjutnya "Tambah laporan": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/288/8bd/ba2/2888bdba2a5749ccc90c88c3f5c80f49.jpg" alt="Tambahkan laporan"><br><br>  Dan setelah itu kita tambahkan parameter yang akan kita lacak.  Kami memutuskan bahwa kami akan melihat keranjang yang ditinggalkan dalam konteks kota, Anda mungkin memiliki visi yang berbeda. <br><br>  Untuk mailchamp, kampanye standar untuk keranjang yang ditinggalkan adalah ABANDONED_CART_EMAIL, kami menggantinya di filter dan mendapatkan laporan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca0/a77/b25/ca0a77b256b42242851ceaed308e02c7.jpg" alt="gambar"><br><br>  Itu semua garpu! <br><br>  Sekarang Anda dikonfigurasikan untuk mengirim keranjang yang ditinggalkan dan laporan yang dengannya Anda dapat menyaksikan pembuangannya.  Dan uji, uji, uji!  ;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421393/">https://habr.com/ru/post/id421393/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421381/index.html">Kursus Gratis Administrator ASA Cisco</a></li>
<li><a href="../id421385/index.html">Pelajari OpenGL. Pelajaran 5.10 - Layar Ruang Ambient Occlusion</a></li>
<li><a href="../id421387/index.html">Wawancara dengan Lennart Pottering di Linux Piter tentang perubahan di Linux, tentang systemd dan mengapa menghadiri konferensi</a></li>
<li><a href="../id421389/index.html">Pemisahan kekuatan administratif di Zimbra</a></li>
<li><a href="../id421391/index.html">HackThings - hackathon besar di Internet hal 7-9 September di Skoltech</a></li>
<li><a href="../id421395/index.html">Laporan Club of Rome 2018, Bab 3.7: "Iklim: kabar baik, tetapi masalah besar"</a></li>
<li><a href="../id421397/index.html">Luncurkan Mini AI Cup # 3. Pertempuran mesin di ruang terbatas</a></li>
<li><a href="../id421399/index.html">Analisis Pintu Belakang Outlook Turberg Cybergroup</a></li>
<li><a href="../id421401/index.html">Anatomi sistem rekomendasi. Bagian dua</a></li>
<li><a href="../id421403/index.html">Pekan Keamanan 32: Drama Fortnite-Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>