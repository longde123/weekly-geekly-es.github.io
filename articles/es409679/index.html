<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö¨ ü§∏üèº ü§µüèΩ Historia de participaci√≥n en el Game Jam. Caja de nieve ü§ôüèæ üßë üë©üèª‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A finales de 2017, tuve la oportunidad de probar mi fortaleza y entusiasmo como participante en uno de los muchos Game Jams del mundo. 

 Como esta fu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Historia de participaci√≥n en el Game Jam. Caja de nieve</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409679/"><img src="https://habrastorage.org/webt/co/5g/n7/co5gn7mngh3htc0x51kcvywi6o8.png" alt="imagen" align="left">  A finales de 2017, tuve la oportunidad de probar mi fortaleza y entusiasmo como participante en uno de los muchos Game Jams del mundo. <br><br>  Como esta fue mi primera experiencia en un proyecto as√≠, aprend√≠ algunas lecciones √∫tiles y un par de sorpresas agradables.  Bueno, tambi√©n consegu√≠ un juguete que pod√≠a jugar con mis colegas los viernes festivos. <br><br>  Debajo del gato, una descripci√≥n de cu√°n intensivos fueron 30 d√≠as de desarrollo y 20 d√≠as lentos de espera para obtener resultados. <br><br>  <i>Nota: el art√≠culo es de naturaleza narrativa, con pocos detalles t√©cnicos.</i> <br><a name="habracut"></a><br><h3>  Prologo </h3><br>  Durante mucho tiempo he querido probarme a m√≠ mismo como desarrollador de juegos, y en el √∫ltimo a√±o este deseo se volvi√≥ cada vez m√°s intrusivo e intrusivo.  Al final del a√±o, decid√≠ comenzar a hacer algo: asistir a reuniones sobre desarrollo de juegos, leer libros e incluso hacer un peque√±o prototipo del juego. <br><br>  Y luego, un d√≠a, Selim, mi colega, se ofreci√≥ a participar en uno de los muchos Game Jam y pens√© que esta es la mejor oportunidad para estudiar la cocina del juego sin ninguna obligaci√≥n a largo plazo.  Este no es un prototipo, pero a√∫n no es su proyecto de larga duraci√≥n.  Adem√°s, los plazos ajustados son a menudo algunos de los mejores motivadores.  Y la principal ventaja es que, en cualquier caso, el resultado es algo hol√≠stico y completo, que siempre inspira nuevos logros. <br><br>  Entonces decidimos participar.  Dos desarrolladores de Java, sin absolutamente ninguna experiencia en la creaci√≥n de juegos.  ¬øPero cu√°ndo hay que empezar? <br><br><h3>  Preparaci√≥n </h3><br>  El Game Jam elegido fue tem√°tico, y los organizadores tuvieron que anunciar el tema estrictamente antes del inicio del desarrollo.  Los concursantes recibieron 1 mes para crear el juego. <br><br>  Nos registramos una semana antes del comienzo y, debido a la falta de un tema, pasamos un tiempo l√°nguido de anticipaci√≥n e inacci√≥n.  Quiz√°s fue mejor pasar este tiempo eligiendo un g√©nero y la mec√°nica del juego.  Y luego envu√©lvelo en un estilo adecuado. <br><br>  En la hora X, los organizadores anunciaron el tema del concurso: Retroceso (regreso) y comenz√≥ la cuenta regresiva. <br><br>  Selim ten√≠a el √∫nico deseo para el juego: la presencia de un servidor de juegos y necesariamente en tiempo real.  Estaba interesado en conocer las delicias y las dificultades de desarrollar el lado del servidor.  Adem√°s, el juego deber√≠a haber sido simple, de lo contrario podr√≠amos no tener tiempo para completarlo. <br><br>  Con respecto al tema, los pensamientos al principio eran sobre lo retro o sobre los tiempos prehist√≥ricos.  El tema retro no me interesa, as√≠ que trat√© de encontrar algo sobre dinosaurios o personas antiguas.  Sin embargo, no pude encontrar algo simple y multiusuario sobre este tema. <br><br>  Y luego se me ocurri√≥ la idea de hacer un juego de sandbox, en sentido literal, una referencia al entretenimiento infantil en la playa.  Construimos castillos, corremos y arrojamos arena a nuestros rivales (espero que no todos hayan tenido una infancia tan dif√≠cil), pero los padres insatisfechos son castigados por esto.  Todo esto en 2D con una vista superior. <br><br>  Selim consider√≥ que la arena es demasiado cruel para los ojos y sugiri√≥ reemplazar la arena con nieve y los castillos con fortalezas de hielo.  En esta opci√≥n, nos detuvimos.  A lo mejor de nuestra capacidad y tiempo, podr√≠amos agregar nueva funcionalidad y variedad. <br><br><h3>  Desarrollo.  Semana 1 </h3><br>  Nuestros roles en el proyecto se dividieron por s√≠ mismos.  Como dije, Selim solo estaba interesado en el desarrollo del servidor.  Y estaba interesado en probar el desarrollo de la interfaz de usuario, porque, en mi opini√≥n, es muy diferente del desarrollo de aplicaciones empresariales.  La interfaz del juego fue planeada web. <br><br><div class="spoiler">  <b class="spoiler_title">Breve descripci√≥n de las tecnolog√≠as utilizadas</b> <div class="spoiler_text">  La interacci√≥n cliente-servidor se cre√≥ por completo en los sockets web, ya que necesit√°bamos enviar mensajes desde el servidor al cliente de forma asincr√≥nica y regular.  Los mensajes del cliente tambi√©n se transmitieron a trav√©s del socket web, pero simplemente por la raz√≥n "por qu√© no".  Todos los mensajes estaban en formato Json. <br><br>  Para trabajar con sockets web en el servidor, se utiliz√≥ el micro-marco Spark.  Y como motor f√≠sico se utiliz√≥ box2d, como uno de los m√°s populares.  Fue responsable de calcular la f√≠sica en el servidor. <br><br>  El cliente fue escrito en JS puro, sin usar ning√∫n framework, ya que no soy fuerte en ellos, y adem√°s, esto tiene poco sentido para un proyecto peque√±o.  Como motor de juego, se utiliz√≥ Phaser 2, un motor JS joven y prometedor.  A diferencia del motor f√≠sico en el servidor, su prop√≥sito principal era gr√°ficos y c√°lculos f√≠sicos simples.  KnockoutJS tambi√©n se us√≥ para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el enlace de datos</a> . <br><br>  Los productos JetBrains se utilizaron como IDE: Intellij IDEA y una versi√≥n de prueba de WebStorm (solo una versi√≥n de 30 d√≠as, en el momento del Game Jam). <br></div></div><br>  El desarrollo comenz√≥ con una reuni√≥n conjunta en el d√≠a libre.  En las primeras 2 horas, recog√≠ sprites "temporales" y me di cuenta de un ni√±o corriendo que sab√≠a c√≥mo lanzar bolas de nieve.  Podr√≠a haber una imagen de "fue / se ha convertido", pero carece de significado: visualmente lo que fue, luego permanece. <br><br>  Al tener una IU que funcionaba, solo quedaba <i>por</i> estrechar la interacci√≥n del servidor.  Por lo tanto, el resto del d√≠a se dedic√≥ a la integraci√≥n: discusi√≥n de la API, configuraci√≥n de la conexi√≥n, implementaci√≥n de la interacci√≥n.  Al final del d√≠a, nuestro peque√±o hombre podr√≠a moverse 1 p√≠xel hacia un lado, presionando una tecla.  Fue modesto, pero a√∫n exitoso. <br><br>  El desarrollo adicional continu√≥ solo en el tiempo libre del trabajo, con 6 d√≠as a la semana por separado para hogares y un d√≠a libre juntos.  Esto fue suficiente gracias a una API simple y una distribuci√≥n r√≠gida de roles. <br><br>  Para repetir el √©xito del primer d√≠a (correr y lanzar bolas de nieve), pero ya a trav√©s del servidor, nos llev√≥ una semana.  Esto se vio igualmente afectado por muchos factores t√©cnicos, incluidos problemas con herramientas mal dise√±adas para nuestro modelo de interacci√≥n cliente-servidor.  Me gustar√≠a detenerme en este modelo con m√°s detalle. <br><br><h3>  Modelo de interacci√≥n cliente-servidor </h3><br>  Inicialmente, se decidi√≥ que el servidor ser√≠a responsable de cualquier movimiento, y el cliente solo enviar√≠a comandos, como presionar una tecla, y dibujar√≠a lo que proven√≠a del servidor.  M√°s tarde, esta filosof√≠a se modific√≥ ligeramente, pero el servidor hasta el final sigui√≥ siendo el enlace central. <br><br>  En la primera implementaci√≥n, el servidor envi√≥ actualizaciones al cliente cada vez.  Es decir  por ejemplo, si se mantiene presionada una tecla, la posici√≥n del jugador cambia cada pocos milisegundos y se env√≠a una nueva posici√≥n al cliente. <br><br>  Usando un algoritmo tan simple, implementamos el movimiento del jugador.  Pero luchar por lo mejor nos impuls√≥ a cambiar el algoritmo a un evento uno: solo se env√≠an eventos importantes suficientes para la sincronizaci√≥n al servidor, as√≠ como al cliente. <br><br>  Por ejemplo, para mover a un jugador hacia arriba en el mapa necesitas 4 eventos: <br><br><ol><li>  <i>Cliente</i> : tecla arriba presionada; </li><li>  <i>Servidor</i> : el jugador comenz√≥ a moverse desde el punto [x, <b>y1</b> ], en un √°ngulo Œ±, con velocidad ŒΩ; </li><li>  <i>Cliente</i> : tecla arriba presionada; </li><li>  <i>Servidor</i> : el jugador ha terminado de moverse en el punto [x, <b>y2</b> ]. </li></ol><br>  Este enfoque tiene ventajas y desventajas. <br><br>  <b>Contras</b> <br><br><ul><li>  mucha m√°s l√≥gica en el cliente: el propio cliente debe calcular el movimiento, las colisiones, etc. </li><li>  la l√≥gica en el cliente debe repetir con mucha precisi√≥n la l√≥gica en el servidor, de lo contrario se obtienen saltos en el movimiento de los objetos.  Adem√°s en el art√≠culo habr√° varios ejemplos sobre este tema; </li><li>  en caso de problemas de red, recibir eventos m√°s tarde puede conducir a estados incorrectos (salir de l√≠mites, pasar a trav√©s de objetos, etc.); </li><li>  en general, es mucho m√°s f√°cil desincronizar el estado en el servidor y el cliente. </li></ul><br>  <b>Pros</b> <br><br><ul><li>  mucha menos carga en E / S; </li><li>  Se puede colgar l√≥gica adicional en los eventos.  Por ejemplo, al comienzo / final de un movimiento, puede iniciar / detener la animaci√≥n; </li><li>  Los problemas de red afectan menos la suavidad del movimiento.  Mientras la bola de nieve est√° volando, un retraso de incluso un segundo no afectar√° nada, ya que el servidor no debe enviar nada; </li><li>  La API y la interacci√≥n en s√≠ se vuelven m√°s transparentes. </li></ul><br>  De estas listas est√° claro que si trabajas duro en la implementaci√≥n del cliente, entonces hay casi una ventaja.  Para nuestro proyecto, logramos esto y la interacci√≥n cliente-servidor funcion√≥ a la perfecci√≥n.  Pero debemos rendir homenaje, tom√≥ mucha fuerza y ‚Äã‚Äãnervios. <br><br><h3>  Desarrollo.  Semanas 2 y 3 </h3><br>  Una semana despu√©s, cuando logramos dominar la integraci√≥n como m√≠nimo y brindar soporte para varios tipos de mensajes entre el servidor y el cliente, lleg√≥ el momento de agregar m√°s al juego que solo un chico corriendo. <br><br>  Por lo tanto, decidimos agregar una ni√±a corriendo!  En el camino, para la ni√±a tuve que hacer una ventana de selecci√≥n de personaje.  Y dado que la ventana todav√≠a ten√≠a que hacerse, es un pecado no agregar un nombre tambi√©n.  Adem√°s, tuve que estirar las im√°genes, de manera similar al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enfoque de 9 parches</a> . <br><br><img src="https://habrastorage.org/webt/cf/q_/0u/cfq_0ujfj7vseg_hu5istudnaec.png" alt="imagen"><br>  <i>Parec√≠a la primera versi√≥n de la ventana de inicio de sesi√≥n</i> <br><br>  Debido a todo esto, una tarea tan simple e importante de agregar una ni√±a tom√≥ un par de noches, pero claramente vali√≥ la pena.  Y luego vino la vida cotidiana gris con las mismas tareas: nuevas funciones simples, correcciones de errores, mejoras visuales menores. <br><br>  A medida que mi progreso progresaba en el lado del cliente, surgi√≥ el problema de la velocidad desigual de desarrollo del servidor y la interfaz de usuario.  Y dado que el servidor es una parte central de cualquier interacci√≥n, sin la funcionalidad final y operativa en el servidor, el desarrollo del cliente se ha detenido. <br><br>  Por lo tanto, implement√© un servidor simulado simple directamente en el cliente.  Muchas cosas en √©l se implementaron muy torpemente, incluyendo  a trav√©s del uso del estado global del mundo del juego.  Esto fue suficiente para desarrollar una interfaz de usuario completamente independiente del servidor y me ahorr√≥ mucho tiempo. <br><br>  El servidor falso ten√≠a otra ventaja definitiva.  Hab√≠a bots que no sab√≠an c√≥mo disparar, por lo que al menos hab√≠a una posibilidad de que alguien ganara. <br><br>  Al mismo tiempo, Selim luch√≥ con el servidor.  En el servidor, conect√≥ el motor de f√≠sica box2d para simular la f√≠sica en el juego.  Este motor tiene muchos de sus matices, y su estudio llev√≥ mucho tiempo.  La mayor dificultad en el desarrollo fue la falta de visualizaci√≥n del mundo del juego.  Nuestro cliente solo prest√≥ lo que se necesitaba.  Y algunos elementos del "mundo del servidor" estaban ocultos del lado del cliente.  Adem√°s, no hab√≠a garant√≠as completas de que el cliente representara todo correctamente. <br><br>  Una de las subtareas importantes que Selim tuvo que resolver fue verificar la colisi√≥n de objetos.  En el cliente, las colisiones se verificaron solo para elementos fijos.  En el servidor, era necesario hacer todo honestamente para no infringir los derechos de los objetos en movimiento. <br><br>  Durante el desarrollo de las colisiones, record√© un error divertido que podr√≠a pretender una funcionalidad especial: cuando un jugador arroj√≥ una bola de nieve, se la arroj√≥ con un "retroceso".  Esto sucedi√≥ porque en box2d, por defecto, todos pueden colisionar con todos, y siempre ocurre repulsi√≥n. <br><br>  Este problema se resolvi√≥ introduciendo m√°scaras, es decir, especificando clases de objetos que no pueden colisionar entre s√≠.  Por ejemplo, para un jugador y sus bolas de nieve, la m√°scara se hizo igual. <br><br>  Selim decidi√≥ no perder el tiempo en el manejo especial de colisiones de bolas de nieve entre s√≠ y coment√≥ sobre tal colisi√≥n: <br><br> <code>// for the <b>unlikely</b> event that we collide with a sibling snowball</code> <br> <br>  Como ha demostrado la pr√°ctica, la frecuencia de este evento "improbable" tiende a la frecuencia de lanzar bolas de nieve, porque cuando se encuentran uno frente al otro, las trayectorias de las bolas de nieve coinciden.  Debido a esto, las bolas de nieve alien√≠genas constantemente superan a las suyas.  Nuestras opiniones sobre este comportamiento divergieron, as√≠ que lo dejamos como est√°. <br><br>  Mientras Selim se estaba divirtiendo con las colisiones, depur√© el movimiento sincr√≥nico de objetos en el servidor y el cliente.  Hubo errores menores en nuestra propia implementaci√≥n, pero Phaser present√≥ la mayor sorpresa.  En su motor de f√≠sica, la velocidad real de los objetos se ajusta a FPS y detiene el mundo.  Esto se hace para aumentar la suavidad.  Desafortunadamente, este comportamiento inteligente no era consistente con la operaci√≥n s√≠ncrona con respecto al servidor, y tuve que hacer mi propia implementaci√≥n de objetos en movimiento. <br><br><div class="spoiler">  <b class="spoiler_title">Descripci√≥n de los detalles de la velocidad en Phaser o "carrera con sombra"</b> <div class="spoiler_text">  Para verificar y depurar la velocidad, agregu√© el objeto de otro jugador al mapa, que se mov√≠a con la misma velocidad, pero cerca.  Este jugador sombra y el jugador normal usaron diferentes algoritmos de movimiento.  Y as√≠ organic√© competiciones y compar√© la estabilidad de la velocidad. <br><br>  Al principio trat√© de resolver el problema de la velocidad desigual usando la configuraci√≥n del motor y la f√≠sica que usamos.  Pero, seg√∫n tengo entendido, este comportamiento no se puede cambiar de ninguna manera.  Era posible cambiar a una implementaci√≥n m√°s compleja de la f√≠sica, pero no quer√≠a hacerlo solo por la velocidad.  Adem√°s, esta implementaci√≥n tampoco dio una velocidad absolutamente estable. <br><br>  El siguiente paso trat√© de implementar el movimiento de los objetos yo mismo, pero desde el motor tom√© el control y el delta de tiempo entre cada ciclo del mundo.  Hay varios modelos de tiempo en Phaser y la implementaci√≥n de velocidad est√°ndar se basa en uno de ellos.  Pero, por alguna raz√≥n desconocida, ninguno de estos tiempos tiene estabilidad y no pueden proporcionar una velocidad constante.  Este es un problema conocido que no se planea solucionar en la versi√≥n 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/photonstorm/phaser/issues/798</a> . <br><br>  Pas√© 2 d√≠as en la "competencia" del jugador y la sombra y no encontr√© una opci√≥n de trabajo.  Entonces, al final, hice todo mi procesamiento de velocidad basado en el tiempo est√°ndar en JS.  Es muy sorprendente que una funci√≥n tan importante recibiera un apoyo tan extra√±o en el motor y tuviera que implementar su propia bicicleta. <br></div></div><br>  Con tales bromas y chistes, pasamos tranquilamente la segunda y tercera semana.  Adem√°s, cada semana comenz√≥ con la frase "bueno, para la pr√≥xima semana estamos obligados a preparar una versi√≥n jugable", cada vez que nos parec√≠a que est√°bamos a punto de estar listos.  La falta total de experiencia y la presencia de un tremendo optimismo es la peor manera de evaluar el marco temporal. <br><br>  Una semana antes de la entrega, en la reuni√≥n de desarrolladores, ni siquiera pudimos mostrar la versi√≥n normal y tuvimos que mostrar el servidor falso. <br><br>  Por supuesto, con tal velocidad de desarrollo, no hab√≠a nada que so√±ar con una lista de funcionalidades inicialmente concebida, y a√∫n m√°s con tener cosas agradables.  Por lo tanto, tuvimos que olvidarnos del "sandbox" y detenernos en el shooter 2D m√°s simple. <br><br><h3>  Desarrollo.  Semana 4, √∫ltima </h3><br>  En la √∫ltima semana de desarrollo, nos centramos en corregir errores.  Es mejor tener algo modesto y funcional que multifuncional, pero desmoronado.  Hubo muchos problemas, y la mayor√≠a de ellos se refer√≠an a la desafortunada integraci√≥n.  Aqu√≠ y all√°, aparecieron fallas menores, empeorando en gran medida la impresi√≥n del juego. <br><br>  Adem√°s de corregir errores, tambi√©n traje el brillo final a la interfaz de usuario: agregando m√∫sica y sonidos, jugando con fuentes y mejorando peque√±os detalles. <br><br>  De toda la funcionalidad, esta semana solo se agreg√≥ el sistema de puntos, as√≠ como la limitaci√≥n del stock de bolas de nieve y su restauraci√≥n. <br><br>  El √∫ltimo d√≠a de Game Jam pudimos jugar un poco con colegas.  A pesar de las cr√≠ticas positivas generales, esta sesi√≥n de juego no tuvo √©xito debido a un error cr√≠tico: las bolas de nieve volaron en el servidor y en el cliente a diferentes velocidades.  Debido a esto, entrar en otros jugadores era m√°s probable que fuera un accidente. <br><br><div class="spoiler">  <b class="spoiler_title">Descripci√≥n de la causa y correcci√≥n del error.</b> <div class="spoiler_text">  Hicimos este error en el √∫ltimo momento, reduciendo el n√∫mero de FPS en el servidor de 1000 a 100 experimentales. <br><br>  Cabe se√±alar que hasta este punto, no pudimos lograr un movimiento totalmente sincr√≥nico en el cliente y el servidor, ocasionalmente hubo saltos en el movimiento.  Al cambiar FPS, intentamos aumentar la capacidad de respuesta del servidor. <br><br>  Cuando comenc√© a investigar este error, descubr√≠ 2 patrones: <br><br><ul><li>  el movimiento del jugador funcion√≥ de manera correcta y estable; </li><li>  El movimiento de bola de nieve en el cliente siempre fue m√°s r√°pido que en el servidor. </li></ul><br>  El valor de la velocidad de los objetos llega al cliente desde el servidor, es decir, no podr√≠a ser una discrepancia banal de valores.  Adem√°s, un aumento inverso de FPS a 1000 mejor√≥ la situaci√≥n. <br><br>  Pas√© mucho tiempo tratando de corregir este error.  Pero nada ayud√≥.  Y, al final, se descubri√≥ que el uso de google: box2d limita indirectamente la velocidad m√°xima al mover el objeto en no m√°s de 2 p√≠xeles en un solo paso del mundo.  Es decir  a 100 FPS, la velocidad m√°xima es de 200 p√≠xeles / s (p / s), y a 1000 FPS - 2000 p / s.  Este valor se especifica en una constante y no se puede cambiar din√°micamente.  Esto explicaba completamente la raz√≥n de la desaceleraci√≥n de nuestras bolas de nieve, porque su velocidad deber√≠a haber sido 700 p / s, lo que requer√≠a un FPS estable por encima de 350. <br><br>  Para solucionar este problema, aument√© el FPS a 500, pero por una raz√≥n.  En box2d, debe pasar a la funci√≥n de paso del mundo cu√°nto tiempo ha pasado desde el paso anterior.  Antes de mi cambio, siempre calculamos esta diferencia antes de llamar a la funci√≥n.  Pero ahora, conociendo la frecuencia deseada, siempre fue posible indicar un delta constante de 2 ms.  Con el mundo rezagado respecto al real, los pasos tuvieron que repetirse uno tras otro, hasta que el mundo se recupere del retraso.  Luego un poco de sue√±o y todo es nuevo. <br><br>  Esta soluci√≥n, como se esperaba, resolvi√≥ el problema de la velocidad de la bola de nieve.  Adem√°s, el problema con el movimiento no sincronizado en el servidor y el cliente finalmente ha desaparecido.  En ese momento, esta curaci√≥n milagrosa fue una completa sorpresa para nosotros, pero ahora entend√≠ la raz√≥n: a pesar del m√°ximo de 1000 FPS, nadie cancel√≥ la operaci√≥n lenta del servidor, y especialmente la recolecci√≥n de basura.  Es decir  en algunos momentos, FPS podr√≠a caer libremente por debajo de los 350 FPS requeridos, lo que condujo a saltos arbitrarios en la velocidad. <br></div></div><br>  Entonces, felices por un error cerrado y un juguete que funcionaba, 2 horas antes de la fecha l√≠mite, est√°bamos listos para rendirnos.  Solo quedaba enviar el juego al sitio web del proyecto. <br><br>  Esperaba que sacar el juego fuera sin problemas y en vano.  Era necesario crear una p√°gina de proyecto, hacer una descripci√≥n, cargar capturas de pantalla y mucho m√°s.  Nos conocimos, como era de esperar, de principio a fin.  Aunque m√°s tarde los organizadores todav√≠a aceptaron individualmente proyectos tard√≠os. <br><br><img src="https://habrastorage.org/webt/vk/er/sf/vkersfkvr9qzg0atrqywh1jgk4w.png" alt="imagen"><br>  <i>Captura de pantalla de la versi√≥n final del juego.</i> <br><br><h3>  Votar </h3><br>  Seg√∫n los t√©rminos de la competencia, inmediatamente despu√©s de la finalizaci√≥n del desarrollo, se abri√≥ una votaci√≥n de 20 d√≠as.  Durante este per√≠odo, cualquiera pod√≠a ver los proyectos terminados, de los cuales se acumularon m√°s de 200. Solo los participantes pod√≠an votar por los proyectos.  Cada juego podr√≠a clasificarse en las siguientes categor√≠as: general, gr√°ficos, sonido, jugabilidad, innovaci√≥n y relevancia para el tema. <br><br>  La etapa de votaci√≥n nos ha preparado una mala sorpresa relacionada con la naturaleza multijugador de nuestro juego.  Hab√≠a relativamente pocas personas viendo los juegos y la posibilidad de encontrarse con el enemigo tend√≠a a cero.  Es decir  la gente fue a una tarjeta vac√≠a, lanz√≥ un par de bolas de nieve, corri√≥ unos metros y se fue decepcionado. <br><br>  Intentamos organizar sesiones de juego a trav√©s del foro del proyecto.  Adem√°s, Selim y yo entramos peri√≥dicamente en el juego, con la esperanza de entretener a un vagabundo solitario y aburrido.  Todo esto no produjo casi ning√∫n resultado. <br><br>  Me interesaba ver a algunas personas probar el juego.  Recuerdo especialmente el caso cuando un jugador ingres√≥ varios personajes al mismo tiempo y construy√≥ un pentagrama de ni√±os.  No s√© qu√© quer√≠a decir el autor, pero a√∫n tengo una captura de pantalla del proceso de su creaci√≥n. <br><br><img src="https://habrastorage.org/webt/cq/rn/yh/cqrnyhjzfmc5xzvzhllkon2gcs0.png" alt="imagen"><br><br>  Otro jugador "pirate√≥" nuestro juego.  Tenemos una verificaci√≥n de longitud de nombre, pero solo en el lado del cliente.  En consecuencia, eludi√≥ esta defensa y comenz√≥ a comunicarse conmigo de esta manera, cada vez que ingresaba un nuevo personaje y su frase en nombre de un hombre. <br><br>  Junto con la votaci√≥n, mis colegas y yo volvimos a jugar, veng√°ndonos por el juego fallido el d√≠a en que se complet√≥ el proyecto.  Esta vez todo sali√≥ muy bien y obtuvimos una serie de ideas para nuevas funciones que, sin embargo, era demasiado tarde para agregar. <br><br>  En mi opini√≥n, la calidad del juego, especialmente con respecto a la interacci√≥n con el servidor, result√≥ en un muy buen nivel.  Cuantas veces lo jugamos, no notamos ning√∫n problema, ni los escuchamos de otros jugadores.  Para m√≠ personalmente, esto fue una sorpresa, dada la calidad y la cantidad de errores unos d√≠as antes de la entrega. <br><br>  Los 20 d√≠as dados para la evaluaci√≥n de los juegos duraron mucho tiempo, pero al final terminaron y lleg√≥ el tan esperado tiempo de resultados. <br><br><img src="https://habrastorage.org/webt/l5/pq/uo/l5pquotx-kdt6onfu_kcdnl_d6y.png" alt="imagen"><br><br>  Por lo tanto, obtuvimos el puesto 36 de un poco m√°s de 200 participantes.  Lo cual, por un lado, no es malo para el primer proyecto, pero por otro lado, es algo desagradable para el orgullo.  Sobre todo teniendo en cuenta que los 10 mejores obtuvieron buenos juegos, pero no todos merec√≠an una atenci√≥n especial. <br><br><h3>  Lecciones aprendidas </h3><br>  En aras de obtener lecciones en condiciones de semi-invernadero, todo esto comenz√≥.  Tratamos de inventar muchas cosas nosotros mismos y nos limitamos a un conjunto m√≠nimo de herramientas para sentir los problemas y experimentar malos enfoques en nuestra propia piel.  Pero ahora teniendo conocimiento sobre c√≥mo hacerlo y por qu√©, estudiar la teor√≠a ser√° m√°s f√°cil. <br><br>  <b>La necesidad de un artista</b> .  Como ha demostrado la pr√°ctica (no solo la nuestra), puedes hacer un buen juego sin buenos gr√°ficos.  Sin embargo, seleccionar las im√°genes, las fuentes y los elementos de interfaz de usuario correctos ocupa la mayor parte del tiempo.  Y lo peor es que al final no coinciden.  A partir de esto, se pierde la atm√≥sfera del tubo c√°lido y el juego no parece hol√≠stico. <br><br>  <b>Las pruebas de juego son muy importantes</b> .  Debido a problemas con la velocidad de desarrollo, no pudimos probar la jugabilidad de nuestra implementaci√≥n la mayor parte del tiempo.  Cuando pudimos jugar normalmente, hab√≠a muy poco tiempo para arreglar las √°reas problem√°ticas.  Y tuvimos mucha suerte de que no hubiera tantos problemas. <br>  En mi opini√≥n, para los juegos, tales pruebas en usuarios reales son mucho m√°s importantes que para las aplicaciones comerciales, porque adem√°s de la conveniencia y la resoluci√≥n de los problemas del usuario, todav√≠a es necesario mantener un cierto nivel de emociones y participaci√≥n. <br><br>  <b>No todas las bibliotecas son igualmente √∫tiles</b> .  Casi nadie desarrolla juegos en su propio motor y hay motores en el mercado para todas las ocasiones.  En el patio fue 2017, y uno esperar√≠a su alta calidad.  Eleg√≠ Phaser como uno de los motores JS m√°s recomendados y m√°s j√≥venes.  Despu√©s de todos los problemas que tuvimos con √©l, me temo imaginar c√≥mo se ven peor los motores.  No, en general, las impresiones de trabajar con Phaser son bastante positivas, especialmente teniendo en cuenta la buena documentaci√≥n y ejemplos.  Pero trabajar con √©l sin conocer una gran cantidad de matices es muy dif√≠cil.  En la primavera sale una nueva versi√≥n y espero una mejora significativa.  Y tambi√©n en mis planes hay un mini proyecto en otro motor para comparar. <br>  Y recordar√© ese problema con la velocidad m√°xima en box2d durante mucho tiempo. <br><br>  <b>En el proceso de Game Jam es bastante posible aprender</b> .  Al comenzar este proyecto, no sab√≠amos casi nada sobre el desarrollo de juegos, ni sobre las bibliotecas que utilizamos.  Y la mayor parte del tiempo la pas√© estudiando estas cosas.  A pesar de esto, a√∫n logramos llevar el juego a un estado completo. <br><br>  <b>No se requiere mucha funcionalidad</b> .  Estoy un poco sorprendido de que a muchas personas les haya gustado nuestro juego.  S√≠, no se sientan all√≠ todas las noches, sino que disfrutan de una o dos sesiones peque√±as.  Pero en nuestro juego no hay ni una idea original, ni una gran cantidad de funcionalidad, ni ninguna historia.  Lo mismo puede decirse de la mayor√≠a de los juegos en Game Jam que han recibido calificaciones positivas. <br><br>  <b>(Juego) Jam es una gran raz√≥n para intentarlo</b> .  No importa qu√©: una idea, una nueva biblioteca, tus propias fortalezas.  Cuando hay una meta clara y otros deben ver su resultado, es muy motivador no debilitarse y dar lo mejor.  E incluso si el resultado es peor de lo esperado, ¬°no ser√° una pena tirarlo, aprender lecciones por ti mismo y seguir adelante! <br><br><h4>  Enlaces a recursos: </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">selim.co/snowbox</a> : el juego en s√≠.  No lo impulsamos a las pruebas de estr√©s, por lo que estoy lejos de estar seguro de que resistir√° a todos los interesados.  Si el servidor miente, puedes probar simulacros - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">selim.co/snowbox/#mock</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/wowselim/gameserver</a> - repositorio de c√≥digo del servidor </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/bugy/snowbox-ui</a> - repositorio del cliente </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">itch.io/jam/game-off-2017</a> - p√°gina Game Jam </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">itch.io/jam/game-off-2017/rate/199650</a> - p√°gina de votaci√≥n del juego </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">opengameart.org</a> - la principal fuente de recursos del juego </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">freesound.org</a> - los sonidos del juego fueron tomados desde aqu√≠ </li></ul><br>  <i>¬°Gracias a todos por su tiempo y buen humor!</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es409679/">https://habr.com/ru/post/es409679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es409669/index.html">Lo que los innovadores de pagos pueden aprender de los monos</a></li>
<li><a href="../es409671/index.html">¬øQu√© es la miner√≠a y por qu√© es miner√≠a en tarjetas de video?</a></li>
<li><a href="../es409673/index.html">C√≥mo establecer el control de calidad de los servicios m√©dicos: experiencia del equipo DOC +</a></li>
<li><a href="../es409675/index.html">La asimetr√≠a de la naturaleza</a></li>
<li><a href="../es409677/index.html">Cura enzim√°tica o c√≥mo levantarse r√°pidamente despu√©s de una lesi√≥n</a></li>
<li><a href="../es409681/index.html">Preg√∫ntele a Ethan: ¬øPueden los no estrellas a√∫n convertirse en estrellas?</a></li>
<li><a href="../es409683/index.html">Revisi√≥n ultrabook ASUS ZenBook 13</a></li>
<li><a href="../es409687/index.html">Formato del viernes: Mujeres en la m√∫sica electr√≥nica - Wendy Carlos y Susan Chani</a></li>
<li><a href="../es409689/index.html">Los afortunados y perdedores en el mundo de Bitcoin: 7 historias provienen de 2017</a></li>
<li><a href="../es409691/index.html">Medios: Estados Unidos dejar√° de financiar la EEI en 2025</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>