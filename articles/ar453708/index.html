<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ โ ๐ ูุธุงู ุชุดุบูู AQUA RTOS ูู ุงูููุช ุงููุนูู ููุธุงู ุงูุชุดุบูู MK AVR ูู ุจูุฆุฉ BASCOM AVR ๐ฅ ๐ง๐ฝ ๐ฌ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุนูุฏ ุงููุชุงุจุฉ ูุฑูุฒ MK ุฃูุซุฑ ุชุนููุฏูุง ูู "ูููุถ ุงูุถูุก" ุ ููุงุฌู ุงููุทูุฑ ูููุฏูุง ูุชุฃุตูุฉ ูู ุงูุจุฑูุฌุฉ ุงูุฎุทูุฉ ุจุฃุณููุจ "supercycle ุจุงูุฅุถุงูุฉ ุฅูู ุงูููุงุทุนุงุช". ุชุชุทูุจ ูุนุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุธุงู ุชุดุบูู AQUA RTOS ูู ุงูููุช ุงููุนูู ููุธุงู ุงูุชุดุบูู MK AVR ูู ุจูุฆุฉ BASCOM AVR</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453708/" style=";text-align:right;direction:rtl"> ุนูุฏ ุงููุชุงุจุฉ ูุฑูุฒ MK ุฃูุซุฑ ุชุนููุฏูุง ูู "ูููุถ ุงูุถูุก" ุ ููุงุฌู ุงููุทูุฑ ูููุฏูุง ูุชุฃุตูุฉ ูู ุงูุจุฑูุฌุฉ ุงูุฎุทูุฉ ุจุฃุณููุจ "supercycle ุจุงูุฅุถุงูุฉ ุฅูู ุงูููุงุทุนุงุช".  ุชุชุทูุจ ูุนุงูุฌุฉ ุงูููุงุทุนุงุช ุงูุณุฑุนุฉ ูุงูุฏูุฉ ุ ุงูุฃูุฑ ุงูุฐู ูุคุฏู ุฅูู ุฅุถุงูุฉ ุฅุดุงุฑุงุช ุฅูู ุงูููุฏ ูุฌุนู ุฃุณููุจ ุงููุดุฑูุน "supercycle ูุน ุงูููุงุทุนุงุช ูุงูุฃุนูุงู". <br><br>  ุฅุฐุง ุฒุงุฏ ุชุนููุฏ ุงููุธุงู ุ ูุฅู ุนุฏุฏ ุงูุฃุนูุงู ุงููุชุฑุงุจุทุฉ ูููู ุจุดูู ูุจูุฑ ุ ูุณุฑุนุงู ูุง ูุชุญูู ุงููุดุฑูุน ุฅูู "ุฑูุฒ ุจุงุณุชุง" ุณูู ุงููุฑุงุกุฉ ููููู ุงูุชุญูู ููู. <br><br>  ูุณุงุนุฏ ุงุณุชุฎุฏุงู ุฃูุธูุฉ ุงูุชุดุบูู ูู ุงูููุช ุงููุนูู ุนูู ุงูุชุฎูุต ูู "ุฑูุฒ ุงููุนูุฑููุฉ" ูุฅุนุงุฏุฉ ุงููุฑููุฉ ูุณูููุฉ ุงูุฅุฏุงุฑุฉ ููุดุฑูุน MK ูุนูุฏุฉ. <br>  ููุฏ ุชู ุชุทููุฑ ุงูุนุฏูุฏ ูู ุฃูุธูุฉ ุงูุชุดุบูู ูู ุงูููุช ุงูุญูููู ุงูุชุนุงูููุฉ ูุดุนุจูุฉ ููุบุงูุฉ ููููุฑูููุชุฑููุฑ AVR.  ููุน ุฐูู ุ ูููุง ููุชูุจุฉ ุจูุบุฉ C ุฃู Assembler ูููุณุช ููุงุณุจุฉ ูุฃููุฆู ุงูุฐูู ูููููู ุจุจุฑูุฌุฉ MK ูู ุจูุฆุฉ BASCOM AVR ุ ููุง ูุญุฑููู ูู ูุฐู ุงูุฃุฏุงุฉ ุงููููุฏุฉ ููุชุงุจุฉ ุงูุชุทุจููุงุช ุงูุฎุทูุฑุฉ. <br><br>  ูุชุตุญูุญ ูุฐุง ุงููุตูุฑ ุ ููุช ุจุชุทููุฑ RTOS ุจุณูุท ูุจูุฆุฉ ุงูุจุฑูุฌุฉ BASCOM AVR ุ ูุงูุชู ุงุณุชุฑุนู ุงูุชุจุงู ุงููุฑุงุก ุฅูููุง. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cd6/0be/c64/cd60bec64b2a0b96ed562770a9063355.jpg" alt="ุตูุฑุฉ"><br><a name="habracut"></a><br>  ุจุงููุณุจุฉ ูููุซูุฑูู ุ ูุฅู ุฃุณููุจ ุงูุจุฑูุฌุฉ MK ุงููุฃููู ูู ูุง ูุณูู  <i>supercycle</i> .  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชููู ุงูููุฏ ูู ูุฌููุนุฉ ูู ุงููุธุงุฆู ูุงูุฅุฌุฑุงุกุงุช ูุงูุฃูุตุงู (ุงูุซูุงุจุช ูุงููุชุบูุฑุงุช) ุ ูุฑุจูุง ุชูู ุงูุฎุงุตุฉ ุจุงูููุชุจุงุช ุ ูุงูุชู ุชูุนุฑู ุนููููุง ุจุงุณู "ุฑูุฒ ุงูุฎูููุฉ" ุ ุจุงูุฅุถุงูุฉ ุฅูู ุญููุฉ ูุง ููุงุฆูุฉ ูุจูุฑุฉ ูุญุงุทุฉ ุจุจููุฉ <b>do-loop</b> .  ุนูุฏ ุจุฏุก ุงูุชุดุบูู ุ ุชุชู ุชููุฆุฉ ูุนุฏุงุช MK ููุณูุง ูุงูุฃุฌูุฒุฉ ุงูุฎุงุฑุฌูุฉ ุฃููุงู ุ ููุชู ุชุนููู ุงูุซูุงุจุช ูุงูููู ุงูุฃูููุฉ ูููุชุบูุฑุงุช ุ ุซู ูุชู ููู ุงูุชุญูู ุฅูู ูุฐู ุงูุฏุฑุงุฌุฉ ุงููุงุฆูุฉ ุงููุงููุงุฆูุฉ. <br>  ุจุณุงุทุฉ supercycle ูุงุถุญุฉ.  ูุนุธู ุงูููุงู ุงูุชู ูุคุฏููุง MK ุ ูุฃู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุฏูุฑูุฉ.  ุงูุนููุจ ูุงุถุญุฉ ุฃูุถูุง: ุฅุฐุง ูุงู ุจุนุถ ุงูุฃุฌูุฒุฉ ุฃู ุงูุฅุดุงุฑุงุช ูุชุทูุจ ุฑุฏ ูุนู ููุฑู ุ ูุณุชููุฑ MK ุฐูู ูู ููุช ูุง ูุชุฌุงูุฒ ุงูุฏูุฑุฉ.  ุฅุฐุง ูุงูุช ูุฏุฉ ุงูุฅุดุงุฑุฉ ุฃูุตุฑ ูู ูุชุฑุฉ ุงูุฏูุฑุฉ ุ ูุณูุชู ุชุฎุทู ูุฐู ุงูุฅุดุงุฑุฉ. <br><br>  ูู ุงููุซุงู ุฃุฏูุงู ุ ูุฑูุฏ ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุฒุฑ <b>ูุถุบูุทูุง</b> : <br><br><pre style=";text-align:right;direction:rtl"><code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-comment"><span class="hljs-comment">' -  if button = 1 then '     '  -  loop</span></span></code> </pre> <br>  ูู ุงููุงุถุญ ุ ุฅุฐุง ูุงู "ุจุนุถ ุงูููุฏ" ูุนูู ููุชุฑุฉ ูุงููุฉ ุ ููุฏ ูุง ุชูุงุญุธ MK ุถุบุทูุง ุณุฑูุนูุง ุนูู ุฒุฑ. <br><br>  ูุญุณู ุงูุญุธ ุ ุชู ุชุฌููุฒ MK ุจูุธุงู ููุงุทุนุฉ ูููู ุฃู ูุญู ูุฐู ุงููุดููุฉ: ูููู ุชุนููู ุฌููุน ุงูุฅุดุงุฑุงุช ุงููุงูุฉ ุนูู ุงูููุงุทุนุงุช ููููู ูุชุงุจุฉ ูุนุงูุฌ ููู ูููุง.  ูุฐูู ูุธูุฑ ุงููุณุชูู ุงูุชุงูู: ุฏูุฑุฉ <i>ุณูุจุฑ ูุน ุงููุทุงุน</i> . <br>  ููุถุญ ุงููุซุงู ุงูุชุงูู ุจููุฉ ุงูุจุฑูุงูุฌ ุจุงุณุชุฎุฏุงู supercycle ูููุงุทุนุฉ ุชุนุงูุฌ ุจููุฑุฉ ุฒุฑ ูุงุญุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">on</span></span> button button_isr <span class="hljs-comment"><span class="hljs-comment">'    enable interrupts ' ***  *** do ' -  loop end '   button_isr: '  -    return</span></span></code> </pre> <br>  ููุน ุฐูู ุ ูุฅู ุงุณุชุฎุฏุงู ุงูููุงุทุนุงุช ููุซู ูุดููุฉ ุฌุฏูุฏุฉ: ูุฌุจ ุฃู ูููู ุฑูุฒ ูุนุงูุฌ ุงูููุงุทุนุฉ ุจุฃุณุฑุน ูุฃูุตุฑ ููุช ูููู ุ  ุฏุงุฎู ุงูุงููุทุงุนุงุช ุ ูุธุงุฆู MK ูุญุฏูุฏุฉ.  ูุธุฑูุง ูุนุฏู ูุฌูุฏ ุฃุฌูุฒุฉ ููุงุทุนุฉ ููุชุณูุณู ุงููุฑูู AVR ุ ูุง ูููู ุฃู ุชุญุฏุซ ููุงุทุนุฉ ุฃุฎุฑู ุฏุงุฎู ุงูููุงุทุนุฉ - ุฅููุง ุฃุฌูุฒุฉ ูุนุทูุฉ ูู ุงูููุช ุงูุญุงูู.  ูุฐูู ูุฌุจ ุชูููุฐ ุงูููุงุทุนุฉ ูู ุฃุณุฑุน ููุช ูููู ุ ูุฅูุง ุณูุชู ุชุฎุทู ุงูููุงุทุนุงุช ุงูุฃุฎุฑู (ูุฑุจูุง ุงูุฃูุซุฑ ุฃูููุฉ) ููู ุชุชู ูุนุงูุฌุชูุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุทุนุฉ ุงูุฐุงูุฑุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ุจููู MK ุฏุงุฎู ุงูููุงุทุนุฉ ุ ูููู ูู MK ููุงุญุธุฉ ุญูููุฉ ููุงุทุนุฉ ุฃุฎุฑู ูู ุณุฌู ุฎุงุต ุ ููุง ูุณูุญ ุจูุนุงูุฌุชูุง ูุงุญููุง.  ููุน ุฐูู ุ ูุง ูููู ูุนุงูุฌุฉ ูุฐุง ุงูููุงุทุนุฉ ุนูู ุงูููุฑ. <br></div></div><br>  ูุฐูู ุ ูุง ูููููุง ูุชุงุจุฉ ุดูุก ูุนูุฏ ูู ูุนุงูุฌ ุงูููุงุทุนุฉ ุ ุฎุงุตุฉู ุฅุฐุง ูุงู ูุฌุจ ุฃู ูููู ููุฐุง ุงูุฑูุฒ ุชุฃุฎูุฑ - ูุฃูู ุญุชู ูุนูู ุงูุชุฃุฎูุฑ ุ ูู ูุนูุฏ MK ุฅูู ุงูุจุฑูุงูุฌ ุงูุฑุฆูุณู (supercycle) ูุณูุตูู ุฅูู ุงูููุงุทุนุงุช ุงูุฃุฎุฑู. <br><br>  ููุฐุง ุงูุณุจุจ ุ ุบุงูุจูุง ูุง ูุชุนูู ุนููู ุฏุงุฎู ูุนุงูุฌ ุงูููุงุทุนุฉ ุงูุฅุจูุงุบ ุนู ุญูููุฉ ุงูุญุฏุซ ุจุนูุงูุฉ - ุนูุงูุชู ุงูุฎุงุตุฉ ุจูู ุญุฏุซ - ุซู ุงูุชุญูู ูู ุงูุฅุดุงุฑุงุช ุฏุงุฎู ุงูุฏูุฑุฉ ุงููุงุฆูุฉ ููุนุงูุฌุชูุง.  ูุฐุง ุ ุจุงูุทุจุน ุ ูุทูู ุฒูู ุฑุฏ ุงููุนู ุนูู ุงูุญุฏุซ ุ ููููุง ุนูู ุงูุฃูู ูุง ูููุช ุดูุฆูุง ููููุง. <br><br>  ูุจุงูุชุงูู ุ ูุฅู ุงููุณุชูู ุงูุชุงูู ูู ุงูุชุนููุฏ ููุดุฃ - ุฏูุฑุฉ <i>ุฏุฑุงุฌุฉ ูุงุฑูุฉ ูุจูุฑุฉ ูุน ุงูููุงุทุนุงุช ูุงูุฃุนูุงู</i> . <br><br>  ูุธูุฑ ุงูููุฏ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">on</span></span> button button_isr <span class="hljs-comment"><span class="hljs-comment">'    enable interrupts ' ***  *** do ' -  if button_flag = 1 then '     button_flag = 0 '     end if '  -  loop end ' ***    *** button_isr: button_flag = 1 return</span></span></code> </pre> <br>  ููุชุตุฑ ูุฐุง ุนุฏุฏ ูุจูุฑ ูู ุงูุจุฑุงูุฌ MK.  ููุน ุฐูู ุ ูุฅู ูุซู ูุฐู ุงูุจุฑุงูุฌ ุนุงุฏุฉ ูุง ุชููู ุจุณูุทุฉ ุฅูู ุญุฏ ูุง.  ุฅุฐุง ูุชุจุช ุดูุฆูุง ุฃูุซุฑ ุชุนููุฏูุง ุ ูุฅู ุนุฏุฏ ุงูุฃุนูุงู ูุจุฏุฃ ูู ุงูููู ูุซู ูุฑุฉ ุงูุซูุฌ ุ ููุตุจุญ ุงูุฑูุฒ ุฃูุซุฑ ุญูุฑุฉ ูุบูุฑ ูุงุจู ูููุฑุงุกุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุงููุซุงู ุฃุนูุงู ุ ูู ูุชู ุญู ูุดููุฉ ุงูุชุฃุฎูุฑ.  ุจุงูุทุจุน ุ ููููู "ุชุนููู" ููุงุทุนุฉ ูููุตูุฉ ุนูู ุงููุคูุช ุ ููููุง ... ููููู ุฃูุถูุง ุงูุชุญูู ูู ุฃุนูุงู ูุฎุชููุฉ.  ููู ูุฐุง ูุฌุนู ุงูุจุฑูุงูุฌ ูุจูุญูุง ุชูุงููุง ุ ุญูุซ ูุชุฒุงูุฏ ุนุฏุฏ ุงูุฃุนูุงู ุงููุชุฑุงุจุทุฉ ุจุดูู ูุจูุฑ ุ ูุญุชู ุงููุทูุฑ ููุณู ุจุงููุงุฏ ูุณุชุทูุน ูุนุฑูุฉ ูุซู "ุฑูุฒ ุงููุนูุฑููุฉ" ูุฑูุจูุง.  ูุญุงููุฉ ุงูุนุซูุฑ ุนูู ุฎุทุฃ ุฃู ุชุนุฏูู ุงูุฑูุฒ ุบุงูุจูุง ูุง ุชุตุจุญ ูุชุณุงููุฉ ูู ุงูุฌููุฏ ุงููุจุฐููุฉ ูุชุทููุฑ ูุดุฑูุน ุฌุฏูุฏ. <br><br>  ููููุฉ ุญู ูุดููุฉ "ุฑูุฒ ุงููุนูุฑููุฉ" ูุฌุนููุง ุฃูุซุฑ ูุงุจููุฉ ูููุฑุงุกุฉ ูุฅุฏุงุฑุชูุงุ  ูุฃุชู <i>ูุธุงู ุงูุชุดุบูู</i> (OS) ูู ุนูููุฉ ุงูุฅููุงุฐ.  ูู ุฐูู ุ ูุชู ุชูุณูู ุงููุธููุฉ ุงูุชู ูุฌุจ ุฃู ุชููุฐูุง MK ุฅูู ููุงู ูุชู ุงูุชุญูู ูู ุชุดุบูููุง ุจูุงุณุทุฉ ูุธุงู ุงูุชุดุบูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฃููุงุน ุฃูุธูุฉ ุงูุชุดุบูู ูู MK </h2><br>  ูููู ุชูุณูู ุฃูุธูุฉ ุงูุชุดุบูู ูู MK ุฅูู ูุฆุชูู ูุจูุฑุชูู: ูุธุงู ุงูุชุดุบูู ุงููุฒุฏุญู ูุน ูุธุงู ุงูุชุดุบูู ุงูุชุนุงููู.  ูู ุฃู ูู ุฃูุธูุฉ ุงูุชุดุบูู ูุฐู ุ ูุชู ุงูุชุญูู ูู ุงูููุงู ุจูุงุณุทุฉ ุฅุฌุฑุงุก ุฎุงุต ูุณูู <i>ุงููุฑุณู</i> .  ูู ูุธุงู ุงูุชุดุบูู <i>ุงููุฒุฏุญู ุ ูููู</i> ุงููุฑุณู ุจุชุจุฏูู ุงูุชูููุฐ ูู ุฃู ููุช ูู ูููุฉ ุฅูู ุฃุฎุฑู ุ ูุน ุชุฎุตูุต ูู ุนุฏุฏ ูุนูู ูู ุฏูุฑุงุช ุงูุณุงุนุฉ (ุฑุจูุง ุชููู ูุฎุชููุฉ ุ ุงุนุชูุงุฏูุง ุนูู ุฃููููุฉ ุงููููุฉ).  ุชุนูู ูุฐู ุงูุทุฑููุฉ ููู ุจุดูู ุฑุงุฆุน ุ ุญูุซ ุชุชูุญ ูู ุนุฏู ุฅููุงุก ูุธุฑุฉ ุนูู ูุญุชูู ุงูููุงู ุนูู ุงูุฅุทูุงู: ููููู ูุชุงุจุฉ ุฑูุฒ ุงููููุฉ ุนูู ุงูุฃูู <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  - ููุง ูุฒุงู ุณูุชู ุชูููุฐ ุจููุฉ ุงูููุงู (ุจูุง ูู ุฐูู ูุฐู ุงููููุฉ).  ููุน ุฐูู ุ ุชุชุทูุจ ุฃูุธูุฉ ุงูุชุดุบูู ุงูููุงุฆูุฉ ุงููุซูุฑ ูู ุงูููุงุฑุฏ (ุฐุงูุฑุฉ ุงููุนุงูุฌ ูุฏูุฑุงุช ุงูุณุงุนุฉ) ุ ูุฃู ูู ููุชุงุญ ูุฌุจ ุฃู ูุญูุธ ุณูุงู ุงููููุฉ ุจุงููุงูู ููุชู ุชุนุทููู ููุญูู ุณูุงู ุงูุงุณุชุฆูุงู.  ูุดูุฑ ุงูุณูุงู ููุง ุฅูู ูุญุชููุงุช ุณุฌูุงุช ุงูุฌูุงุฒ ูุงูููุฏุณ (ุชุณุชุฎุฏู BASCOM ูุฌููุนุชูู - ุงูุฌูุงุฒ ูุงุญุฏ ูุนูุงููู ุฅุฑุฌุงุน ุงูุจุฑุงูุฌ ุงููุฑุนูุฉ ูุงูุจุฑูุงูุฌ ูุชูุฑูุฑ ุงููุณุงุฆุท).  ูุง ูุชุทูุจ ูุฐุง ุงูุญูู ุงููุซูุฑ ูู ุฏูุฑุงุช ุงููุนุงูุฌ ูุญุณุจ ุ ุจู ูุฌุจ ุฃูุถูุง ุชุฎุฒูู ุณูุงู ูู ูููุฉ ูู ููุงู ูุง ููุชุฑุฉ ุญุชู ุชุนูู.  ูู ุงููุนุงูุฌุงุช "ุงููุจูุฑุฉ" ุ ุงูููุฌูุฉ ูู ุงูุจุฏุงูุฉ ุฅูู ุชุนุฏุฏ ุงูููุงู ุ ุบุงูุจูุง ูุง ูุชู ุฏุนู ูุฐู ุงููุธุงุฆู ูู ุงูุฃุฌูุฒุฉ ุ ููุฏููุง ุงููุฒูุฏ ูู ุงูููุงุฑุฏ.  ูู AVR MK ุ ูุง ููุฌุฏ ุฏุนู ุฃุฌูุฒุฉ ููููุงู ุงููุชุนุฏุฏุฉ (ูู ุดูุก ูุฌุจ ุงูููุงู ุจู "ูุฏูููุง") ุ ูุงูุฐุงูุฑุฉ ุงููุชููุฑุฉ ุตุบูุฑุฉ.  ูุฐูู ุ ูุฅู ุฅุฒุงุญุฉ ุฃูุธูุฉ ุงูุชุดุบูู ุ ุนูู ุงูุฑุบู ูู ูุฌูุฏูุง ุ ููุณุช ููุงุณุจุฉ ุฌุฏูุง ูุฃุนุถุงุก ุงููููุณุช ุงูุจุณูุทุฉ. <br><br>  ุดูุก ุขุฎุฑ ูู <i>OS ุงูุชุนุงูููุฉ</i> .  ููุง ุชุชุญูู ุงููููุฉ ููุณูุง ุนูุฏ ููุทุฉ ููู ุงูุชุญูู ุฅูู ุงููุฑุณู ุ ููุง ูุณูุญ ูู ุจุจุฏุก ููุงู ุฃุฎุฑู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู ุงูููุงู ููุง ูุทููุจุฉ ููููุงู ุจุฐูู - ูุฅูุง ูุฅู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุณูู ูุชุนุทู.  ูู ูุงุญูุฉ ุ ูุจุฏู ุฃู ูุฐุง ุงูููุฌ ูููู ูู ุงูููุซูููุฉ ุงูุฅุฌูุงููุฉ: ุฅุฐุง ุชู ุชุนููู ุงููููุฉ ุ ููู ูุชู ุงุณุชุฏุนุงุก ุงููุฑุณู ูุทูููุง ุ ูุณูู ูุชููู ุงููุธุงู ุจุงููุงูู ุนู ุงูุงุณุชุฌุงุจุฉ.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุง ูููู ุงูุฑูุฒ ุงูุฎุทู ุฃู ุฏูุฑุฉ ุงูุฏุฑุงุฌุงุช ุงููุงุฆูุฉ ุฃูุถู ูู ูุฐุง ุงูุตุฏุฏ - ูุฃูู ูููู ุฃู ูุชุฌูุฏ ุจููุณ ุงููุฎุงุทุฑ ุชูุงููุง. <br><br>  ููุน ุฐูู ุ ูุฅู ูุธุงู ุงูุชุดุบูู ุงูุชุนุงููู ูุฏูู ููุฒุฉ ูููุฉ.  ูุธุฑูุง ูุฃู ุงููุจุฑูุฌ ููุง ูุถุจุท ูุญุธุฉ ุงูุชุจุฏูู ุจููุณู ุ ูุง ูููู ุฃู ูุญุฏุซ ุฐูู ูุฌุฃุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุญูู ุฃู ุงููููุฉ ุชุนูู ูุน ุจุนุถ ุงูููุงุฑุฏ ุฃู ูู ููุชุตู ุญุณุงุจ ุชุนุจูุฑ ุญุณุงุจู.  ูุฐูู ุ ูู ูุธุงู ุงูุชุดุบูู ุงูุชุนุงููู ุ ูู ูุนุธู ุงูุญุงูุงุช ุ ููููู ุงูุงุณุชุบูุงุก ุนู ุงูุญูุงุธ ุนูู ุงูุณูุงู.  ูุนูู ูุฐุง ุนูู ุชูููุฑ ุงูููุช ูุงูุฐุงูุฑุฉ ูููุนุงูุฌ ุจุดูู ูุจูุฑ ุ ูุจุงูุชุงูู ูุจุฏู ุฃูุซุฑ ููุงุกูุฉ ููุชูููุฐ ุนูู MK AVR. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุจุฏูู ุงูููุงู ูู BASCOM AVR </h2><br>  ูู ุฃุฌู ุชูููุฐ ุชุจุฏูู ุงูููุงู ูู ุจูุฆุฉ BASCOM AVR ุ ูุฌุจ ุนูู ุฑูุฒ ุงููููุฉ ุ ุงูุฐู ูุชู ุชุทุจูู ูู ุฅุฌุฑุงุก ูุฅุฌุฑุงุก ุนุงุฏู ุ ุงุณุชุฏุนุงุก ุงููุฑุณู - ูู ููุงู ูุง ุฃูุถูุง - ูุฅุฌุฑุงุก ุนุงุฏู. <br>  ุชุฎูู ุฃู ูุฏููุง ูููุชูู ุ ูู ูููุง ูู ููุงู ูุง ูู ุงูููุฏ ุงูุฎุงุต ุจูุง ุชุณูู ุจูุงุณุทุฉ ุงููุฑุณู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">sub</span></span> task1() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-comment"><span class="hljs-comment">'  1 '  loop end sub ' ---------------------------------- sub task2() do '  2 '  loop end sub</span></span></code> </pre> <br>  ุงูุชุฑุถ ุฃูู ุชู ุชูููุฐ ุงููููุฉ 1. ููุฑู ูุง ูุญุฏุซ ุนูู ุงูููุฏุณ ุนูุฏูุง ูููุฐ "ููุงููุฉ ูุฑุณู": <br><br><blockquote style=";text-align:right;direction:rtl">  ุฅุฑุฌุงุน ุงูุนููุงู ุฅูู ุงูุฑูุฒ ุงูุฑุฆูุณู (2 ุจุงูุช) <br>  ุฃุนูู ุงูููุฏุณ -&gt; ุฅุฑุฌุงุน ุนููุงู ุงููููุฉ 1 ุงูุชู ุชุณูู ุงููุฑุณู (2 ุจุงูุช) </blockquote><br>  ุณูู ูุดูุฑ ุงูุฌุฒุก ุงูุนููู ูู ุงูุฑุตุฉ ุฅูู ุนููุงู ุงูุชุนูููุงุช ูู ุงููููุฉ 1 ุ ูุงูุชู ุชุชุจุน ุงุณุชุฏุนุงุก ุงููุฑุณู (ุชุนูููุฉ <b>ุงูุญููุฉ</b> ูู ูุซุงููุง). <br><br>  ุงููุฏู ูู ุงููุฑุณู ูู ุฃุจุณุท ุงูุญุงูุงุช ูู ููู ุงูุชุญูู ุฅูู ุงููููุฉ 2. ูุงูุณุคุงู ูู ููู ููุนู ูุฐุงุ  (ูููุชุฑุถ ุฃู ุงููุฑุณู ูุนุฑู ุจุงููุนู ุนููุงู ุงููููุฉ 2). <br><br>  ููููุงู ุจุฐูู ุ ูุฌุจ ุนูู ุงููุฑุณู ุณุญุจ ุนููุงู ุงูุนูุฏุฉ ุฅูู ุงููููุฉ 1 ูู ุงูููุฏุณ (ููู ููุงู ูุง ููุชุฐูุฑ) ุ ููุถุน ุนููุงู ุงููููุฉ 2 ูู ูุฐุง ุงูููุงู ุนูู ุงูููุฏุณ ุ ุซู ุฅุนุทุงุก ุฃูุฑ ุงูุฅุฑุฌุงุน.  ุณูููู ุงููุนุงูุฌ ุจุงุณุชุฎุฑุงุฌ ุงูุนููุงู ุงูููุฌูุฏ ููุงู ูู ุงูููุฏุณ ุ ูุจุฏูุงู ูู ุงูุนูุฏุฉ ุฅูู ุงููููุฉ 1 ุ ุณููุชูู ุฅูู ุชูููุฐ ุงููููุฉ 2. <br><br>  ูู ุงูููุงุจู ุ ุนูุฏูุง ุชุณุชุฏุนู ุงููููุฉ 2 ุงููุฑุณู ุ ูููู ุฃูุถูุง ุจุณุญุจ ุงูููุฏุณ ูุญูุธ ุงูุนููุงู ุญูุซ ุณูููู ูู ุงููููู ุงูุนูุฏุฉ ุฅูู ุงููููุฉ 2. ูุชุญููู ุนููุงู ุงููููุฉ ุงููุญููุธุฉ ูุณุจููุง ุนูู ุงูููุฏุณ. . <br><br>  ูุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู ูุซู ูุฐู ุงูููุถู: <br><br><blockquote style=";text-align:right;direction:rtl">  ุงููููุฉ 1 -&gt; ุงููุฑุณู -&gt; ุงููููุฉ 2 -&gt; ุงููุฑุณู -&gt; ุงููููุฉ 1 .... </blockquote><br>  ููุณ ุณูุฆุง!  ููู ูุนูู.  ูููู ุ ุจุงูุทุจุน ุ ูุฐุง ูุง ูููู ููุธุงู ุงูุชุดุบูู ุงูุฐู ูููู ุงุณุชุฎุฏุงูู ุนููููุง.  ุจุนุฏ ูู ุดูุก ุ ูุง ููุจุบู ุฃู ุชุนูู ุฌููุน ุงูููุงู ุฏุงุฆููุง ูููุณ ุฏุงุฆููุง - ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฃู <i>ุชุชููุน</i> ุดูุฆูุง ูุง (ุงูุชูุงุก ููุช ุงูุชุฃุฎูุฑ ุ ูุธููุฑ ุจุนุถ ุงูุฅุดุงุฑุงุช ุ ุฅูุฎ).  ูุฐูู ุ ูุฌุจ ุฃู ูููู ููููุงู <i>ุญุงูุฉ</i> (ุฃุนูุงู ุ ุฌุงูุฒุฉ ุ ูุชููุนุฉ ุ ููุง ุฅูู ุฐูู).  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูููู ูู ุงูุฌูุฏ ุชุนููู ุงูููุงู <i>ุฐุงุช ุงูุฃููููุฉ</i> .  ุซู ุ ุฅุฐุง ูุงู ููุงู ุฃูุซุฑ ูู ูููุฉ ุฌุงูุฒุฉ ููุชูููุฐ ุ ูุณููุงุตู ุงููุฑุณู ุงููููุฉ ุฐุงุช ุงูุฃููููุฉ ุงูุนููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุฃููุง RTOS </h2><br>  ูุชูููุฐ ุงูููุฑุฉ ุงูููุถุญุฉ ุ ุชู ุชุทููุฑ ูุธุงู OS AQUA RTOS ุงูุชุนุงููู ุ ูุงูุฐู ูููุฑ ุงูุฎุฏูุงุช ุงููุงุฒูุฉ ููููุงู ููุณูุญ ุจุชูููุฐ ุงูููุงู ุงููุชุนุฏุฏุฉ ุงูุชุนุงูููุฉ ูู ุจูุฆุฉ BASCOM AVR. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุญุธุฉ ูููุฉ ุจุฎุตูุต ูุถุน ุงูุฅุฌุฑุงุกุงุช ูู BASCOM AVR</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุจู ุงูุจุฏุก ูู ูุตู AUQA RTOS ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุจูุฆุฉ BASCOM AVR ุชุฏุนู ููุนูู ูู ุฅุฌุฑุงุกุงุช ุงูุนูููุฉ.  ูุฐุง ููุธูู config config = new |  ุงูุนูุฑ. <br>  ูู ุญุงูุฉ ุชุญุฏูุฏ ุงูุฎูุงุฑ ุงููุฏูู ุ ุณูููู ุงููุชุฑุฌู ุ ุฃููุงู ุ ุจุชุฌููุน ูุงูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุดูู ุฎุทู ุ ุจุบุถ ุงููุธุฑ ุนูุง ุฅุฐุง ูุงู ูุชู ุงุณุชุฎุฏุงูู ูู ููุงู ูุง ุฃู ูุง ุ ูุซุงููุงู ุ ุณูุชู ุงููุธุฑ ุฅูู ุงูุฅุฌุฑุงุกุงุช ุฏูู ูุณูุทุงุช ูุตููุฉ ูู ููุท ุงุณู ูุฑุนู / ููุงูุฉ ูุฑุนูุฉ ูุฅุฌุฑุงุกุงุช ุ ูุตุจ ูู ุงุณููุจ ุงูุงุณู: / ุงูุนูุฏุฉ.  ูุฐุง ูุณูุญ ููุง ุจุชูุฑูุฑ ุนููุงู ุงูุฅุฌุฑุงุก ูุชุณููุฉ ููุณูุทุฉ ุฅูู ุฅุฌุฑุงุก ุขุฎุฑ ุจุงุณุชุฎุฏุงู ูุนุฏู bylabel.  ููุทุจู ูุฐุง ุฃูุถูุง ุนูู ุงูุฅุฌุฑุงุกุงุช ุงููุตููุฉ ูู ููุท ุงูููุท ุงููุฑุนู ููุงุณู ุงููุฑุนู / ุงูููุงูุฉ (ุชุญุชุงุฌ ุฅูู ุชูุฑูุฑ ุงุณู ุงูุฅุฌุฑุงุก ูุชุณููุฉ). <br>  ูู ุงูููุช ููุณู ุ ููุฑุถ ุงููุถุน ุงููุฑุนู = ุงููุถุน ุงููุฏูู ุจุนุถ ุงููููุฏ: ูุฌุจ ุฃูุง ุชุญุชูู ุฅุฌุฑุงุกุงุช ุงููููุฉ ุนูู ูุณูุทุงุช ุ  ูุชู ุชุถููู ุฑูุฒ ุงููููุงุช ุงููุชุตูุฉ ุนุจุฑ $ include ูู ุงููุดุฑูุน ุงูุนุงู ุฎุทููุง ุ ูุจุงูุชุงูู ุ ูุฌุจ ุชูููุฑ ุชุฌุงูุฒ ูู ุงููููุงุช ุงููุชุตูุฉ - ุงูุชูู ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ ุจุงุณุชุฎุฏุงู goto ูุงูุชุณููุฉ. <br>  ูุจุงูุชุงูู ุ ูู AQUA RTOS ุ ูุฌุจ ุนูู ุงููุณุชุฎุฏู ุฅูุง ุงุณุชุฎุฏุงู ุชุฏููู ุงูุฅุฌุฑุงุก ุงููุฏูู ููุท ูู ุฃุณููุจ task_name: / return ููููุงู ุ ุฃู ุงุณุชุฎุฏุงู ุงุณู ูุฑุนู / ููุงูุฉ ูุฑุนู ุฃูุซุฑ ุดููุนูุง ุ ูุถูููุง ุงููุฑุนููุฏ modifier = old ูู ุจุฏุงูุฉ ุงูููุฏ ุ ูุชุฌุงูุฒ ูู ุงููููุงุช ุงููุถูููุฉ ุบูุชู ุชุณููุฉ / ูุชุดูู ุฑูุฒ ุงูููู / ุงูุชุณููุฉ:. <br></div></div><br><h3 style=";text-align:right;direction:rtl">  ุญุงูุงุช ูููุฉ AQUA RTOS </h3><br>  ูุชู ุชุนุฑูู ุงูุญุงูุงุช ุงูุชุงููุฉ ููููุงู ูู AQUA RTOS: <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OSTS_UNDEFINE OSTS_READY OSTS_RUN OSTS_DELAY OSTS_STOP OSTS_WAIT OSTS_PAUSE OSTS_RESTART</code> </pre> <br>  ุฅุฐุง ูู ุชุชู ุชููุฆุฉ ุงููููุฉ ุจุนุฏ ุ <b>ูุณูุชู</b> ุชุนููู ุงูุญุงูุฉ <b>OSTS_UNDEFINE</b> . <br>  ุจุนุฏ ุงูุชููุฆุฉ ุ ูููู ูููููุฉ ุงูุญุงูุฉ <b>OSTS_STOP</b> . <br>  ุฅุฐุง ูุงูุช ุงููููุฉ <i>ุฌุงูุฒุฉ ููุชูููุฐ</i> ุ <b>ูุณูุชู</b> ุชุนููู ุงูุญุงูุฉ <b>OSTS_READY</b> . <br>  ุงููููุฉ ููุฏ ุงูุชุดุบูู ุญุงูููุง ููุง ุงูุญุงูุฉ <b>OSTS_RUN</b> . <br>  <b>ูููู ุ</b> ูููููุง ุงูุงูุชูุงู ุฅูู ุงูุญุงูุงุช <b>OSTS_STOP ู OSTS_READY ู OSTS_DELAY ู OSTS_WAIT ู OSTS_PAUSE</b> . <br>  ุงูุญุงูุฉ <b>OSTS_DELAY</b> ูุฏููุง ูููุฉ ุชูู <i>ุจุงูุชุฃุฎูุฑ</i> . <br>  <b>ูุชู</b> ุชุนููู ุงูุญุงูุฉ <b>OSTS_WAIT</b> ุฅูู ุงูููุงู ุงูุชู <i>ุชูุชุธุฑ ุฅุดุงุฑุฉ ุฃู ุญุฏุซ ุฃู ุฑุณุงูุฉ</i> (ุงููุฒูุฏ ุนููุง ุฃุฏูุงู). <br><br>  ูุง ุงููุฑู ุจูู <b>ุญุงูุงุช OSTS_STOP</b> ู <b>OSTS_PAUSED</b> ุ <br>  ุฅุฐุง ุชููุช ุงููููุฉ ุญุงูุฉ <b>OSTS_STOP ูุณุจุจ ูุง</b> ุ ูุณูุชู ุชูููุฐ ุงูุงุณุชุฆูุงู ุงููุงุญู ูููููุฉ (ุนูุฏ ุงุณุชูุงู ุญุงูุฉ <b>OSTS_READY</b> ) ูู ููุทุฉ ุงูุฏุฎูู ุงูุฎุงุตุฉ ุจูุง ุ ุฃู  ูู ุงูุจุฏุงูุฉ.  ูู ุญุงูุฉ <b>OSTS_PAUSE ุ</b> ุณุชุณุชูุฑ ุงููููุฉ ูู ุงูุนูู ูู ุงูููุงู ุงูุฐู ุชู ุชุนูููู ููู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุฏุงุฑุฉ ุญุงูุฉ ุงููููุฉ </h3><br>  ูุณุชุทูุน ูู ูู ูุธุงู ุงูุชุดุบูู ููุณู ุฅุฏุงุฑุฉ ุงูููุงู ุชููุงุฆููุง ููุฐูู ุงููุณุชุฎุฏู ูู ุฎูุงู ุงูุงุชุตุงู ุจุฎุฏูุงุช ูุธุงู ุงูุชุดุบูู.  ููุงู ุงูุนุฏูุฏ ูู ุฎุฏูุงุช ุฅุฏุงุฑุฉ ุงูููุงู (ุชุจุฏุฃ ุฃุณูุงุก ุฌููุน ุฎุฏูุงุช ูุธุงู ุงูุชุดุบูู ุจุงูุจุงุฏุฆุฉ <b>OS</b> ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_InitTask(task_label, task_prio) OS_Stop() OS_StopTask(task_label) OS_Pause() OS_PauseTask(task_label) OS_Resume() OS_ResumeTask(task_label) OS_Restart()</code> </pre> <br>  ูู ูุงุญุฏ ูููู ูุฏูู ุฎูุงุฑุงู: <b>OS_service</b> ู <b>OS_serviceTask</b> (ุจุงุณุชุซูุงุก ุฎุฏูุฉ <b>OS_InitTask</b> ุ ุงูุชู ูุฏููุง ุฎูุงุฑ ูุงุญุฏ ููุท ุ ุฎุฏูุฉ <b>OS_Init</b> ุชููุฆุฉ ูุธุงู ุงูุชุดุบูู ููุณู). <br><br>  ูุง ูู ุงููุฑู ุจูู <b>OS_service</b> ู <b>OS_serviceTask</b> ุ  ุชุนูู ุงูุทุฑููุฉ ุงูุฃููู ุนูู ุงููููุฉ ููุณูุง ุงูุชู ุชุณุจุจุช ูููุง ุ  ูุณูุญ ูู ุงูุซุงูู ุจุชุนููู ูุณูุทุฉ ูุคุดุฑ ุฅูู ูููุฉ ุฃุฎุฑู ุ ูุจุงูุชุงูู ุ ุฅุฏุงุฑุฉ ุฃุฎุฑู ูู ูููุฉ ูุงุญุฏุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุญูู OS_Resume</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุฌููุน ุฎุฏูุงุช ุฅุฏุงุฑุฉ ุงูููุงู ุ ุจุงุณุชุซูุงุก OS_Resume ู OS_ResumeTask ุ ุชุณุชุฏุนู ูุฏูุฑ ุงูููุงู ุชููุงุฆููุง ุจุนุฏ ุงููุนุงูุฌุฉ.  ูู ุงูููุงุจู ุ ุชููู ุฎุฏูุงุช OS_Resume * ุจุชุนููู ุญุงูุฉ ุงููููุฉ ููุท ุฅูู OSTS_READY.  ุณุชุชู ูุนุงูุฌุฉ ูุฐู ุงูุญุงูุฉ ููุท ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก ุงููุฑุณู ุจุดูู ุตุฑูุญ. <br></div></div><br><h3 style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูุชุธุงุฑ ุงููููุฉ ูุงูุฃููููุฉ </h3><br>  ููุง ุฐูุฑ ุฃุนูุงู ุ ูู ูุธุงู ุญูููู ุ ูุฏ ุชููู ุจุนุถ ุงูููุงู ุฃูุซุฑ ุฃูููุฉ ุ ูู ุญูู ุฃู ุงูููุงู ุงูุฃุฎุฑู ูุฏ ุชููู ุซุงูููุฉ.  ูุฐูู ุ ุชุชูุซู ุฅุญุฏู ุงูููุฒุงุช ุงููููุฏุฉ ููุธุงู ุงูุชุดุบูู ูู ุงููุฏุฑุฉ ุนูู ุชุนููู ุฃููููุฉ ุงูููุงู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุฅุฐุง ูุงู ููุงู ุงูุนุฏูุฏ <i>ูู</i> ุงูููุงู <i>ุงูุฌุงูุฒุฉ</i> ูู ููุณ ุงูููุช ุ ูุณูููู ูุธุงู ุงูุชุดุบูู ุฃููุงู ุจุชุญุฏูุฏ ุงููููุฉ ุฐุงุช ุงูุฃููููุฉ ุงูุนููุง.  ุฅุฐุง ูุงูุช <b>ุฌููุน</b> ุงูููุงู ุงูุฌุงูุฒุฉ ููุง ููุณ ุงูุฃููููุฉ ุ ูุณูููู ูุธุงู ุงูุชุดุบูู ุจูุถุนูุง ูู ุฏุงุฆุฑุฉ ุ ุจุชุฑุชูุจ ูุณูู "ุฏุงุฆุฑู" ุฃู ุฏุงุฆุฑู. <br><br>  ูู AQUA RTOS ุ ูุชู ุชุนููู ุงูุฃููููุฉ ููููุฉ ุนูุฏูุง ุชุชู <i>ุชููุฆุชูุง ูู</i> ุฎูุงู ุงุณุชุฏุนุงุก ุฎุฏูุฉ <b>OS_InitTask</b> ุ ุงูุชู <b>ุชุชููู</b> ุนููุงู ุงููููุฉ ููุณูุทุฉ ุฃููู ูุฑูู ูู 1 ุฅูู 15. ููุณูุทุฉ ุซุงููุฉ ุ <i>ูุงูุฑูู ุงูุฃุฏูู ูุนูู ุฃููููุฉ ุฃุนูู</i> .  ุฃุซูุงุก ุชุดุบูู ูุธุงู ุงูุชุดุบูู ุ ูุง ูุชู ุชูููุฑ ุชุบููุฑ ูู ุงูุฃููููุฉ ุงููุฎุตุตุฉ ูููููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฃุฎูุฑ </h3><br>  ูู ูู ูููุฉ ุ ุชุชู ูุนุงูุฌุฉ ุงูุชุฃุฎูุฑ ุจุดูู ูุณุชูู ุนู ุงูููุงู ุงูุฃุฎุฑู. <br>  ูุจุงูุชุงูู ุ ุจูููุง ูุนูู ูุธุงู ุงูุชุดุบูู ุนูู ุชุฃุฌูู ูููุฉ ูุงุญุฏุฉ ุ ูููู ุชูููุฐ ููุงู ุฃุฎุฑู. <br>  ูุชูุธูู ุงูุชุฃุฎูุฑ ูู ุชูุฏูู ุงูุฎุฏูุงุช <b>OS_Delay |</b>  <b>OS_DelayTask</b> .  ุงููุณูุทุฉ ูู ุนุฏุฏ ุงููููู ุซุงููุฉ ุงูุชู ุชู <i>ุชุฃุฎูุฑ</i> ุงููููุฉ.  ูุธุฑูุง ูุฃู ุงูุจุนุฏ ุงูุฎุงุต <b>ุจุงููุณูุทุฉ dword</b> ุ ูุฅู ุงูุญุฏ ุงูุฃูุตู ููุชุฃุฎูุฑ ูู 4294967295 ูููู ุซุงููุฉ ุ ุฃู ุญูุงูู 120 ุณุงุนุฉ ุ ููู ูุง ูุจุฏู ูุงูููุง ููุนุธู ุงูุชุทุจููุงุช.  ุจุนุฏ ุงุณุชุฏุนุงุก ุฎุฏูุฉ ุงูุชุฃุฎูุฑ ุ ูุชู ุงุณุชุฏุนุงุก ุงููุฑุณู ุชููุงุฆููุง ุ ูุงูุฐู ูููู ุงูุชุญูู ุฅูู ููุงู ุฃุฎุฑู ุทูุงู ูุฏุฉ ุงูุชุฃุฎูุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฅุดุงุฑุงุช </h3><br>  ุงูุฅุดุงุฑุงุช ูู AQUA RTOS ุชุดุจู ุงูุฃุนูุงู ูุงููุชุบูุฑุงุช ุงููุชุงุญุฉ ููููุงู.  ูู ูู ููุนูู - ุซูุงุฆู ููููู ุนุฏู.  ุงูุฃููู ููุง ุฏููุชุงู ููุท: ุญุฑุฉ ููุบููุฉ.  ูุงูุซุงูู ูู ุนุฏุงุฏ ุงูุจุงูุช (ุฎุฏูุฉ ุนุฏ ุงูุฅุดุงุฑุงุช ูู ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู AQUA RTOS ูู ูุชู ุชูููุฐูุง (ุฃูุง ูุณูู ุงูุญูุงุฑ) ุ ูุฐูู ูู ูุง ููุงู ุฃุฏูุงู ููุทุจู ููุท ุนูู ุงูุฅุดุงุฑุงุช ุงูุซูุงุฆูุฉ). <br><br>  ูุชูุซู ุงูุงุฎุชูุงู ุจูู ุงูุฅุดุงุฑุฉ ูุงูุฅุดุงุฑุฉ ุงูุจุณูุทุฉ ูู ุฃูู ูููู ุฅุฌุฑุงุก ุงููููุฉ <i>ูุงูุชุธุงุฑ ุฅุตุฏุงุฑ</i> ุงูุฅุดุงุฑุฉ ุงููุญุฏุฏุฉ.  ูู ุจุนุถ ุงูููุงุญู ุ ูุดุจู ุงุณุชุฎุฏุงู ุงูุฅุดุงุฑุงุช ูุนูููุง ุฎุท ุงูุณูู ุงูุญุฏูุฏูุฉ: ุนูุฏ ุงููุตูู ุฅูู ุงูุฅุดุงุฑุฉ ุ ุณุชุชุญูู ุงูุชุฑููุจุฉ (ุงููููุฉ) ูู ุงูุฅุดุงุฑุฉ ุ ูุฅุฐุง ูู ุชูู ููุชูุญุฉ ุ ูุณุชูุชุธุฑ ุฅุดุงุฑุฉ ุงูุชูููู ูุชุธูุฑ ุฅูู ุฃุจุนุฏ ูู ุฐูู.  ูู ูุฐุง ุงูููุช ุ ูููู ุฃู ุชุณุชูุฑ ุงููุทุงุฑุงุช (ุงูููุงู) ูู ุงูุชุญุฑู (ุงูุชุดุบูู). <br><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชุนููู ูู ุงูุนูู ุงูุฃุณูุฏ ุฅูู ุงููุฑุณู.  ุจูุฌุฑุฏ ุฅุฎุจุงุฑ ุงููููุฉ ุจุงูุชุธุงุฑ ุงูุฅุดุงุฑุฉ ุ ูุชู ููู ุงูุชุญูู ุชููุงุฆููุง ุฅูู ุงููุฑุณู ุ ูููููู ุจุฏุก ููุงู ุฃุฎุฑู - ุชูุงููุง ุญุชู ูุชู ุชุญุฑูุฑ ุงูุฅุดุงุฑุฉ ุงููุญุฏุฏุฉ.  ุจูุฌุฑุฏ ุฃู ุชุชุบูุฑ ุญุงูุฉ ุงูุฅุดุงุฑุฉ ุฅูู <i>ูุฌุงูู</i> ุ ูุนููู ุงููุฑุณู ุฌููุน ุงูููุงู ุงูุชู ูุงูุช ุชูุชุธุฑ ูุฐุง ุงูุฅุดุงุฑุฉ <i>ุฌุงูุฒุฉ</i> ููุญุงูุฉ ( <b>OSTS_READY</b> ) ุ ูุณูุชู ุชูููุฐูุง ุญุณุจ ุชุฑุชูุจ ุงูุฃููููุฉ ูุงูุฃููููุฉ. <br>  ูู ุงููุฌููุน ุ ูููุฑ AQUA RTOS 16 ุตูุฑุฉ ุซูุงุฆูุฉ ุซูุงุฆูุฉ (ูููู ุ ูู ุญูุซ ุงููุจุฏุฃ ุ ุฒูุงุฏุฉ ูุฐุง ุงูุฑูู ุนู ุทุฑูู ุชุบููุฑ ุจูุนุฏ ุงููุชุบูุฑ ูู ูุญุฏุฉ ุงูุชุญูู ูู ุงููููุฉ ุ ูุฃูู ูุชู ุชุทุจููู ุฏุงุฎููุงู ูุฃุนูุงู ุจุช). <br>  ุชุนูู ุงูุฅุดุงุฑุงุช ุงูุซูุงุฆูุฉ ูู ุฎูุงู ุงูุฎุฏูุงุช ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">hBSem OS_CreateBSemaphore() OS_WaitBSemaphore(hBSem) OS_WaitBSemaphoreTask(task_label, hBSem) OS_BusyBSemaphore(hBSem) OS_FreeBSemaphore(hBSem)</code> </pre> <br>  ูุจู ุงุณุชุฎุฏุงู ุฅุดุงุฑุฉ ูุฌุจ <i>ุฅูุดุงุก</i> .  ูุชู ุฐูู ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุฎุฏูุฉ <b>OS_CreateBSemaphore</b> ุ ุงูุชู ุชูุฑุฌุน ููุนุฑูู ุงูุจุงูุช ุงููุฑูุฏ (ูุคุดุฑ) <b>ูุฅุดุงุฑุฉ hBSem</b> ุงููููุดุฃุฉ ุ ุฃู ูู ุฎูุงู ุงููุนุงูุฌ ุงูููุนุฑููู ูู ููุจูู ุงููุณุชุฎุฏู ุ ูููู ุฎุทุฃู <b>OSERR_BSEM_MAX_REACHED</b> ุ ูุดูุฑ ุฅูู ุฃูู ูุฏ ุชู ุงููุตูู ุฅูู ุงูุญุฏ ุงูุฃูุตู ุงููุณููุญ ุจู <b>ููุฅุดุงุฑุงุช</b> ุงูุซูุงุฆูุฉ. <br><br>  ููููู ุงูุนูู ูุน ุงููุนุฑู ุงููุณุชูู ุจุชูุฑูุฑู ููุณูุทุฉ ุฅูู ุฎุฏูุงุช ุฅุดุงุฑุฉ ุฃุฎุฑู. <br><br>  ุฎุฏูุฉ <b>OS_WaitBSemaphore |</b>  ูุถุน <b>OS_WaitBSemaphoreTask ุงููููุฉ</b> (ุงูุญุงููุฉ | ุงููุญุฏุฏุฉ) ูู ุญุงูุฉ <i>ุงูุชุธุงุฑ ุฅุตุฏุงุฑ ุฅุดุงุฑุฉ</i> <b>hBSem</b> ุฅุฐุง ูุงูุช <i>ุฅุดุงุฑุฉ</i> <b>ุงููุฑูุฑ</b> ูุฐู ูุดุบููุฉ ุ ุซู ุชููู ุงูุชุญูู ุฅูู ุงููุฑุณู ุจุญูุซ ููููู ุจุฏุก ููุงู ุฃุฎุฑู.  ุฅุฐุง ูุงูุช ุงูุฅุดุงุฑุฉ ุฎุงููุฉ ุ ููู ูุญุฏุซ ููู ุงูุชุญูู ุ ูุชุณุชูุฑ ุงููููุฉ ุจุจุณุงุทุฉ. <br><br>  ุชููู <b>ุฎุฏูุงุช OS_BusyBSemaphore</b> ู <b>OS_FreeBSemaphore</b> ุจุชุนููู ุฅุดุงุฑุฉ <b>hBSem</b> ุฅูู <i>ูุดุบูู</i> ุฃู <i>ูุฌุงูู ุ</i> ุนูู ุงูุชูุงูู. <br><br>  ูู ูุชู ุชูููุฑ ุชุฏููุฑ ุงูุฅุดุงุฑุงุช ูู ุฃุฌู ุชุจุณูุท ูุธุงู ุงูุชุดุบูู ูุชูููู ููุฏุงุฑ ุงูููุฏ.  ูุจุงูุชุงูู ุ ูุฅู ุฌููุน ุงูุฅุดุงุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุซุงุจุชุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃุญุฏุงุซ </h3><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฅุดุงุฑุงุช ุ ูููู ุฃู ุชููู ุงูููุงู ูุฏููุนุฉ ุจุงูุญุฏุซ.  ูููู ุชูุฌูู ูููุฉ ูุงุญุฏุฉ <i>ูุชููุน ุญุฏุซ ูุนูู</i> ุ ููุฏ ุชุดูุฑ ูููุฉ ุฃุฎุฑู (ููุฐูู ุฑูุฒ ุงูุฎูููุฉ) ุฅูู ูุฐุง ุงูุญุฏุซ.  ูู ุงูููุช ููุณู ุ ุณุชุชููู ุฌููุน ุงูููุงู ุงูุชู ูุงูุช ุชูุชุธุฑ ูุฐุง ุงูุญุฏุซ ุงูุญุงูุฉ <i>ุฌุงูุฒุฉ ููุชูููุฐ</i> ( <b>OSTS_READY</b> ) ูุณูุชู ุชุนููููุง ุจูุงุณุทุฉ ุงููุฑุณู ููุชูููุฐ ููููุง ููุฃููููุฉ ูุงูุฃููููุฉ. <br><br>  ูุง ุงูุฃุญุฏุงุซ ุงูุชู ูููู ุฃู ุชุณุชุฌูุจ ููุง ุงููููุฉุ  ุญุณููุง ุ ุนูู ุณุจูู ุงููุซุงู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุทุงุนุ </li><li style=";text-align:right;direction:rtl">  ุญุฏูุซ ุฎุทุฃ. </li><li style=";text-align:right;direction:rtl">  ุฅุตุฏุงุฑ ุงูููุฑุฏ (ุฃุญูุงููุง ูููู ุฃูุซุฑ ููุงุกูุฉ ูุงุณุชุฎุฏุงู ุฅุดุงุฑุฉ ููุฐุง) ุ </li><li style=";text-align:right;direction:rtl">  ุชุบููุฑ ุญุงูุฉ ุฎุท ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุฃู ุงูุถุบุท ุนูู ููุชุงุญ ุนูู ููุญุฉ ุงูููุงุชูุญ ุ </li><li style=";text-align:right;direction:rtl">  ุชููู ุฃู ุฅุฑุณุงู ุดุฎุตูุฉ ุนุจุฑ RS-232 ุ </li><li style=";text-align:right;direction:rtl">  ููู ุงููุนูููุงุช ูู ุฌุฒุก ูู ุงูุชุทุจูู ุฅูู ุขุฎุฑ (ุงูุธุฑ ุฃูุถุง ุงูุฑุณุงุฆู). </li></ul><br>  ูุชู ุชุทุจูู ูุธุงู ุงููุนุงููุงุช ูู ุฎูุงู ุงูุฎุฏูุงุช ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">hEvent OS_CreateEvent() OS_WaitEvent(hEvent) OS_WaitEventTask(task_label, hEvent) OS_WaitEventTO(hEvent, dwTimeout) OS_SignalEvent(hEvent)</code> </pre> <br>  ูุจู ุงุณุชุฎุฏุงู ุงูุญุฏุซ ุ ุชุญุชุงุฌ <i>ุฅูู ุฅูุดุงุฆู</i> .  ูุชู ุฐูู ุนู ุทุฑูู ุงุณุชุฏุนุงุก ูุธููุฉ <b>OS_CreateEvent</b> ุ ุงูุชู ุชูุฑุฌุน ูุนุฑู ุจุงูุช ูุฑูุฏ (ููุจุถ) ูุญุฏุซ <b>hEvent</b> ุ ุฃู ุชุฑูู ุฎุทุฃ <b>OSERR_EVENT_MAX_REACHED ูู</b> ุฎูุงู ูุนุงูุฌ ุงููุนุฑูุฉ ูู ูุจู ุงููุณุชุฎุฏู ุ ููุง ูุดูุฑ ุฅูู ุฃูู ุชู ุงููุตูู ุฅูู ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูุฃุญุฏุงุซ ุงูุชู ูููู ุฅูุดุงุคูุง ูู ูุธุงู ุงูุชุดุบูู (ุจุญุฏ ุฃูุตู 255 ุฃุญุฏุงุซ ูุฎุชููุฉ). <br><br>  ูุฌุนู ูููุฉ ุชูุชุธุฑ ุญุฏุซ <b>hEvent</b> ุ ุงุชุตู <b>OS_WaitEvent</b> ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู ุ ูุชูุฑูุฑ ูุคุดุฑ ุงูุญุฏุซ ููุณูุทุฉ.  ุจุนุฏ ุงูุงุชุตุงู ุจูุฐู ุงูุฎุฏูุฉ ุ ุณูุชู ููู ุงูุชุญูู ุชููุงุฆููุง ุฅูู ุงููุฑุณู. <br><br>  ุจุฎูุงู ุฎุฏูุฉ ุงูุฅุดุงุฑุฉ ุ ุชููุฑ ุฎุฏูุฉ ุงูุญุฏุซ ุฎูุงุฑูุง ูุงูุชุธุงุฑ ุญุฏุซ ูุน <i>ุงูุชูุงุก ูููุฉ</i> .  ููููุงู ุจุฐูู ุ ุงุณุชุฎุฏู ุฎุฏูุฉ <b>OS_WaitEventTO</b> .  ุงููุณูุทุฉ ุงูุซุงููุฉ ููุง ููููู ุชุญุฏูุฏ ุนุฏุฏ ุงููููู ุซุงููุฉ ุงูุชู ูููู ุฃู ุชุชููุนูุง ุงููููุฉ ููุญุฏุซ.  ูู ุญุงูุฉ ุงูุชูุงุก ุงูููุช ุงููุญุฏุฏ ุ ุณุชุชููู ุงููููุฉ ุงูุญุงูุฉ <i>ุฌุงูุฒุฉ ููุชูููุฐ</i> ููุง ูู ูุงู ุงูุญุฏุซ ูุฏ ููุน ุ ูุณูุชู ุชุนููููุง ูู ูุจู ุงููุฑุณู ูููุงุตูุฉ ุงูุชูููุฐ ููููุง ููุฃููููุฉ ูุงูุฃููููุฉ.  ูููู ุฃู ุชูุชุดู ุงููููุฉ ุฃูู ูู ููู ุญุฏุซูุง ุ ูููู ูููุฉ ุ ูููู ุฃู ุชุชุญูู ุงููููุฉ ุนู ุทุฑูู ุงูุชุญูู ูู ุนูุงูุฉ <b>OS_TIMEOUT ุงูุนุงูุฉ</b> . <br><br> <i></i>             <b>OS_SignalEvent</b> ,       .    ,   ,    <i>  </i> ,           . <br><br><h3 style=";text-align:right;direction:rtl">  </h3><br>        ,       :         ,           โ   . <br>     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">hTopic OS_CreateMessage() OS_WaitMessage(hTopic) OS_WaitMessageTask(task_label, hTopic) OS_WaitMessageTO(hTopic, dwTimeout) OS_SendMessage(hTopic, wMessage) word_ptr OS_GetMessage(hTopic) word_ptr OS_PeekMessage(hTopic) <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> OS_GetMessageString(hTopic) <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> OS_PeekMessageString(hTopic)</code> </pre> <br>    ,    <i> </i> .     <b>OS_CreateMessage</b> ,      <b>hTopic</b> ,       <b>OSERR_TOPIC_MAX_REACHED</b> ,   ,       ,     . <br><br>        <b>hTopic</b> ,      <b>OS_WaitMessage</b> ,      .          .  ,        <i>    <b>hTopic</b></i> . <br><br>     <b>OS_WaitMessageTO</b>    <b>OS_WaitEventTO</b>  . <br><br>      <b>OS_SendMessage</b> .     ,     ,   โ   <b>word</b> .      ,   <i>  </i> , ,   ,    . <br><br>    ,     BASCOM  <b>varptr</b> , , : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">strMessage = <span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span> OS_SendMessage hTopic, varptr (strMessage)</code> </pre> <br>     <b>OS_WaitMessage</b> ,  ,    ,          ,     โ      .        .      <b>word</b> ,      ,    ,   .   <b>OS_GetMessage</b>   ,  <b>OS_PeekMessage</b>  . <br><br>     ,   ,    <b>OS_GetMessageString</b>  <b>OS_PeekMessageString</b> ,     ,   ,     . <br><br><h3 style=";text-align:right;direction:rtl">    </h3><br>        AQUA RTOS       <b>TIMER0</b> .  ,   (  )     .      , ..          .    1 . <br><br><h2 style=";text-align:right;direction:rtl">    AQUA RTOS </h2><br><h3 style=";text-align:right;direction:rtl">   </h3><br>       ,           .   <b>OS_SIM = TRUE | FALSE</b> ,    . <br><br>  ,      <b>OS_MAX_TASK</b> ,       .    ,     (  ),      .        ,   . <i>    ,    .</i> <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>    AQUA RTOS   .      <b>OS_Init</b> .      .    ,     โ     .  ,   ,    โ  . <br><br>         (    ) โ      ,            .          ,      -    . <br><br> ,     AQUA RTOS            : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_Init my_err_trap <span class="hljs-comment"><span class="hljs-comment">'... '... '... sub my_err_trap(err_code as byte) print err_code end sub</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl">   </h3><br>     ,     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_InitTask task_1, <span class="hljs-number"><span class="hljs-number">1</span></span> OS_InitTask task_2 , <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-comment"><span class="hljs-comment">'... OS_InitTask task_N , 1</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">   </h2><br><h3 style=";text-align:right;direction:rtl">   </h3><br> ,    ,       Arduino Nano V3.       -  (, test),     bas-: <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-comment"><span class="hljs-comment">'    config submode = old $include "..\aquaRTOS_1.05.bas" $regfile = "m328pdef.dat" $crystal = 16000000 $hwstack = 48 $swstack = 48 $framesize = 64 '   declare sub my_err_trap (byval err_code as byte) declare sub task_1() declare sub task_2() '       led_1 alias portd.4 led_2 alias portd.5 config portd.4 = output config portd.5 = output ' ***    *** '   OS_Init my_err_trap '   OS_InitTask task_1, 1 OS_InitTask task_2 , 1 '      ยซยป (OSTS_STOP) '    ,     ' ยซ  ยป (OSTS_READY)   OS_ResumeTask OS_ResumeTask task_1 OS_ResumeTask task_2 '      OS_Sheduler end ' ***  *** sub task_1 () do toogle led_1 '   1 OS_delay 1000 '   1000  loop end sub sub task_2 () do toogle led_2 '   2 OS_delay 333 '   333  loop end sub ' **************************************************** '   sub my_err_trap(err_code as byte) print "OS Error: "; err_code end sub</span></span></code> </pre> <br>      <b>D4</b>  <b>D5</b>  Arduino (   ,   -  ).     100...500     <b>GND</b> .      .       2  0,66 . <br><br>   . ,     (  ,      aliases),  โ  ,   โ . <br><br>         ยซยป,     ยซ  ยป (,       โ  -           ,        ,      ;          ).        <b>OS_ResumeTask</b> . <br><br>     ,    .    ? , !          . ,    ,      ,         <b>end</b> . <br><br>    .    ,         <b>do โ loop</b> .    โ            ,   ,      โ       ,      .       <b>OS_Delay</b> .        ,       . <br><br>       <b>OS_SIM = TRUE</b>       ,   ,   ,   . <br><br> ,   , ,      ยซ  ยป,       .   ,    ยซ   ยป,         . <br><br>  ,    (, <b>task_1</b> ),       (     <b>end</b>   )     <b>task_1</b> ,       ,    <b>return</b> ,             โ  ,    <b>task_1</b> ( <b>do</b>   <b>task_1</b> ). <br><br>  <b>task_1</b> ,   ,   <b>OS_delay</b> , ,   ,   . <br><br>   ,    ,     <b>task_1</b> (  ,    <b>OS_delay</b> , ..  <b>loop</b> ),  , ยซ ยป, ,      <b>task_2</b> .       <b>task_2</b> (      <b>do</b>    <b>task_2</b> )    <b>return</b> ,             โ  ,    <b>task_2</b> . <br><br>  <b>task_2</b> ,   ,   <b>OS_delay</b> , ,   ,   . <br><br>   ,    ,     <b>task_1</b> (  ,    <b>OS_delay</b> , ..  <b>loop</b> ),  , ยซ ยป, ,      <b>task_2</b> .       ,       <b>task_1</b>     ,   ,      .  (  <b>loop</b>    <b>task_1</b> ),    . <br><br>  <b>task_1</b>   <b>loop</b> ,     ยซ 1 โ  โ  2 โ ยป   . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>         . <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-comment"><span class="hljs-comment">'    config submode = old $include "..\aquaRTOS_1.05.bas" $regfile = "m328pdef.dat" $crystal = 16000000 $hwstack = 48 $swstack = 48 $framesize = 64 '   declare sub my_err_trap (byval err_code as byte) declare sub task_1() declare sub task_2() const OS_SIM = TURE '       '   dim hTopic as byte '     dim task_1_cnt as byte '    1 dim strMessage as string * 16 '  ' ***    *** OS_CreateMessage hTopic OS_Init my_err_trap OS_InitTask task_1 , 1 OS_InitTask task_2 , 1 OS_ResumeTask task_1 OS_ResumeTask task_2 OS_Sheduler end ' ***  *** sub task_1() do print "task 1" OS_Sheduler incr task_1_cnt '    1 if task_1_cnt &gt; 3 then print "task 1 is sending message to task 2" strMessage = "Hello, task 2!" '    2 OS_SendMessage hTopic , varptr(strMessage) task_1_cnt = 0 end if loop end sub sub task_2() do print "task 2 is waiting messages..." '      1 OS_WaitMessage hTopic print "message recieved: " ; OS_GetMessageString (hTopic) loop end sub ' **************************************************** '   sub my_err_trap(err_code as byte) print "OS Error: "; err_code end sub</span></span></code> </pre> <br>           : <br><br><blockquote style=";text-align:right;direction:rtl"> task 1 <br> task 2 is waiting messagesโฆ <br> task 1 <br> task 1 <br> task 1 <br> task 1 is sending message to task 2 <br> task 1 <br> message recieved: Hello, task 2! <br> task 2 is waiting messagesโฆ <br> task 1 <br> task 1 <br>  ... <br></blockquote><br>  ,        .    1  <b>task 1</b> ,     ,      .  2  <b>task 2 is waiting messages...</b> ,        <b>hTopic</b> ,     ,     1.    <b>task 1</b>     . ,   ,   2   ,     1   <b>incr</b> ,    . <br>   <b>task_1_cnt</b>   1   ,   ,    โ   <b>loop</b>    <b>task 1</b> .     ,   ,    2  ,    .    . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>             : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-comment"><span class="hljs-comment">'    config submode = old $include "..\aquaRTOS_1.05.bas" $regfile = "m328pdef.dat" $crystal = 16000000 $hwstack = 48 $swstack = 48 $framesize = 64 '   declare sub my_err_trap (byval err_code as byte) declare sub task_scankeys() declare sub task_led_1() declare sub task_led_2() '        led_1 alias portd.4 led_2 alias portd.5 config portd.4 = output config portd.5 = output button_1 alias pind.6 button_2 alias pind.7 config portd.6 = input config portd.7 = input '   dim eventButton_1 as byte dim eventButton_2 as byte ' ***    *** eventButton_1 = OS_CreateEvent '       eventButton_2 = OS_CreateEvent OS_Init my_err_trap OS_InitTask task_scankeys , 1 OS_InitTask task_led_1 , 1 OS_InitTask task_led_2 , 1 OS_ResumeTask task_scankeys OS_ResumeTask task_led_1 OS_ResumeTask task_led_2 OS_Sheduler end ' ***  *** sub task_scankeys() do debounce button_1 , 0 , btn_1_click , sub debounce button_2 , 0 , btn_2_click , sub OS_Sheduler loop btn_1_click: OS_SignalEvent eventButton_1 return btn_2_click: OS_SignalEvent eventButton_2 return end sub sub task_led_1() do OS_WaitEvent eventButton_1 toggle led_1 loop end sub sub task_led_2() do OS_WaitEvent eventButton_2 toggle led_2 loop end sub ' **************************************************** '   sub my_err_trap(err_code as byte) print "OS Error: "; err_code end sub</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">     AQUA RTOS </h2><br><br>   ,         .           ;     ,   ,  .  ,     : ,      95โฆ97ยฐ;               (,  GSM-),      . <br><br><h3 style=";text-align:right;direction:rtl">    </h3><br>         ยซ +  + ยป  ,     .     ,    . <br>        : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">     โ <b>ControlHeater()</b> </li><li style=";text-align:right;direction:rtl">      โ <b>ShowGoods()</b> </li><li style=";text-align:right;direction:rtl">  /    โ <b>AcceptMoney()</b> </li><li style=";text-align:right;direction:rtl">   โ <b>ScanKeys()</b> </li><li style=";text-align:right;direction:rtl">   โ <b>MakeChange()</b> </li><li style=";text-align:right;direction:rtl">   โ <b>ReleaseCoffee()</b> </li><li style=";text-align:right;direction:rtl">    โ <b>Alarm()</b> </li></ul><br>        . <br> <b>ControlHeater()</b>  ,        .       ,      ,    .      .     5. <br> <b>ShowGoods()</b>   .       ,   -   .      8,             . <br> <b>ScanKeys()</b>     ,       .     3,      40 . <br> <b>AcceptMoney()</b>     .      ,   <b>ScanKeys(),</b>     20 . <br> <b>MakeChange ()</b>     .     <b>ReleaseCoffee()</b>    10. <br> <b>ReleaseCoffee()</b>   ,           .       2. <br>   โ    ,  <b>Alarm()</b>      โ 1,     ,      . <br><br>  ,       .  ,      EEPROM   ,       . <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-comment"><span class="hljs-comment">'    declare sub ControlHeater() declare sub ShowGoods() declare sub AcceptMoney() declare sub ScanKeys() declare sub MakeChange () declare sub ReleaseCoffee() declare sub Alarm()</span></span></code> </pre> <br>     RTOS      :          (  ,    ) โ      . <br><br> , <b>ReleaseCoffee()</b>    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">sub</span></span> ReleaseCoffee() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> OS_WaitMessage bCoffeeSelection wItem = OS_GetMessage(bCoffeeSelection) Release wItem <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sub</span></span></code> </pre> <br>  <b>ReleaseCoffee</b>        <b>bCoffeeSelection</b>    ,     (   ,      ).    , <b>ReleaseCoffee()</b>    ,    ,     (  ) <b>wItem</b>    <b>OS_GetMessage</b>    .  <b>ReleaseCoffee()</b>   ,       : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">dim</span></span> bCoffeeSelection as byte bCoffeeSelection = OS_CreateMessage()</code> </pre> <br>    , <b>ShowGoods()</b>            .       <b>ReleaseCoffee()</b> ,   .       : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">dim</span></span> bGoodsReliased as byte bGoodsReliased = OS_CreateEvent()</code> </pre> <br>    <b>ReleaseCoffee()</b>   <b>Release wItem</b>     <b>bGoodsReliased</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_SignalEvent bGoodsReliased</code> </pre> <br><h3 style=";text-align:right;direction:rtl">   </h3><br>  ,     ,    ,      ,     .      <b>OS_Init</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_Init Mailfuncion</code> </pre> <br>       โ ,      : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">sub</span></span> Mailfuncion (bCoffeeErr) print <span class="hljs-string"><span class="hljs-string">"Mailfunction! Error #: "</span></span>; bCoffeeErr <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isErrCritical (bCoffeeErr) = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> CallService(bCoffeeErr) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sub</span></span></code> </pre><br>      (    -  :  ,  GSM-  ..),   ,   ,    . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>   ,  ,   ..     ,   .  ,           <b>OS_InitTask</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_InitTask ControlHeater , <span class="hljs-number"><span class="hljs-number">5</span></span> OS_InitTask ShowGoods , <span class="hljs-number"><span class="hljs-number">8</span></span> OS_InitTask AcceptMoney , <span class="hljs-number"><span class="hljs-number">3</span></span> OS_InitTask ScanKeys , <span class="hljs-number"><span class="hljs-number">3</span></span> OS_InitTask MakeChange, <span class="hljs-number"><span class="hljs-number">10</span></span> OS_InitTask ReleaseCoffee , <span class="hljs-number"><span class="hljs-number">2</span></span> OS_InitTask Alarm , <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>      , ,    , ,         .          .     ,      <b>OS_ResumeTask</b>    ยซ  ยป: <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_ResumeTask ControlHeater OS_ResumeTask ShowGoods OS_ResumeTask AcceptMoney OS_ResumeTask ScanKeys OS_ResumeTask MakeChange OS_ResumeTask ReleaseCoffee OS_ResumeTask Alarm</code> </pre> <br>   ,         ;          ยซยป       .  <b>OS_ResumeTask</b>           (  ),    . ,  ,    ,   . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>     ,   .     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs">OS_Sheduler</code> </pre> <br>          <b>end</b> โ         . <br><br>     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="vbscript hljs"><span class="hljs-comment"><span class="hljs-comment">'    config submode = old $include "..\aquaRTOS_1.05.bas" $include "coffee_hardware.bas" '      '       Coffee_ $regfile = "m328pdef.dat" ' Arduino Nano v3 $crystal = 16000000 $hwstack = 48 $swstack = 48 $framesize = 64 Coffee_InitHardware '    '   declare sub Mailfuncion (byval bCoffeeErr as byte) '   declare sub ControlHeater () '   declare sub ShowGoods () '    declare sub AcceptMoney () '   declare sub ScanKeys () '   declare sub MakeChange () '      declare sub ReleaseCoffee () '   declare sub Alarm () '    '     Coffee_InitHardware () '   dim wMoney as long '    dim wGoods as long '   ' ***    *** '   OS_Init Mailfuncion '       dim bCoffeeSelection as byte bCoffeeSelection = OS_CreateMessage() '     dim bGoodsReliased as byte bGoodsReliased = OS_CreateEvent() '   OS_InitTask ControlHeater , 5 OS_InitTask ShowGoods , 8 OS_InitTask AcceptMoney , 3 OS_InitTask ScanKeys , 3 OS_InitTask MakeChange, 10 OS_InitTask ReleaseCoffee , 2 OS_InitTask Alarm , 1 '     OS_ResumeTask ControlHeater OS_ResumeTask ShowGoods OS_ResumeTask AcceptMoney OS_ResumeTask ScanKeys OS_ResumeTask MakeChange OS_ResumeTask ReleaseCoffee OS_ResumeTask Alarm '   OS_Sheduler end ' ***   *** ' ----------------------------------- sub ControlHeater() do select case GetWaterTemp() case is &gt; 97 Coffee_HeaterOff '   case is &lt; 95 Coffee_HeaterOn '   case is &lt; 5 CallServce (WARNING_WATER_FROZEN) '   end select OS_Delay 60000 '  1  loop end sub ' ----------------------------------- sub ShowGoods() do LEDS = Coffee_GetDrinkSupplies() '    D, '         '   LEDS OS_WaitEvent bGoodsReliased '   " " loop end sub ' ----------------------------------- sub AcceptMoney() do wMoney = wMoney + ReadMoneyAcceptor() OS_Delay 20 loop end sub ' ----------------------------------- sub ScanKeys() do wGoods = ButtonPressed() if wMoney &gt;= GostOf(wGoods) then OS_SendMessage bCoffeeSelection, wGoods '     bCoffeeSelection,  '     end if OS_Delay 40 loop end sub ' ----------------------------------- sub MakeChange() do OS_WaitEvent bGoodsReliased '   " " Refund wMoney loop end sub ' ----------------------------------- sub ReleaseCoffee() do OS_WaitMessage bCoffeeSelection '  bCoffeeSelection wItem = OS_GetMessage(bCoffeeSelection) '   Release wItem '    wMoney = wMoney โ CostOf (wItem) '     OS_SignalEvent bGoodsReliased '     '  ,       : ' MakeChange  ShowGoods '  ,  ,     loop end sub ' ----------------------------------- sub Alarm() do OS_Delay 1000 if Hijack() = 1 then CallPolice() end if loop end sub ' ----------------------------------- ' ***    *** sub Mailfuncion (bCoffeeErr) print "Mailfunction! Error #: "; bCoffeeErr if isErrCritical (bCoffeeErr) = 1 then CallService() end if end sub</span></span></code> </pre> <br> ,             ,    .              <b>OS_SendMessage()</b>  ,        /.     .  ,   ,  ,  ,     . <br><br><h2 style=";text-align:right;direction:rtl">   AQUA RTOS </h2><br> <a href=""><b>   1.05     </b></a> <br><br><h2 style=";text-align:right;direction:rtl">  </h2><br> <i>Q:  AQUA?</i> <br> A: ,    ,   ยซ ยป,   ,   .   ,   ,     ,  ,  ยซ ยป   WiFi-.   ,  ,  ,     EEPROM  ,  , - .            .      โ       ยซ ยป,    ,  .    ,    .    AQUA. <br><br> <i>Q:        ?</i> <br> A: . ,  ,          ,      ,    ,    .   ,        .    ,   ,      ,       ,    ,  , -,  .   ,         . , -     ( ? โ   )    .         . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar453708/">https://habr.com/ru/post/ar453708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar453694/index.html">ุงุชุตู ุจู Windows ุนุจุฑ SSH ููุง ูู ูุธุงู Linux</a></li>
<li><a href="../ar453696/index.html">ุงูุฒุงูู ูู ุงุชุฌุงููู ููุฒูุฉ ุ ููู ุฃูุซุฑ ููููุง</a></li>
<li><a href="../ar453698/index.html">ุงููุนูููุงุช ุงููููููุฉ ูู ุงููุนู ุงูููููู</a></li>
<li><a href="../ar453700/index.html">ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ ูู SDL 2: ุงูุฏุฑุณ 1 - ูุฑุญุจูุง ุ SDL 2</a></li>
<li><a href="../ar453706/index.html">ููู ูุฌุญุช ูู ุงูุชุญุงู ุดูุงุฏุฉ ูููุฏุณ ุจูุงูุงุช Google Cloud Professional</a></li>
<li><a href="../ar453710/index.html">ููุงุฑุณุฉ ุงูุชุทููุฑ ูู ุงููุดุฑูุนุงุช ุงููุจูุฑุฉ: mitp SberPractice iOS # 1</a></li>
<li><a href="../ar453714/index.html">ุนููู ุงุฎุชุจุงุฑ TON (ุดุจูุฉ Telegram Open Network) ููุบุฉ Fift ุงูุฌุฏูุฏุฉ ููุนููุฏ ุงูุฐููุฉ</a></li>
<li><a href="../ar453716/index.html">ุงูุนูู ุงููุดุชุฑู ูุฃูุฑุงุฏ ุนุงุฆูุฉ ุชูููููุฌูุง ุงููุนูููุงุช - ูู ููุงู ุฃุญุฏุ</a></li>
<li><a href="../ar453720/index.html">ุงูุฏูููุฉ ูู ุงูุชุนุจูุฑุงุช Lambda ูู C #</a></li>
<li><a href="../ar453722/index.html">ุญูู ุจุญุซ ุงูุนูููุงุช ุบูุฑ ุงูุซุงุจุชุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>