<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧜🏿 👩🏼‍🔧 🕞 Blocage de contenu, extension pour les navigateurs au chrome 🚵🏾 👵 🍦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La principale tendance du «blocage» de cette année, l'extension décrite ci-dessous, vous permet de ressentir le pouvoir sur le contenu dans le navigat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blocage de contenu, extension pour les navigateurs au chrome</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425361/">  La principale tendance du «blocage» de cette année, l'extension décrite ci-dessous, vous permet de ressentir le pouvoir sur le contenu dans le navigateur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5z/xa/qt/5zxaqtw2ht7fmiwgbaqfjeuiswq.png"></div><br>  Je me souviens depuis longtemps, dans l'enfance, lorsque je regardais la télévision, pendant les blocs d'annonces, il y avait toujours une pause comme une pause scolaire, aller à la cuisine ou à une latrine, passer à d'autres canaux, une pause fumée s'ajoutait avec l'âge. <br><br>  Maintenant, je regarde rarement la télévision, je lis les actualités sur Internet, j'utilise des bloqueurs de publicités.  Au téléphone quand ils appellent et essaient d'imposer des services financiers ou un assistant de fenêtre, je raccroche.  Parfois, à de rares exceptions près, il y a des publicités intéressantes ou amusantes, mais même de telles vidéos après la deuxième visualisation se transforment en publicité régulière. <br><br>  Il y a quelques années, j'ai remarqué que sur tous les sites d'actualités, on peut dire qu'il ne s'est pas passé une journée sans nouvelles des blogueurs: tels ou tels blogueurs ont un conflit ou des blogueurs à la Douma d'État.  Un blogueur est un «nouveau nom» et, comme d'habitude, le «plus, le plus» des blogueurs de tous les autres blogueurs.  En même temps, il est rare qu’ils écrivent des critères expliquant pourquoi il est «le plus, le plus» afin que le lecteur puisse regarder des vidéos ou rechercher sur Internet, ce qui est dans le prochain blogueur de «lui-même, lui-même».  Les blogueurs introduisent le nouveau mot "zashkvar", les blogueurs ont pris les armes contre cela, les blogueurs font leur propre show. <br><br>  L'année dernière, les blogueurs de nouvelles sont devenus moins nombreux, le leader est maintenant "B ... va", je ne mentionne pas spécifiquement, il y a un risque de transformer l'article en nouvelles suivantes sur "B ... va", et donc chaque jour il y a de nouvelles nouvelles.  Les journalistes sont souvent obligés de suivre le lien avec un jeu de mots dans le titre. <br><a name="habracut"></a><br>  J'écrirais quelques autres exemples, mais je ne le ferai pas, car celui décrit ci-dessus n'est pas une tentative d'être bon moi-même à l'aide de la critique des autres.  Avec n'importe quoi, il peut y avoir éclatement ou surdosage.  Je suis plus que sûr que tout le monde a ses propres «dirigeants» dans les nouvelles, qu'ils préféreraient ne pas voir, sans eux leur journée serait devenue meilleure. <br><br>  Les exemples ci-dessus sont essentiellement une sorte de publicité, mais lorsqu'ils sont diffusés sous forme de nouvelles, ils ne relèvent d'aucun bloqueur de publicité.  De nombreux navigateurs ont un blocage d'annonces intégré, mais malheureusement, il n'y a aucun moyen de bloquer le contenu par des mots dans le contenu.  J'ai essayé de chercher dans les extensions, mais je ne l'ai pas trouvé avec la description nécessaire, les bloqueurs de publicités ont attiré mon attention, ils semblaient pouvoir bloquer en fonction des mots, mais je n'ai pas essayé de parier.  J'ai vu récemment plusieurs articles que toutes les extensions ne sont pas sûres, et il est plus intéressant d'écrire le vôtre, simple, uniquement avec la fonction nécessaire de couper le contenu. <br><br>  Il existe de nombreux articles sur la création d'extensions, mais cet article n'est pas une instruction pour la création. <br>  La première version de l'extension s'est révélée en quelques heures seulement, l'algorithme de découpe est simple et universel.  L'inconvénient de l'universalité est que l'algorithme peut ne pas convenir à tous les sites.  Mais pour que l'extension fonctionne, j'ai dû écrire beaucoup de code pour afficher les compteurs, le contenu caché de chaque page. <br><br>  La partie content_script.js est la logique principale pour bloquer le contenu: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> search = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.evaluate(<span class="hljs-string"><span class="hljs-string">'/html/body//*[contains(., "...") and count(child::node())&lt;childsLimit]'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, XPathResult.ORDERED_NODE_ITERATOR_TYPE, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> thisHeading = search.iterateNext(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (thisHeading) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (thisHeading.tagName !== <span class="hljs-string"><span class="hljs-string">'script'</span></span> &amp;&amp; thisHeading.style.display != <span class="hljs-string"><span class="hljs-string">'none'</span></span>) { thisHeading.style.display = <span class="hljs-string"><span class="hljs-string">'none'</span></span>; } thisHeading = search.iterateNext(); }</code> </pre> <br>  L'extrait ci-dessus montre que la méthode «document.evaluate» est utilisée.  Lors de la recherche de texte dans les balises, les éléments racine entrent également dans les résultats.  Par exemple, le texte de la page entière, le texte du bloc d'actualités, etc.  Pour éliminer les éléments inutiles, la deuxième condition sur le nombre d'enfants imbriqués est utilisée.  Dans mon cas, le chiffre 9 est apparu. Sur trois sites, le superflu se cache rapidement et simplement, même si parfois sur l'un des sites d'un certain bloc, il y a une photo, mais sans lien vers l'actualité et sans lien avec l'image. <br><br>  C'était à l'origine un désir de créer également une page de paramètres d'extension, je le ferai peut-être plus tard.  En attendant, les réglages de base sont effectués directement dans le code. <br><br>  Une partie de background.js est les paramètres de blocage de contenu: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> childsLimit = <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blockString = <span class="hljs-string"><span class="hljs-string">'[contains(., "...") and count(child::node())&lt;childsLimit]'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blockOnlyUrlOpt = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> urlOptions = [{<span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">'https://exampleSite.com'</span></span>, <span class="hljs-attr"><span class="hljs-attr">unBlock</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">childsLimit</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>}];</code> </pre><br>  La première variable «childsLimit» vous permet de définir le niveau global d'imbrication des éléments verrouillés. <br><br>  La deuxième variable "blockString" contient la condition xpath, lorsque vous ajoutez un nouveau mot, vous devez tout copier avec des crochets et ajouter à la fin avec le mot "ou", puis remplacer le mot de recherche entre guillemets. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blockString = <span class="hljs-string"><span class="hljs-string">'[contains(., "1") and count(.//*)&lt;childsLimit] or [contains(., "2") and count(.//*)&lt;childsLimit]'</span></span>;</code> </pre><br>  La troisième variable «urlOptions» vous permet d'affiner les paramètres pour différents sites. <br>  Propriété «url» - contient l'adresse à laquelle le paramètre sera appliqué. <br>  La propriété "unBlock" - la valeur booléenne true permet de ne pas bloquer le contenu du site spécifié dans "l'url" <br>  La propriété «childsLimit» est le niveau d'imbrication de l'élément de contenu bloqué. <br>  La quatrième variable "blockOnlyUrlOpt" vous permet de définir une logique commune.  Si la valeur est true, le blocage ne fonctionne que sur les sites répertoriés dans le tableau de variables urlOptions, où la propriété unBlock est false. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les fichiers d'extension sont disponibles ici.</a> <br><br>  Pour installer, vous devez: <br><br><ul><li>  Téléchargez tous les fichiers dans un dossier qui vous convient. </li><li>  Dans le navigateur, accédez aux extensions et activez le mode développeur. </li><li>  Sur le bouton "Télécharger l'extension décompressée ...", spécifiez le dossier à partir du point un. </li></ul><br>  Développé et testé dans le navigateur Opera, d'autres navigateurs au chrome devraient également fonctionner. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425361/">https://habr.com/ru/post/fr425361/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425351/index.html">Les programmeurs de bricolage perdent leur emploi</a></li>
<li><a href="../fr425353/index.html">Toute la vérité sur RTOS. Article # 13. Structures de données de tâche et appels d'API non pris en charge</a></li>
<li><a href="../fr425355/index.html">Cote de sécurité du projet ICO</a></li>
<li><a href="../fr425357/index.html">Comment nous avons constitué une pile technologique de 12 étages et ne sommes pas devenus fous</a></li>
<li><a href="../fr425359/index.html">Les Chinois ont utilisé une puce pour contrôler les ordinateurs américains</a></li>
<li><a href="../fr425363/index.html">Conseils pour les étudiants programmeurs</a></li>
<li><a href="../fr425367/index.html">Le jeu Arduino le plus simple avec un écran 1602 - Partie # 2</a></li>
<li><a href="../fr425369/index.html">KTRU (Catalogue des biens, travaux, services) ou la mort des marchés publics informatiques</a></li>
<li><a href="../fr425371/index.html">Node.JS: bibliothèque pour modifier les réponses http</a></li>
<li><a href="../fr425373/index.html">QA Fest 2018: bilan de la principale conférence QA de l'Ukraine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>