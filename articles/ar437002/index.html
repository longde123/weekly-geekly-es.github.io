<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ โ๏ธ ๐ ุตุงูุญ ASP.NET ุงูุฃุณุงุณูุฉ ๐๐พ ๐ด๓ง๓ข๓ท๓ฌ๓ณ๓ฟ ๐จ๐พโ๐คโ๐จ๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฎุงุตุฉ ููุญุจู ุงููุชุจ ูู ุณูุณูุฉ "C ++ ูู ุบุถูู 24 ุณุงุนุฉ" ุ ูุฑุฑุช ุฃู ุฃูุชุจ ููุงููุง ุญูู ASP.NET Core. 


 ุฅุฐุง ูู ุชูู ูุฏ ุทูุฑุช ูุณุจููุง ูู ุฃุฌู .NET ุฃู ูุจุนุถ ุงูุฃูุธูุฉ ุงูุฃ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุตุงูุญ ASP.NET ุงูุฃุณุงุณูุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437002/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/sy/y_/ph/syy_ph0f1cwt9upm9frbr6z5ggi.jpeg" alt="ุตุงูุญ ASP.NET ุงูุฃุณุงุณูุฉ"></a> </p><br><p style=";text-align:right;direction:rtl">  ุฎุงุตุฉ ููุญุจู ุงููุชุจ ูู ุณูุณูุฉ "C ++ ูู ุบุถูู 24 ุณุงุนุฉ" ุ ูุฑุฑุช ุฃู ุฃูุชุจ ููุงููุง ุญูู ASP.NET Core. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ุชูู ูุฏ ุทูุฑุช ูุณุจููุง ูู ุฃุฌู .NET ุฃู ูุจุนุถ ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุงููุดุงุจูุฉ ุ ููุง ูุนูู ูุฐูู ุฃู ุชุฎูุถ ูู ููุงู.  ูููู ุฅุฐุง ููุช ููุชููุง ุจูุนุฑูุฉ ูุง ูู IoC ู DI ู DIP ู Interseptors ู Middleware ู Filters (ุฃู ูู ุดูุก ูุฎุชูู ุนู Core ูู .NET ุงูููุงุณูููุฉ) ุ ูุฃูุช ุจุญุงุฌุฉ ุจุงูุชุฃููุฏ ุฅูู ุงูููุฑ ููู "ูุฑุงุกุฉ ุงููุฒูุฏ" ุ ุฃุซูุงุก ุชุทููุฑ ูู ุฏูู ููู ูู ูุฐุง ุ ูู ุงููุงุถุญ ุฃูู ุบูุฑ ุตุญูุญ. </p><a name="habracut"></a><br><h2 id="ioc-di-dip" style=";text-align:right;direction:rtl">  IOC ุ DI ุ DIP </h2><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุจุฏุฃ ุงููุณุฑุญ ูุน ุดูุงุนุงุช ุ ุซู ูุจุฏุฃ ASP.NET Core ูุน Dependency Injection.  ูู ุฃุฌู ุงูุชุนุงูู ูุน DI ุ ุชุญุชุงุฌ ุฅูู ููู ูุง ูู IoC. </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุงูุญุฏูุซ ุนู IoC ุ ุบุงูุจูุง ูุง ูุชุฐูุฑ ุงููุฑุก ูุจุฏุฃ ููููููุฏ ููู "ูุง ุชุชุตู ุจูุง ุ ูุณูุชุตู ุจู".  ููุง ูุนูู "ูุง ุญุงุฌุฉ ููุงุชุตุงู ุจูุง ุ ูุณูู ูุชุตู ุจู ุฃููุณูุง". </p><br><p style=";text-align:right;direction:rtl"> ุชููุฑ ุงููุตุงุฏุฑ ุงููุฎุชููุฉ ุฃููุงุทูุง ูุฎุชููุฉ ูููู ุชุทุจูู IoC ุนูููุง.  ูุนูู ุงูุฃุฑุฌุญ ุฃููู ุฌููุนุง ุนูู ุญู ููููููู ุจุนุถูู ุงูุจุนุถ.  ูููุง ููู ุจุนุถ ูุฐู ุงูุฃููุงุท: ุงููุตูุน ุ ูุญุฏุฏ ูููุน ุงูุฎุฏูุฉ ุ ุทุฑููุฉ ุงููุงูุจ ุ ุงููุฑุงูุจ ุ ุงูุฅุณุชุฑุงุชูุฌูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุธุฑ ุฅูู IoC ุจุงุณุชุฎุฏุงู ุชุทุจูู ูุญุฏุฉ ุชุญูู ุจุณูุท ููุซุงู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุฑุถ ุฃู ูุฏููุง ูุฆุชูู ุจุณูุทุชูู ุชูููุงู ุจุชุทุจูู ูุงุฌูุฉ ูุน ุทุฑููุฉ ูุงุญุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">class ConsoleLayer : ILayer { public void Write(string text) { Console.WriteLine(text); } } class DebugLayer : ILayer { public void Write(string text) { Debug.WriteLine(text); } } interface ILayer { void Write(string text); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงููุง ูุนุชูุฏ ุนูู ุงูุชุฌุฑูุฏ (ูู ูุฐู ุงูุญุงูุฉ ุ ุชุนูู ุงููุงุฌูุฉ ูุนูููุฉ ุชุฌุฑูุฏูุฉ). </p><br><p style=";text-align:right;direction:rtl">  ูุฏุนูุง ูููู ุฃู ูุฏููุง ูุงุฆู ูุณุชูู ุฃุนูู ุจุงุณุชุฎุฏุงู ูุฐู ุงููุฆุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> class Logging : ILayer { private ILayer _instance; public Logging(int i) { if (i == 1) { _instance = new ConsoleLayer(); } else { _instance = new DebugLayer(); } } public void Write(string text) { _instance.Write(text); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููุง ููุนููุฉ ุงูููุดุฆ ุ ุชุชู ุชููุฆุฉ ูุชุบูุฑ _instance ุจูุงุณุทุฉ ูุฆุฉ ูุนููุฉ.  ุญุณููุง ุ ุนูุงูุฉ ุนูู ุฐูู ุ ุนูุฏ ุงูุงุชุตุงู ุจุงููุชุงุจุฉ ุ ุณูุชู ุฅููุงู ุงูุฅุฎุฑุงุฌ ุฅูู ูุญุฏุฉ ุงูุชุญูู ุฃู Debug.  ูุจุฏู ุฃู ูู ุดูุก ุฌูุฏ ุฌุฏูุง ูุญุชู ุ ููุง ูุจุฏู ุ ูุชูุงูู ูุน ุงูุฌุฒุก ุงูุฃูู ูู ูุจุฏุฃ ุงูุนูุงุณ ุงูุชุจุนูุฉ </p><br><blockquote style=";text-align:right;direction:rtl">  ุงููุงุฆูุงุช ุฐุงุช ุงููุณุชูู ุงูุฃุนูู ูุณุชููุฉ ุนู ุงููุงุฆูุงุช ุฐุงุช ุงููุณุชูู ุงูุฃุฏูู.  ูู ูู ูุคูุงุก ูุชูู ุชุนุชูุฏ ุนูู ุงูุชุฌุฑูุฏ. </blockquote><p style=";text-align:right;direction:rtl">  ูู ุญุงูุชูุง ุ ูุนูู ILayer ุจูุซุงุจุฉ ุชุฌุฑูุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ูุฌุจ ุฃู ูููู ูุฏููุง ุฃูุถูุง ูุงุฆู ุจูุณุชูู ุฃุนูู.  ูุงุญุฏ ูุณุชุฎุฏู ูุฆุฉ ุงูุชุณุฌูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> static void Main(string[] args) { var log = new Logging(1); log.Write("Hello!"); Console.Read(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุฎูุงู ุชููุฆุฉ ุงูุชุณุฌูู ุจู 1 ุ ูุฏุฎู ูู ูุฆุฉ ุงูุชุณุฌูู ูุซูููุง ูููุฆุฉ ุงูุชู ุชูุฎุฑุฌ ุงูุจูุงูุงุช ุฅูู ูุญุฏุฉ ุงูุชุญูู.  ุฅุฐุง ุชู ุชููุฆุฉ ุงูุชุณุฌูู ุจุงุณุชุฎุฏุงู ุฃู ุฑูู ุขุฎุฑ ุ ูุณูู ูููู log.Write ุจุฅุฎุฑุงุฌ ุงูุจูุงูุงุช ุฅูู ุชุตุญูุญ ุงูุฃุฎุทุงุก.  ูู ุดูุก ุ ุนูู ูุง ูุจุฏู ุ ูุนูู ุ ูููู ูุนูู ุจุดูู ุณูุก.  ูุนุชูุฏ ูุงุฆููุง ุฐู ุงููุณุชูู ุงูุฃุนูู ุนูู ุชูุงุตูู ุฑูุฒ ุงููุงุฆู ุฐู ุงููุณุชูู ุงูุฃุฏูู - ูุฆุฉ ุงูุชุณุฌูู.  ุฅุฐุง ูููุง ุจุชุบููุฑ ุดูุก ูุง ูู ูุฐู ุงููุฆุฉ ุ ูุณูุญุชุงุฌ ุฅูู ุชุบููุฑ ุฑูุฒ ุงููุฆุฉ ุงูุฑุฆูุณูุฉ.  ูููุน ุญุฏูุซ ุฐูู ุ ุณูููู ุจุงูุนูุงุณ ุงูุชุญูู - ุงูุนูุงุณ ุงูุชุญูู.  ููุฌุนู ุงููุฆุฉ ุงูุฑุฆูุณูุฉ ุชุชุญูู ูู ูุง ูุญุฏุซ ูู ูุฆุฉ ุงูุชุณุฌูู.  ุณุชุชููู ูุฆุฉ ุงูุชุณุฌูู ุ ููุนููุฉ ูููุดุฆ ุ ูุซูู ููุฆุฉ ุชููุฐ ูุงุฌูุฉ ILayer </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> class Logging { private ILayer _instance; public Logging(ILayer instance) { _instance = instance; } public void Write(string text) { _instance.Write(text); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุขู ุ ุณูุจุฏู ุตููุง ุงูุฑุฆูุณู ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> static void Main(string[] args) { var log = new Logging(new DebugLayer()); log.Write("Hello!"); Console.Read(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ูุญู ุชุฒููู ูุงุฆู ุชุณุฌูู ูุฏููุง ูุน ุงููุงุฆู ุงูุถุฑูุฑู ุจุงููุณุจุฉ ููุง. </p><br><p style=";text-align:right;direction:rtl">  ูุชูุงูู ุงูุขู ุทูุจูุง ูุน ุงูุฌุฒุก ุงูุซุงูู ูู ูุจุฏุฃ ุงูุนูุงุณ ุงูุชุจุนูุฉ: </p><br><blockquote style=";text-align:right;direction:rtl">  ุงูุชุฌุฑูุฏุงุช ูุณุชููุฉ ุนู ุงูุชูุงุตูู.  ุงูุชูุงุตูู ุชุนุชูุฏ ุนูู ุงูุชุฌุฑูุฏ.  ุฃู  ูุง ูุนุฑู ุชูุงุตูู ูุง ูุญุฏุซ ูู ูุฆุฉ ุงูุชุณุฌูู ุ ููุญู ููุฑุฑ ุงููุตู ุงูุฐู ูููุฐ ุงูุชุฌุฑูุฏ ุงูุถุฑูุฑู. </blockquote><p style=";text-align:right;direction:rtl">  ููุงู ูุซู ูุฐุง ุงููุตุทูุญ ุงูุชุฑุงู ุถูู - ุงุชุตุงู ุถูู.  ูููุง ูุงู ุงูุงุชุตุงู ุจูู ุงูููููุงุช ูู ุงูุชุทุจูู ุฃุถุนู ุ ูุงู ุฐูู ุฃูุถู.  ุฃูุฏ ุฃู ุฃุดูุฑ ุฅูู ุฃู ูุฐุง ุงููุซุงู ููุชุทุจูู ุงูุจุณูุท ูุง ูุตู ุฅูู ุงููุณุชูู ุงููุซุงูู ููููุงู.  ููุงุฐุงุ  ูุนู ุ ูุฃูู ูู ุฃุนูู ูุณุชูู ูู Main ุ ูุณุชุฎุฏู ูุฑุชูู ุฅูุดุงุก ูุซููุงุช ูุฆุฉ ุจุงุณุชุฎุฏุงู new.  ูููุงู ุนุจุงุฑุฉ ุฐุงูุฑู "New is a clue" - ููุง ูุนูู ุฃูู ูููุง ูู ุงุณุชุฎุฏุงูู ุงูุฌุฏูุฏ ุ ููุช ุงุชุตุงูุงุช ุงูููููุงุช ูู ุงูุชุทุจูู ุจุดูู ุฃูุถู.  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุฌุจ ุฃูุง ูุณุชุฎุฏู DebugLayer ุงูุฌุฏูุฏ ุ ูููู ูุฌุจ ุฃู ูุญุตู ุนูู DebugLayer ุจุทุฑููุฉ ุฃุฎุฑู.  ุฃู ูุงุญุฏุ  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุญุงููุฉ IoC ุฃู ุจุงุณุชุฎุฏุงู ุงูุนูุงุณ ูู ูุนููุฉ ุชู ุชูุฑูุฑูุง ุฅูู Main. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุงูุชุดููุง ุงูุขู ูุง ูู ุงูุนูุงุณ ุงูุชุญูู (IoC) ููุง ูู ุงูุนูุงุณ ุงูุชุจุนูุฉ (DIP).  ูุจูู ุฃู ูููู ูุง ูู Dependency Injection (DI).  IoC ูู ูููุฐุฌ ุงูุชุตููู.  Dependency Injection ูู ุงูููุท.  ูุฐุง ูุง ูุฏููุง ุงูุขู ูู ูููุดุฆ ูุฆุฉ ุงูุชุณุฌูู.  ูุญุตู ุนูู ูุซูู ุชุจุนูุฉ ูุญุฏุฏุฉ.  ุชุนุชูุฏ ูุฆุฉ ุงูุชุณุฌูู ุนูู ูุซูู ููุฆุฉ ุชููู ุจุชูููุฐ ILayer.  ููุชู ุญูู ูุฐู ุงูุญุงูุฉ ูู ุฎูุงู ุงูููุดุฆ. </p><br><h2 id="ioc-container" style=";text-align:right;direction:rtl">  ุญุงููุฉ IoC </h2><br><p style=";text-align:right;direction:rtl">  ุญุงููุฉ IoC ูู ูุงุฆู ูุญุชูู ุนูู ุงูุนุฏูุฏ ูู ุงูุชุจุนูุงุช ุงููุญุฏุฏุฉ (ุงูุชุจุนูุฉ).  ูููู ุฃู ููุทูู ุนูู ุงูุชุจุนูุฉ ุฎุฏูุฉ - ููุงุนุฏุฉ ุนุงูุฉ ุ ุฅููุง ูุฆุฉ ุฐุงุช ูุธููุฉ ูุนููุฉ.  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูููู ุงูุญุตูู ุนูู ุงุนุชูุงุฏ ุงูููุน ุงููุทููุจ ูู ุงูุญุงููุฉ.  ุญูู ุงูุชุจุนูุฉ ูู ุญุงููุฉ ูู ุญูู.  ุงุณุชุฎุฑุงุฌ - ุญู.  ูููุง ููู ูุซุงู ุนูู ุฃุจุณุท ุญุงููุฉ IoC ููุชูุจุฉ ุฐุงุชููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public static class IoCContainer { private static readonly Dictionary&lt;Type, Type&gt; _registeredObjects = new Dictionary&lt;Type, Type&gt;(); public static dynamic Resolve&lt;TKey&gt;() { return Activator.CreateInstance(_registeredObjects[typeof(TKey)]); } public static void Register&lt;TKey, TConcrete&gt;() where TConcrete : TKey { _registeredObjects[typeof(TKey)] = typeof(TConcrete); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุท ุนุดุฑุฉ ุฃุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ููู ููููู ุงุณุชุฎุฏุงููุง ุจุงููุนู (ููุณ ููุฅูุชุงุฌ ุ ุจุงูุทุจุน ุ ูููู ููุฃุบุฑุงุถ ุงูุชุนููููุฉ). </p><br><p style=";text-align:right;direction:rtl">  ููููู ุชุณุฌูู ุงูุชุจุนูุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ConsoleLayer ุฃู DebugLayer ุงูุชู ุงุณุชุฎุฏููุงูุง ูู ุงููุซุงู ุงูุณุงุจู) ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> IoCContainer.Register&lt;ILayer, ConsoleLayer&gt;();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุณุชุฎุฑุฌูุง ูู ุงูุญุงููุฉ ูู ุงูููุงู ุงูููุงุณุจ ููุจุฑูุงูุฌ ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ILayer layer = IoCContainer.Resolve&lt;ILayer&gt;(); layer.Write("Hello from IoC!");</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูุญุงููุงุช ุงูุญููููุฉ ุ ูุชู ุฃูุถูุง ุชุทุจูู Dispos () ุ ููุง ูุณูุญ ูู ุจุชุฏููุฑ ุงูููุงุฑุฏ ุงูุชู ุฃุตุจุญุช ุบูุฑ ุถุฑูุฑูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูููุงุณุจุฉ ุ ุงุณู ุญุงููุฉ IoC ูุง ูููู ุงููุนูู ุจุงูุถุจุท ุ ูุฃู ูุตุทูุญ IoC ุฃูุณุน ุจูุซูุฑ ูู ุงูุชุทุจูู.  ูุฐูู ุ ุชู ุงุณุชุฎุฏุงู ูุตุทูุญ ุญุงููุฉ DI ูุคุฎุฑูุง ูู ูุซูุฑ ูู ุงูุฃุญูุงู (ุจูุง ุฃู ุญูู ุงูุชุจุนูุฉ ูุง ูุฒุงู ูุทุจููุง). </p><br><h2 id="service-lifetimes--various-extension-methods-in-composition-root" style=";text-align:right;direction:rtl">  ุนูุฑ ุงูุฎุฏูุฉ + ุทุฑู ุชูุฏูุฏ ูุฎุชููุฉ ูู Root Composition </h2><br><p style=";text-align:right;direction:rtl">  ุชุญุชูู ุชุทุจููุงุช ASP.NET Core ุนูู ููู Startup.cs ุ ููู ููุทุฉ ุงูุงูุทูุงู ููุชุทุจูู ูุชูููู DI.  ูููู ุจุชูููู DI ูู ุฃุณููุจ ConfigureServices. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public void ConfigureServices(IServiceCollection services) { services.AddScoped&lt;ISomeRepository, SomeRepository&gt;(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุถูู ูุฐุง ุงูุฑูุฒ ูุฆุฉ SomeRepository ุฅูู ุญุงููุฉ DI ุ ูุงูุชู ุชููุฐ ูุงุฌูุฉ ISomeRepository.  ุญูููุฉ ุฅุถุงูุฉ ุงูุฎุฏูุฉ ุฅูู ุงูุญุงููุฉ ุจุงุณุชุฎุฏุงู AddScoped ุชุนูู ุฃูู ุณูุชู ุฅูุดุงุก ูุซูู ูููุฆุฉ ูู ูู ูุฑุฉ ูุชู ูููุง ุทูุจ ุตูุญุฉ. <br>  ููููู ุฅุถุงูุฉ ุฎุฏูุฉ ุฅูู ุญุงููุฉ ุฏูู ุชุญุฏูุฏ ูุงุฌูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddScoped&lt;SomeRepository&gt;();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุฐู ุงูุทุฑููุฉ ุบูุฑ ููุตู ุจูุง ุ ุญูุซ ูููุฏ ุงูุชุทุจูู ูุฑููุชู ูุชุธูุฑ ุงูุงุชุตุงูุงุช ุงููุซููุฉ.  ููุตู ุฏุงุฆููุง ุจุชุญุฏูุฏ ูุงุฌูุฉ ุ ูุฃูู ูู ูุฐู ุงูุญุงูุฉ ุ ูู ุฃู ููุช ุ ููููู ุงุณุชุจุฏุงู ุชุทุจูู ูุงุฌูุฉ ุฃุฎุฑู.  ูุฅุฐุง ูุงูุช ุงูุชุทุจููุงุช ุชุฏุนู ูุจุฏุฃ ุงุณุชุจุฏุงู Liskov ุ ูุนู ุทุฑูู ุชุบููุฑ ุงุณู ูุฆุฉ ุงูุชูููุฐ ุจู "ููุฑุฉ ูู ุงููุนุตู" ุ ุณุชููู ุจุชุบููุฑ ูุธููุฉ ุงูุชุทุจูู ุจุฃูููู. </p><br><p style=";text-align:right;direction:rtl">  ููุงู ุฎูุงุฑุงู ุฅุถุงููุงู ูุฅุถุงูุฉ ุฎุฏูุฉ - AddSingleton ู AddTransient. <br>  ุนูุฏ ุงุณุชุฎุฏุงู AddSingleton ุ ูุชู ุฅูุดุงุก ุงูุฎุฏูุฉ ูุฑุฉ ูุงุญุฏุฉ ุ ูุนูุฏ ุงุณุชุฎุฏุงู ุงูุชุทุจูู ุ ุชูุชูู ุงูููุงููุฉ ุฅูู ููุณ ุงููุซูู.  ุงุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ุจุนูุงูุฉ ุฎุงุตุฉ ุ ุญูุซ ูููู ุญุฏูุซ ุชุณุฑุจ ููุฐุงูุฑุฉ ููุดุงูู ุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท. </p><br><p style=";text-align:right;direction:rtl">  AddSingleton ูุฏูู ููุฒุฉ ุตุบูุฑุฉ.  ูููู ุชููุฆุชู ุฅูุง ุนูุฏ ุฃูู ูุตูู ุฅููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddSingleton&lt;IYourService, YourService&gt;();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅูุง ุนูู ุงูููุฑ ุนูุฏ ุฅุถุงูุชูุง ุฅูู ุงูููุดุฆ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddSingleton&lt;IYourService&gt;(new YourService(param));</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูุทุฑููุฉ ุงูุซุงููุฉ ุ ููููู ุญุชู ุฅุถุงูุฉ ูุนููุฉ ุฅูู ุงูููุดุฆ. <br>  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฅุถุงูุฉ ูุนููุฉ ุฅูู ูููุดุฆ ุงูุฎุฏูุฉ ุงููุถุงูุฉ ููุณ ููุท ุจุงุณุชุฎุฏุงู AddSingleton ุ ูููู ุฃูุถูุง ุจุงุณุชุฎุฏุงู AddTransient / AddScoped ุ ููููู ุงุณุชุฎุฏุงู ุชุนุจูุฑ lambda: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddTransient&lt;IYourService&gt;(o =&gt; new YourService(param));</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฃุฎูุฑูุง ุ ุนูุฏ ุงุณุชุฎุฏุงู AddTransient ุ ูุชู ุฅูุดุงุก ุฎุฏูุฉ ูู ูู ูุฑุฉ ุชุฏุฎู ูููุง.  ูุจูุฑุฉ ููุฎุฏูุงุช ุฎูููุฉ ุงููุฒู ุงูุชู ูุง ุชุณุชููู ุงูุฐุงูุฑุฉ ูุงูููุงุฑุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ูุน ูู ูู AddSingleton ู AddScoped ูุฌุจ ุฃู ูููู ูู ุดูุก ุฃูุซุฑ ุฃู ุฃูู ูุถูุญูุง ุ ูุฅู AddTransient ูุญุชุงุฌ ุฅูู ุชูุถูุญ.  ุชูุฏู ุงููุซุงุฆู ุงูุฑุณููุฉ ูุซุงููุง ูุชู ููู ุฅุถุงูุฉ ุฎุฏูุฉ ูุนููุฉ ุฅูู ุญุงููุฉ DI ููุนููุฉ ูููุดุฆ ุฎุฏูุฉ ุฃุฎุฑู ูุจุดูู ูููุตู ุจุดูู ูุณุชูู.  ููู ุญุงูุฉ ุฅุถุงูุชู ุจุดูู ูููุตู ุจุงุณุชุฎุฏุงู AddTransient ุ ูุฅูู ููุดุฆ ูุซููู ูุฑุชูู.  ุณุฃูุฏู ูุซุงููุง ุจุณูุทูุง ููุบุงูุฉ.  ูู ุงูุญูุงุฉ ุงูุญููููุฉ ุ ูุง ููุตุญ ููุงุณุชุฎุฏุงู ุ ูุฃูู  ูุฆุงุช ููุจุณุงุทุฉ ูุง ุชุฑุซ ูุงุฌูุงุช.  ุฏุนูุง ูููู ูุฏููุง ูุฆุฉ ุจุณูุทุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public class Operation { public Guid OperationId { get; private set; } public Operation() { OperationId = Guid.NewGuid(); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุงู ูุฆุฉ ุซุงููุฉ ุชุญุชูู ุนูู ุงูุฎุฏูุฉ ุงูุฃููู ูุฎุฏูุฉ ุชุงุจุนุฉ ูุชุชููู ูุฐู ุงูุชุจุนูุฉ ููุนููุฉ ูููุดุฆ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public class OperationService { public Operation Operation { get; } public OperationService (Operation operation) { Operation = operation; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุญูู ุฎุฏูุชูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddTransient&lt;Operation&gt;(); services.AddScoped&lt;OperationService&gt;();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุจุนุถ ูุญุฏุงุช ุงูุชุญูู ูู ุงูุนูู ุ ุฃุถู ุฅูุตุงู ุชุจุนูุงุชูุง ูุงุนุฑุถ ุงูููู ูู ูุงูุฐุฉ ุงูุชุตุญูุญ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public IActionResult Index([FromServices] Operation operation, [FromServices] OperationService operationService) { Debug.WriteLine(operation.OperationId); Debug.WriteLine(operationService.Operation.OperationId); return View(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ูููุชูู ูุฎุชููุชูู ูู Guid.  ูููู ุฅุฐุง ุงุณุชุจุฏููุง AddTransient ุจู AddScoped ุ ููุชูุฌุฉ ูุฐูู ูุญุตู ุนูู ูููุชูู ูุชุทุงุจูุชูู. </p><br><p style=";text-align:right;direction:rtl">  ุชุญุชูู ุญุงููุฉ IoC ููุชุทุจูู ASP.NET Core ุนูู ุจุนุถ ุงูุฎุฏูุงุช ุจุดูู ุงูุชุฑุงุถู.  ุนูู ุณุจูู ุงููุซุงู ุ IConfiguration ูู ุฎุฏูุฉ ููููู ูู ุฎูุงููุง ุงูุญุตูู ุนูู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู ูู ูููุงุช appsettings.json ู appsettings.Development.json.  IHostingEnvironment ู ILoggerFactory ุงูุชู ููููู ูู ุฎูุงููุง ุงูุญุตูู ุนูู ุงูุชูููู ุงูุญุงูู ููุฆุฉ ุงููุณุงุนุฏ ุงูุชู ุชุชูุญ ุงูุชุณุฌูู. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฑุฏุงุฏ ุงููุฆุงุช ูู ุงูุญุงููุฉ ุจุงุณุชุฎุฏุงู ุงูุจูุงุก ุงููููุฐุฌู ุงูุชุงูู (ุงููุซุงู ุงูุฃูุซุฑ ุดููุนูุง): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> private readonly IConfiguration _configuration; public SomePageController(IConfiguration configuration) { _configuration = configuration; } public async Task&lt;IActionResult&gt; Index() { string connectionString = _configuration["connectionString"]; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุฅูุดุงุก ูุชุบูุฑ ุจูุนุฏูุงุช ูุตูู ุฎุงุตุฉ ูููุฑุงุกุฉ ููุท ูู ูุทุงู ูุญุฏุฉ ุงูุชุญูู.  ูุชู ุงูุญุตูู ุนูู ุงูุชุจุนูุฉ ูู ุงูุญุงููุฉ ูู ูููุดุฆ ุงููุฆุฉ ูุชุนููู ูุชุบูุฑ ุฎุงุต.  ุนูุงูุฉ ุนูู ุฐูู ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงููุชุบูุฑ ูู ุฃู ุฃุณุงููุจ ุฃู ุชุญูู ุงูุนูู. <br>  ูู ุจุนุถ ุงูุฃุญูุงู ูุง ุชุฑุบุจ ูู ุฅูุดุงุก ูุชุบูุฑ ูู ุฃุฌู ุงุณุชุฎุฏุงูู ูู ุฅุฌุฑุงุก ูุงุญุฏ ููุท.  ุซู ููููู ุงุณุชุฎุฏุงู ุงูุณูุฉ [FromServices].  ูุซุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public IActionResult About([FromServices] IDateTime dateTime) { ViewData["Message"] = ยซ  " + dateTime.Now; return View(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุบุฑูุจุงู ุ ูููู ุญุชู ูุง ูุชู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงููุฆุฉ ุงูุซุงุจุชุฉ DateTime.Now () ูู ุงูููุฏ ุ ูุชู ุฐูู ุฃุญูุงููุง ุญุชู ูุชู ุงูุญุตูู ุนูู ูููุฉ ุงูููุช ูู ุงูุฎุฏูุฉ ููุนููุฉ.  ูุจุงูุชุงูู ุ ูุตุจุญ ูู ุงููููู ุชูุฑูุฑ ุฃู ููุช ููุนููุฉ ุ ููุง ูุนูู ุฃูู ูู ุงูุฃุณูู ููุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ุ ูููุงุนุฏุฉ ุนุงูุฉ ุ ูุตุจุญ ูู ุงูุณูู ุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุงูุชุทุจูู. <br>  ูุฐุง ูุง ูุนูู ุฃู ุณุงููุฉ ูู ุงูุดุฑ.  ุทุฑู ุซุงุจุชุฉ ูู ุฃุณุฑุน.  ูุนูู ุงูุฃุฑุฌุญ ูููู ุงุณุชุฎุฏุงู ุณุงููุฉ ูู ููุงู ูุง ูู ุญุงููุฉ IoC ููุณูุง.  ูููู ุฅุฐุง ุญูุธูุง ุทูุจูุง ูู ูู ุดูุก ุซุงุจุช ูุฌุฏูุฏ ุ ูุณูุญุตู ุนูู ุงููุฒูุฏ ูู ุงููุฑููุฉ. </p><br><h2 id="storonnie-di-konteynery" style=";text-align:right;direction:rtl">  ุญุงููุงุช DI ุงูุทุฑู ุงูุซุงูุซ </h2><br><p style=";text-align:right;direction:rtl">  ูุง ูุธุฑูุง ุฅููู ููุง ุชููู ุจู ุญุงููุฉ ASP.NET Core DI ุจุดูู ุงูุชุฑุงุถู ูู ุญูู ุงูููุดุฆ.  ูุง ุชุฒุงู ููุงู ูุฑุตุฉ ูุญูู ุงูุชุจุนูุฉ ูู ุงูุฎุงุตูุฉ ุจุงุณุชุฎุฏุงู ุญูู ุงูุฎุงุตูุฉ ูุง ูุณูู ุ ูููู ูุฐู ุงูููุฒุฉ ุบูุฑ ูุชููุฑุฉ ูู ุงูุญุงููุฉ ุงููุถููุฉ ูู ASP.NET Core.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ูููู ูุฏููุง ูุฆุฉ ุชููู ุจุชุทุจูููุง ูุชุจุนูุฉ ุ ููุฐู ุงููุฆุฉ ููุง ููุน ูู ุงูููููุฉ ุงูุนุงูุฉ.  ุงูุขู ุชุฎูู ุฃููุง ุฃุซูุงุก ุฃู ุจุนุฏ ุญูู ุงูุชุจุนูุฉ ุ ูุญุชุงุฌ ุฅูู ุชุนููู ูููุฉ ุงูุฎุงุตูุฉ.  ุฏุนูุง ูุนูุฏ ุฅูู ูุซุงู ูุดุงุจู ูููุซุงู ุงูุฐู ุฏุฑุณูุงู ูุคุฎุฑูุง. <br>  ุฅุฐุง ูุงู ูุฏููุง ูุซู ูุฐู ุงููุฆุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public class Operation { public Guid OperationId { get; set; } public Operation() {} }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุชู ูููููุง ุฃู ููุฏู ุฅุฏูุงู ุ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddTransient&lt;Operation&gt;();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ุจุงุณุชุฎุฏุงู ุงูุญุงููุฉ ุงูููุงุณูุฉ ุ ูุง ูููููุง ุถุจุท ูููุฉ ุงูุนูุงุฑ. <br>  ุฅุฐุง ููุช ุชุฑูุฏ ุงุณุชุฎุฏุงู ูุฐู ุงููุฑุตุฉ ูุชุนููู ูููุฉ ูุฎุงุตูุฉ OperationId ุ ูููููู ุงุณุชุฎุฏุงู ููุน ูู ุญุงููุฉ DI ูุฌูุฉ ุฎุงุฑุฌูุฉ ุชุฏุนู ุฎุงุตูุฉ ุงูุญูู.  ุจุงูููุงุณุจุฉ ุ ูุง ููุตุญ ุญูู ุงูููุชููุงุช ุจุดูู ุฎุงุต.  ููุน ุฐูู ุ ูุง ูุฒุงู ููุงู ุฃุณููุจ ุญูู ูุญูู ุทุฑููุฉ Setter ุ ูุงูุชู ูุฏ ุชููู ูู ูุชูุงูู ูุฏูู ูุงูุชู ูุง ุชุฏุนููุง ุงูุญุงููุฉ ุงูููุงุณูุฉ ุฃูุถูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ุชุญุชูู ุญุงููุงุช ุงูุฌูุงุช ุงูุฎุงุฑุฌูุฉ ุนูู ููุฒุงุช ุฃุฎุฑู ูููุฏุฉ ููุบุงูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุจุงุณุชุฎุฏุงู ุญุงููุฉ ุชุงุจุนุฉ ูุฌูุฉ ุฎุงุฑุฌูุฉ ุ ููููู ููุท ุฅุถุงูุฉ ุงูุชุจุนูุฉ ุฅูู ูุญุฏุงุช ุงูุชุญูู ุงูุชู ุชุญุชูู ุนูู ูููุฉ ูุนููุฉ ูู ุงูุงุณู.  ูุบุงูุจุง ูุง ุชุณุชุฎุฏู ุญุงูุฉ - ุญุงููุงุช DI ุ ุงูุฃูุซู ููุฃุฏุงุก. <br>  ูููุง ููู ูุงุฆูุฉ ุจุจุนุถ ุญุงููุงุช DI ุงูุชุงุจุนุฉ ูุฌูุฉ ุฎุงุฑุฌูุฉ ูุงูุชู ูุฏุนููุง ASP.NET Core: Autofac ุ Castle Windsor ุ LightInject ุ DryIoC ุ StructureMap ุ Unity </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุงุณุชุฎุฏุงู ุญุงููุฉ DI ููุงุณูุฉ ุ ูุง ููููู ุงุณุชุฎุฏุงู ุญูู ุงูุฎุงุตูุฉ / ุงูุทุฑููุฉ ุ ูููู ููููู ุชูููุฐ ุฎุฏูุฉ ุชุงุจุนุฉ ููุนููุฉ ูููุดุฆ ุนู ุทุฑูู ุชุทุจูู ููุท ุงููุตูุน ุนูู ุงููุญู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddTransient&lt;IDataService, DataService&gt;((dsvc) =&gt; { IOtherService svc = dsvc.GetService&lt;IOtherService&gt;(); return new DataService(svc); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุนูุฏ GetService ูุงุฑุบูุง ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุฎุฏูุฉ ุงูุชุงุจุนุฉ.  ููุฌุฏ ุชุจุงูู ูู GetRequiredService ูุคุฏู ุฅูู ุงุณุชุซูุงุก ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุฎุฏูุฉ ุงูุชุงุจุนุฉ. <br>  ุชุทุจู ุนูููุฉ ุงูุญุตูู ุนูู ุฎุฏูุฉ ุชุงุจุนุฉ ุจุงุณุชุฎุฏุงู GetService ุจุงููุนู ููุท ูุญุฏุฏ ูููุน ุงูุฎุฏูุฉ. </p><br><h2 id="autofac" style=";text-align:right;direction:rtl">  Autofac </h2><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู Autofac ูุน ูุซุงู ุนููู.  ุจุณูููุฉ ุ ูููู ุชุณุฌูู ุงูุฎุฏูุงุช ุงููุงุฑุฏุฉ ูู ุงูุญุงููุฉ ูุงุณุชูุงููุง ุ ุณูุงุก ุจุงูุทุฑููุฉ ุงูุงูุชุฑุงุถูุฉ ุฃู ุจุงุณุชุฎุฏุงู Autofac. </p><br><p style=";text-align:right;direction:rtl">  ุชุซุจูุช ุญุฒูุฉ NuGet Autofac.Extensions.DependencyInjection. <br>  ุชุบููุฑ ุงููููุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง ุจูุงุณุทุฉ ุงูุฃุณููุจ ConfigureServices ูู ุจุงุทูุฉ ุฅูู IServiceProvider.  ูุฅุถุงูุฉ ุงูููุชููุงุช </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public IContainer ApplicationContainer { get; private set; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณูููู ูู ุงููููู ุฅุถุงูุฉ ุฑูุฒ ูุซู ุงูุชุงูู ุฅูู ููุงูุฉ ุทุฑููุฉ ConfigureServices ููุฆุฉ ุจุฏุก ุงูุชุดุบูู (ูุฐุง ูุฌุฑุฏ ุฎูุงุฑ ูู ุฎูุงุฑุงุช ุชุณุฌูู ุงูุฎุฏูุงุช): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddTransient&lt;ISomeRepository, SomeRepository&gt;(); var builder = new ContainerBuilder(); builder.Populate(services); builder.RegisterType&lt;AnotherRepository&gt;().As&lt;IAnotherRepository&gt;(); this.ApplicationContainer = builder.Build(); return new AutofacServiceProvider(this.ApplicationContainer);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง builder.Populate (ุงูุฎุฏูุงุช) ุ  ูุถูู ุฎุฏูุงุช ูู IServiceCollection ุฅูู ุงูุญุงููุฉ.  ุฅุถุงูุฉ ุฅูู ุฃูู ูู ุงููููู ุจุงููุนู ุชุณุฌูู ุงูุฎุฏูุงุช ูุน builder.RegisterType.  ุงูู ูุนู  ููุฏ ูุณูุช ุชูุฑูุจุง.  ูุฌุจ ุนููู ุชุบููุฑ ูููุฉ ุงูุฅุฑุฌุงุน ููุฃุณููุจ ConfigureServices ูู ุงููุฑุงุบ ุฅูู IServiceProvider. </p><br><h2 id="aop-s-pomoschyu-aspnet-core---autofac-interseptors" style=";text-align:right;direction:rtl">  AOP ูุน ASP.NET Core - Autofac Interseptors </h2><br><p style=";text-align:right;direction:rtl">  ูุชุญุฏุซูู ุนู ุงูุจุฑูุฌุฉ ุงูููุฌูุฉ ูุญู ุงูุฌูุงูุจ ุ ููุฐูุฑูู ูุตุทูุญูุง ุขุฎุฑ - ุงููุฎุงูู ุงูุดุงููุฉ.  ุงูููู ูู ุจุนุถ ุงููุนูููุงุช ุงูุชู ุชุคุซุฑ ุนูู ุงูููุฏ.  ูู ุงููุณุฎุฉ ุงูุฑูุณูุฉ ูุณุชุฎุฏููู ูููุฉ ุงููุณุคูููุฉ.  ุญุณููุง ุ ุงููุฎุงูู ุงูุดุงููุฉ ูู ูุณุคูููุงุช ุชุคุซุฑ ุนูู ุงููุณุคูููุงุช ุงูุฃุฎุฑู.  ููู ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ููุจุบู ุฃูุง ุชุคุซุฑ ุนูู ุจุนุถูุง ุงูุจุนุถ ุ ุฃููุณ ูุฐููุ  ุนูุฏูุง ุชุคุซุฑ ุนูู ุจุนุถูุง ุงูุจุนุถ ุ ูุตุจุญ ูู ุงูุตุนุจ ุชุบููุฑ ุงูุจุฑูุงูุฌ.  ุณูููู ุฃูุซุฑ ููุงุกูุฉ ุนูุฏูุง ูููู ูุฏููุง ุฌููุน ุงูุนูููุงุช ุจุดูู ูููุตู.  ูููู ุฅุฌุฑุงุก ุงูุชุณุฌูู ูุงููุนุงููุงุช ูุงูุชุฎุฒูู ุงููุคูุช ูุบูุฑ ุฐูู ุงููุซูุฑ ุจุงุณุชุฎุฏุงู AOP ุฏูู ุชุบููุฑ ุฑูุฒ ุงููุฆุงุช ูุงูุฃุณุงููุจ ููุณูุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุนุงูู .NET ุ ูุชู ุงุณุชุฎุฏุงู ุทุฑููุฉ ุบุงูุจูุง ุนูุฏูุง ูุชู ุชุถููู ููุฏ AOP ุจุงุณุชุฎุฏุงู ูุนุงูุฌ ุงููุดุฑ ูู ุฑูุฒ ุชุทุจูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุฑุฌู</a> ุจุงููุนู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PostSharp</a> ) ุ ุฃู ุจุฏูุงู ูู ุฐูู ุ ููููู ุงุณุชุฎุฏุงู interceptors - ููุฐู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑูุงุจุท</a> ุงูุฃุญุฏุงุซ ุงูุชู ูููู ุฅุถุงูุชูุง ุฅูู ุฑูุฒ ุงูุชุทุจูู.  ูุณุชุฎุฏู ูุคูุงุก ุงููุนุชุฑุถูู ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ุงูุฏูููุฑ ุงูุฐู ุฏุฑุณูุงู ุจุงููุนู ูุนูููู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ุฅูุดุงุก ุงุนุชุฑุงุถูุฉ ุงูุฎุงุตุฉ ุจู.  ุงููุซุงู ุงูุฃุจุณุท ูุงูุฃูุซุฑ ูููุฐุฌูุฉ ูุงูุฐู ูุณูู ุฅุนุงุฏุฉ ุฅูุชุงุฌู ูู ุงูุชุณุฌูู. <br>  ุจุงูุฅุถุงูุฉ ุฅูู ุญุฒูุฉ Autofac.Extensions.DependencyInjection ุ ุณูููู ุฃูุถูุง ุจุชุซุจูุช ุญุฒูุฉ Autofac.Extras.DynamicProxy <br>  ูุซุจุชุฉุ  ุฃุถู ูุฆุฉ ุณุฌู ุจุณูุทุฉ ุณูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุงููุตูู ุฅูู ุฎุฏูุงุช ูุนููุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public class Logger : IInterceptor { public void Intercept(IInvocation invocation) { Debug.WriteLine($"Calling {invocation.Method.Name} from Proxy"); invocation.Proceed(); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุถู ุฅูู ุชุณุฌูููุง Autofac ุชุณุฌูู ุงููุนุชุฑุถ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> builder.Register(i =&gt; new Logger()); builder.RegisterType&lt;SomeRepository &gt;() .As&lt;ISomeRepository &gt;() .EnableInterfaceInterceptors() .InterceptedBy(typeof(Logger));</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุขู ุ ูุน ูู ููุงููุฉ ุฅูู ุงููุตู ุ ุณูุชู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงุนุชุฑุงุถ ูุฆุฉ ุงููุณุฌู. <br>  ูุจุงูุชุงูู ุ ูููููุง ุชุจุณูุท ุญูุงุชูุง ูุนุฏู ูุชุงุจุฉ ุฅุฏุฎุงู ุณุฌู ูู ุจุฏุงูุฉ ูู ุทุฑููุฉ.  ุณูููู ูุฏููุง ุชููุงุฆูุง.  ูุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ุณูููู ูู ุงูุณูู ุนูููุง ุชุบููุฑู ุฃู ุชุนุทููู ููุชุทุจูู ุจุฃูููู. </p><br><p style=";text-align:right;direction:rtl">  ูููููุง ุฃูุถูุง ุฅุฒุงูุฉ .InterceptedBy (typeof (Logger)) ุ  ููู ุจุฅุถุงูุฉ ุงุนุชุฑุงุถ ุงูุงุชุตุงู ููุท ูุฎุฏูุงุช ุชุทุจููุงุช ูุญุฏุฏุฉ ุจุงุณุชุฎุฏุงู ุงูุณูุฉ [Intercept (typeof (Logger))] - ูุฌุจ ุนููู ุชุญุฏูุฏ ุฐูู ูุจู ุฑุฃุณ ุงููุตู. </p><br><h2 id="middleware" style=";text-align:right;direction:rtl">  ุงููุณูุทุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ASP.NET ุนูู ุณูุณูุฉ ูุนููุฉ ูู ููุงููุงุช ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชุญุฏุซ ุนูุฏ ูู ุทูุจ.  ุญุชู ูุจู ุชุญููู UI / MVC ุ ูุชู ุชูููุฐ ุจุนุถ ุงูุฅุฌุฑุงุกุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุฃุถููุง ูู ุจุฏุงูุฉ ุทุฑููุฉ ุชูููู ูุฆุฉ Startup.cs ุงูููุฏ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> app.Use(async (context, next) =&gt; { Debug.WriteLine(context.Request.Path); await next.Invoke(); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ูููููุง ุฃู ูุฑู ูู ูุญุฏุฉ ุงูุชุญูู ุชุตุญูุญ ุงููููุงุช ูุง ุทูุจุงุช ุทูุจุงุชูุง.  ูู ุงููุงูุน ุ ูุญุตู ุนูู ูุฏุฑุงุช AOP "ุฎุงุฑุฌ ุงูุตูุฏูู" <br>  ูุซุงู ุนุฏูู ุงููุงุฆุฏุฉ ุ ููููู ูุงุถุญ ูุบูู ุจุงููุนูููุงุช ุญูู ุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุงููุณูุทุฉ ุ ุณุฃุฑูู ุงูุขู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public void Configure(IApplicationBuilder app) { app.Use(async (context, next) =&gt; { await context.Response.WriteAsync("Hello!" + Environment.NewLine); await next.Invoke(); }); app.Run(async context =&gt; { await context.Response.WriteAsync("Hello again."); }); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุน ูู ุทูุจ ุ ุชุจุฏุฃ ุณูุณูุฉ ูู ุงูููุงููุงุช.  ูู ูู app.Use ุ ุจุนุฏ ุงูุงุชุตุงู next.invoke () ุ ูุชู ุงูุงูุชูุงู ุฅูู ุงูููุงููุฉ ุงูุชุงููุฉ.  ููู ุดูุก ููุชูู ุจุนุฏ ุฃุนูุงู ุงูุชุทุจูู. <br>  ููููู ุชูููุฐ ุจุนุถ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุท ุนูุฏ ุงููุตูู ุฅูู ูุณุงุฑ ูุนูู. <br>  ููููู ุงูููุงู ุจุฐูู ุจุงุณุชุฎุฏุงู app.Map: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> private static void Goodbye(IApplicationBuilder app) { app.Run(async context =&gt; { await context.Response.WriteAsync("Goodbye!"); }); } public void Configure(IApplicationBuilder app) { app.Map("/goodbye", Goodbye); app.Run(async context =&gt; { await context.Response.WriteAsync("Hello!"); }); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุฅุฐุง ุงูุชููุช ุฅูู ุตูุญุฉ ุงููููุน ุ ููููู ุฑุคูุฉ ุงููุต "Hello!" ุ ูุฅุฐุง ุฃุถูุช / ูุฏุงุนูุง ุฅูู ุดุฑูุท ุงูุนูุงููู ุ ูุณุชุฑู ูุฏุงุนูุง. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู "ุงูุงุณุชุฎุฏุงู" ู "ุงูุฎุฑูุทุฉ" ุ ููููู ุงุณุชุฎุฏุงู "UseWhen" ุฃู "MapWhen" ูุฅุถุงูุฉ ุฑูุฒ ุฅูู ุณูุณูุฉ ุงูุจุฑุงูุฌ ุงููุณูุทุฉ ููุท ูู ุธู ุธุฑูู ูุนููุฉ ูุญุฏุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุญุชู ุงูุขู ูุง ุชุฒุงู ููุงู ุฃูุซูุฉ ุนุฏููุฉ ุงููุงุฆุฏุฉ ุ ุฃููุณ ูุฐููุ  ููุง ูุซุงู ุทุจูุนู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> app.Use(async (context, next) =&gt; { context.Response.Headers.Add("X-Frame-Options", "DENY"); context.Response.Headers.Add("X-Content-Type-Options", "nosniff"); context.Response.Headers.Add("X-Xss-Protection", "1"); await next(); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุถูู ููุง ุฑุคูุณ ููู ุทูุจ ูููุณุงุนุฏุฉ ูู ุญูุงูุฉ ุงูุตูุญุฉ ูู ูุฌูุงุช ุงููุฑุงุตูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฃู ููุง ูุซุงู ุนูู ุงูุชุฑุฌูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> var supportedCultures = new[] { new CultureInfo("ru"), new CultureInfo("fr") }; app.UseRequestLocalization(new RequestLocalizationOptions { DefaultRequestCulture = new RequestCulture("ru"), SupportedCultures = supportedCultures, SupportedUICultures = supportedCultures });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฅุฐุง ุฃุถูุช ุงููุนููุฉุ Culture = fr ุฅูู ุนููุงู ุงูุตูุญุฉ ุ ูููููู ุชุจุฏูู ูุบุฉ ุงูุชุทุจูู ุฅูู ุงููุฑูุณูุฉ (ุฅุฐุง ุชูุช ุฅุถุงูุฉ ุงูุชุฑุฌูุฉ ุฅูู ุงูุชุทุจูู ุงูุฎุงุต ุจู ุ ูุณูุนูู ูู ุดูุก) </p><br><h2 id="filters" style=";text-align:right;direction:rtl">  ูุฑุดุญุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุณูุณูุฉ ุงูุจุฑุงูุฌ ุงููุณูุทุฉ ุชุดูุฑ ุฅูู ุงูุนูููุงุช ูุจู MVC ุ ูุณุชุนูู ุงููุฑุดุญุงุช ูุน MVC. <br>  ููุถุญ ุงููุฎุทุท ุงูุชุฎุทูุทู ุงูุชุงูู ููููุฉ ุนูู ุงููุฑุดุญุงุช. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jz/n1/hv/jzn1hvufowfcck24q1-nnl-xbx8.png" alt="ูุฑุดุญุงุช"></p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ุชุนูู ุนูุงูู ุชุตููุฉ ุงูุชุฑุงุฎูุต.  ุฃู  ููููู ุฅูุดุงุก ููุน ูู ุงูููุงุชุฑ ุฃู ุนุฏุฉ ููุงุชุฑ ูุฅุฏุฎุงู ูููุง ููุนูุง ูู ููุฏ ุงูุชูููุถ ุงูุฐู ุณููุฌุญ ุจูุงุกู ุนูู ุงูุทูุจุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุซู ุชูู ูุฑุดุญุงุช ุงูููุงุฑุฏ.  ุจุงุณุชุฎุฏุงู ุนูุงูู ุงูุชุตููุฉ ูุฐู ุ ููููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฑุฌุงุน ุจุนุถ ุงููุนูููุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. </p><br><p style=";text-align:right;direction:rtl">  ุซู ูุญุฏุซ ุฑุจุท ุงูุจูุงูุงุช ููุชู ุชูููุฐ ุนูุงูู ุชุตููุฉ ุงูุฅุฌุฑุงุก.  ูู ุฎูุงู ูุณุงุนุฏุชูู ุ ููููู ูุนุงูุฌุฉ ุงููุนุงููุงุช ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู Action ูุงููุชูุฌุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุฑุดุญุงุช ุงูุงุณุชุซูุงุก ูุฃู ุชูููุญุงุช ุงูุงุณู ุชุชูุญ ูู ุฅุถุงูุฉ ููุน ูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุนุงูุฉ ููุชุทุจูู.  ูุฌุจ ุฃู ุชููู ูุฑูุญุฉ ุฌุฏูุง ููุชุนุงูู ูุน ุงูุฃุฎุทุงุก ูู ูู ููุงู.  ูููุงู ููุน ูู AOP-shny ุฒุงุฆุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุชุชูุญ ูู ุนูุงูู ุชุตููุฉ ุงููุชูุฌุฉ ุชูููุฐ ุจุนุถ ุงูุฅุฌุฑุงุกุงุช ูุจู ุชูููุฐ ูุญุฏุฉ ุงูุชุญูู ูู ุงูุฅุฌุฑุงุก ุฃู ุจุนุฏู.  ุชุดุจู ุนูุงูู ุชุตููุฉ ุงูุฅุฌุฑุงุก ุชูุงููุง ุ ููู ูุชู ุชูููุฐูุง ููุท ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก.  ููุงุณุจุฉ ููููุทู ูุฑุชุจุทุฉ ุนุฑุถ. </p><br><p style=";text-align:right;direction:rtl">       .            : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public class YourCustomFilter : Attribute, IAuthorizationFilter { public async void OnAuthorization(AuthorizationFilterContext context) { // -    ,     ,    context.Result = new ContentResult() { Content = "        " }; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">     DI  (   Startup.cs) </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> services.AddScoped&lt;YourCustomFilter&gt;();</code> </pre> <br><p style=";text-align:right;direction:rtl">      -    Action    </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> [ServiceFilter(typeof(YourCustomFilter))]</code> </pre> <br><p style=";text-align:right;direction:rtl">   โ    middleware    - action   .              Configure </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> public class MyMiddlewareFilter { public void Configure(IApplicationBuilder applicationBuilder) { applicationBuilder.Use(async (context, next) =&gt; { Debug.WriteLine("  middleware!"); await next.Invoke(); }); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">      Action-     </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> [MiddlewareFilter(typeof(MyMiddlewareFilter))]</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/BRKPP1NYCu4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar437002/">https://habr.com/ru/post/ar437002/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar436992/index.html">ุงูุชุฌุฑุจุฉ ูุงูุฎุทุฃ ุฃุซูุงุก ุงุฎุชูุงุฑ ูููู HTTP ุงูุนูุณู</a></li>
<li><a href="../ar436994/index.html">Liquibase ู Maven</a></li>
<li><a href="../ar436996/index.html">ุฏูุฑุฉ ุจูุซูู ุงูุชุฎุตุต ุงูููุงุฆู ูู ูุฌููุนุฉ Mail.ru</a></li>
<li><a href="../ar436998/index.html">ุญูุงูุฉ ุงูุฑูุงุฆู ูู ุงูููุฏุณุฉ ุงูุนูุณูุฉ ูุงูุฏุฎูู ุบูุฑ ุงููุตุฑุญ ุจู</a></li>
<li><a href="../ar437000/index.html">ููููุฉ ุชุนููู ุงููุงุณ ุนูู ุงุณุชุฎุฏุงู ุจูุงุจุฉ</a></li>
<li><a href="../ar437004/index.html">ูู ูุญูู ูุจุฑูุฌู YML ุจุงุฎุชุจุงุฑ ansibleุ</a></li>
<li><a href="../ar437006/index.html">Wanhao ุงููุงุณุฎ 10 3D ุงุณุชุนุฑุงุถ ุงูุทุงุจุนุฉ</a></li>
<li><a href="../ar437008/index.html">ุงูุจุฑูุฌุฉ ุงููุบููุฉ ุงูุนุตุจูุฉ. ุงูุฃุณุงุณูุงุช. ุงูุชูููุงุช. ุชุทููุฑ ุงูุฐุงุช. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar437010/index.html">ุฃุตุฏุงุก ุงููุงุถู: ุชุฌุฑุจุฉ ูููุบ ูู ุฃุณุงุณ ุทุฑููุฉ ุงูุชุญููู ุงูุทููู ููุฃุดุนุฉ ุงูุณูููุฉ ุงูุฌุฏูุฏุฉ</a></li>
<li><a href="../ar437014/index.html">ูููุฉ N ุงูููุฆุงุช ุฃู ููููุฉ ุชูุฌูุฑ ูุฌุฑุฉ โโุฏูู ูุบุงุฏุฑุฉ ุงููุทุจุฎ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>