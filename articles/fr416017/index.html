<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧓🏻 🚄 ✈️ Nous collectons l'analyse de cohorte / analyse des flux sur l'exemple d'Excel ⏬ 🎒 🤷🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article précédent, j'ai décrit l'utilisation de l'analyse de cohorte pour déterminer les raisons de la dynamique de la clientèle. Aujourd'hui,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous collectons l'analyse de cohorte / analyse des flux sur l'exemple d'Excel</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416017/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dans un article précédent,</a> j'ai décrit l'utilisation de l'analyse de cohorte pour déterminer les raisons de la dynamique de la clientèle.  Aujourd'hui, il est temps de parler des astuces de préparation des données pour l'analyse de cohorte. </p><br><p>  Il est facile de dessiner des images, mais pour qu’elles soient lues et affichées correctement «sous le capot», beaucoup de travail doit être fait.  Dans cet article, nous parlerons de la façon de mettre en œuvre l'analyse de cohorte.  Je parlerai de l'implémentation à l'aide d'Excel, et dans un autre article à l'aide de R. </p><br><p>  Que cela nous plaise ou non, mais en fait, Excel est un outil d'analyse de données.  Des analystes plus «arrogants» penseront qu'il s'agit d'un outil faible et peu pratique.  D'un autre côté, en fait, des centaines de milliers de personnes effectuent une analyse de données dans Excel et à cet égard, il battra facilement R / python.  Bien sûr, lorsque nous parlerons des avancées analytiques et du machine learning, nous travaillerons sur R / python.  Et j'aimerais que la plupart des analyses soient effectuées avec uniquement ces outils.  Mais cela vaut la peine de reconnaître les faits, la grande majorité des entreprises traitent et présentent les données dans Excel, et c'est l'outil que les analystes, les gestionnaires et les propriétaires de produits ordinaires utilisent.  En outre, Excel est difficile à vaincre en termes de simplicité et de clarté du processus, car  vous maîtrisez vos calculs et modèles littéralement avec vos mains. </p><br><p>  Et alors, comment faisons-nous l'analyse de cohorte dans Excel?  Afin de résoudre de tels problèmes, vous devez déterminer 2 choses: </p><br><ol><li><p>  Quelles données avons-nous au début du processus </p><br></li><li><p>  À quoi devraient ressembler nos données à la fin du processus. </p><a name="habracut"></a><br><p>  Pour collecter une analyse de cohorte, nous n'aurons pas seulement besoin de données rétrospectives sur les dates et les divisions.  Nous avons besoin de données au niveau du client individuel.  Au début du processus, nous avons besoin de: </p><br></li><li><p>  Date du calendrier </p><br></li><li><p>  Identifiant client </p><br></li><li><p>  Date d'enregistrement du client </p><br></li><li><p>  Volume des ventes de ce client à cette date calendaire </p><br></li></ol><br><p>  La première difficulté à surmonter est d'obtenir ces données.  Si vous avez le bon stockage, vous devriez déjà les avoir.  D'un autre côté, si jusqu'à présent vous n'avez mis en œuvre que l'enregistrement des données sur les ventes totales par jour, alors vous ne disposez que des données clients sur «prod».  Pour l'analyse de cohorte, vous devrez implémenter ETL et placer les données dans le contexte des clients dans votre stockage, sinon vous ne réussirez pas.  Et surtout, si vous séparez «prod» et analytics dans différentes bases de données, car  Les tâches analytiques et les tâches de fonctionnement de votre produit ont des objectifs différents: la concurrence pour les ressources.  Les analystes ont besoin d'agrégats et de calculs rapides pour de nombreux utilisateurs, le produit doit servir rapidement un utilisateur spécifique.  J'écrirai un article séparé sur l'organisation du stockage. </p><br><p>  Vous avez donc des données de démarrage: </p><br><p><img src="https://habrastorage.org/webt/ck/5w/b8/ck5wb8uk9d82ql7j_e07iitxa_y.png"></p><br><p>  La première chose que nous devons faire est de les transformer en «échelles».  Pour ce faire, vous devez créer un tableau croisé dynamique au-dessus de ce tableau, en lignes - la date d'enregistrement, en colonnes - la date du calendrier, en tant que valeurs - le nombre d'ID de clients.  Si vous avez correctement extrait les données, vous devriez obtenir un tel triangle / échelle: </p><br><p><img src="https://habrastorage.org/webt/dz/r0/0c/dzr00cwwaye1v9i9fbw7oozcdly.png"></p><br><p>  En général, une échelle est notre graphique de cohorte, dans lequel chaque ligne affiche la dynamique d'une cohorte distincte.  Les clients à temps dans cet affichage se déplacent uniquement sur une ligne.  Ainsi, la dynamique de la cohorte reflète le développement des relations avec un groupe de clients venus au cours d'une même période.  Souvent, pour plus de commodité et sans perte de qualité, vous pouvez combiner des cohortes en «blocs» de rangées.  Par exemple, vous pouvez les regrouper par semaine et par mois.  De la même manière, vous pouvez également regrouper une colonne.  Peut-être que votre rythme de développement de produits ne nécessite pas de détails jusqu'à plusieurs jours. </p><br><p>  Sur la base de cette échelle, vous pouvez construire un graphique à partir de mon article (j'ai vraiment souligné que j'avais regroupé plusieurs lignes en une seule pour que la cohorte soit plus petite): </p><br><p><img src="https://habrastorage.org/webt/cb/ff/pw/cbffpwi-gdfl89l-ujto3jvt-pk.png"></p><br><p>  Il s'agit d'un graphique avec des zones cumulatives où chaque ligne est une ligne, horizontalement d'une date. </p><br><p>  Une logique un peu plus compliquée pour mettre en œuvre le calendrier des "flux".  Pour les threads, nous devons faire des calculs supplémentaires.  En logique de thread, chaque client arrive dans des états différents: </p><br><ol><li>  Nouveau - tout client qui a une différence entre la date d'inscription et la date du calendrier &lt;7 jours </li><li>  Réactivé - tout client qui n'est plus nouveau, mais qui n'a pas généré de revenus au cours du dernier mois civil </li><li>  Valide - tout client qui n'est pas nouveau mais a généré des revenus au cours du mois civil </li><li>  Décédé - tout client qui n'a pas généré de revenus pendant 2 mois consécutifs </li></ol><br><p>  Tout d'abord, vous devez corriger ces définitions dans l'entreprise afin de pouvoir implémenter correctement cette logique et calculer automatiquement les états.  Ces 4 définitions ont des implications importantes pour le marketing en général.  Vos stratégies pour attirer, retenir et retourner seront basées sur l'état dans lequel vous pensez que le client est.  Et si vous commencez à implémenter des modèles d'apprentissage automatique pour prédire les sorties de clients, les définitions deviendront votre pierre angulaire du succès de ces modèles.  En général, j'écrirai un article séparé sur l'organisation du travail et l'importance de la méthodologie analytique.  Ci-dessus, j'ai donné juste un exemple de ce que peuvent être ces définitions. </p><br><p>  Dans Excel, vous devez créer une colonne supplémentaire où entrer la logique décrite ci-dessus.  Dans notre cas, nous devons «transpirer».  Nous avons 2 types de critères: </p><br><ul><li>  La différence entre la date d'enregistrement et la date du calendrier - chaque ligne contient ces données et il vous suffit ensuite de les calculer (la soustraction des dates dans Excel donne simplement la différence en jours) </li><li>  Données sur les revenus du mois en cours et du mois dernier.  Ces données ne sont pas disponibles pour nous dans la ligne.  De plus, compte tenu du fait que la commande n'est pas garantie dans notre tableau, vous ne pouvez pas dire exactement où vous avez des données les autres jours du mois pour ce client. </li></ul><br><p>  Il existe 2 façons de résoudre le problème de 2 types de critères: </p><br><ol><li>  Demandez à le faire dans la base de données.  SQL permet d'utiliser la fonction analytique pour calculer pour chaque client le montant des revenus pour le mois en cours et le dernier (pour le mois en cours SUM (revenue) OVER (PARTITION BY client_id, calendar_month, puis LAG pour obtenir le décalage pour le dernier mois): </li><li>  Dans Excel, vous devez l'implémenter comme ceci: <br><ul><li>  Pour le mois en cours: SUMMES (), les critères seront l'ID client et le mois de la cellule du jour calendaire </li><li>  Pour le dernier mois: SUMMES (), les critères seront l'ID client et le mois de la cellule du jour calendaire moins exactement 1 mois calendaire.  Dans ce cas, j'attire l'attention sur le fait que vous devez soustraire le mois civil et non 30 jours.  Sinon, vous risquez d'obtenir une image floue en raison du nombre inégal de jours dans les mois.  Utilisez également la fonction IF ERROR pour remplacer les valeurs erronées pour les clients qui n'ont pas eu le mois dernier. </li></ul></li></ol><br><p>  En ajoutant les colonnes de revenus du mois en cours du dernier mois, vous pouvez créer une condition intégrée IF en tenant compte de tous les facteurs (la différence de dates et le montant des revenus du mois en cours / du dernier mois): <br>  SI (différence de date &lt;7; «nouveau»; <br>  SI (ET (revenus du mois dernier = 0; revenus du mois en cours&gt; 0); "réactivation"; <br>  SI (ET (revenus du mois dernier&gt; 0; revenus du mois en cours&gt; 0); "courants" <br>  SI (ET (revenus du mois dernier = 0; revenus du mois en cours = 0); "parti"; "erreur"))))) </p><br><p>  «Erreur» est nécessaire ici uniquement pour contrôler que vous ne vous êtes pas trompé dans l'enregistrement.  La logique des critères d'état MECE ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://en.wikipedia.org/wiki/MECE_principle</a> ), c'est-à-dire  Si tout est fait correctement, alors chacun d'eux sera apposé un état sur 4 </p><br><p>  Vous devriez l'obtenir comme ceci: </p><br><p><img src="https://habrastorage.org/webt/y_/zo/wm/y_zowmltm2yxfv2evtkkrnl-mhg.png"></p><br><p>  Maintenant, ce tableau peut être reconstruit à l'aide d'un tableau croisé dynamique dans un tableau pour le traçage.  Vous devez le transformer en table: </p><br><p>  Date du calendrier (colonnes) <br>  État (lignes) <br>  Nombre de clients id (valeurs dans les cellules) </p><br><p>  Ensuite, il nous suffit de construire un diagramme à barres sur la base des données, avec des accumulations, sur l'axe X la date du calendrier, les lignes sont les états, le nombre de clients est la hauteur des colonnes.  Vous pouvez changer l'ordre des états sur le graphique en changeant l'ordre des lignes dans le menu «sélectionner les données».  En conséquence, nous obtenons l'image suivante: </p><br><p><img src="https://habrastorage.org/webt/n1/pt/k9/n1ptk9jxdzcjzqf0xcruvgyplyk.png"></p><br><p>  Nous pouvons maintenant commencer à interpréter et à analyser. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416017/">https://habr.com/ru/post/fr416017/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416007/index.html">À peu près compliqué. Le début de la création d'une "maison intelligente" sans fil. Basé sur la technologie Linux, les logiciels Z-Wave et MajorDoMo</a></li>
<li><a href="../fr416009/index.html">Essayez les excréments de lapin, c'est vigoureux, ça va attraper - extraits en pharmacologie</a></li>
<li><a href="../fr416011/index.html">Modèle BIF: code frontal propre et travail pratique avec les données du serveur</a></li>
<li><a href="../fr416013/index.html">Comment commencer à investir et économiser de l'argent: les experts de Dow Jones ont nommé les cinq principales erreurs des traders débutants</a></li>
<li><a href="../fr416015/index.html">Jouer avec les threads dans Node.JS 10.5.0</a></li>
<li><a href="../fr416019/index.html">Quelle est la qualité de l'écosystème open source de R pour résoudre les problèmes commerciaux?</a></li>
<li><a href="../fr416021/index.html">Développer votre propre framework et la croissance professionnelle d'un programmeur JS</a></li>
<li><a href="../fr416023/index.html">Comme l'écrit le surnom de bot Telegram d'iOS, sur Swift</a></li>
<li><a href="../fr416025/index.html">Implémentation de la navigation dans les applications Android à l'aide du composant Architecture de navigation</a></li>
<li><a href="../fr416027/index.html">Le HI-FI soviétique et ses créateurs: les passions de Hale - Electronique 150AC - 001</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>