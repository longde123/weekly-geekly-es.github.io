<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äç‚öñÔ∏è üö£üèª üóëÔ∏è Hacemos un proyecto de complemento con compilaci√≥n para diferentes versiones de Revit / AutoCAD üìó üìô ü§ôüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Al desarrollar complementos para aplicaciones CAD ( en mi caso, AutoCAD, Revit y Renga), surge un problema con el tiempo: salen nuevas versiones de pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hacemos un proyecto de complemento con compilaci√≥n para diferentes versiones de Revit / AutoCAD</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482308/"><img src="https://habrastorage.org/webt/u7/vh/xi/u7vhxitqphrjiza_fsmzmoclmha.png"><br><br><p>  Al desarrollar complementos para aplicaciones CAD ( <a href="https://modplus.org/ru/" rel="nofollow">en mi caso,</a> AutoCAD, Revit y Renga), surge un problema con el tiempo: salen nuevas versiones de programas, se deben realizar cambios en la API y nuevas versiones de complementos. </p><br><p>  Cuando solo tiene un complemento o todav√≠a es un principiante autodidacta en este asunto, simplemente puede hacer una copia del proyecto, cambiar los lugares necesarios y crear una nueva versi√≥n del complemento.  En consecuencia, los cambios posteriores al c√≥digo implicar√°n un aumento m√∫ltiple en los costos laborales. </p><br><p>  A medida que gane experiencia y conocimiento, encontrar√° varias formas de automatizar este proceso.  Fui de esta manera y quiero contarles a qu√© me he enfrentado al final y qu√© tan conveniente es. </p><a name="habracut"></a><br><p>  Para comenzar, considere un m√©todo que es obvio y que he estado usando durante mucho tiempo. </p><br><h3>  Enlaces a archivos de proyecto </h3><br><p>  Y para que todo sea simple, claro y comprensible, describir√© todo utilizando un ejemplo abstracto de desarrollo de plug-in. </p><br><p>  Abra Visual Studio (tengo la versi√≥n Community 2019. Y s√≠, en ruso) y cree una nueva soluci√≥n.  Llam√©moslo <b>MySuperPluginForRevit</b> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_1.png" alt="imagen1"><br><br><p>  Crearemos un complemento para Revit para las versiones 2015-2020.  Por lo tanto, crearemos un nuevo proyecto en la soluci√≥n (Net Framework Class Library) y lo llamaremos <b>MySuperPluginForRevit_2015</b> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_2.png" alt="imagen2"><br><br><p>  Necesitamos agregar enlaces a la API de Revit.  Por supuesto, podemos agregar enlaces a archivos locales (necesitar√° instalar todos los SDK necesarios o todas las versiones de Revit), pero seguiremos el camino correcto y conectaremos el paquete NuGet.  No puede encontrar una peque√±a cantidad de paquetes, pero usar√© el m√≠o. </p><br><p>  Despu√©s de conectar el paquete, haga clic derecho en el elemento " <em>Enlaces</em> " y seleccione " <em>Transferir paquetes.configar a PackageReference ...</em> " en el men√∫ </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_3.png" alt="imagen3"><br><br><p>  Si repentinamente entra en p√°nico en este punto, ya que la ventana de propiedades del paquete no tiene el elemento importante " <em>Copiar localmente</em> ", que definitivamente debemos establecer en <em>falso</em> , entonces no entre en p√°nico: vaya a la carpeta del proyecto y abra el archivo con la extensi√≥n. csproj en un editor conveniente (uso Notepad ++) y encontramos un registro sobre nuestro paquete.  Se ve as√≠ ahora: </p><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Agregue la <em>propiedad &lt;ExcludeAssets&gt; runtime &lt;/ExcludeAssets&gt;</em> .  Resulta as√≠: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ahora, al crear un proyecto, los archivos del paquete no se copiar√°n en la carpeta de salida. <br>  Vamos m√°s all√°: inmediatamente imagine que nuestro complemento usar√° algo de la API de Revit, que ha cambiado con el lanzamiento de nuevas versiones.  Bueno, o simplemente, necesitamos cambiar algo en el c√≥digo, dependiendo de la versi√≥n de Revit para la que estamos haciendo el complemento.  Para resolver tales diferencias en el c√≥digo, utilizaremos s√≠mbolos de compilaci√≥n condicional.  Abra las propiedades del proyecto, vaya a la pesta√±a " <em>Ensamblaje</em> " y en el campo " <em>S√≠mbolos de compilaci√≥n condicional</em> " escriba <strong>R2015</strong> . </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_4.png" alt="imagen4"><br><br><p>  Tenga en cuenta que el s√≠mbolo debe agregarse tanto para la configuraci√≥n de depuraci√≥n como para la configuraci√≥n de lanzamiento. </p><br><p>  Bueno, mientras estamos en la ventana de propiedades, inmediatamente vamos a la pesta√±a " <em>Aplicaci√≥n</em> " y en el campo " <strong>Espacio de</strong> <em>nombres predeterminado</em> " <strong>eliminamos</strong> el sufijo <strong>_2015</strong> para que nuestro espacio de nombres sea universal e independiente del nombre del ensamblado: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_5.png" alt="imagen5"><br><br><p>  En mi caso, en el producto final, los complementos de todas las versiones se colocan en una carpeta, por lo que mis nombres de ensamblado permanecen con el sufijo del formulario <strong>_20xx</strong> .  Pero tambi√©n puede eliminar el sufijo del nombre del ensamblado si se supone la ubicaci√≥n de los archivos en diferentes carpetas. </p><br><p>  Pasamos al c√≥digo del archivo <em>Class1.cs</em> y simulamos algo de c√≥digo all√≠, teniendo en cuenta las diferentes versiones de Revit: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MySuperPluginForRevit</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.Attributes; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.DB; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.UI; [Regeneration(RegenerationOption.Manual)] [Transaction(TransactionMode.Manual)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Class1</span></span> : <span class="hljs-title"><span class="hljs-title">IExternalCommand</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Result </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ExternalCommandData commandData, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message, ElementSet elements</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> R2015 TaskDialog.Show("ModPlus", "Hello Revit 2015"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2016 TaskDialog.Show("ModPlus", "Hello Revit 2016"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2017 TaskDialog.Show("ModPlus", "Hello Revit 2017"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2018 TaskDialog.Show("ModPlus", "Hello Revit 2018"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2019 TaskDialog.Show("ModPlus", "Hello Revit 2019"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2020 TaskDialog.Show("ModPlus", "Hello Revit 2020"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> return Result.Succeeded; } } }</span></span></code> </pre> <br><p>  Inmediatamente tom√© en cuenta todas las versiones de Revit anteriores a la versi√≥n 2015 (que estaban en el momento de la escritura) e inmediatamente tom√© en cuenta la presencia de s√≠mbolos de compilaci√≥n condicional, que creo usando la misma plantilla. </p><br><p>  Pasamos al punto culminante principal.  Creamos un nuevo proyecto en nuestra soluci√≥n, solo para la versi√≥n del complemento para Revit 2016. Repetimos todos los pasos descritos anteriormente, respectivamente, reemplazando el n√∫mero 2015 con el n√∫mero 2016. Pero eliminamos el archivo <em>Class1.cs</em> del nuevo proyecto. </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_6.png" alt="imagen6"><br><br><p>  El archivo con el c√≥digo deseado, <em>Class1.cs</em> , ya lo tenemos y solo necesitamos insertar un enlace en el nuevo proyecto.  Hay dos formas de insertar enlaces: </p><br><ol><li>  Haga clic <strong>largo</strong> en el proyecto con el bot√≥n derecho del mouse, seleccione ‚Äú <em>Agregar</em> ‚Äù -&gt; ‚Äú <em>Elemento existente</em> ‚Äù, en la ventana que se abre, busque el archivo y, en lugar de la opci√≥n ‚Äú <em>Agregar</em> ‚Äù, seleccione ‚Äú <em>Agregar como enlace</em> ‚Äù </li></ol><br><img src="https://blog.modplus.org/images/Blog/Blog24_7.png" alt="imagen7"><br><br><ol><li>  <strong>Corto</strong> : justo en el explorador de soluciones, seleccione el archivo deseado (o incluso archivos. O incluso carpetas completas) y arrastre y suelte en el nuevo proyecto con la tecla Alt presionada.  Al arrastrar, ver√° que cuando presiona la tecla Alt, el cursor del mouse cambiar√° de un signo m√°s a una flecha. <br>  <strong>UPD: Confund√≠</strong> un poco en esta secci√≥n: para transferir varios archivos, mantenga presionada la <strong>tecla May√∫s + Alt</strong> . </li></ol><br><p>  Despu√©s del procedimiento, veremos en el segundo proyecto el archivo <em>Class1.cs</em> con el icono correspondiente (flecha azul): </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_8.png" alt="imagen8"><br><br><p>  Al editar el c√≥digo en la ventana del editor, tambi√©n puede elegir en el contexto de qu√© proyecto mostrar el c√≥digo, lo que le permite ver el c√≥digo que se est√° editando con diferentes s√≠mbolos de compilaci√≥n condicional: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_9.png" alt="imagen9"><br><br><p>  Bajo este esquema, creamos todos los dem√°s proyectos (2017-2020).  Hack de vida: si arrastra y suelta archivos en el explorador de soluciones no desde el proyecto base, sino desde el proyecto donde ya est√°n insertados como un enlace, ¬°entonces no puede mantener presionada la tecla Alt! </p><br><p>  La opci√≥n descrita es bastante buena hasta el momento en que se agrega la nueva versi√≥n del complemento o hasta que se agregan los nuevos archivos al proyecto; todo esto se vuelve muy triste.  Y recientemente, de repente me di cuenta de c√≥mo resolver todo esto con un proyecto y pasamos al segundo m√©todo. </p><br><h3 id="magiya-konfiguraciy">  Configuraci√≥n m√°gica </h3><br><p>  Despu√©s de leer aqu√≠, puedes exclamar: "¬øQu√© demonios describiste el primer m√©todo, si el art√≠culo trata inmediatamente del segundo?"  Y describ√≠ todo para aclarar por qu√© necesitamos s√≠mbolos de compilaci√≥n condicional y en qu√© lugares difieren nuestros proyectos.  Y ahora nos queda m√°s claro qu√© diferencias espec√≠ficas de proyecto necesitamos implementar, dejando solo un proyecto. </p><br><p>  Y para que todo sea m√°s obvio, no crearemos un nuevo proyecto, sino que haremos cambios en nuestro proyecto actual, creado de la primera manera. </p><br><p>  Entonces, en primer lugar, eliminamos todos los proyectos de la soluci√≥n, excepto el principal (que contiene los archivos directamente).  Es decir  proyectos para versiones 2016-2020.  Abra la carpeta de la soluci√≥n y elimine las carpetas de estos proyectos all√≠. </p><br><p>  Nos queda una soluci√≥n en la soluci√≥n: <strong>MySuperPluginForRevit_2015</strong> .  Abrimos sus propiedades y: </p><br><ol><li>  En la pesta√±a <em>Aplicaci√≥n</em> , elimine el sufijo <strong>_2015</strong> del <strong>nombre</strong> del ensamblado (quedar√° claro por qu√©) </li><li>  En la pesta√±a " <em>Ensamblaje</em> ", elimine el <strong>s√≠mbolo de</strong> compilaci√≥n condicional <strong>R2015</strong> del campo correspondiente </li></ol><br><blockquote>  Nota: en la √∫ltima versi√≥n de Visual Studio hay una falla: los s√≠mbolos de compilaci√≥n condicional no se muestran en la ventana de propiedades del proyecto, aunque existen.  Si tiene este problema t√©cnico, debe eliminarlos manualmente del archivo .csproj.  Sin embargo, todav√≠a trabajamos en √©l, as√≠ que sigue leyendo. </blockquote><p>  Cambie el nombre del proyecto en la ventana del <strong>explorador de</strong> soluciones eliminando el sufijo <strong>_2015</strong> y luego elimine el proyecto de la soluci√≥n.  ¬°Esto es necesario para mantener el orden y los sentimientos de los perfeccionistas!  Abrimos la carpeta de nuestra soluci√≥n, cambiamos el nombre de la carpeta del proyecto de la misma manera y volvemos a cargar el proyecto en la soluci√≥n. </p><br><p>  Abre el administrador de configuraci√≥n.  Nosotros, en principio, no necesitaremos la configuraci√≥n de <strong>lanzamiento</strong> , por lo que la eliminaremos.  Estamos creando nuevas configuraciones con los nombres <strong>R2015</strong> , <strong>R2016</strong> , ..., <strong>R2020 que</strong> ya nos son familiares.  Tenga en cuenta que no necesita copiar par√°metros de otras configuraciones y no necesita crear configuraciones de proyecto: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_10.png" alt="imagen10"><br><p>  Vamos a la carpeta del proyecto y abrimos el archivo con la extensi√≥n .csproj en un editor conveniente.  Por cierto, tambi√©n se puede abrir en Visual Studio: debe descargar el proyecto y luego el elemento correcto estar√° en el men√∫ contextual: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_11.png" alt="imagen11"><br><br><p>  La edici√≥n en Visual Studio es incluso preferible, ya que el editor se alinea y solicita. </p><br><p>  En el archivo veremos los elementos de <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/propertygroup-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">PropertyGroup</a> : en la parte superior est√° el general y luego con las condiciones.  Estos elementos establecen las propiedades del proyecto durante su ensamblaje.  El primer elemento, que sin condiciones, establece propiedades generales, y los elementos con condiciones, respectivamente, cambian algunas propiedades dependiendo de las configuraciones. </p><br><p>  Vamos al elemento general (primer) del <em>PropertyGroup</em> y miramos la propiedad <strong>AssemblyName</strong> : este es el nombre del ensamblado y deber√≠amos tenerlo sin el sufijo <strong>_2015</strong> .  Si hay un sufijo, elim√≠nelo. </p><br><p>  Encontramos un elemento con la condici√≥n </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  No lo necesitamos, lo eliminamos. </p><br><p>  Cl√°usula de condici√≥n </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ser√° necesario para trabajar en la etapa de desarrollo y depuraci√≥n del c√≥digo.  Puede cambiar sus propiedades seg√∫n sus necesidades: establecer diferentes rutas de salida, cambiar s√≠mbolos de compilaci√≥n condicional, etc. </p><br><p>  Ahora cree nuevos elementos <em>PropertyGroup</em> para nuestras configuraciones.  En estos elementos, solo necesitamos establecer cuatro propiedades: </p><br><ul><li>  <strong>OutputPath</strong> es la carpeta de salida.  Configur√© el valor est√°ndar <strong>bin \ R20xx</strong> </li><li>  <strong>DefineConstants</strong> : s√≠mbolos de compilaci√≥n condicional.  <strong>Establecer RASTREO; R20xx</strong> </li><li>  <strong>TargetFrameworkVersion</strong> - versi√≥n de la plataforma.  Para diferentes versiones de la API de Revit, se deben definir diferentes plataformas. </li><li>  <strong>AssemblyName</strong> : nombre del ensamblado (es decir, nombre del archivo).  Puede escribir directamente el nombre del ensamblado deseado, pero para la universalidad, le recomiendo escribir el valor de <strong>$ (AssemblyName) _20xx</strong> .  Para hacer esto, previamente eliminamos el sufijo del nombre del ensamblado </li></ul><br><p>  La caracter√≠stica m√°s importante de todos estos elementos es que pueden copiarse trivialmente a otros proyectos sin cambiarlos en absoluto.  M√°s adelante en el art√≠culo adjuntar√© todo el contenido del archivo .csproj. </p><br><p>  Bueno, descubrimos las propiedades del proyecto, no es dif√≠cil.  Pero qu√© hacer con las bibliotecas de complementos (paquetes NuGet).  Si buscamos m√°s, veremos que las bibliotecas de complementos est√°n definidas por elementos de <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/itemgroup-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">ItemGroup</a> .  Pero aqu√≠ est√° la mala suerte: este elemento procesa incorrectamente las condiciones, como un elemento <em>PropertyGroup</em> .  Quiz√°s esto sea incluso una falla de Visual Studio, pero si configura varios elementos de <em>ItemGroup</em> con condiciones de configuraci√≥n e inserta diferentes enlaces a los paquetes de NuGet en su interior, cuando cambie la configuraci√≥n, todos los paquetes especificados se conectar√°n al proyecto. </p><br><p>  El elemento <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/choose-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">Choose</a> viene en nuestra ayuda, que funciona de acuerdo con la l√≥gica habitual <strong>if-then-else</strong> . </p><br><p>  Usando el elemento <em>Choose</em> , definimos diferentes paquetes NuGet para diferentes configuraciones: </p><br><div class="spoiler">  <b class="spoiler_title">Todo el contenido de csproj</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ToolsVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"15.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/developer/msbuild/2003"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Configuration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)' == '' "</span></span></span><span class="hljs-tag">&gt;</span></span>Debug<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Platform</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Platform)' == '' "</span></span></span><span class="hljs-tag">&gt;</span></span>AnyCPU<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectGuid</span></span></span><span class="hljs-tag">&gt;</span></span>{5AD738D6-4122-4E76-B865-BE7CE0F6B3EB}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectGuid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span>Library<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppDesignerFolder</span></span></span><span class="hljs-tag">&gt;</span></span>Properties<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppDesignerFolder</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RootNamespace</span></span></span><span class="hljs-tag">&gt;</span></span>MySuperPluginForRevit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RootNamespace</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>MySuperPluginForRevit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FileAlignment</span></span></span><span class="hljs-tag">&gt;</span></span>512<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FileAlignment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Deterministic</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Deterministic</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugSymbols</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugSymbols</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugType</span></span></span><span class="hljs-tag">&gt;</span></span>full<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Optimize</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Optimize</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\Debug\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>DEBUG;R2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ErrorReport</span></span></span><span class="hljs-tag">&gt;</span></span>prompt<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ErrorReport</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WarningLevel</span></span></span><span class="hljs-tag">&gt;</span></span>4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WarningLevel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2015|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2015\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2016|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2016\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2016<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2016<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2017|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2017\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2017<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2017<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2018|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2018\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2019|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2019\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2019<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2019<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2020|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2020\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2020<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2020<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Xml.Linq"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Data.DataSetExtensions"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.CSharp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Data"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Net.Http"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Class1.cs"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Properties\AssemblyInfo.cs"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Choose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2015' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2016' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2016"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2017' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2018' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2018"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2019' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2019"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2020' or '$(Configuration)'=='Debug'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2020"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Choose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(MSBuildToolsPath)\Microsoft.CSharp.targets"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Tenga en cuenta que en una de las condiciones especifiqu√© dos configuraciones a trav√©s de <strong>OR (Or)</strong> .  Por lo tanto, el paquete necesario se conectar√° durante la configuraci√≥n de <strong>depuraci√≥n</strong> . </p><br><p>  Y aqu√≠ tenemos casi todo es perfecto.  Volvemos a cargar el proyecto, <em>activamos</em> la configuraci√≥n que necesitamos, llamamos al elemento " <em>Restaurar todos los paquetes NuGet</em> " en el men√∫ contextual de la soluci√≥n (no el proyecto) y vemos c√≥mo est√°n cambiando los paquetes. </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_12.png" alt="imagen12"><br><br><p>  Y en esta etapa me detuve: para recopilar todas las configuraciones a la vez, podr√≠amos usar el conjunto de lotes (men√∫ " <em>Conjunto</em> " -&gt; " <em>Conjunto de</em> <em>lotes</em> "), pero al cambiar las configuraciones, los paquetes no se restauran autom√°ticamente.  Y al armar el proyecto, tampoco sucede, aunque, en teor√≠a, deber√≠a suceder.  No encontr√© una soluci√≥n a este problema por medios est√°ndar.  Y lo m√°s probable es que esto tambi√©n sea un error de Visual Studio. </p><br><p>  Por lo tanto, para el ensamblaje por lotes, se decidi√≥ utilizar un sistema de ensamblaje automatizado <a href="https://nuke.build/" rel="nofollow">Nuke</a> especial.  En realidad, no quer√≠a esto, ya que lo considero innecesario en el marco del desarrollo de complementos, pero por el momento no veo otra soluci√≥n.  Y la pregunta "¬øPor qu√© exactamente Nuke?" La respuesta es simple: la usamos en el trabajo. </p><br><p>  Entonces, vamos a la carpeta de nuestra soluci√≥n (no al proyecto), mantenga presionada la <strong>tecla May√∫s</strong> y haga clic derecho en un lugar vac√≠o de la carpeta; en el men√∫ contextual, seleccione el elemento " <em>Abrir ventana de PowerShell aqu√≠</em> ". </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_13.png" alt="imagen13"><br><br><p>  Si no tiene instalado <em>Nuke</em> , primero escriba el comando </p><br><pre> <code class="powershell hljs">dotnet tool install Nuke.GlobalTool ‚Äìglobal</code> </pre> <br><p>  Ahora escriba el comando <strong>nuclear</strong> y se le pedir√° que configure la <em>bomba nuclear</em> para el proyecto actual.  No s√© c√≥mo escribirlo m√°s correctamente en ruso. No se pudo encontrar el archivo .nuke que se escribir√° en ingl√©s.  ¬øQuieres configurar una compilaci√≥n?  [s / n] </p><br><p>  Presione la tecla Y y luego habr√° la configuraci√≥n inmediata.  Necesitamos la opci√≥n m√°s simple usando <strong>MSBuild</strong> , por lo que respondemos como en la captura de pantalla: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_14.png" alt="imagen14"><br><br><p>  Pasemos a Visual Studio, que nos ofrecer√° volver a cargar la soluci√≥n, ya que se le ha agregado un nuevo proyecto.  Reiniciamos la soluci√≥n y vemos que tenemos un proyecto de <strong>compilaci√≥n</strong> en el que solo estamos interesados ‚Äã‚Äãen un archivo: <em>Build.cs</em> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_15.png" alt="imagen15"><br><br><p>  Abra este archivo y escriba un script para construir el proyecto para todas las configuraciones.  Bueno, o usa mi script, que puedes editar por ti mismo: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.Execution; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.ProjectModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.Tools.MSBuild; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Nuke.Common.Tools.MSBuild.MSBuildTasks; [CheckBuildProjectConfigurations] [UnsetVisualStudioEnvironmentVariables] <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Build</span></span> : <span class="hljs-title"><span class="hljs-title">NukeBuild</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; Execute&lt;Build&gt;(x =&gt; x.Compile); [Solution] <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Solution Solution; <span class="hljs-comment"><span class="hljs-comment">// If the solution name and the project (plugin) name are different, then indicate the project (plugin) name here string PluginName =&gt; Solution.Name; Target Compile =&gt; _ =&gt; _ .Executes(() =&gt; { var project = Solution.GetProject(PluginName); if (project == null) throw new FileNotFoundException("Not found!"); var build = new List&lt;string&gt;(); foreach (var (_, c) in project.Configurations) { var configuration = c.Split("|")[0]; if (configuration == "Debug" || build.Contains(configuration)) continue; Logger.Normal($"Configuration: {configuration}"); build.Add(configuration); MSBuild(_ =&gt; _ .SetProjectFile(project.Path) .SetConfiguration(configuration) .SetTargets("Restore")); MSBuild(_ =&gt; _ .SetProjectFile(project.Path) .SetConfiguration(configuration) .SetTargets("Rebuild")); } }); }</span></span></code> </pre> <br><p>  Regresamos a la ventana de PowerShell y volvemos a escribir el comando <strong>nuclear</strong> (puede escribir el comando <strong>nuclear</strong> con el <em>Target</em> deseado. Pero tenemos un <em>Target</em> , que comienza por defecto).  Despu√©s de presionar la tecla Intro, nos sentiremos como verdaderos piratas inform√°ticos, porque, como en una pel√≠cula, nuestro proyecto se ensamblar√° autom√°ticamente para diferentes configuraciones. </p><br><p>  Por cierto, puede usar PowerShell directamente desde Visual Studio (men√∫ " <em>Ver</em> " -&gt; " <em>Otras ventanas</em> " -&gt; " <em>Package Manager Console</em> "), pero todo ser√° en blanco y negro, lo que no es muy conveniente. </p><br><p>  Sobre esto mi art√≠culo est√° terminado.  Estoy seguro de que puede descubrir la opci√≥n para AutoCAD usted mismo.  Espero que el material presentado aqu√≠ encuentre a sus "clientes". </p><br><p>  Gracias por su atencion! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/482308/">https://habr.com/ru/post/482308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../482298/index.html">Programador fan√°tico. ¬øC√≥mo mantener ventajas competitivas y hacerse visible?</a></li>
<li><a href="../482300/index.html">Explorando los registros de Java 14</a></li>
<li><a href="../482302/index.html">Neblina psicol√≥gica sobre el a√±o nuevo</a></li>
<li><a href="../482304/index.html">Hecho para China: c√≥mo crear el banner perfecto para el consumidor chino</a></li>
<li><a href="../482306/index.html">Historia del porno en Internet. Parte 1</a></li>
<li><a href="../482310/index.html">Transporte de animales del siglo XXI.</a></li>
<li><a href="../482314/index.html">Construyendo un cl√∫ster PostgreSQL de alta disponibilidad usando Patroni, etcd, HAProxy</a></li>
<li><a href="../482316/index.html">Complicamos los modelos de ciencia ficci√≥n de manera procesal: qu√© es Greeble y c√≥mo usarlo</a></li>
<li><a href="../482318/index.html">Por qu√© el √≥xido deber√≠a convertirse en un lenguaje de programaci√≥n funcional</a></li>
<li><a href="../482328/index.html">V&V no es para venganza</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>