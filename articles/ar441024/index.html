<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ธ ๐ฆ ๐ ููุชุจ ุงูุฒุงุญู ููุงุญุฏ ุฃู ุงุซููู 1.0 ๐จ๐ปโโ๏ธ ๐ ๐ฉ๐ฟโ๐ง</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุนุฏ ูุชุชุจุน ุงุฑุชุจุงุทุงุช ุงูููุจ (ุฃู ุนููุจูุช ุงูููุจ) ุฌุฒุกูุง ููููุง ูู ูุญุฑูุงุช ุงูุจุญุซ ูุชุชุจุน ุงุฑุชุจุงุทุงุช ุตูุญุงุช ุงูููุจ ูู ุฃุฌู ุฅุฏุฎุงู ูุนูููุงุช ุนููุง ูู ููุงุนุฏ ุงูุจูุงูุงุช ุ ูุฎุงุตุฉู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุชุจ ุงูุฒุงุญู ููุงุญุฏ ุฃู ุงุซููู 1.0</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/semrush/blog/441024/" style=";text-align:right;direction:rtl">  ูุนุฏ <b>ูุชุชุจุน</b> ุงุฑุชุจุงุทุงุช ุงูููุจ (ุฃู ุนููุจูุช ุงูููุจ) ุฌุฒุกูุง ููููุง ูู ูุญุฑูุงุช ุงูุจุญุซ <b>ูุชุชุจุน</b> ุงุฑุชุจุงุทุงุช ุตูุญุงุช ุงูููุจ ูู ุฃุฌู ุฅุฏุฎุงู ูุนูููุงุช ุนููุง ูู ููุงุนุฏ ุงูุจูุงูุงุช ุ ูุฎุงุตุฉู ููุฒูุฏ ูู ุงูููุฑุณุฉ.  ูุญุฑูุงุช ุงูุจุญุซ (Google ู Yandex ู Bing) ุ ููุฐูู ููุชุฌุงุช SEO (SEMrush ู MOZ ู ahrefs) ูููุณ ูุฏููุง ูุซู ูุฐุง ุงูุดูุก ููุท.  ููุฐุง ุงูุดูุก ูุซูุฑ ููุงูุชูุงู: ุณูุงุก ูู ุญูุซ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุฃู ุงูุงุณุชุฎุฏุงู ุ ูุงูุชูููุฐ ุงูููู. <br><br><img src="https://habrastorage.org/webt/vw/pi/-9/vwpi-9jp8-dypdtmlh58qqa1nm0.jpeg"><br><br>  ุจุงุณุชุฎุฏุงู ูุฐู ุงูููุงูุฉ ุ ุณูุจุฏุฃ ูู ุฅูุดุงุก <s>ุฏุฑุงุฌุฉ</s> ุงูุฒุงุญู ุงูุฎุงุตุฉ ุจู ุจุดูู <b>ูุชูุฑุฑ</b> ุ ูุชุญููู ุงูุนุฏูุฏ ูู ุงูููุฒุงุช ูุนุซุฑุงุช ุงูุงุฌุชูุงุน.  ูู ูุธููุฉ ุนูุฏูุฉ ุจุณูุทุฉ ุฅูู ุฎุฏูุฉ ูุงุจูุฉ ููุชูุณุนุฉ ููุงุจูุฉ ููุชูุณูุน.  ูุฌุจ ุฃู ุชููู ูุซูุฑุฉ ููุงูุชูุงู! <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h3><br>  ุชูุฑุงุฑุง - ููุฐุง ูุนูู ุฃูู ูู ููุงูุฉ ูู ุฅุตุฏุงุฑ ุ ูู ุงููุชููุน ุฅุตุฏุงุฑ ูุณุฎุฉ ุฌุงูุฒุฉ ูู "ุงูููุชุฌ" ูุน ุงููููุฏ ูุงูููุฒุงุช ูุงููุงุฌูุฉ ุงููุชูู ุนูููุง. <br><br>  <b>ุชู</b> ุงุฎุชูุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Node.js</a> ู <b>JavaScript</b> ูููุตุฉ ููุบุฉ ุ ูุฃููุง ุจุณูุทุฉ ูุบูุฑ ูุชุฒุงููุฉ.  ุจุงูุทุจุน ุ ุจุงููุณุจุฉ ููุชูููุฉ ุงูุตูุงุนูุฉ ุ ูุฌุจ ุฃู ูุนุชูุฏ ุงุฎุชูุงุฑ ุงููุงุนุฏุฉ ุงูุชูููููุฌูุฉ ุนูู ูุชุทูุจุงุช ุงูุนูู ูุงูุชููุนุงุช ูุงูููุงุฑุฏ.  ูุชุธุงูุฑุฉ ููููุฐุฌ ุฃููู ุ ูุฅู ูุฐุง ุงููุธุงู ุงูุฃุณุงุณู ููุณ ุดูุฆูุง (IMHO) ุชูุงููุง. <br><br><blockquote style=";text-align:right;direction:rtl">  ูุฐุง ูู ุงูุฒุงุญู ุงูุฎุงุต ุจู.  ููุงู ุงูุนุฏูุฏ ูู ุจุฑุงูุฌ ุงูุฒุญู ูุฐู ุ ููู ูุฐุง ูุงุญุฏ ูู ูู. <br>  ุงูุฒุงุญู ุงูุฎุงุต ุจู ูู ุฃูุถู ุตุฏูู ูู. <br></blockquote><br>  ูุนุฏ ุชูููุฐ ุงูุฒุงุญู ูููุฉ ุดุงุฆุนุฉ ุฅูู ุญุฏ ูุง ููููู ุงูุนุซูุฑ ุนููู ุญุชู ูู ุงูููุงุจูุงุช ุงููููุฉ.  ููุงู ุจุงููุนู ุงููุซูุฑ ูู ุงูุญููู ุงูุฌุงูุฒุฉ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Apache Nutch</a> ) ูุงูุญููู ุงูููุชูุจุฉ ุฐุงุชูุง ูุธุฑูู ูุฎุชููุฉ ููู ุงูุนุฏูุฏ ูู ุงููุบุงุช.  ูุฐูู ุ ุฃู ุชุนูููุงุช ูู ุชุฌุฑุจุฉ ุดุฎุตูุฉ ูู ุงูุชูููุฉ ุฃู ุงูุงุณุชุฎุฏุงู ูู ููุถุน ุชุฑุญูุจ ูุณูู ุชููู ูุซูุฑุฉ ููุงูุชูุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ุจูุงู ุงููุดููุฉ </h3><br>  ุณุชููู ูููุฉ ุงูุชูููุฐ ุงูุฃูู (ุงูุฃููู) ูุจุฑูุงูุฌ <s>ุงูุฒุงุญู tyap-blooper</s> ููุง ููู: <br><br><blockquote style=";text-align:right;direction:rtl">  <b>One-Two Crawler 1.0</b> <br>  ุงูุชุจ ูุตูุง ุฒุงุญููุง ูุชุฎุทู ุฑูุงุจุท <i>&lt;a href /&gt;</i> ุงูุฏุงุฎููุฉ ููููุน ุตุบูุฑ (ุญุชู 100 ุตูุญุฉ).  ูุชูุฌุฉ ูุฐูู ุ ูุฏู ูุงุฆูุฉ ุจุนูุงููู URL ููุตูุญุงุช ุงูุชู ุชุญุชูู ุนูู ุงูุฑููุฒ ุงููุณุชููุฉ ูุฎุฑูุทุฉ ูุฑุจุทูุง.  ูุชู ุชุฌุงูู ููุงุนุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">robots.txt</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณูุฉ rel = nofollow</a> link. </blockquote><br>  <b>ุงูุชุจุงู!</b>  ูุนุฏ ุชุฌุงูู ููุงุนุฏ <i>ููู robots.txt</i> ููุฑุฉ ุณูุฆุฉ ูุฃุณุจุงุจ ูุงุถุญุฉ.  ุณูู ูุนูุถ ูุฐุง ุงูุฅุบูุงู ูู ุงููุณุชูุจู.  ูู ุบุถูู ุฐูู ุ ุฃุถู ูุนููุฉ ุงูุญุฏ ุงูุชู ุชุญุฏ ูู ุนุฏุฏ ุงูุตูุญุงุช ุงูุชู ุณูุชู ุงูุฒุญู ุฅูููุง ุญุชู ูุง ุชุชููู ุนู DoS ูุชุฌุฑุจุฉ ุงููููุน ุงูุชุฌุฑูุจู (ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู "ูููุน ุงููุงูุณุชุฑ" ุงูุดุฎุตู ุงูุฎุงุต ุจู ูุฅุฌุฑุงุก ุงูุชุฌุงุฑุจ). <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชูููุฐ </h3><br>  ููุงุฑุบ ุงูุตุจุฑ ุ <a href="">ูููุง ูู ูุตุงุฏุฑ</a> ูุฐุง ุงูุญู. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนููู HTTP (S) </li><li style=";text-align:right;direction:rtl">  ุฎูุงุฑุงุช ุงูุฅุฌุงุจุฉ </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฑุงุฌ ุงูุงุฑุชุจุงุท </li><li style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ูุตูุฉ ูุชุตููุฉ </li><li style=";text-align:right;direction:rtl">  ุชุทุจูุน URL </li><li style=";text-align:right;direction:rtl">  ุฎูุงุฑุฒููุฉ ุงููุธููุฉ ุงูุฑุฆูุณูุฉ </li><li style=";text-align:right;direction:rtl">  ุนูุฏุฉ ุงููุชูุฌุฉ </li></ol><br><h4 style=";text-align:right;direction:rtl">  1. ุนููู HTTP (S) </h4><br>  ุฃูู ูุง ูุญุชุงุฌ ุฅูู ุงูููุงู ุจู ูู ุ ูู ุงููุงูุน ุ ุฅุฑุณุงู ุงูุทูุจุงุช ูุชููู ุงูุฑุฏูุฏ ุนุจุฑ HTTP ู HTTPS.  ูู node.js ููุฌุฏ ุนูููุงู ูุชุทุงุจูุงู ููุฐุง ุงูุบุฑุถ.  ุจุงูุทุจุน ุ ููููู ุฃู ุชุฃุฎุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุทูุจ ุนููู ุฌุงูุฒูุง</a> ุ ูููู ุจุงููุณุจุฉ ููููุชูุง ููู ุฃูุฑ ุถุฑูุฑู ููุบุงูุฉ: ูุญุชุงุฌ ููุท ุฅูู ุฅุฑุณุงู ุทูุจ GET ูุงูุญุตูู ุนูู ุงุณุชุฌุงุจุฉ ูู ุงูุฌุณู ูุงูุฑุคูุณ. <br><br>  ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API) ูููุง ุงูุนููููู ุงููุฐูู ูุญุชุงุฌููุง ูุชุทุงุจูุฉ ุ ูุณููุดุฆ ุฎุฑูุทุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> clients = { <span class="hljs-string"><span class="hljs-string">'http:'</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>), <span class="hljs-string"><span class="hljs-string">'https:'</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'https'</span></span>) };</code> </pre> <br>  ูุนูู ุนู <i>ุฅุญุถุงุฑ</i> ุฏุงูุฉ ุจุณูุทุฉ ุ ูุงููุนููุฉ ุงููุญูุฏุฉ ูููุง ูู ุนููุงู URL <b>ุงููุทูู</b> ูุณูุณูุฉ ููุงุฑุฏ ุงูููุจ ุงููุทููุจุฉ.  ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุฏุฉ url ุ</a> ุณูููู ุจุชุญููู ุงูุณูุณูุฉ ุงููุงุชุฌุฉ ุฅูู ูุงุฆู URL.  ูุญุชูู ูุฐุง ุงููุงุฆู ุนูู ุญูู ูุน ุงูุจุฑูุชูููู (ูุน ููุทุชูู) ุ ูุงูุฐู ุณูููู ูู ุฎูุงูู ุจุงุฎุชูุงุฑ ุงูุนููู ุงูููุงุณุจ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'url'</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dst</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dstURL = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(dst); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> client = clients[dstURL.protocol]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!client) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Could not select a client for '</span></span> + dstURL.protocol); } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre><br>  ุจุนุฏ ุฐูู ุ ุงุณุชุฎุฏู ุงูุนููู ุงููุญุฏุฏ ููู ูุชูุฌุฉ ุฏุงูุฉ <i>ุงูุฌูุจ</i> ุจูุนุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dst</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... let req = client.get(dstURL.href, res =&gt; { // do something with the response }); req.on('error', err =&gt; reject('Failed on the request: ' + err.message)); req.end(); }); }</span></span></code> </pre><br><br>  ุงูุขู ูููููุง ุชููู ุงุณุชุฌุงุจุฉ ุจุดูู ุบูุฑ ูุชุฒุงูู ุ ููู ูู ุงูููุช ุงูุญุงูู ูุง ููุนู ุฃู ุดูุก ูุนูุง. <br><br><h4 style=";text-align:right;direction:rtl">  2. ุฎูุงุฑุงุช ุงูุฅุฌุงุจุฉ </h4><br>  ููุฒุญู ุฅูู ุงููููุน ุ ูููู ูุนุงูุฌุฉ 3 ุฎูุงุฑุงุช ููุฅุฌุงุจุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุญุณูุง</b> - ุชู ุงุณุชูุงู ููุฏ ุงูุญุงูุฉ 2xx.  ูู ุงูุถุฑูุฑู ุญูุธ ูุต ุงูุงุณุชุฌุงุจุฉ ููุชูุฌุฉ ููุฒูุฏ ูู ุงููุนุงูุฌุฉ - ุงุณุชุฎุฑุงุฌ ุฑูุงุจุท ุฌุฏูุฏุฉ. </li><li style=";text-align:right;direction:rtl">  <b>REDIRECT</b> - ุชู ุงุณุชูุงู ููุฏ ุงูุญุงูุฉ 3xx.  ูุฐุง ูู ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู ุตูุญุฉ ุฃุฎุฑู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุญุชุงุฌ ุฅูู ุนููุงู ุงุณุชุฌุงุจุฉ <i>ุงููููุน</i> ุ ุญูุซ ุณูุฃุฎุฐ ุฑุงุจุทูุง ูุงุญุฏูุง "ุตุงุฏุฑูุง" ูุงุญุฏูุง. </li><li style=";text-align:right;direction:rtl">  <b>NO_DATA</b> - ุฌููุน ุงูุญุงูุงุช ุงูุฃุฎุฑู: 4xx / 5xx ู 3xx ุจุฏูู ุฑุฃุณ <i>ุงููููุน</i> .  ูุง ููุฌุฏ ููุงู ููุฐูุงุจ ุฅูู ุงูุฒุงุญู ูุฏููุง. </li></ol><br>  ุณุชุนูู ูุธููุฉ <i>ุงูุฌูุจ ุนูู</i> ุญู ุงูุงุณุชุฌุงุจุฉ ุงููุนุงูุฌุฉ ูุน ุงูุฅุดุงุฑุฉ ุฅูู ููุนูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ft = { <span class="hljs-string"><span class="hljs-string">'OK'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-comment"><span class="hljs-comment">// code (2xx), content 'REDIRECT': 2, // code (3xx), location 'NO_DATA': 3 // code };</span></span></code> </pre><br>  ุชูููุฐ ุฅุณุชุฑุงุชูุฌูุฉ ุชูููุฏ ุงููุชูุฌุฉ ูู ุฃูุถู ุชูุงููุฏ <i>if</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> code = res.statusCode; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> codeGroup = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(code / <span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-comment"><span class="hljs-comment">// OK if (codeGroup === 2) { let body = []; res.setEncoding('utf8'); res.on('data', chunk =&gt; body.push(chunk)); res.on('end', () =&gt; resolve({ code, content: body.join(''), type: ft.OK })); } // REDIRECT else if (codeGroup === 3 &amp;&amp; res.headers.location) { resolve({ code, location: res.headers.location, type: ft.REDIRECT }); } // NO_DATA (others) else { resolve({ code, type: ft.NO_DATA }); }</span></span></code> </pre><br>  ูุธููุฉ <i>ุงูุฌูุจ</i> ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู: <a href="">ุฑูุฒ ุงููุธููุฉ ุจุงููุงูู</a> . <br><br><h4 style=";text-align:right;direction:rtl">  3. ุงุณุชุฎุฑุงุฌ ุงูุฑูุงุจุท </h4><br>  ุงูุขู ุ ุงุนุชูุงุฏูุง ุนูู ูุชุบูุฑ ุงูุฅุฌุงุจุฉ ุงููุณุชููุฉ ุ ูุฌุจ ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุงุณุชุฎุฑุงุฌ ุงูุงุฑุชุจุงุทุงุช ูู ุจูุงูุงุช ูุชุงุฆุฌ <i>ุงูุฌูุจ</i> ููุฒูุฏ ูู ุงูุฒุญู.  ููููุงู ุจุฐูู ุ ูููู ุจุชุนุฑูู ุฏุงูุฉ <i>ุงูุงุณุชุฎุฑุงุฌ</i> ุ ูุงูุชู ุชุฃุฎุฐ ูุงุฆู ูุชูุฌุฉ ููุฏุฎูุงุช ูุฅุฑุฌุงุน ูุฌููุนุฉ ูู ุงูุฑูุงุจุท ุงูุฌุฏูุฏุฉ. <br><br>  ุฅุฐุง ูุงู ููุน ุงููุชูุฌุฉ REDIRECT ุ ูุณูู ุชูุฑุฌุน ุงูุฏุงูุฉ ุตููููุง ุจูุฑุฌุน ูุงุญุฏ ูู ุญูู <i>ุงููููุน</i> .  ุฅุฐุง NO_DATA ุ ุซู ูุฌููุนุฉ ูุงุฑุบุฉ.  ุฅุฐุง ูุงู ููุงูู ุ ูุณูุญุชุงุฌ ุฅูู ุชูุตูู ุงููุญูู ุงููุบูู <i>ูููุญุชูู</i> ุงููุตู ุงููุนุฑูุถ ููุจุญุซ. <br><br>  ุจุงููุณุจุฉ ุฅูู ูููุฉ ุงูุจุญุซ <i>&lt;a href /&gt; ุ</i> ููููู ุฃูุถูุง ูุชุงุจุฉ ุชุนุจูุฑ ุนุงุฏู.  ููู ูุฐุง ุงูุญู ูุง ูุชุบูุฑ ุนูู ุงูุฅุทูุงู ุ ูุฃููุง ูู ุงููุณุชูุจู ุณููุชู ุนูู ุงูุฃูู ุจุงูุณูุงุช ุงูุฃุฎุฑู ( <i>rel</i> ) ููุฑุงุจุท ุ ูุญุฏ ุฃูุตู ุ ุณูู ูููุฑ ูู <i>img</i> <i>ูุงูุฑุงุจุท</i> <i>ูุงููุต ุงูุจุฑูุฌู</i> <i>ูุงูุตูุช / ุงูููุฏูู</i> ( <i>ุงููุตุฏุฑ</i> ) ูุบูุฑูุง ูู ุงูููุงุฑุฏ.  ูุนุฏ ุชุญููู ูุต ุงููุณุชูุฏ ุฃูุซุฑ ูุนุฏูุง ูุฃูุซุฑ ููุงุกูุฉู ุ ูุจูุงุก ุดุฌุฑุฉ ูู ุงูุนูุฏ ูุชุฌุงูุฒ ุงููุญุฏุฏุงุช ุงููุนุชุงุฏุฉ. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุณุชุฎุฏู</a> ููุชุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">JSDOM</a> ุงูุดุงุฆุนุฉ ููุนูู ูุน DOM ูู node.js: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { JSDOM } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jsdom'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JSDOM(fetched.content).window.document; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> elements = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'A'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(elements) .map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> el.getAttribute(<span class="hljs-string"><span class="hljs-string">'href'</span></span>)) .filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">href</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> href === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) .map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">href</span></span></span><span class="hljs-function"> =&gt;</span></span> href.trim()) .filter(<span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>);</code> </pre><br>  ูุญุตู ุนูู ุฌููุน ุงูุนูุงุตุฑ <i>A</i> ูู ุงููุซููุฉ ุ ููู ุซู ูู ุงูููู ุงููุตูุงุฉ ูุณูุฉ <i>href</i> ุ ุฅู ูู ุชูู ุงูุฎุทูุท ุงููุงุฑุบุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  4. ุฅุนุฏุงุฏ ูุชุตููุฉ ุงูุฑูุงุจุท </h4><br>  ูุชูุฌุฉ ูููุณุชุฎุฑุฌ ุ ูุฏููุง ูุฌููุนุฉ ูู ุงูุฑูุงุจุท (ุนูุงููู URL) ููุดููุชุงู: 1) ูููู ุฃู ูููู ุนููุงู URL ูุณุจููุง ู 2) ูููู ุฃู ูุคุฏู ุนููุงู URL ุฅูู ููุฑุฏ ุฎุงุฑุฌู (ูุญุชุงุฌ ููุท ุฅูู ุฑูุงุจุท ุฏุงุฎููุฉ ุงูุขู). <br><br>  ุณูุชู ูุณุงุนุฏุฉ ุงููุดููุฉ ุงูุฃููู ุนู ุทุฑูู ูุธููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">url.resolve</a> ุ ุงูุชู ุชุญู ุนููุงู URL ููุตูุญุฉ ุงูููุตูุฏุฉ ูุณุจุฉ ุฅูู ุนููุงู URL ููุตูุญุฉ ุงููุตุฏุฑ. <br><br>  ูุญู ุงููุดููุฉ ุงูุซุงููุฉ ุ ููุชุจ ูุธููุฉ ุฃุฏุงุฉ ุจุณูุทุฉ <i>inScope</i> ุชููู ุจูุญุต ูุถูู ุงูุตูุญุฉ ุงูููุตูุฏุฉ ููุงุจู ูุถูู ุนููุงู URL ุงูุฃุณุงุณู ูุนูููุฉ ุงูุฒุญู ุงูุญุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLowerHost</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dst</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(dst)).hostname.toLowerCase(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inScope</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dst, base</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dstHost = getLowerHost(dst); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> baseHost = getLowerHost(base); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = dstHost.indexOf(baseHost); <span class="hljs-comment"><span class="hljs-comment">// the same domain or has subdomains return i === 0 || dstHost[i - 1] === '.'; }</span></span></code> </pre><br>  ุชุจุญุซ ุงููุธููุฉ ุนู ุณูุณูุฉ ูุฑุนูุฉ ( <i>baseHost</i> ) ูุน ุชุญุฏูุฏ ููุญุฑู ุงูุณุงุจู ุฅุฐุง ุชู ุงูุนุซูุฑ ุนูู ุงูุณูุณูุฉ ุงููุฑุนูุฉ: ุจูุง ุฃู <i>wwwexample.com</i> ู <i>example.com</i> <i>ูุฌุงูุงู</i> ูุฎุชููุงู.  ูุชูุฌุฉ ูุฐูู ุ ูุง ูุชุฑู ุงููุฌุงู ุงููุญุฏุฏ ุ ูููู ูุชุฌุงูุฒ ูุทุงูุงุชู ุงููุฑุนูุฉ. <br><br>  ูููู ุจุชุญุณูู ูุธููุฉ <i>ุงูุงุณุชุฎุฑุงุฌ</i> ุจุฅุถุงูุฉ "ูุทูู" ูุชุตููุฉ ุงูุฑูุงุจุท ุงููุงุชุฌุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extract</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fetched, src, base</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> extractRaw(fetched) .map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">href</span></span></span><span class="hljs-function"> =&gt;</span></span> url.resolve(src, href)) .filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dst</span></span></span><span class="hljs-function"> =&gt;</span></span> /^https?\:\/\<span class="hljs-comment"><span class="hljs-comment">//i.test(dst)) .filter(dst =&gt; inScope(dst, base)); }</span></span></code> </pre><br>  <i>ุงูุฌูุจ</i> ููุง ูู ูุชูุฌุฉ ุฏุงูุฉ <i>ุงูุฌูุจ</i> ุ <i>src</i> ูู ุนููุงู URL ููุตูุญุฉ ุงููุตุฏุฑ ุ <i>ูุงููุงุนุฏุฉ</i> ูู ุนููุงู URL ุงูุฃุณุงุณู ูุนูููุฉ ุงูุฒุญู.  ูู ุงูุฅุฎุฑุงุฌ ุ ูุญุตู ุนูู ูุงุฆูุฉ ุจุงูุฑูุงุจุท ุงูุฏุงุฎููุฉ ุงููุทููุฉ (ุนูุงููู URL) ููุฒูุฏ ูู ุงููุนุงูุฌุฉ.  ูููู <a href="">ุฑุคูุฉ</a> ุฑูุฒ ุงููุธููุฉ ุจุงููุงูู <a href="">ููุง</a> . <br><br><h4 style=";text-align:right;direction:rtl">  5. ุชุทุจูุน URL </h4><br>  ุนูุฏ ููุงุฌูุฉ ุฃู ุนููุงู URL ุ ูู ุชุญุชุงุฌ ุฅูู ุฅุฑุณุงู ุทูุจ ุขุฎุฑ ููููุฑุฏ ุ ูุธุฑูุง ูุฃู ุงูุจูุงูุงุช ูุฏ ุชู ุงุณุชูุงููุง ุจุงููุนู (ุฃู ุฃู ุงุชุตุงููุง ุขุฎุฑ ูุง ูุฒุงู ููุชูุญูุง ูููุชุธุฑ ุงูุฑุฏ).  ูููู ูุง ูููู ุฏุงุฆููุง ููุงุฑูุฉ ุณูุงุณู ุนููุงููู URL ูููู ุฐูู.  ุงูุชุทุจูุน ูู ุงูุฅุฌุฑุงุก ุงูุถุฑูุฑู ูุชุญุฏูุฏ ุชูุงูุค ุนูุงููู URL ุงููุฎุชููุฉ ุจุดูู ูุญูู. <br><br>  ุนูููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุทุจูุน</a> ูู ูุฌููุนุฉ ูุงููุฉ ูู ุงูุชุญูููุงุช ุงููุทุจูุฉ ุนูู ุนููุงู URL ุงููุตุฏุฑ ูููููุงุชู.  ูููุง ููู ุนุฏุฏ ูููู ูููุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุฎุทุท ูุงููุถูู ููุณุช ุญุณุงุณุฉ ูุญุงูุฉ ุงูุฃุญุฑู ุ ูุฐูู ูุฌุจ ุชุญููููุง ุฅูู ุฃูู. </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููู ุฌููุน ุงููุณุจ ุงููุฆููุฉ (ูุซู "ูช 3A") ูุจูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ูููู ุฅุฒุงูุฉ ุงููููุฐ ุงูุงูุชุฑุงุถู (80 ูู HTTP). </li><li style=";text-align:right;direction:rtl">  ุงูุฌุฒุก ( <i>#</i> ) ุบูุฑ ูุฑุฆู ุฃุจุฏูุง ุนูู ุงูุฎุงุฏู ููููู ุฃูุถูุง ุญุฐูู. </li></ul><br>  ููููู ุฏุงุฆููุง ุงุณุชุฎุฏุงู ุดูุก ุฌุงูุฒ (ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุทุจูุน ุนููุงู url</a> ) ุฃู ูุชุงุจุฉ ูุธููุชู ุงูุจุณูุทุฉ ุงูุชู ุชุบุทู ุฃูู ุงูุญุงูุงุช ุงูุดุงุฆุนุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">normalize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dst</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dstUrl = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(dst); <span class="hljs-comment"><span class="hljs-comment">// ignore userinfo (auth property) let origin = dstUrl.protocol + '//' + dstUrl.hostname; // ignore http(s) standart ports if (dstUrl.port &amp;&amp; (!/^https?\:/i.test(dstUrl.protocol) || ![80, 8080, 443].includes(+dstUrl.port))) { origin += ':' + dstUrl.port; } // ignore fragment (hash property) let path = dstUrl.pathname + dstUrl.search; // convert origin to lower case return origin.toLowerCase() // and capitalize letters in escape sequences + path.replace(/%([0-9a-f]{2})/ig, (_, es) =&gt; '%' + es.toUpperCase()); }</span></span></code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุท ูู ุญุงูุฉ ุชูุณูู ูุงุฆู URL</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zs/te/jr/zstejr_mjpparhgrr4aar6ma7nq.png"><br></div></div><br>  ูุนู ุ ูุง ููุฌุฏ ูุฑุฒ ููุนููุงุช ุงูุงุณุชุนูุงู ุ ูุชุฌุงูู ุนูุงูุงุช utm ุ ููุนุงูุฌุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">_escaped_fragment_</a> ูุฃุดูุงุก ุฃุฎุฑู ุ ูุง ูุญุชุงุฌูุง (ูุทูููุง) ุนูู ุงูุฅุทูุงู. <br><br>  ุจุนุฏ ุฐูู ุ ุณููุดุฆ ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูุญููุฉ ูุนูุงููู URL ุงูุชู ุชู ุชุทุจูุนูุง ูุงูุชู ูุทูุจูุง ุฅุทุงุฑ ุงูุฒุญู.  ูุจู ุฅุฑุณุงู ุงูุทูุจ ุงูุชุงูู ุ ูููู ุจุชุทุจูุน ุนููุงู URL ุงููุณุชูู ุ ูุฅุฐุง ูู ููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูุฃุถูู ุซู ุฃุฑุณู ุทูุจูุง ุฌุฏูุฏูุง ููุท. <br><br><h4 style=";text-align:right;direction:rtl">  6. ุฎูุงุฑุฒููุฉ ุงููุธููุฉ ุงูุฑุฆูุณูุฉ </h4><br>  ุงูููููุงุช ุงูุฃุณุงุณูุฉ (ุงูุจุฏุงุฆูุฉ) ูู ุงูุญู ุฌุงูุฒุฉ ุ ููุฏ ุญุงู ุงูููุช ููุจุฏุก ูู ุฌูุน ูู ุดูุก ูุนูุง.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฏุนูุง ูุญุฏุฏ ุชูููุน ูุธููุฉ <i>ุงูุฒุญู</i> : ุนูุฏ ุงูุฅุฏุฎุงู ุ ุนููุงู URL ููุจุฏุงูุฉ ูุญุฏ ุงูุตูุญุฉ.  ุชุฑุฌุน ุงูุฏุงูุฉ ูุนุฏูุง ูููุฑ ุญูู ูุชูุฌุฉ ูุชุฑุงููุฉ ุ  ุงูุชุจูุง ุฅูู ููู <i>ุงูุฅุฎุฑุงุฌ</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">crawl(start, limit).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> =&gt;</span></span> { fs.writeFile(output, <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(result), <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>, err =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> err; }); });</code> </pre><br>  ูููู ูุตู ุฃุจุณุท ุณูุฑ ุนูู ูุชูุฑุฑ ููุธููุฉ ุงูุฒุญู ูู ุงูุฎุทูุงุช: <br><br><blockquote style=";text-align:right;direction:rtl">  1. ุชููุฆุฉ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุงุฆู ุงููุชูุฌุฉ <br>  2. ุฅุฐุง ูู ููู ุนููุงู URL ููุตูุญุฉ ุงูููุตูุฏุฉ (ุนุจุฑ <b>ุงูุชุทุจูุน</b> ) ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูุญููุฆุฐู <br>  - 2.1.  ุฅุฐุง <i>ุชู</i> ุงููุตูู ุฅูู <i>ุงูุญุฏ</i> ุ END (ุงูุชุธุฑ ุงููุชูุฌุฉ) <br>  - 2.2.  ุฅุถุงูุฉ URL ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช <br>  - 2.3.  ุญูุธ ุงูุฑุงุจุท ุจูู ุงููุตุฏุฑ ูุงูุตูุญุฉ ุงูููุตูุฏุฉ ูู ุงููุชูุฌุฉ <br>  - 2.4.  ุฅุฑุณุงู ุทูุจ ุบูุฑ ูุชุฒุงูู ููู ุตูุญุฉ ( <b>ุฌูุจ</b> ) <br>  - 2.5.  ุฅุฐุง ูุงู ุงูุทูุจ ูุงุฌุญูุง ุ ูุนูุฏุฆุฐู <br>  - - 2.5.1.  ุงุณุชุฎุฑุงุฌ ุฑูุงุจุท ุฌุฏูุฏุฉ ูู ุงููุชูุฌุฉ ( <b>ุงุณุชุฎุฑุงุฌ</b> ) <br>  - - 2.5.2.  ููู ุฑุงุจุท ุฌุฏูุฏ ุ ูู ุจุชูููุฐ ุงูุฎูุงุฑุฒููุฉ 2-3 <br>  - 2.6.  ELSE ุจููุงุณุจุฉ ุงูุตูุญุฉ ูุฎุทุฃ <br>  - 2.7.  ุญูุธ ุจูุงูุงุช ุงูุตูุญุฉ ูููุชูุฌุฉ <br>  - 2.8.  ุฅุฐุง ูุงูุช ูุฐู ูู ุงูุตูุญุฉ ุงูุฃุฎูุฑุฉ ุ ุฃุญุถุฑ ุงููุชูุฌุฉ <br>  3. ุนุฏุง ุฐูู ุ ุงุญูุธ ุงูุฑุงุจุท ุจูู ุงููุตุฏุฑ ูุงูุตูุญุฉ ุงูููุตูุฏุฉ ูู ุงููุชูุฌุฉ <br></blockquote><br>  <b>ูุนู ุ ุณุชุฎุถุน ูุฐู ุงูุฎูุงุฑุฒููุฉ ูุชุบููุฑุงุช ูุจูุฑุฉ ูู ุงููุณุชูุจู.</b>  ุงูุขู ุ ูุชู ุงุณุชุฎุฏุงู ุญู ุชูุฑุงุฑู ุจุดูู ูุชุนูุฏ ุนูู ุงูุฌุจูุฉ ุ ูุฐูู ูู ููุช ูุงุญู ูู ุงูุฃูุถู ุฃู "ุชุดุนุฑ" ุจุงููุฑู ูู ุงูุชุทุจููุงุช.  ุชุจุฏู ูุทุนุฉ ุงูุนูู ูุชูููุฐ ุงููุธููุฉ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crawl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">start, limit = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">100</span></span></span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// initialize cache &amp; result return new Promise((resolve, reject) =&gt; { function curl(src, dst) { // check dst in the cache &amp; pages limit // save the link (src -&gt; dst) to the result fetch(dst).then(fetched =&gt; { extract(fetched, dst, start).forEach(ln =&gt; curl(dst, ln)); }).finally(() =&gt; { // save the page's data to the result // check completion and resolve the result }); } curl(null, start); }); }</span></span></code> </pre><br>  ูุชู ุงูุชุญูู ูู ุชุญููู ุญุฏ ุงูุตูุญุฉ ูู ุฎูุงู ุนุฏุงุฏ ุทูุจ ุจุณูุท.  ุณูููู ุงูุนุฏุงุฏ ุงูุซุงูู - ุนุฏุฏ ุงูุทูุจุงุช ุงููุดุทุฉ ูู ูู ูุฑุฉ - ุจูุซุงุจุฉ ุงุฎุชุจุงุฑ ุงูุฌุงูุฒูุฉ ูุฅุนุทุงุก ุงููุชูุฌุฉ (ุนูุฏูุง ุชุชุญูู ุงููููุฉ ุฅูู ุงูุตูุฑ).  ุฅุฐุง ุชุนุฐุฑ ุนูู ูุธููุฉ <i>ุงูุฌูุจ</i> ุงูุญุตูู ุนูู ุงูุตูุญุฉ ุงูุชุงููุฉ ุ ููู ุจุชุนููู ููุฏ ุงูุญุงูุฉ ุนูู ุฃููุง ุฎุงููุฉ. <br><br>  ููููู (ุงุฎุชูุงุฑููุง) <a href="">ุงูุชุนุฑู</a> ุนูู ุฑูุฒ ุงูุชูููุฐ <a href="">ููุง</a> ุ ูููู ูุจู ุฐูู ูุฌุจ ุฃู ุชููุฑ ูู ุชูุณูู ุงููุชูุฌุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง. <br><br><h4 style=";text-align:right;direction:rtl">  7. ุนุงุฏ ูุชูุฌุฉ </h4><br>  ุณููุฏู <i>ูุนุฑู ูุนุฑู</i> ูุฑูุฏูุง ูุน ุฒูุงุฏุฉ ุจุณูุทุฉ ููุตูุญุงุช ุงูุชู ุชู ุงุณุชุทูุงุนูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> cache = {}; <span class="hljs-comment"><span class="hljs-comment">// ... let dstNorm = normalize(dst); if (dstNorm in cache === false) { cache[dstNorm] = ++id; // ... }</span></span></code> </pre><br>  ูููุชูุฌุฉ ุ ุณููุดุฆ ูุฌููุนุฉ ูู <i>ุงูุตูุญุงุช</i> ุงูุชู ุณูุถูู ุฅูููุง ูุงุฆูุงุช ุชุญุชูู ุนูู ุจูุงูุงุช ุนูู ุงูุตูุญุฉ: <i>id</i> {number} ุ <i>url</i> {string} ู <i>code</i> {number | null} (ูุฐุง ูููู ุงูุขู).  ูููู ุฃูุถูุง ุจุฅูุดุงุก ูุฌููุนุฉ ูู <i>ุงูุฑูุงุจุท</i> ููุงุฑุชุจุงุทุงุช ุจูู ุงูุตูุญุงุช ูู ุดูู ูุงุฆู: <i>ูู</i> ( <i>ูุนุฑู</i> ุงูุตูุญุฉ ุงููุตุฏุฑ) <i>ุฅูู</i> ( <i>ูุนุฑู</i> ุงูุตูุญุฉ ุงูููุตูุฏุฉ). <br><br>  ูุฃุบุฑุงุถ ุฅุนูุงููุฉ ุ ูุจู ุญู ุงููุชูุฌุฉ ุ ูููู ุจุชุตููู ูุงุฆูุฉ ุงูุตูุญุงุช ุจุชุฑุชูุจ ุชุตุงุนุฏู ูู <i>ุงููุนุฑู</i> (ุจุนุฏ ูู ุดูุก ุ ุณุชุฃุชู ุงูุฅุฌุงุจุงุช ุจุฃู ุชุฑุชูุจ) ุ ููููู ุงููุชูุฌุฉ ุจุนุฏุฏ ุตูุญุงุช <i>ุงููุฑุฒ</i> ุงูููุณูุญุฉ ุถูุฆููุง ูุนูุงูุฉ ุงููุตูู ุฅูู ุงูุญุฏ ุงูุฃูุตู ุงููุญุฏุฏ <i>ููุตููุฉ</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">resolve({ <span class="hljs-attr"><span class="hljs-attr">pages</span></span>: pages.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">p1, p2</span></span></span><span class="hljs-function">) =&gt;</span></span> p1.id - p2.id), <span class="hljs-attr"><span class="hljs-attr">links</span></span>: links.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l1, l2</span></span></span><span class="hljs-function">) =&gt;</span></span> l1.from - l2.from || l1.to - l2.to), count, <span class="hljs-attr"><span class="hljs-attr">fin</span></span>: count &lt; limit });</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ูุซุงู ููุงุณุชุฎุฏุงู </h3><br>  ูุญุชูู ุจุฑูุงูุฌ ุงูุฒุงุญู ุงูููุงุฆู ุนูู ุงูููุฎุต ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">node crawl-cli.js --start="&lt;URL&gt;" [--output="&lt;filename&gt;"] [--limit=&lt;int&gt;]</code> </pre><br>  ูุงุณุชููุงู ุชุณุฌูู ุงูููุงุท ุงูุฑุฆูุณูุฉ ููุนูููุฉ ุ ุณูุฑู ูุฐู ุงูุตูุฑุฉ ุนูุฏ ุจุฏุก ุงูุชุดุบูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ node crawl-cli.js --start="https://google.com" --limit=20 [2019-02-26T19:32:10.087Z] Start crawl "https://google.com" with limit 20 [2019-02-26T19:32:10.089Z] Request (#1) "https://google.com/" [2019-02-26T19:32:10.721Z] Fetched (#1) "https://google.com/" with code 301 [2019-02-26T19:32:10.727Z] Request (#2) "https://www.google.com/" [2019-02-26T19:32:11.583Z] Fetched (#2) "https://www.google.com/" with code 200 [2019-02-26T19:32:11.720Z] Request (#3) "https://play.google.com/?hl=ru&amp;tab=w8" [2019-02-26T19:32:11.721Z] Request (#4) "https://mail.google.com/mail/?tab=wm" [2019-02-26T19:32:11.721Z] Request (#5) "https://drive.google.com/?tab=wo" ... [2019-02-26T19:32:12.929Z] Fetched (#11) "https://www.google.com/advanced_search?hl=ru&amp;authuser=0" with code 200 [2019-02-26T19:32:13.382Z] Fetched (#19) "https://translate.google.com/" with code 200 [2019-02-26T19:32:13.782Z] Fetched (#14) "https://plus.google.com/108954345031389568444" with code 200 [2019-02-26T19:32:14.087Z] Finish crawl "https://google.com" on count 20 [2019-02-26T19:32:14.087Z] Save the result in "result.json"</code> </pre><br>  ูููุง ุงููุชูุฌุฉ ุจุชูุณูู JSON: <br><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"pages"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://google.com/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">301</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://www.google.com/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://play.google.com/?hl=ru&amp;tab=w8"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">302</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://mail.google.com/mail/?tab=wm"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">302</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://drive.google.com/?tab=wo"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">302</span></span> }, // ... { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://translate.google.com/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://calendar.google.com/calendar?tab=wc"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">302</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"links"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }, // ... { <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">19</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"count"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fin"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br><br>  ูุง ุงูุฐู ูููู ุงูููุงู ุจู ูุน ูุฐุง ุจุงููุนูุ  ูุญุฏ ุฃุฏูู ุ ูุงุฆูุฉ ุงูุตูุญุงุช ุงูุชู ููููู ุฃู ุชุฌุฏ ุฌููุน ุตูุญุงุช ุงููููุน ุงูููุณูุฑุฉ.  ูุงูุญุตูู ุนูู ูุนูููุงุช ุญูู ุงูุงุฑุชุจุงุท ุงูุฏุงุฎูู ุ ููููู ุงูุชุดุงู ุณูุงุณู ุทูููุฉ (ูุญููุงุช ูุบููุฉ) ูู ุนูููุงุช ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฃู ุงูุนุซูุฑ ุนูู ุฃูู ุงูุตูุญุงุช ุญุณุจ ุงููุชูุฉ ุงููุฑุฌุนูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฅุนูุงู 2.0 </h3><br>  ููุฏ ุญุตููุง ุนูู ูุชุบูุฑ ูู ุฃุจุณุท ุจุฑุงูุฌ ุงูุฒุงุญู ุงูุชู ุชุชุฌุงูุฒ ุตูุญุงุช ูููุน ูุงุญุฏ.  ุดูุฑุฉ ุงููุตุฏุฑ <a href="">ููุง</a> .  ููุงู ุฃูุถุง ูุซุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฎุชุจุงุฑุงุช ูุญุฏุฉ</a> ูุจุนุถ ุงููุธุงุฆู. <br><br>  ุงูุขู ูุฐุง ูุฑุณู ุบูุฑ ูุชุฌุงูุณ ููุทูุจุงุช ูุณุชููู ุงูุฎุทูุฉ ุงููุนูููุฉ ุงูุชุงููุฉ ูู ุชุนูููู ุณููููุง ุฌูุฏูุง.  ุณูููู ุญูู ุฑุฃุณ <i>ูููู ุงููุณุชุฎุฏู</i> ุ ูููุงุนุฏ <i>robots.txt</i> ุ ูุชูุฌูู <i>ุชุฃุฎูุฑ ุงูุฒุญู</i> ุ ูุงููุฒูุฏ.  ูู ูุฌูุฉ ูุธุฑ ุงูุชูููุฐ ุ ูุฐุง ุฃููุงู ููุจู ูู ุดูุก ูุตุทู ูู ุทูุงุจูุฑ ุงูุฑุณุงุฆู ุซู ูุฎุฏู ุนุจุก ุฃูุจุฑ.  <i>ุฅุฐุง ุ ุจุงูุทุจุน ุ ูุฐู ุงููุงุฏุฉ ุณุชููู ูุซูุฑุฉ ููุงูุชูุงู!</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar441024/">https://habr.com/ru/post/ar441024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar441012/index.html">ุญูุงุฆู ูุซูุฑุฉ ููุงูุชูุงู ุญูู ุชุงุฑูุฎ ุงูุจุฑูุงูุฌ ุงูููุฑู ุงูุตููู ููููุฉ ุงููุถุงุก Chang'e-4</a></li>
<li><a href="../ar441014/index.html">ุนุฑุถ ุงุณุชุฑูู ููุฎูุถ ุงูููุฒุงููุฉ ูู ุณุทูุฑ ููููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ (ุตูุฑุฉ ูุฌุณูุฉ ุ ุงูููุด ุ ูุฌุณูุฉ)</a></li>
<li><a href="../ar441018/index.html">ุฃุฏูุงุช ุชุทููุฑ ูููุงุตูุงุช ุจุฑูุงูุฌ ูููุงูููุง NanoCAD</a></li>
<li><a href="../ar441020/index.html">ููู ุฌุงุก VTB ุฅูู ูุนุฑูุฉ ูุงุญุฏุฉ</a></li>
<li><a href="../ar441022/index.html">ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูุฑูุงุจ ุงูุณูู ุงูุญุฏูุฏูุฉ ูุดุฑูุงุช ุงูุทูุฑุงู</a></li>
<li><a href="../ar441026/index.html">ุจุฑูุงูุฌ VMware NSX ูุฃุตุบุฑ ุงูุฌุฒุก 2. ุชูููู ุฌุฏุงุฑ ุงูุญูุงูุฉ ู NAT</a></li>
<li><a href="../ar441028/index.html">ููู ููุชุดู ุงูุจุงุญุซูู ููุงุนุฏ ุจูุงูุงุช MongoDB ู Elasticsearch ุงูููุชูุญุฉ</a></li>
<li><a href="../ar441030/index.html">ุงููุดู ุนู ุงููุฌูุงุช ุนูู ุดุจูุฉ ุงูุฅูุชุฑูุช ูุน Seq2Seq Autencoder</a></li>
<li><a href="../ar441032/index.html">ููุจู ุตูุน ููุญุฉ ููุงุชูุญ USB ุงูุฎุงุตุฉ ุจู ูู ุงูุตูุฑ</a></li>
<li><a href="../ar441034/index.html">6 ููุงุท ูููู ุงูุชุญููู ุฃู ููููุฉ ุฒูุงุฏุฉ ุงูุซูุฉ ุจุงุณุชุฎุฏุงู ุงููุงุชู ุนูู ุงููููุน</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>