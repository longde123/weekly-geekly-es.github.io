<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯд╖ЁЯП╗ ЁЯЪЛ ЁЯСиЁЯП╛тАНЁЯдЭтАНЁЯСиЁЯП╝ рд╣рдо рд▓рд┐рд╕реНрдк - III рдореЗрдВ рдПрдХ рд╕рд░рд▓ рдЕрдиреБрд╡рд╛рджрдХ рд▓рд┐рдЦрддреЗ рд╣реИрдВ ЁЯНИ ЁЯИ╡ ЁЯХЬ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓рд╛ рд▓реЗрдЦ 

 рддреНрд░реБрдЯрд┐рдпрд╛рдВ, рддреНрд░реБрдЯрд┐рдпрд╛рдВ, рддреНрд░реБрдЯрд┐рдпрд╛рдВ ... 
 рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╕реЗ рдПрдХ рдЕрдЪреНрдЫрд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрд╣ рдмрд┐рд▓реНрдХреБрд▓ рдирд┐рд╢реНрдЪрд┐рдд рд╣реИред рдЧрд▓рддрд┐рдпреЛрдВ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╣рдо рд▓рд┐рд╕реНрдк - III рдореЗрдВ рдПрдХ рд╕рд░рд▓ рдЕрдиреБрд╡рд╛рджрдХ рд▓рд┐рдЦрддреЗ рд╣реИрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423663/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓рд╛ рд▓реЗрдЦ</a> <br><br><h3>  рддреНрд░реБрдЯрд┐рдпрд╛рдВ, рддреНрд░реБрдЯрд┐рдпрд╛рдВ, рддреНрд░реБрдЯрд┐рдпрд╛рдВ ... </h3><br>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╕реЗ рдПрдХ рдЕрдЪреНрдЫрд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рдмрд┐рд▓реНрдХреБрд▓ рдирд┐рд╢реНрдЪрд┐рдд рд╣реИред  рдЧрд▓рддрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ, рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдмреЗрд╣рддрд░ рдЪреЗрддрд╛рд╡рдиреА рджреА рдЧрдИ рд╣реИ (рд░реЛрдХрдерд╛рдо рд╣рдореЗрд╢рд╛ рдЗрд▓рд╛рдЬ рд╕реЗ рдмреЗрд╣рддрд░ рд╣реИ!)ред  рдПрд░реЛрдмреЗрдЯрд┐рдХреНрд╕ - рдЗрд╕рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрд╡рд╛рдж рдмрдирд╛рдПрдВ рддрд╛рдХрд┐ рдмрд╛рдж рд╡рд╛рд▓реЗ рдмрд╕ рдЧрд▓рддреА рди рдХрд░ рд╕рдХреЗрдВред <br><a name="habracut"></a><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЗрдирдкреБрдЯ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдПрдХ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкреВрд░реНрдгрд╛рдВрдХ рджрд░реНрдЬ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдЖрдк рдЙрддреНрддрд░ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдпрджрд┐ рдЖрдк рдЧреИрд░-рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рд╡рд░реНрдг рдкрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЪреЗрддрд╛рд╡рдиреА рджреЗрдВ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЗрдирдкреБрдЯ рджреЛрд╣рд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдВред  рд▓реЗрдХрд┐рди рдпрд╣ рдХреЗрд╡рд▓ рдЧреИрд░-рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рд╡рд░реНрдгреЛрдВ рдХреЗ рдЗрдирдкреБрдЯ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рд╣реИ! <br><br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдРрд╕реА рддрдХрдиреАрдХ рд╣рдореЗрд╢рд╛ рд▓рд╛рдЧреВ рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдЕрдиреБрд╡рд╛рджрдХ рдХреЗ рдЗрдирдкреБрдЯ рдореЗрдВ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдбрд┐рдЬрд╝рд╛рдЗрдиреЛрдВ рдХреА рд╡рд┐рд╡рд┐рдзрддрд╛ рдЗрдирдкреБрдЯ рдорд╛рд╕реНрдХ рдХреЛ рд╕реЗрдЯ рдХрд░рдХреЗ "рдЧрд▓рдд рд▓реЛрдЧреЛрдВ рдХреЛ рдХрд╛рдЯрдиреЗ" рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдмрдбрд╝реА рд╣реИред <br><br>  рдХрд┐рд╕реА рд╡реНрдпрдХреНрддрд┐ рдХреЛ рдЧрд▓рддрд┐рдпрд╛рдБ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╣реИ, рдФрд░ рдЕрдиреБрд╡рд╛рджрдХ рдХреЛ рдЧрд▓рдд рднрд╛рд╖рд╛ рдирд┐рд░реНрдорд╛рдг рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рд╕реНрдкрд╖реНрдЯ рдирд┐рджрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ, рддреЛ рд╕рднреА рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд░реЛрдд рдкрд╛рда рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдВред  рдпрджрд┐ рдЕрдиреБрд╡рд╛рджрдХ "рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдПрдХ рдмрд╛рд░ рдореЗрдВ" рдкрдХрдбрд╝рддрд╛ рд╣реИ, рддреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕реЗ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдФрд░ рдпрд╣ рдПрдХ рд╕рд┐рд╕реНрдЯрдо рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде рдПрдХ рдХрд╛рд░реНрдпрдХреНрд░рдо "рдХреНрд░реИрд╢" рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдкрд╣рдЪрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрдХреБрд▓ рдЕрд╕реНрд╡реАрдХрд╛рд░реНрдп рд╣реИред <br>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рдХреЛрдб рдХреЛ рдЧрдВрднреАрд░ рд░реВрдк рд╕реЗ рджреЗрдЦреЗрдВрдЧреЗ, рдФрд░ рд╕рдВрднрд╛рд╡рд┐рдд рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд░реЛрдХрдиреЗ (рдкреНрд░рдХреНрд░рд┐рдпрд╛) рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВрдЧреЗред <br><br>  рдЪрд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реНрдЯрд╛рд░реНрдЯ рдлрдВрдХреНрд╢рди рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рд╡рд╣ рдХреНрдпрд╛ рдХрд░ рд░рд╣реА рд╣реИ?  рд╡рд╣ рдЗрдирдкреБрдЯ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рд▓реЗрддреА рд╣реИ, рдЙрд╕реЗ рдЦреЛрд▓рддреА рд╣реИ, рдФрд░ рд▓рд╛рдЗрди рджреНрд╡рд╛рд░рд╛ рд▓рд╛рдЗрди рдмрдирд╛рддреА рд╣реИред  рдРрд╕реЗ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдкрд░рд┐рджреГрд╢реНрдп рдкрд╣рд▓реЗ рд╕реЗ рд╣реА "рдмрд╕реЗ" рд╣реИ - рдЗрд╕реЗ рд╡рд┐рд╣рд┐рдд рдорд╛рдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><ul><li>  рдпрджрд┐ рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рддреЛ рдорд╛рдирдХ "рдУрдкрди" рдбрд╛рдпрд▓реЙрдЧ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ; </li><li>  рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдиреЗ "рдУрдкрди" рд╕рдВрд╡рд╛рдж рдореЗрдВ "рдЗрдВрдХрд╛рд░" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд┐рдпрд╛ - рдмрдВрдж рдХрд░реЗрдВ; </li><li>  рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рджрд┐рдП рдЧрдП / рджрд░реНрдЬ рдирд╛рдо рд╡рд╛рд▓реА рдлрд╛рдЗрд▓ рдореМрдЬреВрдж рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдпрджрд┐ рдпрд╣ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ, рддреЛ рдПрдХ рд╕рдВрджреЗрд╢ рдЬрд╛рд░реА рдХрд░реЗрдВ рдФрд░ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ; </li><li>  рдпрджрд┐ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдлрд╝рд╛рдЗрд▓ рдореМрдЬреВрдж рд╣реИ, рддреЛ рдЗрд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░реЗрдВред </li></ul><br>  рдкреНрд░рд╛рд░рдВрдн рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╣рдорд╛рд░рд╛ рд╕рдВрд╕реНрдХрд░рдг рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдХреЛрдб рдХреЛ рджреЗрдЦреЗрдВ: <br><br><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> start (<span class="hljs-name"><span class="hljs-name">&amp;optional</span></span> (<span class="hljs-name"><span class="hljs-name">fname</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *numline* <span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *oplist* тАж) <span class="hljs-comment"><span class="hljs-comment">;;      (when (zerop (strLen fname)) (setq fname (sysGetOpenName (sysHome) "-|*.mbs"))) (let ((fi (gensym 'fi))) (filOpen fi fname _INPUT) (loop (let ((curr-proc (action-proc fi))) (when *flagerr* (return t)) (when (filEOF fi) (return t)) (eval curr-proc))) (filClose fi)) (when *flagerr* (printsline "****   ")))</span></span></code> </pre> <br>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдирдХрд╛рд░рд╛рддреНрдордХ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ "рдЕрд╕реНрд╡реАрдХрд╛рд░" рдмрдЯрди рджрдмрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХрд╛рд░реНрдпрдХреНрд░рдо "рдХреНрд░реИрд╢" рд╣реЛрдЧрд╛ред  рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрд╕реНрддрд┐рддреНрд╡ рдХрд╛ рднреА рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдпрд╣ рджреЛрд╖ рдХрдорд┐рдпреЛрдВ рддрдХ рд╕реАрдорд┐рдд рдирд╣реАрдВ рд╣реИред  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдпрджрд┐ рдЗрдирдкреБрдЯ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдорд┐рдиреА-рдмреЗрд╕рд┐рдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдВрддрд┐рдо рд╣реИ, рддреЛ рдлрд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рд╕реЗ рдЙрддреНрдкрдиреНрди рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд┐рд╕реНрдк рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд▓реЛрдб рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЪрдХреНрд░ рдЯреВрдЯ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдЗрди рджреЛрд╖реЛрдВ рдХреЛ рдареАрдХ рдХрд░реЗрдВ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> start (<span class="hljs-name"><span class="hljs-name">&amp;optional</span></span> (<span class="hljs-name"><span class="hljs-name">fname</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *numline* <span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *oplist* тАж ) (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">zerop</span></span> (<span class="hljs-name"><span class="hljs-name">strLen</span></span> fname)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> fname (<span class="hljs-name"><span class="hljs-name">sysGetOpenName</span></span> (<span class="hljs-name"><span class="hljs-name">sysHome</span></span>) <span class="hljs-string"><span class="hljs-string">"-|*.mbs"</span></span>))) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> fname (<span class="hljs-name"><span class="hljs-name">filExistp</span></span> fname)) (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">fi</span></span> (<span class="hljs-name"><span class="hljs-name">gensym</span></span> 'fi))) (<span class="hljs-name"><span class="hljs-name">filOpen</span></span> fi fname _INPUT) (<span class="hljs-name"><span class="hljs-name">loop</span></span> (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">curr-proc</span></span> (<span class="hljs-name"><span class="hljs-name">action-proc</span></span> fi))) (<span class="hljs-name"><span class="hljs-name">when</span></span> *flagerr* (<span class="hljs-name"><span class="hljs-name">return</span></span> <span class="hljs-literal"><span class="hljs-literal">t</span></span>)) (<span class="hljs-name"><span class="hljs-name">when</span></span> curr-proc (<span class="hljs-name"><span class="hljs-name">eval</span></span> curr-proc)) (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">filEOF</span></span> fi) (<span class="hljs-name"><span class="hljs-name">return</span></span> <span class="hljs-literal"><span class="hljs-literal">t</span></span>)))) (<span class="hljs-name"><span class="hljs-name">filClose</span></span> fi) (<span class="hljs-name"><span class="hljs-name">when</span></span> *flagerr* (<span class="hljs-name"><span class="hljs-name">printsline</span></span> <span class="hljs-string"><span class="hljs-string">"****   "</span></span>))) (<span class="hljs-name"><span class="hljs-name">printsline</span></span> (<span class="hljs-name"><span class="hljs-name">if</span></span> fname (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"****  "</span></span> fname <span class="hljs-string"><span class="hljs-string">"  "</span></span>) <span class="hljs-string"><span class="hljs-string">"****   "</span></span>))) (<span class="hljs-name"><span class="hljs-name">unset</span></span> '*numline*) (<span class="hljs-name"><span class="hljs-name">unset</span></span> '*flagerr*) (<span class="hljs-name"><span class="hljs-name">unset</span></span> '*oplist*))</code> </pre><br>  рдпрджрд┐ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдореМрдЬреВрдж рд╣реИ, рддреЛ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЕрдиреНрдпрдерд╛, рдПрдХ рд╕рдВрджреЗрд╢ рдореБрджреНрд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ: "рдлрд╝рд╛рдЗрд▓ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ" рдпрд╛ "рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рдЫреЛрдбрд╝рд╛ рдЧрдпрд╛"ред <br>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдВ рдореБрдЦреНрдп рд▓реВрдк рдХреЗ рд╢рд░реАрд░ рдореЗрдВ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдХреА рдЬрд╛рддреА рд╣реИрдВ: <br><br><ul><li>  рдлрдВрдХреНрд╢рди рдПрдХреНрд╢рди-рдкреНрд░реЛрдХреНрдпреЛрд░ рдкреВрд░рд╛ рд╣реБрдЖред  рдЗрд╕рдХреЗ рдХрд╛рдо рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╕реНрдерд╛рдиреАрдп рдЪрд░ рд╡рдХреНрд░-рдЦрд░реАрдж рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИ; </li><li>  рдпрджрд┐ * рдзреНрд╡рдЬрд╡рд╛рд╣рдХ * рдЭрдВрдбрд╛ рдЙрдард╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд▓реВрдк рдЯреВрдЯ рдЬрд╛рддрд╛ рд╣реИ; </li><li>  рдпрджрд┐ рдХреНрд░рд┐рдпрд╛-рдЦрд░реАрдж рдлрд╝рдВрдХреНрд╢рди рдиреЗ рдПрдХ рдЧреИрд░-рд░рд┐рдХреНрдд рдкрд░рд┐рдгрд╛рдо рд▓реМрдЯрд╛рдпрд╛, рддреЛ рдЙрддреНрдкрдиреНрди рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд┐рд╕реНрдк рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд▓реЛрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ; </li><li>  рдпрджрд┐ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЕрдВрдд рдкрд╣реБрдБрдЪ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд▓реВрдк рднреА рдЯреВрдЯ рдЬрд╛рддрд╛ рд╣реИред </li></ul><br>  рдХреЛрдб рдмреЗрд╣рддрд░ рд▓рдЧ рд░рд╣рд╛ рдерд╛ ... рд▓реЗрдХрд┐рди рдПрдХ рдФрд░ рдЧрдВрднреАрд░ рджреЛрд╖ рдЕрдирд╕реБрд▓рдЭрд╛ рд░рд╣рд╛ - рдПрдХ рдпрд╛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╡рд╛рд▓реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдмрд╛рдж, рдореБрдЦреНрдп рд▓реВрдк рдЯреВрдЯ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдХрд╛рд░реНрдпрдХреНрд░рдо рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рдкреАрдЫреЗ рд╕реНрдерд┐рдд рдореВрд▓ рд╡рд░реНрд╖ рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рджреЗрдЦреЗ рдмрд┐рдирд╛ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдпрд╣ рдмреБрд░рд╛ рд╣реИ - рдореИрдВ рдЕрдиреБрд╡рд╛рджрдХ рдХреЛ рд╕рднреА рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЗрд╕ рджреЛрд╖ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ "рдПрд░рд░ рдХрд╛рдЙрдВрдЯрд░" рдХреА рд╢реБрд░реБрдЖрдд рдХрд░реЗрдВ, рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╕рдордп, рд╣рдо рдЗрд╕ рдХрд╛рдЙрдВрдЯрд░ рдХреЛ рдмрдврд╝рд╛рдПрдВрдЧреЗред  рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рддреНрд░реБрдЯрд┐ рдзреНрд╡рдЬ рдХреЛ рд░реАрд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> start (<span class="hljs-name"><span class="hljs-name">&amp;optional</span></span> (<span class="hljs-name"><span class="hljs-name">fname</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *numline* <span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *errcount* <span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *oplist* тАж) (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">zerop</span></span> (<span class="hljs-name"><span class="hljs-name">strLen</span></span> fname)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> fname (<span class="hljs-name"><span class="hljs-name">sysGetOpenName</span></span> (<span class="hljs-name"><span class="hljs-name">sysHome</span></span>) <span class="hljs-string"><span class="hljs-string">"-|*.mbs"</span></span>))) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> fname (<span class="hljs-name"><span class="hljs-name">filExistp</span></span> fname)) (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">fi</span></span> (<span class="hljs-name"><span class="hljs-name">gensym</span></span> 'fi))) (<span class="hljs-name"><span class="hljs-name">filCloseAll</span></span>) (<span class="hljs-name"><span class="hljs-name">filOpen</span></span> fi fname _INPUT) (<span class="hljs-name"><span class="hljs-name">loop</span></span> (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">curr-proc</span></span> (<span class="hljs-name"><span class="hljs-name">action-proc</span></span> fi))) (<span class="hljs-name"><span class="hljs-name">when</span></span> *flagerr* (<span class="hljs-name"><span class="hljs-name">setq</span></span> *errcount* (<span class="hljs-name"><span class="hljs-name">add1</span></span> *errcount*))) (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> curr-proc (<span class="hljs-name"><span class="hljs-name">not</span></span> *flagerr*)) (<span class="hljs-name"><span class="hljs-name">eval</span></span> curr-proc)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">filEOF</span></span> fi) (<span class="hljs-name"><span class="hljs-name">return</span></span> <span class="hljs-literal"><span class="hljs-literal">t</span></span>)))) (<span class="hljs-name"><span class="hljs-name">filClose</span></span> fi) (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">&gt;</span></span> *errcount* <span class="hljs-number"><span class="hljs-number">0</span></span>) (<span class="hljs-name"><span class="hljs-name">printsline</span></span> <span class="hljs-string"><span class="hljs-string">"****   "</span></span>))) (<span class="hljs-name"><span class="hljs-name">printsline</span></span> (<span class="hljs-name"><span class="hljs-name">if</span></span> fname (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"****  "</span></span> fname <span class="hljs-string"><span class="hljs-string">"  "</span></span>) <span class="hljs-string"><span class="hljs-string">"****   "</span></span>))) (<span class="hljs-name"><span class="hljs-name">unset</span></span> '*numline*) (<span class="hljs-name"><span class="hljs-name">unset</span></span> '*flagerr*) (<span class="hljs-name"><span class="hljs-name">unset</span></span> '*oplist*) (<span class="hljs-name"><span class="hljs-name">unset</span></span> '*errcount*))</code> </pre><br>  рдЕрдм, рдкреНрд░рд╛рд░рдВрдн рдлрд╝рдВрдХреНрд╢рди рд╕реНрд╡реАрдХрд╛рд░реНрдп рдХрд╛рд░реНрдп рдХрд░реЗрдЧрд╛ред  рдЪрд▓реЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдирд┐рдореНрди рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ: <br><br><pre> <code class="hljs 1c">* * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test1</span></span></span><span class="hljs-function">(x)</span></span> local y y=x^<span class="hljs-number"><span class="hljs-number">2</span></span> bla-bla end_proc * * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test2</span></span></span><span class="hljs-function">()</span></span> local x,y input x y=test1(x) print y end_proc * * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test3</span></span></span><span class="hljs-function">(x)</span></span> bla-bla-bla print x end_proc</code> </pre><br>  рдФрд░ рд╣рдорд╛рд░реЗ рдЕрдиреБрд╡рд╛рджрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ "рдЗрд╕реЗ рдкрд╛рд╕ рд╣реЛрдиреЗ рджреЗрдВ"ред  рд╣рдореЗрдВ рдорд┐рд▓рддрд╛ рд╣реИ: <br><br><pre> <code class="hljs 1c"><span class="hljs-number"><span class="hljs-number">0001</span></span> * <span class="hljs-number"><span class="hljs-number">0002</span></span> * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> 0003 * 0004 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test1</span></span></span><span class="hljs-function">(x)</span></span> <span class="hljs-number"><span class="hljs-number">0005</span></span> local y <span class="hljs-number"><span class="hljs-number">0006</span></span> y=x^<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">0007</span></span> bla-bla ****  (BLA - BLA) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-number"><span class="hljs-number">0008</span></span> end_proc <span class="hljs-number"><span class="hljs-number">0009</span></span> * <span class="hljs-number"><span class="hljs-number">0010</span></span> * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> 0011 * 0012 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test2</span></span></span><span class="hljs-function">()</span></span> <span class="hljs-number"><span class="hljs-number">0013</span></span> local x,y <span class="hljs-number"><span class="hljs-number">0014</span></span> input x <span class="hljs-number"><span class="hljs-number">0015</span></span> y=test1(x) <span class="hljs-number"><span class="hljs-number">0016</span></span> print y <span class="hljs-number"><span class="hljs-number">0017</span></span> end_proc <span class="hljs-number"><span class="hljs-number">0018</span></span> * <span class="hljs-number"><span class="hljs-number">0019</span></span> * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> 0020 * 0021 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test3</span></span></span><span class="hljs-function">(x)</span></span> <span class="hljs-number"><span class="hljs-number">0022</span></span> bla-bla-bla ****  (BLA - BLA - BLA) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-number"><span class="hljs-number">0023</span></span> print x <span class="hljs-number"><span class="hljs-number">0024</span></span> end_proc <span class="hljs-number"><span class="hljs-number">0025</span></span> ****   </code> </pre><br>  рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рд╣рдордиреЗ рд╢реБрд░реБрдЖрдд рд╕рдорд╛рд░реЛрд╣ рдХреЗ рд╕рд╛рде рдореБрдХрд╛рдмрд▓рд╛ рдХрд┐рдпрд╛ред  рд▓реЗрдХрд┐рди "рдмрдЧ рдкрд░ рдХрд╛рдо" рдЕрднреА рд╢реБрд░реВ рд╣реБрдЖ рд╣реИред  рдЖрдЗрдП рдЙрд╕ рднрд╛рд╖рд╛ рдХреЗ рдЙрд╕ рднрд╛рдЧ рдХреЗ рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рджреЗрдЦреЗрдВ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИред <br><br>  рд╕рдВрднрд╡рддрдГ рд╕рдмрд╕реЗ рдЖрдо рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рддреНрд░реБрдЯрд┐ рдЬреЛ рд▓реЛрдЧ рдЕрдХреНрд╕рд░ рдмрдирд╛рддреЗ рд╣реИрдВ рд╡рд╣ рдПрдХ рдЧрд▓рдд рдмреНрд░реИрдХреЗрдЯ рд╕рдВрд░рдЪрдирд╛ рд╣реИ (рдЕрд╕рдВрддреБрд▓рд┐рдд рдпрд╛ рдЧрд▓рдд рдХреНрд░рдо рдХреЛрд╖реНрдардХ рдореЗрдВ)ред  рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж рдПрдХ рдорд┐рдиреА-рдмреЗрд╕рд┐рдХ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рд▓рд┐рдП рд╕реЛрд░реНрд╕ рдХреЛрдб рдХреА рдПрдХ рдкрдВрдХреНрддрд┐ рдХрд╛ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕реЗ рдпрд╛рдж рдХрд░реЗрдВред  рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЯреЛрдХрди рдореЗрдВ рдЯреВрдЯ рдЬрд╛рддрд╛ рд╣реИ), рдФрд░ рдлрд┐рд░ рдЯреЛрдХрди рдХреА рд╕реВрдЪреА рдХреЛ рдЖрдВрддрд░рд┐рдХ рд╕реВрдЪреА рд░реВрдк рдореЗрдВ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЯреЛрдХрди рдХреА рд╕реВрдЪреА рдореЗрдВ, рдХреЛрд╖реНрдардХ рдЕрд▓рдЧ рдЯреЛрдХрди рд╣реИрдВ рдФрд░ рд╣рдо рдЙрдирдХреЗ рд╕рдВрддреБрд▓рди рдХреА рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рдПрдХ рдЕрд▓рдЧ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЯреЛрдХрди рдХреА рд╕реВрдЪреА рдЗрдирдкреБрдЯ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЗрдирдкреБрдЯ рдХреЛ рдкреНрд░реЗрд╖рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ, рдЬреЛ рд▓рд┐рд╕реНрдк рд╕реВрдЪреА рдореЗрдВ рд▓рд╛рдЗрдиреЛрдВ рдХреА рд╕реВрдЪреА рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд░рддреА рд╣реИред  рдпрджрд┐ рдЗрдирдкреБрдЯ рдлрд╝рдВрдХреНрд╢рди рдЗрдирдкреБрдЯ рдореЗрдВ рдПрдХ рдЧрд▓рдд рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдкрд╛рд╕ рдХреА рдЬрд╛рддреА рд╣реИ, рддреЛ рдлрд╝рдВрдХреНрд╢рди рдПрдХ рддреНрд░реБрдЯрд┐ рд▓реМрдЯрд╛рдПрдЧрд╛ред <br><br>  рдЖрдЗрдП рдЗрд╕ рддреНрд░реБрдЯрд┐ рдХреЛ рд╕рдВрднрд╛рд▓реЗрдВред <br><br>  HomeLisp рдореЗрдВ, рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдирд┐рд░реНрдорд╛рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ -1 рдХреЛ рдЫреЛрдбрд╝рдХрд░ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ -1 рдХреЛ рдЖрдЬрд╝рдорд╛рдПрдВ)ред  рдпрд╣ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ -1 рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдкреНрд░рдпрд╛рд╕ рд╕рдлрд▓ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЧрдгрдирд╛ рдкрд░рд┐рдгрд╛рдо рдкреВрд░реЗ рдкреНрд░рдпрд╛рд╕ рдлреЙрд░реНрдо рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИ; </li><li>  рдпрджрд┐ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИ, рддреЛ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ -2 рдХреА рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИред  рдЙрд╕реА рд╕рдордп, рдкреИрд░рд╛рдореАрдЯрд░ (рдЗрд░реЛрдореЗрд╕реЗрдЬ) рдХреЗ рдмрд┐рдирд╛ рдПрдХ рд╕рд┐рд╕реНрдЯрдо рдлрд╝рдВрдХреНрд╢рди рдЙрдкрд▓рдмреНрдз рд╣реИ, рдЬреЛ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдХрд╛ рдкрд╛рда рд▓реМрдЯрд╛рддрд╛ рд╣реИред </li></ul><br>  рдкреВрд░реНрд╡рдЧрд╛рдореА рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд╕реВрдЪреА рдкреНрд░рдкрддреНрд░ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рдг рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> mk-intf (<span class="hljs-name"><span class="hljs-name">txt</span></span>) (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">lex</span></span> (<span class="hljs-name"><span class="hljs-name">parser</span></span> txt <span class="hljs-string"><span class="hljs-string">" ,"</span></span> <span class="hljs-string"><span class="hljs-string">"()+-*/\^=&lt;&gt;%"</span></span>)) (<span class="hljs-name"><span class="hljs-name">intf</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>)) (<span class="hljs-name"><span class="hljs-name">iter</span></span> (<span class="hljs-name"><span class="hljs-name">for</span></span> a in lex) (<span class="hljs-name"><span class="hljs-name">setq</span></span> intf (<span class="hljs-name"><span class="hljs-name">strCat</span></span> intf a <span class="hljs-string"><span class="hljs-string">" "</span></span>))) (<span class="hljs-name"><span class="hljs-name">try</span></span> (<span class="hljs-name"><span class="hljs-name">input</span></span> (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"("</span></span> intf <span class="hljs-string"><span class="hljs-string">")"</span></span>)) except (<span class="hljs-name"><span class="hljs-name">progn</span></span> (<span class="hljs-name"><span class="hljs-name">printsline</span></span> (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"**** "</span></span> (<span class="hljs-name"><span class="hljs-name">errormessage</span></span>))) `(,txt) ))))</code> </pre><br>  рд░реВрдкрд╛рдВрддрд░рдг рддреНрд░реБрдЯрд┐ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рд╕рд┐рд╕реНрдЯрдо рд╕рдВрджреЗрд╢ рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдПрдХ рддрддреНрд╡ рдХреА рдПрдХ рд╕реВрдЪреА рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рдПрдЧреА - рдХреЛрдб рдХреА рдореВрд▓ рдкрдВрдХреНрддрд┐ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рд╕реВрдЪреА рдХрд╛рд░реНрд░рд╡рд╛рдИ-рдЦрд░реАрдж рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЧрд┐рд░ рдЬрд╛рдПрдЧреА (рдЕрдЧрд▓реЗ рдмрдпрд╛рди рдХреЗ рд░реВрдк рдореЗрдВ)ред  рдФрд░, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, рдЗрд╕реЗ рдорд╛рдиреНрдпрддрд╛ рдирд╣реАрдВ рджреА рдЬрд╛рдПрдЧреАред  рдпрд╣ рдПрдХ рдФрд░ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛, рдФрд░ рдХрдВрдкрд╛рдЗрд▓рд░ рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдЧрд╛ред  рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрд░реЛрдд рдХреЛрдб рддреИрдпрд╛рд░ рдХрд░реЗрдВрдЧреЗ, рдФрд░ рдЗрд╕рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВрдЧреЗ: <br><br><pre> <code class="hljs 1c">* * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test1</span></span></span><span class="hljs-function">(x)</span></span> local y y=(x^<span class="hljs-number"><span class="hljs-number">2</span></span>)) end_proc * * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test2</span></span></span><span class="hljs-function">()</span></span> local x,y input x y=test1(x) print y end_proc * * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test3</span></span></span><span class="hljs-function">(x)</span></span> x=<span class="hljs-number"><span class="hljs-number">3</span></span>+)x^<span class="hljs-number"><span class="hljs-number">2</span></span> print x end_proc</code> </pre><br>  рд╣рдореЗрдВ рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓реЗрдЧрд╛: <br><br><pre> <code class="hljs 1c"><span class="hljs-number"><span class="hljs-number">0001</span></span> * <span class="hljs-number"><span class="hljs-number">0002</span></span> * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> 0003 * 0004 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test1</span></span></span><span class="hljs-function">(x)</span></span> <span class="hljs-number"><span class="hljs-number">0005</span></span> local y <span class="hljs-number"><span class="hljs-number">0006</span></span> y=(x^<span class="hljs-number"><span class="hljs-number">2</span></span>)) ****    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-type"><span class="hljs-type"></span></span> ****  (<span class="hljs-string"><span class="hljs-string">"y=(x^2))"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-number"><span class="hljs-number">0007</span></span> end_proc <span class="hljs-number"><span class="hljs-number">0008</span></span> * <span class="hljs-number"><span class="hljs-number">0009</span></span> * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> 0010 * 0011 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test2</span></span></span><span class="hljs-function">()</span></span> <span class="hljs-number"><span class="hljs-number">0012</span></span> local x,y <span class="hljs-number"><span class="hljs-number">0013</span></span> input x <span class="hljs-number"><span class="hljs-number">0014</span></span> y=test1(x) <span class="hljs-number"><span class="hljs-number">0015</span></span> print y <span class="hljs-number"><span class="hljs-number">0016</span></span> end_proc <span class="hljs-number"><span class="hljs-number">0017</span></span> * <span class="hljs-number"><span class="hljs-number">0018</span></span> * <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> 0019 * 0020 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test3</span></span></span><span class="hljs-function">(x)</span></span> <span class="hljs-number"><span class="hljs-number">0021</span></span> x=<span class="hljs-number"><span class="hljs-number">3</span></span>+)x^<span class="hljs-number"><span class="hljs-number">2</span></span> ****    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-type"><span class="hljs-type"></span></span> ****  (<span class="hljs-string"><span class="hljs-string">"x=3+)x^2"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-number"><span class="hljs-number">0022</span></span> print x <span class="hljs-number"><span class="hljs-number">0023</span></span> end_proc ****   </code> </pre><br>  рдЕрдм рдЖрдЗрдП рдЙрд╕ рдХреЛрдб рдкрд░ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ рдЬреЛ рдЕрдВрдХрдЧрдгрд┐рддреАрдп рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЛ рдПрдХ рдЙрдкрд╕рд░реНрдЧ рд╕рдВрдХреЗрддрди рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдХреЛрдб рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рд╕рд╛рдзрди рдирд╣реАрдВ рд╣реИред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдпреЗ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдХрд╛рдлреА рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдЪрд▓реЛ рдЗрд╕ рдЧрд▓рддреА рдХреЛ рдареАрдХ рдХрд░реЛред  рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдирд┐рд░реНрджреЛрд╖ (рджрд┐рдЦрдиреЗ рдореЗрдВ) рдХреЛрдб рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ: <br><br><pre> <code class="hljs bash">proc <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> x,y x=6 y=-x <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> y end_proc</code> </pre><br>  рдкреНрд░рд╕рд╛рд░рдг рдЕрдиреБрд╡рд╛рджрдХ рдХреЗ "рдкрддрди" рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрдЧрд╛!  рдПрдХ рдЧрд┐рд░рд╛рд╡рдЯ y = -x рдСрдкрд░реЗрдЯрд░ рдХрд╛ рдХрд╛рд░рдг рдмрдиреЗрдЧреАред  рдорд╛рдорд▓рд╛ рдХреНрдпрд╛ рд╣реИ?  рдПрдХ рд╢реВрдиреНрдп рдореЗрдВ!  рдПрдХ infix рдлреЙрд░реНрдореВрд▓реЗ рд╕реЗ рдПрдХ рдЙрдкрд╕рд░реНрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╕реВрддреНрд░ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддреЗ рд╣реБрдП, рд╣рдордиреЗ рдХрд┐рд╕реА рддрд░рд╣ рдпрд╣ рдирд╣реАрдВ рд╕реЛрдЪрд╛ рдХрд┐ рдорд╛рдЗрдирд╕ "рджреЛ-рд╕рд╛рдордирд╛" - рдПрдХ рджреНрд╡рд┐рдЖрдзрд╛рд░реА рдорд╛рдЗрдирд╕ (рдПрдХ рдСрдкрд░реЗрд╢рди рд╕рдВрдХреЗрдд) рд╣реИ, рдФрд░ рдПрдХ рдЕрдирд╛рд░реНрдп рдорд╛рдЗрдирд╕ (рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рд╕рдВрдХреЗрдд) рд╣реИред  рд╣рдорд╛рд░реЗ рдкрд╛рд░реНрд╕рд░ рдЗрд╕ рдЕрдВрддрд░ рдХреЛ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ - рдпрд╣ рд╕рднреА рд╡рд┐рдкрдХреНрд╖ рдХреЛ рджреНрд╡рд┐рдЖрдзрд╛рд░реА рдорд╛рдирддрд╛ рд╣реИ ... рдЕрдм рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ?  рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд╛рдо рдХрд░ рд░рд╣реЗ рдХреЛрдб рдХреЛ рдирд╖реНрдЯ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рд╕рднреА рдЕрдиреИрдЪреНрдЫрд┐рдХ рд╕рд╣рдорддрд┐ рдХреЛ рдмрд╛рдЗрдирд░реА рдореЗрдВ рдмрджрд▓ рджреЗрдВред  рдХреИрд╕реЗ?  рд▓реЗрдХрд┐рди рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИред  рдпрд╣ рдХрд╛рдлреА рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдирд┐рд░реНрдорд╛рдг рдореЗрдВ "рдорд╛рдЗрдирд╕" рд░рд╣рддрд╛ рд╣реИ: <br><br>  "(-Nechto" <br>  "&gt; -рд╕рдорд░реНрдерди" <br>  "&lt;-Nechto" <br>  "= рдХреБрдЫ" <br>  рдЦреИрд░, рд╕реВрддреНрд░ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рд╡рд╣ рднреА рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐, рдЯреЛрдХрди рдореЗрдВ рдЯреВрдЯрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдХрд░рддреЗ рд╣реИрдВ: <br><br>  "-Something" =&gt; "(0-рдХреБрдЫ" <br>  "&gt; -рд╕рдорд░реНрдерди" =&gt; "&gt; 0-рдХреБрдЫ" <br>  "&lt;-Something" =&gt; "&lt;0-something" <br>  "= рдХреБрдЫ" =&gt; "= 0 рдХреБрдЫ" <br><br>  рдФрд░ рдпрджрд┐ рд╕реВрддреНрд░ рд╢реВрдиреНрдп рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╣рдо рд╕реВрддреНрд░ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╢реВрдиреНрдп рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╕рднреА рд╢реВрдиреНрдп рдмрд╛рдЗрдирд░реА рд╣реЛ рдЬрд╛рдПрдВрдЧреЗ рдФрд░ рддреНрд░реБрдЯрд┐ рдореМрд▓рд┐рдХ рд░реВрдк рд╕реЗ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧреАред  рдЪрд▓рд┐рдП рдЙрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдкреНрд░реАрдкреНрд░реЛ рдирд╛рдо рд╕реЗ рдКрдкрд░ рд░реВрдкрд╛рдВрддрд░рдг рдХрд░реЗрдЧрд╛ред  рдпрд╣рд╛рдБ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рдХреИрд╕рд╛ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> prepro (<span class="hljs-name"><span class="hljs-name">s</span></span>) (<span class="hljs-name"><span class="hljs-name">let*</span></span> ((<span class="hljs-name"><span class="hljs-name">s0</span></span> (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> <span class="hljs-string"><span class="hljs-string">"-"</span></span> (<span class="hljs-name"><span class="hljs-name">strLeft</span></span> s <span class="hljs-number"><span class="hljs-number">1</span></span>)) (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"0"</span></span> s) s)) (<span class="hljs-name"><span class="hljs-name">s1</span></span> (<span class="hljs-name"><span class="hljs-name">strRep</span></span> s0 <span class="hljs-string"><span class="hljs-string">"(-"</span></span> <span class="hljs-string"><span class="hljs-string">"(0-"</span></span>)) (<span class="hljs-name"><span class="hljs-name">s2</span></span> (<span class="hljs-name"><span class="hljs-name">strRep</span></span> s1 <span class="hljs-string"><span class="hljs-string">"=-"</span></span> <span class="hljs-string"><span class="hljs-string">"=0-"</span></span>)) (<span class="hljs-name"><span class="hljs-name">s3</span></span> (<span class="hljs-name"><span class="hljs-name">strRep</span></span> s2 <span class="hljs-string"><span class="hljs-string">"&gt;-"</span></span> <span class="hljs-string"><span class="hljs-string">"&gt;0-"</span></span>)) (<span class="hljs-name"><span class="hljs-name">s4</span></span> (<span class="hljs-name"><span class="hljs-name">strRep</span></span> s3 <span class="hljs-string"><span class="hljs-string">"&lt;-"</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;0-"</span></span>))) s4))</code> </pre><br>  рдпрд╣рд╛рдВ рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рдЯрд┐рдкреНрдкрдгреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рд╕рд╛рдзрд╛рд░рдг рдкрд╛рд░реНрд╕рд░ рдореЗрдВ рдПрдХ рдФрд░ рдкрд░реЗрд╢рд╛рдиреА рд╣реИ рдЬреЛ рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ рдмрд┐рд▓реНрдХреБрд▓ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ - рд╕рдВрдЪрд╛рд▓рди рдХреЗ рджреЛрд╣рд░реЗ рд╕рдВрдХреЗрддред  рд╕реВрддреНрд░реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп, рд╕рдВрдХреЗрдд "&gt;" рдФрд░ "=" рдХрдВрдзреЗ рд╕реЗ рдХрдВрдзрд╛ рдорд┐рд▓рд╛рдХрд░ рдПрдХ рдСрдкрд░реЗрд╢рди "&gt; =" (рдФрд░ рдПрдХ рдЯреЛрдХрди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП!)ред  рдкрд╛рд░реНрд╕рд░ рдпрд╣ рдЬрд╛рдирдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рд╣реИ - рдпрд╣ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрдХреЗрдд рдХреЛ рдПрдХ рдЕрд▓рдЧ рдЯреЛрдХрди рдмрдирд╛ рджреЗрдЧрд╛ред  рдЖрдк рдкреНрд░рд╛рдкреНрдд рдЯреЛрдХрди рдХреА рд╕реВрдЪреА рдХреЛ рджреЗрдЦрдХрд░, рдФрд░ рдпрджрд┐ рд╕рдВрдпреЛрдЬрди рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд░реНрдг рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рдмрдЧрд▓ рдореЗрдВ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдЙрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдирд╛рдо рджреЗрддреЗ рд╣реИрдВ рдЬреЛ "рдкреЛрд╕реНрдЯрдкреНрд░реЛ" рдирд╛рдо рд╕реЗ рдпреВрдирд┐рдпрди рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░реЗрдЧрд╛ред  рдпрд╣рд╛рдБ рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдХреЛрдб рд╣реИ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> postpro (<span class="hljs-name"><span class="hljs-name">lex-list</span></span>) (<span class="hljs-name"><span class="hljs-name">cond</span></span> ((<span class="hljs-name"><span class="hljs-name">null</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> lex-list)) lex-list) (<span class="hljs-name"><span class="hljs-name">t</span></span> (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">c1</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> lex-list)) (<span class="hljs-name"><span class="hljs-name">c2</span></span> (<span class="hljs-name"><span class="hljs-name">cadr</span></span> lex-list))) (<span class="hljs-name"><span class="hljs-name">cond</span></span> ((<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> c1 <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>) (<span class="hljs-name"><span class="hljs-name">eq</span></span> c2 <span class="hljs-string"><span class="hljs-string">"="</span></span>)) (<span class="hljs-name"><span class="hljs-name">cons</span></span> <span class="hljs-string"><span class="hljs-string">"&gt;="</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cddr</span></span> lex-list)))) ((<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> c1 <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>) (<span class="hljs-name"><span class="hljs-name">eq</span></span> c2 <span class="hljs-string"><span class="hljs-string">"="</span></span>)) (<span class="hljs-name"><span class="hljs-name">cons</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;="</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cddr</span></span> lex-list)))) ((<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> c1 <span class="hljs-string"><span class="hljs-string">"="</span></span>) (<span class="hljs-name"><span class="hljs-name">eq</span></span> c2 <span class="hljs-string"><span class="hljs-string">"="</span></span>)) (<span class="hljs-name"><span class="hljs-name">cons</span></span> <span class="hljs-string"><span class="hljs-string">"=="</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cddr</span></span> lex-list)))) ((<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> c1 <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>) (<span class="hljs-name"><span class="hljs-name">eq</span></span> c2 <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>)) (<span class="hljs-name"><span class="hljs-name">cons</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;&gt;"</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cddr</span></span> lex-list)))) ((<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> c1 <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>) (<span class="hljs-name"><span class="hljs-name">eq</span></span> c2 <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>)) (<span class="hljs-name"><span class="hljs-name">cons</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;&gt;"</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cddr</span></span> lex-list)))) ((<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> c1 <span class="hljs-string"><span class="hljs-string">"!"</span></span>) (<span class="hljs-name"><span class="hljs-name">eq</span></span> c2 <span class="hljs-string"><span class="hljs-string">"="</span></span>)) (<span class="hljs-name"><span class="hljs-name">cons</span></span> <span class="hljs-string"><span class="hljs-string">"/="</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cddr</span></span> lex-list)))) ((<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> c1 <span class="hljs-string"><span class="hljs-string">"/"</span></span>) (<span class="hljs-name"><span class="hljs-name">eq</span></span> c2 <span class="hljs-string"><span class="hljs-string">"="</span></span>)) (<span class="hljs-name"><span class="hljs-name">cons</span></span> <span class="hljs-string"><span class="hljs-string">"/="</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cddr</span></span> lex-list)))) (<span class="hljs-name"><span class="hljs-name">t</span></span> (<span class="hljs-name"><span class="hljs-name">cons</span></span> c1 (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> lex-list)))))))))</code> </pre><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рджреЗрдЦрддреЗ рд╣реИрдВ, рдХреБрдЫ рдЦрд╛рд╕ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдм рдСрдкрд░реЗрдЯрд░ рдХреЛ рдЖрдВрддрд░рд┐рдХ рд╕реВрдЪреА рдкреНрд░рдкрддреНрд░ рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХрд╛ рдЕрдВрддрд┐рдо рдХрд╛рд░реНрдп рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛрдЧрд╛: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> mk-intf (<span class="hljs-name"><span class="hljs-name">txt</span></span>) (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">lex</span></span> (<span class="hljs-name"><span class="hljs-name">postpro</span></span> (<span class="hljs-name"><span class="hljs-name">parser</span></span> (<span class="hljs-name"><span class="hljs-name">prepro</span></span> txt) <span class="hljs-string"><span class="hljs-string">" ,"</span></span> <span class="hljs-string"><span class="hljs-string">"()+-*/\^=&lt;&gt;%"</span></span>))) (<span class="hljs-name"><span class="hljs-name">intf</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>)) (<span class="hljs-name"><span class="hljs-name">iter</span></span> (<span class="hljs-name"><span class="hljs-name">for</span></span> a in lex) (<span class="hljs-name"><span class="hljs-name">setq</span></span> intf (<span class="hljs-name"><span class="hljs-name">strCat</span></span> intf a <span class="hljs-string"><span class="hljs-string">" "</span></span>))) (<span class="hljs-name"><span class="hljs-name">try</span></span> (<span class="hljs-name"><span class="hljs-name">input</span></span> (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"("</span></span> intf <span class="hljs-string"><span class="hljs-string">")"</span></span>)) except (<span class="hljs-name"><span class="hljs-name">progn</span></span> (<span class="hljs-name"><span class="hljs-name">printsline</span></span> (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"**** "</span></span> (<span class="hljs-name"><span class="hljs-name">errormessage</span></span>))) `(,txt) ))))</code> </pre><br>  рдЕрдм рдЪрд▓реЛ inf2ipn рдлрд╝рдВрдХреНрд╢рди рдкрд░ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВред  рдХреНрдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдпрд╣ "рджреЛрд╖" рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?  рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдКрдкрд░ рдХреЗ рдХреЛрд╖реНрдардХреЛрдВ рдХреЗ рдЕрд╕рдВрддреБрд▓рди рдХреЛ рдХрд╛рдЯ рджрд┐рдпрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдЬреНрдпрд╛рджрд╛ рдФрд░ рдХреНрдпрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ?  рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рджреЛ рдСрдкрд░реЗрд╢рди рдпрд╛ рджреЛ рдСрдкрд░реЗрдВрдб рдХреЗ рд╕рдВрдХреЗрддред  рдХреЛрдИ рд╡реНрдпрдХреНрддрд┐ inf2ipn рдХреЛрдб рдореЗрдВ рдЗрд╕рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИ (рдФрд░ рдЬреЛ рд▓реЛрдЧ рдЕрдкрдиреА рдЗрдЪреНрдЫрд╛ рд╕реЗ рдРрд╕рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ)ред  рд╣рдо рд╕реВрддреНрд░ рдХреЛ SCR рд╕реЗ рдЙрдкрд╕рд░реНрдЧ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рдЪрд░рдг рдореЗрдВ рдЗрди рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ "рдкрдХрдбрд╝" рд▓реЗрддреЗ рд╣реИрдВред  рдФрд░ рдЪрд▓реЛ (рдмрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ) рд╣рдо рдЙрди рд╕рднреА рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдкрдХрдбрд╝ рд▓реЗрдВрдЧреЗ рдЬреЛ рдХрд┐ рдлрд╛рд░реНрдореВрд▓рд╛ рдХреЛ рдкреНрд░реАрдлрд┐рдХреНрд╕ рд╕реЗ рдЙрдкрд╕рд░реНрдЧ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЙрддреНрдкрдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдЗрд╕рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреА рдЬрдЧрд╣ i2p рд░реИрдкрд░ рдлрдВрдХреНрд╢рди рд╣реИред  рдЕрдм рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> i2p (<span class="hljs-name"><span class="hljs-name">f</span></span>) (<span class="hljs-name"><span class="hljs-name">try</span></span> (<span class="hljs-name"><span class="hljs-name">ipn2pref</span></span> (<span class="hljs-name"><span class="hljs-name">inf2ipn</span></span> f)) except (<span class="hljs-name"><span class="hljs-name">progn</span></span> (<span class="hljs-name"><span class="hljs-name">printsline</span></span> <span class="hljs-string"><span class="hljs-string">"****    "</span></span>) (<span class="hljs-name"><span class="hljs-name">printsline</span></span> (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"**** "</span></span> (<span class="hljs-name"><span class="hljs-name">errormessage</span></span>))) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">t</span></span>) <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)))</code> </pre><br>  рдФрд░ рдЕрдм рд╣рдо рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рджреЛ рдСрдкрд░реЗрд╢рди рд╕рдВрдХреЗрдд рдпрд╛ рджреЛ рдСрдкрд░реЗрдВрдб рдХреЗ рд╕реВрддреНрд░ рдореЗрдВ рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЛ рд░реЛрдХреЗрдВрдЧреЗред  рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдиреЗ рдПрдХ SCR рд╕реЗ рдПрдХ рд╕реВрддреНрд░ рдХреЛ рдПрдХ рдЙрдкрд╕рд░реНрдЧ рд░реВрдк рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ред  рдЗрд╕ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рд╕рд╣реА рд╕рдорд╛рдкрди рдХрд╛ рдПрдХ рд╕рдВрдХреЗрдд рдпрд╣ рд╣реИ рдХрд┐ рдЕрдВрддрд┐рдо рдЪрд░рдг рдореЗрдВ рд╕реНрдЯреИрдХ рдореЗрдВ рдПрдХ рдПрдХрд▓ рдорд╛рди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЕрдЧрд░ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдПрдХ рдЧрд▓рддреА рдХреА рдЧрдИ рд╣реИред  рдФрд░ рдПрдХ рдФрд░ рдЧрд▓рдд рд╕реНрдерд┐рддрд┐ рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ рдЬрдм рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЧрд▓рдд (рдЕрдзрд┐рдХ рдпрд╛ рдХрдо) рдорд╛рдкрджрдВрдбреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрди рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ "рдкрдХрдбрд╝рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП": <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> ipn2pref (<span class="hljs-name"><span class="hljs-name">f</span></span> <span class="hljs-symbol"><span class="hljs-symbol">&amp;optional</span></span> (<span class="hljs-name"><span class="hljs-name">s</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)) (<span class="hljs-name"><span class="hljs-name">cond</span></span> ((<span class="hljs-name"><span class="hljs-name">null</span></span> f) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">null</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> s)) (<span class="hljs-name"><span class="hljs-name">car</span></span> s) (<span class="hljs-name"><span class="hljs-name">progn</span></span> (<span class="hljs-name"><span class="hljs-name">printsline</span></span> <span class="hljs-string"><span class="hljs-string">"****    "</span></span>) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">t</span></span>) <span class="hljs-literal"><span class="hljs-literal">nil</span></span>))) ((<span class="hljs-name"><span class="hljs-name">numberp</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f)) (<span class="hljs-name"><span class="hljs-name">ipn2pref</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> f) (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f) s))) ((<span class="hljs-name"><span class="hljs-name">is-op</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f)) (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">ar</span></span> (<span class="hljs-name"><span class="hljs-name">arity</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f)))) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">&lt;</span></span> (<span class="hljs-name"><span class="hljs-name">length</span></span> s) ar) (<span class="hljs-name"><span class="hljs-name">progn</span></span> (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">t</span></span>) (<span class="hljs-name"><span class="hljs-name">printsline</span></span> <span class="hljs-string"><span class="hljs-string">"****    "</span></span>) <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">ipn2pref</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> f) (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f) (<span class="hljs-name"><span class="hljs-name">reverse</span></span> (<span class="hljs-name"><span class="hljs-name">subseq</span></span> s <span class="hljs-number"><span class="hljs-number">0</span></span> ar))) (<span class="hljs-name"><span class="hljs-name">subseq</span></span> s ar)))))) ((<span class="hljs-name"><span class="hljs-name">atom</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f)) (<span class="hljs-name"><span class="hljs-name">ipn2pref</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> f) (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f) s))) (<span class="hljs-name"><span class="hljs-name">t</span></span> (<span class="hljs-name"><span class="hljs-name">ipn2pref</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> f) (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">list</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f) (<span class="hljs-name"><span class="hljs-name">car</span></span> s)) (<span class="hljs-name"><span class="hljs-name">cdr</span></span> s))))))</code> </pre><br>  рдЕрдм рдЪрд▓реЛ рдЦрд░реАрдж рдХрдерди рд╣реИрдВрдбрд▓рд░ рдкрд░ рдПрдХ "рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реВрдк" рджреЗрдЦреЗрдВред  рд╣рдо рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджреЛ рдЕрдВрдХ рдЪреВрдХ рдЧрдПред  рдкрд╣рд▓реА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╕рдордп рднреВрд▓рдирд╛ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рдХреА рд╕рдорддрд╛ (рддрд░реНрдХреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛) рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рддрджрдиреБрд╕рд╛рд░ рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ * oplist * рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВред  рдФрд░ рджреВрд╕рд░рд╛ рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдЬреЛ рдлрд╝рдВрдХреНрд╢рди рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВ, рд╡реЗ рд╕рд╣реА рдорд╛рди рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВ!  рдЕрдзрд┐рдХ рд╕рдЯреАрдХ рд░реВрдк рд╕реЗ, рд╣рдорд╛рд░реЗ рдЕрдиреБрд╡рд╛рджрдХ рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд▓реМрдЯрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЧрдгрдирд╛ рдХрд┐рдП рдЧрдП рдЕрдВрддрд┐рдо рдлреЙрд░реНрдо рдХрд╛ рдореВрд▓реНрдп рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рдПрдЧрд╛ред  рд╡рд╛рдВрдЫрд┐рдд рдореВрд▓реНрдп рдХреА рд╡рд╛рдкрд╕реА рдХреА рдЧрд╛рд░рдВрдЯреА рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдкрд╛рд╕реНрдХрд▓ рд╕реЗ рдкрд░рд┐рдгрд╛рдо рдЪрд░ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рдХрд░рддрд╛ рд╣реВрдВред  рдЕрдм, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рд╡рд╛рдВрдЫрд┐рдд рдорд╛рди рд▓реМрдЯрд╛рдПрдВ, рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЗрд╕ рдЪрд░ рдХреЗ рд▓рд┐рдП рд╡рд╛рдВрдЫрд┐рдд рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╢рд░реАрд░ рдХреЛ рдмрдирд╛рддреЗ рд╕рдордп, рд╣рдореЗрдВ рдЕрдВрддрд┐рдо рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреЗ рд╕рд╛рде рдлрд╝рдВрдХреНрд╢рди рдмреЙрдбреА рдореЗрдВ рдирд╛рдо рдкрд░рд┐рдгрд╛рдо рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рд╕рдм рдПрдХреНрд╢рди-рдЦрд░реАрдж рдлрдВрдХреНрд╢рди рд▓рд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> action-proc (<span class="hljs-name"><span class="hljs-name">fi</span></span>) (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">stmt</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">proc-name</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">proc-parm</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">loc-var</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) (<span class="hljs-name"><span class="hljs-name">lv</span></span> '((result <span class="hljs-number"><span class="hljs-number">0</span></span>))) (<span class="hljs-name"><span class="hljs-name">body</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)) (<span class="hljs-name"><span class="hljs-name">loop</span></span> (<span class="hljs-name"><span class="hljs-name">setq</span></span> stmt (<span class="hljs-name"><span class="hljs-name">mk-intf</span></span> (<span class="hljs-name"><span class="hljs-name">getLine</span></span> fi))) (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">null</span></span> stmt) (<span class="hljs-name"><span class="hljs-name">return</span></span> <span class="hljs-literal"><span class="hljs-literal">t</span></span>)) (<span class="hljs-name"><span class="hljs-name">cond</span></span> ((<span class="hljs-name"><span class="hljs-name">eq</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> stmt) 'proc) (<span class="hljs-name"><span class="hljs-name">setq</span></span> proc-name (<span class="hljs-name"><span class="hljs-name">nth</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> stmt)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> proc-parm (<span class="hljs-name"><span class="hljs-name">nth</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> stmt)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *oplist* (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">list</span></span> proc-name (<span class="hljs-name"><span class="hljs-name">length</span></span> proc-parm)) *oplist*))) ((<span class="hljs-name"><span class="hljs-name">eq</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> stmt) 'end_proc) (<span class="hljs-name"><span class="hljs-name">return</span></span> <span class="hljs-literal"><span class="hljs-literal">t</span></span>)) ((<span class="hljs-name"><span class="hljs-name">eq</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> stmt) 'print) (<span class="hljs-name"><span class="hljs-name">setq</span></span> body (<span class="hljs-name"><span class="hljs-name">append</span></span> body (<span class="hljs-name"><span class="hljs-name">list</span></span> (<span class="hljs-name"><span class="hljs-name">cons</span></span> 'printline (<span class="hljs-name"><span class="hljs-name">cdr</span></span> stmt)))))) ((<span class="hljs-name"><span class="hljs-name">eq</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> stmt) 'input) (<span class="hljs-name"><span class="hljs-name">setq</span></span> body (<span class="hljs-name"><span class="hljs-name">append</span></span> body (<span class="hljs-name"><span class="hljs-name">list</span></span> (<span class="hljs-name"><span class="hljs-name">list</span></span> 'setq (<span class="hljs-name"><span class="hljs-name">cadr</span></span> stmt) (<span class="hljs-name"><span class="hljs-name">list</span></span> 'read) ))))) ((<span class="hljs-name"><span class="hljs-name">eq</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> stmt) 'local) (<span class="hljs-name"><span class="hljs-name">setq</span></span> loc-var (<span class="hljs-name"><span class="hljs-name">append</span></span> loc-var (<span class="hljs-name"><span class="hljs-name">cdr</span></span> stmt)))) ((<span class="hljs-name"><span class="hljs-name">eq</span></span> (<span class="hljs-name"><span class="hljs-name">cadr</span></span> stmt) '=) (<span class="hljs-name"><span class="hljs-name">setq</span></span> body (<span class="hljs-name"><span class="hljs-name">append</span></span> body (<span class="hljs-name"><span class="hljs-name">list</span></span> (<span class="hljs-name"><span class="hljs-name">action-set</span></span> stmt))))) (<span class="hljs-name"><span class="hljs-name">t</span></span> (<span class="hljs-name"><span class="hljs-name">printsline</span></span> (<span class="hljs-name"><span class="hljs-name">strCat</span></span> <span class="hljs-string"><span class="hljs-string">"****  "</span></span> (<span class="hljs-name"><span class="hljs-name">output</span></span> stmt) <span class="hljs-string"><span class="hljs-string">"  "</span></span>)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *flagerr* <span class="hljs-literal"><span class="hljs-literal">t</span></span>)))) (<span class="hljs-name"><span class="hljs-name">iter</span></span> (<span class="hljs-name"><span class="hljs-name">for</span></span> a in (<span class="hljs-name"><span class="hljs-name">setof</span></span> loc-var)) (<span class="hljs-name"><span class="hljs-name">collecting</span></span> (<span class="hljs-name"><span class="hljs-name">list</span></span> a <span class="hljs-number"><span class="hljs-number">0</span></span>) into lv)) (<span class="hljs-name"><span class="hljs-name">if</span></span> proc-name `(defun ,proc-name ,proc-parm (let ,lv ,@body result)) <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)))</code> </pre><br>  рд╣рдо рдЕрднреА рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдБ рд░реБрдХреЗрдВрдЧреЗ (рд╣рд╛рд▓рд╛рдБрдХрд┐ рд╣рдо рдЕрднреА рднреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░реЗрдВрдЧреЗ, рдФрд░ рдХреЛрдб рдХреЛ рдЕрдВрддрд┐рдо рд░реВрдк рджреЗрдирд╛ рд╣реЛрдЧрд╛; рд▓реЗрдХрд┐рди рдРрд╕рд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХрд╛ рдмрд╣реБрдд рдХреБрдЫ рд╣реИ ...) рдФрд░ рдЕрдм рд╣рдо рдЕрдкрдиреА рднрд╛рд╖рд╛ рдореЗрдВ рджреЛ рд╕реБрдзрд╛рд░реЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ рдЬреЛ рдЕрднреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИрдВред <br><br><h3>  рдорд╛рдореВрд▓реА рд╕реБрдзрд╛рд░ ... </h3><br>  рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВрдиреЗ рд▓рд┐рдЦрд╛ рдерд╛ рдХрд┐ рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ рдпрджрд┐ рдХрд┐рд╕реА рднрд╛рд╖рд╛ рдореЗрдВ рдПрдХ рдСрдкрд░реЗрдЯрд░ рдареАрдХ рдПрдХ рд▓рд╛рдЗрди рдореЗрдВ рд░рд╣рддрд╛ рд╣реИред  рдХрдИ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдкрд░ рднрд╛рд░реА рдмрдпрд╛рди рд▓рд┐рдЦрдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдЖрдЗрдП рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдирд╛ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИред  рдЧреЗрдЯрд▓рд╛рдЗрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рд╣рдо рдПрдХ рд╕реНрдерд╛рдиреАрдп рд╡реИрд░рд┐рдПрдмрд▓ рдмрдирд╛рдПрдВрдЧреЗ рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдкрдврд╝реЗ рдЧрдП рдкрд╛рда рдХреЛ рд╕рдВрдЪрд┐рдд рдХрд░реЗрдВрдЧреЗ (рдмрд╢рд░реНрддреЗ рдХрд┐ рдпрд╣ рдПрдХ рдЯрд┐рдкреНрдкрдгреА рдирд╣реАрдВ рд╣реИ рдФрд░ "_" рд╡рд░реНрдгреЛрдВ рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред рдЬреИрд╕реЗ рд╣реА рдПрдХ рдЕрд▓рдЧ рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рд╕рд╛рде рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реЗрдЦрд╛ рддрдп рд╣реЛ рдЬрд╛рддреА рд╣реИ, рд╣рдо рдПрдХ рдорд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдЪрд┐рдд рдореВрд▓реНрдп рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рджреЗрддреЗ рд╣реИрдВред рдпрд╣ рдХреЛрдб рд╣реИ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> getLine (<span class="hljs-name"><span class="hljs-name">fil</span></span>) (<span class="hljs-name"><span class="hljs-name">let</span></span> ((<span class="hljs-name"><span class="hljs-name">stri</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>) (<span class="hljs-name"><span class="hljs-name">res</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>)) (<span class="hljs-name"><span class="hljs-name">loop</span></span> (<span class="hljs-name"><span class="hljs-name">when</span></span> (<span class="hljs-name"><span class="hljs-name">filEof</span></span> fil) (<span class="hljs-name"><span class="hljs-name">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> *numline* (<span class="hljs-name"><span class="hljs-name">add1</span></span> *numline*)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> stri (<span class="hljs-name"><span class="hljs-name">filGetline</span></span> fil)) (<span class="hljs-name"><span class="hljs-name">printsline</span></span> (<span class="hljs-name"><span class="hljs-name">strCat</span></span> (<span class="hljs-name"><span class="hljs-name">format</span></span> *numline* <span class="hljs-string"><span class="hljs-string">"0000"</span></span>) <span class="hljs-string"><span class="hljs-string">" "</span></span> (<span class="hljs-name"><span class="hljs-name">strRTrim</span></span> stri))) (<span class="hljs-name"><span class="hljs-name">unless</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> stri) (<span class="hljs-name"><span class="hljs-name">eq</span></span> <span class="hljs-string"><span class="hljs-string">"*"</span></span> (<span class="hljs-name"><span class="hljs-name">strLeft</span></span> stri <span class="hljs-number"><span class="hljs-number">1</span></span>))) (<span class="hljs-name"><span class="hljs-name">setq</span></span> stri (<span class="hljs-name"><span class="hljs-name">strATrim</span></span> stri)) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> <span class="hljs-string"><span class="hljs-string">" _"</span></span>(<span class="hljs-name"><span class="hljs-name">strRight</span></span> stri <span class="hljs-number"><span class="hljs-number">2</span></span>)) (<span class="hljs-name"><span class="hljs-name">setq</span></span> res (<span class="hljs-name"><span class="hljs-name">strCat</span></span> res (<span class="hljs-name"><span class="hljs-name">strLeft</span></span> stri (<span class="hljs-name"><span class="hljs-name">-</span></span> (<span class="hljs-name"><span class="hljs-name">strLen</span></span> stri) <span class="hljs-number"><span class="hljs-number">2</span></span>)))) (<span class="hljs-name"><span class="hljs-name">setq</span></span> res (<span class="hljs-name"><span class="hljs-name">strCat</span></span> res stri))) (<span class="hljs-name"><span class="hljs-name">unless</span></span> (<span class="hljs-name"><span class="hljs-name">eq</span></span> <span class="hljs-string"><span class="hljs-string">" _"</span></span>(<span class="hljs-name"><span class="hljs-name">strRight</span></span> stri <span class="hljs-number"><span class="hljs-number">2</span></span>)) (<span class="hljs-name"><span class="hljs-name">return</span></span> res))))))</code> </pre><br>  рдФрд░ рдЖрдЦрд┐рд░реА рд╕реБрдзрд╛рд░ред  рдХрдИ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ, рдЖрдк рдЕрдВрдХрдЧрдгрд┐рддреАрдп рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рддрд╛рд░реНрдХрд┐рдХ рдСрдкрд░реЗрдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЬреЛ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рд╢реВрдиреНрдп рдпрд╛ рдПрдХ рдХреА рдЧрдгрдирд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВ)ред  рдЗрд╕рд╕реЗ рднрд╛рд╖рд╛ рдХреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдорд┐рд▓рддреА рд╣реИ рдФрд░, рдореВрд▓ рднрд╛рд╡рдирд╛ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИред  рд╣рдорд╛рд░реЗ рдорд┐рдиреА-рдмреЗрд╕рд┐рдХ рдореЗрдВ, рдЗрд╕ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: <br><br><pre> <code class="hljs lisp">z=(<span class="hljs-name"><span class="hljs-name">x&gt;y</span></span>)*5+(<span class="hljs-name"><span class="hljs-name">x&lt;=y</span></span>)*10</code> </pre><br>  рд░рдирдЯрд╛рдЗрдо рддреНрд░реБрдЯрд┐ рдХрд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ред  рдФрд░ рдпрд╣ рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ: рд▓рд┐рд╕реНрдк рдореЗрдВ, рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ (&gt; xy) рдХреА рдЧрдгрдирд╛ рдиреАрд▓ рдпрд╛ рдЯреА рдХреЗ рд╕рд╛рде рдХреА рдЬрд╛рддреА рд╣реИред рд▓реЗрдХрд┐рди рдирд┐рд▓ / рдЯреА рдХреЛ 5 рд╕реЗ рдЧреБрдгрд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ ... рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдкрд░реЗрд╢рд╛рдиреА рдорджрдж рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред  рдЖрдЗрдП рдХреБрдЫ рд╕рд░рд▓ рдореИрдХреНрд░реЛрдЬрд╝ рд▓рд┐рдЦреЗрдВ рдЬреЛ рддреБрд▓рдирд╛рддреНрдордХ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ 0/1 (рдиреАрд▓ / рдЯреА рдХреЗ рдмрдЬрд╛рдп) рдХреЗ рд╕рд╛рде рдмрджрд▓рддреЗ рд╣реИрдВ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $= (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (= ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $== (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (= ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $&gt; (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (&gt; ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $&lt; (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (&lt; ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $/= (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (/= ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $&lt;&gt; (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (/= ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $&lt;= (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (&lt;= ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) (<span class="hljs-name"><span class="hljs-name">defmacro</span></span> $&gt;= (<span class="hljs-name"><span class="hljs-name">xy</span></span>) `(if (&gt;= ,x ,y) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>))</code> </pre><br>  рдЕрдм, ipn2pref рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд▓рд╛рдЗрди рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ рдЬреЛ рдСрдкрд░реЗрд╢рди рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдкреВрд░рд╛ рдХрд░рддреА рд╣реИред  рдпрд╣рд╛рдБ рд▓рд╛рдЗрди рд╣реИ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">ipn2pref</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> f) (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f) (<span class="hljs-name"><span class="hljs-name">reverse</span></span> (<span class="hljs-name"><span class="hljs-name">subseq</span></span> s <span class="hljs-number"><span class="hljs-number">0</span></span> ar))) (<span class="hljs-name"><span class="hljs-name">subseq</span></span> s ar)))</code> </pre><br>  рдпрд╣рд╛рдВ (рдХрд╛рд░ f) рдСрдкрд░реЗрд╢рди рдХрд╛ рдирд╛рдо рд╣реИред  рддреБрд▓рдирд╛ рдХреЛрдб рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ рдХрд╛рд░реНрдп рд▓рд┐рдЦреЗрдВ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defun</span></span> chng-comp (<span class="hljs-name"><span class="hljs-name">op</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">member</span></span> op '(= == /= &lt;&gt; &gt; &lt; &gt;= &lt;=)) (<span class="hljs-name"><span class="hljs-name">implode</span></span> (<span class="hljs-name"><span class="hljs-name">cons</span></span> '$ (<span class="hljs-name"><span class="hljs-name">explode</span></span> op))) op))</code> </pre><br>  рдлрд╝рдВрдХреНрд╢рди рдпрд╣ рдЬрд╛рдВрдЪрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЗрд╕рдХрд╛ рддрд░реНрдХ рдПрдХ рддреБрд▓рдирд╛рддреНрдордХ рдСрдкрд░реЗрд╢рди рд╣реИ, рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рд╢реБрд░реБрдЖрдд рдореЗрдВ "$" рдЪрд░рд┐рддреНрд░ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдЕрдм рдЗрд╕реЗ ipn2pref рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╣реА рд╕реНрдерд╛рди рдкрд░ рдХреЙрд▓ рдХрд░реЗрдВ: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">ipn2pref</span></span> (<span class="hljs-name"><span class="hljs-name">cdr</span></span> f) (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">cons</span></span> (<span class="hljs-name"><span class="hljs-name">chng-comp</span></span> (<span class="hljs-name"><span class="hljs-name">car</span></span> f)) (<span class="hljs-name"><span class="hljs-name">reverse</span></span> (<span class="hljs-name"><span class="hljs-name">subseq</span></span> s <span class="hljs-number"><span class="hljs-number">0</span></span> ar))) (<span class="hljs-name"><span class="hljs-name">subseq</span></span> s ar)))</code> </pre><br>  рдЗрд╕рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдХреНрдпрд╛ рд╣реЛрдЧрд╛?  рддреБрд▓рдирд╛ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рдореИрдХреНрд░реЛ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рджреНрд╡рд╛рд░рд╛ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдЕрдиреНрдп рд╕рднреА рдСрдкрд░реЗрд╢рди рдирд╣реАрдВ рдмрджрд▓реЗрдВрдЧреЗред  рдпрджрд┐ рдЖрдк рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="hljs bash">proc <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> x,y x=1 y=2 result=(x&gt;y)*5+(x&lt;=y)*10 end_proc</code> </pre><br>  рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ рдХреЙрд▓ рдХрд░реЗрдВ, рд╣рдореЗрдВ рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓рддрд╛ рд╣реИред <br><br>  рдЖрдЬ рдХреЗ рд▓рд┐рдП рдмрд╕ рдЗрддрдирд╛ рд╣реАред <br><br>  рдЗрд╕ рд▓реЗрдЦ рдХрд╛ рдХреЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><b>рдпрд╣рд╛рдВ</b></a> рд╕реНрдерд┐рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><b>рд╣реИред</b></a> <br>  рдЬрд╛рд░реА рд░рдЦрд╛ рдЬрд╛рдПред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi423663/">https://habr.com/ru/post/hi423663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi423647/index.html">рдПрдХ рд╕рд░рд▓ рддрдВрддреНрд░рд┐рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдмрдирд╛рдПрдБ</a></li>
<li><a href="../hi423651/index.html">рд╣рдо рд╣реИрдХрдереЙрди рд╕реНрдорд╛рд░реНрдЯрдореЗрд▓ рд╣реИрдХ: рд╡реЗрд▓рдХрдо рдЯреВ рд╡реЗрд▓рдХрдо рдХреЗ рд▓рд┐рдП рд╕рднреА рдХреЛ рдЖрдордВрддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi423653/index.html">PsRealVehicle, рдпрд╛ рдмрдЦрд╝реНрддрд░рдмрдВрдж рдпреБрджреНрдз рдореЗрдВ рдУрдкрди рд╕реЛрд░реНрд╕ рдЯреИрдВрдХ рднреМрддрд┐рдХреА рдкреНрд▓рдЧрд┐рди: рдЖрдХреНрд░рдордг</a></li>
<li><a href="../hi423655/index.html">рдЬреЗрдирд░рд┐рдХ + рд╕реНрдкреНрд░рд┐рдВрдЧ: рдж рдлреЛрд░реНрд╕ рдмреА рд╡рд┐рдж рдпреВ</a></li>
<li><a href="../hi423657/index.html">рдореИрдВ рдЬрд▓реНрджреА рд╕реЗ рдирд┐рдЬреА рддрд░реАрдХреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдирдХреИрдкреНрд╕реБрд▓реЗрд╢рди рдХрд╛ рд╕рдореНрдорд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реВрдВ, рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд┐рдзрд┐ рддрд╛рд▓рд┐рдХрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ</a></li>
<li><a href="../hi423667/index.html">рдкрд╣рд▓рд╛ рдорд╛рдЗрдХреНрд░реЛрдкреНрд░реЛрд╕реЗрд╕рд░ рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕</a></li>
<li><a href="../hi423679/index.html">рдПрдХ рдЧрдЧрдирдЪреБрдВрдмреА рдЗрдорд╛рд░рдд рдФрд░ рдЕрдВрдбреЗ рдХреЗ рд╕рд╛рде рдПрдХ рдХрд╛рд░реНрдп - рдиреНрдпреВрдЯрди рдХреЗ рдмрд┐рди рдирд╣реАрдВ?</a></li>
<li><a href="../hi423683/index.html">рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░: рдЦрд░реЛрдВрдЪ рд╕реЗ рдмрдврд╝рддреЗ DevOps</a></li>
<li><a href="../hi423685/index.html">PostgreSQL рд╕рдВрдЧрддрд┐: рдЧреЛрд▓рд╛рдХрд╛рд░ рдирд╣реАрдВ, рдШреЛрдбрд╝рд╛ рдирд╣реАрдВ, рдирд┐рд░реНрд╡рд╛рдд рдореЗрдВ рдирд╣реАрдВ</a></li>
<li><a href="../hi423687/index.html">рд╣рд╛рдЗрдкрд░рдПрдХреНрд╕ рдкрд▓реНрд╕рдлрд╛рдпрд░ рдПрдлрдкреАрдПрд╕ рдкреНрд░реЛ - рддреЗрдЬ, рдЕрд░реНрдердкреВрд░реНрдг, рдЕрдзрд┐рдХ рд╕рд╕реНрддреА</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>