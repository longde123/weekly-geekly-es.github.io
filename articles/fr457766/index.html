<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßõüèº ‚öíÔ∏è üçâ Nous g√©n√©rons des niveaux de tuiles et cachons des carr√©s au joueur üöß ‚ôêÔ∏è üíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="G√©n√©ration de niveaux dans 2 inexplor√©s 
 Nous sommes tr√®s fiers du g√©n√©rateur de niveau de jeu Unexplored 2, c'est un programme qui r√©pond √† toutes l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous g√©n√©rons des niveaux de tuiles et cachons des carr√©s au joueur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457766/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y7/gx/lz/y7gxlziwifqpjitd5m4rqtp-x8a.gif"></div><br><h1>  G√©n√©ration de niveaux dans 2 inexplor√©s </h1><br>  Nous sommes tr√®s fiers du g√©n√©rateur de niveau de jeu Unexplored 2, c'est un programme qui r√©pond √† toutes les exigences modernes.  Dans un article, je parlerai de la fa√ßon dont les niveaux de jeu sont cr√©√©s. <br><br>  Nous n'avons pas eu √† r√©inventer la roue.  Dans Unexplored 1, nous avons d√©j√† cr√©√© des techniques qui ont grandement influenc√© le succ√®s du premier jeu.  Unexplored 2 vient de poursuivre ce qui a √©t√© commenc√©.  Le fondement de notre technologie se compose de deux parties: nous utilisons la g√©n√©ration √† plusieurs √©tapes, qui simule presque un processus tr√®s similaire au travail d'un concepteur de niveau vivant.  De plus, nous utilisons une technique appel√©e ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">g√©n√©ration de donjons cycliques</a> ¬ª, qui est bien meilleure pour g√©n√©rer des niveaux d'apparence naturelle que la plupart des applications de cr√©ation de contenu g√©n√©ratif standard.  Dans cet article, je parlerai du premier aspect.  L'adaptation de la g√©n√©ration de donjons cycliques √† Unexplored 2 fera l'objet d'un prochain billet. <br><br><h2>  Imitation de la conception au niveau ¬´humain¬ª </h2><br>  Le g√©n√©rateur de niveau d√©compose le processus de g√©n√©ration de niveau en un ensemble d'√©tapes contr√¥l√©es.  Cela va de la planification de haut niveau √† une carte d√©taill√©e de bas niveau.  En fait, il cr√©e d'abord une esquisse du niveau, puis commence √† ajouter des d√©tails jusqu'√† ce que le niveau soit termin√© et rempli. <br><a name="habracut"></a><br>  √Ä chaque √©tape individuelle de ce processus, nous utilisons des grammaires g√©n√©ratives pour transformer le niveau g√©n√©r√© dans les √©tapes pr√©c√©dentes.  En particulier, nous utilisons des grammaires de tuiles et des grammaires de graphes, qui sont des vari√©t√©s de grammaires de cha√Ænes plus g√©n√©rales qui recherchent et remplacent simplement des parties de cha√Ænes par d'autres cha√Ænes, tout comme les expressions r√©guli√®res.  Si vous n'√™tes pas familier avec les concepts de grammaires g√©n√©ratives et d'expressions r√©guli√®res, je vous recommande de rechercher des exemples sur Internet (ou simplement de continuer √† lire - vous n'aurez pas besoin de connaissances approfondies pour comprendre la signification de ce message). <br><br>  La premi√®re √©tape du niveau est relativement simple.  Nous utilisons un bitmap basse r√©solution pour localiser les bases du niveau.  Dans l'exemple ci-dessous, le niveau est initialement tr√®s simple: il se compose uniquement de l'entr√©e (e) √† gauche, de l'entr√©e √† droite et reliant le chemin direct.  La plupart des autres tuiles sont soit ind√©finies (u) ou bloqu√©es (B) car elles sont sur les bords du niveau. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a03/aa5/2fa/a03aa52fae0cb45e82425c4c95e38214.png"></div><br>  <i>Figure 1: Un simple croquis du niveau</i> <br><br>  √Ä l'√©tape suivante, des d√©tails sont ajout√©s: un groupe de pi√®ces appara√Æt, reli√©es par des portes, con√ßues pour passer dans une certaine direction: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b9/7cd/1e4/2b97cd1e4732bab984f5181a37ba71f7.png"></div><br>  <i>Figure 2: Structure ajout√©e</i> <br><br>  Les cartes de tuiles sont id√©ales pour cr√©er une g√©om√©trie de niveau, mais il est plus pratique de travailler avec des graphiques pour g√©n√©rer des structures et une logique de jeu.  C'est ce que le g√©n√©rateur fait ensuite: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b3/da0/5c5/2b3da05c5967229d8d14816df5bf80ce.png"></div><br>  <i>Figure 3: Graphique de base</i> <br><br>  Dans le graphique, certains n≈ìuds contiennent des sous-n≈ìuds, dans notre cas la plupart des portes sont marqu√©es comme dangereuses (H), et certaines sont marqu√©es comme ouvertes (O). <br><br>  Sur la base d'une analyse assez simple et de r√®gles g√©n√©ratives, de nouveaux √©l√©ments sont ajout√©s au graphique.  Par exemple, le point final (G) est situ√© √† un endroit suffisamment √©loign√© des entr√©es.  De plus, de petits dangers sont ajout√©s au graphique pour rendre le niveau plus mena√ßant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/784/3a5/6e0/7843a56e0fb89b3a1350076657c212c5.png"></div><br>  Figure 4: Nouveaux √©l√©ments ajout√©s au graphique. <br><br>  En attendant, une carte de tuiles basse r√©solution est convertie √† l'aide de plusieurs fonctions de bruit en une carte de tuiles haute r√©solution pour lui donner un aspect plus naturel: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/465/e65/18e/465e6518e606b4eb70e4d04b2b3ca8c1.png"></div><br>  Figure 5: Carte de tuiles haute r√©solution <br><br>  Ensuite, les informations du graphique sont utilis√©es pour d√©corer la carte des tuiles et ajouter de nouveaux √©l√©ments: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/722/9b7/140/7229b7140304bb1f8302586b2dfb6c16.png"></div><br>  <i>Figure 6: Carte de tuile d√©cor√©e.</i> <br><br>  La carte telle qu'elle est g√©n√©r√©e est uniquement destin√©e √† √™tre pr√©sent√©e dans le gameplay.  Les tuiles blanches indiquent des espaces ouverts, et presque toutes les autres tuiles indiquent des √©l√©ments de jeu tr√®s sp√©cifiques, par exemple, un passage secret √† travers les buissons (cercles verts), des ¬´portes dans les fourr√©s¬ª (carr√©s verts et bandes lilas) ou des fray√®res pour attacher des arbres (cercles rouges avec lettre s).  La partie principale du niveau n'est pas encore d√©finie, et √† ce stade, le g√©n√©rateur suppose que ces zones doivent √™tre remplies de mani√®re √† bloquer le mouvement du joueur. <br><br>  Il effectue cette t√¢che sur plusieurs couches: la couche inf√©rieure indique le niveau de hauteur et le type de surface, la seconde ajoute de l'eau √† certains endroits, et la troisi√®me couche ajoute de la v√©g√©tation et d'autres d√©corations. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e37/6b6/f11/e376b6f11b4e4e526986238c4d0c50cc.png"></div><br>  <i>Figure 7: Types de surfaces terrestres (herbe, boue et pierres)</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d7/898/9ac/2d78989ac691225d306a3319c2f7e111.png"></div><br>  <i>Figure 8: eau</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/021/ade/799/021ade7992212c857d6e4101e31273e0.png"></div><br>  <i>Figure 9: V√©g√©tation et autres d√©corations</i> <br><br>  Ces couches sont ensuite ajout√©es au fichier de donn√©es de niveau final, auquel des d√©tails suppl√©mentaires sont ajout√©s.  Le jeu utilise ces donn√©es pour placer des ressources et construire le niveau tel que vous le voyez.  Il existe de nombreuses astuces √† ce stade.  Par exemple, vous remarquerez peut-√™tre que les tuiles de terrain de la figure ci-dessus ont des formes √©tranges.  Ces formulaires sont utilis√©s pour cr√©er des ¬´tuiles¬ª au sol de telle mani√®re que le joueur ne remarque pas que les donn√©es source √©taient une carte de tuiles.  J'en parlerai dans la deuxi√®me partie de l'article. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc9/b89/75c/bc9b8975c9b0704266c5786af53834eb.png"></div><br>  <i>Figure 10: Niveau pr√™t</i> <br><br><h2>  Ajout de gameplay </h2><br>  Cette m√©thode de g√©n√©ration de niveau pr√©sente de nombreux avantages.  L'√©tape de conversion d'un niveau en graphique est particuli√®rement importante afin de simplifier le ¬´raisonnement¬ª sur le gameplay au g√©n√©rateur.  Dans l'exemple ci-dessus, nous n'avons rien fait d'autre que de v√©rifier que les cibles de niveau sont cr√©√©es √† une certaine distance des entr√©es.  Mais pour d'autres niveaux √† ces √©tapes, plus de t√¢ches sont ex√©cut√©es. <br><br>  Prenez par exemple une carte de grotte dans un style de donjon plus classique (par rapport au niveau de la for√™t de l'exemple ci-dessus).  Le graphique de base de ce niveau n'a qu'une seule entr√©e et quelques nouveaux types de portes.  Une paire d'entre eux est ferm√©e (L): certaines portes emprisonnent le joueur d'un c√¥t√© (T), et vert fonc√© j'appelle la "valve": ce type de porte permet au joueur d'aller dans une seule direction. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45d/72c/52a/45d72c52a99a84d42541b602c84b7806.png"></div><br>  <i>Figure 11: d√©nombrement de base de la grotte</i> <br><br>  La structure de ce niveau permet au g√©n√©rateur de cr√©er une mission beaucoup plus complexe.  Par exemple, la seule fa√ßon d'arriver √† ce niveau est √† travers une ¬´valve¬ª, for√ßant le joueur √† chercher une autre issue.  La cl√© pour ouvrir la sortie (en bas √† gauche) est situ√©e derri√®re le danger en haut √† gauche, et la cible est situ√©e derri√®re les portes qui pi√®gent le joueur.  Un exemple d'un tel objectif serait un passage qui s'effondre derri√®re un joueur.  En g√©n√©ral, cela cr√©e une grotte int√©ressante √† explorer seule, mais Unexplored 2 a √©galement la possibilit√© d'ajouter des cr√©atures et des √©v√©nements qui se fondent au moment de l'ex√©cution. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45d/72c/52a/45d72c52a99a84d42541b602c84b7806.png"></div><br>  <i>Figure 12: Serrures et cl√©s ajout√©es √† la grotte</i> <br><br>  En utilisant le processus d√©crit ci-dessus, le graphique est utilis√© pour g√©n√©rer et remplir une carte de tuiles enti√®rement d√©taill√©e.  L'application de divers param√®tres refl√©tant la nature des grottes de ce niveau conduit √† des r√©sultats tr√®s vari√©s avec des structures souterraines d√©truites (carr√©s bleus marqu√©s de la lettre c) et de larges abysses √† pointes (cercles lilas): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fca/65c/c79/fca65cc79406fa4ba471d763f8ab6539.png"></div><br>  <i>Figure 13: Niveau de la grotte en d√©tail</i> <br><br><h2>  Pour r√©sumer </h2><br>  J'esp√®re que vous avez une id√©e g√©n√©rale de la fa√ßon dont nous abordons la g√©n√©ration de niveaux dans Unexplored 2. Il s'agit d'un processus complexe en plusieurs √©tapes, sur lequel j'ai l'intention d'√©crire plus dans un proche avenir.  Au moins, je vous ai d√©j√† promis d'√©crire sur l'application de la g√©n√©ration de donjons cycliques.  Mais vous pouvez en dire beaucoup plus, des techniques de narration g√©n√©ratives, des lignes de rendu et des m√©thodes d'ombrage au long processus de conception que nous avons utilis√© pour cr√©er le syst√®me de chance, ainsi que d'autres aspects. <br><br><h1>  Partie 2. Des tuiles aux courbes, ou du plaisir avec le nombre de Voronoi </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a15/895/3a8/a158953a829bff67da8a242686b2675b.png"></div><br>  Un g√©n√©rateur de contenu inexplor√© 2 g√©n√®re des cartes de tuiles.  Un r√©sultat typique ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e2/f20/fff/0e2f20fff2077a7259c639e8aa5bdda8.png"></div><br>  Ces cartes de tuiles sont empil√©es les unes sur les autres et utilisent diff√©rentes tuiles pour indiquer les types de surface de la terre (dans cet exemple l'herbe ou la salet√©), ainsi que diverses d√©corations.  Dans ce cas, il existe plusieurs buissons (grands cercles verts), pierres (cercles noirs), plantes (petits cercles verts), fleurs (cercles blancs) et textures d√©coratives (carr√©s gris).  Il existe √©galement des tuiles sp√©ciales qui indiquent les donn√©es de jeu, par exemple, les points d'apparition marqu√©s de la lettre ¬´s¬ª.  De plus, les tuiles peuvent √™tre marqu√©es avec des informations suppl√©mentaires, par exemple, le niveau de hauteur ou des sous-types sp√©ciaux. <br><br>  Les cartes de tuiles sont une structure de donn√©es pratique pour les g√©n√©rateurs.  Mais en m√™me temps, c'est assez simple, et la grille est souvent perceptible dans le jeu.  Cependant, apr√®s avoir charg√© les donn√©es dans le jeu et plac√© les ressources, le r√©sultat ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/51a/40f/76051a40f79ffbbb15a3054536893003.png"></div><br>  Je pense que nous avons assez bien cach√© les carreaux, et c'est ainsi que nous l'avons obtenu. <br><br><h2>  Voronoi Magic </h2><br>  L'astuce est que les tuiles individuelles correspondent aux cellules du diagramme de Voronoi.  Ce diagramme peut √™tre utilis√© pour g√©n√©rer des formes d'aspect beaucoup plus naturel.  Le diagramme de Voronoi est cr√©√© en semant l'avion avec des points al√©atoires et en le divisant en cellules de telle sorte que chaque point de l'avion appartient √† la cellule correspondant au point de d√©part le plus proche.  Dans la g√©n√©ration de contenu proc√©dural, les diagrammes de Voronoi peuvent √™tre utilis√©s de plusieurs mani√®res int√©ressantes. <br><br>  Un diagramme de Vorono√Ø typique est cr√©√© √† partir d'une distribution al√©atoire, mais assez uniforme des points g√©n√©rateurs, qui ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fd/15a/338/5fd15a3382b48d74706d5f5458c4f7cb.png"></div><br>  Dans Unexplored 2, nous utilisons un autre type de distribution des points g√©n√©rateurs.  Tout d'abord, nous g√©n√©rons un point pour chaque tuile.  Nous pouvons donc √™tre s√ªrs que chaque tuile sur la carte de tuiles correspondra √† une cellule du diagramme de Voronoi. <br><br>  Si nous pla√ßons les points de g√©n√©ration au milieu de chaque cellule, nous obtenons une grille droite qui ressemble exactement √† une carte de tuiles (pour cela et d'autres images ci-dessous, j'ai fait une version d'√©checs dans laquelle la moiti√© des tuiles sont rendues jaunes afin que vous puissiez faire un peu mieux voir les mod√®les): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0dd/a26/a2f/0dda26a2fa9d01ea045c1219d0a3c999.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8eb/451/15b/8eb45115b429cbb8b612f46ce3fad524.png"></div><br>  Le moyen le plus simple consiste √† am√©liorer le graphique en randomisant simplement la position de chaque point de g√©n√©ration.  Lors du d√©placement de points, il convient de v√©rifier que le point ne d√©passe pas la tuile d'origine. <br><br>  Le r√©sultat ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a3/33a/043/4a333a043cf9caadc0a09ff606c046ca.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab6/c25/031/ab6c250312ab2f4e4efec42788c129d5.png"></div><br>  D√©j√† mieux, mais tr√®s bruyant, et n'obtiennent donc pas de belles lignes sinueuses.  L'image peut √™tre am√©lior√©e en effectuant la ¬´relaxation¬ª des diagrammes de Voronoi (c'est une technique standard pour eux, que je ne discuterai pas ici).  Mais il restera toujours toujours un peu bruyant, et il est difficile de pr√©dire efficacement les chiffres sur une √©chelle qui d√©passe l'√©chelle des carreaux individuels. <br><br>  Pour r√©soudre ce probl√®me, nous devons non seulement nous d√©placer de mani√®re al√©atoire, mais aussi l'aborder plus intelligemment.  Diff√©rents types de mouvements peuvent avoir un effet tr√®s diff√©rent.  Par exemple, lors de l'utilisation du bruit Perlin, des cartes de tuiles sinueuses int√©ressantes sont obtenues.  Ou vous pouvez transformer la grille enti√®re en tuiles hexagonales en d√©pla√ßant simplement toutes les deux lignes des points g√©n√©rateurs vers la gauche: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b1/ccb/69e/6b1ccb69e7e6ca475e6c62c56f52b56c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b06/787/b2f/b06787b2f08c28d84f009caffd76ff14.png"></div><br>  Nous avons fait une v√©ritable perc√©e lorsque nous avons commenc√© √† d√©placer les points de g√©n√©ration dans certains mod√®les pour cr√©er des coins arrondis.  La premi√®re √©tape de ce processus est d√©j√† en cours √† l'int√©rieur du g√©n√©rateur de niveau.  Les angles entre les diff√©rents types de surface de la terre sont reconnus, et les tuiles d'angle sont marqu√©es de diff√©rentes figures, indiquant la fa√ßon dont elles sont d√©form√©es pour g√©n√©rer un environnement plus beau: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/822/1fb/21a8221fb1d87fec480db9cc2c95425e.png"></div><br>  Dans ce cas, la diff√©rence de niveaux d'√©l√©vation fait √©galement appara√Ætre des angles sur la carte des tuiles.  C'est pourquoi vous voyez des coins arrondis suppl√©mentaires dans l'herbe en haut √† droite et en bas √† gauche, o√π les pentes ont √©t√© g√©n√©r√©es. <br><br>  Le jeu utilise ces informations pour d√©caler les points de g√©n√©ration du graphique Voronoi.  Chaque coin arrondi d√©cale l'emplacement du point d'origine (voir l'image ci-dessous).  De plus, il d√©place √©galement les points de g√©n√©ration de ses quatre voisins orthogonaux.  Ce processus est cumulatif;  les points de g√©n√©ration peuvent se d√©placer plusieurs fois s'ils sont proches de plusieurs angles.  Cependant, apr√®s avoir trait√© tous les d√©calages, les points de g√©n√©ration sont un peu al√©atoires (environ 10% de la largeur de la tuile dans chaque direction), et le d√©calage final est limit√© √† un maximum de 40% de la largeur de la tuile. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a94/9b9/3f5/a949b93f5e2e724a95658f75af6a50c4.png"></div><br>  Le r√©sultat est d√©j√† de tr√®s bonne qualit√©: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ccc/830/f24/ccc830f24c201bd4e519ca0407f77c18.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8b/d27/edb/b8bd27edb8a753ee92e9d2d5551e6a05.png"></div><br>  Mais nous n'avons pas encore fini ... <br><br><h2>  D√©corez sagement </h2><br>  La forme g√©n√©rale est devenue meilleure, mais les bords sont toujours tr√®s droits et semblent un peu dentel√©s.  Nous cacherons cela en pla√ßant des √©l√©ments courbes sur les bords o√π les couleurs diff√®rent.  Cependant, l'astuce r√©elle est qu'une courbe est souvent plac√©e sur deux bords et que leurs angles les uns par rapport aux autres sont utilis√©s pour d√©terminer la direction de la courbe. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d27/4ef/fc6/d274effc6224874373a8c8c355dcb209.png"></div><br>  Le r√©sultat ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e97/591/baa/e97591baad40e954f3c4b164f2b91739.png"></div><br>  Ensuite, nous avons utilis√© des ressources 3D pour ajouter des coupures de texture: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/711/70a/6b0/71170a6b0ea154c6974e8787be8c0680.png"></div><br>  Enfin, nous ajoutons un autre atout pour remplir le niveau.  L'emplacement de ces actifs est d√©termin√© par les donn√©es de niveau pr√©c√©demment g√©n√©r√©es et suit g√©n√©ralement des principes simples.  Nous utilisons de petits actifs entourant les plus grands pour cr√©er des transitions naturelles et belles.  En particulier, il convient de noter que des pierres sont ajout√©es au pied des falaises, cr√©ant une variabilit√© et adoucissant visuellement les pentes verticales n√©cessaires au gameplay: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/51a/40f/76051a40f79ffbbb15a3054536893003.png"></div><br><h2>  Variabilit√© locale </h2><br>  Les angles ne sont pas le seul type de d√©placement que nous utilisons.  En particulier, nous voulons que les bords soient plus droits √† c√¥t√© des structures artificielles (par exemple, les murs d√©truits illustr√©s ci-dessous): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/839/9f5/127/8399f5127ae11017b243716b075c3324.png"></div><br>  Dans notre syst√®me, cet effet est facile √† r√©aliser.  Nous ajoutons simplement une autre r√®gle de d√©placement, qui interdit le d√©placement de carreaux avec des structures artificielles.  Le g√©n√©rateur utilise de petits carr√©s pour marquer ces tuiles, et le jeu garantit que tous les d√©calages sont simplement ignor√©s: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b84/5b1/372/b845b1372a6623d931eb30ed29fe5bcc.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09e/2c4/f64/09e2c4f64fad5ee474fcbfa21e607c73.png"></div><br>  Si vous regardez le sol, vous pouvez clairement voir que certaines zones sont droites, tandis que d'autres se plient plus naturellement: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c60/5e3/635/c605e363554553121d8c70c61ebaa5b2.png"></div><br>  N'est-ce pas beau? <br><br>  Il existe d'autres r√®gles qui peuvent √™tre facilement ajout√©es √† l'aide de cette technique.  Par exemple, nous for√ßons parfois les carreaux √† cr√©er un motif hexagonal afin que les chemins √©troits restent suffisamment larges pour se d√©placer autour d'eux.  Je suis s√ªr que nous trouverons d'autres utilisations pour d'autres mod√®les. <br><br>  C'est l'une des nombreuses raisons pour lesquelles j'aime les diagrammes de Voronoi.  Une autre fois, j'√©crirai comment nous les utilisons pour g√©n√©rer et d√©corer 2 cartes du monde inexplor√©es. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457766/">https://habr.com/ru/post/fr457766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457756/index.html">Le livre Kafka Streams en action. Applications et microservices en temps r√©el ¬ª</a></li>
<li><a href="../fr457758/index.html">Les ing√©nieurs sauvent les gens perdus dans la for√™t, mais la for√™t ne s'est pas encore rendue</a></li>
<li><a href="../fr457760/index.html">Comment rendre les conteneurs encore plus isol√©s: un examen des technologies de bac √† sable pour conteneurs</a></li>
<li><a href="../fr457762/index.html">R√®gle CCD: avec quoi il est mang√©</a></li>
<li><a href="../fr457764/index.html">10 erreurs de PO jeune (partie II)</a></li>
<li><a href="../fr457768/index.html">Comment je suis devenu vuln√©rable: analyser l'infrastructure informatique avec Qualys</a></li>
<li><a href="../fr457770/index.html">Nous √©crivons un transformateur personnalis√© AST sur TypeScript</a></li>
<li><a href="../fr457774/index.html">√âtudier en tant que pilote priv√© en Terre du Milieu: se d√©placer et vivre dans un village n√©o-z√©landais</a></li>
<li><a href="../fr457776/index.html">Les mines en performance attendent dans les coulisses: partie 2</a></li>
<li><a href="../fr457784/index.html">√âtalonnage Eye-Tracker personnalis√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>