<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè´ üëÜüèæ üë∑ Vigil√¢ncia por v√≠deo em orange pi zero - barato e nem um pouco zangado üõÅ üé∞ ‚è≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, eu me propus a tarefa de implementar vigil√¢ncia por v√≠deo com as seguintes caracter√≠sticas: 



1. Consumo m√≠nimo de energia 
2. O taman...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vigil√¢ncia por v√≠deo em orange pi zero - barato e nem um pouco zangado</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454132/">  Recentemente, eu me propus a tarefa de implementar vigil√¢ncia por v√≠deo com as seguintes caracter√≠sticas: <br><br><ol><li>  Consumo m√≠nimo de energia </li><li>  O tamanho m√≠nimo do dispositivo que receber√° v√≠deo da c√¢mera (ou v√°rias c√¢meras).  Com um tamanho t√£o pequeno, para que possa, por exemplo, ser amontoado em uma caixa de instala√ß√£o de 10 a 10 cm ou escondido em um canal de cabo largo (!) </li><li>  As c√¢meras IP ser√£o conectadas via wi-fi, ou seja, √© imposs√≠vel determinar quem est√° assistindo / gravando v√≠deo delas.  Voc√™ pode aliment√°-los a partir da rede geral, seja acessando ilumina√ß√£o ou soquetes no escrit√≥rio </li><li>  Deve haver uma grava√ß√£o de v√≠deo (no meu caso - em um cart√£o microSD), deve ser poss√≠vel assistir a v√≠deos pela Internet de qualquer lugar do mundo, bem como atrav√©s de um aplicativo m√≥vel </li><li>  Obviamente, deve haver a capacidade de configurar remotamente todo o sistema - adicionar novas c√¢meras, copiar e excluir grava√ß√µes, ter acesso a todas as configura√ß√µes </li><li>  O custo m√≠nimo!  Mas que tal?  Em nenhum lugar sem ele </li></ol><br>  Para implementar essa id√©ia, a escolha recaiu sobre os seguintes componentes: <br><a name="habracut"></a><br>  1) O computador de placa √∫nica mais barato com Wi-Fi a bordo, no qual voc√™ pode distribuir alguma distribui√ß√£o de arm linux - por exemplo, meu debian favorito.  Malinka √© caro, mas o pi zero zero no ebay custar√° apenas 900 rublos (h√° alguns meses eu o comprei por 700 rublos).  Aqui est√° um link para o ebay - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui.</a> <br><br><img src="https://ltparts.ru/upload/shop_1/4/5/5/item_45566/item_45566.jpg" alt="imagem"><br><br>  2) Na verdade, c√¢meras IP wifi - em nenhum lugar sem elas.  Pequeno, abobadado, teto.  E pelo menos 720p - geralmente para vigil√¢ncia por v√≠deo em uma varanda de escrit√≥rio n√£o √© mais necess√°rio.  O pre√ßo de emiss√£o √© de cerca de 1.500 rublos por c√¢mera.  At√© onde ir, aqui no aliexpress - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> <br><br><img src="https://ae01.alicdn.com/kf/HTB1YiqTdjrguuRjy0Feq6xcbFXao.jpg" alt="imagem"><br><br>  3) cart√£o microSD de 32 GB.  Por que 32, nem mais nem menos?  Porque, no meu caso, voc√™ precisa retroceder o v√≠deo de duas c√¢meras alguns dias atr√°s.  Bem, ent√£o, outros 300-400 rublos. <br><br>  4) Adaptadores de energia para placa √∫nica e para c√¢meras. <br><br>  Ent√£o, o que foi feito.  Depois de receber o pacote estimado pelo correio, peguei um pagador de laranja de l√°, examinei-o e, antes de tudo, pensei - caramba, mas n√£o h√° sa√≠da de v√≠deo.  Como instalar o software debian e de vigil√¢ncia por v√≠deo e fazer as configura√ß√µes iniciais?  Lembrei-me imediatamente de que na framboesa sempre havia um AV composto comum, mas aqui n√£o √©.  Bem, n√£o √© poss√≠vel que o fabricante n√£o tenha tido a oportunidade de se conectar via composto - pensei, e fui ao Google para assistir √† pinagem do GPIO.  Sim, o segundo alfinete √© a terra e o 9¬∫ √© a sa√≠da da TV. <br><br>  Solde o soquete av.  Agora vamos usar o adaptador AV-&gt; VGA (voc√™ adivinhou que tamb√©m pode ser comprado no aliexpress, uma coisa √∫til) e conectar-se ao nosso monitor.  Mas ainda n√£o incluiremos nada - afinal, ainda n√£o preparamos um cart√£o microSD. <br><br>  N√≥s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">acessamos</a> o site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.orangepi.org</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">baixamos</a> a distribui√ß√£o da √°rea de trabalho Debian xfce, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gravamos</a> no cart√£o usando o imager de disco ou o gravador do win32.  Colamos a unidade flash USB em nossa laranja, ligamos o monitor, conectamos o adaptador de energia e ... nada.  √â exatamente isso que os rec√©m-chegados provavelmente encontrar√£o - um computador de placa √∫nica n√£o inicializa de forma alguma, mas apenas brilha com um diodo amarelo.  O que √© isso  Uma placa gravada incorretamente (talvez), uma placa de placa √∫nica que n√£o funciona (improv√°vel, porque acabamos de desempacot√°-la), n√£o h√° sinal da sa√≠da de v√≠deo?  O problema mais comum √© nutri√ß√£o.  O pi laranja, como framboesas e outros de placa √∫nica, consome muita energia - o adaptador deve ser de 5 V / 2 A, se o adaptador estiver fraco e a energia cair nos primeiros segundos de troca de uma placa √∫nica, ele n√£o funcionar√° e n√£o funcionar√°.  Portanto, use uma boa fonte de alimenta√ß√£o poderosa e n√£o recarregue a partir do seu antigo Android. <br><br>  Conectamos um bom adaptador de energia, vemos como foi o download do debian.  Vemos a √°rea de trabalho - √≥timo!  Agora voc√™ precisa configurar o dispositivo para que ele funcione atrav√©s de Wi-Fi.  Entramos em conex√µes de rede, criamos uma nova conex√£o Wi-Fi, inserimos nosso nome de usu√°rio e senha no Wi-Fi do escrit√≥rio em casa - agora o dispositivo est√° em nossa rede local e tem acesso √† Internet!  Agora precisamos nos livrar do monitor. <br><br>  Para poder ver a √°rea de trabalho remotamente, o programa vnc viewer nos ajudar√° e em um servidor vnc de placa √∫nica.  Normalmente, essa coisa j√° est√° embutida no debian, que √© distribu√≠do pelo fabricante dos dados dos pagadores √∫nicos, voc√™ s√≥ precisa configur√°-lo - insira os par√¢metros de autoriza√ß√£o, etc.  Depois de garantir que agora tenhamos acesso √† √°rea de trabalho em nossa rede local, removemos o monitor, ocultamos o dispositivo em uma caixa / canal a cabo / em outro local e configuramos todo o resto atrav√©s do visualizador vnc, enquanto estamos sentados no computador de costume. <br><br>  Como um software para vigil√¢ncia por v√≠deo, o zoneminder foi escolhido.  Por que exatamente ele?  Gr√°tis, flex√≠vel, f√°cil de configurar, dispon√≠vel na vers√£o arm para nossa placa √∫nica com debian.  Este software funciona em php / mysql, ent√£o primeiro voc√™ precisa instalar os pacotes necess√°rios: <br><br><pre><code class="plaintext hljs">sudo apt-get install php5 mysql-server php-pear php5mysql php5-gd</code> </pre> <br>  Em seguida, precisamos adicionar a linha em /etc/apt/sources.list: <br><br><pre> <code class="plaintext hljs">deb http://ftp.debian.org/debian jessie-backports main</code> </pre> <br>  Realizamos uma atualiza√ß√£o: <br><br><pre> <code class="plaintext hljs">sudo apt-get update</code> </pre> <br>  E, finalmente, pelo que todos come√ßamos isso: <br><br><pre> <code class="plaintext hljs">sudo apt-get install zoneminder</code> </pre> <br>  Quando o console nos informou que o zoneminder est√° instalado, vamos para a sua configura√ß√£o.  O processo de configura√ß√£o √© descrito em detalhes no site oficial do zoneminder, n√£o faz sentido listar todos os seus pontos neste artigo; portanto, decidiremos que o querido leitor tenha feito isso e, agora, se digitarmos nosso navegador no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">endere√ßo do</a> computador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de um assinante / zm,</a> iremos para o painel de administra√ß√£o de vigil√¢ncia por v√≠deo baseado na Web.  Aqui precisamos adicionar os endere√ßos IP das c√¢meras, definir os par√¢metros para grava√ß√£o de v√≠deo e assim por diante. <br><br><img src="http://d.radikal.ru/d26/1905/68/8ed0bed4007c.jpg" alt="imagem"><br><br>  Agora podemos assistir a v√≠deos de c√¢meras atrav√©s do navegador da rede interna, tanto atrav√©s da rede com fio quanto via Wi-Fi. <br><br><img src="http://d.radikal.ru/d33/1905/f1/4c69d9aaab2a.jpg" alt="imagem"><br><br>  Mas a tarefa era assistir a v√≠deos pela Internet de qualquer lugar do mundo - e ainda n√£o o implementamos.  Ent√£o, vamos implementar!  Pelo menos duas op√ß√µes v√™m √† mente: <br><br><ol><li>  Entre na √°rea de trabalho remota como uma linha do tempo.  Infelizmente, a linha do tempo funciona mais ou menos corretamente apenas em "framboesas", aqui, mesmo com um pandeiro e feiti√ßos, voc√™ n√£o consegue nada </li><li>  Temos um ip dedicado, v√° para as configura√ß√µes do roteador, encaminhe as portas necess√°rias, configure o servidor virtual, agora podemos ver o painel de administra√ß√£o do zoneminder, por exemplo, em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">our_white_ip</a> : 123.  Isso √© bom, mas e se n√£o houver um ip dedicado? </li><li>  Se n√£o houver um ip dedicado, lembre-se de vpn e dyndns.  Um grande n√∫mero de artigos √© dedicado a isso, incluindo Habr√©; procure e encontre informa√ß√µes </li></ol><br>  Agora resta adicionar a capacidade de assistir a v√≠deos do telefone.  Baixe para o nosso aplicativo Android zoneminder client mobile (facilmente google) e para iphone - Surveillance Pro. <br><br><img src="http://dvr-security.net/air/zmc/screenshots/login_portrait.png" alt="imagem"><br><br><img src="https://is4-ssl.mzstatic.com/image/thumb/Purple118/v4/66/6f/22/666f2254-ac58-834b-3b6f-832a0ff9f120/mzl.cqzeieud.png/690x0w.jpg" alt="imagem"><br><br>  No total, por v√°rios milhares de rublos, temos nosso pr√≥prio servidor de vigil√¢ncia por mini-v√≠deo, que pode ser facilmente escondido em um canal a cabo e que consome eletricidade por apenas um centavo, duas c√¢meras sem fio e a capacidade de sempre assistir de um computador ou telefone de qualquer lugar com acesso √† Internet o que acontece no seu escrit√≥rio / garagem / varanda. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt454132/">https://habr.com/ru/post/pt454132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt454114/index.html">Experi√™ncia no uso do Starwind VSAN e do EMC ScaleIO (VxFlexOS) + dicas para o armazenamento mini Enterprise (1 parte)</a></li>
<li><a href="../pt454124/index.html">O livro "Aprendendo a codificar em JavaScript"</a></li>
<li><a href="../pt454126/index.html">De falhas di√°rias √† estabilidade: Informatica com 10 olhos de administrador</a></li>
<li><a href="../pt454128/index.html">Como fazer dois aplicativos de um. Experi√™ncia J√∫nior Tinkoff</a></li>
<li><a href="../pt454130/index.html">C-V2X com suporte para redes 5G NR: um novo paradigma para troca de dados entre ve√≠culos</a></li>
<li><a href="../pt454136/index.html">O mais belo teorema da matem√°tica: a identidade de Euler</a></li>
<li><a href="../pt454138/index.html">10 de junho, Deworkacy - QA Good Communication</a></li>
<li><a href="../pt454140/index.html">De advogado a testador em Yandex. A hist√≥ria do meu est√°gio</a></li>
<li><a href="../pt454144/index.html">No Java 13, eles querem adicionar "blocos de texto"</a></li>
<li><a href="../pt454148/index.html">Verificando o desempenho do SOC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>