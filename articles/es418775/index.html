<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîº ü§∏üèø üö§ C√≥mo eliminar y "pegar" un panorama esf√©rico en DJI Mavic Air üò∏ üî¨ üìê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Con el lanzamiento de Dji Mavic Air, el proceso de creaci√≥n de panoramas esf√©ricos parece haberse simplificado al l√≠mite: presion√≥ un bot√≥n y la esfer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo eliminar y "pegar" un panorama esf√©rico en DJI Mavic Air</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/coptertime/blog/418775/">  Con el lanzamiento de Dji Mavic Air, el proceso de creaci√≥n de panoramas esf√©ricos parece haberse simplificado al l√≠mite: presion√≥ un bot√≥n y la esfera est√° lista.  Eso es lo que dec√≠a el anuncio.  Para ser honesto, ya esperaba que toda nuestra pelota fuera disparada en los primeros meses de ventas, pero por alguna raz√≥n esto no sucedi√≥. <br><br><img src="https://habrastorage.org/webt/jx/h4/lo/jxh4lof5xrcketwjgopnrbsckgq.jpeg"><br>  <i>foto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Paul Oostveen</a></i> <br><a name="habracut"></a><br>  Lo m√°s probable es que haya varias razones: el software incorporado es extremadamente primitivo y no puede crear un panorama decente si las condiciones son al menos ligeramente diferentes de lo ideal.  Sobre el agua o sobre la nieve en tiempo nublado puede obtener trozos de cielo en el suelo y otras "bellezas", bueno, no estoy hablando de los colores mediocres del archivo jpeg terminado y absolutamente ninguna resoluci√≥n.  Tambi√©n un problema son los objetos ubicados cerca de la c√°mara; por ejemplo, para quitar una esfera donde una torre estar√° en primer plano o algo similar en la m√°quina probablemente no funcionar√°.  La raz√≥n de esto es paralaje, es decir, la deriva del helic√≥ptero durante el disparo (a pesar de la muy buena retenci√≥n del GPS de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mavic Air</a> : una docena de cent√≠metros ser√° suficiente para estuporizar la automatizaci√≥n de los sistemas integrados). <br><br>  En publicidad, la resoluci√≥n panor√°mica es de 32mp, pero ¬øes tanto cuando disparamos a 360 grados, y en todas partes con pantallas con una resoluci√≥n de 4K o incluso mayor?  Adem√°s, el firmware no sabe c√≥mo pegar el cielo y no entiende cu√°les son los colores correctos, y esto es imposible.  Aunque el helic√≥ptero puede disparar a +15 grados, todav√≠a no es suficiente para obtener un "techo". <br><br><img src="https://habrastorage.org/webt/ih/ov/wu/ihovwufh8nhz3r-d83_9sxaj6vs.png"><br><br>  Pero no todo es tan malo.  Si est√° decidido a obtener un buen panorama, es bastante posible con Mavic Air.  Al principio, era un poco esc√©ptico sobre el disparo est√°ndar de 25 fotogramas, pero luego llegu√© a la conclusi√≥n de que esto es suficiente.  Anteriormente, cuando grab√© en DJI Phantom ¬æ o DJI Mavic Pro usando Litchi, intent√© tomar de 32 a 48 fotos.  M√°s o menos  Los 25 ofrecidos por Mavic Air al principio me parecieron un poco, prob√© Litchi, pero no se produjo un aumento significativo.  En el proceso de capacitaci√≥n, desarroll√© una t√©cnica clara y optimic√© el proceso.  Ahora, para una bater√≠a no muy grande, logro hacer de 4 a 5 esferas, y el pegado con correcci√≥n de color tarda entre 10 y 15 minutos.  A la salida, tenemos un panorama con una resoluci√≥n de hasta 177mp con buenos colores, cielo normal y control total de lo que est√° sucediendo. <br><br>  Entonces, ¬øqu√© se necesita para lograr un buen resultado? <br><br><ul><li>  Software est√°ndar DJI GO 4 y guardar fotos en DNG Raw </li><li>  Adobe Lightroom </li><li>  PtGui Pro </li><li>  Adobe Photoshop ...  10-20 minutos para cada panorama </li></ul><br>  En primer lugar, es recomendable eliminar todo correctamente para minimizar el tiempo de procesamiento.  Por supuesto, disparar al amanecer / atardecer es muy hermoso, pero debido al sol bajo y al posible resplandor, el pegado puede ser dif√≠cil.  Puede usar un parasol adicional: esto facilitar√° el trabajo, pero a√∫n tendr√° marcos donde el sol brilla directamente en la c√°mara.  Para los primeros experimentos, elija un reloj m√°s cercano al mediod√≠a, entonces el sol no podr√° entrar en el marco.  Tambi√©n vale la pena evitar los objetos que est√°n muy cerca del helic√≥ptero.  Seleccionar planos con objetos equidistantes.  Los espacios grandes pueden ser muy dif√≠ciles de unir sin una textura obvia: lago / mar / nieve / arena.  Recomiendo apagar la exposici√≥n autom√°tica de la c√°mara.  Mire a su alrededor y seleccione la velocidad de obturaci√≥n promedio y la apertura (en el caso de DJI Phantom 4 Pro), fije la sensibilidad (ISO).  Incluso si en alguna direcci√≥n la exposici√≥n no es ideal, se puede corregir en Lightroom al convertir de RAW.  Esto es mucho m√°s f√°cil que combatir los errores de automatizaci√≥n que pueden ocurrir si la c√°mara apunta al sol o al fondo es un bosque s√≥lido / agua y superficies similares. <br><br>  Aseg√∫rese de que la opci√≥n de guardar originales est√© activada.  Cuando se configuran todos los par√°metros, puede comenzar a disparar.  En el proceso, recomiendo controlar lo que elimina el dispositivo.  Si hay alg√∫n objeto principal en el cuadro, debe asegurarse de que se dispara con el cuadro completo, es decir, no cae en la uni√≥n de 2 cuadros y no est√° demasiado cerca del borde del cuadro.  Sin embargo, si esto sucediera, es mejor no mover el helic√≥ptero al final de la encuesta, usando solo la rotaci√≥n alrededor de su eje e inclinando la c√°mara para tomar algunos fotogramas del objeto manualmente, esto puede simplificar enormemente el pegado.  Para obtener un panorama hermoso, no es necesario ir demasiado alto.  Los panoramas se ven geniales, donde puedes sumergirte en el interior, puedes ubicarte no m√°s arriba, sino entre los objetos de disparo, pero debes asegurarte de que el helic√≥ptero pueda eliminar los bordes superiores de los objetos para que no se desdibujen. <br><br><img src="https://habrastorage.org/webt/r1/12/cu/r112cueigjsmwytgjbde7hggtmc.jpeg"><br>  <i>Un ejemplo en el que el helic√≥ptero era demasiado bajo.</i>  <i>El panorama est√° pegado con el software incorporado DJI Mavic Air.</i>  <i>Sin embargo, es probable que si toma el c√≥digo fuente y lo pega con un programa panor√°mico externo, puede guardarlo.</i> <br><br>  Y ahora, se reciben las tramas, procedemos al procesamiento.  DJI Go 4 guarda todas las fuentes en una carpeta separada, "Panorama", copia el contenido de la carpeta deseada en el disco duro y col√≥calo en Lightroom.  Nuestra tarea es preparar cuadros individuales para pegar en PTGUI; para esto es importante no solo tratar con la exposici√≥n y el color de cada cuadro, sino tambi√©n hacer que todas las partes del panorama futuro sean lo m√°s cercanas posible en brillo y contraste. <br><br><img src="https://habrastorage.org/webt/a0/z9/q1/a0z9q16uscbohtlohciwtafqggy.png"><br><br>  Si se usa la correcci√≥n de brillo local, extraiga cualquier objeto, aseg√∫rese de que en todos los cuadros donde est√° presente, esto se haga lo m√°s cerca posible.  PTGUI tiene una funci√≥n de ecualizaci√≥n de brillo, pero es mejor hacerlo por adelantado.  Adem√°s, el material resultante se puede exportar (recomiendo usar Tiff con compresi√≥n LZW de 8/16 bits por canal, dependiendo de la potencia de su PC). <br><br><img src="https://habrastorage.org/webt/ei/za/h2/eizah2wfiaszg0f1mmbjclpvj1g.png"><br><br>  El siguiente paso ser√° el montaje directo del panorama.  Cargue archivos en PTGUI PRO y haga clic en Alinear im√°genes. <br><br><img src="https://habrastorage.org/webt/un/ar/z2/unarz2i0cb4uwldz0rzi3yng_eu.png"><br><br>  El sistema analiza los datos e intenta comparar cuadros por puntos de control. <br><br>  En algunos casos (agua / nieve, etc.), el programa puede mostrar un mensaje sobre la ausencia de coincidencias en algunos cuadros, esto significa que tendr√° que establecer los puntos de control manualmente. <br><br>  Si este no es el caso, el programa nos dar√° una ventana con un escaneo panor√°mico, donde es deseable establecer el centro, el lugar que se mostrar√° al cargar, la cara del panorama, tambi√©n puede ajustar el horizonte. <br><br><img src="https://habrastorage.org/webt/eh/iu/bh/ehiubhvol5md_hd68rj_kcl9hdk.png"><br><br>  A continuaci√≥n, podemos abrir una vista previa del panorama, que se puede torcer y evaluar previamente el resultado. <br><br><img src="https://habrastorage.org/webt/qu/rd/p5/qurdp5vci_el4jhywlvxccueusk.png"><br><br>  Aqu√≠ puede notar problemas especialmente fuertes, y si los hay, vaya a la edici√≥n de puntos de control e intente solucionarlo. <br><br><img src="https://habrastorage.org/webt/yq/sx/4p/yqsx4pdng2errceagbvlie1liiq.png"><br><br>  Si no hay problemas especiales, la √∫ltima pesta√±a - Crear panorama - se configura como en Lightroom - Tiff con compresi√≥n LZW. <br><br><img src="https://habrastorage.org/webt/tw/r3/91/twr391f4kmzgn6w0bxuomof3r04.png"><br><br>  El siguiente paso es la inspecci√≥n y el ajuste final en Photoshop.  Lentamente observamos todo el panorama en partes para detectar inconsistencias: el horizonte y los problemas en los objetos principales son especialmente sorprendentes.  Bueno, si la articulaci√≥n en el objeto sin una textura especial. <br><br><img src="https://habrastorage.org/webt/u0/sw/-5/u0sw-5hap33vcbepdtaj0unwits.png"><br><br>  Aqu√≠, todas las herramientas ya son buenas: primero intentamos asignar por divergencia por selecci√≥n poligonal, luego transformaci√≥n - distorsi√≥n y otras opciones - personalizamos la pieza "abandonada".  El sombreado de la selecci√≥n se puede establecer en peque√±o: 1-2 p√≠xeles, y a veces es mejor dejar bordes afilados por completo, cerramos las √°reas resultantes como resultado del cambio, como es habitual con un sello o un cepillo de curaci√≥n. <br><br><img src="https://habrastorage.org/webt/o0/ev/-u/o0ev-us8vs3jrgyfqr85fz4optw.png"><br><br>  Por supuesto, hay casos m√°s complicados: luego abrimos un archivo separado con el objeto, lo copiamos a una nueva capa, ajustamos la escala, eliminamos el exceso, obtenemos un parche.  En el caso del uso de deformaciones, especialmente la deformaci√≥n de la marioneta, es muy importante limitar los puntos y no tocar los bordes del panorama, de lo contrario no se pegar√°n. <br><br>  Es hora de dar el efecto y la riqueza al panorama.  Ahora podemos torcer niveles / curvas / color de forma segura para lograr el efecto deseado.  Es posible que necesite usar las herramientas Dodge / burn, trabajar en objetos individuales; en realidad, por el momento exportamos todo a Tiff y aguantamos archivos de gran tama√±o. <br><br><img src="https://habrastorage.org/webt/su/br/zr/subrzrgwexa9ypzhwz9sv5sidnw.png"><br><br>  Al final, debes levantar el cielo.  Ya he acumulado una cierta cantidad de mis reservas + encontr√© algo en la red.  Si no hay acciones u opciones guardadas, simplemente estira el cielo hasta el tope.  No ser√° muy hermoso, pero al menos no ser√° una c√∫pula negra. <br><br><img src="https://habrastorage.org/webt/xy/xy/xx/xyxyxxp0vsdvldheoauwfdrxxt0.png"><br><br>  Insertamos el objeto del cielo, lo rasterizamos inmediatamente (si antes de que el panorama del cielo se hiciera correctamente, no se requerir√°n cambios), luego hacemos la m√°scara, usamos el gradiente para movernos del cielo a nuestro fondo y ajustamos el brillo de la capa insertada con curvas.  Presta atenci√≥n a la uni√≥n del cielo y tu panorama, a veces incluso cuando usas una m√°scara y un gradiente: los objetos oscuros pueden brillar y puedes obtener f√°cilmente monta√±as transl√∫cidas sobre la ciudad.  Es mejor desactivar la capa panor√°mica y lentamente, si necesita borrar todo el borrador sospechoso. <br><br><img src="https://habrastorage.org/webt/nt/nx/l_/ntnxl__-qsve95gnluixnfm2iko.png"><br><br>  Esto se puede hacer.  Pegue en una capa la funci√≥n "reducir" para minimizar el volumen, guarde Tiff por si acaso, luego reduzca la imagen a 10,000 puntos debajo del lado largo, ya que la mayor√≠a de los servicios (Sferika.ru o el mismo Google Maps) no perder√°n un panorama que es demasiado grande en volumen - S√≠, y no es necesario enviar una carga tan grande (para tel√©fonos con 4g, generalmente ser√° insoportable).  Guardamos el resultado del trabajo en JPEG: la calidad es suficiente 10 y la salida tiene un panorama de 50 megap√≠xeles y un tama√±o de archivo de 10-15 mb (seg√∫n los detalles). <br><br><img src="https://habrastorage.org/webt/ui/ea/vx/uieavxgqssxn5o-rgzc9c_ifpn4.png"><br><br>  Nuestro panorama est√° listo: solo queda encontrar un servicio para su publicaci√≥n. <br><img src="https://habrastorage.org/webt/9w/pj/bx/9wpjbx-ml7dzugyjwm-11cdpp-q.png"><br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Listo panorama aqu√≠</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418775/">https://habr.com/ru/post/es418775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es418761/index.html">El libro "Pure Python. Las sutilezas de la programaci√≥n para profesionales ¬ª</a></li>
<li><a href="../es418763/index.html">Middle / senior: ¬øc√≥mo salir del pantano?</a></li>
<li><a href="../es418765/index.html">Los consejos de datos ayudan a completar cualquier formulario de entrada. Ahora sanar</a></li>
<li><a href="../es418767/index.html">El enorme legado de juegos de Adobe Flash y mis intentos de salvarlo</a></li>
<li><a href="../es418769/index.html">Ejemplo de c√°lculo del "factor de disponibilidad" para un sistema de TI</a></li>
<li><a href="../es418777/index.html">"No hay un jefe aqu√≠": sobre trabajar con Open Source y Apache Ignite en Sberbank Technologies</a></li>
<li><a href="../es418779/index.html">Cajero sobre la base de la tableta: por qu√© los minoristas de la red lo necesitan (contamos el ejemplo de nuestro cajero)</a></li>
<li><a href="../es418781/index.html">Agregue cifrado de correo electr√≥nico y firma electr√≥nica a Zimbra</a></li>
<li><a href="../es418783/index.html">"Quien ayer fue un gigante monopolista, ma√±ana puede convertirse en nada". Entrevista con Evgeny Chereshnev de Biolink.Tech</a></li>
<li><a href="../es418785/index.html">Amigo todo. Ahora es oficial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>