<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßúüèø üìó üë®üèæ‚Äçüíº BotAuth - connexion et enregistrement √† l'aide de bots ü§ï üë™ üë®üèº‚Äçüè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="BotAuth - un package qui vous permet de vous connecter en utilisant le bot Vkontakte, FaceBook, Telegram. 

 L'objectif principal de BotAuth est de si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>BotAuth - connexion et enregistrement √† l'aide de bots</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455104/"><img src="https://habrastorage.org/webt/jy/oa/nl/jyoanlvadhny8tfmfnt-seykprk.jpeg"><br><br>  BotAuth - un package qui vous permet de vous connecter en utilisant le bot Vkontakte, FaceBook, Telegram. <br><br>  L'objectif principal de BotAuth est de simplifier les visiteurs des sites Web / connexion PWA via les r√©seaux sociaux. <br><br>  Bien que social.  Les r√©seaux ne fournissent pas de commentaires des applications mobiles natives √† un site Web; les d√©veloppeurs doivent envoyer un utilisateur √† un navigateur, o√π ils doivent saisir √† nouveau leur identifiant et leur mot de passe. <br><br>  En utilisant des bots, vous pouvez obtenir des commentaires (rappel) de l'application native, ne for√ßant ainsi pas √† entrer le nom d'utilisateur et le mot de passe du social.  r√©seau dans le navigateur. <br><a name="habracut"></a><br>  D√©mo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://laravel.zetrider.ru/botauth</a> <br>  GitHub - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/zetrider/BotAuth</a> <br><br>  Liens du formulaire: <br><br><pre><code class="plaintext hljs">https://vk.me/ https://t.me/ https://m.me/</code> </pre> <br>  ouvrez une application mobile pour entamer un dialogue avec le bot.  Le visiteur n'aura pas √† ressaisir le nom d'utilisateur et le mot de passe dans le navigateur. <br><br>  Vous pouvez connecter des bots: <br><br><ul><li>  Vkontakte </li><li>  T√©l√©gramme </li><li>  Facebook </li><li>  Votre propre fournisseur (exemple ci-dessous) </li></ul><br><div class="spoiler">  <b class="spoiler_title">L'installation</b> <div class="spoiler_text"><ol><li>  compositeur n√©cessite zetrider / botauth </li><li>  Connectez le package dans config / app.php <br>  Fournisseur <br><pre> <code class="php hljs">ZetRider\BotAuth\BotAuthServiceProvider::class,</code> </pre> <br>  Fa√ßade <br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'BotAuth'</span></span> =&gt; ZetRider\BotAuth\Facades\BotAuth::class,</code> </pre> <br></li><li>  Copiez la configuration.  fichier <br><pre> <code class="plaintext hljs">php artisan vendor:publish --tag=botauth-config</code> </pre> <br>  si n√©cessaire <br><pre> <code class="plaintext hljs">php artisan vendor:publish --tag=botauth-views</code> </pre> <br><pre> <code class="plaintext hljs">php artisan vendor:publish --tag=botauth-migrations</code> </pre> <br></li><li>  Indiquez pour le social n√©cessaire.  r√©seaux lien dans config / botauth.php dans le param√®tre lien. </li><li>  Remplissez le fichier ENV avec des cl√©s de bot <br><pre> <code class="plaintext hljs">BOTAUTH_VKONTAKTE_API_SECRET BOTAUTH_VKONTAKTE_API_TOKEN BOTAUTH_VKONTAKTE_API_CONFIRM BOTAUTH_TELEGRAM_API_TOKEN BOTAUTH_TELEGRAM_PROXY BOTAUTH_FACEBOOK_API_SECRET BOTAUTH_FACEBOOK_API_TOKEN BOTAUTH_FACEBOOK_API_CONFIRM</code> </pre> <br></li><li>  Ex√©cuter des migrations <br><pre> <code class="plaintext hljs">php artisan migrate</code> </pre> <br></li><li>  Dans Middleware VerifyCsrfToken, ajoutez une exception d'adresse pour le rappel, la valeur par d√©faut est botauth / callback / * ' <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $except = [ <span class="hljs-string"><span class="hljs-string">'botauth/callback/*'</span></span> <span class="hljs-comment"><span class="hljs-comment">// Except callback Csrf middleware ];</span></span></code> </pre><br></li><li>  Pour votre mod√®le utilisateur, ajoutez un trait: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">ZetRider</span></span>\<span class="hljs-title"><span class="hljs-title">BotAuth</span></span>\<span class="hljs-title"><span class="hljs-title">Traits</span></span>\<span class="hljs-title"><span class="hljs-title">BotAuthUserTrait</span></span>;</code> </pre> <br>  ce qui ajoutera une relation avec les connexions utilisateur √† partir du social.  r√©seaux <br></li></ol><br></div></div><br>  <b>Connecter les bots:</b> <br><br><div class="spoiler">  <b class="spoiler_title">Vkontakte</b> <div class="spoiler_text"><ol><li>  Ouvrez les param√®tres de votre communaut√© ou cr√©ez un nouveau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vk.com/groups?w=groups_create</a> </li><li>  Dans les param√®tres de la communaut√©, ouvrez la section "Param√®tres" - "Travailler avec l'API" </li><li>  Cr√©ez un mot de passe, s√©lectionnez "Autoriser l'application √† acc√©der aux messages de la communaut√©", notez la cl√©, elle doit √™tre sp√©cifi√©e dans .env <b>BOTAUTH_VKONTAKTE_API_TOKEN</b> </li><li>  Sur la m√™me page, s√©lectionnez l'API de rappel, s√©lectionnez ¬´Version API¬ª <b>5.95</b> , sp√©cifiez l'adresse de rappel de votre site dans le champ ¬´Adresse¬ª, exemple par d√©faut <pre> <code class="plaintext hljs">https://DOMAIN/botauth/callback/vkontakte</code> </pre> </li><li>  Ci-dessous, sp√©cifiez la ligne vers laquelle le serveur doit retourner .env <b>BOTAUTH_VKONTAKTE_API_CONFIRM</b> </li><li>  Dans le champ "Cl√© secr√®te", entrez une cl√© secr√®te, sp√©cifiez en .env <b>BOTAUTH_VKONTAKTE_API_SECRET</b> </li><li>  Apr√®s avoir rempli toutes les cl√©s en .env, cliquez sur le bouton "Confirmer" </li><li>  Sur la m√™me page, ouvrez l'onglet ¬´Types d'√©v√©nements¬ª, s√©lectionnez ¬´Bo√Æte de r√©ception¬ª </li><li>  Ouvrez les param√®tres de la communaut√©, l'√©l√©ment "Messages", activez les "messages de la communaut√©" </li><li>  Ouvrez les param√®tres de la communaut√©, l'√©l√©ment "Messages" - "Param√®tres du bot", activez "Fonctionnalit√©s du bot" </li></ol><br>  Le bot est pr√™t √† partir. <br><br>  Un exemple de lien direct vers un dialogue avec un bot <pre> <code class="plaintext hljs">https://vk.me/zetcode</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">T√©l√©gramme</b> <div class="spoiler_text"><ol><li>  Cr√©ez votre bot via @BotFather </li><li>  N'oubliez pas la cl√©, sp√©cifiez en .env <b>BOTAUTH_TELEGRAM_API_TOKEN</b> </li><li>  Ajouter un hook Web via <br><pre> <code class="plaintext hljs">https://api.telegram.org/botYOUR_TOKEN/setWebhook?url=https://DOMAIN/botauth/callback/telegram</code> </pre> <br>  remplacez YOUR_TOKEN par votre jeton, DOMAIN par votre domaine </li><li>  Si n√©cessaire, sp√©cifiez le proxy dans .env <b>BOTAUTH_TELEGRAM_PROXY</b> , par exemple socks5h: //127.0.0.1: 1080 </li></ol><br>  Le bot est pr√™t √† partir. <br><br>  Un exemple de lien direct vers un dialogue avec un bot <pre> <code class="plaintext hljs">https://t.me/BotAuthBot</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Facebook</b> <div class="spoiler_text"><ol><li>  Vous devez avoir cr√©√© une page, si ce n'est pas le cas, ajoutez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.facebook.com/pages/creation/?ref_type=universal_creation_hub</a> </li><li>  Ajoutez la nouvelle application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.facebook.com/apps</a> </li><li>  Dans les param√®tres de l'application, s√©lectionnez ¬´De base¬ª, copiez le ¬´Secret d'application¬ª dans .env <b>BOTAUTH_FACEBOOK_API_SECRET</b> </li><li>  Dans les param√®tres de l'application, vous devez ajouter le produit "Messenger" </li><li>  Dans les param√®tres du produit ¬´Messenger¬ª, cr√©ez un jeton d'acc√®s, sp√©cifiez-le dans .env <b>BOTAUTH_FACEBOOK_API_TOKEN</b> </li><li>  Dans les param√®tres du produit Messenger, cr√©ez un hook web, sp√©cifiez dans l'URL de rappel <pre> <code class="plaintext hljs">https://DOMAIN/botauth/callback/facebook</code> </pre>  remplacez DOMAIN par votre domaine </li><li>  Dans le champ "Confirmer le marqueur", sp√©cifiez n'importe quel texte, enregistrez-le dans .env <b>BOTAUTH_FACEBOOK_API_CONFIRM</b> </li><li>  Dans les options "Champs d'abonnement", s√©lectionnez "messages" </li><li>  Cliquez sur Confirmer </li><li>  Apr√®s avoir confirm√© le serveur dans les param√®tres de connexion Web, s√©lectionnez la page, cliquez sur "S'abonner" </li><li>  Dans la fen√™tre ¬´V√©rifier l'application Messenger¬ª, √† c√¥t√© de ¬´pages_messaging¬ª, cliquez sur ¬´Ajouter √† la demande¬ª </li></ol><br>  Le bot est d√©j√† pr√™t √† fonctionner, mais n'est disponible que pour les administrateurs. <br><br>  Apr√®s avoir confirm√© l'application, elle sera disponible pour tous les visiteurs.  Soumettez la demande de mod√©ration. <br><br>  Un exemple de lien direct vers un dialogue avec un bot <pre> <code class="plaintext hljs">https://m.me/zetridercode</code> </pre> <br></div></div><br>  <b>Important:</b> <br><br><ol><li>  Le site devrait fonctionner sur https </li><li>  Le bot Facebook renvoie un PSID qui ne correspond pas √† l'ID utilisateur public. </li><li>  Par d√©faut, le contr√¥leur de bot fonctionne avec le mod√®le \ App \ User.  Si vous avez un cas diff√©rent, cr√©ez simplement votre contr√¥leur et votre mod√®le √† partir d'exemples du r√©f√©rentiel.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mod√®le</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">contr√¥leur</a> </li></ol><br>  <b>Comment ajouter votre fournisseur:</b> <br><br>  Cr√©ez votre classe qui h√©rite d'une classe abstraite <br><br><pre> <code class="plaintext hljs">ZetRider\BotAuth\AbstractProvider</code> </pre> <br>  Exemple d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple / ExampleProvider.php</a> <br><br>  Ajoutez un fournisseur au service, par exemple AppServiceProvider dans la m√©thode de d√©marrage <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Register example proider BotAuth::extend('example', function() { return new \Path\To\Your\Class\ExampleProvider(); });</span></span></code> </pre><br>  Le fournisseur traitera les demandes lors d'un rappel √† <br><br><pre> <code class="plaintext hljs">https://.../botauth/callback/example</code> </pre> <br>  <b>Les √©v√©nements</b> <br><br>  √âv√©nement sur le traitement r√©ussi d'un nouveau message du bot <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Catch bot callback \Event::listen(\ZetRider\BotAuth\Events\MessageNewEvent::class, function($event) { $provider = $event-&gt;provider; // ZetRider\BotAuth\AbstractProvider $slug = $provider-&gt;getProviderSlug(); $data = $provider-&gt;getCallbackResponse(); $user = $provider-&gt;getUser(); $text = $provider-&gt;getText(); // You can send a message // $provider-&gt;sendMessage(__('Back to web site')); });</span></span></code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr455104/">https://habr.com/ru/post/fr455104/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr455088/index.html">Que testent les entretiens et les √©l√©ments de test</a></li>
<li><a href="../fr455096/index.html">Tester les comp√©tences avec des tests - pourquoi et comment</a></li>
<li><a href="../fr455098/index.html">Entretien avec Alexander Makarov, √©quipe de base Yii</a></li>
<li><a href="../fr455100/index.html">Comment organiser le caf√© au bureau</a></li>
<li><a href="../fr455102/index.html">Connexion d'interfaces s√©rie sur IP</a></li>
<li><a href="../fr455106/index.html">D√©veloppement logiciel. Tendances 2019</a></li>
<li><a href="../fr455110/index.html">Le bonheur des employ√©s d√©pend-il de t√¢ches int√©ressantes? Dites √† Badoo, SKB Kontur, Dodo Pizza, Staply et Alternativa Games</a></li>
<li><a href="../fr455112/index.html">Bitrix24: "Rapidement lev√© n'est pas consid√©r√© comme tomb√©"</a></li>
<li><a href="../fr455114/index.html">Impl√©mentation de type entier dans CPython</a></li>
<li><a href="../fr455118/index.html">Vers l'avenir avec l'int√©gration des services Jenkins et Oracle APEX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>