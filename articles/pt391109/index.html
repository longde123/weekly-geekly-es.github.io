<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤟 👨🏿‍🏫 👩🏼‍💻 História da engenharia reversa de uma pulseira de fitness chinesa 🈁 🎑 👩🏽‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Compre uma pulseira chinesa, fique desapontado com o software oficial, escreva o seu!
 
 
 
 
 Esta história aguarda sua publicação há mais de seis me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>História da engenharia reversa de uma pulseira de fitness chinesa</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/391109/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compre uma pulseira chinesa, fique desapontado com o software oficial, escreva o seu!</font></font><br>
<br>
<img src="https://habrastorage.org/files/a19/e52/519/a19e525192024d25973173562f432455.png"><br>
<a name="habracut"></a><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta história aguarda sua publicação há mais de seis meses. Durante esse período, muita coisa mudou, o firmware e o software foram atualizados e muitos dos meus desenvolvimentos já estão desatualizados.</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prefácio</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O trabalho ativo de um grande número de empresas no campo da tecnologia vestível e relógios inteligentes não deixou a paz para minha alma. Vi um grande potencial em dispositivos portáteis com uma tela. Não, não estou falando de contar etapas e outras coisas de condicionamento físico, elas certamente são legais, mas tão distantes do banal “Parabéns! Você andou 4 km, deu mais de 20k passos! ” e belos gráficos de progresso e regressão, eles não criaram nada de especial. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o fato de poder receber notificações diretamente na tela do meu pulso é conveniente. Se eu também puder interagir de alguma forma com ele ou com algo próximo, pressionando os botões 1-2-3 - isso é ainda mais legal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais uma vez explorando as extensões do aliexpress, me deparei com uma pulseira de fitness iWown i5. </font><font style="vertical-align: inherit;">Ele imediatamente atraiu minha atenção a um preço incrivelmente baixo (na época, cerca de 800r com frete grátis) e a presença de uma tela OLED. </font><font style="vertical-align: inherit;">Depois de ler atentamente a descrição do vendedor e as críticas dos clientes, decidi encomendar este milagre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Especificações declaradas (descrição da tradução do aliexpress):</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exposição: OLED</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bateria: Li-Polymer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carregamento: carregamento USB padrão</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tempo de espera: mais de 72 horas</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dimensões: 69.1 * 15.8 * 11.2mm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peso: 18g</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Material: cinta ABS, fecho de aço</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resistência à água: IP55</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temperatura de operação: -20 ° C ~ + 45 ° C</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temperatura de operação da mídia de flash: -40 ° C ~ + 45 ° C</font></font></li>
</ul><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recursos:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitor esportivo: o tempo todo registra etapas e movimentos, distância percorrida e calorias queimadas, todos os números são calculados levando em consideração seu peso e altura.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitorando a qualidade do sono: Enquanto você dorme, o rastreador registra as fases do sono, determinando o sono profundo e rápido, 8 grupos de alarmes silenciosos permitem que você o acorde sem incomodar outros membros da família</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sincronização sem fio de baixa potência Bluetooth 4.0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte a sincronização do PC via USB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proteção IP55: protege o dispositivo sob chuva forte, mas não mais</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e outras vantagens "absurdas" no estilo do marketing chinês. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu estava muito interessado na oportunidade de rastrear um sonho e acordar na fase certa. </font><font style="vertical-align: inherit;">Muitos de meus amigos compraram rastreadores de fitness baratos justamente por causa dessa função e ficaram satisfeitos com a mi band e similares. </font><font style="vertical-align: inherit;">Sempre me faltava uma tela, mas aqui está a multifuncional. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No meu trabalho, muitas vezes tenho que desenvolver aplicativos simples para Android; decidi que, se eu não tiver a funcionalidade do meu aplicativo nativo, escreverei o meu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pacote chegou bem rápido e eu imediatamente corri para estudar uma pulseira maravilhosa. Após uma hora de jogo com o aplicativo Zeroner, que, de acordo com as instruções, deve ser instalado no meu dispositivo Android, percebi que a funcionalidade é bastante ruim e triste. O Zeroner, como todos os outros fabricantes, focado na contagem de etapas e calorias, exibindo belos gráficos, possui uma função de pesquisa por telefone (falarei sobre isso mais adiante), pode notificá-lo sobre uma chamada recebida, a chegada de uma mensagem no facebook e whatsapp e envia notificações de UM de qualquer aplicativo selecionado , que será considerado como um aplicativo para SMS.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vibração da pulseira é muito controversa, eles escrevem nos fóruns que ela é bastante fraca, alguns dizem que é normal. </font><font style="vertical-align: inherit;">Para mim, poderia ter sido mais forte. </font><font style="vertical-align: inherit;">A pulseira reage ao gesto "Assista ao relógio". Se você olhar para a pulseira como um relógio, levantando a mão e dobrando o cotovelo, a tela será ligada automaticamente e mostrará a hora ou a notificação perdida. </font></font><br>
<br>
<img src="https://habrastorage.org/files/5ec/f12/b95/5ecf12b954c74a6eab31c27f747daf51.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, sem hesitar, decidi escrever meu aplicativo, com notificações, vibração e sincronização. </font><font style="vertical-align: inherit;">Vou em frente, demorou 4 dias e várias noites longas ...</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para negócios</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que, com o Bluetooth, eu não sou um dedo do pé azul, decidi tentar interceptar os dados trocados entre o telefone e a pulseira com um tolo. Para fazer isso, entrei na guia Desenvolvedores e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ative</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a caixa de seleção </font><i><font style="vertical-align: inherit;">"Habilitar HCI Bluetooth Broadcast Log"</font></i><font style="vertical-align: inherit;"> . Depois de ativar esta opção, todo o despejo da comunicação do Android com qualquer dispositivo Bluetooth é adicionado ao arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/sdcard/Android/data/btsnoop_hci.log</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o caminho pode mudar para diferentes dispositivos, o nome do arquivo parece ser sempre o mesmo). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de baixar o WireShark, comecei a estudar os logs de comunicação com a pulseira e vi algo semelhante a isso: </font></font><br>
<br>
<img src="https://habrastorage.org/files/bcc/e1e/5e9/bcce1e5e907549e1993177833e2c9b9c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
depois de passar quase duas horas estudando os logs, conduzindo vícios, protocolos do google na Internet, percebi que esse caminho não é para mim.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como meu telefone interpretou a pulseira como um dispositivo BLE comum e a mostrou na seção de dispositivos conectados, decidi usar exemplos de trabalho com o BLE no Android SDK. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de clonar o repositório </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/googlesamples/android-BluetoothLeGatt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , coloque o Android Studio no umbigo com as fontes, colete e inicie o aplicativo. ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link para a descrição do SDK do Android com Bluetooth LE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acabou como nas fotos do github: </font></font><br>
<img src="https://habrastorage.org/files/109/0e2/723/1090e27231624e4eb554b3faf5445f3e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de executar a verificação, o aplicativo não viu o dispositivo. Aconteceu que o aplicativo nativo conectado à pulseira não permitiu que o BLE encontrasse o dispositivo. Tudo foi decidido pela simples remoção do Zeroner, era possível simplesmente desconectar, mas era mais confiável destruí-lo completamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E assim, o Bluetooth LE é uma tecnologia que se baseia em dispositivos com baixo consumo de energia e é usada em sensores, etiquetas e muitos outros dispositivos com novos ventiladores. A base desta tecnologia é o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfil de atributo genérico (GATT)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , este é um perfil Bluetooth que permite trocar pequenos pedaços de dados, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"atributos"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Não vou escrever sobre como tudo funciona por um longo tempo, há muitas informações no hub e na internet, nas quais também tive que procurar soluções. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu esperava que todos os dados necessários fossem armazenados nas características e descritores da pulseira, e eu pudesse receber e registrar dados sem problemas. Eu estava errado ... O </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aplicativo BLE de teste me mostrou apenas 4 serviços: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0000180f-0000-1000-8000-00805f9b34fb</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00001800-0000-1000-8000-00805f9b34fb </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0000ff20-0000-1000-8000-00805f9b34fb </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00001801-0000-1000-8000-00805f9b34fb </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tinham muito poucas características, aquelas que liam retornavam nulos ou zeros e a escrita era inútil. Mas fui encorajado por conseguir conectar e obter pelo menos alguns dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além disso, decidi que não era possível agir cegamente e resolvi dissecar o aplicativo Zeroner. Tendo acumulado alguns decompiladores de APK on-line na Internet, alimentei o zeroner.apk e obtive 2 arquivos zip na saída. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro era uma versão JADX e o segundo continha o resultado do apktool. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revirando o código fonte Fiquei horrorizado com o código chinês</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(embora no meu trabalho eu o encontre muitas vezes na forma de back-end para sites e serviços, mas ele nunca deixa de me surpreender com sua tortuosidade e ingenuidade, mas de qualquer maneira, é terrivelmente difícil de ler).</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Depois de muita pesquisa, finalmente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encontrei o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> arquivo </font><b><font style="vertical-align: inherit;">WristBandDevice.java</font></b><font style="vertical-align: inherit;"> , que estava no caminho com.kunekt / bluetooth. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta aula, todo o trabalho com o dispositivo estava apenas escondido, mas novamente, uma emboscada estava me esperando. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se viu mais tarde, no firmware anterior da pulseira, mais serviços foram usados ​​nas características (como eu esperava anteriormente), mas mais tarde, os desenvolvedores deixaram apenas 2, um para leitura e o segundo para gravação. Todos os comandos são transmitidos em um pacote.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não era tão fácil entender como o pacote deveria ser, decidi determinar claramente o que quero da pulseira em primeiro lugar, para poder começar a rastrear as chamadas de função. </font><font style="vertical-align: inherit;">E eu queria exibir mensagens personalizadas na pulseira. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sem hesitar, entrei no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.kunekt / receiver / CallReceiver.java</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , como as chamadas recebidas eram exibidas de maneira muito estável e mesmo com caracteres russos, decidi que era um ótimo começo, pois já havia encontrado um evento de chamada recebida no Android, a ideia de como isso pode funcionar já foi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abrindo o arquivo, vi o seguinte:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um grande pedaço de código chinês</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
        Log.e(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.TAG, <span class="hljs-string"><span class="hljs-string">"+++ ON RECEIVE +++"</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (((TelephonyManager) context.getSystemService(<span class="hljs-string"><span class="hljs-string">"phone"</span></span>)).getCallState()) {
            <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> C08571.POSITION_OPEN <span class="hljs-comment"><span class="hljs-comment">/*0*/</span></span>:
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ZeronerApplication.newAPI) {<font></font>
                    BackgroundThreadManager.getInstance().addTask(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WriteOneDataTask(context, WristBandDevice.getInstance(context).setPhoneStatue()));<font></font>
                }<font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> BitmapCacheManagementTask.MESSAGE_INIT_DISK_CACHE <span class="hljs-comment"><span class="hljs-comment">/*1*/</span></span>:<font></font>
                incomingNumber = intent.getStringExtra(<span class="hljs-string"><span class="hljs-string">"incoming_number"</span></span>);<font></font>
                Contact contact = getContact(context, incomingNumber);<font></font>
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!WristBandDevice.getInstance(context).isConnected() || !ZeronerApplication.phoneAlert) {
                    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;<font></font>
                }<font></font>
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ZeronerApplication.newAPI) {
                    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fMdeviceInfo = jsonToFMdeviceInfo(UserConfig.getInstance(context).getDevicesInfo());
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fMdeviceInfo.getModel().indexOf(<span class="hljs-string"><span class="hljs-string">"5+"</span></span>) != -<span class="hljs-number"><span class="hljs-number">1</span></span>) {
                        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UserConfig.getInstance(context).getFont_lib() == <span class="hljs-number"><span class="hljs-number">1</span></span> || UserConfig.getInstance(context).getFont_lib() == <span class="hljs-number"><span class="hljs-number">2</span></span> || UserConfig.getInstance(context).getSysFont().equalsIgnoreCase(<span class="hljs-string"><span class="hljs-string">"en"</span></span>) || UserConfig.getInstance(context).getSysFont().equalsIgnoreCase(<span class="hljs-string"><span class="hljs-string">"es"</span></span>)) {
                            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                                WristBandDevice.getInstance(context).writeWristBandFontLibrary(context, <span class="hljs-number"><span class="hljs-number">1</span></span>, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>));<font></font>
                            } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &lt;= <span class="hljs-number"><span class="hljs-number">6</span></span> || contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                                WristBandDevice.getInstance(context).writeWristBandFontLibrary(context, <span class="hljs-number"><span class="hljs-number">1</span></span>, contact.getDisplayName());<font></font>
                            } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
                                WristBandDevice.getInstance(context).writeWristBandFontLibrary(context, <span class="hljs-number"><span class="hljs-number">1</span></span>, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, contact.getDisplayName().length()));<font></font>
                            }<font></font>
                        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                            WristBandDevice.getInstance(context).writeWristBandPhoneAlertNew(context, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>));<font></font>
                        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &lt;= <span class="hljs-number"><span class="hljs-number">6</span></span> || contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                            WristBandDevice.getInstance(context).writeWristBandPhoneAlertNew(context, contact.getDisplayName());<font></font>
                        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
                            WristBandDevice.getInstance(context).writeWristBandPhoneAlertNew(context, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, contact.getDisplayName().length()));<font></font>
                        }<font></font>
                    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                        WristBandDevice.getInstance(context).writeWristBandPhoneAlertNew(context, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>));<font></font>
                    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &lt;= <span class="hljs-number"><span class="hljs-number">6</span></span> || contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                        WristBandDevice.getInstance(context).writeWristBandPhoneAlertNew(context, contact.getDisplayName());<font></font>
                    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
                        WristBandDevice.getInstance(context).writeWristBandPhoneAlertNew(context, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, contact.getDisplayName().length()));<font></font>
                    }<font></font>
                } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                    WristBandDevice.getInstance(context).writeWristBandPhoneAlert(context, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>));<font></font>
                } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contact.getDisplayName().length() &lt;= <span class="hljs-number"><span class="hljs-number">6</span></span> || contact.getDisplayName().length() &gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) {<font></font>
                    WristBandDevice.getInstance(context).writeWristBandPhoneAlert(context, contact.getDisplayName());<font></font>
                } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
                    WristBandDevice.getInstance(context).writeWristBandPhoneAlert(context, contact.getDisplayName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, contact.getDisplayName().length()));<font></font>
                }<font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> BitmapCacheManagementTask.MESSAGE_FLUSH <span class="hljs-comment"><span class="hljs-comment">/*2*/</span></span>:
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ZeronerApplication.newAPI) {<font></font>
                    BackgroundThreadManager.getInstance().addTask(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WriteOneDataTask(context, WristBandDevice.getInstance(context).setPhoneStatue()));<font></font>
                }<font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>:<font></font>
        }<font></font>
    }<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, vemos claramente que existem 2 opções para a API e os nomes que eles têm são newAPI muito lógico e a segunda, respectivamente, oldAPI. Em toda essa abundância de condições, eu estava interessado apenas em uma linha repetida: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WristBandDevice.getInstance (context) .writeWristBandPhoneAlertNew (contexto, contact.getDisplayName .....)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Era isso que eu estava procurando. Olhando para o futuro, direi que o iWown também possui os modelos i5 + e i6, eles têm uma tela maior e, portanto, mais caracteres são colocados, para isso todas essas verificações são necessárias. não está claro por que eles não escreveram uma classe ou algo assim, talvez sejam brincadeiras de descompilador, mas esse código é repetido em muitos lugares. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passando para a definição dessa função, vi o seguinte:</font></font><br>
<br>
<pre><code class="java hljs">    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeWristBandPhoneAlertNew</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, String displayName)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
        writeAlertNew(context, displayName, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeWristBandSmsAlertNew</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, String displayName)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
        writeAlertNew(context, displayName, <span class="hljs-number"><span class="hljs-number">2</span></span>);<font></font>
    }<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ótimo, ele usa a mesma função para enviar texto, apenas com parâmetros diferentes. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todas as funções com a palavra New são apenas nossa opção, porque, como foi mostrado acima, eu tenho uma nova API. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contente, indo para a definição da função </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">writeAlertNew</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vi o seguinte:</font></font><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeAlertNew</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, String displayName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
        ArrayList&lt;Byte&gt; datas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList();<font></font>
        datas.add(Byte.valueOf((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) type));
        <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (i &lt; displayName.length()) {
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (displayName.charAt(i) &lt; <span class="hljs-string"><span class="hljs-string">'@'</span></span> || (displayName.charAt(i) &lt; <span class="hljs-string"><span class="hljs-string">'\u0080'</span></span> &amp;&amp; displayName.charAt(i) &gt; <span class="hljs-string"><span class="hljs-string">'`'</span></span>)) {
                <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> e = displayName.charAt(i);<font></font>
                datas.add(Byte.valueOf((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) <span class="hljs-number"><span class="hljs-number">0</span></span>));
                <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> valueOf : PebbleBitmap.fromString(context, String.valueOf(e), <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).data) {<font></font>
                    datas.add(Byte.valueOf(valueOf));<font></font>
                }<font></font>
            } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
                <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c = displayName.charAt(i);<font></font>
                datas.add(Byte.valueOf((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) <span class="hljs-number"><span class="hljs-number">1</span></span>));
                <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> valueOf2 : PebbleBitmap.fromString(context, String.valueOf(c), <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).data) {<font></font>
                    datas.add(Byte.valueOf(valueOf2));<font></font>
                }<font></font>
            }<font></font>
            i++;<font></font>
        }<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] data = writeWristBandDataByte(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, form_Header(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), datas);
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; data.length; i += <span class="hljs-number"><span class="hljs-number">20</span></span>) {
            <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] writeData;
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i + <span class="hljs-number"><span class="hljs-number">20</span></span> &gt; data.length) {<font></font>
                writeData = Arrays.copyOfRange(data, i, data.length);<font></font>
            } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
                writeData = Arrays.copyOfRange(data, i, i + <span class="hljs-number"><span class="hljs-number">20</span></span>);<font></font>
            }<font></font>
            NewAgreementBackgroundThreadManager.getInstance().addTask(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WriteOneDataTask(context, writeData));<font></font>
        }<font></font>
    }<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ficou claro que algumas funções usadas aqui me separam do lucro. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
writeWristBandDataByte - forma um pacote com uma mensagem para a pulseira, é interessante que exista uma função especial </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">form_Header (3, 1)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que forma o cabeçalho do pacote, pelo qual a pulseira entende o que deseja dele. </font><font style="vertical-align: inherit;">3 é o número do grupo de equipes e 1 é o próprio time</font></font><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">form_Header</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> grp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cmd)</span></span></span><span class="hljs-function"> </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) (((((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) grp) &amp; <span class="hljs-number"><span class="hljs-number">15</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>) | (((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) cmd) &amp; <span class="hljs-number"><span class="hljs-number">15</span></span>));<font></font>
    }<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A função é simples, copiada para o meu projeto sem alterações. </font><font style="vertical-align: inherit;">O próximo foi </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewAgreementBackgroundThreadManager.getInstance (). AddTask (new WriteOneDataTask (context, writeData)); </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se viu, nada de incomum, o aplicativo cria um fluxo no qual a fila de pacotes para envio é constantemente verificada, se um pacote aparece na fila, o fluxo grava na característica do dispositivo, se houver mais de um pacote, ele os envia com um atraso de 240 milissegundos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, veio o mais incompreensível: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PebbleBitmap.fromString (context, String.valueOf (e), 8, 1) .data)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por que a classe é chamada dessa maneira não é clara, porque esse dispositivo não tem nada a ver com o Pebble. </font><font style="vertical-align: inherit;">Abrindo a fonte da classe, vi o seguinte:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Origem da classe PebbleBitmap</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PebbleBitmap</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> f1285D;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] data;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UnsignedInteger flags;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> height;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> offset;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UnsignedInteger rowLengthBytes;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> width;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> f1286x;
    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> f1287y;<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> {<font></font>
        f1285D = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PebbleBitmap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UnsignedInteger _rowLengthBytes, UnsignedInteger _flags, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> _x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> _y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> _width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> _height, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] _data)</span></span></span><span class="hljs-function"> </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.offset = <span class="hljs-number"><span class="hljs-number">0</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.index = <span class="hljs-number"><span class="hljs-number">0</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rowLengthBytes = _rowLengthBytes;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.flags = _flags;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.f1286x = _x;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.f1287y = _y;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = _width;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = _height;
        <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = _data;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> PebbleBitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, String text, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> l)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
        TextPaint textPaint = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextPaint();<font></font>
        textPaint.setAntiAlias(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>);<font></font>
        textPaint.setTextSize(<span class="hljs-number"><span class="hljs-number">16.5f</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (w == <span class="hljs-number"><span class="hljs-number">32</span></span>) {<font></font>
            textPaint.setTextAlign(Align.CENTER);<font></font>
        }<font></font>
        textPaint.setTypeface(ZeronerApplication.unifont);<font></font>
        StaticLayout sl = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StaticLayout(text, textPaint, w, Alignment.ALIGN_NORMAL, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.49f</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> h = sl.getHeight();
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (h &gt; l * <span class="hljs-number"><span class="hljs-number">16</span></span>) {<font></font>
            h = l * <span class="hljs-number"><span class="hljs-number">16</span></span>;<font></font>
        }<font></font>
        Bitmap newBitmap = Bitmap.createBitmap(w, h, Config.ARGB_8888);<font></font>
        sl.draw(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Canvas(newBitmap));
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fromAndroidBitmap(newBitmap);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> PebbleBitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromAndroidBitmap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bitmap bitmap)</span></span></span><span class="hljs-function"> </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width = bitmap.getWidth();
        <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> height = bitmap.getHeight();
        <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rowLengthBytes = width / <span class="hljs-number"><span class="hljs-number">8</span></span>;<font></font>
        ByteBuffer data = ByteBuffer.allocate(rowLengthBytes * height);<font></font>
        data.order(ByteOrder.LITTLE_ENDIAN);<font></font>
        StringBuffer stringBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuffer(StatConstants.MTA_COOPERATION_TAG);
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; height; y++) {
            <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] pixels = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[width];<font></font>
            bitmap.getPixels(pixels, <span class="hljs-number"><span class="hljs-number">0</span></span>, width * <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, y, width, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
            stringBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuffer(StatConstants.MTA_COOPERATION_TAG);
            <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; width; x++) {
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pixels[x] == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
                    stringBuffer.append(Constants.VIA_RESULT_SUCCESS);<font></font>
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (f1285D) {<font></font>
                        stringBuffer.append(<span class="hljs-string"><span class="hljs-string">"-"</span></span>);<font></font>
                    }<font></font>
                } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
                    stringBuffer.append(Constants.VIA_TO_TYPE_QQ_GROUP);<font></font>
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (f1285D) {<font></font>
                        stringBuffer.append(<span class="hljs-string"><span class="hljs-string">"#"</span></span>);<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; rowLengthBytes * <span class="hljs-number"><span class="hljs-number">8</span></span>; k += <span class="hljs-number"><span class="hljs-number">8</span></span>) {<font></font>
                ByteBuffer byteBuffer = data;<font></font>
                byteBuffer.put(Byte.valueOf((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BigInteger(stringBuffer.substring(k, k + <span class="hljs-number"><span class="hljs-number">8</span></span>), <span class="hljs-number"><span class="hljs-number">2</span></span>).intValue()).byteValue());<font></font>
            }<font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (f1285D) {<font></font>
                stringBuffer.append(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>);<font></font>
            }<font></font>
            Log.i(<span class="hljs-string"><span class="hljs-string">"info"</span></span>, stringBuffer.toString());<font></font>
        }<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (f1285D) {<font></font>
            System.out.println(stringBuffer.toString());<font></font>
        }<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(bitmap == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || bitmap.isRecycled())) {<font></font>
            bitmap.recycle();<font></font>
        }<font></font>
        System.gc();<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PebbleBitmap(UnsignedInteger.fromIntBits(rowLengthBytes), UnsignedInteger.fromIntBits(DfuSettingsConstants.SETTINGS_DEFAULT_MBR_SIZE), (<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) <span class="hljs-number"><span class="hljs-number">0</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) <span class="hljs-number"><span class="hljs-number">0</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) width, (<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) height, data.array());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> PebbleBitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromPng</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(InputStream paramInputStream)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fromAndroidBitmap(BitmapFactory.decodeStream(paramInputStream));<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Após uma longa reflexão, cheguei à conclusão de que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fromString</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cria uma imagem com uma letra usando uma fonte específica (incorporada no aplicativo) e depois converte os pixels em 0 ou 1, dependendo do preenchimento, para que a letra </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tenha a seguinte aparência: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00011100 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
01100011 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
01100011 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
01100011 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00011100 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sem realmente entrar em detalhes, copiei tudo no meu projeto usando o exemplo BLE GATT do Google. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ... Oh, um milagre !!! A pulseira vibrou! Mas a mensagem não apareceu, uma linha vazia e um ícone de chamada recebida.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descobriu-se que um monte de verificações de tamanho não é casual, a pulseira ignora estupidamente mensagens muito longas e mensagens com comprimento de 11 caracteres, embora 12 sejam exibidas normalmente. </font><font style="vertical-align: inherit;">Algumas horas de dança em torno dessas funções finalmente renderam resultados, aprendi a exibir texto em russo e em inglês e, ao mesmo tempo, aprendi que existem vários modos de operação no grupo de mensagens:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chamada recebida. </font><font style="vertical-align: inherit;">O telefone é exibido, o nome do chamador e a pulseira vibram</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensagem </font><font style="vertical-align: inherit;">O ícone de texto e envelope é exibido. </font><font style="vertical-align: inherit;">Quando vibra 2 vezes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nublado. </font><font style="vertical-align: inherit;">O mesmo que 2, mas em vez do envelope, o ícone da nuvem</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O erro </font><font style="vertical-align: inherit;">O mesmo que 2, que apenas um ícone com um ponto de exclamação.</font></font></li>
</ol><br>
<br>
<img src="https://habrastorage.org/files/972/497/5cb/9724975cb18144cc8654da86f1cc290a.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo ensinado meu aplicativo a me enviar notificações de diferentes aplicativos, whatsapp, vk, viber, telegrama e outros, decidi que era hora de ensinar a pulseira a responder às chamadas recebidas e, finalmente, usar um único botão para redefinir as recebidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não vou descrever esse processo, o post acabou inchado, só posso dizer que não foi difícil responder às mensagens recebidas, mas usar o botão não foi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as mensagens recebidas do bracelete, Zeroner interceptou em uma classe especial. </font><font style="vertical-align: inherit;">o pacote recebido tinha o cabeçalho do grupo de comandos e o número do comando, após uma longa depuração e testes, pesquei os grupos usados ​​e, em seguida, encontrei uma descrição no código Zeroner.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grupos e equipes de pulseiras</font></font></b><div class="spoiler_text"><code>// HEADER GROUPS //<br>
DEVICE = 0<br>
CONFIG = 1<br>
DATALOG = 2<br>
MSG = 3<br>
PHONE_MSG = 4<br>
<br>
// CONFIG = 1 ///<br>
CMD_ID_CONFIG_GET_AC = 5<br>
CMD_ID_CONFIG_GET_BLE = 3<br>
CMD_ID_CONFIG_GET_HW_OPTION = 9<br>
CMD_ID_CONFIG_GET_NMA = 7<br>
CMD_ID_CONFIG_GET_TIME = 1<br>
<br>
CMD_ID_CONFIG_SET_AC = 4<br>
CMD_ID_CONFIG_SET_BLE = 2<br>
CMD_ID_CONFIG_SET_HW_OPTION = 8<br>
CMD_ID_CONFIG_SET_NMA = 6<br>
CMD_ID_CONFIG_SET_TIME = 0<br>
<br>
// DATALOG = 2 //<br>
CMD_ID_DATALOG_CLEAR_ALL = 2<br>
CMD_ID_DATALOG_GET_BODY_PARAM = 1<br>
CMD_ID_DATALOG_SET_BODY_PARAM = 0<br>
<br>
CMD_ID_DATALOG_GET_CUR_DAY_DATA = 7<br>
<br>
CMD_ID_DATALOG_START_GET_DAY_DATA = 3<br>
CMD_ID_DATALOG_START_GET_MINUTE_DATA = 5<br>
CMD_ID_DATALOG_STOP_GET_DAY_DATA = 4<br>
CMD_ID_DATALOG_STOP_GET_MINUTE_DATA = 6<br>
<br>
// DEVICE = 0 //<br>
CMD_ID_DEVICE_GET_BATTERY = 1<br>
CMD_ID_DEVICE_GET_INFORMATION = 0<br>
CMD_ID_DEVICE_RESE = 2<br>
CMD_ID_DEVICE_UPDATE = 3<br>
<br>
// MSG = 3 //<br>
CMD_ID_MSG_DOWNLOAD = 1<br>
CMD_ID_MSG_MULTI_DOWNLOAD_CONTINUE = 3<br>
CMD_ID_MSG_MULTI_DOWNLOAD_END = 4<br>
CMD_ID_MSG_MULTI_DOWNLOAD_START = 2<br>
CMD_ID_MSG_UPLOAD = 0<br>
<br>
// PHONE_MSG = 4 //<br>
CMD_ID_PHONE_ALERT = 1<br>
CMD_ID_PHONE_PRESSKEY = 0<br>
</code><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Graças a isso, pude realizar um trabalho completo com a pulseira. </font><font style="vertical-align: inherit;">Eu posso obter dados sobre etapas, sobre sono. </font><font style="vertical-align: inherit;">Eu posso gerenciar as configurações, definir alarmes. </font><font style="vertical-align: inherit;">Consegui obter a designação de byte do pacote das classes que armazenam dados no banco de dados, implementei todos eles em casa.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No final</font></font></h5><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de pensar um pouco, decidi que tudo isso poderia ser útil não apenas para mim e escrevi um novo aplicativo que contém todos os dados e funções necessários para trabalhar com a pulseira, além de implementar uma interface simples para enviar notificações de qualquer aplicativo para a pulseira. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WiliX iWown for Geek</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Desde então, muito tempo se passou e, muitos após a atualização para o Android 6, o aplicativo parou de funcionar. </font><font style="vertical-align: inherit;">Também não funciona de forma estável com o firmware de pulseiras da 2ª versão. </font><font style="vertical-align: inherit;">Mas espero encontrar tempo para revisão. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O código fonte é postado no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Você pode se divertir e se divertir como quiser. </font><font style="vertical-align: inherit;">Todas as solicitações de recebimento após a revisão serão aceitas e os testes serão enviados imediatamente para o Google Play. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No momento, o aplicativo pode:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exibir notificações de qualquer aplicativo</font></font></li>
<li>  </li>
<li>     </li>
<li>       BT</li>
<li>  </li>
<li>    </li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma conexão com o Google Fit foi implementada para salvar os dados de treinamento, mas, como não escolhi o SDK para o Fit, vasculhei vários links e fóruns, mas ainda não entendi como fazer o ajuste exibir dados de dispositivos personalizados. Não está claro, então, por que essa função está lá. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se alguém trabalhou com o Google Fit e sabe como fazê-lo usar os dados de um sensor personalizado para exibir gráficos, conte-me nos comentários ou escreva-me para os usuários e ficarei muito agradecido! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Também foi uma ideia conectar a pulseira ao Sleep como Adnroid. Na verdade, para monitorar o sono, uma pulseira foi comprada. Mas, como se viu, o iWown pode retornar apenas a duração das fases do sono. Ou seja, dados já calculados a partir do acelerômetro.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o Sleep como Android requer dados simples do acelerômetro e com uma frequência desejada de 10 segundos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, o resultado. </font><font style="vertical-align: inherit;">Convido desenvolvedores e proprietários a apoiar o projeto com seu código, dicas e tudo o mais. </font><font style="vertical-align: inherit;">Deixe o pull-requist, problema no Github. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O aplicativo acabou sendo muito popular no exterior; os estrangeiros costumam escrever para mim, pedindo para adicionar / corrigir / traduzir alguma coisa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A propósito, o iWown i5 possui vários clones, com firmware semelhante: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vidonn X5 </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Harper BFB-301 </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excelvan i5</font></font></b><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referências</font></font></h5><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Play - iWown para Geek </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository no GitHub </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debate em w3bsit3-dns.com</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS A partir da 5ª versão, uma categoria adicional apareceu nos andróides na cortina, que não aparece na tela de bloqueio. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alguém pode me dizer como transferir minha notificação para esta categoria? </font><font style="vertical-align: inherit;">Obrigada</font></font><br>
<br>
<img src="https://habrastorage.org/files/18c/723/b95/18c723b95ca441a0a34c8d76a9748308.png"></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt391109/">https://habr.com/ru/post/pt391109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt391099/index.html">Emulando vários dispositivos com o Pi Zero - como fazer isso?</a></li>
<li><a href="../pt391101/index.html">Som # 29 - Podcast sobre áudio e o ecossistema sonoro</a></li>
<li><a href="../pt391103/index.html">Será plantado não apenas para curtidas e comentários, mas também para emoji</a></li>
<li><a href="../pt391105/index.html">Pensamentos em voz alta. Quatro é melhor que um ... Ou o conceito de quadrocopter de transporte</a></li>
<li><a href="../pt391107/index.html">Modo Ballmer Peak ou Super ONE</a></li>
<li><a href="../pt391111/index.html">Os engenheiros do MIT criaram os painéis solares mais leves</a></li>
<li><a href="../pt391113/index.html">Play: site p2p para torrents que não podem ser fechados</a></li>
<li><a href="../pt391117/index.html">Batman: Universo Nolan</a></li>
<li><a href="../pt391121/index.html">A Mozilla planeja atualizar o design do addons.mozilla.org (AMO)</a></li>
<li><a href="../pt391123/index.html">Sobre a nova patente da Boeing "impressão 3D de formulários gratuitos usando peças levitantes"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>