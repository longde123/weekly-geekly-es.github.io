<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😠 🤾🏼 👼🏻 Débarrassez-vous de "vk.com/away.php" ou suivez les liens d'une personne en bonne santé 👂🏼 ⌨️ 🏇🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque vous cliquez sur les liens publiés sur Vkontakte, vous remarquerez que, comme dans d'autres réseaux sociaux, une transition vers un lien «sûr»...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Débarrassez-vous de "vk.com/away.php" ou suivez les liens d'une personne en bonne santé</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453904/">  Lorsque vous cliquez sur les liens publiés sur Vkontakte, vous remarquerez que, comme dans d'autres réseaux sociaux, une transition vers un lien «sûr» se produit d'abord, après quoi le réseau social décide de laisser ou non l'utilisateur aller plus loin.  Les personnes les plus attentives ont remarqué une apparition d'une demi-seconde de «vk.com/away.php» dans la barre d'adresse du navigateur, mais, bien sûr, n'y attachent aucune importance. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9e2/f48/5ce/9e2f485ce3968415c62fdd9a267ed67a.jpg"><br><a name="habracut"></a><br><h2>  Contexte </h2><br>  Une fois, un certain programmeur, ayant terminé un autre projet, s'est rendu compte qu'il était obsédé par le désir d'en parler à tout le monde.  Le projet était hébergé sur un serveur avec une IP unique, mais sans nom de domaine.  Par conséquent, à la hâte, j'ai créé un beau sous-domaine de troisième niveau dans le domaine .ddns.net, qui a finalement été utilisé comme lien. <br><br>  Après être revenu à la publication après un certain temps, le programmeur a constaté qu'au lieu du site, un stub VK s'ouvre, informant de la transition vers un site dangereux: <br><br><img src="https://habrastorage.org/webt/tv/l0/rx/tvl0rxceeskzteni911xkp886-g.png"><br><br>  Il semblerait que les utilisateurs intelligents eux-mêmes aient le droit de décider vers quel site ils doivent aller et lesquels non, mais Vkontakte pense différemment et ne donne aucune possibilité de suivre le lien sans béquilles. <br><br><h2>  Qu'est-ce qui ne va pas </h2><br>  Cette implémentation présente plusieurs inconvénients importants: <br><br><ul><li>  <b>L'incapacité d'ouvrir un site suspect.</b>  Comme mentionné ci-dessus, l'utilisateur n'a aucun moyen de surmonter le talon.  La seule façon d'ouvrir le lien est de le copier et de le coller dans la barre d'adresse. </li><li>  <b>Ralentit un lien.</b>  La vitesse de redirection dépend du ping.  En conséquence, avec un grand ping, de précieuses secondes de vie peuvent disparaître, ce qui, comme nous le savons, n'est pas autorisé. </li><li>  <b>Surveillance de la conversion.</b>  Cette méthode facilite la collecte d'informations sur les actions des utilisateurs, qui, bien sûr, utilise VK, en ajoutant au lien sécurisé l'ID de la publication à partir de laquelle la transition a été effectuée. </li></ul><br><h2>  Django gratuit </h2><br>  La meilleure solution à tous les problèmes ci-dessus peut être une extension de navigateur.  Pour des raisons évidentes, le choix revient à Chrome.  Sur un habr il y a un excellent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article un</a> article consacré à l'écriture d'extensions pour Chrome. <br><br>  Pour créer une telle extension, nous devons créer deux fichiers dans un dossier séparé: json-Manifest et un fichier JavaScript pour surveiller l'url actuelle de l'adresse. <br><br><h4>  Créer un fichier manifeste </h4><br>  La principale chose dont nous avons besoin est de donner à l'extension l'autorisation de travailler avec des onglets et d'attribuer un script exécutable: <br><br><pre><code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"manifest_version"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Run Away From vk.com/away"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: [<span class="hljs-string"><span class="hljs-string">"background.js"</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">"permissions"</span></span>: [<span class="hljs-string"><span class="hljs-string">"tabs"</span></span>], <span class="hljs-attr"><span class="hljs-attr">"browser_action"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default_title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Run Away From vk.com/away"</span></span> } }</code> </pre> <br><h4>  Créer un fichier js </h4><br>  Tout est simple ici: dans le cas qui est appelé lors de la création d'un nouvel onglet, nous ajoutons une vérification de l'adresse URL, si elle commence par « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vk.com/away.php</a> », puis nous la remplaçons par la bonne qui se trouve dans la demande GET: <br><br><pre> <code class="javascript hljs">chrome.tabs.onCreated.addListener( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tabId, changeInfo, tab</span></span></span><span class="hljs-function">) </span></span>{ chrome.tabs.query({<span class="hljs-string"><span class="hljs-string">'active'</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">'lastFocusedWindow'</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tabs</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = tabs[<span class="hljs-number"><span class="hljs-number">0</span></span>].url; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (url.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">23</span></span>) == <span class="hljs-string"><span class="hljs-string">"https://vk.com/away.php"</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> last = url.indexOf(<span class="hljs-string"><span class="hljs-string">"&amp;"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(last == <span class="hljs-number"><span class="hljs-number">-1</span></span>)last = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = <span class="hljs-built_in"><span class="hljs-built_in">decodeURIComponent</span></span>(url.substr(<span class="hljs-number"><span class="hljs-number">27</span></span>, last<span class="hljs-number"><span class="hljs-number">-27</span></span>)); chrome.tabs.update({<span class="hljs-attr"><span class="hljs-attr">url</span></span>: url}); } }); });</code> </pre><br><h4>  Mettre l'extension </h4><br>  Après vous être assuré que les deux fichiers se trouvent dans le même dossier, ouvrez Chrome, sélectionnez l'onglet d'extension et cliquez sur "Télécharger l'extension décompressée".  Dans la fenêtre qui s'ouvre, sélectionnez le dossier écrit avancé et cliquez sur collecter.  C'est fait!  Désormais, tous les liens tels que vk.com/away sont remplacés par les liens d'origine. <br><br><h2>  Au lieu d'une conclusion </h2><br>  Bien sûr, ce type de talon a sauvé beaucoup de gens de millions de sites frauduleux, cependant, je pense que les gens eux-mêmes ont le droit de décider d'aller sur un lien dangereux ou non. <br>  Pour plus de commodité, j'ai posté le projet sur <a href="">github</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr453904/">https://habr.com/ru/post/fr453904/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr453882/index.html">Un excellent guide sur le métier d'architecte de solutions (+ liste de liens utiles)</a></li>
<li><a href="../fr453884/index.html">Remplacement de la caméra HYIP ou du reflex numérique?</a></li>
<li><a href="../fr453886/index.html">Le programme fonctionne</a></li>
<li><a href="../fr453890/index.html">Rêves soviétiques de l'avenir</a></li>
<li><a href="../fr453892/index.html">Certification ISTQB. Partie 2: Comment se préparer à la certification ISTQB? Histoires de pratique</a></li>
<li><a href="../fr453906/index.html">Qu'est-ce qu'un "modèle de domaine"?</a></li>
<li><a href="../fr453908/index.html">RTOS Neutrino dans les ordinateurs industriels</a></li>
<li><a href="../fr453914/index.html">Instructions d'installation du client de test TON</a></li>
<li><a href="../fr453916/index.html">Comment vous protéger contre les escrocs mobiles</a></li>
<li><a href="../fr453920/index.html">Comment prendre le contrôle de votre infrastructure réseau. Chapitre quatre Automatisation Modèles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>