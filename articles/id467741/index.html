<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👃🏽 🚵🏽 🤶 Pengantar majelis deterministik dalam C / C ++. Bagian 1 🍁 👨🏾 👨‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Terjemahan artikel ini disiapkan khusus untuk siswa kursus "Pengembang C ++" . 



 Apa itu majelis deterministik? 
 Rakitan deterministik adalah pros...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengantar majelis deterministik dalam C / C ++. Bagian 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/467741/">  <i>Terjemahan artikel ini disiapkan khusus untuk siswa kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang C ++"</a> .</i> <br><br><img src="https://habrastorage.org/webt/pe/j0/5e/pej05eo-w-5tdwrp0yrlv7lbedy.png"><br><hr><br><h3>  Apa itu majelis deterministik? </h3><br>  Rakitan deterministik adalah proses membangun kode sumber yang sama dengan lingkungan dan instruksi perakitan yang sama, di mana file biner yang sama dibuat dalam kasus apa pun, bahkan jika mereka dibuat pada mesin yang berbeda, di direktori yang berbeda dan dengan nama yang berbeda .  Majelis seperti itu kadang-kadang juga disebut majelis yang dapat dimainkan atau disegel jika dijamin bahwa mereka akan membuat biner yang sama bahkan ketika menyusun dari folder yang berbeda. <a name="habracut"></a><br><br>  Majelis deterministik bukanlah sesuatu yang terjadi dengan sendirinya.  Mereka tidak dibuat dalam proyek biasa, dan alasan mengapa ini tidak terjadi mungkin berbeda untuk setiap sistem operasi atau kompiler. <br><br>  Majelis deterministik harus dijamin untuk <i>lingkungan perakitan yang</i> diberikan.  Ini berarti bahwa beberapa variabel, seperti <i>sistem operasi, versi sistem pembangunan, dan arsitektur target</i> , mungkin tetap sama di versi berbeda. <br><br>  Dalam beberapa tahun terakhir, berbagai organisasi, seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chromium</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Reproducible builds,</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Yocto</a> , telah melakukan upaya besar untuk mencapai majelis deterministik. <br><br><h3>  Pentingnya majelis deterministik </h3><br>  Ada dua alasan utama mengapa majelis deterministik sangat penting: <br><br><ul><li>  <b>Keamanan</b>  Mengubah biner alih-alih kode sumber dapat membuat perubahan tidak terlihat oleh penulis asli.  Ini bisa berakibat fatal di lingkungan yang kritis seperti kedokteran, penerbangan, dan ruang.  Hasil yang berpotensi identik untuk bahan-bahan ini memungkinkan pihak ketiga untuk mencapai konsensus pada hasil yang benar. </li><li>  <b>Penelusuran dan kontrol biner</b> .  Jika Anda ingin memiliki repositori untuk menyimpan file biner Anda, maka kemungkinan besar Anda tidak ingin membuat file biner dengan checksum acak dari sumber dalam revisi yang sama.  Ini dapat menyebabkan sistem repositori untuk menyimpan binari yang berbeda sebagai versi yang berbeda ketika mereka harus sama.  Misalnya, jika Anda bekerja di Windows atau MacOS, perpustakaan memiliki bidang dengan waktu pembuatan / modifikasi file objek yang termasuk di dalamnya, yang akan menyebabkan perbedaan dalam file biner. </li></ul><br><h3>  File biner yang terlibat dalam proses build di C / C ++ </h3><br>  Ada berbagai jenis biner yang dibuat selama proses pembangunan di C / C ++, tergantung pada sistem operasi. <br><br>  <b>Microsoft Windows</b>  Yang paling penting adalah file dengan ekstensi <code>.obj</code> , <code>.lib</code> , <code>.lib</code>  <code>dll</code> dan <code>.exe</code> .  Mereka semua mematuhi spesifikasi format portable executable (PE).  File-file ini dapat dianalisis dengan alat-alat seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dumpbin</a> . <br>  <b>Linux</b>  File dengan ekstensi <code>.o</code> , <code>.a</code> , <code>.so</code> dan tanpa ekstensi (untuk file biner yang dapat dieksekusi) sesuai dengan format file yang dapat dieksekusi dan ditautkan (ELF).  Isi file ELF dapat dianalisis menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">readelf</a> . <br>  <b>OS Mac</b>  File dengan ekstensi <code>.o</code> , <code>.a</code> , <code>.dylib</code> , dan tanpa ekstensi (untuk file biner yang dapat dieksekusi) mematuhi spesifikasi format Mach-O.  File-file ini dapat diverifikasi menggunakan aplikasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">otool</a> , yang merupakan bagian dari toolkit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Xcode</a> pada MacOS. <br><br><h3>  Sumber Variasi </h3><br>  Banyak faktor yang berbeda dapat membuat majelis Anda menjadi <i>non-deterministik</i> .  Faktor-faktor akan bervariasi untuk sistem operasi dan kompiler yang berbeda.  Setiap kompiler memiliki parameter tertentu untuk memperbaiki sumber variasi.  Sampai saat ini, <code>gcc</code> dan <code>clang</code> adalah kompiler yang berisi lebih banyak opsi untuk memperbaiki.  Ada beberapa opsi tidak berdokumen untuk <code>msvc</code> yang dapat Anda coba, tetapi pada akhirnya, Anda mungkin harus memperbaiki binari untuk mendapatkan rakitan deterministik. <br><br><h4>  Stempel Waktu Ditambahkan oleh Compiler / Linker </h4><br>  Ada dua alasan utama mengapa biner kami berisi informasi waktu yang membuatnya tidak dapat diputar: <br><br><ul><li>  Menggunakan <code>__TIME__</code> atau <code>__TIME__</code> di sumber. </li><li>  Ketika format file memaksa Anda untuk menyimpan informasi waktu dalam file objek.  Ini adalah kasus format Portable Executable di Windows dan Mach-O pada MacOS.  Di Linux, file ELF tidak menyandikan cap waktu. </li></ul><br>  Mari kita lihat contoh di mana informasi ini berakhir dengan menyusun pustaka statis proyek hello world base di MacOS. <br><br><pre> <code class="cpp hljs">. ├── CMakeLists.txt ├── hello_world.cpp ├── hello_world.hpp ├── main.cpp └── run_build.sh</code> </pre> <br>  Perpustakaan menampilkan pesan di terminal: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"hello_world.hpp"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; void HelloWorld::PrintMessage(const std::string &amp; message) { std::cout &lt;&lt; message &lt;&lt; std::endl; }</span></span></span></span></code> </pre> <br>  Dan aplikasi akan menggunakan ini untuk menampilkan pesan "Hello World!": <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include "hello_world.hpp" int main(int argc, char** argv) { HelloWorld hello; hello.PrintMessage("Hello World!"); return 0; }</span></span></span></span></code> </pre> <br>  Kami akan menggunakan CMake untuk membangun proyek: <br><br><pre> <code class="cpp hljs">cmake_minimum_required(VERSION <span class="hljs-number"><span class="hljs-number">3.0</span></span>) project(HelloWorld) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(CMAKE_CXX_STANDARD <span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(CMAKE_CXX_STANDARD_REQUIRED ON) add_library(HelloLibA hello_world.cpp) add_library(HelloLibB hello_world.cpp) add_executable(helloA main.cpp) add_executable(helloB main.cpp) target_link_libraries(helloA HelloLibA) target_link_libraries(helloB HelloLibB)</code> </pre> <br>  Kami akan membuat dua pustaka yang berbeda dengan kode sumber yang sama, serta dua file biner dengan sumber yang sama.  Bangun proyek dan jalankan <code>md5sum</code> untuk melihat checksum dari semua file biner: <br><br><pre> <code class="cpp hljs">mkdir build &amp;&amp; cd build cmake .. make md5sum helloA md5sum helloB md5sum CMakeFiles/HelloLibA.dir/hello_world.cpp.o md5sum CMakeFiles/HelloLibB.dir/hello_world.cpp.o md5sum libHelloLibA.a md5sum libHelloLibB.a</code> </pre> <br>  Kami mendapatkan kesimpulan seperti ini: <br><br><pre> <code class="cpp hljs">b5dce09c593658ee348fd0f7fae22c94 helloA b5dce09c593658ee348fd0f7fae22c94 helloB <span class="hljs-number"><span class="hljs-number">0</span></span>a4a0de3df8cc7f053f2fcb6d8b75e6d CMakeFiles/HelloLibA.dir/hello_world.cpp.o <span class="hljs-number"><span class="hljs-number">0</span></span>a4a0de3df8cc7f053f2fcb6d8b75e6d CMakeFiles/HelloLibB.dir/hello_world.cpp.o adb80234a61bb66bdc5a3b4b7191eac7 libHelloLibA.a <span class="hljs-number"><span class="hljs-number">5</span></span>ac3c70d28d9fdd9c6571e077131545e libHelloLibB.a</code> </pre> <br>  Ini menarik karena <code>helloB</code> dan <code>helloB</code> memiliki checksum yang sama, serta file objek perantara Mach-O <code>hello_world.cpp.o</code> , tetapi ini tidak dapat dikatakan untuk file dengan ekstensi <code>.a</code> .  Ini karena mereka menyimpan informasi tentang file objek perantara dalam format arsip.  Header format ini mencakup bidang yang disebut <code>st_time</code> ditetapkan oleh panggilan sistem <code>stat</code> .  Periksa <code>libHelloLibA.a</code> dan <code>libHelloLibB.a</code> menggunakan <code>libHelloLibB.a</code> untuk menunjukkan header: <br><br><pre> <code class="cpp hljs">&gt; otool -a libHelloLibA.a Archive : libHelloLibA.a <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">612</span></span> <span class="hljs-number"><span class="hljs-number">1566927276</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">13036</span></span> <span class="hljs-number"><span class="hljs-number">1566927271</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span> &gt; otool -a libHelloLibB.a Archive : libHelloLibB.a <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">612</span></span> <span class="hljs-number"><span class="hljs-number">1566927277</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">13036</span></span> <span class="hljs-number"><span class="hljs-number">1566927272</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span></code> </pre> <br>  Kami melihat bahwa file tersebut berisi beberapa bidang sementara yang membuat majelis kami tidak deterministik.  Perhatikan bahwa bidang ini tidak berlaku untuk file final yang dapat dieksekusi karena mereka memiliki checksum yang sama.  Masalah ini juga dapat terjadi ketika membangun pada Windows dengan Visual Studio, tetapi dengan file PE bukan Mach-O. <br><br>  Pada titik ini, kita dapat mencoba untuk memperburuk keadaan dan membuat biner kita menjadi non-deterministik.  Ubah file <code>main.cpp</code> sehingga termasuk makro <code>__TIME__</code> : <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include "hello_world.hpp" int main(int argc, char** argv) { HelloWorld hello; hello.PrintMessage("Hello World!"); std::cout &lt;&lt; "At time: " &lt;&lt; __TIME__ &lt;&lt; std::endl; return 0; }</span></span></span></span></code> </pre> <br>  Periksa checksum file lagi: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">625</span></span>ecc7296e15d41e292f67b57b04f15 helloA <span class="hljs-number"><span class="hljs-number">20f</span></span>92d2771a7d2f9866c002de918c4da helloB <span class="hljs-number"><span class="hljs-number">0</span></span>a4a0de3df8cc7f053f2fcb6d8b75e6d CMakeFiles/HelloLibA.dir/hello_world.cpp.o <span class="hljs-number"><span class="hljs-number">0</span></span>a4a0de3df8cc7f053f2fcb6d8b75e6d CMakeFiles/HelloLibB.dir/hello_world.cpp.o b7801c60d3bc4f83640cadc1183f43b3 libHelloLibA.a <span class="hljs-number"><span class="hljs-number">4</span></span>ef6cae3657f2a13ed77830953b0aee8 libHelloLibB.a</code> </pre> <br>  Kami melihat bahwa sekarang kami memiliki binari yang berbeda.  Kita bisa menganalisis executable dengan alat seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diffoscope</a> , yang menunjukkan perbedaan antara dua file biner: <br><br><pre> <code class="cpp hljs">&gt; diffoscope helloA helloB --- helloA +++ helloB ├── otool -arch x86_64 -tdvV {} │┄ Code <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> architecture x86_64 │ @@ <span class="hljs-number"><span class="hljs-number">-16</span></span>,<span class="hljs-number"><span class="hljs-number">15</span></span> +<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">15</span></span> @@ │ <span class="hljs-number"><span class="hljs-number">00000001000018</span></span>da jmp <span class="hljs-number"><span class="hljs-number">0x1000018df</span></span> │ <span class="hljs-number"><span class="hljs-number">00000001000018</span></span>df leaq <span class="hljs-number"><span class="hljs-number">-0x30</span></span>(%rbp), %rdi │ <span class="hljs-number"><span class="hljs-number">00000001000018e3</span></span> callq <span class="hljs-number"><span class="hljs-number">0x100002d54</span></span> #<span class="hljs-meta"><span class="hljs-meta"># symbol stub for: __ZNSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED1Ev │ 00000001000018e8 movq 0x1721(%rip), %rdi ## literal pool symbol address: __ZNSt3__14coutE │ 00000001000018ef leaq 0x162f(%rip), %rsi ## literal pool for: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"At time: "</span></span></span><span class="hljs-meta"> │ 00000001000018f6 callq 0x100002d8a ## symbol stub for: __ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc │ 00000001000018fb movq %rax, %rdi │ -00000001000018fe leaq 0x162a(%rip), %rsi ## literal pool for: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"19:40:47"</span></span></span><span class="hljs-meta"> │ +00000001000018fe leaq 0x162a(%rip), %rsi ## literal pool for: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"19:40:48"</span></span></span><span class="hljs-meta"> │ 0000000100001905 callq 0x100002d8a ## symbol stub for: __ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc │ 000000010000190a movq %rax, %rdi │ 000000010000190d leaq __ZNSt3__1L4endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_(%rip), %rsi #</span></span></code> </pre> <br>  Ini menunjukkan bahwa informasi <code>__TIME__</code> telah disisipkan ke dalam biner, yang membuatnya menjadi non-deterministik.  Mari kita lihat apa yang bisa dilakukan untuk menghindari hal ini. <br><br><h4>  Kemungkinan Solusi untuk Microsoft Visual Studio </h4><br>  Microsoft Visual Studio memiliki tanda tautan / bendera Brepro yang tidak didokumentasikan oleh Microsoft.  Bendera ini menetapkan stempel waktu dari format Portable Executable ke -1, seperti terlihat pada gambar di bawah ini. <br><br><img src="https://habrastorage.org/webt/oh/ds/ca/ohdsca2wvgdmv_j4zdfgbyc5xmq.png"><br><br>  Untuk mengaktifkan flag ini dengan CMake, kita harus menambahkan baris berikut saat membuat <code>.exe</code> : <br><br><pre> <code class="cpp hljs">add_link_options(<span class="hljs-string"><span class="hljs-string">"/Brepro"</span></span>)</code> </pre> <br>  atau baris ini untuk <code>.lib</code> <br><br><pre> <code class="cpp hljs">set_target_properties( TARGET PROPERTIES STATIC_LIBRARY_OPTIONS <span class="hljs-string"><span class="hljs-string">"/Brepro"</span></span> )</code> </pre> <br>  Masalahnya adalah bahwa flag ini membuat binari dimainkan (relatif terhadap cap waktu dalam format file) dalam biner .exe terakhir kita, tetapi tidak menghapus semua cap waktu dari .lib (masalah yang sama seperti dengan file objek Mach-O, yang kita bicarakan di atas).  Bidang TimeDateStamp dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">file header COFF</a> untuk file <code>.lib</code> akan tetap ada.  Satu-satunya cara untuk menghapus informasi ini dari file <code>.lib</code> biner adalah dengan memperbaiki <code>.lib</code> dengan mengganti byte yang sesuai dengan bidang TimeDateStamp dengan nilai yang diketahui. <br><br><h4>  Kemungkinan solusi untuk GCC dan CLANG </h4><br><ul><li>  gcc mendeteksi keberadaan variabel lingkungan SOURCE_DATE_EPOCH.  Jika variabel ini disetel, nilainya menunjukkan cap waktu UNIX yang akan digunakan untuk mengganti tanggal dan waktu saat ini di makro <code>__TIME__</code> dan <code>__TIME__</code> sehingga stempel waktu <code>__DATE__</code> menjadi dapat direproduksi.  Nilai dapat diatur ke cap waktu yang dikenal, seperti waktu perubahan terakhir ke file sumber atau paket. </li><li>  dentang menggunakan <code>ZERO_AR_DATE</code> , yang, jika disetel, menyetel ulang <code>ZERO_AR_DATE</code> waktu <code>ZERO_AR_DATE</code> disediakan dalam file arsip, atur ke 0. Perhatikan bahwa ini tidak akan memperbaiki <code>__TIME__</code> atau <code>__TIME__</code> .  Jika kita ingin memperbaiki efek makro ini, kita harus memperbaiki binari atau memalsukan waktu sistem. </li></ul><br>  Mari kita lanjutkan dengan proyek sampel kami untuk MacOS dan lihat apa hasilnya ketika mengatur <code>ZERO_AR_DATE</code> lingkungan <code>ZERO_AR_DATE</code> . <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> ZERO_AR_DATE=<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  Sekarang, jika kita mengkompilasi file dan pustaka yang dapat dieksekusi (menghapus <code>__DATE__</code> makro di sumber), kita mendapatkan: <br><br><pre> <code class="cpp hljs">b5dce09c593658ee348fd0f7fae22c94 helloA b5dce09c593658ee348fd0f7fae22c94 helloB <span class="hljs-number"><span class="hljs-number">0</span></span>a4a0de3df8cc7f053f2fcb6d8b75e6d CMakeFiles/HelloLibA.dir/hello_world.cpp.o <span class="hljs-number"><span class="hljs-number">0</span></span>a4a0de3df8cc7f053f2fcb6d8b75e6d CMakeFiles/HelloLibB.dir/hello_world.cpp.o <span class="hljs-number"><span class="hljs-number">9f</span></span>9a9af4bb3e220e7a22fb58d708e1e5 libHelloLibA.a <span class="hljs-number"><span class="hljs-number">9f</span></span>9a9af4bb3e220e7a22fb58d708e1e5 libHelloLibB.a</code> </pre> <br>  Semua checksum sekarang sama.  <code>.a</code> menganalisis file header dengan ekstensi <code>.a</code> : <br><br><pre> <code class="cpp hljs">&gt; otool -a libHelloLibA.a Archive : libHelloLibA.a <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">612</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">13036</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span> &gt; otool -a libHelloLibB.a Archive : libHelloLibB.a <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">612</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">0100644</span></span> <span class="hljs-number"><span class="hljs-number">503</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">13036</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span></code> </pre> <br>  Kita dapat melihat bahwa bidang <code>timestamp</code> dari tajuk perpustakaan disetel ke nol. <br><br>  <i>Kami dengan lancar sampai pada bagian akhir artikel.</i>  <i>Kelanjutan materi bisa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dibaca di sini</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467741/">https://habr.com/ru/post/id467741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467729/index.html">Keripik atau naik? Hal-hal kecil yang unik di smartphone</a></li>
<li><a href="../id467733/index.html">Sebagai pengembang, saya tidak pernah tahu nilai saya sendiri, karena tidak ada. Tetapi seluruh sistem dibangun seolah-olah demikian</a></li>
<li><a href="../id467735/index.html">Tantangan Posisi Dewasa</a></li>
<li><a href="../id467737/index.html">Aplikasi Bot VS: pro dan kontra. Kasus akuntan bot</a></li>
<li><a href="../id467739/index.html">Bisnis tanpa teknologi. Uang yang kehilangan Anda</a></li>
<li><a href="../id467743/index.html">SamsPcbGuide, bagian 11: Teknologi - penutup tipe BGA, plastik, dan ruang</a></li>
<li><a href="../id467745/index.html">Cluster lebih baik daripada "metode siku"</a></li>
<li><a href="../id467747/index.html">Tes psikologis: cara mendapatkan dari psikolog bersertifikat ke tester</a></li>
<li><a href="../id467749/index.html">GCP: Parsing Google Cloud Platform Computing Stack</a></li>
<li><a href="../id467751/index.html">Bagaimana cara messenger terdesentralisasi di blockchain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>