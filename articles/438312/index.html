<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèº ‚ôêÔ∏è üöµüèø Automatizaci√≥n de red con Ansible: m√≥dulo de comando üë®üèª‚Äçüç≥ ü§≥üèª üéª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hablando de escenarios t√≠picos de automatizaci√≥n de red, uno no puede prescindir de un conjunto de m√≥dulos de comando. Gracias a estos m√≥dulos, Ansibl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatizaci√≥n de red con Ansible: m√≥dulo de comando</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/438312/">  Hablando de escenarios t√≠picos de automatizaci√≥n de red, uno no puede prescindir de un conjunto de m√≥dulos de comando.  Gracias a estos m√≥dulos, Ansible le permite ejecutar comandos en equipos de red como si los estuviera ingresando directamente desde la consola.  Al mismo tiempo, la salida de comandos no solo se desliza en la ventana del terminal para hundirse en el olvido, sino que se puede guardar y usar en el futuro.  Puede escribirse en variables, analizarse para su uso en tareas posteriores o guardarse para futuras variables de host. <br><br><img src="https://habrastorage.org/webt/ga/bs/bh/gabsbhxuxhvjzjvvizswbdkkq2o.png" width="100%"><br><br>  El objetivo de esta publicaci√≥n es mostrar que cualquier tarea repetitiva de administraci√≥n de red puede automatizarse, y que Ansible no solo le permite administrar configuraciones, sino que tambi√©n ayuda a deshacerse de la rutina y ahorrar tiempo. <br><a name="habracut"></a><br>  Analicemos las formas b√°sicas de usar los m√≥dulos de comando de red, incluido guardar la salida de comandos usando el par√°metro de registro.  Tambi√©n consideramos c√≥mo escalar a varios dispositivos de red usando hostvars y c√≥mo organizar la ejecuci√≥n condicional usando el par√°metro wait_for y otros tres par√°metros relacionados: intervalo, reintentos y coincidencia. <br><br>  Las diferentes plataformas de red tienen sus propios m√≥dulos de comando, todos los cuales son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">compatibles</a> con el nivel de extensi√≥n del complemento Red Hat Ansible Engine Networking: <br><br><table><tbody><tr><td>  <b>Plataformas de red</b> </td><td>  <b>M√≥dulos * os_command</b> </td></tr><tr><td>  Arista eos </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">eos_command</a> </td></tr><tr><td>  Cisco IOS / IOS-XE </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ios_command</a> </td></tr><tr><td>  Cisco IOS-XR </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">iosxr_command</a> </td></tr><tr><td>  Cisco NX-OS </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nxos_command</a> </td></tr><tr><td>  Juniper Junos </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">junos_command</a> </td></tr><tr><td>  Vyos </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">vyos_command</a> </td></tr></tbody></table><br><h3>  Conceptos b√°sicos del m√≥dulo de comando </h3><br>  Considere un libro de jugadas que simplemente ejecute el comando show version usando el m√≥dulo eos_command: <br><br><pre><code class="plaintext hljs">--- - name: COMMAND MODULE PLAYBOOK hosts: eos connection: network_cli tasks: - name: EXECUTE ARISTA EOS COMMAND eos_command: commands: show version register: output - name: PRINT OUT THE OUTPUT VARIABLE debug: var: output</code> </pre> <br>  Aqu√≠ tenemos dos tareas y la primera utiliza el m√≥dulo eos_command con un solo par√°metro de comandos.  Como solo ejecutamos un comando, show version, se puede especificar en la misma l√≠nea que el par√°metro de comandos en s√≠.  Si hay dos o m√°s equipos, cada uno de ellos debe colocarse en una l√≠nea separada despu√©s de los comandos:.  En este ejemplo, usamos la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">palabra clave de registro</a> para guardar la salida del comando show version.  El par√°metro de registro (se puede usar en cualquier tarea de Ansible) establece la variable donde se guardar√° la salida de nuestra tarea para que se pueda usar m√°s tarde.  En nuestro ejemplo, esta variable se llama salida. <br><br>  La segunda tarea en nuestro ejemplo utiliza el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√≥dulo de depuraci√≥n</a> para mostrar el contenido de la variable de salida reci√©n creada.  Es decir, estos son los mismos datos que ver√≠a en la interfaz de l√≠nea de comandos en el dispositivo EOS si ingresa "mostrar versi√≥n" all√≠.  La diferencia es que nuestro libro de jugadas los mostrar√° en la ventana de terminal en la que lo inicias.  Como puede ver, el m√≥dulo de depuraci√≥n facilita la comprobaci√≥n de las variables Ansible. <br><br>  Aqu√≠ est√° el resultado de nuestro libro de jugadas: <br><br><pre> <code class="plaintext hljs">PLAY [eos] ************************************************************************* TASK [execute Arista eos command] ************************************************** ok: [eos] TASK [print out the output variable] *********************************************** ok: [eos] =&gt; { "output": { "changed": false, "failed": false, "stdout": [ "Arista vEOS\nHardware version: \nSerial number: \nSystem MAC address: 0800.27ec.005e\n\nSoftware image version: 4.20.1F\nArchitecture: i386\nInternal build version: 4.20.1F-6820520.4201F\nInternal build ID: 790a11e8-5aaf-4be7-a11a-e61795d05b91\n\nUptime: 1 day, 3 hours and 23 minutes\nTotal memory: 2017324 kB\nFree memory: 1111848 kB" ], "stdout_lines": [ [ "Arista vEOS", "Hardware version: ", "Serial number: ", "System MAC address: 0800.27ec.005e", "", "Software image version: 4.20.1F", "Architecture: i386", "Internal build version: 4.20.1F-6820520.4201F", "Internal build ID: 790a11e8-5aaf-4be7-a11a-e61795d05b91", "", "Uptime: 1 day, 3 hours and 23 minutes", "Total memory: 2017324 kB", "Free memory: 1111848 kB" ] ] } } PLAY RECAP ************************************************************************* eos : ok=2 changed=0 unreachable=0 failed=0</code> </pre><br>  Como se puede ver en la captura de pantalla, nuestras dos tareas funcionaron con √©xito.  Dado que la primera tarea usa el nivel de detalle predeterminado de los mensajes, simplemente dice que el host eos complet√≥ la tarea con el resultado correcto, destacando el √©xito de la ejecuci√≥n en verde.  La segunda tarea, con el m√≥dulo de depuraci√≥n, devuelve la salida del comando ejecutado, mostrando la misma informaci√≥n en dos formatos: <br><br><ul><li>  stdout </li><li>  stdout_lines </li></ul><br>  La secci√≥n stdout muestra lo mismo que ver√≠a en la interfaz de l√≠nea de comando en el dispositivo, pero en forma de una l√≠nea larga.  Y la secci√≥n stdout_lines divide esta salida en l√≠neas para que sea conveniente leerla.  Cada elemento de esta lista es una l√≠nea separada en la salida del comando. <br><br>  Compare la salida del comando en el dispositivo y en Ansible: <br><br><table><tbody><tr><td>  <b>Salida del equipo en Arista EOS</b> </td><td>  <b>stdout_lines en Ansible</b> </td></tr><tr><td>  eos&gt; show vers <br>  Arista vEOS <br>  Versi√≥n de hardware: <br>  N√∫mero de serie: <br>  Direcci√≥n MAC del sistema: 0800.27ec.005e <br><br>  Versi√≥n de imagen del software: 4.20.1F <br>  Arquitectura: i386 <br>  Versi√≥n de compilaci√≥n interna: 4.20.1F-6820520.4201F <br>  ID de compilaci√≥n interna: 790a11e8-5aaf-4be7-a11a-e61795d05b91 <br><br>  Tiempo de actividad: 1 d√≠a, 3 horas y 56 minutos. <br>  Memoria total: 2017324 kB <br>  Memoria libre: 1116624 kB </td><td>  "Stdout_lines": [ <br>  [ <br>  "Arista vEOS", <br>  "Versi√≥n de hardware:", <br>  "N√∫mero de serie:", <br>  "Direcci√≥n MAC del sistema: 0800.27ec.005e", <br>  "", <br>  "Versi√≥n de imagen de software: 4.20.1F", <br>  "Arquitectura: i386", <br>  "Versi√≥n de compilaci√≥n interna: <br>  4.20.1F-6820520.4201F ", <br>  "ID de compilaci√≥n interna: <br>  790a11e8-5aaf-4be7-a11a-e61795d05b91 ", <br>  "", <br>  "Tiempo de actividad: 1 d√≠a, 3 horas y 23 minutos", <br>  "Memoria total: 2017324 kB", <br>  "Memoria libre: 1111848 kB" <br>  ] </td></tr></tbody></table><br>  Si est√° familiarizado con JSON y YAML, entonces probablemente ya prest√≥ atenci√≥n a una rareza: stdout_lines comienza con dos corchetes de apertura: <br><br><pre> <code class="plaintext hljs">"stdout_lines": [ [</code> </pre><br>  Dos corchetes de apertura indican que stdout_lines en realidad devuelve una lista de listas de l√≠neas.  Si modifica ligeramente nuestra tarea de depuraci√≥n, este chip se puede usar para ver selectivamente los resultados del comando.  Como solo hay una lista de l√≠neas en nuestra lista, esta lista se llama cero (de hecho, es la primera, pero el recuento va desde cero).  Ahora veamos c√≥mo extraer una l√≠nea separada de ella, por ejemplo, Direcci√≥n MAC del sistema.  En la salida del comando, esta l√≠nea es la cuarta consecutiva, pero dado que contamos desde cero, finalmente necesitamos la l√≠nea 3 de la lista 0, en otras palabras: output.stdout_lines [0] [3]. <br><br><pre> <code class="plaintext hljs"> - name: print out a single line of the output variable debug: var: output.stdout_lines[0][3]   debug-   : TASK [print out a single line of the output variable] ****************************** ok: [eos] =&gt; { "output.stdout_lines[0][3]": "System MAC address: 0800.27ec.005e" }</code> </pre><br>  ¬øCu√°l es el punto de la numeraci√≥n de listas y por qu√© es necesario?  El hecho es que dentro de la misma tarea puede ejecutar varios equipos, por ejemplo, de esta manera (aqu√≠ tenemos tres equipos): <br><br><pre> <code class="plaintext hljs">--- - hosts: eos connection: network_cli tasks: - name: execute Arista eos command eos_command: commands: - show version - show ip int br - show int status register: output - name: print out command debug: var: output.stdout_lines</code> </pre><br>  As√≠ es como se ve la salida: <br><br><pre> <code class="plaintext hljs"> "output.stdout_lines": [ [ "Arista vEOS", "Hardware version: ", "Serial number: ", "System MAC address: 0800.27ec.005e", "", "Software image version: 4.20.1F", "Architecture: i386", "Internal build version: 4.20.1F-6820520.4201F", "Internal build ID: 790a11e8-5aaf-4be7-a11a-e61795d05b91", "", "Uptime: 1 day, 4 hours and 20 minutes", "Total memory: 2017324 kB", "Free memory: 1111104 kB" ], [ "Interface IP Address Status Protocol MTU", "Ethernet1 172.16.1.1/24 up up 1500", "Management1 192.168.2.10/24 up up 1500" ], [ "Port Name Status Vlan Duplex Speed Type Flags", "Et1 connected routed full unconf EbraTestPhyPort ", "Et2 connected 1 full unconf EbraTestPhyPort ", "Et3 connected 1 full unconf EbraTestPhyPort ", "Ma1 connected routed a-full a-1G 10/100/1000" ] ]</code> </pre><br>  Aqu√≠, la lista n√∫mero cero es la salida del comando show version, la lista n√∫mero uno es la salida show ip int br, la lista n√∫mero dos es la salida del estado show int.  Es decir, el n√∫mero de lista est√° determinado por el orden en que se ejecutan los comandos. <br><br><table><tbody><tr><td>  <b>Equipos Arista EOS</b> </td><td>  <b>Listas de salida coincidentes</b> </td></tr><tr><td>  mostrar versi√≥n </td><td>  output.stdout_lines [0] </td></tr><tr><td>  show ip int br </td><td>  output.stdout_lines [1] </td></tr><tr><td>  muestra el estado int </td><td>  output.stdout_lines [2] </td></tr></tbody></table><br><h3>  Escala del m√≥dulo de comando: variables de host </h3><br>  ¬øY qu√© sucede si ejecuta el libro de jugadas en varios dispositivos al mismo tiempo? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9g/e0/ap/9ge0apzkt1vioj3gtttw2eivili.png"></div><br><br>  Para ser √∫nico, la variable de salida se almacena como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una variable de host</a> para cada host en el inventario.  Si tenemos tres interruptores y ejecutamos nuestro libro de jugadas sobre ellos, obtendremos la variable de salida para cada host √∫nico.  Supongamos que necesitamos la direcci√≥n IP del comando show ip int br para el puerto Ethernet1 en el switch03.  Dado que show ip int br es el segundo comando que se ejecuta como parte de la tarea, y los datos de Ethernet1 est√°n contenidos en la segunda l√≠nea de su salida, necesitaremos escribir stdout_lines [1] [1].  Para acceder a las variables de un host en particular, utilizamos la palabra clave hostvars y buscamos el host que necesitamos por nombre. <br><br>  Aqu√≠ se explica c√≥mo hacerlo: <br><br><pre> <code class="plaintext hljs"> - name: debug hostvar debug: var: hostvars["switch03"].output.stdout_lines[1][1]</code> </pre><br>  Como resultado, la salida contiene exactamente lo que necesitamos: <br><br><pre> <code class="plaintext hljs">TASK [debug hostvar] *************************************************************** ok: [switch03] =&gt; { "hostvars[\"switch03\"].output.stdout_lines[1][1]": "Ethernet1 172.16.1.3/24 up up 1500" }</code> </pre><br>  Por defecto, la tarea utiliza las variables del host actual, pero hostvars le permite acceder directamente a las variables de otro host. <br><br><h3>  Condiciones en tareas con m√≥dulos de comando: par√°metro wait_for </h3><br>  El par√°metro wait_for le permite implementar una verificaci√≥n de condici√≥n inmediatamente despu√©s de ejecutar el comando.  Por ejemplo, para hacer que la tarea se considere completada con √©xito solo si la salida del comando de verificaci√≥n de estado contiene cierto texto.  De forma predeterminada, el par√°metro wait_for no se usa, por lo que la tarea se ejecuta solo una vez, como en los ejemplos anteriores.  Pero si lo configura expl√≠citamente, la tarea se reiniciar√° hasta que se cumpla la condici√≥n o se exceda el l√≠mite de intentos (hay 10 por defecto).  Si habilita el registro de comandos, puede ver que en el libro de jugadas a continuaci√≥n (que est√° escrito especialmente para que la condici√≥n nunca se cumpla), todo sucede as√≠. <br><br><pre> <code class="plaintext hljs">--- - hosts: eos connection: network_cli tasks: - name: execute Arista eos command eos_command: commands: - show int status wait_for: - result[0] contains DURHAM</code> </pre><br>  Este libro de jugadas ejecutar√° el comando show int status 10 veces, porque su salida nunca contendr√° una l√≠nea DURHAM. <br><br>  Puede verificar esto usando el comando show logging: <br><br><pre> <code class="plaintext hljs">Mar 24 20:33:52 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=17 start_time=1521923632.5 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:33:53 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=18 start_time=1521923633.71 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:33:54 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=19 start_time=1521923634.81 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:33:55 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=20 start_time=1521923635.92 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:33:56 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=21 start_time=1521923636.99 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:33:58 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=22 start_time=1521923638.07 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:33:59 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=23 start_time=1521923639.22 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:34:00 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=24 start_time=1521923640.32 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:34:01 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=25 start_time=1521923641.4 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status Mar 24 20:34:02 eos Aaa: %ACCOUNTING-6-CMD: admin vty6 192.168.2.1 stop task_id=26 start_time=1521923642.47 timezone=UTC service=shell priv-lvl=15 cmd=show interfaces status</code> </pre><br>  Ahora veamos un ejemplo de un libro de jugadas real, en el que todo est√° configurado para establecer una vecindad OSPF (adyacencia) con un dispositivo que no sea el comando ip ospf area.  Usaremos este comando y luego usaremos el par√°metro wait_for para verificar la presencia de la palabra FULL en la salida: si est√° all√≠, entonces el vecindario se ha establecido con √©xito.  Si FULL no aparece en 10 intentos, la tarea fallar√°. <br><br><pre> <code class="plaintext hljs">--- - hosts: eos connection: network_cli tasks: - name: turn on OSPF for interface Ethernet1 eos_config: lines: - ip ospf area 0.0.0.0 parents: interface Ethernet1 - name: execute Arista eos command eos_command: commands: - show ip ospf neigh wait_for: - result[0] contains FULL</code> </pre><br>  Ejecute este libro de jugadas usando el comando ansible-playbook: <br><br><pre> <code class="plaintext hljs">‚ûú ansible-playbook ospf.yml PLAY [eos] ********************************************************************************************* TASK [turn on OSPF for interface Ethernet1] ******************************************************* changed: [eos] TASK [execute Arista eos command] **************************************************************** ok: [eos] PLAY RECAP ****************************************************************************************** eos : ok=2 changed=1 unreachable=0 failed=0</code> </pre><br>  Observamos la l√≠nea de comando y vemos que el libro de jugadas fue exitoso: <br><br><pre> <code class="plaintext hljs">eos#show ip ospf neigh Neighbor ID VRF Pri State Dead Time Address Interface 2.2.2.2 default 1 FULL/DR 00:00:33 172.16.1.2 Ethernet1</code> </pre><br>  Adem√°s de contiene, puede usar los siguientes operadores de comparaci√≥n: <br><br><ul><li>  eq: es igual </li><li>  neq: no es igual </li><li>  gt: - m√°s </li><li>  ge: - mayor o igual que </li><li>  lt: - menos </li><li>  le: - menor o igual que </li></ul><br>  Adem√°s, junto con wait_for, puede usar tres par√°metros adicionales (descritos en detalle en la documentaci√≥n de los m√≥dulos): <br><br><table><tbody><tr><td>  <b>Par√°metro</b> </td><td>  <b>Descripci√≥n</b> </td></tr><tr><td>  intervalo </td><td>  Tiempo entre repeticiones de un equipo. </td></tr><tr><td>  reintentos </td><td>  Max  el n√∫mero de repeticiones antes de que la tarea se complete con un error o se cumpla la condici√≥n. </td></tr><tr><td>  partido </td><td>  La coincidencia de todas las condiciones o al menos una. </td></tr></tbody></table><br>  Consideremos con m√°s detalle el par√°metro de coincidencia: <br><br><pre> <code class="plaintext hljs"> - name: execute Arista eos command eos_command: commands: - show ip ospf neigh match: any wait_for: - result[0] contains FULL - result[0] contains 172.16.1.2</code> </pre><br>  Cuando se especifica match: any, la tarea se considera exitosa si el resultado contiene FULL o 172.16.1.2.  Si se especifica match: all, el resultado debe contener FULL y 172.16.1.2.  De forma predeterminada, se utiliza match: all, porque si prescribe varias condiciones, lo m√°s probable es que desee que se ejecuten todas, y no al menos una. <br><br>  Cuando puede coincidir: ¬øalguno es √∫til?  Suponga que necesita verificar que el centro de datos tenga una conexi√≥n bidireccional a Internet.  Y el centro de datos est√° conectado a cinco proveedores de Internet diferentes, cada uno de los cuales tiene su propia conexi√≥n BGP.  Un libro de jugadas puede verificar todas estas cinco conexiones, y si al menos una de ellas funciona, y no las cinco, informa que todo est√° en orden.  Solo recuerda que cualquiera es un OR l√≥gico, y todo es un AND l√≥gico. <br><br><table><tbody><tr><td>  <b>Par√°metro</b> </td><td>  <b>Descripci√≥n</b> </td></tr><tr><td>  partido: cualquiera </td><td>  "OR" l√≥gico <br>  Se requiere al menos una condici√≥n </td></tr><tr><td>  partido: todos </td><td>  "Y" l√≥gico <br>  Todas las condiciones requeridas </td></tr></tbody></table><br><h3>  Condiciones negativas: construyendo la l√≥gica inversa </h3><br>  A veces es importante no lo que est√° en la conclusi√≥n, sino lo que no est√° all√≠.  Aqu√≠, por supuesto, siempre es tentador usar el operador de comparaci√≥n neq, pero para algunos escenarios con condiciones negativas hay mejores opciones.  Por ejemplo, si necesita invertir la declaraci√≥n contiene (de tipo, "la salida del comando no debe contener tal y tal"), puede usar la palabra clave de registro para guardar la salida y luego procesarla en la siguiente tarea usando la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">expresi√≥n when</a> .  O, por ejemplo, cuando necesite detener el libro de jugadas si no se cumplen las condiciones, simplemente use los m√≥dulos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">fallo</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aserci√≥n</a> para salir espec√≠ficamente con el error.  En cuanto al operador de comparaci√≥n neq, es √∫til solo cuando puede extraer el valor exacto de la salida (por ejemplo, de un par clave-valor o de JSON), y no solo una cadena o una lista de cadenas.  De lo contrario, se realizar√°n comparaciones de cadenas car√°cter por car√°cter. <br><br><h3>  Que sigue </h3><br>  Lea la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> sobre c√≥mo trabajar con la salida de comandos en m√≥dulos de red.  Proporciona ejemplos √∫tiles del uso de ge, le y otras condiciones cuando se trabaja con salida de formato JSON en plataformas de red espec√≠ficas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/438312/">https://habr.com/ru/post/438312/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../438298/index.html">¬øPor qu√© ense√±ar si el desarrollo es m√°s rentable? Conversaci√≥n con GeekBrains</a></li>
<li><a href="../438302/index.html">La incre√≠ble creatividad de la evoluci√≥n digital.</a></li>
<li><a href="../438304/index.html">Subcontrataci√≥n? Genial, golpeas</a></li>
<li><a href="../438306/index.html">Radiaci√≥n: Laboratorio radioqu√≠mico de lunes a viernes.</a></li>
<li><a href="../438310/index.html">Instagram utiliza el aprendizaje autom√°tico para eliminar seguidores falsos</a></li>
<li><a href="../438314/index.html">1. Check Point Maestro Hyperscale Network Security - una nueva plataforma de seguridad escalable</a></li>
<li><a href="../438316/index.html">Conceptos b√°sicos de campo de distancia firmados en 2D</a></li>
<li><a href="../438318/index.html">C√≥mo dominar la sintaxis async / await: un ejemplo real</a></li>
<li><a href="../438320/index.html">Ense√±ar a los ni√±os a programar</a></li>
<li><a href="../438322/index.html">VSaaS 2025: tecnolog√≠a de CCTV del futuro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>