<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÜôÔ∏è üõÄüèø üöÉ Tracking-Fokus f√ºr SLR. Himbeer Pi + HC-SR04 + SG90 Servo üí≤ üíã üéç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Beitrag beschreibt, wie an einem Abend ein Tracking-Fokus f√ºr einen Spiegel aus Schei√üe und St√∂cken hergestellt wurde. Video von dem, was passi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tracking-Fokus f√ºr SLR. Himbeer Pi + HC-SR04 + SG90 Servo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/410917/">  Dieser Beitrag beschreibt, wie an einem Abend ein Tracking-Fokus f√ºr einen Spiegel aus Schei√üe und St√∂cken hergestellt wurde.  Video von dem, was passiert ist: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zsAiAQ65iUM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><h3>  Vorwort </h3><br>  Himbeeren sind hier zweifellos √ºberfl√ºssig.  Wenn es sich jedoch um ein komplexeres Ger√§t handelt, bei dem der Tracking-Fokus nur eine der Funktionen ist, warum dann nicht? <br><br>  Ich habe mir nichts Neues ausgedacht, ich habe es einfach genommen und an einem Abend gemacht.  Das Ergebnis hat mir gefallen, deshalb m√∂chte ich es mit der Community teilen. <br><br><h3>  Mechanik, montieren </h3><br>  Mechanik ist f√ºr mich immer ein Stolperstein.  Es kann schwierig sein, Schei√üe und St√∂cke unter Ihren Armen zu finden, die miteinander kompatibel sind und Ihnen dennoch erm√∂glichen, Ihr Ziel zu erreichen.  Aber diesmal hatte ich Gl√ºck. <br><br>  Der Prototyp sieht ungef√§hr so ‚Äã‚Äãaus: <br><br><img src="https://habrastorage.org/webt/qf/a5/jl/qfa5jlzgtoepwasgyeb1i7he2mo.jpeg"><br><br>  Als Zahnrad auf der Achse des Servers habe ich den Deckel aus der Milchbox verwendet, auf den ich den Rest des Zahnkragens f√ºr das SLR-Objektiv geklebt habe.  Die Milchkappe in meinem Fall erwies sich als der optimale Durchmesser f√ºr die Einstellung auf einem 50-mm-Objektiv.  Ich klebte das ‚ÄûZahnrad‚Äú mit Hilfe von Cyanacrylat mit Soda auf einen der mit dem Servo gelieferten Kipphebel und schraubte es fest.  Um die Struktur an der DSLR zu befestigen, ben√∂tigen Sie eine Schraube mit einem Zollgewinde, die ich von einem Oktopus-Stativ gefunden habe. <br><br>  Im Allgemeinen verk√∂rperte sich das Design irgendwie in der Realit√§t: <br><br><img src="https://habrastorage.org/webt/k7/b7/c9/k7b7c9tdszfptotbgn6y0uo6dzc.jpeg"><br><br>  Ohne Estriche ist es heute schwierig.  Das blaue Band endete und ich musste den Sensor auf Papierband montieren. <br><br><h3>  Elektronik </h3><br>  Ich verwende Raspberry Pi 3 als mein Gehirn. Ich versorge das Servo mit einem separaten 24-VDC-Netzteil mit einem DC-DC-Abw√§rtswandler an einem LM2596-Mikrokreis mit 7,2-V-Ausgang. <br>  Der Algorithmus der Arbeit ist einfach zu blamieren.  Es gibt eine R√ºckmeldung √ºber die Entfernung zum Objekt vom Ultraschall-Entfernungsmesser HC-SR04, der in einen Drehwinkel des Servos SG-90 umgewandelt wird.  Auf der Achse der Servos ist ein ‚ÄûZahnrad‚Äú befestigt, das die Linse durch das Ritzel dreht und die Brennweite einstellt. <br><br><h3>  Code </h3><br>  Der Anschluss eines Ultraschallsensors wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> beschrieben.  Die Servosteuerung erfolgt √ºber Hardware-PWM. Die Einstellungen habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier vorgenommen</a> . <br><br>  Der Code erwies sich als sehr bescheiden, aber dies ist nur der Anfang und der Perfektion sind keine Grenzen gesetzt. <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#Libraries import RPi.GPIO as GPIO import time from subprocess import call from RPIO import PWM servo = PWM.Servo() #GPIO Mode (BOARD / BCM) GPIO.setmode(GPIO.BCM) #set GPIO Pins GPIO_TRIGGER = 18 GPIO_ECHO = 24 #set GPIO direction (IN / OUT) GPIO.setup(GPIO_TRIGGER, GPIO.OUT) GPIO.setup(GPIO_ECHO, GPIO.IN) def distance(): # set Trigger to HIGH GPIO.output(GPIO_TRIGGER, True) # set Trigger after 0.01ms to LOW time.sleep(0.00001) GPIO.output(GPIO_TRIGGER, False) StartTime = time.time() StopTime = time.time() # save StartTime while GPIO.input(GPIO_ECHO) == 0: StartTime = time.time() # save time of arrival while GPIO.input(GPIO_ECHO) == 1: StopTime = time.time() # time difference between start and arrival TimeElapsed = StopTime - StartTime # multiply with the sonic speed (34300 cm/s) # and divide by 2, because there and back distance = (TimeElapsed * 34300) / 2 return distance if __name__ == '__main__': try: while True: dist = distance() if dist &lt;=40: focus = 900 elif dist &lt;= 70: focus = 900+int(dist-40)*20 else: focus = 2000 servo.set_servo(23, focus) print ("Measured Distance = %.1f cm, focus = %3i" % (dist, focus)) time.sleep(0.1) # Reset by pressing CTRL + C except KeyboardInterrupt: print("Measurement stopped by User") servo.stop_servo(23) GPIO.cleanup()</span></span></code> </pre> <br>  Um die Entsprechung des Drehwinkels des Servos zur Brennweite zu bestimmen, f√ºhrte ich mehrere Kalibrierungsmessungen durch. Als Ergebnis erhielt ich eine lineare Abh√§ngigkeit vom interessierenden Bereich (40-70 cm), der Rest wurde als Fokus auf unendlich genommen. <br><br><h3>  Fazit </h3><br>  Meiner Meinung nach k√∂nnen selbst die billigsten SG-90-Server viel, eine 1,2 kg / cm-Rute f√ºr ein solches Baby, und selbst bei einer solchen Geschwindigkeit - das ist cool, besonders f√ºr einen Preis von 1,5 Dollar.  Gleiches gilt f√ºr den Ultraschall-Entfernungsmesser. <br><br>  P.S.  Der Server kann separat vom Sensor gesteuert werden, z. B. schnelle √úberg√§nge von einem Objekt zum anderen mit unterschiedlichen Brennweiten.  Um das System zu verbessern, k√∂nnen Sie auch einen Filter hinzuf√ºgen, der die M√§ngel bei der Messung des Ultraschallsensors ausgleicht. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de410917/">https://habr.com/ru/post/de410917/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de410907/index.html">Biohacker mit implantiertem Reiseticket f√ºr blinde Passagiere bestraft</a></li>
<li><a href="../de410909/index.html">Google hat einen neuen Quantenprozessor eingef√ºhrt</a></li>
<li><a href="../de410911/index.html">Was sind die wichtigen und ikonischen Szenen aus Musicals unter Beteiligung von Frauen: Hintergrund</a></li>
<li><a href="../de410913/index.html">FAQ: Die Bedeutung der Kombination von Gravitations- und elektromagnetischen Wellen</a></li>
<li><a href="../de410915/index.html">"Dies ist ein Hit": Geschichte und Aufzeichnungen von Musik-Charts</a></li>
<li><a href="../de410919/index.html">Wie zwei Fotografen versehentlich dieselbe Millisekunde aufgenommen haben</a></li>
<li><a href="../de410921/index.html">Megafon zahlt keine Dividenden, da die Bestimmungen des "Fr√ºhlingsgesetzes" eingehalten werden m√ºssen.</a></li>
<li><a href="../de410923/index.html">PocketBook 740: Leistungstest des ersten Dual-Core-Taschenbuchs</a></li>
<li><a href="../de410925/index.html">F√ºnf Entdeckungen der Grundlagenphysik, die sich als v√∂llige √úberraschung herausstellten</a></li>
<li><a href="../de410927/index.html">Intel Skalierbare Vergleichstabelle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>