<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✋🏽 🚄 💃🏾 Ausführen mehrerer Pipelines mit GitLab CI / CD 🧔🏾 🆑 👨🏼‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starten und Visualisieren von Pipelines bei der Konfiguration von GitLab CI / CD für mehrere Projekte. 


 Continuous Integration (CI) ist die Praxis ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ausführen mehrerer Pipelines mit GitLab CI / CD</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nixys/blog/467107/"><p><img src="https://habrastorage.org/webt/wb/uv/fo/wbuvfozqy40f0tztnqedpji24yw.png"></p><br><p>  Starten und Visualisieren von Pipelines bei der Konfiguration von GitLab CI / CD für mehrere Projekte. </p><br><p>  Continuous Integration (CI) ist die Praxis der Automatisierung des Zusammenstellens und Testens von Code, bevor dieser mit dem Hauptzweig zusammengeführt wird.  Entwickler können Code häufig und frühzeitig einfügen und gleichzeitig das Risiko verringern, dass neue Fehler in das Haupt-Quellcode-Repository eingefügt werden. </p><a name="habracut"></a><br><p>  Obwohl CI prüft, ob der neue Code nicht beschädigt wird, wenn er in anderen Code im selben Repo integriert wird, ist das Bestehen aller Tests für dieses Repo nur der erste Schritt.  Nach dem Ausführen von CI in Code ist es wichtig, Tests in einer realen Umgebung bereitzustellen und auszuführen.  Der Übergang von CI zu Continuous Delivery and Deployment (CD) ist der nächste Schritt zu den "erwachsenen" DevOps.  Durch die Bereitstellung und anschließende erneute Prüfung können Sie den Code eines Projekts zusammen mit anderen Komponenten und Diensten testen, die möglicherweise von anderen Projekten verwaltet werden. </p><br><h2 id="zachem-mne-nuzhno-ubeditsya-chto-moy-kod-rabotaet-s-drugimi-komponentami">  Warum muss ich sicherstellen, dass mein Code mit anderen Komponenten funktioniert? </h2><br><p>  Ein gutes Beispiel ist die Architektur von Microservices.  In der Regel werden Microservices in verschiedenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Projekten verwaltet</a> , wobei jeder Microservice über ein eigenes Repository mit einer Pipeline verfügt.  Darüber hinaus ist sehr oft jedes Entwicklungsteam für individuelle Microservices und Pipeline-Konfigurationen verantwortlich.  Als Programmierer möchten Sie möglicherweise sicherstellen, dass Änderungen an Ihrem Code nicht die Funktionalität seiner Microservices verletzen.  Daher können Sie zusätzlich zu den Tests für Ihr Projekt auch Tests für sie ausführen. </p><br><h2 id="payplayn-kross-proekta">  Pipeline Cross Projekt </h2><br><p>  Wenn Sie eine Projektpipeline starten, müssen Sie auch eine projektübergreifende Pipeline ausführen, die schließlich die neueste Version aller abhängigen Microservices bereitstellt und testet.  Um dies zu erreichen, benötigen Sie eine einfache, flexible und bequeme Möglichkeit, andere Pipelines im Rahmen des CI Ihres Projekts zu starten.  GitLab CI / CD bietet eine einfache Möglichkeit, eine projektübergreifende Pipeline zu starten, indem der CI-Konfigurationsdatei eine spezielle Aufgabe hinzugefügt wird. </p><br><h2 id="gitlab-cicd-konfiguracionnyy-fayl">  GitLab CI / CD-Konfigurationsdatei </h2><br><p> In GitLab CI / CD werden Pipelines sowie Jobs und die Schritte ihrer Komponenten in der <code>.gitlab-ci.yml</code> für jedes Projekt definiert.  Die Datei ist Teil des Projekt-Repositorys.  Es ist vollständig versioniert und kann von Entwicklern mit einer beliebigen IDE ihrer Wahl bearbeitet werden.  Sie müssen weder den Systemadministrator noch den DevOps-Befehl auffordern, Änderungen an der Pipeline-Konfiguration vorzunehmen, da sie dies selbst tun können.  Die <code>.gitlab-ci.yml</code> bestimmt die Struktur und Reihenfolge der Pipelines und entscheidet, was mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitLab Runner</a> (dem Agenten, der die Aufgaben <code>.gitlab-ci.yml</code> ) ausgeführt werden muss und welche Entscheidungen getroffen werden sollten, wenn bestimmte Bedingungen auftreten, z. B. wenn der Prozess erfolgreich abgeschlossen oder beendet wird System. </p><br><h2 id="dobavlenie-job-dlya-zapuska-kross-proektnogo-payplayna">  Hinzufügen eines Jobs zum Ausführen einer projektübergreifenden Pipeline </h2><br><p>  Ab GitLab 11.8 bietet GitLab eine neue CI / CD-Konfigurationssyntax zum Ausführen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">projektübergreifender</a> Pipelines, die in den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pipline-Konfigurationsregeln enthalten ist</a> .  Der folgende Code veranschaulicht das Konfigurieren eines Bridge-Jobs zum Ausführen einer Downlink-Pipeline: </p><br><pre> <code class="plaintext hljs">// job1  job    deploy: stage: Deploy script: this is my script // job2  bridge job   ,   -  Android: stage: Trigger-cross-projects trigger: mobile/android</code> </pre> <br><p>  Im obigen Beispiel wird die Aufgabe für Android Bridge gestartet, sobald der Bereitstellungsjob in der Bereitstellungsphase erfolgreich ist.  Der ursprüngliche Status steht noch aus.  GitLab erstellt eine Downstream-Pipeline im Mobile / Android-Projekt. Sobald diese erstellt wurde, ist der Android-Job erfolgreich.  In diesem Fall ist Mobile / Android der vollständige Pfad zu diesem Projekt. </p><br><p>  Der Benutzer, der die Upstream-Pipeline erstellt hat, muss über Zugriffsrechte für das Downstream-Projekt verfügen (in diesem Fall für Mobile / Android).  Wenn das nachgelagerte Projekt nicht gefunden werden kann oder der Benutzer keine Zugriffsrechte zum Erstellen einer Pipeline hat, erhält der Android-Job den Status "Fehlgeschlagen". </p><br><h2 id="obzor-grafikov-ot-voshodyaschego-do-nizhestoyaschego-payplayna">  Übersicht der Diagramme von der Upstream- zur Downstream-Pipeline </h2><br><p>  Mit GitLab CI / CD können Sie die Pipeline-Konfiguration visualisieren.  In der folgenden Abbildung sind die Schritte zum Zusammenbau, Testen und Bereitstellen Teil eines vorgelagerten Projekts.  Sobald der Bereitstellungsjob erfolgreich abgeschlossen wurde, werden vier projektübergreifende Projekte parallel gestartet, und Sie können mit ihnen fortfahren, indem Sie auf einen der nachgelagerten Jobs klicken. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f17/7b8/d36/f177b8d36435b19c17990b0f2a213d50.png" alt="Bild"></p><br><p>  In der Abbildung unten sehen Sie die absteigende Gewinnlinie „Service - Finanzen“.  Jetzt können Sie nach links zur aufsteigenden Pipeline scrollen, nach rechts zurück zur absteigenden Pipeline scrollen oder eine andere absteigende Pipeline auswählen. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/608/51e/77a/60851e77aaed70fe3925376d95864f05.png" alt="Bild"></p><br><h2 id="opredelenie-vetki-nizhestoyaschego-payplayna">  Definieren eines untergeordneten Pipeline-Zweigs </h2><br><p>  Sie können den Namen des Zweigs angeben, den die absteigende Pipeline verwenden soll: </p><br><pre> <code class="plaintext hljs">trigger: project: mobile/android branch: stable-11-2</code> </pre> <br><p>  Verwenden Sie das Schlüsselwort project, um den vollständigen Pfad zum nachgelagerten Projekt anzugeben.  Verwenden Sie das Schlüsselwort branch, um den Namen des Zweigs zu bestimmen.  GitLab verwendet beim Erstellen der Downlink-Pipeline das Commit, das sich derzeit im HEAD-Zweig befindet. </p><br><h2 id="peredacha-peremennyh-v-nishodyaschiy-payplayn">  Übergeben von Variablen an eine absteigende Pipeline </h2><br><p>  Eines Tages möchten Sie möglicherweise Variablen an eine absteigende Pipeline übergeben.  Sie können dies mit Schlüsselwörtern für Variablen tun, wie Sie es bei einer regulären Jobdefinition tun würden. </p><br><pre> <code class="plaintext hljs">Android: variable: ENVIRONMENT: 'This is the variable value for the downstream pipeline' stage: Trigger-cross-projects trigger: mobile/android</code> </pre> <br><p>  Die Variable ENVIRONMENT wird an jeden in der absteigenden Pipeline definierten Job übergeben.  Es ist jedes Mal als Umgebungsvariable verfügbar, wenn GitLab Runner einen Job auswählt. </p><br><h2 id="itogo-o-kross-proektnom-payplayne">  Projektübergreifende Gesamtpipeline </h2><br><p>  Die <code>.gitlab-ci.yml</code> bestimmt die Reihenfolge der CI / CD-Stufen, welche Aufgaben ausgeführt werden sollen und unter welchen Bedingungen die Aufgabe gestartet oder übersprungen werden soll.  Durch Hinzufügen eines 'Bridge-Jobs' mit dem Schlüsselwort <code>trigger</code> zu dieser Datei können projektübergreifende Pipelines ausgeführt werden.  Wir können Parameter an Jobs in absteigenden Pipelines übergeben und sogar den Zweig definieren, den die absteigende Pipeline verwenden wird. </p><br><p>  Pipelines können komplexe Strukturen mit vielen sequentiellen und parallelen Aufgaben sein, und wie wir gerade erfahren haben, können sie manchmal nachgeschaltete Pipelines ausführen.  Um das Verständnis des Pipeline-Flusses einschließlich der nachgeschalteten Pipelines zu vereinfachen, verfügt GitLab über Pipline-Grafiken zum Anzeigen von Pipelines und deren Status. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/31f/d17/25b/31fd1725b16dc358498f8afc59f84498.png" alt="Bild"></p><br><h3 id="takzhe-chitayte-drugie-stati-v-nashem-bloge">  Lesen Sie auch andere Artikel in unserem Blog: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">/etc/resolv.conf für Kubernetes-Pods, Option ndots: 5, da dies die Anwendungsleistung beeinträchtigen kann</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grundlegendes zum Kontextpaket in Golang</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drei einfache Tricks zum Reduzieren von Docker-Bildern</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stateful Backups in Kubernetes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sichern einer großen Anzahl heterogener Webprojekte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Telegrammbot für Redmine.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie Sie das Leben für sich und die Menschen vereinfachen können</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467107/">https://habr.com/ru/post/de467107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467095/index.html">Einfacher als es klingt. 20</a></li>
<li><a href="../de467097/index.html">Verwenden der Paging-Bibliothek mit Realm</a></li>
<li><a href="../de467099/index.html">Hapi für die Kleinen</a></li>
<li><a href="../de467101/index.html">Das Epos, einen Roboter mit dem Duft eines Hundes zu erschaffen</a></li>
<li><a href="../de467105/index.html">Podman und Buildah für Docker-Benutzer</a></li>
<li><a href="../de467109/index.html">Wie die Qualitätssicherung die Testautomatisierung für ein Projekt organisiert. Ein praktischer Weg</a></li>
<li><a href="../de467111/index.html">Radikale Tipps, wie Sie weniger an Ihrem Telefon hängen können</a></li>
<li><a href="../de467113/index.html">Wie halte ich den Benutzer auf der Website? Usability-Geheimnisse</a></li>
<li><a href="../de467115/index.html">Atypisches "ls" - Habr Edition</a></li>
<li><a href="../de467117/index.html">Manuskripte brennen nicht: Das Geheimnis der Langlebigkeit der Schriftrollen vom Toten Meer aus dem Jahr 250 v</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>