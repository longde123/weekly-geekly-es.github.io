<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úãüèΩ üöÑ üíÉüèæ Ausf√ºhren mehrerer Pipelines mit GitLab CI / CD üßîüèæ üÜë üë®üèº‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starten und Visualisieren von Pipelines bei der Konfiguration von GitLab CI / CD f√ºr mehrere Projekte. 


 Continuous Integration (CI) ist die Praxis ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ausf√ºhren mehrerer Pipelines mit GitLab CI / CD</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nixys/blog/467107/"><p><img src="https://habrastorage.org/webt/wb/uv/fo/wbuvfozqy40f0tztnqedpji24yw.png"></p><br><p>  Starten und Visualisieren von Pipelines bei der Konfiguration von GitLab CI / CD f√ºr mehrere Projekte. </p><br><p>  Continuous Integration (CI) ist die Praxis der Automatisierung des Zusammenstellens und Testens von Code, bevor dieser mit dem Hauptzweig zusammengef√ºhrt wird.  Entwickler k√∂nnen Code h√§ufig und fr√ºhzeitig einf√ºgen und gleichzeitig das Risiko verringern, dass neue Fehler in das Haupt-Quellcode-Repository eingef√ºgt werden. </p><a name="habracut"></a><br><p>  Obwohl CI pr√ºft, ob der neue Code nicht besch√§digt wird, wenn er in anderen Code im selben Repo integriert wird, ist das Bestehen aller Tests f√ºr dieses Repo nur der erste Schritt.  Nach dem Ausf√ºhren von CI in Code ist es wichtig, Tests in einer realen Umgebung bereitzustellen und auszuf√ºhren.  Der √úbergang von CI zu Continuous Delivery and Deployment (CD) ist der n√§chste Schritt zu den "erwachsenen" DevOps.  Durch die Bereitstellung und anschlie√üende erneute Pr√ºfung k√∂nnen Sie den Code eines Projekts zusammen mit anderen Komponenten und Diensten testen, die m√∂glicherweise von anderen Projekten verwaltet werden. </p><br><h2 id="zachem-mne-nuzhno-ubeditsya-chto-moy-kod-rabotaet-s-drugimi-komponentami">  Warum muss ich sicherstellen, dass mein Code mit anderen Komponenten funktioniert? </h2><br><p>  Ein gutes Beispiel ist die Architektur von Microservices.  In der Regel werden Microservices in verschiedenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Projekten verwaltet</a> , wobei jeder Microservice √ºber ein eigenes Repository mit einer Pipeline verf√ºgt.  Dar√ºber hinaus ist sehr oft jedes Entwicklungsteam f√ºr individuelle Microservices und Pipeline-Konfigurationen verantwortlich.  Als Programmierer m√∂chten Sie m√∂glicherweise sicherstellen, dass √Ñnderungen an Ihrem Code nicht die Funktionalit√§t seiner Microservices verletzen.  Daher k√∂nnen Sie zus√§tzlich zu den Tests f√ºr Ihr Projekt auch Tests f√ºr sie ausf√ºhren. </p><br><h2 id="payplayn-kross-proekta">  Pipeline Cross Projekt </h2><br><p>  Wenn Sie eine Projektpipeline starten, m√ºssen Sie auch eine projekt√ºbergreifende Pipeline ausf√ºhren, die schlie√ülich die neueste Version aller abh√§ngigen Microservices bereitstellt und testet.  Um dies zu erreichen, ben√∂tigen Sie eine einfache, flexible und bequeme M√∂glichkeit, andere Pipelines im Rahmen des CI Ihres Projekts zu starten.  GitLab CI / CD bietet eine einfache M√∂glichkeit, eine projekt√ºbergreifende Pipeline zu starten, indem der CI-Konfigurationsdatei eine spezielle Aufgabe hinzugef√ºgt wird. </p><br><h2 id="gitlab-cicd-konfiguracionnyy-fayl">  GitLab CI / CD-Konfigurationsdatei </h2><br><p> In GitLab CI / CD werden Pipelines sowie Jobs und die Schritte ihrer Komponenten in der <code>.gitlab-ci.yml</code> f√ºr jedes Projekt definiert.  Die Datei ist Teil des Projekt-Repositorys.  Es ist vollst√§ndig versioniert und kann von Entwicklern mit einer beliebigen IDE ihrer Wahl bearbeitet werden.  Sie m√ºssen weder den Systemadministrator noch den DevOps-Befehl auffordern, √Ñnderungen an der Pipeline-Konfiguration vorzunehmen, da sie dies selbst tun k√∂nnen.  Die <code>.gitlab-ci.yml</code> bestimmt die Struktur und Reihenfolge der Pipelines und entscheidet, was mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitLab Runner</a> (dem Agenten, der die Aufgaben <code>.gitlab-ci.yml</code> ) ausgef√ºhrt werden muss und welche Entscheidungen getroffen werden sollten, wenn bestimmte Bedingungen auftreten, z. B. wenn der Prozess erfolgreich abgeschlossen oder beendet wird System. </p><br><h2 id="dobavlenie-job-dlya-zapuska-kross-proektnogo-payplayna">  Hinzuf√ºgen eines Jobs zum Ausf√ºhren einer projekt√ºbergreifenden Pipeline </h2><br><p>  Ab GitLab 11.8 bietet GitLab eine neue CI / CD-Konfigurationssyntax zum Ausf√ºhren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">projekt√ºbergreifender</a> Pipelines, die in den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pipline-Konfigurationsregeln enthalten ist</a> .  Der folgende Code veranschaulicht das Konfigurieren eines Bridge-Jobs zum Ausf√ºhren einer Downlink-Pipeline: </p><br><pre> <code class="plaintext hljs">// job1  job    deploy: stage: Deploy script: this is my script // job2  bridge job   ,   -  Android: stage: Trigger-cross-projects trigger: mobile/android</code> </pre> <br><p>  Im obigen Beispiel wird die Aufgabe f√ºr Android Bridge gestartet, sobald der Bereitstellungsjob in der Bereitstellungsphase erfolgreich ist.  Der urspr√ºngliche Status steht noch aus.  GitLab erstellt eine Downstream-Pipeline im Mobile / Android-Projekt. Sobald diese erstellt wurde, ist der Android-Job erfolgreich.  In diesem Fall ist Mobile / Android der vollst√§ndige Pfad zu diesem Projekt. </p><br><p>  Der Benutzer, der die Upstream-Pipeline erstellt hat, muss √ºber Zugriffsrechte f√ºr das Downstream-Projekt verf√ºgen (in diesem Fall f√ºr Mobile / Android).  Wenn das nachgelagerte Projekt nicht gefunden werden kann oder der Benutzer keine Zugriffsrechte zum Erstellen einer Pipeline hat, erh√§lt der Android-Job den Status "Fehlgeschlagen". </p><br><h2 id="obzor-grafikov-ot-voshodyaschego-do-nizhestoyaschego-payplayna">  √úbersicht der Diagramme von der Upstream- zur Downstream-Pipeline </h2><br><p>  Mit GitLab CI / CD k√∂nnen Sie die Pipeline-Konfiguration visualisieren.  In der folgenden Abbildung sind die Schritte zum Zusammenbau, Testen und Bereitstellen Teil eines vorgelagerten Projekts.  Sobald der Bereitstellungsjob erfolgreich abgeschlossen wurde, werden vier projekt√ºbergreifende Projekte parallel gestartet, und Sie k√∂nnen mit ihnen fortfahren, indem Sie auf einen der nachgelagerten Jobs klicken. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f17/7b8/d36/f177b8d36435b19c17990b0f2a213d50.png" alt="Bild"></p><br><p>  In der Abbildung unten sehen Sie die absteigende Gewinnlinie ‚ÄûService - Finanzen‚Äú.  Jetzt k√∂nnen Sie nach links zur aufsteigenden Pipeline scrollen, nach rechts zur√ºck zur absteigenden Pipeline scrollen oder eine andere absteigende Pipeline ausw√§hlen. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/608/51e/77a/60851e77aaed70fe3925376d95864f05.png" alt="Bild"></p><br><h2 id="opredelenie-vetki-nizhestoyaschego-payplayna">  Definieren eines untergeordneten Pipeline-Zweigs </h2><br><p>  Sie k√∂nnen den Namen des Zweigs angeben, den die absteigende Pipeline verwenden soll: </p><br><pre> <code class="plaintext hljs">trigger: project: mobile/android branch: stable-11-2</code> </pre> <br><p>  Verwenden Sie das Schl√ºsselwort project, um den vollst√§ndigen Pfad zum nachgelagerten Projekt anzugeben.  Verwenden Sie das Schl√ºsselwort branch, um den Namen des Zweigs zu bestimmen.  GitLab verwendet beim Erstellen der Downlink-Pipeline das Commit, das sich derzeit im HEAD-Zweig befindet. </p><br><h2 id="peredacha-peremennyh-v-nishodyaschiy-payplayn">  √úbergeben von Variablen an eine absteigende Pipeline </h2><br><p>  Eines Tages m√∂chten Sie m√∂glicherweise Variablen an eine absteigende Pipeline √ºbergeben.  Sie k√∂nnen dies mit Schl√ºsselw√∂rtern f√ºr Variablen tun, wie Sie es bei einer regul√§ren Jobdefinition tun w√ºrden. </p><br><pre> <code class="plaintext hljs">Android: variable: ENVIRONMENT: 'This is the variable value for the downstream pipeline' stage: Trigger-cross-projects trigger: mobile/android</code> </pre> <br><p>  Die Variable ENVIRONMENT wird an jeden in der absteigenden Pipeline definierten Job √ºbergeben.  Es ist jedes Mal als Umgebungsvariable verf√ºgbar, wenn GitLab Runner einen Job ausw√§hlt. </p><br><h2 id="itogo-o-kross-proektnom-payplayne">  Projekt√ºbergreifende Gesamtpipeline </h2><br><p>  Die <code>.gitlab-ci.yml</code> bestimmt die Reihenfolge der CI / CD-Stufen, welche Aufgaben ausgef√ºhrt werden sollen und unter welchen Bedingungen die Aufgabe gestartet oder √ºbersprungen werden soll.  Durch Hinzuf√ºgen eines 'Bridge-Jobs' mit dem Schl√ºsselwort <code>trigger</code> zu dieser Datei k√∂nnen projekt√ºbergreifende Pipelines ausgef√ºhrt werden.  Wir k√∂nnen Parameter an Jobs in absteigenden Pipelines √ºbergeben und sogar den Zweig definieren, den die absteigende Pipeline verwenden wird. </p><br><p>  Pipelines k√∂nnen komplexe Strukturen mit vielen sequentiellen und parallelen Aufgaben sein, und wie wir gerade erfahren haben, k√∂nnen sie manchmal nachgeschaltete Pipelines ausf√ºhren.  Um das Verst√§ndnis des Pipeline-Flusses einschlie√ülich der nachgeschalteten Pipelines zu vereinfachen, verf√ºgt GitLab √ºber Pipline-Grafiken zum Anzeigen von Pipelines und deren Status. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/31f/d17/25b/31fd1725b16dc358498f8afc59f84498.png" alt="Bild"></p><br><h3 id="takzhe-chitayte-drugie-stati-v-nashem-bloge">  Lesen Sie auch andere Artikel in unserem Blog: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">/etc/resolv.conf f√ºr Kubernetes-Pods, Option ndots: 5, da dies die Anwendungsleistung beeintr√§chtigen kann</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grundlegendes zum Kontextpaket in Golang</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drei einfache Tricks zum Reduzieren von Docker-Bildern</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stateful Backups in Kubernetes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sichern einer gro√üen Anzahl heterogener Webprojekte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Telegrammbot f√ºr Redmine.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie Sie das Leben f√ºr sich und die Menschen vereinfachen k√∂nnen</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467107/">https://habr.com/ru/post/de467107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467095/index.html">Einfacher als es klingt. 20</a></li>
<li><a href="../de467097/index.html">Verwenden der Paging-Bibliothek mit Realm</a></li>
<li><a href="../de467099/index.html">Hapi f√ºr die Kleinen</a></li>
<li><a href="../de467101/index.html">Das Epos, einen Roboter mit dem Duft eines Hundes zu erschaffen</a></li>
<li><a href="../de467105/index.html">Podman und Buildah f√ºr Docker-Benutzer</a></li>
<li><a href="../de467109/index.html">Wie die Qualit√§tssicherung die Testautomatisierung f√ºr ein Projekt organisiert. Ein praktischer Weg</a></li>
<li><a href="../de467111/index.html">Radikale Tipps, wie Sie weniger an Ihrem Telefon h√§ngen k√∂nnen</a></li>
<li><a href="../de467113/index.html">Wie halte ich den Benutzer auf der Website? Usability-Geheimnisse</a></li>
<li><a href="../de467115/index.html">Atypisches "ls" - Habr Edition</a></li>
<li><a href="../de467117/index.html">Manuskripte brennen nicht: Das Geheimnis der Langlebigkeit der Schriftrollen vom Toten Meer aus dem Jahr 250 v</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>