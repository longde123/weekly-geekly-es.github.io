<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüç≥ üë®üèø‚Äçüéì üéä Transmisi√≥n de video a trav√©s de un navegador con latencia ultra baja (¬°y WebRTC!) üß• üöó ü§Ω</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mientras los primeros adoptantes prueban nuestras nuevas videoconferencias (¬°hasta 100 personas!) En sus proyectos, seguimos hablando de cosas interes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transmisi√≥n de video a trav√©s de un navegador con latencia ultra baja (¬°y WebRTC!)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/421121/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/oa/hu/kv/oahukvx05phesrj7ttv_qg9o3pq.gif"></div><br>  Mientras los primeros adoptantes prueban nuestras nuevas videoconferencias (¬°hasta 100 personas!) En sus proyectos, seguimos hablando de cosas interesantes del mundo de la transmisi√≥n de voz y video con un navegador.  Tambi√©n hablaremos de videoconferencia, pero m√°s tarde, cuando se acumule una masa cr√≠tica de usuarios y se recopilen estad√≠sticas interesantes.  Y ahora he traducido y adaptado para nosotros la historia del Dr.  Alex sobre el lugar de los diferentes protocolos al transmitir video con baja latencia.  La historia es esencialmente una respuesta a otro art√≠culo, y el autor, junto con la historia, se√±ala los errores e inexactitudes que cometieron sus colegas en el taller. <br><a name="habracut"></a><br><h2>  Datos de red: alarma por separado, video por separado </h2><br>  En los sistemas modernos, si ve video en un navegador, entonces la transmisi√≥n de video y la alarma probablemente ser√°n procesadas por diferentes servidores.  Si todo est√° claro con el video, entonces el "servidor de alarma" proporciona dos cosas: "descubrimiento" y "apret√≥n de manos".  El primero, "descubrimiento", es la elecci√≥n del m√©todo de transferencia de datos: direcciones IP, un servidor intermedio (si es necesario).  ‚ÄúApret√≥n de manos‚Äù: sobre la negociaci√≥n entre los participantes en la transmisi√≥n de video y sonido: c√≥decs, resoluci√≥n, velocidad de cuadros, calidad.  Curiosamente, en Flash antiguo, la se√±alizaci√≥n y la transmisi√≥n de medios no estaban separadas como en VoxIP o WebRTC y se proporcionaban mediante un protocolo: RTMP. <br><br><h2>  La diferencia entre el protocolo de se√±alizaci√≥n y el transporte de se√±alizaci√≥n. </h2><br>  El protocolo de se√±alizaci√≥n define el idioma con el que el navegador y otros participantes en la transmisi√≥n de video acordar√°n el descubrimiento y el apret√≥n de manos.  Puede ser SIP para descubrimiento en VoIP o WebRTC, y es con oferta / respuesta para apret√≥n de manos.  Hace mucho tiempo, Flash usaba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RTMP / AMF</a> .  Y si lo desea, para WebRTC, puede usar no SIP, sino JSEP inusual. <br><br>  El protocolo de transporte de se√±alizaci√≥n desde la misma pila, pero inferior: as√≠ es como se transmitir√°n f√≠sicamente los paquetes del protocolo de se√±alizaci√≥n.  Tradicionalmente, para Flash + SIP, se usaba TCP o UDP, pero ahora en el paquete WebRTC + SIP, se encuentran cada vez m√°s WebSockets.  El protocolo de transporte WebSockets ocupa el nicho TCP en los navegadores donde no se pueden usar sockets TCP y UDP "puros". <br><br>  Una pila de se√±alizaci√≥n completa ahora se describe popularmente con frases como "SIP en la parte superior de los sockets web", "JSEP en la parte superior de los sockets web", obsoleto "SIP en la parte superior de TCP / UDP" o la antigua "parte de RTMP". <br><br><h2>  Anglicismo del programador: c√≥dec de medios </h2><br>  La mayor√≠a de los protocolos de transmisi√≥n de video est√°n vinculados a uno o m√°s c√≥decs.  El video recibido de la c√°mara se procesa cuadro por cuadro.  Y los problemas de red, como el ancho de banda reducido, la p√©rdida de paquetes o el retraso entre ellos, se resuelven mediante la configuraci√≥n del c√≥dec para cada trama.  Para conocer los problemas de la red a tiempo, utilizamos mecanismos de protocolo de transporte (RTP / RTCP) y mecanismos de estimaci√≥n de ancho de banda (REMB, Transport-CC, TIMBR).  Uno de los problemas fundamentales con el video Flash fue que RTMP tampoco pod√≠a hacerlo, por lo que el video simplemente dej√≥ de reproducirse cuando el ancho de banda del canal se redujo. <br><br><h2>  Otro anglicismo: protocolo de transmisi√≥n de medios </h2><br>  Determina c√≥mo dividir la transmisi√≥n de video en peque√±os paquetes que se env√≠an a trav√©s de la red mediante el protocolo de transporte.  Por lo general, el protocolo de transmisi√≥n a√∫n proporciona mecanismos para tratar problemas de red: p√©rdida de paquetes y retraso.  Jitter buffer, retransmisi√≥n (RTC), redundancia (RED) y correcci√≥n de errores de reenv√≠o (FEC). <br><br><h2>  Protocolo de transferencia de medios </h2><br>  Despu√©s de que el video recibido de la c√°mara se divide en peque√±os paquetes, deben transmitirse a trav√©s de la red.  El protocolo de transporte utilizado para esto es similar al de se√±alizaci√≥n, pero dado que la "carga √∫til" es completamente diferente, algunos protocolos son mejores que otros.  Por ejemplo, TCP proporciona accesibilidad de paquetes, pero no agrega valor a la pila, porque mecanismos similares (RTX / RED / FEC) ya est√°n en el protocolo de transmisi√≥n.  Pero los retrasos en el reenv√≠o a TCP es una falla clara que UDP no tiene.  Pero existe la pr√°ctica de bloquear UDP como un "protocolo para torrentes". <br><br>  La elecci√≥n del protocolo y los puertos de red se decidi√≥ previamente mediante "codificaci√≥n", pero ahora usamos protocolos como ICE en WebRTC, que nos permite acordar los puertos y el transporte en cada conexi√≥n espec√≠fica.  En el futuro cercano, es posible utilizar el protocolo QUIC (compatible con versiones anteriores de UDP), que es discutido activamente por el IETF y tiene ventajas sobre la velocidad y la confiabilidad sobre TCP y UDP.  Finalmente, podemos mencionar protocolos de transmisi√≥n de medios como MPEG-DASH y HLS, que utilizan HTTP como transporte y se beneficiar√°n de la introducci√≥n de HTTP / 2.0. <br><br><h2>  Seguridad de transmisi√≥n de medios </h2><br>  Algunos motores protegen los datos durante la transmisi√≥n a trav√©s de la red: ya sea el flujo de medios en s√≠ mismo o los paquetes de la capa de transporte.  El proceso incluye la transferencia de claves de cifrado, para lo cual se utilizan protocolos separados: SDES en VoIP y DTLS en WebRTC.  Este √∫ltimo tiene una ventaja, ya que adem√°s de los datos, tambi√©n protege la transmisi√≥n de claves de cifrado. <br><br><h2>  Lo que me molesta de todo esto </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/od/pd/xx/odpdxx5jrsjgoo8xu22boycell4.png"></div><br>  Algunos desarrolladores, como los autores de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este art√≠culo</a> , colocan los protocolos puramente WebSocket y QUIC al mismo nivel que WebRTC, Flash o HLS.  Para m√≠, esa agrupaci√≥n parece extra√±a, porque los √∫ltimos tres protocolos son una historia sobre la transmisi√≥n de medios.  La codificaci√≥n y la paquetizaci√≥n ocurren antes de usar WebSocket o QUIC.  La implementaci√≥n de WebRTC de referencia de Google (libwebrtc / chrome) y el ORTC de Microsoft usan QUIC como protocolo de transporte. <br><br>  Igualmente sorprendente es la falta de menci√≥n de HTTP / 2.0 como una optimizaci√≥n para protocolos basados ‚Äã‚Äãen HTTP como HLS y MPEG-DASH.  Y el CMAF mencionado no es m√°s que un formato de archivo para HLS y MPEG-DASH, pero no es su reemplazo en absoluto. <br><br>  Finalmente, SRT es solo un protocolo de transporte.  √âl, por supuesto, agrega una cantidad de chips en comparaci√≥n con aquellos basados ‚Äã‚Äãen archivos HLS y MPEG-DASH, pero todos estos chips ya est√°n en un nivel de pila diferente y se implementan en RTMP o WebRTC.  SRT tambi√©n comparte la codificaci√≥n del flujo de medios y las estad√≠sticas, lo que no permite que el c√≥dec mantenga esta informaci√≥n lo m√°s cerca posible entre s√≠.  Tal decisi√≥n puede afectar negativamente la capacidad de adaptar el video transferido al ancho de banda de red cambiante. <br><br>  Los protocolos basados ‚Äã‚Äãen archivos, como HLS, codifican m√∫ltiples flujos y seleccionan los necesarios para adaptarse al ancho del canal.  WebRTC le permite adaptar la codificaci√≥n de cada cuadro en tiempo real: es mucho m√°s r√°pido que seleccionar otro flujo en HLS, lo que requiere contar hasta 10 segundos de datos ya enviados. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es421121/">https://habr.com/ru/post/es421121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es421109/index.html">(Actualizado) Intel proh√≠be publicar puntos de referencia para actualizaciones de microc√≥digo</a></li>
<li><a href="../es421111/index.html">Sistema de dise√±o en Figma. Una mirada a la interfaz a trav√©s de los componentes.</a></li>
<li><a href="../es421113/index.html">Presentamos DJI Mavic 2 Pro / Zoom</a></li>
<li><a href="../es421115/index.html">Contexto en una aplicaci√≥n de Android</a></li>
<li><a href="../es421119/index.html">Rastrillo submarino Desarrollo de SmartTV</a></li>
<li><a href="../es421123/index.html">Resumen de eventos de TI para septiembre</a></li>
<li><a href="../es421125/index.html">Segmentamos 600 millones de usuarios en tiempo real todos los d√≠as.</a></li>
<li><a href="../es421127/index.html">Seminarios web de Skillbox Friday: dise√±o y desarrolladores</a></li>
<li><a href="../es421129/index.html">C√≥mo reducir la revisi√≥n de c√≥digo de dos semanas a varias horas. La experiencia del equipo Yandex.Market</a></li>
<li><a href="../es421131/index.html">Vulnerabilidad cr√≠tica de los servidores 1Cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>