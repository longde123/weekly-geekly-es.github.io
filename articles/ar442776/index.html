<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ผโโ๏ธ ๐ฉ๐ฟโ๐คโ๐จ๐ผ ๐๏ธ ุงูููุงุฑุณ ูู ุจูุณุชุฌุฑุณ - 3 (ุชุฌุฒุฆุฉ) ๐๏ธ ๐จ ๐จ๐ผโ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุตู ุงูููุงู ุงูุฃูู ูุญุฑู ููุฑุณุฉ PostgreSQL ุ ูุงูุซุงูู ุชูุงูู ูุงุฌูุฉ ุฃุณุงููุจ ุงููุตูู ุ ููุญู ุงูุขู ุนูู ุงุณุชุนุฏุงุฏ ูููุงูุดุฉ ุฃููุงุน ูุนููุฉ ูู ุงูููุงุฑุณ. ููุจุฏุฃ ูุน ูุคุดุฑ ุงูุชุฌุฒ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูููุงุฑุณ ูู ุจูุณุชุฌุฑุณ - 3 (ุชุฌุฒุฆุฉ)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/442776/" style=";text-align:right;direction:rtl">  ูุตู ุงูููุงู ุงูุฃูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุฑู ููุฑุณุฉ PostgreSQL</a> ุ ูุงูุซุงูู ุชูุงูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฌูุฉ ุฃุณุงููุจ ุงููุตูู</a> ุ ููุญู ุงูุขู ุนูู ุงุณุชุนุฏุงุฏ ูููุงูุดุฉ ุฃููุงุน ูุนููุฉ ูู ุงูููุงุฑุณ.  ููุจุฏุฃ ูุน ูุคุดุฑ ุงูุชุฌุฒุฆุฉ. <br><br><h1 style=";text-align:right;direction:rtl">  ูุงุด </h1><br><h2 style=";text-align:right;direction:rtl">  ูููู </h2><br><h3 style=";text-align:right;direction:rtl">  ุงููุธุฑูุฉ ุงูุนุงูุฉ </h3><br>  ุชุชุถูู ุงููุซูุฑ ูู ูุบุงุช ุงูุจุฑูุฌุฉ ุงูุญุฏูุซุฉ ุฌุฏุงูู ุงูุชุฌุฒุฆุฉ ูููุน ุงูุจูุงูุงุช ุงูุฃุณุงุณู.  ูู ุงูุฎุงุฑุฌ ุ ูุดุจู ุฌุฏูู ุงูุชุฌุฒุฆุฉ ุตููููุง ุนุงุฏููุง ูููุฑุณูุง ูุน ุฃู ููุน ุจูุงูุงุช (ุนูู ุณุจูู ุงููุซุงู ุ ุณูุณูุฉ) ุจุฏูุงู ูู ุฑูู ุตุญูุญ.  ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ูู PostgreSQL ููุธู ุจุทุฑููุฉ ููุงุซูุฉ.  ููู ูุนูู ูุฐุงุ <br><br>  ููุงุนุฏุฉ ุนุงูุฉ ุ ุชุญุชูู ุฃููุงุน ุงูุจูุงูุงุช ุนูู ูุทุงูุงุช ูุจูุฑุฉ ุฌุฏูุง ูู ุงูููู ุงููุณููุญ ุจูุง: ูู ุนุฏุฏ ุงูุณูุงุณู ุงููุฎุชููุฉ ุงูุชู ูููู ุฃู ูุชุตูุฑูุง ูู ุนููุฏ ูู ุงูููุน "ูุต"ุ  ูู ุงูููุช ููุณู ุ ูู ุนุฏุฏ ุงูููู ุงููุฎุชููุฉ ุงูุชู ูุชู ุชุฎุฒูููุง ุจุงููุนู ูู ุนููุฏ ูุต ูู ุจุนุถ ุงูุฌุฏุงููุ  ุนุงุฏุฉ ุ ููุณ ุงููุซูุฑ ูููู. <br><br>  ููุฑุฉ ุงูุชุฌุฒุฆุฉ ูู ุฑุจุท ุนุฏุฏ ุตุบูุฑ (ูู 0 ุฅูู <em>N โ</em> ุ ููู <em>N</em> ูู ุงููุฌููุน) ุจูููุฉ ุฃู ููุน ุจูุงูุงุช.  ุฌูุนูุฉ ูุซู ูุฐุง ูุณูู <em>ูุธููุฉ ุงูุชุฌุฒุฆุฉ</em> .  ูููู ุงุณุชุฎุฏุงู ุงูุฑูู ุงูุฐู ุชู ุงูุญุตูู ุนููู ูููุฑุณ ููุตููู ุงูุนุงุฏู ุญูุซ ุณูุชู ุชุฎุฒูู ุงูุฅุดุงุฑุงุช ุฅูู ุตููู ุงูุฌุฏูู (TIDs).  ุชุณูู ุนูุงุตุฑ ูุฐู ุงููุตูููุฉ <em>ุฏูุงุก ุฌุฏูู ุงูุชุฌุฒุฆุฉ</em> - ูููู ููุฌููุนุฉ ูุงุญุฏุฉ ุฃู ุชุฎุฒู ุงูุนุฏูุฏ ูู TID ุฅุฐุง ุธูุฑุช ููุณ ุงููููุฉ ุงููููุฑุณุฉ ูู ุตููู ูุฎุชููุฉ. <br><br>  ููููุง ูุงูุช ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ุชูุฒุน ููู ุงููุตุฏุฑ ุจูุงุณุทุฉ ุงูุฌุฑุงูุงุช ุ ูููุง ูุงูุช ุฃูุถู.  ูููู ุญุชู ุฏุงูุฉ ูุงุด ุฌูุฏุฉ ุณุชูุชุฌ ูู ุจุนุถ ุงูุฃุญูุงู ูุชุงุฆุฌ ูุชุณุงููุฉ ูููู ูุตุฏุฑ ูุฎุชููุฉ - ููุฐุง ูุง ูุณูู <em>ุชุตุงุฏู</em> .  ูุฐูู ุ ูููู ููุฌููุนุฉ ูุงุญุฏุฉ ุชุฎุฒูู TIDs ุงูููุงุจูุฉ ูููุงุชูุญ ูุฎุชููุฉ ุ ูุจุงูุชุงูู ุ ูุฌุจ ุฅุนุงุฏุฉ ูุญุต TIDs ุงูุชู ุชู ุงูุญุตูู ุนูููุง ูู ุงูููุฑุณ. <br><a name="habracut"></a><br>  ุนูู ุณุจูู ุงููุซุงู ููุท: ูุง ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ููุณูุงุณู ุงูุชู ูููู ุฃู ูููุฑ ุจูุงุ  ุงุฌุนู ุนุฏุฏ ุงููุฌููุนุงุช ูุจูุบ 256. ุนูู ุณุจูู ุงููุซุงู ุ ุฑูู ุงูุฌุฑุงูุฉ ุ ูููููุง ุฃู ูุฃุฎุฐ ุฑูุฒ ุงูุญุฑู ุงูุฃูู (ุจุงูุชุฑุงุถ ุชุฑููุฒ ุญุฑู ุฃุญุงุฏู ุงูุจุงูุช).  ูู ูุฐู ูุธููุฉ ุชุฌุฒุฆุฉ ุฌูุฏุฉุ  ูู ุงููุงุถุญ ุ ูุง: ุฅุฐุง ูุงูุช ูู ุงูุณูุงุณู ุชุจุฏุฃ ุจููุณ ุงูุญุฑู ุ ูุณูู ุชุฏุฎู ุฌููุนูุง ูู ูุฌููุนุฉ ูุงุญุฏุฉ ุ ูุจุงูุชุงูู ูุฅู ุงูุชูุญูุฏ ุบูุฑ ูุงุฑุฏ ุ ูุณุชุญุชุงุฌ ุฌููุน ุงูููู ุฅูู ุฅุนุงุฏุฉ ุงููุญุต ุ ููู ูููู ุงูุชุฌุฒุฆุฉ ุฐุง ูุนูู.  ูุงุฐุง ูู ููุฎุต ุฑููุฒ ุฌููุน ุงูุดุฎุตูุงุช modulo 256ุ  ุณูููู ูุฐุง ุฃูุถู ุจูุซูุฑ ุ ูููู ุฃุจุนุฏ ูุง ูููู ุนู ุงููุซุงููุฉ.  ุฅุฐุง ููุช ููุชููุง ุจุงููุธุงุฆู ุงูุฏุงุฎููุฉ ููุฐู ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ูู PostgreSQL ุ ูุฑุงุฌุน ุชุนุฑูู hash_any () ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">hashfunc.c</a> . <br><br><h3 style=";text-align:right;direction:rtl">  ูููู ุงูููุฑุณ </h3><br>  ุฏุนูุง ูุนูุฏ ุฅูู ูุคุดุฑ ุงูุชุฌุฒุฆุฉ.  ุจุงููุณุจุฉ ุฅูู ูููุฉ ุจุนุถ ุฃููุงุน ุงูุจูุงูุงุช (ููุชุงุญ ุงูููุฑุณ) ุ ุชุชูุซู ูููุชูุง ูู ุงูุนุซูุฑ ุนูู TID ุงููุทุงุจู ุจุณุฑุนุฉ. <br><br>  ุนูุฏ ุงูุฅุฏุฑุงุฌ ูู ุงูููุฑุณ ุ ููุญุณุจ ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ููููุชุงุญ.  ุชุฑุฌุน ุฏุงูุงุช ุงูุชุฌุฒุฆุฉ ูู PostgreSQL ุฏุงุฆููุง ููุน "ุนุฏุฏ ุตุญูุญ" ุ ูุงูุฐู ูุชุฑุงูุญ ุจูู 2 <sup>32 ุฅูู</sup> 4 ูููุงุฑุงุช ูููุฉ.  ุนุฏุฏ ุงูุฌุฑุงูุงุช ูู ุงูุจุฏุงูุฉ ูุณุงูู ุงุซููู ููุฒูุฏ ุฏููุงูููููุง ูุถุจุท ุญุฌู ุงูุจูุงูุงุช.  ูููู ุญุณุงุจ ุฑูู ุงูุฌุฑุงูุฉ ูู ุดูุฑุฉ ุงูุชุฌุฒุฆุฉ ุจุงุณุชุฎุฏุงู ุญุณุงุจ ุงูุจุช.  ููุฐุง ูู ุฏูู ุญูุซ ุณูุถุน TID ูุฏููุง. <br><br>  ูููู ูุฐุง ุบูุฑ ูุงูู ุญูุซ ูููู ูุถุน ุฃุฑูุงู TID ุงููุทุงุจูุฉ ูููุงุชูุญ ูุฎุชููุฉ ูู ููุณ ุงููุฌููุนุฉ.  ูุงุฐุง ุณููุนูุ  ูู ุงููููู ุชุฎุฒูู ุงููููุฉ ุงููุตุฏุฑ ููููุชุงุญ ูู ูุฌููุนุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู TID ุ ููู ูุฐุง ุณูุฒูุฏ ุจุดูู ูุจูุฑ ูู ุญุฌู ุงูููุฑุณ.  ูุชูููุฑ ูุณุงุญุฉ ุ ุจุฏูุงู ูู ููุชุงุญ ุ ูููู ุงูุฌุฑุงูุฉ ุจุชุฎุฒูู ุฑูุฒ ุชุฌุฒุฆุฉ ุงูููุชุงุญ. <br><br>  ุนูุฏ ุงูุจุญุซ ูู ุฎูุงู ุงูููุฑุณ ุ ูููู ุจุญุณุงุจ ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ููููุชุงุญ ูุงูุญุตูู ุนูู ุฑูู ุงููุฌููุนุฉ.  ุงูุขู ูุจูู ุฃู ูุณุชุนุฑุถ ูุญุชููุงุช ุงูุฏูู ูุฃู ูุฑุฌุน ููุท ุฃุฑูุงู TID ุงููุทุงุจูุฉ ูุฑููุฒ ุงูุชุฌุฒุฆุฉ ุงูููุงุณุจุฉ.  ูุชู ุฐูู ุจููุงุกุฉ ุญูุซ ูุชู ุชุฑุชูุจ ุฃุฒูุงุฌ "ุฑูุฒ ุงูุชุฌุฒุฆุฉ - TID" ุงููุฎุฒูุฉ. <br><br>  ููุน ุฐูู ุ ูุฏ ูุญุฏุซ ููุชุงุญุงู ูุฎุชููุงู ููุณ ููุท ูููุตูู ุฅูู ูุฌููุนุฉ ูุงุญุฏุฉ ุ ูููู ุฃูุถูุง ููุญุตูู ุนูู ููุณ ุฑููุฒ ุงูุชุฌุฒุฆุฉ ุฐุงุช ุงูุฃุฑุจุน ุจุงูุชุงุช - ูู ูุชุฎูุต ุฃุญุฏ ูู ุงูุชุตุงุฏู.  ูุฐูู ุ ุชุทูุจ ุทุฑููุฉ ุงููุตูู ูู ูุญุฑู ุงูููุฑุณุฉ ุงูุนุงู ุงูุชุญูู ูู ูู TID ุนู ุทุฑูู ุฅุนุงุฏุฉ ุงูุชุญูู ูู ุงูุญุงูุฉ ูู ุตู ุงูุฌุฏูู (ูููู ูููุญุฑู ุงูููุงู ุจุฐูู ูุน ูุญุต ุงูุฑุคูุฉ). <br><br><h3 style=";text-align:right;direction:rtl">  ุชุนููู ุจููุงุช ุงูุจูุงูุงุช ุฅูู ุงูุตูุญุงุช </h3><br>  ุฅุฐุง ูุธุฑูุง ุฅูู ููุฑุณ ููุง ุชู ุนุฑุถู ูู ููุจู ูุฏูุฑ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงููุฎุฒู ุงููุคูุช ุจุฏูุงู ูู ููุธูุฑ ุชุฎุทูุท ุงูุงุณุชุนูุงู ูุชูููุฐู ุ ุงุชุถุญ ุฃูู ูุฌุจ ุชุฌููุน ุฌููุน ุงููุนูููุงุช ููุงูุฉ ุตููู ุงูููุฑุณ ูู ุตูุญุงุช.  ูุชู ุชุฎุฒูู ุตูุญุงุช ุงูููุฑุณ ูุฐู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงููุฎุฒูุฉ ููุชู ุฅุฎูุงุคูุง ูู ููุงู ุจููุณ ุงูุทุฑููุฉ ุชูุงููุง ูุซู ุตูุญุงุช ุงูุฌุฏูู. <br><br><img src="https://habrastorage.org/web/aa7/83b/c8c/aa783bc8cbfc4be49baec029339eb539.png"><br><br>  ูุณุชุฎุฏู ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ุ ููุง ูู ููุถุญ ูู ุงูุดูู ุ ุฃุฑุจุนุฉ ุฃููุงุน ูู ุงูุตูุญุงุช (ุงููุณุชุทููุงุช ุงูุฑูุงุฏูุฉ): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุตูุญุฉ ุงูุชุนุฑูู - ุฑูู ุงูุตูุญุฉ ุตูุฑ ุ ูุงูุชู ุชุญุชูู ุนูู ูุนูููุงุช ุญูู ูุญุชููุงุช ุงูููุฑุณ. </li><li style=";text-align:right;direction:rtl">  ุตูุญุงุช ุงููุฌููุนุฉ - ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ูู ุงูููุฑุณ ุ ูุงูุชู ุชุฎุฒู ุงูุจูุงูุงุช ูุฃุฒูุงุฌ "ููุฏ ุงูุชุฌุฒุฆุฉ - TID". </li><li style=";text-align:right;direction:rtl">  ุตูุญุงุช ุงููุงุฆุถ - ููุธูุฉ ุจููุณ ุทุฑููุฉ ุตูุญุงุช ุงูุฌุฑุงูุฉ ูุชุณุชุฎุฏู ุนูุฏูุง ุชููู ุตูุญุฉ ูุงุญุฏุฉ ุบูุฑ ูุงููุฉ ููุฌููุนุฉ. </li><li style=";text-align:right;direction:rtl">  ุตูุญุงุช ุงูุตูุฑุฉ ุงูููุทูุฉ - ุงูุชู ุชุชุนูุจ ุตูุญุงุช ุงููุงุฆุถ ุงููุงุถุญุฉ ุญุงูููุง ููููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ูููุฌููุนุงุช ุงูุฃุฎุฑู. </li></ul><br>  ุชูุซู ุงูุฃุณูู ุงูุณูููุฉ ุงูุชู ุชุจุฏุฃ ูู ุนูุงุตุฑ ุตูุญุฉ ุงูููุฑุณ TID ุ ุฃู ุฅุดุงุฑุงุช ุฅูู ุตููู ุงูุฌุฏูู. <br><br>  ูู ูู ูุฑุฉ ูุฒูุฏ ุงูููุฑุณ ุ ููุดุฆ PostgreSQL ุนูู ุงูููุฑ ุถุนู ุนุฏุฏ ุงูุฏูุงุก (ูุจุงูุชุงูู ุ ุงูุตูุญุงุช) ุงูุชู ุชู ุฅูุดุงุคูุง ูุคุฎุฑูุง.  ูุชุฌูุจ ุชุฎุตูุต ูุฐุง ุงูุนุฏุฏ ุงููุจูุฑ ูู ุงูุตูุญุงุช ุฏูุนุฉ ูุงุญุฏุฉ ุ ุฌุนู ุงูุฅุตุฏุงุฑ 10 ุฒูุงุฏุฉ ุงูุญุฌู ุฃูุซุฑ ุณูุงุณุฉ.  ุจุงููุณุจุฉ ููุตูุญุงุช ุงูุฒุงุฆุฏุฉ ุ ูุชู ุชุฎุตูุตูุง ุชูุงููุง ุนูุฏ ุงูุญุงุฌุฉ ูุชุชุจุนูุง ูู ุตูุญุงุช ุงูุตูุฑุฉ ุงูููุทูุฉ ุ ูุงูุชู ูุชู ุชุฎุตูุตูุง ุฃูุถูุง ุนูุฏ ุงูุญุงุฌุฉ. <br><br>  ูุงุญุธ ุฃู ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ูุง ูููู ุฃู ูููุต ูู ุงูุญุฌู.  ุฅุฐุง ูููุง ุจุญุฐู ุจุนุถ ุงูุตููู ุงููููุฑุณุฉ ุ ููู ูุชู ุฅุฑุฌุงุน ุงูุตูุญุงุช ุงูุชู ุชู ุชุฎุตูุตูุง ูุฑุฉ ูุงุญุฏุฉ ุฅูู ูุธุงู ุงูุชุดุบูู ุ ูููู ุณูุชู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ููุท ููุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุจุนุฏ VACUUMING.  ุงูุฎูุงุฑ ุงููุญูุฏ ูุชูููู ุญุฌู ุงูููุฑุณ ูู ุฅุนุงุฏุฉ ุจูุงุฆู ูู ููุทุฉ ุงูุตูุฑ ุจุงุณุชุฎุฏุงู ุฃูุฑ REINDEX ุฃู VACUUM FULL. <br><br><h2 style=";text-align:right;direction:rtl">  ูุซุงู </h2><br>  ุฏุนููุง ูุฑู ููู ูุชู ุฅูุดุงุก ูุคุดุฑ ุงูุชุฌุฒุฆุฉ.  ูุชุฌูุจ ูุถุน ุฌุฏุงูููุง ุงูุฎุงุตุฉ ุ ูู ุงูุขู ูุตุงุนุฏูุง ุ ุณูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ</a> ููููู ุงูุฌูู ุ ููุฐู ุงููุฑุฉ ุณููุธุฑ ูู ุฌุฏูู ุงูุฑุญูุงุช ุงูุฌููุฉ. <br><br><pre style=";text-align:right;direction:rtl"><code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> flights <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> hash(flight_no);</code> </pre> <pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">WARNING: hash indexes are not WAL-logged and their use is discouraged CREATE INDEX</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flights <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> flight_no = <span class="hljs-string"><span class="hljs-string">'PG0001'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ---------------------------------------------------- Bitmap Heap Scan on flights Recheck Cond: (flight_no = 'PG0001'::bpchar) -&gt; Bitmap Index Scan on flights_flight_no_idx Index Cond: (flight_no = 'PG0001'::bpchar) (4 rows)</code> </pre><br>  ูุง ูุฒุนุฌ ุงูุชุทุจูู ุงูุญุงูู ููุคุดุฑ ุงูุชุฌุฒุฆุฉ ูู ุฃู ุงูุนูููุงุช ูุน ุงูููุฑุณ ูุง ูุชู ุชุณุฌูููุง ูู ุณุฌู ุงููุชุงุจุฉ ุงููุณุจู (ุงูุฐู ูุญุฐุฑ PostgreSQL ููู ุนูุฏ ุฅูุดุงุก ุงูููุฑุณ).  ูุชูุฌุฉ ูุฐูู ุ ูุง ูููู ุงุณุชุฑุฏุงุฏ ููุงุฑุณ ุงูุชุฌุฒุฆุฉ ุจุนุฏ ุงููุดู ูุนุฏู ุงููุดุงุฑูุฉ ูู ุงููุณุฎ ุงููุชูุงุซูุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ุฃูู ุจูุซูุฑ ูู "B-tree" ูู ุงูุชููุน ุ ูููุงุกุชู ูุดููู ูููุง ุฃูุถูุง.  ูุฐูู ูู ุบูุฑ ุงูุนููู ุงูุขู ุงุณุชุฎุฏุงู ูุซู ูุฐู ุงูููุงุฑุณ. <br><br>  ููุน ุฐูู ุ ุณูุชุบูุฑ ูุฐุง ูู ููุช ูุจูุฑ ูู ุฎุฑูู ูุฐุง ุงูุนุงู (2017) ุจูุฌุฑุฏ ุฅุตุฏุงุฑ ุงูุฅุตุฏุงุฑ 10 ูู PostgreSQL.  ูู ูุฐุง ุงูุฅุตุฏุงุฑ ุ ุญุตู ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ุฃุฎูุฑูุง ุนูู ุฏุนู ูุณุฌู ุงููุชุงุจุฉ ุงููุณุจูุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุชู ุชุญุณูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุฌุนู ุงูุนูู ุงููุชุฒุงูู ุฃูุซุฑ ููุงุกุฉ. <br><br><blockquote style=";text-align:right;direction:rtl">  ูุฐุง ุตุญูุญ.  ููุฐ ุฃู ุญุตูุช ุนูู ููุงุฑุณ PostgreSQL 10 ููุฏุนู ุงููุงูู ููููู ุงุณุชุฎุฏุงููุง ุฏูู ูููุฏ.  ูู ูุชู ุนุฑุถ ุงูุชุญุฐูุฑ ุจุนุฏ ุงูุขู. <br></blockquote><br><h2 style=";text-align:right;direction:rtl">  ุฏูุงูุงุช ุงูุชุฌุฒุฆุฉ </h2><br>  ููู ููุงุฐุง ูุฌุง ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ุชูุฑูุจูุง ูู ููุงุฏุฉ PostgreSQL ุฅูู 9.6 ุบูุฑ ุตุงูุญุฉ ููุงุณุชุนูุงูุ  ุงูุดูุก ูู ุฃู DBMS ุชุณุชููุฏ ุจุดูู ูุจูุฑ ูู ุฎูุงุฑุฒููุฉ ุงูุชุฌุฒุฆุฉ (ุนูู ูุฌู ุงูุชุญุฏูุฏ ุ ููุตูุงุช ูุชุฌูุนุงุช ุงูุชุฌุฒุฆุฉ) ุ ููุฌุจ ุฃู ูููู ุงููุธุงู ุนูู ุฏุฑุงูุฉ ุจูุธููุฉ hash ูุชุทุจูููุง ุนูู ุฃููุงุน ุงูุจูุงูุงุช.  ููู ูุฐู ุงููุฑุงุณูุงุช ููุณุช ุซุงุจุชุฉ ุ ููุง ูููู ุชุนููููุง ูุฑุฉ ูุงุญุฏุฉ ูุฅูู ุงูุฃุจุฏ ูุฃู PostgreSQL ูุณูุญ ุจุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ ูู ุงูุจูุงูุงุช ุจุณุฑุนุฉ.  ููุฐู ุทุฑููุฉ ูุตูู ุจูุงุณุทุฉ hash ุ ุญูุซ ูุชู ุชุฎุฒูู ูุฐู ุงููุฑุงุณูุงุช ุ ูุชูุซู ุงุฑุชุจุงุทูุง ุจูู ุงููุธุงุฆู ุงููุณุงุนุฏุฉ ูุนุงุฆูุงุช ุงููุดุบููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> opf.opfname <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> opfamily_name, amproc.amproc::<span class="hljs-type"><span class="hljs-type">regproc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> opfamily_procedure <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_am am, pg_opfamily opf, pg_amproc amproc <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> opf.opfmethod = am.oid <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> amproc.amprocfamily = opf.oid <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> am.amname = <span class="hljs-string"><span class="hljs-string">'hash'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> opfamily_name, opfamily_procedure;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> opfamily_name | opfamily_procedure --------------------+-------------------- abstime_ops | hashint4 aclitem_ops | hash_aclitem array_ops | hash_array bool_ops | hashchar ...</code> </pre><br>  ุนูู ุงูุฑุบู ูู ุฃู ูุฐู ุงูุฏุงูุงุช ุบูุฑ ููุซูุฉ ุ ุฅูุง ุฃูู ูููู ุงุณุชุฎุฏุงููุง ูุญุณุงุจ ุฑูุฒ ุงูุชุฌุฒุฆุฉ ููููุฉ ููุน ุงูุจูุงูุงุช ุงูููุงุณุจ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุธููุฉ "hashtext" ุฅุฐุง ุชู ุงุณุชุฎุฏุงููุง ูุนุงุฆูุฉ ูุดุบู "text_ops": <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> hashtext(<span class="hljs-string"><span class="hljs-string">'one'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> hashtext ----------- 127722028 (1 row)</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> hashtext(<span class="hljs-string"><span class="hljs-string">'two'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> hashtext ----------- 345620034 (1 row)</code> </pre><br><h2 style=";text-align:right;direction:rtl">  ุฎุตุงุฆุต </h2><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฎุตุงุฆุต ููุฑุณ ุงูุชุฌุฒุฆุฉ ุ ุญูุซ ุชููุฑ ุทุฑููุฉ ุงููุตูู ูุฐู ูููุธุงู ูุนูููุงุช ุญูู ููุณู.  ูุฏููุง โโุงุณุชูุณุงุฑุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุขุฎุฑ ูุฑุฉ</a> .  ุงูุขู ูู ูุชุฌุงูุฒ ุงููุชุงุฆุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> name | pg_indexam_has_property ---------------+------------------------- can_order | f can_unique | f can_multi_col | f can_exclude | t name | pg_index_has_property ---------------+----------------------- clusterable | f index_scan | t bitmap_scan | t backward_scan | t name | pg_index_column_has_property --------------------+------------------------------ asc | f desc | f nulls_first | f nulls_last | f orderable | f distance_orderable | f returnable | f search_array | f search_nulls | f</code> </pre><br>  ูุง ุชุญุชูุธ ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ุจุนูุงูุฉ ุงูุชุฑุชูุจ: ุฅุฐุง ูุงูุช ูููุฉ ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ูููุชุงุญ ูุงุญุฏ ุฃุตุบุฑ ูู ุงูููุชุงุญ ุงูุขุฎุฑ ุ ููู ุงููุณุชุญูู ุฅุฌุฑุงุก ุฃู ุงุณุชูุชุงุฌุงุช ุญูู ููููุฉ ุชุฑุชูุจ ุงูููุงุชูุญ ููุณูุง.  ูุฐูู ุ ุจุดูู ุนุงู ุ ูููู ููุคุดุฑ ุงูุชุฌุฒุฆุฉ ุฃู ูุฏุนู ุงูุนูููุฉ ุงููุญูุฏุฉ "ุชุณุงูู": <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> opf.opfname <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> opfamily_name, amop.amopopr::<span class="hljs-type"><span class="hljs-type">regoperator</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> opfamily_operator <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_am am, pg_opfamily opf, pg_amop amop <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> opf.opfmethod = am.oid <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> amop.amopfamily = opf.oid <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> am.amname = <span class="hljs-string"><span class="hljs-string">'hash'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> opfamily_name, opfamily_operator;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> opfamily_name | opfamily_operator ---------------+---------------------- abstime_ops | =(abstime,abstime) aclitem_ops | =(aclitem,aclitem) array_ops | =(anyarray,anyarray) bool_ops | =(boolean,boolean) ...</code> </pre><br>  ูุจุงูุชุงูู ุ ูุง ูููู ููุคุดุฑ ุงูุชุฌุฒุฆุฉ ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงููุทููุจุฉ ("can_order" ุ "ูุงุจูุฉ ููุชุฑุชูุจ").  ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ูุง ูุนุงูุฌ NULLs ูููุณ ุงูุณุจุจ: ุงูุนูููุฉ "ูุณุงูู" ูุง ูุนูู ูู NULL ("search_nulls"). <br><br>  ูุธุฑูุง ูุฃู ูุคุดุฑ ุงูุชุฌุฒุฆุฉ ูุง ูุฎุฒู ุงูููุงุชูุญ (ูููู ููุท ุฑููุฒ ุงูุชุฌุฒุฆุฉ ุงูุฎุงุตุฉ ุจูู) ุ ูุง ูููู ุงุณุชุฎุฏุงูู ูููุตูู ุฅูู ุงูููุฑุณ ููุท ("ูููู ุฅุฑุฌุงุนู"). <br><br>  ูุง ุชุฏุนู ุทุฑููุฉ ุงููุตูู ูุฐู ููุงุฑุณ ูุชุนุฏุฏุฉ ุงูุฃุนูุฏุฉ ("can_multi_col") ุฃูุถูุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฏุงุฎููุฉ </h2><br>  ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ 10 ุ ุณูููู ูู ุงููููู ุงูุจุญุซ ูู ููุฑุณ ุงูุชุฌุฒุฆุฉ ุงูุฏุงุฎูู ูู ุฎูุงู ููุญู " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pageinspect</a> ".  ูุฐุง ูุง ุณูุจุฏู ุนููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> pageinspect;</code> </pre><br>  ุตูุญุฉ ุงูุชุนุฑูู (ูุญุตู ุนูู ุนุฏุฏ ุงูุตููู ูู ุงูููุฑุณ ูุฑูู ุงููุฌููุนุฉ ุงูุฃูุตู ุงููุณุชุฎุฏู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> hash_page_type(get_raw_page(<span class="hljs-string"><span class="hljs-string">'flights_flight_no_idx'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>));</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> hash_page_type ---------------- metapage (1 row)</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> ntuples, maxbucket <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> hash_metapage_info(get_raw_page(<span class="hljs-string"><span class="hljs-string">'flights_flight_no_idx'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>));</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ntuples | maxbucket ---------+----------- 33121 | 127 (1 row)</code> </pre><br>  ุตูุญุฉ ุฏูู (ูุญุตู ุนูู ุนุฏุฏ tuples ุงูุญูุฉ ู tuples ุงูููุช ุ ุฃู ุชูู ุงูุชู ูููู ุงููุฑุงุบ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> hash_page_type(get_raw_page(<span class="hljs-string"><span class="hljs-string">'flights_flight_no_idx'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>));</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> hash_page_type ---------------- bucket (1 row)</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">demo=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> live_items, dead_items <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> hash_page_stats(get_raw_page(<span class="hljs-string"><span class="hljs-string">'flights_flight_no_idx'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>));</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> live_items | dead_items ------------+------------ 407 | 0 (1 row)</code> </pre><br>  ู ููุฐุง.  ููู ูู ุงูุตุนุจ ุชุญุฏูุฏ ูุนูู ุฌููุน ุงูุญููู ุงููุชุงุญุฉ ุฏูู ูุญุต ุงูููุฏ ุงููุตุฏุฑู.  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูููุงู ุจุฐูู ุ ูุฌุจ ุฃู ุชุจุฏุฃ ุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">README</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑุฃ ุนูู</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar442776/">https://habr.com/ru/post/ar442776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar442758/index.html">5 ุงูุฎุงุฑูุฉ ุงูุญูุงุฉ ูุชุญุณูู ุงุณุชุนูุงูุงุช SQL ูู Greenplum</a></li>
<li><a href="../ar442760/index.html">ููุงู ุญูู ููููุฉ ููุงู CommVault ุจูุณุฎ PostgreSQL</a></li>
<li><a href="../ar442762/index.html">ุงููุชุฏุฑุจ ูุงุณูุง ููุตุตู ุญูู API ุงูุนุงุทู</a></li>
<li><a href="../ar442770/index.html">ูุธุฑุฉ ุนุงูุฉ ุนูู ูุงุณุญุงุช ุงูุจุงุฑููุฏ JavaScript</a></li>
<li><a href="../ar442772/index.html">ุงูุฑูุงุถูุงุช ูุนุงูู ุงูุจูุงูุงุช: ุงูุฃูุณุงู ุงููุงุฒูุฉ</a></li>
<li><a href="../ar442778/index.html">ุชุนูู ุงูุฐูุงุจ: ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุชูุงุฑูุฑ ุงูููุฏูู</a></li>
<li><a href="../ar442780/index.html">ุงูููุงููู ุงูุฎุงุทุฆุฉ ุงูุฃูุซุฑ ุดููุนุง ูู ุงูููุฒูุงุก ุงูุดุนุจูุฉ</a></li>
<li><a href="../ar442782/index.html">VShard - ุงูุชุญุฌูู ุงูุฃููู ูู Tarantool</a></li>
<li><a href="../ar442784/index.html">BGP ุงูุงุฎุชุทุงู ุนู ุทุฑูู ุฅุถุงูุฉ ุงูุถุญูุฉ AS ุฅูู AS-SET ุงูููุงุฌู</a></li>
<li><a href="../ar442786/index.html">7 ูุตุงุฆุญ ูููุฏุฉ ูุงุณุชุฎุฏุงู ุงูุบุฑูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>