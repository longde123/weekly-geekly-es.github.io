<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋🏻 🦓 👩‍👩‍👧‍👧 Sécurité dans les applications iOS 🔷 👩🏾‍🤝‍👨🏽 📛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous présente la traduction d'un article sur les principes de base de la sécurité des données confidentielles dans les applications ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sécurité dans les applications iOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430532/">  Bonjour, Habr!  Je vous présente la traduction d'un article sur les principes de base de la sécurité des données confidentielles dans les applications iOS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Application Security Musts for every iOS App»</a> par Arlind Aliu. <br><br>  La sécurité des applications est l'un des aspects les plus importants du développement logiciel.  Les utilisateurs d'applications espèrent que les informations qu'ils fournissent sont protégées en toute sécurité.  Par conséquent, vous ne pouvez pas simplement donner à quelqu'un des informations confidentielles. <br><br>  Heureusement, dans cet article, nous discuterons des erreurs que les développeurs font dans leurs applications, ainsi que des moyens de les résoudre. <br>  Suite sous la coupe. <br><a name="habracut"></a><br><h3>  Stockage de données au mauvais endroit </h3><br>  J'ai mené une étude sur plusieurs applications de l'AppStore et beaucoup font la même erreur: les informations confidentielles sont stockées là où elles ne devraient pas être. <br>  Si vous stockez des données personnelles dans <i>UserDefaults</i> , vous les mettez en danger.  <i>Les UserDefaults</i> sont stockés dans un fichier avec une liste de propriétés, qui se trouve dans le dossier "Settings" de votre application.  Les données sont stockées dans l'application sans la moindre touche de cryptage. <br><br>  En installant un programme tiers sur mac, comme iMazing, vous n'avez même pas besoin de pirater le téléphone, mais voyez immédiatement toutes les données <i>UserDefaults</i> de l'application installée depuis l'AppStore.  Ces programmes vous permettent de regarder et de gérer les données des applications installées sur l'iPhone.  Vous pouvez facilement obtenir les <i>UserDefaults de</i> n'importe quelle application. <br>  C'est la principale raison pour laquelle j'ai décidé d'écrire un article - j'ai trouvé un tas d'applications dans l'AppStore qui stockent des données dans <i>UserDefaults</i> , telles que: jetons, abonnements actifs et renouvelables, le montant d'argent disponible, etc.  Toutes ces données peuvent être facilement obtenues et utilisées à des fins malveillantes, de la gestion des abonnements payants dans l'application au piratage au niveau du réseau et pire encore. <br><br>  Et maintenant sur la façon de stocker des données. <br><br>  N'oubliez pas que seule une petite quantité d'informations doit être stockée dans <i>UserDefaults</i> , comme les paramètres de l'application, c'est-à-dire des données qui ne sont pas confidentielles pour l'utilisateur. <br><br>  Utilisez les services de sécurité dédiés d'Apple pour stocker des informations personnelles.  Le service API de trousseau vous permet de stocker une certaine quantité de données utilisateur dans une base de données cryptée.  Vous pouvez y stocker des mots de passe et d'autres données importantes pour l'utilisateur, telles que des informations de carte de crédit ou même de petites notes importantes. <br>  Il peut également y avoir des clés et des certificats chiffrés avec lesquels vous travaillez. <br><br><h3>  Service API de porte-clés </h3><br>  L'exemple suivant montre comment enregistrer le mot de passe d'un utilisateur dans le trousseau. <br><br><pre><code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> KeychainService { func save(_ password: String, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> account: String) { let password = password.data(using: String.Encoding.utf8)! let query: [String: Any] = [kSecClass as String: kSecClassGenericPassword, kSecAttrAccount as String: account, kSecValueData as String: password] let status = SecItemAdd(query as <span class="hljs-built_in"><span class="hljs-built_in">CFDictionary</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) guard status == errSecSuccess <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> print(<span class="hljs-string"><span class="hljs-string">"save error"</span></span>) } }</code> </pre> <br>  Partie du dictionnaire <i>kSecClass: kSecClassGenericPassword</i> signifie que les informations qui doivent être chiffrées sont le mot de passe.  Ensuite, nous ajoutons le nouveau mot de passe au trousseau en appelant la méthode <i>SecItemAdd</i> .  La récupération des données d'un bundle est similaire à l'enregistrement. <br><br><pre> <code class="objectivec hljs">func retrivePassword(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> account: String) -&gt; String? { let query: [String: Any] = [kSecClass as String: kSecClassGenericPassword, kSecAttrAccount as String: account, kSecMatchLimit as String: kSecMatchLimitOne, kSecReturnData as String: kCFBooleanTrue] var retrivedData: AnyObject? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span> let _ = SecItemCopyMatching(query as <span class="hljs-built_in"><span class="hljs-built_in">CFDictionary</span></span>, &amp;retrivedData) guard let data = retrivedData as? Data <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String(data: data, encoding: String.Encoding.utf8) }</code> </pre> <br>  Écrivons une petite vérification sur l'exactitude de l'enregistrement et de la réception des données. <br><br><pre> <code class="objectivec hljs">func testPaswordRetrive() { let password = <span class="hljs-string"><span class="hljs-string">"123456"</span></span> let account = <span class="hljs-string"><span class="hljs-string">"User"</span></span> keyChainService.save(password, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: account) <span class="hljs-built_in"><span class="hljs-built_in">XCTAssertEqual</span></span>(keyChainService.retrivePassword(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: account), password) }</code> </pre> <br>  À première vue, il peut sembler que l'API du trousseau est assez difficile à utiliser, surtout si vous devez enregistrer plusieurs mots de passe, je vous invite donc à utiliser le modèle de façade à ces fins.  Il vous permettra d'enregistrer et de modifier des données en fonction des besoins de l'application. <br><br>  Si vous souhaitez en savoir plus sur ce modèle, ainsi que sur la façon de créer un wrapper simple pour des sous-systèmes complexes, cet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> vous aidera.  Internet regorge également de bibliothèques ouvertes qui aident à utiliser l'API Keychain, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SAMKeychain</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SwiftKeychainWrapper</a> . <br><br><h3>  Enregistrement et autorisation de mot de passe </h3><br>  Dans ma carrière de développement, je suis constamment confronté au même problème.  Les développeurs stockent les mots de passe dans l'application ou créent une demande au serveur, qui envoie directement le nom d'utilisateur et le mot de passe. <br><br>  Si vous stockez des données dans <i>UserDefault</i> , après avoir lu les informations de la première partie de l'article, vous comprenez déjà combien vous risquez.  En stockant les mots de passe dans le trousseau, vous augmentez considérablement le niveau de sécurité de votre application, mais encore une fois, avant d'enregistrer des informations confidentielles n'importe où, vous devez d'abord les crypter. <br><br>  Supposons qu'un pirate puisse nous attaquer via notre réseau.  Ainsi, il recevra des mots de passe sous forme de texte brut.  Il est bien sûr préférable de hacher tous les mots de passe. <br><br><h3>  Cryptage des données personnelles </h3><br>  Le hachage peut sembler un peu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">écrasant</a> si vous le faites vous-même, donc dans cet article, nous utiliserons la bibliothèque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CryptoSwift</a> .  Il a collecté de nombreux algorithmes de chiffrement fiables standard utilisés dans Swift. <br><br>  Essayons d'enregistrer et de récupérer le mot de passe du trousseau en utilisant les algorithmes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CryptoSwift</a> . <br><br><pre> <code class="objectivec hljs">func saveEncryptedPassword(_ password: String, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> account: String) { let salt = Array(<span class="hljs-string"><span class="hljs-string">"salty"</span></span>.utf8) let key = try! HKDF(password: Array(password.utf8), salt: salt, variant: .sha256).calculate().toHexString() keychainService.save(key, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: account) }</code> </pre> <br>  La fonction ci-dessus enregistre le nom d'utilisateur et le mot de passe et les enregistre dans le trousseau sous forme de chaîne cryptée. <br><br>  Voyons ce qui se passe à l'intérieur: <br><br>  - Le login et le mot de passe sont écrits dans la variable salt sous forme de chaîne <br>  - sha256 remplit le hachage SHA-2 <br>  - HKDF est une fonction de génération de clé ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">KDF</a> ) basée sur le code d'authentification de message ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HMAC</a> ) <br><br>  Nous avons créé la variable salt afin de compliquer la tâche des hackers.  Nous ne pouvions que chiffrer le mot de passe, mais dans ce cas, l'attaquant peut avoir une liste des mots de passe les plus fréquemment utilisés, il les chiffrera sans problème et les comparera avec notre mot de passe chiffré.  Ensuite, trouver le mot de passe pour un compte spécifique n'est pas difficile. <br>  Maintenant, nous pouvons nous connecter en utilisant notre compte et la clé générée. <br><br><pre> <code class="objectivec hljs">authManager.login(key, user)</code> </pre> <br>  Bien sûr, le serveur doit savoir ce qui est chiffré dans notre variable salt.  Le backend pourra comparer les clés en utilisant le même algorithme pour identifier l'utilisateur. <br>  L'utilisation de cette approche améliorera considérablement la sécurité de votre application. <br><br><h3>  Comme achèvement </h3><br>  Ne négligez jamais la sécurité de votre application.  Dans cet article, nous avons tout d'abord compris quelles pourraient être les conséquences lors du stockage de données sensibles dans <i>UserDefaults</i> et pourquoi le trousseau est nécessaire. <br><br>  Dans la deuxième partie, nous parlerons d'un niveau de sécurité plus sérieux, chiffrant les données avant de les enregistrer, et discuterons également de la façon de transférer correctement les informations avec les données personnelles vers le serveur. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430532/">https://habr.com/ru/post/fr430532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430522/index.html">Avez-vous besoin d'une culture d'entreprise en informatique? Confession du chef de marque du studio Krasnodar Plarium</a></li>
<li><a href="../fr430524/index.html">Architecture de réseau de neurones</a></li>
<li><a href="../fr430526/index.html">Machines à sous: d'où viennent-elles en URSS et comment sont-elles arrangées</a></li>
<li><a href="../fr430528/index.html">Programmation avec PyUSB 1.0</a></li>
<li><a href="../fr430530/index.html">Serveur simulé pour l'automatisation des tests mobiles</a></li>
<li><a href="../fr430534/index.html">Création d'un modèle pour Zabbix en utilisant le DVR Trassir SDK comme exemple</a></li>
<li><a href="../fr430536/index.html">Conception de fonctions de fenêtre résumées en une unité avec un niveau donné de chevauchement</a></li>
<li><a href="../fr430538/index.html">Lisez-vous Scaladoc pour les méthodes de collecte «évidentes»? Ou pourquoi la paresse n'est pas toujours bonne</a></li>
<li><a href="../fr430542/index.html">Webinaire ouvert «Infrastructure en tant que code»</a></li>
<li><a href="../fr430546/index.html">"On pensait que le code serait remplacé par des diagrammes UML, mais il n'y a pas besoin de le tester": entretien avec Alexei Barantsev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>