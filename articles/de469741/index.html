<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍✈️ 🧙🏽 👲 Celestia: Bugs 'Adventures im Weltraum 👩🏾‍🤝‍👩🏻 📈 👨🏼‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Celestia ist ein dreidimensionaler Raumsimulator. Die Simulation des Raums ermöglicht die Erforschung unseres Universums in drei Dimensionen. Celestia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Celestia: Bugs 'Adventures im Weltraum</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/469741/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/230/63e/3b7/23063e3b758a73fe27fc09ff16f33c1b.png" alt="Bild 1"></div><br>  Celestia ist ein dreidimensionaler Raumsimulator.  Die Simulation des Raums ermöglicht die Erforschung unseres Universums in drei Dimensionen.  Celestia ist unter Windows, Linux und MacOS verfügbar.  Das Projekt ist sehr klein und PVS-Studio hat nur wenige Mängel festgestellt.  Trotz dieser Tatsache möchten wir darauf achten, da es sich um ein beliebtes Bildungsprojekt handelt und es ziemlich nützlich sein wird, es irgendwie zu verbessern.  Dieses Programm wird übrigens in populären Filmen, Serien und Programmen zur Darstellung von Raum verwendet.  Diese Tatsache stellt wiederum Anforderungen an die Codequalität. <br><a name="habracut"></a><br><h2>  Einführung </h2><br>  Die offizielle Website des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Celestia-</a> Projekts enthält eine detaillierte Beschreibung.  Der Quellcode ist auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> verfügbar.  Der Analysator überprüfte 166 CPP-Dateien mit Ausnahme von Bibliotheken und Tests.  Das Projekt ist klein, aber festgestellte Mängel sind bemerkenswert. <br><br>  Für die Quellcode-Analyse haben wir den statischen Code-Analysator <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PVS-Studio</a> verwendet.  Sowohl Celestia als auch PVS-Studio sind plattformübergreifend.  Wir haben das Projekt auf der Windows-Plattform analysiert.  Es war einfach, das Projekt zu erstellen, indem Abhängigkeiten mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vcpkg</a> - Microsoft Library Manager <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">abgerufen wurden</a> .  Laut Bewertungen ist es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Conans</a> Kapazitäten unterlegen, aber dieses Programm war auch recht bequem zu bedienen. <br><br><h2>  Analyseergebnisse </h2><br>  <b>Warnung 1</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V501</a> Links und rechts vom Operator '&lt;' befinden sich identische Unterausdrücke: b.nAttributes &lt;b.nAttributes cmodfix.cpp 378 <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&lt;(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Mesh::VertexDescription&amp; a, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Mesh::VertexDescription&amp; b) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a.stride &lt; b.stride) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b.stride &lt; a.stride) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a.nAttributes &lt; b.nAttributes) <span class="hljs-comment"><span class="hljs-comment">// &lt;= return true; if (b.nAttributes &lt; b.nAttributes) // &lt;= return false; for (uint32_t i = 0; i &lt; a.nAttributes; i++) { if (a.attributes[i] &lt; b.attributes[i]) return true; else if (b.attributes[i] &lt; a.attributes[i]) return false; } return false; }</span></span></code> </pre> <br>  Wie einfach es ist, beim Kopieren von Code einen Fehler zu machen.  Wir schreiben darüber in jeder Rezension.  Anscheinend kann in dieser Situation nur die statische Code-Analyse helfen. <br><br>  Der Programmierer hat den bedingten Ausdruck kopiert und nicht vollständig bearbeitet.  Die richtige Version ist höchstwahrscheinlich wie folgt: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a.nAttributes &lt; b.nAttributes) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b.nAttributes &lt; a.nAttributes) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br>  Eine interessante Recherche zu diesem Thema: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Das Böse in den Vergleichsfunktionen</a> ". <br><br>  <b>Warnung 2</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V575</a> Die Funktion 'memset' verarbeitet '0'-Elemente.  Untersuchen Sie das dritte Argument.  winmain.cpp 2235 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BuildScriptsMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HMENU menuBar, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fs::path&amp; scriptsDir)</span></span></span><span class="hljs-function"> </span></span>{ .... MENUITEMINFO info; <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(&amp;info, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(info), <span class="hljs-number"><span class="hljs-number">0</span></span>); info.cbSize = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(info); info.fMask = MIIM_SUBMENU; .... }</code> </pre> <br>  Der Code-Autor hat das zweite und dritte Argument der <i>Memset-</i> Funktion <i>verwechselt</i> .  Anstatt die Struktur mit Nullen zu füllen, heißt es, 0 Bytes Speicher zu füllen. <br><br>  <b>Warnung 3</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V595</a> Der Zeiger 'Ziele' wurde verwendet, bevor er gegen nullptr verifiziert wurde.  Überprüfen Sie die Zeilen: 48, 50. wintourguide.cpp 48 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">BOOL APIENTRY </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TourGuideProc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DestinationList* destinations = guide-&gt;appCore-&gt;getDestinations(); Destination* dest = (*destinations)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; guide-&gt;selectedDest = dest; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hwnd != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> &amp;&amp; destinations != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { .... } .... }</code> </pre> <br>  Der Zielzeiger wird zwei Zeilen dereferenziert, bevor er mit <i>NULL</i> verglichen wird.  Ein solcher Code kann möglicherweise zu einem Fehler führen. <br><br>  <b>Warnung 4</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V702-</a> Klassen sollten immer von std :: exception (und ähnlichem) als 'public' abgeleitet werden (es wurde kein Schlüsselwort angegeben, daher ist der Compiler standardmäßig 'private').  fs.h 21 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filesystem_error</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::system_error { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: filesystem_error(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::error_code ec, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* msg) : <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::system_error(ec, msg) { } }; <span class="hljs-comment"><span class="hljs-comment">// filesystem_error</span></span></code> </pre> <br>  Der Analysator hat die von der Klasse <i>std :: exception</i> geerbte Klasse über den <i>privaten</i> Modifikator (standardmäßig festgelegt) erkannt.  Eine solche Vererbung ist gefährlich, da die <i>Ausnahme std :: exception</i> aufgrund einer nicht öffentlichen Vererbung nicht abgefangen wird.  Infolgedessen verhalten sich Ausnahmebehandlungsroutinen nicht wie beabsichtigt. <br><br>  <b>Warnung 5</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V713</a> Der Zeiger 's' wurde im logischen Ausdruck verwendet, bevor er im selben logischen Ausdruck gegen nullptr verifiziert wurde.  winmain.cpp 3031 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">skipUntilQuote</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (*s != <span class="hljs-string"><span class="hljs-string">'"'</span></span> &amp;&amp; s != <span class="hljs-string"><span class="hljs-string">'\0'</span></span>) s++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s; }</code> </pre> <br>  In einem Teil des bedingten Ausdrucks hat der Programmierer vergessen, den Zeiger <i>s</i> zu dereferenzieren.  Es stellte sich heraus, dass es sich um einen Vergleich des Zeigers handelte, nicht um seinen Wert.  Und das macht in dieser Situation keinen Sinn. <br><br>  <b>Warnung 6</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V773</a> Die Funktion wurde beendet, ohne den Zeiger 'vertexShader' freizugeben.  Ein Speicherverlust ist möglich.  modelviewwidget.cpp 1517 <br><br><pre> <code class="cpp hljs">GLShaderProgram* ModelViewWidget::createShader(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ShaderKey&amp; shaderKey) { .... <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>* glShader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GLShaderProgram(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>* vertexShader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GLVertexShader(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!vertexShader-&gt;compile(vertexShaderSource.toStdString())) { qWarning(<span class="hljs-string"><span class="hljs-string">"Vertex shader error: %s"</span></span>, vertexShader-&gt;<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>().c_str()); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cerr</span></span> &lt;&lt; vertexShaderSource.toStdString() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> glShader; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; } .... }</code> </pre> <br>  Der Speicher wird vom <i>glShader-</i> Zeiger <i>freigegeben,</i> aber beim Verlassen der Funktion nicht vom <i>vertexShader-</i> Zeiger gelöscht. <br><br>  Ein ähnliches Fragment unten: <ul><li>  V773 Die Funktion wurde beendet, ohne den Zeiger 'fragmentShader' freizugeben.  Ein Speicherverlust ist möglich.  modelviewwidget.cpp 1526 </li></ul><br>  <b>Warnung 7</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V547</a> Ausdruck '! InputFilename.empty ()' ist immer wahr.  makexindex.cpp 128 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* argv[])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!parseCommandLine(argc, argv) || inputFilename.empty()) { Usage(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } istream* inputFile = &amp;<span class="hljs-built_in"><span class="hljs-built_in">cin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!inputFilename.empty()) { inputFile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ifstream(inputFilename, ios::in); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!inputFile-&gt;good()) { <span class="hljs-built_in"><span class="hljs-built_in">cerr</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Error opening input file "</span></span> &lt;&lt; inputFilename &lt;&lt; <span class="hljs-string"><span class="hljs-string">'\n'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } } .... }</code> </pre> <br>  Wiederholte Überprüfung des Vorhandenseins des Dateinamens.  Es ist kein Fehler, aber aufgrund der Tatsache, dass die Variable <i>inputFilename</i> bereits zu Beginn der Funktion überprüft wurde, kann die folgende Überprüfung entfernt werden, wodurch der Code kompakter wird. <br><br>  <b>Warnung 8</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V556</a> Die Werte verschiedener Aufzählungstypen werden verglichen: switch (ENUM_TYPE_A) {case ENUM_TYPE_B: ...}.  render.cpp 7457 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> LabelAlignment { AlignCenter, AlignLeft, AlignRight }; <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> LabelVerticalAlignment { VerticalAlignCenter, VerticalAlignBottom, VerticalAlignTop, }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Annotation</span></span></span><span class="hljs-class"> {</span></span> .... LabelVerticalAlignment valign : <span class="hljs-number"><span class="hljs-number">3</span></span>; .... }; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Renderer::renderAnnotations(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (annotations[i].valign) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> AlignCenter: vOffset = -font[fs]-&gt;getHeight() / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> VerticalAlignTop: vOffset = -font[fs]-&gt;getHeight(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> VerticalAlignBottom: vOffset = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } .... }</code> </pre> <br>  Aufzählungswerte werden im Switch-Operator verwechselt.  Aus diesem Grund werden Aufzählungen verschiedener Typen in einem Fragment verglichen: <i>LabelVerticalAlignment</i> und <i>AlignCenter</i> . <br><br>  <b>Warnung 9</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V581</a> Die bedingten Ausdrücke der nebeneinander angeordneten if-Anweisungen sind identisch.  Überprüfen Sie die Zeilen: 2844, 2850. shadermanager.cpp 2850 <br><br><pre> <code class="cpp hljs">GLVertexShader* ShaderManager::buildParticleVertexShader(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ShaderProperties&amp; props) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (props.texUsage &amp; ShaderProperties::PointSprite) { source &lt;&lt; <span class="hljs-string"><span class="hljs-string">"uniform float pointScale;\n"</span></span>; source &lt;&lt; <span class="hljs-string"><span class="hljs-string">"attribute float pointSize;\n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (props.texUsage &amp; ShaderProperties::PointSprite) { source &lt;&lt; DeclareVarying(<span class="hljs-string"><span class="hljs-string">"pointFade"</span></span>, Shader_Float); } .... }</code> </pre> <br>  Der Analysator hat zwei identische bedingte Ausdrücke hintereinander erkannt.  Es wurde entweder ein Fehler gemacht oder zwei Bedingungen können zu einer kombiniert werden, wodurch der Code einfacher wird. <br><br>  <b>Warnung 10</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V668</a> Es macht keinen Sinn, den 'dp'-Zeiger gegen null zu testen, da der Speicher mit dem' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">new'</a> -Operator zugewiesen wurde.  Die Ausnahme wird bei einem Speicherzuordnungsfehler generiert.  windatepicker.cpp 625 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> LRESULT </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DatePickerCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HWND hwnd, CREATESTRUCT&amp; cs)</span></span></span><span class="hljs-function"> </span></span>{ DatePicker* dp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DatePicker(hwnd, cs); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dp == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; .... }</code> </pre> <br>  Der Wert des vom <i>neuen</i> Operator zurückgegebenen Zeigers wird mit null verglichen.  Wenn der Operator keinen Speicher zuordnen konnte, wird gemäß dem C ++ - Standard eine Ausnahme <i>std :: bad_alloc ()</i> ausgelöst.  Dann ist die Prüfung auf Null sinnlos. <br><br>  Drei weitere ähnliche Prüfungen: <br><br><ul><li>  V668 Es macht keinen Sinn, den Zeiger 'Modi' gegen Null zu testen, da der Speicher mit dem Operator 'Neu' zugewiesen wurde.  Die Ausnahme wird bei einem Speicherzuordnungsfehler generiert.  winmain.cpp 2967 </li><li>  V668 Es macht keinen Sinn, den 'dropTarget'-Zeiger gegen null zu testen, da der Speicher mit dem' new'-Operator zugewiesen wurde.  Die Ausnahme wird bei einem Speicherzuordnungsfehler generiert.  winmain.cpp 3272 </li><li>  V668 Es macht keinen Sinn, den 'appCore'-Zeiger gegen null zu testen, da der Speicher mit dem' new'-Operator zugewiesen wurde.  Die Ausnahme wird bei einem Speicherzuordnungsfehler generiert.  winmain.cpp 3352 </li></ul><br>  <b>Warnung 11</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V624</a> Die Konstante 3.14159265 wird verwendet.  Der resultierende Wert kann ungenau sein.  Erwägen Sie die Verwendung der M_PI-Konstante aus &lt;math.h&gt;.  3dstocmod.cpp 62 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* argv[])</span></span></span><span class="hljs-function"> </span></span>{ .... Model* newModel = GenerateModelNormals(*model, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>(smoothAngle * <span class="hljs-number"><span class="hljs-number">3.14159265</span></span> / <span class="hljs-number"><span class="hljs-number">180.0</span></span>), weldVertices, weldTolerance); .... }</code> </pre> <br>  Die Diagnose ist optional, aber in diesem Fall ist es besser, die vorgefertigte Konstante für die Pi-Nummer aus der Standardbibliothek zu verwenden. <br><br><h2>  Fazit </h2><br>  Vor kurzem wurde das Projekt von Enthusiasten entwickelt, ist aber immer noch beliebt und in den Trainingsprogrammen gefragt.  Es gibt Tausende von Addons mit unterschiedlichen Weltraumobjekten im Internet.  Celestia wurde in dem Film " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">The Day After Tomorrow</a> " und der Dokumentarserie " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Through the Wormhole with Morgan Freeman</a> " verwendet. <br><br>  Wir freuen uns, dass wir durch die Überprüfung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verschiedener</a> Projekte mit Open Source-Code nicht nur die statische Code-Analysemethode fördern, sondern auch zur Entwicklung von Open Source-Projekten beitragen.  Übrigens können Sie mit dem PVS-Studio-Analysegerät nicht nur Ihre eigenen, sondern auch Projekte von Drittanbietern als Enthusiasten testen.  Zu diesem Zweck können Sie eine der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Optionen</a> der kostenlosen Lizenzierung verwenden. <br><br>  Verwenden Sie statische Code-Analysatoren, um Ihre Projekte zuverlässiger und besser zu machen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469741/">https://habr.com/ru/post/de469741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469731/index.html">Behandeln von ASP.NET-Ausnahmen mit IRO.Mvc.MvcExceptionHandler</a></li>
<li><a href="../de469733/index.html">RC Cars: Erstkäufe - Fahrwerk und Antriebsstrang</a></li>
<li><a href="../de469735/index.html">Algorithmus zur Berechnung der Wurzel des n-ten Grades aus einer beliebigen positiven Zahl</a></li>
<li><a href="../de469737/index.html">Holzspielzeug, Fünfter Teil - 1991</a></li>
<li><a href="../de469739/index.html">Holzspielzeug, Teil Sechs - 1992</a></li>
<li><a href="../de469743/index.html">Celestia: Die Abenteuer der Käfer im Weltraum</a></li>
<li><a href="../de469745/index.html">14.-15. Oktober: Bootcamp des globalen Blockchain-Projekts Hyperledger zum ersten Mal in Moskau</a></li>
<li><a href="../de469747/index.html">Oktober IT Event Digest (Teil 1)</a></li>
<li><a href="../de469749/index.html">UX mit der Tabulatortaste verbessern</a></li>
<li><a href="../de469753/index.html">Die 9 besten Open Source-Funde für September 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>