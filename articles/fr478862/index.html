<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíó ü§∞üèΩ ü§∂üèæ Comment les tests frontaux sont-ils organis√©s dans Yandex.Market et pourquoi nous refusons les versions hebdomadaires üë©üèΩ‚Äçüé§ ‚òéÔ∏è ü§∂üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous, je m'appelle Sergey. Je teste le frontend Yandex.Market. Je sais que parmi les lecteurs de Habr, il existe de nombreux sp√©cialistes in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment les tests frontaux sont-ils organis√©s dans Yandex.Market et pourquoi nous refusons les versions hebdomadaires</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/478862/"><img src="https://habrastorage.org/webt/dh/z6/nh/dhz6nhsvrc4fhyicfnofz4tgizu.png"><br><br>  Bonjour √† tous, je m'appelle Sergey.  Je teste le frontend Yandex.Market.  Je sais que parmi les lecteurs de Habr, il existe de nombreux sp√©cialistes informatiques qui sont en quelque sorte li√©s au processus de publication et aux tests.  J'ai une question pour toi.  Est-il d√©j√† arriv√© dans votre pratique que les fonctionnalit√©s ne tournent pas longtemps en production?  Connaissez-vous les rejets gonfl√©s et leurs contr√¥les volum√©triques? <br><br>  Je pense que tout le monde avait √ßa.  Je suis arriv√© chez Yandex il y a 3 ans, notre √©quipe √©tait tr√®s jeune, les processus n'√©taient pas compl√®tement √©tablis.  Et j'ai rencontr√© ces probl√®mes face √† face. <br><a name="habracut"></a><br><h2>  Comme c'√©tait </h2><br><img src="https://habrastorage.org/webt/ps/hh/7v/pshh7vfmiswwwmjoznesp1rzrjw.png"><br><br>  √Ä cette √©poque, nos √©quipes produits n'avaient pas de domaine de responsabilit√© sp√©cifique et n'√©taient engag√©es que dans le projet pour lequel elles avaient √©t√© cr√©√©es.  Puis ils se sont effondr√©s.  Les tests n'√©taient pas non plus li√©s aux √©quipes de d√©veloppement.  Il existait en tant que service et connect√© au projet selon les besoins. <br><br>  Les t√¢ches n'√©taient v√©rifi√©es qu'√† la main, les tests d'int√©gration √©taient instables, le pourcentage de couverture avec les autotests √©tait faible.  Le contr√¥le a dur√© tr√®s longtemps.  Le pool de t√¢ches pr√™tes pour le calcul √©tait en constante augmentation et pouvait atteindre des tailles √©normes. <br><br>  En ce qui concerne les versions, l'un des directeurs s'est occup√© du montage et du calcul.  Nous avons tenu des r√©unions avec tous les managers et d√©cid√© de ce qui tomberait dans la prochaine version et de ce qui pourrait √™tre report√©. <br><br>  Ils ont v√©rifi√© les communiqu√©s au hasard: celui qui a eu le temps de les v√©rifier, il les a v√©rifi√©s.  L'accent √©tait mis sur les tests de r√©gression manuels, qui pouvaient durer plusieurs jours.  Et cela malgr√© le fait que la version a lanc√© un pack d'autotests et qu'un d√©partement les a √©crits et pris en charge. <br><br>  Ainsi, le probl√®me r√©solu est tomb√© dans les tests et pourrait √™tre test√© jusqu'√† 2 jours.  Ensuite, elle est entr√©e dans la version, elle a √©t√© v√©rifi√©e pendant 4 jours suppl√©mentaires.  En prod, la t√¢che s'est av√©r√©e au mieux en une semaine.  Peu de gens l'ont aim√©, il a fallu changer quelque chose.  Et la chose la plus importante √† changer est les processus. <br><br><h2>  Contour </h2><br><img src="https://habrastorage.org/webt/v6/wf/hv/v6wfhvlpocaorazppkobsajkmee.png"><br><br>  La premi√®re chose que nous avons faite a √©t√© d'introduire une division en contours - des √©quipes de sp√©cialistes de divers domaines.  Contrairement aux √©quipes pr√©c√©dentes, les contours ne se d√©composent pas apr√®s la fin du projet.  Ils continuent de g√©n√©rer de nouveaux projets et id√©es dans leur domaine de responsabilit√©. <br><br>  De 1 √† 3 testeurs sont responsables des tests dans chaque circuit.  Chaque testeur de circuit responsable est pr√©sent √† toutes les √©tapes du d√©veloppement du produit, de l'id√©e au d√©briefing. <br><br><h2>  En service </h2><br>  Pour structurer le travail des versions, nous avons introduit deux r√¥les dans notre √©quipe de test: le ma√Ætre des versions et le testeur des versions.  En tant que ma√Ætre de la lib√©ration, nous avons 4 testeurs en service √† la fois, tout le monde est impliqu√© dans la t√¢che de lib√©ration.  Pour chacun de ces r√¥les, nous avons organis√© un horaire de service. <br><br>  Les t√¢ches qui surviennent pendant le service ont priorit√© sur le test des fonctionnalit√©s du produit dans les circuits.  Pour que les testeurs n'aient pas √† attendre longtemps sans interruption, le devoir de lib√©ration est organis√© comme suit: un quart est en service du lundi au mercredi, le second - du mercredi √† la fin du vendredi.  Dans chaque quart de travail - 4 personnes, 2 personnes par plate-forme. <br><br><h2>  La documentation </h2><br>  Et la documentation?  Nous n'en avons pas beaucoup, mais √ßa l'est.  Par exemple, lors du d√©ploiement de fonctionnalit√©s, nous d√©terminons avec les d√©veloppeurs et le gestionnaire le nombre optimal d'autotests.  Si nous ne pouvons pas automatiser quelque chose, ou si une fonctionnalit√© n√©cessite une publication imm√©diate sans autotests, nous √©crivons un cas dans la suite de tests de tous les cas de v√©rification du march√© et, si n√©cessaire, nous l'incluons dans la suite de tests de publication des tests de r√©gression. <br><br>  Si nous v√©rifions les correctifs de bogues et constatons que l'autotest n'a pas √©t√© √©crit sur le bogue, nous d√©finissons √©galement la t√¢che pour le d√©velopper, et l'√©dition commence imm√©diatement avec le test √©crit dessus. <br><br>  Lors de la pr√©sentation de chaque exp√©rience, nous avons une liste de contr√¥le, car nous ne savons pas √† l'avance si l'exp√©rience r√©ussira. <br><br><img src="https://habrastorage.org/webt/qv/eg/b7/qvegb7zf6jtgni5am5d5iymv43u.png"><br><br>  Une liste de contr√¥le est un ensemble de contr√¥les positifs sur les caract√©ristiques d'une exp√©rience.  Le testeur de versions l'utilise avec chaque version pendant que l'exp√©rience fonctionne.  Cette liste de contr√¥le peut √©galement √™tre vierge pour les futures t√¢ches d'automatisation si l'exp√©rience r√©ussit et que nous la d√©ployons √† 100% des utilisateurs. <br><br>  Lors de la v√©rification des versions, nous utilisons diff√©rents kits de test en fonction de la complexit√© et de la pl√©nitude de la version.  Nous avons √† la fois de petites suites de tests et des suites avec le nombre maximum de cas de test.  Quelle suite de tests utiliser, le testeur de versions d√©cide. <br><br>  Dans certains domaines, nous utilisons √©galement la liste de contr√¥le des contr√¥les positifs pour les d√©veloppeurs.  Avec lui, le d√©veloppeur peut v√©rifier lui-m√™me la t√¢che et pr√©voir des goulots d'√©tranglement dans le d√©veloppement des fonctionnalit√©s.  Si le testeur a chang√© de projet, cela aidera le nouveau sp√©cialiste √† rejoindre rapidement le projet.  Les listes de contr√¥le sont √©crites avant le d√©but du d√©veloppement, imm√©diatement apr√®s la planification de la t√¢che. <br><br><img src="https://habrastorage.org/webt/gc/7k/8p/gc7k8pst8ctac9kvorihwqoint4.png"><br><br>  C'est tout pour les quais. <br><br><h2>  Comment nous testons les t√¢ches </h2><br>  Nous utilisons diverses techniques de conception de tests: classes d'√©quivalence, valeurs limites, tests par paires, sc√©narios utilisateur.  L'expertise du testeur est √©galement tr√®s importante.  Le march√© est une grosse machine, et vous devez savoir comment fonctionnent toutes ses pi√®ces pour r√©parer ou am√©liorer quelque chose.  Par exemple, nous avons 4 types de cartes de produits et 6 types de probl√®mes de produits.  Sans le savoir, il est tout simplement impossible de tester qualitativement la t√¢che de modification de ces pages. <br><br>  Les autotests jouent un r√¥le important dans la v√©rification des t√¢ches.  Nous ex√©cutons des autotests fonctionnels pour chaque t√¢che que nous impl√©mentons, analysons les plantages et signalons les bogues. <br><br><img src="https://habrastorage.org/webt/gq/io/vj/gqiovjyxvl0m32wjxtu81weo7wg.png"><br><br>  Dans des cas particuliers, lorsque la t√¢che affecte de nombreux composants du march√©, nous ex√©cutons √©galement des tests d'√©cran - ils nous aident √† d√©tecter les bogues. <br><br><img src="https://habrastorage.org/webt/d4/5s/fo/d45sfouziah0uw6ndaf2wx-6vyy.png"><br><br>  Lorsque la v√©rification de la t√¢che est termin√©e, nous laissons un commentaire indiquant que tout va bien et que la t√¢che peut √™tre mise √† disposition.  Dans le commentaire, nous indiquons combien de tests ont √©t√© √©crits, ou nous disons que les tests ne sont pas n√©cessaires, et nous traduisons la t√¢che en statut ¬´en attente de publication¬ª. <br><br>  Ensuite, la t√¢che est r√©cup√©r√©e par l'assistant de version et envoy√©e √† la version avec d'autres t√¢ches √©prouv√©es.  Nous essayons de remplir les versions avec des t√¢ches afin de les faire v√©rifier en 8 heures par les mains de 4 testeurs: 2 pour la version tactile du Market et 2 pour la version de bureau.  Notre objectif est de d√©ployer au moins 5 versions.  Autrement dit, la vitesse de livraison de la t√¢che au prod par rapport √† ce qu'elle √©tait, a √©t√© multipli√©e par 5. <br><br><h2>  Comment nous v√©rifions les communiqu√©s </h2><br>  Nous commen√ßons √† v√©rifier la version en v√©rifiant les tests automatiques et les tests d'√©cran.  Apr√®s avoir examin√© les rapports, nous pouvons imm√©diatement d√©tecter jusqu'√† 90% des probl√®mes.  Nous analysons le crash des tests: s'ils sont li√©s √† un bug ou cass√©s par un ticket dans la release, nous recherchons la t√¢che dans laquelle ce crash est reproduit, et demandons √† √™tre r√©par√©.  Si cela n'est pas fait, la t√¢che ne tombe pas dans la version. <br><br>  Les tests peuvent √©galement mourir d'eux-m√™mes.  Dans ce cas, nous d√©sactivons le test √† partir de l'ex√©cution de l'autotest et commen√ßons la t√¢che de le r√©parer et de cr√©er le mox si n√©cessaire. <br><br>  Selon les t√¢ches de la version, nous pouvons utiliser le kit de test de version compl√®te ou refuser compl√®tement la r√©gression manuelle.  La d√©cision est prise par les testeurs de versions. <br><br>  Si la version comporte plusieurs petites modifications, la v√©rification des t√¢ches est effectu√©e localement et la r√©gression manuelle est remplac√©e par la v√©rification des rapports de test automatique. <br><br>  Ind√©pendamment de l'exhaustivit√© de la version et des t√¢ches, l'√©quipe de testeurs de versions v√©rifie les exp√©riences qui sont actuellement pr√©sent√©es √† diff√©rents pourcentages d'utilisateurs en production.  Une liste de contr√¥le √©crite par un testeur exp√©rimental est utilis√©e. <br><br>  Lorsque toutes les v√©rifications sont termin√©es, le testeur de versions laisse un commentaire o√π il r√©pertorie toutes les activit√©s de versions et, si n√©cessaire, √©crit des t√¢ches pour corriger les tests cass√©s. <br><br><img src="https://habrastorage.org/webt/m0/6f/4p/m06f4pyixg0yoliq2bxpwebwqa8.png"><br><br>  Le responsable de la version analyse les rapports de tir (test de charge) et, s'il constate une augmentation des erreurs, les red√©marre.  Si cela n'aide pas, il cherche le coupable ou demande l'aide du d√©veloppeur en service. <br><br>  Si tout va bien avec les r√©sultats de la prise de vue, l'assistant de version ouvre les graphiques du march√© et commence √† d√©ployer la version en production.  Les graphiques doivent √™tre surveill√©s afin de ne pas manquer la croissance des erreurs. <br><br><img src="https://habrastorage.org/webt/lm/mv/-t/lmmv-tpvnzoevlhuxtup9g-2wje.png"><br><br>  Si la version est √† bl√¢mer pour la croissance des erreurs, le responsable de la version annule et comprend les raisons.  Si les plannings sont normaux, il termine la version et commence √† en collecter une nouvelle √† partir de t√¢ches pr√©d√©finies. <br><br><h2>  Viser le meilleur </h2><br>  Malgr√© le fait que tout fonctionne bien, vous devez toujours viser le meilleur.  Nous sommes sur le point d'une future livraison continue plus lumineuse, o√π les t√¢ches seront test√©es et d√©ploy√©es en production parall√®lement les unes aux autres, sans √©tape interm√©diaire sous forme de release.  Cela vous permettra de ne pas √™tre distrait par la surveillance des versions et d'acc√©l√©rer consid√©rablement la fourniture de fonctionnalit√©s aux utilisateurs. <br><br><img src="https://habrastorage.org/webt/s-/vj/hj/s-vjhj21amhpeay9yblz52t0fv8.png"><br><br>  Nous avons d√©cid√© de passer au CD par √©tapes.  La premi√®re √©tape a √©t√© l'introduction d'un mono-r√©f√©rentiel, qui combine le d√©ploiement de fonctionnalit√©s sur les deux plates-formes - tactile et de bureau - en une seule version.  Cette approche pr√©sente des avantages pour le d√©veloppement et les tests.  Nous passons beaucoup moins de temps √† tester le composant.  Les t√¢ches sont d√©sormais au m√™me endroit, ce qui facilite la navigation.  Il est plus facile pour le gestionnaire de naviguer, car il conna√Æt le moment exact du d√©ploiement de la t√¢che de publication dans le prod, et il n'y a pas de jeu entre le d√©ploiement des plates-formes. <br><br>  La prochaine √©tape du CD sera l'introduction de la ¬´plaie verte¬ª.  Pour chaque ticket v√©rifi√© par le testeur, 2 types de tests seront lanc√©s pour les deux plateformes: tests fonctionnels et tests d'√©cran.  Tous les tests devront avoir moki.  Si les tests pour l'une des plates-formes √©chouent, la t√¢che ne sera pas consid√©r√©e comme v√©rifi√©e.  Si le test se bloque, vous devrez comprendre pourquoi cela s'est produit.  Ce n'est qu'en l'absence de tests de chute et de r√©ussite de tous les contr√¥les que la t√¢che sera envoy√©e au prod. <br><br>  Merci de votre attention.  J'esp√®re que notre exp√©rience vous a √©t√© utile, je vous attends dans les commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr478862/">https://habr.com/ru/post/fr478862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr478850/index.html">Attribution d'un nom √† une grille CSS</a></li>
<li><a href="../fr478852/index.html">Introduction √† GitOps pour OpenShift</a></li>
<li><a href="../fr478854/index.html">La bataille des serveurs web. Partie 1 - HTTP dissoci√© de la r√©alit√©:</a></li>
<li><a href="../fr478856/index.html">SD-WAN - tendances r√©centes et pr√©visions pour 2020</a></li>
<li><a href="../fr478858/index.html">Comparaison des sessions de profilage dans XHProf Admin</a></li>
<li><a href="../fr478866/index.html">Meet Space - Nouveau produit de JetBrains</a></li>
<li><a href="../fr478872/index.html">DIY: comment automatiser la surveillance des entrep√¥ts</a></li>
<li><a href="../fr478874/index.html">Toshiba a annonc√© deux nouvelles gammes de disques durs avec des capacit√©s allant jusqu'√† 6 To et a annonc√© sa concentration sur le segment des entreprises depuis 2020</a></li>
<li><a href="../fr478878/index.html">Le morceau de code le plus populaire de l'histoire de StackOverflow a un bug!</a></li>
<li><a href="../fr478880/index.html">Quels salaires les employeurs ont-ils propos√©s aux informaticiens au second semestre 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>