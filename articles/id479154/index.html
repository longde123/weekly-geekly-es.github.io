<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ• ğŸŒ¶ï¸ âœ‹ğŸ» Masih bertengkar atau cukup? ğŸšµğŸ¾ ğŸ› ğŸ‘°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di hampir setiap permainan kartu setelah permainan, Anda perlu mengocok kartu. Sementara saya mengocok kartunya, pertanyaan selalu muncul di hadapan s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Masih bertengkar atau cukup?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479154/"><p>  Di hampir setiap permainan kartu setelah permainan, Anda perlu mengocok kartu.  Sementara saya mengocok kartunya, pertanyaan selalu muncul di hadapan saya: "Sudah cukup?"  Ini adalah pertanyaan serius - saya tidak ingin menghabiskan terlalu banyak waktu, dan bermain di geladak yang dibebankan juga tidak menyenangkan. </p><br><p>  Artikel itu akan membahas situasinya. </p><br><p><img src="https://habrastorage.org/webt/1f/jr/j0/1fjrj0fik5hz0_sutvs8l8ivslk.png"></p><a name="habracut"></a><br><h1 id="sposob-tasovki">  Cara Acak </h1><br><p>  Ada cara-cara keren untuk mengacak kartu, mengacak, misalnya. </p><br><p><img src="https://habrastorage.org/webt/06/i0/fg/06i0fgihatsikx540npg4jgdjeu.gif"></p><br><p>  Saya tidak tahu caranya, dan kartu kardus tidak dapat dikocok seperti itu, jadi saya mengocoknya dengan cara yang sederhana, tampilannya seperti ini: </p><br><p><img src="https://habrastorage.org/webt/x-/sh/wb/x-shwbmeltwucazqwbviaadr3le.gif"></p><br><p>  Pertama, saya memisahkan bagian dari dek, kemudian saya membuang bagian ini ke sisi lain, dan kemudian saya melaporkan bagian yang tersisa.  Menurut pengamatan saya, orang mengocok kartu persis seperti ini atau dekat dengannya.  Secara umum, ini dapat dibagi menjadi sejumlah besar bagian, tetapi ini sudah detail.  Dalam artikel ini kita akan menganalisis metode acak ini. </p><br><h1 id="chto-takoe-sluchaynaya-raskladka-kart">  Apa itu tata letak kartu acak? </h1><br><p>  Hal pertama yang terpikir oleh saya adalah tata letaknya yang baik, kartu apa pun bisa berada di posisi ke-i. </p><br><p>  Tetapi ini tidak cukup.  Misalnya, jika Anda memotong dek - membaginya menjadi dua di tempat acak dan menukar mereka - maka kartu pertama akan sama-sama mungkin ada.  Tetapi pada saat yang sama, ini jelas tata letak yang buruk: setelah masing-masing kartu, kecuali beberapa, kartu yang sama akan pergi yang meletakkan setelah itu sebelum "memotong".  Artinya, pemain akan menerima kartu "berkorelasi".  Dalam kasus orang bodoh, yang satu akan dipukuli, dan yang lain akan dipukuli, dan ini tidak akan disengaja. </p><br><p>  Pendekatan lain untuk menentukan tata letak yang baik adalah bahwa di tempat i + 1 ada kartu yang terpisah dari kartu di tempat ke-i.  Anda dapat membayangkannya seperti ini: jika Anda melihat kartu paling atas dari kartu, Anda tidak dapat menebak kartu mana yang akan berikutnya. </p><br><p>  Pendekatan ini mungkin juga memiliki masalah yang diselesaikan dengan mempertimbangkan distribusi bersama yang besar, tetapi untuk analisis saat ini akan sangat cocok untuk kita. </p><br><h1 id="kak-izmeryat-horoshest-raskladki">  Bagaimana mengukur "kebaikan" dari tata letak </h1><br><p>  Kami mengambil deck yang tersisa dari game sebelumnya.  Kami menomori semua kartu secara berurutan.  Situasi yang buruk adalah ketika setelah mengocok di beberapa tempat setelah kartu dengan nomor i ada kartu dengan nomor i +1.  Oleh karena itu, kami akan mengukur proporsi kartu yang berurutan setelah pengocokan. </p><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> c_next = <span class="hljs-number"><span class="hljs-number">0</span></span> c_total = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>): c_total += <span class="hljs-number"><span class="hljs-number">1</span></span> c_next += a[i] == (a[i+<span class="hljs-number"><span class="hljs-number">1</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c_next * <span class="hljs-number"><span class="hljs-number">1.0</span></span> / c_total</code> </pre> <br><p>  Jelas bahwa meskipun dalam tumpukan yang dikocok dengan baik, beberapa kartu akan jatuh secara berurutan.  Bagian mereka akan rata-rata 1 / (n-1), di mana n adalah jumlah kartu di dek. </p><br><div class="spoiler">  <b class="spoiler_title">Bukti</b> <div class="spoiler_text"><p>  E (jumlah ($ a <em>i = a</em> {i + 1} $ untuk i = 0 .. (n-1)) / (n-1)) = jumlah (E ($ a <em>i = a</em> {i + 1} $ ) untuk i = 0 .. (n-1)) / (n-1) - karena linearitas mat.  harapan. <br>  Dan karena E ($ a <em>i = a</em> {i + 1} $) = 1 / (n-1), maka ungkapan ini = (n-1) * 1 / (n-1) / (n-1) = 1 / (n-1) </p></div></div><br><h1 id="rezultaty">  Hasil </h1><br><p>  Kami menghitung probabilitas kartu berturut-turut untuk setumpuk 52 kartu, tergantung pada jumlah iterasi pencampuran. </p><br><p><img src="https://habrastorage.org/webt/ze/sx/xo/zesxxoslh-gdjq1p4yq3qkcpdwa.png"></p><br><p>  Grafik menunjukkan bahwa bahkan setelah ratusan iterasi, probabilitas kartu berurutan adalah sekitar dua kali lebih tinggi dari probabilitas ideal. </p><br><div class="spoiler">  <b class="spoiler_title">Kode untuk merencanakan</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">two_split_shuffle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> s1 = random.randint(<span class="hljs-number"><span class="hljs-number">1</span></span>,len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>) s2 = random.randint(<span class="hljs-number"><span class="hljs-number">1</span></span>,len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>) s_min = min(s1, s2) s_max = max(s1, s2) p1 = a[:s_min] p2 = a[s_min:s_max] p3 = a[s_max:] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p3 + p2 + p1 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shuffle_n</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, f, n)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n): a = f(a) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> c_next = <span class="hljs-number"><span class="hljs-number">0</span></span> c_total = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>): c_total += <span class="hljs-number"><span class="hljs-number">1</span></span> c_next += a[i] == (a[i+<span class="hljs-number"><span class="hljs-number">1</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c_next * <span class="hljs-number"><span class="hljs-number">1.0</span></span> / c_total <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f, n = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">100</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> s = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n): s += f() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s / n <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_expected_next_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(shuf, n, cards)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> expected(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span>: next_stat(shuffle_n(range(cards), shuf, n))) cards = <span class="hljs-number"><span class="hljs-number">52</span></span> x = range(<span class="hljs-number"><span class="hljs-number">100</span></span>) y = map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> i: get_expected_next_stat(two_split_shuffle, i, cards), x) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt %matplotlib inline plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>)) plt.plot(x, y, label = <span class="hljs-string"><span class="hljs-string">u'       3'</span></span>) plt.plot(x, [<span class="hljs-number"><span class="hljs-number">1.</span></span>/(cards<span class="hljs-number"><span class="hljs-number">-1</span></span>)] * len(x), label = <span class="hljs-string"><span class="hljs-string">u' '</span></span>) plt.grid() plt.legend()</code> </pre> </div></div><br><p>  Secara umum, kita dapat mengasumsikan bahwa 60 iterasi adalah jumlah optimal, lebih sedikit pasti buruk.  Saya melakukan sekitar 16-17 iterasi dalam 30 detik.  Ini berarti bahwa untuk pengocokan normal <strong>akan memakan waktu hampir dua menit</strong> . </p><br><p>  Teman-teman saya dan saya tidak pernah mengocok kartu sebanyak itu.  Dan ini berarti bahwa game kami sangat dipengaruhi oleh keseimbangan dari game terakhir. </p><br><p>  Hati-hati :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479154/">https://habr.com/ru/post/id479154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id479142/index.html">Bagaimana cara mendapatkan elemen dari pohon biner dengan indeks dalam jumlah waktu yang wajar?</a></li>
<li><a href="../id479144/index.html">Apakah saya perlu mendaftarkan merek saya</a></li>
<li><a href="../id479146/index.html">Perbandingan alat pintas \ VPN</a></li>
<li><a href="../id479150/index.html">Robot pertanian semakin maju</a></li>
<li><a href="../id479152/index.html">Bereaksi dan Vue tanpa npm dan build</a></li>
<li><a href="../id479156/index.html">ESP32 + Arduino Core + FreeRTOS + Blynk = rumah dengan awal pikiran</a></li>
<li><a href="../id479158/index.html">7 prinsip dasar ITIL</a></li>
<li><a href="../id479162/index.html">Auroras di planet tata surya</a></li>
<li><a href="../id479164/index.html">Apa itu EEG dan mengapa itu perlu</a></li>
<li><a href="../id479166/index.html">Menulis modul kedaluwarsa capped Anda untuk tarantool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>