<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§üüèø ü§¢ üßëüèª N√£o tenha medo do microsservi√ßo: Alexey Baitov sobre o uso da arquitetura de microsservi√ßo na pr√°tica üç´ üí§ üë©üèø‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para alguns, microsservi√ßos √© a capacidade de refazer e refatorar um aplicativo para um estilo relativamente moderno. Essa solu√ß√£o arquitetural n√£o √© ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>N√£o tenha medo do microsservi√ßo: Alexey Baitov sobre o uso da arquitetura de microsservi√ßo na pr√°tica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/418941/"> Para alguns, microsservi√ßos √© a capacidade de refazer e refatorar um aplicativo para um estilo relativamente moderno.  Essa solu√ß√£o arquitetural n√£o √© adequada para outras pessoas devido √†s peculiaridades da intera√ß√£o de v√°rias partes do aplicativo.  De qualquer forma, escolhendo uma arquitetura, √© √∫til estudar a experi√™ncia de outras pessoas, desde a transi√ß√£o de um mon√≥lito para um conjunto de servi√ßos. <br><br>  Pedimos para compartilhar nosso estudo de caso do desenvolvimento e fornecimento de microsservi√ßos Alexei Baitov, engenheiro l√≠der do 2GIS.  Vamos falar sobre solu√ß√µes arquitet√¥nicas, implanta√ß√£o e escalabilidade.  Vamos perguntar sobre tend√™ncias e apenas ferramentas convenientes para o trabalho. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f87/346/860/f8734686085fb6cf3580ff6fa636e8bf.jpg"><br><a name="habracut"></a><br>  <b>- Alexey, conte-nos um pouco sobre voc√™ e sobre sua equipe no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2GIS</a> .</b>  <b>No que voc√™ est√° trabalhando agora?</b> <br><br><img src="https://habrastorage.org/webt/gk/aa/_8/gkaa_8zwcfej8txrfq901zub1qs.jpeg" align="left">  Eu vim para a TI em 2003 como administrador de sistemas, mergulhei no desenvolvimento em 2011.  Durante esse per√≠odo, ele trabalhou em PHP, JavaScript, implementou uma s√©rie de servi√ßos RESTful e um driver Python para o Git.  Trabalho no 2GIS desde 2015. <br><br>  Ele participou do desenvolvimento de duas arquiteturas de microsservi√ßo.  O primeiro consistia em um servi√ßo.  Era um proxy reverso ass√≠ncrono com um cache.  Na verdade, ele estava envolvido no envio de mensagens.  Eu era o √∫nico envolvido na elabora√ß√£o dos requisitos, no desenvolvimento e na cria√ß√£o de DevOps, mas os especialistas da nossa empresa 2GIS me ajudaram. <br><br>  O servi√ßo foi escrito em Go.  A compila√ß√£o r√°pida me permitiu n√£o esperar e pude me concentrar na Implanta√ß√£o Cont√≠nua.  Ent√£o est√°vamos come√ßando a usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitLab CI</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Prometheus</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Grafana</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Deis</a> (an√°logo de c√≥digo aberto do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Heroku</a> ).  Temos uma equipe de infraestrutura e opera√ß√µes que, no momento do meu desenvolvimento, trouxe todas essas solu√ß√µes de infraestrutura para o n√≠vel pronto para produ√ß√£o.  Decidi tentar tudo isso e implementei com sucesso um microsservi√ßo independente. <br><br>  H√° dois anos, mudei para outra equipe em um novo projeto, onde comecei a me engajar em programa√ß√£o funcional no Scala.  Nossa equipe do zero desenvolveu uma arquitetura de microsservi√ßo para o armazenamento de materiais de publicidade 2GIS em Scala, C # e JavaScript.  Estabeleci a base de todos os servi√ßos com as ferramentas e a experi√™ncia obtidas na constru√ß√£o de pr√°ticas de DevOps (implanta√ß√£o e manuten√ß√£o cont√≠nuas).  A arquitetura passou de prot√≥tipo para opera√ß√£o industrial.  Ela absorveu dois mon√≥litos, agora consiste em 15 servi√ßos e est√° em constante expans√£o. <br><br>  <b>- Voc√™ concorda que os microsservi√ßos s√£o essencialmente um conjunto de servi√ßos implantados de forma independente e que possuem caracter√≠sticas comuns, ou seja, um conjunto de determinados recursos oferece a apar√™ncia de um microsservi√ßo?</b>  <b>Essa defini√ß√£o precisa ser expandida?</b>  <b>Ou, de fato, as empresas t√™m um entendimento diferente da arquitetura de microsservi√ßos?</b> <br><br>  Eu gosto da seguinte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">defini√ß√£o</a> .  A arquitetura de microsservi√ßo √© um estilo de arquitetura que estrutura um aplicativo como uma cole√ß√£o de servi√ßos vagamente acoplados que implementam uma l√≥gica comercial espec√≠fica.  Os servi√ßos em uma arquitetura de microsservi√ßo podem n√£o ter caracter√≠sticas comuns, mas s√£o combinados dentro de uma l√≥gica comercial comum. <br><blockquote>  Obviamente, cada empresa ter√° seu pr√≥prio microsservi√ßo.  Este √© um conjunto de pr√°ticas: arquitetura distribu√≠da, integra√ß√£o e entrega cont√≠nuas, e assim por diante.  Se voc√™ expandir o conceito de pr√°tica para as ferramentas usadas, as op√ß√µes para implementar microsservi√ßos ser√£o muito diversas. </blockquote>  <b>- Existem opini√µes diferentes sobre a composi√ß√£o da equipe, que devem estar envolvidas na cria√ß√£o e suporte de microsservi√ßos.</b>  <b>O que voc√™ acha disso?</b>  <b>Qual √© o tamanho ideal da equipe e como deve ser constru√≠do pela intera√ß√£o dentro dela ao desenvolver uma arquitetura de microsservi√ßo?</b>  <b>Existe um bom exemplo de trabalho em equipe em sua pr√°tica?</b> <br><br>  Considera-se correto desenvolver um servi√ßo de forma que toda a sua √°rea de assunto possa caber na cabe√ßa de um desenvolvedor.  Ao mesmo tempo, v√°rias pessoas podem participar do desenvolvimento deste servi√ßo.  Isso ajudar√° a evitar o fator de √¥nibus quando o desenvolvedor saiu de f√©rias ou adoeceu.  A divis√£o correta dos servi√ßos permite que uma nova pessoa entre rapidamente no contexto. <br><br>  A arquitetura de microsservi√ßo nos diz que geralmente inclui v√°rios servi√ßos.  Assim, um desenvolvedor n√£o pode fazer.  A arquitetura de microsservi√ßo se baseia no modelo do produto (ou l√≥gica comercial comum).  Os desenvolvedores s√£o selecionados para implementar esse modelo e, ao mesmo tempo, focar no cliente. <br><br>  O foco no cliente √© organizado atrav√©s do contato direto entre o desenvolvedor e o cliente.  Os desenvolvedores precisam ver como seu produto √© usado.  A partir disso, deseja-se conhecimento no campo tecnol√≥gico, a capacidade de entregar o produto ao cliente e acompanh√°-lo o mais r√°pido poss√≠vel. <br><br>  √â dif√≠cil dizer sobre o tamanho da equipe.  Todo mundo provavelmente j√° conhece a afirma√ß√£o de Jeff Bezos, fundador da Amazon, de que o tamanho da equipe no desenvolvimento orientado a servi√ßos deve ser pequeno o suficiente para que todos possam receber duas pizzas.  Nos coment√°rios sobre Habr√©, houve uma discuss√£o sobre esse t√≥pico, e eles escreveram que uma pessoa pode n√£o ter uma pizza suficiente e, portanto, uma equipe deve consistir em uma ou duas pessoas.  Martin Fowler, citando um comunicado sobre duas pizzas, disse que se tratava de grandes pizzas americanas, depois das quais especificou que a equipe n√£o deveria ter 50, mas cerca de 12 pessoas.  Acredito que tudo depende do modelo do produto.  Mas o esclarecimento de Fowler sobre "n√£o mais que 12 pessoas" ganhou em minha pr√°tica at√© agora.  Percebi que dentro da equipe √© desej√°vel dividir de acordo com os interesses tecnol√≥gicos, encontrar pessoas com a mesma opini√£o. <br><br>  N√£o √© necess√°rio que todos na equipe conhe√ßam bem todas as √°reas tecnol√≥gicas utilizadas no trabalho, mas o conhecimento total da equipe deve ser uniformemente profundo.  Por exemplo, duas pessoas est√£o envolvidas na constru√ß√£o inicial de uma implanta√ß√£o e, no futuro, provavelmente, elas tamb√©m a melhorar√£o significativamente.  Mas, ao mesmo tempo, toda a equipe deve ter um bom entendimento do processo de implanta√ß√£o.  Isso permitir√° que ela expresse seus desejos e fa√ßa altera√ß√µes.  Por que duas pessoas?  Porque √†s vezes uma pessoa pode cair em um estupor criativo.  E na discuss√£o, a verdade nasce. <br><br>  N√≥s naturalmente constru√≠mos sobre esse princ√≠pio, unidos por interesses tecnol√≥gicos.  Ao mesmo tempo, o desenvolvedor tamb√©m pode estabelecer pr√°ticas de DevOps e o engenheiro de controle de qualidade pode desenvolver um servi√ßo auxiliar de n√£o produ√ß√£o (por exemplo, aquecer o cache ou o servi√ßo de procurar anomalias nos dados em diferentes ambientes). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0c/d3d/188/c0cd3d1883cefa481f26765dda16cba2.png"><br><br>  <b>- Quase todos os relat√≥rios sobre microsservi√ßos come√ßam com a hist√≥ria de que ‚Äúaqui t√≠nhamos um iceberg e serramos, serramos, serramos ... Novas partes do aplicativo foram feitas com base em microsservi√ßos, e ent√£o come√ßamos a separar as‚Äú pe√ßas ‚Äùdo mecanismo principal ... "</b> <b><br><br></b>  <b>Diga-me, voc√™ √© um defensor do desenvolvimento do zero ou pode haver situa√ß√µes em que valha a pena concluir gradualmente um mon√≥lito?</b>  <b>Como determinar a estrat√©gia de sa√≠da?</b> <br><br>  Eu sou um defensor do desenvolvimento a partir do zero.  Mas isso s√≥ funciona se o conjunto de fun√ß√µes n√£o for muito complicado.  Geralmente, √© feito um pequeno mon√≥lito MVP.  E, √†s vezes, √© necess√°rio alterar radicalmente sua implementa√ß√£o interna v√°rias vezes.  Isso pode ser causado tanto por uma altera√ß√£o na tarefa t√©cnica quanto pelo fato de haver uma compreens√£o da implementa√ß√£o - abstra√ß√µes de alto n√≠vel aparecem no n√≠vel do modelo de neg√≥cios.  Depois disso, voc√™ pode seguir para a arquitetura de microsservi√ßo. <br><br>  Mas se voc√™ elaborar essas abstra√ß√µes no in√≠cio e desenh√°-las em diferentes nota√ß√µes (UML, BPMN, IDEF), para que todos os participantes do processo entendam com o que est√£o trabalhando, √© bem poss√≠vel implementar uma arquitetura de microsservi√ßo imediatamente. <br><br>  Nosso caminho para a arquitetura de microsservi√ßos n√£o foi reto.  No come√ßo havia um mon√≥lito.  Ele processou materiais publicit√°rios textuais.  H√° tr√™s anos e meio, precis√°vamos trabalhar com materiais de publicidade gr√°fica (imagens, logotipos).  Havia um desejo de introduzir na l√≥gica de neg√≥cios o que faltava ao trabalhar com materiais de publicidade em texto. <br><blockquote>  Para testar um novo modelo de neg√≥cios, implementamos o trabalho com materiais de publicidade gr√°fica como o segundo mon√≥lito em outra pilha de tecnologia.  Ap√≥s um ano e meio de opera√ß√£o, percebemos que essa abordagem estava correta. </blockquote>  Durante esse per√≠odo, recebemos muita lista de desejos, revelando a aspereza da l√≥gica de neg√≥cios. <br><br>  A implementa√ß√£o do segundo mon√≥lito foi dif√≠cil de expandir para o primeiro.  Portanto, decidimos n√£o conduzir o desenvolvimento em dois mon√≥litos ao mesmo tempo, mas combin√°-los na estrutura da terceira arquitetura, de acordo com o modelo de neg√≥cios muito novo.  Foi criada uma equipe de sete desenvolvedores, um engenheiro de QA e dois analistas.  Dois desenvolvedores dessa equipe criaram e deram suporte ao primeiro mon√≥lito e mais um - o segundo mon√≥lito.  Ou seja, nossa equipe j√° na entrada conhecia bem as armadilhas dos mon√≥litos anteriores. <br><br>  O primeiro mon√≥lito foi escrito em C #.  O segundo √© em PHP.  N√£o quer√≠amos perder as volumosas partes de c√≥digo depuradas do primeiro mon√≥lito e, ao mesmo tempo, eram necess√°rios multithreading, c√≥digo seguro e digita√ß√£o forte.  O c√≥digo PHP parcialmente n√£o se enquadra nesses requisitos.  Portanto, o C # permaneceu como base e implementou o que fez bem no √¢mbito do primeiro mon√≥lito - trabalhando com o conte√∫do dos materiais de publicidade - mas com base em outro armazenamento: armazenamento compat√≠vel com S3 e Kafka. <br><br>  Para trabalhar com o novo modelo de neg√≥cios, o Scala e o banco de dados PostgreSQL foram selecionados desta vez.  A Scala atendeu aos nossos requisitos t√©cnicos.  Al√©m disso, os desenvolvedores do Scala estavam localizados no mesmo andar dos desenvolvedores de C #.  Isso reduziu o tempo para a comunica√ß√£o da equipe.  A lei de Conway funcionou - a estrutura da empresa ditou a estrutura do aplicativo.  O desenvolvedor do PHP se tornou um desenvolvedor Scala.  Acabei de terminar um trabalho em um microsservi√ßo independente em Golang com um ciclo completo de CI / CD, ap√≥s o qual entrei para a equipe e tamb√©m me tornei desenvolvedor da Scala. <br><br>  √â interessante o que exatamente eu propus usar para trabalhar com a l√≥gica de neg√≥cios Scala, e n√£o o C #.  O fato √© que n√£o t√≠nhamos desenvolvedores de C # suficientes.  O PHP-shnik e eu quer√≠amos treinar novamente para o Scala.  Al√©m disso, tivemos a oportunidade de atrair um desenvolvedor experiente do Scala.  Outro ponto: se implement√°ssemos tudo em C #, poder√≠amos obter uma arquitetura de microsservi√ßo ou outro mon√≥lito na sa√≠da.  A divis√£o em Scala e C #, diferentes necessidades de armazenamento e a disponibilidade de desenvolvedores experientes em cada uma das √°reas necess√°rias - tudo isso apontou diretamente para a arquitetura de microsservi√ßo.  E n√≥s apenas nos beneficiamos disso.  H√° um ano, a arquitetura de microsservi√ßos para trabalhar com materiais gr√°ficos e textuais entrou em opera√ß√£o comercial e est√° operando com sucesso at√© hoje. <br><br>  Para a quest√£o de saber se √© poss√≠vel criar uma arquitetura de microsservi√ßo a partir do zero.  H√° um ano e meio, no processo de trabalhar na arquitetura de microsservi√ßos, surgiu uma demanda para apoiar uma nova dire√ß√£o em nossos produtos - materiais de publicidade em v√≠deo.  Era necess√°rio testar rapidamente um novo modelo de vendas.  Nossa arquitetura estava em sua inf√¢ncia.  O trabalho com materiais de v√≠deo cobriu uma nova √°rea de tecnologia.  Decidimos n√£o alterar o vetor de desenvolvimento e implementamos o MVP para materiais de v√≠deo como uma arquitetura de microsservi√ßo independente em C # e hospedagem de v√≠deo confi√°vel.  Esta √© uma experi√™ncia bem-sucedida e temos um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">relat√≥rio</a> sobre esse t√≥pico.  Portanto, temos duas arquiteturas de microsservi√ßo existentes em paralelo.  O MVP n√£o desenvolveu muito, o Wishlist tamb√©m acumulou e, em breve, combinaremos tudo dentro da estrutura de uma √∫nica arquitetura de microsservi√ßo - teremos um reposit√≥rio √∫nico de textos publicit√°rios, gr√°ficos e materiais de v√≠deo. <br><br>  <b>- Imediatamente, existem dois fatores importantes que falam em favor dos microsservi√ßos.</b>  <b>A primeira √© a capacidade de produzir partes individuais para a nuvem e, como resultado, uma escalabilidade colossal.</b>  <b>O segundo √© a capacidade de criar um servi√ßo separado em outro idioma.</b>  <b>Quais outras vantagens da mudan√ßa para microsservi√ßos voc√™ v√™?</b>  <b>Bem, dos pontos negativos, √© claro, eu tamb√©m quero ouvir.</b> <br><br>  Se falamos sobre o componente tecnol√≥gico, as vantagens, al√©m do acima, incluem a possibilidade de usar outra pilha de tecnologias.  E se ele n√£o nos conv√©m, escolheremos outro.  Novas tecnologias ignoram os problemas de solu√ß√µes antigas.  A arquitetura de microsservi√ßo tamb√©m oferece estabilidade e independ√™ncia: a degrada√ß√£o de um servi√ßo n√£o deve levar √† degrada√ß√£o completa de todo o sistema.  A composi√ß√£o do servi√ßo permite a reutiliza√ß√£o da funcionalidade do servi√ßo em outras arquiteturas de microsservi√ßo.  Do ponto de vista do componente organizacional, a divis√£o em servi√ßos permite dividir o desenvolvimento em equipes distribu√≠das ou em uma equipe grande. <br><blockquote>  As principais desvantagens da arquitetura de microsservi√ßo: √© muito mais complicada e sua implementa√ß√£o √© mais cara. </blockquote>  Voc√™ tamb√©m precisa estar preparado para oferecer suporte a contratos de servi√ßo, selecionar o protocolo de acesso remoto correto, resolver problemas de intera√ß√£o entre servi√ßos segura, poss√≠veis falhas, al√©m de desduplicar e gerenciar transa√ß√µes distribu√≠das. <br><br>  Em geral, no dom√≠nio p√∫blico, voc√™ pode encontrar muitas informa√ß√µes e materiais sobre como trabalhar com ele.  Mas, na verdade, tudo depende da tarefa.  Na minha pr√°tica, as vantagens sempre foram mais significativas que as desvantagens. <br><br>  Ainda vale lembrar as palavras de Sam Newman: quanto menos o servi√ßo, mais todas as vantagens e desvantagens da arquitetura de microsservi√ßos s√£o manifestadas. <br><br>  <b>- Voc√™ tem alguns relat√≥rios interessantes sobre microsservi√ßos.</b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Implanta√ß√£o de microsservi√ßos</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a Abordagem de implanta√ß√£o cont√≠nua na arquitetura de microsservi√ßos</a> .</b>  <b>Em um dos slides do primeiro, existem modelos de implanta√ß√£o e, no relat√≥rio, voc√™ diz que, para voc√™, a abordagem de tend√™ncia √© a distribui√ß√£o por cont√™ineres.</b>  <b>Durante esse tempo, nada mudou?</b>  <b>Um monte de Docker + Kubernetes n√£o perdeu sua relev√¢ncia?</b> <br><br>  Estamos transferindo cada vez mais servi√ßos para este pacote.  Penso que escolhemos a dire√ß√£o certa e, por enquanto, pretendemos aderir a ela.  Se algo mudar, eu falarei sobre isso em um novo relat√≥rio ou entrevista. <br><br>  <b>- Qu√£o suave √© a implanta√ß√£o e transfer√™ncia cont√≠nuas de microsservi√ßos para prod?</b> <br><br>  Tudo depende de como construir o processo.  A princ√≠pio, parece que tudo √© simples.  Os servi√ßos s√£o independentes, implantados separadamente.  A fraca coer√™ncia √© assegurada por diferentes abordagens para trabalhar com a evolu√ß√£o do contrato.  E aqui voc√™ tem que escolher.  Por exemplo, voc√™ pode implementar a vers√£o de um contrato ou adicionar um servi√ßo para desconectar um contrato (dissocia√ß√£o de contrato). <br><br>  Se em uma arquitetura de microsservi√ßo em desenvolvimento ativo, existem 10 ou mais servi√ßos ao mesmo tempo e cada um tem seu pr√≥prio controle de vers√£o, existe um problema de consist√™ncia de vers√£o.  Devemos tentar n√£o nos confundir na compatibilidade de servi√ßos de vers√µes diferentes. <br><br>  A implanta√ß√£o cont√≠nua significa que podemos entregar o aplicativo a qualquer momento em qualquer ambiente. <br><blockquote>  Um aplicativo na arquitetura de microsservi√ßo √© uma cole√ß√£o de servi√ßos.  Portanto, a qualquer momento, precisamos conhecer uma combina√ß√£o est√°vel de vers√µes de servi√ßo.  E em outro lugar, devemos ter um conjunto de endere√ßos de dom√≠nio e outros par√¢metros espec√≠ficos para diferentes ambientes para configurar servi√ßos e vincul√°-los um ao outro. </blockquote>  Tudo isso precisa ser armazenado em algum lugar, para corrigir altera√ß√µes em v√°rios locais (afinal, os microsservi√ßos s√£o independentes) e para n√£o ficar confuso. <br><br>  Implanta√ß√£o cont√≠nua significa a capacidade de reverter para qualquer vers√£o a qualquer momento.  Portanto, pode ser que voc√™ precise reverter v√°rios servi√ßos de uma s√≥ vez e observe a ordem inversa correta da implanta√ß√£o do servi√ßo. <br><br>  Em um dos meus relat√≥rios, falo sobre nossa abordagem √† evolu√ß√£o dos contratos, como eles resolveram o problema da consist√™ncia das vers√µes e como eles criaram o processo de implanta√ß√£o na arquitetura de microsservi√ßo de mais de dez servi√ßos.  Uma implanta√ß√£o cont√≠nua pode n√£o estar livre de problemas, mas tudo √© solucion√°vel. <br><br>  <b>- Qual poderia ser o conjunto inicial de ferramentas para uma implanta√ß√£o cont√≠nua de microsservi√ßos?</b>  <b>Quais op√ß√µes voc√™ recomendaria usar para trabalhar com microsservi√ßos?</b> <br><br>  A implanta√ß√£o cont√≠nua √© uma sequ√™ncia de pipelines, incluindo integra√ß√£o cont√≠nua, testes de integra√ß√£o e entrega de servi√ßos ao ambiente de orquestra√ß√£o.  As ferramentas mais populares de seq√ºenciamento de etapas s√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jenkins 2 Pipelines</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TeamCity Build Chains</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bitbucket Pipelines</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitLab CI Pipelines</a> .  Primeiro, voc√™ precisa automatizar a integra√ß√£o cont√≠nua (IC).  Precisamos de um servidor de IC remoto para criar e executar testes neste assembly. <br><br>  As ferramentas listadas oferecem suas solu√ß√µes.  N√≥s usamos o GitLab CI, e os GitLab Runners agem como esses servidores.  O artefato de constru√ß√£o √© a imagem do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker</a> .  Como parte dos testes de integra√ß√£o, voc√™ pode realizar testes de carga e capacitivos usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Gatling</a> , em particular, para determinar os recursos necess√°rios (processador e mem√≥ria) para funcionar em um ambiente de orquestra√ß√£o (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Kubernetes</a> ).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Helm</a> √© amplamente utilizado para implanta√ß√£o, permitindo descrever a arquitetura de microsservi√ßo para diferentes ambientes.  Em nossa empresa, n√£o usamos Helm.  Temos nossa pr√≥pria ferramenta de implanta√ß√£o, criada quando o Helm estava na vers√£o cl√°ssica e n√£o suportava ambientes diferentes.  Ambas as ferramentas t√™m qualidades √∫teis semelhantes, mas a implementa√ß√£o e a distribui√ß√£o s√£o diferentes.  E nossa pr√≥pria ferramenta nos permite fazer melhorias e adaptar tudo √† nossa infraestrutura. <br><br>  <b>- Quais tecnologias s√£o ideais para pequenas e m√©dias empresas que desejam implementar microsservi√ßos?</b>  <b>√â um prazer muito caro para eles?</b> <br><br>  Cada vez mais, encontro confirma√ß√µes de que pequenas e m√©dias empresas s√£o inadequadas para criar seu pr√≥prio ambiente de orquestra√ß√£o (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Kubernetes</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker Swarm</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apache Mesos</a> ).                  .       (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Google Cloud Platform</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Amazon Web Services</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Microsoft Azure</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Oracle Cloud</a> )    . <br><br>     GitLab  GitLab CI.               . GitLab     Helm    .    Helm    .  Helm   ,           ,     ,        . <br><br>     ,     ,    ,      open source,       . <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spinnaker</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Heroku</a> ‚Äî  ,    ,       . <br><br> <b>‚Äî   ,        ,    ,  .             .     ?</b> <br><br>      ,        .     ,          ,           . <br><br>      (       )       .               . <br><br>        .       .          ,    (package).                . <br><br>   ( )   Docker-,           Git.     ,      .       ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> .  ,              . <br><br>             ,       .  :       API.                  .       :    .     ,     API.  ,   API   ,   ‚Äî .      ,         API,             . <br><br>         .     ,       ;         API,      ;   ,     ,     . <br><br> <b>,    ,        .    ,      ?</b> <br><br>  ‚Äî  - .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>  ,        API,      ,            .    .            . <br><br> ,   ,      .       ,    ,              .    ,      ,      . <br><br> <b>‚Äî         ,      .   2. ,       ?   ?</b> <br><br>      .    .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mesosphere</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OpenShift</a>       PaaS  IaaS .    Deis     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   Deis</a>    .  open source  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Heroku</a> ,       Heroku Buildpack', Dockerfile'   Docker-.        .    make            Deis.       . <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Deis2</a> .       Deis,        Kubernetes. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> Infrastructure &amp; Operations</a> ,         ,       Kubernetes  Deis2. ,     ,     Deis2,    ,     ‚Äî    Kubernetes.   . Deis2   :       , pod          pod'   namespace.         Infrastructure &amp; Operations. Kubernetes    .         Deis2  Kubernetes.       Deis2   Kubernetes. <br><br> <b>‚Äî ,          ,       ,      ?      ?</b> <br><br>      Helm.     ,        .  Helm       . <br><blockquote> Helm    ,    ‚Äî   :        ,   . </blockquote>  Helm   chart'     chart,         ,   . <br><br>   2        ,         10 .       (          backing : Postgres, Kafka, Zookeeper, Ceph).  -   ,  yaml-    ,      IDE,       .  ,    .  Python,          Python       .   ,      .      ,    . ,     .       ,     ,       .          .   , ,   ,         (  )   .  ,    ,  Helm,        Kubernetes  -  ,    yaml. <br><br>     API        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API Gateway</a> .        ,   ‚Äî  . <br><br>        ,    :    .       ,  ,     . <br><blockquote>  DevOps     ,         .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevOpsConf Russia</a> . <br><br> DevOpsConf Russia  <b>1  2    </b>      RootConf,  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ,   .    DevOps       ,   . <br><br>     DevOps  ,      ,      ‚Äì     .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>  15 . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418941/">https://habr.com/ru/post/pt418941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418929/index.html">Teste de Unidade e Python</a></li>
<li><a href="../pt418931/index.html">RubyMine 2018.2: anexando um depurador a processos remotos, chruby, an√°lise de c√≥digo aprimorada e muito mais</a></li>
<li><a href="../pt418933/index.html">OnePlus Review 6. Quando os chineses fizeram tudo o mesmo da √∫ltima vez</a></li>
<li><a href="../pt418935/index.html">DZ Online Tech: ABBYY. Como n√£o se confundir em redes neurais?</a></li>
<li><a href="../pt418937/index.html">Comemorando o 8¬∫ anivers√°rio com o primeiro lan√ßamento na GeekUniversity</a></li>
<li><a href="../pt418943/index.html">Computador cantando, cyborgs e m√∫sica wave - discuta sons incomuns e dispositivos de √°udio</a></li>
<li><a href="../pt418945/index.html">Melhores OIC de agosto de 2018 (vota√ß√£o)</a></li>
<li><a href="../pt418951/index.html">UE4 Invent√°rio para Multiplayer # 2 | Conectar o Blueprint ao C ++</a></li>
<li><a href="../pt418953/index.html">Antiguidades: antiv√≠rus vintage e arqueologia digital aplicada</a></li>
<li><a href="../pt418955/index.html">Dodo: Uma empresa de TI que faz pizza. Programa√ß√£o e processos de TI / AichiHype</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>