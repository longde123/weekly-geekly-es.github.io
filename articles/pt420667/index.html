<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèø ü•ô üë©‚Äçüíª Princ√≠pios de opera√ß√£o do protocolo EIGRP üë©üèº‚Äçü§ù‚Äçüë®üèΩ üñïüèæ ‚ôøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo ir√° falar sobre o EIGRP e discutir como esse protocolo funciona. O EIGRP √© um protocolo de vetor de dist√¢ncia, √†s vezes √© considerado h√≠br...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Princ√≠pios de opera√ß√£o do protocolo EIGRP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420667/"> Este artigo ir√° falar sobre o EIGRP e discutir como esse protocolo funciona.  O EIGRP √© um protocolo de vetor de dist√¢ncia, √†s vezes √© considerado h√≠brido, mas n√£o √©.  Leia o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">in√≠cio do artigo</a> sobre OSPF e voc√™ entender√° por que o EIGRP √© um protocolo vetorial remoto.  O EIGRP √© um protocolo de roteamento din√¢mico de vetor de dist√¢ncia avan√ßado desenvolvido pela Cisco.  Vamos acertar.  Usaremos a seguinte topologia: <br><br><a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/4ed/cbb/733/4edcbb7335c70442a6ad9c1e4754e851.jpg" alt="Minha imagem"></a> <a name="habracut"></a><br><br>  Execute o EIGRP nos vIOS1 e vIOS2, veja como as informa√ß√µes s√£o transmitidas entre os roteadores.  Assim que o EIGRP √© ativado no roteador, o roteador come√ßa a enviar pacotes Hello.  Tamb√©m listamos outros tipos de mensagens que s√£o usadas no EIGRP. <br><br><ul><li>  Ol√° - roteadores usam pacotes de ol√° para descobrir vizinhos.  Pacotes multicast s√£o enviados e n√£o requerem confirma√ß√£o de recebimento. </li><li>  Atualizar - cont√©m informa√ß√µes sobre a altera√ß√£o de rotas.  Eles s√£o enviados apenas para os roteadores afetados pela atualiza√ß√£o.  Esses pacotes podem ser enviados para um roteador espec√≠fico (unicast) ou para um grupo de roteadores (multicast).  O recebimento de um pacote de atualiza√ß√£o √© confirmado enviando um ACK. </li><li>  Consulta - quando o roteador calcula a rota e n√£o possui um sucessor vi√°vel, envia um pacote de consulta aos vizinhos para determinar se eles t√™m um sucessor vi√°vel para esse destino.  Normalmente, os pacotes de consulta s√£o enviados por multicast, mas pode haver unicast.  O recebimento do pacote de consulta √© confirmado enviando o ACK pelo receptor do pacote. </li><li>  Responder - o roteador envia um pacote de resposta em resposta ao pacote de consulta.  Os pacotes de resposta s√£o enviados unicast para quem enviou o pacote de consulta.  O recebimento de um pacote de resposta √© confirmado enviando um ACK. </li><li>  ACK - um pacote que confirma o recebimento de pacotes de atualiza√ß√£o, consulta e resposta.  Os pacotes ACK s√£o enviados unicast e cont√™m um n√∫mero de confirma√ß√£o.  De fato, esses s√£o pacotes hello que n√£o transmitem dados.  Entrega n√£o garantida √© usada. </li></ul><br>  Existem tamb√©m pacotes SIA, mas falaremos sobre eles abaixo. <br>  Os pacotes s√£o enviados para o endere√ßo multicast 224.0.0.10 a cada 5 segundos (Hello Timer), o Hold Holder √© 15 segundos = 3 intervalos de hello, se durante esse timer nenhum pacote de hello foi recebido de um vizinho, o vizinho √© removido da lista de vizinhos.  O pacote fica assim: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/144/cd2/7a5/144cd27a50a78ca0aeb70c7e4b15cfae.jpg" alt="Minha imagem"><br><br>  O pacote cont√©m os par√¢metros dos coeficientes (K1, K2, K3, K4, K5, K6), o temporizador de espera e o n√∫mero do sistema aut√¥nomo.  Os coeficientes (K1, K2, K3, K4, K5, K6) s√£o usados ‚Äã‚Äãno c√°lculo da m√©trica, e falaremos sobre eles mais tarde, bem como os temporizadores EIGRP.  Agora √© importante falar sobre o sistema aut√¥nomo (AS).  Para ativar o EIGRP, um processo EIGRP espec√≠fico deve receber um n√∫mero, como no OSPF.  Mas, diferentemente do OSPF, essa op√ß√£o n√£o pode ser selecionada aleatoriamente para cada roteador, deve ser a mesma para todos os roteadores.  Se o roteador receber um pacote Hello com um AS diferente dele, n√£o haver√° rela√ß√£o de vizinhos. <br><br>  Para que os roteadores se tornem vizinhos, as seguintes condi√ß√µes devem ser atendidas: <br><br><ul><li>  os roteadores devem ser autenticados, </li><li>  roteadores devem estar no mesmo AS, </li><li>  As rela√ß√µes de vizinhan√ßa devem ser estabelecidas nos endere√ßos principais (quando um pacote hello chega, o roteador verifica se o endere√ßo do remetente da rede pertence ao endere√ßo principal da interface), </li><li>  os valores dos coeficientes K devem corresponder. </li></ul><br>  Para que os roteadores se tornem vizinhos do EIGRP, eles n√£o precisam corresponder ao tempo Hello e Hold.  O roteador usa valores de timer recebidos do vizinho.  Se o temporizador Hello ou Hold for alterado em um dos roteadores, os vizinhos deste roteador usar√£o esses valores.  Para que o roteador use outros valores, √© necess√°rio alterar o timer na interface correspondente do vizinho.  Ap√≥s a troca de pacotes Hello, um pacote Update √© enviado, mas ainda n√£o cont√©m rotas, cont√©m o sinalizador Init, que informa aos roteadores o in√≠cio da troca de informa√ß√µes sobre rotas.  Este pacote √© enviado diretamente para o endere√ßo do roteador.  Depois de trocar essas mensagens, cada roteador envia um pacote de atualiza√ß√£o com rotas para o endere√ßo multicast 224.0.0.10: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd9/0da/c1c/dd90dac1c80680d40681289160f1898b.jpg" alt="Minha imagem"><br><br>  Como voc√™ pode ver, o pacote de atualiza√ß√£o n√£o cont√©m nenhuma m√©trica, mas apenas informa√ß√µes como largura de banda, atraso, MTU etc. Depois de receber essas informa√ß√µes, o pr√≥prio roteador calcula a m√©trica usando os coeficientes K1-K6.  Esses pacotes podem ser enviados para um roteador espec√≠fico ou multicast.  Em geral, existem tr√™s tipos de atualiza√ß√µes: <br><br><ul><li>  N√£o peri√≥dicos (n√£o peri√≥dicos) - as atualiza√ß√µes s√£o enviadas n√£o a intervalos regulares, mas quando a topologia ou m√©trica √© alterada; </li><li>  Parcial (Parcial) - nem todas as informa√ß√µes da tabela de roteamento s√£o transmitidas em atualiza√ß√µes, mas apenas altera√ß√µes; </li><li>  Limitado - as atualiza√ß√µes s√£o enviadas apenas para os roteadores envolvidos. </li></ul><br>  As vizinhan√ßas em n√≠vel de pacote s√£o assim: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/68a/588/fe6/68a588fe6adbe793d98c2b57b7da301e.jpg" alt="Minha imagem"><br><br>  Voc√™ pode perceber que, al√©m do Hello and Update listado por n√≥s, tamb√©m h√° Hello (ACK) e o n√∫mero √© igual ao n√∫mero de pacotes de atualiza√ß√£o enviados para o endere√ßo multicast.  √â tudo sobre o protocolo RTP.  O protocolo RTP controla o processo de transmiss√£o de pacotes EIGRP e fornece: <br><br><ul><li>  Entrega garantida do pacote. </li><li>  Preservando a ordem dos pacotes. </li></ul><br>  Essas s√£o as coisas.  O que n√≥s temos?  As rotas trocaram os pacotes de atualiza√ß√£o e agora √© hora de criar uma tabela de roteamento.  Cada atualiza√ß√£o √© processada e, substituindo os dados (largura de banda, atraso, etc.) em uma f√≥rmula especial, a m√©trica √© calculada: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc6/0ab/062/cc60ab0622cbe1abb96521c2520b96ee.jpg" alt="Minha imagem"><br><br>  Essa f√≥rmula parece incr√≠vel, mas a melhor coisa √© que voc√™ pode n√£o saber, apenas saber que algo assim existe.  E outro truque interessante √© que os coeficientes EIGRP padr√£o s√£o: <br><br><ul><li>  K1 = 1 </li><li>  K2 = 0 </li><li>  K3 = 1 </li><li>  K4 = 0 </li><li>  K5 = 0 </li></ul><br>  E a f√≥rmula se transforma em m√©trica = largura de banda + atraso.  Portanto, √© t√£o importante que os coeficientes em todos os roteadores sejam os mesmos, para que n√£o haja problemas devido a diferentes m√©tricas nos roteadores.  Vamos falar sobre os dados no Update com mais detalhes. <br><br><ul><li>  Largura de banda - o valor m√≠nimo entre os canais de largura de banda que levam √† rede √© selecionado e enviado para Atualiza√ß√£o. </li><li>  Atraso - Resume o atraso de todos os canais que levam a esta rede. </li><li>  Confiabilidade - a pior medida de confiabilidade desde o in√≠cio, com base no keepalive </li><li>  Loading - o pior indicador de carregamento de link at√© o fim, com base na taxa de pacotes e na largura de banda configurada na interface </li><li>  MTU √© o menor MTU at√© o fim.  Apesar de ser usado no Update, ele n√£o participa do c√°lculo da pr√≥pria m√©trica. </li></ul><br>  Como dito acima, a largura de banda e o atraso s√£o usados ‚Äã‚Äãpor padr√£o.  Os par√¢metros restantes raramente s√£o necess√°rios quando necess√°rios, mas com a ajuda deles √© poss√≠vel um ajuste mais fino da m√©trica.  Assim, no pacote Update, o roteador passa a rota e os dados associados a ela, n√£o transmite a pr√≥pria m√©trica.  O roteador que recebeu a atualiza√ß√£o calcula a m√©trica de acordo com a f√≥rmula e, dependendo das m√©tricas, decide se deve ou n√£o encaminhar a rota para a tabela de roteamento.  Tamb√©m √© importante observar que o <b>roteador transmite apenas as rotas que ele usa.</b>  Vamos ver como criar uma tabela de topologia. <br><br>  <b>Tabela de topologia</b> - Uma lista de rotas aprendidas com cada vizinho.  A tabela de topologia tamb√©m armazena a m√©trica que cada vizinho relata para cada rota (AD) e a m√©trica que o roteador local usar√° para alcan√ßar a rota atrav√©s do vizinho (FD). <br><br>  √â necess√°rio explicar o que s√£o AD e FD.  Vamos configurar o EIGRP em todos os nossos roteadores.  Al√©m disso, para evitar n√∫meros complexos na m√©trica, alteramos os coeficientes de K1 = 1 K2 = 0 K3 = 1 K4 = 0 K5 = 0 para K1 = 0 K2 = 0 K3 = 1 K4 = 0 K5 = 0. Assim, teremos 256 * Delay formula e tamb√©m temos uma maneira f√°cil de manipular m√©tricas alterando o par√¢metro delay nas interfaces.  Considerando que nas interfaces atraso = 1 segundo, cada link, se voc√™ usar a terminologia OSPF, custa 256. Vamos ver qual √© a tabela de topologia no vIOS1: <br><blockquote>  topologia do eigrp do ip do vIOS1 # show ip <br>  Tabela de topologia EIGRP-IPv4 para AS (1) / ID (192.168.1.1) <br>  C√≥digos: P - passivo, A - ativo, U - atualiza√ß√£o, Q - consulta, R - resposta, <br>  r - Status da resposta, s - Status do sia <br><br>  P 192.168.3.0/24, 1 sucessores, FD √© 512 <br>  Por exemplo: 192.168.13.3 (512/256), GigabitEthernet0 / 0 <br>  P 192.168.2.0/24, 1 sucessores, FD √© 512 <br>  via 192.168.12.2 (512/256), GigabitEthernet0 / 3 <br>  P 192.168.25.0/24, 1 sucessores, FD √© 512 <br>  via 192.168.12.2 (512/256), GigabitEthernet0 / 3 <br>  P 192.168.35.0/24, 1 sucessores, FD √© 512 <br>  Por exemplo: 192.168.13.3 (512/256), GigabitEthernet0 / 0 <br>  P 192.168.12.0/24, 1 sucessores, FD √© 256 <br>  via Conectado, GigabitEthernet0 / 3 <br>  P 192.168.45.0/24, 1 sucessores, FD √© 512 <br>  Por meio de 192.168.14.4 (512/256), GigabitEthernet0 / 2 <br>  P 192.168.0.0/24, 1 sucessores, FD √© 256 <br>  via Conectado, GigabitEthernet0 / 1 <br>  P 192.168.13.0/24, 1 sucessores, FD √© 256 <br>  via Conectado, GigabitEthernet0 / 0 <br>  P 192.168.14.0/24, 1 sucessores, FD √© 256 <br>  via Conectado, GigabitEthernet0 / 2 <br>  P 192.168.5.0/24, 3 sucessores, FD √© 768 <br>  Por meio de 192.168.12.2 (768/512), GigabitEthernet0 / 3 <br>  Por exemplo: 192.168.13.3 (768/512), GigabitEthernet0 / 0 <br>  Por meio de 192.168.14.4 (768/512), GigabitEthernet0 / 2 </blockquote><br>  Se voc√™ observar, por exemplo, a rede - 192.168.5.0/24, notar√° tr√™s caminhos nos vIOS2, vIOS3 e vIOS4 com as mesmas m√©tricas.  Para 192.168.5.0/24 FD, para todos os caminhos √© igual a - 768 e AD - 512. Vamos dar uma defini√ß√£o de outro artigo e tentar explicar: <br><br><ul><li>  <b>A dist√¢ncia anunciada (AD)</b> , tamb√©m conhecida como dist√¢ncia relatada (RD), √© o custo da dist√¢ncia entre o roteador vizinho que anuncia a rota e a rede de destino. </li><li>  <b>Dist√¢ncia poss√≠vel (FD)</b> - o custo da dist√¢ncia do roteador local √† rede de destino = AD, que anuncia o roteador vizinho + o custo da dist√¢ncia entre o roteador local e o roteador vizinho. </li></ul><br><blockquote>  P 192.168.5.0/24, 3 sucessores, o FD √© 768 via 192.168.14.4 (768/512), GigabitEthernet0 / 2 </blockquote><br>  Vamos examinar esta linha da tabela de topologia no vIOS1.  O vIOS1 aprendeu sobre a rota do vIOS4 (192.168.14.4).  Como o vIOS1 separa tr√™s links de 192.168.5.0/24, a m√©trica FD com nossas configura√ß√µes ser√° 3 * 256 = 768.  E o AD √© a m√©trica da rota em rela√ß√£o ao roteador (vIOS4) que anunciou esta rede.  AD √© a m√©trica de FD dessa rota no vIOS4.  Vejamos a tabela de topologia no vIOS4: <br><blockquote>  P 192.168.5.0/24, 1 sucessores, o FD √© 512 via 192.168.45.5 (512/256), GigabitEthernet0 / 1 </blockquote><br>  AD no vIOS1 = FD no vIOS4.  Silencioso confuso, mas tente explicar a l√≥gica do trabalho.  O roteador que anuncia a rota envia os par√¢metros (largura de banda, atraso, etc.) da rota na mensagem Atualizar sem levar em considera√ß√£o o link entre o roteador que est√° sendo anunciado.  Ou seja, o vIOS4 leva em considera√ß√£o apenas os par√¢metros de dois links: vIOS4 Gi0 / 1 - vIOS5 Gi0 / 1 e vIOS5 Gi0 / 0 - VPC.  Ap√≥s receber o Update, o vIOS1, substituindo os par√¢metros obtidos na f√≥rmula, calcula o que?  Isso mesmo - AD = 512.  Depois de pegar os par√¢metros do link de onde a rota veio, o vIOS1 Gi0 / 2 - vIOS4 Gi0 / 2 e o substitui novamente na f√≥rmula.  Conta, obt√©m o n√∫mero 256 e o ‚Äã‚Äãsoma com AD (512), obtemos FD-768. Essas s√£o as coisas!  Mas por que todo esse ritual? <br>  E tudo isso para criar uma regra especial chamada <b>condi√ß√£o Feasible</b> , que √© um dos meios de prote√ß√£o contra a forma√ß√£o de loops e a r√°pida converg√™ncia. <br>  Vamos definir os seguintes termos: <br><br><ul><li>  O sucessor √© um roteador adjacente com um caminho sem loop e o caminho de menor custo para a rede de destino. </li><li>  Sucessor poss√≠vel - roteador de backup com caminho sem loops (sucessor poss√≠vel do AD deve ser menor que o FD da rota sucessora atual). </li><li>  Condi√ß√£o poss√≠vel - O sucessor vi√°vel do AD deve ser menor que o DF da rota sucessora atual. </li></ul><br>  Para explicar como tudo funciona e mostrar as sutilezas, voc√™ precisa alterar algumas m√©tricas.  Vamos fazer o seguinte, alterar o atraso para ter essas m√©tricas de link: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/678/c11/c2b/678c11c2b0f9b1dabb87a01ac62ff9e4.jpg" alt="Minha imagem"><br><br>  Isso √© feito usando o comando delay na interface.  Agora n√≥s dissemos - delay = 1 e a m√©trica √© 256. Vamos ver quais m√©tricas obtemos para a rede 192.168.5.0/24 no roteador vIOS1: <br><br><ul><li>  Via vIOS2 - FD = 2304, AD = 1280 </li><li>  Via vIOS4 - FD = 1024, AD = 768 </li><li>  Via vIOS3 - FD = 1536, AD = 768 </li></ul><br>  Como vemos o melhor FD para a rota atrav√©s do vIOS4, ele ser√° adicionado √† tabela de roteamento geral. Essa rota √© chamada de <b>Sucessor</b> : <br><blockquote>  vIOS1 # mostre a rota IP eigrp <br>  C√≥digos: L - local, C - conectado, S - est√°tico, R - RIP, M - m√≥vel, B - BGP <br>  √Årea inter D - EIGRP, EX - EIGRP externa, O - OSPF, IA - OSPF <br>  N1 - OSPF NSSA tipo externo 1, N2 - OSPF NSSA tipo externo 2 <br>  E1 - Tipo externo OSPF 1, E2 - Tipo externo OSPF 2 <br>  i - IS-IS, su - resumo IS-IS, L1 - IS-IS n√≠vel 1, L2 - IS-IS n√≠vel 2 <br>  ia - √°rea inter-IS-IS, * - padr√£o candidato, U - rota est√°tica por usu√°rio <br>  o - ODR, P - rota est√°tica baixada peri√≥dica, H - NHRP, l - LISP <br>  a - rota de aplica√ß√£o <br>  + - rota replicada,% - substitui√ß√£o do pr√≥ximo salto, p - substitui√ß√µes de PfR <br><br>  O gateway de √∫ltimo recurso n√£o est√° definido <br><br>  D 192.168.2.0/24 [90/512] via 192.168.12.2, 06:01:31, GigabitEthernet0 / 3 <br>  D 192.168.3.0/24 [90/1024] via 192.168.13.3, 06:01:28, GigabitEthernet0 / 0 <br>  D 192.168.5.0/24 [90/1024] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 <br>  D 192.168.25.0/24 [90/1024] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 <br>  D 192.168.35.0/24 [90/1024] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 <br>  D 192.168.45.0/24 [90/768] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 </blockquote><br>  O que acontecer√° com as outras duas rotas - elas ser√£o verificadas quanto √† condi√ß√£o FS (condi√ß√£o vi√°vel).  A rota atrav√©s do vIOS3 passa por essa condi√ß√£o AD (via vIOS3) = 768 &lt;1024 = FD (via vIOS1).  Portanto, essa rota, embora n√£o seja adicionada √† tabela de roteamento geral, ser√° armazenada nas tabelas de topologia: <br><blockquote>  topologia do eigrp do ip do vIOS1 # show ip <br>  Tabela de topologia EIGRP-IPv4 para AS (1) / ID (192.168.1.1) <br>  C√≥digos: P - passivo, A - ativo, U - atualiza√ß√£o, Q - consulta, R - resposta, <br>  r - Status da resposta, s - Status do sia <br><br>  P 192.168.3.0/24, 1 sucessores, FD √© 1024 <br>  Por favor, digite seu e-mail do Facebook para receber um link de cria√ß√£o de senha. <br>  P 192.168.2.0/24, 1 sucessores, FD √© 1024 <br>  Por exemplo: 192.168.12.2 (1024/256), GigabitEthernet0 / 3 <br>  P 192.168.25.0/24, 1 sucessores, FD √© 1024 <br>  Por meio de 192.168.14.4 (1024/768), GigabitEthernet0 / 2 <br>  Por exemplo: 192.168.13.3 (1536/768), GigabitEthernet0 / 0 <br>  P 192.168.35.0/24, 1 sucessores, FD √© 1024 <br>  Por meio de 192.168.14.4 (1024/768), GigabitEthernet0 / 2 <br>  Por favor, digite seu e-mail do Facebook para receber um link de cria√ß√£o de senha. <br>  P 192.168.12.0/24, 1 sucessores, FD √© 768 <br>  via Conectado, GigabitEthernet0 / 3 <br>  P 192.168.45.0/24, 1 sucessores, FD √© 768 <br>  Por meio de 192.168.14.4 (768/512), GigabitEthernet0 / 2 <br>  P 192.168.0.0/24, 1 sucessores, FD √© 512 <br>  via Conectado, GigabitEthernet0 / 1 <br>  P 192.168.13.0/24, 1 sucessores, FD √© 768 <br>  via Conectado, GigabitEthernet0 / 0 <br>  P 192.168.14.0/24, 1 sucessores, FD √© 256 <br>  via Conectado, GigabitEthernet0 / 2 <br>  <b>P 192.168.5.0/24, 1 sucessores, FD √© 1024</b> <br>  Por meio de 192.168.14.4 (1024/768), GigabitEthernet0 / 2 <br>  <b>Por exemplo: 192.168.13.3 (1536/768), GigabitEthernet0 / 0</b> </blockquote><br>  Ele n√£o possui a m√©trica da melhor rota, ou seja, n√£o √© um Sucessor, mas desempenha o papel de uma rota de backup e, se o Sucessor for perdido, assumir√° imediatamente seu lugar.  Isso alcan√ßa uma converg√™ncia muito r√°pida do protocolo, mas mais sobre isso mais tarde.  Essa rota √© chamada <b>sucessora poss√≠vel</b> .  E o que acontecer√° com a terceira rota?  Nada, ele n√£o satisfaz a condi√ß√£o FC (1280&gt; 1024) e n√£o ser√° levado em considera√ß√£o para proteg√™-lo do loop.  Todas as rotas recebidas atrav√©s da atualiza√ß√£o, mas n√£o testadas pelo FC, podem ser vistas usando o comando show ip eigrp topology all-links.  N√£o est√° claro por que a condi√ß√£o FS protege contra a forma√ß√£o de loops, agora vamos tentar explicar.  √â importante saber que, ao estudar o protocolo EIGRP, √© vital entender o princ√≠pio da condi√ß√£o FC e o objetivo para o qual ele √© usado.  Considere uma topologia ligeiramente modificada (adicionou um link entre vIOS2 e vIOS4) e tamb√©m use a m√©trica mais primitiva: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/734/050/472/7340504727cf56fa62300883800f363f.jpg" alt="Minha imagem"><br><br>  A rota para a rede 192.168.5.0/24 ser√° a mesma com o AD e o FD: <br><br><ul><li>  vIOS4 - via vIOS5, AD = 5, FD = 10. </li><li>  vIOS1 - via vIOS4, AD = 10, FD = 11. </li><li>  vIOS3 - via vIOS1, AD = 11, FD = 12. </li></ul><br>  Mas o vIOS4 receber√° uma atualiza√ß√£o do vIOS2, que conter√° a rota para a rede 192.168.5.0/24 via vIOS2 com a m√©trica - AD = 12, FD = 15.  √â claro que n√£o pode ser um sucessor; se de repente essa rota for escolhida pelo sucessor vi√°vel, se o sucessor cair no vIOS4 e o sucessor escolher essa rota, ocorrer√° um loop.  Mas o FC n√£o permitir√° definir essa rota como FS como AD = 12&gt; 10 = FD.  A rota para o vIOS2 cont√©m o caminho atrav√©s do vIOS4 e, em qualquer caso, seu AD tamb√©m inclui o FD vIOS4.  Ou seja, o AD no vIOS2 cont√©m os seguintes links: <br><blockquote>  12 = AD no vIOS2 = Gi0 / 3 vIOS3 + Gi0 / 2 vIOS4 + Gi0 / 1 vIOS5 + eth0 VPC5, em que Gi0 / 1 vIOS5 + eth0 VPC5 = FD = 10 - esse √© o FD vIOS4 e √© imposs√≠vel que o AD &lt;FD seja menos. </blockquote><br>  Assim, a condi√ß√£o FC verifica a rota quanto √† presen√ßa de si mesma nessa rota.  Somente rotas que atendem a essa condi√ß√£o podem garantir que n√£o haja loops.  Pode haver casos em que a rota n√£o crie um loop, mas, ao mesmo tempo, n√£o satisfa√ßa a condi√ß√£o FC, n√£o a usaremos; nesses casos, escolhemos a estabilidade da rede.  Se voc√™ se aprofundar, a condi√ß√£o √© bastante simples e intuitiva.  O algoritmo que seleciona as melhores rotas no protocolo EIGRP √© chamado <b>DUAL</b> .  Agora considere o protocolo EIGRP para a quest√£o da converg√™ncia na perda da rota principal.  Vamos voltar √† nossa grande topologia antiga e imaginar que o vIOS4 se foi.  Dependendo de como o vIOS4 desapareceu, o comportamento ser√° um pouco diferente, mas ser√° diferente quando o acionador for disparado.  Se, por exemplo, desabilitarmos a interface Gi 0/2 no vIOS1, o vIOS1 detectar√° imediatamente a perda de um vizinho e come√ßar√° a agir. Se o vizinho desaparecer sem aviso, o Hold Timer funcionar√° depois de n√£o receber pacotes Hello por 15 segundos: <br><blockquote>  D 192.168.2.0/24 [90/512] via 192.168.12.2, 06:01:31, GigabitEthernet0 / 3 <br>  D 192.168.3.0/24 [90/1024] via 192.168.13.3, 06:01:28, GigabitEthernet0 / 0 <br>  D 192.168.5.0/24 [90/1024] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 <br>  D 192.168.25.0/24 [90/1024] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 <br>  D 192.168.35.0/24 [90/1024] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 <br>  D 192.168.45.0/24 [90/768] via 192.168.14.4, 06:01:28, GigabitEthernet0 / 2 <br><br>  P 192.168.3.0/24, 1 sucessores, FD √© 1024 <br>  Por favor, digite seu e-mail do Facebook para receber um link de cria√ß√£o de senha. <br>  P 192.168.2.0/24, 1 sucessores, FD √© 1024 <br>  Por exemplo: 192.168.12.2 (1024/256), GigabitEthernet0 / 3 <br>  P 192.168.25.0/24, 1 sucessores, FD √© 1024 <br>  Por meio de 192.168.14.4 (1024/768), GigabitEthernet0 / 2 <br>  Por exemplo: 192.168.13.3 (1536/768), GigabitEthernet0 / 0 <br>  P 192.168.35.0/24, 1 sucessores, FD √© 1024 <br>  Por meio de 192.168.14.4 (1024/768), GigabitEthernet0 / 2 <br>  Por favor, digite seu e-mail do Facebook para receber um link de cria√ß√£o de senha. <br>  P 192.168.12.0/24, 1 sucessores, FD √© 768 <br>  via Conectado, GigabitEthernet0 / 3 <br>  P 192.168.45.0/24, 1 sucessores, FD √© 768 <br>  Por meio de 192.168.14.4 (768/512), GigabitEthernet0 / 2 <br>  P 192.168.0.0/24, 1 sucessores, FD √© 512 <br>  via Conectado, GigabitEthernet0 / 1 <br>  P 192.168.13.0/24, 1 sucessores, FD √© 768 <br>  via Conectado, GigabitEthernet0 / 0 <br>  P 192.168.14.0/24, 1 sucessores, FD √© 256 <br>  via Conectado, GigabitEthernet0 / 2 <br>  P 192.168.5.0/24, 1 sucessores, FD √© 1024 <br>  Por meio de 192.168.14.4 (1024/768), GigabitEthernet0 / 2 <br>  Por exemplo: 192.168.13.3 (1536/768), GigabitEthernet0 / 0 </blockquote><br>  Trouxe a tabela de roteamento e topologia novamente por conveni√™ncia, para entender como o roteador agir√° em cada rota, √© necess√°rio saber em que estado eles estavam antes.  Por exemplo, a rota que discutimos anteriormente, a rota 192.168.5.0/24 ser√° perdida, mas tinha FS na tabela de topologia e, portanto, assim que a rota principal for perdida, ela ocupar√° seu lugar na tabela de roteamento.  Uma pergunta interessante √© o que acontecer√° com rotas sem FS.  Mas um pouco de hardware: <br><br>  As entradas na tabela de topologia podem estar em dois estados: ativo e passivo.  A rota est√° em um estado passivo quando a rota √© est√°vel e a busca pela melhor rota n√£o ocorre.  No estado ativo - se voc√™ estiver procurando a melhor rota.  Uma pesquisa de rota √© realizada quando n√£o h√° sucessor poss√≠vel para a rede de destino.  O roteador, em busca de uma rota melhor, envia uma solicita√ß√£o (envia um pacote de consulta) para cada roteador vizinho.  Se o vizinho possui uma rota para a rede de destino, ele responde (envia um pacote de resposta); se n√£o houver rota, o vizinho envia uma solicita√ß√£o aos vizinhos.  O roteador compara todos os FDs para alcan√ßar uma rede espec√≠fica, seleciona a rota com o menor FD e a coloca na tabela de roteamento.  A tabela de topologia pode armazenar 6 rotas para a rede do destinat√°rio (prim√°ria e de backup). <br><br>  As rotas que foram perdidas e n√£o tinham FS mudar√£o para Ativo e o vIOS1 come√ßar√° a perguntar sobre seus vizinhos restantes.  Isso √© feito usando mensagens de consulta. vIOS1  Query   vIOS2  vIOS3,        ‚Äî       192.168.14.0/24, 192.168.45.0/24.   vIOS1   ,    vIOS1    .           Delay:Infifnity,     .      ,      vIOS1.    <b>Poison Reverse</b> . Poison Reverse     Update,     .   Query     192.168.14.0/24, 192.168.45.0/24, vIOS2  vIOS3 ,      ,   ,  ,    Reply      . vIOS2  vIOS3       ,    Reply.    ,      ,    Query      . vIOS1   Reply  vIOS2, vIOS3      Active Timer,     Query  : <br><br> <b>Active Timer</b> ‚Äî           active.              (Reply),       stuck-in-active.  ,      ,      .      3 . <br><br>  ,    3     Reply,   Hello-,       .   ,  3      ,      .            ‚Äî SIA-Query  SIA-Reply. <br>       active ,     : <br><br><ul><li> SIA-Query ‚Äî   1,5  ( )        .   ,   ,     (     ),        .     .             down      . </li><li> SIA-Reply ‚Äî     SIA-Query.     . </li></ul><br>  1,5 ,    Reply  - Query,   SIA-Query,      ,     SIA-Reply,  ,    ,      . <br><br>   ,        ,   FS  ,   .      .        FD,                ,     CD ‚Äî Computed Distance. <br><br> FD ‚Äî      ,  -        FC.  , FD=CD  ,      FD     vIOS4: <br><blockquote> P 192.168.5.0/24, 1 successors, FD is <b>1024</b> <br> via 192.168.13.3 ( <b>1536</b> /768), GigabitEthernet0/0 </blockquote><br>       CD=1024,     vIOS3  CD=1536,    FD=1024,        vIOS4. FD     ,       Active.      Passive  Active,   FD  .      .   .    :    vIOS4, CD  vIOS3= 1536,   vIOS2 = 2048.  delay   vIOS1  vIOS3 ,     CD vIOS2: <br><blockquote> P 192.168.5.0/24, 1 successors, FD is 1024 <br> via 192.168.14.4 (1024/768), GigabitEthernet0/2 <br> via 192.168.13.3 ( <b>2304</b> /768), GigabitEthernet0/0 </blockquote><br>   CD  vIOS3=2304,    FS ,  AD     FC ,   .  :       vIOS2?    ,    ‚Äî    FS,  !       vIOS2  CD = 2048 &lt; 2304,      Active             ,      .     : <br><blockquote> P 192.168.5.0/24, 1 successors, <b>FD is 2048</b> <br> via 192.168.12.2 (2048/1280), GigabitEthernet0/3 <br> via 192.168.13.3 (2304/768), GigabitEthernet0/0 <br></blockquote><br>     vIOS2    FD   -     Active.    vIOS3    . <br><br><h4>  Split Horizon  Poison Reverse  EIGRP </h4><br>    RIP,  EIGRP   Split Horizon ‚Äî      ,   ,         . <br><br> , vIOS4     192.168.0.0/24  vIOS1,      Update  ,    vIOS1.    ,  ,  vIOS1     192.168.0.0/24.  Update  vIOS4, vIOS4      Split Horizon     Update     vIOS1,          .   vIOS4  vIOS1- ¬´      192.168.0.0/24  ,          ,   ¬ª. <br><br> Poison Reverse ‚Äî         .  EIGRP      Delay.   ,    ,  vIOS1   c vIOS4.     Split Horizon   ,   Poison Reverse    Query ,    Update.  Poison Reverse    Split Horizon   Update     ,     .       FC   EIGRP   . <br><br><h4> Stub  </h4><br>    ,        ‚Äî Stub. -  Stub   OSPF,      .      stub,     Hello-     stub  ,     stub,     : <br><blockquote> vIOS5#eigrp stub [connected | leak-map | receive-only | redistributed | static | summary] </blockquote><br>   eigrp stub: <br><br><ul><li>   ( ) ‚Äî connected  summary; </li><li> connected ‚Äî  stub   connected ,    ,     ,   network; </li><li> leak-map ‚Äî Allow dynamic prefixes based on the leak-map; </li><li> receive-only ‚Äî  stub   - ; </li><li> redistributed ‚Äî  stub   redistributed ; </li><li> static ‚Äî  stub   static ,  ,      ; </li><li> summary ‚Äî  stub     (   ). </li></ul><br>       , ,   ,      Stub,      Query  ,   Active. ,   vIOS5  Stub,  vIOS2-4           Query.        Reply,     Query  ,   .     ,      . ,   ,           (      ),     ,      Stub. <br><br><h4>     </h4><br>     ,     show ip eigrp neighbors,   : <br><blockquote> vIOS1#show ip eigrp neighbors <br> EIGRP-IPv4 Neighbors for AS(1) <br> H Address Interface Hold Uptime SRTT RTO Q Seq <br> (sec) (ms) Cnt Num <br> 2 192.168.14.4 Gi0/2 11 00:48:43 23 138 0 168 <br> 0 192.168.12.2 Gi0/3 12 02:31:12 6 100 0 258 <br> 1 192.168.13.3 Gi0/0 10 2d13h 7 100 0 291 <br> vIOS1# </blockquote><br>   ,   .       multicast-,     ,     (ACK),    unicast  ,   .        ,   16 unicast ,    . <br><br><ul><li> <b>Smooth round-trip time (SRTT)</b> ‚Äî          .   .   . </li><li> <b>Multicast Flow Timer</b> ‚Äî     ,       ACK    EIGRP-  multicast ,     unicast .    SRTT,    . </li><li> <b>Retransmission timeout (RTO) ‚Äî</b>    unicast-.    SRTT,    . </li></ul><br>     .   : <br><br><ul><li> cisconinja.wordpress.com/2009/09/18/eigrp-sia-query-and-sia-reply </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">xgu.ru/wiki/EIGRP</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.youtube.com/watch?v=FYUK7blhCZk</a> ‚Äî   EIGRP  4   .   ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.cisco.com/c/en/us/support/docs/ip/enhanced-interior-gateway-routing-protocol-eigrp/16406-eigrp-toc.html#anc9</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt420667/">https://habr.com/ru/post/pt420667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt420657/index.html">An√°lise: de quem dinheiro Elon Musk ser√° capaz de retirar Tesla da bolsa</a></li>
<li><a href="../pt420659/index.html">Campanha USB da HRF (Human Rights Foundation) ‚ÄúFlash Drives for Freedom‚Äù</a></li>
<li><a href="../pt420661/index.html">Infraestrutura de nuvem cont√≠nua</a></li>
<li><a href="../pt420663/index.html">M√©tricas simples e uma maneira de economizar tempo ao procurar problemas na infraestrutura</a></li>
<li><a href="../pt420665/index.html">Criando um aplicativo no .NET Core e Kubernetes: Nossa experi√™ncia</a></li>
<li><a href="../pt420669/index.html">Vis√£o Geral do Mercado de Automa√ß√£o Corporativa: Solu√ß√µes para Empresas de Constru√ß√£o e Gerenciamento de Habita√ß√µes e Utilidades</a></li>
<li><a href="../pt420671/index.html">[Ekaterinburg, an√∫ncio] UralJS # 9 - tr√™s relat√≥rios sobre microsservi√ßos, testes e registro de erros na frente</a></li>
<li><a href="../pt420673/index.html">Docker para Symfony 4 - da LAN √† produ√ß√£o</a></li>
<li><a href="../pt420675/index.html">SOC s√£o pessoas. ‚ÄúOl√°, estamos procurando talentos‚Äù ou de onde v√™m os analistas do centro de monitoramento e resposta a ataques cibern√©ticos</a></li>
<li><a href="../pt420677/index.html">A hist√≥ria de como a Epson forneceu ao planeta 30 milh√µes de "f√°bricas"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>