<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐พ ๐ด๐ป ๐ ูุตู ุงูููุฌ ูุชูุธูู ูุงุฎุชุจุงุฑ ุฑูุฒ ุจุงุณุชุฎุฏุงู Redux Thunk ๐ ๐จ๐ฟโ๐ป โด๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ุจุงูุฌููุน! 


 ูู ูุฐุง ุงูููุดูุฑ ุ ุฃูุฏ ูุดุงุฑูุฉ ููุงุฑุจู ูู ุชูุธูู ูุงุฎุชุจุงุฑ ุงูุดูุฑุฉ ุจุงุณุชุฎุฏุงู Redux Thunk ูู ูุดุฑูุน React . 


 ูุงู ุงูุทุฑูู ุฅูู ุฐูู ุทููููุง ูุดุงุฆ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุตู ุงูููุฌ ูุชูุธูู ูุงุฎุชุจุงุฑ ุฑูุฒ ุจุงุณุชุฎุฏุงู Redux Thunk</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/epam_systems/blog/469371/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฑุญุจุง ุจุงูุฌููุน! </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูููุดูุฑ ุ ุฃูุฏ ูุดุงุฑูุฉ ููุงุฑุจู ูู ุชูุธูู ูุงุฎุชุจุงุฑ ุงูุดูุฑุฉ ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Redux Thunk</a> ูู ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">React</a> . </p><br><p style=";text-align:right;direction:rtl">  ูุงู ุงูุทุฑูู ุฅูู ุฐูู ุทููููุง ูุดุงุฆููุง ุ ูุฐุง ุณุฃุญุงูู ุฅุซุจุงุช ูุฌููุนุฉ ุงูุฃููุงุฑ ูุงูุชุญููุฒ ุงูุชู ุฃุฏุช ุฅูู ุงููุฑุงุฑ ุงูููุงุฆู. </p><a name="habracut"></a><br><h2 id="opisanie-prilozheniya-i-postanovka-problemy" style=";text-align:right;direction:rtl">  ูุตู ุงูุชุทุจูู ูุจูุงู ุงููุดููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุฃููุง ุ ุณูุงู ููููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุถุญ ุงูุดูู ุฃุฏูุงู ุชุฎุทูุท ุตูุญุฉ ูููุฐุฌูุฉ ูู ูุดุฑูุนูุง. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rk/je/ac/rkjeacwa1f4shulpc5ge5y4oi6q.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุจุงูุชุฑุชูุจ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุชูู ุงูุฌุฏูู (ุฑูู 1) ุนูู ุจูุงูุงุช ูููู ุฃู ุชููู ูุฎุชููุฉ ุฌุฏูุง (ูุต ุนุงุฏู ุ ุงุฑุชุจุงุทุงุช ุ ุตูุฑ ุ ุฅูุฎ). </li><li style=";text-align:right;direction:rtl">  ุชููู ููุญุฉ ุงููุฑุฒ (ุฑูู 2) ุจุชุนููู ุฅุนุฏุงุฏุงุช ูุฑุฒ ุงูุจูุงูุงุช ูู ุงูุฌุฏูู ุญุณุจ ุงูุฃุนูุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ุชููู ููุญุฉ ุงูุชุตููุฉ (ุฑูู 3) ุจุชุนููู ูุฑุดุญุงุช ูุฎุชููุฉ ููููุง ูุฃุนูุฏุฉ ุงูุฌุฏูู. </li><li style=";text-align:right;direction:rtl">  ุชุชูุญ ูู ููุญุฉ ุงูุฃุนูุฏุฉ (ุฑูู 4) ุถุจุท ุนุฑุถ ุฃุนูุฏุฉ ุงูุฌุฏูู (ุฅุธูุงุฑ / ุฅุฎูุงุก). </li><li style=";text-align:right;direction:rtl">  ุชุณูุญ ูู ููุญุฉ ุงูููุงูุจ (ุฑูู 5) ุจุชุญุฏูุฏ ููุงูุจ ุงูุฅุนุฏุงุฏุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูุณุจููุง.  ุชุดุชูู ุงูููุงูุจ ุนูู ุจูุงูุงุช ูู ุงูููุญุงุช ุฑูู 2 ูุฑูู 3 ูุฑูู 4 ุ ุจุงูุฅุถุงูุฉ ุฅูู ุจุนุถ ุงูุจูุงูุงุช ุงูุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุถุน ุงูุฃุนูุฏุฉ ูุญุฌููุง ุ ุฅูุฎ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุชู ูุชุญ ุงูููุญุงุช ุนู ุทุฑูู ุงูููุฑ ุนูู ุงูุฃุฒุฑุงุฑ ุงูููุงุจูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุฃุนูุฏุฉ ุงูููุฌูุฏุฉ ูู ุงูุฌุฏูู ุ ูุงูุจูุงูุงุช ุงูุชู ูููู ุฃู ุชููู ูููุง ุ ูููู ููุจุบู ุนุฑุถูุง ุ ูุงูููู ุงูุชู ูููู ุฃู ุชุญุชูู ุนูููุง ุนูุงูู ุงูุชุตููุฉ ุ ูุงููุนูููุงุช ุงูุฃุฎุฑู ุงูููุฌูุฏุฉ ูู ุงูุจูุงูุงุช ุงููุตููุฉ ููุฌุฏูู ุ ูุงูุชู ุชูุทูุจ ุจุดูู ูููุตู ุนู ุงูุจูุงูุงุช ููุณูุง ูู ุจุฏุงูุฉ ุชุญููู ุงูุตูุญุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงุชุถุญ ุฃู ุงูุญุงูุฉ ุงูุญุงููุฉ ููุฌุฏูู ูุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ููู ุชุนุชูุฏ ุนูู ุซูุงุซุฉ ุนูุงูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุจูุงูุงุช ูู ุงูุจูุงูุงุช ุงููุตููุฉ ููุฌุฏูู. </li><li style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏุงุช ุงููุงูุจ ุงููุญุฏุฏ ุญุงูููุง. </li><li style=";text-align:right;direction:rtl">  ุงูุฅุนุฏุงุฏุงุช ุงููุฎุตุตุฉ (ูุชู ุญูุธ ุฃู ุชุบููุฑุงุช ุชุชุนูู ุจุงููุงูุจ ุงููุญุฏุฏ ุจููุน ูู "ุงููุณูุฏุฉ" ุ ูุงูุชู ูููู ุชุญููููุง ุฅูู ูุงูุจ ุฌุฏูุฏ ุ ุฅูุง ุชุญุฏูุซ ุงููุงูุจ ุงูุญุงูู ุจุฅุนุฏุงุฏุงุช ุฌุฏูุฏุฉ ุ ุฃู ุญุฐููุง ูุฅุนุงุฏุฉ ุงููุงูุจ ุฅูู ุญุงูุชู ุงูุฃุตููุฉ). </li></ul><br><p style=";text-align:right;direction:rtl">  ููุง ุฐูุฑ ุฃุนูุงู ุ ูุซู ูุฐู ุงูุตูุญุฉ ูู ูููุฐุฌูุฉ.  ููู ุตูุญุฉ ูู ูุฐู ุงูุตูุญุงุช (ุฃู ุจุดูู ุฃูุซุฑ ุฏูุฉ ุ ุจุงููุณุจุฉ ููุฌุฏูู ุงูููุฌูุฏ ูููุง) ุ ูุชู ุฅูุดุงุก ููุงู ูููุตู ูู ูุณุชูุฏุน Redux ูุชูููุฑ ุงูุฑุงุญุฉ ูู ุงูุชุดุบูู ุจุงุณุชุฎุฏุงู ุจูุงูุงุชู ููุนููุงุชู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุชุนููู ูุฌููุนุงุช ูุชุฌุงูุณุฉ ูู ููุดุฆู thunk ู action ูุชุญุฏูุซ ุงูุจูุงูุงุช ุนูู ููุงู ูุญุฏุฏ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชู ุงุณุชุฎุฏุงู</a> ุงูุทุฑููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุงููุฉ</a> (ููุน ูู ุงููุตูุน): </p><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionsCreator = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prefix, getCurrentStore, entityModel</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/* --- ACTIONS BLOCK --- */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchTotalCounterStart</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_START`</span></span> }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchTotalCounterSuccess</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">payload</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_SUCCESS`</span></span>, payload }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchTotalCounterError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_ERROR`</span></span>, error }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyFilterSuccess</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">payload</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">APPLY_FILTER_SUCCESS`</span></span>, payload }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyFilterError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">APPLY_FILTER_ERROR`</span></span>, error }; } <span class="hljs-comment"><span class="hljs-comment">/* --- THUNKS BLOCK --- */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchTotalCounter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">filter</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> dispatch =&gt; { dispatch(fetchTotalCounterStart()); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { payload } } = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> entityModel.fetchTotalCounter(filter); dispatch(fetchTotalCounterSuccess(payload)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { dispatch(fetchTotalCounterError(error)); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">filter, dispatch</span></span></span><span class="hljs-function">) </span></span>{ dispatch(fetchTotalCounter(filter)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> entityModel.fetchData(filter); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyFilter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newFilter</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (dispatch, getStore) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = getStore(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> currentStore = getCurrentStore(store); <span class="hljs-comment"><span class="hljs-comment">// 'getFilter' comes from selectors. const filter = newFilter || getFilter(currentStore); const { data: { payload } } = await fetchData(filter, dispatch); dispatch(applyFilterSuccess(payload)); } catch (error) { dispatch(applyFilterError(error)); } }; } return { fetchTotalCounterStart, fetchTotalCounterSuccess, fetchTotalCounterError, applyFilterSuccess, applyFilterError, fetchTotalCounter, fetchData, applyFilter, }; };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุญูุซ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>prefix</code> - <code>prefix</code> ููุงู ูู ูุณุชูุฏุน Redux.  ุฅููุง ุณูุณูุฉ ูู ุงููููุฐุฌ "CATS_" ุ "MICE_" ุ ุฅูุฎ. </li><li style=";text-align:right;direction:rtl">  <code>getCurrentStore</code> - ูุญุฏุฏ ูููู ุจุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงูุญุงููุฉ ุนูู ุงูููุงู ูู ูุณุชูุฏุน Redux. </li><li style=";text-align:right;direction:rtl">  <code>entityModel</code> - ูุซูู ููุฆุฉ ูููุฐุฌ ุงูููุงู.  ูู ูุงุญูุฉ ุ ูุชู ุงููุตูู ุฅูู api ูู ุฎูุงู ุงููููุฐุฌ ูุฅูุดุงุก ุทูุจ ุฅูู ุงูุฎุงุฏู ุ ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุชู ูุตู ุจุนุถ ููุทู ูุนุงูุฌุฉ ุงูุจูุงูุงุช (ุฃู ุบูุฑ ุฐูู) ุงููุนูุฏุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุชูุญ ูู ูุฐุง ุงููุตูุน ุฃู ูุตู ุจูุฑููุฉ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ูุงููุนููุงุช ุงูุฎุงุตุฉ ุจููุงู ูุนูู ูู ูุณุชูุฏุน Redux ูุฑุจุทู ุจุงูุฌุฏูู ุงูููุงุจู ููุฐุง ุงูููุงู. </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ููุฌูุฏ ุงููุซูุฑ ูู ุงููุฑูู ุงูุฏูููุฉ ูู ุฅุฏุงุฑุฉ ูุฐุง ุงููุธุงู ุ ูุฅู thunk ูููู ุฃู ูููู ูุนูุฏูุง ูุถุฎููุง ููุฑุจููุง ููุญุชูู ุนูู ุฃุฌุฒุงุก ููุฑุฑุฉ.  ูุชุจุณูุทูุง ุ ููุฐูู ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุฑูุฒ ุ ูุชู ุชูุณูู thunks ูุนูุฏุฉ ุฅูู ุฃุจุณุท ูุชุฌูุน ูู ุชูููู.  ูุชูุฌุฉ ูุฐูู ุ ูุฏ <code>fetchTotalCounter</code> ุงูุขู ุฅูู ุฃู thunk ูุณุชุฏุนู ุงูุขุฎุฑ ุ ูุงูุฐู ููููู ุจุงููุนู ุฅุฑุณุงู <code>applyFilter</code> ุนุงุฏูุฉ (ูุซู <code>applyFilter</code> - <code>fetchTotalCounter</code> ูู ุงููุซุงู ุฃุนูุงู).  ูุนูุฏูุง ุชู ุฃุฎุฐ ุฌููุน ุงูููุงุท ุงูุฑุฆูุณูุฉ ูู ุงูุงุนุชุจุงุฑ ุ ูุชู ุชูุถูุญ ุฌููุน ููุดุฆู ุงูุฅุฌุฑุงุกุงุช ูุงูุฅุฌุฑุงุกุงุช ุงููุงุฒูุฉ ุ ูุงู ุงูููู ุงูุฐู ูุญุชูู ุนูู ุฏุงูุฉ <code>actionsCreator</code> ูุญุชูู ุนูู <code>actionsCreator</code> 1200 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุชู ุงุฎุชุจุงุฑู <code>actionsCreator</code> ูุจูุฑ.  ูุญุชูู ููู ุงูุงุฎุชุจุงุฑ ุฃูุถูุง ุนูู ุญูุงูู 1200 ุฎุท ุ ููู ุงูุชุบุทูุฉ ูุงูุช ูู ุฃูุถู ุงูุฃุญูุงู 40-50ูช. </p><br><p style=";text-align:right;direction:rtl">  ููุง ุ ุจุงูุทุจุน ุ ูุชู ุชุจุณูุท ุงููุซุงู ุฅูู ุญุฏ ูุจูุฑ ุ ุณูุงุก ูู ุญูุซ ุนุฏุฏ thunk ูููุทููุง ุงูุฏุงุฎูู ุ ูููู ูุฐุง ุณูููู ูุงููุงู ูุฅุธูุงุฑ ุงููุดููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุจู ุฅูู ููุนูู ูู thunk ูู ุงููุซุงู ุฃุนูุงู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>fetchTotalCounter</code> - ุฅุฑุณุงู <code>fetchTotalCounter</code> ููุท. </li><li style=";text-align:right;direction:rtl">  <code>applyFilter</code> - ุจุงูุฅุถุงูุฉ ุฅูู ุฅุฑุณุงู <code>applyFilterSuccess</code> ( <code>applyFilterSuccess</code> ุ <code>applyFilterError</code> ) ุ ููู ุฃูุถูุง thunk ุขุฎุฑ ( <code>fetchTotalCounter</code> ). <br>  ุณูู ูุนูุฏ ุฅูููู ุจุนุฏ ูููู. </li></ul><br><p style=";text-align:right;direction:rtl">  ุชู ุงุฎุชุจุงุฑ ูู ูุฐุง ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุญู ุงูุชุงูู</a> (ุชู ุงุณุชุฎุฏุงู ุงูุฅุทุงุฑ ูุงุฎุชุจุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Jest</a> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> configureMockStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-mock-store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> thunk <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-thunk'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { actionsCreator } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../actions'</span></span>; describe(<span class="hljs-string"><span class="hljs-string">'actionsCreator'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> defaultState = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> middlewares = [thunk]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mockStore = configureMockStore(middlewares); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> prefix = <span class="hljs-string"><span class="hljs-string">'TEST_'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getCurrentStore = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> defaultState; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> entityModel = { <span class="hljs-attr"><span class="hljs-attr">fetchTotalCounter</span></span>: jest.fn(), <span class="hljs-attr"><span class="hljs-attr">fetchData</span></span>: jest.fn(), }; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actions; beforeEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { actions = actionsCreator(prefix, getCurrentStore, entityModel); }); describe(<span class="hljs-string"><span class="hljs-string">'fetchTotalCounter'</span></span>, () =&gt; { it(<span class="hljs-string"><span class="hljs-string">'should dispatch correct actions on success'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> filter = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> payload = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = mockStore(defaultState); entityModel.fetchTotalCounter.mockResolvedValueOnce({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { payload }, }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> expectedActions = [ { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_START`</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_SUCCESS`</span></span>, payload, } ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> store.dispatch(actions.fetchTotalCounter(filter)).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { expect(store.getActions()).toEqual(expectedActions); }); }); it(<span class="hljs-string"><span class="hljs-string">'should dispatch correct actions on error'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> filter = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> error = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = mockStore(defaultState); entityModel.fetchTotalCounter.mockRejectedValueOnce(error); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> expectedActions = [ { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_START`</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_ERROR`</span></span>, error, } ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> store.dispatch(actions.fetchTotalCounter(filter)).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { expect(store.getActions()).toEqual(expectedActions); }); }); }); describe(<span class="hljs-string"><span class="hljs-string">'applyFilter'</span></span>, () =&gt; { it(<span class="hljs-string"><span class="hljs-string">'should dispatch correct actions on success'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> payload = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newFilter = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = mockStore(defaultState); entityModel.fetchData.mockResolvedValueOnce({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { payload } }); entityModel.fetchTotalCounter.mockResolvedValueOnce({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: counter }, }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> expectedActions = [ <span class="hljs-comment"><span class="hljs-comment">// fetchTotalCounter actions { type: `${prefix}FETCH_TOTAL_COUNTER_START` }, { type: `${prefix}FETCH_TOTAL_COUNTER_SUCCESS`, payload: counter, }, // applyFilter actions { type: `${prefix}APPLY_FILTER_SUCCESS`, payload, } ]; return store.dispatch(actions.applyFilter(newFilter)).then(() =&gt; { expect(store.getActions()).toEqual(expectedActions); }); }); it('should dispatch correct actions on error', () =&gt; { const error = {}; const counter = 0; const newFilter = {}; const store = mockStore(defaultState); entityModel.fetchData.mockRejectedValueOnce(error); entityModel.fetchTotalCounter.mockResolvedValueOnce({ data: { payload: counter }, }); const expectedActions = [ // fetchTotalCounter actions { type: `${prefix}FETCH_TOTAL_COUNTER_START` }, { type: `${prefix}FETCH_TOTAL_COUNTER_SUCCESS`, payload: counter, }, // applyFilter actions { type: `${prefix}APPLY_FILTER_ERROR`, error, } ]; return store.dispatch(actions.applyFilter(newFilter)).then(() =&gt; { expect(store.getActions()).toEqual(expectedActions); }); }); }); });</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ุ ูุง ุชูุฌุฏ ูุดุงูู ูู ุงุฎุชุจุงุฑ ุงูููุน ุงูุฃูู ูู thunk - ูู ูุง ุชุญุชุงุฌู ูู ุฑุจุท <code>entityModel</code> ุทุฑุงุฒ entityModel ุ ูููู ุงูููุน ุงูุซุงูู ุฃูุซุฑ ุชุนููุฏูุง - ูุฌุจ ุนููู ูุณุญ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุณูุณูุฉ ูุงููุฉ ุชุณูู thunk ูุทุฑู ุงููููุฐุฌ ุงูููุงุจูุฉ.  ุจุฎูุงู ุฐูู ุ ููุน ุงูุงุฎุชุจุงุฑ ูู ุชุฏููุฑ ุงูุจูุงูุงุช ( <strong>{data: {payload}}</strong> ) ุ ููููู ุฃู ูุญุฏุซ ูุฐุง ุจุดูู ุตุฑูุญ ุฃู ุถููู (ููุฏ ูุฑ ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ ุ ูููู ูุน ุฅุฌุฑุงุก ุจุญุซ ุฏููู ุ ูุงุญุธูุง ุฃูู ูู ุงูุซุงููุฉ / ุงูุซุงูุซุฉ ุฑุงุจุท ูู ูุฐู ุงูุณูุณูุฉ ูุงู ููุงู ุงูุฎูุงุถ ูู ุงูุงุฎุชุจุงุฑ ุจุณุจุจ ุนุฏู ูุฌูุฏ ุจูุงูุงุช ููููุฉ).  ูู ุงูุณูุก ุฃูุถูุง ุฃู ุชุชุญูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช ูููุธุงุฆู ุงููุฑุฏูุฉ ุฅูู ููุน ูู ุงูุชูุงูู ุ ูุชุตุจุญ ูุฑุชุจุทุฉ ุจุดูู ูุซูู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุณุคุงู ุงูุฐู ูุทุฑุญ ููุณู: ููุงุฐุง ูู ูุธููุฉ <code>applyFilter</code> ุชุญูู ูู ููููุฉ <code>fetchTotalCounter</code> ุฅุฐุง ูุงูุช ุงุฎุชุจุงุฑุงุช ููุตูุฉ ูููุตูุฉ <strong>ูุฏ</strong> ูุชุจุช <strong>ุจุงููุนู ูู</strong> ุฃุฌููุงุ  ููู ูููููู ุฌุนู ุงุฎุชุจุงุฑ ุงูููุน ุงูุซุงูู ูู thunk ุฃูุซุฑ ุงุณุชููุงููุฉุ  ุณูููู ูู ุงูุฑุงุฆุน ุงูุญุตูู ุนูู ูุฑุตุฉ ูุงุฎุชุจุงุฑ ุฃู <strong>thunk</strong> (ูู ูุฐู ุงูุญุงูุฉ <code>fetchTotalCounter</code> ) <strong>ูุณูู ููุท ุจุงููุนููุงุช ุงูุตุญูุญุฉ</strong> ุ ููู ุชููู ููุงู ุญุงุฌุฉ ูุฑุนุงูุฉ moks ุญุชู ุชุนูู ุจุดูู ุตุญูุญ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ููู ููุนู ุฐููุ  ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ุงููุฑุงุฑ ุงููุงุถุญ: ุฑุจุท ุฏุงูุฉ fetchData ุ ูุงูุชู ุชุณูู ูู <code>applyFilter</code> ุ ุฃู ูููู <code>fetchTotalCounter</code> (ุญูุซ ูุชู ุงุณุชุฏุนุงุก thunk ุขุฎุฑ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ูุจุงุดุฑุฉู ุ ูููุณ ูู ุฎูุงู ุจุนุถ ุงููุธุงุฆู ุงูุฃุฎุฑู ูุซู <code>fetchData</code> ). </p><br><p style=";text-align:right;direction:rtl">  ููุฌุฑุจูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ุณูู ูููู ุจุชุบููุฑ ุงูุจุฑูุงูุฌ ุงููุตู ุงููุงุฌุญ ููุท. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ ุฑูู 1.  ูุธููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>fetchData</code></a> ููููุฉ: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs">describe('applyFilter', () =&gt; { it('should dispatch correct actions on success', () =&gt; { const payload = {}; - const counter = 0; const newFilter = {}; const store = mockStore(defaultState); - entityModel.fetchData.mockResolvedValueOnce({ data: { payload } }); - entityModel.fetchTotalCounter.mockResolvedValueOnce({ - data: { payload: counter }, - }); + const fetchData = jest.spyOn(actions, 'fetchData'); + // or fetchData.mockImplementationOnce(Promise.resolve({ data: { payload } })); + fetchData.mockResolvedValueOnce({ data: { payload } }); const expectedActions = [ - // Total counter actions - { type: `${prefix}FETCH_TOTAL_COUNTER_START` }, - { - type: `${prefix}FETCH_TOTAL_COUNTER_SUCCESS`, - payload: counter, - }, - // apply filter actions { type: `${prefix}APPLY_FILTER_SUCCESS`, payload, } ]; return store.dispatch(actions.applyFilter(newFilter)).then(() =&gt; { expect(store.getActions()).toEqual(expectedActions); + expect(actions.fetchTotalCounter).toBeCalledWith(newFilter); }); }); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ูุญู ุฃุณููุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>jest.spyOn</code></a> ูุญู ุงูุชุทุจูู ุงูุชุงูู (ูุฑุจูุง ุจุงูุถุจุท): </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">actions.fetchData = jest.fn(actions.fetchData);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุณูุญ ููุง "ุจูุฑุงูุจุฉ" ุงููุธููุฉ ูููู ูุง ุฅุฐุง ูุงู ุชู ุงุณุชุฏุนุงุคูุง ููุน ูุง ุงููุนููุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุญุตููุง ุนูู ุงูุฎุทุฃ ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs">Difference: - Expected + Received Array [ Object { - "payload": Object {}, - "type": "TEST_APPLY_FILTER_SUCCESS", + "type": "TEST_FETCH_TOTAL_COUNTER_START", }, + Object { + "error": [TypeError: Cannot read property 'data' of undefined], + "type": "TEST_FETCH_TOTAL_COUNTER_ERROR", + }, + Object { + "error": [TypeError: Cannot read property 'data' of undefined], + "type": "TEST_APPLY_FILTER_ERROR", + }, ]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุบุฑูุจ ุ ููุฏ ุงุฎุชุจุฃูุง ุฏุงูุฉ fetchData ุ ูุน <code>fetchData</code> ุชูููุฐูุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">fetchData.mockResolvedValueOnce({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { payload } })</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุงููุธููุฉ ุชุนูู ุจุงูุถุจุท ููุง ูุงู ูู ูุจู ุ ููุฐุง ูู ุ ููููุฉ ูู ุชูุฌุญ!  ููุฌุฑุจูุง ุจุทุฑููุฉ ูุฎุชููุฉ. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ ุฑูู 2.  ููููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>fetchTotalCounter</code></a> ูุธููุฉ: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs">describe('applyFilter', () =&gt; { it('should dispatch correct actions on success', () =&gt; { const payload = {}; - const counter = 0; const newFilter = {}; const store = mockStore(defaultState); entityModel.fetchData.mockResolvedValueOnce({ data: { payload } }); - entityModel.fetchTotalCounter.mockResolvedValueOnce({ - data: { payload: counter }, - }); + const fetchTotalCounter = jest.spyOn(actions, 'fetchTotalCounter'; + fetchTotalCounter.mockImplementation(() =&gt; {}); const expectedActions = [ - // Total counter actions - { type: `${prefix}FETCH_TOTAL_COUNTER_START` }, - { - type: `${prefix}FETCH_TOTAL_COUNTER_SUCCESS`, - payload: counter, - }, - // apply filter actions { type: `${prefix}APPLY_FILTER_SUCCESS`, payload, } ]; return store.dispatch(actions.applyFilter(newFilter)).then(() =&gt; { expect(store.getActions()).toEqual(expectedActions); + expect(actions.fetchTotalCounter).toBeCalledWith(newFilter); }); }); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุตู ุนูู ููุณ ุงูุฎุทุฃ ุจุงูุถุจุท.  ูุณุจุจ ูุง ุ ูููุง ูุฏููุง ูุง ุชุญู ูุญู ุงูุชูููุฐ ุงูุฃุตูู ูููุธุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงุณุชูุดุงู ูุฐู ุงููุดููุฉ ุจููุฑุฏู ูุงูุนุซูุฑ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุนุถ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุนูููุงุช</a> ุนูู ุงูุฅูุชุฑูุช ุ ุฃุฏุฑูุช ุฃู ูุฐู ุงููุดููุฉ ููุฌูุฏุฉ ููุณ ููุท ูุนู ุ ูุชู ุญููุง (ุจุฑุฃูู) ุจุดูู ูุจูุฑ.  ุนูุงูุฉ ุนูู ุฐูู ุ ุชุนุฏ ุงูุฃูุซูุฉ ุงูููุถุญุฉ ูู ูุฐู ุงููุตุงุฏุฑ ุฌูุฏุฉ ุฅูู ุฃู ุชุตุจุญ ุฌุฒุกูุง ูู ุดูุก ูุฑุจุทูุง ุจูุธุงู ูุงุญุฏ (ูู ุญุงูุชูุง ุ ูุฐุง ุงููุตูุน ุฐู ูุนููุงุช). </p><br><p style=";text-align:right;direction:rtl">  ูู ูุดุฑูุนูุง ูู ุฎุท ุฃูุงุจูุจ ุฌูููููุฒ ุ ููุงู ุงุฎุชุจุงุฑ ุฑูุฒ ูู SonarQube ุ ูุงูุฐู ูุชุทูุจ ุชุบุทูุฉ ุงููููุงุช ุงููุนุฏูุฉ (ุงูุชู ูู ูู ุทูุจ ุฏูุฌ / ุณุญุจ) <code>&gt; 60%</code> .  ูุธุฑูุง ูุฃู ุชุบุทูุฉ ูุฐุง ุงููุตูุน ุ ููุง ููู ุณุงุจููุง ุ ูู ุชูู ูุฑุถูุฉ ุ ูุงูุญุงุฌุฉ ุงููุงุณุฉ ูุชุบุทูุฉ ูุซู ูุฐุง ุงูููู ุชุณุจุจ ุงูุงูุชุฆุงุจ ููุท ุ ูุฌุจ ุงูููุงู ุจุดูุก ูุง ุ ูุฅูุง ููุฏ ูุชุจุงุทุฃ ุชุณููู ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ ูุน ูุฑูุฑ ุงูููุช.  ุชู ุญูุธ ุชุบุทูุฉ ุงุฎุชุจุงุฑ ุงููููุงุช ุงูุฃุฎุฑู ููุท (ุงูููููุงุช ูุงููุธุงุฆู) ูู ููุณ ุทูุจ ุงูุฏูุฌ / ุงูุณุญุจ ุ ูู ุฃุฌู ุงููุตูู ุฅูู ุชุบุทูุฉูช ููุนูุงูุฉ ุงููุฑุบูุจุฉ ุ ูููู ูู ุงููุงูุน ุ ูุงู ุญู ุจุฏูู ุ ูููุณ ุญูุงู ูููุดููุฉ.  ููุญุธุฉ ูุงุญุฏุฉ ุฌูุฏุฉ ุ ุจุนุฏ ุฃู ุฎุตุตุช ุงููููู ูู ุงูููุช ูู ุณุจุงู ุงูุนุฏู ุ ุจุฏุฃุช ุฃููุฑ ูู ููููุฉ ุญู ูุฐู ุงููุดููุฉ. </p><br><h2 id="popytka-resheniya-problemy-1-ya-chto-to-slyshal-pro-redux-saga" style=";text-align:right;direction:rtl">  ูุญุงููุฉ ูุญู ุงููุดููุฉ ุฑูู 1.  ุณูุนุช ุดูุฆูุง ุนู Redux-Saga ... </h2><br><p style=";text-align:right;direction:rtl">  ... ูุฃุฎุจุฑููู ุฃู ุงูุงุฎุชุจุงุฑ ูุชู ุชุจุณูุทู ุฅูู ุญุฏ ูุจูุฑ ุนูุฏ ุงุณุชุฎุฏุงู ูุฐู ุงููุณูุทุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ุฅุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุธุฑุช ุฅูู ุงููุซุงุฆู</a> ุ ูุฃูุช ููุฏูุด ูู ูุฏู ุจุณุงุทุฉ ุงุฎุชุจุงุฑ ุงูุดูุฑุฉ.  ูููู ุงูุนุตูุฑ ููุณู ูู ุญูููุฉ ุฃูู ูุน ูุฐุง ุงูููุฌ ูุง ุชูุฌุฏ ูุดููุฉ ุนูู ุงูุฅุทูุงู ูู ุญูููุฉ ุฃู ุจุนุถ ุงูููุญูุฉ ูููููุง ุงุณุชุฏุนุงุก ููุญูุฉ ุฃุฎุฑู - ูููููุง ุฃู ูุชุจูู ู "ูุตุบู" ุฅูู ุงููุธุงุฆู ุงูุชู ุชููุฑูุง ุงููุณูุทุฉ ( <code>put</code> ุ <code>take</code> ุ ุฅูุฎ) ุ ู ุชุญูู ูู ุฃูู ุชู ุงุณุชุฏุนุงุคูุง (ูุชู ุงุณุชุฏุนุงุคูุง ุจุงููุนููุงุช ุงูุตุญูุญุฉ).  ูุฐุง ูู ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ุชุตู ุงููุธููุฉ ุฅูู ูุธููุฉ ุฃุฎุฑู ูุจุงุดุฑุฉ ุ ูููููุง ุชุดูุฑ ุฅูู ูุธููุฉ ูู ุงูููุชุจุฉ ุ ูุงูุชู ุชุณุชุฏุนู ุจุนุฏ ุฐูู ุงููุธุงุฆู / ุงููุฌููุนุงุช ุงููููุฉ ุงูุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  "ููุงุฐุง ูุง ุชุฌุฑุจ ูุฐู ุงููุณูุทุฉุ"  ููุฑุช ุ ูุญุตูุช ุนูู ุงูุนูู.  ุจุฏุฃ ุชุงุฑูุฎูุง ุชููููุง ูู Jira ุ ุฃูุดุฃ ุงูุนุฏูุฏ ูู ุงูููุงู ููู (ูู ุงูุจุญุซ ุฅูู ุงูุชูููุฐ ููุตู ุจููุฉ ูุฐุง ุงููุธุงู ุจุฑูุชู) ุ ูุชููู "ุงูุถูุก ุงูุฃุฎุถุฑ" ูุจุฏุฃ ูู ุนูู ูุณุฎุฉ ุจุณูุทุฉ ูู ุงููุธุงู ุงูุญุงูู ุจููุฌ ุฌุฏูุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ุ ุณุงุฑุช ุงูุฃููุฑ ุนูู ูุง ูุฑุงู.  ุจูุงุกู ุนูู ูุตูุญุฉ ุฃุญุฏ ุงููุทูุฑูู ุ ูุงู ูู ุงููููู ุฅูุดุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุญูุฉ ุนุงูููุฉ ูุชุญููู ุงูุจูุงูุงุช ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก</a> ูู ุทุฑููุฉ ุฌุฏูุฏุฉ.  ููุน ุฐูู ุ ูู ูุฑุญูุฉ ูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงูุช ููุงู ูุดุงูู ูุน ุงูุงุฎุชุจุงุฑ</a> (ูุงูุชู ุ ุจุงูููุงุณุจุฉ ุ ูู ูุชู ุญููุง ุญุชู ุงูุขู).  ุงุนุชูุฏุช ุฃู ูุฐุง ูููู ุฃู ูุฏูุฑ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงููุชุงุญุฉ ุญุงูููุง ูููุชุฌ ุนูู ูุฌููุนุฉ ูู ุงูุฃุฎุทุงุก ุ ูุฐูู ูุฑุฑุช ุชุฃุฌูู ุงูุนูู ูู ูุฐู ุงููููุฉ ุฅูู ุฃู ูููู ููุงู ุญู ูุง ูููุดููุฉ ุ ูุชูุตูุช ุฅูู ููุงู ูุซูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ูุฑ ุดูุฑ ุฃู ุดูุฑูู ุ ููู ูุชู ุงูุนุซูุฑ ุนูู ุญู ุ ูุจุนุฏ ุฐูู ูุงูุดูุง ูุน ูุคูุงุก ุงูุฃุดุฎุงุต.  ูููุงุฏุฉ ุชูุฏู (ุบุงุฆุจ) ูู ูุฐู ุงููููุฉ ุ ูุฑุฑูุง ุงูุชุฎูู ุนู ุชุทุจูู Redux-Saga ูู ุงููุดุฑูุน ุ ูุฃูู ุจุญููู ุฐูู ุงูููุช ุฃุตุจุญ ูููููุง ููุบุงูุฉ ูู ุญูุซ ุชูุงููู ุงูุนูุงูุฉ ูุงูุนุฏุฏ ุงููุญุชูู ูู ุงูุฃุฎุทุงุก.  ูุฐูู ุงุณุชูุฑูุง ุฃุฎูุฑูุง ุนูู ุงุณุชุฎุฏุงู Redux Thunk. </p><br><h2 id="popytka-resheniya-problemy-2-thunk-moduli" style=";text-align:right;direction:rtl">  ูุญุงููุฉ ูุญู ุงููุดููุฉ ุฑูู 2.  ูุญุฏุงุช ุซุงูู </h2><br><p style=";text-align:right;direction:rtl">  ููููู ูุฑุฒ ูู thunk ุฅูู ูููุงุช ูุฎุชููุฉ ุ ููู ุชูู ุงููููุงุช ุงูุชู ูุณุชุฏุนู ูููุง thunk ุงูุขุฎุฑ (ูุณุชูุฑุฏ) ุ ููููู ูุณุญ ูุฐุง ุงูุงุณุชูุฑุงุฏ ุฅูุง ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>jest.mock</code></a> ุฃู ุจุงุณุชุฎุฏุงู <code>jest.spyOn</code> ููุณู.  ูุจุงูุชุงูู ุ ุณูู ูุญูู ุงููููุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ููุชุญูู ูู ุฃู ุจุนุถ thunk ุงูุฎุงุฑุฌู <strong>ูุงู ูุณูู</strong> ูุน ุงููุนููุงุช ุงููุงุฒูุฉ ุ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุงูููู ุจุดุฃู moks ูุฐูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูููู ูู ุงูุฃูุถู ูุณุฑ ูู thunk ููููุง ูุบุฑุถูุง ุงููุธููู ุ ุญุชู ูุง ูุชู ุงูุงุญุชูุงุธ ุจูุง ุฌููุนูุง ูู ูููุฉ ูุงุญุฏุฉ.  ูุฐูู ุชููุฒุช ุซูุงุซุฉ ูู ูุฐู ุงูุฃููุงุน: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุชุนููุฉ ุจุงูุนูู ูุน ุงูููุงูุจ - <code>templates</code> . </li><li style=";text-align:right;direction:rtl">  ุงููุชุนููุฉ ุจุงูุนูู ูุน ุนุงูู ุงูุชุตููุฉ (ุงููุฑุฒ ุ ุนุฑุถ ุงูุฃุนูุฏุฉ) - <code>filter</code> . </li><li style=";text-align:right;direction:rtl">  ูุชุนูู ุจุงูุนูู ูุน ุงูุฌุฏูู (ุชุญููู ุจูุงูุงุช ุฌุฏูุฏุฉ ุนูุฏ ุงูุชูุฑูุฑ ุ ูุธุฑูุง ูุฃู ุงูุฌุฏูู ุจู ุชูุฑูุฑ ุงูุชุฑุงุถู ุ ูุชุญููู ุจูุงูุงุช ุงูุชุนุฑูู ุ ูุชุญููู ุงูุจูุงูุงุช ุนู ุทุฑูู ุนุฏุงุฏ ุงูุณุฌูุงุช ูู ุงูุฌุฏูู ุ ุฅูุฎ) - <code>table</code> . </li></ul><br><p style=";text-align:right;direction:rtl">  ุชู ุงูุชุฑุงุญ ุจููุฉ ุงููุฌูุฏ ูุงูููู ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">src/ |-- store/ | |-- filter/ | | |-- actions/ | | | |-- thunks/ | | | | |-- __tests__/ | | | | | |-- applyFilter.test.js | | | | |-- applyFilter.js | | | |-- actionCreators.js | | | |-- index.js | |-- table/ | | |-- actions/ | | | |-- thunks/ | | | | |-- __tests__/ | | | | | |-- fetchData.test.js | | | | | |-- fetchTotalCounter.test.js | | | | |-- fetchData.js | | | | |-- fetchTotalCounter.js | | | |-- actionCreators.js | | | |-- index.js (main file with actionsCreator)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุซุงู ุนูู ูุฐู ุงูุนูุงุฑุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </p><br><p style=";text-align:right;direction:rtl">  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููู ุงูุงุฎุชุจุงุฑ ุงูุฎุงุต ุจู applicationFilter ุ</a> ููููู ุฃู ุชุฑู ุฃููุง ูุตููุง ุฅูู ุงููุฏู ุงูุฐู ูุณุนู ุฌุงูุฏูู ูู ุฃุฌูู - ูุง ููููู ูุชุงุจุฉ mokas ููุญูุงุธ ุนูู ุงูุชุดุบูู ุงูุตุญูุญ ูู <code>fetchData</code> / <code>fetchTotalCounter</code> .  ูููู ุจุฃู ุซูู ... </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>applyFilter.js</code></a> : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { applyFilterSuccess, applyFilterError } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { fetchData } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../../table/actions'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// selector const getFilter = store =&gt; store.filter; export function applyFilter(prefix, getCurrentStore, entityModel) { return newFilter =&gt; { return async (dispatch, getStore) =&gt; { try { const store = getStore(); const currentStore = getCurrentStore(store); const filter = newFilter || getFilter(currentStore); const { data: { payload } } = await fetchData(prefix, entityModel)(filter, dispatch); dispatch(applyFilterSuccess(prefix)(payload)); } catch (error) { dispatch(applyFilterError(prefix)(error)); } }; }; }</span></span></code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>actionsCreator</code></a> : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> filterActions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./filter/actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tableActions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./table/actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionsCreator = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prefix, getCurrentStore, entityModel</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">fetchTotalCounterStart</span></span>: tableActions.fetchTotalCounterStart(prefix), <span class="hljs-attr"><span class="hljs-attr">fetchTotalCounterSuccess</span></span>: tableActions.fetchTotalCounterSuccess(prefix), <span class="hljs-attr"><span class="hljs-attr">fetchTotalCounterError</span></span>: tableActions.fetchTotalCounterError(prefix), <span class="hljs-attr"><span class="hljs-attr">applyFilterSuccess</span></span>: filterActions.applyFilterSuccess(prefix), <span class="hljs-attr"><span class="hljs-attr">applyFilterError</span></span>: filterActions.applyFilterError(prefix), <span class="hljs-attr"><span class="hljs-attr">fetchTotalCounter</span></span>: tableActions.fetchTotalCounter(prefix, entityModel), <span class="hljs-attr"><span class="hljs-attr">fetchData</span></span>: tableActions.fetchData(prefix, entityModel), <span class="hljs-attr"><span class="hljs-attr">applyFilter</span></span>: filterActions.applyFilter(prefix, getCurrentStore, entityModel) }; };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ูููุฐุฌูุฉ ุงูุงุฎุชุจุงุฑุงุช ุ ูุงู ุนูู ุฃู ุฃุฏูุน ูุน ุงุฒุฏูุงุฌูุฉ ุงูููุฏ ูุงุนุชูุงุฏ ููู ููุบุงูุฉ ูู thunk ุนูู ุจุนุถูุง ุงูุจุนุถ.  ุฅู ุฃุฏูู ุชุบููุฑ ูู ุณูุณูุฉ ุงูุงุชุตุงู ุณูุคุฏู ุฅูู ุฅุนุงุฏุฉ ุจูุน ููุซูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุซุงู ุฃุนูุงู ุ ุชู ุนุฑุถ ูุซุงู <code>table</code> <code>filter</code> ููุญูุงุธ ุนูู ุชูุงุณู ุงูุฃูุซูุฉ ุงููุนุทุงุฉ.  ูู ุงููุงูุน ุ ุชู ุจุฏุก ุฅุนุงุฏุฉ ุฅูุดุงุก ุงููุจุงูู ุจุงุณุชุฎุฏุงู <code>templates</code> (ููุง ุงุชุถุญ ุฃููุง ุฃุจุณุท) ุ ูููุงู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฅุนุงุฏุฉ ุงููุนุงูุฌุฉ ุ ุชู ุชุบููุฑ ุจุณูุท ูู ููููู ุงูุนูู ูุน ุงูููุงูุจ.  ูุงูุชุฑุงุถ ุ ุชู ูุจูู ุฃูู ูุง ูููู ุฃู ูููู ููุงู ุณูู ููุญุฉ ูุงุญุฏุฉ ูู ุงูููุงูุจ ุนูู ุตูุญุฉ (ูุซู ุฌุฏูู).  ูู ุฐูู ุงูููุช ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุฐุง <del>  ุฅุบูุงู </del>  ููุฏ ุณูุญ ููุง ุงูุงูุชุฑุงุถ ุจุชุจุณูุท ุงูููุฏ ููููุงู ุนู ุทุฑูู ุฅุฒุงูุฉ <code>prefix</code> . <br>  ุจุนุฏ ุตุจ ุงูุชุบููุฑุงุช ูู ูุฑุน ุงูุชุทููุฑ ุงูุฑุฆูุณู ูุงุฎุชุจุงุฑูุง ุ ุฐูุจุช ูู ุฅุฌุงุฒุฉ ุจุฑูุญ ูุงุฏุฆุฉ ูู ุฃุฌู ุงูุงุณุชูุฑุงุฑ ูู ููู ุจููุฉ ุงูููุฏ ุฅูู ููุฌ ุฌุฏูุฏ ุจุนุฏ ุงูุนูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุนูุฏุฉ ูู ุนุทูุฉ ุ ููุฌุฆุช ุนูุฏูุง ูุฌุฏุช ุฃู ุงูุชุบููุฑุงุช ุงูุชู ููุช ุจูุง ูุฏ ุชู ุงูุชุฑุงุฌุน ุนููุง.  ุงุชุถุญ ุฃู ุตูุญุฉ ุธูุฑุช ุนูููุง ุนุฏุฉ ุฌุฏุงูู ูุณุชููุฉ ุ ุฃู ุงูุงูุชุฑุงุถ ุงูุฐู ุชู ูู ููุช ุณุงุจู ูุณุฑ ูู ุดูุก.  ูุฐูู ูู ุงูุนูู ุชู ุฏูู ุฌุฏูู ... </p><br><p style=";text-align:right;direction:rtl">  ุญุณูุง ุ ุชูุฑูุจุง.  ูู ุงููุงูุน ุ ุณูููู ูู ุงููููู ุฅุนุงุฏุฉ ุชูููุฐ ุฌููุน ุงูุฅุฌุฑุงุกุงุช ููุณูุง (ูู ุชุฎุชู ูุงุฆุฏุฉ ุทูุจ ุงูุฏูุฌ / ุงูุณุญุจ ุ ููููุง ุจููุช ูู ุงูุชุงุฑูุฎ) ุ ูุน ุชุฑู ุงูููุฌ ุงูุฎุงุต ุจูููู ุงููุงูุจ ุฏูู ุชุบููุฑ ุ ูุชุบููุฑ ุงูููุฌ ุงูุฎุงุต ุจุชูุธูู ุงููููุงุช ุงูุตูุชูุฉ ููุท.  ูููู ูุฐุง ุงูููุฌ ูุง ูุฒุงู ูุง ููุญู ุจุงูุซูุฉ ุจุณุจุจ ุชูุงุณูู ูุชุนููุฏู.  ูู ุชูู ููุงู ุฑุบุจุฉ ูู ุงูุนูุฏุฉ ุฅูููุง ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุญู ุงููุดููุฉ ุงููุดุงุฑ ุฅูููุง ูู ุงูุงุฎุชุจุงุฑ.  ูุงู ูู ุงูุถุฑูุฑู ุงูุชูุตู ุฅูู ุดูุก ุขุฎุฑ ุ ุฃุจุณุท ูุฃูุซุฑ ููุซูููุฉ. </p><br><h2 id="popytka-resheniya-problemy-3-kto-ischet-tot-naydyot" style=";text-align:right;direction:rtl">  ูุญุงููุฉ ูุญู ุงููุดููุฉ ุฑูู 3.  ูู ุงูุฐู ูุณุนู ุณูุฌุฏ </h2><br><p style=";text-align:right;direction:rtl">  ุจุงููุธุฑ ุฅูู ููููุฉ ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ุนูู ุงููุณุชูู ุงูุนุงููู ุ ูุงุญุธุช ูุฏู ุณูููุฉ ูุจุฏูู ุฃู ูุดุงูู (ูู ุงููุงูุน ุ ุญููู ุงููุงุฆูุงุช) ูู <code>entityModel</code> . </p><br><p style=";text-align:right;direction:rtl">  ุซู ุทุฑุญุช ุงูููุฑุฉ: ููุงุฐุง ูุง ููุดุฆ ูุตูุงู ุชููู ูููุฌูุงุชู ูููุฉ ููุจุฏุนุฉ ููุญุฑูุฉุ  ุณูุชู ุชูุฑูุฑ ุงููุนููุงุช ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู ุงููุตูุน ุฅูู ูููุดุฆ ูุฐู ุงููุฆุฉ ูุณูุชู ุงููุตูู ุฅูููุง ูู ุฎูุงู <code>this</code> .  ููููู ุนูู ุงูููุฑ ุฅุฌุฑุงุก ุชุญุณูู ุจุณูุท ุนู ุทุฑูู ุฅูุดุงุก ูุตู ูููุตู ูููุดุฆู ุงูุฅุฌุฑุงุกุงุช ููุงุญุฏ ูููุตู ุนู thunk ุ ุซู ูุฑุซ ุฃุญุฏูู ุนู ุงูุขุฎุฑ.  ูุจุงูุชุงูู ุ ุณุชุนูู ูุฐู ุงููุฆุงุช ููุงุญุฏ (ุนูุฏ ุฅูุดุงุก ูุซูู ููุฆุฉ ุงููุฑูุซ) ุ ูููู ูู ููุณ ุงูููุช ุณูููู ูู ูุตู ุนูู ุญุฏุฉ ุฃุณูู ูู ุงููุฑุงุกุฉ ูุงูููู ูุงูุงุฎุชุจุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅููู</a> ุฑูุฒ ููุถุญ ูุฐุง ุงูููุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูููุฑ ุจูุฒูุฏ ูู ุงูุชูุงุตูู ูู ูู ููู ูู ุงููููุงุช ุงูุชู ุธูุฑุช ูุชุบููุฑุช. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>FilterActionCreators.js</code></a> ุ ูุนูู ุนู ูุฆุฉ ุชููู ุงูุฃุณุงููุจ ููุดุฆู ุงูุฅุฌุฑุงุกุงุช ูููุง: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FilterActionCreators</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(config) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.prefix = config.prefix; } applyFilterSuccess = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">payload</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.prefix}</span></span></span><span class="hljs-string">APPLY_FILTER_SUCCESS`</span></span>, payload, }); applyFilterError = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.prefix}</span></span></span><span class="hljs-string">APPLY_FILTER_ERROR`</span></span>, error, }); }</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>FilterActions.js</code></a> ุ ูุฑุซ ูู ูุฆุฉ <code>FilterActionCreators</code> ููุญุฏุฏ thunk <code>applyFilter</code> ูุฃุณููุจ ููุฐู ุงููุฆุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุชู ุชุทุจูู <code>applyFilterSuccess</code> ู <code>applyFilterError</code> ูู ุฎูุงู <code>this</code> : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { FilterActionCreators } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'/FilterActionCreators'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// selector const getFilter = store =&gt; store.filter; export class FilterActions extends FilterActionCreators { constructor(config) { super(config); this.getCurrentStore = config.getCurrentStore; this.entityModel = config.entityModel; } applyFilter = ({ fetchData }) =&gt; { return newFilter =&gt; { return async (dispatch, getStore) =&gt; { try { const store = getStore(); const currentStore = this.getCurrentStore(store); const filter = newFilter || getFilter(currentStore); const { data: { payload } } = await fetchData(filter, dispatch); // Comes from FilterActionCreators dispatch(this.applyFilterSuccess(payload)); } catch (error) { // Comes from FilterActionCreators dispatch(this.applyFilterError(error)); } }; }; }; }</span></span></code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููู ุงูุฑุฆูุณู</a> ูุน ูู <code>FilterActions</code> thunk ู action ุ ูููู ุจุฅูุดุงุก ูุซูู ููุฆุฉ <code>FilterActions</code> ุ <code>FilterActions</code> ุฅูู ูุงุฆู ุงูุชูููู ุงูุถุฑูุฑู.  ุนูุฏ ุชุตุฏูุฑ ุงูุฏุงูุงุช (ูู ููุงูุฉ ูุธููุฉ <code>actionsCreator</code> ) ุ ูุง ุชูุณู ุฃู <code>applyFilter</code> ุทุฑููุฉ <code>applyFilter</code> ูุชูุฑูุฑ ุงูุชุจุนูุฉ <code>fetchData</code> : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs"><span class="hljs-addition"><span class="hljs-addition">+ import { FilterActions } from './filter/actions/FilterActions'; - // selector - const getFilter = store =&gt; store.filter; export const actionsCreator = (prefix, getCurrentStore, entityModel) =&gt; { + const config = { prefix, getCurrentStore, entityModel }; + const filterActions = new FilterActions(config); /* --- ACTIONS BLOCK --- */ function fetchTotalCounterStart() { return { type: `${prefix}FETCH_TOTAL_COUNTER_START` }; } function fetchTotalCounterSuccess(payload) { return { type: `${prefix}FETCH_TOTAL_COUNTER_SUCCESS`, payload }; } function fetchTotalCounterError(error) { return { type: `${prefix}FETCH_TOTAL_COUNTER_ERROR`, error }; } - function applyFilterSuccess(payload) { - return { type: `${prefix}APPLY_FILTER_SUCCESS`, payload }; - } - - function applyFilterError(error) { - return { type: `${prefix}APPLY_FILTER_ERROR`, error }; - } /* --- THUNKS BLOCK --- */ function fetchTotalCounter(filter) { return async dispatch =&gt; { dispatch(fetchTotalCounterStart()); try { const { data: { payload } } = await entityModel.fetchTotalCounter(filter); dispatch(fetchTotalCounterSuccess(payload)); } catch (error) { dispatch(fetchTotalCounterError(error)); } }; } function fetchData(filter, dispatch) { dispatch(fetchTotalCounter(filter)); return entityModel.fetchData(filter); } - function applyFilter(newFilter) { - return async (dispatch, getStore) =&gt; { - try { - const store = getStore(); - const currentStore = getCurrentStore(store); - // 'getFilter' comes from selectors. - const filter = newFilter || getFilter(currentStore); - const { data: { payload } } = await fetchData(filter, dispatch); - - dispatch(applyFilterSuccess(payload)); - } catch (error) { - dispatch(applyFilterError(error)); - } - }; - } return { fetchTotalCounterStart, fetchTotalCounterSuccess, fetchTotalCounterError, - applyFilterSuccess, - applyFilterError, fetchTotalCounter, fetchData, - applyFilter + ...filterActions, + applyFilter: filterActions.applyFilter({ fetchData }), }; };</span></span></code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุตุจุญุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงุฎุชุจุงุฑุงุช</a> ุฃุณูู ููููุงู ูู ุงูุชูููุฐ ูุงููุฑุงุกุฉ: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { FilterActions } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../FilterActions'</span></span>; describe(<span class="hljs-string"><span class="hljs-string">'FilterActions'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> prefix = <span class="hljs-string"><span class="hljs-string">'TEST_'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getCurrentStore = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">store</span></span></span><span class="hljs-function"> =&gt;</span></span> store; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> entityModel = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = { prefix, getCurrentStore, entityModel }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FilterActions(config); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dispatch = jest.fn(); beforeEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { dispatch.mockClear(); }); describe(<span class="hljs-string"><span class="hljs-string">'applyFilter'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getStore = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({}); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newFilter = {}; it(<span class="hljs-string"><span class="hljs-string">'should dispatch correct actions on success'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> payload = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fetchData = jest.fn().mockResolvedValueOnce({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { payload } }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> applyFilterSuccess = jest.spyOn(actions, <span class="hljs-string"><span class="hljs-string">'applyFilterSuccess'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> actions.applyFilter({ fetchData })(newFilter)(dispatch, getStore); expect(fetchData).toBeCalledWith(newFilter, dispatch); expect(applyFilterSuccess).toBeCalledWith(payload); }); it(<span class="hljs-string"><span class="hljs-string">'should dispatch correct actions on error'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> error = {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fetchData = jest.fn().mockRejectedValueOnce(error); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> applyFilterError = jest.spyOn(actions, <span class="hljs-string"><span class="hljs-string">'applyFilterError'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> actions.applyFilter({ fetchData })(newFilter)(dispatch, getStore); expect(fetchData).toBeCalledWith(newFilter, dispatch); expect(applyFilterError).toBeCalledWith(error); }); }); });</code> </pre><br><p style=";text-align:right;direction:rtl">  ูู ุญูุซ ุงููุจุฏุฃ ุ ูู ุงูุงุฎุชุจุงุฑุงุช ุ ููููู ุงุณุชุจุฏุงู ุงูุงุฎุชูุงุฑ ุงูุฃุฎูุฑ ุจูุฐู ุงูุทุฑููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">- expect(applyFilterSuccess).toBeCalledWith(payload); + expect(dispatch).toBeCalledWith(applyFilterSuccess(payload)); - expect(applyFilterError).toBeCalledWith(error); + expect(dispatch).toBeCalledWith(applyFilterError(error));</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูู ุชููู ููุงู ุญุงุฌุฉ <code>jest.spyOn</code> ุจู <code>jest.spyOn</code> .    ,  ,            .        thunk,       .    ,    ... </p><br><p style=";text-align:right;direction:rtl">    ,  ,    ,     -: ,  thunk-  action creator-      ,    ,   .        ,   .         <code>actionsCreator</code> -   ,   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { FilterActions } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./filter/actions/FilterActions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { TemplatesActions } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./templates/actions/TemplatesActions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { TableActions } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./table/actions/TableActions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionsCreator = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prefix, getCurrentStore, entityModel</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = { prefix, getCurrentStore, entityModel }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> filterActions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FilterActions(config); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> templatesActions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TemplatesActions(config); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tableActions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TableActions(config); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...filterActions, ...templatesActions, ...tableActions, }; };</code> </pre> <br><p style=";text-align:right;direction:rtl">     .     <code>filterActions</code>          <code>templatesActions</code>  <code>tableActions</code> ,   ,   ,     <code>filterActions</code> ?           ,    .           .         - ,      ,    . </p><br><p style=";text-align:right;direction:rtl">   .      ,     back-end  (  Java),      .   ,  Java/Spring      ,   .         - ? </p><br><p style=";text-align:right;direction:rtl">      : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">    thunk-   <code>setDependencies</code> ,        โ <code>dependencies</code> : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs">export class FilterActions extends FilterActionCreators { constructor(config) { super(config); this.getCurrentStore = config.getCurrentStore; this.entityModel = config.entityModel; } + setDependencies = dependencies =&gt; { + this.dependencies = dependencies; + };</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">                     : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs">import { FilterActions } from './filter/actions/FilterActions'; import { TemplatesActions } from './templates/actions/TemplatesActions'; import { TableActions } from './table/actions/TableActions'; export const actionsCreator = (prefix, getCurrentStore, entityModel) =&gt; { const config = { prefix, getCurrentStore, entityModel }; const filterActions = new FilterActions(config); const templatesActions = new TemplatesActions(config); const tableActions = new TableActions(config); + const actions = { + ...filterActions, + ...templatesActions, + ...tableActions, + }; + + filterActions.setDependencies(actions); + templatesActions.setDependencies(actions); + tableActions.setDependencies(actions); + return actions; - return { - ...filterActions, - ...templatesActions, - ...tableActions, - }; };</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">     <code>this.dependencies</code> : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">applyFilter = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newFilter</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { fetchData } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dependencies; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (dispatch, getStore) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = getStore(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> currentStore = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStore(store); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> filter = newFilter || getFilter(currentStore); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { payload } } = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetchData(filter, dispatch); <span class="hljs-comment"><span class="hljs-comment">// Comes from FilterActionCreators dispatch(this.applyFilterSuccess(payload)); } catch (error) { // Comes from FilterActionCreators dispatch(this.applyFilterError(error)); } }; };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">    ,        <code>applyFilter</code>   ,   -  <code>this.dependencies</code>    .         ,         . </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs">import { FilterActions } from '../FilterActions'; describe('FilterActions', () =&gt; { const prefix = 'TEST_'; const getCurrentStore = store =&gt; store; const entityModel = {}; + const dependencies = { + fetchData: jest.fn(), + }; const config = { prefix, getCurrentStore, entityModel }; const actions = new FilterActions(config); + actions.setDependencies(dependencies); const dispatch = jest.fn(); beforeEach(() =&gt; { dispatch.mockClear(); }); describe('applyFilter', () =&gt; { const getStore = () =&gt; ({}); const newFilter = {}; it('should dispatch correct actions on success', async () =&gt; { const payload = {}; - const fetchData = jest.fn().mockResolvedValueOnce({ data: { payload } }); + dependencies.fetchData.mockResolvedValueOnce({ data: { payload } }); const applyFilterSuccess = jest.spyOn(actions, 'applyFilterSuccess'); - await actions.applyFilter({ fetchData })(newFilter)(dispatch, getStore); + await actions.applyFilter(newFilter)(dispatch, getStore); - expect(fetchData).toBeCalledWith(newFilter, dispatch); + expect(dependencies.fetchData).toBeCalledWith(newFilter, dispatch); expect(applyFilterSuccess).toBeCalledWith(payload); }); it('should dispatch correct actions on error', async () =&gt; { const error = {}; - const fetchData = jest.fn().mockRejectedValueOnce(error); + dependencies.fetchData.mockRejectedValueOnce(error); const applyFilterError = jest.spyOn(actions, 'applyFilterError'); - await actions.applyFilter({ fetchData })(newFilter)(dispatch, getStore); + await actions.applyFilter(newFilter)(dispatch, getStore); - expect(fetchData).toBeCalledWith(newFilter, dispatch); + expect(dependencies.fetchData).toBeCalledWith(newFilter, dispatch); expect(applyFilterError).toBeCalledWith(error); }); }); });</code> </pre> <br><p style=";text-align:right;direction:rtl">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a> . </p><br><p style=";text-align:right;direction:rtl">       ,   ,            : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="diff hljs">import { FilterActions } from './filter/actions/FilterActions'; import { TemplatesActions } from './templates/actions/TemplatesActions'; import { TableActions } from './table/actions/TableActions'; - export const actionsCreator = (prefix, getCurrentStore, entityModel) =&gt; { + export const actionsCreator = (prefix, getCurrentStore, entityModel, ExtendedActions) =&gt; { const config = { prefix, getCurrentStore, entityModel }; const filterActions = new FilterActions(config); const templatesActions = new TemplatesActions(config); const tableActions = new TableActions(config); + const extendedActions = ExtendedActions ? new ExtendedActions(config) : undefined; const actions = { ...filterActions, ...templatesActions, ...tableActions, + ...extendedActions, }; filterActions.setDependencies(actions); templatesActions.setDependencies(actions); tableActions.setDependencies(actions); + if (extendedActions) { + extendedActions.setDependencies(actions); + } return actions; };</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   <code>ExtendedActions</code>    ,     : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExtendedActions</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(config) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStore = config.getCurrentStore; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.entityModel = config.entityModel; } setDependencies = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dependencies</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dependencies = dependencies; }; <span class="hljs-comment"><span class="hljs-comment">// methods to re-define }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ,    ,   : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">    ,     . </li><li style=";text-align:right;direction:rtl">      . </li><li style=";text-align:right;direction:rtl">     ,   ,     thunk-         . </li><li style=";text-align:right;direction:rtl">   ,      ,   thunk-/action creator-      99-100%. </li></ul><br><h2 id="bonus" style=";text-align:right;direction:rtl">  </h2><br><p style=";text-align:right;direction:rtl">   action creator-     ( <code>filter</code> , <code>templates</code> , <code>table</code> ),   reducer-   -  ,        ,    <code>actionsCreator</code> - ,         reducer-  ~400-500  . </p><br><p style=";text-align:right;direction:rtl">      : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   reducer-: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> isNull <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/isNull'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { getDefaultState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../getDefaultState'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { templatesReducerConfigurator } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'src/store/templates/reducers/templatesReducerConfigurator'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { filterReducerConfigurator } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'src/store/filter/reducers/filterReducerConfigurator'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { tableReducerConfigurator } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'src/store/table/reducers/tableReducerConfigurator'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createTableReducer = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> prefix, initialState = getDefaultState(</span></span></span><span class="hljs-function">), </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entityModel</span></span></span><span class="hljs-function">, ) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = { prefix, initialState, entityModel }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> templatesReducer = templatesReducerConfigurator(config); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> filterReducer = filterReducerConfigurator(config); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tableReducer = tableReducerConfigurator(config); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = initialState, action</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> templatesState = templatesReducer(state, action); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isNull(templatesState)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> templatesState; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> filterState = filterReducer(state, action); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isNull(filterState)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filterState; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tableState = tableReducer(state, action); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isNull(tableState)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tableState; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; }; };</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <code>tableReducerConfigurator</code> ( ): </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tableReducerConfigurator = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ prefix, entityModel }</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_START`</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, }; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_SUCCESS`</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">counter</span></span>: action.payload, }; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${prefix}</span></span></span><span class="hljs-string">FETCH_TOTAL_COUNTER_ERROR`</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: action.error, }; } <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }; };</code> </pre> <br><p style=";text-align:right;direction:rtl">  : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   <code>reducerConfigurator</code> -    action type-,   ยซยป.  action type      case,    <em>null</em> (). </li><li style=";text-align:right;direction:rtl">   <code>reducerConfigurator</code> -      ,  <em>null</em> ,     <code>reducerConfigurator</code> -  <em>!null</em> .    ,    <code>reducerConfigurator</code> -   case,      <code>reducerConfigurator</code> -. </li><li style=";text-align:right;direction:rtl">   ,      <code>reducerConfigurator</code> -    case-   action type-,     (  reducer-). </li></ol><br><p style=";text-align:right;direction:rtl">    ,    <code>actionsCreator</code> -,     ,      ,  ,  . </p><br><p style=";text-align:right;direction:rtl">   ,   ! <br> ,             Redux Thunk. </p><br><p style=";text-align:right;direction:rtl">   ,    Redux Thunk      .   ,    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar469371/">https://habr.com/ru/post/ar469371/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar469355/index.html">ูููุฉ NumPy ุชุนูููู</a></li>
<li><a href="../ar469357/index.html">ุชุดุบูู ุ ุบููุฑ ุ ุชุดุบูู! - ูุง ุงูุฐู ุณูุชุญุฏุซ ุนูู ูู GolangConf</a></li>
<li><a href="../ar469361/index.html">ุงูุฃูู ูุงูุฏููุน ูู Svelte 3</a></li>
<li><a href="../ar469367/index.html">ุชุดุบูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ูุญููุง ูู STM32CubeIDE ุชุญุช ูููุฏูุฒ</a></li>
<li><a href="../ar469369/index.html">ุงูุฃุญุฏุงุซ ุงูุฑูููุฉ ูู ููุณูู ูู 30 ุณุจุชูุจุฑ ุฅูู 06 ุฃูุชูุจุฑ</a></li>
<li><a href="../ar469373/index.html">ูุชุงุฆุฌ ุงููุดุฑูุน ูุฅูุดุงุก ูุงุฌูุฉ ุนุตุจูุฉ ูููุฑุถู ุงููุตุงุจูู ุจุงูุดูู ุงูุชุงู ูุฏ ุฃุซุงุฑุช ุชุณุงุคูุงุช</a></li>
<li><a href="../ar469375/index.html">ููุงุฐุง ุชุฎุตุต ููุฒููุง ููููู ุขูุฏ ูุฑููุชูู ููููุฒ 100 ููููู ุฏููุงุฑ ููุดุงุฑูุน ููุชูุญุฉ ุงููุตุฏุฑุ</a></li>
<li><a href="../ar469379/index.html">ุชุทุจูู ุฃุณุงููุจ ุงูุชุญูู ูู ุตุญุฉ ุงููููุฐุฌ ุงูุฑุณูู ููุงุฌูุฉ ุงููุณุชุฎุฏู</a></li>
<li><a href="../ar469381/index.html">ูุน ูุฑูุฑ ุงูููุช ุ ูู ุจุฅูุดุงุก ุฎุงุฏู ุฃูุนุงุจ ูุชุนุฏุฏ ุงููุณุชุฎุฏููู. ุงูุนูุงุฑุฉ ูุงูุชุฑููุจ</a></li>
<li><a href="../ar469383/index.html">ุญู Hyperconverged AERODISK vAIR. ุฃุณุงุณ - ูุธุงู ุงููููุงุช ARDFS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>