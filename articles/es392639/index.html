<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåüèΩ üíú üè§ Cadena de herramientas de desarrollo Arduino para conocedores de la l√≠nea de comandos: PlatformIO o c√≥mo dejar de usar el IDE Arduino üíù üòø üë®‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Durante el a√±o pasado, escrib√≠ bastante c√≥digo para Arduino y simult√°neamente cambi√© varias herramientas de desarrollo. El art√≠culo menciona las opcio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cadena de herramientas de desarrollo Arduino para conocedores de la l√≠nea de comandos: PlatformIO o c√≥mo dejar de usar el IDE Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/392639/"><img align="left" src="https://habrastorage.org/files/609/41e/ed9/60941eed96084f9d81a6a47cc169ec67.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante el a√±o pasado, escrib√≠ bastante c√≥digo para Arduino y simult√°neamente cambi√© varias herramientas de desarrollo. </font><font style="vertical-align: inherit;">El art√≠culo menciona las opciones que prob√© y con m√°s detalle sobre lo que par√©. </font><font style="vertical-align: inherit;">Se tratar√° de un conjunto de herramientas para el caso cuando&gt; 10 proyectos para diferentes tableros y un poco sobre el desarrollo e instalaci√≥n de bibliotecas.</font></font><a name="habracut"></a><br>
<br clear="all">
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entorno de desarrollo</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cual es el problema</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probablemente porque Arduino no est√° enfocado en desarrolladores profesionales, el ecosistema alrededor del IDE est√°ndar se distingue por la ausencia de las herramientas habituales para m√≠:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solo en versiones recientes apareci√≥ alg√∫n tipo de gesti√≥n de biblioteca, mientras que sin la similitud de Gemfile / require.txt / package.json, es decir, es imposible que el proyecto especifique qu√© versiones se usan</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin integraci√≥n con git u otros vcs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un editor de texto no se compara con </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mi editor de texto favorito</font></font></em></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no hay forma de guardar la selecci√≥n del tablero en el proyecto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salida inconveniente de errores de compilaci√≥n</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sitio web de Arduino tiene una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lista de herramientas de desarrollo alternativas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En esta lista hay opciones que por varias razones no prob√©. </font><font style="vertical-align: inherit;">Por ejemplo, Atmel Studio y Visual Studio CE no consideraron. </font><font style="vertical-align: inherit;">Quer√≠a encontrar una herramienta que apoyara el trabajo desde la l√≠nea de comandos.</font></font><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que intent√≥</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ino</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un proyecto de la compa√±√≠a rusa Amperka, una utilidad de l√≠nea de comandos para el firmware Arduino. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proyecto fue bastante popular,&gt; 200 tenedores. </font><font style="vertical-align: inherit;">La √∫ltima confirmaci√≥n fue en abril de 2014, por lo que no funciona con las √∫ltimas versiones del IDE (parece que desde 1.5). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay un tenedor vivo de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arturo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo us√© un poco, pero hubo problemas en algunos casos ex√≥ticos.</font></font><br>
<br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino-makefile</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino-Makefile</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : compila y descarga con make. </font><font style="vertical-align: inherit;">Arduino Due, Zero y otras placas de 32 bits no son compatibles. </font><font style="vertical-align: inherit;">La diferencia con el IDE est√°ndar es que los m√©todos deben declararse antes de su uso, por lo que al transferir proyectos terminados, es posible que deba editar la fuente. </font><font style="vertical-align: inherit;">Si no recuerdo mal, no podr√≠a hacerme amigo de Arduino-Makefile y SparkFun Pro Micro.</font></font><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo que uso</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PlatformIO</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PlatformIO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un excelente proyecto creado por desarrolladores de Ucrania. </font><font style="vertical-align: inherit;">Incluye una utilidad de l√≠nea de comandos a trav√©s de la cual puede comenzar a compilar y descargar programas a varias familias de microcontroladores (Atmel AVR, Atmel SAM, ST STM32, TI MSP430 y otros). </font><font style="vertical-align: inherit;">Al mismo tiempo, se admiten diferentes conjuntos de bibliotecas (en el sitio web PlatformIO se denominan frameworks): Arduino, Energia, mbed, as√≠ como c√≥digo nativo para Atmel AVR, espressif, MSP430. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PlatformIO se orient√≥ inicialmente para trabajar desde la l√≠nea de comandos, tambi√©n hay complementos para la integraci√≥n con editores de texto e IDE: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atom, CLion, Eclipse, Emacs, NetBeans, Qt Creator, Sublime Text, Vim y Visual Studio</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PlatformIO es especialmente adecuado si tiene:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un proyecto para varias juntas, es decir </font><font style="vertical-align: inherit;">el mismo c√≥digo debe compilarse para diferentes tableros</font></font></li>
<li>    , ..     ,      </li>
<li>    ssh,   PlatformIO   Raspberry Pi</li>
<li>   </li>
</ul><br>
<img src="http://docs.platformio.org/en/latest/_images/platformio-demo-wiring.gif" alt="imagen"><br>
<br>
<br>
<h5>  Arduino</h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No volver√© a contar la documentaci√≥n, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠ est√°n las instrucciones de instalaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para su uso, consulte la secci√≥n de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicio r√°pido</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La estructura de carpetas del proyecto para PlatformIO difiere del proyecto Arduino IDE, cada proyecto contiene un archivo platformio.ini que indica qu√© placas se utilizan. </font><font style="vertical-align: inherit;">Por lo tanto, no tiene que elegir el tablero correcto cada vez. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Te contar√© un ejemplo de c√≥mo uso PlatformIO cuando desarrollo una biblioteca para Arduino. </font><font style="vertical-align: inherit;">La biblioteca tiene dos ejemplos, cada uno de ellos es un proyecto en formato PlatformIO. </font><font style="vertical-align: inherit;">El archivo de configuraci√≥n del proyecto platformio.ini enumera todas las placas en las que debe ejecutarse la biblioteca:</font></font><br>
<pre><code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">env</span></span>:<span class="hljs-type"><span class="hljs-type">nanoatmega328</span></span>]<font></font>
platform = atmelavr<font></font>
framework = arduino<font></font>
board = nanoatmega328<font></font>
<font></font>
[<span class="hljs-type"><span class="hljs-type">env</span></span>:<span class="hljs-type"><span class="hljs-type">sparkfun_promicro16</span></span>]<font></font>
platform = atmelavr<font></font>
framework = arduino<font></font>
board = sparkfun_promicro16<font></font>
<font></font>
[<span class="hljs-type"><span class="hljs-type">env</span></span>:<span class="hljs-type"><span class="hljs-type">due</span></span>]<font></font>
platform = atmelsam<font></font>
framework = arduino<font></font>
board = due<font></font>
<font></font>
[<span class="hljs-type"><span class="hljs-type">env</span></span>:<span class="hljs-type"><span class="hljs-type">teensy31</span></span>]<font></font>
platform = teensy<font></font>
framework = arduino<font></font>
board = teensy31<font></font>
<font></font>
[<span class="hljs-type"><span class="hljs-type">env</span></span>:<span class="hljs-type"><span class="hljs-type">nodemcu</span></span>]<font></font>
platform = espressif<font></font>
framework = arduino<font></font>
board = nodemcu<font></font>
<font></font>
[<span class="hljs-type"><span class="hljs-type">env</span></span>:<span class="hljs-type"><span class="hljs-type">uno</span></span>]<font></font>
platform = atmelavr<font></font>
framework = arduino<font></font>
board = uno<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede compilar un ejemplo para todos los tableros con el comando:</font></font><br>
<pre><code class="bash hljs">platformio run</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede compilar solo para uno como este:</font></font><br>
<pre><code class="bash hljs">platformio run -e uno</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargar firmware en uno:</font></font><br>
<pre><code class="bash hljs">platformio run --target upload -e uno</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicie el monitor del puerto serie:</font></font><br>
<pre><code class="bash hljs">platformio serialports monitor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se agregaron alias a .zshrc para acortar los comandos:</font></font><br>
<pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> compile=<span class="hljs-string"><span class="hljs-string">"platformio run"</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> upload=<span class="hljs-string"><span class="hljs-string">"platformio run --target upload"</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> serial=<span class="hljs-string"><span class="hljs-string">"platformio serialports monitor"</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con ellos la misma secuencia de acciones:</font></font><br>
<pre><code class="bash hljs">compile         <span class="hljs-comment"><span class="hljs-comment">#    </span></span>
compile -e uno  <span class="hljs-comment"><span class="hljs-comment">#   uno</span></span>
upload  -e uno  <span class="hljs-comment"><span class="hljs-comment">#  uno</span></span>
serial          <span class="hljs-comment"><span class="hljs-comment">#   </span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n hay integraci√≥n con Travis CI y otras herramientas de CI, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√°s detalles aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, el IDE de Arduino tiene </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una interfaz de l√≠nea de comandos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero est√° lejos de ser perfecto.</font></font><br>
<br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PlataformaIO Matices</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PlatformIO acelera el trabajo; es una herramienta m√°s flexible en comparaci√≥n con Arduino IDE y facilita la automatizaci√≥n de tareas rutinarias. </font><font style="vertical-align: inherit;">Hay varios puntos a considerar:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la compilaci√≥n en PlatformIO no siempre es equivalente a compilar en Arduino IDE, lo que se compil√≥ en PlatformIO puede no compilarse en Arduino IDE y viceversa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la estructura de la carpeta del proyecto no coincide con la estructura para Arduino IDE</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no todas las bibliotecas est√°n disponibles para la instalaci√≥n a trav√©s de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">platformio lib</font></font></em></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serial.print ("Podr√≠a ser mejor");</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cual es el problema</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El Serial.print () est√°ndar es un poco inc√≥modo si necesita imprimir el </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nombre y el valor de la variable, por ejemplo, para generar "pin_2 = &lt;state pin 2&gt;, pin_3 = &lt;state pin 3&gt;" debe hacer esto:</font></font><br>
<pre><code class="cpp hljs">Serial.print(<span class="hljs-string"><span class="hljs-string">"pin_2 = "</span></span>);<font></font>
Serial.print(digitalRead(<span class="hljs-number"><span class="hljs-number">2</span></span>));<font></font>
<font></font>
Serial.print(<span class="hljs-string"><span class="hljs-string">", pin_3 = "</span></span>);<font></font>
Serial.println(digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todav√≠a a veces quiero deshabilitar parcial o completamente la salida a la serie, por ejemplo, si se usa solo para la depuraci√≥n. </font><font style="vertical-align: inherit;">Por supuesto, puede comentar las llamadas a Serial.print () para esto, pero me gustar√≠a una opci√≥n m√°s elegante.</font></font><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que intent√≥</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arduinoLogging</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta biblioteca utiliza una sintaxis similar a printf para imprimir, y tambi√©n le permite configurar LOGLEVEL y as√≠ deshabilitar la salida de algunos o todos los mensajes. </font><font style="vertical-align: inherit;">Los mensajes se muestran usando los m√©todos Error, Info, Debug y Verbose. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo:</font></font><br>
<pre><code class="cpp hljs">  <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Logging.h"</span></span></span></span><font></font>
<font></font>
  <span class="hljs-comment"><span class="hljs-comment">// LOGLEVEL   LOG_LEVEL_X,  X ‚àà { NOOUTPUT, ERRORS, INFOS, DEBUG, VERBOSE }</span></span>
  <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LOGLEVEL LOG_LEVEL_INFOS</span></span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
    Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
    Log.Init(LOGLEVEL, &amp;Serial);<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
    Log.Info(<span class="hljs-string"><span class="hljs-string">"pin_2 = %d, pin_3 = %d"</span></span>CR, digitalRead(<span class="hljs-number"><span class="hljs-number">2</span></span>), digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>));<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
    Log.Debug(<span class="hljs-string"><span class="hljs-string">"   ,   LOGLEVEL = LOG_LEVEL_INFOS"</span></span>);<font></font>
  }</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modificadores Disponibles</font></font></h5><br>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comod√≠n</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comentar</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% s</font></font></td>
<td>replace with an string (char*)</td>
<td>Log.Info("String %s", myString);</td>
</tr>
<tr>
<td>%c</td>
<td>replace with an character</td>
<td>Log.Info("use %c as input", myChar)</td>
</tr>
<tr>
<td>%d</td>
<td>replace with an integer value</td>
<td>Log.Info("current value %d",myValue);</td>
</tr>
<tr>
<td>%l</td>
<td>replace with an long value</td>
<td>Log.Info("current long %l", myLong);</td>
</tr>
<tr>
<td>%x</td>
<td>replace and convert integer value into hex</td>
<td>Log.Info ("as hex %x), myValue);</td>
</tr>
<tr>
<td>%X</td>
<td>like %x but combine with 0x123AB</td>
<td>Log.Info ("as hex %X), myValue);</td>
</tr>
<tr>
<td>%b</td>
<td>replace and convert integer value into binary</td>
<td>Log.Info ("as bin %b), myValue);</td>
</tr>
<tr>
<td>%B</td>
<td>like %x but combine with 0b10100011</td>
<td>Log.Info ("as bin %B), myValue);</td>
</tr>
<tr>
<td>%t</td>
<td>replace and convert boolean value into "t" or "f"</td>
<td>Log.Info ("is it true? %t), myBool);</td>
</tr>
<tr>
<td>%T</td>
<td>like %t but convert into "true" or "false"</td>
<td>Log.Info ("is it true? %T), myBool);</td>
</tr>
</tbody>
</table><br>
<h3> </h3><br>
<h4>advancedSerial</h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los nombres de los niveles de mensaje de Error, Informaci√≥n, Depuraci√≥n y Verbose en arduinoLogging no son neutrales. El error no necesariamente produce un error, es solo un mensaje que se muestra en cualquier LOGLEVEL (excepto NOOUTPUT). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado tambi√©n algunos de los inconvenientes de printf, escrib√≠ mi propia versi√≥n, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">advancedSerial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, advancedSerial es dos cosas: la capacidad de llamar a print () e println () en los niveles de cadena y mensaje.</font></font><br>
<pre><code class="cpp hljs">  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = <span class="hljs-number"><span class="hljs-number">1</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">2</span></span>;<font></font>
<font></font>
  aSerial.print(<span class="hljs-string"><span class="hljs-string">"a = "</span></span>).print(a).print(<span class="hljs-string"><span class="hljs-string">"b = "</span></span>).println(b);<font></font>
<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  aSerial.p(<span class="hljs-string"><span class="hljs-string">"a = "</span></span>).p(a).p(<span class="hljs-string"><span class="hljs-string">"b = "</span></span>).pln(b);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo completo de </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic.ino</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dado que los nombres de los m√©todos coinciden con los nombres de los m√©todos est√°ndar Serial.print () y Serial.println (), opcionalmente puede reemplazar Serial con aSerial en las fuentes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para el nombre de los niveles de mensaje, eleg√≠ v, vv, vvv, vvvv, una forma bastante com√∫n de indicar los niveles de detalle de los mensajes mostrados, que generalmente se encuentran como banderas -v, -vv, etc. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con estos nombres, es m√°s f√°cil editar un nivel a otro, por ejemplo vv -&gt; vvv es m√°s f√°cil que Informaci√≥n -&gt; Depurar.</font></font><br>
<pre><code class="cpp hljs">  <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"advancedSerial.h"</span></span></span></span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
    Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
<font></font>
    aSerial.setPrinter(Serial);    <span class="hljs-comment"><span class="hljs-comment">//      </span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//  ,      v  vv,  vvv  vvvv   </span></span><font></font>
    aSerial.setFilter(Level::vv);<font></font>
  }<font></font>
<font></font>
   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
     aSerial.l(Level::vv).pln(<span class="hljs-string"><span class="hljs-string">" "</span></span>);<font></font>
     aSerial.l(Level::vvv).pln(<span class="hljs-string"><span class="hljs-string">"  "</span></span>);<font></font>
<font></font>
     delay(<span class="hljs-number"><span class="hljs-number">3000</span></span>);<font></font>
   }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo completo de </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advanced.ino</font></font></a><br>
<br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahorro de memoria</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si envuelve la cadena en la macro F (), entonces no se cargar√° en la memoria (SRAM), por lo que para ahorrar memoria, use F ():</font></font><br>
<pre><code class="cpp hljs">  aSerial.print(F(<span class="hljs-string"><span class="hljs-string">" 16 "</span></span>));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, usando advancedSerial agrega algo de sobrecarga en comparaci√≥n con el Serial est√°ndar, trat√© de estimar aproximadamente cu√°l. </font><font style="vertical-align: inherit;">A continuaci√≥n, presento los resultados de la compilaci√≥n para Arduino Uno, ya que tiene 2 KB de memoria y este es el m√≠nimo entre las placas que suelo usar. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serie normal, sin ninguna biblioteca:</font></font></strong><br>
<pre><code class="cpp hljs">  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
   Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
    Serial.print(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);<font></font>
    Serial.println(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
espacio de almacenamiento: 5% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
memoria din√°mica: 9% </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avanzado Serie:</font></font></strong><br>
<pre><code class="cpp hljs">  <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;advancedSerial.h&gt;</span></span></span></span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
   Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
<font></font>
   aSerial.setPrinter(Serial);<font></font>
   aSerial.setFilter(Level::vv);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
    aSerial.print(<span class="hljs-string"><span class="hljs-string">"test"</span></span>).println(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
espacio de almacenamiento: 5% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
memoria din√°mica: 10% </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ejemplos / Advanced.ino</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
espacio de almacenamiento: 9% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
memoria din√°mica: 26% </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ejemplos / Advanced.ino utilizando el</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
espacio de almacenamiento </font><strong><font style="vertical-align: inherit;">macro F ()</font></strong><font style="vertical-align: inherit;"> : 9% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
memoria din√°mica: 10% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta que el uso de memoria aumenta ligeramente </font><font style="vertical-align: inherit;">Pero advancedSerial no es una soluci√≥n √≥ptima en t√©rminos de recursos, hay implementaciones alternativas, por ejemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depuraci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalaci√≥n de biblioteca</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cual es el problema</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por defecto, el IDE de Arduino instala las bibliotecas a nivel mundial y el boceto no registra exactamente qu√© bibliotecas se utilizan (a excepci√≥n de las directivas #include, por supuesto) y qu√© versiones. </font><font style="vertical-align: inherit;">Debido a esto, para compilar el boceto en otra computadora, necesita saber d√≥nde descargar las bibliotecas requeridas, nuevamente las versiones de la biblioteca tambi√©n deben especificarse. </font><font style="vertical-align: inherit;">Para evitar tales problemas, instalo bibliotecas solo localmente, dentro de la carpeta de croquis. </font><font style="vertical-align: inherit;">A continuaci√≥n hay dos formas de instalar bibliotecas localmente para Arduino IDE y PlatformIO.</font></font><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDE Arduino</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Raramente uso el IDE de Arduino, tal vez hay una mejor manera. </font><font style="vertical-align: inherit;">El m√©todo es este: instale bibliotecas en una subcarpeta de su proyecto y coloque enlaces simb√≥licos (¬øatajos?) Para cada biblioteca en la carpeta de bibliotecas (en la carpeta donde est√°n instaladas las bibliotecas Arduino IDE). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, si no recuerdo mal, el IDE de Arduino compila todas las bibliotecas de la carpeta de bibliotecas al compilar cualquier boceto, por lo que el tiempo de compilaci√≥n aumenta si hay muchas bibliotecas en las bibliotecas. </font><font style="vertical-align: inherit;">Otra raz√≥n para no usar el IDE de Arduino.</font></font><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PlatformIO</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada proyecto PlatformIO tiene una subcarpeta lib en la que se pueden colocar bibliotecas. </font><font style="vertical-align: inherit;">Esto es cuando se instalan bibliotecas manualmente. </font><font style="vertical-align: inherit;">PlatformIO tambi√©n tiene un comando separado para instalar las bibliotecas de plataformaio lib, desafortunadamente instala las bibliotecas de forma global de manera predeterminada, por lo que las bibliotecas se instalan localmente en la subcarpeta lib, debe agregar el proyecto platformio.ini:</font></font><br>
<pre><code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">platformio</span></span>]<font></font>
lib_dir = ./lib</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obtener m√°s informaci√≥n sobre platformio lib, consulte la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><cut></cut></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es392639/">https://habr.com/ru/post/es392639/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es392629/index.html">Respira m√°s profundo: los astr√≥nomos han encontrado una enana blanca con una atm√≥sfera de ox√≠geno puro</a></li>
<li><a href="../es392631/index.html">Swipebuster ofrece servicios de seguimiento de usuarios de Tinder</a></li>
<li><a href="../es392633/index.html">D√≠a de la Cosmon√°utica 2016: eventos por ciudad</a></li>
<li><a href="../es392635/index.html">¬°Feliz cumplea√±os, laptop! Primera computadora port√°til comercialmente exitosa de 35 a√±os</a></li>
<li><a href="../es392637/index.html">Todas las bombillas LED IKEA</a></li>
<li><a href="../es392641/index.html">–ê–≤—Ç–æ–º–∞—Ç —Ä–∞–∑–º–µ—Ä–æ–º —Å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ —Å–ø–æ—Å–æ–±–µ–Ω –ø–µ—á–∞—Ç–∞—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É</a></li>
<li><a href="../es392645/index.html">Dificultades de traducci√≥n y appleID</a></li>
<li><a href="../es392647/index.html">Funciona bien, si no interfiere. Lightbridge dji phantom 3</a></li>
<li><a href="../es392649/index.html">Los astr√≥nomos han encontrado el primer exoplaneta en el sistema estelar triple</a></li>
<li><a href="../es392651/index.html">La computadora pint√≥ una nueva pintura de Rembrandt 347 a√±os despu√©s de la muerte del artista.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>