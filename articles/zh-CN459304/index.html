<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“‘ â™“ï¸ ğŸ—ï¸ è§’åº¦é™·é˜±æ—è·¯å’ŒèŠ‚çœæ—¶é—´ ğŸµ âš›ï¸ ğŸ‘ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä½¿ç”¨Angularï¼Œæ‚¨å¯ä»¥åšä»»ä½•äº‹æƒ…ã€‚ æˆ–å‡ ä¹æ‰€æœ‰ä¸œè¥¿ã€‚ ä½†æ˜¯æœ‰æ—¶è¿™ç§é˜´é™©çš„â€œå‡ ä¹â€å¯¼è‡´è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³å¼€å‘äººå‘˜åœ¨æµªè´¹æ—¶é—´ï¼Œæ–¹æ³•æ˜¯åˆ›å»ºå˜é€šåŠæ³•ï¼Œæˆ–è€…è¯•å›¾äº†è§£ä¸ºä»€ä¹ˆå‘ç”Ÿäº†æŸäº›äº‹æƒ…ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆæœ‰äº›äº‹æƒ…æ²¡æœ‰æŒ‰é¢„æœŸè¿›è¡Œã€‚ 

  

 æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„è¿™ç¯‡æ–‡ç« çš„ä½œè€…è¯´ï¼Œä»–æƒ³åˆ†äº«ä¸€äº›æŠ€å·§ï¼Œè¿™äº›æŠ€å·§å°†å¸®åŠ©Angu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è§’åº¦é™·é˜±æ—è·¯å’ŒèŠ‚çœæ—¶é—´</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/459304/"> ä½¿ç”¨Angularï¼Œæ‚¨å¯ä»¥åšä»»ä½•äº‹æƒ…ã€‚ æˆ–å‡ ä¹æ‰€æœ‰ä¸œè¥¿ã€‚ ä½†æ˜¯æœ‰æ—¶è¿™ç§é˜´é™©çš„â€œå‡ ä¹â€å¯¼è‡´è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³å¼€å‘äººå‘˜åœ¨æµªè´¹æ—¶é—´ï¼Œæ–¹æ³•æ˜¯åˆ›å»ºå˜é€šåŠæ³•ï¼Œæˆ–è€…è¯•å›¾äº†è§£ä¸ºä»€ä¹ˆå‘ç”Ÿäº†æŸäº›äº‹æƒ…ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆæœ‰äº›äº‹æƒ…æ²¡æœ‰æŒ‰é¢„æœŸè¿›è¡Œã€‚ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/bl/sj/vq/blsjvqaqs4fhtnqmscwlw7lx0zs.jpeg"></a> <br><br> æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„è¿™ç¯‡æ–‡ç« çš„ä½œè€…è¯´ï¼Œä»–æƒ³åˆ†äº«ä¸€äº›æŠ€å·§ï¼Œè¿™äº›æŠ€å·§å°†å¸®åŠ©Angularå¼€å‘äººå‘˜èŠ‚çœä¸€äº›æ—¶é—´ã€‚ ä»–å°†è°ˆè®ºAngularçš„é™·é˜±ï¼Œä»–ï¼ˆä¸ä»…æ˜¯ä»–ï¼‰æœ‰æœºä¼šé‡åˆ°ã€‚ <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">1å·</font>  <font color="#3AC1EF">æ‚¨åº”ç”¨çš„è‡ªå®šä¹‰æŒ‡ä»¤ä¸èµ·ä½œç”¨</font> </h2><br> å› æ­¤ï¼Œæ‚¨æ‰¾åˆ°äº†ä¸€ä¸ªä¸é”™çš„ç¬¬ä¸‰æ–¹AngularæŒ‡ä»¤ï¼Œå¹¶å†³å®šå°†å…¶ä¸Angularæ¨¡æ¿ä¸­çš„æ ‡å‡†å…ƒç´ ä¸€èµ·ä½¿ç”¨ã€‚ å¤ªå¥½äº†ï¼ è®©æˆ‘ä»¬å°è¯•è¿™æ ·åšï¼š <br><br><pre><code class="javascript hljs">&lt;span awesomeTooltip=<span class="hljs-string"><span class="hljs-string">"'Tooltip text'"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br> æ‚¨å¯åŠ¨åº”ç”¨ç¨‹åºâ€¦â€¦ä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿã€‚ æ‚¨åƒä»»ä½•æ™®é€šçš„ï¼Œæœ‰ç»éªŒçš„ç¨‹åºå‘˜ä¸€æ ·ï¼Œä¼šæŸ¥çœ‹Chromeå¼€å‘è€…å·¥å…·æ§åˆ¶å°ã€‚ è€Œä¸”æ‚¨åœ¨é‚£é‡Œä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ã€‚ è¯¥æŒ‡ä»¤ä¸èµ·ä½œç”¨ï¼ŒAngularæ˜¯é™é»˜çš„ã€‚ <br><br> ç„¶åï¼Œå›¢é˜Ÿä¸­çš„ä¸€äº›èªæ˜äººå†³å®šå°†æŒ‡ä»¤æ”¾åœ¨æ–¹æ‹¬å·ä¸­ã€‚ <br><br><pre> <code class="javascript hljs">&lt;span [awesomeTooltip]=<span class="hljs-string"><span class="hljs-string">"'Tooltip text'"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br> ä¹‹åï¼Œç”±äºæµªè´¹äº†ä¸€äº›æ—¶é—´ï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä»¥ä¸‹å†…å®¹ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/532/4aa/95f/5324aa95f7aa2d0d1a20e74f93953eb1.png"></div><br>  <i><font color="#999999">äº‹æƒ…å°±æ˜¯è¿™æ ·ï¼šæˆ‘ä»¬åªæ˜¯å¿˜è®°äº†ä½¿ç”¨æŒ‡ä»¤å¯¼å…¥æ¨¡å—</font></i> <br><br> ç°åœ¨é—®é¢˜çš„åŸå› éå¸¸æ˜æ˜¾ï¼šæˆ‘ä»¬åªæ˜¯å¿˜è®°äº†å°†æŒ‡ä»¤æ¨¡å—å¯¼å…¥Angularåº”ç”¨ç¨‹åºæ¨¡å—ã€‚ <br> è¿™å¯¼è‡´äº†ä¸€æ¡é‡è¦è§„åˆ™ï¼šåˆ‡å‹¿ä½¿ç”¨ä¸å¸¦æ–¹æ‹¬å·çš„æŒ‡ä»¤ã€‚ <br><br> æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>å°è¯•ä½¿ç”¨æŒ‡ä»¤ã€‚ <br><br><h2>  <font color="#3AC1EF">2å·</font>  <font color="#3AC1EF">ViewChildè¿”å›æœªå®šä¹‰</font> </h2><br> å‡è®¾æ‚¨åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘Angularæ¨¡æ¿ä¸­æè¿°çš„æ–‡æœ¬è¾“å…¥å…ƒç´ çš„é“¾æ¥ã€‚ <br><br><pre> <code class="javascript hljs">&lt;input type=<span class="hljs-string"><span class="hljs-string">"text"</span></span> name=<span class="hljs-string"><span class="hljs-string">"fname"</span></span> #inputTag&gt;</code> </pre> <br> æ‚¨å°†ä½¿ç”¨RxJS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">fromEvent</a>å‡½æ•°åˆ›å»ºä¸€ä¸ªæµï¼Œè¯¥æµå°†è¿›å…¥è¯¥æµã€‚ ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªæŒ‡å‘è¾“å…¥å­—æ®µçš„é“¾æ¥ï¼Œå¯ä»¥ä½¿ç”¨Angular <code>ViewChild</code>è£…é¥°å™¨è·å¾—è¯¥<code>ViewChild</code> ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AfterViewInit</span></span></span><span class="hljs-class"> </span></span>{    @ViewChild(<span class="hljs-string"><span class="hljs-string">'inputTag'</span></span>) inputTag: ElementRef;    ngAfterViewInit(){        <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> input$ = fromEvent(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputTag.nativeElement, <span class="hljs-string"><span class="hljs-string">'keyUp'</span></span>)    } ...   }</code> </pre> <br> åœ¨è¿™é‡Œï¼Œä½¿ç”¨RxJS <code>fromEvent</code>å‡½æ•°ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæµï¼Œè¾“å…¥è¯¥å­—æ®µçš„æ•°æ®å°†è½å…¥è¯¥æµä¸­ã€‚ <br> æµ‹è¯•æ­¤ä»£ç ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f0/504/558/4f0504558e9daf73a87d78da7f00fb04.png"></div><br>  <i><font color="#999999">å¤±è¯¯</font></i> <br><br> å‘ç”Ÿä»€ä¹ˆäº‹äº† <br><br> å®é™…ä¸Šï¼Œä»¥ä¸‹è§„åˆ™é€‚ç”¨äºæ­¤ï¼šå¦‚æœ<code>ViewChild</code>è¿”å›<code>undefined</code> ï¼Œè¯·åœ¨æ¨¡æ¿ä¸­æŸ¥æ‰¾<code>*ngIf</code> ã€‚ <br><br><pre> <code class="javascript hljs">&lt;div *ngIf=<span class="hljs-string"><span class="hljs-string">"someCondition"</span></span>&gt;    <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"fname"</span></span></span></span><span class="xml"><span class="hljs-tag"> #</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">inputTag</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br> åœ¨è¿™é‡Œï¼Œä»–æ˜¯é—®é¢˜çš„å…ƒå‡¶ã€‚ <br><br> æ­¤å¤–ï¼Œè¯·åœ¨é—®é¢˜å…ƒç´ ä¸Šæ–¹æ£€æŸ¥æ¨¡æ¿æ˜¯å¦åŒ…å«å…¶ä»–ç»“æ„æ€§æŒ‡ä»¤æˆ–<code>ng-template</code> ã€‚ <br> è€ƒè™‘æ­¤é—®é¢˜çš„å¯èƒ½è§£å†³æ–¹æ¡ˆã€‚ <br><br><h3>  <font color="#3AC1EF">â–è§£å†³é—®é¢˜çš„æ–¹å¼â„–1</font> </h3><br> å¦‚æœä¸éœ€è¦ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°éšè—æ¨¡æ¿å…ƒç´ ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥å…ƒç´ å°†å§‹ç»ˆç»§ç»­å­˜åœ¨ï¼Œå¹¶ä¸”<code>ViewChild</code>å°†èƒ½å¤Ÿåœ¨<code>ngAfterViewInit</code>æŒ‚é’©ä¸­è¿”å›æŒ‡å‘å®ƒçš„é“¾æ¥ã€‚ <br><br><pre> <code class="javascript hljs">&lt;div [hidden]=<span class="hljs-string"><span class="hljs-string">"!someCondition"</span></span>&gt;    <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"fname"</span></span></span></span><span class="xml"><span class="hljs-tag"> #</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">inputTag</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><h3>  <font color="#3AC1EF">â–è§£å†³é—®é¢˜çš„æ–¹å¼â„–2</font> </h3><br> è§£å†³æ­¤é—®é¢˜çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨setterã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeComponent</span></span></span><span class="hljs-class"> </span></span>{   @ViewChild(<span class="hljs-string"><span class="hljs-string">'inputTag'</span></span>) set inputTag(input: ElementRef|<span class="hljs-literal"><span class="hljs-literal">null</span></span>) {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!input) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.doSomething(input);  }  doSomething(input) {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> input$ = keysfromEvent(input.nativeElement, <span class="hljs-string"><span class="hljs-string">'keyup'</span></span>);    ...  } }</code> </pre> <br> åœ¨è¿™é‡Œï¼Œåªè¦Angularä¸º<code>inputTag</code>å±æ€§åˆ†é…äº†ç‰¹å®šçš„å€¼ï¼Œæˆ‘ä»¬å°±ä¼šæ ¹æ®åœ¨è¾“å…¥å­—æ®µä¸­è¾“å…¥çš„æ•°æ®åˆ›å»ºä¸€ä¸ªæµã€‚ <br><br> ä»¥ä¸‹æ˜¯ä¸æ­¤é—®é¢˜ç›¸å…³çš„å‡ ä¸ªæœ‰ç”¨èµ„æºï¼š <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨è¿™é‡Œ</a>æ‚¨å¯ä»¥çœ‹åˆ°Angular 8ä¸­<code>ViewChild</code>çš„ç»“æœå¯ä»¥æ˜¯é™æ€çš„ä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚ </li><li> å¦‚æœæ‚¨åœ¨ä½¿ç”¨RxJæ—¶é‡åˆ°å›°éš¾ï¼Œè¯·è§‚çœ‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤</a>è§†é¢‘è¯¾ç¨‹ã€‚ </li></ul><br><h2>  <font color="#3AC1EF">3å·</font>  <font color="#3AC1EF">æ›´æ–°ç”±* ngForç”Ÿæˆçš„åˆ—è¡¨æ—¶çš„ä»£ç æ‰§è¡Œï¼ˆå…ƒç´ å‡ºç°åœ¨DOMä¸­ä¹‹åï¼‰</font> </h2><br> å‡è®¾æ‚¨æœ‰ä¸€äº›æœ‰è¶£çš„è‡ªå®šä¹‰æŒ‡ä»¤æ¥ç»„ç»‡å¯æ»šåŠ¨åˆ—è¡¨ã€‚ æ‚¨å°†æŠŠå®ƒåº”ç”¨äºä½¿ç”¨Angular <code>*ngFor</code>åˆ›å»ºçš„åˆ—è¡¨ã€‚ <br><br><pre> <code class="javascript hljs">&lt;div *ngFor=<span class="hljs-string"><span class="hljs-string">"let item of itemsList; let i = index;"</span></span>     [customScroll]     &gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> *</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"let item of items"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"list-item"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{{item}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>   &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;</span></span></code> </pre> <br> é€šå¸¸ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ›´æ–°åˆ—è¡¨æ—¶ï¼Œéœ€è¦è€ƒè™‘åˆ—è¡¨ä¸­å‘ç”Ÿçš„æ›´æ”¹ï¼Œè°ƒç”¨ç±»ä¼¼<code>scrollDirective.update</code>ç±»çš„<code>scrollDirective.update</code>æ¥é…ç½®æ»šåŠ¨è¡Œä¸ºã€‚ <br><br> ä¼¼ä¹å¯ä»¥ä½¿ç”¨<code>ngOnChanges</code>æŒ‚é’©å®Œæˆæ­¤æ“ä½œï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnChanges</span></span></span><span class="hljs-class"> </span></span>{  @Input() itemsList = [];   @ViewChild(CustomScrollDirective) scroll: CustomScrollDirective;  ngOnChanges(changes) {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (changes.itemsList) {      <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scroll.update();    }  } ... }</code> </pre> <br> æ²¡é”™ï¼Œè¿™é‡Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªé—®é¢˜ã€‚ åœ¨æµè§ˆå™¨æ˜¾ç¤ºæ›´æ–°çš„åˆ—è¡¨ä¹‹å‰ï¼Œå°†è°ƒç”¨è¯¥æŒ‚é’©ã€‚ ç»“æœï¼Œé”™è¯¯åœ°æ‰§è¡Œäº†ç”¨äºæ»šåŠ¨åˆ—è¡¨çš„æŒ‡ä»¤å‚æ•°çš„é‡æ–°è®¡ç®—ã€‚ <br><br>  <code>*ngFor</code>å®Œæˆå·¥ä½œåï¼Œå¦‚ä½•ç«‹å³æ‹¨æ‰“ç”µè¯ï¼Ÿ <br><br> æ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹3ä¸ªç®€å•æ­¥éª¤è¿›è¡Œæ“ä½œï¼š <br><br><h3>  <font color="#3AC1EF">â–ç¬¬1æ­¥</font> </h3><br> å°†é“¾æ¥æ”¾ç½®åˆ°åº”ç”¨äº†<code>*ngFor</code> ï¼ˆ <code>#listItems</code> ï¼‰çš„å…ƒç´ ä¸Šã€‚ <br><br><pre> <code class="javascript hljs">&lt;div [customScroll]&gt;    <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> *</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"let item of items"</span></span></span></span><span class="xml"><span class="hljs-tag"> #</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">listItems</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{{item}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">â–æ­¥éª¤2</font> </h3><br> ä½¿ç”¨Angular <code>ViewChildren</code>è£…é¥°å™¨è·å–è¿™äº›å…ƒç´ çš„åˆ—è¡¨ã€‚ å®ƒè¿”å›<code>QueryList</code>ç±»å‹çš„å®ä½“ã€‚ <br><br><h3>  <font color="#3AC1EF">â–ç¬¬3æ­¥</font> </h3><br>  <code>QueryList</code>ç±»å…·æœ‰åªè¯»çš„<a href="">changes</a>å±æ€§ï¼Œè¯¥å±æ€§åœ¨æ¯æ¬¡åˆ—è¡¨æ›´æ”¹æ—¶éƒ½ä¼š<code>QueryList</code>äº‹ä»¶ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AfterViewInit</span></span></span><span class="hljs-class"> </span></span>{  @Input() itemsList = [];   @ViewChild(CustomScrollDirective) scroll: CustomScrollDirective;  @ViewChildren(<span class="hljs-string"><span class="hljs-string">'listItems'</span></span>) listItems: QueryList&lt;any&gt;;  private sub: Subscription;   ngAfterViewInit() {    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.sub = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.listItems.changes.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scroll.update())  } ... }</code> </pre> <br> ç°åœ¨é—®é¢˜å·²è§£å†³ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨è¿™é‡Œï¼Œ</a>æ‚¨å¯ä»¥å°è¯•ç›¸åº”çš„ç¤ºä¾‹ã€‚ <br><br><h2>  <font color="#3AC1EF">4å·</font>  <font color="#3AC1EF">å¯ä»¥åœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹è¿è¡ŒæŸ¥è¯¢æ—¶å‘ç”Ÿçš„ActivatedRoute.queryParamé—®é¢˜</font> </h2><br> ä»¥ä¸‹ä»£ç å°†å¸®åŠ©æˆ‘ä»¬ç†è§£æ­¤é—®é¢˜çš„æœ¬è´¨ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// app-routing.module.ts const routes: Routes = [    {path: '', redirectTo: '/home', pathMatch: 'full'},    {path: 'home', component: HomeComponent},  ];   @NgModule({    imports: [RouterModule.forRoot(routes)], //  #1    exports: [RouterModule]  })  export class AppRoutingModule { }    //app.module.ts  @NgModule({    ...    bootstrap: [AppComponent] //  #2  })  export class AppModule { }   // app.component.html  &lt;router-outlet&gt;&lt;/router-outlet&gt; //  #3    // app.component.ts  export class AppComponent implements OnInit {    title = 'QueryTest';     constructor(private route: ActivatedRoute) { }     ngOnInit() {      this.route.queryParams          .subscribe(params =&gt; {            console.log('saveToken', params); //  #4          });    }  }</span></span></code> </pre> <br> è¯¥ä»£ç çš„æŸäº›ç‰‡æ®µè¢«æ³¨é‡Šä¸º<code> #x</code> ã€‚ è€ƒè™‘ä»–ä»¬ï¼š <br><br><ol><li> åœ¨åº”ç”¨ç¨‹åºçš„ä¸»æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†è·¯ç”±ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ äº†<code>RouterModule</code> ã€‚ é…ç½®äº†è·¯ç”±ï¼Œä»¥ä¾¿å¦‚æœURLä¸­æœªæä¾›è·¯ç”±ï¼Œæˆ‘ä»¬ä¼šå°†ç”¨æˆ·é‡å®šå‘åˆ°<code>/home</code> ã€‚ </li><li> ä½œä¸ºä¸‹è½½ç»„ä»¶ï¼Œæˆ‘ä»¬åœ¨ä¸»æ¨¡å—<code>AppComponent</code>æŒ‡å®šã€‚ </li><li>  <code>AppComponent</code>ä½¿ç”¨<code>&lt;router-outlet&gt;</code>è¾“å‡ºé€‚å½“çš„è·¯ç”±ç»„ä»¶ã€‚ </li><li> ç°åœ¨æœ€é‡è¦çš„æ˜¯ã€‚ æˆ‘ä»¬éœ€è¦ä»URLè·å–<code>queryParams</code>ä½œä¸ºè·¯çº¿çš„ </li></ol><br> å‡è®¾æˆ‘ä»¬è·å¾—äº†ä»¥ä¸‹URLï¼š <br><br><pre> <code class="javascript hljs">https:<span class="hljs-comment"><span class="hljs-comment">//localhost:4400/home?accessToken=someTokenSequence</span></span></code> </pre> <br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <code>queryParams</code>å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="javascript hljs">{<span class="hljs-attr"><span class="hljs-attr">accessToken</span></span>: <span class="hljs-string"><span class="hljs-string">'someTokenSequence'</span></span>}</code> </pre> <br> è®©æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æ‰€æœ‰è¿™äº›å·¥ä½œã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29f/aef/ae5/29faefae56d8e01e314cb6eab9fae6dc.png"></div><br>  <i><font color="#999999">æµ‹è¯•å®ç°è·¯ç”±ç³»ç»Ÿçš„åº”ç”¨ç¨‹åº</font></i> <br><br> åœ¨è¿™é‡Œï¼Œæ‚¨å¯èƒ½å¯¹é—®é¢˜çš„å®è´¨æœ‰ç–‘é—®ã€‚ æˆ‘ä»¬å¾—åˆ°äº†å‚æ•°ï¼Œä¸€åˆ‡æŒ‰é¢„æœŸè¿›è¡Œ... <br><br> æŸ¥çœ‹ä¸Šé¢çš„æµè§ˆå™¨å±å¹•å¿«ç…§ï¼Œä»¥åŠæ§åˆ¶å°ä¸­æ˜¾ç¤ºçš„å†…å®¹ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°<code>queryParams</code>å¯¹è±¡å·²å‘å‡ºä¸¤æ¬¡ã€‚ ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸ºç©ºï¼›å®ƒåœ¨Angularè·¯ç”±å™¨çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘å‡ºã€‚ åªæœ‰åœ¨æ­¤ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½è·å¾—åŒ…å«è¯·æ±‚å‚æ•°çš„å¯¹è±¡ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ä¸º<code>{accessToken: 'someTokenSequence'}</code> ï¼‰ã€‚ <br><br> é—®é¢˜æ˜¯ï¼Œå¦‚æœURLä¸­æ²¡æœ‰è¯·æ±‚å‚æ•°ï¼Œåˆ™è·¯ç”±å™¨å°†ä¸è¿”å›ä»»ä½•å†…å®¹ã€‚ å³-åœ¨å‘å‡ºç¬¬ä¸€ä¸ªç©ºå¯¹è±¡ä¹‹åï¼Œä¹Ÿå¯èƒ½ä¸ä¼šæŒ‡ç¤ºå¯èƒ½æ²¡æœ‰å‚æ•°çš„ç¬¬äºŒä¸ªå¯¹è±¡ä¹Ÿä¸ºç©ºã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e16/1b7/8be/e161b78be5051b1ee9f9ca1ec2c9d31a.png"></div><br>  <i><font color="#999999">åœ¨æ‰§è¡Œä¸å¸¦å‚æ•°çš„è¯·æ±‚æ—¶ï¼Œä¸ä¼šå‘å‡ºç¬¬äºŒä¸ªå¯¹è±¡</font></i> <br><br> ç»“æœï¼Œäº‹å®è¯æ˜ï¼Œå¦‚æœä»£ç æœŸæœ›ç¬¬äºŒä¸ªå¯¹è±¡å¯ä»¥ä»ä¸­æ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œé‚£ä¹ˆå¦‚æœURLä¸­æ²¡æœ‰è¯·æ±‚å‚æ•°ï¼Œåˆ™å®ƒå°†ä¸ä¼šå¯åŠ¨ã€‚ <br><br> å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ åœ¨è¿™é‡Œï¼ŒRxJå¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚ æˆ‘ä»¬å°†åŸºäº<code>ActivatedRoute.queryParams</code>åˆ›å»ºä¸¤ä¸ªå¯è§‚å¯Ÿå¯¹è±¡ã€‚ åƒå¾€å¸¸ä¸€æ ·-è€ƒè™‘é€æ­¥è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚ <br><br><h3>  <font color="#3AC1EF">â–ç¬¬1æ­¥</font> </h3><br> å¦‚æœ<code>queryParams</code>ä¸ä¸ºç©ºï¼Œåˆ™ç¬¬ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡<code>paramsInUrl$</code>å°†<code>paramsInUrl$</code>æ•°æ®ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private route: ActivatedRoute,                private locationService: Location) {    }    ngOnInit() {             <span class="hljs-comment"><span class="hljs-comment">//            //              const paramsInUrl$ = this.route.queryParams.pipe(            filter(params =&gt; Object.keys(params).length &gt; 0)        );     ...    } }</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">â–æ­¥éª¤2</font> </h3><br> ä»…å½“åœ¨URLä¸­æœªæ‰¾åˆ°è¯·æ±‚å‚æ•°æ—¶ï¼Œç¬¬äºŒä¸ªå¯è§‚å¯Ÿå¯¹è±¡<code>noParamsInUrl$</code>æ‰ä¼š<code>noParamsInUrl$</code>ç©ºå€¼ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{    title = <span class="hljs-string"><span class="hljs-string">'QueryTest'</span></span>;    <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private route: ActivatedRoute,                private locationService: Location) {    }    ngOnInit() {                 ...        <span class="hljs-comment"><span class="hljs-comment">//   ,     ,   URL        //             const noParamsInUrl$ = this.route.queryParams.pipe(            filter(() =&gt; !this.locationService.path().includes('?')),            map(() =&gt; ({}))        );            ...    } }</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">â–ç¬¬3æ­¥</font> </h3><br> ç°åœ¨ï¼Œä½¿ç”¨RxJS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆå¹¶</a>åŠŸèƒ½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆå¹¶</a>è§‚å¯Ÿåˆ°çš„å¯¹è±¡ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{    title = <span class="hljs-string"><span class="hljs-string">'QueryTest'</span></span>;    <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private route: ActivatedRoute,                private locationService: Location) {    }    ngOnInit() {             <span class="hljs-comment"><span class="hljs-comment">//            //              const paramsInUrl$ = this.route.queryParams.pipe(            filter(params =&gt; Object.keys(params).length &gt; 0)        );        //   ,     ,   URL        //             const noParamsInUrl$ = this.route.queryParams.pipe(            filter(() =&gt; !this.locationService.path().includes('?')),            map(() =&gt; ({}))        );        const params$ = merge(paramsInUrl$, noParamsInUrl$);        params$.subscribe(params =&gt; {            console.log('saveToken', params);        });    } }</span></span></code> </pre> <br> ç°åœ¨ï¼Œè§‚å¯Ÿåˆ°çš„<code>param$</code>å¯¹è±¡ä»…<code>param$</code>å€¼-ä¸ç®¡<code>queryParams</code>ä¸­æ˜¯å¦<code>queryParams</code> ï¼ˆ <code>queryParams</code>å¸¦æœ‰æŸ¥è¯¢å‚æ•°çš„å¯¹è±¡ï¼‰æˆ–å¦ï¼ˆ <code>queryParams</code>ç©ºå¯¹è±¡ï¼‰ã€‚ <br><br> æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>å°è¯•æ­¤ä»£ç ã€‚ <br><br><h2>  <font color="#3AC1EF">5å·</font>  <font color="#3AC1EF">æ…¢é¡µ</font> </h2><br> å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ˜¾ç¤ºä¸€äº›æ ¼å¼åŒ–æ•°æ®çš„ç»„ä»¶ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// home.component.html &lt;div class="wrapper" (mousemove)="mouseCoordinates = {x: $event.x, y: $event.y}"&gt;  &lt;div *ngFor="let item of items"&gt;     &lt;span&gt;{{formatItem(item)}}&lt;/span&gt;  &lt;/div&gt; &lt;/div&gt; {{mouseCoordinates | json}} // home.component.ts export class HomeComponent {    items = [1, 2, 3, 4, 5, 6];    mouseCoordinates = {};    formatItem(item) {              //           const t = Array.apply(null, Array(5)).map(() =&gt; 1);             console.log('formatItem');        return item + '%';    } }</span></span></code> </pre> <br> è¯¥ç»„ä»¶è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š <br><br><ol><li> å®ƒæ˜¾ç¤ºä¸€ä¸ªå…ƒç´ æ•°ç»„ï¼ˆå‡å®šæ­¤æ“ä½œæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚ å¦å¤–ï¼Œå®ƒé€šè¿‡è°ƒç”¨<code>formatItem</code>æ–¹æ³•æ ¼å¼åŒ–æ˜¾ç¤ºçš„<code>formatItem</code> ã€‚ </li><li> å®ƒæ˜¾ç¤ºé¼ æ ‡çš„åæ ‡ï¼ˆæ­¤å€¼æ˜¾ç„¶ä¼šç»å¸¸æ›´æ–°ï¼‰ã€‚ </li></ol><br> æ‚¨ä¸å¸Œæœ›è¯¥ç»„ä»¶å‡ºç°ä»»ä½•æ€§èƒ½é—®é¢˜ã€‚ å› æ­¤ï¼Œè¯·ä»…æ‰§è¡Œæ€§èƒ½æµ‹è¯•ä»¥éµå®ˆæ‰€æœ‰æ‰‹ç»­ã€‚ ä½†æ˜¯ï¼Œæ­¤æµ‹è¯•è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸€äº›å¥‡æ€ªçš„ç°è±¡ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/015/97d/621/01597d6210a35f37a8030702c0b71753.png"></div><br>  <i><font color="#999999">å¾ˆå¤šformatItemè°ƒç”¨å’Œå¾ˆå¤šCPUè´Ÿè½½</font></i> <br><br> æ€ä¹ˆäº† ä½†æ˜¯äº‹å®æ˜¯ï¼Œå½“Angularé‡ç»˜æ¨¡æ¿æ—¶ï¼Œå®ƒå°†è°ƒç”¨æ¨¡æ¿ä¸­çš„æ‰€æœ‰å‡½æ•°ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ä¸º<code>formatItem</code>å‡½æ•°ï¼‰ã€‚ ç»“æœï¼Œå¦‚æœåœ¨æ¨¡æ¿åŠŸèƒ½ä¸­æ‰§è¡Œäº†ä»»ä½•ç¹é‡çš„è®¡ç®—ï¼Œåˆ™ä¼šç»™å¤„ç†å™¨å¸¦æ¥å‹åŠ›ï¼Œå¹¶å½±å“ç”¨æˆ·å¯¹ç›¸åº”é¡µé¢çš„æ„ŸçŸ¥æ–¹å¼ã€‚ <br><br> å¦‚ä½•è§£å†³ï¼Ÿ é¢„å…ˆæ‰§è¡Œåœ¨<code>formatItem</code>ä¸­æ‰§è¡Œçš„è®¡ç®—ï¼Œå¹¶åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå·²ç»å‡†å¤‡å¥½çš„æ•°æ®å°±è¶³å¤Ÿäº†ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// home.component.html &lt;div class="wrapper" (mousemove)="mouseCoordinates = {x: $event.x, y: $event.y}"&gt;  &lt;div *ngFor="let item of displayedItems"&gt;    &lt;span&gt;{{item}}&lt;/span&gt;  &lt;/div&gt; &lt;/div&gt; {{mouseCoordinates | json}} // home.component.ts @Component({    selector: 'app-home',    templateUrl: './home.component.html',    styleUrls: ['./home.component.sass'] }) export class HomeComponent implements OnInit {    items = [1, 2, 3, 4, 5, 6];    displayedItems = [];    mouseCoordinates = {};    ngOnInit() {        this.displayedItems = this.items.map((item) =&gt; this.formatItem(item));    }    formatItem(item) {        console.log('formatItem');        const t = Array.apply(null, Array(5)).map(() =&gt; 1);        return item + '%';    } }</span></span></code> </pre> <br> ç°åœ¨ï¼Œæ€§èƒ½æµ‹è¯•çœ‹èµ·æ¥æ›´åŠ ä¸é”™ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ce/f49/118/2cef4911810ce0a506dd0697ee801119.png"></div><br>  <i><font color="#999999">ä»…6ç§æ ¼å¼é¡¹è°ƒç”¨å’Œè¾ƒä½çš„å¤„ç†å™¨è´Ÿè½½</font></i> <br><br> ç°åœ¨ï¼Œè¯¥åº”ç”¨ç¨‹åºè¿è¡Œå¾—æ›´å¥½ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆå…·æœ‰ä¸€äº›å¹¶ä¸æ€»æ˜¯ä»¤äººæ„‰å¿«çš„åŠŸèƒ½ï¼š <br><br><ul><li> ç”±äºæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºé¼ æ ‡çš„åæ ‡ï¼Œå› æ­¤<code>mousemove</code>äº‹ä»¶ä»ä¼šè§¦å‘æ›´æ”¹æ£€æŸ¥ã€‚ ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬éœ€è¦é¼ æ ‡çš„åæ ‡ï¼Œå› æ­¤æ— æ³•æ‘†è„±è¿™ä¸€ç‚¹ã€‚ </li><li> å¦‚æœ<code>mousemove</code>äº‹ä»¶å¤„ç†ç¨‹åºä»…éœ€è¦æ‰§è¡Œä¸€äº›è®¡ç®—ï¼ˆä¸ä¼šå½±å“é¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥åŠ å¿«åº”ç”¨ç¨‹åºçš„é€Ÿåº¦ï¼š <br><br><ol><li> æ‚¨å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°å†…ä½¿ç”¨<code>NgZone.runOutsideOfAngular</code> ã€‚ è¿™æ ·å¯ä»¥é˜²æ­¢åœ¨<code>mousemove</code>äº‹ä»¶<code>mousemove</code>å¼€å§‹è¿›è¡Œæ›´æ”¹æ£€æŸ¥ï¼ˆè¿™åªä¼šå½±å“æ­¤å¤„ç†ç¨‹åºï¼‰ã€‚ </li><li> æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨polyfills.tsä¸­çš„ä»¥ä¸‹ä»£ç æ¥é˜²æ­¢æŸäº›äº‹ä»¶çš„zone.jsè¡¥ä¸ã€‚ è¿™å°†å½±å“æ•´ä¸ªAngularåº”ç”¨ç¨‹åºã€‚ </li></ol></li></ul><br><pre> <code class="javascript hljs">* (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> any).__zone_symbol__UNPATCHED_EVENTS = [<span class="hljs-string"><span class="hljs-string">'scroll'</span></span>, <span class="hljs-string"><span class="hljs-string">'mousemove'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//     </span></span></code> </pre> <br> å¦‚æœæ‚¨å¯¹æé«˜Angularåº”ç”¨ç¨‹åºæ€§èƒ½çš„é—®é¢˜æ„Ÿå…´è¶£- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a> -æœ‰å…³æ­¤çš„æœ‰ç”¨ææ–™ã€‚ <br><br><h2>  <font color="#3AC1EF">æ€»ç»“</font> </h2><br> æ—¢ç„¶æ‚¨å·²ç»é˜…è¯»äº†æœ¬æ–‡ï¼Œé‚£ä¹ˆAngular-developerå·¥å…·åº“ä¸­åº”è¯¥ä¼šå‡ºç°5ä¸ªæ–°å·¥å…·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬è§£å†³ä¸€äº›å¸¸è§é—®é¢˜ã€‚ å¸Œæœ›æ‚¨åœ¨è¿™é‡Œæ‰¾åˆ°çš„æç¤ºå¯ä»¥å¸®åŠ©æ‚¨èŠ‚çœæ—¶é—´ã€‚ <br><br>  <b>äº²çˆ±çš„è¯»è€…ä»¬ï¼</b> æ‚¨æ˜¯å¦çŸ¥é“ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨èŠ‚çœå¼€å‘Angularåº”ç”¨ç¨‹åºçš„æ—¶é—´ï¼Ÿ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN459304/">https://habr.com/ru/post/zh-CN459304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN459294/index.html">æ›´é‡è¦çš„æ˜¯ï¼šäº†è§£ç¼–ç¨‹è¯­è¨€æˆ–èƒ½å¤Ÿè§£å†³ä¸šåŠ¡é—®é¢˜ï¼Ÿ</a></li>
<li><a href="../zh-CN459296/index.html">JavaScriptä»·æ ¼2019</a></li>
<li><a href="../zh-CN459298/index.html">Angularï¼š2019å¹´çŠ¶æ€</a></li>
<li><a href="../zh-CN459300/index.html">Quasar 1.0ï¼šVueå¼€å‘äººå‘˜çš„æ–°å®ç”¨å·¥å…·ï¼Œä¸ä»…é™äºä»–ä»¬</a></li>
<li><a href="../zh-CN459302/index.html">åœ¨Angularä¸­é‡è¯•å¤±è´¥çš„HTTPè¯·æ±‚</a></li>
<li><a href="../zh-CN459306/index.html">æ— æœåŠ¡å™¨ç¯å¢ƒä¸­çš„æœåŠ¡å™¨æ¸²æŸ“</a></li>
<li><a href="../zh-CN459308/index.html">SEOåœ¨2019å¹´ä¸èµ·ä½œç”¨ï¼Ÿ</a></li>
<li><a href="../zh-CN459310/index.html">æµ‹è¯•è‡ªåŠ¨åŒ–å·¥å…·æˆ–ç§»åŠ¨ç±»å›ºé†‡æµ‹è¯•ä»ª</a></li>
<li><a href="../zh-CN459312/index.html">äº²çˆ±çš„æ•æ·ï¼Œæˆ‘è®¨åŒå‡è£…</a></li>
<li><a href="../zh-CN459314/index.html">å¯è§†åŒ–å¹¶å¤„ç†å“ˆå¸ŒåŒ¹é…è”æ¥</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>