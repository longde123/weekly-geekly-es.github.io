<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôé üë®üèª‚Äç‚úàÔ∏è üìµ N'ayez pas peur du microservice: Alexey Baitov sur l'utilisation de l'architecture des microservices dans la pratique üì® üõå üî†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour certains, les microservices sont la possibilit√© de refaire et de refactoriser une application dans un style relativement moderne. Cette solution ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>N'ayez pas peur du microservice: Alexey Baitov sur l'utilisation de l'architecture des microservices dans la pratique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/418941/"> Pour certains, les microservices sont la possibilit√© de refaire et de refactoriser une application dans un style relativement moderne.  Cette solution architecturale ne convient pas aux autres en raison des particularit√©s de l'interaction des diff√©rentes parties de l'application.  Dans tous les cas, en choisissant une architecture, il est utile d'√©tudier l'exp√©rience des autres de la transition d'un monolithe √† un ensemble de services. <br><br>  Nous avons demand√© √† partager notre √©tude de cas sur le d√©veloppement et la livraison de microservices Alexei Baitov, ing√©nieur principal de 2GIS.  Parlons des solutions architecturales, du d√©ploiement et de l'√©volutivit√©.  Parlons des tendances et des outils pratiques pour travailler. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f87/346/860/f8734686085fb6cf3580ff6fa636e8bf.jpg"><br><a name="habracut"></a><br>  <b>- Alexey, parlez-nous un peu de vous et de votre √©quipe dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2GIS</a> .</b>  <b>Sur quoi travaillez-vous maintenant?</b> <br><br><img src="https://habrastorage.org/webt/gk/aa/_8/gkaa_8zwcfej8txrfq901zub1qs.jpeg" align="left">  Je suis entr√© dans l'informatique en 2003 en tant qu'administrateur syst√®me, j'ai plong√© dans le d√©veloppement en 2011.  Pendant ce temps, il a travaill√© en PHP, JavaScript, impl√©ment√© une s√©rie de services RESTful et un pilote Python pour Git.  Je travaille dans 2GIS depuis 2015. <br><br>  Il a particip√© au d√©veloppement de deux architectures de microservices.  Le premier consistait en un service.  C'√©tait un proxy inverse asynchrone avec un cache.  En fait, il √©tait engag√© dans l'envoi de messages.  J'√©tais le seul impliqu√© dans l'√©laboration des exigences, le d√©veloppement et la construction de DevOps, mais des experts de notre soci√©t√© 2GIS m'ont aid√©. <br><br>  Le service a √©t√© √©crit en Go.  Une compilation rapide m'a permis de ne pas attendre et j'ai pu me concentrer sur le d√©ploiement continu.  Ensuite, nous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commencions √†</a> peine √† utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitLab CI</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Prometheus</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Grafana</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Deis</a> (analogue open source de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heroku</a> ).  Nous avons une √©quipe d'Infrastructure et Op√©rations qui, au moment de mon d√©veloppement, a amen√© toutes ces solutions d'infrastructure au niveau de production.  J'ai d√©cid√© d'essayer tout cela et j'ai impl√©ment√© avec succ√®s un microservice ind√©pendant. <br><br>  Il y a deux ans, j'ai rejoint une autre √©quipe sur un nouveau projet, o√π j'ai commenc√© √† m'engager dans la programmation fonctionnelle √† Scala.  Notre √©quipe √† partir de z√©ro a d√©velopp√© une architecture de microservices pour le stockage de mat√©riel publicitaire 2GIS en Scala, C # et JavaScript.  J'ai jet√© les bases de tous les services avec les outils et l'exp√©rience acquise pour construire des pratiques DevOps (D√©ploiement Continu et Maintenance).  L'architecture est pass√©e du prototype √† l'exploitation industrielle.  Elle a absorb√© deux monolithes, se compose d√©sormais de 15 services et est en constante expansion. <br><br>  <b>- √ätes-vous d'accord pour dire que les microservices sont essentiellement un ensemble de services d√©ploy√©s ind√©pendamment qui ont des caract√©ristiques communes, c'est-√†-dire qu'un ensemble de certaines fonctionnalit√©s leur donne l'apparence d'un microservice?</b>  <b>Cette d√©finition doit-elle √™tre √©largie?</b>  <b>Ou, en fait, les entreprises ont-elles une compr√©hension diff√©rente de l'architecture des microservices?</b> <br><br>  J'aime la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©finition</a> suivante.  L'architecture de microservice est un style architectural qui structure une application comme une collection de services faiblement coupl√©s qui impl√©mentent une logique m√©tier sp√©cifique.  Les services d'une architecture de microservices peuvent ne pas avoir de caract√©ristiques communes, mais sont combin√©s dans une logique m√©tier commune. <br><blockquote>  Bien s√ªr, chaque entreprise aura son propre microservice.  Il s'agit d'un ensemble de pratiques: architecture distribu√©e, int√©gration et livraison continues, etc.  Si vous √©tendez le concept de la pratique aux outils utilis√©s, les options de mise en ≈ìuvre des microservices seront tr√®s diverses. </blockquote>  <b>- Il existe diff√©rentes opinions sur la composition de l'√©quipe, qui devrait √™tre impliqu√©e dans la r√©daction et le soutien des microservices.</b>  <b>Qu'en pensez-vous?</b>  <b>Quelle est la taille optimale de l'√©quipe et comment devrait-elle √™tre construite par l'interaction en son sein lors du d√©veloppement d'une architecture de microservice?</b>  <b>Y a-t-il un bon exemple de travail d'√©quipe de votre pratique?</b> <br><br>  Il est consid√©r√© comme correct de d√©velopper un service de telle mani√®re que l'ensemble de son domaine puisse tenir dans la t√™te d'un d√©veloppeur.  Parall√®lement, plusieurs personnes peuvent participer au d√©veloppement de ce service.  Cela aidera √† √©viter le facteur bus lorsque le d√©veloppeur est parti en vacances ou est tomb√© malade.  Une r√©partition correcte des services permet √† une nouvelle personne d'entrer rapidement dans le contexte. <br><br>  L'architecture de microservice nous indique qu'elle comprend souvent plusieurs services.  Ainsi, un d√©veloppeur ne peut pas faire.  L'architecture de microservice s'appuie sur le mod√®le de produit (ou la logique m√©tier commune).  Les d√©veloppeurs sont s√©lectionn√©s pour qu'il s'av√®re impl√©menter ce mod√®le et en m√™me temps se concentrer sur le client. <br><br>  La concentration sur le client est organis√©e par un contact direct entre le d√©veloppeur et le client.  Les d√©veloppeurs doivent voir comment leur produit est utilis√©.  De cela, les souhaits de connaissances dans le domaine technologique, la capacit√© de livrer le produit au client et d'accompagner le produit d√®s que possible suivent. <br><br>  C'est difficile √† dire sur la taille de l'√©quipe.  Tout le monde conna√Æt probablement d√©j√† la d√©claration de Jeff Bezos, le fondateur d'Amazon, selon laquelle la taille de l'√©quipe de d√©veloppement orient√©e services devrait √™tre suffisamment petite pour que tout le monde puisse se nourrir de deux pizzas.  Dans les commentaires sur Habr√©, il y a eu une discussion sur ce sujet, et ils ont √©crit qu'une personne peut ne pas avoir assez d'une pizza et qu'une √©quipe devrait donc √™tre compos√©e d'une ou deux personnes.  Martin Fowler, citant une d√©claration concernant deux pizzas, a d√©clar√© qu'il s'agissait de grosses pizzas am√©ricaines, apr√®s quoi il a pr√©cis√© que l'√©quipe ne devrait pas avoir 50, mais environ 12 personnes.  Je crois que tout d√©pend du mod√®le de produit.  Mais la clarification de Fowler sur ¬´pas plus de 12 personnes¬ª a gagn√© dans ma pratique jusqu'√† pr√©sent.  J'ai remarqu√© qu'au sein de l'√©quipe, il est souhaitable de se diviser en fonction des int√©r√™ts technologiques, de trouver des personnes partageant les m√™mes id√©es. <br><br>  Il n'est pas n√©cessaire que tout le monde dans l'√©quipe connaisse bien tous les domaines technologiques utilis√©s dans le travail, mais la connaissance totale de l'√©quipe doit √™tre uniform√©ment approfondie.  Par exemple, deux personnes sont engag√©es dans la construction initiale d'un d√©ploiement et √† l'avenir, tr√®s probablement, elles l'am√©lioreront √©galement de mani√®re significative.  Mais en m√™me temps, toute l'√©quipe doit avoir une bonne compr√©hension du processus de d√©ploiement.  Cela lui permettra d'exprimer ses souhaits et d'apporter des modifications.  Pourquoi deux personnes?  Parce que parfois, une personne peut tomber dans une stupeur cr√©ative.  Et dans la discussion, la v√©rit√© est n√©e. <br><br>  Nous avons naturellement construit sur ce principe, unis par des int√©r√™ts technologiques.  Dans le m√™me temps, le d√©veloppeur peut √©galement s'engager dans la mise en place de pratiques DevOps, et l'ing√©nieur QA peut d√©velopper un service auxiliaire hors production (par exemple, le chauffage du cache ou le service de recherche d'anomalies dans les donn√©es dans diff√©rents environnements). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0c/d3d/188/c0cd3d1883cefa481f26765dda16cba2.png"><br><br>  <b>- Presque tous les rapports sur les microservices commencent par l'histoire selon laquelle ¬´ici nous avions un iceberg et nous avons sci√©, sci√©, sci√© ... De nouvelles parties de la demande ont √©t√© faites sur la base de microservices, puis nous avons commenc√© √† s√©parer les¬´ pi√®ces ¬ªdu moteur principal ... "</b> <b><br><br></b>  <b>Dites-moi, √™tes-vous un partisan du d√©veloppement √† partir de z√©ro ou peut-il y avoir des situations o√π cela vaut la peine de tirer une conclusion progressive d'un monolithe?</b>  <b>Comment d√©terminer la strat√©gie de sortie?</b> <br><br>  Je suis un partisan du d√©veloppement √† partir de z√©ro.  Mais cela ne fonctionne que si l'ensemble des fonctions n'est pas trop compliqu√©.  Habituellement, un petit monolithe MVP est fabriqu√©.  Et parfois, il est n√©cessaire de changer radicalement plusieurs fois sa mise en ≈ìuvre interne.  Cela peut √™tre caus√© √† la fois par un changement dans la t√¢che technique et par le fait qu'une compr√©hension de la mise en ≈ìuvre vient - des abstractions de haut niveau apparaissent au niveau du mod√®le commercial.  Apr√®s cela, vous pouvez passer √† l'architecture de microservice. <br><br>  Mais si vous travaillez sur ces abstractions au tout d√©but et que vous les dessinez dans des notations diff√©rentes (UML, BPMN, IDEF), afin que tous les participants au processus comprennent avec quoi ils travaillent, il est tout √† fait possible d'impl√©menter une architecture de microservices imm√©diatement. <br><br>  Notre chemin vers l'architecture de microservices n'√©tait pas simple.  Au d√©but, il y avait un monolithe.  Il a trait√© du mat√©riel publicitaire textuel.  Il y a trois ans et demi, nous devions travailler avec du mat√©riel publicitaire graphique (images, logos).  Il y avait un d√©sir d'introduire dans la logique commerciale ce qui manquait lors de l'utilisation de mat√©riel publicitaire textuel. <br><blockquote>  Pour tester un nouveau mod√®le commercial, nous avons mis en ≈ìuvre des travaux avec du mat√©riel publicitaire graphique comme deuxi√®me monolithe sur une autre pile technologique.  Apr√®s un an et demi de fonctionnement, nous avons r√©alis√© que cette approche √©tait correcte. </blockquote>  Pendant ce temps, nous avons eu beaucoup de liste de souhaits, r√©v√©lant la rugosit√© de la logique m√©tier. <br><br>  La mise en ≈ìuvre du deuxi√®me monolithe a √©t√© difficile √† √©tendre au premier.  Par cons√©quent, nous avons d√©cid√© de ne pas mener le d√©veloppement dans deux monolithes √† la fois, mais de les combiner dans le cadre de la troisi√®me architecture selon le tout nouveau mod√®le commercial.  Une √©quipe de sept d√©veloppeurs, un ing√©nieur QA et deux analystes a √©t√© cr√©√©e.  Deux d√©veloppeurs de cette √©quipe ont pr√©c√©demment cr√©√© et pris en charge le premier monolithe, et un de plus - le deuxi√®me monolithe.  Autrement dit, notre √©quipe d√©j√† √† l'entr√©e connaissait bien les pi√®ges des monolithes pr√©c√©dents. <br><br>  Le premier monolithe a √©t√© √©crit en C #.  Le second est en PHP.  Nous ne voulions pas perdre les morceaux volumineux de code d√©bogu√©s du premier monolithe, et en m√™me temps, le multithreading, un code s√ªr et un typage fort √©taient n√©cessaires.  Le code PHP ne r√©pondait pas en partie √† ces exigences.  Par cons√©quent, C # est rest√© comme base et a mis en ≈ìuvre ce qu'il a bien fait dans le cadre du premier monolithe - travailler avec le contenu du mat√©riel publicitaire - mais sur la base d'un autre stockage: stockage compatible S3 et Kafka. <br><br>  Pour travailler avec le tout nouveau mod√®le √©conomique, Scala et la base de donn√©es PostgreSQL ont √©t√© s√©lectionn√©es cette fois.  Scala a r√©pondu √† nos exigences techniques.  De plus, les d√©veloppeurs Scala √©taient situ√©s au m√™me √©tage que les d√©veloppeurs C #.  Cela a r√©duit le temps de communication de l'√©quipe.  La loi de Conway a fonctionn√© - la structure de l'entreprise a dict√© la structure de la demande.  Le d√©veloppeur PHP est devenu un d√©veloppeur Scala.  Je viens de terminer le travail sur un microservice ind√©pendant sur Golang avec un cycle CI / CD complet, apr√®s quoi j'ai rejoint l'√©quipe et suis √©galement devenu d√©veloppeur Scala. <br><br>  Il est int√©ressant de savoir exactement ce que j'ai propos√© d'utiliser pour travailler avec la logique m√©tier Scala, et non C #.  Le fait est que nous n'avions pas assez de d√©veloppeurs C #.  PHP-shnik et moi voulions nous recycler pour Scala.  De plus, nous avons eu l'opportunit√© d'attirer un d√©veloppeur Scala exp√©riment√©.  Autre point: si nous impl√©mentions tout en C #, nous pourrions obtenir soit une architecture de microservice, soit un autre monolithe en sortie.  La division en Scala et C #, les diff√©rents besoins de stockage et la disponibilit√© de d√©veloppeurs exp√©riment√©s dans chacun des domaines requis - tout cela a directement mis en √©vidence l'architecture de microservice.  Et nous en avons seulement profit√©.  Il y a un an, l'architecture de microservices pour travailler avec des mat√©riaux graphiques et textuels est entr√©e en service commercial et fonctionne avec succ√®s √† ce jour. <br><br>  √Ä la question de savoir s'il est possible de cr√©er une architecture de microservice √† partir de z√©ro.  Il y a un an et demi, alors que nous travaillions sur une architecture de microservices, nous avons propos√© de soutenir une nouvelle orientation de nos produits: le mat√©riel publicitaire vid√©o.  Il fallait tester rapidement un nouveau mod√®le de vente.  Notre architecture en √©tait √† ses balbutiements.  Le travail avec du mat√©riel vid√©o a couvert un nouveau domaine technologique.  Nous avons d√©cid√© de ne pas changer le vecteur de d√©veloppement et impl√©ment√© MVP pour les mat√©riaux vid√©o en tant qu'architecture de microservice autonome en C # et h√©bergement vid√©o de confiance.  C'est une exp√©rience r√©ussie et nous avons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapport</a> sur ce sujet.  Ainsi, nous avons deux architectures de microservices existantes parall√®les.  MVP n'a pas beaucoup d√©velopp√©, Wishlist s'est √©galement accumul√© dessus, et bient√¥t nous combinerons tout dans le cadre d'une architecture de microservice unique - nous aurons un r√©f√©rentiel unique de textes publicitaires, de graphiques et de vid√©os. <br><br>  <b>- Imm√©diatement, deux facteurs importants parlent en faveur des microservices.</b>  <b>Le premier est la capacit√© de sortir des pi√®ces individuelles vers le cloud et, par cons√©quent, une √©volutivit√© colossale.</b>  <b>La seconde est la possibilit√© de cr√©er un service distinct dans une autre langue.</b>  <b>Quels autres avantages du passage aux microservices voyez-vous?</b>  <b>Eh bien, des inconv√©nients, bien s√ªr, je veux aussi entendre.</b> <br><br>  Si nous parlons de la composante technologique, les avantages, en plus de ce qui pr√©c√®de, incluent la possibilit√© d'utiliser une autre pile de technologies.  Et s'il ne nous convient pas, nous en choisirons un autre.  Les nouvelles technologies contournent les probl√®mes des anciennes solutions.  L'architecture de microservice apporte √©galement stabilit√© et ind√©pendance: la d√©gradation d'un service ne doit pas conduire √† la d√©gradation compl√®te de l'ensemble du syst√®me.  La composabilit√© des services permet de r√©utiliser les fonctionnalit√©s des services dans d'autres architectures de microservices.  Du point de vue de la composante organisationnelle, la division en services permet de r√©partir le d√©veloppement au sein d'√©quipes r√©parties ou d'une grande √©quipe. <br><blockquote>  Les principaux inconv√©nients de l'architecture de microservices: elle est beaucoup plus compliqu√©e et sa mise en ≈ìuvre est plus co√ªteuse. </blockquote>  Vous devez √©galement √™tre pr√™t √† prendre en charge les contrats de service, s√©lectionner le bon protocole d'acc√®s √† distance, r√©soudre les probl√®mes d'interaction interservices s√©curis√©s, les pannes possibles, ainsi que d√©dupliquer et g√©rer les transactions distribu√©es. <br><br>  En g√©n√©ral, dans le domaine public, vous pouvez trouver beaucoup d'informations et de documents sur la fa√ßon de travailler avec.  Mais en fait, tout d√©pend de la t√¢che.  Dans ma pratique, les avantages ont toujours √©t√© plus importants que les inconv√©nients. <br><br>  Il vaut toujours la peine de rappeler les mots de Sam Newman: moins le service est important, plus tous les avantages et inconv√©nients de l'architecture de microservice se manifestent. <br><br>  <b>- Vous avez des rapports int√©ressants sur les microservices.</b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©ploiement de microservices</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">approche de d√©ploiement continu dans l'architecture de microservices</a> .</b>  <b>Sur l'une des diapositives de la premi√®re, il y a des mod√®les de d√©ploiement, et dans le rapport, vous dites que pour vous, l'approche tendance est la distribution via des conteneurs.</b>  <b>Pendant ce temps, rien n'a chang√©?</b>  <b>Un tas de Docker + Kubernetes n'a pas perdu de sa pertinence?</b> <br><br>  Nous transf√©rons de plus en plus de services √† ce bundle.  Je pense que nous avons choisi la bonne direction et, pour le moment, nous pr√©voyons d'y adh√©rer.  Si quelque chose change, je vous en parlerai dans un nouveau rapport ou une nouvelle interview. <br><br>  <b>- Quelle est la fluidit√© du d√©ploiement et du transfert continus de microservices vers prod?</b> <br><br>  Tout d√©pend de la fa√ßon de construire le processus.  Au d√©but, il semble que tout soit simple.  Les services sont ind√©pendants, d√©ploy√©s s√©par√©ment.  Une faible coh√©rence est assur√©e par les diff√©rentes approches de la gestion de l'√©volution du contrat.  Et ici, vous devez choisir.  Par exemple, vous pouvez impl√©menter la gestion des versions d'un contrat ou ajouter un service pour d√©connecter un contrat (d√©couplage de contrat). <br><br>  Si dans une architecture de microservices en d√©veloppement actif, il y a 10 services ou plus √† la fois et chacun a son propre versioning, alors il y a un probl√®me de coh√©rence de version.  Il faut essayer de ne pas se confondre dans la compatibilit√© des services des diff√©rentes versions. <br><br>  Le d√©ploiement continu signifie que nous pouvons livrer l'application √† tout moment dans n'importe quel environnement. <br><blockquote>  Une application dans l'architecture de microservices est une collection de services.  Donc, √† tout moment, nous devons conna√Ætre une combinaison stable de versions de service.  Et ailleurs, nous devons avoir un ensemble d'adresses de domaine et d'autres param√®tres sp√©cifiques aux diff√©rents environnements pour configurer les services et les relier les uns aux autres. </blockquote>  Tout cela doit √™tre stock√© quelque part, pour corriger les changements √† plusieurs endroits (les microservices sont ind√©pendants apr√®s tout) et pour ne pas se confondre. <br><br>  Le d√©ploiement continu signifie la possibilit√© de revenir √† n'importe quelle version √† tout moment.  Par cons√©quent, il se peut que vous deviez annuler plusieurs services √† la fois et vous devrez observer l'ordre inverse correct du d√©ploiement des services. <br><br>  Dans un de mes rapports, je parle de notre approche de l'√©volution des contrats, comment ils ont r√©solu le probl√®me de coh√©rence des versions et comment ils ont construit le processus de d√©ploiement dans l'architecture de micro-services de plus de dix services.  Un d√©ploiement continu peut ne pas √™tre sans probl√®me, mais tout est r√©soluble. <br><br>  <b>- Quel pourrait √™tre l'ensemble initial d'outils pour un d√©ploiement continu de microservices?</b>  <b>Quelles options recommanderiez-vous d'utiliser pour travailler avec des microservices?</b> <br><br>  Le d√©ploiement continu est une s√©quence de pipelines, y compris l'int√©gration continue, les tests d'int√©gration et la fourniture de services √† l'environnement d'orchestration.  Les outils de s√©quen√ßage d'√©tapes les plus populaires sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jenkins 2 Pipelines</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TeamCity Build Chains</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bitbucket Pipelines</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitLab CI Pipelines</a> .  Vous devez d'abord automatiser l'int√©gration continue (CI).  Nous avons besoin d'un serveur CI distant pour cr√©er et ex√©cuter des tests sur cet assemblage. <br><br>  Les outils list√©s proposent leurs solutions.  Nous utilisons GitLab CI, et GitLab Runners agissent en tant que tels serveurs.  L'artefact de g√©n√©ration est l'image <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Docker</a> .  Dans le cadre des tests d'int√©gration, vous pouvez effectuer des tests de charge et capacitifs √† l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Gatling</a> , en particulier, pour d√©terminer les ressources dont il a besoin (processeur et m√©moire) pour fonctionner dans un environnement d'orchestration (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes</a> ).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Helm</a> est largement utilis√© pour le d√©ploiement, il vous permet de d√©crire l'architecture de microservice pour diff√©rents environnements.  Dans notre entreprise, nous n'utilisons pas Helm.  Nous avons notre propre outil de d√©ploiement, qui a √©t√© cr√©√© lorsque Helm √©tait dans la version Classic et ne supportait pas diff√©rents environnements.  Ces deux outils ont des qualit√©s utiles similaires, mais la mise en ≈ìuvre et la distribution sont diff√©rentes.  Et notre propre outil nous permet d'apporter des am√©liorations et de tout adapter √† notre infrastructure. <br><br>  <b>- Quelles technologies sont optimales pour les petites et moyennes entreprises qui souhaitent mettre en ≈ìuvre des microservices?</b>  <b>Est-ce un plaisir trop cher pour eux?</b> <br><br>  De plus en plus, je rencontre des confirmations selon lesquelles les petites et moyennes entreprises ne sont pas appropri√©es pour √©lever leur propre environnement d'orchestration (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Docker Swarm</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Apache Mesos</a> ).                  .       (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Cloud Platform</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amazon Web Services</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Microsoft Azure</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Oracle Cloud</a> )    . <br><br>     GitLab  GitLab CI.               . GitLab     Helm    .    Helm    .  Helm   ,           ,     ,        . <br><br>     ,     ,    ,      open source,       . <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spinnaker</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heroku</a> ‚Äî  ,    ,       . <br><br> <b>‚Äî   ,        ,    ,  .             .     ?</b> <br><br>      ,        .     ,          ,           . <br><br>      (       )       .               . <br><br>        .       .          ,    (package).                . <br><br>   ( )   Docker-,           Git.     ,      .       ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> .  ,              . <br><br>             ,       .  :       API.                  .       :    .     ,     API.  ,   API   ,   ‚Äî .      ,         API,             . <br><br>         .     ,       ;         API,      ;   ,     ,     . <br><br> <b>,    ,        .    ,      ?</b> <br><br>  ‚Äî  - .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  ,        API,      ,            .    .            . <br><br> ,   ,      .       ,    ,              .    ,      ,      . <br><br> <b>‚Äî         ,      .   2. ,       ?   ?</b> <br><br>      .    .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mesosphere</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenShift</a>       PaaS  IaaS .    Deis     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   Deis</a>    .  open source  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heroku</a> ,       Heroku Buildpack', Dockerfile'   Docker-.        .    make            Deis.       . <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Deis2</a> .       Deis,        Kubernetes. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> Infrastructure &amp; Operations</a> ,         ,       Kubernetes  Deis2. ,     ,     Deis2,    ,     ‚Äî    Kubernetes.   . Deis2   :       , pod          pod'   namespace.         Infrastructure &amp; Operations. Kubernetes    .         Deis2  Kubernetes.       Deis2   Kubernetes. <br><br> <b>‚Äî ,          ,       ,      ?      ?</b> <br><br>      Helm.     ,        .  Helm       . <br><blockquote> Helm    ,    ‚Äî   :        ,   . </blockquote>  Helm   chart'     chart,         ,   . <br><br>   2        ,         10 .       (          backing : Postgres, Kafka, Zookeeper, Ceph).  -   ,  yaml-    ,      IDE,       .  ,    .  Python,          Python       .   ,      .      ,    . ,     .       ,     ,       .          .   , ,   ,         (  )   .  ,    ,  Helm,        Kubernetes  -  ,    yaml. <br><br>     API        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API Gateway</a> .        ,   ‚Äî  . <br><br>        ,    :    .       ,  ,     . <br><blockquote>  DevOps     ,         .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevOpsConf Russia</a> . <br><br> DevOpsConf Russia  <b>1  2    </b>      RootConf,  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ,   .    DevOps       ,   . <br><br>     DevOps  ,      ,      ‚Äì     .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  15 . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418941/">https://habr.com/ru/post/fr418941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418929/index.html">Tests unitaires et Python</a></li>
<li><a href="../fr418931/index.html">RubyMine 2018.2: attacher un d√©bogueur √† des processus distants, chruby, une analyse de code am√©lior√©e et bien plus encore</a></li>
<li><a href="../fr418933/index.html">OnePlus Review 6. Quand les Chinois ont tout fait comme la derni√®re fois</a></li>
<li><a href="../fr418935/index.html">DZ Online Tech: ABBYY. Comment ne pas se confondre dans les r√©seaux de neurones?</a></li>
<li><a href="../fr418937/index.html">C√©l√©bration du 8e anniversaire avec une premi√®re sortie √† GeekUniversity</a></li>
<li><a href="../fr418943/index.html">Ordinateur chantant, cyborgs et musique de vague - discutez des sons inhabituels et des gadgets audio</a></li>
<li><a href="../fr418945/index.html">Meilleurs ICO ao√ªt 2018 (vote)</a></li>
<li><a href="../fr418951/index.html">UE4 | Inventaire pour multijoueur # 2 | Connectez Blueprint √† C ++</a></li>
<li><a href="../fr418953/index.html">Antiquit√©s: antivirus vintage et arch√©ologie num√©rique appliqu√©e</a></li>
<li><a href="../fr418955/index.html">Dodo: une entreprise informatique qui fabrique des pizzas. Programmation et processus informatiques / AichiHype</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>