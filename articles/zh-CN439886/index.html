<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌏 🈵 👩🏿‍🤝‍👨🏾 我如何在2018年俄罗斯AI Cup CodeBall上教神经网络实现位置评估功能 😛 🧔🏿 👨🏼‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="有机会在某个时间点定性评估游戏中的情况，并且有能力在为其中一种解决方案创建机器人时模拟游戏世界，而它仍然只是努力采取行动以在不久的将来改善这种评估。 

 位置估算功能-返回材料值，数值越小表示效果越差。 在输入此函数时，我仅提交了球的位置和速度矢量。 最初，此函数是用相当简单的公式和几个ifs实现...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我如何在2018年俄罗斯AI Cup CodeBall上教神经网络实现位置评估功能</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439886/"> 有机会在某个时间点定性评估游戏中的情况，并且有能力在为其中一种解决方案创建机器人时模拟游戏世界，而它仍然只是努力采取行动以在不久的将来改善这种评估。 <br><br> 位置估算功能-返回材料值，数值越小表示效果越差。 在输入此函数时，我仅提交了球的位置和速度矢量。 最初，此函数是用相当简单的公式和几个ifs实现的。 但是，这为欺骗本地运行日志集提供了良好的基础，以用于神经网络的后续训练。 因此，我在本地滚动了300款游戏（每个游戏有18,000个滴答），总共产生了约12GB的日志，另外从服务器上下载了145个顶级游戏日志（5.7GB）。 <br><br> 接下来，有必要从这些日志中分离出训练和测试样本。 我这样做是这样的：从进球开始，我对“过去”进行了300刻（5秒）的观察，并以5刻为增量对球的每个位置和速度+以参考得分为例。 <br><br> 要点：这里的参考分数（输出）是通过公式计算的 <p><math> </math> $$显示$$ O = S / exp（T / 60）$$显示$$ </p> 如果球飞入“我的”球门，则S = -1，否则为1； T是球门前剩余的滴答时间。 <br><a name="habracut"></a><br> 另一个不太重要但也很重要的一点：游戏场是对称的，因此，从对手的角度来看，参考分数也应成反对称。 即 如果从“我”的角度来看某事被评估为X，那么从对手的角度来看同一位置应被评估为-X。 这意味着，如果您通过任何参数将神经网络的整个输入空间``对折''，相对而言，该网络将学习得更好，相对而言是``2倍''，最重要的是，它将提供一个有保证的对称答案（至少是漂亮的）。 我将球的速度沿Z轴“折叠”。简单地说，如果球从“我的”球门飞过，那么我就是从我自己的角度看的，否则就是从对手的角度看。 事实证明，对于神经网络，球始终沿Z轴正向飞行。对于纵向对称（沿X轴）也可以这样做，尽管在这种情况下，我们继续从同一个团队的角度看，但实际上是在位于具有法线（1、0、0）的平面。 <br><br> 因此，以下是用于从Python日志中准备测试和培训样本的代码： <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pprint <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pprint <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> glob <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random xtrain = [] ytrain = [] xtest = [] ytest = [] f1 = <span class="hljs-string"><span class="hljs-string">r"F:\Home\Projects\MailRuAI\Codeball2018\LocalRunner\logs_archive\logs_01/*.txt"</span></span> f2 = <span class="hljs-string"><span class="hljs-string">r"F:\Home\Projects\MailRuAI\Codeball2018\LocalRunner\logs_archive\logs_02/*.txt"</span></span> f3 = <span class="hljs-string"><span class="hljs-string">r"F:\Home\Projects\MailRuAI\Codeball2018\LocalRunner\logs_archive\logs_03/*.txt"</span></span> f7 = <span class="hljs-string"><span class="hljs-string">r"F:\Home\Projects\MailRuAI\Codeball2018\downloaded_games/*.txt"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (glob.glob(f1) + glob.glob(f2) + glob.glob(f3) + glob.glob(f7)): <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(file) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: content = f.readlines() print(len(content)) print(file) sumofscores = <span class="hljs-number"><span class="hljs-number">0</span></span> lastscore0 = <span class="hljs-number"><span class="hljs-number">0</span></span> lastscore1 = <span class="hljs-number"><span class="hljs-number">0</span></span> ticksbackward = <span class="hljs-number"><span class="hljs-number">300</span></span> ticksbackwardinc = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">0</span></span>, len(content)): data = json.loads(content[x]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"scores"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> sum(data[<span class="hljs-string"><span class="hljs-string">"scores"</span></span>]) &gt; sumofscores: sumofscores = sum(data[<span class="hljs-string"><span class="hljs-string">"scores"</span></span>]) value = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data[<span class="hljs-string"><span class="hljs-string">"scores"</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] &gt; lastscore0: lastscore0 = data[<span class="hljs-string"><span class="hljs-string">"scores"</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] value = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data[<span class="hljs-string"><span class="hljs-string">"scores"</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] &gt; lastscore1: lastscore1 = data[<span class="hljs-string"><span class="hljs-string">"scores"</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] value = <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> y <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(ticksbackwardinc, ticksbackward, ticksbackwardinc): dataY = json.loads(content[x - y]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"scores"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dataY <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> sum(dataY[<span class="hljs-string"><span class="hljs-string">"scores"</span></span>]) == sumofscores - <span class="hljs-number"><span class="hljs-number">1</span></span>: sign = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'velocity'</span></span>][<span class="hljs-string"><span class="hljs-string">'z'</span></span>] &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>: sign = <span class="hljs-number"><span class="hljs-number">-1</span></span> signX = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'velocity'</span></span>][<span class="hljs-string"><span class="hljs-string">'x'</span></span>] * sign &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>: signX = <span class="hljs-number"><span class="hljs-number">-1</span></span> inputs = np.zeros(<span class="hljs-number"><span class="hljs-number">6</span></span>) inputs[<span class="hljs-number"><span class="hljs-number">0</span></span>] = dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'velocity'</span></span>][<span class="hljs-string"><span class="hljs-string">'x'</span></span>] * sign * signX inputs[<span class="hljs-number"><span class="hljs-number">1</span></span>] = dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'velocity'</span></span>][<span class="hljs-string"><span class="hljs-string">'y'</span></span>] inputs[<span class="hljs-number"><span class="hljs-number">2</span></span>] = dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'velocity'</span></span>][<span class="hljs-string"><span class="hljs-string">'z'</span></span>] * sign inputs[<span class="hljs-number"><span class="hljs-number">3</span></span>] = dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'position'</span></span>][<span class="hljs-string"><span class="hljs-string">'x'</span></span>] * sign * signX inputs[<span class="hljs-number"><span class="hljs-number">4</span></span>] = dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'position'</span></span>][<span class="hljs-string"><span class="hljs-string">'y'</span></span>] inputs[<span class="hljs-number"><span class="hljs-number">5</span></span>] = dataY[<span class="hljs-string"><span class="hljs-string">'ball'</span></span>][<span class="hljs-string"><span class="hljs-string">'position'</span></span>][<span class="hljs-string"><span class="hljs-string">'z'</span></span>] * sign outputs = np.zeros(<span class="hljs-number"><span class="hljs-number">2</span></span>) outputs[<span class="hljs-number"><span class="hljs-number">0</span></span>] = value*sign outputs[<span class="hljs-number"><span class="hljs-number">1</span></span>] = y <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (random.random() &gt; <span class="hljs-number"><span class="hljs-number">0.2</span></span>): xtrain.append(inputs) ytrain.append(outputs) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: xtest.append(inputs) ytest.append(outputs) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: print(<span class="hljs-string"><span class="hljs-string">"exceeded"</span></span>) print(len(xtrain)) print(len(xtest)) np.save(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/xtrain_BR.npy"</span></span>, np.asarray(xtrain)) np.save(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/ytrain_BR.npy"</span></span>, np.asarray(ytrain)) np.save(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/xtest_BR.npy"</span></span>, np.asarray(xtest)) np.save(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/ytest_BR.npy"</span></span>, np.asarray(ytest))</code> </pre> <br> 最细心的人可能已经注意到，输出包含两个输出，而根本不像我上面描述的那样，但是请不要担心，这是一个雏形，在培训之前进行转换： <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.datasets <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> boston_housing <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Model, Sequential <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.layers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Input, Dense, Concatenate, Add <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datetime np.set_printoptions(edgeitems=<span class="hljs-number"><span class="hljs-number">50</span></span>) xtrain = np.load(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/xtrain_BR.npy"</span></span>) ytrain = np.load(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/ytrain_BR.npy"</span></span>) xtest = np.load(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/xtest_BR.npy"</span></span>) ytest = np.load(<span class="hljs-string"><span class="hljs-string">"F:/Home/Projects/MailRuAI/Codeball2018/nnet/ytest_BR.npy"</span></span>) ytrain = np.exp(-(ytrain[:,<span class="hljs-number"><span class="hljs-number">1</span></span>])/<span class="hljs-number"><span class="hljs-number">60</span></span>) * ytrain[:,<span class="hljs-number"><span class="hljs-number">0</span></span>] ytest = np.exp(-(ytest[:,<span class="hljs-number"><span class="hljs-number">1</span></span>])/<span class="hljs-number"><span class="hljs-number">60</span></span>) * ytest[:,<span class="hljs-number"><span class="hljs-number">0</span></span>] inp = Input(shape=(xtrain.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>],)) d1 = Dense(<span class="hljs-number"><span class="hljs-number">6</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'relu'</span></span>)(inp) d2 = Dense(<span class="hljs-number"><span class="hljs-number">6</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'linear'</span></span>)(inp) d3 = Dense(<span class="hljs-number"><span class="hljs-number">6</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'sigmoid'</span></span>)(inp) added = Concatenate()([d1, d2, d3]) d21 = Dense(<span class="hljs-number"><span class="hljs-number">3</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'relu'</span></span>)(added) d22 = Dense(<span class="hljs-number"><span class="hljs-number">3</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'linear'</span></span>)(added) d23 = Dense(<span class="hljs-number"><span class="hljs-number">3</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'sigmoid'</span></span>)(added) added2 = Concatenate()([d21, d22, d23]) d31 = Dense(<span class="hljs-number"><span class="hljs-number">3</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'relu'</span></span>)(added2) d32 = Dense(<span class="hljs-number"><span class="hljs-number">3</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'linear'</span></span>)(added2) d33 = Dense(<span class="hljs-number"><span class="hljs-number">3</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'sigmoid'</span></span>)(added2) added3 = Concatenate()([d31, d32, d33]) out = Dense(<span class="hljs-number"><span class="hljs-number">1</span></span>)(added3) model = Model(inputs=inp, outputs=out) model.compile(optimizer=<span class="hljs-string"><span class="hljs-string">'adam'</span></span>, loss=<span class="hljs-string"><span class="hljs-string">'mse'</span></span>, metrics=[<span class="hljs-string"><span class="hljs-string">'mae'</span></span>]) <span class="hljs-comment"><span class="hljs-comment">#model.load_weights("F:/Home/Projects/MailRuAI/Codeball2018/nnet/WEXP_B36F.dat") for x in range(0, 10): lostTR, maeTR = model.evaluate(xtrain, ytrain, verbose=0) print("Train mae: " + repr(lostTR) + ", " + repr(maeTR)) lostTS, maeTS = model.evaluate(xtest, ytest, verbose=0) print("Test mae: " + repr(lostTS) + ", " + repr(maeTS)) while True: model.fit(xtrain, ytrain, epochs=1, batch_size=1, verbose=2) print("Aim: " + repr(lostTS)) lostTR2, maeTR2 = model.evaluate(xtrain, ytrain, verbose=0) print("Train mae: " + repr(lostTR2) + ", " + repr(maeTR2)) lostTS2, maeTS2 = model.evaluate(xtest, ytest, verbose=0) print("Test mae: " + repr(lostTS2) + ", " + repr(maeTS2)) print("Improve number: " + repr(x)) print(datetime.datetime.now()) if lostTS &gt; lostTS2: print ("imporoved") model.save_weights("F:/Home/Projects/MailRuAI/Codeball2018/nnet/WEXP_B36F.dat") break</span></span></code> </pre><br> 为什么不问恰好3个内层和只是这样的配置呢？我不认识我自己。 然而，直觉和实验的日子正是导致了这一点。 <br><br> 最后，最后一个问题是，如何在没有任何现成的类的情况下使用已经在Python中用C＃训练的神经网络？ 创建课程！ 有了神经网络的这种简单配置，并考虑到我们只需要实现“预测”功能（即，只需从输入扫描到输出），它就非常简单。 这是： <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Activation { relu, linear, sigmoid }; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">layer</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;&gt; weights = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; Ps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;Activation&gt; funcs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Activation&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; Values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Activation aact</span></span></span><span class="hljs-function">)</span></span> { Count++; weights.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;()); Ps.Add(<span class="hljs-number"><span class="hljs-number">0</span></span>); funcs.Add(aact); Values.Add(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Activation aact, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> acnt</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; acnt; i++) Add(aact); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Calculate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; ainps</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Count; i++) { Values[i] = Ps[i]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; ainps.Count; j++) Values[i] += weights[i][j] * ainps[j]; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (funcs[i]) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Activation.linear: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Activation.relu: Values[i] = System.Math.Max(<span class="hljs-number"><span class="hljs-number">0</span></span>, Values[i]); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Activation.sigmoid: Values[i] = (<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>)(<span class="hljs-number"><span class="hljs-number">1.0</span></span> / (<span class="hljs-number"><span class="hljs-number">1.0</span></span> + System.Math.Exp(-Values[i]))); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">nnet</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> inputCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;layer&gt; layers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;layer&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> layer outputLayer = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nnet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ainputcount, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> aoutputcount</span></span></span><span class="hljs-function">)</span></span> { inputCount = ainputcount; outputLayer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> layer(); outputLayer.Add(Activation.linear, aoutputcount); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">predict</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; ainput</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; layers.Count + <span class="hljs-number"><span class="hljs-number">1</span></span>; i++) { List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; inps = ainput; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) inps = layers[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Values; layer lr = outputLayer; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; layers.Count) lr = layers[i]; lr.Calculate(inps); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> outputLayer.Values; } }</code> </pre> <br> 仍然只是从训练有素的网络上加紧权重（顺便说一句，我在这里引用的权重在我的最新版本中确实有效）： <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">trained_nnet</span></span> : <span class="hljs-title"><span class="hljs-title">nnet</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillLayer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">layer al, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] atp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[,] atw</span></span></span><span class="hljs-function">)</span></span> { al.Ps.Clear(); al.Ps.AddRange(atp); al.weights.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; atw.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>); i++) { al.weights.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;()); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; atw.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>); j++) { al.weights[i].Add(atw[i, j]); } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trained_nnet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">)</span></span> { layer lr1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> layer(); lr1.Add(Activation.relu, <span class="hljs-number"><span class="hljs-number">6</span></span>); lr1.Add(Activation.linear, <span class="hljs-number"><span class="hljs-number">6</span></span>); lr1.Add(Activation.sigmoid, <span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.layers.Add(lr1); layer lr2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> layer(); lr2.Add(Activation.relu, <span class="hljs-number"><span class="hljs-number">3</span></span>); lr2.Add(Activation.linear, <span class="hljs-number"><span class="hljs-number">3</span></span>); lr2.Add(Activation.sigmoid, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.layers.Add(lr2); layer lr3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> layer(); lr3.Add(Activation.relu, <span class="hljs-number"><span class="hljs-number">3</span></span>); lr3.Add(Activation.linear, <span class="hljs-number"><span class="hljs-number">3</span></span>); lr3.Add(Activation.sigmoid, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.layers.Add(lr3); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] t = { <span class="hljs-number"><span class="hljs-number">3.6843767166137695</span></span>, <span class="hljs-number"><span class="hljs-number">-9.454026222229004</span></span>, <span class="hljs-number"><span class="hljs-number">-5.089229106903076</span></span>, <span class="hljs-number"><span class="hljs-number">-2.850287437438965</span></span>, <span class="hljs-number"><span class="hljs-number">-6.96286153793335</span></span>, <span class="hljs-number"><span class="hljs-number">-9.751116752624512</span></span>, <span class="hljs-number"><span class="hljs-number">10.384811401367188</span></span>, <span class="hljs-number"><span class="hljs-number">-4.214056968688965</span></span>, <span class="hljs-number"><span class="hljs-number">1.2072025537490845</span></span>, <span class="hljs-number"><span class="hljs-number">1.4019242525100708</span></span>, <span class="hljs-number"><span class="hljs-number">-0.13174889981746674</span></span>, <span class="hljs-number"><span class="hljs-number">-13.1264066696167</span></span>, <span class="hljs-number"><span class="hljs-number">-4.265004634857178</span></span>, <span class="hljs-number"><span class="hljs-number">1.8926845788955688</span></span>, <span class="hljs-number"><span class="hljs-number">-0.0813497006893158</span></span>, <span class="hljs-number"><span class="hljs-number">-1.4616785049438477</span></span>, <span class="hljs-number"><span class="hljs-number">-5.361510753631592</span></span>, <span class="hljs-number"><span class="hljs-number">-1.1896661520004272</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[,] t2 = { { <span class="hljs-number"><span class="hljs-number">0.1477939784526825</span></span>, <span class="hljs-number"><span class="hljs-number">0.03613739833235741</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09796690940856934</span></span>, <span class="hljs-number"><span class="hljs-number">1.942456841468811</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3508949875831604</span></span>, <span class="hljs-number"><span class="hljs-number">-0.5551134347915649</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.25495094060897827</span></span>, <span class="hljs-number"><span class="hljs-number">0.049018844962120056</span></span>, <span class="hljs-number"><span class="hljs-number">-0.15976546704769135</span></span>, <span class="hljs-number"><span class="hljs-number">-1.881699562072754</span></span>, <span class="hljs-number"><span class="hljs-number">-1.3928385972976685</span></span>, <span class="hljs-number"><span class="hljs-number">0.017490295693278313</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.314727246761322</span></span>, <span class="hljs-number"><span class="hljs-number">-0.7985705733299255</span></span>, <span class="hljs-number"><span class="hljs-number">-0.16902890801429749</span></span>, <span class="hljs-number"><span class="hljs-number">0.7290273308753967</span></span>, <span class="hljs-number"><span class="hljs-number">-3.3613057136535645</span></span>, <span class="hljs-number"><span class="hljs-number">-0.501738965511322</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.14706645905971527</span></span>, <span class="hljs-number"><span class="hljs-number">0.013889106921851635</span></span>, <span class="hljs-number"><span class="hljs-number">-8.41325855255127</span></span>, <span class="hljs-number"><span class="hljs-number">0.08269797265529633</span></span>, <span class="hljs-number"><span class="hljs-number">-0.8194255232810974</span></span>, <span class="hljs-number"><span class="hljs-number">0.054869525134563446</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.11769858002662659</span></span>, <span class="hljs-number"><span class="hljs-number">0.024719441309571266</span></span>, <span class="hljs-number"><span class="hljs-number">-32.9736213684082</span></span>, <span class="hljs-number"><span class="hljs-number">-0.06565750390291214</span></span>, <span class="hljs-number"><span class="hljs-number">-0.38925793766975403</span></span>, <span class="hljs-number"><span class="hljs-number">-0.30816638469696045</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.09536012262105942</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4411015212535858</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3092011511325836</span></span>, <span class="hljs-number"><span class="hljs-number">0.061532989144325256</span></span>, <span class="hljs-number"><span class="hljs-number">-1.3718899488449097</span></span>, <span class="hljs-number"><span class="hljs-number">-0.9904148578643799</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.03862301632761955</span></span>, <span class="hljs-number"><span class="hljs-number">-0.2239271104335785</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3054073452949524</span></span>, <span class="hljs-number"><span class="hljs-number">0.013336590491235256</span></span>, <span class="hljs-number"><span class="hljs-number">-0.0404842384159565</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09027290344238281</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.317527711391449</span></span>, <span class="hljs-number"><span class="hljs-number">-0.14433158934116364</span></span>, <span class="hljs-number"><span class="hljs-number">0.06079907342791557</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4572157561779022</span></span>, <span class="hljs-number"><span class="hljs-number">0.2782846987247467</span></span>, <span class="hljs-number"><span class="hljs-number">0.17747753858566284</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.01980031281709671</span></span>, <span class="hljs-number"><span class="hljs-number">0.015361669473350048</span></span>, <span class="hljs-number"><span class="hljs-number">-0.03606397658586502</span></span>, <span class="hljs-number"><span class="hljs-number">0.013219496235251427</span></span>, <span class="hljs-number"><span class="hljs-number">-0.03483833745121956</span></span>, <span class="hljs-number"><span class="hljs-number">-0.01729537360370159</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.003958317916840315</span></span>, <span class="hljs-number"><span class="hljs-number">0.09587077051401138</span></span>, <span class="hljs-number"><span class="hljs-number">-0.08213665336370468</span></span>, <span class="hljs-number"><span class="hljs-number">-0.027169639244675636</span></span>, <span class="hljs-number"><span class="hljs-number">0.032037656754255295</span></span>, <span class="hljs-number"><span class="hljs-number">-0.030492693185806274</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.04885690286755562</span></span>, <span class="hljs-number"><span class="hljs-number">-0.06349656730890274</span></span>, <span class="hljs-number"><span class="hljs-number">0.013905149884521961</span></span>, <span class="hljs-number"><span class="hljs-number">0.018028201535344124</span></span>, <span class="hljs-number"><span class="hljs-number">0.012719585560262203</span></span>, <span class="hljs-number"><span class="hljs-number">0.002531017642468214</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.016520477831363678</span></span>, <span class="hljs-number"><span class="hljs-number">-0.00018591046682558954</span></span>, <span class="hljs-number"><span class="hljs-number">-0.003657651599496603</span></span>, <span class="hljs-number"><span class="hljs-number">0.06888063997030258</span></span>, <span class="hljs-number"><span class="hljs-number">-0.2127065807580948</span></span>, <span class="hljs-number"><span class="hljs-number">0.6427022218704224</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.5308891534805298</span></span>, <span class="hljs-number"><span class="hljs-number">0.13539844751358032</span></span>, <span class="hljs-number"><span class="hljs-number">0.03864796832203865</span></span>, <span class="hljs-number"><span class="hljs-number">1.5582681894302368</span></span>, <span class="hljs-number"><span class="hljs-number">-1.929693341255188</span></span>, <span class="hljs-number"><span class="hljs-number">-3.2511842250823975</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.032178860157728195</span></span>, <span class="hljs-number"><span class="hljs-number">1.1472656726837158</span></span>, <span class="hljs-number"><span class="hljs-number">-2.020042896270752</span></span>, <span class="hljs-number"><span class="hljs-number">-0.05141841620206833</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4635908901691437</span></span>, <span class="hljs-number"><span class="hljs-number">0.2636871039867401</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.01480827759951353</span></span>, <span class="hljs-number"><span class="hljs-number">0.33971744775772095</span></span>, <span class="hljs-number"><span class="hljs-number">-0.15343432128429413</span></span>, <span class="hljs-number"><span class="hljs-number">0.03558071702718735</span></span>, <span class="hljs-number"><span class="hljs-number">3.364596366882324</span></span>, <span class="hljs-number"><span class="hljs-number">-0.7852638959884644</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.0028303645085543394</span></span>, <span class="hljs-number"><span class="hljs-number">1.2297841310501099</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4412313997745514</span></span>, <span class="hljs-number"><span class="hljs-number">0.3644706606864929</span></span>, <span class="hljs-number"><span class="hljs-number">2.2155861854553223</span></span>, <span class="hljs-number"><span class="hljs-number">-0.43303439021110535</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.3666411340236664</span></span>, <span class="hljs-number"><span class="hljs-number">0.0464097335934639</span></span>, <span class="hljs-number"><span class="hljs-number">5.143652439117432</span></span>, <span class="hljs-number"><span class="hljs-number">-2.2230076789855957</span></span>, <span class="hljs-number"><span class="hljs-number">0.3511424660682678</span></span>, <span class="hljs-number"><span class="hljs-number">1.0514445304870605</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.014482858590781689</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4740144610404968</span></span>, <span class="hljs-number"><span class="hljs-number">-1.6240901947021484</span></span>, <span class="hljs-number"><span class="hljs-number">1.7327706813812256</span></span>, <span class="hljs-number"><span class="hljs-number">-1.5116417407989502</span></span>, <span class="hljs-number"><span class="hljs-number">-1.6811648607254028</span></span> } }; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] t3 = { <span class="hljs-number"><span class="hljs-number">-3.09689998626709</span></span>, <span class="hljs-number"><span class="hljs-number">-1.2031112909317017</span></span>, <span class="hljs-number"><span class="hljs-number">-7.121585369110107</span></span>, <span class="hljs-number"><span class="hljs-number">2.0653932094573975</span></span>, <span class="hljs-number"><span class="hljs-number">-2.8601508140563965</span></span>, <span class="hljs-number"><span class="hljs-number">-1.6219528913497925</span></span>, <span class="hljs-number"><span class="hljs-number">0.16301754117012024</span></span>, <span class="hljs-number"><span class="hljs-number">-6.890131950378418</span></span>, <span class="hljs-number"><span class="hljs-number">3.8225107192993164</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[,] t4 = { { <span class="hljs-number"><span class="hljs-number">-0.6246452927589417</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3575346767902374</span></span>, <span class="hljs-number"><span class="hljs-number">0.6897052526473999</span></span>, <span class="hljs-number"><span class="hljs-number">-2.2513232231140137</span></span>, <span class="hljs-number"><span class="hljs-number">-0.23217444121837616</span></span>, <span class="hljs-number"><span class="hljs-number">0.17847181856632233</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3863859176635742</span></span>, <span class="hljs-number"><span class="hljs-number">-0.01201619766652584</span></span>, <span class="hljs-number"><span class="hljs-number">0.050539981573820114</span></span>, <span class="hljs-number"><span class="hljs-number">0.028343766927719116</span></span>, <span class="hljs-number"><span class="hljs-number">0.0034856200218200684</span></span>, <span class="hljs-number"><span class="hljs-number">0.5547005534172058</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4277774691581726</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0249099731445312</span></span>, <span class="hljs-number"><span class="hljs-number">-8.995088577270508</span></span>, <span class="hljs-number"><span class="hljs-number">-3.4937169551849365</span></span>, <span class="hljs-number"><span class="hljs-number">0.7673622369766235</span></span>, <span class="hljs-number"><span class="hljs-number">-1.6504380702972412</span></span> }, { <span class="hljs-number"><span class="hljs-number">-1.0006977319717407</span></span>, <span class="hljs-number"><span class="hljs-number">-0.8660659790039062</span></span>, <span class="hljs-number"><span class="hljs-number">-0.0415676049888134</span></span>, <span class="hljs-number"><span class="hljs-number">-0.5476861000061035</span></span>, <span class="hljs-number"><span class="hljs-number">-0.7828258872032166</span></span>, <span class="hljs-number"><span class="hljs-number">-0.05350146442651749</span></span>, <span class="hljs-number"><span class="hljs-number">0.005586389917880297</span></span>, <span class="hljs-number"><span class="hljs-number">-0.052493464201688766</span></span>, <span class="hljs-number"><span class="hljs-number">0.07955628633499146</span></span>, <span class="hljs-number"><span class="hljs-number">-0.08084911853075027</span></span>, <span class="hljs-number"><span class="hljs-number">0.09794406592845917</span></span>, <span class="hljs-number"><span class="hljs-number">-0.031214063987135887</span></span>, <span class="hljs-number"><span class="hljs-number">-0.7785998582839966</span></span>, <span class="hljs-number"><span class="hljs-number">-0.27977627515792847</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4096711277961731</span></span>, <span class="hljs-number"><span class="hljs-number">-0.24633635580539703</span></span>, <span class="hljs-number"><span class="hljs-number">-1.5932326316833496</span></span>, <span class="hljs-number"><span class="hljs-number">-0.5430923104286194</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.2330777496099472</span></span>, <span class="hljs-number"><span class="hljs-number">-0.07477551698684692</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0634428262710571</span></span>, <span class="hljs-number"><span class="hljs-number">-1.772096872329712</span></span>, <span class="hljs-number"><span class="hljs-number">-1.4657013416290283</span></span>, <span class="hljs-number"><span class="hljs-number">0.6256936192512512</span></span>, <span class="hljs-number"><span class="hljs-number">-0.1179097518324852</span></span>, <span class="hljs-number"><span class="hljs-number">0.07645376771688461</span></span>, <span class="hljs-number"><span class="hljs-number">0.008837736211717129</span></span>, <span class="hljs-number"><span class="hljs-number">0.030952733010053635</span></span>, <span class="hljs-number"><span class="hljs-number">-0.013960030861198902</span></span>, <span class="hljs-number"><span class="hljs-number">1.0339184999465942</span></span>, <span class="hljs-number"><span class="hljs-number">0.20350944995880127</span></span>, <span class="hljs-number"><span class="hljs-number">-0.047291483730077744</span></span>, <span class="hljs-number"><span class="hljs-number">-4.043337345123291</span></span>, <span class="hljs-number"><span class="hljs-number">-0.7629795670509338</span></span>, <span class="hljs-number"><span class="hljs-number">-5.41167688369751</span></span>, <span class="hljs-number"><span class="hljs-number">-3.7755305767059326</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.00979659240692854</span></span>, <span class="hljs-number"><span class="hljs-number">0.11435728520154953</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4749748706817627</span></span>, <span class="hljs-number"><span class="hljs-number">1.5166815519332886</span></span>, <span class="hljs-number"><span class="hljs-number">-5.3047380447387695</span></span>, <span class="hljs-number"><span class="hljs-number">0.9597445130348206</span></span>, <span class="hljs-number"><span class="hljs-number">0.08123911172151566</span></span>, <span class="hljs-number"><span class="hljs-number">0.039479970932006836</span></span>, <span class="hljs-number"><span class="hljs-number">-0.01649349369108677</span></span>, <span class="hljs-number"><span class="hljs-number">-0.04941410943865776</span></span>, <span class="hljs-number"><span class="hljs-number">0.020120851695537567</span></span>, <span class="hljs-number"><span class="hljs-number">-0.16329358518123627</span></span>, <span class="hljs-number"><span class="hljs-number">0.36106961965560913</span></span>, <span class="hljs-number"><span class="hljs-number">0.5348165035247803</span></span>, <span class="hljs-number"><span class="hljs-number">0.11825983971357346</span></span>, <span class="hljs-number"><span class="hljs-number">0.2075480818748474</span></span>, <span class="hljs-number"><span class="hljs-number">-1.8661850690841675</span></span>, <span class="hljs-number"><span class="hljs-number">1.4093444347381592</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.35534173250198364</span></span>, <span class="hljs-number"><span class="hljs-number">0.3471201956272125</span></span>, <span class="hljs-number"><span class="hljs-number">-0.2657061517238617</span></span>, <span class="hljs-number"><span class="hljs-number">-2.4178225994110107</span></span>, <span class="hljs-number"><span class="hljs-number">-3.890836238861084</span></span>, <span class="hljs-number"><span class="hljs-number">0.5999298691749573</span></span>, <span class="hljs-number"><span class="hljs-number">-0.10068143904209137</span></span>, <span class="hljs-number"><span class="hljs-number">0.530009388923645</span></span>, <span class="hljs-number"><span class="hljs-number">0.023632165044546127</span></span>, <span class="hljs-number"><span class="hljs-number">-0.006245455238968134</span></span>, <span class="hljs-number"><span class="hljs-number">0.031124670058488846</span></span>, <span class="hljs-number"><span class="hljs-number">0.016797777265310287</span></span>, <span class="hljs-number"><span class="hljs-number">1.720144510269165</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3200121223926544</span></span>, <span class="hljs-number"><span class="hljs-number">0.17827671766281128</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0847045183181763</span></span>, <span class="hljs-number"><span class="hljs-number">0.7679504156112671</span></span>, <span class="hljs-number"><span class="hljs-number">1.1521148681640625</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.047243088483810425</span></span>, <span class="hljs-number"><span class="hljs-number">-0.07313758134841919</span></span>, <span class="hljs-number"><span class="hljs-number">-0.13496115803718567</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0498348474502563</span></span>, <span class="hljs-number"><span class="hljs-number">-2.083388328552246</span></span>, <span class="hljs-number"><span class="hljs-number">0.3018227815628052</span></span>, <span class="hljs-number"><span class="hljs-number">0.019016921520233154</span></span>, <span class="hljs-number"><span class="hljs-number">0.00780009850859642</span></span>, <span class="hljs-number"><span class="hljs-number">-0.02416112646460533</span></span>, <span class="hljs-number"><span class="hljs-number">-0.012299800291657448</span></span>, <span class="hljs-number"><span class="hljs-number">0.019720694050192833</span></span>, <span class="hljs-number"><span class="hljs-number">0.019809948280453682</span></span>, <span class="hljs-number"><span class="hljs-number">-1.637327790260315</span></span>, <span class="hljs-number"><span class="hljs-number">0.09307140856981277</span></span>, <span class="hljs-number"><span class="hljs-number">2.963168144226074</span></span>, <span class="hljs-number"><span class="hljs-number">0.515803337097168</span></span>, <span class="hljs-number"><span class="hljs-number">0.02399904653429985</span></span>, <span class="hljs-number"><span class="hljs-number">-3.9851980209350586</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.6250298023223877</span></span>, <span class="hljs-number"><span class="hljs-number">-0.4796958863735199</span></span>, <span class="hljs-number"><span class="hljs-number">0.4311320185661316</span></span>, <span class="hljs-number"><span class="hljs-number">-1.4590528011322021</span></span>, <span class="hljs-number"><span class="hljs-number">-4.861763000488281</span></span>, <span class="hljs-number"><span class="hljs-number">-1.1894060373306274</span></span>, <span class="hljs-number"><span class="hljs-number">0.31154727935791016</span></span>, <span class="hljs-number"><span class="hljs-number">-0.028901753947138786</span></span>, <span class="hljs-number"><span class="hljs-number">0.07241783291101456</span></span>, <span class="hljs-number"><span class="hljs-number">0.0573900043964386</span></span>, <span class="hljs-number"><span class="hljs-number">-0.16387903690338135</span></span>, <span class="hljs-number"><span class="hljs-number">-0.7621306777000427</span></span>, <span class="hljs-number"><span class="hljs-number">2.864539623260498</span></span>, <span class="hljs-number"><span class="hljs-number">1.126343011856079</span></span>, <span class="hljs-number"><span class="hljs-number">-0.729159414768219</span></span>, <span class="hljs-number"><span class="hljs-number">15.2516450881958</span></span>, <span class="hljs-number"><span class="hljs-number">-0.5845442414283752</span></span>, <span class="hljs-number"><span class="hljs-number">-0.2593745291233063</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.4520488679409027</span></span>, <span class="hljs-number"><span class="hljs-number">-0.37348034977912903</span></span>, <span class="hljs-number"><span class="hljs-number">-0.22873088717460632</span></span>, <span class="hljs-number"><span class="hljs-number">2.816544532775879</span></span>, <span class="hljs-number"><span class="hljs-number">0.635391891002655</span></span>, <span class="hljs-number"><span class="hljs-number">1.7192658185958862</span></span>, <span class="hljs-number"><span class="hljs-number">-0.042334891855716705</span></span>, <span class="hljs-number"><span class="hljs-number">-0.012391769327223301</span></span>, <span class="hljs-number"><span class="hljs-number">-0.00944773480296135</span></span>, <span class="hljs-number"><span class="hljs-number">-0.047271229326725006</span></span>, <span class="hljs-number"><span class="hljs-number">0.045244403183460236</span></span>, <span class="hljs-number"><span class="hljs-number">1.1044175624847412</span></span>, <span class="hljs-number"><span class="hljs-number">-2.682516098022461</span></span>, <span class="hljs-number"><span class="hljs-number">-1.797003984451294</span></span>, <span class="hljs-number"><span class="hljs-number">-5.227936744689941</span></span>, <span class="hljs-number"><span class="hljs-number">0.3994572162628174</span></span>, <span class="hljs-number"><span class="hljs-number">-3.361297130584717</span></span>, <span class="hljs-number"><span class="hljs-number">-0.16535422205924988</span></span> }, { <span class="hljs-number"><span class="hljs-number">1.3437395095825195</span></span>, <span class="hljs-number"><span class="hljs-number">0.05596136301755905</span></span>, <span class="hljs-number"><span class="hljs-number">-0.6534030437469482</span></span>, <span class="hljs-number"><span class="hljs-number">-3.2173333168029785</span></span>, <span class="hljs-number"><span class="hljs-number">-3.256056785583496</span></span>, <span class="hljs-number"><span class="hljs-number">3.164973020553589</span></span>, <span class="hljs-number"><span class="hljs-number">-0.6149216294288635</span></span>, <span class="hljs-number"><span class="hljs-number">0.3425371050834656</span></span>, <span class="hljs-number"><span class="hljs-number">-0.13111716508865356</span></span>, <span class="hljs-number"><span class="hljs-number">-0.42127469182014465</span></span>, <span class="hljs-number"><span class="hljs-number">-0.0668950155377388</span></span>, <span class="hljs-number"><span class="hljs-number">0.19484268128871918</span></span>, <span class="hljs-number"><span class="hljs-number">2.005012273788452</span></span>, <span class="hljs-number"><span class="hljs-number">-3.41219425201416</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3146309554576874</span></span>, <span class="hljs-number"><span class="hljs-number">-2.1181774139404297</span></span>, <span class="hljs-number"><span class="hljs-number">2.2965285778045654</span></span>, <span class="hljs-number"><span class="hljs-number">5.287317276000977</span></span> } }; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] t5 = { <span class="hljs-number"><span class="hljs-number">-1.173705816268921</span></span>, <span class="hljs-number"><span class="hljs-number">-1.8888208866119385</span></span>, <span class="hljs-number"><span class="hljs-number">-2.566594123840332</span></span>, <span class="hljs-number"><span class="hljs-number">0.1278465986251831</span></span>, <span class="hljs-number"><span class="hljs-number">0.05948356166481972</span></span>, <span class="hljs-number"><span class="hljs-number">-0.021375492215156555</span></span>, <span class="hljs-number"><span class="hljs-number">-1.554726243019104</span></span>, <span class="hljs-number"><span class="hljs-number">-2.2256762981414795</span></span>, <span class="hljs-number"><span class="hljs-number">1.3142614364624023</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[,] t6 = { { <span class="hljs-number"><span class="hljs-number">-0.023421021178364754</span></span>, <span class="hljs-number"><span class="hljs-number">0.17735084891319275</span></span>, <span class="hljs-number"><span class="hljs-number">-0.1922600418329239</span></span>, <span class="hljs-number"><span class="hljs-number">-0.11634820699691772</span></span>, <span class="hljs-number"><span class="hljs-number">0.05003879591822624</span></span>, <span class="hljs-number"><span class="hljs-number">0.07409390062093735</span></span>, <span class="hljs-number"><span class="hljs-number">-0.131203755736351</span></span>, <span class="hljs-number"><span class="hljs-number">-0.11743484437465668</span></span>, <span class="hljs-number"><span class="hljs-number">-1.1311017274856567</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.6256148219108582</span></span>, <span class="hljs-number"><span class="hljs-number">-0.08678799867630005</span></span>, <span class="hljs-number"><span class="hljs-number">0.08910120278596878</span></span>, <span class="hljs-number"><span class="hljs-number">-0.06354714930057526</span></span>, <span class="hljs-number"><span class="hljs-number">0.05225379019975662</span></span>, <span class="hljs-number"><span class="hljs-number">0.028936704620718956</span></span>, <span class="hljs-number"><span class="hljs-number">-2.069547176361084</span></span>, <span class="hljs-number"><span class="hljs-number">0.16652414202690125</span></span>, <span class="hljs-number"><span class="hljs-number">0.4840211570262909</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.9266191720962524</span></span>, <span class="hljs-number"><span class="hljs-number">0.1542767435312271</span></span>, <span class="hljs-number"><span class="hljs-number">-1.511458396911621</span></span>, <span class="hljs-number"><span class="hljs-number">-2.2593629360198975</span></span>, <span class="hljs-number"><span class="hljs-number">0.32768234610557556</span></span>, <span class="hljs-number"><span class="hljs-number">0.728438138961792</span></span>, <span class="hljs-number"><span class="hljs-number">1.4113644361495972</span></span>, <span class="hljs-number"><span class="hljs-number">-2.9423279762268066</span></span>, <span class="hljs-number"><span class="hljs-number">-1.1225157976150513</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.31864309310913086</span></span>, <span class="hljs-number"><span class="hljs-number">-0.06739992648363113</span></span>, <span class="hljs-number"><span class="hljs-number">1.8643943071365356</span></span>, <span class="hljs-number"><span class="hljs-number">0.12609687447547913</span></span>, <span class="hljs-number"><span class="hljs-number">0.003282073885202408</span></span>, <span class="hljs-number"><span class="hljs-number">-0.08565603941679001</span></span>, <span class="hljs-number"><span class="hljs-number">0.22951357066631317</span></span>, <span class="hljs-number"><span class="hljs-number">-3.9096572399139404</span></span>, <span class="hljs-number"><span class="hljs-number">-0.5148558020591736</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.0030701414216309786</span></span>, <span class="hljs-number"><span class="hljs-number">0.22653144598007202</span></span>, <span class="hljs-number"><span class="hljs-number">-0.1772366166114807</span></span>, <span class="hljs-number"><span class="hljs-number">0.01472154725342989</span></span>, <span class="hljs-number"><span class="hljs-number">0.006688127294182777</span></span>, <span class="hljs-number"><span class="hljs-number">0.029435427859425545</span></span>, <span class="hljs-number"><span class="hljs-number">-0.049562305212020874</span></span>, <span class="hljs-number"><span class="hljs-number">-0.01126908790320158</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09357477724552155</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.003160204039886594</span></span>, <span class="hljs-number"><span class="hljs-number">0.004133348818868399</span></span>, <span class="hljs-number"><span class="hljs-number">0.003914407920092344</span></span>, <span class="hljs-number"><span class="hljs-number">0.013578329235315323</span></span>, <span class="hljs-number"><span class="hljs-number">0.0036796496715396643</span></span>, <span class="hljs-number"><span class="hljs-number">0.028364477679133415</span></span>, <span class="hljs-number"><span class="hljs-number">0.025828130543231964</span></span>, <span class="hljs-number"><span class="hljs-number">-0.030584659427404404</span></span>, <span class="hljs-number"><span class="hljs-number">-0.0449080727994442</span></span> }, { <span class="hljs-number"><span class="hljs-number">-0.15649960935115814</span></span>, <span class="hljs-number"><span class="hljs-number">0.7045242786407471</span></span>, <span class="hljs-number"><span class="hljs-number">4.971825122833252</span></span>, <span class="hljs-number"><span class="hljs-number">0.26150253415107727</span></span>, <span class="hljs-number"><span class="hljs-number">0.25615766644477844</span></span>, <span class="hljs-number"><span class="hljs-number">-0.007457265630364418</span></span>, <span class="hljs-number"><span class="hljs-number">0.4002840220928192</span></span>, <span class="hljs-number"><span class="hljs-number">-4.386100769042969</span></span>, <span class="hljs-number"><span class="hljs-number">-0.14405106008052826</span></span> }, { <span class="hljs-number"><span class="hljs-number">-1.283564805984497</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0451316833496094</span></span>, <span class="hljs-number"><span class="hljs-number">-9.010445594787598</span></span>, <span class="hljs-number"><span class="hljs-number">-0.23629669845104218</span></span>, <span class="hljs-number"><span class="hljs-number">0.8792487978935242</span></span>, <span class="hljs-number"><span class="hljs-number">0.12951965630054474</span></span>, <span class="hljs-number"><span class="hljs-number">2.7414908409118652</span></span>, <span class="hljs-number"><span class="hljs-number">-10.04093074798584</span></span>, <span class="hljs-number"><span class="hljs-number">0.08805646747350693</span></span> }, { <span class="hljs-number"><span class="hljs-number">0.5142691731452942</span></span>, <span class="hljs-number"><span class="hljs-number">0.27933982014656067</span></span>, <span class="hljs-number"><span class="hljs-number">17.242839813232422</span></span>, <span class="hljs-number"><span class="hljs-number">-0.14753387868404388</span></span>, <span class="hljs-number"><span class="hljs-number">0.35601550340652466</span></span>, <span class="hljs-number"><span class="hljs-number">-0.03304799646139145</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3745580017566681</span></span>, <span class="hljs-number"><span class="hljs-number">3.6696081161499023</span></span>, <span class="hljs-number"><span class="hljs-number">0.18306805193424225</span></span> } }; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] t7 = { <span class="hljs-number"><span class="hljs-number">0.057645831257104874</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[,] t8 = { { <span class="hljs-number"><span class="hljs-number">0.02502649463713169</span></span>, <span class="hljs-number"><span class="hljs-number">0.030625218525528908</span></span>, <span class="hljs-number"><span class="hljs-number">-0.04921620339155197</span></span>, <span class="hljs-number"><span class="hljs-number">-0.06382419914007187</span></span>, <span class="hljs-number"><span class="hljs-number">-0.0018273837631568313</span></span>, <span class="hljs-number"><span class="hljs-number">-0.002946096006780863</span></span>, <span class="hljs-number"><span class="hljs-number">-0.3073849678039551</span></span>, <span class="hljs-number"><span class="hljs-number">-0.0770358145236969</span></span>, <span class="hljs-number"><span class="hljs-number">0.44145819544792175</span></span> } }; FillLayer(lr1, t, t2); FillLayer(lr2, t3, t4); FillLayer(lr3, t5, t6); FillLayer(outputLayer, t7, t8); } }</code> </pre> <br> 神经网络调用： <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StateRatingByNNet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; xdata = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> sign = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball.velocity.Z &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) sign = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> signX = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball.velocity.X * sign &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) signX = <span class="hljs-number"><span class="hljs-number">-1</span></span>; xdata.Add(ball.velocity.X * sign * signX); xdata.Add(ball.velocity.Y); xdata.Add(ball.velocity.Z * sign); xdata.Add(ball.position.X * sign * signX); xdata.Add(ball.position.Y); xdata.Add(ball.position.Z * sign); List&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; o = nnet.predict(xdata); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result + o[<span class="hljs-number"><span class="hljs-number">0</span></span>] * sign; }</code> </pre> <br> 感谢您的关注！ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN439886/">https://habr.com/ru/post/zh-CN439886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN439876/index.html">将数据从Greenplum 4迁移到Greenplum 5时，我们如何克服不兼容性</a></li>
<li><a href="../zh-CN439878/index.html">在2019年为新的高负载创业公司创建架构</a></li>
<li><a href="../zh-CN439880/index.html">安全周07：物联网设备的本地漏洞</a></li>
<li><a href="../zh-CN439882/index.html">ptrace冒险（2）</a></li>
<li><a href="../zh-CN439884/index.html">如何通过一个按钮拒绝不必要的新闻通讯。 Yandex.Mail团队经验</a></li>
<li><a href="../zh-CN439890/index.html">技能是100％或更少。</a></li>
<li><a href="../zh-CN439892/index.html">如何计划一年。 IT公司120人案例研究和两个小团队实践</a></li>
<li><a href="../zh-CN439894/index.html">如何简单地监视网站状态</a></li>
<li><a href="../zh-CN439896/index.html">自动捐款的道德性</a></li>
<li><a href="../zh-CN439898/index.html">适用于Excel和MS Office自动化的VBA和Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>