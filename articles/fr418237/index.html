<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😂 🌇 🤟🏻 Développement d'applications multi-locataires sur la plateforme cloud SAP dans Neo, partie 2: autorisation et authentification 🚶🏻 🔡 🤱🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le deuxième article de la série sur le développement d'applications sur SAP Cloud Platform dans l'environnement Neo, nous couvrirons l'un des asp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Développement d'applications multi-locataires sur la plateforme cloud SAP dans Neo, partie 2: autorisation et authentification</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sap/blog/418237/"> Dans le deuxième article de la série sur le développement d'applications sur SAP Cloud Platform dans l'environnement Neo, nous couvrirons l'un des aspects les plus importants - la gestion des autorisations et de l'authentification des utilisateurs. <br><br>  Dans cet article, nous allons montrer comment établir une connexion entre SAP Cloud Platform et le fournisseur d'identité (IDP) du client imaginaire ABC PetroCorp, et également ajouter des utilisateurs à l'IDP.  Ensuite, nous verrons comment attribuer des rôles pour les utilisateurs de l'entreprise cliente dans une application spécifique (à partir d'IDP), ainsi que comment configurer les attributs SAML pour leur transfert d'IDP vers l'application de la plateforme cloud SCP. <br><a name="habracut"></a><br>  Dans le sous-compte du client fictif ABC PetroCorp <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du premier article</a> , un abonnement aux applications de surveillance de la pollution SCP fourni par ITeLO Consulting est déjà installé.  Maintenant, l'employé d'ABC PetroCorp doit mettre cette application à la disposition d'autres collègues. <br><br>  Un utilisateur SAP Cloud Platform peut connecter son IDP d'entreprise à la plateforme cloud et configurer la gestion de la sécurité et de l'authentification pour son application chargée dans SCP. <br><br>  ABC PetroCorp a activé le service SAP Cloud Platform Identity Authentication, qui donne accès aux processus métier, aux applications et aux données.  Ce service fournit un locataire SCI, à l'intérieur duquel se trouvent une configuration d'application et une gestion des autorisations des utilisateurs. <br><br>  Emily, le héros imaginaire du premier article, a accès à ce locataire SCI - elle est son administrateur et peut configurer l'autorisation utilisateur dans une application spécifique.  Elle souhaite découvrir comment créer ces configurations à l'aide du service d'authentification d'identité. <br><br>  Prérequis: <br><br><ul><li>  Un compte SCP mondial productif (non d'essai) avec le service d'authentification d'identité connecté (en tant qu'IDP pour le sous-compte ABC PetroCorp); </li><li>  L’utilisateur du sous-compte du client doit être l’administrateur du locataire SCI, il aura donc accès à la console d’administration du service d’authentification d’identité. </li></ul><br>  Emily doit effectuer les étapes suivantes dans la console d'administration du service d'authentification d'identité et le panneau de configuration SCP pour mettre l'application dans la plateforme cloud à la disposition des autres employés d'ABC PetroCorp: <br><br>  <i>Étape 1: Établir une relation de confiance entre le locataire SCI et le sous-compte SCP.</i> <i><br></i>  <i>Étape 2: importez des utilisateurs dans le client SCI et mettez à jour (ajoutez) les attributs nécessaires.</i> <i><br></i>  <i>Étape 3: attribuez des rôles aux utilisateurs de niveau application dans SCP.</i> <i><br></i>  <i>Étape 4: configurez les attributs dans le client SCI et le panneau de configuration SCP pour les transférer vers l'application.</i> <i><br></i>  <i>Étape 5: Vérifiez les paramètres.</i> <br><br>  <b><i>Étape 1: Établir une relation de confiance entre le locataire SCI et le sous-compte SCP</i></b> <b><i><br></i></b> <br>  Emily est l'administrateur du sous-compte ABC PetroCorp et du locataire SCI, ce qui lui permet d'appliquer les paramètres nécessaires pour utiliser le locataire SCI en tant que «référentiel d'utilisateurs» pour l'application multi-locataire fournie par le fournisseur ITeLO Consulting. <br><br>  Tout d'abord, Emily doit établir une relation de confiance entre le locataire SCI et le sous-compte SCP du client ABC PetroCorp. <br><br>  Nous allons accéder à la console d'administration du service d'authentification d'identité en utilisant le lien «https: //.accounts.ondemand.com/admin», où est l'identifiant du locataire SCI.  Ce lien se trouve dans la lettre d'enregistrement qui parvient à l'administrateur du locataire du service d'authentification d'identité.  L'identifiant du locataire y est également indiqué. <br><br>  La console d'administration du service d'authentification d'identité est la suivante: <br><br><img src="https://habrastorage.org/webt/cp/co/sg/cpcosgfcvdxme2noud-nmpiu9z8.png"><br><br>  Dans un autre onglet du navigateur, ouvrez le panneau de configuration du sous-compte client "ABC PetroCorp" et accédez à l'onglet "Sécurité" -&gt; "Trust". <br><br><img src="https://habrastorage.org/webt/6w/xx/m0/6wxxm0jlg4ba0p4j6cin6m2n4by.png"><br><br>  Dans le menu "Trust Management" qui s'ouvre, accédez à l'onglet "Local Service Provider" et cliquez sur "Modifier". <br><br><img src="https://habrastorage.org/webt/8r/r5/gt/8rr5gt5cef-3zbr4bh-xwapupuu.png"><br><br>  Ensuite, nous effectuons les étapes suivantes: <br><br><ul><li>  Dans le champ "Type de configuration", changez le type en "Personnalisé"; </li><li>  Cliquez sur «Générer une paire de clés» pour créer une clé et un certificat pour le compte; </li><li>  Remplacez la valeur du champ «Propagation principale» par «Activer»; </li><li>  Cliquez sur "Enregistrer". </li></ul><br><img src="https://habrastorage.org/webt/pj/i_/yt/pji_ytcjevq_bzd5odtcvdchclm.png"><br><br>  Cliquez sur «Obtenir les métadonnées» pour télécharger le fichier de métadonnées au format «xml», qui contient les configurations décrites précédemment.  Il sera utilisé pour établir la confiance avec le locataire SCI. <br><br>  Revenons à la console d'administration du service d'authentification d'identité et allons dans l'onglet «Applications et ressources» -&gt; «Applications» dans le menu de gauche.  Dans la zone «Applications», cliquez sur le bouton «Ajouter» pour indiquer une nouvelle application déployée dans le sous-compte «ABC PetroCorp». <br><br><img src="https://habrastorage.org/webt/en/a4/ow/ena4owiid3yz0_qdn5ch4c2vexe.png"><br><br>  Dans la fenêtre qui apparaît, entrez le nom de l'application (par exemple, ABC_PetroCorp_IDP) et cliquez sur "Enregistrer".  Après cela, un nouveau point sera créé dans le locataire pour notre application. <br><br>  Dans l'application créée, allez dans l'onglet «Trust» et sélectionnez le paramètre «SAML 2.0 Configuration». <br><br><img src="https://habrastorage.org/webt/oi/cy/fg/oicyfgksa9mue9msaysvy_7asyq.png"><br><br>  Dans la section «Définir à partir des métadonnées», cliquez sur «Parcourir» et sélectionnez le fichier de métadonnées au format «xml», que nous avons téléchargé plus tôt lors de la configuration de la confiance dans le sous-compte SCP.  Les détails concernant la configuration de SAML 2.0 seront automatiquement renseignés après le téléchargement du fichier.  Cliquez sur «Enregistrer» - maintenant la configuration SAML 2.0 est créée et enregistrée pour cette application. <br><br><img src="https://habrastorage.org/webt/eu/dv/se/eudvsepyrbw9drrqhzl6ydstbhe.png"><br><br>  Revenez au point d'application appelé ABC_PetroCorp_IDP dans le locataire, cliquez sur "URL d'accueil" et entrez une URL telle que "https: // pollutionmonitoringui- &lt;subaccount_name&gt; .dispatcher. &lt;region_host&gt;". <br><br>  Cette URL se trouve dans la description de l'application HTML5 à laquelle le client est abonné (sous-compte "ABC PetroCorp").  Pour ce faire, accédez au sous-compte du client dans l'onglet "Applications" -&gt; "Abonnements" et sélectionnez l'application HTML5 signée. <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Dans l'onglet «Présentation» se trouvera l'URL dont nous avons besoin. <br><br><img src="https://habrastorage.org/webt/zx/sg/_j/zxsg_jrg0wntfrttlqjlv5l2q3y.png"><br><br>  Ensuite, nous revenons au point d'application dans le locataire SCI, désignons l'URL de l'application dans «URL d'accueil» et cliquez sur «Enregistrer». <br><br><img src="https://habrastorage.org/webt/rm/ie/od/rmieoddhrh-rj2wopqy9llz_dqm.png"><br><br>  Allez maintenant dans l'onglet «Applications et ressources» -&gt; «Paramètres du locataire» dans la console d'administration du service d'authentification d'identité.  Sur la page des paramètres du locataire, sélectionnez «Configuration SAML 2.0». <br><br><img src="https://habrastorage.org/webt/nj/yf/fx/njyffxlfgdvcp5y3m-nyeqznqde.png"><br><br>  Dans la fenêtre qui s'ouvre, cliquez sur «Télécharger le fichier de métadonnées» pour télécharger le fichier «xml» contenant les configurations des locataires SCI.  Il sera utilisé à l'avenir pour établir la confiance avec le sous-compte du client dans SCP. <br><br>  Revenez au sous-compte «ABC PetroCorp» et allez dans le menu «Sécurité» -&gt; «Trust», dans la fenêtre qui s'ouvre, sélectionnez l'onglet «Application Identity Provider».  Cliquez sur «Ajouter un fournisseur d'identité de confiance» pour ajouter des détails sur le locataire SCI. <br><br><img src="https://habrastorage.org/webt/ai/x9/yg/aix9ygszpkfu5bhbmalbvyj0hpk.png"><br><br>  Dans l'onglet «Général», cliquez sur «Parcourir» et sélectionnez le fichier de métadonnées au format «xml» téléchargé depuis la console d'administration du service d'authentification d'identité.  Les détails de configuration sont automatiquement renseignés après le téléchargement du fichier.  Décochez la case «Uniquement pour l'authentification unique initiée par IDP» et cliquez sur «Enregistrer». <br><br><img src="https://habrastorage.org/webt/il/ob/nw/ilobnwscixyn19_7dfsdjifo_pm.png"><br><br>  Maintenant, la relation de confiance entre le sous-compte du client ABC PetroCorp et son locataire SCI a été établie avec succès.  Les mêmes paramètres peuvent être appliqués aux sous-comptes d'autres clients (par exemple, pour le client XYZ EnergyCorp). <br><br>  <i><b>Étape 2: importer des utilisateurs dans le locataire SCI et mettre à jour (ajouter) les attributs nécessaires</b></i> <i><b><br></b></i> <br>  Emily doit s'assurer que les utilisateurs de l'application sont enregistrés auprès du PDI d'entreprise d'ABC PetroCorp. <br><br>  Idéalement, un PDI d'entreprise (dans notre cas, un locataire SCI) devrait déjà inclure une liste de tous les utilisateurs de l'entreprise.  Pour plus de clarté, nous importons certains utilisateurs dans le locataire SCI, après quoi ils recevront les autorisations appropriées pour accéder à l'application. <br>  Les démos de l'application sont stockées dans un fichier «csv» sur github - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Github</a> . <br><br>  Téléchargez le fichier «CSV» pour «ABC PetroCorp» depuis GitHub.  Deux utilisateurs sont indiqués dans le fichier «csv»: <br><br><ul><li>  ABCPlantSupervisor: Cet utilisateur sera le gestionnaire d'une usine ABC PetroCorp spécifique et ne pourra voir que les données de son usine; </li><li>  ABCAreaManager: Cet utilisateur sera le gestionnaire d'une zone entière, qui peut inclure plusieurs usines ABC PetroCorp.  Il pourra voir les données de toutes les usines de sa région. </li></ul><br><img src="https://habrastorage.org/webt/1g/jj/kg/1gjjkg_amk9yp8nu-ht9j8ju5yg.png"><br><br>  Le fichier .csv pour ABC PetroCorp contient des adresses électroniques d'utilisateurs fictives.  Ils doivent être remplacés par de vrais, car des lettres leur seront envoyées pour activer les comptes.  Par exemple, si votre véritable courrier est «john.smith@sap.com», vous devez remplacer la désignation &lt;&gt; par «john.smith» et &lt;&lt;insert_your_company&gt;&gt; par «sap». <br><br><img src="https://habrastorage.org/webt/-g/z_/jt/-gz_jtxt7lwrrhkqrsrxggowp6s.png"><br><br>  Accédez à la console d'administration du service d'authentification d'identité et sélectionnez l'onglet «Utilisateurs et autorisations» -&gt; «Importer des utilisateurs».  Sélectionnez le point d'application précédemment créé "ABC_PetroCorp_IDP" et cliquez sur "Parcourir", puis sélectionnez le fichier "ABCPetroCorp.csv" qui décrit nos utilisateurs de démonstration - et cliquez sur le bouton "Importer". <br><br><img src="https://habrastorage.org/webt/ah/dv/k2/ahdvk2otnkhjwdfueyubevzd0vk.png"><br><br>  Les utilisateurs doivent activer leur compte.  Pour recevoir un e-mail avec un lien d'activation, vous devez cliquer sur "Envoyer" dans la fenêtre "Envoyer des e-mails". <br><br>  Avant d'activer l'utilisateur, vous devez modifier certaines configurations. <br>  Accédez à l'onglet "Utilisateurs et autorisations" -&gt; "Gestion des utilisateurs".  Deux utilisateurs figuraient dans les listes d'utilisateurs: «Area Manager» et «Plant Supervisor».  Des identifiants leur sont automatiquement attribués: P000011 et P000010.  Ces identifiants peuvent être utilisés comme identifiants pour entrer le locataire (et dans l'application, lorsque tous les paramètres nécessaires sont définis). <br><br><img src="https://habrastorage.org/webt/kr/5n/ns/kr5nnsayi-h_uzenvlbkvzvttds.png"><br><br>  Passons à l'utilisateur P000011 ou «Area Manager» et ajoutons un nom qui peut également être utilisé comme identifiant pour entrer.  Pour ce faire, cliquez sur l'icône de modification dans le champ "Informations personnelles" et remplissez le "Nom de connexion" (dans notre cas, c'est Johan). <br><br><img src="https://habrastorage.org/webt/cr/qa/vg/crqavg4m8ids9ec4eqifslnuwu0.png"><br><br>  Cliquez ensuite sur «Enregistrer». <br><br>  Maintenant, faisons de même avec l'utilisateur P000010 ou Plant Supervisor, mais appelons-le Smith. <br><br><img src="https://habrastorage.org/webt/8-/yr/-k/8-yr-klcft-lnsvvfxtg_gyphfc.png"><br><br>  L'utilisateur du superviseur d'usine ne doit pouvoir afficher que des informations sur son usine, puis dans la section contenant des informations sur l'entreprise, il est nécessaire d'indiquer l'identifiant de l'entreprise (comment cet identifiant sera utilisé sera expliqué à l'étape 4). <br><br>  Pour ce faire, accédez à la section "Informations sur la société" et saisissez l'identifiant de l'installation, à savoir "101", dans le champ "Société". <br><br>  Maintenant, les informations sur nos utilisateurs ont été modifiées.  Pour les activer, accédez aux boîtes aux lettres spécifiées dans le fichier «csv» et cliquez sur le lien d'activation, ou cliquez sur «Cliquez ici pour activer votre compte». <br><br><img src="https://habrastorage.org/webt/us/nr/jr/usnrjrph5ur5oawb8yamdoir3zg.png"><br><br>  Nous avons donc réussi à importer des utilisateurs dans le locataire SCI, à mettre à jour les informations les concernant et à les activer. <br><br>  <b><i>Étape 3: attribution de rôles aux utilisateurs au niveau de l'application dans SAP Cloud Platform</i></b> <b><i><br></i></b> <br>  L'application de surveillance de la pollution à locataires multiples, créée par Robert de ITeLO Consulting, fournit deux rôles prédéfinis, PlantSupervisor et AreaManager, qui contrôlent l'autorisation des utilisateurs dans l'application et déterminent ce que voit l'utilisateur final. <br><br><ul><li>  Rôle PlantSupervisor: les utilisateurs auxquels ce rôle est attribué ne pourront afficher que les données de la plante identifiée dans les informations sur la société dans le client SCI. </li><li>  Rôle «AreaManager»: les utilisateurs auxquels ce rôle est attribué pourront afficher les données de toutes les usines de leur région. </li></ul><br>  Voyons comment la séparation des rôles est réalisée au niveau du code de projet. <br><br>  Passons au fichier web.xml situé le long du chemin / surveillance de la pollution <br>  /src/main/webapp/WEB-INF/web.xml ”dans le dossier du projet. <br><br>  Ouvrez le fichier et assurez-vous que les deux rôles ci-dessus sont définis dans l'application. <br><br><img src="https://habrastorage.org/webt/vm/jy/4r/vmjy4ruivum6qlp-a2kw-6nsar4.png"><br><br>  Passons maintenant au fichier «PollutionDataService.java» situé le long du chemin «/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.java» du projet et ouvrez-le. <br><br>  La méthode "getCompanyPollutionData ()" est indiquée dans ce fichier.  Il vous permet de vérifier si l'utilisateur est un administrateur (gestionnaire).  Si oui, l'application affiche les données de toutes les usines, sinon, les données sont filtrées par l'ID de l'usine (plant_id).  De plus, l'application n'affichera les informations que pour les usines dont les identifiants correspondent à ceux indiqués dans les informations utilisateur. <br><br><img src="https://habrastorage.org/webt/wb/nr/-1/wbnr-1xbi_tiqah2efsv4444tn4.png"><br><br>  Pour plus de clarté, vous pouvez vous référer à la méthode isUserAdmin (), qui vous permet de déterminer par rôle si un utilisateur est un administrateur (gestionnaire) ou non. <br><br><img src="https://habrastorage.org/webt/hg/az/25/hgaz25dqc9shpbzdjr8szqb81dc.png"><br><br>  Un algorithme similaire est utilisé pour extraire les données de l'installation des systèmes locaux. <br><br><img src="https://habrastorage.org/webt/im/ds/qa/imdsqalrzqvuubw7e9lx1ppwgo0.png"><br><br>  Maintenant, Emily, en tant qu'employée d'ABC PetroCorp, doit identifier les directeurs de zone et les directeurs d'usine en leur attribuant les rôles appropriés (ABCPlantSupervisor et ABCAreaManager) dans l'application dans SCP. <br><br>  Nous allons accéder au sous-compte du client ABC PetroCorp et sélectionner l'application Java de surveillance de la pollution fournie par le fournisseur ITeLO Consulting (elle se trouve dans l'onglet Applications -&gt; onglet Abonnements). <br><br><img src="https://habrastorage.org/webt/py/ql/b_/pyqlb_s5jxwjw3amjgu3z2lzcus.png"><br><br>  Ensuite, allez dans l'onglet «Rôles» (au niveau de l'application). <br><br>  Dans la fenêtre qui s'ouvre, une liste des rôles indiqués dans l'application apparaît.  Sélectionnez le rôle "PlantSupervisor" et cliquez sur "Attribuer".  Dans la fenêtre qui apparaît, entrez l'ID utilisateur, indiqué dans le locataire SCI comme "ABCPlantSupervisor".  Dans notre cas, l'identifiant d'un tel utilisateur sera P000010. <br><br>  Sélectionnez ensuite le rôle «AreaManager» et cliquez sur «Attribuer».  Dans la fenêtre qui apparaît, entrez l'identifiant utilisateur indiqué dans le locataire SCI comme "ABCAreaManager" (dans notre cas, l'identifiant d'un tel utilisateur sera P000011). <br><br><img src="https://habrastorage.org/webt/pw/k2/qr/pwk2qre0nnl8iyytqg8szu9wwhc.png"><br><br>  Nous avons donc réussi à comparer les rôles de l'application avec les utilisateurs correspondants d'ABC PetroCorp du locataire SCI. <br><br>  Les mêmes paramètres peuvent être appliqués dans le sous-compte d'un autre client (par exemple, «XYZ EnergyCorp»). <br><br>  <i><b>Étape 4: Configuration des attributs dans le client SCI et le panneau de configuration SCP pour le transfert vers l'application</b></i> <i><b><br></b></i> <br>  Robert de ITeLO Consulting a programmé l'application multi-locataire de telle manière qu'il doit transmettre l'identifiant utilisateur PlantSupervisor à la plante afin que les données de la plante puissent être filtrées dans l'application pour cet identifiant de plante particulier. <br>  Dans les étapes précédentes, nous avons ajouté l'identifiant de l'installation à l'utilisateur «PlantSupervisor» dans le locataire SCI dans le champ «Informations sur la société», que nous devons maintenant transférer vers l'application multi-locataire.  Il peut ensuite être utilisé dans une application pour afficher des données relatives à une usine particulière.  L'utilisateur AreaManager est essentiellement un administrateur qui peut afficher les données de toutes les usines. <br><br>  Voyons comment cela est organisé au niveau du code d'application. <br><br>  Ouvrez le fichier «PollutionDataService.java» situé sur le chemin «/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.java» dans le projet. <br><br>  Ce fichier décrit la méthode getPlantId ().  Cette méthode décrit l'obtention du nom d'utilisateur et la vérification de l'attribut «PLANT_ID», qui est utilisé pour filtrer les données de pollution et les données d'usine. <br><br><img src="https://habrastorage.org/webt/oo/5k/8f/oo5k8fcedmqrdjgd1qc3b1jink8.png"><br><br>  Nous pouvons transférer des attributs utilisateur du locataire SCI vers l'application via les attributs d'assertion SAML.  Cela est nécessaire pour que l'attribut utilisateur du locataire SCI contenant les informations de l'entreprise soit lu par SCP au moment où l'utilisateur se connecte.  Le soi-disant «attribut d'assertion» (attribut d'approbation) défini pour l'utilisateur doit être transféré à l'application de surveillance de la pollution. <br><br>  Pour ce faire, créez d'abord un "attribut d'assertion" dans le locataire SCI, puis - désignez l'attribut d'approbation dans l'attribut principal ("attribut principal") du sous-compte "ABC PetroCorp", qui peut être lu par le code d'application, comme indiqué ci-dessus. <br><br>  Accédez à la console d'administration du service d'authentification d'identité et sélectionnez l'onglet «Applications et ressources» -&gt; «Applications».  Sélectionnez l'application dont nous avons besoin (ABC_PetroCorp_IDP) et dans l'onglet «Trust», cliquez sur «Attributs d'assertion». <br><br><img src="https://habrastorage.org/webt/aj/vx/a1/ajvxa1wkg_edv7_a4s8peeug_ge.png"><br><br>  Une liste d'attributs existants apparaîtra, nous en avons besoin d'un de plus.  Pour ce faire, cliquez sur le bouton "Ajouter" et sélectionnez l'attribut "Société". <br><br>  Ensuite, nous ajoutons "plant_id" (sensible à la casse) à la valeur d'attribut et cliquez sur "Enregistrer". <br><br><img src="https://habrastorage.org/webt/gq/_0/g7/gq_0g7ulur1s6brsmvessvvt-2e.png"><br><br>  Maintenant, allez dans le sous-compte "ABC PetroCorp" dans SCP et allez dans l'onglet "Sécurité" -&gt; "Trust".  Dans la fenêtre "Trust Management", accédez à l'onglet "Application Identity Provider" et sélectionnez l'IdP associé au sous-compte. <br><br><img src="https://habrastorage.org/webt/wd/bo/x8/wdbox8lmoxamqgwybxzrsugpmru.png"><br><br>  Dans la fenêtre qui s'ouvre, allez dans l'onglet «Attributs» et cliquez sur «Ajouter un attribut basé sur une assertion».  Dans le champ "Attribut d'assertion", nous entrons la valeur "plant_id" (comme dans le locataire SCI), et dans le champ "Attribut principal", nous entrons "PLANT_ID" (cette valeur sera transférée à l'application comme code d'usine) - et cliquez sur "Enregistrer". <br><br>  Nous avons donc configuré avec succès les attributs dans le client SCI et dans le panneau de configuration SCP pour les transférer vers l'application. <br><br>  <b><i>Étape 5: vérifier les paramètres</i></b> <b><i><br></i></b>  Emily peut désormais vérifier que les paramètres SCI Tenant (IdP) sont correctement définis pour le sous-compte «ABC PetroCorp» dans SCP et pour l'application fournie par le fournisseur. <br><br>  Pour ce faire, rendez-vous dans le sous-compte "ABC PetroCorp" et accédez à l'application HTML5 "pollutionmonitoringui" (elle se trouve dans l'onglet "Applications" -&gt; "Abonnements"). <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Copiez le lien vers l'application.  Ouvrez un nouvel onglet dans le navigateur en mode navigation privée et insérez un lien vers l'application HTML5.  Une fenêtre apparaîtra pour entrer dans l'application, où le nom indiqué dans le locataire SCI sera affiché. <br><br>  Si tout est correctement configuré, vous devriez pouvoir entrer l'application sous les utilisateurs de «AreaManager» et «PlantSupervisor», indiqués dans le locataire SCI. <br><br>  Dans notre cas, le directeur de la région est l'utilisateur Johan (P000011) et le chef de l'usine est Smith (P000010).  Vous pouvez entrer l'application sous ces utilisateurs en utilisant soit le nom d'utilisateur ou son identifiant comme identifiant. <br><br>  <i>Remarque: lors de la saisie de l'application à ce stade, aucune donnée ne sera affichée.</i>  <i>Ceci est normal car la configuration n'est pas encore terminée et le système local n'est pas connecté.</i> <i><br></i> <br><br>  Nous avons donc mis en place une connexion Identity Provider (IDP) avec notre application de surveillance de la pollution SCP.  Nous avons également importé des utilisateurs et leur avons attribué les rôles appropriés pour accéder à l'application, en veillant à ce que les informations correctes sur l'installation soient transférées vers l'application. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418237/">https://habr.com/ru/post/fr418237/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418225/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 7: Native Client Sandbox Part 2</a></li>
<li><a href="../fr418227/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 7: Le Sandbox Native Client, Partie 3</a></li>
<li><a href="../fr418229/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 8: Modèle de sécurité réseau, partie 1</a></li>
<li><a href="../fr418233/index.html">Les mnémoniques BMW pour trouver les valeurs limites</a></li>
<li><a href="../fr418235/index.html">Saga orchestrée ou comment créer des transactions commerciales dans les services avec la base de données par modèle de service</a></li>
<li><a href="../fr418239/index.html">48 mégapixels pour smartphone</a></li>
<li><a href="../fr418241/index.html">Pourquoi Gauss? (100 façons de résoudre le système d'équations)</a></li>
<li><a href="../fr418243/index.html">L'histoire populaire de l'astronomie est fausse</a></li>
<li><a href="../fr418245/index.html">Comment ne pas développer un projet sur Bitrix</a></li>
<li><a href="../fr418247/index.html">Accélérez la multiplication de la matrice flottante 4x4 avec SIMD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>