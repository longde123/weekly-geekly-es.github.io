<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜‚ ğŸŒ‡ ğŸ¤ŸğŸ» DÃ©veloppement d'applications multi-locataires sur la plateforme cloud SAP dans Neo, partie 2: autorisation et authentification ğŸš¶ğŸ» ğŸ”¡ ğŸ¤±ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le deuxiÃ¨me article de la sÃ©rie sur le dÃ©veloppement d'applications sur SAP Cloud Platform dans l'environnement Neo, nous couvrirons l'un des asp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DÃ©veloppement d'applications multi-locataires sur la plateforme cloud SAP dans Neo, partie 2: autorisation et authentification</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sap/blog/418237/"> Dans le deuxiÃ¨me article de la sÃ©rie sur le dÃ©veloppement d'applications sur SAP Cloud Platform dans l'environnement Neo, nous couvrirons l'un des aspects les plus importants - la gestion des autorisations et de l'authentification des utilisateurs. <br><br>  Dans cet article, nous allons montrer comment Ã©tablir une connexion entre SAP Cloud Platform et le fournisseur d'identitÃ© (IDP) du client imaginaire ABC PetroCorp, et Ã©galement ajouter des utilisateurs Ã  l'IDP.  Ensuite, nous verrons comment attribuer des rÃ´les pour les utilisateurs de l'entreprise cliente dans une application spÃ©cifique (Ã  partir d'IDP), ainsi que comment configurer les attributs SAML pour leur transfert d'IDP vers l'application de la plateforme cloud SCP. <br><a name="habracut"></a><br>  Dans le sous-compte du client fictif ABC PetroCorp <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du premier article</a> , un abonnement aux applications de surveillance de la pollution SCP fourni par ITeLO Consulting est dÃ©jÃ  installÃ©.  Maintenant, l'employÃ© d'ABC PetroCorp doit mettre cette application Ã  la disposition d'autres collÃ¨gues. <br><br>  Un utilisateur SAP Cloud Platform peut connecter son IDP d'entreprise Ã  la plateforme cloud et configurer la gestion de la sÃ©curitÃ© et de l'authentification pour son application chargÃ©e dans SCP. <br><br>  ABC PetroCorp a activÃ© le service SAP Cloud Platform Identity Authentication, qui donne accÃ¨s aux processus mÃ©tier, aux applications et aux donnÃ©es.  Ce service fournit un locataire SCI, Ã  l'intÃ©rieur duquel se trouvent une configuration d'application et une gestion des autorisations des utilisateurs. <br><br>  Emily, le hÃ©ros imaginaire du premier article, a accÃ¨s Ã  ce locataire SCI - elle est son administrateur et peut configurer l'autorisation utilisateur dans une application spÃ©cifique.  Elle souhaite dÃ©couvrir comment crÃ©er ces configurations Ã  l'aide du service d'authentification d'identitÃ©. <br><br>  PrÃ©requis: <br><br><ul><li>  Un compte SCP mondial productif (non d'essai) avec le service d'authentification d'identitÃ© connectÃ© (en tant qu'IDP pour le sous-compte ABC PetroCorp); </li><li>  Lâ€™utilisateur du sous-compte du client doit Ãªtre lâ€™administrateur du locataire SCI, il aura donc accÃ¨s Ã  la console dâ€™administration du service dâ€™authentification dâ€™identitÃ©. </li></ul><br>  Emily doit effectuer les Ã©tapes suivantes dans la console d'administration du service d'authentification d'identitÃ© et le panneau de configuration SCP pour mettre l'application dans la plateforme cloud Ã  la disposition des autres employÃ©s d'ABC PetroCorp: <br><br>  <i>Ã‰tape 1: Ã‰tablir une relation de confiance entre le locataire SCI et le sous-compte SCP.</i> <i><br></i>  <i>Ã‰tape 2: importez des utilisateurs dans le client SCI et mettez Ã  jour (ajoutez) les attributs nÃ©cessaires.</i> <i><br></i>  <i>Ã‰tape 3: attribuez des rÃ´les aux utilisateurs de niveau application dans SCP.</i> <i><br></i>  <i>Ã‰tape 4: configurez les attributs dans le client SCI et le panneau de configuration SCP pour les transfÃ©rer vers l'application.</i> <i><br></i>  <i>Ã‰tape 5: VÃ©rifiez les paramÃ¨tres.</i> <br><br>  <b><i>Ã‰tape 1: Ã‰tablir une relation de confiance entre le locataire SCI et le sous-compte SCP</i></b> <b><i><br></i></b> <br>  Emily est l'administrateur du sous-compte ABC PetroCorp et du locataire SCI, ce qui lui permet d'appliquer les paramÃ¨tres nÃ©cessaires pour utiliser le locataire SCI en tant que Â«rÃ©fÃ©rentiel d'utilisateursÂ» pour l'application multi-locataire fournie par le fournisseur ITeLO Consulting. <br><br>  Tout d'abord, Emily doit Ã©tablir une relation de confiance entre le locataire SCI et le sous-compte SCP du client ABC PetroCorp. <br><br>  Nous allons accÃ©der Ã  la console d'administration du service d'authentification d'identitÃ© en utilisant le lien Â«https: //.accounts.ondemand.com/adminÂ», oÃ¹ est l'identifiant du locataire SCI.  Ce lien se trouve dans la lettre d'enregistrement qui parvient Ã  l'administrateur du locataire du service d'authentification d'identitÃ©.  L'identifiant du locataire y est Ã©galement indiquÃ©. <br><br>  La console d'administration du service d'authentification d'identitÃ© est la suivante: <br><br><img src="https://habrastorage.org/webt/cp/co/sg/cpcosgfcvdxme2noud-nmpiu9z8.png"><br><br>  Dans un autre onglet du navigateur, ouvrez le panneau de configuration du sous-compte client "ABC PetroCorp" et accÃ©dez Ã  l'onglet "SÃ©curitÃ©" -&gt; "Trust". <br><br><img src="https://habrastorage.org/webt/6w/xx/m0/6wxxm0jlg4ba0p4j6cin6m2n4by.png"><br><br>  Dans le menu "Trust Management" qui s'ouvre, accÃ©dez Ã  l'onglet "Local Service Provider" et cliquez sur "Modifier". <br><br><img src="https://habrastorage.org/webt/8r/r5/gt/8rr5gt5cef-3zbr4bh-xwapupuu.png"><br><br>  Ensuite, nous effectuons les Ã©tapes suivantes: <br><br><ul><li>  Dans le champ "Type de configuration", changez le type en "PersonnalisÃ©"; </li><li>  Cliquez sur Â«GÃ©nÃ©rer une paire de clÃ©sÂ» pour crÃ©er une clÃ© et un certificat pour le compte; </li><li>  Remplacez la valeur du champ Â«Propagation principaleÂ» par Â«ActiverÂ»; </li><li>  Cliquez sur "Enregistrer". </li></ul><br><img src="https://habrastorage.org/webt/pj/i_/yt/pji_ytcjevq_bzd5odtcvdchclm.png"><br><br>  Cliquez sur Â«Obtenir les mÃ©tadonnÃ©esÂ» pour tÃ©lÃ©charger le fichier de mÃ©tadonnÃ©es au format Â«xmlÂ», qui contient les configurations dÃ©crites prÃ©cÃ©demment.  Il sera utilisÃ© pour Ã©tablir la confiance avec le locataire SCI. <br><br>  Revenons Ã  la console d'administration du service d'authentification d'identitÃ© et allons dans l'onglet Â«Applications et ressourcesÂ» -&gt; Â«ApplicationsÂ» dans le menu de gauche.  Dans la zone Â«ApplicationsÂ», cliquez sur le bouton Â«AjouterÂ» pour indiquer une nouvelle application dÃ©ployÃ©e dans le sous-compte Â«ABC PetroCorpÂ». <br><br><img src="https://habrastorage.org/webt/en/a4/ow/ena4owiid3yz0_qdn5ch4c2vexe.png"><br><br>  Dans la fenÃªtre qui apparaÃ®t, entrez le nom de l'application (par exemple, ABC_PetroCorp_IDP) et cliquez sur "Enregistrer".  AprÃ¨s cela, un nouveau point sera crÃ©Ã© dans le locataire pour notre application. <br><br>  Dans l'application crÃ©Ã©e, allez dans l'onglet Â«TrustÂ» et sÃ©lectionnez le paramÃ¨tre Â«SAML 2.0 ConfigurationÂ». <br><br><img src="https://habrastorage.org/webt/oi/cy/fg/oicyfgksa9mue9msaysvy_7asyq.png"><br><br>  Dans la section Â«DÃ©finir Ã  partir des mÃ©tadonnÃ©esÂ», cliquez sur Â«ParcourirÂ» et sÃ©lectionnez le fichier de mÃ©tadonnÃ©es au format Â«xmlÂ», que nous avons tÃ©lÃ©chargÃ© plus tÃ´t lors de la configuration de la confiance dans le sous-compte SCP.  Les dÃ©tails concernant la configuration de SAML 2.0 seront automatiquement renseignÃ©s aprÃ¨s le tÃ©lÃ©chargement du fichier.  Cliquez sur Â«EnregistrerÂ» - maintenant la configuration SAML 2.0 est crÃ©Ã©e et enregistrÃ©e pour cette application. <br><br><img src="https://habrastorage.org/webt/eu/dv/se/eudvsepyrbw9drrqhzl6ydstbhe.png"><br><br>  Revenez au point d'application appelÃ© ABC_PetroCorp_IDP dans le locataire, cliquez sur "URL d'accueil" et entrez une URL telle que "https: // pollutionmonitoringui- &lt;subaccount_name&gt; .dispatcher. &lt;region_host&gt;". <br><br>  Cette URL se trouve dans la description de l'application HTML5 Ã  laquelle le client est abonnÃ© (sous-compte "ABC PetroCorp").  Pour ce faire, accÃ©dez au sous-compte du client dans l'onglet "Applications" -&gt; "Abonnements" et sÃ©lectionnez l'application HTML5 signÃ©e. <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Dans l'onglet Â«PrÃ©sentationÂ» se trouvera l'URL dont nous avons besoin. <br><br><img src="https://habrastorage.org/webt/zx/sg/_j/zxsg_jrg0wntfrttlqjlv5l2q3y.png"><br><br>  Ensuite, nous revenons au point d'application dans le locataire SCI, dÃ©signons l'URL de l'application dans Â«URL d'accueilÂ» et cliquez sur Â«EnregistrerÂ». <br><br><img src="https://habrastorage.org/webt/rm/ie/od/rmieoddhrh-rj2wopqy9llz_dqm.png"><br><br>  Allez maintenant dans l'onglet Â«Applications et ressourcesÂ» -&gt; Â«ParamÃ¨tres du locataireÂ» dans la console d'administration du service d'authentification d'identitÃ©.  Sur la page des paramÃ¨tres du locataire, sÃ©lectionnez Â«Configuration SAML 2.0Â». <br><br><img src="https://habrastorage.org/webt/nj/yf/fx/njyffxlfgdvcp5y3m-nyeqznqde.png"><br><br>  Dans la fenÃªtre qui s'ouvre, cliquez sur Â«TÃ©lÃ©charger le fichier de mÃ©tadonnÃ©esÂ» pour tÃ©lÃ©charger le fichier Â«xmlÂ» contenant les configurations des locataires SCI.  Il sera utilisÃ© Ã  l'avenir pour Ã©tablir la confiance avec le sous-compte du client dans SCP. <br><br>  Revenez au sous-compte Â«ABC PetroCorpÂ» et allez dans le menu Â«SÃ©curitÃ©Â» -&gt; Â«TrustÂ», dans la fenÃªtre qui s'ouvre, sÃ©lectionnez l'onglet Â«Application Identity ProviderÂ».  Cliquez sur Â«Ajouter un fournisseur d'identitÃ© de confianceÂ» pour ajouter des dÃ©tails sur le locataire SCI. <br><br><img src="https://habrastorage.org/webt/ai/x9/yg/aix9ygszpkfu5bhbmalbvyj0hpk.png"><br><br>  Dans l'onglet Â«GÃ©nÃ©ralÂ», cliquez sur Â«ParcourirÂ» et sÃ©lectionnez le fichier de mÃ©tadonnÃ©es au format Â«xmlÂ» tÃ©lÃ©chargÃ© depuis la console d'administration du service d'authentification d'identitÃ©.  Les dÃ©tails de configuration sont automatiquement renseignÃ©s aprÃ¨s le tÃ©lÃ©chargement du fichier.  DÃ©cochez la case Â«Uniquement pour l'authentification unique initiÃ©e par IDPÂ» et cliquez sur Â«EnregistrerÂ». <br><br><img src="https://habrastorage.org/webt/il/ob/nw/ilobnwscixyn19_7dfsdjifo_pm.png"><br><br>  Maintenant, la relation de confiance entre le sous-compte du client ABC PetroCorp et son locataire SCI a Ã©tÃ© Ã©tablie avec succÃ¨s.  Les mÃªmes paramÃ¨tres peuvent Ãªtre appliquÃ©s aux sous-comptes d'autres clients (par exemple, pour le client XYZ EnergyCorp). <br><br>  <i><b>Ã‰tape 2: importer des utilisateurs dans le locataire SCI et mettre Ã  jour (ajouter) les attributs nÃ©cessaires</b></i> <i><b><br></b></i> <br>  Emily doit s'assurer que les utilisateurs de l'application sont enregistrÃ©s auprÃ¨s du PDI d'entreprise d'ABC PetroCorp. <br><br>  IdÃ©alement, un PDI d'entreprise (dans notre cas, un locataire SCI) devrait dÃ©jÃ  inclure une liste de tous les utilisateurs de l'entreprise.  Pour plus de clartÃ©, nous importons certains utilisateurs dans le locataire SCI, aprÃ¨s quoi ils recevront les autorisations appropriÃ©es pour accÃ©der Ã  l'application. <br>  Les dÃ©mos de l'application sont stockÃ©es dans un fichier Â«csvÂ» sur github - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Github</a> . <br><br>  TÃ©lÃ©chargez le fichier Â«CSVÂ» pour Â«ABC PetroCorpÂ» depuis GitHub.  Deux utilisateurs sont indiquÃ©s dans le fichier Â«csvÂ»: <br><br><ul><li>  ABCPlantSupervisor: Cet utilisateur sera le gestionnaire d'une usine ABC PetroCorp spÃ©cifique et ne pourra voir que les donnÃ©es de son usine; </li><li>  ABCAreaManager: Cet utilisateur sera le gestionnaire d'une zone entiÃ¨re, qui peut inclure plusieurs usines ABC PetroCorp.  Il pourra voir les donnÃ©es de toutes les usines de sa rÃ©gion. </li></ul><br><img src="https://habrastorage.org/webt/1g/jj/kg/1gjjkg_amk9yp8nu-ht9j8ju5yg.png"><br><br>  Le fichier .csv pour ABC PetroCorp contient des adresses Ã©lectroniques d'utilisateurs fictives.  Ils doivent Ãªtre remplacÃ©s par de vrais, car des lettres leur seront envoyÃ©es pour activer les comptes.  Par exemple, si votre vÃ©ritable courrier est Â«john.smith@sap.comÂ», vous devez remplacer la dÃ©signation &lt;&gt; par Â«john.smithÂ» et &lt;&lt;insert_your_company&gt;&gt; par Â«sapÂ». <br><br><img src="https://habrastorage.org/webt/-g/z_/jt/-gz_jtxt7lwrrhkqrsrxggowp6s.png"><br><br>  AccÃ©dez Ã  la console d'administration du service d'authentification d'identitÃ© et sÃ©lectionnez l'onglet Â«Utilisateurs et autorisationsÂ» -&gt; Â«Importer des utilisateursÂ».  SÃ©lectionnez le point d'application prÃ©cÃ©demment crÃ©Ã© "ABC_PetroCorp_IDP" et cliquez sur "Parcourir", puis sÃ©lectionnez le fichier "ABCPetroCorp.csv" qui dÃ©crit nos utilisateurs de dÃ©monstration - et cliquez sur le bouton "Importer". <br><br><img src="https://habrastorage.org/webt/ah/dv/k2/ahdvk2otnkhjwdfueyubevzd0vk.png"><br><br>  Les utilisateurs doivent activer leur compte.  Pour recevoir un e-mail avec un lien d'activation, vous devez cliquer sur "Envoyer" dans la fenÃªtre "Envoyer des e-mails". <br><br>  Avant d'activer l'utilisateur, vous devez modifier certaines configurations. <br>  AccÃ©dez Ã  l'onglet "Utilisateurs et autorisations" -&gt; "Gestion des utilisateurs".  Deux utilisateurs figuraient dans les listes d'utilisateurs: Â«Area ManagerÂ» et Â«Plant SupervisorÂ».  Des identifiants leur sont automatiquement attribuÃ©s: P000011 et P000010.  Ces identifiants peuvent Ãªtre utilisÃ©s comme identifiants pour entrer le locataire (et dans l'application, lorsque tous les paramÃ¨tres nÃ©cessaires sont dÃ©finis). <br><br><img src="https://habrastorage.org/webt/kr/5n/ns/kr5nnsayi-h_uzenvlbkvzvttds.png"><br><br>  Passons Ã  l'utilisateur P000011 ou Â«Area ManagerÂ» et ajoutons un nom qui peut Ã©galement Ãªtre utilisÃ© comme identifiant pour entrer.  Pour ce faire, cliquez sur l'icÃ´ne de modification dans le champ "Informations personnelles" et remplissez le "Nom de connexion" (dans notre cas, c'est Johan). <br><br><img src="https://habrastorage.org/webt/cr/qa/vg/crqavg4m8ids9ec4eqifslnuwu0.png"><br><br>  Cliquez ensuite sur Â«EnregistrerÂ». <br><br>  Maintenant, faisons de mÃªme avec l'utilisateur P000010 ou Plant Supervisor, mais appelons-le Smith. <br><br><img src="https://habrastorage.org/webt/8-/yr/-k/8-yr-klcft-lnsvvfxtg_gyphfc.png"><br><br>  L'utilisateur du superviseur d'usine ne doit pouvoir afficher que des informations sur son usine, puis dans la section contenant des informations sur l'entreprise, il est nÃ©cessaire d'indiquer l'identifiant de l'entreprise (comment cet identifiant sera utilisÃ© sera expliquÃ© Ã  l'Ã©tape 4). <br><br>  Pour ce faire, accÃ©dez Ã  la section "Informations sur la sociÃ©tÃ©" et saisissez l'identifiant de l'installation, Ã  savoir "101", dans le champ "SociÃ©tÃ©". <br><br>  Maintenant, les informations sur nos utilisateurs ont Ã©tÃ© modifiÃ©es.  Pour les activer, accÃ©dez aux boÃ®tes aux lettres spÃ©cifiÃ©es dans le fichier Â«csvÂ» et cliquez sur le lien d'activation, ou cliquez sur Â«Cliquez ici pour activer votre compteÂ». <br><br><img src="https://habrastorage.org/webt/us/nr/jr/usnrjrph5ur5oawb8yamdoir3zg.png"><br><br>  Nous avons donc rÃ©ussi Ã  importer des utilisateurs dans le locataire SCI, Ã  mettre Ã  jour les informations les concernant et Ã  les activer. <br><br>  <b><i>Ã‰tape 3: attribution de rÃ´les aux utilisateurs au niveau de l'application dans SAP Cloud Platform</i></b> <b><i><br></i></b> <br>  L'application de surveillance de la pollution Ã  locataires multiples, crÃ©Ã©e par Robert de ITeLO Consulting, fournit deux rÃ´les prÃ©dÃ©finis, PlantSupervisor et AreaManager, qui contrÃ´lent l'autorisation des utilisateurs dans l'application et dÃ©terminent ce que voit l'utilisateur final. <br><br><ul><li>  RÃ´le PlantSupervisor: les utilisateurs auxquels ce rÃ´le est attribuÃ© ne pourront afficher que les donnÃ©es de la plante identifiÃ©e dans les informations sur la sociÃ©tÃ© dans le client SCI. </li><li>  RÃ´le Â«AreaManagerÂ»: les utilisateurs auxquels ce rÃ´le est attribuÃ© pourront afficher les donnÃ©es de toutes les usines de leur rÃ©gion. </li></ul><br>  Voyons comment la sÃ©paration des rÃ´les est rÃ©alisÃ©e au niveau du code de projet. <br><br>  Passons au fichier web.xml situÃ© le long du chemin / surveillance de la pollution <br>  /src/main/webapp/WEB-INF/web.xml â€dans le dossier du projet. <br><br>  Ouvrez le fichier et assurez-vous que les deux rÃ´les ci-dessus sont dÃ©finis dans l'application. <br><br><img src="https://habrastorage.org/webt/vm/jy/4r/vmjy4ruivum6qlp-a2kw-6nsar4.png"><br><br>  Passons maintenant au fichier Â«PollutionDataService.javaÂ» situÃ© le long du chemin Â«/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.javaÂ» du projet et ouvrez-le. <br><br>  La mÃ©thode "getCompanyPollutionData ()" est indiquÃ©e dans ce fichier.  Il vous permet de vÃ©rifier si l'utilisateur est un administrateur (gestionnaire).  Si oui, l'application affiche les donnÃ©es de toutes les usines, sinon, les donnÃ©es sont filtrÃ©es par l'ID de l'usine (plant_id).  De plus, l'application n'affichera les informations que pour les usines dont les identifiants correspondent Ã  ceux indiquÃ©s dans les informations utilisateur. <br><br><img src="https://habrastorage.org/webt/wb/nr/-1/wbnr-1xbi_tiqah2efsv4444tn4.png"><br><br>  Pour plus de clartÃ©, vous pouvez vous rÃ©fÃ©rer Ã  la mÃ©thode isUserAdmin (), qui vous permet de dÃ©terminer par rÃ´le si un utilisateur est un administrateur (gestionnaire) ou non. <br><br><img src="https://habrastorage.org/webt/hg/az/25/hgaz25dqc9shpbzdjr8szqb81dc.png"><br><br>  Un algorithme similaire est utilisÃ© pour extraire les donnÃ©es de l'installation des systÃ¨mes locaux. <br><br><img src="https://habrastorage.org/webt/im/ds/qa/imdsqalrzqvuubw7e9lx1ppwgo0.png"><br><br>  Maintenant, Emily, en tant qu'employÃ©e d'ABC PetroCorp, doit identifier les directeurs de zone et les directeurs d'usine en leur attribuant les rÃ´les appropriÃ©s (ABCPlantSupervisor et ABCAreaManager) dans l'application dans SCP. <br><br>  Nous allons accÃ©der au sous-compte du client ABC PetroCorp et sÃ©lectionner l'application Java de surveillance de la pollution fournie par le fournisseur ITeLO Consulting (elle se trouve dans l'onglet Applications -&gt; onglet Abonnements). <br><br><img src="https://habrastorage.org/webt/py/ql/b_/pyqlb_s5jxwjw3amjgu3z2lzcus.png"><br><br>  Ensuite, allez dans l'onglet Â«RÃ´lesÂ» (au niveau de l'application). <br><br>  Dans la fenÃªtre qui s'ouvre, une liste des rÃ´les indiquÃ©s dans l'application apparaÃ®t.  SÃ©lectionnez le rÃ´le "PlantSupervisor" et cliquez sur "Attribuer".  Dans la fenÃªtre qui apparaÃ®t, entrez l'ID utilisateur, indiquÃ© dans le locataire SCI comme "ABCPlantSupervisor".  Dans notre cas, l'identifiant d'un tel utilisateur sera P000010. <br><br>  SÃ©lectionnez ensuite le rÃ´le Â«AreaManagerÂ» et cliquez sur Â«AttribuerÂ».  Dans la fenÃªtre qui apparaÃ®t, entrez l'identifiant utilisateur indiquÃ© dans le locataire SCI comme "ABCAreaManager" (dans notre cas, l'identifiant d'un tel utilisateur sera P000011). <br><br><img src="https://habrastorage.org/webt/pw/k2/qr/pwk2qre0nnl8iyytqg8szu9wwhc.png"><br><br>  Nous avons donc rÃ©ussi Ã  comparer les rÃ´les de l'application avec les utilisateurs correspondants d'ABC PetroCorp du locataire SCI. <br><br>  Les mÃªmes paramÃ¨tres peuvent Ãªtre appliquÃ©s dans le sous-compte d'un autre client (par exemple, Â«XYZ EnergyCorpÂ»). <br><br>  <i><b>Ã‰tape 4: Configuration des attributs dans le client SCI et le panneau de configuration SCP pour le transfert vers l'application</b></i> <i><b><br></b></i> <br>  Robert de ITeLO Consulting a programmÃ© l'application multi-locataire de telle maniÃ¨re qu'il doit transmettre l'identifiant utilisateur PlantSupervisor Ã  la plante afin que les donnÃ©es de la plante puissent Ãªtre filtrÃ©es dans l'application pour cet identifiant de plante particulier. <br>  Dans les Ã©tapes prÃ©cÃ©dentes, nous avons ajoutÃ© l'identifiant de l'installation Ã  l'utilisateur Â«PlantSupervisorÂ» dans le locataire SCI dans le champ Â«Informations sur la sociÃ©tÃ©Â», que nous devons maintenant transfÃ©rer vers l'application multi-locataire.  Il peut ensuite Ãªtre utilisÃ© dans une application pour afficher des donnÃ©es relatives Ã  une usine particuliÃ¨re.  L'utilisateur AreaManager est essentiellement un administrateur qui peut afficher les donnÃ©es de toutes les usines. <br><br>  Voyons comment cela est organisÃ© au niveau du code d'application. <br><br>  Ouvrez le fichier Â«PollutionDataService.javaÂ» situÃ© sur le chemin Â«/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.javaÂ» dans le projet. <br><br>  Ce fichier dÃ©crit la mÃ©thode getPlantId ().  Cette mÃ©thode dÃ©crit l'obtention du nom d'utilisateur et la vÃ©rification de l'attribut Â«PLANT_IDÂ», qui est utilisÃ© pour filtrer les donnÃ©es de pollution et les donnÃ©es d'usine. <br><br><img src="https://habrastorage.org/webt/oo/5k/8f/oo5k8fcedmqrdjgd1qc3b1jink8.png"><br><br>  Nous pouvons transfÃ©rer des attributs utilisateur du locataire SCI vers l'application via les attributs d'assertion SAML.  Cela est nÃ©cessaire pour que l'attribut utilisateur du locataire SCI contenant les informations de l'entreprise soit lu par SCP au moment oÃ¹ l'utilisateur se connecte.  Le soi-disant Â«attribut d'assertionÂ» (attribut d'approbation) dÃ©fini pour l'utilisateur doit Ãªtre transfÃ©rÃ© Ã  l'application de surveillance de la pollution. <br><br>  Pour ce faire, crÃ©ez d'abord un "attribut d'assertion" dans le locataire SCI, puis - dÃ©signez l'attribut d'approbation dans l'attribut principal ("attribut principal") du sous-compte "ABC PetroCorp", qui peut Ãªtre lu par le code d'application, comme indiquÃ© ci-dessus. <br><br>  AccÃ©dez Ã  la console d'administration du service d'authentification d'identitÃ© et sÃ©lectionnez l'onglet Â«Applications et ressourcesÂ» -&gt; Â«ApplicationsÂ».  SÃ©lectionnez l'application dont nous avons besoin (ABC_PetroCorp_IDP) et dans l'onglet Â«TrustÂ», cliquez sur Â«Attributs d'assertionÂ». <br><br><img src="https://habrastorage.org/webt/aj/vx/a1/ajvxa1wkg_edv7_a4s8peeug_ge.png"><br><br>  Une liste d'attributs existants apparaÃ®tra, nous en avons besoin d'un de plus.  Pour ce faire, cliquez sur le bouton "Ajouter" et sÃ©lectionnez l'attribut "SociÃ©tÃ©". <br><br>  Ensuite, nous ajoutons "plant_id" (sensible Ã  la casse) Ã  la valeur d'attribut et cliquez sur "Enregistrer". <br><br><img src="https://habrastorage.org/webt/gq/_0/g7/gq_0g7ulur1s6brsmvessvvt-2e.png"><br><br>  Maintenant, allez dans le sous-compte "ABC PetroCorp" dans SCP et allez dans l'onglet "SÃ©curitÃ©" -&gt; "Trust".  Dans la fenÃªtre "Trust Management", accÃ©dez Ã  l'onglet "Application Identity Provider" et sÃ©lectionnez l'IdP associÃ© au sous-compte. <br><br><img src="https://habrastorage.org/webt/wd/bo/x8/wdbox8lmoxamqgwybxzrsugpmru.png"><br><br>  Dans la fenÃªtre qui s'ouvre, allez dans l'onglet Â«AttributsÂ» et cliquez sur Â«Ajouter un attribut basÃ© sur une assertionÂ».  Dans le champ "Attribut d'assertion", nous entrons la valeur "plant_id" (comme dans le locataire SCI), et dans le champ "Attribut principal", nous entrons "PLANT_ID" (cette valeur sera transfÃ©rÃ©e Ã  l'application comme code d'usine) - et cliquez sur "Enregistrer". <br><br>  Nous avons donc configurÃ© avec succÃ¨s les attributs dans le client SCI et dans le panneau de configuration SCP pour les transfÃ©rer vers l'application. <br><br>  <b><i>Ã‰tape 5: vÃ©rifier les paramÃ¨tres</i></b> <b><i><br></i></b>  Emily peut dÃ©sormais vÃ©rifier que les paramÃ¨tres SCI Tenant (IdP) sont correctement dÃ©finis pour le sous-compte Â«ABC PetroCorpÂ» dans SCP et pour l'application fournie par le fournisseur. <br><br>  Pour ce faire, rendez-vous dans le sous-compte "ABC PetroCorp" et accÃ©dez Ã  l'application HTML5 "pollutionmonitoringui" (elle se trouve dans l'onglet "Applications" -&gt; "Abonnements"). <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Copiez le lien vers l'application.  Ouvrez un nouvel onglet dans le navigateur en mode navigation privÃ©e et insÃ©rez un lien vers l'application HTML5.  Une fenÃªtre apparaÃ®tra pour entrer dans l'application, oÃ¹ le nom indiquÃ© dans le locataire SCI sera affichÃ©. <br><br>  Si tout est correctement configurÃ©, vous devriez pouvoir entrer l'application sous les utilisateurs de Â«AreaManagerÂ» et Â«PlantSupervisorÂ», indiquÃ©s dans le locataire SCI. <br><br>  Dans notre cas, le directeur de la rÃ©gion est l'utilisateur Johan (P000011) et le chef de l'usine est Smith (P000010).  Vous pouvez entrer l'application sous ces utilisateurs en utilisant soit le nom d'utilisateur ou son identifiant comme identifiant. <br><br>  <i>Remarque: lors de la saisie de l'application Ã  ce stade, aucune donnÃ©e ne sera affichÃ©e.</i>  <i>Ceci est normal car la configuration n'est pas encore terminÃ©e et le systÃ¨me local n'est pas connectÃ©.</i> <i><br></i> <br><br>  Nous avons donc mis en place une connexion Identity Provider (IDP) avec notre application de surveillance de la pollution SCP.  Nous avons Ã©galement importÃ© des utilisateurs et leur avons attribuÃ© les rÃ´les appropriÃ©s pour accÃ©der Ã  l'application, en veillant Ã  ce que les informations correctes sur l'installation soient transfÃ©rÃ©es vers l'application. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418237/">https://habr.com/ru/post/fr418237/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418225/index.html">Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 7: Native Client Sandbox Part 2</a></li>
<li><a href="../fr418227/index.html">Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 7: Le Sandbox Native Client, Partie 3</a></li>
<li><a href="../fr418229/index.html">Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 8: ModÃ¨le de sÃ©curitÃ© rÃ©seau, partie 1</a></li>
<li><a href="../fr418233/index.html">Les mnÃ©moniques BMW pour trouver les valeurs limites</a></li>
<li><a href="../fr418235/index.html">Saga orchestrÃ©e ou comment crÃ©er des transactions commerciales dans les services avec la base de donnÃ©es par modÃ¨le de service</a></li>
<li><a href="../fr418239/index.html">48 mÃ©gapixels pour smartphone</a></li>
<li><a href="../fr418241/index.html">Pourquoi Gauss? (100 faÃ§ons de rÃ©soudre le systÃ¨me d'Ã©quations)</a></li>
<li><a href="../fr418243/index.html">L'histoire populaire de l'astronomie est fausse</a></li>
<li><a href="../fr418245/index.html">Comment ne pas dÃ©velopper un projet sur Bitrix</a></li>
<li><a href="../fr418247/index.html">AccÃ©lÃ©rez la multiplication de la matrice flottante 4x4 avec SIMD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>