<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôçüèø üï• ‚è≤Ô∏è STM32 + CMSIS + STM32CubeIDE üèáüèª ‚ôàÔ∏è üìØ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hier erkl√§re ich Ihnen, wie Sie mit der "nativen" IDE f√ºr STM-Mikrocontroller - STM32CubeIDE - ein Minimalprojekt auf CMSIS erstellen. 

 Vielleicht h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>STM32 + CMSIS + STM32CubeIDE</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481478/">  Hier erkl√§re ich Ihnen, wie Sie mit der "nativen" IDE f√ºr STM-Mikrocontroller - STM32CubeIDE - ein Minimalprojekt auf CMSIS erstellen. <br><br>  Vielleicht hat STM32CubeIDE eine Reihe von Nachteilen, aber meiner Meinung nach hat es mehrere Vorteile - wie propriet√§r und kostenlos, f√ºr die Sie zumindest dieser Entwicklungsumgebung Aufmerksamkeit schenken sollten, wenn Sie dies noch nicht getan haben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dv/qc/r8/dvqcr8nj-bvc6u_45zida8xayd8.jpeg"></div><br><a name="habracut"></a><br>  Der STM32F072-Mikrocontroller mit dem ARM Cortex-M0-Kern wurde als Gegenstand der Firmware f√ºr den bekannteren STM32F103 auf dem ARM Cortex-M3 ausgew√§hlt, korrigiert f√ºr den Kern, der Vorgang ist identisch. <br><br>  Alle erforderlichen Ressourcen k√∂nnen von <a href="https://www.st.com/content/st_com/en.html">st.com</a> heruntergeladen werden. <a href="https://www.st.com/content/st_com/en.html">Folgendes</a> ben√∂tigen Sie: <br><br><ul><li>  <a href="https://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-ides/stm32cubeide.html">IDE selbst</a> , ich benutze die Windows-Version, aber Versionen f√ºr Mac und Linux sind auch verf√ºgbar <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mk/_h/tc/mk_htcjbml8jrszolsfhgexy7eq.jpeg"></div></li><li>  <a href="https://my.st.com/content/my_st_com/en/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32cube-mcu-mpu-packages/stm32cubef0.html">Die CMSIS-Bibliothek f√ºr ARM Cortex-M0</a> befindet sich im STM32CubeFx-Archiv, aufgeschl√ºsselt nach Kernel-Version.  Das Archiv selbst enth√§lt neben CMSIS eine Vielzahl weiterer Ressourcen, von Beispielen f√ºr die Arbeit mit Peripherieger√§ten bis hin zu USB-Treibern. Dieses Archiv wird tats√§chlich verwendet, wenn Sie ein Projekt mit STM32Cube erstellen <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/va/cd/gwvacdr6l5cnwoutcb8_yi1viiq.jpeg"></div></li><li>  <a href="https://www.st.com/content/st_com/en/products/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus/stm32-mainstream-mcus/stm32f0-series/stm32f0x2/stm32f072rb.html">Datenblatt und Referenzhandbuch werden</a> nicht schaden <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/iz/13/qciz13lpyc6c_9wexiznagpw6nc.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8p/xm/l-/8pxml-fo2n6m8gqlelq9ljuy4io.jpeg"></div></li></ul><br>  Nach der Installation, dem Starten und Ausw√§hlen des Arbeitsbereichsordners k√∂nnen Sie mit dem Erstellen des Projekts beginnen.  Derzeit ist STM32CubeIDE Version 1.1.0, daher sollte der Speicherort der verschiedenen Einstellungen darauf basieren. <br><br>  Erstellen eines neuen Projekts - <em>Datei / Neu / STM32Project</em> .  Nach einiger √úberlegung erscheint das Fenster zur Auswahl des Mikrocontrollers. In meinem Fall ist es STM32F072RB im LQFP64-Paket. Ich w√§hle die gew√ºnschte Zeile aus und klicke auf Weiter.  Es wird weiterhin vorgeschlagen, den Projektnamen, den Speicherort, die C / C ++ - Programmiersprache, die ausf√ºhrbare Datei / statische Bibliothek und die Angabe zu w√§hlen, ob das Projekt mit CubeMX oder mit einem Schnurrbart generiert werden soll.  Die Cube-Generierung ist in diesem Fall nicht erforderlich, daher ist der Projekttyp <em>Leer</em> das Ende. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/fp/3j/gyfp3j-mz4lkfbrdrelyxutxowe.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n5/o7/wp/n5o7wpxecjf5zhppkvaxqgim5ru.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6l/9h/xq/6l9hxqj1wewf29pmzhofurntiku.jpeg"></div><br>  Links im <em>Projekt-Explorer-</em> Fenster wurde der Projektbaum angezeigt, obwohl er nicht ganz <em>leer</em> ist.  Wenn die generierte Ordnerstruktur Ihren Vorstellungen entspricht, k√∂nnen Sie dort Dateien aus der CMSIS-Bibliothek hinzuf√ºgen und bearbeiten. Hier werde ich jedoch zeigen, wie Sie die Projektstruktur mit meinem Sinn f√ºr Sch√∂nheit in Einklang bringen k√∂nnen, sodass alles au√üer dem Linker-Skript gel√∂scht wird, d. H.  Datei mit der Endung .ld - es wird sich als n√ºtzlich erweisen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8h/ny/-o/8hny-ox3erjy_uyxcdw7uehosco.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wy/bd/l7/wybdl7b4d7nuunc8qpbaafov1pi.jpeg"></div><br>  Alle Manipulationen mit Ordnern und Dateien k√∂nnen sowohl im Explorer als auch in der IDE durch einen Rechtsklick auf den Projektnamen durchgef√ºhrt werden, zum Beispiel: <em>Rechte Maustaste -&gt; Neu -&gt; Ordner</em> .  Wenn sich die Projektstruktur au√üerhalb der IDE ge√§ndert hat, m√ºssen Sie nur das Projekt aktualisieren: <em>Rechte Maustaste -&gt;</em> Aktualisieren. <br><br>  Meine Version der Projektstruktur sieht folgenderma√üen aus: <br><br><ul><li>  <em>Startup</em> - Hier wird das Linker-Skript gespeichert, das aus dem generierten Projekt √ºbrig bleibt, sowie die Startdatei, die aus CMSIS stammt </li><li>  <em>CMSIS \ src</em> und <em>CMSIS \ inc</em> - Hierbei handelt es sich um die Quelle, Dateien mit der Erweiterung .c im Ordner <em>scr</em> und Header-Dateien mit der Erweiterung .h im Ordner <em>inc</em> , die sich auf die CMSIS-Bibliothek beziehen </li><li>  <em>Core \ src</em> und <em>Core \ inc</em> - das Projekt selbst befindet sich hier. F√ºr den Anfang geben Sie <em>main.c</em> und <em>main.h ein</em> </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t4/nx/jw/t4nxjw8u631-l7su5nzua6wg_f0.jpeg"></div><br>  Jetzt m√ºssen Sie die CMSIS-Bibliotheksdateien in das Projekt √ºbertragen.  Die Bibliothek besteht aus Kerndateien und Peripheriedateien.  <em>Kerneldateien</em> beginnen mit <em>core_</em> oder <em>cmsis_</em> und sind allen Mikrocontrollern gemeinsam, die diesen Kernel verwenden.  Peripheriedateien enthalten den Namen des Mikrocontrollers <em>stm32</em> im Namen und sind herstellerspezifisch, in diesem Fall die Firma STM. <br><br>  In der entpackten Form enth√§lt das Archiv den Ordner <em>STM32Cube_FW_F0_V1.11.0</em> , alle Pfade sind relativ zu diesem Ordner.  Insgesamt m√ºssen Sie kopieren: <br><br>  In <em>CMSIS \ inc</em> : <br><br><ul><li>  <em>Treiber \ CMSIS \ Include \ cmsis_compiler.h</em> </li><li>  <em>Treiber \ CMSIS \ Include \ cmsis_gcc.h</em> </li><li>  <em>Treiber \ CMSIS \ Include \ cmsis_version.h</em> </li><li>  <em>Treiber \ CMSIS \ Include \ core_cm0.h</em> </li><li>  <em>Treiber \ CMSIS \ Ger√§t \ ST \ STM32F0xx \ Include \ stmf0xx.h</em> </li><li>  <em>Treiber \ CMSIS \ Ger√§t \ ST \ STM32F0xx \ Include \ stm32f072xb.h</em> </li><li>  <em>Treiber \ CMSIS \ Ger√§t \ ST \ STM32F0xx \ Include \ system_stm32f0xx.h</em> </li></ul><br>  In <em>CMSIS \ src</em> : <br><br><ul><li>  <em>Treiber \ CMSIS \ Ger√§t \ ST \ STM32F0xx \ Source \ Templates \ system_stm32f0xx.c</em> </li></ul><br>  Im Startup: <br><br><ul><li>  <em>Treiber \ CMSIS \ Ger√§t \ ST \ STM32F0xx \ Source \ Templates \ gcc \ startup_stm32f072xb.s</em> </li></ul><br>  So sieht das Projekt in seiner fertigen Form aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/u5/kf/l9u5kfyx7xbvqsoouzqfyqofkdg.jpeg"></div><br>  Da einige Manipulationen an den Projektordnern vorgenommen wurden, m√ºssen Sie diese in den Einstellungen anzeigen. <br><br>  <em>Die rechte Schaltfl√§che f√ºr den Projektnamen -&gt; Eigenschaften -&gt; C / C ++ Build -&gt; Einstellungen -&gt; Werkzeugeinstellungen -&gt; MCU GCC Linker -&gt; Allgemein</em> - hier m√ºssen Sie den neuen Speicherort des Linker-Skripts √ºber die Schaltfl√§che <em>Durchsuchen ...</em> angeben <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/va/6d/d5/va6dd5qv_-xohabg-hqzffunypu.jpeg"></div><br>  Sie m√ºssen auch den Pfad zu den Projektdateien angeben <br><br>  <em>Eigenschaften -&gt; C / C ++ Allgemein -&gt; Includes</em> <br>  <em>Eigenschaften -&gt; C / C ++ Allgemein -&gt; Quellspeicherort</em> <br><br>  In <em>Includes-</em> Pfade zu <em>Inc-</em> Ordnern und im <em>Quellspeicherort</em> w√§re es logisch, <em>src-</em> Ordner zu verwenden. Wenn Sie dies jedoch tun, werden diese Ordner dem Projektbaum separat hinzugef√ºgt.  Um den Baum optisch nicht zu <em>√ºberladen</em> , k√∂nnen Sie im <em>Quellverzeichnis die Stammordner</em> <em>Core</em> , <em>CMSIS</em> und <em>Startup</em> angeben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ba/r9/te/bar9temkumw_ffjxmjz0dc5ehcu.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wt/_v/pa/wt_vpal_mdt3buqheo5ies8tyym.jpeg"></div><br>  Damit das Projekt kompiliert werden kann, m√ºssen Sie die Zeile mit dem Namen des Mikrocontrollers in der Datei <em>stm32f0xx.h auskommentieren</em> und nat√ºrlich die Hauptfunktion in <em>main.c hinzuf√ºgen.</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0m/3b/vq/0m3bvqzgvguepvzxghc3w66b4r8.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8n/r2/tl/8nr2tlojommjirdqgc1poowjwq4.jpeg"></div><br>  Eigentlich alles.  Eine fehlerfreie Kompilierung und das sofortige Verschwinden von bis zu eineinhalb Kilobyte RAM ist RAM, und sofort, wenn der Stack und der Heap gespeichert werden, wurden sie bei der Erstellung des Projekts nirgendwo erw√§hnt.  Die Gr√∂√üe des Stacks und des Heapspeichers wird in der Linker-Skriptdatei angegeben, die die Erweiterung .ld hat. Sie kann und sollte entsprechend den Anforderungen des Projekts ge√§ndert werden.  Diese Werte befinden sich am Anfang der Datei in Form von Beschriftungen <em>_Min_Heap_Size / _Min_Stack_Size</em> mit der Gr√∂√üe in hexadezimaler <em>Schreibweise</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cj/nt/l3/cjntl3rh8a3zjd7ng4vb-navi_g.jpeg"></div><br><br>  Als Beispiel gebe ich ein <a href="https://github.com/heavyC1oud/simpleCMSIS">kleines Projekt eines</a> traditionellen LED-Blinkens. <br><br>  Die LED auf der STM32F072B-DISCO-Debug-Karte blinkt, die Taktung wird von einem internen HSI48-Generator mit einer Frequenz von 48 MHz ausgef√ºhrt und der SysTick-Timer wird als Verz√∂gerungsquelle verwendet, wodurch Interrupts mit einer Dauer von 1 ms generiert werden, mit der die genaue Verz√∂gerungszeit gez√§hlt wird.  Die LED ist an Pin 6 von Port C angeschlossen, der f√ºr den Gegentaktausgang konfiguriert ist. <br><br>  Ich hoffe, diese Informationen sind f√ºr jemanden n√ºtzlich, weil  Trotz der F√ºlle an STM32-Programmiermaterialien musste ich fr√ºher viele Handb√ºcher schaufeln, um Dinge zu realisieren, die jetzt offensichtlich erscheinen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481478/">https://habr.com/ru/post/de481478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481466/index.html">So erstellen Sie Projekte in Jenkins, wenn Sie viele verschiedene Umgebungen ben√∂tigen</a></li>
<li><a href="../de481470/index.html">Smarte Girlande f√ºr das ganze Jahr</a></li>
<li><a href="../de481472/index.html">DNS-Verlauf: Wenn Domainnamen bezahlt werden</a></li>
<li><a href="../de481474/index.html">Wir sind von einem anderen Test - wir testen die Datenbank auf MSTest</a></li>
<li><a href="../de481476/index.html">Wie ich anfing auf Konferenzen zu sprechen und nicht aufh√∂ren kann</a></li>
<li><a href="../de481480/index.html">Dies ist die Norm: Was sind normale Karten und wie funktionieren sie?</a></li>
<li><a href="../de481482/index.html">Cross-Posting auf eine Facebook-Seite mit dem PHP-SDK</a></li>
<li><a href="../de481484/index.html">Die KI, die versucht, Probleme zu vermeiden, lernte komplexes Verhalten</a></li>
<li><a href="../de481486/index.html">‚ÄûAm Leben bleiben, am Leben bleiben‚Äú: Das neue Protokoll wird den Radius der m√∂glichen Nutzung von WLAN um 60 Meter vergr√∂√üern</a></li>
<li><a href="../de481488/index.html">Wie die Beamten der Region Moskau die Luftverschmutzung messen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>