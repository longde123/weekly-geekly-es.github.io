<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤲🏿 👼🏿 😳 Création d'un site à l'aide de C ++ 👵🏻 📄 👨🏼‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Est-ce possible? 
 Oui 

 Je sais que cela semble étrange et ressemble plus à un exercice sans valeur, mais ce n’est pas le cas. 
 Dans cet article, j...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Création d'un site à l'aide de C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480208/"><h2>  Est-ce possible? </h2><br>  Oui <br><br>  Je sais que cela semble étrange et ressemble plus à un exercice sans valeur, mais ce n’est pas le cas. <br>  Dans cet article, je vais vous expliquer comment vous pouvez utiliser C ++ dans le développement de sites Web, et je donnerai quelques bonnes raisons à cela. <br><br>  Ce sera non seulement intéressant, mais aussi utile et très pratique. <br><a name="habracut"></a><br><h2>  Hébergement </h2><br>  Vous pensez probablement: une configuration aussi inhabituelle ne peut être implémentée que dans un environnement spécialisé.  Cependant, ce n'est généralement pas le cas.  Malgré le fait qu'un serveur spécial régulier ou virtuel soit une solution idéale pour de nombreux sites (pas seulement des sites C ++), dans la plupart des cas, vous pouvez utiliser C ++ sur des services d'hébergement partagé. <br>  Tout hébergement Web qui prend en charge CGI (c'est-à-dire, en principe, tout) pourra prendre en charge un site en C ++.  Selon le fournisseur, vous pouvez soit compiler votre site localement ou non, et vous aurez besoin du compilateur inclus dans votre compte.  Vérifiez-les si vous prévoyez de modifier et de compiler via SSH directement sur le serveur Web. <br><br><h2>  Exemple simple </h2><br>  Dans les exemples ci-dessus, j'utilise le compte d'hébergement cPanel.  Ils sont abordables, peu coûteux et cohérents.  Mais vous pouvez facilement adapter ces méthodes à un serveur virtuel ou dédié ou à une instance Amazon EC2 avec quelques modifications simples à votre configuration Apache. <br><br>  cPanel nous fournit le dossier cgi-bin, mais nous n'en avons pas besoin.  Dans la plupart des cas, tout fichier portant l'extension .cgi sera automatiquement traité s'il dispose des autorisations appropriées (généralement 0755).  Voici les fichiers nécessaires (assurez-vous d'utiliser le TAB dans le Makefile) <br><br>  Makefile: <br><br><pre><code class="cpp hljs">all: g++ -O3 -s hello.cpp -o hello.cgi clean: rm -f hello.cgi</code> </pre> <br>  hello.cpp: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; #include &lt;stdlib.h&gt; using namespace std; void set_content_type(string content_type) { cout &lt;&lt; "Content-type: " &lt;&lt; content_type &lt;&lt; "\r\n\r\n"; } void set_page_title(string title) { cout &lt;&lt; "&lt;title&gt;" &lt;&lt; title &lt;&lt; "&lt;/title&gt;\n"; } void h1_text(string text) { cout &lt;&lt; text &lt;&lt; "\n"; } int main() { set_content_type("text/html"); // Output HTML boilerplate cout &lt;&lt; "&lt;!doctype html&gt;\n"; cout &lt;&lt; "&lt;html lang=\"en\"&gt;\n"; cout &lt;&lt; "&lt;head&gt;\n"; set_page_title("Hello, World!"); cout &lt;&lt; "&lt;/head&gt;\n"; cout &lt;&lt; "&lt;body&gt;\n"; h1_text("Hello, World!"); cout &lt;&lt; "&lt;/body&gt;\n"; cout &lt;&lt; "&lt;/html&gt;"; return 0; }</span></span></span></span></code> </pre> <br>  Si vous avez des compilateurs inclus dans votre compte (vous devrez peut-être demander à l'équipe d'assistance pour votre hébergement Web), utilisez simplement SSH dans votre compte, placez ces fichiers dans le dossier public_html, puis faites: <br><br><pre> <code class="cpp hljs">make</code> </pre> <br>  Le fichier hello.cgi sera exécuté.  Si vous entrez l'adresse du fichier dans un navigateur, par exemple, comme ceci: <br><br><pre> <code class="cpp hljs">http:<span class="hljs-comment"><span class="hljs-comment">//your-test-site.com/hello.cgi</span></span></code> </pre> <br>  Remplacez ensuite your-test-site.com par votre nom de domaine ou URL d'hébergement.  «Hello World» devrait apparaître à l'écran. <br><br>  Avant de plonger dans le code lui-même, regardons comment il fonctionne sur un serveur Web.  Lorsque Apache accepte la demande, la première chose qu'il regarde est le gestionnaire interne ou la règle de réécriture, puis il recherche sur le disque le fichier correspondant à la demande.  Dans notre cas, il trouve hello.cgi et le récupère.  Notre programme n'accepte pas de saisie, mais affiche uniquement le message «Bonjour tout le monde».  Apache reçoit ensuite ces données et les renvoie à l'utilisateur. <br><br>  En parlant du code, il convient de mentionner qu'il pourrait être plus facile.  Il n'était pas nécessaire d'inclure des fonctions distinctes set_content_type, set_page_title et h1_text.  Il existe des aides simples qui maintiennent la propreté dans la fonction principale.  Tout cela peut simplement être amené à la fonction principale, et cela fonctionnera exactement de la même manière. <br><br>  Mais j'espère que vous voyez un avantage à mettre en évidence ces fonctionnalités.  Si vous aviez besoin de créer une fonction pour chaque élément HTML, vous pouvez utiliser ce code pour créer une réponse de réponse propre dans votre programme: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">p</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;p&gt;"</span></span> &lt;&lt; text &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;/p&gt;\n"</span></span>; }</code> </pre> <br>  Ensuite, utilisez quelque chose comme: <br><br><pre> <code class="cpp hljs">p(<span class="hljs-string"><span class="hljs-string">"This would be paragraph text."</span></span>);</code> </pre> <br>  Pour afficher un paragraphe. <br><br>  Vous pouvez même développer cette idée afin que les fonctions d'assistance comme p, h1_text, etc., renvoient du texte au lieu d'une sortie directe vers la sortie standard via cout.  Dans le même temps, vous pouvez créer un système de modèles ou imbriquer des réponses pour créer des pages complexes avec du code C ++ très rationalisé et efficace. <br><br>  Cet exemple est aussi simple que possible, il n'indique que les points principaux.  Vous avez un accès complet à chaque en-tête de réponse, vous donnant un contrôle complet sur la boucle de réponse. <br><br><h2>  En savoir plus sur l'entrée </h2><br>  Notre exemple n'accepte aucune entrée, il ne renvoie que «Hello World».  Mais Apache répond à chaque demande avec une énorme quantité d'informations via des variables d'environnement.  Vous pouvez utiliser la fonction getenv () dans la bibliothèque standard C pour obtenir leurs valeurs (n'oubliez pas d'ajouter #include &lt;stdlib.h&gt; au début du code). Par exemple, si vous aviez besoin de trouver l'URI complet de la demande, vous utiliseriez: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span> request_uri = getenv(<span class="hljs-string"><span class="hljs-string">"REQUEST_URI"</span></span>);</code> </pre> <br>  pour obtenir cette valeur.  Autres variables utiles: <br><br><ul><li>  REMOTE_ADDR - Obtention de l'adresse IP du visiteur </li><li>  REQUEST_METHOD - Retourne une méthode (c'est-à-dire GET, POST, etc.) </li><li>  DOCUMENT_ROOT - Route du site (généralement ~ / public_html sur les systèmes partagés ou / var / www / html sur les serveurs virtuels / dédiés). </li><li>  QUERY_STRING - Une chaîne de requête pour obtenir des variables GET. </li></ul><br><h2>  Exemple plus clair </h2><br>  Bien sûr, il est possible d'analyser les variables GET manuellement, et le traitement des variables POST peut être effectué en vérifiant l'entrée standard.  Vous pouvez même recevoir et définir des cookies en modifiant les en-têtes de demande et de réponse.  Mais les deux approches sont trop fastidieuses. <br><br>  Vous pouvez écrire vos propres shells ou utiliser la bibliothèque GNU cgicc prête à l'emploi.  Il contient des fonctions d'assistance pour modifier le HTML et traiter les formulaires.  En travaillant avec de grands projets, l'utilisation d'une telle bibliothèque gagnerait décemment du temps. <br><br>  Sur Debian et Ubuntu, vous pouvez installer la bibliothèque et les en-têtes en utilisant: <br><br><pre> <code class="cpp hljs">apt install libcgicc5 libcgicc5-dev</code> </pre> <br>  Mais CentOS / RHEL n'a pas ses propres packages.  Pour les installer, exécutez: <br><br><pre> <code class="cpp hljs">cd /usr/local/src wget ftp:<span class="hljs-comment"><span class="hljs-comment">//ftp.gnu.org/gnu/cgicc/cgicc-3.2.19.tar.gz tar xfz cgicc*.tar.gz cd cgicc* ./configure — prefix=/usr make make install</span></span></code> </pre> <br>  REMARQUE: 3.2.19 était la dernière version au moment de la rédaction, mais vous pouvez vérifier une copie plus récente sur <a href="" rel="nofollow">ftp.gnu.org/gnu/cgicc</a> .  J'ai également utilisé / usr comme préfixe pour éviter les problèmes de liaison des bibliothèques.  Si quoi que ce soit, changez-les calmement. <br><br>  Après avoir installé cgicc, vous pouvez le compiler.  Essayez cet exemple, qui prend la saisie d'un formulaire et l'affiche dans un navigateur: <br><br>  Makefile: <br><br><pre> <code class="cpp hljs">all: g++ -O3 -s hello.cpp -o hello.cgi g++ -O3 -s cgicc.cpp -o cgicc.cgi /usr/lib/libcgicc.a clean: rm -f hello.cgi cgicc.cgi</code> </pre> <br>  cgicc.html: <br><br><pre> <code class="cpp hljs">&lt;!doctype html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"en"</span></span>&gt; &lt;head&gt; &lt;title&gt;cgicc Test&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form method=<span class="hljs-string"><span class="hljs-string">"POST"</span></span> action=<span class="hljs-string"><span class="hljs-string">"cgicc.cgi"</span></span>&gt; &lt;label <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"name"</span></span>&gt;Name&lt;/label&gt; &lt;input name=<span class="hljs-string"><span class="hljs-string">"name"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text"</span></span> value=<span class="hljs-string"><span class="hljs-string">""</span></span>&gt; &lt;input name=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Submit"</span></span>&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  cgicc.cpp: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;cgicc/CgiDefs.h&gt; #include &lt;cgicc/Cgicc.h&gt; #include &lt;cgicc/HTTPHTMLHeader.h&gt; #include &lt;cgicc/HTMLClasses.h&gt; using namespace std; using namespace cgicc; void set_content_type(string content_type) { cout &lt;&lt; "Content-type: " &lt;&lt; content_type &lt;&lt; "\r\n\r\n"; } void set_page_title(string title) { cout &lt;&lt; "&lt;title&gt;" &lt;&lt; title &lt;&lt; "&lt;/title&gt;\n"; } void h1_text(string text) { cout &lt;&lt; text &lt;&lt; "\n"; } int main() { Cgicc cgi; string name; set_content_type("text/html"); cout &lt;&lt; "&lt;!doctype html&gt;\n"; cout &lt;&lt; "&lt;html lang=\"en\"&gt;\n"; cout &lt;&lt; "&lt;head&gt;\n"; set_page_title("cgicc Test"); cout &lt;&lt; "&lt;/head&gt;\n"; cout &lt;&lt; "&lt;body&gt;\n"; cout &lt;&lt; "&lt;p&gt;"; // Grab the "name" variable from the form name = cgi("name"); // Check to make sure it isn't empty. if (!name.empty()) { cout &lt;&lt; "Name is " &lt;&lt; name &lt;&lt; "\n"; } else { cout &lt;&lt; "Name was not provided."; } cout &lt;&lt; "&lt;/p&gt;\n"; cout &lt;&lt; "&lt;/body&gt;\n"; cout &lt;&lt; "&lt;/html&gt;"; return 0; }</span></span></span></span></code> </pre> <br>  Vous avez peut-être remarqué que j'ai lié statiquement la bibliothèque cgicc dans le Makefile.  Bien que cela ne soit pas nécessaire (vous pouvez le remplacer par -Icgicc), je préfère lier statiquement le code binaire que j'envoie au serveur afin que tout ce qui est nécessaire pour que le programme soit envoyé est envoyé sous forme d'ensemble. <br><br>  Dans cet exemple, la bibliothèque cgicc fait le travail acharné des variables POST et nous renvoie «nom». <br><br>  Je n'ai pas échappé à la variable d'entrée POST, mais elle est recommandée, surtout dans les lieux de production, surtout si vous interagissez avec la base de données. <br><br>  Ce n'est qu'une petite partie des possibilités de cgicc.  Vous pouvez <a href="https://www.gnu.org/software/cgicc/doc/index.html" rel="nofollow">lire la</a> documentation complète <a href="https://www.gnu.org/software/cgicc/doc/index.html" rel="nofollow">ici</a> . <br><br><h2>  Performance / performance </h2><br>  C ++ est incroyablement rapide pour travailler avec un bon code.  L'interface CGI ralentit un peu les choses, mais vous obtiendrez néanmoins une meilleure exécution que dans les langages interprétés comme PHP. <br>  Comme on dit, il y a toujours quelque chose à rechercher.  Dans un environnement spécialisé ou virtuel, vous pouvez utiliser la prise en charge FastCGI de Nginx ou Apache pour réduire le petit délai (et discret, si le serveur n'est pas lourdement chargé) au moment du chargement du programme.  Il n'y a eu aucun retard dans mes tests, mais pour travailler avec un site Web avec du trafic chargé, il sera utile d'étudier ces solutions pour une exécution / un travail encore plus rapide. <br><br><h2>  En option </h2><br>  Il serait facile d'envelopper un programme C ++ dans un conteneur Docker fin.  Cela vous offrira une grande flexibilité lors du placement d'un site.  Vous pouvez également accéder à la base de données MySQL en incluant les en-têtes de développement MySQL C / C ++ dans votre programme.  Si vous êtes familier avec MySQL avec PHP, vous remarquerez que les noms des variables sont très similaires. <br><br>  Au lieu de créer des processus de ligne de commande supplémentaires pour le traitement d'image, vous pouvez inclure des en-têtes ImageMagick C ++ pour traiter ces images directement dans votre programme <br><br><h2>  Quel long et étrange voyage </h2><br>  La création d'un site en C ++ est pratique, surtout si les performances sont importantes.  Je ne recommanderais pas cela pour un blog ou un site personnel - ils peuvent être facilement effectués sur WordPress.  Mais si vous avez un besoin urgent de vitesse et que vous souhaitez bien écrire sur des sentiers battus, pensez au C ++ pour votre prochain projet de niche sur le Web. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480208/">https://habr.com/ru/post/fr480208/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480194/index.html">Architecture de solution cloud. Nouveau cours d'OTUS</a></li>
<li><a href="../fr480196/index.html">Comment répondre à l'anarchie? Basé sur des événements avec Nginx</a></li>
<li><a href="../fr480200/index.html">Comment développer la conception et le code d'un site Web personnel</a></li>
<li><a href="../fr480204/index.html">Interruption de 30 minutes en faveur de l'auteur de Nginx - Igor Sysoev</a></li>
<li><a href="../fr480206/index.html">Nouvelles du monde d'OpenStreetMap n ° 489 (26/11/2019 - 02/12/2019)</a></li>
<li><a href="../fr480210/index.html">Habr Weekly # 31 / Rambler vs Nginx, Tinkoff a tout payé et «est tombé», taxe d'achat de plus de 20 €, refonte de Habr</a></li>
<li><a href="../fr480212/index.html">La société d’Igor Sysoev est plus chère que la société Rambler Group</a></li>
<li><a href="../fr480214/index.html">Convertir PNG en DDS au format DXT5 et visualiser les résultats à la volée en utilisant python</a></li>
<li><a href="../fr480216/index.html">Rubicon terminé: nginx</a></li>
<li><a href="../fr480218/index.html">Deuxième année Q #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>