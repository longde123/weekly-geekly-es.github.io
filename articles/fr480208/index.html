<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèø üëºüèø üò≥ Cr√©ation d'un site √† l'aide de C ++ üëµüèª üìÑ üë®üèº‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Est-ce possible? 
 Oui 

 Je sais que cela semble √©trange et ressemble plus √† un exercice sans valeur, mais ce n‚Äôest pas le cas. 
 Dans cet article, j...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©ation d'un site √† l'aide de C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480208/"><h2>  Est-ce possible? </h2><br>  Oui <br><br>  Je sais que cela semble √©trange et ressemble plus √† un exercice sans valeur, mais ce n‚Äôest pas le cas. <br>  Dans cet article, je vais vous expliquer comment vous pouvez utiliser C ++ dans le d√©veloppement de sites Web, et je donnerai quelques bonnes raisons √† cela. <br><br>  Ce sera non seulement int√©ressant, mais aussi utile et tr√®s pratique. <br><a name="habracut"></a><br><h2>  H√©bergement </h2><br>  Vous pensez probablement: une configuration aussi inhabituelle ne peut √™tre impl√©ment√©e que dans un environnement sp√©cialis√©.  Cependant, ce n'est g√©n√©ralement pas le cas.  Malgr√© le fait qu'un serveur sp√©cial r√©gulier ou virtuel soit une solution id√©ale pour de nombreux sites (pas seulement des sites C ++), dans la plupart des cas, vous pouvez utiliser C ++ sur des services d'h√©bergement partag√©. <br>  Tout h√©bergement Web qui prend en charge CGI (c'est-√†-dire, en principe, tout) pourra prendre en charge un site en C ++.  Selon le fournisseur, vous pouvez soit compiler votre site localement ou non, et vous aurez besoin du compilateur inclus dans votre compte.  V√©rifiez-les si vous pr√©voyez de modifier et de compiler via SSH directement sur le serveur Web. <br><br><h2>  Exemple simple </h2><br>  Dans les exemples ci-dessus, j'utilise le compte d'h√©bergement cPanel.  Ils sont abordables, peu co√ªteux et coh√©rents.  Mais vous pouvez facilement adapter ces m√©thodes √† un serveur virtuel ou d√©di√© ou √† une instance Amazon EC2 avec quelques modifications simples √† votre configuration Apache. <br><br>  cPanel nous fournit le dossier cgi-bin, mais nous n'en avons pas besoin.  Dans la plupart des cas, tout fichier portant l'extension .cgi sera automatiquement trait√© s'il dispose des autorisations appropri√©es (g√©n√©ralement 0755).  Voici les fichiers n√©cessaires (assurez-vous d'utiliser le TAB dans le Makefile) <br><br>  Makefile: <br><br><pre><code class="cpp hljs">all: g++ -O3 -s hello.cpp -o hello.cgi clean: rm -f hello.cgi</code> </pre> <br>  hello.cpp: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; #include &lt;stdlib.h&gt; using namespace std; void set_content_type(string content_type) { cout &lt;&lt; "Content-type: " &lt;&lt; content_type &lt;&lt; "\r\n\r\n"; } void set_page_title(string title) { cout &lt;&lt; "&lt;title&gt;" &lt;&lt; title &lt;&lt; "&lt;/title&gt;\n"; } void h1_text(string text) { cout &lt;&lt; text &lt;&lt; "\n"; } int main() { set_content_type("text/html"); // Output HTML boilerplate cout &lt;&lt; "&lt;!doctype html&gt;\n"; cout &lt;&lt; "&lt;html lang=\"en\"&gt;\n"; cout &lt;&lt; "&lt;head&gt;\n"; set_page_title("Hello, World!"); cout &lt;&lt; "&lt;/head&gt;\n"; cout &lt;&lt; "&lt;body&gt;\n"; h1_text("Hello, World!"); cout &lt;&lt; "&lt;/body&gt;\n"; cout &lt;&lt; "&lt;/html&gt;"; return 0; }</span></span></span></span></code> </pre> <br>  Si vous avez des compilateurs inclus dans votre compte (vous devrez peut-√™tre demander √† l'√©quipe d'assistance pour votre h√©bergement Web), utilisez simplement SSH dans votre compte, placez ces fichiers dans le dossier public_html, puis faites: <br><br><pre> <code class="cpp hljs">make</code> </pre> <br>  Le fichier hello.cgi sera ex√©cut√©.  Si vous entrez l'adresse du fichier dans un navigateur, par exemple, comme ceci: <br><br><pre> <code class="cpp hljs">http:<span class="hljs-comment"><span class="hljs-comment">//your-test-site.com/hello.cgi</span></span></code> </pre> <br>  Remplacez ensuite your-test-site.com par votre nom de domaine ou URL d'h√©bergement.  ¬´Hello World¬ª devrait appara√Ætre √† l'√©cran. <br><br>  Avant de plonger dans le code lui-m√™me, regardons comment il fonctionne sur un serveur Web.  Lorsque Apache accepte la demande, la premi√®re chose qu'il regarde est le gestionnaire interne ou la r√®gle de r√©√©criture, puis il recherche sur le disque le fichier correspondant √† la demande.  Dans notre cas, il trouve hello.cgi et le r√©cup√®re.  Notre programme n'accepte pas de saisie, mais affiche uniquement le message ¬´Bonjour tout le monde¬ª.  Apache re√ßoit ensuite ces donn√©es et les renvoie √† l'utilisateur. <br><br>  En parlant du code, il convient de mentionner qu'il pourrait √™tre plus facile.  Il n'√©tait pas n√©cessaire d'inclure des fonctions distinctes set_content_type, set_page_title et h1_text.  Il existe des aides simples qui maintiennent la propret√© dans la fonction principale.  Tout cela peut simplement √™tre amen√© √† la fonction principale, et cela fonctionnera exactement de la m√™me mani√®re. <br><br>  Mais j'esp√®re que vous voyez un avantage √† mettre en √©vidence ces fonctionnalit√©s.  Si vous aviez besoin de cr√©er une fonction pour chaque √©l√©ment HTML, vous pouvez utiliser ce code pour cr√©er une r√©ponse de r√©ponse propre dans votre programme: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">p</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;p&gt;"</span></span> &lt;&lt; text &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;/p&gt;\n"</span></span>; }</code> </pre> <br>  Ensuite, utilisez quelque chose comme: <br><br><pre> <code class="cpp hljs">p(<span class="hljs-string"><span class="hljs-string">"This would be paragraph text."</span></span>);</code> </pre> <br>  Pour afficher un paragraphe. <br><br>  Vous pouvez m√™me d√©velopper cette id√©e afin que les fonctions d'assistance comme p, h1_text, etc., renvoient du texte au lieu d'une sortie directe vers la sortie standard via cout.  Dans le m√™me temps, vous pouvez cr√©er un syst√®me de mod√®les ou imbriquer des r√©ponses pour cr√©er des pages complexes avec du code C ++ tr√®s rationalis√© et efficace. <br><br>  Cet exemple est aussi simple que possible, il n'indique que les points principaux.  Vous avez un acc√®s complet √† chaque en-t√™te de r√©ponse, vous donnant un contr√¥le complet sur la boucle de r√©ponse. <br><br><h2>  En savoir plus sur l'entr√©e </h2><br>  Notre exemple n'accepte aucune entr√©e, il ne renvoie que ¬´Hello World¬ª.  Mais Apache r√©pond √† chaque demande avec une √©norme quantit√© d'informations via des variables d'environnement.  Vous pouvez utiliser la fonction getenv () dans la biblioth√®que standard C pour obtenir leurs valeurs (n'oubliez pas d'ajouter #include &lt;stdlib.h&gt; au d√©but du code). Par exemple, si vous aviez besoin de trouver l'URI complet de la demande, vous utiliseriez: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span> request_uri = getenv(<span class="hljs-string"><span class="hljs-string">"REQUEST_URI"</span></span>);</code> </pre> <br>  pour obtenir cette valeur.  Autres variables utiles: <br><br><ul><li>  REMOTE_ADDR - Obtention de l'adresse IP du visiteur </li><li>  REQUEST_METHOD - Retourne une m√©thode (c'est-√†-dire GET, POST, etc.) </li><li>  DOCUMENT_ROOT - Route du site (g√©n√©ralement ~ / public_html sur les syst√®mes partag√©s ou / var / www / html sur les serveurs virtuels / d√©di√©s). </li><li>  QUERY_STRING - Une cha√Æne de requ√™te pour obtenir des variables GET. </li></ul><br><h2>  Exemple plus clair </h2><br>  Bien s√ªr, il est possible d'analyser les variables GET manuellement, et le traitement des variables POST peut √™tre effectu√© en v√©rifiant l'entr√©e standard.  Vous pouvez m√™me recevoir et d√©finir des cookies en modifiant les en-t√™tes de demande et de r√©ponse.  Mais les deux approches sont trop fastidieuses. <br><br>  Vous pouvez √©crire vos propres shells ou utiliser la biblioth√®que GNU cgicc pr√™te √† l'emploi.  Il contient des fonctions d'assistance pour modifier le HTML et traiter les formulaires.  En travaillant avec de grands projets, l'utilisation d'une telle biblioth√®que gagnerait d√©cemment du temps. <br><br>  Sur Debian et Ubuntu, vous pouvez installer la biblioth√®que et les en-t√™tes en utilisant: <br><br><pre> <code class="cpp hljs">apt install libcgicc5 libcgicc5-dev</code> </pre> <br>  Mais CentOS / RHEL n'a pas ses propres packages.  Pour les installer, ex√©cutez: <br><br><pre> <code class="cpp hljs">cd /usr/local/src wget ftp:<span class="hljs-comment"><span class="hljs-comment">//ftp.gnu.org/gnu/cgicc/cgicc-3.2.19.tar.gz tar xfz cgicc*.tar.gz cd cgicc* ./configure ‚Äî prefix=/usr make make install</span></span></code> </pre> <br>  REMARQUE: 3.2.19 √©tait la derni√®re version au moment de la r√©daction, mais vous pouvez v√©rifier une copie plus r√©cente sur <a href="" rel="nofollow">ftp.gnu.org/gnu/cgicc</a> .  J'ai √©galement utilis√© / usr comme pr√©fixe pour √©viter les probl√®mes de liaison des biblioth√®ques.  Si quoi que ce soit, changez-les calmement. <br><br>  Apr√®s avoir install√© cgicc, vous pouvez le compiler.  Essayez cet exemple, qui prend la saisie d'un formulaire et l'affiche dans un navigateur: <br><br>  Makefile: <br><br><pre> <code class="cpp hljs">all: g++ -O3 -s hello.cpp -o hello.cgi g++ -O3 -s cgicc.cpp -o cgicc.cgi /usr/lib/libcgicc.a clean: rm -f hello.cgi cgicc.cgi</code> </pre> <br>  cgicc.html: <br><br><pre> <code class="cpp hljs">&lt;!doctype html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"en"</span></span>&gt; &lt;head&gt; &lt;title&gt;cgicc Test&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form method=<span class="hljs-string"><span class="hljs-string">"POST"</span></span> action=<span class="hljs-string"><span class="hljs-string">"cgicc.cgi"</span></span>&gt; &lt;label <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"name"</span></span>&gt;Name&lt;/label&gt; &lt;input name=<span class="hljs-string"><span class="hljs-string">"name"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text"</span></span> value=<span class="hljs-string"><span class="hljs-string">""</span></span>&gt; &lt;input name=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Submit"</span></span>&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  cgicc.cpp: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;cgicc/CgiDefs.h&gt; #include &lt;cgicc/Cgicc.h&gt; #include &lt;cgicc/HTTPHTMLHeader.h&gt; #include &lt;cgicc/HTMLClasses.h&gt; using namespace std; using namespace cgicc; void set_content_type(string content_type) { cout &lt;&lt; "Content-type: " &lt;&lt; content_type &lt;&lt; "\r\n\r\n"; } void set_page_title(string title) { cout &lt;&lt; "&lt;title&gt;" &lt;&lt; title &lt;&lt; "&lt;/title&gt;\n"; } void h1_text(string text) { cout &lt;&lt; text &lt;&lt; "\n"; } int main() { Cgicc cgi; string name; set_content_type("text/html"); cout &lt;&lt; "&lt;!doctype html&gt;\n"; cout &lt;&lt; "&lt;html lang=\"en\"&gt;\n"; cout &lt;&lt; "&lt;head&gt;\n"; set_page_title("cgicc Test"); cout &lt;&lt; "&lt;/head&gt;\n"; cout &lt;&lt; "&lt;body&gt;\n"; cout &lt;&lt; "&lt;p&gt;"; // Grab the "name" variable from the form name = cgi("name"); // Check to make sure it isn't empty. if (!name.empty()) { cout &lt;&lt; "Name is " &lt;&lt; name &lt;&lt; "\n"; } else { cout &lt;&lt; "Name was not provided."; } cout &lt;&lt; "&lt;/p&gt;\n"; cout &lt;&lt; "&lt;/body&gt;\n"; cout &lt;&lt; "&lt;/html&gt;"; return 0; }</span></span></span></span></code> </pre> <br>  Vous avez peut-√™tre remarqu√© que j'ai li√© statiquement la biblioth√®que cgicc dans le Makefile.  Bien que cela ne soit pas n√©cessaire (vous pouvez le remplacer par -Icgicc), je pr√©f√®re lier statiquement le code binaire que j'envoie au serveur afin que tout ce qui est n√©cessaire pour que le programme soit envoy√© est envoy√© sous forme d'ensemble. <br><br>  Dans cet exemple, la biblioth√®que cgicc fait le travail acharn√© des variables POST et nous renvoie ¬´nom¬ª. <br><br>  Je n'ai pas √©chapp√© √† la variable d'entr√©e POST, mais elle est recommand√©e, surtout dans les lieux de production, surtout si vous interagissez avec la base de donn√©es. <br><br>  Ce n'est qu'une petite partie des possibilit√©s de cgicc.  Vous pouvez <a href="https://www.gnu.org/software/cgicc/doc/index.html" rel="nofollow">lire la</a> documentation compl√®te <a href="https://www.gnu.org/software/cgicc/doc/index.html" rel="nofollow">ici</a> . <br><br><h2>  Performance / performance </h2><br>  C ++ est incroyablement rapide pour travailler avec un bon code.  L'interface CGI ralentit un peu les choses, mais vous obtiendrez n√©anmoins une meilleure ex√©cution que dans les langages interpr√©t√©s comme PHP. <br>  Comme on dit, il y a toujours quelque chose √† rechercher.  Dans un environnement sp√©cialis√© ou virtuel, vous pouvez utiliser la prise en charge FastCGI de Nginx ou Apache pour r√©duire le petit d√©lai (et discret, si le serveur n'est pas lourdement charg√©) au moment du chargement du programme.  Il n'y a eu aucun retard dans mes tests, mais pour travailler avec un site Web avec du trafic charg√©, il sera utile d'√©tudier ces solutions pour une ex√©cution / un travail encore plus rapide. <br><br><h2>  En option </h2><br>  Il serait facile d'envelopper un programme C ++ dans un conteneur Docker fin.  Cela vous offrira une grande flexibilit√© lors du placement d'un site.  Vous pouvez √©galement acc√©der √† la base de donn√©es MySQL en incluant les en-t√™tes de d√©veloppement MySQL C / C ++ dans votre programme.  Si vous √™tes familier avec MySQL avec PHP, vous remarquerez que les noms des variables sont tr√®s similaires. <br><br>  Au lieu de cr√©er des processus de ligne de commande suppl√©mentaires pour le traitement d'image, vous pouvez inclure des en-t√™tes ImageMagick C ++ pour traiter ces images directement dans votre programme <br><br><h2>  Quel long et √©trange voyage </h2><br>  La cr√©ation d'un site en C ++ est pratique, surtout si les performances sont importantes.  Je ne recommanderais pas cela pour un blog ou un site personnel - ils peuvent √™tre facilement effectu√©s sur WordPress.  Mais si vous avez un besoin urgent de vitesse et que vous souhaitez bien √©crire sur des sentiers battus, pensez au C ++ pour votre prochain projet de niche sur le Web. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480208/">https://habr.com/ru/post/fr480208/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480194/index.html">Architecture de solution cloud. Nouveau cours d'OTUS</a></li>
<li><a href="../fr480196/index.html">Comment r√©pondre √† l'anarchie? Bas√© sur des √©v√©nements avec Nginx</a></li>
<li><a href="../fr480200/index.html">Comment d√©velopper la conception et le code d'un site Web personnel</a></li>
<li><a href="../fr480204/index.html">Interruption de 30 minutes en faveur de l'auteur de Nginx - Igor Sysoev</a></li>
<li><a href="../fr480206/index.html">Nouvelles du monde d'OpenStreetMap n ¬∞ 489 (26/11/2019 - 02/12/2019)</a></li>
<li><a href="../fr480210/index.html">Habr Weekly # 31 / Rambler vs Nginx, Tinkoff a tout pay√© et ¬´est tomb√©¬ª, taxe d'achat de plus de 20 ‚Ç¨, refonte de Habr</a></li>
<li><a href="../fr480212/index.html">La soci√©t√© d‚ÄôIgor Sysoev est plus ch√®re que la soci√©t√© Rambler Group</a></li>
<li><a href="../fr480214/index.html">Convertir PNG en DDS au format DXT5 et visualiser les r√©sultats √† la vol√©e en utilisant python</a></li>
<li><a href="../fr480216/index.html">Rubicon termin√©: nginx</a></li>
<li><a href="../fr480218/index.html">Deuxi√®me ann√©e Q #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>