<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👵🏿 👩🏾‍🤝‍👨🏽 👩‍⚖️ Stasiun cuaca hiking portabel MiniBTH2 / 2M 👨‍👧‍👧 👨‍👨‍👧 👨🏻‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di artikel sebelumnyaSejarah penciptaan dan pengalaman menggunakan stasiun cuaca lapangan miniBTH dijelaskan. Instrumen ini mengukur dan terus-menerus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Stasiun cuaca hiking portabel MiniBTH2 / 2M</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384641/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">artikel</font></a><font style="vertical-align: inherit;"> sebelumnya</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sejarah penciptaan dan pengalaman menggunakan stasiun cuaca lapangan miniBTH dijelaskan. Instrumen ini mengukur dan terus-menerus ditampilkan di layar dalam bentuk grafik tekanan atmosfer saat ini, suhu dan kelembaban. Semua parameter yang diukur disimpan ke kartu memori satu menit sekali. Selain itu, perangkat ini memiliki sensor cahaya, dan data dari sensor tekanan dapat dikonversi ke ketinggian barometrik. Berkat penggunaan layar transflektif, pembacaan perangkat mudah dibaca bahkan di bawah sinar matahari yang cerah, dan casing perangkat ketat. Pengalaman menggunakan perangkat ini ternyata umumnya positif, tetapi sejumlah kekurangan diidentifikasi yang diperiksa secara rinci dalam artikel sebelumnya, yang utama adalah banyak bobot. Dalam artikel ini kami akan mempertimbangkan pengalaman pembuatan dan pengoperasian versi kedua, yang lebih nyaman dan fungsional. Catatanbahwa pada saat penulisan artikel terakhir, versi kedua perangkat ini sudah dalam tingkat kesiapan yang tinggi, oleh karena itu cara utama untuk mengatasi kekurangan tersebut diuraikan di sana.</font></font><br>
<br>
<img src="https://habrastorage.org/files/e32/be3/80f/e32be380f9124532be2521ebdd13cd1a.jpg"><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desain perangkat baru dan pengurangan berat badan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stasiun cuaca MiniBTH pertama disusun sebagai perangkat mandiri, yang dirancang terutama untuk digunakan pada kenaikan. </font><font style="vertical-align: inherit;">Itulah sebabnya case instrumen dibuat kedap udara, layar transflektif digunakan, dan kapasitas baterai dihitung selama lebih dari sebulan operasi. </font><font style="vertical-align: inherit;">Kelemahan utama dari versi pertama, menurut pendapat saya, adalah banyak berat, jadi saya memutuskan untuk membuat versi kedua yang kompak dan seringan mungkin. </font><font style="vertical-align: inherit;">Untuk melakukan ini, Anda perlu memisahkan papan perangkat dari ukuran sekecil mungkin: sedikit lebih besar dari layar, dan membuat casing setipis dan berdinding mungkin. </font><font style="vertical-align: inherit;">Bagian elektronik dan perangkat lunak akan dibahas nanti, tetapi untuk sekarang kita beralih ke desain perumahan versi kedua perangkat. </font><font style="vertical-align: inherit;">Gagasan utama untuk mengurangi ukuran kasing adalah sebagai berikut:</font></font><br>
<br>
<ul>
<li>  ,       ,     .</li>
<li>    ,        .</li>
<li>    .             ,     .</li>
<li>      .</li>
<li>        .</li>
<li>    «»     .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasilnya, adalah mungkin untuk merekonsiliasi ide-ide yang diusulkan satu sama lain dan membuat casing yang cukup kompak yang terbuat dari capralon dari desain berikut: </font></font><br>
<br>
<img src="https://habrastorage.org/files/731/687/dbc/731687dbc17646cd8c8dcb8fdd33b792.jpg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blok sensor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seharusnya dapat dilepas, terpasang pada case dengan dua sekrup, dan kekenyaman docking dari blok sensor dan housing dipastikan dengan gasket annular yang dilewati oleh kabel. Set sensor digunakan sama seperti pada versi pertama perangkat - sensor tekanan MS5803 dan sensor kelembaban sht21. Unit sensor itu sendiri direkatkan dengan sealant dari dua tutup kapralon. Di antara mereka ada papan tempat sensor dipasang. Papan terbuat dari fiberglass setebal 0,75mm. Selama perakitan unit, untuk melindungi sensor kelembaban dari uap yang dikeluarkan oleh sealant, jendelanya ditutup dengan pita perekat Kapton (seperti yang direkomendasikan dalam dokumentasi).</font></font><br>
<br>
<img src="https://habrastorage.org/files/384/7c1/3e8/3847c13e8c024fb8afe48c6f04e9d792.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desain unit sensor memperhitungkan kekurangan yang diidentifikasi selama pengoperasian versi pertama perangkat. Sensor kelembaban tidak ditutupi dengan topi mesh SF2, tetapi hanya ditempatkan di ceruk unit. Ini memecahkan masalah membasahi tutup, yang mengarah pada "lengket" lama dari pembacaan kelembaban pada tanda maksimum, dan pada saat yang sama, lokasi di ceruk dengan sisi sensitif pada tubuh menghilangkan kerusakan oleh benda-benda eksternal. Penonjolan tambahan disediakan pada blok sensor perangkat versi 2M untuk melindungi sensor kelembaban dari kerusakan oleh benda yang panjang dan tipis. Masalah melindungi sensor tekanan MS5803 dari sinar matahari langsung juga diselesaikan pada tahap desain perangkat. Bagian sensitif dari sensor ditutupi dengan topi yang terbuat dari polystyrene hitam yang direkatkan ke dalam reses di rumahan.Karena sensor peka terhadap iluminasi dari sisi sebaliknya juga, metalisasi ditinggalkan di papan di lokasi pemasangan di sisi yang berlawanan.</font></font><br>
<br>
<img src="https://habrastorage.org/files/cd1/a43/644/cd1a4364424f48fc9f04ed2fb7bfd4d4.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Udara diakses ke sensor tekanan melalui saluran tipis (0,5mm) antara rumah instrumen dan blok sensor. Perhatikan bahwa ketika memilih desain blok sensor ini, ada kekhawatiran bahwa dalam air hujan akan mengalir ke celah tipis antara blok sensor dan badan perangkat dan sepenuhnya memblokir saluran akses udara langsung ke sensor tekanan, yang akan menyebabkan kesalahan sistematis dalam pembacaan tekanan karena tegangan permukaan air. Pengujian perangkat dalam hujan dan di kamar mandi menunjukkan bahwa karena kapralon tidak dapat dibasahi, tidak ada kebocoran terjadi pada ketebalan saluran 0,5 mm. Eksperimen yang lebih teliti telah menunjukkan bahwa jika blok sensor dipasang dengan kecenderungan dan dengan demikian ketebalan saluran berkurang hingga ujung blok sensor menyentuh rumahan, air mungkin bocor ke rumahan instrumen,dan menyebabkan penurunan pembacaan tekanan sekitar 0,7 mm Hg. Jika unit sensor dipasang secara merata, air tidak bocor.</font></font><br>
<br>
<b>   </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada pandangan pertama, sedikit yang berubah secara eksternal, tetapi dalam desainnya sejumlah solusi teknis baru harus diterapkan. Di satu sisi, mengurangi jumlah sekrup penjepit dan meningkatkan jarak di antara mereka membutuhkan bingkai penjepit yang lebih kaku dan / atau gasket yang lebih lunak untuk memastikan kompresi gasket di sepanjang panjangnya. Di sisi lain, untuk alasan kenyamanan menggunakan perangkat, diputuskan untuk membuat plastik klem, dan ini, sebaliknya, akan mengurangi kekakuannya. Cara yang mungkin untuk menyelesaikan kontradiksi ini adalah dengan menggunakan bantalan karet yang lebih lembut. Opsi ini lebih masuk akal daripada mencoba menempatkan "kruk" dalam bentuk memasukkan sisipan logam kaku atau elemen elastis ke dalam struktur rangka penjepit dan menggunakan pita keras yang sama dari tape recorder sebagai segel.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah pencarian singkat di Internet, solusinya ditemukan bagaimana membuat gasket karet sendiri. Ada silikon dua komponen khusus yang digunakan untuk pembuatan cetakan dan gasket. Teknologi untuk bekerja dengan silikon ini secara singkat terlihat sebagai berikut: dua komponen cair harus dicampur bersama, setelah itu mereka tuangkan ke dalam cetakan selama beberapa menit dan tunggu sampai komposisi mengeras. Setelah pengerasan, karet silikon yang sangat fleksibel dan lunak diperoleh, yang dengan mudah memisahkan dari bentuk di mana ia mengeras. Ada seluruh garis silikon seperti itu dari pabrikan yang berbeda, mereka berbeda di antara mereka sendiri dengan jenis katalis pengeras yang digunakan dan sifat fisika dan kimia dari karet yang dihasilkan. Semua silikon memiliki perpanjangan putus sama dengan ratusan persen,relatif lunak, dapat bekerja pada suhu hingga 200 derajat Celcius, dan relatif tahan bahan kimia. Silikon dengan katalis platinum secara kimiawi lebih stabil dan memiliki toleransi terhadap makanan. Salah satu aplikasi khas silikon seperti itu adalah pembuatan cetakan untuk pengecoran dari gipsum, semen, sabun, atau bahkan cokelat. Aplikasi khas kedua adalah pembuatan gasket.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang pembuatan gasket karet silikon</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di kotanya, ia menemukan pemasok yang menawarkan seluruh lini silikon dengan katalis timah Sk-76x, dan silikon platinum Sk-790. </font><font style="vertical-align: inherit;">Untuk percobaan, saya membeli dua set - silikon katalis platinum Sk-790 dan silikon lembut Sk-762, dan mulai bereksperimen dengan casting.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus saya, membuat cetakan untuk casting tidak masalah, saya hanya menggiling alur bentuk yang diinginkan dalam selembar polymethyl acrylate. Pada awalnya itu seharusnya menuangkan silikon ke dalam cetakan dan menutupinya di atas dengan lembaran datar kedua gelas organik, memeras kelebihan silikon. Namun, ternyata semuanya tidak begitu sederhana, dan saya sedikit mengubah teknologinya. Masalah utama dalam casting silikon adalah gelembung udara. Mereka terbentuk baik ketika mencampur komponen awal dan ketika komposisi dituangkan ke dalam cetakan. Salah satu metode untuk mengendalikan gelembung, yang direkomendasikan oleh pabrikan, adalah menempatkan silikon yang disiapkan untuk dituang dalam ruang hampa selama beberapa menit sebelum dituangkan. Dalam ruang hampa, semua gelembung membengkak dan pecah, dan semua udara keluar dari mereka. Secara lahiriah, susu ini samar-samar mengingatkan kita pada pelarian. Untuk melawan gelembungmuncul selama menuangkan, Anda dapat mengucapkan komposisi setelah menuangkan. Namun, saya memutuskan untuk tidak memaksa rekan-rekan saya yang memiliki ruang vakum, dan mencari cara yang lebih mudah untuk membuat cetakan bebas gelembung. Ini ternyata tidak terlalu sulit, karena semua gelembung yang terbentuk selama pencampuran dan penuangan cukup besar. Rupanya, viskositas silikon mencegah pembentukan gelembung kecil selama penangkapan udara atau dengan menghancurkan gelembung besar. Karena itu, gelembung-gelembung itu cukup terlihat jelas dengan mata, dan bahkan berhasil melayang beberapa milimeter hingga pengerasan silikon. Oleh karena itu, teknologi penuangan seharusnya sebagai berikut: silikon diterapkan dengan kelebihan di sepanjang alur dalam cetakan, dan setelah beberapa menit kelebihan silikon, bersama dengan semua gelembung, dihilangkan dengan spatula logam. Jika gelembung menempel pada dinding cetakan,dapat dihapus menggunakan skapula yang sama. Permukaan atas fill menjadi halus karena aksi tegangan permukaan dan gravitasi. Yang utama adalah untuk menghapus secara merata silikon berlebih dari bagian atas cetakan. Tetapi jika Anda menutup casting dengan penutup, ada risiko besar mendorong gelembung udara ke cetakan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, masalah pembuatan gasket dalam bentuk apa pun diselesaikan, yang memungkinkan untuk memilih opsi desain yang mudah untuk sampul depan. Dilema terpisah adalah pemilihan bahan untuk bagian tutup yang transparan. Ada dua jenis bahan transparan yang tersedia untuk saya. Salah satunya adalah polikarbonat yang kental dan fleksibel, yang, bagaimanapun, tidak sangat tahan terhadap tekanan mekanik dan tidak terlalu transparan, tetapi memiliki warna kebiruan. Yang kedua adalah polimetil akrilat transparan tapi rapuh. Terlepas dari kenyataan bahwa polycarbonate digunakan dalam versi pertama perangkat, pada kedua saya memutuskan untuk menggunakan polymethyl acrylate. Di satu sisi, itu lebih transparan, yang meningkatkan keterbacaan layar di bawah cahaya yang tersebar terang, di sisi lain, itu memperkenalkan lebih sedikit penyimpangan dalam pembacaan sensor cahaya. Selain itu, kurang tergores dalam kondisi operasi yang sama.Untuk mengurangi kemungkinan retak akrilat selama benturan frontal dan meningkatkan penampilan perangkat, penutup transparan dibuat tebal (5mm), dan kerangka tekanan dipasang pada langkan giling khusus. Penutup atas desain ini ternyata cukup kaku, dan dapat digunakan baik dengan gasket silikon lembut Sk-762 dan dengan yang lebih kaku dari Sk-790. Pada akhirnya, saya memutuskan untuk memilih silikon 790, karena menggunakan katalis platinum dan secara kimia lebih lembam.dan dapat digunakan baik dengan gasket silikon lembut Sk-762 dan dengan yang lebih kaku dari Sk-790. Pada akhirnya, saya memutuskan untuk memilih silikon 790, karena menggunakan katalis platinum dan secara kimia lebih lembam.dan dapat digunakan baik dengan gasket silikon lembut Sk-762 dan dengan yang lebih kaku dari Sk-790. Pada akhirnya, saya memutuskan untuk memilih silikon 790, karena menggunakan katalis platinum dan secara kimia lebih lembam.</font></font><br>
<br>
<img src="https://habrastorage.org/files/a20/604/278/a20604278d4c4e50be78f51b7eecde27.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemampuan untuk melemparkan gasket dalam bentuk apa pun memungkinkan untuk membuat lubang palka untuk akses cepat ke SD, yang diimplementasikan dalam versi 2M perangkat. Akhirnya, ide untuk membuat palka terbentuk agak terlambat, ketika perangkat versi 2 dirakit dan diproduksi. Membuat palka bertumpu pada tiga masalah - bagaimana cara menutupnya, di mana menempatkannya, dan bagaimana cara memperbaikinya. Masalah pertama diselesaikan dengan membuat paking dari bentuk yang diinginkan. Masalah kedua juga terpecahkan, karena di ceruk di sisi bawah ada tempat gratis di mana nyaman untuk menyembunyikan tutup yang menonjol keluar. Saya memecahkan masalah ketiga dengan cara paling sederhana menurut saya - palka diperbaiki dengan sekrup. Di satu sisi, Anda tidak akan membuka tanpa kunci, tetapi secara kebetulan itu juga tidak akan terbuka. Dan pada gadget bersegel serial, penutupnya juga sering diperbaiki dengan sekrup.</font></font><br>
<br>
<img src="https://habrastorage.org/files/9b1/576/58d/9b157658d7de432cae6814881aee559d.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Palka itu sendiri terletak di bagian bawah perumahan, dan merupakan lubang yang digiling melalui bentuk lonjong, dengan langkah berbentuk T di bagian, di mana paking dikerutkan. Di luar, paking ditekan oleh penutup datar, yang dipasang ke kasing dengan dua sekrup M3x5. Ketebalan dinding bawah kasing adalah 5 mm, kedalaman langkan 2 mm, ketebalan paking tidak terkompresi adalah 2,5 mm, dan ketebalan penutup 2 mm. Lubang-lubang di mana sekrup tidak dilewati, mereka disembunyikan ke dalam tubuh sebesar 3,9 mm, benang di dalamnya dipotong hampir ke seluruh kedalaman. Threading tidak dimungkinkan pada mesin CNC yang tersedia bagi saya, jadi itu dilakukan dengan menggunakan tiga ketukan khusus dan obeng.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rumah yang telah selesai diuji untuk sesak dengan perendaman dalam air selama 12 jam. </font><font style="vertical-align: inherit;">Kertas saring digunakan untuk mendeteksi kemungkinan kebocoran. </font><font style="vertical-align: inherit;">Penutupnya kedap udara. </font><font style="vertical-align: inherit;">Untuk mencegah kondensasi air di dalam kasing pada suhu rendah, tas kain dengan gel silika ditempatkan dalam volume bebas di dekat baterai. </font><font style="vertical-align: inherit;">Tes dan operasi lebih lanjut menunjukkan bahwa kondensasi di perumahan tidak terbentuk.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang pengembangan bagian elektronik</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagian elektronik dari versi kedua perangkat dalam hal solusi yang digunakan sangat mirip dengan versi pertama. </font><font style="vertical-align: inherit;">Mikrokontroler ATmega1284p yang beroperasi pada frekuensi 8 MHz digunakan sebagai prosesor utama.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/878/13e/3f3/87813e3f3d8147a382fab117e5e6892e.gif"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua sensor DS1337 dan jam real-time terhubung dengannya melalui bus I2C. Sinyal tambahan dengan frekuensi 1 Hz terhubung ke input terpisah dari mikrokontroler prosesor. Ini memungkinkan Anda untuk menggunakan mode tidur dengan jam utama berhenti untuk efisiensi energi yang lebih baik. Baterai diisi menggunakan pengontrol max1879 dengan kunci eksternal, tetapi sekarang terhubung langsung ke pengisi daya melalui kelenjar tekanan. Untuk menunjukkan arus muatan, rangkaian pengukuran arus diperkenalkan pada penguat operasional TS321, yang benar-benar mirip dengan yang digunakan dalam versi pertama perangkat. Layar dan kartu SD terhubung ke pengontrol melalui bus SPI yang sama, namun sekarang sirkuit menyediakan kemampuan untuk mematikan daya kartu SD saat sedang tidak digunakan.Tombol sentuh pada pendeteksi fase mirip dengan yang digunakan pada versi pertama perangkat.</font></font><br>
<br>
<img src="https://habrastorage.org/files/41f/896/8f1/41f8968f1a724007bedfe025b6226a3b.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelat tombol sentuh ditempatkan pada panel samping perangkat, dan penggilingan dilakukan di atasnya untuk memudahkan pencarian buta. </font><font style="vertical-align: inherit;">Masih ada tiga tombol, yang atas secara konvensional disebut "Input", yang di tengah adalah "-", dan yang lebih rendah adalah "+". </font><font style="vertical-align: inherit;">Hampir semua detail perangkat dapat ditempatkan pada papan berukuran 59x41mm dengan tepi bulat. </font><font style="vertical-align: inherit;">Hanya sapressor pelindung dan kumparan L2-L3 yang dipasang langsung pada sekrup - lubang masuk hermetis. </font></font><br>
<br>
<img src="https://habrastorage.org/files/80b/bdc/33b/80bbdc33b7ca4ce981616b24365ab203.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sensor cahaya ditempatkan pada papan tipis terpisah yang terletak di atas layar. </font><font style="vertical-align: inherit;">Ukuran papan dipilih sehingga saat dipasang, display menutupi hampir seluruh bagian depan papan. </font></font><br>
<br>
<img src="https://habrastorage.org/files/93b/09a/1e9/93b09a1e932c40498eb7ad209d50f24e.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memberikan tampilan yang lebih estetis pada perangkat, overlay dekoratif dibuat untuk segala sesuatu kecuali bagian layar dan sensor cahaya yang berfungsi.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang antarmuka perangkat dan pengembangan perangkat lunak</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama, perlu dicatat bahwa konsep versi kedua perangkat dipindahkan dari Arduino ke AVR Studio. Ini dilakukan karena tidak ada manfaat nyata dari Arduino kecuali untuk firmware cepat melalui bootloader dan UART, tetapi ada masalah dengan pengawas, penghematan daya dan beberapa hal kecil. Situasi ini diperparah oleh kenyataan bahwa tidak ada platform Arduino standar pada ATmega1284p, jadi ada pilihan - baik menyelesaikan Arduino IDE dan bootloader, atau mentransfer proyek ke AVR Studio. Agar tidak terlalu mengganggu pekerjaan perpustakaan SDFATlib yang digunakan, saya meninggalkan bagian arduino core dalam proyek yang terkait dengan inisialisasi, bekerja dengan timer dan jalur input / output. Namun, saya harus membuat perubahan pada perpustakaan SDFATlib, dan ini disebabkan oleh perubahan dalam polaritas sinyal SCK saat menggunakan sirkuit pemutus kartu SD.Ngomong-ngomong, SDFATlib dapat bekerja baik dengan perpustakaan SPI yang diwarisi dari arduino dan dengan miliknya sendiri. Dalam proyek saya, SDFATlib dikonfigurasi untuk bekerja dengan SPI melalui pustaka sendiri untuk AVR (omong-omong, ini adalah konfigurasi standarnya, meskipun dimungkinkan untuk bekerja melalui pustaka Arduino).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbedaan penting antara versi kedua perangkat ini adalah penghematan energi. Karena layar warna yang disertakan mengkonsumsi sekitar 3mA dalam mode aktif, cara utama untuk menghemat energi adalah menempatkan layar ke mode tidur setelah beberapa saat tidak ada aktivitas perangkat. Layar dihidupkan oleh kombinasi tombol "inisiasi" yang sama, yang digunakan untuk menyalakan lampu latar di versi pertama perangkat - dengan menahan tombol ekstrem, dengan rata-rata dilepaskan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika layar menyala, sensor dan tombol sentuh diinterogasi dengan periode siklus utama sekitar 200ms, dengan periode yang sama diinterogasi, dan beberapa elemen tampilan, seperti keadaan tombol dan waktu, diperbarui. Informasi yang ditampilkan dari sensor diperbarui dengan periode dua kali lebih lama, kira-kira sekali setiap 400 ms. Periode ini, menurut saya, adalah optimal, karena dengan periode pembaruan yang lebih pendek, perubahan angka tidak nyaman untuk dibaca, dan dengan yang lebih lama, keterlambatan pembacaan akan terlihat. Frekuensi interogasi dari semua sensor dipilih secara khusus dua kali lebih tinggi dari kecepatan refresh display, karena dua parameter yang diukur dibaca dari sensor tekanan dan kelembaban pada gilirannya: selama satu interogasi, suhu, selama interogasi berikutnya - tekanan atau kelembaban. Semua waktu "bebas" dari siklus utama, prosesor dalam mode pengurangan kebisingan ADC,mengukur arus baterai. Akibatnya, ketika layar menyala, perangkat mengkonsumsi sekitar 6mA.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika layar mati, memperbarui tampilan tidak diperlukan, sehingga sensor dan tombol lebih jarang disurvei, setiap 500 ms, dan prosesor menghabiskan seluruh waktu luangnya dalam mode daya mati. Mode pematian daya keluar oleh interupsi interupsi penggantian pin dari jam waktu-nyata. Dalam hal ini, data rata-rata dari semua sensor direkam pada kartu memori satu menit sekali, terlepas dari mode layar. Untuk mengurangi konsumsi energi, seluruh periferal mikrokontroler dihidupkan segera sebelum digunakan melalui register PRR dan dimatikan setelah digunakan. Arus yang dikonsumsi oleh perangkat dengan layar mati rata-rata sekitar 250 μA, di mana sekitar 100 μA jatuh pada layar dalam mode power down, dan sisanya terutama pada mikrokontroler. Dalam hal ini, penurunan frekuensi sensor pemungutan suara secara praktis tidak mengurangi konsumsi saat ini,karena sebagian besar energi dikonsumsi selama pemungutan suara tombol sentuh. Perlu dicatat bahwa jenis jam yang digunakan juga memengaruhi konsumsi daya. Jadi, ketika clocking mikrokontroler dari osilator RC built-in, konsumsi saat ini dalam mode off-screen sedikit kurang dari ketika menggunakan kuarsa eksternal. Jelas, ini disebabkan oleh start yang lebih cepat dan kapasitansi RC yang kurang disipatif. Akibatnya, karena dalam versi perangkat ini tidak ada persyaratan khusus untuk stabilitas frekuensi clock mikrokontroler, dalam versi final perangkat, osilator RC bawaan digunakan sebagai generator jam (walaupun ada tempat untuk kuarsa di papan).bahwa jenis jam yang digunakan juga memengaruhi konsumsi daya. Jadi, ketika clocking mikrokontroler dari osilator RC built-in, konsumsi saat ini dalam mode off-screen sedikit kurang dari ketika menggunakan kuarsa eksternal. Jelas, ini disebabkan oleh start yang lebih cepat dan kapasitansi RC yang kurang disipatif. Akibatnya, karena dalam versi perangkat ini tidak ada persyaratan khusus untuk stabilitas frekuensi clock mikrokontroler, dalam versi final perangkat, osilator RC bawaan digunakan sebagai generator jam (walaupun ada tempat untuk kuarsa di papan).bahwa jenis jam yang digunakan juga memengaruhi konsumsi daya. Jadi, ketika clocking mikrokontroler dari osilator RC built-in, konsumsi saat ini dalam mode off-screen sedikit kurang dari ketika menggunakan kuarsa eksternal. Jelas, ini disebabkan oleh start yang lebih cepat dan kapasitansi RC yang kurang disipatif. Akibatnya, karena dalam versi perangkat ini tidak ada persyaratan khusus untuk stabilitas frekuensi clock mikrokontroler, dalam versi final perangkat, osilator RC bawaan digunakan sebagai generator jam (walaupun ada tempat untuk kuarsa di papan).ini disebabkan oleh start yang lebih cepat dan kapasitansi RC osilator yang lebih sedikit. Akibatnya, karena dalam versi perangkat ini tidak ada persyaratan khusus untuk stabilitas frekuensi clock mikrokontroler, dalam versi final perangkat, osilator RC bawaan digunakan sebagai generator jam (walaupun ada tempat untuk kuarsa di papan).ini disebabkan oleh start yang lebih cepat dan kapasitansi RC osilator yang lebih sedikit. Akibatnya, karena dalam versi perangkat ini tidak ada persyaratan khusus untuk stabilitas frekuensi clock mikrokontroler, dalam versi final perangkat, osilator RC bawaan digunakan sebagai generator jam (walaupun ada tempat untuk kuarsa di papan).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perubahan penting memengaruhi mode tampilan informasi, semua kekurangan yang diidentifikasi saat menggunakan versi pertama perangkat diperhitungkan dan perubahan terkait dibuat dalam program. Sekarang ada 4 mode tampilan data yang berbeda (mode tampilan mengacu pada tampilan layar utama), beralih di antaranya dilakukan oleh tombol enter. </font></font><br>
<br>
<img src="https://habrastorage.org/files/466/e4c/d49/466e4cd4995e436d904c74adf2bc4d50.jpg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layar pertama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini digunakan untuk menampilkan sejarah perubahan data cuaca dalam bentuk grafik, serta pembacaan sensor saat ini, tanggal dan waktu. Sekilas, mungkin tampak bahwa tidak ada yang berubah di sini sejak versi pertama perangkat, tetapi kenyataannya tidak. Sekarang perangkat mengingat suhu, kelembaban, dan tekanan setiap dua menit, dan menyimpan data selama 4 hari terakhir dalam RAM - total 2880 pembacaan. Semua data ini tersedia untuk dilihat, pada skala waktu yang berbeda. Secara default, data terbaru ditampilkan di layar, namun, menahan tombol "-" memungkinkan Anda untuk beralih ke mode mundur, dan kemudian menggunakan tombol "+" dan "-" untuk bergerak bolak-balik di sepanjang sumbu waktu. Keluar dari mode mundur dengan menekan tombol "enter". Pergantian timbangan tepat waktu dilakukan dengan tombol “+”. Versi firmware terakhir menyediakan 4 skala waktu:</font></font><br>
<ul>
<li>2/ (3.2    ).</li>
<li>6/ (9.6    ).</li>
<li>10/ (16    ).</li>
<li>30/ (48    ).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada prinsipnya, opsi skala lain yang merupakan kelipatan 2 menit juga dimungkinkan. Sekarang, ketika membuat grafik, berbagai interpretasi data meteorologi dimungkinkan. Tekanan dapat ditampilkan secara langsung, atau dapat dikonversi ke ketinggian barometrik relatif ke titik dengan tekanan referensi yang diberikan. Dalam kasus pertama, skala yang tepat lulus dalam milimeter merkuri, dan dalam kasus kedua, dalam meter. Kelembaban juga dapat ditampilkan baik secara langsung (pengisian biru) atau dihitung ulang ke titik embun, kemudian di samping kurva suhu, kurva titik embun (raspberry) juga ditampilkan. Mode tampilan tekanan dan kelembaban beralih di layar kedua. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layar kedua</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, seperti dalam versi pertama, dicadangkan untuk menampilkan semua informasi tentang keadaan perangkat dan sensor saat ini. Di sini ditampilkan parameter seperti tegangan baterai, arus pengisian daya, pembacaan arus sensor utama, tekanan ketinggian nol, waktu, tanggal. Baris terakhir menunjukkan hasil dari upaya terakhir untuk menulis ke kartu SD, dan versi saat ini dari interpretasi data meteorologi pada grafik. Pada layar ini, menggunakan tombol "+" dan "-", Anda dapat mengalihkan interpretasi data cuaca, dan dengan menekan urutan awal masukkan mode pengaturan jam. Sedangkan untuk kartu SD, hasil panggilan terakhir ditampilkan. Jika perekaman berhasil, jumlah byte yang direkam selama akses terakhir ditampilkan, jika kesalahan terjadi, "Kesalahan" ditampilkan, dan jika kartu tidak ada dalam pembaca kartu, "---" ditampilkan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layar ketiga</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dirancang untuk mengatur tekanan referensi altimeter barometrik. Baris pertama menunjukkan tekanan referensi saat ini dan tinggi barometrik yang sesuai. Tekanan atmosfer saat ini ditunjukkan di bawah ini. Berikut ini adalah tabel sejarah tekanan referensi dengan tanggal dan waktu pemasangannya, baris terakhir menunjukkan tanggal dan waktu. Tekanan referensi diubah menggunakan tombol "+" dan "-", dan secara otomatis ditambahkan ke tabel histori jika, ketika beralih ke layar berikutnya, tekanan referensi saat ini berbeda dari nilai historis terakhir. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layar keempat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dimaksudkan untuk tampilan detail data yang disediakan oleh sensor cahaya max44008 RGB. Lima baris pertama menunjukkan penerangan saluran saat ini dalam bentuk numerik dan grafik, diikuti oleh perkiraan koordinat warna dan suhu warna dari cahaya yang datang. Ini diikuti oleh sebuah baris dengan dua bacaan di suite. Angka kiri mengacu pada sensor saat ini max44008, kanan - ke max44009. Empat baris terakhir sepenuhnya sama dengan yang ada di layar pertama. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi lampu latar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sedikit berubah dibandingkan dengan versi pertama perangkat, karena mode operasi layar telah berubah. Lampu latar masih dinyalakan oleh kombinasi awal tombol (seperti layar), dan jika iluminasi kurang dari 100 lux saat layar dinyalakan, lampu latar menyala dengan layar. Pada saat dinyalakan, timer lampu latar diatur untuk periode yang dipilih menjadi 40 detik. Menekan tombol apa pun dengan lampu latar menyala akan mengatur timer tidur setidaknya untuk periode lain yang diatur ke 12 detik. Sebelum menyalakan lampu latar, semua pembacaan sensor cahaya diingat, dan selama periode awal lampu latar menyala selama sekitar 7 detik, itu adalah bacaan yang disimpan dari sensor cahaya yang ditampilkan di semua layar, sementara latar belakang teks yang ditampilkan berubah dari putih menjadi hijau.Berkat hafalan bacaan, perangkat dapat menampilkan pencahayaan rendah yang tidak terdistorsi oleh pencahayaan sensor dengan layarnya sendiri. Pada semua layar kecuali yang kedua, menekan kombinasi yang memulai ketika lampu latar menyala menyebabkan lampu latar mati, pada layar kedua kombinasi ini menyalakan mode pengaturan jam.</font></font><br>
<br>
<b>   ,</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terutama tentang max44008 layak berbicara secara terpisah. Sensor ini ditambahkan dalam versi instrumen 2M, untuk memperluas jangkauan operasi stasiun cuaca luxometer di daerah cahaya rendah. Sensitivitas maksimum sensor max44009 yang diwarisi dari versi pertama perangkat adalah 45 mililux / hitungan, yang cukup untuk mengukur pencahayaan saat senja, tetapi tidak cukup untuk mengukur pencahayaan pada malam yang diterangi cahaya bulan dan malam tanpa bulan. Tentu saja, pengukuran pencahayaan bukanlah tugas utama stasiun cuaca saya, tetapi karena ada luxometer di perangkat, dan kadang-kadang Anda harus bergerak di malam hari saat bepergian, saya ingin memiliki alat yang akan menunjukkan betapa gelapnya malam sekarang. Oleh karena itu, sensor yang paling sensitif dipilih, mirip dengan yang digunakan dalam versi max44009 sebelumnya.Sensor ini memiliki enam saluran untuk mengukur iluminasi dalam rentang yang berbeda dan satu saluran untuk mengukur suhu. Kami sudah memiliki cukup sensor suhu di perangkat, sehingga perangkat hanya memilih enam saluran optik - terlihat (Jelas), merah (Merah), hijau (Hijau), biru (Biru), inframerah (IR), dan kompensasi (IRcomp). Lima saluran pertama dirancang untuk mengukur iluminasi di berbagai bagian spektrum, dan keenam dirancang untuk mengimbangi penerangan inframerah saluran yang terlihat. Pengaturan parameter seperti penguatan (pada dasarnya sensitivitas) dan waktu akumulasi sinyal (juga memengaruhi sensitivitas dan akurasi pengukuran) hanya dimungkinkan untuk semua saluran sekaligus, dan hanya dari luar. Kemampuan untuk secara otomatis memilih parameter-parameter ini oleh sensor itu sendiri tidak disediakan, dan tidak seperti max44009,sensitivitas harus disesuaikan dari program. Menurut dokumentasi untuk sensor, nilai awal yang disediakan dapat dikonversi menjadi kekuatan fluks cahaya per satuan luas dalam miliwatt per sentimeter persegi. Kurva (sebenarnya garis lurus) untuk mengubah output menjadi suite untuk sumber seperti lampu pijar dan lampu fluoresen juga ditampilkan di sana. Saya melakukan kalibrasi saya membandingkan pembacaan max44009 dan max44008 baru, menggunakan sinar matahari yang disebarkan, cahaya dari lampu fluorescent, lampu LED, dan rata-rata bacaan sebagai sumber. Akibatnya, saya mendapat nilai yang sama untuk faktor konversi. Akibatnya, sensitivitas max44008 adalah sekitar 1,4 miliuks per pembacaan dalam rentang paling sensitif, yaitu satu setengah kali lipat lebih baik daripada max44009.Nilai akhir dari pembacaan luxometer dibentuk oleh data tusuk linear dari max44009 sensitivitas rendah dan max44008 sensitif di kisaran 5-10 lux. Penghitungan koordinat warna dan suhu warna diterapkan sesuai dengan dokumentasi, hanya karena ada kemungkinan seperti itu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebuah studi terpisah layak mempertanyakan keakuratan sensor cahaya dan efek pencahayaan IR pada keandalan pembacaan. Akar masalahnya terletak pada fakta bahwa elemen-elemen fotosensitif dari sensor max4400x (serta banyak fotodioda dan sensor terintegrasi lainnya, matriks kamera dan kamera video, dan perangkat lain) dibuat berdasarkan silikon. Berdasarkan sifat fisiknya, elemen fotosensitif tersebut merekam radiasi elektromagnetik dari panjang gelombang yang panjang, lebih pendek dari batas tertentu yang ditentukan oleh celah pita. Untuk silikon, panjang gelombang pamungkas ini sekitar 1100nm. Pada saat yang sama, mata manusia sama sekali tidak peka terhadap radiasi elektromagnetik dengan panjang gelombang lebih dari 800 nm. Oleh karena itu, radiasi dengan panjang gelombang lebih dari 800 nm (biasanya 800-1400 nm) disebut inframerah dekat.Ada banyak radiasi seperti itu dalam spektrum emisi benda yang dipanaskan, seperti lampu pijar, lampu busur atau matahari. Dan radiasi semacam itu praktis tidak ada dalam spektrum LED putih dan lampu neon. Biasanya, elemen fotosensitif dilapisi di atas dengan filter khusus yang membawa kurva sensitivitas mereka lebih dekat dengan apa yang diperlukan dalam aplikasi tertentu. Filter semacam itu dapat menipiskan radiasi infra merah dekat oleh beberapa urutan besarnya, tetapi tidak sepenuhnya memotongnya. Pada saat yang sama, masih ada masalah terkait dengan fakta bahwa mata manusia tidak melihat dalam jangkauan inframerah dekat sama sekali, dan perangkat, yang seharusnya mengukur aliran cahaya tampak, mencatatnya setidaknya sedikit. Ada beberapa cara untuk mengatasi masalah ini. Jadi, dalam kamera digital atau kamera video, filter multilayer khusus ditempatkan di depan matriks,yang melemahkan radiasi inframerah-dekat sekitar 3 kali lipat. Sensor max4400x menggunakan solusi yang berbeda - penggunaan saluran "kompensasi" tambahan. Beberapa fotodioda dengan filter yang berbeda dipasang di sensor, dengan transmisi yang kira-kira sama dalam rentang inframerah dekat, dan pencahayaan total dalam rentang yang terlihat ditentukan sebagai perbedaan pengukuran dari dua fotodioda. Dalam kasus kami, sensor max44009 melakukan kompensasi secara otomatis, dan sensor max44008 hanya memberikan data saluran pengukuran, dan pengguna harus melakukan kompensasi sendiri dengan mengurangi nilai baca dari satu sama lain.dengan kira-kira transmitansi yang sama dalam rentang inframerah dekat, dan pencahayaan total dalam rentang yang terlihat ditentukan sebagai perbedaan pengukuran dari dua fotodioda. Dalam kasus kami, sensor max44009 melakukan kompensasi secara otomatis, dan sensor max44008 hanya memberikan data saluran pengukuran, dan pengguna harus melakukan kompensasi sendiri dengan mengurangi nilai baca satu sama lain.dengan kira-kira transmitansi yang sama dalam rentang inframerah dekat, dan pencahayaan total dalam rentang yang terlihat ditentukan sebagai perbedaan pengukuran dari dua fotodioda. Dalam kasus kami, sensor max44009 melakukan kompensasi secara otomatis, dan sensor max44008 hanya memberikan data saluran pengukuran, dan pengguna harus melakukan kompensasi sendiri dengan mengurangi nilai baca satu sama lain.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memeriksa kecukupan kompensasi IR, saya melakukan beberapa percobaan sederhana. Yang pertama adalah mempelajari efek iluminasi IR dari LED IR dengan panjang gelombang 880 nm radiasi pada pembacaan kedua sensor. Pembacaan saluran dibandingkan ketika sumber radiasi inframerah dihidupkan dan dimatikan dan kondisi cahaya tidak berubah. Percobaan menunjukkan bahwa kompensasi IR bekerja paling baik di saluran yang jelas dari sensor max44008. Ketika iluminasi IR melebihi cahaya tampak dalam intensitas sekitar urutan besarnya, kesalahan saluran bening yang dikompensasi tidak lebih dari 10%, dan sensor max44009 memberikan pembacaan yang sangat diremehkan di bawah iluminasi tersebut (ada kompensasi berlebihan). Tetapi pembacaan saluran warna sensor RGB di bawah pencahayaan IR mulai "mengambang", dan dalam arah yang berbeda.Keanehan lain ditemukan dalam pengoperasian sensor ini - lompatan dalam nilai yang terukur nyata saat mengalihkan gain PGA dari 16 menjadi 256 di saluran ircomp.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Percobaan kedua adalah memeriksa kebenaran pengukuran suhu warna menggunakan berbagai sumber dengan suhu warna yang diketahui. Mengingat bahwa saya tidak memiliki colorimeter yang akurat untuk verifikasi, saya dapat menyimpulkan bahwa max44008 menunjukkan hasil yang kurang lebih memadai untuk sumber-sumber seperti LED dan lampu neon, namun, hasil pengukuran untuk lampu pijar yang membakar baik dengan cahaya penuh maupun dengan cahaya rendah benar-benar tidak dapat diandalkan karena penerangan IR. Perlu disebutkan bahwa ketika menggunakan lampu yang dipanaskan sebelumnya sebagai sumber radiasi infra merah, kompensasi berlebih pada sensor max44009 masih terlihat.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu disebutkan kelemahan lain dari sensor max44008 - arus gelap. Jadi, pada suhu di bawah 15 derajat Celcius dalam kegelapan absolut, pembacaan sensor max44008 adalah nol, namun, dengan meningkatnya suhu, arus gelap meningkat dengan kuat. Pada suhu 18 derajat, itu adalah 1 hitungan, 20 derajat sudah 2 hitungan, dan pada 30 derajat sudah 7 hitungan. Kemungkinan sensor dapat dikalibrasi untuk secara termal mengkompensasi arus gelap, tetapi saya tidak berurusan dengan masalah ini karena saya mendeteksi peningkatan yang nyata dalam arus gelap hanya ketika saya menganalisis data log dari perjalanan ke Karelia, atau lebih tepatnya bagian itu ketika perangkat dikemas dalam tas dan kantong tekanan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang mengisi daya baterai.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti dapat dilihat dari diagram, pengontrol max1879 yang terpisah mengatur pengisian baterai, dan prosesor serta program yang dijalankan di atasnya hanya dapat mengukur tegangan pada baterai dan arus pengisian melalui sirkuit yang sesuai. Namun, sejumlah tindakan telah dilakukan agar perangkat dapat diisi dan dihidupkan secara normal, meskipun baterai benar-benar duduk. Sekarang proyek menggunakan watchdog, dan sekering WDTON di-flash, yang memastikan bahwa watchdog mulai secara otomatis ketika controller diatur ulang. Ambang brownout diatur ke 1.8V, sumber clock adalah osilator RC bawaan, dan sekering CKDIV8 juga menyala. Agar pengawas yang disertakan tidak menyebabkan reboot siklik, dengan menggunakan __attribute __ ((bagian (". Init3")))), pengawas ulang yang disetel untuk periode empat detik dibangun ke inisialisasi pengontrol.Berkat CKDIV8 yang terinstal, pengontrol dimulai pada frekuensi 1 MHz, yang dimungkinkan pada tegangan dari 1.8V. Setelah inisialisasi pengendali utama memeriksa tegangan pada baterai. Jika kurang dari ambang batas yang ditetapkan (2.7v), sebuah pesan tentang pelepasan baterai dan nilai tegangan pada baterai ditampilkan di layar, setelah itu pengontrol menunggu sekitar 500 ms, matikan layar dan matikan hingga direset oleh pengawas. Jika voltase di atas ambang batas, program mengalihkan frekuensi clock ke 8 MHz melalui register CLKPR, dan diinisialisasi dalam mode normal. Sebagai tindakan pencegahan tambahan, perekaman ke kartu microSD hanya terjadi jika tegangan pada baterai di atas batas tertentu yang dipilih pada 3.2V. Akibatnya, meskipun dengan pelepasan baterai yang dalam, perangkat terus beroperasi dalam mode normal, selagi dimungkinkan.Karena pemblokiran perekaman pada kartu, kegagalan kartu selama perekaman tidak termasuk. Jika selama pelepasan yang dalam, voltase turun hingga prosesor membeku (pengalaman menunjukkan bahwa ini terjadi pada voltase sekitar 2.3V), sebuah pengawas akan diatur ulang dan perangkat akan memasuki siklus tanpa akhir yang terdiri dari reboot dan indikasi jangka pendek "baterai hampir habis". Jika debitnya lebih dalam, perangkat akan mati melalui BOD. Ketika terhubung ke pengisian daya, semuanya terjadi dalam urutan terbalik. Pengontrol max1879 mengisi daya baterai yang sangat habis dengan arus rendah 8mA. Ketika tegangan baterai melebihi sekitar 2V, mikrokontroler akan diatur ulang oleh BOD dan akan menampilkan pesan "baterai lemah" berkedip setiap 4 detik sekali. Dalam hal ini, konsumsi rata-rata saat ini tidak melebihi 1 mA, dan pengisian akan terus berlanjut. Ketika tegangan baterai mencapai 2.5V,akan ada transisi ke pengisian dengan arus penuh, dan pada 2.7V perangkat akan menyala secara normal. Solusi semacam itu, menurut saya, memberikan kinerja dan indikasi yang lebih baik ketika baterai habis dalam dan stabil keluar dari debit yang dalam. Tetapi jika Anda mengatur ambang BOD ke 2.7V, alarm palsu yang tidak disengaja dimungkinkan dalam keadaan yang merugikan (ambang BOD maksimum terlalu dekat dengan tegangan output minimum stabilizer).alarm palsu yang tidak disengaja dimungkinkan dalam keadaan yang merugikan (ambang BOD maksimum terlalu dekat dengan tegangan output minimum dari stabilizer).alarm palsu yang tidak disengaja dimungkinkan dalam kondisi yang merugikan (ambang batas BOD maksimum terlalu dekat dengan tegangan output minimum stabilizer).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indikasi standar baterai lemah dalam bentuk huruf berkedip "LB" memiliki ambang perjalanan 3,65V, yang sesuai dengan sekitar 20% dari sisa baterai, yaitu, perangkat dapat bekerja selama sekitar satu bulan setelah menyalakan indikasi kebutuhan pengisian daya. Oleh karena itu, melewatkan momen ketika Anda perlu mengisi daya perangkat sangat sulit, jika setidaknya kadang-kadang untuk melihat bacaannya. Untuk alasan ini, saya memutuskan bahwa tidak diperlukan indikasi baterai kosong yang lebih mengganggu. LED indikator pengisian daya yang terhubung ke max1879 terletak di papan di sisi layar yang berlawanan, sehingga perangkat menyala hijau dari dalam saat mengisi daya.</font></font><br>
<br>
<img src="https://habrastorage.org/files/200/3c6/d72/2003c6d723f04a32bed73b3e5e490374.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengisi daya perangkat, buat dudukan khusus dengan reses di bawah perangkat dan dua grup kontak. Dudukan dilengkapi dengan konektor microUSB untuk menghubungkan sumber arus. Dudukan tidak memiliki sirkuit elektronik di dalamnya, hanya kabel dan sekering yang dapat disetel ulang. Bagi pembaca yang penuh perhatian, pilihan chip max1879 sebagai pengontrol muatan mungkin tampak agak absurd, karena dengan skema pengisian daya yang dipilih dari sumber arus yang kompatibel dengan USB, akan lebih logis untuk menggunakan pengontrol dengan batasan arus bawaan. Namun, rangkaian yang dipilih dapat diandalkan, tidak takut pada sumber dengan stabilisasi tegangan keluaran yang buruk, dan satu-satunya kelemahannya, pada kenyataannya, adalah tidak kompatibilitas penuh dengan standar USB karena kurangnya regulasi otomatis dari arus maksimum yang diizinkan.Tetapi skema semacam itu memberikan biaya lebih cepat saat menggunakan adaptor jaringan.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengalaman Operasi Instrumen</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada musim semi, salinan versi dua sudah siap, dan saya membawanya di Krimea yang bergunung-gunung. </font><font style="vertical-align: inherit;">Di musim panas, saat mendaki di sepanjang Laut Putih dan Kovdozer, saya mengambil contoh berikutnya dari versi 2M. </font><font style="vertical-align: inherit;">Seperti sebelumnya, ketika mengemudi dengan kayak, saya meletakkan perangkat di tubuh kayak di depan saya, selama perjalanan di Krimea saya mengenakan perangkat di leher saya, selama berhenti, taman dan hari-hari saya menggantung perangkat di pohon di tempat teduh, di tempat yang tertiup angin.</font></font><br>
<br>
<img src="https://habrastorage.org/files/bac/4a7/5bc/bac4a75bc424436986c30b5b2f44c9aa.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti versi pertama, perangkat terasa seperti organ sensorik tambahan, dan penggunaannya menjadi lebih nyaman dibandingkan dengan versi pertama. Dengan massa sekitar 128g (dibandingkan dengan 330g dari versi pertama), perangkat ini praktis tidak terasa di leher. Penampilan perangkat ini, menurut saya, lebih akurat dibandingkan versi pertama. Tombol sentuh pada versi kedua lebih nyaman karena lokasi di samping dan tidak adanya bagian logam yang dekat dari case, meskipun mengingat survei yang tidak terlalu cepat, tidak semua orang dapat menggunakannya pertama kali. Kebutuhan untuk menghidupkan layar untuk melihat pembacaan perangkat tidak menyebabkan ketidaknyamanan. Layarnya mudah dinyalakan meski hanya dengan sentuhan dalam kegelapan total. Metode menampilkan grafik yang digunakan pada versi kedua perangkat, dengan skala yang berbeda dan menggulir ke belakang, ternyata sangat praktis,membuatnya mudah untuk menganalisis cuaca atau profil yang ditempuh dalam beberapa hari terakhir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat berjalan, terutama di pegunungan, sangat nyaman untuk menggunakan tampilan tekanan pada grafik sebagai ketinggian barometrik. </font><font style="vertical-align: inherit;">Grafik menunjukkan profil jalur yang dilalui. </font><font style="vertical-align: inherit;">Di satu sisi, jadwal seperti itu memudahkan untuk menilai kekasaran dari jalan setapak yang telah dilalui, yang terutama berlaku untuk jalur gunung Krimea yang melewati hutan.</font></font><br>
<br>
<img src="https://habrastorage.org/files/ba1/fa7/e34/ba1fa7e3470541239b9a06236a6c1873.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sisi lain, sesuai dengan jadwal, mudah untuk melihat kecepatan gerakan Anda sendiri naik dan turun (sebenarnya pada tanjakan curam) dan memperkirakan berapa banyak yang tersisa sampai akhir gerakan di daerah dengan perbedaan yang diketahui. </font><font style="vertical-align: inherit;">Selama perjalanan air di laut atau danau, ketika ketinggian konstan, lebih mudah untuk menampilkan tekanan sebagai tekanan. </font><font style="vertical-align: inherit;">Tren tekanan dapat digunakan untuk menilai cuaca selama dua hari ke depan. </font><font style="vertical-align: inherit;">Di pegunungan, melacak tren tekanan lebih sulit, mereka terlihat pada grafik hanya saat berhenti.</font></font><br>
<br>
<img src="https://habrastorage.org/files/218/37b/d2d/21837bd2da3d43c8a6365d5ae1af70e3.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, seperti yang telah disebutkan dalam artikel sebelumnya, pergerakan di pegunungan dan bahkan di medan berbukit menyebabkan perubahan tekanan yang jauh lebih cepat daripada proses khas yang terjadi di atmosfer. Untuk alasan ini, kesalahan sehari-hari dalam grafik ketinggian barometrik biasanya kecil, apalagi, mudah untuk mengevaluasinya secara visual dengan memperkirakan perubahan tekanan selama berhenti dan berhenti.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grafik suhu dan tekanan juga menarik, tetapi makna praktisnya tidak begitu jelas. Mereka memungkinkan Anda untuk menentukan tren cuaca, memilih pakaian yang tepat, dan mengevaluasi prospek mencoba mengeringkan peralatan Anda. Dengan pengukuran suhu, seperti versi pertama, ada fitur. Dengan demikian, masuknya sinar matahari pada perangkat menyebabkan pemanasan yang nyata dan kesalahan dalam pengukuran suhu. Selain itu, suhu udara (dan perangkat) dipengaruhi oleh suhu benda di sekitarnya dan pemanasan berseri-seri. Jadi, bahkan pada hari berawan, perangkat yang ditempatkan di tempat teduh di atas tanah menunjukkan suhu beberapa derajat lebih rendah daripada jika ditempatkan di tubuh kano yang berdiri di atas air. Rupanya, ini disebabkan oleh pemanasan kayak dan udara di atasnya oleh cahaya yang tersebar dan radiasi infra merah. Untuk mempelajari keadaan ini, saya bahkan melakukan percobaan berikut.Seperti diketahui, aliran udara dapat digunakan untuk mempercepat perpindahan panas. Cara termudah untuk mengatur peniupan termometer dalam cuaca yang tenang adalah dengan memelintirnya pada tali di sekelilingnya. Membalikkan perangkat ke tanah pada hari berawan di tempat teduh, saya yakin bahwa aliran udara tidak memengaruhi pembacaan. Jadi bacaan di tempat teduh, dan sesuai dengan suhu udara. Lagi pula, jika suhu perangkat berbeda dari suhu udara, karena, misalnya, pemanasan radiasi, intensifikasi perpindahan panas akan menyebabkan perubahan kondisi keseimbangan dan perubahan bacaan ke bawah. Jika Anda membalikkan perangkat di atas permukaan air, pembacaan suhu menjadi kurang dari jika perangkat berada di kayak, dan efeknya diamati bahkan di hadapan angin kecil. Dari sini kita dapat menyimpulkan bahwa pemanasan perangkat dari kayak itu penting, dan mungkindari permukaan yang mendasari diterangi lainnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu disebutkan kemungkinan menampilkan titik embun. Temperatur titik embun adalah fungsi kelembaban udara absolut (massa uap air per satuan volume), dan memungkinkan Anda menilai kadar air di atmosfer. Jika Anda mengambil sejumlah udara dan memanaskannya, suhu akan meningkat, kelembaban relatif akan turun, dan suhu titik embun tidak akan berubah. Oleh karena itu, karena sensor selalu dalam kesetimbangan dengan lapisan udara tipis di sekitarnya, jika sensor (atau seluruh perangkat) dipanaskan, suhu yang ditampilkan akan meningkat, kelembaban yang ditampilkan akan turun, dan suhu titik embun yang ditampilkan tidak akan berubah. Pada kenyataannya, semuanya agak lebih rumit, karena kesalahan dan kelonggaran mengukur suhu dan terutama kelembaban sangat mempengaruhi akurasi penghitungan titik embun. Namun, kita dapat mengatakan bahwa titik embun yang dihitung,dan bukan kelembaban relatif adalah informasi tentang jumlah air di atmosfer, dan itu tidak terpengaruh oleh kesalahan pengukuran suhu yang terkait dengan pemanasan perangkat oleh matahari. Sebagai aturan, suhu titik embun berubah cukup lambat, dan fluktuasi hariannya bisa hanya 2-5 derajat terhadap 10-15 pada suhu udara. Di musim panas, peningkatan titik embun sekitar 20 derajat adalah pertanda pembentukan badai petir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The luxometer, sekarang dilengkapi dengan dua sensor, memungkinkan Anda untuk mengukur pencahayaan dan mendapatkan hasil pengukuran yang andal dalam berbagai kondisi: baik pada hari yang cerah, pada malam tanpa bulan, dan bahkan di kamar yang sangat gelap. Kesaksiannya memungkinkan kita untuk menilai ketebalan tutupan awan di langit atau kedalaman senja. Kemungkinan membangun grafik iluminasi dalam instrumen tidak disediakan, karena bacaan sangat tergantung tidak hanya pada iluminasi, tetapi juga pada posisi spasial dari objek di sekitarnya, dan instrumen itu sendiri, oleh karena itu, akan sulit untuk mengekstraksi informasi dari grafik tersebut. Karena kehadiran dua sensor, salah satunya adalah RGB dengan saluran IR, luxometer menyediakan banyak informasi tentang pencahayaan, suhu warna, dan tingkat radiasi inframerah. Namun, menurut saya,Fungsi ini lebih berguna saat mengevaluasi pencahayaan dalam ruangan daripada hiking.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesimpulannya, kami mencatat bahwa perangkat kedua ternyata lebih nyaman dan praktis daripada yang pertama. Kasingnya cukup ringan, ringkas dan menyenangkan untuk disentuh bahkan pada suhu rendah. Waktu pengoperasian dengan satu pengisian daya baterai lebih dari cukup untuk setiap perjalanan. Grafik dapat dengan mudah diskalakan dan dibalik dalam empat hari terakhir, yang cukup untuk menganalisis cuaca dan / atau profil trek yang dilalui, dan fungsi perangkat, menurut saya, sudah cukup. Kartu SD dapat dengan mudah dihapus untuk menyalin data.</font></font><br>
<br>
<img src="https://habrastorage.org/files/67c/0b3/f1f/67c0b3f1f11a402fa128af52faf9e1fd.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika deskripsi pengalaman operasi dari versi pertama perangkat berakhir dengan daftar kekurangan, maka saya tidak akan memberikan daftar seperti itu di sini, karena, menurut saya, perangkat tidak memiliki kekurangan yang jelas. Tentu saja, selalu ada ide untuk membangun fungsionalitas, tetapi selama operasi saya tidak memiliki perasaan kekurangan fungsi apa pun. Oleh karena itu, saya selanjutnya akan mempertimbangkan opsi yang memungkinkan untuk pengembangan proyek. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu cara yang mungkin untuk mengembangkan instrumen adalah dengan menambahkan fitur baru ke perangkat lunak instrumen. Di sini Anda dapat menawarkan bidang-bidang berikut:</font></font><br>
<ul>
<li>                     .        ,       ,      ,          .</li>
<li>      SD .</li>
<li>             (   )     ,    .</li>
<li>         RGB   SD .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, ada ide tentang pengembangan seperangkat sensor untuk masa depan. Misalnya, Anda dapat menambahkan sensor khusus yang dirancang untuk mengukur suhu air di reservoir dan mata air, sensor salinitas air (TDS meter), dan menambahkan kemampuan untuk menyimpan riwayat pengukuran yang sesuai dalam perangkat lunak. Bagaimanapun, kadang-kadang menarik untuk mengukur suhu air di kolam, dan sensor suhu yang tersedia di perangkat agak lembam dan tidak dimaksudkan untuk menyelam, meskipun menyelam tidak berbahaya bagi mereka. Selain itu, sensor ultraviolet dapat ditambahkan ke set sensor cahaya untuk menentukan seberapa berbahaya itu berada di bawah sinar matahari yang cerah di bawah kondisi atmosfer saat ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desain casing perangkat versi kedua juga memiliki beberapa margin untuk pengurangan berat dan ukuran lebih lanjut. Dengan mengurangi ketebalan dinding, menggunakan bantalan yang lebih lembut dan penutup yang lebih tipis (misalnya, kaca tempered), mengurangi ukuran baterai, kasing dapat dibuat sedikit lebih kecil dan lebih ringan. Secara terpisah, perlu dikatakan bahwa saya berhasil menemukan layar transflektif 2.4 "yang saat ini diproduksi dengan resolusi 320x240 piksel. Oleh karena itu, versi ketiga perangkat mungkin akan dibuat sepenuhnya dari komponen yang tersedia secara komersial. Namun, ketika beralih ke layar resolusi yang lebih tinggi, Anda harus meningkatkan frekuensi jam prosesor sehingga menggambar ulang tidak memakan waktu terlalu lama, dan meningkatkan volume RAM agar dapat secara efektif menggunakan peningkatan jumlah piksel pada layar, mengurangi jumlah minimum derajat, meter dan menit per piksel.Untuk alasan ini, versi ketiga perangkat kemungkinan akan dirakit pada mikrokontroler AVR Xmega atau STM32.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode sumber program, kurva untuk milling dan wiring board tersedia di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id384641/">https://habr.com/ru/post/id384641/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id384629/index.html">Para ilmuwan telah mengumumkan bukti yang jelas tentang keberadaan air cair di Mars</a></li>
<li><a href="../id384631/index.html">Intel Edison Bekerja dengan Intel IoT Analytics Cloud: Manajemen Perangkat</a></li>
<li><a href="../id384633/index.html">Bionik dan robotika masuk ke bisnis pemodelan</a></li>
<li><a href="../id384635/index.html">"Human Phantom" akan membuka peluang besar bagi dokter. Mayat seorang wanita dipotong menjadi 5.000 bagian dan dipindai</a></li>
<li><a href="../id384637/index.html">Para ilmuwan belum menemukan gelombang gravitasi dalam sebelas tahun pengamatan</a></li>
<li><a href="../id384647/index.html">Anda tidak akan lulus: kunci kode pada logika</a></li>
<li><a href="../id384651/index.html">Laporan dari mixAR2015: AR&VR Technologies</a></li>
<li><a href="../id384653/index.html">Tampak dalam: 13 lampu LED dan sebotol rum. Bagian 2</a></li>
<li><a href="../id384657/index.html">Otomatisasi kontrol pemanasan rumah sendiri-sendiri. Bagian 4</a></li>
<li><a href="../id384659/index.html">Kontrol hiu tiup gelombang otak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>