<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🔬 🦖 💤 Cara menggunakan Kontrol Inversi di JavaScript dan Reactjs untuk menyederhanakan penanganan kode 🤵🏾 🥄 🧙🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inversion of Control adalah prinsip pemrograman yang cukup mudah dipahami, yang, pada saat yang sama, dapat secara signifikan meningkatkan kode Anda. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara menggunakan Kontrol Inversi di JavaScript dan Reactjs untuk menyederhanakan penanganan kode</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485012/"><p><img src="https://habrastorage.org/getpro/habr/post_images/ca6/d2e/e7c/ca6d2ee7cdf0a14a1357e78d9f266507.webp" alt="Cara menggunakan Kontrol Inversi di JavaScript dan Reactjs untuk menyederhanakan penanganan kode"></p><br><p>  <em>Inversion of Control adalah prinsip pemrograman yang cukup mudah dipahami, yang, pada saat yang sama, dapat secara signifikan meningkatkan kode Anda.</em>  <em>Artikel ini akan menunjukkan cara menerapkan Kontrol Pembalikan dalam JavaScript dan Reactjs.</em> </p><br><p>  Jika Anda sudah menulis kode yang digunakan di lebih dari satu tempat, maka Anda terbiasa dengan situasi ini: </p><br><ol><li>  Anda membuat potongan kode yang dapat digunakan kembali (bisa berupa fungsi, React komponen, React hook, dll.) Dan membagikannya (untuk kolaborasi atau penerbitan dalam sumber terbuka). </li><li>  Seseorang meminta Anda untuk menambahkan fungsionalitas baru.  Kode Anda tidak mendukung fungsionalitas yang diusulkan, tetapi bisa jika Anda membuat perubahan kecil. </li><li>  Anda menambahkan argumen / prop / opsi baru ke kode Anda dan logikanya yang terkait agar fitur baru ini berfungsi. </li><li>  Ulangi langkah 2 dan 3 beberapa kali (atau banyak, berkali-kali). </li><li> Sekarang kode reusable Anda sulit digunakan dan dipelihara. </li></ol><br><p>  Apa sebenarnya yang membuat kode mimpi buruk untuk digunakan dan dipelihara?  Ada beberapa aspek yang dapat membuat kode Anda bermasalah: </p><a name="habracut"></a><br><ol><li>  <strong>Ukuran dan / atau kinerja paket:</strong> Hanya lebih banyak kode untuk dijalankan pada perangkat dapat menyebabkan kinerja yang buruk.  Terkadang ini dapat menyebabkan orang menolak untuk menggunakan kode Anda. </li><li>  <strong>Sulit dipertahankan:</strong> Sebelumnya, kode Anda yang dapat digunakan kembali hanya memiliki beberapa opsi, dan berfokus pada melakukan satu hal dengan baik, tetapi sekarang dapat melakukan banyak hal yang berbeda, dan Anda perlu mendokumentasikan semuanya.  Selain itu, orang-orang akan mulai bertanya kepada Anda tentang cara menggunakan kode Anda untuk kasus penggunaan tertentu yang mungkin atau tidak dapat dibandingkan dengan kasus penggunaan yang telah Anda tambahkan dukungannya.  Anda bahkan mungkin memiliki dua kasus penggunaan yang hampir identik yang sedikit berbeda, jadi Anda harus menjawab pertanyaan tentang apa yang terbaik untuk digunakan dalam situasi tertentu. </li><li> <strong>Kompleksitas implementasi</strong> : Setiap kali ini <em>bukan hanya</em> <code>if</code> , masing-masing cabang logika kode Anda hidup berdampingan dengan cabang-cabang logika yang ada.  Bahkan, situasi mungkin terjadi ketika Anda mencoba mempertahankan kombinasi argumen / opsi / alat peraga yang bahkan tidak digunakan oleh siapa pun, tetapi Anda masih perlu mempertimbangkan opsi yang memungkinkan, karena Anda tidak tahu pasti apakah ada orang yang akan menggunakan kombinasi ini atau tidak. </li><li>  <strong>API canggih</strong> : Setiap argumen / opsi / prop baru yang Anda tambahkan ke kode yang dapat digunakan kembali menyulitkan Anda untuk menggunakannya, karena sekarang Anda memiliki README besar atau situs tempat semua fungsionalitas yang tersedia didokumentasikan, dan orang-orang harus mempelajari semua ini untuk penggunaan yang efektif kode Anda.  Menggunakannya tidak nyaman, karena kompleksitas API Anda menembus kode pengembang yang menggunakannya, yang mempersulit kodenya. </li></ol><br><p>  Akibatnya, semua orang menderita.  Perlu dicatat bahwa implementasi program akhir adalah bagian penting dari pengembangan.  Tapi alangkah baiknya jika kita lebih memikirkan implementasi abstraksi kita (baca tentang <a href="https://kentcdodds.com/blog/aha-programming" rel="nofollow">"pemrograman AHA"</a> ).  Apakah ada cara agar kita dapat mengurangi masalah dengan kode yang dapat digunakan kembali dan masih menuai manfaat menggunakan abstraksi? </p><br><h2 id="inversiya-upravleniya">  Kontrol inversi </h2><br><p>  Pembalikan kontrol adalah prinsip yang sangat menyederhanakan pembuatan dan penggunaan abstraksi.  Inilah yang dikatakan Wikipedia tentang hal itu: </p><br><blockquote>  ... dalam pemrograman tradisional, kode pengguna yang menyatakan tujuan program disebut dalam pustaka yang dapat digunakan kembali untuk memecahkan masalah umum, tetapi dengan kontrol inversi, ini adalah lingkungan yang memanggil kode khusus atau tugas khusus, </blockquote><p>  Pikirkan seperti ini: "Kurangi fungsionalitas abstraksi Anda, dan buat agar pengguna Anda dapat mengimplementasikan fungsionalitas yang mereka butuhkan."  Ini mungkin tampak seperti absurditas, karena kami menggunakan abstraksi untuk menyembunyikan tugas yang kompleks dan berulang, dan dengan demikian membuat kode kami lebih "bersih" dan "rapi".  Tetapi, seperti yang telah kita lihat di atas, abstraksi tradisional tidak selalu menyederhanakan kode. </p><br><h1 id="chto-takoe-inversiya-upravleniya-v-kode">  Apa itu Pembalikan Manajemen dalam kode? </h1><br><p>  Untuk memulai, berikut adalah contoh yang sangat dibuat-buat: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter(array) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if (element !== null &amp;&amp; element !== undefined) { newArray[newArray.length] = element } } return newArray } // : filter([0, 1, undefined, 2, null, 3, 'four', '']) // [0, 1, 2, 3, 'four', '']</span></span></code> </pre> <br><p>  Sekarang mari kita mainkan "siklus hidup abstraksi" yang khas dengan menambahkan kasus penggunaan baru ke abstraksi ini dan "meningkatkannya tanpa berpikir" untuk mendukung kasus penggunaan baru ini: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter( array, { filterNull = true, filterUndefined = true, filterZero = false, filterEmptyString = false, } = {}, ) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if ( (filterNull &amp;&amp; element === null) || (filterUndefined &amp;&amp; element === undefined) || (filterZero &amp;&amp; element === 0) || (filterEmptyString &amp;&amp; element === '') ) { continue } newArray[newArray.length] = element } return newArray } filter([0, 1, undefined, 2, null, 3, 'four', '']) // [0, 1, 2, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterNull: false}) // [0, 1, 2, null, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterUndefined: false}) // [0, 1, 2, undefined, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterZero: true}) // [1, 2, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], {filterEmptyString: true}) // [0, 1, 2, 3, 'four']</span></span></code> </pre> <br><p>  Jadi, program kami hanya berfungsi dengan enam use case, tetapi sebenarnya kami mendukung setiap kemungkinan kombinasi fungsi, dan ada sebanyak 25 kombinasi tersebut (jika saya hitung dengan benar). </p><br><p>  Secara umum, ini adalah abstraksi yang cukup sederhana.  Tapi itu bisa disederhanakan.  Sering terjadi bahwa abstraksi di mana fungsionalitas baru ditambahkan dapat sangat disederhanakan untuk kasus penggunaan yang sebenarnya didukung.  Sayangnya, segera setelah abstraksi mulai mendukung sesuatu (misalnya, mengeksekusi <code>{ filterZero: true, filterUndefined: false }</code> ), kami takut untuk menghapus fungsionalitas ini karena fakta bahwa itu dapat merusak kode yang bergantung padanya. </p><br><p>  Kami bahkan menulis tes untuk kasus penggunaan yang sebenarnya tidak kami miliki, hanya karena abstraksi kami mendukung skenario ini, dan kami mungkin perlu melakukan ini di masa depan.  Dan ketika kasus penggunaan ini atau lainnya menjadi tidak perlu bagi kami, kami tidak menghapus dukungan mereka, karena kami hanya melupakannya, atau berpikir bahwa itu mungkin berguna bagi kami di masa depan, atau hanya kami takut untuk menghancurkan sesuatu. </p><br><p>  Oke, sekarang mari kita menulis abstraksi yang lebih rumit untuk fungsi ini dan menerapkan metode inversi kontrol untuk mendukung semua kasus penggunaan yang kita butuhkan: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter(array, filterFn) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if (filterFn(element)) { newArray[newArray.length] = element } } return newArray } filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== null &amp;&amp; el !== undefined, ) // [0, 1, 2, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== undefined) // [0, 1, 2, null, 3, 'four', ''] filter([0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== null) // [0, 1, 2, undefined, 3, 'four', ''] filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== undefined &amp;&amp; el !== null &amp;&amp; el !== 0, ) // [1, 2, 3, 'four', ''] filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== undefined &amp;&amp; el !== null &amp;&amp; el !== '', ) // [0, 1, 2, 3, 'four']</span></span></code> </pre> <br><p>  Hebat!  Ternyata jauh lebih mudah.  Kami baru saja mengalihkan kontrol atas fungsi, melewati tanggung jawab untuk memutuskan elemen mana yang jatuh ke dalam array baru, dari fungsi <code>filter</code> ke fungsi yang memanggil fungsi filter.  Perhatikan bahwa fungsi <code>filter</code> masih merupakan abstraksi yang berguna, tetapi sekarang ini jauh lebih fleksibel. </p><br><p>  Tetapi apakah versi sebelumnya dari abstraksi ini begitu buruk?  Mungkin tidak.  Tetapi karena kami mengalihkan kontrol, kami sekarang dapat mendukung kasus penggunaan yang jauh lebih unik: </p><br><pre> <code class="javascript hljs">filter( [ {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dolphin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'eagle'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'robin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'salmon'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, ], animal =&gt; animal.legs === <span class="hljs-number"><span class="hljs-number">0</span></span>, ) <span class="hljs-comment"><span class="hljs-comment">// [ // {name: 'dolphin', legs: 0, mammal: true}, // {name: 'salmon', legs: 0, mammal: false}, // ]</span></span></code> </pre> <br><p>  Bayangkan saja jika Anda perlu menambahkan dukungan untuk kasus penggunaan ini tanpa menerapkan inversi kontrol?  Ya, itu hanya konyol. </p><br><h1 id="plohoy-api">  API buruk? </h1><br><p>  Salah satu keluhan paling umum yang saya dengar dari orang-orang mengenai API yang menggunakan inversi kontrol adalah: "Ya, tapi sekarang lebih sulit untuk digunakan daripada sebelumnya."  Ambil contoh ini: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  filter([0, 1, undefined, 2, null, 3, 'four', '']) //  filter( [0, 1, undefined, 2, null, 3, 'four', ''], el =&gt; el !== null &amp;&amp; el !== undefined, )</span></span></code> </pre> <br><p>  Ya, salah satu opsi jelas lebih mudah digunakan daripada yang lain.  Tetapi salah satu manfaat dari inversi kontrol adalah Anda dapat menggunakan API yang menggunakan inversi kontrol untuk mengimplementasikan kembali API lama Anda.  Ini biasanya cukup sederhana.  Sebagai contoh: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterWithOptions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> array, { filterNull = true, filterUndefined = true, filterZero = false, filterEmptyString = false, } = {}, </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter( array, element =&gt; !( (filterNull &amp;&amp; element === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) || (filterUndefined &amp;&amp; element === <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) || (filterZero &amp;&amp; element === <span class="hljs-number"><span class="hljs-number">0</span></span>) || (filterEmptyString &amp;&amp; element === <span class="hljs-string"><span class="hljs-string">''</span></span>) ), ) }</code> </pre> <br><p>  Keren ya  Dengan cara ini, kita dapat membuat abstraksi di atas API tempat kontrol inversi diterapkan, dan karenanya membuat API yang lebih sederhana.  Dan jika tidak ada cukup kasus penggunaan di API "sederhana" kami, maka pengguna kami dapat menggunakan blok bangunan yang sama yang kami gunakan untuk membuat API tingkat tinggi untuk mengembangkan solusi untuk tugas yang lebih kompleks.  Mereka tidak perlu meminta kami untuk menambahkan fungsi baru ke <code>filterWithOptions</code> dan menunggu untuk diimplementasikan.  Mereka sudah memiliki alat yang dengannya mereka dapat secara mandiri mengembangkan fungsionalitas tambahan yang mereka butuhkan. </p><br><p>  Dan, hanya untuk penggemar: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterByLegCount</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">array, legCount</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter(array, animal =&gt; animal.legs === legCount) } filterByLegCount( [ {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'dolphin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'eagle'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'robin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'salmon'</span></span>, <span class="hljs-attr"><span class="hljs-attr">legs</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">mammal</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, ], <span class="hljs-number"><span class="hljs-number">0</span></span>, ) <span class="hljs-comment"><span class="hljs-comment">// [ // {name: 'dolphin', legs: 0, mammal: true}, // {name: 'salmon', legs: 0, mammal: false}, // ]</span></span></code> </pre> <br><p>  Anda dapat membuat fungsionalitas khusus untuk situasi apa pun yang sering terjadi pada Anda. </p><br><h2 id="primery-iz-realnoy-zhizni">  Contoh kehidupan nyata </h2><br><p>  Jadi, ini berfungsi dalam kasus-kasus sederhana, tetapi apakah konsep ini cocok untuk kehidupan nyata?  Yah, kemungkinan besar Anda terus menggunakan inversi kontrol.  Misalnya, fungsi <code>Array.prototype.filter</code> menerapkan kontrol terbalik.  Seperti fungsi <code>Array.prototype.map</code> . </p><br><p>  Ada berbagai pola yang mungkin sudah Anda kenal, dan yang merupakan salah satu bentuk inversi kontrol. </p><br><p>  Berikut adalah dua pola favorit saya yang menunjukkan ini adalah <a href="https://kentcdodds.com/blog/compound-components-with-react-hooks" rel="nofollow">"Komponen Senyawa"</a> dan <a href="https://kentcdodds.com/blog/the-state-reducer-pattern" rel="nofollow">"Pengurang Negara"</a> .  Di bawah ini adalah contoh singkat bagaimana pola-pola ini dapat diterapkan. </p><br><h3 id="sostavnye-komponenty-compound-components">  Komponen Senyawa </h3><br><p>  Misalkan Anda ingin membuat komponen <code>Menu</code> yang memiliki tombol untuk membuka menu dan daftar item menu yang akan ditampilkan ketika Anda mengklik tombol.  Kemudian, ketika item dipilih, ia akan melakukan beberapa tindakan.  Biasanya, untuk mengimplementasikan ini, mereka hanya membuat alat peraga: </p><br><pre> <code class="xml hljs">function App() { return ( <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Menu</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">buttonContents</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag"> &lt;&gt;</span></span> Actions <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-hidden</span></span></span><span class="hljs-tag">&gt;</span></span>▾<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/&gt;</span></span> } items={[ {contents: 'Download', onSelect: () =&gt; alert('Download')}, {contents: 'Create a Copy', onSelect: () =&gt; alert('Create a Copy')}, {contents: 'Delete', onSelect: () =&gt; alert('Delete')}, ]} /&gt; ) }</code> </pre> <br><p>  Ini memungkinkan kita untuk mengkonfigurasi banyak hal dalam item menu.  Tetapi bagaimana jika kita ingin menyisipkan baris sebelum item menu Hapus?  Haruskah kita menambahkan opsi khusus ke objek yang terkait dengan <code>items</code> ?  Yah, saya tidak tahu, misalnya: <code>precedeWithLine</code> ?  Gagasan begitu-begitu. </p><br><p>  Mungkin membuat jenis item menu khusus, misalnya <code>{contents: &lt;hr /&gt;}</code> .  Saya pikir itu akan berhasil, tetapi kemudian kita harus menangani kasus di mana tidak ada pada <code>onSelect</code> .  Dan sejujurnya, ini adalah API yang sangat canggung. </p><br><p>  Ketika Anda berpikir tentang cara membuat API yang bagus untuk orang yang mencoba melakukan sesuatu yang sedikit berbeda, alih-alih meraih pernyataan <code>if</code> , cobalah untuk membalikkan kontrol.  Bagaimana jika kita mentransfer tanggung jawab untuk visualisasi menu kepada pengguna?  Kami menggunakan salah satu kekuatan dari reaksi: </p><br><pre> <code class="xml hljs">function App() { return ( <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Menu</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuButton</span></span></span><span class="hljs-tag">&gt;</span></span> Actions <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-hidden</span></span></span><span class="hljs-tag">&gt;</span></span>▾<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuButton</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuList</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onSelect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> alert('Download')}&gt;Download<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onSelect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> alert('Copy')}&gt;Create a Copy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onSelect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span><span class="hljs-tag"> =&gt;</span></span> alert('Delete')}&gt;Delete<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuList</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Menu</span></span></span><span class="hljs-tag">&gt;</span></span> ) }</code> </pre> <br><p>  Poin penting untuk diperhatikan adalah bahwa tidak ada keadaan komponen yang terlihat oleh pengguna.  Negara secara implisit dibagi antara komponen-komponen ini.  Ini adalah nilai inti dari pola komponen.  Menggunakan kesempatan ini, kami memberikan kontrol atas rendering kepada pengguna komponen kami, dan sekarang menambahkan garis ekstra (atau yang lain) adalah tindakan yang sederhana dan intuitif.  Tidak ada dokumentasi tambahan, tidak ada fungsi tambahan, tidak ada kode atau tes tambahan.  Semua orang menang. </p><br><p>  Anda dapat membaca lebih lanjut tentang pola ini di <a href="https://kentcdodds.com/blog/compound-components-with-react-hooks" rel="nofollow">sini</a> .  Terima kasih kepada <a href="https://twitter.com/ryanflorence" rel="nofollow">Ryan Florence</a> , yang mengajari saya ini. </p><br><h3 id="redyuser-sostoyaniya-state-reducer">  Peredam Negara </h3><br><p>  Saya datang dengan pola ini untuk menyelesaikan masalah pengaturan komponen logika.  Anda dapat membaca lebih banyak tentang situasi itu di blog saya <a href="https://kentcdodds.com/blog/the-state-reducer-pattern" rel="nofollow">, The State Reducer Pattern</a> , tetapi intinya adalah bahwa saya memiliki perpustakaan pencarian / autocomplete / type-in ​​yang disebut <code>Downshift</code> , dan salah satu pengguna perpustakaan sedang mengembangkan versi komponen multi-pilihan , karena itu dia ingin menu tetap terbuka bahkan setelah memilih item. </p><br><p>  Logika di balik <code>Downshift</code> menyarankan bahwa setelah pilihan dibuat, menu harus ditutup.  Seorang pengguna perpustakaan yang perlu mengubah fungsinya menyarankan menambahkan prop <code>closeOnSelection</code> .  Saya menolak tawaran ini, karena dulu saya sudah melewati jalan menuju <a href="https://twitter.com/gurlcode/status/1002110517094371328" rel="nofollow">apropalapse</a> , dan ingin menghindarinya. </p><br><p>  Sebagai gantinya, saya membuat API sehingga pengguna sendiri dapat mengontrol bagaimana perubahan status terjadi.  Pikirkan peredam keadaan sebagai keadaan fungsi yang dipanggil setiap kali keadaan komponen berubah, dan memberikan pengembang aplikasi kemampuan untuk mempengaruhi perubahan keadaan yang akan terjadi. </p><br><p>  Contoh menggunakan perpustakaan <code>Downshift</code> sehingga tidak menutup menu setelah pengguna mengklik item yang dipilih: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stateReducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, changes</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (changes.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Downshift.stateChangeTypes.keyDownEnter: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Downshift.stateChangeTypes.clickItem: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...changes, <span class="hljs-comment"><span class="hljs-comment">//     Downshift   //       isOpen  highlightedIndex //      isOpen: state.isOpen, highlightedIndex: state.highlightedIndex, } default: return changes } } // ,   // &lt;Downshift stateReducer={stateReducer} {...restOfTheProps} /&gt;</span></span></code> </pre> <br><p>  Setelah kami menambahkan prop ini, kami mulai menerima permintaan JAUH lebih sedikit untuk menambahkan pengaturan baru untuk komponen ini.  Komponen telah menjadi lebih fleksibel, dan telah menjadi lebih mudah bagi pengembang untuk mengkonfigurasinya sesuai kebutuhan. </p><br><h3 id="render-propsy-render-props">  Render Props </h3><br><p>  Layak disebutkan adalah pola <a href="https://reactjs.org/docs/render-props.html" rel="nofollow">"render props"</a> .  Pola ini adalah contoh ideal menggunakan inversi kontrol, tetapi kami terutama tidak membutuhkannya.  Baca lebih lanjut di sini: <a href="https://kentcdodds.com/blog/react-hooks-whats-going-to-happen-to-render-props" rel="nofollow">mengapa kita tidak membutuhkan Render Props lagi</a> . </p><br><h2 id="preduprezhdenie">  Peringatan </h2><br><p>  Pembalikan kontrol adalah cara hebat untuk mengatasi masalah kesalahpahaman tentang bagaimana kode Anda akan digunakan di masa depan.  Tetapi sebelum selesai, saya ingin memberi Anda beberapa saran. </p><br><p>  Mari kita kembali ke contoh kita: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Array.prototype.filter   function filter(array) { let newArray = [] for (let index = 0; index &lt; array.length; index++) { const element = array[index] if (element !== null &amp;&amp; element !== undefined) { newArray[newArray.length] = element } } return newArray } // : filter([0, 1, undefined, 2, null, 3, 'four', '']) // [0, 1, 2, 3, 'four', '']</span></span></code> </pre><br><p>  Bagaimana jika ini yang kita butuhkan dari fungsi <code>filter</code> ?  Dan kami tidak pernah menghadapi situasi ketika kami perlu menyaring apa pun kecuali <code>null</code> dan <code>undefined</code> ?  Dalam hal ini, menambahkan inversi kontrol untuk kasus penggunaan tunggal hanya akan menyulitkan kode dan tidak membawa banyak manfaat. </p><br><p>  Seperti halnya abstraksi apa pun, berhati-hatilah untuk menerapkan prinsip <a href="https://kentcdodds.com/blog/aha-programming" rel="nofollow">Pemrograman AHA</a> dan menghindari abstraksi yang terburu-buru! </p><br><h2 id="vyvody">  Kesimpulan </h2><br><p>  Semoga artikel ini bermanfaat bagi Anda.  Saya menunjukkan bagaimana Anda dapat menerapkan konsep Pembalikan Kontrol dalam suatu reaksi.  Konsep ini, tentu saja, berlaku tidak hanya untuk Bereaksi (seperti yang kita lihat dengan fungsi <code>filter</code> ).  Lain kali Anda melihat bahwa Anda menambahkan <code>if</code> lain ke fungsi <code>coreBusinessLogic</code> aplikasi Anda, pikirkan bagaimana Anda dapat membalikkan kontrol dan mentransfer logika ke tempat itu digunakan (atau, jika digunakan di beberapa tempat, Anda dapat membuat abstraksi yang lebih khusus untuk ini) kasus tertentu). </p><br><p>  Jika mau, Anda bisa bermain dengan contoh dari artikel di <a href="https://codesandbox.io/s/inversion-of-control-qunm8%3Ffontsize%3D14%26hidenavigation%3D1%26theme%3Ddark" rel="nofollow">CodeSandbox</a> . </p><br><p>  Selamat mencoba dan terima kasih atas perhatiannya! </p><br><p>  PS.  Jika Anda menikmati artikel ini, Anda mungkin menikmati pembicaraan ini: <a href="https://youtu.be/AiJ8tRRH0f8" rel="nofollow">youtube Kent C Dodds - Simply React</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id485012/">https://habr.com/ru/post/id485012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id485000/index.html">Apakah traffic AS mahal atau tidak?</a></li>
<li><a href="../id485002/index.html">Pola Flutter BloC + Penyedia + tes + ingat keadaan</a></li>
<li><a href="../id485006/index.html">Buku (sedang?). Refleksi pada sifat pikiran. Bagian II</a></li>
<li><a href="../id485008/index.html">Pembungkus properti Swift</a></li>
<li><a href="../id485010/index.html">Jangan menangis, gadis! Balas ke penulis dengan vc.ru pada surat tentang Habré</a></li>
<li><a href="../id485014/index.html">Haruskah saya mengeluh tentang wawancara?</a></li>
<li><a href="../id485016/index.html">Database yang Dikelola di Selectel: Selamat Datang di Beta</a></li>
<li><a href="../id485018/index.html">Menulis shader dengan kode di Unity LWRP</a></li>
<li><a href="../id485022/index.html">Playme Sigma: DVR Fungsional dan Terjangkau</a></li>
<li><a href="../id485024/index.html">Apa yang ada di bawah kap optimasi pengoptimalan GraalVM?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>