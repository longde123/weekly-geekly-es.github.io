<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ò ‚òùüèΩ üëÇüèæ Salir del Rabbit Hole SPA con rieles modernos ‚úàÔ∏è ‚úçüèø üññ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR: El sendero SPA est√° oscuro y lleno de horrores. Puedes luchar sin miedo contra ellos ... o elegir otro camino que te lleve al lugar correcto: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Salir del Rabbit Hole SPA con rieles modernos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417875/"> TL; DR: El sendero SPA est√° oscuro y lleno de horrores.  Puedes luchar sin miedo contra ellos ... o elegir otro camino que te lleve al lugar correcto: los rieles modernos. <br><br><img src="https://habrastorage.org/webt/bm/nz/o6/bmnzo6gdhrpqqdufks3kgylhxjw.jpeg"><br><br>  Recuerdo haber pensado que Rails se estaba centrando en el objetivo equivocado cuando DHH anunci√≥ Turbolinks en 2012.  Entonces estaba convencido de que el tiempo de respuesta instant√°neo durante la interacci√≥n del usuario era la clave para una experiencia de usuario superior.  Debido a retrasos en la red, esta interactividad solo es posible si minimiza la dependencia de la red y, en lugar de las llamadas de red, mantiene la mayor parte del estado en el cliente. <br><br>  Pens√© que era necesario para las aplicaciones en las que estaba trabajando.  Y con esa opini√≥n, prob√© muchos enfoques y marcos para implementar la misma plantilla: aplicaciones de una sola p√°gina (SPA).  Yo cre√≠a que SPA es el futuro.  Unos a√±os m√°s tarde, no estoy seguro de cu√°l es el futuro, pero definitivamente quiero encontrar una alternativa. <br><a name="habracut"></a><br><h2>  Hueco de conejo SPA </h2><br>  Una aplicaci√≥n de una p√°gina es una aplicaci√≥n de JavaScript que, una vez descargada, obtiene el control total sin tener que volver a cargar la p√°gina: renderizar, recibir datos del servidor, procesar la interacci√≥n del usuario, actualizar la pantalla ... <br><br>  Dichas aplicaciones se ven m√°s nativas que las p√°ginas web tradicionales, donde la aplicaci√≥n depende del servidor.  Por ejemplo, si usa Trello, puede notar la rapidez con que se crean las tarjetas. <br><br>  Por supuesto, una gran responsabilidad viene con gran fuerza.  En las aplicaciones web tradicionales, su aplicaci√≥n de servidor incluye un modelo de dominio y reglas comerciales, tecnolog√≠a de acceso a datos para trabajar con una base de datos y una capa de controlador para controlar c√≥mo se ensamblan las p√°ginas HTML en respuesta a las solicitudes HTTP. <br><br>  C SPA es un poco m√°s complicado.  A√∫n necesita una aplicaci√≥n de servidor que incluya su modelo y reglas de dominio, un servidor web, una base de datos y alg√∫n tipo de tecnolog√≠a de acceso a datos ... y un mont√≥n de cosas adicionales adem√°s: <br><br>  Para el servidor: <br><br><ul><li>  Una API que satisfaga las necesidades de datos de su cliente </li><li>  Un sistema de serializaci√≥n JSON para el intercambio de datos con el cliente y un sistema de almacenamiento en cach√© que lo admite. </li></ul><br>  Para el nuevo cliente de JavaScript: <br><br><ul><li>  Sistema de plantillas para convertir datos a HTML </li><li>  Presentaci√≥n de su modelo de dominio y reglas </li><li>  La capa de acceso a datos en la aplicaci√≥n cliente para transferir datos al servidor </li><li>  Sistema para actualizar vistas cuando cambian los datos </li><li>  Un sistema para vincular URL y pantallas (espero que no use una direcci√≥n para todo, no parece una aplicaci√≥n web) </li><li>  Un sistema para pegar todos los componentes necesarios para mostrar pantallas y obtener datos para esto </li><li>  Nuevas plantillas y arquitectura para organizar todo cuando </li><li>  Sistema para manejo de errores, registro, seguimiento de excepciones, etc. </li><li>  Sistema para generar JSON para solicitudes de servidor </li><li>  Marco de prueba automatizado que respalda su SPA </li><li>  Un conjunto adicional de pruebas para escribir y apoyar </li><li>  Un conjunto adicional de herramientas para ensamblar, empaquetar e implementar una nueva aplicaci√≥n </li></ul><br>  En resumen, con SPA tendr√° otra aplicaci√≥n de soporte.  Y un nuevo conjunto de problemas para resolver.  Y tenga en cuenta que no puede reemplazar una aplicaci√≥n con otra.  A√∫n necesita la aplicaci√≥n del servidor (ahora representar√° JSON en lugar de HTML). <br><br>  Si nunca ha trabajado con SPA, puede subestimar las dificultades que encontrar√°.  S√© esto porque comet√≠ los mismos errores en el pasado.  Renderizar JSON?  Yo puedo manejarlo.  ¬øUn modelo de objeto de dominio rico en JavaScript?  Eso suena gracioso  Y, ya sabes, este marco resolver√° todos estos problemas.  Gran pastel! <br><br>  <b>Mal.</b> <br><br><h2>  API e intercambio de datos. </h2><br>  La comunicaci√≥n entre su nueva aplicaci√≥n y el servidor es un problema complejo. <br><br>  Hay dos fuerzas opuestas: <br><br><ul><li>  Deber√° realizar la menor cantidad posible de solicitudes de servidor para mejorar el rendimiento. </li><li>  Convertir un solo registro a JSON es simple.  Pero mezclar modelos grandes de varios registros para minimizar el n√∫mero de consultas no es nada.  Deber√° desarrollar cuidadosamente la l√≥gica de serializaci√≥n para optimizar el n√∫mero de consultas de la base de datos y mantener el rendimiento a nivel. </li></ul><br>  Adem√°s, debe pensar qu√© descargar y cu√°ndo hacerlo para cada una de sus pantallas.  Quiero decir, necesitas un equilibrio entre bootstrap, lo que necesitas de inmediato y lo que se puede cargar perezosamente, y desarrollar una API que te permita hacer esto. <br><br>  Algunas normas pueden ayudar aqu√≠.  API JSON para estandarizar el formato JSON;  o GraphQL, para seleccionar solo los datos necesarios, tan complejos como sea necesario, en una consulta.  Pero ninguno de ellos te salvar√° de: <br><ul><li>  La elaboraci√≥n de cada intercambio de datos. </li><li>  Implementaci√≥n de consultas para seleccionar datos de manera eficiente en el servidor </li></ul><br>  Y ambos aspectos representan una cantidad suficiente de trabajo adicional. <br><br><h2>  Tiempo de arranque </h2><br>  Las personas est√°n acostumbradas a asociar los SPA con la velocidad, pero la verdad es que hacer que se carguen r√°pido no es tan f√°cil.  Hay muchas razones para esto: <br><br><ul><li>  Una aplicaci√≥n necesita datos antes de representar algo, y lleva tiempo analizar una cantidad suficientemente grande de JavaScript. </li><li>  M√°s all√° de la solicitud HTTP inicial para descargar la aplicaci√≥n, generalmente debe realizar una o m√°s solicitudes para obtener los datos JSON necesarios para representar la pantalla. </li><li>  El cliente debe convertir JSON a HTML para mostrar al menos algo.  Dependiendo del dispositivo y la cantidad de JSON para convertir, esto puede introducir retrasos notables. </li></ul><br>  Esto no significa que sea imposible forzar la carga r√°pida del SPA.  Solo digo que es dif√≠cil y que debes ocuparte de eso, porque no vendr√° junto con la arquitectura SPA. <br><br>  Por ejemplo, Discourse, un SPA basado en Ember, tiene tiempos de carga fant√°sticos, pero entre otras cosas, precargan una gran cantidad de datos JSON como parte del HTML inicial para no realizar solicitudes adicionales.  Y noto que el equipo de Discurso est√° loco en el buen sentido de la velocidad y sus habilidades est√°n muy por encima del promedio.  Pi√©nselo antes de poder reproducirlo f√°cilmente en su SPA. <br><br>  Una soluci√≥n ambiciosa para este problema es el JavaScript isomorfo: muestre su p√°gina de inicio en el servidor y entr√©guela r√°pidamente al cliente, mientras que en el fondo del SPA se carga y obtiene el control total cuando est√° listo. <br><br>  Este enfoque requiere ejecutar el tiempo de ejecuci√≥n de JavaScript en el servidor, y tampoco est√° exento de problemas t√©cnicos.  Por ejemplo, los desarrolladores deben considerar los eventos de carga de SPA a medida que cambia el proceso de carga. <br><br>  Me gusta la oportunidad de reutilizar el c√≥digo en esta idea, pero no he visto una implementaci√≥n que me permita ir en la direcci√≥n opuesta.  Adem√°s, este proceso de representaci√≥n de p√°ginas me parece muy divertido: <br><br>  - Servidor: solicitud a la API del servidor <br>  - Servidor: consulta de base de datos <br>  - Servidor: generar JSON <br>  - Servidor: convierte JSON a HTML <br>  - Cliente: muestra HTML inicial <br>  - Cliente: descargar SPA <br>  - Cliente: analizar HTML inicial y suscribirse a eventos DOM <br><br>  ¬øPodr√≠a solicitar los datos de la base de datos, generar el HTML y comenzar a trabajar? <br><br>  Esto no es del todo justo, porque no ser√°s SPA y porque la mayor parte de esta magia est√° oculta detr√°s del marco, pero todav√≠a me parece equivocado. <br><br><h2>  Arquitectura </h2><br>  Desarrollar aplicaciones con una rica interfaz de usuario es dif√≠cil.  Todo esto se debe a que este es uno de los problemas que inspir√≥ la aparici√≥n de un enfoque orientado a objetos y muchos patrones de dise√±o. <br><br>  Administrar el estado del cliente es dif√≠cil.  Los sitios web tradicionales generalmente se centran en pantallas de responsabilidad √∫nica que pierden estado cuando se reinician.  En SPA, la aplicaci√≥n es responsable de garantizar que todas las actualizaciones de estado y pantalla durante el uso sean consistentes y pasen sin problemas. <br><br>  En la pr√°ctica, si comenz√≥ a escribir JavaScript en peque√±as porciones para mejorar la interacci√≥n, en SPA tendr√° que escribir toneladas de c√≥digo JavaScript adicional.  Aqu√≠ debes asegurarte de que est√°s haciendo todo bien. <br><br>  Hay tantas arquitecturas diferentes como marcos de SPA: <br><br><ul><li>  La mayor√≠a de los marcos difieren de la plantilla MVC tradicional.  Ember se inspir√≥ inicialmente en Cocoa MVC, pero cambi√≥ mucho su modelo de programaci√≥n en versiones recientes. </li><li>  Existe una tendencia a que los desarrolladores prefieran componentes en lugar de la separaci√≥n tradicional del controlador y la presentaci√≥n (algunos marcos, como Ember y Angular, se han movido a este enfoque en versiones recientes).  Todos los marcos implementan alg√∫n tipo de enlace de datos unidireccional.  Se desaconseja la uni√≥n de doble cara debido a los efectos secundarios que puede contribuir. </li><li>  La mayor√≠a de los marcos incluyen un sistema de enrutamiento que le permite mapear URL y pantallas, y determina c√≥mo instanciar componentes para renderizar.  Este es un enfoque web √∫nico que no existe en las interfaces de escritorio tradicionales. </li><li>  La mayor√≠a de los marcos separan las plantillas HTML del c√≥digo JavaScript, pero React combina la generaci√≥n HTML y JavaScript y lo hace con bastante √©xito, dado su uso generalizado.  Tambi√©n hay una exageraci√≥n en torno a incrustar CSS en JavaScript.  Facebook, con su arquitectura Flux, ha influido bastante en la industria, y los contenedores como Redux, vuex, etc. est√°n fuertemente influenciados por ella. </li></ul><br>  De todos los marcos que he visto, Ember es mi favorito.  Adoro su consistencia y el hecho de que es bastante terco.  Tambi√©n me gusta su modelo de programaci√≥n en versiones recientes, que combina MVC tradicional, componentes y enrutamiento. <br><br>  Por otro lado, estoy firmemente en contra del campo Flux / Redux.  Vi a tanta gente inteligente us√°ndolos que hice todo lo posible para estudiarlo y comprenderlo, y ni una sola vez.  No puedo evitar sacudir la cabeza con frustraci√≥n cuando veo el c√≥digo.  No me veo feliz mientras escribo tal c√≥digo. <br><br>  Finalmente, no puedo soportar la combinaci√≥n de HTML y CSS en componentes llenos de l√≥gica de JavaScript.  Entiendo qu√© problema resuelve esto, pero los problemas que trae este enfoque no hacen que valga la pena. <br><br>  Dejemos las preferencias personales, la conclusi√≥n es que si elige la ruta SPA, tendr√° un problema muy dif√≠cil: crear la arquitectura de su nueva aplicaci√≥n correctamente.  Y la industria est√° bastante lejos de acordar c√≥mo hacer esto.  Cada a√±o, aparecen nuevos marcos, plantillas y versiones de marcos, que cambian ligeramente el modelo de programaci√≥n.  Tendr√° que escribir y mantener una tonelada de c√≥digo en funci√≥n de su elecci√≥n arquitect√≥nica, as√≠ que pi√©nselo bien. <br><br><h2>  Duplicaci√≥n de c√≥digo </h2><br>  Cuando trabaje con SPA, probablemente encontrar√° duplicaci√≥n de c√≥digo. <br><br>  Para su l√≥gica SPA, querr√° crear un modelo rico de objetos que representen su √°rea de dominio y l√≥gica empresarial.  Y a√∫n necesita lo mismo para la l√≥gica del servidor.  Y es cuesti√≥n de tiempo antes de comenzar a copiar el c√≥digo. <br><br>  Por ejemplo, suponga que est√° trabajando con facturas.  Probablemente tenga una clase Factura en JavaScript que contiene un m√©todo total que resume el precio de todos los elementos para que pueda representar el valor.  En el servidor, tambi√©n necesitar√° la clase Factura con el m√©todo total para calcular este costo para enviarlo por correo electr√≥nico.  Ves?  Las clases de cliente y servidor de Factura implementan la misma l√≥gica.  Duplicaci√≥n de c√≥digo. <br><br>  Como se dijo anteriormente, el JavaScript isomorfo podr√≠a mitigar este problema y facilitar la reutilizaci√≥n del c√≥digo.  Y digo nivelar, porque la correspondencia entre el cliente y el servidor no siempre es 1 a 1.  Deber√° asegurarse de que alg√∫n c√≥digo nunca abandone el servidor.  Una gran cantidad de c√≥digo tiene sentido solo para el cliente.  Y tambi√©n, algunos aspectos son simplemente diferentes (por ejemplo, el elemento del servidor puede guardar datos en la base de datos y el cliente puede usar la API remota).  Reutilizar el c√≥digo, incluso si es posible, es un problema complejo. <br><br>  Puede apostar que no necesita un modelo rico en su SPA y que en su lugar trabajar√° con objetos JSON / JavaScript directamente, distribuyendo la l√≥gica entre los componentes de la interfaz de usuario.  Ahora tiene la misma duplicaci√≥n de c√≥digo mezclada con su c√≥digo de UI, buena suerte con eso. <br><br>  Y lo mismo sucede si desea plantillas para representar HTML entre el servidor y el cliente.  Por ejemplo, para SEO, ¬øqu√© tal generar p√°ginas en el servidor para motores de b√∫squeda?  Deber√° volver a escribir sus plantillas en el servidor y asegurarse de que est√©n sincronizadas con el cliente.  Nuevamente duplicaci√≥n de c√≥digo. <br><br>  La necesidad de reproducir la l√≥gica de los patrones en el servidor y el cliente, en mi experiencia, es la fuente de la creciente desgracia de los programadores.  Hacer esto una vez es normal.  Cuando hagas esto por vig√©sima vez, te agarrar√°s la cabeza.  Despu√©s de haber hecho esto por 50¬™ vez, pensar√° si se necesitan todas estas piezas de SPA. <br><br><h2>  Fragilidad </h2><br>  En mi experiencia, desarrollar buenos SPAs es una tarea mucho m√°s complicada que escribir aplicaciones web con generaci√≥n de servidores. <br><br>  Primero, no importa cu√°n cuidadoso sea, no importa cu√°ntas pruebas escriba.  Cuanto m√°s c√≥digo escriba, m√°s errores tendr√°.  Y SPA representa (lo siento, si presiono mucho) una gran cantidad de c√≥digo para escribir y apoyar. <br><br>  En segundo lugar, como se mencion√≥ anteriormente, desarrollar una GUI rica es complicado y se traduce en sistemas complejos que consisten en muchos elementos que interact√∫an entre s√≠.  Cuanto m√°s complejo sea el sistema que cree, m√°s errores tendr√°.  Y en comparaci√≥n con las aplicaciones web tradicionales que usan MVC, la complejidad de SPA es simplemente una locura. <br><br>  Por ejemplo, para mantener la coherencia en el servidor, puede usar restricciones en la base de datos, la validaci√≥n del modelo y las transacciones.  Si algo sale mal, est√° respondiendo con un mensaje de error.  En el cliente, todo es un poco m√°s complicado.  Tanto puede salir mal porque est√°n sucediendo muchas cosas.  Es posible que algunos registros se guarden correctamente y otros no.  Quiz√°s se desconect√≥ en medio de alg√∫n tipo de operaci√≥n.  Debe asegurarse de que la interfaz de usuario se mantenga constante y que la aplicaci√≥n se est√© recuperando de un error.  Todo esto es posible, por supuesto, solo que mucho m√°s complicado. <br><br><h2>  Desaf√≠os organizacionales </h2><br>  Suena tonto, pero para desarrollar un SPA, necesita desarrolladores que sepan qu√© hacer con √©l.  Al mismo tiempo, no debe subestimar la complejidad del SPA, no debe pensar que cualquier desarrollador web experimentado con la motivaci√≥n y la comprensi√≥n adecuadas puede escribir un gran SPA desde cero.  Necesita las habilidades y la experiencia adecuadas, o espera que se cometan errores importantes.  Lo s√© porque es exactamente mi caso. <br><br>  Este es quiz√°s un desaf√≠o m√°s importante para su empresa de lo que cree.  El enfoque SPA alienta a equipos altamente especializados en lugar de equipos de generalistas: <br><br><ul><li>  Los marcos de SPA son piezas complejas de software que requieren innumerables horas de experiencia para ser productivos.  Solo las personas de su empresa que pasen estas horas en el c√≥digo podr√°n admitir estas aplicaciones. </li><li>  Los marcos de SPA requieren API bien pensadas y productivas.  El cumplimiento de estos requisitos requiere un conjunto completamente diferente de habilidades que las que requieren trabajar con SPA. </li></ul><br>  Lo m√°s probable es que se encuentre con personas que no pueden trabajar con SPA, y que no pueden trabajar en el lado del servidor, simplemente porque no saben c√≥mo. <br><br>  Esta especializaci√≥n puede ser ideal para Facebook o Google y sus equipos que consisten en varias capas de tropas de ingenier√≠a.  ¬øPero ser√° bueno para su equipo de 6 personas? <br><br><h2>  Rieles modernos </h2><br>  Hay 3 cosas que entran en los Rails modernos que pueden cambiar de opini√≥n sobre el desarrollo de aplicaciones web modernas: <br><ul><li>  uno de ellos es Turbolinks y esta es una explosi√≥n cerebral </li><li>  el otro es un viejo amigo que hoy se pasa por alto: respuestas SJR y solicitudes simples de AJAX para renderizar </li><li>  y el √∫ltimo fue agregado recientemente: Est√≠mulo </li></ul><br>  Es dif√≠cil entender qu√© es aplicar cualquier enfoque sin jugar con √©l.  Por lo tanto, har√© algunas referencias a Basecamp en las siguientes secciones.  No tengo nada que ver con Basecamp, excepto como un usuario feliz.  En cuanto a este art√≠culo, este es solo un buen ejemplo en vivo de Rails modernos que puedes probar gratis. <br><br><h2>  Turbolinks </h2><br>  La idea detr√°s de Turbolinks es simple: agilice su aplicaci√≥n reemplazando por completo la recarga de p√°ginas con solicitudes AJAX que reemplacen el elemento ``.  La brujer√≠a interna que hace este trabajo est√° oculta.  Como desarrollador, puede centrarse en la programaci√≥n tradicional del lado del servidor. <br><br>  Turbolinks est√° inspirado en pjax y pas√≥ por varias revisiones. <br><br>  Sol√≠a ‚Äã‚Äãpreocuparme por su rendimiento.  Estaba equivocado  La aceleraci√≥n es enorme.  Lo que me convenci√≥ fue c√≥mo lo us√© en el proyecto, pero puedes probar la versi√≥n de prueba en Basecamp y jugar con ella.  Intente crear un proyecto con algunos elementos y luego navegue por ellos haciendo clic en las secciones.  Esto le dar√° una buena idea de c√≥mo se ve Turbolinks. <br><br>  No creo que Turbolinks sea simplemente sorprendente con su novedad (pjax - 8 a√±os).  O su sofisticaci√≥n t√©cnica.  Me sorprende c√≥mo una idea simple puede aumentar su productividad en un orden de magnitud en comparaci√≥n con la alternativa al SPA. <br><br>  Perm√≠tanme resaltar algunos de los problemas que soluciona: <br><br><ul><li>  Intercambio de datos.  No lo tienes  No es necesario serializar JSON, crear API o pensar en solicitudes de datos que satisfagan las necesidades del cliente en t√©rminos de rendimiento. </li><li>  Carga inicial  A diferencia del SPA, este enfoque estimula tiempos de carga r√°pidos (por dise√±o).  Para representar la pantalla, puede obtener los datos que necesita directamente de la base de datos.           HTML ‚Äî    . </li><li> :         JavaScript-.           ,         SPA. </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El MVC en el servidor, en la versi√≥n utilizada por Rails y muchos otros marcos, es mucho m√°s simple que cualquiera de las plantillas utilizadas para la arquitectura de GUI enriquecida: obtenga una solicitud, trabaje con la base de datos para satisfacerla y muestre la p√°gina HTML como respuesta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, la limitaci√≥n que siempre se reemplaza tiene un efecto maravilloso: puede concentrarse en la representaci√≥n inicial de las p√°ginas en lugar de actualizar ciertas secciones (o actualizar algunas condiciones en el mundo SPA). </font><font style="vertical-align: inherit;">En el caso general, √©l simplemente hace todo.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Duplicaci√≥n de c√≥digo. </font><font style="vertical-align: inherit;">Solo hay una vista de su aplicaci√≥n que vive en el servidor. </font><font style="vertical-align: inherit;">Su modelo de dominio, sus reglas, pantallas de aplicaci√≥n, etc. </font><font style="vertical-align: inherit;">No es necesario duplicar conceptos en el cliente.</font></font></li><li> .    SPA, JavaScript            ,    .  ,         ,    ,   . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenga en cuenta que no estoy hablando de problemas de nombres, sino de solucionarlos. Por ejemplo, GraphQL o la rehidrataci√≥n SPA son soluciones s√∫per inteligentes para problemas muy complejos. Pero, ¬øqu√© pasa si, en lugar de tratar de encontrar una soluci√≥n, te pones en una situaci√≥n en la que estos problemas no existen? Este es un cambio en el enfoque del problema. Y me llev√≥ a√±os apreciar completamente la capacidad de este enfoque para resolver problemas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por supuesto, Turbolinks no es una bala de plata sin problemas. El mayor problema es que puede romper el c√≥digo JavaScript existente:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turbolinks se env√≠a con su evento personalizado de "carga de p√°gina", y los complementos existentes que dependen de cargas de p√°gina regulares no funcionar√°n. </font><font style="vertical-align: inherit;">Hoy en d√≠a hay mejores formas de agregar comportamiento al DOM, pero los widgets heredados no funcionar√°n si no est√°n adaptados.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El c√≥digo JavaScript que modifica el DOM debe ser idempotente porque se puede ejecutar varias veces. </font><font style="vertical-align: inherit;">Nuevamente, esto invalida una gran cantidad de JavaScript existente.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La velocidad es excelente, pero no es como en SPA, que puede manejar algunas interacciones sin cargar el servidor. </font><font style="vertical-align: inherit;">Hablar√© m√°s sobre compromisos m√°s adelante.</font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Representaci√≥n AJAX y respuestas SJR </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øRecuerdas cuando renderizar HTML a trav√©s de Ajax era tendencia hace 15 a√±os? </font><font style="vertical-align: inherit;">Adivina que? </font><font style="vertical-align: inherit;">Esta sigue siendo una gran herramienta en tu arsenal:</font></font><br><ul><li>   HTML       DOM,   ( 100 ). </li><li>    HTML  ,              . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede ver c√≥mo se siente este enfoque en Basecamp abriendo el men√∫ de su perfil haciendo clic en el bot√≥n superior derecho: se </font></font><br><br><img src="https://habrastorage.org/webt/yc/6b/th/yc6bth2x9on2cvks1r34w937xey.gif"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abre al instante. Desde el lado del desarrollo, no necesita preocuparse por la serializaci√≥n JSON y el lado del cliente. Simplemente puede mostrar este fragmento en el servidor, utilizando todas las caracter√≠sticas de Rails. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una herramienta similar que Rails ha incluido a lo largo de los a√±os son las respuestas de JavaScript del lado del servidor (SJR). Le permiten responder a las solicitudes de Ajax (generalmente presentaciones de formularios) con JavaScript que ejecuta el cliente. Proporciona los mismos beneficios que la representaci√≥n AJAX de fragmentos de HTML: se ejecuta muy r√°pido, puede reutilizar el c√≥digo en el lado del servidor y puede acceder directamente a la base de datos para crear una respuesta.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede ver c√≥mo sucede esto si ingresa a Basecamp e intenta crear un nuevo todo. </font><font style="vertical-align: inherit;">Despu√©s de hacer clic en "Agregar todo", el servidor guardar√° el todo y responder√° con un fragmento de JavaScript que agrega un nuevo todo al DOM. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creo que muchos desarrolladores hoy miran el renderizado AJAX y las respuestas SJR con desprecio. </font><font style="vertical-align: inherit;">Yo tambi√©n lo recuerdo. </font><font style="vertical-align: inherit;">Son una herramienta y, como tal, pueden ser abusados. </font><font style="vertical-align: inherit;">Pero cuando se usa correctamente, esta es una soluci√≥n excelente. </font><font style="vertical-align: inherit;">Le permite ofrecer una excelente experiencia de usuario e interactividad a un precio muy bajo. </font><font style="vertical-align: inherit;">Desafortunadamente, como Turbolinks, son dif√≠ciles de evaluar si a√∫n no has luchado contra el SPA.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Est√≠mulo </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus es un marco de JavaScript publicado hace unos meses. </font><font style="vertical-align: inherit;">No le importa el renderizado o la gesti√≥n de estado basada en JavaScript. </font><font style="vertical-align: inherit;">En cambio, es solo una forma agradable y moderna de organizar JavaScript, que utiliza para agregar HTML:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliza MutationObserver para vincular el comportamiento al DOM, lo que significa que no le importa c√≥mo aparece el HTML en la p√°gina. </font><font style="vertical-align: inherit;">Por supuesto, esto funciona muy bien con Turbolinks.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le ahorrar√° una tonelada de c√≥digo repetitivo para adjuntar el comportamiento al DOM, para adjuntar controladores de eventos a eventos y para colocar elementos en el contenedor especificado. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Su objetivo es hacer que su c√≥digo HTML sea legible y comprensible, lo cual es bueno si alguna vez ha encontrado el problema de descubrir qu√© parte de JavaScript est√° actuando en este maldito elemento. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fomenta la persistencia en el DOM. </font><font style="vertical-align: inherit;">Nuevamente, esto significa que no le importa c√≥mo se genera el HTML, lo cual es adecuado para muchos escenarios, incluidos los Turbolinks.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si acepta la ruta Rails, su JavaScript se centrar√° en modificar el c√≥digo HTML del lado del servidor y mejorar la interacci√≥n (con un poco de JavaScript). </font><font style="vertical-align: inherit;">Stimulus est√° dise√±ado para organizar dicho c√≥digo. </font><font style="vertical-align: inherit;">Este no es un sistema SPA y no pretende ser uno. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Us√© Stimulus en varios proyectos, y realmente me gusta. </font><font style="vertical-align: inherit;">Elimina un mont√≥n de c√≥digo repetitivo, est√° construido sobre los √∫ltimos est√°ndares web y se lee muy bien. </font><font style="vertical-align: inherit;">Y algo que me encanta especialmente: ahora esta es la forma est√°ndar de hacer algo que a√∫n ten√≠a que resolverse en cada aplicaci√≥n.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Juego de compromiso </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turbolinks generalmente se vende como "Obtenga todos los beneficios de SPA sin ning√∫n inconveniente". </font><font style="vertical-align: inherit;">No creo que esto sea completamente cierto:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Las aplicaciones creadas con Rails modernos se ven r√°pido, pero SPA a√∫n responder√° m√°s r√°pido a las interacciones que son independientes del servidor. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay escenarios en los que SPA tiene m√°s sentido. </font><font style="vertical-align: inherit;">Si necesita ofrecer un alto nivel de interactividad, debe administrar una gran cantidad de estados, ejecutar una l√≥gica compleja en el lado del cliente, etc. El marco SPA le facilitar√° la vida.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora el desarrollo es un juego de compromiso. </font><font style="vertical-align: inherit;">Y en este juego:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modern Rails le permite crear aplicaciones que son lo suficientemente r√°pidas y se ven geniales. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para una gran variedad de aplicaciones, Rails le permite implementar las mismas funciones con menos c√≥digo y menos complejidad. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creo que con Rails puede obtener el 90% de lo que SPA ofrece con un 10% de esfuerzo. </font><font style="vertical-align: inherit;">En t√©rminos de rendimiento, Rails mata a SPA. </font><font style="vertical-align: inherit;">En cuanto a UX, creo que muchos desarrolladores cometen el mismo error que yo, suponiendo que SPA UX no tiene igual.</font></font> Esto no es asi.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> De hecho, como se discuti√≥ anteriormente, es mejor que sepa lo que est√° haciendo al crear su SPA, o UX en realidad ser√° peor. </font></font><br><br><h2>  Conclusi√≥n </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observo a las compa√±√≠as aceptar masivamente los marcos de SPA y veo innumerables art√≠culos sobre c√≥mo hacer cosas elegantes de estilo SPA. Creo que hay muchos "usos de la herramienta incorrecta para el trabajo", ya que creo firmemente que los tipos de aplicaciones que justifican el uso de SPA son limitados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y digo que lo justifican porque los SPA son complejos. En cualquier caso, espero haberte convencido de esto. No digo que sea imposible crear excelentes aplicaciones de SPA, o que las aplicaciones modernas de Rails son excelentes por definici√≥n, solo un enfoque es s√∫per complicado y el otro es mucho m√°s simple. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mientras preparaba este art√≠culo, me encontr√© con este tweet:</font></font><br><br><img src="https://habrastorage.org/webt/px/54/rc/px54rc9odiplrsororeiozro--c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me hizo re√≠r porque elegir√≠a las primeras opciones si la alternativa no estuviera justificada. Tambi√©n es un representante del tipo de pensamiento de los desarrolladores que aman la complejidad y se nutren de ella, incluso pensando que otras personas con diferentes criterios est√°n locas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de muchos a√±os, me di cuenta de que la complejidad es a menudo una opci√≥n. Pero en el mundo de la programaci√≥n, es sorprendentemente dif√≠cil elegir la simplicidad. Valoramos tanto la complejidad que aceptar la simplicidad a menudo nos hace pensar de manera diferente, lo que por definici√≥n es dif√≠cil.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recuerde que puede deshacerse de los problemas. </font><font style="vertical-align: inherit;">Si elige la ruta SPA, aseg√∫rese de que est√© justificada y comprenda los problemas. </font><font style="vertical-align: inherit;">Si no est√° seguro, experimente con diferentes enfoques y compru√©belo usted mismo. </font><font style="vertical-align: inherit;">Quiz√°s Facebook o Google, en su escala, no pueden darse el lujo de tomar tales decisiones, pero probablemente s√≠. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y si usted es un desarrollador de Rails que dej√≥ Rails hace muchos a√±os, le recomiendo que vuelva a √©l. </font><font style="vertical-align: inherit;">Creo que estar√°s encantado.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es417875/">https://habr.com/ru/post/es417875/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es417865/index.html">Accesibilidad de Android: ¬øun lobo con piel de cordero? Conferencia de Yandex</a></li>
<li><a href="../es417867/index.html">C√≥mo evaluar la duraci√≥n de un proyecto de TI y cu√°ndo no vale la pena hacerlo</a></li>
<li><a href="../es417869/index.html">C√≥mo depurar WebRTC</a></li>
<li><a href="../es417871/index.html">En la meta del turismo suborbital</a></li>
<li><a href="../es417873/index.html">Formas de crear ventanas emergentes</a></li>
<li><a href="../es417877/index.html">C√≥mo Tinder (ligeramente) oculta tu ubicaci√≥n</a></li>
<li><a href="../es417879/index.html">C√≥mo realizar ex√°menes de Microsoft de forma gratuita [por ejemplo, una competencia reciente]</a></li>
<li><a href="../es417881/index.html">El resumen de materiales frescos del mundo del front-end durante las √∫ltimas dos semanas No. 323 (8 al 22 de julio de 2018)</a></li>
<li><a href="../es417883/index.html">Crear un di√°logo para elegir un tono de llamada</a></li>
<li><a href="../es417885/index.html">Sobre M y sobre V y un poco sobre C</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>