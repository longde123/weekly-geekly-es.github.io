<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👧‍👧 👨🏾‍⚕️ 🧘🏾 Jam Cuckoo Berdasarkan Lego Mindstorms ☄️ 👡 🎿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dua setengah tahun yang lalu saya membeli kit Lego Mindstorms EV3 untuk mengambil langkah pertama saya dalam robotika. Setelah menggulung unit ev3dev ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jam Cuckoo Berdasarkan Lego Mindstorms</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417255/">  Dua setengah tahun yang lalu saya membeli kit Lego Mindstorms EV3 untuk mengambil langkah pertama saya dalam robotika.  Setelah menggulung unit ev3dev ke controller dan bermain cukup dengan mesin SSH dan kontrol sensor, saya didinginkan untuk pembelian selama dua tahun.  Alasannya adalah karena saya tidak memiliki imajinasi yang cukup untuk memungkinkannya: setelah beberapa model rakitan dari Lego Technics (baik kotak dan buatan sendiri), saya sudah terbiasa dengan keajaiban seperti mainan yang dikendalikan dari jarak jauh, dan robot sederhana seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">model-model dari Lego yang</a> dipresentasikan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pameran Krakow,</a> sebagai orang yang dulu bekerja pada sistem telemekanik, tidak lagi mengilhami inspirasi yang cukup.  Saya tidak benar-benar ingin mengulangi pengalaman orang lain. <br><br>  Pada akhirnya, saya sadar: jam kukuk bisa menjadi model yang cukup kompleks, menarik, praktis, dan tidak terlalu usang.  Terinspirasi oleh ide ini, saya mulai berbisnis. <br><a name="habracut"></a><br>  Menurut ide saya, model itu tidak hanya menjadi mainan, tetapi perangkat yang berfungsi penuh.  Ini sepenuhnya mungkin: jam menggantung di dinding saya dan menampilkan waktu saat ini dalam mode 24/7.  Saya tidak mengatur sendiri tugas mereproduksi mekanisme aslinya dalam semua detail - misalnya, panahnya independen, suara direproduksi melalui speaker pengontrol, dan bobot serta pendulum digunakan khusus untuk lingkungan sekitar.  Karena itu, setelah mentransfer semua pekerjaan utama ke bagian perangkat lunak, saya mengumpulkan mekanisme dalam versi sesederhana mungkin.  Saya tidak mendokumentasikan seluruh proses perakitan, jadi saya tidak dapat mengumpulkan model lagi dalam bentuk yang sama;  Namun demikian, prinsip-prinsip dasar pemasangan perangkat lunak dan mekanika sedemikian rupa sehingga program harus bekerja dengan modifikasi minimal pada model lain yang dirakit sesuai dengan prinsip yang sama. <br><br>  Jam tangan dalam berbagai bentuk disajikan dalam video yang saya posting di Youtube: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/rCxNfV3xOM0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Informasi dasar tentang model disajikan dalam video.  Di bawah ini saya akan memberi tahu Anda sedikit lebih detail tentang mekanika, tentang perangkat lunak, serta tentang masalah yang muncul selama perakitan dan pengoperasian desain ini. <br><br><h2>  Mekaniknya </h2><br>  Perakitan bagian mekanik memakan waktu 6 hari.  Setelah meletakkan kotak-kotak Lego di atas meja, selama liburan Tahun Baru, saya mengumpulkan mekanisme yang berbeda dari versi final hanya di pintu-pintu di mana cuckoo hidup (lebih lanjut tentang ini di bawah).  Saya tidak punya keahlian desain khusus, jadi arloji itu adalah kotak persegi panjang dengan dua tangan dan sebuah tombol bertanda titik-titik di sisi depan.  Di bagian atas arloji terdapat kompartemen yang ditutup oleh dua pintu, di mana cuckoo telah duduk, dan di bagian bawah terdapat pendulum skematik dan dua beban.  Bagian diambil dari beberapa set Lego: satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lego Mindstorms EV3 (31313)</a> , dua <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">grader Volvo (42030)</a> , satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">truk Mercedes dengan booming pneumatik (42043)</a> dan satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">truk crane (42009)</a> .  Terlepas dari banyaknya set, hampir tidak ada detail yang cukup untuk model dengan ukuran ini - penutup arloji dirakit dari potongan-potongan warna yang berbeda, yang, bagaimanapun, tidak menarik perhatian, karena dengan pemasangan di dinding itu berada di atas ketinggian mata. <br><br>  Sebagai menit, bar standar Lego Technics untuk 15 unit digunakan.  Itu ditempatkan pada poros, dengan kuat menghubungkannya ke mesin.  Dengan demikian, akurasi pengaturan jarum menit ternyata cukup sehingga dapat digunakan untuk menentukan waktu yang akurat untuk menit.  Jarum penunjuk jam lebih pendek dan dipasang pada mekanisme putar.  Ini terhubung ke mesin melalui beberapa roda gigi, sehingga ada reaksi yang cukup nyata - namun, tidak begitu besar sehingga menyebabkan masalah dengan menentukan waktu. <br><br>  Tangan digerakkan oleh dua motor besar (LM).  Selain itu, dipasangkan dengan masing-masing jarum eksternal, yang lain berfungsi, yang internal - untuk jarum menit, ditetapkan pada sumbu yang sama dengan yang pertama, dan untuk jam, mekanisme putar digandakan di bagian dalam arloji.  Tujuan panah dalam adalah untuk menekan tombol (Sensor sentuh) sambil melewati panah luar melalui posisi atas.  Dengan demikian, pengontrol memiliki kemampuan untuk menentukan posisi panah segera setelah dinyalakan, dan mengatur posisi mereka yang benar berdasarkan waktu sistem, menyelamatkan pengguna dari keharusan memasukkan secara manual panah. <br><br>  Bobot memiliki fungsi dekoratif murni.  Awalnya, saya berpikir untuk melakukan satu berat, yang perlahan-lahan akan lebih rendah (seperti pada arloji normal), dan kemudian dengan cepat menarik ke posisi atas (analog dari lilitan manual jam pendulum).  Saya kemudian menolak opsi ini karena beberapa alasan.  Pertama, mekanisme perpindahan rasio gigi antara mesin dan bobot menambah kompleksitas ekstra pada model (dan penggerak pendulum dari mesin yang sama hanya menambahnya).  Kedua, eyeliner cepat, apa pun kata orang, akan menjadi operasi yang berisik, tetapi saya ingin arloji bekerja setenang mungkin.  Ketiga, dalam jam kukuk konvensional, biasanya ada dua bobot (satu menyediakan jam, kukuk kedua), dan menempatkan di bagian bawah arloji segera dua roda flip untuk rantai akan menyebabkan peningkatan yang lebih besar dalam ukuran model. <br><br>  Melanjutkan dari ini, saya mengambil jalan yang lebih sederhana: Saya benar-benar memasang dua beban pada arloji, tetapi menempatkannya di sirkuit umum yang dilemparkan ke atas satu roda penggerak.  Dalam versi ini, bobot selalu bergerak dalam arah anti-cuaca, turun secara bergantian.  Perilaku ini tidak ada hubungannya dengan jam pendulum nyata, tetapi terlihat cukup menarik. <br><br>  Rantai terbuat dari trim biasa tiga unit menggunakan kombinasi kapak dan piston: piston tergelincir adalah bagian yang agak langka, dan saya menggunakan kapak untuk menggandakan panjang rantai yang dihasilkan.  Itu tidak mudah untuk membuat roda yang menggerakkan rantai seperti itu tanpa selip dan rusak, tetapi pada akhirnya, itu mungkin. <br><br>  Sedangkan untuk mengalihkan arah pergerakan bobot, ide pertama saya adalah membuatnya menjadi murni mekanis: ketika mengangkat ke dinding bawah kotak arloji, sumbu lebar yang dipasang langsung di atas beban menekan pelat melalui rantai yang dilewati rantai dan menyebabkan roda berputar.  Saya akan menggunakan elemen switching sama dengan, misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">crane 42009</a> : roda penggerak, penggeser, memasuki kopling dengan tetangga kanan atau kiri.  Gagasan ini, bagaimanapun, tidak terbang: pelat tekanan membawa bagian geser ke posisi tengah ketika tidak terlibat dengan tetangga kanan atau kiri, torsi berhenti datang ke roda, dan sakelar membeku di posisi tengah. <br><br>  Untuk memperbaiki situasi ini, saya memutuskan untuk menambahkan segitiga yang dapat dipindah-pindah ke sirkuit ini, kedua sisinya memiliki panjang tetap, dan yang ketiga akan diwakili oleh bagian geser pegas yang digunakan dalam suspensi truk derek yang sama.  Arti dari desain ini adalah bahwa segitiga selalu berada di sisi panel tekanan yang sesuai dengan berat angkat: ketika berat mencapai bagian atas, panel menekan pada segitiga, pegas menekan, segitiga melewati posisi keseimbangan dan kemudian "melempar" ke sisi lain, melepaskan energi yang disimpan oleh pegas.  Energi ini, menurut rencanaku, seharusnya menggeser sakelar kecepatan melalui posisi setimbang, segera menerjemahkannya ke posisi berlawanan. <br><br>  Namun, saya gagal menstabilkan sistem ini.  Dengan ukuran jam, Anda dapat memahami bahwa mekanisme miniatur bukan hal saya, tetapi dengan peningkatan ukuran simpul, distorsi yang timbul di dalamnya menyebabkan gesekan, yang memakan sebagian besar energi switching.  Setelah tersiksa dengan mekanisme ini, saya akhirnya memutuskan untuk memindahkan semua pekerjaan kotor ke mikrokontroler dengan memasang tombol di atas panel dorong (Sensor sentuh) alih-alih mekanik yang rumit. <br><br>  Sedikit aritmatika sederhana.  EV3 memiliki empat input dan empat output.  Dua input dan dua output sudah ditempati oleh tombol dan mesin panah, masing-masing.  Menambahkan ke sirkuit ini motor memutar roda rantai dan dua tombol berarti bahwa, pertama, saya tidak punya port gratis untuk menghubungkan sensor posisi cuckoo (saya pikir menggunakan pengukur jarak optik untuk keperluan ini), dan kedua, bahwa node yang tersisa (cuckoo dan pendulum) hanya memiliki satu mesin.  Saya mempertimbangkan opsi di mana kedua panel dorong di atas beban akan terhubung ke tombol umum, tetapi menolaknya, karena jika saat menyalakan jam, salah satu bobot akan berada di posisi atas, menahan tombol, arloji tidak akan memiliki cukup informasi untuk memilih arah pergerakan rantai. <br><br>  Karena pendulum lebih mudah dikaitkan dengan mekanisme gerakan rantai daripada dengan cuckoo (baik dalam hal sifat gerakan dan lokasinya), saya menempatkan motor besar lainnya di bagian bawah tubuh, yang, pertama, menggerakkan pendulum bolak-balik (1 putaran mesin) diterjemahkan menjadi satu ayunan lengkap pendulum), dan kedua - melalui gigi reduksi memutar roda, yang menggerakkan rantai.  Sistem semacam itu memiliki kerugian bahwa ketika membalikkan arah gerakan rantai dan, dengan demikian, putaran mesin, bandul juga mengubah arah gerakan, bahkan jika itu berada di posisi tengah, yang mungkin terlihat jelek.  Namun, mengubah arah pergerakan bobot adalah operasi yang agak jarang, jadi saya mengabaikan masalah ini.  Kelemahan lain dari perakitan saya adalah permainan yang agak tergantikan di drive pendulum, itulah sebabnya ketika bergerak lambat, pendulum berhenti di titik yang lebih rendah untuk sepersekian detik untuk mata yang terlihat.  Saya terlalu malas untuk memperbaiki masalah ini. <br><br>  Berbicara tentang kecepatan bandul.  Setelah bereksperimen dengannya, saya memilih nilai 30 derajat mesin per detik.  Ini berarti bahwa pendulum berosilasi sepenuhnya dalam 12 detik.  Ini banyak, namun, dengan meningkatnya kecepatan, mesin mulai melolong, dan prospek untuk terus mendengarkan lagunya tidak tersenyum sama sekali kepada saya.  Itu terlalu malas untuk melalui mekanisme dan memperkenalkan overdrive, jadi saya memilih format "lunar".  Rasio roda gigi antara mesin dan roda penggerak rantai sedemikian rupa sehingga beratnya beralih dari posisi bawah ke posisi atas dalam 40-50 menit. <br><br>  Tetap bebas setelah semua manipulasi sebelumnya, port EV3 menempati motor tengah (motor Medium), yang menggerakkan cuckoo.  Cuckoo itu sendiri dirakit dari bagian teknik Lego yang sama.  Ketinggiannya, burung itu mencapai 11 unit dan ditempatkan pada batang yang dapat ditarik (di atas ini di truk derek yang disebutkan di atas, pemberhentian jarak jauh ditempatkan).  Mekanisme miniatur memperkenalkan transmisi antara sayap burung dan ekornya, di mana saya melemparkan kabel ke dalam arloji.  Panjang kabel dipilih sehingga cuckoo pergi sepenuhnya dengan sayapnya ke bawah dan hanya di ujung gerakan sedikit merentangkannya.  Ternyata atmosfer - hanya pada tingkat mekanisasi model jam tangan sederhana.  Tidak adanya sensor posisi dikompensasi oleh fakta bahwa drive cuckoo dinyalakan melalui gigi yang tergelincir - ini membantu untuk tidak merusak mesin, bahkan jika itu mencoba untuk memindahkan cuckoo melampaui titik batas.  Pintu-pintu itu terhubung erat ke papan tempat burung itu dipasang, dan terbuka bersamaan dengan kepergian cuckoo itu sendiri. <br><br>  Awalnya, saya menggunakan 11 oleh 5 untuk 1 unit panel sebagai pintu, tetapi ini ternyata merupakan ide yang buruk: ujung-ujungnya tidak bulat, dan pintu-pintu, yang menempel pada bagian yang berdekatan, sering diblokir, meninggalkan cuckoo di dalam.  Video ini menunjukkan versi kedua dari rakitan pintu - trim biasa dengan tepi bundar tidak menyebabkan masalah seperti itu.  Selain itu, versi "papan" pintu terbuka dan tertutup lebih tenang. <br><br>  Arloji terpasang pada tali yang dibaut ke dinding.  Keseluruhan struktur memiliki berat lebih dari satu kilogram. <br><br>  Pada ini, deskripsi bagian mekanik, pada prinsipnya, berakhir.  Hanya tetap menyebutkan bahwa model ini 100% dirakit dari Lego Mindstorms dan Lego Technics, dan satu-satunya bagian yang tidak berlaku untuk kit ini adalah kabel listrik, yang saya solder ke EV3 saya, sehingga saya tidak perlu mengganti baterai setiap saat.  Kawat ini menuju ke catu daya yang terhubung ke stopkontak. <br><br><h2>  Programnya </h2><br>  Majelis ev3dev menyediakan binder untuk banyak bahasa pemrograman.  Agar tidak mengalami kesulitan dengan perakitan, saya memutuskan untuk membatasi diri pada skrip Python.  Skrip ini tersedia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di repositori GitLab</a> .  Di bawah ini saya akan secara singkat membahas fungsinya. <br><br>  Kode yang menggerakkan panah relatif sederhana - menghitung ulang menit dan jam ke dalam derajat rotasi mesin menggunakan data pada jumlah derajat mesin per putaran panah dan pergeseran awal panah dari posisi vertikal.  Semua kesenangan dimulai ketika program mencoba untuk mendapatkan data ini. <br><br>  Seperti yang sudah saya katakan, diputuskan untuk meninggalkan koneksi manual penembak.  Sebaliknya, saat start-up, arloji melakukan kalibrasi dengan menentukan parameter geometri.  Kalibrasi dilakukan untuk kedua tangan secara independen satu sama lain. <br><br>  Algoritma kalibrasi adalah sebagai berikut.  Pertama, mesin mulai berputar pada kecepatan yang relatif tinggi (saya menggunakan nilai empiris 180 derajat per detik) sampai sinyal konfirmasi berasal dari tombol yang memperbaiki posisi atas panah.  Setelah itu, mesin mengatur ulang kecepatan ke 30 derajat per detik dan terus memutar panah searah jarum jam (arah putaran mesin dijahit dalam program) hingga terpisah dari titik pembukaan terakhir tombol sebesar 70 derajat.  Setelah itu, panah melewati posisi atas di arah yang berlawanan, memperbaiki penutupan pertama dan bukaan terakhir dari kontak (tombol dapat berbunyi di posisi tepi).  Beranjak dari pembukaan terakhir dengan 70 derajat yang sama, panah sekali lagi mengubah arah gerak ke garis lurus, dan prosedur untuk mendaftarkan sirkuit pertama dan sirkuit terakhir diulang. <br><br>  Diyakini bahwa posisi atas panah sesuai dengan rata-rata aritmatika antara keempat nilai yang diperoleh.  Praktek menunjukkan bahwa perkiraan ini cukup baik - penyimpangan posisi target jarum menit dari yang sebenarnya jarang lebih dari 1 langkah dan hampir tidak pernah melebihi dua langkah.  (Video menunjukkan penyimpangan yang lebih signifikan karena fakta bahwa untuk tujuan pemotretan, saya menerjemahkan waktu sistem, dan tangan bergerak lebih cepat daripada selama operasi normal, meningkatkan kesalahan koreksi pada setiap revolusi, lihat di bawah.) Untuk arah searah jarum jam, backlash memakan akurasi, tetapi algoritma, tentu saja, menggunakan yang sama. <br><br>  Setelah menghitung posisi atas panah dan perbedaan antara saklar pertama pada sensor dan sebenarnya posisi atas panah (nilai ini akan diperlukan untuk koreksi, lihat di bawah), algoritma kalibrasi kembali meningkatkan kecepatan mesin hingga 180 derajat per detik dan mengulangi pencarian untuk posisi atas.  Perbedaan antara dua posisi atas berturut-turut menentukan panjang putaran penuh panah dalam satuan putaran mesin.  Prosedur pencarian posisi teratas diulang lima kali, yang memungkinkan kami untuk meratakan nilai yang diperoleh dan sedikit meningkatkan akurasi. <br><br>  Setelah kalibrasi selesai, tangan masuk ke mode tampilan waktu saat ini.  Selain itu, pada setiap lingkaran panah, algoritma memperbaiki posisi di mana pemutus sirkuit pertama kali ditutup.  Perbedaan antara sudut aktual dan yang diharapkan dari putaran mesin saat ini adalah jumlah koreksi;  Jadi, bahkan jika panjang lingkaran penuh tidak dihitung dengan benar pada tahap kalibrasi (hasil debug menunjukkan bahwa deviasi jarang melebihi 1 derajat), koreksi pada setiap lingkaran tidak memungkinkan panah untuk bergeser karena akumulasi kesalahan. <br><br>  Harap dicatat bahwa satu-satunya informasi tentang rasio mesin dan panah, yang secara eksplisit dijahit ke dalam program, adalah arah putaran mesin (maju atau mundur) yang sesuai dengan gerakan maju panah.  Berkat sensor posisi, kebutuhan untuk data pada rasio roda gigi dan posisi awal panah menghilang.  Jadi, jika Anda mengumpulkan arloji yang, selain jam dan menit, jarum detik juga akan disajikan, algoritme akan memungkinkan Anda untuk menggunakannya dengan menambahkan hanya beberapa baris, tanpa membuang waktu untuk menghitung gigi. <br><br>  Apa yang hilang dalam program gerakan panah adalah perlindungan terhadap kelebihan atau hilangnya keakuratan.  Saya tidak menyelidiki pertanyaan tentang apa yang akan terjadi sebelumnya: kedalaman bit dari sudut putaran mesin akan meluap, atau panah akan mulai bergerak tersentak-sentak karena keberangkatan akurasi dalam angka yang lebih tinggi dari angka floating-point.  Namun, latihan menunjukkan bahwa pada waktu beberapa minggu, hal seperti ini tidak terjadi.  Jika saya pernah menemui masalah ini, kemungkinan besar saya hanya akan menambahkan perintah pengaturan ulang mesin pada setiap putaran, dengan koreksi sudut yang sesuai dalam program. <br><br>  Jika kelas Hand di program saya bertanggung jawab untuk pergerakan panah, maka kelas LedIndication kemudian menyala, lalu matikan LED pada panel depan EV3.  Saya tahu bahwa efek yang sama dapat dicapai dengan satu tim, tetapi pada awalnya fitur ini dirancang untuk melacak crash program, dan kemudian tetap ada.  Tidak ada yang lebih menarik di kelas ini. <br><br>  Kelas Pendulum bertanggung jawab atas pergerakan bobot dan pendulum.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritme hanya menyalakan mesin dalam satu arah dan memutarnya dengan kecepatan konstan sampai tombol yang sesuai dengan pengangkatan lengkap berat ini dijepit; setelah itu, arah gerakan motor terbalik. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di kelas ini, omong-omong, perlindungan terhadap crash program disajikan, yang terdiri dari fakta bahwa mesin menyala hanya 2 detik dengan periode pembaruan perintah 1 detik. Jika saya menyalakan mesin dalam mode rotasi konstan, maka ketika program mogok, mengistirahatkan tombol, saya akan terus bergerak ke atas, yang dapat menyebabkan motor kelebihan beban, tergelincir roda gigi atau bahkan kerusakan pada mekanisme. Perlindungan memungkinkan Anda untuk mencegah masalah ini.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Akhirnya, kelas Cuckoo menjalankan cuckoo setiap kali nilai 59 menit diganti dengan nilai 0 menit. Pertama, kukuk didorong sepenuhnya, lalu kukuk sekali, mereproduksi suara melalui speaker EV3, dan kemudian lagi bersembunyi di kotak arloji. Gerakan ini diulangi sesuai dengan jam saat ini - dari 1 hingga 12 kali. Suara itu diambil dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perpustakaan FreeSound gratis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan diedit agar terdengar lebih baik di EV3. (Saya tidak dapat mengatakan bahwa saya senang dengan hasilnya, karena bass hampir tidak terdengar ketika palu mengenai musim semi.)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penundaan antara perintah penghapusan kukuk dan perintah reproduksi suara dipilih secara eksperimental sehingga suara terdengar pada saat ketika kukuk mencapai posisi ekstrem. Namun, ev3dev memiliki sedikit masalah dengan ini: karena pemuatan sistem, suara lambat secara berkala, terutama jika ada koneksi SSH ke jam pada saat itu. Penundaan bisa sampai beberapa detik. Saya tidak yakin apakah ini masalah untuk controller saya, build itu sendiri, atau pembaruan yang diterima dari jaringan (setelah menginstal ev3dev, saya tidak terbiasa menggunakan perintah apt get upgrade, walaupun saya mungkin seharusnya tidak melakukan itu), tetapi rata-rata cuckoo terdengar normal, jadi Saya tidak akan men-debug pertanyaan ini.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ngomong-ngomong, bug terhubung dengan penundaan suara di salah satu versi awal program, ketika saya belum menambahkan harapan akhir pemutaran: jika kukuk berhasil bersembunyi dan muncul kembali selama waktu tunda, suara berikutnya “tertelan”, dan jumlah “kukuk” tidak cocok. jumlah jam. Kemudian, saya memodifikasi program sehingga cuckoo mengharapkan suara berakhir pada posisi ekstrem dan baru kemudian pergi untuk siklus berikutnya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interval setengah jam disuarakan oleh sinyal tunggal yang diperoleh dari suara asli yang sama. Cuckoo tidak muncul.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kecepatan putaran mesin yang menggerakkan cuckoo, dan sudut rotasi dijahit dalam program. Pada awal program, kukuk ditarik ke dalam kasing - dengan mempertimbangkan gigi selip yang dipasang pada sumbu mesin, operasi ini aman, tetapi memiliki efek jika kukuk berada di luar kasing pada saat jam mulai. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agar tidak mengganggu tidur, cuckoo cuckoo hanya ada di siang hari. Hari kerjanya dimulai pukul sepuluh pagi, dan terakhir kali ia bersuara adalah tengah malam. Saya juga mematikan kukuk pada saat saya mendapat panggilan kerja mingguan di Skype, agar tidak mengganggu.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Program diinstal sebagai layanan dan dimulai ketika Debian dimulai. </font><font style="vertical-align: inherit;">Dengan demikian, itu cukup untuk menyalakan jam, dan mereka melakukan semuanya sendiri. </font><font style="vertical-align: inherit;">Waktu diambil dari Internet - di EV3 saya ada dongle WiFi. </font><font style="vertical-align: inherit;">Setelah jam dimulai, saya biasanya memutus jaringan, agar tidak membuat beban tambahan pada prosesor. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Program</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ini tersedia di bawah lisensi BSD. </font><font style="vertical-align: inherit;">Jika Anda memiliki keinginan untuk membangun model yang serupa dan menggunakan perangkat lunak saya, saya hanya akan senang.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id417255/">https://habr.com/ru/post/id417255/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id417243/index.html">Instal 3CX SBC Session Edge Controller di Windows, Raspberry Pi, atau Debian 9</a></li>
<li><a href="../id417245/index.html">Erlang untuk IoT</a></li>
<li><a href="../id417247/index.html">VSCE # 1: Podcast Pengusaha Media</a></li>
<li><a href="../id417249/index.html">Kamar Audit AS memperingatkan: SpaceX dan Boeing sedang menunggu penundaan baru, gangguan AS dalam penerbangan ke ISS dimungkinkan</a></li>
<li><a href="../id417251/index.html">Menggunakan mata Ikan pada Raspberry Pi 3 dengan ROS - Bagian 1</a></li>
<li><a href="../id417257/index.html">C menunjuk sebagai paradoks linguistik</a></li>
<li><a href="../id417259/index.html">Acara digital di Moskow dari 16 Juli hingga 22 Juli</a></li>
<li><a href="../id417263/index.html">JavaScript sebagai perwujudan kejahatan</a></li>
<li><a href="../id417265/index.html">10 besar: laporan terbaik dari DotNext 2017 Moscow</a></li>
<li><a href="../id417269/index.html">Tempat mencari desainer: penghargaan internasional bergengsi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>