<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåù üßöüèæ üö† ¬øEs posible usar Tibero en lugar de Oracle? Y es necesario üôÉ üàÇÔ∏è üôçüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este art√≠culo, le dir√© c√≥mo pens√© seriamente en una alternativa a Oracle. ¬øPero qu√© hay de Postgre, dices? S√≠, pero hay matices. Primero trataremos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øEs posible usar Tibero en lugar de Oracle? Y es necesario</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413147/">  En este art√≠culo, le dir√© c√≥mo pens√© seriamente en una alternativa a Oracle.  ¬øPero qu√© hay de Postgre, dices?  S√≠, pero hay matices.  Primero trataremos la pregunta "¬øPor qu√© Oracle?" <br>  L√≥gica empresarial en nuestra base de datos.  En el libro de Oracle para profesionales, Tom Kite escribe <br><blockquote>  Cuando desarrollo aplicaciones de bases de datos, uso un mantra muy simple: <br><br>  si es posible, h√°galo con una sola instrucci√≥n SQL; <br>  si esto no se puede hacer con una sola instrucci√≥n SQL, h√°galo en PL / SQL; <br>  si esto no se puede hacer en PL / SQL, intente usar un procedimiento almacenado de Java; <br>  si esto no se puede hacer en Java, h√°galo como un procedimiento externo en C; <br>  Si esto no se puede implementar como un procedimiento externo en C, debe pensar seriamente por qu√© se hace esto ... </blockquote>  y en el dise√±o del sistema, sigo esta regla.  Los tipos de objetos en Oracle son especialmente agradables; con su ayuda, la l√≥gica empresarial compleja se implementa de manera hermosa y conveniente de acuerdo con todos los c√°nones de OOP. <br><br>  Oracle es caro.  Comprarlo y no usar todo lo que contiene ser√° un error. <br>  Y, sin embargo, siempre hay un factor de equipo y competencias.  Si su equipo ha estado desarrollando todo en Oracle durante diez a√±os, liberar Postgre puede ser doloroso. <br><br>  Oracle es caro.  Tan caro que puede escribir sobre eso varias veces, y no pensar en la necesidad de Oracle en un nuevo proyecto ser√° un error. <br><br>  Varias veces ya me encontr√© con publicaciones sobre el producto coreano Tibero, supuestamente creado para reemplazar a Oracle.  Y ahora tienen una atracci√≥n de generosidad sin precedentes: las licencias est√°ndar se distribuyen para los desarrolladores casi gratis, por un d√≥lar por un enchufe.  Entonces, entendemos: lo que los coreanos pueden ofrecer en este momento.  Con los autom√≥viles, despu√©s de todo, ¬°ya (casi) tuvieron √©xito! <br><a name="habracut"></a><br><h3>  Descripci√≥n del experimento </h3><br>  Los representantes de TMaxSoft dicen que Tibero es casi 100% compatible con Oracle, y que existe una utilidad para la migraci√≥n de la base de datos.  Decid√≠ tomar mi base de productos, con l√≥gica de negocios en Oracle, usando todo el encanto de OOP en PL \ SQL, y transferirla a Tibero.  En esta publicaci√≥n, no consideramos la migraci√≥n de los datos en s√≠, es menos interesante y todav√≠a no he intentado una migraci√≥n completa. <br><br>  La tarea es esta: <br><br>  1. Tablas de transferencia. <br>  2. Transferencia de √≠ndices, claves, etc. <br>  3. Transfiera paquetes y disparadores. <br>  4. Transferencia de tipos de objetos. <br><br>  Pero primero, tratemos con las herramientas. <br><br><h3>  Las herramientas </h3><br>  Google sabe poco sobre Tibero.  Descargamos la base de datos en forma de m√°quina virtual en la que ya se ha implementado todo.  Solo hay dos herramientas: una utilidad para migrar T-UP y un IDE para DBA y el desarrollador tbAdmin.  Todo se hace en Java, se ejecuta en cualquier lugar, en teor√≠a. <br><br>  T-UP se parece a esto: <br><br><img src="https://habrastorage.org/webt/oi/gn/_a/oign_ablqrxbbwtiutwczw6adi0.jpeg"><br>  <i>Ventana principal: conexiones de bases de datos.</i> <br><br><img src="https://habrastorage.org/webt/yz/3f/cx/yz3fcxrlhslegdkikvd_9iv5qx4.jpeg"><br>  <i>Si hace clic en Opciones, puede configurar algo.</i> <br><br><img src="https://habrastorage.org/webt/vt/rb/9a/vtrb9a6od2ep0tjh_mhczcd9zv8.jpeg"><br>  <i>Lo m√°s importante, puede seleccionar los tipos de objetos para migrar.</i> <br><br>  No se encontraron instrucciones, ayuda, consejos. <br>  Da la impresi√≥n de una utilidad casera.  A veces volaba con ejecuciones, pero b√°sicamente trabajaba seg√∫n fuera necesario. <br><br>  La segunda herramienta es el IDE Tibero Admin.  Se puede descargar desde el sitio web de TMaxSoft si se registra all√≠ primero.  Tambi√©n puede obtener una licencia de demostraci√≥n all√≠. <br><br><img src="https://habrastorage.org/webt/7n/fh/py/7nfhpypymbdibdgxbntldsa0jrm.jpeg"><br>  <i>Tibero Admin parece un viejo IDE t√≠pico</i> <br><br>  Estoy acostumbrado a la excelente herramienta de desarrollador PL / SQL de Allround Automations.  En Tibero Admin, olv√≠date de las indicaciones contextuales, nada aparecer√° en tu pantalla despu√©s de hacer clic en el "punto", no te agregar√° los nombres de tablas y objetos.  Simplemente escriba el c√≥digo, programadores.  Ayuda, documentaci√≥n?  No  Hay documentaci√≥n en el DBMS en el sitio web del fabricante, tan interesante ... sin una b√∫squeda.  No se encontr√≥ documentaci√≥n para el IDE.  Sin embargo, no hay nada complicado.  Hubo problemas con la autorizaci√≥n: result√≥ que el usuario debe tener derechos de DBA para ingresar a tbAdmin.  E interesante con los puertos <b>, 8630 es para SYS, para todos los otros 8629</b> . <br><br>  Errores IDE.  De vez en cuando, cuando tocas en alg√∫n lugar, el <i>√≠ndice de</i> mensajes est√° <i>fuera de l√≠mites</i> , un mensaje como <b>java.lang. Excepci√≥n: el compromiso exitoso es</b> muy aterrador.  Es necesario tener en cuenta los diferentes tipos de ventanas SQL y PSM: en la primera, es poco probable que compile el c√≥digo del programa; en la segunda, no ejecutar√° la solicitud.  Despu√©s de PL / SQL Developer: una apariencia miserable de una mano izquierda ... <br><br>  Llegando al experimento. <br><br><h3>  Migraci√≥n de tablas </h3><br>  Seleccionamos el esquema en T-UP, hacemos clic en Migrar, primero seleccionamos las "tablas" en las opciones y comienza el proceso de transferencia.  Me encontr√© con dos problemas. <br><br>  TABLAS ESPACIOS.  Decid√≠ transferirlos a tablas, pero Tibero parece haber tratado de reservarles tanto espacio como ocupan en la base de datos de origen.  Y esto es mucho, y √©l no pudo.  Cre√© los espacios de tabla manualmente, y luego todo sali√≥ bien. <br><br>  Adem√°s de las tablas con valores de fecha POR DEFECTO del tipo '31 .12.2019 '.  En la configuraci√≥n de Oracle, tenemos este formato registrado, para Tibero ayuda <pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">session</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> nls_date_format=<span class="hljs-string"><span class="hljs-string">'DD.MM.YYYY'</span></span>;</code> </pre>  pero no hay ning√∫n lugar para que T-UP lo haga.  Los colegas de TMaxSoft aconsejaron configurar la variable TB_NLS_DATE_FORMAT = "DD.MM.YYYY", pero no me ayud√≥ personalmente.  Tal vez hice algo mal.  Tuve que crear tablas con tales par√°metros manualmente, no hay muchos de ellos. <br><br>  Resultado del primer paso: mover la estructura de la tabla de Oracle a Tibero funciona bien. <br><br><h3>  Claves e √≠ndices. </h3><br>  Seleccionamos las casillas de verificaci√≥n √çNDICE, RESTRICCI√ìN en T-UP y reenviar. Surgieron problemas con CHECK debido a la misma situaci√≥n con la fecha.  En general, se han creado √≠ndices, claves primarias, verificaciones.  Pero no pude encontrar claves for√°neas en la base de datos reci√©n creada.  Y la migraci√≥n de constantes termina en el registro T-UP con el mensaje <b><i>"Error de migraci√≥n: java.lang.NullPointerException".</i></b>  ¬øCoincidencia?  No lo creo ... <br><br><h3>  Paquetes y disparadores. </h3><br>  En los disparadores no tengo nada complicado, fueron creados perfectamente.  Es cierto que no verifiqu√© c√≥mo funcionan, esta ser√° una historia separada. <br><br>  Hablemos de procedimientos y funciones que implementan parte de la l√≥gica.  Aqu√≠, desafortunadamente, no todo sali√≥ a la perfecci√≥n. <br><br>  De una manera simple: en el <s>ej√©rcito de</s> Tibero no hay una palabra <b>NUEVA</b> .  La construcci√≥n o: = NEW t_my_type () no se compilar√°.  En Oracle, es cierto, no obligatorio, pero siempre escrib√≠ por alguna raz√≥n.  Tuve que borrar. <br><br>  El rol DBA permite que la ventana SQL acceda a todas las tablas.  Sin embargo, al compilar un paquete o procedimiento en un esquema con dicho rol, al usar tablas y objetos de otro esquema, debe otorgar la concesi√≥n correspondiente al objeto.  La magia del rol de DBA no ayuda aqu√≠. <br><br>  De lo espec√≠fico.  Obtuve un FORALL extra√±o en mi base de datos, que, sin embargo, funciona. <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--     PROCEDURE save_tar_test AS TYPE number_table IS TABLE OF NUMBER INDEX BY BINARY_INTEGER; TYPE date_table IS TABLE OF DATE INDEX BY BINARY_INTEGER; TYPE varchar50_table IS TABLE OF VARCHAR2(50) INDEX BY BINARY_INTEGER; TYPE char1_table IS TABLE OF CHAR(1) INDEX BY BINARY_INTEGER; TYPE t_tar_det_out_upd_rec_test IS RECORD ( --   cmr_tar_det_id number_table, in_stamp date_table, err_code_id number_table ); tdou_rec t_tar_det_out_upd_rec_test; BEGIN --   ,  tdou_rec  :      Oracle FORALL j IN 1 .. tdou_rec.cmr_tar_det_id.COUNT UPDATE cmr_tar_det dd SET err_code_id = tdou_rec.err_code_id(j) WHERE dd.cmr_tar_det_id = tdou_rec.cmr_tar_det_id(j) AND in_stamp = tdou_rec.in_stamp(j); END;</span></span></code> </pre><br>  Tibero dice que <i>"la declaraci√≥n dml debe tener un par√°metro masivo ia para cerrar todo"</i> .  Y lo entiendo en el fondo, pero este c√≥digo tuvo que rehacerse en un ciclo regular. <br><br>  La situaci√≥n con tablas que contienen objetos es peor. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> S1.TYPE_PAY_HIST <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OBJECT</span></span> ( pay_status_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>), stamp <span class="hljs-built_in"><span class="hljs-built_in">DATE</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> S1.TABLE_PAY_HIST <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VARRAY</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> type_pay_hist; <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> S2.RECEIPT ( receipt_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>, pay_sum <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>, receipt_hist S1.TABLE_PAY_HIST ); FUNCTION receipt_status_change(p_cmr_receipt_id NUMBER, p_new_status NUMBER) RETURN NUMBER AS l_receipt_hist s1.table_pay_hist; l_type_pay_hist s1.type_pay_hist; l_status NUMBER; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> receipt_hist <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> l_receipt_hist <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> receipt p <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> p.receipt_id = p_cmr_receipt_id <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span>; EXCEPTION WHEN NO_DATA_FOUND THEN RETURN c_err_not_find_status; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>;</code> </pre><br>  Tenemos un error de compilaci√≥n, escriba mistmatch. <br><br>  Los chicos de TMaxSoft propusieron esta versi√≥n del c√≥digo: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> l_receipt_hist table_pay_hist; l_type_pay_hist type_pay_hist; l_status NUMBER; cmr_receipt_row cmr_receipt%rowtype; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> cmr_receipt_row <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> cmr_receipt p <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> p.cmr_receipt_id = p_cmr_receipt_id <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> TYPE_PAY_HIST(r.pay_status_id,r.stamp) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> l_receipt_hist <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> cmr_receipt p,<span class="hljs-keyword"><span class="hljs-keyword">table</span></span>(p.receipt_hist) r <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> p.cmr_receipt_id = p_cmr_receipt_id; EXCEPTION WHEN NO_DATA_FOUND THEN dbms_output.put_line('NO_DATA_FOUND'); RETURN null;<span class="hljs-comment"><span class="hljs-comment">--c_err_not_find_status; END; ... END;</span></span></code> </pre><br>  El trabajo probablemente funciona.  Pero no es tan conveniente, y tienes que rehacer el c√≥digo. <br><br>  El resto se compila normalmente, excepto por cosas espec√≠ficas como SDO_GEOM.  Y, por cierto, Tibero tiene un an√°logo.  Sus manos a√∫n no hab√≠an llegado a su estudio. <br><br><h3>  Tipos </h3><br>  En uno de los proyectos, usamos el poder de OOP de Oracle Hollow. <br>  La pregunta m√°s emocionante para Tibero fue sobre esto. <br><br>  Creamos un cierto tipo, que es b√°sico para un conjunto de otros tipos. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> t_tar_object <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OBJECT</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>), smth <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRUCTOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> t_tar_object <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> target(param <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> inside(o t_tar_object) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> t_tar_object ) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FINAL</span></span>; <span class="hljs-comment"><span class="hljs-comment">--  CREATE OR REPLACE TYPE BODY t_tar_object AS CONSTRUCTOR FUNCTION t_tar_object RETURN SELF AS RESULT AS BEGIN RETURN; END; MEMBER FUNCTION target(param IN NUMBER DEFAULT NULL) RETURN NUMBER AS BEGIN RETURN id; END; MEMBER FUNCTION clone RETURN t_tar_object AS BEGIN RETURN NULL ; END; END;</span></span></code> </pre><br>  Y ahora estamos tratando de crear un heredero digno para √©l. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> t_tar_service <span class="hljs-keyword"><span class="hljs-keyword">UNDER</span></span> t_tar_object ( is_virtual <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRUCTOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> t_tar_service (p_serv_obj t_tar_object, p_main_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, p_pack_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">OVERRIDING</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> target(param <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">OVERRIDING</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> t_tar_object ) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FINAL</span></span>;</code> </pre><br>  El compilador se negar√° a anular la funci√≥n de destino.  Sin embargo, no hay preguntas sobre la funci√≥n de clonaci√≥n.  Result√≥ que a Tibero no le gustaba ANULAR cuando el m√©todo tiene par√°metros.  De acuerdo, elimine la palabra ANULACI√ìN.  Pero esto es alarmante, y escribimos scripts de prueba.  Hasta ahora con el tipo padre. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> o1 t_tar_object; i1 number := 100; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> o1 := t_tar_object; o1.id := 1; i1 := o1.target; <span class="hljs-comment"><span class="hljs-comment">-- dbms_output.put_line (i1)   . --      ,  ,     i1   -- if i1 &gt; 0 then dbms_output.put_line ('big'); end if; if i1 &lt; 0 then dbms_output.put_line ('small'); end if; if i1 = 0 then dbms_output.put_line ('zero'); end if; if i1 is null then dbms_output.put_line ('null'); end if; end;</span></span></code> </pre> <br>  Parece que no dejamos una opci√≥n al programa, no importa qu√© valor tome la variable i1, algo deber√≠a aparecer en la salida.  Pero ... no aparece nada! <br><br><img src="https://habrastorage.org/webt/tx/bf/he/txbfhe1mekorl0o6ormecblpbj8.jpeg"><br>  <i>Inmediatamente record√© una gran pel√≠cula</i> <br><br>  Esta rareza no termina ah√≠.  Empeorando el experimento <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> o1 t_tar_object; i1 number := 100; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> o1 := t_tar_object; o1.id := 1; i1 := o1.target; <span class="hljs-comment"><span class="hljs-comment">--  ,      -    i1 := 2; if i1 &gt; 0 then dbms_output.put_line ('big'); end if; if i1 &lt; 0 then dbms_output.put_line ('small'); end if; if i1 = 0 then dbms_output.put_line ('zero'); end if; if i1 is null then dbms_output.put_line ('null'); end if; end;</span></span></code> </pre> <br>  Incluso el hecho de que despu√©s de todas las manipulaciones con los m√©todos del objeto, establecemos r√≠gidamente el valor de la variable, no cambia nada: la salida est√° vac√≠a. <br><br>  Experimento de control, prueba tu locura: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> o1 t_tar_object; i1 number ; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> o1 := t_tar_object; o1.id := 1; <span class="hljs-comment"><span class="hljs-comment">--i1 := o1.target;    i1 := 2; if i1 &gt; 0 then dbms_output.put_line ('big'); end if; if i1 &lt; 0 then dbms_output.put_line ('small'); end if; if i1 = 0 then dbms_output.put_line ('zero'); end if; if i1 is null then dbms_output.put_line ('null'); end if; end;</span></span></code> </pre><br>  El apreciado "grande" aparece en la salida.  Espeluznante, ¬øno es as√≠?  Usando un golpe cient√≠fico, los chicos de TMaxSoft descubrieron que si eliminas el matiz "NO FINAL" de la especificaci√≥n t_tar_object, entonces el objeto se comportar√° adecuadamente.  Pero, ¬øpor qu√© entonces necesitamos tal ... sin herederos. <br><br>  No tiene sentido hablar m√°s sobre la POO en Tibero.  Como, de hecho, la OOP en Tibero.  Despu√©s de eso, surge otra pregunta: y el c√≥digo de procedimientos y funciones que compil√≥, ¬øfunciona correctamente?  A√∫n no lo s√©  Una gran cantidad de c√≥digo ha emigrado y compilado.  Para un proyecto que no contiene los tipos de ejercicios anteriores, este es un √©xito definitivo.  Pero probar la ejecuci√≥n correcta del c√≥digo es una tarea seria.  Y para ser honesto, no esperaba encontrarme con ella.  No estar√© listo para decir si tendr√© un proyecto en este DBMS.  Pero si lo hace, entonces el desarrollo se llevar√° a cabo en Oracle, utilizando herramientas convenientes normales y con una migraci√≥n regular a Tibero.  Escribir c√≥digo en el IDE sin indicaciones contextuales y con errores peri√≥dicos de la interfaz en s√≠ es un placer por debajo del promedio. <br><br><h3>  Conclusiones </h3><br>  ¬øTibero tiene futuro en su estado actual?  No estoy seguro  Despu√©s de todo, si observa el costo de las licencias excluyendo megascale, entonces un socket est√°ndar cuesta alrededor de 800,000, lo cual es m√°s barato que Oracle, pero no a veces.  Y como estaba convencido de mi propia experiencia, hasta ahora esto ni siquiera est√° cerca de Oracle. <br><br>  ¬øTiene sentido usar el Tibero casi gratis que se ofrece ahora?  Quiz√°s si.  Dicen que al pagar el costo del soporte t√©cnico (99,000 rublos por a√±o para un z√≥calo), se permite usar esta base en proyectos comerciales.  Si tiene un equipo de oracleistas disponibles, y necesita crear y colocar algo no demasiado complicado en su servidor, pero m√°s barato y m√°s r√°pido, una opci√≥n interesante.  Todav√≠a puede jugar la carta de sanciones, dici√©ndole a los clientes con problemas que Corea no es Estados Unidos. <br><br>  ¬øDebo traducir proyectos existentes de Oracle a Tibero?  De ninguna manera  No hay raz√≥n para buscar tal aventura.  Es m√°s f√°cil renunciar al soporte t√©cnico de Oracle y no pagarle nada a nadie. <br><br>  ¬øY si necesita crear una nueva instancia de un proyecto antiguo que se ejecuta en Oracle?  Y como resultado, ¬øcomprar nuevas licencias?  Pi√©nsalo aqu√≠.  Es posible que su base migre y trabaje cualitativamente.  Pero inmediatamente piense en apoyar dos √°reas en el proyecto, o traduzca todo a Tibero.  Consideramos los costos laborales, los riesgos y los beneficios de las licencias m√°s baratas.  Compara, decide. <br><br>  Quiz√°s en la pr√≥xima versi√≥n de Tibero todo ser√° diferente.  Solo es necesario terminar los tipos, hacer un IDE normal, tal vez cambiar la pol√≠tica de precios.  Y si el DBMS es el mismo que el de los autom√≥viles, entonces, despu√©s de 5 a√±os, los coreanos pueden ocupar una participaci√≥n de mercado significativa y suplantar el hegem√≥n.  Ya veremos. <br><br><h3>  PS </h3><br>  Una ventaja importante al elegir un DBMS para un nuevo proyecto puede ser el trabajo del soporte t√©cnico de TMaxSoft.  Ni siquiera compr√© una licencia por un d√≥lar, y los muchachos me respondieron con prontitud, claramente interesados.  Ayudaron tanto con preguntas est√∫pidas como con las descritas aqu√≠.  La retroalimentaci√≥n es excelente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413147/">https://habr.com/ru/post/es413147/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413137/index.html">Clasifique grandes cantidades de datos en Apache Spark utilizando modelos arbitrarios de aprendizaje autom√°tico</a></li>
<li><a href="../es413139/index.html">Coches el√©ctricos: se acerca la revoluci√≥n</a></li>
<li><a href="../es413141/index.html">Clasifique grandes cantidades de datos en Apache Spark utilizando modelos arbitrarios de aprendizaje autom√°tico</a></li>
<li><a href="../es413143/index.html">Bobby Urban Lite: la nueva mochila urbana de XD Design</a></li>
<li><a href="../es413145/index.html">Analista ayuda a las empresas a ganar dinero</a></li>
<li><a href="../es413149/index.html">Almac√©n de datos distribuidos en el concepto de Data Lake: por d√≥nde empezar</a></li>
<li><a href="../es413151/index.html">La NSA propuso el est√°ndar de cifrado para dispositivos IoT, pero ISO lo rechaz√≥</a></li>
<li><a href="../es413155/index.html">Gu√≠a de estilo de Shell de Google (en ruso)</a></li>
<li><a href="../es413157/index.html">Acerca del almacenamiento de contrase√±as en la base de datos</a></li>
<li><a href="../es413159/index.html">IU oscuro o claro? Consejos para elegir un esquema de color para su interfaz</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>