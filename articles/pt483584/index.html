<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêó üßëüèø‚Äçü§ù‚Äçüßëüèø üå©Ô∏è Transferindo um back-end PHP para o barramento de fluxos Redis e escolhendo uma biblioteca independente das estruturas üéà üßëüèΩ‚Äçü§ù‚Äçüßëüèª üßîüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pref√°cio 
 Meu site, que fa√ßo por hobby, foi projetado para armazenar p√°ginas iniciais interessantes e sites pessoais. Esse t√≥pico come√ßou a me intere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transferindo um back-end PHP para o barramento de fluxos Redis e escolhendo uma biblioteca independente das estruturas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483584/"><img src="https://habrastorage.org/webt/wk/hw/mm/wkhwmmingyzwy7-r1esz_9vna54.png"><br><br><h2>  Pref√°cio </h2><br>  Meu site, que fa√ßo por hobby, foi projetado para armazenar p√°ginas iniciais interessantes e sites pessoais.  Esse t√≥pico come√ßou a me interessar no come√ßo do meu caminho na programa√ß√£o; naquele momento, fiquei encantado por encontrar grandes profissionais que escrevem sobre si mesmos, seus hobbies e projetos.  O h√°bito de descobri-los permaneceu por enquanto: em quase todos os sites comerciais e n√£o muito, continuo pesquisando no rodap√© em busca de links para autores. <br><a name="habracut"></a><br><h2>  Implementa√ß√£o da ideia </h2><br>  A primeira vers√£o era apenas uma p√°gina html no meu site pessoal, onde coloquei links com assinaturas em uma lista ul.  Depois de digitar 20 p√°ginas por algum tempo, comecei a pensar que n√£o era muito eficaz e decidi tentar automatizar o processo.  No stackoverflow, notei que muitos indicam sites em seus perfis, por isso escrevi um analisador php que apenas percorreu os perfis, come√ßando pelo primeiro (endere√ßo no SO e at√© hoje como este: `/ users / 1`), links extra√≠dos da tag desejada e empilhados no SQLite. <br><br>  Isso pode ser chamado de segunda vers√£o: uma cole√ß√£o de dezenas de milhares de URLs em uma placa SQLite que substituiu a lista est√°tica em html.  Eu fiz uma pesquisa simples nesta lista.  Porque  havia apenas URLs, ent√£o a pesquisa era apenas para eles. <br><br>  Nesse est√°gio, abandonei o projeto e voltei a ele, depois de muito tempo.  Nesta fase, minha experi√™ncia de trabalho j√° era superior a tr√™s anos e senti que poderia fazer algo mais s√©rio.  Al√©m disso, havia um grande desejo de dominar tecnologias relativamente novas para si. <br><br><h2>  Vers√£o moderna </h2><br>  <a href="https://hpdb.ru/">O projeto foi</a> implantado no docker, o banco de dados foi transferido para o mongoDb e, relativamente recentemente, foram adicionados rabanetes, que inicialmente eram apenas para cache.  Como base, um dos microframes PHP √© usado. <br><br><h4>  O problema </h4><br>  Novos sites s√£o adicionados por um comando do console que faz o seguinte de forma s√≠ncrona: <br><br><ul><li>  Baixar conte√∫do por URL <br></li><li>  Sinaliza se HTTPS estava dispon√≠vel <br></li><li>  Preserva a ess√™ncia do site <br></li><li>  HTML de origem e cabe√ßalhos s√£o salvos no hist√≥rico de indexa√ß√£o <br></li><li>  Analisa o conte√∫do, recupera o T√≠tulo e a Descri√ß√£o <br></li><li>  Salva dados em uma cole√ß√£o separada. <br></li></ul><br>  Isso foi suficiente para armazenar sites e exibi-los em uma lista: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a4/914/0f8/5a49140f8a7a27eac0e22c21b24ada69.png"><br><br>  Mas a ideia de indexar, categorizar e classificar tudo automaticamente, mantendo tudo atualizado, se encaixa nesse paradigma de maneira fraca.  Mesmo adicionando um m√©todo da Web para adicionar p√°ginas, √© necess√°rio duplicar e bloquear o c√≥digo para evitar poss√≠veis DDoS. <br><br>  Em geral, √© claro, tudo pode ser feito de forma s√≠ncrona e, no m√©todo da Web, basta salvar o URL para garantir que o monstruoso daemon execute todas as tarefas dos URLs da lista.  Mas, mesmo assim, mesmo aqui a palavra "vire" implora.  E se a fila for implementada, todas as tarefas poder√£o ser divididas e executadas pelo menos de forma ass√≠ncrona. <br><br><h4>  Solu√ß√£o </h4><br>  Introduzir filas e criar um sistema de processamento orientado a eventos para todas as tarefas.  E por muito tempo eu quis experimentar o Redis Streams. <br><br><h2>  Usando fluxos Redis no PHP </h2><br>  Porque  N√£o tenho uma estrutura dos tr√™s gigantes Symfony, Laravel, Yii, e gostaria de encontrar uma biblioteca independente.  Mas, como se viu (no primeiro exame), √© imposs√≠vel encontrar bibliotecas individuais s√©rias.  Tudo o que est√° associado √†s filas √© uma proje√ß√£o de 3 confirma√ß√µes de cinco anos atr√°s ou est√° vinculado a uma estrutura. <br><br>  Ouvi falar do Symfony como fornecedor de alguns componentes √∫teis e j√° uso alguns.  E tamb√©m do Laravel, algo tamb√©m pode ser usado, por exemplo, seu ORM, sem a presen√ßa do pr√≥prio framework. <br><br><h4>  symfony / messenger </h4><br>  O primeiro candidato imediatamente pareceu ideal e, sem d√∫vida, eu o instalei.  Mas foi mais dif√≠cil encontrar exemplos de uso no Google fora do Symfony.  Como coletar de um monte de classes com nomes universais, sem falar nada, um barramento para enviar mensagens e at√© Redis? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2b/1bf/ac0/f2b1bfac07a1e307d7b5826a1b191e3d.png"><br><br>  A documenta√ß√£o no site oficial era bastante detalhada, mas a inicializa√ß√£o foi descrita apenas para o Symfony usando seu YML favorito e outros m√©todos m√°gicos para um n√£o-sinfonista.  Eu n√£o tinha interesse no processo de instala√ß√£o, especialmente durante os feriados de Ano Novo.  Mas eu tive que fazer isso por um tempo inesperadamente longo. <br><br>  Tentar descobrir como instanciar um sistema usando fontes Symfony tamb√©m n√£o √© a tarefa mais trivial por prazos apertados: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc7/de8/991/bc7de89919463a8e7e4bfc5adec9df27.png"><br><br>  Dando uma olhada nisso e tentando fazer algo com as m√£os, cheguei √† conclus√£o de que estava fazendo algum tipo de muleta e decidi tentar outra coisa. <br><br><h4>  iluminar / fila </h4><br>  Aconteceu que essa biblioteca estava intimamente ligada √† infraestrutura do Laravel e a muitas outras depend√™ncias, ent√£o eu n√£o gastei muito tempo nela: instalei, olhei, vi depend√™ncias e a exclu√≠. <br><br><h4>  fila do yiisoft / yii2 </h4><br>  Bem, aqui foi imediatamente assumido a partir do nome, novamente uma forte liga√ß√£o ao Yii2.  Eu tive que usar esta biblioteca e n√£o era ruim, mas n√£o achei que dependesse completamente do Yii2. <br><br><h4>  O resto </h4><br>  Todo o resto que encontrei no github eram proje√ß√µes desatualizadas e abandonadas n√£o confi√°veis, sem estrelas, garfos e um grande n√∫mero de confirma√ß√µes. <br><br><h2>  Voltar ao symfony / messenger, detalhes t√©cnicos </h2><br>  Eu tive que lidar com essa biblioteca e, depois de passar mais algum tempo, consegui.  Descobriu-se que tudo √© bastante conciso e simples.  Para a instancia√ß√£o do √¥nibus, fiz uma pequena f√°brica, porque  Eu tinha v√°rios pneus com manipuladores diferentes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/970/723/ab2/970723ab2c86a6b4adfb35f32208fa76.png"><br><br>  Apenas alguns passos: <br><br><ul><li>  Crie manipuladores de mensagens que devem ser chamados apenas <br></li><li>  Coloque-os em HandlerDescriptor (classe da biblioteca) <br></li><li>  Envolvemos esses "Descritores" na inst√¢ncia HandlersLocator. <br></li><li>  Adicionar HandlersLocator √† inst√¢ncia MessageBus <br></li><li>  Passamos ao SendersLocator um conjunto de `SenderInterface`, no meu caso inst√¢ncias das classes` RedisTransport`, que s√£o configuradas de maneira √≥bvia <br></li><li>  Adicionar SendersLocator √† inst√¢ncia MessageBus <br></li></ul><br>  O MessageBus possui um m√©todo `-&gt; dispatch ()`, que procura os manipuladores apropriados no HandlersLocator e passa a mensagem para eles, usando o `SenderInterface` correspondente para enviar pelo barramento (fluxos Redis). <br><br>  Na configura√ß√£o do cont√™iner (neste caso, php-di), todo esse grupo pode ser configurado da seguinte maneira: <br><br><pre><code class="php hljs">CONTAINER_REDIS_TRANSPORT_SECRET =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisTransport( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_SECRET), $c-&gt;get(CONTAINER_SERIALIZER)) ; }, CONTAINER_REDIS_TRANSPORT_LOG =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisTransport( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_LOG), $c-&gt;get(CONTAINER_SERIALIZER)) ; }, CONTAINER_REDIS_STREAM_RECEIVER_SECRET =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisReceiver( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_SECRET), $c-&gt;get(CONTAINER_SERIALIZER) ); }, CONTAINER_REDIS_STREAM_RECEIVER_LOG =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisReceiver( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_LOG), $c-&gt;get(CONTAINER_SERIALIZER) ); }, CONTAINER_REDIS_STREAM_BUS =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ $sendersLocator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendersLocator([ \App\Messages\SecretJsonMessages::class =&gt; [CONTAINER_REDIS_TRANSPORT_SECRET], \App\Messages\DaemonLogMessage::class =&gt; [CONTAINER_REDIS_TRANSPORT_LOG], ], $c); $middleware[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendMessageMiddleware($sendersLocator); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MessageBus($middleware); }, CONTAINER_REDIS_STREAM_CONNECTION_SECRET =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ $host = <span class="hljs-string"><span class="hljs-string">'bu-02-redis'</span></span>; $port = <span class="hljs-number"><span class="hljs-number">6379</span></span>; $dsn = <span class="hljs-string"><span class="hljs-string">"redis://$host:$port"</span></span>; $options = [ <span class="hljs-string"><span class="hljs-string">'stream'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'secret'</span></span>, <span class="hljs-string"><span class="hljs-string">'group'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, <span class="hljs-string"><span class="hljs-string">'consumer'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Connection::fromDsn($dsn, $options); }, CONTAINER_REDIS_STREAM_CONNECTION_LOG =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ $host = <span class="hljs-string"><span class="hljs-string">'bu-02-redis'</span></span>; $port = <span class="hljs-number"><span class="hljs-number">6379</span></span>; $dsn = <span class="hljs-string"><span class="hljs-string">"redis://$host:$port"</span></span>; $options = [ <span class="hljs-string"><span class="hljs-string">'stream'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'group'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, <span class="hljs-string"><span class="hljs-string">'consumer'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Connection::fromDsn($dsn, $options); },</code> </pre> <br>  Pode-se observar que no SendersLocator atribu√≠mos um "transporte" diferente para duas mensagens diferentes, cada uma com sua pr√≥pria conex√£o com os fluxos correspondentes. <br><br>  Eu fiz um projeto de demonstra√ß√£o separado demonstrando uma aplica√ß√£o de tr√™s dem√¥nios se comunicando usando esse barramento: <a href="https://github.com/backend-university/products/tree/master/products/02-redis-streams-bus">https://github.com/backend-university/products/tree/master/products/02-redis-streams-bus</a> . <br><br>  Mas mostrarei como um consumidor pode ser organizado: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Messages</span></span>\<span class="hljs-title"><span class="hljs-title">DaemonLogMessage</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">HandlerDescriptor</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">HandlersLocator</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">MessageBus</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Middleware</span></span>\<span class="hljs-title"><span class="hljs-title">HandleMessageMiddleware</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Middleware</span></span>\<span class="hljs-title"><span class="hljs-title">SendMessageMiddleware</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Transport</span></span>\<span class="hljs-title"><span class="hljs-title">Sender</span></span>\<span class="hljs-title"><span class="hljs-title">SendersLocator</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../vendor/autoload.php'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Psr\Container\ContainerInterface $container */</span></span> $container = <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(<span class="hljs-string"><span class="hljs-string">'config/container.php'</span></span>); $handlers = [ DaemonLogMessage::class =&gt; [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HandlerDescriptor( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DaemonLogMessage $m)</span></span></span><span class="hljs-function"> </span></span>{ \error_log(<span class="hljs-string"><span class="hljs-string">'DaemonLogHandler: message handled: / '</span></span> . $m-&gt;getMessage()); }, [<span class="hljs-string"><span class="hljs-string">'from_transport'</span></span> =&gt; CONTAINER_REDIS_TRANSPORT_LOG] ) ], ]; $middleware = []; $middleware[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HandleMessageMiddleware(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HandlersLocator($handlers)); $sendersLocator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendersLocator([<span class="hljs-string"><span class="hljs-string">'*'</span></span> =&gt; [CONTAINER_REDIS_TRANSPORT_LOG]], $container); $middleware[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendMessageMiddleware($sendersLocator); $bus = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MessageBus($middleware); $receivers = [ CONTAINER_REDIS_TRANSPORT_LOG =&gt; $container-&gt;get(CONTAINER_REDIS_STREAM_RECEIVER_LOG), ]; $w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Symfony\Component\Messenger\Worker($receivers, $bus, $container-&gt;get(CONTAINER_EVENT_DISPATCHER)); $w-&gt;run();</code> </pre><br><h2>  Usando essa infraestrutura em um aplicativo </h2><br>  Tendo implementado o barramento no meu back-end, selecionei etapas individuais da antiga equipe s√≠ncrona e fiz manipuladores separados, cada um dos quais envolvido em seu pr√≥prio neg√≥cio. <br><br>  O pipeline para adicionar um novo site ao banco de dados √© o seguinte: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1a/ccf/202/f1accf2020c51b0ae5e5c39033d7d375.png"><br><br>  E logo depois ficou muito mais f√°cil adicionar novas funcionalidades, por exemplo, extrair e analisar Rss.  Porque  Como esse processo tamb√©m requer conte√∫do de origem, o manipulador-extrator do link rss, bem como WebsiteIndexHistoryPersistor, assina a mensagem "Content / HtmlContent", o processa e passa a mensagem desejada em seu pipeline. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8cc/641/d52/8cc641d52b4a394c5381967360187ab0.png"><br><br>  No final, resultou em v√°rios dem√¥nios, cada um deles mantendo conex√µes apenas com os recursos necess√°rios.  Por exemplo, o daemon de <i>rastreadores</i> cont√©m todos os manipuladores que exigem acesso √† Internet para conte√∫do, e o daemon <i>persister</i> mant√©m uma conex√£o com o banco de dados. <br><br>  Agora, em vez de selecionar no banco de dados, o ID necess√°rio ap√≥s ser inserido pelo persistente √© simplesmente passado pelo barramento para todos os manipuladores interessados. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483584/">https://habr.com/ru/post/pt483584/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483568/index.html">Criando um computador primitivo do zero</a></li>
<li><a href="../pt483570/index.html">Mas e se a terra for plana?</a></li>
<li><a href="../pt483574/index.html">An√°lise de confiabilidade de equipamentos eletr√¥nicos de choque e vibra√ß√£o - Vis√£o geral</a></li>
<li><a href="../pt483578/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 493 (24.12.2019 - 12.30.2019)</a></li>
<li><a href="../pt483580/index.html">VIM - Este n√£o √© apenas um editor, √© uma integra√ß√£o com todo o seu ambiente de trabalho</a></li>
<li><a href="../pt483586/index.html">No√ß√µes b√°sicas de trabalho com o zmq em python, criando um armazenamento simples de chave / valor</a></li>
<li><a href="../pt483588/index.html">Como tentar bloquear qualquer site usando ILV</a></li>
<li><a href="../pt483590/index.html">Procure pelo erro FDCAN que n√£o √©</a></li>
<li><a href="../pt483594/index.html">Economia futura para f√≠sicos</a></li>
<li><a href="../pt483598/index.html">Ovos de P√°scoa ainda mais musicais: continuamos a falar de presentes para ouvintes atentos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>