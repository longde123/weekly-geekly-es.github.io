<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏼 🤜 ⚗️ 亚行vs间谍cam和麦克风 🎞️ ✋🏽 👞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="如何检查Android智能手机上的任何应用程序是否有照片或视频报告，尽管他从来不需要它？ 以下选项根本不是完美的选择，但不需要“ root”或自定义固件。 

 PS我在文章中添加了对监视应用程序对麦克风访问的描述。 

 您需要安装什么： 


- ADB （ Android调试桥 ）（例如，作为...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>亚行vs间谍cam和麦克风</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435098/"> 如何检查<i>Android</i>智能手机上的任何应用程序是否有照片或视频报告，尽管他从来不需要它？ 以下选项根本不是完美的选择，但不需要“ root”或自定义固件。 <br><br>  <i>PS我在文章中添加了对监视应用程序对麦克风访问的描述。</i> <br><br> 您需要安装什么： <br><ul><li>  <i>ADB</i> （ <i>Android调试桥</i> ）（例如，作为<i>Android SDK平台工具的一部分</i> -您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>下载）； </li><li> 手机的驱动程序（例如，如有必要，可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>下载<i>Google USB驱动程序</i> ）。 </li></ul><br> 我们打开手机上的<i>USB</i>调试模式，然后将智能手机连接到计算机的<i>USB端口</i> ，您应该选择<i>USB连接</i>模式，而不是“仅充电”。 <br><div class="spoiler">  <b class="spoiler_title">隐藏文字</b> <div class="spoiler_text"> 例如，在“设备管理器”中显示智能手机，如下所示： <br> 在“照片”或“文件”模式下 <br><img src="https://habrastorage.org/webt/8b/nh/bi/8bnhbi9hvmyd2456nnbkdakfcbm.png"><br> 在USB驱动器模式下 <br><img src="https://habrastorage.org/webt/he/tf/iz/hetfizpqdgopgbzupspiggwdysw.png"><br> 因此，在<i>lsusb</i>命令的输出中： <br><img src="https://habrastorage.org/webt/uq/pr/ps/uqprpshh-ncs265jlpbpgamvd6e.png"><br></div></div><br> 在安装“工具”的目录中打开命令行。 <br> 检查连接是否成功（显示已连接智能手机的序列号）： <br><pre><code class="bash hljs">adb devices</code> </pre>  （对于<i>Windows</i> ） <br><img src="https://habrastorage.org/webt/xs/5y/e3/xs5ye3ez3e64mcqpicweuhzywlk.png"><br> 对于<i>Linux，</i>命令如下所示： <br><pre> <code class="bash hljs">./adb devices</code> </pre> <br> 如果未授权该计算机使用此智能手机（适用于<i>Android</i> 4.2.2及更高版本），则序列号旁边将显示警告消息“ <b>未经授权</b> ”。 <br> 要进行授权，您需要通过智能手机上的<i>USB</i>确认调试许可。 <br><div class="spoiler">  <b class="spoiler_title">隐藏文字</b> <div class="spoiler_text"> 在<i>Linux下</i> ，可能会出现“ <b>无权限</b> ”消息-在我的情况下，我设法通过将智能手机切换为“媒体设备（ <i>MTP</i> ）”模式来解决此问题。 <br></div></div><br> 在设备上启动外壳程序（我们收到“ $”提示）： <br><pre> <code class="bash hljs">adb shell</code> </pre> <br><img src="https://habrastorage.org/webt/xj/u-/hm/xju-hm5vnekjwns8kk9iemaceo0.png"><br><br> 然后，我们介绍以下“魔术”符号： <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ps `<span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ! (dumpsys media.camera | grep -E <span class="hljs-string"><span class="hljs-string">"PID"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> | grep -o <span class="hljs-string"><span class="hljs-string">"[^PID: ][0-9]*$"</span></span>` | grep -o <span class="hljs-string"><span class="hljs-string">"[^S ]*$"</span></span> ; date; sleep 1; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><a name="habracut"></a><br><br> 改进的版本，删除了输出“ NAME”和空行： <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ps `<span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ! (dumpsys media.camera | grep -E <span class="hljs-string"><span class="hljs-string">"PID"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> | grep -o <span class="hljs-string"><span class="hljs-string">"[^PID: ][0-9]*$"</span></span>` | grep -o <span class="hljs-string"><span class="hljs-string">"[^S ]*$"</span></span> | grep -v <span class="hljs-string"><span class="hljs-string">"NAME"</span></span> | grep .; date; sleep 1; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br><br> 而且什么也没有发生:-)直到某件事决定采取一点射击:-) <br><br> 指示的“魔术”字符集开始尽快监视对照相机服务<i>media.camera的</i>访问（此服务由<i>libcameraservice.so</i>库实现）。 如果摄像机未激活，则<i>dumpsys将</i>显示以下内容： <br><img src="https://habrastorage.org/webt/at/pj/pv/atpjpvwxpi0zifn52wob3cd7nc8.png"><br> 如果需要摄像头，则会显示： <br><img src="https://habrastorage.org/webt/2s/7e/n0/2s7en0ianftirjofmyjfzjpxe2i.png"><br><br>  <i>grep</i>检查“ <i>PID</i> ”是否存在，如果存在，则从字符串中删除进程号，并将其输入<i>ps</i>命令，该命令显示有关该进程的数据，而另一个<i>grep则</i>剪切其名称。 检测到相机的活动后，请暂停一秒钟，以使消息不会太频繁地溢出。 要中断命令，请使用组合键<i>CTRL-C</i>并退出外壳程序<i>CTRL-D</i> 。 <br><br> 最简单的示例是，在启动用于照片/视频拍摄的常规智能手机应用程序之后，带有进程名称和日期/时间的消息开始以1秒的间隔倒入： <br><br><img src="https://habrastorage.org/webt/kj/lu/rj/kjlurja3_dqlnzegfi6tfabrcv0.png">  ” <br><br> 但是还有更多狡猾的应用程序，可以通过关键字“间谍凸轮”找到它们（例如，使用技巧进行单像素预览（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.ez.ai/2014/05/exploring-limits-of-covert-data .html</a> ））。 这样的创作在拍摄和报告开始时就崩溃了，但是消息却定期地流入： <br><br><img src="https://habrastorage.org/webt/gd/a0/wy/gda0wy7nqinaoaxki1ftvziye50.png"><br><br> 我还检查了在单击浮动按钮时单拍的应用程序中建议方法的功能 <img src="https://habrastorage.org/webt/4s/6_/vo/4s6_voee5sikw5qgscsmjeqiofq.png"> 没有任何可见的预览窗口。 <br> 该脚本成功捕获了对摄像机的调用，并在每次拍摄时发出了两条消息： <br><img src="https://habrastorage.org/webt/7r/5v/y4/7r5vy4yfcwzo1bqmgjaafevrjcg.png"><br><br> 但是，没有什么能阻止您在名称更纯正的应用程序中实现类似的功能（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.zdnet.com/article/this-scary-android-malware-can-record-audio-video-and-steal-your- data /</a> ）和权限-好，有各种各样的情况。 而且，“合法”应用程序可以在需要时进行报告（我已经提到过其中一种情况）。 而且， <i>Android P</i>采取措施防止后台应用程序访问相机并非徒劳。 <br><br> 该方法已经在智能手机<i>Huawei SCL-L01</i> （ <i>Android</i> 5.1.1）和<i>Huawei G700-U20</i> （ <i>Android</i> 4.2.1）上进行了测试，在其他智能手机型号上<i>dumpsys的</i>输出<i>格式</i>可能有所不同（ <i>media.camera</i>服务未标准化），这需要代码更正。 。 <br> 消息格式在<i>/system/lib/libcameraservice.so</i>库中进行了硬编码-例如，对于<i>Huawei SCL-L01</i>智能手机： <br><img src="https://habrastorage.org/webt/tg/zd/mx/tgzdmx-b6daoiiqvaybyy9r6jpe.png"><br> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">评论中</a> -提示如何更改在<i>Android</i> 9下使用智能手机的代码。 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此评论</a>显示了由<i>HTC U11</i>维护的摄像机访问日志。 <br> 但是，例如，在“古老的” <i>华为</i> <i>U8650</i> （ <i>Android</i> 2.3.4）上， <i>dumpsys</i>可以正常工作： <br><img src="https://habrastorage.org/webt/_b/7i/6x/_b7i6xaaoc6i9bedq4k3upl46c0.png"><br> 而且权限还不够... <i>grep</i> :-) <br><img src="https://habrastorage.org/webt/u4/s0/ie/u4s0iejn5_nkltppwoevptg-wpy.png"><br><br>  <u>麦克风访问监控</u> <br><br> 可以应用类似的方法来监视应用程序对麦克风的访问。 在这种情况下，您需要监视服务<i>media.audio_flinger</i> 。 <br> 我们在“外壳”中输入命令（给定的代码可在智能手机<i>Huawei SCL-L01</i> （ <i>Android</i> 5.1.1）上使用）： <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ps `<span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ! (dumpsys media.audio_flinger | grep -A20 Input| grep -A1 Client | grep yes | grep -o <span class="hljs-string"><span class="hljs-string">"[^yes ].*"</span></span> | grep -o [0-9]*) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>` | grep -o <span class="hljs-string"><span class="hljs-string">"[^S ]*$"</span></span> | grep -v <span class="hljs-string"><span class="hljs-string">"NAME"</span></span> | grep .; date; sleep 1; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br> 如果某些应用程序通过麦克风记录声音，则在<i>dumpsys media.audio_flinger</i>的输出中有一个类似的片段： <br><img src="https://habrastorage.org/webt/mr/gx/ol/mrgxoltpgeeurxc7_hzja8mc5i4.png"><br>  （ <b>输入线程</b> -输入流， <b>22467-</b>过程记录声音的<i>PID</i> ）。 <br> 通过标准应用程序“语音记录器”录制声音并启用监听（通过上述代码）时，将显示以下消息： <br><img src="https://habrastorage.org/webt/kj/0b/us/kj0busykxehfhlhbypunzuz-rn8.png"><br> 但是，当激活<i>Google</i>翻译语音输入时，会注入哪些消息： <br><img src="https://habrastorage.org/webt/u9/am/f_/u9amf_27htcg5wcxgr3duk4nu0o.png"><br>  <b>在其他智能手机上， <i>dumpsys</i>输出<i>格式</i>可能会有所不同，这需要进行代码校正。</b> <br> 例如，在智能手机<i>Huawei G700-U20</i> （ <i>Android</i> 4.2.1）上： <br><img src="https://habrastorage.org/webt/3p/d2/mj/3pd2mjkp8yecq7jipjla-bwed6e.png"><br> 在这种情况下，监视代码将如下所示： <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ps `<span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ! (dumpsys media.audio_flinger | grep -A3 Input| grep -A1 Clien | grep -o <span class="hljs-string"><span class="hljs-string">"[^ ].*"</span></span> | grep -o [0-9]*) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>` | grep -o <span class="hljs-string"><span class="hljs-string">"[^S ]*$"</span></span> | grep -v <span class="hljs-string"><span class="hljs-string">"NAME"</span></span> | grep .; date; sleep 1; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br> 这是“复活”的爱丽丝在这种情况下的表现形式： <br><img src="https://habrastorage.org/webt/hd/cv/xe/hdcvxedtfruwftsyoxt7avij56i.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN435098/">https://habr.com/ru/post/zh-CN435098/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN435086/index.html">我们应该如何构建PCI-E转接卡</a></li>
<li><a href="../zh-CN435088/index.html">中国流媒体巨头腾讯音乐公开发行股票-这意味着什么，竞争对手应该期待什么</a></li>
<li><a href="../zh-CN435090/index.html">现代汽车集团介绍了无线充电和自动泊车的概念</a></li>
<li><a href="../zh-CN435094/index.html">Sega Mega Drive和Raspberry Pi第2部分的游戏手柄（最终的六个按钮）</a></li>
<li><a href="../zh-CN435096/index.html">暖管收音机的效果</a></li>
<li><a href="../zh-CN435102/index.html">关于词法分析的一些知识</a></li>
<li><a href="../zh-CN435106/index.html">再说一次passport.js</a></li>
<li><a href="../zh-CN435108/index.html">使用Prolog</a></li>
<li><a href="../zh-CN435112/index.html">企业面试</a></li>
<li><a href="../zh-CN435114/index.html">春季数据JPA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>