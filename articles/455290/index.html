<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò¨ üè¥‚Äç‚ò†Ô∏è üé¶ La gu√≠a completa de Prometeo en 2019 üïé ‚ÜîÔ∏è üóº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los ingenieros de DevOps y SRE probablemente hayan o√≠do hablar de Prometheus m√°s de una vez. 


 Prometheus se cre√≥ en SoundCloud en 2012 y desde ento...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La gu√≠a completa de Prometeo en 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/455290/"><p><img src="https://habrastorage.org/webt/sw/aw/et/swawetpfrgxw6k0m4bb960d3q2c.jpeg"></p><br><p>  <strong>Los ingenieros de DevOps y SRE</strong> probablemente hayan o√≠do hablar de <strong>Prometheus</strong> m√°s de una vez. </p><br><p>  Prometheus se cre√≥ en SoundCloud en 2012 y desde entonces se ha convertido en el est√°ndar para <strong>sistemas de monitoreo</strong> .  Tiene un c√≥digo fuente completamente abierto, proporciona docenas de exportadores diferentes con los que puede configurar el <strong>monitoreo de toda la infraestructura en</strong> <strong>minutos</strong> . </p><br><p>  Prometheus tiene un valor obvio y ya est√° siendo utilizado por innovadores de la industria como DigitalOcean o Docker como parte de un sistema de monitoreo completo. </p><br><p>  <em>¬øQu√© es Prometeo?</em> <em><br></em>  <em>¬øPor qu√© es necesario?</em> <em><br></em>  <em>¬øC√≥mo es diferente de otros sistemas?</em> </p><br><p>  Si no sabe nada acerca de Prometheus o quiere comprenderlo mejor, su ecosistema y todas las interacciones, <strong>este art√≠culo es solo para usted</strong> . </p><a name="habracut"></a><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dividimos</a> esta gu√≠a en 3 partes, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">como lo hicimos con InfluxDB</a> . </p><br><ul><li>  Primero viene una descripci√≥n completa de <strong>Prometheus</strong> , su ecosistema y los aspectos clave de la tecnolog√≠a de ritmo r√°pido. </li><li>  Luego, se proporcionan <strong>explicaciones de los t√©rminos t√©cnicos de Prometheus</strong> .  Si no sabe qu√© m√©tricas, etiquetas, instancias o exportadores son, aqu√≠ est√°. </li><li>  Finalmente, describimos varios <strong>escenarios del mundo real para usar Prometheus</strong> .  Aqu√≠ te inspirar√°s con ejemplos de empresas exitosas. </li></ul><br><h2 id="chast-i-chto-takoe-prometheus">  Parte I. ¬øQu√© es Prometeo? </h2><br><p>  Prometeo es una base de datos de series de tiempo.  Si no sabe qu√© es una base de datos de series de tiempo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lea la primera parte del manual InfluxDB</a> . </p><br><p>  Pero Prometheus no es solo una base de datos de series de tiempo. </p><br><p>  Puede adjuntarle un <strong>ecosistema completo de herramientas</strong> para expandir la funcionalidad. </p><br><p>  Prometheus <strong>monitorea una amplia variedad de sistemas</strong> : servidores, bases de datos, m√°quinas virtuales individuales y casi cualquier cosa. </p><br><p>  Para hacer esto, <strong>Prometeo raspa peri√≥dicamente sus objetivos</strong> . </p><br><p>  <em>¬øQu√© es el raspado?</em> </p><br><p>  Prometheus <strong>recupera m√©tricas a trav√©s de llamadas HTTP</strong> a puntos finales espec√≠ficos especificados en la configuraci√≥n de Prometheus. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/bu/li/99/buli99giwtpiuq88n9e3xc1b6ng.png"></a> </p><br><p>  Tomemos, por ejemplo, la aplicaci√≥n web ubicada en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http: // localhost: 3000</a> .  La aplicaci√≥n transmite m√©tricas en formato de texto a alguna URL.  Digamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http: // localhost: 3000 / metrics</a> . </p><br><p>  En esta direcci√≥n, Prometheus <strong>recupera datos</strong> del objetivo a intervalos espec√≠ficos. </p><br><h3 id="1-kak-rabotaet-prometheus">  1. ¬øC√≥mo funciona Prometeo? </h3><br><p>  Como dijimos, Prometeo consta de una amplia variedad de componentes. </p><br><p>  Primero, lo necesita para extraer m√©tricas de sus sistemas.  Hay diferentes formas: </p><br><ul><li>  <strong>La instrumentaci√≥n de la</strong> aplicaci√≥n, es decir, su aplicaci√≥n proporcionar√° m√©tricas compatibles con Prometheus en la URL especificada.  Prometheus lo identificar√° como el objetivo y lo desechar√° en el intervalo especificado. </li><li>  Uso de <strong>exportadores confeccionados</strong> .  Prometheus tiene una colecci√≥n de exportadores para tecnolog√≠as existentes.  Por ejemplo, exportadores preparados para monitorear m√°quinas Linux ( <em>Node Exporter</em> ), para bases de datos comunes ( <em>SQL Exporter</em> o <em>MongoDB Exporter</em> ) e incluso para equilibradores de carga HTTP (por ejemplo, <em>HAProxy Exporter</em> ). </li><li>  Usando <strong>Pushgateway</strong> .  A veces, las aplicaciones o tareas no proporcionan m√©tricas directamente.  Es posible que no est√©n dise√±ados para esto (por ejemplo, trabajos por lotes) o usted mismo decidi√≥ no proporcionar m√©tricas directamente a trav√©s de la aplicaci√≥n. </li></ul><br><p>  Como ya entendi√≥, <strong>Prometheus recopila datos por s√≠ mismo</strong> (excepto en los casos excepcionales en los que usamos Pushgateway). </p><br><p> <a href=""><img src="https://habrastorage.org/webt/x8/x5/xl/x8x5xlzryccoxhuk0ly10m4z0ky.png"></a> </p><br><p>  <em>¬øQu√© significa esto?</em> <em><br></em>  <em>¬øPor qu√© se necesita esto?</em> </p><br><h3 id="2-sbor-vs-otpravka">  2. Colecci√≥n vs.  enviando </h3><br><p>  Prometheus tiene una diferencia notable con respecto a otras bases de datos de series de tiempo: <strong>escanea activamente los objetivos para obtener m√©tricas de ellos</strong> . </p><br><p>  InfluxDB, por ejemplo, funciona de manera diferente: usted mismo le <strong>env√≠a datos</strong> directamente. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/hp/f5/of/hpf5ofsciuwl0z2jjymkfh9dbi0.png"></a> </p><br><p>  Ambos enfoques tienen sus pros y sus contras.  Con base en la documentaci√≥n disponible, hemos compilado una lista de razones por las cuales los creadores de Prometheus eligieron esta arquitectura: </p><br><ul><li>  <strong>Control centralizado</strong> .  Si Prometheus env√≠a solicitudes a los objetivos, realizamos toda la configuraci√≥n en el lado de Prometheus, no en los sistemas individuales. </li></ul><br><p>  Prometeo decide <strong>d√≥nde</strong> y con <strong>qu√© frecuencia</strong> raspar. </p><br><p>  Si los objetos mismos env√≠an datos, existe el riesgo de que haya demasiados datos y el servidor se bloquear√°.  Cuando el sistema recopila datos, puede <strong>controlar la frecuencia de recopilaci√≥n</strong> y crear varias configuraciones de raspado para seleccionar una <strong>frecuencia diferente para diferentes objetos</strong> . </p><br><ul><li>  Prometheus almacena <strong>m√©tricas agregadas</strong> . </li></ul><br><p>  Esta es una adici√≥n a la primera parte donde discutimos el papel de Prometeo. </p><br><p>  Prometheus no est√° basado en eventos y es muy diferente de otras bases de datos de series temporales.  No intercepta eventos individuales con referencia al tiempo (por ejemplo, interrupciones del servicio), <strong>sino que recopila m√©tricas agregadas previamente sobre sus servicios</strong> . </p><br><p>  Espec√≠ficamente, el servicio web no env√≠a un mensaje de error 404 y un mensaje con la causa del error.  Se env√≠a un mensaje de que el servicio recibi√≥ un mensaje de error 404 en los √∫ltimos cinco minutos. </p><br><p>  Esta es la principal diferencia entre las bases de datos de series temporales que recopilan m√©tricas agregadas y las que recopilan m√©tricas sin procesar. </p><br><h3 id="3-razvitaya-ekosistema-prometheus">  3. Desarrollo del ecosistema Prometeo </h3><br><p>  B√°sicamente, Prometheus es una base de datos de series de tiempo. </p><br><p>  Pero cuando trabaja con tales bases de datos, a menudo necesita <strong>visualizar los</strong> datos, <strong>analizarlos</strong> y configurar <strong>alertas</strong> para ellos. </p><br><p>  Prometheus admite las siguientes herramientas que ampl√≠an su funcionalidad: </p><br><ul><li>  <strong>Alertmanager</strong> .  Prometheus env√≠a alertas a Alertmanager seg√∫n las reglas personalizadas definidas en los archivos de configuraci√≥n.  A partir de ah√≠, se pueden exportar a diferentes puntos finales (por ejemplo, Pagerduty o Slack). </li><li>  <strong>Visualizaci√≥n de datos</strong> .  Al igual que Grafana, puede visualizar series temporales directamente en la interfaz de usuario web de Prometheus.  Puede filtrar los datos y crear revisiones espec√≠ficas de lo que est√° sucediendo en diferentes objetivos. </li><li>  <strong>Servicio de descubrimiento</strong> .  Prometheus detecta din√°micamente objetivos y raspa autom√°ticamente nuevos objetivos a pedido.  Esto es especialmente conveniente si trabaja con contenedores que cambian din√°micamente las direcciones seg√∫n la demanda. </li></ul><br><p> <a href=""><img src="https://habrastorage.org/webt/vn/v8/hw/vnv8hwhdgfwge_zr4fpijo-dw6w.png"></a> </p><br><p><img src="https://habrastorage.org/webt/c0/i6/9g/c0i69gzbicfmvsaangv6g5-4jpa.png"></p><br><h2 id="chast-ii-koncepcii-prometheus">  Parte II  Conceptos de Prometeo </h2><br><p>  Como en el manual de InfluxDB, explicaremos en detalle <strong>los t√©rminos t√©cnicos</strong> relacionados con Prometheus. </p><br><h3 id="1-model-dannyh-klyuch-znachenie">  1. Modelo de datos de valor clave </h3><br><p>  Antes de pasar a las herramientas de Prometheus, es importante comprender completamente este modelo de datos. </p><br><p>  Prometeo trabaja con <strong>pares clave-valor</strong> .  La clave describe lo que estamos midiendo y el valor almacena el valor real como un n√∫mero. </p><br><blockquote>  Recuerde: Prometheus no est√° dise√±ado para almacenar informaci√≥n en bruto, como texto sin formato.  Almacena m√©tricas agregadas durante un per√≠odo de tiempo. </blockquote><p>  La clave en este caso se llama <strong>m√©trica</strong> .  Esto es, por ejemplo, la velocidad del procesador o el uso de memoria. </p><br><p>  <em>Pero, ¬øy si necesita m√°s detalles sobre la m√©trica?</em> <em><br></em>  <em>Por ejemplo, ¬øel procesador tiene 4 n√∫cleos y necesitamos 4 m√©tricas separadas?</em> </p><br><p>  Y aqu√≠ los atajos vienen al rescate.  Los accesos directos proporcionan m√°s informaci√≥n sobre las m√©tricas al agregar campos adicionales.  Por ejemplo, usted describe no solo la velocidad del procesador, sino tambi√©n la velocidad de un n√∫cleo sobre una IP espec√≠fica. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/k3/an/wz/k3anwzmbgecefriltntgwfkge3o.png"></a> </p><br><p>  Luego puede filtrar las m√©tricas por etiquetas y ver solo la informaci√≥n que necesita. </p><br><h3 id="2-tipy-metrik">  2. Tipos de m√©tricas </h3><br><p>  Al monitorear con Prometheus, las m√©tricas se pueden describir de cuatro maneras.  Es mejor leerlo hasta el final, porque hay <strong>dificultades</strong> aqu√≠. </p><br><h3 id="schetchik">  Contador </h3><br><p>  Este es probablemente el tipo de m√©trica m√°s simple.  El contador, como su nombre lo indica, <strong>cuenta los elementos por un per√≠odo de tiempo</strong> . </p><br><p>  Si desea contar, por ejemplo, errores HTTP en servidores o visitar un sitio web, use un <strong>contador</strong> . </p><br><p>  Y l√≥gicamente, por supuesto, el <strong>contador solo puede aumentar o poner a cero el n√∫mero</strong> , por lo tanto, no es adecuado para valores que pueden disminuir o para valores negativos. </p><br><p>  Con su ayuda, es especialmente conveniente considerar el <strong>n√∫mero de ocurrencias de un</strong> determinado evento durante un per√≠odo de tiempo, es decir, la tasa de cambio de la m√©trica a lo largo del tiempo. </p><br><p>  <em>¬øY si necesita medir, por ejemplo, la memoria utilizada durante un per√≠odo determinado?</em> <em><br></em>  <em>Este valor puede disminuir.</em>  <em>¬øC√≥mo contarlo con Prometeo?</em> </p><br><h3 id="izmeriteli">  Medidores </h3><br><p>  <strong>¬°Conoce los medidores!</strong> </p><br><p>  Los medidores manejan valores que <strong>pueden disminuir con el tiempo</strong> .  Se pueden comparar con los term√≥metros: si observa el term√≥metro, veremos la temperatura actual. </p><br><p>  <em>Pero si los medidores pueden aumentar y disminuir y tomar valores positivos y negativos, ¬øentonces resulta que son mejores que los contadores?</em> <em><br></em>  <em>¬øEntonces los contadores son in√∫tiles?</em> </p><br><p>  Al principio, eso pens√©.  Como pueden hacer todo, us√©moslos en todas partes.  ¬øEs l√≥gico? </p><br><h3 id="a-vot-i-net">  Pero no </h3><br><p>  Los medidores son ideales para medir el valor m√©trico actual, que puede disminuir con el tiempo. </p><br><p>  Aqu√≠ es donde se encuentran los escollos: el medidor no muestra el desarrollo de la m√©trica durante un per√≠odo de tiempo.  Usando medidores, <strong>puede perderse los cambios m√©tricos irregulares con el tiempo</strong> . </p><br><p>  Por qu√©  <em>Esto</em> es lo que <em>dice / u / justinDavidow</em> : </p><br><blockquote>  ‚ÄúEl medidor muestra el valor promedio del contador delta para una unidad durante un per√≠odo de tiempo. <br><br>  El contador tiene en cuenta cada unidad utilizada (si es un procesador, luego operaciones, ciclos o tics), y luego puede elegir qu√© indicadores para qu√© per√≠odo necesita. <br><br>  Si est√° utilizando un medidor, la frecuencia de muestreo debe ser precisa.  Si la frecuencia difiere al menos unos pocos microsegundos, el valor no ser√° confiable.  "Esto es a√∫n m√°s notable bajo una carga pesada, donde el tiempo entre mediciones aumenta exponencialmente, porque el planificador del sistema no tiene tiempo para prestar atenci√≥n a la aplicaci√≥n de monitoreo". </blockquote><p>  Si el sistema env√≠a m√©tricas cada 5 segundos y Prometheus raspa el objetivo cada 15, algunas m√©tricas pueden perderse en el proceso.  Si realiza c√°lculos adicionales con estas m√©tricas, la precisi√≥n de los resultados ser√° a√∫n menor. </p><br><p>  En el mostrador, cada valor se agrega.  Cuando Prometeo lo recoge, se da cuenta de que el valor se envi√≥ en un intervalo determinado. </p><br><p>  Ahora no te confundas. </p><br><h3 id="gistogramma">  Gr√°fico de barras </h3><br><p>  Un histograma es un tipo de m√©trica m√°s complejo.  Proporciona informaci√≥n adicional.  Por ejemplo, la suma de las medidas y su n√∫mero. </p><br><p>  Los valores se recopilan en un √°rea con un l√≠mite superior personalizado.  Por lo tanto, un histograma puede: </p><br><ul><li>  <strong>Calcule los valores promedio</strong> , es decir, la suma de los valores divididos por el n√∫mero de valores. </li><li>  <strong>Calcule medidas relativas de valores</strong> , y esto es muy conveniente si necesita averiguar cu√°ntos valores en un √°rea determinada corresponden a los criterios especificados.  Esto es especialmente √∫til si necesita rastrear proporciones o establecer indicadores de calidad. </li></ul><br><p>  En el mundo real, me gustar√≠a recibir una alerta si el 20% de mis servidores tienen una respuesta de m√°s de 300 ms o una respuesta del servidor de m√°s de 300 ms m√°s del 20% del tiempo. </p><br><p>  Si se trata de proporciones, <strong>necesita histogramas</strong> . </p><br><h3 id="svodki">  Resumen </h3><br><p>  Los paneles <strong>son histogramas avanzados</strong> .  Tambi√©n muestran la suma y el n√∫mero de mediciones, y tambi√©n <strong>cuantiles para el per√≠odo m√≥vil</strong> . </p><br><p>  Los cuantiles, en todo caso, est√°n dividiendo la densidad de probabilidad en segmentos de igual probabilidad. </p><br><p>  <em>Entonces: ¬øgr√°ficos de barras o res√∫menes?</em> </p><br><p>  Todo depende de la <strong>intenci√≥n</strong> . </p><br><p>  Los histogramas combinan valores durante un per√≠odo de tiempo, proporcionando la cantidad y la cantidad por la cual puede realizar un seguimiento del desarrollo de una m√©trica en particular. </p><br><p>  Los res√∫menes, por otro lado, muestran cuantiles durante un per√≠odo de movimiento (es decir, desarrollo continuo en el tiempo). </p><br><p>  Esto es especialmente conveniente si necesita conocer un valor que represente el 95% de los valores registrados durante un per√≠odo. </p><br><h3 id="3-zadaniya-i-ekzemplyary">  3. Tareas e instancias </h3><br><p>  Dados los avances recientes en arquitecturas distribuidas y la popularidad de las soluciones basadas en la nube, es poco probable que use un solo servidor que se ejecute solo. </p><br><p>  <strong>Los servidores se replican y distribuyen por todo el mundo.</strong> </p><br><p>  Para ilustrar esto, echemos un vistazo a la arquitectura cl√°sica de dos servidores HAProxy que redistribuyen la carga en nueve servidores web de fondo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">No, no, no hay pilas de Stackoverflow</a> ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">.</a> </p><br><p>  En este ejemplo de la vida real, rastrearemos la <strong>cantidad de errores HTTP devueltos por los servidores web</strong> . </p><br><p>  En Prometheus, un servidor web se llama <strong>instancia</strong> .  <strong>La tarea</strong> ser√° el hecho de que mida la cantidad de errores HTTP en todas las instancias. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/3x/s4/n9/3xs4n94kpfhqg3igmcrlfjatube.png"></a> </p><br><p>  Lo bueno es que las tareas y las instancias son campos en las etiquetas, y puede filtrar los resultados por una instancia o tarea espec√≠fica. </p><br><h3 id="udobno-zhe">  ¬øEs conveniente? </h3><br><h3 id="4-promql">  4. PromQL </h3><br><p>  Si usa bases de datos basadas en InfluxDB, probablemente ya est√© familiarizado con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">InfluxQL</a> .  O use <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SQL en TimescaleDB</a> . </p><br><p>  Prometheus tambi√©n tiene su propio lenguaje para consultar y recuperar datos de los servidores: <strong>PromQL</strong> . </p><br><p>  Como ya sabemos, los datos se presentan en forma de pares clave-valor.  PromQL usa la misma sintaxis y devuelve resultados como vectores. </p><br><p>  <em>¬øQu√© tipo de vectores?</em> </p><br><p>  Hay dos tipos de vectores en Prometheus y PromQL: </p><br><ul><li>  <strong>Vectores instant√°neos</strong> que representan todas las m√©tricas por la √∫ltima marca de tiempo. </li><li>  <strong>Vectores con un rango de tiempo</strong> : si necesita observar el desarrollo de una m√©trica a lo largo del tiempo, puede especificar un rango de tiempo en una solicitud a Prometheus.  Como resultado, obtendr√° un vector que combina todos los valores registrados para el per√≠odo seleccionado. </li></ul><br><p> <a href=""><img src="https://habrastorage.org/webt/gs/ih/1_/gsih1_1lvftmhzgzuze3ctrlhci.png"></a> </p><br><p>  PromQL API proporciona un conjunto de funciones para operaciones con datos en consultas. </p><br><p>  Puede ordenar los valores, aplicarles funciones matem√°ticas (por ejemplo, calcular derivados o exponentes) e incluso hacer predicciones (por ejemplo, utilizando el modelo Holt-Winters). </p><br><h3 id="5-instrumentirovanie">  5. Instrumentaci√≥n </h3><br><p>  <strong>La instrumentaci√≥n</strong> es otra parte importante de Prometeo.  Instrumenta las aplicaciones antes de extraer datos de ellas. </p><br><p>  En Prometheus, la instrumentaci√≥n significa agregar bibliotecas de clientes a la aplicaci√≥n para proporcionar m√©tricas de Prometheus. </p><br><p>  La instrumentaci√≥n est√° disponible para los lenguajes de programaci√≥n m√°s comunes: por ejemplo, <strong>Python, Java, Ruby, Go e incluso Node o C #</strong> . </p><br><p>  En esencia, crea objetos de memoria (por ejemplo, medidores o contadores) que aumentar√°n o disminuir√°n din√°micamente el valor. </p><br><p>  Luego, elige d√≥nde proporcionar las m√©tricas.  Prometheus los recoger√° desde all√≠ y los guardar√° en su base de datos de series temporales. </p><br><p><img src="https://habrastorage.org/webt/xi/-u/xk/xi-uxkqvgontz2729o5rmroyxkk.png"></p><br><h3 id="6-eksportery">  6. Exportadores </h3><br><p>  En las aplicaciones que escribi√≥, es muy conveniente personalizar las m√©tricas proporcionadas y cambiarlas con el tiempo utilizando la instrumentaci√≥n. </p><br><p>  Para aplicaciones, servidores y bases de datos conocidos, <strong>Prometheus ofrece exportadores con los que puede monitorear los objetivos</strong> . </p><br><p>  Estos exportadores generalmente se representan como im√°genes Docker y son f√°ciles de personalizar.  Proporcionan un conjunto de m√©tricas listas para usar y, a menudo, paneles de control listos para usar con los que puede configurar el monitoreo en minutos. </p><br><p>  Ejemplos de exportadores: </p><br><ul><li>  <strong>Exportadores de bases de datos</strong> : para bases de datos MongoDB, servidores SQL y MySQL. </li><li>  <strong>Exportadores HTTP</strong> : para servidores HAProxy, Apache o NGINX. </li><li>  <strong>Exportadores de Unix</strong> : el rendimiento del sistema se puede monitorear utilizando los exportadores de nodos integrados, que proporcionan todas las m√©tricas del sistema sin configuraci√≥n adicional. </li></ul><br><p><img src="https://habrastorage.org/webt/7q/fm/uh/7qfmuhfszdwxa-k21na-hpko3tk.png"></p><br><h3 id="para-slov-o-vzaimnoy-sovmestimosti">  Algunas palabras sobre compatibilidad mutua </h3><br><p>  La mayor√≠a de las bases de datos de series temporales admiten la interoperabilidad de sus sistemas. </p><br><p>  Prometheus no es el √∫nico sistema de monitoreo con sus requisitos m√©tricos.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">InfluxDB</a> (a trav√©s de Telegraf), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CollectD</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">StatsD</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Nagios</a> tambi√©n tienen sus propios est√°ndares. </p><br><p>  Por lo tanto, para la interacci√≥n de diferentes sistemas, se crean exportadores.  Incluso si Telegraf no env√≠a las m√©tricas en el formato que acepta Prometheus, Telegraf puede enviar estas m√©tricas al exportador InfluxDB, desde donde Prometheus las recoger√°. </p><br><h3 id="7-opovescheniya">  7. Alertas </h3><br><p>  Al trabajar con bases de datos de series temporales, necesita comentarios de los datos, y los administradores de alertas son responsables de esto. </p><br><p>  En Grafana, las alertas son comunes, pero tambi√©n est√°n disponibles en Prometheus a trav√©s del administrador de alertas. </p><br><p>  <strong>Alert Manager es una herramienta separada que se une a Prometheus y lanza sirenas personalizadas</strong> . </p><br><p>  Las alertas se definen en el <strong>archivo de configuraci√≥n</strong> y definen un conjunto de reglas para las m√©tricas.  Si se cumple con la regla en la serie de tiempo, se activa una alerta y se env√≠a a los destinatarios especificados. </p><br><p>  Al igual que en Grafana, puede especificar la direcci√≥n de correo electr√≥nico, <strong>Slack webhook, PagerDuty y objetos HTTP personalizados</strong> como destinatario. </p><br><p><img src="https://habrastorage.org/webt/0x/xz/gf/0xxzgfpfufej_ro_ztjded5lbys.png"></p><br><h2 id="chast-iii-primery-ispolzovaniya-prometheus">  Parte III  Ejemplos de Prometeo </h2><br><p><img src="https://habrastorage.org/webt/rq/6r/zk/rq6rzkeqnwe2xhzpukzx-hjdgi0.png"></p><br><p>  Y, por supuesto, cada gu√≠a debe tener <strong>ejemplos pr√°cticos</strong> .  Como me gusta decir, la tecnolog√≠a no es un fin en s√≠ misma y debe cumplir una tarea espec√≠fica. </p><br><p>  Hablaremos de esto. </p><br><h2 id="1-devops">  1. DevOps </h2><br><p>  Con todos estos exportadores para diferentes sistemas, bases de datos y servidores, es obvio que Prometheus est√° destinado principalmente a la <strong>industria DevOps</strong> . </p><br><p>  Sabemos que hay muchos proveedores competidores y soluciones personalizadas en esta √°rea. </p><br><p>  <strong>Prometheus es perfecto para DevOps.</strong> </p><br><p>  Casi no requiere esfuerzo configurar y ejecutar instancias, y puede activar y configurar f√°cilmente cualquier herramienta auxiliar. </p><br><p>  Al <strong>detectar objetivos</strong> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">por ejemplo, a trav√©s de un exportador de archivos</a> , esta es una gran soluci√≥n para pilas donde los contenedores y las arquitecturas distribuidas se usan ampliamente. </p><br><p>  En un entorno donde las instancias se crean y eliminan constantemente, ninguna pila de DevOps puede funcionar sin el <strong>descubrimiento del servicio</strong> . </p><br><h3 id="2-zdravoohranenie">  2. salud </h3><br><p>  Hoy, las soluciones de monitoreo son necesarias no solo en TI.  Tambi√©n se utilizan en grandes industrias que proporcionan arquitecturas sanitarias flexibles y escalables. </p><br><p>  La demanda est√° creciendo y las arquitecturas de TI deben cumplirla.  Si no tiene una herramienta confiable para monitorear toda la infraestructura, <strong>corre el riesgo de serias interrupciones en el servicio</strong> .  Ya en el sector de la salud, ese peligro definitivamente debe minimizarse. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Este ejemplo se discuti√≥ en opensource.com en el siguiente art√≠culo</a> . </p><br><h3 id="3-finansovye-uslugi">  3. Servicios financieros </h3><br><p>      InfoQ,    Prometheus   . </p><br><p>   (Jamie Christian)    (Alan Strader) ,    Prometheus      Northern Trust.  ,  . </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_WQ9DSanFdw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="chast-x-chto-dalshe">  X.  ? </h2><br><p><img src="https://habrastorage.org/webt/mt/c6/ox/mtc6oxvnw8qk4fijh1ihciosuwy.png"></p><br><p>    <strong></strong>  <strong></strong> . </p><br><p>      Prometheus, ,    ,          . </p><br><p>  <strong>    ,      </strong> . </p><br><p>      Prometheus, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   </a> . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Luego instale las herramientas necesarias, cree su primer tablero de instrumentos, ¬°y listo! </font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si necesita inspiraci√≥n, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lea mi art√≠culo sobre c√≥mo monitorear una m√°quina Linux con Prometheus y Grafana</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Hay instrucciones para configurar herramientas y el primer tablero de instrumentos.</font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Espero que hayas aprendido algo nuevo. </font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si tienes un tema para mi pr√≥ximo art√≠culo, comp√°rtelo. </font></font></p><br><p> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Qu√©date feliz!</font></font></strong> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/455290/">https://habr.com/ru/post/455290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455276/index.html">Juegos en la nube: el servicio Google Stadia anuncia precios para los usuarios</a></li>
<li><a href="../455280/index.html">Respuesta del psiquiatra al art√≠culo "Enfermo-saludable"</a></li>
<li><a href="../455284/index.html">Alexey Savvateev y teor√≠a del juego: "¬øCu√°l es la probabilidad de que una bomba at√≥mica se arroje en los pr√≥ximos cinco a√±os?"</a></li>
<li><a href="../455286/index.html">Dientes de sabidur√≠a: no se pueden quitar</a></li>
<li><a href="../455288/index.html">Noticias de la semana: bloqueador de anuncios corporativos en las claves de cifrado de Chrome, FSB y Yandex, la comunicaci√≥n se est√° volviendo m√°s costosa</a></li>
<li><a href="../455292/index.html">C√≥mo aumentar 4 veces el tiempo de ejecuci√≥n de los dispositivos con autoalimentaci√≥n</a></li>
<li><a href="../455294/index.html">Gu√≠a: c√≥mo elegir una bicicleta el√©ctrica usando Twitter como ejemplo - hablando de cuadros</a></li>
<li><a href="../455302/index.html">Marco de API de Golang</a></li>
<li><a href="../455306/index.html">Respuestas a sus preguntas sobre por qu√© necesita un editor para publicar un libro</a></li>
<li><a href="../455308/index.html">Lugar prometedor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>