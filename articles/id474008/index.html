<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚴 🧗🏿 👨‍💻 Greenplum 6: ulasan fitur baru 🧓🏻 🧕🏼 ✂️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selama 16 tahun terakhir, Greenplum, sebuah DBMS paralel yang terbuka dan masif, telah membantu berbagai perusahaan membuat keputusan berdasarkan anal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Greenplum 6: ulasan fitur baru</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474008/"><img src="https://habrastorage.org/webt/or/nu/hq/ornuhqed9rwdzvwmfwgodnf7kia.png" alt="gambar" width="150" align="left">  Selama 16 tahun terakhir, Greenplum, sebuah DBMS paralel yang terbuka dan masif, telah membantu berbagai perusahaan membuat keputusan berdasarkan analisis data. <br><br>  Selama ini, Greenplum merambah ke berbagai bidang bisnis, termasuk: ritel, fintech, telekomunikasi, industri, e-commerce.  Melakukan penskalaan ke ratusan node secara horizontal, toleransi kesalahan, kode sumber terbuka, kompatibilitas penuh dengan PostgreSQL, transaksionalitas, dan ANSI SQL - sulit membayangkan kombinasi properti yang lebih baik untuk DBMS analitik.  Mulai dari kelompok besar di perusahaan raksasa dunia, seperti Morgan Stanley (200 node, 25 Pb data) atau Tinkoff (&gt; 70 node), dan berakhir dengan instalasi dua-simpul kecil di startup yang nyaman, semakin banyak perusahaan memilih Greenplum.  Sangat menyenangkan untuk mengamati tren ini di Rusia - selama dua tahun terakhir, jumlah perusahaan domestik besar yang menggunakan Greenplum naik tiga kali lipat. <br><br>  Pada musim gugur 2019, rilis DBMS besar lainnya dirilis.  Pada artikel ini, saya akan membahas secara singkat tentang fitur-fitur baru utama dari GP 6. <br><a name="habracut"></a><br>  Rilis besar sebelumnya dari Greenplum versi 5 diterbitkan pada September 2017, rinciannya dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ini</a> .  Jika Anda masih tidak tahu apa itu Greenplum, pengantar singkat dapat diperoleh dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ini</a> .  Ini sudah tua, tetapi arsitektur DBMS mencerminkan dengan benar. <br><br>  Rilis saat ini, dengan benar, dapat disebut gagasan bersama: beberapa perusahaan dari seluruh dunia berpartisipasi dalam pengembangan - di antaranya Pivotal, Arenadata (tempat penulis artikel ini bekerja), Alibaba. <br><br>  Jadi apa yang baru di Greenplum 6? <br><br><h4>  Tabel direplikasi </h4><br>  Biarkan saya mengingatkan Anda bahwa di Greenplum ada dua jenis distribusi tabel di sebuah cluster: <br><br><ul><li>  Distribusi seragam acak </li><li>  Distribusi pada satu atau beberapa bidang </li></ul><br>  Dalam kebanyakan kasus, bergabung dengan dua tabel (BERGABUNG) dilakukan dengan redistribusi data antara segmen cluster selama eksekusi permintaan, dan hanya jika kedua tabel awalnya didistribusikan oleh kunci bergabung BERGABUNG terjadi secara lokal pada segmen tanpa mentransfer data antar segmen. <br><br>  GP 6 memberikan arsitek alat optimisasi skema penyimpanan baru - tabel direplikasi.  Tabel tersebut diduplikasi secara penuh pada semua segmen cluster.  Setiap koneksi ke tabel seperti itu di sisi kanan akan dilakukan secara lokal, tanpa mendistribusikan ulang data.  Pada dasarnya, fitur ini dimaksudkan untuk menyimpan banyak direktori. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh kueri dengan tabel yang direplikasi</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> expand_replicated … <span class="hljs-keyword"><span class="hljs-keyword">DISTRIBUTED</span></span> REPLICATED; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> expand_random … <span class="hljs-keyword"><span class="hljs-keyword">DISTRIBUTED</span></span> RANDOMLY; <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> expand_rnd a2 <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> expand_replicated a3 <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> a2.gen = a3.gen <span class="hljs-comment"><span class="hljs-comment">#  ,    redistribute/broadcast Limit (cost=0.00..1680.04 rows=1 width=22) -&gt; Gather Motion 144:1 (slice1; segments: 144) (cost=0.00..1680.04 rows=2 width=22) -&gt; Hash Left Join (cost=0.00..1680.04 rows=1 width=22) Hash Cond: (expand_rnd.gen = expand_replicated.gen) -&gt; Seq Scan on expand_rnd (cost=0.00..431.00 rows=1 width=10) -&gt; Hash (cost=459.60..459.60 rows=2000000 width=12) -&gt; Seq Scan on expand_replicated (cost=0.00..459.60 rows=2000000 width=12)</span></span></code> </pre> <br></div></div><br><h4>  Algoritma Kompresi Zstandard (ZSTD) </h4><br>  Dipersembahkan pada tahun 2016 oleh pengembang Facebook, algoritme kompresi lossless hampir segera menghantam jantung tim Arenadata kami, karena dibandingkan dengan Zlib (digunakan secara default di Greenplum) ia memiliki rasio kompresi yang lebih tinggi dengan lebih sedikit waktu yang diperlukan untuk kompresi dan dekompresi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q4/kv/bf/q4kvbf5hnif4yay7khzxcl2q0hu.png" width="500"></div><br>  <i>Sumber: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cnx-software.com</a></i> <br><br>  Efisiensi kompresi adalah salah satu parameter terpenting dari DBMS analitik modern.  Bahkan, ini memungkinkan Anda untuk mengurangi beban pada subsistem disk cluster yang relatif mahal dengan memuat CPU yang relatif murah.  Ketika secara berurutan membaca dan menulis data dalam jumlah besar, ini menghasilkan pengurangan yang signifikan dalam TCO sistem. <br><br>  Pada 2017, tim kami menambahkan dukungan ZSTD untuk tabel kolom di Greenplum, namun, menurut kebijakan rilis, revisi ini tidak masuk ke rilis minor resmi Greenplum.  Hingga hari ini, itu hanya tersedia untuk pelanggan komersial Arenadata, dan dengan rilis 6.0, semua orang dapat menggunakannya. <br><br><h4>  Optimalisasi ekspansi cluster (perluas) </h4><br>  Dalam versi GP sebelumnya, ekspansi klaster horizontal (menambahkan node baru) memiliki beberapa keterbatasan: <br><br><ul><li>  Meskipun redistribusi data terjadi di latar belakang tanpa downtime, sistem restart diperlukan ketika menambahkan node baru </li><li>  Algoritme hashing dan distribusi data memerlukan redistribusi lengkap semua tabel selama ekspansi - proses distribusi data latar belakang bisa memakan waktu berjam-jam atau bahkan berhari-hari untuk cluster yang sangat besar </li><li>  Selama distribusi latar belakang tabel, semua gabung hanya dibagikan </li></ul><br>  Greenplum 6 memperkenalkan algoritma perluasan kluster yang sama sekali baru, karena: <br><br><ul><li>  Ekspansi sekarang terjadi tanpa menghidupkan ulang sistem - downtime tidak diperlukan </li><li>  Algoritme hashing yang konsisten memungkinkan Anda untuk mendistribusikan ulang hanya sebagian dari blok ketika menambahkan node, yaitu redistribusi latar belakang tabel bekerja berkali-kali lebih cepat </li><li>  Logika untuk mengubah direktori sistem telah berubah - sekarang bahkan selama proses ekspansi semua koneksi (BERGABUNG) bekerja seperti biasa - baik secara lokal maupun didistribusikan </li></ul><br>  Sekarang ekstensi Greenplum hanya dalam hitungan menit, bukan jam, ini akan memungkinkan kluster untuk mengikuti selera unit bisnis yang terus tumbuh. <br><br><h4>  Keamanan tingkat kolom </h4><br>  Sekarang dimungkinkan untuk mendistribusikan hak ke kolom tertentu dalam tabel (fitur berasal dari PostgreSQL): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">grant</span></span> all (column_name) <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> public.table_name <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> gpadmin;</code> </pre> <br><h4>  Jsonb </h4><br>  Biner, penyimpanan optimal objek tipe JSON sekarang tersedia di GP.  Baca lebih lanjut tentang format di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><h4>  Jelaskan Otomatis </h4><br>  Ekstensi hebat lainnya yang datang ke GP dari PostgreSQL.  Itu dimodifikasi untuk bekerja dalam mode terdistribusi pada cluster Greenplum oleh tim Arenadata. <br><br>  Mengizinkan secara otomatis setiap permintaan (atau yang diambil secara terpisah) dalam DBMS untuk menyimpan informasi tentang: <br><br><ul><li>  rencana permintaan; </li><li>  sumber daya yang dikonsumsi pada setiap tahap eksekusi permintaan pada setiap segmen (node); </li><li>  waktu yang dihabiskan; </li><li>  jumlah baris yang diproses pada setiap tahap kueri pada setiap segmen (node). </li></ul><br><h4>  Diskquota </h4><br>  Ekstensi postgreSQL yang memungkinkan Anda membatasi penyimpanan disk yang tersedia untuk setiap pengguna dan skema: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> diskquota.set_schema_quota(<span class="hljs-string"><span class="hljs-string">'schema_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'1 MB'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> diskquota.set_role_quota(<span class="hljs-string"><span class="hljs-string">'user_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'1 MB'</span></span>);</code> </pre> <br><h3>  Fitur Distribusi DB Arenadata Baru </h3><br>  <i>Penafian - akan ada beberapa baris iklan berikutnya</i> :) <br><br>  Biarkan saya mengingatkan Anda, kami, Arenadata, sedang mengembangkan, mengimplementasikan dan mendukung platform penyimpanan data kami berdasarkan pada teknologi open source - Greenplum, Kafka, Hadoop, Clickhouse.  Klien kami adalah perusahaan Rusia terbesar di bidang ritel, telekomunikasi, fintech dan lainnya.  Di satu sisi, kami sendiri adalah kontributor proyek sumber terbuka (melakukan perubahan pada kernel), di sisi lain, kami sedang mengembangkan fungsionalitas tambahan yang hanya tersedia untuk pelanggan komersial kami.  Selanjutnya kita akan berbicara tentang fitur utama. <br><br><h4>  Tkhemali Connector alias Connector Greenplum -&gt; Clickhouse </h4><br>  Dalam proyek, kami sering menggunakan Greenplum + Clickhouse bunch - di satu sisi, ini memungkinkan kami untuk menggunakan model klasik terbaik dalam membangun gudang data (dari sumber ke data mart) yang membutuhkan banyak koneksi, mengembangkan sintaks ANSI SQL, transaksionalitas dan chip lain yang dimiliki Greenplum, di sisi lain, untuk menyediakan akses ke jendela toko built-in lebar dengan kecepatan maksimum ke sejumlah besar pengguna - dan Clickhouse tidak memiliki pesaing dalam hal ini. <br><br>  Untuk secara efektif menggunakan bundel seperti itu, kami telah mengembangkan konektor paralel khusus, yang secara transaksi (yaitu, konsisten bahkan dalam kasus transaksi rollback) memungkinkan Anda untuk mentransfer data dari GP ke KH.  Secara umum, arsitektur konektor ini layak mendapatkan artikel teknis murni yang terpisah - sebenarnya, di dalam kami harus menerapkan antrian asinkron paralel dengan sistem untuk secara dinamis memilih jumlah utas per sisipan dan aliran data. <br><br>  Hasilnya adalah kecepatan interaksi yang luar biasa: dalam pengujian kami pada disk SATA biasa, kami mendapatkan hingga 1 Gb / s per sisipan pada satu pasang server Greenplum - Clickhouse.  Mengingat bahwa kluster GP rata-rata pelanggan kami terdiri dari 20+ server, kecepatan interaksi lebih dari cukup. <br><br><h4>  Konektor kafka </h4><br>  Kami melakukan hal yang sama dengan integrasi dengan pialang pesan Kafka - kami sering menghadapi tugas kelebihan data dari Kafka ke Greenplum dalam mode waktu nyata (detik atau puluhan detik).  Namun, arsitektur konektor untuk Kafka berbeda.  Konektor adalah sekelompok proses terpisah yang disinkronkan (diluncurkan di Docker) dengan penemuan otomatis, yang, di satu sisi, adalah konsumen Kafka, dan di sisi lain, mereka memasukkan data langsung ke segmen Greenplum.  Konektor dapat bekerja dengan Kafka Registry dan memastikan konsistensi lengkap dari data yang ditransfer bahkan jika terjadi kegagalan perangkat keras. <br><br><h4>  Sistem manajemen dan pemantauan </h4><br>  Pengoperasian sistem di tempat produksi menuntut permintaan yang tinggi untuk penyebaran, pembaruan, dan pemantauan cluster.  Penting bahwa segala sesuatu yang terjadi dalam DBMS transparan untuk operasi dan spesialis DBA. <br><br>  Sistem manajemen dan pemantauan Arenadata Cluster Manager (ADCM) kami memberi para profesional operasi semua alat yang mereka butuhkan.  Bahkan, menyebarkan dan memperbarui cluster Greenplum dilakukan dengan mengklik tombol pada antarmuka grafis (semua OS, layanan, pemasangan disk, dan pengaturan jaringan dilakukan secara otomatis), selain itu, Anda mendapatkan tumpukan pemantauan yang sepenuhnya dikonfigurasi, siap untuk diintegrasikan dengan sistem perusahaan Anda.  Omong-omong, Arenadata Cluster Manager tidak hanya dapat mengelola Greenplum, tetapi juga Hadoop, Kafka, Clickhouse (kumpulan layanan ini diperlukan. Versi gratis mereka, seperti ADCM sendiri, dapat diunduh secara gratis di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web</a> kami, hanya dengan mengisi pop-up). <br><br><h4>  Kesimpulan </h4><br>  Jika Anda menggunakan Greenplum 5.X, saya sarankan Anda mempertimbangkan untuk meningkatkan cluster Anda ke versi saat ini 6.X dalam 2-3 bulan ke depan. <br><br>  Jika Anda belum menggunakan Greenplum, bergabunglah dengan kami!  Kami, Arenadata, selalu siap membantu Anda dengan ini. <br><br><h4>  Referensi </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Greenplum di github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Saluran Greenplum Russia Telegram</a> - ajukan pertanyaan Anda langsung ke pengguna Greenplum <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumentasi Greenplum 6</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id474008/">https://habr.com/ru/post/id474008/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473992/index.html">Tinjauan umum protokol modern dalam sistem otomasi industri</a></li>
<li><a href="../id473994/index.html">Memuat skrip modern</a></li>
<li><a href="../id473998/index.html">Belanda, atau di sana dan kembali</a></li>
<li><a href="../id474000/index.html">IQBX - desainer elektromekanis untuk kalangan dan pecinta DIY [ide konsep]</a></li>
<li><a href="../id474004/index.html">Dari Norilsk ke Riyadh: Kasus Nyata untuk Kartu Memori Suhu Industri Kingston microSD UHS-I</a></li>
<li><a href="../id474012/index.html">Keamanan untuk Wadah Docker</a></li>
<li><a href="../id474014/index.html">Bagaimana proksi membantu dalam promosi situs web: kasus penggunaan nyata, masalah dan solusi</a></li>
<li><a href="../id474016/index.html">Penulis tentang ... Penulis tentang ... Penulis, prod, atau bagaimana fiksi ilmiah punah dan dilahirkan kembali di Rusia</a></li>
<li><a href="../id474018/index.html">Kelelahan aspal: bagaimana kesehatan infrastruktur jalan dipantau</a></li>
<li><a href="../id474020/index.html">Bagaimana Methodius menjadi Anna: pengalaman mengembangkan dan meluncurkan pengklasifikasi pesan suara. Bagian 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>