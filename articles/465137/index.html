<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•í ü§∏üèæ ü§≤üèª Infraestructura como c√≥digo: primer conocido üö¥üèæ üêü üà∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nuestra empresa est√° en proceso de incorporar al equipo SRE. Entr√© en toda esta historia desde el lado del desarrollo. En el proceso, tuve pensamiento...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Infraestructura como c√≥digo: primer conocido</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/465137/">  Nuestra empresa est√° en proceso de incorporar al equipo SRE.  Entr√© en toda esta historia desde el lado del desarrollo.  En el proceso, tuve pensamientos e ideas que quiero compartir con otros desarrolladores.  En este art√≠culo de meditaci√≥n, hablo sobre lo que sucede, c√≥mo sucede y c√≥mo todos los dem√°s pueden vivir con √©l. <br><br><img src="https://habrastorage.org/webt/0-/94/6m/0-946m7husvtc4cpzcki7i_jfti.png"><br><a name="habracut"></a><br><blockquote>  <b>Continuaci√≥n de una serie de art√≠culos basados ‚Äã‚Äãen discursos en nuestro evento interno <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DevForum</a></b> : <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">1. Gato Schrodinger sin caja: el problema del consenso en sistemas distribuidos.</a> <br>  2. Infraestructura como c√≥digo.  (Estas aqui) <br>  3. Generaci√≥n de contratos mecanografiados para modelos de C #.  (En progreso ...) <br>  4. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo los servidores est√°n de acuerdo entre s√≠: algoritmo de consenso distribuido en balsa.</a> <br>  5. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Infraestructura como c√≥digo: c√≥mo superar los problemas con XP.</a> <br>  ... </blockquote><br>  Decidimos hacer que el equipo de SRE implementara ideas de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">google sre</a> .  Reclutamos programadores de sus propios desarrolladores y los enviamos a estudiar durante varios meses. <br><br>  El equipo enfrent√≥ las siguientes tareas de capacitaci√≥n: <br><br><ul><li>  Describa nuestra infraestructura, que se encuentra principalmente en Microsoft Azure en forma de c√≥digo (Terraform y todo lo que existe). </li><li>  Ense√±e a los desarrolladores c√≥mo trabajar con infraestructura. </li><li>  Prepare a los desarrolladores para el deber. </li></ul><br><h2>  Introduciendo el concepto de Infraestructura como c√≥digo </h2><br>  En el modelo habitual del mundo (administraci√≥n cl√°sica), el conocimiento sobre infraestructura se encuentra en dos lugares: <br><br><ol><li>  O en forma de conocimiento en la mente de los expertos. <img src="https://habrastorage.org/webt/gi/aq/g_/giaqg_fzth1wx5iafyrjg15k3nm.png"></li><li>  O esta informaci√≥n est√° en algunas m√°quinas de escribir, algunas de las cuales los expertos conocen.  Pero no es un hecho que una persona del exterior (en caso de que todo nuestro equipo muera repentinamente) pueda descubrir qu√© funciona y c√≥mo.  Puede haber mucha informaci√≥n sobre la m√°quina: accesorios, tapones de corona, una unidad (ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">montaje en disco</a> ) y solo una lista interminable de lo que puede suceder.  Es dif√≠cil entender lo que est√° sucediendo en la realidad. <img src="https://habrastorage.org/webt/aw/-k/bo/aw-kbocizjukdjqdnfeitmyxa-m.png"></li></ol><br>  En ambos casos, estamos atrapados y nos volvemos dependientes: <br><br><ul><li>  o de una persona que es mortal, propensa a la enfermedad, se enamora, cambia de humor y simplemente despidos banales; </li><li>  o de una m√°quina que funciona f√≠sicamente y que tambi√©n se cae, roba, presenta imprevistos e inconvenientes. </li></ul><br>  No hace falta decir que, idealmente, todo deber√≠a traducirse en c√≥digo escrito de alta calidad, legible y compatible con humanos. <br><br>  Por lo tanto, la infraestructura como c√≥digo (Incfastructure as Code - IaC) es una descripci√≥n de toda la infraestructura disponible en forma de c√≥digo, as√≠ como las herramientas relacionadas para trabajar con ella y obtener la infraestructura real a partir de ella. <br><br><div class="spoiler">  <b class="spoiler_title">¬øPor qu√© traducir todo a c√≥digo?</b> <div class="spoiler_text">  Las personas no son autos.  No pueden recordarlo todo.  La reacci√≥n de una persona y una m√°quina es diferente.  Todo lo automatizado funciona potencialmente m√°s r√°pido que todo lo que hace una persona.  Lo m√°s importante es una sola fuente de verdad. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">¬øDe d√≥nde vienen los nuevos ingenieros de SRE?</b> <div class="spoiler_text">  Entonces, decidimos conectar nuevos ingenieros de SRE, pero ¬øde d√≥nde obtenerlos?  El libro con las respuestas correctas ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Google SRE Book</a> ) nos dice: de los desarrolladores.  Despu√©s de todo, funcionan con c√≥digo, y logras una condici√≥n perfecta. <br><br>  Los buscamos durante mucho tiempo en el mercado de personal fuera de nuestra empresa.  Pero nos vemos obligados a admitir que no encontramos ninguno bajo nuestras solicitudes.  Tuve que lana entre los m√≠os. <br></div></div><br><h2>  Infraestructura como problemas de c√≥digo </h2><br>  Ahora veamos ejemplos de c√≥mo la infraestructura puede conectarse al c√≥digo.  El c√≥digo est√° bien escrito, de alta calidad, con comentarios y sangr√≠as. <br><br>  C√≥digo de muestra de Terraforma. <br><br><img src="https://habrastorage.org/webt/y-/m8/np/y-m8npsbs-vdtv1l2ugspz4mw_q.png"><br><br>  C√≥digo de muestra de Ansible. <br><br><img src="https://habrastorage.org/webt/p0/_z/lu/p0_zluh06sft3x2knlb-glqtebg.png"><br><br>  Se√±ores, pero si todo fuera tan simple!  Estamos contigo en el mundo real, y √©l siempre est√° listo para sorprenderte, para presentarte sorpresas, problemas.  No sin ellos aqu√≠. <br><br>  <b>1. El primer problema es que, en la mayor√≠a de los casos, IaC es alg√∫n tipo de dsl.</b> <br><br>  Y DSL, a su vez, es una descripci√≥n de la estructura.  M√°s precisamente, lo que debe tener: Json, Yaml, modificaciones de algunas grandes empresas que crearon su propio dsl (HCL se usa en la terraforma). <br><br>  El problema es que en √©l f√°cilmente no puede haber cosas tan familiares para nosotros como: <br><br><ul><li>  Variables </li><li>  condiciones; </li><li>  en alg√∫n lugar no hay comentarios, por ejemplo, en Json, por defecto no se proporcionan; </li><li>  funciones </li><li>  y no estoy hablando de cosas de tan alto nivel como clases, herencia y todo eso. </li></ul><br>  <b>2. El segundo problema con este c√≥digo suele ser un entorno heterog√©neo</b> .  Por lo general, te sientas y trabajas con C #, es decir  con un idioma, una pila, un ecosistema.  Y aqu√≠ tienes una gran variedad de tecnolog√≠as. <br><br>  Es una situaci√≥n muy real cuando un bash con python inicia un proceso en el que Json se resbala.  Lo analiza, luego otro generador genera otros 30 archivos.  Por todo esto, entran las variables de entrada de Azure Key Vault, que se unen mediante el complemento para drone.io escrito en Go, y estas variables pasan a trav√©s de yaml, que se obtuvo como resultado de la generaci√≥n del motor de plantillas jsonnet.  Es bastante dif√≠cil tener un c√≥digo estrictamente bien descrito cuando se tiene un entorno tan diverso. <br><br>  El desarrollo tradicional en el marco de una tarea viene con un idioma.  Aqu√≠ trabajamos con una gran cantidad de idiomas. <br><br>  <b>3. El tercer problema es tuling</b> .  Estamos acostumbrados a editores geniales (Sra. Visual Studio, Jetbrains Rider) que hacen todo por nosotros.  E incluso si estamos aburridos, dir√°n que estamos equivocados.  Parece ser normal y natural. <br><br>  Pero en alg√∫n lugar cercano hay un VSCode, en el que hay algunos complementos que de alguna manera est√°n instalados, admitidos o no.  Se lanzaron nuevas versiones y no fueron compatibles.  Una transici√≥n banal a la implementaci√≥n de una funci√≥n (incluso si existe) se convierte en un problema complejo y no trivial.  Un simple cambio de nombre de una variable es una repetici√≥n en un proyecto de una docena de archivos.  Es una suerte si es algo que necesita ser reparado.  Por supuesto, hay retroiluminaci√≥n en algunos lugares, hay compilaci√≥n autom√°tica, en alg√∫n lugar hay formato (aunque no comenc√© las ventanas en la terraforma). <br><br>  En el momento de la escritura, el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">complemento vscode-terraform</a> a√∫n no se ha lanzado para admitir la versi√≥n 0.12, aunque ya se ha lanzado durante 3 meses. <br><br><h2>  Es hora de olvidarse de ... </h2><br><ol><li>  Depuraci√≥n </li><li>  Herramienta de refactorizaci√≥n. </li><li>  Autocompletado. </li><li>  Detecta errores de compilaci√≥n. </li></ol><br>  Es divertido, pero tambi√©n aumenta el tiempo de desarrollo y aumenta la cantidad de errores que inevitablemente ocurren. <br><br>  Lo peor es que nos vemos obligados a pensar no en c√≥mo dise√±ar, descomponer archivos en carpetas, descomponer, hacer que el c√≥digo sea compatible, legible, etc., sino en c√≥mo escribir√≠a este comando correctamente, porque de alguna manera lo escrib√≠ incorrectamente . <br><br>  Como principiante, est√°s tratando de aprender terraformas, y el IDE no te ayuda en esto en absoluto.  Cuando hay documentaci√≥n, entraron, miraron.  Pero si tuviera que ingresar un nuevo lenguaje de programaci√≥n, entonces el IDE sugerir√≠a que existe ese tipo, pero no lo hay.  Al menos a nivel int o de cadena.  Esto a menudo es √∫til. <br><br><h2>  ¬øPero qu√© hay de las pruebas? </h2><br>  Usted pregunta: "¬øQu√© pasa con las pruebas, caballeros programadores?"  Los chicos serios est√°n probando todo en la producci√≥n, y es dif√≠cil.  Aqu√≠ hay un ejemplo de la prueba unitaria para el m√≥dulo terraform del sitio web de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microsoft</a> . <br><br><img src="https://habrastorage.org/webt/km/p_/x3/kmp_x3dinz1aitcwfekbdhbb3cq.png"><br><br>  Tienen buena documentaci√≥n.  Siempre me ha gustado Microsoft por su enfoque de documentaci√≥n y capacitaci√≥n.  Pero no necesita ser t√≠o Bob para comprender que este no es un c√≥digo ideal.  Tenga en cuenta la validaci√≥n presentada a la derecha. <br><br>  El problema con la prueba de la unidad es que usted y yo podemos verificar la exactitud de la salida de Json.  Lanc√© 5 par√°metros, me dieron una plantilla Json para 2000 l√≠neas.  Puedo analizar lo que sucede aqu√≠, validar el resultado de la prueba ... <br><br>  Es dif√≠cil analizar a Json en Go.  Y debe escribir en Go, porque las terraformas en Go son una buena pr√°ctica de lo que prueba en el idioma en el que escribe.  La organizaci√≥n misma del c√≥digo es muy d√©bil.  Al mismo tiempo, es la mejor biblioteca para realizar pruebas. <br><br>  Microsoft mismo escribe sus m√≥dulos, prob√°ndolos de esta manera.  Por supuesto, esto es de c√≥digo abierto.  Todo lo que hablo de ti puede venir y reparar.  Puedo sentarme y arreglar todo en una semana, abrir complementos de c√≥digo VS, terraformas, hacer un complemento de piloto.  Tal vez escriba un par de analizadores, linters de rosca, copie la biblioteca para probar.  Puedo hacer todo  Pero no tengo que hacer esto. <br><br><h2>  Infraestructura de mejores pr√°cticas como c√≥digo </h2><br>  Vamos m√°s lejos  Si no hay pruebas en IaC, mal con IDE y ajuste, entonces deber√≠a haber al menos mejores pr√°cticas.  Acabo de ir a google analytics y compar√© dos consultas de b√∫squeda: las mejores pr√°cticas de Terraform y las mejores pr√°cticas de c #. <br><br><img src="https://habrastorage.org/webt/mz/oe/im/mzoeim6sts4oebef-wlxbuc1ur4.png"><br><br>  Que vemos  Las estad√≠sticas despiadadas no est√°n a nuestro favor.  Por la cantidad de material, lo mismo.  En el desarrollo de C #, solo nos ba√±amos en materiales, tenemos las mejores pr√°cticas, hay libros escritos por expertos y tambi√©n libros escritos en libros de otros expertos que critican esos libros.  El mar de documentaci√≥n oficial, art√≠culos, cursos de capacitaci√≥n, ahora tambi√©n desarrollo de c√≥digo abierto. <br><br>  En cuanto a la solicitud de IaC: aqu√≠, poco a poco, est√° tratando de recopilar la informaci√≥n de los informes de la alta carga o HashiConf, de la documentaci√≥n oficial y numerosos problemas en el github.  ¬øC√≥mo se distribuyen estos m√≥dulos, qu√© hacer con ellos?  Parece que este es un problema real ... Hay una comunidad, caballeros, donde recibir√°n 10 comentarios en un github para cualquier pregunta.  Pero esto no es exacto. <br><br>  Desafortunadamente, en este momento, los expertos apenas comienzan a aparecer.  Si bien hay muy pocos de ellos.  Y la comunidad misma se cuelga al nivel de los primordios. <br><br><h2>  ¬øA d√≥nde va todo y qu√© hacer? </h2><br>  Puedes soltar todo y volver a C #, al mundo de un piloto.  Pero no  ¬øPor qu√© har√≠as esto si no encontraras una soluci√≥n?  A continuaci√≥n, doy mis conclusiones subjetivas.  Puedes discutir conmigo en los comentarios, ser√° interesante. <br><br>  Personalmente, me puse algunas cosas: <br><br><ol><li>  El desarrollo en esta √°rea es muy r√°pido.  Doy el calendario de solicitudes de DevOps. <br><br><img src="https://habrastorage.org/webt/6x/r2/3e/6xr23efbnzgfuk6yrakjxyegogw.png"><br><br>  Quiz√°s el tema sea exagerado, pero el hecho de que la esfera est√© creciendo nos da algo de esperanza. <br><br>  Si algo crece tan r√°pido, seguramente aparecer√°n personas inteligentes que dir√°n c√≥mo hacerlo y c√≥mo no hacerlo.  El aumento de la popularidad lleva al hecho de que tal vez alguien tenga tiempo de agregar finalmente el complemento jsonnet para vscode, lo que nos permitir√° proceder a la implementaci√≥n de la funci√≥n, en lugar de buscarla a trav√©s de ctrl + shift + f.  Cuando todo se desarrolla, aparecen m√°s materiales.  El mismo libro de Google sobre SRE es un gran ejemplo. </li><li>  Existen t√©cnicas y pr√°cticas desarrolladas en el desarrollo convencional que podemos aplicar con √©xito aqu√≠.  S√≠, hay matices con las pruebas y un entorno heterog√©neo, sintonizaci√≥n insuficiente, pero se ha acumulado una gran cantidad de pr√°cticas que pueden ser √∫tiles y √∫tiles. <br><br>  Un ejemplo trivial: colaboraci√≥n a trav√©s de la programaci√≥n en pareja.  Ayuda mucho resolverlo.  Cuando tienes un vecino cerca que tambi√©n est√° tratando de entender algo, juntos lo entender√°n mejor. <br><br>  Comprender c√≥mo se realiza la refactorizaci√≥n ayuda a producirlo incluso en tal situaci√≥n.  Es decir, puede cambiar no todo a la vez, sino cambiar el nombre, luego cambiar la ubicaci√≥n, luego puede resaltar alguna parte, oh, pero no hay suficientes comentarios. </li></ol><br><h2>  Conclusi√≥n </h2><br>  A pesar de que mi razonamiento puede parecer pesimista, espero con ansias el futuro y espero sinceramente que nosotros (y usted) tengamos √©xito. <br><blockquote>  Luego viene la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">segunda parte del art√≠culo</a> .  En √©l, hablo sobre c√≥mo usamos pr√°cticas de programaci√≥n extremas para mejorar nuestro proceso de aprendizaje y trabajar con la infraestructura. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465137/">https://habr.com/ru/post/465137/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465127/index.html">C√≥mo cerrar tareas en el rastreador de errores</a></li>
<li><a href="../465129/index.html">Promoci√≥n de concesionarios en la b√∫squeda. SEO para el "directorio extranjero"</a></li>
<li><a href="../465131/index.html">Soporte para monorepo y multirepo en werf y ¬øqu√© tiene que ver el Registro Docker con √©l?</a></li>
<li><a href="../465133/index.html">Ganamos en energ√≠a solar o ingresos pasivos al 25% anual, experiencia pr√°ctica. Parte 1</a></li>
<li><a href="../465135/index.html">Telefon√≠a DECT en edificios</a></li>
<li><a href="../465139/index.html">C√≥mo hacerlo: Factores importantes para revisar al elegir una VPN gratuita para la navegaci√≥n web</a></li>
<li><a href="../465141/index.html">M√°s de 33 herramientas de seguridad de Kubernetes</a></li>
<li><a href="../465143/index.html">¬øC√≥mo encontrar la mejor ubicaci√≥n para los negocios? Hack de vida sin registro y SMS</a></li>
<li><a href="../465145/index.html">Reconocimiento facial a nivel de la rodilla</a></li>
<li><a href="../465149/index.html">'Hola mundo' para ti en la nube</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>