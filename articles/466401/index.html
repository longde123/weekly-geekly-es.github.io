<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö´ ü§ΩüèΩ ‚óæÔ∏è Un poco de matem√°tica financiera: c√°lculo de inflaci√≥n e inter√©s üë®üèº‚Äçüíª üç† üîï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente, tuve que verificar los c√°lculos realizados por los servicios p√∫blicos de mi ciudad. Hubo un tema controvertido, que solo puede resolver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Un poco de matem√°tica financiera: c√°lculo de inflaci√≥n e inter√©s</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466401/"> Recientemente, tuve que verificar los c√°lculos realizados por los servicios p√∫blicos de mi ciudad.  Hubo un tema controvertido, que solo puede resolverse realizando c√°lculos correctos.  Mirando hacia el futuro, dir√© que los servicios p√∫blicos piensan mal.  Por lo tanto, aqu√≠ consideraremos c√≥mo calcular correctamente los costos de inflaci√≥n y el 3% anual sobre la deuda por obligaciones, de acuerdo con el C√≥digo Civil de Ucrania. <br><br>  La primera parte describe el c√°lculo de los costos de inflaci√≥n, esto es espec√≠fico de Ucrania. <br>  La segunda parte (m√°s grande) se dedicar√° a la cuesti√≥n del c√°lculo del 3% anual.  Tambi√©n es aplicable a la Federaci√≥n de Rusia, Bielorrusia y Kazajst√°n, pero en estos pa√≠ses la tasa no es fija, sino que depende de la tasa de refinanciaci√≥n del Banco Central.  El resto del pa√≠s no se ve√≠a. <br><br>  La segunda parte est√° muy cerca de calcular el inter√©s en las transacciones de cr√©dito ordinarias (pr√©stamos, pr√©stamos, pr√©stamos, etc.). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/di/2q/9l/di2q9lbdqyzqzcywadgdnny0bgo.png" alt="imagen alt"></div><br>  Primero una teor√≠a, al final un poco de c√≥digo. <br><br>  Todo esto bajo el corte. <br><a name="habracut"></a><br>  Entonces, llegu√© a manos de un documento de los servicios p√∫blicos "Declaraci√≥n de acumulaci√≥n de costos de inflaci√≥n y 3% anual".  Lo revis√© y descubr√≠ que se calcul√≥ utilizando el algoritmo incorrecto y es de inter√©s, ya que debe implementar los requisitos del art√≠culo del C√≥digo Civil de Ucrania. <br><br>  Lo que debe considerarse est√° escrito en el C√≥digo Civil de Ucrania: <br><blockquote>  Art√≠culo 625 del C√≥digo Civil de Ucrania.  "Responsabilidad por violaci√≥n de una obligaci√≥n monetaria" <br>  2. Un deudor que haya retrasado el cumplimiento de una obligaci√≥n monetaria, a solicitud del acreedor, estar√° obligado a pagar el monto de la deuda teniendo en cuenta el √≠ndice de inflaci√≥n establecido para todo el per√≠odo de demora, as√≠ como el 3% anual del monto vencido ... </blockquote>  Sobre la base de las cifras de la deuda, los servicios p√∫blicos calcularon los costos de inflaci√≥n y el 3% anual. <br><br><h2>  Costos de inflaci√≥n </h2><br>  Adem√°s, hablar√© sobre el algoritmo de c√°lculo, y no sobre n√∫meros espec√≠ficos. <br><br>  La inflaci√≥n es un proceso caracterizado por una depreciaci√≥n de la moneda, es decir, una disminuci√≥n de su poder adquisitivo y un aumento general de los precios.  Excluyendo la inflaci√≥n, los resultados finales de los c√°lculos de flujo de efectivo son muy arbitrarios. <br><br>  √çndice de inflaci√≥n (II) o √çndice de precios al consumidor (IPC), √çndice de precios al consumidor (IPC): uno de los tipos de √≠ndices de precios creados para medir el nivel de precios promedio de bienes y servicios (canasta de consumo) durante un cierto per√≠odo en la econom√≠a. <br><br>  La IA es un indicador que caracteriza la din√°mica del nivel general de precios de los bienes y servicios que la poblaci√≥n adquiere para el consumo no productivo.  Este es el √≠ndice de crecimiento, que muestra cu√°nto porcentaje aumenta el precio promedio para el per√≠odo bajo revisi√≥n. <br><br>  En Ucrania, AI y CPI son sin√≥nimos <br><br>  Dado que el √≠ndice de precios es un √≠ndice de cadena, para los per√≠odos que siguen uno tras otro, se calcula multiplicando los indicadores, por ejemplo, 101% * 102% = (1.01 * 1.02) * 100% = 103.02%. <br><br>  La IA es calculada por el Comit√© Estatal de Estad√≠stica de Ucrania y publicada en publicaciones oficiales.  Estas cifras clave se pueden utilizar para volver a calcular los importes en efectivo. <br>  ¬øQu√© piensan los trabajadores comunales? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ge/5p/hv/ge5phvi9cjhbbz7kkx0jndzuyli.png" alt="Parte del documento de facturaci√≥n de servicios p√∫blicos."></div><br>  La √∫ltima fecha de liquidaci√≥n es el 7 de diciembre de 2016. <br><br>  Veamos c√≥mo los trabajadores comunales obtuvieron tasas de inflaci√≥n de costos. <br><br>  Se puede ver a simple vista que en la tercera (y quinta columna), en lugar de la parte entera 1, deber√≠a haber la parte entera 0. ¬øC√≥mo obtuvieron la parte fraccionaria? <br><br>  <strong>Septiembre de 2016.</strong> Parte fraccional 0.028.  El plazo de pago para septiembre es el 20 de octubre de 2016. La parte fraccionaria corresponde al √≠ndice de inflaci√≥n publicado por el Comit√© Estatal de Estad√≠sticas, para octubre de 2016 - 102.8% <br><br>  <strong>Agosto de 2016.</strong> Parte fraccional 0.0465.  El plazo de pago para agosto es el 20 de septiembre de 2016. La parte fraccionaria corresponde al √≠ndice de inflaci√≥n de septiembre multiplicado por II para octubre: 101.8% * 102.8% = 104.65%, o en acciones, 1.018 * 1.028 = 1.046504.  Las utilidades se redondean a 1.0465 y se imprime este n√∫mero, aunque la unidad se debe quitar, ya que en la siguiente columna solo se imprime el monto de los costos de inflaci√≥n, y no el monto acumulado. <br><br>  <strong>Julio de 2016 y anteriores.</strong>  Realic√© estos c√°lculos y restaur√© el algoritmo.  Los servicios p√∫blicos multiplican los √≠ndices de inflaci√≥n, comenzando desde el mes siguiente al mes de la prestaci√≥n de servicios (mes de la fecha de vencimiento), y terminando en octubre de 2016. <br><br>  <strong>El punto de inicio es</strong> solo parcialmente cierto.  Como mostrar√© m√°s adelante, en el caso general, el c√°lculo realmente necesita comenzar a partir de este mes, pero en nuestro caso particular, se debe omitir el primer mes (equiparar AI al 100%). <br><br>  <strong>El punto final de la</strong> multiplicaci√≥n.  Dado que el √∫ltimo d√≠a de c√°lculo es en diciembre y necesita finalizar diciembre, este suele ser el caso.  Como mostrar√© m√°s adelante, en este caso particular, diciembre tambi√©n debe omitirse (tambi√©n equiparar AI al 100%).  Y el 7 de diciembre, las IA de diciembre no tuvieron tiempo de publicar. <br><br>  ¬øPor qu√© noviembre no se tiene en cuenta en ninguna parte?  Creo que se olvidaron de ingresarlo en el sistema. <br><br>  Ahora veamos c√≥mo calcular el √≠ndice de inflaci√≥n.  Seg√∫n <strong>sea ‚Äã‚Äãnecesario</strong> , se describe en la Carta informativa del Tribunal Econ√≥mico Supremo de Ucrania N¬∫ 01-06 / 928/2012 de fecha 17.07.2012 [6]. <br><br>  Dar√© parte del p√°rrafo: <br><blockquote>  El monto de la deuda que debe pagarse de 1 a 15 d√≠as del mes se indexa teniendo en cuenta este mes, y si el monto de la deuda debe pagarse de 16 a 31 d√≠as del mes, el c√°lculo comienza a partir del mes siguiente. <br><br>  Del mismo modo, si una deuda se ha pagado de 1 a 15 d√≠as de un mes, los costos de inflaci√≥n se calculan sin tener en cuenta este mes, y si de 16 a 31 d√≠as de un mes, los costos de inflaci√≥n se calculan teniendo en cuenta este mes. </blockquote>  En nuestro caso, el plazo de pago es el d√≠a 20 del mes siguiente al mes de la prestaci√≥n de servicios, es decir,  Para la prestaci√≥n de servicios en septiembre, la fecha de inicio de los acuerdos es el 21 de octubre de 2016 y la fecha l√≠mite es el 7 de diciembre de 2016. <br><br>  Es decir  es correcto decir esto: para la prestaci√≥n de servicios en septiembre de 2016, considere la inflaci√≥n durante tres meses (pase el cursor o el ciclo), de octubre a diciembre, pero en el primer y √∫ltimo mes, tome AI igual a 1 (100%), y tenga en cuenta solo noviembre. <br><br>  En noviembre de 2016, la IA ascendi√≥ a 101.8%, es decir  el coeficiente debe ser 0.0180, no 0.0280.  Escrib√≠ sobre la unidad principal antes. <br><br><h2>  3% anual </h2><br>  Veamos c√≥mo los servicios comunales recibieron coeficientes y cantidades acumuladas del 3% anual.  Esta es la quinta columna en la tabla de arriba. <br><br>  Como escrib√≠ anteriormente, no deber√≠a haber una unidad principal, deber√≠a haber 0. Observamos la parte fraccionaria y notamos que de alguna manera es sospechosamente redonda: cada mes anterior es 0.0025 m√°s que el mes actual. <br><br>  Mediante c√°lculos simples, se puede determinar que los servicios p√∫blicos, sin m√°s pre√°mbulos, dividieron el 3% en 12 meses, recibieron 0.0025, o 0.25% por mes, y acumularon este porcentaje por cada mes de retraso completo e incompleto.  S√≠, si nos fijamos en octubre de 2016, la fecha l√≠mite de pago para el 21 de noviembre y los c√°lculos se realizaron el 7 de diciembre, durante un mes incompleto contaron el mismo 0.25%. <br><br>  El enfoque admira la franqueza brutal, pero, como mostrar√© m√°s adelante, las matem√°ticas financieras no conocen tal algoritmo. <br><br>  La legislaci√≥n de Ucrania y las matem√°ticas financieras no dan una respuesta clara a la pregunta de c√≥mo cobrar un 3% anual.  He buscado varios libros sobre este tema, pero los libros son antiguos y datan de 2002.  Por lo tanto, los algoritmos de los libros se complementar√°n con el hecho de que fue posible buscar en Google art√≠culos m√°s modernos y occidentales.  [1] fue reimpreso en 2007, y no se pudieron encontrar libros m√°s recientes en ruso.  Quiz√°s porque las matem√°ticas financieras, como ciencia, se originaron hace mucho tiempo, mucho antes del advenimiento de las computadoras, surgieron conceptos como "cr√©dito" e "inter√©s en cr√©dito" hace varios cientos de a√±os.  Y los algoritmos no han cambiado mucho desde 2002. <br><br>  Pero la visi√≥n occidental del problema es diferente de la descrita en los libros en ruso.  Citar√© informaci√≥n primero de libros en ruso, y luego de art√≠culos occidentales, indicando d√≥nde coinciden. <br><br>  Lo que se escribe a continuaci√≥n se relaciona con el caso espec√≠fico de acumular un 3% anual sobre los atrasos, pero tambi√©n puede generalizarse al c√°lculo de intereses sobre otras relaciones crediticias si los intereses se acumulan de acuerdo con el inter√©s simple en lugar del esquema de inter√©s compuesto. <br><br>  De acuerdo con el art.  625 El C√≥digo Civil de Ucrania debe acumular un 3% por a√±o de acuerdo con el esquema de inter√©s simple.  Para calcular el monto de inter√©s, el monto de la deuda (o el cuerpo del pr√©stamo, en el caso general) debe multiplicarse por la tasa de inter√©s anual normalizada del 3% y multiplicarse por la fracci√≥n del a√±o (duraci√≥n en a√±os) a la que ascendi√≥ el retraso.  Este porcentaje puede ser superior a 1 si el retraso es superior a un a√±o. <br><br>  La duraci√≥n del retraso se expresa en d√≠as.  En un caso m√°s general, el plazo del pr√©stamo <strong>puede</strong> expresarse en d√≠as (la situaci√≥n en la que el plazo del pr√©stamo se expresa en meses y a√±os no se considera aqu√≠).  Y la tasa anual del 3% es la tasa normalizada de inter√©s simple para el a√±o.  <strong>Por lo tanto, debe poder reducir la duraci√≥n del retraso (cr√©dito) en d√≠as a la duraci√≥n en a√±os.</strong>  <strong>Esta no es una tarea trivial, ya que la duraci√≥n del a√±o depende de su n√∫mero.</strong> <br><br>  La duraci√≥n en d√≠as es una medida definida de manera √∫nica de la duraci√≥n de las brechas de calendario, en oposici√≥n a la duraci√≥n en a√±os.  La definici√≥n de este √∫ltimo requiere una aclaraci√≥n en forma de una regla para convertir la duraci√≥n en d√≠as en duraci√≥n en a√±os.  Una serie de m√©todos est√°ndar para convertir la duraci√≥n en d√≠as en duraci√≥n en a√±os se basa en dividir el n√∫mero de d√≠as por el denominado <strong>"divisor anual"</strong> .  Los valores m√°s t√≠picos del divisor anual son 360 y 365 d√≠as.  En los casos m√°s simples, el divisor es un n√∫mero constante e independiente del intervalo.  El n√∫mero de d√≠as en un per√≠odo siempre act√∫a como un dividendo (numerador de una fracci√≥n). <br>  Y debe decidir el procedimiento para calcular los t√©rminos en d√≠as.  Consideremos dos ejemplos descabellados: <br><br><ol><li>  El cliente recibe un pr√©stamo a corto plazo del banco del 6 de diciembre de 2018 al 7 de diciembre de 2018.  ¬øCu√°l es el plazo del contrato y cu√°ntos d√≠as necesito para acumular intereses?  Obviamente - 1 d√≠a. </li><li>  El suscriptor hace un pedido anticipado del servicio al operador de telecomunicaciones, con un per√≠odo de validez en el futuro del 6 de diciembre de 2018 al 7 de diciembre de 2018.  ¬øCu√°les son las l√≠neas de provisi√≥n de servicios y por cu√°ntos d√≠as tengo que tomar una tarifa de suscripci√≥n para el servicio?  Obviamente 2 d√≠as. </li></ol><br>  Cual es la diferencia <br><br>  El hecho es que el d√≠a no es un punto en la l√≠nea de tiempo, sino un intervalo que se puede escribir de dos maneras (recuerde, el corchete en el borde del intervalo significa que el punto est√° en el intervalo, el par√©ntesis es el punto que no est√° en el intervalo): <br><br><ul><li>  [06.12.2018 00.00.00, 12/07/2018 00.00.00) - aqu√≠ el borde derecho del intervalo no est√° incluido en el intervalo, </li><li>  [06/12/2018 00.00.00, 12/06/2018 23.59.59] - aqu√≠ se incluye el borde derecho del intervalo en el intervalo. </li></ul><br>  En el primer caso (1), cuando el intervalo de tiempo no se da expl√≠citamente, sino en la forma de un intervalo entre fechas, generalmente se calcula el n√∫mero exacto de d√≠as, incluido el primer o el √∫ltimo d√≠a, pero no ambos.  [4] dice lo mismo en otras palabras: "El d√≠a en que se emite el pr√©stamo y el d√≠a de reembolso se considera un d√≠a". <br><br>  Este m√©todo determina el llamado tiempo exacto.  Tambi√©n se puede determinar f√°cilmente si ambas fechas se refieren al mismo a√±o y hay un calendario disponible que muestra el n√∫mero de serie de cada d√≠a del a√±o.  Entonces es suficiente restar el n√∫mero de serie de la fecha temprana del n√∫mero de serie de la fecha tard√≠a y el resultado dar√° la duraci√≥n del per√≠odo.  En Oracle Database, simplemente puede restar fechas (tipo DATE) truncadas a un d√≠a (con el tiempo descartado), una de la otra, la diferencia es un n√∫mero entero de d√≠as. <br><br>  En el segundo caso (2) estamos hablando de d√≠as, entonces contamos dos d√≠as. <br><br>  Adem√°s, procedo del hecho de que el n√∫mero de d√≠as que ya se ha determinado, por ejemplo, en el caso de los servicios comunales, cuando la fecha l√≠mite de pago es el 20 de septiembre (es decir, este es el √∫ltimo d√≠a de pago aceptable), y se pag√≥ el 21 de septiembre, es decir. Es obvio que la demora debe tomarse igual a 1 d√≠a.  En caso de que se encuentre con una indicaci√≥n del intervalo que no incluye el borde izquierdo, simplemente mueva el borde izquierdo un d√≠a a la derecha. <br><br>  ¬øC√≥mo contamos el n√∫mero de d√≠as y el numerador de una fracci√≥n?  Hay un c√°lculo exacto y un c√°lculo aproximado. <br><br><h3>  Cuenta precisa de d√≠as </h3><br><h4>  Pr√°ctica de habla rusa </h4><br>  El texto se basa adem√°s en [1]. <br><br>  La elecci√≥n del n√∫mero exacto de d√≠as en un per√≠odo como divisor, y las dos reglas m√°s comunes dan las reglas m√°s comunes como denominador: un divisor anual de 360 ‚Äã‚Äão 365: <br><br>  <strong>Regla (R1) ACT / 365.</strong>  Para esta regla, la duraci√≥n en d√≠as se divide por el n√∫mero 365. Observo que la duraci√≥n de un a√±o bisiesto ser√° 366/365 = 1.00274, que es m√°s de uno.  El error de la regla ACT / 365 ser√° mayor, m√°s a√±os bisiestos en un per√≠odo.  Por lo tanto, el valor del 3% anual acumulado por esta regla ser√° m√°s del 3%. <br><br>  <strong>Regla (R2) ACT / 360.</strong>  Esta es la llamada "regla bancaria", seg√∫n la cual, la duraci√≥n en d√≠as se divide por 360. Esta regla aumenta a√∫n m√°s la duraci√≥n anual de las brechas.  Para un a√±o no bisiesto, su duraci√≥n ser√° 365/360 = 1.01389, y para un a√±o bisiesto 366/360 = 1.01667.  Naturalmente, cuanto m√°s largo es el per√≠odo, mayor es el grado de "alargamiento" en a√±os.  Esta regla se usa con mayor frecuencia en los c√°lculos relacionados con el mercado monetario, es decir.  deuda de corto plazo del mercado, como dep√≥sitos en bancos, letras, papeles comerciales, certificados de dep√≥sito, etc. El valor del 3% anual para el a√±o ser√° a√∫n mayor que cuando se usa la regla anterior. <br><br>  En el caso de que se acepte el divisor anual igual a 360 d√≠as, el inter√©s ganado utilizando dicho divisor se llama <strong>ordinario</strong> o <strong>comercial</strong> .  Si el divisor se toma igual a 365 o, como mostrar√© m√°s tarde, 366 d√≠as, el inter√©s se llama exacto. <br><br>  Obviamente, los porcentajes ordinarios son m√°s que exactos. <br><br>  Aunque la primera regla es m√°s precisa que la segunda, ambas no son lo suficientemente precisas. <br><br>  Para eliminar el efecto de los a√±os bisiestos en los resultados, hay otras dos reglas. <br><br>  <strong>Regla (R3) ACT / 365, Jap√≥n.</strong>  El c√°lculo se realiza de la misma manera que para la regla ACT / 365, pero al calcular la duraci√≥n del intervalo (numerador de fracciones), se excluyen las fechas de salto.  El divisor anual permanece sin cambios. <br><br>  De acuerdo con Wiki: <br><blockquote>  En muchos pa√≠ses europeos, hasta el siglo XVIII, el 29 de febrero se consideraba un d√≠a inexistente, una fecha que no tiene un estatus legal.  A menudo, las transacciones no se realizaron ese d√≠a, no se realizaron pagos, no se entregaron en deuda, etc., debido a las dificultades derivadas del aspecto formal de la cuesti√≥n y la soluci√≥n de los casos en los tribunales. </blockquote><br><br>  Otra forma est√° relacionada con el cambio real del divisor. <br><br>  <strong>Regla (R4) ACT / ACT b√°sico.</strong>  Dividimos el per√≠odo deseado en tres partes: <br><br><ul><li>  la primera parte, desde la fecha de inicio hasta el final del a√±o en el que se encuentra la fecha de inicio, </li><li>  la tercera parte: desde el comienzo del a√±o en el que se encuentra la fecha de finalizaci√≥n, hasta la fecha de finalizaci√≥n, </li><li>  la segunda parte: 0 o varios a√±os calendario completos entre la primera y la tercera parte. </li></ul><br>  La duraci√≥n de la primera y tercera parte se obtiene dividiendo el n√∫mero de d√≠as por el divisor anual 365 o 366, dependiendo de si es un a√±o bisiesto.  La duraci√≥n del segundo per√≠odo consiste en un n√∫mero entero de a√±os calendario completos, por definici√≥n, independientemente de si son bisiestos o no.  La duraci√≥n en a√±os de todo el per√≠odo se obtiene sumando las duraciones de tres partes, representadas por tres n√∫meros, de los cuales el segundo es un todo, y el primero y el tercero son fraccionarios. <br><br>  <strong>Regla (R5) ACT / ACT modificaci√≥n "corta", por per√≠odos de menos de un a√±o.</strong>  En este caso, la duraci√≥n en d√≠as se divide por el divisor anual 365 o 366, dependiendo de si hay una fecha el 29 de febrero en el per√≠odo de b√∫squeda.  La peculiaridad de la regla corta ACT / ACT es que si el intervalo no se ajusta al a√±o calendario (sus extremos pertenecen a a√±os vecinos), la aplicaci√≥n de las reglas b√°sicas y cortas dar√° resultados diferentes. <br><br><h4>  Pr√°ctica occidental </h4><br>  En la pr√°ctica occidental, las reglas se describen de manera diferente.  A menudo, las mismas reglas en idioma ruso reciben nombres diferentes y, adem√°s, no uno a la vez. <br><br>  La informaci√≥n se basa adem√°s en [2].  Este es Vicki, verifiqu√© todas las fuentes y utilic√© otra informaci√≥n de Google: en las reglas con un n√∫mero exacto de d√≠as, todo es correcto, pero en las reglas con un n√∫mero aproximado de d√≠as hay otras interpretaciones de las reglas, y a menudo cambian con el tiempo, por lo tanto, para poner las reglas en pr√°ctica, El n√∫mero aproximado de d√≠as que este art√≠culo no es suficiente. <br><br>  <strong>Regla (W1) ISDA real / real.</strong>  Esta regla da el mismo resultado que (R4) "ACT / ACT main", pero est√° formulada de manera diferente: el intervalo se divide en a√±os bisiestos y no bisiestos, independientemente de si est√°n completos o incompletos, adem√°s, la suma de d√≠as cae en a√±os bisiestos, dividido por 365, y la suma de d√≠as en a√±os no bisiestos se divide por 366, se suman los dos n√∫meros. <br><br>  Otros nombres de la regla en la pr√°ctica occidental: Actual / Actual, Act / Act, Actual / 365, Act / 365.  S√≠, el apellido es el mismo que la regla (R1), aunque la esencia de la regla es diferente. <br><br>  <strong>Regla (W2) Actual / 365 Fijo.</strong>  Esta regla repite exactamente la regla (R1) ACT / 365: el n√∫mero de d√≠as se divide por 365. <br><br>  Otros nombres de la regla en la pr√°ctica occidental: Act / 365 Fixed, A / 365 Fixed, A / 365F, ingl√©s. <br><br>  <strong>Regla (W3) Actual / 360.</strong>  Esta regla repite (R2) ACT / 360: el n√∫mero exacto de d√≠as se divide por 360. <br><br>  <strong>Regla (W4) Actual / 364.</strong>  El n√∫mero de d√≠as se divide por 364. No tiene an√°logo en la pr√°ctica de habla rusa. <br><br>  <strong>Regla (W5) Actual / 365L.</strong>  Consiste en dos ajustes: <br><ol><li>  Para pagos anuales.  Si la fecha es el 29 de febrero dentro del per√≠odo, entonces el n√∫mero de d√≠as en el per√≠odo se divide por el divisor anual 366, si no, por 365. En este sentido, coincide con la regla (R5) ACT / ACT "modificaci√≥n breve". </li><li>  Si la frecuencia de los pagos difiere de la anual.  Si la fecha de finalizaci√≥n es un a√±o bisiesto (y no es necesariamente igual al 29 de febrero), entonces el divisor anual es 366, de lo contrario, 365. En la pr√°ctica de habla rusa, no tiene an√°logo. </li></ol><br>  Otro nombre es ISMA-Year. <br><br>  <strong>Regla (W6) AFB real / real.</strong>  Consiste en dos ajustes: <br><ol><li>  El principal para per√≠odos de menos de un a√±o: si la fecha es el 29 de febrero dentro del per√≠odo, entonces el n√∫mero de d√≠as en el per√≠odo se divide por el divisor anual 366, si no, por 365. En este sentido, tambi√©n coincide con la regla R / ACT ACT / ACT "modificaci√≥n corta" . </li><li>  Extendido, por per√≠odos de m√°s de un a√±o: un a√±o entero entero se cuenta desde la fecha de finalizaci√≥n hasta la fecha de inicio.  Para un saldo de menos de un a√±o, se aplica la regla principal.  Se resumen el n√∫mero de a√±os completos y la parte del a√±o seg√∫n la regla b√°sica. <br></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay matices asociados con la cuenta regresiva hace a√±os, si la cuenta regresiva se realiz√≥ el 28 de febrero, y despu√©s de varios a√±os completos, el a√±o result√≥ ser bisiesto. </font><font style="vertical-align: inherit;">En este caso, la fecha hace n a√±os deber√≠a adoptarse el 29 de febrero. </font><font style="vertical-align: inherit;">Agregar√© que la pregunta tambi√©n surge si la cuenta regresiva se realiz√≥ desde el 29 de febrero, y el n√∫mero de a√±os completos no es un m√∫ltiplo de cuatro, y en consecuencia el a√±o anterior no fue bisiesto. </font><font style="vertical-align: inherit;">No entr√© aqu√≠ en detalles. </font><font style="vertical-align: inherit;">Pero puede consultar los enlaces de [2]. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y "guinda del pastel", </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (W7) 1/1. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El n√∫mero de d√≠as se divide por el divisor anual 365.25. </font><font style="vertical-align: inherit;">Utilizado para c√°lculos relacionados con la inflaci√≥n.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recuento de d√≠as estimados </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las reglas enumeradas anteriormente se basaron en la duraci√≥n exacta en d√≠as de per√≠odos calendario. Sin embargo, a veces hay esquemas basados ‚Äã‚Äãen el llamado conteo de d√≠as simplificado o aproximado. La idea de estos esquemas es "igualar" la duraci√≥n de todos los meses a 30 d√≠as. Por lo tanto, el a√±o consistir√° en 12 meses de 30 d√≠as, es decir, Fuera de 360 ‚Äã‚Äãd√≠as. Por lo tanto, el divisor anual (denominador de la fracci√≥n) para estas reglas siempre ser√° 360, y el numerador se calcula de manera especial. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dado que el n√∫mero exacto de d√≠as de un pr√©stamo en la mayor√≠a de los casos, pero por supuesto, no siempre, es m√°s que aproximado (como se puede ver f√°cilmente al determinar el n√∫mero promedio de d√≠as en un mes por un a√±o, que es 30.44), el m√©todo de c√°lculo de intereses con el n√∫mero exacto de d√≠as de un pr√©stamo generalmente proporciona mayor crecimiento que el aproximado. [4]</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La versi√≥n m√°s simple de esta regla, la llamada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regla b√°sica 30/360</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se describe de la siguiente manera (en adelante, la informaci√≥n del libro [1] - Pr√°ctica en ruso): </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regla b√°sica 30/360. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El n√∫mero aproximado de d√≠as entre fechas es</font></font><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 360 * (y2 - y1) + 30 * (m2 - m1) + (d2 - d1), </font></font></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">donde y, m, d - a√±o, mes y d√≠a en la segunda y primera fecha. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta regla apareci√≥ antes de la creaci√≥n de los primeros dispositivos inform√°ticos y ahorr√≥ significativamente el costo de las operaciones inform√°ticas en la pr√°ctica financiera. </font><font style="vertical-align: inherit;">Aunque ahora la necesidad de m√©todos simplificados ha desaparecido, sin embargo, habiendo ganado un punto de apoyo en la pr√°ctica, por tradici√≥n a veces se usan en la actualidad. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La regla se aplica con una indicaci√≥n obligatoria de una modificaci√≥n que indica c√≥mo manejar los √∫ltimos d√≠as de los meses:</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pr√°ctica de habla rusa </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A cargo de [1]. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (R6) 30/360 ISDA. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si d1 = 31, entonces d1 '= 30, de lo contrario d1' = d1. </font><font style="vertical-align: inherit;">Si d2 = 31 y d1 '= 30, entonces d2' = 30, de lo contrario d2 '= d2. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (R7) 30E / 360. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si d1 = 31, entonces d1 '= 30, de lo contrario d1' = d1. </font><font style="vertical-align: inherit;">Si d2 = 31, entonces d2 '= 30, de lo contrario d2' = d2. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta regla es una variante de la regla ISDA 30/360, utilizada principalmente en Europa, de ah√≠ la etiqueta "E" en el nombre de la regla. </font><font style="vertical-align: inherit;">Difiere de la norma ISDA 30/360 solo cuando la segunda fecha es tambi√©n la 31. </font><font style="vertical-align: inherit;">La versi√≥n europea siempre lo convierte en el n√∫mero 30, independientemente de la primera fecha. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (R8) 30/360 PSA. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si d1 = 31 o d1 es el √∫ltimo d√≠a de febrero, entonces d1 '= 30, de lo contrario d1' = d1. </font><font style="vertical-align: inherit;">Si d2 = 31 y d1 '= 30, entonces d2' = 30, de lo contrario d2 '= d2.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La descripci√≥n de la regla 30/360 SIA en [1] es muy probable que sea un error, por lo que no la dar√© aqu√≠. </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pr√°ctica occidental </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dado de acuerdo con [2]. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (W8) 30/360 Base de enlace.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Igual que (R6) 30/360 ISDA. Otro nombre: 30A / 360. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (W9) 30E / 360.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Igual que (R7) 30E / 360. Otros nombres: 30/360 ICMA, 30S / 360, base Eurobond (ISDA 2006), alem√°n especial. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (W10) 30E / 360 ISDA.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si d1 es el √∫ltimo d√≠a del mes, entonces d1 '= 30. Si d2 es el √∫ltimo d√≠a de NO febrero, entonces d2 '= 30. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otros nombres: 30E / 360 ISDA, base Eurobond (ISDA 2000), alem√°n. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regla (W11) 30/360 SIA.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si d1 es el √∫ltimo d√≠a de febrero y d2 es el √∫ltimo d√≠a de febrero, entonces d2 '= 30. Si d1 = 31 o el √∫ltimo d√≠a de febrero, entonces d1 '= 30, de lo contrario d1' = d1. Si d1 '= 30 y d2 = 31, entonces d2' = 30, de lo contrario d2 '= d1.</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las reglas (R4) ACT / ACT, (W1) Actual / Actual ISDA, (W2) Actual / 365 Fixed tambi√©n se llaman "pr√°ctica de ingl√©s". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las reglas (R2) ACT / 360 y (W3) Actual / 360 tambi√©n se denominan "pr√°ctica francesa". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las reglas (R7) 30E / 360, (W9) 30E / 360 y (W10) 30E / 360 ISDA tambi√©n se denominan "pr√°ctica alemana" o "pr√°ctica alemana". </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entonces, teniendo en cuenta el inter√©s exacto y ordinario, as√≠ como el n√∫mero exacto y aproximado de d√≠as para calcular el inter√©s, obtenemos cuatro m√©todos para calcular el inter√©s simple (los nombres de las reglas se indican en la pr√°ctica de habla rusa):</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inter√©s normal con el n√∫mero exacto de d√≠as (ACT / 360 - regla bancaria), </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Porcentajes exactos con el n√∫mero exacto de d√≠as (ACT / 365, ACT / ACT), </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inter√©s normal con un n√∫mero aproximado de d√≠as (30/360), </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Porcentajes exactos con un n√∫mero aproximado de d√≠as. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El primer m√©todo m√°s utilizado se llama regla bancaria, con menos frecuencia el segundo y el tercero, y casi nunca el cuarto [1]. Y [4] dice: "... una opci√≥n de c√°lculo con intereses exactos y un n√∫mero aproximado de d√≠as de pr√©stamo no tiene sentido y no se aplica". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los c√°lculos anteriores de la duraci√≥n aproximada de los per√≠odos en fracciones de un a√±o muestran la no trivialidad y la variedad de las reglas aplicadas. Su aplicaci√≥n (as√≠ como su origen) depende del pa√≠s, moneda, tipo de instrumento financiero, asociaci√≥n profesional, acuerdos. [1] </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONCLUSI√ìN:</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øC√≥mo cuento el 3% en mi caso con los servicios p√∫blicos en Ucrania?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lisis de la pr√°ctica judicial de aplicaci√≥n del art. 625 del C√≥digo Civil de Ucrania dice que el m√©todo (R1) ACT / 365 [3] se usa generalmente, pero esto no est√° claramente formulado. Creo que a√∫n necesita aplicar ACT / ACT (R4), y he aqu√≠ por qu√©: si acumula un 3% por un a√±o bisiesto completo utilizando el m√©todo ACT / 365, entonces el monto de inter√©s ser√° igual a 3.008219%, que es para la deuda (o el tama√±o del cuerpo del pr√©stamo) de 1 mill√≥n de unidades monetarias dar√° un exceso de 82.19 u.m. m√°s del 3%, que est√°n estipulados por la tasa de inter√©s anual estandarizada bajo la Ley. Esto ser√° especialmente importante con la acumulaci√≥n progresiva de intereses. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agradecer√≠a comentarios, especialmente de los empleados del banco. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuentes utilizadas</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1) Bocharov, P.P., Kasimov, Yu.F. Matem√°ticas financieras. Mosc√∫: Gardariki, 2002 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Convenci√≥n de conteo de d√≠as,</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Day_count_convention</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3) An√°lisis de la aplicaci√≥n del art. 625 del C√≥digo Civil de Ucrania en procedimientos civiles, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zib.com.ua/ua/74602-analiz_praktiki_zastosuvannya_st_625_civilnogo_kodeksu_ukrai.html</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4) Chetyrkin E.M. Matem√°tica financiera. Mosc√∫: Caso, 2005 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) Convenciones de recuento de d√≠as y factores de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acumulaci√≥n</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">docs.fincad.com/support/developerfunc/mathref/Daycount.htm</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6) Carta informativa del Tribunal Econ√≥mico Supremo de Ucrania No. 01-06 / 928/2012 de fecha 17.07.2012, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zakon.rada.gov.ua/laws/show/v_928600-12</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Y ahora un peque√±o c√≥digo en la base de datos Oracle: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ hay un paquete que hice para mi caso particular: calcula los costos de inflaci√≥n y el 3% anual para Ucrania.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No hay una funci√≥n agregada en Oracle Database que multiplique los valores de inflaci√≥n. </font><font style="vertical-align: inherit;">Por lo tanto, uso la suma de logaritmos.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texto oculto</font></font></b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_OVERHEAD_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, OVERHEAD_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_AMOUNT_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, DEBT_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PAYMENT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_MONTH <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_RATE <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, SKIP_INFLATION <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>), INF_RATE_ACCUMULATED <span class="hljs-built_in"><span class="hljs-built_in">number</span></span> , INF_COEF_ACCUMULATED <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, INF_AMOUNT_ACCUMULATED <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, INF_AMOUNT_MONTH <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, DEBT_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PAYMENT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_MONTH <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_RATE <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, SKIP_INFLATION <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_PCT_AMOUNT_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, DEBT_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PAYMENT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, PCT_YEAR <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_DAYS <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_PCT_PER_DAY <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_BEGIN_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> , PCT_YEAR_END_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, PCT_YEAR_DAYS_CALC <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_PCT_PER_YEAR <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_AMOUNT_PER_YEAR <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_OVERHEAD_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_OVERHEAD_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_AMOUNT_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_WITH_INF_AMOUNT_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_WITH_INF_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_PCT_AMOUNT_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_WITH_PCT_AMOUNT_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PACKAGE</span></span> CALC_OVERHEADS_P <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> GET_DEBT_WITH_INF (p_debt_date_begin <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_debt_date_end <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_last_collection_date <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DEBT_WITH_INF_LIST_T; function GET_DEBT_WITH_INF_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_INF_AMOUNT_LIST_T; function GET_DEBT_WITH_INF_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T; function GET_DEBT_WITH_PCT_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_PCT_AMOUNT_LIST_T; function GET_DEBT_WITH_PCT_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; / <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PACKAGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span> CALC_OVERHEADS_P <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> GET_DEBT_WITH_INF (p_debt_date_begin <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_debt_date_end <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_last_collection_date <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DEBT_WITH_INF_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> ret_value DEBT_WITH_INF_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> a.ID, a.DEBT_DATE, a.DEBT_AMOUNT, a.PAYMENT_DATE, b.INF_MONTH, c.AVAL <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_RATE <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> DEBTS a <span class="hljs-keyword"><span class="hljs-keyword">cross</span></span> <span class="hljs-keyword"><span class="hljs-keyword">apply</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> add_months (trunc (a.PAYMENT_DATE, <span class="hljs-string"><span class="hljs-string">'month'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">rownum</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> &lt;= months_between (trunc (p_last_collection_date, <span class="hljs-string"><span class="hljs-string">'month'</span></span>), trunc (a.PAYMENT_DATE, <span class="hljs-string"><span class="hljs-string">'month'</span></span>)) + <span class="hljs-number"><span class="hljs-number">1</span></span>) b <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> INFLATION c <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> c.ADATE = b.INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> c.TYP = <span class="hljs-string"><span class="hljs-string">'M'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a.DEBT_DATE <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> p_debt_date_begin <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> p_debt_date_end ) , T2 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE , <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> trunc (PAYMENT_DATE, <span class="hljs-string"><span class="hljs-string">'month'</span></span>) = INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">day</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PAYMENT_DATE) <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> trunc (p_last_collection_date, <span class="hljs-string"><span class="hljs-string">'month'</span></span>) = INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">day</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> p_last_collection_date) <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> SKIP_INFLATION <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_WITH_INF_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T2; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_INF_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_INF_AMOUNT_LIST_T is ret_value DEBT_WITH_INF_AMOUNT_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION , <span class="hljs-keyword"><span class="hljs-keyword">exp</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ln</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> SKIP_INFLATION = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> INF_RATE <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> INF_RATE / <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">over</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">partition</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span> <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unbounded</span></span> <span class="hljs-keyword"><span class="hljs-keyword">preceding</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">current</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>)) * <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_RATE_ACCUMULATED <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> (CALC_OVERHEADS_P.GET_DEBT_WITH_INF (p_debt_date_begin, p_debt_date_end, p_last_collection_date))) , T2 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION, INF_RATE_ACCUMULATED , (INF_RATE_ACCUMULATED - <span class="hljs-number"><span class="hljs-number">100</span></span>) / <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_COEF_ACCUMULATED , <span class="hljs-keyword"><span class="hljs-keyword">round</span></span> (((INF_RATE_ACCUMULATED - <span class="hljs-number"><span class="hljs-number">100</span></span>) / <span class="hljs-number"><span class="hljs-number">100</span></span>) * DEBT_AMOUNT, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_AMOUNT_ACCUMULATED <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_WITH_INF_AMOUNT_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION, INF_RATE_ACCUMULATED, INF_COEF_ACCUMULATED, INF_AMOUNT_ACCUMULATED , INF_AMOUNT_ACCUMULATED - lag (INF_AMOUNT_ACCUMULATED, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">over</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">partition</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> INF_MONTH)) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T2; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_INF_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T is ret_value DEBT_OVERHEAD_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> , DEBT_DATE , <span class="hljs-keyword"><span class="hljs-keyword">round</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">exp</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ln</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> SKIP_INFLATION = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> INF_RATE / <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>))) - <span class="hljs-number"><span class="hljs-number">1</span></span>) * DEBT_AMOUNT, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_AMOUNT <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> (CALC_OVERHEADS_P.GET_DEBT_WITH_INF (p_debt_date_begin, p_debt_date_end, p_last_collection_date)) <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_OVERHEAD_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, INF_AMOUNT) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_PCT_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_PCT_AMOUNT_LIST_T is ret_value DEBT_WITH_PCT_AMOUNT_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> DEBTS a <span class="hljs-keyword"><span class="hljs-keyword">cross</span></span> <span class="hljs-keyword"><span class="hljs-keyword">apply</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">year</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PAYMENT_DATE) + <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> &lt;= <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">year</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> p_last_collection_date) - <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">year</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PAYMENT_DATE) + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> DEBT_DATE <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> p_debt_date_begin <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> p_debt_date_end ) , T2 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, <span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'31.12.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD.MM.YYYY'</span></span>) - <span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'01.01.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD.MM.YYYY'</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_DAYS <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1) , T3 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS , <span class="hljs-number"><span class="hljs-number">0.03</span></span> / PCT_YEAR_DAYS <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_PCT_PER_DAY <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T2) , T4 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS, PCT_YEAR_PCT_PER_DAY , <span class="hljs-keyword"><span class="hljs-keyword">greatest</span></span> (PAYMENT_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'01.01.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD-MM-YYYY'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_BEGIN_DATE , <span class="hljs-keyword"><span class="hljs-keyword">least</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'31.12.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD-MM-YYYY'</span></span>), p_last_collection_date) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_END_DATE <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T3) , T5 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS, PCT_YEAR_PCT_PER_DAY, PCT_YEAR_BEGIN_DATE, PCT_YEAR_END_DATE , PCT_YEAR_END_DATE - PCT_YEAR_BEGIN_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_DAYS_CALC , (PCT_YEAR_END_DATE - PCT_YEAR_BEGIN_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span>) * PCT_YEAR_PCT_PER_DAY <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_PCT_PER_YEAR , <span class="hljs-keyword"><span class="hljs-keyword">round</span></span> ((PCT_YEAR_END_DATE - PCT_YEAR_BEGIN_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span>) * PCT_YEAR_PCT_PER_DAY * DEBT_AMOUNT, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_AMOUNT_PER_YEAR <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T4) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_WITH_PCT_AMOUNT_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS, PCT_YEAR_PCT_PER_DAY, PCT_YEAR_BEGIN_DATE, PCT_YEAR_END_DATE, PCT_YEAR_DAYS_CALC, PCT_YEAR_PCT_PER_YEAR, PCT_AMOUNT_PER_YEAR) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T5; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_PCT_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T is ret_value DEBT_OVERHEAD_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_OVERHEAD_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> (PCT_AMOUNT_PER_YEAR)) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> (CALC_OVERHEADS_P.GET_DEBT_WITH_PCT_AMOUNT (p_debt_date_begin, p_debt_date_end, p_last_collection_date)) <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466401/">https://habr.com/ru/post/466401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../466379/index.html">Ejecute el software "de escritorio" en el microcontrolador</a></li>
<li><a href="../466381/index.html">C√≥mo han cambiado las bombillas LED Era en 2019</a></li>
<li><a href="../466383/index.html">Cryptocurrency Ocean: revisi√≥n de los 50 principales proyectos con CoinMarketCap</a></li>
<li><a href="../466385/index.html">Comprender los corredores de mensajes. Aprendiendo la mec√°nica de la mensajer√≠a a trav√©s de ActiveMQ y Kafka. Capitulo 1</a></li>
<li><a href="../466397/index.html">Reprogramamos el cajero e imprimimos en √©l Keanu Reeves. Parte 2. Software para PC</a></li>
<li><a href="../466403/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 35. Protocolo de enlace din√°mico DTP</a></li>
<li><a href="../466405/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 36. Protocolo de canal STP</a></li>
<li><a href="../466407/index.html">Cultura de reclutamiento en grandes empresas de estad√≠sticas de Glassdoor</a></li>
<li><a href="../466409/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 37. STP: selecci√≥n de puente ra√≠z, caracter√≠sticas de protecci√≥n PortFast y BPDU. Parte 1</a></li>
<li><a href="../466413/index.html">Intercambio de sitios para Bitrix y 1C: resolviendo los principales problemas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>