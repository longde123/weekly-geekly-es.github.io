<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥖 🆖 🔴 Buku "Linux beraksi" 📋 👨‍👧 👲🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai, habrozhiteli! Dalam buku itu, David Clinton menjelaskan 12 proyek dunia nyata, termasuk mengotomatiskan sistem cadangan dan pemulihan, menyiapkan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Buku "Linux beraksi"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/461879/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/d4/en/xh/d4enxhes8pqnlk78urqxopa7ley.jpeg" align="left" alt="gambar"></a>  Hai, habrozhiteli!  Dalam buku itu, David Clinton menjelaskan 12 proyek dunia nyata, termasuk mengotomatiskan sistem cadangan dan pemulihan, menyiapkan cloud file bergaya Dropbox pribadi, dan membuat server MediaWiki Anda sendiri.  Dengan contoh-contoh menarik, Anda akan belajar tentang virtualisasi, pemulihan bencana, keamanan, cadangan, penerapan DevOps, dan pemecahan masalah sistem.  Setiap bab diakhiri dengan ulasan rekomendasi praktis, daftar istilah baru, dan latihan. <br><br><h3>  Kutipan "10.1.  Membuat OpenVPN Tunnel » </h3><br><a name="habracut"></a>  Dalam buku ini, saya sudah banyak berbicara tentang enkripsi.  SSH dan SCP dapat melindungi data yang dikirimkan melalui koneksi jarak jauh (bab 3), enkripsi file memungkinkan Anda untuk melindungi data saat disimpan di server (bab 8), dan sertifikat TLS / SSL dapat melindungi data selama transmisi antara situs dan browser klien (bab 9).  Tetapi terkadang data Anda membutuhkan perlindungan dalam jangkauan koneksi yang lebih luas.  Misalnya, ada kemungkinan beberapa anggota tim Anda harus bekerja di jalan, menghubungkan ke jaringan melalui Wi-Fi melalui titik akses publik.  Anda seharusnya tidak berasumsi bahwa semua titik akses tersebut aman, tetapi orang-orang Anda benar-benar membutuhkan cara untuk terhubung ke sumber daya perusahaan - dalam hal ini VPN akan membantu. <br><br>  Terowongan VPN yang dirancang dengan baik menyediakan koneksi langsung antara klien jarak jauh dan server sedemikian rupa untuk menyembunyikan data saat ditransmisikan melalui jaringan yang tidak aman.  Jadi apa  Anda telah melihat banyak alat yang dapat melakukan ini dengan enkripsi.  Nilai sebenarnya dari VPN adalah bahwa dengan membuka terowongan, Anda dapat menghubungkan jaringan jarak jauh, seolah-olah semuanya bersama-sama lokal.  Dalam arti tertentu, Anda menggunakan solusi. <br><br>  Dengan menggunakan jaringan luas seperti itu, administrator dapat melakukan tugasnya di server mereka dari mana saja.  Tetapi, yang lebih penting, perusahaan dengan sumber daya yang didistribusikan di beberapa cabang dapat membuat semuanya terlihat dan dapat diakses oleh semua kelompok yang membutuhkannya, di mana pun mereka berada (Gbr. 10.1). <br><br>  Terowongan itu sendiri tidak menjamin keamanan.  Tetapi salah satu standar enkripsi dapat dimasukkan dalam struktur jaringan, yang secara signifikan meningkatkan tingkat keamanan.  Terowongan yang dibuat menggunakan paket open source OpenVPN menggunakan enkripsi TLS / SSL yang sama yang sudah Anda baca.  OpenVPN bukan satu-satunya pilihan yang tersedia untuk tunneling, tetapi salah satu yang paling terkenal.  Ia diyakini sedikit lebih cepat dan lebih aman daripada protokol tunneling layer 2 alternatif yang menggunakan enkripsi IPsec. <br><br>  Apakah Anda ingin semua orang di tim Anda berkomunikasi dengan aman satu sama lain saat berada di jalan atau bekerja di gedung yang berbeda?  Untuk melakukan ini, Anda harus membuat server OpenVPN untuk memungkinkan berbagi aplikasi dan akses ke lingkungan jaringan lokal server.  Agar ini berfungsi, cukup untuk memulai dua mesin virtual atau dua wadah: satu untuk bertindak sebagai server / host, dan yang lainnya untuk klien.  Membuat VPN bukanlah proses yang mudah, jadi mungkin perlu beberapa menit untuk mendapatkan gambaran besarnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vg/gc/o1/vggco1j4npzsjj4rqo8r-5bzmz8.png" alt="gambar"></div><br><h3>  10.1.1.  Mengkonfigurasi Server OpenVPN </h3><br>  Sebelum Anda mulai, saya akan memberi Anda nasihat yang bermanfaat.  Jika Anda akan melakukan semuanya sendiri (dan saya sangat merekomendasikannya kepada Anda), Anda mungkin akan menemukan bahwa Anda bekerja dengan beberapa jendela terminal yang terbuka di Desktop, yang masing-masing terhubung ke mesinnya.  Ada risiko bahwa pada titik tertentu Anda akan memasukkan perintah yang salah di jendela.  Untuk menghindari ini, Anda dapat menggunakan perintah hostname untuk mengubah nama mesin yang ditampilkan pada baris perintah menjadi sesuatu yang dengan jelas akan memberi tahu Anda di mana Anda berada.  Segera setelah Anda melakukan ini, Anda harus keluar dari server dan masuk lagi agar pengaturan baru berlaku.  Begini tampilannya: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/d9/o9/b8d9o9pzt2-m5-rtirtr46hl1lu.png" alt="gambar"></div><br>  Mengikuti pendekatan ini dan menetapkan nama yang sesuai untuk setiap mesin yang bekerja dengan Anda, Anda dapat dengan mudah melacak di mana Anda berada. <br><br><blockquote>  Setelah menggunakan nama host, Anda mungkin menjumpai pesan Server OpenVPN-Server yang menjengkelkan tidak dapat diselesaikan ketika Anda menjalankan perintah berikut.  Memperbarui file / etc / hosts dengan nama host baru yang sesuai harus memperbaiki masalah. </blockquote><br><h3>  Mempersiapkan Server Anda untuk OpenVPN </h3><br>  Menginstal OpenVPN di server Anda memerlukan dua paket: openvpn dan easy-rsa (untuk mengontrol proses menghasilkan kunci enkripsi).  Jika perlu, pengguna CentOS terlebih dahulu harus menginstal repositori epel-release, seperti yang Anda lakukan di bab 2. Untuk dapat memeriksa akses ke aplikasi server, Anda juga dapat menginstal server web Apache (apache2 untuk Ubuntu dan httpd pada CentOS). <br><br>  Saat Anda menyiapkan server, saya menyarankan Anda untuk mengaktifkan firewall yang memblokir semua port kecuali 22 (SSH) dan 1194 (port OpenVPN default).  Contoh ini menggambarkan bagaimana ufw akan bekerja di Ubuntu, tapi saya yakin Anda masih ingat program firewall CentOS dari bab 9: <br><br><pre><code class="javascript hljs"># ufw enable # ufw allow <span class="hljs-number"><span class="hljs-number">22</span></span> # ufw allow <span class="hljs-number"><span class="hljs-number">1194</span></span></code> </pre> <br>  Untuk memungkinkan perutean internal antar antarmuka jaringan pada server, Anda perlu menghapus komentar satu baris (net.ipv4.ip_forward = 1) dalam file /etc/sysctl.conf.  Ini akan memungkinkan Anda untuk mengarahkan klien jarak jauh sesuai kebutuhan setelah mereka terhubung.  Untuk membuat parameter baru berfungsi, jalankan sysctl -p: <br><br><pre> <code class="javascript hljs"># nano /etc/sysctl.conf # sysctl -p</code> </pre> <br>  Sekarang lingkungan server sudah sepenuhnya dikonfigurasi, tetapi ada hal lain yang harus dilakukan sebelum Anda siap: Anda harus menyelesaikan langkah-langkah berikut (kami akan mempertimbangkannya secara lebih rinci di bawah). <br><br><ol><li>  Buat set kunci pada server untuk mengenkripsi infrastruktur kunci publik (PKI) menggunakan skrip yang datang dengan paket easy-rsa.  Pada dasarnya, server OpenVPN juga bertindak sebagai otoritas sertifikasi sendiri (CA). </li><li>  Siapkan kunci yang sesuai untuk klien </li><li>  Konfigurasikan file server.conf untuk server </li><li>  Konfigurasikan klien OpenVPN Anda </li><li>  Periksa VPN Anda </li></ol><br><h3>  Pembuatan Kunci Enkripsi </h3><br>  Agar tidak menyulitkan hidup Anda, Anda dapat mengonfigurasi infrastruktur utama Anda pada mesin yang sama di mana server OpenVPN berjalan.  Namun, rekomendasi keamanan biasanya menyarankan menggunakan server CA terpisah untuk penyebaran di lingkungan produksi.  Proses menghasilkan dan mengalokasikan sumber daya kunci enkripsi untuk digunakan dalam OpenVPN diilustrasikan pada Gambar.  10.2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rw/vl/a0/rwvla0o86yzylrzsytcf--7bnms.png" alt="gambar"></div><br>  Ketika Anda menginstal OpenVPN, direktori / etc / openvpn / secara otomatis dibuat, tetapi belum ada apa-apa di dalamnya.  Paket openvpn dan easy-rsa datang dengan file contoh template yang dapat Anda gunakan sebagai dasar untuk konfigurasi Anda.  Untuk memulai proses sertifikasi, salin direktori templat easy-rsa dari / usr / share / ke / etc / openvpn dan ubah ke direktori easy-rsa /: <br><br><pre> <code class="javascript hljs"># cp -r /usr/share/easy-rsa/ <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>openvpn $ cd /etc/openvpn/easy-rsa</code> </pre> <br>  Direktori easy-rsa sekarang akan berisi beberapa skrip.  Di atas meja.  10.1 daftar alat yang akan Anda gunakan untuk membuat kunci. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ih/zx/zt/ihzxztprk0hm0gr9ozc8sz9qsgs.png" alt="gambar"></div><br><blockquote>  Operasi ini membutuhkan hak akses root, jadi melalui sudo su Anda harus menjadi root. </blockquote><br>  File pertama yang akan Anda gunakan disebut vars dan berisi variabel lingkungan yang mudah digunakan saat membuat kunci.  Anda perlu mengedit file untuk menggunakan nilai Anda sendiri alih-alih nilai default yang sudah ada.  Seperti inilah tampilan file saya (Listing 10.1). <br><br>  Listing 10.1.  Fragmen utama dari file / etc / openvpn / easy-rsa / vars <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_COUNTRY=<span class="hljs-string"><span class="hljs-string">"CA"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_PROVINCE=<span class="hljs-string"><span class="hljs-string">"ON"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_CITY=<span class="hljs-string"><span class="hljs-string">"Toronto"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_ORG=<span class="hljs-string"><span class="hljs-string">"Bootstrap IT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_EMAIL=<span class="hljs-string"><span class="hljs-string">"info@bootstrap-it.com"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_OU=<span class="hljs-string"><span class="hljs-string">"IT"</span></span></code> </pre> <br>  Menjalankan file vars akan memungkinkan Anda untuk mentransfer nilainya ke lingkungan shell, dari mana mereka akan dimasukkan dalam konten kunci baru Anda.  Mengapa perintah sudo saja tidak berfungsi?  Karena pada tahap pertama, kami mengedit skrip yang disebut vars, dan kemudian menerapkannya.  Aplikasi dan berarti bahwa file vars mentransfer nilainya ke lingkungan shell, dari mana mereka akan dimasukkan dalam konten kunci baru Anda. <br><br>  Pastikan untuk menjalankan kembali file menggunakan shell baru untuk menyelesaikan proses yang belum selesai.  Ketika ini selesai, skrip akan meminta Anda untuk menjalankan skrip lain, clean-all, untuk menghapus konten apa pun di direktori / etc / openvpn / easy-rsa / keys /: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2v/b4/ot/2vb4otncxyedhork8j0cs29s_64.png" alt="gambar"></div><br>  Secara alami, langkah selanjutnya adalah menjalankan skrip clean-all, diikuti oleh build-ca, yang menggunakan skrip pkitool untuk membuat sertifikat root.  Anda akan diminta untuk mengonfirmasi pengaturan otentikasi yang disediakan oleh vars: <br><br><pre> <code class="javascript hljs"># ./clean-all # ./build-ca Generating a <span class="hljs-number"><span class="hljs-number">2048</span></span> bit RSA private key</code> </pre> <br>  Selanjutnya adalah skrip build-key-server.  Karena ia menggunakan skrip pkitool yang sama bersama dengan sertifikat root baru, Anda akan melihat pertanyaan yang sama untuk mengonfirmasi pembuatan pasangan kunci.  Kunci akan diberikan nama berdasarkan argumen yang Anda berikan, yang, kecuali jika Anda memulai beberapa VPN di komputer ini, biasanya akan menjadi server, seperti dalam contoh: <br><br><pre> <code class="javascript hljs"># ./build-key-server server [...] Certificate is to be certified until Aug <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">2027</span></span> GMT (<span class="hljs-number"><span class="hljs-number">3650</span></span> days) Sign the certificate? [y/n]:y <span class="hljs-number"><span class="hljs-number">1</span></span> out <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> certificate requests certified, commit? [y/n]y Write out database <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> entries Data Base Updated</code> </pre> <br>  OpenVPN menggunakan parameter yang dihasilkan oleh algoritma Diffie-Hellman (menggunakan build-dh) untuk menegosiasikan otentikasi untuk koneksi baru.  File yang dibuat di sini tidak boleh rahasia, tetapi harus dibuat menggunakan skrip build-dh untuk kunci RSA yang saat ini aktif.  Jika Anda membuat kunci RSA baru di masa mendatang, Anda juga perlu memperbarui file berdasarkan algoritma Diffie-Hellman: <br><br><pre> <code class="javascript hljs"># ./build-dh</code> </pre> <br>  Kunci sisi server Anda sekarang akan berada di direktori / etc / openvpn / easy-rsa / keys /, tetapi OpenVPN tidak mengetahui hal ini.  Secara default, OpenVPN akan mencari kunci di / etc / openvpn /, jadi salin: <br><br><pre> <code class="javascript hljs"># cp /etc/openvpn/easy-rsa/keys/server* <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>openvpn # cp /etc/openvpn/easy-rsa/keys/dh2048.pem /etc/openvpn # cp /etc/openvpn/easy-rsa/keys/ca.crt /etc/openvpn</code> </pre> <br><h3>  Mempersiapkan kunci enkripsi klien </h3><br>  Seperti yang telah Anda lihat, enkripsi TLS menggunakan pasangan kunci yang sesuai: satu diinstal pada server, dan lainnya pada klien jarak jauh.  Ini berarti bahwa Anda akan memerlukan kunci klien.  Pkitool teman lama kami adalah persis apa yang Anda butuhkan untuk ini.  Dalam contoh ini, menjalankan program di direktori / etc / openvpn / easy-rsa /, kami meneruskan argumen klien untuk menghasilkan file yang disebut client.crt dan client.key: <br><br><pre> <code class="javascript hljs"># ./pkitool client</code> </pre> <br>  Dua file klien, bersama dengan file ca.crt asli, yang masih dalam direktori kunci /, sekarang harus ditransfer dengan aman ke klien Anda.  Karena afiliasi dan hak akses mereka, ini mungkin tidak mudah.  Pendekatan termudah adalah menyalin konten file sumber secara manual (dan tidak lain dari konten ini) ke terminal yang berjalan di desktop PC Anda (pilih teks, klik kanan padanya dan pilih Salin dari menu).  Kemudian rekatkan ini ke file baru dengan nama yang sama yang Anda buat di terminal kedua yang terhubung ke klien Anda. <br><br>  Tapi siapa pun bisa memotong dan menempel.  Sebaliknya, pikirkan sebagai administrator, karena Anda tidak akan selalu memiliki akses ke GUI, di mana operasi cut / paste mungkin.  Salin file ke direktori home pengguna Anda (sehingga operasi scp jarak jauh dapat mengaksesnya), dan kemudian gunakan chown untuk mengubah pemilik file dari root ke pengguna non-root biasa sehingga tindakan scp jauh dapat dilakukan.  Pastikan semua file Anda saat ini diinstal dan dapat diakses.  Anda akan memindahkannya ke klien sedikit kemudian: <br><br><pre> <code class="javascript hljs"># cp /etc/openvpn/easy-rsa/keys/client.key /home/ubuntu/ # cp /etc/openvpn/easy-rsa/keys/ca.crt /home/ubuntu/ # cp /etc/openvpn/easy-rsa/keys/client.crt /home/ubuntu/ # chown ubuntu:ubuntu /home/ubuntu/client.key # chown ubuntu:ubuntu /home/ubuntu/client.crt # chown ubuntu:ubuntu /home/ubuntu/ca.crt</code> </pre> <br>  Dengan satu set kunci enkripsi lengkap yang siap beraksi, Anda perlu memberi tahu server bagaimana Anda ingin membuat VPN.  Ini dilakukan menggunakan file server.conf. <br><br><blockquote>  <b>Kurangi jumlah penekanan tombol</b> <br><br>  Terlalu banyak untuk dicetak?  Ekstensi dengan tanda kurung akan membantu mengurangi enam perintah ini menjadi dua.  Saya yakin Anda dapat mempelajari dua contoh ini dan memahami apa yang terjadi.  Lebih penting lagi, Anda dapat memahami bagaimana menerapkan prinsip-prinsip ini pada operasi yang melibatkan puluhan atau bahkan ratusan elemen: <br><br><pre> <code class="javascript hljs"># cp /etc/openvpn/easy-rsa/keys/{ca.crt,client.{key,crt}} /home/ubuntu/ # chown ubuntu:ubuntu /home/ubuntu/{ca.crt,client.{key,crt}}</code> </pre> <br></blockquote><br><h3>  Menyiapkan file server.conf </h3><br>  Bagaimana Anda bisa tahu seperti apa file server.conf?  Ingat templat direktori rsa mudah yang Anda salin dari / usr / share /?  Selama instalasi OpenVPN, file template konfigurasi terkompresi tetap, yang dapat Anda salin ke / etc / openvpn /.  Saya akan membangun fakta bahwa templat telah diarsipkan dan memperkenalkan Anda ke alat yang berguna: zcat. <br><br>  Anda sudah tahu tentang menampilkan isi teks dari suatu file menggunakan perintah cat, tetapi bagaimana jika file tersebut dikompres menggunakan gzip?  Anda selalu dapat membuka zip file, dan kemudian cat akan dengan senang hati menampilkannya, tetapi ini satu atau dua langkah lebih dari yang diperlukan.  Sebagai gantinya, karena Anda mungkin sudah menebak, Anda dapat memasukkan perintah zcat untuk memuat teks yang belum dibongkar ke dalam memori dalam satu langkah.  Dalam contoh berikut, alih-alih mencetak teks di layar, Anda mengarahkannya ke file baru bernama server.conf: <br><br><pre> <code class="javascript hljs"># zcat \ /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz \ &gt; <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>openvpn/server.conf $ cd /etc/openvpn</code> </pre> <br>  Kami mengesampingkan dokumentasi yang luas dan berguna yang menyertai file dan melihat bagaimana kelihatannya ketika Anda selesai mengedit.  Perhatikan bahwa titik koma (;) memberi tahu OpenVPN untuk tidak membaca atau mengeksekusi baris berikutnya (Listing 10.2). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ft/en/4r/ften4rayxj99stxecmfjb9mx8eg.png" alt="gambar"></div><br>  Mari kita pergi melalui beberapa pengaturan ini. <br><br><ul><li>  Secara default, OpenVPN berfungsi melalui port 1194. Anda dapat mengubah ini, misalnya, untuk menyembunyikan tindakan Anda lebih banyak atau untuk menghindari konflik dengan terowongan aktif lainnya.  Karena 1194 membutuhkan koordinasi minimal dengan pelanggan, ini paling baik dilakukan. </li><li>  OpenVPN menggunakan baik Transmission Control Protocol (TCP) atau User Datagram Protocol (UDP) untuk transfer data.  TCP mungkin sedikit lebih lambat, tetapi lebih dapat diandalkan dan lebih mungkin dipahami oleh aplikasi yang berjalan di kedua ujung terowongan. </li><li>  Anda dapat memberitahu dev tun ketika Anda ingin membuat terowongan IP yang lebih sederhana dan lebih efisien yang mentransmisikan isi data dan tidak lebih.  Jika, di sisi lain, Anda perlu menghubungkan beberapa antarmuka jaringan (dan jaringan yang mereka wakili) dengan membuat jembatan Ethernet, Anda harus memilih dev tap.  Jika Anda tidak mengerti apa artinya semua ini, gunakan argumen tun. </li><li>  Empat baris berikutnya meneruskan nama OpenVPN dari tiga file otentikasi pada server dan file pengaturan dh2048 yang Anda buat sebelumnya. </li><li>  Baris server menetapkan rentang dan subnet mask yang akan digunakan untuk menetapkan alamat IP kepada klien saat login. </li><li>  Parameter push opsional "route 10.0.3.0 255.255.255.0" memungkinkan klien jarak jauh untuk mengakses subnet pribadi di belakang server.  Untuk melakukan pekerjaan ini, Anda juga perlu mengkonfigurasi jaringan di server itu sendiri, sehingga subnet pribadi tahu tentang subnet OpenVPN (10.8.0.0). </li><li>  Port-share localhost 80 line memungkinkan Anda untuk mengarahkan lalu lintas klien yang datang melalui port 1194 ke server web lokal mendengarkan pada port 80. (Ini akan berguna jika Anda bermaksud menggunakan server web untuk menguji VPN Anda.) Ini hanya berfungsi jika ketika protokol tcp dipilih. </li><li>  Pengguna yang tidak ada dan garis grup nogroup pengguna harus aktif - untuk melakukan ini, hapus tanda titik koma (;).  Memaksa klien jarak jauh untuk bekerja di bawah tidak ada orang dan nogroup memastikan bahwa sesi di server tidak terjangkau. </li><li>  log menunjukkan bahwa entri log saat ini akan menimpa entri lama setiap kali OpenVPN dimulai, sementara log-tambahkan menambahkan entri baru ke file log yang ada.  File openvpn.log sendiri ditulis ke direktori / etc / openvpn /. </li></ul><br>  Selain itu, nilai klien-ke-klien juga sering ditambahkan ke file konfigurasi sehingga beberapa klien dapat saling melihat di samping server OpenVPN.  Jika Anda puas dengan konfigurasi Anda, maka Anda dapat memulai server OpenVPN: <br><br><pre> <code class="javascript hljs"># systemctl start openvpn</code> </pre> <br><blockquote>  Karena sifat hubungan yang berubah antara OpenVPN dan systemd, sintaks berikut kadang-kadang diperlukan untuk memulai layanan: systemctl mulai openvpn @ server. </blockquote><br>  Menjalankan ip addr untuk menampilkan daftar antarmuka jaringan server Anda sekarang seharusnya menampilkan tautan ke antarmuka baru bernama tun0.  OpenVPN akan membuatnya untuk melayani klien yang masuk: <br><br><pre> <code class="javascript hljs">$ ip addr [...] <span class="hljs-number"><span class="hljs-number">4</span></span>: tun0: mtu <span class="hljs-number"><span class="hljs-number">1500</span></span> qdisc [...] link/none inet <span class="hljs-number"><span class="hljs-number">10.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> peer <span class="hljs-number"><span class="hljs-number">10.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> scope global tun0 valid_lft forever preferred_lft forever</code> </pre> <br>  Anda mungkin perlu me-restart server sebelum semuanya mulai berfungsi sepenuhnya.  Perhentian berikutnya adalah komputer klien. <br><br><h3>  10.1.2.  Konfigurasi Klien OpenVPN </h3><br>  Secara tradisional, terowongan dibangun dengan setidaknya dua jalan keluar (jika tidak kita akan menyebutnya gua).  OpenVPN yang dikonfigurasi dengan benar di server mengarahkan lalu lintas ke dan dari terowongan di satu sisi.  Tetapi Anda juga memerlukan beberapa jenis perangkat lunak sisi klien, yaitu di ujung lain dari terowongan. <br><br>  Pada bagian ini, saya akan fokus pada pengaturan secara manual komputer Linux dari satu jenis atau lainnya untuk bekerja sebagai klien OpenVPN.  Tapi ini bukan satu-satunya cara kesempatan ini tersedia.  OpenVPN mendukung aplikasi klien yang dapat diinstal dan digunakan pada komputer desktop dan laptop dengan Windows atau macOS, serta pada ponsel cerdas dan tablet berbasis Android dan iOS.  Lihat openvpn.net untuk detailnya. <br><br>  Paket OpenVPN perlu diinstal pada komputer klien, seperti yang diinstal pada server, meskipun tidak perlu untuk rsa mudah, karena kunci yang Anda gunakan sudah ada.  Anda perlu menyalin file templat client.conf ke direktori / etc / openvpn / yang baru saja Anda buat.  Kali ini file tidak akan diarsipkan, jadi perintah cp biasa akan melakukan tugas ini dengan sempurna: <br><br><pre> <code class="javascript hljs"># apt install openvpn # cp /usr/share/doc/openvpn/examples/sample-config-files/client.conf \ /etc/openvpn/</code> </pre> <br>  Sebagian besar pengaturan dalam file client.conf Anda akan sangat mudah: mereka harus cocok dengan nilai-nilai di server.  Seperti yang Anda lihat dari contoh file berikut, parameter uniknya adalah remote 192.168.1.23 1194, yang memberi tahu klien alamat IP server.  Sekali lagi, pastikan ini adalah alamat server Anda.  Anda juga harus memaksa komputer klien untuk mengotentikasi sertifikat server untuk mencegah kemungkinan serangan man-in-the-middle.  Salah satu cara untuk melakukan ini adalah menambahkan server remote-cert-tls baris (Listing 10.3). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m1/nw/2w/m1nw2wwrhwag7fct4mr4ggng5n4.png" alt="gambar"></div><br>  Sekarang Anda dapat pergi ke direktori / etc / openvpn / dan mengekstrak kunci sertifikasi dari server.  Ganti alamat IP server atau nama domain dalam contoh dengan nilai-nilai Anda: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ng/u1/rm/ngu1rmk8tyxrntuepummte1wxuo.png" alt="gambar"></div><br>  Tidak ada yang menarik yang mungkin terjadi sampai Anda menjalankan OpenVPN pada klien.  Karena Anda harus melewati beberapa argumen, Anda akan melakukan ini dari baris perintah.  Argumen --tls-client memberi tahu OpenVPN bahwa Anda akan bertindak sebagai klien dan terhubung menggunakan enkripsi TLS, dan --config menunjuk ke file konfigurasi Anda: <br><br><pre> <code class="javascript hljs"># openvpn --tls-client --config /etc/openvpn/client.conf</code> </pre> <br>  Baca output dari perintah dengan hati-hati untuk memastikan Anda terhubung dengan benar.  Jika untuk pertama kalinya terjadi kesalahan, ini mungkin disebabkan oleh ketidakcocokan antara pengaturan antara server dan file konfigurasi klien atau masalah koneksi jaringan / firewall.  Berikut ini beberapa kiat pemecahan masalah. <br><br><ul><li>  Baca dengan cermat keluaran operasi OpenVPN pada klien.  Seringkali berisi nasihat berharga tentang apa yang sebenarnya tidak dapat dilakukan dan mengapa. </li><li>  Periksa pesan kesalahan di file openvpn.log dan openvpn-status.log di direktori / etc / openvpn / di server. </li><li>  Periksa pesan yang terkait dengan OpenVPN dan waktu yang sesuai dalam log sistem di server dan klien.  (jurnalct -ce akan menampilkan entri terbaru.) </li><li>  Pastikan Anda memiliki koneksi jaringan aktif antara server dan klien (untuk detail lebih lanjut, lihat bab 14). </li></ul><br><h3>  Tentang penulis </h3><br>  <b>David Clinton</b> adalah administrator sistem, guru, dan penulis.  Dia mengelola, menulis tentang hal itu dan menciptakan materi pelatihan untuk banyak disiplin ilmu teknis yang penting, termasuk sistem Linux, komputasi awan (khususnya AWS) dan teknologi wadah seperti Docker.  Dia menulis buku Learn Amazon Web Services dalam Sebulan Makan Siang (Manning, 2017).  Banyak tutorial videonya dapat ditemukan di Pluralsight.com, dan tautan ke buku-bukunya yang lain (tentang administrasi Linux dan virtualisasi server) tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bootstrap-it.com</a> . <br><br>  »Informasi lebih lanjut tentang buku ini dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web penerbit</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Isi</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kutipan</a> <br><br>  Kupon diskon 25% untuk penjaja - <b>Linux</b> <br>  Setelah pembayaran versi kertas buku, sebuah buku elektronik dikirim melalui email. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461879/">https://habr.com/ru/post/id461879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461867/index.html">Cara mengenali gambar dan teks pada ponsel Anda menggunakan ML Kit</a></li>
<li><a href="../id461871/index.html">101 tips untuk menjadi programmer yang baik (dan manusia)</a></li>
<li><a href="../id461873/index.html">ViewPager 2 - fungsionalitas baru di bungkus lama</a></li>
<li><a href="../id461875/index.html">5 nm vs 3 nm</a></li>
<li><a href="../id461877/index.html">Java vs Kotlin untuk Android: pendapat pengembang</a></li>
<li><a href="../id461881/index.html">Panduan Pencatatan Node.js</a></li>
<li><a href="../id461885/index.html">EDS adalah jenis penipuan lainnya</a></li>
<li><a href="../id461887/index.html">Memasuki Aeronet Episode 2: Dring Homing</a></li>
<li><a href="../id461891/index.html">Bagaimana kami berteman di infrastruktur bank menggunakan ManageIQ</a></li>
<li><a href="../id461895/index.html">Learn While Travel - bagaimana kami melaju pada Hari Analisis Bisnis Eropa pertama</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>