<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ˜ ğŸš„ ğŸµ Tri du drapeau amÃ©ricain ğŸ’• ğŸ‘‡ğŸ½ ğŸ§ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour comprendre le principe de fonctionnement de ce tri Â«multibandeÂ», il est plus simple de commencer avec l'exemple d'un drapeau Ã  trois bandes. Et a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tri du drapeau amÃ©ricain</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/481304/"><div style="text-align:center;"><img width="690" height="410" src="https://habrastorage.org/webt/3c/qf/bc/3cqfbc2j6t1knu0g3onxuvrgve8.png"></div><br>  Pour comprendre le principe de fonctionnement de ce tri Â«multibandeÂ», il est plus simple de commencer avec l'exemple d'un drapeau Ã  trois bandes.  Et afin de gÃ©rer facilement le drapeau tricolore, il est prÃ©fÃ©rable de voir d'abord comment cela fonctionne avec l'exemple bicolore.  <s>Et pour faire face aux deux couleurs ...</s> <a name="habracut"></a><blockquote> <a href="https://www.edsd.ru/" title="Logiciel EDISON - dÃ©veloppement web"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="Logiciel EDISON - dÃ©veloppement web"></a> <br clear="right">  Cet article a Ã©tÃ© Ã©crit avec le soutien d'EDISON. <br><br>  Nous sommes engagÃ©s dans le <a href="https://www.edsd.ru/ru/uslugi/portirovanie-i-migracija">portage et la migration de logiciels</a> , ainsi que dans le <a href="https://www.edsd.ru/ru/proekty/mobilnye_prilozhenija">dÃ©veloppement d'applications mobiles Android et iOS</a> . <br><br>  Nous aimons la thÃ©orie des algorithmes!  ;-) </blockquote><h2>  Drapeau bicolore </h2><br><img align="left" width="210" height="140" src="https://habrastorage.org/webt/rw/ya/rz/rwyarz78jggve0idacvf3k6jxs0.png"><br clear="right">  Tout d'abord, considÃ©rons le cas oÃ¹ les nombres dans le tableau triÃ© sont distribuÃ©s en seulement deux bits.  Pour simplifier, nous supposons que nous avons un tableau de zÃ©ros (ordre faible) et de uns (ordre Ã©levÃ©). <br><br>  Ainsi, nous n'avons que deux Â«bandesÂ»: dans l'une nous dÃ©placerons les bits les moins significatifs (zÃ©ros), et dans l'autre les bits les plus Ã©levÃ©s (unitÃ©s).  Tout drapeau bicolore fera l'objet d'une dÃ©monstration.  Par exemple, le drapeau de l'Ukraine. <br><br><img width="740" height="94" src="https://habrastorage.org/webt/av/g1/6q/avg16qxef8rxv9etteutswrkrke.gif"><br><br>  Que se passe-t-il ici?  Puisqu'au premier stade, on ne sait pas combien de zÃ©ros et combien d'unitÃ©s nous avons, il n'est donc pas clair dans quelles tailles chacune des Â«bandesÂ» se retrouvera.  Par consÃ©quent, nous mettons deux pointeurs sur les clÃ©s du tableau.  Pour l'ordre infÃ©rieur, le pointeur est placÃ© au dÃ©but du tableau, pour l'ordre Ã©levÃ© Ã  la fin.  Ensuite, nous faisons un seul passage Ã  travers le tableau de gauche Ã  droite et regardons chaque Ã©lÃ©ment de bit. <br><br>  Si pendant le passage un Ã©lÃ©ment est Ã©gal Ã  l'ordre le plus Ã©levÃ©, alors le deuxiÃ¨me pointeur nous indique oÃ¹ transfÃ©rer cet Ã©lÃ©ment (on fait un Ã©change).  Le pointeur pour insÃ©rer l'Ã©lÃ©ment suivant se dÃ©place vers la gauche, la "bande" du chiffre supÃ©rieur s'est dÃ©veloppÃ©e. <br><br>  S'il est Ã©gal au chiffre le moins significatif, nous dÃ©plaÃ§ons le pointeur correspondant d'un Ã©lÃ©ment vers la droite.  Comme nous n'avons que deux chiffres, il n'est pas nÃ©cessaire de transfÃ©rer l'Ã©lÃ©ment, il est dÃ©jÃ  Ã  sa place.  La Â«bandeÂ» pour la catÃ©gorie plus jeune s'est naturellement Ã©largie. <br><br>  En consÃ©quence, deux pointeurs se dÃ©plaÃ§ant l'un vers l'autre entreront en collision en un point, et les dÃ©charges seront ordonnÃ©es dans leurs Â«bandesÂ».  Dans le mÃªme temps, vous n'aurez pas besoin de traverser l'ensemble du tableau - lorsque les pointeurs se rencontrent quelque part au milieu, l'algorithme fera son travail. <br><br><h2>  Le problÃ¨me du drapeau national nÃ©erlandais :: Le problÃ¨me du drapeau national nÃ©erlandais </h2><br><img align="left" width="210" height="140" src="https://habrastorage.org/webt/qq/cm/rv/qqcmrvjuvvyqo7ihytacypnh1li.png"><br clear="right">  Nous compliquons lÃ©gÃ¨rement la tÃ¢che, considÃ©rons non pas deux chiffres, mais trois.  Faisons en sorte que les Ã©lÃ©ments du tableau appartiennent aux chiffres les plus bas (zÃ©ros), moyens (unitÃ©s) et supÃ©rieurs (deux). <br><br>  Pour dÃ©monstration, nous prenons le drapeau Ã  trois voies rouge-blanc-bleu de la <s>France, le</s> <s>Luxembourg de la</s> <s>Russie, le</s> <s>Schleswig-Goldstein des</s> Pays <s>-</s> Bas.  Pourquoi exactement le drapeau des Pays-Bas?  Parce que Edsger Dijkstra dans ses confÃ©rences sur l'exemple de ce drapeau a examinÃ© l'algorithme correspondant, qui a Ã©tÃ© appelÃ© "la tÃ¢che du drapeau national nÃ©erlandais". <br><br><img width="735" height="95" src="https://habrastorage.org/webt/yl/hy/b6/ylhyb69kavw2mki9nmk0_idsxcq.gif"><br><br>  Comme vous pouvez le voir, il n'y a rien de particuliÃ¨rement nouveau.  Chaque catÃ©gorie a son propre pointeur.  Initialement, les Ã©tiquettes pour le junior et le milieu prennent les positions de dÃ©part au dÃ©but du tableau et se dÃ©placent vers la droite lorsque l'Ã©lÃ©ment correspondant est rencontrÃ©.  Le pointeur pour l'ordre supÃ©rieur est le premier Ã  la fin du tableau et se dÃ©place vers la gauche. <br><br>  Le passage dans le tableau sera Ã©galement incomplet en fait, si les bits sont rÃ©partis plus ou moins uniformÃ©ment, alors l'algorithme passera par 2/3 du tableau avant de disperser tous les Ã©lÃ©ments dans ses Â«bandesÂ». <br><br><h2>  Tri par drapeau amÃ©ricain :: Tri par drapeau amÃ©ricain </h2><br><img align="left" width="285" height="150" src="https://habrastorage.org/webt/2u/bb/hq/2ubbhq_rmqqxo6hj9blipmfppnq.png"><br clear="right">  Maintenant, dans nos explications, nous pouvons passer au drapeau amÃ©ricain multibande. <br><br>  Lorsque nous n'avons pas deux, pas trois, mais un nombre quelconque de chiffres, nous fixons oÃ¹ chaque chiffre doit commencer (sa Â«bandeÂ») et redessinons les Ã©lÃ©ments dans leurs Â«bandesÂ». <br><br>  Dans cet algorithme, les nombres ne sont gÃ©nÃ©ralement pas considÃ©rÃ©s comme dÃ©cimaux, mais avec une profondeur de bits diffÃ©rente, le plus souvent une puissance de deux.  Souvent, le nombre 256 est pris comme base pour la profondeur de bits (un peu moins souvent que 128), ce qui vous permet d'adapter efficacement le tri pour organiser les chaÃ®nes.  Pour les nombres pour la profondeur de bits, il est plus pratique de prendre de petits 2 <sup>n</sup> (2, 4, 16, etc.), ce qui vous permet de comparer en dÃ©calant par bits, au lieu d'augmenter Ã  une puissance lors de la comparaison des nombres dÃ©cimaux. <br><br>  L'animation montre un exemple de profondeur de bits avec base 16: <br><br><img width="740" height="328" src="https://habrastorage.org/webt/tm/mf/lk/tmmflkyrfqa3bqrlucv8y-rzcfk.gif"><br><br><ol><li>  Lors de la premiÃ¨re passe - recherchez le maximum afin de dÃ©terminer le nombre maximum de bits parmi les Ã©lÃ©ments du tableau (afin d'extraire correctement les bits dÃ©terminÃ©s Ã  partir du compte des Ã©lÃ©ments). </li><li>  Ensuite, un traitement rÃ©cursif se produit.  Lorsqu'il est appelÃ©, les limites du sous-tableau et le bit traitÃ© actuel sont indiquÃ©s.  Au premier appel, le tableau entier est un sous-tableau; le tout premier bit Ã  gauche est pris. </li><li>  Parmi les Ã©lÃ©ments du sous-tableau, un calcul initial est effectuÃ© - combien de fois chaque chiffre apparaÃ®t dans la catÃ©gorie actuelle.  Ce comptage vous permet de dÃ©terminer la localisation de ces chiffres des chiffres (c'est-Ã -dire, les limites et l'emplacement de la Â«bandeÂ» vers laquelle vous souhaitez dÃ©placer les Ã©lÃ©ments qui ont le chiffre suivant dans un chiffre particulier sont connus).  En fait, les localisations sont des pointeurs vers des Â«bandesÂ» oÃ¹ les Ã©lÃ©ments correspondants doivent Ãªtre dÃ©placÃ©s. </li><li>  ConformÃ©ment aux pointeurs de localisation, un Ã©change a lieu sur place - le chiffre dans la catÃ©gorie indique oÃ¹ l'article doit Ãªtre envoyÃ©, un autre Ã©lÃ©ment avec lequel l'Ã©change a eu lieu prend sa place.  Cette clause est exÃ©cutÃ©e jusqu'Ã  ce que, lors du prochain Ã©change, un Ã©lÃ©ment arrivant d'un autre endroit ne soit pas Ã  sa place (vous pouvez alors passer Ã  l'Ã©lÃ©ment suivant du sous-tableau et exÃ©cuter de la mÃªme maniÃ¨re cette clause pour lui). </li><li>  AprÃ¨s que, Ã  la suite des Ã©changes, les Ã©lÃ©ments ont Ã©tÃ© redistribuÃ©s en blocs par des nombres dans le chiffre suivant, une rÃ©cursivitÃ© a lieu - le mÃªme algorithme est appliquÃ© Ã  chaque bloc comme un sous-tableau, le suivant est pris comme le chiffre actuel. </li></ol><br>  Dans l'article sur le <a href="https://habr.com/ru/post/478654/">comptage des tris avec une distribution approximative,</a> il existe un algorithme visuellement trÃ¨s similaire - le <b>tri par approximation</b> .  LÃ , nous avons comptÃ© le nombre de fois oÃ¹ chaque numÃ©ro du tableau s'est produit - et redistribuÃ© les Ã©lÃ©ments en fonction des localisations obtenues.  Ici, nous comptons le nombre de fois oÃ¹ chaque chiffre de la catÃ©gorie se produit pour les Ã©lÃ©ments du sous-tableau - et nous redistribuons Ã©galement les Ã©lÃ©ments du sous-tableau en fonction des localisations obtenues.  Si l'approximation est une sorte de tri de comptage, alors Â«amÃ©ricainÂ» est un tri de bits de comptage. <br><br><div class="spoiler">  <b class="spoiler_title">Tri du drapeau amÃ©ricain - ImplÃ©mentation de Python</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#           def get_radix_val(x, digit, radix) -&gt; int: return int(floor(x / radix**digit)) % radix #             def compute_offsets(a_list, start: int, end: int, digit, radix) -&gt; list: #          counts = [0 for _ in range(radix)] for i in range(start, end): #        #         val = get_radix_val(a_list[i], digit, radix) counts[val] += 1 #       #          offsets = [0 for _ in range(radix)] sum = 0 #         for i in range(radix): offsets[i] = sum sum += counts[i] return offsets #      def swap(a_list, offsets, start: int, end: int, digit, radix) -&gt; None: i = start #          next_free = copy(offsets) #        #   (       ) cur_block = 0 while cur_block &lt; radix-1: # if i &gt;= start + offsets[cur_block+1]: cur_block += 1 continue radix_val = get_radix_val(a_list[i], digit, radix) if radix_val == cur_block: i += 1 continue swap_to = next_free[radix_val] a_list[i], a_list[swap_to] = a_list[swap_to], a_list[i] next_free[radix_val] += 1 #   def american_flag_sort_helper(a_list, start: int, end: int, digit, radix) -&gt; None: #          offsets = compute_offsets(a_list, start, end, digit, radix) #      swap(a_list, offsets, start, end, digit, radix) if digit == 0: #     ? return #   #       for i in range(len(offsets)-1): #      #         american_flag_sort_helper(a_list, offsets[i], offsets[i+1], digit-1, radix) #   def american_flag_sort(a_list, radix) -&gt; None: #,         for x in a_list: assert(type(x) == int) #    max_val = max(a_list) #    (  ) max_digit = int(floor(log(max_val, radix))) #   -     american_flag_sort_helper(a_list, 0, len(a_list), max_digit, radix)</span></span></code> </pre> </div></div><br><h2>  Sort Ska :: Sort Ska </h2><br>  Le programmeur allemand, Malte Skarupke, a annoncÃ© qu'il a dÃ©veloppÃ© un nouvel algorithme de tri, qui est un Â«drapeau amÃ©ricainÂ» radicalement amÃ©liorÃ© et surpasse <b>std :: sort</b> en moyenne 2 fois (std :: sort - un algorithme Ã©galement connu sous le nom de <b>tri introspectif</b> - un hybride de <b>tri rapide</b> et de <b>tri par tas</b> ). <br><br><ol><li>  Le tableau est triÃ© rÃ©cursivement, au premier niveau de rÃ©cursivitÃ©, l'ensemble du tableau est pris comme un sous-tableau. </li><li>  Si le sous-tableau a moins de 128 Ã©lÃ©ments, std :: sort est appelÃ© pour cela. </li><li>  Si le sous-tableau contient de 128 Ã  1024 Ã©lÃ©ments, alors le tri du drapeau amÃ©ricain est appelÃ© pour cela. </li><li>  S'il y a plus de 1024 Ã©lÃ©ments dans un sous-tableau, le tri ska est appelÃ© pour cela. </li><li>  De plus, pour Ã©viter le pire des cas, si l'imbrication rÃ©cursive est trop grande (plus de 16 niveaux), l'algorithme passe Ã  <nobr>std :: sort</nobr> , mÃªme s'il y a plus de 128 Ã©lÃ©ments dans le sous-tableau. </li></ol><br>  Apparemment, c'est un algorithme trÃ¨s efficace et en mÃªme temps extrÃªmement complexe - la mise en Å“uvre de son auteur prend prÃ¨s d'un mille et demi de lignes.  Peut-Ãªtre envisagerons-nous un jour ce tri, maintenant nous n'y entrerons pas.  Les personnes intÃ©ressÃ©es peuvent cliquer sur les liens ci-dessous. <br><br><h2>  Les rÃ©fÃ©rences </h2><br><img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png">  <a href="https://en.wikipedia.org/wiki/Dutch_national_flag_problem">ProblÃ¨me du drapeau national nÃ©erlandais</a> , <a href="https://en.wikipedia.org/wiki/American_flag_sort">type de drapeau amÃ©ricain</a> <br><br>  <b>Tri Ska:</b> <img width="30" height="30" src="https://habrastorage.org/webt/-p/f7/fs/-pf7fshzu943ul4yvkrw2f4dv1g.png">  J'ai Ã©crit un algorithme de tri plus rapide ( <a href="https://probablydance.com/2016/12/27/i-wrote-a-faster-sorting-algorithm/">partie 1</a> , <a href="https://probablydance.com/2017/01/17/faster-sorting-algorithm-part-2/">partie 2</a> ) <img width="30" height="30" src="https://habrastorage.org/webt/fn/cd/py/fncdpynfktllvkdjtmpif0kd1zc.png">  <a href="https://github.com/skarupke/ska_sort/">Code Github</a> <br><br><h3>  Articles de sÃ©rie: </h3><ul><li>  <a href="https://habr.com/post/414447/">Application Excel AlgoLab.xlsm</a> </li><li>  <a href="https://habr.com/post/414653/">Exchange Sorts</a> </li><li>  <a href="https://habr.com/post/415935/">Tri d'insertion</a> </li><li>  <a href="https://habr.com/post/422085/">Trier par sÃ©lection</a> </li><li>  <a href="https://habr.com/ru/post/431964/">Fusionner les tris</a> </li><li>  <a href="https://habr.com/ru/post/472466/">Trier par distribution</a> <ul><li>  <a href="https://habr.com/ru/post/478654/">Compter les tris avec une distribution approximative</a> </li><li>  <b>Tri du drapeau amÃ©ricain</b> </li><li>  Arborescence des suffixes dans le tri au niveau du bit </li><li>  Comparaison des tri par distribution </li></ul></li><li>  <a href="https://habr.com/ru/post/483786/">Tri hybride</a> </li></ul><br>  Dans l'application AlgoLab Excel, le tri par un drapeau bicolore (trie les zÃ©ros et les uns), un drapeau tricolore (trie les zÃ©ros, les uns et les Ã©galitÃ©s), le tri par le drapeau amÃ©ricain est apparu.  Pour trier le Â«drapeau amÃ©ricainÂ», vous pouvez (dans un commentaire sur la cellule avec le nom de l'algorithme) spÃ©cifier le systÃ¨me numÃ©rique pour la distribution - la valeur par dÃ©faut est hexadÃ©cimale. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481304/">https://habr.com/ru/post/fr481304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481288/index.html">Redux Toolkit comme outil pour un dÃ©veloppement efficace de Redux</a></li>
<li><a href="../fr481290/index.html">COMMENT / ParamÃ¨tres rÃ©seau et VLAN sur un serveur Hetzner et Mikrotik dÃ©diÃ©</a></li>
<li><a href="../fr481294/index.html">10 meilleurs outils d'automatisation de test de logiciels</a></li>
<li><a href="../fr481296/index.html">Comment Ã©crire du code qui sera rÃ©utilisÃ©</a></li>
<li><a href="../fr481302/index.html">"Ã€ propos, oui pas un cluster" ou comme nous avons importÃ© un SGBD</a></li>
<li><a href="../fr481306/index.html">PrÃ©sentation de werf 1.0 stable: qu'est-ce que GitOps a Ã  voir avec lui, son statut et ses plans</a></li>
<li><a href="../fr481312/index.html">Cadeaux perdus du PÃ¨re NoÃ«l: annonce d'une quÃªte informatique pour le 6 janvier</a></li>
<li><a href="../fr481314/index.html">Plateforme DIY Crawler pour robots et divertissement</a></li>
<li><a href="../fr481316/index.html">RÃ©daction d'un blog sur les microservices - Partie 4 Post Service</a></li>
<li><a href="../fr481318/index.html">Hacking avec Unicode (sur l'exemple de GitHub)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>