<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛷 👨🏿‍🤝‍👨🏻 💂🏼 Otro marco de plugin de C ++ 🧑🏿‍🤝‍🧑🏼 👩🏻‍🤝‍👨🏽 💷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entrada 


 Quien no visitó, usando bibliotecas de código abierto, pensó: "¡Gracias a estos muchachos por esta genial lib! ¡Algún día escribiré algo q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Otro marco de plugin de C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422401/"><h2 id="vstuplenie">  Entrada </h2><br><p>  Quien no visitó, usando bibliotecas de código abierto, pensó: <em>"¡Gracias a estos muchachos por esta genial lib!</em>  <em>¡Algún día escribiré algo que valga la pena y lo pondré en público para que otros puedan usarlo! "</em> </p><br><p>  Si todos!  O no? .. </p><a name="habracut"></a><br><p> Con el advenimiento del estándar C ++ 17, nuestra <code></code> se resuelve de manera mucho más rápida y elegante, solo debe querer realizar su idea y poder poner en práctica los <strong>beneficios</strong> con los que los chicos de <strong>WG21</strong> nos <strong>miman</strong> . <br> <code>    ? : #,     )) ...</code> </p> <br><h2 id="predystoriya">  Antecedentes </h2><br><p>  El tema de los complementos es bastante interesante, ya que le permite crear una nueva funcionalidad en el Software (software) sin realizar cambios en el núcleo del programa, pero al mismo tiempo, debe pensarse y escribirse una interfaz para la interacción: <strong>Software</strong> &lt;-&gt; <strong>Plugins</strong> <strong>Manager</strong> &lt;-&gt; <strong>Complementos</strong> . </p><br><p>  Tengo experiencia (sin éxito) en entrevistar a una empresa que tiene su propio sistema de plug-in para sistemas integrados, debido a la complejidad de la arquitectura en la que fallé la tarea de prueba.  Hay muchas macros dentro de las clases base de las cuales se hereda, y muchas cosas que hacen que la vida cotidiana del programador sea gris al momento de usar tales soluciones ... </p><br><p>  En uno de los momentos de autoeducación y lectura de artículos sobre C ++ 17, se decidió consolidar el conocimiento adquirido al escribir un sistema de complemento que sería comprensible y fácil de usar. </p><br><p>  Qué mal o qué bien lo hice, juzgad, queridos Khabrovites ... </p><br><h2 id="obzor">  Revisar </h2><br><h3 id="vozmozhnosti-biblioteki">  Características de la biblioteca </h3><br><ul><li>  Complementos como servicios (se ejecutan en operaciones separadas) </li><li>  Descargar automáticamente complementos no utilizados </li></ul><br><h3 id="plyusy">  Pros </h3><br><ul><li>  Facilidad de uso </li><li>  Ejecución asincrónica de tareas </li><li>  Diseño de solo encabezado </li></ul><br><h3 id="minusy">  Contras </h3><br><ul><li>  Si se introduce un nuevo complemento en el sistema, debe compilarse con la misma versión del compilador que el administrador que lo descarga (así como libstdc ++) para la compatibilidad ABI </li><li>  Cachés constantes de std :: any a los tipos utilizados? </li><li>  Validación de futuros? </li></ul><br><h3 id="sozdanie-plagina">  Creación de complementos </h3><br><pre> <code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myplugin</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> micro::iplugin { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: myplugin(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ver, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&amp; nm):micro::iplugin(ver, nm) { <span class="hljs-comment"><span class="hljs-comment">//     subscribe&lt;2&gt;("sum2", [](std::any a, std::any b)-&gt; std::any { return std::any_cast&lt;int&gt;(a) + std::any_cast&lt;int&gt;(b); }, "  " ); } };</span></span></code> </pre> <br><h3 id="zagruzka-plagina">  Descargar plugin </h3><br><pre> <code class="hljs cpp"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;micro::plugins&gt; manager = micro::plugins::get(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;micro::iplugin&gt; myplugin = manager-&gt;get_plugin(<span class="hljs-string"><span class="hljs-string">"myplugin"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myplugin &amp;&amp; myplugin-&gt;has&lt;<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"sum2"</span></span>)) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::shared_future&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::any&gt; result = myplugin-&gt;run&lt;<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"sum2"</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>); result.wait(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::any_cast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(result.get()) &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; }</code> </pre> <br><p>  Vea ejemplos más detallados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en la página del proyecto.</a> </p><br><h2 id="vmesto-zaklyucheniya">  En lugar de una conclusión </h2><br><p>  Me complace mucho leer artículos informativos sobre Habra en C ++ (y no solo en C ++), <br>  Espero que encuentre este artículo interesante y al menos algo informativo. </p><br><p>  En mi humilde opinión, puede usar lib en prod, dejar que echen un vistazo a los C ++ más autorizados y decir su palabra, el código fuente está bien documentado y no hay muchos de ellos, alrededor de 1000 líneas. </p><br><h2 id="ssylka-na-proekt">  Enlace al proyecto </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">microplugins</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es422401/">https://habr.com/ru/post/es422401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es422385/index.html">Memoria virtual en ARMv7</a></li>
<li><a href="../es422389/index.html">El arte olvidado de la flexión: cómo proteger la columna vertebral en otras culturas</a></li>
<li><a href="../es422395/index.html">Una novedad muy olvidada: después de años, sale el sucesor del MikroTik RB2011</a></li>
<li><a href="../es422397/index.html">“Lo principal es que lo pasé”: qué y cómo se les enseña a los futuros especialistas de TI en Berlín</a></li>
<li><a href="../es422399/index.html">El proceso de revisión de código en hh.ru</a></li>
<li><a href="../es422403/index.html">20 de septiembre, Moscú: una reunión para analistas</a></li>
<li><a href="../es422407/index.html">Buscar y ordenar textos relacionados</a></li>
<li><a href="../es422409/index.html">Python: metaprogramación en producción. Primera parte</a></li>
<li><a href="../es422411/index.html">Nuevos roles en las empresas en la era de la servitización.</a></li>
<li><a href="../es422413/index.html">Aplicación del sistema operativo Arm Mbed. Ajuste fino</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>