<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСитАНЁЯПн тЪЩя╕П ЁЯР╛ рдПрдХ рд╕рд░рд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╛рде рд▓рд┐рдирдХреНрд╕ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ ЁЯШ┤ ЁЯНп ЁЯЦХЁЯП╛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдПрдХ рдмреИрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ рдЬреЛ рдЙрдкрдпреБрдХреНрдд рдкреИрдХреЗрдЬреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдПрдХреАрдХреГрдд рдХрд░рддреА рд╣реИ: 


1. рдмрд╛рд╣рд░реА рдФрд░ рдЖрдВрддрд░рд┐рдХ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ ( iptables рдкреИрдХреЗрдЬ)ред ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХ рд╕рд░рд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╛рде рд▓рд┐рдирдХреНрд╕ рдлрд╝рд╛рдпрд░рд╡реЙрд▓</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/146116/">  рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдПрдХ рдмреИрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ рдЬреЛ рдЙрдкрдпреБрдХреНрдд рдкреИрдХреЗрдЬреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдПрдХреАрдХреГрдд рдХрд░рддреА рд╣реИ: <br><ol><li>  рдмрд╛рд╣рд░реА рдФрд░ рдЖрдВрддрд░рд┐рдХ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ ( <b>iptables</b> рдкреИрдХреЗрдЬ)ред </li><li>  рдмрд╛рд╣рд░реА рдФрд░ рдЖрдВрддрд░рд┐рдХ рдЯреНрд░реИрдлрд╝рд┐рдХ ( <b>iptables</b> рдкреИрдХреЗрдЬ) рдХреЗ рд▓рд┐рдП рд▓реЗрдЦрд╛рдВрдХрдиред </li><li>  рд╕реНрдерд╛рдиреАрдп рдХреНрд╖реЗрддреНрд░ рдиреЗрдЯрд╡рд░реНрдХ ( <b>рд╕реНрдХреНрд╡реАрдб</b> рдкреИрдХреЗрдЬ) рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдХреНрд╕реА рд╕рд░реНрд╡рд░ред </li><li>  рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рд╕рд╛рдордЧреНрд░реА рдлрд╝рд┐рд▓реНрдЯрд░ ( <b>DansGuardian</b> рдкреИрдХреЗрдЬ)ред </li><li>  рд╕реНрдерд╛рдиреАрдп рдХреНрд╖реЗрддреНрд░ рдиреЗрдЯрд╡рд░реНрдХ ( <b>BIND</b> рдкреИрдХреЗрдЬ) рдХреЗ рд▓рд┐рдП DNS рд╕рд░реНрд╡рд░ред </li></ol><br><a name="habracut"></a><br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрдИ рд╡рд░реНрд╖реЛрдВ рдХреЗ рдХрд╛рдо рдФрд░ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд╣реЛрдиреЗ рдХреЗ рджрд╛рд╡реЛрдВ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реИ - рдпрд╣ рдЖрдкрдХреЛ рд▓рд┐рдирдХреНрд╕ рдорд╢реАрди рдХреЛ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреЗ рд▓рд┐рдП рдФрд░ рдПрдХ рдмрдбрд╝реЗ рдЙрджреНрдпрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдЧреЗрдЯрд╡реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ (рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдпрд╣ рдкрд╛рдВрдЪ рдЙрджреНрдпрдореЛрдВ рдореЗрдВ рдФрд░ рдПрдХ рджреВрд░рд╕реНрде рдХрд╛рд░реНрдпрд╛рд▓рдп рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рд╣рд░ рдЬрдЧрд╣ <b>Centro</b> ) рд╣реИ ред <br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдЕрдкрдиреЗ рдХрд╛рдо рдХреЗ рд▓рд┐рдП рдХрдо рд╕реЗ рдХрдо рджреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ - рдЬрд┐рдирдореЗрдВ рд╕реЗ рдПрдХ <i>рдмрд╛рд╣рд░реА рд╣реИ</i> , рдФрд░ рдмрд╛рдХреА <i>рдЖрдВрддрд░рд┐рдХ</i> рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдмрд╛рд╣рд░реА рдЗрдВрдЯрд░рдлрд╝реЗрд╕ <b>EXTIF</b> рдЪрд░ рджреНрд╡рд╛рд░рд╛ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдпрд╣ рдЪрд░ рд╕реЗрдЯ рдирд╣реАрдВ рд╣реЛрдиреЗ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br>  рдПрдХ рдФрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рд╕рднреА рдЗрдВрдЯрд░рдлреЗрд╕ рдореЗрдВ рд╕реНрдереИрддрд┐рдХ рдкрддреЗ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП, рдЕрд░реНрдерд╛рдд  рдЗрдВрдЯрд░рдлреЗрд╕ рдЙрдиреНрд╣реЗрдВ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдкрддреЗ рд╣рдореЗрд╢рд╛ рд╕рдорд╛рди рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЗрд╕ рддрдереНрдп рд╕реЗ рдЙрдкрдЬреА рд╣реИ рдХрд┐ <b>iptables</b> рдирд┐рдпрдо рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдЖрдИрдкреА рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдирд┐рдпрдо <b>fwtraf</b> <b>fwnormal рдХрдорд╛рдВрдб рдХреЗ</b> рд╕рд╛рде <b>fwtraf.conf</b> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЙрддреНрдкрдиреНрди рдФрд░ рд▓рд╛рдЧреВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ <b>fwtraf</b> <b>fwsave рдХрдорд╛рдВрдб рдХреЗ</b> рд╕рд╛рде рд╕рд╣реЗрдЬреЗ <b>рдЬрд╛рддреЗ рд╣реИрдВ</b> ред  рдпрд╛рдиреА  рдпрджрд┐ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдЖрдИрдкреА рдкрддреЗ рдмрджрд▓ рдЧрдП рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдирд┐рдпрдореЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА (рдФрд░ рдЙрдиреНрд╣реЗрдВ рд░рд┐рдмреВрдЯ рдХреЗ рдмрд╛рдж рдХрд╛рд░реНрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдиреЗ рдкрд░ рдЙрдиреНрд╣реЗрдВ рдмрдЪрд╛рдПрдВ)ред <br><br>  рд╕реНрд░реЛрдд NAT рдФрд░ рд╡реЗрдм рдкреНрд░реЙрдХреНрд╕реА рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рддрд░реАрдХреЗ рд╕рдВрдпреБрдХреНрдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: <br><ul><li>  рд╕реНрд░реЛрдд NAT: рдмрдВрдж  (SNAT = "") <br></li><li>  рд╕реНрд░реЛрдд NAT: рдкрд░  (SNAT = "YES")ред </li></ul><br><ul><li>  рд╡реЗрдм рдкреНрд░реЙрдХреНрд╕реА: рдмрдВрдж  (WEBPROXY = "") <br></li><li>  рд╡реЗрдм рдкреНрд░реЙрдХреНрд╕реА: рд╕реНрдХреНрд╡рд┐рдб (WEBPROXY = "SQUID")ред </li><li>  рд╡реЗрдм рдкреНрд░реЙрдХреНрд╕реА: рдбрд╛рдВрд╕рдЧрд╛рд░реНрдбрд┐рдпрди-&gt; рд╕реНрдХреНрд╡рд┐рдб (WEBPROXY = "DGSQUID")ред </li></ul><br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрдИ <i>рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ</i> ( <b>LANS</b> рдЪрд░) рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИ - рд╡реЗ рдПрдХ рд╕реНрдерд╛рди рдХреЗ рд╕рд╛рде рд╕реВрдЪреАрдмрджреНрдз рд╣реИрдВ: <br>  LANS = "192.168.0.0/24 10.0.0.0/8" <br>  <i>рджреВрд░рд╕реНрде рд▓реИрди рдХрд╛</i> рднреА рд╕рдорд░реНрдерди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <b>рд╡реАрдкреАрдПрди</b> рддрдХрдиреАрдХреЛрдВ ( <b>REMOTE_LANS</b> рдЪрд░) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рд░реНрдпрд╛рд▓рдп рд▓реИрди рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ: <br>  REMOTE_LANS = "192.168.1.0/24 192.168.3.0/24 192.168.5.0/248 <br><br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд╣реИ: <br><br> <a href=""><img height="400" src="https://sites.google.com/site/smkuzmin/home/fwtraf/fwtraf_conf.png?height=400&amp;amp;width=358" width="358"></a> <br><br><br><br>  <font>рдпрд╣</font> <font>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ</font> <font>рдХреЗ</font> <font>рд╕реНрдерд┐рд░ IP рдкрддреЗ рдФрд░</font> <font>рдХрдВрдкреНрдпреВрдЯрд░</font> <font>рдирд╛рдо</font> <font>рджрд┐рдЦрд╛рддрд╛ рд╣реИ</font> <font>рдЬреЛ:</font> <font><br></font> <br><ul><li>  рд╣рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ (" <b>рдПрдХ</b> рд╡рд┐рд▓реЛ рдХреЗ рд▓рд┐рдП рд▓рдШреБ рдХрдорд╛рдВрдб") </li><li>  рдирд┐рд╖рд┐рджреНрдз ( <b>рдбреА</b> рдХрдорд╛рдВрдб - " <b>рдбреА</b> рдПрдирд╡рд╛рдИ" рдХреЗ рд▓рд┐рдП рдЫреЛрдЯрд╛) </li></ul><br>  рдкреЛрд░реНрдЯ ( <b>PORTS</b> рдХреЙрд▓рдо): <br><ul><li>  рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдЯреАрд╕реАрдкреА рдкреЛрд░реНрдЯ, рдХреЙрдорд╛ рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХрд┐рдП рдЧрдП: <b>рд╡реЗрдм, рдПрдлрдЯреАрдкреА</b> ред <br></li><li>  рд╕рд┐рд╡рд╛рдп рд╕рднреА рдЯреАрд╕реАрдкреА рдкреЛрд░реНрдЯреНрд╕, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, smtp <b>:! smtp</b> ред </li><li>  рд╕рднреА рдЯреАрд╕реАрдкреА рдФрд░ рдпреВрдбреАрдкреА рдкреЛрд░реНрдЯ: <b>рд╕рднреА</b> ред </li></ul><br>  <font>рдпрджрд┐</font> <font>рдПрдХ рдХрдВрдЯреЗрдВрдЯ рдлрд┐рд▓реНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (WEBPROXY = "DGSQUID")</font> рдФрд░ <font>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╡реЗрдм рдкреЛрд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИ</font> <font>, рддреЛ рдЙрд╕ рдкрд░ рдПрдХ рд╡реЗрдм рдПрдХреНрд╕реЗрд╕ рдЧреНрд░реБрдк (рдХреЙрд▓рдо <b>рдбрдмреНрд▓реНрдпреВрдП</b> - " <b>рдбрдмреНрд▓реНрдпреВ</b> рдИрдм <b>рдП</b></font> <font>рд╕реЗрд╕реЗрдВрдЯ") рдХреЗ</font> <font>рд▓рд┐рдП рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред</font> <font><br><br></font>  рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ (рдЧрдВрддрд╡реНрдп NAT) рдХреЗ рдЖрдВрддрд░рд┐рдХ рдЖрдИрдкреА рдкрддреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рд╣рд░реА рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреЗ рддрдерд╛рдХрдерд┐рдд рдЕрдЧреНрд░реЗрд╖рдг рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИред  рдпрд╣ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ рдЬрдм SNAT рдЧреЗрдЯрд╡реЗ рдкрд░ рд╕рдХреНрд╖рдо рд╣реИ рдФрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдкрдиреЗ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЛ рдЗрдВрдЯрд░рдиреЗрдЯ (рд╡реЗрдм тАЛтАЛрдФрд░ ftp рдЯреНрд░реИрдлрд╝рд┐рдХ) рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рджреЗрдВ рдФрд░ рдЙрд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ RDP рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЧреЗрдЯрд╡реЗ рдХреЗ рдмрд╛рд╣рд░реА IP рдкрддреЗ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ, рдФрд░ рдЧреЗрдЯрд╡реЗ рдЙрд╕рдХреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░реЗрдЧрд╛ред <br>  192.168.1.240 PC30 0 рд╡реЗрдм, ftp, rdp-rdp #Admin <br>  <font>рдореИрдВ рдпрд╣ рднреА рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдлреЙрд░рд╡рд░реНрдб рдХрд┐рдП рдЧрдП рдкреЛрд░реНрдЯреНрд╕ рдХрд╛ рдорд┐рд▓рд╛рди рдирд╣реАрдВ рдХрд░рдирд╛ рд╣реИ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдмрд╛рд╣рд░реА рдЖрдИрдкреА рдкрд░ 2525 рдкреЛрд░реНрдЯ рд╕реБрди рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕реЗ</font> <font>рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдЕрдВрджрд░ рд╕реНрдерд┐рдд рдореЗрд▓ рд╕рд░реНрд╡рд░</font> <font>рдХреЗ</font> <font>25 рд╡реЗрдВ рдкреЛрд░реНрдЯ рдкрд░</font> <font>рдлреЙрд░рд╡рд░реНрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</font> <font>:</font> <font><br></font>  192.168.1.2 рдореЗрд▓ 0 2525-25 # рдореЗрд▓ рд╕рд░реНрд╡рд░ <br>  <font>рд╕реНрдХреНрд░рд┐рдкреНрдЯ рднреА рдкреНрд░рддрд┐рджрд┐рди html рдЯреНрд░реИрдлрд╝рд┐рдХ рд░рд┐рдкреЛрд░реНрдЯ рдмрдирд╛рддреА рд╣реИ рдФрд░</font> <font>рдЙрдиреНрд╣реЗрдВ рдкреНрд░рддрд┐ рдШрдВрдЯрд╛ рдЕрдкрдбреЗрдЯ рдХрд░рддреА рд╣реИ</font> <font><font>:</font></font> <font><br><br> <a href=""><img height="310" src="https://sites.google.com/site/smkuzmin/home/fwtraf/fwtraf_month_stat.jpg?height=310&amp;amp;width=400" width="400"></a> <br><br><br></font>  <font><font>рдФрд░ рдПрдХ рдФрд░ рдЫреЛрдЯрд╛ рдмреЛрдирд╕ - рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж,</font> <font><font><b>рд▓реЙрдЧрд╡реЙрдЪ рдХреА</b></font></font> <font>рджреИрдирд┐рдХ рд░рд┐рдкреЛрд░реНрдЯ</font> <font><font>рдореЗрдВ IP рдкрддреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБ рджрд┐рдЦрд╛рдИ <b>рджреЗрдВрдЧреА</b> рдЬреЛ <b>CONN_LIMIT</b> рдХрдиреЗрдХреНрд╢рди <b>рд╕реАрдорд╛</b> рд╕реЗ рдЕрдзрд┐рдХ <b>рд╣реИрдВ</b> ред</font></font></font>  <font><font><font>рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЖрдк рд╣рдореЗрд╢рд╛ рдЗрд╕ рдмрд╛рдд рд╕реЗ рдЕрд╡рдЧрдд рд░рд╣реЗрдВрдЧреЗ рдХрд┐ рдЖрдкрдХреЗ рд╕рд░реНрд╡рд░ рдореЗрдВ рдХреМрди рд░реБрдЪрд┐ рдмрдврд╝рд╛ рд░рд╣рд╛ рд╣реИ:</font></font></font> <br><br>  <font>- iptables рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╢реБрд░реВ ------------------------</font> <br>  <font><font>рдЗрдВрдЯрд░рдлрд╝реЗрд╕ eth0 рдкрд░ 24 рдкреИрдХреЗрдЯ рд▓реЙрдЧ рдХрд┐рдП</font></font> <font><font><br></font></font>  <font><font>10.7.57.22 рд╕реЗ - 21 рдкреИрдХреЗрдЯ рдЯреАрд╕реАрдкреА (110)</font></font> <font><font><br></font></font>  <font><font>10.16.63.206 рд╕реЗ - 3 рдкреИрдХреЗрдЯ рдЯреАрд╕реАрдкреА (110)</font></font> <font><font><br><br></font></font>  <font><font>рдЗрдВрдЯрд░рдлреЗрд╕ eth1 рдкрд░ 5367 рдкреИрдХреЗрдЯ рд▓реЙрдЧ рдХрд┐рдП</font></font> <font><font><br></font></font>  <font><font>72.53.179.125 рд╕реЗ - 5297 рдкреИрдХреЗрдЯреНрд╕ рд╕реЗ tcp (110)</font></font> <font><font><br></font></font>  <font><font>193.255.130.19 - 2 рдкреИрдХреЗрдЯ рд╕реЗ рд▓реЗрдХрд░ tcp (25) рддрдХ</font></font> <font><font><br></font></font>  <font><font>217.175.23.3 рд╕реЗ - 68 рдкреИрдХреЗрдЯ рдЯреАрд╕реАрдкреА (25) рдХреЗ рд▓рд┐рдП</font></font> <font><font><br><br></font></font>  <font><font>- iptables рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдПрдВрдб -------------------------</font></font> <font><font><br></font> <br><br><br></font>  <font><b><font>рд╕реНрдерд╛рдкрдирд╛</font></b></font> <font><br><br></font>  <font><font>1. рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЙрд╕реЗ</font> <b>/ bin / рдореЗрдВ рд░рдЦреЗрдВ</b> <font>:</font></font> <font><br></font>  <font><font>wget -no-check-certificate <a href="https://sites.google.com/site/smkuzmin/home/fwtraf/fwtraf">sites.google.com/site/smkuzmin/home/fwtraf/fwtraf</a> -O fwtraf</font></font> <font><font><br></font></font>  <font><font>рдПрдорд╡реА fwtraf / рдмрд┐рди /</font></font> <font><font><br></font></font>  <font><font>chmod 755 / рдмрд┐рди / fwtraf</font></font> <font><br></font>  <font><font>2. рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ</font> <b>/ etc / fwtraf / рдореЗрдВ рд░рдЦреЗрдВ</b> <font>:</font></font> <font><br></font>  <font><font>wget --no-check-certificate <a href="">sites.google.com/site/smkuzmin/home/fwtraf/fwtraf.conf</a> -O fwtraf.conf</font></font> <font><font><br></font></font>  <font><font>mkdir / etc / fwtraf</font></font> <font><font><br></font></font>  <font><font>рдПрдорд╡реА fwtraf.conf / etc / fwtraf /</font></font> <font><br></font>  <font><font>3.</font> <b>рдХреНрд░реЛрди</b> <font>рдХрд╛рд░реНрдп рдЕрдиреБрд╕реВрдЪрдХ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ</font> <font>рдФрд░ рдЗрд╕реЗ</font> <b>/etc/cron.d/</b> <font>рдореЗрдВ</font> <b>рд░рдЦреЗрдВ</b> <font>:</font></font> <font><br></font>  <font><font>wget -no-check-certificate <a href="">sites.google.com/site/smkuzmin/home/fwtraf/fwtraf.cron</a> -O fwtraf.cron</font></font> <font><font><br></font></font>  <font><font>mv fwtraf.cron /etc/cron.d/</font></font> <font><br></font>  <font><font>4. <b>iptables</b> рд╕реЗрд╡рд╛ рдХреЛ рдмрдВрдж рдХрд░реЗрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдмреВрдЯ рдкрд░ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдЬреЛрдбрд╝реЗрдВ:</font></font> <font><br></font>  <font><font><font><font>chkconfig iptables рдмрдВрдж</font></font></font></font> <font><font><font><font><br></font></font></font></font>  <font><font><font><font>chkconfig ip6tables рдмрдВрдж</font></font></font></font> <font><font><font><font><br></font></font></font></font>  <font><font><font><font>рдкреНрд░рддрд┐рдзреНрд╡рдирд┐ &gt;&gt; / etc / rc.d / rc.local</font></font></font> <font>/ bin / fwtraf fwinit</font></font> <font><br></font>  <font><font>5. рдлрд╝рд╛рдЗрд▓</font> <b>/etc/fwtraf/fwtraf.conf</b> <font>рдкрдврд╝реЗрдВ</font> <font>рдФрд░ рдЙрд╕рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВ</font></font> <font><font><br></font></font>  <font><font>рдЙрдирдХреА рдЬрд░реВрд░рддреЗрдВред</font></font> <font><br></font>  <font><font>6.</font> <b>fwtraf.conf рдХреЗ</b> <font>рд╕рдВрдкрд╛рджрди рдХреЗ рдмрд╛рдж</font> <font>, рд╣рдо рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ:</font></font> <font><br> <font><font color="#000000">&nbsp; &nbsp;&nbsp;</font></font></font>  <font><font>fwtraf fwnormal</font></font> <font>- рд╕рд╛рдорд╛рдиреНрдп (рдХрд╛рдордХрд╛рдЬреА) рдореЛрдбред</font> <br>  <font>7. рд╣рдо рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЕрдЧрд░ рд╕рдм рдХреБрдЫ рд╕реВрдЯ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╣рдо рдирд┐рдпрдореЛрдВ рдХреЛ рдмрдЪрд╛рддреЗ рд╣реИрдВ:</font> <br><font>&nbsp; &nbsp; </font>  <font>fwtraf fwsave</font> <font>-</font> <font>рд╕рднреА рдирд┐рдпрдо рд░рд┐рдмреВрдЯ рдХреЗ рдмрд╛рдж рд╕рд╣реЗрдЬреЗ рдФрд░ рдорд╛рдиреНрдп рд╣реИрдВред</font> <br><br>  <font>рдирд┐рдпрдореЛрдВ рдХреЗ рдиреНрдпреВрдирддрдо рд╕реЗрдЯ рдХреЗ рд╕рд╛рде рдПрдХ рдореЛрдб рд╣реИ:</font> <br> <font><font color="#000000">&nbsp; &nbsp;&nbsp;</font></font>  <font>fwtraf fwsimple</font> <font color="#000000">- рд╕рд░рд▓ рдореЛрдб, рд╡реНрдпрдХреНрддрд┐рдЧрдд рдирд┐рдпрдо рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рд╕рдм рдХреБрдЫ рдЕрдиреБрдордд рд╣реИред</font> <br><br>  рд╢реЗрд╖ рдЖрджреЗрд╢ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВ: <br>  <font>fwtraf</font> <font>- рдХрдорд╛рдВрдб рдкрд░ рдорджрджред</font> <br><br>  <b>BIND рдХреЗ</b> <font>рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП</font> <font>(</font> рдиреЛрдЯ: DNS рдЬрд╝реЛрди рдкреВрд░реНрд╡-рдкрдВрдЬреАрдХреГрдд рд╣реЛрдВрдЧреЗ! <font>),</font> <b>рдмрд┐рди / fwtraf</b> рдореЗрдВ <font>рд▓рд╛рдЗрди c "</font> DNSROOTDIR = ..." рдХреЛ <b>рд╣рдЯрд╛ рджреЗрдВ</b> ред <br><br></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/In146116/">https://habr.com/ru/post/In146116/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../In146110/index.html">рдЦреЛрдЬ рдореЗрдВ RTFM - рдХрдИ рднрд╛рд╖рд╛рдУрдВ рдХреЗ рд░реВрдк рдореЗрдВ рджреЛ рдмрд╛рд░</a></li>
<li><a href="../In146111/index.html">рдЖрдИрдЯреА рдореЗрдВ рд╡рд┐рдкрдгрди рдХреЗ рд╡рд┐рдХрд╛рд╕ рдкрд░ рд╡рд┐рдЪрд╛рд░</a></li>
<li><a href="../In146112/index.html">рдЦрд░реЛрдВрдЪ рд╕реЗ рдИ-рдХреЙрдорд░реНрд╕ рдкреЛрд░реНрдЯрд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП Symfony2 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</a></li>
<li><a href="../In146114/index.html">рдПрдВрдбреНрд░реЙрдЗрдб рдПрдореБрд▓реЗрдЯрд░ рдХреЛ рдУрд╡рд░рдХреНрд▓реЙрдХ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../In146115/index.html">рдХреИрд╕рдВрдбреНрд░рд╛ рдЖрдВрдЦреЛрдВ рдХреЗ рдСрдкрд░реЗрд╢рди</a></li>
<li><a href="../In146117/index.html">рдмреНрд▓реИрдХрдмреЗрд░реА 10 рдЬрд╛рдо рдкрд╣рд▓реА рдмрд╛рд░ рд░реВрд╕ рдореЗрдВ</a></li>
<li><a href="../In146118/index.html">рдЯреНрд░рд╕реНрдЯ рдХреЗ рд╡реЗрдм рдиреЗ Yandex Secure Search (SafeBrowsing API) рдХреЛ рд╕рдХреНрд╖рдо рдХрд┐рдпрд╛ рд╣реИ</a></li>
<li><a href="../In146121/index.html">рдиреЛрдХрд┐рдпрд╛ рд▓реВрдорд┐рдпрд╛ 710 рдФрд░ рд╡рд┐рдВрдбреЛрдЬ рдлреЛрди 7 рдХреЗ рд╕рд╛рде рдПрдХ рдорд╣реАрдирд╛</a></li>
<li><a href="../In146122/index.html">Gfranq.com рдиреЗ 3 рдорд╣реАрдиреЗ рдореЗрдВ 100,000 рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдФрд░ рд╕реНрдЯрд╛рдл рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд┐рдпрд╛</a></li>
<li><a href="../In146123/index.html">ASUS 1025CE рд╕рдореАрдХреНрд╖рд╛: рд▓рд╛рдЗрд╡рд┐рдВрдЧ рдореЛрд░</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>