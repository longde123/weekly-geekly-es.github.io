<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜï üë¶üèº ‚ôÄÔ∏è Hackear un cartucho de color HP: convertirlo en una impresora port√°til üíü üíº üë©üèæ‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduccion 
 Desde la juventud, cuando ten√≠amos el viejo DeskJet, me interesaban los cartuchos de impresora de inyecci√≥n de tinta. Estos cartuchos m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hackear un cartucho de color HP: convertirlo en una impresora port√°til</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443582/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78b/dee/afd/78bdeeafddeac0cebecd298e836e42d1.jpg" alt="imagen"></div><br><h1>  Introduccion </h1><br>  Desde la juventud, cuando ten√≠amos el viejo DeskJet, me interesaban los cartuchos de impresora de inyecci√≥n de tinta.  Estos cartuchos me parecieron muy interesantes y tan pronto como se quedaron sin tinta, me los llev√© inmediatamente.  En ese momento, no pod√≠a hacer nada con ellos, excepto desmontar y ensuciarme las manos ... Aunque sab√≠a que hab√≠a alg√∫n tipo de electr√≥nica compleja en el interior, pero cuando los contactos tocaron la bater√≠a, no pas√≥ nada interesante, y mi conocimiento de la electr√≥nica para m√°s no es suficiente <br><br>  Un poco m√°s tarde, cuando me convert√≠ en estudiante, logr√© obtener una vieja impresora de inyecci√≥n de tinta.  En ese momento, yo mismo usaba una impresora l√°ser, por lo que no estaba muy interesado en ella, pero fue interesante examinar los cartuchos e intentar hacer ingenier√≠a inversa.  De hecho, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escrib√≠ un art√≠culo</a> sobre la administraci√≥n de estos cartuchos, y aunque funcionaron bastante bien, tambi√©n hubo desventajas: todav√≠a no pod√≠a entender el orden exacto de las boquillas, el cartucho era solo monocromo (impreso con un magenta), y tambi√©n bastante viejo, y por lo tanto, la resoluci√≥n result√≥ ser bastante bajo. <br><br>  Recientemente, mi novia comenz√≥ a pintar, as√≠ que esta fue una buena excusa para volver a los cartuchos de tinta con la esperanza de poder dibujar algo en el lienzo.  Esta vez tuve suerte: logr√© encontrar una manera de unir todas las boquillas a las se√±ales correctas.  Adem√°s, hoy en d√≠a los cartuchos de impresora controlan m√°s boquillas usando menos se√±ales, lo que simplifica la administraci√≥n de cartuchos y aumenta la superficie que puede cubrirse en una pasada. <br><a name="habracut"></a><br>  ¬°Finalmente logr√© controlar el cartucho tricolor e imprimir a todo color! <br><br>  Si desea acompa√±arme desde el mont√≥n de impresoras para completar el control del cartucho de la impresora, hice un informe al respecto en Hackaday Supercon 2018. La grabaci√≥n de video del discurso se agrega a continuaci√≥n.  Si est√° interesado en los detalles de la ingenier√≠a inversa, √©chele un vistazo.  En el art√≠culo, hablar√© sobre los detalles t√©cnicos de la electr√≥nica que cre√©, as√≠ como los detalles espec√≠ficos de la administraci√≥n del cartucho para que usted mismo pueda dibujar el Nyancat usando ESP32 u otro microcontrolador. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KjACWDPQ8nw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h1>  Adjunto de presentaci√≥n </h1><br>  Si no ha visto el video, aqu√≠ hay un breve resumen: separ√© el cartucho de color para la impresora HP1112 (en China es un cartucho HP 803, pero el n√∫mero de art√≠culo depende de la regi√≥n), tom√© fotos del cristal e intent√© averiguar c√≥mo funciona.  Cuando no pude averiguar mucho, comenc√© a leer las se√±ales transmitidas entre la impresora y el cartucho, descubr√≠ qu√© se√±ales enviar para que el cartucho obedeciera mis √≥rdenes, y luego imprim√≠ Nyancat y otras cosas divertidas. <br><br>  La parte de sincronizaci√≥n de la se√±al del estudio fue principalmente un proceso de prueba y error.  Solo puedo adivinar qu√© tipo de conexi√≥n existe entre las se√±ales, por lo que fue bastante dif√≠cil determinar el orden entre los bordes y qu√© se√±ales pueden retrasarse y cu√°les deben transmitirse a tiempo.  Estudi√© un cartucho de silicio para esta informaci√≥n.  Result√≥ que realmente logr√© obtenerlo poniendo el cartucho bajo el microscopio, pero no del todo como esperaba. <br><br>  Antes de hablar en Supercon, estudi√© los cartuchos de color porque me parecieron los m√°s interesantes.  Despu√©s de regresar de Supercon, quer√≠a realizar una ingenier√≠a inversa del cartucho negro: su cabezal de impresi√≥n es m√°s grande que el del cartucho de color, por lo que podr√≠a imprimir m√°s a la vez.  Es probable que agregar soporte para este cartucho no sea tan dif√≠cil: la disposici√≥n del pin parece la misma, y ‚Äã‚Äãsab√≠a que el protocolo probablemente ser√≠a similar, porque ya hab√≠a intentado conectar el cartucho negro a mi hardware.  Aunque el software estaba transmitiendo im√°genes en color, todav√≠a logr√≥ imprimir algo. <br><br>  Esto es lo que hice con el cartucho de color: lo pegu√© bajo el microscopio, quit√© el recubrimiento de silicona de los contactos y me prepar√© para combinar varias tomas en una imagen grande.  Sin embargo, el cartucho negro difer√≠a del color en que hab√≠a m√°s inscripciones en su placa de metal con boquillas: ¬°debajo del revestimiento de silicona hab√≠a nombres de se√±al ocultos para todos los contactos! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31c/cd7/ceb/31ccd7cebca89ee82bf17246cc42970b.jpg" alt="imagen"></div><br>  (Por cierto, si desea ver im√°genes completas del microscopio en toda la grandeza de 40 megap√≠xeles, ¬°aqu√≠ est√° el <a href="">escudo</a> y el <a href="">silicio del</a> cartucho de color! ¬°Admire la complejidad de las <a href="">boquillas</a> y la <a href="">imagen de cristal del</a> cartucho negro!) <br><br>  Aunque puede no parecer mucho, en un mar de placas de circuito impreso sin marcar, chips sin materiales de referencia y art√≠culos que no conducen a ninguna parte, los nombres de varias se√±ales son un verdadero hallazgo.  En una corazonada, introduje nombres de se√±ales individuales con el nombre "Hewlett Packard" en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Google Patents</a> y descubr√≠ una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">patente espec√≠fica</a> (y otra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√°s antigua a la que hace</a> referencia el primero) con una descripci√≥n clara de las tecnolog√≠as y se√±ales utilizadas en los cartuchos.  Eso me ahorrar√≠a mucho tiempo cuando luchaba con los tiempos de los cartuchos ... oh, bueno.  Puedo decir sinceramente que esta sugerencia fue muy dif√≠cil de encontrar: las se√±ales no solo estaban cubiertas con pel√≠cula de silicona, sino que tambi√©n resultaron ser peque√±as: las letras tienen un tama√±o de solo 30 micr√≥metros, y esto es menor que el grosor de un cabello humano. <br><br>  La patente describe el funcionamiento interno del cartucho y vale la pena leerla (si puede descubrir la jerga legal que se usa all√≠) solo para comprender la extra√±a l√≥gica que HP a veces usa para controlar todas las boquillas.  La patente en s√≠ es √∫til, pero no suficiente para controlar el cartucho;  al menos la mayor parte del trabajo de ingenier√≠a inversa que emprend√≠ a√∫n ser√≠a necesario, incluso si tuviera esta patente. <br><br>  Aqu√≠ y m√°s abajo usar√© los nombres de las se√±ales y contactos utilizados en la patente.  Tenga en cuenta que en el c√≥digo todav√≠a se pueden encontrar mis propios nombres de se√±ales;  Incluir√© una tabla de traducci√≥n junto con la documentaci√≥n. <br><br><h1>  Codificaci√≥n de datos </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e3d/a27/9b5/e3da279b5a469d8257956df6e1b213d0.jpg"></div><br>  Entonces, as√≠ es como se ven los cartuchos en estudio.  A simple vista, estos son dispositivos bastante simples: en su interior, consisten casi por completo en una esponja empapada de tinta.  En el caso del cartucho que viene con la impresora, hay muy poca tinta: solo la mitad del espacio en el cartucho est√° ocupado por las esponjas, y las esponjas tambi√©n est√°n medio vac√≠as: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d9/8c5/236/1d98c523675454d7f5cd6dbb88a2c685.jpg"></div><br>  En el lateral hay 16 contactos que van desde la parte inferior donde se encuentra el cabezal de impresi√≥n.  Como puede ver en el microscopio, hay aproximadamente 336 inyectores en el cabezal de impresi√≥n del cartucho negro y 612 inyectores en el cartucho de color.  Las boquillas est√°n dispuestas en filas verticales en el cabezal de impresi√≥n, y cada boquilla se puede controlar electr√≥nicamente para que arroje una peque√±a gota de tinta hacia el lado del papel insertado en la impresora.  Al mover el cabezal verticalmente, la impresora puede imprimir una "tira" o cualquier otra imagen;  en el caso de un cartucho negro, esta tira tiene aproximadamente 15 mm de largo y 8 mm para un cartucho de color. <br><br>  Obviamente, las boquillas se pueden controlar mediante contactos.  Seg√∫n las peque√±as inscripciones del cabezal de impresi√≥n, los contactos contienen las siguientes se√±ales: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c4/10e/534/4c410e5349ffd16a8c97aed093121492.jpg"></div><br>  Como solo hay 16 contactos, debe haber alg√∫n tipo de esquema de multiplexaci√≥n para controlar todas las boquillas.  La patente explica c√≥mo funciona: el control de la boquilla se divide en 14 grupos separados.  Estos grupos se disparan secuencialmente: primero recibe sus datos y dispara el grupo 1, luego el grupo 2, y as√≠ sucesivamente.  Cada grupo controla un m√°ximo de 24 inyectores, y los datos para ellos se transmiten a trav√©s de tres buses de datos.  En el caso de un cartucho de color, los datos en los tres buses corresponden a los colores: D1 es el dato amarillo, D2 es el dato magenta y D3 controla las boquillas cian. <br><br>  En la patente, el trabajo se describe en detalle utilizando un bus de datos como ejemplo.  Esta figura de la patente muestra las se√±ales utilizadas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a8f/554/372/a8f554372c6edfc81bf606ff6cf9907f.png"></div><br>  El bus de datos contiene ocho bytes, 0-7.  Los bytes pares est√°n controlados por el borde posterior de DCLK, los bytes impares est√°n controlados por los bordes finales de S1-S4.  Las boquillas cuyos datos est√°n controlados por los primeros cuatro bytes se pueden activar suministrando energ√≠a a trav√©s del bus de alimentaci√≥n F3;  Las boquillas asociadas con los √∫ltimos cuatro bits son activadas por el bus F5. <br><br>  No tengo idea de por qu√© HP decidi√≥ usar un circuito tan complejo para administrar los datos de la boquilla.  Podemos decir que algo obvio, como un registro de desplazamiento, habr√≠a funcionado con bastante normalidad aqu√≠.  Entiendo que HP usa sus patentes como un arma contra las compa√±√≠as de recarga de cartuchos;  quiz√°s alguien ya haya patentado una soluci√≥n m√°s simple, y tuvieron que idear esta soluci√≥n m√°s compleja para ser √∫nicos. <br><br>  En este gr√°fico, realizado por m√≠ en un analizador l√≥gico, no es dif√≠cil encontrar las se√±ales descritas en la patente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50e/35e/025/50e35e02575c1508d44b21ba29acb909.png"></div><br>  Adem√°s de controlar las boquillas, el cartucho tambi√©n necesita una se√±al (csync) para ir al siguiente grupo de boquillas o para reiniciar y regresar al primer grupo.  Se puede ver en la imagen del analizador l√≥gico: muestra los pen√∫ltimos y √∫ltimos grupos de 14, y la se√±al csync tiene una forma reconocible en el √∫ltimo grupo;  realiza un "reinicio" del cartucho para que el primer grupo reciba los datos a continuaci√≥n.  Esta se√±al tambi√©n se puede utilizar para evitar grupos de boquillas en el orden inverso;  Esto es √∫til cuando el cabezal de impresi√≥n se mueve de izquierda a derecha y de derecha a izquierda.  Aunque la segunda patente describe c√≥mo funciona esto, decid√≠ simplemente codificar la transici√≥n al siguiente grupo y restablecer las se√±ales mostradas en mis im√°genes por la l√≠nea csync. <br><br>  Tenga en cuenta que todo esto sucede a una velocidad bastante alta;  El retraso entre los dos bordes de la se√±al DCLK es de aproximadamente 0.4 Œºs, y la distancia entre los grupos es de aproximadamente 4 Œºs. <br><br>  Ahora sabemos que cada bit en estos tres buses de datos de 14 bytes contiene un comando de operaci√≥n para una boquilla.  Si el bit es 0, entonces se activa la boquilla correspondiente;  si es igual a 1, entonces la boquilla no funciona.  Lo que no sabemos es la correspondencia entre brocas y boquillas.  Si viste la presentaci√≥n, entonces sabes c√≥mo me las arregl√© para resolverla: imprim√≠ un patr√≥n conocido en una impresora que funcionaba, interceptando las se√±ales usando un analizador l√≥gico, y luego descubr√≠ cu√°l deber√≠a ser el orden de las se√±ales para decodificar las se√±ales a la imagen original. <br>  . <br>  Desafortunadamente, la coincidencia de bits con boquillas parece bastante constante, pero no completamente l√≥gica.  Parece que esto se debe principalmente a la necesidad de mover f√≠sicamente las boquillas simult√°neamente a una distancia suficiente (para evitar el sobrecalentamiento o la aparici√≥n de un vac√≠o local en el tanque de tinta).  Adem√°s, tambi√©n descubr√≠ que la facilidad de enrutar las se√±ales en un cartucho puede hacer que la coincidencia de boquillas y boquillas sea bastante confusa.  En mi firmware, simplemente implement√© esta asignaci√≥n como un conjunto de tablas de b√∫squeda. <br><br><h1>  Electr√≥nica </h1><br>  Ahora que sabemos c√≥mo funcionan las se√±ales, podemos controlar el cartucho de la impresora con un microcontrolador simple, ¬øverdad?  Bueno, no de inmediato.  El cartucho de la impresora no utiliza una l√≥gica simple de 5 V o 3,3 V. Los buses de datos est√°n controlados por buses de 16 V o 9 V. Los buses de alimentaci√≥n tambi√©n est√°n controlados por 16 V y, de hecho, dependiendo del n√∫mero de boquillas activadas, se pueden conectar a la corriente de la fuente de alimentaci√≥n. .  Necesitamos realizar una conversi√≥n de nivel. <br><br>  Como convertidor de nivel, eleg√≠ el MC14504.  Este es un viejo chip de conversi√≥n de nivel hexadecimal unidireccional que puede aumentar el voltaje a 18 V. Aunque este chip tambi√©n funciona, mirando hacia atr√°s, puedo decir que esta no era la mejor opci√≥n: solo puede generar unos pocos mA y tiene un retraso de propagaci√≥n bastante grande.  Creo que proporciona un retraso de algunas se√±ales de salida dependiendo del cartucho y la carga aplicada a las salidas del chip.  Tengo al menos un cartucho que necesita un peque√±o ajuste de tiempo para que las se√±ales funcionen, y creo que esa es la raz√≥n.  Desafortunadamente, los convertidores de nivel de 16V ya no son tan accesibles hoy, as√≠ que no puedo reemplazarlo por algo mejor.  Sin embargo, este chip cl√°sico con un peque√±o ajuste es suficiente. <br><br>  Con los autobuses el√©ctricos, las cosas son un poco m√°s complicadas.  Adem√°s del hecho de que estos contactos toman una gran parte de la corriente, tambi√©n est√°n conectados directamente a las resistencias de las boquillas incluidas: si por alguna raz√≥n la alimentaci√≥n se suministra durante demasiado tiempo, estas peque√±as resistencias se quemar√°n y la boquilla fallar√° por completo.  Adem√°s, este "demasiado tiempo" es bastante simple de lograr: es suficiente para encender las boquillas por solo unos pocos microsegundos, y si suministra energ√≠a por solo un milisegundo, simplemente se evaporar√°n, rompiendo por completo la boquilla.  Para evitar que esto suceda debido a un error de software o una mala conexi√≥n, agregu√© una l√≥gica de hardware que garantiza que el pulso se limite a un peque√±o m√∫ltiplo de 10 Œºs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/802/293/dd0/802293dd067f458f2505e2db8036ab96.png"></div><br>  En el primer prototipo, dej√© varios convertidores de nivel y no sab√≠a c√≥mo funcionar√≠a el software, as√≠ que resolv√≠ el problema con un multivibrador real de ciclo √∫nico.  En este circuito, se utilizan dos multivibradores en el 74HC123, generando pulsos, cuyo ancho se establece mediante la combinaci√≥n de R / C conectado al pin RCExt.  El pulso resultante se genera solo con una se√±al de entrada creciente, por lo que una se√±al constantemente alta no conducir√° a nada m√°s que un pulso de salida falso pero definido con precisi√≥n.  Despu√©s de eso, el canal MC14504 se usa como un convertidor de nivel para elevar el voltaje a +16 V, y el transistor MOS del canal P proporciona la corriente necesaria. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/99b/b17/97f/99bb1797fd10e01c1c8f3a7ddceb6c8f.png"></div><br>  En la segunda placa de circuito impreso, me di cuenta de que si cambio la l√≥gica de los contactos de alimentaci√≥n para que no utilicen dos canales del circuito de cambio de nivel, solo dos chips MC14504 ser√°n suficientes.  Ahora tengo suficiente control program√°tico sobre el ancho del pulso, pero todav√≠a quiero tener protecci√≥n contra una se√±al de contacto de entrada constantemente alta.  Aqu√≠ est√° el diagrama al que vine.  Funciona as√≠: en el estado normal con una se√±al baja PWRB_IN, el condensador C28 est√° vac√≠o, porque cualquier voltaje en √©l fluye lentamente a lo largo de R20 y R21: la puerta del transistor Q4 es alta, y PWRB_OUT se desconecta del bus de alimentaci√≥n de 16 V. Tan pronto como alto en PWRB_IN aparece alto se√±al, Q6 tierra un extremo de C28;  Dado que el voltaje a trav√©s de √©l es 0 V, inicialmente esto tambi√©n baja su otro lado, que est√° conectado a la puerta Q4.  Tirar del obturador Q4 hacia abajo lo hace conductivo, y esto permite que la corriente fluya de +16 V a PWRB_OUT.  En el estado normal, PWRB_IN vuelve al estado bajo lo suficientemente r√°pido, cerrando la puerta Q4 e interrumpiendo la corriente.  Sin embargo, mientras PWRB_IN es bajo, el C28 se est√° cargando lentamente: un lado est√° conectado a tierra a Q6 y el otro est√° conectado a 16 V a trav√©s de R21 y R31.  Cuando el condensador est√° suficientemente cargado, Q4 "ve" un nivel alto en su puerta y desconecta la corriente en PWRB_OUT, incluso si PWRB_IN todav√≠a est√° en un estado de se√±al alta.  Este mecanismo garantiza que PWRB_OUT solo suministre energ√≠a durante un per√≠odo de tiempo limitado. <br><br>  El circuito tambi√©n tiene una peque√±a resistencia conectada en serie con el bus de alimentaci√≥n de 16 V (R31), as√≠ como un peque√±o condensador conectado en paralelo con la se√±al de salida (C15).  Son necesarios para "aliviar el voltaje" de la se√±al de potencia: sin ellos, un Q4 de encendido y apagado agudo inducir√° una gran cantidad de interferencia electromagn√©tica, distorsionando las se√±ales transmitidas al cartucho. <br><br>  Aparte de esta l√≥gica, no se necesita nada m√°s.  Obviamente, se necesitan convertidores de nivel de +9 V y +16 V. La fuente de alimentaci√≥n de +9 V deber√≠a ser bastante modesta: no not√© que estos buses generalmente usaban m√°s de unos pocos mA.  Dado que alimenta las resistencias de la boquilla, la fuente de 16 V deber√≠a ser un poco m√°s fuerte: lo hice para que la m√≠a pudiera proporcionar al menos 400 mA de forma continua, y tambi√©n agregu√© bastante capacitancia de desacoplamiento. <br><br>  Finalmente, la carga m√°s importante del procesamiento de im√°genes y la generaci√≥n de se√±ales recae en el microcontrolador.  Para este prop√≥sito, eleg√≠ ESP32, principalmente porque tom√© algunas piezas del trabajo, pero tambi√©n porque tiene un controlador I2S bastante potente que utiliza un modo paralelo muy conveniente: de hecho, solo podemos configurar la frecuencia del reloj, especifique el √°rea de memoria para el controlador I2S y generar√° estos bytes en paralelo.  Gracias a esto, es ideal para generar las se√±ales de control necesarias;  El hecho de que tenga dos potentes n√∫cleos de 240 MHz tambi√©n ayuda en el procesamiento de im√°genes. <br><br><h1>  Prototipo </h1><br>  Por supuesto, varios convertidores y transistores MOS por s√≠ solos no pueden convertirse en un controlador de cartucho de impresora que funcione.  Por lo tanto, cre√© un dispositivo separado, concebido como una plataforma para experimentar con un cartucho y sus capacidades.  Tiene un m√≥dulo ESP32, la l√≥gica necesaria para controlar el cartucho y varias fuentes de alimentaci√≥n para trabajar desde una celda de iones de litio.  Tambi√©n est√° equipado con varios sensores dise√±ados para compensar los movimientos imperfectos de las manos de una persona, as√≠ como botones y una pantalla que proporciona informaci√≥n sobre las im√°genes impresas.  Echemos un vistazo a los componentes, tal vez para alguien se convierta en una inspiraci√≥n para la pirater√≠a de cartuchos: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4d/0e1/214/d4d0e12142a11a23f9e31aebcba561ae.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/054/607/540/054607540b0ff66f45b62cbc3fec15cb.png"></div><br>  Comencemos con la fuente de energ√≠a.  La energ√≠a se suministra desde una celda de iones de litio y se convierte a 3.3 V, 16 V y 9 V. Se requiere un voltaje de 3.3 V para los sensores y ESP32;  Se genera utilizando un simple regulador LD78 HT7833.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los voltajes de 9 V y 16 V son generados por dos convertidores de impulso basados ‚Äã‚Äãen el chip convertidor de impulso XR2203. Tenga en cuenta que una fuente de alimentaci√≥n de 16 V debe trabajar mucho m√°s que una fuente de alimentaci√≥n de 9 V; el cartucho consume de 9 V solo unos pocos miliamperios. Se crearon dos convertidores de impulso en el mismo chip simplemente porque fue suficiente para m√≠ comprar un tipo de componente para ambos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dado que todo el dispositivo est√° alimentado por una celda de iones de litio, necesitamos cargarlo de alguna manera. Me queda poco espacio, as√≠ que agregu√© un cargador de bater√≠a de iones de litio basado en TP4056 para poder recargar la bater√≠a desde cualquier fuente de alimentaci√≥n USB.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ad/aed/33b/1adaed33b3e6be049b8ea9d8fc255575.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La inteligencia del dispositivo es proporcionada por el m√≥dulo ESP-Wrover32. </font><font style="vertical-align: inherit;">Utilic√© la opci√≥n con 8 MiB de memoria flash y 8 MiB de RAM SPI; </font><font style="vertical-align: inherit;">suficiente para realizar un procesamiento de imagen complejo. </font><font style="vertical-align: inherit;">El m√≥dulo tambi√©n tiene un conector de 5 pines que le permite programar y depurar el firmware, as√≠ como dos botones que se pueden usar para seleccionar opciones y comenzar a renderizar cuando el firmware se est√° ejecutando.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/080/061/edb/080061edb43ce76036ca339ce4168de7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las opciones seleccionadas se muestran en una peque√±a pantalla LCD a color de 160x80. </font><font style="vertical-align: inherit;">La pantalla tiene una conexi√≥n SPI y puede controlarse directamente por uno de los conectores perif√©ricos SPI disponibles en el ESP32.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c1b/7b3/b34/c1b7b3b34741f26232e4cc0686195d29.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es la interfaz del cartucho. </font><font style="vertical-align: inherit;">Como se indic√≥ anteriormente, no es particularmente complicado. </font><font style="vertical-align: inherit;">El nivel de todas las se√±ales es convertido por el par MC14504, uno para se√±ales de 9 V y otro para se√±ales de 16 V. Tambi√©n en el diagrama hay un circuito de cambio de nivel / protecci√≥n que controla buses de potencia dual.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/155/4c5/b7e/1554c5b7eb0ee9f845f605ead1906127.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9d/34c/a7f/d9d34ca7fde4f19bdc9bc7431525f7b8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f8f/02c/928/f8f02c928f1c353a9b12272b1971118c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ hay tres tipos de sensores que utilic√©. Todos ellos est√°n conectados mediante un bus I2C, es decir, en ESP32 ocupan solo dos GPIO. Esta es la unidad de sensor inercial MPU9250 (aceler√≥metro, giroscopio y br√∫jula digital) para medir el movimiento, tres sensores de distancia l√°ser VL53L0X (solo se muestra uno), dirigidos hacia arriba, izquierda y derecha. La idea es que al combinar esta informaci√≥n, es te√≥ricamente posible determinar la posici√≥n absoluta del cartucho. Esto es √∫til, por ejemplo, al dibujar im√°genes grandes con un movimiento de mano libre. El √∫ltimo es el sensor de color TCS3472. El sensor de color se encuentra al lado del LED blanco; se puede usar para "copiar" el color del sujeto o para compensar el color del medio en el que imprimimos.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2be/cb9/e3a/2becb9e3abd6af17cdc70f6b36f114a4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como necesitaba GPIO adicionales, conect√© un expansor GPIO al bus. Controla los buses de reinicio para los tres sensores de distancia, el bus de reinicio para la pantalla LCD, la inclusi√≥n de un convertidor de refuerzo y dos transistores MOS (no mostrados) que controlan el LED blanco utilizado para iluminar el objetivo del sensor de color y la luz de fondo de la pantalla LCD. Los sensores de distancia necesitan un bus de reinicio separado, ya que se encender√°n en la misma direcci√≥n I2C. Sin embargo, tienen un comando que cambia la direcci√≥n I2C despu√©s de que se enciende. Al encenderlos y moverlos uno por uno a diferentes direcciones I2C, puedo controlar los tres en el mismo bus I2C.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4e6/daf/fc5/4e6daffc5f3e191d8470724ea9fac785.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ est√° la placa de circuito que dise√±√© en funci√≥n del circuito. </font><font style="vertical-align: inherit;">Tiene una forma extra√±a, porque debe dividirse en cuatro placas separadas y "rodear" el cartucho de la impresora. </font><font style="vertical-align: inherit;">Est√°n conectados el√©ctrica y f√≠sicamente; </font><font style="vertical-align: inherit;">La ventaja de esto es que los fabricantes de placas de circuito impreso no consideran que dicho circuito sea cuatro placas separadas y solo tiene que pagar por una.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/be1/9c8/2ff/be19c82ff2d96aa49100c6608d06eba6.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otra ventaja es que puedo ensamblar el tablero como un elemento y luego probarlo cuando todos los componentes est√°n en el mismo plano. </font><font style="vertical-align: inherit;">Esto me permite no equilibrar cuidadosamente el dispositivo ensamblado durante la depuraci√≥n. </font><font style="vertical-align: inherit;">Una peque√±a nota: los sensores VL53L0X usan un rayo l√°ser infrarrojo; </font><font style="vertical-align: inherit;">Parece que es lo suficientemente fuerte como para romper el filtro de protecci√≥n contra la radiaci√≥n infrarroja en mi "espejo" y aparece en el marco como peque√±os puntos de luz p√∫rpura.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78b/dee/afd/78bdeeafddeac0cebecd298e836e42d1.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y cu√°l ser√° el resultado final despu√©s del montaje. Tenga en cuenta que cuando las tablas se separaron, las conexiones entre ellas se rompieron. Las placas tienen peque√±as almohadillas de soldadura a las que puede soldar un peque√±o trozo de alambre y doblarlo. Obviamente, para el nivel de producci√≥n, necesitar√° usar tecnolog√≠as como FPC PCB o PCB r√≠gido flexible, pero para un prototipo barato esto funcionar√°. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si desea utilizar este prototipo como referencia o experimentar con √©l, puede descargar </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">los archivos del proyecto KiCad</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tambi√©n hay diagramas pdf y gerber en el mismo lugar) y ensamblarlo usted mismo, o usar sus subsistemas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como se trata de un prototipo, el software es bastante ... heterog√©neo. </font><font style="vertical-align: inherit;">Dar√© un enlace al repositorio en el que se desarroll√≥, pero tenga en cuenta que este es un elenco de casi todo el ciclo de desarrollo, por lo que contiene todo en orden, desde las grabaciones de se√±al del analizador l√≥gico hasta el Nyancat impreso y Mona Lisa. </font><font style="vertical-align: inherit;">Desafortunadamente, es por eso que el c√≥digo es un caos casi indocumentado con rutas a medio completar y restos del c√≥digo anterior. </font><font style="vertical-align: inherit;">Si todav√≠a quieres aprenderlo, puedes clonar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> URL </font><font style="vertical-align: inherit;">en git </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, si est√° m√°s interesado en el software que puede administrar f√°cilmente el cartucho de la impresora utilizando ESP32 (y contiene procedimientos √∫tiles para controlarlo a trav√©s de otro microcontrolador), contin√∫e leyendo.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Versi√≥n m√≠nima de trabajo </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para facilitar a otros artesanos el uso de cartuchos de impresora en sus propios proyectos, tambi√©n cre√© una versi√≥n m√≠nima del controlador. Carece de soporte para todos los perif√©ricos y hacks del c√≥digo prototipo, pero la arquitectura se limpia y, por lo tanto, puede convertirse en una base s√≥lida para un mayor desarrollo. El controlador tiene un ejemplo simple de un programa que se imprime cuando se presiona el bot√≥n ¬°HOLA! cartucho de color o negro. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No </font><a href=""><font style="vertical-align: inherit;">cre√©</font></a><font style="vertical-align: inherit;"> un equipo especializado para ello, pero de hecho puedes reutilizar el hardware de la secci√≥n anterior: solo toma una </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fuente de alimentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP32</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">convertidores de nivel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y aplicarlos en su propio esquema. Tambi√©n puede usar completamente el prototipo descrito en la secci√≥n anterior: es suficiente simplemente proporcionar una se√±al alta constante BOOST_EN para que los convertidores de refuerzo de 9 V / 16 V est√©n siempre encendidos. (De esta forma depur√© el c√≥digo). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El c√≥digo en s√≠ se puede encontrar en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , est√° estructurado de manera est√°ndar para el proyecto ESP-IDF. El c√≥digo del controlador principal est√° en los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">componentes / printcart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; c√≥digo del bot√≥n de leer y decidir cu√°ndo encender la boquilla, as√≠ como el c√≥digo de inicializaci√≥n contenida en el </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ main.c principal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En el ejemplo, los datos de la boquilla se leen desde la imagen rgb incrustada. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sistema tiene la siguiente arquitectura: </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">printcart_i2s.c</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contiene un controlador simple para el modo paralelo de los conectores perif√©ricos I2S del controlador ESP32. Selecciona dos buffers y transfiere de las palabras de 16 bits de buffers con una frecuencia de 3.3 MHz a contactos GPIO (m√°ximo 16 contactos). (Aqu√≠, estos pines GPIO est√°n conectados a los convertidores de nivel que controlan el cartucho). Cada vez que el b√∫fer est√° vac√≠o, el controlador ejecuta un controlador de eventos para llenar el b√∫fer. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El controlador de eventos se encuentra en </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">printcart_buffer_filler.c</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Recibe datos de inyectores de la cola de datos de inyectores y los pasa a una funci√≥n en </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">printcart_genwaveform.c</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que por plantilla convierte estos datos de inyectores en se√±ales. La plantilla depende del tipo de cartucho (color o negro), y puede cambiarla cargando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tools / waveform_editor.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el navegador </font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por otro lado, la cola de datos de los inyectores es el procedimiento de bucle en main.c. Espera a que se presione un bot√≥n, y cuando se presiona, genera datos de boquilla al analizar un archivo de imagen simple convertido en datos rgb sin procesar e incrustado en un archivo binario cosido, escaneando los datos de izquierda a derecha. Gracias a esto, puede presionar el bot√≥n, deslizar el cartucho sobre el papel e imprimir el contenido de la imagen como una tira de tinta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El resultado final se parece a esto:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/624/9e9/bfc/6249e9bfca9c9fc52ff3da8f581db653.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es muy notable aqu√≠ que el cartucho negro imprime aproximadamente el doble de altura que el color (0.7 cm y 1.5 cm), por lo que si no necesita color y necesita buena visibilidad, entonces es mejor elegir un cartucho negro. Tambi√©n vale la pena se√±alar que en main.c se define que cambia entre dos cartuchos; El c√≥digo puede funcionar con ambos. No est√° del todo claro por qu√© hay l√≠neas borrosas en la imagen negra: tal vez hay un error en mi se√±al, o tal vez el cartucho est√° un poco cansado de probar. Sea como fuere, los datos impresos son hermosos y bien reconocibles.</font></font><br><br><h1>  En conclusi√≥n </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La ingenier√≠a inversa de estos cartuchos de impresora fue una larga aventura, pero al final mi trabajo fue fruct√≠fero; </font><font style="vertical-align: inherit;">aunque quedan algunos acertijos (por ejemplo: ¬øqu√© hace el contacto de ID?), creo que he entendido bien los acertijos de las se√±ales utilizadas en el cartucho. </font><font style="vertical-align: inherit;">Espero que al publicar el c√≥digo y los diagramas de este proyecto, agregue el uso de cartuchos de impresora al conjunto de herramientas de artesanos, piratas inform√°ticos y creadores. </font><font style="vertical-align: inherit;">No puedo esperar para ver ejemplos de uso interesantes que la comunidad presentar√°. </font><font style="vertical-align: inherit;">Si logra hacer algo interesante con mi trabajo, aseg√∫rese de enviarme un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mensaje</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En cuanto a mi intenci√≥n de crear arte ... umm ... ¬øse puede llamar as√≠?</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/491/722/895/49172289578ace93f8bd04a051d1866e.jpg"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443582/">https://habr.com/ru/post/443582/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443570/index.html">No esper√°bamos esto: una carta abierta anual de Bill y Melinda Gates</a></li>
<li><a href="../443572/index.html">Otra forma de escribir aplicaciones multiplataforma: elementos internos de Neutralinojs y comparaci√≥n con Electron y NW.js</a></li>
<li><a href="../443574/index.html">Depurar aplicaciones CLI angulares en VSCode usando la vista previa del navegador</a></li>
<li><a href="../443576/index.html">[Peter] Contenedores y distribuciones - JUG.ru reuni√≥n con Dmitry Chuyko y Alexander Belokrylov</a></li>
<li><a href="../443578/index.html">Primeros informes sobre PHDays: intercepci√≥n de videoconferencia, nueva versi√≥n de GhostTunnel, ataques a Java Card</a></li>
<li><a href="../443584/index.html">Est√© atento a los estrenos de pel√≠culas digitales de alta calidad sin problemas</a></li>
<li><a href="../443586/index.html">GeekBrains lanza marat√≥n de trabajo remoto en l√≠nea gratuito</a></li>
<li><a href="../443588/index.html">El profesor del Instituto de Tecnolog√≠a de Massachusetts revela el futuro de las pr√≥tesis en TED</a></li>
<li><a href="../443590/index.html">Ciencia de datos: predicci√≥n de eventos empresariales para mejorar el servicio</a></li>
<li><a href="../443592/index.html">RFID front end ISO 11785 est√°ndar de un antiguo receptor de FM y desechos de elevador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>