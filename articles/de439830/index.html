<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëèüèæ üõÉ üì≠ Inside Quake: Immer Alternativen in Betracht ziehen üôéüèø üìÑ üéóÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Programmierer Michael Abrash, der Mitte der 90er Jahre von John Carmack eingeladen wurde, am Motor des ersten Bebens zu arbeiten, schrieb w√§hrend ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Inside Quake: Immer Alternativen in Betracht ziehen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439830/"><div style="text-align:center;"><img src="https://steemitimages.com/p/USgKopgPmA7SYpFB96Gheb9tK3fTW7Ck3gsGQ8tb7V8UbQnEKC6SXDMMhx5idgb5LV6sCECsXeG3Sjto2AXKzN" alt="Bild"></div><br>  <i>Der Programmierer Michael Abrash, der Mitte der 90er Jahre von John Carmack eingeladen wurde, am Motor des ersten Bebens zu arbeiten, schrieb w√§hrend des Entwicklungsprozesses eine Reihe von Artikeln.</i>  <i>Dies ist die zweite Spalte in dieser Reihe.</i>  <i>Die √úbersetzung des ersten ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .</i> <br><br>  Ich muss zugeben: Ich habe den klassischen Rock satt.  Das letzte Mal vor ungef√§hr 20 Jahren war ich gl√ºcklich, etwas von Cars oder Boston zu h√∂ren.  Au√üerdem hat mich Bob Seager und Queen, ganz zu schweigen von Elvis, nie besonders angezogen, so wenig hat sich ge√§ndert.  Aber ich erkannte, dass sich etwas √§nderte, als ich das Radio umschalten wollte, als ich Allman Brothers oder Steely Dan oder Pink Floyd oder, Gott, vergib mir, die Beatles h√∂rte (aber nur bei Dingen wie ‚ÄûHallo Auf Wiedersehen‚Äú und ‚ÄûIch werde Weinen Sie stattdessen, nicht Ticket to Ride oder Ein Tag im Leben; so weit bin ich noch nicht gegangen).  Es dauerte nicht lange, die Gr√ºnde daf√ºr zu finden;  Ich habe ein Vierteljahrhundert lang dieselben Songs geh√∂rt und bin einfach m√ºde geworden. <br><br>  Ich erz√§hle es so, denn als meine Tochter und ich eines Abends aus dem Caf√© fuhren, wurde der Radiosender ‚ÄûEs gibt keine Alternative‚Äú zum ersten Mal im Auto eingeschaltet. <br><br>  Wir sprechen von einem zehnj√§hrigen M√§dchen, das mit einer st√§ndigen Di√§t alter Hits aufgewachsen ist.  Sie mag Melodien, eing√§ngige Lieder und gute S√§nger.  Sie werden nichts davon finden, wenn Sie eine alternative Rockstation h√∂ren.  Daher ist es nicht verwunderlich, dass sie beim Einschalten des Radios zuerst sagte: "Fu!" <br><br>  Aber Folgendes hat mich √ºberrascht: Nachdem sie eine Weile zugeh√∂rt hatte, sagte sie: "Wei√üt du, Papa, aber das ist wirklich interessant." <br><br>  Dies deutete mich nicht nur darauf hin, welche Art von Musik im ganzen Haus rumpeln w√ºrde, wenn sie ein Teenager wurde.  Ihre schnelle √úbernahme von Alternative Rock (verglichen mit meiner Faszination f√ºr die Musik meiner eigenen Jugend seit zehn Jahren) erinnerte mich an etwas, das leicht vergessen wird, wenn man √§lter wird und sich der Lebensstil festsetzt.  Dies erinnerte mich daran, dass es notwendig war, offen zu bleiben und darauf vorbereitet zu sein, neue Dinge auszuprobieren. <a name="habracut"></a>  Programmierer neigen dazu, an vertraute Ans√§tze gebunden zu sein, und neigen dazu, sie zu verwenden, wenn sie die Aufgaben angemessen bew√§ltigen.  Aber es gibt immer Alternativen zur Programmierung, und ich finde, dass es sich oft lohnt, sie zu erkunden. <br><br>  Aber angesichts der sich st√§ndig √§ndernden Natur von <u>Quake</u> sollte ich eine solche Erinnerung wirklich nicht brauchen. <br><br><h2>  Kreativer Stream </h2><br>  Im Januar habe ich einen kreativen Stream beschrieben, der John Carmack dazu veranlasste, vorberechnete PVS-Polygone (Potential Visible Set) f√ºr jeden m√∂glichen Standpunkt in <u>Quake</u> (einem Spiel, das wir gemeinsam in id Software entwickeln) zu verwenden.  Vorl√§ufige Berechnung von PVS bedeutet, dass wir nicht viel Zeit damit verbringen m√ºssen, die Datenbank der Polygone zu durchsuchen, die aus der aktuellen Sicht in der Weltdatenbank sichtbar ist, sondern einfach alle Polygone in der PVS von hinten nach vorne zeichnen k√∂nnen (die Reihenfolge aus dem BSP-Baum der Welt √ºbernehmen; Diskussion √ºber BSP- Sehen Sie sich die B√§ume in unseren Spalten f√ºr Mai, Juli und November 1995 an und lassen Sie die Szene vollst√§ndig korrekt rendern, ohne zu suchen. Dadurch kann der letzte Schritt der Entfernung versteckter Oberfl√§chen (HSR) r√ºckw√§rts gerendert werden.  Es war eine gro√üartige Idee, aber f√ºr die Quake-Architektur ist der Pfad noch nicht abgeschlossen. <br><br><h2>  Bewegte Objekte zeichnen </h2><br>  Zum Beispiel gab es immer noch eine Frage, wie sich bewegende Objekte richtig sortiert und gezeichnet werden k√∂nnen.  Tats√§chlich wurde diese Frage nach der Januar-Kolumne am meisten gestellt, also werde ich ihr Zeit geben.  Das Hauptproblem besteht darin, dass ein sich bewegendes Modell in mehrere BSP-Bl√§tter fallen kann. Wenn sich das Modell bewegt, √§ndern sich diese Bl√§tter.  Zusammen mit der M√∂glichkeit, mehrere Modelle in einem Blatt zu finden, bedeutet dies, dass es keine einfache M√∂glichkeit gibt, die BSP-Reihenfolge zu verwenden, um Modelle in einer korrekt sortierten Reihenfolge zu zeichnen.  Als ich die Januar-Kolumne schrieb, zeichneten wir Sprites (wie Explosionen), bewegliche BSP-Modelle (wie T√ºren) und polygonale Modelle (wie Monster), schnitten sie mit den Bl√§ttern ab, die sie ber√ºhrten, und zeichneten dann die entsprechenden Teile, wenn jedes BSP-Blatt erreicht war Sie sind dran, wenn Sie von hinten nach vorne gehen.  Dies l√∂ste jedoch nicht das Problem, mehrere sich bewegende Modelle in einem Blatt relativ zueinander zu sortieren, und hinterlie√ü auch unangenehme Probleme bei komplexen polygonalen Modellen. <br><br>  John hat das Sortierproblem f√ºr Sprites und Polygonmodelle auf √ºberraschend einfache Weise gel√∂st: Jetzt schreiben wir sie in den Z-Puffer.  (Das hei√üt, bevor wir jedes Pixel zeichnen, vergleichen wir den Abstand oder z mit dem z-Wert des bereits auf dem Bildschirm angezeigten Pixels. Ein neues Pixel wird nur gezeichnet, wenn es n√§her als das vorhandene Pixel ist.) Zuerst zeichnen wir die Hauptwelt - W√§nde, Decken usw. so.  Zu diesem Zeitpunkt wird kein <u>Test des</u> Z-Puffers verwendet (wie wir bald sehen werden, wird die Definition der sichtbaren Oberfl√§chen der Welt auf andere Weise durchgef√ºhrt);  Wir <u>f√ºllen den</u> Z-Puffer jedoch <u>mit</u> Z-Werten (tats√§chlich 1 / Z-Werte, wie unten beschrieben) f√ºr alle Pixel auf der Welt.  Das F√ºllen eines Z-Puffers ist ein viel schnellerer Prozess als das Z-Puffern der ganzen Welt, da es kein Lesen, keine Vergleiche, nur das Schreiben von Z-Werten gibt.  Nachdem wir das Zeichnen abgeschlossen und den Z-Puffer der Welt ausgef√ºllt haben, k√∂nnen wir einfach Sprites und polygonale Modelle mit Z-Puffer zeichnen und die perfekte Sortierung erhalten. <br><br>  Bei Verwendung des Z-Puffers stellen sich zwangsl√§ufig Fragen: Wie wirkt sich dies auf den belegten Speicher und die Leistung aus?  Bei einer Aufl√∂sung von 320 x 200 werden 128 KB Speicher ben√∂tigt, was nicht trivial ist, aber nicht so sehr f√ºr ein Spiel, f√ºr dessen Funktion 8 MB erforderlich sind.  Auswirkungen auf die Leistung: ca. 10% beim F√ºllen des Z-Puffers der Welt und ca. 20% (Indikatoren variieren stark) beim Rendern von Sprites und polygonalen Modellen.  Im Gegenzug erhalten wir eine perfekt sortierte Welt sowie die M√∂glichkeit, zus√§tzliche Effekte zu erzielen, z. B. Explosionen und Rauch von Partikeln, da Sie mit dem Z-Puffer diese Effekte einfach in der Welt sortieren k√∂nnen.  Im Allgemeinen hat die Verwendung von Z-Buffer die visuelle Qualit√§t und Flexibilit√§t der Quake-Engine erheblich verbessert und den Code auf Kosten angemessener Speicherkosten und Leistung erheblich vereinfacht. <br><br><h2>  Nivellierung und Steigerung der Produktivit√§t </h2><br>  Wie ich oben sagte, zeichnet die <u>Quake-</u> Architektur zuerst die Welt selbst, ohne den Z-Puffer zu lesen oder zu vergleichen, und f√ºllt den Z-Puffer nur mit den Werten der Polygone der Welt in z.  Danach werden sich bewegende Objekte mit vollst√§ndiger Z-Pufferung √ºber die Welt gezeichnet.  Bisher habe ich nur dar√ºber gesprochen, wie man sich bewegende Objekte zeichnet.  Im Rest der Spalte werde ich √ºber einen anderen Teil der Rendering-Gleichung sprechen - das Zeichnen der Welt selbst, wenn die ganze Welt als ein BSP-Baum gespeichert ist und sich nie bewegt. <br><br>  Wie Sie sich aus der Januar-Kolumne erinnern k√∂nnen, waren wir sowohl √ºber die Rohleistung als auch √ºber die Mittelung besorgt.  Das hei√üt, wir wollten, dass der Rendering-Code so schnell wie m√∂glich und gleichzeitig ausgef√ºhrt wird, damit der Unterschied zwischen der Rendergeschwindigkeit der mittleren Szene und der langsamsten beim Rendern der Szene so gering wie m√∂glich ist.  Es gibt nichts Gutes in den durchschnittlichen 30 Bildern pro Sekunde, wenn 10% der Szenen mit 5 fps gezeichnet werden, da das Ruckeln in solchen Szenen im Vergleich zur durchschnittlichen Szene extrem auff√§llig ist.  In 100% der F√§lle ist es besser, die Frequenz mit 15 Bildern pro Sekunde zu mitteln, obwohl die durchschnittliche Rendergeschwindigkeit halb so hoch ist. <br><br>  Vorberechnete PVS waren ein wichtiger Schritt in Richtung einer h√∂heren und ausgewogeneren Leistung, da keine sichtbaren Polygone mehr bestimmt werden mussten - eine eher langsame Phase, die sich in den komplexesten Szenen am schlechtesten zeigte.  Trotzdem enthalten vorberechnete PVS an einigen Orten mit realen Spielstufen f√ºnfmal mehr Polygone als tats√§chlich gesehen wird.  In Verbindung mit der Entfernung von r√ºckw√§rts versteckten Oberfl√§chen (HSR) wurden ‚Äûhei√üe Zonen‚Äú geschaffen, in denen die Bildrate sp√ºrbar reduziert wurde.  Hunderte von Polygonen wurden von hinten nach vorne gezogen, und die meisten von ihnen wurden sofort von engeren Polygonen neu gezeichnet.  Die Rohleistung insgesamt verringerte sich ebenfalls um durchschnittlich 50% der Neuzeichnung, die durch das Rendern aller Elemente im PVS verursacht wurde.  Obwohl das Rendern von R√ºckw√§rts-PVS-Sets als letzte Stufe des HSR fungierte und eine Verbesserung gegen√ºber der vorherigen Architektur darstellte, war es daher nicht ideal.  John dachte, es g√§be wahrscheinlich einen besseren Weg, PVS zu verwenden, als von vorne nach hinten zu zeichnen. <br><br>  Und er wurde tats√§chlich gefunden. <br><br><h2>  Sortierte Intervalle </h2><br>  Die ideale letzte HSR-Stufe f√ºr Quake bestand darin, alle Polygone im PVS zu verwerfen, die sich tats√§chlich als unsichtbar herausstellten, und nur die sichtbaren Pixel der verbleibenden Polygone zu zeichnen, ohne sie neu zu zeichnen.  Das hei√üt, jedes Pixel w√ºrde nat√ºrlich genau einmal und ohne Leistungsverlust gezeichnet.  Eine L√∂sung (die jedoch Kosten erfordert) besteht darin, von vorne nach hinten zu zeichnen, den Bereich zu speichern, der die aktuell √ºberlappenden Teile des Bildschirms beschreibt, und jedes Polygon vor dem Rendern mit den R√§ndern dieses Bereichs abzuschneiden.  Es klingt vielversprechend, erinnert aber in etwa an die B√ºndelbauml√∂sung, die ich in der Januar-Kolumne beschrieben habe.  Wie wir herausgefunden haben, erfordert dieser Ansatz eine Verschwendung zus√§tzlicher Ressourcen und hat ernsthafte Probleme mit dem Lastausgleich. <br><br>  Sie k√∂nnen es viel besser machen, wenn Sie den letzten HSR-Schritt von der Polygonebene auf die Intervallebene verschieben und die L√∂sung mit sortierten Intervallen verwenden.  Im Wesentlichen besteht dieser Ansatz darin, jedes Polygon in eine Reihe von Intervallen umzuwandeln, wie in Abbildung 1 gezeigt, und anschlie√üend die Intervalle relativ zueinander zu sortieren und abzuschneiden, bis nur noch sichtbare Teile der sichtbaren Intervalle zum Rendern √ºbrig bleiben, wie in Abbildung 2 dargestellt Sehr √§hnlich der Z-Pufferung (die, wie oben erw√§hnt, zu langsam ist, um beim Rendern der Welt verwendet zu werden, obwohl sie f√ºr kleinere sich bewegende Objekte geeignet ist), aber es gibt wichtige Unterschiede.  Im Gegensatz zur Z-Pufferung werden nur die sichtbaren Teile der sichtbaren Intervalle Pixel f√ºr Pixel gescannt (obwohl alle Kanten der Polygone noch gerastert werden m√ºssen).  Noch besser ist, dass die durch Z-Pufferung f√ºr jedes Pixel durchgef√ºhrte Sortierung zu einer Intervalloperation mit sortierten Intervallen wird, und da eine integrale Eigenschaft der Intervallliste die Verbundenheit ist, wird jede Kante nur relativ zu einigen Intervallen in derselben Zeile sortiert und nur um einige Intervalle abgeschnitten, wenn horizontale √úberlagerung.  Obwohl die Verarbeitung komplexer Szenen immer noch l√§nger dauerte als einfache, waren die schlimmsten F√§lle nicht so schlimm wie bei der Verwendung von Beam-B√§umen oder beim Sortieren von hinten nach vorne, da keine Neuzeichnung und Suche nach versteckten Pixeln erfolgt, die Komplexit√§t durch die Pixelaufl√∂sung begrenzt ist und die Intervallkonnektivit√§t die Sortierung der schlimmsten begrenzt F√§lle in einem beliebigen Bereich des Bildschirms.  Als Bonus erfolgt die Ausgabe sortierter Intervalle in der Form, die ein Rasterizer auf niedriger Ebene ben√∂tigt: im Format einer Reihe von Intervalldeskriptoren, von denen jede aus einer Koordinate des Anfangs und der L√§nge besteht. <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig1.gif"><br><br>  <i>Intervallgenerierung</i> <br><br>  Kurz gesagt, die L√∂sung mit sortierten Intervallen liegt ziemlich nahe an unseren urspr√ºnglichen Kriterien.  Obwohl es keine Kosten spart, sind sie immer noch nicht ganz schrecklich.  Das Neuzeichnen und Scannen von Pixeln der √ºberlappenden Teile der Polygone wird vollst√§ndig eliminiert, und im schlimmsten Fall kann die Leistung ausgeglichen werden.  Wir w√ºrden uns nicht nur auf sortierte Intervalle als Mechanismus zur Beseitigung verborgener Oberfl√§chen verlassen, sondern vorberechnete PVS reduzieren die Anzahl der Polygone auf ein Niveau, das sortierte Intervalle gut genug handhaben. <br><br>  Wir haben also den Ansatz gefunden, den wir brauchen.  es bleibt nur der Code zu schreiben und das ist vorbei, oder?  Ja und nein.  Der konzeptionelle Ansatz mit sortierten Intervallen ist einfach, aber √ºberraschend schwer zu implementieren: Sie m√ºssen einige wichtige Entwurfsentscheidungen treffen, es erfordert ein wenig Mathematik und es gibt listige Fallstricke.  Schauen wir uns zuerst die Designl√∂sungen an. <br><br><h2>  Rippen gegen Intervalle </h2><br>  Die erste Entscheidung besteht darin, auszuw√§hlen, was sortiert werden soll: Intervalle oder Kanten (beide Konzepte geh√∂ren zur allgemeinen Kategorie der ‚Äûsortierten Intervalle‚Äú).  Obwohl die Ergebnisse in beiden F√§llen gleich sind (eine Liste von Intervallen, die ohne erneutes Zeichnen gezeichnet werden m√ºssen), sind Implementierungen und Auswirkungen auf die Leistung sehr unterschiedlich, da Sortieren und Abschneiden durch sehr unterschiedliche Datenstrukturen durchgef√ºhrt werden. <br><br>  Beim Sortieren von Intervallen werden diese Intervalle in Speichersegmenten gespeichert, die nach x verkn√ºpften Listen sortiert sind, normalerweise ein Segment pro Rasterzeile.  Jedes Polygon wird wiederum in Intervalle gerastert, wie in Abbildung 1 gezeigt. Jedes Intervall wird sortiert und in das Speichersegment der Rasterzeile abgeschnitten, in der sich das Intervall befindet, wie in Abbildung 2 dargestellt, sodass zu jedem Zeitpunkt jedes Segment die n√§chsten angetroffenen Intervalle enth√§lt , immer ohne √úberlagerungen.  Bei diesem Ansatz m√ºssen nacheinander alle Intervalle f√ºr jedes Polygon generiert werden, und jedes Intervall wird sofort sortiert, abgeschnitten und dem entsprechenden Speichersegment hinzugef√ºgt. <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig2.gif"><br><br>  <i>Abbildung 2: Die Intervalle von Polygon A aus Abbildung 1 werden in Intervallen von Polygon B sortiert und abgeschnitten, w√§hrend sich Polygon A entlang der Z-Achse in einem konstanten Abstand von 100 und Polygon B entlang der Z-Achse in einem konstanten Abstand von 50 befindet (Polygon B befindet sich n√§her an der Kamera )</i> <br><br>  Beim Sortieren von Kanten werden diese Kanten in Speichersegmenten gespeichert, die nach x verkn√ºpften Listen entsprechend ihrer anf√§nglichen Rasterzeile sortiert sind.  Jedes Polygon ist wiederum in Kanten unterteilt, wodurch zusammen eine Liste aller Kanten in der Szene erstellt wird.  Wenn alle Kanten aller Polygone in der Sichtbarkeitspyramide zur Kantenliste hinzugef√ºgt werden, wird die gesamte Liste in einem Durchgang von oben nach unten von links nach rechts gescannt.  Eine Liste der aktiven Kantenlisten (AEL) wird gespeichert.  Bei jedem Schritt zu einer neuen Rasterlinie werden die Kanten, die auf dieser Rasterlinie angezeigt werden, aus dem AEL entfernt, die aktiven Kanten werden zu ihren neuen x-Koordinaten verschoben, die Kanten ab der neuen Rasterlinie werden zum AEL hinzugef√ºgt und die Kanten werden nach der aktuellen x-Koordinate sortiert. <br><br>  F√ºr jede Rasterzeile wird eine nach z sortierte aktive Polygonliste (APL) gespeichert.  Es geht in der Reihenfolge sortiert nach x AEL.  Beim Treffen mit jeder neuen Kante (dh wenn jedes Polygon beginnt oder endet, wenn es sich von links nach rechts bewegt) wird das ihm zugeordnete Polygon aktiviert und in APL sortiert (im Fall einer Startkante), wie in Abbildung 3 gezeigt, oder deaktiviert und aus APL gel√∂scht ( im Fall einer Hinterkante), wie in Abbildung 4 gezeigt. Wenn sich das n√§chstgelegene Polygon ge√§ndert hat (dh das n√§chste ist ein neues Polygon oder das n√§chstgelegene Polygon ist zu Ende), wird f√ºr das gerade nicht mehr am n√§chsten liegende Polygon ein Intervall ab dem Punkt erstellt, an dem sich das Polygon befindet  vym, weil es die am n√§chsten und enden x-Koordinate der aktuellen Kanten und die aktuellen x-Koordinate in der Deponie aufgenommen, die jetzt in der N√§he.  Diese gespeicherte Koordinate wird sp√§ter als Beginn des Intervalls verwendet, das erstellt wird, wenn das neue n√§chste Polygon nicht mehr vorne liegt. <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig3.gif"><br><br>  <i>Abbildung 3: Polygonaktivierung, wenn eine Startkante in AEL erkannt wird.</i> <br><br><img src="https://www.bluesnews.com/abrash/images/66_fig4.gif"><br><br>  <i>Abbildung 4: Deaktivierung des Polygons, wenn in AEL eine Hinterkante erkannt wird.</i> <br><br>  Machen Sie sich keine Sorgen, wenn Sie die oben genannten Punkte nicht vollst√§ndig verstehen.  Dies ist nur eine kurze √úbersicht √ºber das Sortieren von Kanten, damit der Rest der Spalte klarer wird.  Eine ausf√ºhrliche Erkl√§rung finden Sie in der n√§chsten Spalte. <br><br>  Die durch Sortieren von Kanten erzeugten Intervalle scheinen genau die gleichen Intervalle zu sein, die sich aus dem Sortieren der Intervalle ergeben w√ºrden.  Der Unterschied liegt in den Zwischendatenstrukturen, die zum Sortieren der Intervalle in der Szene verwendet werden.  Beim Sortieren von Kanten werden die Intervalle innerhalb der Kanten gespeichert, bis der endg√ºltige Satz sichtbarer Intervalle generiert wird. Daher wird das Sortieren, Trimmen und Erstellen von Intervallen durchgef√ºhrt, wenn jede Kante ein Polygon hinzuf√ºgt oder entfernt, basierend auf dem Status des durch die Kante definierten Intervalls und des Satzes aktiver Polygone.  Beim Sortieren von Intervallen werden die Intervalle sofort sichtbar, wenn jedes Polygon gerastert wird, und diese Zwischenintervalle werden dann sortiert und relativ zu den Intervallen in der Rasterlinie abgeschnitten, um die endg√ºltigen Intervalle zu erstellen.  Daher werden die Zust√§nde der Intervalle st√§ndig explizit festgelegt, und alle Arbeiten werden direkt in Intervallen ausgef√ºhrt. <br><br>  Sowohl die Intervallsortierung als auch die Kantensortierung funktionieren gut und wurden erfolgreich in kommerziellen Projekten eingesetzt.  F√ºr Quake haben wir uns f√ºr die Kantensortierung entschieden, auch weil sie effizienter zu sein scheint und eine hervorragende horizontale Konnektivit√§t aufweist, die die minimale Sortierzeit bietet, im Gegensatz zu der m√∂glicherweise kostspieligen Sortierung in verkn√ºpfte Listen, die beim Sortieren von Intervallen erforderlich sein kann.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein wichtigerer Grund war jedoch, dass wir beim Sortieren von Kanten die Kanten zwischen benachbarten Polygonen aufteilen k√∂nnen. Dies reduziert das Sortieren, Trimmen und Rastern von Kanten um etwa die H√§lfte und reduziert auch die Weltdatenbank erheblich, da die Kanten h√§ufig werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der letzte Vorteil beim Sortieren von Kanten besteht darin, dass nicht zwischen konvexen und konkaven Polygonen unterschieden wird. F√ºr die meisten Grafik-Engines ist dies kein sehr wichtiger Aspekt, aber bei Quake ist das Trimmen, Transformieren, Projizieren und Sortieren von Kanten zum Hauptengpass geworden. Daher tun wir alles, um die Anzahl der Polygone und Kanten zu verringern, und konkave Polygone sind in dieser Hinsicht sehr hilfreich. Konkave Polygone k√∂nnen zwar auch durch Sortierintervalle verarbeitet werden, dies f√ºhrt jedoch zu einer erheblichen Leistungsminderung.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt jedoch keine endg√ºltige Antwort auf den besten Ansatz. </font><font style="vertical-align: inherit;">Am Ende erf√ºllen Sortierintervalle und Sortierkanten eine Funktion, und die Auswahl zwischen ihnen ist eine Frage der Benutzerfreundlichkeit. </font><font style="vertical-align: inherit;">In der n√§chsten Spalte werde ich mehr √ºber das Sortieren von Kanten mit ihrer vollst√§ndigen Implementierung sprechen. </font><font style="vertical-align: inherit;">Im Rest dieser Spalte werde ich den Grundstein f√ºr die n√§chste legen, indem ich √ºber die Sortierschl√ºssel und die Berechnung von 1 / z spreche. </font><font style="vertical-align: inherit;">Dabei werde ich einige Verweise auf die Aspekte des Sortierens von Kanten machen, die noch nicht im Detail besprochen wurden. </font><font style="vertical-align: inherit;">Ich entschuldige mich, aber das ist unvermeidlich und alles wird erst am Ende der n√§chsten Spalte klar.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rippensortiertasten </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachdem wir nun wissen, dass wir die Sortierung der Kanten ausw√§hlen und daraus die Intervalle der Polygone erstellen, die dem Betrachter am n√§chsten liegen, stellt sich die Frage: Woher wissen Sie, ob diese Polygone am n√§chsten sind? Im Idealfall speichern wir einfach den Sortierschl√ºssel jedes Polygons. Wenn eine neue Kante angezeigt wird, vergleichen wir den Schl√ºssel seiner Oberfl√§che mit den Schl√ºsseln anderer aktiver aktiver Polygone, um leicht zu bestimmen, welches der Polygone am n√§chsten liegt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das klingt zu gut, ist aber m√∂glich. Wenn Ihre Weltdatenbank beispielsweise als BSP-Baum gespeichert ist und alle Polygone in BSP-Bl√§tter abgeschnitten sind, ist die BSP-Durchquerungsreihenfolge die richtige Renderreihenfolge. Wenn Sie beispielsweise BSP von vorne nach hinten umgehen und jedem Polygon bei Erreichen einen inkrementell gr√∂√üeren Schl√ºsselwert zuweisen, werden Polygone mit h√∂heren Schl√ºsselwerten garantiert vor Polygonen mit kleineren Schl√ºsseln angezeigt. Dieser Ansatz wird in Quake seit einiger Zeit verwendet, aber jetzt wird aus Gr√ºnden, die ich kurz erl√§utern werde, eine andere L√∂sung angewendet.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie kein BSP oder eine √§hnliche Datenstruktur haben oder wenn Sie viele sich bewegende Polygone haben (BSP verarbeitet sich bewegende Polygone nicht sehr effizient), besteht eine andere M√∂glichkeit, Ziele zu erreichen, darin, alle Polygone relativ zueinander zu sortieren, bevor Sie die Szene rendern und die entsprechenden Schl√ºssel entsprechend ihrer r√§umlichen Zuordnung zuweisen Beziehungen im Ansichtsfenster. Leider ist dies im allgemeinen Fall eine extrem langsame Aufgabe, da jedes Polygon miteinander verglichen werden muss. Es gibt Techniken zur Verbesserung der Leistung beim Sortieren von Polygonen, aber ich kenne niemanden, der das allgemeine Sortieren von Polygonen auf einem PC in Echtzeit durchf√ºhren w√ºrde.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Alternative besteht darin, im Bildschirmbereich nach dem Abstand z vom Betrachter zu sortieren. Diese L√∂sung passt gut zur √ºberlegenen r√§umlichen Konnektivit√§t von Sortierkanten. Wenn Sie sich mit jeder neuen Kante auf der Rasterlinie treffen, k√∂nnen Sie den Abstand z des entsprechenden Polygons berechnen und mit den Abst√§nden anderer Polygone vergleichen. Danach kann das Polygon in APL gespeichert werden.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Erhalten von Abst√§nden entlang z kann jedoch eine schwierige Aufgabe sein. Vergessen Sie nicht, dass wir in der Lage sein m√ºssen, z an einem beliebigen Punkt des Polygons zu berechnen, da eine Kante auftreten und das Polygon in der APL an einer beliebigen Stelle auf dem Bildschirm sortieren kann. Wir k√∂nnen z direkt aus den Bildschirmkoordinaten x und y und den Gleichungen der Ebene des Polygons berechnen, aber dies kann leider nicht sehr schnell erfolgen, da sich z f√ºr die Ebene im Bildschirmraum nicht linear √§ndert. 1 / z </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variiert jedoch</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> linear, daher verwenden wir diesen Wert. (Eine Diskussion der Linearit√§t im Bildschirmbereich und der Verl√§ufe f√ºr 1 / z finden Sie in Chris Heckers Serie √ºber Textur-Mapping im </font><u><font style="vertical-align: inherit;">Game Developer-</font></u><font style="vertical-align: inherit;"> Magazin des letzten Jahres</font></font><u><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.) Ein weiterer Vorteil der Verwendung von 1 / z besteht darin, dass die Aufl√∂sung mit abnehmendem Abstand zunimmt, dh mit 1 / z haben wir immer die beste Tiefenaufl√∂sung f√ºr nahe Objekte, die am wichtigsten sind. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der naheliegende Weg, um den 1 / z-Wert an einem beliebigen Punkt im Polygon zu erhalten, besteht darin, 1 / z an den Eckpunkten zu berechnen, sie √ºber beide Kanten des Polygons zu interpolieren und zwischen den Kanten zu interpolieren, um den Wert am gew√ºnschten Punkt zu erhalten. Leider erfordert dies viel Arbeit entlang jeder Rippe; Schlimmer noch, dies erfordert eine Division, um den 1 / z-Schritt pro Pixel in jedem Intervall zu berechnen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es w√§re besser, 1 / z direkt aus der Gleichung der Ebene und dem Bildschirm x und y des f√ºr uns interessanten Pixels zu berechnen. Die Gleichung hat die folgende Form:</font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo stretchy=&quot;false&quot;>)</mo><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mo>&amp;#x2212;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo stretchy=&quot;false&quot;>)</mo><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mo>+</mo><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.04ex" height="2.78ex" viewBox="0 -883.9 12933.7 1197.1" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-7A" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-3D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-28" x="2803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-61" x="3193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="3722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="4223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-29" x="4746" y="0"></use><g transform="translate(5136,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="809" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2212" x="6225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-28" x="7226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-62" x="7615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="8045" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="8545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-29" x="9069" y="0"></use><g transform="translate(9458,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2B" x="10475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-63" x="11476" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="11909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="12410" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo stretchy="false">)</mo><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mo>‚àí</mo><mo stretchy="false">(</mo><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo stretchy="false">)</mo><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mo>+</mo><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">1/z = (a/d)x' - (b/d)y' + c/d</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dabei ist z die Koordinate im Ansichtsfenster z des Punkts auf der Ebene, der in die Bildschirmkoordinaten (x ', y') projiziert wird (der Ursprung der Koordinaten f√ºr diese Berechnungen ist das Projektionszentrum, der Punkt auf dem Bildschirm direkt vor dem Ansichtspunkt), [abc] normal zur Ebene im Ansichtsfenster, und d ist der Abstand vom Ursprung des Ansichtsfensters zur Ebene entlang der Normalen. </font><font style="vertical-align: inherit;">Die Division wird f√ºr jede Ebene nur einmal durchgef√ºhrt, da a, b, c und d Konstanten f√ºr Ebenen sind.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine vollst√§ndige 1 / z-Berechnung erfordert zwei Multiplikationen und zwei Additionen, und jede Operation muss mit einem Gleitkomma ausgef√ºhrt werden, um Bereichsfehler zu vermeiden. </font><font style="vertical-align: inherit;">Ein solches Volumen an Gleitkommaberechnungen scheint teuer zu sein, aber tats√§chlich ist es insbesondere bei Pentium-Prozessoren nicht so, dass der Wert der 1 / z-Ebene an jedem Punkt in Assemblersprache in nur sechs Zyklen berechnet werden kann. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie interessiert sind, finden Sie hier eine schnelle Ableitung der 1 / z-Gleichung. </font><font style="vertical-align: inherit;">Die Ebenengleichung f√ºr die Ebene hat die folgende Form:</font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mi>y</mi><mo>+</mo><mi>c</mi><mi>z</mi><mo>&amp;#x2212;</mo><mi>d</mi><mo>=</mo><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.805ex" height="2.419ex" viewBox="0 -780.1 8957.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-78" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2B" x="1324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-62" x="2324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-79" x="2754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2B" x="3474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-63" x="4474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-7A" x="4908" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2212" x="5599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="6599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-3D" x="7401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-30" x="8457" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mi>y</mi><mo>+</mo><mi>c</mi><mi>z</mi><mo>‚àí</mo><mi>d</mi><mo>=</mo><mn>0</mn></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-2">ax + by + cz - d = 0</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wobei x und y die Koordinaten des Ansichtsraums sind, sind a, b, c, d und z oben definiert. </font><font style="vertical-align: inherit;">Wenn wir die Substitution machen</font></font><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mo>=</mo><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mi>z</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.531ex" height="2.178ex" viewBox="0 -832 3242.4 937.7" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-3D" x="850" y="0"></use><g transform="translate(1906,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="809" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-7A" x="2773" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>=</mo><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">x=x'z</script> </math>  und <math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi><mo>=</mo><mo>&amp;#x2212;</mo><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mi>z</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.995ex" height="2.539ex" viewBox="0 -832 3873 1093.4" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-79" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-3D" x="775" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2212" x="1831" y="0"></use><g transform="translate(2610,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="706" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-7A" x="3404" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>y</mi><mo>=</mo><mo>‚àí</mo><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">y=-y'z</script> </math><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Aus der Definition der perspektivischen Projektion; y √§ndert das Vorzeichen, weil es im Ansichtsfenster nach oben, aber im Bildschirmbereich nach unten zunimmt). </font><font style="vertical-align: inherit;">Wenn wir eine Permutation durchf√ºhren, erhalten wir:</font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>z</mi><mo>=</mo><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mo>&amp;#x2212;</mo><mi>b</mi><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mo>+</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.149ex" height="2.78ex" viewBox="0 -883.9 9105.7 1197.1" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-7A" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-3D" x="746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="1802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="2326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-28" x="2826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-61" x="3216" y="0"></use><g transform="translate(3745,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="809" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2212" x="4835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-62" x="5835" y="0"></use><g transform="translate(6265,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2B" x="7281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-63" x="8282" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-29" x="8716" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>z</mi><mo>=</mo><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mo stretchy="false">(</mo><mi>a</mi><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mo>‚àí</mo><mi>b</mi><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mo>+</mo><mi>c</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-5">z = d / (ax' - by' + c)</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Durch Invertieren und Erweitern der Gleichung erhalten wir: </font></font><br><br><p><math> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mi>a</mi><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo>&amp;#x2212;</mo><mi>b</mi><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi><mo>+</mo><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>d</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="26.421ex" height="2.78ex" viewBox="0 -883.9 11375.7 1197.1" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-7A" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-3D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-61" x="2803" y="0"></use><g transform="translate(3333,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="809" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="4200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="4700" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2212" x="5446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-62" x="6447" y="0"></use><g transform="translate(6876,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2032" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="7671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="8171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2B" x="8917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-63" x="9918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMAIN-2F" x="10351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/439830/&amp;usg=ALkJrhhN69fd9hl3O7Zwj7ePeyHQkDFUTg#MJMATHI-64" x="10852" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>z</mi><mo>=</mo><mi>a</mi><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo>‚àí</mo><mi>b</mi><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi><mo>+</mo><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>d</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-6">1/z = ax'/d - by'/d + c/d</script> </math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sp√§ter werde ich die 1 / z-Sortierung in Aktion zeigen. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beben und sortieren nach z </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe oben erw√§hnt, dass Quake die BSP-Reihenfolge nicht mehr als Sortierschl√ºssel verwendet. Tats√§chlich wird jetzt 1 / z als Schl√ºssel angewendet. Trotz der Eleganz der Verl√§ufe ist die Berechnung von 1 / z aus ihnen offensichtlich langsamer als der einfache Vergleich mit dem BSP-Bestellschl√ºssel. Warum haben wir in Quake auf 1 / z umgestellt?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Hauptgrund ist die Abnahme der Anzahl der Polygone. F√ºr das Rendern in BSP-Reihenfolge m√ºssen bestimmte Regeln befolgt werden, einschlie√ülich Polygonen, wenn Schnittpunkte mit BSP-Ebenen geteilt werden sollen. Diese Trennung erh√∂ht die Anzahl der Polygone und Kanten erheblich. Dank der Sortierung nach 1 / z k√∂nnen wir die Polygone ungeteilt lassen, erhalten aber dennoch die richtige Zeichenreihenfolge, sodass wir viel weniger Kanten verarbeiten m√ºssen. w√§hrend das Rendern im Allgemeinen beschleunigt wird, trotz der zus√§tzlichen Kosten f√ºr das Sortieren um 1 / z.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein weiterer Vorteil der 1 / z-Sortierung besteht darin, dass die am Anfang dieses Artikels erw√§hnten Sortierprobleme gel√∂st werden: Verschieben von Modellen, die selbst kleine BSP-B√§ume sind. Das Sortieren in der BSP-Weltordnung funktioniert hier nicht, da diese Modelle separate BSPs sind und es keine einfachen M√∂glichkeiten gibt, sie in die sequentielle Reihenfolge der BSP-Welt einzubetten. Wir m√∂chten f√ºr diese Modelle keine Z-Pufferung verwenden, da es sich h√§ufig um gro√üe Objekte handelt (z. B. T√ºren), und wir m√∂chten nicht die Vorteile der Reduzierung des Neuzeichnens verlieren, das geschlossene T√ºren beim Rendern durch die Kantenliste bieten. Bei Verwendung sortierter Intervalle werden die Kanten der sich bewegenden BSP-Modelle einfach in die Liste der Kanten eingef√ºgt (zuerst werden die Polygone abgeschnitten, damit sie sich nicht mit festen Oberfl√§chen der Welt schneiden, um Komplexit√§t zu vermeiden.)bezogen auf die gegenseitige Durchdringung) anstelle aller R√§nder der Welt, und der Rest ist nach 1 / z sortiert.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Weitermachen </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Artikel enth√§lt zweifellos eine gro√üe Menge an Informationen, und vieles ist Ihnen noch nicht in den Sinn gekommen. </font><font style="vertical-align: inherit;">Der Code und die Erkl√§rung aus dem n√§chsten Artikel helfen dabei. </font><font style="vertical-align: inherit;">Wenn Sie im Voraus einen Blick darauf werfen m√∂chten, sollte der Code zum Zeitpunkt des Lesens dieses Artikels unter ftp.idsoftware.com/mikeab/ddjsort.zip verf√ºgbar sein. </font><font style="vertical-align: inherit;">Es lohnt sich auch, einen Blick auf </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computergrafik</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Foley und Van Dam oder </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verfahrenselemente f√ºr Computergrafik</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rogers zu </font><font style="vertical-align: inherit;">werfen </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist derzeit nicht klar, wie das Ergebnis von </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quake ist</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muss die Kanten sortieren - in BSP-Reihenfolge oder 1 / z. </font><font style="vertical-align: inherit;">Tats√§chlich gibt es keine Garantie daf√ºr, dass sortierte Intervalle in irgendeiner Form die endg√ºltige L√∂sung sind. </font><font style="vertical-align: inherit;">Manchmal scheint es so, als w√ºrden wir die Grafik-Engines so oft wechseln, wie sie Elvis auf die Radiosender setzen, die den Hits der 50er Jahre gewidmet sind (aber hoffentlich mit viel √§sthetischeren Ergebnissen!), Und wir werden zweifellos Alternativen bis zum Ver√∂ffentlichungsdatum in Betracht ziehen die Spiele.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de439830/">https://habr.com/ru/post/de439830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de439812/index.html">Kaggle-Ans√§tze f√ºr CV in Prod: Sie k√∂nnen nicht implementieren, um zu schneiden</a></li>
<li><a href="../de439818/index.html">Merkmale von Designans√§tzen im realen Fertigungssektor</a></li>
<li><a href="../de439822/index.html">Erstellen einer alternativen Anzeige f√ºr den Ensoniq EPS16 + und ASR10 Synthesizer / Sampler</a></li>
<li><a href="../de439824/index.html">Wann verschwinden JavaScript-Frameworks?</a></li>
<li><a href="../de439826/index.html">Analog deaktivieren. Was wird mit dem Fernsehen passieren?</a></li>
<li><a href="../de439834/index.html">IPMI-Technologie√ºbersicht</a></li>
<li><a href="../de439838/index.html">Honigarithmetik: Addition und Subtraktion durch Bienen</a></li>
<li><a href="../de439840/index.html">DUMP-2019-Konferenz: Wir laden Sie ein, in den Abschnitten Design, Management und Test zu sprechen</a></li>
<li><a href="../de439844/index.html">Warum machen Dodo Pizza 250 Entwickler?</a></li>
<li><a href="../de439848/index.html">Kein einziges VPN. Spickzettel, wie Sie sich und Ihre Daten sch√ºtzen k√∂nnen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>