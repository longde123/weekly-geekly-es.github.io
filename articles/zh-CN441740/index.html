<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘• â†ªï¸ ğŸ‘©ğŸ»â€ğŸŒ¾ Habra megaratingï¼š12å¹´ä»¥æ¥Habrçš„æœ€ä½³æ–‡ç« å’Œç»Ÿè®¡æ•°æ®ã€‚ ç¬¬1/2éƒ¨åˆ† ğŸ‘‡ ğŸ•š ğŸ¤¬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHa 

 åœ¨å‘å¸ƒ2017å¹´å’Œ2018å¹´æ–‡ç« çš„æ’åä¹‹åï¼Œä¸‹ä¸€ä¸ªæƒ³æ³•å¾ˆæ˜æ˜¾-æ”¶é›†æ‰€æœ‰å¹´ä»½çš„é€šç”¨æ’åã€‚ ä½†æ˜¯ä»…æ”¶é›†é“¾æ¥å°†æ˜¯é™ˆæ—§çš„ï¼ˆå°½ç®¡ä¹Ÿå¾ˆæœ‰ç”¨ï¼‰ï¼Œå› æ­¤å†³å®šæ‰©å±•æ•°æ®å¤„ç†å¹¶æ”¶é›†ä¸€äº›æ›´æœ‰ç”¨çš„ä¿¡æ¯ã€‚ 



 é¢å®šå€¼ï¼Œç»Ÿè®¡ä¿¡æ¯å’Œä¸€äº›æºä»£ç åœ¨Pythonçš„å¸®åŠ©ä¸‹ã€‚ 

 èµ„æ–™å¤„ç† 
 é‚£äº›å¯¹ç»“æœç«‹å³æ„Ÿå…´è¶£çš„äººå¯...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Habra megaratingï¼š12å¹´ä»¥æ¥Habrçš„æœ€ä½³æ–‡ç« å’Œç»Ÿè®¡æ•°æ®ã€‚ ç¬¬1/2éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441740/"> å“ˆHa <br><br> åœ¨å‘å¸ƒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2017å¹´</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2018å¹´</a>æ–‡ç« çš„æ’åä¹‹åï¼Œä¸‹ä¸€ä¸ªæƒ³æ³•å¾ˆæ˜æ˜¾-æ”¶é›†æ‰€æœ‰å¹´ä»½çš„é€šç”¨æ’åã€‚ ä½†æ˜¯ä»…æ”¶é›†é“¾æ¥å°†æ˜¯é™ˆæ—§çš„ï¼ˆå°½ç®¡ä¹Ÿå¾ˆæœ‰ç”¨ï¼‰ï¼Œå› æ­¤å†³å®šæ‰©å±•æ•°æ®å¤„ç†å¹¶æ”¶é›†ä¸€äº›æ›´æœ‰ç”¨çš„ä¿¡æ¯ã€‚ <br><br><img src="https://habrastorage.org/webt/tq/xz/ft/tqxzftd1f2qeaxmdgzfal2hhhcg.png"><br><br> é¢å®šå€¼ï¼Œç»Ÿè®¡ä¿¡æ¯å’Œä¸€äº›æºä»£ç åœ¨Pythonçš„å¸®åŠ©ä¸‹ã€‚ <a name="habracut"></a><br><br><h2> èµ„æ–™å¤„ç† </h2><br> é‚£äº›å¯¹ç»“æœç«‹å³æ„Ÿå…´è¶£çš„äººå¯ä»¥è·³è¿‡æœ¬ç« ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬å°†äº†è§£å…¶å·¥ä½œåŸç†ã€‚ <br><br> ä½œä¸ºæºæ•°æ®ï¼Œæœ‰ä¸€ä¸ªå¤§è‡´ä¸ºä»¥ä¸‹ç±»å‹çš„csvæ–‡ä»¶ï¼š <br><br><pre><code class="python hljs">datetime,link,title,votes,up,down,bookmarks,views,comments <span class="hljs-number"><span class="hljs-number">2006</span></span><span class="hljs-number"><span class="hljs-number">-07</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span>T14:<span class="hljs-number"><span class="hljs-number">23</span></span>Z,https://habr.com/ru/post/<span class="hljs-number"><span class="hljs-number">1</span></span>/,<span class="hljs-string"><span class="hljs-string">"Wiki-FAQ  "</span></span>,votes:<span class="hljs-number"><span class="hljs-number">1</span></span>,votesplus:<span class="hljs-number"><span class="hljs-number">1</span></span>,votesmin:<span class="hljs-number"><span class="hljs-number">0</span></span>,bookmarks:<span class="hljs-number"><span class="hljs-number">8</span></span>,views:<span class="hljs-number"><span class="hljs-number">28300</span></span>,comments:<span class="hljs-number"><span class="hljs-number">56</span></span> <span class="hljs-number"><span class="hljs-number">2006</span></span><span class="hljs-number"><span class="hljs-number">-07</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span>T20:<span class="hljs-number"><span class="hljs-number">45</span></span>Z,https://habr.com/ru/post/<span class="hljs-number"><span class="hljs-number">2</span></span>/,<span class="hljs-string"><span class="hljs-string">"     â€¦ !"</span></span>,votes:<span class="hljs-number"><span class="hljs-number">1</span></span>,votesplus:<span class="hljs-number"><span class="hljs-number">1</span></span>,votesmin:<span class="hljs-number"><span class="hljs-number">0</span></span>,bookmarks:<span class="hljs-number"><span class="hljs-number">1</span></span>,views:<span class="hljs-number"><span class="hljs-number">14600</span></span>,comments:<span class="hljs-number"><span class="hljs-number">37</span></span> ... <span class="hljs-number"><span class="hljs-number">2019</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span>T03:<span class="hljs-number"><span class="hljs-number">47</span></span>Z,https://habr.com/ru/post/<span class="hljs-number"><span class="hljs-number">435118</span></span>/,<span class="hljs-string"><span class="hljs-string">"Save File Me â€”        "</span></span>,votes:<span class="hljs-number"><span class="hljs-number">5</span></span>,votesplus:<span class="hljs-number"><span class="hljs-number">5</span></span>,votesmin:<span class="hljs-number"><span class="hljs-number">0</span></span>,bookmarks:<span class="hljs-number"><span class="hljs-number">26</span></span>,views:<span class="hljs-number"><span class="hljs-number">1800</span></span>,comments:<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">2019</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span>T03:<span class="hljs-number"><span class="hljs-number">09</span></span>Z,https://habr.com/ru/post/<span class="hljs-number"><span class="hljs-number">435120</span></span>/,<span class="hljs-string"><span class="hljs-string">"Lambda-  SQLâ€¦  "</span></span>,votes:<span class="hljs-number"><span class="hljs-number">9</span></span>,votesplus:<span class="hljs-number"><span class="hljs-number">13</span></span>,votesmin:<span class="hljs-number"><span class="hljs-number">4</span></span>,bookmarks:<span class="hljs-number"><span class="hljs-number">63</span></span>,views:<span class="hljs-number"><span class="hljs-number">5700</span></span>,comments:<span class="hljs-number"><span class="hljs-number">30</span></span></code> </pre> <br> æ­¤è¡¨æ ¼ä¸­æ‰€æœ‰æ–‡ç« çš„ç´¢å¼•å ç”¨42 MBï¼Œå¹¶ä¸”æ”¶é›†å®ƒèŠ±äº†å¤§çº¦10å¤©çš„æ—¶é—´æ‰èƒ½åœ¨Raspberry Piä¸Šè¿è¡Œè„šæœ¬ï¼ˆä¸‹è½½ä»¥æš‚åœçš„æ–¹å¼è¿›å…¥ä¸€ä¸ªæµï¼Œä»¥å…æœåŠ¡å™¨è¶…è½½ï¼‰ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¯ä»¥ä»æ‰€æœ‰è¿™äº›æ•°æ®ä¸­æå–ä»€ä¹ˆæ•°æ®ã€‚ <br><br><h4> ç°åœºè§‚ä¼— </h4><br> è®©æˆ‘ä»¬ä»ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ä¾‹å­å¼€å§‹-æˆ‘ä»¬å°†è¯„ä¼°è¿™äº›å¹´æ¥ç½‘ç«™çš„å—ä¼—ç¾¤ä½“ã€‚ ç²—ç•¥ä¼°è®¡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ–‡ç« è¯„è®ºçš„æ•°é‡ã€‚ ä¸‹è½½æ•°æ®å¹¶æ˜¾ç¤ºè¯„è®ºæ•°çš„å›¾è¡¨ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt df = pd.read_csv(log_path, sep=<span class="hljs-string"><span class="hljs-string">','</span></span>, encoding=<span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>, error_bad_lines=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, quotechar=<span class="hljs-string"><span class="hljs-string">'"'</span></span>, comment=<span class="hljs-string"><span class="hljs-string">'#'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_int</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># "bookmarks:22" =&gt; 22 num = ''.join(i for i in s if i.isdigit()) return int(num) dates = pd.to_datetime(df['datetime'], format='%Y-%m-%dT%H:%MZ') dates += datetime.timedelta(hours=3) comments = df["comments"].map(to_int, na_action=None) plt.rcParams["figure.figsize"] = (9, 6) fig, ax = plt.subplots() plt.plot(dates, comments, 'go', markersize=1, label='Comments') ax.xaxis.set_major_locator(mdates.YearLocator()) plt.ylim(bottom=0, top=1000) plt.legend(loc='best') fig.autofmt_xdate() plt.tight_layout() plt.show()</span></span></code> </pre><br> æ•°æ®çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><img src="https://habrastorage.org/webt/-l/h4/px/-lh4pxnmfsld-gjrhpccgd4_p24.png"><br><br> ç»“æœå¾ˆæœ‰è¶£-äº‹å®è¯æ˜ï¼Œè‡ª2009å¹´ä»¥æ¥ï¼Œè¯¥ç½‘ç«™çš„æ´»è·ƒè§‚ä¼—ï¼ˆå¯¹æ–‡ç« å‘è¡¨è¯„è®ºçš„äººï¼‰å‡ ä¹æ²¡æœ‰å¢é•¿ã€‚ å°½ç®¡ä¹Ÿè®¸æ‰€æœ‰ITå‘˜å·¥éƒ½åœ¨è¿™é‡Œï¼Ÿ <br><br> ç”±äºæˆ‘ä»¬æ˜¯åœ¨è°ˆè®ºå—ä¼—ï¼Œå› æ­¤å›æƒ³ä¸€ä¸‹Habrçš„æœ€æ–°åˆ›æ–°-æ·»åŠ ç½‘ç«™çš„è‹±æ–‡ç‰ˆå¾ˆæœ‰è¶£ã€‚ åˆ—å‡ºé“¾æ¥ä¸­å¸¦æœ‰â€œ / en /â€çš„æ–‡ç« ã€‚ <br><br><pre> <code class="python hljs">df = df[df[<span class="hljs-string"><span class="hljs-string">'link'</span></span>].str.contains(<span class="hljs-string"><span class="hljs-string">"/en/"</span></span>)]</code> </pre> <br> ç»“æœä¹Ÿå¾ˆæœ‰è¶£ï¼ˆå‚ç›´æ¯”ä¾‹å°ºç‰¹åˆ«ä¿æŒä¸å˜ï¼‰ï¼š <br><br><img src="https://habrastorage.org/webt/e-/pu/sz/e-pusz5vy2111zj606lzzagax1a.png"><br><br> å‡ºç‰ˆç‰©æ•°é‡æ¿€å¢å§‹äº2019å¹´1æœˆ15æ—¥ï¼Œé‚£æ—¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Hello worldçš„å‘å¸ƒï¼</a> ä½†æ˜¯ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿˜æ˜¯è‹±æ–‡çš„Habrï¼Œ</a>è¿™3ç¯‡æ–‡ç« å·²ç»å‡ºç‰ˆäº†å‡ ä¸ªæœˆäº†ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1ï¼Œ2</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3</a> ã€‚ å¯èƒ½æ˜¯Betaæµ‹è¯•ï¼Ÿ <br><br><h4> æ ‡è¯†ç¬¦ </h4><br> åœ¨å‰é¢çš„éƒ¨åˆ†ä¸­æˆ‘ä»¬æ²¡æœ‰æ¶‰åŠçš„ä¸‹ä¸€ä¸ªæœ‰è¶£çš„ç‚¹æ˜¯æ–‡ç« æ ‡è¯†ç¬¦å’Œå‘å¸ƒæ—¥æœŸçš„æ¯”è¾ƒã€‚ æ¯ç¯‡æ–‡ç« çš„é“¾æ¥ç±»å‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‡ä¸ºhabr.com/en/post/N</a> ï¼Œæ–‡ç« ç¼–å·æ˜¯æ¨ªåˆ‡çš„ï¼Œç¬¬ä¸€ç¯‡æ–‡ç« çš„æ ‡è¯†ç¬¦ä¸º1ï¼Œè€Œæ‚¨æ­£åœ¨é˜…è¯»çš„æ ‡è¯†ç¬¦ä¸º441740ã€‚çœ‹æ¥ä¸€åˆ‡éƒ½å¾ˆç®€å•ã€‚ ä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚ æ£€æŸ¥æ—¥æœŸå’Œæ ‡è¯†ç¬¦çš„å¯¹åº”å…³ç³»ã€‚ <br><br> å°†æ–‡ä»¶ä¸Šä¼ åˆ°Pandas Dataframeï¼Œé€‰æ‹©æ—¥æœŸå’ŒIDï¼Œç„¶åç»˜åˆ¶å®ƒä»¬ï¼š <br><br><pre> <code class="python hljs">df = pd.read_csv(log_path, header=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, names=[<span class="hljs-string"><span class="hljs-string">'datetime'</span></span>, <span class="hljs-string"><span class="hljs-string">'votes'</span></span>, <span class="hljs-string"><span class="hljs-string">'bookmarks'</span></span>, <span class="hljs-string"><span class="hljs-string">'views'</span></span>, <span class="hljs-string"><span class="hljs-string">'comments'</span></span>]) dates = pd.to_datetime(df[<span class="hljs-string"><span class="hljs-string">'datetime'</span></span>], format=<span class="hljs-string"><span class="hljs-string">'%Y-%m-%dT%H:%M:%S.%f'</span></span>) dates += datetime.timedelta(hours=<span class="hljs-number"><span class="hljs-number">3</span></span>) df[<span class="hljs-string"><span class="hljs-string">'datetime'</span></span>] = dates <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">link2id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(link)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># https://habr.com/ru/post/345936/ =&gt; 345936 if link[-1] == '/': link = link[0:-1] return int(link.split('/')[-1]) df['id'] = df["link"].map(link2id, na_action=None) plt.rcParams["figure.figsize"] = (9, 6) fig, ax = plt.subplots() plt.plot(df_ids['id'], df_ids['datetime'], 'bo', markersize=1, label='Article ID') ax.yaxis.set_major_formatter(mdates.DateFormatter("%d-%m-%Y")) ax.yaxis.set_major_locator(mdates.MonthLocator()) plt.legend(loc='best') fig.autofmt_xdate() plt.tight_layout() plt.show()</span></span></code> </pre><br> ç»“æœæ˜¯ä»¤äººæƒŠè®¶çš„-æ ‡è¯†ç¬¦å¹¶éæ€»æ˜¯æ’æˆä¸€æ’ï¼Œå¦‚æœ€åˆæ‰€å‡è®¾çš„é‚£æ ·ï¼Œå­˜åœ¨æ˜æ˜¾çš„â€œå¼‚å¸¸å€¼â€ã€‚ <br><br><img src="https://habrastorage.org/webt/mc/m7/g5/mcm7g5pio9ljy33ftqsr9namhpw.png"><br><br> éƒ¨åˆ†ç”±äºè¿™äº›åŸå› ï¼Œè§‚ä¼—å¯¹2017å¹´å’Œ2018å¹´çš„æ”¶è§†ç‡æœ‰ç–‘é—®-è§£æå™¨æœªè€ƒè™‘IDä¸ºâ€œé”™è¯¯â€çš„æ­¤ç±»æ–‡ç« ã€‚ ä¸ºä»€ä¹ˆè¿™ä¹ˆéš¾è¯´ï¼Œå´æ²¡æœ‰é‚£ä¹ˆé‡è¦ã€‚ <br><br> æœ‰å…³æ ‡è¯†ç¬¦çš„æœ‰è¶£ä¹‹å¤„æ˜¯ä»€ä¹ˆï¼Ÿ æœ‰ä¸€ä¸ªå‡è®¾æˆ‘æ— æ³•æ­£å¼è¯æ˜ï¼Œä½†è¿™ä¼¼ä¹å¾ˆæ˜æ˜¾ã€‚ åœ¨æ’°å†™æœ¬æ–‡è‰æ¡ˆæ—¶ä¼šåˆ†é…ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œè€Œå‘å¸ƒæ—¥æœŸæ˜¾ç„¶ä¼šæ™šäº›ã€‚ æœ‰äººåœ¨åŒä¸€å¤©å‘å¸ƒæ–‡ç« ï¼Œåæ¥æœ‰äººå‘è¡¨ææ–™ã€‚ ä¸ºä»€ä¹ˆè¦è¿™æ ·ï¼Ÿ è®©æˆ‘ä»¬å°†æ ‡è¯†ç¬¦æ”¾åœ¨Xè½´ä¸Šï¼Œå¹¶å°†æ—¥æœŸå‚ç›´æ”¾ç½®ï¼Œç„¶åæ›´è¯¦ç»†åœ°æŸ¥çœ‹å›¾è¡¨çš„ä¸€éƒ¨åˆ†ï¼š <br><br><img src="https://habrastorage.org/webt/bs/8c/zs/bs8czsu1or3hetvayttkqauztfq.png"><br><br> ç»“æœ-æˆ‘ä»¬åœ¨å®çº¿ä¸Šæ–¹çœ‹åˆ°äº†ç‚¹äº‘ï¼Œè¿™å‘æˆ‘ä»¬æ˜¾ç¤º<i>äº†æ–‡ç« åˆ›å»ºæœŸé—´çš„</i>æ—¶é—´åˆ†å¸ƒã€‚ å¦‚æ‚¨æ‰€è§ï¼Œæœ€å¤§é—´éš”ä¸º1-2å‘¨ã€‚ å‡ ä¹æ‰€æœ‰æ–‡ç« çš„æ’°å†™éƒ½åœ¨ä¸è¶…è¿‡ä¸€ä¸ªæœˆçš„æ—¶é—´å†…å®Œæˆï¼Œå°½ç®¡æœ‰äº›æ–‡ç« æ˜¯åœ¨è‰ç¨¿åˆ›å»ºåçš„å‡ ä¸ªæœˆå‘å¸ƒçš„ï¼ˆå½“ç„¶ï¼Œè¿™ä¸èƒ½ä¿è¯ä½œè€…æ¯å¤©éƒ½è¦å†™å‡ ä¸ªæœˆçš„æ–‡ç« ï¼Œä½†æ˜¯ç»“æœä»ç„¶å¾ˆæœ‰è¶£ï¼‰ã€‚ <br><br><h4> å‡ºç‰ˆæ—¥æœŸå’Œæ—¶é—´ </h4><br> ä¸€ä¸ªæœ‰è¶£çš„ï¼Œå°½ç®¡ç›´è§‚çš„è§‚ç‚¹æ˜¯æ–‡ç« å‘è¡¨çš„æ—¶é—´ã€‚ <br><br> è¾“å‡ºå·¥ä½œæ—¥ç»Ÿè®¡ä¿¡æ¯ï¼š <br><br><pre> <code class="python hljs">print(<span class="hljs-string"><span class="hljs-string">"Group by hour (average, working days):"</span></span>) df_workdays = df[(df[<span class="hljs-string"><span class="hljs-string">'day'</span></span>] &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>)] g = df_workdays.groupby([<span class="hljs-string"><span class="hljs-string">'hour'</span></span>]) hour_count = g.size().reset_index(name=<span class="hljs-string"><span class="hljs-string">'counts'</span></span>) grouped = g.median().reset_index() grouped[<span class="hljs-string"><span class="hljs-string">'counts'</span></span>] = hour_count[<span class="hljs-string"><span class="hljs-string">'counts'</span></span>] print(grouped[[<span class="hljs-string"><span class="hljs-string">'hour'</span></span>, <span class="hljs-string"><span class="hljs-string">'counts'</span></span>, <span class="hljs-string"><span class="hljs-string">'views'</span></span>, <span class="hljs-string"><span class="hljs-string">'comments'</span></span>, <span class="hljs-string"><span class="hljs-string">'votes'</span></span>, <span class="hljs-string"><span class="hljs-string">'votesperview'</span></span>]]) print() view_hours = grouped[<span class="hljs-string"><span class="hljs-string">'hour'</span></span>].values view_hours_avg = grouped[<span class="hljs-string"><span class="hljs-string">'counts'</span></span>].values fig, ax = plt.subplots() plt.bar(view_hours, view_hours_avg, align=<span class="hljs-string"><span class="hljs-string">'edge'</span></span>, label=<span class="hljs-string"><span class="hljs-string">'Publication Time (Mo-Fr)'</span></span>) ax.set_xticks(range(<span class="hljs-number"><span class="hljs-number">24</span></span>)) ax.xaxis.set_major_formatter(FormatStrFormatter(<span class="hljs-string"><span class="hljs-string">'%d:00'</span></span>)) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) fig.autofmt_xdate() plt.tight_layout() plt.show()</code> </pre><br> å·¥ä½œæ—¥æ–‡ç« æ•°é‡ä¸å‘å¸ƒæ—¶é—´çš„ä¾èµ–å…³ç³»ï¼š <br><br><img src="https://habrastorage.org/webt/dg/g9/e4/dgg9e4jiotmuwbva-2g-_y_pkva.png"><br><br> å›¾ç‰‡å¾ˆæœ‰è¶£ï¼Œå¤§å¤šæ•°å‡ºç‰ˆç‰©éƒ½åœ¨å·¥ä½œæ—¶é—´ä¸Šã€‚ ä»ç„¶å¾ˆæœ‰è¶£ï¼Œå¯¹äºå¤§å¤šæ•°æ’°å†™æ–‡ç« çš„ä½œè€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸»è¦çš„å·¥ä½œï¼Œè¿˜æ˜¯åªæ˜¯åœ¨å·¥ä½œæ—¶é—´åšæ–‡ç« ï¼Ÿ  ;ï¼‰ä½†æ˜¯å‘¨æœ«çš„åˆ†å‘æ—¶é—´è¡¨å´æœ‰æ‰€ä¸åŒï¼š <br><br><img src="https://habrastorage.org/webt/0q/q2/ce/0qq2ceeqizt4hxerxmpqcwb9afo.png"><br><br> ç”±äºæˆ‘ä»¬åœ¨è°ˆè®ºæ—¥æœŸå’Œæ—¶é—´ï¼Œå› æ­¤è®©æˆ‘ä»¬æŒ‰æ˜ŸæœŸå‡ æŸ¥çœ‹å¹³å‡è§‚çœ‹æ¬¡æ•°å’Œæ–‡ç« æ•°ã€‚ <br><br><pre> <code class="python hljs">g = df.groupby([<span class="hljs-string"><span class="hljs-string">'day'</span></span>, <span class="hljs-string"><span class="hljs-string">'dayofweek'</span></span>]) dayofweek_count = g.size().reset_index(name=<span class="hljs-string"><span class="hljs-string">'counts'</span></span>) grouped = g.median().reset_index() grouped[<span class="hljs-string"><span class="hljs-string">'counts'</span></span>] = dayofweek_count[<span class="hljs-string"><span class="hljs-string">'counts'</span></span>] grouped.sort_values(<span class="hljs-string"><span class="hljs-string">'day'</span></span>, ascending=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) print(grouped[[<span class="hljs-string"><span class="hljs-string">'day'</span></span>, <span class="hljs-string"><span class="hljs-string">'dayofweek'</span></span>, <span class="hljs-string"><span class="hljs-string">'counts'</span></span>, <span class="hljs-string"><span class="hljs-string">'views'</span></span>, <span class="hljs-string"><span class="hljs-string">'comments'</span></span>, <span class="hljs-string"><span class="hljs-string">'votes'</span></span>, <span class="hljs-string"><span class="hljs-string">'votesperview'</span></span>]]) print() view_days = grouped[<span class="hljs-string"><span class="hljs-string">'day'</span></span>].values view_per_day = grouped[<span class="hljs-string"><span class="hljs-string">'views'</span></span>].values counts_per_day = grouped[<span class="hljs-string"><span class="hljs-string">'counts'</span></span>].values days_of_week = grouped[<span class="hljs-string"><span class="hljs-string">'dayofweek'</span></span>].values plt.bar(view_days, view_per_day, align=<span class="hljs-string"><span class="hljs-string">'edge'</span></span>, label=<span class="hljs-string"><span class="hljs-string">'Avg.Views/day'</span></span>) plt.bar(view_days, counts_per_day, align=<span class="hljs-string"><span class="hljs-string">'edge'</span></span>, label=<span class="hljs-string"><span class="hljs-string">'Amount/day'</span></span>) plt.xticks(view_days, days_of_week) plt.ylim(bottom=<span class="hljs-number"><span class="hljs-number">0</span></span>, top=<span class="hljs-number"><span class="hljs-number">10000</span></span>) plt.show()</code> </pre><br> ç»“æœå¾ˆæœ‰è¶£ï¼š <br><br><img src="https://habrastorage.org/webt/pq/xi/-i/pqxi-ic6dc7imzwokde5zzf0nc0.png"><br><br> å¦‚æ‚¨æ‰€è§ï¼Œå‘¨æœ«å‘è¡¨çš„æ–‡ç« æ˜æ˜¾å‡å°‘ã€‚ ä½†æ˜¯ï¼Œæ¯ç¯‡æ–‡ç« éƒ½æœ‰æ›´å¤šçš„è§‚ç‚¹ï¼Œå› æ­¤åœ¨å‘¨æœ«å‘å¸ƒæ–‡ç« ä¼¼ä¹éå¸¸å¯å–ï¼ˆæ­£å¦‚åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†ä¸­</a>å‘ç°çš„é‚£æ ·ï¼Œæ–‡ç« çš„æœ‰æ•ˆæœŸä¸è¶…è¿‡3-4å¤©ï¼Œå› æ­¤å‰ä¸¤å¤©éå¸¸å…³é”®ï¼‰ã€‚ <br><br> è¿™ç¯‡æ–‡ç« å¯èƒ½å¤ªé•¿äº†ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†</a>ç»“å°¾ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN441740/">https://habr.com/ru/post/zh-CN441740/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN441726/index.html">Kubesprayå³æœåŠ¡-å°†Kubernetesæ·»åŠ åˆ°ä»»ä½•äº‘</a></li>
<li><a href="../zh-CN441728/index.html">æ€»ç»“æ¸¸æˆBlottoçš„åœ¨çº¿ç«èµ›</a></li>
<li><a href="../zh-CN441732/index.html">ç”Ÿç‰©æœºå™¨äººçš„æ³¨æ„äº‹é¡¹</a></li>
<li><a href="../zh-CN441736/index.html">è‡ªåŠ¨å°†Wordæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼</a></li>
<li><a href="../zh-CN441738/index.html">çƒ­å£°åŸºç¡€</a></li>
<li><a href="../zh-CN441742/index.html">C ++ä¸­çš„è¡¨è¾¾ç±»åˆ«</a></li>
<li><a href="../zh-CN441744/index.html">ä½¿ç”¨Pythonä»SearchFaceç»“æœä¸­è·å–Vké…ç½®æ–‡ä»¶çš„é“¾æ¥ï¼ˆä½†è¿™å¹¶ä¸å‡†ç¡®ï¼‰</a></li>
<li><a href="../zh-CN441750/index.html">CodeFestä¸Šçš„é¡¹ç›®ï¼šç»ç†å¦‚ä½•åœ¨ç¬æ¯ä¸‡å˜çš„ä¸–ç•Œä¸­ç”Ÿå­˜ï¼Ÿ</a></li>
<li><a href="../zh-CN441752/index.html">ä¸­å…´å±•ç¤ºäº†ä¸€æ¬¾æ™ºèƒ½æ‰‹æœºæ‰‹è¡¨Î±</a></li>
<li><a href="../zh-CN441754/index.html">Kubernetesåœ¨ç”Ÿäº§ä¸­çš„æˆåŠŸæ¡ˆä¾‹ã€‚ ç¬¬10éƒ¨åˆ†ï¼šReddit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>