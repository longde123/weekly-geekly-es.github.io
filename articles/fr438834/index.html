<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏎️ 👨🏻‍🎤 🛳️ Le designer a-t-il une nouvelle idée? Quoi de plus simple 👝 🐬 🧘🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, habrovchanin! Les concepteurs sont des gens idéologiques et des clients, en particulier avec leurs besoins commerciaux. 

 Imaginez que vous ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le designer a-t-il une nouvelle idée? Quoi de plus simple</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438834/"> Bonjour, <i>habrovchanin!</i>  Les concepteurs sont des gens idéologiques et des clients, en particulier avec leurs besoins commerciaux. <br><br>  Imaginez que vous avez empilé votre meilleur UIkit au monde au plus cool% insérez votre framework% JS.  Il semblerait qu'il y ait tout ce dont le projet a besoin.  Vous pouvez maintenant boire du café et fermer toutes les nouvelles tâches en lançant des composants sur la page.  Encore mieux, si vous avez trouvé un tel UIkit <s>dans une décharge</s> sur les espaces ouverts NPM et qu'il correspond parfaitement à l'UX / UI actuel et à ses besoins.  Fiction! <br><br>  Et vraiment ... à qui je plaisante?  Votre bonheur est susceptible d'être de courte durée.  Après tout, lorsque le concepteur lance le Talmud de nouvelles solutions d'interface utilisateur pour la page suivante ou «projet spécial», quelque chose va mal de toute façon. <br><br>  À ce stade, le développeur est confronté à la question <i>"DRY or not DRY"</i> ?  Dois-je en quelque sorte personnaliser les composants existants?  Oui, afin de ne pas retarder la régression sur les cas existants.  Ou agissez selon le principe «fonctionne - ne touchez pas» et écrivez de nouveaux composants à partir de zéro.  Dans le même temps, gonfler UIkit et compliquer le support. <br><br>  Si vous, comme beaucoup, avez été dans une telle situation, regardez sous la coupe! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pg/zi/h1/pgzih1gaphuoow-4dtwabbwl7he.png"></div><br><a name="habracut"></a><br>  Malgré la longue introduction, l'idée d'écrire cet article m'est venue après avoir lu l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un des fils de commentaires</a> sur Habré.  Là, les gars ont été sérieusement pulvérisés sur la façon de personnaliser le composant bouton sur React.  Eh bien, après avoir regardé deux de ces holivars dans Telegram, la nécessité d'écrire à ce sujet a finalement été renforcée. <br><br>  Pour commencer, essayons d'imaginer quelles «personnalisations» nous pourrions avoir besoin d'appliquer au composant. <br><br><h2>  Les styles </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ab/bi/ti/abbitiyyrsgmek-31gm13vo3bpw.png"></div><br>  Tout d'abord, il s'agit de la personnalisation des styles de composants.  Un exemple courant est un bouton gris, mais un bleu est nécessaire.  Ou un bouton sans coins arrondis et soudain, ils sont nécessaires.  Sur la base des holivars que j'ai lus, j'ai conclu qu'il existe environ 3 approches pour cela: <br><br><h4>  1. Styles globaux </h4><br>  Utilisez <s>toute la puissance des</s> styles CSS globaux, plutôt redirigés par <b>! Important</b> , afin que l'extérieur, globalement, essaie de chevaucher les styles du composant d'origine.  La décision, pour le moins, est controversée et trop simple.  De plus, une telle option n'est tout simplement pas toujours possible et, en même temps, viole désespérément toute encapsulation de styles.  Sauf s'il est bien sûr utilisé dans vos composants. <br><br><h4>  2. Passer des classes (styles) à partir du contexte parent </h4><br>  Aussi une décision assez controversée.  Il s'avère que nous créons un <i>accessoire</i> spécial, pour ainsi dire, par exemple, nous l'appellerons <b>classes</b> et juste au-dessus, nous immergons les classes nécessaires dans le composant. <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">classes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn-red btn-rounded"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Naturellement, une telle approche ne fonctionnera que si le composant prend en charge l'application de styles à son contenu de cette manière.  De plus, si le composant est un peu plus complexe et consiste en une structure imbriquée d'éléments HTML, alors évidemment appliquer des styles à tous sera problématique.  Ainsi, ils seront appliqués à l'élément racine du composant, puis, en utilisant les règles CSS, ils se répandront d'une manière ou d'une autre.  Malheureusement. <br><br><h4>  3. Définition du composant à l'aide d'accessoires </h4><br>  Cela semble être la solution la plus sensée, mais en même temps la moins flexible.  Autrement dit, nous nous attendons à ce que l'auteur du composant soit une sorte de génie et réfléchisse à l'avance à toutes les options.  Autrement dit, tout ce dont nous pouvons avoir besoin et déterminé tous les accessoires nécessaires pour tous les résultats souhaités: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bgColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"red"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rounded</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{true}</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Cela ne semble pas très probable, hein?  Peut-être. <br><br><h2>  Comportement </h2><br><img src="https://habrastorage.org/webt/dr/dp/9o/drdp9opsq9i-y99s-11yywrlok0.jpeg"><br><br>  Ici, c'est encore plus ambigu.  Tout d'abord, car les difficultés de personnalisation du comportement d'un composant proviennent de la tâche.  Plus le composant et sa logique sont complexes, et plus le changement que nous voulons apporter est complexe, plus il est difficile de faire ce changement.  Une sorte de tautologie s'est avérée ... Bref, vous comprenez!  ;-) <br><br>  Cependant, même ici, il existe un ensemble d'outils qui nous aident à personnaliser le composant ou non.  Comme nous parlons spécifiquement de l'approche par composants, je voudrais souligner les outils utiles suivants: <br><br><h4>  1. Travail pratique avec des accessoires </h4><br>  Tout d'abord, vous devez être capable d'imiter un ensemble d'accessoires de composants sans avoir à redécrire cet ensemble et à les proxy plus loin. <br><br>  De plus, si nous essayons d'ajouter un certain comportement au composant, alors, très probablement, nous devrons utiliser un ensemble supplémentaire d'accessoires qui ne sont pas nécessaires au composant d'origine.  Par conséquent, il est bon de pouvoir couper une partie des accessoires et de ne transférer que le nécessaire au composant d'origine.  En même temps, garder toutes les propriétés synchronisées. <br><br>  Le revers est quand nous voulons implémenter un cas spécial de comportement de composant.  En quelque sorte pour fixer une partie de son état sur une tâche spécifique. <br><br><h4>  2. Suivi du cycle de vie des composants et des événements </h4><br>  En d'autres termes, tout ce qui se passe à l'intérieur d'un composant ne doit pas être un livre complètement fermé.  Sinon, cela complique vraiment la personnalisation de son comportement. <br><br>  Je ne parle pas de violation d'encapsulation et d'interférence incontrôlée à l'intérieur.  Le composant doit être géré via son API publique (il s'agit généralement d'accessoires et / ou de méthodes).  Mais pour pouvoir en quelque sorte «découvrir» ce qui se passe à l'intérieur et suivre le changement de son état est toujours nécessaire. <br><br><h4>  3. Gestion impérative </h4><br>  Nous supposerons que je ne vous ai pas dit cela.  Et pourtant, parfois, c'est bien de pouvoir obtenir une instance d'un composant et impérativement "tirer les cordes".  Il vaut mieux éviter cela, mais dans des cas particulièrement complexes, vous ne pouvez pas vous en passer. <br><br>  Ok, en quelque sorte réglé la théorie.  Dans l'ensemble, tout est évident, mais tout n'est pas clair.  Par conséquent, il vaut la peine d'envisager au moins un cas réel. <br><br><h2>  Cas </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cn/ws/mj/cnwsmjfceo5s8vmfo4tgrs6nnfq.jpeg"></div><br><br>  J'ai mentionné ci-dessus que l'idée d'écrire un article est née de l'holivar sur la personnalisation d'un bouton.  Par conséquent, j'ai pensé qu'il serait symbolique de résoudre un tel cas.  Changer la couleur stupidement ou arrondir les coins serait trop facile, j'ai donc essayé de proposer un boîtier un peu plus complexe. <br><br>  Imaginez que nous ayons un certain composant du bouton de base, qui est utilisé dans la prison des emplacements d'application.  En outre, il implémente un comportement de base pour tous les boutons d'application, ainsi qu'un ensemble de styles encapsulés de base, qui, de temps en temps, sont synchronisés avec les guides d'interface utilisateur et tout cela. <br><br>  De plus, il devient nécessaire d'avoir un composant supplémentaire pour le bouton d'envoi au serveur (bouton d'envoi), qui, en plus des changements de style, nécessite un comportement supplémentaire.  Par exemple, il peut s'agir d'un dessin de la progression de l'envoi, ainsi que d'une représentation visuelle du résultat de cette action - avec ou sans succès. <br><br>  Cela pourrait ressembler à ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_p/wd/rv/_pwdrvup0bf3wiuq6mnawmchopg.jpeg"></div><br><br>  Il n'est pas difficile de deviner que le bouton de base se trouve à gauche et que le bouton d'envoi à droite est en état de réussite de la demande.  Eh bien, si l'affaire est claire - commençons! <br><br><h3>  Solution </h3><br>  Je ne pouvais toujours pas comprendre ce qui avait exactement causé l'holivar dans la décision sur React.  Apparemment, ce n'est pas si simple.  Par conséquent, je ne vais pas tenter ma chance et utiliser l'outil plus familier - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>SvelteJS</b></a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un cadre disparaissant de nouvelle génération</a> qui est presque parfait pour résoudre de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tels problèmes</a> . <br><br>  Nous sommes immédiatement d'accord, nous n'interférerons en aucune façon avec le code du bouton de base.  Nous supposons qu'il n'a pas été écrit par nous du tout, et son code est fermé pour corrections.  Dans ce cas, le composant du bouton de base ressemblera à ceci: <br><br>  <b>Button.html</b> <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { data() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">type</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'button'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">disabled</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">autofocus</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">value</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript"> }; } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/* scoped styles */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Et utilisé de cette façon: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cancel()"</span></span></span><span class="hljs-tag">&gt;</span></span>Cancel<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Veuillez noter que le composant bouton est vraiment très basique.  Il ne contient absolument aucun élément auxiliaire ou accessoire pouvant aider à la mise en œuvre de la version étendue du composant.  Ce composant ne prend même pas en charge le transfert de styles par des accessoires ou au moins une sorte de personnalisation intégrée, et tous les styles sont strictement isolés et ne fuient pas. <br><br>  Créer à partir de ce composant un autre, avec des fonctionnalités améliorées et même sans apporter de modifications, peut sembler une tâche facile.  Mais pas lorsque vous utilisez <b>Svelte</b> . <br><br>  Déterminons maintenant ce que le bouton Soumettre devrait être capable de faire: <br><br><ol><li>  Tout d'abord, le texte du cadre et du bouton doit être vert.  En vol stationnaire, l'arrière-plan doit également être vert au lieu de gris foncé. </li><li>  De plus, lorsqu'un bouton est enfoncé, il devrait «claquer» en un indicateur de progression rond. </li><li>  À la fin du processus (qui est contrôlé en externe), il est nécessaire que l'état du bouton puisse être changé en réussi (succès) ou non réussi (erreur).  Dans le même temps, le bouton de l'indicateur devrait se transformer soit en un badge vert avec une patte, soit un badge rouge avec une croix. </li><li>  Il est également nécessaire de pouvoir régler le temps après lequel le badge correspondant se transformera à nouveau en bouton dans son état d'origine (inactif). </li><li>  Et bien sûr, vous devez faire tout cela au-dessus du bouton de base en enregistrant et en appliquant tous les styles et accessoires à partir de là. </li></ol><br>  Fuh, pas une tâche facile.  Créons d'abord un nouveau composant et enveloppons-le avec le bouton de base: <br><br>  <b>SubmitButton.html</b> <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Button </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Button.html'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">components</span></span></span><span class="javascript">: { Button } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Bien que ce soit exactement le même bouton, pire encore - il ne sait même pas comment proxy les accessoires.  Cela n'a pas d'importance, nous y reviendrons plus tard. <br><br><h4>  Styliser </h4><br>  En attendant, réfléchissons à la façon dont nous pouvons styliser un nouveau bouton, à savoir changer les couleurs, selon la tâche.  Malheureusement, il semble que nous ne pouvons utiliser aucune des approches décrites ci-dessus. <br><br>  Les styles étant isolés à l'intérieur d'un bouton, des problèmes avec les styles globaux peuvent survenir.  Il est également impossible d'obtenir des styles à l'intérieur - le bouton de base ne prend tout simplement pas en charge cette fonctionnalité.  En plus de personnaliser l'apparence à l'aide d'accessoires.  De plus, nous aimerions que tous les styles écrits pour le nouveau bouton soient également encapsulés à l'intérieur de ce bouton et ne fuient pas. <br><br>  La solution est incroyablement simple, mais uniquement si vous utilisez déjà <b>Svelte</b> .  Donc, écrivez simplement les styles du nouveau bouton: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="css"> </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(button)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">2px</span></span></span><span class="css"> solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#1ECD97</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#1ECD97</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="css"> </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(button</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:hover)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#1ECD97</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#fff</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  L'une des notes clés de <b>Svelte</b> - les choses simples doivent être résolues simplement.  Le modificateur spécial <b>: global</b> dans cette version va générer du CSS de telle sorte que seuls les boutons à l'intérieur du bloc avec la classe d' <b>envoi</b> qui sont dans ce composant recevront les styles spécifiés. <br><br>  Même si le balisage du même type apparaît soudainement à tout autre endroit de l'application: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span>Button<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Les styles du composant <b>SubmitButton</b> ne «fuient» <b>en</b> aucune façon. <br><br>  En utilisant cette méthode, <b>Svelte</b> facilite la personnalisation facile des styles des composants imbriqués, tout en préservant l'encapsulation des styles des deux composants. <br><br><h4>  Nous jetons des accessoires et fixons le comportement </h4><br>  Eh bien, nous avons traité le style presque instantanément et sans accessoires supplémentaires et en passant directement les classes CSS.  Maintenant, vous devez proxy tous les accessoires du composant <b>Button</b> via le nouveau composant.  Cependant, je ne voudrais pas les décrire à nouveau.  Cependant, pour commencer, décidons des propriétés du nouveau composant. <br><br>  À en juger par la tâche, <b>SubmitButton</b> doit surveiller l'état, ainsi que fournir une opportunité de spécifier le délai entre le changement automatique d'un état réussi / d'erreur à l'état initial: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ... export </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">default</span></span></span><span class="actionscript"> { ... data() { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> { delay: </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1500</span></span></span><span class="actionscript">, status: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'idle'</span></span></span><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">// loading, success, error }; } }; </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Ainsi, notre nouveau bouton aura 4 états: repos, téléchargement, succès ou erreur.  De plus, par défaut, les 2 derniers états passeront automatiquement à l'état inactif après 1,5 seconde. <br><br>  Afin de jeter tous les accessoires transmis dans le composant <b>Button</b> , mais en même temps couper le <i>statut</i> et le <i>retard qui</i> sont évidemment invalides pour lui, nous allons écrire une propriété calculée spéciale.  Et après cela, nous utilisons simplement l'opérateur de <i>propagation</i> pour « <i>étaler</i> » les accessoires restants sur le composant intégré.  De plus, comme nous faisons exactement le bouton d'envoi, nous devons corriger le type de bouton afin qu'il ne puisse pas être modifié de l'extérieur: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">attrs</span></span></span><span class="javascript">: </span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">data</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> { delay, status, ...attrs } = data; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> attrs; } }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Assez simple et élégant. <br><br>  En conséquence, nous avons obtenu une version entièrement fonctionnelle du bouton de base avec des styles modifiés.  Il est temps d'implémenter le nouveau comportement des boutons. <br><br><h4>  Nous changeons et suivons le statut </h4><br>  Ainsi, lorsque vous cliquez sur le bouton <b>SubmitButton,</b> nous devons non seulement supprimer l'événement afin que le code utilisateur puisse le traiter (comme cela se fait dans <b>Button</b> ), mais également implémenter une logique métier supplémentaire - définir l'état de téléchargement.  Pour ce faire, saisissez simplement l'événement du bouton de base dans votre propre gestionnaire, faites ce dont vous avez besoin et envoyez-le plus loin: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"click(event)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ... export </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">default</span></span></span><span class="actionscript"> { ... methods: { click(e) { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.set({ status: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'loading'</span></span></span><span class="actionscript"> }); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.fire(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'click'</span></span></span><span class="actionscript">, e); } }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  En outre, le composant parent de ce bouton, qui contrôle le processus d'envoi des données lui-même, peut définir l'état d'envoi correspondant ( <i>succès / erreur</i> ) via des accessoires.  Dans le même temps, le bouton doit suivre un tel changement d'état et, après un temps spécifié, changer automatiquement l'état en <i>veille</i> .  Pour ce faire, utilisez le hook de mise à <b>jour du</b> <i>cycle de</i> <b>vie</b> : <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... onupdate({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">current</span></span></span><span class="javascript">: { status, delay }, changed }) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (changed.status &amp;&amp; [</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'success'</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'error'</span></span></span><span class="javascript">].includes(status)) { setTimeout(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.set({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">status</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'idle'</span></span></span><span class="javascript"> }), delay); } }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h4>  Touche finale </h4><br>  Il y a 2 autres points qui ne sont pas évidents à partir de la tâche et qui surviennent lors de la mise en œuvre.  Tout d'abord, pour que l'animation des métamorphoses des boutons soit fluide, vous devrez modifier le bouton lui-même avec les styles, et non avec un autre élément.  Pour ce faire, nous pouvons utiliser le même <b>: global</b> , donc il n'y a pas de problème.  Mais en plus, il est nécessaire que le balisage à l'intérieur du bouton soit caché dans tous les états, sauf <i>inactif</i> . <br><br>  Il convient de mentionner séparément que le balisage à l'intérieur du bouton peut être quelconque et qu'il est jeté dans le composant d'origine du bouton de base via des emplacements imbriqués.  Cependant, bien que cela semble menaçant, la solution est plus que primitive - il vous suffit d'envelopper le slot à l'intérieur du nouveau composant dans un élément supplémentaire et de lui appliquer les styles nécessaires: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"click(event)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> ... </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">transition</span></span></span><span class="css">: opacity </span><span class="hljs-number"><span class="css"><span class="hljs-number">0.3s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0.1s</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.loading</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css">, </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.success</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css">, </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.error</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">opacity</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; } ... </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  De plus, puisque le bouton ne se cache pas de la page, mais se transforme avec les statuts, il serait bien de le désactiver au moment de l'envoi.  En d'autres termes, si le bouton d'envoi a été défini sur <i>désactivé à l'</i> aide d'accessoires ou si l'état n'est pas <i>inactif</i> , vous devez désactiver le bouton.  Pour résoudre ce problème, nous écrivons une autre petite propriété calculée <i>isDisabled</i> et l'appliquons au composant imbriqué: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{isDisabled}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { ... isDisabled: </span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">{ status, disabled }</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> disabled || status !== </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'idle'</span></span></span><span class="javascript"> }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Tout irait bien, mais le bouton de base a un style qui le rend translucide à l'état désactivé, mais nous n'en avons pas besoin si le bouton n'est désactivé que temporairement en raison d'un changement de statut.  Tout de même vient à la rescousse <b>: global</b> : <br><br><pre> <code class="css hljs"> <span class="hljs-selector-class"><span class="hljs-selector-class">.submit</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.loading</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:global(button</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[disabled]</span></span>), <span class="hljs-selector-class"><span class="hljs-selector-class">.submit</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.success</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:global(button</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[disabled]</span></span>), <span class="hljs-selector-class"><span class="hljs-selector-class">.submit</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.error</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:global(button</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[disabled]</span></span>) { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br>  C'est tout!  Le nouveau bouton est magnifique et prêt à l'emploi! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qj/6d/lb/qj6dlbps1kko_nq4gmyoftezyzc.gif"></div><br><br>  Je vais intentionnellement omettre les détails de la mise en œuvre des animations et tout cela.  Non seulement parce qu'elle n'est pas directement liée au sujet de l'article, mais aussi parce que dans cette partie la démo ne s'est pas déroulée comme nous le souhaiterions.  Je n'ai pas compliqué ma tâche et mis en œuvre une solution complètement clé en main pour un tel bouton et porté assez bêtement un exemple trouvé sur Internet. <br><br>  Par conséquent, je ne conseille pas d'utiliser cette implémentation dans le travail.  N'oubliez pas, ce n'est qu'une démonstration de cet article. <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Démo interactive et exemple de code complet</a> <br><br>  Si vous avez aimé l'article et que vous vouliez en savoir plus sur <b>Svelte</b> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lisez d'</a> autres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">articles</a> .  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Comment faire une recherche d'utilisateur sur GitHub sans React + RxJS 6 + Recomposer»</a> .  Écoutez le podcast du Nouvel An <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RadioJS # 54</a> , où j'ai parlé en détail de ce qu'est <b>Svelte</b> , comment il «disparaît» et pourquoi ce n'est pas «encore un autre framework js». <br><br>  Découvrez la chaîne de télégramme en langue russe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SvelteJS</a> .  Nous sommes déjà plus de deux cents et nous serons ravis de vous voir! <br><br>  <b>P / s</b> <br><br>  Du coup, les directives de l'interface utilisateur ont changé.  Maintenant, les étiquettes de tous les boutons de l'application doivent être en majuscules.  Cependant, nous n'avons pas peur d'une telle tournure des événements.  Ajoutez <b>text-transform: majuscule;</b>  dans les styles du bouton de base et continuer à boire du café. <br><br>  Bonne journée de travail! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438834/">https://habr.com/ru/post/fr438834/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438820/index.html">Gestion des connaissances: quels documents sont nécessaires et que corriger en eux</a></li>
<li><a href="../fr438824/index.html">Cours abrégé de gestion à distance</a></li>
<li><a href="../fr438826/index.html">Resserrer l'anglais pour une entrevue - méthodologie et coûts de main-d'œuvre</a></li>
<li><a href="../fr438828/index.html">Lazarus - écriture d'un composant pour l'animation de sprite</a></li>
<li><a href="../fr438832/index.html">Comment ne pas rater le budget pour la production en série de cas: 20 exemples tirés de la pratique du Bureau of Engineering Design</a></li>
<li><a href="../fr438836/index.html">Surveillance de la température du serveur à faire soi-même</a></li>
<li><a href="../fr438838/index.html">Événements numériques à Moscou du 4 au 10 février</a></li>
<li><a href="../fr438840/index.html">Fierté et passion, l'histoire de transformer un rêve en projet spatial</a></li>
<li><a href="../fr438842/index.html">Ranger la playlist torrent-TV (Super Wash)</a></li>
<li><a href="../fr438850/index.html">Moscou JS 44 - annonce</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>