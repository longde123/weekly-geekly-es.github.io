<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèéÔ∏è üë®üèª‚Äçüé§ üõ≥Ô∏è Le designer a-t-il une nouvelle id√©e? Quoi de plus simple üëù üê¨ üßòüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, habrovchanin! Les concepteurs sont des gens id√©ologiques et des clients, en particulier avec leurs besoins commerciaux. 

 Imaginez que vous ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le designer a-t-il une nouvelle id√©e? Quoi de plus simple</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438834/"> Bonjour, <i>habrovchanin!</i>  Les concepteurs sont des gens id√©ologiques et des clients, en particulier avec leurs besoins commerciaux. <br><br>  Imaginez que vous avez empil√© votre meilleur UIkit au monde au plus cool% ins√©rez votre framework% JS.  Il semblerait qu'il y ait tout ce dont le projet a besoin.  Vous pouvez maintenant boire du caf√© et fermer toutes les nouvelles t√¢ches en lan√ßant des composants sur la page.  Encore mieux, si vous avez trouv√© un tel UIkit <s>dans une d√©charge</s> sur les espaces ouverts NPM et qu'il correspond parfaitement √† l'UX / UI actuel et √† ses besoins.  Fiction! <br><br>  Et vraiment ... √† qui je plaisante?  Votre bonheur est susceptible d'√™tre de courte dur√©e.  Apr√®s tout, lorsque le concepteur lance le Talmud de nouvelles solutions d'interface utilisateur pour la page suivante ou ¬´projet sp√©cial¬ª, quelque chose va mal de toute fa√ßon. <br><br>  √Ä ce stade, le d√©veloppeur est confront√© √† la question <i>"DRY or not DRY"</i> ?  Dois-je en quelque sorte personnaliser les composants existants?  Oui, afin de ne pas retarder la r√©gression sur les cas existants.  Ou agissez selon le principe ¬´fonctionne - ne touchez pas¬ª et √©crivez de nouveaux composants √† partir de z√©ro.  Dans le m√™me temps, gonfler UIkit et compliquer le support. <br><br>  Si vous, comme beaucoup, avez √©t√© dans une telle situation, regardez sous la coupe! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pg/zi/h1/pgzih1gaphuoow-4dtwabbwl7he.png"></div><br><a name="habracut"></a><br>  Malgr√© la longue introduction, l'id√©e d'√©crire cet article m'est venue apr√®s avoir lu l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un des fils de commentaires</a> sur Habr√©.  L√†, les gars ont √©t√© s√©rieusement pulv√©ris√©s sur la fa√ßon de personnaliser le composant bouton sur React.  Eh bien, apr√®s avoir regard√© deux de ces holivars dans Telegram, la n√©cessit√© d'√©crire √† ce sujet a finalement √©t√© renforc√©e. <br><br>  Pour commencer, essayons d'imaginer quelles ¬´personnalisations¬ª nous pourrions avoir besoin d'appliquer au composant. <br><br><h2>  Les styles </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ab/bi/ti/abbitiyyrsgmek-31gm13vo3bpw.png"></div><br>  Tout d'abord, il s'agit de la personnalisation des styles de composants.  Un exemple courant est un bouton gris, mais un bleu est n√©cessaire.  Ou un bouton sans coins arrondis et soudain, ils sont n√©cessaires.  Sur la base des holivars que j'ai lus, j'ai conclu qu'il existe environ 3 approches pour cela: <br><br><h4>  1. Styles globaux </h4><br>  Utilisez <s>toute la puissance des</s> styles CSS globaux, plut√¥t redirig√©s par <b>! Important</b> , afin que l'ext√©rieur, globalement, essaie de chevaucher les styles du composant d'origine.  La d√©cision, pour le moins, est controvers√©e et trop simple.  De plus, une telle option n'est tout simplement pas toujours possible et, en m√™me temps, viole d√©sesp√©r√©ment toute encapsulation de styles.  Sauf s'il est bien s√ªr utilis√© dans vos composants. <br><br><h4>  2. Passer des classes (styles) √† partir du contexte parent </h4><br>  Aussi une d√©cision assez controvers√©e.  Il s'av√®re que nous cr√©ons un <i>accessoire</i> sp√©cial, pour ainsi dire, par exemple, nous l'appellerons <b>classes</b> et juste au-dessus, nous immergons les classes n√©cessaires dans le composant. <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">classes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn-red btn-rounded"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Naturellement, une telle approche ne fonctionnera que si le composant prend en charge l'application de styles √† son contenu de cette mani√®re.  De plus, si le composant est un peu plus complexe et consiste en une structure imbriqu√©e d'√©l√©ments HTML, alors √©videmment appliquer des styles √† tous sera probl√©matique.  Ainsi, ils seront appliqu√©s √† l'√©l√©ment racine du composant, puis, en utilisant les r√®gles CSS, ils se r√©pandront d'une mani√®re ou d'une autre.  Malheureusement. <br><br><h4>  3. D√©finition du composant √† l'aide d'accessoires </h4><br>  Cela semble √™tre la solution la plus sens√©e, mais en m√™me temps la moins flexible.  Autrement dit, nous nous attendons √† ce que l'auteur du composant soit une sorte de g√©nie et r√©fl√©chisse √† l'avance √† toutes les options.  Autrement dit, tout ce dont nous pouvons avoir besoin et d√©termin√© tous les accessoires n√©cessaires pour tous les r√©sultats souhait√©s: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bgColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"red"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rounded</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{true}</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Cela ne semble pas tr√®s probable, hein?  Peut-√™tre. <br><br><h2>  Comportement </h2><br><img src="https://habrastorage.org/webt/dr/dp/9o/drdp9opsq9i-y99s-11yywrlok0.jpeg"><br><br>  Ici, c'est encore plus ambigu.  Tout d'abord, car les difficult√©s de personnalisation du comportement d'un composant proviennent de la t√¢che.  Plus le composant et sa logique sont complexes, et plus le changement que nous voulons apporter est complexe, plus il est difficile de faire ce changement.  Une sorte de tautologie s'est av√©r√©e ... Bref, vous comprenez!  ;-) <br><br>  Cependant, m√™me ici, il existe un ensemble d'outils qui nous aident √† personnaliser le composant ou non.  Comme nous parlons sp√©cifiquement de l'approche par composants, je voudrais souligner les outils utiles suivants: <br><br><h4>  1. Travail pratique avec des accessoires </h4><br>  Tout d'abord, vous devez √™tre capable d'imiter un ensemble d'accessoires de composants sans avoir √† red√©crire cet ensemble et √† les proxy plus loin. <br><br>  De plus, si nous essayons d'ajouter un certain comportement au composant, alors, tr√®s probablement, nous devrons utiliser un ensemble suppl√©mentaire d'accessoires qui ne sont pas n√©cessaires au composant d'origine.  Par cons√©quent, il est bon de pouvoir couper une partie des accessoires et de ne transf√©rer que le n√©cessaire au composant d'origine.  En m√™me temps, garder toutes les propri√©t√©s synchronis√©es. <br><br>  Le revers est quand nous voulons impl√©menter un cas sp√©cial de comportement de composant.  En quelque sorte pour fixer une partie de son √©tat sur une t√¢che sp√©cifique. <br><br><h4>  2. Suivi du cycle de vie des composants et des √©v√©nements </h4><br>  En d'autres termes, tout ce qui se passe √† l'int√©rieur d'un composant ne doit pas √™tre un livre compl√®tement ferm√©.  Sinon, cela complique vraiment la personnalisation de son comportement. <br><br>  Je ne parle pas de violation d'encapsulation et d'interf√©rence incontr√¥l√©e √† l'int√©rieur.  Le composant doit √™tre g√©r√© via son API publique (il s'agit g√©n√©ralement d'accessoires et / ou de m√©thodes).  Mais pour pouvoir en quelque sorte ¬´d√©couvrir¬ª ce qui se passe √† l'int√©rieur et suivre le changement de son √©tat est toujours n√©cessaire. <br><br><h4>  3. Gestion imp√©rative </h4><br>  Nous supposerons que je ne vous ai pas dit cela.  Et pourtant, parfois, c'est bien de pouvoir obtenir une instance d'un composant et imp√©rativement "tirer les cordes".  Il vaut mieux √©viter cela, mais dans des cas particuli√®rement complexes, vous ne pouvez pas vous en passer. <br><br>  Ok, en quelque sorte r√©gl√© la th√©orie.  Dans l'ensemble, tout est √©vident, mais tout n'est pas clair.  Par cons√©quent, il vaut la peine d'envisager au moins un cas r√©el. <br><br><h2>  Cas </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cn/ws/mj/cnwsmjfceo5s8vmfo4tgrs6nnfq.jpeg"></div><br><br>  J'ai mentionn√© ci-dessus que l'id√©e d'√©crire un article est n√©e de l'holivar sur la personnalisation d'un bouton.  Par cons√©quent, j'ai pens√© qu'il serait symbolique de r√©soudre un tel cas.  Changer la couleur stupidement ou arrondir les coins serait trop facile, j'ai donc essay√© de proposer un bo√Ætier un peu plus complexe. <br><br>  Imaginez que nous ayons un certain composant du bouton de base, qui est utilis√© dans la prison des emplacements d'application.  En outre, il impl√©mente un comportement de base pour tous les boutons d'application, ainsi qu'un ensemble de styles encapsul√©s de base, qui, de temps en temps, sont synchronis√©s avec les guides d'interface utilisateur et tout cela. <br><br>  De plus, il devient n√©cessaire d'avoir un composant suppl√©mentaire pour le bouton d'envoi au serveur (bouton d'envoi), qui, en plus des changements de style, n√©cessite un comportement suppl√©mentaire.  Par exemple, il peut s'agir d'un dessin de la progression de l'envoi, ainsi que d'une repr√©sentation visuelle du r√©sultat de cette action - avec ou sans succ√®s. <br><br>  Cela pourrait ressembler √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_p/wd/rv/_pwdrvup0bf3wiuq6mnawmchopg.jpeg"></div><br><br>  Il n'est pas difficile de deviner que le bouton de base se trouve √† gauche et que le bouton d'envoi √† droite est en √©tat de r√©ussite de la demande.  Eh bien, si l'affaire est claire - commen√ßons! <br><br><h3>  Solution </h3><br>  Je ne pouvais toujours pas comprendre ce qui avait exactement caus√© l'holivar dans la d√©cision sur React.  Apparemment, ce n'est pas si simple.  Par cons√©quent, je ne vais pas tenter ma chance et utiliser l'outil plus familier - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>SvelteJS</b></a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un cadre disparaissant de nouvelle g√©n√©ration</a> qui est presque parfait pour r√©soudre de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tels probl√®mes</a> . <br><br>  Nous sommes imm√©diatement d'accord, nous n'interf√©rerons en aucune fa√ßon avec le code du bouton de base.  Nous supposons qu'il n'a pas √©t√© √©crit par nous du tout, et son code est ferm√© pour corrections.  Dans ce cas, le composant du bouton de base ressemblera √† ceci: <br><br>  <b>Button.html</b> <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { data() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">type</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'button'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">disabled</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">autofocus</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">value</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript"> }; } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/* scoped styles */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Et utilis√© de cette fa√ßon: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cancel()"</span></span></span><span class="hljs-tag">&gt;</span></span>Cancel<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Veuillez noter que le composant bouton est vraiment tr√®s basique.  Il ne contient absolument aucun √©l√©ment auxiliaire ou accessoire pouvant aider √† la mise en ≈ìuvre de la version √©tendue du composant.  Ce composant ne prend m√™me pas en charge le transfert de styles par des accessoires ou au moins une sorte de personnalisation int√©gr√©e, et tous les styles sont strictement isol√©s et ne fuient pas. <br><br>  Cr√©er √† partir de ce composant un autre, avec des fonctionnalit√©s am√©lior√©es et m√™me sans apporter de modifications, peut sembler une t√¢che facile.  Mais pas lorsque vous utilisez <b>Svelte</b> . <br><br>  D√©terminons maintenant ce que le bouton Soumettre devrait √™tre capable de faire: <br><br><ol><li>  Tout d'abord, le texte du cadre et du bouton doit √™tre vert.  En vol stationnaire, l'arri√®re-plan doit √©galement √™tre vert au lieu de gris fonc√©. </li><li>  De plus, lorsqu'un bouton est enfonc√©, il devrait ¬´claquer¬ª en un indicateur de progression rond. </li><li>  √Ä la fin du processus (qui est contr√¥l√© en externe), il est n√©cessaire que l'√©tat du bouton puisse √™tre chang√© en r√©ussi (succ√®s) ou non r√©ussi (erreur).  Dans le m√™me temps, le bouton de l'indicateur devrait se transformer soit en un badge vert avec une patte, soit un badge rouge avec une croix. </li><li>  Il est √©galement n√©cessaire de pouvoir r√©gler le temps apr√®s lequel le badge correspondant se transformera √† nouveau en bouton dans son √©tat d'origine (inactif). </li><li>  Et bien s√ªr, vous devez faire tout cela au-dessus du bouton de base en enregistrant et en appliquant tous les styles et accessoires √† partir de l√†. </li></ol><br>  Fuh, pas une t√¢che facile.  Cr√©ons d'abord un nouveau composant et enveloppons-le avec le bouton de base: <br><br>  <b>SubmitButton.html</b> <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Button </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Button.html'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">components</span></span></span><span class="javascript">: { Button } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Bien que ce soit exactement le m√™me bouton, pire encore - il ne sait m√™me pas comment proxy les accessoires.  Cela n'a pas d'importance, nous y reviendrons plus tard. <br><br><h4>  Styliser </h4><br>  En attendant, r√©fl√©chissons √† la fa√ßon dont nous pouvons styliser un nouveau bouton, √† savoir changer les couleurs, selon la t√¢che.  Malheureusement, il semble que nous ne pouvons utiliser aucune des approches d√©crites ci-dessus. <br><br>  Les styles √©tant isol√©s √† l'int√©rieur d'un bouton, des probl√®mes avec les styles globaux peuvent survenir.  Il est √©galement impossible d'obtenir des styles √† l'int√©rieur - le bouton de base ne prend tout simplement pas en charge cette fonctionnalit√©.  En plus de personnaliser l'apparence √† l'aide d'accessoires.  De plus, nous aimerions que tous les styles √©crits pour le nouveau bouton soient √©galement encapsul√©s √† l'int√©rieur de ce bouton et ne fuient pas. <br><br>  La solution est incroyablement simple, mais uniquement si vous utilisez d√©j√† <b>Svelte</b> .  Donc, √©crivez simplement les styles du nouveau bouton: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="css"> </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(button)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">2px</span></span></span><span class="css"> solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#1ECD97</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#1ECD97</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="css"> </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(button</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:hover)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#1ECD97</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#fff</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  L'une des notes cl√©s de <b>Svelte</b> - les choses simples doivent √™tre r√©solues simplement.  Le modificateur sp√©cial <b>: global</b> dans cette version va g√©n√©rer du CSS de telle sorte que seuls les boutons √† l'int√©rieur du bloc avec la classe d' <b>envoi</b> qui sont dans ce composant recevront les styles sp√©cifi√©s. <br><br>  M√™me si le balisage du m√™me type appara√Æt soudainement √† tout autre endroit de l'application: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span>Button<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Les styles du composant <b>SubmitButton</b> ne ¬´fuient¬ª <b>en</b> aucune fa√ßon. <br><br>  En utilisant cette m√©thode, <b>Svelte</b> facilite la personnalisation facile des styles des composants imbriqu√©s, tout en pr√©servant l'encapsulation des styles des deux composants. <br><br><h4>  Nous jetons des accessoires et fixons le comportement </h4><br>  Eh bien, nous avons trait√© le style presque instantan√©ment et sans accessoires suppl√©mentaires et en passant directement les classes CSS.  Maintenant, vous devez proxy tous les accessoires du composant <b>Button</b> via le nouveau composant.  Cependant, je ne voudrais pas les d√©crire √† nouveau.  Cependant, pour commencer, d√©cidons des propri√©t√©s du nouveau composant. <br><br>  √Ä en juger par la t√¢che, <b>SubmitButton</b> doit surveiller l'√©tat, ainsi que fournir une opportunit√© de sp√©cifier le d√©lai entre le changement automatique d'un √©tat r√©ussi / d'erreur √† l'√©tat initial: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ... export </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">default</span></span></span><span class="actionscript"> { ... data() { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> { delay: </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1500</span></span></span><span class="actionscript">, status: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'idle'</span></span></span><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">// loading, success, error }; } }; </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Ainsi, notre nouveau bouton aura 4 √©tats: repos, t√©l√©chargement, succ√®s ou erreur.  De plus, par d√©faut, les 2 derniers √©tats passeront automatiquement √† l'√©tat inactif apr√®s 1,5 seconde. <br><br>  Afin de jeter tous les accessoires transmis dans le composant <b>Button</b> , mais en m√™me temps couper le <i>statut</i> et le <i>retard qui</i> sont √©videmment invalides pour lui, nous allons √©crire une propri√©t√© calcul√©e sp√©ciale.  Et apr√®s cela, nous utilisons simplement l'op√©rateur de <i>propagation</i> pour ¬´ <i>√©taler</i> ¬ª les accessoires restants sur le composant int√©gr√©.  De plus, comme nous faisons exactement le bouton d'envoi, nous devons corriger le type de bouton afin qu'il ne puisse pas √™tre modifi√© de l'ext√©rieur: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">attrs</span></span></span><span class="javascript">: </span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">data</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> { delay, status, ...attrs } = data; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> attrs; } }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Assez simple et √©l√©gant. <br><br>  En cons√©quence, nous avons obtenu une version enti√®rement fonctionnelle du bouton de base avec des styles modifi√©s.  Il est temps d'impl√©menter le nouveau comportement des boutons. <br><br><h4>  Nous changeons et suivons le statut </h4><br>  Ainsi, lorsque vous cliquez sur le bouton <b>SubmitButton,</b> nous devons non seulement supprimer l'√©v√©nement afin que le code utilisateur puisse le traiter (comme cela se fait dans <b>Button</b> ), mais √©galement impl√©menter une logique m√©tier suppl√©mentaire - d√©finir l'√©tat de t√©l√©chargement.  Pour ce faire, saisissez simplement l'√©v√©nement du bouton de base dans votre propre gestionnaire, faites ce dont vous avez besoin et envoyez-le plus loin: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"click(event)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ... export </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">default</span></span></span><span class="actionscript"> { ... methods: { click(e) { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.set({ status: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'loading'</span></span></span><span class="actionscript"> }); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.fire(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'click'</span></span></span><span class="actionscript">, e); } }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  En outre, le composant parent de ce bouton, qui contr√¥le le processus d'envoi des donn√©es lui-m√™me, peut d√©finir l'√©tat d'envoi correspondant ( <i>succ√®s / erreur</i> ) via des accessoires.  Dans le m√™me temps, le bouton doit suivre un tel changement d'√©tat et, apr√®s un temps sp√©cifi√©, changer automatiquement l'√©tat en <i>veille</i> .  Pour ce faire, utilisez le hook de mise √† <b>jour du</b> <i>cycle de</i> <b>vie</b> : <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... onupdate({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">current</span></span></span><span class="javascript">: { status, delay }, changed }) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (changed.status &amp;&amp; [</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'success'</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'error'</span></span></span><span class="javascript">].includes(status)) { setTimeout(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.set({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">status</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'idle'</span></span></span><span class="javascript"> }), delay); } }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h4>  Touche finale </h4><br>  Il y a 2 autres points qui ne sont pas √©vidents √† partir de la t√¢che et qui surviennent lors de la mise en ≈ìuvre.  Tout d'abord, pour que l'animation des m√©tamorphoses des boutons soit fluide, vous devrez modifier le bouton lui-m√™me avec les styles, et non avec un autre √©l√©ment.  Pour ce faire, nous pouvons utiliser le m√™me <b>: global</b> , donc il n'y a pas de probl√®me.  Mais en plus, il est n√©cessaire que le balisage √† l'int√©rieur du bouton soit cach√© dans tous les √©tats, sauf <i>inactif</i> . <br><br>  Il convient de mentionner s√©par√©ment que le balisage √† l'int√©rieur du bouton peut √™tre quelconque et qu'il est jet√© dans le composant d'origine du bouton de base via des emplacements imbriqu√©s.  Cependant, bien que cela semble mena√ßant, la solution est plus que primitive - il vous suffit d'envelopper le slot √† l'int√©rieur du nouveau composant dans un √©l√©ment suppl√©mentaire et de lui appliquer les styles n√©cessaires: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"click(event)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> ... </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">transition</span></span></span><span class="css">: opacity </span><span class="hljs-number"><span class="css"><span class="hljs-number">0.3s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0.1s</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.loading</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css">, </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.success</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css">, </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.submit</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.error</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">span</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">opacity</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; } ... </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  De plus, puisque le bouton ne se cache pas de la page, mais se transforme avec les statuts, il serait bien de le d√©sactiver au moment de l'envoi.  En d'autres termes, si le bouton d'envoi a √©t√© d√©fini sur <i>d√©sactiv√© √† l'</i> aide d'accessoires ou si l'√©tat n'est pas <i>inactif</i> , vous devez d√©sactiver le bouton.  Pour r√©soudre ce probl√®me, nous √©crivons une autre petite propri√©t√© calcul√©e <i>isDisabled</i> et l'appliquons au composant imbriqu√©: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...attrs</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{isDisabled}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { ... isDisabled: </span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">{ status, disabled }</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> disabled || status !== </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'idle'</span></span></span><span class="javascript"> }, }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Tout irait bien, mais le bouton de base a un style qui le rend translucide √† l'√©tat d√©sactiv√©, mais nous n'en avons pas besoin si le bouton n'est d√©sactiv√© que temporairement en raison d'un changement de statut.  Tout de m√™me vient √† la rescousse <b>: global</b> : <br><br><pre> <code class="css hljs"> <span class="hljs-selector-class"><span class="hljs-selector-class">.submit</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.loading</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:global(button</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[disabled]</span></span>), <span class="hljs-selector-class"><span class="hljs-selector-class">.submit</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.success</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:global(button</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[disabled]</span></span>), <span class="hljs-selector-class"><span class="hljs-selector-class">.submit</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.error</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:global(button</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[disabled]</span></span>) { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br>  C'est tout!  Le nouveau bouton est magnifique et pr√™t √† l'emploi! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qj/6d/lb/qj6dlbps1kko_nq4gmyoftezyzc.gif"></div><br><br>  Je vais intentionnellement omettre les d√©tails de la mise en ≈ìuvre des animations et tout cela.  Non seulement parce qu'elle n'est pas directement li√©e au sujet de l'article, mais aussi parce que dans cette partie la d√©mo ne s'est pas d√©roul√©e comme nous le souhaiterions.  Je n'ai pas compliqu√© ma t√¢che et mis en ≈ìuvre une solution compl√®tement cl√© en main pour un tel bouton et port√© assez b√™tement un exemple trouv√© sur Internet. <br><br>  Par cons√©quent, je ne conseille pas d'utiliser cette impl√©mentation dans le travail.  N'oubliez pas, ce n'est qu'une d√©monstration de cet article. <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©mo interactive et exemple de code complet</a> <br><br>  Si vous avez aim√© l'article et que vous vouliez en savoir plus sur <b>Svelte</b> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lisez d'</a> autres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">articles</a> .  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Comment faire une recherche d'utilisateur sur GitHub sans React + RxJS 6 + Recomposer¬ª</a> .  √âcoutez le podcast du Nouvel An <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RadioJS # 54</a> , o√π j'ai parl√© en d√©tail de ce qu'est <b>Svelte</b> , comment il ¬´dispara√Æt¬ª et pourquoi ce n'est pas ¬´encore un autre framework js¬ª. <br><br>  D√©couvrez la cha√Æne de t√©l√©gramme en langue russe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SvelteJS</a> .  Nous sommes d√©j√† plus de deux cents et nous serons ravis de vous voir! <br><br>  <b>P / s</b> <br><br>  Du coup, les directives de l'interface utilisateur ont chang√©.  Maintenant, les √©tiquettes de tous les boutons de l'application doivent √™tre en majuscules.  Cependant, nous n'avons pas peur d'une telle tournure des √©v√©nements.  Ajoutez <b>text-transform: majuscule;</b>  dans les styles du bouton de base et continuer √† boire du caf√©. <br><br>  Bonne journ√©e de travail! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438834/">https://habr.com/ru/post/fr438834/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438820/index.html">Gestion des connaissances: quels documents sont n√©cessaires et que corriger en eux</a></li>
<li><a href="../fr438824/index.html">Cours abr√©g√© de gestion √† distance</a></li>
<li><a href="../fr438826/index.html">Resserrer l'anglais pour une entrevue - m√©thodologie et co√ªts de main-d'≈ìuvre</a></li>
<li><a href="../fr438828/index.html">Lazarus - √©criture d'un composant pour l'animation de sprite</a></li>
<li><a href="../fr438832/index.html">Comment ne pas rater le budget pour la production en s√©rie de cas: 20 exemples tir√©s de la pratique du Bureau of Engineering Design</a></li>
<li><a href="../fr438836/index.html">Surveillance de la temp√©rature du serveur √† faire soi-m√™me</a></li>
<li><a href="../fr438838/index.html">√âv√©nements num√©riques √† Moscou du 4 au 10 f√©vrier</a></li>
<li><a href="../fr438840/index.html">Fiert√© et passion, l'histoire de transformer un r√™ve en projet spatial</a></li>
<li><a href="../fr438842/index.html">Ranger la playlist torrent-TV (Super Wash)</a></li>
<li><a href="../fr438850/index.html">Moscou JS 44 - annonce</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>