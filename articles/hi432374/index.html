<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЬНЁЯП╛ ЁЯСиЁЯП╛тАНЁЯдЭтАНЁЯСиЁЯП╗ ЁЯШб рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рдЕрддреНрдпрдзрд┐рдХ рд╕реБрд▓рдн рдФрд░ рд╕реНрдХреЗрд▓реЗрдмрд▓ рдЗрд▓рд╛рд╕реНрдЯрд┐рд╕рд░реНрдЪ ЁЯТ│ ЁЯзС ЁЯХУ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓реА рдкреЛрд╕реНрдЯ рдореЗрдВ, рд╣рдордиреЗ MongoDB рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реЗрдЯ рдХреЛ рд╕реНрдХреЗрд▓ рдХрд┐рдпрд╛ рдФрд░ рд╕реНрдЯреЗрдЯрдлреБрд▓рд╕реЗрдЯ рдкреЗрд╢ рдХрд┐рдпрд╛ред рдЕрдм рд╣рдо рдЗрд▓рд╛рд╕реНрдЯрд┐рд╕рд░реНрдЪ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреНрд▓рд╕реНрдЯрд░ (рдЕрдиреНрдп рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕, рдбреЗрдЯрд╛ рдиреЛ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рдЕрддреНрдпрдзрд┐рдХ рд╕реБрд▓рдн рдФрд░ рд╕реНрдХреЗрд▓реЗрдмрд▓ рдЗрд▓рд╛рд╕реНрдЯрд┐рд╕рд░реНрдЪ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/432374/"><p><img src="https://habrastorage.org/getpro/habr/post_images/c87/9a8/814/c879a8814087c8665d5b0259c9b36268.jpg" alt="рдЫрд╡рд┐"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓реА рдкреЛрд╕реНрдЯ рдореЗрдВ,</a> рд╣рдордиреЗ MongoDB рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реЗрдЯ рдХреЛ рд╕реНрдХреЗрд▓ рдХрд┐рдпрд╛ рдФрд░ рд╕реНрдЯреЗрдЯрдлреБрд▓рд╕реЗрдЯ рдкреЗрд╢ рдХрд┐рдпрд╛ред  рдЕрдм рд╣рдо рдЗрд▓рд╛рд╕реНрдЯрд┐рд╕рд░реНрдЪ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреНрд▓рд╕реНрдЯрд░ (рдЕрдиреНрдп рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕, рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде) рдХреЗ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди рдореЗрдВ рд▓рдЧреЗ рд░рд╣реЗрдВрдЧреЗ рдФрд░ ES-HQ рдФрд░ Kibana рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </p><br><h3 id="vam-ponadobyatsya">  рдЖрдкрдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: </h3><br><ol><li>  рдПрд▓реАрд╕реНрдЯреЗрдХрд░реНрдЪ рдХреА рдПрдХ рдмреБрдирд┐рдпрд╛рджреА рд╕рдордЭ, рдЗрд╕рдХреЗ рдкреНрд░рдХрд╛рд░, рдиреЛрдбреНрд╕ рдФрд░ рдЙрдирдХреА рднреВрдорд┐рдХрд╛рдПрдВред </li><li>  рдХрдо рд╕реЗ рдХрдо рддреАрди рдиреЛрдбреНрд╕ (рдХрдо рд╕реЗ рдХрдо рдЪрд╛рд░ рдХреЛрд░, 4 рдЬреАрдмреА) рдХреЗ рд╕рд╛рде рдПрдХ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ред </li><li>  рдХрд┐рдмрдирд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ред <a name="habracut"></a></li></ol><br><h3 id="arhitektura-razvertyvaniya">  рддреИрдирд╛рддреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ </h3><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c6e/1ba/65c/c6e1ba65c2ad1c170be4f665bc969be1.jpg" alt="рдЫрд╡рд┐"></p><br><ul><li>  рдПрд▓рд┐рдпрд╕реНрдЯрд┐рдХреНрд╕ рдЦреЛрдЬ <strong>рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдХреЛ</strong> <strong>рд╕реНрдЯреЗрдЯрдлреБрд▓рд╕реЗрдЯ рдХреЗ</strong> рд░реВрдк рдореЗрдВ рдПрдХ рд╣реЗрдбрд▓реЗрд╕ рд╕реЗрд╡рд╛ рдХреЗ рд╕рд╛рде рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ <strong>рд╕реНрдерд┐рд░ рдиреЗрдЯрд╡рд░реНрдХ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реЛрдВ</strong> ред </li><li>  рдПрд▓рд┐рдпрдЯрд╕рд░реНрдЪ <strong>рдорд╛рд╕реНрдЯрд░реНрдиреЛрдбреНрд╕</strong> рдХреЛ рдПрдХ рд╣реЗрдбрд▓реЗрд╕ рд╕реЗрд╡рд╛ рдХреЗ рд╕рд╛рде рдПрдХ <strong>рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЗ</strong> рд░реВрдк рдореЗрдВ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ <strong>рдСрдЯреЛ рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рд╣реИ</strong> ред </li><li>  <strong>рдЗрд▓рд╛рд╕реНрдЯрд┐рдХреНрд╕рдЦреЛрдЬ</strong> <strong>рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдбреНрд╕ рдкрд░ рдкреЙрдбреНрд╕ рдХреЛ</strong> рдПрдХ рдЖрдВрддрд░рд┐рдХ рд╕реЗрд╡рд╛ рдХреЗ рд╕рд╛рде рдПрдХ <strong>рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЗ</strong> рд░реВрдк рдореЗрдВ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдк рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдХреЛ <strong>рдкрдврд╝рдиреЗ / рд▓рд┐рдЦрдиреЗ рдХреЗ</strong> рдЕрдиреБрд░реЛрдз рднреЗрдЬ рд╕рдХреЗрдВред </li><li>  <strong>Kibanaetes</strong> <strong>рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд╣рд░</strong> рдЙрдкрд▓рдмреНрдз рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде <strong>Kibana рдФрд░ ElasticHQ рдкреЙрдбреНрд╕</strong> рдХреЛ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЗ рд░реВрдк <strong>рдореЗрдВ</strong> рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди <strong>рд╕рдмрдиреЗрдЯ рдХреЗ рдЕрдВрджрд░</strong> рд╕реНрдерд┐рдд рд╣реИрдВ (рд╡реЗ рдЕрдирд╛рд╡рд╢реНрдпрдХ рд░реВрдк рд╕реЗ рдмрд╛рд╣рд░ рдХреА рдУрд░ рдЦреБрд▓реЗ рдирд╣реАрдВ рд╣реИрдВ)ред </li><li>  <strong>HPA (рд╣реЛрд░рд┐рдЬрдирд▓ рдкреЙрдб рдСрдЯреЛрд╕рд╛рд▓рд░)</strong> <strong>рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдбреНрд╕ рдХреЗ</strong> рд▓рд┐рдП рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЙрдЪреНрдЪ рднрд╛рд░ рдкрд░ рдХреНрд╖реИрддрд┐рдЬ рдСрдЯреЛрд╕реНрдХреЛрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред <br>  "рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдпрд╛рдж рд░рдЦреЗрдВ: <br><ol><li> <strong>ES_JAVA_OPTS</strong> рдЪрд░ред </li><li>  <strong>CLUSTER_NAME</strong> рдЪрд░ред </li><li>  рд╡рд┐рднрд╛рдЬрд┐рдд рдорд╕реНрддрд┐рд╖реНрдХ рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рд╛рдореА рдХреА рддреИрдирд╛рддреА рдХреЗ рд▓рд┐рдП <strong>NUMBER_OF_MASTERS</strong> рдЪрд░ред  рдпрджрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 3 рд╕реНрд╡рд╛рдореА рд╣реИрдВ, рддреЛ 2 рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВред </li><li>  рдпрджрд┐ рдХрд╛рд░реНрдп рдиреЛрдб рдЧрд┐рд░ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрдЪреНрдЪ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреА рдЧрд╛рд░рдВрдЯреА рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди <strong>рдЖрддреНрдореАрдпрддрд╛ рдХреЗ</strong> рд▓рд┐рдП <strong>рдПрдВрдЯреА-рдПрдлрд┐рдирд┐рдЯреА</strong> рдирд┐рдпрдоред <br>  " <br>  рдЖрдЗрдП рдЗрди рд╕реЗрд╡рд╛рдУрдВ рдХреЛ GKE рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рддреИрдирд╛рдд рдХрд░реЗрдВред </li></ol></li></ul><br><pre><code class="plaintext hljs">kind: Namespace metadata: name: elasticsearch --- apiVersion: apps/v1beta1 kind: Deployment metadata: name: es-master namespace: elasticsearch labels: component: elasticsearch role: master spec: replicas: 3 template: metadata: labels: component: elasticsearch role: master spec: affinity: podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 100 podAffinityTerm: labelSelector: matchExpressions: - key: role operator: In values: - master topologyKey: kubernetes.io/hostname initContainers: - name: init-sysctl image: busybox:1.27.2 command: - sysctl - -w - vm.max_map_count=262144 securityContext: privileged: true containers: - name: es-master image: quay.io/pires/docker-elasticsearch-kubernetes:6.2.4 env: - name: NAMESPACE valueFrom: fieldRef: fieldPath: metadata.namespace - name: NODE_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: CLUSTER_NAME value: my-es - name: NUMBER_OF_MASTERS value: "2" - name: NODE_MASTER value: "true" - name: NODE_INGEST value: "false" - name: NODE_DATA value: "false" - name: HTTP_ENABLE value: "false" - name: ES_JAVA_OPTS value: -Xms256m -Xmx256m - name: PROCESSORS valueFrom: resourceFieldRef: resource: limits.cpu resources: limits: cpu: 2 ports: - containerPort: 9300 name: transport volumeMounts: - name: storage mountPath: /data volumes: - emptyDir: medium: "" name: "storage" --- apiVersion: v1 kind: Service metadata: name: elasticsearch-discovery namespace: elasticsearch labels: component: elasticsearch role: master spec: selector: component: elasticsearch role: master ports: - name: transport port: 9300 protocol: TCP clusterIP: None view rawes-master.yml hosted with love by GitHub</code> </pre> <br><p>  (рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП рддреИрдирд╛рддреА рдФрд░ рд╣реЗрдбрд▓реЗрд╕ рд╕реЗрд╡рд╛) </p><br><pre> <code class="plaintext hljs">root$ kubectl -n elasticsearch get all NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE deploy/es-master 3 3 3 3 32s NAME DESIRED CURRENT READY AGE rs/es-master-594b58b86c 3 3 3 31s NAME READY STATUS RESTARTS AGE po/es-master-594b58b86c-9jkj2 1/1 Running 0 31s po/es-master-594b58b86c-bj7g7 1/1 Running 0 31s po/es-master-594b58b86c-lfpps 1/1 Running 0 31s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE svc/elasticsearch-discovery ClusterIP None &lt;none&gt; 9300/TCP 31s</code> </pre> <br><p>  рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдкрд░ рдЪреВрд▓реНрд╣реЛрдВ рдХреЗ рд▓реЙрдЧ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдорд╛рд╕реНрдЯрд░ рдХреЛ рдЕрдм рдЙрдирдХреЗ рдмреАрдЪ рдХреИрд╕реЗ рдЪреБрдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдмрд╛рдж рдореЗрдВ рдЬрдм рд╣рдо рдирдП рдбреЗрдЯрд╛ рдиреЛрдб рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдб рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рддреЛ рдпрд╣ рдХреИрд╕реЗ рд╣реЛрдЧрд╛ред </p><br><pre> <code class="plaintext hljs">root$ kubectl -n elasticsearch logs -f po/es-master-594b58b86c-9jkj2 | grep ClusterApplierService [2018-10-21T07:41:54,958][INFO ][oecsClusterApplierService] [es-master-594b58b86c-9jkj2] detected_master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300}, added {{es-master-594b58b86c-lfpps}{wZQmXr5fSfWisCpOHBhaMg}{50jGPeKLSpO9RU_HhnVJCA}{10.9.124.81}{10.9.124.81:9300},{es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [3]])</code> </pre> <br><p>  рдпрд╣рд╛рдВ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ <strong>es-master-es-594b58b86c-bj7g7</strong> рдирд╛рдо рдХреЗ рд╕рд╛рде <strong>рдорд╛рд╕реНрдЯрд░</strong> рджреНрд╡рд╛рд░рд╛ рдЪрдпрдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЕрдиреНрдп рджреЛ рдкреЙрдбреНрд╕ рдХреЛ рдЗрд╕рдореЗрдВ рдФрд░ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рд╣реЗрдбрд▓реЗрд╕ <strong>рдЗрд▓рд╛рд╕реНрдЯрд┐рдХреНрд╕-рдбрд┐рд╕реНрдХрд╡рд░реА</strong> рд╕реЗрд╡рд╛ рдПрдХ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдбреЙрдХрд░ рдЫрд╡рд┐ рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд <strong>рдХреА</strong> рдЬрд╛рддреА рд╣реИ рдФрд░ рдиреЛрдбреНрд╕ рдореЗрдВ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИред  рдпрджрд┐ рд╡рд╛рдВрдЫрд┐рдд рд╣реИ рддреЛ рдпрд╣ рд╕реЗрдЯрд┐рдВрдЧ рдмрджрд▓реА рдЬрд╛ рд╕рдХрддреА рд╣реИред </p><br><p>  рдЗрд╕реА рддрд░рд╣, рд╣рдо <strong>рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕</strong> рдФрд░ <strong>рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдбреНрд╕</strong> рддреИрдирд╛рдд <strong>рдХрд░рддреЗ</strong> <strong>рд╣реИрдВ</strong> ред  рдиреАрдЪреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рджреЗрдЦреЗрдВред </p><br><h3 id="deploy-nod-dannyh">  рдбреЗрдЯрд╛ рдиреЛрдб рдирд┐рдпреБрдХреНрдд рдХрд░реЗрдВ: </h3><br><pre> <code class="plaintext hljs">kind: Namespace metadata: name: elasticsearch --- apiVersion: storage.k8s.io/v1beta1 kind: StorageClass metadata: name: fast provisioner: kubernetes.io/gce-pd parameters: type: pd-ssd fsType: xfs allowVolumeExpansion: true --- apiVersion: apps/v1beta1 kind: StatefulSet metadata: name: es-data namespace: elasticsearch labels: component: elasticsearch role: data spec: serviceName: elasticsearch-data replicas: 3 template: metadata: labels: component: elasticsearch role: data spec: affinity: podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 100 podAffinityTerm: labelSelector: matchExpressions: - key: role operator: In values: - data topologyKey: kubernetes.io/hostname initContainers: - name: init-sysctl image: busybox:1.27.2 command: - sysctl - -w - vm.max_map_count=262144 securityContext: privileged: true containers: - name: es-data image: quay.io/pires/docker-elasticsearch-kubernetes:6.2.4 env: - name: NAMESPACE valueFrom: fieldRef: fieldPath: metadata.namespace - name: NODE_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: CLUSTER_NAME value: my-es - name: NODE_MASTER value: "false" - name: NODE_INGEST value: "false" - name: HTTP_ENABLE value: "false" - name: ES_JAVA_OPTS value: -Xms256m -Xmx256m - name: PROCESSORS valueFrom: resourceFieldRef: resource: limits.cpu resources: limits: cpu: 2 ports: - containerPort: 9300 name: transport volumeMounts: - name: storage mountPath: /data volumeClaimTemplates: - metadata: name: storage annotations: volume.beta.kubernetes.io/storage-class: "fast" spec: accessModes: [ "ReadWriteOnce" ] storageClassName: fast resources: requests: storage: 10Gi --- apiVersion: v1 kind: Service metadata: name: elasticsearch-data namespace: elasticsearch labels: component: elasticsearch role: data spec: ports: - port: 9300 name: transport clusterIP: None selector: component: elasticsearch role: data view rawes-data.yml hosted with love by GitHub</code> </pre> <br><p>  (рд╕реНрдЯреЗрдЯрд╕рдлреБрд▓рд╕реЗрдЯ рдФрд░ рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП рд╣реЗрдбрд▓реЗрд╕ рд╕реЗрд╡рд╛) </p><br><p>  рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдкрд░ рд╣реЗрдбрд▓реЗрд╕ рд╕реЗрд╡рд╛ <strong>рд╕реНрдерд┐рд░ рдиреЗрдЯрд╡рд░реНрдХ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛</strong> рдХреЛ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП рдЬрд╛рд░реА рдХрд░рддреА рд╣реИ рдФрд░ рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ <strong>рдбреЗрдЯрд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдореЗрдВ</strong> рдорджрдж рдХрд░рддреА рд╣реИред </p><br><p>  рдЪреВрд▓реНрд╣рд╛ рдореЗрдВ рд╕рдВрд▓рдЧреНрди рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ <strong>рд╕реНрдерд╛рдпреА рдорд╛рддреНрд░рд╛</strong> рдХреЛ <strong>рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рдирд╛</strong> рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред  рд╕реНрдЯреЛрд░реЗрдЬ рдХреНрд▓рд╛рд╕ рдмрдирд╛рддреЗ рд╕рдордп рд╕рд┐рд░реНрдл рд╡реЙрд▓реНрдпреВрдо рдХрд╛ рдкреНрд░рдХрд╛рд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВред  рдЖрдк рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рднреА рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <strong>рдЬреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╡реЙрд▓реНрдпреВрдо рд╡рд┐рд╕реНрддрд╛рд░ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ</strong> ред  рд╡рд┐рд╡рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдкрдврд╝реЗрдВред </p><br><pre> <code class="plaintext hljs">parameters: type: pd-ssd fsType: xfs allowVolumeExpansion: true ...</code> </pre> <br><h3 id="deploy-klientskih-nod">  рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдбреНрд╕ рдкрд░рд┐рдирд┐рдпреЛрдЬрд┐рдд рдХрд░реЗрдВ: </h3><br><pre> <code class="plaintext hljs">kind: Namespace metadata: name: elasticsearch --- apiVersion: apps/v1beta1 kind: Deployment metadata: name: es-client namespace: elasticsearch labels: component: elasticsearch role: client spec: replicas: 2 template: metadata: labels: component: elasticsearch role: client spec: affinity: podAntiAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 100 podAffinityTerm: labelSelector: matchExpressions: - key: role operator: In values: - client topologyKey: kubernetes.io/hostname initContainers: - name: init-sysctl image: busybox:1.27.2 command: - sysctl - -w - vm.max_map_count=262144 securityContext: privileged: true containers: - name: es-client image: quay.io/pires/docker-elasticsearch-kubernetes:6.2.4 env: - name: NAMESPACE valueFrom: fieldRef: fieldPath: metadata.namespace - name: NODE_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: CLUSTER_NAME value: my-es - name: NODE_MASTER value: "false" - name: NODE_DATA value: "false" - name: HTTP_ENABLE value: "true" - name: ES_JAVA_OPTS value: -Xms256m -Xmx256m - name: NETWORK_HOST value: _site_,_lo_ - name: PROCESSORS valueFrom: resourceFieldRef: resource: limits.cpu resources: limits: cpu: 1 ports: - containerPort: 9200 name: http - containerPort: 9300 name: transport volumeMounts: - name: storage mountPath: /data volumes: - emptyDir: medium: "" name: storage --- apiVersion: v1 kind: Service metadata: name: elasticsearch namespace: elasticsearch annotations: cloud.google.com/load-balancer-type: Internal labels: component: elasticsearch role: client spec: selector: component: elasticsearch role: client ports: - name: http port: 9200 type: LoadBalancer view rawes-client.yml hosted with love by GitHub</code> </pre> <br><p>  (рдЧреНрд░рд╛рд╣рдХ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП рддреИрдирд╛рддреА рдФрд░ рдмрд╛рд╣рд░реА рд╕реЗрд╡рд╛) </p><br><p>  рдпрд╣рд╛рдВ рддреИрдирд╛рдд рд╕реЗрд╡рд╛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд╣рд░ ES рдХреНрд▓рд╕реНрдЯрд░ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рднреА рд╕рдмрдиреЗрдЯ рдХреЗ рдЕрдВрджрд░ рд╣реИред  рдПрдиреЛрдЯреЗрд╢рди <strong>рдХреНрд▓рд╛рдЙрдб</strong> . <strong>google.com/load-balancer-type: рдЖрдВрддрд░рд┐рдХ</strong> рдЗрд╕рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред </p><br><p>  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдИрдПрд╕ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЕрдВрджрд░ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдПрд▓рд╛рд╕реНрдЯрд┐рдХ рдЦреЛрдЬ рд╕реЗрд╡рд╛ рддрдХ рдкрд╣реБрдВрдЪ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http: //elasticsearch.elasticsearch: 9200</a> рдкрд░ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред </p><br><p>  рдЬрдм рдЖрдк рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдбреНрд╕ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╡реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЬреБрдбрд╝ рдЬрд╛рдПрдВрдЧреЗред  (рд▓реЙрдЧ рдХреЗ рддрд╣рдд рдорд╛рд╕реНрдЯрд░ рдХреА рддрд▓рд╛рд╢ рдХрд░реЗрдВ) </p><br><pre> <code class="plaintext hljs">root$ kubectl -n elasticsearch get pods -l role=data NAME READY STATUS RESTARTS AGE es-data-0 1/1 Running 0 48s es-data-1 1/1 Running 0 28s -------------------------------------------------------------------- root$ kubectl apply -f es-client.yml root$ kubectl -n elasticsearch get pods -l role=client NAME READY STATUS RESTARTS AGE es-client-69b84b46d8-kr7j4 1/1 Running 0 47s es-client-69b84b46d8-v5pj2 1/1 Running 0 47s -------------------------------------------------------------------- root$ kubectl -n elasticsearch get all NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE deploy/es-client 2 2 2 2 1m deploy/es-master 3 3 3 3 9m NAME DESIRED CURRENT READY AGE rs/es-client-69b84b46d8 2 2 2 1m rs/es-master-594b58b86c 3 3 3 9m NAME DESIRED CURRENT AGE statefulsets/es-data 2 2 3m NAME READY STATUS RESTARTS AGE po/es-client-69b84b46d8-kr7j4 1/1 Running 0 1m po/es-client-69b84b46d8-v5pj2 1/1 Running 0 1m po/es-data-0 1/1 Running 0 3m po/es-data-1 1/1 Running 0 3m po/es-master-594b58b86c-9jkj2 1/1 Running 0 9m po/es-master-594b58b86c-bj7g7 1/1 Running 0 9m po/es-master-594b58b86c-lfpps 1/1 Running 0 9m NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE svc/elasticsearch LoadBalancer 10.9.121.160 10.9.120.8 9200:32310/TCP 1m svc/elasticsearch-data ClusterIP None &lt;none&gt; 9300/TCP 3m svc/elasticsearch-discovery ClusterIP None &lt;none&gt; 9300/TCP 9m -------------------------------------------------------------------- #Check logs of es-master leader pod root$ kubectl -n elasticsearch logs po/es-master-594b58b86c-bj7g7 | grep ClusterApplierService [2018-10-21T07:41:53,731][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] new_master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300}, added {{es-master-594b58b86c-lfpps}{wZQmXr5fSfWisCpOHBhaMg}{50jGPeKLSpO9RU_HhnVJCA}{10.9.124.81}{10.9.124.81:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [1] source [zen-disco-elected-as-master ([1] nodes joined)[{es-master-594b58b86c-lfpps}{wZQmXr5fSfWisCpOHBhaMg}{50jGPeKLSpO9RU_HhnVJCA}{10.9.124.81}{10.9.124.81:9300}]]]) [2018-10-21T07:41:55,162][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-master-594b58b86c-9jkj2}{x9Prp1VbTq6_kALQVNwIWg}{7NHUSVpuS0mFDTXzAeKRcg}{10.9.125.81}{10.9.125.81:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [3] source [zen-disco-node-join[{es-master-594b58b86c-9jkj2}{x9Prp1VbTq6_kALQVNwIWg}{7NHUSVpuS0mFDTXzAeKRcg}{10.9.125.81}{10.9.125.81:9300}]]]) [2018-10-21T07:48:02,485][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-data-0}{SAOhUiLiRkazskZ_TC6EBQ}{qirmfVJBTjSBQtHZnz-QZw}{10.9.126.88}{10.9.126.88:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [4] source [zen-disco-node-join[{es-data-0}{SAOhUiLiRkazskZ_TC6EBQ}{qirmfVJBTjSBQtHZnz-QZw}{10.9.126.88}{10.9.126.88:9300}]]]) [2018-10-21T07:48:21,984][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-data-1}{fiv5Wh29TRWGPumm5ypJfA}{EXqKGSzIQquRyWRzxIOWhQ}{10.9.125.82}{10.9.125.82:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [5] source [zen-disco-node-join[{es-data-1}{fiv5Wh29TRWGPumm5ypJfA}{EXqKGSzIQquRyWRzxIOWhQ}{10.9.125.82}{10.9.125.82:9300}]]]) [2018-10-21T07:50:51,245][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-client-69b84b46d8-v5pj2}{MMjA_tlTS7ux-UW44i0osg}{rOE4nB_jSmaIQVDZCjP8Rg}{10.9.125.83}{10.9.125.83:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [6] source [zen-disco-node-join[{es-client-69b84b46d8-v5pj2}{MMjA_tlTS7ux-UW44i0osg}{rOE4nB_jSmaIQVDZCjP8Rg}{10.9.125.83}{10.9.125.83:9300}]]]) [2018-10-21T07:50:58,964][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-client-69b84b46d8-kr7j4}{gGC7F4diRWy2oM1TLTvNsg}{IgI6g3iZT5Sa0HsFVMpvvw}{10.9.124.82}{10.9.124.82:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [7] source [zen-disco-node-join[{es-client-69b84b46d8-kr7j4}{gGC7F4diRWy2oM1TLTvNsg}{IgI6g3iZT5Sa0HsFVMpvvw}{10.9.124.82}{10.9.124.82:9300}]]])</code> ] [es-рдЧреБрд░реБ-594b58b86c-bj7g7] рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ {{es-рдЧреБрд░реБ-594b58b86c-9jkj2} {} {x9Prp1VbTq6_kALQVNwIWg 7NHUSVpuS0mFDTXzAeKRcg} {} {10.9.125.81 10.9 <code class="plaintext hljs">root$ kubectl -n elasticsearch get pods -l role=data NAME READY STATUS RESTARTS AGE es-data-0 1/1 Running 0 48s es-data-1 1/1 Running 0 28s -------------------------------------------------------------------- root$ kubectl apply -f es-client.yml root$ kubectl -n elasticsearch get pods -l role=client NAME READY STATUS RESTARTS AGE es-client-69b84b46d8-kr7j4 1/1 Running 0 47s es-client-69b84b46d8-v5pj2 1/1 Running 0 47s -------------------------------------------------------------------- root$ kubectl -n elasticsearch get all NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE deploy/es-client 2 2 2 2 1m deploy/es-master 3 3 3 3 9m NAME DESIRED CURRENT READY AGE rs/es-client-69b84b46d8 2 2 2 1m rs/es-master-594b58b86c 3 3 3 9m NAME DESIRED CURRENT AGE statefulsets/es-data 2 2 3m NAME READY STATUS RESTARTS AGE po/es-client-69b84b46d8-kr7j4 1/1 Running 0 1m po/es-client-69b84b46d8-v5pj2 1/1 Running 0 1m po/es-data-0 1/1 Running 0 3m po/es-data-1 1/1 Running 0 3m po/es-master-594b58b86c-9jkj2 1/1 Running 0 9m po/es-master-594b58b86c-bj7g7 1/1 Running 0 9m po/es-master-594b58b86c-lfpps 1/1 Running 0 9m NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE svc/elasticsearch LoadBalancer 10.9.121.160 10.9.120.8 9200:32310/TCP 1m svc/elasticsearch-data ClusterIP None &lt;none&gt; 9300/TCP 3m svc/elasticsearch-discovery ClusterIP None &lt;none&gt; 9300/TCP 9m -------------------------------------------------------------------- #Check logs of es-master leader pod root$ kubectl -n elasticsearch logs po/es-master-594b58b86c-bj7g7 | grep ClusterApplierService [2018-10-21T07:41:53,731][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] new_master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300}, added {{es-master-594b58b86c-lfpps}{wZQmXr5fSfWisCpOHBhaMg}{50jGPeKLSpO9RU_HhnVJCA}{10.9.124.81}{10.9.124.81:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [1] source [zen-disco-elected-as-master ([1] nodes joined)[{es-master-594b58b86c-lfpps}{wZQmXr5fSfWisCpOHBhaMg}{50jGPeKLSpO9RU_HhnVJCA}{10.9.124.81}{10.9.124.81:9300}]]]) [2018-10-21T07:41:55,162][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-master-594b58b86c-9jkj2}{x9Prp1VbTq6_kALQVNwIWg}{7NHUSVpuS0mFDTXzAeKRcg}{10.9.125.81}{10.9.125.81:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [3] source [zen-disco-node-join[{es-master-594b58b86c-9jkj2}{x9Prp1VbTq6_kALQVNwIWg}{7NHUSVpuS0mFDTXzAeKRcg}{10.9.125.81}{10.9.125.81:9300}]]]) [2018-10-21T07:48:02,485][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-data-0}{SAOhUiLiRkazskZ_TC6EBQ}{qirmfVJBTjSBQtHZnz-QZw}{10.9.126.88}{10.9.126.88:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [4] source [zen-disco-node-join[{es-data-0}{SAOhUiLiRkazskZ_TC6EBQ}{qirmfVJBTjSBQtHZnz-QZw}{10.9.126.88}{10.9.126.88:9300}]]]) [2018-10-21T07:48:21,984][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-data-1}{fiv5Wh29TRWGPumm5ypJfA}{EXqKGSzIQquRyWRzxIOWhQ}{10.9.125.82}{10.9.125.82:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [5] source [zen-disco-node-join[{es-data-1}{fiv5Wh29TRWGPumm5ypJfA}{EXqKGSzIQquRyWRzxIOWhQ}{10.9.125.82}{10.9.125.82:9300}]]]) [2018-10-21T07:50:51,245][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-client-69b84b46d8-v5pj2}{MMjA_tlTS7ux-UW44i0osg}{rOE4nB_jSmaIQVDZCjP8Rg}{10.9.125.83}{10.9.125.83:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [6] source [zen-disco-node-join[{es-client-69b84b46d8-v5pj2}{MMjA_tlTS7ux-UW44i0osg}{rOE4nB_jSmaIQVDZCjP8Rg}{10.9.125.83}{10.9.125.83:9300}]]]) [2018-10-21T07:50:58,964][INFO ][oecsClusterApplierService] [es-master-594b58b86c-bj7g7] added {{es-client-69b84b46d8-kr7j4}{gGC7F4diRWy2oM1TLTvNsg}{IgI6g3iZT5Sa0HsFVMpvvw}{10.9.124.82}{10.9.124.82:9300},}, reason: apply cluster state (from master [master {es-master-594b58b86c-bj7g7}{1aFT97hQQ7yiaBc2CYShBA}{Q3QzlaG3QGazOwtUl7N75Q}{10.9.126.87}{10.9.126.87:9300} committed version [7] source [zen-disco-node-join[{es-client-69b84b46d8-kr7j4}{gGC7F4diRWy2oM1TLTvNsg}{IgI6g3iZT5Sa0HsFVMpvvw}{10.9.124.82}{10.9.124.82:9300}]]])</code> </pre> <br><p>  <strong>рдореБрдЦреНрдп рдорд╛рд╕реНрдЯрд░ рдкреЙрдб рдХреЗ рд▓реЙрдЧ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ рдЬрдм рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред</strong>  <strong>рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд╕рдордп рдпрд╣ рдЬрд╛рдирдирд╛ рдЙрдкрдпреЛрдЧреА рд╣реИред</strong> </p><br><p>  рд╣рдордиреЗ рд╕рднреА рдШрдЯрдХреЛрдВ рдХреЛ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рд╣реИ, рдФрд░ рдЕрдм рд╣рдореЗрдВ рдЬрд╛рдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </p><br><p>  1) рдЙрдмрдВрдЯреВ рдХрдВрдЯреЗрдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рдПрд▓рд┐рдЯрд┐рдХреНрд╕ рдХреА рдЦреЛрдЬ рдХрд░реЗрдВред </p><br><pre> <code class="plaintext hljs">root$ kubectl run my-shell --rm -i --tty --image ubuntu -- bash root@my-shell-68974bb7f7-pj9x6:/# curl http://elasticsearch.elasticsearch:9200/_cluster/health?pretty { "cluster_name" : "my-es", "status" : "green", "timed_out" : false, "number_of_nodes" : 7, "number_of_data_nodes" : 2, "active_primary_shards" : 0, "active_shards" : 0, "relocating_shards" : 0, "initializing_shards" : 0, "unassigned_shards" : 0, "delayed_unassigned_shards" : 0, "number_of_pending_tasks" : 0, "number_of_in_flight_fetch" : 0, "task_max_waiting_in_queue_millis" : 0, "active_shards_percent_as_number" : 100.0 }</code> </pre> <br><p>  2) рдЖрдВрддрд░рд┐рдХ рдмреИрд▓реЗрдВрд╕рд░ рдЬреАрд╕реАрдкреА (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, <code>10.9.120.8</code> ) рдХреЗ рдЖрдИрдкреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд╣рд░ рд╕реЗ <code>10.9.120.8</code> ред </p><br><pre> <code class="plaintext hljs">root$ curl http://10.9.120.8:9200/_cluster/health?pretty { "cluster_name" : "my-es", "status" : "green", "timed_out" : false, "number_of_nodes" : 7, "number_of_data_nodes" : 2, "active_primary_shards" : 0, "active_shards" : 0, "relocating_shards" : 0, "initializing_shards" : 0, "unassigned_shards" : 0, "delayed_unassigned_shards" : 0, "number_of_pending_tasks" : 0, "number_of_in_flight_fetch" : 0, "task_max_waiting_in_queue_millis" : 0, "active_shards_percent_as_number" : 100.0 }</code> </pre> <br><p>  3) рдИрдПрд╕ рдЪреВрд▓реНрд╣рд╛ рдХреЗ рд▓рд┐рдП рд╡рд┐рд░реЛрдзреА рд╕рдВрдмрдВрдз рдирд┐рдпрдоред </p><br><pre> <code class="plaintext hljs">root$ kubectl -n elasticsearch get pods -o wide NAME READY STATUS RESTARTS AGE IP NODE es-client-69b84b46d8-kr7j4 1/1 Running 0 10m 10.8.14.52 gke-cluster1-pool1-d2ef2b34-t6h9 es-client-69b84b46d8-v5pj2 1/1 Running 0 10m 10.8.15.53 gke-cluster1-pool1-42b4fbc4-cncn es-data-0 1/1 Running 0 12m 10.8.16.58 gke-cluster1-pool1-4cfd808c-kpx1 es-data-1 1/1 Running 0 12m 10.8.15.52 gke-cluster1-pool1-42b4fbc4-cncn es-master-594b58b86c-9jkj2 1/1 Running 0 18m 10.8.15.51 gke-cluster1-pool1-42b4fbc4-cncn es-master-594b58b86c-bj7g7 1/1 Running 0 18m 10.8.16.57 gke-cluster1-pool1-4cfd808c-kpx1 es-master-594b58b86c-lfpps 1/1 Running 0 18m 10.8.14.51 gke-cluster1-pool1-d2ef2b34-t6h9</code> </pre> <br><p>  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕рдорд╛рди рдиреЛрдб рдкрд░ рджреЛ рд╕рдорд╛рди рд╢реНрд░рд╡рдг рдирд╣реАрдВ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рдиреЛрдб рд╡рд┐рдлрд▓рддрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЙрдЪреНрдЪ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХреА рд╣реИред </p><br><h3 id="masshtabirovanie">  рд╕реНрдХреЗрд▓рд┐рдВрдЧ </h3><br><p>  рд╣рдо рд╕реАрдкреАрдпреВ рд╕реАрдорд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП <strong>рдСрдЯреЛрд╕реНрдХреЛрд▓рд┐рдВрдЧ рд╕реЗрд╡рд╛рдПрдВ</strong> рддреИрдирд╛рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП HPA рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдб рдХреЗ рд▓рд┐рдП: </p><br><pre> <code class="plaintext hljs">apiVersion: autoscaling/v1 kind: HorizontalPodAutoscaler metadata: name: es-client namespace: elasticsearch spec: maxReplicas: 5 minReplicas: 2 scaleTargetRef: apiVersion: extensions/v1beta1 kind: Deployment name: es-client targetCPUUtilizationPercentage: 80</code> </pre> <br><p>  рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЛрдб рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдкреЙрдбреНрд╕ рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рдорд╛рд╕реНрдЯрд░ рдиреЛрдб рдкрд░ рдХрд┐рд╕реА рднреА рдкреЙрдб рдХреЗ рд▓реЙрдЧ рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  <strong>рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдкрд░ рдкреЙрдбреНрд╕ рдХреЗ рд▓рд┐рдП</strong> , рдЖрдкрдХреЛ рдмрд╕ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХрдВрдЯреНрд░реЛрд▓ рдкреИрдирд▓ рдпрд╛ GKE рдХрдВрд╕реЛрд▓ рдореЗрдВ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдбреЗрдЯрд╛ рдиреЛрдб рд╕реНрд╡рдпрдВ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЕрдиреНрдп рдиреЛрдбреНрд╕ рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рджреЛрд╣рд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╢реБрд░реВ рд╣реЛрдЧрд╛ред </p><br><p>  <strong>рдореБрдЭреЗ рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдкрд░ рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреА</strong> рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рд╡реЗ рдХреЗрд╡рд▓ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдк рдбреЗрдЯрд╛ рдиреЛрдбреНрд╕ рдЬреЛрдбрд╝рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ <strong>рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕</strong> рдХреА <strong>рд╕рдВрдЦреНрдпрд╛ рд╡рд┐рд╖рдо рд╣реИ</strong> , рдФрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП <strong>NUMBER_OF_MASTERS</strong> рдЪрд░ рдХреЛ рдмрджрд▓рдирд╛ рди рднреВрд▓реЗрдВред </p><br><h2 id="deploy-kibana-i-es-hq">  рдХрд┐рдмрд╛рдирд╛ рдФрд░ ES-HQ рдХреА рддреИрдирд╛рддреА рдХрд░реЗрдВ </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐рдмрд╛рдирд╛</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдИрдПрд╕-рдореБрдЦреНрдпрд╛рд▓рдп</a> </p><br><p>  Kibana ES рдбреЗрдЯрд╛ рдХреЛ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рд▓ рдЙрдкрдХрд░рдг рд╣реИ, рдФрд░ ES-HQ рдПрд▓рд┐рд╕реНрдЯрд┐рдХреНрд╕ рдЦреЛрдЬ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рдореЙрдирд┐рдЯрд░ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред  рдХрд┐рдмрд╛рдирд╛ рдФрд░ ES-HQ рдХреА рддреИрдирд╛рддреА рдХрд░рддреЗ рд╕рдордп, рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐: </p><br><ul><li>  рд╣рдо рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдбреЙрдХ рдЫрд╡рд┐ рдореЗрдВ ES рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдирд╛рдо рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред </li><li>  Kibana / ES-HQ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рддрдХ рдкрд╣реБрдБрдЪ рдХреЗ рд▓рд┐рдП рд╕реЗрд╡рд╛ рдХрдВрдкрдиреА рдХреЗ рднреАрддрд░ рдмрдиреА рд╣реБрдИ рд╣реИ, рдЕрд░реНрдерд╛рдд, рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ IP рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рд╣рдо рдЖрдВрддрд░рд┐рдХ рдЬреАрд╕реАрдкреА рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </li></ul><br><h3 id="deploy-kibana">  рдХрд┐рдмрд╛рдирд╛ рддреИрдирд╛рдд рдХрд░реЗрдВ </h3><br><pre> <code class="plaintext hljs">kind: Namespace metadata: name: elasticsearch --- apiVersion: apps/v1beta1 kind: Deployment metadata: name: es-kibana namespace: elasticsearch labels: component: elasticsearch role: kibana spec: replicas: 1 template: metadata: labels: component: elasticsearch role: kibana spec: containers: - name: es-kibana image: docker.elastic.co/kibana/kibana-oss:6.2.2 env: - name: CLUSTER_NAME value: my-es - name: ELASTICSEARCH_URL value: http://elasticsearch:9200 resources: limits: cpu: 0.5 ports: - containerPort: 5601 name: http --- apiVersion: v1 kind: Service metadata: name: kibana annotations: cloud.google.com/load-balancer-type: "Internal" namespace: elasticsearch labels: component: elasticsearch role: kibana spec: selector: component: elasticsearch role: kibana ports: - name: http port: 80 targetPort: 5601 protocol: TCP type: LoadBalancer view rawes-kibana.yml hosted with love by GitHub</code> </pre> <br><p>  (рддреИрдирд╛рддреА рдФрд░ рдХрд┐рдмрдирд╛ рд╕реЗрд╡рд╛) </p><br><h3 id="deploy-es-hq">  ES-HQ рддреИрдирд╛рдд рдХрд░реЗрдВ </h3><br><pre> <code class="plaintext hljs">kind: Namespace metadata: name: elasticsearch --- apiVersion: apps/v1beta1 kind: Deployment metadata: name: es-hq namespace: elasticsearch labels: component: elasticsearch role: hq spec: replicas: 1 template: metadata: labels: component: elasticsearch role: hq spec: containers: - name: es-hq image: elastichq/elasticsearch-hq:release-v3.4.0 env: - name: HQ_DEFAULT_URL value: http://elasticsearch:9200 resources: limits: cpu: 0.5 ports: - containerPort: 5000 name: http --- apiVersion: v1 kind: Service metadata: name: hq annotations: cloud.google.com/load-balancer-type: "Internal" namespace: elasticsearch labels: component: elasticsearch role: hq spec: selector: component: elasticsearch role: hq ports: - name: http port: 80 targetPort: 5000 protocol: TCP type: LoadBalancer view rawes-hq.yml hosted with love by GitHub</code> </pre> <br><p>  (рддреИрдирд╛рдд рдФрд░ ES-HQ рд╕реЗрд╡рд╛) </p><br><p>  рд╣рдо рдмрдирд╛рдП рдЧрдП рдЖрдВрддрд░рд┐рдХ рдмреИрд▓реЗрдВрд╕рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреЛрдиреЛрдВ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">root$ kubectl -n elasticsearch get svc -l role=kibana NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kibana LoadBalancer 10.9.121.246 10.9.120.10 80:31400/TCP 1m root$ kubectl -n elasticsearch get svc -l role=hq NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE hq LoadBalancer 10.9.121.150 10.9.120.9 80:31499/TCP 1m</code> </pre> <br><p>  http: // &lt;рдмрд╛рд╣рд░реА- Ip-Kibana-Service&gt; / app / kibana # / home? _g = () </p><br><img src="https://habrastorage.org/webt/mh/vv/x5/mhvvx5kx_vf1gbsx-yqoyzfigja.png"><br><p>  (рдХрд┐рдмрдирд╛ рдХрдВрдЯреНрд░реЛрд▓ рдкреИрдирд▓) </p><br><p>  http: // &lt;рдмрд╛рд╣рд░реА-рдЖрдИрдкреА-рдИрдПрд╕-рд╣рдХ-рд╕реЗрд╡рд╛&gt; / #! / рд╕рдореВрд╣реЛрдВ / рдореЗрд░реЗ-рдПрд╕ </p><br><img src="https://habrastorage.org/webt/83/b2/o6/83b2o67igwgn4lsjhgsjmwmback.png"><br><p>  (рдХреНрд▓рд╕реНрдЯрд░ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП ElasticHQ рдХрдВрдЯреНрд░реЛрд▓ рдкреИрдирд▓) </p><br><p>  ES рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рд╡рд┐рддрд░рд┐рдд рдЦреЛрдЬ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИ, рдФрд░ Kubernetes рдореЗрдВ рдпрд╣ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдФрд░ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдкреНрд░рдореБрдЦ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рдирдП ES рд╕рдореВрд╣реЛрдВ рдХреЛ рддреБрд░рдВрдд рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi432374/">https://habr.com/ru/post/hi432374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi432364/index.html">рдзреНрд╡рдиреНрдпрд╛рддреНрдордХ рд╡рд░реНрдгрдорд╛рд▓рд╛: рд╡рд┐рдорд╛рдирди рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдорд╛рдзрд╛рди рдХреИрд╕реЗ рдлреЛрди рджреНрд╡рд╛рд░рд╛ рд▓реЙрдЧрд┐рди рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛</a></li>
<li><a href="../hi432366/index.html">QSAN XCubeSAN рд╕реНрдЯреЛрд░реЗрдЬ рдореЗрдВ SSD рдХреИрд╢рд┐рдВрдЧ рд▓рд╛рдЧреВ рдХрд░реЗрдВ</a></li>
<li><a href="../hi432368/index.html">рдЖрдкрд╕реЗ рдкрд╣рд▓реЗ - рдореЙрдбрд░реНрди рд╡реЗрдм рдРрдк рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ</a></li>
<li><a href="../hi432370/index.html">1,000-рдЧреЗрдо рдХреЗ рдореИрдЪ рдореЗрдВ рдЕрд▓реНрдлрд╝рд╛рдЬрд╝реЗрд░реЛ рдиреЗ рд╕реНрдЯреЙрдХрдлрд╝рд┐рд╢ рдХреЛ рд╣рд░рд╛рдпрд╛</a></li>
<li><a href="../hi432372/index.html">Microsoft рдиреЗ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рддреМрд░ рдкрд░ рдкреБрд╖реНрдЯрд┐ рдХреА рд╣реИ рдХрд┐ рдПрдЬ рдХреНрд░реЛрдорд┐рдпрдо рдЗрдВрдЬрди рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi432378/index.html">рд╕рд╛рдЗрдмреЗрд░рд┐рдпрд╛ рдХрд╛ рдПрдХ 10 рд╡реАрдВ рдЧреНрд░реЗрдбрд░ рдкреНрд░реЛрд╕реЗрд╕рд░ рдбрд┐рдЬрд╛рдЗрдирд░ рдмрдирдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИред FPGA рддрдВрддреНрд░рд┐рдХрд╛ рддреНрд╡рд░рдХ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдмрдирд╛рддреЗ рд╣реИрдВ?</a></li>
<li><a href="../hi432380/index.html">рдПрдХ iPhone рдХреЗ рд╕рд╛рде рдЬреАрд╡рди рдХреЗ рдЫрд╣ рд╕рд╛рд▓ рдЬреЛ рдореБрдЭреЗ рд╡рд┐рдЪрд▓рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi432382/index.html">рдРрдЬрд╝ рдЗрди рд╣рд╕реЗрдб рдЗрдЧреЗрд▓: рдорд┐рдирд┐рдореИрдХреНрд╕ рдлреЙрд░ рдереНрд░реА</a></li>
<li><a href="../hi432384/index.html">рдЕрдзреНрдпрдпрди: 22% Tumblr рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдкреЛрд░реНрди рд╕рд╛рдЗрдЯ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдпреБрд╡рд╛ рд▓рдбрд╝рдХрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi432386/index.html">рдЧреЛрд▓ рдореЗрдЬ "рдЖрдИрдЯреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд╡рд╛рд╕реНрддреБрдХрд╛рд░", рд╕рд┐рддрдВрдмрд░ 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>