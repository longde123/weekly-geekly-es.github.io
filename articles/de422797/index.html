<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖüèæ ‚ôíÔ∏è ‚ÅâÔ∏è Wie wir aus einer normalen IP-Kamera einen kleinen Cloud-Videorecorder gemacht haben ü•í üàÇÔ∏è üêà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Thema Video√ºberwachung ist f√ºr mich mit dem Aufkommen von Vorortwohnungen akut geworden. Im Internet finden Sie viele Informationen zur Organisati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir aus einer normalen IP-Kamera einen kleinen Cloud-Videorecorder gemacht haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422797/"><img src="https://habrastorage.org/webt/s6/vk/u6/s6vku6wsk6xv28mxzagkcil4ddy.jpeg"><br><br>  Das Thema Video√ºberwachung ist f√ºr mich mit dem Aufkommen von Vorortwohnungen akut geworden.  Im Internet finden Sie viele Informationen zur Organisation der Video√ºberwachung.  Leider waren die meisten Optionen darauf zur√ºckzuf√ºhren, fertige Kits aus China zu kaufen.  Von Freunden habe ich diesbez√ºglich viel Kritik geh√∂rt.  Irgendwie war er selbst sogar an der Einrichtung der von Aliexpress gekauften Ausr√ºstung beteiligt.  Irgendwo funktionierte die H√§lfte der deklarierten Funktionen nicht wie angegeben, einige der Optionen funktionierten √ºberhaupt nicht, obwohl der Registrar nicht billig war.  Und es gab viele solche Bewertungen und Meinungen.  Viele kritisieren auch die Tatsache, dass die Videos in chinesischen Cloud-Diensten gespeichert sind.  Und dann kam der Gedanke - was ist, wenn Sie versuchen, Ihren eigenen DVR mit minimaler Funktionalit√§t herzustellen?  Und was?  In diesem Moment begann ich mich mit Linux zu besch√§ftigen, schrieb Anwendungen mit elementarer Funktionalit√§t auf Bash, experimentierte mit Web ... Im Prinzip alles, was Sie brauchen, um das Problem zu l√∂sen.  Kaum gesagt als getan. <br><a name="habracut"></a><br><h2>  Lass uns gehen.  Eisenauswahl </h2><br>  Als Testperson wurde ein beliebter TP-LINK TL-MR3020-Router mit OPENWRT an Bord ausgew√§hlt. <br><br><img src="https://habrastorage.org/webt/kq/at/vp/kqatvporczm8e1ksiicnm0jq_7e.png"><br><br>  Eigenschaften des Routers: <br><br><ul><li>  300 MHz MIPS-Prozessor; <br></li><li>  32 MB RAM; <br></li><li>  Flash-Chip f√ºr 4 MB; <br></li><li>  USB 2.0-Anschluss; <br></li><li>  RJ-45-Port mit 100 MB Vollduplex; <br></li><li>  GPIO-Pins, sowohl frei als auch mit LEDs; <br></li><li>  GPIO-Pins ein- und ausschalten; <br></li></ul><br>  Die Kamera ist eine gew√∂hnliche chinesische HD IP-Kamera, die in China bestellt wurde.  Wir machen Videos √ºber das RTSP-Protokoll.  Das Dienstprogramm openRTSP hat uns dabei geholfen. Es war Teil des OPENWRT-Repositorys und verf√ºgte √ºber alle erforderlichen Funktionen.  Wir haben uns entschieden, mit dem Yandex.Disk-Clouddienst √ºber das Webdav-Protokoll zu arbeiten.  Dieser Dienst bietet jedem neuen Benutzer 10 GB freien Speicherplatz.  Nun, dort k√∂nnen Sie nach Bedarf kaufen. <br><br><h2>  Essenz der Idee </h2><br>  Mit dem RTSP-Protokoll nehmen wir den Videostream von der IP-Kamera.  Wir machen ein Pufferverzeichnis.  Wir nehmen Videos darin auf.  Mit dem CURL-Dienstprogramm √ºber das Webdav-Protokoll senden wir Videos an die Cloud.  In unserem Fall ist dies Yandex.Disk. <br><br><h2>  Versuchen Sie es </h2><br>  Nachdem wir die IP-Kamera √ºber Ethernet mit dem Router verbunden hatten, starteten wir eine Testaufnahme eines 10-Sekunden-Clips im MP4-Format auf der Yandex-Festplatte: <br><br><pre><code class="bash hljs">OPENRTSP -V -B 51200 -b 200000 -4 -f 25 -d 10&gt;/tmp/ya_disk/test.mp4</code> </pre> <br>  Dann schickten sie es in die Cloud: <br><br><pre> <code class="bash hljs">curl -v -m 180 --stderr /tmp/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> -k -u <span class="hljs-variable"><span class="hljs-variable">$email</span></span>:<span class="hljs-variable"><span class="hljs-variable">$pass</span></span> -T /tmp/ya_disk/test.mp4 https://webdav.yandex.ru/</code> </pre> <br><h2>  Es funktioniert! </h2><br>  Die Tests begannen mit unterschiedlichen Clip-L√§ngen, unterschiedlichen Aufzeichnungsintervallen und regelm√§√üigen Aufzeichnungen.  Im Allgemeinen waren die Tests erfolgreich.  Es gab jedoch ein Problem beim Aufzeichnen sehr kurzer Clips (in der Gr√∂√üenordnung von 5 Sekunden).  Die Clips wurden mit einer h√∂heren Geschwindigkeit aufgenommen und ihre L√§nge war geringer als der Satz.  Sie l√∂sten das Problem durch Bearbeiten der openRTSP-Quellen: Sie stellten sicher, dass das Programm den vom Benutzer eingegebenen fps-Wert strikt einhielt und nicht aus SDP entnommen wurde. Au√üerdem wurden Frames mit weniger als 100 Byte gel√∂scht. <br><br><h2>  Wir denken √ºber die Funktionalit√§t nach </h2><br>  Nach erfolgreichen Tests wurde beschlossen, eine Steuerungsschnittstelle zu erstellen.  Zu dieser Zeit begann ich mich mit dem Web vertraut zu machen und beschloss, eine Webversion zu erstellen.  Technologie-Stack auf der Benutzerseite (Frontend): HTML5, CSS3, JQUERY, AJAX.  Auf der Eisenseite (Backend): UHTTPD, CGI, BASH.  Sie wurden mit dem Design nicht schlau, sondern verwendeten die gekachelte Anordnung der Schaltfl√§chen auf der Hauptseite. <br><br><img src="https://habrastorage.org/webt/qe/xd/vr/qexdvryzlpxmdrojtosh4rsxrwc.jpeg" alt="Anwendung Home"><br><br>  Verwaltungs- und Dateneingabeseiten wurden mit JQUERY erstellt.  Mit den ersten erfolgreichen Ergebnissen bei der Verwaltung eines Registrar- <s>Routers</s> haben wir begonnen, Funktionen hinzuzuf√ºgen.  Vielleicht war es ein Fehler.  Aufgrund von Unerfahrenheit haben wir das Testen vernachl√§ssigt.  Wenn es viele Funktionen gibt, ist es schwierig, sie zu testen.  Aufgrund der mangelnden Disziplin beim Schreiben von Code zu Beginn der Entwicklung wird es immer schwieriger zu verstehen, was geschrieben wird.  Von Zeit zu Zeit treten Fehler auf, wir beseitigen sie nat√ºrlich, aber es w√§re viel einfacher, dies in fr√ºheren Entwicklungsstadien und in Phasen zu tun. <br><br>  Also die Funktionalit√§t: <br><br><ul><li>  Unterst√ºtzung f√ºr jede IP-Kamera; <br></li><li>  Unterst√ºtzung f√ºr 3G / 4G-Modems; <br></li><li>  Aufzeichnung auf Cloud-Speicher (kostenlos) und / oder auf einem USB-Laufwerk; <br></li><li>  Periodische Aufzeichnung und / oder Bewegungsaufzeichnung; <br></li><li>  Schleife zur Festplatte; <br></li><li>  Einstellen der L√§nge der Walze; <br></li><li>  Aufnahmemodi: nach Zeit, Bewegung, Tag, Nacht; <br></li><li>  Autonome Arbeit bei Stromausfall (ca. 20 min); <br></li></ul><br><h2>  Client-seitige Implementierung </h2><br>  Das Rekorder-Einstellungsmen√º enth√§lt 6 Tasten: WIFI, RECORDING, CAMERA, 3G / 4G, STORAGE und HELP.  Also in der Reihenfolge: <br><br><h4>  WIFI </h4><br><img src="https://habrastorage.org/webt/ql/xz/us/qlxzusdqgobrodb5sjuz2dyr8_e.jpeg"><br><br>  Hier k√∂nnen Sie den WLAN-Rekorder konfigurieren.  WI-FI kann in zwei Modi arbeiten - "Client" und "Access Point".  Im "Access Point" -Modus ist alles klar: Kanalnummer, SSID, Verschl√ºsselungstyp, Passwort.  Im "Client" -Modus ist der Registrar mit einem beliebigen Wi-Fi-Zugangspunkt verbunden. <br><br>  Dementsprechend wird in diesem Modus kein 3G / 4G-Modem ben√∂tigt.  Damit der Benutzer den Registrar nicht verliert, wenn der Client eine Verbindung zum Access Point herstellt, haben wir den Repeater-Modus physisch implementiert. <br><br>  Das einzige, worauf Sie achten m√ºssen, ist, dass Sie beim Verbinden des Registrars mit dem Zugangspunkt √ºberpr√ºfen m√ºssen, ob das mobile Ger√§t des Benutzers zu einem anderen Wi-Fi-Zugangspunkt ‚Äûgesprungen‚Äú ist, weil  Der Wi-Fi-Registrar-Zugangspunkt verschwindet f√ºr kurze Zeit.  Das Feld "Wiederherstellungsmodus" ist eine Garantie daf√ºr, dass Sie den Registrar nicht "verlieren".  Dies ist eine garantierte Zeit, wenn Sie es einschalten, wenn der Benutzer das Ger√§t konfigurieren oder den Zugangspunkt einschalten kann.  Nach dem Wiederherstellungsmodus wird automatisch die Hauptmen√ºseite aufgerufen.  Dieser Teil der Funktionalit√§t wird noch getestet und vor√ºbergehend deaktiviert. <br><br><h4>  AUFNAHME </h4><br><img src="https://habrastorage.org/webt/ed/yt/a_/edyta_ndlmoiwbzz2h_l0vovi1i.jpeg"><br><br>  Datums- und Uhrzeitanzeigefeld, Men√º ‚ÄûUhrzeit einstellen‚Äú, ‚ÄûIm lokalen Speicher aufzeichnen‚Äú und ‚ÄûIm Cloud-Speicher aufzeichnen‚Äú. <br><br>  <u>Zeiteinstellung.</u>  Durch Klicken auf die Schaltfl√§che ‚ÄûZeit √§ndern‚Äú k√∂nnen Sie Uhrzeit und Datum √§ndern.  Mit dem Schieberegler wird auch die Zeit f√ºr den Beginn und das Ende des Tages eingestellt (f√ºr jeden ist es individuell).  Dies geschieht, um die Betriebsarten des Registrars zu verschiedenen Tageszeiten zu optimieren. <br>  <u>In den lokalen Speicher schreiben.</u>  Hier k√∂nnen Sie die Aufnahme auf externe Medien aktivieren oder deaktivieren, die Bewegungsaufzeichnung und / oder die periodische Aufnahme aktivieren oder deaktivieren, indem Sie die L√§nge des aufgenommenen Clips und die Aufnahmezeit der Clips einstellen (im periodischen Aufnahmemodus). <br>  <u>Schreiben Sie in den Cloud-Speicher.</u>  Hier wird wie im vorherigen Absatz der Datensatz im Cloud-Speicher konfiguriert.  Zum Einrichten eines Cloud-Dienstes wurde ein Element hinzugef√ºgt, in dem Sie angeben k√∂nnen, auf welcher Dienstwolke aufgezeichnet werden soll (derzeit funktioniert dies nur mit einer Yandex-Festplatte), den Benutzernamen und das Kennwort Ihres Yandex-Kontos. <br><br><h4>  HILFE </h4><br><img src="https://habrastorage.org/webt/bo/su/nr/bosunrz6knsyt0os8oaciji7bp4.jpeg"><br><br>  Der Inhalt der Men√ºpunkte der Benutzeroberfl√§che sowie der Zweck der einzelnen Elemente werden durch Punkte beschrieben. <br><br><h4>  KAMERA </h4><br><img src="https://habrastorage.org/webt/gp/ct/vd/gpctvdkx2nnr94fu2otbenwky1g.jpeg"><br><br>  <u>RTSP-Stream-Adresse der Kamera.</u>  Die Daten f√ºr dieses Feld finden Sie auf der Seite mit den IP-Kameraeinstellungen.  In Zukunft planen wir, diese Daten √ºber ONVIF zu erhalten, und das Feld wird automatisch ausgef√ºllt.  W√§hrend ONVIF stabiler Betrieb auf allen IP-Kameras nur tr√§umen kann. <br>  <u>Die Verz√∂gerung zwischen den Walzen.</u>  Parameter, der die Pause in Sekunden beim Aufnehmen von Filmen bestimmt.  Es wird im Bewegungsaufzeichnungsmodus verwendet.  Erm√∂glicht das Speichern von Internetverkehr bei st√§ndiger oder h√§ufiger Bewegung im Frame. <br>  <u>Video von der Kamera.</u>  N√ºtzlich zur Steuerung des aufgenommenen Bildes bei der Installation der Kamera. <br><br><h4>  3G / 4G </h4><br><img src="https://habrastorage.org/webt/ge/c9/dt/gec9dtcbg66elw_sp2ds9h-ysjy.jpeg"><br><br>  Hier werden Informationen zu Ihrer Internetverbindung mit einem 3G / 4G-Modem angezeigt.  Die Daten werden alle 3 Sekunden aktualisiert.  N√ºtzlich zur √úberwachung der Kommunikationsqualit√§t bei der Installation der Kamera. <br><br><h4>  LAGERUNG </h4><br><img src="https://habrastorage.org/webt/ao/cl/p0/aoclp0z14ymolmup3jm7sgssmte.jpeg"><br><br>  Es gibt zwei Untermen√ºs - "Lokaler Speicher" und "Yandex.Disk".  Wenn Sie das erste ausw√§hlen, gelangen wir in den Dateibaum des angeschlossenen externen Mediums. Wenn Sie das zweite ausw√§hlen, gehen wir zu Yandex.disk. <br><br><div class="spoiler">  <b class="spoiler_title">Mobile Version der Schnittstelle</b> <div class="spoiler_text"><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/63/42/sj/6342sj6nkn2uysfwtn_abkmvefa.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/zv/pl/yt/zvplytjskq_ec8we8uu87kn3rkq.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/wp/iy/os/wpiyos6r4vspkt873xhhpxl8elc.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/rz/s3/2q/rzs32qlwxazwwchceyf-v3lz2f0.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/cy/_l/rf/cy_lrfznpxhzqdsn9ug3acldocm.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/ao/cl/p0/aoclp0z14ymolmup3jm7sgssmte.jpeg"></div><br></div></div><br>  Aufgezeichnete Videos k√∂nnen auf Yandex.Disk mit dem integrierten Player des Dienstes angezeigt werden.  Das Video kann auch von jedem Videoplayer heruntergeladen und lokal angezeigt werden.  Die Speicherung der aufgezeichneten Videos ist wie folgt organisiert: <br><br><img width="500" src="https://habrastorage.org/webt/_z/sz/bb/_zszbbu8vhfriszhfay6pa0zyb4.png"><br><br>  CAM - Ordner zum Aufzeichnen von Videos vom Registrar; <br>  MOTION - ein Ordner zum Aufzeichnen von Videos, die durch Bewegung im Frame aufgenommen wurden; <br>  TIME - Ordner zum Aufnehmen von Videos, die mit einer bestimmten Frequenz aufgenommen wurden; <br>  JJJJ-MM-TT - Ordner f√ºr tags√ºber aufgenommene Videos; <br>  TTMMJJJJ-HH_MM_SS.mp4 - im MP4-Format aufgenommene Videos; <br><br><div class="spoiler">  <b class="spoiler_title">Organisation der Dateispeicherung auf Yandex.Disk</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ag/xq/cm/agxqcmgnb5lesjs6uh5z139h0ws.jpeg"><br><img src="https://habrastorage.org/webt/_u/8c/_s/_u8c_sk4-clpuw-pq1zqlsntol8.jpeg"><br><img src="https://habrastorage.org/webt/3e/vh/d0/3evhd0z4yjcpbgn_ynxzlnwemp8.jpeg"><br><img src="https://habrastorage.org/webt/aj/x9/iv/ajx9ivr061regnksnz9_njdyx3i.jpeg"><br></div></div><br><h2>  Was ist drin?  Serverseitige Implementierung </h2><br>  Wie ich oben schrieb, war der TP-LINK TL-MR3020-Router mit OPENWRT an Bord das erste Experiment.  Barrier Breaker Version 14.07.  Zu Beginn des Tests war es die neueste Version.  Jetzt auf LEDE aktualisiert.  OpenRTSP befand sich nicht im Repository dieser Version, daher haben wir das Dienstprogramm selbst hinzugef√ºgt und gleichzeitig alles √úberfl√ºssige daraus entfernt. <br><br>  Nach erfolgreichen Tests haben wir begonnen, andere Router mit √§hnlicher Architektur in Betracht zu ziehen.  Wir suchten nach einer Plattform, die sowohl in den Dimensionen als auch in den Merkmalen f√ºr den Registrar besser geeignet ist.  Die Idee ist, dass Sie durch Flashen eines Routers mit ge√§nderter Firmware und Anschlie√üen einer IP-Kamera mit einem 3G / 4G-Modem einen Registrar erhalten.  Die Liste der Ger√§te, auf denen die Registrar-Funktionalit√§t getestet wurde: <br><br><ul><li>  TP-LINK TL-MR3020; <br></li><li>  HAME A5; <br></li><li>  CARAMBOLLA2; <br></li><li>  UNWIREDONE; <br></li><li>  Skywork skw71; <br></li><li>  TP-LINK TL-MR10U (mit Batterie); <br></li><li>  TP-LINK TL-MR3040 (mit Batterie); <br></li><li>  TP-LINK TL-MR3220 V: 2,3 (4 Ethernet-Ports); <br></li></ul><br>  Wir haben versucht, die Karten der Router in diesem Fall zu testen.  Die Idee war, dass au√üer dem Geh√§use nichts herausragt und nicht h√§ngt und das Geh√§use selbst eine minimale Gr√∂√üe hat.  Daher sollte sich das Modem, wie von 3G / 4G geplant, im Geh√§use befinden.  Also haben wir einen <s>kollektiven Farm</s> Street Prototyp bekommen, der auf dem TP-LINK TL-MR3020 Board basiert: <br><br><img src="https://habrastorage.org/webt/nl/ql/dn/nlqldndp6xnonugngztcpn-o_xm.jpeg"><br><br><img src="https://habrastorage.org/webt/vb/hy/by/vbhybyc7_i9shuotg2dwn_qw3ke.jpeg"><br><br><img src="https://habrastorage.org/webt/cu/79/kg/cu79kgd-vpw8yxk5fi2zyi01s7m.jpeg"><br><br><img src="https://habrastorage.org/webt/m_/nw/nn/m_nwnnnz5mix4-hcgidu4dsjhe0.jpeg"><br><br>  Nat√ºrlich haben wir Router mit minimalen Gr√∂√üen bevorzugt.  Aus diesem Grund haben wir uns entschlossen, den chinesischen Router HAME A5 zu testen, einen Fall daf√ºr auszudrucken und zu sehen, was passiert: <br><br><img src="https://habrastorage.org/webt/te/qe/ic/teqeicmmwrkyrst7en_32jj84bw.jpeg"><br><br><img src="https://habrastorage.org/webt/dl/hi/y0/dlhiy07kcg5ufwmzubs7r8us2us.jpeg"><br><br>  Auf HAME A5 war unsere Registrar-Firmware instabil, der Router legte st√§ndig auf und startete neu.  Dies war h√∂chstwahrscheinlich auf eine starke √úberhitzung zur√ºckzuf√ºhren.  Daher musste ich es zugunsten einer zuverl√§ssigeren und bew√§hrten Option aufgeben. <br><br>  Wir haben viele Optionen ausprobiert, aber nichts ist besser als meine.  Aus diesem Grund haben sie beschlossen, ihr Board mit einem Modul von CARAMBOLLA2 und der M√∂glichkeit der Akkulaufzeit zu vertreiben. <br><br><img src="https://habrastorage.org/webt/bx/p-/zo/bxp-zot1dl1nsjbjumki4qt1dpy.jpeg"><br><br>  Eigenschaften von CARAMBOLLA2: <br><br><ul><li>  Prozessor AR9331, 400 MHz; <br></li><li>  64 MB DDR2-RAM; <br></li><li>  16 MB FLASH; <br></li><li>  802,11 b / g / n, 2,4 GHz, 1x1 SISO, maximale Datenrate von 150 MBit / s, 21 dB Ausgangsleistung; <br></li><li>  Versorgungsspannung 3,3 V; <br></li><li>  Abmessungen 28 x 38 mm; <br></li></ul><br>  Bei der Gestaltung des Boards wurde deutlich, dass es ziemlich klein ausf√§llt: <br><br><img src="https://habrastorage.org/webt/09/g4/2o/09g42orapxjcry1gjob3mmtkkpg.jpeg"><br><br><img src="https://habrastorage.org/webt/7s/ol/rf/7solrfz2329dboluqs76zeirkoa.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Noch ein Foto!</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/sh/oq/jx/shoqjxdqcwa-g9biqhqb5szbqt4.jpeg"><br><br><img src="https://habrastorage.org/webt/dq/ia/fm/dqiafmvqrdvxrd7idqtlxlmuop4.jpeg"><br><br><img src="https://habrastorage.org/webt/vs/ym/rf/vsymrfn14peipdbsa0pqm8piypg.jpeg"><br><br><img src="https://habrastorage.org/webt/nj/yj/4x/njyj4x78zsubs7dfdszrbepsyeo.jpeg"><br><br><img src="https://habrastorage.org/webt/ci/mb/me/cimbmecbzt4cv51juvlcurk2akq.jpeg"><br><br><img src="https://habrastorage.org/webt/p-/09/vg/p-09vgwxivhz7nptwo1krbio0re.jpeg"><br><br><img src="https://habrastorage.org/webt/vl/oe/_t/vloe_twvd3tajilgcdeyeidqbq0.jpeg"><br><br><img src="https://habrastorage.org/webt/w7/j4/jf/w7j4jfs7htudfwac7xknhz9reay.jpeg"><br></div></div><br>  Warum nicht direkt in die Kamera einbauen?  So l√∂sen wir sofort das Problem mit dem Fall f√ºr den Registrar.  Also taten sie es.  Folgendes ist passiert: <br><br><img src="https://habrastorage.org/webt/6f/v6/nb/6fv6nbf5wd1hkjwv8iggioi1xwy.jpeg"><br><br><img src="https://habrastorage.org/webt/8j/g9/u9/8jg9u9gu3giixnag8fmd1rsnurq.jpeg"><br><br><img src="https://habrastorage.org/webt/gb/n-/if/gbn-ifgahpemu2_xgfszm8sizja.jpeg"><br><br><img src="https://habrastorage.org/webt/ky/mo/vg/kymovgkcsnj8h_lga0gug9p-jzq.jpeg"><br><br>  Das Foto zeigt, dass die Rekorderplatine parallel zu den Kamerakarten auf den Racks montiert ist.  Aus Gr√ºnden der K√ºhlung des Chips ist es besser, IP-Kameras mit einem Metallgeh√§use zu verwenden und einen K√ºhler herzustellen, damit dem Geh√§use W√§rme entzogen wird.  Zum Anschlie√üen eines 3G / 4G-Modems und / oder eines USB-Laufwerks wurde ein Standard-Ethernet-IP-Kamerakabel verwendet.  Die Autonomie der Kamera mit dem Rekorder im Inneren bietet eine 3,7-V-Batterie mit 700 mAh.  Die Batteriefunktion ist bei einem absichtlichen Stromausfall hilfreich.  Dieser Akku reicht f√ºr ca. 20 Minuten DVR-Betrieb mit der Kamera. <br><br><h2>  Gib mehr Kameras! </h2><br>  Es wurden auch Experimente mit der Aufzeichnung von Videos von mehreren IP-Kameras durchgef√ºhrt.  Die Experimente haben gezeigt, dass das Aufzeichnen von Videos von 2 IP-Kameras recht stabil funktioniert. Daher erw√§gen wir die M√∂glichkeit, einen Rekorder in einem separaten Fall mit der M√∂glichkeit zum Anschlie√üen von 2 IP-Kameras zu erstellen.  Jetzt testen wir die Arbeit des Registrars mit drei und vier IP-Kameras.  Die Ergebnisse sind noch nicht klar.  Die Kameras werden vom Rekorder √ºber passives PoE mit Strom versorgt. <br><br><img src="https://habrastorage.org/webt/5n/oj/tz/5nojtzo-rywvsubllu0uyfmpur0.png"><br><br><div class="spoiler">  <b class="spoiler_title">Mehr Bilder!</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/1c/rk/k5/1crkk5wkwnsfqqflozr4ros4oq0.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j0/hv/3c/j0hv3cipg7qajfkaywh1ks2yxdq.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hb/ck/lx/hbcklx37psblnkxf0m4l2kmbrfm.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/mj/cw/gtmjcw4yvs0gdljxbcsjkl99zgo.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-m/-a/ky/-m-akymdn9mjlf65snafjoggdla.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j1/mz/dk/j1mzdkaoi3lbqd7glqc8ldvtblg.png"></div><br></div></div><br>  Die Funktionalit√§t dieser Option kann beispielsweise bei der Installation von Kameras mit Schnittpunkt von √úberwachungszonen hilfreich sein.  Um mit einer gro√üen Anzahl von Kameras zu arbeiten, k√∂nnen Sie in Richtung der derzeit sehr beliebten Minicomputer schauen.  Sie m√ºssen jedoch verstehen, dass der Energieverbrauch solcher Ger√§te um eine Gr√∂√üenordnung h√∂her ist und auch der Preis. <br><br><h2>  Wie nennt man ein Boot, damit es segelt? </h2><br>  Sie haben wahrscheinlich die Inschrift auf der Tafel bemerkt.  Wir fanden es wertlos, wenn ein Projekt ohne Titel war.  Sie hatten einen bescheidenen Namen - "Vip-Cam" (Video-Ip-Kamera).  Nun, die Version mit mehreren Kameras - "Vip-Box". <br><br><h2>  Was weiter? </h2><br>  Zukunftspl√§ne: <br><br><ul><li>  Optimieren und testen Sie den Code.  Holen Sie sich ein stabiles Arbeitsger√§t; <br></li><li>  Recherche √ºber die M√∂glichkeit der Einrichtung einer IP-Kamera √ºber das Webanwendungsmen√º; <br></li><li>  Erkundigen Sie sich nach der M√∂glichkeit, einen DVR in ein Smart-Home-System zu integrieren. <br></li><li>  Testen Sie den Betrieb des DVR mit zwei oder mehr IP-Kameras. <br></li><li>  F√ºhren Sie Tests zum Betrieb der Kamera mit einer Solarbatterie durch. <br></li><li>  Erstellen einer √Ñnderung am DVR mit Unterst√ºtzung f√ºr 2-x-IP-Kameras; <br></li><li>  Hinzuf√ºgen von Funktionen f√ºr die Fernkonfiguration des DVR und der IP-Kamera; <br></li><li>  Hinzuf√ºgen der M√∂glichkeit, ein Video bei Bedarf aus der Ferne zu erstellen; <br></li></ul><br>  Quellen des Projekts sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Deshalb haben wir derzeit die Idee eines Cloud-Mini-Recorders umgesetzt.  Das Projekt wird in Ihrer Freizeit umgesetzt, daher verz√∂gert sich die Entwicklungszeit erheblich.  Als Ergebnis haben wir einen funktionierenden Prototyp eines kleinen DVR, der Videos kostenlos im Cloud-Speicher aufnehmen kann.  Es gibt noch viel Arbeit, aber eine der Aufgaben wurde gel√∂st - es ist durchaus m√∂glich, einen qualitativ hochwertigen, beispiellosen Registrar zu erstellen.  Vielen Dank f√ºr Ihre Aufmerksamkeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de422797/">https://habr.com/ru/post/de422797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de422787/index.html">Wesentliche √Ñnderungen in f√ºhrenden Chip-Architekturen</a></li>
<li><a href="../de422789/index.html">@ Pythonetc Aug 2018</a></li>
<li><a href="../de422791/index.html">Wie man NICHT Englisch lernt: H√§ufige Fehler</a></li>
<li><a href="../de422793/index.html">DEFCON-Konferenz 22. Andrew "Zoz" Brooks. Nicht vermasseln! Teil 2</a></li>
<li><a href="../de422795/index.html">Technologie und Wirtschaft: Ein neues Modell der Zusammenarbeit mit Zyxel in Russland</a></li>
<li><a href="../de422799/index.html">Wie Microsoft den gesamten Server versteckt hat und wie man ihn findet</a></li>
<li><a href="../de422801/index.html">RBAC in Kubernetes verstehen</a></li>
<li><a href="../de422803/index.html">Speicherkostenrechner oder Wie wir die "Black Box" ge√∂ffnet haben</a></li>
<li><a href="../de422805/index.html">Schnelles Abbestellen von Mailinglisten in Mail.Ru Mail</a></li>
<li><a href="../de422807/index.html">AliceVision: Befehlszeilenphotogrammetrie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>