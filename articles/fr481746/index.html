<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåÜ üôãüèΩ üé∫ Configuration de l'environnement dans la CLI. Terminal WSL / Windows üëô üå≠ üë©‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a des gens qui passent la majeure partie de leur temps de travail dans la console, il y a ceux qui utilisent le terminal si n√©cessaire, ex√©cutant...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Configuration de l'environnement dans la CLI. Terminal WSL / Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481746/">  Il y a des gens qui passent la majeure partie de leur temps de travail dans la console, il y a ceux qui utilisent le terminal si n√©cessaire, ex√©cutant quelque chose selon les instructions.  Mais je pense que chaque sp√©cialiste informatique, qu'il soit d√©veloppeur, administrateur syst√®me, ing√©nieur r√©seau ou m√™me d√©veloppeur yaml senior, utilise l'interface de ligne de commande.  Tout le monde ne pense pas √† am√©liorer l'environnement de travail dans la CLI et √† augmenter la productivit√© dans le terminal.  Je voudrais partager mon exp√©rience dans la configuration de l'environnement pour travailler avec Linux √† partir de Windows. <br><br><img src="https://habrastorage.org/webt/4n/ai/g0/4naig074wgv1yxzipkfvxsutlzo.png"><br><br>  Dans cet article, vous apprendrez quels outils et terminaux sont actuellement utilis√©s pour ex√©cuter des applications Linux sur Windows 10. Nous parlerons de <b>WSL 2</b> et de <b>Windows Terminal</b> , qui gagne de plus en plus en popularit√© aupr√®s des utilisateurs qui ont besoin de Linux pour fonctionner.  √âtant donn√© que la plupart de mes cas d'utilisation sont li√©s √† la connexion √† distance via SSH, la plupart des informations seront pertinentes pour les cas de connexions √† distance, avec toutes les fonctionnalit√©s associ√©es √† cela (transfert des cl√©s ssh via l'agent ssh, transfert du serveur X, gestion des connexions, etc.) ) <br><br>  <i>Attention!</i>  Sous la coupe beaucoup d'images et de gif r√©tr√©cis, mais parfois volumineux, il est recommand√© d'ouvrir l'article si vous avez un acc√®s appropri√© √† Internet.  Passez sous le chat si vous √™tes int√©ress√© √† ex√©cuter des utilitaires Linux sous Windows, √† optimiser votre travail dans l'environnement CLI, ou si vous aimez tout simplement les textes techniques et les terminaux couleur.  J'ai essay√© d'√©claircir le texte avec des captures d'√©cran et des captures d'√©cran du terminal, afin qu'il ne soit pas ennuyeux. <br><a name="habracut"></a><br><h1>  Pr√©sentation </h1><br>  √Ä la fois sur mon ordinateur portable personnel et professionnel, le seul syst√®me d'exploitation que j'ai est Windows 10, et cette ann√©e, je suis finalement pass√© √† utiliser uniquement WSL au lieu de VM / dualboot / Cygwin / MinGW.  Maintenant, mon terminal par d√©faut est le shell WSL local, o√π je peux ex√©cuter presque toutes les t√¢ches, comme sous Linux natif.  De plus, le mini-serveur Intel NUC s'ex√©cute sur le r√©seau domestique, sur lequel Proxmox est d√©ploy√© avec des conteneurs LXC et KVM, dans lequel Docker tourne.  Je vais sur toutes les VM via SSH, avec les cl√©s du r√©pertoire Windows.  Beaucoup de temps dans l'activit√© professionnelle se d√©roule dans la CLI, avec le m√™me serveur et le m√™me r√©seau.  Par cons√©quent, il y a toujours un d√©sir de g√©rer des outils pour un travail plus confortable dans le terminal, et dans Windows, il y avait toujours des probl√®mes avec cela.  Mais maintenant tout change. <br><br><img src="https://habrastorage.org/webt/kh/tj/fc/khtjfclo949wmznn3as5cjwfdoq.png"><br><br>  Cet article et les suivants sont plus ax√©s sur les passionn√©s qui recherchent de nouvelles solutions et veulent pomper leur coquille.  Mais pour les d√©butants, quelque chose devrait √™tre int√©ressant, bien que l'article se soit av√©r√© assez profond√©ment immerg√© dans le sujet et sugg√®re que le lecteur ait des connaissances fondamentales sous Linux.  Toutes les informations sont collect√©es sur la base d'une exp√©rience personnelle avec WSL, un terminal, ainsi que d'une pagination sans fin des probl√®mes de d√©bordement de pile et de Github dans le processus d'am√©lioration constante des configurations et de recherche d'outils pratiques pour le travail. <br><br><h1>  Sous-syst√®me Windows pour Linux (WSL) 2 </h1><br>  Il existe plusieurs articles normaux sur WSL sur Internet et sur Habr ( <a href="https://habr.com/ru/post/412633/">une fois</a> un article sur l'installation / la configuration de WSL avec un serveur X, <a href="https://habr.com/ru/post/451782/">deux</a> notes sur WSL 2, <a href="https://habr.com/ru/post/472202/">trois</a> articles sur le d√©veloppement Python dans VSCode avec WSL) qui d√©crivent l'installation et la configuration du syst√®me.  Cependant, toutes les actions d'installation ne sont pas d√©j√† pertinentes, ainsi que les restrictions avec pi√®ges deviennent moins.  Je ne m'attarderai pas sur l'installation en d√©tail, les instructions pour installer la (seconde) version actuelle de WSL <a href="https://docs.microsoft.com/ru-ru/windows/wsl/wsl2-install" rel="nofollow">sont sur le site Web de Microsoft</a> , et vous pouvez √©galement trouver de courts <a href="" rel="nofollow">tutoriels</a> sur Internet. <br><br><img src="https://habrastorage.org/webt/ok/ml/o-/okmlo-allpo4qks8ekwplfsgges.png"><br><br>  Maintenant, WSL est toujours en d√©veloppement actif et r√©cemment ( <a href="https://habr.com/ru/company/microsoft/blog/456204/"><i>juin 2019</i></a> ) une nouvelle version de WSL 2 a √©t√© publi√©e, qui n'est actuellement disponible que pour les nouvelles versions de Windows pour les membres de Windows Insiders.  Si possible, je vous conseille de mettre imm√©diatement √† niveau WSL vers la version 2, car cela a am√©lior√© le travail des appels syst√®me, le travail avec le r√©seau, le FS, et en g√©n√©ral, il est construit sur une architecture diff√©rente et, selon certaines donn√©es, donne une <a href="https://devblogs.microsoft.com/commandline/announcing-wsl-2/" rel="nofollow">augmentation de 20 fois la vitesse</a> par rapport √† la premi√®re version. <br><br>  Vous pouvez voir la version de Windows 10 et la build du syst√®me d'exploitation dans <i>D√©marrer -&gt; Param√®tres -&gt; Syst√®me -&gt; √Ä propos</i> , pour installer WSL 2, vous avez besoin de <b>Windows 1903</b> et au moins de la version de build <b>18917</b> .  Si vous n'√™tes pas membre du <a href="https://insider.windows.com/ru-ru/how-to-pc/" rel="nofollow">programme Windows Insider</a> , les mises √† jour n'arriveront probablement pas avant une version stable.  Donc, si vous souhaitez mettre √† niveau vers la derni√®re version, vous pouvez activer l'acc√®s <i>rapide</i> ( <i>rapide</i> ) dans <i>D√©marrer -&gt; Param√®tres -&gt; Mise √† jour et s√©curit√© -&gt; Programme Windows Insider</i> , mettre √† jour et d√©sactiver d'autres mises √† jour.  Il convient de noter que des mises √† jour non encore test√©es en masse seront install√©es, ce qui peut affecter la stabilit√©. <br><br>  Il convient de garder √† l'esprit qu'avant la version <a href="https://blogs.windows.com/windowsexperience/2019/10/03/announcing-windows-10-insider-preview-build-18995/" rel="nofollow">18995,</a> WSL a un <a href="https://github.com/microsoft/WSL/issues/4377" rel="nofollow">bogue</a> lors de l'utilisation de fichiers sur des disques Windows mont√©s, exprim√© sous la forme d'une erreur d'entr√©e / sortie, le red√©marrage de WSL uniquement ( <i>wsl --shutdown</i> dans PowerShell) √©tant utile.  En g√©n√©ral, il existe de nombreux bogues corrig√©s qui sont toujours pr√©sents dans WSL version 1 (qui est d√©finie par d√©faut) et les distributions non pr√©visualis√©es de Windows.  Si les mises √† jour de votre syst√®me d'exploitation sont r√©glement√©es par les politiques de l'entreprise, les derni√®res mises √† jour n'arriveront probablement pas et vous devez en tenir compte.  Sur l'un des ordinateurs portables, j'ai construit 18956 et il n'y a pas de mises √† jour, malgr√© le fait que l'option <i>Fast</i> est s√©lectionn√©e dans les param√®tres du programme Insider.  Un syst√®me propre a √©t√© install√© sur un autre ordinateur portable il y a quelques mois, et des mises √† jour arrivent r√©guli√®rement et sont install√©es. <br><br><h2>  Installer WSL 2 </h2><br>  WSL n√©cessite que Hyper-V soit activ√© car les distributions Linux s'ex√©cutent sur des machines virtuelles l√©g√®res utilisant la virtualisation Hyper-V. <br><br><img src="https://habrastorage.org/webt/vd/im/7a/vdim7aihpbrv6ojfrf1uks51-q0.png"><br><br>  Ensuite, je donnerai une br√®ve instruction d'installation √† partir de la distribution CLI PowerShell de WSL en utilisant <a href="https://www.kali.org/news/wsl2-and-kali/" rel="nofollow">Kali Linux</a> comme exemple).  Si vous pr√©f√©rez <a href="https://aka.ms/wsl-ubuntu-1804" rel="nofollow">Ubuntu</a> ou <a href="https://docs.microsoft.com/ru-ru/windows/wsl/install-manual" rel="nofollow">une autre</a> distribution <a href="https://docs.microsoft.com/ru-ru/windows/wsl/install-manual" rel="nofollow">Linux</a> disponible, remplacez le lien et les noms par ceux appropri√©s. <br><br>  V√©rifiez la version de build de Windows: <br><br> <code>Get-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion" | Select CurrentBuild</code> <br> <br>  Activez les <i>composants VirtualMachinePlatform</i> et <i>Microsoft-Windows-Subsystem-Linux:</i> <br><br> <code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux <br> Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform</code> <br> <br>  Red√©marrer <br>  Ensuite, installez la distribution √† partir du Microsoft Store ( <a href="https://aka.ms/wslstore" rel="nofollow">https://aka.ms/wslstore</a> ) ou continuez √† ex√©cuter dans PowerShell: <br><br> <code>curl.exe -L -o kali.appx https://aka.ms/wsl-kali-linux-new <br> Add-AppxPackage .\kali.appx <br> rm .\kali.appx</code> <br> <br>  Lancez la console WSL (la distribution doit appara√Ætre dans le menu D√©marrer, recherchez par le nom de la distribution), attendez l'invitation pour installer un nouvel utilisateur, fermez la console. <br><br>  Maintenant, la distribution devrait appara√Ætre dans la liste si elle est ex√©cut√©e dans PowerShell: <br><br> <code>wsl -l -v</code> <br> <br>  Si n√©cessaire, convertissez la distribution au format WSL version 2: <br><br> <code>wsl --set-version kali-linux 2 <br> wsl --set-default-version 2</code> <br> <br>  Faites de root l'utilisateur par d√©faut (facultatif): <br><br> <code>kali config --default-user root</code> <br> <br>  Si vous obtenez l'erreur <i>"Une tentative de connexion a √©chou√© parce que la partie connect√©e n'a pas r√©pondu correctement apr√®s un certain temps, ou la connexion √©tablie a √©chou√© parce que l'h√¥te connect√© n'a pas r√©pondu."</i> , Alors vous avez une version dans laquelle la suivante (d√©j√† corrig√©e) dans les versions r√©centes) bug.  Comme d'habitude, il existe une <a href="https://expertonsomething.com/2019/08/25/fixing-kali-linux-on-windows-wsl2/" rel="nofollow">solution de contournement</a> , ou utilisez la distribution Ubuntu, je n'ai eu aucun probl√®me avec elle sur la m√™me version pas la derni√®re de la build. <br><br>  Si n√©cessaire, vous pouvez d√©placer le disque virtuel WSL vers une autre partition (diff√©rente de C :) selon les <a href="https://github.com/MicrosoftDocs/WSL/issues/412" rel="nofollow">instructions</a> .  Il vaut mieux le faire tout de suite, car tout ne se passe pas bien. <br><br>  <i>Avertissement sur la s√©curit√©</i> .  Dans WSL et sur d'autres serveurs Linux du r√©seau domestique, je ne d√©marre aucun syst√®me critique, et il n'y a pas d'autres utilisateurs (sauf moi) sur le r√©seau, donc je vais rooter presque partout, avec l'authentification ssh via des cl√©s.  Je sais que ce n'est pas la meilleure pratique, mais je parle d'un environnement de d√©veloppement personnel et je ne vois pas l'int√©r√™t de cr√©er un utilisateur non root.  Les probl√®mes de s√©curit√© ne seront pas pris en compte dans cet article, je vais en parler un jour (sur la fa√ßon d'organiser l'interaction des services via TLS avec un renouvellement de certificat centralis√© dans un r√©seau domestique; sur la synchronisation <i>~ / .ssh / config</i> entre les serveurs, le transfert ports et cl√©s, etc.). <br><br><h2>  Configuration WSL </h2><br>  √Ä partir de la build <b>17093</b> , le fichier de configuration WSL principal se trouve sur le syst√®me de distribution FS √† <a href="https://devblogs.microsoft.com/commandline/automatically-configuring-wsl/" rel="nofollow">/etc/wsl.conf</a> , il d√©crit les param√®tres qui seront appliqu√©s √† chaque d√©marrage de la distribution: <br><br><ul><li>  Montage automatique - montage automatique des lecteurs Windows </li><li>  R√©seau - g√©n√©rer des fichiers resolv.conf, des h√¥tes </li><li>  Interop - d√©marrez les processus Windows et ajoutez Windows $ PATH √† Linux $ PATH </li></ul><br>  Initialement, WSL se passe de cette configuration, elle doit √™tre enregistr√©e manuellement: <br><br> <code>[automount] <br> enabled = true <br> root = /mnt <br> options = "metadata,umask=22,fmask=11" <br> mountFsTab = true <br> <br> [network] <br> generateHosts = true <br> generateResolvConf = true <br> <br> [interop] <br> enabled = true <br> appendWindowsPath = true</code> <br> <br>  Certains param√®tres sont utilis√©s avec la valeur par d√©faut et avec <i>/etc/wsl.conf</i> vide, mais pour le bon fonctionnement avec les fichiers, vous devez enregistrer au moins le param√®tre <i>options</i> , sinon les fichiers Windows auront les autorisations 777 et cela ne peut pas √™tre modifi√© √† partir de Linux. <br><br><img src="https://habrastorage.org/webt/rq/ph/vb/rqphvbavjejp_g8ukkdldxlqklw.png"><br><br>  Vous pouvez red√©marrer la distribution √† partir de PowerShell avec la commande: <br><br> <code>wsl -t kali-linux</code> <br> <br>  Apr√®s cela, vous pouvez mettre √† jour les packages et r√©gler vous-m√™me le syst√®me d'exploitation.  Je ne toucherai pas aux param√®tres du shell et √† l'environnement sous Linux, je laisserai cela pour le prochain article. <br><br> <code>apt -y update &amp;&amp; apt -y upgrade</code> <br> <br><h2>  Syst√®me de fichiers WSL 2 et performances </h2><br>  Les fichiers √† l'int√©rieur de WSL version 2 sont stock√©s sur le disque virtuel VHDX, ext4 est utilis√© comme syst√®me de fichiers.  Vous pouvez acc√©der √† rootfs WSL via un chemin d'acc√®s au format suivant: <br><br> <code>\\wsl$\{DistroName}\</code> <br> <br>  Ou, vous pouvez taper <i>"explorer.exe".</i> Dans la CLI et un navigateur Windows s'ouvrira dans le r√©pertoire actuel. <br><br>  WSL version 1 n'utilisait pas VHDX et avait un acc√®s facile au r√©pertoire o√π se trouvaient les fichiers Linux, et Microsoft <a href="https://devblogs.microsoft.com/commandline/do-not-change-linux-files-using-windows-apps-and-tools/" rel="nofollow">d√©conseillait fortement de</a> changer les fichiers Linux de Windows.  Dans la nouvelle version de WSL, l'acc√®s au FS sur un disque virtuel est fourni √† l'aide du serveur de fichiers <a href="https://en.wikipedia.org/wiki/9P_(protocol)" rel="nofollow">Plan 9 Filesystem Protocol</a> . <br><br><img src="https://habrastorage.org/webt/mr/x8/yh/mrx8yhmxos1hciyocyjn9lz-ki4.png"><br><br>  Dans les versions pr√©c√©dentes de WSL, il y avait des probl√®mes de performances du syst√®me de fichiers car les appels syst√®me √©taient √©mul√©s via l'API Windows, l'acc√®s aux fichiers √©tait lent et instable.  Fin 2019, WSL 2 a chang√© son architecture et utilis√© le noyau Linux natif.  √Ä en juger par la <a href="" rel="nofollow">diapositive</a> de la pr√©sentation youtube de <a href="https://www.youtube.com/watch%3Fv%3DlwhMThePdIo" rel="nofollow">Le nouveau sous-syst√®me Windows pour l'architecture Linux: une plong√©e profonde</a> , les performances des op√©rations sur disque ont augment√© de 2 √† 5 fois. <br><br>  La capacit√© maximale du disque est limit√©e √† 256 Go, si ce volume est d√©pass√©, vous devrez faire un redimensionnement, les instructions sont dans la <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-ux-changes" rel="nofollow">documentation</a> . <br><br>  WSL a initialement rencontr√© des probl√®mes de lib√©ration de ressources apr√®s avoir utilis√© la RAM.  La version 19013 a r√©solu ce probl√®me.  Si vous ex√©cutez des t√¢ches exigeantes (par exemple, assembler une application <a href="https://devblogs.microsoft.com/oldnewthing/20180717-00/%3Fp%3D99265" rel="nofollow">Rust</a> ), vous remarquerez que le processus <a href="https://devblogs.microsoft.com/oldnewthing/20180717-00/%3Fp%3D99265" rel="nofollow">Vmmem</a> se trouvera en haut du Gestionnaire des t√¢ches, mais la consommation de m√©moire a consid√©rablement diminu√© dans les versions r√©centes de WSL. <br><br><img src="https://habrastorage.org/webt/5k/pk/w0/5kpkw0g2rhtlk1sbvagf4o2md7w.gif"><br><br><h2>  R√©seau </h2><br>  Le nom d'h√¥te (hostname) sous Linux est tir√© du nom du PC sous Windows, ind√©pendamment de ce qui est √©crit dans <i>/ etc / hostname</i> ou avec la commande <i>hostnamectl set-hostname</i> . <br><br>  Contrairement √† la premi√®re version, dans WSL 2, le r√©seau fonctionne via un commutateur Hyper-V virtuel: <br><br> <code>‚ùØ‚ùØ ipconfig.exe | grep IPv4 <br> IPv4 Address. . . . . . . . . . . : 192.168.88.200 <br> IPv4 Address. . . . . . . . . . . : 172.31.160.1 <br> IPv4 Address. . . . . . . . . . . : 172.27.144.1 <br> <br> ‚ùØ‚ùØ ip -br -4 ad show dev eth0 <br> eth0       UP 172.27.150.196/20 <br> ‚ùØ‚ùØ ip ro list default <br> default via 172.27.144.1 dev eth0</code> <br> <br><img src="https://habrastorage.org/webt/jq/9j/wy/jq9jwydv7ac3lacnnqmgxtzajes.png"><br><br>  Dans ce cas, le r√©seau <i>172.27.144.0/20 est</i> utilis√© sous WSL, sa premi√®re adresse ( <i>172.27.144.1</i> ) est le syst√®me h√¥te Windows. <br><br>  Depuis Linux, vous pouvez acc√©der aux services h√¥tes (fonctionnant sous Windows) sur le r√©seau, par exemple, comme ceci: <br><br> <code>‚ùØ‚ùØ nmap -p 3389 $(cat /etc/resolv.conf | grep nameserver | awk '{print $2}')</code> <br> <br>  L'adresse IP Windows provient de <i>/etc/resolv.conf</i> , o√π elle est g√©n√©r√©e automatiquement en fonction des param√®tres <i>wsl.conf</i> . <br><br>  Inversement, si vous avez besoin d'une connexion √† un socket Linux √† partir d'une application Windows, vous devez acc√©der √† l'adresse IP de WSL.  Il y a une mise en garde - sous Linux, le service ne doit pas √™tre ex√©cut√© sur <i>localhost (127.0.0.1)</i> , mais sur l'adresse <i>0.0.0.0</i> .  Par exemple, pour augmenter rapidement le proxy SOCKS5 sur votre VPS, vous devez d√©marrer SSH avec le param√®tre de <i>redirection de port dynamique</i> : <br><br> <code>‚ùØ‚ùØ ssh -D 0.0.0.0:2299 -N -f proxy.example.com</code> <br> <br>  Apr√®s cela, dans l'application Windows, par exemple Chrome, en tant qu'adresse SOCKS5, enregistrez non pas l' <i>h√¥te local</i> , mais l'adresse WSL, dans ce cas <i>172.27.150.196</i> .  Soit dit en passant, d'une mani√®re si simple de tunneliser le trafic via VPS dans Chrome, il devient possible d'utiliser l'acc√®s aux sites via IPv6. <br><br><img src="https://habrastorage.org/webt/2-/lk/r6/2-lkr6hzsppfvp6siqjjacjiszm.gif"><br><br>  Linux changera son adresse IP apr√®s un red√©marrage √† chaque fois, donc dans les sc√©narios o√π vous avez besoin d'un transfert de port fonctionnant constamment et d√©marrant automatiquement, vous devez rechercher une solution de contournement.  Il existe de nombreuses fa√ßons de r√©soudre ce probl√®me, √† divers degr√©s de b√©quilles, vous pouvez en lire plus dans ce <a href="https://github.com/microsoft/WSL/issues/4150" rel="nofollow">num√©ro</a> sur github.  J'ai utilis√© l'utilitaire <a href="https://github.com/shayne/go-wsl2-host" rel="nofollow">go-wsl2-host</a> , qui impl√©mente le service Windows, qui ajoute automatiquement l'adresse IP WSL au <i>fichier d'h√¥tes</i> Windows, afin que vous puissiez enregistrer un nom d'h√¥te tel que <i>ubuntu.wsl</i> sur le syst√®me h√¥te et acc√©der √† Linux sur celui-ci.  Cependant, toutes ces b√©quilles et ne fonctionnent pas tr√®s bien, il reste √† attendre que Microsoft corrige ces probl√®mes. <br><br><img src="https://habrastorage.org/webt/zj/tx/ow/zjtxowxg6epu4u7vfgoxki16z6k.png"><br><br>  <i>UPD</i>  Pendant que j'√©crivais cet article, j'ai d√©couvert qu'il y avait des mises √† jour (build <a href="https://devblogs.microsoft.com/commandline/whats-new-for-wsl-in-insiders-preview-build-18945/" rel="nofollow">18945</a> ), dans lesquelles il √©tait possible de passer des services via <i>localhost</i> aux services s'ex√©cutant en WSL.  Certes, il s'est av√©r√© qu'il y avait un <a href="https://github.com/microsoft/WSL/issues/4353" rel="nofollow">bogue en</a> raison duquel il ne fonctionnait toujours pas pour tout le monde, le <a href="https://github.com/MicrosoftDocs/WSL/releases/tag/18970" rel="nofollow">correctif</a> dans la version d'ao√ªt est <b>18970</b> .  √âtant donn√© que tout le monde ne re√ßoit pas de mises √† jour, m√™me si j'√©tais membre du programme Windows Insiders, je n'ai pas ajust√© les informations, cela aidera peut-√™tre quelqu'un √† configurer l'interaction r√©seau. <br><br><h2>  OpenSSH sur Windows et services de d√©marrage automatique </h2><br>  Windows 10, comme Windows Server 2019, est livr√© avec un <a href="https://github.com/PowerShell/openssh-portable" rel="nofollow">fork OpenSSH</a> , qui comprend tous les utilitaires familiers ssh-keygen, ssh-add, scp et d'autres, y compris ssh-agent et le serveur sshd lui-m√™me.  Le client et le serveur peuvent √™tre <i>install√©s</i> via <i>Applications&gt; Applications et fonctionnalit√©s&gt; G√©rer les fonctionnalit√©s facultatives,</i> mais la version du client ssh ne sera pas la derni√®re.  J'ai rencontr√© un bogue qui ne me permettait pas de <i>me connecter</i> √† l'h√¥te via l'h√¥te de saut avec l'option <i>ProxyJump</i> et il s'est av√©r√© que ce probl√®me √©tait r√©solu, mais j'ai d√ª mettre √† jour manuellement le client SSH.  Vous pouvez installer la version actuelle de Win32 OpenSSH en t√©l√©chargeant zip depuis la section <a href="https://github.com/PowerShell/Win32-OpenSSH/releases/" rel="nofollow">Releases</a> sur le github et en la d√©compressant, par exemple, dans <i>C: \ Program Files \ OpenSSH</i> .  Le logiciel tiers ssh.exe (par exemple, lorsque vous utilisez le mode de d√©veloppement √† distance dans VSCode) est appel√© √† partir de <i>$ PATH</i> ( <i>% SYSTEMROOT% \ System32 \ OpenSSH \</i> ), vous devez modifier la variable d'environnement.  Les variables d'environnement sont modifi√©es via l'interface graphique dans <i>D√©marrer&gt; Modifier les variables d'environnement syst√®me</i> ( <i>D√©marrer&gt; Modifier les variables d'environnement syst√®me</i> ), l√†, vous devez mettre une nouvelle fa√ßon au-dessus de l'ancienne version. <br><br>  Puisque Systemd ne fonctionne pas dans WSL, il y a un probl√®me avec le d√©marrage des services avec le d√©marrage du syst√®me.  Il existe plusieurs fa√ßons de configurer le d√©marrage automatique du serveur ssh dans WSL, la mani√®re la plus simple consiste √† cr√©er une t√¢che dans le Planificateur de t√¢ches, o√π vous pouvez sp√©cifier la commande de d√©marrage du serveur.  Sur Internet, vous pouvez trouver diff√©rentes <a href="https://superuser.com/questions/1112007/how-to-run-ubuntu-service-on-windows-at-startup%3Fnoredirect%3D1%26lq%3D1" rel="nofollow">instructions de</a> d√©marrage via les scripts <i>vbs</i> , <i>ps1</i> ou <i>bat</i> .  Le probl√®me avec presque toutes les m√©thodes est que le d√©clencheur est de d√©marrer le syst√®me d'exploitation Windows principal, c'est-√†-dire que si WSL se bloque et que vous devez red√©marrer le syst√®me ( <i>wsl -t</i> ), Linux d√©marrera sans ex√©cution de service.  Lorsque Windows d√©marre, la distribution WSL d√©marre uniquement lors de son premier acc√®s. <br><br>  J'utilise le serveur SSH sur un ordinateur portable √† l'int√©rieur de WSL afin de pouvoir aller √† distance d'une machine √† l'autre.  Et, du fait que j'utilise des techniques de transfert de port ssh et une configuration centralis√©e bien pens√©e des clients SSH, je peux acc√©der en toute transparence √† tous mes serveurs, en entrant un nom d'h√¥te au lieu d'adresses.  Autrement dit, m√™me si vous connectez l'un des ordinateurs portables au r√©seau mobile, le d√©mon autossh se connectera √† l'h√¥te de saut et je peux toujours aller √† l'ordinateur, aucun NAT ne sera un obstacle.  Par cons√©quent, il est important pour moi que sshd soit toujours actif. <br><br><img src="https://habrastorage.org/webt/jv/wp/sk/jvwpsk57_p-g780dj2nrk_geutw.png"><br><br>  La seule fa√ßon de travailler pour acc√©der √† SSH dans WSL est de transf√©rer le port SSH.  Cela peut √™tre fait √† partir du WSL lui-m√™me √† l'aide de <i>RemoteForward</i> , ou √† partir d'un autre serveur sur le r√©seau domestique.  Peu de gens en ont besoin, et c'est d√©j√† un niveau avanc√©, donc je vais juste donner une commande fonctionnelle: <br><br> <code>‚ùØ‚ùØ ssh -R '*:2363:*:22' -N -f mt.example.com</code> <br> <br>  Maintenant, lorsque vous vous connectez √† l'adresse <i>mt.example.com:2263,</i> vous pouvez acc√©der directement au WSL. <br><br>  Si vous pr√©voyez d'augmenter le serveur SSH dans WSL, vous devez vous rappeler de configurer les param√®tres de d√©marrage du serveur n√©cessaires dans <i>/ etc / ssh / sshd_config</i> .  Pour √©viter tout conflit avec la liaison de service sur le port 22, le serveur OpenSSH sous Windows doit √™tre d√©sactiv√© ou supprim√© compl√®tement s'il est install√© ( <i>Applications&gt; Applications et fonctionnalit√©s&gt; G√©rer les fonctionnalit√©s facultatives</i> ). <br><br><h2>  Transfert X </h2><br>  Il s'est av√©r√© √™tre un moment agr√©able que dans Windows 10, il existe un utilitaire <i>clip.exe</i> qui vous permet de rediriger stdout directement vers le presse-papiers de Windows.  Ceci est pratique √† utiliser dans des programmes tels que tmux, et gr√¢ce au transfert du serveur X, le texte peut √©galement √™tre copi√© √† partir d'h√¥tes distants.  Pour que tout fonctionne, vous devez toujours avoir un serveur X fonctionnant sous Windows et la variable <i>$ DISPLAY</i> d√©finie correctement. <br><br>  Une petite th√©orie ennuyeuse.  Sur les syst√®mes * nix ex√©cutant X, il existe diff√©rents types de presse-papiers ( <i>primaire, secondaire, presse-papiers</i> ), dans le contexte de cet article, ce n'est pas si important, mais il est important pour une compr√©hension g√©n√©rale du m√©canisme de travail.  Il existe deux utilitaires (xclip et xsel) pour travailler avec les presse-papiers sous Linux.  Les deux utilitaires ont des fonctionnalit√©s similaires, dans xsel, il est l√©g√®rement plus grand, mais les fonctionnalit√©s de base n√©cessaires pour transmettre le contenu du tampon sont les m√™mes.  Dans les applications X, le texte s√©lectionn√© tombe dans la s√©lection principale, il est ins√©r√© avec le bouton central de la souris, dans xclip et xsel la s√©lection principale est utilis√©e par d√©faut. <br><br>  Par exemple, pour copier le contenu d'une variable dans le tampon par d√©faut, vous devez passer stdout √† stdin de l'utilitaire xclip, sans param√®tres suppl√©mentaires: <br><br> <code>‚ùØ‚ùØ echo -n $DISPLAY | xclip</code> <br> <br>  Et pour afficher le contenu du tampon par d√©faut, ex√©cutez xclip avec le commutateur <i>-o</i> : <br><br> <code>‚ùØ‚ùØ xclip -o <br> 172.20.160.1:0</code> <br> <br>  Pour que le presse-papiers soit redirig√© via le serveur X et que les applications graphiques s'ex√©cutent sur le serveur X local, vous devez d√©finir l'adresse IP, qui est la passerelle par d√©faut pour WSL, dans la variable <i>$ DISPLAY</i> .  Jusqu'√† pr√©sent, rien de mieux que de le prendre √† partir de <i>resolv.conf</i> (qui est g√©n√©r√© automatiquement par Windows) n'a pas √©t√© invent√©.  Par cons√©quent, le moyen le plus simple consiste √† enregistrer l'exportation de la variable <i>$ DISPLAY</i> dans le profil de shell (par exemple, <i>~ / .zshrc</i> pour zsh). <br><br> <code>‚ùØ‚ùØ echo "export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}'):0" &gt;&gt; ~/.zshrc</code> <br> <br><img src="https://habrastorage.org/webt/wi/gx/yr/wigxyrt3e5yazd256qflh2z6fbu.gif"><br><br>  En tant que serveur X, j'ai choisi le <a href="https://sourceforge.net/projects/vcxsrv/" rel="nofollow">VcXsrv</a> gratuit, il peut fonctionner avec le tampon, a diff√©rents modes d'affichage de fen√™tre et est lanc√© √† partir de la ligne de commande avec les options prescrites.  <a href="https://gist.github.com/stowler/9921780" rel="nofollow">En utilisant le lien pour r√©sumer,</a> vous pouvez voir toutes les options. <br><br>  Vous pouvez cr√©er une t√¢che d'ex√©cution automatique pour le serveur X dans le Planificateur de t√¢ches comme ceci: <br><br> <code>Triggers: At startup <br> Actions: Start a program <br> ____Program: "%ProgramFiles%\VcXsrv\vcxsrv.exe" <br> ____Arguments: -wgl -dpi auto -ac -multiwindow</code> <br> <br><h2>  Touches SSH </h2><br>  Pour que les programmes de Windows puissent utiliser des cl√©s SSH (par exemple, un √©diteur lors de l'utilisation d'un r√©f√©rentiel GitHub distant), et en m√™me temps qu'il n'y ait pas de deuxi√®me copie de cl√©s dans WSL, il est pr√©f√©rable de g√©n√©rer des cl√©s dans Windows <i>% HOMEPATH% /.</i> Ssh et de cr√©er des liens symboliques √† la maison R√©pertoires WSL. <br><br> <code>ssh-keygen -f /mnt/c/Users/${WIN_USER}/.ssh/id_rsa -b 4096 <br> ln -sf /mnt/c/Users/${WIN_USER}/.ssh/id_rsa ${HOME}/.ssh/id_rsa <br> ln -sf /mnt/c/Users/${WIN_USER}/.ssh/id_rsa.pub ${HOME}/.ssh/id_rsa.pub</code> <br> <br>  Ou, dans <i>~ / .ssh / config,</i> vous pouvez sp√©cifier le param√®tre <i>IdentityFile</i> en sp√©cifiant le chemin d'acc√®s aux cl√©s sur le disque Windows: <br><br> <code>Host * <br> IdentityFile /mnt/c/Users/${WIN_USER}/.ssh/id_rsa</code> <br> <br>  Si les cl√©s ont √©t√© copi√©es quelque part et que les autorisations de fichier ne sont pas d√©finies correctement, corrigez les autorisations: <br><br> <code>chmod 600 /mnt/c/Users/${WIN_USER}/.ssh/id_rsa <br> chmod 644 /mnt/c/Users/${WIN_USER}/.ssh/id_rsa.pub <br> chmod 700 /mnt/c/Users/${WIN_USER}/.ssh</code> <br> <br><img src="https://habrastorage.org/webt/d0/lf/da/d0lfda3xlur_aq6pphygb_rcvoc.png"><br><br>  Ainsi, lors de la d√©finition d'un <a href="https://habr.com/ru/post/122445/">acc√®s</a> suppl√©mentaire <a href="https://habr.com/ru/post/122445/">par des cl√©s SSH, l'</a> utilisateur est identifi√© de mani√®re unique par un ensemble de cl√©s en un seul endroit, √† la fois lors de l'utilisation d'applications Windows et Linux.  Vous pouvez maintenant ajouter la cl√© publique au serveur / services, o√π vous devrez vous rendre depuis cet ordinateur.  S'il y a d'autres p√©riph√©riques sur le r√©seau domestique qui n√©cessitent un acc√®s SSH, alors il sera correct de copier votre cl√© publique sur ces serveurs ( <i>ssh-copy-id</i> ), mais vous n'avez pas besoin de copier les cl√©s d'un serveur sur un autre.  Puisqu'il est possible (et n√©cessaire) d'utiliser ssh-agent lors de l'utilisation de SSH, lors de la connexion d'un serveur √† un autre, l'agent veille √† ce que l'autorisation se produise sur la cl√© transf√©r√©e.  Pour que tout fonctionne correctement et comme pr√©vu, vous devez prendre soin du fichier <a href="https://www.ssh.com/ssh/config/" rel="nofollow"><i>~ / .ssh / config</i> ,</a> dans lequel vous devez enregistrer toutes les options n√©cessaires. <br><br> <code>Host * <br> TCPKeepAlive             yes <br> ServerAliveInterval         30 <br> ServerAliveCountMax         3 <br> ForwardAgent             yes <br> AddKeysToAgent            yes <br> ForwardX11              yes <br> ForwardX11Trusted          yes</code> <br> <br><h1>  Quel terminal choisir pour travailler sous Linux sur Windows </h1><br>  Tout d'abord, je veux faire un petit examen des shells de terminaux existants pour Windows qui peuvent ex√©cuter WSL.  Parmi les utilisateurs, le processeur fonctionnel <a href="https://mobaxterm.mobatek.net/" rel="nofollow">MobaXterm</a> est <a href="https://mobaxterm.mobatek.net/" rel="nofollow">populaire</a> , qui peut cr√©er diverses sessions, y compris des sessions graphiques (WSL, bash / zsh, Mosh, RDP, VNC, etc.), vous permet de cr√©er des macros et d'ex√©cuter des scripts, poss√®de de nombreux param√®tres et fonctionnalit√©s, agent ssh, redirection de port ssh autorun, et a m√™me un serveur ftp / tftp / http int√©gr√©, mais le produit est en source ferm√©e et, en outre, payant.  <a href="https://github.com/zeit/hyper" rel="nofollow">Hyper</a> est un autre √©mulateur de terminal plus moderne qui vous permet d'ex√©cuter le shell WSL, le terminal est construit sur HTML / JS / CSS et est d√©velopp√© √† l'aide de plug-ins sous la forme de modules node.js ( <a href="https://github.com/bnb/awesome-hyper" rel="nofollow">liste impressionnante</a> ).  Il existe d'autres terminaux qui vous permettent d'ex√©cuter WSL avec diff√©rents degr√©s de b√©quilles ( <a href="https://conemu.github.io/en/BashOnWindows.html" rel="nofollow">ConEmu</a> , sa fourche <a href="https://jackwarren.info/blog/cmder" rel="nofollow">Cmder</a> , <a href="https://github.com/mintty/wsltty" rel="nofollow">WSLtty</a> , etc.), mais je les laisserai sans surveillance. <br><br><img src="https://habrastorage.org/webt/ur/ih/v9/urihv91z1zuherlcqddg_fkl9q0.png"><br><br>  Plus loin dans cet article, nous parlerons du <b>terminal Windows</b> , sur lequel j'ai r√©cemment bascul√©, et jusqu'√† pr√©sent, je ne ressens que des √©motions positives.  <a href="https://github.com/microsoft/terminal" rel="nofollow">Le terminal</a> est toujours en version b√™ta, mais il fonctionne de mani√®re assez stable.  Parmi les fonctionnalit√©s multi-onglets actuellement impl√©ment√©es, la s√©paration des panneaux (s√©paration), les profils personnalis√©s des connexions des terminaux, les sch√©mas de couleurs, eh bien, il n'y a plus rien √† √©num√©rer.  Mais cette fonctionnalit√© est bien suffisante, j'aime m√™me que le logiciel ne soit pas surcharg√© de superflu - comme si les d√©veloppeurs adh√©raient au principe <a href="https://en.wikipedia.org/wiki/KISS_principle" rel="nofollow">KISS</a> . <br><br>  Le terminal a √©volu√© √† partir du projet Windows Console (ConPTY), apprenant √† prendre en charge les s√©quences ANSI / VT, les couleurs vraies RVB 24 bits et UTF-8.  En suivant les liens ( <a href="https://habr.com/ru/post/417679/">d√©but</a> , <a href="https://habr.com/ru/post/420853/">suite</a> ) sur Habr√©, une merveilleuse traduction d'une s√©rie de billets de blog en <a href="https://devblogs.microsoft.com/commandline/windows-command-line-the-evolution-of-the-windows-command-line/" rel="nofollow">ligne de commande Windows: Inside the Windows Console</a> , qui raconte l'histoire de la cr√©ation de terminaux, les normes li√©es au transfert de s√©quences d'√©chappement, les pages de codes, l'unicode, l'√©mergence d'√©mulateurs de terminaux et dans le futur d√©j√† une √©volution de la ligne de commande windows.  Les technologues peuvent √™tre int√©ress√©s.  L'√©quipe d'ing√©nierie travaillant sur ce projet opensource g√®re le devlog de la <a href="https://devblogs.microsoft.com/commandline/" rel="nofollow">ligne de commande Windows</a> , qui est plus que enti√®rement d√©di√© √† WSL et Windows Terminal.  Je n'aurais jamais cru avant ce moment que je regarderais avec int√©r√™t le d√©veloppement des produits MS, mais ce qu'ils font dans le cadre du d√©veloppement de WSL, Terminal et VSCode m√©rite vraiment le respect.  Comment le d√©veloppement de WSL a commenc√©, est d√©crit dans <a href="https://medium.com/microsoft-open-source-stories/when-linux-came-to-windows-204cf9abb3d6" rel="nofollow">Microsoft Open Source Stories</a> (il y a une <a href="https://habr.com/ru/company/ruvds/blog/461663/">traduction</a> sur Habr√©).  Soit dit en passant, Microsoft est membre platine de la <a href="https://en.wikipedia.org/wiki/Linux_Foundation" rel="nofollow">Linux Foundation</a> depuis 2016. <br><br><h2>  Installer et configurer le terminal Windows </h2><br>  Vous pouvez installer Windows Terminal √† partir du <a href="https://www.microsoft.com/en-us/p/windows-terminal-preview/9n0dx20hk701" rel="nofollow">Windows Store</a> , ou en t√©l√©chargeant le binaire √† partir de la section <a href="https://github.com/microsoft/terminal" rel="nofollow">Versions</a> du github du projet, toutes les informations, instructions et FAQ pertinentes sont √©galement pr√©sentes.  Le terminal n√©cessite au moins une version de Windows 1903 et une version <b>18362</b> .  Il est pr√©f√©rable d'installer via le Windows Store, car il est plus facile de mettre √† jour dans ce cas, directement depuis le magasin.  Des mises √† jour sont publi√©es r√©guli√®rement; une <a href="" rel="nofollow">feuille de route de la</a> premi√®re version du terminal a √©t√© mise en place sur le github.  Pour le moment, toutes les fonctionnalit√©s de la version 1 ont d√©j√† √©t√© impl√©ment√©es (selon le plan, pour impl√©menter toutes les am√©liorations d'ici fin 2019), puis quelques mois de travail sur la correction des bugs et en avril 2020 la sortie officielle du Terminal v1.0 est pr√©vue.  C'est bien que MS soit maintenant sur le github, leur logiciel a appris √† afficher les journaux, les erreurs intelligibles et tout probl√®me est facilement googl√©. <br><br><img src="https://habrastorage.org/webt/7_/cq/fq/7_cqfq2i_s0nos7pbtekj6yfsam.png"><br><br>  Il n'y a pas encore beaucoup de param√®tres dans le terminal, mais ils sont suffisants pour un travail confortable, le produit se d√©veloppe activement, il y a sur <a href="https://github.com/microsoft/terminal" rel="nofollow">github</a> o√π les utilisateurs peuvent cr√©er une demande de fonctionnalit√© ou un rapport de bogue.  Les d√©veloppeurs participent √† la discussion des probl√®mes avec les utilisateurs, proposant souvent des solutions de contournement lorsqu'un bogue est d√©couvert. <br><br><img src="https://habrastorage.org/webt/im/7g/wk/im7gwk7y4ow-_wt4heedfu6iovg.png"><br><br>  La configuration est stock√©e au format json, apr√®s avoir √©t√© enregistr√©e, elle est appliqu√©e imm√©diatement.  Ceci est pratique, ne serait-ce que parce que vous pouvez appliquer les bonnes pratiques pour g√©rer la configuration de l'environnement de travail - je stocke toutes les configurations Linux dans le r√©f√©rentiel git, sur Windows j'utilise uniquement VSCode √† partir de l'outil de travail, qui peut synchroniser la configuration via github gist et enregistrer la configuration de l'espace de travail local s√©par√©ment dans des fichiers de points .  Ainsi, Terminal se d√©place dans la m√™me direction, en utilisant les m√™mes touches de raccourci et le format de configuration que VSCode.  Soit dit en passant, l'√©dition d'une configuration est pratique via VSCode, surtout si vous utilisez d√©j√† cet excellent √©diteur de MS.  Le fichier de configuration du terminal contient d√©j√† de nombreux param√®tres par d√©faut, et l'√©diteur appropri√© vous permet de voir toutes les options avec une description des options de <i>cl√©</i> et de <i>valeur</i> du <a href="" rel="nofollow">sch√©ma</a> (ceci est particuli√®rement pratique lorsque le projet n'a pas encore de documentation compl√®te).  De plus, toutes les puces IDE sont disponibles sous forme d'auto-compl√©tion, d'intellisense, de v√©rification de syntaxe, de formatage, etc. <br><br><img src="https://habrastorage.org/webt/3v/sb/6t/3vsb6tsivv0vahxtqjr608db1pw.gif"><br><br>  La documentation pour les d√©veloppeurs est disponible <a href="https://github.com/microsoft/terminal/tree/master/doc" rel="nofollow">ici</a> , mais <a href="" rel="nofollow">voici</a> une petite page de documentation pour les utilisateurs pour l'instant.  Une <a href="" rel="nofollow">page</a> distincte <a href="" rel="nofollow">est</a> consacr√©e aux param√®tres qui sont √©crits dans le fichier de configuration json.  De l√†, vous pouvez d√©couvrir que, structurellement, les param√®tres sont divis√©s en: <br><br><ul><li>  Global (profil par d√©faut, taille initiale de la fen√™tre du terminal, th√®me, etc.) </li><li>  Liaisons de touches </li><li>  Profils (param√®tres sp√©cifiques √† chaque terminal) </li><li>  Sch√©mas (sch√©mas de couleurs) </li></ul><br>  Les profils dynamiques existent, ils apparaissent automatiquement dans la configuration et ont la propri√©t√© <i>source</i> .    WSL  Azure Cloud Shell.          WSL (, Ubuntu),  <a href="http://new-guid.com/" rel="nofollow"> GUID</a>     ,  <i>source</i> ,    <i>commandline</i>  <i>wsl -d {DistroName}</i> . <br><br><h2>  </h2><br>   -  ,          .   : <br><br><ul><li> <a href="https://github.com/tonsky/FiraCode" rel="nofollow">Fira Code</a> </li><li> <a href="https://github.com/source-foundry/Hack" rel="nofollow">Hack</a> </li><li> <a href="https://github.com/powerline/fonts" rel="nofollow"></a> <a href="https://github.com/ryanoasis/nerd-fonts" rel="nofollow"></a>   </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'utilise la police de programmation Fira Code √† la fois dans le terminal et dans l'√©diteur. Il prend en charge la plupart des caract√®res utilis√©s dans la conception des programmes CLI et des interfaces de console, des ligatures, et il n'y a aucun probl√®me avec l'affichage des emojis dans le terminal. </font></font><br><br><img src="https://habrastorage.org/webt/rc/ol/7e/rcol7evvrk6zvv1bznu8v1e--is.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La police est install√©e sur Windows √† l'aide du programme d'installation de polices du syst√®me d'exploitation. Pour ce faire, t√©l√©chargez la derni√®re version de la police que vous aimez dans l'archive des versions de github et installez manuellement la police dans le syst√®me. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez afficher le nom de la police (d√©finition de la police </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fontFace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du terminal </font><font style="vertical-align: inherit;">) pendant l'installation ou ult√©rieurement dans l'application </font><i><font style="vertical-align: inherit;">Table</font></i><font style="vertical-align: inherit;"> des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caract√®res</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Table des </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">symboles</font></i><font style="vertical-align: inherit;"> ). De plus, dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©marrer -&gt; Param√®tres -&gt; Personnalisation -&gt; Polices</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez voir comment la police est rendue dans diff√©rents modes, et en m√™me temps v√©rifier comment les ligatures sont dessin√©es. </font></font><br><br><img src="https://habrastorage.org/webt/vs/qx/te/vsqxtekvqzfwcrrxstgn9wueycy.png"><br><br><h2>  Conclusion </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le r√©sultat a √©t√© un article tr√®s long, en un seul endroit toutes les informations pertinentes sur l'installation, la configuration et l'utilisation de Windows Terminal en conjonction avec WSL sont collect√©es. </font><font style="vertical-align: inherit;">√Ä l'avenir, je veux √©crire des articles sur ZSH et tmux de la m√™me mani√®re, et √©crire mon exp√©rience de d√©ploiement de configurations sur VM et de synchronisation de fichiers dot entre h√¥tes. </font><font style="vertical-align: inherit;">Tout est dans le cadre de l'automatisation du r√©seau domestique, mais il sera utile pour les d√©veloppeurs / d√©veloppeurs / ing√©nieurs syst√®me. </font><font style="vertical-align: inherit;">Un autre sujet non r√©solu a √©t√© le lancement de </font></font><a href="https://docs.docker.com/docker-for-windows/wsl-tech-preview/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker dans WSL 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais je n'ai pas besoin d'ex√©cuter </font><a href="https://docs.docker.com/docker-for-windows/wsl-tech-preview/" rel="nofollow"><font style="vertical-align: inherit;">Docker</font></a><font style="vertical-align: inherit;"> sur un ordinateur personnel, car il existe un serveur d√©di√© pour cela.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'esp√®re que personne n'a regrett√© d'avoir lu l'article et apport√© de nouvelles connaissances. </font><font style="vertical-align: inherit;">Si quelqu'un a quelque chose √† ajouter, partageons nos r√©flexions dans les commentaires. </font><font style="vertical-align: inherit;">Si vous avez des commentaires sur le texte, √©crivez au PM, je veux garder ce guide √† jour.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Les r√©f√©rences </font></font></h2><br><ul><li> <a href="https://devblogs.microsoft.com/commandline/announcing-wsl-2/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Annonce de WSL 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="https://devblogs.microsoft.com/commandline/wsl-2-is-now-available-in-windows-insiders/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WSL 2 est d√©sormais disponible dans Windows Insiders</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="https://devblogs.microsoft.com/commandline/memory-reclaim-in-the-windows-subsystem-for-linux-2/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©cup√©ration de m√©moire dans le sous-syst√®me Windows pour Linux 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="https://devblogs.microsoft.com/commandline/automatically-configuring-wsl/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration automatique de WSL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wsl2-tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (github.com)</font></font></li><li> <a href="" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feuille de route du terminal v1.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (github.com)</font></font></li><li> <a href="" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modification des param√®tres JSON du terminal Windows</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (github.com)</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481746/">https://habr.com/ru/post/fr481746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481734/index.html">Exp√©rience avec les imprimantes √† cartes, partie 1</a></li>
<li><a href="../fr481736/index.html">Sur quoi construire l'infrastructure Wi-Fi 6?</a></li>
<li><a href="../fr481738/index.html">T√¢ches de programmation - Une mauvaise fa√ßon d'√©valuer les qualifications des d√©veloppeurs seniors</a></li>
<li><a href="../fr481740/index.html">La lumi√®re bleue perturbe-t-elle le biorythme humain?</a></li>
<li><a href="../fr481742/index.html">Strat√©gie Apple. Lier l'OS au mat√©riel - avantage ou inconv√©nient concurrentiel?</a></li>
<li><a href="../fr481748/index.html">Avantages sociaux en Arm√©nie: de l'assurance et des primes de r√©f√©rence au massage et aux pr√™ts</a></li>
<li><a href="../fr481750/index.html">Num√©ro de t√¢che 3. Conversion de donn√©es et t√©l√©chargement vers des services tiers</a></li>
<li><a href="../fr481752/index.html">R√©sultats de l'enqu√™te linguistique</a></li>
<li><a href="../fr481754/index.html">Moi bot et mon poin√ßon</a></li>
<li><a href="../fr481756/index.html">Comment organiser les DDoS √† de bonnes fins?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>