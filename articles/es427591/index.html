<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∞üèø üë©‚Äç‚öïÔ∏è üèáüèΩ La arquitectura como carga üë®üèø‚Äçüíº üßò ‚ôìÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Durante mi carrera, trabaj√© con varios proyectos heredados, cada uno de los cuales sufri√≥ varios defectos. 


 Por supuesto, a menudo el problema prin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La arquitectura como carga</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427591/"><p>  Durante mi carrera, trabaj√© con varios proyectos heredados, cada uno de los cuales sufri√≥ varios defectos. </p><br><p>  Por supuesto, a menudo el problema principal era la mala calidad del software (falta de pruebas unitarias, negativa a usar los principios de c√≥digo limpio ...), pero tambi√©n hubo dificultades, cuya fuente fueron las decisiones arquitect√≥nicas tomadas al comienzo del proyecto o incluso durante el inicio del sistema corporativo.  En mi opini√≥n, esta clase de problemas es la causa del mayor dolor para muchos proyectos. </p><br><p>  En esencia, mejorar el c√≥digo es bastante sencillo, especialmente ahora que el movimiento de artesan√≠a de software est√° promoviendo buenas pr√°cticas de equipo.  Sin embargo, cambiar las partes centrales de los sistemas, las restricciones impuestas al comienzo de su ciclo de vida, es una tarea extremadamente dif√≠cil. </p><br><p>  Le contar√© sobre varios tipos de soluciones arquitect√≥nicas que he encontrado, que pueden convertirse en una carga real para los equipos involucrados en el soporte de dichos sistemas. </p><br><a name="habracut"></a><br><h1>  Toda su empresa comparte su base de datos. </h1><br><p>  Este es quiz√°s uno de los problemas m√°s comunes que he visto.  Cuando varias aplicaciones necesitan usar datos compartidos, ¬øpor qu√© no les damos acceso compartido a una base de datos compartida?  Despu√©s de todo, la duplicaci√≥n se considera malvada en el desarrollo de software, ¬øverdad?  Bueno, esto no siempre es cierto, y especialmente cuando se trata de la base de datos.  Venkat Subramaniam lo expres√≥ as√≠: "La base de datos es como un cepillo de dientes: nunca dejes que nadie la use".  ¬øQu√© tiene de malo compartir una base de datos?  De hecho, bastante ... </p><br><p>  Lo primero que viene a la mente es el acoplamiento del modelo de datos.  Imagine que dos aplicaciones, A y B, procesan datos en autom√≥viles.  El ap√©ndice A es utilizado por el equipo responsable de los trabajos de reparaci√≥n y, por lo tanto, necesitan almacenar mucha informaci√≥n t√©cnica: sobre la mec√°nica, las aver√≠as, el historial de intervenciones en el autom√≥vil ... El ap√©ndice B se utiliza para establecer tareas para el equipo t√©cnico, de modo que solo necesita informaci√≥n b√°sica sobre el autom√≥vil, suficiente para su identificaci√≥n  En este caso, usar la misma estructura de datos para ambos programas no tiene sentido: usan datos diferentes, por lo que cada uno debe usar su propia estructura de datos.  Esto se hace m√°s f√°cil porque el autom√≥vil es f√°cil de identificar, por lo que no hay necesidad de una referencia general. </p><br><p>  El segundo problema tambi√©n se debe a esta malla del modelo de datos.  Imagine que la aplicaci√≥n B quiere cambiar el nombre del identificador del autom√≥vil, darle un nombre m√°s l√≥gico en t√©rminos de su √°rea tem√°tica.  En este caso, la aplicaci√≥n A tambi√©n tendr√° que actualizarse: el nombre de la columna ha cambiado ... Como resultado, para no molestar al equipo de la aplicaci√≥n A, los desarrolladores B comenzar√°n a duplicar informaci√≥n en otra columna, ya que no pueden cambiar una columna existente ... Por supuesto, los desarrolladores A dir√°n que planean cambiar el nombre de la columna en el futuro para no almacenar la misma informaci√≥n en dos columnas, pero todos sabemos: lo m√°s probable es que esto nunca se haga ... </p><br><p>  ¬°Todo se vuelve a√∫n m√°s desagradable cuando las aplicaciones no solo leen datos de una fuente, sino que tambi√©n los cambian!  ¬øQui√©n es el propietario de los datos en este caso?  ¬øEn qui√©n confiar?  ¬øC√≥mo se puede garantizar la integridad de los datos?  Esto es dif√≠cil incluso cuando diferentes partes de la misma aplicaci√≥n cambian los mismos datos, pero cuando varias aplicaciones diferentes lo hacen, el problema se vuelve mucho m√°s grave ... </p><br><p>  El √∫ltimo de los casos que he visto: dos aplicaciones que comparten la misma estructura de datos para almacenar informaci√≥n sobre dos objetos comerciales, relativamente similares, pero al mismo tiempo lo suficientemente diferentes como para complicar seriamente la comprensi√≥n de a qu√© aplicaci√≥n se refieren los datos.  Ambas aplicaciones utilizaron la misma tabla para modelar ejecuciones en el mercado financiero, pero con diferentes niveles de agregaci√≥n.  Nada indicaba que la tabla contiene datos de dos tipos, por lo que tuvimos que mirar otra tabla (perteneciente a la segunda aplicaci√≥n) para determinar las filas generadas por cada uno de los programas ... Cada nuevo desarrollador que tuvo que trabajar con esta tabla inevitablemente vino en el mismo rastrillo que todos sus predecesores, y utiliz√≥ datos incorrectos (vulnerables), con todos los riesgos derivados de esto para la empresa. </p><br><h1>  Su sistema est√° vinculado al software utilizado en la empresa. </h1><br><p>  No todas las empresas pueden desarrollar software que satisfaga todas las necesidades de su negocio.  De hecho, en muchos casos esto ser√≠a un invento de la bicicleta, ya que las necesidades de muchas compa√±√≠as son las mismas, y es f√°cil encontrar software en el mercado que ya tenga la funcionalidad necesaria. </p><br><p>  En general, a menudo es m√°s barato comprar un producto que crearlo.  Pero, por supuesto, el producto que acaba de comprar no funciona inmediatamente sin problemas con el software que ya utiliza, por lo que debe crear un puente entre las dos aplicaciones (en la mayor√≠a de los casos, propietarias).  Seguramente desarrollar√° sus propias herramientas para partes espec√≠ficas de su negocio, y siempre que este costoso software que ya haya comprado tenga un modelo adecuado, simplemente tiene que usar su base de datos y agregar sus datos a las tablas de esta base de datos ... </p><br><p>  Pasan varios a√±os, una docena de desarrolladores o equipos realizan estas acciones una y otra vez, y luego se encuentra en un callej√≥n sin salida: simplemente no puede usar otro software si el desarrollador del software que compr√≥ lo cierra, o deja de dar soporte al producto, o alg√∫n software nuevo resulta ser Se adapta mejor a sus necesidades.  En algunos casos, incluso puede tener dependencias t√©cnicas en software externo.  Si el autor de la soluci√≥n de software que est√° utilizando quiere que use la versi√≥n del lenguaje / marco / algo m√°s que necesita, esto significa que la arquitectura de su sistema no le pertenece.  Si desea vender una nueva versi√≥n para proporcionar una funci√≥n que definitivamente necesita, pero esta versi√≥n est√° sujeta a un cambio en los requisitos t√©cnicos, se ver√° obligado a actualizar su paquete de tecnolog√≠a para cumplir con las recomendaciones de otras personas.  S√© c√≥mo se siente, y no querr√≠as que esa migraci√≥n forzada sea algo frecuente ... </p><br><p>  Trabaj√© en un proyecto donde los desarrolladores del producto que utilizamos no quer√≠an agregar nuevas caracter√≠sticas para todos nuestros clientes, porque era demasiado dif√≠cil para ellos mantener cambios competitivos y varias versiones actuales (cada cliente ten√≠a su propia versi√≥n con funciones necesarias solo para √©l).  Entonces decidieron vendernos el SDK para que pudi√©ramos implementar nuestra propia funcionalidad.  Naturalmente, no proporcionaron suficiente documentaci√≥n sobre c√≥mo hacer esto, y, adem√°s, nos vimos obligados a utilizar sus entidades comerciales, que tuvimos que descompilar para comprender su estructura, porque no ten√≠amos ni el c√≥digo fuente ni la documentaci√≥n ... Implementaci√≥n el funcional m√°s simple tom√≥ varios d√≠as, y era casi imposible de probar, ya que todo era demasiado complicado e incluso requer√≠a el conocimiento de un lenguaje de scripting que nadie en el equipo con una pila tecnol√≥gica ya compleja sab√≠a ... </p><br><h1>  Malla fuerte entre m√∫ltiples aplicaciones </h1><br><p>  Recordemos a principios de la d√©cada de 2000: qu√© agradable fue usar Enterprise Java Beans (EJB) para manejar llamadas remotas entre aplicaciones en su sistema de informaci√≥n.  En ese momento, esto podr√≠a haber parecido una buena idea.  Compartir su c√≥digo con otros equipos para evitar la duplicaci√≥n tambi√©n se ve bien.  S√≠, todos los equipos se vieron obligados a implementar sus aplicaciones al mismo tiempo para asegurarse de que las dependencias binarias no se rompieran, pero fue una noche divertida: comer pizza con colegas mientras esperaban que la aplicaci√≥n se entregara durante 2 horas, ¬øverdad? </p><br><p>  Bueno, en realidad no fue tan divertido.  Y la imposibilidad de refactorizar una clase separada en su propio c√≥digo, simplemente porque a otra persona de la compa√±√≠a le gust√≥ su c√≥digo y decidieron usarlo en su aplicaci√≥n no probada, sigue siendo un placer. </p><br><p>  Una vez que se da cuenta de lo confusas que son estas decisiones iniciales, el esfuerzo requerido para separar su aplicaci√≥n del resto del mundo es enorme.  Ver√°, en sentido literal, tomar√° a√±os dividir su proyecto en varios componentes para que otras aplicaciones ya no puedan usar el n√∫cleo de su √°rea tem√°tica, su cliente o el mecanismo de almacenamiento en cach√©;  eliminar todas las llamadas a clases externas que conducen a un fuerte v√≠nculo con otros proyectos;  para reemplazar todas las llamadas EJB con API REST ... Sin embargo, por todos estos esfuerzos, cada empleado asociado con el proyecto ser√° m√°s que recompensado: el desarrollo y las pruebas se simplificar√°n, el proceso de entrega se acelerar√°, ya que ahora ya no es necesario sincronizar su trabajo con otra persona. ;  los conceptos en su propio c√≥digo se separar√°n mejor;  La administraci√≥n de dependencias se simplificar√°, los problemas con las dependencias transitivas desaparecer√°n cuando importe un mont√≥n de dependencias de otras aplicaciones a su classpath ... ¬°Todos estos cambios costosos solo salvar√°n la vida del equipo, y podr√≠an ser mucho m√°s f√°ciles de implementar si los hiciera al comienzo del proyecto! </p><br><h1>  Construyes tu proyecto sobre la base del proyecto de otra persona </h1><br><p>  Probablemente no encuentre este problema, pero a√∫n puede suceder, y si eso sucede, entonces este es el peor de los casos, porque combina varios de los problemas discutidos anteriormente.  En verdad, me encontr√© con uno similar en uno de los primeros proyectos de mi carrera profesional. </p><br><p>  Cuando me un√≠ al proyecto, me dijeron que el sistema corporativo se reescribi√≥ por completo y que el trabajo en el proyecto comenz√≥ hace solo 2 meses.  Imagine mi sorpresa cuando vi una aplicaci√≥n web compleja con un m√≥dulo de administraci√≥n completo, ya implementaba una funcionalidad empresarial compleja y un marco desarrollado para escribir otros m√≥dulos.  Pronto descubr√≠ que la mayor√≠a de todo esto no fue escrito por mi equipo: para no comenzar desde cero, se decidi√≥ reutilizar el marco desarrollado por otra empresa de nuestro grupo.  El problema era que este marco no estaba aislado del proyecto para el que fue desarrollado.  Entonces, nuestro equipo simplemente recibi√≥ un archivo con todo el c√≥digo fuente para el proyecto de otra compa√±√≠a, incluida su l√≥gica de negocios, que no ten√≠a nada que ver con nuestro propio negocio.  Para empeorar las cosas, tambi√©n heredamos de ellos el esquema de la base de datos y los datos en s√≠ ... </p><br><p>  No fue f√°cil para un reci√©n llegado al equipo comprender qu√© c√≥digo se relaciona con el marco, qu√© se refiere a nuestro proyecto y qu√© se refiere al negocio de otra compa√±√≠a.  El equipo quer√≠a aclarar este desastre, pero varios intentos de hacerlo terminaron en serios errores de regresi√≥n debido a dependencias entre las partes del c√≥digo (¬°el lenguaje no se convierte en m√≥dulos, porque solo hab√≠a un m√≥dulo!), Y, por supuesto, no hay pruebas automatizadas all√≠ fue.  Adem√°s, tuvimos que abandonar la idea de usar un servidor de aplicaciones diferente, ya que ten√≠a un c√≥digo espec√≠fico utilizado por otra compa√±√≠a en todo el sistema, y ‚Äã‚Äãesto hizo que la migraci√≥n fuera demasiado costosa para nuestro peque√±o equipo. </p><br><p>  En alg√∫n momento, quer√≠amos agregar algunas caracter√≠sticas agradables al marco, pero nos dijeron que esto ya se hab√≠a hecho en otra compa√±√≠a.  Por lo tanto, se nos pidi√≥ que fusion√°ramos nuestra versi√≥n actual con la versi√≥n actual del c√≥digo de otra compa√±√≠a ... El equipo logr√≥ evitar esta pesadilla simplemente redirigiendo (selecci√≥n de cereza) algunos de los compromisos asociados con la nueva funci√≥n, pero a√∫n era demasiado complicado y sofisticado en comparaci√≥n con eso. lo que necesit√°bamos ... </p><br><p>  Logramos terminar este proyecto, pero su calidad fue una verdadera molestia.  Al menos el 40% del c√≥digo y el contenido de la base de datos eran lastres no utilizados, y eliminar este c√≥digo muerto no era una prioridad.  Espero que el equipo finalmente haya tenido la oportunidad de separar su propio c√≥digo. ¬°No s√©, dej√© el equipo antes de que esto sucediera! </p><br><h1>  Toda la l√≥gica de su negocio se almacena dentro de un sistema de gesti√≥n de reglas. </h1><br><p>  Poner parte de su l√≥gica empresarial en un sistema de gesti√≥n de reglas es una pr√°ctica com√∫n.  Esto, por ejemplo, es √∫til si algunas de sus reglas comerciales necesitan actualizarse con frecuencia, y el proceso de entrega de su aplicaci√≥n monol√≠tica requiere una larga fase de prueba antes de que pueda verificar el candidato de lanzamiento, y esto hace que sea imposible configurar algunos de sus "vol√°tiles" "Reglas.  Aunque prefiero un enfoque en el que todas las reglas del √°rea tem√°tica se encuentren en el c√≥digo fuente, puedo entender que en algunas situaciones un sistema de administraci√≥n de reglas puede ser √∫til. </p><br><p>  Sin embargo, me encontr√© con una aplicaci√≥n donde casi TODA la l√≥gica de negocios estaba en el sistema de gesti√≥n de reglas, ¬°y a veces las reglas se generaban en base a un archivo Excel!  Adem√°s, se supon√≠a que las reglas no deb√≠an cambiarse muy a menudo, ya que el proyecto era, en general, un simple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">paquete ETL</a> .  El proyecto Java en el que se bas√≥ todo esto consisti√≥ solo en detalles t√©cnicos sobre el marco de procesamiento por lotes y la lectura y escritura pura de los sistemas de origen y destino, sin ninguna conexi√≥n con el √°rea tem√°tica. </p><br><p>  Como resultado, todas las reglas fueron escritas en un lenguaje especial que nadie realmente conoc√≠a bien en el equipo, que era dif√≠cil de escribir (nuestros IDEs no lo admit√≠an) y que era pr√°cticamente imposible de depurar y probar.  Cuando se solicit√≥ una nueva regla o un cambio a una existente, la mayor√≠a de los desarrolladores en los equipos simplemente copiaron la regla existente, lo que condujo a archivos completamente id√©nticos, con la excepci√≥n de un cambio espec√≠fico (a menudo, el √∫nico cambio de ese tipo era el campo al que se aplicaba la regla). </p><br><p>  Si esto ya parece un problema, entonces hay algo m√°s: no hab√≠a absolutamente ninguna pista sobre su prop√≥sito en ninguna regla.  Las reglas fueron nombradas como Rule1, Rule2, y as√≠ sucesivamente, ¬°con un total de m√°s de 100!  Y, b√°sicamente, cada regla consist√≠a en verificaciones y asignaci√≥n de valores codificados sin ning√∫n t√©rmino de dominio.  Incluso el nombre del proyecto no aclaraba el prop√≥sito de todo el ETL en su conjunto. </p><br><h1>  Conclusi√≥n </h1><br><p>  Como explic√≥ el t√≠o Bob en su libro "Arquitectura limpia", al pensar en la arquitectura de su proyecto, algunas decisiones deben posponerse hasta que realmente necesitemos tomar una decisi√≥n, sin lo cual no podemos continuar agregando valor a nuestro producto (como elegir una base de datos por ejemplo)  Otras decisiones deben tomarse muy temprano, no espere hasta que las cosas se pongan mal.  Afortunadamente, este tipo de decisiones cr√≠ticas es f√°cil de identificar porque son lo que se puede llamar "arquitectura con alma": cuando piensas en esas ideas, no ves nada bueno en ellas, solo un problema que tarde o temprano volver√° y te persiguen  Desafortunadamente, cuando se trabaja con proyectos heredados, este tipo de carga a menudo est√° enterrada en el c√≥digo, lo que hace que sea muy costoso eliminarlo. </p><br><p>  Pero no debemos tener miedo.  S√≠, limpiar el desorden que se ha acumulado a lo largo de los a√±os e incluso d√©cadas no es una tarea f√°cil, pero como desarrolladores de software profesionales simplemente no podemos permitir que tales problemas contin√∫en pudri√©ndose y matando la motivaci√≥n de los desarrolladores, la confianza de los clientes y nuestra capacidad de beneficiarlos, integrados en nuestro producto. </p><br><p>  Por supuesto, todo tipo de carga arquitect√≥nica que describ√≠ se puede eliminar de varias maneras: no hay una bala de plata para resolver ninguno de estos problemas.  Sin embargo, estoy seguro de que cualquier equipo puede llegar a algo para finalmente deshacerse de esta carga.  ¬°As√≠ que enfrentemos nuestros problemas juntos y comencemos a poner las cosas en orden! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427591/">https://habr.com/ru/post/es427591/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427581/index.html">Prueba de puntos de acceso Zyxel vs Ubiquiti</a></li>
<li><a href="../es427583/index.html">Nos comunicamos con periodistas de relaciones p√∫blicas influyentes: son 10 secretos que aumentar√°n la probabilidad de publicar su art√≠culo</a></li>
<li><a href="../es427585/index.html">La receta para un juego MMO popular y exitoso.</a></li>
<li><a href="../es427587/index.html">Java concentrado para mil quinientas personas. Como fue el Joker 2018</a></li>
<li><a href="../es427589/index.html">Escribimos un chat en l√≠nea en Websockets usando Swoole</a></li>
<li><a href="../es427593/index.html">Magia de comando r√°pido en Vivaldi 2.1</a></li>
<li><a href="../es427595/index.html">Prueba Micronaut o Darling, reduje el marco</a></li>
<li><a href="../es427601/index.html">Caso 5 + 1 donde la especificaci√≥n REST API juega un papel muy importante</a></li>
<li><a href="../es427603/index.html">C√≥mo finalmente comenzar a escribir pruebas y no arrepentirse</a></li>
<li><a href="../es427605/index.html">C√≥mo la plataforma de crowdsourcing de Yandex ayuda a entrenar drones y evaluar la calidad del servicio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>