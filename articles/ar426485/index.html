<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐พโ๐ค ๐ผ๐ป ๐ค ุงุฎุชุจุงุฑ Qt 5 ุงูุซุงูุซ ูุน PVS-Studio โ๏ธ โฒ๏ธ ๐จ๐ผโ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ููุช ูุขุฎุฑ ุ ูุนูุฏ ูุฑูููุง ุงูุชุญูู ูู ุงููุดุงุฑูุน ุงูุชู ูุชุจูุง ุนููุง ุจุงููุนู ููุงูุงุช. ูุดุฑูุน ุขุฎุฑ ุชู ุฅุนุงุฏุฉ ูุญุตู ูุงู Qt. ุขุฎุฑ ูุฑุฉ ุงุฎุชุจุฑูุงูุง ูุน PVS-Studio ูู ุนุงู 201...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงุฎุชุจุงุฑ Qt 5 ุงูุซุงูุซ ูุน PVS-Studio</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/426485/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dd9/87d/907/dd987d90784865f850555bc198a97b81.png" alt="PVS-Studio &amp; Qt"></div><br>  ูู ููุช ูุขุฎุฑ ุ ูุนูุฏ ูุฑูููุง ุงูุชุญูู ูู ุงููุดุงุฑูุน ุงูุชู ูุชุจูุง ุนููุง ุจุงููุนู ููุงูุงุช.  ูุดุฑูุน ุขุฎุฑ ุชู ุฅุนุงุฏุฉ ูุญุตู ูุงู Qt.  ุขุฎุฑ ูุฑุฉ ุงุฎุชุจุฑูุงูุง ูุน PVS-Studio ูู ุนุงู 2014.  ููุฐ ุนุงู 2014 ุ ุจุฏุฃ ูุญุต ุงููุดุฑูุน ุจุงูุชุธุงู ุจูุณุงุนุฏุฉ Coverity.  ูุฐุง ูุซูุฑ ููุงูุชูุงู.  ุฏุนููุง ูุฑู ูุง ุฅุฐุง ูุงู ุจุฅููุงููุง ุงูุขู ุงูุนุซูุฑ ุนูู ุฃู ุฃุฎุทุงุก ูุซูุฑุฉ ููุงูุชูุงู ุจุงุณุชุฎุฏุงู PVS-Studio. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ููู ุชู </h2><br>  ุงูููุงูุงุช ุงูุณุงุจูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุฉ ุชูููู ุงุญุชูุงููุฉ ุงูุฃุฎุทุงุก ูู ูุฑุญูุฉ ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ</a> " ููููู 2011. </li><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Qt 5 framework check</a> " ุ ุฃุจุฑูู 2014. </li></ul><br>  ูุฐู ุงููุฑุฉ <a href="">ุชู ุงุฎุชุจุงุฑ</a> <a href="">Qt Base</a> (Core ุ Gui ุ Widgets ุ Network ุ ...) ู <a href="">Qt5 super module</a> .  ุญูู Qt Creator ุ ูุฎุทุท ููุชุงุจุฉ ููุงู ูููุตู ูุงุญููุง.  ููุชุญูู ุ ุงุณุชุฎุฏููุง ูุญูู ุซุงุจุช PVS-Studio ุ ููู ุฅุตุฏุงุฑ ุชุฌุฑูุจู ููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุฒููู</a> ูู ุงููููุน. <br><br>  ูู ุฑุฃูู ุงูุดุฎุตู ุ ุฃุตุจุญ ููุฏ Qt ุฃูุถู.  ุนูู ูุฑ ุงูุณููู ููุฐ ุงูุงุฎุชุจุงุฑ ุงูุฃุฎูุฑ ุ ุธูุฑุช ุงูุนุฏูุฏ ูู ุงูุชุดุฎูุตุงุช ุงูุฌุฏูุฏุฉ ูู ูุญูู PVS-Studio.  ุนูู ุงูุฑุบู ูู ุฐูู ุ ุฎูุงู ุฏุฑุงุณุฉ ูุฑุงุฌุนุฉ ุงูุชุญุฐูุฑุงุช ุ ูู ุฃุฌุฏ ุงููุซูุฑ ูู ุงูุฃุฎุทุงุก ููุดุฑูุน ุจูุฐุง ุงูุญุฌู.  ุฃูุฑุฑ ูุฑุฉ ุฃุฎุฑู ุฃู ูุฐุง ูู ุงูุทุจุงุนู ุงููุฑุฏู.  ูู ุฃูู ุจุฃู ุจุญุซ ุฎุงุต ุญูู ูุซุงูุฉ ุงูุฃุฎุทุงุก ุณูุงุก ูู ุฐูู ุงูููุช ุฃู ุงูุขู. <br><br>  ุนูู ุงูุฃุฑุฌุญ ุ ุฃุซุฑุช ุงููุญูุตุงุช ุงูููุชุธูุฉ ุจุงุณุชุฎุฏุงู ูุญูู ุงูุบูุงู ุงูุซุงุจุช ุนูู ุฌูุฏุฉ ุงูุดูุฑุฉ ุนูู ุงูุฃุฑุฌุญ.  ูู ุนุงู 2014 ุ ุจูุณุงุนุฏุฉ Coverity ุ ุจุฏุฃ ูุญุต ูุดุฑูุน Qt (ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">qt</a> ) ุ ููู ุนุงู 2016 ุ ุชู ุฅูุดุงุก Qt Creator ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">qt-creator</a> ).  ุฑุฃูู: ุฅุฐุง ููุช ุชููู ุจุชุทููุฑ ูุดุฑูุน ููุชูุญ ุ ูุฅู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Coverity Scan</a> ูููู ุฃู ูููู ุญูุงู ูุฌุงูููุง ุฌูุฏูุง ุณูุญุณู ุจุดูู ูุจูุฑ ุฌูุฏุฉ ูููุซูููุฉ ูุดุงุฑูุนู. <br><br>  ููุน ุฐูู ุ ููุง ูููู ูููุงุฑุฆ ุฃู ูุฎูู ุ ุฅุฐุง ูู ุฃูู ูุฏ ูุงุญุธุช ุฃู ุดูุก ูุซูุฑ ููุงูุชูุงู ูู ุชูุฑูุฑ PVS-Studio ุ ููู ุชููู ููุงู ููุงูุฉ :).  ูุจูุง ุฃู ููุงู ููุงู ุ ุฃู ุนููุจ.  ุฏุนููุง ูููู ูุธุฑุฉ ุนูููู.  ูู ุงููุฌููุน ุ ูุชุจุช 96 ุฎุทุฃ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุณุฎ ููุตู ุฃุฎุทุงุก ูุงุดูุฉ </h2><br>  ููุจุฏุฃ ุจููุงุณูููุงุช ูุฐุง ุงูููุน ุ ุนูุฏูุง ูููู ุณุจุจ ุงูุฎุทุฃ ูู ุนุฏู ุงูุงูุชุจุงู.  ูุชู ุชูุฏูุฑ ูุฐู ุงูุฃุฎุทุงุก ูู ูุจู ุงููุจุฑูุฌูู.  ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูู ููุฑุคูุง ุจุนุฏ ุ ุฃูุตู ุจุฅููุงุก ูุธุฑุฉ ุนูู ูุงุชูู ุงููุงุฏุชูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฃุซูุฑ ุงูุฎุท ุงูุฃุฎูุฑ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุนูุด ุงูุดุฑ ูู ูุธุงุฆู ุงูููุงุฑูุฉ</a> </li></ul><br>  ูุฐู ุงูุฃุฎุทุงุก ูู ูุบุฉ ูุชุฏุงุฎูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชูุฏู ุงูููุงูุฉ ุงูุซุงููุฉ ุงููุซูุฑ ูู ุงูุฃูุซูุฉ ุนูู ุงูุฃุฎุทุงุก ูู ูุธุงุฆู ุงูููุงุฑูุฉ ุงูููุชูุจุฉ ูู C ู C ++ ู C #.  ุงูุขู ุ ุนูุฏ ุชูููุฐ ุฏุนู ูุบุฉ ุฌุงูุง ูู PVS-Studio ุ ููุงุฌู ููุณ ุฃููุงุท ุงูุฎุทุฃ.  ููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุฌุฏ ุฎุทุฃ ูุฌุฏูุงู ูุคุฎุฑูุง ูู ููุชุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Hibernate</a> : <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object other)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (other instanceof Id) { Id that = (Id) other; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> purchaseSequence.equals(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.purchaseSequence) &amp;&amp; that.purchaseNumber == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.purchaseNumber; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br>  ุฅุฐุง ูุธุฑุช ุนู ูุซุจ ุ ุงุชุถุญ ุฃู ุญูู PurchaseSequence ูุชู ููุงุฑูุชู ุจููุณู.  ุงูุฎูุงุฑ ุงูุตุญูุญ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> that.purchaseSequence.equals(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.purchaseSequence) &amp;&amp; that.purchaseNumber == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.purchaseNumber;</code> </pre> <br>  ุจุดูู ุนุงู ุ ูู ุดูุก ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ูุณูุชุนูู ุนูู ูุญูู PVS-Studio "ุฅุดุนุงู ุงุณุทุจูุงุช Augean" ูู ูุดุงุฑูุน Java.  ุจุงูููุงุณุจุฉ ุ ูุฏุนู ุงูุฌููุน ูููุดุงุฑูุฉ ูู ุงุฎุชุจุงุฑ ุงูุฅุตุฏุงุฑ ุงูุชุฌุฑูุจู ูู PVS-Studio for Java ุ ูุงูุฐู ูู ุงูููุฑุฑ ุฃู ูุธูุฑ ูู ุงููุณุชูุจู ุงููุฑูุจ.  ููููุงู ุจุฐูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุจ ุฅูููุง</a> (ุญุฏุฏ "ุฃุฑูุฏ ูุญูู ูู Java"). <br><br>  ูุนูุฏ ุงูุขู ุฅูู ุงูุฃุฎุทุงุก ูู ูุดุฑูุน Qt. <br><br>  <b>ุนูุจ N1</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">windowDpiAwareness</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HWND hwnd)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> QWindowsContext::user32dll.getWindowDpiAwarenessContext &amp;&amp; QWindowsContext::user32dll.getWindowDpiAwarenessContext ? QWindowsContext::user32dll.getAwarenessFromDpiAwarenessContext( QWindowsContext::user32dll.getWindowDpiAwarenessContext(hwnd)) : <span class="hljs-number"><span class="hljs-number">-1</span></span>; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V501 CWE-571 ููุงู ุชุนุจูุฑุงุช ูุฑุนูุฉ ูุชุทุงุจูุฉ "QWindowsContext :: user32dll.getWindowDpiAwarenessContext" ุฅูู ุงููุณุงุฑ ูุฅูู ูููู ุนุงูู ุงูุชุดุบูู "&amp;&amp;".  qwindowscontext.cpp 150 <br><br>  ุฃู ุชูุณูุฑ ุฎุงุต ุฅูู ุฌุงูุจ ุฑุณุงูุฉ ุงููุญูู ุบูุฑ ูุทููุจ ููุง.  ูุจุฏู ูู ุฃู ุงูุชุนุจูุฑ ูุงู ูุฌุจ ุฃู ูููู ููุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> QWindowsContext::user32dll.getAwarenessFromDpiAwarenessContext &amp;&amp; QWindowsContext::user32dll.getWindowDpiAwarenessContext ? QWindowsContext::user32dll.getAwarenessFromDpiAwarenessContext( QWindowsContext::user32dll.getWindowDpiAwarenessContext(hwnd)) : <span class="hljs-number"><span class="hljs-number">-1</span></span>;</code> </pre> <br>  <b>ุนูุจ N2 ุ N3</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> QReadWriteLockPrivate::release() { Q_ASSERT(!recursive); Q_ASSERT(!waitingReaders &amp;&amp; !waitingReaders &amp;&amp; !readerCount &amp;&amp; !writerCount); freelist-&gt;release(id); }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V501 CWE-571 ููุงู ุชุนุจูุฑุงุช ูุฑุนูุฉ ูุชุทุงุจูุฉ ุฅูู ุงููุณุงุฑ ูุฅูู ูููู ุนุงูู ุงูุชุดุบูู "&amp;&amp;":! WaitingReaders &amp;&amp;! WaitingReaders qreadwritelock.cpp 632 <br><br>  ูุงู ุงูุฎุทุฃ ุฏุงุฎู <i>ุญุงูุฉ</i> ุงููุงูุฑู <i>Q_ASSERT</i> ุ ูุฐูู ููุณ ูุจูุฑุง.  ููู ูุน ุฐูู ุ ูุฐุง ุฎุทุฃ.  ุชู <i>ุงูุชุญูู ูู</i> ูุชุบูุฑ <i>waitReaders</i> ูุฑุชูู.  ููุจุฏู ุฃููู ูุณูุง ุงูุชุญูู ูู ุจุนุถ ุงููุชุบูุฑุงุช ุงูุฃุฎุฑู. <br><br>  ุชู ุงูุนุซูุฑ ุนูู ุฎุทุฃ ูุชุทุงุจู ูู ุณุทุฑ 625 ูู ููู qreadwritelock.cpp.  ุชุญูุง ุงููุณุฎ ูุงููุตู!  :) <br><br>  <b>ุนูุจ N4</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">QString QGraphicsSceneBspTree::debug(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node-&gt;type == Node::Horizontal) { tmp += debug(firstChildIndex(index)); tmp += debug(firstChildIndex(index) + <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { tmp += debug(firstChildIndex(index)); tmp += debug(firstChildIndex(index) + <span class="hljs-number"><span class="hljs-number">1</span></span>); } .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V523 CWE-691 ุนุจุงุฑุฉ "ุซู" ุชุนุงุฏู ุนุจุงุฑุฉ "ุขุฎุฑ".  qgraphicsscene_bsp.cpp 179 <br><br>  ุนูู ุงูุฃุฑุฌุญ ุ ุชู ูุณุฎ ูุชูุฉ ุงููุต ุ ููููู ูุณูุง ุชุตุญูุญูุง. <br><br>  <b>ุนูุจ N5</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> FillRule { OddEvenFill, WindingFill }; QDataStream &amp;<span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&gt;&gt;(QDataStream &amp;s, QPainterPath &amp;p) { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fillRule; s &gt;&gt; fillRule; Q_ASSERT(fillRule == Qt::OddEvenFill || Qt::WindingFill); .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V768 CWE-571 ูุชู ุงุณุชุฎุฏุงู ุซุงุจุช ุงูุชุนุฏุงุฏ "WindingFill" ููุชุบูุฑ ูู ููุน ููุทูู.  2479 <br><br>  ุฃูุงูู ุ ูุฐู ุบูุทุฉ ุฌูููุฉ!  ูุง <i>ูุชุญูู Q_ASSERT ูู</i> ุฃู ุดูุก ุ ูุฃู ุงูุดุฑุท ุฏุงุฆููุง ุตุญูุญ.  ุงูุดุฑุท ุตุญูุญ ูุฃู ุงูุซุงุจุช <i>Qt :: WindingFill</i> ูู 1. <br><br>  <b>ุนูุจ N6</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> QVariant::canConvert(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> targetTypeId) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentType == QMetaType::SChar || currentType == QMetaType::Char) currentType = QMetaType::UInt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (targetTypeId == QMetaType::SChar || currentType == QMetaType::Char) targetTypeId = QMetaType::UInt; .... }</code> </pre> <br>  ูุจู ูุฑุงุกุฉ ุงูุชุญุฐูุฑ ุ ุญุงูู ุงูุชุดุงู ุฎุทุฃ ูุทุจุนู ุจููุณู.  ุจุฅุถุงูุฉ ุตูุฑุฉ ุ ุณุฃุณุงุนุฏู ุนูู ุนุฏู ูุฑุงุกุฉ ุฑุณุงูุฉ ุงููุญูู ุนูู ุงูููุฑ :). <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/86f/f1d/7c5/86ff1d7c55cdc0fb71cbce45f2f84f05.png" alt="ุญุงู ููุช ุงูุชูููุฑ"></div><br><br>  ุชุญุฐูุฑ PVS-Studio: V560 CWE-570 ุฏุงุฆููุง ูุง ูููู ุฌุฒุก ูู ุงูุชุนุจูุฑ ุงูุดุฑุทู ุฎุทุฃ: currentType == QMetaType :: Char.  qvariant.cpp 3529 <br><br>  ุงูุญุงูุฉ "currentType == QMetaType :: Char" ูุญุฏุฏุฉ ูู ุงูุญุงูุฉ ุงูุฃููู.  ุฅุฐุง ุชู ุงุณุชููุงุก ุงูุดุฑุท ุ <i>ูุชู</i> ุชุนููู ูููุฉ <i>QMetaType :: UInt ูููุชุบูุฑ ุงูุญุงูู</i> .  ูุฐูู ุ ุนูุงูุฉ ุนูู ุฐูู ุ ูุง ูููู ุฃู ูููู ุงููุชุบูุฑ <i>currentType</i> ูุณุงููุงู ูู <i>QMetaType :: Char</i> .  ูุฐูู ุ ูุดูุฑ ุงููุญูู ุฅูู ุฃูู ูู ุงูุญุงูุฉ ุงูุซุงููุฉ <i>ุ ูููู</i> ุงูุชุนุจูุฑ ุงููุฑุนู "currentType == QMetaType :: Char" ุฏุงุฆููุง ุฎุงุทุฆูุง. <br><br>  ูู ุงููุงูุน ุ ูุฌุจ ุฃู ูููู ุงูุซุงูู <i>ุฅุฐุง ูุงู</i> ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (targetTypeId == QMetaType::SChar || targetTypeId == QMetaType::Char) targetTypeId = QMetaType::UInt;</code> </pre> <br><br>  <b>ููุงุญุธุฉ ุชุดุฎูุตูุฉ V560</b> <br><br>  ูุฌุฏ ุงูุชูุฑูุฑ ุงูุนุฏูุฏ ูู ุชุญุฐูุฑุงุช V560.  ููุน ุฐูู ุ ูู ุฃุนุฏ ุฃูุธุฑ ุฅูููู ุจูุฌุฑุฏ ุฃู ูุฌุฏุช ุญุงูุฉ ูุซูุฑุฉ ููุงูุชูุงู ููููุงู ุ ูุงูุชู ุงุนุชุจุฑุช ุฃุนูุงู ุนูู ุฃููุง ุนูุจ N6. <br><br>  ูุง ูููู ุชุณููุฉ ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ุงูุฑุณุงุฆู V560 ุจุฃููุง ุฎุงุทุฆุฉ ุ ูููู ูุง ูุงุฆุฏุฉ ูููุง.  ูุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ูุฅู ูุตููุง ูู ููุงู ููุณุช ูุซูุฑุฉ ููุงูุชูุงู.  ูุชูุถูุญ ูุง ุฃุนููู ุจุงูุถุจุท ุ ุถุน ูู ุงุนุชุจุงุฑู ุฅุญุฏู ูุฐู ุงูุญุงูุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">QString QTextHtmlExporter::findUrlForImage(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QTextDocument *doc, ....) { QString url; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!doc) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> url; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (QTextDocument *parent = qobject_cast&lt;QTextDocument *&gt;(doc-&gt;parent())) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> findUrlForImage(parent, cacheKey, isPixmap); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doc &amp;&amp; doc-&gt;docHandle()) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... }</span></span></code> </pre> <br>  ุชุญุฐูุฑ PVS-Stuidio: V560 CWE-571 ุฏุงุฆููุง ูุง ูููู ุฌุฒุก ูู ุงูุชุนุจูุฑ ุงูุดุฑุทู ุตุญูุญูุง: doc.  qtextdocument.cpp 2992 <br><br>  ุงููุญูู ุตุญูุญ ุชูุงููุง ุฃู ูุคุดุฑ <i>doc</i> ููุณ ุฏุงุฆููุง <i>nullptr</i> ุนูุฏ ุฅุนุงุฏุฉ ูุญุตู.  ููู ูุฐุง ููุณ ุฎุทุฃ ุ ูุงู ุงููุจุฑูุฌ ููุท ุขูููุง.  ููููู ุชุจุณูุท ุงูุฑูุฒ ุนู ุทุฑูู ูุชุงุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doc-&gt;docHandle()) {</code> </pre> <br>  <b>ุนูุจ N7</b> <br><br>  ูุงูุญุงูุฉ ุงูุฃุฎูุฑุฉ ุงูุชู ูููู ุชุตููููุง ุนูู ุฃููุง ุฎุทุฃ ูุทุจุนู.  ูุญุฏุซ ุงูุฎุทุฃ ุจุณุจุจ ุงูุงุฑุชุจุงู ูู ุฃุณูุงุก ุงูุซูุงุจุช ุ ูุงูุชู ุชุฎุชูู ููุท ูู ุญุงูุฉ ุงูุญุฑู ุงูุฃูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QWindowsCursor</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QPlatformCursor { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> CursorState { CursorShowing, CursorHidden, CursorSuppressed }; .... } QWindowsCursor::CursorState QWindowsCursor::cursorState() { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> { cursorShowing = <span class="hljs-number"><span class="hljs-number">0x1</span></span>, cursorSuppressed = <span class="hljs-number"><span class="hljs-number">0x2</span></span> }; CURSORINFO cursorInfo; cursorInfo.cbSize = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(CURSORINFO); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GetCursorInfo(&amp;cursorInfo)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cursorInfo.flags &amp; CursorShowing) .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V616 CWE-480 ูุชู ุงุณุชุฎุฏุงู ุซุงุจุช "CursorShowing" ุงููุณูู ุจูููุฉ 0 ูู ุนูููุฉ ุฃุญุงุฏู ุงูุจุชุงุช.  669 <br><br>  ุจูุฒูุฏ ูู ุงูุชูุตูู ุ ููุช ุจุงููุนู ุจุชุญููู ูุฐุง ุงูุฎุทุฃ ูู ููุงุญุธุฉ ุตุบูุฑุฉ ูููุตูุฉ: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑุฉ ุฃุฎุฑู ุ ุชุจูู ุฃู ูุญูู PVS-Studio ุฃุตุจุญ ุฃูุซุฑ ุงูุชุจุงูุงู</a> ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุดุฎุต</a> ." <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุนููุจ ุงูุฃูููุฉ </h2><br>  ูู ุงููุงูุน ุ ูููู ุฃู ุชุณูู ุฌููุน ุงูุฃุฎุทุงุก ุงูุชู ุชูุช ููุงูุดุชูุง ูู ูุฐู ุงูููุงูุฉ ุนููุจ ุงูุฃูุงู.  ูุชู ุชุตููููู ุฌููุนูุง ููููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุนุฏุงุฏ ุงูุถุนู ุงูุนุงู</a> (ุงูุธุฑ ูุนุฑู CWE ูู ุฑุณุงุฆู ุงููุญูู).  ุฅุฐุง ุชู ุชุตููู ุงูุฃุฎุทุงุก ุนูู ุฃููุง CWEs ุ ููู ุงููุญุชูู ุฃู ุชููู ุฎุทุฑูุง ุฃููููุง.  ูุชู ุดุฑุญ ุฐูู ุจูุฒูุฏ ูู ุงูุชูุตูู ูู ุตูุญุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PVS-Studio SAST</a> . <br><br>  ููุน ุฐูู ุ ุฃูุฏ ุฃู ุฃูุฑุฏ ุนุฏุฏูุง ูู ุงูุฃุฎุทุงุก ูู ูุฌููุนุฉ ูููุตูุฉ.  ุฏุนููุง ูููู ูุธุฑุฉ ุนูููุง. <br><br>  <b>ุนูุจ N8 ุ N9</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> QLocalServerPrivate::addListener() { .... SetSecurityDescriptorOwner(pSD.data(), pTokenUser-&gt;User.Sid, FALSE); SetSecurityDescriptorGroup(pSD.data(), pTokenGroup-&gt;PrimaryGroup, FALSE); .... }</code> </pre> <br>  ุชุญุฐูุฑุงุช PVS-Studio: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V530 CWE-252 ุงููููุฉ ุงููุฑุฌุนุฉ ููุฏุงูุฉ 'SetSecurityDescriptorOwner' ูุทููุจุฉ ูุงุณุชุฎุฏุงููุง.  qlocalserver_win.cpp 167 </li><li style=";text-align:right;direction:rtl">  V530 CWE-252 ุงููููุฉ ุงููุฑุฌุนุฉ ููุฏุงูุฉ 'SetSecurityDescriptorGroup' ูุทููุจุฉ ูุงุณุชุฎุฏุงููุง.  qlocalserver_win.cpp 168 </li></ul><br>  ููุงู ุงูุนุฏูุฏ ูู ุงููุธุงุฆู ุงููุชุนููุฉ ุจุงูุชุญูู ูู ุงููุตูู.  <i>ุงูุฏุงูุชุงู SetSecurityDescriptorOwner</i> ู <i>SetSecurityDescriptorGroup</i> ูู ุจูููุง. <br><br>  ูุน ูุฐู ุงููุธุงุฆู ุชุญุชุงุฌ ุฅูู ุงูุนูู ุจุนูุงูุฉ ูุงุฆูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุจ ุนููู ุงูุชุญูู ูู ุงูุญุงูุฉ ุงูุชู ูุนูุฏูู ุฅูููุง.  ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูุดู ุงูุงุณุชุฏุนุงุก ููุฐู ุงููุธุงุฆูุ  ุงูุชุฎููู ููุณ ุถุฑูุฑููุง ุ ูู ุงูุถุฑูุฑู ูุชุงุจุฉ ุฑูุฒ ููุชุนุงูู ูุน ูุซู ูุฐู ุงูุญุงูุฉ. <br><br>  ููุณ ูู ุงูุถุฑูุฑู ุงูุงุณุชูุงุฏุฉ ูู ุนุฏู ุงูุชุญูู ูุชุญููู ูุฐู ุงูุฃุฎุทุงุก ุฅูู ููุงุท ุถุนู.  ููุน ุฐูู ุ ูุฐุง ููุณ ุจุฃู ุญุงู ููุงููุง ูููุฎุงุทุฑุฉ ุ ูุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ุฑูุฒ ุฃูุซุฑ ุฃูุงููุง. <br><br>  <b>ุนูุจ N10</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> QLocalServerPrivate::addListener() { .... InitializeAcl(acl, aclSize, ACL_REVISION_DS); .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V530 CWE-252 ูุฌุจ ุงุณุชุฎุฏุงู ุงููููุฉ ุงููุฑุฌุนุฉ ููุฏุงูุฉ 'InitializeAcl'.  qlocalserver_win.cpp 144 <br><br>  ุงููุถุน ูุดุงุจู ูุฐูู ุงูุฐู ูููุด ุฃุนูุงู. <br><br>  <b>ุนูุจ N11 ุ N12</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sha1ProcessChunk</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... quint8 chunkBuffer[<span class="hljs-number"><span class="hljs-number">64</span></span>]; .... <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> SHA1_WIPE_VARIABLES .... memset(chunkBuffer, 0, 64); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> }</span></span></code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V597 CWE-14 ูููู ูููุชุฑุฌู ุญุฐู ุงุณุชุฏุนุงุก ูุธููุฉ "memset" ุ ูุงูุฐู ูุชู ุงุณุชุฎุฏุงูู ููุณุญ ุงููุฎุฒู ุงููุคูุช "chunkBuffer".  ูุฌุจ ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ RtlSecureZeroMemory () ููุณุญ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ.  sha1.cpp 189 <br><br>  ุณูููู ุงููุญูู ุงูุจุฑูุฌู ุจุฅุฒุงูุฉ ุงุณุชุฏุนุงุก ูุธููุฉ <i>memset</i> .  ุจุงููุนู ุนุฏุฉ ูุฑุงุช ูู ุงูููุงูุงุช ููุช ุจุชุญููู ูุฐุง ุงููุถุน.  ูุง ุฃุดุนุฑ ุจุฑุบุจุฉ ูู ุชูุฑุงุฑ ููุณู.  ุฃุดูุฑ ุฅูู ุงูููุงูุฉ " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชูุธูู ุงูุขูู ููุจูุงูุงุช ุงูุฎุงุตุฉ</a> ". <br><br>  ูุฎุทุฃ ุขุฎุฑ ูู ููุณ ุงูููู sha1.cpp ุ ูู ุงูุณุทุฑ 247. <br><br><h2 style=";text-align:right;direction:rtl">  ูุคุดุฑุงุช ูุงุฑุบุฉ </h2><br>  ุญุงู ุงูููุช ููุญุฏูุซ ุนู ุงููุคุดุฑุงุช.  ูุงู ููุงู ุงููุซูุฑ ูู ุงูุฃุฎุทุงุก ุญูู ูุฐุง ุงูููุถูุน. <br><br>  <b>ุนูุจ N13</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">QByteArray &amp;QByteArray::append(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *str, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> len) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (len &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) len = qstrlen(str); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str &amp;&amp; len) { .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ 'str' ูุจู ุงูุชุญูู ูู ุตูุงุญูุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 2118 ุ 2119. qbytearray.cpp 2118 <br><br>  ุงููุถุน ุงูููุงุณููู ูู ุนูุฏูุง ูุชู ุงุณุชุฎุฏุงู ุงููุคุดุฑ ูู ุงูุจุฏุงูุฉ ุซู ูุชู ุงูุชุญูู ูู ุงููุณุงูุงุฉ ูู <i>nullptr</i> .  ูุฐุง ููุท ุฎุทุฃ ุดุงุฆุน ุฌุฏูุง ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฑุงู</a> ุจุดูู ููุชุธู ูู ุฌููุน ุงููุดุงุฑูุน ุชูุฑูุจูุง. <br><br>  <b>ุนูุจ N14 ุ N15</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> QMetaObjectPrivate *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">priv</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> uint* data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">reinterpret_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QMetaObjectPrivate*&gt;(data); } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> QMetaEnum::isFlag() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> offset = priv(mobj-&gt;d.data)-&gt;revision &gt;= <span class="hljs-number"><span class="hljs-number">8</span></span> ? <span class="hljs-number"><span class="hljs-number">2</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mobj &amp;&amp; mobj-&gt;d.data[handle + offset] &amp; EnumIsFlag; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "mobj" ูุจู ุงูุชุญูู ูู ุตุญุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 2671 ุ 2672. qmetaobject.cpp 2671 <br><br>  ููุท ูู ุญุงูุฉ ุ ุฃุญุถุฑ ุฌุณู ุงููุธููุฉ ุงูุฎุงุตุฉ.  ูุณุจุจ ูุง ุ ูุจุฏุฃ ุงููุฑุงุก ุฃุญูุงููุง ูู ุงูุชูุตู ุฅูู ููุงูู ุชุนูู ูููุง ุงูุดูุฑุฉ.  ูุง ุฃููู ูู ุฃูู ูุฃุชู ูุฐุง ุงูุงุฑุชูุงุจ ูุงูุฑุบุจุฉ ูู ุฑุคูุฉ ููุฒุฉ ุตุนุจุฉ ูู ุงูุฎุทุฃ :).  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ููุชุฑุญ ุดุฎุต ูุง ูู ุงูุชุนูููุงุช ุฃู <i>priv</i> ูู ูุงูุฑู ูู ุงููููุฐุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> priv(A) foo(sizeof(A))</span></span></code> </pre> <br>  ุซู ุณูุนูู ูู ุดูุก. <br><br>  ูู ุฃุฌู ุชุฌูุจ ูุซู ูุฐู ุงูููุงูุดุงุช ุ ุฃุญุงูู ุฃู ุฃุฐูุฑ ุฃุฌุฒุงุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุญูุซ ูุชู ุชูููุฑ ุฌููุน ุงููุนูููุงุช ุงูุชู ุชุคูุฏ ูุฌูุฏ ุฎุทุฃ. <br><br>  ูุฐูู ุ ูุชู <i>ุฅูุบุงุก</i> ุงูุฅุดุงุฑุฉ ุฅูู ูุคุดุฑ <i>modj</i> ุซู ุงูุชุญูู ููู. <br><br>  ูุฒูุฏ ูู ุงููุดูุฏ ูุฃุชู ูุน ุงููุณุฎ "ุงูุฌุจุงุฑ ูุงูุฑููุจ" ูุณุฎ ููุตู.  ุจุณุจุจ ูุง ุชู ุงููุดู ุนู ููุณ ุงูุฎุทุฃ ุจุงูุถุจุท ูู ุงูุฏุงูุฉ <i>isScoped</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> QMetaEnum::isScoped() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> offset = priv(mobj-&gt;d.data)-&gt;revision &gt;= <span class="hljs-number"><span class="hljs-number">8</span></span> ? <span class="hljs-number"><span class="hljs-number">2</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mobj &amp;&amp; mobj-&gt;d.data[handle + offset] &amp; EnumIsScoped; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "mobj" ูุจู ุงูุชุญูู ูู ุตุญุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 2683 ุ 2684. qmetaobject.cpp 2683 <br><br>  <b>ุนูุจ N16-N21</b> <br><br>  ููุฃุฎุฐ ูุซุงูุงู ุขุฎุฑ ุ ูุฃุนุชูุฏ ุฃูู ูููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> QTextCursor::insertFragment(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QTextDocumentFragment &amp;fragment) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!d || !d-&gt;priv || fragment.isEmpty()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; d-&gt;priv-&gt;beginEditBlock(); d-&gt;remove(); fragment.d-&gt;insert(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); d-&gt;priv-&gt;endEditBlock(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fragment.d &amp;&amp; fragment.d-&gt;doc) d-&gt;priv-&gt;mergeCachedResources(fragment.d-&gt;doc-&gt;docHandle()); }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "fragment.d" ูุจู ุงูุชุญูู ูู ุตุญุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 2238 ุ 2241. qtextcursor.cpp 2238 <br><br>  ูู ููุณ.  ุงูุชุจู ุฅูู ุชุณูุณู ุงูุนูู ูุน ุงููุคุดุฑ ุงููุฎุฒู ูู ุงูุฌุฒุก ุงููุชุบูุฑ. <br><br>  ุฃุฎุทุงุก ุฃุฎุฑู ูู ูุฐุง ุงูููุน: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "ุงููุงูุฐุฉ" ูุจู ุงูุชุญูู ูู ุตูุงุญูุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 1846 ุ 1848. qapplication.cpp 1846 </li><li style=";text-align:right;direction:rtl">  V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "ุงููุงูุฐุฉ" ูุจู ุงูุชุญูู ูู ุตูุงุญูุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 1858 ุ 1860. qapplication.cpp 1858 </li><li style=";text-align:right;direction:rtl">  V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "ุงูุฑุฏ" ูุจู ุฃู ูุชู ุงูุชุญูู ููู ููุงุจู nullptr.  ุฎุทูุท ุงูุชุญูู: 492 ุ 502. qhttpnetworkconnectionchannel.cpp 492 </li><li style=";text-align:right;direction:rtl">  V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "newHandle" ูุจู ุงูุชุญูู ูู ุตูุงุญูุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 877 ุ 883. qsplitter.cpp 877 </li><li style=";text-align:right;direction:rtl">  V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "ุนูุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู" ูุจู ุงูุชุญูู ูู ุตูุงุญูุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 2320 ุ 2322. qwindowsvistastyle.cpp 2320 </li><li style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ููุงู ุงููุฒูุฏ ูู ุงูุฃุฎุทุงุก.  ููุฏ ุณุฆูุช ุจุณุฑุนุฉ ูู ุชุนูู ุชุญุฐูุฑุงุช V595 ุ ูุจุงููุณุจุฉ ููููุงูุฉ ุ ูุชุจุช ุจุงููุนู ุฃุฌุฒุงุก ูุงููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </li></ul><br>  <b>ุนูุจ N22-N33</b> <br><br>  ููุฌุฏ ุฑูุฒ ุญูุซ ูุชู ุงูุชุญูู ูู ูุคุดุฑ ุฅุฑุฌุงุน ุนุงูู ุงูุชุดุบูู <i>ุงูุฌุฏูุฏ</i> .  ูุฐุง ูุถุญู ุจุดูู ุฎุงุต ูุณุท ุญูููุฉ ุฃู ููุงู ุงููุซูุฑ ูู ุงูุฃูุงูู ุงูุชู ูุง ูุชู ูููุง ุชุญุฏูุฏ ูุชูุฌุฉ ูุธููุฉ <i>malloc</i> (ุงูุธุฑ ูุฌููุนุฉ ุงูุฃุฎุทุงุก ุงูุชุงููุฉ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> QTranslatorPrivate::do_load(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString &amp;realname, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString &amp;directory) { .... d-&gt;unmapPointer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>[d-&gt;unmapLength]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (d-&gt;unmapPointer) { file.seek(<span class="hljs-number"><span class="hljs-number">0</span></span>); qint64 readResult = file.read(d-&gt;unmapPointer, d-&gt;unmapLength); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (readResult == qint64(unmapLength)) ok = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V668 CWE-571 ูุง ููุฌุฏ ุฃู ูุนูู ูู ุงุฎุชุจุงุฑ ูุคุดุฑ "d-&gt; unmap Pointer" ููุงุจู ูููุฉ ุฎุงููุฉ ุ ุญูุซ ุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู "new".  ุณูุชู ุฅูุดุงุก ุงูุงุณุชุซูุงุก ูู ุญุงูุฉ ุฎุทุฃ ุชุฎุตูุต ุงูุฐุงูุฑุฉ.  qtranslator.cpp 596 <br><br>  ุงูุชุญูู ูู ุงููุคุดุฑ ูุง ูุนูู ูู ุ ูุฃูู ูู ุญุงูุฉ ูุฌูุฏ ุฎุทุฃ ูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ุณูุชู <i>ุทุฑุญ</i> ุงุณุชุซูุงุก <i>std :: bad_alloc</i> .  ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ูููู ุนุงูู ุงูุชุดุบูู <i>ุงูุฌุฏูุฏ</i> ุจุฅุฑุฌุงุน <i>nullptr ูู</i> ุญุงูุฉ ุนุฏู ูุฌูุฏ ุฐุงูุฑุฉ ูุงููุฉ ุ ููุฌุจ ุนููู ูุชุงุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">d-&gt;unmapPointer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::nothrow) <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>[d-&gt;unmapLength];</code> </pre> <br>  ูุนุฑู ุงููุญูู ุนู ูุฐุง ุงูุงุณุชุฎุฏุงู ููุนุงูู <i>ุงูุฌุฏูุฏ</i> ููู ูุนุทู ุชุญุฐูุฑูุง ูู ูุฐู ุงูุญุงูุฉ. <br><br>  ุฃุฎุทุงุก ุฃุฎุฑู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณุฃุนุทููู ููู qt-V668.txt</a> . <br><br>  <b>ุนูุจ N34-N70</b> <br><br>  ููุง ูู ููุนูุฏ ุ ุงูุขู ุญุงู ุฏูุฑ ุงูุฃุฎุทุงุก ุนูุฏูุง ูุง ูุชุญูููู ูู ูุชูุฌุฉ ุงุณุชุฏุนุงุก ุงููุธุงุฆู <i>malloc</i> ุ <i>calloc</i> ุ <i>strdup</i> ุ ุฅูุฎ.  ูุฐู ุงูุฃุฎุทุงุก ุฃูุซุฑ ุฎุทูุฑุฉ ููุง ุชุจุฏู ูููููุฉ ุงูุฃููู.  ูุฒูุฏ ูู ุงูุชูุงุตูู: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุฐุง ูู ุงูููู ุงูุชุญูู ููุง ุนุงุฏุช ุฏุงูุฉ malloc</a> ." <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">SourceFiles::SourceFiles() { nodes = (SourceFileNode**)<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(SourceFileNode*)*(num_nodes=<span class="hljs-number"><span class="hljs-number">3037</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; num_nodes; n++) nodes[n] = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V522 CWE-690 ูุฏ ูููู ููุงู ุฅุญุงูุฉ ูุฑุฌุนูุฉ ูู "ุนูุฏ" ูุคุดุฑ ุฎุงููุฉ ูุญุชููุฉ.  ุชุญูู ูู ุงูุฎุทูุท: 138 ุ 136. makefiledeps.cpp 138 <br><br>  ูุชู ุงุณุชุฎุฏุงู ุงููุคุดุฑ ุฏูู ุงูุชุญูู ุงููุณุจู. <br><br>  ูู ูุฐู ุงูุฃุฎุทุงุก ูู ููุณ ุงูููุน ุ ูุฐูู ูู ุฃุชูุงูููุง ุจูุฒูุฏ ูู ุงูุชูุตูู.  ุณุฃุนุทู ุจููุฉ ูุงุฆูุฉ ุงูุชุญุฐูุฑ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">qt-V522-V575.txt</a> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฃุฎุทุงุก ุงูููุทููุฉ ูู ุงูุธุฑูู </h2><br>  <b>ุนูุจ N71</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">QString QEdidParser::parseEdidString(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> quint8 *data) { <span class="hljs-function"><span class="hljs-function">QByteArray </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buffer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">reinterpret_cast</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *&gt;(data), </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">13</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// Erase carriage return and line feed buffer = buffer.replace('\r', '\0').replace('\n', '\0'); // Replace non-printable characters with dash for (int i = 0; i &lt; buffer.count(); ++i) { if (buffer[i] &lt; '\040' &amp;&amp; buffer[i] &gt; '\176') buffer[i] = '-'; } return QString::fromLatin1(buffer.trimmed()); }</span></span></code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V547 CWE-570 Expression 'buffer [i] &lt;' \ 040 '&amp;&amp; buffer [i]&gt;' \ 176 '' ุฏุงุฆููุง ุฎุทุฃ.  qedidparser.cpp 169 <br><br>  ูุฌุจ ุฃู ุชููู ุงููุธููุฉ ุจุงูุฅุฌุฑุงุก ุงูุชุงูู "ุงุณุชุจุฏุงู ุงูุฃุญุฑู ุบูุฑ ุงููุงุจูุฉ ููุทุจุงุนุฉ ุจุดุฑุทุฉ".  ููุน ุฐูู ุ ูู ุชูุนู ุฐูู.  ุฏุนููุง ูููู ูุธุฑุฉ ูุงุญุตุฉ ุนูู ูุฐู ุงูุญุงูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[i] &lt; <span class="hljs-string"><span class="hljs-string">'\040'</span></span> &amp;&amp; buffer[i] &gt; <span class="hljs-string"><span class="hljs-string">'\176'</span></span>)</code> </pre> <br>  ูุง ูุนูู ูู.  ูุง ูููู ุฃู ูููู ุงูุญุฑู ุฃูู ูู '\ 040' ูุฃูุจุฑ ูู '\ 176' ูู ููุณ ุงูููุช.  ูู ุงูุญุงูุฉ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู '||'.  ุงูุฑูุฒ ุงูุตุญูุญ ูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[i] &lt; <span class="hljs-string"><span class="hljs-string">'\040'</span></span> || buffer[i] &gt; <span class="hljs-string"><span class="hljs-string">'\176'</span></span>)</code> </pre> <br>  <b>ุนูุจ N72</b> <br><br>  ุฎุทุฃ ููุงุซู ุ ุจุณุจุจ ุนุฏู ุญุธ ูุณุชุฎุฏูู Windows. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(Q_OS_WIN) static QString driveSpec(const QString &amp;path) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (path.size() </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; 2) return QString(); char c = path.at(0).toLatin1(); if (c &lt; 'a' &amp;&amp; c &gt; 'z' &amp;&amp; c &lt; 'A' &amp;&amp; c &gt; 'Z') return QString(); if (path.at(1).toLatin1() != ':') return QString(); return path.mid(0, 2); } #endif</span></span></span></span></code> </pre> <br>  ููุดุฆ ุงููุญูู ุชุญุฐูุฑูู ูู ููุช ูุงุญุฏ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V590 CWE-571 ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ูุญุต ุชุนุจูุฑ 'c &lt;' a '&amp;&amp; c&gt;' z '&amp;&amp; c &lt;' A '&amp;&amp; c&gt;' Z ''.  ุงูุชุนุจูุฑ ุฒุงุฆุฏ ุฃู ูุญุชูู ุนูู ุฎุทุฃ ูุทุจุนู.  qdir.cpp 77 </li><li style=";text-align:right;direction:rtl">  V560 CWE-570 ุฌุฒุก ูู ุงูุชุนุจูุฑ ุงูุดุฑุทู ุฎุทุฃ ุฏุงุฆููุง: c&gt; 'z'.  qdir.cpp 77 </li></ul><br>  ุฎุทุฃ ููุทูู ูู ุงูุญุงูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c &lt; <span class="hljs-string"><span class="hljs-string">'a'</span></span> &amp;&amp; c &gt; <span class="hljs-string"><span class="hljs-string">'z'</span></span> &amp;&amp; c &lt; <span class="hljs-string"><span class="hljs-string">'A'</span></span> &amp;&amp; c &gt; <span class="hljs-string"><span class="hljs-string">'Z'</span></span>)</code> </pre> <br>  ููุง ุฃููููุง ุ ุฃุฑุงุฏ ุงููุจุฑูุฌ ุงูุนุซูุฑ ุนูู ุญุฑู ููุณ ุญุฑููุง ูู ุงูุฃุจุฌุฏูุฉ ุงููุงุชูููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุฃู ูููู ุงูุดุฑุท ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((c &lt; <span class="hljs-string"><span class="hljs-string">'a'</span></span> || c &gt; <span class="hljs-string"><span class="hljs-string">'z'</span></span>) &amp;&amp; (c &lt; <span class="hljs-string"><span class="hljs-string">'A'</span></span> || c &gt; <span class="hljs-string"><span class="hljs-string">'Z'</span></span>))</code> </pre> <br>  <b>ุนูุจ N73</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> SelectionMode { NoSelection, SingleSelection, MultiSelection, ExtendedSelection, ContiguousSelection }; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> QAccessibleTableCell::unselectCell() { QAbstractItemView::SelectionMode selectionMode = view-&gt;selectionMode(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!m_index.isValid() || (selectionMode &amp; QAbstractItemView::NoSelection)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V616 CWE-480 ูุชู ุงุณุชุฎุฏุงู ุซุงุจุช QAb abstractItemView :: NoSelection ูุน ูููุฉ 0 ูู ุนูููุฉ ุฃุญุงุฏู ุงููุนุงูู.  976 <br><br>  ุซุงุจุช <i>QAb abstractItemView :: NoSelection</i> ูู ุตูุฑ.  ูุฐูู ุ ูุง ูุนูู <i>ููุชุนุจูุฑ ุงููุฑุนู (selectMode &amp; QAb abstractItemView :: NoSelection)</i> .  ุณุชููู ุฏุงุฆููุง 0. <br><br>  ุฃุนุชูุฏ ุฃูู ูุฌุจ ูุชุงุจุชูุง ููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!m_index.isValid() || (selectionMode == QAbstractItemView::NoSelection))</code> </pre> <br>  <b>ุนูุจ N74</b> <br><br>  ูู ุงูุตุนุจ ุนูู ููู ุงูููุฏ ุงูุชุงูู.  ุฅูู ูุฎุทุฆ ุ ูููู ูุง ุฃุนุฑู ูุง ูุฌุจ ุฃู ูููู.  ุงูุชุนููู ุนูู ูุธููุฉ ูุง ูุณุงุนุฏูู ุฃูุถูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Re-engineered from the inline function _com_error::ErrorMessage(). // We cannot use it directly since it uses swprintf_s(), which is not // present in the MSVCRT.DLL found on Windows XP (QTBUG-35617). static inline QString errorMessageFromComError(const _com_error &amp;comError) { TCHAR *message = nullptr; FormatMessage( FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM, NULL, DWORD(comError.Error()), MAKELANGID(LANG_NEUTRAL,SUBLANG_DEFAULT), message, 0, NULL); if (message) { const QString result = QString::fromWCharArray(message).trimmed(); LocalFree(static_cast&lt;HLOCAL&gt;(message)); return result; } if (const WORD wCode = comError.WCode()) return QString::asprintf("IDispatch error #%u", uint(wCode)); return QString::asprintf("Unknown error 0x0%x", uint(comError.Error())); }</span></span></code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: ุฑุณุงูุฉ ุชุนุจูุฑ V547 CWE-570 ุฎุงุทุฆุฉ ุฏุงุฆููุง.  qwindowscontext.cpp 802 <br><br>  ุฑุจูุง ููุชุฑุถ ุงููุจุฑูุฌ ุฃู ูุธููุฉ <i>FormatMessage</i> ุณุชุบูุฑ ูููุฉ ูุคุดุฑ <i>ุงูุฑุณุงูุฉ</i> .  ููู ุงูุฃูุฑ ููุณ ูุฐูู.  ูุง ูููู <i>ููุฏุงูุฉ FormatMessage</i> ุชุบููุฑ ูููุฉ ุงููุคุดุฑ ุ ุญูุซ ูุชู ุชูุฑูุฑู ุฅูู ุงูุฏุงูุฉ ุญุณุจ ุงููููุฉ.  ููุง ูููุฐุฌ ุฃููู ููุฐู ุงููุธููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">DWORD __<span class="hljs-function"><span class="hljs-function">stdcall </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormatMessageW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( DWORD dwFlags, LPCVOID lpSource, DWORD dwMessageId, DWORD dwLanguageId, LPWSTR lpBuffer, DWORD nSize, va_list *Arguments )</span></span></span></span>;</code> </pre> <br><br><h2 style=";text-align:right;direction:rtl">  ุชุณุฑุจ ุงูุฐุงูุฑุฉ ุงููุญุชููุฉ </h2><br>  <b>ุนูุจ N75-N92</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SourceDependChildren</span></span></span><span class="hljs-class"> {</span></span> SourceFile **children; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> num_nodes, used_nodes; SourceDependChildren() : children(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>), num_nodes(<span class="hljs-number"><span class="hljs-number">0</span></span>), used_nodes(<span class="hljs-number"><span class="hljs-number">0</span></span>) { } ~SourceDependChildren() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (children) <span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(children); children = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addChild</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SourceFile *s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(num_nodes &lt;= used_nodes) { num_nodes += <span class="hljs-number"><span class="hljs-number">200</span></span>; children = (SourceFile**)<span class="hljs-built_in"><span class="hljs-built_in">realloc</span></span>(children, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(SourceFile*)*(num_nodes)); } children[used_nodes++] = s; } };</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V701 CWE-401 realloc () ุชุณุฑุจ ูุญุชูู: ุนูุฏูุง ููุดู realloc () ูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูุชู ููุฏุงู ุงููุคุดุฑ ุงูุฃุตูู "ุฃุทูุงู".  ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุชุนููู realloc () ููุคุดุฑ ูุคูุช.  ูกููฃ <br><br>  ูุชู ุชูููุฐ ุชูุณูุน ุงููุฎุฒู ุงููุคูุช ุจุทุฑููุฉ ุฎุทูุฑุฉ.  ุฅุฐุง ุชุนุฐุฑ ุนูู ุงูุฏุงูุฉ <i>realloc</i> ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูุณูู ุชูุฑุฌุน <i>NULL</i> .  ุณูุชู ูุถุน <i>NULL</i> ุนูู ุงูููุฑ ูู ุงููุชุบูุฑ ุงูุชุงุจุน ููู ุชููู ููุงู ุฅููุงููุฉ ูุชุญุฑูุฑ ุงููุฎุฒู ุงููุคูุช ุงููุฎุตุต ูุณุจููุง.  ุณูุญุฏุซ ุชุณุฑุจ ููุฐุงูุฑุฉ. <br><br>  ุฃุฎุทุงุก ููุงุซูุฉ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">qt-701.txt</a> . <br><br><h2 style=";text-align:right;direction:rtl">  ูุชูุฑูุงุช </h2><br>  <b>ุนูุจ N93</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GradientBase</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlendType</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">static</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inline</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlendType</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QT_FASTCALL</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">qt_fetch_linear_gradient_template</span></span></span><span class="hljs-class">(....) {</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t+inc*length &lt; qreal(INT_MAX &gt;&gt; (FIXPT_BITS + <span class="hljs-number"><span class="hljs-number">1</span></span>)) &amp;&amp; t+inc*length &gt; qreal(INT_MIN &gt;&gt; (FIXPT_BITS + <span class="hljs-number"><span class="hljs-number">1</span></span>))) { .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V610 CWE-758 ุณููู ุบูุฑ ูุญุฏุฏ.  ุชุญูู ูู ุนุงูู ุงูููู '&gt;&gt;'.  ุงููุนุงูู ุงูุฃูุณุฑ "(- 2147483647 - 1)" ุณูุจู.  ูุญุทุงู 4015 <br><br>  ูุง ูููู ุชุบููุฑ ุงููููุฉ ุงูุณุงูุจุฉ ูู <i>INT_MIN</i> .  ูุฐุง ุณููู ุบูุฑ ูุญุฏุฏ ุ ููุง ููููู ุงูุงุนุชูุงุฏ ุนูู ูุชูุฌุฉ ูุฐู ุงูุนูููุฉ.  ูููู ุฃู ุชููู ุงูุจุชุงุช ุงูุฃูุซุฑ ุฃูููุฉ ุชุณุงูู 0 ุฃู 1. <br><br>  <b>ุนูุจ N94</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> QObjectPrivate::addConnection(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> signal, Connection *c) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (signal &gt;= connectionLists-&gt;count()) connectionLists-&gt;resize(signal + <span class="hljs-number"><span class="hljs-number">1</span></span>); ConnectionList &amp;connectionList = (*connectionLists)[signal]; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (signal &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V781 CWE-129 ูุชู ุงูุชุญูู ูู ูููุฉ ูุชุบูุฑ "ุงูุฅุดุงุฑุฉ" ุจุนุฏ ุงุณุชุฎุฏุงูู.  ุฑุจูุง ููุงู ุฎุทุฃ ูู ููุทู ุงูุจุฑูุงูุฌ.  ุฎุทูุท ุงูุชุญูู: 397 ุ 413. qobject.cpp 397 <br><br>  ูุดูุฑ ุงูุงุฎุชูุงุฑ <i>(ุงูุฅุดุงุฑุฉ &lt;0)</i> ุฅูู ุฃู ูููุฉ ูุณูุทุฉ <i>ุงูุฅุดุงุฑุฉ</i> ูุฏ ุชููู ุณุงูุจุฉ.  ููุน ุฐูู ุ ุชู ุงุณุชุฎุฏุงู ูุฐู ุงููุณูุทุฉ ุณุงุจููุง ูููุฑุณุฉ ุงูุตููู.  ุงุชุถุญ ุฃู ุงููุญุต ูุชู ูู ููุช ูุชุฃุฎุฑ ุฌุฏูุง.  ุณูุชู ุจุงููุนู ุชุนุทูู ุงูุจุฑูุงูุฌ. <br><br>  <b>ุนูุจ N95</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> QXmlStreamWriterPrivate::finishStartElement(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> contents) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inEmptyElement) { write(<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>); QXmlStreamWriterPrivate::Tag &amp;tag = tagStack_pop(); lastNamespaceDeclaration = tag.namespaceDeclarationsSize; lastWasStartElement = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { write(<span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>); } inStartElement = inEmptyElement = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; lastNamespaceDeclaration = namespaceDeclarations.size(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hadSomethingWritten; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V519 CWE-563 ูุชู ุชุนููู ููู ุงููุชุบูุฑ "lastNamespaceDeclaration" ูุฑุชูู ุนูู ุงูุชูุงูู.  ุฑุจูุง ูุฐุง ุฎุทุฃ.  ุฎุทูุท ุงูุชุญูู: 3188 ุ 3194. qxmlstream.cpp 3194 <br><br>  ุณูู ุฃุณูุท ุงูุถูุก ุนูู ุฌููุฑ ุงูุฎุทุฃ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inEmptyElement) { lastNamespaceDeclaration = tag.namespaceDeclarationsSize; } lastNamespaceDeclaration = namespaceDeclarations.size();</code> </pre> <br>  <b>ุนูุจ N96</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> QRollEffect::scroll() { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentHeight != totalHeight) { currentHeight = totalHeight * (elapsed/duration) + (<span class="hljs-number"><span class="hljs-number">2</span></span> * totalHeight * (elapsed%duration) + duration) / (<span class="hljs-number"><span class="hljs-number">2</span></span> * duration); <span class="hljs-comment"><span class="hljs-comment">// equiv. to int((totalHeight*elapsed) / duration + 0.5) done = (currentHeight &gt;= totalHeight); } done = (currentHeight &gt;= totalHeight) &amp;&amp; (currentWidth &gt;= totalWidth); .... }</span></span></code> </pre> <br>  V519 CWE-563 ูุชู ุชุนููู ุงููุชุบูุฑ "ุชู" ูุฑุชูู ูุชุชุงููุชูู.  ุฑุจูุง ูุฐุง ุฎุทุฃ.  ุชุญูู ูู ุงูุฎุทูุท: 509 ุ 511. qeffects.cpp 511 <br><br>  ูู ุดูุก ูู ููุณู ููุง ูู ุงูุญุงูุฉ ุงูุณุงุจูุฉ.  ูุงุญุธ ุงููุชุบูุฑ <i>ุงูููุฌุฒ</i> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h2><br>  ุญุชู ุฃุซูุงุก ุงููุธุฑ ูู ุงูุชูุฑูุฑ ุจุดูู ุณุทุญู ุ ูุชุจุช ูุง ููุฑุจ ูู 100 ุฎุทุฃ.  ูุณุฑูู ูุชุงุฆุฌ PVS-Studio. <br><br>  ูุจุงูุทุจุน ุ ูุฅู ุนูููุงุช ุงูุชุญูู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุงุฏุฑุฉ ูุฐู ูุง ุนูุงูุฉ ููุง ุจุชุญุณูู ุฌูุฏุฉ ูููุซูููุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ููู ุชูุธูุฑ ููุท ูุฏุฑุงุช ูุญูู ุงูููุฏ.  ูุฌุจ ุชุทุจูู ุฃุฏูุงุช ุงูุชุญููู ุงูุซุงุจุช ุจุงูุชุธุงู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชููู ูู ุชูููุฉ ุฅุตูุงุญ ุงูุฃุฎุทุงุก ูุญูุงูุฉ ุงูุชุทุจููุงุช ูู ุงูุนุฏูุฏ ูู ุงูุซุบุฑุงุช ุงูุฃูููุฉ ุงููุญุชููุฉ. <br><br>  ุดูุฑุง ููู ุนูู ุงูุชูุงููู.  ูููุงูุจุฉ ููุดูุฑุงุชูุง ุงูุฌุฏูุฏุฉ ุ ุฃุฏุนูู ููุงุดุชุฑุงู ูู ุฅุญุฏู ูููุงุชูุง: <ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  VK.com: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pvsstudio_rus</a> </li><li style=";text-align:right;direction:rtl">  "Old school" RSS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">viva64-blog-ru</a> </li><li style=";text-align:right;direction:rtl">  ุชููุชุฑ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">@ pvsstudio_rus</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุณุชูุฑุงู</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">@ pvsstudio_rus</a> </li><li style=";text-align:right;direction:rtl">  ุจุฑููุฉ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pvsstudio_rus</a> </li></ol><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  ุฅุฐุง ููุช ุชุฑูุฏ ูุดุงุฑูุฉ ูุฐู ุงูููุงูุฉ ูุน ุฌูููุฑ ูุงุทู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุ ููุฑุฌู ุงุณุชุฎุฏุงู ุฑุงุจุท ุงูุชุฑุฌูุฉ: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุต ุซุงูุซ ูู Qt 5 ูุน PVS-Studio</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar426485/">https://habr.com/ru/post/ar426485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar426475/index.html">ููุง - ูุณุงุนุฏ ูู ุงููุงุชู ุงูุฐูู</a></li>
<li><a href="../ar426477/index.html">ุงูุญูููุฉ ุงููุงููุฉ ุนู RTOS. ุงููุงุฏุฉ ุฑูู 15. ุฃูุณุงู ุงูุฐุงูุฑุฉ: ุงูุฎุฏูุงุช ูููุงูู ุงูุจูุงูุงุช</a></li>
<li><a href="../ar426479/index.html">ููุถุฏุฉ ุงุฎุชุจุงุฑ ูุญููุฉ ุงูุตูุน ูููุญุงุช ุงูุฃู</a></li>
<li><a href="../ar426481/index.html">ุฎุฑุงุฆุท ุณุฏุงุณูุฉ ูู ุงููุญุฏุฉ: ููุชุดู ุงููุณุงุฑ ููุฑู ุงููุงุนุจูู ูุงูุฑุณูู ุงููุชุญุฑูุฉ</a></li>
<li><a href="../ar426483/index.html">ุงูุดุฎุต ุงูุฐู ูุชููู ุนูู ุชุณูุง. ููุฒูุฏ ูู ุงูุฑุจุญ</a></li>
<li><a href="../ar426487/index.html">ุงุฎุชุจุงุฑ ุงูุฃุชูุชุฉ ูู ุงูุตูุฑ. ุงูุฌุฒุก ุงูุฃูู</a></li>
<li><a href="../ar426489/index.html">ูู ุนูุงูุฉ ุงูุฃุนุฏุงุฏ ุงูุฃูููุฉ ูุบูุฑ ุงูููุทููุฉ</a></li>
<li><a href="../ar426491/index.html">ุฃุณุจูุน ุงูุฃูู 39: ูู ููุงุฉ + Google</a></li>
<li><a href="../ar426493/index.html">ุฎุตููุงุช ุซุงุจุชุฉ ูู ุงููุถูููู ุนูู VPS ู VPS</a></li>
<li><a href="../ar426495/index.html">ูุตูู ูููุฑุฏ. ููููุฉ ุจูุงุก ูููุฉ ุนูุฏูุง ุชุนูู ุจููุฑุฏู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>