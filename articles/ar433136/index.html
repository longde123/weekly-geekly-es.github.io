<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♥️ 🕘 🤸🏻 System.Treatactions Infrastructure في العالم .NET 🏴󠁧󠁢󠁷󠁬󠁳󠁿 🛌🏾 🐗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="هل شاهدت بنية مثل using (var scope = new TransactionScope(TransactionScopeOption.Required)) في C #؟ هذا يعني أن الكود الذي يتم تشغيله في كتلة الاستخدا...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>System.Treatactions Infrastructure في العالم .NET</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/433136/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ct/df/aq/ctdfaqnuvdjaw6tobyxja78mk-s.png"></div><br>  هل شاهدت بنية مثل <code>using (var scope = new TransactionScope(TransactionScopeOption.Required))</code> في C #؟  هذا يعني أن الكود الذي يتم تشغيله في كتلة الاستخدام في المعاملة وبعد الخروج من هذا الحظر ، سيتم الالتزام بالتغييرات أو التراجع عنها.  يبدو مفهوما حتى تبدأ الحفر أعمق.  وكلما حفر أعمق ، يصبح "أغرب وأغرب".  على أي حال ، عندما أصبحت أكثر دراية بفئة <code>TransactionScope</code> ، وبصفة عامة ، مع معاملات .NET ، نشأت مجموعة كاملة من الأسئلة. <br><br>  ما هي فئة <code>TransactionScope</code> ؟  بمجرد استخدام بنية <code>using (var scope = new TransactionScope())</code> ، هل يصبح كل شيء في برنامجنا معاملات على الفور؟  ما هي "إدارة الموارد" و "مدير المعاملات"؟  هل يمكنني كتابة مدير الموارد الخاص بي وكيف "يتصل" بمثيل <code>TransactionScope</code> تم إنشاؤه؟  ما هي المعاملة الموزعة وهل صحيح أن المعاملة الموزعة في SQL Server أو Oracle Database هي نفس معاملة .NET الموزعة؟ <br><br>  حاولت في هذا المنشور جمع مواد تساعد في العثور على إجابات لهذه الأسئلة وبناء فهم للمعاملات في عالم .NET. <br><a name="habracut"></a><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">المحتويات</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مقدمة</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ما هي المعاملات وما هي المشاكل التي يحلونها؟</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ما المعاملات تعتبر هنا</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TL ؛ قسم DR</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المعاملات القائمة على نظام. المعاملات</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ما هذا</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مديري الموارد</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">أنواع مديري الموارد</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">باستخدام TransactionScope</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تطبيق المعاملات البرمجيات</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مثال على مدير موارد متقلب</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TL ؛ قسم DR</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المعاملات الموزعة</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ما هذا</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">بروتوكولات المعاملات</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تثبيت ثنائي الطور</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">System.Transations الغش ورقة</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">البرمجيات الموزعة قيود المعاملات والبدائل</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هل هو كذلك في .NET Core؟</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المعاملات الموزعة و WCF</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TL ؛ قسم DR</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">خاتمة سرير</a> </div></div><br><a name="Introduction"></a><h2 style=";text-align:right;direction:rtl">  مقدمة </h2><br><a name="Transactions"></a><h4 style=";text-align:right;direction:rtl">  ما هي المعاملات وما هي المشاكل التي يحلونها؟ </h4><br>  المعاملات المذكورة هنا هي عمليات تنقل النظام من حالة مقبولة إلى أخرى وتضمن عدم ترك النظام في حالة غير مقبولة حتى في حالة ظهور حالات غير متوقعة.  أي نوع من الشروط المقبولة هذه ، بشكل عام ، يعتمد على السياق.  سننظر هنا في وضع مقبول تكون فيه البيانات التي نعالجها جزءًا لا يتجزأ.  من المفهوم أن التغييرات التي تشكل المعاملة إما ملتزمون معًا أو غير ملتزمون.  بالإضافة إلى ذلك ، يمكن عزل التغييرات التي تتم على معاملة ما عن التغييرات التي تم إجراؤها على النظام من خلال معاملة أخرى.  تتم الإشارة إلى المتطلبات الأساسية للمعاملات بواسطة اختصار ACID.  للتعارف الأول معهم ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مقال في ويكيبيديا</a> مناسب. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/4r/p7/2b/4rp72bf2l_qdxmlhawxsjslkj-i.png" width="250"></div><br>  مثال كلاسيكي على الصفقة هو تحويل الأموال بين حسابين.  في هذه الحالة ، فإن سحب الأموال من الحساب رقم 1 دون إضافة رصيد إلى الحساب رقم 2 أمر غير مقبول ، بنفس الطريقة التي يتم بها إيداع الحساب رقم 2 دون الانسحاب من الحساب رقم 1. وبعبارة أخرى ، نريد أن تكون كلتا العمليتين من السحب والاعتماد. - القيام على الفور.  إذا فشل أحدهم ، فلا ينبغي إجراء العملية الثانية.  يمكنك تسمية هذا المبدأ "كل شيء أو لا شيء".  علاوة على ذلك ، من المستحسن أن يتم تنفيذ العمليات بشكل متزامن حتى في حالة حدوث أعطال جهازية مثل انقطاع التيار الكهربائي ، أي أننا نرى النظام في حالة مقبولة بمجرد توفره بعد الاستعادة. <br><br>  من الناحية الرياضية ، يمكننا أن نقول أنه فيما يتعلق بالنظام ، هناك متغير نود الحفاظ عليه.  على سبيل المثال ، المبلغ في كلا الحسابين: من الضروري أن يظل المبلغ كما هو قبل العملية بعد التحويل (تحويل الأموال).  بالمناسبة ، في المثال الكلاسيكي لتحويل الأموال ، تظهر المحاسبة أيضًا - وهي مجال موضوع نشأ فيه مفهوم المعاملة بشكل طبيعي. <br><br>  نوضح مثال تحويل الأموال بين حسابين.  الصورة الأولى توضح الموقف عندما تم نقل 50 روبل من الحساب رقم 1 إلى الحساب رقم 2 بنجاح.  يشير اللون الأخضر إلى أن النظام في حالة مقبولة (البيانات كاملة). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sn/az/ra/snazracqgy0u8fdxtrtksb8jc7g.png"></div><br>  الآن تخيل أن التحويل يتم خارج المعاملة وبعد سحب الأموال من الحساب رقم 1 ، حدث فشل ، بسبب عدم إيداع الأموال المسحوبة في الحساب رقم 2. سيكون النظام في حالة غير مقبولة (اللون الأحمر). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yj/8h/ph/yj8hphqu7cszpcdvnboh97h3xfe.png"></div><br>  إذا حدث خطأ بين عمليات السحب والاعتماد ، ولكن تم إجراء النقل كجزء من معاملة واحدة ، فسيتم إلغاء عملية السحب.  نتيجة لذلك ، سيبقى النظام في حالته الأصلية المقبولة. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/3d/6b/wi/3d6bwim5vko1yam5mhiv1ekl9ve.png"></div><br>  سأقدم أمثلة على المواقف من تجربة شركتنا التي تكون فيها المعاملات مفيدة: حساب البضائع (حساب عدد البضائع من أنواع مختلفة الموجودة في متاجر معينة وفي الطريق) ، المحاسبة عن موارد التخزين (حساب حجم غرفة تشغلها سلع من نوع معين ، وحجم الغرفة ، مجانًا لوضع البضائع ، وكمية البضائع التي يمكن أن يتحركها الموظفون وأنظمة التخزين الآلية يوميًا). <br><br>  المشاكل التي تنشأ عند انتهاك تكامل البيانات واضحة.  المعلومات التي يقدمها النظام لا تصبح خاطئة فقط - إنها تفقد الاتصال بالواقع وتتحول إلى هراء. <br><br><a name="KindsOfTransactions"></a><h4 style=";text-align:right;direction:rtl">  ما المعاملات تعتبر هنا </h4><br>  الفوائد التي تقدمها المعاملات معروفة.  لذلك ، للحفاظ على سلامة البيانات ، هل نحن بحاجة إلى قاعدة بيانات علائقية ، لأن هذا هو المكان الذي تتم فيه المعاملات؟  ليس حقا  لقد قيل أعلاه أن مفهوم المعاملة يعتمد على السياق ، والآن سننظر بإيجاز في المعاملات التي يمكن أن نتحدث عنها عند مناقشة أنظمة المعلومات. <br><br>  بادئ ذي بدء ، نفصل بين مفاهيم معاملات المجال الموضوع (المعاملات التجارية) ومعاملات النظام.  يمكن تنفيذ الثاني في أماكن مختلفة وبطرق مختلفة. <br><br>  دعنا نذهب من أعلى مستوى - مجال الموضوع.  قد يعلن الشخص المعني أن هناك بعض الحالات المقبولة وأنه لا يرغب في رؤية نظام المعلومات خارج هذه الدول.  لن نعرض أمثلة إضافية: تحويل الأموال بين الحسابات مناسب هنا.  نوضح فقط أن التحويل ليس بالضرورة تحويل أموال بين حسابات التسوية لاثنين من عملاء البنك.  ولا تقل أهمية عن مهمة المحاسبة ، عندما ينبغي أن تعكس الحسابات مصادر أموال المنظمة والغرض منها ، ويجب أن يعكس التحويل التغير في توزيع الأموال حسب هذه المصادر والغرض منها.  كان هذا مثالًا على <b>معاملة مجال موضوع</b> . <br><br>  الآن دعونا نرى الأمثلة الأكثر شيوعا ومثيرة للاهتمام لتنفيذ معاملات النظام.  في معاملات النظام ، توفر الوسائل التقنية المختلفة متطلبات المجال.  الحل الكلاسيكي الذي ثبت نجاحه من هذا النوع هو <strong>معاملة DBMS العلائقية</strong> (المثال الأول).  توفر أنظمة إدارة قواعد البيانات الحديثة (سواء العلائقية <a href="">أو غير المتطرفة</a> ) آلية للمعاملات تتيح لك إما حفظ (الالتزام) بجميع التغييرات التي تم إجراؤها خلال فترة العمل المحددة ، أو تجاهلها (استرجاعها).  عند استخدام مثل هذه الآلية وعمليات سحب الأموال من حساب والاعتماد على حساب آخر يشكّل معاملة منطقة الموضوع ، سيتم دمج وسائل إدارة قواعد البيانات في معاملة نظام وسيتم تنفيذها معًا أو عدم تنفيذها على الإطلاق. <br><br>  باستخدام DBMS ، بالطبع ، ليست ضرورية.  بمعنى تقريبي ، يمكنك عمومًا تنفيذ آلية المعاملات DBMS بلغتك البرمجية المفضلة والاستمتاع بالتماثلية غير المستقرة والعربات التي تجرها الدواب للأدوات الحالية.  لكن يمكن تحسين "دراجتك" في مواقف معينة في مجال الموضوع. <br><br>  هناك خيارات أكثر إثارة للاهتمام.  تقدم لغات البرمجة الصناعية الحديثة (C # و Java في المقام الأول) أدوات مصممة خصيصًا لتنظيم المعاملات التي تنطوي على أنظمة فرعية مختلفة تمامًا ، وليس فقط DBMS.  في هذا المنشور ، سوف نسمي برمجيات المعاملات.  في حالة C # ، هذه <b>معاملات من مساحة اسم System.Transactions</b> (المثال الثاني) ، ويتم وصفها أدناه. <br><br>  قبل الانتقال إلى معاملات <code>System.Transactions</code> ، لا يمكن للمرء أن يفشل في ذكر ظاهرة أكثر إثارة للاهتمام.  أدوات <code>System.Transactions</code> تسمح للمبرمج بتنفيذ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ذاكرة المعاملة البرنامجية</a> بشكل مستقل.  في هذه الحالة ، يتم تضمين عمليات البرنامج التي تؤثر على حالة النظام (في حالة لغات البرمجة الإلزامية الكلاسيكية هذه هي عملية التعيين) افتراضيًا في المعاملات التي يمكن الالتزام بها واسترجاعها بنفس طريقة معاملات DBMS.  مع هذا النهج ، تقل الحاجة إلى استخدام آليات التزامن (في C # - <code>lock</code> ، وفي Java - <code>synchronized</code> ).  ومن التطورات الأخرى لهذه الفكرة <strong>، ذاكرة معاملات البرنامج ، المدعومة على مستوى المنصة</strong> (المثال الثالث).  من المتوقع العثور على هذه المعجزة بلغة تفوق أناقتها قابليتها للتطبيق الصناعي - Clojure.  ولغات الفلاحين العاملين ، توجد مكتبات في المكونات توفر وظائف ذاكرة المعاملات البرنامجية. <br><br>  يمكن أن تشمل معاملات النظام عدة أنظمة معلومات ، وفي هذه الحالة يتم توزيعها.  يمكن أن تكون موزعة معاملات DBMS والبرامج ؛  كل هذا يتوقف على وظيفة ما تدعمه أداة معاملة معينة.  وتناقش المعاملات الموزعة أكثر تفصيلا في القسم المقابل.  سأقدم صورة لتسهيل فهم الموضوعات التي تمت مناقشتها. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/di/yd/4s/diyd4spwelqhd61eoetfacuncjm.png"></div><br><a name="TLDR1"></a><h4 style=";text-align:right;direction:rtl">  TL ؛ قسم DR </h4><br>  هناك عمليات تتكون من عدة عمليات (غير قابلة للتجزئة) يتم تطبيقها على النظام ، وفي الحالة العامة لا تكون بالضرورة معلوماتية.  كل عملية غير قابلة للتجزئة يمكن أن تترك النظام في حالة غير مقبولة عندما يتم اختراق تكامل البيانات.  على سبيل المثال ، إذا كانت عملية تحويل الأموال بين حسابين ممثلة في عمليتين غير قابلتين للانسحاب من الحساب رقم 1 والاعتماد في الحساب رقم 2 ، فلن تنتهك سوى واحدة من هذه العمليات سلامة البيانات.  المال إما يختفي في منتصف اللا مكان ، أو يظهر في منتصف اللا مكان.  تجمع المعاملة بين العمليات غير القابلة للتجزئة بحيث يتم تنفيذها جميعًا معًا (بالطبع ، بالتتابع ، إذا لزم الأمر) أو لا يتم تنفيذها على الإطلاق.  يمكننا التحدث عن معاملات المجال والمعاملات في الأنظمة الفنية التي تنفذ معاملات النطاق عادة. <br><br><a name="SystemTransactions"></a><h2 style=";text-align:right;direction:rtl">  المعاملات القائمة على نظام. المعاملات </h2><br><a name="WhatIsIt1"></a><h4 style=";text-align:right;direction:rtl">  ما هذا </h4><br>  في عالم .NET ، يوجد إطار برنامج مصمم من قبل منشئي نظام أساسي لإدارة المعاملات.  من وجهة نظر مبرمج معاملات ، يتكون هذا الإطار من <code>System.Transactions</code> <code>TransactionOptions</code> و <code>TransactionOptions</code> و <code>TransactionOptions</code> و <code>TransactionOptions</code> <code>System.Transactions</code> مساحة اسم <code>System.Transactions</code> .  إذا تحدثنا عن .NET Standard ، فسيكون كل هذا متاحًا بدءًا من <a href="">الإصدار 2.0</a> . <br><br>  تستند المعاملات من مساحة الاسم <code>System.Transactions</code> إلى <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">معيار X / Open XA من The Open Group</a> .  يقدم هذا المعيار العديد من المصطلحات التي تمت مناقشتها أدناه ، والأهم من ذلك ، وصف المعاملات الموزعة ، والتي يتم تغطيتها أيضًا في هذا المنشور في قسم خاص.  يعتمد تنفيذ معاملات البرامج في الأنظمة الأساسية الأخرى ، على سبيل المثال <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">، Java ،</a> على نفس المعيار. <br><br>  حالة استخدام المعاملة النموذجية لمبرمج C # كما يلي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Transactions.TransactionScope(System.Transactions.TransactionScopeOption.Required)) { <span class="hljs-comment"><span class="hljs-comment">// -  ,    . scope.Complete(); }</span></span></code> </pre> <br>  يوجد داخل كتلة الاستخدام الكود الذي يقوم بالعمل ، ويجب الالتزام بنتائجها أو إلغاؤها معًا.  الأمثلة الكلاسيكية لهذا العمل هي القراءة والكتابة إلى قاعدة البيانات أو إرسال واستقبال الرسائل من قائمة الانتظار.  عندما يترك عنصر التحكم كتلة الاستخدام ، سيتم الالتزام بالمعاملة.  إذا قمت بإزالة المكالمة <code>Complete</code> ، فسيتم التراجع عن المعاملة.  بسيط جدا. <br><br>  اتضح أنه خلال التراجع عن المعاملة ، سيتم إلغاء جميع العمليات التي تتم داخل كتلة الاستخدام هذه؟  وإذا قمت بتعيين متغير بقيمة مختلفة ، فسيقوم هذا المتغير باستعادة القيمة القديمة؟  عندما رأيت لأول مرة تصميمًا مشابهًا ، اعتقدت ذلك.  في الواقع ، بالطبع ، لن يتم التراجع عن كل التغييرات ، ولكن فقط التغييرات <i>الخاصة</i> للغاية.  إذا تم التراجع عن جميع التغييرات على الإطلاق ، فسيكون هذا هو ذاكرة معاملات البرنامج الموضحة أعلاه.  الآن دعونا نرى ما هي هذه التغييرات الخاصة التي يمكن أن تشارك في معاملات البرنامج على أساس <code>System.Transactions</code> . <br><br><a name="ResourceManagers"></a><h4 style=";text-align:right;direction:rtl">  مديري الموارد </h4><br>  لشيء ما لدعم المعاملات على أساس <code>System.Transactions</code> ، فمن الضروري أن تمتلك معلومات أن المعاملات جارية حاليا ، وأنه مسجل في بعض سجل المشاركين في الصفقة.  يمكنك الحصول على معلومات حول ما إذا كان عمل المعاملات قيد التنفيذ عن طريق التحقق من الخاصية الثابتة <code>Current</code> لفئة <code>System.Transactions.Transaction</code> .  يؤدي إدخال كتلة الاستخدام من النوع المشار إليه أعلاه إلى تعيين هذه الخاصية فقط ، إذا لم يتم تعيينها من قبل.  وللتسجيل كمشارك في إحدى المعاملات ، يمكنك استخدام أساليب من النوع <code>Transaction.Enlist <i>Smth</i></code> .  بالإضافة إلى ذلك ، تحتاج إلى تنفيذ الواجهة المطلوبة بواسطة هذه الطرق.  مدير الموارد - هذا هو مجرد "شيء" يدعم التفاعل مع المعاملات من <code>System.Transactions</code> (يتم تقديم تعريف أكثر تحديدًا أدناه). <br><br>  ما هي مديري الموارد؟  إذا كنا نعمل من C # مع DBMS ، على سبيل المثال ، SQL Server أو Oracle Database ، فإننا نستخدم عادة برامج التشغيل المناسبة ، وهي موارد الإدارة.  في التعليمات البرمجية ، يتم تمثيلهم بواسطة أنواع <code>System.Data.SqlClient.SqlConnection</code> و <code>Oracle.ManagedDataAccess.Client.OracleConnection</code> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">يقولون أيضًا</a> أن MSMQ يدعم المعاملات المستندة إلى <code>System.Transactions</code> .  تسترشد بالمعرفة والأمثلة المستقاة من الإنترنت ، يمكنك إنشاء مدير الموارد الخاص بك.  ويرد أبسط مثال في القسم التالي. <br><br>  بالإضافة إلى مديري الموارد ، يجب أن يكون لدينا أيضًا مدير معاملات ، يقوم بمراقبة المعاملة وإصدار أوامر لمديري الموارد في الوقت المناسب.  اعتمادًا على مديري الموارد المشاركين في المعاملة (ما هي الخصائص التي لديهم ومكان وجودهم) ، فإن مديري المعاملات المختلفين متصلون بالعمل.  في هذه الحالة ، يكون اختيار الإصدار المناسب تلقائيًا ولا يتطلب تدخل مبرمج. <br><br>  بشكل أكثر تحديدًا ، مدير الموارد هو مثيل لفئة تقوم بتنفيذ واجهة <code>System.Transactions.IEnlistmentNotification</code> الخاصة.  يتم تسجيل مثيل الفئة ، وفقًا لتوجيهات العميل ، كمشارك في المعاملة باستخدام الخاصية الثابتة <code>System.Transactions.Transaction.Current</code> .  بعد ذلك ، يستدعي مدير المعاملات أساليب الواجهة المحددة عند الضرورة. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tw/ea/vp/tweavpimeod539do_fkzpr6yzrw.png"></div><br>  من الواضح أنه في وقت التشغيل ، قد تتغير مجموعة مديري الموارد المشاركين في المعاملة.  على سبيل المثال ، بعد إدخال كتلة الاستخدام ، يمكننا أولاً القيام بشيء ما في SQL Server ، ثم في Oracle Database.  بناءً على هذه المجموعة من مديري الموارد ، يتم تحديد مدير المعاملات المستخدم.  لكي تكون أكثر دقة ، يتم تحديد بروتوكول المعاملة المستخدم من خلال مجموعة من مديري الموارد ، ويتم تحديد مدير المعاملات الذي يدعمه على أساس البروتوكول.  سننظر في بروتوكولات المعاملات في <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">وقت لاحق</a> عندما نتحدث عن المعاملات الموزعة.  تسمى آلية اختيار مدير المعاملات المناسب تلقائيًا في وقت التشغيل عند تغيير مديري الموارد المشاركين في المعاملة ترويج المعاملات. <br><br><a name="KindsOfResourceManagers"></a><h4 style=";text-align:right;direction:rtl">  أنواع مديري الموارد </h4><br>  يمكن تقسيم مديري الموارد إلى مجموعتين كبيرتين: دائم ومتغير. <br><br>  مدير موارد دائم - مدير موارد يدعم معاملة حتى لو كان نظام المعلومات غير متوفر (على سبيل المثال ، عند إعادة تشغيل الكمبيوتر).  إدارة الموارد المتقلبة - مدير موارد لا يدعم معاملة إذا كان نظام المعلومات غير متوفر.  يدعم مدير الموارد غير المتسق المعاملات في الذاكرة فقط. <br><br>  مديري الموارد الكلاسيكية الطويلة الأجل هم DBMS (أو برنامج تشغيل DBMS لمنصة البرنامج).  بغض النظر عن ما يحدث - على الأقل خلل في نظام التشغيل ، على الأقل انقطاع التيار الكهربائي - فإن DBMS يضمن سلامة البيانات بعد أن يعود إلى حالة صالحة للعمل.  لهذا ، بالطبع ، عليك أن تدفع بعض المضايقات ، لكن في هذه المقالة لن نفكر فيها.  مثال على مدير موارد غير مستمر هو ذاكرة معاملات البرنامج المذكورة أعلاه. <br><br><a name="TransactionScope"></a><h4 style=";text-align:right;direction:rtl">  باستخدام TransactionScope </h4><br>  عند إنشاء كائن من نوع <code>TransactionScope</code> يمكنك تحديد بعض المعلمات. <br><br>  أولاً ، هناك إعداد يخبر وقت التشغيل بما يحتاج إليه: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  استخدم معاملة موجودة بالفعل في هذا الوقت ؛ </li><li style=";text-align:right;direction:rtl">  تأكد من إنشاء واحدة جديدة. </li><li style=";text-align:right;direction:rtl">  على العكس ، قم بتنفيذ التعليمات البرمجية داخل كتلة <code>using</code> خارج المعاملة. </li></ol><br>  تعداد <code>System.Transactions.TransactionScopeOption</code> هو المسؤول عن كل هذا. <br><br>  ثانياً ، يمكنك تعيين مستوى عزل المعاملة.  هذه معلمة تسمح لك بإيجاد حل وسط بين استقلال التغيير والسرعة.  يضمن المستوى الأكثر استقلالية - القابل للتسلسل - عدم وجود حالات يمكن فيها رؤية التغييرات التي تم إجراؤها في معاملة واحدة لم يتم الالتزام بها في معاملة أخرى.  يضيف كل مستوى تالي أحد هذه المواقف المحددة ، عندما تؤثر المعاملات الجارية في وقت واحد على بعضها البعض.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بشكل افتراضي ، يتم فتح معاملة على المستوى القابل للتسلسل ، والتي يمكن أن تكون غير سارة (انظر ، على سبيل المثال ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذا التعليق</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يعد تحديد مستوى عزل المعاملة أثناء الإنشاء </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بمثابة نصيحة لمديري الموارد. قد لا تدعم حتى جميع المستويات المذكورة </font></font><code>System.Transactions.IsolationLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. بالإضافة إلى ذلك ، يجب أن يؤخذ في الاعتبار أنه عند استخدام تجمع الاتصال للعمل مع قاعدة البيانات ، فإن الاتصال الذي تم تغيير مستوى عزل المعاملة به سوف </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يحتفظ بهذا المستوى</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> عند الرجوع إلى التجمع </font><font style="vertical-align: inherit;">. الآن ، عندما يتلقى المبرمج هذا الاتصال من التجمع ويعتمد على القيم الافتراضية ، سوف يلاحظ سلوكًا غير متوقع. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">سيناريوهات العمل النموذجي c</font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">والمخاطر الكبيرة (وهي المعاملات المتداخلة) مغطاة جيدًا في </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذه المقالة عن "Habr"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><a name="Applicability"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تطبيق المعاملات البرمجيات </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يجب أن يقال أنه في أي نظام معلومات في التشغيل التجاري تقريبًا ، يتم إطلاق العمليات التي يمكن أن تؤدي بالنظام إلى حالة غير مقبولة. </font><font style="vertical-align: inherit;">لذلك ، قد يكون من الضروري التحكم في هذه العمليات ، ومعرفة ما إذا كانت الحالة الحالية للنظام مقبولة ، وإذا لم يكن الأمر كذلك ، يمكنك استعادتها. </font><font style="vertical-align: inherit;">معاملات البرامج - أداة جاهزة للمحافظة على النظام في حالة مقبولة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في كل حالة ، سيكون من المفيد بناء التكلفة:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">دمج العمليات في البنية التحتية للمعاملات البرمجية (تحتاج هذه العمليات إلى أن تكون على دراية </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بأشياء أخرى كثيرة) ؛</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الحفاظ على هذه البنية التحتية (على سبيل المثال ، تكلفة استئجار المعدات مع ويندوز على متن الطائرة) ؛ </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تدريب الموظفين (لأن موضوع معاملات .NET غير شائع). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يجب ألا ننسى أن عملية المعاملة قد تكون مطلوبة للإبلاغ عن تقدمها إلى "العالم الخارجي" ، على سبيل المثال ، للحفاظ على دفتر يومية للإجراءات خارج المعاملة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">من الواضح أن رفض معاملات البرامج سيتطلب إنشاء أو تنفيذ بعض الوسائل الأخرى للحفاظ على سلامة البيانات ، والتي سيكون لها قيمتها أيضًا. </font><font style="vertical-align: inherit;">في النهاية ، قد تكون هناك حالات تكون فيها انتهاكات سلامة البيانات نادرة جدًا بحيث يكون من الأسهل استعادة حالة مقبولة للنظام عن طريق التدخلات الجراحية بدلاً من الحفاظ على آلية الاسترداد التلقائي.</font></font><br><br><a name="Example"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مثال على مدير موارد متقلب </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الآن دعونا نلقي نظرة على مثال لمدير موارد بسيط لا يدعم الاسترداد من فشل النظام. سيكون لدينا كتلة من ذاكرة معاملات البرامج التي تخزن بعض القيمة التي يمكن قراءتها وكتابتها. في حالة عدم وجود معاملة ، يتصرف هذا الحظر كمتغير عادي ، وفي وجود معاملة ، يقوم بتخزين القيمة الأولية ، والتي يمكن استعادتها بعد استعادة المعاملة. فيما يلي رمز لمدير الموارد هذا:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Stm</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">System</span></span>.<span class="hljs-title"><span class="hljs-title">Transactions</span></span>.<span class="hljs-title"><span class="hljs-title">IEnlistmentNotification</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T _current; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T _original; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _enlisted; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _current; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Enlist()) { _original = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } _current = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { _current = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; _original = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enlist</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_enlisted) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentTx = System.Transactions.Transaction.Current; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentTx == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; currentTx.EnlistVolatile(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, System.Transactions.EnlistmentOptions.None); _enlisted = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">region</span></span></span><span class="hljs-meta"> IEnlistmentNotification public void Commit(System.Transactions.Enlistment enlistment) { _original = _current; _enlisted = false; } public void InDoubt(System.Transactions.Enlistment enlistment) { _enlisted = false; } public void Prepare(System.Transactions.PreparingEnlistment preparingEnlistment) { preparingEnlistment.Prepared(); } public void Rollback(System.Transactions.Enlistment enlistment) { _current = _original; _enlisted = false; } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endregion</span></span></span><span class="hljs-meta"> IEnlistmentNotification }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن ملاحظة أن الشرط الرسمي الوحيد هو تنفيذ الواجهة </font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. من المثير للاهتمام ، والأساليب </font></font><code>Enlist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(التي ليست جزءا </font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) و </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. تقوم الطريقة </font></font><code>Enlist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بالتحقق مما إذا كانت الشفرة المحددة تعمل في إطار المعاملة ، وإذا كان الأمر كذلك ، فإنها تسجل مثيلًا لفئتها كمدير موارد غير ثابت. </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يتم استدعاء </font><font style="vertical-align: inherit;">الطريقة </font><font style="vertical-align: inherit;">من قبل مدير المعاملات قبل تنفيذ التغييرات. يشير مدير الموارد لدينا إلى استعداده للالتزام من خلال استدعاء الأسلوب </font></font><code>System.Transactions.PreparingEnlistment.Prepared</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فيما يلي رمز يعرض مثالًا لاستخدام مدير الموارد لدينا:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stm&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Transactions.TransactionScope(System.Transactions.TransactionScopeOption.Required)) { stm.Value = <span class="hljs-number"><span class="hljs-number">2</span></span>; scope.Complete(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا قمت </font></font><code>using</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بقراءة العقار </font><font style="vertical-align: inherit;">مباشرة بعد الخروج من الكتلة </font></font><code>stm.Value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، فسيتم توقع القيمة المتوقعة هناك </font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">إذا مكالمة لإزالة </font></font><code>scope.Complete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، ثم يتم إرجاع المعاملة بعيدا والخاصية </font></font><code>stm.Value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هي قيمة </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معينة قبل بدء العملية. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يتم عرض تسلسل مبسط للمكالمات عند العمل مع المعاملات </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في الرسم البياني أدناه.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/09/je/1d/09je1dkghhmmwts6rvaufuntpna.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن ملاحظة أنه في هذا المثال ، لا يتم النظر في جميع الإمكانيات التي توفرها البنية التحتية </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">سننظر فيها بشكل كامل بعد التعرف على بروتوكولات المعاملات والمعاملات الموزعة في القسم التالي.</font></font><br><br><a name="TLDR2"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TL ؛ قسم DR </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن للمبرمج استخدام فئة </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لتنفيذ بعض التعليمات البرمجية في معاملة موجودة أو جديدة. يتم تنفيذ معاملة إذا وفقط إذا </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تم استدعاء الأسلوب </font><font style="vertical-align: inherit;">على مثيل موجود للفئة </font></font><code>Dispose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، على الرغم من أنه تم استدعاء الطريقة من قبل</font></font><code>Complete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. يمكن للمبرمج أن يشير إلى ما إذا كان يريد بدء معاملة جديدة ، أو الاستفادة من معاملة موجودة ، أو ، على العكس ، تنفيذ التعليمات البرمجية خارج معاملة موجودة. يشارك مديرو الموارد فقط في العملية - مكونات البرامج التي تنفذ وظائف معينة. يمكن أن يكون مديرو الموارد طويلي الأمد (يتعافون من فشل النظام) ومتقطعين (لا يتعافون). يعد DBMS مثالًا لمدير موارد طويل العمر. يتم تنسيق مدير الموارد بواسطة مدير معاملات - مكون برنامج يتم تحديده تلقائيًا بواسطة وقت التشغيل دون مشاركة مبرمج. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مدير الموارد غير المتناسق هو فئة تطبق الواجهة </font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في الطريقة</font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تأكيد استعدادها لارتكاب التغييرات أو ، على العكس ، الإشارة إلى تراجع التغييرات. </font><font style="vertical-align: inherit;">عندما يقوم المتصل بشيء ما مع مدير الموارد ، فإنه يتحقق لمعرفة ما إذا كانت المعاملة مفتوحة الآن ، وإذا كان مفتوحًا ، فسيتم تسجيل الدخول باستخدام هذه الطريقة </font></font><code>System.Transactions.Transaction.EnlistVolatile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><a name="DistributedTransactions"></a><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المعاملات الموزعة </font></font></h2><br><a name="WhatIsIt2"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ما هذا </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تتضمن المعاملة الموزعة عدة أنظمة فرعية للمعلومات (في الواقع ، ليس كل شيء بهذه البساطة ، وأكثر في هذا أدناه). </font><font style="vertical-align: inherit;">من المفهوم أن التغييرات في جميع الأنظمة المتضمنة في معاملة موزعة يجب إما الالتزام بها أو التراجع عنها. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تم عرض وسائل مختلفة لتنفيذ المعاملات أعلاه: DBMS ، البنية التحتية </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، وذاكرة المعاملات البرنامجية المضمنة في النظام الأساسي. </font><font style="vertical-align: inherit;">يمكن أيضًا توفير المعاملات الموزعة باستخدام هذه الأدوات. </font><font style="vertical-align: inherit;">على سبيل المثال ، في قاعدة بيانات Oracle ، يؤدي تغيير البيانات (وقراءتها فعليًا) في عدة قواعد بيانات ضمن معاملة واحدة إلى تحويلها تلقائيًا إلى قاعدة بيانات موزعة. </font><font style="vertical-align: inherit;">بعد ذلك ، سنتحدث عن المعاملات الموزعة للبرامج ، والتي قد تشمل مدراء موارد غير متجانسة.</font></font><br><br><a name="TransactionProtocols"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بروتوكولات المعاملات </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بروتوكول المعاملات هو مجموعة من المبادئ التي تتفاعل من خلالها التطبيقات المتضمنة في المعاملة. في عالم .NET ، يتم العثور على البروتوكولات التالية بشكل شائع. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خفيفة الوزن.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لا يتم استخدام أكثر من مدير موارد دائم. تحدث جميع تفاعلات المعاملات داخل نفس مجال التطبيق ، أو يدعم مدير الموارد الترويج والالتزام بمرحلة واحدة (تنفذ </font></font><code>IPromotableSinglePhaseNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OleTx.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يُسمح بالتشغيل البيني بين مجالات تطبيق متعددة وأجهزة كمبيوتر متعددة. يمكنك استخدام العديد من مديري الموارد دائم. يجب أن تعمل جميع أجهزة الكمبيوتر المشاركة بنظام Windows. استخدم استدعاءات الإجراءات عن بُعد (RPCs). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WS-AT.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يُسمح بالتشغيل البيني بين مجالات تطبيق متعددة وأجهزة كمبيوتر متعددة. يمكنك استخدام العديد من مديري الموارد دائم. قد تعمل أجهزة الكمبيوتر المشاركة على أنظمة تشغيل مختلفة ، وليس فقط Windows. يتم استخدام بروتوكول نقل النص التشعبي (HTTP). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وقد لوحظ أعلاه أن بروتوكول المعاملة الحالية يؤثر على اختيار مدير المعاملة ، وأن خصائص موارد الرقابة التي تنطوي عليها المعاملة تؤثر على اختيار البروتوكول. الآن نحن قائمة مديري المعاملات المعروفة. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مدير معاملات خفيفة الوزن (LTM)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . المقدمة في .NET Framework 2.0 والإصدارات الأحدث. يدير المعاملات باستخدام بروتوكول Lightweight. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مدير معاملات Kernel (KTM)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. المقدمة في نظامي التشغيل Windows Vista و Windows Server 2008. تدير المعاملات باستخدام بروتوكول Lightweight. يمكنه استدعاء نظام ملفات معاملات (TxF) وسجل معاملات (TxR) على نظامي التشغيل Windows Vista و Windows 2008. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">منسق المعاملات الموزعة (MSDTC)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . يدير المعاملات باستخدام بروتوكولي OleTx و WS-AT. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يجب أيضًا مراعاة أن بعض مديري الموارد لا يدعمون جميع البروتوكولات المدرجة. على سبيل المثال ، لا تدعم MSMQ و SQL Server 2000 Lightweight ، لذلك ستتم إدارة المعاملات التي تنطوي على MSMQ أو SQL Server 2000 بواسطة MSDTC ، حتى لو كانا المشتركين الوحيدين. من الناحية الفنية ، ينشأ هذا القيد عن حقيقة أن مديري الموارد المحددين ينفذون ، بالطبع ، الواجهة</font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لا تنفذ الواجهة </font></font><code>System.Transactions.IPromotableSinglePhaseNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">يتضمن ، من بين أشياء أخرى ، طريقة </font></font><code>Promote</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يستدعي وقت التشغيل ، إذا لزم الأمر ، للتبديل إلى مدير معاملات أكثر حدة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يجب أن يصبح غموض مفهوم المعاملة الموزعة واضحًا الآن. </font><font style="vertical-align: inherit;">على سبيل المثال ، يمكنك تعريف معاملة موزعة كمعاملة تشارك فيها:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> اثنين على الأقل من مديري الموارد ؛ </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مديري الموارد المتغيرة بشكل تعسفي واثنين على الأقل من العمر الطويل ؛ </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يوجد اثنان على الأقل من مديري الموارد بالضرورة على أجهزة كمبيوتر مختلفة. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لذلك ، من الأفضل أن توضح دائمًا أي معاملات معينة متورطة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وفي هذا السياق ، تتم مناقشة MSDTC بشكل أساسي. </font><font style="vertical-align: inherit;">إنه أحد مكونات برامج Windows التي تدير المعاملات الموزعة. </font><font style="vertical-align: inherit;">هناك واجهة رسومية لتكوين ومراقبة المعاملات ، والتي يمكن العثور عليها في الأداة المساعدة "خدمات المكونات" ، تتبع المسار "أجهزة الكمبيوتر - جهاز الكمبيوتر - منسق المعاملات الموزعة - DTC المحلي".</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/vo/35/gc/vo35gcdta3c9qx5w5cnsuxkbzz8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> للتكوين ، حدد عنصر "خصائص" في قائمة السياق لعقدة "DTC المحلية" ، ولمراقبة المعاملات الموزعة ، حدد عنصر "إحصائيات المعاملات" في اللوحة المركزية. </font></font><br><br><a name="TwoPhaseCommit"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تثبيت ثنائي الطور </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا شارك العديد من مديري الموارد في المعاملة ، فقد تختلف نتائج عملهم: على سبيل المثال ، واحد منهم قد تم بنجاح ، وهو مستعد لارتكاب تغييرات ، والآخر لديه خطأ ، وسوف يتراجع عن التغييرات. ومع ذلك ، يكمن جوهر المعاملة الموزعة في حقيقة أن التغييرات في جميع موارد التحكم المشاركة في المعاملة إما يتم الالتزام بها جميعًا أو التراجع. لذلك ، في مثل هذه الحالات ، يتم عادةً استخدام بروتوكول تثبيت ثنائي الطور. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بشكل عام ، فإن جوهر هذا البروتوكول هو على النحو التالي. خلال </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المرحلة الأولى</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يعد مديرو الموارد المشتركون في المعاملة معلومات كافية للتعافي من الفشل (إذا كان مدير موارد طويل الأجل) ولإنجازه الناجح نتيجة الالتزام. من وجهة نظر تقنية ، يشير مدير الموارد إلى أنه أكمل المرحلة الأولى من خلال استدعاء الطريقة </font></font><code>System.Transactions.PreparingEnlistment.Prepared</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في الطريقة </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. أو يمكن أن يقوم مدير الموارد بإعلامك بأنه قد تم التراجع عن التغييرات عن طريق استدعاء الطريقة </font></font><code>ForceRollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عندما "صوت" جميع مديري الموارد المشاركين في المعاملة ، أي أنهم أبلغوا مدير المعاملة ما إذا كانوا يريدون الالتزام بالتغييرات أم لا ، فإن </font><b><font style="vertical-align: inherit;">المرحلة الثانية</font></b><font style="vertical-align: inherit;"> تبدأ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. في هذا الوقت ، يُطلب من مديري الموارد الالتزام بالتغييرات (إذا صوت جميع المشاركين على الإصلاح) أو رفض التغييرات (إذا صوت مشارك واحد على الأقل للتراجع). من الناحية الفنية، يمكن التعبير عن هذا استدعاءات الأسلوب </font></font><code>Commit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">و </font></font><code>Rollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التي تنفذ مديري الموارد، والتي تتسبب في أسلوب </font></font><code>System.Transactions.Enlistment.Done</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن لمدير الموارد أيضًا استدعاء الأسلوب </font></font><code>System.Transactions.Enlistment.Done</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خلال المرحلة الأولى. في هذه الحالة ، من المفهوم أنه لن يرتكب أي تغييرات (على سبيل المثال ، يعمل فقط للقراءة) ولن يشارك في المرحلة الثانية. اقرأ المزيد حول الالتزام ثنائي الطور </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في Microsoft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في حالة فقد الاتصال بين مدير المعاملة وواحد من مديري الموارد على الأقل ، تصبح المعاملة مجمدة ("في شك" ، في حالة شك). </font><font style="vertical-align: inherit;">يقوم مدير المعاملات ، عن طريق استدعاء الأساليب </font></font><code>InDoubt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، بإبلاغ مديري الموارد المتاحين لهذا الحدث الذين يمكنهم الاستجابة بشكل مناسب. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لا يزال هناك </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تثبيت ثلاثي المراحل</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> وتعديلاته مع مزاياه وعيوبه. </font><font style="vertical-align: inherit;">بروتوكول الالتزام ثلاثي الطور أقل شيوعًا ، ربما لأنه يتطلب تكاليف اتصال أكثر بين الأنظمة الفرعية المتفاعلة.</font></font><br><br><a name="Interfaces"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الغش ورقة على واجهات System.Tactactions </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">شيء صعب. لفرز الأشياء قليلاً ، سأصف باختصار واجهات مساحة الاسم الرئيسية </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اللازمة لإنشاء مدير موارد. هنا هو مخطط الفصل.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/bs/rj/sx/bsrjsxptqz6w3g7l6zxawrzeyco.png"></div><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnlistmentNotification.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مدير الموارد بتنفيذ هذه الواجهة. يستدعي مدير المعاملات الأساليب المطبقة بالترتيب التالي. خلال المرحلة الأولى ، يطلق على الطريقة </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ما لم تجتمع النجوم لاستدعاء الطريقة </font></font><code>ISinglePhaseNotification.SinglePhaseCommit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، كما هو موضح في الفقرة التالية). بموجب هذه الطريقة ، يحفظ مدير الموارد المعلومات اللازمة للتعافي من الفشل ، ويستعد للالتزام النهائي بالتغييرات من جانبه ، ويصوت لارتكاب التغييرات أو التراجع عنها. إذا كان هناك يأتي في المرحلة الثانية، وهذا يتوقف على مدى توافر الموارد والسيطرة على نتائج التصويت للمعاملة السيطرة هي واحدة من ثلاث طرق: </font></font><code>Commit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، </font></font><code>InDoubt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، </font></font><code>Rollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISinglePhaseNotification.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يقوم مدير الموارد بتنفيذ هذه الواجهة إذا أراد تزويد مدير المعاملات بفرصة تحسين التنفيذ عن طريق تقليل مرحلة الالتزام الثانية. إذا رأى مدير المعاملة مدير موارد واحدًا فقط ، فسيحاول في مرحلة الالتزام الأولى طريقة مدير الموارد </font></font><code>SinglePhaseCommit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(بدلاً من ذلك </font></font><code>IEnlistmentNotification.Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) وبالتالي يستبعد التصويت والانتقال إلى المرحلة الثانية. هذا النهج له مزايا وعيوب ، والتي كتبها مايكروسوفت بوضوح أكثر عن </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هنا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ITransactionPromoter.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يقوم مدير الموارد بتنفيذ هذه الواجهة (ليس فقط مباشرة ، ولكن من خلال الواجهة</font></font><code>IPromotableSinglePhaseNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ، إذا كان يريد تزويد مدير المعاملات بالقدرة على الالتزام ببروتوكول Lightweight حتى عند الاتصال عن بُعد ، حتى تنشأ شروط أخرى تتطلب تعقيد البروتوكول. عندما تحتاج إلى تعقيد البروتوكول ، سيتم استدعاء الطريقة </font></font><code>Promote</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPromotableSinglePhaseNotification.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يقوم مدير الموارد بتنفيذ هذه الواجهة من أجل ، أولاً ، تنفيذ الواجهة </font></font><code>ITransactionPromoter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، وثانياً ، بحيث يمكن لمدير المعاملة استخدام الالتزام أحادي الطور وطرق الاتصال </font></font><code>IPromotableSinglePhaseNotification.SinglePhaseCommit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">و </font></font><code>IPromotableSinglePhaseNotification.Rollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. يستدعي مدير المعاملة طريقة </font></font><code>IPromotableSinglePhaseNotification.Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لتمييز التسجيل الناجح لمدير الموارد بطريقة مبسطة. أكثر أو أقل ، يمكن فهم ذلك من </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مستند Microsoft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">دعونا ننظر إلى أكثر من ذلك بقليل</font></font><code>System.Transactions.Enlistment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وورثته. يتم توفير هذا النوع من المثال بواسطة مدير المعاملات عندما يستدعي أساليب الواجهة التي يطبقها مدير الموارد.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qi/bd/xc/qibdxcddktegq5h2xnpuaelygj0.png"></div><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تجنيد. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن لمدير الموارد استدعاء طريقة واحدة من هذا النوع - </font></font><code>Done</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، - للإشارة إلى الإكمال الناجح لجزءه من العمل. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحضير التسجيل. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">باستخدام مثيل من هذا النوع أثناء مرحلة الالتزام الأولى ، يمكن لمدير الموارد الإشارة إلى نيته الالتزام بالتغييرات أو استرجاعها. </font><font style="vertical-align: inherit;">يمكن لمدير الموارد طويل العمر أيضًا الحصول على المعلومات اللازمة للتعافي من فشل النظام. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SinglePhaseEnlistment. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">باستخدام مثيل من هذا النوع ، يمكن لمدير الموارد إرسال المعلومات إلى مدير المعاملات حول نتائج عمله باستخدام نظام مبسط (التزام أحادي المرحلة).</font></font><br><br><a name="LimitationsAndAlternatives"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> البرمجيات الموزعة قيود المعاملات والبدائل </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تظهر دراسة موجزة للآراء الموجودة على الإنترنت أنه في العديد من المجالات ، تكون المعاملات الموزعة قديمة. ألقِ نظرة على </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذا التعليق الضار</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، على سبيل المثال </font><font style="vertical-align: inherit;">. الهدف الرئيسي من النقد ، والذي يتم ذكره </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هنا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لفترة وجيزة </font><font style="vertical-align: inherit;">، هو الطبيعة المتزامنة (للحظر) للمعاملات الموزعة. إذا أرسل المستخدم طلبًا أثناء معالجة العملية الموزعة التي تم تنظيمها ، فلن يتلقى ردًا إلا بعد (بنجاح أو مع وجود خطأ) جميع الأنظمة الفرعية المضمنة في المعاملة تنهي العمل. في الوقت نفسه ، هناك رأي يدعمه البحث بأن بروتوكول الالتزام على مرحلتين يظهر ضعف الأداء ، خاصة مع زيادة عدد الأنظمة الفرعية المشاركة في المعاملة ، كما هو مذكور ، على سبيل المثال ، في</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذا المنشور عن "حبري"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا كان منشئ النظام يفضل إعادة الإجابة إلى المستخدم في أقرب وقت ممكن ، مع تأجيل تنسيق البيانات في وقت لاحق ، فسيكون حل آخر أكثر ملاءمة له. في سياق نظرية Brewer's ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CAP theorem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ، يمكننا القول أن المعاملات الموزعة مناسبة للحالات التي يكون فيها تناسق البيانات أكثر أهمية من التوفر.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هناك قيود عملية أخرى على استخدام البرامج الموزعة المعاملات. على سبيل المثال ، تم إثبات أن المعاملات الموزعة باستخدام بروتوكول OleTx يجب ألا تتجاوز نطاقات الشبكة. في أي حال ، لم تنجح المحاولات الطويلة لحملهم على العمل. بالإضافة إلى ذلك ، تم الكشف عن أن التفاعل بين عدة مثيلات لقاعدة بيانات Oracle (معاملات قاعدة البيانات الموزعة) يفرض قيودًا شديدة على قابلية تطبيق المعاملات الموزعة للبرنامج (مرة أخرى ، فشل في البدء).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ما هي بدائل المعاملات الموزعة؟ أولاً ، يجب أن أقول أنه سيكون من الصعب للغاية الاستغناء عن المعاملات الفنية (عادي ، وليس موزع). من المحتمل أن تكون هناك عمليات في النظام يمكنها تعطيل سلامة البيانات مؤقتًا ، وسيكون من الضروري توفير الإشراف بطريقة ما على هذه العمليات. بالطريقة نفسها ، من ناحية مجال الموضوع ، قد ينشأ مفهوم يتضمن عملية تنفذها مجموعة من العمليات في أنظمة تقنية مختلفة ، والتي يجب أن تبدأ وتنتهي في مجال البيانات المتكاملة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بالانتقال إلى بدائل المعاملات الموزعة ، يمكننا أن نلاحظ الحلول القائمة على خدمات الرسائل ، مثل RabbitMQ و Apache Kafka. في </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذا المنشور على "Habré"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> أربعة حلول مثل:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   ,        ,    ; </li><li style=";text-align:right;direction:rtl">    ,           (Transaction Log Tailing); </li><li style=";text-align:right;direction:rtl">       ,       ; </li><li style=";text-align:right;direction:rtl">             (Event Sourcing). </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بديل آخر هو قالب الملحمة. أنها تنطوي على سلسلة من النظم الفرعية مع المعاملات المحلية. عند الانتهاء من العمل ، يستدعي كل نظام ما يلي (إما بشكل مستقل أو بمساعدة منسق). يوجد لكل معاملة معاملة إلغاء مقابلة ، وبدلاً من نقل السيطرة ، يمكن للنظام الفرعي بدء إلغاء التغييرات التي تم إجراؤها مسبقًا بواسطة الأنظمة الفرعية السابقة. في "Habré" هناك بعض المقالات الجيدة عن قالب "Saga". على سبيل المثال ، </font><font style="vertical-align: inherit;">يوفر </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذا المنشور</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> معلومات عامة حول الحفاظ على مبادئ ACID في الخدمات المصغرة ، وتفصل </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذه المقالة</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مثالًا لتطبيق قالب Saga مع منسق.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في شركتنا ، تستخدم بعض المنتجات بنجاح المعاملات الموزعة عبر البرامج من خلال WCF ، ولكن هناك خيارات أخرى. مرة واحدة ، عندما حاولنا تكوين صداقات بنظام جديد مع المعاملات الموزعة ، واجهنا العديد من المشكلات ، بما في ذلك الاصطدام بالقيود الموضحة أعلاه والمشاكل الموازية في تحديث البنية الأساسية للبرنامج. لذلك ، في ظروف النقص في الموارد للتشغيل في قرار رأسمالي آخر ، طبقنا التكتيكات التالية. يلتقط الطرف المتصل التغييرات في أي حال ، لكنه يشير إلى أنها في حالة مسودة ، لذلك لا تؤثر هذه التغييرات بعد على تشغيل النظام الذي تم الاتصال به. بعد ذلك ، يقوم المتصل ، عند الانتهاء من عمله من خلال معاملة موزعة ، بتنشيط التغييرات التي أجراها النظام المتصل. بهذه الطريقةبدلاً من المعاملات الموزعة بواسطة البرامج ، استخدمنا معاملات DBMS الموزعة ، والتي تبين في هذه الحالة أنها أكثر موثوقية.</font></font><br><br><a name="NetCore"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هل هو كذلك في .NET Core؟ </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في .NET Core (وحتى في .NET Standard) ، توجد جميع الأنواع اللازمة لتنظيم المعاملات وإنشاء مدير الموارد الخاص بك. </font><font style="vertical-align: inherit;">لسوء الحظ ، في .NET Core ، المعاملات القائمة </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لها قيود خطيرة: إنها تعمل فقط مع بروتوكول Lightweight. </font><font style="vertical-align: inherit;">على سبيل المثال ، إذا تم استخدام مديري موارد متينين في التعليمات البرمجية ، ثم في وقت التشغيل ، ستخلق البيئة استثناء بمجرد استدعاء المدير الثاني.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحقيقة هي أنهم يحاولون جعل .NET Core مستقلًا عن نظام التشغيل ، لذلك يتم استبعاد الارتباط إلى مديري المعاملات مثل KTM و MSDTC ، أي أنها ضرورية لدعم المعاملات مع الخصائص المحددة. </font><font style="vertical-align: inherit;">من الممكن أن يتم تنفيذ اتصال مديري المعاملات في شكل مكونات إضافية ، ولكن حتى الآن تمت كتابة هذا الأمر باستخدام مذعور ، لذلك لا يمكنك الاعتماد على الاستخدام الصناعي للمعاملات الموزعة في .NET Core حتى الآن. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">من التجربة ، يمكنك التحقق من الاختلافات في المعاملات الموزعة في .NET Framework وفي .NET Core عن طريق كتابة نفس الرمز وتجميعه وتشغيله على منصات مختلفة.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مثال على هذه التعليمة البرمجية التي تستدعي SQL Server و Oracle Database بالتسلسل.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Transactions.TransactionScope(System.Transactions.TransactionScopeOption.Required)) { MsSqlServer(); Oracle(); scope.Complete(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Oracle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Oracle.ManagedDataAccess.Client.OracleConnection(<span class="hljs-string"><span class="hljs-string">"User Id=some_user;Password=some_password;Data Source=some_db"</span></span>)) { conn.Open(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cmd = conn.CreateCommand()) { cmd.CommandText = <span class="hljs-string"><span class="hljs-string">"update t_hello set id_hello = 2 where id_hello = 1"</span></span>; cmd.ExecuteNonQuery(); } conn.Close(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MsSqlServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Data.SqlClient.SqlConnectionStringBuilder { DataSource = <span class="hljs-string"><span class="hljs-string">"some_computer\\some_db"</span></span>, UserID = <span class="hljs-string"><span class="hljs-string">"some_user"</span></span>, Password = <span class="hljs-string"><span class="hljs-string">"some_password"</span></span>, InitialCatalog = <span class="hljs-string"><span class="hljs-string">"some_scheme"</span></span>, Enlist = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Data.SqlClient.SqlConnection(builder.ConnectionString)) { conn.Open(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cmd = conn.CreateCommand()) { cmd.CommandText = <span class="hljs-string"><span class="hljs-string">"update t_hello set id_hello = 2 where id_hello = 1"</span></span>; cmd.ExecuteNonQuery(); } conn.Close(); } }</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مشاريع جاهزة </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">للبناء على جيثب</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تشغيل المثال ل. NET الأساسية فشل. </font><font style="vertical-align: inherit;">يعتمد مكان ونوع الاستثناء الذي تم طرحه على ترتيب استدعاء DBMS ، ولكن على أي حال ، يشير هذا الاستثناء إلى عملية معاملة غير صالحة. </font><font style="vertical-align: inherit;">ينجح تشغيل مثال .NET Framework إذا كان MSDTC يعمل في هذا الوقت ؛ </font><font style="vertical-align: inherit;">ومع ذلك ، في الواجهة الرسومية لـ MSDTC ، يمكنك مراقبة تسجيل معاملة موزعة.</font></font><br><br><a name="WCF"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المعاملات الموزعة و WCF </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Communication Foundation (WCF) هو إطار عمل .NET لتنظيم واستدعاء خدمات الشبكة. بالمقارنة مع أساليب REST و ASP.NET Web API الأكثر عصرية ، فإن له مزايا وعيوب خاصة به. يعتبر WCF صديقًا جيدًا مع معاملات .NET ، وفي عالم .NET Framework ، من الملائم استخدامه لتنظيم المعاملات الموزعة بين العميل والخدمة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في .NET Core ، تعمل هذه التقنية فقط من جانب العميل ، أي أنه لا يمكنك إنشاء خدمة ، لكن يمكنك فقط الرجوع إلى واحدة موجودة. ومع ذلك ، هذا ليس مهمًا للغاية ، لأنه ، كما ذكر أعلاه ، مع المعاملات الموزعة في .NET Core ، فإن الأمور لا تعمل بشكل جيد على الإطلاق. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كيف يعمل WCF</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">للقراء الذين ليسوا على دراية بـ WCF ، فيما يلي أقصر معلومات أساسية حول ماهية هذه التكنولوجيا في الممارسة. السياق - نظامان للمعلومات يسمى العميل والخدمة. يصل العميل في وقت التشغيل إلى نظام معلومات آخر يدعم الخدمة التي تهم العميل ، ويتطلب إجراء بعض العمليات. ثم يتم إرجاع الإدارة إلى العميل.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لإنشاء خدمة على WCF ، تحتاج عادةً إلى كتابة واجهة تصف عقد الخدمة التي يتم إنشاؤها وفئة تنفذ هذه الواجهة. يتم تمييز الفئة والواجهة بسمات WCF خاصة تميزها عن باقي الأنواع وتحدد بعض تفاصيل السلوك أثناء اكتشاف الخدمة واستدعاءها. يتم التفاف هذه الأنواع في شيء يعمل كخادم (على سبيل المثال ، في مكتبة الارتباط الحيوي (DLL) التي يتم ضبط IIS عليها) ، ويتم استكمالها بملف تكوين (توجد خيارات) ، حيث تتم الإشارة إلى تفاصيل تنفيذ الخدمة. بعد البدء ، يمكن الوصول إلى الخدمة ، على سبيل المثال ، على عنوان الشبكة ؛ في متصفح الإنترنت ، يمكنك رؤية العقود التي تنفذها الخدمة المطلوبة.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يستخدم المبرمج الذي يريد الوصول إلى خدمة WCF موجودة أداة مساعدة لوحدة التحكم أو واجهة رسومية مضمنة في بيئة التطوير من أجل تشكيل أنواع في C # (أو بلغة أخرى مدعومة) تتوافق مع عقود الخدمة على عنوان الخدمة. يتم تضمين الملف مع الأنواع التي تم الحصول عليها في مشروع تطبيق العميل ، وبعد ذلك يستخدم المبرمج نفس المصطلحات الموجودة في واجهة الخدمة ، ويتمتع بمزايا التقدم (الكتابة الثابتة). بالإضافة إلى ذلك ، يحدد ملف التكوين الخاص بالعميل الخصائص التقنية للخدمة المسماة (يمكن أيضًا تهيئتها في الكود ، بدون ملف التهيئة).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يدعم WCF أنواعًا مختلفة من النقل والتشفير وغيرها من المعلمات التقنية الدقيقة. </font><font style="vertical-align: inherit;">معظمهم متحدون بمفهوم "الربط" (Binding). </font><font style="vertical-align: inherit;">هناك ثلاث معلمات مهمة لخدمة WCF:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> العنوان الذي يتوفر فيه </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ملزم </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> العقد (واجهات). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يتم تعيين كل هذه المعلمات في ملفات تكوين الخدمة والعميل. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في شركتنا ، يستخدم WCF (مع وبدون معاملات موزعة) على نطاق واسع في المنتجات المنفذة ، ومع ذلك ، بالنظر إلى اتجاهات الموضة ، لا يزال استخدامه في منتجات جديدة قيد البحث. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كيفية بدء المعاملات الموزعة في WCF</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لبدء المعاملات القائمة في WCF </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، يحتاج المبرمج إلى تعيين العديد من السمات في الكود ، وتأكد من أن الارتباطات المستخدمة تدعم المعاملات الموزعة ، وأنه مكتوب على العميل وفي الخدمة ، </font></font><code>transactionFlow="true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وأن مدير معاملة مناسب يعمل على جميع أجهزة الكمبيوتر المعنية (على الأرجح ، سيكون MSDTC).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">روابط المعاملات الموزعة: NetTcpBinding و NetNamedPipeBinding و WSHttpBinding و WSDualHttpBinding و WSFederationHttpBinding. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يجب تمييز طريقة (تشغيل) واجهة الخدمة بسمة </font></font><code>System.ServiceModel.TransactionFlowAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">بعد ذلك ، مع بعض معلمات السمات وعند تعيين معلمة </font></font><code>TransactionScopeRequired</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السمة </font><font style="vertical-align: inherit;">، </font></font><code>System.ServiceModel.OperationBehaviorAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">سيتم توزيع المعاملة بين العميل والخدمة. </font><font style="vertical-align: inherit;">بالإضافة إلى ذلك ، بشكل افتراضي ، تعتبر الخدمة للتصويت على الالتزام بالمعاملة ، ما لم يتم طرح استثناء في وقت التشغيل. </font><font style="vertical-align: inherit;">لتغيير هذا السلوك ، يجب عليك تعيين قيمة معلمة </font></font><code>TransactionAutoComplete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السمة </font><font style="vertical-align: inherit;">المقابلة </font></font><code>System.ServiceModel.OperationBehaviorAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الكود الخاص بخدمة WCF البسيطة التي تدعم المعاملات الموزعة.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">System.ServiceModel.ServiceContract</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IMyService</span></span> { [System.ServiceModel.OperationContract] [System.ServiceModel.TransactionFlow(System.ServiceModel.TransactionFlowOption.Mandatory)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyService</span></span> : <span class="hljs-title"><span class="hljs-title">IMyService</span></span> { [System.ServiceModel.OperationBehavior(TransactionScopeRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] [System.ServiceModel.TransactionFlow(System.ServiceModel.TransactionFlowOption.Mandatory)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(input)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input.Length; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">من الواضح ، أنه يختلف عن رمز الخدمة العادية فقط في استخدام السمة </font></font><code>System.ServiceModel.TransactionFlow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وفي الإعداد الخاص للسمة </font></font><code>System.ServiceModel.OperationBehavior</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تكوين عينة لهذه الخدمة.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;system.serviceModel&gt; &lt;services&gt; &lt;service name=<span class="hljs-string"><span class="hljs-string">"WcfWithTransactionsExample.MyService"</span></span> behaviorConfiguration=<span class="hljs-string"><span class="hljs-string">"serviceBehavior"</span></span>&gt; &lt;endpoint address=<span class="hljs-string"><span class="hljs-string">""</span></span> binding=<span class="hljs-string"><span class="hljs-string">"wsHttpBinding"</span></span> bindingConfiguration=<span class="hljs-string"><span class="hljs-string">"mainWsBinding"</span></span> contract=<span class="hljs-string"><span class="hljs-string">"WcfWithTransactionsExample.IMyService"</span></span>/&gt; &lt;endpoint address=<span class="hljs-string"><span class="hljs-string">"mex"</span></span> contract=<span class="hljs-string"><span class="hljs-string">"IMetadataExchange"</span></span> binding=<span class="hljs-string"><span class="hljs-string">"mexHttpBinding"</span></span>/&gt; &lt;/service&gt; &lt;/services&gt; &lt;bindings&gt; &lt;wsHttpBinding&gt; &lt;binding name=<span class="hljs-string"><span class="hljs-string">"mainWsBinding"</span></span> maxReceivedMessageSize=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span> maxBufferPoolSize=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span> transactionFlow=<span class="hljs-string"><span class="hljs-string">"true"</span></span> closeTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span> openTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span> receiveTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span> sendTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span>&gt; &lt;security mode=<span class="hljs-string"><span class="hljs-string">"None"</span></span>/&gt; &lt;readerQuotas maxArrayLength=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span> maxStringContentLength=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span>/&gt; &lt;/binding&gt; &lt;/wsHttpBinding&gt; &lt;/bindings&gt; &lt;/system.serviceModel&gt;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لاحظ أن الربط من النوع WSHttpBinding ويتم استخدام السمة </font></font><code>transactionFlow="true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br></div></div><br><a name="TLDR3"></a><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TL ؛ قسم DR </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تتضمن المعاملات الموزعة العديد من مديري الموارد ، ويجب إما الالتزام بجميع التغييرات أو التراجع عنها. تقوم بعض نظم إدارة قواعد البيانات الحديثة بتطبيق المعاملات الموزعة التي توفر آلية ملائمة لربط العديد من قواعد البيانات. قد تشمل المعاملات الموزعة للبرامج (غير مطبقة في نظم إدارة قواعد البيانات) مجموعات مختلفة من مديري الموارد على أجهزة كمبيوتر مختلفة تشغل أنظمة تشغيل مختلفة ، لكن لديها قيود يجب أخذها في الاعتبار قبل الاعتماد عليها. البديل الحديث للمعاملات الموزعة هو حلول الرسائل. في .NET Core ، لا يتم دعم المعاملات الموزعة بعد.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WCF هي إحدى الأدوات القياسية والمثبتة لإنشاء الخدمات والوصول إليها في عالم .NET ، حيث تدعم عدة أنواع من النقل والتشفير. </font><font style="vertical-align: inherit;">WCF صديقان حميمان للغاية مع المعاملات الموزعة على أساس </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">يتمثل إعداد المعاملات الموزعة لـ WCF في ترميز الرمز بعدة سمات وإضافة كلمتين في ملفات تكوين الخدمة والعميل. </font><font style="vertical-align: inherit;">ليست كل روابط WCF تدعم المعاملات الموزعة. </font><font style="vertical-align: inherit;">بالإضافة إلى ذلك ، من الواضح أن المعاملات في WCF لها نفس القيود دون استخدام WCF. </font><font style="vertical-align: inherit;">يتيح لك .NET Framework الأساسي حتى الآن الوصول إلى الخدمات على WCF فقط ، بدلاً من إنشائها.</font></font><br><br><a name="Conclusion"></a><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> خاتمة سرير </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذا المنشور هو لمحة عامة عن أساسيات معاملات برامج .NET. يمكن العثور على بعض الاستنتاجات المتعلقة بالاتجاهات في معاملات البرامج في الأقسام المتعلقة بقابلية التطبيق والقيود المفروضة على الموضوعات التي تمت مناقشتها ، وفي الختام ، يتم تجميع الرسائل الرئيسية للنشر. أفترض أنه يمكن استخدامها كورقة غش عند النظر في معاملات البرامج كواحدة من الخيارات لتطبيق نظام فني أو لتحديث المعلومات ذات الصلة في الذاكرة. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المعاملات (الموضوع ، DBMS ، البرمجيات)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. تتم صياغة متطلبات المجال في بعض الأحيان في شكل معاملات - العمليات ، التي تبدأ في مجال البيانات المتكاملة ، عند الانتهاء (بما في ذلك غير ناجحة) يجب أن تدخل أيضًا في مجال البيانات المتكاملة (ربما تكون مختلفة بالفعل). عادة ما يتم تنفيذ هذه المتطلبات كمعاملات النظام. مثال كلاسيكي للمعاملة هو تحويل الأموال بين حسابين ، يتألف من عمليتين غير قابلتين للتجزئة - سحب الأموال من حساب والاعتماد على حساب آخر. بالإضافة إلى المعاملات المعروفة التي تنفذها DBMS ، هناك أيضًا معاملات برمجية ، على سبيل المثال ، في عالم .NET. مديرو الموارد هم مكونات برمجية تدرك وجود مثل هذه المعاملات ولديها القدرة على أن تدرج فيها ، أي التغييرات التي ارتكبت أو استرجاعها.يتلقى مديرو الموارد إرشادات حول تنفيذ التغييرات التي تم إجراؤها من مدير المعاملات ، والتي تعد الأساس للبنية التحتية</font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مديري الموارد دائمة ومتقطعة.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يدعم مديرو الموارد طويلة الأجل استعادة البيانات بعد فشل النظام. عادة ما تقدم برامج تشغيل DBMS لـ .NET هذه الوظائف. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لا</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تدعم </font><font style="vertical-align: inherit;">مديري الموارد المتقطعة </font><font style="vertical-align: inherit;">الاسترداد بعد عطل فادح. يمكن اعتبار ذاكرة المعاملات البرنامجية - طريقة لإدارة الكائنات في RAM - كمثال لمدير الموارد المتقلب. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المعاملات ومديري الموارد الصافية.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يستخدم مبرمج .NET معاملات البرامج ويقوم بإنشاء مديري موارده باستخدام أنواع من مساحة الاسم</font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. تسمح هذه البنية التحتية باستخدام معاملات التداخل والعزل (مع وجود قيود معروفة). استخدام المعاملات ليس معقدًا ، وهو يتألف من لف الكود في كتلة </font></font><code>using</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ذات خصائص معينة. ومع ذلك ، يجب على مديري الموارد المدرجة بهذه الطريقة في المعاملة الحفاظ على الوظيفة المطلوبة من جانبهم. يمكن أن يؤدي استخدام مديري الموارد غير المتجانسة في إحدى المعاملات أو استخدام مدير واحد بطرق مختلفة إلى تحويل المعاملة تلقائيًا إلى معاملة موزعة. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المعاملات الموزعة (DBMS ، البرامج).</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تغطي المعاملة الموزعة العديد من النظم الفرعية ، التغييرات التي يجب أن تتم مزامنتها ، أي أنها إما ملتزمة معًا أو يتم التراجع عنها. يتم تنفيذ المعاملات الموزعة في بعض نظم إدارة قواعد البيانات الحديثة. المعاملات الموزعة بواسطة البرامج (هذه ليست تلك التي يتم تنفيذها بواسطة DBMS) تفرض قيودًا إضافية على العمليات والأنظمة التفاعلية. المعاملات الموزعة تتلاشى تدريجياً ، وتفسح المجال أمام الحلول القائمة على خدمات المراسلة. لتحويل معاملة عادية إلى معاملة موزعة ، لا يحتاج المبرمج إلى فعل أي شيء: عندما يتم تضمين مدير موارد له خصائص معينة في المعاملة في وقت التشغيل ، سيقوم مدير المعاملة تلقائيًا بكل ما هو مطلوب. تتوفر معاملات البرامج العادية في .NET Core و .NET Standard ، والمعاملات الموزعة غير متوفرة.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المعاملات الموزعة من خلال WCF. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WCF هو أحد أدوات .NET القياسية لإنشاء خدمات استدعاء ، والتي تدعم أيضًا البروتوكولات الموحدة. </font><font style="vertical-align: inherit;">بمعنى آخر ، يمكن الوصول إلى خدمات WCF التي تم تكوينها بطريقة محددة من أي تطبيق ، وليس فقط .NET أو Windows. </font><font style="vertical-align: inherit;">لإنشاء معاملة موزعة على رأس WCF ، تحتاج إلى ترميز الأنواع التي تشكل الخدمة بسمات إضافية وإجراء تغييرات طفيفة على ملفات تكوين الخدمة والعميل. </font><font style="vertical-align: inherit;">لا يمكنك إنشاء خدمات WCF في .NET Core و .NET Standard ، ولكن يمكنك إنشاء عملاء WCF. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مثال لفحص System.Tactactions على جيثب</font></font></a> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">المراجع</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المفاهيم الأساسية </font></font></h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ويكيبيديا الروسية) </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خوارزمية الالتزام على مرحلتين</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (وثائق Microsoft) </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الالتزام أحادي الطور</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (وثائق Microsoft) </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">برنامج ذاكرة المعاملات</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ويكيبيديا الروسية) </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نظرية Brewer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ويكيبيديا الروسية) </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التزام من ثلاث مراحل</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ويكيبيديا الإنجليزية)</font></font><br><br><h4 style=";text-align:right;direction:rtl">     </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   X/Open XA</a> ( The Open Group) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Java Transaction API</a> ( «») <br> <a href="">     Cache</a> (  InterSystems) <br><br><h4 style=";text-align:right;direction:rtl">   .NET </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   .NET</a> (   Tech Blog Collection) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">     TransactionScope</a> («») <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  ,     </a> ( Microsoft) <br> <a href="">   .NET Standard 2.0</a> ( .NET Standard  GitHub) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">       </a> ( YarFullStack) <br><br><h4 style=";text-align:right;direction:rtl">    </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">     </a> («») <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">     </a> («») <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    «»     </a> («») <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">     «»  </a> («») <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    </a> («») <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الافتتاحية</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> 20.12.2018 . </li><li style=";text-align:right;direction:rtl"> 21.12.2018  .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">OlegAxenow</a> . </li><li style=";text-align:right;direction:rtl"> 23.12.2018      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">qw1</a> . </li></ul><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar433136/">https://habr.com/ru/post/ar433136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar433122/index.html">React-Hot-Loader v4.6</a></li>
<li><a href="../ar433126/index.html">مراجعة Zabbix: كيفية تنظيم مراجعة التعليمات البرمجية لمراقبة التكوين</a></li>
<li><a href="../ar433128/index.html">ما يلعبه محترفي تكنولوجيا المعلومات ولا يلعبون (نشرة 2018)</a></li>
<li><a href="../ar433130/index.html">قد تكون معنا: حصانة خاصة بنا ضد السرطان</a></li>
<li><a href="../ar433132/index.html">"التقويم تستر" لشهر ديسمبر. جرب طريقة مختلفة</a></li>
<li><a href="../ar433138/index.html">خمسة مبادئ لتصميم المنتج في الحجز</a></li>
<li><a href="../ar433140/index.html">جاهز Google Pay Client Module</a></li>
<li><a href="../ar433142/index.html">الكلاسيكيات الخالدة ، أو لمحة عامة عن متجهات الهجوم الجديدة من خلال Microsoft Office</a></li>
<li><a href="../ar433144/index.html">تم إصدار .NET Core 2.2. ما الجديد؟ (1 من 3)</a></li>
<li><a href="../ar433146/index.html">[المنافسة] أعلى 25 لعبة لوحات المفاتيح (هز العصور القديمة)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>