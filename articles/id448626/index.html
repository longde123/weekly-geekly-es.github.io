<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔰 🐨 👮 DDoS untuk membantu: bagaimana kita melakukan tes stres dan stres 😒 🚧 🔡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Variti mengembangkan perlindungan terhadap serangan bot dan DDoS, dan juga melakukan pengujian tegangan dan beban. Pada konferensi HighLoad ++ 2018, k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DDoS untuk membantu: bagaimana kita melakukan tes stres dan stres</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/variti/blog/448626/"><img src="https://habrastorage.org/webt/ze/th/rb/zethrbwkfxc_3voyzfevkonnzao.png"><br><br>  <i>Variti mengembangkan perlindungan terhadap serangan bot dan DDoS, dan juga melakukan pengujian tegangan dan beban.</i>  <i>Pada konferensi HighLoad ++ 2018, kami berbicara tentang cara mengamankan sumber daya dari berbagai jenis serangan.</i>  <i>Singkatnya: mengisolasi bagian-bagian sistem, menggunakan layanan cloud dan CDN dan memperbarui secara teratur.</i>  <i>Tetapi tanpa perusahaan khusus, perlindungan Anda masih tidak bisa :)</i> <br><a name="habracut"></a><br>  Sebelum membaca teks, Anda dapat membiasakan diri dengan abstrak singkat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di situs web konferensi</a> . <br>  Dan jika Anda tidak suka membaca atau hanya ingin menonton video, rekaman laporan kami berada di bawah spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Laporkan video</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/Lu4tsUvfYRc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  Banyak perusahaan sudah tahu bagaimana melakukan stress testing, tetapi tidak semua melakukan stress testing.  Beberapa pelanggan kami berpikir bahwa situs mereka kebal karena mereka memiliki sistem beban tinggi dan melindungi terhadap serangan.  Kami menunjukkan bahwa ini tidak sepenuhnya benar. <br><br>  Tentu saja, sebelum melakukan tes, kami mendapatkan izin dari pelanggan, ditandatangani dan dicap, dan dengan bantuan kami, kami tidak dapat melakukan serangan DDoS pada siapa pun.  Pengujian dilakukan pada waktu yang dipilih oleh pelanggan, ketika kehadiran sumber dayanya minimal, dan masalah akses tidak akan mempengaruhi pelanggan.  Selain itu, karena sesuatu selalu dapat salah selama proses pengujian, kami memiliki kontak yang konstan dengan pelanggan.  Hal ini memungkinkan tidak hanya untuk melaporkan hasil yang dicapai, tetapi juga untuk mengubah sesuatu selama pengujian.  Pada akhir pengujian, kami selalu menyusun laporan di mana kami menunjukkan kelemahan yang ditemukan dan memberikan rekomendasi untuk menghilangkan kelemahan situs. <br><br><h3>  Bagaimana kita bekerja </h3><br>  Selama pengujian, kami meniru botnet.  Karena kami bekerja dengan klien yang tidak berada di jaringan kami, sehingga pengujian tidak berakhir pada menit pertama karena memicu batas atau perlindungan, kami memuat beban bukan dari satu IP, tetapi dari subnet kami sendiri.  Plus, untuk membuat beban yang signifikan, kami memiliki server uji kami sendiri yang agak kuat. <br><br><h3>  Postulat </h3><br><blockquote>  <b>Banyak yang tidak baik</b> <br><br>  Semakin sedikit beban yang dapat kami bawa ke sumber daya gagal, semakin baik.  Jika Anda berhasil membuat situs berhenti berfungsi dari satu permintaan per detik, atau bahkan dari satu permintaan per menit, itu tidak masalah.  Karena menurut hukum kekejaman, pengguna atau penyerang tidak sengaja jatuh ke dalam kerentanan ini. </blockquote><blockquote> <b>Kegagalan sebagian lebih baik daripada kegagalan total</b> <br><br>  Kami selalu menyarankan agar sistem menjadi heterogen.  Selain itu, ada baiknya memisahkan mereka di tingkat fisik, dan bukan hanya kemasukan.  Dalam hal pemisahan fisik, bahkan jika sesuatu gagal di situs, kemungkinan itu tidak akan berhenti berfungsi sepenuhnya, dan pengguna masih akan memiliki akses ke setidaknya sebagian dari fungsi tersebut. </blockquote><blockquote>  <b>Arsitektur yang tepat adalah fondasi keberlanjutan</b> <br><br>  Toleransi kesalahan sumber daya dan kemampuannya untuk menahan serangan dan beban harus diletakkan pada tahap desain, pada kenyataannya, pada tahap menggambar diagram blok pertama dalam buku catatan.  Karena jika kesalahan fatal muncul, Anda dapat memperbaikinya di masa mendatang, tetapi ini sangat sulit. </blockquote><blockquote>  <b>Tidak hanya kode yang baik, tetapi juga konfigurasi</b> <br><br>  Banyak orang berpikir bahwa tim pengembangan yang baik adalah jaminan ketahanan layanan.  Tim pengembangan yang baik benar-benar diperlukan, tetapi harus juga ada operasi yang baik, DevOps yang baik.  Artinya, kami membutuhkan spesialis yang mengkonfigurasi Linux dan jaringan dengan benar, menulis konfigurasi dengan benar di nginx, mengkonfigurasi batas, dan lainnya.  Jika tidak, sumber daya hanya akan berfungsi dengan baik pada pengujian, dan dalam produksi pada titik tertentu semuanya akan rusak. </blockquote><blockquote>  <b>Perbedaan antara stress dan stress testing</b> <br><br>  Pengujian beban memungkinkan Anda mengidentifikasi batasan sistem.  Stress testing bertujuan untuk menemukan kelemahan sistem dan digunakan untuk memecah sistem ini dan melihat bagaimana ia akan berperilaku dalam proses kegagalan bagian-bagian tertentu.  Pada saat yang sama, sifat beban biasanya tetap tidak diketahui pelanggan sampai dimulainya pengujian tegangan. </blockquote><h3>  Fitur khas dari serangan L7 </h3><br>  Kami biasanya membagi jenis beban menjadi beban pada level L7 dan L3 &amp; 4.  L7 adalah beban pada level aplikasi, paling sering dipahami hanya sebagai HTTP, tetapi yang kami maksud adalah setiap beban pada level protokol TCP. <br><br>  Serangan L7 memiliki fitur pembeda tertentu.  Pertama, mereka datang langsung ke aplikasi, yaitu, tidak mungkin bahwa mereka dapat tercermin melalui jaringan.  Serangan semacam itu menggunakan logika, dan karena ini mereka mengkonsumsi CPU, memori, disk, basis data dan sumber daya lainnya dengan sangat efisien dan dengan sedikit lalu lintas. <br><br><h3>  HTTP Flood </h3><br>  Dalam kasus serangan apa pun, beban lebih mudah dibuat daripada ditangani, dan dalam kasus L7 ini juga benar.  Lalu lintas serangan tidak selalu mudah dibedakan dari yang sah, dan paling sering dapat dilakukan berdasarkan frekuensi, tetapi jika semuanya direncanakan dengan benar, maka tidak mungkin untuk memahami di mana serangan itu dan di mana permintaan yang sah berasal dari log. <br><br>  Sebagai contoh pertama, pertimbangkan serangan HTTP Flood.  Grafik menunjukkan bahwa biasanya serangan seperti itu sangat kuat, dalam contoh di bawah jumlah permintaan puncak melebihi 600 ribu per menit. <br><br><img src="https://habrastorage.org/webt/rl/-i/qz/rl-iqze06e8bg4epyzgcsfpwddu.png"><br><br>  HTTP Flood adalah cara termudah untuk membuat beban.  Biasanya, beberapa jenis alat pengujian beban diambil untuknya, misalnya, ApacheBench, dan permintaan serta tujuannya ditetapkan.  Dengan pendekatan sederhana seperti itu, kemungkinan akan mengalami caching server, tetapi mudah untuk disiasati.  Misalnya, menambahkan garis acak ke kueri, yang memaksa server untuk selalu memberikan halaman baru. <br>  Juga, jangan lupa tentang agen-pengguna dalam proses pembuatan suatu beban.  Banyak agen pengguna alat pengujian populer difilter oleh administrator sistem, dan dalam hal ini, beban mungkin tidak mencapai backend.  Anda dapat secara signifikan meningkatkan hasilnya dengan memasukkan header yang kurang lebih valid dari browser ke dalam permintaan. <br>  Untuk semua kesederhanaannya, serangan HTTP Flood memiliki kelemahan.  Pertama, kapasitas besar diperlukan untuk membuat beban.  Kedua, serangan seperti itu sangat mudah dideteksi, terutama jika berasal dari alamat yang sama.  Akibatnya, permintaan segera mulai difilter baik oleh administrator sistem, atau bahkan di tingkat penyedia. <br><br><h3>  Apa yang harus dicari </h3><br>  Untuk mengurangi jumlah permintaan per detik dan tetap tidak kehilangan efisiensi, Anda perlu menunjukkan sedikit imajinasi dan menjelajahi situs.  Jadi, Anda tidak hanya dapat memuat saluran atau server, tetapi juga setiap bagian aplikasi, misalnya, basis data atau sistem file.  Anda juga dapat mencari tempat di situs yang melakukan perhitungan besar: kalkulator, halaman pemilihan produk, dan banyak lagi.  Akhirnya, sering terjadi bahwa ada skrip php di situs yang menghasilkan halaman beberapa ratus ribu baris.  Skrip seperti itu juga memuat server secara berat dan dapat menjadi target serangan. <br><br><h3>  Di mana mencarinya </h3><br>  Ketika kita memindai sumber daya sebelum pengujian, pertama-tama kita melihat, tentu saja, di situs itu sendiri.  Kami mencari semua jenis bidang input, file berat - secara umum, semua yang dapat membuat masalah untuk sumber daya dan memperlambat operasinya.  Di sini, alat pengembangan biasa di Google Chrome dan Firefox membantu menunjukkan waktu respons halaman. <br><br>  Kami juga memindai subdomain.  Misalnya, ada toko online tertentu, abc.com, dan memiliki subdomain admin.abc.com.  Kemungkinan besar, ini adalah panel admin dengan otorisasi, tetapi jika Anda memasukkan beban ke dalamnya, maka hal itu dapat menimbulkan masalah bagi sumber daya utama. <br><br>  Situs ini mungkin memiliki subdomain api.abc.com.  Kemungkinan besar, ini adalah sumber daya untuk aplikasi seluler.  Aplikasi ini dapat ditemukan di App Store atau Google Play, meletakkan titik akses khusus, membedah API dan mendaftarkan akun pengujian.  Masalahnya adalah bahwa sering orang berpikir bahwa segala sesuatu yang dilindungi oleh otorisasi kebal terhadap penolakan serangan layanan.  Diduga, otorisasi adalah CAPTCHA terbaik, tetapi tidak.  Membuat 10-20 akun pengujian itu mudah, dan dengan membuatnya, kami mendapatkan akses ke fungsionalitas yang kompleks dan tidak disembunyikan. <br><br>  Secara alami, kita melihat sejarah, di robots.txt dan WebArchive, ViewDNS, kami mencari versi lama dari sumber.  Kadang-kadang terjadi bahwa pengembang meluncurkan, katakanlah, mail2.yandex.net, tetapi versi lama, mail.yandex.net, tetap ada.  Mail.yandex.net ini tidak lagi didukung, sumber daya pengembangan tidak dialokasikan untuk itu, tetapi terus mengkonsumsi database.  Dengan demikian, menggunakan versi lama, Anda dapat secara efektif menggunakan sumber daya backend dan segala sesuatu yang ada di balik tata letak.  Tentu saja, ini tidak selalu terjadi, tetapi kita masih sering menghadapi hal seperti ini. <br><br>  Secara alami, kami membedah semua parameter permintaan, struktur cookie.  Anda dapat, katakanlah, mendorong beberapa nilai ke dalam array JSON di dalam cookie, membuat lebih banyak sarang dan membuat sumber daya bekerja terlalu lama. <br><br><h3>  Cari beban </h3><br>  Hal pertama yang terlintas dalam pikiran ketika meneliti sebuah situs adalah memuat basis data, karena hampir setiap orang memiliki pencarian, dan hampir setiap orang memilikinya, sayangnya, tidak terlindungi dengan baik.  Untuk beberapa alasan, para pengembang tidak cukup memperhatikan pencarian.  Tetapi ada satu rekomendasi - jangan membuat jenis permintaan yang sama, karena Anda mungkin mengalami caching, seperti halnya dengan HTTP float. <br><br>  Membuat kueri acak ke dalam basis data juga tidak selalu efisien.  Jauh lebih baik untuk membuat daftar kata kunci yang relevan dengan pencarian.  Jika Anda kembali ke contoh toko online: misalkan situs menjual ban mobil dan memungkinkan Anda untuk mengatur jari-jari ban, jenis mobil dan parameter lainnya.  Dengan demikian, kombinasi kata-kata yang relevan akan membuat database bekerja dalam kondisi yang jauh lebih kompleks. <br><br>  Selain itu, layak menggunakan pagination: jauh lebih sulit bagi pencarian untuk mengembalikan halaman kedua dari masalah daripada yang pertama.  Artinya, dengan bantuan pagination, Anda dapat melakukan diversifikasi sedikit. <br><br>  Dalam contoh di bawah ini, kami menunjukkan beban dalam pencarian.  Dapat dilihat bahwa dari detik pertama pengujian dengan kecepatan sepuluh permintaan per detik, situs turun dan tidak merespons. <br><br><img src="https://habrastorage.org/webt/dg/bu/oa/dgbuoarg4u2ufo9_jw1w2nxkurq.png"><br><br><h3>  Jika tidak ada pencarian? </h3><br>  Jika tidak ada pencarian, ini tidak berarti bahwa situs tersebut tidak mengandung bidang input rentan lainnya.  Bidang ini mungkin otorisasi.  Sekarang pengembang suka membuat hash yang kompleks untuk melindungi basis data masuk dari serangan pada tabel pelangi.  Ini bagus, tetapi hash seperti itu menghabiskan sumber daya CPU yang besar.  Aliran besar otorisasi palsu menyebabkan kegagalan prosesor, dan sebagai hasilnya, situs berhenti bekerja pada output. <br><br>  Kehadiran di situs semua jenis formulir untuk komentar dan umpan balik adalah kesempatan untuk mengirim teks yang sangat besar di sana atau hanya membuat banjir besar.  Terkadang situs menerima lampiran file, termasuk dalam format gzip.  Dalam hal ini, kami mengambil file 1TB, menggunakan gzip, kami mengompresnya menjadi beberapa byte atau kilobyte dan mengirimkannya ke situs.  Kemudian dibuka ritsleting dan efek yang sangat menarik diperoleh. <br><br><h3>  API sisanya </h3><br>  Saya ingin sedikit memperhatikan layanan populer seperti API Istirahat.  Melindungi API Istirahat jauh lebih sulit daripada situs biasa.  Untuk API Istirahat, bahkan metode perlindungan sepele terhadap pemecahan kata sandi dan aktivitas tidak sah lainnya tidak berfungsi. <br><br>  API Istirahat sangat mudah dipecahkan karena mengakses database secara langsung.  Pada saat yang sama, kegagalan layanan semacam itu membawa konsekuensi yang cukup serius bagi bisnis.  Faktanya adalah bahwa API Istirahat biasanya tidak hanya melibatkan situs utama, tetapi juga aplikasi seluler, beberapa sumber daya bisnis internal.  Dan jika semua ini jatuh, maka efeknya jauh lebih kuat daripada dalam kasus kegagalan situs sederhana. <br><br><h3>  Beban Konten Berat </h3><br>  Jika kami ditawari untuk menguji beberapa aplikasi satu halaman biasa, halaman arahan, situs web kartu nama, yang tidak memiliki fungsi yang kompleks, kami sedang mencari konten yang berat.  Misalnya, gambar besar yang diberikan server, file biner, dokumentasi pdf - kami mencoba untuk memompa semuanya.  Tes semacam itu memuat sistem file dengan baik dan menyumbat saluran, dan karenanya efektif.  Artinya, bahkan jika Anda tidak meletakkan server, mengunduh file besar dengan kecepatan rendah, Anda hanya akan menyumbat saluran server target dan kemudian penolakan layanan akan terjadi. <br>  Contoh pengujian semacam itu menunjukkan bahwa pada kecepatan 30 RPS situs berhenti merespons, atau menghasilkan 500 kesalahan server. <br><br><img src="https://habrastorage.org/webt/qc/wt/o-/qcwto-1m01beyofdf9vwgov8a6g.png"><br><br>  Jangan lupa tentang pengaturan server.  Anda sering dapat menemukan bahwa seseorang membeli mesin virtual, menginstal Apache di sana, mengkonfigurasi semuanya secara default, menemukan aplikasi php, dan di bawah ini Anda dapat melihat hasilnya. <br><br><img src="https://habrastorage.org/webt/js/ji/xj/jsjixjh1afv4981burqrqtopx8i.png"><br><br>  Di sini bebannya pergi ke root dan hanya berjumlah 10 RPS.  Kami menunggu 5 menit dan server macet.  Sampai akhir, bagaimanapun, tidak diketahui mengapa dia jatuh, tetapi ada asumsi bahwa dia hanya penuh dengan ingatan, dan karena itu berhenti merespons. <br><br><h3>  Berbasis gelombang </h3><br>  Dalam satu atau dua tahun terakhir, serangan gelombang telah menjadi sangat populer.  Ini disebabkan oleh kenyataan bahwa banyak organisasi membeli perangkat keras tertentu untuk perlindungan terhadap DDoS, yang memerlukan sejumlah statistik tertentu untuk mulai menyaring serangan.  Artinya, mereka tidak menyaring serangan dalam 30-40 detik pertama, karena mereka mengumpulkan data dan belajar.  Oleh karena itu, dalam 30-40 detik ini, Anda dapat meluncurkan begitu banyak sehingga sumber daya akan berbohong untuk waktu yang lama sampai semua permintaan dihapus. <br><br>  Dalam kasus serangan, ada interval 10 menit di bawah, setelah itu bagian serangan baru yang dimodifikasi tiba. <br><br><img src="https://habrastorage.org/webt/tx/b4/l7/txb4l7l3s0yneaz0dn5__jzozmu.png"><br><br>  Yaitu, pertahanan dilatih, mulai menyaring, tetapi bagian baru, serangan yang sama sekali berbeda tiba, dan pertahanan mulai berlatih lagi.  Bahkan, penyaringan berhenti berfungsi, perlindungan menjadi tidak efektif, dan situs tidak dapat diakses. <br><br>  Serangan gelombang dicirikan oleh nilai yang sangat tinggi di puncaknya, dapat mencapai seratus ribu atau sejuta permintaan per detik, dalam kasus L7.  Jika kita berbicara tentang L3 &amp; 4, maka mungkin ada ratusan gigabit lalu lintas, atau, karenanya, ratusan mpps, jika Anda menghitung dalam paket. <br><br>  Masalah dengan serangan tersebut adalah sinkronisasi.  Serangan datang dari botnet, dan untuk menciptakan puncak satu kali yang sangat besar, diperlukan sinkronisasi tingkat tinggi.  Dan koordinasi ini tidak selalu berhasil: kadang-kadang outputnya adalah semacam puncak parabola, yang terlihat agak menyedihkan. <br><br><h3>  Bukan HTTP Unified </h3><br>  Selain HTTP pada level L7, kami senang mengeksploitasi protokol lain.  Sebagai aturan, sebuah situs web biasa, terutama hosting biasa, memiliki protokol surat dan MySQL mencuat.  Protokol mail tidak terlalu terpengaruh daripada database, tetapi mereka juga dapat dimuat dengan cukup efisien dan mendapatkan CPU yang kelebihan beban di server pada output. <br><br>  Dengan bantuan kerentanan SSH 2016, kami cukup sukses.  Sekarang kerentanan ini telah diperbaiki untuk hampir semua orang, tetapi ini tidak berarti bahwa SSH tidak dapat dimuat.  Kamu bisa.  Hanya banyak otorisasi yang dilayani, SSH memakan hampir seluruh CPU di server, dan kemudian situs web sudah terdiri dari satu atau dua permintaan per detik. <br><br>  Karenanya, satu atau dua kueri log ini tidak dapat dibedakan dari muatan yang sah. <br>  Banyak koneksi yang kami buka di server tetap relevan.  Sebelumnya, Apache berdosa, sekarang nginx sebenarnya berdosa, karena sering dikonfigurasi secara default.  Jumlah koneksi yang nginx dapat tetap terbuka terbatas, jadi kami membuka jumlah koneksi ini, koneksi nginx baru tidak lagi menerima, dan situs tidak berfungsi pada output. <br><br>  Cluster pengujian kami memiliki cukup CPU untuk menyerang jabat tangan SSL.  Pada prinsipnya, seperti yang ditunjukkan oleh latihan, botnet juga terkadang suka melakukan ini.  Di satu sisi, jelas bahwa Anda tidak dapat melakukannya tanpa SSL, karena Google menerbitkan, memberi peringkat, dan keamanan.  SSL, di sisi lain, sayangnya memiliki masalah CPU. <br><br><h3>  L3 &amp; 4 </h3><br>  Ketika kita berbicara tentang serangan di level L3 &amp; 4, kita biasanya berbicara tentang serangan di level saluran.  Beban seperti itu hampir selalu dapat dibedakan dari yang sah jika itu bukan serangan banjir SYN.  Masalah serangan banjir SYN untuk fitur keamanan besar.  Nilai maksimum L3 &amp; 4 adalah 1,5-2 Tb / s.  Lalu lintas seperti itu sangat sulit ditangani bahkan untuk perusahaan besar, termasuk Oracle dan Google. <br><br>  SYN dan SYN-ACK adalah paket yang digunakan untuk membangun koneksi.  Oleh karena itu, sulit untuk membedakan SYN-banjir dari beban yang sah: tidak jelas apakah ini SYN, yang datang untuk membuat sambungan, atau bagian dari banjir. <br><br><h3>  Banjir UDP </h3><br>  Biasanya, penyerang tidak memiliki kemampuan yang kita miliki, sehingga amplifikasi dapat digunakan untuk mengatur serangan.  Yaitu, seorang penyerang memindai Internet dan menemukan server yang rentan atau tidak dikonfigurasi dengan benar, yang, misalnya, sebagai tanggapan terhadap satu paket SYN, merespons dengan tiga SYN-ACK.  Dengan memalsukan alamat sumber dari alamat server target, Anda dapat menggunakan satu paket untuk meningkatkan kapasitas, katakanlah, tiga kali, dan mengarahkan lalu lintas ke korban. <br><br><img src="https://habrastorage.org/webt/nd/yu/qz/ndyuqzpld7k2bu58rqqmbriass4.png"><br><br>  Masalah dengan amplifikasi adalah pendeteksiannya yang kompleks.  Dari contoh-contoh terbaru kita dapat mengutip kasus sensasional dengan memcached yang rentan.  Plus, sekarang ada banyak perangkat IoT, kamera IP, yang sebagian besar juga dikonfigurasi secara default, dan secara default mereka dikonfigurasi secara tidak benar, oleh karena itu, melalui perangkat tersebut, penyerang paling sering melakukan serangan. <br><br><img src="https://habrastorage.org/webt/h-/si/2n/h-si2n6jf8q84xzuzbfgwgwnd6o.png"><br><br><h3>  SYN-flood yang sulit </h3><br>  SYN-flood mungkin adalah tampilan paling menarik dari semua serangan dari sudut pandang pengembang.  Masalahnya adalah bahwa administrator sistem sering menggunakan pemblokiran IP untuk perlindungan.  Selain itu, pemblokiran IP mempengaruhi tidak hanya sysadmin yang beroperasi sesuai dengan skrip, tetapi, sayangnya, beberapa sistem keamanan yang dibeli dengan banyak uang. <br><br>  Metode ini dapat berubah menjadi malapetaka, karena jika penyerang mengubah alamat IP mereka, perusahaan akan memblokir subnetnya sendiri.  Ketika Firewall memblokir klusternya sendiri, interaksi eksternal akan macet di output, dan sumber daya akan rusak. <br><br>  Dan untuk mencapai pemblokiran jaringan Anda sendiri itu mudah.  Jika kantor klien memiliki jaringan Wi-Fi, atau jika kesehatan sumber daya diukur menggunakan berbagai pemantauan, maka kami mengambil alamat IP dari sistem pemantauan ini atau kantor klien Wi-Fi, dan menggunakannya sebagai sumber.  Pada output, sumber daya tampaknya tersedia, tetapi alamat IP target diblokir.  Jadi, jaringan Wi-Fi pada konferensi HighLoad, tempat produk baru perusahaan disajikan, dapat diblokir, dan ini memerlukan biaya bisnis dan ekonomi tertentu. <br><br>  Selama pengujian, kami tidak dapat menggunakan amplifikasi melalui memcached oleh beberapa sumber daya eksternal, karena ada perjanjian untuk memasok lalu lintas hanya ke alamat IP yang diizinkan.  Dengan demikian, kami menggunakan amplifikasi melalui SYN dan SYN-ACK, ketika sistem merespons dengan mengirim dua atau tiga SYN-ACK untuk mengirim satu SYN, dan hasilnya dikalikan dua hingga tiga kali. <br><br><h3>  Alat-alatnya </h3><br>  Salah satu alat utama yang kami gunakan untuk memuat di level L7 adalah Yandex-tank.  Secara khusus, hantu digunakan sebagai senjata, ditambah ada beberapa skrip untuk menghasilkan kartrid dan untuk menganalisis hasilnya. <br><br>  Tcpdump digunakan untuk menganalisis lalu lintas jaringan, dan Nmap digunakan untuk menganalisis lalu lintas server.  Untuk membuat beban di level L3 &amp; 4, OpenSSL digunakan dan sedikit keajaibannya sendiri dengan perpustakaan DPDK.  DPDK adalah perpustakaan dari Intel yang memungkinkan Anda bekerja dengan antarmuka jaringan, melewati tumpukan Linux, dan dengan demikian meningkatkan efisiensi.  Secara alami, kami menggunakan DPDK tidak hanya di level L3 &amp; 4, tetapi juga di level L7, karena memungkinkan Anda untuk membuat aliran beban yang sangat tinggi, dalam beberapa juta permintaan per detik dari satu mesin. <br>  Kami juga menggunakan generator lalu lintas tertentu dan alat khusus yang kami tulis untuk pengujian khusus.  Jika kita mengingat kembali kerentanan di bawah SSH, maka dengan set di atas, ia tidak bisa diloloskan.  Jika kita menyerang protokol surat, kita mengambil utilitas surat atau hanya menulis skrip padanya. <br><br><blockquote><h3>  Kesimpulan </h3><br>  Sebagai hasilnya, saya ingin mengatakan: <br><br><ul><li>  Selain pengujian beban klasik, pengujian tegangan juga harus dilakukan.  Kami memiliki contoh dunia nyata di mana subkontraktor mitra hanya melakukan pengujian beban.  Itu menunjukkan bahwa sumber daya tahan beban standar.  Tetapi kemudian muncul beban abnormal, pengunjung situs mulai menggunakan sumber daya sedikit berbeda, dan pada output subkontraktor meletakkan.  Oleh karena itu, ada baiknya mencari kerentanan bahkan jika Anda sudah terlindungi dari serangan DDoS. </li><li>  Penting untuk mengisolasi beberapa bagian sistem dari yang lain.     ,      ,      .       ,    -  .    -      ,   , ,    ,    OAuth2. </li><li>      . </li><li>  CDN      ,               . </li><li>     .  L3&amp;4        ,    ,  ,    .  L7      ,     . ,     -   ,  . </li><li>  .     ,   SSH daemon,       .  ,    ,            . </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448626/">https://habr.com/ru/post/id448626/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448610/index.html">DIY: Bagaimana Kami Membuat Jadwal Langsung untuk Codefest X</a></li>
<li><a href="../id448612/index.html">Apa yang dibekukan pada pembekuan fitur 2019. Bagian I. JSONPath</a></li>
<li><a href="../id448618/index.html">Algoritma Douglas-Pecker</a></li>
<li><a href="../id448622/index.html">PHP GR8: Akankah JIT Meningkatkan Kinerja PHP 8</a></li>
<li><a href="../id448624/index.html">Lihat datanya? Tidak. Jadi saya tidak melihat, tetapi mereka. Kami menghancurkan data pada drive SSD, dan bahkan mengembalikan kecepatan</a></li>
<li><a href="../id448628/index.html">Estetika dan teknologi teknis Soviet</a></li>
<li><a href="../id448632/index.html">Java sekarang dibayar? Desas-desus desas-desus (atau tidak?)</a></li>
<li><a href="../id448634/index.html">Pelajaran Ukraina</a></li>
<li><a href="../id448636/index.html">Retas Komputer Retas Retro</a></li>
<li><a href="../id448638/index.html">Buildroot - Bagian 1. Informasi umum, membangun sistem minimal, pengaturan melalui menu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>