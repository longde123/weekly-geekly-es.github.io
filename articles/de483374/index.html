<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👉🏾 👩‍👧‍👧 ⛹🏻 REST-API-Empfehlungen - Beispiele für den Entwurf von Webdiensten in Java und Spring 👩🏿‍🤝‍👨🏻 🧖🏽 🙆🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im letzten Artikel dieser Reihe erfahren Sie mehr über REST-API-Empfehlungen und Entwicklungsbeispiele von Java und Spring Web Services. 

 Bei der En...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>REST-API-Empfehlungen - Beispiele für den Entwurf von Webdiensten in Java und Spring</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483374/">  Im letzten Artikel dieser Reihe erfahren Sie mehr über REST-API-Empfehlungen und Entwicklungsbeispiele von Java und Spring Web Services. <br><br>  Bei der Entwicklung einer guten REST-API ist es wichtig, über gute Microservices zu verfügen. <br>  Wie entwickeln Sie Ihre REST-API?  Was sind die Best Practices? <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/2l/pg/rq/2lpgrq94xumpddkf6ivlt3ekkgu.png"><br><h3>  Sie werden lernen: </h3><br><ul><li>  Wie entwickle ich eine gute REST-API? </li><li>  Was muss ich bei der Entwicklung einer REST-API beachten? </li><li>  Was sind die Best Practices für die Entwicklung von RESTful-Webdiensten? </li></ul><br><h3>  REST-API </h3><br>  Dies ist der letzte Artikel in einer Reihe von Artikeln über die REST-API: <br><br><ul><li>  <a href="https://habr.com/ru/post/483202/">Einführung in die REST-API - RESTful Web Services</a> </li><li>  <a href="https://habr.com/ru/post/483204/">Unterschiede zwischen REST und SOAP</a> </li><li>  <a href="https://habr.com/ru/post/483206/">REST-API-Entwicklung - Was ist Contract First (Vertrag zuerst)?</a> </li><li>  <a href="https://habr.com/ru/post/483322/">REST-API-Entwicklung - Was ist Code First (Code First)?</a> </li><li>  <a href="https://habr.com/post/483328/">REST API - Was ist HATEOAS?</a> </li><li>  REST-API-Empfehlungen - Beispiele für den Entwurf von Webdiensten in Java und Spring </li></ul><br><h3>  Verwenden Sie den Consumer First Approach </h3><br>  Wer wird Ihren Service nutzen?  Verbraucherdienstleistungen. <br><br>  Betrachten Sie den Service aus Sicht des Verbrauchers? <br><br><ul><li>  Kann Ihr Verbraucher Ihre API verstehen, wenn Sie eine API entwickeln? </li><li>  Wenn Sie Ihre Ressourcen veröffentlichen, kann der Verbraucher sie finden und darauf zugreifen? </li><li>  Kann der Verbraucher Ihre URIs verstehen? </li><li>  Welche Art von Service bieten Sie an? </li><li>  Handelt es sich um eine mobile Anwendung oder eine Webanwendung? </li><li>  Welche Verbraucher erwarten Sie und können sich diese Verbrauchertypen in Zukunft ändern? </li><li>  Wenn Sie so etwas wie HATEOAS implementieren, überlegen Sie, wie Ihre Kunden es verwenden werden, bevor Sie es implementieren. </li></ul><br><blockquote><ul><li>  <b>Das Wichtigste ist eine hervorragende Dokumentation</b> </li><li>  <b>Erleichtern Sie Ihren Kunden das Sparen von Zeit.</b> </li><li>  <b>Je mehr Konsumenten alleine tun können, desto weniger Arbeit für Sie.</b> </li></ul><br></blockquote><br>  Wenn Sie eine Diskussion oder einen Service-Review haben, stellen Sie die Kundenanforderungen an erster Stelle. <br><br><h3>  Nutzen Sie den Contract First Approach </h3><br>  Was ist ein Vertrag? <br><br>  Der Ersteller des Webdienstes gilt als <b>Dienstleister</b> .  Eine Anwendung, die einen Webdienst verwendet, ist ein <b>Benutzer des Dienstes</b> .  <b>Ein Vertrag</b> ist eine Vereinbarung zwischen einem Anbieter und einem Verbraucher über eine Dienstleistung. <br><br><img src="https://habrastorage.org/webt/d-/5f/on/d-5fon8kmzaf6f_7g-bn7fsbofe.png"><br><br>  Um den Dienst korrekt zu nutzen, muss der Verbraucher des Dienstes den Vertrag vollständig verstehen.  Der Vertrag enthält Einzelheiten zu vielen Aspekten der Dienstleistung, wie z. <br><br><ul><li>  Wie rufe ich einen Webservice auf? </li><li>  Welche Art von Transport wird verwendet? </li><li>  Was sind die Anfrage- und Antwortstrukturen? </li></ul><br>  Dies wird auch als <b>Service-Definition bezeichnet</b> . <br><br>  In der Methode "Vertrag zuerst" definieren Sie zuerst einen Servicevertrag und implementieren dann nur den Service. <br><br><h3>  Vertrag zuerst mit WSDL </h3><br>  Wenn Sie beispielsweise SOAP-Webdienste definieren, verwenden Sie WSDL, um den Vertrag zu definieren. <br><br><img src="https://habrastorage.org/webt/ou/st/86/oust86bvzc87vsg-k229x1ujl14.png"><br><br>  Die WSDL bestimmt die Service-Endpunkte, die von Ihnen veröffentlichten Vorgänge sowie die Anforderungs- und Antwortstrukturen. <br><br><h3>  Erster Vertrag mit Swagger / Open API </h3><br>  Wenn Sie RESTful-Webdienste verwenden, ist Swagger ein beliebtes Tool zur Dokumentation Ihrer Webdienste. <br><br><img src="https://habrastorage.org/webt/we/tc/3x/wetc3x4x6unbgve0wcaxdjdbkp8.png"><br><img src="https://habrastorage.org/webt/l-/2m/h_/l-2mh_uh6txdtyekd1xn585mmvw.png"><br>  Mit Swagger können Sie bestimmen, welche Ressourcen Sie als Teil Ihrer API bereitstellen.  Es enthält die Details der einzelnen Vorgänge, z. B. ob XML, JSON oder beides verwendet wird.  Eine Antwortskizze ist auch da. <br><br><img src="https://habrastorage.org/webt/9e/px/uh/9epxuhh57oelrv-dupcqib0t6ho.png"><br><br>  Es enthält auch detaillierte Informationen zu den unterstützten Antwortcodes.  Sie können auch sehen, dass diese bestimmte Ressource <b>/ jpa / users</b> : <br><br><img src="https://habrastorage.org/webt/gi/ig/pk/giigpknfhlsy8qiscbblp_eigdw.png"><br><br>  unterstützt den GET-Betrieb.  Tatsächlich unterstützt es auch die POST-Operation: <br><br><img src="https://habrastorage.org/webt/ox/9o/ch/ox9ochxtkao2ghxalyyi_o6oy4m.png"><br><br>  Wenn diese Ressource verfügbar ist, lautet das Antwortschema: <br><br><img src="https://habrastorage.org/webt/lf/gq/xo/lfgqxoi0txeqlqyg8vmblmppwdq.png"><br><br>  Die Definition des Benutzerobjekts ist in der Swagger-Vereinbarung enthalten als: <br><br><img src="https://habrastorage.org/webt/d3/s0/nm/d3s0nmktz3so7vqye4t8vqizwm4.png"><br><br>  Es enthält die folgenden Attribute: <b>birthDate</b> , <b>id</b> , <b>name</b> und eine Reihe von Nachrichtenbeiträgen.  Einige Felder enthalten auch ein Beschreibungsfeld. <br><br>  Im ersten Ansatz des Vertrags erstellen Sie vor der Implementierung des Service manuell oder mithilfe der Anwendung die von Swagger erstellte Definition. <br><br><h3>  Vorteile des Contract First Approach </h3><br>  Mit dem Contract First Approach denken Sie über Ihre Kunden nach und wie diese diesen Service nutzen können.  Sie sind anfangs nicht besorgt über Implementierungsdetails. <br><br>  Wenn Sie in einem frühen Stadium großen Wert auf die Implementierung legen, gehen technische Details in die Definition Ihrer Dienstleistung ein. <br><br>  Sie müssen sicherstellen, dass die Definition Ihres Dienstes nicht von der von Ihnen verwendeten Plattform abhängt, sei es Java, .NET oder eine andere. <br><br><h3>  Definieren Sie Organisationsstandards für die REST-API </h3><br>  Eine wichtige Richtlinie für Ihre organisatorischen Standards ist YARAS. <br><br><img src="https://habrastorage.org/webt/bu/9e/9s/bu9e9sa0bryvgm6g8yhhtabcdf0.png"><br><br>  YARAS steht für einen <b>weiteren RESTful API Standard</b> .  YARAS bietet die Standards, Richtlinien und Konventionen, die bei der Entwicklung von RESTful-Webdiensten beachtet werden müssen.  Er gibt Empfehlungen für die folgenden Dinge: <br><br><ul><li>  Wie sollten Sie Ihre Dienste benennen? </li><li>  Wie Sie Ihre Anfrage und Antwort strukturieren sollen </li><li>  Wie Sie Filter-, Sortier-, Paginierungs- und andere Aktionen implementieren sollten </li><li>  Wie sollten Sie die Versionierung angehen? </li><li>  Wie müssen Sie an die API-Dokumentation herangehen? </li></ul><br><h3>  Einheitlicher Ansatz für die Serviceentwicklung </h3><br>  Sie müssen viele komplexe Probleme lösen, bevor Sie mit dem Entwurf von RESTful-Webdiensten beginnen.  All dies müssen Sie herausfinden. <br><br>  Die Führung Ihres Unternehmens möchte nicht, dass Teams, die mit unterschiedlichen Ressourcen umgehen, unterschiedliche Ansätze für diese Dinge verfolgen. <br><br>  Es ist beispielsweise unerwünscht, dass Team-A die Versionierung auf der Grundlage von Abfrageparametern organisiert und Team-B die Versionierung auf der Grundlage von URIs verwendet. <br><br>  Daher ist es wichtig, dass Sie die organisatorischen Standards für Ihren Ansatz zu RESTful-Webdiensten klar definiert haben. <br><br><h3>  Anpassung von YARAS AN organisatorische Bedürfnisse </h3><br>  Das Gute an YARAS ist, dass es an unternehmensspezifische Anforderungen angepasst werden kann.  Zum Beispiel können Sie: <br><br><ul><li>  Konfigurieren Sie, wie die Anforderungs- und Antwortkörper aussehen sollen. </li><li>  Wählen Sie ein bestimmtes Versionskontrollsystem </li></ul><br>  Da YARAS ziemlich umfassend abgedeckt ist, können Sie sicher sein, dass Sie keine wichtige Entscheidung verpasst haben. <br><br><h3>  Auswählen eines Standard-REST-API-Frameworks für Unternehmen </h3><br>  Typische Frameworks zum Erstellen von REST-fähigen Webdiensten in der Java-Welt sind Spring MVC, Spring REST und JAX-RS. <br><br>  Wenn Sie ein organisationsspezifisches Framework / einen Archetyp / eine Referenzanwendung erstellen, das / die sich auf der bevorzugten REST-API-Plattform an gängigen Organisationsstandards orientiert, können Teams problemlos gemeinsame Standards einhalten. <br><br>  Typische Merkmale sind: <br><br><ul><li>  Anfrage- und Antwortstrukturen </li><li>  Fehlerbehandlung </li><li>  Filterung </li><li>  Suche </li><li>  Versionierung </li><li>  Unterstützung für falsche Antworten </li><li>  Hass </li></ul><br>  Das Standardframework bietet einen einheitlichen Ansatz für das Entwerfen und Implementieren von Diensten im gesamten Unternehmen. <br><br><h3>  Dezentrale REST-API-Verwaltung </h3><br>  Erstellen Sie eine Expertengruppe aus den Teams, die die REST-API erstellen, und bilden Sie ein Management-Team.  Das Team ist verantwortlich für <br><br><ul><li>  Verbesserung der REST-API-Standards </li><li>  Erstellen / Entwerfen Ihres REST-API-Frameworks </li></ul><br><h3>  Weit verbreitete Verwendung von HTTP </h3><br>  Wenn Sie an RESTful-Webdienste denken, denken Sie an HTTP. <br><br>  HTTP bietet alle Funktionen, mit denen Sie hervorragende Webdienste erstellen können. <br><br><h4>  Verwenden Sie die richtigen HTTP-Anforderungsmethoden </h4><br>  Denken Sie an die HTTP-Anforderungsmethoden, die Sie verwenden müssen.  Wenn Sie eine Operation implementieren möchten, bestimmen Sie die Ressource, für die sie ausgeführt werden soll, und suchen Sie dann die entsprechende HTTP-Anforderungsmethode.  Rufen Sie Details ab, erstellen Sie etwas, aktualisieren Sie etwas Bestehendes oder löschen Sie ein Bestehendes? <br><br>  HTTP-Methoden verwenden: <br><br><ul><li>  GET zu bekommen </li><li>  POST zu erstellen </li><li>  PUT zu aktualisieren </li><li>  LÖSCHEN zum Löschen </li><li>  PATCH für teilweise Updates </li></ul><br><h4>  Verwenden Sie den entsprechenden HTTP-Antwortstatus </h4><br>  Stellen Sie beim Ausführen des Vorgangs sicher, dass Sie den richtigen Antwortstatus zurückgeben. <br><br>  Wenn beispielsweise eine bestimmte Ressource nicht gefunden wird, darf keine Serverausnahme ausgelöst werden.  Senden Sie stattdessen den entsprechenden Antwortcode in einer Antwortnachricht, z. B. <b>404</b> . <br><br>  Wenn es wirklich eine Serverausnahme gibt, senden Sie den Code <b>500</b> zurück. <br><br>  Wenn die Validierung fehlschlägt, senden Sie den Code für die ungültige Anforderung. <br><br><h3>  Leistung im Fokus </h3><br>  Jede Ressource kann mehrere Darstellungen haben - im XML- oder JSON-Format.  Der Dienstverbraucher kann die Präsentation seiner Wahl wählen. <br><br>  Der Service gibt 3 Benutzer zurück, wenn wir eine GET-Anfrage senden.  In diesem Fall erhalten wir die JSON-Darstellung der Ressource <b><i>/ users</i></b> . <br><br><img src="https://habrastorage.org/webt/gq/qn/jq/gqqnjqeoz1e_lo1vftv0qymzdje.png"><br><br>  Wenn der Verbraucher keine bevorzugte Ansicht angibt, verwenden wir JSON. <br><br><img src="https://habrastorage.org/webt/ox/fr/b-/oxfrb-45qiilzqpul45nbdpqk6a.png"><br><br>  Der Consumer kann einen Accept-Header senden, um die Ansicht anzugeben. <br><br><img src="https://habrastorage.org/webt/df/tz/0t/dftz0teguhajcobfnjsgs-elmhk.png"><br><br>  Der Antworttext hat jetzt XML-Inhalt: <br><br><img src="https://habrastorage.org/webt/bw/ct/io/bwctiow8vaxwy2sik1-awmyhar0.png"><br><br><h3>  Verwenden Sie den Plural </h3><br>  Verwenden Sie immer den Plural, wenn Sie Ressourcen benennen. <br><br>  Schauen wir uns ein einfaches Beispiel an.  Angenommen, wir haben einen Dienst, der eine Benutzerressource hostet.  Im Folgenden wird beschrieben, wie Sie darauf zugreifen können: <br><br><ul><li>  Benutzer erstellen: <b>POST / Benutzer</b> </li><li>  Benutzer <b>löschen</b> : <b>DELETE / users / 1</b> </li><li>  Holen Sie sich alle Benutzer: <b>GET / users</b> </li><li>  Holen Sie sich einen Benutzer: <b>GET / users / 1</b> </li></ul><br>  Durch die Bevorzugung mehrerer Benutzer gegenüber dem Benutzer wird der URI besser lesbar. <br><br><ul><li>  Wenn wir beispielsweise <b>/ user</b> anstelle von <b>/ users verwenden</b> , um <b>abzurufen</b> , gibt <b>GET / user</b> die richtige Nachricht nicht an den Leser weiter. </li></ul><br><h3>  Erstellen Sie eine gute Dokumentation </h3><br>  Die Verbraucher müssen verstehen, wie sie den Dienst optimal nutzen können, und der beste Weg, ihnen zu helfen, besteht darin, eine gute Dokumentation zu erstellen. <br><br>  SOAP-Webdienste können WSDL-Funktionalität verwenden, während RESTful-Webdienste Swagger-Optionen (jetzt der Open API-Dokumentationsstandard) aufweisen. <br><br>  Die Auswahl eines Formats ist nur ein Teil der Erstellung einer guten Dokumentation.  Wichtig ist auch die Bereitstellung der richtigen Informationsmenge, um dem Verbraucher zu helfen. <br><br>  Die Dokumentation sollte vollständig sein und folgende Punkte enthalten: <br><br><ul><li>  Was ist eine Anfrage- und Antwortstruktur? </li><li>  Wie soll sich ein Verbraucher authentifizieren? </li><li>  Was sind die Einsatzgrenzen? </li><li>  Geben Sie alle Arten von Antwortnachrichten und die entsprechenden Statuscodes an, die vom Service erwartet werden können. </li></ul><br><h3>  Erstellen Sie ein gemeinsames REST-API-Dokumentationsportal </h3><br>  Es wäre hilfreich, ein gemeinsames REST-API-Dokumentationsportal für die gesamte Organisation zu haben.  Schauen Sie sich ein solches Portal an: <br><br><img src="https://habrastorage.org/webt/3j/vm/bo/3jvmbovqx_sikaedwbkgzxe80yc.png"><br><br>  Ein solches Portal fasst alle in der Organisation verfügbaren Ressourcen zusammen.  Eine Benutzeroberfläche wie die Swagger-Benutzeroberfläche bietet zusätzliche Vorteile.  Mit der Swagger-Benutzeroberfläche können Sie die Dokumentation detaillierter anzeigen: <br><br><img src="https://habrastorage.org/webt/xp/io/ox/xpiooxhstlexwhwjxqk9umd6yye.png"><br><br>  Dies kann auch von nicht technischen Benutzern verwendet werden.  Die hier bereitgestellten Informationen umfassen: <br><br><ul><li>  Erwartetes Antwortformat </li><li>  Inhaltstyp </li><li>  Unterstützte Antwortcodes </li></ul><br>  Das Dokumentationsformat im Stil einer Live-Anfrage / Antwort kann ebenfalls von Interesse sein. <br><br><h3>  Versionsunterstützung </h3><br>  Die Versionskontrolle ist für einen Webservice mit einer hohen Komplexität verbunden.  Es ist sehr schwierig, mehrere verschiedene Versionen desselben Webdienstes zu verwalten.  Versuchen Sie dies nach Möglichkeit zu vermeiden. <br><br>  In bestimmten Szenarien ist jedoch eine Versionskontrolle unumgänglich. <br><br>  Beginnen wir mit einem Beispielservice.  Angenommen, wir haben anfangs einen Service mit der <b>PersonV1-</b> Klasse wie folgt definiert: <br><br>  Diese Version der Klasse berücksichtigt nicht, dass ein Name viele Unterabschnitte haben kann, z. B. Vor- und Nachname.  Überprüfen Sie dies heraus: <br><br>  Die zweite Version der Quellklasse wurde aktualisiert, um diese Anomalie zu beheben: <br><br>  Wir können den gesamten Service nicht sofort auf die Nutzung von <b>PersonV2 übertragen</b> !  Möglicherweise warten andere Verbraucher auf Antworten im <b>PersonV1-</b> Format. <br><br>  Hier ist eine Versionskontrolle erforderlich. <br><br>  Lassen Sie uns nun die Optionen betrachten, die wir für die Versionskontrolle dieser beiden Ressourcen haben. <br><br><h3>  Verwendung verschiedener URIs </h3><br>  Wir haben eine Option - verschiedene URIs für diese verschiedenen Ressourcen zu verwenden.  Im folgenden Prüfungscode verwenden wir die URIs <b>v1 / person</b> und <b>v2 / person</b> , um sie zu unterscheiden: <br><br>  Wenn Sie eine GET-Anforderung für die Ressource <b>v1 / person</b> ausführen: <br><br><img src="https://habrastorage.org/webt/ro/xv/go/roxvgoo6pek2xv4wokws2zivir4.png"><br><br>  Sie erhalten Informationen entsprechend <b>v1</b> .  Für eine andere Ressource: <br><br><img src="https://habrastorage.org/webt/hn/yn/vh/hnynvhniet9iacsxsrikaa9pxj8.png"><br><br><h3>  Verwenden des Abfrageparameters </h3><br>  Die zweite Versionskontrollmethode verwendet den Abfrageparameter: <br><br>  Wenn wir in der URI <b>/ person / param</b> den Parameter mit <b>version = 1</b> senden, geben wir eine Ressource vom Typ <b>PersonV1 zurück</b> : <br><br><img src="https://habrastorage.org/webt/sp/qe/1g/spqe1gs9bksyba0pmidzsndo1fm.png"><br><br>  Für denselben URI gibt der Parameter mit <b>Version = 2</b> eine Ressource vom Typ <b>PersonV2 zurück</b> : <br><br><img src="https://habrastorage.org/webt/2q/qt/q1/2qqtq1ci6j_pg4bc6brglrj4z88.png"><br><br>  Diese Methode wird als Versionierung mit Abfrageparametern bezeichnet. <br><br><h3>  Header verwenden (Header) </h3><br>  Eine andere Möglichkeit ist die Versionskontrolle durch Angabe eines Titels.  Hier verwenden wir einen Header namens <b>X-API-VERSION</b> und markieren den URI als <b>/ person / header</b> .  Wenn der Header-Wert <b>1 ist</b> , wird eine Ressource vom Typ <b>PersonV1 zurückgegeben</b> : <br><br><img src="https://habrastorage.org/webt/d-/0b/ww/d-0bwwbim3yedwkmreql8hancrg.png"><br><br>  Wenn sein Wert <b>2 ist</b> , wird eine Ressource vom Typ <b>PersonV2</b> abgerufen: <br><br><img src="https://habrastorage.org/webt/yz/_q/1-/yz_q1-fcemb3sqptsk4cd5p8kno.png"><br><br>  Wir verwenden das Attribut im Anforderungsheader, um die Versionskontrolle für uns durchzuführen. <br><br><h3>  Accept Header verwenden </h3><br>  Die letzte Methode zum Erstellen von Versionen verwendet den Accept Header.  Wenn der Consumer die ersten Versionsinformationen in den Accept-Header der GET-Anforderung aufnimmt, wird die folgende Ressource zurückgegeben: <br><br><img src="https://habrastorage.org/webt/dz/yw/54/dzyw5423iw2i6ogaiund7wpl1wo.png"><br><br>  Andernfalls wird eine Ressource vom Typ <b>PersonV2 zurückgegeben</b> : <br><br><img src="https://habrastorage.org/webt/3i/a4/wl/3ia4wlgl4dbx9fvpxvz3ho8ihxc.png"><br><br>  Diese Versionskontrollmethode wird als <b>Accept Header Versioning</b> oder <b>Media Type Versioning bezeichnet</b> , da MIME-Typen normalerweise den Inhalt des Accept-Headers darstellen. <br><br><h3>  Vergleich der Versionskontrollmethoden </h3><br>  Bisher haben wir vier Arten von Methoden in Versionen gesehen: <br><br><ul><li>  Verwendung verschiedener URIs </li><li>  Verwenden des Abfrageparameters </li><li>  Verwendung von Header </li><li>  Verwenden von Kopfzeile / Medientyp akzeptieren </li></ul><br>  Welches ist das Beste?  Die Wahrheit ist, dass es keine einzige Antwort auf diese Frage gibt.  Tatsache ist, dass verschiedene Internetgiganten unterschiedliche Arten von Versionen unterstützen. <br><br><ul><li>  Verwendung verschiedener URIs - Twitter </li><li>  Verwenden von Abfrageparametern - Amazon </li><li>  Verwenden eines Headers - Microsoft </li><li>  Verwenden von Accept Header / Media Type - GitHub </li></ul><br><br>  Sie müssen diese vier Optionen entsprechend Ihren spezifischen Anforderungen bewerten.  Es gibt eine Reihe wichtiger Faktoren zu berücksichtigen: <br><br><ul><li>  <b>URI-Verschmutzung</b> : Durch die Steuerung von Versionen mithilfe von URIs und Abfrageparametern wird der URI-Bereich verschmutzt.  Dies liegt daran, dass wir den Hauptzeichenfolgen der URI Präfixe und Suffixe hinzufügen.  Die Versionskontrolle über einen Header vermeidet dies. </li><li>  <b>Missbrauch von HTTP-Headern</b> .  Bei der Versionskontrolle mit Headern und Medientyp werden HTTP-Header missbraucht, da sie ursprünglich nicht für die Versionskontrolle vorgesehen waren. </li><li>  <b>Caching</b> : Eine Ressource wird durch ihren URI identifiziert.  Wenn Sie jedoch keinen URI zum Ermitteln der Version verwenden, sondern einen auf Kopfzeilen basierenden Mechanismus verwenden, können die Versionsinformationen nicht zwischengespeichert werden.  Wenn HTTP-Caching für Sie wichtig ist, verwenden Sie die Versionskontrolle basierend auf einem URI oder Anforderungsparameter. </li><li>  <b>Ausführbarkeit von Browser-Anfragen</b> : Für die Versionierung nach Titel und Medientyp sind Tools wie Postman erforderlich.  Wenn Service-Consumer jedoch technisch nicht versiert sind, ist es vorzuziehen, die Versionskontrolle auf der Grundlage eines URI oder eines Abfrageparameters zu verwenden. </li><li>  <b>API-Dokumentation</b> : Sie müssen auch darüber nachdenken, wie Sie Ihre APIs dokumentieren möchten.  Die auf dem URI und dem Abfrageparameter basierende Versionierung ist einfacher zu dokumentieren als die beiden anderen Arten der Versionskontrolle. </li></ul><br>  Verstehen Sie, dass es keine einzige ideale Lösung gibt! <br><br><h3>  Denken Sie an die Fehlerbehandlung </h3><br>  Wenn ein Verbraucher eine Anfrage an einen Dienst sendet, ist es wichtig, dass er die richtige Antwort erhält.  Wenn etwas schief geht, ist es wichtig, eine angemessene Antwort zu senden. <br><br><h3>  Wenn ein Verbraucher eine nicht vorhandene Ressource anfordert </h3><br>  Wenn wir eine GET-Anfrage senden, um nach einem vorhandenen Benutzer zu suchen, erhalten wir die folgende Antwort: <br><br><img src="https://habrastorage.org/webt/uv/dl/9j/uvdl9jri5sd_xafc-fog6acw0rm.png"><br><br>  Wenn Sie einen nicht existierenden Benutzer suchen: <br><br><img src="https://habrastorage.org/webt/9z/kq/je/9zkqjeitglkibqhxszf-4_qr9xk.png"><br><br>  Sie erhalten den Status <b>404 Nicht gefunden</b> .  Dies ist eine gute Fehlerbehandlung, da hiermit korrekt festgestellt wird, dass die Ressource nicht gefunden wurde, und kein Serverfehler zurückgegeben wird. <br><br>  Senden wir nun eine GET-Anfrage an eine nicht vorhandene URI: <br><br><img src="https://habrastorage.org/webt/gp/b9/ch/gpb9ch3b9ochiotgxppztr4zyb4.png"><br><br>  Wie Sie sehen, erhalten Sie den Antwortstatus <b>404 Nicht gefunden</b> .  Eine ungültige URL weist auf eine nicht vorhandene Ressource hin. <br><br><h3>  Wichtige Antwortstatus </h3><br><ul><li>  200 - Erfolg </li><li>  404 - Ressource nicht gefunden </li><li>  400 - ungültige Anforderung (z. B. Validierungsfehler) </li><li>  201 - erstellt </li><li>  401 - nicht autorisiert (falls Authentifizierung fehlschlägt) </li><li>  500 - Serverfehler </li></ul><br><h3>  Fehlerdetails im Antworttext </h3><br>  Dies ist hilfreich, wenn Sie bei der Entwicklung Ihres Service eine Standardausnahmestruktur verwenden. <br><br><img src="https://habrastorage.org/webt/fd/ds/vd/fddsvdk0uirskh9ubp4oprwdcd8.png"><br><br>  Für bestimmte Fehler können bestimmte Antwortstrukturen an den Verbraucher zurückgegeben werden, und dies kann der Standard in der gesamten Organisation sein.  Stellen Sie sicher, dass die Fehlerantwort auch für Verbraucher ohne Verwirrung lesbar ist. <br><br><h3>  Verwenden der Swagger- oder Open API-Dokumentation </h3><br>  Swagger bietet eines der beliebtesten Dokumentationsformate für RESTful-Webdienste.  Heute wird es von verschiedenen Organisationen unterstützt und in einer Vielzahl von Diensten eingesetzt.  Hier betrachten wir zwei Hauptaspekte von Swagger: <br><br><ul><li>  Swagger-Dokumentationsformat </li><li>  Swagger-Benutzeroberfläche, mit der Sie die Swagger-Dokumentation auf visuell bequeme Weise anzeigen können </li></ul><br><h3>  Swagger-Dokumentation </h3><br>  Schauen Sie sich folgenden Swagger JSON an: <br><br><img src="https://habrastorage.org/webt/76/da/mo/76damom8ezs7j-5amuzvwfxrh6q.png"><br><br>  Auf der obersten Ebene sieht dies der Definition von WSDL sehr ähnlich.  Es hat mehrere wichtige Attribute: <br><ul><li>  <b>Host</b> : Wo befindet sich der Service? </li><li>  <b>basePath</b> : Der Pfad, in dem sich der Dienst befindet </li><li>  <b>verbraucht</b> : welche Anfragen werden angenommen </li></ul><br><img src="https://habrastorage.org/webt/em/iz/q0/emizq09g1kavjozxl2-dnasjuum.png"><br><br><ul><li>  <b>Erzeugt</b> : Welche Arten von Antworten werden generiert </li></ul><br><img src="https://habrastorage.org/webt/eu/5w/wg/eu5wwgbarvmsawqrqslbu3ps9oa.png"><br><br><ul><li>  <b>Pfade</b> : Verschiedene Ressourcen verfügbar In diesem Fall enthält die Liste verschiedene Arten von Ressourcen: </li></ul><br><img src="https://habrastorage.org/webt/j0/y7/9d/j0y79dcqh83k2kak44d7te-fb3q.png"><br><br>  Wenn Sie sich die Swagger-Dokumentation ansehen, können Sie schnell verfügbare Ressourcen, unterstützte Vorgänge und Vorgänge im Zusammenhang mit den einzelnen Ressourcen identifizieren: <br><br><img src="https://habrastorage.org/webt/bx/dx/5c/bxdx5cazvuaggiwdhkqrxcwp1es.png"><br><br>  Die Ressource <b>/ users</b> unterstützt <b>GET-</b> und <b>POST-</b> Vorgänge.  Für <b>GET werden</b> die unterstützten Anforderungs- und Antworttypen angezeigt.  Sie sehen auch verschiedene Arten von Antworten: <br><br><img src="https://habrastorage.org/webt/_1/gk/p6/_1gkp6wgcm4_lql3lnlrt49okvg.png"><br><br>  Beachten Sie, dass für Antwort <b>200 die</b> Schaltung auch als <b>Benutzerarray bezeichnet</b> wird.  <b>Der Benutzer</b> ist Teil des <b>Definitionsabschnitts</b> am Ende des Dokuments: <br><br><img src="https://habrastorage.org/webt/wa/-4/9o/wa-49o7ao-f8_lpf-ifh4zptvks.png"><br><br>  Swagger ist völlig unabhängig von der Technologie, mit der Sie einen RESTful-Webdienst implementieren.  Oh, alles basiert auf JSON. <br><br><h3>  Einführung in die Swagger-Benutzeroberfläche </h3><br>  Die Swagger-Benutzeroberfläche ist eine großartige Benutzeroberfläche, die sehr nützlich ist, um die Swagger-Dokumentation für den RESTful-Webdienst zu visualisieren.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schauen Sie sich den Screenshot unten an: </font></font><br><br><img src="https://habrastorage.org/webt/8_/up/yn/8_upynbqoldixni50vm45okd39c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bitte beachten Sie, dass wir eine bestimmte Version des Webdienstes ausgewählt haben, um dessen Dokumentation anzuzeigen. </font><font style="vertical-align: inherit;">Hier ist der gleiche Bildschirm im Detail: </font></font><br><br><img src="https://habrastorage.org/webt/ex/qu/4i/exqu4ioa6t5fai0zagud42n8w_k.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir zur Homepage gehen, werden die aufgelisteten Ressourcen beschrieben: </font></font><br><br><img src="https://habrastorage.org/webt/or/df/3-/ordf3-wrutjlzbey_oxfudbydcm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie können auch die für Ressourcen-URLs unterstützten Operationen sehen: </font></font><br><br><img src="https://habrastorage.org/webt/3z/8m/6q/3z8m6qrd6sgoyteluxobp7duiim.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie auf die GET-Operation einer bestimmten Ressource klicken, erhalten Sie deren Details: </font></font><br><br><img src="https://habrastorage.org/webt/sw/rg/ps/swrgpsafvap9hwycxgqkphfkds0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie können das Schema sehen Modelle werden visuell beschrieben. </font><font style="vertical-align: inherit;">Die Attribute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">birthDate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">links</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">posts werden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ebenfalls angezeigt. </font><font style="vertical-align: inherit;">Sie können auch eine Beispielabfrage ausführen und die Antwort anzeigen:</font></font><br><br><img src="https://habrastorage.org/webt/xb/np/ec/xbnpec9iiud7vdkdqok6scnu-uc.png"><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Swagger Tools verwenden (Open API Standard) </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Tolle an Swagger sind die vielen Tools, die es gibt. </font><font style="vertical-align: inherit;">Sehen Sie sich den folgenden Service an, den wir zuvor zur Erklärung der Versionskontrolle verwendet haben: Hier sehen Sie die automatisch generierte Dokumentation für diesen Service: </font></font><br><br><img src="https://habrastorage.org/webt/vi/el/hn/vielhn-jq9zvj5ql30hgnu0kzme.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger unterstützt sowohl den Contract-First-Ansatz als auch den Code-First-Ansatz. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zu diesem Thema gibt es ein Copyright - </font></font><a href="https://youtu.be/-jwd-9PKr5Y" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zusammenfassung </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In diesem Artikel befassten wir uns mit bewährten Methoden zum Erstellen und Entwerfen von RESTful-Webdiensten. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zusätzliche Lektüre </font></font></h3><br> <a href="https://dzone.com/articles/be-the-best-api-you-can-be" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seien Sie der BESTE in Ihrer REST-API! </font></font></a> <br><br> <a href="https://dzone.com/articles/developing-rest-apis" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST-APIs entwickeln</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de483374/">https://habr.com/ru/post/de483374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de483360/index.html">Elektrische Antriebssteuerung. Amateur Erfahrung</a></li>
<li><a href="../de483364/index.html">Sie können Code bei der Arbeit schreiben, um Ihre Freizeit zu sparen.</a></li>
<li><a href="../de483366/index.html">Internet History: Vernetzung</a></li>
<li><a href="../de483368/index.html">Erstellen des ELF-Dateipackers x86_64 für Linux</a></li>
<li><a href="../de483372/index.html">So trainieren Sie ein DeepPavlov-neuronales Netzwerk auf einem Laptop mit einer GPU</a></li>
<li><a href="../de483376/index.html">Auf der Oberfläche eines Schwarzen Lochs</a></li>
<li><a href="../de483378/index.html">Typensicheres Arbeiten mit Registern ohne Overhead in C ++ 17: Wertebasierte Metaprogrammierung</a></li>
<li><a href="../de483380/index.html">Microservices: Wie wird der Vertrag eingehalten?</a></li>
<li><a href="../de483382/index.html">Kali Linux 2020.1</a></li>
<li><a href="../de483384/index.html">Welche englischen Wörter des IT-Lexikons sprechen wir am häufigsten falsch aus?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>