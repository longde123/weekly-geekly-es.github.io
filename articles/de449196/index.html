<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òéÔ∏è ü•ú ‚ôàÔ∏è Flexiant Cloud Orchestrator: Womit es isst üë®üèª‚Äçüî¨ üê¥ üò≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="F√ºr die Bereitstellung des IaaS-Dienstes (Virtual Data Center) verwenden wir bei Rusonyx das kommerzielle Orchester Flexiant Cloud Orchestrator (FCO)....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Flexiant Cloud Orchestrator: Womit es isst</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rusonyx/blog/449196/"><img src="https://habrastorage.org/webt/hp/gt/ri/hpgtridynrpdujwcmdjyhy25wbs.png"><br><br>  F√ºr die Bereitstellung des IaaS-Dienstes (Virtual Data Center) verwenden wir bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rusonyx</a> das kommerzielle Orchester <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flexiant Cloud Orchestrator</a> (FCO).  Diese L√∂sung hat eine ziemlich einzigartige Architektur, die sie von den in der √ñffentlichkeit bekannten Openstack- und CloudStack-L√∂sungen unterscheidet. <a name="habracut"></a><br><br>  Als Rechenknoten-Hypervisoren werden KVM, VmWare, Xen, Virtuozzo6 / 7 sowie Container von demselben Virtuozzo unterst√ºtzt.  Von den unterst√ºtzten Speichern - lokale, NFS-, Ceph- und Virtuozzo-Speicher. <br><br>  FCO unterst√ºtzt die Erstellung und Verwaltung mehrerer Cluster √ºber eine einzige Schnittstelle.  Das hei√üt, Sie k√∂nnen den Virtuozzo-Cluster und den KVM + Ceph-Cluster verwalten, indem Sie mit der Maus zwischen ihnen wechseln. <br><br>  Im Wesentlichen ist FCO eine umfassende L√∂sung f√ºr Cloud-Anbieter, die neben der Orchestrierung auch die Abrechnung mit allen Einstellungen, Zahlungs-Plug-Ins, Konten, Benachrichtigungen, Wiederverk√§ufern, Tarifen usw. umfasst.  Der Abrechnungsteil kann jedoch nicht alle russischen Nuancen abdecken, weshalb wir uns geweigert haben, ihn zugunsten einer anderen L√∂sung zu verwenden. <br><br>  Das flexible System zur Verteilung von Rechten an alle Cloud-Ressourcen ist sehr ansprechend: Images, Festplatten, Produkte, Server, Firewalls - all dies kann "durchsucht" und Rechte zwischen Benutzern und sogar zwischen Benutzern verschiedener Clients gew√§hrt werden.  Jeder Client kann mehrere unabh√§ngige Rechenzentren in seiner Cloud erstellen und diese √ºber ein einziges Control Panel verwalten. <br><br><img src="https://habrastorage.org/webt/h8/yu/oy/h8yuoyokzissjdota2jxf_wm5ym.png"><br><br>  Architektonisch besteht FCO aus mehreren Teilen, von denen jeder seinen eigenen unabh√§ngigen Code hat und einige eine eigene Datenbank haben. <br><br>  <b>Skyline</b> - Admin und Benutzeroberfl√§che <br>  <b>Jade</b> - Gesch√§ftslogik, Abrechnung, Aufgabenverwaltung <br>  <b>Tigerlily</b> ist ein Servicekoordinator, der den Informationsaustausch zwischen Gesch√§ftslogik und Clustern verwaltet und koordiniert. <br>  <b>XVPManager</b> - Verwaltung von Clusterelementen: Knoten, Speicher, Netzwerk und virtuelle Maschinen. <br>  <b>XVPAgent</b> - Ein Agent, der auf Knoten installiert ist, um mit XVPManager zu interagieren <br><br><img src="https://habrastorage.org/webt/tn/mn/-p/tnmn-ppufyodbq1vwyfi6bzzv78.jpeg"><br><br>  Eine detaillierte Geschichte √ºber die Architektur jeder Komponente, die wir in eine Reihe von Artikeln einf√ºgen m√∂chten, es sei denn, das Thema ist nat√ºrlich von Interesse. <br><br>  Der Hauptvorteil von FCO liegt in seiner ‚ÄûBox‚Äú.  Es bietet Einfachheit und Minimalismus.  F√ºr den Steuerknoten wird eine virtuelle Maschine unter Ubuntu zugewiesen, in der alle erforderlichen Pakete installiert sind.  Alle Einstellungen werden in Form von Variablenwerten in Konfigurationsdateien √ºbertragen: <br><br><pre><code class="plaintext hljs"># cat /etc/extility/config/vars ‚Ä¶ export LIMIT_MAX_LIST_ADMIN_DEFAULT="30000" export LIMIT_MAX_LIST_USER_DEFAULT="200" export LOGDIR="/var/log/extility" export LOG_FILE="misc.log" export LOG_FILE_LOG4JHOSTBILLMODULE="hostbillmodule.log" export LOG_FILE_LOG4JJADE="jade.log" export LOG_FILE_LOG4JTL="tigerlily.log" export LOG_FILE_LOG4JXVP="xvpmanager.log" export LOG_FILE_VARS="misc.log" ‚Ä¶</code> </pre> <br>  Die gesamte Konfiguration wird zun√§chst in den Vorlagen korrigiert, dann startet der Generator <br>  # build-config, das die vars-Datei bildet und die Dienste anweist, die Konfiguration erneut zu lesen.  Die Benutzeroberfl√§che ist sch√∂n und kann leicht gebrandet werden. <br><br><img src="https://habrastorage.org/webt/wc/uv/sj/wcuvsjumwmzojh9fbfwxd4royvy.jpeg"><br><br>  Wie Sie sehen k√∂nnen, besteht die Benutzeroberfl√§che aus Widgets, deren Verwaltung dem Benutzer zur Verf√ºgung steht.  Er kann Widgets einfach zur Seite hinzuf√ºgen / daraus entfernen und so das Dashboard bilden, das er ben√∂tigt. <br><br>  Trotz seiner N√§he ist FCO ein hochgradig anpassbares System.  Es verf√ºgt √ºber eine Vielzahl von Einstellungen und Einstiegspunkten zum √Ñndern des Workflows: <br><br><ol><li>  Benutzerdefinierte Plugins werden unterst√ºtzt. Sie k√∂nnen beispielsweise Ihre eigene Abrechnungsmethode oder Ihre eigene externe Ressource schreiben, um sie dem Benutzer bereitzustellen </li><li>  Benutzerdefinierte Trigger f√ºr bestimmte Ereignisse werden unterst√ºtzt, z. B. das Hinzuf√ºgen der ersten virtuellen Maschine zum Client beim Erstellen </li><li>  Benutzerdefinierte Widgets werden in der Benutzeroberfl√§che unterst√ºtzt, z. B. das Einbetten von Videos von YouTube direkt in die Benutzeroberfl√§che. </li></ol><br>  Alle Anpassungen sind in der FDL-Sprache geschrieben, die auf Lua basiert.  Wenn Sie Lua kennen, wird es keine Probleme mit FDL geben. <br><br>  Hier ist ein Beispiel f√ºr einen der einfachsten Trigger, die wir verwenden.  Mit diesem Ausl√∂ser k√∂nnen Benutzer ihre eigenen Bilder nicht f√ºr andere Clients freigeben.  Wir tun dies, damit ein Benutzer kein sch√§dliches Bild f√ºr andere Benutzer erstellen kann. <br><br><pre> <code class="plaintext hljs">function register() return {"pre_user_api_publish"} end function pre_user_api_publish(p) if(p==nil) then return{ ref = "cancelPublishImage", name = "Cancel publishing", description = "Cancel all user's images publishing", triggerType = "PRE_USER_API_CALL", triggerOptions = {"publishResource", "publishImage"}, api = "TRIGGER", version = 1, } end -- Turn publishing off return {exitState = "CANCEL"} end</code> </pre><br>  Die Registerfunktion wird vom FCO-Kernel aufgerufen.  Es wird der Name der aufzurufenden Funktion zur√ºckgegeben.  Der Parameter "p" dieser Funktion speichert den Anrufwettbewerb und ist beim ersten Aufruf leer (null).  Dadurch k√∂nnen wir unseren Ausl√∂ser registrieren.  In triggerType zeigen wir, dass der Trigger VOR dem Ver√∂ffentlichungsvorgang aufgerufen wird und nur f√ºr Benutzer gilt.  F√ºr Systemadministratoren erlauben wir nat√ºrlich, dass alles ver√∂ffentlicht wird.  In triggerOptions beschreiben wir die Operationen, f√ºr die der Trigger ausgel√∂st wird. <br><br>  Und am wichtigsten ist, dass Sie {exitState = ‚ÄúCANCEL‚Äù} zur√ºckgeben, weshalb der Trigger entwickelt wurde.  Es wird ein Fehler zur√ºckgegeben, wenn der Benutzer versucht, sein Bild in der Systemsteuerung freizugeben. <br><br>  In der FCO-Architektur wird jedes Objekt (Festplatte, Server, Image, Netzwerk, Netzwerkadapter usw.) als Ressourcenentit√§t dargestellt, die gemeinsame Parameter hat: <br><br><ul><li>  Ressourcen-UUID </li><li>  Ressourcenname </li><li>  Ressourcentyp </li><li>  UUID des Ressourcenbesitzers </li><li>  Ressourcenstatus (aktiv, inaktiv) </li><li>  Ressourcenmetadaten </li><li>  Ressourcenschl√ºssel </li><li>  UUID des Produkts, zu dem die Ressource geh√∂rt </li><li>  VDC-Ressource </li></ul><br>  Dies ist sehr praktisch, wenn Sie an der API arbeiten und mit allen Ressourcen nach demselben Prinzip arbeiten.  Produkte werden vom Anbieter konfiguriert und vom Kunden bestellt.  Da unsere Abrechnung am Rande steht, kann der Kunde jedes Produkt frei und kostenlos √ºber das Panel bestellen.  Dies wird sp√§ter bei der Abrechnung ber√ºcksichtigt.  Das Produkt kann sein - IP-Adresse pro Stunde, ein zus√§tzliches GB Festplatte pro Stunde oder nur ein Server. <br><br>  Sie k√∂nnen bestimmte Ressourcen mit Schl√ºsseln markieren, um die Logik der Arbeit mit ihnen zu √§ndern.  Beispielsweise k√∂nnen wir drei physische Knoten mit dem Weight-Schl√ºssel markieren und einige Clients mit demselben Schl√ºssel markieren, wodurch diese Knoten f√ºr diese Clients pers√∂nlich hervorgehoben werden.  Wir verwenden einen solchen Mechanismus f√ºr VIP-Kunden, die keine Nachbarn neben ihren VMs m√∂gen.  Die Funktionalit√§t selbst kann viel breiter angewendet werden. <br><br>  Das Lizenzmodell impliziert die Zahlung f√ºr jeden Kern eines Prozessors eines physischen Knotens.  Die Kosten werden auch von der Anzahl der Clustertypen beeinflusst.  Wenn Sie beispielsweise KVM und VMware zusammen verwenden m√∂chten, erh√∂hen sich die Lizenzkosten. <br><br>  FCO ist ein vollwertiges Produkt, dessen Funktionalit√§t sehr umfangreich ist. Daher planen wir, mehrere Artikel gleichzeitig mit einer detaillierten Beschreibung der Funktionsweise des Netzwerkteils zu erstellen. <br><br>  Nachdem wir mehrere Jahre mit diesem Orchester gearbeitet haben, k√∂nnen wir es als sehr geeignet markieren.  Leider ist das Produkt nicht ohne M√§ngel: <br><br><ul><li>  Wir mussten die Datenbank optimieren, da die Abfragen mit zunehmender Datenmenge langsamer wurden. </li><li>  Nach einem Unfall funktionierte der Wiederherstellungsmechanismus aufgrund eines Fehlers nicht und wir mussten die Maschinen ungl√ºcklicher Clients mit unseren eigenen Skripten hochfahren. </li><li>  Der Mechanismus zur Erkennung der Unzug√§nglichkeit von Knoten ist mit dem Code verbunden und kann nicht angepasst werden.  Das hei√üt, wir k√∂nnen keine eigenen Richtlinien erstellen, um die Unzug√§nglichkeit eines Knotens zu bestimmen. </li><li>  Die Protokollierung ist nicht immer detailliert.  Manchmal reicht der Quellcode einiger Komponenten nicht aus, um die Gr√ºnde zu verstehen, wenn Sie zur Analyse eines bestimmten Problems auf eine sehr niedrige Ebene gehen m√ºssen. </li></ul><br>  <b>GESAMT:</b> Insgesamt ist die Produkterfahrung gut.  Wir stehen in st√§ndigem Kontakt mit den Entwicklern des Orchesters.  Die Jungs sind f√ºr eine konstruktive Zusammenarbeit arrangiert. <br><br>  Trotz seiner Einfachheit verf√ºgt FCO √ºber eine breite Funktionalit√§t.  In zuk√ºnftigen Artikeln planen wir, uns mit folgenden Themen zu befassen: <br><br><ul><li>  Vernetzung bei FCO </li><li>  Unterst√ºtzung f√ºr Live-Wiederherstellung und FQP-Protokoll </li><li>  Schreiben von benutzerdefinierten Plugins und Widgets </li><li>  Anschlie√üen zus√§tzlicher Dienste wie Load Balancer und Acronis </li><li>  Backup </li><li>  Einheitlicher Mechanismus zum Konfigurieren und Konfigurieren von Knoten </li><li>  Metadatenverarbeitung f√ºr virtuelle Maschinen </li></ul><br>  <b>PS</b> Schreiben Sie in die Kommentare, wenn andere Aspekte interessant sind.  Bleib dran! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de449196/">https://habr.com/ru/post/de449196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de449184/index.html">Erkennen von Daten in nat√ºrlicher Sprache mit Python3</a></li>
<li><a href="../de449186/index.html">Botnets im Jahr 2019: Aktuelle Gefahren und Sch√§den f√ºr kleine und mittlere Unternehmen</a></li>
<li><a href="../de449188/index.html">Tesla Autonomy Investor Day: Neuer Tesla FSDC (Full Self-Driving Computer), voller Autopilot, Robotaxi</a></li>
<li><a href="../de449192/index.html">5 bis 7 und einen Eimer Kaffee</a></li>
<li><a href="../de449194/index.html">Warum Sie am Rand und im Anstellwinkel nicht auf dem Fl√ºgel laufen k√∂nnen</a></li>
<li><a href="../de449198/index.html">FFmpeg Erste Schritte mit Visual Studio</a></li>
<li><a href="../de449200/index.html">H√∂hepunkte der Vergangenheit Moskau Python Conf ++ 2019: Umwandlung in eine Plattform f√ºr Kommunikation</a></li>
<li><a href="../de449204/index.html">Da betrachten wir die Metriken f√ºr die Entwicklung und Unterst√ºtzung der Dokumentation. Yandex-Bericht</a></li>
<li><a href="../de449208/index.html">So erstellen und verwalten Sie erfolgreiche Teams</a></li>
<li><a href="../de449210/index.html">So funktioniert HPE SimpliVity 380 f√ºr VDI: Tests mit hoher Belastung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>