<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤½ğŸ½ ğŸˆ³ ğŸ—¯ï¸ Genau einmal ist NICHT genau dasselbe: Artikelanalyse ğŸ¥… ğŸ¿ ğŸ›ŒğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="EinfÃ¼hrung 


 Ich habe mich entschlossen, einen Artikel zu analysieren , der einige interessante Details der Streaming-Verarbeitung genau einmal besc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Genau einmal ist NICHT genau dasselbe: Artikelanalyse</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419935/"><h2 id="vvedenie">  EinfÃ¼hrung </h2><br><p>  Ich habe mich entschlossen, einen Artikel zu analysieren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, der einige interessante Details der Streaming-Verarbeitung genau einmal beschreibt: genau einmal</a> .  Tatsache ist, dass einige Autoren die Begriffe sehr seltsam verstehen.  Die Analyse des Artikels wird es uns ermÃ¶glichen, viele Details tiefer zu klÃ¤ren, weil  Durch das Erkennen von Inkonsistenzen und KuriositÃ¤ten kÃ¶nnen Sie die Konzepte und Bedeutungen besser kennenlernen. </p><br><p>  Fangen wir an. </p><br><h2 id="analiz">  Analyse </h2><br><p>  Alles beginnt sehr gut: </p><a name="habracut"></a><br><blockquote> Die verteilte Ereignisstromverarbeitung ist im Bereich Big Data zu einem immer heiÃŸeren Thema geworden.  Zu den bemerkenswerten Stream Processing Engines (SPEs) gehÃ¶ren Apache Storm, Apache Flink, Heron, Apache Kafka (Kafka Streams) und Apache Spark (Spark Streaming).  Eines der bemerkenswertesten und am meisten diskutierten Merkmale von SPEs ist ihre Verarbeitungssemantik, wobei "genau einmal" eine der gefragtesten ist und viele SPEs behaupten, "genau einmal" Verarbeitungssemantik bereitzustellen. </blockquote><p>  Das heiÃŸt, die Datenverarbeitung ist Ã¤uÃŸerst wichtig usw., und das diskutierte Thema ist genau einmal.  Lassen Sie uns darÃ¼ber diskutieren. </p><br><blockquote>  Es gibt jedoch viele MissverstÃ¤ndnisse und Unklarheiten darÃ¼ber, was genau â€genau einmalâ€œ ist, was es bedeutet und was es wirklich bedeutet, wenn einzelne SPEs behaupten, es bereitzustellen. </blockquote><p>  In der Tat ist es sehr wichtig zu verstehen, was es ist.  Um dies zu tun, wÃ¤re es schÃ¶n, vor langen Ãœberlegungen die richtige Definition zu geben.  Und wer bin ich, der so verdammt gute RatschlÃ¤ge gibt? </p><br><blockquote>  Ich werde diskutieren, wie sich die Verarbeitungssemantik â€genau einmalâ€œ in vielen gÃ¤ngigen SPEs unterscheidet und warum â€genau einmalâ€œ besser als effektiv einmal beschrieben werden kann </blockquote><p>  Neue Begriffe zu erfinden ist natÃ¼rlich eine wichtige Aufgabe.  Ich liebe dieses Ding selbst.  Nur dafÃ¼r ist eine BegrÃ¼ndung erforderlich.  Versuchen wir ihn zu finden. </p><br><p>  Ich werde die offensichtlichen Dinge nicht als gerichtete Verarbeitungsgraphen usw. beschreiben.  Leser kÃ¶nnen den Originalartikel selbst lesen.  DarÃ¼ber hinaus sind fÃ¼r die Analyse dieser Details irrelevant.  Ich werde nur ein Bild geben: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/14b/024/a60/14b024a60f1b9403430bd43ff77cb50b.png"></p><br><p>  Als nÃ¤chstes folgt eine Beschreibung der Semantik: </p><br><ul><li>  HÃ¶chstens einmal, d.h.  nicht mehr als einmal.  Angesichts der offensichtlichen Offensichtlichkeit ist es Ã¤uÃŸerst schwierig, ein solches Verhalten in Grenzszenarien wie AbstÃ¼rzen, Unterbrechungen der NetzwerkkonnektivitÃ¤t und mehr zu gewÃ¤hrleisten.  Aber fÃ¼r den Autor ist alles einfach: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b12/02f/cb0/b1202fcb0c735e893daf0373ba23255e.png"></p><br><ul><li>  Mindestens einmal, d.h.  mindestens einmal.  Das Schema ist komplexer.  Und der Rechen kann mehr gesammelt werden: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/879/4cd/bd3/8794cdbd351ae965b267e7a3d51ae761.png"></p><br><ul><li>  Genau einmal.  Was ist genau einmal? </li></ul><br><blockquote>  Ereignisse werden von allen Bedienern in der Stream-Anwendung garantiert â€genau einmalâ€œ verarbeitet, auch bei verschiedenen Fehlern. </blockquote><p>  Das heiÃŸt,  Die Garantie fÃ¼r eine genau einmalige Verarbeitung besteht, wenn die Verarbeitung "genau einmal" erfolgt ist. </p><br><p>  FÃ¼hlen Sie die Kraft der Entschlossenheit?  Umformulieren: Einmalige Verarbeitung ist, wenn die Verarbeitung "einmalig" erfolgt.  Ja, es heiÃŸt auch, dass diese Garantie im Falle eines Ausfalls erhalten bleiben sollte.  FÃ¼r verteilte Systeme ist dies jedoch eine offensichtliche Sache.  Und die AnfÃ¼hrungszeichen deuten darauf hin, dass hier etwas nicht stimmt.  Das Definieren mit AnfÃ¼hrungszeichen, ohne zu erklÃ¤ren, was dies bedeutet, ist ein Zeichen fÃ¼r einen tiefen und nachdenklichen Ansatz. </p><br><p>  Das Folgende ist eine Beschreibung, wie eine solche Semantik implementiert wird.  Und hier mÃ¶chte ich nÃ¤her darauf eingehen. </p><br><blockquote>  Zwei beliebte Mechanismen werden normalerweise verwendet, um eine "genau einmalige" Verarbeitungssemantik zu erreichen. <br><ol><li>  Verteilter Snapshot / State Checkpointing </li><li>  Mindestens einmalige Ereigniszustellung plus Nachrichtendeduplizierung </li></ol><br></blockquote><p>  Wenn der erste Mechanismus in Bezug auf SchnappschÃ¼sse und PrÃ¼fpunkte keine Fragen aufwirft, abgesehen von einigen Details wie der Effizienz, gibt es kleine Probleme mit dem zweiten, die der Autor ignoriert hat. </p><br><p>  Aus irgendeinem Grund versteht es sich, dass ein Handler nur deterministisch sein kann.  Im Fall eines nicht deterministischen Handlers liefert jeder nachfolgende Neustart im Allgemeinen andere Ausgabewerte und -zustÃ¤nde, was bedeutet, dass die Deduplizierung nicht funktioniert, weil  Ausgabewerte sind unterschiedlich.  Somit wird der allgemeine Mechanismus viel komplizierter sein als im Artikel beschrieben.  Oder ehrlich gesagt ist ein solcher Mechanismus falsch. </p><br><p>  Wir wenden uns jedoch dem leckersten zu: </p><br><blockquote><h2 id="is-exactly-once-really-exactly-once">  Ist genau einmal wirklich genau einmal? </h2><br><br>  Lassen Sie uns nun noch einmal untersuchen, was die "genau einmalige" Verarbeitungssemantik dem Endbenutzer wirklich garantiert.  Das Label â€genau einmalâ€œ beschreibt irrefÃ¼hrend, was genau einmal gemacht wird. </blockquote><p>  Es wird gesagt, dass es Zeit ist, dieses Konzept zu Ã¼berdenken, als  Es gibt einige Inkonsistenzen. </p><br><blockquote>  Einige denken vielleicht, dass "genau einmal" die Garantie fÃ¼r die Ereignisverarbeitung beschreibt, bei der jedes Ereignis im Stream nur einmal verarbeitet wird.  In der RealitÃ¤t gibt es keine SPE, die eine genau einmalige Verarbeitung garantieren kann.  Die Garantie, dass die benutzerdefinierte Logik in jedem Operator nur einmal pro Ereignis ausgefÃ¼hrt wird, ist angesichts willkÃ¼rlicher Fehler unmÃ¶glich, da eine teilweise AusfÃ¼hrung des Benutzercodes eine allgegenwÃ¤rtige MÃ¶glichkeit ist. </blockquote><p>  Sehr geehrter Autor, es lohnt sich daran zu erinnern, wie moderne Prozessoren funktionieren.  Jeder Prozessor in der Verarbeitung fÃ¼hrt eine groÃŸe Anzahl paralleler Stufen aus.  DarÃ¼ber hinaus gibt es Zweige, in denen der Prozessor beginnt, die falschen Aktionen auszufÃ¼hren, wenn der VerzweigungsprÃ¤diktor falsch ist.  In diesem Fall werden die Aktionen zurÃ¼ckgesetzt.  Somit kann der Prozessor denselben Code zweimal ausfÃ¼hren, auch wenn keine Fehler aufgetreten sind! </p><br><p>  Der aufmerksame Leser wird sofort ausrufen: Weil Auspuff wichtig ist und nicht, wie er ausgefÃ¼hrt wird.  Genau!  Was zÃ¤hlt, ist, was als Ergebnis passiert ist, nicht wie es tatsÃ¤chlich passiert ist.  Wenn das Ergebnis so ist, als ob es genau einmal passiert wÃ¤re, bedeutet dies, dass es genau einmal passiert ist.  Nicht finden?  Und alles andere ist Schale, irrelevant.  Systeme sind komplex und die daraus resultierenden Abstraktionen erzeugen in gewisser Weise nur die Illusion der AusfÃ¼hrung.  Es scheint uns, dass der Code sequentiell ausgefÃ¼hrt wird, Befehl fÃ¼r Befehl, der zuerst liest, dann schreibt, dann einen neuen Befehl.  Das ist aber nicht so, alles ist viel komplizierter.  Und die Essenz korrekter Abstraktionen besteht darin, die Illusion einfacher und verstÃ¤ndlicher Garantien aufrechtzuerhalten, ohne jedes Mal tief in die Sache einzusteigen, wenn Sie einer Variablen Werte zuweisen mÃ¼ssen. </p><br><p>  Und das ganze Problem dieses Artikels liegt in der Tatsache, dass genau einmal eine Abstraktion ist, mit der Sie Anwendungen erstellen kÃ¶nnen, ohne an Duplikate und verlorene Werte zu denken.  Dass auch im Herbst alles gut wird.  Und dafÃ¼r mÃ¼ssen keine neuen Begriffe erfunden werden. </p><br><p>  Der Beispielcode im Artikel zeigt deutlich, dass das VerstÃ¤ndnis fÃ¼r das Schreiben von Handlern nicht ausreichend ist: </p><br><pre><code class="hljs cs">Map (Event <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) { Print <span class="hljs-string"><span class="hljs-string">"Event ID: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.getId() Return <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> }</code> </pre> <br><p>  Der Leser wird gebeten, den Code unabhÃ¤ngig umzuschreiben, um die Fehler des Autors des Artikels nicht zu wiederholen. </p><br><blockquote>  Was garantieren SPEs, wenn sie eine â€genau einmaligeâ€œ Verarbeitungssemantik beanspruchen?  Wenn nicht garantiert werden kann, dass die Benutzerlogik genau einmal ausgefÃ¼hrt wird, was wird dann genau einmal ausgefÃ¼hrt?  Wenn SPEs eine "genau einmalige" Verarbeitungssemantik beanspruchen, sagen sie tatsÃ¤chlich, dass sie garantieren kÃ¶nnen, dass Aktualisierungen des von der SPE verwalteten Status nur einmal in einem dauerhaften Backend-Speicher festgeschrieben werden. </blockquote><p>  Der Benutzer benÃ¶tigt keine Garantie fÃ¼r die physische AusfÃ¼hrung des Codes.  Wenn Sie wissen, wie der Prozessor funktioniert, kÃ¶nnen Sie leicht den Schluss ziehen, dass dies nicht mÃ¶glich ist.  Die Hauptsache ist die logische AusfÃ¼hrung genau einmal, als ob es Ã¼berhaupt keine Fehler gÃ¤be.  Das Anziehen der Konzepte "Commit to Data Warehouse" verschlimmert nur das mangelnde VerstÃ¤ndnis des Autors fÃ¼r grundlegende Dinge, weil  Es gibt Implementierungen einer solchen Semantik, ohne dass ein Commit erforderlich ist. </p><br><p>  FÃ¼r weitere Informationen kÃ¶nnen Sie meinen Artikel kurz lesen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heterogene wettbewerbsfÃ¤hige Datenverarbeitung in Echtzeit streng einmal</a> . </p><br><blockquote>  Mit anderen Worten, die Verarbeitung eines Ereignisses kann mehr als einmal erfolgen, aber der Effekt dieser Verarbeitung wird nur einmal im dauerhaften Backend-Statusspeicher wiedergegeben. </blockquote><p>  Dass es fÃ¼r den Benutzer einen "dauerhaften Backend-State-Store" gibt, ist absolut violett.  Nur der Effekt der Verarbeitung ist wichtig, d.h.  Konsistenz- und Ausgabewerte Ã¼ber den gesamten Zeitraum der Verarbeitung von Streaming-Daten.  Es ist erwÃ¤hnenswert, dass fÃ¼r einige Aufgaben kein dauerhafter Backend-State-Store erforderlich ist, und es wÃ¤re schÃ¶n, genau einmal zu garantieren. </p><br><blockquote>  Hier bei Streamlio haben wir entschieden, dass effektiv einmal der beste Begriff fÃ¼r die Beschreibung dieser Verarbeitungssemantik ist. </blockquote><p>  Ein typisches Beispiel fÃ¼r eine dumme Eingabe von Konzepten: Wir werden einige Beispiele und langwierige Argumente fÃ¼r einen ganzen Absatz schreiben und am Ende hinzufÃ¼gen, dass â€wir dieses Konzept definierenâ€œ.  Die Genauigkeit und Klarheit der Definitionen fÃ¼hrt zu einer wirklich lebendigen emotionalen Reaktion. </p><br><h2 id="vyvody">  Schlussfolgerungen </h2><br><p>  Ein MissverstÃ¤ndnis des Wesens von Abstraktionen fÃ¼hrt zu einer Verzerrung der ursprÃ¼nglichen Bedeutung bestehender Konzepte und der anschlieÃŸenden Schaffung neuer Begriffe von Grund auf neu. </p><br><p>  [1] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Genau einmal ist NICHT genau dasselbe</a> . <br>  [2] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heterogene wettbewerbsfÃ¤hige Echtzeit-Datenverarbeitung nur einmal</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419935/">https://habr.com/ru/post/de419935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419925/index.html">Versionskontrolle einzelner Dateien mit dem GitHub Gist</a></li>
<li><a href="../de419927/index.html">[DotNetBook] Ausnahmen: Typ Systemarchitektur</a></li>
<li><a href="../de419929/index.html">[DotNetBook] Ausnahmeereignisse und wie Sie StackOverflow und ExecutionEngineException von Grund auf neu erstellen</a></li>
<li><a href="../de419931/index.html">[DotNetBook] Zeit fÃ¼r unterhaltsame Geschichten: auÃŸergewÃ¶hnlich auÃŸergewÃ¶hnliche Situationen</a></li>
<li><a href="../de419933/index.html">So fÃ¼hren Sie Benutzersuchen in Github mit Angular durch</a></li>
<li><a href="../de419939/index.html">Wie ich die Navigation in React Native nicht so schrecklich gemacht habe</a></li>
<li><a href="../de419941/index.html">Audiomania Office Fototour: Teil Eins</a></li>
<li><a href="../de419943/index.html">Was wir im Juli gelesen haben: Wie man Zeit zum Lesen findet, fÃ¼nf BÃ¼cher fÃ¼r Teamleiter und einige neue Artikel</a></li>
<li><a href="../de419945/index.html">So bereiten Sie sich auf ein Interview bei Google vor und geben es nicht weiter. Zweimal</a></li>
<li><a href="../de419947/index.html">Stellen Sie mit Raspbian Stretch Lite eine Verbindung zu PiZeroW her, ohne zusÃ¤tzliche Adapter und einen Monitor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>