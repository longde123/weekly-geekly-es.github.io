<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤽🏽 🈳 🗯️ Genau einmal ist NICHT genau dasselbe: Artikelanalyse 🥅 🎿 🛌🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einführung 


 Ich habe mich entschlossen, einen Artikel zu analysieren , der einige interessante Details der Streaming-Verarbeitung genau einmal besc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Genau einmal ist NICHT genau dasselbe: Artikelanalyse</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419935/"><h2 id="vvedenie">  Einführung </h2><br><p>  Ich habe mich entschlossen, einen Artikel zu analysieren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, der einige interessante Details der Streaming-Verarbeitung genau einmal beschreibt: genau einmal</a> .  Tatsache ist, dass einige Autoren die Begriffe sehr seltsam verstehen.  Die Analyse des Artikels wird es uns ermöglichen, viele Details tiefer zu klären, weil  Durch das Erkennen von Inkonsistenzen und Kuriositäten können Sie die Konzepte und Bedeutungen besser kennenlernen. </p><br><p>  Fangen wir an. </p><br><h2 id="analiz">  Analyse </h2><br><p>  Alles beginnt sehr gut: </p><a name="habracut"></a><br><blockquote> Die verteilte Ereignisstromverarbeitung ist im Bereich Big Data zu einem immer heißeren Thema geworden.  Zu den bemerkenswerten Stream Processing Engines (SPEs) gehören Apache Storm, Apache Flink, Heron, Apache Kafka (Kafka Streams) und Apache Spark (Spark Streaming).  Eines der bemerkenswertesten und am meisten diskutierten Merkmale von SPEs ist ihre Verarbeitungssemantik, wobei "genau einmal" eine der gefragtesten ist und viele SPEs behaupten, "genau einmal" Verarbeitungssemantik bereitzustellen. </blockquote><p>  Das heißt, die Datenverarbeitung ist äußerst wichtig usw., und das diskutierte Thema ist genau einmal.  Lassen Sie uns darüber diskutieren. </p><br><blockquote>  Es gibt jedoch viele Missverständnisse und Unklarheiten darüber, was genau „genau einmal“ ist, was es bedeutet und was es wirklich bedeutet, wenn einzelne SPEs behaupten, es bereitzustellen. </blockquote><p>  In der Tat ist es sehr wichtig zu verstehen, was es ist.  Um dies zu tun, wäre es schön, vor langen Überlegungen die richtige Definition zu geben.  Und wer bin ich, der so verdammt gute Ratschläge gibt? </p><br><blockquote>  Ich werde diskutieren, wie sich die Verarbeitungssemantik „genau einmal“ in vielen gängigen SPEs unterscheidet und warum „genau einmal“ besser als effektiv einmal beschrieben werden kann </blockquote><p>  Neue Begriffe zu erfinden ist natürlich eine wichtige Aufgabe.  Ich liebe dieses Ding selbst.  Nur dafür ist eine Begründung erforderlich.  Versuchen wir ihn zu finden. </p><br><p>  Ich werde die offensichtlichen Dinge nicht als gerichtete Verarbeitungsgraphen usw. beschreiben.  Leser können den Originalartikel selbst lesen.  Darüber hinaus sind für die Analyse dieser Details irrelevant.  Ich werde nur ein Bild geben: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/14b/024/a60/14b024a60f1b9403430bd43ff77cb50b.png"></p><br><p>  Als nächstes folgt eine Beschreibung der Semantik: </p><br><ul><li>  Höchstens einmal, d.h.  nicht mehr als einmal.  Angesichts der offensichtlichen Offensichtlichkeit ist es äußerst schwierig, ein solches Verhalten in Grenzszenarien wie Abstürzen, Unterbrechungen der Netzwerkkonnektivität und mehr zu gewährleisten.  Aber für den Autor ist alles einfach: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b12/02f/cb0/b1202fcb0c735e893daf0373ba23255e.png"></p><br><ul><li>  Mindestens einmal, d.h.  mindestens einmal.  Das Schema ist komplexer.  Und der Rechen kann mehr gesammelt werden: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/879/4cd/bd3/8794cdbd351ae965b267e7a3d51ae761.png"></p><br><ul><li>  Genau einmal.  Was ist genau einmal? </li></ul><br><blockquote>  Ereignisse werden von allen Bedienern in der Stream-Anwendung garantiert „genau einmal“ verarbeitet, auch bei verschiedenen Fehlern. </blockquote><p>  Das heißt,  Die Garantie für eine genau einmalige Verarbeitung besteht, wenn die Verarbeitung "genau einmal" erfolgt ist. </p><br><p>  Fühlen Sie die Kraft der Entschlossenheit?  Umformulieren: Einmalige Verarbeitung ist, wenn die Verarbeitung "einmalig" erfolgt.  Ja, es heißt auch, dass diese Garantie im Falle eines Ausfalls erhalten bleiben sollte.  Für verteilte Systeme ist dies jedoch eine offensichtliche Sache.  Und die Anführungszeichen deuten darauf hin, dass hier etwas nicht stimmt.  Das Definieren mit Anführungszeichen, ohne zu erklären, was dies bedeutet, ist ein Zeichen für einen tiefen und nachdenklichen Ansatz. </p><br><p>  Das Folgende ist eine Beschreibung, wie eine solche Semantik implementiert wird.  Und hier möchte ich näher darauf eingehen. </p><br><blockquote>  Zwei beliebte Mechanismen werden normalerweise verwendet, um eine "genau einmalige" Verarbeitungssemantik zu erreichen. <br><ol><li>  Verteilter Snapshot / State Checkpointing </li><li>  Mindestens einmalige Ereigniszustellung plus Nachrichtendeduplizierung </li></ol><br></blockquote><p>  Wenn der erste Mechanismus in Bezug auf Schnappschüsse und Prüfpunkte keine Fragen aufwirft, abgesehen von einigen Details wie der Effizienz, gibt es kleine Probleme mit dem zweiten, die der Autor ignoriert hat. </p><br><p>  Aus irgendeinem Grund versteht es sich, dass ein Handler nur deterministisch sein kann.  Im Fall eines nicht deterministischen Handlers liefert jeder nachfolgende Neustart im Allgemeinen andere Ausgabewerte und -zustände, was bedeutet, dass die Deduplizierung nicht funktioniert, weil  Ausgabewerte sind unterschiedlich.  Somit wird der allgemeine Mechanismus viel komplizierter sein als im Artikel beschrieben.  Oder ehrlich gesagt ist ein solcher Mechanismus falsch. </p><br><p>  Wir wenden uns jedoch dem leckersten zu: </p><br><blockquote><h2 id="is-exactly-once-really-exactly-once">  Ist genau einmal wirklich genau einmal? </h2><br><br>  Lassen Sie uns nun noch einmal untersuchen, was die "genau einmalige" Verarbeitungssemantik dem Endbenutzer wirklich garantiert.  Das Label „genau einmal“ beschreibt irreführend, was genau einmal gemacht wird. </blockquote><p>  Es wird gesagt, dass es Zeit ist, dieses Konzept zu überdenken, als  Es gibt einige Inkonsistenzen. </p><br><blockquote>  Einige denken vielleicht, dass "genau einmal" die Garantie für die Ereignisverarbeitung beschreibt, bei der jedes Ereignis im Stream nur einmal verarbeitet wird.  In der Realität gibt es keine SPE, die eine genau einmalige Verarbeitung garantieren kann.  Die Garantie, dass die benutzerdefinierte Logik in jedem Operator nur einmal pro Ereignis ausgeführt wird, ist angesichts willkürlicher Fehler unmöglich, da eine teilweise Ausführung des Benutzercodes eine allgegenwärtige Möglichkeit ist. </blockquote><p>  Sehr geehrter Autor, es lohnt sich daran zu erinnern, wie moderne Prozessoren funktionieren.  Jeder Prozessor in der Verarbeitung führt eine große Anzahl paralleler Stufen aus.  Darüber hinaus gibt es Zweige, in denen der Prozessor beginnt, die falschen Aktionen auszuführen, wenn der Verzweigungsprädiktor falsch ist.  In diesem Fall werden die Aktionen zurückgesetzt.  Somit kann der Prozessor denselben Code zweimal ausführen, auch wenn keine Fehler aufgetreten sind! </p><br><p>  Der aufmerksame Leser wird sofort ausrufen: Weil Auspuff wichtig ist und nicht, wie er ausgeführt wird.  Genau!  Was zählt, ist, was als Ergebnis passiert ist, nicht wie es tatsächlich passiert ist.  Wenn das Ergebnis so ist, als ob es genau einmal passiert wäre, bedeutet dies, dass es genau einmal passiert ist.  Nicht finden?  Und alles andere ist Schale, irrelevant.  Systeme sind komplex und die daraus resultierenden Abstraktionen erzeugen in gewisser Weise nur die Illusion der Ausführung.  Es scheint uns, dass der Code sequentiell ausgeführt wird, Befehl für Befehl, der zuerst liest, dann schreibt, dann einen neuen Befehl.  Das ist aber nicht so, alles ist viel komplizierter.  Und die Essenz korrekter Abstraktionen besteht darin, die Illusion einfacher und verständlicher Garantien aufrechtzuerhalten, ohne jedes Mal tief in die Sache einzusteigen, wenn Sie einer Variablen Werte zuweisen müssen. </p><br><p>  Und das ganze Problem dieses Artikels liegt in der Tatsache, dass genau einmal eine Abstraktion ist, mit der Sie Anwendungen erstellen können, ohne an Duplikate und verlorene Werte zu denken.  Dass auch im Herbst alles gut wird.  Und dafür müssen keine neuen Begriffe erfunden werden. </p><br><p>  Der Beispielcode im Artikel zeigt deutlich, dass das Verständnis für das Schreiben von Handlern nicht ausreichend ist: </p><br><pre><code class="hljs cs">Map (Event <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) { Print <span class="hljs-string"><span class="hljs-string">"Event ID: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.getId() Return <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> }</code> </pre> <br><p>  Der Leser wird gebeten, den Code unabhängig umzuschreiben, um die Fehler des Autors des Artikels nicht zu wiederholen. </p><br><blockquote>  Was garantieren SPEs, wenn sie eine „genau einmalige“ Verarbeitungssemantik beanspruchen?  Wenn nicht garantiert werden kann, dass die Benutzerlogik genau einmal ausgeführt wird, was wird dann genau einmal ausgeführt?  Wenn SPEs eine "genau einmalige" Verarbeitungssemantik beanspruchen, sagen sie tatsächlich, dass sie garantieren können, dass Aktualisierungen des von der SPE verwalteten Status nur einmal in einem dauerhaften Backend-Speicher festgeschrieben werden. </blockquote><p>  Der Benutzer benötigt keine Garantie für die physische Ausführung des Codes.  Wenn Sie wissen, wie der Prozessor funktioniert, können Sie leicht den Schluss ziehen, dass dies nicht möglich ist.  Die Hauptsache ist die logische Ausführung genau einmal, als ob es überhaupt keine Fehler gäbe.  Das Anziehen der Konzepte "Commit to Data Warehouse" verschlimmert nur das mangelnde Verständnis des Autors für grundlegende Dinge, weil  Es gibt Implementierungen einer solchen Semantik, ohne dass ein Commit erforderlich ist. </p><br><p>  Für weitere Informationen können Sie meinen Artikel kurz lesen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heterogene wettbewerbsfähige Datenverarbeitung in Echtzeit streng einmal</a> . </p><br><blockquote>  Mit anderen Worten, die Verarbeitung eines Ereignisses kann mehr als einmal erfolgen, aber der Effekt dieser Verarbeitung wird nur einmal im dauerhaften Backend-Statusspeicher wiedergegeben. </blockquote><p>  Dass es für den Benutzer einen "dauerhaften Backend-State-Store" gibt, ist absolut violett.  Nur der Effekt der Verarbeitung ist wichtig, d.h.  Konsistenz- und Ausgabewerte über den gesamten Zeitraum der Verarbeitung von Streaming-Daten.  Es ist erwähnenswert, dass für einige Aufgaben kein dauerhafter Backend-State-Store erforderlich ist, und es wäre schön, genau einmal zu garantieren. </p><br><blockquote>  Hier bei Streamlio haben wir entschieden, dass effektiv einmal der beste Begriff für die Beschreibung dieser Verarbeitungssemantik ist. </blockquote><p>  Ein typisches Beispiel für eine dumme Eingabe von Konzepten: Wir werden einige Beispiele und langwierige Argumente für einen ganzen Absatz schreiben und am Ende hinzufügen, dass „wir dieses Konzept definieren“.  Die Genauigkeit und Klarheit der Definitionen führt zu einer wirklich lebendigen emotionalen Reaktion. </p><br><h2 id="vyvody">  Schlussfolgerungen </h2><br><p>  Ein Missverständnis des Wesens von Abstraktionen führt zu einer Verzerrung der ursprünglichen Bedeutung bestehender Konzepte und der anschließenden Schaffung neuer Begriffe von Grund auf neu. </p><br><p>  [1] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Genau einmal ist NICHT genau dasselbe</a> . <br>  [2] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heterogene wettbewerbsfähige Echtzeit-Datenverarbeitung nur einmal</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419935/">https://habr.com/ru/post/de419935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419925/index.html">Versionskontrolle einzelner Dateien mit dem GitHub Gist</a></li>
<li><a href="../de419927/index.html">[DotNetBook] Ausnahmen: Typ Systemarchitektur</a></li>
<li><a href="../de419929/index.html">[DotNetBook] Ausnahmeereignisse und wie Sie StackOverflow und ExecutionEngineException von Grund auf neu erstellen</a></li>
<li><a href="../de419931/index.html">[DotNetBook] Zeit für unterhaltsame Geschichten: außergewöhnlich außergewöhnliche Situationen</a></li>
<li><a href="../de419933/index.html">So führen Sie Benutzersuchen in Github mit Angular durch</a></li>
<li><a href="../de419939/index.html">Wie ich die Navigation in React Native nicht so schrecklich gemacht habe</a></li>
<li><a href="../de419941/index.html">Audiomania Office Fototour: Teil Eins</a></li>
<li><a href="../de419943/index.html">Was wir im Juli gelesen haben: Wie man Zeit zum Lesen findet, fünf Bücher für Teamleiter und einige neue Artikel</a></li>
<li><a href="../de419945/index.html">So bereiten Sie sich auf ein Interview bei Google vor und geben es nicht weiter. Zweimal</a></li>
<li><a href="../de419947/index.html">Stellen Sie mit Raspbian Stretch Lite eine Verbindung zu PiZeroW her, ohne zusätzliche Adapter und einen Monitor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>