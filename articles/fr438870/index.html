<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚪️ 👩🏾‍🔬 🎺 Lombok rend la grandeur de Java 🌎 📮 💃🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chez Grubhub, nous utilisons Java dans presque tout le backend. Il s'agit d'un langage éprouvé qui a prouvé sa vitesse et sa fiabilité au cours des 20...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lombok rend la grandeur de Java</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438870/"><img src="https://habrastorage.org/webt/qu/kf/g_/qukfg_-dnnfp3q_c50xe3m4q2iu.png"><br><br>  Chez Grubhub, nous utilisons Java dans presque tout le backend.  Il s'agit d'un langage éprouvé qui a prouvé sa vitesse et sa fiabilité au cours des 20 dernières années.  Mais au fil des ans, l'âge du "vieil homme" a encore commencé à affecter. <br><br>  Java est l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un des langages JVM les plus populaires</a> , mais pas le seul.  Ces dernières années, il a concurrencé Scala, Clojure et Kotlin, qui fournissent de nouvelles fonctionnalités et des fonctionnalités linguistiques optimisées.  En bref, ils vous permettent de faire plus avec un code plus concis. <br><a name="habracut"></a><br>  Ces innovations dans l'écosystème JVM sont très intéressantes.  En raison de la concurrence, Java est obligé de changer pour rester compétitif.  Le nouveau calendrier de publication de six mois et plusieurs JEP (propositions d'amélioration JDK) dans Java 8 (Valhalla, Local-Variable Type Inference, Loom) sont la preuve que Java restera un langage compétitif pendant des années. <br><br>  Cependant, la taille et l'échelle de Java signifient que le développement progresse plus lentement que nous le souhaiterions, sans parler de la forte volonté de maintenir la compatibilité descendante à tout prix.  Dans tout développement, la première priorité devrait être les fonctions, mais ici les fonctions nécessaires sont développées trop longtemps, voire pas du tout, dans le langage.  C'est pourquoi nous, à Grubhub, utilisons Project Lombok pour avoir Java optimisé et amélioré à notre disposition en ce moment.  Le projet Lombok est un plugin de compilation qui ajoute de nouveaux «mots clés» à Java et transforme les annotations en code Java, réduisant l'effort de développement et fournissant des fonctionnalités supplémentaires. <br><br><h1>  Configurer Lombok </h1><br>  Grubhub s'efforce toujours d'améliorer le cycle de vie des logiciels, mais chaque nouvel outil et processus a un coût à considérer.  Heureusement, pour connecter Lombok, ajoutez simplement quelques lignes au fichier gradle. <br><br>  Lombok convertit les annotations du code source en instructions Java avant que le compilateur ne les traite: la dépendance <code>lombok</code> pas en runtime, donc l'utilisation du plugin n'augmentera pas la taille de l'assembly.  Pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">configurer Lombok avec Gradle</a> (cela fonctionne également avec Maven), ajoutez simplement les lignes <i>suivantes</i> au fichier <i>build.gradle</i> : <br><br><pre> <code class="java hljs">plugins { id <span class="hljs-string"><span class="hljs-string">'io.franzbecker.gradle-lombok'</span></span> version <span class="hljs-string"><span class="hljs-string">'1.14'</span></span> id <span class="hljs-string"><span class="hljs-string">'java'</span></span> } repositories { jcenter() <span class="hljs-comment"><span class="hljs-comment">// or Maven central, required for Lombok dependency } lombok { version = '1.18.4' sha256 = "" }</span></span></code> </pre> <br>  Avec Lombok, notre code source ne <i>sera pas</i> un code Java valide.  Par conséquent, vous devrez installer un plug-in pour l'IDE, sinon l'environnement de développement ne comprendra pas de quoi il s'agit.  Lombok prend en charge tous les principaux IDE Java.  Intégration transparente.  Toutes les fonctions comme «afficher l'utilisation» et «passer à l'implémentation» continuent de fonctionner comme avant, vous déplaçant vers le champ / la classe correspondant. <br><br><h1>  Lombok en action </h1><br>  La meilleure façon d'apprendre à connaître Lombok est de le voir en action.  Prenons quelques exemples typiques. <br><br><h3>  Revivez l'objet POJO </h3><br>  Avec les «bons vieux objets Java» (POJO), nous séparons les données du traitement pour faciliter la lecture du code et rationaliser les transferts réseau.  Un POJO simple a plusieurs champs privés, ainsi que les getters et setters correspondants.  Ils font le travail, mais nécessitent beaucoup de code passe-partout. <br><br>  Lombok aide à utiliser POJO de manière plus flexible et structurée sans code supplémentaire.  Voici <code>@Data</code> nous simplifions le POJO sous-jacent avec l'annotation <code>@Data</code> : <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Data</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UUID userId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String email; }</code> </pre> <br>  <code>@Data</code> n'est qu'une annotation pratique qui applique plusieurs annotations Lombok à la fois. <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>@ToString</code></a> génère une implémentation pour la <code>toString()</code> , qui consiste en une représentation soignée de l'objet: le nom de la classe, tous les champs et leurs valeurs. <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>@EqualsAndHashCode</code></a> génère des implémentations de <code>equals</code> et <code>hashCode</code> , qui par défaut utilisent des champs non statiques et non stationnaires, mais sont personnalisables. <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>@Getter / @Setter</code></a> génère des getters et setters pour les champs privés. <br></li><li>  <code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@RequiredArgsConstructor</a></code> crée un constructeur avec les arguments requis, où les champs finaux et les champs avec l'annotation <code>@NonNull</code> sont <code>@NonNull</code> (plus de détails ci-dessous). </li></ul><br>  Cette annotation à elle seule couvre simplement et avec élégance de nombreux cas d'utilisation typiques.  Mais POJO ne couvre pas toujours les fonctionnalités nécessaires.  <code>@Data</code> est une classe entièrement modifiable, dont l'abus peut augmenter la complexité et limiter la concurrence, ce qui affecte négativement la capacité de survie de l'application. <br><br>  Il y a une autre solution.  Revenons à notre classe <code>User</code> , rendons-la immuable et ajoutons quelques autres annotations utiles. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Value</span></span> <span class="hljs-meta"><span class="hljs-meta">@Builder</span></span>(toBuilder = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> UUID userId; <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> String email; <span class="hljs-meta"><span class="hljs-meta">@Singular</span></span> Set&lt;String&gt; favoriteFoods; <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-meta"><span class="hljs-meta">@Builder</span></span>.Default String avatar = “<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.png”; }</code> </pre> <br>  L'annotation <code>@Value</code> similaire à <code>@Data</code> sauf que tous les champs sont privés et définitifs par défaut, et les setters ne sont pas créés.  Grâce à cela, les objets <code>@Value</code> deviennent immédiatement immuables.  Puisque tous les champs sont finaux, il n'y a pas de constructeur d'argument.  Au lieu de cela, Lombok utilise le <code>@AllArgsConstructor</code> .  Le résultat est un objet entièrement fonctionnel et immuable. <br><br>  Mais l'immuabilité n'est pas très utile si vous avez seulement besoin de créer un objet en utilisant le constructeur all-args.  Comme l'explique Joshua Bloch dans son livre Effective Java Programming, vous devez utiliser des générateurs si vous avez un grand nombre de paramètres de concepteur.  Ici, la classe <code>@Builder</code> entre en <code>@Builder</code> , générant automatiquement la classe interne du générateur: <br><br><pre> <code class="java hljs">User user = User.builder() .userId(UUID.random()) .email(“grubhub<span class="hljs-meta"><span class="hljs-meta">@grubhub</span></span>.com”) .favoriteFood(“burritos”) .favoriteFood(“dosas”) .build()</code> </pre> <br>  La génération d'un générateur facilite la création d'objets avec un grand nombre d'arguments et l'ajout de nouveaux champs à l'avenir.  La méthode statique renvoie une instance du générateur pour définir toutes les propriétés de l'objet.  Après cela, l'appel à <code>build()</code> renvoie l'instance. <br><br>  L' <code>@NonNull</code> peut être utilisée pour <code>@NonNull</code> que ces champs ne sont pas nuls lors de la création d'une instance de l'objet; sinon, une exception <code>NullPointerException</code> levée.  Notez que le champ d'avatar est annoté avec <code>@NonNull</code> mais n'est pas défini.  Le fait est que l'annotation <code>@Builder.Default</code> pointe vers <i>default.png</i> par défaut. <br><br>  Notez également comment le générateur utilise <code>favoriteFood</code> , le seul nom de propriété de notre objet.  Lors du placement d'annotations <code>@Singular</code> sur une propriété de collection, Lombok crée des méthodes de générateur spéciales pour ajouter des éléments à la collection individuellement, et non pour ajouter la collection entière en même temps.  C'est particulièrement bon pour les tests, car les moyens de créer de petites collections en Java ne peuvent pas être appelés simples et rapides. <br><br>  Enfin, le paramètre <code>toBuilder = true</code> ajoute la méthode d'instance <code>toBuilder()</code> , qui crée un objet de générateur rempli avec toutes les valeurs de cette instance.  Il est si facile de créer une nouvelle instance, préremplie avec toutes les valeurs de l'original, de sorte qu'il ne reste plus qu'à modifier les champs nécessaires.  Ceci est particulièrement utile pour les classes <code>@Value</code> , car les champs sont immuables. <br><br>  Quelques notes personnalisent davantage les fonctions spéciales du setter.  <code>@Wither</code> crée des méthodes <code>@Wither</code> pour chaque propriété.  En entrée, la valeur; en sortie, le clone de l'instance avec la valeur mise à jour d'un champ.  <code>@Accessors</code> vous permet de configurer des setters créés automatiquement.  Le paramètre <code>fluent=true</code> désactive les conventions get et set pour les getters et les setters.  Dans certaines situations, cela peut être un remplacement utile pour <code>@Builder</code> . <br><br>  Si l'implémentation de Lombok ne convient pas à votre tâche (et que vous avez examiné les modificateurs d'annotation), vous pouvez toujours simplement prendre et écrire votre propre implémentation.  Par exemple, si vous avez la classe <code>@Data</code> , mais qu'un getter a besoin d'une logique personnalisée, implémentez simplement ce getter.  Lombok verra que l'implémentation est déjà fournie et ne l'écrasera pas avec l'implémentation créée automatiquement. <br><br>  Avec seulement quelques annotations simples, le POJO de base a reçu tant de fonctionnalités riches qui simplifient son utilisation sans charger le travail de nos ingénieurs, sans perdre de temps ni augmenter les coûts de développement. <br><br><h3>  Suppression du code de modèle </h3><br>  Lombok est utile non seulement pour POJO: il peut être appliqué à n'importe quel niveau de l'application.  Les utilisations suivantes de Lombok sont particulièrement utiles dans les classes de composants telles que les contrôleurs, les services et les DAO (objets d'accès aux données). <br><br>  La journalisation est une exigence de base pour toutes les parties du programme.  Toute classe qui fait un travail significatif devrait écrire un journal.  Ainsi, l'enregistreur standard devient un modèle pour chaque classe.  Lombok simplifie ce modèle en une seule annotation qui identifie et instancie automatiquement un enregistreur avec le nom de classe correct.  Il existe plusieurs annotations différentes selon la structure du journal. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-comment"><span class="hljs-comment">// also: @CommonsLog @Flogger @JBossLog @Log @Log4j @Log4j2 @XSlf4j public class UserService { // created automatically // private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(UserService.class); }</span></span></code> </pre> <br>  Après avoir déclaré l'enregistreur, ajoutez nos dépendances: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-meta"><span class="hljs-meta">@RequiredArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@FieldDefaults</span></span>(makeFinal=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, level=AccessLevel.PRIVATE) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> UserDao userDao; }</code> </pre> <br>  L' <code>@FieldDefaults</code> ajoute des modificateurs finaux et privés à tous les champs.  <code>@RequiredArgsConstructor</code> crée un constructeur qui configure une instance de <code>UserDao</code> .  L' <code>@NonNull</code> ajoute une validation dans le constructeur et <code>UserDao</code> <code>NullPointerException</code> si l'instance <code>UserDao</code> est nulle. <br><br><h1>  Mais attendez, ce n'est pas tout! </h1><br>  Il existe de nombreuses autres situations où Lombok fait de son mieux.  Les sections précédentes ont montré des exemples spécifiques, mais Lombok peut faciliter le développement dans de nombreux domaines.  Voici quelques petits exemples de la façon de l'utiliser plus efficacement. <br><br>  Bien que le mot clé <code>var</code> apparu dans Java 9, la variable peut toujours être réaffectée.  Lombok a le mot-clé <code>val</code> , qui affiche le type final d'une variable locale. <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// final Map map = new HashMap&lt;Integer, String&gt;(); val map = new HashMap&lt;Integer, String&gt;();</span></span></code> </pre> <br>  Certaines classes avec des fonctions purement statiques ne sont pas destinées à être initialisées.  Une façon d'empêcher l'instanciation consiste à déclarer un constructeur privé qui lève une exception.  Lombok a codifié ce modèle dans l'annotation <code>@UtilityClass</code> .  Il génère un constructeur privé qui lève une exception, génère finalement la classe et rend toutes les méthodes statiques. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@UtilityClass</span></span> <span class="hljs-comment"><span class="hljs-comment">// will be made final public class UtilityClass { // will be made static private final int GRUBHUB = “ GRUBHUB”; // autogenerated by Lombok // private UtilityClass() { // throw new java.lang.UnsupportedOperationException("This is a utility class and cannot be instantiated"); //} // will be made static public void append(String input) { return input + GRUBHUB; } }</span></span></code> </pre> <br>  Java est souvent critiqué pour sa verbosité en raison d'exceptions vérifiées.  Une annotation Lombok distincte les corrige: <code>@SneakyThrows</code> .  Comme prévu, la mise en œuvre est assez délicate.  Il n'attrape pas les exceptions ni même <code>RuntimeException</code> exceptions dans une <code>RuntimeException</code> .  Au lieu de cela, il repose sur le fait que la JVM ne vérifie pas la cohérence des exceptions vérifiées au moment de l'exécution.  Seul javac fait cela.  Par conséquent, Lombok utilise la conversion de bytecode au moment de la compilation pour désactiver cette vérification.  Le résultat est un code exécutable. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SneakyThrows</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@SneakyThrows</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sneakyThrow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(); } }</code> </pre> <br><h1>  Comparaison côte à côte </h1><br>  Les comparaisons directes montrent le mieux la quantité de code que Lombok enregistre.  Le plugin IDE possède une fonction «de-lombok» qui convertit approximativement la plupart des annotations Lombok en code Java natif (les annotations <code>@NonNull</code> ne <code>@NonNull</code> pas converties).  Ainsi, n'importe quel IDE avec le plugin installé pourra convertir la plupart des annotations en code Java natif et vice versa.  Retour à notre classe <code>User</code> . <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Value</span></span> <span class="hljs-meta"><span class="hljs-meta">@Builder</span></span>(toBuilder = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> UUID userId; <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> String email; <span class="hljs-meta"><span class="hljs-meta">@Singular</span></span> Set&lt;String&gt; favoriteFoods; <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-meta"><span class="hljs-meta">@Builder</span></span>.Default String avatar = “<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.png”; }</code> </pre> <br>  La classe Lombok est composée de 13 lignes simples, lisibles et compréhensibles.  Mais après avoir exécuté de-lombok, la classe se transforme en plus d'une centaine de lignes de code passe-partout! <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> UUID userId; <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> String email; Set&lt;String&gt; favoriteFoods; <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-meta"><span class="hljs-meta">@Builder</span></span>.Default String avatar = <span class="hljs-string"><span class="hljs-string">"default.png"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@java</span></span>.beans.ConstructorProperties({<span class="hljs-string"><span class="hljs-string">"userId"</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>, <span class="hljs-string"><span class="hljs-string">"favoriteFoods"</span></span>, <span class="hljs-string"><span class="hljs-string">"avatar"</span></span>}) User(UUID userId, String email, Set&lt;String&gt; favoriteFoods, String avatar) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userId = userId; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.email = email; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods = favoriteFoods; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.avatar = avatar; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">builder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserBuilder(); } <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UUID </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUserId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userId; } <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEmail</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.email; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFavoriteFoods</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods; } <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAvatar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.avatar; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(o <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> User other = (User) o; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$userId = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUserId(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object other$userId = other.getUserId(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$userId == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? other$userId != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> : !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$userId.equals(other$userId)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$email = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getEmail(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object other$email = other.getEmail(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$email == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? other$email != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> : !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$email.equals(other$email)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$favoriteFoods = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getFavoriteFoods(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object other$favoriteFoods = other.getFavoriteFoods(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$favoriteFoods == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? other$favoriteFoods != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> : !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$favoriteFoods.equals(other$favoriteFoods)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$avatar = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAvatar(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object other$avatar = other.getAvatar(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$avatar == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? other$avatar != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> : !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>$avatar.equals(other$avatar)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PRIME = <span class="hljs-number"><span class="hljs-number">59</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object $userId = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUserId(); result = result * PRIME + ($userId == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-number"><span class="hljs-number">43</span></span> : $userId.hashCode()); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object $email = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getEmail(); result = result * PRIME + ($email == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-number"><span class="hljs-number">43</span></span> : $email.hashCode()); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object $favoriteFoods = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getFavoriteFoods(); result = result * PRIME + ($favoriteFoods == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-number"><span class="hljs-number">43</span></span> : $favoriteFoods.hashCode()); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object $avatar = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAvatar(); result = result * PRIME + ($avatar == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-number"><span class="hljs-number">43</span></span> : $avatar.hashCode()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"User(userId="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUserId() + <span class="hljs-string"><span class="hljs-string">", email="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getEmail() + <span class="hljs-string"><span class="hljs-string">", favoriteFoods="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getFavoriteFoods() + <span class="hljs-string"><span class="hljs-string">", avatar="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAvatar() + <span class="hljs-string"><span class="hljs-string">")"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toBuilder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserBuilder().userId(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userId).email(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.email).favoriteFoods(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods).avatar(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.avatar); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UUID userId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String email; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ArrayList&lt;String&gt; favoriteFoods; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String avatar; UserBuilder() { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User.<span class="hljs-function"><span class="hljs-function">UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">userId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID userId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userId = userId; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User.<span class="hljs-function"><span class="hljs-function">UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">email</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String email)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.email = email; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User.<span class="hljs-function"><span class="hljs-function">UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">favoriteFood</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String favoriteFood)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;String&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.add(favoriteFood); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User.<span class="hljs-function"><span class="hljs-function">UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">favoriteFoods</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends String&gt; favoriteFoods)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;String&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.addAll(favoriteFoods); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User.<span class="hljs-function"><span class="hljs-function">UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearFavoriteFoods</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.clear(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User.<span class="hljs-function"><span class="hljs-function">UserBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avatar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String avatar)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.avatar = avatar; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Set&lt;String&gt; favoriteFoods; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.size()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: favoriteFoods = java.util.Collections.emptySet(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: favoriteFoods = java.util.Collections.singleton(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: favoriteFoods = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> java.util.LinkedHashSet&lt;String&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.size() &lt; <span class="hljs-number"><span class="hljs-number">1073741824</span></span> ? <span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.size() + (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods.size() - <span class="hljs-number"><span class="hljs-number">3</span></span>) / <span class="hljs-number"><span class="hljs-number">3</span></span> : Integer.MAX_VALUE); favoriteFoods.addAll(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods); favoriteFoods = java.util.Collections.unmodifiableSet(favoriteFoods); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(userId, email, favoriteFoods, avatar); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"User.UserBuilder(userId="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userId + <span class="hljs-string"><span class="hljs-string">", email="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.email + <span class="hljs-string"><span class="hljs-string">", favoriteFoods="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.favoriteFoods + <span class="hljs-string"><span class="hljs-string">", avatar="</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.avatar + <span class="hljs-string"><span class="hljs-string">")"</span></span>; } } }</code> </pre> <br>  Nous ferons de même pour la classe <code>UserService</code> . <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-meta"><span class="hljs-meta">@RequiredArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@FieldDefaults</span></span>(makeFinal=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, level=AccessLevel.PRIVATE) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> UserDao userDao; }</code> </pre> <br>  Voici un exemple d'homologue en code Java standard. <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(UserService.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UserDao userDao; <span class="hljs-meta"><span class="hljs-meta">@java</span></span>.beans.ConstructorProperties({<span class="hljs-string"><span class="hljs-string">"userDao"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserDao userDao)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (userDao == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NullPointerException(<span class="hljs-string"><span class="hljs-string">"userDao is marked @NonNull but is null"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userDao = userDao; } }</code> </pre> <br><h1>  Évaluation de l'effet </h1><br>  Grubhub compte plus d'une centaine de services commerciaux de livraison de nourriture.  Nous en avons pris un et avons lancé la fonction «de-lombok» dans le plugin Lombok IntelliJ.  En conséquence, environ 180 fichiers ont changé et la base de code a augmenté d'environ 18 000 lignes de code après avoir supprimé 800 cas d'utilisation de Lombok.  En moyenne, chaque ligne Lombok enregistre 23 lignes Java.  Avec cet effet, il est difficile d'imaginer Java sans Lombok. <br><br><h1>  Résumé </h1><br>  Lombok est un excellent assistant qui implémente de nouvelles fonctionnalités de langage sans nécessiter beaucoup d'efforts de la part du développeur.  Bien sûr, il est plus facile d'installer le plugin que de former tous les ingénieurs dans une nouvelle langue et de porter le code existant.  Lombok n'est pas omnipotent, mais hors de la boîte est assez puissant pour vraiment aider dans le travail. <br><br>  Un autre avantage de Lombok est qu'il maintient des bases de code cohérentes.  Nous avons plus d'une centaine de services différents et une équipe distribuée à travers le monde, donc la cohérence des bases de code facilite la mise à l'échelle des équipes et réduit la charge de changement de contexte lors du démarrage d'un nouveau projet.  Lombok fonctionne pour n'importe quelle version depuis Java 6, nous pouvons donc compter sur sa disponibilité dans tous les projets. <br><br>  Pour Grubhub, c'est plus que de nouvelles fonctionnalités.  Au final, tout ce code <i>peut être</i> écrit manuellement.  Mais Lombok simplifie les parties ennuyeuses de la base de code sans affecter la logique métier.  Cela vous permet de vous concentrer sur des choses qui sont vraiment importantes pour l'entreprise et les plus intéressantes pour nos développeurs.  Le code de modèle Monton est une perte de temps pour les programmeurs, les réviseurs et les mainteneurs.  De plus, comme ce code n'est plus écrit manuellement, il élimine des classes entières de fautes de frappe.  Les avantages de l'auto- <code>@NonNull</code> combinés à la puissance de <code>@NonNull</code> réduisent les risques d'erreurs et aident notre développement, qui vise à livrer de la nourriture à votre table! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438870/">https://habr.com/ru/post/fr438870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438858/index.html">Comment utiliser la segmentation, le ciblage et le positionnement (STP) dans l'élaboration d'une stratégie marketing</a></li>
<li><a href="../fr438862/index.html">Déployez une application Web isomorphe en utilisant Nuxt.js comme exemple.</a></li>
<li><a href="../fr438864/index.html">Gel des fonctionnalités C ++ 20. Coroutines, modules et plus</a></li>
<li><a href="../fr438866/index.html">Générateurs contre syntaxe Java</a></li>
<li><a href="../fr438868/index.html">Semaine de la sécurité 06: en direct sur FaceTime</a></li>
<li><a href="../fr438874/index.html">Commencer une amitié avec VkNet</a></li>
<li><a href="../fr438876/index.html">Comment raccourcir le time-to-market: une histoire sur l'automatisation des tests dans M. Video</a></li>
<li><a href="../fr438878/index.html">L'apparition du film en torrents après la première augmente le box-office de 3%</a></li>
<li><a href="../fr438880/index.html">Quand utiliser var, let et const en Javascript [traduction de l'article de Tyler McGinnis]</a></li>
<li><a href="../fr438882/index.html">La probabilité de gagner un match avec une probabilité connue de gagner un point</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>