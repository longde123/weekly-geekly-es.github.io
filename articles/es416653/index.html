<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìû üîë üéóÔ∏è Ordenaci√≥n de la biblioteca üöµüèª üë©‚Äçüëß üöΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tome una matriz de orden inverso y aplique la clasificaci√≥n con inserciones simples . 



 Vea con qu√© crujido se inserta el siguiente elemento en el ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ordenaci√≥n de la biblioteca</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416653/"><div style="text-align:center;"><img width="700" height="394" src="https://habrastorage.org/webt/8i/bj/do/8ibjdoxetlxsby3qiaj5seokxxa.jpeg"></div><br><br><a name="habracut"></a><br>  Tome una matriz de orden inverso y aplique la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clasificaci√≥n con inserciones simples</a> . <br><br><img width="684" height="95" src="https://habrastorage.org/webt/il/qa/vz/ilqavzmmhgxwuhcityv7wuqqqig.gif"><br><br>  Vea con qu√© crujido se inserta el siguiente elemento en el lugar correcto.  Para ello, debe liberar el lugar de inserci√≥n, por lo que debe cambiar todos los elementos insertados anteriormente. <br><br>  ¬°Y qu√© bueno ser√≠a si hubiera espacios vac√≠os entre los elementos que se insertaron anteriormente!  Entonces uno no tendr√≠a que arrastrar las filas de elementos solo por insertar uno. <br><br>  En 2004, tres expertos en inform√°tica - Michael Bender, Martin Farah-Colton y Miguel Mostiro - decidieron modificar la clasificaci√≥n con inserciones simples de esta manera.  Sugirieron formar una parte ordenada de la matriz, dejando espacios entre los elementos insertados. <br><blockquote>  El bibliotecario necesita que los libros est√©n ordenados alfab√©ticamente en un estante largo: comenzando a la izquierda de la letra "A", los libros est√°n uno al lado del otro "I".  Si la biblioteca recibi√≥ un nuevo libro relacionado con la secci√≥n "B", entonces para colocarlo en el estante en el lugar correcto, debe mover cada libro, comenzando desde el medio de la secci√≥n "B" hasta la √∫ltima "I".  Esto se ordena por inserciones simples.  Sin embargo, si el bibliotecario reserv√≥ el espacio libre en cada secci√≥n, le bastaba con mover solo unos pocos libros para dejar espacio a las novedades de libros.  Este es el principio b√°sico de la clasificaci√≥n de bibliotecas. </blockquote><h2>  Algoritmo </h2><br><img width="693" height="168" src="https://habrastorage.org/webt/jl/-l/wc/jl-lwclcowy6aohvc82uksordtg.gif"><br><br><ul><li>  <strong>1. Cree una matriz auxiliar vac√≠a, varias veces m√°s grande que la principal.</strong> </li><li>  <strong>2. Para el siguiente elemento, buscamos el lugar de inserci√≥n en la matriz auxiliar.</strong> <ul><li>  <strong>2.1.</strong>  <strong>Si encuentra un lugar para insertar, transfiera el art√≠culo y regrese al paso 2.</strong> </li><li>  <strong>2.2.</strong>  <strong>Si no hay lugar para la inserci√≥n, vuelva a equilibrar la matriz auxiliar y regrese al punto 2.</strong> </li></ul></li><li>  <strong>3. Despu√©s de procesar todos los elementos, transfi√©ralos nuevamente a la matriz principal.</strong> </li></ul><br>  A primera vista, parece que la clasificaci√≥n es f√°cil y sencilla.  Para disipar esta ilusi√≥n, consideramos los puntos clave del algoritmo con m√°s detalle. <br><br><h2>  Tama√±o de matriz auxiliar </h2><br>  Si bien no existe una opini√≥n establecida, cu√°ntas veces la matriz auxiliar debe ser m√°s grande que la principal. <br><br>  Si toma demasiado, entonces habr√° mucho espacio entre los elementos, sin embargo, la b√∫squeda del sitio de inserci√≥n y el reequilibrio ser√°n m√°s lentos, debido a las grandes distancias entre los elementos.  El reequilibrio ocurrir√° con menos frecuencia, pero tendr√°n que gastar m√°s recursos en ellos.  Si toma muy poco, entonces buscar y reequilibrar ser√° m√°s barato, pero tendr√° que reformatear la matriz con m√°s frecuencia.  En general, a√∫n debe probarse con diferentes valores y el m√©todo de b√∫squeda cient√≠fica determina la mejor opci√≥n. <br><br>  Si decidimos cu√°ntas veces la matriz auxiliar es m√°s grande que la matriz principal, entonces la f√≥rmula para determinar el n√∫mero exacto de elementos para ella se ve as√≠: <br><br>  <b>NewSize = Œµ √ó (Tama√±o + 1) - 1</b> <br><br>  <i>NewSize: el n√∫mero de elementos en la matriz auxiliar</i> <i><br></i>  <i>Œµ: cu√°ntas veces la matriz auxiliar es m√°s grande que la matriz principal</i> <i><br></i>  <i>Tama√±o: el n√∫mero de elementos en la matriz principal</i> <br><br>  Si simplemente multiplicamos el tama√±o por un factor: <b>NewSize = Size √ó Œµ</b> , entonces para una distribuci√≥n uniforme no tendremos suficientes celdas en la cantidad de <b>Œµ - 1</b> piezas.  Es decir, es posible organizarlos de manera uniforme, pero la primera celda llena o la √∫ltima se ubicar√°n cerca del borde de la matriz auxiliar.  Y necesitamos que los lugares vac√≠os en las celdas llenas se reserven desde todos los lados, incluso antes del primer elemento y despu√©s del √∫ltimo. <br><br><img width="692" height="312" src="https://habrastorage.org/webt/am/np/py/amnppyndj34-6az2hiyjakiakbk.png"><br><br>  Parece un poco, pero de hecho es importante para el reequilibrio, para garantizar lugares libres para la inserci√≥n en cualquier lugar, incluso cuando se procesan los √∫ltimos elementos de la matriz principal. <br><br><h2>  Busque el lugar de inserci√≥n en la matriz auxiliar </h2><br>  Por supuesto, aqu√≠ necesitas una b√∫squeda binaria.  Sin embargo, la implementaci√≥n cl√°sica no funcionar√° para nosotros. <br><br>  En primer lugar, la matriz auxiliar consiste principalmente en vac√≠o.  Por lo tanto, dicotomizando recursivamente la estructura, en su mayor parte nos encontraremos con celdas sin rellenar.  En estos casos, debe ir un poco hacia la izquierda o hacia la derecha, hasta la celda no vac√≠a m√°s cercana.  Luego, al final del segmento, habr√° elementos significativos que le permitir√°n calcular la media aritm√©tica y continuar la b√∫squeda binaria en profundidad. <br><br>  En segundo lugar, no te olvides de los bordes.  Si necesita insertar un elemento m√≠nimo o m√°ximo, entonces una b√∫squeda binaria entre los elementos insertados anteriormente no conducir√° a nada.  Por lo tanto, vale la pena considerar los casos l√≠mite: primero verifique si es necesario colocar un elemento cerca del borde izquierdo o derecho de la matriz y, si no, use la b√∫squeda binaria. <br><br>  En tercer lugar, teniendo en cuenta los detalles de la aplicaci√≥n, vale la pena realizar modificaciones adicionales para minimizar el n√∫mero de reequilibrios de matriz.  Si el elemento insertado es igual al valor en uno de los extremos del segmento, entonces quiz√°s no deber√≠a insertarlo en el medio del segmento.  Es m√°s l√≥gico poner al lado de un elemento de igual valor.  Esto llenar√° m√°s eficientemente el espacio vac√≠o de la matriz auxiliar. <br><br>  Cuarto, quinto, y as√≠ sucesivamente.  La calidad de la b√∫squeda de la ubicaci√≥n de inserci√≥n afecta directamente la velocidad de clasificaci√≥n, ya que la selecci√≥n de ubicaciones de inserci√≥n sin √©xito conduce a un reequilibrio innecesario.  Por ejemplo, puede valer la pena dividir los segmentos no exactamente en el medio, sino m√°s cerca del borde izquierdo o derecho del segmento, dependiendo de qu√© borde el elemento de inserci√≥n tiene un valor m√°s cercano. <br><br>  El algoritmo de b√∫squeda binario en s√≠ est√° lleno de trampas, y teniendo en cuenta los matices adicionales mencionados anteriormente, finalmente no se convierte en una tarea no trivial. <br><br><h2>  Reequilibrio de matrices </h2><br>  La b√∫squeda binaria no es lo m√°s dif√≠cil de implementar en esta clasificaci√≥n.  Todav√≠a hay reequilibrio. <br><br>  Cuando no hay lugar para la inserci√≥n (se encontraron elementos similares, pero no hab√≠a celdas libres entre ellos), debe sacudir la matriz auxiliar para liberar el lugar de inserci√≥n.  Este temblor de la matriz est√° reequilibrando. <br><br>  Adem√°s, el reequilibrio es <i>local</i> o <i>completo</i> . <br><br><h3>  Reequilibrio local </h3><br>  Cambiamos tantos elementos como sea necesario para liberar el punto de inserci√≥n.  La implementaci√≥n de dicho equilibrio es muy simple, solo necesita encontrar la celda vac√≠a m√°s cercana desde el punto de inserci√≥n y usarla para mover varios elementos. <br><br>  Hay posibles matices.  Por ejemplo, ¬øqu√© manera de buscar el lugar vacante m√°s cercano?  Para evitar la situaci√≥n cuando un cambio es imposible (es decir, si en alg√∫n lado todas las celdas est√°n ocupadas hasta el borde de la matriz), puede centrarse en la posici√≥n del punto de inserci√≥n en relaci√≥n con el centro de la matriz.  Si necesita insertar en el lado izquierdo de la matriz, luego cambie a la derecha, si est√° a la derecha, a la izquierda.  Si <b>Œµ</b> ‚â• 2, entonces este enfoque elimina la situaci√≥n en la que un cambio es imposible (porque en la mitad de la matriz auxiliar hay espacio m√°s que suficiente para todos los elementos). <br><br>  En la interpretaci√≥n del autor del algoritmo, el reequilibrio local est√° impl√≠cito. <br><br><h3>  Reequilibrio completo </h3><br>  Una alternativa interesante al local es el reequilibrio completo.  Es decir, en la matriz auxiliar, cambie todos los elementos disponibles para que haya (casi) los mismos espacios entre ellos. <br><br><img width="693" height="168" src="https://habrastorage.org/webt/xg/yi/nr/xgyinrhnartyvwhdgqvmucrmx7m.gif"><br><br>  Prob√© ambas opciones y hasta ahora estoy observando que con el reequilibrio local el algoritmo funciona 1.5-2 veces m√°s r√°pido que con uno completo.  Sin embargo, un reequilibrio completo a√∫n puede ser √∫til.  Por ejemplo, si tiene que hacer un reequilibrio local con demasiada frecuencia, esto significa que en la matriz en algunas √°reas se han acumulado muchos "co√°gulos de sangre" que inhiben todo el proceso.  Un reequilibrio completo realizado una vez, le permite deshacerse de toda congesti√≥n local de una sola vez. <br><br>  Veamos c√≥mo reequilibrar por completo. <br><br>  Primero debe calcular cu√°ntas celdas m√°ximas podemos asignar para cada elemento en la matriz auxiliar.  Debe recordarse que las celdas vac√≠as deben ser ambas antes de la primera y despu√©s de la √∫ltima celda llena.  La formula es: <br><br><img width="186" height="52" src="https://habrastorage.org/webt/9n/he/da/9nhedamesorkojp6daccahjow2q.png"><br><br>  <i>M: el n√∫mero de celdas que se pueden asignar a cada elemento</i> <i><br></i>  <i>NewSize - tama√±o de la matriz auxiliar</i> <i><br></i>  <i>Recuento: el n√∫mero actual de elementos no vac√≠os en la matriz auxiliar</i> <br><br>  Esta fracci√≥n debe reducirse a un valor entero (es decir, redondeado hacia abajo).  Es obvio por la f√≥rmula que cuantos m√°s elementos ya se transfieren a la matriz auxiliar, menos celdas podemos seleccionar para la vecindad de cada elemento. <br><br>  Conociendo <b>M</b> , obtenemos f√°cilmente la posici√≥n exacta de cada elemento no vac√≠o en la matriz auxiliar en la que debe ubicarse despu√©s de completar el reequilibrio. <br><br>  <b>NewPos = N√∫mero √ó M</b> <br><br>  <i>NewPos: nueva posici√≥n del elemento despu√©s del reequilibrio</i> <i><br></i>  <i>N√∫mero: cu√°l es el elemento no vac√≠o en la matriz auxiliar <nobr>(1 ‚â§ N√∫mero ‚â§ Recuento)</nobr></i> <i><br></i>  <i>M: el n√∫mero de celdas que se asigna a cada elemento</i> <br><br>  Se conocen nuevas posiciones, ¬øpuede simplemente ordenar elementos no vac√≠os en la matriz auxiliar y transferirlos a otros lugares?  Oh no, no te apresures.  No solo es necesario transferir elementos, es importante mantener su orden.  Y como resultado de la b√∫squeda e inserci√≥n binarias, los elementos pueden quedar muy a la izquierda y a la derecha de la posici√≥n en la que deber√≠an estar despu√©s del reequilibrio.  Y en el lugar donde desea moverse, puede haber otro elemento que tambi√©n debe adjuntarse en alg√∫n lugar.  Adem√°s, no puede transferir un elemento si hay otros elementos entre sus posiciones antiguas y nuevas en la matriz auxiliar; de lo contrario, los elementos se mezclar√°n y es extremadamente importante para nosotros no mezclar el orden. <br><br>  Por lo tanto, para reequilibrar no ser√° suficiente pasar por el ciclo habitual y simplemente cambiar cada elemento de un bolsillo a otro.  Todav√≠a es necesario usar la recursividad.  Si un elemento no se puede mover a un lugar nuevo (aparecieron otros elementos entre sus posiciones antiguas y nuevas), primero debe descubrir (recursivamente) estos invitados no invitados.  Y luego todo se organizar√° correctamente. <br><br><h2>  Caso degenerado </h2><br>  Para la mayor√≠a de las clasificaciones por inserciones, una matriz de orden inverso es la peor situaci√≥n.  Y ordenar un bibliotecario, por desgracia, no es una excepci√≥n. <br><br><img width="693" height="168" src="https://habrastorage.org/webt/mm/zm/_c/mmzm_cvt2fvcawbrkkswtav0huo.gif"><br><br>  Los elementos tienden al borde izquierdo de la matriz auxiliar, como resultado de lo cual los espacios vac√≠os se agotan r√°pidamente.  Tienes que reequilibrar la matriz muy a menudo. <br><br>  Por cierto, si tomamos una matriz casi ordenada (el mejor caso para ordenar por inserciones simples), entonces tenemos el mismo problema.  Los elementos reci√©n llegados no obstruir√°n la izquierda, sino el lado derecho de la matriz auxiliar, lo que tambi√©n conducir√° a un reequilibrio demasiado frecuente. <br><br>  La ordenaci√≥n de bibliotecas maneja conjuntos de datos aleatorios de manera eficiente.  El pedido parcial (tanto directo como inverso) perjudica el rendimiento de la velocidad. <br><br><h2>  Complejidad Algor√≠tmica </h2><br>  En grandes conjuntos de datos aleatorios, el algoritmo da la complejidad temporal O ( <b>n</b> log <b>n</b> ).  ¬°Nada mal! <br><br>  En conjuntos de datos √∫nicos aleatorios (o en su mayor√≠a √∫nicos) con la selecci√≥n correcta del coeficiente <strong>Œµ</strong> y la implementaci√≥n exitosa de la b√∫squeda binaria, el n√∫mero de reequilibrios se puede minimizar o incluso evitar.  Se puede argumentar que el algoritmo tiene la mejor complejidad de tiempo O ( <b>n</b> ). <br><br>  Un gran porcentaje de datos que se repiten en valor, as√≠ como la presencia en la matriz de subsecuencias ordenadas (en orden directo o inverso) conduce a un reequilibrio frecuente de la matriz auxiliar y, como resultado, a la degradaci√≥n de la complejidad del tiempo a O <b>(n <sup>2</sup></b> ) en los casos m√°s desfavorables. <br><br>  La desventaja del algoritmo, por supuesto, es que la matriz auxiliar requiere O ( <b>n</b> ) memoria adicional. <br><br><h2>  Posibles formas de mejorar </h2><br>  Aunque el algoritmo en s√≠ mismo es instructivo y eficiente en datos aleatorios, en una d√©cada y media, pocos han mostrado inter√©s en √©l. <br><br>  Si buscas en Google la solicitud "ordenamiento de biblioteca", encontrar√°s un art√≠culo superficial en la Wikipedia en ingl√©s, el PDF del autor (del cual se entiende poco) y una rara publicaci√≥n de esta escasa informaci√≥n.  Adem√°s, hay una buena visualizaci√≥n en YouTube, donde las matrices principal y auxiliar se combinaron originalmente.  Todos los enlaces est√°n al final del art√≠culo. <br><br>  La b√∫squeda de "clasificaci√≥n de bibliotecas" es a√∫n m√°s divertida: en la muestra encontrar√° las diferentes clasificaciones incluidas en diferentes bibliotecas, sin embargo, estos algoritmos no estar√°n relacionados con la <i>clasificaci√≥n de bibliotecas aut√©ntica</i> . <br><br>  Y hay algo que mejorar: <br><br><ol><li>  Selecci√≥n emp√≠rica del coeficiente √≥ptimo <strong>Œµ</strong> . </li><li>  Modificaci√≥n (teniendo en cuenta los detalles del algoritmo general) de la b√∫squeda binaria para la determinaci√≥n m√°s eficiente del punto de inserci√≥n. </li><li>  Minimizando los costos de reequilibrio. </li></ol><br>  Si pules estos lugares, ¬øentonces quiz√°s la clasificaci√≥n de la biblioteca en velocidad sea igual a la clasificaci√≥n r√°pida? <br><br><h2>  C√≥digo fuente </h2><br>  No logr√© preparar la implementaci√≥n en Python, hay una versi√≥n que funciona en PHP. <br><br><div class="spoiler">  <b class="spoiler_title">Algoritmo b√°sico</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LibrarySort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> $arr_new;<span class="hljs-comment"><span class="hljs-comment">//  $e = 3;//     $rebalance_local = true;// (true)   (false)  //   $newSize = $e * (count($arr) + 1) - 1; $arr_new = array_fill(0, $newSize, null); //       $arr_new[LibrarySort_Pos(1, 1, $newSize)] = $arr[0]; //    -    //     $start = 0; $finish = $newSize - 1; $i = 1; //      while($i &lt; count($arr)) { //        $pos = LibrarySort_BinarySearch($arr[$i], $start, $finish, $newSize); if($pos === false) {//        //    LibrarySort_Rebalance_Total($i, $newSize); } else {//  ,   ,    if($arr_new[$pos] !== null) {//   if($rebalance_local) {//  (+ ) LibrarySort_Rebalance_Local($arr[$i++], $pos, $newSize); } else {//  LibrarySort_Rebalance_Total($i, $newSize); } } else {//   ,   $arr_new[$pos] = $arr[$i++]; } } } //      $pos = 0; for($i = 0; $i &lt;= $newSize - 1; $i++) { if($arr_new[$i] !== null) $arr[$pos++] = $arr_new[$i]; } return $arr; }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">La nueva posici√≥n del elemento en la matriz adicional despu√©s del reequilibrio completo</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// $number-    $count //     //$number -      ( )  //$count -       //$newSize -     //$number &lt;= $count &lt;= count($arr) &lt;= $newSize) function LibrarySort_Pos($number, $count, $newSize) { return $number * floor(($newSize + 1) / ($count + 1)) - 1; }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">B√∫squeda binaria de lugar de inserci√≥n en matriz auxiliar</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//       //$search -     ,      //($start, $finish) -   ,     //$newSize -     function LibrarySort_BinarySearch($search, $start, $finish, $newSize) { global $arr_new;//  //      //      ,     //  ,       while($arr_new[$start] === null &amp;&amp; $start &lt; $newSize - 1) { ++$start; } //         , //         if($search == $arr_new[$start]) { return LibrarySort_PosNearby($start, $newSize); //  ,        } elseif($search &lt; $arr_new[$start]) { //      //     if($start &gt; 0) {// $start    $finish = $start; $start = 0; return floor(($start + $finish) / 2); } else {//$start == 0,      return $start;//    ,    } } //      ,     //  ,       while($arr_new[$finish] === null &amp;&amp; $finish &gt; 0) { --$finish; } //         , //         if($search == $arr_new[$finish]) { return LibrarySort_PosNearby($finish, $newSize); //  ,        } elseif($search &gt; $arr_new[$finish]) { //      //     if($finish &lt; $newSize - 1) {// $finish    $start = $finish; $finish = $newSize - 1; return ceil(($start + $finish) / 2); } else {//$finish == $newSize - 1,      return $finish;//    ,    } } //     , //,    -   //   ,       If($finish - $start &gt; 1) {//   ,    3  $middle = ceil(($start + $finish) / 2); //   $middle_Pos = 0; // ""     $offset = 0; //         //,    /,      while($middle - $offset &gt; $start &amp;&amp; $middle_Pos == 0){ if($arr_new[$middle - $offset] !== null) { $middle_Pos = $middle - $offset; } elseif($middle + $offset &lt; $finish &amp;&amp; $arr_new[$middle + $offset] !== null) { $middle_Pos = $middle + $offset; } ++$offset; } //    , ,     , //              If($middle_Pos) { if($arr_new[$middle_Pos] == $search) { return LibrarySort_PosNearby($middle_Pos, $newSize); } else { if($arr_new[$middle_Pos] &gt; $search) { $finish = $middle_Pos; } else {//$arr_new[$middle_Pos] &lt; $search $start = $middle_Pos; } return LibrarySort_BinarySearch($search, $start, $finish, $newSize); } } else {//$middle_Pos == 0 -   (   )     return $middle;//   - ,     } } else {//  ,       return floor(($start + $finish) / 2); } return false;//  ,       }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Si durante la b√∫squeda el elemento es igual a uno de los extremos del segmento</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,        //$start - ,        //$newSize -     function LibrarySort_PosNearby($start, $newSize) { global $arr_new;//  //       for($left = $start - 1; $left &gt;= 0; $left--) { if($arr_new[$left] === null) {//  return $left;//   } elseif($arr_new[$left] &lt;&gt; $arr_new[$start]) {//     break; //   ,      } } //     ,    for($right = $start + 1; $right &lt;= $newSize - 1; $right++) { if($arr_new[$right] === null) {//  return $right; //   } elseif($arr_new[$right] &lt;&gt; $arr_new[$start]) {//     break; //   ,      } } return $start; //          .      ,     }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Reequilibrio local de una matriz adicional</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    //$insert - ,    //$pos -            //$newSize -     function LibrarySort_Rebalance_Local($insert, $pos, $newSize) { global $arr_new;//  // $pos  $insert,       while($pos - 1 &gt;= 0 &amp;&amp; $arr_new[$pos - 1] !== null &amp;&amp; $arr_new[$pos - 1] &gt; $insert) {--$pos;} while($pos + 1 &lt;= $newSize - 1 &amp;&amp; $arr_new[$pos + 1] !== null &amp;&amp; $arr_new[$pos + 1] &lt; $insert) {++$pos;} $middle = (integer) $newSize / 2;//  if($pos &lt;= $middle) {//      if($arr_new[$pos] !== null &amp;&amp; $arr_new[$pos] &lt; $insert) ++$pos; //  $right = $pos; while($arr_new[++$right] !== null) {} for($i = $right; $i &gt; $pos; $i--) { $arr_new[$i] = $arr_new[$i - 1]; } } else {//      if($arr_new[$pos] !== null &amp;&amp; $insert &lt; $arr_new[$pos]) --$pos; //  $left = $pos; while($arr_new[--$left] !== null) {} for($i = $left; $i &lt; $pos; $i++) { $arr_new[$i] = $arr_new[$i + 1]; } } $arr_new[$pos] = $insert; }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Reequilibrio completo de la matriz adicional</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    //$count -        //$newSize -     function LibrarySort_Rebalance_Total($count, $newSize) { global $arr_new;//  global $library_Number;//     global $library_LeftPos;//        $library_Number = $count; //        $library_LeftPos = $newSize - 1;// ,     //         $i = $newSize - 1; while($i &gt;= 0) { if($arr_new[$i] !== null) {//   $pos = LibrarySort_Pos($library_Number, $count, $newSize);//   newSize=$newSize"); if($i == $pos) {//      --$i;//      } elseif($i &lt; $pos) {//    $arr_new[$pos] = $arr_new[$i]; $arr_new[$i] = null; --$i;//      } else {//$i &gt; $pos -     //      LibrarySort_RemoveLeft($i, $pos, $count, $newSize); $i = ($i &gt; $library_LeftPos) ? $library_LeftPos - 1 : --$i; } --$library_Number;//      } else {// ,   --$i;//      } } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Movimiento del elemento hacia la izquierda con reequilibrio total</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//     . //    ,   //$i -     ,    //$pos -       //$count -        //$newSize -     function LibrarySort_RemoveLeft($i, $pos, $count, $newSize) { global $arr_new;//  global $library_Number;//     global $library_LeftPos;//        $left = false; $left_Pos = false;//      $j = $i;//      //     while($j &gt; 0 &amp;&amp; $left === false) {//            --$j; //     if($arr_new[$j] !== null) $left = $j;//    } if($left === false || $left &lt; $pos) {//   (  )    //     } else { //$left &gt;= $pos,     --$library_Number;//,       $left_Pos = LibrarySort_Pos($library_Number, $count, $newSize);//     //        LibrarySort_RemoveLeft($left, $left_Pos, $count, $newSize); //  ,     } //    ,   $arr_new[$pos] = $arr_new[$i]; $arr_new[$i] = null; //,         if($pos &lt; $library_LeftPos) $library_LeftPos = $pos; }</span></span></code> </pre> </div></div><br>  Tuve que codificar desde cero, basado en una descripci√≥n general del m√©todo.  No vi una velocidad cercana a la ordenaci√≥n r√°pida; mi opci√≥n de ordenaci√≥n de la biblioteca ordena 10-20 veces m√°s lento que la ordenaci√≥n r√°pida.  Pero la raz√≥n, por supuesto, es que mi implementaci√≥n es demasiado cruda, no se ha tenido mucho en cuenta. <br><br>  Me gustar√≠a ver una versi√≥n de los creadores del algoritmo.  Escribir√© hoy a los autores (y les arrojar√© un enlace a este habrastatu), de repente responder√°n.  Aunque ... recuerdo, intent√© contactar a Allen Beachich ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clasificaci√≥n ABC</a> ) y Jason Morrison ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clasificaci√≥n J</a> ), pero el resultado fue el mismo que si escribiera en Sportloto. <br><br>  <b>UPD</b>  <b>Martin Farah-Colton me respondi√≥ que nunca hicieron la implementaci√≥n:</b> <blockquote>  Me temo que nunca implementamos esos algoritmos. </blockquote>  <b>Lo principal es la idea :)</b> <br><br><h2>  Caracter√≠sticas del algoritmo </h2><div class="scrollable-table"><table><tbody><tr><th align="left">  Titulo </th><td align="left" colspan="2">  Clasificaci√≥n de biblioteca, clasificaci√≥n de biblioteca </td></tr><tr><th align="left">  Otro nombre </th><td align="left" colspan="2">  Tipo de inserci√≥n con espacios </td></tr><tr><th align="left">  Los autores </th><td align="left" colspan="2">  Michael A. Bender, Mart√≠n Farach-Colton, Miguel Mosteiro </td></tr><tr><th align="left">  A√±o </th><td align="left" colspan="2">  2004 </td></tr><tr><th align="left">  Clase </th><td align="left" colspan="2">  Clases de inserci√≥n </td></tr><tr><th align="left">  Comparaciones </th><td align="left" colspan="2">  Hay </td></tr><tr><th align="left" rowspan="3">  Complejidad de tiempo </th><th align="left">  lo mejor </th><td align="left">  O ( <b>n</b> ) </td></tr><tr><th align="left">  promedio </th><td align="left">  O ( <b>n</b> log <b>n</b> ) </td></tr><tr><th align="left">  lo peor </th><td align="left">  O ( <b>n <sup>2</sup></b> ) </td></tr><tr><th align="left">  Complejidad de memoria extra </th><td align="left" colspan="2">  O ( <b>n</b> ) </td></tr></tbody></table></div><br><h2>  Referencias </h2><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Ordenaci√≥n de la biblioteca</a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><img width="30" height="30" src="https://habrastorage.org/webt/sb/ln/dw/sblndwenhewoyoas_n3xp7tyuuu.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Visualizaci√≥n del algoritmo de ordenaci√≥n de biblioteca</a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><img width="84" height="30" src="https://habrastorage.org/webt/yv/lm/2t/yvlm2t2kl5affkpm0hzqh7qw5ly.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">El orden de inserci√≥n es O (n log n)</a> <br><br><h3>  Autores del algoritmo: </h3><br><img align="right" width="392" height="120" src="https://habrastorage.org/webt/il/dh/l9/ildhl9tnc4alqaexulf-kw2rmt0.png"><br clear="left"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Michael A. Bender</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Martin Farah-Colton</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Miguel Mostiro</a> </p><br><br><h3>  Art√≠culos de la serie: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aplicaci√≥n Excel AlgoLab.xlsm</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clases de intercambio</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clases de inserci√≥n</a> <ul><li>  <b>Bibliotecario Ordenar</b> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Solitario Ordenar</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ordenar "Torre de Hanoi"</a> </li><li>  Joven mesa de clasificaci√≥n </li><li>  Ordenar invertido </li><li>  Insertar comparaci√≥n de clasificaci√≥n </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ordenar por selecci√≥n</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Combinar clasificaciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ordenar por distribuci√≥n</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clasificaci√≥n h√≠brida</a> </li></ul><br><br><img align="right" width="364" height="192" src="https://habrastorage.org/webt/9y/1b/d5/9y1bd57yvcw4rt65o3ztjb59xum.png"><br clear="left"><p>  Ordenar agregado a AlgoLab.  Para que pueda experimentar con peque√±os conjuntos de datos. <br><br>  En este caso, puede decidir cu√°ntas veces la matriz auxiliar es m√°s grande que la principal.  Para seleccionar el coeficiente <strong>Œµ,</strong> puede hacer clic con el bot√≥n derecho en la celda con ‚ÄúClasificaci√≥n de biblioteca‚Äù y seleccionar ‚ÄúCambiar nota‚Äù.  Y en la nota, establezca cuidadosamente el valor entero para <b>e</b> de 2 a 5. Si ingresa algo m√°s en lugar de estos n√∫meros, se usar√° el valor predeterminado = 2. <br><br>  Tambi√©n puede seleccionar el tipo de reequilibrio.  Si establece local = 1, se utilizar√° el reequilibrio local.  Si local = 0 - lleno. <br><br>  Y no olvide establecer la escala √≥ptima para la hoja de proceso antes de comenzar la visualizaci√≥n, de lo contrario, la matriz auxiliar no se ajustar√° en la pantalla. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416653/">https://habr.com/ru/post/es416653/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416641/index.html">8 etapas del proceso de desarrollo de una interfaz de aplicaci√≥n m√≥vil</a></li>
<li><a href="../es416643/index.html">Implementaci√≥n de Elasticsearch en AWS con Kubernetes en 10 pasos</a></li>
<li><a href="../es416645/index.html">MIS Patrones de investigaci√≥n</a></li>
<li><a href="../es416647/index.html">¬øLas agencias gubernamentales sue√±an con riesgos el√©ctricos?</a></li>
<li><a href="../es416651/index.html">1M HTTP rps en 1 n√∫cleo de CPU. DPDK en lugar de nginx + linux kernel TCP / IP</a></li>
<li><a href="../es416657/index.html">Dos tercios de las tarjetas de memoria usadas contienen datos personales de propietarios anteriores</a></li>
<li><a href="../es416659/index.html">Debido a lo que el volumen de pagos digitales para la econom√≠a del concierto alcanzar√° $ 1.2 billones de d√≥lares</a></li>
<li><a href="../es416661/index.html">¬øQu√© tendencias deben considerar los usuarios y proveedores de banca m√≥vil?</a></li>
<li><a href="../es416665/index.html">Reutilizaci√≥n de bibliotecas privadas de Android con Sonatype Nexus Repository OSS</a></li>
<li><a href="../es416667/index.html">Presupuesto de aislamiento de polvo y ruido de la antigua unidad del sistema</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>