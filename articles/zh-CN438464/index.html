<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♈️ ⛺️ 🤑 SciPy，图算法 🎛️ 🤧 👨🏻‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SciPy（发音为sai pie）是基于Numpy Python扩展的数学应用程序包。 通过为用户提供用于管理和可视化数据的高级命令和类，它大大扩展了Python的功能。 借助SciPy，交互式Python会话可为复杂系统（如MATLAB，IDL，Octave，R-Lab和SciLab）转变为相同的...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SciPy，图算法</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438464/"><p><img src="https://habrastorage.org/webt/s2/55/ud/s255ud2nf0wnsogfo3bbd7etiko.jpeg" alt="图片"></p><br><p>  SciPy（发音为sai pie）是基于Numpy Python扩展的数学应用程序包。 通过为用户提供用于管理和可视化数据的高级命令和类，它大大扩展了Python的功能。 借助SciPy，交互式Python会话可为复杂系统（如MATLAB，IDL，Octave，R-Lab和SciLab）转变为相同的完整数据处理和原型开发环境。 </p><a name="habracut"></a><br><h3 id="vvedenie"> 引言 </h3><br><p>建议将SciPy软件包作为Anaconda的一部分安装。 建议您熟悉Python的基础知识，并准备好Numpy文档。 为了简洁和方便起见，我们同意将导入以下主要软件包（numpy，scipy和matplotlib）： </p><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mpl <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt</code> </pre> <br><p> 这是NumPy，SciPy源代码和文档中使用的官方导入协议。 遵循代码中的这些约定是可选的，但强烈建议您这样做。 建议分别导入每个软件包，如下所示： </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> linalg, optimize</code> </pre> <br><p>  SciPy和NumPy具有完整的文档版本，涵盖了几乎所有功能。 它们可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://docs.scipy.org/上</a>以HTML和PDF格式获得。 有些部分可能不完整或过时，例如 文档不断开发中。 由于SciPy是一个志愿者组织，并且依赖于社区，因此欢迎并积极鼓励您从提供反馈到改进文档和代码的参与。 </p><br><h3 id="algoritmy-na-razrezhennyh-grafah-scipycsgraph"> 稀疏图算法（scipy.csgraph） </h3><br><img src="https://habrastorage.org/webt/ru/ha/xd/ruhaxdt-r_ec9nnbjqopzrfd1io.jpeg"><br><p>  <em>刘易斯·卡罗尔（Lewis Carroll），1877年圣诞节快乐</em> <br><br></p><br><p> 考虑使用scipy.csgraph包作为1877年圣诞节由Lewis Carroll发明的儿童游戏“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文字</a>阶梯”的示例。 在这个游戏中，您需要查找单词之间的路径，一次替换一个字母。 例如，您可以通过如下连接“猿”和“人”来跟踪从猴子到人的路径： </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>m</mi><mi>a</mi><mi>p</mi><mi>e</mi><mtext mathcolor=&quot;red&quot;>\&amp;#x8D34;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x88C5;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>i</mi><mi>t</mi><mtext mathcolor=&quot;red&quot;>\&amp;#x94BB;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5934;</mo></mrow><mtext mathcolor=&quot;red&quot;>\&amp;#x5927;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x578B;</mo></mrow><mtext mathcolor=&quot;red&quot;>\&amp;#x624B;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x63D0;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x888B;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>a</mi><mi>g</mi><mtext mathcolor=&quot;red&quot;>\&amp;#x7537;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x58EB;</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="42.589ex" height="2.66ex" viewBox="0 -832 18336.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-6D" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-61" x="1580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-70" x="2109" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-65" x="2613" y="0"></use><g fill="red" stroke="red" transform="translate(3079,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">贴</text></g></g><g transform="translate(4409,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">装</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-61" x="5489" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-69" x="6019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-74" x="6364" y="0"></use><g fill="red" stroke="red" transform="translate(6726,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">钻</text></g></g><g transform="translate(8056,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">头</text></g><g fill="red" stroke="red" transform="translate(8886,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">大</text></g></g><g transform="translate(10217,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">型</text></g><g fill="red" stroke="red" transform="translate(11047,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">手</text></g></g><g transform="translate(12377,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">提</text></g><g transform="translate(13207,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">袋</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-6D" x="14287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-61" x="15166" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-67" x="15695" y="0"></use><g fill="red" stroke="red" transform="translate(16176,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">男</text></g></g><g transform="translate(17506,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">士</text></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>r</mi><mi>m</mi><mi>a</mi><mi>p</mi><mi>e</mi><mtext mathcolor="red">\贴</mtext><mrow class="MJX-TeXAtom-ORD"><mo>装</mo></mrow><mtext>&nbsp;</mtext><mi>a</mi><mi>i</mi><mi>t</mi><mtext mathcolor="red">\钻</mtext><mrow class="MJX-TeXAtom-ORD"><mo>头</mo></mrow><mtext mathcolor="red">\大</mtext><mrow class="MJX-TeXAtom-ORD"><mo>型</mo></mrow><mtext mathcolor="red">\手</mtext><mrow class="MJX-TeXAtom-ORD"><mo>提</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>袋</mo></mrow><mtext>&nbsp;</mtext><mi>m</mi><mi>a</mi><mi>g</mi><mtext mathcolor="red">\男</mtext><mrow class="MJX-TeXAtom-ORD"><mo>士</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ rm ape \贴装\ ait \钻头\大型\手提袋\ mag \男士</script></p><br><p> 请注意，每个步骤仅涉及更改单词的一个字母。 这只是从猴子到人的一条可能路径，但这是最短的路径吗？ 因此，有必要找到两个给定单词之间的最短路径（阶梯）。 可以使用scipy.sparse.csgraph包解决此问题。 </p><br><p> 首先，我们需要一个有效单词列表。 许多操作系统都有这样的内置列表。 例如，在Linux中，可以在以下位置之一找到单词列表： </p><br><pre> <code class="plaintext hljs">/usr/share/dict /var/lib/dict</code> </pre> <br><p> 另一个词源是词典，可在Internet上的各种站点上找到（在您喜欢的搜索引擎中查看）。 系统单词列表是一个文件，每行一个单词。 要使用系统单词列表，您需要阅读以下内容： </p><br><pre> <code class="python hljs">word_list = open(<span class="hljs-string"><span class="hljs-string">'/usr/share/dict/words'</span></span>).readlines() word_list = map(str.strip, word_list)</code> </pre> <br><p> 因为 我们正在寻找三个字母的单词，那么我们将从常规列表中仅选择必要的单词。 还应排除以大写字母（专有名词）开头或包含非字母字符（例如撇号和连字符）的单词。 最后，检查生成的单词列表的大小。 </p><br><pre> <code class="python hljs">word_list = [word <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> word_list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(word) == <span class="hljs-number"><span class="hljs-number">3</span></span>] word_list = [word <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> word_list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> word[<span class="hljs-number"><span class="hljs-number">0</span></span>].islower()] word_list = [word <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> word_list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> word.isalpha()] word_list = list (map (str.lower, word_list)) len (word_list)</code> </pre> <br><pre> <code class="plaintext hljs">591</code> </pre> <br><p> 现在，我们有了591个三字母单词的列表（确切的数字可能会根据所使用的特定词典而有所不同）。 这些单词中的每一个都是图表的顶部。 创建连接仅相差一个字母的顶点（单词对）的边。 <br> 我们使用一种相当有效的方式，这需要对numpy数组进行一些操作： </p><br><pre> <code class="python hljs">word_list = np.asarray(word_list) word_list.sort() <span class="hljs-comment"><span class="hljs-comment">#     word_list.dtype #   -  Unicode  Python</span></span></code> </pre> <br><pre> <code class="plaintext hljs">dtype('&lt;U3')</code> </pre> <br><p> 现在我们有了一个数组，其中每个条目包含三个Unicode字符。 我们想找到所有只有一个字符的对。 让我们首先将每个单词转换为三维向量： </p><br><pre> <code class="python hljs">word_bytes = np.ndarray((word_list.size, word_list.itemsize), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>, buffer=word_list.data) <span class="hljs-comment"><span class="hljs-comment">#     - 4 .      #        word_bytes = word_bytes[:, ::word_list.itemsize//3] word_bytes.shape</span></span></code> </pre> <br><pre> <code class="plaintext hljs">(591, 3)</code> </pre> <br><p> 我们记得汉明距离是相同长度的两个向量中不同字符的数量。 使用汉明距离，我们确定连接单词对的边的长度。 每两个单词连接到单词阶梯的距离等于 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.371ex" height="2.419ex" viewBox="0 -780.1 3604 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-63" x="1781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-31" x="2215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-4E" x="2715" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ frac {1} {N} </script> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi><mo>=</mo><mn>3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.325ex" height="2.057ex" viewBox="0 -780.1 2723.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-3D" x="1166" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/438464/&amp;usg=ALkJrhjsBhO5HXU9Krw__vJxB0HiOrlhVQ#MJMAIN-33" x="2222" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>=</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> N = 3 </script>  -一个单词中的字母数： </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.spatial.distance <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pdist, squareform <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> csr_matrix hamming_dist = pdist (word_bytes, metric = <span class="hljs-string"><span class="hljs-string">'hamming'</span></span>) graph = csr_matrix (squareform (hamming_dist &lt; <span class="hljs-number"><span class="hljs-number">1.5</span></span> / <span class="hljs-number"><span class="hljs-number">3</span></span>))</code> </pre> <br><p> 比较距离时，使用非严格等式，因为否则结果对于浮点值可能不稳定。 如果单词中的两个字符不匹配，则不等式将提供所需的结果。 现在已经给出了图，我们将在图上的任何两个词之间执行最短路径搜索： </p><br><pre> <code class="python hljs">i1 = word_list.searchsorted (<span class="hljs-string"><span class="hljs-string">'ape'</span></span>) i2 = word_list.searchsorted (<span class="hljs-string"><span class="hljs-string">'man'</span></span>)</code> </pre> <br><p> 现在，您需要在图形上找到这两个顶点之间的最短路径。 为此，我们使用Dijkstra算法，该算法可让您找到指定顶点的所有可能距离： </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse.csgraph <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dijkstra distances, predecessors = dijkstra(graph, indices=i1, return_predecessors=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) print(distances[i2])</code> </pre> <br><pre> <code class="plaintext hljs">5.0</code> </pre> <br><p> 因此，我们看到猴子和人之间的最短路径仅包含五个步骤。 我们可以使用算法返回的前任恢复此路径： </p><br><pre> <code class="python hljs">path = [] i = i2 <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> i != i1: path.append(word_list[i]) i = predecessors[i] path.append(word_list[i1]) print(path[::<span class="hljs-number"><span class="hljs-number">-1</span></span>])</code> </pre> <br><pre> <code class="plaintext hljs">['ape', 'apt', 'opt', 'oat', 'mat', 'man']</code> </pre> <br><p> 楼梯的长度比初始示例少三步。 使用该模块的其他工具，您可以找到其他问题的答案。 例如，在单词阶梯中是否存在未连接三个字母的单词？ 这是确定图的连通性的任务： </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse.csgraph <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> connected_components N_components, component_list = connected_components(graph) print(N_components)</code> </pre> <br><pre> <code class="plaintext hljs">15</code> </pre> <br><p> 在我们的示例中，对于三个字母的单词，有15个相关的组成部分：即15个不同的单词集，它们之间没有路径。 每组中有多少个单词？ 我们可以从组件列表中找到： </p><br><pre> <code class="python hljs">[np.sum(component_list == i) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(N_components)]</code> </pre> <br><pre> <code class="plaintext hljs">[577, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</code> </pre> <br><p> 我们得到了一个大图，其中包括577个顶点以及14个孤立图。 让我们看看这些词： </p><br><pre> <code class="python hljs">[list(word_list[np.where(component_list == i)]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, N_components)]</code> </pre> <br><pre> <code class="plaintext hljs">[['aha'], ['chi'], ['ebb'], ['gnu'], ['ism'], ['khz'], ['nth'], ['née'], ['ova'], ['qua'], ['ugh'], ['ups'], ['urn'], ['use']]</code> </pre> <br><p> 您可以找出在两个单词之间有最大长度的阶梯。 这可以通过计算邻接矩阵来确定。 请注意，两个未连接点之间的距离被认为是无限的，因此应将它们排除在外： </p><br><pre> <code class="python hljs">distances, predecessors = dijkstra(graph, return_predecessors=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) max_distance = np.max(distances[~np.isinf(distances)]) print(max_distance)</code> </pre> <br><pre> <code class="plaintext hljs">13.0</code> </pre> <br><p> 因此，在我们的示例中有这样的单词对，它们之间最短的楼梯包含13个台阶！ 让我们确定这些对是什么： </p><br><pre> <code class="python hljs">i1, i2 = np.where(distances == max_distance) list(zip(word_list[i1], word_list[i2]))</code> </pre> <br><pre> <code class="plaintext hljs">[('imp', 'ohm'), ('imp', 'ohs'), ('ohm', 'imp'), ('ohm', 'ump'), ('ohs', 'imp'), ('ohs', 'ump'), ('ump', 'ohm'), ('ump', 'ohs')]</code> </pre> <br><p> 我们看到了成对的单词的所有可能组合，它们之间的距离为13（最大程度彼此分开）。 如果仔细观察，在楼梯的一侧是单词“ imp”和“ ump”，它们彼此不同，只有一个字母。 在楼梯的另一侧是单词“ ohm”和“ ohs”，它们也仅以一个字母来区分。 这些单词之间的步骤列表将几乎相同。 可以通过与上述相同的方式找到它： </p><br><pre> <code class="python hljs">path = [] i = i2[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> i != i1[<span class="hljs-number"><span class="hljs-number">0</span></span>]: path.append(word_list[i]) i = predecessors[i1[<span class="hljs-number"><span class="hljs-number">0</span></span>], i] path.append(word_list[i1[<span class="hljs-number"><span class="hljs-number">0</span></span>]]) print(path[::<span class="hljs-number"><span class="hljs-number">-1</span></span>])</code> </pre> <br><pre> <code class="plaintext hljs">['imp', 'amp', 'asp', 'ass', 'ads', 'ids', 'ins', 'inn', 'ion', 'won', 'woo', 'who', 'oho', 'ohm']</code> </pre> <br><p> 单词阶梯只是scipy中稀疏图上快速算法的可能用途之一。 图论被用于数学，数据分析和机器学习的许多领域。  Scipy稀疏图工具足够灵活，可以处理各种各样的任务。 <br> 如果您在评论中写scipy的哪一部分将在下一篇文章中读到，我将很高兴。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438464/">https://habr.com/ru/post/zh-CN438464/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438454/index.html">OpenSceneGraph：对象的详细程度（LOD）和背景加载</a></li>
<li><a href="../zh-CN438456/index.html">在Zimbra Collaboration Suite中设置单一登录</a></li>
<li><a href="../zh-CN438458/index.html">DUMP 2019大会将于4月19日举行。 我们邀请您在“前端”，“后端”和“科学”部分发表演讲。</a></li>
<li><a href="../zh-CN438460/index.html">数据库级序列化</a></li>
<li><a href="../zh-CN438462/index.html">向Android应用添加通知的快速方法</a></li>
<li><a href="../zh-CN438466/index.html">中国激光拐杖</a></li>
<li><a href="../zh-CN438468/index.html">殖民地 第23章试驾</a></li>
<li><a href="../zh-CN438470/index.html">2018年12月和2018年全球销量：200万辆插电式电动汽车销量</a></li>
<li><a href="../zh-CN438472/index.html">UE4中复杂的模块化架构环境</a></li>
<li><a href="../zh-CN438474/index.html">信使：Dropbox迁移到gRPC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>