<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ผ ๐จ๐ผโ๐ณ โ ููุงุณูุฉ ุงูุทุนุงู "ุงูุญุฏูุซ" ูู C ++ ูู ุฎูุงู ุงูููุซููู ู CSP ๐ฉ๐ฝโ๐คโ๐จ๐ฟ ๐๏ธ โถ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฐ ุจุนุถ ุงูููุช ุ ุงูุชุดุฑ ุฑุงุจุท ูููุงู "ููุงุณูุฉ ุงูุทุนุงู ุงูุญุฏูุซ" ุนูู ููุงุฑุฏ ูุซู ุฑุฏูุช ููุงูุฑ ูููุฒ. ุงูููุงู ูุซูุฑ ููุงูุชูุงู ุ ููู ูุนุฑุถ ุงูุนุฏูุฏ ูู ุงูุญููู ููุฐู ุงููููุฉ ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงุณูุฉ ุงูุทุนุงู "ุงูุญุฏูุซ" ูู C ++ ูู ุฎูุงู ุงูููุซููู ู CSP</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437998/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุฐ ุจุนุถ ุงูููุช ุ ุงูุชุดุฑ ุฑุงุจุท ูููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">"ููุงุณูุฉ ุงูุทุนุงู ุงูุญุฏูุซ"</a> ุนูู ููุงุฑุฏ ูุซู ุฑุฏูุช ููุงูุฑ ูููุฒ.  ุงูููุงู ูุซูุฑ ููุงูุชูุงู ุ ููู ูุนุฑุถ ุงูุนุฏูุฏ ูู ุงูุญููู ููุฐู ุงููููุฉ ุงููุนุฑููุฉ ุ ูุงูุชู ุชู ุชูููุฐูุง ูู ูุบุฉ C ++ ุงูุญุฏูุซุฉ ุจุงุณุชุฎุฏุงู ููุฌ ูุงุฆู ุนูู ุงูููุงู.  ุฅุฐุง ูู ููุฑุฃ ุฃุญุฏ ูุฐู ุงูููุงูุฉ ุจุนุฏ ุ ููู ุงูููุทูู ูุถุงุก ุงูููุช ููุฑุงุกุชู. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุง ุฃุณุชุทูุน ุฃู ุฃููู ุฅู ุงูุญููู ุงูููุฏูุฉ ูู ุงูููุงูุฉ ุชุจุฏู ุจุณูุทุฉ ููููููุฉ ุจุงููุณุจุฉ ูู.  ูุฐุง ุฑุจูุง ูุฑุฌุน ุฅูู ุงุณุชุฎุฏุงู ุงูููุงู.  ูุชู ุฅูุดุงุก ุงููุซูุฑ ูููู ูุฅุฑุณุงููู ูู ุฎูุงู ูุฌููุนุฉ ูุชููุนุฉ ูู ุงููุฑุณููู / ุงููุชุณูููู.  ูุฐูู ููุณ ูู ุงููุงุถุญ ุฏุงุฆููุง ููุงู ูุชูููุช ููุง ูู ุงูููุงู ุงูุชู ูุชู ุชูููุฐูุง. </p><br><p style=";text-align:right;direction:rtl">  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู ุงูููุฌ ุงููุงุฆู ุนูู ุงูููุงู ููุณ ูู ุงูููุฌ ุงููุญูุฏ ุงููููู ูุญู ูุฐู ุงููุดุงูู.  ููุงุฐุง ูุง ุชุฑู ููู ูุชู ุญู ูููุฉ "ููุงุณูุฉ ุงูุทุนุงู" ูู ุฎูุงู ููุงุฐุฌ ูู ุงูููุซููู ู CSPุ </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ุญุงููุช ุงูุจุญุซ ูุชูููุฐ ุงูุนุฏูุฏ ูู ุงูุญููู ููุฐู ุงููุดููุฉ ุจุงุณุชุฎุฏุงู ููุงู ูู ุงูููุซููู ู CSP.  ูููู ุงูุนุซูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุนูู</a> ุฑูุฒ ูุฐู ุงูุญููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ูู ุงููุณุชูุฏุน ุนูู GitHub</a> .  ูุชุญุช ุงููุงุทุน ุ ุชูุณูุฑุงุช ูุชูุณูุฑุงุช ุ ูุฐูู ุฃู ุดุฎุต ููุชู ุ ูุฑุญุจ ุจู ุชุญุช ุงููุต. </p><a name="habracut"></a><br><h1 id="neskolko-obschih-slov" style=";text-align:right;direction:rtl">  ุจุนุถ ุงููููุงุช ุงูุดุงุฆุนุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูู ููู ูุฏู ูุฏู ูุชูุซู ูู ุชูุฑุงุฑ ุงููุฑุงุฑุงุช ุงููุงุฑุฏุฉ ูู ููุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">"ููุงุณูุฉ ุงูุทุนุงู ุงููุนุงุตุฑูู" ุชูุงููุง</a> ุ ูุง ุณููุง ูุฃููู ูุง ุฃุญุจ ุดูุฆูุง ููููุง ูุงุญุฏูุง: ูู ุงููุงูุน ุ ุงููููุณูู ูุง ููุนู ุดูุฆูุง ูู ุชูู ุงููุฑุงุฑุงุช.  ูููู ููุท "ุฃุฑูุฏ ุฃู ุขูู" ุ ููู ุซู ูุนุทูู ุฃุญุฏูู ุดูููุง ุจุทุฑููุฉ ุณุญุฑูุฉ ุ ุฃู ูููู "ุงูุขู ูู ููุฌุญ". </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุถุญ ููุงุฐุง ูุฌุฃ ุงููุคูู ุฅูู ูุฐุง ุงูุณููู: ููู ูุณูุญ ุจุงุณุชุฎุฏุงู ููุณ ุชุทุจูู "ุงููููุณูู" ุจุงูุงูุชุฑุงู ูุน ุชุทุจููุงุช ูุฎุชููุฉ ูู "ุงูุจุฑูุชููููุงุช".  ููุน ุฐูู ุ ูุจุฏู ูู ุดุฎุตูุงู ุฃู ุงูุฃูุฑ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุนูุฏูุง ูุญุงูู "ุงููููุณูู" ุฃุฎุฐ ุฃุญุฏ ุงูููููุงุช ุฃููุงู ุซู ุงูุขุฎุฑ.  ูุนูุฏูุง ูุฌุจุฑ "ุงููููุณูู" ุนูู ุงูุชุนุงูู ูุน ุงููุญุงููุงุช ุงููุงุดูุฉ ูููุจุถ ุนูู ุงูุดูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐู ุจุงูุถุจุท ูู ุฅุฏุฑุงู ูููุฉ "ููุงุณูุฉ ุงูุทุนุงู" ุงูุชู ุญุงููุช ุงูููุงู ุจูุง.  ูู ุงูููุช ููุณู ุ ุงุณุชุฎุฏูุช ุจุนุถ ุงูุญููู ููุณ ุงูุฃุณุงููุจ ููุง ูู ุงูููุงูุฉ ุงููุฐููุฑุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุชู ุชูููุฐูุง ุจูุงุณุทุฉ ุจุฑูุชููููู ForkLevelPhilosopherProtocol ู WaiterFair). </p><br><p style=";text-align:right;direction:rtl">  ููุช ุจุจูุงุก ูุฑุงุฑู ุนูู ุฃุณุงุณ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SObjectizer</a> ุ ูุงูุฐู ูู ุบูุฑ ุงููุฑุฌุญ ุฃู ููุงุฌุฆ ุฃููุฆู ุงูุฐูู ูุฑุฃูุง ููุงูุงุชู ูู ูุจู.  ุฅุฐุง ูู ูุณูุน ุฃุญุฏ ุนู SObjectizer ุญุชู ุงูุขู ุ ุจุงุฎุชุตุงุฑ: ูุฐุง ูู ูุงุญุฏ ูู "ุฃุทุฑ ุงููุงุนู" ุงูููุชูุญุฉ ูุงููุทููุฑุฉ ุงูููุชูุญุฉ ุงููุตุฏุฑ ูู C ++ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">CAF</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">QP / C ++</a> ูููู ุฐูุฑูุง ูู ุจูู ุฃููุฑ ุฃุฎุฑู).  ุขูู ุฃู ุชููู ุงูุฃูุซูุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ูุน ุชุนูููุงุชู ูุงุถุญุฉ ุจูุง ูููู ุญุชู ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ููุณูุง ุนูู ุฏุฑุงูุฉ ุจู SObjectizer.  ุฅุฐุง ูู ููู ูุฐูู ุ ุณุฃููู ุณุนูุฏูุง ุจุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ ุงููุงุฑุฏุฉ ูู ุงูุชุนูููุงุช. </p><br><h1 id="resheniya-na-baze-aktorov" style=";text-align:right;direction:rtl">  ุญููู ุงููุงุนููู </h1><br><p style=";text-align:right;direction:rtl">  ุณูุจุฏุฃ ููุงูุดุฉ ุงูุญููู ุงููููุฐุฉ ูุน ุงูุญููู ุงููุงุฆูุฉ ุนูู ุงูููุซููู.  ุฃููุงู ุ ููุฑ ูู ุชุทุจูู ุญู Edsger Dijkstra ุ ุซู ุงูุชูู ุฅูู ุงูุนุฏูุฏ ูู ุงูุญููู ุงูุฃุฎุฑู ูุดุงูุฏ ููู ูุฎุชูู ุณููู ูู ุญู. </p><br><h2 id="reshenie-deykstry" style=";text-align:right;direction:rtl">  ูุฑุงุฑ ุฏููุณุชุฑุง </h2><br><p style=";text-align:right;direction:rtl">  Edsger Dijkstra ุ ูู ููุชู ุจุตูุงุบุฉ ูููุฉ "ุชูุงูู ุงูุทุนุงู ูููููููุณ" (ุตูุงุบุชู ุจุงุณุชุฎุฏุงู "ุงูุดูู" ู "ุงูุณุจุงุบูุชู" ุงูุชู ุนุจุฑ ุนููุง ุชููู ููุงุฑ) ุ ุจู ุงูุชุฑุญ ุฃูุถูุง ุญููุง ุจุณูุทูุง ูุฌููููุง ููุบุงูุฉ.  ููู: ูุฌุจ ุนูู ุงูููุงุณูุฉ ุงูุงุณุชููุงุก ุนูู ุงูุดูู ููุท ูู ุฃุฌู ุฒูุงุฏุฉ ุนุฏุฏ ุงูุดูู ุ ูุฅุฐุง ุชููู ุงููููุณูู ูู ุฃุฎุฐ ุงูุดููุฉ ุงูุฃููู ุ ููู ูุชุฑููุง ุญุชู ูุชููู ุงูุดููุฉ ุงูุซุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ุงููููุณูู ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุดููุงุช ุจุฑูููู 5 ู 6 ุ ููุฌุจ ุนูู ุงููููุณูู ุฃููุงู ุฃู ูุฃุฎุฐ ุดููุฉ ุจุฑูู 5. ุนูุฏูุง ููุท ูููู ุฃู ูุฃุฎุฐ ุดููุฉ ุจุฑูู 6. ูููุฐุง ุ ุฅุฐุง ูุงูุช ุงูุดููุงุช ุฐุงุช ุงูุฃุฑูุงู ุงูุฃุฏูู ุนูู ูุณุงุฑ ุงูููุงุณูุฉ ุ ููุฌุจ ุนูู ุงููููุณูู ุฃููุงู ุ ุงุณุชุฎุฏู ุงูุดููุฉ ุงููุณุฑู ูุนูุฏูุง ููุท ููููู ุฃุฎุฐ ุงูุดููุฉ ุงููููู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงููููุณูู ุงูุฃุฎูุฑ ูู ุงููุงุฆูุฉ ุ ุงูุฐู ูุชุนูู ุนููู ุงูุชุนุงูู ูุน ุงูุดููุงุช ุจุงูุฃุฑูุงู (N-1) ู 0 ุ ุจุงูุนูุณ: ูุฃุฎุฐ ุฃููุงู ุงูุดููุฉ ุงููููู ุจุฑูู 0 ุ ุซู ุงูุดููุฉ ุงููุณุฑู ุจุงูุฑูู (N-1). </p><br><p style=";text-align:right;direction:rtl">  ูุชูููุฐ ูุฐุง ุงูููุฌ ุ ุณุชููู ููุงู ุญุงุฌุฉ ุฅูู ููุนูู ูู ุงูุนูุงุตุฑ ุงููุงุนูุฉ: ูุงุญุฏ ููุดูู ูุงูุขุฎุฑ ููููุงุณูุฉ.  ุฅุฐุง ุฃุฑุงุฏ ุงููููุณูู ุฃู ูุฃูู ุ ูุฑุณู ุฑุณุงูุฉ ุฅูู ููุซู ุงูุดููุฉ ุงูููุงุจู ูุงูุชูุงุท ุงูุดููุฉ ุ ููุณุชุฌูุจ ููุซู ุงูุดููุฉ ุจุฑุณุงูุฉ ุงุณุชุฌุงุจุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฑูุฒ ูุชูููุฐ ูุฐุง ุงูููุฌ ูููู ุฃู ููุธุฑ ุฅููู <a href="" rel="nofollow">ููุง</a> . </p><br><h3 id="soobscheniya" style=";text-align:right;direction:rtl">  ุงูุฑุณุงุฆู </h3><br><p style=";text-align:right;direction:rtl">  ูุจู ุงูุชุญุฏุซ ุนู ุงูุฌูุงุช ุงููุงุนูุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅููุงุก ูุธุฑุฉ ุนูู ุงูุฑุณุงุฆู ุงูุชู ุณูุชุจุงุฏููุง ุงูููุซููู: </p><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">take_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">mbox_t</span></span> m_who; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> m_philosopher_index; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">taken_t</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">signal_t</span></span> {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">put_t</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">signal_t</span></span> {};</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุฑูุฏ ุงูููุซู ุงููููุณูู ุฃุฎุฐ ุงููุงุจุณ ุ ูุฑุณู ุฑุณุงูุฉ <code>take_t</code> ุฅูู <code>take_t</code> ุงูุดููุฉ ุ ููุณุชุฌูุจ ููุซู ุงูุดููุฉ ุจุฑุณุงูุฉ <code>taken_t</code> .  ุนูุฏูุง ููุชูู ุงูููุซู ุงููููุณูู ูู ุงูุฃูู ููุฑูุฏ ุฅุนุงุฏุฉ ุงูุดูู ุฅูู ุงูุทุงููุฉ ุ ูุฑุณู ุฑุณุงุฆู put_t ุฅูู <code>put_t</code> ููุฑูุณ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฑุณุงูุฉ <code>take_t</code> ุ ูุดูุฑ ุงูุญูู <code>take_t</code> ุฅูู ุตูุฏูู ุงูุจุฑูุฏ (ุงููุนุฑูู ุฃูุถูุง ุจุงุณู mbox) ูููุซู ุงููููุณูู.  ูุฌุจ ุฅุฑุณุงู ุฑุณุงูุฉ ุงุณุชุฌุงุจุฉ <code>taken_t</code> ุฅูู <code>taken_t</code> ูุฐุง.  ูุง ูุชู ุงุณุชุฎุฏุงู ุงูุญูู ุงูุซุงูู ูู <code>take_t</code> ูู ูุฐุง ุงููุซุงู ุ ูุณูุญุชุงุฌู ุนูุฏูุง ูุตู ุฅูู ุชุทุจููุงุช waiter_with_queue ู waiter_with_timestamps. </p><br><h3 id="aktor-vilka" style=";text-align:right;direction:rtl">  ุงูููุซู ุดููุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููููุง ุฃู ููุธุฑ ุฅูู ูุง ูู ููุซู ุดููุฉ.  ููุง ูู ุฑูุฒู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fork_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">fork_t</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">context_t</span></span> ctx ) : so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(ctx) } {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">so_define_agent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     'free'. this &gt;&gt;= st_free; //   'free'    . st_free .event( [this]( mhood_t&lt;take_t&gt; cmd ) { this &gt;&gt;= st_taken; so_5::send&lt; taken_t &gt;( cmd-&gt;m_who ); } ); //   'taken'   . st_taken .event( [this]( mhood_t&lt;take_t&gt; cmd ) { //     . m_queue.push( cmd-&gt;m_who ); } ) .event( [this]( mhood_t&lt;put_t&gt; ) { if( m_queue.empty() ) //     . this &gt;&gt;= st_free; else { //      . const auto who = m_queue.front(); m_queue.pop(); so_5::send&lt; taken_t &gt;( who ); } } ); } private : //    . const state_t st_free{ this, "free" }; const state_t st_taken{ this, "taken" }; //   . std::queue&lt; so_5::mbox_t &gt; m_queue; };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุณุชูุฏ ูู ููุซู ูู SObjectizer ูู <code>agent_t</code> class.  ูุง ูุฑุงู ููุง ูููุน <code>fork_t</code> . </p><br><p style=";text-align:right;direction:rtl">  ุชู ุชุฌุงูุฒ ุงูุฃุณููุจ <code>so_define_agent()</code> ูู ูุฆุฉ <code>so_define_agent()</code> .  ูุฐู ุทุฑููุฉ ุฎุงุตุฉ ุ ูุชู ุงุณุชุฏุนุงุคูุง ุชููุงุฆููุง ุจูุงุณุทุฉ SObjectizer ุนูุฏ ุชุณุฌูู ูููู ุฌุฏูุฏ.  ูู ุทุฑููุฉ <code>so_define_agent()</code> ุ ูุชู "ุชูููู" <code>so_define_agent()</code> ููุนูู ูู SObjectizer: ุชุชุบูุฑ ุญุงูุฉ ุงูุจุฏุก ุ ููุชู ุงูุงุดุชุฑุงู ูู ุงูุฑุณุงุฆู ุงูุถุฑูุฑูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ููุซู ูู SObjectizer ูู ุฌูุงุฒ ุญุงูุฉ ูู ุญุงูุงุช (ุญุชู ูู ูุงู ุงูููุซู ูุณุชุฎุฏู ุญุงูุฉ ุงูุชุฑุงุถูุฉ ูุงุญุฏุฉ ููุท).  ูุญุชูู ุงูููุซู <code>fork_t</code> ุนูู ุญุงูุชูู: <em>ูุฌุงูู</em> ููุชู <code>fork_t</code> .  ุนูุฏูุง ูููู ุงูููุซู ูู ุญุงูุฉ <em>ุญุฑุฉ</em> ุ ูููู ูููููุณูู "ุงูุชูุงุท" ุงููุงุจุณ.  ูุจุนุฏ ุงูุชูุงุท "ุงูุดููุฉ" ุ ูุฌุจ ุฃู ูุฐูุจ ููุซู <code>fork_t</code> ุฅูู ุงูุญุงูุฉ ุงูุชู ุชู <em>ุงูุชูุงุทูุง</em> .  ุฏุงุฎู ูุฆุฉ <code>fork_t</code> ูุชู ุชูุซูู ุงูุญุงูุงุช <code>st_free</code> ู <code>st_taken</code> ุงูููุน <code>state_t</code> ุงูุฎุงุต. </p><br><p style=";text-align:right;direction:rtl">  ุชุณูุญ ูู ุงูุฏูู ุจูุนุงูุฌุฉ ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุจุทุฑู ูุฎุชููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูุญุงูุฉ <em>ุงูุญุฑุฉ</em> ุ ูุณุชุฌูุจ ุงููููู ููุท ูู <code>take_t</code> ููููู ุฑุฏ ุงููุนู ูุฐุง ุจุณูุทูุง ููุบุงูุฉ: ุชุชุบูุฑ ุญุงูุฉ ุงูููุซู <code>taken_t</code> ุงูุงุณุชุฌุงุจุฉ <code>taken_t</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">st_free .event( [<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>]( <span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span>&gt; cmd ) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_taken; so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span> &gt;( cmd-&gt;m_who ); } );</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูููุง ูุชู ุชุฌุงูู ูู ุงูุฑุณุงุฆู ุงูุฃุฎุฑู ุ ุจูุง ูู ุฐูู <code>put_t</code> ูู ุงูุญุงูุฉ <em>ุงูุญุฑุฉ</em> ุ ุจูู ุจุณุงุทุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุญุงูุฉ <em>ุงูุชู</em> ูุชู <em>ุงูุชูุงุทูุง</em> ุ ูููู ุงููุงุนู ุจูุนุงูุฌุฉ ุฑุณุงูุชูู ุ ูุญุชู ูู ุฑุณุงูุฉ <code>take_t</code> ูุฅูู ูุนุงูุฌ ุจุดูู ูุฎุชูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">st_taken .event( [<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>]( <span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span>&gt; cmd ) { m_queue.push( cmd-&gt;m_who ); } ) .event( [<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>]( <span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">put_t</span></span>&gt; ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( m_queue.empty() ) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_free; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> who = m_queue.front(); m_queue.pop(); so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span> &gt;( who ); } } );</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุชุจุฑ ูุนุงูุฌ <code>put_t</code> ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู <code>put_t</code> : ุฅุฐุง ูุงูุช ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูููุงุณูุฉ ุงููุงุฑุบุฉ ุ ููููููุง ุงูุนูุฏุฉ <em>ูุฌุงููุง</em> ุ ูููู ุฅุฐุง ูู ุชูู ูุงุฑุบุฉ ุ ููุฌุจ ุฅุฑุณุงู <code>taken_t</code> . </p><br><h3 id="aktor-filosof" style=";text-align:right;direction:rtl">  ุงููููุณูู ุงูููุซู </h3><br><p style=";text-align:right;direction:rtl">  <a href="" rel="nofollow">ุฑูุฒ ุงูููุซู ุงููููุณูู</a> ุฃูุซุฑ ุถุฎุงูุฉ ุ ูุฐูู ูู ุฃุนุทููุง ููุง ุจุงููุงูู.  ุณููุงูุด ููุท ุงูุดุธุงูุง ุงูุฃูุซุฑ ุฃูููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฏู ุงููููุณูู ุงูููุซู ุญุงูุงุช ุฃูุซุฑ ููููุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> st_thinking{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"thinking.normal"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> st_wait_left{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"wait_left"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> st_wait_right{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"wait_right"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> st_eating{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"eating"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> st_done{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"done"</span></span> };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงูููุซู ุนููู ูู ุญุงูุฉ <em>ุชูููุฑ</em> ุ ุซู <em>ููุชูู</em> ุฅูู <em>wait_left</em> ุ ุซู ุฅูู <em>wait_right</em> ุ ุซู ุฅูู <em>ุงูุฃูู</em> .  ูู <em>ุงูุฃูู ุ</em> ูููู ููููุซู ุงูุนูุฏุฉ ุฅูู <em>ุงูุชูููุฑ</em> ุฃู ูููู <em>ุงูููุงู ุจู</em> ุฅุฐุง ูุงู ุงููููุณูู ูุฏ ุฃูู ูู ูุง ูุฌุจ ุฃู ูููู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุชูุซูู ูุฎุทุท ุงูุฏููุฉ ูููููุณูู ุงูููุซู ุนูู ุงููุญู ุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ir/j0/sm/irj0smrzaedcsud20y71aynfqb4.png" alt="ุงูุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูุชู ูุตู ููุทู ุณููู ุงูููุซู ูู ุชูููุฐ ุทุฑููุฉ <code>so_define_agent()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">so_define_agent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   thinking     stop_thinking. st_thinking .event( [=]( mhood_t&lt;stop_thinking_t&gt; ) { //    . this &gt;&gt;= st_wait_left; so_5::send&lt; take_t &gt;( m_left_fork, so_direct_mbox(), m_index ); } ); //        taken. st_wait_left .event( [=]( mhood_t&lt;taken_t&gt; ) { //     .   . this &gt;&gt;= st_wait_right; so_5::send&lt; take_t &gt;( m_right_fork, so_direct_mbox(), m_index ); } ); //    ,    taken. st_wait_right .event( [=]( mhood_t&lt;taken_t&gt; ) { //    ,  . this &gt;&gt;= st_eating; } ); //      stop_eating. st_eating // 'stop_eating'        'eating'. .on_enter( [=] { so_5::send_delayed&lt; stop_eating_t &gt;( *this, eat_pause() ); } ) .event( [=]( mhood_t&lt;stop_eating_t&gt; ) { //      . so_5::send&lt; put_t &gt;( m_right_fork ); so_5::send&lt; put_t &gt;( m_left_fork ); //     . ++m_meals_eaten; if( m_meals_count == m_meals_eaten ) this &gt;&gt;= st_done; //  ,  ,  . else think(); } ); st_done .on_enter( [=] { //   ,   . completion_watcher_t::done( so_environment(), m_index ); } ); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุนู ุงูููุทุฉ ุงููุญูุฏุฉ ุงูุชู ููุจุบู ุงูุชุฃููุฏ ุนูููุง ุจุดูู ุฎุงุต ูู ุงูููุฌ ุงููุชุจุน ูู ุชูููุฏ ุนูููุงุช "ุงูุชูููุฑ" ู "ุงูุฃูู".  ูุง ููุฌุฏ <code>this_thread::sleep_for</code> ูู ุฑูุฒ ุงูููุซู ุฃู ุฃู ุทุฑููุฉ ุฃุฎุฑู ูููุน ุณูุณูุฉ ุงูุนูู ุงูุญุงููุฉ.  ุจุฏูุงู ูู ุฐูู ุ ูุชู ุงุณุชุฎุฏุงู ุงูุฑุณุงุฆู ุงููุนููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูุฏุฎู ููุซู ูู ุญุงูุฉ <em>ุงูุฃูู</em> ุ ูุฑุณู ุฅูู ููุณู ุฑุณุงูุฉ <code>stop_eating_t</code> ูุนููุฉ.  ูุชู ุชูุฏูู ูุฐู ุงูุฑุณุงูุฉ ุฅูู ูุคูุช SObjectizer ููููู ุงููููุช ุจุชุณููู ุงูุฑุณุงูุฉ ุฅูู ุงูููุซู ุนูุฏูุง ูุญูู ุงูููุช. </p><br><p style=";text-align:right;direction:rtl">  ูุชูุญ ูู ุงุณุชุฎุฏุงู ุงูุฑุณุงุฆู ุงููุคุฌูุฉ ุชุดุบูู ุฌููุน ุงูุนูุงุตุฑ ุงููุงุนูุฉ ูู ุณูุงู ุณูุณูุฉ ุนูููุงุช ูุงุญุฏุฉ.  ุชุญุฏุซ ุชูุฑูุจูุง ุ ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ููุฑุฃ ุฑุณุงุฆู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ููุฎุฑุฌ ูุนุงูุฌ ุงูุฑุณุงูุฉ ุงูุชุงููุฉ ูู ููุซู ุงููุณุชูู ุงููุทุงุจู.  ุณูุชู ููุงูุดุฉ ุงููุฒูุฏ ุญูู ุณูุงูุงุช ุงูุนูู ููุฌูุงุช ุงููุงุนูุฉ ุฃุฏูุงู. </p><br><h3 id="rezultaty" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br><p style=";text-align:right;direction:rtl">  ูุฏ ุชุจุฏู ูุชุงุฆุฌ ูุฐุง ุงูุชุทุจูู ููุง ููู (ุฌุฒุก ุตุบูุฑ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Socrates: tttttttttttLRRRRRRRRRRRRRREEEEEEEttttttttLRRRRRRRRRRRRRREEEEEEEEEEEEE Plato: ttttttttttEEEEEEEEEEEEEEEEttttttttttRRRRRREEEEEEEEEEEEEEttttttttttLLL Aristotle: ttttEEEEEtttttttttttLLLLLLRRRREEEEEEEEEEEEttttttttttttLLEEEEEEEEEEEEE Descartes: tttttLLLLRRRRRRRREEEEEEEEEEEEEtttLLLLLLLLLRRRRREEEEEEttttttttttLLLLLL Spinoza: ttttEEEEEEEEEEEEEttttttttttLLLRRRREEEEEEEEEEEEEttttttttttRRRREEEEEEtt Kant: ttttttttttLLLLLLLRREEEEEEEEEEEEEEEttttttttttLLLEEEEEEEEEEEEEEtttttttt Schopenhauer: ttttttEEEEEEEEEEEEEttttttLLLLLLLLLEEEEEEEEEttttttttLLLLLLLLLLRRRRRRRR Nietzsche: tttttttttLLLLLLLLLLEEEEEEEEEEEEEttttttttLLLEEEEEEEEEttttttttRRRRRRRRE Wittgenstein: ttttEEEEEEEEEEtttttLLLLLLLLLLLLLEEEEEEEEEttttttttttttRRRREEEEEEEEEEEt Heidegger: tttttttttttLLLEEEEEEEEEEEEEEtttttttLLLLLLREEEEEEEEEEEEEEEtttLLLLLLLLR Sartre: tttEEEEEEEEEttttLLLLLLLLLLLLRRRRREEEEEEEEEtttttttLLLLLLLLRRRRRRRRRRRR</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฑุฃ ูุฐุง ุนูู ุงููุญู ุงูุชุงูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>t</code> ูุฏู ุนูู ุฃู ุงููููุณูู ูู "ุงูุชูููุฑ" ุ </li><li style=";text-align:right;direction:rtl">  <code>L</code> ูุนูู ุฃู ุงููููุณูู ูุชููุน ุงูุชูุงุท ุงูุดููุฉ ุงููุณุฑู (ูู ุญุงูุฉ <em>wait_left</em> ) ุ </li><li style=";text-align:right;direction:rtl">  <code>R</code> ุชุนูู ุฃู ุงููููุณูู ูุชููุน ุงูุชูุงุท ุงูุดููุฉ ุงูุตุญูุญุฉ (ูู ุญุงูุฉ <em>wait_right</em> ) ุ </li><li style=";text-align:right;direction:rtl">  <code>E</code> ูุนูู ุฃู ุงููููุณูู "ูุฃูู". </li></ul><br><p style=";text-align:right;direction:rtl">  ูููููุง ุฃู ูุฑู ุฃู ุณูุฑุงุท ูุง ูููู ุฃู ูุฃุฎุฐ ุงูุดููุฉ ุนูู ุงููุณุงุฑ ุฅูุง ุจุนุฏ ุฃู ูุนุทูู ุณุงุฑุชุฑ.  ุจุนุฏ ุฐูู ุณูู ููุชุธุฑ ุณูุฑุงุท ุญุชู ูุทูู ุฃููุงุทูู ุงูุดููุฉ ุงูููุงุณุจุฉ.  ููุท ุจุนุฏ ูุฐุง ุณูุฑุงุท ุณูููู ูุงุฏุฑุง ุนูู ุชูุงูู ุงูุทุนุงู. </p><br><h2 id="prostoe-reshenie-bez-arbitra-oficianta" style=";text-align:right;direction:rtl">  ูุฑุงุฑ ุจุณูุท ุจุฏูู ูุญูู (ุงููุงุฏู) </h2><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูููุง ุจุชุญููู ูุชูุฌุฉ ูุฑุงุฑ ุฏููุณุชุฑุง ุ ุณูุฑู ุฃู ุงูููุงุณูุฉ ููุถูู ุงููุซูุฑ ูู ุงูููุช ูู ุงูุชุธุงุฑ ุงููุจุถ ุนูู ุงูุดูู.  ูุง ููุณ ุฌูุฏุง ุ ูุฃูู  ููููู ุฃูุถุง ุฃู ุชููู ูุฐู ุงููุฑุฉ ุนูู ุงูุชูููุฑ.  ููุณ ูู ุฏูู ููุงุจู ุฃู ูููู ููุงู ุฑุฃู ููุงุฏู ุฃูู ุฅุฐุง ููุฑุช ูู ูุนุฏุฉ ูุงุฑุบุฉ ุ ููููู ุงูุญุตูู ุนูู ูุชุงุฆุฌ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูุบูุฑ ูุชููุนุฉ ุ) </p><br><p style=";text-align:right;direction:rtl">  ููููู ูุธุฑุฉ ุนูู ุฃุจุณุท ุงูุญููู ุงูุชู ููุฑุฌุน ุจูุง ุงููููุณูู ุฃูู ุดููุฉ ุชู ุงูุชูุงุทูุง ุฅุฐุง ูู ูุณุชุทุน ุงูุชูุงุท ุงูุซุงููุฉ (ูู ููุงูุฉ "ููุงุณูุฉ ุงูุทุนุงู ุงูุญุฏูุซ" ุงููุฐููุฑุฉ ุฃุนูุงู ุ ูุชู ุชุทุจูู ูุฐุง ุงูุญู ุจูุงุณุทุฉ ForkLevelPhilosopherProtocol). </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฑุคูุฉ ุงูููุฏ ุงููุตุฏุฑู ููุฐุง ุงูุชุทุจูู <a href="" rel="nofollow">ููุง</a> ุ ูุงูููุฏ ุงูุฎุงุต ุจููุซู ุงููููุณูู ุงูููุงุจู <a href="" rel="nofollow">ููุง</a> . </p><br><h3 id="soobscheniya-1" style=";text-align:right;direction:rtl">  ุงูุฑุณุงุฆู </h3><br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู ูุฐุง ุงูุญู ููุณ ูุฌููุนุฉ ุงูุฑุณุงุฆู ุชูุฑูุจูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">take_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">mbox_t</span></span> m_who; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> m_philosopher_index; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">busy_t</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">signal_t</span></span> {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">taken_t</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">signal_t</span></span> {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">put_t</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">signal_t</span></span> {};</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุฑู ุงููุญูุฏ ูู ูุฌูุฏ ุฅุดุงุฑุฉ <code>busy_t</code> .  ูุฑุณู ุงูููุซู ุงููุงุนู ูุฐู ุงูุฅุดุงุฑุฉ ุงุณุชุฌุงุจุฉู ูููููุณูู - ุงูููุซู ุ ุฅุฐุง ูุงู ุงููููุณูู ูุฏ ุชู ุงูุงุณุชููุงุก ุนูููุง ุจุงููุนู. </p><br><h3 id="aktor-vilka-1" style=";text-align:right;direction:rtl">  ุงูููุซู ุดููุฉ </h3><br><p style=";text-align:right;direction:rtl">  ููุซู ุงูุดููุฉ ูู ูุฐุง ุงูุญู ุฃุจุณุท ูู ุญู Dijkstra: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fork_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">fork_t</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">context_t</span></span> ctx ) : so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span>( ctx ) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_free; st_free.event( [<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>]( <span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span>&gt; cmd ) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_taken; so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span> &gt;( cmd-&gt;m_who ); } ); st_taken.event( []( <span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span>&gt; cmd ) { so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">busy_t</span></span> &gt;( cmd-&gt;m_who ); } ) .just_switch_to&lt; <span class="hljs-keyword"><span class="hljs-keyword">put_t</span></span> &gt;( st_free ); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> st_free{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> st_taken{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> }; };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ููุง ูุณูุง ุจุญุงุฌุฉ ุญุชู ุฅูู ุงูุญูุงุธ ุนูู ุตู ุงูููุงุณูุฉ ุงูููุชุธุฑูู. </p><br><h3 id="aktor-filosof-1" style=";text-align:right;direction:rtl">  ุงููููุณูู ุงูููุซู </h3><br><p style=";text-align:right;direction:rtl">  ูุดุจู ุงููููุณูู - ุงููุงุนู ูู ูุฐุง ุงูุชูููุฐ ุ ุฐูู ุงูุญู ุงูุฎุงุต ุจู Dijkstra ุ ูููู ููุง ูุฌุจ ุนูู ุงููููุณูู - ุงููุงุนู ุฃู ูุนุงูุฌ <code>busy_t</code> ุ ูุฐูู ูุจุฏู ูุฎุทุท ุงูุญุงูุฉ ููุง ููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xa/ek/c8/xaekc8xbxewoj1e7myao4le6jn0.png" alt="ุงูุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูุจุงููุซู ุ ูุชู ุชุนุฑูู ุงูููุทู ุงููุงูู ููููุซู ุงููููุณูู ูู <code>so_define_agent()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">so_define_agent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ st_thinking .event&lt; <span class="hljs-keyword"><span class="hljs-keyword">stop_thinking_t</span></span> &gt;( [=] { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_wait_left; so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span> &gt;( m_left_fork, so_direct_mbox(), m_index ); } ); st_wait_left .event&lt; <span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span> &gt;( [=] { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_wait_right; so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span> &gt;( m_right_fork, so_direct_mbox(), m_index ); } ) .event&lt; <span class="hljs-keyword"><span class="hljs-keyword">busy_t</span></span> &gt;( [=] { think( st_hungry_thinking ); } ); st_wait_right .event&lt; <span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span> &gt;( [=] { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_eating; } ) .event&lt; <span class="hljs-keyword"><span class="hljs-keyword">busy_t</span></span> &gt;( [=] { so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">put_t</span></span> &gt;( m_left_fork ); think( st_hungry_thinking ); } ); st_eating .on_enter( [=] { so_5::send_delayed&lt; <span class="hljs-keyword"><span class="hljs-keyword">stop_eating_t</span></span> &gt;( *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, eat_pause() ); } ) .event&lt; <span class="hljs-keyword"><span class="hljs-keyword">stop_eating_t</span></span> &gt;( [=] { so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">put_t</span></span> &gt;( m_right_fork ); so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">put_t</span></span> &gt;( m_left_fork ); ++m_meals_eaten; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( m_meals_count == m_meals_eaten ) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &gt;&gt;= st_done; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> think( st_normal_thinking ); } ); st_done .on_enter( [=] { <span class="hljs-keyword"><span class="hljs-keyword">completion_watcher_t</span></span>::done( so_environment(), m_index ); } ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุดูู ุนุงู ุ ูุฐุง ูู ููุณ ุงูููุฏ ุงูููุฌูุฏ ูู ุญู Dijkstra ุ ุจุงุณุชุซูุงุก ุจุถุน ูุนุงูุฌุงุช ูู <code>busy_t</code> . </p><br><h3 id="rezultaty-1" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br><p style=";text-align:right;direction:rtl">  ูุชุงุฆุฌ ุงูุนูู ุชุจุฏู ูุฎุชููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Socrates: tttttttttL..R.....EEEEEEEEEEEEttttttttttR...LL..EEEEEEEttEEEEEE Plato: ttttEEEEEEEEEEEttttttL.....L..EEEEEEEEEEEEEEEttttttttttL....L.... Aristotle: ttttttttttttL..LR.EEEEEEtttttttttttL..L....L....R.....EEEEEEEEE Descartes: ttttttttttEEEEEEEEttttttttttttEEEEEEEEttttEEEEEEEEEEEttttttL..L.. Spinoza: ttttttttttL.....L...EEEEEEtttttttttL.L......L....L..L...R...R...E Kant: tttttttEEEEEEEttttttttL.L.....EEEEEEEEttttttttR...R..R..EEEEEtttt Schopenhauer: tttR..R..L.....EEEEEEEttttttR.....L...EEEEEEEEEEEEEEEEttttttttttt Nietzsche: tttEEEEEEEEEEtttttttttEEEEEEEEEEEEEEEttttL....L...L..L....EEEEEEE Wittgenstein: tttttL.L..L.....RR....L.....L....L...EEEEEEEEEEEEEEEtttttttttL. Heidegger: ttttR..R......EEEEEEEEEEEEEttttttttttR..L...L...L..L...EEEEtttttt Sartre: tttEEEEEEEtttttttL..L...L....R.EEEEEEEtttttEEEEtttttttR.....R..R.</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ูุฑู ุฑูุฒูุง ุฌุฏูุฏูุง ุ ููุง ูุนูู ุฃู ุงูููุซู ุงููููุณูู ูู "ุฃููุงุฑ ุฌุงุฆุนุฉ". </p><br><p style=";text-align:right;direction:rtl">  ุญุชู ูู ูุฐู ุงููุทุนุฉ ุงููุตูุฑุฉ ุ ูููู ูููุฑุก ุฃู ูุฑู ุฃู ููุงู ูุชุฑุงุช ุทูููุฉ ูู ุงูุฒูู ูุง ูุณุชุทูุน ุงููููุณูู ุชูุงูููุง.  ูุฐุง ูุฃู ูุฐุง ุงูุญู ูุญูู ูู ูุดููุฉ ุญุงูุฉ ุชููู ุชุงู ุ ููููู ูุง ูุชูุชุน ุจุญูุงูุฉ ุถุฏ ุงูุฌูุน. </p><br><h2 id="reshenie-s-oficiantom-i-ocheredyu" style=";text-align:right;direction:rtl">  ุงููุฑุงุฑ ูุน ุงููุงุฏู ููุงุฆูุฉ ุงูุงูุชุธุงุฑ </h2><br><p style=";text-align:right;direction:rtl">  ุฅู ุฃุจุณุท ุงูุญููู ุงูููุถุญุฉ ุฃุนูุงู ุจุฏูู ุญูู ูุง ูุญูู ูู ุงูุฌูุน.  ุชุญุชูู ููุงูุฉ "ููุงุณูุฉ ุงูุทุนุงู ุงูุญุฏูุซุฉ" ุงููุฐููุฑุฉ ุฃุนูุงู ุนูู ุญู ููุดููุฉ ุงูุตูุงู ูู ุดูู ุจุฑูุชูููู WaiterFair.  ุฎูุงุตุฉ ุงูููู ูู ุฃู ููุงู ุญููุงู (ูุงุฏู) ุ ููุฌุฃ ุฅููู ุงูููุงุณูุฉ ุนูุฏูุง ูุฑูุฏูู ุชูุงูู ุงูุทุนุงู.  ูุงููุงุฏู ูุฏูู ูุงุฆูุฉ ุงูุชุธุงุฑ ูู ุงูุทูุจุงุช ูู ุงูููุงุณูุฉ.  ููุญุตู ุงููููุณูู ุนูู ุงูุดูู ููุท ุฅุฐุง ูุงู ููุง ุงูุดูููู ูุฌุงููุงู ุงูุขู ุ ููู ููู ููุงู ุฃู ูู ุฌูุฑุงู ุงููููุณูู ุงูุฐูู ุชุญูููุง ุฅูู ุงููุงุฏู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ููู ูููู ููุฐุง ุงูุญู ููุณู ุฃู ููุธุฑ ุฅูู ุงูุฌูุงุช ุงููุงุนูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงูุนุซูุฑ ุนูู ุงูููุฏ ุงููุตุฏุฑู ููุฐุง ุงูุชุทุจูู <a href="" rel="nofollow">ููุง</a> . </p><br><h3 id="tryuk" style=";text-align:right;direction:rtl">  ุฎุฏุนุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุฃุณูู ุทุฑููุฉ ูู ุชูุฏูู ูุฌููุนุฉ ุฌุฏูุฏุฉ ูู ุงูุฑุณุงุฆู ุงูุชู ูู ุฎูุงููุง ูููู ููููุงุณูุฉ ุงูุชูุงุตู ูุน ุงููุงุฏู.  ููููู ุฃุฑุฏุช ุญูุธ ููุณ ููุท ูุฌููุนุฉ ุงูุฑุณุงุฆู ุงูููุฌูุฏุฉ ุจุงููุนู (ูุซู <code>take_t</code> ุ <code>taken_t</code> ุ <code>busy_t</code> ุ <code>put_t</code> ).  ุฃุฑุฏุช ุฃูุถูุง ุฃู ูุชู ุงุณุชุฎุฏุงู ููุณ ุงููููุณูู ุงูููุซู ููุง ูู ุงูุญู ุงูุณุงุจู.  ูุฐูู ุ ูุงู ุนููู ุญู ูุดููุฉ ุตุนุจุฉ: ููู ุฃุฌุนู ุงูููุซู ุงููููุณูู ูุชูุงุตู ูุน ุงููุงุฏู ุงููุงุนู ุงููุญูุฏ ุ ููู ูู ุงูููุช ููุณู ุงุนุชูุฏ ุฃูู ูุชูุงุนู ูุจุงุดุฑุฉ ูุน ุงูููุซููู - ุงูุดูู (ุงูุชู ูู ุชุนุฏ ูู ุงููุงูุน). </p><br><p style=";text-align:right;direction:rtl">  ุชู ุญู ูุฐู ุงููุดููุฉ ุจุงุณุชุฎุฏุงู ุฎุฏุนุฉ ุจุณูุทุฉ: ูููู ุงููุงุฏู ุงููุงุนู ุจุฅูุดุงุก ูุฌููุนุฉ ูู mbox-s ุ ูุชู ุชูุฏูู ุงุฑุชุจุงุทุงุช ุฅูู ุงูุฌูุงุช ุงููุงุนูุฉ ูููููุณูู ุจุงุนุชุจุงุฑูุง ุฑูุงุจุท ุฅูู mbox- ุงูุฌูุงุช ุงููุงุนูุฉ ูู ุงูููุงุจุณ.  ูู ููุณ ุงูููุช ุ ูุดุชุฑู ุงููุงุฏู ุงููุงุนู ูู ุงูุฑุณุงุฆู ูู ุฌููุน ูุฐู mboxes (ุงูุชู ูุชู ุชูููุฐูุง ุจุณูููุฉ ูู SObjectizer ุ ูุฃู SObjectizer ูู ุชุทุจูู ููุณ ููุท / ูุฃู ุงูุนุฏูุฏ ูู ููุงุฐุฌ ุงูููุซููู ุ ูููู ุฃูุถูุง Pub / Sub ูุฏุนูู ูู ุฎุงุฑุฌ ุงูุตูุฏูู) . </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุฏ ุ ูุจุฏู ูุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">waiter_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">waiter_t</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">context_t</span></span> ctx, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> forks_count ) : so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(ctx) } , m_fork_states( forks_count, <span class="hljs-keyword"><span class="hljs-keyword">fork_state_t</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">free</span></span> ) { <span class="hljs-comment"><span class="hljs-comment">//  mbox-   "" m_fork_mboxes.reserve( forks_count ); for( std::size_t i{}; i != forks_count; ++i ) m_fork_mboxes.push_back( so_environment().create_mbox() ); } ... void so_define_agent() override { //      "". for( std::size_t i{}; i != m_fork_mboxes.size(); ++i ) { //     .   . //          //    . so_subscribe( fork_mbox( i ) ) .event( [i, this]( mhood_t&lt;take_t&gt; cmd ) { on_take_fork( std::move(cmd), i ); } ) .event( [i, this]( mhood_t&lt;put_t&gt; cmd ) { on_put_fork( std::move(cmd), i ); } ); } } private : ... //     "". std::vector&lt; so_5::mbox_t &gt; m_fork_mboxes;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃู  ุฃููุงู ุ ูู ุจุฅูุดุงุก ูุชุฌู ูู mbox-s ูู "ุดูู" ุบูุฑ ููุฌูุฏ ุ ุซู ุงุดุชุฑู ูู ูู ูููุง.  ูุนู ุ ูุญู ูุดุชุฑู ูู ูุนุฑูุฉ ุงูููููุงุช ุงููุญุฏุฏุฉ ุงูุชู ูุชุตู ุจูุง ุงูุทูุจ. </p><br><p style=";text-align:right;direction:rtl">  ุงููุนุงูุฌ ุงูุญูููู ูุทูุจ <code>on_take_fork()</code> ุงููุงุฑุฏ ูู ุงูุฃุณููุจ <code>on_take_fork()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_take_fork</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mhood_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">take_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; cmd, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fork_index )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   ,       //    . if( fork_index == cmd-&gt;m_philosopher_index ) handle_take_left_fork( std::move(cmd), fork_index ); else handle_take_right_fork( std::move(cmd), fork_index ); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูููุงุณุจุฉ ุ ููุง ููุง ูุญุชุงุฌ ุฅูู ุงูุญูู ุงูุซุงูู ูู ุฑุณุงูุฉ <code>take_t</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูู <code>on_take_fork()</code> ูุฏููุง ุงูุทูุจ ุงูุฃุตูู ูููุฑุณ ุงูุดููุฉ ุงูุฐู ูุชุนูู ุจู ุงูุทูุจ.  ูุฐูู ุ ูููููุง ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงููููุณูู ูุณุฃู ุนู ููุชุฑู ูุณุงุฑู ุฃู ููุตู ุงูุฃููู.  ูุจุงูุชุงูู ุ ูููููุง ูุนุงูุฌุชูุง ุจุดูู ูุฎุชูู (ูุนูููุง ูุนุงูุฌุชูุง ุจุดูู ูุฎุชูู). </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงููููุณูู ูุณุฃู ุฏุงุฆููุง ุนู ุงูุดููุฉ ุงููุณุฑู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจูู ุงููุญูุตุงุช ุงููุงุฒูุฉ ูู ูุฐู ุงููุญุธุฉ ุจุงูุฐุงุช.  ููุฏ ูุฌุฏ ุฃููุณูุง ูู ุฃุญุฏ ุงูููุงูู ุงูุชุงููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุง ุงูุดูููู ูุฌุงููุงู ููููู ุฅุนุทุงุคููุง ูููููุณูู ุงูุฐู ุฃุฑุณู ุงูุทูุจ.  ูู ูุฐู ุงูุญุงูุฉ ุ <code>taken_t</code> ุงููููุณูู ุ <code>taken_t</code> ุนูุงูุฉ ุนูู ุงูุดููุฉ ุงูููุงุณุจุฉ ุนูู ุฃููุง ูุญููุธุฉ ุจุญูุซ ูุง ูููู ูุฃู ุดุฎุต ุขุฎุฑ ุฃุฎุฐูุง. </li><li style=";text-align:right;direction:rtl">  ูุง ูููู ุฅุนุทุงุก ุงูุดูู ุฅูู ุงููููุณูู.  ูุง ููู ููุงุฐุง.  ุฑุจูุง ุงูุจุนุถ ูููู ูุดุบูููู ุงูุขู.  ุฃู ูู ุฎุท ูุงุญุฏ ูู ุฌูุฑุงู ุงููููุณูู.  ุนูู ุฃู ุญุงู ุ ูุถุนูุง ุงููููุณูู ุงูุฐู ุฃุฑุณู ุงูุทูุจ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูุจุนุฏ ุฐูู <code>busy_t</code> ุฅููู. </li></ol><br><p style=";text-align:right;direction:rtl">  ุจูุถู ููุทู ุงูุนูู ูุฐุง ุ ูููู ูููููุณูู ุงูุฐู ุญุตู ุนูู <code>taken_t</code> ุงููุณุฑู ุฃู ูุฑุณู ุจุฃูุงู ุทูุจ <code>take_t</code> ุงููููู.  ุณูุชู ุชูุจูุฉ ูุฐุง ุงูุทูุจ ููุฑูุง  ุงูุดููุฉ ูุญุฌูุฒ ุจุงููุนู ููุฐุง ุงููููุณูู. </p><br><h3 id="rezultaty-2" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจุชุดุบูู ุงูุญู ุงููุงุชุฌ ุ ููููู ุฑุคูุฉ ุดูุก ูุซู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Socrates: tttttttttttL....EEEEEEEEEEEEEEttttttttttL...L...EEEEEEEEEEEEEtttttL. Plato: tttttttttttL....L..L..L...L...EEEEEEEEEEEEEtttttL.....L....L.....EEE Aristotle: tttttttttL.....EEEEEEEEEttttttttttL.....L.....EEEEEEEEEEEtttL....LL Descartes: ttEEEEEEEEEEtttttttL.L..EEEEEEEEEEEEtttL..L....L....L.....EEEEEEEEEE Spinoza: tttttttttL.....EEEEEEEEEttttttttttL.....L.....EEEEEEEEEEEtttL....LL Kant: ttEEEEEEEEEEEEEtttttttL...L.....L.....EEEEEttttL....L...L..L...EEEEE Schopenhauer: ttttL...L.....L.EEEEEEEEEEEEEEEEEtttttttttttL..L...L..EEEEEEEttttttt Nietzsche: tttttttttttL....L..L..L...L...L.....L....EEEEEEEEEEEEttL.....L...L.. Wittgenstein: tttttttttL....L...L....L....L...EEEEEEEttttL......L.....L.....EEEEEE Heidegger: ttttttL..L...L.....EEEEEEEEEEEEtttttL...L..L.....EEEEEEEEEEEttttttL. Sartre: ttEEEEEEEEEEEEEttttttttL.....L...EEEEEEEEEEEEttttttttttttL.....EEEEE</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุงูุงูุชุจุงู ุฅูู ุนุฏู ูุฌูุฏ ุดุฎุตูุงุช <code>R</code>  ูุฐูู ูุฃู ุงูุฅุฎูุงูุงุช ุฃู ุงูุชููุนุงุช ูุง ูููู ุฃู ุชุญุฏุซ ุจูุงุก ุนูู ุทูุจ ุดููุฉ ููุงุณุจ. </p><br><h2 id="esche-odno-reshenie-s-ispolzovaniem-arbitra-oficianta" style=";text-align:right;direction:rtl">  ูุฑุงุฑ ุขุฎุฑ ุจุงุณุชุฎุฏุงู ูุญูู (ุงููุงุฏู) </h2><br><p style=";text-align:right;direction:rtl">  ูู ุจุนุถ ุงูุญุงูุงุช ุ ูุฏ ูุนุฑุถ ุญู waiter_with_queue ุงูุณุงุจู ูุชุงุฆุฌ ูุดุงุจูุฉ ููุฐุง ูุงุญุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Socrates: tttttEEEEEEEEEEEEEEtttL.....LL...L....EEEEEEEEEttttttttttL....L.....EE Plato: tttttL..L..L....LL...EEEEEEEEEEEEEEEttttttttttttL.....EEEEEEEEEttttttt Aristotle: tttttttttttL..L...L.....L.....L....L.....EEEEEEEEEEEEtttttttttttL....L.. Descartes: ttttttttttEEEEEEEEEEttttttL.....L....L..L.....L.....L..L...L..EEEEEEEEtt Spinoza: tttttttttttL..L...L.....L.....L....L.....L..L..L....EEEEEEEEEEtttttttttt Kant: tttttttttL....L....L...L...L....L..L...EEEEEEEEEEEttttttttttL...L......E Schopenhauer: ttttttL....L..L...L...LL...L...EEEEEtttttL....L...L.....EEEEEEEEEttttt Nietzsche: tttttL..L..L....EEEEEEEEEEEEEttttttttttttEEEEEEEEEEEEEEEttttttttttttL... Wittgenstein: tttEEEEEEEEEEEEtttL....L....L..EEEEEEEEEtttttL..L..L....EEEEEEEEEEEEEEEE Heidegger: tttttttttL...L..EEEEEEEEttttL..L.....L...EEEEEEEEEtttL.L..L...L....L...L Sartre: ttttttttttL..L....L...L.EEEEEEEEEEEtttttL...L..L....EEEEEEEEEEtttttttttt</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุฃู ุชุฑู ูุฌูุฏ ูุชุฑุงุช ุฒูููุฉ ุทูููุฉ ุจูุง ููู ุงูููุงูุฉ ุนูุฏูุง ูุง ูุณุชุทูุน ุงูููุงุณูุฉ ุชูุงูู ุงูุทุนุงู ุนูู ุงูุฑุบู ูู ูุฌูุฏ ุดููุงุช ูุฌุงููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุงูุดููุงู ุงูุฃููู ูุงูุฃูุณุฑ ูู Kant ูุฌุงููุงู ููุชุฑุฉ ุทูููุฉ ุ ููู ูุงูุท ูุง ูุณุชุทูุน ุฃุฎุฐููุง ุ ูุฃู  ุฌูุฑุงูู ููุชุธุฑูู ุจุงููุนู ูู ุงูุทุงุจูุฑ.  ุงูุชู ุชูุชุธุฑ ุฌูุฑุงููู.  ุงูุฐูู ููุชุธุฑูู ุฌูุฑุงููู ุ ุงูุฎ </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุฅู ุชุทุจูู waiter_with_queue ุงูุฐู ูููุด ุฃุนูุงู ูุญูู ูู ุงูุฌูุน ุจูุนูู ุฃู ุงููููุณูู ุณูู ูุฃูู ุนุงุฌูุงู ุฃู ุขุฌูุงู.  ูุฐุง ูุถููู ูู.  ููู ูุชุฑุงุช ุงูุตูุงู ูููู ุฃู ุชููู ุทูููุฉ ุฌุฏุง.  ูุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ูุฏ ูุง ูููู ุงูุฃูุซู ูู ุจุนุถ ุงูุฃุญูุงู. </p><br><p style=";text-align:right;direction:rtl">  ูุญู ูุฐู ุงููุดููุฉ ุ ููุช ุจุชูููุฐ ุญู ุขุฎุฑ ุ waiter_with_timestamp (ูููู ุงูุนุซูุฑ ุนูู ุงูููุฏ <a href="" rel="nofollow">ููุง</a> ).  ุจุฏูุงู ูู ุงูุทุงุจูุฑ ุ ูุถุนูู ุฃููููุงุช ุทูุจุงุช ุงูููุงุณูุฉ ูุน ูุฑุงุนุงุฉ ููุช ุตูุงููู.  ูููุง ุทุงูุช ูุชุฑุฉ ุจูุงุก ุงููููุณูู ุฌุงุฆุนูุง ุ ูููุง ุฒุงุฏุช ุฃููููุฉ ุทูุจู. </p><br><p style=";text-align:right;direction:rtl">  ูู ูููุฑ ูู ุฑูุฒ ูุฐุง ุงูุญู ูุฃู  ุฅูู ุญุฏ ูุจูุฑ ุ ุงูุดูุก ุงูุฑุฆูุณู ูู ุฐูู ูู ููุณ ุงูุฎุฏุนุฉ ูุน ูุฌููุนุฉ ูู ุตูุงุฏูู mbox ูู "ุงูุดูู" ุบูุฑ ุงูููุฌูุฏุฉ ุ ูุงูุชู ูุงูุดูุงูุง ุจุงููุนู ูู ุงููุญุงุฏุซุฉ ุญูู ุชูููุฐ waiter_with_queue. </p><br><h2 id="neskolko-detaley-realizacii-na-kotorye-hotelos-by-obratit-vnimanie" style=";text-align:right;direction:rtl">  ุจุนุถ ุชูุงุตูู ุงูุชูููุฐ ุงูุชู ุฃูุฏ ููุช ุงูุงูุชุจุงู ุฅูููุง </h2><br><p style=";text-align:right;direction:rtl">  ููุงู ุงูุนุฏูุฏ ูู ุงูุชูุงุตูู ูู ุงูุชุทุจููุงุช ุจูุงุกู ุนูู ุงูููุซููู ุงูุฐูู ุฃูุฏ ุงูุงูุชุจุงู ุฅูููู ุ ูุฃูู  ูุฐู ุงูุชูุงุตูู ุชูุถุญ ููุฒุงุช ูุซูุฑุฉ ููุงูุชูุงู ูู SObjectizer. </p><br><h3 id="rabochiy-kontekst-dlya-aktorov" style=";text-align:right;direction:rtl">  ุณูุงู ุงูุนูู ููุฌูุงุช ุงููุงุนูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูู <code>fork_t</code> ุ ุนููุช ุฌููุน ุงูุฌูุงุช ุงููุงุนูุฉ ุงูุฑุฆูุณูุฉ ( <code>fork_t</code> ุ <code>philosopher_t</code> ุ <code>waiter_t</code> ) ุนูู ุณูุงู ุณูุณูุฉ ุนูููุงุช ูุดุชุฑูุฉ ูุงุญุฏุฉ.  ูุฐุง ูุง ูุนูู ุนูู ุงูุฅุทูุงู ุฃูู ูู SObjectizer ุ ุชุนูู ุฌููุน ุงูุฌูุงุช ุงููุงุนูุฉ ุนูู ููุถูุน ูุงุญุฏ ููุท.  ูู SObjectizer ุ ููููู ุฑุจุท ุงูุฌูุงุช ุงููุงุนูุฉ ุจุณูุงูุงุช ูุฎุชููุฉ ุ ูุงูุชู ูููู ุฑุคูุชูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุฑูุฒ <code>run_simulation()</code> ูู ุงูุญู no_waiter_simple. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Run_simulation code from no_waiter_simple</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run_simulation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">environment_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; env, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">names_holder_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; names )</span></span></span><span class="hljs-function"> </span></span>{ env.introduce_coop( [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">coop_t</span></span> &amp; coop ) { coop.make_agent_with_binder&lt; <span class="hljs-keyword"><span class="hljs-keyword">trace_maker_t</span></span> &gt;( so_5::disp::one_thread::create_private_disp( env )-&gt;binder(), names, <span class="hljs-keyword"><span class="hljs-keyword">random_pause_generator_t</span></span>::trace_step() ); coop.make_agent_with_binder&lt; <span class="hljs-keyword"><span class="hljs-keyword">completion_watcher_t</span></span> &gt;( so_5::disp::one_thread::create_private_disp( env )-&gt;binder(), names ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> count = names.size(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt; so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span> * &gt; forks( count, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != count; ++i ) forks[ i ] = coop.make_agent&lt; <span class="hljs-keyword"><span class="hljs-keyword">fork_t</span></span> &gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != count; ++i ) coop.make_agent&lt; <span class="hljs-keyword"><span class="hljs-keyword">philosopher_t</span></span> &gt;( i, forks[ i ]-&gt;so_direct_mbox(), forks[ (i + <span class="hljs-number"><span class="hljs-number">1</span></span>) % count ]-&gt;so_direct_mbox(), default_meals_count ); }); }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงููุธููุฉ ุ <code>completion_watcher_t</code> ุนูุงุตุฑ ุฅุถุงููุฉ ูู ุงูุฃููุงุน <code>trace_maker_t</code> ู <code>trace_maker_t</code> .  ุณูู ูุนูููู ุนูู ุณูุงูุงุช ุงูุนูู ุงููุฑุฏูุฉ.  ููููุงู ุจุฐูู ุ ูุชู <code>one_thread</code> ูู ุงููุฑุณู ูู ููุน <code>one_thread</code> ูุฐู.  ููุง ูุนูู ุฃู ูุฐู ุงูุฌูุงุช ุงููุงุนูุฉ ุณุชุนูู <em>ููุงุฆูุงุช ูุดุทุฉ</em> : ูู โโูููุง ุณูู ููุชูู ุณูุณูุฉ ุงูุนูู ุงูุฎุงุตุฉ ุจู. </p><br><p style=";text-align:right;direction:rtl">  ูููุฑ SObjectizer ูุฌููุนุฉ ูู ุงูุนุฏูุฏ ูู ุงููุฑุณููู ุงููุฎุชูููู ุงูุฐูู ูููู ุงุณุชุฎุฏุงููู ุฎุงุฑุฌ ุงูุตูุฏูู ูุจุงุดุฑุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ูููุทูุฑ ุฅูุดุงุก ูู ุชุทุจููู ุงูุนุฏูุฏ ูู ูุซููุงุช ุงููุฑุณููู ุงูุชู ูุญุชุงุฌูุง ุงููุทูุฑ. </p><br><p style=";text-align:right;direction:rtl">    ,        ,       . ,      <code>fork_t</code>     ,   <code>philosopher_t</code>   . </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> run_simulation  no_waiter_simple_tp</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run_simulation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">environment_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; env, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">names_holder_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; names )</span></span></span><span class="hljs-function"> </span></span>{ env.introduce_coop( [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">coop_t</span></span> &amp; coop ) { coop.make_agent_with_binder&lt; <span class="hljs-keyword"><span class="hljs-keyword">trace_maker_t</span></span> &gt;( so_5::disp::one_thread::create_private_disp( env )-&gt;binder(), names, <span class="hljs-keyword"><span class="hljs-keyword">random_pause_generator_t</span></span>::trace_step() ); coop.make_agent_with_binder&lt; <span class="hljs-keyword"><span class="hljs-keyword">completion_watcher_t</span></span> &gt;( so_5::disp::one_thread::create_private_disp( env )-&gt;binder(), names ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> count = names.size(); <span class="hljs-comment"><span class="hljs-comment">//     thread_pool-. so_5::disp::thread_pool::bind_params_t bind_params; bind_params.fifo( so_5::disp::thread_pool::fifo_t::individual ); std::vector&lt; so_5::agent_t * &gt; forks( count, nullptr ); //     -. auto fork_disp = so_5::disp::thread_pool::create_private_disp( env, 3u //  . ); for( std::size_t i{}; i != count; ++i ) //      . forks[ i ] = coop.make_agent_with_binder&lt; fork_t &gt;( fork_disp-&gt;binder( bind_params ) ); //     -. auto philosopher_disp = so_5::disp::thread_pool::create_private_disp( env, 6u //  . ); for( std::size_t i{}; i != count; ++i ) coop.make_agent_with_binder&lt; philosopher_t &gt;( philosopher_disp-&gt;binder( bind_params ), i, forks[ i ]-&gt;so_direct_mbox(), forks[ (i + 1) % count ]-&gt;so_direct_mbox(), default_meals_count ); }); }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">            <code>fork_t</code>  <code>philosopher_t</code> . </p><br><h3 id="trassirovka-smeny-sostoyaniy-aktorov" style=";text-align:right;direction:rtl">     </h3><br><p style=";text-align:right;direction:rtl">          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Modern dining philosophers</a>    ,     , : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doEat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ eventLog_.startActivity(ActivityType::eat); wait(randBetween(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>)); eventLog_.endActivity(ActivityType::eat);</code> </pre> <br><p style=";text-align:right;direction:rtl">          SObjectizer   .  ,   , .  ุจุณุจุจ ูุงุฐุงุ </p><br><p style=";text-align:right;direction:rtl">   ,   SObjectizer-   :   .       <code>agent_state_listener_t</code> .     ,  SObjectizer        . </p><br><p style=";text-align:right;direction:rtl">        <code>greedy_philosopher_t</code>  <code>philosopher_t</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">philosopher_t</span></span>(...) ... { so_add_destroyable_listener( <span class="hljs-keyword"><span class="hljs-keyword">state_watcher_t</span></span>::make( so_environment(), index ) ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>state_watcher_t</code> โ       . </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> state_watcher_t</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">state_watcher_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_state_listener_t</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">mbox_t</span></span> m_mbox; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> m_index; <span class="hljs-keyword"><span class="hljs-keyword">state_watcher_t</span></span>( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mbox_t</span></span> mbox, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> index ); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">environment_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; env, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_state_listener_unique_ptr_t</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">state_watcher_t</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">trace_maker_t</span></span>::make_mbox(env), index } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">agent_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">state_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; state )</span></span></span><span class="hljs-function"> override</span></span>; };</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">   <code>state_watcher_t</code>    SObjectizer   <code>changed()</code>    .    <code>state_watcher_t::changed</code>      -. </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  state_watcher_t::changed</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">state_watcher_t</span></span>::changed( so_5::<span class="hljs-keyword"><span class="hljs-keyword">agent_t</span></span> &amp;, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">state_t</span></span> &amp; state ) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> detect_label = []( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp; name ) {...}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> state_label = detect_label( state.query_name() ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-string"><span class="hljs-string">'?'</span></span> == state_label ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; so_5::send&lt; trace::<span class="hljs-keyword"><span class="hljs-keyword">state_changed_t</span></span> &gt;( m_mbox, m_index, state_label ); }</code> </pre> </div></div><br><h1 id="resheniya-na-baze-csp" style=";text-align:right;direction:rtl">    CSP </h1><br><p style=";text-align:right;direction:rtl">     ,     .       (no_waiter_dijkstra, no_waiter_simple, waiter_with_timestamps)     <code>std::thread</code>  SObjectizer- mchain- (,  ,  CSP- ). ,  ,  CSP-        (   <code>take_t</code> , <code>taken_t</code> , <code>busy_t</code> , <code>put_t</code> ). </p><br><p style=";text-align:right;direction:rtl">  CSP-  ""   .   ,         <code>std::thread</code> . </p><br><h2 id="reshenie-deykstry-1" style=";text-align:right;direction:rtl">   </h2><br><p style=";text-align:right;direction:rtl">       <a href="" rel="nofollow"></a> . </p><br><h3 id="nit-dlya-vilki" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">         :       +    <code>take_t</code>  <code>put_t</code> .    <code>fork_process</code>  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fork_process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mchain_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fork_ch )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  :   . bool taken = false; //   . std::queue&lt; so_5::mbox_t &gt; wait_queue; //        . so_5::receive( so_5::from( fork_ch ), [&amp;]( so_5::mhood_t&lt;take_t&gt; cmd ) { if( taken ) //  ,     . wait_queue.push( cmd-&gt;m_who ); else { //    . taken = true; so_5::send&lt; taken_t &gt;( cmd-&gt;m_who ); } }, [&amp;]( so_5::mhood_t&lt;put_t&gt; ) { if( wait_queue.empty() ) taken = false; //     . else { //       . const auto who = wait_queue.front(); wait_queue.pop(); so_5::send&lt; taken_t &gt;( who ); } } ); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>fork_process</code>   :  ,   -   . </p><br><p style=";text-align:right;direction:rtl">    <code>fork_process</code> โ  ""       ,     .        <code>receive()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">so_5::receive( so_5::from( fork_ch ), [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span>&gt; cmd ) {...}, [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">put_t</span></span>&gt; ) {...} );</code> </pre> <br><p style=";text-align:right;direction:rtl">  SObjectizer-     <code>receive()</code>       .           .      .   ,      .   ,    . </p><br><p style=";text-align:right;direction:rtl">      -.           <code>fork_t</code>     . ,  ,  . </p><br><h3 id="nit-dlya-filosofa" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">       <code>philosopher_process</code> .      ,        . </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  philosopher_process</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">oid </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">philosopher_process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">trace_maker_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; tracer, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mchain_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> control_ch, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> philosopher_index, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mbox_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left_fork, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mbox_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right_fork, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> meals_count )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> meals_eaten{ <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">random_pause_generator_t</span></span> pause_generator; <span class="hljs-comment"><span class="hljs-comment">//         . auto self_ch = so_5::create_mchain( control_ch-&gt;environment() ); while( meals_eaten &lt; meals_count ) { tracer.thinking_started( philosopher_index, thinking_type_t::normal ); //    . std::this_thread::sleep_for( pause_generator.think_pause( thinking_type_t::normal ) ); //    . tracer.take_left_attempt( philosopher_index ); so_5::send&lt; take_t &gt;( left_fork, self_ch-&gt;as_mbox(), philosopher_index ); //  ,  . so_5::receive( so_5::from( self_ch ).handle_n( 1u ), [&amp;]( so_5::mhood_t&lt;taken_t&gt; ) { //   ,   . tracer.take_right_attempt( philosopher_index ); so_5::send&lt; take_t &gt;( right_fork, self_ch-&gt;as_mbox(), philosopher_index ); //  ,  . so_5::receive( so_5::from( self_ch ).handle_n( 1u ), [&amp;]( so_5::mhood_t&lt;taken_t&gt; ) { //    .  . tracer.eating_started( philosopher_index ); //     . std::this_thread::sleep_for( pause_generator.eat_pause() ); //     . ++meals_eaten; //     . so_5::send&lt; put_t &gt;( right_fork ); } ); //     . so_5::send&lt; put_t &gt;( left_fork ); } ); } //   ,   . tracer.philosopher_done( philosopher_index ); so_5::send&lt; philosopher_done_t &gt;( control_ch, philosopher_index ); }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">philosopher_process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">trace_maker_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; tracer, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mchain_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> control_ch, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> philosopher_index, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mbox_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left_fork, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mbox_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right_fork, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> meals_count )</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">         . </p><br><p style=";text-align:right;direction:rtl">     SObjectizer- ,             ,       Actor-.         : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">tracer.thinking_started( philosopher_index, <span class="hljs-keyword"><span class="hljs-keyword">thinking_type_t</span></span>::normal );</code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>tracer</code>      ,     . </p><br><p style=";text-align:right;direction:rtl">  <code>control_ch</code>  ,       <code>philosopher_done_t</code>  ,    ,   .            . </p><br><p style=";text-align:right;direction:rtl">  <code>left_fork</code>  <code>right_fork</code>      .        <code>take_t</code>  <code>put_t</code> .    ,     <code>mbox_t</code>  <code>mchain_t</code> ? </p><br><p style=";text-align:right;direction:rtl">   !       ,    .    ,  mchain โ  -   mbox-,    mchain-     <code>mbox_t</code> . </p><br><p style=";text-align:right;direction:rtl">    ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> meals_eaten{ <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">random_pause_generator_t</span></span> pause_generator; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> self_ch = so_5::create_mchain( control_ch-&gt;environment() );</code> </pre> <br><p style=";text-align:right;direction:rtl">     โ  <code>self_ch</code> .    ,         . </p><br><p style=";text-align:right;direction:rtl">           .  ุฃู       ,     . </p><br><p style=";text-align:right;direction:rtl">  ,        ,       <code>this_thread::sleep_for</code>   . </p><br><p style=";text-align:right;direction:rtl">       ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">so_5::send&lt; <span class="hljs-keyword"><span class="hljs-keyword">take_t</span></span> &gt;( left_fork, self_ch-&gt;as_mbox(), philosopher_index );</code> </pre> <br><p style=";text-align:right;direction:rtl">       <code>take_t</code> .       <code>mbox_t</code> ,   <code>self_ch</code>   <code>mchain_t</code> .              <code>as_mbox()</code> . </p><br><p style=";text-align:right;direction:rtl">     <code>receive()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">so_5::receive( so_5::from( self_ch ).handle_n( <span class="hljs-number"><span class="hljs-number">1u</span></span> ), [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span>&gt; ) {...} );</code> </pre> <br><p style=";text-align:right;direction:rtl">         <code>taken_t</code>    .      .  ,         . </p><br><p style=";text-align:right;direction:rtl">  -   ,       <code>philosopher_process</code> .        <code>receive()</code>      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">so_5::receive( so_5::from( self_ch ).handle_n( <span class="hljs-number"><span class="hljs-number">1u</span></span> ), [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span>&gt; ) { ... so_5::receive( so_5::from( self_ch ).handle_n( <span class="hljs-number"><span class="hljs-number">1u</span></span> ), [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span>&gt; ) {...} ); ... } );</code> </pre> <br><p style=";text-align:right;direction:rtl">           -  . </p><br><h3 id="funkciya-zapuska-simulyacii" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">             <code>run_simulation()</code> ,         .      CSP-  <code>run_simulation()</code>   .     ,       ,       (      ). </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">   run_simulation</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run_simulation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">environment_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; env, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">names_holder_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; names )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">noexcept</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> table_size = names.size(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> join_all = []( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread&gt; &amp; threads ) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; t : threads ) t.join(); }; <span class="hljs-keyword"><span class="hljs-keyword">trace_maker_t</span></span> tracer{ env, names, <span class="hljs-keyword"><span class="hljs-keyword">random_pause_generator_t</span></span>::trace_step() }; <span class="hljs-comment"><span class="hljs-comment">//  . std::vector&lt; so_5::mchain_t &gt; fork_chains; std::vector&lt; std::thread &gt; fork_threads( table_size ); for( std::size_t i{}; i != table_size; ++i ) { //     . fork_chains.emplace_back( so_5::create_mchain(env) ); //     . fork_threads[ i ] = std::thread{ fork_process, fork_chains.back() }; } //      . auto control_ch = so_5::create_mchain( env ); //  . const auto philosopher_maker = [&amp;](auto index, auto left_fork_idx, auto right_fork_idx) { return std::thread{ philosopher_process, std::ref(tracer), control_ch, index, fork_chains[ left_fork_idx ]-&gt;as_mbox(), fork_chains[ right_fork_idx ]-&gt;as_mbox(), default_meals_count }; }; std::vector&lt; std::thread &gt; philosopher_threads( table_size ); for( std::size_t i{}; i != table_size - 1u; ++i ) { //      . philosopher_threads[ i ] = philosopher_maker( i, i, i+1u ); } //        . philosopher_threads[ table_size - 1u ] = philosopher_maker( table_size - 1u, table_size - 1u, 0u ); //     . so_5::receive( so_5::from( control_ch ).handle_n( table_size ), [&amp;names]( so_5::mhood_t&lt;philosopher_done_t&gt; cmd ) { fmt::print( "{}: done\n", names[ cmd-&gt;m_philosopher_index ] ); } ); //     . join_all( philosopher_threads ); //     . for( auto &amp; ch : fork_chains ) so_5::close_drop_content( ch ); //       . join_all( fork_threads ); //  . tracer.done(); //   SObjectizer. env.stop(); }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ,    <code>run_simulation()</code>   - .      . </p><br><p style=";text-align:right;direction:rtl">      .        : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt; so_5::<span class="hljs-keyword"><span class="hljs-keyword">mchain_t</span></span> &gt; fork_chains; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread &gt; fork_threads( table_size ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != table_size; ++i ) { fork_chains.emplace_back( so_5::create_mchain(env) ); fork_threads[ i ] = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread{ fork_process, fork_chains.back() }; }</code> </pre> <br><p style=";text-align:right;direction:rtl">       ,   ,    .         .      ,    <code>join</code>  . </p><br><p style=";text-align:right;direction:rtl">                , ..      <code>join</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread &gt; philosopher_threads( table_size ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != table_size - <span class="hljs-number"><span class="hljs-number">1u</span></span>; ++i ) { philosopher_threads[ i ] = philosopher_maker( i, i, i+<span class="hljs-number"><span class="hljs-number">1u</span></span> ); } philosopher_threads[ table_size - <span class="hljs-number"><span class="hljs-number">1u</span></span> ] = philosopher_maker( table_size - <span class="hljs-number"><span class="hljs-number">1u</span></span>, table_size - <span class="hljs-number"><span class="hljs-number">1u</span></span>, <span class="hljs-number"><span class="hljs-number">0u</span></span> );</code> </pre> <br><p style=";text-align:right;direction:rtl">          .        : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">so_5::receive( so_5::from( control_ch ).handle_n( table_size ), [&amp;names]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">philosopher_done_t</span></span>&gt; cmd ) { fmt::print( <span class="hljs-string"><span class="hljs-string">"{}: done\n"</span></span>, names[ cmd-&gt;m_philosopher_index ] ); } );</code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>receive()</code>      <code>table_size</code>   <code>philosopher_done_t</code> . </p><br><p style=";text-align:right;direction:rtl">      <code>philosopher_done_t</code>    . </p><br><p style=";text-align:right;direction:rtl">  <code>join</code>     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">join_all( philosopher_threads );</code> </pre> <br><p style=";text-align:right;direction:rtl">     <code>join</code>    .    <code>join</code> , ..    .        <code>receive()</code>     .              <code>join</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; ch : fork_chains ) so_5::close_drop_content( ch ); join_all( fork_threads );</code> </pre> <br><p style=";text-align:right;direction:rtl">          . </p><br><h4 id="neskolko-slov-o-noexcept" style=";text-align:right;direction:rtl">    noexcept </h4><br><p style=";text-align:right;direction:rtl"> ,   <code>run_simulation</code>        ,      <em>noexcept</em> .   ,    exception-safety     .            โ     . </p><br><p style=";text-align:right;direction:rtl">   <code>run_simulation</code>       ? </p><br><p style=";text-align:right;direction:rtl">  ,                .    - exception-safety      ,    .  -  ,            : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != table_size; ++i ) { fork_chains.emplace_back( so_5::create_mchain(env) ); fork_threads[ i ] = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread{ fork_process, fork_chains.back() }; } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>( ... ) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != fork_chains.size(); ++i ) { so_5::close_drop_content( fork_chains[ i ] ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( fork_threads[ i ].joinable() ) fork_threads[ i ].join(); } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,     .  ุจุณุจุจ         ,       .    -   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fork_threads_stuff_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt; so_5::<span class="hljs-keyword"><span class="hljs-keyword">mchain_t</span></span> &gt; m_fork_chains; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread &gt; m_fork_threads; <span class="hljs-keyword"><span class="hljs-keyword">fork_threads_stuff_t</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> table_size ) : m_fork_threads( table_size ) {} ~<span class="hljs-keyword"><span class="hljs-keyword">fork_threads_stuff_t</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != m_fork_chains.size(); ++i ) { so_5::close_drop_content( m_fork_chains[ i ] ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( m_fork_threads[ i ].joinable() ) m_fork_threads[ i ].join(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i{}; i != m_fork_threads.size(); ++i ) { m_fork_chains.emplace_back( so_5::create_mchain(env) ); m_fork_threads[ i ] = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread{ fork_process, m_fork_chains.back() }; } } } fork_threads_stuff{ table_size }; <span class="hljs-comment"><span class="hljs-comment">//   . fork_threads_stuff.run(); //     . //       fork_threads_stuff.</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">     ,           (, Boost- ScopeExit-, GSL- finally()   ). </p><br><p style=";text-align:right;direction:rtl">         .       . </p><br><p style=";text-align:right;direction:rtl"> ,        exception-safety  <code>run_simulation()</code> ,   <code>run_simulation()</code>   ,    .      ,          -.       exception-safety  <code>run_simulation()</code>     <em>noexcept</em> ,     <code>std::terminate</code>    . ,          . </p><br><p style=";text-align:right;direction:rtl">   ,   ,       ,       ,   .    ,     <code>join</code> ,            <code>join</code> .         . </p><br><h2 id="prostoe-reshenie-bez-ispolzovaniya-arbitra-oficianta" style=";text-align:right;direction:rtl">      () </h2><br><p style=";text-align:right;direction:rtl">    ,   CSP-          ,   . </p><br><p style=";text-align:right;direction:rtl">       <a href="" rel="nofollow"></a> . </p><br><h3 id="nit-dlya-vilki-1" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">      <code>fork_process</code> ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fork_process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mchain_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fork_ch )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  :   . bool taken = false; //      . so_5::receive( so_5::from( fork_ch ), [&amp;]( so_5::mhood_t&lt;take_t&gt; cmd ) { if( taken ) so_5::send&lt; busy_t &gt;( cmd-&gt;m_who ); else { taken = true; so_5::send&lt; taken_t &gt;( cmd-&gt;m_who ); } }, [&amp;]( so_5::mhood_t&lt;put_t&gt; ) { if( taken ) taken = false; } ); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ,   <code>fork_process</code> ,      (      ,      ). </p><br><h3 id="nit-dlya-filosofa-1" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">      <code>philosopher_process</code> ,    ,      . </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  philosopher_process</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">philosopher_process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">trace_maker_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; tracer, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mchain_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> control_ch, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> philosopher_index, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mbox_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left_fork, so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mbox_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right_fork, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> meals_count )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> meals_eaten{ <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-comment"><span class="hljs-comment">//       . thinking_type_t thinking_type{ thinking_type_t::normal }; random_pause_generator_t pause_generator; //      . auto self_ch = so_5::create_mchain( control_ch-&gt;environment() ); while( meals_eaten &lt; meals_count ) { tracer.thinking_started( philosopher_index, thinking_type ); //    . std::this_thread::sleep_for( pause_generator.think_pause( thinking_type ) ); //  ,     . thinking_type = thinking_type_t::hungry; //    . tracer.take_left_attempt( philosopher_index ); so_5::send&lt; take_t &gt;( left_fork, self_ch-&gt;as_mbox(), philosopher_index ); //  ,  . so_5::receive( so_5::from( self_ch ).handle_n( 1u ), []( so_5::mhood_t&lt;busy_t&gt; ) { /*     */ }, [&amp;]( so_5::mhood_t&lt;taken_t&gt; ) { //   ,   . tracer.take_right_attempt( philosopher_index ); so_5::send&lt; take_t &gt;( right_fork, self_ch-&gt;as_mbox(), philosopher_index ); //  ,  . so_5::receive( so_5::from( self_ch ).handle_n( 1u ), []( so_5::mhood_t&lt;busy_t&gt; ) { /*     */ }, [&amp;]( so_5::mhood_t&lt;taken_t&gt; ) { //    ,  . tracer.eating_started( philosopher_index ); //     . std::this_thread::sleep_for( pause_generator.eat_pause() ); //     . ++meals_eaten; //      . so_5::send&lt; put_t &gt;( right_fork ); //        "normal". thinking_type = thinking_type_t::normal; } ); //       . so_5::send&lt; put_t &gt;( left_fork ); } ); } //    . tracer.philosopher_done( philosopher_index ); so_5::send&lt; philosopher_done_t &gt;( control_ch, philosopher_index ); }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  -  <code>philosopher_process</code>     <code>philosopher_process</code>   .     . </p><br><p style=";text-align:right;direction:rtl"> -,   <code>thinking_type</code> .    ,      ,     ,      "" . </p><br><p style=";text-align:right;direction:rtl"> -,     <code>busy_t</code> .       <code>receive()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">so_5::receive( so_5::from( self_ch ).handle_n( <span class="hljs-number"><span class="hljs-number">1u</span></span> ), []( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">busy_t</span></span>&gt; ) { <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> }, [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span>&gt; ) { ... so_5::receive( so_5::from( self_ch ).handle_n( <span class="hljs-number"><span class="hljs-number">1u</span></span> ), []( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">busy_t</span></span>&gt; ) { <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> }, [&amp;]( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mhood_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">taken_t</span></span>&gt; ) {...} );</code> </pre> <br><p style=";text-align:right;direction:rtl"> ,   <code>busy_t</code> ,   ,           <code>receive()</code> ,       <code>receive()</code> .    <code>busy_t</code>    .      , ..    <code>receive()</code>   <code>busy_t</code>  .     <code>receive()</code>        <code>busy_t</code> . </p><br><h2 id="reshenie-s-oficiantom-i-vremennymi-otmetkami" style=";text-align:right;direction:rtl">       </h2><br><p style=";text-align:right;direction:rtl">   CSP-     ,       .            ():    waiter_with_queue,      ,      waiter_with_timestamps.         :    mbox-   ,  mbox-  ,    mbox-  . </p><br><p style=";text-align:right;direction:rtl">      CSP-  ,        <code>philosopher_process</code>   no_waiter_simple.       mchain-           ,  ? </p><br><p style=";text-align:right;direction:rtl">  , . </p><br><p style=";text-align:right;direction:rtl">   mchain-  .   ,       mchain-. </p><br><p style=";text-align:right;direction:rtl">  SObjectizer-   <code>select()</code> ,    , ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">so_5::select( so_5::from_all(), case_(ch1, one_handler_1, one_handler_2, one_handler_3, ...), case_(ch2, two_handler_1, two_handler_2, two_handler_3, ...), ...);</code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>select()</code> ,            -.       " "        .   CSP-           . </p><br><p style=";text-align:right;direction:rtl">     . </p><br><p style=";text-align:right;direction:rtl"> ,   ,     <code>take_t</code>  <code>put_t</code>      .     -   .         <code>take_t</code>  <code>put_t</code> ,       : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extended_take_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">message_t</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">mbox_t</span></span> m_who; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> m_philosopher_index; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> m_fork_index; <span class="hljs-keyword"><span class="hljs-keyword">extended_take_t</span></span>( so_5::<span class="hljs-keyword"><span class="hljs-keyword">mbox_t</span></span> who, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> philosopher_index, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> fork_index ) : m_who{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(who) } , m_philosopher_index{ philosopher_index } , m_fork_index{ fork_index } {} }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extended_put_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::<span class="hljs-keyword"><span class="hljs-keyword">message_t</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> m_fork_index; <span class="hljs-keyword"><span class="hljs-keyword">extended_put_t</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> fork_index ) : m_fork_index{ fork_index } {} };</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ,       <code>so_5::message_t</code> ,         (     ).         ,      SObjectizer- . </blockquote><p style=";text-align:right;direction:rtl">    ,         .       <code>take_t</code>  <code>put_t</code> ,    <code>extended_take_t</code>  <code>extended_put_t</code> ,    . </p><br><p style=";text-align:right;direction:rtl">      mbox.   :) </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  mbox-</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrapping_mbox_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> so_5::extra::mboxes::proxy::<span class="hljs-keyword"><span class="hljs-keyword">simple_t</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">base_type_t</span></span> = so_5::extra::mboxes::proxy::<span class="hljs-keyword"><span class="hljs-keyword">simple_t</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    . const so_5::mbox_t m_target; //  ,      . const std::size_t m_fork_index; //    . static std::type_index original_take_type; static std::type_index original_put_type; public : wrapping_mbox_t( const so_5::mbox_t &amp; target, std::size_t fork_index ) : base_type_t{ target } , m_target{ target } , m_fork_index{ fork_index } {} //    so_5::abstract_message_box_t   . //       . void do_deliver_message( const std::type_index &amp; msg_type, const so_5::message_ref_t &amp; message, unsigned int overlimit_reaction_deep ) const override { if( original_take_type == msg_type ) { //     . const auto &amp; original_msg = so_5::message_payload_type&lt;::take_t&gt;:: payload_reference( *message ); //     . so_5::send&lt; extended_take_t &gt;( m_target, original_msg.m_who, original_msg.m_philosopher_index, m_fork_index ); } else if( original_put_type == msg_type ) { //     . so_5::send&lt; extended_put_t &gt;( m_target, m_fork_index ); } else base_type_t::do_deliver_message( msg_type, message, overlimit_reaction_deep ); } //       wrapping_mbox_t. static auto make( const so_5::mbox_t &amp; target, std::size_t fork_index ) { return so_5::mbox_t{ new wrapping_mbox_t{ target, fork_index } }; } }; std::type_index wrapping_mbox_t::original_take_type{ typeid(::take_t) }; std::type_index wrapping_mbox_t::original_put_type{ typeid(::put_t) };</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">        mbox-:    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">so_5_extra</a>  ,        .           <code>so_5::abstract_message_box_t</code>      . </p><br><p style=";text-align:right;direction:rtl">     ,    <code>wrapping_mbox_t</code> .          ,       .      wrapping_mbox,          mchain .   <code>waiter_process</code> ,      ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">waiter_process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( so_5::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">mchain_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> waiter_ch, details::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">waiter_logic_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; logic )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        . so_5::receive( so_5::from( waiter_ch ), [&amp;]( so_5::mhood_t&lt;details::extended_take_t&gt; cmd ) { logic.on_take_fork( std::move(cmd) ); }, [&amp;]( so_5::mhood_t&lt;details::extended_put_t&gt; cmd ) { logic.on_put_fork( std::move(cmd) ); } ); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ,               ,      .      waiter_with_timestamps <a href="" rel="nofollow"></a> . </p><br><p style=";text-align:right;direction:rtl">       : "      <code>philosopher_process</code>  mbox-?"  ,    waiter_with_timestamps    mbox,   mchain. </p><br><p style=";text-align:right;direction:rtl">  ,       mchain.       , ..  so_5_extra        mchain- (    ).          mbox-  mchain-. </p><br><h1 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงูุฎุงุชูุฉ </h1><br><p style=";text-align:right;direction:rtl"> , ,  ,          CSP .       ,     .   ,  ,     . ,  -   . </p><br><p style=";text-align:right;direction:rtl">     ,   SObjectizer-.    ,         ""  SObjectizer โ  5.6,     5.5.        ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a> ). -   ,    SO-5.6   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a> (      ). </p><br><p style=";text-align:right;direction:rtl">     ,          ! </p><br><p style=";text-align:right;direction:rtl">  PS.  ""      ,       .        C++14. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar437998/">https://habr.com/ru/post/ar437998/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar437988/index.html">ุฑุฏ ูุนู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ุงูุฌุฒุก 12: ูุฑุดุฉ ุนูู ุ ุงููุฑุญูุฉ 3 ุชุทุจูู TODO</a></li>
<li><a href="../ar437990/index.html">ุฑุฏ ูุนู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงูุฌุฒุก 13: ููููุงุช ุงูุทุจูุฉ ุงููุงุฆูุฉ</a></li>
<li><a href="../ar437992/index.html">ุฎุฏูุงุช Microservices. ุงูุฅุตุฏุงุฑุงุช ูู ุงูุชูุงูู ุงููุณุชูุฑ ูุฃูุธูุฉ ุงููุดุฑ ุฏุฑุงุณุฉ ุญุงูุฉ CI / CD ุจุงุณุชุฎุฏุงู TFS</a></li>
<li><a href="../ar437994/index.html">ุงูุญูุจ ุงูุณูุงุฑุงุช ูุงูุฏููุฆุงุช ุงูุชููุงุฆู: ููู ุชุนูู ูุฒุฑุนุฉ ุตุบูุฑุฉ ุงูุชูููููุฌูุง ุงููุงุฆูุฉ</a></li>
<li><a href="../ar437996/index.html">SITIS CTF: ููู ุณุงุนุฏ ุฎุชู CTF ุนูู ุงูููุฒ</a></li>
<li><a href="../ar438000/index.html">ุงููุฌุงุญ ูุงููุดู ูู ุฅูุดุงุก ูุดุฑูุนู (ุจุฏุก ุงูุชุดุบูู)</a></li>
<li><a href="../ar438002/index.html">ุชูููู ูููู ุงูุนูุณู ู Nextcloud ู ONLYOFFICE</a></li>
<li><a href="../ar438004/index.html">Apple ุฃู Soul Electronics: ุงูุชุญุฏูุงุช ูุงูููุงุฏุฉ ูุณูุงุนุงุช ุงูููุงูุฉ ุงููุงุณูููุฉ</a></li>
<li><a href="../ar438006/index.html">ุงูุฃุนูุงู ุงูุตุบูุฑุฉ CRM: ุฃุณุฑุงุฑ ุงูุชูููุฐ ุงููุงุฌุญ</a></li>
<li><a href="../ar438008/index.html">ุชูููู Zyxel ูููุนุฏุงุช ุงูุฐููุฉ ูู ุฃูุถุงุน ูุณุชููุฉ ูุณุญุงุจุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>