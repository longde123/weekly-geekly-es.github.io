<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👸🏼 👩‍🎨 🏂🏾 50个阴影的树桩*。 开关电源中的微控制器。 第三部分 👴🏻 🖌️ ↙️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="NAP *-核心独立外围设备 
 以前有关核心独立外围设备的文章 

 开关电源中的微控制器。 第一部分 
 开关电源中的微控制器。 第二部分 
 Microchip微控制器对PWM编码信号的硬件接收 
 ADC和具有Microchip微控制器计算机的ADC 
 Microchip单片机的I / O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>50个阴影的树桩*。 开关电源中的微控制器。 第三部分</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/406473/"><p>  NAP *-核心独立外围设备 </p><br><div class="spoiler">  <b class="spoiler_title">以前有关核心独立外围设备的文章</b> <div class="spoiler_text"><p> 开关电源中的微控制器。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第一部分</a> <br> 开关电源中的微控制器。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第二部分</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microchip微控制器对PWM编码信号的硬件接收</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ADC和具有Microchip微控制器计算机的ADC</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microchip单片机的I / O端口</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PIC单片机中的可配置逻辑单元</a> </p></div></div><br><h1> 开关电源中的微控制器 <br> 第三部分 </h1><br><img src="https://habrastorage.org/web/616/33f/b1e/61633fb1e69b4f7fbb668413022cf1ac.png"><br><p> 在之前的部分（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1部分</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2部分</a> ）中，讨论了Microchip微控制器的外围独立性如何通过建立不同外围模块之间的连接来构建从“砖”切换电源的PWM控制器。 如果我们向上述PWM控制器添加新的“砖块”，我们将获得新功能。 考虑还可以做些什么。 </p><a name="habracut"></a><br><h2> 功能自动化 </h2><br><h3> 动力单元保护 </h3><br><p> 电力电子学中的一个重要问题是提供保护功能。 如果反馈中断，则可能会出现电源开关断开无效时间的情况。 </p><br><p> 具有独立于内核的外设（CIP）的PIC单片机具有带限制功能的计时器（硬件限制计时器，HLT）。 </p><br><p> 考虑一个具有自动保护功能（限制输出脉冲的宽度和自动断电的可能性）的PWM控制器的实现示例。 </p><br><img src="https://habrastorage.org/web/55a/830/b3a/55a830b3a76741f78c2cead9ba8aa961.png"><br><p> 图  3.1。  PWM控制器 </p><br><p> 定时器HLT1-设置MOSFET断开状态的时间限制；定时器HLT2-设置Toff截止状态的时间。 </p><br><p>  COG-互补输出发生器-产生MOSFET控制信号。 </p><br><p> 算法（微控制器外围设备的初始化）： </p><br><ul><li>  HLT2计时器启动包含COG（即功率MOSFET）的操作，并使HLT1处于翘起状态。 通过电感和电压的电流增加。 当电压与Vref一致时，触发比较器。 </li><li> 在正常模式下，比较器重置COG，同时重置COG，同时重置HLT2（Toff）。 </li><li> 切换电源开关时，比较器信号会消隐一段时间，从而防止可能由于干扰而产生虚假警报（在图3.1中，为了使比较器清晰可见，设置了消隐信号，实际上，消隐功能是COG模块的功能，而并非接收来自比较器的信号）。 <br> 图3.2说明了这种PWM控制器的操作。 </li></ul><br><img src="https://habrastorage.org/web/4ce/5f7/1d6/4ce5f71d664544adb7fedbfcc60531d4.png"><br><p> 图3.2。 电压图说明了PWM控制器的操作（图3.1）。 </p><br><p> 如果比较器在安全时间Tzt。内不工作，则限制计时器HLT1将重置COG并限制电源开关的打开时间。 键的打开时间较长可能意味着打开反馈，功率晶体管或电感故障。 </p><br><p>  COG模块具有阻止操作的功能，在这种情况下，程序可以将其解锁。 这可用于诊断-如果HLT1不断触发，则程序可以关闭PWM控制器并发出故障信号。 </p><br><h3> 软启动 </h3><br><p> 如果在PWM周期内能量仍然留在电感中，则在几个周期内可能导致其饱和。 同时，在电源启动时，输出电压为零，电压反馈尚不起作用。 即 为使功率电感饱和创造了条件。 </p><br><p> 电压控制的软启动可以通过增加电感或通过在占空比进一步增加时在启动时形成低占空比来实现。 <br> 电流控制中的软启动可以通过在启动电源时限制反馈环路的电流来实现。 </p><br><p> 示例：具有最大电流限制的软启动。  DAC和比较器C2限制了最小峰值电流； DAC电压以编程方式缓慢增加。 当Vout达到正常值时，C1比较器开始工作，通过中断，您可以从中断开软启动电路和电流限制（DAC + Comp2）。 </p><br><img src="https://habrastorage.org/web/1a3/3d1/b6a/1a33d1b6ae744dd6ab933f13de70f27d.png"><br><p> 图3.3。 具有软启动功能的PWM控制器。 </p><br><h3> 电涌保护 </h3><br><p> 当输出电压增加到过电压阈值以上时，添加一个C2比较器来分析输出电压将有助于关闭COG模块（防止负载开路，见图3.4）。 </p><br><table><thead><tr><th> 控制器无保护 </th><th> 输出过压控制器 </th></tr></thead><tbody><tr><td><img src="https://habrastorage.org/web/62c/f71/c2e/62cf71c2ed394950bb6b18068e0f69d8.png" width="400"></td><td><img src="https://habrastorage.org/web/739/83b/c98/73983bc987084f0c9a4b9b4e6942065d.png" width="400"></td></tr></tbody></table><br><p> 图3.4 <br> 同样，可以组织防止温度过高等的保护措施。 </p><br><h3> 最大占空比限制 </h3><br><p> 以前，在带电压控制的PWM控制器中考虑过这种功能的实现，有关实现选项，请参见图3.1。 </p><br><p> 在正常模式下具有电流控制的控制器中，输出PWM由输入PWM（参考）的前部触发，并从反馈信号-电流比较器中复位。 为了限制输出脉冲的占空比，对于已开发的IPS拓扑，可以使用参考PWM，将其占空比选择为最大值。 然后，在参考PWM下降时，可以强制复位COG模块（见图3.5）。 </p><br><img src="https://habrastorage.org/web/dee/efd/664/deeefd6648a5440082ec6bbfca48f6ed.png" width="400"><br><p> 图3.5。 具有有限占空比输出脉冲的PWM控制器。 </p><br><h2> 访问内部信号和诊断 </h2><br><p> 内核独立外设构成开关电源的PWM控制器并闭合控制环路的反馈时，微控制器内核允许进行测量，诊断和通信功能。 该微控制器能够测量通过电感（锯齿补偿信号）的峰值和平均电流。 与时间参数的测量一起，这允许微控制器内核执行数学计算并获得直接测量无法获得的信息。 </p><br><p> 使用测得的误差电压Verr，PRG和IL_min，可以计算电流ILpeak和IL_avg。 </p><br><p> 占空比测量和IL_avg知识允许计算Iin_avg和Iout_avg。 使用Vin，Vout，Iin_avg，Iout_avg，您可以评估电源的功率和效率。 </p><br><p> 通信接口允许外部控制，数据传输和诊断信息。 软件资源使您可以实现通信协议栈。 </p><br><p> 例如，微控制器可用于带有备用电池的备用电源的发电系统中，而无需使用用于能量转换器的专用微芯片。 对于这种应用，能量转换和电池充电由微控制器控制。 在太阳能转换器和通信协议中查找最大能量点（MPPT）的功能在软件中实现。 用户交互接口通过微控制器的输入/输出端口实现。 因此，这种系统的许多功能可以在单个微控制器上实现（见图3.6），而无需使用多个微电路和MK。 </p><br><img src="https://habrastorage.org/web/242/499/294/242499294487424991d9818e57007dfe.png"><br><p> 图3.6。 </p><br><p> 外设独立于内核，还具有许多其他功能：限制电流或在过热期间关闭电源，将间歇电流模式更改为连续电流等。 （干扰）源的干扰频谱。 </p><br><p> 上面讨论了在MK外设上独立于内核的PWM控制器的实现，以实现单级或单通道IIP。 </p><br><p>  PIC16F176x / 177x微控制器系列具有多达4个相同类型的外设集，每个外设集均可用于构建能量转换器。 因此，这些系列的控制器可以成为多通道或多级IIP和能量转换器的核心。 </p><br><h2> 单片机程序 </h2><br><p> 在独立于内核的外设上实施的IIP实际上不需要微控制器内核的干预。 微控制器的任务被简化为外围设备的初始配置，此后功能/模块通过反馈信号自动工作。 控制器可能需要最少的参与处理和更改外围交互算法，例如在软启动期间，更改源输出参数，制定紧急情况等。 </p><br><p> 因此，内核和微控制器程序可以执行其许多固有功能-控制，提供与控制设备的接口，模式指示等。 </p><br><p> 在Microchip网站上，您可以找到PMbus，DALI，DMX接口的实现，这些接口已广泛用于带有能量转换器的各种系统中。 </p><br><h2> 侦错 </h2><br><p> 要调试系统，无需从电源单元的布局开始。 对于某些任务，MC的资源和外围设备使得既可以形成转换器的控制逻辑，又可以模拟输出转换器拓扑的反馈信号。 </p><br><table><thead><tr><th> 拓扑结构 </th><th> 方案 </th></tr></thead><tbody><tr><td><img src="https://habrastorage.org/files/c91/27e/d47/c9127ed470d746dcb35cc17eb26735ed.png" width="300"></td><td><img src="https://habrastorage.org/web/514/3d4/1ce/5143d41cea74478dbcb751cbb6fddd87.png" width="400"></td></tr></tbody></table><br><p> 图3.7。 锯齿信号的形成示例，用于通过测量峰值电流值调试PWM控制器。 </p><br><table><thead><tr><th> 方案 </th><th> 图表 </th></tr></thead><tbody><tr><td><img src="https://habrastorage.org/web/867/a96/948/867a96948cbf4eba894621877cb0db92.png" width="400"></td><td><img src="https://habrastorage.org/web/bed/507/2b4/bed5072b439e4782a80246ec1e7edbc3.png" width="400"></td></tr></tbody></table><br><p> 图3.8。 锯齿信号形成示例，用于调试PWM控制器，该控制器通过测量电流的峰值并检测电感中的零电流来实现。 </p><br><h2> 总结 </h2><br><p> 灵活配置外设的能力使得可以在各种任务中使用通用的同一MC，包括为能量转换器创建PWM控制器。 </p><br><p> 独立于内核的外围设备本身很有趣，但是最大的好处可能来自功能块合成的可能性，即 共享几个用于解决特定问题的外围模块。 在这种情况下，内核的时钟速度，速度和位深度会逐渐消失-硬件部分执行专门的功能，而内核则参与产品的软件支持。 </p><br><h2> 推荐用于研究的文献： </h2><br><ol><li>  Microchip网站： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//www.microchip.com/promo/dspic33-gs-digital-power</a> </li><li>  PIC单片机中的可配置逻辑单元<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://geektimes.ru/post/278718/</a> </li><li>  Microchip单片机的I / O端口。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://geektimes.ru/post/279374/</a> </li><li>  TB3119。 互补输出发生器技术简介。  www.microchip.com </li><li> 开关电子系统的动力学和控制。 第2章。脉宽调制<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.springer.com/978-1-4471-2884-7</a> </li><li>  TB3155。 使用8位PIC微控制器的二极管仿真多相交错PWM控制器。  www.microchip.com </li><li>  TB3153。 用可编程斜坡发生器实现的示例函数。  www.microchip.com </li><li> 基思·比林斯（Keith Billings），泰勒·莫雷（Taylor Morey）。 开关模式电源手册 </li><li> 马蒂·布朗。 电源食谱。 </li><li>  AN2122。 使用微控制器作为控制单元的反激式SMPS。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.microchip.com</a> </li><li>  20097 PC7。 使用内核独立外设（CIP）设计智能电源转换器 <br>  2016年Microchip Master培训。 </li><li>  AN2456。 开关电源控制器中的可配置性。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.microchip.com</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN406473/">https://habr.com/ru/post/zh-CN406473/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN406461/index.html">乔恩·冯·泰纳（Jon von Techner）：Google故意将新的Vivaldi浏览器放在轮子上，因为它曾经“粉碎”了Opera</a></li>
<li><a href="../zh-CN406465/index.html">在天鹅的翅膀下。 拉赫塔中心主拱的工程秘密</a></li>
<li><a href="../zh-CN406467/index.html">如果希格斯字段为零会发生什么</a></li>
<li><a href="../zh-CN406469/index.html">卡西尼-惠更斯-20年研究的结局</a></li>
<li><a href="../zh-CN406471/index.html">《理论最低限度》一书。 您需要了解的有关现代物理学的一切”</a></li>
<li><a href="../zh-CN406475/index.html">科学家们开发了一种飞行人形机器人的架构</a></li>
<li><a href="../zh-CN406481/index.html">在银河系中心附近，发现了一个超大质量的黑洞</a></li>
<li><a href="../zh-CN406483/index.html">今日中国：眼镜不再是nnnada</a></li>
<li><a href="../zh-CN406487/index.html">一次意外的会议。 第十三章</a></li>
<li><a href="../zh-CN406491/index.html">我们用MQTT协议抽入对讲机以通过电话进行控制</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>