<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë©‚Äçüë¶‚Äçüë¶ üë©‚Äçüë©‚Äçüëß‚Äçüëß üë®üèΩ‚Äçüéì JS Battle: Wie ich meine Bewertung geschrieben habe () ü•î ‚ôçÔ∏è üßû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sie k√∂nnen sich an Alexander Korotayev in der Browserversion der ‚ÄûHelden der Macht und Magie‚Äú erinnern: Die Entschl√ºsselung seines Berichts √ºber sie h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JS Battle: Wie ich meine Bewertung geschrieben habe ()</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/436586/">  Sie k√∂nnen sich an <b>Alexander Korotayev</b> in der Browserversion der ‚ÄûHelden der Macht und Magie‚Äú erinnern: Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entschl√ºsselung</a> seines Berichts √ºber sie hat eine Vielzahl von Ansichten √ºber Habr√© gesammelt.  Und jetzt hat er ein Spiel gemacht, das sich auf Programmierer konzentriert: Sie m√ºssen es mit einem JS-Code spielen. <br><br>  Diesmal dauerte die Entwicklung nicht Wochen, sondern Wochen, aber ohne interessante Herausforderungen konnte sie es trotzdem nicht.  Wie macht man das Spiel auch f√ºr Entwickler bequem, die JavaScript noch nicht ber√ºhrt haben?  Wie kann man sich vor einfachen M√∂glichkeiten sch√ºtzen, ein Spiel zu √ºberlisten? <br><br><img src="https://habrastorage.org/webt/to/1i/n0/to1in00dneigddmemqzjqonebuy.png"><br><br>  Infolgedessen machte Alexander erneut einen Bericht √ºber HolyJS, und wir (die Organisatoren der Konferenz) bereiteten erneut eine Textversion f√ºr Habr vor. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/TJ7TGk5WJ5k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Mein Name ist Alexander Korotaev, ich arbeite bei Tinkoff.ru, ich bin im Front-End besch√§ftigt.  Dar√ºber hinaus helfe ich als Teil der Spb-Frontend-Community bei der Organisation von Mitaps.  Ich mache den Drinkcast Podcast, wir laden interessante Leute ein und diskutieren verschiedene Themen. <br><br>  Was ist die Essenz des Spielzeugs?  Zun√§chst m√ºssen Sie eine Einheit aus den vorgeschlagenen ausw√§hlen. Dies ist ein solches RPG-System: Jede Einheit hat ihre eigenen St√§rken und Schw√§chen.  Sie sehen, welche Einheiten der Feind gew√§hlt hat, und w√§hlen aus Rache an ihm.  Dann m√ºssen Sie in JavaScript ein Skript f√ºr das Verhalten Ihrer Armee schreiben - mit anderen Worten, das Skript "Was sollte jede Einheit auf dem Schlachtfeld tun?". <br><br>  Dies geschieht im Debug-Modus: Tats√§chlich wird der Code belastet, und dann dr√ºcken beide Gegner ihren Code, und der Kampf zwischen den beiden Seiten beginnt. <br><br>  So k√∂nnen Sie sehen, wie zwei Skripte, zwei Logiken und zwei Algorithmen gegeneinander antreten.  Ich wollte schon immer so etwas machen und jetzt ist es endlich implementiert. <br><br>  In Aktion sieht alles so aus: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/LfgaRFnmkhk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Und wie sah die Arbeit daran aus?  In die Dokumentation wurde viel Arbeit gesteckt.  Wenn sich der Spieler an den Laptop setzt, sieht er die Dokumentation, in der alles ausf√ºhrlich beschrieben ist. <br><br>  Ich habe viel Zeit f√ºr das Layout, die √úberarbeitung und die Frage der Leute gebraucht, ob es klar ist.  Infolgedessen stellte sich heraus, dass es f√ºr Sishnikov, Javisten und andere Entwickler, die nichts √ºber JS wissen, eindeutig war.  Sie k√∂nnen sogar JavaScript mit diesem Spielzeug bewerben: "Es ist nicht be√§ngstigend, sehen Sie, wie Sie darauf schreiben k√∂nnen, sogar etwas, das Spa√ü macht, passiert." <br><br><img src="https://habrastorage.org/webt/c3/9b/cf/c39bcfhakno9pvemjsm5rfj1_jo.png"><br><br>  Wir hatten ein gro√ües Turnier in unserer Firma, an dem praktisch alle Programmierer teilnahmen, an denen wir teilgenommen haben. <br><br>  Aus technologischer Sicht habe ich die beliebteste Spiel-Engine aus der Welt von JS - Phaser verwendet.  Der gr√∂√üte und am h√§ufigsten verwendete Ace Editor.  Dies ist ein Editor im Web, der Sublime oder VSCode sehr √§hnlich ist. Er kann in eine Webseite eingebettet werden.  Ich habe auch RxJS verwendet, um mit asynchronen Interaktionen von verschiedenen Benutzern zu arbeiten, und Preact, um HTML zu rendern.  Von den einheimischen Technologien arbeitete er insbesondere mit Arbeitern und Websocket. <br><br><img src="https://habrastorage.org/webt/hr/7e/hj/hr7ehjcuxfyljukymq0yeiwsvou.png"><br><br><hr><br><h2>  Spiele f√ºr Programmierer </h2><br>  Was sind Spiele f√ºr Programmierer im Allgemeinen?  Meiner Meinung nach sind dies Spiele, bei denen Sie codieren und dann ein lustiges Ergebnis erzielen m√ºssen, das mit jemandem verglichen werden kann. Dies ist ein Kampf.  Von diesen verf√ºgbaren Online-Spielen kenne ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Elevator Saga"</a> - Sie schreiben Skripte f√ºr Aufz√ºge nach bestimmten Parametern.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Screeps"</a> - √ºber Biologie, Molek√ºle, schreiben Skripte f√ºr sie. <br><br>  Es gibt auch Spielzeug, das manchmal auf Konferenzen ist.  Das beliebteste davon ist ‚ÄûCode in the Dark‚Äú, das wir heute auch vorgestellt haben.  √úbrigens hat mich ‚ÄûCode in the Dark‚Äú in gewisser Weise inspiriert. <br><br><img src="https://habrastorage.org/webt/di/ri/xp/dirixpaaxzsners2q5wbecnqf_i.png"><br><br>  Warum wurde das gemacht?  Ich habe die Aufgabe, dass Sie sich mit einem Stand auf der Konferenz etwas Cooles einfallen lassen m√ºssen, etwas Ungew√∂hnliches.  Nicht dass es Eychars mit Frageb√∂gen gab.  Es ist klar, dass jeder Aufmerksamkeit erregen und Kontakte sammeln m√∂chte.  Wir haben uns entschlossen, weiter zu gehen und haben uns etwas Cooles und Lustiges f√ºr Programmierer ausgedacht.  Mir wurde klar, dass Programmierer k√§mpfen und konkurrieren wollen, und wir m√ºssen ihnen eine solche Gelegenheit geben.  Es ist notwendig, einen Stand zu schaffen, auf den sie kommen und codieren. <br><br>  Gamification  Wir haben dies nicht nur unter praktizierenden Programmierern getan, sondern auch unter Studenten.  Wir haben solche Spiele am Karrieretag an den Instituten abgehalten.  Wir mussten irgendwie sehen, welche Typen es gab, die f√ºr uns geeignet waren oder nicht.  Wir haben Gamification verwendet, um Menschen in den Prozess zu locken, um zu sehen, wie sie sich verhalten und was sie tun.  Sie spielten und waren abgelenkt, aber das gab uns Informationen.  Einige haben Code gepusht, ohne ihn einmal ausgef√ºhrt zu haben, und es war sofort klar, dass es f√ºr die Entwicklung zu fr√ºh war. <br><br><img src="https://habrastorage.org/webt/zy/j7/-d/zyj7-dtcxgbzsnlm6eiakic1pri.png"><br><br>  Wie es in der ersten Version aussah.  Es war ein Hauptbildschirm und zwei Laptops f√ºr Spieler.  All dies kontaktierte den Server, der Server speicherte den Status und durchsuchte ihn zwischen allen verbundenen Clients.  Jeder Bildschirm war ein verbundener Client.  Die Laptops der Spieler waren interaktive Bildschirme, von denen aus dieser Status ge√§ndert werden konnte.  Bildschirme sind fest mit einem Server verbunden. <br><br><h2>  Zeitmangel Geschichte </h2><br>  Die erste Geschichte, die mir in dieser Entwicklung begegnet ist, ist die Geschichte, f√ºr die ich sehr wenig Zeit hatte.  Buchst√§blich in f√ºnf Minuten kam eine Idee auf, in f√ºnf Sekunden wurde ein Name erfunden, als ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Repository</a> auf GitHub erstellt werden musste.  Ich konnte alles nur vier Stunden am Abend verbringen und sie sogar meiner Frau wegnehmen.  Infolgedessen hatte ich nur noch drei Wochen vor der Konferenz Zeit, um dies zumindest irgendwie zu realisieren.  Alles begann so, dass es nur notwendig war, im Rahmen des Brainstormings eine Idee zu entwickeln. In f√ºnf Minuten war die Idee geboren: ‚ÄûSchreiben wir eine Art k√ºnstliche Intelligenz f√ºr RPG in JS‚Äú.  Es ist cool, macht Spa√ü, ich kann es implementieren. <br><br><img src="https://habrastorage.org/webt/un/tq/kh/untqkhyleylozw4th97etc8grc0.png"><br><br>  In der ersten Implementierung hatte der Bildschirm einen Code-Editor und einen Kampfbildschirm, auf dem sich der Kampf selbst befand.  Phaser, Ace Editor und pure Node.js wurden als Server ohne Frameworks verwendet.  Was ich sp√§ter bereute, aber dann war vom Server nichts Besonderes erforderlich. <br><br><img src="https://habrastorage.org/webt/_g/lz/uz/_glzuzkixm5rkvgffsvxc6i0txi.png"><br><br>  Ich habe es geschafft, dann Renderer zu realisieren, der die Schlacht selbst gemalt hat.  Der schwierigste Teil war die Sandbox f√ºr den JS-Code, dh eine Sandbox, in der alles f√ºr jeden Spieler isoliert ausgef√ºhrt werden sollte.  Es gab auch eine Statusfreigabe, die vom Server kam.  Die Spieler √§nderten irgendwie den Status, warfen ihn auf den Server, der Server schickte den Rest an die Web-Sockets.  Der Server war eine Quelle der Wahrheit, und alle verbundenen Clients vertrauten dem, was vom Server kam. <br><br><h2>  Sandkasten </h2><br>  Was ist so schwierig, eine Sandbox zu implementieren?  Tatsache ist, dass die Sandbox die ganze Welt f√ºr den Code ist, in dem der Code existieren muss.  Das hei√üt, Sie erstellen f√ºr ihn ungef√§hr dieselbe Welt wie in der Umgebung, bestehen jedoch nur aus einigen Konventionen aus einer API, mit der Sie interagieren k√∂nnen.  Wie implementiere ich dies auf JS?  Es scheint, dass JS dazu nicht in der Lage ist, es ist so voller L√ºcken und frei, dass es einfach nicht funktioniert, den Benutzercode vollst√§ndig in eine Box einzuschlie√üen, ohne eine separate virtuelle Maschine mit einem separaten Betriebssystem zu verwenden. <br><br><img src="https://habrastorage.org/webt/gb/ok/yi/gbokyimz5h1piufn5yfoudov554.png"><br><br>  Was soll der Sandkasten tun? <br><br>  Isolieren Sie zun√§chst, wie gesagt, den Code.  Es muss eine Welt sein, aus der man nicht ausbrechen kann. <br><br>  Au√üerdem sollte die Einheitenverwaltungs-API dort abgelegt werden.  Die Spieler m√ºssen mit dem Schlachtfeld interagieren, Einheiten bewegen, sie lenken und ihnen einen Angriffsvektor geben. <br>  Und alle Aktionen von Einheiten sind asynchron, das hei√üt, sie sollten irgendwie mit asynchronem Code funktionieren. <br><br><img src="https://habrastorage.org/webt/or/q1/y1/orq1y1fcofatt5oz2qieinaixay.png"><br><br>  Was wollte ich √ºber Asynchronit√§t sagen?  Tatsache ist, dass es in JS grunds√§tzlich mit Versprechungen umgesetzt wird.  Hier ist allen alles klar, Versprechen sind eine gro√üartige Sache, sie funktionieren perfekt, wir waren fast immer bei uns.  Viele Jahre lang wei√ü jeder, wie man mit ihnen arbeitet, aber dieses Spielzeug war nicht nur f√ºr Javascripts gedacht.  Stellen Sie sich vor, ich w√ºrde den Javisten erkl√§ren, wie man mit Versprechungen einen Kampfcode schreibt?  Wie geht es dann-dann-dann, warum ist es manchmal nicht notwendig ... Was tun mit Bedingungen oder Schleifen? <br><br><img src="https://habrastorage.org/webt/z2/qn/ir/z2qnirhdy_puuuliwdnfu0sxalg.png"><br><br>  Sie k√∂nnen nat√ºrlich den besten Weg gehen und die asynchrone / warten-Syntax verwenden.  [Folie 8:57] Aber k√∂nnen Sie sich auch vorstellen, wie Nicht-Javascript-Programmierer erkl√§ren k√∂nnen, dass Sie vor fast jeder Zeile warten m√ºssen?  Daher ist es am besten, √ºberhaupt nicht mit Asynchronit√§t zu arbeiten. <br><br><img src="https://habrastorage.org/webt/vm/yd/bi/vmydbi-ocp9npyl56wzqv-rnr4e.png"><br><br>  Erstellen Sie den synchronsten Code und die einfachste API, √§hnlich wie bei fast jeder Programmiersprache.  Wir machen ein Spielzeug nicht nur f√ºr Leute, die in JS schreiben, wir wollen es jedem zug√§nglich machen, der wei√ü, wie man programmiert. <br><br><img src="https://habrastorage.org/webt/ng/et/2d/nget2dl8vrmwwi3y608ztrpn2pk.png"><br><br>  Wir alle m√ºssen es irgendwie anfangen.  Der Benutzer schreibt den Code, und wir m√ºssen ihn ausf√ºhren und die Einheiten auf der Karte verschieben.  Das erste, was mir in den Sinn kommt, ist, dass wir eval () plus die nicht empfohlene with-Anweisung ben√∂tigen, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">f√ºr die Verwendung auf MDN nicht empfohlen wird</a> .  Dies wird funktionieren, aber es gibt Probleme. <br><br><img src="https://habrastorage.org/webt/ca/18/5a/ca185aygesba1t6wuxfymhvkghi.png"><br><br>  Zum Beispiel haben wir Code, der unsere gesamte Idee vollst√§ndig zerst√∂rt und uns daran hindert, etwas weiter zu tun.  Dies ist Code, der die Ausf√ºhrung blockiert.  Es muss etwas getan werden, damit der Benutzer die Anwendung nicht blockieren kann.  Zum Beispiel kann eine Endlosschleife alles brechen.  Wenn alert () und prompt () immer noch neu definiert werden k√∂nnen, k√∂nnen wir eine Endlosschleife √ºberhaupt nicht neu definieren. <br><br><h2>  eval () ist b√∂se </h2><br>  So kommen wir zu dem Punkt, an dem eval () b√∂se ist.  Kein Wunder, dass es als b√∂se bezeichnet wird, denn es ist eine heimt√ºckische Funktion, die tats√§chlich das Freieste und Offenste in JS beinhaltet und uns v√∂llig schutzlos macht.  Mit einer einfachen Funktion machen wir ein gro√ües Loch in unserer Anwendung. <br><br><img src="https://habrastorage.org/webt/-e/1s/yv/-e1syve2mujeqy_vpnr3obdk7sk.png"><br><br>  Aber was ist, wenn ich Ihnen <i>[mit der Stimme von Steve Jobs]</i> sage, dass wir eval () neu erfunden haben? <br><br>  Wir haben eval () f√ºr andere Technologien durchgef√ºhrt. Es funktioniert fast genauso wie eval (), das wir bereits haben.  Tats√§chlich habe ich eine eval () - Funktion in meinem Code, die jedoch mithilfe von Workers, der with-Anweisung und Proxy implementiert wurde. <br><br><img src="https://habrastorage.org/webt/wf/gj/ox/wfgjoxy3qrjkfnrnpvq-o06xr8k.png"><br><br>  Warum Arbeiter?  Tatsache ist, dass sie einen separaten Ausf√ºhrungsthread erstellen, dh JS ist Single-Threaded, aber dank der Mitarbeiter k√∂nnen wir einen anderen Thread erhalten.  Dies gibt uns viele Vorteile.  Zum Beispiel k√∂nnen wir innerhalb derselben endlosen Zyklen den durch Worker erstellten Thread vom Haupt-Thread aus unterbrechen. Vielleicht ist dies der Hauptgrund, warum ich Worker verwendet habe.  Wenn es dem Arbeiter gelungen ist, schneller als in einer Sekunde zu arbeiten, halten wir ihn f√ºr erfolgreich, wir erhalten sein Ergebnis.  Wenn nicht, dann schneiden wir es einfach ab.  Tats√§chlich funktionierte der Benutzercode aus irgendeinem Grund nicht, es traten einige seltsame Fehler auf oder er wurde aufgrund einer Endlosschleife verlangsamt.  Viele versuchten heute zu schreiben, w√§hrend (wahr) ich warnte, dass dies nicht funktionieren w√ºrde. <br><br><img src="https://habrastorage.org/webt/ee/en/va/eeenvauyaknpsa7hizr52fvkcwk.png"><br><br>  Um unseren Worker zu schreiben, m√ºssen wir nur das Skript an den Worker-Konstruktor weiterleiten, der √ºber http heruntergeladen wird.  Innerhalb des Skripts m√ºssen wir einen Nachrichtenhandler aus dem Hauptthread erstellen.  Mit der Funktion postMessage () in Worker k√∂nnen wir Nachrichten an den Hauptthread weiterleiten.  Auf diese Weise stellen wir die Kommunikation zwischen den beiden Threads her.  Eine ziemlich praktische einfache API, in der jedoch etwas fehlt, n√§mlich der Benutzercode, den wir in diesem Worker ausf√ºhren m√ºssen.  Wir werden nicht jedes Mal eine Skriptdatei auf dem Server generieren und sie dem Worker zuf√ºhren. <br><br><img src="https://habrastorage.org/webt/u2/4h/ia/u24hian_cjbwwi-06mtfn6qldmo.png"><br><br>  Ich habe einen Weg gefunden, URL.createObjectURL () zu verwenden.  Wir machen einen Block und f√ºttern ihn dem src-Arbeiter.  Somit wird unser Code direkt aus der Zeile entladen.  √úbrigens funktioniert diese Art und Weise mit allen Objekten im DOM, die src - image haben, funktioniert beispielsweise so, und selbst in einem iframe k√∂nnen Sie HTML laden, indem Sie es einfach aus einer Zeichenfolge generieren.  Ziemlich cool und flexibel, finde ich.  Wir k√∂nnen den Worker auch verwalten, indem wir ihm einfach unser speziell generiertes Objekt von der URL √ºbergeben.  Wir k√∂nnen es auch beenden und es funktioniert bereits nach Bedarf und wir haben die erste Sandbox erstellt. <br><br><img src="https://habrastorage.org/webt/mq/kp/mk/mqkpmkw8-ufofb05g8qb94-mzm4.png"><br><br>  Asynchrone Interaktionen gehen noch weiter, da jede Arbeit mit Arbeitern asynchron ist.  Wir haben eine Nachricht gesendet und k√∂nnen nicht synchron auf die n√§chste Nachricht warten. Der Worker gibt nur die Instanz an uns zur√ºck und wir k√∂nnen Nachrichten abonnieren.  Wir fangen die Nachricht mit RxJS ab und erstellen zwei Threads: einen f√ºr eine erfolgreiche Nachricht vom Worker und einen f√ºr die Fertigstellung durch Timeout.  Zwei Threads, die wir dann mit ihrer Zusammenf√ºhrung steuern. <br><br><img src="https://habrastorage.org/webt/-x/mt/ny/-xmtnyqc5ytkd6w2zkzdeqfgsws.png"><br><br>  RxJS verf√ºgt √ºber Operatoren, mit denen wir mit Threads arbeiten k√∂nnen.  In der Tat ist es wie ein Lodash f√ºr synchrone Operationen.  Wir k√∂nnen auf eine Funktion hinweisen und nicht dar√ºber nachdenken, wie sie im Inneren implementiert ist. Sie lindert Kopfschmerzen.  Wir m√ºssen anfangen, in Threads zu denken, der Zusammenf√ºhrungsoperator f√ºhrt unsere Threads zusammen und antwortet auf jede Nachricht.  Es reagiert sowohl auf das Zeitlimit als auch auf die Nachricht.  Wir brauchen jeweils nur die allererste Nachricht, nach der ersten Nachricht beenden wir den Worker.  Im Fehlerfall drucken Sie diesen Fehler aus. Im Erfolgsfall beheben wir ihn. <br><br><img src="https://habrastorage.org/webt/l0/fj/lr/l0fjlrbzawogdkbhwkwkci-1osi.png"><br><br>  Hier ist alles ziemlich einfach.  Unser Code wird deklarativ, die Komplexit√§t der Asynchronit√§t geht irgendwohin.  Die Hauptsache ist, diese Operatoren zu lernen. <br><br><img src="https://habrastorage.org/webt/mi/oc/ev/miocevejr1in0eyfg30wqmozb10.png"><br><br>  So arbeiten wir mit der Unit-API.  Ich wollte, dass die Unit-API so einfach wie m√∂glich ist.  Wenn man √ºber JS spricht, denken viele Leute, dass es schwierig ist, irgendwo zu klettern und etwas zu lernen.  Und ich wollte es so einfach wie m√∂glich machen: Alles im globalen Bereich, es gibt nur den Umfang der Unit-API, nichts weiter.  Alles f√ºr die Einheitenverwaltung, auch f√ºr die automatische Vervollst√§ndigung. <br><br><img src="https://habrastorage.org/webt/nl/-c/v8/nl-cv8_2s_3134omu8mqeanuiis.png"><br><br>  [Folie 15:20] Die L√∂sung bietet sich an, dass all dies in die sehr verbotene Aussage hineingesto√üen werden kann.  Lassen Sie uns verstehen, warum es verboten ist. <br><br>  Tatsache ist, dass mit seine Probleme hat.  Zum Beispiel ist mit leider au√üerhalb des Bereichs, den wir hineingeworfen haben, undicht, weil es versucht, tiefer als die Unit-API und in den globalen Bereich zu schauen. <br><br><img src="https://habrastorage.org/webt/tt/hw/gg/tthwggh1janwscz0t9poham_x44.png"><br>  Hier ist das letzte Beispiel besonders cool, da sogar eine Vier f√ºr unseren Code gef√§hrlich sein kann, da alle diese Funktionen vom Benutzercode ausgef√ºhrt werden k√∂nnen.  Der Benutzer kann alles tun.  Dies ist ein Spiel f√ºr Programmierer, und sie erforschen gerne die Probleme und M√∂glichkeiten, etwas zu hacken. <br><br><img src="https://habrastorage.org/webt/b4/e0/hb/b4e0hbfhxr1l7xn51miw-qk8bzk.png"><br><br>  Wie gesagt, Bereiche sind sehr undicht, sodass immer ein globaler Bereich verf√ºgbar ist.  Unabh√§ngig davon, wie viele Bereiche wir in unserem benutzerdefinierten Code festlegen, unabh√§ngig davon, wie viele Bereiche wir umschlie√üen, bleibt der globale Bereich weiterhin sichtbar.  Und das alles wegen mit. <br><br>  Tats√§chlich isoliert es nichts, es f√ºgt uns nur eine neue Abstraktionsebene hinzu, einen neuen globalen Bereich.  Wir k√∂nnen dieses Verhalten jedoch mit Proxy √§ndern. <br><br><img src="https://habrastorage.org/webt/zz/ed/qq/zzedqqwgeq-gxquunu4_ypeatak.png"><br><br>  Tatsache ist, dass Proxy alle unsere Aufrufe an das Objekt √ºberwacht, die √ºber die neue API als Proxy ausgef√ºhrt werden, und wir k√∂nnen steuern, wie sich neue Datenanforderungen in diesem Objekt verhalten. <br><br><img src="https://habrastorage.org/webt/1u/lh/xa/1ulhxahfzy_yahdczgj7jbmacaw.png"><br><br>  In der Tat funktioniert mit ganz einfach.  Wenn wir ihm eine Art Variable zuf√ºhren, pr√ºft er unter der Haube, ob sich diese Variable im Objekt befindet (dh, sie f√ºhrt den Operator in aus), und wenn ja, f√ºhrt sie sie im Objekt aus, und wenn nicht, wird sie im oberen Bereich ausgef√ºhrt Unser Fall ist global.  Hier ist es ziemlich einfach.  Die Hauptsache, bei der uns der Proxy hilft, ist, dass wir dieses Verhalten √ºberschreiben k√∂nnen. <br><br><img src="https://habrastorage.org/webt/c0/jg/ie/c0jgie64g9zgd4fukgnjadkj2g4.png"><br><br>  Es gibt so etwas wie Hooks in Proxy.  Eine wunderbare Sache, mit der wir alle Anfragen an das Objekt weiterleiten k√∂nnen.  Wir k√∂nnen das Verhalten der Attributanforderung √§ndern, das Verhalten des Attributjobs √§ndern und vor allem das Verhalten dieses Operators im Operator √§ndern.  Es gibt einen Has-Hook, zu dem wir nur true zur√ºckgeben k√∂nnen.  Daher nehmen wir unsere with-Anweisung und t√§uschen sie vollst√§ndig, wodurch unsere API viel sicherer als zuvor ist. <br><br><img src="https://habrastorage.org/webt/4w/-n/vy/4w-nvyhnsledhvcyl0tetw33hvq.png"><br><br>  Wenn wir versuchen, eval () auszuf√ºhren, fragt er zuerst, ob dieses eval () in unitApi ist, sie antworten mit "Ja" und erhalten "undefiniert ist keine Funktion".  Dies scheint das erste Mal zu sein, dass ich mit diesem Fehler zufrieden bin!  Dieser Fehler ist genau das, was wir h√§tten erhalten sollen.  Wir nahmen es und sagten dem Benutzer: "Entschuldigung, vergessen Sie alles, was Sie √ºber das Fensterobjekt wussten, das ist nicht mehr."  Wir haben bereits einige Probleme hinterlassen, aber das ist noch nicht alles. <br><br><img src="https://habrastorage.org/webt/fo/yw/a2/foywa2mzbpbijvc3ndgpq-9tpxw.png"><br><br>  Tatsache ist, dass die with-Anweisung von JS alle gleich ist, JS dynamisch und etwas seltsam ist.  Das Seltsame ist, dass nicht alles so funktioniert, wie wir es m√∂chten, ohne auf die Spezifikation zu achten.  Tatsache ist, dass mit auch mit Prototyp-Eigenschaften funktioniert.  Das hei√üt, wir k√∂nnen ihm ein Array f√ºttern und diesen obskuren Code ausf√ºhren.  Alle Array-Funktionen sind in diesem Bereich als global verf√ºgbar, was etwas seltsam aussieht. <br><br><img src="https://habrastorage.org/webt/ih/2g/yr/ih2gyrz7isyixyvx7bswlamgvbe.png"><br><br>  Dies ist f√ºr uns nicht wichtig, es ist wichtig f√ºr uns, dass der Benutzer valueOf () ausf√ºhren und alle unsere Sandboxs abrufen kann.  Direkt nehmen und abholen, sehen, was drin ist.  Ich wollte das auch nicht, daher wurde eine interessante Sache in die Spezifikation aufgenommen: Symbol.unscopables.  Das hei√üt, in der neuen Spezifikation f√ºr Symbole wurde Symbol.unscopables speziell f√ºr die with-Anweisung eingef√ºhrt, was verboten ist.  Weil sie glauben, dass jemand anderes es benutzt.  Zum Beispiel ich! <br><br><img src="https://habrastorage.org/webt/fv/9o/ns/fv9ons58tbtnrnc5rp7biuexgfk.png"><br><br>  Daher werden wir einen weiteren Interceptor erstellen, bei dem wir speziell pr√ºfen, ob dieses Symbol in der Liste aller nicht kopierbaren Attribute enthalten ist.  Wenn nicht, dann senden Sie es zur√ºck, aber wenn ja, dann werden wir leider nicht zur√ºckkehren.  Wir benutzen es auch nicht.  Und so k√∂nnen wir mit nicht einmal einen Prototyp unserer Sandbox bekommen. <br><br><img src="https://habrastorage.org/webt/07/5h/tt/075httw1dt0ekhe37frcstztzri.png"><br><br>  Wir haben immer noch die Worker-Umgebung.  Dies ist etwas, das in einem globalen Bereich h√§ngt und immer noch zug√§nglich ist.  Tatsache ist, dass wenn Sie dies einfach √ºberschreiben, es im Prototyp verf√ºgbar ist.  Fast alles kann durch den Prototyp in JS herausgezogen werden.  √úberraschenderweise sind alle diese Methoden immer noch √ºber den Prototyp verf√ºgbar. <br><br><img src="https://habrastorage.org/webt/po/mt/fl/pomtflwlmxujubh-l8qzqqn2drg.png"><br><br>  Ich musste das alles nur nehmen und ausr√§umen.  Wir gehen alle Schl√ºssel durch und reinigen alles. <br><br><img src="https://habrastorage.org/webt/zg/9k/at/zg9katqtaothaqjip6trmosdig0.png"><br><br>  Und dann hinterlassen wir dem Benutzer ein kleines Osterei, der immer noch versucht, dies zu nennen.  Wir nehmen die √ºbliche Funktion, die Hauptsache ist nicht die Pfeilfunktion, die einen Bereich hat, und √§ndern ihren Bereich auf unser Objekt, in dem wir ein kleines Osterei f√ºr einen besonders neugierigen Benutzer hinterlassen, der etwas davon oder sich selbst in der Konsole anzeigen m√∂chte.  Ich glaube, dass Ostereier wunderbar sind und im Code belassen werden sollten. <br><br><img src="https://habrastorage.org/webt/_s/7r/fq/_s7rfqdggfjikj2rjm7rcmhwja8.png"><br><br>  Es stellt sich ferner heraus, dass sie nur mit unserer Unit-API belassen wurden.  Wir haben alles komplett blockiert - tats√§chlich eine Whitelist hinterlassen.  Wir m√ºssen die APIs hinzuf√ºgen, die n√ºtzlich und notwendig sind.  Zum Beispiel die Math-API, die eine n√ºtzliche Zufallsfunktion hat, die viele Leute beim Schreiben von Code f√ºr Einheiten verwenden. <br><br>  Wir brauchen auch eine Konsole und viele andere n√ºtzliche Funktionen, die keine zerst√∂rerische Funktion haben.  Wir erstellen eine while-Liste f√ºr unsere APIs.  ,       blacklist,       ,     . <br><br><img src="https://habrastorage.org/webt/nz/mc/0o/nzmc0or7a_svlqdlhcdg36_bzi8.png"><br><br>  whitelist,     try-catch   .           ,     . <br><br><img src="https://habrastorage.org/webt/cl/pa/q1/clpaq1aarq_8svpxquxahgyrkym.png"><br><br>    ,     Worker       .  ,        worker,    ,    ¬´   ,    ¬ª   .       ,       JavaScript       ,  . <br><br>  ,    , -   .      ,     .      ,         webpack   . <br><br><img src="https://habrastorage.org/webt/cl/pa/q1/clpaq1aarq_8svpxquxahgyrkym.png"><br><br>      patchMethod(),     ,     postMessage().    postMessage()   console log, error, warn, info.        ,    .  ,       &lt;div&gt;,      ,    ,      ,     ,        . <br><br><img src="https://habrastorage.org/webt/nf/oq/yw/nfoqywkngugbgug6i5wwv_tpuhy.png"><br><br>     ,      .      : -   -  ‚Äî   ,     ,  -     . , ,    promises.   ,        actions,       . <br><br><img src="https://habrastorage.org/webt/jl/np/2f/jlnp2fcxsgtmghti8wzt4iwzbki.png"><br><br>          actions.   ,     real-time ?   ,  real-time    workers    ,        worker,       .       - ,    .    ,    , .   ,      ,   .        . <br><br><img src="https://habrastorage.org/webt/lk/zb/xp/lkzbxpal1f_bkmcq1pyk5sto8ey.png"><br><br>     workers,       .  workers ,           .      ,   .  ,     ,    (   ,  ),            .  :    ‚Äî . <br><hr><br><h2>  Math.random() </h2><br>   ,   ,         ,     .      Math.random(). <br><br>     ,   ,      ,                   .   ,  Math.random()     - . <br><br><img src="https://habrastorage.org/webt/g5/xs/zj/g5xszjwvqxhjxp4slm1hfmdfct4.png"><br><br>  ,     ,        (   ), JS   ,        .         . <br><br><img src="https://habrastorage.org/webt/ds/ic/sy/dsicsy7ra1vb8fuzq6xkry7y9zg.png"><br><br>   ,              ,  ,          .       ,    - . <br><br>            ,      . ,        random(),     . <br><br><img src="https://habrastorage.org/webt/cp/ew/ou/cpewoullokdb8p903gddmmgguj8.png"><br><br>  ,  random()     ‚Äî  ¬´ ¬ª      ,      .    ,    -  ,     random() ,       .    -    ,     .   ,          ,  random()    . <br><br><img src="https://habrastorage.org/webt/hu/tp/ot/hutpotesuqtwdc_p7yqelekwpjk.png"><br><br>       .    ,   ,   random()  .   - seed          (  ,        ,   ). <br><br><img src="https://habrastorage.org/webt/of/xs/da/ofxsdamysx7gcyfjgctqw1o72o0.png"><br>     ,     .            ,      random().                  ,  random()     -. <br><br>  <a href=""></a>  ,    worker,    ,   JS  .  ¬´¬ª ‚Äî     .   .     ,    JS .    random()  unit API.       ,    worker. <br><hr><br><br><h2> State sharing: RxJS,    </h2><br>  Also haben wir herausgefunden, was wir mit dem Kunden haben.  Lassen Sie uns nun √ºber das Teilen von Staaten sprechen, warum dies erforderlich ist und wie es organisiert wurde.  Wir haben den Status auf dem Server gespeichert, der Server muss ihn mit verbundenen Clients fummeln.  [Folie 28:48] <br><br>  Wir haben vier Rollen verschiedener Clients, die eine Verbindung zum Server herstellen k√∂nnen: "linker Benutzer", "rechter Benutzer", ein Betrachter, der auf den Hauptbildschirm schaut, und ein Administrator, der alles tun kann. <br><br>  Der linke Bildschirm kann den Status des rechten Players nicht √§ndern, der Betrachter kann nichts √§ndern und der Administrator kann alles tun. <br><br><img src="https://habrastorage.org/webt/qo/nw/xz/qonwxz54aiudwbywh6msiilucss.png"><br><br>  Warum war das ein Problem?  Alles ist ganz einfach angeordnet.  Jeder verbundene Client kann eine Sitzung ausl√∂sen, der Server akzeptiert sie und f√ºhrt sie mit dem Status zusammen, der sich im Server befindet, und verteilt sie dann an alle Clients.  Er tastet nach √Ñnderungen, die zu ihm kommen.  Es war notwendig, es irgendwie zu filtern. <br><br><img src="https://habrastorage.org/webt/th/ol/vu/tholvuuygb9shbr5-de-aemuxs8.png"><br><br>  Zun√§chst m√∂chte ich sagen, warum der Server auch √ºber RxJS verf√ºgt.  Alle Interaktionen mit zwei oder mehr verbundenen Benutzern werden asynchron.  Wir m√ºssen auf die Ergebnisse beider Benutzer warten.  Beispielsweise haben beide Benutzer auf die Schaltfl√§che ‚ÄûFertig stellen‚Äú geklickt. Sie m√ºssen warten, bis beide klicken, und erst dann die Aktion ausf√ºhren.  Auf RxJS war alles ziemlich einfach: <br><br><img src="https://habrastorage.org/webt/xa/dp/6z/xadp6zds6_xaucjyb7hdrpskcmu.png"><br><br>  Wir arbeiten wieder mit Threads, es gibt einen Stream vom Socket, der Socket genannt wird.  Um einen Thread zu erstellen, der nur den linken Player √ºberwacht, nehmen und filtern wir einfach Nachrichten aus diesem Socket des linken Players (und √§hnlich des rechten).  Dann k√∂nnen wir sie mit dem forkJoin () -Operator kombinieren, der wie Promise.all () funktioniert und analog ist.  Wir warten auf diese beiden Aktionen und rufen die setState () -Methode auf, die unseren Status auf "ready" setzt.  Es stellt sich heraus, dass wir auf beide Spieler warten und den Status des Servers √§ndern.  Bei RxJS ist dies so deklarativ wie m√∂glich, weshalb ich es verwendet habe. <br><br>  Es bleibt ein Problem mit der Tatsache, dass Spieler ihren Status ineinander √§ndern k√∂nnen.  Dies muss ihnen untersagt werden.  Trotzdem sind sie Programmierer, es gab Pr√§zedenzf√§lle, die jemand ausprobiert hat.  Erstellen wir f√ºr sie separate Klassen, die vom Client geerbt werden. <br><br><img src="https://habrastorage.org/webt/jz/9-/6v/jz9-6vskw2b3lqcf3fxasd2w4kq.png"><br><br>  Sie haben die Grundlogik der Kommunikation des Spielers mit dem Server und in jeder Klasse gibt es seine benutzerdefinierte Logik zum Filtern von Daten. <br><br>  Client ist eigentlich ein Pool von Verbindungen, Verbindungen mit Clients. <br><br><img src="https://habrastorage.org/webt/sc/qz/kl/scqzklyflx8hylw3stj7drudpdy.png"><br><br>  Er speichert sie nur und hat den onUnsafeMessage-Stream, der v√∂llig unsicher ist: Ihm kann nicht vertraut werden, dies sind nur Rohnachrichten des Benutzers, den er empf√§ngt.  Wir schreiben diese Rohnachrichten in den Stream. <br><br>  Wenn wir einen bestimmten Player implementieren, nehmen wir diese onUnsafeMessage und filtern sie. <br><br><img src="https://habrastorage.org/webt/yn/z0/1k/ynz01kbib00wt83k_5jwx5ix3ku.png"><br><br>  Wir m√ºssen nur die Daten filtern, die wir von diesem Spieler erhalten k√∂nnen, dem wir vertrauen k√∂nnen.  Der linke Spieler kann nur den Status des linken Spielers √§ndern. Wir nehmen von allen Daten, die er senden konnte, nur den Status des linken Spielers.  Wenn Sie es nicht gesendet haben, okay.  Wenn gesendet - nehmen wir.  So erhalten wir aus v√∂llig unsicheren Nachrichten sichere Nachrichten, denen wir bei der Arbeit im Raum vertrauen k√∂nnen. <br><br><img src="https://habrastorage.org/webt/g3/-a/dg/g3-adglwnncvagey8nojzmksixw.png"><br><br>  Wir haben Spielzimmer, in denen Spieler zusammenkommen.  Innerhalb des Raums k√∂nnen wir genau die Funktionen schreiben, die den Status direkt √§ndern k√∂nnen, indem wir einfach diese Flows abonnieren, denen wir bereits vertrauen k√∂nnen.  Wir haben von einer Reihe von Schecks abstrahiert.  Wir haben die √úberpr√ºfungen anhand von Rollen durchgef√ºhrt und sie als separate Klassen bezeichnet.  Wir haben den Code so aufgeteilt, dass der Code innerhalb der Steuerung, in der die wichtigen Funktionen zum √Ñndern des Zustands ausgef√ºhrt werden, so einfach und deklarativ wie m√∂glich geworden ist. <br><br>  RxJS wird auch auf dem Client verwendet, es ist auf der R√ºckseite mit dem Socket verbunden, sendet Ereignisse aus und leitet sie auf jede Weise um. <br><br>  In diesem Fall m√∂chte ich ein Beispiel geben, wenn ich die Armee des richtigen Gegners wechseln muss. <br><br><img src="https://habrastorage.org/webt/qf/u8/oy/qfu8oy7syyrcekd2z424rxuhplw.png"><br><br>  Um es zu abonnieren, erstellen wir einen Stream aus demselben Socket und filtern ihn.  Wir stellen sicher, dass dies wirklich der richtige Spieler ist, und nehmen ihm eine Nachricht √ºber seine Armee entgegen.  Wenn es keine solche Nachricht gibt, gibt der Stream nichts zur√ºck, es wird keine einzige Nachricht darin sein, es wird still bleiben, bis der Spieler die Armee wechselt.  Wir l√∂sen das Problem der Filterung von Ereignissen sofort deklarativ, wir haben es nicht kitschig. <br><br>  Und wenn schon etwas aus dem Stream gekommen ist, rufen wir die Funktion setState () auf.  Dies ist ganz einfach, genau der Ansatz, der es uns erm√∂glicht, alles transparent und deklarativ zu machen.  Genau das, wof√ºr ich das RxJS-Projekt √ºbernommen habe und was mir sehr geholfen hat. <br><br><img src="https://habrastorage.org/webt/gy/p9/qc/gyp9qchh3hadurc4_vmg0vjj1u4.png"><br><br>  Ich erstelle Streams, die ich ganz klar benannt habe, mit denen ich arbeiten kann, alles ist deklarativ, die notwendigen Funktionen werden aufgerufen, es gibt keine Aufregung mit vielen if- und Filterereignissen, all dies wird von RxJS erledigt. <br><br><h2>  Verlauf: vom Einzelspieler zum Mehrspieler </h2><br><br>  Also wurde die erste Version meines Spielzeugs geschrieben.  Wir k√∂nnen sagen, dass es ein Einzelspieler war, da nur zwei Spieler es spielen konnten, wurde die Anzahl der verbundenen Clients festgelegt.  Wir hatten einen linken Spieler, einen rechten Spieler und den Bildschirm dahinter, die alle direkt mit dem Server verbunden waren.  Alles war hart beschichtet, aber in drei Wochen war es geschafft. <br><br>  Ich habe ein neues Angebot erhalten: das Spielzeug f√ºr alle Programmierer im Unternehmen zu erweitern, damit sie es √∂ffnen und auf ihren Computern spielen k√∂nnen.  Damit wir eine Liste der Anf√ºhrer im Mehrspielermodus erhalten, damit sie zusammen spielen k√∂nnen.  Dann wurde mir klar, dass ich viel umgestaltet hatte. <br><br><img src="https://habrastorage.org/webt/qy/vs/-k/qyvs-khwziiaiv8xyfsnvcrlark.png"><br><br>  Es stellte sich als nicht so schwierig heraus.  Ich habe einfach alle Entit√§ten, die ich hatte, in getrennten R√§umen zusammengefasst.  Ich habe die Essenz von "Room", die alle Rollen kombinieren kann.  Jetzt kommunizieren nicht die Spieler selbst direkt mit dem Server, sondern die R√§ume.  Die R√§ume haben bereits Anfragen direkt an den Server weitergeleitet, wodurch der Status ersetzt wurde, und der Status wurde f√ºr jeden Raum separat. <br><br><img src="https://habrastorage.org/webt/cc/au/tt/ccautts_bfhkftuja4joqqeg9vm.png"><br><br>  Ich habe alles genommen und neu geschrieben, eine Liste von F√ºhrungskr√§ften hinzugef√ºgt, wir haben die Besten mit Preisen ausgezeichnet.  Es war nur notwendig, eine gro√üe Anzahl von Benutzern zu haben, es war bereits unm√∂glich, jedem zu folgen, es war notwendig, etwas zu schreiben, wo alle Daten gesammelt werden sollten. <br><br><h2>  JS Gamedev und seine Probleme </h2><br><br>  So lernte ich den JS-Gamedev ernsthafter kennen.  Ich watschelte ungef√§hr drei Jahre lang √ºber das letzte Projekt und ruhte mich regelm√§√üig aus.  Und hier hatte ich beide Male drei Wochen lang.  Jeden Tag sa√ü ich und tat abends etwas. <br><br>  Welche Probleme gibt es bei der Entwicklung von Spielen auf JS?  Alles unterscheidet sich von unseren Gesch√§ftsanwendungen, bei denen es kein Problem ist, etwas von Grund auf neu zu schreiben.  Dar√ºber hinaus wird vieles sogar begr√º√üt: Wir werden unser eigenes Ding machen, uns an die Geschichten mit NPM erinnern und uns selbst auf die linke Seite setzen. <br><br><img src="https://habrastorage.org/webt/f6/6l/zc/f66lzct-hy9vzyyixqvuplcd2qk.png"><br><br>  In JS Gamedev ist dies nicht m√∂glich, da alle Technologien zur Anzeige von Grafiken so niedrig sind, dass es wirtschaftlich banal ist, etwas dar√ºber zu schreiben.  Wenn ich dieses Spielzeug aufgreifen und anfangen w√ºrde, es von Grund auf auf WebGL zu schreiben, w√ºrde ich auch ungef√§hr sechs Monate dahinter sitzen und nur versuchen, einige seltsame Fehler herauszufinden.  Die beliebteste Spiel-Engine Phaser hat diese Probleme von mir entfernt ... <br><br><img src="https://habrastorage.org/webt/x1/zs/aa/x1zsaafnaxys0r9tssldvcper38.png"><br><br>  ... und neue hinzugef√ºgt: 5 Megabyte in einem Bundle.  Und nichts konnte dagegen unternommen werden, er wei√ü √ºberhaupt nicht, was Baumsch√ºtteln ist.  Dar√ºber hinaus kann nur die neueste Version von Phaser mit Webpack und Bundles arbeiten.  Zuvor war Phaser nur im HTML-Tag des Skripts verbunden, es war seltsam f√ºr mich. <br><br>  Ich komme aus allen Arten von Webpacks-Skripten, und im JS-Spielentwickler kann das fast nichts.  Alle Module haben eine extrem schlechte Eingabe oder haben sie √ºberhaupt nicht oder wissen im Grunde nicht, wie man Webpack verwendet. Es war notwendig, Wege zu finden, um es zu verpacken.  Wie sich herausstellte, funktioniert selbst Ace Editor in seiner reinen Form √ºberhaupt nicht mit Webpack.  Um mit der Arbeit zu beginnen, m√ºssen Sie ein separates Paket herunterladen, in dem es bereits verpackt ist (Klammer). <br><br>  Bei Phaser war es ungef√§hr genauso, aber in der neuen Version haben sie es mehr oder weniger normal gemacht.  Ich schrieb weiter √ºber Phaser und fand heraus, wie man alles mit Webpack so macht, wie wir es fr√ºher getan hatten: Sowohl Tippen als auch Tests konnten an all das angeh√§ngt werden.  Ich habe festgestellt, dass Sie <a href="">PixiJS</a> , ein Webpack-Rendering, separat verwenden und viele Module daf√ºr finden k√∂nnen, die bereit sind, damit zu arbeiten. <br><br><img src="https://habrastorage.org/webt/cz/cf/o7/czcfo7ib3-d7n3w-l1rpzxfo8cw.png"><br><br>  PixiJS ist eine gro√üartige Bibliothek, die entweder auf WebGL oder auf Canvas gerendert werden kann.  Dar√ºber hinaus k√∂nnen Sie sogar Code wie f√ºr Canvas schreiben, der in WebGL gerendert wird.  Diese Bibliothek kann 2D sehr schnell rendern.  Die Hauptsache ist zu wissen, wie es mit dem Ged√§chtnis funktioniert, um nicht in eine Position zu fallen, wenn das Ged√§chtnis vorbei ist. <br><br>  Ich empfehle separat das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">awesome-pixijs-</a> Repository auf GitHub, wo Sie verschiedene Module finden k√∂nnen.  Am meisten hat mir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React-pixi</a> gefallen.  Wir k√∂nnen das L√∂sen von Problemen mit der Ansicht einfach ignorieren, wenn wir zwingende Funktionen direkt in den Controller schreiben, um geometrische Formen, Sprites, Animationen und mehr zu zeichnen.  Wir k√∂nnen uns alle in JSX markieren.  Wir sind mit unserer Gesch√§ftsanwendung aus der JSX-Welt gekommen und k√∂nnen sie weiter nutzen.  Daf√ºr liebe ich Abstraktion.  React-Pixi gibt uns diese vertraute Abstraktion. <br><br>  Ich rate Ihnen auch, tween.js zu verwenden, die gleiche ber√ºhmte Animations-Engine von Phaser, mit der Sie deklarative Animationen erstellen k√∂nnen, die CSS-Animationen etwas √§hnlich sind: Wir machen einen √úbergang zwischen Zust√§nden, und tween.js entscheidet f√ºr uns genau, wie das Objekt verschoben wird. <br><br><h2>  Spielertypen: Wer sie sind und wie man sich mit ihnen anfreundet </h2><br>  Ich bin auf verschiedene Spieler gesto√üen und m√∂chte Ihnen auch √ºber das Testen des Spielzeugs erz√§hlen.  Ich versammelte Kollegen in einem geschlossenen Raum und lie√ü sie nicht raus, bis sie das Spiel beendet hatten.  Leider konnte nicht jeder das Spiel beenden, da ich am Anfang viele Fehler hatte.  Gl√ºcklicherweise begann ich mit dem Testen, sobald mindestens ein funktionierender Prototyp erschien.  Ehrlich gesagt, der erste Test ist fehlgeschlagen, weil einige Spieler nichts gestartet haben.  Es war eine Schande, aber es gab mir einen Tritt, der es mir erm√∂glichte, weiterzumachen. <br><br>  Wenn Ihr Spielzeug fertig ist, k√∂nnen Sie sehr gut oder mit einer Heugabel und Fackeln empfangen werden.  Alle Leute warten auf eine Art Fan aus den Spielen und auf das Gl√ºck, das Sie ihnen geben werden.  Und du gibst ihnen etwas, das √ºberhaupt nicht funktioniert, obwohl es f√ºr dich zu funktionieren scheint.  Wenn Sie ein Online-Spielzeug haben, gibt es noch mehr solche Fehler. <br><br>  Die angenehmsten Menschen, denen ich begegnet bin, sind daher ‚ÄûForscher‚Äú, die immer mehr in Ihrem Spielzeug finden, als sie wirklich sind.  Sie k√∂nnen es angenehm mit allen m√∂glichen kleinen Dingen erg√§nzen und Sie dazu auffordern, etwas hinzuzuf√ºgen.  Leider gab die Kommunikation mit diesen Menschen nicht das Wichtigste - die Stabilit√§t des Spielzeugs. <br><br>  Es gibt gew√∂hnliche Spieler, die nur dem Fan zuliebe kommen.  Manchmal bemerken sie nicht einmal Fehler und rutschen auf dem Weg zum Vergn√ºgen irgendwie durch sie hindurch. <br><br>  Eine andere Kategorie sind Fehlersammler, f√ºr die fast alles nicht funktioniert.  Sie m√ºssen mit solchen Menschen befreundet sein, obwohl sie viel Negativit√§t sprechen.  Wir m√ºssen seltsame Beziehungen zu ihnen aufbauen: Sie verletzen dich, und du versuchst, ihnen etwas N√ºtzliches abzunehmen. "Lass uns an deinem Computer sitzen und sehen."  Sie m√ºssen mit ihnen arbeiten, denn am Ende sind es diese Leute, die Ihre Spielqualit√§t verbessern. <br><br>  Sie m√ºssen nur an lebenden Menschen testen.  Ihr Auge ist verschwommen, und Tests werden sicherlich zeigen, was verborgen ist.  Sie entwickeln ein Spielzeug und tauchen tiefer, s√§gen einige Funktionen, aber sie werden m√∂glicherweise nicht einmal ben√∂tigt.  Sie gehen direkt zu Ihren Verbrauchern, zeigen ihnen und beobachten, wie sie spielen und welche Tasten sie dr√ºcken.  Dies gibt Ihnen einen Anreiz, genau das zu tun, was Sie brauchen.  Sie sehen, dass einige Leute st√§ndig Strg + S dr√ºcken, weil sie es gewohnt sind, den Code zu speichern. Wenn der Code zumindest auf Strg + S ausgef√ºhrt wird, f√ºhlt sich der Spieler wohler.  Sie m√ºssen eine angenehme Umgebung f√ºr den Spieler schaffen, daf√ºr m√ºssen Sie ihn lieben und ihm folgen. <br><br>  Die 80/20-Regel funktioniert: Sie erstellen 20% der Zeit eine Demo aus der gesamten Entwicklung des Spiels, und f√ºr den Spieler sieht es aus wie ein zu 80% abgeschlossenes Spiel.  Die Wahrnehmung funktioniert so, dass die grundlegende Mechanik bereit ist, alles sich bewegt und funktioniert, was bedeutet, dass das Spiel fast fertig ist und der Entwickler es bald beenden wird.  In Wirklichkeit hat der Entwickler jedoch immer noch einen Ausweg von 80%.  Wie gesagt, ich musste lange an der Dokumentation arbeiten, damit sie f√ºr alle verst√§ndlich war.  Ich habe es vielen Leuten gezeigt, die ihre Kommentare gesprochen haben, ich habe sie gefiltert und versucht, das Wesentliche der Aussagen zu verstehen.  Und ich habe viel Zeit gebraucht, um nach Fehlern zu suchen. <br><br>  In der Spieleentwicklung kann ich Ihnen daher nur raten, Demos zu machen: Sie begeistern alle, ben√∂tigen nicht viel Zeit und niemand erwartet wirklich etwas von den Demos.  Das Beenden von Spielen ist ein langweiliger Prozess, aber der Einstieg ist gro√üartig. <br><br>  Zum Schluss hinterlasse ich Ihnen Links: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Repository mit einem Spiel und Anweisungen zum Starten</a> (ich werde Anfragen gerne b√ºndeln, wenn Sie Fehler finden) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Phaser</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">awesome-pixijs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Colyseus Multiplayer-Spieleserver</a> (Ich habe selbst Multiplayer geschrieben und dann einen fertigen Server mit R√§umen gesehen) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ace Editor</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pr√§sentation dieses Berichts</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Russischsprachige Konferenzen, bei denen Sie einen Bericht einreichen k√∂nnen</a> </li></ul><br><blockquote>  <b>HolyJS 2019 Piter</b> , eine Konferenz f√ºr JavaScript-Entwickler, findet vom 24. bis 25. Mai in St. Petersburg statt.  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Redner</a> sind bereits auf der Website erschienen. <br>  Sie k√∂nnen auch einen Bericht beantragen. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Call for Papers ist</a> bis zum 11. M√§rz ge√∂ffnet. <br>  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ticketpreise</a> steigen am 1. Februar. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436586/">https://habr.com/ru/post/de436586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436568/index.html">Eigene Videoplattform oder wie man viele Computerressourcen beansprucht. Teil 1</a></li>
<li><a href="../de436570/index.html">Programmierer Exorzismus</a></li>
<li><a href="../de436572/index.html">Skolkovo Cybersecurity Challenge 2019 Wettbewerb f√ºr Cybersecurity-Projekte</a></li>
<li><a href="../de436578/index.html">Pers√∂nlicher Sicherheitspreis f√ºr Direktoren gro√üer IT-Unternehmen pro Jahr</a></li>
<li><a href="../de436584/index.html">Runet Management Law - Umsetzung von Bestimmungen und Verantwortungsbereichen</a></li>
<li><a href="../de436588/index.html">MegaSlerm in Moskau Anfang Juni: erste Ank√ºndigung und Rabatte</a></li>
<li><a href="../de436590/index.html">Tipps f√ºr einen funktionierenden Kunden. Dr√ºcken Sie zum Lesen Œî</a></li>
<li><a href="../de436592/index.html">Backend in VueJS Single File Components</a></li>
<li><a href="../de436594/index.html">Auf Wiedersehen Chevy Volt: Geschichten und Legenden des wiederaufladbaren Hybrids</a></li>
<li><a href="../de436596/index.html">Full-Stack-Entwickler stecken tats√§chlich auf mittlerer Ebene fest. Schonen Sie sich das Leiden - gehen Sie diesen Weg nicht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>