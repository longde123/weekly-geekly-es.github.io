<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñïüèª üõ£Ô∏è ü¶ì Wie haben wir uns mit einem Klick umgebracht, indem wir eine Website platziert und auf einem Geocluster abgerechnet haben, oder wir werden wieder √ºber Redundanz sprechen üßòüèº üçå üôÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ja, ich bin auch ein Idiot. Aber das habe ich nicht von mir erwartet. Es scheint "nicht das erste Jahr verheiratet zu sein". Es scheint eine Reihe von...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie haben wir uns mit einem Klick umgebracht, indem wir eine Website platziert und auf einem Geocluster abgerechnet haben, oder wir werden wieder √ºber Redundanz sprechen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424063/"> Ja, ich bin auch ein Idiot.  Aber das habe ich nicht von mir erwartet.  Es scheint "nicht das erste Jahr verheiratet zu sein".  Es scheint eine Reihe von intelligenten Artikeln √ºber Fehlertoleranz, Redundanz usw. zu lesen, etwas Vern√ºnftiges, das einmal selbst hier geschrieben wurde.  Seit √ºber 10 Jahren bin ich CEO eines Hosting-Anbieters, der unter der Marke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ua-hosting.company t√§tig</a> ist und Hosting- und Serververmietungsdienste in den Niederlanden, den USA und vor einer Woche in Gro√übritannien anbietet (fragen Sie nicht, warum der Name ua, die Antwort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in unserem autobiografischen Artikel zu finden ist</a> ) bieten wir unseren Kunden L√∂sungen mit unterschiedlichem Komplexit√§tsgrad, manchmal so, dass selbst wir selbst schwer zu verstehen sind, was wir getan haben. <br><br>  Aber verdammt ... Heute habe ich mich selbst √ºbertroffen.  Wir selbst haben die Website und die Abrechnung mit allen Transaktionen, Kundendaten √ºber Dienstleistungen und anderen Dingen vollst√§ndig abgerissen, und es war meine Schuld, dass ich selbst "L√∂schen" sagte.  Einige von Ihnen haben dies bereits bemerkt.  Es geschah heute, Freitag um 11:20 Uhr Eastern Standard Time (EST).  Dar√ºber hinaus wurden unsere Website und die Abrechnung nicht auf demselben Server gehostet, und auch nicht in der Cloud haben wir die Cloud des Rechenzentrums vor zwei Monaten zugunsten unserer eigenen L√∂sung verlassen.  All dies befand sich auf einem fehlertoleranten Geo-Cluster aus zwei virtuellen Servern - unserem neuen Produkt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VPS (KVM) mit dedizierten Laufwerken</a> , <b>INDEPENDENT</b> VPS, das sich auf zwei Kontinenten befand - in Europa und den USA.  Einer in Amsterdam und der andere in Manassas in der N√§he von Washington, weil DC in zwei zuverl√§ssigen Rechenzentren.  Inhalte, auf denen st√§ndig und in Echtzeit dupliziert wurde und deren Fehlertoleranz auf dem √ºblichen DNS-Cluster basiert, konnten Anfragen an jeden der Server senden, von denen jeder als MASTER diente, und im Falle einer Unzug√§nglichkeit √ºbernahmen sie die Aufgaben des zweiten. <br><br>  Ich dachte, dass dies nur einen Meteoriten t√∂ten kann, oder etwas anderes, das dem globalen √§hnlich ist und zwei Rechenzentren gleichzeitig deaktivieren kann.  Aber alles stellte sich als einfacher heraus. <a name="habracut"></a><br><br>  Wir k√∂nnen es sein, wir, wenn wir Idioten sind.  In der Welt gibt es nur zwei unbegrenzte Dinge - das Universum und die menschliche Dummheit, und wenn das erste umstritten ist, ist das zweite offensichtlich geworden. <br><br>  Ich habe mich immer an das Prinzip der Soundredundanz gehalten. Ich geh√∂re nicht zu den Leuten, die rufen: "Ich verliere 1000 Dollar f√ºr eine Stunde Inaktivit√§t", aber gleichzeitig zahle ich 15 Dollar f√ºr meine gesamte Infrastruktur.  Nein, ich verliere bestimmt nicht so viel.  Obwohl ich vielleicht manchmal verliere.  Die meisten Idioten, die dar√ºber schreien, glauben nicht einmal, dass Ausfallzeiten pro Sekunde auf lange Sicht manchmal 1.000, 10.000 oder sogar eine Million Dollar Gewinn kosten k√∂nnen.  Auf welche Weise?  Es ist sehr einfach, in diesem Moment kann ein Kunde hereinkommen, der seine erste Bestellung aufgibt und Ihnen in Zukunft diese Millionen von Dollar bringt, weil Sie immer die M√∂glichkeit haben, ihm Ihre Einzigartigkeit zu beweisen und seine Empfehlung zu verdienen.  Und wenn er den Fehler 504 oder "Es tut mir leid, aber der Server ist derzeit nicht verf√ºgbar" sieht, findet die Transaktion m√∂glicherweise nicht statt.  Dies ist uns passiert, nein, kein 504-Fehler beim Anruf eines wichtigen Besuchers, sondern der erste.  Rein zuf√§llig befand ich mich zur richtigen Zeit am richtigen Ort, als gro√üe Kunden wie Dmitry Sukhanov, der Erfinder von Kinopoisk, unsere Website besuchten, obwohl dies kein sehr gutes Beispiel ist, da er nur 2 Jahre mit uns zusammengearbeitet hat Yandex kaufte es nicht f√ºr 60 Millionen Dollar oder wie viel dort.  Es war also eher Dmitry als wir, der die Millionen hierher brachte, aber wir waren froh, mit einem so interessanten und n√ºtzlichen Projekt zusammenzuarbeiten, und dies machte uns wiederum zu einer Werbung und bot viele neue und zufriedene Kunden. <br><br>  Im Allgemeinen, warum bin ich das alles.  Verluste und die notwendige Redundanz sollten sinnvoll bewertet werden.  Obwohl das Risiko besteht, eine Million Dollar zu verlieren, m√ºssen Sie die Wahrscheinlichkeit eines solchen Ereignisses pr√ºfen.  Wenn Dmitry einen Zeitfehler 504 gesehen h√§tte, w√§re h√∂chstwahrscheinlich nichts Kritisches passiert, und er w√§re wieder zu uns zur√ºckgekehrt.  Warum?  Zu dieser Zeit waren wir wahrscheinlich einer der wenigen, die in der Ukraine eine Konnektivit√§t von mehr als 1 Gbit / s mit hoher Qualit√§t und minimaler Latenz zu g√ºnstigen Preisen anbieten konnten, was f√ºr ihre damalige Ressource √§u√üerst wichtig war, um dem ukrainischen Publikum einen qualitativ hochwertigen Zugang zu gew√§hrleisten Portal, da der Auslandsverkehr von schlechter Qualit√§t und immer noch teuer war.  Daher ist es wichtig, die Einzigartigkeit der L√∂sung sicherzustellen, da die Verf√ºgbarkeit f√ºr Sie nicht sehr kritisch ist.  Und da wir einzigartig sind, k√∂nnen wir uns (auch jetzt noch) mit Tausenden von Server-Clients erlauben, mehrere Stunden oder sogar l√§nger im Leerlauf zu sein.  Wir brauchen keine mega-fehlertoleranten Wolken, die eine Betriebszeit von 99,9999% f√ºr viel Geld bieten, denn selbst wenn sie fallen, und wenn sie fallen, hat die Praxis sie sehr lange gezeigt, da das Problem, das die Unzug√§nglichkeit verursacht hat, wahrscheinlich nicht gew√∂hnlich ist.  Und sie werden im Falle einer Verwundbarkeit nicht helfen.  Sie werden nicht helfen. <br><br>  Deshalb haben wir unsere Entscheidung f√ºr uns selbst sehr einfach getroffen.  Wir haben zwei VPS (KVM) auf den Dell R730xd-Knoten verwendet, denselben VPS (KVM), den wir unseren Kunden anbieten, da dies unser urspr√ºngliches Prinzip ist - Menschen das zu geben, was wir selbst verwenden: <br><br>  VPS (KVM) - 2 x Intel Dodeca-Core Xeon E5-2650 v4 (24 Kerne) / 40 GB / 4 x 240 GB SSD RAID10 / Datatraffic - 40 TB - ab 99 USD / Monat. Wenn Sie eine Promo finden, erhalten Sie <b>30% Rabatt auf die erste Zahlung</b> Code in unserem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Werbeartikel</a> . <br><br>  Eine in den Niederlanden und eine in den USA.  Ja, auf diesen Knoten gibt es neben unserer Site und der Abrechnung zwei weitere echte Kunden, von denen jeder den Betrieb unserer Site theoretisch beeinflussen kann und dies in der Praxis nicht kann.  Warum - es steht in einem Werbeartikel, ich werde hier kein zweites Mal auf Details eingehen.  Hier geht es nicht darum.  Im Allgemeinen ist die L√∂sung nicht schlechter als dedizierte Einstiegsserver und kann eine sehr gro√üe Last bew√§ltigen. <br><br>  Es ist unter anderem fehlertolerant, Daten werden st√§ndig in Echtzeit repliziert.  Und wenn ein Server nicht verf√ºgbar ist, √ºbernimmt der zweite die MASTER-Rolle.  Im Idealfall k√∂nnen Sie daf√ºr sorgen, dass der Datenverkehr vom amerikanischen Kontinent vom amerikanischen Server und von Europa, Russland und Asien - dem Server in den Niederlanden - verarbeitet wird. <br><br>  Wir haben die Server in unserem Rechnungs-WHMCS, einem √∂ffentlich lizenzierten Produkt, das f√ºr uns angepasst wurde und von vielen Hosting-Anbietern auf der ganzen Welt, einschlie√ülich uns, verwendet wird, in unser Konto eingebunden, da das Schreiben unseres eigenen Buchhaltungssystems (in unserem Fall) eine offene Schw√§che darstellt. .  Insbesondere in F√§llen, in denen die gew√ºnschte Funktion implementiert wird, indem Sie Ihr eigenes Modul in die vorhandene Abrechnung schreiben, was Ihre Fehlertoleranz erh√∂ht, da das Risiko kritischer Schwachstellen verringert wird.  Schlie√ülich k√∂nnen Sie allein oder sogar mit einem kleinen Team kein zuverl√§ssigeres System schreiben als das bestehende, das im Laufe der Jahre von einer Gruppe von Entwicklern geschrieben wurde, bei denen bereits Tausende von Fehlern behoben wurden und f√ºr die Entwickler jetzt nur 30 US-Dollar pro Monat f√ºr eine Lizenz verlangen und Millionen von Dollar pro Jahr erhalten das kann auch f√ºr weitere Verbesserungen ausgegeben werden. <br><br>  In Bezug auf kritische Sicherheitsl√ºcken hat unser Programmierer k√ºrzlich einen Fehler beim Schreiben eines der Servicemodule gemacht, das Zugriff auf eine schreibgesch√ºtzte Abrechnungsdatenbank hatte, die von einem unabh√§ngigen Pentester entdeckt wurde und uns aufforderte, 550 US-Dollar f√ºr einen gefundenen Fehler zu zahlen, da es sich um eine SQL-Sicherheitsl√ºcke handelte -Injektion: <br><br><blockquote>  SQL-Injection geh√∂rt zu den Top 10 OWASP. Ich habe Ihnen √ºber den Betrag von 550 US-Dollar geschrieben. Dies ist der Mindestbetrag, da die Datenbank darunter leidet und dadurch die Benutzerdaten gef√§hrdet. <br><br>  Einige Betr√§ge belaufen sich jedoch auf bis zu 10.000 US-Dollar als Belohnung, wie dies bei vk.com der Fall ist. </blockquote><br>  Nat√ºrlich haben wir diesen Anfang unterst√ºtzt und ohne Frage eine Entsch√§digung gezahlt.  Da unser Programmierer die zur Verf√ºgung gestellten Daten pr√ºfte und das Vorliegen eines Problems best√§tigte, Begr√ºndung des Pentesters.  Schlie√ülich unterhalten wir noch keinen eigenen Pentester im Staat, und diese Arbeit erfordert betr√§chtliches Wissen und Zeit, da sie eine Reihe von Studien umfasst: <br><br><blockquote>  Sicherheits√ºberpr√ºfung der gesamten Ressource, und dies ist eine √úberpr√ºfung gem√§√ü den folgenden Parametern, und unser Bericht am Ende der Pr√ºfung enth√§lt: <br><br>  ‚Ä¢ A1-Code-Injektion <br>  ‚Ä¢ A2 Falsche Authentifizierung und Sitzungsverwaltung <br>  ‚Ä¢ A3 Crossite-Skripte <br>  ‚Ä¢ A4-Zugriffsverletzung <br>  ‚Ä¢ A5 Unsichere Konfiguration <br>  ‚Ä¢ A6 empfindliches Datenleck <br>  ‚Ä¢ A7 Unzureichender Angriffsschutz <br>  ‚Ä¢ A8 F√§lschung von standort√ºbergreifenden Anfragen <br>  ‚Ä¢ A9 Verwenden von Komponenten mit bekannten Schwachstellen <br>  ‚Ä¢ A10 Unzureichende Protokollierung und √úberwachung </blockquote><br>  Denn ja, die Entscheidung wurde eindeutig und schnell getroffen.  Dar√ºber hinaus erh√∂hen solche Studien, wie Pentester feststellte, die Sicherheit des gesamten Web: <br><blockquote>  Dies ist mein Hobby. Wenn jeder Entwickler wie Sie einen Dialog mit Bug-J√§gern f√ºhren w√ºrde, w√§re das Internet zu 80% sicher. </blockquote><br>  Daher haben wir im Gro√üen und Ganzen einiges bezahlt, insbesondere wenn wir den Betrag durch die Anzahl der Monate dividieren, in denen der f√ºr Penetrationstests verantwortliche Mitarbeiter nicht im Personal besch√§ftigt war.  Vielen Dank an den Pentester f√ºr den gefundenen Fehler und die Tatsache, dass er sich die Zeit f√ºr uns genommen hat. Wir sind ihm wirklich sehr dankbar.  Wenn jemand seine Dienste ben√∂tigt, wenden Sie sich bitte an, wir werden Kontakte mit seiner Erlaubnis zur Verf√ºgung stellen. <br><br>  Aber diesmal war es nicht die Verwundbarkeit, die uns get√∂tet hat.  Es waren wir und das Merkmal des WHMCS-Produkts.  In jedem Fall haben wir ein praktisches Produkt zur Verwaltung virtueller Container installiert - VM Manager, auf das WHMCS zugreifen kann, um den erstellten virtuellen Container zu erstellen, anzuhalten und zu l√∂schen sowie Clients. <br><br><img src="https://habrastorage.org/files/607/98f/a00/60798fa001694b8f87c12d03c35cfe61.jpg" alt="Bild"><br><br>  Jeden Tag erhalten wir bei WHMCS Dutzende oder sogar Hunderte von Bestellungen, die angenommen (angenommen), gel√∂scht oder als Betrug gekennzeichnet werden m√ºssen, wenn der Kunde versucht, eine Bestellung mit einer gestohlenen Kreditkarte zu bezahlen.  Manchmal gibt es einen Boom solcher Bestellungen und wir k√∂nnen nicht sofort bestimmen, welchen Status wir ihm zuweisen sollen, da wir unsere interne √úberpr√ºfung durchf√ºhren oder den Benutzer auffordern, sich ordnungsgem√§√ü zu identifizieren, wenn wir seine Bestellung als verd√§chtig empfinden, und diese Benutzer nat√ºrlich nicht immer antworten oder bestehen Identifizierung erfolgreich.  Daher sammeln sich von Zeit zu Zeit tausend oder zwei nicht aktivierte Bestellungen oder Bestellungen mit unbekanntem Status an, die leichter zu l√∂schen als zu verarbeiten sind.  Wer muss wirklich - nachbestellen. <br><br>  Vor zwei Monaten haben wir uns entschlossen, das Cloud-basierte Rechenzentrumsprodukt vollst√§ndig aufzugeben, als wir begannen, unsere eigene L√∂sung mit VM Manager bereitzustellen, mit der Sie das System mit einem Klick oder sogar von Ihrem Image aus erstellen k√∂nnen: <br><br><img src="https://habrastorage.org/files/457/585/1f7/4575851f79d04242a0a3e0560e52a176.jpg" alt="Bild"><br><br>  Und sie haben es sogar auf NVMe PCIe-SSDs angeboten, die eine Gr√∂√üenordnung schneller sind als normale SSDs zum Lesen und bis zu dreimal zum Schreiben. Die L√∂sung muss wie die Cloud-Version aktualisiert werden, die Server kosten ab 15 US-Dollar und enthalten ein praktisches VM Manager- und ISP Manager-Control Panel 5 auf Anfrage kostenlos, Support-Upgrade mit einem Mindestschritt von 5 GB DDR4-RAM, 60 GB NVMe PCIe SSD und 3 Core E5-2650 v4 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf einen h√∂heren Tarif</a> in Amsterdam, Manassas und London: <br><br>  VPS (KVM) - E5-2650 v4 (3 Kerne) / 5 GB DDR4 / 60 GB NVMe SSD / 1 Gbit / s 5 TB - 15 USD / Monat <br>  VPS (KVM) - E5-2650 v4 (6 Kerne) / 10 GB DDR4 / 120 GB NVMe SSD / 1 Gbit / s 10 TB - 30 USD / Monat <br>  VPS (KVM) - E5-2650 v4 (9 Kerne) / 15 GB DDR4 / 180 GB NVMe SSD / 1 Gbit / s 15 TB - 45 USD / Monat <br>  ... <br>  VPS (KVM) - E5-2650 v4 (24 Kerne) / 40 GB DDR4 / 480 GB NVMe SSD / 1 Gbit / s 40 TB - 120 USD / Monat <br>  ... <br>  VPS (KVM) - E5-2650 v4 (24 Kerne) / 65 GB DDR4 / 780 GB NVMe SSD / 1 Gbit / s 65 TB - 195 USD / Monat <br>  VPS (KVM) - E5-2650 v4 (24 Kerne) / 70 GB DDR4 / 840 GB NVMe SSD / 1 Gbit / s 70 TB - 210 USD / Monat <br>  VPS (KVM) - E5-2650 v4 (24 Kerne) / 75 GB DDR4 / 900 GB NVMe SSD / 1 Gbit / s 75 TB - 225 USD / Monat <br><br>  Daher ist es nicht sinnvoll, einen gro√üen Teil der Rechenzentrums-Cloud zu mieten und den Kunden die alten E3-1230-Prozessoren anzubieten, obwohl sie f√ºr uns ab 3,99 USD pro Monat aufgebraucht sind.  Wir glauben, dass Kunden die h√∂chste Qualit√§t und maximale Leistung zum niedrigsten Preis erhalten sollten. Ja, wir k√∂nnen das Produkt nicht f√ºr 3,99 US-Dollar anbieten und decken m√∂glicherweise nicht die Anforderungen einiger Entwickler ab, die nur minimale Ressourcen und Leistung ben√∂tigen, aber die Knotenkosten sind h√∂her 7.000 Euro und wir k√∂nnen es uns zumindest vorerst nicht leisten, mehr als 15 Kunden darauf zu setzen, da wir bereit sind, Qualit√§t zu garantieren.  Und Qualit√§t bedeutet nicht nur Stabilit√§t, sondern auch das maximale Leistungs- / Preisverh√§ltnis und dann die Kosteneffizienz. <br><br>  Um dies zu feiern, haben wir die gesamte Cloud-Infrastruktur (die aus Tausenden von VPS besteht) storniert, zwei unabh√§ngige virtuelle Server f√ºr uns bestellt (ja, wir bezahlen uns selbst f√ºr unsere Server), eine Site bereitgestellt und vor zwei Monaten eine neue L√∂sung in Rechnung gestellt, wie wir alles beschrieben haben oben in die Schutzgruppe gebracht, damit sich das System nicht selbst stoppt, wenn Sie pl√∂tzlich vergessen haben, p√ºnktlich zu zahlen ... Es scheint alles getan zu haben. <br><br>  Und heute, nach 2 Monaten, haben wir beschlossen, abzubrechen (nicht l√∂schen, eine solche Schaltfl√§che ist auch vorhanden, aber wir versuchen, nie etwas zu l√∂schen, damit immer ein Verlauf vorhanden ist). √úber 1000 ausstehende Bestellungen, denen in der WHMCS-Abrechnung noch kein Status zugewiesen wurde .  Vermutlich?  Ja, das ist es.  Sie fragten mich - kann ich stornieren?  Ich habe "L√∂schen" best√§tigt. <br><br>  Manchmal, trotz der gro√üen Menge an Ressourcen, gibt WHMCS einen 504-Fehler aus, da die Datenerfassung gro√ü ist und einige Prozesse nicht in das zugewiesene Zeitlimit passen, alles erledigt ist und die Abrechnung weiterhin funktioniert, aber hier haben wir keine Verf√ºgbarkeit.  Die Abrechnung und die Website sind nicht mehr verf√ºgbar.  Wir haben den Grund nicht sofort verstanden.  Aber dann wurde ihnen klar.  Die Bestellung f√ºr unsere 2 VPS wurde nicht angenommen (ja, wir haben unsere Bestellung nicht angenommen!) Und wurde daher vom System "storniert", was zum Start des Moduls und zum gleichzeitigen Entfernen von zwei Containern f√ºhrte, die angeblich nicht erstellt, sondern von den Virtuals erstellt wurden unser geliebter VM Manager.  Nachdem unsere Administratoren wie erwartet einen der Knoten betreten hatten, sahen sie das Bild ‚ÄûLebewohl‚Äú: <br><br><img src="https://habrastorage.org/webt/mq/wq/pn/mqwqpnutma-z0kdwsmevoax_tfo.png"><br><br>  Was ist das? Ein Fehler in den WHMCS-Entwicklern, der dazu f√ºhrt, dass nicht akzeptierte Bestellungen entfernt und tats√§chlich mit ihrer VPS-ID erstellt werden, wenn sie storniert werden, oder unsere Dummheit (der Verkaufsabteilung) ist nicht mehr wichtig.  Das Ergebnis war eins - "Abschied von der Website mit Abrechnung."  Das Panel hat sie nur abgewischt.  Und die Administratoren hatten nur eine Frage an uns (Vertrieb): <br><br><blockquote>  Naher erstellt einen Service mit Hauptstandort und Abrechnung. <br>  Und dann t√∂te sie auch zur H√∂lle. </blockquote><br>  Und obwohl wir Backups hatten, auch in zwei geografisch verteilten Regionen, f√ºhlte ich mich unwohl.  Da ich mir √ºber die Aktualit√§t der Backups nicht sicher war, war ich mir nicht sicher, ob unsere Administratoren alles richtig gemacht haben, wie es urspr√ºnglich in diesen vorgeschrieben war.  die Aufgabe, dass die Datenbank tats√§chlich jede Stunde oder √∂fter gesichert wurde und die Daten aktualisiert und mehrere fr√ºhere Versionen von Dateien gespeichert wurden.  Diese Sicherungen f√ºr einige Softwarefehler wurden √ºberhaupt nicht beendet (schlie√ülich habe ich sie pers√∂nlich nicht kontrolliert. Warum sollte ich sicher sein, dass unsere Administratoren sich Sorgen um unsere Daten machen, wenn ich diese Kontrolle erreiche?).  Ein paar negative Gedanken ... Lass das Universum das nicht √ºberleben! <br><br>  Ich hatte bereits den Gedanken, dass es mindestens 1 Stunde oder noch schlimmer keine Transaktionen geben w√ºrde, und ich m√ºsste Kundenzahlungen manuell wiederherstellen, Daten zu fr√ºheren Transaktionen vergleichen und den Kontoinhabern schreiben, dass wir das Konto neu erstellt und daf√ºr bezahlt haben , um uns von der falschen Seite zu zeigen, um eine Benachrichtigung zu senden, dass wir Dummk√∂pfe sind und eine solche Software-Fehlfunktion gemacht haben ... Und wenn es kein neues Backup gibt - dies ist im Allgemeinen eine Pipe, m√ºsste es sehr lang und trostlos sein, um alles wiederherzustellen ... <br><br>  In diesem Fall haben wir eine interne Tabelle, in der viele Hauptdaten manuell dupliziert werden und die von uns aktualisiert wird, wodurch ein Softwarefehler und das Umschreiben falscher Daten vermieden werden.  Trotz der Verf√ºgbarkeit von Backups verwenden wir diese Methode weiterhin.  Schlie√ülich hebt niemand die M√∂glichkeit eines globalen Zvezdets auf. <br><br>  Zum Gl√ºck stellte sich heraus, dass alles nicht so schlimm war, und sogar diese.  ein Spezialist, der ein Problem l√∂sen musste und der zu Beginn ank√ºndigte: <br><br><blockquote>  Der Abend war ein Erfolg, ich danke Ihnen allen. <br>  Ich holte es ab. </blockquote><br>  Trotzdem war der Abend ein Erfolg.  Da urspr√ºnglich die L√∂sung f√ºr die Verwendung von lvm und eines neuen virtuellen Containers noch nicht erstellt worden war, war es m√∂glich, die tats√§chlichen Daten wiederherzustellen, obwohl mit einem Tanz mit einem Tamburin: <br><br><blockquote>  Alles √ºber das Dienstprogramm lvm stellte mit seinen Befehlen die virtuelle Volume-Gruppe und dann die virtuelle wieder her, aktivierte dann die Partition, stellte sie in den linken Ordner, erstellte den Server und legte die Daten dort ab.  Es war auf andere Weise m√∂glich, aber diese Option war in unserem Fall die schnellste + Besonderheit der Einstellungen des virtuellen Servers, f√ºr die jeder seinen eigenen RAID hat. </blockquote><br>  Welche Schlussfolgerungen werden gezogen?  Redundanz und Redundanz sollten die Schwachstellenabrechnung und das d√ºmmste Entwicklungsszenario umfassen, in dem alles, auch Backups, zerst√∂rt werden k√∂nnen.  Wir haben nicht gelitten und keine gro√üen Verluste erlitten, nur weil die Daten nicht vollst√§ndig gel√∂scht wurden.  Wenn eine Wiederherstellung aus Sicherungen erforderlich ist, gehen Transaktionen pro Stunde und Arbeitszeit erheblich verloren.  Es schien uns, dass die Wahrscheinlichkeit, dass Backups bei der Verwendung eines Geoclusters n√ºtzlich sein k√∂nnten, minimal ist - wir haben uns geirrt.  Wir haben nicht ber√ºcksichtigt, dass es m√∂glich ist, beide Server gleichzeitig zu l√∂schen und dass wir die Server nicht l√∂schen werden, aber wir. <br><br>  Es ist immer ein von Ihrem System unabh√§ngiger externer Speicher mit Zugriff erforderlich, vorzugsweise nur √ºber einen Code, der ebenfalls reserviert ist, um sicherzustellen, dass die Daten nicht verloren gehen.  Im Moment denke ich trotz des Vorhandenseins von Backups in unserer Infrastruktur in zwei Regionen ernsthaft √ºber die M√∂glichkeit nach, etwas wie Amazon Glacier zu verwenden, obwohl letzteres sehr teuer ist.  Laut den Administratoren ist dort alles nur in Bezug auf Marketing in Ordnung, aber wenn Sie anfangen, es zu verwenden, werden Sie mit der Tatsache konfrontiert, dass die L√∂sung ziemlich teuer ist, weil Sie f√ºr jede Anfrage und jede Datei bezahlen m√ºssen, die sehr interessant als ihre aws-cli-Anwendung angesehen wird, insbesondere wenn Daten m√ºssen wiederhergestellt werden.  K√ºrzlich hat ein Kunde aus Gro√übritannien darum gebeten, dort eine Reservierung einzurichten. Nach einigen Monaten der Nutzung lehnte er dies ab - es stellte sich als sehr teuer heraus.  Trotzdem m√ºssen wir herausfinden, was teurer ist.                 ‚Äî   .    ‚Äî   ,   ,       .        ,     . <br><br> ,     ‚Äî     ,     ,  ,     .       , ,  ,   ,         ,       . <br><br> PS   ,   (  ,  EST ).    ,  ,    . ,    -      .         ,      ,    . ,    ‚Äî   ,     .       .       ! <br><br>   . <br><br> <b>VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps     </b>      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> ,  30%    VPS  , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . <br><br>  <b>Dell R730xd 2 mal g√ºnstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgeb√§udes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern f√ºr 9.000 Euro f√ºr einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424063/">https://habr.com/ru/post/de424063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424051/index.html">Das Clean Programmer Manifest oder Robert Martins Short Code Book Summary</a></li>
<li><a href="../de424053/index.html">MicroSD-Serie aus einer leeren Leinwand</a></li>
<li><a href="../de424057/index.html">Integration von Webanwendungen in Spring Cloud Contract</a></li>
<li><a href="../de424059/index.html">Highlights #GitLabLive vom 20. September 2018</a></li>
<li><a href="../de424061/index.html">F√ºnf Jahre sp√§ter wurde die n√§chste Version von DOSBox unter der Nummer 0.74-2 ver√∂ffentlicht</a></li>
<li><a href="../de424065/index.html">Firefox installiert Erweiterungen auf Ihren Ger√§ten, um Daten ohne Ihr Wissen zu erfassen ... erneut</a></li>
<li><a href="../de424069/index.html">iFixit: iPhone XS und XS Max - fast exakte Kopien des iPhone X mit Wartbarkeit 6 von 10</a></li>
<li><a href="../de424071/index.html">Theorie des Gl√ºcks. Thermodynamik der Klassenungleichheit</a></li>
<li><a href="../de424073/index.html">Remotecodeausf√ºhrung in Microsoft JET Database Engine</a></li>
<li><a href="../de424077/index.html">Frankreich fordert, das ‚ÄûRecht auf Vergessen‚Äú global zu machen - was es beeinflussen kann</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>