<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèø üî¥ üë©üèø‚Äçüé® Qui scanne Internet. Il est temps de forger du fer üçé „Ä∞Ô∏è üë∂üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je ne veux pas abandonner le titre. Apr√®s tout, il accomplit sa t√¢che - attire l'attention. Je vous demande sinc√®rement de ne pas √™tre en col√®re si le...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qui scanne Internet. Il est temps de forger du fer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415473/"> Je ne veux pas abandonner le titre.  Apr√®s tout, il accomplit sa t√¢che - attire l'attention.  Je vous demande sinc√®rement de ne pas √™tre en col√®re si le contenu de l'article n'a pas r√©pondu √† vos attentes.  C'est le moment.  "De tels documents," ont-ils dit, "vous devez publier sur des forums pour amateurs, et sur Habr seul le public informatique tr√®s intelligent parle de choses que vous n'avez jamais besoin de comprendre et que vous n'avez pas besoin d'essayer de comprendre."  Cependant, gloire √† Habru!  Il est assez d√©mocratique. <br><br>  Quelque chose m'a attrap√© sur le sujet de la s√©curit√© du r√©seau en termes d'analyse du trafic r√©seau et de d√©tection de l'activit√© r√©seau non autoris√©e (ci-apr√®s d√©nomm√©e NSA). <br><a name="habracut"></a><br>  Aspects de la NSA qui m'int√©ressent: <br><br><ul><li>  analyse non autoris√©e des ressources (ports, cibles Web) du r√©seau prot√©g√© (ci-apr√®s - AP) √† partir d'un r√©seau ouvert (ci-apr√®s - OS); </li><li>  - trafic non autoris√© de / vers AP.  Il s'agit d'une activit√© r√©seau ind√©pendante d'applications; </li><li>  insertion non autoris√©e de contenu inappropri√© (ci-apr√®s - NK).  Il s'agit de publicit√©, de contenu douteux. </li><li>  Types connus d'attaques de r√©seau (ci-apr√®s - CA). </li></ul><br>  Ce qui ne m'int√©resse pas jusqu'√† pr√©sent: tout ce qui ne concerne pas le r√©seau.  Cette protection anti-virus concerne directement les postes de travail et serveurs, le courrier ind√©sirable, le piratage de mot de passe, etc.  etc. <br><br>  Pourquoi ai-je d√©cid√© de r√©inventer la roue?  Apr√®s tout, il y a beaucoup de fer et de logiciels qui semblent remplir les m√™mes fonctions et ne semblent pas mauvais.  Mais voici la question: nous d√©pensons beaucoup d'argent pour les superpuissances hyperconverg√©es de la prochaine g√©n√©ration, mais cela n'a aucun sens.  Une mise √† jour est arriv√©e et a √©chou√© sur tous les PC.  Les utilisateurs sont assis avec les droits des administrateurs, piquent les annonces dans les navigateurs et attrapent les ransomwares.  "Oh, nous sommes ferm√©s aujourd'hui pour des raisons techniques", a d√©clar√© le propri√©taire de l'entreprise.  Les administrateurs lib√®rent un nouveau serveur sur le r√©seau pour mettre √† jour avec tous les ports ouverts, il est imm√©diatement "mis √† jour comme il se doit".  Et puis cela commence √† ralentir le r√©seau, le domaine tombe dans les spammeurs et autres d√©lices de la vie informatique.  Eh bien, les entreprises essaient de payer les administrateurs pour qu'ils bougent.  Ils bougent, mais pas pour longtemps - ils s'y habituent.  Tout le monde sait que les incidents informatiques se produisent toujours soudainement comme l'hiver pour les services publics.  Quant au secteur public, alors ici, comme d'habitude - "des imb√©ciles et des routes".  D'une part, il y a d'√©normes d√©penses pour la ¬´modernisation du r√©seau¬ª, l'achat d'√©quipements co√ªteux, qui ne peuvent que provoquer une suspicion raisonnable de coupes budg√©taires.  D'un autre c√¥t√©, un faible salaire pour les informaticiens, ce qui conduit √† un roulement du personnel et √† un faible niveau global d'administrateurs.  En cons√©quence, nous avons un √©quipement co√ªteux et un √©tudiant qui ne sait pas comment, ne sait pas et ne veut pas savoir quoi faire avec cela.  Autrement dit, le probl√®me de s√©curit√© n'est pas li√© au mat√©riel.  Le facteur humain est ce qui d√©termine la s√©curit√© globale des syst√®mes. <br><br>  Pourquoi suis-je?  De plus, il sera int√©ressant pour chaque propri√©taire d'entreprise d'avoir un ¬´administrateur¬ª qui s'acquitte √©galement de ses fonctions 24h / 24 et 7j / 7 pratiquement ¬´pour la nourriture¬ª. <br><br>  C'est exactement le genre d '¬´administrateur de fer¬ª que je veux mettre en ≈ìuvre. <br><br>  J'ai d√©cid√© de commencer par la s√©curit√© du r√©seau.  Limiter ou exclure une influence ext√©rieure sur le PA, c'est d√©j√† 50% du cas. <br><br>  Donc, le concept g√©n√©ral: <br><br>  Les principales conditions initiales (id√©ales?): <br><br><ol><li>  Faible co√ªt  Le morceau de fer dans la version de base devrait √™tre abordable pour toutes les cat√©gories, d'un utilisateur individuel avec un PC et plus. </li><li>  Un morceau de fer ne doit pas n√©cessiter l'attention constante d'un personnel qualifi√© pour s'acquitter de ses fonctions.  R√©glez et oubliez. </li><li>  Le morceau de fer doit √™tre facilement remplac√©, sans n√©cessiter de configuration suppl√©mentaire. </li><li>  Le morceau de fer doit √™tre interactif - informer un cercle pr√©d√©termin√© de personnes sur les menaces actuelles ou suspect√©es, leur √©tat, et prendre des d√©cisions de mani√®re ind√©pendante sur la base d'une analyse de la situation.  Autrement dit, ce n'est pas l'administrateur qui doit constamment consulter le journal, mais l'Iron doit signaler que quelque chose s'est mal pass√© et ce qu'il a fait pour le r√©parer ¬´mal¬ª. </li><li>  L'interface d'interaction avec l'Iron doit √™tre simple et compr√©hensible m√™me pour un informaticien d√©butant.  Pas de consoles ni d'expressions r√©guli√®res.  Laissez le ciel aux oiseaux. </li></ol><br>  Cela concerne les objectifs strat√©giques.  Maintenant de retour sur terre.  Soit Zhelezka sera compos√© de collecteurs collectant des informations et du Centre d'analyse et de prise de d√©cision (ci-apr√®s - CACR).  Il y a quelques analogies avec Smart Home, IoT.  Que ce soit "Smart Octopus" (fu, d√©go√ªtant).  Mais pourquoi pas?  On dirait apr√®s tout - les collectionneurs sont des tentacules, et le cerveau est DACR <br><br>  Il existe plusieurs options pour DACR: <br><br><ol><li>  Int√©gr√© - Collecteur et DAC sur la m√™me pi√®ce de fer. </li><li>  Local - travailler avec une liste limit√©e d'√©quipements.  Disons au sein d'une m√™me organisation ou d'un m√™me territoire. </li><li>  Global - une ressource Internet qui fonctionne avec les collectionneurs sur Internet. </li><li>  R√©gional (option) - pour r√©partir la charge du Global. </li></ol><br>  Tous les DACA de niveau inf√©rieur peuvent interagir avec le DAC mondial, qui stocke la base de donn√©es la plus compl√®te des fonctionnalit√©s NSA. <br><br>  La premi√®re action.  Nous cr√©ons un CARP-Collector int√©gr√© pour surveiller la NSA. <br><br>  Qu'est-ce que le collecteur NSA au stade actuel?  Il s'agit essentiellement d'un ordinateur Linux plac√© dans un package 1U.  Le collecteur poss√®de 3 interfaces r√©seau.  Deux est activ√© sur le r√©seau.  Une interface de gestion.  DAC est situ√© sur la m√™me plate-forme. <br><br>  Voici le sch√©ma de c√¢blage actuel: <br><br><img src="https://habrastorage.org/webt/w4/z-/hl/w4z-hl4rnoivpecchv--cjfsftw.png" alt="image"><br><br>  Toute interaction de collecteur externe se fait uniquement via l'interface de contr√¥le.  Pour le trafic Internet, le collecteur est transparent. <br><br>  Puisque nous d√©veloppons maintenant l'algorithme de base pour ce stand, cela suffit.  Bien s√ªr, le produit fini aura des outils mat√©riels et de r√©silience plus avanc√©s. <br><br>  Que fait le collectionneur?  Collecte des parties donn√©es du trafic.  En-t√™tes et, si n√©cessaire, contenu de l'emballage.  Ceci est configurable par les r√®gles.  Cela n'a aucun sens de collecter tout le trafic.  Les donn√©es de trafic pour une courte p√©riode (en fonction de la charge et du volume du disque de travail, semaine-mois) sont stock√©es sur le collecteur.  Ainsi, le collecteur peut agir comme un remplacement simultan√© du syst√®me d'affichage source, collecteur et statistiques du type Netflow.  Bien s√ªr, comme le collecteur contient des informations sur chaque session, il n'est pas destin√© √† stocker des statistiques pendant de longues p√©riodes.  Si cela est n√©cessaire, les statistiques peuvent √™tre transf√©r√©es sur le stockage r√©seau ou sur un lecteur mapp√© sous forme de fichiers, et √† l'avenir, analys√©es et affich√©es au moyen de DAC. <br><br>  Le collectionneur n'est pas stupide.  Il analyse le trafic en fonction des r√®gles d√©finies par le DAC et envoie des informations au DAC en cas de d√©clencheurs de filtre d√©finis √† partir du DAC.  De plus, le collecteur filtre seul le trafic. <br><br>  Quelque chose comme √ßa. <br><br>  En travaillant sur le Collector, l'id√©e est venue de le charger avec d'autres fonctions.  Je ne parlerai pas de toutes les fonctions pr√©vues.  Mais il existe un souhait d'int√©grer le serveur collecteur d'interruptions SNMP et le collecteur dans le collecteur SYSLOG.  Cela est n√©cessaire, notamment pour analyser la corr√©lation de certains √©v√©nements. <br><br>  En tant que sous-produit, produit commercial, quelle est la mauvaise chose √† dire, un morceau de mat√©riel qui peut, hors de la bo√Æte, g√©rer le trafic, collecter les journaux, les statistiques du r√©seau, les interruptions et afficher tout cela de mani√®re simple et compr√©hensible avec notification des √©v√©nements? <br><br>  Le projet est ouvert √† la participation. <br><br>  Si quelqu'un a ses propres d√©veloppements int√©ressants sur le sujet de SYSLOG, √©crivez SNMP au PM, cr√©ez un produit commun. <br><br>  Conditions de base: <br><br><ol><li>  Pas de ¬´bas√© sur ...¬ª, seulement le leur, unique, et s'il y a un frontal, il est d√©finitivement convivial!  Pour que vous puissiez travailler sans clavier.  Pas de freins ni de courbes Java.  Zabbix et Logstash vont √©galement √† Kibane.  C, Python, Perl, PHP, HTML, CSS, JS sont les bienvenus (propre, sans trame de travail. M√™me sans jQuery, oui). </li><li>  Orientation uniquement vers les OS et navigateurs modernes.  Aucune compatibilit√© MS-DOS sur IBM XT et Internet Explorer 1.0. </li><li>  Linux uniquement. </li></ol><br>  Les id√©es d'affaires sont les bienvenues, mais ce n'est pas le but.  √Ä ce stade, des id√©es techniques, du cerveau et du temps sont n√©cessaires.  Si un morceau de fer digne, la fa√ßon de d√©poser et de vendre sera d√©cid√©e par lui-m√™me. <br><br>  Pour une communaut√© tr√®s intelligente, je propose un puzzle du collectionneur (lui-m√™me n'a pas encore d√©cid√©): <br>  Le circuit initial est comme sur la figure ci-dessus.  Le routeur est connect√© au FAI via PPPoE et l'adresse 91.122.49.173 dessus.  L'adresse est d√©j√† mise en √©vidence dans les articles pr√©c√©dents.  Mais c'est bon pour les tests - il y a un int√©r√™t constant. <br><br>  Voici ce que le collectionneur a montr√©: <br><br><img src="https://habrastorage.org/webt/ei/os/ad/eiosad_uscig1fx4om7ufvyq0sk.png" alt="image"><br><br>  Le marqueur rouge est un exemple de NSA.  Dans ce cas, le signe est que ni l'adresse source ni l'adresse de destination n'appartiennent √† l'AP.  UDP, port de destination 5000. Le sujet des chevaux de Troie est bien connu.  Mais l'AP n'a qu'une seule adresse PAT externe (91.122.49.173).  Autrement dit, je m'attends √† ce que dans le canal ISP-Router, je ne voie que les paquets dont l'adresse source ou l'adresse de destination est l'adresse externe du routeur. <br><br>  Voyons l'histoire d'aujourd'hui: <br><br><img src="https://habrastorage.org/webt/35/ma/tn/35matn1noo9jpzhinhkc_utfuzg.png" alt="image"><br><br>  Ici, nous voyons que, selon le m√™me sch√©ma, les paquets avec une adresse source, mais avec des adresses de destination diff√©rentes transitent par notre collecteur. <br><br>  Comment ce trafic arrive je n'ai pas encore compris.  Si quelqu'un a des id√©es, veuillez √©crire dans les commentaires.  Rencontrant une telle NSA, le collecteur √©tablit un pi√®ge sur ce trafic et collecte des informations plus d√©taill√©es sur sa prochaine apparition, puis l'interdit.  Bien s√ªr, ce n'est qu'un cas.  Pour moi, c'est inexplicable pour l'instant; <br><br>  Cordialement <br>  R_voland. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr415473/">https://habr.com/ru/post/fr415473/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr415463/index.html">HPE Superdome Flex: un nouveau niveau de performances et de mise √† l'√©chelle</a></li>
<li><a href="../fr415465/index.html">Combien de vies ont les √©lectrolytes, les vieux v√™tements et les bouchons de bouteilles?</a></li>
<li><a href="../fr415467/index.html">Concours de programmation: commerce (annonces)</a></li>
<li><a href="../fr415469/index.html">Adblock pour la radio</a></li>
<li><a href="../fr415471/index.html">Extension PHP et Kotlin Native. Premi√®re partie, na√Øve</a></li>
<li><a href="../fr415475/index.html">Analyse du code h√©rit√© en cas de perte du code source: √† faire ou √† ne pas faire?</a></li>
<li><a href="../fr415477/index.html">Surveillance du fonctionnement des syst√®mes r√©sidentiels de banlieue: les premiers pas vers une maison intelligente</a></li>
<li><a href="../fr415481/index.html">Le Venezuela bloque les connexions directes avec Tor et le trafic obscurci vers les ponts</a></li>
<li><a href="../fr415483/index.html">7 erreurs courantes lors de la comparaison de vos serveurs avec le cloud</a></li>
<li><a href="../fr415485/index.html">Drive Kingston A1000 - une ambulance pour l'ordinateur portable?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>