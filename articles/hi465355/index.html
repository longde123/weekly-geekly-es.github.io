<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯС╝ЁЯП╝ ЁЯСЙЁЯП╗ ЁЯТГЁЯП┐ рдЬрдм 'a' 'a' рдХреЗ рдмрд░рд╛рдмрд░ рдирд╣реАрдВ рд╣реИред рдПрдХ рд╣реИрдХ рдХреЗ рдорджреНрджреЗрдирдЬрд░ ЁЯНЩ ЁЯХ┤ЁЯП╗ ЁЯзФЁЯП┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдПрдХ рдЕрдкреНрд░рд┐рдп рдХрд╣рд╛рдиреА рдореЗрд░реЗ рдПрдХ рдорд┐рддреНрд░ рдХреЛ рд╣реБрдИред рд▓реЗрдХрд┐рди рдЬрд╣рд╛рдВ рддрдХ тАЛтАЛрдпрд╣ рдорд┐рдЦрд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдЕрдкреНрд░рд┐рдп рдирд┐рдХрд▓рд╛, рдореЗрд░реЗ рд▓рд┐рдП рдпрд╣ рдЙрддрдирд╛ рд╣реА рджрд┐рд▓рдЪрд╕реНрдк рдерд╛ред 

 рдореБрдЭреЗ рдХрд╣рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдореЗрд░рд╛ рджреЛрд╕реНрдд рдХ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЬрдм 'a' 'a' рдХреЗ рдмрд░рд╛рдмрд░ рдирд╣реАрдВ рд╣реИред рдПрдХ рд╣реИрдХ рдХреЗ рдорджреНрджреЗрдирдЬрд░</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465355/"> рдПрдХ рдЕрдкреНрд░рд┐рдп рдХрд╣рд╛рдиреА рдореЗрд░реЗ рдПрдХ рдорд┐рддреНрд░ рдХреЛ рд╣реБрдИред  рд▓реЗрдХрд┐рди рдЬрд╣рд╛рдВ рддрдХ тАЛтАЛрдпрд╣ рдорд┐рдЦрд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдЕрдкреНрд░рд┐рдп рдирд┐рдХрд▓рд╛, рдореЗрд░реЗ рд▓рд┐рдП рдпрд╣ рдЙрддрдирд╛ рд╣реА рджрд┐рд▓рдЪрд╕реНрдк рдерд╛ред <br><br>  рдореБрдЭреЗ рдХрд╣рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдореЗрд░рд╛ рджреЛрд╕реНрдд рдХрд╛рдлреА <i>UNIX</i> рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╣реИ: рд╡рд╣ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕реНрд╡рдпрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, <i>mysql</i> , <i>php</i> рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд╕рд░рд▓рддрдо <i>nginx</i> рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИред <br>  рдФрд░ рдЙрд╕рдХреЗ рдкрд╛рд╕ рдПрдХ рджрд░реНрдЬрди рдФрд░ рдбреЗрдврд╝ рд╕рд╛рдЗрдЯ рд╣реИрдВ рдЬреЛ рдирд┐рд░реНрдорд╛рдг рдЙрдкрдХрд░рдг рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рд╣реИрдВред <br><br>  рдЗрди рд╕рд╛рдЗрдЯреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ, рдЪреЗрдирд╕реЙ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд, рд╢реАрд░реНрд╖ рдЦреЛрдЬ рдЗрдВрдЬрдиреЛрдВ рдореЗрдВ рдХрд╕рдХрд░ рдмреИрдарддрд╛ рд╣реИред  рдпрд╣ рд╕рд╛рдЗрдЯ рдПрдХ рдЧреИрд░-рд▓рд╛рднрдХрд╛рд░реА рд╕рдореАрдХреНрд╖рдХ рд╣реИ, рд▓реЗрдХрд┐рди рдХрд┐рд╕реА рдиреЗ рдЙрд╕рдХреЗ рдЧрд▓реЗ рдореЗрдВ рдЖрдХрд░ рдЙрд╕ рдкрд░ рд╣рдорд▓рд╛ рдХрд┐рдпрд╛ рд╣реИред  рдпрд╛ рддреЛ <i>DDoS</i> , рдлрд┐рд░ рдХреНрд░реВрд░ рдмрд▓, рдлрд┐рд░ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ рдЕрд╢реНрд▓реАрд▓ рд▓рд┐рдЦреЗрдВрдЧреЗ рдФрд░ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдФрд░ ILV рдХреЛ рдЧрд╛рд▓рд┐рдпрд╛рдБ рднреЗрдЬреЗрдВрдЧреЗред <br>  рдЕрдЪрд╛рдирдХ, рд╕рдм рдХреБрдЫ рд╢рд╛рдВрдд рд╣реЛ рдЧрдпрд╛ рдФрд░ рдпрд╣ рдиреАрд░рд╕рддрд╛ рдЕрдЪреНрдЫреА рдирд╣реАрдВ рдереА, рдФрд░ рд╕рд╛рдЗрдЯ рдзреАрд░реЗ-рдзреАрд░реЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреА рд╢реАрд░реНрд╖ рд░реЗрдЦрд╛рдУрдВ рдХреЛ рдЫреЛрдбрд╝рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/528/5d5/582/5285d55827ddf5cb5705b364a417828f.png" alt="рдЫрд╡рд┐"><br><br>  рдпрд╣ рдПрдХ рдХрд╣рд╛рд╡рдд рдереА, рдлрд┐рд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдмрд╛рдЗрдХ рд╣реАред <br><br>  рдлреЛрди рдмрдЬрдиреЗ рдкрд░ рд╕рдордп рдиреАрдВрдж рдХреЗ рдХрд░реАрдм рдЖ рд░рд╣рд╛ рдерд╛: тАЬрд╕рд╛рдиреНрдпрд╛, рддреБрдо рдореЗрд░реЗ рд╕рд░реНрд╡рд░ рдХреЛ рдирд╣реАрдВ рджреЗрдЦреЛрдЧреА?  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЙрдиреНрд╣реЛрдВрдиреЗ рдореБрдЭреЗ рд╣реИрдХ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ, рдореИрдВ рдЗрд╕реЗ рд╕рд╛рдмрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛, рд▓реЗрдХрд┐рди рднрд╛рд╡рдирд╛ рдХреЛ рддреАрд╕рд░реЗ рд╣рдлреНрддреЗ рднреА рдирд╣реАрдВ рдЫреЛрдбрд╝рд╛ рд╣реИред  рд╢рд╛рдпрдж рдореБрдЭреЗ рд╕рд┐рд░реНрдл рд╡реНрдпрд╛рдореЛрд╣ рдХрд╛ рдЗрд▓рд╛рдЬ рдХрд░рд╡рд╛рдирд╛ рд╣реИ? тАЭ <br><a name="habracut"></a><br>  рдЕрдЧрд▓реЗ рдЖрдзреЗ рдШрдВрдЯреЗ рдХреА рдЪрд░реНрдЪрд╛ рд╣реБрдИ рдЬрд┐рд╕реЗ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><ul><li>  рдкреНрд░рдЬрдирди рднреВрдорд┐ рдХрд╛рдлреА рдЙрдкрдЬрд╛рдК рдереА; </li><li>  рдкрдЯрд╛рдЦрд╛ рд╕реБрдкрд░рдпреБрд╕рд░ рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ; </li><li>  рд╣рдорд▓рд╛ (рдЕрдЧрд░ рдпрд╣ рд╣реБрдЖ) рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЗрд╕ рд╕рд╛рдЗрдЯ рдХреЛ рд▓рдХреНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛; </li><li>  рд╕рдорд╕реНрдпрд╛ рдХреНрд╖реЗрддреНрд░ рддрдп рд╣реЛ рдЧрдП рд╣реИрдВ рдФрд░ рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ рдХрд┐ рдкреИрда рдХрд╛ рддрдереНрдп рдХреНрдпрд╛ рдерд╛; </li><li>  рд╣реИрдХрд┐рдВрдЧ рд╕рд╛рдЗрдЯ рдХреЛрдб рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдирд╣реАрдВ рдЫреВ рд╕рдХрддрд╛ рд╣реИред </li></ul><br>  рдЖрдЦрд┐рд░реА рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдХреЗ рдмрд╛рд░реЗ рдореЗрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7f/a85/93d/f7fa8593d835c577dd321eec9e30e2e4.png" alt="рдЫрд╡рд┐"><br><br>  рджреБрдирд┐рдпрд╛ рдореЗрдВ рд╕рд┐рд░реНрдл рд╡реНрд╣рд╛рдЗрдЯ рдЖрдИрдкреА рдлреНрд░рдВрдЯреЗрдВрдб рджрд┐рдЦ рд░рд╣рд╛ рд╣реИред  Http (s) рдХреЛ рдЫреЛрдбрд╝рдХрд░ рдмреИрдХрдПрдВрдб рдФрд░ рдлреНрд░рдВрдЯреЗрдВрдб рдХреЗ рдмреАрдЪ рдХреЛрдИ рд╡рд┐рдирд┐рдордп рдирд╣реАрдВ рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ / рдкрд╛рд╕рд╡рд░реНрдб рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реИрдВ, рдХреБрдВрдЬрд┐рдпреЛрдВ рдХрд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЧреНрд░реЗ рдкрддреЗ рдкрд░, 80/443 рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд╕рднреА рдкреЛрд░реНрдЯ рдмрдВрдж рд╣реИрдВред  рд╡реНрд╣рд╛рдЗрдЯ рдЖрдИрдкреА рдмреИрдХрдПрдВрдб рдХреЗрд╡рд▓ рджреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рди рдкрд░ рдорд╛рдЗрдХрд▓ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рднрд░реЛрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВред <br><br>  <i>рдбреЗрдмрд┐рдпрди 9</i> рд╕рд╛рдордиреЗ рдХреЗ рдЫреЛрд░ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рд╣реИ рдФрд░ рдХреЙрд▓ рдХреЗ рд╕рдордп рддрдХ рд╕рд┐рд╕реНрдЯрдо рдмрд╛рд╣рд░реА рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рджреНрд╡рд╛рд░рд╛ рджреБрдирд┐рдпрд╛ рд╕реЗ рдЕрд▓рдЧ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  "рдареАрдХ рд╣реИ, рдореБрдЭреЗ рдкрд╣реБрдБрдЪ рджреЛ," рдореИрдВ рдПрдХ рдШрдВрдЯреЗ рдХреЗ рд▓рд┐рдП рдиреАрдВрдж рдХреЛ рд╕реНрдердЧрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд░рддрд╛ рд╣реВрдВред  "рдореИрдВ рдЕрдкрдиреА рдЖрдБрдЦреЛрдВ рд╕реЗ рджреЗрдЦреВрдБрдЧрд╛ред" <br><br>  рдмрд╛рдж рдореЗрдВ: <br><br><pre><code class="plaintext hljs">$ grep -F PRETTY_NAME /etc/*releas* PRETTY_NAME="Debian GNU/Linux 9 (stretch)" $ `echo $SHELL` --version GNU bash, version 4.4.12(1)-release (x86_64-pc-linux-gnu) $ nginx -v nginx version: nginx/1.10.3 $ gdb --version GNU gdb (Debian 8.2.1-2) 8.2.1</code> </pre> <br><h2>  рд╕рдВрднрд╡ рд╣реИрдХ рдХреА рддрд▓рд╛рд╢ рдореЗрдВ </h2><br>  рдореИрдВ рд╕рд░реНрд╡рд░ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реВрдВ, рдкрд╣рд▓реЗ <i>рдмрдЪрд╛рд╡-рдореЛрдб рдореЗрдВ</i> ред  рдореИрдВ рдбрд┐рд╕реНрдХ рдорд╛рдЙрдВрдЯ рдХрд░рддрд╛ рд╣реВрдВ, <i>рдСрд░реНрдЯ-</i> рд▓реЙрдЧреНрд╕, <i>рдЗрддрд┐рд╣рд╛рд╕</i> , рд╕рд┐рд╕реНрдЯрдо рд▓реЙрдЧреНрд╕, рдЖрджрд┐ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдлреНрд▓рд┐рдк рдХрд░рддрд╛ рд╣реВрдВ, рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ рддреЛ, рдлрд╝рд╛рдЗрд▓ рдирд┐рд░реНрдорд╛рдг рддрд┐рдерд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореИрдВ рд╕рдордЭрддрд╛ рд╣реВрдВ рдХрд┐ рдЙрд╕рдХреЗ рдкреАрдЫреЗ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдкрдЯрд╛рдЦрд╛ "рдкрд╕реАрдирд╛" рд╣реЛрдЧрд╛, рдФрд░ рдЦреБрдж рдХреЛ рдЦреЛрдЬрддреЗ рд╕рдордп рдореАрд╢рд╛ рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрд╛рдирдмреВрдЭрдХрд░ "рд░реМрдВрдж" рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br>  рдореИрдВ рд╕рд╛рдорд╛рдиреНрдп рдореЛрдб рдореЗрдВ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реВрдВ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЕрднреА рддрдХ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдХреНрдпрд╛ рджреЗрдЦрдирд╛ рд╣реИ, рдореИрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░ рд░рд╣рд╛ рд╣реВрдВред  рд╡рд╣ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ <i>рдирдЧреНрдиреЗрдХреНрд╕</i> рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рджреГрд╢реНрдпрдкрдЯрд▓ рдкрд░ рдЙрдирдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИред <br>  рд╡рд┐рдиреНрдпрд╛рд╕ рдЫреЛрдЯреЗ рд╣реИрдВ, рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдПрдХ рджрд░реНрдЬрди рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╕рдВрд░рдЪрд┐рдд рд╣реИрдВ, рдореИрдВ рдмрд╕ <i>рдмрд┐рд▓реНрд▓реА рдХреЗ</i> рджреНрд╡рд╛рд░рд╛ рдЙрдиреНрд╣реЗрдВ рдмрд╛рд░реА-рдмрд╛рд░реА рд╕реЗ рджреЗрдЦрддрд╛ рд╣реВрдВред  рд╕рдм рдХреБрдЫ рд╕рд╛рдл-рд╕реБрдерд░рд╛ рд▓рдЧ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк рдХрднреА рднреА <i>рдЗрд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓</i> рдирд╣реАрдВ рд╣реБрдП <i>рд╣реИрдВ</i> , рдореИрдВ рдкреВрд░реА рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рдХрд░реВрдВрдЧрд╛: <br><br><pre> <code class="plaintext hljs">$ nginx -T nginx: the configuration file /usr/local/etc/nginx/nginx.conf syntax is ok nginx: configuration file /usr/local/etc/nginx/nginx.conf test is successful</code> </pre><br>  рдореБрдЭреЗ рд╕рдордЭ рдирд╣реАрдВ рдЖрдпрд╛: "рд╕реВрдЪреА рдХрд╣рд╛рдБ рд╣реИ?" <br><br><pre> <code class="plaintext hljs">$ nginx -V nginx version: nginx/1.10.3 TLS SNI support enabled configure arguments: --with-cc-opt='-g -O2' --with-ld-opt='-Wl,-z,relro -Wl,-z,now' --prefix=/usr/share/nginx --conf-path=/etc/nginx/nginx.conf --http-log-path=/var/log/nginx/access.log --error-log-path=/var/log/nginx/error.log --lock-path=/var/lock/nginx.lock --pid-path=/run/nginx.pid --modules-path=/usr/lib/nginx/modules --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --with-debug --with-pcre-jit --with-ipv6 --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_auth_request_module --with-http_v2_module --with-http_dav_module --with-http_slice_module --with-threads --with-http_addition_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_sub_module --with-stream=dynamic --with-stream_ssl_module --with-mail=dynamic --with-mail_ssl_module</code> </pre><br>  рджреВрд╕рд░реЗ рдХреЛ рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рдХреНрд╡реЗрд╢реНрдЪрди рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реИ: "рдирдВрдЧреЗрдХреНрд╕ рдХрд╛ рдЗрддрдирд╛ рдкреБрд░рд╛рдирд╛ рд╡рд░реНрдЬрди рдХреНрдпреЛрдВ?" <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдорд╛рдирдирд╛ тАЛтАЛрд╣реИ рдХрд┐ рд╕рдВрд╕реНрдХрд░рдг рддрд╛рдЬрд╛ рд╕реНрдерд╛рдкрд┐рдд рд╣реИ: <br><br><pre> <code class="plaintext hljs">$ dpkg -l nginx | grep "[n]ginx" ii nginx 1.14.2-2+deb10u1 all small, powerful, scalable web/proxy server</code> </pre><br>  рдореИрдВ рдлреЛрди рдХрд░ рд░рд╣рд╛ рд╣реВрдБ: <br>  - рдорд┐рд╢рд╛, рддреБрдо <i>рдирдЧреАрдиреЗ</i> рдХреНрдпреЛрдВ рдмрдирд╛ рд░рд╣реА рд╣реЛ? <br>  - рдареАрдХ рд╣реИ, рдореИрдВ рдпрд╣ рднреА рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИ! <br>  - рдареАрдХ рд╣реИ, рдареАрдХ рд╣реИ, рд╕реЛ рдЬрд╛рдУ ... <br><br>  <i>Nginx рдХреЛ</i> рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ <i>рдЖрд╢реНрд╡рд╕реНрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</i> рдФрд░ "-T" рдХреЗ рд▓рд┐рдП рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рд╕реВрдЪреА рдПрдХ рдХрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдЫрд┐рдкреА рд╣реБрдИ рд╣реИред  рд╣реИрдХрд┐рдВрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреЛрдИ рд╕рдВрджреЗрд╣ рдирд╣реАрдВ рд╣реИ рдФрд░ рдЖрдк рдмрд╕ рдЗрд╕реЗ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ (рдЪреВрдВрдХрд┐ рдорд┐рд╢рд╛ рдиреЗ рд╕рд░реНрд╡рд░ рдХреЛ рдХрд┐рд╕реА рдирдП рдХреЗ рд╕рд╛рде рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИ), рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред <br><br>  рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЪреВрдВрдХрд┐ рдХрд┐рд╕реА рдХреЛ <i>рд░реВрдЯ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░</i> рдорд┐рд▓рд╛ <i>рд╣реИ</i> , рдЗрд╕рд▓рд┐рдП рдпрд╣ рдХреЗрд╡рд▓ <i>рд╕рд┐рд╕реНрдЯрдо рд░реАрдЗрдВрд╕реНрдЯреЙрд▓</i> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╡рд╣рд╛рдВ рдХреНрдпрд╛ рдЦрд░рд╛рдм рдерд╛, рд▓реЗрдХрд┐рди рдЗрд╕ рдмрд╛рд░ рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рдиреЗ рд╕рдкрдиреЗ рдХреЛ рд╣рд░рд╛ рджрд┐рдпрд╛ред  рдХреИрд╕реЗ рдкрддрд╛ рдХрд░реЗрдВ рдХрд┐ рд╡реЗ рд╣рдорд╕реЗ рдХреНрдпрд╛ рдЫрд┐рдкрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рдереЗ? <br><br>  рдЖрдЗрдП рдЯреНрд░реЗрд╕ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ: <br><br><pre> <code class="plaintext hljs">$ strace nginx -T</code> </pre><br>  рд╣рдо рдЯреНрд░реЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреЗрдЦрддреЗ рд╣реИрдВ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рд▓рд╛рдЗрдиреЛрдВ рдПрдХ рд▓рд╛ рдирд╣реАрдВ рд╣реИ <br><br><pre> <code class="plaintext hljs">write(1, "/etc/nginx/nginx.conf", 21/etc/nginx/nginx.conf) = 21 write(1, "... write(1, "\n", 1</code> </pre><br>  рдордЬрд╝реЗ рдХреЗ рд▓рд┐рдП, рдирд┐рд╖реНрдХрд░реНрд╖ рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВ <br><br><pre> <code class="plaintext hljs">$ strace nginx -T 2&gt;&amp;1 | wc -l 264 $ strace nginx -t 2&gt;&amp;1 | wc -l 264</code> </pre><br>  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдХреЛрдб <i>/src/core/nginx.c</i> рдХрд╛ рд╡рд╣ рд╣рд┐рд╕реНрд╕рд╛ <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'t'</span></span>: ngx_test_config = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'T'</span></span>: ngx_test_config = <span class="hljs-number"><span class="hljs-number">1</span></span>; ngx_dump_config = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;</code> </pre><br>  рдлреЙрд░реНрдо рдореЗрдВ рдШрдЯрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛: <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'t'</span></span>: ngx_test_config = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'T'</span></span>: ngx_test_config = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//ngx_dump_config = 1; break;</span></span></code> </pre><br>  рдпрд╛ <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'t'</span></span>: ngx_test_config = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'T'</span></span>: ngx_test_config = <span class="hljs-number"><span class="hljs-number">1</span></span>; ngx_dump_config = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;</code> </pre><br>  рдЗрд╕рд▓рд┐рдП, -T рджреНрд╡рд╛рд░рд╛ рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИред <br><br><h2>  рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рдХреИрд╕реЗ рджреЗрдЦреЗрдВ? </h2><br>  рдпрджрд┐ рдореЗрд░рд╛ рд╡рд┐рдЪрд╛рд░ рд╕рд╣реА рд╣реИ рдФрд░ рд╕рдорд╕реНрдпрд╛ рдХреЗрд╡рд▓ рдЪрд░ <i>ngx_dump_config рдореЗрдВ рд╣реИ,</i> рддреЛ рд╣рдо <i>gdb</i> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рдХреБрдВрдЬреА <i>--wc-cc-opt</i> <i>-g</i> рдореМрдЬреВрдж рд╣реИ рдФрд░ рд╣рдореЗрдВ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝реЗрд╢рди <i>-O2</i> рд╣рдореЗрдВ рдЪреЛрдЯ рдирд╣реАрдВ рдкрд╣реБрдВрдЪрд╛рдПрдЧрд╛ред  рдЙрд╕реА рд╕рдордп рд╕реЗ, рдХреНрдпреЛрдВрдХрд┐ рдореБрдЭреЗ рдирд╣реАрдВ рдкрддрд╛ рдХрд┐ <i>'t' рдорд╛рдорд▓реЗ</i> рдореЗрдВ <i>ngx_dump_config</i> рдХреЛ рдХреИрд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ <i>:,</i> рд╣рдо рдЗрд╕ рдмреНрд▓реЙрдХ рдХреЛ рдХреЙрд▓ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди <i>рдХреЗрд╕ 't'</i> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ <i>:</i> <br><br><div class="spoiler">  <b class="spoiler_title">рдореИрдВ '-T' рдХреЗ рд╕рд╛рде '-t' рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ</b> <div class="spoiler_text">  <i>рдпрджрд┐ (ngx_dump_config)</i> рдмреНрд▓реЙрдХ рд╣реЛ рд░рд╣рд╛ рд╣реИ <i>рддреЛ</i> рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХрд░рдирд╛ <i>(ngx_test_config)</i> : <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ngx_test_config) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ngx_quiet_mode) { ngx_log_stderr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"configuration file %s test is successful"</span></span>, cycle-&gt;conf_file.data); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ngx_dump_config) { cd = cycle-&gt;config_dump.elts; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cycle-&gt;config_dump.nelts; i++) { ngx_write_stdout(<span class="hljs-string"><span class="hljs-string">"# configuration file "</span></span>); (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) ngx_write_fd(ngx_stdout, cd[i].name.data, cd[i].name.len); ngx_write_stdout(<span class="hljs-string"><span class="hljs-string">":"</span></span> NGX_LINEFEED); b = cd[i].buffer; (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) ngx_write_fd(ngx_stdout, b-&gt;pos, b-&gt;last - b-&gt;pos); ngx_write_stdout(NGX_LINEFEED); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  рдмреЗрд╢рдХ, рдпрджрд┐ рдЗрд╕ рднрд╛рдЧ рдореЗрдВ рдХреЛрдб рдмрджрд▓рд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ <i>'T' :,</i> рдореЗрдВ рдирд╣реАрдВ рд╣реИ <i>,</i> рддреЛ рдореЗрд░реА рд╡рд┐рдзрд┐ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧреАред <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Nginx.conf рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ</b> <div class="spoiler_text">  рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдорд╕реНрдпрд╛ рдХреЛ рдЖрдиреБрднрд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдпрд╣ рдкрд╛рдпрд╛ рдЧрдпрд╛ рдХрд┐ рдореИрд▓рд╡реЗрдпрд░ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдлреЙрд░реНрдо рдХрд╛ рдиреНрдпреВрдирддрдо <i>рдирдЧрдиреЗрдХреНрд╕</i> рд╡рд┐рдиреНрдпрд╛рд╕ рдЖрд╡рд╢реНрдпрдХ рд╣реИ: <br><br><pre> <code class="nginx hljs"><span class="hljs-section"><span class="hljs-section">events</span></span> { } <span class="hljs-section"><span class="hljs-section">http</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">include</span></span> /etc/nginx/sites-enabled/*; }</code> </pre><br>  рд╣рдо рд▓реЗрдЦ рдореЗрдВ рд╕рдВрдХреНрд╖рд┐рдкреНрддрддрд╛ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реЗрдВрдЧреЗред <br></div></div><br><div class="spoiler">  <b class="spoiler_title">рдбрд┐рдмрдЧрд░ рдЪрд▓рд╛рдПрдВ</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">$ gdb --silent --args nginx -t Reading symbols from nginx...done. (gdb) break main Breakpoint 1 at 0x1f390: file src/core/nginx.c, line 188. (gdb) run Starting program: nginx -t [Thread debugging using libthread_db enabled] Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1". Breakpoint 1, main (argc=2, argv=0x7fffffffebc8) at src/core/nginx.c:188 188 src/core/nginx.c: No such file or directory. (gdb) print ngx_dump_config=1 $1 = 1 (gdb) continue Continuing. nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful # configuration file /etc/nginx/nginx.conf: events { } http { map $http_user_agent $sign_user_agent { "~*yandex.com/bots" 1; "~*www.google.com/bot.html" 1; default 0; } map $uri $sign_uri { "~*/wp-" 1; default 0; } map :$sign_user_agent:$sign_uri $sign_o { :1:0 o; default ; } map :$sign_user_agent:$sign_uri $sign_a { :1:0 a; default ; } sub_filter_once off; sub_filter '' $sign_o; sub_filter '' $sign_a; include /etc/nginx/sites-enabled/*; } # configuration file /etc/nginx/sites-enabled/default: [Inferior 1 (process 32581) exited normally] (gdb) quit</code> </pre><br></div></div><br>  рдХрджрдо: <br><br><ul><li>  <i>рдореБрдЦреНрдп ()</i> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдПрдХ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд░реЗрдВ </li><li>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдЪрд▓рд╛рдПрдВ </li><li>  рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдорд╛рди рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░реЗрдВ <i>config</i> рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ <i>ngx_dump_config = 1</i> </li><li>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдЬрд╛рд░реА рд░рдЦреЗрдВ / рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ </li></ul><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЕрд╕рд▓реА рдХреЙрдиреНрдлрд┐рдЧ рд╣рдорд╛рд░реЗ рд╕реЗ рдЕрд▓рдЧ рд╣реИ, рд╣рдо рдЗрд╕рдореЗрдВ рд╕реЗ рдПрдХ рд╕реНрдкреНрдпреВрд░рд┐рдпрд╕ рдкреАрд╕ рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">map</span></span> <span class="hljs-variable"><span class="hljs-variable">$http_user_agent</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_user_agent</span></span> { "~*yandex.com/bots" 1; "~*www.google.com/bot.html" 1; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">map</span></span> <span class="hljs-variable"><span class="hljs-variable">$uri</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_uri</span></span> { "~*/wp-" 1; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">map</span></span> :<span class="hljs-variable"><span class="hljs-variable">$sign_user_agent</span></span>:<span class="hljs-variable"><span class="hljs-variable">$sign_uri</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_o</span></span> { :1:0 o; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> ; } <span class="hljs-attribute"><span class="hljs-attribute">map</span></span> :<span class="hljs-variable"><span class="hljs-variable">$sign_user_agent</span></span>:<span class="hljs-variable"><span class="hljs-variable">$sign_uri</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_a</span></span> { :1:0 a; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> ; } <span class="hljs-attribute"><span class="hljs-attribute">sub_filter_once</span></span> <span class="hljs-literal"><span class="hljs-literal">off</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">sub_filter</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_o</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">sub_filter</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_a</span></span>;</code> </pre><br>  рдЖрдЗрдП рд╣рдо рдЗрд╕ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдХрд┐ рдпрд╣рд╛рдВ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИред <br><br>  <i>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рдПрдЬреЗрдВрдЯ</i> рдХреА yandex / google рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд: <br><br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">map</span></span> <span class="hljs-variable"><span class="hljs-variable">$http_user_agent</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_user_agent</span></span> { "~*yandex.com/bots" 1; "~*www.google.com/bot.html" 1; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  Wordpress рд╕реЗрд╡рд╛ рдкреГрд╖реНрдареЛрдВ рдХреЛ <i>рдмрд╛рд╣рд░ рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИ</i> : <br><br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">map</span></span> <span class="hljs-variable"><span class="hljs-variable">$uri</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_uri</span></span> { "~*/wp-" 1; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  рдФрд░ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рдЙрдкрд░реЛрдХреНрдд рджреЛрдиреЛрдВ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЖрддреЗ рд╣реИрдВ <br><br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">map</span></span> :<span class="hljs-variable"><span class="hljs-variable">$sign_user_agent</span></span>:<span class="hljs-variable"><span class="hljs-variable">$sign_uri</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_o</span></span> { :1:0 o; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> ; } <span class="hljs-attribute"><span class="hljs-attribute">map</span></span> :<span class="hljs-variable"><span class="hljs-variable">$sign_user_agent</span></span>:<span class="hljs-variable"><span class="hljs-variable">$sign_uri</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_a</span></span> { :1:0 a; <span class="hljs-attribute"><span class="hljs-attribute">default</span></span> ; }</code> </pre><br>  <i>html</i> рдХреЗ рдкрд╛рда <i>рдореЗрдВ-</i> рдкреГрд╖реНрда <i>'o'</i> рдХреЛ <i>'o'</i> рдФрд░ <i>'a'</i> рдХреЛ <i>'a' рдореЗрдВ</i> рдмрджрд▓рддрд╛ рд╣реИ <i>ред</i> <br><br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">sub_filter_once</span></span> <span class="hljs-literal"><span class="hljs-literal">off</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">sub_filter</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_o</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">sub_filter</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-variable"><span class="hljs-variable">$sign_a</span></span>;</code> </pre><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕реВрдХреНрд╖реНрдорддрд╛ рдпрд╣ рд╣реИ рдХрд┐ <i>'a'! = 'A'</i> <i>'O'</i> рдХреЗ рд╕рдорд╛рди рд╣реИ <i>! = 'O</i> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/528/5d5/582/5285d55827ddf5cb5705b364a417828f.png" alt="рдЫрд╡рд┐"><br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╕рд░реНрдЪ рдЗрдВрдЬрди рдмреЙрдЯреНрд╕ рдХреЛ рд╕рд╛рдорд╛рдиреНрдп 100% рд╕рд┐рд░рд┐рд▓рд┐рдХ рдЯреЗрдХреНрд╕реНрдЯ рдХреЗ рдмрдЬрд╛рдп рд▓реИрдЯрд┐рди <i>'рдП'</i> рдФрд░ <i>'рдУ' рд╕реЗ</i> рдкрддрд▓рд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрдЪрд░рд╛ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред  рдореИрдВ рдЪрд░реНрдЪрд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рдХрд┐ рдпрд╣ рдПрд╕рдИрдУ рдХреЛ рдХреИрд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рд╢рд╛рдмреНрджрд┐рдХ рд╣реИрд╢ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд░реВрдк рд╕реЗ SERP рдореЗрдВ рдкрджреЛрдВ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░реЗрдВрдЧреЗред <br><br>  рдХреНрдпрд╛ рдХрд╣рддреЗ рд╣реИрдВ рд▓реЛрдЧ рдХрд▓реНрдкрдирд╛ рдХреЗ рд╕рд╛рдеред <br><br><h2>  рд╕рдВрджрд░реНрдн </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GDB рдХреЗ рд╕рд╛рде рдбрд┐рдмрдЧрд┐рдВрдЧ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">gdb (1) - рд▓рд┐рдирдХреНрд╕ рдореИрди рдкреЗрдЬ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">strace (1) - рд▓рд┐рдирдХреНрд╕ рдореИрди рдкреЗрдЬ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=http://nginx.org/en/docs/http/ngx_">рдирдЧрдиреЗрдХреНрд╕ - рдореЙрдбреНрдпреВрд▓ ngx_http_sub_module</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрд░реА, рдЪреЗрдирд╕реЙ рдФрд░ рдкрд╛рд╡рд░ рдЖрд░реА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi465355/">https://habr.com/ru/post/hi465355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi465343/index.html">рд╣рдордиреЗ рдбреЗрдврд╝ рд╕рд╛рд▓ рддрдХ рдЗрдВрдЬрди рдФрд░ рдЙрд╕ рдкрд░ рдЦреЗрд▓ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ред рднрд╛рдЧ рджреЛ рдЖрдзрд╛рд░рднреВрдд рд╕рдВрд░рдЪрдирд╛</a></li>
<li><a href="../hi465345/index.html">FunCorp рдореЛрдмрд╛рдЗрд▓ рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдирд╛ рдШрдЯрдирд╛</a></li>
<li><a href="../hi465349/index.html">рдХреНрдпрд╛ рдЖрдкрдХреЛ рдЪреБрд╕реНрдд: 5 рдореЙрдбрд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi465351/index.html">рдЧреЛрд╕реНрдЯреЗрдВрдбрд░ рдЬреАрддрдиреЗ рд╡рд╛рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛рдПрдВ</a></li>
<li><a href="../hi465353/index.html">рдЖрдИрд╕реАрдПрд╕ рд╕рд┐рдХреНрдпреЛрд░рд┐рдЯреА рдСрдбрд┐рдЯ</a></li>
<li><a href="../hi465357/index.html">рдЪрдпрди: рд╕рдВрдпреБрдХреНрдд рд░рд╛рдЬреНрдп рдЕрдореЗрд░рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП "рдкреЗрд╢реЗрд╡рд░" рдЙрддреНрдкреНрд░рд╡рд╛рд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ 9 рдЙрдкрдпреЛрдЧреА рд╕рд╛рдордЧреНрд░реА</a></li>
<li><a href="../hi465359/index.html">рд╣реБрдЖрд╡реЗрдИ рдХреНрд▓рд╛рдЙрдбрдХреИрдореНрдкрд╕: рдЙрдЪреНрдЪ рдХреНрд▓рд╛рдЙрдб рд╕реЗрд╡рд╛ рдЕрд╡рд╕рдВрд░рдЪрдирд╛</a></li>
<li><a href="../hi465361/index.html">рдХрдЬрд╝рд╛рди рдбрд┐рдЬрд┐рдЯрд▓ рдЪреМрд░рд╛рд╣реЗ: рд╢рд╣рд░ рдореЗрдВ рд╕рдбрд╝рдХ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпреЛрдВ рдХреЛ рдХреИрд╕реЗ рдкреЗрд╢ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi465363/index.html">рдиреЗрдЯрд╕ рд╡реЗрдмред рд╡реЗрдм рднреЗрджреНрдпрддрд╛ рдХрд╛ рдлрд╛рдпрджрд╛ рдЙрдард╛рдиреЗ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рд╕реЗ CTF рдордВрдЪ рдХрд╛ рдорд╛рд░реНрдЧред рднрд╛рдЧ 5</a></li>
<li><a href="../hi465365/index.html">рд╡рд┐рдВрдбреЛрдЬ 10 рд╕реЗрдЯрдЕрдк рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>