<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíï üåø üì§ Encabezado de objeto Java ü§¥üèæ üßë‚Äçü§ù‚Äçüßë üçÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øAlguna vez te has preguntado c√≥mo se ven los objetos java desde adentro? 
 Debajo del gato habr√° una descripci√≥n detallada del encabezado del objeto ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Encabezado de objeto Java</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447848/"><p>  ¬øAlguna vez te has preguntado c√≥mo se ven los objetos java desde adentro? <br>  Debajo del gato habr√° una descripci√≥n detallada del encabezado del objeto java, en qu√© consiste y cu√°nta memoria necesita. </p><a name="habracut"></a><br><p>  Para empezar, recuerde que en jvm cualquier objeto en la memoria consiste en el encabezado del objeto y las variables del objeto (enlaces y primitivas).  Adem√°s, el tama√±o final del objeto puede expandirse para convertirse en un m√∫ltiplo de 8 bytes. </p><br><p>  El t√≠tulo de cada objeto (excepto la matriz) consta de dos palabras de m√°quina: <strong>palabra de marca</strong> y <strong>palabra de clase</strong> .  Las matrices tienen 32 bits adicionales para describir la longitud de la matriz. </p><br><p>  <em>La palabra marca</em> almacena el c√≥digo hash de identidad, los bits utilizados por el recolector de basura y los bits utilizados para las cerraduras.  Siempre puede encontrar m√°s detalles en los correspondientes <a href="">tipos de</a> OpenJDK <a href="">markOop.hpp</a> . </p><br><p>  Una <em>palabra de clase</em> almacena un puntero a la clase misma, es decir, al lugar donde se encuentra la informaci√≥n sobre este tipo de datos: m√©todos, anotaciones, herencia y m√°s.  Tambi√©n se pueden encontrar m√°s detalles en los correspondientes <a href="">tipos de</a> OpenJDK <a href="">de klass.hpp</a> . </p><br><p>  Echemos un vistazo m√°s de cerca al <em>t√≠tulo del objeto</em> y <em>,</em> en particular <em>, a la palabra marca.</em> </p><br><h2 id="32-bitnye-jvm">  32 bits jvm </h2><br><p><img src="https://habrastorage.org/webt/ic/95/vd/ic95vdspq0wgsolqgrwonbgodwo.png" alt="JVM de 32 bits"></p><br><p>  Como puede ver en la tabla, el contenido de la <em>palabra Mark</em> puede variar mucho seg√∫n el estado actual del objeto. </p><br><h4 id="normalnoe-sostoyanie-obekta-biased_lock--0-lock--01">  Estado normal del objeto (biased_lock = 0, lock = 01) </h4><br><ul><li>  identity_hashcode es el hash de un objeto que aparece perezosamente.  Si el objeto tiene una llamada System.identityHashCode (obj) por primera vez, este hash se calcular√° y se escribir√° en el encabezado del objeto. <br>  En otros estados, cuando varias secuencias compiten por un objeto, identity_hashcode se almacenar√° no en el encabezado del objeto, sino en el monitor del objeto. </li><li>  edad: la cantidad de recolecciones de basura experimentadas.  Cuando la edad alcanza el n√∫mero m√°ximo de umbral de tenencia, <br>  el objeto se mueve al √°rea de la cadera de la vieja generaci√≥n. </li><li>  biased_lock: contiene 1 si el bloqueo sesgado est√° habilitado para este objeto; de lo contrario, 0. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Un poco mas</b> <div class="spoiler_text"><blockquote>  Cuando Biased Locking est√° activado, el objeto se mueve como si fuera el primer objeto que captur√≥ su monitor.  La captura posterior del objeto en la misma secuencia ser√° un poco m√°s r√°pida. <br><br>  Aqu√≠ est√°n los prerrequisitos te√≥ricos b√°sicos para este bloqueo: <br><ul><li>  A lo largo de la vida del objeto, es predominantemente propiedad de uno </li><li>  Si el hilo recientemente us√≥ un bloqueo en este objeto, lo m√°s probable es que la memoria cach√© del procesador a√∫n contenga los datos que se necesitar√°n para volver a capturar este objeto. </li></ul><br><br>  El bloqueo sesgado est√° habilitado de forma predeterminada desde java 6, -XX: -UseBiasedLocking </blockquote></div></div><br><ul><li>  bloqueo: contiene el c√≥digo de estado de bloqueo.  00 - Peso ligero bloqueado, 01 - Desbloqueado o sesgado, 10 - Peso pesado bloqueado, 11 - Marcado para recolecci√≥n de basura. </li></ul><br><p>  Es decir, en la tabla, el estado de un objeto est√° determinado por la combinaci√≥n de los bits biased_lock y lock. </p><br><h4 id="rezhim-biased-locked-biased_lock--1-lock--01">  Modo bloqueado sesgado (biased_lock = 1, lock = 01) </h4><br><ul><li>  subproceso: en el modo de bloqueo sesgado se supone que el objeto pertenece predominantemente a un subproceso particular, la identificaci√≥n de este subproceso se almacena en el campo. </li><li>  epoch contiene alg√∫n indicador temporal de propiedad del objeto por un hilo cuya identificaci√≥n se almacena en el hilo </li></ul><br><h4 id="rezhim-lightweight-locked-lock--00">  Modo bloqueado ligero (bloqueo = 00) </h4><br><p>  En este modo, se supone que el tiempo de captura de este objeto por diferentes flujos no se cruza en absoluto o no se solapa de manera insignificante.  En este modo, en lugar de bloquear el sistema operativo, la JVM usa at√≥micos. </p><br><ul><li>  ptr_to_lock_record - CAS (comparar y establecer) dentro del ciclo de giro se usa para establecer / esperar un bloqueo. <br>  Como referencia, el tiempo m√≠nimo de bloqueo del sistema operativo estar√° en la regi√≥n de aproximadamente 10 ms, con la ayuda de los √°tomos, la corriente no se duerme, pero contin√∫a trillando un ciclo peque√±o, y tan pronto como el recurso est√© libre, el ciclo at√≥mico terminar√° y la corriente capturar√° inmediatamente este objeto. </li></ul><br><h4 id="rezhim-heavyweight-locked-lock--10">  Modo bloqueado de peso pesado (bloqueo = 10) </h4><br><ul><li>  ptr_to_heavyweight_monitor: si el tiempo de captura de este objeto con diferentes flujos se superpondr√° significativamente, entonces el bloqueo ligero se reemplazar√° por un bloqueo pesado.  Se escribir√° un puntero al monitor en ptr_to_heavyweight_monitor.  Se utiliza el bloqueo del sistema operativo. </li></ul><br><p>  Entonces, en jvm de 32 bits, el encabezado del objeto consta de 8 bytes.  Las matrices tienen adem√°s 4 bytes. </p><br><h2 id="64-bitnye-jvm">  Jvm de 64 bits </h2><br><p><img src="https://habrastorage.org/webt/gz/hm/ks/gzhmksgyzo2rowjnnm85g62ldu4.png" alt="JVM de 64 bits"></p><br><p>  En una jvm de 64 bits, el encabezado del objeto consta de 16 bytes.  Las matrices tienen adem√°s 4 bytes. </p><br><h2 id="64-bitnye-jvm-s-szhatiem-ukazateley">  Jvm de 64 bits con compresi√≥n de puntero </h2><br><p><img src="https://habrastorage.org/webt/xt/58/lp/xt58lpwwgpxsxky_gjwivje0ub0.png" alt="Cooperativas JVM de 64 bits"></p><br><p>  Un encabezado de objeto consta de 12 bytes.  Las matrices tienen adem√°s 4 bytes. </p><br><p>  Un poco sobre la compresi√≥n del puntero.  Para un puntero de 32 bits, el espacio de direcciones est√° limitado a 4 GB.  Sin embargo, si recordamos nuevamente que en jvm el tama√±o de un objeto es un m√∫ltiplo de 8 bytes, entonces podemos usar un pseudo puntero de 35 bits, con tres ceros al final.  Y, por lo tanto, ya se refieren a 32 GB de memoria.  La compresi√≥n no es gratuita, el precio es una operaci√≥n adicional (puntero &lt;&lt; 3) para cualquier llamada al mont√≥n. </p><br><h4 id="ssylka-na-originalnuyu-statyu">  Enlace al art√≠culo original: </h4><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Encabezado de objeto Java</a> </p><br><p>  Tambi√©n me gustar√≠a agregar que todo lo que se describe aqu√≠ no es un dogma, quiz√°s en otras versiones de jvm el t√≠tulo del objeto ser√° diferente.  Descrito aqu√≠ es relevante para openjdk 8. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447848/">https://habr.com/ru/post/447848/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447834/index.html">Destruye en 9 segundos. C√≥mo un algoritmo desconocido destruy√≥ IPO BATS</a></li>
<li><a href="../447836/index.html">Test drive nanoCAD SPDS Metalwork 1.2. Parte 1</a></li>
<li><a href="../447838/index.html">C√≥mo las tecnolog√≠as de IoT cambiar√°n el mundo en los pr√≥ximos 10 a√±os</a></li>
<li><a href="../447842/index.html">Microbiota ¬øQu√© es este √≥rgano y por qu√© lo necesitamos?</a></li>
<li><a href="../447844/index.html">Evrone y DataArt realizar√°n una serie de mitaps en Voronezh</a></li>
<li><a href="../447850/index.html">Sergey Golubev: "Lo mejor que se puede hacer para OSM ahora es deshacerse del planeta, eliminarlo y comenzar de nuevo"</a></li>
<li><a href="../447852/index.html">Google+ est√° muerto. ¬øY qu√©?</a></li>
<li><a href="../447854/index.html">Ocho errores que comet√≠ cuando era joven</a></li>
<li><a href="../447856/index.html">C√≥mo vender una ventana sin emparejamiento o la importancia del posicionamiento antes de desarrollar un sitio</a></li>
<li><a href="../447860/index.html">Termodin√°mica de agujeros negros.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>