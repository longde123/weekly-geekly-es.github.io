<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèØ ü¶ó üë∏üèΩ IPFS sans douleur (mais ce n'est pas pr√©cis) üåò üë©‚Äçüî¨ ü§¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Malgr√© le fait que sur Habr√© il n'y avait d√©j√† pas un seul article sur IPFS . 

 Je pr√©ciserai tout de suite que je ne suis pas un expert dans ce doma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IPFS sans douleur (mais ce n'est pas pr√©cis)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465599/"><img src="https://habrastorage.org/webt/wi/od/vh/wiodvhs9bp_gm6uff-4kp8ly0ni.jpeg"><br><br>  Malgr√© le fait que sur Habr√© il n'y avait d√©j√† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas un seul article sur IPFS</a> . <br><br>  Je pr√©ciserai tout de suite que je ne suis pas un expert dans ce domaine, mais j'ai montr√© plus d'une fois de l'int√©r√™t pour cette technologie, mais essayer de jouer avec elle a souvent caus√© quelques douleurs.  Aujourd'hui, j'ai repris les exp√©riences et obtenu des r√©sultats que j'aimerais partager.  En bref, le processus d'installation d'IPFS et de quelques puces sera d√©crit (tout a √©t√© fait sur Ubuntu, sur d'autres plateformes que je n'ai pas essay√©es). <br><a name="habracut"></a><br>  <i>Si vous avez manqu√© ce qu'est IPFS, il est √©crit en d√©tail ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/en/post/314768</a></i> <br><br><h2>  L'installation </h2><br>  <i>Pour la puret√© de l'exp√©rience, je propose de l'installer imm√©diatement sur un serveur externe, car nous consid√©rerons quelques pi√®ges avec le travail en mode local et distant.</i>  <i>Ensuite, si vous le souhaitez, il ne sera pas d√©moli longtemps, il n'y en a pas beaucoup.</i> <br><br><h3>  Partez </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Documentation officielle</a> <br>  Voir la version actuelle sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">golang.org/dl</a> <br><br>  <i>Remarque: il est pr√©f√©rable d'installer IPFS au nom de l'utilisateur, qui est cens√© utiliser les plus fr√©quents.</i>  <i>Le fait est que ci-dessous, nous consid√©rerons l'option de montage via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FUSE</a> et il y a des subtilit√©s l√†-bas.</i> <br><br><pre><code class="plaintext hljs">cd ~ curl -O https://dl.google.com/go/go1.12.9.linux-amd64.tar.gz tar xvf go1.12.9.linux-amd64.tar.gz sudo chown -R root:root ./go sudo mv go /usr/local rm go1.12.9.linux-amd64.tar.gz</code> </pre> <br>  Ensuite, vous devez mettre √† jour l'environnement (plus de d√©tails ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">golang.org/doc/code.html#GOPATH</a> ). <br><br><pre> <code class="plaintext hljs">echo 'export GOPATH=$HOME/work' &gt;&gt; ~/.bashrc echo 'export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin' &gt;&gt; ~/.bashrc source ~/.bashrc</code> </pre><br>  V√©rifiez que go est install√© <br><br><pre> <code class="plaintext hljs">go version</code> </pre> <br><h3>  Installer IPFS </h3><br>  J'ai aim√© la fa√ßon d'installer via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ipfs-update le plus</a> . <br><br>  Installez-le avec la commande <br><br><pre> <code class="plaintext hljs">go get -v -u github.com/ipfs/ipfs-update</code> </pre><br>  Apr√®s cela, vous pouvez ex√©cuter les commandes suivantes: <br><br>  <b>ipfs-update versions</b> - pour voir toutes les versions disponibles √† t√©l√©charger. <br>  <b>ipfs-update version</b> - pour voir la version install√©e actuelle (jusqu'√† ce que IPFS soit install√©, il n'en sera pas). <br>  <b>ipfs-update install latest</b> - installe la derni√®re version d'IPFS.  Au lieu de la derni√®re, respectivement, vous pouvez sp√©cifier n'importe quelle version souhait√©e dans la liste des disponibles. <br><br>  Installer ipfs <br><br><pre> <code class="plaintext hljs">ipfs-update install latest</code> </pre><br>  V√©rifier <br><br><pre> <code class="plaintext hljs">ipfs --version</code> </pre> <br>  Directement avec l'installation en termes g√©n√©raux, tout. <br><br><h2>  Lancement IPFS </h2><br><h3>  Initialisation </h3><br>  Vous devez d'abord effectuer l'initialisation. <br><br><pre> <code class="plaintext hljs">ipfs init</code> </pre> <br>  En r√©ponse, vous obtiendrez quelque chose comme ceci: <br><br><pre> <code class="plaintext hljs"> ipfs init initializing IPFS node at /home/USERNAME/.ipfs generating 2048-bit RSA keypair...done peer identity: QmeCWX1DD7HnXXXXXXXXXXXXXXXXXXXXXXXXxxx to get started, enter: ipfs cat /ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv/readme</code> </pre><br>  Vous pouvez ex√©cuter la commande propos√©e <br><br><pre> <code class="plaintext hljs">ipfs cat /ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv/readme</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">R√©sultat</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Hello and Welcome to IPFS! ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù If you're seeing this, you have successfully installed IPFS and are now interfacing with the ipfs merkledag! ------------------------------------------------------- | Warning: | | This is alpha software. Use at your own discretion! | | Much is missing or lacking polish. There are bugs. | | Not yet secure. Read the security notes for more. | ------------------------------------------------------- Check out some of the other files in this directory: ./about ./help ./quick-start &lt;-- usage examples ./readme &lt;-- this file ./security-notes</code> </pre><br></div></div><br>  Ici, √† mon avis, l'int√©ressant commence d√©j√†.  Au stade de l'installation, les gars commencent d√©j√† √† utiliser leurs propres technologies.  Le hachage propos√© QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv - non g√©n√©r√© sp√©cifiquement pour vous, mais cousu dans la version.  Autrement dit, avant la publication, ils ont pr√©par√© un texte de bienvenue, l'ont vers√© dans IPFS et ont ajout√© l'adresse au programme d'installation.  √Ä mon avis, c'est tr√®s cool.  Et ce fichier (plus pr√©cis√©ment, l'ensemble du dossier) peut d√©sormais √™tre consult√© non seulement localement, mais √©galement sur la passerelle officielle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ipfs.io/ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv</a> .  Dans le m√™me temps, vous pouvez √™tre s√ªr que le contenu du dossier n'a pas chang√©, car s'il avait chang√©, le hachage aurait √©galement chang√©. <br><br>  <i>Soit dit en passant, dans ce cas, IPFS pr√©sente certaines similitudes avec le serveur de contr√¥le de version.</i>  <i>Si vous apportez des modifications aux fichiers source du dossier et versez √† nouveau le dossier dans IPFS, il recevra une nouvelle adresse.</i>  <i>Dans le m√™me temps, l'ancien dossier n'ira nulle part comme √ßa et sera disponible √† son ancienne adresse.</i> <br><br><h3>  Lancement direct </h3><br><pre> <code class="plaintext hljs">ipfs daemon</code> </pre> <br>  Ils devraient obtenir une r√©ponse comme celle-ci: <br><br><pre> <code class="plaintext hljs">ipfs daemon Initializing daemon... go-ipfs version: 0.4.22- Repo version: 7 System version: amd64/linux Golang version: go1.12.7 Swarm listening on /ip4/xxxx/tcp/4001 Swarm listening on /ip4/127.0.0.1/tcp/4001 Swarm listening on /ip6/::1/tcp/4001 Swarm listening on /p2p-circuit Swarm announcing /ip4/127.0.0.1/tcp/4001 Swarm announcing /ip6/::1/tcp/4001 API server listening on /ip4/127.0.0.1/tcp/5001 WebUI: http://127.0.0.1:5001/webui Gateway (readonly) server listening on /ip4/127.0.0.1/tcp/8080 Daemon is ready</code> </pre><br><h4>  Nous ouvrons la porte √† Internet </h4><br>  Faites attention √† ces deux lignes: <br><br><pre> <code class="plaintext hljs">WebUI: http://127.0.0.1:5001/webui Gateway (readonly) server listening on /ip4/127.0.0.1/tcp/8080</code> </pre><br>  Maintenant, si vous avez install√© IPFS localement, vous acc√©derez aux interfaces IPFS aux adresses locales et tout sera √† votre disposition (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">localhost</a> : 5001 / webui /).  Mais lorsqu'elles sont install√©es sur un serveur externe, par d√©faut, les passerelles sont ferm√©es √† Internet.  Il existe deux passerelles: <br><br><ol><li>  Admin webui ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> ) sur le port 5001. </li><li>  API externe sur le port 8080 (en lecture seule). </li></ol><br>  Jusqu'√† pr√©sent, vous pouvez ouvrir les deux ports pour des exp√©riences (5001 et 8080), mais bien s√ªr, sur le serveur de combat, le port 5001 doit √™tre ferm√© avec un pare-feu.  Il y a 4001 ports, il est n√©cessaire pour que d'autres pairs puissent vous trouver.  Il doit √™tre laiss√© ouvert aux demandes ext√©rieures. <br><br>  Ouvrez ~ / .ipfs / config pour l'√©dition et trouvez ces lignes dedans: <br><br><pre> <code class="plaintext hljs">"Addresses": { "Swarm": [ "/ip4/0.0.0.0/tcp/4001", "/ip6/::/tcp/4001" ], "Announce": [], "NoAnnounce": [], "API": "/ip4/127.0.0.1/tcp/5001", "Gateway": "/ip4/127.0.0.1/tcp/8080" }</code> </pre> <br>  Remplacez 127.0.0.1 par l'ip de votre serveur et enregistrez le fichier, puis red√©marrez ipfs (arr√™tez la commande Ctrl + C en cours d'ex√©cution et r√©ex√©cutez). <br><br>  Doit obtenir <br><br><pre> <code class="plaintext hljs">... WebUI: http://ip__:5001/webui Gateway (readonly) server listening on /ip4/ip__/tcp/8080</code> </pre><br>  Des interfaces externes devraient maintenant √™tre disponibles. <br><br>  D√©couvrez <br><br><pre> <code class="plaintext hljs">http://__ip_:8080/ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv/readme</code> </pre> <br>  Le fichier Lisezmoi ci-dessus devrait s'ouvrir. <br><br><pre> <code class="plaintext hljs">http://__ip_:5001/webui/</code> </pre> <br>  L'interface Web devrait s'ouvrir. <br><br>  <i>Si webui fonctionne pour vous, les param√®tres IPFS peuvent √™tre modifi√©s directement, y compris la visualisation des statistiques, mais ci-dessous, je consid√©rerai les options de configuration directement via le fichier de configuration, ce qui n'est g√©n√©ralement pas critique.</i>  <i>Il est juste pr√©f√©rable de se rappeler exactement o√π se trouve la configuration et quoi en faire, et si le museau Web ne fonctionne pas, ce sera plus difficile.</i> <br><br><h3>  Configurer une interface Web pour travailler avec votre serveur </h3><br>  Voici le premier √©cueil, qui a √©t√© pass√© environ trois heures. <br><br>  Si vous avez install√© IPFS sur un serveur externe, mais que vous n'avez pas install√© ou d√©marr√© IPFS localement, lorsque vous acc√©dez √† / webui dans l'interface Web, vous devriez voir une erreur de connexion: <br><br><img src="https://habrastorage.org/webt/bp/l7/jj/bpl7jjxzunvmtl9ffvvkiwphmue.png"><br><br>  Le fait est que webui, √† mon avis, fonctionne de mani√®re tr√®s ambigu√´.  Tout d'abord, il essaie de se connecter √† l'API du serveur o√π l'interface est ouverte (bien s√ªr, en fonction de l'adresse dans le navigateur).  et si cela ne fonctionne pas, il essaie de se connecter √† la passerelle locale.  Et si vous avez IPFS ex√©cut√© localement, alors votre webui fonctionnera bien, seulement vous travaillerez avec IPFS local, pas externe, bien que vous ayez ouvert webui sur un serveur externe.  Ensuite, t√©l√©chargez des fichiers, mais pour une raison quelconque, vous ne les voyez pas comme √ßa sur un serveur externe ... <br><br>  Et s'il ne s'ex√©cute pas localement, nous obtenons une erreur de connexion.  Dans notre cas, l'erreur est probablement due √† CORS, qui est √©galement indiqu√© par webui, proposant d'ajouter une config. <br><br><pre> <code class="plaintext hljs">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '["http://ip_ :5001", "http://127.0.0.1:5001", "https://webui.ipfs.io"]' ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods '["PUT", "GET", "POST"]'</code> </pre> <br>  Je viens d'enregistrer un caract√®re g√©n√©rique <br><br><pre> <code class="plaintext hljs">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '["*"]'</code> </pre> <br>  Les en-t√™tes ajout√©s se trouvent tous dans le m√™me ~ / .ipfs / config.  Dans mon cas, c'est <br><br><pre> <code class="plaintext hljs"> "API": { "HTTPHeaders": { "Access-Control-Allow-Origin": [ "*" ] } },</code> </pre><br>  Nous red√©marrons ipfs et voyons que webui s'est correctement connect√© (du moins si vous avez ouvert les passerelles pour les demandes de l'ext√©rieur, comme d√©crit ci-dessus). <br><br>  Vous pouvez maintenant t√©l√©charger directement des dossiers et des fichiers via l'interface Web, ainsi que cr√©er vos propres dossiers. <br><br><h3>  Montez le syst√®me de fichiers FUSE </h3><br>  C'est une astuce assez int√©ressante. <br><br>  Nous pouvons ajouter des fichiers (ainsi que des dossiers) non seulement via l'interface web, mais aussi directement dans le terminal, par exemple <br><br><pre> <code class="plaintext hljs">ipfs add test -r added QmfYuz2gegRZNkDUDVLNa5DXzKmxxxxxxxxxx test/test.txt added QmbnzgRVAP4fL814h5mQttyqk1aURxxxxxxxxxxxx test</code> </pre><br>  Le dernier hachage est le hachage du dossier racine. <br><br>  En utilisant ce hachage, nous pouvons ouvrir le dossier sur n'importe quel n≈ìud ipfs (qui peut trouver notre n≈ìud et obtenir le contenu), nous pouvons le faire dans l'interface Web sur le port 5001 ou 8080, ou nous pouvons localement via ipfs. <br><br><pre> <code class="plaintext hljs">ipfs ls QmbnzgRVAP4fL814h5mQttyqk1aUxxxxxxxxxxxxx QmfYuz2gegRZNkDUDVLNa5DXzKmKVxxxxxxxxxxxxxx 10 test.txt</code> </pre><br>  Mais vous pouvez toujours l'ouvrir comme un dossier normal. <br><br>  Cr√©ons deux dossiers √† la racine et donnons-leur des droits √† notre utilisateur. <br><br><pre> <code class="plaintext hljs">sudo mkdir /ipfs /ipns sudo chown USERNAME /ipfs /ipns</code> </pre><br>  et red√©marrez ipfs avec l'indicateur --mount <br><br><pre> <code class="plaintext hljs">ipfs daemon --mount</code> </pre> <br>  <i>Vous pouvez cr√©er des dossiers √† d'autres endroits et sp√©cifier le chemin d'acc√®s √† ceux-ci via le d√©mon ipfs --mount --mount-ipfs / ipfs_path --mount-ipns / ipns_path</i> <br><br>  Maintenant, la lecture de ce dossier est quelque peu inhabituelle. <br><br><pre> <code class="plaintext hljs">ls -la /ipfs ls: reading directory '/ipfs': Operation not permitted total 0</code> </pre><br>  Autrement dit, il n'y a pas d'acc√®s direct √† la racine de ce dossier.  Mais alors vous pouvez obtenir le contenu en connaissant le hachage. <br><br><pre> <code class="plaintext hljs">ls -la /ipfs/QmbnzgRVAP4fL814h5mQttyqxxxxxxxxxxxxxxxxx total 0 -r--r--r-- 1 root root 10 Aug 31 07:03 test.txt</code> </pre><br><pre> <code class="plaintext hljs">cat /ipfs/QmbnzgRVAP4fL814h5mQttyqxxxxxxxxxxxxxxxxx/test.txt test test</code> </pre><br>  De plus, m√™me la saisie semi-automatique √† l'int√©rieur du dossier fonctionne lors de la sp√©cification d'un chemin. <br><br>  Comme je l'ai dit ci-dessus, il existe des subtilit√©s avec un tel montage: par d√©faut, les dossiers FUSE mont√©s ne sont accessibles qu'√† l'utilisateur actuel (m√™me root ne peut pas lire √† partir d'un tel dossier, sans parler des autres utilisateurs du syst√®me).  Si vous souhaitez rendre ces dossiers accessibles aux autres utilisateurs, dans la configuration, vous devez remplacer ¬´FuseAllowOther¬ª: false par ¬´FuseAllowOther¬ª: true.  Mais ce n'est pas tout.  Si vous ex√©cutez IPFS en tant que root, tout est OK.  Et si au nom d'un utilisateur r√©gulier (quoique sudo), vous obtenez une erreur <br><br><pre> <code class="plaintext hljs">mount helper error: fusermount: option allow_other only allowed if 'user_allow_other' is set in /etc/fuse.conf</code> </pre> <br>  Dans ce cas, vous devez corriger /etc/fuse.conf en d√©commentant la ligne #user_allow_other. <br><br>  Apr√®s cela, nous red√©marrons ipfs. <br><br><h4>  Probl√®mes connus avec FUSE </h4><br>  Plus d'une fois, le probl√®me a √©t√© remarqu√© qu'apr√®s le red√©marrage d'ipfs avec le montage (ou peut-√™tre dans d'autres cas), les points de montage / ipfs et / ipns deviennent indisponibles.  Il n'y a pas d'acc√®s, mais ls -la / ipfs montre ????  dans la liste des droits. <br><br>  Trouv√© une telle solution: <br><br><pre> <code class="plaintext hljs">fusermount -z -u /ipfs fusermount -z -u /ipns</code> </pre> <br>  Red√©marrez ensuite ipfs. <br><br><h3>  Ajouter un service </h3><br>  Bien s√ªr, le lancement dans le terminal ne convient qu'aux tests primaires.  En mode combat, le d√©mon devrait d√©marrer automatiquement au d√©marrage du syst√®me. <br><br>  Au nom de sudo, cr√©ez le fichier /etc/systemd/system/ipfs.service et √©crivez-y: <br><br><pre> <code class="plaintext hljs">[Unit] Description=IPFS Daemon After=syslog.target network.target remote-fs.target nss-lookup.target [Service] Type=simple ExecStart=/home/USERNAME/work/bin/ipfs daemon --mount User=USERNAME Restart=always [Install] WantedBy=multi-user.target</code> </pre><br>  USERNAME, bien s√ªr, doit √™tre remplac√© par votre utilisateur (et peut-√™tre que le chemin complet vers le programme ipfs sera diff√©rent pour vous (vous devez sp√©cifier le chemin complet)). <br><br>  Nous activons le service. <br><br><pre> <code class="plaintext hljs">sudo systemctl enable ipfs.service</code> </pre> <br>  Nous commen√ßons le service. <br><br><pre> <code class="plaintext hljs">sudo service ipfs start</code> </pre> <br>  V√©rifiez l'√©tat du service. <br><br><pre> <code class="plaintext hljs">sudo service ipfs status</code> </pre> <br>  Pour la puret√© de l'exp√©rience, il sera possible de red√©marrer le serveur √† l'avenir pour v√©rifier que ipfs d√©marre correctement. <br><br><h3>  Ajoutez les f√™tes que nous connaissons </h3><br>  Consid√©rez la situation lorsque nous avons des n≈ìuds IPFS install√©s √† la fois sur un serveur externe et localement.  Sur un serveur externe, nous ajoutons une sorte de fichier et essayons de l'obtenir localement via IPFS par CID.  Que va-t-il se passer?  Bien s√ªr, le serveur local ne sait probablement rien de notre serveur externe et essaiera simplement de trouver le fichier par CID en ¬´demandant¬ª √† tous les homologues IPFS disponibles (avec lesquels il a d√©j√† r√©ussi √† ¬´se familiariser¬ª).  Ceux-ci, √† leur tour, demanderont aux autres.  Et ainsi, jusqu'√† ce que le fichier soit trouv√©.  En fait, la m√™me chose se produit lorsque nous essayons d'obtenir le fichier via la passerelle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ipfs.io</a> officielle.  Si vous √™tes chanceux, le fichier sera trouv√© dans quelques secondes.  Et sinon, il ne sera pas retrouv√© en quelques minutes, ce qui affecte grandement le confort de travail.  Mais nous savons o√π ce fichier appara√Ætra pour la premi√®re fois.  Alors pourquoi ne disons-nous pas imm√©diatement √† notre serveur local "Regardez d'abord"?  Apparemment, cela peut √™tre fait. <br><br>  1. Allez sur le serveur distant et recherchez ~ / .ipfs / config dans la config <br><br><pre> <code class="plaintext hljs">"Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuxxxxxxxxxxxxxxxx",</code> </pre><br>  2. Nous ex√©cutons le statut ipfs du service sudo et y recherchons des entr√©es Swarm, par exemple: <br><br><pre> <code class="plaintext hljs">Swarm announcing /ip4/ip__/tcp/4001</code> </pre> <br>  3. De l√†, nous ajoutons l'adresse g√©n√©rale du formulaire "/ ip4 / ip_your_server / tcp / 4001 / ipfs / $ PeerID". <br><br>  4. Pour plus de fiabilit√©, via notre site Web local, nous essaierons d'ajouter cette adresse aux pairs. <br><br><img src="https://habrastorage.org/webt/g5/y2/oh/g5y2ohfylmp2be51tzh0iohq1y8.png"><br><br>  5. Si tout va bien, ouvrez la configuration locale ~ / .ipfs / config, trouvez "Bootstrap" dedans: [... <br>  et ajoutez d'abord l'adresse re√ßue au tableau. <br><br>  Red√©marrez IPFS. <br><br>  Ajoutez maintenant le fichier au serveur externe et essayez de le demander sur le serveur local.  Doit voler vite. <br><br>  Mais cette fonctionnalit√© est toujours instable.  D'apr√®s ce que je comprends, m√™me si nous sp√©cifions l'adresse d'homologue dans Bootstrap, au cours du travail, ipfs modifie la liste des connexions actives avec les homologues.  Dans tous les cas, une discussion √† ce sujet et souhaite la possibilit√© d'indiquer des pairs constants a lieu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et il semble <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">qu'il soit cens√©</a> ajouter des fonctionnalit√©s √† ipfs@5.0+ <br><br>  Une liste des pairs actuels peut √™tre consult√©e √† la fois dans webui et dans le terminal. <br><br><pre> <code class="plaintext hljs">ipfs swarm peers</code> </pre> <br>  L√† et l√†, vous pouvez ajouter votre f√™te manuellement. <br><br><pre> <code class="plaintext hljs">ipfs swarm connect "/ip4/ip__/tcp/4001/ipfs/$PeerID"</code> </pre> <br>  Jusqu'√† ce que vous ayez am√©lior√© cette fonctionnalit√©, vous pouvez √©crire un outil pour v√©rifier une connexion avec l'homologue souhait√©, et sinon, pour ajouter une connexion. <br><br><h2>  Raisonnement </h2><br>  Parmi ceux qui connaissent d√©j√† IPFS, il y a des arguments pour et contre IPFS.  En principe, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">discussion d'</a> avant-hier m'a incit√© √† creuser √† nouveau IPFS.  Et en ce qui concerne la discussion mentionn√©e ci-dessus: je ne peux pas dire que je suis fermement contre certains des arguments ci-dessus exprim√©s (je suis en d√©saccord uniquement avec le fait qu'un programmeur et demi utilise IPFS).  En g√©n√©ral, les deux ont raison √† leur mani√®re (surtout les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commentaires sur les ch√®ques</a> vous font penser).  Mais si vous mettez de c√¥t√© l'√©valuation morale et juridique, qui donnera une √©valuation technique de cette technologie?  Personnellement, j'ai une sorte de sentiment int√©rieur que "c'est n√©cessaire √† coup s√ªr, cela a certaines perspectives".  Mais pourquoi exactement, il n'y a pas de formulation claire.  Comme si vous regardez les outils centralis√©s existants, √† bien des √©gards, ils sont tr√®s en avance (stabilit√©, vitesse, g√©rabilit√©, etc.).  N√©anmoins, j'ai une pens√©e qui semble logique et qui ne peut gu√®re √™tre mise en ≈ìuvre sans de tels syst√®mes d√©centralis√©s.  Bien s√ªr, j'agite vraiment mon esprit, mais je le formulerais ainsi: le principe de diffusion de l'information sur Internet doit √™tre chang√©. <br><br>  Je vais vous expliquer.  Si vous le pensez, nos informations sont d√©sormais diffus√©es selon le principe "J'esp√®re que la personne √† qui je les ai transf√©r√©es les prot√©gera et ne sera pas perdue ou re√ßue par ceux √† qui elles n'√©taient pas destin√©es".  Par exemple, il est facile de consid√©rer divers services de messagerie, stockage cloud, etc.  Et qu'avons-nous finalement?  Sur Habr√© Hub, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la s√©curit√© de l'information est</a> en premi√®re ligne et nous recevons presque chaque jour des informations sur une autre fuite mondiale.  En principe, tout ce qui est le plus int√©ressant est r√©pertori√© dans l'article &lt;irony&gt; merveilleux &lt;/ ironie&gt; L' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©t√© est presque termin√©.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Presque aucune donn√©e n'a √©t√© divulgu√©e</a> .  Autrement dit, les principaux g√©ants de l'Internet deviennent plus grands, ils accumulent de plus en plus d'informations, et de telles fuites sont une sorte d'explosions atomiques informationnelles.  Cela ne s'est jamais produit, et l√† encore.  Dans le m√™me temps, bien que beaucoup comprennent qu'il existe des risques, ils continueront de faire confiance √† leurs donn√©es avec des soci√©t√©s tierces.  Premi√®rement, il n'y a pas beaucoup d'alternative, et deuxi√®mement, ils promettent qu'ils ont corrig√© tous les trous et cela ne se reproduira plus. <br><br>  Quelle option est-ce que je vois?  Il me semble que les donn√©es devraient initialement √™tre diffus√©es ouvertement.  Mais l'ouverture dans ce cas ne signifie pas que tout doit √™tre facile √† lire.  Je parle de l'ouverture du stockage et de la distribution, mais pas de l'ouverture totale en lecture.  Je suppose que les informations doivent √™tre distribu√©es avec des cl√©s publiques.  Apr√®s tout, le principe des cl√©s publiques / priv√©es est d√©j√† ancien, presque comme Internet.  Si les informations ne sont pas confidentielles et sont con√ßues pour un large √©ventail, elles sont imm√©diatement mises en page avec la cl√© publique (mais toujours sous forme crypt√©e, n'importe qui peut les d√©crypter avec la cl√© existante).  Sinon, il est dispos√© sans cl√© publique, et la cl√© elle-m√™me est transmise √† celui qui doit avoir acc√®s √† ces informations.  Dans le m√™me temps, celui qui a besoin de le lire ne devrait avoir qu'une cl√©, et o√π obtenir ces informations, il ne devrait pas monter en fl√®che - il les extrait simplement du r√©seau (c'est le nouveau principe de distribution au contenu, et non √† l'adresse). <br><br>  Ainsi, pour une attaque de masse, les attaquants devront obtenir un grand nombre de cl√©s priv√©es, et il est peu probable qu'ils puissent le faire au m√™me endroit.  Cette t√¢che, √† mon avis, est plus difficile que de pirater un service particulier. <br><br>  Et ici, un autre probl√®me se termine: la confirmation de la paternit√©.  Maintenant, sur Internet, vous pouvez trouver de nombreuses citations √©crites par nos amis.  Mais o√π est la garantie qu'ils les ont √©crits?  Maintenant, si chacun de ces enregistrements √©tait accompagn√© d'une signature num√©rique, ce serait beaucoup plus simple.  Et peu importe o√π se trouvent ces informations, l'essentiel est la signature, qui est √©videmment difficile √† truquer. <br><br>  Et voici ce qui est int√©ressant ici: IPFS contient d√©j√† des outils de chiffrement (apr√®s tout, il est construit sur la technologie blockchain).  La cl√© priv√©e est imm√©diatement sp√©cifi√©e dans la configuration. <br><br><pre> <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> + / NDI51jA0MRzpBviM3o / c / Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m + JoEplHjtc4KS5 <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> 7LMS7jKpwJNJBiFAa / Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj / Fb + GJMiciJUZaAjgHoaZrrf2b / Eii3z0i + QIVG7OypXT3Z9JUS60 <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> Zijgq27oLyxKNr9T7 <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> </pre> <br>  Je ne suis pas un sp√©cialiste de la s√©curit√© et je ne sais pas exactement comment l'utiliser correctement, mais il me semble que ces cl√©s sont utilis√©es au niveau de l'√©change entre les n≈ìuds IPFS.  Et aussi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">js-ipfs</a> et des exemples de projets comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">orbit-db</a> , sur lesquels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">orbit.chat</a> fonctionne.  Autrement dit, chaque appareil (mobile et pas seulement) peut √™tre facilement √©quip√© de ses propres machines de chiffrement-d√©chiffrement.  Dans ce cas, il ne reste plus qu'√† chacun de prendre soin de maintenir ses cl√©s priv√©es et chacun sera responsable de sa propre s√©curit√©, et ne sera pas l'otage d'un autre facteur humain dans un g√©ant Internet super populaire. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465599/">https://habr.com/ru/post/fr465599/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465587/index.html">Analyse: qu'est-ce que le march√© OTC et quelles transactions y sont effectu√©es</a></li>
<li><a href="../fr465589/index.html">Guide de d√©marrage rapide du pilote et du PoC</a></li>
<li><a href="../fr465591/index.html">La conf√©rence PHP Europe centrale annul√©e car il n'y avait pas de femmes parmi les intervenants</a></li>
<li><a href="../fr465595/index.html">La 5G vient √† nous?</a></li>
<li><a href="../fr465597/index.html">Apprentissage du d√©marrage lent de STM8S. Partie 0</a></li>
<li><a href="../fr465601/index.html">Pourquoi avez-vous besoin de DevOps et qui sont des sp√©cialistes DevOps</a></li>
<li><a href="../fr465603/index.html">Cours vs stage. Comment enseignons-nous les midbells chez SimbirSoft</a></li>
<li><a href="../fr465605/index.html">Le livre "Deep reinforcement learning in Python. OpenAI Gym et TensorFlow pour les pros ¬ª</a></li>
<li><a href="../fr465607/index.html">Comprendre le Lean et l'Agile dans le d√©veloppement de logiciels</a></li>
<li><a href="../fr465609/index.html">Pourquoi 1C-Bitrix du 1er d√©cembre 2019 peut se transformer en citrouille</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>