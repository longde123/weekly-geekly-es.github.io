<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🚀 🙌 👰🏿 Termux逐步介绍（第2部分） ♐️ 🧑🏾‍🤝‍🧑🏽 👩🏽‍🤝‍👩🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在最后一部分中，我们了解了基本的Termux命令，建立了与PC的SSH连接，学习了如何创建别名，并安装了一些有用的实用程序。 这次，我们必须走得更远，您和我： 


- 了解Termux：API 
- 安装Python和nano，还要写“ Hello，world！” 在python中 
- 我们了解...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Termux逐步介绍（第2部分）</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445868/"><img width="100%" src="https://habrastorage.org/webt/1y/qs/wu/1yqswuuknqxuwcnerqenogyqwby.jpeg"><br><br><p> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">最后一部分中，</a>我们了解了基本的Termux命令，建立了与PC的SSH连接，学习了如何创建别名，并安装了一些有用的实用程序。 这次，我们必须走得更远，您和我： </p><br><ul><li> 了解Termux：API </li><li> 安装Python和nano，还要写“ Hello，world！” 在python中 </li><li>我们了解bash脚本并使用Termux编写脚本：API </li><li> 使用bash脚本，Termux：API和Python，我们将编写一个简单的程序 <a name="habracut"></a></li></ul><br><p> 既然我们现在了解了输入命令的作用，那么从下一步开始，我将不再详细描述每个动作，但是，只要有困难，我就一定会进行解释。 </p><br><p> 我经常使用别名，因此这部分使用的缩写如下所示： </p><br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> updg=<span class="hljs-string"><span class="hljs-string">'apt update &amp;&amp; apt upgrade'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> py=<span class="hljs-string"><span class="hljs-string">'python'</span></span></code> </pre> <br><p> 计划已准备就绪，您可以开始！ 当然，不要忘了“魔术选项卡”（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">请参阅第1部分</a> ）。 </p><br><h2> 第4步 </h2><br><h3> 深入兔子洞Termux：API </h3><br><p>  <i>API这个词对于编码人员的心脏来说有多少</i> </p><br><p> 如果我们不涉及Termux：API的主题，那么我们的所有步骤都可以简化为简单地重新介绍一些手册，例如Linux for Dummies，正如在第一部分的注释中正确指出的那样。 </p><br><p> 首先，从Google Play市场安装Termux：API（重新启动Termux并没有问题）： </p><br><p><img width="100%" src="https://habrastorage.org/webt/vq/4j/yi/vq4jyiirgitt7jgubrxyc8aefki.png"></p><br><p> 接下来，我们需要在T​​ermux控制台中安装API包： </p><br><pre> <code class="bash hljs">updg <span class="hljs-comment"><span class="hljs-comment">#    alias' apt install termux-api</span></span></code> </pre> <br><p> 对于实验，我使用Android 5.1.1，对于Android 7所有者，我需要通过转到“设置”&gt;“受保护的应用程序”来“保护” Termux：API，否则诸如<code>termux-battery-status</code>类的API调用将挂起。  （请参阅<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">项目Wiki</a> ） </p><br><p> 现在，将仔细研究获得的功能。  Termux：API的最新和详细描述可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">项目wiki</a>上找到。 我将尝试选择最直观，最有趣的方式，以便将来获得独立工作的机会。 </p><br><h3>  Termux的一些示例：API </h3><br><ul><li> 端子电池状态 <br> 返回电池状态 <br><br><img width="50%" src="https://habrastorage.org/webt/ih/n2/sm/ihn2sm48ilt9hcwj4xr2fheatxs.png"></li><li> 白蚁亮度 <br> 将屏幕亮度设置为0至255 <br><br><img width="50%" src="https://habrastorage.org/webt/d-/el/bz/d-elbz9rr4jubiqtoykxhmr89do.png"></li><li> 白蚁吐司 <br> 显示临时弹出通知 <br><br><img width="50%" src="https://habrastorage.org/webt/wf/8q/zq/wf8qzq7hf-3wnfxtx-gnwq-jn0m.png"></li><li> 泰勒克斯火炬 <br> 打开手电筒 <br><br><img width="50%" src="https://habrastorage.org/webt/--/rd/pl/--rdplssdedzbzmkktpnqjzidgw.png"></li><li>  termux-wifi-scaninfo <br> 返回有关Wi-Fi网络上次扫描的信息 <br><br><img width="50%" src="https://habrastorage.org/webt/gg/jh/2n/ggjh2npxxg-qmy5ly5fykxgungq.png"></li></ul><br><p> 很容易看到返回的值是字符串，字典，字典，通常，Python可以很好地使用这些数据类型，因此下一步就是安装它。 </p><br><h2> 第5步 </h2><br><h3> 安装Python和Nano </h3><br><p> 要安装Python，我们在终端中编写： </p><br><pre> <code class="bash hljs">updg apt install python apt install python2</code> </pre> <br><p> 现在我们已经安装了2和3个Python。 </p><br><p> 在撰写本文的过程中，我发现了另一个比vim更受我欢迎的nano文本编辑器，让我们安装它： </p><br><pre> <code class="bash hljs">apt install nano</code> </pre> <br><p> 使用它比vim容易，并且nano具有更用户友好的界面。  <i>在Android设备上，vim仍然更方便。</i> </p><br><h3>  Termux中的Python中的HelloWorld </h3><br><p> 总的来说，您可以不用此项目，但是将Python放在Termux中，而我认为不写HelloWorld是不好的语言。 </p><br><p> 我的目标不是教任何Python，所以那些不认识的人可以简单地复制代码（或者自己学习，有足够的文献资料），而有知识的人可以自己做。 我将“默默地”展示一种无需编辑器即可在终端中输入文本的方法。 </p><br><pre> <code class="bash hljs">cat &gt;hello-world.py <span class="hljs-comment"><span class="hljs-comment">#     ( cat 1.txt &gt; 2.txt) #  cat       , #     . str = 'Hello, world!' #   str  "Hello, world!" print (str) #       str # Ctrl + D      (hello-world.py) py hello-world.py #   (py  alias  python)</span></span></code> </pre> <br><p><img width="50%" src="https://habrastorage.org/webt/xt/nt/d3/xtntd34sya3etj9zjohm0dvf2u0.png"></p><br><p> 如果在输入过程中没有发现错误，并且已经按Enter键，那么您将无法转到上一行。为此，请按Ctrl + D结束输入（您可以完全中断Ctrl + Z）并从头开始重复所有操作。 由于我们使用了“&gt;”，因此文件将被完全重写。 因此，如果不确定不能立即编写代码而没有错误，建议不要使用此输入法。 </p><br><h2> 第6步 </h2><br><h3>  Bash脚本 </h3><br><p>  Bash脚本是自动化终端工作的好方法。 该脚本是扩展名为.sh（扩展名是可选的）的文件，其中包含一组终端命令，我们已经研究了其中一些命令。 这是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">大多数命令</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">列表</a> ，所有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">命令</a>都可以正常工作，但是请注意，这是“成人” Linux列表，而不是Termux，但这<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">对于bash脚本</a>来说是个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">好东西</a> 。 </p><br><p> 使用脚本，您可以自动化几乎所有单调的动作。 我们将编写最简单的bash脚本，以显示他创建的变量的值，我将再次使用cat，可以使用普通的文本编辑器，而想要进行自我训练的人可以使用echo。 </p><br><pre> <code class="bash hljs">cat &gt;test.sh <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> str=<span class="hljs-string"><span class="hljs-string">", !"</span></span> <span class="hljs-comment"><span class="hljs-comment">#   str #     ", !" #       '=' # export      (..   ) echo $str #        '$' # Ctrl + D # ./test.sh   ,         #        test.sh  chmod +x test.sh # chmod    (+  / - ) # '+x'       ./test.sh #    </span></span></code> </pre> <br><p><img width="90%" src="https://habrastorage.org/webt/dj/cs/fv/djcsfvcjyastc6p9prw5ei0nooy.png"></p><br> 一种友善的人正确地指出，如果在同一脚本中使用变量，则<code>export</code>命令是多余的，因为它将变量带到环境中，也就是说，使其在脚本外部可以访问，从而占用了额外的内存。 因此，在运行<code>test.sh</code>我们可以从命令行访问<code>$str</code>变量。 <br><br><h3> 带有Termux的Bash脚本：API </h3><br><p> 让我们写一些与臭名昭著的HelloWorlds不同的东西，但是一样没用。 我们的脚本将是： </p><br><ol><li> 执行termux-battery-status API请求 </li><li> 将收到的数据保存到test.txt文件 </li><li> 在屏幕上显示文件中的数据 </li><li> 执行之前编写的hello-world.py程序 </li><li> 将从程序接收的数据写入test.txt文件 </li><li> 在屏幕上显示文件中的数据 </li><li> 将数据从文件传输到剪贴板 </li><li> 显示剪贴板内容 </li><li> 显示带有剪贴板数据的弹出消息 </li></ol><br><p> 首先，创建一个工作文件夹，并将hello-world.py复制为test.py，在该文件夹中创建test.sh和test.txt文件： </p><br><pre> <code class="bash hljs">mkdir bashscript cat hello-world.py &gt;&gt; bashscript/test.py <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> bashscript/ touch test.sh test.txt <span class="hljs-comment"><span class="hljs-comment"># touch   chmod +x test.sh</span></span></code> </pre> <br><p> 现在，以任何方便的方式，将脚本写入test.sh文件： </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #       #! ( ) #          clear #    termux-battery-status &gt; test.txt #  1  2    cat test.txt #  3 python test.py &gt; test.txt #  4  5 cat test.txt #  6 cat test.txt | termux-clipboard-set #  7 # |  .          termux-clipboard-get #  8 termux-clipboard-get | termux-toast #  9</span></span></code> </pre> <br><p> 现在，在bashscript文件夹中，我们编写了./test.sh，我们在Android设备的终端中观察到了： </p><br><p><img width="50%" src="https://habrastorage.org/webt/_l/aa/cc/_laaccc4hzm_asjl_es6_pfeera.png"></p><br><p> 因此，我们编写了计划的bash脚本。 您可以将其与输出到控制台的信息（关于每个动作的执行情况）（使用echo）进行稀释，我将其留给读者。 </p><br><h2> 步骤7 </h2><br><h3> 让我们做些有用的事 </h3><br><p>  <i>比较有用</i> </p><br><p> 我们制定职权范围 <br> 启动后，应用程序应将文件中的随机行放在剪贴板上，并通过弹出消息对此进行通知。 </p><br><p> 我们将以bash脚本为基础，使用Python例程从文件中提取随机行。 让我们制定一个脚本工作计划： </p><br><ol><li> 运行子程序 </li><li> 将例程的结果传输到剪贴板 </li><li> 显示弹出消息 </li></ol><br><p> 我们将决定目录和应用程序文件的名称： </p><br><ul><li> 主目录中的rndstr文件夹 <br><ul><li> 源-我们将从中提取行的文件 </li><li>  rndstr.py-从源文件向控制台输出随机行的例程 </li><li>  rndstr.sh-脚本文件 </li></ul></li></ul><br><p> 我们创建应用程序目录，并移入其中，然后在其中创建文件。 </p><br><p> 可以使用Termux：API将脚本计划的前两点与管道结合起来，我们得到： </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash python ~/rndstr/rndstr.py | termux-clipboard-set # 1  2    termux-toast "OK" # 3 .    ""</span></span></code> </pre> <br><p> 在源文件中，您可以将逻辑上划分为行的任何文本放入，我决定格言如下： </p><br><div class="spoiler">  <b class="spoiler_title">列出源文件</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">   . .    .    ,  . .    . .    . .       . .   ,    ,   . .       ,   . .       ,    . .      ,     . .        . .     ,    . .       ,    . .     -  ,    .      ,     .   ,     ,     . .    ,    . .       ,  . .     ,   . .     ,    .     ,   . .          . .         .           ,     . .   -  .  ,  . .         . .     ,   ,  .        . .     ,    ,  ,     . .     !   ! </code> </pre> </div></div><br><p> 我们仍然需要创建一个例程来从源文件中提取随机行。 <br> 我们将描述子程序的算法： </p><br><ol><li> 打开源文件 </li><li> 计算打开文件中的行数 </li><li> 我们关闭文件（没有太多时间可以打开文件了） </li><li> 在源文件的行数之内生成一个随机整数 </li><li> 打开源文件 </li><li> 我们在生成的数字的数字下打印一行 </li><li> 关闭档案 </li></ol><br><p> 我们用Python实现该算法（我在Python 3.7下编写）： </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random  <span class="hljs-comment"><span class="hljs-comment">#      import os  #    path = os.path.abspath(__file__) #       rndstr.py path = os.path.dirname(path)  #      path = path  + '/source' #       source f = open(path)  #   i = 0  #   for str in f: i+=1  #    f.close()  #   j = int(round(i * random.random()))  #      0  i f = open(path)  #   i = 0  #   for str in f:  #       if i == j:  #             print (str, end='')  #             break #       i+=1  #    1 f.close()  #  </span></span></code> </pre> <br><p> 创建并记录文件后，您需要为<code>rndstr.sh</code>文件赋予执行权限，并创建别名以快速启动。 </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> rnst=<span class="hljs-string"><span class="hljs-string">"~/rndstr/rndstr.sh"</span></span></code> </pre> <br><p> 现在在终端中输入<code>rnst</code>我们在剪贴板上得到了一个随机格言，例如可以用于对应。 </p><br><p> 所以我们至少写了一些有用的东西。 比较有用。 </p><br><h3> 聚苯乙烯 </h3><br><p> 在最后一步中，我故意不提供屏幕截图，也没有详细分析某些操作，只写文件的内容，以便读者有机会自己工作。 </p><br><p> 最初，我计划在本系列中展示如何使用nmap，sqlmap，但没有我，已经有很多关于此主题的文章。 如果您希望我继续“逐步完成Termux”，则下面有一项调查，您可以在评论中提出其他建议。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN445868/">https://habr.com/ru/post/zh-CN445868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN445854/index.html">查找用于UI生成的JS框架</a></li>
<li><a href="../zh-CN445856/index.html">5年后电报</a></li>
<li><a href="../zh-CN445858/index.html">上古：电话很古怪</a></li>
<li><a href="../zh-CN445860/index.html">比特币（BTC）的低波动性将导致下一次加密牛市</a></li>
<li><a href="../zh-CN445862/index.html">来自各个方面的JS：HolyJS 2018莫斯科的十大报告</a></li>
<li><a href="../zh-CN445878/index.html">摆脱捆绑中的重复包装</a></li>
<li><a href="../zh-CN445880/index.html">英文面试：如何正确地讲述自己</a></li>
<li><a href="../zh-CN445884/index.html">Bereshit登月任务-成功的八个里程碑，XPRIZE基金会提供了100万美元（成功着陆）</a></li>
<li><a href="../zh-CN445886/index.html">“如何停止燃烧”，或关于现代人信息流入的问题</a></li>
<li><a href="../zh-CN445890/index.html">PyTest Neo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>