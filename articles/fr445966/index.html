<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê° ‚òÑÔ∏è üí∫ Note de l'architecte frontal # 1. Vous ne pouvez pas simplement obtenir et utiliser Redux. üë©üèΩ‚Äç‚úàÔ∏è üñïüèª ‚ôéÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Clause de non-responsabilit√© 
 Cher lecteur! Si vous n'avez aucune id√©e de ce que sont React et Redux, lire plus n'a pas de sens, c'est un non-sens te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Note de l'architecte frontal # 1. Vous ne pouvez pas simplement obtenir et utiliser Redux.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445966/"><h4>  Clause de non-responsabilit√© </h4><br>  Cher lecteur!  Si vous n'avez aucune id√©e de ce que sont React et Redux, lire plus n'a pas de sens, c'est un non-sens technique suppl√©mentaire.  S√©rieusement, comprendre √† quoi sert cette note, n√©cessite de travailler avec ces biblioth√®ques - malgr√© le fait que j'essaierai d'√©crire clairement, cet article n'est pas d'entr√©e de gamme.  Et c'est une exp√©rience personnelle et une opinion bas√©e sur la pratique. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a1/1ef/58a/4a11ef58abb70667a79ec9f1dc266d81.jpg" alt="image"></div><br><h4>  Quel est le probl√®me avec Redux? </h4><br>  J'ai alors d√©cid√© d'√©crire, mais qu'est-ce qui ne va pas avec l'utilisation de redux dans mon projet et des milliers d'autres?  Je r√©dige des applications react / redux depuis avril 2016 (trois ans).  Il est temps de d√©couvrir d√©j√† des choses int√©ressantes ... Et puis il y a eu des conf√©rences et des reportages, sp√©cialement destin√©s aux d√©butants, mais il n'y a pas eu de retour en arri√®re des adultes et pas de r√©trospective.  En attendant, quelqu'un met des ast√©risques dans des paquets qui cochent "N'√™tes-vous pas 13 heures", je briserai le mur des st√©r√©otypes dominants. <br><a name="habracut"></a><br><h4>  Mais redux n'est pas n√©cessaire! </h4><br>  Vous dites, et √† certains √©gards, vous aurez raison.  Vous ne pouvez pas l'utiliser depuis 2018 - il y a une tonne d'articles sur ce sujet sur Internet, mais jusqu'√† pr√©sent avec la ¬´non-utilisation¬ª vous obtenez une ferme collective, il deviendra clair ci-dessous pourquoi.  Et le nombre d'alternatives est hors √©chelle et encore plus. <br><br>  Nous utilisons Redux, car c'est une norme accept√©e (au moins pour r√©agir), la pr√©visibilit√© et la fiabilit√© de Redux sont importantes pour nous.  Mais cela nous manque s√©rieusement, en fait dans ce <br><br><h4>  R√©clamation </h4><br>  Probablement, pour clarifier ce qu'est la revendication sur les points, vous devez d'abord revenir au pass√©, aux racines, comme vous le souhaitez, √† savoir ouvrir la documentation du glorieux redux et lire les postulats.  Je ne consid√©rerai que le premier d'entre eux.  Si cela vous int√©resse - partagez les commentaires, j'analyserai bien d'autres points. <br><br><h4>  La seule source de v√©rit√© ... </h4><br>  Ici, nous avons une embuscade.  Bien s√ªr, il dit qu'il peut y avoir 1 √©tage, redux d√©clare ainsi sa diff√©rence avec l'architecture de flux.  Mais si vous regardez plus largement: la r√®gle est-elle observ√©e dans un vrai projet?  Vous direz: tout √† fait.  Je d√©clare (d√©clare) 1 c√¥t√©, je le transf√®re au fournisseur puis ... <br><br>  Techniquement, le processus est d√©crit correctement.  Mais je peux dire que les gens sont soumis √† des distorsions de perception, de logique, et puisque les programmeurs sont toujours des gens ... Eh bien, vous comprenez √† quoi je m√®ne (si vous ne comprenez pas: les programmeurs sont sujets √† des distorsions de perception, de logique, etc.) <br>  La principale distorsion ici est que, comme beaucoup de mes coll√®gues, je suis habitu√© au fait que si nous n'utilisons pas le terme ¬´stocker¬ª par rapport √† autre chose que redux, il n'y en a pas d'autre. <br><br><h4>  Et voici la r√©action </h4><br>  Une caract√©ristique technique appel√©e √©tat interne voulait cracher sur ce postulat.  Il cr√©e simplement une m√©moire de type √©tat interne dans n'importe quel endroit pratique.  Il y a un composant - il y a un √©tat qui a un m√©canisme pour mettre √† jour et influencer le composant.  La diff√©rence d'utilisation (√©tat du magasin, modifications de mise √† jour et de diffusion) est presque invisible.  Vous pouvez vous opposer: il n'est pas tout √† fait clair pourquoi vous n'aimez pas l'√©tat du composant.  Il n'est pas comme les √©diteurs, comment peuvent-ils m√™me √™tre compar√©s!  C'est interne, eh bien, quels drapeaux y stocker. <br><br>  Comprenez que l'essence ne change pas du fait que vous renommez l'√©l√©ment.  Il y a un marteau lundi, cela ne fait pas le jour de la semaine.  Oui, les deux lundis sont durs, les autres jours et les marteaux sont plus faciles.  Mais de par son nom, le marteau ne cesse pas d'√™tre un instrument √† percussion. <br><br>  L'√©chelle du composant de r√©action de redux et d'√©tat est diff√©rente, mais l'essence, lorsqu'elle est utilis√©e aujourd'hui, en est une. <br><br>  Je vais l'expliquer de cette fa√ßon: dans la plupart des cas, les donn√©es de l'√©tat interne du composant sont transmises √† l'enfant via des accessoires, mais, quelle que soit leur √©vidence, les donn√©es redux, lorsqu'elles sont int√©gr√©es √† react, p√©n√®trent √©galement dans les composants via des accessoires.  Du point de vue du composant qui accepte les accessoires, peu importe ce qui se trouve √† l'ext√©rieur.  Autrement dit, pour l'utilisateur final - ce magasin redux, cet √©tat interne - est le m√™me. <br><br>  En outre, cet √©tat interne peut ne pas d√©pendre des accessoires du composant dans lequel il est d√©clar√©.  Ensuite, nous obtenons un isolement qui fait d'un tel √©tat interne un magasin encore plus grand que vous ne l'imaginez. <br><br>  Pour qu'il soit vraiment interne, il ne doit affecter le composant que l√† o√π il est d√©clar√©, sans provoquer de fuites sur les composants enfants.  Est-ce difficile?  Tout √† fait, parce que sa signification est presque compl√®tement perdue.  C'est un autre signe que l'√©tat interne est un magasin.  Apr√®s tout, nous avons simplement supprim√© un point de l'objectif de ¬´stocker l'√©tat, mettre √† jour et diffuser les changements¬ª - diffuser les changements.  Tout, l'Etat est perdu. <br><br>  Autrement dit, le principal probl√®me avec un √©tat interne est qu'il est en concurrence avec redux pour les donn√©es, perd √† long terme et merde.  Nous avons toutes sortes de techniques telles que la lev√©e de l'√©tat (c'est lorsque le fr√®re de l'√©l√©ment h√¥te est n√©cessaire, donc la partie √©tat et toute la logique de travail avec celle-ci sont transmises au parent, passant beaucoup de temps √† r√©√©crire et tester la logique de travail), etc. Des bogues apparaissent, des frais g√©n√©raux dans les am√©liorations et beaucoup de joie.  C'est tout le bruit qui g√¢che notre logiciel au stade du d√©veloppement.  Nous n'avons pas atteint les ventes, mais le logiciel est d√©j√† comme √ßa. <br><br>  Autrement dit, pour tous les signes et probl√®mes, nous avons plus d'une histoire et de nombreux probl√®mes associ√©s √† cela.  La derni√®re chose, probablement, sera la suivante: <br><br>  J'adore aussi redux pour le type d'outils de d√©veloppement qu'il poss√®de.  Lorsque j'ai commenc√©, nous avons utilis√© un enregistreur qui a simplement consolid√© toutes les actions, sans toutefois donner une image compl√®te de ce qui se passait.  Maintenant - c'est l'assistant principal et l'ami.  Chez React, ils sont √©galement repr√©sent√©s.  En g√©n√©ral, devtools est la raison pour laquelle n'importe quel pub est loin de Redux.  Comme une fourmi √† une baleine bleue. <br><br>  <b>Probl√®mes</b> (il n'y aura pas de preuves ADN): <br><br><ol><li>  changer l'√©tat interne via react devtools ne conduit parfois pas √† une mise √† jour ou au r√©sultat souhait√© - je p√®che sur l'int√©gration avec redux. </li><li>  l'√©tat interne rompt le voyage dans les devtools redux.  La super fonctionnalit√© avec le voyage dans le temps disponible via l'architecture redux ne fonctionne pas gr√¢ce √† l'architecture d'√©tat interne r√©actif.  L'√©tat interne ne se souciait tout simplement pas d'un changement de redux, il a son propre √©tat.  Timetravel ne fonctionne tout simplement pas.  Certains √©l√©ments ne sont tout simplement pas mis √† jour, partiellement mis √† jour, etc. Toute cette √©pop√©e avec une synchronisation de code asynchrone en aval. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/991/8fd/5c2/9918fd5c23836212a6d11fc1b75351be.jpg" alt="image"></div><br><h4>  Un exemple, bien s√ªr, aspir√© par la pratique </h4><br>  Vous travaillez sur un nouveau projet pour vous, ou votre coll√®gue a √©crit une fonctionnalit√© il y a un an, et vous devez maintenant l'√©tendre.  En g√©n√©ral, il y a la t√¢che de finaliser le code de quelqu'un d'autre.  Vous commencez √† enqu√™ter et comprenez qu'il n'y a pas de donn√©es dans les √©diteurs.  Il n'y a aucune action, r√©ducteur dans le code qui stocke les donn√©es dont vous avez besoin.  Et vous commencez le voyage √† travers l'arbre des composants √† la recherche des tr√©sors et trouvez-les (!!!) m√™me quelques pi√®ces.  Vous demandez √† mes coll√®gues, mais la r√©ponse est standard: je ne me souviens pas avoir √©crit √† l'√âtat plus rapidement, nous n'avions pas le temps, etc.  Vous allez √† la source et comprenez que son √©tat actuel n'implique pas de r√©vision.  Vous r√©√©crivez du code test√© et fonctionnel pour apporter des modifications et ajouter de nouvelles fonctionnalit√©s. <br><br>  <i>La pr√©sence d'une alternative pernicieuse sous la forme d'un √©tat interne fait son sale boulot.</i>  <i>Apr√®s tout, maintenant c'est bon march√©, et peu importe ce qui se passe dans un an.</i> <br><br><h4>  Peu de m√©taphores </h4><br>  Il ressemble √† de la mauvaise nourriture - il semble savoureux et bon march√©, mais apr√®s un an ou trois - le tractus gastro-intestinal cesse d'ob√©ir et vit sa propre vie.  Vous d√©pensez beaucoup de temps et d'argent pour retrouver votre ancienne sant√© et n'y r√©ussissez pas toujours. <br><br>  <b>Redux et React Internal State sont des concurrents</b> , en tant que grandes et petites entreprises dans un cr√©neau.  Le produit principal est les donn√©es et l'influence.  Le logiciel est le consommateur de leurs produits.  Il existe de nombreuses analogies, mais l'essence reste la m√™me - lorsque nous d√©veloppons des logiciels - nous n'avons pas besoin de concurrence. <br><br>  <i><b>Nous sommes les ¬´dictateurs¬ª du code du programme et toute concurrence doit √™tre supprim√©e, le march√© libre doit √™tre interdit et l'√©conomie planifi√©e et le monopole d'√âtat doivent dominer le consommateur.</b></i> <br><br>  Ahem, quelque chose m'ennuyait.  Tout devrait se d√©rouler comme pr√©vu, en g√©n√©ral.  Nous avons des sprints, des versions et plus encore, et le logiciel a un co√ªt fini et une dur√©e de vie / entr√©e sur le march√©.  C'est tr√®s important, et nous ne pouvons pas permettre l'√©meute sur le navire, le soul√®vement des biblioth√®ques. <br><br><h4>  La conclusion est simple. </h4><br>  N'utilisez pas d'autres r√©f√©rentiels avec redux.  Les exceptions ne peuvent faire que des cas tr√®s isol√©s.  Par exemple, les composants qui en principe ne sont pas contr√¥l√©s par redux sans la couche correspondante et ne l'affectent pas. <br><br><h4>  Exemple </h4><br>  J'ai d√©velopp√© le module autonome dans une branche et refactoris√© le magasin dans une autre - en g√©n√©ral, mon approche de la gestion du magasin et de l'√©tat est un sujet distinct pour la publication.  J'ai commenc√© √† refactoriser le module, mais au moment du d√©but et de la fin de l'√©criture du module, le refactoring au test et √† l'assistant ne s'est pas arr√™t√©.  Le refactoring est important et n√©cessite un recours r√©fl√©chi qui doit √™tre planifi√© - en g√©n√©ral, vous ne pouvez pas simplement prendre et refactoriser. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a39/bb2/c5f/a39bb2c5f0b89a7d9085521f74967e38.jpg" alt="image"></div><br>  Par cons√©quent, connaissant les changements √† venir dans le magasin, je ne l'ai pas utilis√© pour d√©velopper une nouvelle fonctionnalit√©.  Cela augmenterait parfois les co√ªts de mise √† jour du refactoring et des tests abandonn√©s. <br>  Ce que j'ai fait: je me suis inscrit pour un minimum de donn√©es.  Les donn√©es et leur structure n'ont pas souffert de refactorisation, le code qui les a g√©n√©r√©es a souffert, enregistr√©, etc. Je n'ai pas √©crit d'octet aux √©diteurs.  Je v√©rifie si l'utilisateur est connect√© et quelques champs suppl√©mentaires. <br><br>  Pour mes besoins, j'ai lav√© PubSub avec des canaux et une API simple.  Oui, oui, pubsab.  Absence de douleur douloureuse normale.  Voyage dans le temps - Douleur.  En g√©n√©ral, je pr√©vois d'√©crire une extension pour Chrome sous la forme de devtools et il est possible de publier une r√©impl√©mentation en tant que concurrent pour redux sur le github.  J'ai une tonne de plaintes concernant redux, que je ne soul√®verai pas dans cet article, mais PubSub ne les a pratiquement pas.  Outre le fait que je me souvenais de l'enregistreur redux ... <br><br>  Et donc le module a son propre stockage, sa propre connexion au serveur. <br><br>  Autrement dit, redux n'affecte pas du tout le module, ne peut pratiquement pas affecter ce stockage (il n'y a que trois champs dans l'abonnement), mais le module et PubSub n'affectent en rien redux.  Cette s√©paration exclut la concurrence. <br><br>  La question "o√π stocker les donn√©es?"  lors du d√©veloppement du module, je ne l'ai jamais rencontr√©.  Mais quand il s'agit de redux vs √©tat interne - pour beaucoup, cette question se pose presque constamment.  J'ai d√©cid√© de r√©pondre une fois pour toutes √† cette question. <br><br>  <b>Mon opinion architecturale est:</b> <b><br><br></b>  <b>Stockez les donn√©es uniquement dans redux (global, m√™me ¬´interne¬ª), si elles sont connect√©es √† votre projet React en tant que r√©f√©rentiel principal, n'utilisez pas de r√©f√©rentiels qui lui feront concurrence.</b>  Cela augmentera la fiabilit√© et l'impact de cette biblioth√®que et de ses outils de d√©veloppement (le suivi temporel et le suivi de toutes les donn√©es par √©tapes acc√©l√®rent le d√©veloppement et la recherche d'√©ventuels probl√®mes - les changements synchrones sont plus raides et plus faciles √† asynchrones). <br><br>  <i>Peut-√™tre qu'il vaut la peine d'ajouter une biblioth√®que qui exclut compl√®tement l'√©tat interne du d√©veloppement?</i>  <i>Ou remplace l'√©tat interne par une s√©lection de redux, par exemple?</i>  J'ai commenc√© √† en √©crire un il y a un an, j'ai termin√© √† 90% et j'ai m√™me r√©alis√© 1 rapport.  Que dites-vous?  Vous en avez besoin? <br><br>  J'esp√®re que vous avez appr√©ci√© cette note :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445966/">https://habr.com/ru/post/fr445966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445952/index.html">Un billion de petits c√©libataires</a></li>
<li><a href="../fr445954/index.html">Acc√©l√©rateur d'IA de HSE, MTS et Rostelecom</a></li>
<li><a href="../fr445958/index.html">SPDS GraphiCS - syst√®me de fa√ßade et de toiture</a></li>
<li><a href="../fr445962/index.html">Stage en informatique: le point de vue du manager</a></li>
<li><a href="../fr445964/index.html">MEPhI accueillera une olympiade √©tudiante sur la s√©curit√© de l'information: comment participer et ce qu'elle donne</a></li>
<li><a href="../fr445970/index.html">Comment LANIT a √©quip√© les syst√®mes d'ing√©nierie et informatiques d'un centre de n√©gociation √† Sberbank</a></li>
<li><a href="../fr445972/index.html">Bigdata des champs labour√©s en m√©decine et pharmaceutique</a></li>
<li><a href="../fr445974/index.html">Comment promouvoir un d√©butant et ne rien casser</a></li>
<li><a href="../fr445978/index.html">Traverser un h√©risson avec un h√©risson: OpenJDK-11 + GraalVM</a></li>
<li><a href="../fr445980/index.html">Nous programmons le contr√¥le vocal d'un h√©licopt√®re en utilisant Node.js et ARDrone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>