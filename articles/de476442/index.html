<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçò üßëüèΩ‚Äçü§ù‚Äçüßëüèª ü§∞ Geben Sie etwas Platz oder einen Mikrocontroller wie ein Frequenzmesser ‚õ±Ô∏è üîí üçÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jeder kennt Satellitenkoordinatensysteme. Sie informieren Sie auch √ºber die Geschwindigkeit und die aktuelle Uhrzeit. Auf der Basis solcher Systeme we...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Geben Sie etwas Platz oder einen Mikrocontroller wie ein Frequenzmesser</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476442/"><p>  Jeder kennt Satellitenkoordinatensysteme.  Sie informieren Sie auch √ºber die Geschwindigkeit und die aktuelle Uhrzeit.  Auf der Basis solcher Systeme werden exakte Zeitserver aufgebaut, die hier und nicht nur hier bereits mehrfach erw√§hnt wurden.  Die Genauigkeit dieser Systeme w√§chst, der Preis sinkt, kurz gesagt, der Fortschritt steht nicht still.  Es scheint, dass es in letzter Zeit um Millisekunden ging, und jetzt wundern Mikrosekunden niemanden.  Und der Tag ist nicht mehr fern, wenn ... </p><br><p>  Ehrlich gesagt, dieser Tag ist schon f√ºr mich gekommen.  Vor nicht allzu langer Zeit wurde ich darauf aufmerksam, dass einer der Hersteller seiner Module eine Genauigkeit des PPS-Ausgangssignalintervalls in der Gr√∂√üenordnung von zehn Nanosekunden verspricht. </p><br><p>  Mit anderen Worten, ein zweiter Standard erschien mit sehr anst√§ndiger Genauigkeit.  Es stimmt, es ist nicht immer zur Hand und h√§ngt oft von √§u√üeren Umst√§nden ab, aber Sie k√∂nnen g√ºnstige Bedingungen erreichen und es bekommen.  Und vor allem, wie man sich selbst kopiert. </p><br><p>  F√ºr alle F√§lle habe ich mir angesehen, wie es anderen Herstellern √§hnlicher Produkte geht, und dabei die gleichen technischen Spezifikationen ermittelt.  "Trend jedoch", ein Gedanke schoss mir durch den Kopf, ungef√§hr wie bei Shtirlits.  Es war notwendig, etwas zu tun. </p><a name="habracut"></a><br><p>  Diejenigen Leser, die wissen, wie man einen Widerstand von einer Leiterplatte l√∂tet oder wie man eine Mikroschaltung l√∂tet, und sogar wissen, wie man das macht, stimmen mir mental zu, dass ein Frequenzmesser mit einer Genauigkeit von 7-8 Zeichen niemals schaden wird.  Vor allem, wenn es wenig Platz beansprucht und Sie nicht viel Geld ausleihen m√ºssen, um es zu kaufen.  Und diejenigen, die nicht aufh√∂ren wollen zu denken, k√∂nnen an eine Uhr denken, die f√ºr einige Sekunden im Jahr verwechselt wird (in der siebten Ziffer, Clara).  Fans der Amateurfunkkommunikation werden sich wahrscheinlich an das Design eines guten, selbst hergestellten Schmalbandfilters f√ºr Quarzresonatoren erinnern. </p><br><p>  Das erste, was zu tun war, war die richtige Hardware zu finden.  Mir hat das einfache Evaluation Board mit einem kleinen Teseo-LIV3F-Modul einer bekannten Firma gefallen.  Unten ist, wie sie aussieht. </p><br><p><img src="https://habrastorage.org/webt/js/mx/_d/jsmx_d6f5hgvdwnobhpcrubjc5s.jpeg"></p><br><p>  Dieses Ding wird mit einer aktiven Antenne verkauft, die n√§her am Fenster installiert werden kann, damit die Satelliten gut "sehen" k√∂nnen.  Jumper werden an die Tafel gesetzt, um das Storytelling und die erfolgreiche Programmierung fortzusetzen.  Das Foto enth√§lt auch Schaltungsverbesserungen in Form einer einzelnen Diode mit guter Geschwindigkeit. </p><br><p>  Das Schema der Verbesserungen wird unten gezeigt.  Der Hersteller hat vorausgesetzt, dass dieses Board in ein geeignetes Nucleo-Evaluierungsboard mit integriertem Mikrocontroller gesteckt werden kann (tats√§chlich handelt es sich um Anschl√ºsse f√ºr das Arduino, aber ich m√∂chte nicht mit 32 Bit fortfahren).  In der Beschreibung des GPS / GNSS-Moduls selbst habe ich Folgendes gefunden. </p><br><p><img src="https://habrastorage.org/webt/pp/a0/vw/ppa0vwykeian3mxsratvkynlzuk.jpeg"></p><br><p>  Dies ist sehr gut und kann als erste Ann√§herung an einen guten Frequenzz√§hler dienen.  Jetzt habe ich ein sehr genaues zweites Intervall und kann die Frequenz von Oszillationen beispielsweise meines eigenen thermostatisch gesteuerten Kristalloszillators berechnen.  Und vielleicht sogar, um es in die f√ºr sich selbst notwendige Richtung zu lenken.  Es wird wahrscheinlich sp√§ter sein.  In der Zwischenzeit wollte ich die Frequenzen der in der Wirtschaft angesammelten Quarzresonatoren messen. </p><br><p>  Auf dem STM32L476RG ist eine geeignete Nucleo-Platine aufgebaut.  Es kommt ohne Quarzresonator (die Uhr z√§hlt nicht).  Unterhalb des Fotos sehen Sie die Pfeile, an denen die fehlenden Elemente angel√∂tet werden mussten. </p><br><p><img src="https://habrastorage.org/webt/rh/0t/ly/rh0tlyerkgwb9rkg1rugucmereq.jpeg"></p><br><p>  Diese Board-Option wird aus drei Gr√ºnden ausgew√§hlt.  Erstens arbeitet der Mikrocontroller-Generator mit einem externen Resonator von 4 bis 48 MHz.  Nicht alle Nucleo-Mikrocontroller-Boards haben solche Toleranzen.  Wir werden diesen Generator mit unserem Quarz betreiben.  Zweitens kann der serielle Port (UART) von einem separaten eingebauten RC-Generator mit 1% Genauigkeit bei einer Frequenz von 16 MHz getaktet werden.  Daher ist es nicht erforderlich, die Einstellungen und Teiler in der UART-Konfiguration bei einer √Ñnderung der Frequenz des externen Generators zu √§ndern.  Und am wichtigsten ist, dass der Quarzresonator an der Wand montiert werden kann. Hier k√∂nnen Sie die Steckverbinder installieren, um nicht jedes Mal den n√§chsten Resonator anl√∂ten zu m√ºssen. </p><br><p>  Die serielle Schnittstelle ist bereits mit der virtuellen USB-Schnittstelle im integrierten Debugger verbunden.  Sie k√∂nnen also den Terminalemulator verwenden, um Informationen anzuzeigen.  Nach dem Finalisieren und Installieren von zwei Abf√§llen f√ºr den Quarz vom Spannzangenanschluss sieht die Platine wie folgt aus. </p><br><p><img src="https://habrastorage.org/webt/vp/xz/fj/vpxzfj8nws3p7jg5vb4egg_i4_w.jpeg"></p><br><p>  Jetzt m√ºssen wir den Timer f√ºr genau eine Sekunde starten und er z√§hlt die Impulse seiner Systemuhr, dh die Frequenz unseres Quarzresonators.  Gl√ºcklicherweise bietet der Timer einen Modus, in dem er gleichzeitig zur√ºckgesetzt wird und ab der ansteigenden Flanke des externen Impulses startet. </p><br><p>  Ich wollte es sofort machen, um nicht ein paar Sekunden zu mitteln, sondern um die Frequenz in zehn Sekunden zu messen, das hei√üt genauer.  Zu diesem Zweck musste der Schaltung eine Diode hinzugef√ºgt und diese Idee programmgesteuert unterst√ºtzt werden.  Die Verfeinerung der Schaltung ist unten gezeigt. </p><br><p><img src="https://habrastorage.org/webt/rn/ln/ob/rnlnobsocqde8ehl8e7s5n1unfc.jpeg"></p><br><p>  Die folgenden Abbildungen zeigen, wie aus einer Sekunde ein Zehn-Sekunden-Intervall erstellt wird. </p><br><p><img src="https://habrastorage.org/webt/bf/5b/hr/bf5bhrse2teowwv6h2gu53yugs0.jpeg"></p><br><p>  Das PPS-Signal wird √ºber eine Diode dem Timer und direkt dem zus√§tzlichen externen Interrupt-Eingang zugef√ºhrt.  Im Interrupt des Timers ist ein externer Interrupt zul√§ssig, der sich bis zu zehn Mal verbietet und den Pull-up-Widerstand von oben nach unten √§ndert. </p><br><p>  Die roten Pfeile kennzeichnen die Momente des Timer-Interrupt-Vorgangs und die gr√ºnen kennzeichnen die Momente des Starts des externen Interrupts, nach denen die erforderlichen Sekundenintervalle ber√ºcksichtigt werden.  Blau zeigt Ein-Aus-Pull-Up-Widerst√§nde.  Das Projekt wurde in IAR gemacht und Sie k√∂nnen es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier sehen</a> .  Das Foto unten zeigt das Ergebnis des Steuerungsprogramms in Verbindung mit dem Terminalemulator, der den eingeschwungenen Zustand anzeigt. </p><br><p><img src="https://habrastorage.org/webt/5p/o1/lt/5po1ltzl4lnatggoioblytygzt8.jpeg"></p><br><p>  Um das Diagramm und nicht die trockenen Linien der Frequenzwerte zu sehen, musste ich ein kleines Hilfsprogramm f√ºr Windows erstellen.  Ihr Kadaver befindet sich am selben Ort wie das Firmware-Projekt. </p><br><p>  Alle Versuche wurden nach dem gleichen Szenario durchgef√ºhrt.  Vor den Messungen wurde die Platte 15 bis 20 Minuten im K√ºhlschrank stehen gelassen, wo sie leicht unter Null lag.  Dann wurde es nat√ºrlich eine halbe Stunde lang auf Raumtemperatur erw√§rmt.  Dann erhielten die Platine und der Resonator einige Minuten lang warme Luft aus dem Haartrockner (hier funktionierten die gleichen Bedingungen nicht). </p><br><p>  Gute Resonatoren verhielten sich entsprechend der Temperaturabh√§ngigkeit des AT-Schnitts des Kristalls gut.  Diese Grafiken (oder mehrere Kopien?) Sind im Internet leicht zu finden.  Die Ergebnisse der Messungen von drei Resonatoren bei 16 MHz sind nachstehend gezeigt. </p><br><p><img src="https://habrastorage.org/webt/a8/av/js/a8avjsmwtvw7psub1ch9c2ncxbq.jpeg"></p><br><p>  Dann stellte sich heraus, dass es zu dem √ºblichen Verhaltensbild Ausnahmen gibt.  Die folgenden Daten zeigen zwei Quarze desselben Typs und h√∂chstwahrscheinlich desselben Ursprungs, die sich unterschiedlich verhalten haben. </p><br><p><img src="https://habrastorage.org/webt/x-/tl/ff/x-tlffruiqyfvtw8gbjersttc68.jpeg"></p><br><p>  Auf dem Resonator, der sich wie gewohnt verh√§lt, atmete ich nur ein wenig, und der zweite entschied sich, mehr zu erhitzen, weil er sich anders zeigte.  Wie einfach es ist, die Temperaturabh√§ngigkeit von ihm oder einer anderen Person zu erkennen. </p><br><p>  Eine weitere interessante Beobachtung.  Nach dem Aussetzen der Temperatur kehrt der Resonator nicht zu fr√ºheren Frequenzwerten zur√ºck, oder ich hatte nicht die Geduld zu warten.  In jedem Fall spielt es keine Rolle, ob Sie sich nach dem sechsten Tag nicht um die Schilder k√ºmmern. </p><br><p>  Hier ist eine weitere Beobachtung.  Dies ist ein und derselbe Resonator, der zweimal gemessen werden musste, weil er f√ºr √úberraschung sorgte.  Ich habe noch keine Erkl√§rung f√ºr ein solches Verhalten gefunden und habe mir keine ausgedacht. </p><br><p><img src="https://habrastorage.org/webt/bd/av/1y/bdav1ynmfs4o1ebtqabyvtabhw4.jpeg"></p><br><p>  Es w√§re n√ºtzlich, die individuelle Temperaturabh√§ngigkeit der Frequenz f√ºr einen individuellen Resonator zu entfernen.  Dann k√∂nnen Sie mit einem guten Temperatursensor und Kenntnis der Temperaturkurve des Resonators einen hochstabilen Generator mit Sekundenintervallen herstellen.  Dies erfordert jedoch bereits eine W√§rmekammer.  Ich frage mich, welche Temperatursensoren heute als gut angesehen werden k√∂nnen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de476442/">https://habr.com/ru/post/de476442/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de476424/index.html">Frameworks - mehr Minuspunkte als Pluspunkte</a></li>
<li><a href="../de476428/index.html">Nginx VTS Stats, Mockify - Mock API, Wiremock und Mockify Vergleich</a></li>
<li><a href="../de476430/index.html">So erstellen Sie das perfekte technische Portfolio</a></li>
<li><a href="../de476434/index.html">Wir schreiben USB-Treiber f√ºr verlassene Ger√§te</a></li>
<li><a href="../de476436/index.html">Berichte vom ersten Treffen der Roboterentwickler in Russland √ºber das Roboterbetriebssystem</a></li>
<li><a href="../de476444/index.html">Entmystifizierung der Prinzipien des Quantencomputers</a></li>
<li><a href="../de476446/index.html">Jira Plugins: Einige Beispiele f√ºr die erfolgreiche Erfindung des Fahrrads</a></li>
<li><a href="../de476448/index.html">Erkundung des Sandshaders des Journey-Spiels</a></li>
<li><a href="../de476450/index.html">√úberblick √ºber cPanel - eine webbasierte Konsole zum Verwalten von Websites und zum Hosten</a></li>
<li><a href="../de476452/index.html">Speichern von Schl√ºsselwerten oder wie unsere Anwendungen komfortabler geworden sind</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>