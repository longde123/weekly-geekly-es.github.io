<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìπ ‚ôåÔ∏è üò´ Uma vez em uma empresa HFT ... ü•å üë®‚Äçüëß‚Äçüëß üìü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Minha hist√≥ria pessoal de negocia√ß√£o, todas as partidas s√£o aleat√≥rias. 

 Comecei minha carreira na HFT na filial australiana de uma das maiores empr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Uma vez em uma empresa HFT ...</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414037/"><p>  <em>Minha hist√≥ria pessoal de negocia√ß√£o, todas as partidas s√£o aleat√≥rias.</em> <br><img src="https://habrastorage.org/getpro/habr/post_images/770/614/b93/770614b9339d8d51155029f36da7f1da.jpg" alt="imagem"><br>  Comecei minha carreira na HFT na filial australiana de uma das maiores empresas comerciais dos EUA como programador de C ++.  No primeiro dia, fui recebido por um escrit√≥rio com enormes janelas com vista para o porto de Sydney, um dos quais foi escrito com uma caneta de feltro "&lt;2ms".  Essa foi a principal tarefa para uma d√∫zia de desenvolvedores, mas at√© agora, n√£o para mim.  Ent√£o ... <a name="habracut"></a></p><br><h2 id="pervonachalnyy-shok">  Choque inicial </h2><br><p>  Um dos sujeitos prop√¥s a ideia de negociar op√ß√µes na Bolsa de Valores da Austr√°lia (ASX), ou melhor, spreads de op√ß√µes e suas combina√ß√µes com hedge obrigat√≥rio.  Ele precisava de algo que pudesse lidar com v√°rias regras de negocia√ß√£o confusas e ser integrado √† nossa plataforma de negocia√ß√£o, chamada Orc.  Estes foram os primeiros anos da d√©cada de 2000 e eu escrevi minha solu√ß√£o para ela no VB6 no Windows 2000. Ao fazer isso, usei C ++, Boost e o analisador Spirit multithread para integrar-se ao Orc.  O √∫ltimo calculou √°rvores binomiais ou trinomiais para avaliar as op√ß√µes dos EUA no ASX sob demanda.  Para o meu c√≥digo de pre√ßos, usei o c√≥digo de outra pessoa no VBA, linha por linha, reescrito em C ++. </p><br><p>  No entanto, o Orc nem sempre calculava o pre√ßo sob demanda, geralmente usava cache.  Se os par√¢metros originais permanecerem os mesmos, o Orc simplesmente retornar√° o pre√ßo da mem√≥ria, em vez de recont√°-lo novamente.  Essa plataforma era lenta demais para competir com sua pr√≥pria plataforma Timber Hill (agora Interactive Brokers) ou com o Ord Liquidator do IMD, que era o sistema de caixas mais r√°pido da √©poca.  Ela parecia pobre demais para competir com os outros no desempenho, independentemente dos truques que eu fiz com ela.  No entanto, com um grande cache de pre√ßos de op√ß√µes multidimensionais (os valores ausentes foram obtidos por meio de interpola√ß√£o simples), constantemente atualizados em v√°rios fluxos por c√≥digo escrito em C ++, inesperadamente conseguimos fazer as transa√ß√µes que n√£o estavam dispon√≠veis antes. </p><br><p>  Quando a curva de taxa de juros ou volatilidade mudou no Orc Trader, meu cache de pre√ßos come√ßou a se encher novamente.  Obviamente, essa decis√£o n√£o foi original.  Li pela primeira vez sobre o cache de pre√ßos de op√ß√µes em um artigo antigo alguns anos antes.  Como em um microprocessador moderno com execu√ß√£o extraordin√°ria, voc√™ pode adivinhar os seguintes c√°lculos, que ainda precisam ser feitos no futuro.  Os pre√ßos de mercado s√£o discretos.  Lembre-se, os c√°lculos mais r√°pidos s√£o aqueles que n√£o precisam ser feitos.  A pr√≥xima foi a ideia de que quebrar um atraso zero √© dif√≠cil, mas n√£o imposs√≠vel.  Eu tirei essa estranha conclus√£o sobre a previs√£o do futuro a partir do fato de que a mensagem mais r√°pida √© aquela que n√£o precisa ser enviada.  Na minha opini√£o, isso √© ainda mais importante. </p><br><p>  Na minha opini√£o, a melhor arquitetura √© a falta de arquitetura r√≠gida.  Isso pode parecer um pouco rid√≠culo, mas √© pura verdade no caso da HFT.  C√≥digo n√£o estruturado se transforma instantaneamente em legado, se voc√™ n√£o prestar aten√ß√£o √† arquitetura do sistema.  Como, de fato, a otimiza√ß√£o prematura √© a <strong>base de</strong> tudo, √© mais lucrativo n√£o desmerecer mitos bem conhecidos do computador e permitir que seus concorrentes trope√ßam neles. </p><br><p>  Meu hack para a plataforma Orc Trader n√£o era uma solu√ß√£o ideal, mas agradou algumas pessoas com acordos que antes eram imposs√≠veis.  Eles at√© pareciam felizes ao ver esses acordos em seus relat√≥rios com seus pr√≥prios olhos.  No entanto, no geral, foi apenas um pequeno sucesso.  Posteriormente, transformou-se em centenas de regras manuais para pesquisar neg√≥cios, pagando apenas os custos do operador com a negocia√ß√£o.  Mas pelo menos eu me diverti. </p><br><h2 id="sosredotachivaemsya-na--2ms">  Focando em "&lt;2ms" </h2><br><p>  Vamos relembrar a condi√ß√£o ‚Äú&lt;2ms‚Äù registrada no painel da janela.  Escrevi um artigo sugerindo uma maneira mais r√°pida e complexa de obter ainda menos atrasos.  Uma equipe de tr√™s programadores, incluindo eu, deveria implement√°-lo.  A primeira op√ß√£o caiu na bolsa de valores coreana.  N√£o havia necessidade de armazenamento em cache de pre√ßos neste projeto, pois o modelo europeu de pre√ßos de op√ß√µes n√£o √© muito mais complicado do que a simples interpola√ß√£o, mesmo em v√°rias dimens√µes. </p><br><p>  No momento, processadores com frequ√™ncia de 2-3 GHz come√ßaram a aparecer.  Nossa m√©trica de desempenho estava um pouco errada - medimos principalmente atrasos em nosso c√≥digo do que aqueles que est√£o dentro do sistema operacional (que s√£o realmente muito maiores). gasto no processamento do pacote de 50 a 100 microssegundos.  O principal a lembrar aqui √© que, quando um processador pode executar mais de um <strong>bilh√£o de</strong> opera√ß√µes por segundo, mais de um milh√£o de instru√ß√µes entra nesses dois milissegundos.  Honestamente, esse √© um c√≥digo muito, muito ruim se esse milh√£o de instru√ß√µes tiver um pre√ßo simples.  Se a decis√£o de um acordo exigir um milh√£o de etapas, saia imediatamente.  Cada <strong>nano</strong> segundo √© importante aqui. </p><br><p>  Aconteceu que eu estava ligado a uma equipe n√£o muito bem coordenada e, como novo funcion√°rio, tive que ter cuidado.  Havia apenas tr√™s de n√≥s no departamento de desenvolvimento.  Um dos membros da equipe (que na verdade era um excelente programador) estava aparentemente cansado e come√ßou a passar o tempo todo trabalhando em jogos e f√≥runs sobre aceleradores de v√≠deo.  "Mr. GPU" costumava escrever as principais bibliotecas da empresa para multithreading, e elas n√£o eram ruins, apesar de sofrerem com problemas de design.  Toda a sincroniza√ß√£o foi feita atrav√©s de mutexes e qualquer opera√ß√£o exigia bloqueios.  No final, voltei a usar a biblioteca C ++ Boost.  O "Sr. GPU", aparentemente, n√£o gostou do projeto e parecia envolvido em algum tipo de greve.  Ele estava indubitavelmente irritado com a necessidade de trabalhar na minha ideia.  O outro cara era menos capaz, mas ainda minimamente competente.  Geralmente ele comia muito e entrava constantemente na sala de reuni√µes para assistir outro filme em DVD l√°. </p><br><p>  Mas tivemos que lidar de alguma forma para superar esses dois milissegundos.  Como se viu, eu precisava escrever mais c√≥digo do que o esperado - tive que ficar acordado at√© tarde v√°rias vezes.  "Mr. GPU" fez o trabalho de integra√ß√£o, enquanto "Alienated Dude" n√£o fez nada.  Como resultado, nosso novo sistema mostrou atrasos de pouco menos de cinco microssegundos.  Pareceu-me que foi um enorme sucesso.  No entanto, esse n√∫mero n√£o levou em considera√ß√£o as lat√™ncias da rede.  Definitivamente, eles agora s√£o muito mais importantes do que um m√™s atr√°s. </p><br><p>  Um dos outros funcion√°rios me parabenizou.  Aprendi com ele que a maioria das pessoas de TI (incluindo ele) considerava isso uma tarefa imposs√≠vel.  Aparentemente, eles esperavam que eu falhasse.  As mudan√ßas que trouxe n√£o foram muito entusiasmadas, mas recebi um pequeno b√¥nus sem um aumento significativo no sal√°rio. </p><br><p>  Eu costumava imaginar permanecer nesse emprego por vinte anos, principalmente depois da bolha das pontocom.  Mas agora √© claramente hora de seguir em frente. </p><br><h2 id="poisk-novoy-raboty">  Procure um novo emprego </h2><br><p>  Entrei em contato com v√°rias empresas de HFT e compartilhei meus pensamentos sobre o que pode ser feito.  Uma boa empresa comercial holandesa me ouviu com muito cuidado, mas n√£o ofereceu nada.  Anos depois, descobri que a equipe deles come√ßou a implementar algo parecido com o que conversamos na entrevista na semana seguinte.  Ouvi dizer que a abordagem foi bem-sucedida.  Eles o chamavam de ‚Äúm√©todo base impl√≠cito‚Äù, no qual tudo se resumia √† previs√£o do pre√ßo te√≥rico de um ativo futuro ou subjacente.  Gosto do nome deles para o meu m√©todo, mesmo que pare√ßa um culto √† carga.  Bem, √© assim que as empresas financeiras costumam fazer neg√≥cios.  Apesar do engano da parte deles, fiquei lisonjeado. </p><br><p>  Ent√£o conversei com uma empresa australiana com uma equipe de cerca de uma d√∫zia de desenvolvedores focados em negociar na bolsa ASX.  A plataforma deles era mais lenta que o Orc Trader, gastando muitos milissegundos em c√°lculos.  Eu pedi uma reuni√£o com o chefe da empresa, que era muito mais bem-sucedido e muito mais jovem que eu.  Ele era um dos caras com sal√°rios muito altos, cuja renda seria declarada de acordo com as leis australianas. </p><br><p>  Os neg√≥cios deles n√£o pareciam "completamente limpos" e ele me avisou que nem sempre o dinheiro ganho por eles era legalmente devolvido √† empresa controladora. As negocia√ß√µes com essa empresa eram uma perda de tempo - eu n√£o quero ser um chap√©u preto. Encontrar lacunas nas regras √© um jogo divertido, desde que seja √©tico. No entanto, n√£o devemos cruzar essas linhas vermelhas. N√£o h√° prazer em vencer trapaceando, mas o mais importante √© que sua reputa√ß√£o √© importante. subestimar as perdas de esc√¢ndalos e eu  e quer risco. </p><br><p>  Eu tamb√©m gostei de um dos bancos de investimento, com o representante com quem conversei.  Era uma filial de um grande escrit√≥rio em Wall Street.  Eu j√° consegui trabalhar v√°rios anos nesse tipo de ambiente.  O limite de entrada parecia bastante baixo - eles n√£o queriam ganhar dinheiro, apenas queriam criar um volume de neg√≥cios na bolsa de valores sem custos, para que seu departamento financeiro pudesse cantar serenatas para essa ag√™ncia.  Pareceu-me uma boa op√ß√£o, e eu tinha certeza de que eles n√£o se importariam em criar uma rotatividade, al√©m de receber lucros adicionais.  Os lucros geralmente raramente causam reclama√ß√µes. </p><br><p>  A coisa boa da minha empresa anterior era que eles podiam demitir at√© funcion√°rios que ganhavam dinheiro.  Algu√©m violou as regras fazendo v√°rias transa√ß√µes que n√£o foram autorizadas.  Eles trouxeram o dinheiro da empresa e fiquei impressionado que eles foram demitidos de qualquer maneira por violarem as regras.  Uma posi√ß√£o de ger√™ncia correta √© extremamente rara, especialmente em finan√ßas. </p><br><p>  Ent√£o, inesperadamente, surgiu outra oportunidade. </p><br><p>  Uma vez almocei com um cara que conhecia em ci√™ncia da computa√ß√£o na Universidade da Tasm√¢nia, que agora trabalhava para a ITG.  Ele me convidou para falar com a ITG, pois eles estavam envolvidos em negocia√ß√µes privadas.  Isso era novidade para mim - eu pensei que eles eram apenas corretores.  Encontrei-me com o gerente geral da regi√£o da √Åsia-Pac√≠fico e ele falou detalhadamente sobre a plataforma de arbitragem, que trabalha com a√ß√µes nomeadas em USD e CAD.  Ent√£o eu me encontrei com o CEO dos Estados Unidos, Ray Killian, quando ele estava em uma viagem √† Austr√°lia.  A reuni√£o correu bem e parecia n√£o haver mais barreiras ao desenvolvimento de transa√ß√µes de alta frequ√™ncia no ITG.  O CEO da regi√£o da √Åsia-Pac√≠fico e seu presidente, que tamb√©m era membro do conselho da ITG, listado na NYSE, trouxeram um plano de neg√≥cios improvisado e c√°lculos de risco aos EUA para uma reuni√£o do conselho. </p><br><p>  O que aconteceu depois, eu n√£o sei - me disseram tr√™s vers√µes completamente diferentes nos pr√≥ximos anos.  Segundo uma vers√£o, o conselho aprovou o plano de neg√≥cios, mas Killian ganhou tudo de volta.  De acordo com outra vers√£o, alguns conselheiros n√£o aprovaram o projeto.  De acordo com a terceira vers√£o, o plano de neg√≥cios n√£o chegou aos membros do conselho.  N√£o sei quais vers√µes estavam erradas (talvez todas de uma vez), mas n√£o importava.  Os caras do ITG decidiram ficar sem o empregador e investir fundos pessoais.  Este n√£o era o trabalho que eu estava procurando, mas se o neg√≥cio fosse bem, eu poderia ganhar cerca de um quarto das a√ß√µes da nova empresa por meio de op√ß√µes recebidas ao longo de v√°rios anos na aquisi√ß√£o.  Foi como uma vit√≥ria. </p><br><h2 id="rozhdenie-hft-kompanii">  O nascimento de uma empresa HFT </h2><br><p>  Assim, tendo recebido um investimento de US $ 1,5 milh√£o na Austr√°lia, chegou a hora de come√ßar a trabalhar sozinho novamente com um laptop no escrit√≥rio.  Configurei v√°rios servidores e esta√ß√µes de trabalho, instalei o SuSE Linux de 64 bits e contratei tr√™s programadores - e o rel√≥gio que media o per√≠odo pago pelos investidores come√ßou a funcionar.  Acabou que eu n√£o sou um administrador de sistema Linux muito bom.  Logo, eu estava cansado de fazer tarefas administrativas ruins e as designei para um freelancer.  Agora havia quatro pessoas e meia.  Por√©m, como o SuSE Linux de 64 bits, especialmente nos processadores AMD com seu barramento Hypertransport, n√£o estava pronto para cargas no hor√°rio nobre, retornamos ao assembly RedHat / CentOS de 32 bits.  Foi uma decis√£o s√°bia do "Sr. Sysadmin", um pouco a frente. </p><br><p>  Quatro meses depois, olhamos adiante.  Tivemos que escolher entre rodar em nosso ASX ou ir para a Cor√©ia.  Tr√™s bolsas coreanas, KSE, KOSDAQ e KOFFEX, foram fundidas em uma √∫nica bolsa coreana, KRX.  Escolhemos a Cor√©ia, embora os ambientes comerciais e t√©cnicos fossem mais complexos e arriscados.  No entanto, havia tamb√©m mais oportunidades l√°, al√©m de matem√°tica mais simples nos modelos de precifica√ß√£o e um pequeno n√∫mero de ferramentas prometeu uma base de c√≥digo mais leve. </p><br><p>  Ent√£o, uma coisa engra√ßada aconteceu.  Ao criar um novo sistema, voc√™ geralmente tenta fazer algumas conven√ß√µes de nomenclatura para facilitar sua vida.  Decidi usar c√≥digos ISO ou parte deles para padroniza√ß√£o.  No entanto, devido √† fus√£o das bolsas coreanas, ainda n√£o foi atribu√≠do um c√≥digo ISO para a nova bolsa.  Entrei em contato com o grupo respons√°vel pela ISO, que acabou sendo o √∫nico cara com uma mesa de excel em algum lugar da Europa.  Ele decidiu que o novo c√≥digo para a troca combinada seria XKOX.  Cliquei e escrevi para ele que essa combina√ß√£o n√£o soa muito harmoniosa em ingl√™s.  Talvez a melhor ideia seja usar c√≥digos √≥bvios de KRX ou XKRX?  N√≥s rimos e, assim, o XKRX se tornou o novo c√≥digo ISO.  Ent√£o agora posso dizer que fui eu quem criou o c√≥digo ISO para a troca coreana unificada. </p><br><p>  Naqueles tempos antigos na Cor√©ia, os comerciantes, mesmo os de alta frequ√™ncia, n√£o podiam obter acesso direto √† bolsa.  Voc√™ tinha que passar pelo gateway do broker e usar sua API espec√≠fica para se conectar.  N√£o havia coloca√ß√£o nenhuma.  Entre os clientes, houve uma grande diferen√ßa nos atrasos n√£o controlados pela corretora, simplesmente devido √†s diferentes tecnologias de localiza√ß√£o e intera√ß√£o.  Futuros e op√ß√µes negociados na bolsa KOFFEX.  O pr√≥prio KOFFEX estava localizado em Busan, uma cidade portu√°ria a uma dist√¢ncia de pouco mais de trezentos quil√¥metros de Seul.  Os contratos de derivativos para o √≠ndice KOSPI 200 tinham um valor nominal pequeno, mas um tamanho de lote grande.  Por esse motivo, eles eram os derivativos mais engenhosos do mundo, com uma diferen√ßa de dez vezes do resto.  O contrato de euro / d√≥lar na CME era o n√∫mero dois e as op√ß√µes no KOSPI 200 eram o n√∫mero um.  Isso acabou sendo demais para a KOFFEX; portanto, as principais opera√ß√µes nesses instrumentos foram realizadas em seu nome na bolsa KSE em Seul.  Portanto, tudo o que precis√°vamos da troca estava localizado em um ponto de Seul, embora ele pr√≥prio tenha sido fundado em Busan. </p><br><p>  Nesse ponto, eu j√° sabia que a pilha de rede introduz os atrasos mais significativos que consegui gerenciar em nossa nova implementa√ß√£o.  Encontrei um conversor de protocolo Ethernet para InfiniBand de hardware que introduziu um atraso de 3 microssegundos.  Foi projetado como um m√≥dulo conectado ao switch TopSpin InfiniBand.  O barramento Hypertransport (HTX) da AMD, uma alternativa ao PCI Express, era mais moderno, fornecendo menos lat√™ncia interna.  Comprei v√°rias placas de rede e placas-m√£e Pathscale HTX Infinipath com suporte HTX (elas s√≥ existiam em vers√µes alfa, por exemplo, uma delas tinha o n√∫mero de s√©rie 0x0000045!) pilha de rede extremamente r√°pida, com a qual fiquei muito satisfeito.  Ele parecia, √© claro, um pouco estranho e desajeitado, mas ele era um dos mais competitivos do mundo.  Por v√°rios anos, as placas de rede comuns n√£o puderam ser comparadas √† minha configura√ß√£o. </p><br><h2 id="vybor-brokera">  Escolhendo um corretor </h2><br><p>  Depois disso, fomos a Seul para encontrar um corretor e um local no data center.  Fui com um dos investidores, um homem chamado Bubble, que se tornou nosso funcion√°rio.  No in√≠cio, estava dividido entre a ITG e a HFT, mas depois estava completamente √† nossa disposi√ß√£o, j√° que o CEO, o presidente da APR e outros funcion√°rios da ITG eram nossos investidores.  Foi ele quem foi instru√≠do a reservar um hotel em Seul.  Aconteceu que ele escolheu um motel pago a cada hora, seduzido por uma descri√ß√£o art√≠stica muito pitoresca que escondia a imagem verdadeira - quartos sujos e sujos com ar condicionado escamoso, um computador infectado por v√≠rus.  N√£o √© um bom come√ßo.  V√°rios corretores nos chamaram e expressaram surpresa em nossa √°rea.  Estranho, mas engra√ßado.  A viagem foi bastante produtiva, fizemos um acordo incrivelmente incr√≠vel. </p><br><h2 id="horoshaya-sdelka">  Bom neg√≥cio </h2><br><p>  O escrit√≥rio da Muppetz Securities nos ofereceu um servi√ßo de DMA.  A grande empresa que eu deixei n√£o tinha acesso direto.  Antes disso, eu estava de olho no sistema da HP / Compaq / Tandem em um emprego antigo, pois essa era uma maneira de entrar na rede interna de um corretor espec√≠fico, a fim de me aproximar da troca.  Custou cerca de US $ 500.000 para uma caixa pequena criada como parte do programa interno de desenvolvimento de aplicativos dedicado da HP.  √â sedutor, mas n√£o para uma empresa que vive seus √∫ltimos dias.  O servi√ßo de DMA oferecido a n√≥s agora foi implementado com base no protocolo X.25, que era inovador para mim na √©poca.  Esse acordo com corretor era bastante caro, mas como o acesso direto real era in√©dito, eu assinei um contrato alguns dias depois. </p><br><p>       ‚Äú ‚Äù    RTS,     ,    .         .      RTS       ,        ,    .   ,       Orc.     Orc,          .   , RTS     API    10%   . </p><br><p>   ,         InfiniBand.     ‚Äì     X.25. ,    .       Muppetz Securities  ,     ,     . </p><br><p>     ,  Muppetz    ,     . X.25      .    -   HFT-,     ,             ?  ,   . </p><br><p> ,  ""    .  ,    HFT-   ,    .  ,  . ,    Muppetz   ,   .    .,         .     ,   Muppetz ,       ,    ‚Äì       ! </p><br><p>    ,    . ,     ,          KRX.   ,     ,     ,      ,         .        .            CRT-.      ,     ,   .        .        ,    ,       ?     ,  ‚Äú‚Äù. </p><br><p>  Muppetz   X.25    ,         KRX,    . -      ,     ,  ,      . </p><br><h2 id="x25-i-tehnologii"> X.25   </h2><br><p>      X.25  .       T1  E1 (       )  Koscom,      KRX.       64    (kbps)    . ,  -  ,               .     ,    (  ) . </p><br><p>           X.25    .  ,  ,     . -             ,     X.25. ,     ,    ,          ‚Äì BBS, FIDO, Z-modem, Y-modem,   .             ,   ,      .     .      .  ,         .   ,       ,       .           Sangoma,     . </p><br><p>          .        .       .      ,        ,      . HFT  ,   .    ,                ,       .   ,      ,     .      T1. ,   ,    .   X.25,   ,     Sangoma.   ‚Äì  . </p><br><p>               X.25.        Postgresql (      ),    C++,      ..   ,    ,    -.    ,          .  ,      ,   .      ,       . </p><br><h2 id="falstart-torgovli"> ()  </h2><br><p>        .       .        .    ‚Äì    85% !  ,         (         ),         .      . </p><br><p>      . </p><br><p>      ,    ‚Äú‚Äù     .          ,             ,     .     ,    ,       .     ,    ,       .    ,       .      .        ,  ( , "  "),    72   .     ,         .     ,       . ,   ,     ,     .     ,         .               ‚Ä¶ ! ‚Äì  .      ,    ,     . </p><br><p>     (IV)   .          IV,       ( )        .             .    ,   IV   ,    .        ,             .         R,          .       IV  .      -   ,    .        , ,     . ,  ,     (   .)      ,    . </p><br><p>       .  .       ,     .    ,    ,              .      .     ,      . </p><br><p>  ,      .      .    .        .       ‚Äú‚Äù         .     -    ,   ,     .   ,             .   . </p><br><h2 id="strategiya-zero">  Zero </h2><br><p> Ao negociar na bolsa, acredita-se que voc√™ tenha sorte se recebeu parte do spread a seu favor.  Naquela √©poca, na Cor√©ia, as op√ß√µes de caixas eletr√¥nicos e mais baratas tinham um tamanho de escala de 0,01 pontos de pre√ßo.  Estes 0,01 custam cerca de um d√≥lar de um contrato.  Ao negociar um rob√¥ de alta frequ√™ncia imediatamente com uma s√©rie de op√ß√µes, se voc√™ tiver sorte, sai da transa√ß√£o com uma m√©dia de dez ou vinte centavos.  Um dos meus objetivos neste trabalho era superar os n√∫meros de rotatividade que vi anteriormente.  Lembro que, em √∫ltimo lugar, o recorde foi de 1,13 milh√£o de contratos por dia.  Se voc√™ pudesse trocar um milh√£o de op√ß√µes e levar 10 ou 20 centavos por cada, ficaria muito feliz.  Em teoria, n√£o h√° diferen√ßa entre pr√°tica e teoria.  Perceber isso acabou sendo bastante dif√≠cil para mim. </p><br><p>  Lembrei-me da conversa de um dos comerciantes, o Sr. B., com algu√©m na cozinha de uma empresa antiga (ali√°s, ele acabou dirigindo a empresa.) O Sr. B. foi perguntado se ele comprou um bom sinal de negocia√ß√£o e obteve lucro, por que Ele n√£o fecha imediatamente a posi√ß√£o?  Ele respondeu que, se tudo fosse t√£o simples, ele ganharia muito mais dinheiro do que agora.  Tivemos uma excelente lat√™ncia, com uma boa localiza√ß√£o e canal X.25 direto.  A tecnologia funcionou, o modelo de pre√ßos deu os pre√ßos certos.  Talvez pud√©ssemos fazer o imposs√≠vel? </p><br><p>  Conversei com os acionistas e disse que precisava de mais 25.000 AUD para sobreviver ao m√™s e tentar algo novo.  O principal investidor emitiu um empr√©stimo de 25.000 AUD.  O Sr. F., um dos funcion√°rios originais, codificou o que chamamos de estrat√©gia Zero.  Tudo era simples - para n√£o ter uma posi√ß√£o direcionada, espere que uma op√ß√£o apare√ßa no copo, cujo pre√ßo difere da nossa avalia√ß√£o pelo menos com um tique.  Ent√£o bata nele.  Espera  Em seguida, dobre-o e obtenha um lucro de carrapato.  Isso poderia funcionar? </p><br><h2 id="my-budem-zhit">  N√≥s vamos viver! </h2><br><p>  Nossa receita mensal de negocia√ß√£o come√ßou a ser medida em seis d√≠gitos saud√°veis.  A estrat√©gia de Zero funcionou.  Aumentamos o capital de negocia√ß√£o para que voc√™ possa comprar 500 ou 1000 op√ß√µes de caixa eletr√¥nico e, em seguida, dar a volta e devolv√™-las.  N√£o h√° cria√ß√£o de mercado inteligente aqui.  N√≥s √©ramos apenas um agressor. </p><br><p>  Ser um comprador no mercado pode ser mais problem√°tico do que ser um fabricante.  Como formador de mercado, voc√™ deve ficar fora do caminho do mercado quando for contra voc√™, mas deve ser est√≥ico o suficiente para n√£o se tornar muito pateta e n√£o perder um lugar valioso na fila.  Como regra, seu limite de pre√ßo, ap√≥s superar o que voc√™ precisa para fugir do copo para evitar perdas, √© menor do que o do agressor que tira proveito da vantagem comercial.  Parece um jogo estranho no qual o agressor realmente tem uma desvantagem de atraso, porque ele est√° pronto para se mover somente depois que o criador j√° fez a sua jogada, todas as outras coisas sendo iguais.  Ou parece um sprint de 100 metros, onde o fabricante tem uma vantagem de 50 metros e voc√™ precisa persegui-lo de alguma forma.  Essa analogia descreve basicamente a estrat√©gia de Zero.  Uma conex√£o direta atrav√©s do X.25 com fios passando pela janela e localiza√ß√£o no campus foi suficiente para superar a ingenuidade de nossa estrat√©gia naqueles primeiros dias.  A sorte sorriu para n√≥s. </p><br><p>  Era um tipo de entretenimento ver como o dinheiro, por assim dizer, aparece por conta pr√≥pria em uma conta banc√°ria ap√≥s obter lucro.  Foi um pouco surreal.  Negociamos op√ß√µes de √≠ndice na Cor√©ia e o d√≥lar australiano aparece em uma conta banc√°ria em Sydney. </p><br><p>  Pouco dinheiro foi gasto em um cluster dom√©stico em nosso escrit√≥rio rec√©m-alugado na Hunter Street, 200 metros quadrados, muitos pequenos computadores mini-ITX em um rack barato de uma loja de ferragens, placas de RAM, fontes de alimenta√ß√£o ATX e um comutador de rede.  A simula√ß√£o de volatilidade impl√≠cita, testes hist√≥ricos e estrat√©gia em si melhoraram com o advento de v√°rias centenas de n√∫cleos adicionais. </p><br><p>  O pr√≥ximo passo em nossas negocia√ß√µes foi a transi√ß√£o da estrat√©gia Zero para uma estrat√©gia de negocia√ß√£o completa com hedge.  Em vez de tentar proteger uma posi√ß√£o atrav√©s de futuros, passamos a fazer hedge com outras op√ß√µes.  N√£o quer√≠amos transferir posi√ß√µes durante a noite, mas ficamos felizes em mant√™-las durante o dia.  A estrat√©gia Zero manteve uma exposi√ß√£o total de v√°rios segundos ao longo do dia.  A nova estrat√©gia nos fez manter nossa posi√ß√£o o dia todo.  Essa ideia funcionou muito bem.  Cerca de dois ter√ßos do mercado KRX eram op√ß√µes de baixo delta com pre√ßos est√°ticos.  N√£o era incomum ver mais de um milh√£o de lotes oferecidos ou pedir op√ß√µes min√∫sculas.  No entanto, compre essas op√ß√µes baratas e ser√° muito dif√≠cil redefini-las antes do fechamento do mercado.  Portanto, simplesmente nos concentramos em op√ß√µes com spreads mais estreitos e com grandes deltas, com ticks de tamanho 0,01 e pre√ßos abaixo de 3,00.  Eles representavam cerca de um ter√ßo do tamanho m√©dio do mercado.  Por fim, crescemos para uma participa√ß√£o de mercado t√≠pica de 6 a 7% e, √†s vezes, mais de 10%.  √â incr√≠vel que tenhamos negociado cerca de um ter√ßo do volume do mercado em que nos concentramos.  Um peda√ßo de bolo t√£o normal.  A supera√ß√£o do recorde de rotatividade passado ocorreu. </p><br><h2 id="razbirayas-s-provodami">  Classificando os fios </h2><br><p>  A id√©ia do primeiro hack significativo veio depois de olhar para o par tran√ßado que foi colocado pela janela.  Os modems para as linhas T1 e E1 transmitiram esse sinal atrav√©s de conex√µes desajeitadas, levando a uma caixa ainda maior, que foi ent√£o conectada atrav√©s de enormes conectores √†s placas seriais.  Nasceu um pouco de pesquisa e um plano √≥bvio.  Comprei v√°rias novas placas Sangoma nas quais conectei os canais NetOptics T1 / E1 com um par tran√ßado e instalei esse conjunto na Cor√©ia.  Quando perguntado o que era, eu respondi que era para monitorar a condi√ß√£o da linha e medir os atrasos.  Esta declara√ß√£o estava tecnicamente correta, mas incompleta. </p><br><p>  Os novos cart√µes Sangoma suportam o modo misto, no qual os cart√µes simplesmente aceitam todos os bits do canal.  Comecei a analis√°-los e percebi como eram as correntes.  Os canais virtuais X.25 foram agrupados em canais de dados de mercado.  Eles tendiam a ir um ap√≥s o outro.  Havia outros grupos de canais para op√ß√µes de compra, venda e futuros.  Eu mesmo tive que desmontar a camada HDLC, mas logo decodifiquei pacotes correspondentes aos canais KRX.  Esse desvio do modem e do dispositivo de rede economizou cerca de um milissegundo. </p><br><p>  Este n√£o era um territ√≥rio desconhecido.  A troca Eurex j√° forneceu uma API privada - e foi hackeada e a engenharia reversa do protocolo de troca.  Depois disso, o documento oficial sobre o regulamento t√©cnico de participa√ß√£o na bolsa foi ajustado para que se tornasse uma viola√ß√£o das regras.  Ent√£o essa pr√°tica foi interrompida, mas na Cor√©ia n√£o havia essa regra.  Da mesma forma, quando a ASX abriu seu primeiro pequeno ponto de coloca√ß√£o em Bondi, observei que v√°rias empresas clientes tinham servidores 1U da Dell, sem nenhum modem.  A engenharia reversa do protocolo Nasdaq n√£o era t√£o incomum quanto eu esperava - existem muitos hackers inteligentes. </p><br><h2 id="otrezat-i-vybrosit">  Cortar e descartar </h2><br><p>  Na Cor√©ia, as coisas melhoraram.  Agora que eu tinha o fluxo de bits um por um (bom, ou pelo menos byte a byte), pude ver que os pacotes perdem muito tempo nos fios.  Milissegundos  Um m√©todo comum no monitoramento de rede √© fatia, quando voc√™ simplesmente corta a primeira parte do pacote.  Eu implementei isso com meu c√≥digo de desvio da camada HDLC e agora est√°vamos muito √† frente porque os campos de compra e venda que precis√°vamos estavam localizados no in√≠cio do pacote de cota√ß√µes.  Economize 100 bytes em 128 Kbps e voc√™ estar√° √† frente em 6,1 ms.  √Ä medida que as especifica√ß√µes e a acelera√ß√£o do canal KRX cresceram, nossa vantagem diminuiu, mas permaneceu aceit√°vel de qualquer maneira.  Agora, enviamos nossos pedidos mesmo antes do pacote de dados de entrada com pre√ßos ser totalmente aceito. </p><br><p>  √Äs vezes, a troca trocava de canal virtual, e fic√°vamos com um cabo lento at√© descriptografar os novos n√∫meros.  O restante da infraestrutura tamb√©m estava melhorando lentamente.  Agora t√≠nhamos cabos passando n√£o pela janela, mas pelos canais de cabo do interruptor principal do edif√≠cio.  Tamb√©m penduramos um pequeno ar condicionado sobre a janela, o que era muito necess√°rio, porque a temperatura no rack estava aumentando constantemente.  Nossa sala de trabalho n√£o era um data center real.  Ent√£o, nosso banco vendeu seus neg√≥cios com derivativos e depois de um tempo o novo propriet√°rio decidiu que √©ramos clientes muito pequenos e nos ordenou que deix√°ssemos nosso escrit√≥rio.  Mais tarde, descobri que ele tinha seu grupo de IA em T√≥quio, que realmente queria nosso espa√ßo para si. </p><br><h2 id="eschyo-odna-popytka">  Mais uma tentativa </h2><br><p>  Eu tive que lutar para encontrar um novo lar para n√≥s.  N√≥s nos concentramos em encontrar v√°rios pontos ao mesmo tempo para que o neg√≥cio fosse um pouco mais sustent√°vel.  O protocolo X.25 ainda n√£o era bem conhecido, mas n√£o era mais incomum.  Algu√©m chamado Dr. S. veio em nosso aux√≠lio e colocou nosso equipamento no data center do outro lado da estrada.  Esse intermedi√°rio era um pouco mais inteligente e entendeu que, se virmos todo o fluxo de dados f√≠sicos, poderemos ver os pedidos de outros clientes.  Ele estava certo - tecnicamente, poder√≠amos, mas at√© agora n√£o o fizemos.  Tivemos que configurar uma infraestrutura separada para nossa pr√≥pria configura√ß√£o de fluxos de dados de mercado.  Esse corretor fez um √≥timo trabalho e ficamos gratos a ele por uma migra√ß√£o tranquila.  A experi√™ncia com Muppetz foi uma exce√ß√£o.  Os corretores na Cor√©ia s√£o boas pessoas. </p><br><p>  Implantamos a mesma infraestrutura em um novo local e continuamos a pesquisa.  Percebemos que a velocidade dos dados de mercado em sites diferentes era muito diferente.  N√£o conseguimos sinal de GPS para sincronizar o rel√≥gio local pela rede, mas a Cor√©ia usou o padr√£o CDMA para comunica√ß√µes m√≥veis.  O fabricante local Endrun Technologies vendeu uma bela caixinha de pl√°stico, com a qual conseguimos um sinal est√°vel no tempo exato.  Este dispositivo recebeu um sinal de GPS dentro do CDMA e transmitiu dados NMEA por uma porta serial mais (por outro cabo) pulsos em intervalos ultra-precisos.  A especifica√ß√£o CDMA promete instabilidade para sinais de tempo precisos de n√£o mais que 10 microssegundos, na verdade, temos cerca de um microssegundo em Seul.  Para compara√ß√£o, um operador canadense de CDMA mostrou precis√£o de cerca de 5 ou 6 microssegundos. </p><br><p>  Acabamos alocando no data center subterr√¢neo KRX.  Entrar n√£o foi f√°cil devido √† seguran√ßa estrita.  Tendo percorrido um longo caminho subterr√¢neo, notei que um sinal de celular estava sendo captado dentro do data center.  Coloquei nosso receptor CDMA no rack e ele funcionou - recebemos o tempo exato desde o sinal celular interrompido at√© que algo dentro dele se queimasse.  Suspeitando que uma antena mais eficiente precise ser instalada, antes da pr√≥xima viagem a Seul, comprei uma antena branca flex√≠vel de um metro de comprimento e soldei o conector SMA a ela.  Quando fui at√© o bunker subterr√¢neo do data center KRX e coloquei uma grande antena branca em nosso rack, os caras da Koscom olharam para mim com muita desconfian√ßa.  Eu n√£o sei o que eles pensavam de l√°, mas v√°rias outras pessoas ao longo dos anos mencionaram que viram minha antena branca no topo do rack no KRX. </p><br><p>  Agora, t√≠nhamos o tempo exato em todos os pontos de presen√ßa e precis√°vamos estabelecer uma troca de dados entre eles.  Descobrimos que, a alguns quarteir√µes do campus, recebemos um atraso de 300 microssegundos entre nossos pontos por meio de uma conex√£o Ethernet de dez megabits do provedor da cidade.  Esse foi um indicador muito bom e coordenamos todos os nossos dados e pedidos de mercado nessas linhas da Internet.  Na Cor√©ia, a Internet √© maravilhosa e foi o suficiente para n√≥s.  Milissegundos dos benef√≠cios da obten√ß√£o de dados de mercado para todos os pontos de presen√ßa melhoraram imediatamente a negocia√ß√£o.  Enquanto nossos melhores pedidos vieram do campus de c√¢mbio, os dados mais r√°pidos do mercado vieram de um ponto a alguns quarteir√µes de dist√¢ncia.  Isso acabou sendo inesperado e esse local permaneceu o melhor local para obter dados de mercado por v√°rios anos. </p><br><p>  Um pouco mais tarde, em um novo ponto da extens√£o do edif√≠cio de troca KRX, configuramos a obten√ß√£o de dados de mercado e os atrasos foram enormes.  Foi a primeira vez que me deparei com o Citadel na Cor√©ia. Pude determinar isso pelos carimbos de data e hora nos pacotes de rede - eles podem lhe contar tudo se voc√™ puder ouvi-los.  Pedimos para desconectar este canal, a Koscom interrompeu a transmiss√£o e desconectou fisicamente a linha.  Depois de um m√™s ou dois, pagamos pela reconex√£o, eles ligaram na mesma linha, sem mudar nada, e agora era um dos melhores.  Esses eram os caprichos da vida na Cor√©ia.  Suspeito que algum novo tipo de balanceador round-robin em algum lugar no meio tenha sido capaz de melhorar a situa√ß√£o.  Para outras esquisitices observadas l√°, n√£o consegui encontrar nenhuma raz√£o √≥bvia. </p><br><p>  Os canais virtuais para o envio de pedidos no X.25 eram de 64 kbit / s cada - este √© extremamente lento.  Pensei que poder√≠amos usar o mesmo hack com cart√µes Sangoma e comecei a escrever um c√≥digo que enviaria um pacote com o pedido antes mesmo que ele fosse completamente formado na mem√≥ria, o que nos salvaria em milissegundos.  Ap√≥s o envio do pedido, poder√≠amos transformar o pacote em inv√°lido, se de repente a situa√ß√£o do mercado tivesse tempo para mudar e o pedido enviado n√£o fosse mais necess√°rio.  No entanto, nossa pequena equipe j√° estava muito ocupada e essa tarefa n√£o era uma prioridade, porque nosso desempenho comercial j√° era bastante bom.  Aprendemos mais sobre modelagem de volatilidade impl√≠cita e estrat√©gias refinadas. </p><br><h2 id="postoyanny-tolko-izmeneniya">  Somente mudan√ßas s√£o permanentes </h2><br><p>  As trocas nunca param e o KRX n√£o foi exce√ß√£o.  Eles come√ßaram a abandonar o protocolo X.25 e mudaram para Ethernet e TCP / IP.  A bolsa planejava usar o TCP para enviar pedidos e o UDP para dados de mercado.  O desempenho comercial do nosso hack X.25 estava come√ßando a desaparecer.  Ficamos muito gordos com nosso mecanismo de negocia√ß√£o e estrat√©gia.  O desempenho do nosso mecanismo de negocia√ß√£o n√£o melhorou muito em rela√ß√£o aos trezentos microssegundos iniciais, ele aumentou.  Em algum momento, os caras repetiram meu hackathon de 72 horas e transformaram o motor em algo mais tradicional, simples e r√°pido.  Curiosamente, agora n√£o estamos preocupados demais com cem microssegundos aqui ou ali, porque perseguimos objetivos estrat√©gicos e t√°ticos.  Comparado aos outros, na verdade tivemos um atraso negativo devido ao adaptador de rede trabalhar no modo prom√≠scuo, ignorando o modem e nosso pr√≥prio analisador HDLC.  Nossos pedidos ainda foram antes que os dados do mercado chegassem aos demais participantes do mercado. </p><br><p>  Quer√≠amos tentar pr√©-enviar pedidos no X.25, mas n√£o t√≠nhamos pessoas livres para passar alguns meses em programa√ß√£o, especialmente considerando que o uso do X.25 estava chegando ao fim.  Todo o c√≥digo X.25 seria in√∫til alguns meses ap√≥s a conclus√£o deste projeto.  No entanto, a ideia teve que ser testada e conversei com o cara que escreveu a maior parte do software em Sangoma.  Ele foi o principal desenvolvedor e fez o trabalho principal de escrever um driver de dispositivo.  Talvez ele possa recomendar algu√©m?  Ele disse que faria isso sozinho como um projeto paralelo em casa.  Alguns problemas surgiram porque o c√≥digo desses drivers era muito confuso com a abund√¢ncia de instru√ß√µes de transi√ß√£o para G em C, mas mesmo que este n√£o seja um estilo muito bom, os drivers funcionavam de maneira est√°vel.  Esse c√≥digo n√£o deveria ter durado mais de alguns meses, portanto parecia um risco aceit√°vel.  Os testes demoraram um pouco mais do que o esperado e o pr√©-envio funcionou, mas o desempenho foi terr√≠vel.  O c√≥digo era t√£o diab√≥lico que o caminho "r√°pido" funcionava mais lentamente que o caminho normal.  No entanto, n√£o tivemos tempo de reescrever todo o c√≥digo dessa ideia novamente. </p><br><p>  As altera√ß√µes no suporte ao TCP no KRX acabaram sendo um mapeamento simples dos canais virtuais X.25 para as sess√µes TCP.  Voc√™ pode ter v√°rias sess√µes TCP abertas simultaneamente (que eles chamam de PID) para enviar pedidos.  O formato de transfer√™ncia de dados de mercado foi portado inalterado para funcionar sobre o UDP.  N√£o me lembro se eles adicionaram criptografia √† vers√£o TCP imediatamente no lan√ßamento ou um pouco mais tarde, mas agora, ao enviar um pedido, todo o pacote de dados imediatamente ap√≥s o cabe√ßalho TCP deve ser criptografado usando a cifra ARIA, e isso era um requisito .  ARIA √© o c√≥digo nacional coreano.  √â muito semelhante ao AES com um layout S-Box ligeiramente diferente.  Esta √© uma boa cifra. </p><br><p>  Vimos que a nova arquitetura baseada em TCP estava prestes a abalar o mercado e potencialmente destruir a maioria dos neg√≥cios de grandes corretores.  O bom e velho X.25 era lento, mas a altern√¢ncia de canais significava que havia muitos caminhos paralelos para o envio de pedidos que podiam ser compartilhados entre si.  No novo mundo do TCP, havia um n√∫mero limitado de sess√µes, duas ou quatro, e todos os clientes tinham que enviar seus pedidos por essas conex√µes, apesar da aparente presen√ßa de muitos PIDs.  Como resultado dessa serializa√ß√£o, as solicita√ß√µes do cliente foram enfileiradas pelo broker.  A condi√ß√£o de corrida surgiu agora n√£o apenas na bolsa, mas tamb√©m dentro de cada corretor.  Os grandes corretores poderiam perder sua participa√ß√£o de mercado, j√° que as linhas de comunica√ß√£o existentes podiam suportar apenas um n√∫mero limitado de clientes HFT.  Al√©m disso, a velocidade de envio de pedidos aumentou, o tamanho dos pacotes de dados de mercado tamb√©m aumentou e a taxa de recebimento de dados de mercado n√£o aumentou proporcionalmente para acompanhar o ritmo.         ,   -   .        ,     ,      . </p><br><p>             ,   Koscom     .        622 Mbps,        ,    .        ‚Äì  T1  E1.     ‚Äì         -.       T1,        Cisco.          T1  ,         ,     . </p><br><p>   TCP     KRX     ,   .  ,   Samsung Securities,    ,              .  -   ,            .       ,          .  ,         ,  ,   (   .)          .      ,       ,    ,       ,        .        ‚Äì        ‚Äì   .    ,     . </p><br><p>     promiscuous-      ,    ,       .   TCP/IP  X.25    ,   ,      .             .       ‚Äì       KRX. ,           ,   - ,      .  ,      ,    , ,          ,             .       ,       .    ,    . </p><br><h2 id="vzlom-fpga">  FPGA </h2><br><p>         -.          .  ,        .        ‚Äì    ‚Äú ‚Äù           .       UNSW    NICTA.                Linux,     Itanium.  -    ,    ,        ,      .    ,    ‚Äì     Sangoma,   .        FPGA-  XILINX,     Spartan 3.     flash-  FPGA    ,     .         ,        Sangoma   promiscuous-.  Sangoma      . ,    Sangoma     ,    .           . </p><br><p>        ,    FPGA . -     FPGA   Ethernet  InfiniBand  TopSpin.      ,    FPGA-   Celoxica   2004 ,     .      HFT-,   Celoxica        UDP.       ,       . Celoxica      UDP  Ethernet,                  .    ,      .        CTO    -,   ,     Celoxica       ,   .  Celoxica              .    VHDL,    Handel-C   , ,  ,         .     -     FPGA,      , Impulse-C.    ,     VHDL,       . </p><br><p>    SANGOMA    . ,           ,      ,   ,   .  ,         ,   .        Telco,     E1.       ,        E1 .         FPGA-,      ,       ,       622 /,   Koscom. </p><br><p>          ,     PCIe- .    SFP-  FPGA-  XILINX   .          T1/E1,        ,    .      -        ,          NetOptics        .  FPGA-      FPGA-,     .          NetOptics  .  ,    ,           .     ,     . </p><br><p>   ,            .     ,   ,      ,  .      STS-3/STM-1   155 Mbps   OC3       .                  ,    .      (   .) ,        64 /,     ,    ,     .   ,          ‚Äú‚Äù     KRX,   FPGA- ,            . </p><br><h2 id="predvaritelnyy-order">   </h2><br><p>          KRX.      TCP,               ,        ‚Äì    .  TCP-   ,      .      . -,          ,    ?  N       heartbeat,  PID  .        ,        .      ,       IP-,      Ethernet-           . </p><br><p>             ‚Äì        .      .      ID ,    .          (    ),     ‚Äì     ,      heartbeats-.         ,          ARIA. </p><br><p>  ,     1Gbps   FIX 4.2 (    BATS       10G),      - ,    FPGA.   25    200 .     Ethernet-    ,     . </p><br><h2 id="vzlom-shifra-aria">   ARIA </h2><br><p>      ,    ,     C-  8- 32-  .        ,             .       - ,            ,          ,       . </p><br><p>     ARIA,        .   ,    SIMD-,    .            ,       . </p><br><p>    , ,     TCP.       ,            .        ,    .  Koscom    ‚Äú  ,  ‚Äù,                  ,   . </p><br><p>         ARIA       ,  . </p><br><h2 id="vstryahnut-krylyami">   </h2><br><p>       .          .  Unix               .     ,   .    ,       ,              .     ,        . </p><br><p>     ,    .     . ,            . ,         "  "  - ,     . , ,       ,    ,    ?   ,      ,    ,       . ,    ,       ,       .     . </p><br><p>         .             TCP  ,         ,  ,   ? <br>         ,            ,    ,    .        . </p><br><p>  ARIA      (CBC).  ,          .         ,    . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/aa1/4d5/b07/aa14d5b07c9dd25c007a349cb639c60f.png" alt="imagem"></p><br><p>           ,     ,         (   .)  ,             .  ,  KRX     .        .  Koscom, ,   ,  -     ,       . ,       ,      .        - ( )    -  CBC XOR    .     ,      ,        .          ,     . </p><br><p>             ,           .    TCP-,      .    90    ,  ,       ,   .         ,  ,    ,              (..    )   ,        .      . </p><br><h2 id="mashinnoe-obuchenie">   </h2><br><p> A melhoria mais significativa que j√° fizemos na estrat√©gia n√£o veio desses truques de baixo n√≠vel.  Usamos a floresta aleat√≥ria (RF) para atuar como uma camada de aprendizado de m√°quina para prever o pre√ßo te√≥rico futuro.  Inicialmente, confiei essa tarefa a um de meus doutores na empresa (t√≠nhamos seis deles.) Ele parecia ser um g√™nio da matem√°tica e doutora em f√≠sica, usando algum tipo de modelo cosmol√≥gico singular, e tamb√©m era meu grande amigo, a quem contratei v√°rios anos atr√°s e ensinou-lhe C ++.  Posteriormente, lecionou C ++ na Universidade de Queensland.  Tamb√©m contratei um de seus alunos de p√≥s-gradua√ß√£o, a quem ele ensinou C ++ (√© engra√ßado que a empresa tenha v√°rias gera√ß√µes de aprendizes dessa l√≠ngua.) Eu o comissionei para desenvolver uma camada de aprendizado de m√°quina usando RF para a estrat√©gia.  Ele voltou depois de alguns meses e me mostrou todas as coisas que ele tentou e que n√£o funcionaram, e ent√£o me explicou por que isso nunca funcionaria e por que era tudo uma perda de tempo. </p><br><p>  Eu j√° me deparei com esse m√©todo na p√≥s-gradua√ß√£o, ent√£o decidi que era melhor fazer tudo sozinho novamente.  Peguei o pacote OpenDT v5.2, que funcionava atrav√©s do MPI em nosso cluster a partir de placas mini-ITX.  Agora, ela cresceu para mais de mil n√∫cleos, com placas-m√£e aparafusadas √†s prateleiras do rack a partir de pain√©is de aglomerado e fontes de alimenta√ß√£o localizadas em prateleiras de metal com orif√≠cios na parte superior.  Duas semanas de OpenDT trabalhando neste cluster me ajudaram a criar uma solu√ß√£o decente.  Eu poderia repetir esse resultado usando o c√≥digo original do autor do m√©todo Random Forest, Leo Briman.  Joguei minhas conquistas por cima do muro para o Sr. L. (o cara que enviou mil pedidos por segundo para a bolsa, que quase nos matou na √©poca) para lan√ß√°-la em produ√ß√£o.  Ele era um programador decente (embora um cara introvertido) e tudo estava pronto em duas semanas.  Vimos um aumento imediato no lucro em cerca de um ter√ßo - foi um bom m√™s. </p><br><p>  Outras melhorias e ajustes na camada ML deram um grande retorno.  N√≥s nos tornamos muito dependentes disso.  Criar uma floresta aleat√≥ria com uma resposta r√°pida foi um trabalho √°rduo, pois acessar uma enorme quantidade de mem√≥ria em ordem aleat√≥ria √© uma maldi√ß√£o de baixa lat√™ncia.  Em projetos posteriores, fiz um pouco melhor.  Depois de mais ou menos um ano, ficou claro que, se desligarmos o ML, n√£o ganharemos dinheiro.  No entanto, nunca realmente exploramos a quest√£o de saber se isso se devia √† nossa estrat√©gia ou se um atraso baixo n√£o era mais suficiente para vencer.  Eu suspeito o segundo.  Vi jogadores inteligentes como a Jump instalando dezenas de servidores na Cor√©ia, e eles obviamente n√£o os usaram em modo inativo.  Uma quantidade suficiente de ML estava no ar. </p><br><p>  Uma maneira madura de pensar sobre o ML √© que ele √© simplesmente um m√©todo para reduzir a lat√™ncia.  Ele ganha tempo negociando com incertezas.  Voc√™ reage mais cedo, mas pode estar errado.  No entanto, mesmo os melhores rob√¥s de arbitragem n√£o recebem necessariamente execu√ß√£o em todas as suas ordens.  √â mais correto pensar em ML como uma maneira de obter pontos de refer√™ncia adicionais no espa√ßo de atrasos e incertezas. </p><br><h2 id="kanareyka">  Can√°rias </h2><br><p>  Outro truque que eu provavelmente deveria mencionar √© bem conhecido - a tecnologia canary.  A CME foi criticada por muitos comerciantes h√° algum tempo, porque o Wall Street Journal publicou um estudo mostrando que alguns comerciantes recebiam seus pedidos antes da chegada dos dados do mercado que levariam a coloc√°-los, e esse ganho de velocidade lhes deu uma vantagem sobre participantes comuns.  Este √© um argumento incorreto, porque as velocidades de dois processos diferentes nunca podem ser as mesmas.  Esse √© mais um motivo para a introdu√ß√£o de um c√≥digo de processamento adicional para receber informa√ß√µes simultaneamente do canal lento de dados do mercado e do canal r√°pido de notifica√ß√£o da execu√ß√£o do pedido. </p><br><p>  Existem v√°rias trocas em que a situa√ß√£o √© diferente.  A Nasdaq foi uma das primeiras trocas a receber dados de mercado mais rapidamente do que as notifica√ß√µes de pedidos.  Foi uma armadilha para jovens jogadores que n√£o esperavam isso. </p><br><p>  Nas minhas primeiras experi√™ncias com o KRX, um can√°rio poderia ter trabalhado um segundo antes de obter dados do mercado.  Deixe-me lembr√°-lo de que o can√°rio √© uma ordem limite que voc√™ colocou anteriormente na profundidade do copo, e n√£o no melhor n√≠vel.  Assim, quando o mercado de repente salta para um novo n√≠vel de pre√ßos, seu can√°rio come√ßa a cantar, informando sobre o movimento um segundo antes do resto do mercado.  Se voc√™ n√£o pode ganhar dinheiro com isso, seu cr√¢nio deve estar cheio de pedras em vez de c√©rebros.  Bem, e encontrei algumas pedras na minha cabe√ßa. </p><br><p>  Isso foi estranho.  √Äs vezes, as diferen√ßas de pre√ßo entre esses dois canais eram t√£o grandes que voc√™ podia ver o mercado subir e descer.  Se for ing√™nuo comprar nesse primeiro movimento, o mercado pode criar problemas para voc√™ quando cair.  Em vez disso, voc√™ pode tentar determinar com anteced√™ncia o hor√°rio desses eventos, para poder comprar abaixo e vender imediatamente seus contratos. </p><br><p>  Muito conhecimento foi um problema divertido.  N√≥s integramos esse c√≥digo ao nosso processador de dados.  Um dos caras, o Sr. F., chamou esse evento de "poder das estrelas", como os irm√£os Mario. </p><br><h2 id="dzhitter-protiv-zaderzhki">  Jitter vs. Atraso </h2><br><p>  Voc√™ pode se lembrar de como a integra√ß√£o das tr√™s bolsas no KRX realmente n√£o afetou os futuros e as op√ß√µes do KOSPI, pois eles j√° eram negociados em Seul no KSE.  A troca unida KRX fechou o data center em Busan e todos se mudaram para Seul.  No entanto, o governo n√£o alcan√ßou seus objetivos pol√≠ticos e o data center de Busan acabou sendo reaberto. </p><br><p>  Bancos e corretores em Seul gastaram muito dinheiro com essas transfer√™ncias.  √Äs vezes, verificava-se que n√£o havia peering entre os dois data centers em Busan, e os dados de mercado foram primeiro para Seul e depois para tr√°s.  A bagun√ßa.  S√≥ agora, em 2016, a bolsa KRX voltou atr√°s, para que tudo se concentre em Busan.  Antes disso, a melhor solu√ß√£o era coletar dados de mercado em Seul, e enviar pedidos para Busan √© caro e ineficiente.  Todas as empresas de HFT (como n√≥s) estavam considerando a possibilidade de construir suas pr√≥prias linhas entre Seul e Busan; no entanto, a Koscom a proibiu de faz√™-lo para n√£o perder sua renda.  Voc√™ s√≥ podia comprar linhas caras da Koscom, o que todos os corretores compraram.  Normalmente, voc√™ lutava por canais que davam um atraso de 2,9 a 3,1 milissegundos.  Muito lento para um cabo reto de 300 km ou uma rodovia de 400 km.  Somente nos √∫ltimos dois anos surgiram v√°rios links de r√°dio por microondas. </p><br><p>  Ao mesmo tempo, o data center KRX evoluiu da maior plataforma comercial do mundo, equipada com equipamentos HP / Compaq / Tandem, para uma plataforma AIX, com arquitetura IBM PowerPC.  Antes dessa migra√ß√£o, receb√≠amos ping de ida e volta de 11 a 12 ms (RTT) nas linhas de envio de pedidos com jitter de cerca de 130 ms.  Depois de se mudar para Busan, o ping passou dos 20ms, mas o jitter caiu para 30ms.  Embora os atrasos tenham dobrado em m√©dia, a redu√ß√£o do jitter tornou nossa estrat√©gia mais eficaz. </p><br><p>  Isso √© semelhante ao caso em que o CME reduziu a tremula√ß√£o, substituindo seus gateways por equipamentos do iLink baseados em FPGA.  A aleatoriedade diminui e a velocidade se torna mais importante.  A diferen√ßa com a Cor√©ia foi que o atraso realmente aumentou para a KRX, mas como os traders n√£o nos importamos, a resposta para outra pergunta √© mais importante - meus esfor√ßos valem a pena?  A nova plataforma melhorou nosso ROI na Cor√©ia.  Da mesma forma, espero que uma instabilidade menor, como resultado de uma diminui√ß√£o constante dos atrasos na bolsa (n√£o apenas na CME, mas tamb√©m nas bolsas de todo o mundo) continue dividindo os traders entre aqueles que podem negociar rapidamente e os que n√£o negociam.  Os atrasos continuam a ser importantes, mesmo que n√£o sejam cr√≠ticos. </p><br><h2 id="sorevnovanie">  Concorr√™ncia </h2><br><p>  Vale mencionar o que aconteceu quando a Getco chegou √† Cor√©ia.  Eu sei pouco sobre eles em um sentido pr√°tico.  A primeira coisa que ouvi foram reclama√ß√µes constantes dos corretores.  A Getco gerencia transa√ß√µes bastante dif√≠ceis e, como elas podem ganhar dinheiro com isso, tamb√©m funcionou na Cor√©ia.  Havia rumores de acordos incr√≠veis com os pr√≥prios corretores, para que eles pudessem aumentar sua participa√ß√£o de mercado.  Talvez isso n√£o seja muito diferente do acordo canadense com a CIBC?  Segundo rumores, a Getco pagou um pre√ßo fixo muito baixo (talvez apenas alguns milhares de d√≥lares) por uma corretora canadense para garantir participa√ß√£o de mercado para a CIBC. </p><br><p>  Comecei a ler relat√≥rios sobre a Getco ocupando 5% do mercado.  Algu√©m me disse que esse n√∫mero estava mais pr√≥ximo de 15%.  Muitos corretores reclamam de seus clientes sem receber uma quantidade suficiente de comiss√£o deles.  A comunidade local ficou bastante barulhenta e frustrada com a chegada da Getco.  Mas n√£o ficamos chateados nem um pouco, em geral.  √âramos estrat√©gias bastante diversificadas e negociadas que outros n√£o possu√≠am, e poucas pessoas conseguiam entender o que estava acontecendo conosco.  No entanto, essa foi uma li√ß√£o - a Getco trouxe novas pessoas ao negociar estrat√©gias mais eficazes.  Muitas pessoas perdem sua renda e reclamam, a imprensa gera esc√¢ndalo.  Voc√™ come√ßa a ler hist√≥rias sobre o qu√£o injusto √© o mercado.  N√£o √© - apenas um eco dos gritos dos perdedores.  Esta √© uma hist√≥ria triste que voc√™ ouve nos mercados repetidamente quando os comerciantes lutam por inefici√™ncias do mercado e pela efic√°cia de sua tecnologia.  O mercado est√° melhorando, mas as reclama√ß√µes est√£o ficando mais altas. </p><br><p>  O que fizemos funcionou e foi aceit√°vel na Cor√©ia, e foi aceit√°vel em muitos outros pa√≠ses.  Mas n√£o, por exemplo, no Eurex.  As regras variam de mercado para mercado.  Se voc√™ √© um gerente de portf√≥lio, agora entende que n√£o deseja mais jogar este jogo.  √â uma concorr√™ncia acirrada, com centenas de comerciantes inteligentes como eu constantemente preparando novas estrat√©gias.  Mas voc√™ n√£o precisa jogar neste campo.  Um operador de alta frequ√™ncia como eu est√° focado no pr√≥ximo tick.  √â com isso que nos preocupamos.  Gastamos enormes quantidades de recursos para levar nossos colegas da HFT para a pr√≥xima etapa.  Eu n√£o ligo para o seu portf√≥lio alfa.  Est√° al√©m do meu horizonte, al√©m da minha preocupa√ß√£o. </p><br><p>  Perco muito e ganho muito durante o dia.  A empresa HFT descrita aqui, que fundei em maio de 2005, sa√≠ em janeiro de 2011. S√≥ tivemos oito dias perdidos durante todo esse tempo, de acordo com nossa principal estrat√©gia de negocia√ß√£o.  Em quatro deles, a perda foi inferior a 1.000 USD e em todos eles foi inferior a 10.000 d√≥lares.  Isso n√£o √© t√£o bom quanto a famosa empresa Virtu (1 dia em cerca de 1200, de acordo com seus documentos para IPO), mas concordei.  No entanto, lembre-se de que existem muitas transa√ß√µes entre aquelas que n√£o podem se orgulhar de altos resultados financeiros.  Ganhamos apenas uma pequena parte do spread, geralmente 10% em um dia normal, 5% em um dia ruim e 20% em um dia bom.  √Äs vezes, os dias de vencimento das op√ß√µes nos davam 50%, pois muitos comerciantes tentam n√£o negociar tais sextas-feiras todos os meses. </p><br><p>  A lei dos grandes n√∫meros permite √† HFT ganhar dinheiro todos os dias.  A mesma lei indica que, se perdermos nossa vantagem tecnol√≥gica, ou n√£o seremos capazes de negociar ou perderemos dinheiro todos os dias.  As empresas de HFT frequentemente quebram e desistem.  Esta √© uma ind√∫stria dif√≠cil, constantemente investigando a infraestrutura e a microestrutura do mercado, a fim de melhorar sua efici√™ncia.  E este ser√° um trabalho ingrato se as pessoas n√£o entenderem que o galo de hoje pode instantaneamente se transformar em um travesseiro de penas quando uma empresa como a Getco chegar √† sua cidade.  Estou certo de que a chegada de Jump tamb√©m causou o aparecimento de v√°rios travesseiros empoeirados. </p><br><p>  A Cor√©ia √© um lugar divertido, pois a infraestrutura de troca KRX ainda √© uma bagun√ßa completa.  H√° muito mais id√©ias que podem ser implementadas em uma infraestrutura lenta, desajeitada e encoberta.  Os HFTs amam a bagun√ßa porque podem se aprofundar nela e encontrar benef√≠cios para si mesmos.  Isso n√£o √© t√£o dif√≠cil, voc√™ s√≥ precisa de mais aten√ß√£o aos m√≠nimos detalhes, porque qualquer complexidade consiste em coisas simples.  Por incr√≠vel que pare√ßa, os HFTshniki odeiam coloca√ß√µes de troca e baixa lat√™ncia, j√° que √© muito mais dif√≠cil encontrar uma vantagem l√°.  O HFTshniki tamb√©m adora sites que poucas pessoas conhecem ... Ningu√©m quer ser emboscado. </p><br><h2 id="portfelnomu-upravlyayuschemu">  Gerente de Portf√≥lio </h2><br><p>  N√£o se preocupe com o pr√≥ximo tick.  Incentive estruturas de mercado como ETFs que sejam competitivas, justas e baratas.  Ent√£o voc√™ pode ficar de p√© e se alegrar ao ver essas empresas de HFT se matando, lutando pelo menor spread.  Isso permite que eles forne√ßam liquidez para trabalhar para voc√™, apesar de seus motivos.  No final, apenas comprar mais alto e vender mais baixo (ou seja, estreitar o spread real) funciona em concorr√™ncia pelo pr√≥ximo tick.  Esta n√£o √© uma receita de dinheiro f√°cil em HFT. </p><br><p>  Os HFTs t√™m medo dos gerentes de portf√≥lio - eles possuem um grande clube de informa√ß√µes que mata o HFT.  Grandes encomendas movem os pre√ßos, o que impede o formador de mercado de obter seu spread.  Os gerentes de ativos at√© pensam de maneira diferente.  Cada execu√ß√£o de um pedido √© uma transa√ß√£o desejada, mesmo que o mercado tenha ido mais longe e a conta tenha um rebaixamento, e uma perda √© simplesmente uma despesa que est√° sempre dentro do seu modelo.  Na HFT, a execu√ß√£o √© um risco, o rebaixamento √© um desastre e a perda √© apenas um encolher de ombros. </p><br><p>  O gerente de portf√≥lio deve usar algoritmos e a m√°gica da efici√™ncia do mercado para melhorar a qualidade da execu√ß√£o de suas ordens.  Voc√™ n√£o deseja contratar vinte pessoas de uma s√≥ vez para competir por uma posi√ß√£o na fila no pr√≥ximo tick?  Voc√™ deve ter mais medo de fundamentos qu√¢nticos de aprendizado de m√°quina que automatizem constantemente seu alfa.  Preocupe-se com os traders de HFT decepcionados que decidem mudar seu modelo e investir a longo prazo para competir diretamente com voc√™.  Eu vejo que ambos j√° est√£o acontecendo. </p><br><p>  Muito poucos corretores oferecem solu√ß√µes competitivas, mas basicamente tudo parece um pouco obsoleto.  Um gerente de portf√≥lio de portf√≥lio grande com uma equipe grande pode obter lucro adicional ao implantar seus pr√≥prios algoritmos e uma plataforma de DMA, para que seus negociadores possam negociar de forma mais agressiva e frequente, assim como as HFTs debilitadas olham para o horizonte de tempo.  Mas cuidado - esta √© uma ladeira escorregadia ... </p><br><hr><br><p>  <em>Foi publicado anteriormente sob o pseud√¥nimo de Thomas Anderson.</em>  <em>Este texto n√£o inclui sexo, drogas ou rock and roll do rascunho original, pois isso n√£o adicionaria nada √† hist√≥ria da negocia√ß√£o.</em>  <em>Talvez isso ajude a justificar minha decis√£o de abandonar o trabalho de que gostei.</em>  <em>De qualquer forma, √© melhor deixar tudo isso por dizer, mesmo que se perca alguma atitude pessoal.</em> <em><br></em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt414037/">https://habr.com/ru/post/pt414037/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt414023/index.html">Pergunte a Ethan: Qu√£o r√°pido a vida poderia ter aparecido no universo?</a></li>
<li><a href="../pt414025/index.html">Os empregadores rastreiam computadores, viagens ao banheiro e agora tamb√©m emo√ß√µes; Seu chefe segue voc√™?</a></li>
<li><a href="../pt414027/index.html">Meus amigos podem ser considerados verdadeiros amigos?</a></li>
<li><a href="../pt414029/index.html">Luz misteriosa ao redor de uma estrela rec√©m-formada, e o que os astr√¥nomos pensam sobre ela</a></li>
<li><a href="../pt414031/index.html">Ap√≥s a reuni√£o "Novos recursos do PostgreSQL 11"</a></li>
<li><a href="../pt414043/index.html">An√°lise de tabelas de roteamento ou por que outro engenheiro de rede Python</a></li>
<li><a href="../pt414045/index.html">Regulamento: nos Estados Unidos, as empresas dever√£o notificar vazamentos de PD dentro de 30 dias</a></li>
<li><a href="../pt414047/index.html">Como fazer uma poderosa escada Jacob a partir de um transformador de microondas com suas pr√≥prias m√£os</a></li>
<li><a href="../pt414049/index.html">Os principais jogos da E3 2018: Fallout 76, Metro Exodus, Doom Eternal e outros</a></li>
<li><a href="../pt414053/index.html">5 equ√≠vocos sobre o GDPR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>