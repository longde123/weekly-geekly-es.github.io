<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéª üêû üà∂ Einen Radiosender aus GTA machen: San Andreas üòú üò™ üïå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="M√∂chten Sie wie in San Andreas zwischen den Radiosendern wechseln? 



 Der Soundtrack von GTA ist ber√ºhmt geworden f√ºr eine gute Auswahl an Musik und...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einen Radiosender aus GTA machen: San Andreas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419661/">  M√∂chten Sie wie in San Andreas zwischen den Radiosendern wechseln? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ed9/18b/5c0/ed918b5c0863ea3973f9128ef2f6e03f.jpg"><br><br>  Der Soundtrack von GTA ist ber√ºhmt geworden f√ºr eine gute Auswahl an Musik und lustigen Inserts.  Rockstar hat hervorragende Arbeit geleistet, um Radiosender f√ºr dieses Spiel zu erstellen - Musik aus Vice City und San Andreas kann √ºbrigens sogar als CD-Set gekauft werden. <br><br>  Um ihr das H√∂ren angenehmer zu machen - und um etwas zu lernen, beschloss ich, mich in das Radio zu hacken, damit es Gaming-Radios empf√§ngt. <br><br>  Die Idee ist, dass Sie den Knopf des Empf√§ngers drehen und zwischen virtuellen Stationen wechseln k√∂nnen, wie Sie es mit einem realen Empf√§nger tun k√∂nnten.  Software wurde zum Haupthindernis - ich m√∂chte, dass jeder virtuelle Sender seine eigene Musik spielt, auch wenn ich sie nicht h√∂re.  Wieder wie in der realen Welt. <br><br>  Fangen wir an! <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/fqHrg4MlmFQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  1. Ausr√ºstung </h2><br>  Ich w√ºrde gerne so etwas wie Arduino f√ºr ein solches Projekt mit tragbaren und eingebauten Ger√§ten verwenden, da die Architektur solcher Boards viel einfacher ist als die von Single-Board-Computern. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/921/3b9/f02/9213b9f02fdcc18e91e79850e200ed9d.jpg"><br><br>  Das gleichzeitige Abspielen von Dutzenden von Dateien erfordert jedoch ein leistungsstarkes Gehirn. Deshalb habe ich mich f√ºr den Raspberry Pi entschieden.  Ich habe es bereits f√ºr andere Projekte verwendet und bin zuversichtlich, wenn ich damit arbeite.  Und ich habe Python als Programmiersprache gew√§hlt, einfach weil ich so eine Stimmung hatte.  Gibt es noch andere Gr√ºnde? .. <br><br><h2>  2. Python-Software-Mixer </h2><br>  Danach musste ich eine Bibliothek f√ºr Python ausw√§hlen, die: <br><ul><li>  Arbeiten Sie mit mehreren Audioquellen. </li><li>  Gab eine √ºbergeordnete Schnittstelle f√ºr die Arbeit mit ihnen. </li></ul><br>  Um ein virtuelles Radio zu erstellen, muss ich nur mehrere Dateien gleichzeitig hochladen und die Wiedergabelautst√§rke steuern.  In der Realit√§t geschieht dies: Jeder Sender ist eine Audioquelle, und der Abstimmknopf √§ndert die Lautst√§rke dieser Quellen aus Sicht des H√∂rers. <br><br>  Nach intensiven und langwierigen Tests verschiedener Optionen (Pygame-Mixer, Python-Sound-Ger√§t, Puredata mit einem Patch f√ºr den Mixer) habe ich mich f√ºr swmixer entschieden.  Er wei√ü sogar, wie man Streaming-Dateien wiedergibt, ohne sie in den gesamten Speicher zu laden, was f√ºr mich sehr praktisch war, da ich wollte, dass jeder Sender die gesamte Musik in einer Datei kombiniert.  Ich musste diese Bibliothek teilen und den Fehler darin beheben, da sie nicht mehr unterst√ºtzt wurde. <br><br>  Ich entschied mich f√ºr den Raspberry Pi 3, da das 2B-Modell den Audioausgang irgendwie klemmte.  Ich verstand nicht, warum dies geschieht, war aber nur zufrieden, dass auf dem neuen Board alles funktioniert, und fuhr mit dem n√§chsten Schritt fort. <br><br><h2>  3. High-Level-Winkelsensor (DUP) (siehe pyKY040) </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/046/e64/649/046e6464993ce7e1702ca262a68869d4.png"><br><br>  Die beste Bibliothek f√ºr Python zu dieser Zeit f√ºr KY040 DUP war eine Bibliothek namens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">KY040</a> , die jedoch nicht ganz meinen Anforderungen entsprach. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Au√üerdem</a> wollte ich versuchen, mein eigenes, erstes echtes Modul f√ºr Python zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erstellen</a> . Deshalb habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pyKY040 geschrieben</a> . <br><br>  Es bietet: <br><ul><li>  Kolbek, um den Wert zu erh√∂hen. </li><li>  R√ºckruf zu verringern. </li><li>  Kolbek √ºber Ver√§nderung. </li><li>  Klick auf die R√ºckruftaste. </li></ul><br>  Einstellungen: <br><ul><li>  Skalierungsmodus (der interne Z√§hler √§ndert sich innerhalb der Grenzen von X nach Y und wird als Argument an die R√ºckruffunktionen √ºbergeben). </li><li>  Ringskalenmodus (X bis Y, dann wieder X). </li><li>  Einstellen der Schrittgr√∂√üe auf der Skala. </li></ul><br>  Er erlaubte mir, die Logik des DUP zu delegieren und mich darauf zu konzentrieren, was passiert, wenn ich mit ihm interagiere. <br><br>  Im Hauptcode geh√∂ren die folgenden Zeilen zum DUP: <br><br><pre><code class="python hljs">tuning_encoder = pyky040.Encoder(CLK=<span class="hljs-number"><span class="hljs-number">17</span></span>, DT=<span class="hljs-number"><span class="hljs-number">27</span></span>, SW=<span class="hljs-number"><span class="hljs-number">22</span></span>) tuning_encoder.setup(scale_min=MIN_VFREQ, scale_max=MAX_VFREQ, step=<span class="hljs-number"><span class="hljs-number">1</span></span>, chg_callback=vfreq_changed) tuning_thread = threading.Thread(target=tuning_encoder.watch) volume_encoder = pyky040.Encoder(CLK=<span class="hljs-number"><span class="hljs-number">5</span></span>, DT=<span class="hljs-number"><span class="hljs-number">6</span></span>, SW=<span class="hljs-number"><span class="hljs-number">13</span></span>) volume_encoder.setup(scale_min=<span class="hljs-number"><span class="hljs-number">0</span></span>, scale_max=<span class="hljs-number"><span class="hljs-number">10</span></span>, step=<span class="hljs-number"><span class="hljs-number">1</span></span>, inc_callback=inc_global_volume, dec_callback=dec_global_volume, sw_callback=toggle_mute) global_volume_thread = threading.Thread(target=volume_encoder.watch) tuning_thread.start() global_volume_thread.start()</code> </pre> <br><br><h2>  4. Virtuelles Radio (Code) </h2><br>  Jetzt konnte ich Dateien abspielen und bekam eine Schnittstelle f√ºr die Arbeit mit DUP.  Es ist Zeit, Code f√ºr virtuelles Radio zu schreiben. <br><br>  Es funktioniert wie eine virtuelle Radioband.  Bei bestimmten virtuellen Frequenzen (oder H√∂hen) k√∂nnen Sie Ton h√∂ren - dies sind Swmixer-Kan√§le.  Zwischen den beiden H√∂hen ist eine Mischung aus zwei Audioquellen zu h√∂ren. <br><br><pre> <code class="python hljs">Chn <span class="hljs-number"><span class="hljs-number">1</span></span> Chn <span class="hljs-number"><span class="hljs-number">2</span></span> Chn <span class="hljs-number"><span class="hljs-number">3</span></span> Chn <span class="hljs-number"><span class="hljs-number">4</span></span> Chn n | | | | | |--------------|--------------|--------------|-------------| &lt;----------------------------------------------------------&gt;  </code> </pre><br><br>  Die virtuelle Frequenz ist eigentlich nur eine Ganzzahl, die abh√§ngig von Ihrer Interaktion mit dem DUP zunimmt oder abnimmt. <br><br>  Um mehr Freiheit bei der Berechnung der Lautst√§rke beim Umschalten zwischen zwei H√∂hen zu lassen, wird dieser Prozess von einer einzelnen Funktion verarbeitet, die die Lautst√§rke einer bestimmten Station f√ºr eine bestimmte H√∂hen zur√ºckgibt.  Bisher variiert dieser Wert linear, kann jedoch durch Erstellen einer lauteren und instabileren Volumenkurve ge√§ndert werden. <br><br><pre> <code class="python hljs">VOLUME /-\ /-\ /- | --\ /-- | --\ -- | --\ /-- | -- | --\ /-- | | -\ /- | | --\ /-- | | --\ /-- | | --\ /-- | | /-- | | /-- --\ | | /-- --\ | | /-- --\ | | /- -\ | | /-- --\ | -\ | /-- --\ | /- --\ | /-- --\ | /-- ------------------------------------------------------- | vfreq |      </code> </pre><br><br>  Wenn wir dieses Beispiel auf Kanal n-1 anwenden, schneidet es Kanal n, was zu einer Mischung von Audio aus diesen beiden Quellen f√ºhrt. <br><br>  Im Pseudocode sieht es so aus: <br><br><pre> <code class="python hljs">   ( ) -&gt;       [ -&gt;       [     (  )     ,    <span class="hljs-number"><span class="hljs-number">0</span></span>      ] ] -&gt;   </code> </pre><br><br>  Alle Details sind im Code enthalten.  Beginnen Sie am Ende der Datei, in der die R√ºckrufe f√ºr das DUP beschrieben sind, und folgen Sie dann dem Pfad. <br><br><h2>  5. Hacken Sie das Funkgeh√§use </h2><br>  Der Spender war das Radio meines Gro√üvaters, Optalix TO100.  Au√üerhalb Frankreichs glaube ich, dass es nicht einfach sein wird, ihn zu finden.  F√ºr ca. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">20 ‚Ç¨ erhalten</a> Sie einen coolen, vintage und kompakten Empf√§nger, den Sie in Ihrer Tasche mitnehmen k√∂nnen. <br><br><h2>  DUP </h2><br>  Das DUP kletterte von selbst, nur damit das Geh√§use geschlossen werden konnte - aber nach dem Anschlie√üen der √úberbr√ºckungskabel stellte sich heraus, dass das Design zu gro√ü war.  Ich musste die originalen Kunststoffstecker entfernen und durch Schrumpfschlauch ersetzen, damit sie verbogen werden konnten. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/45b/a79/f49/45ba79f49c6aab4c8aeadfb0034e11e4.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d4d/526/32a/d4d52632ad8928335447d1022a62df54.jpg"><br><br>  Die DUP, die ich selbst gekauft hatte, hatten keinen Faden - ich musste improvisieren, indem ich sie mit Pappe und thermoplastischem Kleber am Geh√§use befestigte.  Clay entscheidet wie immer. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/120/24d/817/12024d817368438cc6ddc9141c47f0c0.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9c/9bc/a80/b9c9bca80bd00dff9f891c9421b53629.jpg"><br><br><h2>  Himbeer pi </h2><br>  Ich habe den Stromanschluss an das Geh√§use angeschlossen, anstatt das Kabel direkt an den Pi anzuschlie√üen. Daher konnte ich w√§hlen, wie der Computer im Geh√§use platziert werden soll, ohne dar√ºber nachzudenken, wo genau der Stromanschluss am Geh√§use angebracht werden soll. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/21e/c4b/221/21ec4b22123a4d830526a47004bf7565.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8df/883/c1f/8df883c1f6508073606d7da5dbc629aa.jpg"><br><br>  Ich habe ein Kabel mit den Micro-USB-Anschl√ºssen "Mutter" und "Vater" verwendet, aber um mehr Speicherplatz freizugeben, habe ich das Kabel abgezogen und direkt an Pi gel√∂tet - plus an PP2 und minus an den geerdeten Anschluss (eine weitere Option ist PP5).  Und achten Sie darauf, mehr zu kleben, um nicht abzubrechen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/20e/863/776/20e863776cd0feda62439b4f1ec54244.jpg"><br><br><h2>  Sprecher </h2><br>  Lautsprecher - original 5W vom TO100 Empf√§nger.  Es ist an einen Verst√§rker angeschlossen, der an einen 3,5-mm-Audio-Stecker angeschlossen ist, der an einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">billigen USB-DAC angeschlossen ist</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dde/f0f/23a/ddef0f23aa556a568fb6c7eb24ff85e9.jpg"><br><br>  Alles ist √ºber ein Prototyping-Board verbunden und kann f√ºr immer geschlossen werden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b6/2b7/5f1/0b62b75f18d8764f564f53f45e746b25.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/924/c43/261/924c43261eb0980da06fe1b61998d6ca.jpg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419661/">https://habr.com/ru/post/de419661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419651/index.html">Weder GA noch YM. Wie wir unseren eigenen Clickstream gemacht haben</a></li>
<li><a href="../de419653/index.html">So f√ºhren Sie Benutzersuchen auf GitHub ohne React + RxJS 6 + Recompose durch</a></li>
<li><a href="../de419655/index.html">Musik in der Wohnung. Einbetten</a></li>
<li><a href="../de419657/index.html">Wie kollektive Intelligenz f√ºr eine Herde Drohnen entwickelt wurde</a></li>
<li><a href="../de419659/index.html">Wo Hollywood Hacker richtig darstellt und wo - f√§lschlicherweise</a></li>
<li><a href="../de419663/index.html">Regierungsorganisationen locken mit Vertr√§gen, Boni und einer Vereinfachung der B√ºrokratie Sch√∂pfer von extrem kleinem pH-Wert</a></li>
<li><a href="../de419665/index.html">Die Erfahrung mit LoRaWAN im ASKUE-System unter realen Stadtbedingungen</a></li>
<li><a href="../de419667/index.html">Eine Auswahl n√ºtzlicher Materialien zu Azure. Teil 1 - B√ºcher</a></li>
<li><a href="../de419669/index.html">Zehn beste Gaming-M√§use f√ºr jeden Geldbeutel</a></li>
<li><a href="../de419671/index.html">Einschr√§nkungen, gegen die versto√üen werden muss, oder wie wir Funktionstests dreimal beschleunigt haben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>