<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¶ğŸ¼ ğŸ™ŒğŸ¾ ğŸ› Pengantar Bash Shell ğŸš ğŸ› ğŸï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. Ini adalah terjemahan dari Buku Persiapan Ujian RedHat RHCE. Menurut pendapat saya, ini sangat mudah diakses tentang dasar-dasar bash. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengantar Bash Shell</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471242/">  Halo semuanya.  Ini adalah terjemahan dari Buku Persiapan Ujian RedHat RHCE.  Menurut pendapat saya, ini sangat mudah diakses tentang dasar-dasar bash. <br><br>  Script shell adalah ilmu itu sendiri.  Tanpa merinci semua yang terjadi "di bawah tenda", Anda akan belajar cara menggunakan elemen dasar untuk menulis skrip Anda sendiri, dan menganalisis apa yang terjadi pada skrip shell pihak ketiga. <br><br><img src="https://habrastorage.org/webt/8w/vx/z3/8wvxz3nzeh5uaiubay0ezgvrbwm.jpeg"><br><a name="habracut"></a><br><h2>  Memahami elemen dasar skrip shell </h2><br>  Bahkan, skrip shell adalah daftar perintah yang dieksekusi secara berurutan, serta beberapa logika yang memungkinkan kode untuk dieksekusi hanya dalam kondisi tertentu. <br><br>  Untuk memahami skrip shell kompleks, Anda disarankan mulai dengan skrip dasar. <br><br>  Berikut ini adalah skrip yang sangat sederhana: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # # #This is a script that greets the world # Usage: ./hello clear echo hello world exit 0</span></span></code> </pre> <br>  Ini berisi beberapa elemen yang harus digunakan dalam semua skrip.  Sebagai permulaan, ada shebang - ini adalah baris #! / Bin / bash.  Ketika skrip diluncurkan dari shell induk, skrip ini membuka subkulit di mana perintah yang ditentukan dalam skrip dieksekusi. <br><br>  Perintah-perintah ini dapat diartikan dengan berbagai cara.  Untuk memahami bagaimana mereka harus ditafsirkan, shebang digunakan.  Pada contoh di atas, shebang memperjelas bahwa skrip harus dijalankan oleh bash shell. <br><br>  Kerang lain juga dapat diindikasikan.  Misalnya, jika skrip Anda berisi kode Perl, shebang seharusnya #! / Usr / bin / perl.  Memulai naskah dengan shebang adalah praktik yang baik;  jika dihilangkan, kode skrip akan dieksekusi oleh shell yang sama yang digunakan untuk menjalankan skrip. <br><br>  Segera setelah shebang, ada bagian yang menjelaskan tentang naskahnya.  Beberapa baris komentar di awal setiap skenario adalah ide yang bagus.  Dalam sebuah skrip pendek, sering kali jelas apa fungsinya, tetapi karena skrip semakin panjang, dan semakin banyak orang terlibat dalam menulis dan mendukungnya, menjadi kurang jelas apa yang ingin dilakukan penulis. <br><br>  Untuk menghindari situasi ini, pastikan untuk menambahkan baris komentar yang dimulai dengan setiap karakter #.  Komentar bisa tidak hanya di baris pertama, tetapi juga di awal setiap ayat naskah.  Ini pasti akan membantu jika Anda membaca skrip Anda dalam beberapa bulan! <br><br>  Anda juga dapat berkomentar tidak hanya pada subbagian, tetapi juga pada setiap baris. <br><br>  Apa pun posisi yang digunakan, semuanya dari karakter # hingga akhir baris adalah komentar. <br><br>  Setelah blok komentar, badan skrip ditemukan.  Dalam contoh di atas, ini adalah beberapa perintah yang dijalankan secara berurutan.  Tubuh skrip shell dapat meningkat saat berkembang. <br><br>  Di akhir skrip, saya menyertakan pernyataan <b>keluar 0</b> .  Pernyataan keluar memberi tahu induk shell apakah skrip berhasil.  Keadaan keluar dari perintah terakhir dalam skrip adalah keadaan keluar dari skrip itu sendiri, kecuali <b>keluar 0</b> digunakan pada akhir skrip. <br><br>  Sangat berguna untuk mengetahui bahwa Anda dapat bekerja dengan <b>keluar</b> untuk memberi tahu induk shell bagaimana keadaannya. <br><blockquote>  Diperkenalkan dalam shell induk, $ echo?  memungkinkan Anda untuk menanyakan status keluar dari skrip yang terakhir berjalan. <br></blockquote>  Setelah membuat skrip, pastikan skrip dapat dieksekusi.  Cara paling umum untuk melakukan ini adalah menerapkan bit run untuk itu.  Jadi, jika nama file skrip adalah halo, gunakan perintah <b>chmod + x ./hello</b> untuk membuatnya dapat dieksekusi. <br><br>  Script juga dapat dieksekusi sebagai argumen ke perintah bash.  Dalam hal ini, masukkan <b>bash ./hello</b> untuk menjalankan skrip halo.  Jika skrip dijalankan sebagai argumen ke perintah bash, file skrip tidak harus dapat dieksekusi. <br><br>  Bahkan, Anda dapat menyimpan skrip di mana saja, tetapi jika Anda akan menyimpannya di direktori yang tidak termasuk dalam variabel $ PATH, Anda harus menjalankannya dengan ./ di depan nama skrip. <br><br>  Ketik <b>./hello</b> untuk menjalankan skrip, atau letakkan di direktori standar yang termasuk dalam variabel $ PATH, misalnya, / usr / local / bin. <br><br>  Anda juga dapat menempatkan skrip di direktori / bin, setelah itu cukup masukkan nama file di mana saja dalam sistem file dan skrip akan dijalankan. <br><br>  <b>Contoh</b> <br><br>  Menggunakan <b>vi / bin / datetime,</b> buat file bernama datetime di direktori / bin.  Rekatkan konten ini ke file yang dibuat: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #    .     ,      date who</span></span></code> </pre><br>  Setelah menyimpan file, masukkan <b>chmod + x / bin / datetime</b> untuk memberikan izin file untuk dieksekusi.  Misalnya, ubah ke direktori home Anda menggunakan perintah <b>cd ~</b> dan cukup masukkan <b>datetime</b> . <br><br>  Pergi, misalnya, ke direktori cd ~ home dan cukup masukkan datetime. <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># datetime Sat Sep 28 00:33:41 EDT 2019 root tty1 2019-09-25 20:28 root pts/0 2019-09-27 20:07 (comp.corp.domain.ru)</span></span></code> </pre><br><h2>  Menggunakan Variabel dan Input </h2><br>  skrip bash lebih dari sekadar daftar perintah yang dieksekusi secara berurutan.  Salah satu hal yang menyenangkan tentang skrip adalah mereka dapat bekerja dengan variabel dan input untuk membuat skrip fleksibel.  Di bagian ini Anda akan belajar cara bekerja dengannya. <br><br><h3>  Menggunakan parameter posisi </h3><br>  Saat menjalankan skrip, Anda dapat menggunakan argumen.  Hanya argumen yang Anda letakkan di belakang perintah skrip.  Argumen dapat digunakan untuk membuat skrip lebih fleksibel.  Ambil perintah <b>useradd lisa</b> .  Dalam contoh ini, perintahnya adalah <b>useradd</b> , dan argumennya, <b>lisa</b> , menunjukkan apa yang perlu dilakukan. <br><br>  Sebagai hasil dari perintah seperti itu, seorang pengguna bernama lisa harus dibuat. <br><br>  Dalam skrip, argumen pertama adalah <b>$ 1</b> , argumen kedua adalah <b>$ 2,</b> dan seterusnya. Daftar 1 menunjukkan bagaimana argumen dapat digunakan.  Coba jalankan kode ini dengan menentukan nama pengguna sebagai parameter. <br><br>  <b>Listing 1</b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # run this script with a few arguments echo The first argument is $1 echo The second argument is $2 echo The third argument is $3</span></span></code> </pre><br>  Parameter berarti entri data sebelum menjalankan skrip.  Dalam hal ini, saya menetapkan <b>lisa</b> , <b>lori</b> dan <b>bob</b> sebagai parameter setelah nama skrip argumen: <br><br><pre> <code class="bash hljs">[root@server1 ~]<span class="hljs-comment"><span class="hljs-comment"># ./argument lisa lori bob The first argument is lisa The second argument is lori The third argument is bob [root@server1 ~]#</span></span></code> </pre><br>  Jika Anda mencoba menjalankan kode sampel, Anda mungkin memperhatikan bahwa isinya tidak sempurna.  Jika Anda menggunakan tiga argumen saat menjalankan skrip dari Listing 1, itu akan berfungsi dengan baik.  Jika Anda hanya menggunakan dua argumen, argumen ketiga adalah output tanpa nilai $ 3. <br><br>  Jika Anda menggunakan empat argumen, nilai keempat (yang akan disimpan dalam $ 4) tidak akan pernah ditampilkan.  Jadi, jika Anda ingin menggunakan argumen, Anda lebih baik menggunakan pendekatan yang lebih fleksibel. <br><br>  <b>Listing 2</b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # run this script with a few arguments echo you have entered $# arguments for i in $@ do echo $i done exit 0</span></span></code> </pre><br>  <b>Listing 2 menunjukkan dua elemen baru yang terkait dengan argumen:</b> <br><br><ul><li>  $ # Adalah penghitung yang menunjukkan berapa banyak argumen yang digunakan saat menjalankan skrip. </li><li>  $ @ Adalah daftar semua argumen yang digunakan saat menjalankan skrip. </li></ul><br>  Untuk daftar argumen yang digunakan saat menjalankan skrip ini, loop <b>for</b> digunakan.  Dalam <b>untuk</b> loop, instruksi dieksekusi selama kondisinya benar.  Dalam skenario ini, kondisi <b>untuk i di $ @</b> berarti "untuk setiap argumen."  Setiap kali skrip melewati loop, nilai dari variabel <b>$ @</b> ditugaskan ke variabel <b>$ i</b> . <br><br>  Jadi, selama ada argumen, isi skrip dieksekusi. <br><br>  Badan for for selalu dimulai dengan <b>do</b> dan closes <b>selesai</b> , dan perintah yang akan dieksekusi terdaftar di antara dua kata kunci ini.  Dengan demikian, skrip sampel akan menggunakan <b>gema</b> untuk menampilkan nilai setiap argumen dan berhenti ketika tidak ada lagi argumen yang tersedia. <br><br>  <b>Mari kita coba skrip di Listing 2 dalam contoh ini:</b> <br><br><ol><li>  Ketikkan <b>vi argumen</b> untuk membuat file argumen dan salin konten dari skrip di Listing 2 ke file ini. </li><li>  Simpan file dan buat itu bisa dieksekusi. </li><li>  Jalankan perintah <b>./argument abc</b> .  Anda akan melihat bahwa tiga baris ditampilkan. </li><li>  Jalankan perintah <b>./argument abcdef</b> .  Anda akan melihat bahwa selain abc, de f juga akan ditampilkan. </li></ol><br><h2>  Variabel </h2><br>  Variabel adalah label yang digunakan untuk menunjukkan tempat tertentu dalam memori yang berisi nilai tertentu.  Variabel dapat didefinisikan secara statis menggunakan NAME = nilai atau secara dinamis.  Ada dua solusi untuk mendefinisikan variabel secara dinamis: <br><br><ul><li>  Gunakan kata kunci <b>baca</b> dalam skrip untuk meminta data dari pengguna yang menjalankan skrip. </li><li>  Gunakan substitusi perintah untuk menggunakan hasil dari perintah dan menugaskannya ke variabel.  Sebagai contoh, <b>tanggal</b> perintah <b>+% d-% m-% y</b> menunjukkan tanggal saat ini dalam format hari-bulan-tahun.  Untuk melakukan ini dalam skrip, Anda dapat menggunakan <b>HARI INI = $ (tanggal +% d-% m-% y)</b> .  Untuk mengganti perintah, Anda hanya perlu menempatkan perintah yang hasilnya ingin Anda gunakan di antara tanda kurung. </li></ul><br>  Di bagian sebelumnya tentang parameter posisi, Anda mempelajari cara menetapkan argumen ke variabel saat menjalankan skrip.  Dalam beberapa kasus, mungkin lebih efisien untuk meminta informasi ketika Anda menemukan sesuatu yang substansial hilang.  Script di bawah ini menunjukkan cara melakukan ini. <br><br>  <b>Daftar 3.</b> Contoh skrip menggunakan perintah <b>baca</b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash if [ -z $1 ]; then echo enter a text read TEXT else TEXT=$1 fi echo you have entered the text $TEXT exit 0</span></span></code> </pre><br>  Dalam skrip di Listing 3, operator <b>if ... then ... else ... fi</b> digunakan untuk menguji keberadaan argumen <b>$ 1</b> .  Ini dilakukan dengan menggunakan <b>tes</b> (tes adalah perintah terpisah).  Perintah tes dapat ditulis dalam dua cara *: <b>test</b> atau <b>[...]</b> .  Pada contoh, baris <b>jika [-z $ 1] ...</b> dieksekusi untuk melihat tes (centang) <b>-z $ 1</b> . <br><br>  * <i>- sebenarnya tiga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sumber</a> (sekitar Penerjemah)</i> <br><br>  <b>-z menguji</b> cek apakah <b>$ 1</b> ada atau tidak.  Dengan kata lain, baris <b>jika [-z $ 1]</b> memeriksa apakah <b>$ 1</b> kosong, yang berarti tidak ada argumen yang diberikan ketika skrip ini dijalankan.  Jika demikian, perintah setelah pernyataan itu dijalankan. <br><br>  Harap dicatat bahwa ketika menulis perintah <b>uji</b> dengan tanda kurung siku, penting untuk menggunakan spasi setelah braket pembuka dan sebelum braket penutup, tanpa spasi perintah tidak akan berfungsi. <br><br>  Perhatikan bahwa pernyataan <b>kemudian</b> segera mengikuti <b>tes</b> .  Ini dimungkinkan karena titik koma (;) digunakan.  Tanda titik koma adalah pemisah perintah dan dapat menggantikan baris baru dalam skrip. <br><br>  Pernyataan <b>kemudian</b> mengeksekusi dua perintah: perintah <b>gema</b> , yang menampilkan pesan di layar, dan perintah <b>baca</b> . <br><br>  Perintah <b>baca</b> menghentikan skrip sehingga input pengguna dapat diproses dan disimpan dalam variabel TEXT.  Oleh karena itu, <b>baca TEXT</b> menempatkan semua input pengguna ke dalam variabel TEXT, yang akan digunakan nanti dalam skrip. <br><br>  Bagian selanjutnya diwakili oleh <b>pernyataan lain</b> .  Perintah setelah <b>pernyataan lain</b> dieksekusi dalam semua kasus lain, yang dalam hal ini berarti "jika tidak, jika argumen diberikan."  Jika demikian, maka variabel TEKS ditentukan dan nilai saat ini <b>$ 1</b> ditugaskan untuk itu. <br><br>  Perhatikan bagaimana variabel didefinisikan: segera setelah nama variabel ada tanda = diikuti oleh $ 1.  Perhatikan bahwa Anda tidak boleh menggunakan spasi saat mendefinisikan variabel. <br><br>  Kemudian, jika kondisi ditutup menggunakan operator <b>fi</b> .  Setelah kondisi jika selesai, Anda tahu pasti bahwa variabel TEXT didefinisikan dan memiliki nilai.  Baris kedua dari belakang skrip membaca nilai variabel TEXT dan memetakan nilai ini ke STDOUT menggunakan perintah <b>gema</b> .  Perhatikan bahwa untuk meminta nilai variabel saat ini, ini merujuk pada nama variabel, dimulai dengan tanda $ di depannya. <br><br>  <b>Anda dapat berlatih menggunakan contoh ini saat bekerja dengan input.</b> <br><br><ol><li>  Buka editor dan buat file bernama teks.  Masukkan konten kode dalam Listing 3 ke dalam file ini. </li><li>  Tulis file ke disk dan jalankan <b>chmod + x teks</b> untuk membuatnya dieksekusi. </li><li>  Jalankan skrip dengan menjalankan <b>./text</b> dan tanpa argumen tambahan.  Anda akan melihat bahwa ia meminta input. </li><li>  Jalankan skrip menggunakan " <b>halo</b> " sebagai argumen (./teks halo).  Hasilnya akan menampilkan "Anda telah memasukkan teks halo" di STDOUT. </li></ol><br><h2>  Menggunakan kondisi dan loop </h2><br>  Seperti yang telah Anda lihat, pernyataan kondisional dapat digunakan dalam skrip.  Pernyataan bersyarat ini dieksekusi hanya jika kondisi tertentu terpenuhi. <br><br>  Ada beberapa pernyataan kondisional dan loop dalam bash yang sering digunakan. <br><br><ul><li>  <b>if ... then ... else</b> - digunakan untuk mengeksekusi kode jika kondisi tertentu terpenuhi </li><li>  <b>untuk</b> - digunakan untuk menjalankan perintah untuk sejumlah nilai </li><li>  <b>while</b> - digunakan untuk mengeksekusi kode jika kondisi tertentu terpenuhi </li><li>  <b>sebelum</b> - digunakan untuk mengeksekusi kode sampai kondisi tertentu terpenuhi </li><li>  <b>case</b> - digunakan untuk mengevaluasi sejumlah nilai tertentu </li></ul><br><h3>  jika kemudian yang lain </h3><br>  <b>Konstruksi if then else</b> adalah umum untuk mengevaluasi kondisi tertentu.  Anda telah melihat contoh dengannya.  Pernyataan bersyarat ini sering digunakan dengan perintah <b>tes</b> .  Perintah ini memungkinkan Anda untuk memeriksa banyak hal: misalnya, tidak hanya apakah ada file, tetapi juga membandingkan file, membandingkan bilangan bulat, dan banyak lagi. <br><blockquote>  Anda dapat mempelajari lebih lanjut tentang tes dalam referensi dengan tes man perintah. </blockquote><br>  Dasar <b>jika</b> konstruk adalah <b>jika ... maka ... fi</b> . <br><br>  Ini membandingkan satu kondisi, seperti yang ditunjukkan pada contoh berikut: <br><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -z <span class="hljs-variable"><span class="hljs-variable">$1</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> no value provided <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre><br>  Dalam Listing 3, Anda melihat bagaimana Anda dapat mengevaluasi dua kondisi, termasuk yang <b>lain</b> dalam ekspresi.  Listing 4 menunjukkan cara mengevaluasi beberapa kondisi dari <b>jika</b> ke yang <b>lain</b> .  Ini berguna jika Anda perlu memeriksa banyak nilai yang berbeda. <br><br>  Perhatikan bahwa contoh ini juga menggunakan beberapa perintah <b>pengujian</b> . <br><br>  <b>Listing 4</b> .  Contoh dengan <b>if then else</b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # run this script with one argument # the goal is to find out if the argument is a file or a directory if [ -f $1 ] then echo "$1 is a file" elif [ -d $1 ] then echo "$1 is a directory" else echo "I do not know what \$1 is" fi exit 0</span></span></code> </pre> <br><h3>  ||  dan &amp;&amp; </h3><br>  Alih-alih menulis lengkap <b>jika ... pernyataan, maka</b> Anda dapat menggunakan operator logis <b>||</b>  serta <b>&amp;&amp;</b> .  <b>||</b>  adalah "OR" logis dan akan mengeksekusi bagian kedua dari pernyataan hanya jika bagian pertama tidak benar;  <b>&amp;&amp;</b> adalah â€œANDâ€ yang logis dan akan menjalankan bagian kedua dari pernyataan hanya jika bagian pertama benar. <br><br>  <b>Pertimbangkan dua baris ini:</b> <br><br><pre> <code class="bash hljs">[ -z <span class="hljs-variable"><span class="hljs-variable">$1</span></span> ] &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> no argument provided</code> </pre> <br><pre> <code class="bash hljs">ping -c 1 8.8.8.8 2&gt;/dev/null || <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> node is not available</code> </pre><br>  Contoh pertama memeriksa apakah <b>$ 1</b> kosong.  Jika pemeriksaan ini benar (yang pada dasarnya berarti bahwa perintah berakhir dengan kode keluar 0), perintah kedua dijalankan. <br><br>  Dalam contoh kedua, perintah <b>ping</b> digunakan untuk memeriksa ketersediaan host. <br>  Contoh ini menggunakan "OR" logis untuk menampilkan teks "node tidak tersedia" jika terjadi kegagalan perintah <b>ping</b> . <br><br>  Anda akan sering menemukan itu, alih-alih <b>pernyataan</b> kondisi bersyarat, <b>&amp;&amp;</b> dan <b>||</b>  .  Dalam latihan di bawah ini, Anda dapat berlatih menggunakan pernyataan bersyarat menggunakan <b>jika ... maka ... yang lain</b> , atau <b>&amp;&amp;</b> dan <b>||</b>  . <br><br>  <b>Latihan</b>  Menggunakan <b>if ... then ... else</b> <br><br>  Dalam latihan ini, Anda akan mengerjakan skrip yang memeriksa apa itu file dan apa itu direktori. <br><br><ol><li>  Luncurkan editor dan buat skrip bernama filechk. </li><li>  Salin konten Listing 4 ke dalam skrip ini. </li><li>  Jalankan beberapa tes dengan itu, seperti <b>./filechk / etc / hosts</b> , <b>./filechck / usr</b> , <b>./filechk file yang tidak ada</b> . </li></ol><br><h2>  Untuk loop </h2><br>  For loop adalah solusi tepat untuk memproses rentang data.  Dalam Listing 5, Anda dapat melihat contoh pertama dengan <b>untuk</b> , di mana rentang ditentukan dan diproses saat ada nilai mentah dalam rentang ini. <br><br>  <b>Listing 5</b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # for (( COUNTER=100; COUNTER&gt;1; COUNTER-- )); do echo $COUNTER done exit 0</span></span></code> </pre> <br>  A <b>for</b> loop selalu dimulai dengan untuk kata kunci, diikuti oleh kondisi yang perlu diperiksa.  Ini diikuti oleh kata kunci <b>do</b> , diikuti oleh perintah yang harus dieksekusi, jika kondisinya benar, loop berakhir menggunakan kata kunci yang <b>dilakukan</b> . <br><br>  Dalam contoh di Listing 5, Anda dapat melihat bahwa kondisinya adalah rentang angka dalam tanda kurung yang ditetapkan ke variabel COUNTER. <br><br>  <b>Sedikit penjelasan</b> <br><br>  Di dalam <b>(())</b> ekspresi aritmatika dihitung dan hasilnya dikembalikan.  Misalnya, dalam kasus paling sederhana, konstruksi a = $ ((5 + 3)) akan menetapkan variabel "a" nilai ekspresi "5 + 3", atau 8. Selain itu, tanda kurung ganda memungkinkan bekerja dengan variabel dalam gaya bahasa C. <br><br>  Pertama, variabel diinisialisasi ke 100, dan selama nilainya lebih besar dari 1, dikurangi 1 pada setiap iterasi. Selama kondisinya benar, nilai variabel $ COUNTER ditampilkan menggunakan perintah <b>echo</b> . <br><br>  Dalam Listing 6, Anda dapat melihat salah satu kalimat favorit saya <b>untuk</b> .  Rentang ini didefinisikan kali ini sebagai urutan angka, mulai dari 100 dan mencapai 104. <br><br>  <b>Listing 6</b> <br><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> {100..104}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ping â€“c 1 192.168.4.<span class="hljs-variable"><span class="hljs-variable">$i</span></span> &gt;/dev/null &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 192.168.4.<span class="hljs-variable"><span class="hljs-variable">$i</span></span> is up; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br>  Perhatikan bagaimana rentang ditentukan: pertama Anda tentukan angka pertama, lalu dua poin dan tunjukkan angka terakhir dalam rentang.  Selain itu, dengan <b>untuk i dalam,</b> untuk masing-masing angka-angka ini, variabel <b>i</b> ditugaskan.  Masing-masing angka ini diberikan ke variabel <b>i</b> dan kemudian perintah <b>ping</b> dieksekusi, di mana opsi <b>-c 1</b> memastikan bahwa hanya satu permintaan yang dikirim. <br><br>  Hasil dari perintah <b>ping</b> tidak diperhitungkan, sehingga hasilnya dialihkan ke / dev / null.  Berdasarkan status keluaran dari perintah <b>ping</b> , sebagian dari ekspresi <b>&amp;&amp;</b> dijalankan.  Jadi, jika tuan rumah tersedia, sebuah garis ditampilkan yang menunjukkan bahwa ia sedang berjalan. <br><br><h2>  Memahami sementara dan sampai </h2><br>  Jika pernyataan for yang baru saja Anda baca berguna untuk bekerja dengan rentang elemen, pernyataan while berguna ketika Anda ingin melacak sesuatu seperti aksesibilitas proses.  Ada juga pernyataan <b>sampai</b> , yang dieksekusi selama kondisi yang diperiksa salah.  Dalam Listing 7, Anda dapat membaca bagaimana <b>saat</b> digunakan untuk memantau aktivitas proses. <br><blockquote>  Catatan  Saya tidak mengerti apa yang dilakukan skrip ini.  Dalam kasus saya, CentOS 7 digunakan dan secara default tidak ada monitor, meskipun skrip secara eksplisit mengatakan: <pre>  penggunaan: monitor &lt;processname&gt; </pre>  Di suatu tempat selama setengah jam saya mencari program monitor CetOS di Google, tetapi tidak menemukannya.  Dan umumnya tidak jelas monitor sisi apa yang ada di sini jika ps aux digunakan.  Bagaimanapun, saya tidak mengerti apa yang dilakukan skrip ini.  Permintaan besar untuk membantu menyelesaikan masalah ini adalah untuk menyesuaikan teks dan / atau skrip. </blockquote>  <b>Listing 7</b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # # usage: monitor &lt;processname&gt; while ps aux | grep $1 | grep -v grep &gt; /dev/tty11 do sleep 5 done clear echo your process has stopped logger $1 is no longer present mail -s "process $1 has stopped" root &lt; .</span></span></code> </pre> <br>  Script dalam Listing 7 terdiri dari dua bagian.  Pertama, ada <b>loop sementara</b> .  Kedua, ada semua yang perlu dilakukan ketika <b>loop sementara</b> tidak lagi dievaluasi sebagai benar. <br><br>  Inti dari <b>while loop</b> adalah perintah <b>ps</b> , yang memiliki nilai <b>$ 1</b> . <br><br>  Perhatikan penggunaan <b>grep -v grep</b> , yang mengecualikan baris yang berisi <b>perintah grep</b> dari hasilnya.  Ingat bahwa perintah <b>ps</b> akan mencakup semua proses yang sedang berjalan, termasuk <b>perintah grep</b> , di mana output dari <b>perintah</b> <b>ps</b> dilewatkan.  Ini dapat menyebabkan kecocokan positif palsu. <br><br>  Output dari perintah <b>ps aux</b> diarahkan ke / dev / tty11.  Ini memungkinkan Anda membaca hasil dari tty11 nanti, jika perlu, tetapi hasilnya tidak ditampilkan secara default. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pernyataan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sementara</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diikuti oleh perintah yang harus dijalankan jika kondisi yang diperiksa benar. Dalam hal ini, itu adalah perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sleep 5</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang menghentikan eksekusi skrip selama 5 detik. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selama kondisi pernyataan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sementara</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> benar, loop terus dijalankan. Jika kondisinya salah (yang dalam hal ini berarti bahwa proses tidak lagi tersedia), maka siklus berhenti dan perintah yang mengikutinya dapat dieksekusi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda harus terbiasa dengan semua perintah ini kecuali yang terakhir. Dalam baris tersebut, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"proses $ 1 telah berhenti" root &lt;.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pesan dikirim ke pengguna root menggunakan sistem surat internal, yang berjalan di Linux * secara default. Perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">surat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil sebagai argumen pertama subjek pesan yang ditentukan dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opsi -s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* - setidaknya pada CentOS berfungsi secara default. (at. translator)</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perhatikan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di akhir tim. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Biasanya, ketika menggunakan perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">email</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam mode interaktif, editor terbuka di mana Anda dapat menulis isi pesan. Editor ini ditutup, menyediakan garis yang hanya memiliki periode. Dalam perintah ini, sebuah titik disediakan dengan mengarahkan ulang STDIN. Ini memungkinkan pesan untuk diproses tanpa persyaratan tambahan untuk aktivitas pengguna. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siklus </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sementara</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - kebalikan dari siklus </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sampai</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , contoh yang ditampilkan dalam daftar 8.</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hingga</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memulai iterasi yang berlangsung hingga kondisi menjadi benar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam Listing 8, digunakan untuk memfilter output dari perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengguna</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan kemunculan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang akan menjadi nama pengguna. </font><font style="vertical-align: inherit;">Sampai perintah ini benar, iterasi berlanjut. </font><font style="vertical-align: inherit;">Ketika nama pengguna ditemukan di output pengguna, iterasi ditutup, dan setelah loop </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sampai</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seluruh perintah dieksekusi. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 8</font></font></b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # until users | grep $1 &gt; /dev/null do echo $1 is not logged in yet sleep 5 done echo $1 has just logged in mail -s "$1 has just logged in" root &lt; .</span></span></code> </pre> <br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Memahami kasus </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Loop iterasi penting terakhir adalah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">case</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> *. Operator </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kasus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> digunakan untuk mengevaluasi sejumlah nilai yang diharapkan. Secara khusus, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pernyataan kasus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> penting dalam skrip startup Linux, yang dalam versi sebelumnya digunakan untuk memulai layanan. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* - apakah ini sebuah siklus?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pernyataan kasus,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda mendefinisikan setiap argumen spesifik yang Anda harapkan, diikuti oleh perintah yang perlu dijalankan jika argumen itu digunakan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam Listing 9, Anda dapat melihat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pernyataan kasus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang digunakan dalam versi sebelumnya untuk menjalankan hampir semua layanan. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 9</font></font></b> <br><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$1</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> start) start;; stop) rm -f <span class="hljs-variable"><span class="hljs-variable">$lockfile</span></span> stop;; restart) restart;; reload) reload;; status) status ;; *) <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Usage: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$0</span></span></span><span class="hljs-string"> (start|stop|restart|reload|status)"</span></span> ;; <span class="hljs-keyword"><span class="hljs-keyword">esac</span></span></code> </pre> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">case</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memiliki beberapa fitur. Pertama datang garis - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">case secara berurutan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ini diikuti oleh daftar semua nilai yang mungkin perlu dievaluasi. Setiap elemen ditutup dengan braket </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini diikuti oleh daftar perintah yang akan dieksekusi jika argumen spesifik digunakan. Daftar perintah ditutup dengan titik koma ganda ;; dapat digunakan segera setelah perintah terakhir dan dapat digunakan pada baris terpisah. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhatikan juga bahwa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berlaku untuk semua parameter lain yang tidak ditentukan sebelumnya. Ini adalah operator yang mencakup segalanya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lingkaran iterasi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kasus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berakhir dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pernyataan esac</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhatikan bahwa urutan dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kasus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dijalankan secara berurutan. </font><font style="vertical-align: inherit;">Ketika pertandingan pertama dibuat, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pernyataan kasus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak akan mengevaluasi apa pun. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai bagian dari penilaian, templat yang mirip dengan templat dapat digunakan. </font><font style="vertical-align: inherit;">Ini ditampilkan dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> urutan yang cocok dengan semuanya. </font><font style="vertical-align: inherit;">Tetapi Anda juga dapat menggunakan urutan seperti mulai | Mulai | MULAI) untuk mencocokkan menggunakan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">case</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lain </font><font style="vertical-align: inherit;">.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Skrip Debugging di Bash </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika skrip tidak melakukan apa yang Anda harapkan, ada baiknya melakukan debugging. </font><font style="vertical-align: inherit;">Untuk memulai, coba jalankan sebagai argumen pada perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bash -x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini akan menunjukkan kepada Anda baris demi baris apa yang coba dibuat skrip, serta kesalahan spesifik jika tidak berfungsi sebagaimana mestinya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 10 menunjukkan contoh penggunaan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bash -x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , di mana segera menjadi jelas bahwa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perintah grep</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak tahu apa yang harus dilakukan, karena argumen untuk operasinya tidak ada.</font></font><br><br><pre> <code class="bash hljs">[root@server1 ~]<span class="hljs-comment"><span class="hljs-comment"># bash -x 319.sh + grep Usage: grep [OPTION]... PATTERN [FILE]... Try 'grep --help' for more information. + users + echo is not logged in yet is not logged in yet + sleep 5</span></span></code> </pre> <br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Untuk meringkas </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di artikel ini, Anda belajar cara menulis skrip shell. </font><font style="vertical-align: inherit;">Anda telah melihat beberapa contoh dan sekarang terbiasa dengan beberapa elemen dasar yang diperlukan untuk membuat skrip yang sukses.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471242/">https://habr.com/ru/post/id471242/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471226/index.html">Linux memiliki banyak wajah: cara bekerja pada distribusi apa pun</a></li>
<li><a href="../id471228/index.html">Grokay PyTorch</a></li>
<li><a href="../id471232/index.html">Pengalaman saya menghubungkan LPS331AP ke Omega Onion2</a></li>
<li><a href="../id471236/index.html">Dosimeter untuk Seryozha. Bagian III. Radiometer nasional</a></li>
<li><a href="../id471240/index.html">"Bitchy Betty" dan antarmuka audio modern: mengapa mereka berbicara dengan suara wanita?</a></li>
<li><a href="../id471244/index.html">Kode Rosetta: mengukur panjang kode dalam sejumlah besar bahasa pemrograman, mempelajari kedekatan bahasa satu sama lain</a></li>
<li><a href="../id471248/index.html">Regulator AS melarang distribusi token Telegram Open Network</a></li>
<li><a href="../id471254/index.html">Startup Akselerator Universitas ITMO - Proyek Visi Mesin Awal</a></li>
<li><a href="../id471256/index.html">Vue.js Baik, Tapi Apakah Lebih Baik Dari Sudut atau Bereaksi?</a></li>
<li><a href="../id471258/index.html">Sistem penyimpanan / pemuatan data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>