<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤣 📖 🎅🏼 Konser dan acara KudaGo di cermin Anda 🏻 📆 ⏪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya akan memberi tahu Anda tentang bagaimana saya memungkinkan untuk menerima dan menampilkan informasi dari API KudaGo publik di cermin Anda. Tentu ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Konser dan acara KudaGo di cermin Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473344/">  Saya akan memberi tahu Anda tentang bagaimana saya memungkinkan untuk menerima dan menampilkan informasi dari API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">KudaGo</a> publik di cermin Anda.  Tentu saja, ini bukan tentang cermin yang sederhana, tetapi tentang cermin "pintar". <br><a name="habracut"></a><br><h3>  Apa itu cermin pintar? </h3><br>  Kemungkinan besar, banyak orang telah mendengar tentang platform modular <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MagicMirror²</a> , yang memungkinkan Anda untuk menyebarkan aplikasi pada Raspberry Pi yang dapat mengubah cermin untuk ruang masuk atau kamar mandi menjadi asisten pribadi Anda.  Anda dapat menerapkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> menggunakan apa yang disebut cermin "dua arah", monitor, lengan lurus, dan komputer mikro yang disebutkan di atas. <br><br>  Magic in MagicMirror hanya dalam nama.  Jika saya mengerti dengan benar, semua ini dikembangkan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Electron</a> , yang berarti bahwa Node.js. terlibat dalam masalah ini.  "Aplikasi" menciptakan halaman html yang, ketika diluncurkan, terbuka di jendela browser, dan apa yang disebut modul sudah ditampilkan di sana, keduanya sudah diinstal sebelumnya (Jam, Kalender, Cuaca Saat Ini, Prakiraan Cuaca, Umpan Berita.), Dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dikembangkan oleh komunitas</a> .  Dan ada yang cukup menarik (baik yang berguna dan <s>keras kepala yang</s> tidak biasa), misalnya, berikut ini hanya beberapa dari lebih dari seratus modul: <br><br><h4>  Berguna </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Integrasi Asisten Google</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kontrol suara</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengenalan wajah</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">YouTube</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Melacak hasil olahraga</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Umpan Instagram</a> </li></ul><br><h4>  Mewah </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Statistik FortNite</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pelacakan kurs Cryptocurrency</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Video Earth langsung dari Stasiun Luar Angkasa Internasional.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Status gerombolan buruh pelabuhan</a> </li></ul><br><h3>  Latar belakang </h3><br>  Tentang bagaimana saya mengumpulkan cermin, saya tidak akan melukis secara detail.  Jika seseorang tertarik maka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anda dapat membaca di sini</a> .  Jika Anda ingin membuat sendiri, maka pencarian Google sederhana akan menghasilkan puluhan contoh \ panduan \ manual.  Saya ingin menunjukkan cara membuat modul untuk cermin semacam itu. <br><br>  Saya penggemar berat menghadiri berbagai konser dan acara St. Petersburg.  Tetapi kadang-kadang terjadi bahwa (bahkan dengan mempertimbangkan banyaknya iklan kontekstual, spam dan poster) saya belajar tentang beberapa peristiwa hampir satu atau dua hari sebelum mereka.  Karena itu, saya selalu mencari cara untuk menyaring aliran informasi tentang mereka secara optimal.  Aplikasi pada smartphone dengan fungsi yang sama tidak bertahan lama (lebih tepatnya, saya lupa tentang mereka).  Semua poster memerlukan waktu dan perjalanan yang konstan dari pencarian "pilih 10 filter, dan tebak yang mana yang benar".  Umpan media sosial umumnya berubah menjadi spam iklan.  Dan kemudian muncul ide untuk mengimplementasikan "parser" yang secara berkala akan memilih informasi pada kriteria sendiri dan menampilkannya di suatu tempat. <br><br><h3>  Pengembangan modul Anda </h3><br>  Jika seseorang segera ingin melihat hasilnya, atau memasang modul pada "mirror", maka di sini ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ke repositori</a> .  Ada juga instruksi pemasangan. <br><br>  Sebagai sumber informasi, layanan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kudago</a> ternyata yang paling memadai.  Tidak diperlukan pendaftaran.  Metode waras.  Data ringkas dalam jawaban.  Ini bukan liputan yang aneh, termasuk, tidak hanya "trotoar kota" dan "non-karet", tetapi juga 9 kota besar Rusia sebagai tambahan. <br><br>  Modul yang dikembangkan kami harus disimpan dalam <i>folder modules / modulename</i> .  Untuk membuat modul sederhana (seperti milik saya) kita perlu membuat dua file di folder ini: <br><br><ul><li>  modulename / modulename.js adalah skrip dari modul utama. </li><li>  modulename / node_helper.js adalah "pembantu opsional" yang akan dimuat oleh skrip.  Helper dan skrip modul dapat berkomunikasi satu sama lain menggunakan sistem soket terintegrasi. </li></ul><br>  Setelah bermain-main dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">panduan dari pengembang MagicMirror</a> , serta melihat solusi orang lain, saya mengunggah skrip untuk mendapatkan entri dari API kudago menggunakan XMLHttpRequest.  Dan mengalami masalah permintaan lintas-domain.  Saya bukan ahli javascript sama sekali (dan bahkan bukan pengembang).  Yang saya mengerti adalah mengirim permintaan "mengeksekusi skrip di browser" dan mendapatkan respons dari kudago, saya tidak bisa berhasil.  Inilah yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">belajar. Naskah</a> menjelaskan kepada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">saya</a> <br><br><blockquote>  Permintaan lintas domain menjalani kontrol keamanan khusus, yang tujuannya adalah untuk mencegah peretas jahat menaklukkan Internet. <br><br>  Serius.  Pengembang standar telah memberikan semua hambatan sehingga "peretas jahat" tidak bisa, dengan menggunakan standar baru, melakukan sesuatu yang secara fundamental berbeda dari apa yang bisa ia lakukan sebelumnya dan, dengan demikian, "memecah" beberapa server yang menjalankan standar lama dan tidak mengharapkan sesuatu yang pada dasarnya baru. </blockquote><br>  Yah, tidak benar-benar apa yang saya inginkan.  Saya tidak punya keinginan untuk memahami masalah javascript.  Lagi pula, yang ada di tangan adalah Python yang akrab dan dapat diprediksi.  Saya hanya akan mendapatkan informasi dari perpustakaan <i>permintaan</i> , menulis hasilnya di json.  Tetap hanya untuk memecahkan pertanyaan tentang bagaimana membuat kode Python dari js mengeksekusi. <br><br>  Ternyata node_helper.js bermanfaat bagi saya!  Saat memulai modul kami, Anda dapat menggunakan kemampuan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">python-shell</a> .  Cukup tentukan path ke interpreter Python, path ke skrip, argumen dan nilainya.  Dalam bentuk ini, kudago dengan ramah mengembalikan jawaban yang sukses kepada saya. <br><br><div class="spoiler">  <b class="spoiler_title">Kode panggilan skrip python</b> <div class="spoiler_text"><pre><code class="javascript hljs">kudagoGetData: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//call python script for collecting events from KudaGo api self = this; var options = { pythonPath: this.config.pythonPath, scriptPath: './modules/MMM-KudaGo', mode: 'json', args: [ "--location", this.config.location, "--days", this.config.days, "--categories", this.config.categories, "--tags", this.config.tags, ] }; pyshell.PythonShell.run('KudaGo.py', options, function (err) { if (err) throw err; }); }</span></span></code> </pre> <br></div></div><br>  Selain itu, hanya node_helper.js yang dapat membaca informasi dari file json (secara default, file tersebut akan terletak di jalur <i>kudago / events.json</i> ) dengan data yang diunduh dari kudago.  Kami menerapkan di dalamnya pembacaan yang sama dari file. <br><br><div class="spoiler">  <b class="spoiler_title">Kode untuk membaca informasi dari file</b> <div class="spoiler_text"><pre> <code class="javascript hljs">readData: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//read a file with events fs.readFile("./modules/MMM-KudaGo/kudago/events.json", "utf8", (err, data) =&gt; { if (err) throw err; this.sendSocketNotification("DATA", data); }); }</span></span></code> </pre> <br></div></div><br>  Seperti yang sudah saya tulis, di MagicMirror semua modul berkomunikasi melalui sistem soket, jadi agar skrip Python kami dijalankan saat startup, tambahkan kode yang sesuai ke node_helper.js <br><br><div class="spoiler">  <b class="spoiler_title">Kode untuk memulai modul saat startup</b> <div class="spoiler_text"><pre> <code class="javascript hljs">socketNotificationReceived: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">notification, payload</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notification === <span class="hljs-string"><span class="hljs-string">"START"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config = payload; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.kudagoGetData(); setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.kudagoGetData(); }, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.updateInterval); } }</code> </pre> <br></div></div><br>  Semua parameter yang diperoleh dari <i>this.config</i> adalah variabel yang telah ditentukan sebelumnya dalam file modul utama, atau yang ditentukan dalam config.js - file konfigurasi umum untuk semua modul MagicMirror. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh konfigurasi untuk modul yang dibuat</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">module</span></span>: <span class="hljs-string"><span class="hljs-string">'MMM-KudaGo'</span></span>, <span class="hljs-attr"><span class="hljs-attr">disabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-string"><span class="hljs-string">'bottom_bar'</span></span>, <span class="hljs-attr"><span class="hljs-attr">config</span></span>: { <span class="hljs-attr"><span class="hljs-attr">location</span></span>: <span class="hljs-string"><span class="hljs-string">"spb"</span></span>, <span class="hljs-attr"><span class="hljs-attr">categories</span></span>: <span class="hljs-string"><span class="hljs-string">"concert"</span></span>, <span class="hljs-attr"><span class="hljs-attr">tags</span></span>: <span class="hljs-string"><span class="hljs-string">"  --,"</span></span>, <span class="hljs-attr"><span class="hljs-attr">days</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span> } }</code> </pre> <br></div></div><br>  Nah, di file utama modul <a href="">MMM-KudaGo.js kami ada</a> parameter default, fungsi untuk menangani data acara (diambil dari file json), tanda-tanda untuk menggambar piring (dari mana orang yang tahu akan mengeluarkan darah dari mata saya, tapi saya di dalam tangki, hal utama bagi saya adalah berhasil).  Karena kenyataan bahwa saya mengambil pekerjaan dengan API dalam file python, file .js tidak kelebihan beban dengan kode (tidak seperti kebanyakan modul lainnya), bersarang (atau apa namanya di sini?) Fungsi, loop dan mie lainnya. <br><br><h3>  Hasil </h3><br><div class="spoiler">  <b class="spoiler_title">Tangkapan layar modul itu sendiri</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/2c0/d50/2f0/2c0d502f052e78c683af398ab6000092.jpg" alt="gambar"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Tangkapan layar cermin</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/yf/fh/7k/yffh7ks7qlbu6gvufqrpd7ffes8.png" alt="gambar"><br></div></div><br>  Ternyata untuk melaksanakan pencarian untuk satu atau lebih kategori peristiwa, pencarian dengan tag, mencari interval hari tertentu, dengan memperbarui pada interval yang ditentukan (Untuk daftar kategori dan tag yang lebih rinci, lihat <a href="">readme</a> ).  Dan tampilkan semuanya di layar, yang menunjukkan tempat, nama, tanggal dan harga, dalam bentuk yang dapat dibaca, dan tanpa membuang waktu untuk pencarian independen. <br><br>  Tentu saja, Anda perlu hati-hati menonton beberapa kali applet kembali ke sana untuk memahami tag apa yang perlu Anda pasang sehingga tidak menunjukkan konser atau pertunjukan teater, tetapi misalnya kursus yoga atau festival gratis di kota Anda.  Tetapi secara pribadi, kebutuhan saya sepenuhnya terpenuhi! <br><br>  Saya harap Anda juga membuat dan membuat modul yang berguna untuk komunitas, yang Anda bagikan dengan orang lain di halaman khusus proyek.  Ngomong-ngomong, jika Anda punya ide bagus, atau butuh sesuatu, maka tulis di komentar.  Mungkin mendorong seseorang ke kreatif! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473344/">https://habr.com/ru/post/id473344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473332/index.html">Mitya Alexandrov dan Dmitry Konstantinov di pertemuan jug.msk.ru</a></li>
<li><a href="../id473334/index.html">Kucing Ghonim: Bagaimana membuat kucing tidak buang air di halaman rumah?</a></li>
<li><a href="../id473338/index.html">TDD: cara menulis spesifikasi dengan benar (menjelaskan)</a></li>
<li><a href="../id473340/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 386 (21 - 27 Oktober 2019)</a></li>
<li><a href="../id473342/index.html">"Jalan panjang sedang menunggu Anda ..." atau menyelesaikan masalah perkiraan di C # menggunakan Ml.NET (DataScience)</a></li>
<li><a href="../id473346/index.html">Membuat API REST dengan Node.js dan Oracle Database. Bagian 2</a></li>
<li><a href="../id473348/index.html">Ide inersia (SGDm), gagasan scaling (Adagrad) dan regularisasi dalam pembelajaran mesin menggunakan masalah klasifikasi sebagai contoh</a></li>
<li><a href="../id473350/index.html">Membuat API REST dengan Node.js dan Oracle Database. Bagian 3</a></li>
<li><a href="../id473352/index.html">Koleksi serentak dalam 10 menit</a></li>
<li><a href="../id473354/index.html">Tentang keanehan habrostatistics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>