<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé® üë®üèΩ ü•• L'histoire des algorithmes de randomisation Tetris üòõ üçû üßú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En 1985, Alexey Pajitnov et Vadim Gerasimov ont sorti Tetris. Ce jeu fascinant et tr√®s addictif obligeait les joueurs √† connecter des pi√®ces apparaiss...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'histoire des algorithmes de randomisation Tetris</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466579/"><img src="https://habrastorage.org/getpro/habr/post_images/98b/032/444/98b032444bc6166195004d46d9b4ee2c.jpg" alt="image"><br>  En 1985, Alexey Pajitnov et Vadim Gerasimov ont sorti Tetris.  Ce jeu fascinant et tr√®s addictif obligeait les joueurs √† connecter <em>des</em> pi√®ces apparaissant <em>au hasard</em> .  Depuis lors, plus de 150 versions sous licence de Tetris ont √©t√© publi√©es.  Diff√©rents dans les modes de jeu, les r√®gles et l'impl√©mentation, ils ont tous jou√© l√©g√®rement (ou tr√®s) diff√©remment.  Le randomiseur Tetris est une fonction qui renvoie une forme s√©lectionn√©e au hasard.  Au fil des ans, les r√®gles de choix des formes ont √©volu√©, influen√ßant le gameplay et l'al√©atoire lui-m√™me.  Certains de ces algorithmes ont √©t√© r√©trocon√ßus et document√©s.  J'ai compil√© une liste de randomiseurs que je consid√®re importants, et je montrerai dans l'article comment la structure interne de Tetris a chang√© au fil des ans. <br><a name="habracut"></a><br><h2>  <em>Tetris</em> (vers 1985) </h2><br>  La premi√®re et originale version de Tetris avait un randomiseur sans biais.  Rien n'a influenc√© le choix de la figure suivante, elle a simplement √©t√© choisie et montr√©e au joueur. <br><br>  Lors de l'utilisation d'un randomiseur sans d√©placement, des situations surviennent dans lesquelles le joueur re√ßoit une s√©quence d'une figure (appel√©e ¬´inondation¬ª, inondation) ou une s√©quence dans laquelle il n'y a pas de figure certaine (appel√©e ¬´s√©cheresse¬ª, s√©cheresse).  Nous verrons comment les concepteurs de diff√©rentes versions de Tetris ont tent√© de r√©soudre l√©g√®rement ce probl√®me. <br><br>  Bien qu'un randomiseur sans biais cr√©e la plus grande complexit√© du puzzle pour les joueurs, il est instable et peut conduire √† une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©quence invincible (PDF)</a> .  Cependant, cela ne se produit pas dans un vrai jeu, car les ordinateurs n'ont pas de v√©ritables g√©n√©rateurs de nombres al√©atoires.  Les g√©n√©rateurs de nombres pseudo-al√©atoires (PRNG) tentent de simuler le vrai hasard, mais n'ont pas les propri√©t√©s qui peuvent g√©n√©rer cons√©cutivement 70 000 chiffres Z. <br><br><h3>  V√©ritable pseudo-al√©atoire </h3><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">random</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pieces = [<span class="hljs-string"><span class="hljs-string">'I'</span></span>, <span class="hljs-string"><span class="hljs-string">'J'</span></span>, <span class="hljs-string"><span class="hljs-string">'L'</span></span>, <span class="hljs-string"><span class="hljs-string">'O'</span></span>, <span class="hljs-string"><span class="hljs-string">'S'</span></span>, <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">'Z'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { yield pieces[Math.<span class="hljs-built_in"><span class="hljs-built_in">floor</span></span>(Math.random() * pieces.length)]; } }</code> </pre> <br>  Difficult√© du puzzle: 4/5 <br><br>  Pr√©vention des inondations: 0/5 <br><br>  Pr√©vention de la s√©cheresse: 0/5 <br><br><h2>  <em>Tetris</em> , Nintendo (1989) </h2><br>  Quatre ans plus tard, la version inhabituellement populaire de Tetris pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NES est sortie</a> . <br><br>  Pour r√©duire le nombre d'inondations (r√©p√©titions) des figures, une v√©rification de l'historique a √©t√© ajout√©e au randomiseur.  Cette simple v√©rification a fait ce qui suit: <br><br><ol><li>  choisissez une figure </li><li>  v√©rifi√© si le chiffre correspond au pr√©c√©dent, </li><li>  si c'est le cas, l'algorithme a s√©lectionn√© une nouvelle forme, mais une seule fois, </li><li>  et quel que soit le r√©sultat, le chiffre a √©t√© remis au joueur. </li></ol><br>  Bien que la probabilit√© d'obtenir une pi√®ce d'affil√©e diminuait, rien n'emp√™chait le jeu d'√©mettre deux pi√®ces en alternance.  De plus, dans cette version, la s√©cheresse de plus de 30 chiffres √©tait une situation fr√©quente.  Une s√©cheresse pourrait survenir pour tout type de t√©tramino, mais la figure I est importante pour marquer dans ce jeu, et sa grande s√©cheresse pourrait affecter de mani√®re significative le score final. <br><br><h3>  M√©moriser une histoire 1 figure en profondeur et avec 1 lancer </h3><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">historyRandomizer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pieces = [<span class="hljs-string"><span class="hljs-string">'I'</span></span>, <span class="hljs-string"><span class="hljs-string">'J'</span></span>, <span class="hljs-string"><span class="hljs-string">'L'</span></span>, <span class="hljs-string"><span class="hljs-string">'O'</span></span>, <span class="hljs-string"><span class="hljs-string">'S'</span></span>, <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">'Z'</span></span>]; let history; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// First "roll" piece = pieces[Math.floor(Math.random() * pieces.length)]; // Roll is checked against the history if (piece === history) { piece = pieces[Math.floor(Math.random() * pieces.length)]; } history = piece; yield piece; } }</span></span></code> </pre> <br>  Difficult√© du puzzle: 5/5 <br><br>  Pr√©vention des inondations: 2/5 <br><br>  Pr√©vention de la s√©cheresse: 0/5 <br><br><h2>  <em>Tetris: le grand ma√Ætre</em> (1998) </h2><br>  Bien que <em>Tetris pour NES ait</em> am√©lior√© l'algorithme par rapport √† la randomisation sans biais, les s√©cheresses y √©taient encore fr√©quentes.  <em>Tetris: Le Grand Master</em> ( <em>TGM</em> ) a essentiellement utilis√© le m√™me syst√®me, mais avec une histoire plus longue et plus de lancers. <br><br>  En raison de l'augmentation de ces valeurs, non seulement le nombre d'inondations a diminu√©, mais la situation des s√©cheresses s'est √©galement am√©lior√©e.  Quatre figures ont √©t√© conserv√©es dans l'histoire, ce qui signifie que la probabilit√© d'obtenir une figure qui n'existait pas depuis longtemps a augment√©.  Malgr√© cela, le jeu manquait toujours d'une r√®gle stricte pour √©viter les s√©cheresses et elles se sont toujours produites, bien que beaucoup moins fr√©quemment que dans <em>Tetris pour NES</em> . <br><br><h3>  M√©moriser une histoire avec 4 pi√®ces et 4 lancers </h3><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">historyRandomizer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pieces = [<span class="hljs-string"><span class="hljs-string">'I'</span></span>, <span class="hljs-string"><span class="hljs-string">'J'</span></span>, <span class="hljs-string"><span class="hljs-string">'L'</span></span>, <span class="hljs-string"><span class="hljs-string">'O'</span></span>, <span class="hljs-string"><span class="hljs-string">'S'</span></span>, <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">'Z'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// First piece special conditions let piece = ['I', 'J', 'L', 'T'][Math.floor(Math.random() * 4)]; yield piece; let history = ['S', 'Z', 'S', piece]; while (true) { for (let roll = 0; roll &lt; 4; ++roll) { piece = pieces[Math.floor(Math.random() * 7)]; if (history.includes(piece) === false) break; } history.shift(); history.push(piece); yield piece; } }</span></span></code> </pre> <br>  Difficult√© du puzzle: 4/5 <br><br>  Pr√©vention des inondations: 4/5 <br><br>  Pr√©vention de la s√©cheresse: 2/5 <br><br><h2>  <em>Tetris Worlds</em> et autres (2001) </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4b/59a/4a8/b4b59a4a8eb64c5edb6a280a72d38a8a.jpg"></div><br>  <em>Tetris Worlds a</em> pr√©sent√© les masses au g√©n√©rateur al√©atoire.  Il est maintenant le randomiseur officiel, dans la plupart des versions officielles du jeu apr√®s <em>Tetris Worlds,</em> et √† ce jour, il est utilis√©. <br><br>  Les randomiseurs bas√©s sur l'histoire ont aid√© √† se d√©barrasser des inondations (ou du moins √† les minimiser), mais n'ont pas mis fin √† la s√©cheresse.  Sous certaines conditions, il √©tait toujours possible d'obtenir une s√©quence mortelle de chiffres. <br><br>  Le g√©n√©rateur al√©atoire (Random Generator) r√©sout ces probl√®mes gr√¢ce √† l'utilisation d'un nouveau syst√®me de "sacs" (sacs).  Dans ce syst√®me, la liste des figures est plac√©e dans un ¬´sac¬ª, apr√®s quoi les figures en sont extraites au hasard les unes apr√®s les autres jusqu'√† ce que le ¬´sac¬ª soit vide.  Lorsqu'il est vide, les morceaux y retournent et le processus se r√©p√®te.  Le g√©n√©rateur al√©atoire a un ¬´sac¬ª de taille 7 (7 sacs), c'est-√†-dire un ¬´sac¬ª rempli de chacun des 7 t√©traminos.  D'autres types de ¬´sacs¬ª sont possibles, par exemple un sac de 14, dans lequel deux morceaux de chaque type de t√©tramino sont plac√©s. <br><br>  En raison du manque d'historique des ¬´sacs¬ª, des inondations de 2 chiffres et des ¬´serpents¬ª de 4 chiffres peuvent se produire √† leurs jonctions ( <img src="https://habrastorage.org/webt/pc/ws/v4/pcwsv4sjt7ofqojutpk2f8auhxo.png">  , <img src="https://habrastorage.org/webt/qp/ua/pn/qpuapnx-u3qicgxo1-nwppigh70.png">  etc.).  C'est, en un sens, un pas en arri√®re par rapport au <em>Tetris</em> traditionnel <em>pour NES</em> . <br><br>  Les pi√®ces sortent du sac 7 de mani√®re stable, ce qui le rend plus pr√©visible.  Il est facile de comprendre dans quelle partie du ¬´sac¬ª vous vous trouvez et quand le chiffre dont vous avez besoin peut venir.  En raison de la pr√©visibilit√© de ce g√©n√©rateur de hasard, le jeu peut en fait √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jou√© sans fin</a> .  En g√©n√©ral, c'est un syst√®me tr√®s stupide, et on ne sait pas comment il est g√©n√©ralement devenu un randomiseur officiel. <br><br><h3>  7 sacs </h3><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randomGenerator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ let bag = []; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bag.length === <span class="hljs-number"><span class="hljs-number">0</span></span>) { bag = [<span class="hljs-string"><span class="hljs-string">'I'</span></span>, <span class="hljs-string"><span class="hljs-string">'J'</span></span>, <span class="hljs-string"><span class="hljs-string">'L'</span></span>, <span class="hljs-string"><span class="hljs-string">'O'</span></span>, <span class="hljs-string"><span class="hljs-string">'S'</span></span>, <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">'Z'</span></span>]; bag = shuffle(bag); } yield bag.pop(); } }</code> </pre> <br>  Difficult√© du puzzle: 3/5 <br><br>  Pr√©vention des inondations: 3/5 <br><br>  Pr√©vention de la s√©cheresse: 4/5 <br><br><h2>  <em>Tetris: The Grand Master 3 - Terror-Instinct</em> (2005) </h2><br>  TGM3 a consid√©rablement avanc√© l'id√©e de g√©n√©rer de l'al√©atoire.  Il s'agit d'un syst√®me unique que l'on ne trouve dans aucune autre version. <br><br>  Au lieu d'un sac ou d'une histoire, le TGM3 utilise un ensemble de formes.  Initialement, il comporte 5 chiffres de chaque type, soit un total de 35 chiffres.  Lorsqu'une figurine est tir√©e, elle n'est pas retir√©e du bassin, mais est remplac√©e par la figurine ayant la s√©cheresse la plus importante (celle qui n'a pas √©t√© retir√©e depuis longtemps).  Progressivement, la piscine est de plus en plus remplie de ce chiffre jusqu'√† ce qu'elle soit finalement retir√©e.  Cela r√©sout les probl√®mes des syst√®mes de ¬´sac¬ª, ainsi que des syst√®mes avec une histoire;  elle tire le meilleur parti des deux types de randomisation. <br><br><h3>  Pool de 35 figurines avec 6 lancers </h3><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tgm3Randomizer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ let pieces = [<span class="hljs-string"><span class="hljs-string">'I'</span></span>, <span class="hljs-string"><span class="hljs-string">'J'</span></span>, <span class="hljs-string"><span class="hljs-string">'L'</span></span>, <span class="hljs-string"><span class="hljs-string">'O'</span></span>, <span class="hljs-string"><span class="hljs-string">'S'</span></span>, <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">'Z'</span></span>]; let order = []; <span class="hljs-comment"><span class="hljs-comment">// Create 35 pool. let pool = pieces.concat(pieces, pieces, pieces, pieces); // First piece special conditions const firstPiece = ['I', 'J', 'L', 'T'][Math.floor(Math.random() * 4)]; yield firstPiece; let history = ['S', 'Z', 'S', firstPiece]; while (true) { let roll; let i; let piece; // Roll For piece for (roll = 0; roll &lt; 6; ++roll) { i = Math.floor(Math.random() * 35); piece = pool[i]; if (history.includes(piece) === false || roll === 5) { break; } if (order.length) pool[i] = order[0]; } // Update piece order if (order.includes(piece)) { order.splice(order.indexOf(piece), 1); } order.push(piece); pool[i] = order[0]; // Update history history.shift(); history[3] = piece; yield piece; } }</span></span></code> </pre> <br>  Difficult√© du puzzle: 4/5 <br><br>  Pr√©vention des inondations: 4/5 <br><br>  Pr√©vention de la s√©cheresse: 4/5 <br><br><h2>  Conclusions </h2><br>  Il est difficile de tirer un r√©sultat d√©finitif.  Le randomiseur TGM3 semble plus pr√©visible et moins complexe pour le joueur.  Le 7-bag maladroit ne semble pas naturel, mais vous permet de cr√©er de nombreuses strat√©gies de construction stables et viables.  Un randomiseur inamical, comme dans Tetris pour NES, peut ruiner votre jeu ou, plus probablement, votre humeur √† jouer. <br><br>  Pouvons-nous am√©liorer ces syst√®mes en les faisant para√Ætre plus al√©atoires et en imposant de s√©v√®res restrictions aux s√©cheresses et aux inondations?  Ou ces restrictions s√©v√®res rendent-elles le jeu plus pr√©visible? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466579/">https://habr.com/ru/post/fr466579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466569/index.html">Introduction en bourse √† la Bourse de Moscou: pourquoi elle est n√©cessaire, qui la conduit et comment acheter des actions</a></li>
<li><a href="../fr466571/index.html">Conseils Tesseract OCR - cr√©ez votre propre vocabulaire pour am√©liorer les performances d'OCR</a></li>
<li><a href="../fr466573/index.html">Questions au futur employeur</a></li>
<li><a href="../fr466575/index.html">Passer des listes bidimensionnelles de python √† DLL</a></li>
<li><a href="../fr466577/index.html">Comment deux √©tudiants ont cr√©√© le jeu sous iOS et combien ils y ont gagn√©</a></li>
<li><a href="../fr466581/index.html">Le darwinisme quantique: une id√©e expliquant la r√©alit√© objective passe le premier test</a></li>
<li><a href="../fr466583/index.html">Une br√®ve histoire du d√©tecteur de mensonge</a></li>
<li><a href="../fr466585/index.html">Comprendre les courtiers de messages. Apprentissage de la m√©canique de la messagerie via ActiveMQ et Kafka. Chapitre 3. Kafka</a></li>
<li><a href="../fr466587/index.html">Variables CSS et th√®me de couleur pour le site en plusieurs lignes</a></li>
<li><a href="../fr466589/index.html">Comment recevoir des donn√©es de Google Analytics √† l'aide de R dans Microsoft SQL Server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>