<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คด๐พ ๐พ๏ธ ๐ป ุบูุฑ ูุชุฒุงูู ุงููุชุงุจุฉ ูู ุชุทุจูู ุงูุฅูุชุฑูุช ุงูุบููุฉ ูุงูุฏูููุฑ ูููุงูุญุชู ๐ก โ๐ฝ ๐๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฐ ุธููุฑ async / await ุ ูุดุฑุช Typescript ุงูุนุฏูุฏ ูู ุงูููุงูุงุช ุงูุชู ุชูุฏู ููุฌ ุงูุชุทููุฑ ูุฐุง ( hackernoon ุ blog.bitsrc.io ุ habr.com ). ูุณุชุฎุฏููุง ููุฐ ุงูุจุฏุงูุฉ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุบูุฑ ูุชุฒุงูู ุงููุชุงุจุฉ ูู ุชุทุจูู ุงูุฅูุชุฑูุช ุงูุบููุฉ ูุงูุฏูููุฑ ูููุงูุญุชู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464773/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ููุฐ ุธููุฑ <code>async</code> / <code>await</code> ุ ูุดุฑุช Typescript ุงูุนุฏูุฏ ูู ุงูููุงูุงุช ุงูุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุฏู</a> ููุฌ ุงูุชุทููุฑ ูุฐุง ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">hackernoon</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">blog.bitsrc.io</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com</a> ).  ูุณุชุฎุฏููุง ููุฐ ุงูุจุฏุงูุฉ ูู ุฌุงูุจ ุงูุนููู (ุนูุฏูุง ูุงูุช ES6 Generators ุชุฏุนู ุฃูู ูู 50ูช ูู ุงููุชุตูุญุงุช).  ูุงูุขู ุฃุฑูุฏ ุฃู ุฃุดุงุฑู ุชุฌุฑุจุชู ุ ูุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชูููุฐ ุงูููุงุฒู</a> ููุณ ูู ูุง ุณูููู ูู ุงูุฌูุฏ ูุนุฑูุชู ุนูู ูุฐุง ุงูุทุฑูู. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุฃูุง ูุง ุฃุญุจ ุงููุงุฏุฉ ุงูุฃุฎูุฑุฉ: ูุฏ ูููู ููุงู ุดูุก ุบูุฑ ููููู.  ูุฑุฌุน ุฌุฒุฆูุง ุฅูู ุญูููุฉ ุฃููู ูุง ุฃุณุชุทูุน ุชูููุฑ ุฑูุฒ ุงูููููุฉ - ููุท ูุชุญุฏูุฏ ุงูููุฌ ุงูุนุงู.  ูุฐูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ุชุชุฑุฏุฏ ูู ุฅุบูุงู ุนูุงูุฉ ุงูุชุจููุจ ุฏูู ูุฑุงุกุฉ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฏูุฑู ุ ูุงุทูุจ ุงูุชูุงุตูู ุบูุฑ ุงููุงุถุญุฉ </li><li style=";text-align:right;direction:rtl">  ุณุฃูุจู ุจูู ุณุฑูุฑ ุงููุตูุญุฉ ูุงูููุฏ ูู ุงูุฃูุซุฑ ุฅุตุฑุงุฑูุง ูุงูุชุดุงููุง ุฏููููุง ุญุชู ุงูุขู. </li></ul><br><p style=";text-align:right;direction:rtl">  <strong>ูุงุฆูุฉ ุงูุชูููุงุช ุงูุฃุณุงุณูุฉ:</strong> </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุชู ูุชุงุจุฉ ุงููุดุฑูุน ูู ุงูููุงู ุงูุฃูู ูู Typescript ุจุงุณุชุฎุฏุงู ุนุฏุฉ ููุชุจุงุช Javascript.  ุงูููุชุจุฉ ุงูุฑุฆูุณูุฉ ูู ExtJS.  ูุนุชุจุฑ ุฑุฏ ูุนู React ุฃูู ุดุฃูุงู ุ ููููู ููุงุณุจ ุชูุงููุง ูููุชุฌ ูุคุณุณุฉ ุจูุงุฌูุฉ ุบููุฉ: ุงูุนุฏูุฏ ูู ุงูููููุงุช ุงูุฌุงูุฒุฉ ุ ุทุงููุงุช ูุตููุฉ ุฌูุฏูุง ุฎุงุฑุฌ ุงูุตูุฏูู ุ ูุธุงู ุจูุฆู ุบูู ูู ุงูููุชุฌุงุช ุฐุงุช ุงูุตูุฉ ูุชุจุณูุท ุงูุชุทููุฑ. </li><li style=";text-align:right;direction:rtl">  ุฎุงุฏู ูุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุบูุฑ ูุชุฒุงูู. </li><li style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฎุฏุงู RPC ุนุจุฑ Websocket ููุณููุฉ ููู ุจูู ุงูุนููู ูุงูุฎุงุฏู.  ูุดุจู ุงูุชูููุฐ .NET WCF. <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃู ูุงุฆู ูู ุฎุฏูุฉ. </li><li style=";text-align:right;direction:rtl">  ูููู ุฃู ููุชูู ุฃู ูุงุฆู ูู ุญูุซ ุงููููุฉ ูุงููุฑุฌุน. </li></ul></li><li style=";text-align:right;direction:rtl">  ุชุดุจู ูุงุฌูุฉ ุทูุจ ุงูุจูุงูุงุช GraphQL ูู Facebook ุ ููุท ุนูู Typescript. </li><li style=";text-align:right;direction:rtl">  ุงุชุตุงู ุซูุงุฆู ุงูุงุชุฌุงู: ูููู ุจุฏุก ุชููุฆุฉ ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูุนููู ููู ุงูุฎุงุฏู. </li><li style=";text-align:right;direction:rtl">  ุชุชู ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุจุงูุชุชุงุจุน ูู ุฎูุงู ุงุณุชุฎุฏุงู ูุธุงุฆู <code>async</code> / <code>await</code> ุงูุฎุงุตุฉ ุจู Typesrcipt. </li><li style=";text-align:right;direction:rtl">  ูุชู ุฅูุดุงุก ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงูุฎุงุฏู ูู Typescript: ุฅุฐุง ุชู ุชุบููุฑูุง ุ ูุณุชุธูุฑ ุงูุจููุฉ ููุฑูุง ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ. </li></ul><br><p style=";text-align:right;direction:rtl">  <strong>ูุง ูู ุงูุฅุฎุฑุงุฌ</strong> </p><br><p style=";text-align:right;direction:rtl">  ุณูู ุฃุฎุจุฑู ุนู ููููุฉ ุชุนุงูููุง ูุน ูุฐุง ููุง ูุนููุงู ูู ุฃุฌู ุงูุชูููุฐ ุงูุขูู ูุบูุฑ ุงูุชูุงูุณู ููุฑูุฒ ุบูุฑ ุงููุชุฒุงูู: ูุตููู ุฃููุงุน ุงูุญุฑูู ูุฏููุง ุงูุฐูู ูููููู ุจุชูููุฐ ูุธุงุฆู ููุงุฆู ุงูุงูุชุธุงุฑ.  ูู ุงูุฃุณุงุณูุงุช ุฅูู ุญู ุญุงูุฉ ุงูุณุจุงู ูุงูุตุนูุจุงุช ุงูุฃุฎุฑู ุงูุชู ุชูุดุฃ ุฃุซูุงุก ุนูููุฉ ุงูุชุทููุฑ. </p><br><h2 id="kak-strukturirovany-dannye-poluchaemye-s-servera" style=";text-align:right;direction:rtl">  ููู ูุชู ุชูุธูู ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ ูู ุงูุฎุงุฏู </h2><br><p style=";text-align:right;direction:rtl">  ูููู ุงูุฎุงุฏู ุจุฅุฑุฌุงุน ูุงุฆู ุฃุตู ูุญุชูู ุนูู ุจูุงูุงุช (ูุงุฆูุงุช ุฃุฎุฑู ุ ูุฌููุนุงุช ูุงุฆูุงุช ุ ุตููู ุฅูุฎ) ูู ุฎุตุงุฆุตู ูู ุดูู ุฑุณู ุจูุงูู.  ูุฐุง ูุฑุฌุน ุ ูู ุฌููุฉ ุฃููุฑ ุ ุฅูู ุงูุชุทุจูู ููุณู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููู ูุฌุนู ุชุญููู ุงูุจูุงูุงุช / ML ุฑุณู ุจูุงูู ููุฌู ููุนูุฏ ุงููุนุงูุฌ. </li><li style=";text-align:right;direction:rtl">  ูู ุนูุฏุฉ ูู ุงูููุงุจู ูููู ุฃู ุชุญุชูู ุนูู ุงูุฑุณู ุงูุจูุงูู ุงูุฎุงุต ุจูุง </li><li style=";text-align:right;direction:rtl">  ุชุญุชูู ุงูุฑุณูู ุงูุจูุงููุฉ ุนูู ุชุจุนูุงุช: ูููู "ุชูุงุฑุซ" ุงูุนูุฏ ุ ููุชู ุฅูุดุงุก ุนูุฏ ุฌุฏูุฏุฉ ูู ุฎูุงู "ุงููุฆุฉ" ุงูุฎุงุตุฉ ุจูุง. </li></ul><br><p style=";text-align:right;direction:rtl">  ููู ูููู ุงูุงุณุชุนูุงู ูู ุดูู ุฑุณู ุจูุงูู ูููู ุชุทุจููู ูู ุฃู ุชุทุจูู ุชูุฑูุจูุง ุ ููุง ูุดูุฑ GraphQL ุ ุญุณุจ ุนููู ุ ุฅูู ุฐูู ูู ููุงุตูุงุชู. </p><br><p style=";text-align:right;direction:rtl">  ูุซุงู ุจููุฉ ุงูุจูุงูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   interface IParent { ServerId: string; Nodes: INodes; // INodes -     INode } //     interface INodes&lt;TNode extends INode&gt; extends ICollection { IndexOf(item: TNode): number; Item(index: number): TNode; // ...     } //    interface INode extends IItem { Guid: string; Name: string; DisplayName: string; Links: ILinks; // ILinks -    Info: INodeInfo; //    -  } //      interface ILink { Guid: string; DisplayName: string; SourceNode: INode; //   -  TargetNode: INode; //   ,   } interface INodeInfo { Component: IComponent; ConfigData: IData; }</span></span></code> </pre><br><h2 id="kak-klient-poluchaet-dannye" style=";text-align:right;direction:rtl">  ููู ูุชููู ุงูุนููู ุงูุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุงูุฃูุฑ ุจุณูุท: ุนูุฏูุง ุชุทูุจ ุฎุงุตูุฉ ููุงุฆู ูู ููุน ุบูุฑ ููุงุณู ุ ุชููู RPC ุจุฅุฑุฌุงุน <code>Promise</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> Nodes = Parent.Nodes; <span class="hljs-comment"><span class="hljs-comment">// Nodes -&gt; Promise&lt;INodes&gt;</span></span></code> </pre><br><h3 id="asinhronnost-bez-callback-hell" style=";text-align:right;direction:rtl">  ุชุฒุงูู ุฏูู "ุฑุฏ ุงูุงุชุตุงู ุงูุฌุญูู". </h3><br><p style=";text-align:right;direction:rtl">  ูุชูุธูู ุฑูุฒ ุบูุฑ ูุชุฒุงูู "ูุชุณูุณู" ุ ูุชู ุงุณุชุฎุฏุงู ูุธููุฉ Typescript <code>async</code> / <code>await</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowNodes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">parent: IParent</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">&gt; </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    let Nodes = await parent.Nodes; //       await Nodes.forEachParallel(async function(node): Promise&lt;void&gt; { await RenderNode(node); //          }); }</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ููุณ ูู ุงูููุทูู ุงูุชุฑููุฒ ุนูููุง ุจุงูุชูุตูู ุ ูููุงู ุจุงููุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุฏ ููุตูุฉ</a> ูุงููุฉ ุนูู ุงููุญูุฑ.  ุธูุฑุช ูู Typescript ูุฑุฉ ุฃุฎุฑู ูู ุนุงู 2016.  ููุฏ ุงุณุชุฎุฏููุง ูุฐู ุงูุทุฑููุฉ ููุฐ ุธููุฑูุง ูู ูุฑุน ุงูููุฒุงุช ูู ูุณุชูุฏุน Typescript ุ ูููุฐุง ุงูุณุจุจ ุญุตููุง ุจุงููุนู ุนูู ุงููุทุจุงุช ููุนูู ุงูุขู ุจูู ุณุฑูุฑ.  ูุจุนุถ ุงูููุช ุงูุขู ุ ููู ุงูุฅูุชุงุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุฎุชุตุงุฑ ุ ุฌููุฑ ุฃููุฆู ุงูุฐูู ููุณูุง ุนูู ุฏุฑุงูุฉ ุจุงูููุถูุน: </p><br><p style=";text-align:right;direction:rtl">  ุจูุฌุฑุฏ ุฅุถุงูุฉ ุงููููุฉ ุงูุฃุณุงุณูุฉ ุบูุฑ <code>async</code> ุฅูู ุงููุธููุฉ ุ ุณุชูุฑุฌุน <code>Promise&lt;_&gt;</code> ุชููุงุฆููุง <code>Promise&lt;_&gt;</code> .  ููุฒุงุช ูุฐู ุงููุธุงุฆู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุนุจูุฑุงุช ุจุฏุงุฎู ูุธุงุฆู <code>async</code> ูุน <code>await</code> (ูุงูุชู ุชุฑุฌุน <code>Promise</code> ) ุณุชููู ุชูููุฐ ุงููุธููุฉ ูุชุณุชูุฑ ุจุนุฏ ุญู <code>Promise</code> ุงููุชููุน. </li><li style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุญุฏูุซ ุงุณุชุซูุงุก ูู ูุธููุฉ <code>async</code> ุ ุณูุชู ุฑูุถ <code>Promise</code> ุฅุฑุฌุงุนู ูุน ูุฐุง ุงูุงุณุชุซูุงุก. </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ุงูุชุญููู ุงูุจุฑูุฌู ูู ููุฏ Javascript ุ ุณูููู ููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุฏุงุช</a> ููุนูุงุฑ ES6 ( <code>function*</code> ุจุฏูุงู ูู <code>async function</code> ูุชุฒุงููุฉ <code>yield</code> ุจุฏูุงู ูู <code>await</code> ) ุฃู ุฑูุฒ ูุฎูู ูุน <code>switch</code> ES5 (ุฌูุงุฒ ุงูุญุงูุฉ).  <code>await</code> ูู ุงููููุฉ ุงูุชู ุชูุชุธุฑ ูุชูุฌุฉ ุงููุนุฏ.  ูู ููุช ุงูุงุฌุชูุงุน ุ ุฃุซูุงุก ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ <code>ShowNodes</code> ูุธููุฉ <code>ShowNodes</code> ุ ูุฃุซูุงุก ุงูุชุธุงุฑ ุงูุจูุงูุงุช ุ ูุฏ ุชููุฐ Javascript ุจุนุถ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฃุฎุฑู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุฃุนูุงู ุ ุชุญุชูู ุงููุฌููุนุฉ ุนูู ุทุฑููุฉ <code>forEachParallel</code> ุงูุชู ุชุณุชุฏุนู ุฑุฏ ุงุชุตุงู ุบูุฑ ูุชุฒุงูู ููู ุนูุฏุฉ ุนูู ุงูุชูุงุฒู.  ูู ุงูููุช ููุณู ุ <code>await</code> ุญุชู <code>await</code> <code>Nodes.forEachParallel</code> ุฌููุน ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช.  ุฏุงุฎู ุงูุชุทุจูู - <code>Promise.all</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *            * @param items  * @param callbackfn  * @param [thisArg]   ,      this  callbackfn */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">forEachParallel</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items: IItemArray&lt;T&gt;, callbackfn: (value: T, index: int, items: IItemArray&lt;T&gt;</span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">any</span></span></span><span class="hljs-function">&gt;, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thisArg</span></span></span><span class="hljs-function">?: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">any</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> xCount = items ? <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> items.Count : <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!xCount) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> xActions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> | any&gt;&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">xCount</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">for</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">let</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">; i &lt; xCount; i++</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">let</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">xItem</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Item</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">xActions</span></span></span><span class="hljs-function">[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">] = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ExecuteCallback</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">xItem, callbackfn, i, items, thisArg</span></span></span><span class="hljs-function">); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">await</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Promise</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">all</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">xActions</span></span></span><span class="hljs-function">); } /**   </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">   </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callbackfn</span></span></span><span class="hljs-function"> */ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">async</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ExecuteCallback</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item: </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Promise</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;T&gt; | T, callbackfn: (value: T, index: int, items: IItemArray&lt;T&gt;</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> | any&gt;, <span class="hljs-attr"><span class="hljs-attr">index</span></span>: int, <span class="hljs-attr"><span class="hljs-attr">items</span></span>: IItemArray&lt;T&gt;, thisArg?: any): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> xItem = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> item; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> callbackfn.call(thisArg, xItem, index, items); }</code> </pre><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุงูุณูุฑ ุงููุญูู: ูุฌุจ ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑู ููุณ ููุท ููุฌููุนุงุชูุง ุ ูููู ุฃูุถูุง ููุตูููุงุช Javascript ุงูููุงุณูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุจุฏู ูุธููุฉ <code>ShowNodes</code> ุบูุฑ ูุซุงููุฉ ููุบุงูุฉ: ุนูุฏูุง ูุทูุจ ููุงููุง ุขุฎุฑ ุ <code>ShowNodes</code> ูู ูุฑุฉ.  ุงูุฑุงุญุฉ ูู ุฃูู ูููู ูุชุงุจุฉ ูุซู ูุฐุง ุงูุฑูุฒ ุจุณุฑุนุฉ ุ ูุฐูู ูุฐุง ุงูููุฌ ุฌูุฏ ููููุงุฐุฌ ุงูุฃูููุฉ ุงูุณุฑูุนุฉ.  ูู ุงูุฅุตุฏุงุฑ ุงูููุงุฆู ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุบุฉ ุงูุงุณุชุนูุงู ูุชูููู ุนุฏุฏ ุงูููุงููุงุช ุฅูู ุงูุฎุงุฏู. </p><br><h2 id="yazyk-zaprosov" style=";text-align:right;direction:rtl">  ูุบุฉ ุงูุงุณุชุนูุงู </h2><br><p style=";text-align:right;direction:rtl">  ููุงู ุงูุนุฏูุฏ ูู ุงููุธุงุฆู ุงูุชู ูุชู ุงุณุชุฎุฏุงููุง "ูุจูุงุก" ุทูุจ ุงูุจูุงูุงุช ูู ุงูุฎุงุฏู.  ุฅููู "ูุฎุจุฑูู" ุงูุฎุงุฏู ุฃู ุนูุฏ ูู ุงูุฑุณู ุงูุจูุงูู ููุจูุงูุงุช ูุฅุฑุฌุงุนู ูู ุงูุงุณุชุฌุงุจุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *       item    Promise  , *      properties */</span></span> selectAsync&lt;T extends IItem&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item: T, properties: (</span></span></span><span class="hljs-function">) =&gt;</span></span> any[]): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;T&gt;; <span class="hljs-comment"><span class="hljs-comment">/** *   items,       properties */</span></span> selectAsyncAll&lt;T extends ICollection&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items: T[], properties: (</span></span></span><span class="hljs-function">) =&gt;</span></span> any[]): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;T[]&gt;; <span class="hljs-comment"><span class="hljs-comment">/**    selectAsync     */</span></span> select&lt;T&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item: T, properties: (</span></span></span><span class="hljs-function">) =&gt;</span></span> any[]): T; <span class="hljs-comment"><span class="hljs-comment">/**    selectAsync     */</span></span> selectAll&lt;T&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items: T[], properties: (</span></span></span><span class="hljs-function">) =&gt;</span></span> any[]): T[];</code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุชุทุจูู ูุฐู ุงููุธุงุฆู ูุทูุจ ุงูุจูุงูุงุช ุงููุถููุฉ ุงููุงุฒูุฉ ุจููุงููุฉ ูุงุญุฏุฉ ุฅูู ุงูุฎุงุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowNodes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">parentPoint: IParent</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">&gt; </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       IParent -    selectAsync ( // Promise,  ). let Parent = await selectAsync(parentPoint, parent =&gt; [ //           selectAll(parent.Nodes, nodes =&gt; [node.Name, node.DisplayName]) // [node.Name, node.DisplayName] -        ]); //      Parent.Nodes ... }</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ูุซุงู ุนูู ุงุณุชุนูุงู ุฃูุซุฑ ุชุนููุฏูุง ุจูููู ูู ุงููุนูููุงุช ุงููุถููุฉ ุจุนูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     parent.Nodes  selectAsyncAll,    let Parent = await selectAsyncAll(parent.Nodes, nodes =&gt; [ //    : select(node, node =&gt; [ node.Name, node.DisplayName, selectAll(node.Links, link =&gt; [ link.Guid, link.DisplayName, select(link.TargetNode, targetNode =&gt; [targetNode.Guid]) ]), select(node.Info, info =&gt; [info.Component]) //    IInfo    IComponent,   ,   ,        ]) ]);</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุชุณุงุนุฏ ูุบุฉ ุงูุงุณุชุนูุงู ูู ุชุฌูุจ ุงูุทูุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ ุฅูู ุงูุฎุงุฏู.  ููู ุงูุฑูุฒ ููุณ ูุซุงูููุง ุนูู ุงูุฅุทูุงู ุ ูุณูุญุชูู ุจุงูุชุฃููุฏ ุนูู ุงูุนุฏูุฏ ูู ุงูุทูุจุงุช ุงูุชูุงูุณูุฉ ููุชูุฌุฉ ูุฐูู ุ ุดุฑุท ุงูุณุจุงู. </p><br><h2 id="race-condition-i-puti-resheniya" style=";text-align:right;direction:rtl">  ุญุงูุฉ ุงูุณุจุงู ูุงูุญููู </h2><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ููุงุดุชุฑุงู ูู ุฃุญุฏุงุซ ุงูุฎุงุฏู ููุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุน ุนุฏุฏ ูุจูุฑ ูู ุงูุทูุจุงุช ุบูุฑ ุงููุชุฒุงููุฉ ุ ูุฏ ุชุญุฏุซ ุญุงูุฉ ุณุจุงู ุนูุฏ <code>FuncOne</code> ูุธููุฉ <code>FuncOne</code> <code>async</code> ุ ูู ุงูุชุธุงุฑ <code>Promise</code> .  ูู ูุฐุง ุงูููุช ุ ูุฏ ูุฃุชู ุญุฏุซ ุฎุงุฏู (ุฃู ูู ุฅุฌุฑุงุก ุงููุณุชุฎุฏู ุงูุชุงูู) ุ ูุจุนุฏ ุชูููุฐู ุจุทุฑููุฉ ุชูุงูุณูุฉ ุ ูู ุจุชุบููุฑ ุงููููุฐุฌ ุนูู ุงูุนููู.  ุซู <code>FuncOne</code> ุจุนุฏ ุญู ุงููุนุฏ ุ ูููู ุฃู ูุชุญูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู ุงูููุงุฑุฏ ุงููุญุฐููุฉ ุจุงููุนู. </p><br><p style=";text-align:right;direction:rtl">  ุชุฎูู ูุซู ูุฐุง ุงููููู ุงููุจุณุท: <code>IParent</code> ูุงุฆู <code>IParent</code> ุนูู <code>IParent</code> ุฎุงุฏู <code>IParent</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> Parent.OnSynchronize.AddListener(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">&gt; </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  .   ,  . });</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฏุนุงุคู ุนูุฏ ุชุญุฏูุซ ูุงุฆูุฉ ุงูุนูุฏ <code>INodes</code> ุนูู ุงูุฎุงุฏู.  ุจุนุฏ ุฐูู ุ ูู ุงูุณููุงุฑูู ุงูุชุงูู ุ ุชููู ุญุงูุฉ ุงูุณุจุงู ููููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชุณุจุจ ูู ุงูุฅุฒุงูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ููุนูุฏุฉ ูู ุงูุนููู ุ ูู ุงูุชุธุงุฑ ุงูุงูุชูุงุก ูุญุฐู ูุงุฆู ุงูุนููู <br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnClickRemoveNode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node: INode</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> removedOnServer: boolean = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Parent.RemoveNode(node); <span class="hljs-comment"><span class="hljs-comment">//     if (removedOnServer) .... }</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  ูู ุฎูุงู <code>Parent.OnSynchronize</code> ุ ูุญุฏุซ ุชุญุฏูุซ ุญุฏุซ ูุงุฆูุฉ ุงูุนูุฏุฉ. </li><li style=";text-align:right;direction:rtl">  <code>Parent.OnSynchronize</code> ูุนุงูุฌุฉ <code>Parent.OnSynchronize</code> ูุญุฐู ูุงุฆู ุงูุนููู. </li><li style=";text-align:right;direction:rtl">  ูุณุชูุฑ ุชูููุฐ <code>async OnClickRemoveNode()</code> ุจุนุฏ <code>await</code> ุงูุฃูู ููุชู ุฅุฌุฑุงุก ูุญุงููุฉ ูุญุฐู ูุงุฆู ุนููู ูุญุฐูู ุจุงููุนู. </li></ol><br><p style=";text-align:right;direction:rtl">  ููููู ุฅุฌุฑุงุก ุงูุชุญูู ูู ูุฌูุฏ ูุงุฆู ุนููู ูู <code>OnClickRemoveNode</code> .  ูุฐุง ูุซุงู ูุจุณุท ูููู ุฅุฌุฑุงุก ูุญุต ููุงุซู ุฃูุฑ ุทุจูุนู.  ูููู ูุงุฐุง ูู ูุงูุช ุณูุณูุฉ ุงูุงุชุตุงู ุฃูุซุฑ ุชุนููุฏูุงุ  ูุฐูู ุ ูุนุฏ ุงุณุชุฎุฏุงู ุฃุณููุจ ูุดุงุจู ุจุนุฏ ูู <code>await</code> ููุงุฑุณุฉ ุณูุฆุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฑูุฒ ุญุชู ุงููุชุถุฎูุฉ ูุนูุฏุฉ ูุฏุนู ูุชูุณูุน ูุทุงู. </li><li style=";text-align:right;direction:rtl">  ูุง ุชุนูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงูุดูู <code>OnClickRemoveNode</code> ุงูุญุฐู ูู <code>OnClickRemoveNode</code> ุ ููุญุฏุซ ุงูุญุฐู ุงููุนูู ููุงุฆู ุงูุนููู ูู ููุงู ุขุฎุฑ.  ูุฌุจ ุฃูุง ูููู ููุงู ุงูุชูุงู ููุชุณูุณู ุงููุญุฏุฏ ูู ูุจู ุงููุทูุฑ ุ ูุฅูุง ููู ูููู ููุงู ุฃุฎุทุงุก ุงูุงูุญุฏุงุฑ. </li><li style=";text-align:right;direction:rtl">  ูุฐุง ูุง ูููู ุงูุงุนุชูุงุฏ ุนููู ุจุฏุฑุฌุฉ ูุงููุฉ: ุฅุฐุง ูุณูุช ุฅุฌุฑุงุก ูุญุต ูู ููุงู ูุง ุ ูุณูุญุฏุซ ุฎุทุฃ.  ูููู ุงูุฎุทุฑ ุฃููุงู ูู ุฃู ุงููุญุต ุงูููุณูุฉ ูุฏ ูุง ูุคุฏู ุฅูู ุญุฏูุซ ุฎุทุฃ ูุญูููุง ููู ุจูุฆุฉ ุงุฎุชุจุงุฑ ุ ูุณูุญุฏุซ ุฐูู ูููุณุชุฎุฏููู ุงูุฐูู ูุฏููู ุชุฃุฎูุฑ ุฃุทูู ูู ุงูุดุจูุฉ. </li><li style=";text-align:right;direction:rtl">  ูุฅุฐุง ูุงู ูููู ุชุฏููุฑ ูุญุฏุฉ ุชุญูู ุงูุชู ุชูุชูู ุฅูู ูุคูุงุก ุงููุนุงูุฌุงุชุ  ุจุนุฏ ูู <code>await</code> ููุชุญูู ูู ุชุฏููุฑูุงุ </li></ul><br><p style=";text-align:right;direction:rtl">  ูุทุฑุญ ุณุคุงู ุขุฎุฑ: ูุงุฐุง ูู ูุงู ููุงู ุงููุซูุฑ ูู ุงูุฃุณุงููุจ ุงูุชูุงูุณูุฉ ุงูููุงุซูุฉุ  ุชุฎูู ุฃู ููุงู ุงููุฒูุฏ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ุนูุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุชุญุฏูุซ ุงูุนูุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ / ุฅุฒุงูุฉ ุงูุฑูุงุจุท </li><li style=";text-align:right;direction:rtl">  ุทุฑููุฉ ุชุญููู ุงูุนูุฏุฉ ุงููุชุนุฏุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุณููู ุงููุนูุฏ ููุชุทุจูู: ูููู ุจุชุบููุฑ ุญุงูุฉ ุนูุฏุฉ ูุงุญุฏุฉ ููุจุฏุฃ ุงูุฎุงุฏู ูู ุชุญุฏูุซ ุงูุนูุฏ ุงูุชู ุชุนุชูุฏ ุนูููุง. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุทููุจ ุชูููุฐ ูุนูุงุฑู ุ ูุงูุฐู ููุบู ูู ุญูุซ ุงููุจุฏุฃ ุฅููุงููุฉ ุญุฏูุซ ุฃุฎุทุงุก ุจุณุจุจ ุญุงูุฉ ุงูุณุจุงู ุ ูุฅุฌุฑุงุกุงุช ุงููุณุชุฎุฏู ุงููุชูุงุฒูุฉ ุ ุฅูุฎ.  ูุชูุซู ุงูุญู ุงูุตุญูุญ ูููุถุงุก ุนูู ุงูุชุบููุฑ ุงููุชุฒุงูู ูููููุฐุฌ ูู ุงูุนููู ุฃู ุงูุฎุงุฏู ูู ุชูููุฐ ูุณู ููู ูุน ูุงุฆูุฉ ุงูุชุธุงุฑ ููุงููุฉ.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณุชููู ุฃุฏูุงุช ุชุฒููู ุงูุญุฑูู</a> ูููุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ููุถุน ุนูุงูุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุถูุญูุฉ ุนูู</a> ูุธุงุฆู ุงูุชุญูู ุบูุฑ ุงููุชุฒุงูู ุงูุชูุงูุณูุฉ ูุฐู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ููุฌุฒ ุงููุชุทูุจุงุช ูุงูููุฒุงุช ุงูุฑุฆูุณูุฉ ููุซู ูุฐู ุงูุฏูููุฑุงุช:</strong> </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุงูุฏุงุฎู ุ ูุฌุจ ุชูููุฐ ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูููุงููุงุช ุฅูู ูุธุงุฆู ุบูุฑ ูุชุฒุงููุฉ.  ุงุนุชูุงุฏูุง ุนูู ููุน ุงูุฏูููุฑ ุ ูุฏ ูุชู ุงุณุชุฏุนุงุก ุฃู ุฑูุถ ููุงููุฉ ุงููุธุงุฆู ุฅุฐุง ูุงูุช ููุงู ููุงููุงุช ุฃุฎุฑู ูููุง. </li><li style=";text-align:right;direction:rtl">  ุณุชุชุทูุจ ุงูุฏุงูุงุช ุงููุญุฏุฏุฉ ุณูุงู ุชูููุฐ ูุฑุจุท ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.  ูุฌุจ ุนููู ุฅูุง ุฅูุดุงุก ูุงุฆูุฉ ุงูุชุธุงุฑ ุจุดูู ุตุฑูุญ ุ ุฃู ุงูููุงู ุจุฐูู ุชููุงุฆููุง ุจูุงุกู ุนูู ุทุฑููุฉ ุงูุนุฑุถ ุงูุชู ุชูุชูู ุฅูููุง ูุญุฏุฉ ุงูุชุญูู. </li><li style=";text-align:right;direction:rtl">  ุงููุนูููุงุช ูุทููุจุฉ ุนู ุฅุชูุงู ูุซูู ูุญุฏุฉ ุงูุชุญูู (ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฎุงุตูุฉ <code>IsDestroyed</code> ).  ูููุน ุงูุฏูููุฑ ูู ุฅุฌุฑุงุก ููุงููุงุช ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุนุฏ ุฅุชูุงู ูุญุฏุฉ ุงูุชุญูู. </li><li style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ููุญุฏุฉ ุงูุชุญูู ูู ุงูุนุฑุถ ุ ูุถูู ูุธููุฉ ุชุทุจูู ููุงุน ุดูุงู ูุงุณุชุจุนุงุฏ ุงูุฅุฌุฑุงุกุงุช ูู ููุช ุชูููุฐ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุชุดูุฑ ุจุตุฑููุง ุฅูู ุฃู ุงูุนูููุฉ ููุฏ ุงูุชูุฏู. </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชูุชูู ุฌููุน <code>Promise.done()</code> ุจุงุณุชุฏุนุงุก <code>Promise.done()</code> .  ูู ูุฐู ุงูุทุฑููุฉ ุ ุชุญุชุงุฌ ุฅูู ุชุทุจูู ูุนุงูุฌ ุงูุงุณุชุซูุงุกุงุช ุบูุฑ ุงููุนุงูุฌุฉ.  ุดูุก ูููุฏ ููุบุงูุฉ: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ูุชู ุงูุชุนุฑู ุนูู ุงูุงุณุชุซูุงุกุงุช ุงูุชู ุญุฏุซุช ูู <code>Promise</code> ุจูุงุณุทุฉ ูุนุงูุฌ ุงูุฃุฎุทุงุก ุงูููุงุณู (ูุงูุฐู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุนุฑุถ ูุงูุฐุฉ ูุน ูุต ูุชุชุจุน stak) ุ ูุฐูู ูุฏ ูุง ุชูุงุญุธูุง (ุฅุฐุง ููุช ูุง ุชุฑุงูุจ ูุญุฏุฉ ุงูุชุญูู ุทูุงู ุงูููุช ุฃุซูุงุก ุงูุชุทููุฑ).  ููู ูุฑุงูุง ุงููุณุชุฎุฏู ุนูู ุงูุฅุทูุงู - ููุฐุง ุณูุฌุนู ุงูุฏุนู ุตุนุจูุง.  ููุงุญุธุฉ: ูู ุงููููู ุงูุงุดุชุฑุงู ููุชุนุงูู ูุน <code>unhandledrejection</code> ุ ูููู ูุง ูุฒุงู ูุฏุนูู Chrome ู Edge ููุท: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'unhandledrejection'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// handling... });</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃููุง ูุญุชูู ุจุฃุนูู ูุธููุฉ ูุนุงูุฌ ุญุฏุซ ุบูุฑ <code>async</code> ูุฏูููุฑ ุ ูุฅููุง ูุญุตู ุนูู ุฎุทุฃ ุชุชุจุน ุงูููุฏุณ ุจุงููุงูู. </li></ul></li></ol><br><p style=";text-align:right;direction:rtl">  ุงูุขู ููุฏู ูุงุฆูุฉ ุชูุฑูุจูุฉ ููุซู ูุฐู ุงูุฏูููุฑุงุช ูุน ูุตู ุซู ููุถุญ ููู ูููู ุชุทุจูููุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * : * 1.      * 2.      ,   . * *  ,  :   ,         */</span></span> @Lock <span class="hljs-comment"><span class="hljs-comment">/** * : *     ,     . * *  ,     :   ,   . */</span></span> @LockQueue <span class="hljs-comment"><span class="hljs-comment">/** *  LockQueue .  -         * *   ,       . ,   . */</span></span> @LockBetween <span class="hljs-comment"><span class="hljs-comment">/** * : *       ,   . *     . :     ,     300 .       . */</span></span> @LockDeferred(<span class="hljs-number"><span class="hljs-number">300</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ,    ,     : interface ILockTarget { /** * ,   View,   .   ,        ,     ,        */ GetControllerView?(): IView; /**  true     */ IsDestroyed: boolean; }</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุฃูุตุงู ูุฌุฑุฏุฉ ุชูุงููุง ุ ูููู ุจูุฌุฑุฏ ุฑุคูุฉ ูุซุงู ููุงุณุชุฎุฏุงู ูุน ุงูุชูุณูุฑุงุช ุ ูุตุจุญ ูู ุดูุก ุฃูุซุฑ ูุถูุญูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GraphController</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ILockTarget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** ,      .      */</span></span> private View: IView; public GetControllerView(): IView { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.View; } <span class="hljs-comment"><span class="hljs-comment">/**      . */</span></span> @Lock private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnClickRemoveNode(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**     . */</span></span> @Lock private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnClickRemoveLink(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> @Lock private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnClickAddNewNode(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**    " " */</span></span> @LockQueue private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnServerUpdateNode(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**    " " */</span></span> @LockQueue private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnServerAddLink(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**    " " */</span></span> @LockQueue private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnServerAddNode(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**    -   */</span></span> @LockQueue private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnServerRemoveNode(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**    -       */</span></span> @LockBetween private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnServerSynchronize(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**    -    (/warning/error/...) */</span></span> @LockQueue private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnServerUpdateNodeStatus(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } <span class="hljs-comment"><span class="hljs-comment">/**       */</span></span> @LockDeferred(<span class="hljs-number"><span class="hljs-number">300</span></span>) private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnSearchFieldChange(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { ... } }</code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุณูููู ุจุชุญููู ุงุซููู ูู ุงูุณููุงุฑูููุงุช ุงููููุฐุฌูุฉ ููุฃุฎุทุงุก ุงููุญุชููุฉ ูุงููุถุงุก ุนูููุง ูู ูุจู ุงูุฏูููุฑ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงููุณุชุฎุฏู ุฅุฌุฑุงุกู: <code>OnClickRemoveNode</code> ู <code>OnClickRemoveLink</code> .  ูู ุฃุฌู ุงููุนุงูุฌุฉ ุงูููุงุณุจุฉ ุ ูู ุงูุถุฑูุฑู ุนุฏู ูุฌูุฏ ูุนุงูุฌุงุช ุชูููุฐ ุฃุฎุฑู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ (ุฅูุง ุนููู ุฃู ุฎุงุฏู).  ุฎูุงู ุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุซู ูุฐุง ุงูุฎุทุฃ ูููู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ูุฒุงู ูุชู ุชุญุฏูุซ ุงููููุฐุฌ ุนูู ุงูุนููู ุฅูู ุญุงูุฉ ุงูุฎุงุฏู ุงูุญุงููุฉ </li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ูู ุญุฐู ุงููุงุฆู ูุจู ุงูุชูุงู ุงูุชุญุฏูุซ (ููุงู ูุนุงูุฌ <code>OnServerSynchronize</code> ููุฏ <code>OnServerSynchronize</code> ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ).  ูููู ูุฐุง ุงููุงุฆู ูู ูุนุฏ ููุฌูุฏูุง ุจุงููุนู - ูู ุชูุชูู ุงููุฒุงููุฉ ุงููุงููุฉ ุจุนุฏ ููุง ูุฒุงู ูุนุฑูุถูุง ุนูู ุงูุนููู. <br>  ูุฐูู ุ ูุฌุจ ุฃู ุชุฑูุถ ุฃุฏุงุฉ ุชุฒููู <code>Lock</code> ุฌููุน ุงูุฅุฌุฑุงุกุงุช ุงูุชู ุจุฏุฃูุง ุงููุณุชุฎุฏู ุฅุฐุง ูุงู ููุงู ูุนุงูุฌุงุช ุฃุฎุฑู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุน ููุณ ุณูุงู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.  ุจุงููุธุฑ ุฅูู ุฃู ุงูุฎุงุฏู ุบูุฑ ูุชุฒุงูู ุ ููุฐุง ููู ุจุดูู ุฎุงุต.  ูุนู ุ ูุฑุณู Websocket ุงูุทูุจุงุช ุจุดูู ูุชุณูุณู ุ ูููู ุฅุฐุง ูุณุฑ ุงูุนููู ุงูุชุณูุณู ุ ูุณูู ูุญุตู ุนูู ุฎุทุฃ ุนูู ุงูุฎุงุฏู. </li></ul></li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ูู ุฅุถุงูุฉ ุนูุฏุฉ: <code>OnClickAddNewNode</code> .  ุฃุญุฏุงุซ <code>OnServerAddNode</code> ุ ุชุฃุชู <code>OnServerAddNode</code> ูู ุงูุฎุงุฏู. <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชููู <code>OnClickAddNewNode</code> ูุงุฆูุฉ ุงูุงูุชุธุงุฑ (ุฅุฐุง ูุงู ููุงู ุดูุก ูุง ุ ูุฅู ุฃุฏุงุฉ <code>Lock</code> ูุฐู ุงูุทุฑููุฉ ุชุฑูุถ ุงูุฏุนูุฉ) </li><li style=";text-align:right;direction:rtl">  <code>OnServerAddNode</code> ุ <code>OnServerAddNode</code> ุ <code>OnServerAddNode</code> ุชูููุฐู ุจุงูุชุณูุณู ุจุนุฏ <code>OnClickAddNewNode</code> ุ ูููุณ ุงูุชูุงูุณ ูุนู. </li></ul></li><li style=";text-align:right;direction:rtl">  ุชุญุชูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุนูู <code>OnServerUpdateNode</code> .  ุงูุชุฑุถ ุฃูู ุฃุซูุงุก ุชูููุฐ ุงูุฃูู ุ ูููู ุงููุณุชุฎุฏู ุจุฅุบูุงู <code>GraphController</code> .  ุซู ูุฌุจ ุนุฏู ุฅุฌุฑุงุก ุงูููุงููุฉ ุงูุซุงููุฉ ุฅูู <code>OnServerUpdateNode</code> ุชููุงุฆููุง ุญุชู ูุง ุชุชุฎุฐ ุฅุฌุฑุงุก ุนูู ูุญุฏุฉ ุงูุชุญูู ุงููุฏูุฑุฉ ุ ูุงูุชู ูุถูู ุฃู ุชุคุฏู ุฅูู ุญุฏูุซ ุฎุทุฃ.  ููุฐุง ุ <code>ILockTarget</code> ูุงุฌูุฉ <code>ILockTarget</code> ุนูู <code>IsDestroyed</code> - ูุชุญูู <code>IsDestroyed</code> ูู ุงูุนูู ุฏูู ุชูููุฐ ุงููุนุงูุฌ ุงูุชุงูู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br>  ุงูุฑุจุญ: ูุง ุญุงุฌุฉ ูููุชุงุจุฉ <code>if (!this.IsDestroyed())</code> ุจุนุฏ ูู <code>await</code> . </li><li style=";text-align:right;direction:rtl">  ุชุจุฏุฃ ุงูุชุบููุฑุงุช ูู ุงูุนูุฏ ุงููุชุนุฏุฏุฉ.  ุฃุญุฏุงุซ <code>OnServerUpdateNode</code> ุ ุชุฃุชู <code>OnServerUpdateNode</code> ูู ุงูุฎุงุฏู.  ุณูุคุฏู ุชูููุฐูุง ุงูุชูุงูุณู ุฅูู ุฃุฎุทุงุก ุบูุฑ ูุงุจูุฉ ููุฅูุชุงุฌ.  ููู ููุฐ ุฐูู ุงูุญูู  <code>LockQueue</code> ุชู ุชูููุฒูุง ุจูุงุณุทุฉ <code>LockQueue</code> <code>LockBetween</code> ู <code>LockBetween</code> ุ ูุณูุชู ุชูููุฐูุง ุจุงูุชุชุงุจุน. </li><li style=";text-align:right;direction:rtl">  ุชุฎูู ุฃู ุงูุนูุฏ ูุฏ ุชุญุชูู ุนูู ุฑุณููุงุช ุจูุงููุฉ ููุนูุฏุฉ ูุชุฏุงุฎูุฉ ุจุฏุงุฎููุง.  <code>GraphController #1</code> ,       โ   <code>GraphController #2</code> . , <code>GraphController</code> -    ,   (  โ         ), ..     .  : <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  </li><li style=";text-align:right;direction:rtl">    </li><li style=";text-align:right;direction:rtl">    <code>GraphController #2</code> ,     ,    . </li></ul></li><li style=";text-align:right;direction:rtl"> <code>OnSearchFieldChange</code>   ,       .         -  .  <code>@LockDeferred(300)</code>     300 :         ,     ,    300 .  ,       .  : <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   ,   500 ,         .     โ        <code>OnSearchFieldChange</code> ,     . </li><li style=";text-align:right;direction:rtl">      <code>OnSearchFieldChange</code>    โ        ,   . </li></ul></li></ol><br><h2 id="chto-nuzhno-znat-pri-ispolzovanii-dekoratorov" style=";text-align:right;direction:rtl">       </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Deadlock:     <code>Handler1</code> ,    ,   <code>await</code>   <code>Handler2</code> ,  <code>LockQueue</code> ,    <code>Handler2</code> โ <code>Handler1</code>    . </li><li style=";text-align:right;direction:rtl">  ,     View      . :            ,      โ                . </li></ol><br><h2 id="profilirovanie-zaprosov-k-serveru" style=";text-align:right;direction:rtl">     </h2><br><p style=";text-align:right;direction:rtl">    ,     ,        .  : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">       - <code>&lt;Class&gt;</code> . <code>&lt;Method&gt;</code> =&gt; <code>&lt;Time&gt;</code> (  ). </li><li style=";text-align:right;direction:rtl">       . </li><li style=";text-align:right;direction:rtl">        . </li></ul><br><h2 id="desert" style=";text-align:right;direction:rtl">  </h2><br><p style=";text-align:right;direction:rtl"> ,    ,           ,    .        ?         ?  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GraphController</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ILockTarget</span></span></span><span class="hljs-class"> </span></span>{ private View: IView; public GetControllerView(): IView { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.View; } <span class="hljs-comment"><span class="hljs-comment">/**     . */</span></span> @Lock private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> RunBigDataCalculations(): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Start(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> UpdateSmth(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> End(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> CleanUp(); } <span class="hljs-comment"><span class="hljs-comment">/**   . */</span></span> @LockQueue private <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> OnChangeNodeState(node: INode): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GetNodeData(node); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> UpdateNode(node); } }</code> </pre><br><p style=";text-align:right;direction:rtl">   : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>RunBigDataCalculations</code> . </li><li style=";text-align:right;direction:rtl">  <code>await Start();</code> </li><li style=";text-align:right;direction:rtl">   /  (  ) </li><li style=";text-align:right;direction:rtl">   <code>await Start();</code> ,   <code>await UpdateSmth();</code>      . </li></ol><br><p style=";text-align:right;direction:rtl"> : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>RunBigDataCalculations</code> . </li><li style=";text-align:right;direction:rtl">    <code>OnChangeNodeState</code> ,          (..  ). </li><li style=";text-align:right;direction:rtl">   <code>await GetNodeData(node);</code> </li><li style=";text-align:right;direction:rtl">   /  (  ) </li><li style=";text-align:right;direction:rtl">   <code>await GetNodeData(node);</code> ,   <code>await UpdateNode(node);</code>      . </li></ol><br><p style=";text-align:right;direction:rtl">      - .  : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *       ,      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface IQueuedDisposableLockTarget extends ILockTarget { <span class="hljs-comment"><span class="hljs-comment">/**     . Lock          IsDisposing() === true */</span></span> IsDisposing(): boolean; SetDisposing(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>; }</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">        : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QueuedDispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">controller: IQueuedDisposableLockTarget</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      let xQueue = GetQueue(controller); // 1. ,     -,   -   if (xQueue.Empty) { controller.Dispose(); return; } // 2.  ,     " ",     ,   . controller.SetDisposing(); // 3.   finally   xQueue.finally(() =&gt; { debug.assert(!IsDisposed(controller), "-      ,  "); controller.Dispose(); }); }</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ,          .    <code>QueuedDispose</code>     : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">         .       . </li><li style=";text-align:right;direction:rtl">   <code>QueuedDispose</code>     <code>controller</code> .         โ  ExtJS     . </li></ul><br><p style=";text-align:right;direction:rtl"> <strong></strong> </p><br><p style=";text-align:right;direction:rtl">  ,          , ..         . ,      ?    ,  . </p><br><p style=";text-align:right;direction:rtl">    ,      : </p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    vk.com</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    Telegram</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar464773/">https://habr.com/ru/post/ar464773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar464759/index.html">ุงูุนุดุฑุงุช ูู ุงููุชุจ ุงูุณุฑูุนุฉ ุงูุชู ุณูุญุชุงุฌูุง ูุฏูุฑ ุงููุดุฑูุน ูู ุนุงู 2020</a></li>
<li><a href="../ar464761/index.html">ูุฒุงุฑุฉ ุงูุฏูุงุน ุงูุตุบูุฑุฉ ุชุชุญูู ุชุณูุง ุฅูู ูุญุทุฉ ูุฑุงูุจุฉ ุงูููุฏูู</a></li>
<li><a href="../ar464763/index.html">ูุนุงููุฑ ููุฎูุงุฏู ุนูู ูุธุงู Linux: ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุงูุฃุฏูุงุช ุงูููุชูุญุฉ</a></li>
<li><a href="../ar464765/index.html">ุชูููู FreePBX + GoIP</a></li>
<li><a href="../ar464769/index.html">ููู ุฌุนู Badoo ูู ุงููููู ุฅุนุทุงุก 200K ุตูุฑุฉ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ</a></li>
<li><a href="../ar464775/index.html">September 21st Badoo PHP Meetup # 3: Performance</a></li>
<li><a href="../ar464777/index.html">ููุงุฐุง ูุง ุชุณุฑุน const ุฑูุฒ C / C ++ุ</a></li>
<li><a href="../ar464779/index.html">ุญูู ูุญู ุงููุชุนุฉ ุ ูุงูุทุฑููุฉ ุงูุชู ุชุฌุนู ุงููุงุณ ูุนูููู ุจูุง ูุทุงุฆุฑุงุช ุจุฏูู ุทูุงุฑ</a></li>
<li><a href="../ar464781/index.html">ุฃุฌูุฒุฉ ุงูุชููุงุฒ ุงูุฐููุฉ: CRT to HDR</a></li>
<li><a href="../ar464785/index.html">ููุงุฆุฏ ุงูุฎุท ุงููุจุงุดุฑ ุบูุฑ ุงูุชูุงูุณูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>