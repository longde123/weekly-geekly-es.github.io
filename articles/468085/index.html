<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíª ü§Ω üö† El libro "Safe DevOps. Operaci√≥n eficiente del sistema üèòÔ∏è üëáüèª üë®üèΩ‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola habrozhiteli! Una aplicaci√≥n que se ejecuta en la nube tiene muchas ventajas, pero al mismo tiempo est√° sujeta a amenazas especiales. La tarea de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El libro "Safe DevOps. Operaci√≥n eficiente del sistema</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/468085/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ve/lp/sc/velpscrkxhyi-ycjwxfywsc4hhw.jpeg" align="left" alt="imagen"></a>  Hola habrozhiteli!  Una aplicaci√≥n que se ejecuta en la nube tiene muchas ventajas, pero al mismo tiempo est√° sujeta a amenazas especiales.  La tarea de los equipos de DevOps es evaluar estos riesgos y fortalecer la protecci√≥n del sistema contra ellos.  El libro se basa en la experiencia √∫nica del autor y ofrece las soluciones estrat√©gicas m√°s importantes para proteger las aplicaciones web de los ataques y evitar los intentos de invasi√≥n.  Ver√° c√≥mo garantizar la confiabilidad con pruebas automatizadas, entrega continua y procesos clave de DevOps.  Aprenda a identificar, evaluar y corregir las vulnerabilidades que existen en su aplicaci√≥n.  El autor lo ayudar√° a navegar en configuraciones en la nube, as√≠ como a aplicar herramientas de automatizaci√≥n populares.  Requiere conocimiento de Linux y conocimiento de pr√°cticas est√°ndar de DevOps como CI, CD y pruebas de unidad. <br><a name="habracut"></a><br><br><h3>  Extracto  Cap√≠tulo 8. An√°lisis de registro para la detecci√≥n de intrusos y ataques </h3><br>  En este capitulo: <br><br><ul><li>  Exploraci√≥n de componentes de nivel de an√°lisis en una tuber√≠a de registro. </li><li>  Detecta intrusiones y ataques utilizando firmas de cadena, estad√≠sticas y datos hist√≥ricos. </li><li>  Manejar formas de notificar de manera √≥ptima a los usuarios. </li></ul><br>  En el Cap√≠tulo 7, aprendi√≥ a crear una tuber√≠a de registro que recopila, transfiere, analiza y almacena registros de toda la infraestructura, y tambi√©n proporciona acceso a ellos.  Una tuber√≠a de varios niveles crea una infraestructura flexible en la que se utilizan registros de varias fuentes para monitorear la actividad de los servicios de la organizaci√≥n.  El Cap√≠tulo 7 proporciona una visi√≥n general de la funcionalidad proporcionada por todos los niveles de la tuber√≠a.  En este cap√≠tulo, nos centraremos en el tercer nivel, el nivel de an√°lisis, y profundizaremos en las t√©cnicas y ejemplos de c√≥digo relacionados con la detecci√≥n de intrusiones y ataques a los servicios. <br><br>  La canalizaci√≥n de registro utilizada por Mozilla al escribir el libro es similar a la que se muestra en el cap√≠tulo 7. La canalizaci√≥n se utiliza para monitorear el estado de los clientes de Firefox (llamado <i>telemetr√≠a</i> ) en un entorno natural, procesar registros de aplicaciones y servicios, y detectar actividad inusual.  El centro l√≥gico de la tuber√≠a est√° en el nivel de an√°lisis, compuesto por muchos programas peque√±os que constantemente buscan algo inusual.  Estos peque√±os programas no son tan avanzados como para manejar la entrada y salida de eventos de registro, por lo que transfieren esta tarea a un centro de datos dedicado: el programa Hindsight (http://mng.bz/m4gg), dise√±ado para realizar el trabajo de analizar complementos en flujos de datos . <br><br>  En este cap√≠tulo, utilizaremos Hindsight para leer varios tipos de revistas y escribir complementos originales para analizarlos. <br><br><blockquote><h4>  NOTA </h4>  Los ejemplos de registros y complementos para este cap√≠tulo se encuentran en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">securing-devops.com/ch08/logging-pipeline</a> .  Debe copiar este repositorio en su m√°quina local y obtener el contenedor Hindsight Docker para ejecutar los ejemplos. </blockquote><br>  Comencemos describiendo c√≥mo se organizan las diversas partes del nivel de an√°lisis: la retrospectiva se encuentra en el medio y los niveles de recolecci√≥n y almacenamiento est√°n en ambos lados.  Luego hablaremos de tres enfoques diferentes para detectar intrusiones y ataques.  Para el m√°s simple de ellos, se utilizan firmas de cadena que contienen informaci√≥n sobre ataques conocidos para enviar notificaciones.  A continuaci√≥n, comparamos los modelos estad√≠sticos y el enfoque con las firmas, y tambi√©n aprendemos c√≥mo estos dos enfoques se complementan entre s√≠.  Finalmente, echemos un vistazo a las formas de aplicar los datos hist√≥ricos de actividad del usuario para identificar √°reas sospechosas entre las conexiones. <br><br>  La √∫ltima secci√≥n del cap√≠tulo trata sobre el env√≠o de notificaciones.  Es poco probable que desee recibir miles de notificaciones del nivel de an√°lisis todos los d√≠as, lo que generar√° mucho ruido, en lugar de ser √∫til.  Si esto no se cambia, los destinatarios considerar√°n las notificaciones como spam y las ignorar√°n.  En la secci√≥n final de este cap√≠tulo, consideraremos las mejores pr√°cticas para organizar el env√≠o de notificaciones, y discutiremos formas de enviar notificaciones de manera precisa y eficiente a los administradores y usuarios finales. <br><br><h4>  8.2.  Detectar ataques usando firmas de cadena </h4><br>  Cuando trabajas con registros, trabajas con cadenas.  Y esto significa que la forma m√°s f√°cil de identificar signos de fraude es comparar los registros con una lista de l√≠neas maliciosas conocidas.  Puede parecer simple, pero fue precisamente en estos a√±os que se involucr√≥ la industria de la seguridad.  Los cortafuegos de aplicaciones web (WAF), tan populares a mediados de la d√©cada de 2000, eran esencialmente un repositorio de expresiones regulares, que se verificaban contra cada solicitud enviada a una aplicaci√≥n web. <br><br><blockquote><p></p><h4>  No conf√≠es en expresiones regulares </h4>  Una vez trabaj√© para un banco en el que este tipo de protecci√≥n se usaba ampliamente.  El equipo de seguridad fue responsable de apoyar a WAF, que protegi√≥ una variedad de servicios en l√≠nea, incluido un servicio comercial para clientes.  Cada solicitud web enviada a este servicio pas√≥ por cientos de expresiones regulares antes de llegar al servidor de aplicaciones.  Una vez que un desarrollador de un equipo de servicio de comercio en l√≠nea decidi√≥ echar un vistazo a estas expresiones regulares.  No s√© qu√© llev√≥ al ingeniero a comenzar a leer el contenido del archivo, que est√° principalmente lleno de barras, s√≠mbolos de d√≥lar, asteriscos, m√°s, cuadrados y par√©ntesis, pero lo tom√≥.  Y en alg√∫n lugar de la l√≠nea 418 en una expresi√≥n regular compleja, encontr√≥ una combinaci√≥n sospechosa de ". +".  Dos personajes inocentes que permitieron que absolutamente todo continuara sin dolor: esta expresi√≥n regular es similar al valor "permitir todo". <br><br>  Nuestro orgullo es el cortafuegos de la aplicaci√≥n web por varios miles de euros, respaldado por un equipo completo, realiz√≥ cientos de comprobaciones de expresiones regulares, afectando el rendimiento y complicando el dise√±o de un sistema ya complejo, y todo para omitir todo sin obst√°culos.  Por supuesto, pronto solucionamos el problema, pero mi creencia en el uso de expresiones regulares para garantizar la seguridad no ha aumentado desde entonces.  Si desea implementar este tipo de sistema de protecci√≥n en su organizaci√≥n, tenga en cuenta su complejidad para que esto no le suceda. </blockquote><br>  Cuando se usan correctamente, las expresiones regulares pueden convertirse en una herramienta poderosa, pero son incre√≠blemente dif√≠ciles de escribir, mantener con el tiempo, a√∫n m√°s dif√≠cil, y su implementaci√≥n a gran escala es costosa.  Mire la expresi√≥n regular ((\% 3C) | &lt;) ((\% 2F) | \ /) * [a-z0-9 \%] + ((\% 3E) |&gt;).  No adivinar√° para qu√© se utiliza, as√≠ que le dir√©: con √©l, puede buscar inyecciones en cadenas de solicitud HTTP, revelando la presencia de caracteres de desigualdad de apertura y cierre &lt;&gt; y su contenido.  Recibir√° este tipo de l√≠nea de solicitud HTTP de un atacante que intente inyectar c√≥digo JavaScript malicioso en su aplicaci√≥n para terminar con un ataque de secuencias de comandos entre sitios, que discutimos en el Cap√≠tulo 3. <br><br>  Esta expresi√≥n regular se puede usar para identificar solicitudes sospechosas que contienen intentos de inyecci√≥n.  El Listado 8.7 muestra un analizador de ejemplo que implementa esto al verificar las coincidencias de expresiones regulares en cada uno de los registros de acceso NGINX transmitidos.  La expresi√≥n regular se almacena en la variable local xss, su valor se compara con cada valor de Fields [request] utilizando la funci√≥n rex.match (). <br><br>  Si hay coincidencias, la funci√≥n add_to_payload () env√≠a una notificaci√≥n de que el complemento de salida puede recibir y transmitir al destino. <br><br><blockquote><h3>  Listado 8.7.  Un complemento que detecta mensajes de registro que contienen signos de ataque en la cadena de consulta </h3><br><img src="https://habrastorage.org/webt/9g/_f/t_/9g_ft__g8xthelzokpz6afui150.png" alt="imagen"></blockquote><br>  Un resultado de ejemplo de este complemento se muestra en el Listado 8.8.  Se generan varias notificaciones por revistas de muestra, algunas de las cuales resultaron ser falsas positivas.  Esto sucedi√≥ en parte porque los registros de muestra se crearon artificialmente utilizando el esc√°ner de vulnerabilidad ZAP y tambi√©n porque las cadenas de consulta no tienden a contener etiquetas HTML.  En particular, esta expresi√≥n regular no tendr√° una tasa demasiado alta para encontrar coincidencias falsas positivas. <br><br><blockquote><h3>  Listado 8.8.  Ejemplos de notificaciones generadas por el complemento de an√°lisis XSS </h3><br><img src="https://habrastorage.org/webt/x_/kw/-t/x_kw-tqj6b3gf_n2gowqq6zurue.png" alt="imagen"></blockquote><br>  Esta es solo una expresi√≥n regular para un tipo espec√≠fico de ataque.  Para que este enfoque sea √∫til, necesita encontrar algo m√°s que expresiones regulares.  Para empezar, puede recopilar firmas de varias fuentes y, a medida que se encuentren m√°s signos sospechosos en los registros, aumente gradualmente el tama√±o de su base de datos. <br><br>  El listado 8.9 muestra una versi√≥n modificada del analizador XSS que busca varios signos de un ataque (http://mng.bz/62h8).  Este script muestra c√≥mo puede usar tablas Lua para almacenar una lista de atributos y usarla c√≠clicamente para analizar eventos entrantes.  En este ejemplo de c√≥digo, la tabla suspicious_terms es una simple fila de filas que usa subcadenas para buscar expresiones regulares, que es mucho m√°s r√°pido.  La tabla suspicious_terms utiliza el formato de clave-valor para almacenar etiquetas junto con la expresi√≥n para poder recordarle que la expresi√≥n debe encontrar. <br><br><h3>  Listado 8.9.  Busque signos de ataques utilizando cadenas y expresiones </h3><br><img src="https://habrastorage.org/webt/-4/kt/nq/-4ktnqdffbwc1uidpjqdvcdj68a.png" alt="imagen"><br><img src="https://habrastorage.org/webt/mv/na/ul/mvnaulm65owmhzjqiaxveziil84.png" alt="imagen"><br><br>  Puede ejecutar este analizador utilizando la configuraci√≥n de prueba descrita al principio del cap√≠tulo.  Inicie el contenedor Docker con directorios montados y la salida del analizador se escribir√° en output / payload / analysis.suspicious_signatures.alerts.txt.  El complemento enviar√° miles de notificaciones, lo que se espera, ya que estos registros son generados por el esc√°ner de vulnerabilidades ZAP.  Este enfoque puede considerarse exitoso, pero tiene fallas que debe considerar. <br><br><ul><li>  <i>Las expresiones regulares son dif√≠ciles de escribir e incluso m√°s dif√≠ciles de leer</i> .  Cometer√° errores que no son f√°ciles de investigar y que requerir√°n horas de depuraci√≥n dolorosa.  Solo hay cuatro expresiones regulares en este analizador, pero leer esta parte del c√≥digo ya es dif√≠cil.  No importa cu√°n poderosa y atractiva sea la herramienta para ser expresiones regulares, no recomendar√≠a trabajar con ellas constantemente. </li><li>  <i>Con este enfoque, se generan demasiadas notificaciones</i> .  Las aplicaciones web abiertas a Internet reciben mucho tr√°fico inusual, malicioso y no tanto.  La generaci√≥n de notificaciones para cada signo inusual enloquecer√° a cualquier equipo de seguridad durante varias semanas, incluso si la tasa de falsos positivos es baja.  El tr√°fico anormal es una ocurrencia natural para los servicios que se ejecutan en Internet. </li></ul><br>  Puede solucionar estos dos problemas aplicando un enfoque matem√°tico y haciendo que este sistema perfecto para detectar anomal√≠as sea un poco menos perfecto.  En la siguiente secci√≥n, veremos c√≥mo usar m√©todos estad√≠sticos para enviar notificaciones cuando se supera un umbral como una forma de reducir el ruido de la l√≥gica de detecci√≥n de anomal√≠as. <br><br><h4>  Sobre el autor </h4><br>  Al momento de escribir este art√≠culo, <i>Julien Vehen est√°</i> administrando el equipo de seguridad de operaciones en Firefox, Mozilla.  Es responsable de crear, implementar y operar una estrategia de seguridad de servicios web con la que interact√∫an millones de usuarios de Firefox todos los d√≠as.  Julien se centr√≥ en proteger los servicios de red a principios de la d√©cada de 2000.  Comenz√≥ a trabajar como administrador de sistemas en Linux, y en 2007 recibi√≥ una maestr√≠a en seguridad de la informaci√≥n. <br><br>  ¬ªSe puede encontrar m√°s informaci√≥n sobre el libro en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sitio web del editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Contenidos</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Extracto</a> <br><br>  Cup√≥n de 25% de descuento para <b>vendedores ambulantes</b> - <b>DevOps</b> <br><br>  Tras el pago de la versi√≥n en papel del libro, se env√≠a un libro electr√≥nico por correo electr√≥nico. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/468085/">https://habr.com/ru/post/468085/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../468073/index.html">Andrei Terekhov: "Puedes decir todo lo que quieras que el estadounidense es mejor, pero nuestro auto nunca se descompone"</a></li>
<li><a href="../468075/index.html">El uso de redes neuronales siamesas en la b√∫squeda</a></li>
<li><a href="../468077/index.html">Realice pruebas de manera adulta. An√°lisis espectral</a></li>
<li><a href="../468081/index.html">"Datos an√≥nimos" o lo que se planea en 152-FZ</a></li>
<li><a href="../468083/index.html">Android Camera2 API desde el hervidor de agua</a></li>
<li><a href="../468087/index.html">M√©todo de divisi√≥n biseccional en pruebas</a></li>
<li><a href="../468089/index.html">Redefinici√≥n basada en la edici√≥n: ¬øes posible en la producci√≥n?</a></li>
<li><a href="../468091/index.html">El proyecto de ley sobre la creaci√≥n de una base de datos √∫nica con los datos de los ciudadanos adoptados en la Duma del Estado en la primera lectura</a></li>
<li><a href="../468093/index.html">Nitratos en productos: tiendas suizas vs tiendas rusas vs caba√±a de verano</a></li>
<li><a href="../468097/index.html">Microsoft Edge - XSS gen√©rico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>