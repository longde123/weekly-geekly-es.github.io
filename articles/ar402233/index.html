<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—“ï¸ ğŸ“ ğŸŒ Ù†Ù‚ÙˆÙ… Ø¨Ø±ÙØ¹ ØªØ±Ø¯Ø¯ ØªØ´ØºÙŠÙ„ Ø¬Ù‡Ø§Ø² ØªÙˆØ¬ÙŠÙ‡ JTAG ğŸ˜¡ ğŸ˜Œ ğŸš°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ø¥Ø°Ø§ ÙƒÙ†Øª Ø¨Ø­Ø§Ø¬Ø© ÙØ¬Ø£Ø© Ø¥Ù„Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© / Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ÙÙŠ Ø´Ø¨Ù‡ Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ù‚Ø±Ù… ØŒ ÙˆØ´Ø±Ø¨ Ø§Ù„Ø¹ØµØ§Ø¦Ø± Ù…Ù† Ù…ÙƒØªØ¨ Ø®Ø§Ù†Ù‚ ÙÙŠ Ø®ÙŠÙ…ÙƒÙŠ. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù„ÙˆØ­Ø©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ù†Ù‚ÙˆÙ… Ø¨Ø±ÙØ¹ ØªØ±Ø¯Ø¯ ØªØ´ØºÙŠÙ„ Ø¬Ù‡Ø§Ø² ØªÙˆØ¬ÙŠÙ‡ JTAG</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402233/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/files/246/ed6/597/246ed659739644049ad207725286591d.png"><br>  Ø¥Ø°Ø§ ÙƒÙ†Øª Ø¨Ø­Ø§Ø¬Ø© ÙØ¬Ø£Ø© Ø¥Ù„Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© / Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ÙÙŠ Ø´Ø¨Ù‡ Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ù‚Ø±Ù… ØŒ ÙˆØ´Ø±Ø¨ Ø§Ù„Ø¹ØµØ§Ø¦Ø± Ù…Ù† Ù…ÙƒØªØ¨ Ø®Ø§Ù†Ù‚ ÙÙŠ Ø®ÙŠÙ…ÙƒÙŠ.  Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø¯Ù‚ÙŠÙ‚ Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¹Ù„Ù‰ Ø¬Ø³Ù… Ù…ØªØ­Ø±Ùƒ ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø±ÙŠÙ‚Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…ØµØ­Ø­ Ø£Ø®Ø·Ø§Ø¡ JTAG (ØªÙˆØ¬Ø¯ Ø§Ù„Ù„ÙˆØ­Ø© Ø¹Ù„Ù‰ Ø¨Ø§Ù„ÙˆÙ† / quadrocopter).  Ø¥Ø°Ø§ ÙƒÙ†Øª ÙØ¬Ø£Ø© ØªØ­ØªØ§Ø¬ ÙÙ‚Ø· Ø¥Ù„Ù‰ Ø¹Ø²Ù„ ÙƒÙ„ÙØ§Ù†ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¶ÙŠÙ ÙˆØ§Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªÙŠ ÙŠØªÙ… ØªØµØ­ÙŠØ­Ù‡Ø§ (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ø¬Ù‡Ø§Ø² Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬Ù‡Ø¯).  ÙˆÙ…Ù† Ø§Ù„Ø¬ÙŠØ¯ Ø£Ù†Ù‡Ø§ Ù„Ø§ ØªØ²Ø§Ù„ Ø±Ø®ÙŠØµØ© ÙˆÙ…Ø¨Ù‡Ø¬Ø© ÙˆØ¹Ø§Ù„Ù…ÙŠØ© Ù„Ù„Ù…ØµÙ†Ø¹ (STM ØŒ Broadcom ØŒ Xilinx ØŒ Ø¥Ù„Ø®) Ø£Ùˆ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© (ARM ØŒ MIPS ØŒ FPGA ØŒ Ø¥Ù„Ø®).  Ø«Ù… ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¬Ù‡Ø§Ø² ØªÙˆØ¬ÙŠÙ‡ ØŒ Ù†Ø¹Ù… ØŒ Ù…Ø¬Ø±Ø¯ Ø¬Ù‡Ø§Ø² ØªÙˆØ¬ÙŠÙ‡ ØŒ Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ù…Ø«Ù„ Ù‡Ø°Ø§. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3a9/c06/f83/3a9c06f8316481c4695a7cab8b686b4f.jpg" alt="Ø§Ù„ØµÙˆØ±Ø©"><br>  <i>ØµÙˆØ±Ø© Ù…Ù† sagemcom.ru</i> <br><br>  Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ù†Ø¸Ø± ÙÙŠ Ø§Ù„Ø¯Ø§Ø®Ù„: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c8e/2ff/765/c8e2ff765b2a6c1c4a479e9c7b5ea6c8.png" alt="Ø§Ù„ØµÙˆØ±Ø©"><br>  <i>wiki.openwrt.org</i> <br><br>  Ù„Ø°Ø§ ØŒ Ù‡Ø°Ø§ Ù‡Ùˆ Sagem F @ ST2704 V2 ØŒ Ø§Ù„Ø°ÙŠ ÙˆØ²Ø¹ØªÙ‡ Rostelecom ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„Ø¨Ù„Ø§Ø¯.  Ù„Ø¯ÙŠÙ†Ø§ SoC BCM6328 MIPS Ø¨Ù†ÙŠØ© Ø£Ø³Ø§Ø³ÙŠØ© ØŒ 320 Ù…ÙŠØ¬Ø§Ù‡Ø±ØªØ² ØŒ Ø²ÙˆØ¬ Ù…Ù† Ù…Ù†Ø§ÙØ° USB Ù…Ù„Ø­ÙˆÙ…Ø© [1].  Ù‡Ù†Ø§Ùƒ ÙˆØ£ÙŠ ÙØ£ÙŠ ÙˆØ¥ÙŠØ«Ø±Ù†Øª.  ÙˆØ£ÙØ¶Ù„ Ø¬Ø²Ø¡ Ù‡Ùˆ Ø¥ØµØ¯Ø§Ø± Ø¨Ø±Ù†Ø§Ù…Ø¬ OpenRT Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬.  ÙƒÙ„ Ù…Ø§ Ù‡Ùˆ Ù…Ø·Ù„ÙˆØ¨ Ù…Ù† Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ù„Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© Ø£Ø¹Ù„Ø§Ù‡. <br><br>  Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ± ØªÙ†Ø´Ø£ Ø§Ù„ÙÙƒØ±Ø© Ù„Ø§Ù„ØªÙ‚Ø§Ø· st-link ÙˆÙ…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ USB Ø¹Ø¨Ø± Ø§Ù„Ø´Ø¨ÙƒØ©.  ÙŠØ¨Ø¯Ùˆ ÙˆÙƒØ£Ù†Ù‡ Ø¹ÙƒØ§Ø² ØŒ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¬Ø­ ÙŠØ¹Ø¯ Ø¨Ø§Ù„Ø¹Ù…Ù„ Ù„ÙŠØ³ Ø³Ø±ÙŠØ¹Ù‹Ø§ ÙˆÙ„ÙŠØ³ Ù…Ø³ØªÙ‚Ø±Ù‹Ø§ Ø¬Ø¯Ù‹Ø§ ØŒ ÙØ§Ù„Ù†ÙÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø¶Ø®Ù…Ø©.  Ù†Ø­Ù† Ù†Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ù…Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡. <br><br>  ÙŠÙ…ÙƒÙ†Ùƒ Ù†Ù‚Ù„ openocd Ø¥Ù„Ù‰ openwrt ØŒ ÙˆØ§Ù„ØªÙ‚Ø§Ø· Ø´Ø±ÙŠØ­Ø© st-link Ø£Ùˆ ftdi ÙˆØ¨Ø¯Ø¡ Ø®Ø§Ø¯Ù… gdb.  Ù„Ø­Ø³Ù† Ø§Ù„Ø­Ø¸ ØŒ ØªÙ… Ù†Ù‚Ù„ openocr Ø¨Ø§Ù„ÙØ¹Ù„ Ø¥Ù„Ù‰ openwrt.  ÙŠØ¨Ø¯Ùˆ ÙƒØ§ÙÙŠØ§ Ù„Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø±.  Ù„ÙƒÙ†ÙŠ Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ø±Ù‰ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ø§Ù„ØªÙŠ ÙŠÙ‚Ø¯Ù…Ù‡Ø§ Ù„Ù†Ø§ openocd.  ÙˆÙ‡Ù†Ø§ ÙÙŠ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ ØŒ ØªØ¸Ù‡Ø± ÙˆØ§Ø¬Ù‡Ø© sysfsgpio.  Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ Ù‡Ùˆ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ø´Ø§Ø±Ø§Øª tck Ùˆ tdi Ùˆ tdo ÙˆØ§Ù„ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ Ù„ÙŠÙ†ÙƒØ³ Ø¹Ø¨Ø± / sys / class / gpio Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ù…ÙŠØ± Ø§Ù„Ù…Ù„Ø­ÙˆÙ…Ø© Ù„Ù„Ø±Ù‚Ø§Ù‚Ø©. <br><br>  Ù†Ø­Ø§ÙˆÙ„.  Ù„Ù„Ø¨Ø¯Ø¡ ØŒ Ø§Ø¬Ù…Ø¹ openwrt (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙØ±Ø¹ chaos_calmer) Ù…Ø¹ openocd.  Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ ØŒ Ø¹Ù„Ù‰ GPIOs Ø§Ù„Ù…Ù„Ø­ÙˆÙ…Ø© ØŒ ÙŠØªÙ… Ø¥ØµÙ„Ø§Ø­ ÙˆØ¸Ø§Ø¦Ù Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø¶ÙˆØ¡ ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªÙ‚ØµØ§Ø¡ Ù„ØªÙ†ÙÙŠØ° Ø¨Ø¹Ø¶ Ø§Ù„Ø£ÙˆØ§Ù…Ø± (rfkill Ùˆ reset Ùˆ wpsc).  Ø­ØªÙ‰ Ù„Ø§ ØªØªØ¯Ø§Ø®Ù„ ØŒ Ø£ÙˆÙ‚ÙØªÙ‡Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¥Ø²Ø§Ù„Ø© ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù†ÙˆØ§Ø© Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ù…Ù† Ø§Ù„ØªØ¬Ù…ÙŠØ¹. <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$cat</span></span> target/linux/brcm63xx/config-3.18 b/target/linux/brcm63xx/config-3.18 ... <span class="hljs-comment"><span class="hljs-comment"># CONFIG_NEW_LEDS is not set â€¦ $cat .config â€¦ # CONFIG_PACKAGE_kmod-input-gpio-keys-polled is not set ... # CONFIG_PACKAGE_kmod-input-polldev is not set ... CONFIG_PACKAGE_openocd=y</span></span></code> </pre> <br>  Ø§Ù„ØªØ¬Ù…Ø¹ Ù†ÙØ³Ù‡: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">./scripts/feeds update -a ./scripts/feeds install -a make V=s</code> </pre><br>  Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø«Ø§Ø¨ØªØ©: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">mtd -q write openwrt-brcm63xx-generic-F@ST2704V2-squashfs-cfe.bin linux</code> </pre><br>  ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± sysfsgpio ØŒ Ù†Ù‚ÙˆÙ… Ø¨ØªØ¬Ù…ÙŠØ¹ Ø§Ù„ØªÙƒÙˆÙŠÙ†: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">root@OpenWrt:~<span class="hljs-comment"><span class="hljs-comment"># cat sysfs.cfg.2.11 interface sysfsgpio transport select swd sysfsgpio_swclk_num 482 sysfsgpio_swdio_num 491 source [find target/stm32f1x.cfg]</span></span></code> </pre><br>  Ø±Ø¨Ø· ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©: <br><br><img src="https://habrastorage.org/files/e07/279/152/e07279152f9c4347af961fc1368c2275.png"><br><br>  Ø£Ø·Ù„Ù‚Ù†Ø§: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">root@OpenWrt:~# openocd -f sysfs.cfg<span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Open</span></span> <span class="hljs-keyword"><span class="hljs-keyword">On</span></span>-Chip Debugger <span class="hljs-number"><span class="hljs-number">0.10</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>+dev<span class="hljs-number"><span class="hljs-number">-00085</span></span>-gfced6ac6-dirty (<span class="hljs-number"><span class="hljs-number">2017</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>-xx<span class="hljs-number"><span class="hljs-number">-21</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span>) Licensed under GNU GPL v2 <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> bug reports, <span class="hljs-keyword"><span class="hljs-keyword">read</span></span> http://openocd.org/doc/doxygen/bugs.html SysfsGPIO num: swclk = <span class="hljs-number"><span class="hljs-number">482</span></span> SysfsGPIO num: swdio = <span class="hljs-number"><span class="hljs-number">491</span></span> SysfsGPIO num: trst = <span class="hljs-number"><span class="hljs-number">481</span></span> adapter speed: <span class="hljs-number"><span class="hljs-number">1000</span></span> kHz adapter_nsrst_delay: <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">none</span></span> separate cortex_m reset_config sysresetreq <span class="hljs-keyword"><span class="hljs-keyword">Info</span></span> : SysfsGPIO JTAG/SWD bitbang driver <span class="hljs-keyword"><span class="hljs-keyword">Info</span></span> : SWD <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> mode enabled (specify tck, tms, tdi <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> tdo gpios <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> JTAG mode) Warn : gpio <span class="hljs-number"><span class="hljs-number">482</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> already exported Warn : gpio <span class="hljs-number"><span class="hljs-number">491</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> already exported <span class="hljs-keyword"><span class="hljs-keyword">Info</span></span> : This adapter doesn<span class="hljs-string"><span class="hljs-string">'t support configurable speed Info : SWD DPIDR 0x1ba01477 Info : stm32f1x.cpu: hardware has 6 breakpoints, 4 watchpoints</span></span></code> </pre> <br>  ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØµØ­ÙŠØ­ ÙÙŠ IDE ØŒ ÙŠØ¹Ù…Ù„ ÙƒÙ„ Ø´ÙŠØ¡. <br><br><img src="https://habrastorage.org/files/3f0/983/aec/3f0983aecb41441592f838b44e8ca5db.png"><br><br>  ÙÙ‚Ø· Ø¨Ø¨Ø·Ø¡ Ø´Ø¯ÙŠØ¯. <br><br>  Ù†Ø­Ø§ÙˆÙ„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø±Ø¹Ø© ØŒ Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ telnet: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">telnet 10.65.9.239 4444</code> </pre><br>  Ù†ØµÙ†Ø¹ ØªÙØ±ÙŠØº Ø°Ø§ÙƒØ±Ø©. <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs swift">&gt; dump_image <span class="hljs-built_in"><span class="hljs-built_in">dump</span></span>.bin <span class="hljs-number"><span class="hljs-number">0x08000000</span></span> <span class="hljs-number"><span class="hljs-number">0x1ffff</span></span> dumped <span class="hljs-number"><span class="hljs-number">131071</span></span> bytes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span>.013523s (<span class="hljs-number"><span class="hljs-number">2.327</span></span> <span class="hljs-type"><span class="hljs-type">KiB</span></span>/s)</code> </pre><br>  Ø­Ø³Ù†Ù‹Ø§ ØŒ Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ ÙŠØ¹Ø·ÙŠ st-linkv2 Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¶ÙŠÙ Ø§Ù„Ø®Ø§Øµ Ø¨ÙŠ Ø³Ø±Ø¹Ø© ØªØ¨Ù„Øº Ø­ÙˆØ§Ù„ÙŠ 45 ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª / Ø«Ø§Ù†ÙŠØ©.  20 Ø¶Ø¹Ù Ø§Ù„ÙØ±Ù‚! <br><br><img src="https://habrastorage.org/files/a12/7ef/250/a127ef250a2c41adae14f1f5ae211050.png"><br><br>  Ø§Ù„Ù†Ù‚Ø·Ø© ØŒ Ø¨Ø§Ù„Ø·Ø¨Ø¹ ØŒ ÙŠØ±Ø¬Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¨Ø·ÙŠØ¡ Ù…Ø¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ / sys / class / gpio.  Ø¨Ø¯Ø³ ÙÙŠ openocd.  Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¨Ø±Ù†Ø§Ù…Ø¬ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„Ù€ RaspberryPi (src / jtag / drivers / bcm2835gpio.c).  Ø¥Ø°Ø§ Ø­ÙƒÙ…Ù†Ø§ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª [5] ØŒ ÙÙŠÙ†Ø¨ØºÙŠ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ù‡Ø§ Ø³Ø±Ø¹Ø© Ù…Ù…Ø§Ø«Ù„Ø© Ù„ØªÙ„Ùƒ Ø§Ù„ØªÙŠ Ù…Ù† st-link.  ÙŠØªÙ… ØªØ­Ù‚ÙŠÙ‚ Ø°Ù„Ùƒ ØŒ Ø¥Ù„Ù‰ Ø­Ø¯ ÙƒØ¨ÙŠØ± ØŒ Ø¨Ø³Ø¨Ø¨ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¥Ù„Ù‰ Ø³Ø¬Ù„Ø§Øª GPIO.  Ø³Ù†ÙØ¹Ù„ Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ Ù…Ø¹ Ø´Ø±ÙƒØ© SoC Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù†Ø§ ØŒ ÙˆØ³ÙŠØ³Ø±ÙŠ Ø°Ù„Ùƒ Ø£ÙŠØ¶Ù‹Ø§ Ø¹Ù„Ù‰ Ø¹Ø§Ø¦Ù„Ø© Ø´Ø±Ø§Ø¦Ø­ bcm63xx Ø¨Ø£ÙƒÙ…Ù„Ù‡Ø§. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ØªØ­ÙˆÙ„Øª Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * @file * This driver implements a bitbang jtag interface using gpio lines via * router ob BCM63XX SoC. * The aim of this driver implementation is use system GPIOs but avoid the * need for a additional kernel driver. * (Note memory mapped IO is another option, however it doesn't mix well with * the kernel gpiolib driver - which makes sense I guess.) * * A gpio is required for tck, tms, tdi and tdo. One or both of srst and trst * must be also be specified. The required jtag gpios are specified via the * bcm63xx_gpio_jtag_nums command or the relevant bcm63xx_gpio_XXX_num commang. * The srst and trst gpios are set via the bcm63xx_gpio_srst_num and * bcm63xx_gpio_trst_num respectively. GPIO numbering follows the kernel * convention of starting from 0. * * The gpios should not be in use by another entity, and must not be requested * by a kernel driver without also being exported by it (otherwise they can't * be exported by bcm63xx_). * * The bcm63xx gpio interface can only manipulate one gpio at a time, so the * bitbang write handler remembers the last state for tck, tms, tdi to avoid * superfluous writes. * For speed the bcm63xx "value" entry is opened at init and held open. * This results in considerable gains over open-write-close (45s vs 900s) * * Further work could address: * -srst and trst open drain/ push pull * -configurable active high/low for srst &amp; trst */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> HAVE_CONFIG_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"config.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;jtag/interface.h&gt; #include "bitbang.h" #include &lt;sys/mman.h&gt; /* * Helper func to determine if gpio number valid * * Assume here that there will be less than 1000 gpios on a system */ static int is_gpio_valid(int gpio) { return gpio &gt;= 0 &amp;&amp; gpio &lt; 32; } off_t address_dir = NULL; off_t address_val = NULL; static int dev_mem_fd = -1; static volatile uint32_t *pio_base = NULL; static volatile uint32_t *pval_base = NULL; static volatile uint32_t *pads_base = NULL; static unsigned int jtag_delay = 0; static void set_dir_gpio(const int gpio, const int direction) { if(direction) *pio_base |= 1 &lt;&lt; gpio; else *pio_base &amp;= ~(1 &lt;&lt; gpio); } static void set_value_gpio(const int gpio, const int value) { if(value) *pval_base |= 1 &lt;&lt; gpio; else *pval_base &amp;= ~(1 &lt;&lt; gpio); for (unsigned int i = 0; i &lt; jtag_delay; i++) asm volatile (""); } static int read_gpio(const int gpio) { uint32_t val = *pval_base &amp; (1 &lt;&lt; gpio); val = val ? 1 : 0; return val; } static int setup_bcm63xx_gpio(int gpio, int is_output, int init_high) { char buf[40]; char gpiostr[4]; int ret; if (!is_gpio_valid(gpio)) return ERROR_OK; if((address_dir == NULL) || (address_val == NULL)){ perror("address of gpio register don't set"); return ERROR_FAIL; } if( dev_mem_fd &lt; 0 ) { dev_mem_fd = open("/dev/mem", O_RDWR | O_SYNC); if (dev_mem_fd &lt; 0) { perror("open"); return ERROR_FAIL; } const uint32_t mapped_size = getpagesize(); const off_t target_mmap = address_dir &amp; ~(off_t)(mapped_size - 1); pads_base = mmap(NULL, mapped_size, PROT_READ | PROT_WRITE, MAP_SHARED, dev_mem_fd, target_mmap); if (pads_base == MAP_FAILED) { perror("mmap. Check correct register address."); close(dev_mem_fd); return ERROR_FAIL; } pio_base = (char*)pads_base + (unsigned)(address_dir - target_mmap); pval_base = (char*)pads_base + (unsigned)(address_val - target_mmap); } set_dir_gpio(gpio, is_output); set_value_gpio(gpio, init_high); return 0; } /* gpio numbers for each gpio. Negative values are invalid */ static int tck_gpio = -1; static int tms_gpio = -1; static int tdi_gpio = -1; static int tdo_gpio = -1; static int trst_gpio = -1; static int srst_gpio = -1; static int swclk_gpio = -1; static int swdio_gpio = -1; /* * file descriptors for /sys/class/gpio/gpioXX/value * Set up during init. */ static int tck_fd = -1; static int tms_fd = -1; static int tdi_fd = -1; static int tdo_fd = -1; static int trst_fd = -1; static int srst_fd = -1; static int swclk_fd = -1; static int swdio_fd = -1; static int last_swclk; static int last_swdio; static bool last_stored; static bool swdio_input; static void bcm63xx_gpio_swdio_drive(bool is_output) { set_dir_gpio(swdio_gpio, is_output ? 1 : 0); last_stored = false; swdio_input = !is_output; } static int bcm63xx_gpio_swdio_read(void) { return read_gpio(swdio_gpio); } static void bcm63xx_gpio_swdio_write(int swclk, int swdio) { const char one[] = "1"; const char zero[] = "0"; size_t bytes_written; if (!swdio_input) { if (!last_stored || (swdio != last_swdio)) { set_value_gpio(swdio_gpio, swdio ? 1 : 0); } } /* write swclk last */ if (!last_stored || (swclk != last_swclk)) { set_value_gpio(swclk_gpio, swclk ? 1 : 0); } last_swdio = swdio; last_swclk = swclk; last_stored = true; } /* * Bitbang interface read of TDO * * The bcm63xx value will read back either '0' or '1'. The trick here is to call * lseek to bypass buffering in the bcm63xx kernel driver. */ static int bcm63xx_gpio_read(void) { return read_gpio(tdo_gpio); } /* * Bitbang interface write of TCK, TMS, TDI * * Seeing as this is the only function where the outputs are changed, * we can cache the old value to avoid needlessly writing it. */ static void bcm63xx_gpio_write(int tck, int tms, int tdi) { if (swd_mode) { bcm63xx_gpio_swdio_write(tck, tdi); return; } const char one[] = "1"; const char zero[] = "0"; static int last_tck; static int last_tms; static int last_tdi; static int first_time; size_t bytes_written; if (!first_time) { last_tck = !tck; last_tms = !tms; last_tdi = !tdi; first_time = 1; } if (tdi != last_tdi) { set_value_gpio(tdi_gpio,tdi); } if (tms != last_tms) { set_value_gpio(tms_gpio,tms); } /* write clk last */ if (tck != last_tck) { set_value_gpio(tck_gpio,tck); } last_tdi = tdi; last_tms = tms; last_tck = tck; } /* * Bitbang interface to manipulate reset lines SRST and TRST * * (1) assert or (0) deassert reset lines */ static void bcm63xx_gpio_reset(int trst, int srst) { LOG_DEBUG("bcm63xx_gpio_reset"); const char one[] = "1"; const char zero[] = "0"; size_t bytes_written; /* assume active low */ if (srst_fd &gt;= 0) { set_value_gpio(srst_gpio,srst); } /* assume active low */ if (trst_fd &gt;= 0) { set_value_gpio(trst_gpio,trst); } } COMMAND_HANDLER(bcm63xx_gpio_handle_jtag_gpionums) { if (CMD_ARGC == 4) { COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], tck_gpio); COMMAND_PARSE_NUMBER(int, CMD_ARGV[1], tms_gpio); COMMAND_PARSE_NUMBER(int, CMD_ARGV[2], tdi_gpio); COMMAND_PARSE_NUMBER(int, CMD_ARGV[3], tdo_gpio); } else if (CMD_ARGC != 0) { return ERROR_COMMAND_SYNTAX_ERROR; } command_print(CMD_CTX, "bcm63xx_GPIO nums: tck = %d, tms = %d, tdi = %d, tdo = %d", tck_gpio, tms_gpio, tdi_gpio, tdo_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_jtag_gpionum_tck) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], tck_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: tck = %d", tck_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_jtag_gpionum_tms) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], tms_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: tms = %d", tms_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_jtag_gpionum_tdo) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], tdo_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: tdo = %d", tdo_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_jtag_gpionum_tdi) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], tdi_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: tdi = %d", tdi_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_jtag_gpionum_srst) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], srst_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: srst = %d", srst_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_jtag_gpionum_trst) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], trst_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: trst = %d", trst_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_swd_gpionums) { if (CMD_ARGC == 2) { COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], swclk_gpio); COMMAND_PARSE_NUMBER(int, CMD_ARGV[1], swdio_gpio); } else if (CMD_ARGC != 0) { return ERROR_COMMAND_SYNTAX_ERROR; } command_print(CMD_CTX, "bcm63xx_GPIO nums: swclk = %d, swdio = %d", swclk_gpio, swdio_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_swd_gpionum_swclk) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], swclk_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: swclk = %d", swclk_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_handle_swd_gpionum_swdio) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], swdio_gpio); command_print(CMD_CTX, "bcm63xx_GPIO num: swdio = %d", swdio_gpio); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_jtag_delay) { if (CMD_ARGC == 1) COMMAND_PARSE_NUMBER(int, CMD_ARGV[0], jtag_delay); command_print(CMD_CTX, "bcm63xx_GPIO jtag_delay:= %d tics", jtag_delay); return ERROR_OK; } COMMAND_HANDLER(bcm63xx_gpio_adresses) { if (CMD_ARGC == 2) { COMMAND_PARSE_NUMBER(u32, CMD_ARGV[0], address_dir); COMMAND_PARSE_NUMBER(u32, CMD_ARGV[1], address_val); } else if (CMD_ARGC != 0) { return ERROR_COMMAND_SYNTAX_ERROR; } command_print(CMD_CTX, "bcm63xx_GPIO address: direction = %x, value = %x", address_dir, address_val); return ERROR_OK; } static const struct command_registration bcm63xx_gpio_command_handlers[] = { { .name = "bcm63xx_gpio_jtag_nums", .handler = &amp;bcm63xx_gpio_handle_jtag_gpionums, .mode = COMMAND_CONFIG, .help = "gpio numbers for tck, tms, tdi, tdo. (in that order)", .usage = "(tck tms tdi tdo)* ", }, { .name = "bcm63xx_gpio_tck_num", .handler = &amp;bcm63xx_gpio_handle_jtag_gpionum_tck, .mode = COMMAND_CONFIG, .help = "gpio number for tck.", }, { .name = "bcm63xx_gpio_tms_num", .handler = &amp;bcm63xx_gpio_handle_jtag_gpionum_tms, .mode = COMMAND_CONFIG, .help = "gpio number for tms.", }, { .name = "bcm63xx_gpio_tdo_num", .handler = &amp;bcm63xx_gpio_handle_jtag_gpionum_tdo, .mode = COMMAND_CONFIG, .help = "gpio number for tdo.", }, { .name = "bcm63xx_gpio_tdi_num", .handler = &amp;bcm63xx_gpio_handle_jtag_gpionum_tdi, .mode = COMMAND_CONFIG, .help = "gpio number for tdi.", }, { .name = "bcm63xx_gpio_srst_num", .handler = &amp;bcm63xx_gpio_handle_jtag_gpionum_srst, .mode = COMMAND_CONFIG, .help = "gpio number for srst.", }, { .name = "bcm63xx_gpio_trst_num", .handler = &amp;bcm63xx_gpio_handle_jtag_gpionum_trst, .mode = COMMAND_CONFIG, .help = "gpio number for trst.", }, { .name = "bcm63xx_gpio_swd_nums", .handler = &amp;bcm63xx_gpio_handle_swd_gpionums, .mode = COMMAND_CONFIG, .help = "gpio numbers for swclk, swdio. (in that order)", .usage = "(swclk swdio)* ", }, { .name = "bcm63xx_gpio_swclk_num", .handler = &amp;bcm63xx_gpio_handle_swd_gpionum_swclk, .mode = COMMAND_CONFIG, .help = "gpio number for swclk.", }, { .name = "bcm63xx_gpio_swdio_num", .handler = &amp;bcm63xx_gpio_handle_swd_gpionum_swdio, .mode = COMMAND_CONFIG, .help = "gpio number for swdio.", }, { .name = "bcm63xx_gpio_jtag_delay", .handler = &amp;bcm63xx_gpio_jtag_delay, .mode = COMMAND_CONFIG, .help = "qty tics gpio delay.", }, { .name = "bcm63xx_gpio_adresses", .handler = &amp;bcm63xx_gpio_adresses, .mode = COMMAND_CONFIG, .help = "addresses for direction and value setup. (in that order)", .usage = "(address_dir address_val)* ", }, COMMAND_REGISTRATION_DONE }; static int bcm63xx_gpio_init(void); static int bcm63xx_gpio_quit(void); static const char * const bcm63xx_gpio_transports[] = { "jtag", "swd", NULL }; struct jtag_interface bcm63xxgpio_interface = { .name = "bcm63xxgpio", .supported = DEBUG_CAP_TMS_SEQ, .execute_queue = bitbang_execute_queue, .transports = bcm63xx_gpio_transports, .swd = &amp;bitbang_swd, .commands = bcm63xx_gpio_command_handlers, .init = bcm63xx_gpio_init, .quit = bcm63xx_gpio_quit, }; static struct bitbang_interface bcm63xx_gpio_bitbang = { .read = bcm63xx_gpio_read, .write = bcm63xx_gpio_write, .reset = bcm63xx_gpio_reset, .swdio_read = bcm63xx_gpio_swdio_read, .swdio_drive = bcm63xx_gpio_swdio_drive, .blink = 0 }; static void unusing_all_gpio(void) { munmap(pads_base, sysconf(_SC_PAGE_SIZE)); close(dev_mem_fd); LOG_INFO("unusing_all_gpio\n"); } static bool bcm63xx_gpio_jtag_mode_possible(void) { if (!is_gpio_valid(tck_gpio)) return 0; if (!is_gpio_valid(tms_gpio)) return 0; if (!is_gpio_valid(tdi_gpio)) return 0; if (!is_gpio_valid(tdo_gpio)) return 0; return 1; } static bool bcm63xx_gpio_swd_mode_possible(void) { if (!is_gpio_valid(swclk_gpio)) return 0; if (!is_gpio_valid(swdio_gpio)) return 0; return 1; } static int bcm63xx_gpio_init(void) { bitbang_interface = &amp;bcm63xx_gpio_bitbang; LOG_INFO("bcm63xx_gpio JTAG/SWD bitbang driver"); if (bcm63xx_gpio_jtag_mode_possible()) { if (bcm63xx_gpio_swd_mode_possible()) LOG_INFO("JTAG and SWD modes enabled"); else LOG_INFO("JTAG only mode enabled (specify swclk and swdio gpio to add SWD mode)"); if (!is_gpio_valid(trst_gpio) &amp;&amp; !is_gpio_valid(srst_gpio)) { LOG_ERROR("Require at least one of trst or srst gpios to be specified"); return ERROR_JTAG_INIT_FAILED; } } else if (bcm63xx_gpio_swd_mode_possible()) { LOG_INFO("SWD only mode enabled (specify tck, tms, tdi and tdo gpios to add JTAG mode)"); } else { LOG_ERROR("Require tck, tms, tdi and tdo gpios for JTAG mode and/or swclk and swdio gpio for SWD mode"); return ERROR_JTAG_INIT_FAILED; } /* * Configure TDO as an input, and TDI, TCK, TMS, TRST, SRST * as outputs. Drive TDI and TCK low, and TMS/TRST/SRST high. * For SWD, SWCLK and SWDIO are configures as output high. */ if (tck_gpio &gt;= 0) { tck_fd = setup_bcm63xx_gpio(tck_gpio, 1, 0); if (tck_fd &lt; 0) goto out_error; } if (tms_gpio &gt;= 0) { tms_fd = setup_bcm63xx_gpio(tms_gpio, 1, 1); if (tms_fd &lt; 0) goto out_error; } if (tdi_gpio &gt;= 0) { tdi_fd = setup_bcm63xx_gpio(tdi_gpio, 1, 0); if (tdi_fd &lt; 0) goto out_error; } if (tdo_gpio &gt;= 0) { tdo_fd = setup_bcm63xx_gpio(tdo_gpio, 0, 0); if (tdo_fd &lt; 0) goto out_error; } /* assume active low*/ if (trst_gpio &gt;= 0) { trst_fd = setup_bcm63xx_gpio(trst_gpio, 1, 1); if (trst_fd &lt; 0) goto out_error; } /* assume active low*/ if (srst_gpio &gt;= 0) { srst_fd = setup_bcm63xx_gpio(srst_gpio, 1, 1); if (srst_fd &lt; 0) goto out_error; } if (swclk_gpio &gt;= 0) { swclk_fd = setup_bcm63xx_gpio(swclk_gpio, 1, 0); if (swclk_fd &lt; 0) goto out_error; } if (swdio_gpio &gt;= 0) { swdio_fd = setup_bcm63xx_gpio(swdio_gpio, 1, 0); if (swdio_fd &lt; 0) goto out_error; } if (bcm63xx_gpio_swd_mode_possible()) { if (swd_mode) bitbang_swd_switch_seq(JTAG_TO_SWD); else bitbang_swd_switch_seq(SWD_TO_JTAG); } return ERROR_OK; out_error: unusing_all_gpio(); return ERROR_JTAG_INIT_FAILED; } static int bcm63xx_gpio_quit(void) { unusing_all_gpio(); return ERROR_OK; }</span></span></span></span></code> </pre><br></div></div><br>  Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ù€ sysfsgpio ØŒ Ø£Ø¶Ø§ÙØª Ø®ÙŠØ§Ø±ÙŠÙ†: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  bcm63xx_gpio_jtag_delay </li><li style=";text-align:right;direction:rtl">  bcm63xx_gpio_adresses </li></ul><br>  Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ÙˆÙ„ ÙŠØ¹ÙŠÙ† Ø§Ù„ØªØ£Ø®ÙŠØ± Ø¨ÙŠÙ† Ø¯Ø¨Ø§Ø¨ÙŠØ³ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ ØŒ ÙˆÙ‡Ùˆ ØªÙ†Ø§Ø¸Ø±ÙŠ ØºÙŠØ± Ù…Ø¨Ø§Ø´Ø± Ù„Ù€ bcm2835gpio_speed_coeffs Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ RaspberryPi ØŒ Ø§Ù„Ø°ÙŠ ÙŠØ¶Ø¨Ø· ØªØ±Ø¯Ø¯ jtag.  Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ù…Ø¹ ØªØ£Ø®ÙŠØ± ØµÙØ± ØŒ ÙƒØ§Ù† ØªØ±Ø¯Ø¯ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø­ÙˆØ§Ù„ÙŠ Ù…ÙŠØºØ§Ù‡ÙŠØ±ØªØ² ÙˆØ§Ø­Ø¯ ØŒ ÙˆØ¹Ù…Ù„ ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ‚Ø± ØªÙ…Ø§Ù…Ù‹Ø§ ØŒ ÙˆÙ„ÙƒÙ† Ù…Ù† Ø£Ø¬Ù„ Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© ØŒ Ù…Ù† Ø§Ù„Ø£ÙØ¶Ù„ Ø£Ù† ØªÙƒÙˆÙ† Ù‚Ø§Ø¯Ø±Ù‹Ø§ Ø¹Ù„Ù‰ ØªØ¹ÙŠÙŠÙ† Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„Ù…Ø©. <br><br>  ÙˆØ§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ Ù‡Ùˆ ØªÙ†Ø§Ø¸Ø±ÙŠ Ù„Ù€ bcm2835gpio_peripheral_base ØŒ ÙÙ‚Ø· Ù„Ø£Ù†Ùƒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø¹Ù†ÙˆØ§Ù†ÙŠÙ† Ù„Ù„Ø³Ø¬Ù„ ØŒ Ø§Ù„Ø°ÙŠ ÙŠØ­Ø¯Ø¯ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ / Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ù„Ù„Ø¯Ø¨Ø§Ø¨ÙŠØ³ ØŒ ÙˆØ§Ù„Ø³Ø¬Ù„ ØŒ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© Ù„Ù„Ø¥Ø¯Ø®Ø§Ù„ / Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ø¹Ù„Ù‰ gpio.  ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ØŒ Ø£Ø®Ø°Øª Ù‚ÙŠÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ù† Ù…Ù„ÙØ§Øª Ø±Ø£Ø³ kernel.  Ù„ÙƒÙ† Ù„Ø§ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ….  Ø§ØªØ¶Ø­ Ø£Ù†Ù‡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø±ÙÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØŒ Ø£ÙŠ  ÙŠØ¬Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ø®Ø±ÙŠØ·Ø© ÙÙŠ Ø§Ù„Ù†ÙˆØ§Ø©.  Ù…Ù† Ø§Ù„Ø¬ÙŠØ¯ Ø£Ù† Ø¨Ø±Ù†Ø§Ù…Ø¬ ØªØ´ØºÙŠÙ„ gpio Ù‚Ø¯ Ù†ÙØ° Ù‡Ø°Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ Ù…Ù† Ø£Ø¬Ù„ÙŠ ÙˆÙŠÙ…ÙƒÙ† Ø£Ø®Ø° Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù…Ù† / proc / iomem. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø£Ø¶Ù ÙˆØ§Ø¬Ù‡ØªÙ†Ø§ Ø¥Ù„Ù‰ Ø§Ù„ØªØ¬Ù…Ø¹ openocd</a> <br><br>  ØªØ°ÙƒØ± Ø£Ù† ØªØ¶ÙŠÙ -enable-bcm63xxgpio Ø¥Ù„Ù‰ CONFIGURE_ARGS ÙÙŠ Ù…Ù„Ù Ø§Ù„Ø®Ù„Ø§ØµØ§Øª / Ø§Ù„Ø­Ø²Ù… / utils / openocd / Makefile. <br><br>  Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ§Ù„ØªØ«Ø¨ÙŠØª ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">root@OpenWrt:~# openocd -f interface/bcm63xx-swd.cfg -f target/stm32f1x.cfg <span class="hljs-keyword"><span class="hljs-keyword">Open</span></span> <span class="hljs-keyword"><span class="hljs-keyword">On</span></span>-Chip Debugger <span class="hljs-number"><span class="hljs-number">0.10</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>+dev<span class="hljs-number"><span class="hljs-number">-00085</span></span>-gfced6ac6-dirty (<span class="hljs-number"><span class="hljs-number">2017</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>-xx<span class="hljs-number"><span class="hljs-number">-21</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span>) Licensed under GNU GPL v2 <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> bug reports, <span class="hljs-keyword"><span class="hljs-keyword">read</span></span> http://openocd.org/doc/doxygen/bugs.html bcm63xx_GPIO num: swclk = <span class="hljs-number"><span class="hljs-number">2</span></span> bcm63xx_GPIO num: swdio = <span class="hljs-number"><span class="hljs-number">11</span></span> bcm63xx_GPIO jtag_delay:= <span class="hljs-number"><span class="hljs-number">10</span></span> tics bcm63xx_GPIO address: direction = <span class="hljs-number"><span class="hljs-number">10000084</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">1000008</span></span>c adapter speed: <span class="hljs-number"><span class="hljs-number">1000</span></span> kHz adapter_nsrst_delay: <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">none</span></span> separate cortex_m reset_config sysresetreq <span class="hljs-keyword"><span class="hljs-keyword">Info</span></span> : bcm63xx_gpio JTAG/SWD bitbang driver <span class="hljs-keyword"><span class="hljs-keyword">Info</span></span> : SWD <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> mode enabled (specify tck, tms, tdi <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> tdo gpios <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> JTAG mode) <span class="hljs-keyword"><span class="hljs-keyword">Info</span></span> : This adapter doesn<span class="hljs-string"><span class="hljs-string">'t support configurable speed Info : SWD DPIDR 0x1ba01477 Info : stm32f1x.cpu: hardware has 6 breakpoints, 4 watchpoints</span></span></code> </pre><br>  ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ±ÙŠØº. <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs swift">&gt; dump_image <span class="hljs-built_in"><span class="hljs-built_in">dump</span></span>.bin <span class="hljs-number"><span class="hljs-number">0x08000000</span></span> <span class="hljs-number"><span class="hljs-number">0x1ffff</span></span> dumped <span class="hljs-number"><span class="hljs-number">131071</span></span> bytes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>.729815s (<span class="hljs-number"><span class="hljs-number">27.062</span></span> <span class="hljs-type"><span class="hljs-type">KiB</span></span>/s)</code> </pre><br>  Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§ ØŒ Ù†Ø®Ø³Ø± Ù…Ø±ØªÙŠÙ† ÙÙŠ Ù…ÙƒØ§Ù† Ù…Ø§ st-link Ùˆ rasbberry ØŒ ÙˆÙ„ÙƒÙ† Ø¨Ø§Ù„Ø¹ÙŠÙ† Ù„Ø§ ÙŠÙ„Ø§Ø­Ø¸ Ø§Ù„ÙØ±Ù‚.  Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙØ§Ø±ÙŠØ² Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØµØ­ÙŠØ­ ØŒ Ø¬ÙŠØ¯Ù‹Ø§ ØŒ ÙˆØ§Ù†ØªØ¸Ø± Ø¨Ø¶Ø¹ Ø«ÙˆØ§Ù† Ø­ØªÙ‰ ØªÙˆÙ…Ø¶ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø«Ø§Ø¨ØªØ© - "Ø§Ø¸Ù‡Ø§Ø±". <br><br>  ØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¹Ù„Ù‰ Ù…ØªØ­ÙƒÙ… STM32F103C8T6 ÙˆÙ„Ø³ÙˆØ¡ Ø§Ù„Ø­Ø¸ ØŒ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ jtag Ø¹Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØµØ­ÙŠØ­ ÙÙ‚Ø· Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø© SWD ØŒ Ø¹Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØµØ­ÙŠØ­.  ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¶Ù…Ø§Ù† Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ jtag.  Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø°Ù„Ùƒ ØŒ ÙŠØ¬Ø¨ Ø£Ù„Ø§ Ù†Ù†Ø³Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¥Ø´Ø§Ø±Ø© (Ø¹Ù„Ù‰ ÙˆØ¬Ù‡ Ø§Ù„Ø®ØµÙˆØµ Ù„Ù€ MK AVR). <br><br>  ØªÙ… Ø£Ø®Ø° Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù†ÙØ³Ù‡ Ù…Ù† ÙƒÙˆÙ…Ø© Ù…Ù† Ø§Ù„Ù‚Ù…Ø§Ù…Ø© ØŒ Ù…Ù† Ø¨ÙŠÙ†Ù‡Ø§ ÙƒØ§Ù†Øª Ù…Ù„ÙŠØ¦Ø© Ø¨Ù€ Sagem F @ st 2704V2 Ùˆ V7.  Ù„Ø³ÙˆØ¡ Ø§Ù„Ø­Ø¸ ØŒ ÙƒØ§Ù†Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ù…Ø¹Ø·Ù„Ø©.  ÙˆÙ„ÙƒÙ† ÙƒØ§Ù† Ù…Ù† Ø§Ù„Ù…Ù…ÙƒÙ† Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù„ÙˆØ­Ø© Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„ (Ø§Ù†Ø¸Ø± [2]). <br><br>  Ø¥Ø°Ø§ ÙƒØ§Ù† Ø´Ø®Øµ Ù…Ø§ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ø¬Ø¹Ù„ Ø§Ù„Ù…ØµØ­Ø­ / Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø´Ø¦ ØŒ ÙÙ‡Ùˆ Ù…Ø³ØªØ¹Ø¯ Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø³ØªÙ„Ø²Ù…Ø§ØªÙ‡ Ù…Ø¹ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø¯ÙˆÙ† Ø£ÙŠ ØªÙƒÙ„ÙØ© ØŒ ÙˆÙŠØªØ­Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙˆØ§Ù„Ø£Ù…ÙˆØ§Ù„ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ (Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©). <br><br>  ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø«Ø§Ø¨ØªØ© <a href="">Ù‡Ù†Ø§</a> . <br>  Ø£Ø­Ø°Ø±Ùƒ Ù…Ù† Ø£Ù†Ù‡ ØªÙ… ØªØºÙŠÙŠØ± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙˆØ¬Ø¯Ø§Ø± Ø§Ù„Ø­Ù…Ø§ÙŠØ©. <br><br>  Ù‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡ ØŒ ØªØµØ­ÙŠØ­ Ø¬ÙŠØ¯! <br><br><h3 style=";text-align:right;direction:rtl">  Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…ÙÙŠØ¯Ø© </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">wiki.openwrt.org/toh/sagem/fast2704</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">radiohlam.ru/forum/viewtopic.phpØŸf=54&amp;t=3749</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">openocd.org</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">developer.mbed.org/handbook/CMSIS-DAP</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/rogerclarkmelbourne/Arduino_STM32/wiki/Programming-an-STM32F103XXX-with-a-generic-ST-Link-V2-programmer-from-Linux</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar402233/">https://habr.com/ru/post/ar402233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar402219/index.html">ÙƒÙŠÙ Ø³Ø§Ø¹Ø¯Øª ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø±Ù†Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù†Ø³Ø¯Ø§Ø¯</a></li>
<li><a href="../ar402221/index.html">Ø£Ø¹Ø²Ø§Ø¡ Ø§Ù„Ù…ØªØ³Ù„Ù„ÙŠÙ† ØŒ Ø£ÙŠÙ† Ø¬Ø²Ø§Ø²Ø§Øª Ø§Ù„Ø¹Ø´Ø¨ Ø§Ù„Ù…Ø³ØªÙ‚Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙƒØŸ</a></li>
<li><a href="../ar402225/index.html">Silicon Graphics O2 - Ù…Ø­Ø·Ø© ØµØºÙŠØ±Ø© Ø°Ø§Øª Ù…ÙŠØ²Ø§Øª Ø±Ø§Ø¦Ø¹Ø©</a></li>
<li><a href="../ar402229/index.html">ØªÙ‚ÙˆÙ… Ø§Ù„ØµÙŠÙ† Ø¨ØªØ·ÙˆÙŠØ± Ù…Ø±ÙƒØ¨Ø© ÙØ¶Ø§Ø¦ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ù„Ø·ÙŠØ±Ø§Ù† Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ù…Ø±</a></li>
<li><a href="../ar402231/index.html">Ø§Ø³Ø£Ù„ Ø¥ÙŠØ«Ø§Ù†: Ù‡Ù„ ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ¤Ø¯ÙŠ Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© Ø¥Ù„Ù‰ ØªÙƒØ±Ø§Ø± Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„ÙƒÙˆÙ†ØŸ</a></li>
<li><a href="../ar402235/index.html">Ù‡Ù†Ø§Ùƒ Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø®Ø±Ø§Ø¦Ø· Ø·Ø±ÙŠÙ‚ ØªÙØµÙŠÙ„ÙŠØ© Ù„Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© ØŒ ÙˆÙ„ÙŠØ³ Ù„Ù„Ø£Ø´Ø®Ø§Øµ</a></li>
<li><a href="../ar402237/index.html">Ù„Ù…Ø§Ø°Ø§ Intel MobileyeØŸ</a></li>
<li><a href="../ar402239/index.html">Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø¯ÙŠÙ†ÙŠØ©</a></li>
<li><a href="../ar402241/index.html">Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ø±Ø¯ÙˆÙŠÙ†Ùˆ PLC CONTROLLINO ØŒ Ø§Ù„Ø¬Ø²Ø¡ 1</a></li>
<li><a href="../ar402243/index.html">Ionistors Micro-UPS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>