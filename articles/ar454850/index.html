<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ค ๐ ุชุทูุฑ ุฎูุงุฑุฒููุฉ ูุงุญุฏุฉ ๐ฅ ๐ ๐๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฐ ุจุนุถ ุงูููุช ุ ุทูุจ ููู ุฒูููู ูุณุงุนุฏุชู ูู ูุดููุฉ ูุงุญุฏุฉ. ููุฏ ููุช ุจุญู ุงููุดููุฉ ูู ุ ููู ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุจุฏุง ูู ุฃูู ุนูุฏ ุญู ูุฐู ุงููุดููุฉ ุ ูููู ุดุฑุญ ุงูุนุฏูุฏ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุทูุฑ ุฎูุงุฑุฒููุฉ ูุงุญุฏุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454850/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ููุฐ ุจุนุถ ุงูููุช ุ ุทูุจ ููู ุฒูููู ูุณุงุนุฏุชู ูู ูุดููุฉ ูุงุญุฏุฉ.  ููุฏ ููุช ุจุญู ุงููุดููุฉ ูู ุ ููู ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุจุฏุง ูู ุฃูู ุนูุฏ ุญู ูุฐู ุงููุดููุฉ ุ ูููู ุดุฑุญ ุงูุนุฏูุฏ ูู ุฎูุงุฑุฒููุงุช ูุชูููุงุช ุงูุจุฑูุฌุฉ.  ูุชุธูุฑ ุฃูุถูุง ุชุณุฑูุน ููุช ุชูููุฐ ุงูุฎูุงุฑุฒููุฉ ูู 25 ุซุงููุฉ ุฅูู 40 ูููู ุซุงููุฉ. </p><a name="habracut"></a><br><h1 id="postanovka-zadachi" style=";text-align:right;direction:rtl">  ุจูุงู ุงููุดููุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูู ูุดุฑูุน ุดุฎุตู ุ ุงุญุชุงุฌ ุฒูููู ุฅูู ุฎูุงุฑุฒููุฉ ููุนุซูุฑ ุนูู ุฎูุณูู ููุทุน ููุฏูู ูุดุงุจููุง ูููุทุน ููุฏูู ูุนูู.  ูุงู ูู ุงูููุชุฑุถ ุฃู ูุชู ุชูุฏูุฑ ุงูุชุดุงุจู ุจุนุฏุฏ ูุทุงุจูุฉ ุงูุนูุงูุงุช ุงูููุดููุฉ.  ูููุง ุฒุงุฏุช ุนูุงูุงุช ุชุทุงุจู ุงูููุฏูู ุ ุฒุงุฏ ุชุดุงุจููุง.  ูู ูุฐุง ูููููุง ุงุณุชุฎูุงุต ุงูุนุฏูุฏ ูู ุงูุงุณุชูุชุงุฌุงุช ุนูู ุงูููุฑ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุฏูุฌ ุฌููุน ุงูุนูุงูุงุช ุงูููุฌูุฏุฉ ุฃุณูู ุงูููุฏูู ูู ูุฌููุนุฉ ูุงุญุฏุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุจุงูุชุฃููุฏ ูู ูููู ููุงู ูุซู ูุฐู ุงููุฌููุนุงุช ุฃูุซุฑ ูู ููุงุทุน ุงูููุฏูู ููุณูุง ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุงูููุฏูู ูุดุงุจููุง ูููุทุน ููุฏูู ุขุฎุฑ ูู ูุฌููุนุฉ ูุนููุฉ ูู ุงูุนูุงูุงุช ุ ูุณูููู ูุดุงุจููุง ูููุงุทุน ุงูููุฏูู ุงูุฃุฎุฑู ูู ูุฐู ุงููุฌููุนุฉ ุ </li></ul><br><p style=";text-align:right;direction:rtl">  ุงุชุถุญ ุฃูู ูููู ุงูุนูู ููุท ูุน ูุฌููุนุงุช ุงูุนูุงูุงุช.  ูู ุงูุฅุตุฏุงุฑ ุงูุฃูู ุ ูุฑุฑ ุฃุญุฏ ุงูุฒููุงุก ุชุฎุฒูู ุงูุนูุงูุงุช ูู ุฌุฏูู ุนูุงูุงุช: ูู ููุฏูู ูู ุฑุงุจุท ุฅูู ูุนุฑู ูุฌููุนุฉ ุงูุนูุงูุงุช ุ ูุงููุฌููุนุงุช ููุณูุง ุนุจุงุฑุฉ ุนู ุณูุณูุฉ ูู ุงูููู ุงูููุทููุฉ ุงูุชู ุชุดูุฑ ุฅูู ูุง ุฅุฐุง ูุงูุช ุงูุนูุงูุฉ ุงูููุงุจูุฉ ูุฏ ุชู ุชุนููููุง.  ูู C # ุ ุชุจุฏู ูุฌููุนุฉ ุงูุนูุงูุงุช ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TagsGroup</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[] InnerTags { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุชุฑุญ ุฃุญุฏ ุงูุฒููุงุก ุฃูู ูู ุงููููุน ูู ูููู ูุฏูู ุฃูุซุฑ ูู ููููู ููุทุน ููุฏูู ุ ูุนูุงูุงุช ูุฎุชููุฉ ูุง ุชุฒูุฏ ุนู 4000 ุ ููุญุตูู ุนูู ุญุณุงุจ ุฏุงุฆุฑู ุ ููููู ุฃู ุชุฃุฎุฐ 4096 = 2 ^ 12. <br>  ุซู ูููู ุชูุซูู ูุฆุฉ <code>TagsGroup</code> ุจุงูุดูู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TagsGroup</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TagsGroupLength = <span class="hljs-number"><span class="hljs-number">4096</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[] InnerTags { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TagsGroup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] innerTags</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (innerTags == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(innerTags)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (innerTags.Length != TagsGroupLength) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(innerTags)); } InnerTags = innerTags; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุงูุขู ุฅูู ุงูุชุญูู ูู ูุฌููุนุชู ุงูุนูุงูุงุช ููุชุดุงุจู.  ูู ุธู ุงูุธุฑูู ุงูุญุงููุฉ ุ ูุชุญูู ูุฐุง ุฅูู <code>InnerTags</code> ุจุณูุท ููุชุญูู ูู ุตุญุฉ ุงูุนูุงุตุฑ ุงูููุงุจูุฉ ูู ุตูููุงุช <code>InnerTags</code> ููุฌููุนุชูู ูู ุงูุนูุงูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasureSimilarity</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup a, TagsGroup b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a.InnerTags[i] &amp;&amp; a.InnerTags[i] == b.InnerTags[i]) result++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจูู ููุท ูุญุณุงุจ ุชุดุงุจู ูุฌููุนุฉ ุงูุนูุงูุงุช ุงููุฑุบูุจุฉ ูุน ูู ูุฌููุนุฉ ุญุงููุฉ ูุงุฎุชูุงุฑ ุงูุฎูุณูู ุงูุฃูุซุฑ ุชุดุงุจููุง.  ุฃูุง ูุถุนุช ููุณู ุดุฑุทุง ุขุฎุฑ ูุถูุงู ุงุณุชูุฑุงุฑ ุงูุนููุฉ ุ ุฃู  ูู ุงูุนููุฉ ุงูููุงุฆูุฉ ุ ุณูููู ููุงู ุฎูุณูู ูุฌููุนุฉ <code>MeasureSimilarity</code> ุฃุนุทุช ููุง <code>MeasureSimilarity</code> ุฃุนูู ูุชูุฌุฉ ุ ุจูููุง ุณูููู ููุฌููุนุงุช ุงูุนูุงูุงุช ุงูุชู ููุง ููุณ <code>MeasureSimilarity</code> ูุคุดุฑ ุฃุฏูู ููุคูุงุก ุงูุฐูู ูุฏููู ููุฑุณ ุฃูู ูู ุงููุฌููุนุฉ ุงูุญุงููุฉ ุงูุฃุตููุฉ.  ูููู ุงูุนุซูุฑ ุนูู ูุฒูุฏ ูู ุงูุชูุงุตูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุง: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://ru.wikipedia.org/wiki/Sustainable_Sort</a> . <br>  ูุญู ูุฐู ุงููุดููุฉ ุ ูุฑุฑุช <code>SimilarTagsCalculator</code> ูุฆุฉ <code>SimilarTagsCalculator</code> ุ ุฅููู ุงูููุฏ ุงูุฎุงุต ุจูุง: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">SimilarTagsCalculator</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SimilarTagsCalculator</span></span> { TagsGroup[] Groups { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SimilarTagsCalculator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup[] groups</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (groups == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(groups)); Groups = groups; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TagsGroup[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetFiftyMostSimilarGroups</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> resultLength = <span class="hljs-number"><span class="hljs-number">50</span></span>; <span class="hljs-comment"><span class="hljs-comment">//,          var list = new List&lt;TagsSimilarityInfo&gt;(resultLength); //      for (int groupIndex = 0; groupIndex &lt; Groups.Length; groupIndex++) { TagsGroup tagsGroup = Groups[groupIndex]; //      int similarityValue = TagsGroup.MeasureSimilarity(value, tagsGroup); // -  TagsSimilarityInfo newInfo = new TagsSimilarityInfo(groupIndex, similarityValue); //    ,     , if (list.Count == resultLength &amp;&amp; list[resultLength - 1].CompareTo(newInfo) == -1) { continue; //     } //   ,    -  int index = ~list.BinarySearch(newInfo); list.Insert(index, newInfo); // if (list.Count &gt; resultLength) { //    , //   , ..    list.RemoveAt(resultLength); } } // -   TagsGroup[] result = new TagsGroup[resultLength]; for (int i = 0; i &lt; resultLength; i++) { result[i] = Groups[list[i].Index]; } return result; } }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ููููู <code>TagsSimilarityInfo</code> : </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">TagsSimilarityInfo</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> TagsSimilarityInfo : IComparable&lt;TagsSimilarityInfo&gt;, IComparable { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Index { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Similarity { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TagsSimilarityInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> similarity</span></span></span><span class="hljs-function">)</span></span> { Index = index; Similarity = similarity; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsSimilarityInfo other</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Index == other.Index &amp;&amp; Similarity == other.Similarity; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> TagsSimilarityInfo other &amp;&amp; Equals(other); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetHashCode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">unchecked</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (Index * <span class="hljs-number"><span class="hljs-number">397</span></span>) ^ Similarity; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CompareTo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsSimilarityInfo other</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> similarityComparison = other.Similarity.CompareTo(Similarity); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> similarityComparison != <span class="hljs-number"><span class="hljs-number">0</span></span> ? similarityComparison : Index.CompareTo(other.Index); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CompareTo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ReferenceEquals(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, obj)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> TagsSimilarityInfo other ? CompareTo(other) : <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-string"><span class="hljs-string">$"Object must be of type </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">nameof</span></span></span></span><span class="hljs-string"><span class="hljs-subst">(TagsSimilarityInfo)}</span></span></span><span class="hljs-string">"</span></span>); } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุฃุนุฏุฏุช ุซูุงุซุฉ ูุนุงููุฑ ููุฐู ุงูุฎูุงุฑุฒููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนูุงุฑ ุนุดูุงุฆู ุชูุงููุง ุ ุฃู  ุนุฏุฏ ุงูุนูุงูุงุช ุงููุญุฏุฏุฉ ูู ุงููุฌููุนุงุช ุนุดูุงุฆู ููุฌููุนุฉ ุงูุนูุงูุงุช ุงูุชู ุณููุงุฑููุง ุนุดูุงุฆูุฉ ุฃูุถูุง ุ </li><li style=";text-align:right;direction:rtl">  ูุชุฒุงูุฏ ุนุฏุฏ ุงูุนูุงูุงุช ุงูุชู ุชู ุชุนููููุง ูู ูุฌููุนุงุช ุ ูุณูููู ุจููุงุฑูุชูุง ูุน ุงููุฌููุนุฉ ุงูุชู ุชู ุชุนููู ูู ุงูุนูุงูุงุช ูููุง  ุงุชุถุญ ุฃู ุจุนุถ ุงููุฌููุนุงุช ุงูุฃุฎูุฑุฉ ูู ุงูุนูุงูุงุช ูุฌุจ ุฃู ุชููู ุงูุฃูุณุจ ุ </li><li style=";text-align:right;direction:rtl">  ููุง ุฐูุฑ ุฃุนูุงู ุ ูููู ุนุฏุฏ ุงูุนูุงูุงุช ุงูููุดููุฉ ุขุฎุฐ ูู ุงูุชูุงูุต.  ุฃูู 50 ูุฌููุนุฉ ูู ุงูุนูุงูุงุช ุณุชููู ุฃูุซุฑ ููุงุฆูุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ุงููุชุงุฆุฌ ุงููุฑุฌุนูุฉ ูููููู ูุฌููุนุฉ: </p><br><p style=";text-align:right;direction:rtl">  BenchmarkDotNet = v0.11.5 ุ OS = Windows 10.0.17134.765 (1803 / April2018Update / Redstone4) <br>  Intel Core i7-6700 CPU 3.40GHz (Skylake) ู 1 CPU ู 8 ูุฑุงูุฒ ููุทููุฉ ู 4 ููู ูุนููุฉ <br>  ุงูุชุฑุฏุฏ = 3328126 ูุฑุชุฒ ุ ุงููุฑุงุฑ = 300.4694 ูุงููุซุงููุฉ ุ ุงููููุช = TSC <br>  .NET Core SDK = 3.0.100-preview5-011568 <br>  [ุงููุถูู]: .NET Core 3.0.0-preview5-27626-15 (CoreCLR 4.6.27622.75 ุ CoreFX 4.700.19.22408) ุ 64 ุจุช RyuJIT </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  25.054 ุซุงููุฉ </td><td>  0.1786 ุซุงููุฉ </td><td>  0.1670 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  AscendantTest </td><td>  4.180 ุซุงููุฉ </td><td>  0.0174 ุซุงููุฉ </td><td>  0.0162 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  DescendantTest </td><td>  4.147 ุซุงููุฉ </td><td>  0.0118 ุซุงููุฉ </td><td>  0.0104 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ุงูุชุดุงุฑ ููุช ุงูุชูููุฐ ูุจูุฑ ุฌุฏูุง ุ ุฅูู ุฌุงูุจ ุฃู 25 ุซุงููุฉ ุทูููุฉ ุฌุฏูุง ุ ูุง ููุงูู ุฒูููู ุนูู ุงูุงูุชุธุงุฑ ุทููููุง.  ูุฐูู ุฏุนููุง ููุนู ุงูุชุญุณููุงุช.  ุงูุขู ููุงู ุซูุงุซุฉ ูุฌุงูุงุช ุฑุฆูุณูุฉ ูุชุณุฑูุน ุงูุจุฑูุงูุฌ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุทุฑููุฉ <code>MeasureSimilarity</code> ุ </li><li style=";text-align:right;direction:rtl">  ุฎูุงุฑุฒููุฉ ูู ูุต ุงูุญููุฉ ูู <code>GetFiftyMostSimilarGroups</code> ุ </li><li style=";text-align:right;direction:rtl">  ุงูุญููุฉ ููุณูุง ูู <code>GetFiftyMostSimilarGroups</code> ุ </li></ul><br><p style=";text-align:right;direction:rtl">  ุณููุธุฑ ูู ูู ูู ุงูุงุชุฌุงูุงุช ุงูุซูุงุซุฉ ุนูู ุงูุชูุงูู. </p><br><h1 id="predskazanie-vetvleniy" style=";text-align:right;direction:rtl">  ูุฑุน ุงูุชูุจุค </h1><br><p style=";text-align:right;direction:rtl">  ุฃููุง ุ ุงููุธุฑ ูู ุทุฑููุฉ <code>MeasureSimilarity</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasureSimilarity</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup a, TagsGroup b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a.InnerTags[i] &amp;&amp; a.InnerTags[i] == b.InnerTags[i]) result++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุนูุงุฑ ุงูุณุงุจู ุ ูุงู ููุงู ุงุฎุชูุงู ูุจูุฑ ููุบุงูุฉ ูู ููุช ุงูุชุดุบูู ุจูู ุงูุงุฎุชุจุงุฑ ุงูุนุดูุงุฆู ูุฃู ุงุฎุชุจุงุฑ ูุชุณูุณู.  ุชู ุฅูุดุงุก ูุฌููุนุงุช ุนูุงูุงุช ููุงุฎุชุจุงุฑุงุช ุงููุชุณูุณูุฉ ุญุณุจ ุงููุจุฏุฃ ุงูุชุงูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชู ุชูุณูู ุงูุนุฏุฏ ุงููุทููุจ ูู ุงููุฌููุนุงุช ุฅูู ุญุฒู.  ุนุฏุฏ ุงูุญุฒู - ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูุนูุงูุงุช ูู ุงููุฌููุนุฉ ุ </li><li style=";text-align:right;direction:rtl">  ููู ูุฌููุนุฉ ูู ุญุฒูุฉ i-th ุ ุชู ุชุนููู ุนูุงูุงุช i ุงูุฃููู ุ </li></ul><br><p style=";text-align:right;direction:rtl">  ุงุชุถุญ ุฃู ูู ูุฌููุนุฉ ูู ุงูุนูุงูุงุช ูู ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุชุชููู ูู ุฌุฒุฃูู ูุชุชุงูููู ูู ุงูุนูุงูุงุช ุงูููุดููุฉ ูุบูุฑ ุงููุนุฑุถุฉ ููุฎุทุฑ.  ูุญุชูู <code>MeasureSimilarity</code> ุนูู ูู ุงููุชุทูุจุงุช ุงููุณุจูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชููุน ูุฑุน</a> ุงููุนุงูุฌ ููููู ูู ุชุฃุซูุฑ ูุจูุฑ ูู ุธู ุงูุธุฑูู ุงูุญุงููุฉ.  ููุชุญูู ูู ุฐูู ุ ูุง ุนููู ุณูู ูุชุงุจุฉ ูุนูุงุฑ ููุงุฑู ููุช ุชุดุบูู ุงูููุงุณ ุนูู ุงูุจูุงูุงุช ุงูุนุดูุงุฆูุฉ ูุงูุจูุงูุงุช ุงููุชุณูุณูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSimilaritySum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup[] tagsGroups</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (TagsGroup tagsGroup <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tagsGroups) { result += TagsGroup.MeasureSimilarity(tagsGroup, etalon); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } [Benchmark] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Sorted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; GetSimilaritySum(sortedGroups); [Benchmark] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Unsorted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; GetSimilaritySum(unsortedGroups);</code> </pre> <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  ุงูุชุตููู </td><td>  3.704 ุซุงููุฉ </td><td>  0.0411 ุซุงููุฉ </td><td>  0.0364 ุซุงููุฉ </td></tr><tr><td>  ูู ูุชู ูุฑุฒูุง </td><td>  8.211 ุซุงููุฉ </td><td>  0.0381 ุซุงููุฉ </td><td>  0.0338 ุซุงููุฉ </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ุชู ุงุฎุชุจุงุฑ ููููู ูุฌููุนุฉ ุนูุงูุงุช ุ ูููู ูู <code>Sorted</code> ูู ูู ูุฌููุนุฉ ูู ุงูุจุฏุงูุฉ ุ ูุงู ููุงู ุงูุนุฏูุฏ ูู ุงูุนูุงูุงุช ุงูููุดููุฉ ุ ููู ุซู ุชูู ุงูุชู ูู ูุชู ูุดููุง ุ ููู Unsorted ุ ุชู ูุดุฑ ููุณ ุงูุนุฏุฏ ูู ุงูุนูุงูุงุช ุงูููุดููุฉ ุจุดูู ุนุดูุงุฆู ูู ุงููุฌููุนุฉ. <br>  ุงููุฑู ูู 5 ุซูุงู ูุซูุฑ ููุฅุนุฌุงุจ ุ ููุฌุจ ุนูู ุดูุก ูุง.  ููุชุฎูุต ูู ุชุฃุซูุฑ ุชูุจุค ุงููุฑูุน ูุชุณุฑูุน ุงูุทุฑููุฉ ุจุดูู ุนุงู ุ ุชุญุชุงุฌ ุฅูู ุงูุชุฎูุต ูู ุงููุฑูุน ููุณูุง.  ููุฌุฏ ูุฑุน ูุงุญุฏ ููุท ูู <code>MeasureSimilarity</code> - ุงูุชุญูู ูู ุชุนููู ุงูุนูุงูุงุช ุงูููุงุจูุฉ ูู ูุฌููุนุชูู.  ุฏุนูุง ููุฏุฑ ุงูุญุงูุงุช ุงูุชู ุณุชููู ูููุง ุงูุญุงูุฉ ุตุญูุญุฉ ุ ูุฐูู ุณูุถุน ุฌุฏูููุง ูุญูููุฉ ุงูุญุงูุฉ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ [i] </th><th>  ุจ. ุงูุนูุงูุงุช ุงูุฏุงุฎููุฉ [i] </th><th>  ูุชูุฌุฉ </th></tr></thead><tbody><tr><td>  ุฒุงุฆู </td><td>  ุฒุงุฆู </td><td>  ุฒุงุฆู </td></tr><tr><td>  ุฒุงุฆู </td><td>  ุตุญูุญ </td><td>  ุฒุงุฆู </td></tr><tr><td>  ุตุญูุญ </td><td>  ุฒุงุฆู </td><td>  ุฒุงุฆู </td></tr><tr><td>  ุตุญูุญ </td><td>  ุตุญูุญ </td><td>  ุตุญูุญ </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ูุชุทุงุจู ุฌุฏูู ุงูุญูููุฉ ุชูุงููุง ูุน ุงูููุทู "AND" ุ ุฃู  ุชููู ุงููุชูุฌุฉ ุตุญูุญุฉ ุฅุฐุง ูููุท ุฅุฐุง ูุงูุช ููุชุง ุงูุนูุงูุชูู <code>if (a.InnerTags[i] &amp;&amp; b.InnerTags[i])</code> ุ ููููู ุชูููู ุงูุดุฑุท ุฅูู: <code>if (a.InnerTags[i] &amp;&amp; b.InnerTags[i])</code> .  ูููู ุจูุฐู ุงูุทุฑููุฉ ูุง ุชุฒุงู ุงูุญุงูุฉ ูุงุฆูุฉ.  ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุ ุณูู ูุชุฃูุฏ ูู ุฃู ุงูุฅุถุงูุฉ ุฅูู ุงููุชูุฌุฉ ูุชู ุชูููุฐูุง ุฏุงุฆููุง ุ ูุฐูู ูุนูุฏ ูุชุงุจุฉ ูุต ุงูุญููุฉ ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> t = a.InnerTags[i] &amp;&amp; b.InnerTags[i] ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>; result += t;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ุฒููุง ูู ูุชุฎูุต ูู ุงูุญุงูุฉ ููู ุงููุงูุน ุฌุนููุง ุงูุทุฑููุฉ ุฃุจุทุฃ.  ููู ุฃุตุจุญ ูู ุงููุงุถุญ ุงูุขู ุฃูู ุฅุฐุง <code>InnerTags</code> ุชุบููุฑ ููุน <code>InnerTags</code> ูู ููุทูู ุฅูู ุจุงูุช (1 ุตุญูุญ ุ ู 0 ุฎุทุฃ) ุ ูููููู ุงูุชุฎูุต ูู ุงูุญุงูุฉ ูู ุนุงูู ุงูุชุดุบูู ุงูุซูุงุซู.  ุซู <code>TagsGroup</code> ุงููุฆุฉ <code>TagsGroup</code> ูุงูุชุงูู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">TagsGroup</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TagsGroup</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TagsGroupLength = <span class="hljs-number"><span class="hljs-number">4096</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] InnerTags { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasureSimilarity</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup a, TagsGroup b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> t = a.InnerTags[i] &amp; b.InnerTags[i]; result += t; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TagsGroup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] innerTags</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (innerTags == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(innerTags)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (innerTags.Length != TagsGroupLength) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(innerTags)); } InnerTags = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[TagsGroupLength]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength; i++) { InnerTags[i] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) (innerTags[i] ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>); } } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ุงููุชุงุฆุฌ ุงูููุงุณูุฉ <code>MeasureSimilarity</code> ุงููุญุฏุซ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  ุงูุชุตููู </td><td>  3.180 ุซุงููุฉ </td><td>  0.0118 ุซุงููุฉ </td><td>  0.0111 ุซุงููุฉ </td></tr><tr><td>  ูู ูุชู ูุฑุฒูุง </td><td>  3.236 ุซุงููุฉ </td><td>  0.0622 ุซุงููุฉ </td><td>  0.0764 ุซุงููุฉ </td></tr></tbody></table></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููู:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  ุงูุชุตููู </td><td>  3.704 ุซุงููุฉ </td><td>  0.0411 ุซุงููุฉ </td><td>  0.0364 ุซุงููุฉ </td></tr><tr><td>  ูู ูุชู ูุฑุฒูุง </td><td>  8.211 ุซุงููุฉ </td><td>  0.0381 ุซุงููุฉ </td><td>  0.0338 ุซุงููุฉ </td></tr></tbody></table></div></div></div><br><p style=";text-align:right;direction:rtl">  ูููู ุจุงููุณุจุฉ ููุจูููุงุฑู ุงููุญุฏุซ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  3.219 ุซุงููุฉ </td><td>  0.0492 ุซุงููุฉ </td><td>  0.0436 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  AscendantTest </td><td>  3.223 ุซุงููุฉ </td><td>  0.0117 ุซุงููุฉ </td><td>  0.0110 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  DescendantTest </td><td>  3.422 ุซุงููุฉ </td><td>  0.0697 ุซุงููุฉ </td><td>  0.0999 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr></tbody></table></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููู:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  25.054 ุซุงููุฉ </td><td>  0.1786 ุซุงููุฉ </td><td>  0.1670 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  AscendantTest </td><td>  4.180 ุซุงููุฉ </td><td>  0.0174 ุซุงููุฉ </td><td>  0.0162 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  DescendantTest </td><td>  4.147 ุซุงููุฉ </td><td>  0.0118 ุซุงููุฉ </td><td>  0.0104 ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr></tbody></table></div></div></div><br><p style=";text-align:right;direction:rtl">  ูู ุฑุฃูู ุ ูุงู ุฑุงุฆุนุง ุจุงููุนู.  ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูุงููุง ููุชูุนูู ุจุฃู ูู ุงูุชุณุงุฑุน ุญุฏุซ ููุท ูุฃู ุงูููุน ุงูููุทูู ุชู ุงุณุชุจุฏุงูู ุจุงูุจุงูุช ุ ุฃุทููุช ูุนูุงุฑูุง ููุซู ูุฐู ุงูุญููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> t = a.InnerTags[i] &amp; b.InnerTags[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-number"><span class="hljs-number">1</span></span>) result += t;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฐู ูู ุงููุชุงุฆุฌ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th></tr></thead><tbody><tr><td>  ุงูุชุตููู </td><td>  3.760 ุซุงููุฉ </td><td>  0.0746 ุซุงููุฉ </td><td>  0.1541 ุซุงููุฉ </td></tr><tr><td>  ูู ูุชู ูุฑุฒูุง </td><td>  8.628 ุซุงููุฉ </td><td>  0.1699 ุซุงููุฉ </td><td>  0.2382 ุซุงููุฉ </td></tr></tbody></table></div><br><h1 id="upakovyvanie-dannyh" style=";text-align:right;direction:rtl">  ุชุบููู ุงูุจูุงูุงุช </h1><br><p style=";text-align:right;direction:rtl">  ูู ูุฌููุนุฉ ููุง ุงูุนุฏูุฏ ูู ุงูุนูุงูุงุช ุ ููุง ูููู ุชุฎููุถ ุนุฏุฏูุง ุจุฃู ุดูู ูู ุงูุฃุดูุงู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ููุงุฑูุฉ ุงูุนูุงูุงุช ุจููุณ ุงูููุฑุณ ุ ููุง ููููู ุชูุฏูู ุฅุฌุงุจุฉ ููุงุฆูุฉ ุฏูู ุงูุชุญูู ูู ุฌููุน ุงูุนูุงูุงุช.  ูุฐูู ุ ุนูู ุฃู ุญุงู ุ ุณูุชุนูู ุนูููุง ุงูุชูุฑุงุฑ ุนูู ูุฌููุนุฉ ุงูุนูุงูุงุช ุจุฃููููุง.  ุณูููู ูู ุงูุฑุงุฆุน ุฃู ุชููู ูุงุฏุฑูุง ุนูู ููุงุฒูุฉ ูุฐู ุงููููุฉ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ุจุญูุซ ูููู ูู ุงููููู ูุนุงูุฌุฉ ุนุฏุฉ ุนูุงูุงุช ูู ุนูููุฉ ุดุฑุทูุฉ ูุงุญุฏุฉ.  ููููู ุงูููุงู ุจุฐูู ูู ุฎูุงู ุงูุชูุงุฒู ุงูุญูููู ุ ุฃู ููููู ูู ุฎูุงู ุชุบููู ุงูุจูุงูุงุช ุงูุฎุงุต ุ ูุงูุฐู ุณูุณุชุฎุฏูู.  ุชูุซู ูู ุนูุงูุฉ ุงูุขู 1 ุฃู 0. ูู <code>result</code> ูุชู ุชุฌููุน ูุชูุฌุฉ ุงูุนูููุฉ "AND" ุจุจุณุงุทุฉ.  ูููู ููุณ ุงูุนูููุฉ ุงูููุทููุฉ ูููู ุชุทุจูููุง ููุณ ููุท ุนูู ุฃุฑูุงู ุจุช ูุงุญุฏุฉ.  ูุชูุญ ูู C # ุงูููุงู ุจุฐูู ุฏูู ุฃู ูุดุงูู ุญุชู ุฃุฑูุงู 64 ุจุช (ููููู ุงูููุงู ุจุงููุฒูุฏ ูู ุฎูุงู <code>BitArray</code> ุ ููู ูุฐุง ููุณ ูู ุงูุญุงู).  ุฅุฐุง ูููุง ุจุชูุซูู ูุฌููุนุชูู ูู ุงูุนูุงูุงุช ููุฌููุนุฉ ูู ุฃุฑูุงู 64 ุจุช ูุน ูุฌููุนุฉ ูุญุฏุงุช ุงูุจุช ุงูููุงุจูุฉ ุ ูุณูููู ูู ุงููููู ุชูููุฐ ุนูููุฉ "AND" ุนูู ูู ูุฌููุนุฉ ูู ูุฐู ุงูุฃุฑูุงู ุงูููููุฉ ูู 64 ุจุช.  ููุณ ูู ุงููุงุถุญ ูุงุฐุง ุชูุนู ุจุงููุชูุฌุฉ.  ุฏุนูุง ููุธุฑ ูุฑุฉ ุฃุฎุฑู ุฅูู ุฌุณู ุงูุญููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> t = a.InnerTags[i] &amp; b.InnerTags[i]; result += t;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฒุฏุงุฏ ุงููุชูุฌุฉ ุจููุฏุงุฑ 1 ูู ูู ูุฑุฉ t == 1 ููุง ุชุชุบูุฑ ุนูุฏูุง ุชููู t = = 0. ููุชูุฌุฉ ูุฐูู ุ ุณุชููู ุงููุชูุฌุฉ ูุณุงููุฉ ูุนุฏุฏ ุงููุฑุงุช ุงูุชู ุชููู ูููุง ูุชูุฌุฉ <code>a.InnerTags[i] &amp; b.InnerTags[i]</code> ูุงุญุฏุฉ.  ููููุง ูุฐูู ุ ุณูููู ูู ุงููููู ุญูุธ ุฌููุน ูุชุงุฆุฌ <code>a.InnerTags[i] &amp; b.InnerTags[i]</code> ูู ุจุนุถ ุงูุตููู ุ ููู ุงููุชูุฌุฉ ูุง ุชูุชุจ ุฅูุง ุนุฏุฏ ุงููุญุฏุงุช ูู ูุฐู ุงููุฌููุนุฉ.  ุนูุฏ ุฅุฌุฑุงุก ุงูุนูููุฉ AND ุนูู ุฃุฑูุงู ุฃูุซุฑ ูู n-bit ุ ุณุชููู ุงููุชูุฌุฉ n-bit ูุณุชููู ูุงููุฉ ููุท ููุนุฑูุฉ ุนุฏุฏ ุงูุจุชุงุช ุงูููุถูุนุฉ ุจูู n.  ูู ูุชุบูุฑ ุนุฏุฏ ูุญุฏุงุช ุงูุจุช ุงููุญุฏุฏุฉ ูู ุงูุฑูู ุ ููุง ูุนูู ุฃูู ููููู ุญุณุงุจ ูุฐู ุงูุฃุฑูุงู.  ููุณ ููุงู ููุทุฉ ูู ุงูุนุฏ ููุฏุฉ 64 ุจุช ุ ููุง  ูู ูุฌุฏ ุงููุซูุฑ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู.  ุจุงููุณุจุฉ ุฅูู 32 ุจุช ุ ููููู ุจุงููุนู ุงูุนุซูุฑ ุนูู ูุณุงุญุฉ ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุญุฏูุซุฉ ุ ูููู ูุฐุง ูุง ูุฒุงู ูุซูุฑูุง.  ูุง ูุตุนุจ ุงูุนุซูุฑ ุนูู ุฐุงูุฑุฉ ุฃูู ูู 16 ุจุช ุ ููู ุงูุญุณุงุจ ุณูููู ุทููููุง ูุณุจููุง.  ูุญู ูุณุท ุ ุฏุนููุง ูุญุณุจ ุฃุฑูุงู 8 ุจุช: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">GenerateCountOfSettedBits</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] CountOfSettedBits = GenerateCountOfSettedBits(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateCountOfSettedBits</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  result   i      i- . byte[] result = new byte[256]; //  ,      i   , //        int[] b = new int[8]; //     for (int i = 1; i &lt; 256; i++) { //       int settedBitsCount = 0; //,       int m = 1; //   for (int j = 0; j &lt; 8; j++) { //     b[j] += m; //  ,       2. m = b[j] &gt;&gt; 1; //        b[j] = b[j] &amp; 1; //,        settedBitsCount += b[j]; } result[i] = (byte) settedBitsCount; //   } return result; }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจุฏู ูููุดุฆ TagsGroup ููุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BucketSize = <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TagsGroup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] innerTags</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (innerTags == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(innerTags)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (innerTags.Length != TagsGroupLength) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(innerTags)); } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    InnerTags = new byte[TagsGroupLength / BucketSize]; //   for (int i = 0; i &lt; TagsGroupLength / BucketSize; i++) { //     for (int j = 0; j &lt; BucketSize; j++, index++) { //    2,      InnerTags[i] &lt;&lt;= 1; //    InnerTags[i] += (byte) (innerTags[index] ? 1 : 0); } } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏุฃุช <code>MeasureSimilarity</code> ูุชุจุฏู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasureSimilarity</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup a, TagsGroup b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength / BucketSize; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> t = a.InnerTags[i] &amp; b.InnerTags[i]; result += CountOfSettedBits[t]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุชุดุบูู ูุนูุงุฑ ูุจูุฑ ูุงูุชุฃูุฏ ูู ุฃู ูู ุดูุก ุฃูุถู: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  560.5 ูููู ุซุงููุฉ </td><td>  8.285 ูููู ุซุงููุฉ </td><td>  7.344 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  AscendantTest </td><td>  570.1 ูููู ุซุงููุฉ </td><td>  4.108 ูููู ุซุงููุฉ </td><td>  3.431 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  DescendantTest </td><td>  608.1 ูููู ุซุงููุฉ </td><td>  5.691 ูููู ุซุงููุฉ </td><td>  5.324 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ูู ูู ุงููููู ุฌุนู ุทุฑููุฉ <code>MeasureSimilarity</code> ุฃุณุฑุนุ  ุจุงูุทุจุน!  ููููุงู ุจุฐูู ุ ูููู ุฃู ูุฏุฑู ุญูููุฉ ุฃู ุณุฌูุงุช ุงูุฃุบุฑุงุถ ุงูุนุงูุฉ ุฃุตุจุญุช ุงูุขู ูู ุงูุบุงูุจ 64 ุจุช ุ ููุญู ูููู ุจุชูุตูู ุจูุงูุงุช ูู 8 ุจุช ูููุง.  ููููุงู ุจุฐูู ุ ูู ุจุฒูุงุฏุฉ ุญุฌู ุงูุญุฒูุฉ ุงูุชู ูุชู ูููุง ุชุบููู ุงูุนูุงูุงุช ุงูุฃุตููุฉ ุ ูู ุจุฒูุงุฏุฉ 64 ุจุช ูุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุทุฑู ุงููุงุฒูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BucketSize = <span class="hljs-number"><span class="hljs-number">64</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">ulong</span></span>[] InnerTags { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasureSimilarity</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup a, TagsGroup b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength / BucketSize; i++) { <span class="hljs-keyword"><span class="hljs-keyword">ulong</span></span> t = a.InnerTags[i] &amp; b.InnerTags[i]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; BucketSize / <span class="hljs-number"><span class="hljs-number">8</span></span>; j++) { result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุชุถุญ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  533.3 ูููู ุซุงููุฉ </td><td>  4.802 ูููู ุซุงููุฉ </td><td>  4.492 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  AscendantTest </td><td>  550.9 ูููู ุซุงููุฉ </td><td>  5.435 ูููู ุซุงููุฉ </td><td>  5.084 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  DescendantTest </td><td>  567.6 ูููู ุซุงููุฉ </td><td>  3.879 ูููู ุซุงููุฉ </td><td>  3.439 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ุซู ููููู ุชูุณูุน ุงูุญููุฉ ุงูุฏุงุฎููุฉ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">MeasureSimilarity</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasureSimilarity</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup a, TagsGroup b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength / BucketSize; i++) { <span class="hljs-keyword"><span class="hljs-keyword">ulong</span></span> t = a.InnerTags[i] &amp; b.InnerTags[i]; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; t &gt;&gt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; result += CountOfSettedBits[t &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> </div></div><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  370.5 ูููู ุซุงููุฉ </td><td>  2.802 ูููู ุซุงููุฉ </td><td>  2.484 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  AscendantTest </td><td>  395.8 ูููู ุซุงููุฉ </td><td>  2.682 ูููู ุซุงููุฉ </td><td>  2.509 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  DescendantTest </td><td>  419.5 ูููู ุซุงููุฉ </td><td>  3.352 ูููู ุซุงููุฉ </td><td>  2.971 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ูู ูู ุฃุณุฑุนุ  ูุนู!  ุฅุฐุง ููุช ุชุณุชุฎุฏู ุงูุงุจุชูุงุฑุงุช ูู .NET Core 3.0.  ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุฅุตุฏุงุฑ ูุง ูุฒุงู ููุฏ ุงููุนุงููุฉ ุ ุฅูุง ุฃูู ููุฐ ุงูุจุฏุงูุฉ ููุงู ุชุทุจูู ูุจุนุถ ุงูุนูุงุตุฑ ุงูุฏุงุฎููุฉ.  ูุญุชูู ุฏููู Intel Intrinsic ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>_mm_popcnt_u64</code></a> ุงูุฌููุฑู.  ูุงูุชู ุ ููุง ูู ููุถุญ: " <em>ุญุณุงุจ ุนุฏุฏ ุงูุจุชุงุช ุงููุนููุฉ ุฅูู 1 ูู ุนุฏุฏ ุตุญูุญ 64 ุจุช ุบูุฑ ููููุน ุ ูุฅุฑุฌุงุน ูุฐุง ุงูุนุฏุฏ ูู ุงูุชูููุช ุงูุตููู.</em> ".  ูุฐุง ูู ุจุงูุถุจุท ูุง ูุญุงูู ุชุญูููู!  ูู .NET Core 3.0 Preview 5 ุ ูุชู ุชุทุจูู ูุฐุง <code>System.Runtime.Intrinsics.X86.Popcnt.X64.PopCount</code> ูู <code>System.Runtime.Intrinsics.X86.Popcnt.X64.PopCount</code> (ููุง ูู ููุถุญ ุจุดูู ุตุญูุญ ูู ุชุนูููุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">a-tk ุ</a> ูุจู ุงุณุชุฎุฏุงู intrinsics ุ ูุฌุจ ุนููู ุงูุชุญูู ูู ุฃู ุงููุนุงูุฌ ูุฏุนููุง. ูู ูุฐู ุงูุญุงูุฉ ุ ุชุญูู ูู ุญุงูุฉ <code>System.Runtime.Intrinsics.X86.Popcnt.X64.IsSupported</code> ).  ุนูุฏ ุงุณุชุฎุฏุงูู ุ <code>MeasureSimilarity</code> ุฑูุฒ ุทุฑููุฉ <code>MeasureSimilarity</code> ุนูู <code>MeasureSimilarity</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasureSimilarity</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup a, TagsGroup b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TagsGroupLength / BucketSize; i++) { <span class="hljs-keyword"><span class="hljs-keyword">ulong</span></span> t = a.InnerTags[i] &amp; b.InnerTags[i]; result += (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) System.Runtime.Intrinsics.X86.Popcnt.X64.PopCount(t); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุช ุงูุชูููุฐ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  59.33 ูููู ุซุงููุฉ </td><td>  1.148 ูููู ุซุงููุฉ </td><td>  0.9585 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  AscendantTest </td><td>  74.87 ูููู ุซุงููุฉ </td><td>  1.479 ูููู ุซุงููุฉ </td><td>  1.9748 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr><tr><td>  DescendantTest </td><td>  119.46 ูููู ุซุงููุฉ </td><td>  2.321 ูููู ุซุงููุฉ </td><td>  2.8509 ูููู ุซุงููุฉ </td><td>  1.53 ูููู ุจุงูุช </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ูุซูุฑุฉ ููุฅุนุฌุงุจ. <br>  ูุง ุฃุนุฑู ุงูุทุฑู ุงูุชู ูููู ุฃู ุชุณุฑุน ูู <code>MeasureSimilarity</code> ุจุดูู ูุจูุฑ ููู ููุณ ุงูููุช ูุง ุชูุณุฏ ุฅูู ุญุฏ ูุจูุฑ ูุงุจููุฉ ุงููุฑุงุกุฉ.  ุฃุนุชูุฏ ุฃูู ููููู ุฅููุงุก ูุฐู ุงูุทุฑููุฉ. </p><br><h1 id="struktury-dannyh" style=";text-align:right;direction:rtl">  ููุงูู ุงูุจูุงูุงุช </h1><br><p style=";text-align:right;direction:rtl">  ุงูุขู <code>GetFiftyMostSimilarGroups</code> ูุน ูุต ุงูุญููุฉ ูู ุทุฑููุฉ <code>GetFiftyMostSimilarGroups</code> : </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">GetFiftyMostSimilarGroups</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TagsGroup[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetFiftyMostSimilarGroups</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> resultLength = <span class="hljs-number"><span class="hljs-number">50</span></span>; List&lt;TagsSimilarityInfo&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;TagsSimilarityInfo&gt;(<span class="hljs-number"><span class="hljs-number">50</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> groupIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; groupIndex &lt; Groups.Length; groupIndex++) { TagsGroup tagsGroup = Groups[groupIndex]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> similarityValue = TagsGroup.MeasureSimilarity(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, tagsGroup); TagsSimilarityInfo newInfo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TagsSimilarityInfo(groupIndex, similarityValue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list.Count == resultLength &amp;&amp; list[resultLength - <span class="hljs-number"><span class="hljs-number">1</span></span>].CompareTo(newInfo) == <span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = ~list.BinarySearch(newInfo); list.Insert(index, newInfo); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list.Count &gt; resultLength) { list.RemoveAt(resultLength); } } TagsGroup[] result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TagsGroup[resultLength]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; resultLength; i++) { result[i] = Groups[list[i].Index]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงุณูุญูุง ูู ุฃู ุฃุฐูุฑ ุจุฅูุฌุงุฒ ูุง ูุญุฏุซ ููุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฏุงุฎู ุงููุงุฆูุฉ ุ ูุชู ุชุฎุฒูู ูุงุฆูุฉ ูุฑุชุจุฉ ูู ุฃูุซุฑ ูู ุฎูุณูู ูุฌููุนุฉ ุนูุงูุงุช ููุงุณุจุฉ ุ ูู ุงููุงูุน ูู ุฃุตุบุฑ ุฅูู ุฃูุจุฑ ุ ุฅุฐุง ูุงุฑูุช <code>TagsSimilarityInfo</code> ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฏุฑุงุฌ ุงููุฌููุนุฉ ุงูุฌุฏูุฏุฉ ุงููุนููุฉ ูู ุงููุงุฆูุฉ ูุน ุงูุญูุงุธ ุนูู ุงููุฑุฒ ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุงู ุฃูุซุฑ ูู ุฎูุณูู ุนูุตุฑูุง ูู ุงููุงุฆูุฉ ุ ููู ุจุญุฐู ุงููุฌููุนุฉ ุงูุฃูู ุชุดุงุจููุง (ุณูููู ูุงุฆู ุงููุนูููุงุช ุงูุฎุงุต ุจู ูู ุงูุฃูุจุฑ ูุณูููู ูู ููุงูุฉ <code>list</code> ) ุ </li></ul><br><p style=";text-align:right;direction:rtl">  ุฃู  ุงุชุถุญ ุฃููุง ุจุญุงุฌุฉ ุฅูู ุงูุนุซูุฑ ุจุณุฑุนุฉ ุฃูุจุฑ ุนูุตุฑ ูู ุงููุฌููุนุฉ ุ ุญุชู ูุชููู ูู ุฅุฏุฑุงุฌ ูุญุฐู ุจุณุฑุนุฉ.  ูุญู ูุฐู ุงููุดุงูู ุ ููุงู ููุงูู ุงูุจูุงูุงุช ุงูุฎุงุตุฉ.  ุฃูู ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฌููุนุฉ</a> .  ูุชู ุฅุฌุฑุงุก ุงูุฅุฏุฑุงุฌ ุงูุฎุงุต ุจูุง ูู O (log N) ุ ูุงูุญุตูู ุนูู ุงูุญุฏ ุงูุฃูุตู ูู O (1) ุ ูุฅุฒุงูุฉ ุนูุตุฑ ูู O (log N).  ุงููุดููุฉ ุงููุญูุฏุฉ ูู ุฃูู ูุง ูููู ุชูุฑุงุฑ ุงููููุฉ ุจูุงุณุทุฉ ุงูุนูุงุตุฑ ุงููุชุฒุงูุฏุฉ ุฏูู ุชุนุฏูููุง.  ูุง ููุฌุฏ ูููุฉ ุซูุงุฆูุฉ ูู BCL ุ ูุฐูู ูุชุจุช ุจููุณู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">BinaryHeap</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BinaryHeap</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt;:<span class="hljs-title"><span class="hljs-title">IEnumerable</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; <span class="hljs-title"><span class="hljs-title">where</span></span> <span class="hljs-title"><span class="hljs-title">T</span></span> : <span class="hljs-title"><span class="hljs-title">IComparable</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> List&lt;T&gt; innerList; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinaryHeap</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> capacity</span></span></span><span class="hljs-function">)</span></span> { innerList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;T&gt;(capacity); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Count =&gt; innerList.Count; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T Max =&gt; innerList[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { innerList.Add(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = Count - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> parent = (i - <span class="hljs-number"><span class="hljs-number">1</span></span>) &gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; innerList[parent].CompareTo(innerList[i]) == <span class="hljs-number"><span class="hljs-number">-1</span></span>) { Swap(i, parent); i = parent; parent = (i - <span class="hljs-number"><span class="hljs-number">1</span></span>) &gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Swap</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { T temp = innerList[a]; innerList[a] = innerList[b]; innerList[b] = temp; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Heapify</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (;;) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> leftChild = (i &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) | <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rightChild = (i + <span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> largestChild = i; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (leftChild &lt; Count &amp;&amp; innerList[leftChild].CompareTo(innerList[largestChild]) == <span class="hljs-number"><span class="hljs-number">1</span></span>) { largestChild = leftChild; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rightChild &lt; Count &amp;&amp; innerList[rightChild].CompareTo(innerList[largestChild]) == <span class="hljs-number"><span class="hljs-number">1</span></span>) { largestChild = rightChild; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (largestChild == i) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } Swap(i, largestChild); i = largestChild; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveMax</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { innerList[<span class="hljs-number"><span class="hljs-number">0</span></span>] = innerList[Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; innerList.RemoveAt(Count - <span class="hljs-number"><span class="hljs-number">1</span></span>); Heapify(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetEnumerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> innerList.GetEnumerator(); } IEnumerator IEnumerable.GetEnumerator() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((IEnumerable) innerList).GetEnumerator(); } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูููู ุงูุนุซูุฑ ุนูู ุชุทุจูู ุงููุทุงุจู ููุฃุณููุจ <code>GetFiftyMostSimilarGroups</code> ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ูููุงุฏุฉ (ุงูุฑุงุจุท ุฃุฏูุงู). <br>  ุจุงูุฅุถุงูุฉ ุฅูู ุงููููุฉ ุ ูุฏ ุชุธูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุดุฌุฑุฉ ุจุญุซ ุซูุงุฆูุฉ</a> .  ูููู ุฃู ุชููุฑ ุดุฌุฑุฉ ุงูุจุญุซ ุงูุซูุงุฆูุฉ ุงููุชูุงุฒูุฉ ุฅุฏุฎุงููุง ูู O (log N) ุ ูุงูุญุตูู ุนูู ุงูุญุฏ ุงูุฃูุตู ูู O (log N) ุ ูุฅุฒุงูุฉ ุนูุตุฑ O (log N).  ุชุชูุซู ููุฒุฉ ูุฐุง ุงููููู ูู ุฃูู ูููู ุงูุชูุฑุงุฑ ุจุชุฑุชูุจ ุชุตุงุนุฏู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุชู ุชูููุฐ ุดุฌุฑุฉ ุงูุจุญุซ ุจุงูููู ุงูุฃุญูุฑ ูุงูุฃุณูุฏ ูู BCL ุฏุงุฎู SortedSet (ูู ุฅุทุงุฑ ูุจูุฑ ุ ูููู ุงูุญุตูู ุนูู ุงูุญุฏ ุงูุฃูุตู ุฃุจุทุฃ ุจูุซูุฑ ูู ูู .netcore 3.0 ููุฎุตุต ุงูุฐุงูุฑุฉ).  ูููู ุงูุนุซูุฑ ุนูู ุชุทุจูู <code>GetFiftyMostSimilarGroups</code> ูู SortedSet ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ููุฐู ุงูููุงูุฉ. <br>  ูุชุงุฆุฌ <code>GetFiftyMostSimilarGroups</code> ุชุทุจููุงุช <code>GetFiftyMostSimilarGroups</code> ุงูุซูุงุซุฉ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  ุฎูุงุฑุฒููุฉ ุงููุฑุฒ </th><th>  ูุชูุณุท </th><th>  ุชุฎุตูุต </th></tr></thead><tbody><tr><td>  RandomTest </td><td>  ูุงุฆูุฉ </td><td>  60.06 ูููู ุซุงููุฉ </td><td>  1704 ุจ </td></tr><tr><td>  RandomTest </td><td>  SortedSet </td><td>  65.46 ูููู ุซุงููุฉ </td><td>  24384 ุจ </td></tr><tr><td>  RandomTest </td><td>  ูููุฉ </td><td>  60.55 ูููู ุซุงููุฉ </td><td>  2912 ุจ </td></tr><tr><td>  AscendantTest </td><td>  ูุงุฆูุฉ </td><td>  75.42 ูููู ุซุงููุฉ </td><td>  1704 ุจ </td></tr><tr><td>  AscendantTest </td><td>  SortedSet </td><td>  161.12 ูููู ุซุงููุฉ </td><td>  9833424 ุจ </td></tr><tr><td>  AscendantTest </td><td>  ูููุฉ </td><td>  86.87 ูููู ุซุงููุฉ </td><td>  2912 ุจ </td></tr><tr><td>  DescendantTest </td><td>  ูุงุฆูุฉ </td><td>  119.23 ูููู ุซุงููุฉ </td><td>  880 ุจ </td></tr><tr><td>  DescendantTest </td><td>  SortedSet </td><td>  125.03 ูููู ุซุงููุฉ </td><td>  3024 ุจ </td></tr><tr><td>  DescendantTest </td><td>  ูููุฉ </td><td>  118.62 ูููู ุซุงููุฉ </td><td>  2088 ุจ </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ุงูุชูููุฐ ุงูุฃุตูู ูุน ูุฑูุฉ ูููุฒ ูู ูู ููุงู ุชูุฑูุจุง ูู ุงูููุช ุงูููุงุณุจ ุ ูุจุงูุชุฃููุฏ ูู ูู ููุงู ูู ุงูุฐุงูุฑุฉ.  ูุญุฏุซ ูุฐุง ุจุณุจุจ ุญูููุฉ ุฃูู ุจุงููุณุจุฉ ูุฎูุงุฑุฒููุฉ ูุน ูุฑูุฉ ุ ูุชู ุชูููุฐ ุงูุฅุฏุฑุงุฌ ูู O (log N) ููุจุญุซ ุ ูุชูุฑูุจุง O (1) ููุฅุฏุฑุงุฌ ุ ุจุณุจุจ  ูุญุฏุซ ูุณุฎ ูุฐุง ุงูุนุฏุฏ ุงูุตุบูุฑ ูู ุงูุนูุงุตุฑ ุจุณุฑุนุฉ ูุจูุฑุฉ ุ ุญูุซ ุชุญุตู ุนูู ุงูุญุฏ ุงูุฃูุตู ูู O (1) ุ ูุญุฐู ุนูุตุฑูุง ุฃูุถูุง ูู O (1) ุ ูุฃู  ูู .net ุ ูุชู ุงุณุชุจุฏุงู ุญุฐู ุงูุนูุตุฑ ุงูุฃุฎูุฑ ูู ุงููุฑูุฉ ุจูุชุงุจุฉ ูููุฉ ูุงุฑุบุฉ ููุนูุตุฑ ุงูุฃุฎูุฑ (ูู .net ูุง ุชุชู ูุชุงุจุฉ ุฃู ุดูุก ุนูู ุงูููุงูู).  ุฅุฐุง ูุงู ูุทููุจูุง ุนุฏู ุฅุนุทุงุก 50 ุ ูููู ุฏุนูุง ูููู 1000 ูู ุฃูุซุฑ ุงููุฌููุนุงุช ุงูููุงุซูุฉ ุ ุนูู ุงูุฃุฑุฌุญ ุ ูู ุชุนูู ุฎูุงุฑุฒููุฉ ูุน ูุฑูุฉ.  ูู ุงููุงูุน ุ ูู ูุฐุง ูู ุงูุชูููุฑ ุงููุถุงุฑุจุฉ ููููุง ุ ูุฃูู  ูุง ูุฒุงู ุจุฅููุงูู ุถุจุท ูู ูู ุงูุฎูุงุฑุฒููุงุช. </p><br><h1 id="mnogopotochnost" style=";text-align:right;direction:rtl">  ุฎุงุตูุฉ ุชุนุฏุฏ </h1><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจูู ูุญุงููุฉ ุชุญุณูู ุงูุญููุฉ ููุณูุง ูู <code>GetFiftyMostSimilarGroups</code> .  multithreading ููุท ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู.  ูุงูููุฑุฉ ูู ุชูุณูู ูุงุฆูุฉ ุงููุฌููุนุงุช ุจุฃููููุง ุฅูู ุนุฏุฉ ุญุฒู.  ูู ูู ุญุฒูุฉ ุ ุงุจุญุซ ุนู ุฃูุซุฑ ูู 50 ูุฌููุนุฉ ุนูุงูุงุช ูุชุดุงุจูุฉ ุ ุซู ุงุจุญุซ ุนู ุงููุฌููุนุงุช ุงูู50 ุงูุฃูุซุฑ ุชุดุงุจููุง. <br>  ุงูุฅุตุฏุงุฑ ูุชุนุฏุฏุฉ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู <code>GetFiftyMostSimilarGroups</code> ูุดุจู ูุฐุง: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">GetFiftyMostSimilarGroupsMultiThread</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TagsGroup[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetFiftyMostSimilarGroupsMultiThread</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> resultLength = <span class="hljs-number"><span class="hljs-number">50</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ,     const int threadsCount = 4; //   int bucketSize = Groups.Length / threadsCount; var tasks = new Task&lt;List&lt;TagsSimilarityInfo&gt;&gt;[threadsCount]; for (int i = 0; i &lt; threadsCount; i++) { int leftIndex = i * bucketSize; //    int rightIndex = (i + 1) * bucketSize; //    //    tasks[i] = Task&lt;List&lt;TagsSimilarityInfo&gt;&gt;.Factory.StartNew(() =&gt; GetFiftyMostSimilarGroupsMultiThreadCore(value, leftIndex, rightIndex)); } Task.WaitAll(tasks); //    var taskResults = new List&lt;TagsSimilarityInfo&gt;[threadsCount]; for (int i = 0; i &lt; threadsCount; i++) { taskResults[i] = tasks[i].Result; } //      return MergeTaskResults(resultLength, threadsCount, taskResults); }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  <code>GetFiftyMostSimilarGroupsMultiThreadCore</code>       <code>GetFiftyMostSimilarGroups</code> : </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">GetFiftyMostSimilarGroupsMultiThreadCore</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">List&lt;TagsSimilarityInfo&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetFiftyMostSimilarGroupsMultiThreadCore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TagsGroup </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> leftIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rightIndex</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> resultLength = <span class="hljs-number"><span class="hljs-number">50</span></span>; List&lt;TagsSimilarityInfo&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;TagsSimilarityInfo&gt;(resultLength); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> groupIndex = leftIndex; groupIndex &lt; rightIndex; groupIndex++) { TagsGroup tagsGroup = Groups[groupIndex]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> similarityValue = TagsGroup.MeasureSimilarity(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, tagsGroup); TagsSimilarityInfo newInfo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TagsSimilarityInfo(groupIndex, similarityValue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list.Count == resultLength &amp;&amp; list[resultLength - <span class="hljs-number"><span class="hljs-number">1</span></span>].CompareTo(newInfo) == <span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = ~list.BinarySearch(newInfo); list.Insert(index, newInfo); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list.Count &gt; resultLength) { list.RemoveAt(resultLength); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list; }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">     <code>MergeTaskResults</code> .   -    taskResults    . ,  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a> .     ,  <code>threadsCount</code> ,     :         ,     ,    ,    : </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">MergeTaskResults</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">TagsGroup[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MergeTaskResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> resultLength, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> threadsCount, List&lt;TagsSimilarityInfo&gt;[] taskResults</span></span></span><span class="hljs-function">)</span></span> { TagsGroup[] result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TagsGroup[resultLength]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] indices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[threadsCount]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; resultLength; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; TagsSimilarityInfo currentBest = taskResults[minIndex][indices[minIndex]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; threadsCount; j++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> current = taskResults[j][indices[j]]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.CompareTo(currentBest) == <span class="hljs-number"><span class="hljs-number">-1</span></span>) { minIndex = j; currentBest = taskResults[minIndex][indices[minIndex]]; } } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> groupIndex = currentBest.Index; result[i] = Groups[groupIndex]; indices[minIndex]++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> </div></div><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>indices</code>      <code>taskResults</code> ; </li><li style=";text-align:right;direction:rtl"> <code>minIndex</code> โ   <code>taskResults</code> ,         ; </li><li style=";text-align:right;direction:rtl"> <code>currentBest</code> โ -      ; </li><li style=";text-align:right;direction:rtl"> <code>current</code> โ -    ; </li></ul><br><p style=";text-align:right;direction:rtl">    : </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th> Method </th><th> Mean </th><th> Error </th><th> StdDev </th><th> Allocated </th></tr></thead><tbody><tr><td> RandomTest </td><td> 28.76 ms </td><td> 0.5677 ms </td><td> 1.414 ms </td><td> 1.4 KB </td></tr><tr><td> AscendantTest </td><td> 32.36 ms </td><td> 0.8930 ms </td><td> 2.591 ms </td><td> 1.4 KB </td></tr><tr><td> DescendantTest </td><td> 41.36 ms </td><td> 0.8908 ms </td><td> 2.626 ms </td><td> 1.4 KB </td></tr></tbody></table></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">     :</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th> Method </th><th> Mean </th><th> Error </th><th> StdDev </th><th> Allocated </th></tr></thead><tbody><tr><td> RandomTest </td><td> 25054 ms </td><td> 1786 ms </td><td> 1670 ms </td><td> 1.53 KB </td></tr><tr><td> AscendantTest </td><td> 4180 ms </td><td> 174 ms </td><td> 162 ms </td><td> 1.53 KB </td></tr><tr><td> DescendantTest </td><td> 4147 ms </td><td> 118 ms </td><td> 104 ms </td><td> 1.53 KB </td></tr></tbody></table></div></div></div><br><p style=";text-align:right;direction:rtl">            .   .    ,    ,       4  50. , ,   . </p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    </a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar454850/">https://habr.com/ru/post/ar454850/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar454830/index.html">3 ุฃูู ุงูุตูุงุช ููุฌุงุญ ูุฏูุฑ ุงูููุชุฌ: ุฃููุณุงูุฏุฑ ุจูููู</a></li>
<li><a href="../ar454832/index.html">ููุงุฐุง ุฃุณุจูุน ุงูุนูู ููุฏุฉ ุฃุฑุจุนุฉ ุฃูุงู ูู ูุตุฉ ุณูุฆุฉ</a></li>
<li><a href="../ar454834/index.html">ุงูุดุฑูุท ุงูุญููููุฉ ูุฏุฑุงุณุฉ ุงููุชุงุจุฉ ุจุงูููุณ ูุน ุงูุฎูุงุถ ุงูุฏุงูุน</a></li>
<li><a href="../ar454840/index.html">ุญุฐุฑุง ุงูุงูุชูุงู ุฅูู ููููุฏุง ูุน ุฒูุฌุชู ูุงูุฑูู ุงูุนูุงุฑู. ุงูุฌุฒุก 2: ุฅุนุฏุงุฏ ุงููุซุงุฆู ูุงูุชุญุฑู</a></li>
<li><a href="../ar454844/index.html">Odigest: ูุซูุฑุฉ ููุงูุชูุงู ูููุตูููู ููุฐุง ุงูุฃุณุจูุน</a></li>
<li><a href="../ar454856/index.html">ูุญู ูุญูู ุซุบุฑุงุช ุงูุชุญูู ูู ุตุญุฉ ุดูุงุฏุฉ SSL / TLS ูู ุจุฑูุงูุฌ ุบูุฑ ุงููุชุตูุญ</a></li>
<li><a href="../ar454860/index.html">ุฏุนูุง ูุณุงุนุฏ QueryProvider ูู ุงูุชุนุงูู ูุน ุงูุณูุงุณู ุงููุญุฑููุฉ</a></li>
<li><a href="../ar454864/index.html">ููู ูู ุนูููุงุช ุงูุชูููุฉ ูู ูุฎุชูู ุงูุดุฑูุงุช</a></li>
<li><a href="../ar454868/index.html">ุชุฑุฌูุฉ C ูู WebAssembly ุฏูู Emscripten</a></li>
<li><a href="../ar454872/index.html">ุบุฒุงุฉ ุงููุถุงุก: ุงูุขู ูู 512 ุจุงูุช (ุงููุฌูุน x86)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>