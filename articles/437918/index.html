<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéí üñ•Ô∏è ü¶ì Grabaci√≥n de video con expulsi√≥n autom√°tica de pausa mediante software gratuito con construcci√≥n de bicicletas üèáüèº ‚öõÔ∏è üë©üèæ‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los desarrolladores de habla rusa siempre tienen algo que contar: compartir algunas de sus experiencias y opiniones √∫nicas. Pero en el formato del vid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grabaci√≥n de video con expulsi√≥n autom√°tica de pausa mediante software gratuito con construcci√≥n de bicicletas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437918/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/_2/bs/h8/_2bsh8brje9tatdcz3fpvpv-l1g.jpeg" alt="Timeline Bike"></div><br><p>  Los desarrolladores de habla rusa siempre tienen algo que contar: compartir algunas de sus experiencias y opiniones √∫nicas.  Pero en el formato del video blog, debido a la alta complejidad de la grabaci√≥n, solo unos pocos lo hacen ahora. </p><br><p>  Debajo del gato, habl√≥ sobre su dif√≠cil camino para grabar y editar videos usando software libre, scripts de Ruby y herramientas improvisadas. <a name="habracut"></a></p><br><h1 id="teoriya">  Teor√≠a </h1><br><p> Comenc√© estudiando la teor√≠a de grabar blogs de video en videos de YouTube en ingl√©s.  Y a partir de materiales en idioma ruso, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este curso</a> result√≥ ser bastante √∫til (en particular, el m√≥dulo sobre video blogging y el primer video sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥mo</a> construir un marco desde el m√≥dulo sobre informes).  Tambi√©n me familiaric√© con fluidez con las caracter√≠sticas populares de los editores de video propietarios para acercarme m√°s conscientemente a la elecci√≥n de un editor gratuito. </p><br><p>  No me atrev√≠ a invertir en luz: no hay tiempo suficiente para estudiarlo y buscar la mejor opci√≥n, y un estudio superficial de opciones baratas habla de posibles rastrillos como parpadeo y mala reproducci√≥n del color.  Con la luz del d√≠a, no tuve grandes dificultades, es suficiente solo para videos cortos. </p><br><h1 id="videoredaktor">  Editor de video </h1><br><p>  Las herramientas de edici√≥n de video gratuitas existentes contienen una serie de problemas conocidos: desde soluciones fallidas en la interfaz de usuario y bloqueos que convierten la edici√≥n en infinito, hasta fugas de memoria, bloqueos y artefactos inesperados que aparecen solo despu√©s de la representaci√≥n final. </p><br><p>  Hay muchos problemas y tom√≥ tiempo seleccionar un editor de video y estudiar sus errores, solo para aprender c√≥mo lidiar con cosas b√°sicas.  Finalmente, se detuvo en <strong>Pitivi</strong> , simplemente porque pas√≥ mucho tiempo buscando y experimentando. </p><br><h2 id="zvuk-iz-flatpak">  Sonido de Flatpak </h2><br><p>  El m√©todo de instalaci√≥n compatible para Pitivi requiere Flatpak.  Por un tiempo lo rode√©, porque  No tengo systemd y PulseAudio en mi sistema. </p><br><p>  Resulta que systemd <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no</a> ha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sido requerido por</a> mucho tiempo.  Bueno, PulseAudio: <s>tuve que instalarlo y configurarlo</s> , fue m√°s f√°cil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">modificar Flatpak</a> .  Pero ser√≠a m√°s correcto poner PulseAudio, es un poco tedioso y no est√° claro si esperar problemas con la grabaci√≥n de sonido en el hardware existente o no. </p><br><p>  Instale Pitivi, elimine las configuraciones de PulseAudio, ejecute: </p><br><pre><code class="bash hljs">$ sudo flatpak remote-add --<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo $ sudo flatpak install flathub org.pitivi.Pitivi $ sudo find {/var/lib,~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share}/flatpak/runtime -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name <span class="hljs-string"><span class="hljs-string">'*pulseaudio*.conf'</span></span> -delete $ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=pitivi org.pitivi.Pitivi</code> </pre> <br><p>  No hay sonido  Intentemos ejecutar algo m√°s simple, por ejemplo <code>aplay</code> : </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak/app/org.pitivi.Pitivi/x86_64 -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -path <span class="hljs-string"><span class="hljs-string">'*/files/bin'</span></span> -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp `<span class="hljs-built_in"><span class="hljs-built_in">which</span></span> aplay` {} \; $ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=aplay org.pitivi.Pitivi /dev/urandom ALSA lib dlmisc.c:162:(snd_dlsym_verify) unable to verify version <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> symbol _snd_pcm_empty_open ALSA lib dlmisc.c:283:(snd1_dlobj_cache_get) symbol _snd_pcm_empty_open is not defined inside [<span class="hljs-built_in"><span class="hljs-built_in">builtin</span></span>] aplay: main:828: audio open error: No such device or address</code> </pre> <br><p>  Probablemente <code>alsa-lib</code> incluido en Flatpak fue compilado con <code>--with-versioned</code> .  Una soluci√≥n r√°pida es reemplazar <code>libasound.so</code> sistema uno: </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name libasound.so.2.0.0 -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /usr/lib64/libasound.so.2.0.0 {} \; $ find ~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name libasound.so.2.0.0 -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /usr/lib64/libasound.so.2.0.0 {} \; <span class="hljs-comment"><span class="hljs-comment">#      -</span></span></code> </pre> <br><p>  Para m√≠, esto no fue suficiente: </p><br><pre> <code class="bash hljs">$ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=aplay org.pitivi.Pitivi /dev/urandom ALSA lib /var/tmp/portage/media-libs/alsa-lib-1.1.6-r1/work/alsa-lib-1.1.6/src/pcm/pcm_direct.c:1943:(snd1_pcm_direct_parse_open_conf) The field ipc_gid must be a valid group (create group audio) aplay: main:828: audio open error: Invalid argument</code> </pre> <br><p>  Necesita otra configuraci√≥n de ALSA: </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -name etc -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /etc/asound.conf {} \; $ find ~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -name etc -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /etc/asound.conf {} \; <span class="hljs-comment"><span class="hljs-comment">#      - $ flatpak run --device=alsa --branch=stable --arch=x86_64 --command=aplay org.pitivi.Pitivi /dev/urandom</span></span></code> </pre> <br><p>  Finalmente, puedes usar Pitivi. </p><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n de representaci√≥n para Pitivi que vino como resultado</b> <div class="spoiler_text"><ul><li>  formato de contenedor: MP4 </li><li>  video <br><ul><li>  c√≥dec x264enc </li><li>  avanzado <br><ul><li>  pase / tipo de codificaci√≥n: cuantificador constante </li><li>  cuantificador constante: 18 </li><li>  velocidad de bits: 16384 kbit / s </li><li>  calidad de velocidad preestablecida: ultrarr√°pida </li><li>  ajuste preestablecido psicovisual: pel√≠cula </li></ul></li></ul></li><li>  audio <br><ul><li>  libav ALAC </li></ul></li><li>  bajo mi propio riesgo y miedo uso "Nunca renderizar desde archivos proxy" </li><li>  todo lo dem√°s es el predeterminado </li></ul></div></div><br><h2 id="drugie-effekty">  Otros efectos </h2><br><p>  Hago algunos efectos de animaci√≥n para el texto usando el screencast de las p√°ginas de pantalla completa, presentado usando revelar.js y animate.css.  En revelar.js para algunas diapositivas agrego un sonido de transici√≥n: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font-size: 5em"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">audio</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-autoplay</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/path/to/sound.wav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">audio</span></span></span><span class="hljs-tag">&gt;</span></span> #1 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Result√≥ ser importante grabar un screencast con 60 FPS si el texto es muy grande.  Screencast hace esto: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh SOUND_INPUT=shared_input_loopback CHANNELS=2 SOUND_RATE=48000 FRAMERATE=60 DRAW_MOUSE=0 VIDEO_SIZE=$(xdpyinfo | awk '/dimensions:/ { print $2; exit }') OUTPUT="${HOME}/video/screen/$(date --rfc-3339=seconds).mp4" ffmpeg \ -thread_queue_size 512 \ -video_size "${VIDEO_SIZE}" \ -framerate "${FRAMERATE}" \ -f x11grab \ -draw_mouse "${DRAW_MOUSE}" \ -i :0.0+0,0 \ -thread_queue_size 512 \ -f alsa \ -ac "${CHANNELS}" \ -i "${SOUND_INPUT}" \ -ar "${SOUND_RATE}" \ -vcodec libx264 -preset ultrafast -crf 18 \ -acodec alac \ -f ipod \ "${OUTPUT}"</span></span></code> </pre> <br><p>  En mi caso, <code>shared_input_loopback</code> es el dispositivo de la <a href="">configuraci√≥n asound.conf</a> . </p><br><p>  A√∫n as√≠, este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">complemento</a> sobre <code>ffmpeg</code> para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">transiciones</a> entre clips fue √∫til. </p><br><h1 id="zapis-video">  Grabaci√≥n de video </h1><br><p>  A la mano estaba un tel√©fono Meizu MX4, en el que decid√≠ usar una c√°mara frontal y grabar usando Open Camera.  Tom√≥ alg√∫n tiempo entrenarse para mirar a la c√°mara y controlar su posici√≥n en el espacio sin cometer errores t√≠picos, como cortarse la cabeza.  Al mismo tiempo, habla con bastante claridad, en voz alta, gesticula y genera al menos alg√∫n tipo de expresi√≥n facial.  Pero eso fue solo el comienzo. </p><br><p>  ¬øQu√© me impuls√≥ a hacer un corte de video autom√°tico, e incluso en la etapa de grabaci√≥n? </p><br><ol><li>  Pitivi frena y corrige errores al editar, especialmente cuando se usa la herramienta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ripple Move / Edit</a> , lo que lleva a la necesidad de reiniciar peri√≥dicamente Pitivi. </li><li>  Para m√≠, el proceso de cortar videos manualmente es una de las cosas m√°s aburridas.  Est√° claro que no es muy posible automatizar completamente (al menos sin un escenario en el que las pausas necesarias para comprender lo que se dijo no se indican expl√≠citamente), pero al menos este proceso puede optimizarse. </li></ol><br><p>  Estos son los requisitos para la futura bicicleta que me puse: </p><br><ol><li>  Grabe video usando un tel√©fono Android y audio usando una computadora port√°til. </li><li>  Control de enfoque de c√°mara. </li><li>  Posibilidad de detener la grabaci√≥n para guardar o eliminar el √∫ltimo fragmento grabado. </li><li>  Descargue el video del tel√©fono a trav√©s de USB, con intentos repetidos y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">reanude</a> , sin bloquear la capacidad de grabar el siguiente fragmento. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sincronizaci√≥n de</a> sonido. </li><li>  Determinaci√≥n de la presencia de voz y pausas de lanzamiento. </li><li>  La capacidad de reproducir r√°pidamente los √∫ltimos videoclips grabados, con pausas ya pausadas. </li></ol><br><p>  ¬øPor qu√© tanto control sobre los dispositivos durante la fase de grabaci√≥n?  ¬øPor qu√© no simplemente comenzar a grabar durante varias horas seguidas y luego editarlo?  Hay muchas razones: </p><br><ol><li>  Falta banal de espacio en disco. </li><li>  La tendencia del tel√©fono a sobrecalentarse y descargarse r√°pidamente cuando graba durante mucho tiempo. </li><li>  Mal funcionamiento de la pantalla t√°ctil debido a que el tel√©fono est√° en el agua.  Pero de alguna manera necesitas controlar el enfoque.  S√≠, y la siguiente presi√≥n crear√≠a vibraciones innecesarias del dispositivo. </li><li>  Problemas al cargar archivos grandes debido a la poca potencia del puerto USB en mi computadora port√°til.  En teor√≠a, esto se puede resolver utilizando un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">concentrador USB</a> con alimentaci√≥n adicional.  Usar una red es demasiado lento. </li><li>  El deseo de revisar r√°pidamente los √∫ltimos fragmentos grabados para asegurarse de que no haya errores y reescribirlos r√°pidamente antes de que el planeta gire en el lugar equivocado frente al sol. </li><li>  El deseo de lanzar duplicados obviamente malos tan pronto como sea posible para no perder tiempo y espacio en disco en el futuro. </li><li>  Necesita sincronizar audio largo grabado por tel√©fono y computadora port√°til.  Esto puede causar una falta de coincidencia con el video debido al hecho de que los cuadros de las transmisiones de audio se expulsan tanto al grabar desde una computadora port√°til como al grabar desde un tel√©fono (que probablemente pueda resolver de alguna manera, pero no quiere arriesgarse y perder el tiempo experimentando).  Es m√°s f√°cil sincronizar peque√±os fragmentos por separado, luego, una posible desincronizaci√≥n no se notar√°. </li><li>  La necesidad de manejar una situaci√≥n en la que Open Camera reinicia la grabaci√≥n debido a un tama√±o de video de 4 GiB.  Probablemente tendr√≠a que modificar Open Camera.  Si esta restricci√≥n en 4 GiB no se puede eliminar o aumentar, tendr√≠a que lanzar un evento en la computadora port√°til para notar que la grabaci√≥n se reinici√≥ en este lugar. </li></ol><br><p>  Es m√°s f√°cil grabar en peque√±os fragmentos y hacer una automatizaci√≥n primitiva de todo lo que es posible.  Ruby fue elegido como el idioma principal para desarrollar una bicicleta.  De hecho, ahora probablemente elegir√≠a Python, pero en ese momento solo estaba aprendiendo Ruby, y estoy ejecutando nuevos idiomas para m√≠ en experimentos tan extra√±os. </p><br><h2 id="avtomaticheskaya-narezka-video">  Corte autom√°tico de video </h2><br><p>  La informaci√≥n en la red sobre este tema no es mucha.  Sobre la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">investigaci√≥n que Stanford y Adobe</a> recordaron m√°s tarde (lo cual no da miedo, todav√≠a necesito una soluci√≥n menos sofisticada). </p><br><p>  El corte se produce en 2 etapas: en la etapa de grabaci√≥n, gruesa, en la etapa de renderizado, m√°s precisa, con la capacidad de corregir manualmente demasiados fragmentos recortados.  Rough implementado usando <abbr title="Detecci√≥n de actividad de voz">VAD</abbr> de WebRTC.  M√°s preciso, con la ayuda de Google Speech (m√°s espec√≠ficamente, con la ayuda de una modificaci√≥n del proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">autosub</a> , para generar subt√≠tulos para el video).  Estoy seguro de que habr√° soluciones m√°s exitosas, simplemente result√≥ ser lo mejor de lo que logramos hacer r√°pidamente. </p><br><p>  Si desea desarrollar algo como esto usando <code>ffmpeg</code> , <code>ffmpeg</code> con el principio de no intentar hacer demasiado en una llamada a <code>ffmpeg</code> .  Cree archivos intermedios y controle cada paso para que no tenga que buscar errores extra√±os que no sean de Google, como un corte incorrecto o un efecto no aplicado. </p><br><p>  Comienzo la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>desgracia resultante de</strong></a> alguna manera as√≠: </p><br><pre> <code class="plaintext hljs">$ bin/vlog-recorder \ --project /path/to/project \ --debug true \ --sound-settings ' --device=usb_card --format=dat' #   arecord r - (RE)START recording s - STOP and SAVE current clip S - STOP and SAVE current clip, don't use auto trimming d - STOP and DELETE current clip p - PLAY last saved clip f - FOCUS camera on center h - show HELP q / Ctrl+C - QUIT [ stopped ] [ battery: 100% / 36¬∞C ]</code> </pre> <br><p>  Necesito los argumentos para que <code>arecord</code> indique expl√≠citamente el dispositivo para evitar las fallas peri√≥dicas que probablemente se deban al complemento dsnoop basado en ALSA.  Tambi√©n puede abrir el registro para controlar el proceso de descarga de archivos desde el tel√©fono: <code>tail -f /path/to/project/log.txt</code> . </p><br><p>  Renderice r√°pidamente en un video para la vista previa, puede hacer esto: </p><br><pre> <code class="bash hljs">$ bin/vlog-render \ --project /path/to/project \ --language ru \ --video-filters <span class="hljs-string"><span class="hljs-string">'hqdn3d,hflip,curves=psfile=/path/to/curves.acv,vignette'</span></span> \ --speed 1.3 \ --fps 60 \ --preview <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><p>  El argumento <code>--video-filters</code> son los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">filtros</a> pasados ‚Äã‚Äãa <code>ffmpeg</code> .  El video se abrir√° autom√°ticamente en el reproductor <code>mpv</code> . </p><br><p>  Tambi√©n puede intercambiar o desechar los duplicados innecesarios restantes editando el archivo <code>/path/to/project/render.conf</code> aparecido, que se puede detectar gracias a la voz reconocida.  La idea, por cierto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no</a> es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nueva</a> .  All√≠ puede acelerar fragmentos individuales y editar cortes de video fallidos, si los hay.  La pr√≥xima vez, <code>vlog-render</code> a leer <code>render.conf</code> y aplicar√° los cambios. </p><br><p>  Para preparar fragmentos para un editor de video, debe especificar <code>--preview false</code> .  Adem√°s de los fragmentos que se encontrar√°n en la <code>output</code> , los fusionar√° en un archivo <code>output.mp4</code> , porque inicialmente no estaba seguro: </p><br><ul><li>  voy a usar peque√±os clips en pitivi </li><li>  o suba un video largo para cortarlo m√°s (para que pueda aplicar una serie de efectos al "grupo" de clips). </li></ul><br><p>  Principalmente uso la primera opci√≥n.  El segundo fue √∫til en un video con poca luz: all√≠ utilic√© solo una pieza de <code>output.mp4</code> .  Para la segunda opci√≥n, el script <code>vlog-play-segments</code> tambi√©n puede ser √∫til: con √©l puede ver r√°pidamente todas las pausas entre clips en orden descendente de duraci√≥n.  Esto ayudar√° a <code>render.conf</code> con mayor precisi√≥n <code>render.conf</code> y a ahorrar tiempo m√°s adelante al editar este largo video en Pitivi. </p><br><p>  Los peque√±os clips resultantes se pueden descargar una vez por l√≠nea de tiempo en Pitivi: seleccione todos los clips importados y arr√°strelos usando arrastrar y soltar. </p><br><h2 id="kreplenie-dlya-telefona">  Soporte para tel√©fono </h2><br><p>  No quer√≠a buscar un soporte para tel√©fono adecuado, y mis manos ya se rascaron la cara para grabar al menos algo.  Tomamos un trozo de cart√≥n que viene a mano y cortamos el soporte del tel√©fono para nuestras necesidades: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kl/u8/tj/klu8tjf8huzxyqf71-ci7xnah_w.jpeg" alt="Soporte para tel√©fono"></div><br><p>  El soporte est√° montado en una pantalla de computadora port√°til para minimizar la distancia entre el gui√≥n y la c√°mara. </p><br><h1 id="zapis-zvuka">  Grabaci√≥n de sonido </h1><br><p>  El sonido aceptable es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">muy cr√≠tico</a> .  A la mano hab√≠a un micr√≥fono Boya BY-M1.  Aunque se anuncia como un micr√≥fono omnidireccional, en la pr√°ctica solo se obtiene un buen sonido cuando se usa como unidireccional. </p><br><p>  Es a√∫n m√°s f√°cil hacer que el micr√≥fono se pare: tomamos una botella de jugo de granada que viene a la mano, un rollo de cinta adhesiva y armamos este constructor: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xp/qt/1u/xpqt1ue6ikhdrwwh6oqr1x83vo0.jpeg" alt="Soporte de micr√≥fono"></div><br><p>  Tambi√©n puede colocar una toalla debajo de este dise√±o para suprimir parte de las vibraciones de la mesa y al mismo tiempo ajustar la altura. </p><br><h2 id="zvukovaya-karta">  Tarjeta de sonido </h2><br><p>  En mi caso, este es ASUS Xonar U3.  Sin embargo, result√≥ que no es compatible con dicho micr√≥fono: el micr√≥fono tiene un enchufe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CTIA</a> dise√±ado para tel√©fonos.  El problema fue resuelto por el adaptador en los enchufes TRS para micr√≥fono y auriculares.  Y encontrarlo no fue f√°cil: los fabricantes de tales adaptadores rara vez escriben detalles.  En mi caso, un Cablexpert CCA-418W ayud√≥. </p><br><p>  Otro problema con esta tarjeta es el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desplazamiento de CC</a> en el canal derecho al grabar.  Lo cual no interfiere, porque  Estoy grabando de todos modos en mono.  Y para el software que no le permite configurar mono, <a href="">redirig√≠ un</a> canal bueno a un canal malo usando ALSA. </p><br><p>  Esta tarjeta tambi√©n teme el sobrecalentamiento.  Debe mantenerlo alejado del refrigerador, de lo contrario, disminuir√° la velocidad y grabar√° el sonido en tirones. </p><br><h2 id="obrabotka-zvuka">  Procesamiento de sonido </h2><br><p>  Edito el sonido en los auriculares (en mi caso es el Pioneer SE-M390), a un volumen m√°s alto que aquel en el que generalmente escucho m√∫sica.  El algoritmo es algo como esto: </p><br><ol><li>  Usando Pitivi, renderizo por separado el sonido (usando todos los mismos ALAC y MP4).  A menudo hago varias pistas separadas, eligiendo capas espec√≠ficas en Pitivi y eliminando temporalmente las innecesarias. </li><li>  Si los archivos recibidos se cargan inmediatamente en Audacity, <strong>perderemos el</strong> estiramiento / compresi√≥n de la transmisi√≥n de audio, lo que puede provocar que el video y el audio no est√©n sincronizados.  Lo que no es obvio, esto no sucede con todos los videos.  Para evitar que esto suceda, simplemente aplique estos estiramientos / compresi√≥n: <code>ffmpeg -async 1 -i input.mp4 output.flac</code> </li><li>  Descarga todas las pistas en Audacity.  Agregue m√∫sica de fondo si es necesario. </li><li>  Para todas las pistas, ajuste el volumen deseado usando Gain. </li><li>  Para la pista con la voz, aplique los efectos de Reducci√≥n de ruido (en mi caso doble), Compresor y Ecualizaci√≥n de acuerdo con los consejos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este video</a> . </li><li>  Ecualizamos y aumentamos el volumen de la pista con la voz.  Una de las formas cl√°sicas es Normalizar, Amplificar, Limitar y Normalizar nuevamente, pero con este enfoque todav√≠a no he podido obtener la calidad de sonido deseada.  <s>Act√∫o temporalmente de esta manera: primero hago la ganancia de toda la pista para que la parte m√°s fuerte suene sin sobrecargas, y luego aplico manualmente Amplify para fragmentos individuales.</s>  <strong>Actualizaci√≥n</strong> : Otra forma poderosa es RMS Normalizar, Limitar y Normalizar normal.  La configuraci√≥n de RMS Normalizar y Limitador se puede tomar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde aqu√≠</a> .  Sin embargo, este m√©todo no me fue √∫til, porque  de todos modos, decid√≠ cambiar a otro micr√≥fono (Zoom H1n) con el Limitador incorporado, que me conviene (por lo que con el nuevo micr√≥fono es probable que solo tenga que normalizar normal, en lugar de todas estas cosas). </li><li>  El micr√≥fono a veces graba sonido con algunos defectos que parecen clics.  Se pueden eliminar con el efecto Edici√≥n m√∫ltiple de herramienta espectral.  Muy a menudo es necesario aplicarlo varias veces seguidas para el √°rea seleccionada, usando Ctrl + R.  <strong>Actualizaci√≥n</strong> : gracias al nuevo micr√≥fono, descubr√≠ que estos defectos est√°n conectados con algo externo, lo m√°s probable es que sea una combinaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ruido en la boca</a> y otros sonidos extra√±os. </li><li>  Exportamos desde Audacity a FLAC y fusionamos todo en un solo archivo: <code>ffmpeg -i sound.flac -an -i video.mp4 -c copy output.mkv</code> </li><li>  Al menos el primer video que prob√© en diferentes vol√∫menes y diferentes dispositivos. </li></ol><br><h1 id="rezultat">  Resultado </h1><br><p>  Aprovechando la oportunidad para aflojar las tuercas de las reglas, los invito a visitar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>canal de YouTube</strong></a> resultante, donde comparto ideas sobre el estudio efectivo de la programaci√≥n y las disciplinas relacionadas. </p><br><p>  ¬°Buena suerte en el desarrollo de programas y la creaci√≥n de video blogs! </p><br><p>  <strong>Actualizaci√≥n</strong> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tradujo</a> este art√≠culo para su blog en ingl√©s. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/437918/">https://habr.com/ru/post/437918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../437908/index.html">Arduino colabora con Google e introduce la certificaci√≥n.</a></li>
<li><a href="../437910/index.html">Civilizaci√≥n de primavera, 1/5</a></li>
<li><a href="../437912/index.html">Un peque√±o cuaderno para un administrador del sistema</a></li>
<li><a href="../437914/index.html">Generaci√≥n de clases Jaxb (XJC) a partir del esquema XML (XSD) con descripciones de clase y campo en forma de anotaciones. Complemento XJC</a></li>
<li><a href="../437916/index.html">¬°Dale al lector de libros electr√≥nicos en cada bolsillo! Revisi√≥n de las √∫ltimas innovaciones de ONYX BOOX</a></li>
<li><a href="../437922/index.html">Modelo de ataque: donde se abusa principalmente en adquisiciones electr√≥nicas y c√≥mo tratarlo</a></li>
<li><a href="../437924/index.html">Fragmento de blockchain</a></li>
<li><a href="../437926/index.html">La gu√≠a autorizada para Fragmentos de Blockchain</a></li>
<li><a href="../437928/index.html">Como aprender ingles</a></li>
<li><a href="../437930/index.html">Combo de accesorios de iluminaci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>