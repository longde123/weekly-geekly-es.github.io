<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♎️ 🤾🏼 🌴 正如我们做的BelAZ。 第3部分-分段调试 🙈 👩🏽‍🏭 ✍🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="这是关于卡车的第三篇文章（ 第一 ， 第二 ）。 现在我们去采石场，在汽车上安装电气设备，然后开始第一次飞行！ 但是，当然，没有什么事情如此简单，只需瞬间，我将谈论我们在商务旅行中遇到的许多问题。 尽管在上一篇文章中我们在实验室的工作台上测试了所有设备，但现实却从完全不同的角度出发。 本文将有许多视...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>正如我们做的BelAZ。 第3部分-分段调试</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/npf_vektor/blog/416967/"><img src="https://habrastorage.org/webt/xs/nn/pu/xsnnpun27tbjxumr-skeforsyic.jpeg"><br><br> 这是关于卡车的第三篇文章（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第一</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第二</a> ）。 现在我们去采石场，在汽车上安装电气设备，然后开始第一次飞行！ 但是，当然，没有什么事情如此简单，只需瞬间，我将谈论我们在商务旅行中遇到的许多问题。 尽管在上一篇文章中我们在实验室的工作台上测试了所有设备，但现实却从完全不同的角度出发。 本文将有许多视频和照片！ <br><a name="habracut"></a><br><h2> 机器组装 </h2><br> 安装了我们设备的自卸车在克麦罗沃地区的一个采石场上运行。 他们在那里取煤，因此将这个地方称为切工（煤矿通常称为切工）更为正确。 截面全景图在以下地方最常见： <br><br><img src="https://habrastorage.org/webt/ig/7n/ix/ig7nixcuwxpnqfjew4h4mf9ft8a.jpeg"><br><br> 但是，当然，汽车不在路中间。 操作此类设备时，应有一个维修设备的地方。 在我们的案例中，这个地方是一个大型机库，是自卸车的“车库”。 他们在那里以各种方式更换轮胎，修理和保养。 实际上，目前正在进行的工作是用其中一辆翻斗车上的新变速箱替换旧的变速箱。 <br><br> 到达时的天气正是我们所需要的（请参阅LED面板上的温度计）： <br><br><img src="https://habrastorage.org/webt/rv/qj/pj/rvqjpj5sgvhn6uyd1gqrikyunhg.jpeg"><br><br> 车间本身比较温暖，但是由于车门总是开着/关着的，所以没有保暖外套就不可能在那里工作。 <br><br> 在这里，用起重机将旧的控制柜从机器上卸下： <br><br><img src="https://habrastorage.org/webt/t2/jd/cv/t2jdcvrvvkgmjnvhqv1ufm0pas4.jpeg"><br><br> 接下来，删除牵引引擎： <br><br><img src="https://habrastorage.org/webt/_r/dl/x7/_rdlx7lxsh-mypuun0bd38cfp80.jpeg"><br><br> 发动机插入后桥的一种“桶”中。 在发动机上，轴从两侧伸出-一侧在发条盒内部，上面有机械制动器，而另一方面，齿轮则拧紧了。 在变速箱顶部，带有轮胎的制动盘安装在螺栓上。 <br><br> 在这张照片中，工人将制动钳安装在我们的牵引发动机上。 <br><br><img src="https://habrastorage.org/webt/kg/gc/l3/kggcl3cba53zb4avdtc666o5mea.jpeg"><br><br> 这种机器上的机械制动器用作紧急情况和停车位。 它们不会减速，因为从那时起，发条盒内的所有东西都会加热并点亮-那里无处转移机械制动能。 同样在照片中，您可以看到所有电线如何沿同一方向引出，然后将它们连接到笔筒内部的接线盒。 <br><br> 接下来，将控制柜安装在平台上（是的，BelAZ有一个平台）。 <br><br><img src="https://habrastorage.org/webt/nm/ps/b4/nmpsb4rraqlisyb1c1k_y1s-clg.jpeg"><br><br> 请注意，新机柜明显低于前一个机柜（与上面吊车抬起旧机柜的上方照片比较）。 这样可以在右侧窗口中为驾驶员提供更大的视野。 <br><br> 您还记得一个笑话：“ BelAZ急救包中最多可以容纳6个人进行门诊治疗”？ 因此，实际上，机舱非常小，狭窄，并且恰好有两个地方。 内部设计并不复杂，但功能上您需要的一切都在那里，甚至包括空调。 在照片中，前面板已稍微拆开，正在安装中： <br><br><img src="https://habrastorage.org/webt/tg/28/wh/tg28whegfk0qebmb-oq-xiuhrya.jpeg"><br><br> 同时，带有设备的控制面板非常现代，带有大型彩色显示屏，外形美观（几乎与特斯拉的一样）。 她站在方向盘上： <br><br><img src="https://habrastorage.org/webt/wh/bl/ge/whblgerwprvwvfkflviwufbynn0.jpeg"><br><br> 该面板显示汽车的所有信息，并且每个子系统都有其自己的页面。 关于液压系统，关于ICE，关于变速箱等的独立页面 但是专家组主要是提供信息的人员，不会控制任何至关重要的事情-即 缺少传输不会影响传输的操作。 不幸的是，没有人事先同意该面板的数字交换协议；对我们而言，我们并未在驱动器上打上一页。 因此，我们首先决定我们的驱动器将是“没有窗户，没有门” –两个灯泡来指示事故，这就足够了。 <br><br> 但是，向本地安装人员（特别感谢他）以CAN包裹标签的形式向面板提供了交换协议，该协议是通过对日志进行密切分析（或流行的嗅探）的方法直接在现场获得的。 无需三思而后行，我们适应了该协议，并开始使用控制器发送必要的程序包，此后，来自面板上驱动器的遥测技术开始发挥作用，并开始在另一台电子变速箱的类似字段上显示： <br><br><img src="https://habrastorage.org/webt/gc/d7/mu/gcd7mugyhjxbku3ix1bbniojbtc.jpeg"><br><br> 并不是说有很多东西，但至少驾驶员可以看到电流，电压和温度。 还包括定速巡航控制的状态，转换器的错误，方向选择器的状态等。 所有其他诊断程序都是通过调节器的便携式计算机通过变速箱制造商提供的服务程序执行的（也就是说，除了驱动器本身之外，还必须开发服务软件）。 <br><br><h2> 首次列入 </h2><br> 在检查了仪器的电源供应，检查CAN网络中所有节点的存在以及电源线的连续性之后，首次接通的时间到了。 自卸车的后轮伸出，发动机空转。 所有保护设置都被简化为“剃须飞行”。 即 如果至少有某处跳变，至少有电流，至少有电压-任何遥测，那么一切都会立即关闭。 <br><br> 在手动模式下，我们从笔记本电脑上设置了发电机的小励磁电流，然后按下了珍贵的“开始”按钮。  DC总线上的电压缓慢上升到100V。 什么都没撞？ 保护没罢工？ 母线绝缘控制失败？ 没闻到吗 没有人尖叫“削减”？ 日志中的一切是否顺利？ 好啊 您可以将其提高一些，最多达到400。这就是遥测“记录”日志中的外观（在在线模式下，图形实时向右爬取）： <br><br><img src="https://habrastorage.org/webt/-s/3p/br/-s3pbrvvy10ayd7ogxges1krydg.png"><br><br> 现在检查每个牵引引擎。 我们设置了较小的速度，再次在手动模式下，也将所有保护降至最低，单击“开始”。 这是从外部看的样子： <br><br> 纺车的视频 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/CdjEl7WZo9M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 这是在日志中的样子： <br><br><img src="https://habrastorage.org/webt/rc/gi/v_/rcgiv_ert0r9xf98jolcdkxwsnc.png"><br><br> 车轮加速时，所有设备的直流母线（白色）上的电压略有增加，第一台电机的所有三合会的定子电流增加（紫色），励磁电流（橙色），发电机沿直流母线显示电流（红色），小功率43 kW（蓝色），然后转速（黄色）升至目标值，即200 rpm，此后所有其他值均降至零。 在测量误差的水平上，几乎没有任何能量花在空转上。 <br><br> 我们使用第二个引擎重复所有操作-它起作用。 然后，我们从控件检查所有相同的内容-从油门踏板，刹车。 我们会更快地加速和减速发动机，将其升高到高于保护操作设置的水平。 <br><br><div class="spoiler">  <b class="spoiler_title">在日志中看起来像这样</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/kj/hz/am/kjhzamtxehz72tsccax6vxpzgei.png"><br> 实际上，我们的日志查看器是为交互式工作而设计的，而在静态视图中，如屏幕截图所示，它完全是无用的。 在使用它时，假定用户用鼠标带领，将跟踪光标放置在图形中感兴趣的位置，并且落入光标的垂直十字准线（箭头）的所有行的值都显示在图例中。 如果我们用一张纸一次推导出所有数千个遥测图的值，就永远找不到正确的一张。 因此，不要试图特别了解这里发生的事情-只是自卸车沿着行驶的许多漂亮的彩色线条！ <br></div></div><br> 不幸的是，车间的排气很弱，而且柴油发动机烟熏味很浓-在测试开始时，他已经抽了所有东西，以致车间里出现了清晰可见的雾霾，他的头部开始受伤。 立即关闭并打开所有门-冒烟。 但是，所有基本内容均已检查，您可以将卡车放在轮子上，也许它将到达街道本身，并且有可能在新鲜空气中继续进行调试。 在这种情况下，回滚自卸车总是很困难的事情-运营组织总是拥有可以带回家进行维修的以下机器： <br><br><img src="https://habrastorage.org/webt/zi/u3/pt/ziu3ptlzniq61dllsgu9qevvsyg.jpeg"><br><br><h2>  “ Pokatushki”和第一个问题 </h2><br> 因此，自卸车是有轮子的，在这里，这是期待已久的第一次依靠自己的力量离开车间： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/iynwtZMWNUc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 但是，第一次尝试用力压气时，发电机直流母线上的过电流保护起作用了。 电流超过保护1500A（全功率额定电流-1100A）。 同时，汽车甚至没有开车，驾驶员只用力踩油门，一切都关闭了。 日志中可见什么？ 但没有： <br><br><img src="https://habrastorage.org/webt/m9/qn/5o/m9qn5o-zt50ahpxbclinqwd7sx0.png"><br><br> 有电压，然后是发动机和发电机的电流中的一个小“刺”（按对数只有30A），然后一切都为零。  1500A在哪里？ 事实是，定期向CAN网络发送日志需要大约50-100毫秒的时间，并且对其中显示的数据进行平均，平均时间大约为50毫秒。 因此，是的，在很短的时间内发生了一些事情，但是这些日志看不到什么。 为了解决这个问题，您需要使用转换器本身消除波形。 我们将总线上的电压和电流，发电机的励磁电流充电到发电机控制器的软件示波器中。 我们重复经验...和opa： <br><br><img src="https://habrastorage.org/webt/n7/mz/lz/n7mzlzjuis9cq3e6z_vake61yec.png"><br><br> 在这里，红色是发电机的整流电流，它达到了2000A（控制器的测量极限），并根据曲线的形状判断，显然在该架子上方的某个地方！ 两公里以上，卡尔！ 此时总线上的电压从250V下降到几乎为零！ 所有这一切都在5毫秒内发生，然后一切恢复。 同时，励磁电流也猛增。尽管控制器应将其限制为最大30A，然后限制为60A。 这是怎么回事？！ <br><br> 让我们看看其他数量，这次设置励磁电流和发电机速度。 可能是由于故障而激发电流的任务飞起来了，还是转速以某种方式跳了起来？ 但是不，一切都稳定了： <br><br><img src="https://habrastorage.org/webt/hx/7n/-h/hx7n-hpf1yu7me0p1piaaf0ixug.png"><br><br> 励磁电流红色的设置几乎不等于17A，并在激活1500A中的保护后立即将其重置。 旋转速度（蓝色）也起作用，直到发生事故之前它都像架子一样稳定，然后在关闭转换器时停止测量。 但是，电流仍然会自己增加，控制器无能为力！ 知道了 让我们看看与此同时牵引电机的作用。 也许这是发电机组中的某种短路，但在发动机上一切正常吗？ 是的，这里是： <br><br><img src="https://habrastorage.org/webt/ul/mw/mq/ulmwmqn1xigjg7nn3maqfvabp-y.png"><br><br> 在突然拉动的时刻，发动机试图跳动以计算出任务300A相电流（紫色）。 老实说，蓝色定子电流（在机器的所有三重轴上平均）在4毫秒内就达到了任务水平，并且直流回路中的同步电压下降（绿松石）。 好吧，现在一切都清楚了。 <br><br> 引擎在短时间内从直流链路消耗了大量能量。 尽管发动机不旋转，但该能量仍通过电动机电流流向定子电感的“泵送”。 即 来自直流母线电容器的能量进入电动机的电感-从一个能量存储到另一个能量存储。 <br><br> 如餐巾纸所示，峰值功率约为400 kW！ 由于启动时直流母线上的电压很小，因此其中的能量也很小（ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>C</mi><msup><mi>U</mi><mn>2</mn></msup></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.987ex" height="2.901ex" viewBox="0 -935.7 3008.2 1249" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMATHI-43" x="0" y="0"></use><g transform="translate(760,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMAIN-32" x="1121" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMAIN-2F" x="2007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMAIN-32" x="2507" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi>C</mi><msup><mi>U</mi><mn>2</mn></msup></mrow><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> {CU ^ 2} / 2 </script>  ） 该能量不足以“充电”电动机绕组的电感（ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>L</mi><msup><mi>I</mi><mn>2</mn></msup></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.178ex" height="2.901ex" viewBox="0 -935.7 2660.2 1249" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMAIN-32" x="740" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMAIN-2F" x="1659" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/npf_vektor/blog/416967/&amp;usg=ALkJrhijgKZzimcTNtVCvZJKvNzei9x3kA#MJMAIN-32" x="2159" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi>L</mi><msup><mi>I</mi><mn>2</mn></msup></mrow><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> {LI ^ 2} / 2 </script>  ），因此，电压随着电流的增加而开始急剧下降。 因此，能量开始从发电机消耗，对他来说，一切都很简单-母线上的电压越低，通过整流器提供的电流就越大。 直到现在，由于同步电机的惯性，它会延迟提供电流，因此无法开始提供电动机需要的400 kW功率。 他需要更多时间使电流积聚在电感中。 牵引电动机很快将母线中的电压吞噬到几乎为零，并且响应这种无赖，在几毫秒后，发电机以千安培电流做出响应！ <br><br> 怎么办 很简单，没人需要4毫秒的时间来踩下油门踏板。 有必要在电机转换器的控制器软件中引入强度调节器，即 平稳地将当前任务增加50ms。 这不会影响机器的响应速度，但会排除发电机上的急剧电涌，以便有时间让电流。 他们问，他们做到了！ <br><br> 走吧 但是我们走了不远。 随着加速动态的增加，保护功能又开始起作用。 现在不是开始时，而是以15 km / h的速度行驶。 现在，发生器上的电流和电压的波形图如下所示： <br><br><img src="https://habrastorage.org/webt/sa/rd/hw/sardhw8ixpygrthpod5_vln7rss.png"><br><br> 明确的振荡累积！ 直流母线的电流和电压开始反相摆幅，从而增加和增加幅度。  DC总线中的正弦频率为70Hz，但是会产生共振！ 到底是什么？ <br><br> 我很想告诉您这次是什么固件以及我们在哪些方面消除了此累积，但是本文并非如此。 不仅如此，而且还有更多。 仅给出了典型的问题示例，因为这些问题无处不在，我们统治并纠正了软件，系数和设备的逻辑，直到最后一切都进展顺利–您无法描述一切！ 这种以自卸车的玩具操作模式进行的调试持续进行了数天，发现了这样的问题，即对于先验对象而言，不可能设想或建模。 <br><br> 一直以来，当程序员们在激烈地寻找未知的振动和其他杂物时，汽车在商店大门前向外沮丧地盘旋行驶，如下所示： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/qig_cyvdEsU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2> 我们需要更深入 </h2><br> 当第一个堡垒的所有问题都或多或少地被调试了，并且防御装置每隔100米停止倾泻时，就该是第一个进入切割区的时候了。 这也是一个单独的过程，有必要写出离开汽车的申请表，出于某种原因，有必要带护送乘客的汽车，协调时间等。 但是，尽管如此，我们还是一个职业。 也就是说，在上下文中。 我们正在等待挖掘机的装载： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/c3QlZybjp6U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 最初，我们要求加载的不是最高负载，而是一半负载，以进行测试。 他们要求一半，但显然他们在我们的感官上堆得更多！ 好吧，该怎么做，让我们去吧，第一次带负载！ 内部视频（小心，情感表达，戴着耳机观看！）： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/yIo49ROzqJk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 在日志中，骑行看起来更加有趣（当然，对于那些可以看到矩阵的人而言）： <br><br><img src="https://habrastorage.org/webt/dz/qv/5a/dzqv5amnoup8hzs8z6yjfhq_feo.png"><br><br> 图片只是克服视频幻灯片的地方。 首先，可以看到波动，这辆汽车在崎rough不平的道路上跳着轮胎，驾驶员的腿上也设置了同样的“跳跃”汽油，而变速箱则满足了这一要求。 然后山开始。 牵引电机速度的黄色曲线下降到600 rpm，相当于10 km / h。 在这种情况下，根据紫色电流图判断，各相的最大流量只有一半，即 发动机提供双重扭矩。 汽车无法仅仅因为没有足够大的柴油功率而行驶得更快-第二轴上的蓝色图表已达到770 kW的“搁板”，并且无论汽车的速度如何变化，都保持恒定（伴随柴油机转速）。 即 在这里，电动变速箱将全部柴油功率（减去效率）完全转化为提高了斜坡上的质量，而没有受到任何限制。 好像总是正确选择并且总是最佳机械传动。 <br><br> 但是，我们分心了。 我们要去！ 现在是时候倒出有效载荷了。 这是转储的样子，我们再次排队等候： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3hd432-71HA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 这样就形成了一个采石场，将废石倾倒在正确的地方。 <br><br> 然后我们又下来了，现在我们已经完全装满了，我们一次又一次地走，一次又一次……机器开始逐渐参与工作。 当然，在进行防御的过程中，出于某种原因，我不得不再次使用示波器进行搜寻，但是随着时间的流逝，防护装置的开火越来越少，汽车也越来越多地在不停机的情况下行驶。 然后，我们开始给汽车加夜班（驾驶室中没有程序员）。 早晨，他们从顶级控制器中的工业SD卡下载了日志，研究了有趣的地方并调查了驾驶员的投诉。 <br><br><h2> 心愿单 </h2><br> 然后...接下来，可以说，对该软件进行了各种计划外的改进。 不会影响主要功能的事物，不在TOR中的事物，但是事实证明，“所有其他自卸卡车都具有它，并且非常方便。” 例如，事实证明所有新机器都具有反冲系统。 就像乘用车一样，但有一些“职业”上的细微差别。 通常，必须这样做，以便如果方向选择器向前站立，则汽车只能向前滚动，而后退则取决于可用的方向。 即 这样，当您爬上斜坡完全释放出汽油时，汽车将平稳停止且不会后退。 而且，如果您需要继续前进，驾驶员会晃动油门和汽车，而不会后退并且猛烈地晃动。 选择器后退也一样-您无法前滚。 并且在中立时应禁用回滚。 <br><br> 但是没有人事先说过应该这样做！ 是的，凭我自己对采石场的观察，很明显，如果没有这种管理制度，操作机器确实很不方便。 但这就是问题所在-机械制动非常简单，在零速汽车中，它被ABS阀块（或其他阀）夹紧了。仅此而已。 而且您不必花费精力或进行平衡锻炼。 在BelAZ上，所有系统都是分开的，共有三个踏板-油门，机械制动器和电制动器（通常使用离合器）。 因此：机械制动器只能通过踏板直接控制，而无需任何电子设备。 因此，如果对自卸车的这种结构进行回扣，则只能通过牵引发动机制动。 <br><br> 要使电动机以一个自卸车的形式保持在一个斜坡上，将电动机保持在一个位置上并不是那么简单！<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解释方式...就像在斜坡上保持一辆带有手动变速箱的普通汽车，玩汽油和离合器。</font><font style="vertical-align: inherit;">根据机器的位置，有必要施加牵引力或将其抛弃。</font><font style="vertical-align: inherit;">在这种情况下，发动机转子位置传感器用作机器位置传感器。</font><font style="vertical-align: inherit;">但是此传感器非常粗糙，每转只有少量标记。</font></font>即<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您简单地说，“我们回去的速度越快，向前迈出的步伐就越强”，那么这辆车要么从山坡上诡t地爬行，要么来回摇摆。想象一下，您站在一个交通信号灯处，汽车来回爬行两米，加油，然后刹车，然后使悬架来回摆动……该任务归结为一个可以保持位置的伺服任务（如我在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文章中所</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展示的那样）</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">伺服驱动器</font></a><font style="vertical-align: inherit;">），但仅适用于BelAZ尺寸以及分辨率非常低的位置传感器。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，然后我们在使用防回滚算法方面玩够了，我们必须将最棘手的PID控制器与只有我们才能提出的过滤器一起使用。</font><font style="vertical-align: inherit;">但是卡车的性能在有/无载情况下仍然发生着巨大变化！</font><font style="vertical-align: inherit;">但似乎“像其他所有人一样”成立了，司机对此感到满意。</font><font style="vertical-align: inherit;">这是我们如何调试负载反冲的视频之一：</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/stpNDOo8GZQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 同样，但从内部看： </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ciwURHteWj0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个有趣的系统是巡航控制。当地人称之为稳定速度。如果在乘用车中“远处”行驶时需要它，以免腿部累死汽油，那么在这里-出于完全不同的原因。即使在夏天，采石场通常也很滑，道路上是泥土，雨后被冲走，结果变成泥浆。好吧，冬天在冰上，甚至更多。在这些道路上，所有这些多吨级的自卸卡车都非常成功地失速了（我们没有视频，但是在YouTube上有很多示例：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据驾驶员的评论，最安全的驾驶方法是使车轮以给定的固定速度旋转，即使有下坡甚至是爬坡的情况。</font><font style="vertical-align: inherit;">这正是速度稳定功能所提供的。</font><font style="vertical-align: inherit;">她的任务是保持任务非常紧张，而不会对局部高程变化做出反应。</font><font style="vertical-align: inherit;">同时，她必须在玩油门和刹车的同时保持速度，这取决于汽车的行驶位置和行驶方式。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换句话说，这听起来很酷，但实际上有汽车常用的PID速度控制器，仅此而已。</font><font style="vertical-align: inherit;">尽管也有必要进行调试和配置。</font><font style="vertical-align: inherit;">是的，与传统汽车的另一个​​区别-如果您踩油门或刹车，则巡航控制模式不会在此处关闭，而只是增加或减少速度参考值。</font></font>即<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 驾驶员可以一直在这种模式下骑行，但是踏板会改变其作用，并且现在可以调节速度基准，而不是牵引力。 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了稳定整个机器的速度外，您还需要调整车轮上的转速（当然，在后部，没有来自前部的信息）。但是这里的对准已经很困难了，因为车轮可以（并且应该）以不同的速度旋转。因此，在一定的旋转速度增量之前，驱动器什么也没做，而差值更大，它开始重新分配车轮上的力矩，从而拉紧滞后并阻止失控。但是，总的来说，这里也没有火箭科学，并且比例调节器可以应对死区。在这种情况下，可以用一个调节器立即杀死两只有一块石头的鸟：根据我们是拉还是推，它立刻变成了牵引力控制和防抱死系统。当然，这不是很诚实的系统，因为两个后轮一下子会打滑，并锁定在一起，但每个都不是。尽管我们已承诺在未来的汽车上提供前轮速度传感器，但仍可以在不阻塞的情况下真正使用它们。</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 我们的团队 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这一切有多少人呢？</font><font style="vertical-align: inherit;">多少委托？</font><font style="vertical-align: inherit;">以及如何建立互动？</font><font style="vertical-align: inherit;">这些也是有趣的问题。</font><font style="vertical-align: inherit;">如果您不屑一顾，那么三个人就参与了电源柜的设计，另外三个人用软件编写，一对夫妇制造的控制器，由三个人和一台超级计算机平均建造的电机。</font><font style="vertical-align: inherit;">仍然需要统计一些从事采购，文档编制和组织事务的工人。</font><font style="vertical-align: inherit;">这些只是直接参与项目的人员，他们只是这样做而已。</font><font style="vertical-align: inherit;">并且工厂中有打磨，切割，缠绕，组装，检查，运输等等的工人。</font><font style="vertical-align: inherit;">总的来说，合作非常好，该国各地都有许多公司和工厂。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初，在工厂调试时有五台设备，当积极地组装和安装设备，铺设电缆等时，然后剩下两点用于pokatushki和调试：一位电源柜设计师和一位程序员。嗯，这没有考虑到本地人员-司机，调节员和工人在发生某些事情时提供的帮助。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，即使有两个人，实际上整个团队都与他们在一起。我们有这样一种做法-为每个项目（在某个令人讨厌的信使中）创建一个单独的聊天室，并在其中突出显示发生的一切。每天在那里发布数十个波形图，掉线的照片，日志文件和寻求帮助。每个人都始终保持联系并解决新出现的问题。对于这项业务，我们甚至购买并发送了带有调制解调器的GSM天线，以便甚至在维修区的最底部（部分）进行通信。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样，当特定程序员需要戳某些东西（对我们来说是指获取示波器的会话）或将控制器缝制成自己的职责时，通常会使用远程连接（远程桌面）。而且还发生了汽车剧烈晃动的情况，然后由远程连接的那辆车本身进行工作，而坐在驾驶舱内的那辆车只是通过视觉控制情况，监视连接并指示要去哪里。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">负责任的日志查看器还有一个任务。假设汽车在重载下又走了一次，从视觉上看一切都很好，CAN行程日志掉进了聊天室。它必须打开并查看，通常其中有许多非常有趣的细微差别，尽管没人在旅途中注意到任何东西。立刻在办公室里有了编辑软件，将其推到互联网的另一侧，然后将其拉入车缝。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可能会感到惊讶，但是本文的作者从未见过BelAZ直播。是的，在这个项目中，我是相同的矩阵运算符和远程日志定位器。在撰写本文时，没有与那里的任何人进行任何协商。只是因为我们所有人在聊天中已经了解了一切。处理项目时，信息传递的密度很高。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，工厂对电动机的所有测试（上一篇文章）根本没有程序员在场。但由他们进行。通过远程。在现场出差中，只有不幸的电源柜设计人员（工厂工人除外）参加了测试，他们需要使用物理示波器采集波形，控制温度并连接电线。对程序员的一部分这样的侮辱成为可能只是由于长期投资在你的调试软件和彻底的方法</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里讨论</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顺便说一下，基于这个原因，即使在与客户讨论新项目的阶段，我们也会立即发现设备安装现场设施上是否存在Internet和移动通信，以及是否有可能在缺少设备的情况下提供它们。如果事实证明没有任何结果，那么我们说调试时间将延长三倍。通常，这非常刺激我们搜索并连接到我们无法访问wifi的接入点，或者安排允许将“普通凡人禁止使用”的3G调制解调器携带到对象进行调试。但是，当然，在某些地方不仅很难找到互联网，而且很难找到一个家庭插座。顺便说一下，关于插座-在调试过程中，我们将24-220V逆变器（来自常规的汽车修理店）放在自卸车中，为笔记本电脑和手机充电，以便不间断地工作。</font></font><br><br><h2> 结论 </h2><br> 尽管现在这台机器已经成熟并且可以自行切割，但我们不会忘记它-我们将GSM天线留给了本地服务工程师，如果发生这种情况，我们可以远程连接并诊断出问题所在。 仅当发生无法弥补的故障时，您才需要去该地方。 诸如电线掉落或水泵故障之类的故障将由当地员工修复，我们的业务是连接并说出问题出在哪里以及在何处看到问题。 <br><br> 大概这是该项目的最后一篇文章。 如果评论中存在关于不符合响应评论格式的其他说法的建议，那么我们将考虑编写续集。 <br><br> 当然，这一系列文章是单方面的-程序员对项目的一种观察。 我相信，从他们的角度来看，项目的所有其他参与者，机器和机柜的设计师，安装人员和工人也将有很多话要说。 也许有一天他们会写类似的东西。 <br><br> 此外，本文甚至没有仔细研究自卸车本身的所有控制算法，因为为此，它不是需要撰写的文章，而是一篇论文。 如何确保所有设备之间的功率平衡，如何根据发电机的控制规律，如何设置柴油转速，如何处理驾驶员的踏板以及如何将其转换为当下的任务等等，等等。 也就是说，算法当然比 <br><br><pre><code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) _ = ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) _ = -;</code> </pre> <br> 当然，它们也有很多不同的工程解决方案：有些解决方案很优雅，有些笨拙，有些不太明显，有些非常琐碎。 但是，凭借所有的时间和经验，每位工程师在需要完成任务时都会以一种或另一种方式来使用所有这些算法。 因此，我决定不深入研究实施过程中无聊的技术细节，而是通过图片，YouTube和抒情诗向我们展示该项目的流行过程。 我希望这很有趣。 <br><br><h2> 像往常一样，本地学院的广告 </h2><br> 该项目大部分是由NRU MEI的毕业生进行的。 如果您遇到“在哪里继续学习”的问题，并且对转动电动机，调试BelAZ卡车感兴趣，并且还想学习如何对矢量控制系统进行编程，那么欢迎您 <br><br><div class="spoiler">  <b class="spoiler_title">扰流板</b> <div class="spoiler_text">  NRU MPEI的自动电力驱动系（AEP）继续按照04/13/02“电力工程和电气工程”方向招收行政管理人员，培训计划为“电力驱动和自动化”。 <br><br> 您可以竞争性方式以预算形式的培训或付费方式进入该专业的裁判法院。 以预算形式的培训向裁判法院提交文件的截止日期为2018年8月17日。 <br><br> 入学考试将于8月11日和8月20日举行（分别在8月10日和17日进行协商）。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">selection选委员会</a>网站上的详细信息。 考试作业示例也可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">招生办公室网站</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">特殊区域中</a>找到。 需要宿舍的申请人在入学后将在分配的名额内获得一个宿舍，作为入读全日制教育和控制性全日制合同的控制位的一部分。 <br><br> 我们还邀请学校毕业生按照IET MPEI系的03/13/02“电力工程和电气工程”方向进入<b>学士学位</b> 。 接受预算形式的本科学习文件的截止日期为2018年7月26日。 <br> 文件归档在莫斯科，圣。  Krasnokazarmennaya，卒17。 <br><br>  NRU“ MEI”自动电力传动系是该专业在俄罗斯的领先部门，拥有超过2000万卢布。 每年的研究工作量，每年在科学计量数据库Web of Science和Scopus索引的出版物中发表20篇以上的文章，该部门由NPF VECTOR LLC和NPP TsIKL +的员工教授，这是发展领域的领先企业俄罗斯的电动驱动器和电动变速器。 <br></div></div><br> 最后，一个谜语： <br><br><img src="https://habrastorage.org/webt/zu/eu/d3/zueud3lrrzvs6m_0tylfl1lxc2c.jpeg"><br><br> 在这张照片中找到GSM天线和前灯。 <br><br><div class="spoiler">  <b class="spoiler_title">猜猜</b> <div class="spoiler_text"> 好吧，每个人都在驾驶舱上方发现了一个菱形天线，但实际上很多人可能会误认为大型圆形前灯是空气过滤器。 灯光实际上在它们下面，是小方块。 <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN416967/">https://habr.com/ru/post/zh-CN416967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN416953/index.html">为网络创建卡通水着色器。 第一部分</a></li>
<li><a href="../zh-CN416955/index.html">Elasticsearch的小技巧</a></li>
<li><a href="../zh-CN416959/index.html">苹果推出新的iOS防盗功能</a></li>
<li><a href="../zh-CN416961/index.html">使用操作转换自动解决冲突</a></li>
<li><a href="../zh-CN416963/index.html">正如我们做的BelAZ。 第2部分-实验室测试</a></li>
<li><a href="../zh-CN416969/index.html">毕达哥拉斯乐谱的数学证明</a></li>
<li><a href="../zh-CN416977/index.html">智能家居软件＃2</a></li>
<li><a href="../zh-CN416979/index.html">对大型团队的关注：LeSS Day 2018</a></li>
<li><a href="../zh-CN416981/index.html">八个人如何扩展高负荷项目。 不飞溅的经验</a></li>
<li><a href="../zh-CN416983/index.html">为网络创建卡通水着色器。 第二部分</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>