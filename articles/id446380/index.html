<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🅾️ ⛄️ 🕺🏽 Evolusi H2 - fungsi jendela, CTE, JSON / XML dalam database tertanam 🍦 👋🏾 👈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ada proyek open source yang telah menjadi arus utama yang sukses secara komersial, seperti PostgreSQL / Elasticsearch. Lainnya, misalnya RethinkDB, ke...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Evolusi H2 - fungsi jendela, CTE, JSON / XML dalam database tertanam</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446380/">  Ada proyek open source yang telah menjadi arus utama yang sukses secara komersial, seperti PostgreSQL / Elasticsearch.  Lainnya, misalnya RethinkDB, kehilangan pasar dan menghentikan pengembangan.  Dan proyek database H2 dari database tertanam yang ditulis dalam java sedang berkembang dan hidup di ceruknya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zl/co/o1/zlcoo1mzsn8lw4svhnre9ew5ekc.png"></div><br>  Untuk menunjukkan fungsionalitas SonarQube, Jira, Confluence, database H2 digunakan pada awal pertama.  H2 adalah basis untuk menjalankan tes SQL dalam memori di hampir semua proyek JVM.  Ada contoh aplikasi yang kurang diketahui pengguna - ini adalah penggunaan H2 dalam ignite-sql terdistribusi dan ini sudah merupakan skrip siap produksi untuk menggunakan database tertanam sebagai bagian dari solusi lain.  Kurang dari sebulan yang lalu, versi <a href="">1.4.199 dirilis</a> di mana Anda sekarang dapat menulis pertanyaan SQL yang cukup kompleks. <br><a name="habracut"></a><br>  Dalam proyek, saya tidak pernah mengandalkan H2 sebagai database lengkap dengan menyimpan data ke disk.  Sebaliknya, sebagai modul untuk mentransformasikan data dalam memori JVM, dengan dukungan SQL yang baik.  Tetapi untuk aplikasi ini, itu sangat dibatasi oleh kurangnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fungsi jendela</a> .  Dan sekarang, setelah lebih dari setengah tahun sejak awal pengembangan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fungsional</a> , sekarang H2database telah menyusul <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SQLite</a> .  Dan ini disebabkan oleh jasa besar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Yevgeny Ryazanov</a> dari Irkutsk - Saya belum melihat kecepatan pengembangan seperti sebelumnya dalam proyek sumber terbuka nirlaba.  Juga, komit dari kontributor berbahasa Rusia lainnya secara teratur muncul di repositori proyek.  Dan pada saat rilis - pendiri proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Thomas Mueller</a> . <br><br>  H2 memiliki dukungan untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kueri rekursif (CTE)</a> .  Ini adalah cara standar dalam SQL untuk bekerja dengan data hierarkis dalam tabel dan penguraian kueri (di sini Anda dapat menginjak penggaruk penjadwal).  Kueri rekursif dijelaskan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam publikasi</a> dengan contoh. <br><br>  Untuk bekerja dengan data yang kurang terstruktur, implementasi standar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SQL / JSON yang</a> akan datang akan muncul.  Sementara itu, untuk kebutuhannya, ia telah memperluas H2 dengan bantuan fungsi kustom prosesor XQuery 3.1 berdasarkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BaseX</a> .  Kode ini tersedia di proyek github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">H2XQueryAdapter</a> .  Ini adalah fungsi tabel yang dapat mengekstrak data dari format XML atau JSON menggunakan XQuery dan memeriksa jenis dan batasan bukan nol untuk nilai yang dikembalikan oleh fungsi.  Selanjutnya, kekuatan penuh ekspresi SQL tersedia untuk mengubah hasil transformasi XQuery menjadi memori proses JVM. <br><br>  Fungsi tabel xquery () kelebihan beban dan memiliki dua opsi - dengan satu parameter xQuery query dan satu dengan xQuery query dan string kueri - sql kedua untuk membentuk parameter untuk xQuery itu sendiri. <br><br>  Suatu pendekatan dengan transformasi semacam itu terbukti sangat baik dalam suatu proyek untuk memproses volume petabyte data mentah dalam proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penyimpanan data biomedis</a> . <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> xresult (GR <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">500</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>,AR <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>, VER <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> xquery(<span class="hljs-string"><span class="hljs-string">'declare variable $getHeader as xs:boolean external := false(); declare variable $getData as xs:boolean external := true(); &lt;csv&gt; { if($getHeader) then( &lt;record&gt;&lt;mavengr&gt;VARCHAR(500) not null&lt;/mavengr&gt;&lt;artifactname&gt;varchar&lt;/artifactname&gt;&lt;versionname&gt;VARCHAR(50)&lt;/versionname&gt;&lt;/record&gt; ), if($getData) then(( for $row in doc("http://central.maven.org/maven2/org/springframework/spring-context/5.1.4.RELEASE/spring-context-5.1.4.RELEASE.pom")//*:dependency return &lt;record&gt;&lt;mavengr&gt;{$row/*:groupId/text()}&lt;/mavengr&gt;&lt;artifactname&gt;{$row/*:artifactId/text()}&lt;/artifactname&gt;&lt;versionname&gt;{$row/*:version/text()}&lt;/versionname&gt;&lt;/record&gt; )) } &lt;/csv&gt;'</span></span>)</code> </pre> <br>  Implementasi ini memiliki batasan pada format kueri xquery. <br><br><ul><li>  Pertama, Anda perlu mendeklarasikan dua variabel eksternal getHeader dan getData - ini diperlukan agar fungsi tabel tidak menyebabkan transformasi data beberapa kali, membuang hasil yang tidak perlu untuk hanya mendapatkan nama dan jenis kolom.  Panggilan fungsi berganda adalah fitur-fitur pangkalan H2 yang berfungsi dengan fungsi java mengembalikan daftar nilai. </li><li>  Kedua, format hasil harus seperti untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">serialisasi csv</a> <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">csv</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">1</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">N</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">N</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">1</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">1</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">N</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">N</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">record</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">csv</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li>  Ketiga, Anda harus mendeklarasikan tipe data, dimensi, dan bidang yang diperlukan, misalnya: desimal (20,4), bukan nol </li></ul><br>  Dengan parsing tipe data kolom, saya mencoba menggunakan kembali parser SQL dari H2, tetapi ternyata sangat terhubung dengan objek database lain sehingga menolak untuk bekerja tanpa membuat database dan sesi.  Saya menghibur diri dengan pemikiran bahwa para pengembang melakukannya untuk menyederhanakan desain aplikasi dan tidak membuat parser untuk semua kesempatan untuk setiap tata bahasa BNF. <br><br>  Anda dapat menjalankan <a href="">contoh ini</a> dalam mode debug java.  Aturan transformasi baru dapat dikembangkan di editor xquery yang sudah dikenal atau di open source <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BaseX GUI</a> . <br><br>  Dimungkinkan untuk mengubah hampir semua koleksi java atau POJO menjadi tabel H2 virtual.  <a href="">Kode</a> proyek <a href="">H2POJOTable</a> di github.  Dalam contoh, dengan referensi, MemoryManagerMXBeans berbasis platform berubah menjadi fungsi tabel H2.  Mungkin pendekatan ini akan sedikit menghibur bagi mereka yang sedih tentang kurangnya LINQ dan dukungan untuk operasi di set di Jawa. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (Statement statement = connection.createStatement()) { String pojoTableAlias = <span class="hljs-string"><span class="hljs-string">"create alias MemoryManagerMXBeans as $$ \n"</span></span> + <span class="hljs-string"><span class="hljs-string">"import java.lang.management.ManagementFactory;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"import java.lang.management.MemoryManagerMXBean;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"import org.h2.expression.function.pojo.*;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"import java.sql.*;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"import java.util.Collections;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"@CODE\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" ResultSet getRuntimeStat(Connection connection) throws Exception{\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" return H2PojoAdapter.toTable(connection, new CollectionWraper&lt;&gt;(MemoryManagerMXBean.class,"</span></span> + <span class="hljs-string"><span class="hljs-string">" ManagementFactory::getMemoryManagerMXBeans, Collections.emptyMap()));\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" }\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"\n$$"</span></span>; statement.executeUpdate(pojoTableAlias); } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (Statement statement = connection.createStatement()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string"><span class="hljs-string">"select * from MemoryManagerMXBeans()"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> columnCount = assertResultSet(resultSet, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[]{<span class="hljs-string"><span class="hljs-string">"memoryPoolNames"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"valid"</span></span>}); assertThat(columnCount).isGreaterThan(<span class="hljs-number"><span class="hljs-number">1</span></span>); } }</code> </pre> <br>  Terkadang fungsi lama dalam H2 rusak dan tidak begitu dituntut oleh pengguna.  Sebagai contoh, dalam proyek kerja saya, program membaca data dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AWS S3</a> URL.  Karenanya, saya berharap kesalahan yang diketahui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">akan tetap diperbaiki</a> dengan menerima <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">permintaan tarik</a> saya.  Dalam perjalanan untuk memperbaiki kesalahan ini adalah tes yang tidak stabil untuk TLS, yang juga tidak berfungsi di bawah Java 11. <br><br>  H2 memungkinkan Anda untuk menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">driver ODBC PostgreSQL</a> meniru sebagian dari protokol jaringannya.  Yang secara teoritis juga memungkinkan Anda untuk mengikatnya melalui FDW di PostgreSQL. <br><br>  Selain database itu sendiri, pengiriman H2 juga mencakup konsol web minimalis dengan dukungan untuk penyelesaian otomatis saat mengedit, servlet, atau opsi startup mandiri.  H2 terlihat seperti "pisau Swiss" untuk pengembang - alat yang ringkas dan serbaguna jika proyek Anda sudah menggunakan JVM.  Saat mencoba menggunakan konsol ini dengan driver jdbc "bengkok", Redshift DBMS membuat permintaan tarik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mata-merah</a> pertamanya ke dalam proyek.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Noel Grandin</a> , salah satu peserta proyek, membantu saya dengan tinjauan kode dan menerima koreksi. <br><br>  Jika Anda memerlukan analog dari Berkeley DB Java Edition - proyek memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MVStore</a> - penyimpanan persisten untuk data nilai kunci dan, dalam kombinasi dengan MVCC, "mesin" secara default di versi terbaru dari database.  Sangat mengejutkan bahwa database bahkan memiliki dukungan dasar untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fungsi</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">geofungsi</a> dan pencarian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">teks</a> lengkap. <br><br>  Berkat kontributor H2database, semua orang menggunakan database ini dan melaporkan kesalahan!  Database H2 telah berkembang sejak 2005, dan sekarang mendukung fungsi jendela, permintaan rekursif, ini adalah salah satu "mesin" SQL paling kuat untuk memproses data dalam memori JVM dan diperluas dengan fungsi tabel untuk bekerja dengan data yang terstruktur secara longgar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id446380/">https://habr.com/ru/post/id446380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id446366/index.html">ZX Spectrum 128k lakukan sendiri. Bagian 2</a></li>
<li><a href="../id446370/index.html">"Yah, sekali lagi, stasiun cuaca"? Tidak juga</a></li>
<li><a href="../id446372/index.html">Cintai pencarian, cintai, dan temukan data pribadi Anda di depan umum</a></li>
<li><a href="../id446376/index.html">Bagaimana cara menuliskan alamat rumah?</a></li>
<li><a href="../id446378/index.html">Masalah beralih ke waktu musim dingin dan musim panas untuk sekolah Skype tunggal</a></li>
<li><a href="../id446384/index.html">Kiat untuk mengembangkan proyek yang sangat besar di Revit</a></li>
<li><a href="../id446388/index.html">Industri minyak dan gas bumi sebagai contoh untuk sistem cloud periferal</a></li>
<li><a href="../id446394/index.html">5. Periksa Titik Memulai R80.20. Gaia & CLI</a></li>
<li><a href="../id446396/index.html">Atur ulang penghitung minggu GPS</a></li>
<li><a href="../id446400/index.html">Dmitry Dumik, Chatfuel: Tentang Y Combinator, Kewirausahaan Teknologi, Perubahan Perilaku dan Kesadaran</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>