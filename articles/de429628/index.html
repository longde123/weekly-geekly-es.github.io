<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßù üì° üìΩÔ∏è So erstellen Sie einen Chat-Bot f√ºr VKontakte mit Python, Django und Webhook üòû üé≤ üë©‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warum noch ein Artikel zum Erstellen eines Chat-Bots? 
 Vielleicht habe ich schlecht gesucht, aber ich konnte keine detaillierte Anleitung zum Erstell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So erstellen Sie einen Chat-Bot f√ºr VKontakte mit Python, Django und Webhook</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429628/"><h3>  Warum noch ein Artikel zum Erstellen eines Chat-Bots? </h3><br>  Vielleicht habe ich schlecht gesucht, aber ich konnte keine detaillierte Anleitung zum Erstellen eines Python-Bots mit dem Django-Framework und dem Webhook-Ansatz finden, der von einer russischen Firma gehostet wird.  In den meisten Materialien wird √ºber die Verwendung des Flask-Frameworks und das kostenlose Hosting von Heroku und PythonAnywhere gesprochen.  Die Erfahrung der Habr-Community hilft mir, und so habe ich mich aus Dankbarkeit entschlossen, Zeit damit zu verbringen, diesen Artikel zu schreiben.  Ich werde die praktischen Erfahrungen beschreiben, die gesammelt wurden, damit jeder, der daran interessiert ist, Zeit sparen und besser verstehen kann, wie ein Bot in Python mithilfe des Django-Frameworks auf seinem Hosting mithilfe des Webhook-Ansatzes erstellt wird. <br><a name="habracut"></a><br><h3>  Warum kostenpflichtiges Hosting? </h3><br>  Meiner Meinung nach ist eine funktionsf√§hige Version des Bots, wenn er unabh√§ngig von Ihrem lokalen Computer ist und rund um die Uhr verf√ºgbar ist.  Dazu ben√∂tigen Sie ein Hosting, auf dem sich Folgendes befindet: einen Webserver, ein Datenbankverwaltungssystem (um die Funktionen des Bots zu entwickeln), die Registrierung eines Domainnamens, das Erhalten eines SSL-Zertifikats und technischen Support f√ºr all diese Wirtschaftszweige.  Solche Dienstleistungen kosten Geld.  Ich bezahle das Hosting von 138 Rubel pro Monat f√ºr die Wartung der Infrastruktur, damit der Bot funktioniert: Unterst√ºtzung f√ºr Python + Django, MySQL DBMS 25 GB, Unterst√ºtzung f√ºr SSH. <br>  In den meisten Lektionen habe ich gesehen, dass ein Personal Computer als Server oder kostenloses Hosting mit Einschr√§nkungen der Arbeitszeit usw. verwendet wird. In den Beispielen fragt der Bot den Messenger-Server regelm√§√üig nach neuen Nachrichten von Benutzern ab.  Dies ist eine zus√§tzliche Belastung f√ºr die Messenger-Server, sodass der Bot f√ºr eine Weile "gesperrt" werden kann.  All dies ist meiner Meinung nach f√ºr den produktiven Einsatz nicht entscheidend.  Aber f√ºr den Test und das Training ist durchaus m√∂glich. <br><br><h3>  Was ist Webhook und warum? </h3><br>  F√ºr das Produkt halte ich die richtige Entscheidung f√ºr einen Webhook f√ºr richtig, dh einen Ansatz, bei dem unser Bot Nachrichten vom Messenger-Server erwartet und diese nicht mit regelm√§√üigen Anfragen ‚Äûh√§mmert‚Äú: Gibt es neue Nachrichten oder nicht?  Mit einem Webhook sieht es so aus: Der Benutzer hat eine Nachricht geschrieben, der Messenger-Server hat sie an Ihren Bot gesendet, er hat die Nachricht empfangen, verarbeitet und beantwortet. <br><br><h3>  Warum Django? </h3><br>  Ich habe beschlossen, einen Bot in Python zu erstellen, also habe ich die Python-Unterst√ºtzung auf dem Hosting angeschlossen.  Aber ich hatte keine Wahl f√ºr ein Framework - Hosting hat nur Django.  Sie sagen, es funktioniert Instagram, Pinterest, Bitbucket und Mozilla.  Vielleicht bietet Hosting es deshalb an. <br><br><h3>  Warum VKontakte, nicht Telegramm oder Viber? </h3><br>  Um von einfach zu komplex zu wechseln, war es mir wichtig, den einfachsten und intuitivsten Weg zu finden, um einen Webhook einzurichten.  VKontakte erwies sich f√ºr mich aufgrund der eindeutigen Hilfe und der einfachen Verbindung von Webhook im Community-Kontrollfeld im Abschnitt "Verwaltung - Arbeiten mit API" als am verst√§ndlichsten.  Eine Beschreibung, wie ich alles konfiguriert und verbunden habe, wird weiter unten aufgef√ºhrt.  In Zukunft m√∂chte ich meinen Bot in Viber verf√ºgbar machen.  Aber mit Telegramm ist es noch nicht unterwegs, da mein Hosting in Russland ist und das Telegramm f√ºr Russland gesperrt ist.  Um Probleme mit Telegramm zu vermeiden, k√∂nnen Sie Hosting im Ausland kaufen. <br><br><h3>  Wie installiere ich Webhook f√ºr VK Bot? </h3><br>  <strong>Domainname https: //</strong> .  Zuerst m√ºssen Sie den Domainnamen der Site registrieren und ein SSL-Zertifikat daf√ºr erhalten. <br><br>  Ich wollte die Root-Domain nicht f√ºr den Chatbot verwenden, also habe ich nach der Registrierung der Domain eine Subdomain erstellt und ein SSL-Zertifikat daf√ºr erhalten. <br><br>  Ich habe all diese Manipulationen auf der Hosting-Site in meinem pers√∂nlichen Konto vorgenommen. <br>  Als Ergebnis erhielt ich die Adresse der Site mybot.mysite.ru und das SSL-Zertifikat daf√ºr. <br><br>  <strong>Wir bekommen den VK-Schl√ºssel (Token) f√ºr den Bot.</strong>  Zuerst habe ich eine geschlossene Gruppe erstellt und bin dann im Abschnitt "Arbeiten mit API" in die "Verwaltung" der Gruppe gegangen.  Auf der Registerkarte "Access Keys" befindet sich ein Token und auf der Registerkarte "Callback API" die Webhook-Einstellungen. <br><br><img src="https://habrastorage.org/webt/in/46/po/in46po1vy4iq3vcdnezwpp5okg8.png"><br><br>  <strong>Installieren und konfigurieren Sie Django</strong> .  Vielleicht brauchen Sie Django nicht, um Ihr Python-Skript auszuf√ºhren, aber ich wei√ü nicht, wie es anders ist. <br><br>  Mit PuTTY habe ich √ºber SSH eine Verbindung zum Server hergestellt, die virtuelle Umgebung konfiguriert und aktiviert. <br><br>  SSH: <br><pre><code class="bash hljs">virtualenv-2.7 virtualenv/myEnv . virtualenv/myEnv/bin/activate</code> </pre> <br>  Der Befehl in der ersten Zeile erstellt eine virtuelle Umgebung und der Befehl in der zweiten Zeile aktiviert sie (beachten Sie das Leerzeichen nach dem Punkt).  Version 2.7 wird vom Hosting vorgegeben und kann in Ihrem Fall abweichen.  Lesen Sie daher die Hosting-Hilfe. <br><br>  Als n√§chstes installierte Django <br>  SSH: <br><pre> <code class="bash hljs">pip install <span class="hljs-string"><span class="hljs-string">'django&lt;2'</span></span></code> </pre><br>  Ich habe die Django-Version nicht fr√ºher als die zweite installiert, da Python 2.7 auf dem Hosting verwendet wird und nur die Django-Version unter 2 damit funktioniert. <br><br>  Und installierte das Python-Modul, um mit der VKontakte-API zu arbeiten <br>  SSH: <br><pre> <code class="bash hljs">pip install vk</code> </pre><br><br>  FTP: <br>  Erstellt einen Ordner f√ºr Django-Projekte im Stammverzeichnis des Hostings.  Er nannte sie Django. <br><br>  SSH: <br>  Erstellt ein neues Projekt. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> django/ django-admin.py startproject mybot</code> </pre><br>  Infolgedessen wird im Ordner / django ein Ordner mit dem Namen des Projekts erstellt (in unserem Fall ‚Äûmybot‚Äú).  Es enth√§lt die ersten automatisch erstellten Projektdateien: <br>  / Django <br>  / mybot - Projektordner <br>  / mybot - Modul mit den Einstellungen unseres Projekts <br>  __init__.py <br>  settings.py <br>  urls.py <br>  wsgi.py <br>  verwalten.py <br><br>  Ein Projekt in Django ist eine Gruppe von Anwendungen.  Eine Anwendung in Django ist ein Programm, das die vom Entwickler festgelegten Aktionen ausf√ºhrt. <br><br>  SSH: <br>  Erstellt eine Anwendung. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mybot python manage.py startapp vk_bot</code> </pre><br>  Ich ging in den <i>Ordner / django / mybot</i> und erstellte eine neue Anwendung namens "vk_bot". <br>  Im Projektordner wurde ein Ordner mit dem Namen der Anwendung erstellt, der die automatisch erstellten Anwendungsdateien enth√§lt: <br><br>  / Django <br>  / mybot - Projektordner <br>  / mybot - Modul mit den Einstellungen unseres Projekts <br>  __init__.py <br>  settings.py <br>  urls.py <br>  wsgi.py <br>  verwalten.py <br>  / vk_bot - Anwendungsordner <br>  __init__.py <br>  admin.py. <br>  apps.py <br>  models.py <br>  tests.py <br>  views.py <br><br>  FTP: <br>  Ich habe alle Projektdateien auf meinen Laptop heruntergeladen, um mit Code arbeiten zu k√∂nnen. <br>  Um mit Projektdateien und Programmierung zu arbeiten, habe ich die Atom-Anwendung verwendet. <br><br>  Atom: <br>  Die Projekteinstellungen wurden in der Datei <i>/django/mybot/mybot/settings.py bearbeitet</i> <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">... </span></span>DEBUG = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ... ALLOWED_HOSTS = [ <span class="hljs-string"><span class="hljs-string">u'mybot.mysite.ru'</span></span>, ] ...</code> </pre><br>  Atom: <br>  Bearbeitete URL-Routing-Einstellungen in der Datei <i>/django/mybot/mybot/urls.py</i> <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">... </span></span>urlpatterns = [ url(<span class="hljs-string"><span class="hljs-string">r'^vk_bot/'</span></span>, include(<span class="hljs-string"><span class="hljs-string">'vk_bot.urls'</span></span>)), ] ...</code> </pre><br>  FTP: <br>  Erstellt eine Datei <i>/django/mybot/vk_bot/urls.py mit folgendem</i> Inhalt: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.conf.urls <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> url <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> . <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> views app_name = <span class="hljs-string"><span class="hljs-string">'vk_bot'</span></span> urlpatterns = [ url(<span class="hljs-string"><span class="hljs-string">r'^$'</span></span>, views.index, name=<span class="hljs-string"><span class="hljs-string">'index'</span></span>), ]</code> </pre><br>  Atom: <br>  Die Datei <i>/django/mybot/vk_bot/views.py wurde</i> bearbeitet. <i>Es wurde</i> eine Funktion namens index hinzugef√ºgt, die ausgef√ºhrt wird, wenn die Adresse im Browser angefordert wird <br><pre>  https://mybot.mysite.ru/vk_bot/ </pre><br><br>  views.py <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- from __future__ import unicode_literals from django.views.decorators.csrf import csrf_exempt from django.shortcuts import render from django.http import HttpResponse from bot_config import * # import token, confirmation_token and over constants from bot_config.py import json, vk # vk is library from VK """ Using VK Callback API version 5.5 For more ditalies visit https://vk.com/dev/callback_api """ """ From Django documentation (https://docs.djangoproject.com/en/1.11/ref/request-response/) When a page is requested, Django automatically creates an HttpRequest object that contains metadata about the request. Then Django loads the appropriate view, passing the HttpRequest as the first argument to the view function. This argiment is &lt;request&gt; in def index(request): Decorator &lt;@csrf_exempt&gt; marks a view as being exempt from the protection ensured by the Django middleware. For cross site request protection will be used secret key from VK """ @csrf_exempt #exempt index() function from built-in Django protection def index(request): #url: https://mybot.mysite.ru/vk_bot/ if (request.method == "POST"): data = json.loads(request.body)# take POST request from auto-generated variable &lt;request.body&gt; in json format if (data['secret'] == secret_key):# if json request contain secret key and it's equal my secret key if (data['type'] == 'confirmation'):# if VK server request confirmation """ For confirmation my server (webhook) it must return confirmation token, whitch issuing in administration web-panel your public group in vk.com. Using &lt;content_type="text/plain"&gt; in HttpResponse function allows you response only plain text, without any format symbols. Parametr &lt;status=200&gt; response to VK server as VK want. """ # confirmation_token from bot_config.py return HttpResponse(confirmation_token, content_type="text/plain", status=200) if (data['type'] == 'message_new'):# if VK server send a message session = vk.Session() api = vk.API(session, v=5.5) user_id = data['object']['user_id'] # token from bot_config.py api.messages.send(access_token = token, user_id = str(user_id), message = "Hello, I'm bot!") return HttpResponse('ok', content_type="text/plain", status=200) else: return HttpResponse('see you :)')</span></span></code> </pre><br>  Im Skript <i>views.py</i> musste ich in der Funktion <i>index (request)</i> den in Django CSRF integrierten Schutz deaktivieren, weil  Ich habe den Fehler "403 Forbidden" erhalten.  CSRF - Cross Site Request Forgery-Schutz - Schutz gegen Cross Site Request Forgery.  Wie CSRF funktioniert, lesen Sie in diesem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> . <br>  Um den Schutz zu deaktivieren, habe ich den Dekorator <i>@csrf_exempt verwendet</i> .  Um diesen Schutz trotzdem zu gew√§hrleisten, habe ich auf einfachere Weise einen geheimen Schl√ºssel verwendet, der im Bereich Gruppenverwaltung auf der VKontakte-Website registriert ist. <br><br>  Dieser Code ist f√ºr die Verarbeitung von Anfragen vom Server verantwortlich, die gesendet werden, um unseren Webhook f√ºr die Ereignisverarbeitung zu verbinden.  Sagen wir einfach "Best√§tigung" unseres Webhooks. <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data[<span class="hljs-string"><span class="hljs-string">'type'</span></span>] == <span class="hljs-string"><span class="hljs-string">'confirmation'</span></span>):<span class="hljs-comment"><span class="hljs-comment"># if VK server request confirmation """ For confirmation my server (webhook) it must return confirmation token, whitch issuing in administration web-panel your public group in vk.com. Using &lt;content_type="text/plain"&gt; in HttpResponse function allows you response only plain text, without any format symbols. Parametr &lt;status=200&gt; response to VK server as VK want. """ # confirmation_token from bot_config.py return HttpResponse(confirmation_token, content_type="text/plain", status=200)</span></span></code> </pre><br>  Bitte beachten Sie, dass ich alle Konfigurationseinstellungen in einer separaten Bot-Konfigurationsdatei <i>bot_config.py behalte</i> und sie daher am Anfang des Skripts verbinde: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bot_config <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-comment"><span class="hljs-comment"># import token, confirmation_token and over constants from bot_config.py</span></span></code> </pre><br>  bot_config.py <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- """ Configuration file for VK bot """ # token issued on the VK group web-administration page token = '...' # confirmation token issued on the VK group web-administration page in "Callback API" section confirmation_token = '...' # secret key for cross site request forgery protection. It will be in each VK server request secret_key = '...'</span></span></code> </pre><br>  Und in diesem Code werden Benutzernachrichten verarbeitet: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data[<span class="hljs-string"><span class="hljs-string">'type'</span></span>] == <span class="hljs-string"><span class="hljs-string">'message_new'</span></span>):<span class="hljs-comment"><span class="hljs-comment"># if VK server send a message session = vk.Session() api = vk.API(session, v=5.5) user_id = data['object']['user_id'] # token from bot_config.py api.messages.send(access_token = token, user_id = str(user_id), message = "Hello, I'm bot!") return HttpResponse('ok', content_type="text/plain", status=200)</span></span></code> </pre><br>  Wenn etwas unverst√§ndlich schien, k√∂nnen Sie zus√§tzlich den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel √ºber das erste Django-Setup</a> lesen. <br><br>  <strong>Die Magie f√ºr den Webserver</strong> .  Um die Adressierung von Anforderungen an den Webserver zu konfigurieren, ging ich √ºber den FTP-Client FileZilla zum Server im Ordner mit den Dom√§nen und erstellte dort den Ordner " <i>mybot.mysite.ru</i> ". Dort wurden drei Dateien abgelegt, deren Inhalt der Hilfe auf dem Hosting entnommen wurde: <br><br>  .htaccess <br><pre> <code class="python hljs">AddHandler wsgi-script .wsgi RewriteEngine on RewriteCond %{REQUEST_FILENAME} !-f RewriteRule ^(.*)$ /django.wsgi/$<span class="hljs-number"><span class="hljs-number">1</span></span> [QSA,PT,L] RewriteCond %{HTTP:X-Forwarded-Protocol} !=https RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R=<span class="hljs-number"><span class="hljs-number">301</span></span>,L]</code> </pre><br>  django.wsgi <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os, sys virtual_env = os.path.expanduser(<span class="hljs-string"><span class="hljs-string">'~/virtualenv/myEnv'</span></span>) activate_this = os.path.join(virtual_env, <span class="hljs-string"><span class="hljs-string">'bin/activate_this.py'</span></span>) execfile(activate_this, dict(__file__=activate_this)) sys.path.insert(<span class="hljs-number"><span class="hljs-number">0</span></span>, os.path.join(os.path.expanduser(<span class="hljs-string"><span class="hljs-string">'~'</span></span>), <span class="hljs-string"><span class="hljs-string">'django/mybot'</span></span>)) os.environ[<span class="hljs-string"><span class="hljs-string">'DJANGO_SETTINGS_MODULE'</span></span>] = <span class="hljs-string"><span class="hljs-string">'mybot.settings'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.core.wsgi <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> get_wsgi_application application = get_wsgi_application()</code> </pre><br>  Hier ist "myEnv" der Name der von Ihnen erstellten virtuellen Umgebung, "django" der Ordner im Stammbereich des Dateisystems auf dem Hosting, "mybot" der Name des Projekts, das wir mit Django erstellt haben. <br><br>  index.html <br><pre> <code class="python hljs">  </code> </pre><br>  <strong>Binden Sie unseren Webhook an die Nachrichtenverarbeitung in der erstellten VKontakte-Gruppe.</strong> <br>  Dazu kehren wir zum Abschnitt zum Verwalten unserer Gruppe auf der VKontakte-Website zur√ºck (siehe Abbildung oben).  Wir geben unsere Webhook-Adresse in das Feld "Adresse" ein <pre>  https://mybot.mysite.ru/vk_bot/ </pre>  und klicken Sie auf die Schaltfl√§che "Best√§tigen".  Wenn unsere <i>Indexfunktion (Anforderungsfunktion)</i> , die in der Datei <i>/django/mybot/vk_bot/views.py geschrieben</i> ist <i>,</i> ordnungsgem√§√ü funktioniert, <i>dh</i> keine Tippfehler und Fehler enth√§lt, wird ein gr√ºnes H√§kchen angezeigt, das symbolisiert, dass alles in Ordnung ist. <br><br>  Damit unser Webhook vom VKontakte-Server Nachrichten √ºber neue Benutzernachrichten empf√§ngt, aktivieren Sie im Abschnitt zum Verwalten unserer Gruppe auf der VKontakte-Website auf der Registerkarte "Ereignistypen" das Kontrollk√§stchen "Eingehende Nachrichten". <br><br>  Infolgedessen empf√§ngt unser Skript diese Nachrichten im <i>JSON-</i> Format: <br><br><pre> <code class="python hljs">{<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"message_new"</span></span>,<span class="hljs-string"><span class="hljs-string">"object"</span></span>:{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">891</span></span>,<span class="hljs-string"><span class="hljs-string">"date"</span></span>:<span class="hljs-number"><span class="hljs-number">1541599508</span></span>,<span class="hljs-string"><span class="hljs-string">"out"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"user_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1.</span></span>.<span class="hljs-number"><span class="hljs-number">.1</span></span>,<span class="hljs-string"><span class="hljs-string">"read_state"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"body"</span></span>:<span class="hljs-string"><span class="hljs-string">"  "</span></span>},<span class="hljs-string"><span class="hljs-string">"group_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1.</span></span>.<span class="hljs-number"><span class="hljs-number">.4</span></span>,<span class="hljs-string"><span class="hljs-string">"secret"</span></span>:<span class="hljs-string"><span class="hljs-string">"uxSBw"</span></span>}</code> </pre><br>  Bitte beachten Sie, dass die <i>json-</i> Nachricht ein "geheimes" Feld enth√§lt.  Dies ist derselbe geheime Schl√ºssel, den ich im Bereich Gruppenverwaltung auf VKontakte registriert habe, anstelle des in Django CSRF integrierten Schutzes, den ich deaktivieren musste. <br><br><h3>  Wie macht man einen Bot schlauer und besser? </h3><br>  Sie k√∂nnen eine Datenbank mit Antworten f√ºr den Benutzer erstellen und dem Bot beibringen, die Antwort auszuw√§hlen, die der Frage des Benutzers am n√§chsten kommt.  Ich werde dar√ºber in einem separaten Artikel sprechen. <br>  Es ist m√∂glich und notwendig, Benutzerinteraktionsszenarien sozusagen zu programmieren, um ein Gespr√§ch aufrechtzuerhalten. <br><br>  Viel Gl√ºck bei Ihrer kreativen Arbeit! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429628/">https://habr.com/ru/post/de429628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429618/index.html">Elektronisches Spiel XO</a></li>
<li><a href="../de429620/index.html">Wie ich Karten der Kontinente f√ºr mein Spiel erstellt habe</a></li>
<li><a href="../de429622/index.html">Roboter ersetzten Amazon durch 20.000 Arbeiter</a></li>
<li><a href="../de429624/index.html">Wie die NASA Roboter einsetzen wird, um Raketentreibstoff aus Marsboden herzustellen</a></li>
<li><a href="../de429626/index.html">Genomcracker haben gezeigt, dass keine DNA mehr anonym ist</a></li>
<li><a href="../de429630/index.html">"Monster in Spielen oder Angst vielf√§ltig machen"</a></li>
<li><a href="../de429632/index.html">Gr√ºnde f√ºr die Ablehnung von Hostern beim Hinzuf√ºgen zu Verzeichnissen</a></li>
<li><a href="../de429634/index.html">So funktioniert die Suche nach Krediten im Anti-Plagiat</a></li>
<li><a href="../de429636/index.html">Installieren Sie 3CX PBX in Amazon Lightsail Cloud</a></li>
<li><a href="../de429638/index.html">Chat, Extrakt: Die Architektur komplexer Chatbots</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>