<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêä üèçÔ∏è üë¥üèΩ Bo√Æte √† outils de refactorisation de base de donn√©es: Flyway vs. Liquibase üçπ üåΩ üö¥üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous parlerons de Flyway et Liquibase , les deux outils de refactoring de base de donn√©es Java les plus populaires. Le but de l'arti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bo√Æte √† outils de refactorisation de base de donn√©es: Flyway vs. Liquibase</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/440696/"><p>  Dans cet article, nous parlerons de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flyway</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liquibase</a> , les deux outils de refactoring de base de donn√©es Java les plus populaires.  Le but de l'article est de comparer ces outils et de savoir lequel est pr√©f√©rable d'utiliser dans quels cas. </p><br><p><img src="https://habrastorage.org/webt/qb/y-/rk/qby-rk-zmymfr22geirsw4t5yrq.png" alt="Db omnibus"></p><a name="habracut"></a><br><h2 id="flyway">  Flyway </h2><br><p>  Le concept Flyway est centr√© sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">six √©quipes diff√©rentes</a> pour prendre en charge la refactorisation et le versionnage automatis√©s des bases de donn√©es.  Ces commandes peuvent √™tre ex√©cut√©es √† partir de la ligne de commande, pendant le processus de g√©n√©ration (produites √† l'aide de Maven ou Gradle), ou directement √† partir du code Java √† l'aide d'appels d'API.  Lors de l'ex√©cution de ces commandes, vous devez fournir les param√®tres de connexion √† la base de donn√©es (URL, nom d'utilisateur, mot de passe) que vous souhaitez refactoriser. </p><br><p> La commande principale s'appelle <code>migrate</code> et ex√©cute une fonction qui contient toute l'essence du refactoring de base de donn√©es: elle scanne un dossier sp√©cial avec des scripts sql (dont chacun a un num√©ro de version dans le nom du fichier) et v√©rifie lesquels d'entre eux ont d√©j√† √©t√© appliqu√©s √† la base de donn√©es cible.  Il ex√©cute ensuite ceux d'entre eux qui n'ont pas encore √©t√© appliqu√©s √† cette base de donn√©es.  En cas de conflit, par exemple, si le script d√©j√† appliqu√© a chang√© depuis son utilisation, Flyway interrompt son fonctionnement avec un message d'erreur. </p><br><p>  Une caract√©ristique unique de Flyway est que les scripts de migration peuvent √™tre non seulement au format SQL, mais √©galement sous forme de code Java.  La deuxi√®me option vous permet d'impl√©menter des migrations dynamiques avec une logique complexe.  Cependant, vous devez utiliser l'approche Java avec prudence, car ces scripts de migration sont g√©n√©ralement difficiles √† d√©boguer en cas de probl√®me. </p><br><p>  En plus de la commande principale de <code>migrate</code> , Flyway dispose de commandes suppl√©mentaires qui facilitent le processus de refactorisation de la base de donn√©es. </p><br><p>  La commande <code>info</code> affiche tous les scripts de migration disponibles √† partir d'un dossier donn√© et note lesquels d'entre eux ont d√©j√† √©t√© utilis√©s et lesquels ne seront appliqu√©s qu'√† la base de donn√©es cible. </p><br><p>  Pour v√©rifier si les scripts appliqu√©s √† la base de donn√©es ont chang√©, la commande <code>validate</code> est utilis√©e.  Il est utile pour nous de savoir si le script d√©j√† appliqu√© du dossier a √©t√© modifi√© depuis qu'il a √©t√© appliqu√© √† la base de donn√©es, car cela peut signifier que le script a √©t√© appliqu√© √† diff√©rentes bases de donn√©es dans diff√©rentes versions, ce qui peut entra√Æner des probl√®mes. </p><br><p>  Si vous pensez que les scripts doivent √™tre utilis√©s malgr√© l'√©chec indiqu√© par la commande validate, vous pouvez ex√©cuter la commande repair.  Il r√©initialisera la table de base de donn√©es utilis√©e par Flyway pour corriger les scripts qui ont d√©j√† √©t√© appliqu√©s (par d√©faut, cette table est appel√©e SCHEMA_VERSION). </p><br><p>  Et la derni√®re commande, mais non moins importante, <code>clean</code> efface compl√®tement le sch√©ma s√©lectionn√© (comme vous le savez, cette commande ne doit √™tre utilis√©e que pour les bases de donn√©es de test). </p><br><h2 id="liquibase">  Liquibase </h2><br><p>  Liquibase adopte une approche diff√©rente pour impl√©menter le refactoring de base de donn√©es.  Contrairement √† Flyway, qui prend en charge les scripts de migration uniquement aux formats SQL et Java, Liquibase vous permet d'abstraire de SQL et ainsi de supprimer la refactorisation de la base de donn√©es de son impl√©mentation sp√©cifique. </p><br><p>  Au lieu des scripts SQL, Liquibase prend en charge les scripts de migration aux formats XML, YAML et JSON.  Dans ces scripts, vous d√©finissez les modifications apport√©es √† la base de donn√©es au niveau de l'abstraction.  Pour chaque modification, Liquibase a un √©l√©ment correspondant en XML, YAML et JSON.  Par exemple, une modification qui cr√©e une nouvelle table de base de donn√©es au format YAML ressemble √† ceci: </p><br><pre> <code class="plaintext hljs">createTable: tableName: Customer columns: - column: name: name type: varchar(255) - column: name: address type: varchar(255)</code> </pre> <br><p>  Les modifications telles que l' <code>add column</code> , la <code>create index</code> ou la <code>alter table</code> et d'autres, se ressemblent. <br>  Pendant le fonctionnement, Liquibase applique automatiquement tous les scripts qui n'ont pas encore √©t√© utilis√©s et, comme Flyway, enregistre leurs m√©tadonn√©es dans une table de base de donn√©es sp√©ciale.  Comme Flyway, Liquibase peut √™tre invoqu√© depuis la ligne de commande des outils de build ou directement via son API Java. </p><br><h2 id="v-kakih-sluchayah-ih-ispolzovat">  Quand les utiliser? </h2><br><p>  Flyway et Liquibase prennent en charge toutes les fonctions n√©cessaires √† la refactorisation et au versionnage professionnels de la base de donn√©es, de sorte que vous saurez toujours √† quelle version du sch√©ma de base de donn√©es vous avez affaire et si elle correspond √† la version de votre logiciel.  Les deux outils sont int√©gr√©s √† Maven et Gradle et √† l'√©cosyst√®me Spring Boot, de sorte que le refactoring de la base de donn√©es peut √™tre enti√®rement automatis√©. </p><br><p>  Flyway utilise SQL pour identifier les modifications de base de donn√©es, vous pouvez donc configurer des scripts SQL pour fonctionner efficacement avec des types sp√©cifiques de bases de donn√©es sur votre projet, comme Oracle ou PostgreSQL.  D'un autre c√¥t√©, Liquibase introduit un niveau d'abstraction suppl√©mentaire en utilisant XML, YAML ou JSON pour d√©tecter les modifications de la base de donn√©es.  Ainsi, Liquibase est mieux adapt√© aux logiciels qui doivent √™tre install√©s dans diff√©rents environnements avec diff√©rents types de serveurs de base de donn√©es.  Cependant, si vous avez besoin d'un contr√¥le total sur votre SQL, Flyway est votre choix, car il vous permet de modifier la base de donn√©es en utilisant un SQL enti√®rement personnalis√© ou m√™me en utilisant du code Java. </p><br><p>  Le hic avec les deux outils est qu'ils sont soutenus par une seule personne <em>(du traducteur: selon l'auteur)</em> , et non par une grande √©quipe.  Cela peut avoir un impact n√©gatif sur le d√©veloppement futur des deux outils, mais ce n'est pas n√©cessaire.  Au moment d'√©crire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ces lignes</a> , l'activit√© dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le r√©f√©rentiel</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flyway</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> est plus √©lev√©e que dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le r√©f√©rentiel Liquibase</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440696/">https://habr.com/ru/post/fr440696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440682/index.html">- Et vous faites du gaz l√†-bas dans l'industrie p√©trochimique, non?</a></li>
<li><a href="../fr440688/index.html">PR in IT: comment vivre, o√π aller?</a></li>
<li><a href="../fr440690/index.html">Fonctionnalit√©s de travail avec Mesh dans Unity</a></li>
<li><a href="../fr440692/index.html">Quel est le probl√®me avec les tests A / B</a></li>
<li><a href="../fr440694/index.html">Cr√©ez une sc√®ne de base dans A-Frame</a></li>
<li><a href="../fr440698/index.html">6 id√©es d'applications de r√©alit√© augment√©e (RA) int√©ressantes</a></li>
<li><a href="../fr440700/index.html">¬´Forces sp√©ciales¬ª de Data Science en interne</a></li>
<li><a href="../fr440702/index.html">Attention - GAZ! ou comment nous avons fait des contrats intelligents non gaz√©ifi√©s</a></li>
<li><a href="../fr440706/index.html">InoThings ++ Professional IoT Conference - Ce qui √©tait et ce qui sera</a></li>
<li><a href="../fr440708/index.html">Webinaire ouvert "Travail: le sien et celui d'un autre"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>