<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëä üëßüèª üåæ Otimiza√ß√£o de consultas ao banco de dados no exemplo de servi√ßo B2B para construtores üßñüèº üë®‚Äçüë®‚Äçüë¶ üë©üèª‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como crescer 10 vezes com o n√∫mero de consultas ao banco de dados sem mudar para um servidor mais eficiente e manter o sistema funcionando? Vou contar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Otimiza√ß√£o de consultas ao banco de dados no exemplo de servi√ßo B2B para construtores</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461071/"> Como crescer 10 vezes com o n√∫mero de consultas ao banco de dados sem mudar para um servidor mais eficiente e manter o sistema funcionando?  Vou contar como lutamos com a degrada√ß√£o do desempenho de nosso banco de dados, como otimizamos as consultas SQL para atender ao maior n√∫mero poss√≠vel de usu√°rios e n√£o aumentar o custo dos recursos de computa√ß√£o. <br><a name="habracut"></a><br>  Presto um servi√ßo para gerenciar processos de neg√≥cios em empresas de constru√ß√£o.  Cerca de 3 mil empresas trabalham conosco.  Mais de 10 mil pessoas trabalham com nosso sistema por 4-10 horas todos os dias.  Ele resolve v√°rias tarefas de planejamento, alertas, avisos, valida√ß√µes ... Utilizamos o PostgreSQL 9.6.  Temos cerca de 300 tabelas no banco de dados e todos os dias s√£o enviados at√© 200 milh√µes de solicita√ß√µes (10 mil diferentes).  Em m√©dia, temos de 3 a 4 mil solicita√ß√µes por segundo, nos momentos mais ativos, mais de 10 mil solicita√ß√µes por segundo.  A maioria dos pedidos √© OLAP.  H√° muito menos adi√ß√µes, modifica√ß√µes e exclus√µes, ou seja, a carga OLTP √© relativamente pequena.  Forneci todos esses n√∫meros para que voc√™ possa avaliar o escopo do nosso projeto e entender como nossa experi√™ncia pode ser √∫til para voc√™. <br><br><h3>  A primeira foto.  Lyrical </h3><br>  Quando come√ßamos o desenvolvimento, n√£o pens√°vamos realmente sobre o tipo de carga no banco de dados e o que far√≠amos se o servidor parar de puxar.  Ao projetar o banco de dados, seguimos as recomenda√ß√µes gerais e tentamos n√£o dar um tiro no p√©, mas al√©m de dicas gerais como ‚Äún√£o use o padr√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Entity Attribute Values</a> , n√£o fomos.  Projetado com base nos princ√≠pios da normaliza√ß√£o, evitando a redund√¢ncia de dados e n√£o se preocupava em acelerar determinadas consultas.  Assim que os primeiros usu√°rios chegaram, encontramos um problema de desempenho.  Como sempre, n√£o est√°vamos preparados para isso.  Os primeiros problemas foram simples.  Como regra, tudo foi decidido adicionando um novo √≠ndice.  Mas chegou um momento em que patches simples pararam de funcionar.  Tendo percebido que n√£o h√° experi√™ncia suficiente e est√° se tornando cada vez mais dif√≠cil entender qual √© a causa dos problemas, contratamos especialistas que nos ajudaram a configurar o servidor corretamente, conectar o monitoramento e mostrar onde procurar para obter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estat√≠sticas</a> . <br><br><h3>  A segunda foto.  Estat√≠stica </h3><br>  Portanto, temos cerca de 10 mil consultas diferentes que s√£o executadas em nosso banco de dados por dia.  Desses 10 mil, existem monstros que rodam de 2 a 3 milh√µes de vezes, com um tempo m√©dio de execu√ß√£o de 0,1 a 0,3 ms e h√° consultas com um tempo m√©dio de execu√ß√£o de 30 segundos, chamadas 100 vezes por dia. <br><br>  N√£o foi poss√≠vel otimizar todas as 10 mil consultas, por isso decidimos descobrir onde direcionar esfor√ßos para melhorar o desempenho do banco de dados corretamente.  Ap√≥s v√°rias itera√ß√µes, come√ßamos a dividir solicita√ß√µes em tipos. <br><br><h4>  TOP consultas </h4><br>  Essas s√£o as consultas mais dif√≠ceis que levam mais tempo (tempo total).  Essas s√£o consultas que s√£o chamadas com muita frequ√™ncia ou que demoram muito tempo (consultas longas e frequentes foram otimizadas mesmo nas primeiras itera√ß√µes da luta pela velocidade).  Como resultado, o servidor gasta mais tempo em sua execu√ß√£o no total.  Al√©m disso, √© importante separar as principais solicita√ß√µes pelo tempo total de execu√ß√£o e separadamente pelo tempo de IO.  As maneiras de otimizar essas consultas s√£o ligeiramente diferentes. <br><br>  A pr√°tica usual de todas as empresas √© trabalhar com solicita√ß√µes TOP.  Existem alguns deles, a otimiza√ß√£o de at√© uma solicita√ß√£o pode liberar 5 a 10% dos recursos.  No entanto, √† medida que o projeto envelhece, otimizar as consultas TOP se torna uma tarefa cada vez mais n√£o trivial.  Todos os m√©todos simples j√° foram elaborados, e mesmo a solicita√ß√£o mais "dif√≠cil" retira "apenas" 3-5% dos recursos.  Se, no total, as consultas TOP demorarem menos de 30 a 40% do tempo, provavelmente voc√™ j√° fez esfor√ßos para que elas funcionem rapidamente e √© hora de otimizar as consultas do pr√≥ximo grupo. <br>  Resta responder √† pergunta quantas consultas principais devem ser inclu√≠das neste grupo.  Normalmente, tomo n√£o menos que 10, mas n√£o mais que 20. Tento garantir que o tempo do primeiro e do √∫ltimo no grupo TOP n√£o difira mais que 10 vezes.  Ou seja, se o tempo de execu√ß√£o da consulta cair acentuadamente de 1 lugar para 10, eu tomo TOP-10, se a queda for mais suave, aumentarei o tamanho do grupo para 15 ou 20. <br><img src="https://habrastorage.org/webt/y5/j5/yx/y5j5yxa6u4kxlpahplsaprh07ro.png" alt="imagem"><br><br><h4>  Os camponeses m√©dios (m√©dios) </h4><br>  Todos esses s√£o pedidos imediatamente ap√≥s o TOP, com exce√ß√£o dos √∫ltimos 5 a 10%.  Geralmente, na otimiza√ß√£o dessas solicita√ß√µes espec√≠ficas, est√° a capacidade de aumentar bastante o desempenho do servidor.  Essas consultas podem "pesar" at√© 80%.  Mas mesmo que sua participa√ß√£o tenha excedido 50%, √© hora de analis√°-los mais de perto. <br><br><h4>  Cauda </h4><br>  Como foi dito, esses pedidos v√£o no final e levam de 5 a 10% do tempo.  Voc√™ pode esquec√™-los apenas se voc√™ n√£o usar ferramentas de an√°lise autom√°tica de consultas, ent√£o a otimiza√ß√£o delas tamb√©m pode ser barata. <br><br>  Como avaliar cada grupo? <br><br>  Uso uma consulta SQL que ajuda a fazer uma avalia√ß√£o do PostgreSQL (tenho certeza de que, para muitos outros DBMSs, voc√™ pode escrever uma consulta semelhante) <br><br><div class="spoiler">  <b class="spoiler_title">Consulta SQL para estimar o tamanho dos grupos TOP-MEDIUM-TAIL</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(time_top) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> sum_top, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(time_medium) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> sum_medium, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(time_tail) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> sum_tail <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> rn &lt;= <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> tt_percent <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> time_top, <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> rn &gt; <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> rn &lt;= <span class="hljs-number"><span class="hljs-number">800</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> tt_percent <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> time_medium, <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> rn &gt; <span class="hljs-number"><span class="hljs-number">800</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> tt_percent <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> time_tail <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> total_time / (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(total_time) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements) * <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> tt_percent, <span class="hljs-keyword"><span class="hljs-keyword">query</span></span>, ROW_NUMBER () <span class="hljs-keyword"><span class="hljs-keyword">OVER</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> rn <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> t ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> ts</code> </pre> <br></div></div><br>  O resultado da consulta s√£o tr√™s colunas, cada uma das quais cont√©m uma porcentagem do tempo gasto no processamento de solicita√ß√µes desse grupo.  Dentro da consulta, existem dois n√∫meros (no meu caso, 20 e 800) que separam solicita√ß√µes de um grupo de outro. <br><br>  √â assim que as propor√ß√µes de solicita√ß√µes no momento do in√≠cio da otimiza√ß√£o se correlacionam aproximadamente. <br><br><img src="https://habrastorage.org/webt/db/at/i_/dbati_rdn49yulwdicigqdvrgew.png"><br><br>  O diagrama mostra que a parcela de pedidos TOP diminuiu bastante, mas os ‚Äúcamponeses do meio‚Äù cresceram. <br>  Inicialmente, os erros mais comuns atingem as consultas mais importantes.  Com o tempo, as doen√ßas infantis desapareceram, a parcela de pedidos TOP foi reduzida e foram necess√°rios mais esfor√ßos para acelerar pedidos dif√≠ceis. <br><br><div class="spoiler">  <b class="spoiler_title">Para obter o texto das solicita√ß√µes, usamos essa solicita√ß√£o</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ROW_NUMBER () <span class="hljs-keyword"><span class="hljs-keyword">OVER</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> rn, total_time / (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(total_time) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements) * <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> tt_percent, <span class="hljs-keyword"><span class="hljs-keyword">query</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> T <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> rn &lt;= <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-comment"><span class="hljs-comment">-- TOP -- rn &gt; 20 AND rn &lt;= 800 -- MEDIUM -- rn &gt; 800 -- TAIL</span></span></code> </pre><br></div></div><br>  Aqui est√° uma lista dos truques mais usados ‚Äã‚Äãque nos ajudaram a acelerar as consultas TOP: <br><br><ul><li>  Redesenhar sistemas, por exemplo, processando a l√≥gica de notifica√ß√£o no intermedi√°rio de mensagens em vez de consultas peri√≥dicas ao banco de dados </li><li>  Adicionando ou modificando √≠ndices </li><li>  Reescrever consultas ORM em SQL puro </li><li>  Reescrever a l√≥gica de carregamento lento de dados </li><li>  Armazenamento em cache atrav√©s da desnormaliza√ß√£o de dados.  Por exemplo, temos um link entre as tabelas Entrega -&gt; Fatura -&gt; Solicita√ß√£o -&gt; Solicita√ß√£o.  Ou seja, cada entrega est√° associada ao aplicativo por meio de outras tabelas.  Para n√£o vincular todas as tabelas em cada solicita√ß√£o, duplicamos o link para o aplicativo na tabela Entrega. </li><li>  Armazenando em cache tabelas est√°ticas com diret√≥rios e raramente alterando tabelas na mem√≥ria do programa. </li></ul><br>  √Äs vezes, as mudan√ßas se arrastavam em um redesenho impressionante, mas forneciam de 5 a 10% da descarga do sistema e eram justificadas.  Com o tempo, o escapamento tornou-se cada vez menos, e o redesenho precisou ser cada vez mais s√©rio. <br><br>  Em seguida, chamamos a aten√ß√£o para o segundo grupo de pedidos - o grupo de camponeses m√©dios.  Ele tem muito mais solicita√ß√µes e parecia que levaria muito tempo para analisar todo o grupo.  No entanto, a maioria das consultas acabou sendo muito simples para otimiza√ß√£o e muitos problemas foram repetidos dezenas de vezes em diferentes varia√ß√µes.  Aqui est√£o alguns exemplos de otimiza√ß√µes t√≠picas que aplicamos a dezenas de consultas semelhantes e cada grupo de consultas otimizadas descarregou o banco de dados em 3-5%. <br><br><ul><li>  Em vez de verificar a presen√ßa de registros com COUNT e uma verifica√ß√£o completa da tabela, EXISTS come√ßou a ser usado. <br></li><li>  Nos livramos do DISTINCT (n√£o h√° receita geral, mas √†s vezes voc√™ pode se livrar dele facilmente, acelerando a solicita√ß√£o de 10 a 100 vezes). <br><br>  Por exemplo, em vez de consultar para selecionar todos os drivers em uma grande tabela de entrega (ENTREGA) <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> P.ID, P.FIRST_NAME, P.LAST_NAME <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> DELIVERY D <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> PERSON P <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> D.DRIVER_ID = P.ID</code> </pre><br>  solicitou uma tabela PERSON relativamente pequena <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> P.ID, P.FIRST_NAME, P.LAST_NAME <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> PERSON <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> D.ID <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> DELIVERY <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> D.DRIVER_ID = P.ID)</code> </pre><br>  Parece que usamos uma subconsulta correlacionada, mas ela fornece uma acelera√ß√£o de mais de 10 vezes. <br></li><li>  Em muitos casos, COUNT e <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">substitu√≠do pelo c√°lculo do valor aproximado</a> <br></li><li>  em vez de <br><br><pre> <code class="sql hljs">UPPER(s) LIKE JOHN%'</code> </pre><br>  usar <br><br><pre> <code class="sql hljs">s ILIKE ‚ÄúJohn%‚Äù</code> </pre><br></li></ul><br>  Cada solicita√ß√£o espec√≠fica √†s vezes era acelerada em 3-1000 vezes.  Apesar do desempenho impressionante, a princ√≠pio pareceu-nos que n√£o havia sentido em otimizar a consulta, executada por 10 ms, inclu√≠da na terceira centena de consultas mais pesadas e no tempo total de carregamento do banco de dados, em cent√©simos de um por cento.  Mas, aplicando a mesma receita a um grupo de solicita√ß√µes semelhantes, recuperamos v√°rios por cento.  Para n√£o perder tempo visualizando manualmente todas as centenas de consultas, escrevemos v√°rios scripts simples que, usando express√µes regulares, encontraram consultas semelhantes.  Como resultado, a pesquisa autom√°tica de grupos de consultas nos permitiu melhorar ainda mais nosso desempenho, gastando esfor√ßos modestos. <br><br>  Como resultado, trabalhamos no mesmo hardware h√° tr√™s anos.  A carga m√©dia di√°ria √© de cerca de 30%, em picos atinge 70%.  O n√∫mero de solicita√ß√µes e o n√∫mero de usu√°rios cresceram cerca de 10 vezes.  E tudo isso gra√ßas ao monitoramento constante desses mesmos grupos de consultas TOP-MEDIUM.  Assim que uma nova solicita√ß√£o aparece no grupo TOP, imediatamente a analisamos e tentamos aceler√°-la.  Analisamos o grupo MEDIUM uma vez por semana usando scripts de an√°lise de consulta.  Se voc√™ encontrar novas solicita√ß√µes que j√° sabemos otimizar, ent√£o as alteramos rapidamente.  √Äs vezes, encontramos novos m√©todos de otimiza√ß√£o que podem ser aplicados a v√°rias consultas ao mesmo tempo. <br><br>  De acordo com nossas previs√µes, o servidor atual suportar√° um aumento no n√∫mero de usu√°rios em mais 3-5 vezes.  √â verdade que temos mais um trunfo na manga; ainda n√£o traduzimos as consultas SELECT no espelho, conforme recomendado.  Mas n√£o fazemos isso conscientemente, pois queremos esgotar completamente as possibilidades de otimiza√ß√£o "inteligente" antes de ativar a "artilharia pesada". <br>  Uma an√°lise cr√≠tica do trabalho realizado pode sugerir o uso da escala vertical.  Compre um servidor mais poderoso, em vez de perder o tempo de especialistas.  O servidor pode n√£o custar muito, especialmente porque os limites da escala vertical ainda n√£o foram esgotados.  No entanto, apenas o n√∫mero de solicita√ß√µes aumentou 10 vezes.  Por v√°rios anos, a funcionalidade do sistema aumentou e agora h√° mais variedades de solicita√ß√µes.  A funcionalidade que foi causada pelo armazenamento em cache √© realizada por menos solicita√ß√µes, al√©m disso, por solicita√ß√µes mais eficientes.  Assim, voc√™ pode multiplicar com seguran√ßa por outros 5 para obter o coeficiente de acelera√ß√£o real.  Portanto, de acordo com as estimativas mais conservadoras, podemos dizer que a acelera√ß√£o foi 50 ou mais vezes.  Agitar verticalmente o servidor 50 vezes custaria mais.  Especialmente considerando que, uma vez que a otimiza√ß√£o √© realizada o tempo todo, √© cobrada uma fatura de um servidor alugado todo m√™s. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461071/">https://habr.com/ru/post/pt461071/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt461059/index.html">Escrevendo um aplicativo Android para f√£s de filmes - Parte 1 (prototipagem)</a></li>
<li><a href="../pt461061/index.html">Ligas de magn√©sio, limites duplos e segrega√ß√£o</a></li>
<li><a href="../pt461063/index.html">Intera√ß√£o de R com bancos de dados no exemplo do Microsoft SQL Server e outros DBMS</a></li>
<li><a href="../pt461067/index.html">As 65 principais perguntas sobre SQL das entrevistas de emprego para as quais voc√™ deve estar preparado em 2019. Parte I</a></li>
<li><a href="../pt461069/index.html">C√¢meras IP externas Nobelic: testes, tecnologias e recursos dos sistemas de vigil√¢ncia por v√≠deo Ivideon</a></li>
<li><a href="../pt461073/index.html">Conectamos mapas on-line ao navegador no smartphone. Parte 3 - OverpassTurbo</a></li>
<li><a href="../pt461075/index.html">Intelig√™ncia de neg√≥cios. Objetos de TI, componentes, ferramentas</a></li>
<li><a href="../pt461077/index.html">Como s√£o cozidos os pentesters? Teste de entrada para estagi√°rios de seguran√ßa digital</a></li>
<li><a href="../pt461079/index.html">Cidade sem engarrafamentos</a></li>
<li><a href="../pt461081/index.html">O dia em que Dodo parou. Script ass√≠ncrono</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>