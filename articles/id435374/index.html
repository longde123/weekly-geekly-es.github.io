<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🏭 🍾 👈 Matematika di Gamedev sederhana. Triangulasi dan Triangle.Net di Unity 👨🏽‍🚒 🧘🏽 🗞️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! Nama saya Grisha dan saya adalah pendiri CGDevs. Matematika adalah alat yang sangat keren ketika mengembangkan game. Tetapi jika kita m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Matematika di Gamedev sederhana. Triangulasi dan Triangle.Net di Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435374/"> Halo semuanya!  Nama saya Grisha dan saya adalah pendiri CGDevs.  Matematika adalah alat yang sangat keren ketika mengembangkan game.  Tetapi jika kita mengatakan sulit untuk mengelola tanpa memahami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">vektor</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">matriks</a> , maka algoritma triangulasi bukanlah hal yang diperlukan, tetapi dengan mereka sejumlah besar masalah menarik diselesaikan.  Hari ini saya ingin berbicara tentang alat yang agak penting dalam geometri komputasi, seperti triangulasi dan aplikasinya dalam industri game.  Selain itu, saya menulis port dan beberapa pembungkus untuk library Triangle.Net yang sangat baik untuk Unity.  Jika tertarik - selamat datang di kucing.  Tautan ke github terlampir. <br><br><img src="https://habrastorage.org/webt/4b/se/ny/4bsenyx2deo5lmmtgaubiqi5kwy.jpeg"><br><a name="habracut"></a><br><h3>  Apa itu triangulasi? </h3><br>  Dalam kasus umum, <b>triangulasi</b> adalah partisi dari objek geometris menjadi segitiga.  Konsep ini sendiri cukup sederhana.  Contoh dasar triangulasi dalam kasus mesin game adalah mesh.  Sebenarnya, sebuah mesh dapat terdiri tidak hanya dari segitiga, tetapi dalam mesin game karena berbagai alasan itu adalah mesh yang terdiri dari segitiga yang diambil. <br><br><img src="https://habrastorage.org/webt/vm/zo/-o/vmzo-o4hsa5vx472qkg5nxqvxku.jpeg"><br><br>  Triangulasi berbeda, tetapi salah satu jenis triangulasi yang paling populer adalah <b>triangulasi Delaunay.</b>  Jenis triangulasi ini dibedakan berdasarkan sifat yang dalam lingkaran dibatasi di sekitar setiap segitiga, hanya simpul-simpul dari segitiga ini yang terletak. <br><br><img src="https://habrastorage.org/webt/nx/ss/pp/nxssppvieg3beuq6bqiazugvhn8.png"><br><br><h3>  Mengapa mereka dibutuhkan? </h3><br>  Secara umum, di luar industri game, sejumlah besar tugas diselesaikan dengan bantuan triangulasi.  Di game dev, tugas pertama yang muncul di benak adalah jala navigasi.  Navmesh adalah struktur data yang menentukan seberapa banyak ruang yang bisa dilalui pemain.  Ini menghindari tugas komputasi yang kompleks seperti menentukan tabrakan dengan bagian dari lingkungan. <br><br>  Masalah menarik kedua yang dapat dipecahkan dengan menggunakan triangulasi Delaunay dalam pengembangan game adalah generasi medan dan objek yang direpresentasikan sebagai sekumpulan poin.  Keuntungan utama dari triangulasi Delaunay dalam hal ini adalah bahwa, berdasarkan sifat-sifatnya, ini memungkinkan Anda untuk menghindari segitiga yang sangat tajam yang akan mengganggu dan membuat artefak pada saluran pembuangan. <br><br><img src="https://habrastorage.org/webt/78/yl/d1/78yld1jdecftxumbistwdmc-gaw.jpeg"><br><br>  Selain itu, dengan menggunakan triangulasi dan algoritma Delaunay terbatas seperti algoritma kedua Chew dan algoritma Ruppert, Anda dapat menghasilkan jerat yang lebih baik untuk tirrains dan menghasilkan jerat yang baik untuk aplikasi lain - metode elemen hingga. <br><br>  Metode elemen hingga itu sendiri adalah salah satu metode untuk menyelesaikan masalah fisika terapan.  Dalam gamedev, ini memungkinkan Anda untuk menyelesaikan banyak masalah yang terkait dengan simulasi deformasi, simulasi fluida dan lainnya yang digunakan untuk khusus.  efek.  Biasanya untuk merekam efek dalam animasi, karena untuk real time metode ini memiliki kompleksitas komputasi yang terlalu tinggi.  Detail penting ketika menggunakan metode ini adalah bahwa kesalahan metode tergantung pada sudut segitiga dalam kotak.  Jika ada sudut yang sangat tajam di grid, metode ini memberikan kesalahan besar, untuk alasan ini diperlukan algoritma yang tercantum di atas. <br><br><img src="https://habrastorage.org/webt/jx/ei/x8/jxeix82aopn6q0hjsj3te1beb6u.png"><br><br>  Dan tentu saja, secara umum, generasi mesh prosedural.  Sebagai contoh, proyek github menunjukkan adegan dengan kemampuan menggambar jerat.  Beberapa teka-teki fisik menggunakan aplikasi ini sebagai mekanik dasar.  Tetapi di samping itu, algoritma triangulasi memungkinkan penggunaan generasi prosedural untuk menyelesaikan masalah seperti destruksibilitas prosedural dan sebagainya. <br><br>  Selain triangulasi gamedev digunakan dalam jaringan, visi komputer, berbagai algoritma analitik, serta dalam masalah apa geometri komputasi, seperti menggabungkan dan menghilangkan poligon satu sama lain (yang sering berguna dalam masalah yang timbul dalam pengembangan game) <br><br><h3>  Kliping Telinga dengan Lubang </h3><br><img src="https://habrastorage.org/webt/6p/5l/je/6p5ljenmksewgdzp12ini57va-w.png"><br><br>  Mungkin salah satu algoritma triangulasi paling sederhana.  Itu tidak memberikan grid terbaik dan memiliki kompleksitas komputasi terbesar O (n ^ 2) dalam kasus terburuk. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anda dapat membaca lebih lanjut tentang itu di artikel ini.</a> <br><br><h3>  Algoritma Bowyer - Watson </h3><br><img src="https://habrastorage.org/webt/pv/hy/hn/pvhyhn8ktwwigdkxfazttur14gi.jpeg"><br><br>  Algoritma yang menghasilkan triangulasi Delaunay atas satu set poin.  Secara umum, seperti kebanyakan algoritma Delaunay, jika diterapkan dengan benar, kompleksitas algoritmiknya adalah O (n log n), di mana n adalah jumlah simpul.  Tetapi dalam beberapa kasus mungkin butuh O (n ^ 2). <br><br>  Kerugian terkait Kliping Telinga adalah bahwa algoritma ini membangun triangulasi cembung dan dalam implementasi dasarnya tidak melibatkan lubang di kisi yang dihasilkan. <br><br><h3>  Pemrosesan pemurnian Delaunay </h3><br><img src="https://habrastorage.org/webt/va/hh/oo/vahhooegdpz-2vhs9b7e3qaesmi.gif"><br><br>  Algoritma kedua Chew dan algoritma Ruppert adalah algoritma yang memungkinkan Anda untuk memasukkan batasan dalam triangulasi Delaunay dan mengatur sudut minimum segitiga dalam kisi.  Detail penting dari algoritma adalah bahwa mereka dapat masuk ke loop tak terbatas dan dijamin untuk memberikan hasil pada sudut antara sekitar 20,7 derajat dan 29 derajat.  Kemampuan untuk mengatur sudut minimum adalah penting dalam menyelesaikan masalah yang dijelaskan di atas. <br><br>  Algoritma kedua Chew diimplementasikan dalam paket gratis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.cs.cmu.edu/~quake/triangle.html</a> dan port-nya di .Net <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">archive.codeplex.com/?p=triangle</a> <br><br><h3>  Triangle.Net untuk Persatuan </h3><br>  Nah, karena dengan bantuan triangulasi Anda dapat menyelesaikan begitu banyak tugas keren, di hari libur saya ingin menerapkan pembungkus saya untuk Unity, sehingga saya selalu memiliki alat yang berguna.  Dalam implementasi ini, algoritma triangulasi bekerja rata-rata untuk O (n), dan dalam kasus terburuk untuk O (n * log n), di mana n adalah jumlah simpul.  Sebagai contoh, ketika pengujian untuk simpul 1kk tersebar secara acak di seluruh kotak, unit-unit dalam editor pada Intel Core i7-8700 membangun sebuah kotak dalam rata-rata 7,56 detik. <br><br>  Perbedaan utama dari perpustakaan asli dengan adanya metode ekstensi yang dirancang untuk Unity, serta penggantian ganda dengan float di seluruh perpustakaan (+ beberapa operator khusus untuk casting) Double di unit, tidak masuk akal.  Jika kita mempertimbangkan simulasi fisik, maka saya akan menggunakan aplikasi terpisah di perpustakaan plus, dan hasil perhitungan sudah memberi Unity murni untuk visualisasi.  Dan juga mengganti nama tipe Mesh ke TriangleNetMesh agar tidak merobohkan relatif ke Mesh dari Unity.  Ya, mereka sudah berada di ruang nama yang berbeda, tetapi bagaimanapun, saya pikir para pendatang baru akan sedikit dirobohkan oleh fakta bahwa dengan bantuan dari satu Mesh kita mendapatkan yang lain. <br><br>  Inti dari pustaka adalah Anda harus terlebih dahulu menentukan apa yang disebut poligon.  Kemudian, berdasarkan itu, sudah menghasilkan mesh.  Agar ini bekerja dengan struktur data unit, beberapa metode ekstensi telah diperkenalkan. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh penggunaan</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateMesh</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_CurrentState != MeshDrawerState.Nothing) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; Polygon poly = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Polygon(); poly.Add(_Contour); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> hole <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _Holes) { poly.Add(hole, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> triangleNetMesh = (TriangleNetMesh) poly.Triangulate(); GameObject go = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameObject(<span class="hljs-string"><span class="hljs-string">"Generated mesh"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mf = go.AddComponent&lt;MeshFilter&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mesh = triangleNetMesh.GenerateUnityMesh(); mesh.uv = GenerateUv(mesh.vertices); mf.mesh = mesh; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mr = go.AddComponent&lt;MeshRenderer&gt;(); mr.sharedMaterial = _MeshMaterial; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> collider = go.AddComponent&lt;PolygonCollider2D&gt;(); collider.points = _Contour.ToArray(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rb = go.AddComponent&lt;Rigidbody2D&gt;(); rb.mass = triangleNetMesh.Triangles.Sum(tris =&gt; tris.Area); Clear(); }</code> </pre> <br></div></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Untuk contoh demonstrasi dan penggunaan, adegan demo khusus dibuat dengan kemampuan untuk menggambar jerat.  Anda bisa berkenalan dengannya dan port perpustakaan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proyek github.</a> <br><br>  Terima kasih atas perhatian anda!  Saya berharap bahwa port dan artikel akan bermanfaat bagi seseorang dan akan menjadi sedikit lebih jelas mengapa triangulasi dan pengetahuan matematika secara keseluruhan diperlukan.  Saya akan mencoba untuk terus mengungkapkan aplikasi dan metode untuk menyelesaikan berbagai masalah matematika dalam pengembangan game.  Dalam komputasi geometri itu sendiri masih ada banyak hal yang menarik, tetapi selain itu masih ada banyak bagian lain yang menarik dari matematika yang lebih tinggi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id435374/">https://habr.com/ru/post/id435374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id435360/index.html">Cuplikan vs Clover - kalahkan kuis waktu-nyata paling populer</a></li>
<li><a href="../id435362/index.html">Kecepatan hash</a></li>
<li><a href="../id435364/index.html">Menyesuaikan penyelesaian ketergantungan di Musim Semi</a></li>
<li><a href="../id435368/index.html">Anatomi patologis di tempat kerja</a></li>
<li><a href="../id435372/index.html">Beberapa kata tentang FastPath dan FastTrack di MikroTik</a></li>
<li><a href="../id435376/index.html">Ruang 2019: kapal berawak, roket baru, dan wahana bulan</a></li>
<li><a href="../id435380/index.html">Akun gratis di GitHub akan dapat [hampir] tanpa batasan bekerja dengan repositori pribadi</a></li>
<li><a href="../id435384/index.html">Bagaimana saya membuat game online saya. Bagian 1: Jaringan</a></li>
<li><a href="../id435386/index.html">Bagaimana cara berbagi arsitektur dan implementasi tanpa pertengkaran</a></li>
<li><a href="../id435388/index.html">Internet di Kuba. Dari revolusi ke revolusi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>