<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçá üèùÔ∏è ü•£ Transf√©rer le cloud CRM vers la version en bo√Æte üîú ‚úùÔ∏è üëçüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque les capacit√©s du service cloud deviennent d√©j√† rares et que la transition vers la version en bo√Æte est consid√©r√©e comme la prochaine √©tape log...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transf√©rer le cloud CRM vers la version en bo√Æte</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425911/">  Lorsque les capacit√©s du service cloud deviennent d√©j√† rares et que la transition vers la version en bo√Æte est consid√©r√©e comme la prochaine √©tape logique pour le d√©veloppement ult√©rieur du portail d'entreprise et du syst√®me CRM, la question se pose pour les entreprises, comment le faire, ce qui les attend et tout sera pr√©serv√© apr√®s le transfert? <br><a name="habracut"></a><br>  Il semblerait que tout soit assez simple: <br><br><ul><li>  D√©veloppez l'h√¥te avec la bo√Æte; </li><li>  Nous √©crivons le support technique; </li><li>  Nous commandons une sauvegarde; </li><li>  Nous avons h√¢te de le recevoir; </li><li>  Nous d√©ployons la sauvegarde et profitons des larges possibilit√©s de la version box. </li></ul><br>  Mais la pratique montre que la transition du cloud √† la version boxed est loin d'√™tre anodine et n√©cessite un plan d'action clair, une analyse des risques possibles et une pr√©paration au fait que tout ira mal. <br><br>  Nous avons √©t√© approch√©s par un grand d√©veloppeur avec un syst√®me CRM tr√®s charg√© bas√© sur le cloud Bitrix24.  Les directeurs des ventes de plusieurs succursales de l'entreprise ont travaill√© activement dans le CRM, le portail a √©t√© int√©gr√© √† la t√©l√©phonie IP Asterisk pour cr√©er automatiquement des prospects, enregistrer les conversations avec les clients et enregistrer les faits des appels dans une carte client dans CRM.  Plus de 100 leads ont √©t√© cr√©√©s par jour dans CRM via diff√©rents canaux. <br><br>  Il √©tait clair que tout simple dans le temps lors du transfert vers la version en bo√Æte menace le client de pertes √©normes.  Apr√®s avoir discut√© avec le Client de la gravit√© de la transition et des risques possibles, nous nous sommes mis au travail. <br><br>  Tout d'abord, nous avons analys√© les cas et publications existants sur le transfert du cloud vers la box, fait une check-list d√©taill√©e des erreurs que nous pouvons rencontrer: <br><br><ul><li>  Les applications s'ex√©cutant dans le cloud ne sont pas sur la bo√Æte; </li><li>  Le co√ªt des licences pour les applications pour la version cloud et la bo√Æte peut varier; </li><li>  Le risque de perdre certaines donn√©es en raison d'un d√©calage dans le temps pendant le transfert; </li><li>  Certains utilisateurs de diff√©rentes succursales continueront de travailler sur le service cloud apr√®s le transfert, et il sera √©galement n√©cessaire de rechercher et de transf√©rer les entit√©s qu'ils ont cr√©√©es dans CRM; </li><li>  Sur le portail ferm√©, l'application mobile du service ne fonctionnera pas; </li><li>  Apr√®s le transfert, certains utilisateurs ne pourront pas se connecter avec leur ancien mot de passe; </li><li>  Il peut y avoir des dysfonctionnements dans les robots de chat; </li><li>  R√©initialisation fr√©quente des autorisations lorsque vous travaillez sur le portail; </li><li>  Seule une partie des commentaires de t√¢che peut √™tre affich√©e; </li><li>  La base de donn√©es sera sans index de recherche. </li></ul><br>  Ensuite, un algorithme clair des actions avec une ventilation par r√¥les a √©t√© compil√©, qui devait √™tre effectu√© √† la fois par le contractant et par le client: <br><br>  <b>1 phase (moyen d'urgence)</b> <br><br><ul><li>  D√©ploiement de l'environnement de production (entrepreneur); </li><li>  Tester l'environnement d√©ploy√© (entrepreneur); </li><li>  D√©ploiement de la version en bo√Æte sur les h√¥tes (entrepreneur); </li><li>  Achat et installation d'un certificat SSL pour la t√©l√©phonie (achat client, installation entrepreneur); </li><li>  Test de la version en bo√Æte - performances, param√®tres, tests internes (entrepreneur). </li><li>  D√©ploiement de l'environnement de pr√©-production - une copie compl√®te de la production (entrepreneur). </li></ul><br>  <b>2 phases (urgence √©lev√©e)</b> <br><br><ul><li>  Demande de d√©chargement de sauvegarde.  Coordination avec le support technique du service de la date de sauvegarde (Client); </li><li>  Informer les utilisateurs de la date de sauvegarde et √©tablir un plan de stockage temporaire des informations du CRM (Client); </li><li>  D√©ploiement d'une sauvegarde en production (entrepreneur); </li><li>  Mise en place du portail apr√®s sauvegarde (entrepreneur); </li><li>  Mise en place d'un serveur de t√©l√©phonie pour travailler avec le portail (Client); </li><li>  Mise en place d'un module de t√©l√©phonie (contractant); </li><li>  Tests t√©l√©phoniques initiaux (Client); </li><li>  Tests approfondis de CRM, t√©l√©phonie, processus d'affaires CRM (service client); </li><li>  D√©claration de sant√©.  Suppression des donn√©es de test (client); </li><li>  Arr√™t des responsables commerciaux dans le service cloud (Client); </li><li>  Transfert des transactions, leads, contacts depuis la cr√©ation de la sauvegarde de la version cloud vers la box (Contractant); </li><li>  D√©but des travaux des responsables commerciaux sur la version bo√Æte (Client). </li></ul><br>  <b>3 phases (urgence faible)</b> <br><br><ul><li>  Test de la version en bo√Æte dans les 2-3 jours (client); </li><li>  Approbation de la pleine performance (client); </li><li>  Mise √† jour de la pr√©-production - transfert d'une copie compl√®te de la production (entrepreneur). </li></ul><br>  Apr√®s avoir √©tabli ce plan et avoir une check-list avec les erreurs possibles, nous avons r√©alis√© que nous avons trop de risques en raison du grand nombre d'incertitudes: <br><br><ul><li>  √Ä quelle vitesse le service fournira-t-il une sauvegarde? </li><li>  Combien de temps faut-il pour d√©ployer une sauvegarde, √©tant donn√© que la base de donn√©es CRM est √©norme? </li><li>  En combien de temps puis-je reconfigurer le module et le serveur de t√©l√©phonie pour fonctionner correctement avec CRM? </li><li>  Quels bogues sp√©cifiques peuvent appara√Ætre sur le portail, √† quel point seront-ils critiques pour le travail des utilisateurs et combien de temps faut-il pour les corriger? </li></ul><br>  Nous avons r√©alis√© que nous avons un d√©calage ind√©fini qui, √† mesure qu'il augmente, entra√Ænerait de plus en plus de pertes pour le client.  Pour minimiser le d√©calage, il √©tait n√©cessaire de comprendre combien de temps nous consacrons au portage et au d√©bogage du portail. <br><br>  Nous sommes donc arriv√©s √† la conclusion qu'une sauvegarde √† partir du cloud ne sera pas suffisante, et afin de minimiser les pertes, il est n√©cessaire de d√©ployer une sauvegarde - pour identifier tous les risques possibles et estimer le d√©calage temporel, puis une deuxi√®me sauvegarde que nous pourrions planifier de mani√®re √† minimiser les pertes . <br><br>  Bitrix ne fournit qu'une seule sauvegarde et une seule fois, car le processus de transfert du cloud vers la box est techniquement compliqu√©.  En ce qui concerne le support technique et la connexion du client √† ce probl√®me, nous avons toujours le feu vert pour fournir deux sauvegardes √† partir du cloud √† des moments diff√©rents.  L'heure de la premi√®re sauvegarde a √©t√© convenue et le travail de transfert a commenc√©. <br><br><h3>  Volume, vitesse et pi√®ces cass√©es </h3><br>  Afin de comprendre combien et ce qu'il nous faudra du temps, nous avons commenc√© √† tenir un journal dans lequel nous avons enregistr√© chaque √©tape. <br><br>  Ainsi, le portail a d√©marr√© le service de sauvegarde jeudi soir, c'est-√†-dire que le CRM avait les derni√®res donn√©es √† la fin de jeudi, et nous a fourni un lien vers la sauvegarde vendredi apr√®s-midi.  Ici, nous avons rencontr√© la premi√®re difficult√© - la sauvegarde pesait environ 30 Go et la vitesse de t√©l√©chargement √† partir des serveurs Amazon.com qui h√©bergeaient le cloud √©tait loin d'√™tre id√©ale (en moyenne 800 Kb / s).  Apr√®s avoir calcul√© approximativement le temps pendant lequel plusieurs parties de la sauvegarde ont √©t√© charg√©es, nous avons r√©alis√© qu'au total, il faudrait environ 10 heures pour t√©l√©charger la sauvegarde uniquement. <br><br>  Le probl√®me suivant a √©t√© l'apparition d'erreurs lors du pompage de diff√©rentes parties de la sauvegarde, qui n'a √©t√© d√©tect√©e qu'une fois d√©ploy√©e.  En r√®gle g√©n√©rale, ces parties ont √©galement caus√© une erreur de non-concordance de hachage, car il √©tait n√©cessaire d'identifier la partie cass√©e de l'archive dans le texte d'erreur et de la transf√©rer manuellement via SSH, apr√®s quoi le d√©ballage a √©t√© red√©marr√© √† partir de z√©ro de la sauvegarde enti√®re. <br><br>  Apr√®s avoir t√©l√©charg√© et d√©ploy√© avec succ√®s une sauvegarde sur nos h√¥tes, nous avons re√ßu une copie de travail du cloud dans la bo√Æte et sommes pass√©s √† l'√©tape suivante - tester et d√©boguer le portail. <br><br><h3>  Bugs mineurs et push &amp; pull insidieux </h3><br>  √Ä notre grande surprise, les tests de bo√Ætes se sont d√©roul√©s de mani√®re relativement fluide.  Nous avons test√© le CRM, pass√© en revue tous les outils du service, v√©rifi√© la fonctionnalit√© du messager, effectu√© des tests internes et r√©v√©l√© seulement 3 erreurs: <br><br><ul><li>  L'ic√¥ne de pi√®ce jointe dans le messager a disparu et l'envoi de fichiers dans le messager dans son ensemble n'a pas fonctionn√©; </li><li>  Les liens dans les notifications avaient une adresse sans domaine, par exemple: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">entreprise / personnel / utilisateur / 1250 / t√¢ches / t√¢che / vue</a> , respectivement, ne fonctionnaient pas; </li><li>  Certains utilisateurs n'ont pas pu se connecter au portail avec une erreur de connexion / mot de passe incorrecte. </li></ul><br>  Nous √©tions conscients de l'impossibilit√© de se connecter apr√®s le transfert √† l'avance, le service en avertit imm√©diatement lors d'une sauvegarde.  Malheureusement, ce probl√®me ne peut √™tre r√©solu que par les utilisateurs r√©cup√©rant le mot de passe ou modifiant manuellement les mots de passe de chaque utilisateur par l'administrateur, car les mots de passe de Bitrix24.Network ne sont pas stock√©s sur le portail. <br><br>  L'erreur avec les liens dans les notifications a √©t√© r√©solue assez rapidement - en enregistrant le domaine du portail dans les param√®tres du site et les param√®tres du module principal. <br><br>  Mais l'ic√¥ne de pi√®ce jointe manquante dans le messager a caus√© pas mal de soucis.  La t√¢che a pris quelques heures de tentatives infructueuses pour comprendre la raison de l'ic√¥ne manquante.  En cons√©quence, nous avons constat√© que la raison √©tait loin d'√™tre dans le module de disque, comme cela √©tait suppos√© √† l'origine.  La raison r√©side dans le serveur push d√©connect√© dans les param√®tres du module push &amp; pull, qui a automatiquement d√©sactiv√© le transfert de fichiers dans le messager. <br><br><h3>  Test final </h3><br>  Apr√®s des tests et un d√©bogage r√©ussis du portail, un rapport d√©taill√© a √©t√© pr√©par√© pour le client et la prochaine √©tape a √©t√© un test approfondi par le service commercial CRM Client, ainsi que la configuration du serveur de t√©l√©phonie pour fonctionner avec la box et le test des appels. <br><br>  Pendant les tests, aucun probl√®me significatif n'a √©t√© identifi√©.  Nous avons d√©ploy√© un h√¥te de test et y avons d√©ploy√© une copie compl√®te du portail de combat, au cas o√π nous aurions une version 100% fonctionnelle du portail et selon laquelle nous pourrions faire une comparaison dans les param√®tres si des erreurs non standard ne se produisaient pas et n'√©taient pas d√©tect√©es lors du test de la premi√®re sauvegarde. <br><br>  Apr√®s avoir d√©ploy√© une copie du portail, nous avons proc√©d√© √† l'analyse du journal, dans laquelle nous avons corrig√© les erreurs et le temps de les r√©soudre.  Apr√®s avoir analys√© le magazine en d√©tail, nous avons mis √† jour le plan de transfert de la deuxi√®me sauvegarde, r√©alis√© combien nous pouvons perdre des prospects lors du transfert final et r√©serv√© du temps suppl√©mentaire pour l'importation manuelle des prospects perdus √† partir de la version cloud.  Tous les d√©tails et risques ont √©galement √©t√© discut√©s avec le Client et une lettre a √©t√© envoy√©e au support technique du service avec une demande de pr√©paration d'une seconde sauvegarde. <br><br><h3>  Deuxi√®me sauvegarde et pourquoi tout peut-il mal tourner? </h3><br>  Apr√®s avoir convenu de l'heure de cr√©ation de la sauvegarde √©galement jeudi, nous avons pr√©par√© l'√©quipe pour les actions op√©rationnelles avant midi le vendredi.  Dans la r√©gion des 12-13 heures, nous avons re√ßu le lien tant attendu et avons commenc√© le t√©l√©chargement.  Quelques heures plus tard, il √©tait clair que les archives ne seraient pas pomp√©es pendant 10 heures, mais environ 14!  La bande passante du canal de notre fournisseur et des serveurs Amazon.com ce jour-l√† laissait beaucoup √† d√©sirer.  Nous nous pr√©parions pour le travail de nuit, les leads continuant de baisser et le Client attendait un rapport pour commencer la configuration du serveur de t√©l√©phonie. <br><br>  Comme cela arrive souvent, tout ne s'est pas d√©roul√© comme pr√©vu.  L'√©tape suivante consistait √† transf√©rer les prospects accumul√©s de la version cloud vers la bo√Æte - le processus est simple et clair, mais a ses propres nuances.  Si dans la liste des pistes, vous s√©lectionnez les pistes qui doivent √™tre export√©es et cliquez sur ¬´Exporter vers CSV¬ª, alors toutes les pistes existantes dans CRM seront d√©charg√©es, pas seulement celles s√©lectionn√©es.  Il est logique qu'avec une grande base de donn√©es de leads, le cloud soit tomb√© en erreur.  La solution √©tait d'utiliser un filtre, mais dans ce cas, les c√¢bles √©taient d√©charg√©s correctement. <br><br>  D'autres tests ont pass√© sans surprise, comme nous le savions d√©j√†: ce qui ne fonctionnera pas, comment y rem√©dier et o√π.  Apr√®s avoir connect√© et test√© la t√©l√©phonie avec succ√®s, le lundi, les directeurs commerciaux ont d√©j√† pleinement travaill√© avec CRM dans la version en bo√Æte.  Et d√©j√† en √©tat de marche pendant une semaine, nous avons r√©gl√© le portail, sauvegard√©, fait une copie finale du portail sur l'h√¥te de test. <br><br>  L'ensemble du processus de transfert a pris environ une semaine de travail depuis la planification jusqu'√† la configuration finale. <br><br>  En cons√©quence, je voudrais noter l'importance de planifier de tels projets complexes et risqu√©s, une implication obligatoire du Client dans le processus et de parler des risques possibles, m√™me si, comme le montre la pratique, les √©carts par rapport au plan ne font pas exception. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425911/">https://habr.com/ru/post/fr425911/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425899/index.html">Colline de fourmis ou forteresse? Je construis une maison pour le prix d'un appartement. 1 partie</a></li>
<li><a href="../fr425901/index.html">Station m√©t√©o sur Arduino de A √† Z. Partie 1</a></li>
<li><a href="../fr425903/index.html">Les vacances arrivent: SCRF a doubl√© la bande ISM de 868 MHz</a></li>
<li><a href="../fr425905/index.html">Comment √©crire du code assembleur avec des instructions qui se chevauchent (une autre technique pour masquer le bytecode)</a></li>
<li><a href="../fr425907/index.html">Nous faisons un projet d'apprentissage automatique en Python. 2e partie</a></li>
<li><a href="../fr425915/index.html">Comment les communications transfrontali√®res peuvent remplacer les feux de circulation et raccourcir le chemin du travail</a></li>
<li><a href="../fr425917/index.html">Un combattant de la justice emp√™che Waymo de breveter une technologie lidar cl√©</a></li>
<li><a href="../fr425919/index.html">Cartes hexagonales dans Unity: enregistrement et chargement, textures, distances</a></li>
<li><a href="../fr425921/index.html">R√©union de la communaut√© .NET sur CLRium # 4 + en ligne</a></li>
<li><a href="../fr425923/index.html">Doom de 25 ans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>