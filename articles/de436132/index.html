<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåßÔ∏è üö¥üèª üï¢ 12 seltsame Dinge, die nach der Installation des npm-Pakets passieren k√∂nnen üïü üç¶ üßìüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor ein paar Monaten habe ich ein Projekt namens b√∂sartige Pakete (auch bekannt als "b√∂sartige Pakete") gestartet. Es √ºberwacht Aktualisierungen im np...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>12 seltsame Dinge, die nach der Installation des npm-Pakets passieren k√∂nnen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436132/"><p> Vor ein paar Monaten habe ich ein Projekt namens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">b√∂sartige Pakete</a> (auch bekannt als "b√∂sartige Pakete") gestartet.  Es √ºberwacht Aktualisierungen im npm-Repository, l√§dt alle neuen Module herunter und √ºberpr√ºft sie dann auf L√§use - es sucht nach Netzwerkaktivit√§ten, verd√§chtigen Vorg√§ngen mit dem Dateisystem usw.  Selbst kleine Projekte auf node.js haben h√§ufig einen gro√üen Abh√§ngigkeitsbaum, und Entwickler haben physisch keine M√∂glichkeit, sie alle zu testen.  Dies gibt Angreifern einen enormen Handlungsspielraum, und es stellt sich die Frage, wie viel b√∂se Registrierung sich in den dunklen Ecken der npm-Registrierung versteckt.  180.000 gepr√ºfte Pakete sp√§ter bekam ich eine grobe Antwort. </p><br><p><img src="https://habrastorage.org/webt/bg/9_/qs/bg9_qs2qlravq3d4l6qdi1inr0m.png" alt="Bild"></p><a name="habracut"></a><br><p>  Und diese Antwort - vielleicht nicht so sehr. <br>  <em>[Anmerkung: Auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Medium</a> gibt es eine englische Version dieses Artikels, auch von meiner Autorschaft]</em> </p><br><h2 id="chto-npm-paket-mozhet-sdelat-c-vashey-sistemoy">  Was kann ein npm-Paket mit Ihrem System tun? </h2><br><p>  Das Paket kann auf zwei Arten Schaden anrichten - bei der Installation / Deinstallation und zum Zeitpunkt des Starts Ihrer Anwendung.  Schauen wir uns beide Optionen anhand von Beispielen an. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mit NPM-Skripten</a> k√∂nnen Pakete zum Zeitpunkt der Installation und Deinstallation beliebige Befehle ausf√ºhren.  Dazu geh√∂ren <code>postinstall</code> , <code>install</code> , <code>postinstall</code> , <code>preuninstall</code> und <code>postuninstall</code> , die von npm zum richtigen Zeitpunkt im <code>postuninstall</code> automatisch ausgef√ºhrt werden.  Was k√∂nnen sie tun?  Trotzdem kann Ihr aktueller Benutzer alle Ihre Fotos aus dem letzten Urlaub l√∂schen oder Ihren Browserverlauf mit dem FBI zusammenf√ºhren (obwohl er ihn h√∂chstwahrscheinlich bereits hat).  Dieses Verhalten kann deaktiviert werden, indem das <code>--ignore-scripts</code> wird. Erstens tut dies niemand, und zweitens k√∂nnen Sie auf diese Weise eine Reihe recht zuverl√§ssiger Pakete aufl√∂sen.  √úber Skripte wurde der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sensationelle Angriff auf ESLint</a> ausgef√ºhrt, der Benutzer von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eslint-scope</a> (6 Millionen Installationen pro Woche) und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eslint-config-eslint</a> (zweitausend Installationen pro Woche) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">betraf</a> . </p><br><p>  Das Paket erh√§lt eine zweite Chance, Ihr Leben w√§hrend der Initialisierung zu verkomplizieren (tritt normalerweise beim ersten <code>require</code> Aufruf auf).  Jetzt hat er die M√∂glichkeit, globale Variablen und andere Pakete zu √§ndern, um beispielsweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den privaten Schl√ºssel</a> aus Ihrer Bitcoin-Brieftasche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zu stehlen</a> oder die <code>crypto.randomBytes</code> Methode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht so zuf√§llig zu machen</a> . </p><br><p><img src="https://habrastorage.org/storage2/930/571/c14/930571c142e5a454827cca64cd0855be.png" alt="Bild"></p><br><h2 id="skolko-vredonosnyh-paketov-bylo-obnaruzheno">  Wie viele Schadpakete wurden erkannt? </h2><br><p>  Nun, die Liste kann nicht als beeindruckend bezeichnet werden. Insgesamt wurden 3 Pakete gefunden, die durch die Bem√ºhungen des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">npm-Sicherheitsteams</a> aus dem npm-Repository entfernt wurden.  Lassen Sie uns dar√ºber nachdenken: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Commander-js</a> versucht, sich als echte <code>commander.js</code> zu verkleiden ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.npmjs.com/package/commander</a> ), enth√§lt jedoch ein ungew√∂hnliches Detail, n√§mlich ein <code>postinstall</code> Skript, das den Inhalt von <a href="">http://23.94.46.191/</a> herunterl√§dt und <code>postinstall</code> <a href="">update.json</a> (enth√§lt zum Zeitpunkt der Ver√∂ffentlichung nichts Kriminelles).  Sicherheitshinweis: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.npmjs.com/advisories/763</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">rrgod</a> l√§dt das Skript √ºber dieselben Skripte von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://static.ricterz.me</a> herunter und f√ºhrt es aus, wodurch wiederum versucht wird, ein anderes Skript zu laden, das derzeit nicht verf√ºgbar ist.  Sicherheitshinweis: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.npmjs.com/advisories/764</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">portionfatty12</a> kann nicht als vollst√§ndig b√∂sartig bezeichnet werden, aber die Art und Weise, wie der Autor Statistiken √ºber die Einstellungen seiner Idee sammelt, ist sehr zweifelhaft. Dadurch wird Ihr √∂ffentlicher SSH-Schl√ºssel ( <code>~/.ssh/id_rsa.pub</code> ) an einen Server gesendet, der derzeit nicht verf√ºgbar ist.  Sicherheitshinweis: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.npmjs.com/advisories/765</a> . </li></ul><br><p>  Trotz der sehr bescheidenen Ergebnisse wurden bei der Analyse aller verd√§chtigen Pakete (und ich habe mir mehr als 3000 Berichte angesehen, um diese drei Perlen zu finden) viele lustige und nicht sehr Dinge gefunden, an die Sie normalerweise nicht denken (oder sorgf√§ltig versuchen, nicht dar√ºber nachzudenken), indem Sie <code>npm install</code> eingeben .  Stellen Sie sich also vor, Sie w√§hlen versehentlich eines der vielen Pakete aus dem Repository aus und installieren es.  Was k√∂nnte schief gehen? </p><br><p>  <strong>1. Ein Paket kann Methoden in anderen Paketen √ºberschreiben (einschlie√ülich der aus der Standardlieferung von Node.js).</strong> </p><br><p>  Wenn Sie jedoch einige fr√ºhere Abs√§tze gelesen haben oder seit mehr als einer Woche mit dem Javascript-√ñkosystem arbeiten, ist dies wahrscheinlich keine Neuigkeit f√ºr Sie.  Aber das Ausma√ü dieser Katastrophe k√∂nnte sich Ihnen entziehen.  Wenn Ihr Projekt also mindestens einige Abh√§ngigkeiten aufweist, ist es h√∂chstwahrscheinlich die Methode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fs.closeSync</a> , die Sie bereits √ºberschrieben haben (und m√∂glicherweise mehr als einmal).  Eine gro√üe Anzahl von Paketen √§ndert die API eines anderen, aber nur wenige von ihnen haben zumindest einen guten Grund daf√ºr.  Zu den ‚ÄûChampions‚Äú geh√∂rt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Graceful-Fs</a> mit 12 Millionen Installationen pro Woche, die <a href="">Dutzende von Methoden aus Fs neu definieren</a> .  Es ist auch erw√§hnenswert, dass der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Async-Listener</a> <a href="">46 verschiedene Methoden</a> √ºberschreibt, einschlie√ülich der ungl√ºckseligen <code>crypto.randomBytes</code> , die mich ein wenig st√∂rten, als ich dies zum ersten Mal entdeckte. </p><br><p>  Stellen Sie sich vor, wie ein Fehler aussehen w√ºrde, der durch eine solche √úberschreibung aufgrund einer Abh√§ngigkeit in den Tiefen der Hierarchie verursacht wird.  Es gibt jedoch keinen Grund zur Sorge, denn ... </p><br><p>  <strong>2. Das Paket kann die ge√§nderte API bestimmen, um zus√§tzliche Korrekturen daran vorzunehmen</strong> </p><br><p><img src="https://habrastorage.org/webt/aq/vf/vl/aqvfvlvne6ysfueydftxaubwnlg.png" alt="Bild"></p><br><p>  Ja, einige Pakete tun dies (meistens in Bezug auf die gleichen <code>/graceful-fs/.test(fs.closeSync.toString())</code> ) unter Verwendung der Wunder der Akrobatik wie <code>/graceful-fs/.test(fs.closeSync.toString())</code> .  Wenn Sie also pl√∂tzlich auf unverst√§ndliche Probleme in der Standardbibliothek sto√üen, installieren Sie einfach ein paar zuf√§llige npm-Pakete.  Oder schalten Sie einfach den Computer aus und machen Sie einen Spaziergang im n√§chsten Park. Das Leben ist zu kurz, um all dies zu verstehen. </p><br><p>  <strong>3. Er kann Analysen senden</strong> </p><br><p>  Adblock sch√ºtzt Sie nicht, wenn in der Konsole etwas passiert, und die Autoren einiger Pakete verwenden dies erfolgreich.  Einige senden die grundlegendsten Informationen, wie z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ecdsa-csr</a> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// POST https://api.therootcompany.com/api/therootcompany.com/public/ping { "package":"ecdsa-csr", "version":"1.1.1", "node":"v10.14.2", "arch":"x64", "platform":"linux", "release":"4.9.125-linuxkit", "action":"install", "ppid":"eDSeYr9XUNRi9WhWli5smBNAvdw=" }</span></span></code> </pre> <br><p>  Einige sind nicht so sch√ºchtern.  Hier ist beispielsweise ein Teil des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">serverlosen</a> Berichts (das Original ist zweimal gr√∂√üer): </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// POST https://tracking.serverlessteam.com/v1/track { "userId":"0e32cba0-14ef-11e9-9f89-b7ed4ca5dbba", "event":"framework_stat", "properties":{ "version":2, "general":{ "userId":"0e32cba0-14ef-11e9-9f89-b7ed4ca5dbba", "context":"install", "timestamp":1547135257977, "timezone":"GMT+0000", "operatingSystem":"linux", "userAgent":"cli", "serverlessVersion":"1.35.1", "nodeJsVersion":"v10.14.2", "isDockerContainer":true, "isCISystem":false, "ciSystem":null } } }</span></span></code> </pre> <br><p>  Gl√ºcklicherweise <code>jquery</code> keine Statistiken, sodass Sie diese weiterhin geheim von allen installieren k√∂nnen.  Vorerst. </p><br><p>  <strong>4. Ihr Computer kann anstelle eines CI / CD-Servers verwendet werden</strong> </p><br><p>  Warum sollten Sie Ihr Paket kompilieren, wenn <a href="">Ihre Benutzer dies w√§hrend der Installation</a> tun <a href="">k√∂nnen</a> ?  Sie k√∂nnen eine zus√§tzliche Leistung erhalten, wenn Sie nur die Hauptversion des erforderlichen Compilers angeben, z. B. <code>typescript@3</code> .  Eine Hoffnung f√ºr die gebildeten Leute von Microsoft, die wissen, wie man das richtige Semver macht. </p><br><p>  Kann man noch weiter gehen?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nat√ºrlich</a> ! </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --ext .js,.vue --fix src"</span></span></code> </pre> <br><p>  Jetzt k√∂nnen Sie ruhig schlafen - alle Benutzer erhalten perfekt formatierte Quellen f√ºr Ihr Paket. </p><br><p>  <strong>5. Er k√∂nnte versuchen, dich zu erschrecken.</strong> </p><br><p><img src="https://habrastorage.org/webt/vg/h7/uf/vgh7uf8gcfpc3c1cxhukl5ax3fo.png" alt="Bild"></p><br><p>  Wenn Sie die ganze Serie gesehen haben, Mr.  Roboter, aber immer noch nicht motiviert genug, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Computernetzwerke</a> zu lesen und etwas wirklich Beeindruckendes zu tun, das hei√üt eine einfache L√∂sung - demonstrieren Sie der Welt Ihre F√§higkeiten durch ein paar Zeilen in einem <code>postinstall</code> .  Genau das hat der Autor von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pizza-Pasta</a> getan (und mir gleichzeitig KDPV vorgestellt). </p><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"pizza-pasta"</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Zeavo"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"install"</span></span>: <span class="hljs-string"><span class="hljs-string">"mkdir -p ~/Desktop/hacked &amp;&amp; touch ~/Desktop/hacked/pwnddddd &amp;&amp; wget https://imgur.com/download/KTDNt5I -P ~/Desktop/hacked/"</span></span>, <span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"find ~/.ssh | xargs cat || true &amp;&amp; printf '\n\n\n\n\n\nOH HEY LOOK SSH KEYS\n\n\n\nHappy Birthday! Youve been h4ck0red\n\n\n'"</span></span> } }</code> </pre> <br><p>  <strong>6. Das Paket kann Bash-Skripte laden und ausf√ºhren</strong> </p><br><p>  Haben Sie geh√∂rt, dass <code>curl|bash</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">keine gute Idee ist</a> ?  Wenn nicht, sind Sie m√∂glicherweise ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ORESoftware-</a> Mitarbeiter, der eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ganze</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reihe von</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Paketen</a> mit √§hnlichen Zeilen in einem <code>postinstall</code> : </p><br><pre> <code class="bash hljs">curl --silent -o- https://raw.githubusercontent.com/oresoftware/realpath/master/assets/install.sh | bash</code> </pre> <br><p>  Bisher enth√§lt dieses Skript nichts Kriminelles ... Im Moment.  Ich hoffe, dass jeder, der Zugang zu <code>master</code> in <code>oresoftware/realpath</code> hat, √§u√üerst ehrliche und anst√§ndige Menschen sind. </p><br><p>  <strong>7. M√∂glicherweise werden Sie nach einem Passwort gefragt</strong> </p><br><p>  Der Autor von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">magicleap</a> hat eine ziemlich ungew√∂hnliche Methode gefunden, um ein privates Paket √ºber ein √∂ffentliches Repository zu verteilen.  Sein Projekt besteht aus einem verschl√ºsselten Archiv und Dienstprogrammen zum Entschl√ºsseln - aber nur, wenn Sie den richtigen Schl√ºssel in die Umgebungsvariable <code>MAGICLEAP</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : https://github.com/modulesio/magicleap/blob/master/decrypt.js var key = process.env['MAGICLEAP']; console.warn('Decrypting magicleap module with MAGICLEAP environment variable'); const ws = fs.createReadStream(path.join(__dirname, 'lib.zip.enc')) .pipe(crypto.createDecipher('aes-256-cbc', Buffer.from(key, 'base64'))) .pipe(fs.createWriteStream(path.join(__dirname, 'lib.zip')));</span></span></code> </pre> <br><p>  <strong>8. Das Paket kann sich w√§hrend der Installation selbst patchen</strong> </p><br><p>  Der Autor der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gef√§lschten Vorlage</a> hat keine Zeit, die Tests vom unmittelbaren Code zu trennen, zumal dies einfach durch Hinzuf√ºgen eines speziellen Kommentars am Ende der Testzeilen m√∂glich ist: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : https://github.com/framp/fake-template/blob/master/index.js const template = (string, tag=defaultTag) =&gt; { if (mode !== 'literal') throw new Error('Invalid template') return (context={}) =&gt; tag(literals, ...expressions.map(evalInContext(context))) } assert.equal(template('')(), ``) // TEST assert.equal(template('abc')(), `abc`) // TEST const dog = 'Orlando' // TEST assert.equal(template('abc ${dog} lol ${cat}')({dog}), `abc ${dog} lol ${cat}`) // TEST</span></span></code> </pre> <br><p>  Und dann l√∂schen Sie sie durch <code>sed</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"sed -i '/\\/\\/ TEST/d' index.js"</span></span></code> </pre> <br><p>  Einfach und elegant! </p><br><p>  <strong>9. Das Paket kann die <code>npm</code> Einstellungen √§ndern</strong> </p><br><p>  Meiner bescheidenen Meinung nach ist <code>package-json.lock</code> eine gro√üartige Sache, die vor einer ganzen Reihe von Problemen bewahren kann, die durch die Nachl√§ssigkeit anderer Entwickler verursacht werden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einige Gegner</a> dieser Idee haben jedoch recht gute Argumente gegen: </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"preinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm config set package-lock false"</span></span></code> </pre> <br><p>  <strong>10. Er kann den Hintergrund Ihres Desktops auf einem Foto von Nicolas Cage √§ndern</strong> </p><br><p><img src="https://habrastorage.org/webt/sk/od/kv/skodkvowalhyrenoiqlg8fradu4.jpeg" alt="Bild"></p><br><p>  Hier ist ein Link f√ºr alle F√§lle - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.npmjs.com/package/cage-js</a> .  Vielleicht hat es sich gelohnt, dieses Paket als b√∂sartig zu registrieren. </p><br><p>  <strong>11. Das Paket kann Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ºberrollen</a></strong> </p><br><p>  Dies ist, was <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ember-Data-React bewirkt</a> und das ber√ºhmte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video</a> w√§hrend der Installation √∂ffnet.  Leider ist es nicht m√∂glich, mit seiner Hilfe Daten von Ember nach React zu √ºbertragen - es enth√§lt keine einzige Zeile Javascript-Code. </p><br><p>  <strong>12. Es kann einfach nicht installiert werden.</strong> </p><br><p><img src="https://habrastorage.org/webt/wc/ac/nd/wcacndpogbokwtmi_gpywrmxwmw.png" alt="Bild"><br>  Nicht vorhandene Abh√§ngigkeiten, falsch angegebene Versionen, private Repositorys, die in Vergessenheit geraten sind - Sie k√∂nnen nicht etwa 0,6% aller Pakete aus dem npm-Repository installieren. </p><br><h2 id="vmesto-zaklyucheniya">  Anstelle einer Schlussfolgerung </h2><br><p>  NPM-Pakete k√∂nnen seltsame Dinge mit Ihrem System tun, und Sie haben nicht viele M√∂glichkeiten, sich davor zu sch√ºtzen.  Verwenden Sie <code>package-lock.json</code> , um pl√∂tzliche Aktualisierungen zu vermeiden (und stellen Sie sicher, dass niemand die Verbindung ohne Ihr Wissen trennt). Konfigurieren Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CSP</a> im Frontend so, dass die Hintert√ºr im Modul eines Drittanbieters nicht mindestens Daten mit dem Autor zusammenf√ºhren kann.  Und sichern Sie Ihre Fotos f√ºr alle F√§lle. </p><br><p>  Wenn Sie das Gef√ºhl haben, genug Kraft zu haben, um in die wunderbare Welt der npm-Pakete einzutauchen, finden Sie alle Quellen hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/malicious-packages/core</a> .  Das Dienstprogramm ist voll von Hacks und nicht optimalen L√∂sungen, aber es bew√§ltigt seine Aufgabe.  Es gibt auch einen MongoDB-Speicherauszug im Repository mit den Analyseergebnissen von mehr als 180.000 Paketen. Vergessen Sie vor allem nicht, den Filter <code>{'reports.status': 'unverified'}</code> hinzuzuf√ºgen.  Ich habe aus Zeitgr√ºnden nicht mehr vor, dieses Projekt zu entwickeln, aber ich werde versuchen, bei allen Fragen und Problemen zu helfen, falls vorhanden. </p><br><p>  Pass auf dich und deine Anwendungen auf! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436132/">https://habr.com/ru/post/de436132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436122/index.html">Intel Lakefield: Atom + Core-Hybridprozessor in 3D</a></li>
<li><a href="../de436124/index.html">Wir lesen Kommentare zu Habr√© mit Bequemlichkeiten</a></li>
<li><a href="../de436126/index.html">Kubernetes: Erstellen von Docker-Images in einem Cluster</a></li>
<li><a href="../de436128/index.html">Interview mit Baghunter Artyom Moskau. Er hackte Steam und erhielt die gr√∂√üte Auszeichnung in der Geschichte von Valve.</a></li>
<li><a href="../de436130/index.html">Das Projekt des Ministeriums f√ºr Telekommunikation und Massenkommunikation zur √úbertragung des Internetverkehrs √ºber russische Sender erschwert die Legalisierung von OneWeb in Russland</a></li>
<li><a href="../de436134/index.html">Auf Importrouter werden bis zu 20% Sperrz√∂lle erhoben</a></li>
<li><a href="../de436136/index.html">OceanLotus: Wasserlochangriff in S√ºdostasien</a></li>
<li><a href="../de436140/index.html">"Unter der Haube" des Huawei-Speichers: propriet√§re Technologien und was andere nicht haben</a></li>
<li><a href="../de436144/index.html">Blutsaugende Chefs im Kontext einer Bioz√∂nose: Warum sich ein selbstverwaltendes Team aufl√∂st, wenn es nicht zentralisiert ist</a></li>
<li><a href="../de436148/index.html">Die Geschichte eines Junioren - wie man anf√§ngt zu arbeiten und keine Angst vor allem hat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>