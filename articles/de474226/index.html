<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🚀 👨‍🔧 👃 Einführung in Orleans 3.0 👏🏿 ↕️ 🕤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist ein Gastbeitrag des Orleans-Teams. Orleans ist ein plattformübergreifendes Framework zum Erstellen verteilter Anwendungen mit .NET. Weitere I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einführung in Orleans 3.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/474226/">  <i>Dies ist ein Gastbeitrag des Orleans-Teams.</i>  <i>Orleans ist ein plattformübergreifendes Framework zum Erstellen verteilter Anwendungen mit .NET.</i>  <i>Weitere Informationen finden Sie unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/dotnet/orleans</a> .</i> <br><br>  Wir freuen uns, die Veröffentlichung von Orleans 3.0 bekannt zu geben.  Seit Orleans 2.0 wurden zahlreiche Verbesserungen und Korrekturen sowie einige neue Funktionen vorgenommen.  Diese Änderungen waren auf die Erfahrung vieler Menschen zurückzuführen, die Orleans-basierte Anwendungen in der Produktion in einer Vielzahl von Szenarien und Umgebungen ausführen, sowie auf den Einfallsreichtum und die Leidenschaft der globalen Orleans-Community, die stets bestrebt ist, die Codebasis besser, schneller und besser zu machen flexibel.  Ein großes Dankeschön an alle, die auf verschiedene Weise zu dieser Veröffentlichung beigetragen haben! <br><br><img src="https://habrastorage.org/webt/mv/z3/nr/mvz3nr6mpiuziymfzfqbxjgdqyy.png"><a name="habracut"></a><br><br><h2>  Wichtige Änderungen seit Orleans 2.0 </h2><br>  Orleans 2.0 wurde vor etwas mehr als 18 Monaten veröffentlicht und seitdem hat Orleans bedeutende Fortschritte gemacht.  Einige der Überschriftenänderungen seit 2.0 sind: <br><br><ul><li>  Verteilte ACID-Transaktionen - Mehrere Körner können einer Transaktion beitreten, unabhängig davon, wo ihr Status gespeichert ist </li><li>  Ein neuer Scheduler, der allein in einigen Fällen die Leistung um über 30% steigerte </li><li>  Ein neuer Codegenerator basierend auf der Roslyn-Code-Analyse </li><li>  Umgeschriebene Cluster-Mitgliedschaft für verbesserte Wiederherstellungsgeschwindigkeit </li><li>  Co-Hosting-Unterstützung </li></ul><br>  Sowie viele, viele andere Verbesserungen und Korrekturen. <br><br>  Seit den Tagen der Arbeit an Orleans 2.0 hat das Team in enger Zusammenarbeit mit dem .NET-Team einen positiven Zyklus für die Implementierung oder Integration bestimmter Funktionen wie z. B. generischer Host mit benannten Optionen eingerichtet, bevor diese Funktionen bereit sind, Teil von .NET zu werden Kernversionen, die Feedback und Verbesserungen "vorgelagert" einbringen und in späteren Versionen zu ihren endgültigen Implementierungen wechseln, die mit .NET-Versionen geliefert werden.  Während der Entwicklung von Orleans 3.0 wurde dieser Zyklus fortgesetzt, wobei der von Orleans 3.0.0-beta1 verwendete Bedrock-Code verwendet wurde, bevor er schließlich als Teil von .NET 3.0 ausgeliefert wurde.  In ähnlicher Weise wurde die Unterstützung von TLS für TCP-Socket-Verbindungen als Teil von Orleans 3.0 implementiert und soll Teil einer zukünftigen Version von .NET Core werden.  Wir betrachten diese fortlaufende Zusammenarbeit als unseren Beitrag zum größeren .NET-Ökosystem im Sinne von Open Source. <br><br><h2>  Austausch der Netzwerkschicht durch ASP.NET Bedrock </h2><br>  Die Unterstützung für die Sicherung der Kommunikation mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TLS</a> ist seit einiger Zeit eine wichtige Frage, sowohl von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Community</a> als auch von internen Partnern.  Mit der Version 3.0 führen wir die TLS-Unterstützung ein, die über das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Microsoft.Orleans.Connections.Security-</a> Paket verfügbar ist.  Weitere Informationen finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispiel TransportLayerSecurity</a> . <br><br>  Die Implementierung der TLS-Unterstützung war aufgrund der Implementierung der Netzwerkschicht in früheren Versionen von Orleans ein großes Unterfangen: Sie konnte nicht einfach an die Verwendung von <code>SslStream</code> angepasst werden, der am häufigsten verwendeten Methode zur Implementierung von TLS.  Mit TLS als treibender Kraft haben wir uns auf den Weg gemacht, um die Netzwerkschicht von Orleans neu zu schreiben. <br><br>  Orleans 3.0 ersetzt seine gesamte Netzwerkschicht durch eine, die auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Project Bedrock basiert</a> , einer Initiative des ASP.NET-Teams.  Das Ziel von Bedrock ist es, Entwicklern beim Aufbau schneller und robuster Netzwerkclients und -server zu helfen. <br><br>  Das ASP.NET-Team und das Orleans-Team haben gemeinsam Abstraktionen entworfen, die sowohl Netzwerkclients als auch Server unterstützen, transportunabhängig sind und mithilfe von Middleware angepasst werden können.  Diese Abstraktionen ermöglichen es uns, den Netzwerktransport über die Konfiguration zu ändern, ohne den internen, Orleans-spezifischen Netzwerkcode zu ändern.  Die TLS-Unterstützung von Orleans ist als Bedrock-Middleware implementiert. Wir beabsichtigen, diese generisch zu gestalten, damit sie mit anderen im .NET-Ökosystem geteilt werden kann. <br><br>  Obwohl der Anstoß für dieses Unternehmen darin bestand, die TLS-Unterstützung zu ermöglichen, sehen wir in unseren nächtlichen Belastungstests eine durchschnittliche Verbesserung des Durchsatzes um ca. 30%. <br><br>  Beim Umschreiben der Netzwerkschicht wurde auch unser benutzerdefiniertes Pufferpooling durch das Vertrauen in <code>MemoryPool&lt;byte&gt;</code> Bei dieser Änderung nutzt die Serialisierung jetzt <code>Span&lt;T&gt;</code> besser aus.  Einige Codepfade, die zuvor auf das Blockieren über dedizierte Threads angewiesen waren, die <code>BlockingCollection&lt;T&gt;</code> aufrufen, verwenden jetzt <code>Channel&lt;T&gt;</code> , um Nachrichten asynchron weiterzuleiten.  Dies führt zu weniger dedizierten Threads, wodurch die Arbeit stattdessen in den .NET-Thread-Pool verschoben wird. <br><br>  Das Kerndrahtprotokoll für Orleans ist seit seiner ersten Veröffentlichung festgelegt geblieben.  Mit Orleans 3.0 haben wir Unterstützung für die schrittweise Aktualisierung des Netzwerkprotokolls über Protokollverhandlungen hinzugefügt.  Die in Orleans 3.0 hinzugefügte Protokollverhandlungsunterstützung ermöglicht zukünftige Verbesserungen, z. B. das Anpassen des Kernserialisierers, während die Abwärtskompatibilität erhalten bleibt.  Ein Vorteil des neuen Netzwerkprotokolls ist die Unterstützung von Vollduplex-Silo-zu-Silo-Verbindungen anstelle der zuvor zwischen Silos hergestellten Simplex-Verbindungspaare.  Die Protokollversion kann über <code>ConnectionOptions.ProtocolVersion</code> konfiguriert werden. <br><br><h2>  Co-Hosting über den generischen Host </h2><br>  Das Co-Hosting von Orleans mit anderen Frameworks wie ASP.NET Core im selben Prozess ist dank des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">generischen .NET-Hosts</a> jetzt einfacher als zuvor. <br><br>  Hier ist ein Beispiel für das Hinzufügen von Orleans neben ASP.NET Core zu einem Host mithilfe von <code>UseOrleans</code> : <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> host = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HostBuilder() .ConfigureWebHostDefaults(webBuilder =&gt; { <span class="hljs-comment"><span class="hljs-comment">// Configure ASP.NET Core webBuilder.UseStartup&lt;Startup&gt;(); }) .UseOrleans(siloBuilder =&gt; { // Configure Orleans siloBuilder.UseLocalHostClustering(); }) .ConfigureLogging(logging =&gt; { /* Configure cross-cutting concerns such as logging */ }) .ConfigureServices(services =&gt; { /* Configure shared services */ }) .UseConsoleLifetime() .Build(); // Start the host and wait for it to stop. await host.RunAsync();</span></span></code> </pre> <br>  Mit dem generischen Host Builder teilt Orleans einen Dienstanbieter mit anderen gehosteten Diensten.  Dies gewährt diesen Diensten Zugang zu Orleans.  Ein Entwickler kann beispielsweise <code>IClusterClient</code> oder <code>IGrainFactory</code> in einen ASP.NET Core MVC-Controller injizieren und Körner direkt aus seiner MVC-Anwendung aufrufen. <br><br>  Diese Funktionalität kann verwendet werden, um Ihre Bereitstellungstopologie zu vereinfachen oder einer vorhandenen Anwendung zusätzliche Funktionen hinzuzufügen.  Einige Teams verwenden intern Co-Hosting, um ihren Orleans-Silos mithilfe der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ASP.NET Core Health Checks</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kubernetes Liveness- und Readiness-Tests</a> hinzuzufügen. <br><br><h2>  Zuverlässigkeitsverbesserungen </h2><br>  Cluster erholen sich jetzt dank längerem Klatschen schneller von Fehlern.  In früheren Versionen von Orleans haben Silos Klatschnachrichten zur Mitgliedschaft an andere Silos gesendet und diese angewiesen, die Mitgliedschaftsinformationen zu aktualisieren.  Klatschnachrichten enthalten jetzt versionierte, unveränderliche Snapshots der Clustermitgliedschaft.  Dies verbessert die Konvergenzzeit, nachdem ein Silo dem Cluster beigetreten ist oder diesen verlassen hat (z. B. während des Upgrades, der Skalierung oder nach einem Fehler), und verringert Konflikte im gemeinsam genutzten Mitgliedschaftsspeicher, wodurch schnellere Clusterübergänge ermöglicht werden.  Die Fehlererkennung wurde ebenfalls verbessert, mit mehr Diagnosemeldungen und Verbesserungen, um eine schnellere und genauere Erkennung zu gewährleisten.  Bei der Fehlererkennung werden Silos in einem Cluster gemeinsam überwacht, wobei jedes Silo periodische Gesundheitssonden an eine Teilmenge anderer Silos sendet.  Silos und Clients trennen sich jetzt auch proaktiv von Silos, die für nicht mehr funktionsfähig erklärt wurden, und verweigern Verbindungen zu solchen Silos. <br><br>  Messaging-Fehler werden jetzt konsistenter behandelt, was dazu führt, dass Eingabeaufforderungsfehler an den Anrufer zurückgesendet werden.  Dies hilft Entwicklern, Fehler schneller zu erkennen.  Wenn eine Nachricht beispielsweise nicht vollständig serialisiert oder deserialisiert werden kann, wird eine detaillierte Ausnahme an den ursprünglichen Anrufer zurückgesendet. <br><br><h2>  Verbesserte Erweiterbarkeit </h2><br>  Streams können jetzt benutzerdefinierte Datenadapter haben, mit denen sie Daten in jedem Format aufnehmen können.  Dies gibt Entwicklern eine bessere Kontrolle darüber, wie Stream-Elemente im Speicher dargestellt werden.  Außerdem kann der Stream-Anbieter steuern, wie Daten geschrieben werden, sodass Dämpfe in Legacy-Systeme und / oder Nicht-Orleans-Dienste integriert werden können. <br><br>  Mit Getreideerweiterungen kann einem Getreide zur Laufzeit zusätzliches Verhalten hinzugefügt werden, indem eine neue Komponente mit einer eigenen Kommunikationsschnittstelle hinzugefügt wird.  Beispielsweise verwenden Orleans-Transaktionen Kornerweiterungen, um Transaktionslebenszyklusmethoden wie <i>Vorbereiten</i> , <i>Festschreiben</i> und <i>Abbrechen</i> einem Korn transparent für den Benutzer hinzuzufügen.  Getreideerweiterungen sind jetzt auch für Getreideservices und Systemziele verfügbar. <br><br>  Der benutzerdefinierte Transaktionsstatus kann jetzt deklarieren, welche Rollen er in einer Transaktion erfüllen kann.  Beispielsweise kann eine Transaktionsstatusimplementierung, die Transaktionslebenszyklusereignisse in eine Service Bus-Warteschlange schreibt, die Aufgaben des Transaktionsmanagers nicht erfüllen, da sie schreibgeschützt ist. <br><br>  Die vordefinierten Platzierungsstrategien sind jetzt öffentlich zugänglich, sodass jeder Platzierungsdirektor während der Konfigurationszeit ersetzt werden kann. <br><br><h2>  Mach mit </h2><br>  Jetzt, da Orleans 3.0 vor der Tür steht, richten wir unsere Aufmerksamkeit auf zukünftige Releases - und wir haben einige aufregende Pläne!  Kommen Sie zu unserer herzlichen, einladenden Community auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gitter</a> und helfen Sie uns, diese Pläne Wirklichkeit werden zu lassen. <br><br>  Orleans Team </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de474226/">https://habr.com/ru/post/de474226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de474212/index.html">Python in einem Monat</a></li>
<li><a href="../de474216/index.html">Was bringt die Kombination von manuellen und automatisierten Tests: das Wrike-Erlebnis</a></li>
<li><a href="../de474220/index.html">Habr Weekly # 25 / Informelle Teamarbeit, autistische Mitarbeiter und Telegrammkritik</a></li>
<li><a href="../de474222/index.html">Yurchik - eine kleine, aber beeindruckende Mutante (N.-F.-Geschichte)</a></li>
<li><a href="../de474224/index.html">Kotlin vs. Swift: Android und iOS bewegen sich in Richtung einer universellen Sprache?</a></li>
<li><a href="../de474228/index.html">Eine Open-Source-Projektlizenz, bei der Benutzer „keinen Schaden anrichten“ müssen</a></li>
<li><a href="../de474230/index.html">9 weitere Projekte zur Verbesserung der Front-End-Fähigkeiten</a></li>
<li><a href="../de474232/index.html">So verbessern Sie Ihre Schreibfähigkeiten mit Grammatik</a></li>
<li><a href="../de474234/index.html">SpaceFusion: Strukturierung des unstrukturierten latenten Raums für die Konversations-KI</a></li>
<li><a href="../de474238/index.html">Konferenzgespräche: 8 Stunden Theorie und Praxis der Konversations-KI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>