<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๏ธ ๐ง๐ฝ ๐ง The Tale of the Dangerous std :: enable_shared_from_this ุ ุฃู Zipie antipattern ๐ฃ๏ธ โ๐ฝ ๐๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชููุฑ ูุฐู ุงูููุงูุฉ ูุถุงุฏูุง ุฎุทูุฑูุง "Zombie" ุ ูุงูุฐู ููุดุฃ ุจุดูู ุทุจูุนู ูู ุจุนุถ ุงูุญุงูุงุช ุนูุฏ ุงุณุชุฎุฏุงู std :: enable_shared_from_this. ุงูููุงุฏ ูู ููุงู ูุง ุนูุฏ ุชูุงุทุน...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>The Tale of the Dangerous std :: enable_shared_from_this ุ ุฃู Zipie antipattern</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471326/" style=";text-align:right;direction:rtl">  ุชููุฑ ูุฐู ุงูููุงูุฉ ูุถุงุฏูุง ุฎุทูุฑูุง "Zombie" ุ ูุงูุฐู ููุดุฃ ุจุดูู ุทุจูุนู ูู ุจุนุถ ุงูุญุงูุงุช ุนูุฏ ุงุณุชุฎุฏุงู std :: enable_shared_from_this.  ุงูููุงุฏ ูู ููุงู ูุง ุนูุฏ ุชูุงุทุน C ++ ุงูุชูููููุฌูุง ุงูุญุฏูุซุฉ ูุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h3><br>  ุฒูุฏุช C ++ 11 ุงููุทูุฑ ุจุฃุฏูุงุช ุฑุงุฆุนุฉ ููุนูู ูุน ุงูุฐุงูุฑุฉ - ูุคุดุฑุงุช ุฐููุฉ std :: unique_ptr ููุฌููุนุฉ ูู std :: shared_ptr + std ::ุถุนู_ptr.  ุงุณุชุฎุฏุงู ุงููุคุดุฑุงุช ุงูุฐููุฉ ููุฑุงุญุฉ ูุงูุณูุงูุฉ ูููู ุจูุซูุฑ ุงุณุชุฎุฏุงู ุงููุคุดุฑุงุช ุงูุฎุงู.  ุชุณุชุฎุฏู ุงููุคุดุฑุงุช ุงูุฐููุฉ ุนูู ูุทุงู ูุงุณุน ูู ุงูููุงุฑุณุฉ ุ ููุง  ุงูุณูุงุญ ูููุทูุฑ ุจุงูุชุฑููุฒ ุนูู ุงููุดููุงุช ุฐุงุช ุงููุณุชูู ุงูุฃุนูู ูู ุชุชุจุน ุตุญุฉ ุฅูุดุงุก / ุญุฐู ุงูููุงูุงุช ุงูููุดุฃุฉ ุฏููุงูููููุง. <br>  ูุนุฏ ูุงูุจ ุงููุฆุฉ std :: enable_shared_from_this ุฃูุถูุง ุฌุฒุกูุง ูู ุงููุนูุงุฑ ุ ููุจุฏู ุบุฑูุจุงู ุนูุฏ ููุงุฌูุชู ูุฃูู ูุฑุฉ. <br>  ุณูู ููุงูุด ุงูููุงู ููู ููููู ุฃู ุชุชุนุซุฑ ูู ุงุณุชุฎุฏุงูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุฑูุงูุฌ ุชุนูููู </h2><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">RAII ูุงููุคุดุฑุงุช ุงูุฐููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> ุงูุบุฑุถ ุงููุจุงุดุฑ ูู ุงููุคุดุฑุงุช ุงูุฐููุฉ ูู ุฑุนุงูุฉ <b>ูุทุนุฉ ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู</b> ุงููุฎุตุตุฉ ุนูู ุงููููุฉ.  ุชููู ุงููุคุดุฑุงุช ุงูุฐููุฉ ุจุชุทุจูู ุชุนุฑูู RAII (ุงูุญุตูู ุนูู ุงูููุงุฑุฏ ูู ุงูุชููุฆุฉ) ููููู ุจุณูููุฉ ุชูููููุง ููุนูุงูุฉ ุจุฃููุงุน ุฃุฎุฑู ูู ุงูููุงุฑุฏ ุงูุชู ุชุชุทูุจ ุงูุชููุฆุฉ ูุฅูุบุงุก ุงูุชููุฆุฉ ุบูุฑ ุงูุชุงููุฉ ุ ูุซู: <br>  - ุงููููุงุช <br>  - ุงููุฌูุฏุงุช ุงููุคูุชุฉ ุนูู ุงููุฑุต ุ <br>  - ุงุชุตุงูุงุช ุงูุดุจูุฉ (http ุ websockets) ุ <br>  - ุฎููุท ุงูุชูููุฐ (ุฎููุท) ุ <br>  - ูุฒุงุฏุงุช <br>  - ุฃุฎุฑู (ููู ูุง ูููู ููุฎูุงู). <br>  ููุซู ูุฐุง ุงูุชุนููู ุ ูููู ุฃู ุชูุชุจ ูุตูุงู (ูู ุงููุงูุน ุ ูู ุจุนุถ ุงูุฃุญูุงู ูุง ููููู ุญุชู ูุชุงุจุฉ ูุตู ุ ูููู ููุท ุชุณุชุฎุฏู deleter - ููู ุงูููู ูุง ุชููู ุงูุญูุงูุฉ ูู ุฐูู) ุ ูุงูุชู ุชููุฐ: <br>  - ุงูุชููุฆุฉ ูู ุงูููุดุฆ ุฃู ุจุทุฑููุฉ ูููุตูุฉ ุ <br>  - ุงูุชุฎููู ูู ุงููุฏูุฑ ุ <br>  ุซู "ููู" ูู ุงููุคุดุฑ ุงูุฐูู ุงูููุงุจู ุ ุงุนุชูุงุฏูุง ุนูู ูููุฐุฌ ุงูููููุฉ ุงููุทููุจ - ุงูููุตู (std :: shared_ptr) ุฃู ุงูููุฑุฏ (std :: unique_ptr).  ููุชุฌ ุนู ุฐูู "RAII ูู ุทุจูุชูู": ูุชูุญ ูู ุงููุคุดุฑ ุงูุฐูู ููู / ูุดุงุฑูุฉ ููููุฉ ุงูููุฑุฏ ุ ูุชููุฆุฉ ูุฆุฉ ุงููุณุชุฎุฏู / ุฅูุบุงุก ุชููุฆุฉ ููุฑุฏ ุบูุฑ ููุงุณู. <br>  ูุณุชุฎุฏู std :: shared_ptr ุขููุฉ ุญุณุงุจ ุงูุงุฑุชุจุงุท.  ูุนุฑูู ุงููุนูุงุฑ ุนุฏุงุฏ ุงูุงุฑุชุจุงุทุงุช ุงููููุฉ (ุจุญุณุงุจ ุนุฏุฏ ุงููุณุฎ ุงูููุฌูุฏุฉ ูู std :: shared_ptr) ูุนุฏุงุฏ ุงูุงุฑุชุจุงุทุงุช ุงูุถุนููุฉ (ูุญุณุจ ุนุฏุฏ ุงููุณุฎ ุงูููุฌูุฏุฉ ูู std ::ุถุนู_ptr ุงูุชู ุชู ุฅูุดุงุคูุง ููุฐุง ุงููุซูู ูู std :: shared_ptr).  ุฅู ูุฌูุฏ ุฑุงุจุท ููู ูุงุญุฏ ุนูู ุงูุฃูู ูุถูู ุนุฏู ุญุฏูุซ ุงูุชุฏููุฑ ุจุนุฏ.  ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงูุฎุงุตูุฉ std :: shared_ptr ุนูู ูุทุงู ูุงุณุน ูุถูุงู ุตูุงุญูุฉ ูุงุฆู ุญุชู ูุชู ุงูุงูุชูุงุก ูู ุงูุนูู ูุนู ูู ุฌููุน ุฃุฌุฒุงุก ุงูุจุฑูุงูุฌ.  ูุง ูููุน ูุฌูุฏ ุฑุงุจุท ุถุนูู ุฅุชูุงู ุงููุงุฆู ููุณูุญ ูู ุจุงูุญุตูู ุนูู ุฑุงุจุท ููู ุญุชู ูุชู ุฅุชูุงูู. <br>  ุชุถูู RAII ุฃู ูููู ุฅุตุฏุงุฑ ุงูููุฑุฏ ุฃูุซุฑ ููุซูููุฉ ูู ุงูุฏุนูุฉ ุงูุตุฑูุญุฉ ูุญุฐู / ุญุฐู [] / free / close / reset / unlock ุ ููุฃุณุจุงุจ ุงูุชุงููุฉ: <br>  - ููููู ุจุจุณุงุทุฉ ูุณูุงู ุงูููุงููุฉ ุงูุตุฑูุญุฉ ุ <br>  - ูููู ุฅุฌุฑุงุก ููุงููุฉ ุตุฑูุญุฉ ุนู ุทุฑูู ุงูุฎุทุฃ ุฃูุซุฑ ูู ูุฑุฉ ุ <br>  - ุงูุชุญุฏู ุงูุตุนุจ ุตุนุจ ุนูุฏ ุชูููุฐ ุงูููููุฉ ุงููุดุชุฑูุฉ ููููุฑุฏ ุ <br>  - ุชุถูู ุขููุฉ ุชุนุฒูุฒ ุงูููุฏุณ ูู c ++ ุงุณุชุฏุนุงุก ุงููุฏูุฑุงุช ูุฌููุน ุงููุงุฆูุงุช ุงูุชู ุชุฎุฑุฌ ุนู ูุทุงููุง ูู ุญุงูุฉ ูุฌูุฏ ุงุณุชุซูุงุก. <br>  ุถูุงู ุฅูุบุงุก ุงูุชููุฆุฉ ูู ุงููุตุทูุญ ููู ุฌุฏูุง ูุฏุฑุฌุฉ ุฃูู ูุณุชุญู ููุงููุง ุฌูุฏูุง ุจุงุณู ุงููุตุทูุญ ูุน ุงูุชููุฆุฉ. <br>  ุงููุคุดุฑุงุช ุงูุฐููุฉ ููุง ุฃูุถูุง ุนููุจ: <br>  - ูุฌูุฏ ุงููููุงุช ุงูุนุงูุฉ ูู ุญูุซ ุงูุฃุฏุงุก ูุงูุฐุงูุฑุฉ (ุจุงููุณุจุฉ ููุนุธู ุงูุชุทุจููุงุช ููุณุช ูุจูุฑุฉ) ุ <br>  - ุฅููุงููุฉ ูุฌูุฏ ุฑูุงุจุท ุฏูุฑูุฉ ุชููุน ุฅุทูุงู ุงููุตุฏุฑ ูุชุคุฏู ุฅูู ุชุณุฑุจู. <br>  ูู ุงููุคูุฏ ุฃู ูู ูุทูุฑ ูุฑุฃ ุนู ุงูุฑูุงุจุท ุงูุฏุงุฆุฑูุฉ ูุดุงูุฏ ุฃูุซูุฉ ุงุตุทูุงุนูุฉ ูู ุงูููุฏ ุงูุฅุดูุงูู. <br>  ูุฏ ูุจุฏู ุงูุฎุทุฑ ุถุฆูููุง ููุฃุณุจุงุจ ุงูุชุงููุฉ: <br>  - ุฅุฐุง ุชุณุฑุจุช ุงูุฐุงูุฑุฉ ุจุดูู ูุชูุฑุฑ ููุซูุฑ - ููุฐุง ููุญูุธ ูู ุงุณุชููุงููุง ุ ูุฅุฐุง ูุงู ูุงุฏุฑูุง ูุตุบูุฑูุง - ููู ุบูุฑ ุงููุญุชูู ุฃู ุชุธูุฑ ุงููุดููุฉ ุนูู ูุณุชูู ุงููุณุชุฎุฏู ุงูููุงุฆู ุ <br>  - ูุณุชุฎุฏู ุชุญููู ุงูุดูุฑุฉ ุงูุฏููุงูููู ููุชุณุฑูุจุงุช (Valgrind ุ Clang LeakSanitizer ุ ููุง ุฅูู ุฐูู) ุ <br>  - "ุฃูุง ูุง ุฃูุชุจ ููุฐุง" ุ <br>  - "ูุนูุงุฑู ุตุญูุญ" <br>  "ุชุชู ูุฑุงุฌุนุฉ ุงูููุฏ ุงูุฎุงุต ุจูุง." <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: enable_shared_from_this</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูู C ++ 11 ุ ูุชู ุชูุฏูู ูุฆุฉ ุงููุณุงุนุฏ std :: enable_shared_from_this.  ุจุงููุณุจุฉ ุฅูู ูุทูุฑ ูุงู ุจุฅูุดุงุก ููุฏ ุจูุฌุงุญ ุจุฏูู std :: enable_shared_from_this ุ ููุฏ ูุง ุชููู ุงูุงุณุชุฎุฏุงูุงุช ุงููุญุชููุฉ ููุฐู ุงููุฆุฉ ูุงุถุญุฉ. <br>  ูุงุฐุง ุชูุนู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: enable_shared_from_thisุ <br>  ูุณูุญ ูุธุงุฆู ุงูุฃุนุถุงุก ูููุฆุฉ ุงูุชู ุชู ุฅูุดุงุก ูุซูู ููุง ูู std :: shared_ptr ูุชููู ูุณุฎ ูููุฉ ุฅุถุงููุฉ (shared_from_this ()) ุฃู ุถุนููุฉ (ุถุนู_from_this () ุ ุจุฏุกูุง ูู C ++ 17) ุจูุณุฎ ูู std :: shared_ptr ุงูุชู ุชู ุฅูุดุงุคูุง ูููุง .  ูุง ููููู ุงุณุชุฏุนุงุก shared_from_this () ูุถุนู_from_this () ูู ุงููููุดุฆ ูุงููุฏููุฑ. <br><br>  <b>ููุงุฐุง ูู ุงูุตุนุจ ุฌุฏุงุ</b>  <b>ููููู ุจุจุณุงุทุฉ ุจูุงุก ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: shared_ptr &lt;T&gt; (ูุฐุง)</b> <br>  ูุง ุ ูุง ููููู ุฐูู.  ูุฌุจ ุนูู ุฌููุน ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุงู :: shared_ptrs ุงูุชู ุชูุชู ุจููุณ ูุซูู ุงููุฆุฉ ุงุณุชุฎุฏุงู ูุญุฏุฉ ุญุณุงุจ ุงุฑุชุจุงุท ูุงุญุฏ.  ูุง ุชูุฌุฏ ุทุฑููุฉ ููุงุณุชุบูุงุก ุนู ุงูุณุญุฑ ุงูุฎุงุต. <br><br>  ูู ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ ูุงุณุชุฎุฏุงู std :: enable_shared_from_this ูู ุงูุจุฏุงูุฉ ุฅูุดุงุก ูุงุฆู ูุฆุฉ ูู std :: shared_ptr.  ุฅูุดุงุก ุนูู ุงูููุฏุณ ุ ุชุฎุตูุต ุญููู ุนูู ุงููููุฉ ุ ุฅูุดุงุก ุนูู std :: unique_ptr - ูู ูุฐุง ุบูุฑ ููุงุณุจ.  ููุท ุจุฏูุฉ ูู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: shared_ptr. <br><br>  <b>ูููู ูู ูู ุงููููู ุชูููุฏ ุงููุณุชุฎุฏู ูู ุทุฑููุฉ ุฅูุดุงุก ูุซููุงุช ุงููุตูุ</b> <br>  ูุนู ููููู ุฐูู.  ููููุงู ุจุฐูู ุ ููุท: <br>  - ุชูููุฑ ุทุฑููุฉ ุซุงุจุชุฉ ูุฅูุดุงุก ูุซููุงุช ูุถุนุช ุฃุตูุงู ูู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุงู :: shared_ptr ุ <br>  - ูุถุน ุงูููุดุฆ ูู ุงูุฎุตูุตูุฉ ุฃู ุงููุญููุฉ ุ <br>  - ูุญุธุฑ ูุณุฎ ูููู ุงูุฏูุงูุงุช. <br>  ุฐูุจ ุงููุตู ุฅูู ุงูููุต ุ ูุฃุบููู ูุงุจุชูุน ุงูููุชุงุญ - ูู ุงูุขู ูุตุงุนุฏูุง ุ ุณุชุนูุด ุฌููุน ูุซููุงุชู ููุท ูู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุงู :: shared_ptr ุ ููุง ุชูุฌุฏ ุทุฑู ูุงููููุฉ ูุฅุฎุฑุงุฌูู ูู ููุงู. <br>  ูุง ูููู ุฃู ูุณูู ูุฐุง ุงูุชูููุฏ ุญูุงู ูุนูุงุฑููุง ุฌูุฏูุง ุ ููู ูุฐู ุงูุทุฑููุฉ ุชุชูุงูู ุชูุงููุง ูุน ุงููุนูุงุฑ. <br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููููู ุงุณุชุฎุฏุงู ุชุนุจูุฑ PIMPL: ุงููุณุชุฎุฏู ุงููุญูุฏ ูููุฆุฉ ูุชููุจุฉ - ุงููุงุฌูุฉ - ุณูุฎูู ุงูุชูููุฐ ุจุฏูุฉ ูู std :: shared_ptr ุ ูุณุชูุญุฑู ุงููุงุฌูุฉ ููุณูุง ุจุงููุนู ูู ูููุฏ ูู ูุฐุง ุงูููุน. <br><br>  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุงู :: enable_shared_from_this ููุง ุงููุฑูู ุงูุฏูููุฉ ูู ุงูููุฑุงุซ ุ ูููู ููุงูุดุชูุง ุฎุงุฑุฌ ูุทุงู ูุฐู ุงูููุงูุฉ. <br></div></div><br><h2 style=";text-align:right;direction:rtl">  ูุตูู ุงูู ูุฐู ุงูููุทุฉ </h2><br>  ูุชู ูุดุฑ ุฌููุน ุฃูุซูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุงุฑุฏุฉ ูู ุงูููุงูุฉ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุซุจ</a> . <br>  ููุถุญ ุงูููุฏ ุงูุชูููุงุช ุงูุณูุฆุฉ ุงููุชููุฑุฉ ูู ุงูุงุณุชุฎุฏุงู ุงูุขูู ุงููุนุชุงุฏ ูู C ++ ุงูุญุฏูุซุฉ <br><br><h3 style=";text-align:right;direction:rtl">  SimpleCyclic </h3><br>  ูุจุฏู ุฃู ูุง ุดูุก ููุฐุฑ ุงููุดุงูู.  ุฅุนูุงู ูุฆุฉ ุชุจุฏู ุจุณูุทุฉ ููุจุงุดุฑุฉ.  ุจุงุณุชุซูุงุก ูุงุญุฏ ูู ุงูุชูุงุตูู "ุงูุตุบูุฑุฉ" - ูุชู ุชุทุจูู ุงูููุฑุงุซ ูู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: enable_shared_from_this ูุณุจุจ ูุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">SimpleCyclic.h</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;memory&gt; #include &lt;functional&gt; namespace SimpleCyclic { class Cyclic final : public std::enable_shared_from_this&lt;Cyclic&gt; { public: static std::shared_ptr&lt;Cyclic&gt; create(); Cyclic(const Cyclic&amp;) = delete; Cyclic(Cyclic&amp;&amp;) = delete; Cyclic&amp; operator=(const Cyclic&amp;) = delete; Cyclic&amp; operator=(Cyclic&amp;&amp;) = delete; ~Cyclic(); void doSomething(); private: Cyclic(); std::function&lt;void(void)&gt; _fn; }; } // namespace SimpleCyclic</span></span></span></span></code> </pre> <br></div></div><br>  ููู ุงูุชูููุฐ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">SimpleCyclic.cpp</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include "SimpleCyclic.h" namespace SimpleCyclic { Cyclic::Cyclic() = default; Cyclic::~Cyclic() { std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } std::shared_ptr&lt;Cyclic&gt; Cyclic::create() { return std::shared_ptr&lt;Cyclic&gt;(new Cyclic); } void Cyclic::doSomething() { _fn = [shis = shared_from_this()](){}; std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } } // namespace SimpleCyclic</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">MAIN.CPP</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"SimpleCyclic/SimpleCyclic.h"</span></span></span><span class="hljs-meta"> int main() { auto simpleCyclic = SimpleCyclic::Cyclic::create(); simpleCyclic-&gt;doSomething(); return 0; }</span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฎุฑุงุฌ ูุญุฏุฉ ุงูุชุญูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  N12SimpleCyclic6CyclicE :: doSomething <br></blockquote><br></div></div><br>  ูู ูุต ุงูุฏุงูุฉ doSomething () ุ ุณููุดุฆ ูุซูู ุงููุฆุฉ <b>ููุณู</b> ูุณุฎุฉ ูููุฉ ุฅุถุงููุฉ ูู std :: shared_ptr ุงูุฐู ุชู ูุถุนู ููู.  ุซู ุ ุจุงุณุชุฎุฏุงู ุงูุชูุงุท ูุนูู ุ ูุชู ูุถุน ูุฐู ุงููุณุฎุฉ ูู ุฏุงูุฉ lambda ุงููุฎุตุตุฉ ูุญูู ุจูุงูุงุช ุงููุฆุฉ ุชุญุช ุณุชุงุฑ ุฏุงูุฉ std :: function ุบูุฑ ุถุงุฑุฉ.  ููุชุฌ ุนู ุงุณุชุฏุนุงุก doSomething () ูุฑุฌุน ุฏุงุฆุฑู ุ ููู ูุชู ุฅุชูุงู ูุซูู ุงููุฆุฉ ุญุชู ุจุนุฏ ุชุฏููุฑ ุฌููุน ุงูุฑูุงุจุท ุงูุฎุงุฑุฌูุฉ ุงููููุฉ. <br>  ููุงู ุชุณุฑุจ ููุฐุงูุฑุฉ.  ูุง ูุณูู destructor SimpleCyclic :: Cyclic :: ~ ุฏูุฑู. <br><br>  <b>ุงููุซูู ุงูุทุจูู "ูุญูุธ" ููุณู.</b> <b><br></b>  <b>ุฑูุฒ ูุฑุชุจุทุฉ ุนูุฏุฉ.</b> <br><br><img src="https://habrastorage.org/webt/xp/jj/_a/xpjj_atj4bf0av8kar46ebxqqew.jpeg"><br>  (ุงูุตูุฑุฉ ูุฃุฎูุฐุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ููุง</a> ) <br><br>  <b>ููุงุฐุง ุ ูุฐุง ูู antipattern "ุบูุจูุจุฉ"ุ</b> <br>  ูุง ุ ูุฐุง ูุฌุฑุฏ ุชูุฑูู.  ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ูุฃุช ุจุนุฏ. <br><br>  <b>ููุงุฐุง ุงููุทูุฑ ููุชุจ ูุฐุงุ</b> <br>  ูุซุงู ุงุตุทูุงุนู.  ูุณุช ุนูู ุฏุฑุงูุฉ ุจุฃู ุญุงูุงุช ูุชู ูููุง ุงูุญุตูู ุนูู ูุซู ูุฐุง ุงูุฑูุฒ ุจุดูู ูุชูุงุบู. <br><br>  <b>ููู ุธู ุชุญููู ุงูุดูุฑุฉ ุงูุฏููุงูููู ุตุงูุชุงูุ</b> <br>  ูุง ุ ุฃุจูุบ Valgrind ุนู ุญุฏูุซ ุชุณุฑุจ ููุฐุงูุฑุฉ ุจุฃูุงูุฉ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุดุงุฑูุฉ ูุงูุฌุฑูุฏ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  <b>ุจุงูุชุฃููุฏ</b> ูุชู <b>ููุฏ</b> 96 (64 ูุจุงุดุฑ ุ 32 ุบูุฑ ูุจุงุดุฑ) ูู ูุชู ูุงุญุฏุฉ ูู ุณุฌู ุงูุฎุณุงุฑุฉ 29 ูู 46 <br>  ูู SimpleCyclic :: Cyclic :: create () ูู / ุงููุณุชุฎุฏููู / ุงููุณุชุฎุฏู / ุงููุดุงุฑูุน / Zomby_antipattern_concept/SimpleCyclic/SimpleCyclic.cpp:15 <br>  1: malloc in /usr/local/Cellar/valgrind/HEAD-60ab74a/lib/valgrind/vgpreload_memcheck-amd64-darwin.so <br>  2: ุนุงูู ุงูุชุดุบูู ุงูุฌุฏูุฏ (ุทููู ุบูุฑ ููููุน) ูู /usr/lib/libc++abi.dylib <br>  3: SimpleCyclic :: Cyclic :: create () ูู / ุงููุณุชุฎุฏููู / ุงููุณุชุฎุฏู / ุงููุดุฑูุนุงุช / Zomby_antipattern_concept/SimpleCyclic/SimpleCyclic.cpp:15 <br>  4: ุฑุฆูุณู ูู / ุงููุณุชุฎุฏููู / ุงููุณุชุฎุฏู / ุงููุดุงุฑูุน / Zomby_antipattern_concept/SimpleCyclic/main.cpphaps <br></blockquote><br></div></div><br><h3 style=";text-align:right;direction:rtl">  PimplCyclic </h3><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูุจุฏู ููู ุงูุฑุฃุณ ุตุญูุญูุง ูููุฌุฒูุง โโุชูุงููุง.  ุฃุนููุช ุงููุงุฌูุฉ ุงูุชู ุชุฎุฒู ุชุทุจูู ูุนูู ูู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: shared_ptr.  ุงููุฑุงุซุฉ - ุจูุง ูู ุฐูู ูู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: enable_shared_from_this - ููููุฏุฉ ุ ุนูู ุนูุณ ุงููุซุงู ุงูุณุงุจู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">PimplCyclic.h</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;memory&gt; namespace PimplCyclic { class Cyclic { public: Cyclic(); ~Cyclic(); private: class Impl; std::shared_ptr&lt;Impl&gt; _impl; }; } // namespace PimplCyclic</span></span></span></span></code> </pre><br></div></div><br>  ููู ุงูุชูููุฐ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">PimplCyclic.cpp</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;functional&gt; #include "PimplCyclic.h" namespace PimplCyclic { class Cyclic::Impl : public std::enable_shared_from_this&lt;Cyclic::Impl&gt; { public: ~Impl() { std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } void doSomething() { _fn = [shis = shared_from_this()](){}; std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } private: std::function&lt;void(void)&gt; _fn; }; Cyclic::Cyclic() : _impl(std::make_shared&lt;Impl&gt;()) { if (_impl) { _impl-&gt;doSomething(); } } Cyclic::~Cyclic() { std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } } // namespace PimplCyclic</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">MAIN.CPP</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"PimplCyclic/PimplCyclic.h"</span></span></span><span class="hljs-meta"> int main() { auto pimplCyclic = PimplCyclic::Cyclic(); return 0; }</span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฎุฑุงุฌ ูุญุฏุฉ ุงูุชุญูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  N11PimplCyclic6Cyclic4ImplE :: doSomething <br>  N11PimplCyclic6CyclicE :: ~ ุฏูุฑู <br></blockquote><br></div></div><br>  ุงุณุชุฏุนุงุก Impl :: doSomething () ุจุฅูุดุงุก ูุฑุฌุน ุฏุงุฆุฑู ูู ูุซูู ูุฆุฉ Impl.  ุชู ุชุฏููุฑ ุงููุงุฌูุฉ ุจุดูู ุตุญูุญ ุ ููู ุงูุชูููุฐ ูุชุณุฑุจ.  ูุง ูุชู ุงุณุชุฏุนุงุก destructor PimplCyclic :: Cyclic :: Impl :: ~ Impl. <br>  ุงููุซุงู ุงุตุทูุงุนู ูุฑุฉ ุฃุฎุฑู ุ ููู ูุฐู ุงููุฑุฉ ุฃูุซุฑ ุฎุทูุฑุฉ - ูู ุงููุนุฏุงุช ุงูุณูุฆุฉ ููุฌูุฏุฉ ูู ุงูุชุทุจูู ููุง ุชุธูุฑ ูู ุงูุฅุนูุงู. <br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅูุดุงุก ุฑุงุจุท ุฏุงุฆุฑู ุ ูุง ูุชุทูุจ ุฑูุฒ ุงููุณุชุฎุฏู ุฃู ุฅุฌุฑุงุก ุขุฎุฑ ุบูุฑ ุงูุฅูุดุงุก. <br>  ุชุญููู ุฏููุงูููู ูู ููุงุฌูุฉ Valgrind ุ ููุฐู ุงููุฑุฉ ูุดูุช ุชุณุฑุจ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุดุงุฑูุฉ ูุงูุฌุฑูุฏ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  ุชู ููุฏ 96 ุจุงูุช ูู ูุชู ูุงุญุฏุฉ <b>ุจุงูุชุฃููุฏ</b> ูู ุณุฌู ุงูุฎุณุงุฑุฉ 29 ูู 46 <br>  ูู PimplCyclic :: Cyclic :: Cyclic () ูู / ุงููุณุชุฎุฏููู / ุงููุณุชุฎุฏู / ุงููุดุงุฑูุน / Zomby_antipattern_concept/PimplCyclic/PimplCyclic.cpp:28 <br>  1: malloc in /usr/local/Cellar/valgrind/HEAD-60ab74a/lib/valgrind/vgpreload_memcheck-amd64-darwin.so <br>  2: ุนุงูู ุงูุชุดุบูู ุงูุฌุฏูุฏ (ุทููู ุบูุฑ ููููุน) ูู /usr/lib/libc++abi.dylib <br>  3: ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: __ 1 :: __ libcpp_allocate (ุทูููุฉ ุบูุฑ ูููุนุฉ ุ ุทูููุฉ ุบูุฑ ูููุนุฉ) ูู /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/new:252 <br>  4: std :: __ 1 :: customator &lt;std :: __ 1 :: __ shared_ptr_emplace &lt;PimplCyclic :: Cyclic :: Implุ std :: __ 1 :: ูุฎุตุต &lt;PimplCyclic :: Cyclic :: Impl &gt;&gt;&gt; ุชุฎุตูุต (ุทูููุฉ ุบูุฑ ูููุนุฉ ุ ุจุงุทูุฉ const *) ูู /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/memory:1813 <br>  5: std :: __ 1 :: shared_ptr &lt;PimplCyclic :: Cyclic :: Impl&gt; std :: __ 1 :: shared_ptr &lt;PimplCyclic :: Cyclic :: Impl&gt; :: make_shared &lt;&gt; () ูู /Applications/Xcode.app/Contents /Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/memory:4326 <br>  6: _ZNSt3__1L11make_sharedIN11PimplCyclic6Cyclic4ImplEJEEENS_9enable_ifIXntsr8is_arrayIT_EE5valueENS_10shared_ptrIS5_EEE4typeEDpOT0_ ูู /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/memory:4706 <br>  7: PimplCyclic :: Cyclic :: Cyclic () ูู / ุงููุณุชุฎุฏููู / ุงููุณุชุฎุฏู / ุงููุดุงุฑูุน / Zomby_antipattern_concept/PimplCyclic/PimplCyclic.cpp:28 <br>  8: PimplCyclic :: Cyclic :: Cyclic () ูู / ุงููุณุชุฎุฏููู / ุงููุณุชุฎุฏู / ุงููุดุงุฑูุน / Zomby_antipattern_concept/PimplCyclic/PimplCyclic.cpp:29 <br>  9: ุฑุฆูุณู ูู / ุงููุณุชุฎุฏููู / ุงููุณุชุฎุฏู / ุงููุดุงุฑูุน / Zomby_antipattern_concept/PimplCyclic/main.cpphaps <br></blockquote><br></div></div><br>  <b>ูู ุงููุดุจูู ุจุนุถ ุงูุดูุก ุฑุคูุฉ Pimpl ุ ุญูุซ ูุชู ุชุฎุฒูู ุงูุชุทุจูู ูู ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: shared_ptr.</b> <br>  Pimpl ุงูููุงุณููู ุงููุจูู ุนูู ูุคุดุฑ ุฎุงู ูุฏูู ุฌุฏูุง ุ ููุง ุฃู std :: unique_ptr ูู ุชุฃุซูุฑ ุฌุงูุจู ูู ูุดุฑ ุงูุญุธุฑ ุนูู ูุณุฎ ุงูุฏูุงูุงุช ุนูู ุงููุงุฌูุฉ.  ุณุชููุฐ ูุฐู ุงููุงุฌูุฉ ูุบุฉ ุงูููููุฉ ุงููุญูุฏุฉ ุ ูุงูุชู ูุฏ ูุง ุชุชูุงูู ูุน ุงูููุฑุฉ ุงููุนูุงุฑูุฉ.  ูู ุงุณุชุฎุฏุงู std :: shared_ptr ูุชุฎุฒูู ุงูุชุทุจูู ุ ูุณุชูุชุฌ ุฃู ุงููุฆุฉ ูุตููุฉ ูุชูููุฑ ููููุฉ ูุดุชุฑูุฉ. <br><br>  <b>ููู ูุฎุชูู ูุฐุง ุนู ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ููุชุณุฑุจ ุงูููุงุณููู ูู ุฎูุงู ุงูุงุชุตุงู ุงูุฌุฏูุฏ ุตุฑุงุญุฉ ุฏูู ุญุฐู ูุงุญูุ</b>  <b>ุจููุณ ุงูุทุฑููุฉ ุ ุณูููู ูู ุดูุก ุฌููููุง ูู ุงููุงุฌูุฉ ููู ุงูุชูููุฐ - ุฎุทุฃ.</b> <br>  ูุญู ููุงูุด ุงูุทุฑู <b>ุงูุญุฏูุซุฉ</b> ูุงุทูุงู ุงููุงุฑ ุนูู ููุณู ูู ุงููุฏู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฃูุชูุจุงุชุฑู "ุงูุฒููุจู" </h2><br>  ูุฐูู ุ ูู ุงูููุงุฏ ุงููุฐููุฑุฉ ุฃุนูุงู ููู ุงููุงุถุญ: <br>  - ูููู ุฑุจุท ุงููุคุดุฑุงุช ุงูุฐููุฉ ุจุงูุนูุฏ ุ <br>  - ุงุณุชุฎุฏุงู std :: enable_shared_from_this ูููู ุฃู ูุณุงูู ูู ุฐูู ุ ูุฃูู  ูุณูุญ ููุซูู ูู ุงููุตู ุจุฑุจุท ุนูุฏุฉ ุจุฏูู ูุณุงุนุฏุฉ ุฎุงุฑุฌูุฉ ุชูุฑูุจูุง. <br><br>  <b>ูุงูุขู - ุงูุชุจุงู - ุงูุณุคุงู ุงูุฑุฆูุณู ููููุงู: ูู ููุน ุงูููุฑุฏ ููููู ูู ูุคุดุฑ ุฐูู ุงููุณุฃูุฉุ</b>  <b>ูู ููุงู ูุฑู ุจูู ุฑุนุงูุฉ ูููุงุช RAII ูุงุชุตุงู HTTPS ุบูุฑ ุงููุชุฒุงููุ</b> <br><br><h3 style=";text-align:right;direction:rtl">  SimpleZomby </h3><br>  ุชู ููู ุงูููุฏ ุงูุดุงุฆุน ูุฌููุน ุฃูุซูุฉ ุงููุณุงูู ุงููุงุญูุฉ ุฅูู ุงูููุชุจุฉ ุงูุนุงูุฉ. <br><br>  ูุงุฌูุฉ ุบูุจูุจุฉ ูุฌุฑุฏุฉ ูุน ูุฏูุฑ ุงุณู ูุชูุงุถุน: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุดุชุฑู / ูุฏูุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;memory&gt; namespace Common { class Listener; class Manager { public: Manager() = default; Manager(const Manager&amp;) = delete; Manager(Manager&amp;&amp;) = delete; Manager&amp; operator=(const Manager&amp;) = delete; Manager&amp; operator=(Manager&amp;&amp;) = delete; virtual ~Manager() = default; virtual void runOnce(std::shared_ptr&lt;Common::Listener&gt; listener) = 0; }; } // namespace Common</span></span></span></span></code> </pre><br></div></div><br>  ูุงุฌูุฉ ุงููุณุชูุน ุงููุฌุฑุฏุฉ ุ ุฌุงูุฒุฉ ููุจูู ูุต ุขูู ูู ุณูุณูุฉ ุงูุฑุณุงุฆู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุดุชุฑู / ุงููุณุชูุน</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt; #include &lt;memory&gt; namespace Common { class Listener { public: virtual ~Listener() = default; using Data = std::string; // thread-safe virtual void processData(const std::shared_ptr&lt;const Data&gt; data) = 0; }; } // namespace Common</span></span></span></span></code> </pre><br></div></div><br>  ุงููุณุชูุน ุงูุฐู ูุนุฑุถ ุงููุต ุฅูู ูุญุฏุฉ ุงูุชุญูู.  ุชููุฐ ููููู SingletonShared ูู ููุงูุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูููุฉ ูุชุฌูุจ ุงูุณููู ุบูุฑ ุงููุญุฏุฏ ุนูุฏ ุงูุงุชุตุงู ุจู Singleton</a> : <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Common / Impl / WriteToConsoleListener.h</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;mutex&gt; #include "Common/Listener.h" namespace Common { class WriteToConsoleListener final : public Listener { public: WriteToConsoleListener(const WriteToConsoleListener&amp;) = delete; WriteToConsoleListener(WriteToConsoleListener&amp;&amp;) = delete; WriteToConsoleListener&amp; operator=(const WriteToConsoleListener&amp;) = delete; WriteToConsoleListener&amp; operator=(WriteToConsoleListener&amp;&amp;) = delete; ~WriteToConsoleListener() override; static std::shared_ptr&lt;WriteToConsoleListener&gt; instance(); // blocking void processData(const std::shared_ptr&lt;const Data&gt; data) override; private: WriteToConsoleListener(); std::mutex _mutex; }; } // namespace Common</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Common / Impl / WriteToConsoleListener.cpp</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include "WriteToConsoleListener.h" namespace Common { WriteToConsoleListener::WriteToConsoleListener() = default; WriteToConsoleListener::~WriteToConsoleListener() { auto lock = std::lock_guard(_mutex); std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } std::shared_ptr&lt;WriteToConsoleListener&gt; WriteToConsoleListener::instance() { static auto inst = std::shared_ptr&lt;WriteToConsoleListener&gt;(new WriteToConsoleListener); return inst; } void WriteToConsoleListener::processData(const std::shared_ptr&lt;const Data&gt; data) { if (data) { auto lock = std::lock_guard(_mutex); std::cout &lt;&lt; *data &lt;&lt; std::flush; } } } // namespace Common</span></span></span></span></code> </pre><br></div></div><br>  ูุฃุฎูุฑุง ุ ุฃูู ุบูุจูุจุฉ ุ ุฃุจุณุท ูุงูุฃูุซุฑ ุจุฑุงุนุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">SimpleZomby.h</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;memory&gt; #include &lt;atomic&gt; #include &lt;thread&gt; #include "Common/Manager.h" namespace Common { class Listener; } // namespace Common namespace SimpleZomby { class Zomby final : public Common::Manager, public std::enable_shared_from_this&lt;Zomby&gt; { public: static std::shared_ptr&lt;Zomby&gt; create(); ~Zomby() override; void runOnce(std::shared_ptr&lt;Common::Listener&gt; listener) override; private: Zomby(); using Semaphore = std::atomic&lt;bool&gt;; std::shared_ptr&lt;Common::Listener&gt; _listener; Semaphore _semaphore = false; std::thread _thread; }; } // namespace SimpleZomby</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">SimpleZomby.cpp</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;sstream&gt; #include "SimpleZomby.h" #include "Common/Listener.h" namespace SimpleZomby { std::shared_ptr&lt;Zomby&gt; Zomby::create() { return std::shared_ptr&lt;Zomby&gt;(new Zomby()); } Zomby::Zomby() = default; Zomby::~Zomby() { _semaphore = false; if (_thread.joinable()) { _thread.detach(); } if (_listener) { std::ostringstream buf; buf &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; _listener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;(buf.str())); } } void Zomby::runOnce(std::shared_ptr&lt;Common::Listener&gt; listener) { if (_semaphore) { throw std::runtime_error("SimpleZomby::Zomby::runOnce() called twice"); } _listener = listener; _semaphore = true; _thread = std::thread([shis = shared_from_this()](){ while (shis &amp;&amp; shis-&gt;_listener &amp;&amp; shis-&gt;_semaphore) { shis-&gt;_listener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;("SimpleZomby is alive!\n")); std::this_thread::sleep_for(std::chrono::seconds(1)); } }); } } // namespace SimpleZomby</span></span></span></span></code> </pre><br></div></div><br>  ูุฏูุฑ ุงูุฒููุจู ูุธููุฉ lambda ูู ุฎูุท ูููุตู ุ ููุฑุณู ุฏูุฑูุง ุณูุณูุฉ ุฅูู ุงููุณุชูุน.  ุชุญุชุงุฌ ูุธุงุฆู Lambda ููุนูู ุฅูู ุฅุดุงุฑุฉ ูุณูุงุน ุ ููู ุญููู ูู ูุฆุฉ zombie.  ูุง ุชููู ูุธููุฉ lambda ุจุงูุชูุงุทูุง ูุญููู ูููุตูุฉ ุ ูููููุง ุชุณุชุฎุฏู ุงููุงุฆู ููุฌูุน.  ุณูุคุฏู ุชุฏููุฑ ูุซูู ููุฆุฉ zombie ูุจู ุงูุชูุงู ูุธููุฉ lambda ุฅูู ุญุฏูุซ ุณููู ุบูุฑ ูุญุฏุฏ.  ูุชุฌูุจ ุฐูู ุ ุชูุชูุท ูุธููุฉ lambda ูุณุฎุฉ ูููุฉ ูู shared_from_this (). <br>  ูู ุงููุฏูุฑ ุงูุฒููุจู ุ ูุชู ุชุนููู ุงูุฅุดุงุฑุฉ ุฅูู ุฎุทุฃ ุ ูุจุนุฏ ุฐูู ูุชู ุงุณุชุฏุนุงุก ูุตู () ููุฏูู.  ุชุนููู ุฅุดุงุฑุฉ ูุฎุจุฑ ูุคุดุฑ ุงูุชุฑุงุจุท ูุฅููุงู. <br><br>  <b>ูู destructor ุ ูุงู ูู ุงูุถุฑูุฑู ุงุณุชุฏุนุงุก ุนุฏู ูุตู () ุ ูููู ุงูุงูุถูุงู ()!</b> <br>  ... ูุงุญุตู ุนูู ุฃุฏุงุฉ ุฅุชูุงู ุชููุน ุงูุชูููุฐ ููุชุฑุฉ ุบูุฑ ูุญุฏุฏุฉ ุ ููู ูุง ูุฏ ูููู ุบูุฑ ููุจูู. <br><br>  <b>ูุฐูู ูุฐุง ุงูุชูุงู RAII!</b>  <b>ูุงู ูู ุงูููุชุฑุถ RAII ููุฎุฑูุฌ ูู ุงููุฏูุฑ ุฅูุง ุจุนุฏ ุชุญุฑูุฑ ุงูููุฑุฏ!</b> <br>  ุฅุฐุง ูุงู ุจุตุฑุงูุฉ - ุซู ูุนู ุ ูุง ูููู ุงููุฏูุฑ ุงูุฒููุจู ุจุฅุทูุงู ุงููุตุฏุฑ ุ ูููู <b>ูุถูู</b> ููุท <b>ุฅุตุฏุงุฑู</b> .  ุฃูุชุฌุช ูู ููุช ูุง - ุฑุจูุง ูู ููุช ูุฑูุจ ุ ุฃู ุฑุจูุง ููุณ ุญูุง.  ูุญุชู ุฃูู ูู ุงููููู ุฃู ููุชูู ุงูุฑุฆูุณู ูู ุงูุนูู ูู ููุช ูุจูุฑ - ุซู ุณูุชู ูุณุญ ุงูุฎูุท ุจุงูููุฉ ูู ูุจู ูุธุงู ุงูุชุดุบูู.  ูููู ูู ุงููุงูุน ุ ูููู ุฃู ูููู ุงูุฎุท ุงููุงุตู ุจูู RAII "ุงูุตุญูุญ" ู "ุงูุฎุงุทุฆ" ุฑููุนูุง ุฌุฏูุง: ุนูู ุณุจูู ุงููุซุงู ุ RAII "ุงูุตุญูุญ" ุ ูุงูุฐู ูุณุชุฏุนู std :: filesystem :: remove () ูู ุฃุฏุงุฉ ุฅุชูุงู ูููู ูุคูุช ุ ูุฏ ูุนูุฏ ุงูุชุญูู ุฅูู ุฐูู ุงููุญุธุฉ ุงูุชู ุณูุธู ูููุง ุฃูุฑ ุงููุชุงุจุฉ ูู ุฃู ูู ุฐุงูุฑุงุช ุงูุชุฎุฒูู ุงููุคูุช ุงููุชุทุงูุฑุฉ ููู ุชุชู ูุชุงุจุชู ุจุฃูุงูุฉ ุนูู ุงูููุญุฉ ุงููุบูุงุทูุณูุฉ ูููุฑุต ุงูุซุงุจุช. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">MAIN.CPP</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;chrono&gt; #include &lt;thread&gt; #include &lt;sstream&gt; #include "Common/Impl/WriteToConsoleListener.h" #include "SimpleZomby/SimpleZomby.h" int main() { auto writeToConsoleListener = Common::WriteToConsoleListener::instance(); { auto simpleZomby = SimpleZomby::Zomby::create(); simpleZomby-&gt;runOnce(writeToConsoleListener); std::this_thread::sleep_for(std::chrono::milliseconds(4500)); } // Zomby should be killed here { std::ostringstream buf; buf &lt;&lt; "============================================================\n" &lt;&lt; "| Zomby was killed |\n" &lt;&lt; "============================================================\n"; if (writeToConsoleListener) { writeToConsoleListener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;(buf.str())); } } std::this_thread::sleep_for(std::chrono::milliseconds(5000)); return 0; }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฎุฑุงุฌ ูุญุฏุฉ ุงูุชุญูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  ================================================== ========== <br>  |  ูุชู ุฒููุจู | <br>  ================================================== ========== <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br>  SimpleZomby ุนูู ููุฏ ุงูุญูุงุฉ! <br></blockquote><br></div></div><br>  ูุง ูููู ุฑุคูุชู ูู ูุฎุฑุฌุงุช ุงูุจุฑูุงูุฌ: <br>  - ุงุณุชูุฑ ุงูุฒููุจู ูู ุงูุนูู ุญุชู ุจุนุฏ ูุบุงุฏุฑุฉ ูุฌุงู ุงูุฑุคูุฉ ุ <br>  - ูู ูุชู ุงุณุชุฏุนุงุก ุฃู ูุฏูุฑุงุช ุฅูุง ูู ุงูุฒููุจู ุฃู WriteToConsoleListener. <br>  ุญุฏุซ ุชุณุฑุจ ููุฐุงูุฑุฉ. <br>  ูุงู ููุงู ุชุณุฑุจ ููููุงุฑุฏ.  ูุงูููุฑุฏ ูู ูุฐู ุงูุญุงูุฉ ูู ููุถูุน ุงูุชูููุฐ. <br>  ุงุณุชูุฑุช ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชู ูุงู ูู ุงูููุชุฑุถ ุฃู ุชุชููู ุนู ุงูุนูู ูู ูุคุดุฑ ุชุฑุงุจุท ูููุตู. <br>  ูุงู ูู ุงููููู ููุน ุญุฏูุซ ุชุณุฑุจ ูู WriteToConsoleListener ุจุงุณุชุฎุฏุงู ุชูููุฉ SingletonWeak ูู ููุงูุชู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฌูุจ ุงูุณููู ุบูุฑ ุงููุญุฏุฏ ุนูุฏ ุงูุงุชุตุงู ุจู Singleton</a> ุ ููููู ูู ุฃูู ุจุฐูู. <br><br><img src="https://habrastorage.org/webt/mg/qu/e3/mgque3fstboi4ot2hvdwniafixe.jpeg"><br>  (ุงูุตูุฑุฉ ูุฃุฎูุฐุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ููุง</a> ) <br><br>  <b>ููุงุฐุง ุงููุณุงููุ</b> <br>  ูุฃูู ููุชู ููุง ุฒุงู ุญูุงู. <br><br>  <b>ููู ูุฎุชูู ูุฐุง ุนู ุงููุฑุงุฌุน ุงูุฏุงุฆุฑูุฉ ูู ุงูุฃูุซูุฉ ุงูุณุงุจูุฉุ</b> <br>  ุญูููุฉ ุฃู ุงูููุฑุฏ ุงูููููุฏ ููุณ ูุฌุฑุฏ ุฌุฒุก ูู ุงูุฐุงูุฑุฉ ุ ููููู ุดูุก ูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุดูู ูุณุชูู ุนู ุงูุฎูุท ุงูุฐู ุฃุทููู. <br><br>  <b>ูู ูู ุงููููู ุชุฏููุฑ "ุงูุฒููุจู"</b> <br>  ุจุนุฏ ุชุฑู ุงููุทุงู (ุฃู ุจุนุฏ ุชุฏููุฑ ูู ุงูุฅุดุงุฑุงุช ุงูุฎุงุฑุฌูุฉ ุงููููุฉ ูุงูุถุนููุฉ ุฅูู ุงูุฒููุจู) - ูุฐุง ุฃูุฑ ูุณุชุญูู.  ุณูุชู ุชุฏููุฑ ุงูุฒููุจู ุนูุฏูุง ููุฑุฑ ุชุฏููุฑ ููุณู (ูุนู ุ ุฅูู ุดูุก ุฐู ุณููู ูุดุท) ุ ูุฑุจูุง ูู ูุญุฏุซ ุฃุจุฏูุง ุ ุนูู ุณุจูู ุงููุซุงู  ุณูู ูุณุชูุฑ ุญุชู ููุธู ูุธุงู ุงูุชุดุบูู ุนูุฏ ุฅููุงุก ุงูุชุทุจูู.  ุจุงูุทุจุน ุ ูุฏ ูููู ูุฑูุฒ ุงููุณุชุฎุฏู ุจุนุถ ุงูุชุฃุซูุฑ ุนูู ุดุฑุท ุงูุฎุฑูุฌ ูู ุฑูุฒ zombie ุ ููู ูุฐุง ุงูุชุฃุซูุฑ ุณูููู ุบูุฑ ูุจุงุดุฑ ููุนุชูุฏ ุนูู ุงูุชุทุจูู. <br><br>  <b>ููุจู ูุบุงุฏุฑุฉ ุงููุทุงูุ</b> <br>  ููููู ุงุณุชุฏุนุงุก zombie destructor ุจุดูู ุตุฑูุญ ุ ููู ูู ุบูุฑ ุงููุญุชูู ุฃู ุชุชุฌูุจ ุฃู ุณููู ุบูุฑ ูุญุฏุฏ ุจุณุจุจ ุงูุชุฏููุฑ ุงููุชูุฑุฑ ูููุงุฆู ุจูุงุณุทุฉ destructor ุงูุฐูู ูููุคุดุฑ ูุฐูู - ูุฐู ูุนุฑูุฉ ุถุฏ RAII.  ุฃู ููููู ุฅุถุงูุฉ ูุธููุฉ ุฅูุบุงุก ุงูุชููุฆุฉ ุงูุตุฑูุญุฉ - ููุฐุง ุฑูุถ ูู RAII. <br><br>  <b>ููู ูุฎุชูู ูุฐุง ุนู ูุฌุฑุฏ ุจุฏุก ุณูุณูุฉ ุฑุณุงุฆู ูุชุจูุนุฉ ุจู detach ()ุ</b> <br>  ูู ุญุงูุฉ ุงูุฒููุจู ุ ุนูู ุนูุณ ุฏุนูุฉ ุจุณูุทุฉ ูููุตู () ุ ููุงู ููุฑุฉ ูุฅููุงู ุงูุชุฏูู.  ููุท ูุง ูุนูู.  ุฅู ูุฌูุฏ ุงูููุฑุฉ ุงูุตุญูุญุฉ ูุณุงุนุฏ ุนูู ุฅุฎูุงุก ุงููุดููุฉ. <br><br>  <b>ูู ูุง ูุฒุงู ุงููุซุงู ุงุตุทูุงุนููุงุ</b> <br>  ุฌุฒุฆูุง  ูู ูุฐุง ุงููุซุงู ุงูุจุณูุท ุ ูู ููู ููุงู ูุง ูููู ูู ุงูุฃุณุจุงุจ ูุงุณุชุฎุฏุงู Shared_from_this () - ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงูููุงู ุจุงูุชูุงุท ุงูุถุนู () ุฃู ุงูุชูุงุท ุฌููุน ุงูุญููู ุงููุทููุจุฉ ูู ุงููุตู ุงูุฏุฑุงุณู.  ูููู ูุน ุชุนููุฏ ุงููููุฉ ุ ูุฏ ูุชุญูู ุงูุชูุงุฒู ุฅูู ุงูุฌุงูุจ <br>  Shared_from_this (). <br><br>  <b>ูุงูุฌุฑูุฏ ุ ูุงูุฌุฑูุฏ!</b>  <b>ูุฏููุง ุฎุท ุฏูุงุน ุฅุถุงูู ุถุฏ ุงูุฒููุจู!</b> <br>  ููุฃุณู ูุขู - ูููู Valgrind ูู ููุดู ุนู ุชุณุฑุจ ููุฐุงูุฑุฉ.  ููุงุฐุง - ุฃูุง ูุง ุฃุนุฑู.  ูู ุงูุชุดุฎูุต ุ ูุง ููุฌุฏ ุณูู ุฅุฏุฎุงูุงุช <b>"ุฑุจูุง ุถุงุฆุนุฉ"</b> ุชุดูุฑ ุฅูู ูุธุงุฆู ุงููุธุงู - ุชูุฑูุจูุง ุชูุฑูุจูุง ูุจููุณ ุงูููุฏุงุฑ ููุง ูู ุงูุญุงู ุนูุฏ ุงุณุชุฎุฏุงู ููุชุงุญ ูุงุฑุบ.  ูุง ุชูุฌุฏ ูุฑุงุฌุน ููุฏ ุงููุณุชุฎุฏู.  ูุฏ ุชููู ุฃุฏูุงุช ุงูุชุญููู ุงูุฏููุงูููู ุงูุฃุฎุฑู ุฃูุถู ุ ูููู ุฅุฐุง ููุช ูุง ุชุฒุงู ุชุนุชูุฏ ุนูููุง ุ ูุงูุฑุฃ ุนูููุง. <br><br><h3 style=";text-align:right;direction:rtl">  SteppingZomby </h3><br>  ููุชูู ุงูุฑูุฒ ูู ูุฐุง ุงููุซุงู ุฅูู ุฎุทูุงุช solutionDnsName ---&gt; connectTcp ---&gt; EstablishSsl ---&gt; sendHttpRequest ---&gt; readHttpReply ุ ูุญุงูุงุฉ ุชุดุบูู ุงุชุตุงู HTTPS ููุนููู ูู ุงูุชูููุฐ ุบูุฑ ุงููุชุฒุงูู.  ูู ุฎุทูุฉ ุชุณุชุบุฑู ุญูุงูู ุซุงููุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">SteppingZomby.h</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;memory&gt; #include &lt;atomic&gt; #include &lt;thread&gt; #include "Common/Manager.h" namespace Common { class Listener; } // namespace Common namespace SteppingZomby { class Zomby final : public Common::Manager, public std::enable_shared_from_this&lt;Zomby&gt; { public: static std::shared_ptr&lt;Zomby&gt; create(); ~Zomby() override; void runOnce(std::shared_ptr&lt;Common::Listener&gt; listener) override; private: Zomby(); using Semaphore = std::atomic&lt;bool&gt;; std::shared_ptr&lt;Common::Listener&gt; _listener; Semaphore _semaphore = false; std::thread _thread; void resolveDnsName(); void connectTcp(); void establishSsl(); void sendHttpRequest(); void readHttpReply(); }; } // namespace SteppingZomby</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">SteppingZomby.cpp</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;sstream&gt; #include &lt;string&gt; #include "SteppingZomby.h" #include "Common/Listener.h" namespace { void doSomething(Common::Listener&amp; listener, std::string&amp;&amp; callingFunctionName) { listener.processData(std::make_shared&lt;Common::Listener::Data&gt;(callingFunctionName + " started\n")); std::this_thread::sleep_for(std::chrono::milliseconds(1000)); listener.processData(std::make_shared&lt;Common::Listener::Data&gt;(callingFunctionName + " finished\n")); } } // namespace namespace SteppingZomby { Zomby::Zomby() = default; std::shared_ptr&lt;Zomby&gt; Zomby::create() { return std::shared_ptr&lt;Zomby&gt;(new Zomby()); } Zomby::~Zomby() { _semaphore = false; if (_thread.joinable()) { _thread.detach(); } if (_listener) { std::ostringstream buf; buf &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; _listener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;(buf.str())); } } void Zomby::runOnce(std::shared_ptr&lt;Common::Listener&gt; listener) { if (_semaphore) { throw std::runtime_error("SteppingZomby::Zomby::runOnce() called twice"); } _listener = listener; _semaphore = true; _thread = std::thread([shis = shared_from_this()](){ if (shis &amp;&amp; shis-&gt;_listener &amp;&amp; shis-&gt;_semaphore) { shis-&gt;resolveDnsName(); } if (shis &amp;&amp; shis-&gt;_listener &amp;&amp; shis-&gt;_semaphore) { shis-&gt;connectTcp(); } if (shis &amp;&amp; shis-&gt;_listener &amp;&amp; shis-&gt;_semaphore) { shis-&gt;establishSsl(); } if (shis &amp;&amp; shis-&gt;_listener &amp;&amp; shis-&gt;_semaphore) { shis-&gt;sendHttpRequest(); } if (shis &amp;&amp; shis-&gt;_listener &amp;&amp; shis-&gt;_semaphore) { shis-&gt;readHttpReply(); } }); } void Zomby::resolveDnsName() { doSomething(*_listener, std::string(typeid(*this).name()) + "::" + __func__); } void Zomby::connectTcp() { doSomething(*_listener, std::string(typeid(*this).name()) + "::" + __func__); } void Zomby::establishSsl() { doSomething(*_listener, std::string(typeid(*this).name()) + "::" + __func__); } void Zomby::sendHttpRequest() { doSomething(*_listener, std::string(typeid(*this).name()) + "::" + __func__); } void Zomby::readHttpReply() { doSomething(*_listener, std::string(typeid(*this).name()) + "::" + __func__); } } // namespace SteppingZomby</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">MAIN.CPP</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;chrono&gt; #include &lt;thread&gt; #include &lt;sstream&gt; #include "SteppingZomby/SteppingZomby.h" #include "Common/Impl/WriteToConsoleListener.h" int main() { auto writeToConsoleListener = Common::WriteToConsoleListener::instance(); { auto steppingZomby = SteppingZomby::Zomby::create(); steppingZomby-&gt;runOnce(writeToConsoleListener); std::this_thread::sleep_for(std::chrono::milliseconds(1500)); } // Zombies should be killed here { std::ostringstream buf; buf &lt;&lt; "============================================================\n" &lt;&lt; "| Zomby was killed |\n" &lt;&lt; "============================================================\n"; if (writeToConsoleListener) { writeToConsoleListener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;(buf.str())); } } std::this_thread::sleep_for(std::chrono::milliseconds(5000)); return 0; }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฎุฑุงุฌ ูุญุฏุฉ ุงูุชุญูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  ุจุฏุฃ N13SteppingZomby5ZombyE :: solutionDnsName <br>  ุงูุงูุชูุงุก ูู N13SteppingZomby5ZombyE :: solutionDnsName <br>  ุจุฏุฃ N13SteppingZomby5ZombyE :: connectTcp <br>  ================================================== ========== <br>  |  ูุชู ุฒููุจู | <br>  ================================================== ========== <br>  N13SteppingZomby5ZombyE :: connectTcp ุงูุงูุชูุงุก <br>  ุจุฏุฃ N13SteppingZomby5ZombyE :: EstablishSsl <br>  N13SteppingZomby5ZombyE :: EstablishSsl ุงูุงูุชูุงุก <br>  ุจุฏุฃ N13SteppingZomby5ZombyE :: sendHttpRequest <br>  N13SteppingZomby5ZombyE :: sendHttpRequest ุงูุงูุชูุงุก <br>  ุจุฏุฃ N13SteppingZomby5ZombyE :: readHttpReply <br>  N13SteppingZomby5ZombyE :: readHttpReply ุงูุชูู <br>  N13SteppingZomby5ZombyE :: ~ Zomby <br>  N6Common22WriteToConsoleListenerE :: ~ WriteToConsoleListener <br></blockquote><br></div></div><br>  ููุง ูู ุงููุซุงู ุงูุณุงุจู ุ ุฃุฏุช ุงุณุชุฏุนุงุก runOnce () ุฅูู ุฅุดุงุฑุฉ ุฏุงุฆุฑูุฉ. <br>  ูููู ูุฐู ุงููุฑุฉ ุ ุชู ุงุณุชุฏุนุงุก ุงููุฏูุฑุงุช Zomby ู WriteToConsoleListener.  ุชู ุฅุตุฏุงุฑ ุฌููุน ุงูููุงุฑุฏ ุจุดูู ุตุญูุญ ุญุชู ูุชู ุฅููุงุก ุงูุชุทุจูู.  ูู ูุญุฏุซ ุชุณุฑุจ ููุฐุงูุฑุฉ. <br><br>  <b>ูุง ูู ุงููุดููุฉ ุฅุฐูุ</b> <br>  ุงููุดููุฉ ูู ุฃู ุงูุฒููุจู ุนุงุด ููุชุฑุฉ ุทูููุฉ - ุญูุงูู ุซูุงุซ ุซูุงู ููุตู ุจุนุฏ ุชุฏููุฑ ุฌููุน ุงูุฑูุงุจุท ุงูุฎุงุฑุฌูุฉ ุงููููุฉ ูุงูุถุนููุฉ ุจูุง.  ุญูุงูู ุซูุงุซ ุซูุงู ุฃุทูู ููุง ูุงู ููุจุบู ุฃู ูุนูุด.  ูุทูุงู ูุฐู ุงููุชุฑุฉ ุ ุดุงุฑู ูู ุงูุชุฑููุฌ ูุชูููุฐ ุงุชุตุงู HTTPS - ุญุชู ูุตู ุฅูู ููุงูุชู.  ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ุงููุชูุฌุฉ ูู ุชุนุฏ ููุงู ุญุงุฌุฉ.  ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ููุทู ุงูุฃุนูุงู ุงููุชููู ุญุงูู ุฅููุงู ุงูุฒููุจู. <br><br>  <b>ุญุณููุง ุ ููุฑ ูู ุงูุฃูุฑ ุ ููุฏ ุญุตูุช ุนูู ุงูุฅุฌุงุจุฉ ุงูุชู ูุง ุชุญุชุงุฌูุง ....</b> <br>  ูู ุญุงูุฉ ุงุชุตุงู HTTPS ููุนููู ุ ูุฏ ุชููู ุงูุนูุงูุจ <b>ุนูู ุฌุงูุจูุง ุนูู</b> ุงููุญู ุงูุชุงูู: <br>  - ุงุณุชููุงู ุงูุฐุงูุฑุฉ ุ <br>  - ุงุณุชููุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ <br>  - ุงุณุชููุงู ูููุฐ TCP ุ <br>  - ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ูููุงุฉ ุงูุงุชุตุงู (ูููู ุฃู ูููู ูู ูู ุงูุทูุจ ูุงูุงุณุชุฌุงุจุฉ ูุญุฏุฉ ุชุฎุฒูู ุจุงูููุบุงุจุงูุช) ุ <br>  - ูุฏ ุชุชุณุจุจ ุงูุจูุงูุงุช ุบูุฑ ุงููุชููุนุฉ ูู ุชุนุทูู ุชุดุบูู ููุทู ุงูุฃุนูุงู ุฐู ุงููุณุชูู ุงูุฃุนูู - ุญุชู ุงูุงูุชูุงู ุฅูู ูุฑุน ุงูุชูููุฐ ุงูุฎุงุทุฆ ุฃู ุฅูู ุณููู ุบูุฑ ูุญุฏุฏ ุ ูุฃู  ูุฏ ูุชู ุจุงููุนู ุชุฏููุฑ ุขููุงุช ูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุฉ. <br>  ูุนูู <b>ุงูุฌุงูุจ ุงูุจุนูุฏ</b> (ูุง ุชูุณู - ุทูุจ HTTPS ูุฎุตุต ูุดุฎุต ูุง) - ุจุงูุถุจุท ููุณ ูุถูุนุฉ ุงูููุงุฑุฏ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฃูู ูููู: <br>  - ูุดุฑ ุตูุฑ ุงููุทุท ุนูู ูููุน ุงูุดุฑูุฉ. <br>  - ุชุนุทูู ุงูุชุฏูุฆุฉ ุชุญุช ุงูุจูุงุท ูู ุงููุทุจุฎ ุงูุฎุงุต ุจู ุ <br>  - ุชูููุฐ ุฃูุฑ ุชุฌุงุฑู ูู ุงูุจูุฑุตุฉ ุ <br>  - ุชุญููู ุงูุฃููุงู ูู ุญุณุงุจู ุ <br>  - ุฅุทูุงู ุตุงุฑูุฎ ุจุงููุณุชู ุนุงุจุฑ ูููุงุฑุงุช. <br>  ุญุงูู ููุทู ุงูุนูู ุฅููุงู ุงูุฒููุจู ุนู ุทุฑูู ุฅุฒุงูุฉ ุฌููุน ุงูุฑูุงุจุท ุงููููุฉ ูุงูุถุนููุฉ.  <b>ูุงู ูู ุงูููุชุฑุถ ุฃู</b> ูุชู ุฅููุงู ุชูุฏู ุทูุจ HTTPS - ููู ููุช ุงูุฃูุงู ุจุนุฏ ุ ููู ูุชู ุฅุฑุณุงู ุจูุงูุงุช ูุณุชูู ุงูุชุทุจูู ุจุนุฏ. <br>  ููู ุงููุณุงูู ูุฑุฑุช ุจุทุฑููุชูุง ุงูุฎุงุตุฉ. <br><br>  ูููู ููุทู ุงูุฃุนูุงู ุฅูุดุงุก ูุงุฆูุงุช ุฌุฏูุฏุฉ ูู ููุงู ุงููุณุงูู ููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ุชุฏููุฑูุง ุ ูุถุฑุจ ุงุณุชูุฒุงู ุงูููุงุฑุฏ. <br>  ูู ุญุงูุฉ ูุฌูุฏ ุนูููุฉ ูุณุชูุฑุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุงุชุตุงู Websocket) ุ ูููู ุฃู ุชุณุชูุฑ ูุฏุฑ ุงูููุงุฑุฏ ูุณุงุนุงุช ุ ูุฅุฐุง ูุงูุช ููุงู ุขููุฉ ูุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู ูู ุงูุชูููุฐ ุนูุฏูุง ูุชู ูุทุน ุงูุงุชุตุงู ุ ูููู ุฅููุงููุง ุจุดูู ุนุงู. <br><br>  <b>Valgrindุ</b> <br>  ูุง ูุฑุตุฉ  ูู ุดูุก ุตุฏุฑ ุจุดูู ุตุญูุญ ูุชูุธูููุง.  ูู ููุช ูุชุฃุฎุฑ ูููุณ ูู ุงูุฎูุท ุงูุฑุฆูุณู ุ ูููู ุตุญูุญ ุชูุงูุง. <br><br><h3 style=";text-align:right;direction:rtl">  BoozdedZomby </h3><br>  ูุณุชุฎุฏู ูุฐุง ุงููุซุงู ููุชุจุฉ boozd :: azzio ุ ุงูุชู ุชุนุฏ ุชูููุฏูุง ููุฏุนู :: asio.  ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ุงูุชูููุฏ ุงูุฎุงู ุฅูู ุญุฏ ูุง ุ ูุฅูู ูุณูุญ ููุง ูุฅุธูุงุฑ ุฌููุฑ ุงููุดููุฉ.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ุงูููุชุจุฉ ุนูู ูุธููุฉ io_context :: async_read (ูู ุงูุฃุตู ุ ุฅููุง ูุฌุงููุฉ ุ ูููููุง ูุง ุชุบูุฑ ุงูุฌููุฑ) ุ ูุงูุชู ุชูุจู: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุฏูู ุ ูููู ุฃู ุชุฃุชู ููู ุงูุจูุงูุงุช ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุฎุฒู ูุคูุช ูุณูุญ ูู ุจุชุฌููุน ูุฐู ุงูุจูุงูุงุช ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู ุงูุชู ุณูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุงูุงูุชูุงุก ูู ูุฑุงุกุฉ ุงูุจูุงูุงุช. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชูููุฐ ูุธููุฉ io_context :: async_read ุนูู ุงูููุฑ ููุง ุชุณุชุฏุนู ูุนุงูุฏุฉ ุงูุงุชุตุงู ุ ุญุชู ูู ูุงูุช ูุชูุฌุฉ ุงูุชูููุฐ ูุนุฑููุฉ ุจุงููุนู (ุนูู ุณุจูู ุงููุซุงู ุ ุฎุทุฃ). </font><font style="vertical-align: inherit;">ูุชู ุงุณุชุฏุนุงุก ุฑุฏ ุงูุงุชุตุงู ููุท ูู ูุธููุฉ ุงูุญุธุฑ io_context :: run () (ูู ุงูุฃุตู ุ ููุงู ูุธุงุฆู ุฃุฎุฑู ูุตููุฉ ูุงุณุชุฏุนุงุก ุนูููุงุช ุฑุฏ ุงูุงุชุตุงู ุจูุฌุฑุฏ ุฃู ุชููู ุงูุจูุงูุงุช ุฌุงูุฒุฉ).</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffer.h</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;vector&gt; namespace boozd::azzio { using buffer = std::vector&lt;int&gt;; } // namespace boozd::azzio</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream.h</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;optional&gt; namespace boozd::azzio { class stream { public: virtual ~stream() = default; virtual std::optional&lt;int&gt; read() = 0; }; } // namespace boozd::azzio</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io_context.h</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;functional&gt; #include &lt;optional&gt; #include "buffer.h" namespace boozd::azzio { class stream; class io_context { public: ~io_context(); enum class error_code {no_error, good_error, bad_error, unknown_error, known_error, well_known_error}; using handler = std::function&lt;void(error_code)&gt;; // Start an asynchronous operation to read a certain amount of data from a stream. // This function is used to asynchronously read a certain number of bytes of data from a stream. // The function call always returns immediately. void async_read(stream&amp; s, buffer&amp; b, handler&amp;&amp; handler); // Run the io_context object's event processing loop. void run(); private: using pack = std::tuple&lt;stream&amp;, buffer&amp;&gt;; using pack_optional = std::optional&lt;pack&gt;; using handler_optional = std::optional&lt;handler&gt;; pack_optional _pack_optional; handler_optional _handler_optional; }; } // namespace boozd::azzio</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io_context.cpp</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;thread&gt; #include &lt;chrono&gt; #include "io_context.h" #include "stream.h" namespace boozd::azzio { io_context::~io_context() { std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } void io_context::async_read(stream&amp; s, buffer&amp; b, io_context::handler&amp;&amp; handler) { _pack_optional.emplace(s, b); _handler_optional.emplace(std::move(handler)); } void io_context::run() { if (_pack_optional &amp;&amp; _handler_optional) { auto&amp; [s, b] = *_pack_optional; using namespace std::chrono; auto start = steady_clock::now(); while (duration_cast&lt;milliseconds&gt;(steady_clock::now() - start).count() &lt; 1000) { if (auto read = s.read()) b.emplace_back(*read); std::this_thread::sleep_for(milliseconds(100)); } (*_handler_optional)(error_code::no_error); } } } // namespace boozd::azzio</span></span></span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุทุจูู ูุงุฌูุฉ boozd :: azzio :: stream ุงููุญูุฏ ุงูุฐู ููุชุฌ ุจูุงูุงุช ุนุดูุงุฆูุฉ: </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impl / random_stream.h</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"boozd/azzio/stream.h"</span></span></span><span class="hljs-meta"> namespace boozd::azzio { class random_stream final : public stream { public: ~random_stream() override; std::optional</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;int&gt; read() override; }; } // namespace boozd::azzio</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impl / random_stream.cpp</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include "random_stream.h" namespace boozd::azzio { boozd::azzio::random_stream::~random_stream() { std::cout &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; } std::optional&lt;int&gt; random_stream::read() { if (!(rand() &amp; 0x1)) return rand(); return std::nullopt; } } // namespace boozd::azzio</span></span></span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฏูุฑ BoozdedZomby ูุธููุฉ lambda ูู ุฎูุท ูููุตู. </font><font style="vertical-align: inherit;">ุชููู ุงูุฏุงูุฉ lambda ุจุชุณุฌูู ุงููุนุงูุฌ ุนู ุทุฑูู ุงุณุชุฏุนุงุก async_read () ุ ูุจุนุฏ ุฐูู ุชููุญ ุงูุชุญูู ููุขููุงุช ุงูุฏุงุฎููุฉ ูู boozd :: azzio ุจุงุณุชุฎุฏุงู run (). </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูููู ููุขููุงุช ุงูุฏุงุฎููุฉ ูู boozd :: azzio ุฅุฌุฑุงุก ููุงููุงุช ุฅูู ุงููุฎุฒู ุงููุคูุช ูุฏูู (ูุตุฏุฑ ุงูุจูุงูุงุช) ูู ุฃู ููุช ูุจู ุงุณุชุฏุนุงุก ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู. </font><font style="vertical-align: inherit;">ูุถูุงู ุตุญุฉ ุงูุนุฏูุฏ ูู ุงููุงุฆูุงุช ุงูุชู ุชู ุชุฌููุนูุง ูู ูุซูู ูููุฆุฉ ุ ุชูุชูุท ูุธููุฉ lambda shared_from_this.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BoozdedZomby.h</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;memory&gt; #include &lt;atomic&gt; #include &lt;thread&gt; #include "Common/Manager.h" #include "boozd/azzio/buffer.h" #include "boozd/azzio/io_context.h" #include "boozd/azzio/impl/random_stream.h" namespace Common { class Listener; } // namespace Common namespace BoozdedZomby { class Zomby final : public Common::Manager, public std::enable_shared_from_this&lt;Zomby&gt; { public: static std::shared_ptr&lt;Zomby&gt; create(); ~Zomby() override; void runOnce(std::shared_ptr&lt;Common::Listener&gt; listener) override; private: Zomby(); using Semaphore = std::atomic&lt;bool&gt;; Semaphore _semaphore = false; std::shared_ptr&lt;Common::Listener&gt; _listener; boozd::azzio::random_stream _stream; boozd::azzio::buffer _buffer; boozd::azzio::io_context _context; std::thread _thread; }; } // namespace BoozdedZomby</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BoozdedZomby.cpp</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;sstream&gt; #include "boozd/azzio/impl/random_stream.h" #include "BoozdedZomby.h" #include "Common/Listener.h" namespace BoozdedZomby { Zomby::Zomby() = default; std::shared_ptr&lt;Zomby&gt; Zomby::create() { return std::shared_ptr&lt;Zomby&gt;(new Zomby()); } Zomby::~Zomby() { _semaphore = false; if (_thread.joinable()) { _thread.detach(); } if (_listener) { std::ostringstream buf; buf &lt;&lt; typeid(*this).name() &lt;&lt; "::" &lt;&lt; __func__ &lt;&lt; std::endl; _listener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;(buf.str())); } } void Zomby::runOnce(std::shared_ptr&lt;Common::Listener&gt; listener) { if (_semaphore) { throw std::runtime_error("BoozdedZomby::Zomby::runOnce() called twice"); } _listener = listener; _semaphore = true; _thread = std::thread([shis = shared_from_this()]() { while (shis &amp;&amp; shis-&gt;_semaphore &amp;&amp; shis-&gt;_listener) { auto handler = [shis](auto errorCode) { if (shis &amp;&amp; shis-&gt;_listener &amp;&amp; errorCode == boozd::azzio::io_context::error_code::no_error) { std::ostringstream buf; buf &lt;&lt; "BoozdedZomby has got a fresh data: "; for (auto const &amp;elem : shis-&gt;_buffer) buf &lt;&lt; elem &lt;&lt; ' '; buf &lt;&lt; std::endl; shis-&gt;_listener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;(buf.str())); } }; shis-&gt;_buffer.clear(); shis-&gt;_context.async_read(shis-&gt;_stream, shis-&gt;_buffer, handler); shis-&gt;_context.run(); } }); } } // namespace BoozdedZomby</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAIN.CPP</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;chrono&gt; #include &lt;thread&gt; #include &lt;sstream&gt; #include "BoozdedZomby/BoozdedZomby.h" #include "Common/Impl/WriteToConsoleListener.h" int main() { auto writeToConsoleListener = Common::WriteToConsoleListener::instance(); { auto boozdedZomby = BoozdedZomby::Zomby::create(); boozdedZomby-&gt;runOnce(writeToConsoleListener); std::this_thread::sleep_for(std::chrono::milliseconds(4500)); } // Zombies should be killed here { std::ostringstream buf; buf &lt;&lt; "============================================================\n" &lt;&lt; "| Zomby was killed |\n" &lt;&lt; "============================================================\n"; if (writeToConsoleListener) { writeToConsoleListener-&gt;processData(std::make_shared&lt;Common::Listener::Data&gt;(buf.str())); } } std::this_thread::sleep_for(std::chrono::milliseconds(5000)); return 0; }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฎุฑุงุฌ ูุญุฏุฉ ุงูุชุญูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl"> BoozdedZomby has got a fresh data: 1144108930 101027544 1458777923 1115438165 74243042 <br> BoozdedZomby has got a fresh data: 143542612 1131570933 <br> BoozdedZomby has got a fresh data: 893351816 563613512 704877633 <br> BoozdedZomby has got a fresh data: 1551901393 1399125485 1899894091 937186357 590357944 357571490 <br> ============================================================ <br>  | Zomby was killed | <br> ============================================================ <br> BoozdedZomby has got a fresh data: 1927702196 130060903 1083454666 2118797801 2035308228 824938981 <br> BoozdedZomby has got a fresh data: 2020739063 1635339425 34075629 <br> BoozdedZomby has got a fresh data: 2146319451 500782188 1269406752 884936716 892053144 <br> BoozdedZomby has got a fresh data: 330111137 1723153177 1070477904 <br> BoozdedZomby has got a fresh data: 343098142 280090412 589673557 889688008 2014119113 388471006 <br></blockquote><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุจุจ ุงุณุชุฏุนุงุก run_once () ูู ุฅุดุงุฑุฉ ุฏุงุฆุฑูุฉ. ูุงุตู ุงูุฒููุจู ุงูุนูู ุญุชู ุจุนุฏ ูุบุงุฏุฑุฉ ูุฌุงู ุงูุฑุคูุฉ. ูู ูุชู ุงุณุชุฏุนุงุก Destructors ููุซูุฑ ูู ุงููุงุฆูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุฃุซูุงุก ุงูุจุฑูุงูุฌ: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- boozdedZombyุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- WriteToConsoleListener ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุญููู ุงูุจูุงูุงุช ุบูุจูุจุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏุซ ุชุณุฑุจ ููุฐุงูุฑุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงู ููุงู ุชุณุฑุจ ููููุงุฑุฏ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฎุชูู ูุฐุง ุงููุซุงู ุนู ุงูุณุงุจูุ</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุฃูุฑุจ ุจูุซูุฑ ุฅูู ุงูููุฏ ุงูุญูููู. ูุฐุง ูู ูุนุฏ ูุซุงูุง ุงุตุทูุงุนูุง. ูุฏ ูุญุฏุซ ูุฐุง ุงูุฑูุฒ ุจุดูู ุทุจูุนู ุนูุฏ ุงุณุชุฎุฏุงู ุงูุชุนุฒูุฒ :: asio. ุนูุงูุฉ ุนูู ุฐูู ุ ูุง ูููู ุฅุตูุงุญู ุจูุฌุฑุฏ ุฑูุถ ุงูุชูุงุท ุฑุงุจุท ููู ูุตุงูุญ ุฑุงุจุท ุถุนูู - ููุฐุง ุณูู ูุชุนุงุฑุถ ูุน ุตุญุฉ ุงููุฎุฒู ุงููุคูุช ูุงูุฏูู (ูุตุฏุฑ ุงูุจูุงูุงุช). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valgrindุ</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุจู. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูุจุฏู ุฃูู ุชู ุงููุดู ุนู ุงูุชุณุฑูุจุงุช.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุณุงูู ูู ุงูุจุฑูุฉ </font></font></h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดููุฉ ุจุนูุฏุฉ ุงูููุงู! ูุฐูู ูุง ุฃุญุฏ ููุชุจ!</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ููุชุจ. </font></font><br> <a href="https://www.boost.org/doc/libs/master/libs/beast/example/http/client/async/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงู ุนููู HTTP ูุซุงู ุนููู </font></font></a> <br> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Websocket</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุซุงุฆู </font><a href=""><font style="vertical-align: inherit;">ุงูุฏุฑุณ</font></a><font style="vertical-align: inherit;"> ุงูุฑุณูู ูุนูู ููููุฉ ูุชุงุจุฉ BoozdedZomby + SteppingZomby ุงููุฎุชูุทุฉ. ูู ุงููุณุชุญูู ููุนู ุ ููู ูุง ุฃุญุฏ ูุญุงูู. ุนูู ูุฌู ุงูุชุญุฏูุฏ ุ ูู ุฑูุฒ ุงูุนุฑุถ ุงูุชูุถูุญู ุ ูุง ุชุธูุฑ ุงูุฎุงุตูุฉ ุงูุฑุฆูุณูุฉ ููุฒููุจู ุ ูููู ูุฌุจ ุนููู ููู ูุฐุง ุฅูู ุงูุฅูุชุงุฌ - ูุงูุขู ุฃูุช ุชูุดู ุจุงููุนู ุนูู ุทูู ุงูุญุงูุฉ ุ ุนูู ุงูุฃุฑุฌุญ ุญุชู ุนูู ุงูุฌุงูุจ ุงููุธูู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฅููุงู ุงููุณุงูู ูู ุฎูุงู ุชุฏููุฑ ุฏูุนุฉ :: asio :: io_context ูุซูู!</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... ุนูู ุทูู ุงูุทุฑูู ุ ูุชุฏููุฑ ููุงูุงุช ุฃุฎุฑู n (ุฑุจูุง ุบูุฑ ุงููุณุงูู) ุงูุฐูู ูุนูุดูู ูู ูุฐุง ุงูุณูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฒูุฏ ูู ุงูุฃูุซูุฉ: ูููุง </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุซุงู ูุดุงุจู ุนูู ููุฑุฏ ุชุงุจุน ูุฌูุฉ ุฎุงุฑุฌูุฉ ุ </font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ูุณุฃู ุดุฎุต ุณุคุงู ุญูู stackoverflow ุ ููู ููููู ุฌุนู ุงูููุฏ ุงูุฎุงุต ุจู ุฃูุซุฑ ุบูุจูุจุฉ</font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูููู ุณุคุงู ุขุฎุฑ ุนู ุณุจุจ ุนุฏู ุนูู ุบูุจูุจุฉ ุงูุญุจูุจุฉ ุ </font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ุฑุฌู ุฎุงุฆู ูู ุงูุฑุณุงุฆู ุญูู ุชุณุฑุจ ุงูุฐุงูุฑุฉ ุนูุฏ ุชุดุบูู ุบูุจูุจุฉ.</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ูุง ุชุตู ุงูููุงูุฉ ุฌููุน ุฃููุงุน ูุถุงุฏุงุช "ุงูุฒููุจู". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุนุซูุฑ ุนูููุง ูู ุดูู ุงููุฌููุฉ ูู ุงูุฃููุงุน ุงููุฐููุฑุฉ ุฃุนูุงู ุ ููู ุดูู ุฃููุงุน ูุณุชููุฉ ุฌุฏูุฏุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูุญุฏุซ antipattern ููุณ ููุท ุนูุฏูุง ูุชู ุชุดุบูู std :: thread ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู - ูููู ุงูุงุณุชููุงุก ุนูู ูุฐุง ุงูุฌุฒุก ูู ุงูุนูู ูู ุฎูุงู ููุชุจุฉ ูุชุนุฏุฏุฉ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุชุงุจุนุฉ ูุฌูุฉ ุฎุงุฑุฌูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ูููู ุงูุฑุงุจุท ุงูุฏูุฑู ุฃุทูู ูู ุงูุฃูุซูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ุชููู ุงูุจููุฉ ุฅูุง ูุฏููุนุฉ ุจุงูุญุฏุซ ุฃู ุจูุงุกู ุนูู ุงูุงูุชุฑุงุน ุงูุฏูุฑู ุงููุงุฆู ุนูู ุงูุงูุชุฑุงุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ููุณ ูู ุดูุก ููู ุฌุฏุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููู ุฃู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงุฆูุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏุฃ antipattern ุจูุซูู ุงูุทุจูุฉ ูู ุงูุญุตูู ุนูู ุฅุดุงุฑุฉ ูููุฉ ุฅูู ููุณู. ูุชู ุฅูุดุงุคู ุฏุงุฆููุง ุชูุฑูุจูุง ุจุงุณุชุฎุฏุงู std :: enable_shared_from_this ุ ุนูู ุงูุฑุบู ูู ุฃูู ูููู ุฃูุถูุง ุชูููุฑู ุฎุงุฑุฌููุง (ุจูุง ูู ุฐูู ุงูุงุฑุชุจุงุท ุงูุถุนูู - ุงููุฆุฉ ููุณูุง ูููู ุฃู ุชุฌุนููุง ูููุฉ). ุฑุจูุง ูููู ููุงู ุงุณุชุซูุงุก ุงุณุชุซูุงุฆู ูุงุญุฏ ููุฐู ุงููุงุนุฏุฉ: ุนูุฏูุง ูููุฑ ุงูุฑูุฒ ุงูุฎุงุฑุฌู ูุฑุฌุนูุง ููููุง ุฃู ุถุนูููุง ููุซูู ูุฆุฉ ุฅูู ุฃุญุฏ ุญููู ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ูุง ูููู ุชุญููู ุงูุดูุฑุฉ ุงูุฏููุงููููุฉ ูุงุฏุฑุงู ุนูู ุงูุชุดุงู ูุฐุง ุงููุถุงุฏ ุ ูุฎุงุตุฉ ุฅุตุฏุงุฑู ูู SteppingZomby. ููุฌุฏ ุฃูุถูุง ุฃูู ุถุฆูู ูู ุงูุชุญููู ุงูุซุงุจุช - ููุฌุฏ ุฎุท ุฑููุน ุฌุฏูุง ุจูู ุงูุงุณุชุฎุฏุงู ุงูุตุญูุญ ูุบูุฑ ุงูุตุญูุญ ูู Shared_from_this (ูููู ุชุตุญูุญ ุฌููุน ุฃูุซูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุงุฑุฏุฉ ูู ุงูููุงูุฉ ุนู ุทุฑูู ุฅุฌุฑุงุก ุชุตุญูุญุงุช ุตุบูุฑุฉ ุฌุฏูุง - ููุท 1 ุฅูู 6 ุฃุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ุชุณุงุนุฏ ุงูุงุฎุชุจุงุฑุงุช ุงูุชููุงุฆูุฉ ูู ุชุญุฏูุฏ ุฐูู ูุงูุชุญูู ูู ุตุญุฉ ุนูููุฉ ุงูุฅุฒุงูุฉ - ูููู ููุฐุง ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูุง ุงูุฐู ุชุจุญุซ ุนูู. </font><font style="vertical-align: inherit;">ุฃุนุฑู ุชูุงูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุญุซ antipattern ุ ููุง ูููุงู ุ ุณูู ุชุถุทุฑ ุฅูู ูุฏููุง. </font><font style="vertical-align: inherit;">ูููุฐุง ุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุงูุชูููุฑ ูู ุฌููุน ุชุทุจููุงุช std :: enable_shared_from_this - ููู </font><font style="vertical-align: inherit;">ุฎุทูุฑุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุบุงูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ููููุง ููุชุงุฆุฌ ุงูุชุตููุช - ุณุฃููู ุจุฅุนุฏุงุฏ ููุงูุฉ ูููุตูุฉ ูุน ููุงูุดุฉ ุฎูุงุฑุงุช ุงูุชุฎูุต ูู ุงููุถุงุฏ.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar471326/">https://habr.com/ru/post/ar471326/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar471310/index.html">ุฑุฃูู ุดุฎุตู ุฌุฏุง ุญูู ุงูุชุนููู ุงููููู ูููุณ ููุท ูู ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
<li><a href="../ar471312/index.html">ุงูุชุญุถูุฑ ูุดูุงุฏุฉ ุงูุฑุจูุน ุงูููููุฉ. ุงูุชูููุฏ ุงูุฑุจูุน</a></li>
<li><a href="../ar471318/index.html">ุณุจุชูุจุฑ ุขูุฉ ุงูุชุนูู ูุงูุฐูุงุก ุงูุงุตุทูุงุนู</a></li>
<li><a href="../ar471320/index.html">ุฃุฏูุงุช ููุทูุฑู ุงูุจุฑุงูุฌ: ููุชุจุงุช Open Framework ู ููุชุจุงุช ุงูุชุนูู ุงูุขูู</a></li>
<li><a href="../ar471324/index.html">ูู ุชุญูู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงููููุงููุฒุงุ</a></li>
<li><a href="../ar471330/index.html">ูุตุต ุงูููุจููุชุฑ ุงูููุฑู. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar471332/index.html">ูุตุต ุงูููุจููุชุฑ ุงูููุฑู. ุงูุฌุฒุก 3</a></li>
<li><a href="../ar471334/index.html">ููุญูุธ ุ ูููู ููุณ ููุชุดูุฌ - ุชุนูู "ุนู ุทุฑูู ุงูุจุทุงูุงุช"</a></li>
<li><a href="../ar471336/index.html">Holivar. ุชุงุฑูุฎ Runet. ุงูุฌุฒุก 6. ุฃููุงู: ูุงููุฉ ุ ุงูุดุฑูุท ุ 282 ูุงูุตูููุฉ ุงููุณุงุฑ</a></li>
<li><a href="../ar471340/index.html">Drimsim ุถุฏ ูุงุชู 20 ุจุฑู ุฌููุฉ! ููู ูููุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>