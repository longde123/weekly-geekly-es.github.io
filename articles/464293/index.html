<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👩‍👦 🐅 🏰 ¿Los ganchos se reemplazan en React Redux? 🤤 👨🏽‍🤝‍👨🏻 👈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde que aparecieron los ganchos en React, ha habido muchas preguntas sobre si pueden reemplazar a Redux. 

 Creo que los ganchos y Redux tienen poco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¿Los ganchos se reemplazan en React Redux?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/464293/">  Desde que aparecieron los ganchos en React, ha habido muchas preguntas sobre si pueden reemplazar a Redux. <br><br>  Creo que los ganchos y Redux tienen poco en común.  Los ganchos no nos dan nuevas oportunidades increíbles para trabajar con el estado.  En cambio, extienden las API para que puedan hacer en React lo que ya era posible en él.  Sin embargo, la API de enlace ha hecho que trabajar con las capacidades de administración de estado de React sea mucho más conveniente.  Resultó que es más fácil usar las nuevas capacidades para trabajar con el estado que las antiguas que estaban disponibles en los componentes según las clases.  Ahora uso las herramientas para trabajar con el estado de los componentes con mucha más frecuencia que antes.  Naturalmente, hago esto solo cuando es apropiado. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/3l/la/tr/3llatro-chokmu9rdtwtga0l1sc.jpeg"></a> <br><br>  Para explicar mi actitud hacia React Hooks y Redux, primero me gustaría hablar sobre las situaciones en las que se usa Redux. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">¿Qué es redux?</font> </h2><br>  Redux es una biblioteca que implementa almacenamiento de estado de aplicación predecible.  También es una arquitectura que se integra perfectamente con React. <br><br>  Estas son las principales fortalezas de Redux: <br><br><ul><li>  Representación determinista del estado (en combinación con componentes puros, esto hace posible formar elementos visuales deterministas). </li><li>  Soporte para cambios de estado transaccional. </li><li>  Aislamiento de la gestión estatal de los mecanismos de E / S y los efectos secundarios. </li><li>  La presencia de una sola fuente de datos confiables para el estado. </li><li>  Fácil organización de la colaboración con el estado en varios componentes. </li><li>  Herramientas de análisis transaccional (registro automático de objetos de acción). </li><li>  Depuración con la capacidad de grabar y reproducir el proceso de ejecución del programa (Time Travel Debugging, TTD). </li></ul><br>  En otras palabras, Redux le permite organizar bien su código y le permite depurarlo convenientemente.  Redux ayuda a desarrollar aplicaciones que son fáciles de mantener.  El uso de esta biblioteca hace que sea más fácil encontrar las fuentes de problemas que surgen en los programas. <br><br><h2>  <font color="#3AC1EF">¿Qué son los ganchos React?</font> </h2><br>  Los ganchos de reacción permiten, cuando se trabaja con componentes funcionales, usar un análogo del estado de los componentes basado en clases y análogos de sus métodos de ciclo de vida.  Los ganchos aparecieron en React 16.8. <br><br>  Entre las principales fortalezas de los ganchos se encuentran las siguientes: <br><br><ul><li>  La capacidad de usar el estado y manejar los eventos del ciclo de vida de los componentes sin usar componentes basados ​​en clases. </li><li>  Almacenamiento conjunto de la lógica relacionada en la misma ubicación del componente en lugar de dividir una lógica similar entre varios métodos de ciclo de vida. </li><li>  Compartir mecanismos independientes de la implementación del componente (esto es similar a la plantilla de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">renderizado</a> ). </li></ul><br>  Tenga en cuenta que estas excelentes funciones no abruman a Redux.  Los ganchos de reacción pueden y deben usarse para realizar actualizaciones de estado deterministas, pero esta siempre ha sido una de las características de Reacción, y el modelo de estado determinista de Redux combina bien con esta característica.  Así es como React logra el determinismo en la salida de elementos visuales, y este es, sin exagerar, uno de los motivos principales para crear React. <br><br>  Si usa herramientas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la API react-redux con ganchos</a> , o el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gancho React useReducer</a> , encontrará que no hay razón para preguntar qué elegir: ganchos o Redux.  Puede usar ambas, combinando y combinando estas tecnologías. <br><br><h2>  <font color="#3AC1EF">¿Qué reemplazan los ganchos?</font> </h2><br>  Después del advenimiento de las API de gancho, dejé de usar las siguientes tecnologías: <br><br><ul><li>  Componentes basados ​​en clases. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Render-prop</a> pattern. </li></ul><br><h2>  <font color="#3AC1EF">¿Qué no reemplaza los ganchos?</font> </h2><br>  Todavía uso a menudo las siguientes tecnologías: <br><br><ul><li>  Redux: por todas las razones anteriores. </li><li>  Componentes de orden superior: con el fin de realizar la composición de componentes en los casos en que tengo que implementar una funcionalidad de extremo a extremo compartida por todos o algunos de los componentes visuales de la aplicación.  Dicha funcionalidad incluye proveedores de Redux, sistemas de diseño de página, sistemas de soporte de configuración de aplicaciones, herramientas de autenticación y autorización, herramientas de internacionalización de aplicaciones, etc. </li><li>  Separación entre componentes del contenedor y componentes que tienen una representación visual.  Esto le permite mejorar la modularidad y la capacidad de prueba de las aplicaciones, es mejor separar los efectos y la lógica pura. </li></ul><br><h2>  <font color="#3AC1EF">¿Cuándo usar ganchos?</font> </h2><br>  No es necesario esforzarse por usar Redux en cada aplicación y en cada componente.  Si su proyecto consta de un componente visual, si no guarda datos y no carga datos desde allí, si no se realizan operaciones de E / S asíncronas, entonces no puedo pensar en una razón valiosa para complicar este proyecto al usar Redux en él. <br><br>  Lo mismo puede decirse de los componentes que tienen las siguientes características: <br><br><ul><li>  No usan recursos de red. </li><li>  No almacenan datos en estado y no los cargan desde allí. </li><li>  No comparten el estado con otros componentes que no son sus descendientes. </li><li>  No tienen un cierto estado propio, utilizado para el almacenamiento de datos a corto plazo. </li></ul><br>  Puede tener una buena razón para usar el modelo de estado del componente React estándar en ciertas situaciones.  En situaciones como esta, los ganchos React te harán un buen trabajo.  Por ejemplo, el formulario que se describe a continuación utiliza el estado local del componente utilizando el <code>useState</code> React <code>useState</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TextField, { Input } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material/react-text-field'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> noop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Holder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{  itemPrice = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">175</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  name = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  email = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  id = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  removeHolder = noop,  showRemoveButton = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">, }</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name);  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> setter = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set</span></span></span><span class="hljs-function"> =&gt;</span></span> e =&gt; {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { target } = e;    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { value } = target;    set(value);  }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (    &lt;div className="row"&gt;      &lt;div className="holder"&gt;        &lt;div className="holder-name"&gt;          &lt;TextField label="Name"&gt;            &lt;Input value={nameInput} onChange={setter(setName)} required /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        &lt;div className="holder-email"&gt;          &lt;TextField label="Email"&gt;            &lt;Input              value={emailInput}              onChange={setter(setEmail)}              type="email"              required            /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        {showRemoveButton &amp;&amp; (          &lt;button            className="remove-holder"            aria-label="Remove membership"            onClick={e =&gt; {              e.preventDefault();              removeHolder(id);            }}          &gt;            ×          &lt;/button&gt;        )}      &lt;/div&gt;      &lt;div className="line-item-price"&gt;${itemPrice}&lt;/div&gt;      &lt;style jsx&gt;{cssHere}&lt;/style&gt;    &lt;/div&gt;  ); }; Holder.propTypes = {  name: t.string,  email: t.string,  itemPrice: t.number,  id: t.string,  removeHolder: t.func,  showRemoveButton: t.bool, }; export default Holder;</code> </pre> <br>  Aquí <code>useState</code> usa para controlar el estado brevemente usado de los campos de entrada de <code>name</code> y <code>email</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email);</code> </pre> <br>  Puede notar que todavía hay un creador de la acción <code>removeHolder</code> que entra en las propiedades de Redux.  Como ya se mencionó, la combinación y combinación de tecnologías es completamente normal. <br><br>  Usar el estado local de un componente para resolver tales problemas siempre se ha visto bien, pero antes de React Hooks, en cualquier caso, hubiera querido guardar los datos del componente en el almacenamiento de Redux y obtener el estado de las propiedades. <br><br>  Anteriormente, trabajar con el estado de un componente implicaba el uso de componentes basados ​​en clases, escribir los datos iniciales en el estado utilizando los mecanismos para declarar las propiedades de la clase (o en el constructor de la clase), y así sucesivamente.  Como resultado, resultó que para evitar usar Redux, el componente tenía que ser demasiado complicado.  Redux también habló a favor de la existencia de herramientas convenientes para administrar el estado de los formularios con Redux.  Como resultado, antes, no me habría preocupado que el estado temporal del formulario se almacene en el mismo lugar que los datos con una vida útil más larga. <br><br>  Como ya he usado Redux en todas mis aplicaciones más o menos complejas, la elección de la tecnología para almacenar el estado de los componentes de los componentes no me hizo pensar mucho.  Acabo de usar Redux en casi todos los casos. <br><br>  En las condiciones modernas, hacer una elección también es fácil: trabajar con el estado del componente se organiza utilizando mecanismos estándar React y administrar el estado de la aplicación usando Redux. <br><br><h2>  <font color="#3AC1EF">¿Cuándo usar Redux?</font> </h2><br>  Otra pregunta común con respecto a la administración del estado es: “¿Necesito poner absolutamente todo en el repositorio de Redux?  Si no lo hago, ¿violará la capacidad de depurar aplicaciones usando mecanismos TTD? " <br><br>  No es necesario alojar absolutamente todo en el repositorio de Redux.  El hecho es que las aplicaciones usan una gran cantidad de datos temporales que están demasiado dispersos a su alrededor para proporcionar información que, al registrarse en el registro o usarse durante la depuración, puede proporcionar al desarrollador una ayuda notable para encontrar problemas.  Probablemente usted, a menos que esté escribiendo una aplicación de editor en tiempo real, no necesita escribir en el estado cada movimiento del mouse o cada pulsación de tecla.  Cuando coloca algo en un estado Redux, agrega un nivel adicional de abstracción a la aplicación, así como un nivel adicional de complejidad que lo acompaña. <br><br>  En otras palabras, puede usar Redux de manera segura, pero debe haber alguna razón para esto.  El uso de las funciones de Redux en los componentes puede estar justificado si los componentes difieren en las siguientes funciones: <br><br><ul><li>  Usan E / S.  Por ejemplo, trabajan con una red o con ciertos dispositivos. </li><li>  Guardan datos o cargan datos de ellos. </li><li>  Trabajan con su estado junto con componentes que no son sus descendientes. </li><li>  Se ocupan de cualquier lógica de negocios con la que se ocupan otras partes de la aplicación: procesan datos que se utilizan en otras partes de la aplicación. </li></ul><br>  Aquí hay otro ejemplo tomado de la aplicación <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">TDDDay</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useDispatch, useSelector } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { compose } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ramda'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> page <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../hocs/page.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Purchase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { addHolder, removeHolder, getHolders } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-reducer.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PurchasePage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      // mapStateToProps  mapDispatchToProps  const dispatch = useDispatch();  const holders = useSelector(getHolders); const props = {    //           //    dispatch.    addHolder: compose(      dispatch,      addHolder    ),    removeHolder: compose(      dispatch,      removeHolder    ),    holders,  }; return &lt;Purchase {...props} /&gt;; }; // `page` -    ,    //        . export default page(PurchasePage);</span></span></code> </pre> <br>  Este documento no trata el DOM.  Este es un componente de presentación.  Está conectado a Redux usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la API react-redux con soporte de gancho</a> . <br><br>  Aquí se usa Redux porque necesitamos que los datos que maneja este formulario se usen en otras partes de la interfaz de usuario.  Y después de completar la operación de compra, necesitamos guardar la información relevante en la base de datos. <br><br>  Los fragmentos de estado con los que funciona este código son utilizados por varios componentes; no son procesados ​​por un solo componente.  Esto no es información, existe solo un corto período de tiempo.  Estos datos pueden considerarse permanentes, pueden usarse en diferentes pantallas de la aplicación y en varias sesiones.  Todos estos son escenarios en los que no se pueden aplicar los estados del componente para almacenar datos.  Es cierto que esto todavía es posible, pero solo si el creador de la aplicación escribe, basándose en la API React, su propia biblioteca para administrar el estado.  Esto es mucho más difícil de hacer que simplemente usar Redux. <br><br>  La API React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Suspense</a> , en el futuro, puede ser útil al almacenar datos en un estado y cargarlos desde allí.  Necesitamos esperar su lanzamiento y ver si puede reemplazar las plantillas para guardar y cargar datos de Redux.  Redux nos permite separar claramente los efectos secundarios del resto de la lógica del componente, mientras que no necesitamos trabajar con servicios de E / S de una manera especial.  (La razón por la que prefiero la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">redux-saga</a> al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">middleware redux-thunk</a> es el aislamiento del efecto).  Para competir con Redux en este escenario, la API React necesitará proporcionar aislamiento del efecto. <br><br><h2>  <font color="#3AC1EF">Redux es arquitectura</font> </h2><br>  Redux es mucho más (y a menudo mucho menos) que una biblioteca de administración de estado.  También es un subconjunto de la arquitectura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Flux</a> , que define mucho más estrictamente cómo se implementan los cambios de estado.  Lea más sobre la arquitectura Redux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> . <br><br>  A menudo uso reductores creados en el estilo Redux en aquellos casos en que necesito mantener el estado complejo del componente, pero no necesito usar la biblioteca Redux.  También utilizo acciones creadas en el espíritu de Redux (e incluso herramientas de Redux como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Autodux</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">redux-saga</a> ) para enviar acciones a las aplicaciones Node.js.  Sin embargo, ni siquiera importo Redux en tales aplicaciones. <br><br>  El proyecto Redux siempre ha sido más una arquitectura y un conjunto de acuerdos voluntarios que una biblioteca.  De hecho, la implementación básica de Redux se puede establecer literalmente en un par de docenas de líneas de código. <br><br>  Esto resultará ser una buena noticia para aquellos que desean usar el estado local de componentes con ganchos con más frecuencia y no vincular todo a Redux. <br><br>  React admite el gancho <code>useReducer</code> , que puede funcionar con reductores de estilo Redux.  Esto es bueno para implementar una lógica no trivial de trabajar con estado, para trabajar con fragmentos de estado dependientes, etc.  Si encuentra un problema para el cual el estado temporal de un componente individual es adecuado, puede usar la arquitectura Redux para trabajar con este estado, pero en lugar de la biblioteca Redux, puede usar el <code>useReducer</code> para administrar el estado. <br><br>  Si más tarde necesita establecer un almacenamiento permanente de datos que anteriormente solo almacenaba temporalmente, entonces estará 90% listo para tal cambio.  Todo lo que tiene que hacer es conectar el componente al repositorio de Redux y agregar allí el reductor correspondiente. <br><br><h2>  <font color="#3AC1EF">Preguntas y respuestas</font> </h2><br><h3>  <font color="#3AC1EF">¿Se rompe el determinismo si Redux no gestiona todos los datos de la aplicación?</font> </h3><br>  No, no está roto.  De hecho, el uso de Redux no hace que un proyecto sea determinista.  Pero los acuerdos son.  Si desea que su estado de Redux sea determinista, use <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">funciones puras</a> .  Lo mismo se aplica a situaciones en las que es necesario que se determine el estado temporal de los componentes locales. <br><br><h3>  <font color="#3AC1EF">▍ ¿Debería la biblioteca Redux desempeñar el papel de una sola fuente de datos confiables?</font> </h3><br>  El principio de una sola fuente de datos confiables no indica que sea necesario que todos los datos incluidos en el estado de la aplicación se almacenen en un solo lugar.  El significado de este principio es que cada fragmento del estado debe tener solo una fuente de datos confiables.  Como resultado, podemos tener muchos fragmentos de estado, cada uno de los cuales tiene su propia fuente de datos confiables. <br><br>  Esto significa que el programador puede decidir qué se transfiere a Redux y qué se transfiere al estado de los componentes.  Los datos que determinan el estado también se pueden tomar de otras fuentes.  Por ejemplo, desde una API de navegador que le permite trabajar con información sobre la dirección de la página que está viendo. <br><br>  Redux es una gran herramienta para soportar una sola fuente de datos confiables para el estado de una aplicación.  Pero si el estado del componente se encuentra y se usa exclusivamente dentro de este componente, entonces, por definición, este estado ya tiene una única fuente de datos confiables: el estado del componente Reaccionar. <br><br>  Si coloca algunos datos en el estado Redux, siempre debe leer estos datos del estado Redux.  Para todo lo que está en el repositorio de Redux, este repositorio debería ser la única fuente de datos confiables. <br><br>  Poner todo en un estado Redux, si es necesario, es perfectamente normal.  Quizás esto afectará el rendimiento si usa fragmentos de estado que necesitan actualizarse con frecuencia, o si está hablando de almacenar el estado de un componente en el que los fragmentos de estado dependiente se usan mucho.  No debe preocuparse por el rendimiento hasta que haya problemas con el rendimiento.  Pero si le preocupa el problema del rendimiento, pruebe ambas formas de trabajar con el estado y evalúe su impacto en el rendimiento.  Perfile su proyecto y recuerde el modelo de rendimiento RAIL. <br><br><h3>  <font color="#3AC1EF">▍ ¿Necesito usar la función de conexión de react-redux, o es mejor usar ganchos?</font> </h3><br>  Depende mucho.  La función de <code>connect</code> crea un componente de orden superior adecuado para uso repetido, y los ganchos están optimizados para la integración con un solo componente. <br><br>  ¿Necesito conectar las mismas propiedades a diferentes componentes?  Si es así, usa <code>connect</code> .  De lo contrario, preferiría elegir ganchos.  Por ejemplo, imagine que tiene un componente responsable de autorizar permisos para las acciones del usuario: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RequiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./requires-permission-component'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { userHasPermission } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../features/user-profile/user-profile-reducer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> curry <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/curry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> requiresPermission = curry(  <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NotPermittedComponent, { permission }, PermittedComponent</span></span></span><span class="hljs-function">) =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({      NotPermittedComponent,      PermittedComponent,      <span class="hljs-attr"><span class="hljs-attr">isPermitted</span></span>: userHasPermission(state, permission),    });    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> connect(mapStateToProps)(RequiresPermission);  }, ); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> requiresPermission;</code> </pre> <br>  Ahora, si un administrador está trabajando intensamente con la aplicación, cuyas acciones necesitan un permiso especial, puede crear un componente de orden superior que combine todos estos permisos con todas las funcionalidades necesarias de extremo a extremo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NextError <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'next/error'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../requires-permission'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withFeatures <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-features'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withAuth <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-auth'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withEnv <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-env'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-loader'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-layout'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> compose(  withEnv,  withAuth,  withLoader,  withLayout(),  withFeatures,  requiresPermission(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;NextError statusCode={<span class="hljs-number"><span class="hljs-number">404</span></span>} /&gt;, {    <span class="hljs-attr"><span class="hljs-attr">permission</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>,  }), );</code> </pre> <br>  Aquí se explica cómo usarlo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> adminPage <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../HOCs/admin-page'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AdminIndex <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../features/admin-index/admin-index-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> adminPage(AdminIndex);</code> </pre> <br>  La API de componente de orden superior es conveniente para esta tarea.  Le permite resolverlo de manera más sucinta, usando menos código que usando ganchos.  Pero para usar la función de <code>connect</code> , debe recordar que toma <code>mapStateToProps</code> como primer argumento y <code>mapStateToProps</code> como segundo.  No debemos olvidar que esta función puede tomar funciones o literales de objeto.  Necesita saber cómo difieren los diferentes usos de <code>connect</code> , y que esta es una función con curry, pero su curry no se realiza automáticamente. <br><br>  En otras palabras, puedo decir que creo que durante el desarrollo de la <code>connect</code> , se realizó mucho trabajo en la dirección de la concisión del código, pero el código resultante no es particularmente legible ni particularmente conveniente.  Si no necesito trabajar con varios componentes, con gusto preferiré la API de <code>connect</code> inconveniente a una API de enlace mucho más conveniente, incluso teniendo en cuenta que esto conducirá a un aumento en la cantidad de código. <br><br><h3>  <font color="#3AC1EF">▍ Si un singleton se considera un antipatrón y Redux es un singleton, ¿significa esto que Redux es un antipatrón?</font> </h3><br>  No, no lo hace.  El uso de un singleton en el código insinúa la dudosa calidad de este código, lo que indica la presencia de un estado mutable compartido en él.  Este es un verdadero antipatrón.  Redux, por otro lado, evita la mutación del estado compartido a través de la encapsulación (no debe cambiar el estado de la aplicación directamente, fuera de los reductores; Redux resuelve el problema de cambiar el estado) y enviando mensajes (solo el objeto de evento enviado puede causar un cambio de estado). <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  ¿Redux reemplaza los ganchos React?  Los ganchos son geniales, pero no reemplazan a Redux. <br><br>  Esperamos que este material lo ayude a elegir un modelo de gestión estatal para sus proyectos React. <br><br>  <b>Estimados lectores!</b>  ¿Has encontrado situaciones en las que los ganchos React pueden reemplazar a Redux? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/464293/">https://habr.com/ru/post/464293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../464283/index.html">Aplicaciones para libros electrónicos en el sistema operativo Android. Parte 3. Diccionarios y notas</a></li>
<li><a href="../464285/index.html">Actualizar automáticamente la foto de perfil de Vkontakte</a></li>
<li><a href="../464287/index.html">El paso de la máquina de laboratorio para el pentest "Hackthebox - Friendzone"</a></li>
<li><a href="../464289/index.html">Cómo escribir paquetes Go</a></li>
<li><a href="../464291/index.html">Los 10 lenguajes de programación más influyentes de los últimos 50 años y sus creadores.</a></li>
<li><a href="../464295/index.html">Ejemplos de uso de algunas funciones nuevas de JavaScript</a></li>
<li><a href="../464299/index.html">0, 0, 1, 0, 2, 0, 2, 2, 1, 6, 0, 5, 0, 2, 6, 5, 4, 0, 5, 3, 0, 3, 2, 9, 0, 4, 9, 3, 6, 14, 0, 6, 3, 5, 15, 0, 5, 3, 5 ...</a></li>
<li><a href="../464303/index.html">Datos de series de tiempo en un DBMS relacional. Extensiones TimescaleDB y PipelineDB para PostgreSQL</a></li>
<li><a href="../464305/index.html">Pequeño, si. Unboxing del petardo microvirtual</a></li>
<li><a href="../464307/index.html">Pruebas de integración de microservicios en Scala</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>