<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👷🏻 🎻 🤢 DPI（SSL检查）与加密的含义相矛盾，但是公司实施了加密 👂🏻 💆🏾 💉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="信任链。 CC BY-SA 4.0 Yanpas 

 SSL流量检查（SSL / TLS解密，SSL或DPI分析）已成为企业界越来越热门的话题。 解密流量的想法似乎与密码学的概念相矛盾。 但是，事实是事实：越来越多的公司使用DPI技术，通过检查内容是否存在恶意软件，数据泄漏等来解释这一点。 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DPI（SSL检查）与加密的含义相矛盾，但是公司实施了加密</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/globalsign/blog/467259/"><img src="https://habrastorage.org/webt/jd/o2/mm/jdo2mmdlfiaflrqeextk2sr90ke.png"><br>  <i><font color="gray">信任链。</font></i>  <i><font color="gray">CC BY-SA 4.0 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Yanpas</a></font></i> <br><br>  SSL流量检查（SSL / TLS解密，SSL或DPI分析）已成为企业界越来越热门的话题。 解密流量的想法似乎与密码学的概念相矛盾。 但是，事实是事实：越来越多的公司使用DPI技术，通过检查内容是否存在恶意软件，数据泄漏等来解释这一点。 <br><br> 好吧，如果您接受了引入这样一项技术的事实，那么您至少应该考虑使它成为最安全，管理最完善的方法。 例如，至少不依赖于DPI系统提供商提供给您的那些证书。 <br><br> 实现的一个方面并不是每个人都知道。 实际上，当许多人听到他的消息时，真的感到很惊讶。 这是一个私人证书颁发机构（CA）。 它生成用于解密和重新加密流量的证书。 <br><a name="habracut"></a><br> 无需依赖自签名证书或DPI设备的证书，您可以使用第三方证书颁发机构（例如GlobalSign）提供的专用CA。 但是首先，让我们对问题本身进行简短回顾。 <br><br><h2> 什么是SSL检查，为什么要使用它？ </h2><br> 越来越多的公共网站正在切换到HTTPS。 例如，根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://transparencyreport.google.com/">Chrome统计数据</a> ，在2019年9月上旬，俄罗斯加密流量的份额达到了83％。 <br><br> <a href=""><img src="https://habrastorage.org/webt/to/2a/i0/to2ai0j5kawt2uhmd6siugk9zge.png"></a> <br><br> 不幸的是，网络犯罪分子越来越多地使用流量加密，特别是因为“让我们加密”自动分发了数千个免费SSL证书。 因此，HTTPS随处可见-浏览器地址栏中的锁定已不再充当安全性的可靠指示。 <br><br> 在这些职位上，DPI解决方案的制造商会推广他们的产品。 它们部署在最终用户（即您的员工浏览网络）和Internet之间，从而过滤掉恶意流量。 当今市场上有许多这样的产品，但是过程实质上是相同的。  HTTPS流量通过扫描设备，在该设备中解密并扫描恶意软件。 <br><br> 验证完成后，设备将与最终客户端创建一个新的SSL会话，以解密和重新加密内容。 <br><br><h2> 解密/重新加密过程如何工作 </h2><br> 为了使SSL检查设备在将数据包发送给最终用户之前对其进行解密和重新加密，它必须能够即时发布SSL证书。 这意味着必须在上面安装CA证书。 <br><br> 对于公司（或中间的另一个人）来说，在浏览器中信任这些SSL证书很重要（即不要像下面的警告消息那样引起可怕的警告消息）。 因此，CA链（或层次结构）必须位于浏览器信任库中。 因为这些证书不是从公共信任的证书颁发机构颁发的，所以您必须手动将CA层次结构转移到所有最终客户端。 <br><br><img src="https://habrastorage.org/webt/36/eu/yi/36euyibponftu9pxzzekct_k3ze.png"><br>  <i><font color="gray">Chrome中有关自签名证书的警告消息。</font></i>  <i><font color="gray">资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BadSSL.com</a></font></i> <br><br> 在装有Windows的计算机上，可以使用Active Directory和组策略，但是对于移动设备，该过程更为复杂。 <br><br> 如果您需要在公司环境中支持其他根证书（例如来自Microsoft或基于OpenSSL的证书），情况将变得更加复杂。 另外，保护和管理私钥，以使其中一个密钥不会意外过期。 <br><br><h2> 最佳选择：来自第三方CA的专用专用根证书 </h2><br> 如果无法管理多个根或自签名证书，则还有另一种选择：您可以依赖第三方CA。 在这种情况下，证书是从<b>专用</b>证书颁发机构颁发的，该证书颁发机构与专门为公司创建的专用，专用根证书颁发机构建立了信任链。 <br><br> <a href=""><img src="https://habrastorage.org/webt/hh/ss/vn/hhssvnz46qs34htk1iotowv_viy.png"></a> <br>  <i><font color="gray">专用客户端根证书的简化体系结构</font></i> <br><br> 此设置消除了前面提到的一些问题：至少它减少了需要管理的根数。 在这里，对于任何数量的中间证书颁发机构，您只能使用一个私有根中心来满足所有内部PKI需求。 例如，上图显示了一个多层层次结构，其中一个中间证书颁发机构用于验证/解密SSL，另一个则用于内部计算机（笔记本电脑，服务器，台式计算机等）。 <br><br> 在此方案中，您无需将CA放置在所有客户端上，因为顶级CA由GlobalSign托管，从而解决了保护私钥和有效期的问题。 <br><br> 这种方法的另一个优点是可以出于任何原因撤消SSL证书颁发机构。 取而代之的是，它仅创建一个绑定到原始私有根目录的新目录，您可以立即使用它。 <br><br> 尽管存在所有矛盾，但企业越来越多地将SSL流量检查作为PKI内部或私有基础结构的一部分来实施。 使用私有PKI的其他选项包括：颁发用于验证设备或用户的证书，用于内部服务器的SSL，以及根据CA /浏览器论坛的要求在公共可信证书中不允许的各种配置。 <br><br><h2> 浏览器抗拒 </h2><br> 应当指出，浏览器开发人员正在努力应对这一趋势，并保护最终用户免受MiTM的侵害。 例如，几天前，Mozilla <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://blog.mozilla.org/futurereleases/2019/09/06/whats-next-in-making-dns-over-">决定</a>在Firefox的以下浏览器版本之一中包含默认的DoH协议（DNS-over-HTTPS）。  DoH协议对DPI系统隐藏了DNS查询，从而使SSL检查变得困难。 <br><br>  Google于2019年9月10日<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">宣布</a>了针对Chrome浏览器的类似计划。 <br><br><hr><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/9q/wb/zs/9qwbzsfapeaakd_obyftagefhny.jpeg"></a> <br> 适用<b>于企业的PKI解决方案的</b> <b>特殊条件</b>在2019年11月30日之前有效，促销代码为AL002HRFR，适用于新客户。 有关详细信息，请与经理联系，电话+7（499）678 2210，sales-ru@globalsign.com。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN467259/">https://habr.com/ru/post/zh-CN467259/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN467249/index.html">有关V8，React和性能下降的故事。 第二部分</a></li>
<li><a href="../zh-CN467251/index.html">人质COBOL和数学。 第一部分</a></li>
<li><a href="../zh-CN467253/index.html">人质COBOL和数学。 第二部分</a></li>
<li><a href="../zh-CN467255/index.html">每个React开发人员都应该知道的三个常见的安全错误</a></li>
<li><a href="../zh-CN467257/index.html">不要一次将所有鸡蛋存放在一个篮子里</a></li>
<li><a href="../zh-CN467261/index.html">Qt中正确的线程</a></li>
<li><a href="../zh-CN467263/index.html">我们从太阳能或被动收入中获得每年25％的实际经验。 第二部分</a></li>
<li><a href="../zh-CN467269/index.html">信息安全中的模型</a></li>
<li><a href="../zh-CN467271/index.html">职业程序员，专业化学家</a></li>
<li><a href="../zh-CN467275/index.html">到了程序员之日。 2019年程序员</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>