<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∏ üßë üíí Ist es m√∂glich, Tibero anstelle von Oracle zu verwenden? Und ist es notwendig üò∑ üßùüèæ üë≤üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel werde ich Ihnen erz√§hlen, wie ich ernsthaft √ºber eine Alternative zu Oracle nachgedacht habe. Aber was ist mit Postgre, sagst du? Ja...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ist es m√∂glich, Tibero anstelle von Oracle zu verwenden? Und ist es notwendig</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413147/">  In diesem Artikel werde ich Ihnen erz√§hlen, wie ich ernsthaft √ºber eine Alternative zu Oracle nachgedacht habe.  Aber was ist mit Postgre, sagst du?  Ja, aber es gibt Nuancen.  Zuerst besch√§ftigen wir uns mit der Frage "Warum Oracle?" <br>  Gesch√§ftslogik in unserer Datenbank.  In dem Oracle-Buch f√ºr Profis schreibt Tom Kite <br><blockquote>  Bei der Entwicklung von Datenbankanwendungen verwende ich ein sehr einfaches Mantra: <br><br>  Wenn m√∂glich, machen Sie es mit einer einzelnen SQL-Anweisung. <br>  Wenn dies nicht mit einer einzelnen SQL-Anweisung m√∂glich ist, f√ºhren Sie dies in PL / SQL aus. <br>  Wenn dies in PL / SQL nicht m√∂glich ist, versuchen Sie es mit einer gespeicherten Java-Prozedur. <br>  Wenn dies in Java nicht m√∂glich ist, tun Sie dies als externe Prozedur in C; <br>  Wenn dies nicht als externes Verfahren in C implementiert werden kann, m√ºssen Sie ernsthaft dar√ºber nachdenken, warum dies √ºberhaupt geschieht ... </blockquote>  und beim Systemdesign folge ich dieser Regel.  Objekttypen in Oracle sind besonders erfreulich: Mit ihrer Hilfe wird komplexe Gesch√§ftslogik gem√§√ü allen Kanonen von OOP wundersch√∂n und bequem implementiert. <br><br>  Oracle ist teuer.  Es zu kaufen und nicht alles zu verwenden, was darin enthalten ist, wird ein Fehler sein. <br>  Dabei gibt es immer einen Faktor f√ºr Team und Kompetenzen.  Wenn Ihr Team seit zehn Jahren alles bei Oracle entwickelt, kann die Ver√∂ffentlichung von Postgre schmerzhaft sein. <br><br>  Oracle ist teuer.  Es ist ein Fehler, so teuer, dass Sie mehrmals dar√ºber schreiben k√∂nnen und nicht an die Notwendigkeit von Oracle in einem neuen Projekt denken. <br><br>  Ich bin bereits mehrmals auf Ver√∂ffentlichungen √ºber das koreanische Tibero-Produkt gesto√üen, das angeblich als Ersatz f√ºr Oracle entwickelt wurde.  Und jetzt haben sie eine Anziehungskraft von beispielloser Gro√üz√ºgigkeit - Standardlizenzen werden f√ºr Entwickler fast kostenlos verteilt, f√ºr einen Dollar f√ºr einen Socket.  Wir verstehen also: Was die Koreaner im Moment anbieten k√∂nnen.  Mit Autos haben sie es doch schon (fast) geschafft! <br><a name="habracut"></a><br><h3>  Versuchsbeschreibung </h3><br>  Vertreter von TMaxSoft sagen, dass Tibero fast zu 100% mit Oracle kompatibel ist und es ein Dienstprogramm f√ºr die Datenbankmigration gibt.  Ich beschloss, meine Produktbasis mit Gesch√§ftslogik in Oracle zu nutzen und den Charme von OOP in PL \ SQL zu nutzen und auf Tibero zu √ºbertragen.  In dieser Ver√∂ffentlichung wird die Migration der Daten selbst nicht ber√ºcksichtigt, sie ist weniger interessant und ich habe noch keine vollst√§ndige Migration versucht. <br><br>  Die Aufgabe ist folgende: <br><br>  1. Tabellen √ºbertragen. <br>  2. √úbertragung von Indizes, Schl√ºsseln usw. <br>  3. √úbertragen Sie Pakete und Trigger. <br>  4. √úbertragung von Objekttypen. <br><br>  Aber zuerst besch√§ftigen wir uns mit den Werkzeugen. <br><br><h3>  Die Werkzeuge </h3><br>  Google wei√ü wenig √ºber Tibero.  Wir haben die Datenbank selbst in Form einer virtuellen Maschine heruntergeladen, auf der bereits alles bereitgestellt wurde.  Es gibt nur zwei Tools: ein Dienstprogramm zum Migrieren von T-UP und eine IDE f√ºr DBA und den tbAdmin-Entwickler.  Alles wird in Java gemacht, l√§uft theoretisch √ºberall. <br><br>  T-UP sieht ungef√§hr so ‚Äã‚Äãaus: <br><br><img src="https://habrastorage.org/webt/oi/gn/_a/oign_ablqrxbbwtiutwczw6adi0.jpeg"><br>  <i>Hauptfenster: Datenbankverbindungen.</i> <br><br><img src="https://habrastorage.org/webt/yz/3f/cx/yz3fcxrlhslegdkikvd_9iv5qx4.jpeg"><br>  <i>Wenn Sie auf Optionen klicken, k√∂nnen Sie etwas konfigurieren.</i> <br><br><img src="https://habrastorage.org/webt/vt/rb/9a/vtrb9a6od2ep0tjh_mhczcd9zv8.jpeg"><br>  <i>Am wichtigsten ist, dass Sie die zu migrierenden Objekttypen ausw√§hlen k√∂nnen.</i> <br><br>  Es konnten keine Anweisungen, Hilfe oder Tipps gefunden werden. <br>  Es macht den Eindruck eines hausgemachten Dienstprogramms.  Manchmal flog sie mit Hinrichtungen aus, aber im Grunde arbeitete sie nach Bedarf. <br><br>  Das zweite Tool ist die Tibero Admin IDE.  Es kann von der TMaxSoft-Website heruntergeladen werden, wenn Sie sich dort zuerst registrieren.  Dort k√∂nnen Sie auch eine Demo-Lizenz erwerben. <br><br><img src="https://habrastorage.org/webt/7n/fh/py/7nfhpypymbdibdgxbntldsa0jrm.jpeg"><br>  <i>Tibero Admin sieht aus wie eine typische alte IDE</i> <br><br>  Ich bin an das hervorragende PL / SQL-Entwicklertool von Allround Automations gew√∂hnt.  Vergessen Sie in Tibero Admin die kontextbezogenen Eingabeaufforderungen. Nach dem Klicken auf den ‚ÄûPunkt‚Äú wird nichts auf Ihrem Bildschirm angezeigt. Die Namen von Tabellen und Objekten werden nicht an Sie angeh√§ngt.  Geben Sie einfach den Code ein, Sie Programmierer.  Hilfe, Dokumentation?  Nein.  Es gibt eine Dokumentation zum DBMS auf der Website des Herstellers, eine so interessante ... ohne Suche.  F√ºr die IDE wurde keine Dokumentation gefunden.  Es gibt jedoch nichts Kompliziertes.  Es gab Probleme mit der Autorisierung - es stellte sich heraus, dass dem Benutzer DBA-Rechte erteilt werden m√ºssen, um einfach in tbAdmin zu gelangen.  Und interessant bei den Ports <b>ist 8630 f√ºr SYS, f√ºr alle anderen 8629</b> . <br><br>  IDE-Fehler.  Von Zeit zu Zeit, wenn Sie irgendwo stochern, fliegt der Nachrichtenindex <i>au√üerhalb der Grenzen heraus</i> , eine Nachricht wie <b>java.lang.Exception: Engagement erfolgreich ist</b> sehr be√§ngstigend.  Es ist notwendig, verschiedene Arten von SQL- und PSM-Fenstern zu ber√ºcksichtigen: Im ersten Fall ist es unwahrscheinlich, dass Sie Programmcode kompilieren, im zweiten Fall f√ºhren Sie die Anforderung nicht aus.  Nach PL / SQL Developer - ein miserabler Anschein einer linken Hand ... <br><br>  Zum Experiment kommen. <br><br><h3>  Tabellenmigration </h3><br>  Wir w√§hlen das Schema in T-UP aus, klicken auf Migrieren, w√§hlen zuerst die "Tabellen" in den Optionen aus und der √úbertragungsprozess beginnt.  Ich bin auf zwei Probleme gesto√üen. <br><br>  TISCHPL√ÑTZE.  Ich habe beschlossen, sie in Tabellen zu √ºbertragen, aber Tibero scheint versucht zu haben, so viel Speicherplatz f√ºr sie zu reservieren, wie sie in der Quellendatenbank belegen.  Und das ist viel, und er konnte nicht.  Ich habe die Tabellenbereiche manuell erstellt, und dann ging alles gut. <br><br>  Zus√§tzlich zu Tabellen mit DEFAULT-Datumswerten vom Typ '31 .12.2019 '.  In den Oracle-Einstellungen haben wir dieses Format registriert, f√ºr Tibero hilft es <pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">session</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> nls_date_format=<span class="hljs-string"><span class="hljs-string">'DD.MM.YYYY'</span></span>;</code> </pre>  Aber T-UP kann das nirgendwo tun.  Kollegen von TMaxSoft haben empfohlen, die Variable TB_NLS_DATE_FORMAT = "DD.MM.YYYY" festzulegen, aber es hat mir pers√∂nlich nicht geholfen.  Vielleicht habe ich etwas falsch gemacht.  Ich musste Tabellen mit solchen Parametern manuell erstellen, es gibt nicht viele davon. <br><br>  Ergebnis des ersten Schritts: Das Verschieben der Tabellenstruktur von Oracle nach Tibero funktioniert gut. <br><br><h3>  Schl√ºssel und Indizes. </h3><br>  Wir aktivieren die Kontrollk√§stchen INDEX, CONSTRAINT in T-UP und Forward. Probleme mit CHECK traten aufgrund der gleichen Situation mit dem Datum auf.  Im Allgemeinen wurden Indizes, Prim√§rschl√ºssel und Pr√ºfungen erstellt.  Aber ich konnte keine Fremdschl√ºssel in der frisch erstellten Datenbank finden.  Die Migration von Konstanten endet im T-UP-Protokoll mit der Meldung <b><i>"Migration fehlgeschlagen: java.lang.NullPointerException".</i></b>  Zufall?  Ich glaube nicht‚Ä¶ <br><br><h3>  Pakete und Trigger. </h3><br>  Bei Triggern habe ich nichts kompliziertes, sie wurden perfekt erstellt.  Es stimmt, ich habe nicht √ºberpr√ºft, wie sie funktionieren, dies wird eine separate Geschichte sein. <br><br>  Lassen Sie uns √ºber Prozeduren und Funktionen sprechen, die einen Teil der Logik implementieren.  Hier lief leider nicht alles perfekt. <br><br>  Einfach gesagt: In der <s>Armee von</s> Tibero gibt es kein Wort <b>NEU</b> .  Das Konstrukt o: = NEW t_my_type () wird nicht kompiliert.  In Oracle ist es wahr, nicht obligatorisch, aber ich habe immer aus irgendeinem Grund geschrieben.  Ich musste l√∂schen. <br><br>  Mit der DBA-Rolle kann SQL Window auf alle Tabellen zugreifen.  Wenn Sie jedoch ein Paket oder eine Prozedur in einem Schema mit einer solchen Rolle kompilieren und Tabellen und Objekte eines anderen Schemas verwenden, m√ºssen Sie dem Objekt die entsprechende Berechtigung erteilen.  Die Magie der DBA-Rolle hilft hier nicht weiter. <br><br>  Aus dem spezifischen.  Ich habe ein seltsames FORALL in meiner Datenbank, das jedoch funktioniert. <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--     PROCEDURE save_tar_test AS TYPE number_table IS TABLE OF NUMBER INDEX BY BINARY_INTEGER; TYPE date_table IS TABLE OF DATE INDEX BY BINARY_INTEGER; TYPE varchar50_table IS TABLE OF VARCHAR2(50) INDEX BY BINARY_INTEGER; TYPE char1_table IS TABLE OF CHAR(1) INDEX BY BINARY_INTEGER; TYPE t_tar_det_out_upd_rec_test IS RECORD ( --   cmr_tar_det_id number_table, in_stamp date_table, err_code_id number_table ); tdou_rec t_tar_det_out_upd_rec_test; BEGIN --   ,  tdou_rec  :      Oracle FORALL j IN 1 .. tdou_rec.cmr_tar_det_id.COUNT UPDATE cmr_tar_det dd SET err_code_id = tdou_rec.err_code_id(j) WHERE dd.cmr_tar_det_id = tdou_rec.cmr_tar_det_id(j) AND in_stamp = tdou_rec.in_stamp(j); END;</span></span></code> </pre><br>  Tibero sagt, <i>"dml-Anweisung muss den Bulk-In-Parameter ia forall close haben"</i> .  Und ich verstehe es tief im Inneren, aber dieser Code musste in einem regelm√§√üigen Zyklus wiederholt werden. <br><br>  Die Situation mit Tabellen, die Objekte enthalten, ist schlimmer. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> S1.TYPE_PAY_HIST <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OBJECT</span></span> ( pay_status_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>), stamp <span class="hljs-built_in"><span class="hljs-built_in">DATE</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> S1.TABLE_PAY_HIST <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VARRAY</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> type_pay_hist; <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> S2.RECEIPT ( receipt_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>, pay_sum <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>, receipt_hist S1.TABLE_PAY_HIST ); FUNCTION receipt_status_change(p_cmr_receipt_id NUMBER, p_new_status NUMBER) RETURN NUMBER AS l_receipt_hist s1.table_pay_hist; l_type_pay_hist s1.type_pay_hist; l_status NUMBER; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> receipt_hist <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> l_receipt_hist <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> receipt p <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> p.receipt_id = p_cmr_receipt_id <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span>; EXCEPTION WHEN NO_DATA_FOUND THEN RETURN c_err_not_find_status; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>;</code> </pre><br>  Wir haben einen Kompilierungsfehler, geben Sie mistmatch ein. <br><br>  Die Jungs von TMaxSoft haben diese Version des Codes vorgeschlagen: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> l_receipt_hist table_pay_hist; l_type_pay_hist type_pay_hist; l_status NUMBER; cmr_receipt_row cmr_receipt%rowtype; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> cmr_receipt_row <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> cmr_receipt p <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> p.cmr_receipt_id = p_cmr_receipt_id <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> TYPE_PAY_HIST(r.pay_status_id,r.stamp) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> l_receipt_hist <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> cmr_receipt p,<span class="hljs-keyword"><span class="hljs-keyword">table</span></span>(p.receipt_hist) r <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> p.cmr_receipt_id = p_cmr_receipt_id; EXCEPTION WHEN NO_DATA_FOUND THEN dbms_output.put_line('NO_DATA_FOUND'); RETURN null;<span class="hljs-comment"><span class="hljs-comment">--c_err_not_find_status; END; ... END;</span></span></code> </pre><br>  Arbeit es funktioniert wahrscheinlich.  Aber nicht so bequem, und Sie m√ºssen den Code wiederholen. <br><br>  Der Rest wird normal kompiliert, mit Ausnahme bestimmter Dinge wie SDO_GEOM.  Tibero hat √ºbrigens ein Analogon.  Seine H√§nde hatten sein Arbeitszimmer noch nicht erreicht. <br><br><h3>  Typen </h3><br>  In einem der Projekte nutzen wir die Leistung von OOP by Oracle Hollow. <br>  Die aufregendste Frage f√ºr Tibero war diesbez√ºglich. <br><br>  Wir erstellen einen bestimmten Typ, der f√ºr eine Reihe anderer Typen grundlegend ist. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> t_tar_object <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OBJECT</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>), smth <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRUCTOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> t_tar_object <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> target(param <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> inside(o t_tar_object) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> t_tar_object ) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FINAL</span></span>; <span class="hljs-comment"><span class="hljs-comment">--  CREATE OR REPLACE TYPE BODY t_tar_object AS CONSTRUCTOR FUNCTION t_tar_object RETURN SELF AS RESULT AS BEGIN RETURN; END; MEMBER FUNCTION target(param IN NUMBER DEFAULT NULL) RETURN NUMBER AS BEGIN RETURN id; END; MEMBER FUNCTION clone RETURN t_tar_object AS BEGIN RETURN NULL ; END; END;</span></span></code> </pre><br>  Und jetzt versuchen wir, einen w√ºrdigen Erben f√ºr ihn zu schaffen. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> t_tar_service <span class="hljs-keyword"><span class="hljs-keyword">UNDER</span></span> t_tar_object ( is_virtual <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRUCTOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> t_tar_service (p_serv_obj t_tar_object, p_main_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, p_pack_id <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">OVERRIDING</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> target(param <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">OVERRIDING</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MEMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> t_tar_object ) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FINAL</span></span>;</code> </pre><br>  Der Compiler weigert sich, die Zielfunktion zu √ºberschreiben.  Es gibt jedoch keine Fragen zur Klonfunktion.  Es stellte sich heraus, dass Tibero OVERRIDING nicht mochte, wenn die Methode Parameter hat.  Okay, entfernen Sie das Wort OVERRIDING.  Aber das ist alarmierend und wir schreiben Testskripte.  Bisher mit dem √ºbergeordneten Typ. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> o1 t_tar_object; i1 number := 100; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> o1 := t_tar_object; o1.id := 1; i1 := o1.target; <span class="hljs-comment"><span class="hljs-comment">-- dbms_output.put_line (i1)   . --      ,  ,     i1   -- if i1 &gt; 0 then dbms_output.put_line ('big'); end if; if i1 &lt; 0 then dbms_output.put_line ('small'); end if; if i1 = 0 then dbms_output.put_line ('zero'); end if; if i1 is null then dbms_output.put_line ('null'); end if; end;</span></span></code> </pre> <br>  Es scheint, dass wir dem Programm keine Wahl √ºberlassen haben, egal welchen Wert die Variable i1 annimmt, etwas sollte in der Ausgabe erscheinen.  Aber ... nichts erscheint! <br><br><img src="https://habrastorage.org/webt/tx/bf/he/txbfhe1mekorl0o6ormecblpbj8.jpeg"><br>  <i>Ich erinnerte mich sofort an einen gro√üartigen Film</i> <br><br>  Diese Kuriosit√§t endet nicht dort.  Das Experiment noch schlimmer machen <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> o1 t_tar_object; i1 number := 100; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> o1 := t_tar_object; o1.id := 1; i1 := o1.target; <span class="hljs-comment"><span class="hljs-comment">--  ,      -    i1 := 2; if i1 &gt; 0 then dbms_output.put_line ('big'); end if; if i1 &lt; 0 then dbms_output.put_line ('small'); end if; if i1 = 0 then dbms_output.put_line ('zero'); end if; if i1 is null then dbms_output.put_line ('null'); end if; end;</span></span></code> </pre> <br>  Selbst die Tatsache, dass wir nach all den Manipulationen mit den Methoden des Objekts den Wert der Variablen starr festlegen, √§ndert nichts - die Ausgabe ist leer. <br><br>  Kontrollexperiment, testen Sie sich auf Wahnsinn: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> o1 t_tar_object; i1 number ; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> o1 := t_tar_object; o1.id := 1; <span class="hljs-comment"><span class="hljs-comment">--i1 := o1.target;    i1 := 2; if i1 &gt; 0 then dbms_output.put_line ('big'); end if; if i1 &lt; 0 then dbms_output.put_line ('small'); end if; if i1 = 0 then dbms_output.put_line ('zero'); end if; if i1 is null then dbms_output.put_line ('null'); end if; end;</span></span></code> </pre><br>  Das gesch√§tzte "gro√üe" erscheint in der Ausgabe.  Gruselig, nicht wahr?  Mithilfe eines wissenschaftlichen Stochers haben die Mitarbeiter von TMaxSoft herausgefunden, dass sich das Objekt entsprechend verh√§lt, wenn Sie die Nuance ‚ÄûNOT FINAL‚Äú aus der t_tar_object-Spezifikation entfernen.  Aber warum brauchen wir dann so einen ... ohne Erben? <br><br>  Es macht keinen Sinn, weiter √ºber OOP in Tibero zu sprechen.  Wie in der Tat die OOP in Tibero.  Danach stellt sich eine andere Frage: und der Code der Prozeduren und Funktionen, die kompiliert wurden - funktioniert es richtig?  Ich weiss noch nicht.  Eine gro√üe Menge Code ist eingewandert und kompiliert.  F√ºr ein Projekt, das die oben genannten Arten von √úbungen nicht enth√§lt, ist dies ein definitiver Erfolg.  Das Testen der korrekten Ausf√ºhrung von Code ist jedoch eine ernsthafte Aufgabe.  Und um ehrlich zu sein, hatte ich nicht erwartet, sie zu treffen.  Ich werde nicht bereit sein zu sagen, ob ich ein Projekt auf diesem DBMS haben werde.  Wenn dies jedoch der Fall ist, erfolgt die Entwicklung unter Oracle unter Verwendung normaler praktischer Tools und mit regelm√§√üiger Migration zu Tibero.  Das Schreiben von Code in der IDE ohne kontextbezogene Eingabeaufforderungen und mit periodischen Fehlern der Schnittstelle selbst ist ein unterdurchschnittliches Vergn√ºgen. <br><br><h3>  Schlussfolgerungen </h3><br>  Hat Tibero in seinem gegenw√§rtigen Zustand eine Zukunft?  Nicht sicher.  Wenn Sie sich die Kosten f√ºr Lizenzen ohne Megascale ansehen, kostet ein Standard-Socket ungef√§hr 800.000. Das ist billiger als Oracle, aber manchmal nicht.  Und da ich aus eigener Erfahrung √ºberzeugt war, ist dies bisher noch nicht einmal in der N√§he von Oracle. <br><br>  Ist es sinnvoll, den fast kostenlosen Tibero zu verwenden, der jetzt angeboten wird?  Vielleicht ja.  Sie sagen, dass es bei der Bezahlung der Kosten f√ºr technischen Support (99.000 Rubel pro Jahr f√ºr eine Steckdose) erlaubt ist, diese Basis in kommerziellen Projekten zu verwenden.  Wenn Sie ein Team von Orakelisten zur Verf√ºgung haben und etwas erstellen und auf Ihrem Server platzieren m√∂chten, das nicht zu schwierig, aber billiger und schneller ist - eine interessante Option.  Sie k√∂nnen immer noch die Sanktionskarte spielen und problematischen Kunden mitteilen, dass Korea nicht die Vereinigten Staaten sind. <br><br>  Soll ich vorhandene Projekte von Oracle nach Tibero √ºbersetzen?  Auf keinen Fall.  Es gibt keinen Grund, ein solches Abenteuer zu suchen.  Es ist einfacher, den technischen Support von Oracle aufzugeben und niemandem etwas zu zahlen. <br><br>  Und wenn Sie eine neue Instanz eines alten Projekts erstellen m√ºssen, das unter Oracle ausgef√ºhrt wird?  Und als Ergebnis neue Lizenzen kaufen?  Denken Sie hier dar√ºber nach.  Es ist m√∂glich, dass Ihre Basis migriert und qualitativ funktioniert.  Aber denken Sie sofort daran, zwei Bereiche im Projekt zu unterst√ºtzen, oder √ºbersetzen Sie alles in Tibero.  Wir ber√ºcksichtigen Arbeitskosten, Risiken und Vorteile billigerer Lizenzen.  Vergleichen, entscheiden. <br><br>  Vielleicht wird in der n√§chsten Version von Tibero alles anders sein.  Es ist nur erforderlich, die Typen fertigzustellen, eine normale IDE zu erstellen und m√∂glicherweise die Preispolitik zu √§ndern.  Und wenn das DBMS das gleiche ist wie bei Autos, k√∂nnen Koreaner nach 5 Jahren einen bedeutenden Marktanteil einnehmen und den Hegemon ersetzen.  Wir werden sehen. <br><br><h3>  PS </h3><br>  Ein ernstes Plus bei der Auswahl eines DBMS f√ºr ein neues Projekt kann die Arbeit des technischen Supports von TMaxSoft sein.  Ich habe nicht einmal eine Lizenz f√ºr einen Dollar gekauft und die Jungs haben mir sehr schnell und deutlich interessiert geantwortet.  Sie halfen sowohl bei dummen als auch bei den hier beschriebenen Fragen.  Das Feedback ist hervorragend. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413147/">https://habr.com/ru/post/de413147/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413137/index.html">Klassifizieren Sie gro√üe Datenmengen in Apache Spark mithilfe beliebiger Modelle f√ºr maschinelles Lernen</a></li>
<li><a href="../de413139/index.html">Elektroautos: Die Revolution kommt</a></li>
<li><a href="../de413141/index.html">Klassifizieren Sie gro√üe Datenmengen in Apache Spark mithilfe beliebiger Modelle f√ºr maschinelles Lernen</a></li>
<li><a href="../de413143/index.html">Bobby Urban Lite: Der neue Urban Backpack von XD Design</a></li>
<li><a href="../de413145/index.html">Analyst hilft Unternehmen, Geld zu verdienen</a></li>
<li><a href="../de413149/index.html">Verteiltes Data Warehouse im Data Lake-Konzept: Wo soll ich anfangen?</a></li>
<li><a href="../de413151/index.html">Die NSA schlug einen Verschl√ºsselungsstandard f√ºr IoT-Ger√§te vor, der von ISO jedoch abgelehnt wurde</a></li>
<li><a href="../de413155/index.html">Googles Shell Style Guide (auf Russisch)</a></li>
<li><a href="../de413157/index.html">Informationen zum Speichern von Passw√∂rtern in der Datenbank</a></li>
<li><a href="../de413159/index.html">Dunkle oder helle Benutzeroberfl√§che? Tipps zur Auswahl eines Farbschemas f√ºr Ihre Benutzeroberfl√§che</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>