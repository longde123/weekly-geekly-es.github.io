<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚱️ 🍿 🤐 Dimmer empat saluran yang kuat untuk LED 🌓 🤬 🅾️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini saya akan berbicara tentang proyek dimmer empat saluran yang kuat untuk strip dan lampu LED (hingga 200 watt total daya, 50,100 watt ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dimmer empat saluran yang kuat untuk LED</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402155/">  Pada artikel ini saya akan berbicara tentang proyek dimmer empat saluran yang kuat untuk strip dan lampu LED (hingga 200 watt total daya, 50,100 watt per saluran) dengan frekuensi tinggi regulasi PWM (1 kilohertz dengan kedalaman warna 10 bit), untuk pencahayaan berkualitas tinggi .  Selain itu, ia memiliki input untuk sensor cahaya, fungsi umpan balik (mengeluarkan informasi pengontrol pada tegangan input, tegangan pada input pengukuran, dan sebagainya) dan bahkan isolasi galvanik dari port kontrol serial. <br><br><img src="https://habrastorage.org/files/34a/40c/43c/34a40c43cea94d2c86d0a577633c5993.JPG"><br><a name="habracut"></a><br>  Kebetulan saya memutuskan untuk mengubah profil dan sibuk dengan mikrokontroler dan otomatisasi, dan setelah beberapa bulan saya menerima tawaran yang menggiurkan untuk membuat "rumah pintar" di Republik Dominika, sehingga hampir semua aspek kehidupan sebuah vila yang cukup besar dengan tiga besar dikelola dan otomatis. bangunan, dari pencahayaan dan iklim, hingga robot taman dan sistem irigasi.  Karena saya sudah bosan dengan salju dan salju untuk waktu yang lama, tidak mungkin untuk menolak tawaran seperti itu, terlebih lagi karena mereka banyak membantu saya dalam bergerak dan beradaptasi. <br><br>  Tentu saja, salah satu tugas paling penting adalah mengendalikan pencahayaan, baik di banyak kamar maupun di luar.  Untuk menghemat energi yang mahal di sini, strip LED dan lampu 12 volt akan digunakan hampir di mana-mana, yang harus dikontrol menggunakan dimmer.  Model dimmer yang ada tidak begitu memuaskan dalam semua hal (frekuensi regulasi yang cukup tinggi, karena tidak adanya kerlipan; daya, untuk mengendalikan strip panjang yang terang atau lampu / lampu sorot; protokol pertukaran tertutup, dan sebagainya).  Jadi saya memutuskan untuk membuat dimmer saya. <br><br>  Titik yang sangat sakit pada tahap desain adalah pilihan untuk mendapatkan daya tegangan rendah dari 110 volt arus bolak-balik.  Bahkan opsi eksotis dianggap dengan step-down transformerless segera hingga 12 volt, tetapi karena pertimbangan keselamatan listrik dan api itu ditolak.  Catu daya siap pakai 110-&gt; 12 tidak begitu mahal ($ 20 untuk 120 watt dan $ 40 untuk 200), meskipun cukup keseluruhan.  Tapi, untungnya, ada banyak ruang untuk peralatan, jadi saya memilih opsi ini. <br><br>  Rangkaian ini ternyata relatif sederhana (kecuali untuk node isolasi galvanik dari port serial pada empat optocouplers) - mikrokontroler STM32F030F4P6, dua driver MOSFET ADP3624 dan transistor kunci IRLB8748, dipilih dengan margin besar (dengan beban 100 watt per saluran - mereka nyaris hangat) , ditambah modul step-down berdenyut Cina yang siap pakai di 3,3 volt.  Driver yang dipilih memungkinkan Anda untuk mengontrol frekuensi hingga megahertz, yang memberikan frekuensi tegangan output dalam kilohertz, dengan langkah PWM satu mikrodetik.  Dalam praktiknya, bahkan mode dengan frekuensi PWM delapan kilohertz dan langkah 125 nanodetik telah diuji, tetapi dalam praktiknya, frekuensi penyesuaian yang demikian tinggi mengancam beberapa ketidakstabilan pada keluaran - transistor mungkin tidak punya waktu untuk menutup dengan begitu cepat dan kualitas penyesuaian akan "mengambang". <br><br> <a href=""><img src="https://habrastorage.org/files/066/0b3/8bb/0660b38bbd6f408894a90839f6ce3407.png" width="900"></a> <br><br>  Pengkabelan papan untuk arus tinggi semacam itu merupakan tantangan yang agak sulit bagi saya, saya belum pernah mengalami tugas seperti itu sebelumnya.  Diputuskan untuk membuatnya selebar mungkin (sebuah konduktor dengan lebar setidaknya 10 mm pada lapisan 70 mikron tembaga), dan jika ini tidak memungkinkan, gunakan lapisan kedua, gabungkan dengan sejumlah besar vias.  Saya melepaskan topeng dari konduktor yang bermuatan tinggi sehingga, jika perlu, bus tembaga dapat diterapkan di atas (tapi ini tidak diperlukan, bahkan dengan beban maksimum 200 watt - papan memanas hingga hampir 40 derajat dalam wadah tertutup). <br><br>  Protokol pertukaran, karena kurangnya memori flash, dipilih sangat sederhana, perintah dikirim baris demi baris, dalam bentuk teks "0: 512" (saluran nol, PWM 512), data output ditransmisikan dengan cara yang sama (tegangan, data dari photoresistor pertama, data dari photoresistor kedua, tegangan input pada input ADC3, tegangan input pada input ADC5, tegangan controller, suhu chip).  Akan lebih tepat untuk menggunakan protokol MQTT, tapi saya takut itu tidak akan masuk ke dalam flash (kilobyte ruang kosong tetap keluar dari 16). <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kode sumber di github</a> <br><br>  Dimmer dim-flash melalui port kontrol yang sama (Anda perlu menerapkan unit ke pin ke-4, kemudian ke pulsa ke-5, setelah itu mikrokontroler dapat dimuat menggunakan protokol serial standar STM32. Untuk mengontrol dimmer yang sudah di-flash, tiga kabel sudah cukup, + 3,3 / + 5V pada pin pertama, data pada ketiga, pada keenam - bumi. Pengaturan port kontrol dalam firmware adalah 38400 baud, 8n1. <br><br>  Tentu saja, versi pertama dari dimmer itu bukannya tanpa cacat.  Ternyata satu kapasitor 470 mikrofarad per 12 volt tidak cukup, terlalu panas dengan beban yang berat (terutama jika kabel ke catu daya tipis untuk arus seperti itu), kita perlu menambahkan beberapa yang lebih kuat (sesuai dengan arus maksimum yang diizinkan).  Modul daya Cina juga ternyata menjadi solusi yang gagal, salah satu modul gagal selama tes tanpa alasan yang jelas sama sekali, saya akan menggantinya dengan konverter pada TPS62177, selain itu saya juga akan menambahkan konverter opsional lain pada AP1501 (24-&gt; 12), untuk kasus catu daya dimmer dari 24 volt.  Nah, Anda akan memerlukan rangkaian kontrol untuk kipas 120-mm untuk catu daya (dalam kasus di mana beban mendekati maksimum), dengan kontrol termal dan dapat disesuaikan tanpa batas.  Saya juga memutuskan untuk mengganti isolasi galvanik kompleks dari port kontrol dengan chip SI8641. <br><br>  Ada masalah di bagian perangkat lunak - kadang-kadang membaca dari port serial hang, memblokir kontrol (pengalaman dengan STM32 belum terlalu besar bagi saya), dan protokolnya ternyata terlalu bodoh, mungkin saya akan mencoba memasukkan MQTT yang normal di sana. <br><br>  Berikut ini adalah contoh penggunaan dimmer di bangku tes (pintu depan saya), bersama dengan sensor jarak IR (warna dan kecerahan strip RGBW dapat disesuaikan, tergantung pada jarak, melalui openhab): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/knXuq3a6p4M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Pada artikel berikutnya saya akan berbicara tentang unit switching empat-channel dari beban AC delapan kilowatt dengan relay bistable (untuk mengurangi energi yang dikonsumsi dengan sia-sia) dengan mengukur konsumsi saat ini pada setiap saluran. <br><br>  Baiklah, saya akan selesai dengan nada positif.  Ternyata, di Republik Dominika, 99% isopropil atau etil alkohol tidak dapat ditemukan untuk papan sirkuit cuci (dan juga bensin murni).  Anda dapat menemukan 70% campuran jelas tidak dengan air suling, meninggalkan noda.  Dan Anda masih dapat dengan mudah menemukan 99,6% metil (saya tidak tahu mengapa mereka menjualnya sama sekali, bahkan menakutkan untuk menggunakannya sebagai pelarut - Anda dapat bernapas berpasangan).  Saya memutuskan untuk mencoba membilas papan peredup pertama dengan air suling, yang saya beli di toko peralatan rumah tangga.  Untungnya, saya tidak menyadari ide memeriksa kualitas distilat untuk rasa.  Tapi papan sirkuit dan wastafel galvanis benar-benar tidak suka ketika saya menuangkannya dengan elektrolit baterai (botol air berdiri di rak dengan itu, jelas saya mengambil yang salah ketika saya menaruhnya di keranjang) ... <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id402155/">https://habr.com/ru/post/id402155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id402145/index.html">Melanjutkan tema "Kanker. Apa yang harus dilakukan dengan itu ... "</a></li>
<li><a href="../id402147/index.html">IBM mencatat sedikit informasi dalam satu atom</a></li>
<li><a href="../id402149/index.html">Intel XMM 7560 - Gigabit Over the Air</a></li>
<li><a href="../id402151/index.html">Blockchain notaris digital: Emercoin DPO Antifake</a></li>
<li><a href="../id402153/index.html">"Kami mengurutkan" rumah cetak</a></li>
<li><a href="../id402157/index.html">Chris Kaspersky meninggal. Memori seorang hacker sejati didedikasikan</a></li>
<li><a href="../id402159/index.html">Peringkat Februari perkembangan media paling ilmiah</a></li>
<li><a href="../id402161/index.html">Pembuat perangkat lunak sangat menutup kerentanan yang digunakan oleh CIA</a></li>
<li><a href="../id402163/index.html">Kisah Steve Jobs yang Diperbarui</a></li>
<li><a href="../id402165/index.html">"Kubah" Ilmu Pengetahuan Terbesar dari Istra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>