<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëë üëÉüèº ‚úçüèæ Automatisation pour les plus petits. Remarques. API RESTful üßíüèº üåî üë©üèª‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article est l'une des courtes notes promises lors de la s√©rie d'articles Automation For The Smallest . 
 √âtant donn√© que la principale fa√ßon d'int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatisation pour les plus petits. Remarques. API RESTful</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485618/">  Cet article est l'une des courtes notes promises lors de la s√©rie d'articles <a href="https://habr.com/ru/search/%3Fq%3D%255B%25D0%25B0%25D0%25B2%25D1%2582%25D0%25BE%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F%2520%25D0%25B4%25D0%25BB%25D1%258F%2520%25D1%2581%25D0%25B0%25D0%25BC%25D1%258B%25D1%2585%2520%25D0%25BC%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25BD%25D1%258C%25D0%25BA%25D0%25B8%25D1%2585%255D%26target_type%3Dposts">Automation For The Smallest</a> . <br>  √âtant donn√© que la principale fa√ßon d'interagir avec le syst√®me IPAM est l'API RESTful, j'ai d√©cid√© d'en parler s√©par√©ment. <br><br><hr><br>  Je rends hommage aux architectes du monde moderne - nous avons des interfaces standardis√©es.  Oui, il y en a beaucoup - c'est un moins, mais ils le sont - c'est un plus. <br><br>  Ces interfaces ont gagn√© le nom d'API - Application Programming Interface. <br><br>  L'une de ces interfaces est l'API RESTful, qui est utilis√©e pour fonctionner avec NetBox. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/639/c1e/e86/639c1ee8692aed286b99deeb01796e89.svg" width="800"><br><br>  Si c'est tr√®s simple, l'API fournit au client un ensemble d'outils √† travers lesquels il peut g√©rer le serveur.  Et le client peut √™tre essentiellement n'importe quoi: un navigateur Web, une console de commande, une application d√©velopp√©e par le fabricant ou toute autre application ayant acc√®s √† l'API. <br><br>  Par exemple, dans le cas de NetBox, vous pouvez y ajouter un nouveau p√©riph√©rique de la mani√®re suivante: via un navigateur Web, en envoyant une requ√™te curl'om dans la console, utilisez Postman, acc√©dez √† la biblioth√®que de requ√™tes en python, utilisez le SDK pynetbox ou acc√©dez √† Swagger. <br><br>  Ainsi, apr√®s avoir √©crit une seule interface, le constructeur s'affranchit √† jamais de la n√©cessit√© de convenir avec chaque nouveau client de la mani√®re de la connecter (m√™me si ce n'est qu'un peu rus√©). <br><a name="habracut"></a><br><h1>  Table des mati√®res </h1><br><ul><li>  REST, RESTful, API </li><li>  Structure des messages HTTP <br><ul><li>  Ligne de d√©part </li><li>  Rubriques </li><li>  Le corps du message HTTP </li></ul><br></li><li>  Les m√©thodes <br><ul><li>  HTTP GET </li><li>  POST HTTP </li><li>  HTTP PUT </li><li>  PATCH HTTP </li><li>  SUPPRESSION HTTP </li></ul><br></li><li>  Fa√ßons de travailler avec l'API RESTful <br><ul><li>  Curl </li><li>  Facteur </li><li>  Python + Demandes </li><li>  Kit de d√©veloppement logiciel Pynebtbox </li><li>  Swagger </li></ul><br></li><li>  Critique du REST et des alternatives </li><li>  Liens utiles </li></ul><br><h1>  REST, RESTful, API </h1><br>  Ci-dessous, je vais donner une description tr√®s simplifi√©e de ce qu'est REST. <br><br>  Pour commencer, l' <b>API RESTful</b> est exactement l' <b>interface d'</b> interaction bas√©e <b>sur</b> <b>REST</b> , tandis que <b>REST</b> ( <b>REpresentational State Transfer</b> ) lui-m√™me est un ensemble de restrictions utilis√©es pour cr√©er des services WEB. <br><br>  Il est possible de lire exactement quelles limitations peuvent √™tre trouv√©es dans le <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" rel="nofollow">chapitre 5 de la th√®se de Roy Fielding, Styles architecturaux et conception d'architectures logicielles bas√©es sur le r√©seau</a> .  Permettez-moi de vous donner seulement les trois plus importants (de mon point de vue) d'entre eux: <br><br><ol><li>  L'architecture REST utilise le mod√®le d'interaction client-serveur. </li><li>  Chaque demande REST contient toutes les informations n√©cessaires √† son ex√©cution.  Autrement dit, le serveur ne doit se souvenir de rien sur les demandes pr√©c√©dentes des clients, qui, comme vous le savez, se caract√©rise par le mot Stateless - ne stocke pas les informations d'√©tat. </li><li>  Interface unifi√©e.  L'impl√©mentation de l'application est distincte du service qu'elle fournit.  Autrement dit, l'utilisateur sait ce qu'il fait et comment interagir avec lui, mais comment il le fait n'a pas d'importance.  Lorsque vous modifiez l'application, l'interface reste la m√™me et les clients n'ont pas besoin de s'adapter. </li></ol><br>  Les services WEB qui satisfont √† tous les principes de REST sont appel√©s <b>services WEB RESTful</b> . <br><br>  Et l'API qui fournit les services WEB RESTful s'appelle l'API RESTful. <br><br>  REST n'est pas un protocole, mais le soi-disant style d'architecture (l'un des).  D√©velopp√© avec HTTP par Roy Fielding, REST √©tait destin√© √† utiliser <b>HTTP 1.1</b> comme transport. <br><br>  Adresse de destination (ou en d'autres termes - un objet, ou d'une autre mani√®re - un point de terminaison) - c'est notre <a href="https://ru.wikipedia.org/wiki/URI" rel="nofollow"><b>URI</b></a> habituel. <br><br>  Le format des donn√©es transmises est <b>XML</b> ou <b>JSON</b> . <br><blockquote>  Pour cette s√©rie d'articles sur linkmeup, un d√©ploiement en lecture seule a √©t√© d√©ploy√© (pour vous, chers lecteurs). Installation de NetBox: <a href="http://netbox.linkmeup.ru/" rel="nofollow">netbox.linkmeup.ru</a> : 45127. <br><br>  Les droits de lecture ne sont pas requis, mais si vous voulez essayer de lire avec un jeton, vous pouvez utiliser ceci: <i>API de jeton: 90a22967d0bc4bdcd8ca47ec490bbf0b0cb2d9c8</i> . <br></blockquote>  Faisons une demande de plaisir: <br><br><pre><code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN 90a22967d0bc4bdcd8ca47ec490bbf0b0cb2d9c8"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ http://netbox.linkmeup.ru:45127/api/dcim/devices/1/</code> </pre> <br>  Autrement dit, avec l'utilitaire <b>curl</b> , nous <b><a href="http://netbox.linkmeup.ru/" rel="nofollow">cr√©ons</a></b> un objet <b>GET</b> √† <b><a href="http://netbox.linkmeup.ru/" rel="nofollow">netbox.linkmeup.ru</a> : 45127 / api / dcim / devices / 1 /</b> avec une r√©ponse <b>JSON</b> et un retrait de <b>4</b> espaces. <br><br>  Ou un peu plus acad√©miquement: GET renvoie l'objet <b>devices</b> typ√©, qui est un param√®tre de l'objet <b>DCIM</b> . <br><br>  Vous pouvez √©galement r√©pondre √† cette demande - il vous suffit de la copier sur votre terminal. <br><blockquote>  L'URL √† laquelle nous faisons r√©f√©rence dans la demande s'appelle <b>Endpoint</b> .  Dans un sens, c'est l'objet final avec lequel nous allons interagir. <br>  Par exemple, dans le cas de netbox, une liste de tous les points de terminaison peut √™tre obtenue <a href="http://netbox.linkmeup.ru:45127/api/docs/" rel="nofollow">ici</a> . <br></blockquote><blockquote>  Et faites attention au signe <b>/</b> √† la fin de l'URL - il est <b>obligatoire</b> . <br></blockquote>  Voici ce que nous obtenons en r√©ponse: <br><br><pre> <code class="bash hljs">{ <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mlg-host-0"</span></span>, <span class="hljs-string"><span class="hljs-string">"display_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mlg-host-0"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 4, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/device-types/4/"</span></span>, <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 4, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/manufacturers/4/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hypermacro"</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"hypermacro"</span></span> }, <span class="hljs-string"><span class="hljs-string">"model"</span></span>: <span class="hljs-string"><span class="hljs-string">"Server"</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"server"</span></span>, <span class="hljs-string"><span class="hljs-string">"display_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hypermacro Server"</span></span> }, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/device-roles/1/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Server"</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"server"</span></span> }, <span class="hljs-string"><span class="hljs-string">"tenant"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"serial"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"asset_tag"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 6, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/sites/6/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"mlg"</span></span> }, <span class="hljs-string"><span class="hljs-string">"rack"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/racks/1/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"display_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"A"</span></span> }, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: 41, <span class="hljs-string"><span class="hljs-string">"face"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"front"</span></span>, <span class="hljs-string"><span class="hljs-string">"label"</span></span>: <span class="hljs-string"><span class="hljs-string">"Front"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 0 }, <span class="hljs-string"><span class="hljs-string">"parent_device"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"active"</span></span>, <span class="hljs-string"><span class="hljs-string">"label"</span></span>: <span class="hljs-string"><span class="hljs-string">"Active"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1 }, <span class="hljs-string"><span class="hljs-string">"primary_ip"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"primary_ip4"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"primary_ip6"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"cluster"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"virtual_chassis"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"vc_position"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"vc_priority"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"comments"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"local_context_data"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"custom_fields"</span></span>: {}, <span class="hljs-string"><span class="hljs-string">"config_context"</span></span>: {}, <span class="hljs-string"><span class="hljs-string">"created"</span></span>: <span class="hljs-string"><span class="hljs-string">"2020-01-14"</span></span>, <span class="hljs-string"><span class="hljs-string">"last_updated"</span></span>: <span class="hljs-string"><span class="hljs-string">"2020-01-14T18:39:01.288081Z"</span></span> }</code> </pre><br>  Il s'agit de JSON (comme nous l'avons demand√©), d√©crivant l'appareil avec l'ID 1: ce qui est appel√©, avec quel r√¥le, quel mod√®le, o√π il se trouve, etc. <br><br>  Cela ressemblera √† une requ√™te HTTP: <br><br><pre> <code class="bash hljs"> GET /api/dcim/devices/1/ HTTP/1.1 Host: netbox.linkmeup.ru:45127 User-Agent: curl/7.54.0 Accept: application/json; indent=4</code> </pre> <br><br>  La r√©ponse sera donc: <br><pre> <code class="bash hljs"> HTTP/1.1 200 OK Server: nginx/1.14.0 (Ubuntu) Date: Tue, 21 Jan 2020 15:14:22 GMT Content-Type: application/json Content-Length: 1638 Connection: keep-alive Data</code> </pre> <br>  <a href="http_get_devices.pcapng" rel="nofollow">Videz la transaction</a> . <br><br>  Voyons maintenant ce que nous avons fait. <br><br><hr><br><h1>  Structure des messages HTTP </h1><br>  Un message HTTP se compose de trois parties, seule la premi√®re est requise. <br><br><ul><li>  Ligne de d√©part </li><li>  Rubriques </li><li>  Corps du message </li></ul><br><h2>  Ligne de d√©part </h2><br>  Les lignes de d√©part de la demande et de la r√©ponse HTTP sont diff√©rentes. <br><br><h4>  Requ√™te HTTP </h4><br><pre> <code class="bash hljs">METHOD URI HTTP_VERSION</code> </pre> <br><blockquote>  <b>La m√©thode</b> d√©termine quelle action le client souhaite effectuer: recevoir des donn√©es, cr√©er un objet, le mettre √† jour, le supprimer. <br>  <b>URI</b> - l'identifiant de la ressource √† laquelle le client acc√®de, ou en d'autres termes, le chemin d'acc√®s √† la ressource / au document. <br>  <b>HTTP_VERSION</b> est la version HTTP, respectivement.  Aujourd'hui, pour REST, c'est toujours 1.1. <br></blockquote>  Un exemple: <br><br><pre> <code class="bash hljs">GET /api/dcim/devices/1/ HTTP/1.1</code> </pre> <br><br><h4>  R√©ponse HTTP </h4><br><pre> <code class="bash hljs">HTTP_VERSION STATUS_CODE REASON_PHRASE</code> </pre> <br><blockquote>  <b>HTTP_VERSION</b> - version HTTP (1.1). <br>  <b>STATUS_CODE</b> - trois chiffres du code d'√©tat (200, 404, 502, etc.) <br>  <b>PHASE DE RAISON</b> - Explication (OK, PAS TROUV√â, MAUVAISE PASSERELLE, etc.) <br></blockquote><br>  Un exemple: <br><br><pre> <code class="bash hljs">HTTP/1.1 200 OK</code> </pre> <br><h2>  Rubriques </h2><br>  Les en-t√™tes transmettent les param√®tres de cette transaction HTTP. <br><br>  Par exemple, dans l'exemple ci-dessus dans la demande HTTP, ce sont: <br><br><pre> <code class="bash hljs"> Host: netbox.linkmeup.ru:45127 User-Agent: curl/7.54.0 Accept: application/json; indent=4</code> </pre> <br>  Ils indiquent que <br><br><ol><li>  Nous nous <b>tournons</b> vers l'h√¥te <b>netbox.linkmeup.ru:45127</b> , </li><li>  La demande a √©t√© g√©n√©r√©e en <b>boucle</b> , </li><li>  Et nous acceptons les donn√©es au <b>format JSON</b> avec une indentation de <b>4</b> . </li></ol><br>  Et voici les en-t√™tes de la r√©ponse HTTP: <br><br><pre> <code class="bash hljs"> Server: nginx/1.14.0 (Ubuntu) Date: Tue, 21 Jan 2020 15:14:22 GMT Content-Type: application/json Content-Length: 1638 Connection: keep-alive</code> </pre> <br>  Ils indiquent que <br><br><ol><li>  Type de serveur: <b>nginx sur Ubuntu</b> , </li><li>  Temps de r√©ponse </li><li>  Format des donn√©es de r√©ponse: <b>JSON</b> </li><li>  Longueur des donn√©es de r√©ponse: <b>1638 octets</b> </li><li>  La connexion n'a pas besoin d'√™tre ferm√©e - il y aura toujours des donn√©es. </li></ol><br>  Les en-t√™tes, comme vous l'avez d√©j√† remarqu√©, ressemblent √† des paires nom: valeur, s√©par√©es par un signe ":". <br><br>  <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields" rel="nofollow">Une liste compl√®te des en-t√™tes possibles</a> . <br><br><h2>  Le corps du message HTTP </h2><br>  Le corps est utilis√© pour transf√©rer les donn√©es r√©elles. <br><br>  Dans la r√©ponse HTTP, cela peut √™tre une page HTML, ou dans notre cas un objet JSON. <br><br>  Il doit y avoir au moins une ligne vierge entre les en-t√™tes et le corps. <br><br>  Lors de l'utilisation de la m√©thode GET dans une requ√™te HTTP, il n'y a g√©n√©ralement pas de corps car il n'y a rien √† transmettre.  Mais le corps est dans la r√©ponse HTTP. <br><br>  Mais par exemple, avec POST, le corps sera d√©j√† dans la demande.  Parlons des m√©thodes et parlons maintenant. <br><br><hr><br><h1>  Les m√©thodes </h1><br>  Comme vous l'avez d√©j√† compris, HTTP utilise des m√©thodes pour travailler avec les services WEB.  Il en va de m√™me pour l'API RESTful. <br><br>  Les sc√©narios r√©els possibles sont d√©crits par le terme <b>CRUD - Cr√©er, lire, mettre √† jour, supprimer</b> . <br>  Voici une liste des m√©thodes HTTP les plus populaires qui impl√©mentent CRUD: <br><br><ul><li>  HTTP GET </li><li>  POST HTTP </li><li>  HTTP PUT </li><li>  SUPPRESSION HTTP </li><li>  PATCH HTTP </li></ul><br>  Les m√©thodes sont √©galement appel√©es <b>verbes</b> , car elles indiquent quelle action est effectu√©e. <br><br>  <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" rel="nofollow">Liste compl√®te des m√©thodes</a> . <br><br>  Examinons chacun d'eux en utilisant l'exemple NetBox. <br><br><h2>  HTTP GET </h2><br>  Il s'agit d'une m√©thode pour obtenir des informations. <br><br>  Ainsi, par exemple, nous supprimons la liste des appareils: <br><br><pre> <code class="bash hljs">curl -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ http://netbox.linkmeup.ru:45127/api/dcim/devices/</code> </pre> <br>  La m√©thode GET est <b>s√ªre</b> car elle ne modifie pas les donn√©es, mais demande uniquement. <br><br>  Il est <b>idempotent</b> du point de vue que la m√™me requ√™te renvoie toujours le m√™me r√©sultat (jusqu'√† ce que les donn√©es elles-m√™mes aient chang√©). <br><br>  Sur GET, le serveur renvoie un message avec le code HTTP et le corps de <b>r√©ponse</b> ( <b>code de</b> <b>r√©ponse</b> et <b>corps de r√©ponse</b> ). <br><br>  Autrement dit, si tout va bien, alors le code de r√©ponse est 200 (OK). <br>  Si l'URL n'est pas trouv√©e, 404 (PAS TROUV√â). <br>  Si quelque chose ne va pas avec le serveur ou les composants eux-m√™mes, il peut s'agir de 500 (ERREUR DE SERVEUR) ou 502 (MAUVAISE PASSERELLE). <br>  <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" rel="nofollow">Tous les codes de r√©ponse possibles</a> . <br><br>  Le corps est renvoy√© au format JSON ou XML. <br><br>  <a href="http_get_all_devices.pcapng" rel="nofollow">Videz la transaction</a> . <br><br>  Donnons quelques exemples suppl√©mentaires.  Nous allons maintenant demander des informations sur un appareil sp√©cifique par son nom. <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?name=mlg-leaf-0"</span></span></code> </pre> <br>  Ici, pour d√©finir les conditions de recherche dans l'URI, j'ai √©galement sp√©cifi√© l'attribut de l'objet (le param√®tre de <b>nom</b> et sa valeur <b>mlg-leaf-0</b> ).  Comme vous pouvez le voir, avant la condition et apr√®s la barre oblique, il y a un <b>"?"</b>  et le nom et la valeur sont s√©par√©s par un signe <b>"="</b> . <br><br>  Voici √† quoi ressemble la demande. <br><br><pre> <code class="bash hljs"> GET /api/dcim/devices/?name=mlg-leaf-0 HTTP/1.1 Host: netbox.linkmeup.ru:45127 User-Agent: curl/7.54.0 Accept: application/json; indent=4</code> </pre> <br>  <a href="http_get_device_by_name.pcapng" rel="nofollow">Videz la transaction</a> . <br><br>  Si vous devez sp√©cifier quelques conditions, la requ√™te ressemblera √† ceci: <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?role=leaf&amp;site=mlg"</span></span></code> </pre> <br>  Ici, nous avons demand√© tous <b>les</b> dispositifs √† <b>feuilles</b> situ√©s sur le site Web de <b>mlg</b> . <br>  C'est-√†-dire que les deux conditions sont s√©par√©es l'une de l'autre par le signe <b>"&amp;"</b> . <br><br>  <a href="http_get_device_with_double_conditions.pcapng" rel="nofollow">Videz la transaction</a> . <br><br>  Du curieux et de l'agr√©able - si √† travers "&amp;" vous d√©finissez deux conditions avec le m√™me nom, alors entre elles il n'y aura en fait pas un "ET" logique, mais un "OU" logique. <br><br>  Autrement dit, une telle requ√™te retournera en fait deux objets: mlg-leaf-0 et mlg-spine-0 <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?name=mlg-leaf-0&amp;name=mlg-spine-0"</span></span></code> </pre> <br>  <a href="http_get_device_with_or_operand.pcapng" rel="nofollow">Videz la transaction</a> . <br><br>  Essayons d'acc√©der √† une URL inexistante. <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/IDGAF/"</span></span></code> </pre> <br>  <a href="http_get_not_found.pcapng" rel="nofollow">Videz la transaction</a> . <br><br><hr><br><h2>  POST HTTP </h2><br>  POST est utilis√© pour cr√©er un nouvel objet dans une collection d'objets.  Ou dans un langage plus complexe: pour cr√©er une nouvelle ressource subordonn√©e. <br><br><blockquote>  Clarification d' <a href="https://habr.com/ru/users/arthuriantech/" class="user_link">Arthuriantech</a> : <br>  Y compris, mais sans s'y limiter.  La m√©thode POST est con√ßue pour transf√©rer des donn√©es vers le serveur pour un traitement ult√©rieur - elle est utilis√©e pour toutes les actions qui n'ont pas besoin d'√™tre normalis√©es dans HTTP.  Avant la <a href="https://tools.ietf.org/html/rfc5789" rel="nofollow">RFC 5789,</a> c'√©tait le seul moyen l√©gal d'apporter des modifications partielles. <br>  <a href="https://roy.gbiv.com/untangled/2009/it-is-okay-to-use-post" rel="nofollow">roy.gbiv.com/untangled/2009/it-is-okay-to-use-post</a> <br>  <a href="https://tools.ietf.org/html/rfc7231" rel="nofollow">tools.ietf.org/html/rfc7231#section-4.3.3</a> </blockquote><br><br>  Autrement dit, s'il existe un ensemble de p√©riph√©riques, alors POST vous permet de cr√©er un nouvel objet de p√©riph√©rique √† l'int√©rieur des p√©riph√©riques. <br><br>  S√©lectionnez le m√™me point de terminaison et utilisez POST pour cr√©er un nouveau p√©riph√©rique. <br><br><pre> <code class="bash hljs">curl -X POST <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span>\ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"name\": \"just a simple russian girl\", \"device_type\": 1, \"device_role\": 1, \"site\": 3, \"rack\": 3, \"position\": 5, \"face\": \"front\"}"</span></span></code> </pre> <br>  Un en-t√™te d' <b>autorisation</b> appara√Æt d√©j√† ici, contenant un jeton qui autorise la demande d'√©criture, et apr√®s la directive <b>-d,</b> il y a JSON avec les param√®tres du p√©riph√©rique cr√©√©: <br><br><pre> <code class="bash hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"just a simple russian girl"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: 3, <span class="hljs-string"><span class="hljs-string">"rack"</span></span>: 3, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: 5, <span class="hljs-string"><span class="hljs-string">"face"</span></span>: <span class="hljs-string"><span class="hljs-string">"front"</span></span>}</code> </pre> <br><blockquote>  Votre demande ne fonctionnera pas, car le jeton n'est plus valide - n'essayez pas d'√©crire dans NetBox. <br></blockquote>  La r√©ponse est accompagn√©e d'une r√©ponse HTTP avec le code 201 (CREATED) et JSON dans le corps du message, o√π le serveur renvoie tous les param√®tres concernant le p√©riph√©rique cr√©√©. <br><br><pre> <code class="bash hljs"> HTTP/1.1 201 Created Server: nginx/1.14.0 (Ubuntu) Date: Sat, 18 Jan 2020 11:00:22 GMT Content-Type: application/json Content-Length: 1123 Connection: keep-alive JSON</code> </pre> <br>  <a href="http_post_new_device.pcapng" rel="nofollow">Videz la transaction</a> . <br><br>  Maintenant, avec une nouvelle demande avec la m√©thode GET, vous pouvez la voir dans la sortie: <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?q=russian"</span></span></code> </pre> <br><blockquote>  "Q" dans NetBox vous permet de trouver tous les objets qui contiennent en leur nom une ligne qui va plus loin. <br></blockquote>  POST, √©videmment, n'est <b>ni s√ªr ni idempotent</b> - il modifie probablement les donn√©es, et une requ√™te √† double ex√©cution conduira soit √† la cr√©ation d'une seconde du m√™me objet, soit √† une erreur. <br><br><hr><br><h2>  HTTP PUT </h2><br>  Il s'agit d'une m√©thode pour modifier un objet existant.  Le point de terminaison de PUT est diff√©rent de celui de POST - il contient maintenant un objet sp√©cifique. <br><br>  PUT peut renvoyer les codes 201 ou 200. <br><br>  Un point important avec cette m√©thode: vous devez passer tous les attributs requis, car PUT remplace l'ancien objet. <br><br>  Par cons√©quent, si, par exemple, en essayant simplement d'ajouter l'attribut asset_tag √† notre nouvel appareil, nous obtenons une erreur: <br><br><pre> <code class="bash hljs">curl -X PUT <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"asset_tag\": \"12345678\"}"</span></span></code> </pre> <br><pre> <code class="bash hljs">{<span class="hljs-string"><span class="hljs-string">"device_type"</span></span>:[<span class="hljs-string"><span class="hljs-string">"This field is required."</span></span>],<span class="hljs-string"><span class="hljs-string">"device_role"</span></span>:[<span class="hljs-string"><span class="hljs-string">"This field is required."</span></span>],<span class="hljs-string"><span class="hljs-string">"site"</span></span>:[<span class="hljs-string"><span class="hljs-string">"This field is required."</span></span>]}</code> </pre> <br>  Mais si vous ajoutez les champs manquants, alors tout fonctionnera: <br><br><pre> <code class="bash hljs">curl -X PUT <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"name\": \"just a simple russian girl\", \"device_type\": 1, \"device_role\": 1, \"site\": 3, \"rack\": 3, \"position\": 5, \"face\": \"front\", \"asset_tag\": \"12345678\"}"</span></span></code> </pre> <br>  <a href="http_put_asset_tag.pcapng" rel="nofollow">Videz la transaction</a> . <br><blockquote>  Faites attention √† l'URL ici - elle comprend maintenant l'ID de l'appareil que nous voulons changer ( <b>18</b> ). <br></blockquote><br><hr><br><h2>  PATCH HTTP </h2><br>  Cette m√©thode est utilis√©e pour modifier partiellement la ressource. <br>  Wat?  Vous demandez, mais qu'en est-il de PUT? <br><br>  PUT est une m√©thode qui existait √† l'origine dans la norme, impliquant le remplacement complet d'un objet mutable.  En cons√©quence, dans la m√©thode PUT, comme je l'ai √©crit ci-dessus, vous devrez sp√©cifier m√™me les attributs de l'objet qui ne changent pas. <br><br>  Et PATCH a √©t√© ajout√© plus tard et vous permet de sp√©cifier uniquement les attributs qui changent vraiment. <br><br>  Par exemple: <br><br><pre> <code class="bash hljs">curl -X PATCH <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"serial\": \"BREAKINGBAD\"}"</span></span></code> </pre> <br>  Ici, l'ID du p√©riph√©rique est √©galement sp√©cifi√© dans l'URL, mais il n'y a qu'un seul attribut <b>s√©rie</b> √† modifier. <br><br>  <a href="http_patch_serial.pcapng" rel="nofollow">Videz la transaction</a> . <br><br><hr><br><h2>  SUPPRESSION HTTP </h2><br>  Supprime √©videmment l'objet. <br><br>  Un exemple. <br><br><pre> <code class="bash hljs">curl -X DELETE <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/21/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span></code> </pre> <br>  La m√©thode DELETE est idempotente du point de vue qu'une requ√™te r√©p√©t√©e ne modifie plus rien dans la liste des ressources (mais renvoie le code 404 (NOT FOUND). <br><br><pre> <code class="bash hljs">curl -X DELETE <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/21/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span></code> </pre> <br><pre> <code class="bash hljs">{<span class="hljs-string"><span class="hljs-string">"detail"</span></span>:<span class="hljs-string"><span class="hljs-string">"Not found."</span></span>}</code> </pre> <br><hr><br><h1>  Fa√ßons de travailler avec l'API RESTful </h1><br>  Curl est, bien s√ªr, tr√®s pratique pour les vaillants guerriers CLI, mais il existe de meilleurs outils. <br><br><h2>  Facteur </h2><br>  Postman vous permet de former des requ√™tes dans l'interface graphique en s√©lectionnant les m√©thodes, les en-t√™tes, le corps et affiche le r√©sultat sous une forme lisible par l'homme. <br><br>  De plus, les requ√™tes et les URI peuvent √™tre enregistr√©s et leur √™tre retourn√©s ult√©rieurement. <br><br>  <a href="https://www.getpostman.com/downloads/" rel="nofollow">T√©l√©chargez Postman sur le site officiel</a> . <br><br>  Nous pouvons donc faire un GET: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b00/869/169/b00869169e3e64b427e224587da49e12.png" width="800"><br>  <i>Ici, Token est indiqu√© dans le GET √† titre d'exemple uniquement.</i> <br><br>  Et donc POST: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1b/91f/655/f1b91f655182e7780ee62d44e8e25ae9.png" width="800"><br><br>  Postman est destin√© √† √™tre utilis√© avec l'API RESTful uniquement. <br><blockquote>  Par exemple, n'essayez pas d'envoyer du NETCONF XML √† travers lui, comme je l'ai fait √† l'aube de ma carri√®re en automatisation. <br></blockquote>  L'un des avantages int√©ressants de l'API sp√©cifi√©e est que vous pouvez importer tous les points de terminaison et leurs m√©thodes dans Postman en tant que collection. <br><br>  Pour ce faire, dans la fen√™tre <b>Importer</b> (Fichier-&gt; Importer), s√©lectionnez <b>Importer depuis le lien</b> et collez dans la fen√™tre <a href="http://netbox.linkmeup.ru/" rel="nofollow">netbox.linkmeup.ru</a> URL: 45127 / api / docs /? Format = openapi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9f/48e/2d1/f9f48e2d1923e88995301379e4888b6c.png" width="400"><br><br>  De plus, tout ce que vous pouvez trouver se trouve dans les collections. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eaa/616/c1a/eaa616c1adfcfacbaf164ea95531fd4e.png" width="200"><br><br><hr><br><br><h2>  Python + requ√™tes </h2><br>  Mais m√™me via Postman, vous ne g√©rerez probablement pas vos syst√®mes de production.  Vous aurez s√ªrement des applications externes qui voudront interagir avec elles sans votre participation. <br><br>  Par exemple, un syst√®me de g√©n√©ration de configuration souhaite r√©cup√©rer une liste d'interfaces IP de NetBox. <br>  Python poss√®de une merveilleuse biblioth√®que de <b>requ√™tes</b> qui impl√©mente le travail via HTTP. <br>  Un exemple de demande d'une liste de tous les appareils: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests HEADERS = {<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'Accept'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>} NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> request_url = <span class="hljs-string"><span class="hljs-string">f"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{NB_URL}</span></span></span><span class="hljs-string">/api/dcim/devices/"</span></span> devices = requests.get(request_url, headers = HEADERS) print(devices.json())</code> </pre> <br>  Ajoutez √† nouveau un nouvel appareil: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests API_TOKEN = <span class="hljs-string"><span class="hljs-string">"a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> HEADERS = {<span class="hljs-string"><span class="hljs-string">'Authorization'</span></span>: <span class="hljs-string"><span class="hljs-string">f'Token </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{API_TOKEN}</span></span></span><span class="hljs-string">'</span></span>, <span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'Accept'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>} NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> request_url = <span class="hljs-string"><span class="hljs-string">f"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{NB_URL}</span></span></span><span class="hljs-string">/api/dcim/devices/"</span></span> device_parameters = { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"just a simple REQUESTS girl"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, } new_device = requests.post(request_url, headers = HEADERS, json=device_parameters) print(new_device.json())</code> </pre> <br><hr><br><h3>  SDK Python + NetBox </h3><br>  Dans le cas de NetBox, il existe √©galement un SDK Python - <a href="https://github.com/digitalocean/pynetbox" rel="nofollow">Pynetbox</a> , qui repr√©sente tous les points de terminaison NetBox en tant qu'objet et ses attributs, faisant tout le sale boulot pour vous de g√©n√©rer des URI et d'analyser la r√©ponse, bien que pas gratuitement, bien s√ªr. <br><br>  Par exemple, faisons la m√™me chose que ci-dessus, en utilisant pynetbox. <br>  Liste de tous les appareils: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pynetbox NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> nb = pynetbox.api(NB_URL) devices = nb.dcim.devices.all() print(devices)</code> </pre> <br>  Ajouter un nouvel appareil: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pynetbox API_TOKEN = <span class="hljs-string"><span class="hljs-string">"a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> nb = pynetbox.api(NB_URL, token = API_TOKEN) device_parameters = { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"just a simple PYNETBOX girl"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, } new_device = nb.dcim.devices.create(**device_parameters) print(new_device)</code> </pre> <br>  <a href="https://pynetbox.readthedocs.io/en/latest/" rel="nofollow">Documentation Pynetbox</a> <br><br><hr><br><h2>  Swagger </h2><br>  Ce qui vaut d'autre gr√¢ce √† la derni√®re d√©cennie, ce sont les sp√©cifications de l'API.  Si vous suivez <a href="http://netbox.linkmeup.ru:45127/api/docs/" rel="nofollow">ce chemin</a> , vous serez redirig√© vers la documentation Swagger UI - Netbox API. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5c/ec6/1db/c5cec61db67db108cc2fce2ba0492d3b.png" width="800"><br><br>  Cette page r√©pertorie tous les points de terminaison, les m√©thodes de travail avec eux, les param√®tres et attributs possibles et indique lesquels sont n√©cessaires.  De plus, les r√©ponses attendues sont d√©crites. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4bc/886/8e6/4bc8868e6cfae94427e648abd0a1cd7b.png" width="800"><br><br>  Sur la m√™me page, vous pouvez effectuer des requ√™tes interactives en cliquant sur <b>Essayer</b> . <br><blockquote>  Pour une raison quelconque, swagger prend le nom du serveur sans port comme URL de base, donc la fonction Try it out ne fonctionne pas dans mes exemples Swagger.  Mais vous pouvez l'essayer sur votre propre installation. <br></blockquote>  Lorsque vous cliquez sur <b>Ex√©cuter</b> Swagger, l'interface utilisateur g√©n√®re une cha√Æne curl qui peut √™tre utilis√©e pour effectuer une demande similaire √† partir de la ligne de commande. <br><br>  Dans Swagger UI, vous pouvez m√™me cr√©er un objet: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47b/311/74f/47b31174f7b1b8564b2aadea91db89bb.png" width="800"><br><br>  Pour ce faire, il suffit d'√™tre un utilisateur autoris√© disposant des droits n√©cessaires. <br><br>  Ce que nous voyons sur cette page est l'interface utilisateur Swagger, une documentation g√©n√©r√©e sur la base des sp√©cifications de l'API. <br><br>  Avec les tendances de l'architecture des microservices, il devient de plus en plus important d'avoir une API standardis√©e pour l'interaction entre les composants, dont les points de terminaison et les m√©thodes sont faciles √† d√©terminer pour la personne et l'application sans fouiller dans le code source ou la documentation PDF. <br><br>  Par cons√©quent, les d√©veloppeurs suivent aujourd'hui de plus en plus le paradigme <a href="https://medium.com/adobetech/three-principles-of-api-first-design-fa6666d9f694" rel="nofollow">API First</a> lorsqu'ils pensent d'abord √† l'API, puis seulement √† la mise en ≈ìuvre. <br>  L'API est d'abord sp√©cifi√©e dans cette conception, puis la documentation, l'application cliente, la partie serveur sont <b>g√©n√©r√©es √†</b> partir d'elle et des tests sont n√©cessaires. <br><br>  Swagger est un langage de cadre et de sp√©cification (qui a maintenant √©t√© renomm√© OpenAPI 2.0), vous permettant de mettre en ≈ìuvre cette t√¢che. <br>  Je n'entrerai pas dans les d√©tails. <br><br>  Pour plus de d√©tails ici: <br><br><ul><li>  <a href="https://swagger.io/docs/specification/" rel="nofollow">Site Web de Swagger</a> </li><li>  <a href="https://justcodeit.ru/swagger-docs-dlya-api-na-laravel/" rel="nofollow">Exemple d'utilisation</a> </li><li>  <a href="https://en.wikipedia.org/wiki/OpenAPI_Specification" rel="nofollow">Wiki sur Open API</a> </li></ul><br><hr><br><h1>  Critique du REST et des alternatives </h1><br>  Il y en a un, oui.  Tout dans ce monde de l'an 2000 n'est pas d√©j√† si rose. <br><br>  N'√©tant pas un expert, je ne pr√©tends pas divulguer de mani√®re substantielle la question, mais je donnerai un lien vers un <a href="https://habr.com/ru/post/265845/">article</a> incontestable <a href="https://habr.com/ru/post/265845/">sur Habr√©</a> . <br><br>  Une interface alternative pour l'interaction des composants du syst√®me est aujourd'hui gRPC.  Il a √©galement proph√©tis√© un grand avenir dans le domaine des nouvelles approches de l'utilisation des √©quipements de r√©seau.  Mais nous parlerons de lui dans le futur, √† son tour. <br><br>  Vous pouvez √©galement jeter un ≈ìil au <a href="https://habr.com/ru/post/326986/">GraphQL</a> prometteur, mais encore une fois, nous n'avons pas besoin de travailler avec lui pour l'instant, il reste donc √† √©tudier de mani√®re ind√©pendante. <br><br><hr><br><blockquote>  <b>Est important</b> <br>  Le jeton a9aae70d65c928a554f9a038b9d4703a1583594f a √©t√© utilis√© √† des fins de d√©monstration uniquement et ne fonctionne plus. <br><br>  L'indication directe de jetons dans le code du programme est inacceptable et je ne l'ai fait ici que pour simplifier les exemples. <br></blockquote><br><hr><br><h1>  Liens utiles </h1><br><ul><li>  <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" rel="nofollow">Le rapport original de Roy Fielding</a> </li><li>  <a href="https://medium.com/adobetech/three-principles-of-api-first-design-fa6666d9f694" rel="nofollow">API First</a> </li><li>  <a href="http-methods/" rel="nofollow">M√©thodes HTTP</a> </li><li>  <a href="https://restfulapi.net/rest-architectural-constraints/" rel="nofollow">Principes REST</a> </li><li>  <a href="https://swagger.io/docs/specification/" rel="nofollow">Site Web de Swagger</a> </li><li>  <a href="https://justcodeit.ru/swagger-docs-dlya-api-na-laravel/" rel="nofollow">Exemple Swagger</a> </li><li>  <a href="https://en.wikipedia.org/wiki/OpenAPI_Specification" rel="nofollow">Wiki sur OpenAPI</a> </li><li>  <a href="https://habr.com/ru/post/265845/">Critique de REST</a> </li></ul><br><h1>  Merci </h1><br><ul><li>  Andrei Panfilov pour la relecture et l'√©dition </li><li>  Alexander Fatin pour la relecture et l'√©dition </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485618/">https://habr.com/ru/post/fr485618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485606/index.html">Op√©rations de filtrage des pilotes dans le registre. Pratique</a></li>
<li><a href="../fr485608/index.html">Microservices avec Spring Boot. Partie 4. Utilisation du ruban pour l'√©quilibrage de charge</a></li>
<li><a href="../fr485610/index.html">Cr√©er une application Qt dans WebAssembly sous Windows</a></li>
<li><a href="../fr485612/index.html">Qu'est-ce qu'un accident spatial m'a appris en tant que d√©veloppeur</a></li>
<li><a href="../fr485614/index.html">La culture d'entreprise rouge est le principal probl√®me des entreprises russes (partie 3)</a></li>
<li><a href="../fr485620/index.html">Yoshkar-Ola, en g√©n√©ral, une ville informatique?</a></li>
<li><a href="../fr485622/index.html">Outils de sauvegarde PostgreSQL. Andrey Salnikov (Data Egret)</a></li>
<li><a href="../fr485624/index.html">Serveur Minecraft: Windows vs Linux</a></li>
<li><a href="../fr485630/index.html">La cosmonautique africaine: des d√©chets √† la r√©alit√©</a></li>
<li><a href="../fr485632/index.html">Surveillance du score de cr√©dit dans Power BI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>