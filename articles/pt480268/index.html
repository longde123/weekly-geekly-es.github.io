<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚ù§Ô∏è‚Äçüë® ü§∞üèø üëÇüèº Biblioteca Java de c√≥digo aberto com filtragem de rastreamento de pilha, an√°lise Silent String e compara√ß√£o de vers√µes üé± ü§¶ üê∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Durante algum tempo em trabalhos diferentes, deparei-me com v√°rios utilit√°rios que n√£o consegui encontrar dispon√≠veis no momento. E vi que precisava d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Biblioteca Java de c√≥digo aberto com filtragem de rastreamento de pilha, an√°lise Silent String e compara√ß√£o de vers√µes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480268/"> Durante algum tempo em trabalhos diferentes, deparei-me com v√°rios utilit√°rios que n√£o consegui encontrar dispon√≠veis no momento.  E vi que precisava deles v√°rias vezes sem parar.  Ent√£o, escrevi minha pr√≥pria pequena biblioteca que achei muito √∫til.  Acabei de publicar como uma biblioteca java de c√≥digo aberto. <br><br>  <a href="https://github.com/michaelgantman/Mgnt/releases">Aqui est√° o link do Github</a> <br><br>  <a href="http://michaelgantman.github.io/Mgnt/docs">Javadoc online est√° dispon√≠vel aqui</a> <br><br>  Al√©m disso, esta biblioteca est√° dispon√≠vel no Maven Central.  Aqui est√£o os artefatos do Maven (a vers√£o 1.5.0.8 √© a mais recente no momento da reda√ß√£o deste artigo, mas pode ser alterada no futuro. Para verificar a vers√£o mais recente, procure o artefato "MgntUtils" em <a href="http://search.maven.org/">http: //search.maven. org /</a> ): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>javadoc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Abaixo est√° apenas uma breve explica√ß√£o do que est√° l√°.  A biblioteca vem com um JavaDoc bem escrito (espero) com uma descri√ß√£o detalhada.  Ent√£o, aqui est√° a lista de recursos: <br><a name="habracut"></a><br><h3>  Filtro de ru√≠do Stacktrace </h3><br>  Na minha experi√™ncia, esse recurso foi o mais gen√©rico e √∫til para mim.  O Stacktrace √© um salva-vidas ao depurar ou tentar descobrir o que deu errado no seu aplicativo.  No entanto, ao trabalhar com logs no lado do servidor, voc√™ pode encontrar um enorme stacktrace que cont√©m a cauda in√∫til mais longa de v√°rias estruturas e pacotes relacionados ao Application Server.  E em algum lugar nesta pilha, existem v√°rias linhas de um rastreio relevante e elas podem estar em diferentes segmentos separados por informa√ß√µes in√∫teis.  Torna-se um pesadelo procurar um material relevante.  Aqui est√° um link que descreve o mesmo problema com exemplos da vida real (n√£o para os fracos de cora√ß√£o) <a href="https://dzone.com/articles/filtering-stack-trace-hell">https://dzone.com/articles/filtering-stack-trace-hell</a> .  Portanto, na minha biblioteca, existe uma classe chamada <i>TextUtils</i> e possui o m√©todo <i>getStacktrace ()</i> com v√°rias assinaturas sobrecarregadas.  √â preciso uma inst√¢ncia Throwable e permite definir um prefixo de pacote relevante. <br><br>  Al√©m disso, o mesmo utilit√°rio (a partir da vers√£o 1.5.0.3) possui o m√©todo <i>getStacktrace ()</i> que utiliza a interface CharSequence em vez de Throwable e, portanto, permite filtrar e reduzir o stacktrace armazenado como uma string da mesma maneira que um stacktrace extra√≠do de Throwable.  Portanto, essencialmente os rastreamentos de pilha podem ser filtrados "on the fly" no tempo de execu√ß√£o ou posteriormente de qualquer fonte de texto, como um log.  (Apenas para esclarecer - o utilit√°rio n√£o suporta a an√°lise e modifica√ß√£o de todo o arquivo de log. Ele suporta a filtragem de apenas um rastreamento de pilha que √© passado como uma String. Portanto, se algu√©m quiser filtrar exce√ß√µes no arquivo de log, precisar√° analis√°-lo. e extraia o (s) rastreamento (s) de pilha como seq√º√™ncias de caracteres separadas e, em seguida, pode usar esse utilit√°rio para filtrar cada rastreamento de pilha individual). <br><br>  Aqui est√° um exemplo de uso.  Digamos que a empresa esteja sempre em pacotes que come√ßam com "com.plain. *". Portanto, voc√™ define esse prefixo e faz isso <br><br><pre> <code class="java hljs">logger.info(TextUtils.getStacktrace(e,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>));</code> </pre> <br>  isso filtrar√° de maneira muito inteligente todas as partes in√∫teis do rastreamento, deixando um rastreamento de pilha muito conciso.  Al√©m disso, achei muito conveniente predefinir o prefixo e usar o m√©todo de conveni√™ncia <br><br><pre> <code class="java hljs">TextUtils.getStacktrace(e);</code> </pre> <br>  Isso far√° o mesmo.  Para predefinir o prefixo, use o m√©todo <br><br><pre> <code class="java hljs">setRelevantPackage(<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>);</code> </pre> <br>  Se voc√™ desejar predefinir esse valor por configura√ß√£o, a partir da vers√£o da biblioteca 1.1.0.1, poder√° definir a vari√°vel de ambiente " <b>MGNT_RELEVANT_PACKAGE</b> " ou a propriedade do sistema " <b>mgnt.relevant.package</b> " para o valor " <i>com.plain</i> " <i>.</i> ser√° definido com esse valor sem voc√™ chamar o m√©todo <i>TextUtils.setRelevantPackage ("com.plain.");</i>  explicitamente no seu c√≥digo.  Observe que o valor da propriedade System ter√° preced√™ncia sobre a vari√°vel de ambiente se ambas fossem definidas.  Apenas um lembrete de que, com a propriedade System, voc√™ pode adicion√°-lo na linha de comando usando o sinalizador -D: <br><br>  "-Dmgnt.relevant.package = com.plain." <br><br>  Al√©m disso, se voc√™ usar uma vers√£o anterior √† 1.1.0.1 desta biblioteca ou n√£o quiser usar a vari√°vel de ambiente ou a propriedade do sistema mencionada acima e estiver usando o ambiente Spring, poder√° predefinir o prefixo adicionando o seguinte segmento √† sua configura√ß√£o Spring: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.beans.factory.config.MethodInvokingFactoryBean"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.mgnt.utils.TextUtils"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetMethod"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setRelevantPackage"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"arguments"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.plain."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Javadoc explica tudo em detalhes.  Mas aqui est√° um pequeno teaser: voc√™ obter√° o seguinte stacktrace: <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() ... at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() ... at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br>  em vez de <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed() at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() at sun.reflect.NativeMethodAccessorImpl.invoke() at sun.reflect.DelegatingMethodAccessorImpl.invoke() at java.lang.reflect.Method.invoke() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod() at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.transaction.interceptor.TransactionInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept() at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br><h3>  Silent String analisando em Inteiro, Longo, etc </h3><br>  A mesma classe <i>TextUtils</i> fornece m√©todos para analisar String silenciosamente (sem exce√ß√£o, nunca sendo lan√ßada) em tipos de Duplo, Longo, Inteiro, Curto e Byte.  Os m√©todos s√£o chamados <i>parseStringToLong ()</i> <i>parseStringToInteger ()</i> etc.  Todos eles recebem 4 argumentos: <br><br><ol><li>  Uma String a ser analisada </li><li>  Uma implementa√ß√£o de Number (Double, Long, Integer, Short ou Byte) para servir como valor padr√£o se ocorrer algum problema de an√°lise </li><li>  Uma String a ser impressa como uma mensagem de erro no log se o primeiro argumento for nulo (pode ser nulo e, em seguida, nenhum erro √© impresso) </li><li>  Uma String a ser impressa como uma mensagem de erro se NumberFormatException ocorreu (pode ser nulo e, em seguida, nenhum erro √© impresso) </li></ol><br><h3>  Analisando String para Intervalo de Tempo </h3><br>  Na mesma classe <i>TextUtils</i> , existe um m√©todo <i>parseStringToTimeInterval (valor da String)</i> .  Esse m√©todo analisa uma sequ√™ncia que espera manter algum valor de intervalo de tempo - um valor num√©rico com sufixo opcional da unidade de tempo.  Por exemplo, a sequ√™ncia "38s" ser√° analisada como 38 segundos, "24m" - 24 minutos "4h" - 4 horas, "3d" - 3 dias e "45" como 45 milissegundos.  Os sufixos suportados s√£o " <b>s</b> " por segundos, " <b>m</b> " por minutos, " <b>h</b> " por horas e " <b>d</b> " por dias.  Considera-se que a sequ√™ncia sem sufixo cont√©m um valor em milissegundos.  Sufixos n√£o diferenciam mai√∫sculas de min√∫sculas.  Se a String fornecida contiver um sufixo n√£o suportado ou manter um valor num√©rico negativo ou zero ou manter um valor n√£o num√©rico - IllegalArgumentException ser√° lan√ßada.  Este m√©todo retorna a classe TimeInterval - uma classe tamb√©m definida nesta biblioteca.  Essencialmente, ele possui duas propriedades com getters e setters relevantes: long "value" e java.util.concurrent.TimeUnit.  Mas, al√©m de getters e setters, essa classe possui m√©todos <i>toMillis ()</i> , <i>toSeconds ()</i> , <i>toMinutes ()</i> , <i>toHours ()</i> <i>toDays ()</i> .  Esses m√©todos retornam um valor longo na escala de tempo especificada (da mesma maneira que os m√©todos correspondentes na classe <i>java.util.concurrent.TimeUnit</i> ) <br><br>  Esse m√©todo pode ser muito √∫til para analisar propriedades de intervalo de tempo, como tempos limite ou per√≠odos de espera dos arquivos de configura√ß√£o.  Elimina c√°lculos desnecess√°rios de diferentes escalas de tempo para milissegundos e para frente e para tr√°s.  Considere que voc√™ possui uma propriedade <b>methodInvokingInterval</b> que precisa definir por 5 dias.  Portanto, para definir o valor em milissegundos, voc√™ precisar√° calcular que 5 dias s√£o 432000000 milissegundos (obviamente, n√£o √© uma tarefa imposs√≠vel, mas irritante e propensa a erros) e qualquer outra pessoa que visualizar o valor 432000000 precisar√° calcul√°-lo de volta para 5 dias que √© frustrante.  Mas, usando esse m√©todo, voc√™ ter√° um valor de propriedade definido como "5d" e invocar√° o c√≥digo <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> milliseconds = TextUtils.parsingStringToTimeInterval(<span class="hljs-string"><span class="hljs-string">"5d"</span></span>).toMillis();</code> </pre> <br>  resolver√° seu problema de convers√£o.  Obviamente, esse n√£o √© um recurso excessivamente complexo, mas pode adicionar simplicidade e clareza nos arquivos de configura√ß√£o e salvar algumas frustra√ß√µes e erros de c√°lculo "est√∫pidos" em erros de milissegundos. <br><br><h3>  Compare Vers√µes </h3><br>  Este utilit√°rio permite converter String em vers√£o e vice-versa e comparar vers√µes e intervalos de vers√µes corretamente.  Frequentemente, se voc√™ precisar comparar vers√µes, basta comparar Strings.  Ent√£o, digamos que a vers√£o "1.5.3" ser√° maior que a vers√£o "1.3.1".  No entanto, se voc√™ comparar as Strings "1.4.2" e "1.12.3", a String "1.4.2" ser√° erroneamente maior.  Portanto, este utilit√°rio cuida de um problema desse tipo e, al√©m disso, apresenta a classe VersionRange e permite opera√ß√µes nos intervalos de vers√£o.  (Consulte os m√©todos <i>compareVersions</i> na classe <i>TextUtils</i> e na classe <i>VersionRange</i> ) <br><br><h3>  Conversor Unicode de cadeia </h3><br>  A classe <i>StringUnicodeEncoderDecoder</i> possui m√©todos que podem converter uma String (em qualquer idioma) em uma sequ√™ncia de caracteres Unicode e vice-versa.  Por exemplo, uma string "Hello World" ser√° convertida em <br><br>  "\ u0048 \ u0065 \ u006c \ u006c \ u006f \ u0020 \ u0057 \ u006f \ u0072 \ u006c \ u0064" <br><br>  e pode ser restaurado de volta. <br><br><h3>  Gerenciamento do ciclo de vida (f√°bricas de instancia√ß√£o autom√°tica) </h3><br>  Esse recurso √© um pacote que cont√©m algumas pequenas infraestruturas que simplificam e automatizam o trabalho com F√°bricas que fornecem implementa√ß√µes concretas de uma Interface.  O pacote cont√©m apenas 2 classes: <i>BaseEntityFactory</i> e <i>BaseEntity</i> .  Resumindo, o que essa infraestrutura faz √© que, se voc√™ criar uma f√°brica que estende <i>BaseEntityFactory</i> e alguma Interface com todas as suas implementa√ß√µes concretas estendendo <i>BaseEntity</i> , cada uma das inst√¢ncias de classe de classe de implementa√ß√£o concreta ser√° automaticamente inserida em sua f√°brica.  Voc√™ n√£o precisar√° se preocupar com como e quando preencher sua f√°brica.  A infraestrutura far√° isso por voc√™ quando o construtor de sua classe de implementa√ß√£o concreta for chamado.  Portanto, tudo o que voc√™ precisar√° fazer √© criar qualquer n√∫mero de classes de implementa√ß√£o concretas e garantir que cada construtor seja chamado.  Depois disso, voc√™ pode usar sua f√°brica para obter qualquer uma das suas classes de implementa√ß√£o concretas em qualquer lugar do seu c√≥digo.  Esta √© uma breve explica√ß√£o.  Existem mais alguns detalhes, mas n√£o tantos.  Para uma descri√ß√£o detalhada deste pacote, consulte a API Javadoc da descri√ß√£o do pacote <b>com.mgnt.lifecycle.management</b> .  Al√©m disso, o c√≥digo-fonte cont√©m o pacote com.mgnt.lifecycle.management.example que cont√©m um exemplo de c√≥digo detalhado e bem comentado sobre como usar esse recurso. <br><br>  Quanto ao uso pr√°tico, achei muito √∫til para o framework Spring.  Lembre-se de que o Spring instancia todos os seus gr√£os definidos durante sua inicializa√ß√£o.  Portanto, dentro do contexto do Spring, se simplesmente declar√°ssemos nossas implementa√ß√µes concretas como beans Spring, o Spring as instanciaria para n√≥s, inicializando sua f√°brica automaticamente.  Isso pode ser muito conveniente.  Imagine que voc√™ tem algum bean que possui uma propriedade do tipo de interface definida pelo usu√°rio que possui v√°rias implementa√ß√µes, mas qual implementa√ß√£o real seria necess√°ria √© determinada em tempo de execu√ß√£o.  Portanto, nesse momento, voc√™ pode usar o m√©todo <i>getInstance (java.lang.String)</i> da sua f√°brica para acessar a implementa√ß√£o necess√°ria.  Isso permitir√° que voc√™ n√£o injete TODAS as suas instancia√ß√µes concretas no seu bean e n√£o precisar√° usar o Spring <i>Bean Factory</i> para acessar um bean definido pelo Spring, pois isso violaria a n√£o intrus√£o do Spring (o que significa que voc√™ pode escrever componentes que n√£o dependem de Primavera).  Al√©m disso, se em algum est√°gio posterior voc√™ precisar adicionar implementa√ß√µes mais concretas, tudo o que voc√™ precisar√° fazer √© adicionar suas classes de implementa√ß√£o ao seu c√≥digo e declar√°-las como Spring beans.  O resto ser√° feito pela Spring e essa infraestrutura! <br><br><h3>  Utilit√°rios de arquivo </h3><br>  Este utilit√°rio permite ler um arquivo como uma String com ou sem especificar o conjunto de caracteres ou apenas l√™-lo como uma matriz de bytes.  Este utilit√°rio usa o pacote nio e os buffers para obter um desempenho mais r√°pido.  O tamanho m√°ximo do arquivo para este utilit√°rio √© 2G. <br><br><h3>  Utilit√°rio de tempo </h3><br>  Este √© apenas um m√©todo de conveni√™ncia √∫nico que fornece a mesma funcionalidade que Thread.sleep (), mas √© silencioso.  Ou seja, "engole" IterruptedException.  Al√©m disso, s√£o necess√°rios 2 argumentos: hora de dormir e unidade de medida.  Ent√£o, ao inv√©s de <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">2000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException ie) { }</code> </pre> <br>  Voc√™ pode simplesmente escrever: <br><br><pre> <code class="java hljs">TimeUtils.sleepFor(<span class="hljs-number"><span class="hljs-number">2</span></span>, TimeUnit.SECONDS);</code> </pre> <br>  Eu achei fofo <br><br>  Ent√£o √© isso.  Sinta-se livre para baixar esta biblioteca.  Ele vem com a licen√ßa MIT - uma das licen√ßas mais permissivas que conhe√ßo.  O c√≥digo fonte, o Javadoc e a vers√£o bin√°ria est√£o dispon√≠veis no link acima.  O c√≥digo foi compilado pelo JDK 8, mas n√£o possui recursos da vers√£o 8.  Ele deve funcionar com o java 7 definitivamente, eu suspeito que ele funcione com o java 6 e at√© 5, mas n√£o o testei com essas vers√µes.  Sinta-se √† vontade para us√°-lo como achar melhor, conte para outras pessoas, se quiser, e me mande uma nota para michael_gantman@yahoo.com, se voc√™ tiver algum coment√°rio. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480268/">https://habr.com/ru/post/pt480268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480256/index.html">Substitui√ß√£o de arquivo Java</a></li>
<li><a href="../pt480258/index.html">Reagir Native init vs Expo</a></li>
<li><a href="../pt480262/index.html">Java Digest para 14 de dezembro</a></li>
<li><a href="../pt480264/index.html">Retorno da solidariedade: TI e freelancers precisam organizar</a></li>
<li><a href="../pt480266/index.html">A hist√≥ria dos jogos na nuvem</a></li>
<li><a href="../pt480270/index.html">O decl√≠nio na popularidade do PHP: n√£o √© t√£o simples?</a></li>
<li><a href="../pt480272/index.html">Intelig√™ncia artificial e a complexidade do c√©rebro humano</a></li>
<li><a href="../pt480274/index.html">Contador de √°lcool ou Como sobreviver a recep√ß√µes em buffet</a></li>
<li><a href="../pt480276/index.html">Entrevista: Estrat√©gias de contrata√ß√£o. Parte I</a></li>
<li><a href="../pt480280/index.html">Estudo de seguran√ßa do TurboConf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>