<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍❤️‍👨 🤰🏿 👂🏼 Biblioteca Java de código aberto com filtragem de rastreamento de pilha, análise Silent String e comparação de versões 🎱 🤦 🐶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Durante algum tempo em trabalhos diferentes, deparei-me com vários utilitários que não consegui encontrar disponíveis no momento. E vi que precisava d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Biblioteca Java de código aberto com filtragem de rastreamento de pilha, análise Silent String e comparação de versões</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480268/"> Durante algum tempo em trabalhos diferentes, deparei-me com vários utilitários que não consegui encontrar disponíveis no momento.  E vi que precisava deles várias vezes sem parar.  Então, escrevi minha própria pequena biblioteca que achei muito útil.  Acabei de publicar como uma biblioteca java de código aberto. <br><br>  <a href="https://github.com/michaelgantman/Mgnt/releases">Aqui está o link do Github</a> <br><br>  <a href="http://michaelgantman.github.io/Mgnt/docs">Javadoc online está disponível aqui</a> <br><br>  Além disso, esta biblioteca está disponível no Maven Central.  Aqui estão os artefatos do Maven (a versão 1.5.0.8 é a mais recente no momento da redação deste artigo, mas pode ser alterada no futuro. Para verificar a versão mais recente, procure o artefato "MgntUtils" em <a href="http://search.maven.org/">http: //search.maven. org /</a> ): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>javadoc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Abaixo está apenas uma breve explicação do que está lá.  A biblioteca vem com um JavaDoc bem escrito (espero) com uma descrição detalhada.  Então, aqui está a lista de recursos: <br><a name="habracut"></a><br><h3>  Filtro de ruído Stacktrace </h3><br>  Na minha experiência, esse recurso foi o mais genérico e útil para mim.  O Stacktrace é um salva-vidas ao depurar ou tentar descobrir o que deu errado no seu aplicativo.  No entanto, ao trabalhar com logs no lado do servidor, você pode encontrar um enorme stacktrace que contém a cauda inútil mais longa de várias estruturas e pacotes relacionados ao Application Server.  E em algum lugar nesta pilha, existem várias linhas de um rastreio relevante e elas podem estar em diferentes segmentos separados por informações inúteis.  Torna-se um pesadelo procurar um material relevante.  Aqui está um link que descreve o mesmo problema com exemplos da vida real (não para os fracos de coração) <a href="https://dzone.com/articles/filtering-stack-trace-hell">https://dzone.com/articles/filtering-stack-trace-hell</a> .  Portanto, na minha biblioteca, existe uma classe chamada <i>TextUtils</i> e possui o método <i>getStacktrace ()</i> com várias assinaturas sobrecarregadas.  É preciso uma instância Throwable e permite definir um prefixo de pacote relevante. <br><br>  Além disso, o mesmo utilitário (a partir da versão 1.5.0.3) possui o método <i>getStacktrace ()</i> que utiliza a interface CharSequence em vez de Throwable e, portanto, permite filtrar e reduzir o stacktrace armazenado como uma string da mesma maneira que um stacktrace extraído de Throwable.  Portanto, essencialmente os rastreamentos de pilha podem ser filtrados "on the fly" no tempo de execução ou posteriormente de qualquer fonte de texto, como um log.  (Apenas para esclarecer - o utilitário não suporta a análise e modificação de todo o arquivo de log. Ele suporta a filtragem de apenas um rastreamento de pilha que é passado como uma String. Portanto, se alguém quiser filtrar exceções no arquivo de log, precisará analisá-lo. e extraia o (s) rastreamento (s) de pilha como seqüências de caracteres separadas e, em seguida, pode usar esse utilitário para filtrar cada rastreamento de pilha individual). <br><br>  Aqui está um exemplo de uso.  Digamos que a empresa esteja sempre em pacotes que começam com "com.plain. *". Portanto, você define esse prefixo e faz isso <br><br><pre> <code class="java hljs">logger.info(TextUtils.getStacktrace(e,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>));</code> </pre> <br>  isso filtrará de maneira muito inteligente todas as partes inúteis do rastreamento, deixando um rastreamento de pilha muito conciso.  Além disso, achei muito conveniente predefinir o prefixo e usar o método de conveniência <br><br><pre> <code class="java hljs">TextUtils.getStacktrace(e);</code> </pre> <br>  Isso fará o mesmo.  Para predefinir o prefixo, use o método <br><br><pre> <code class="java hljs">setRelevantPackage(<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>);</code> </pre> <br>  Se você desejar predefinir esse valor por configuração, a partir da versão da biblioteca 1.1.0.1, poderá definir a variável de ambiente " <b>MGNT_RELEVANT_PACKAGE</b> " ou a propriedade do sistema " <b>mgnt.relevant.package</b> " para o valor " <i>com.plain</i> " <i>.</i> será definido com esse valor sem você chamar o método <i>TextUtils.setRelevantPackage ("com.plain.");</i>  explicitamente no seu código.  Observe que o valor da propriedade System terá precedência sobre a variável de ambiente se ambas fossem definidas.  Apenas um lembrete de que, com a propriedade System, você pode adicioná-lo na linha de comando usando o sinalizador -D: <br><br>  "-Dmgnt.relevant.package = com.plain." <br><br>  Além disso, se você usar uma versão anterior à 1.1.0.1 desta biblioteca ou não quiser usar a variável de ambiente ou a propriedade do sistema mencionada acima e estiver usando o ambiente Spring, poderá predefinir o prefixo adicionando o seguinte segmento à sua configuração Spring: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.beans.factory.config.MethodInvokingFactoryBean"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.mgnt.utils.TextUtils"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetMethod"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setRelevantPackage"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"arguments"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.plain."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Javadoc explica tudo em detalhes.  Mas aqui está um pequeno teaser: você obterá o seguinte stacktrace: <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() ... at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() ... at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br>  em vez de <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed() at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() at sun.reflect.NativeMethodAccessorImpl.invoke() at sun.reflect.DelegatingMethodAccessorImpl.invoke() at java.lang.reflect.Method.invoke() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod() at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.transaction.interceptor.TransactionInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept() at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br><h3>  Silent String analisando em Inteiro, Longo, etc </h3><br>  A mesma classe <i>TextUtils</i> fornece métodos para analisar String silenciosamente (sem exceção, nunca sendo lançada) em tipos de Duplo, Longo, Inteiro, Curto e Byte.  Os métodos são chamados <i>parseStringToLong ()</i> <i>parseStringToInteger ()</i> etc.  Todos eles recebem 4 argumentos: <br><br><ol><li>  Uma String a ser analisada </li><li>  Uma implementação de Number (Double, Long, Integer, Short ou Byte) para servir como valor padrão se ocorrer algum problema de análise </li><li>  Uma String a ser impressa como uma mensagem de erro no log se o primeiro argumento for nulo (pode ser nulo e, em seguida, nenhum erro é impresso) </li><li>  Uma String a ser impressa como uma mensagem de erro se NumberFormatException ocorreu (pode ser nulo e, em seguida, nenhum erro é impresso) </li></ol><br><h3>  Analisando String para Intervalo de Tempo </h3><br>  Na mesma classe <i>TextUtils</i> , existe um método <i>parseStringToTimeInterval (valor da String)</i> .  Esse método analisa uma sequência que espera manter algum valor de intervalo de tempo - um valor numérico com sufixo opcional da unidade de tempo.  Por exemplo, a sequência "38s" será analisada como 38 segundos, "24m" - 24 minutos "4h" - 4 horas, "3d" - 3 dias e "45" como 45 milissegundos.  Os sufixos suportados são " <b>s</b> " por segundos, " <b>m</b> " por minutos, " <b>h</b> " por horas e " <b>d</b> " por dias.  Considera-se que a sequência sem sufixo contém um valor em milissegundos.  Sufixos não diferenciam maiúsculas de minúsculas.  Se a String fornecida contiver um sufixo não suportado ou manter um valor numérico negativo ou zero ou manter um valor não numérico - IllegalArgumentException será lançada.  Este método retorna a classe TimeInterval - uma classe também definida nesta biblioteca.  Essencialmente, ele possui duas propriedades com getters e setters relevantes: long "value" e java.util.concurrent.TimeUnit.  Mas, além de getters e setters, essa classe possui métodos <i>toMillis ()</i> , <i>toSeconds ()</i> , <i>toMinutes ()</i> , <i>toHours ()</i> <i>toDays ()</i> .  Esses métodos retornam um valor longo na escala de tempo especificada (da mesma maneira que os métodos correspondentes na classe <i>java.util.concurrent.TimeUnit</i> ) <br><br>  Esse método pode ser muito útil para analisar propriedades de intervalo de tempo, como tempos limite ou períodos de espera dos arquivos de configuração.  Elimina cálculos desnecessários de diferentes escalas de tempo para milissegundos e para frente e para trás.  Considere que você possui uma propriedade <b>methodInvokingInterval</b> que precisa definir por 5 dias.  Portanto, para definir o valor em milissegundos, você precisará calcular que 5 dias são 432000000 milissegundos (obviamente, não é uma tarefa impossível, mas irritante e propensa a erros) e qualquer outra pessoa que visualizar o valor 432000000 precisará calculá-lo de volta para 5 dias que é frustrante.  Mas, usando esse método, você terá um valor de propriedade definido como "5d" e invocará o código <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> milliseconds = TextUtils.parsingStringToTimeInterval(<span class="hljs-string"><span class="hljs-string">"5d"</span></span>).toMillis();</code> </pre> <br>  resolverá seu problema de conversão.  Obviamente, esse não é um recurso excessivamente complexo, mas pode adicionar simplicidade e clareza nos arquivos de configuração e salvar algumas frustrações e erros de cálculo "estúpidos" em erros de milissegundos. <br><br><h3>  Compare Versões </h3><br>  Este utilitário permite converter String em versão e vice-versa e comparar versões e intervalos de versões corretamente.  Frequentemente, se você precisar comparar versões, basta comparar Strings.  Então, digamos que a versão "1.5.3" será maior que a versão "1.3.1".  No entanto, se você comparar as Strings "1.4.2" e "1.12.3", a String "1.4.2" será erroneamente maior.  Portanto, este utilitário cuida de um problema desse tipo e, além disso, apresenta a classe VersionRange e permite operações nos intervalos de versão.  (Consulte os métodos <i>compareVersions</i> na classe <i>TextUtils</i> e na classe <i>VersionRange</i> ) <br><br><h3>  Conversor Unicode de cadeia </h3><br>  A classe <i>StringUnicodeEncoderDecoder</i> possui métodos que podem converter uma String (em qualquer idioma) em uma sequência de caracteres Unicode e vice-versa.  Por exemplo, uma string "Hello World" será convertida em <br><br>  "\ u0048 \ u0065 \ u006c \ u006c \ u006f \ u0020 \ u0057 \ u006f \ u0072 \ u006c \ u0064" <br><br>  e pode ser restaurado de volta. <br><br><h3>  Gerenciamento do ciclo de vida (fábricas de instanciação automática) </h3><br>  Esse recurso é um pacote que contém algumas pequenas infraestruturas que simplificam e automatizam o trabalho com Fábricas que fornecem implementações concretas de uma Interface.  O pacote contém apenas 2 classes: <i>BaseEntityFactory</i> e <i>BaseEntity</i> .  Resumindo, o que essa infraestrutura faz é que, se você criar uma fábrica que estende <i>BaseEntityFactory</i> e alguma Interface com todas as suas implementações concretas estendendo <i>BaseEntity</i> , cada uma das instâncias de classe de classe de implementação concreta será automaticamente inserida em sua fábrica.  Você não precisará se preocupar com como e quando preencher sua fábrica.  A infraestrutura fará isso por você quando o construtor de sua classe de implementação concreta for chamado.  Portanto, tudo o que você precisará fazer é criar qualquer número de classes de implementação concretas e garantir que cada construtor seja chamado.  Depois disso, você pode usar sua fábrica para obter qualquer uma das suas classes de implementação concretas em qualquer lugar do seu código.  Esta é uma breve explicação.  Existem mais alguns detalhes, mas não tantos.  Para uma descrição detalhada deste pacote, consulte a API Javadoc da descrição do pacote <b>com.mgnt.lifecycle.management</b> .  Além disso, o código-fonte contém o pacote com.mgnt.lifecycle.management.example que contém um exemplo de código detalhado e bem comentado sobre como usar esse recurso. <br><br>  Quanto ao uso prático, achei muito útil para o framework Spring.  Lembre-se de que o Spring instancia todos os seus grãos definidos durante sua inicialização.  Portanto, dentro do contexto do Spring, se simplesmente declarássemos nossas implementações concretas como beans Spring, o Spring as instanciaria para nós, inicializando sua fábrica automaticamente.  Isso pode ser muito conveniente.  Imagine que você tem algum bean que possui uma propriedade do tipo de interface definida pelo usuário que possui várias implementações, mas qual implementação real seria necessária é determinada em tempo de execução.  Portanto, nesse momento, você pode usar o método <i>getInstance (java.lang.String)</i> da sua fábrica para acessar a implementação necessária.  Isso permitirá que você não injete TODAS as suas instanciações concretas no seu bean e não precisará usar o Spring <i>Bean Factory</i> para acessar um bean definido pelo Spring, pois isso violaria a não intrusão do Spring (o que significa que você pode escrever componentes que não dependem de Primavera).  Além disso, se em algum estágio posterior você precisar adicionar implementações mais concretas, tudo o que você precisará fazer é adicionar suas classes de implementação ao seu código e declará-las como Spring beans.  O resto será feito pela Spring e essa infraestrutura! <br><br><h3>  Utilitários de arquivo </h3><br>  Este utilitário permite ler um arquivo como uma String com ou sem especificar o conjunto de caracteres ou apenas lê-lo como uma matriz de bytes.  Este utilitário usa o pacote nio e os buffers para obter um desempenho mais rápido.  O tamanho máximo do arquivo para este utilitário é 2G. <br><br><h3>  Utilitário de tempo </h3><br>  Este é apenas um método de conveniência único que fornece a mesma funcionalidade que Thread.sleep (), mas é silencioso.  Ou seja, "engole" IterruptedException.  Além disso, são necessários 2 argumentos: hora de dormir e unidade de medida.  Então, ao invés de <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">2000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException ie) { }</code> </pre> <br>  Você pode simplesmente escrever: <br><br><pre> <code class="java hljs">TimeUtils.sleepFor(<span class="hljs-number"><span class="hljs-number">2</span></span>, TimeUnit.SECONDS);</code> </pre> <br>  Eu achei fofo <br><br>  Então é isso.  Sinta-se livre para baixar esta biblioteca.  Ele vem com a licença MIT - uma das licenças mais permissivas que conheço.  O código fonte, o Javadoc e a versão binária estão disponíveis no link acima.  O código foi compilado pelo JDK 8, mas não possui recursos da versão 8.  Ele deve funcionar com o java 7 definitivamente, eu suspeito que ele funcione com o java 6 e até 5, mas não o testei com essas versões.  Sinta-se à vontade para usá-lo como achar melhor, conte para outras pessoas, se quiser, e me mande uma nota para michael_gantman@yahoo.com, se você tiver algum comentário. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480268/">https://habr.com/ru/post/pt480268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480256/index.html">Substituição de arquivo Java</a></li>
<li><a href="../pt480258/index.html">Reagir Native init vs Expo</a></li>
<li><a href="../pt480262/index.html">Java Digest para 14 de dezembro</a></li>
<li><a href="../pt480264/index.html">Retorno da solidariedade: TI e freelancers precisam organizar</a></li>
<li><a href="../pt480266/index.html">A história dos jogos na nuvem</a></li>
<li><a href="../pt480270/index.html">O declínio na popularidade do PHP: não é tão simples?</a></li>
<li><a href="../pt480272/index.html">Inteligência artificial e a complexidade do cérebro humano</a></li>
<li><a href="../pt480274/index.html">Contador de álcool ou Como sobreviver a recepções em buffet</a></li>
<li><a href="../pt480276/index.html">Entrevista: Estratégias de contratação. Parte I</a></li>
<li><a href="../pt480280/index.html">Estudo de segurança do TurboConf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>