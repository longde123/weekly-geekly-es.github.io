<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèª üóìÔ∏è üòò Visualisation de l'analyseur PEG üêÅ üë©üèª‚Äçüé§ üññ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La derni√®re fois, nous avons obtenu un simple g√©n√©rateur d'analyseur PEG. Je vais maintenant montrer ce que fait r√©ellement l'analyseur g√©n√©r√© lors de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Visualisation de l'analyseur PEG</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471866/"><p>  La derni√®re fois, nous avons obtenu un simple g√©n√©rateur d'analyseur PEG.  Je vais maintenant montrer ce que fait r√©ellement l'analyseur g√©n√©r√© lors de l'analyse du programme.  J'ai plong√© dans le monde r√©tro de l'art ASCII, en particulier, une biblioth√®que appel√©e "curses", qui est disponible dans la distribution Python standard pour Linux et Mac, ainsi qu'un module compl√©mentaire pour Windows. </p><br><div class="spoiler">  <b class="spoiler_title">Contenu de la s√©rie Python PEG Parser</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyseurs de cheville</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Impl√©mentation de l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">G√©n√©ration de l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Visualisation de l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Grammaire r√©cursive gauche du PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ajout d'actions √† la grammaire PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">M√©ta grammaire pour l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Impl√©mentation des fonctionnalit√©s restantes de PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PEG sur Core Developer Sprint</a> </li></ul></div></div><br><p><img src="https://habrastorage.org/webt/fr/cj/o-/frcjo-fmvrqbs0ddzsesm--dg2w.png"></p><br><p>  &lt;A la fin de l'article, un gif est donn√© sous le spoiler.  Cela me semblait plus compr√©hensible qu'une image statique&gt; </p><a name="habracut"></a><br><p> Regardons la visualisation.  L'√©cran est divis√© en trois parties, comme c'est la coutume en ASCII, avec une ligne de trait d'union: </p><br><ul><li>  La partie sup√©rieure montre la pile d'appels de l'analyseur, qui, comme vous vous en souvenez, est un analyseur de descente r√©cursif √† retour illimit√©.  Ci-dessous, je vais expliquer plus en d√©tail. </li><li>  La section d'une ligne au milieu montre le contenu du tampon de jeton avec un curseur pointant vers le jeton qui sera analys√© ensuite. </li><li>  Ci-dessous, nous visualisons le cache utilis√© par l'algorithme de l'analyseur packrat.  L'enregistrement de ses √©l√©ments est quelque peu similaire √† certains √©l√©ments de la pile d'analyse (avec des r√©sultats). </li></ul><br><p>  La principale chose que vous devez savoir pour comprendre cette visualisation est que l'indentation des lignes dans les parties sup√©rieure et inf√©rieure correspond au tampon de jeton. </p><br><ul><li> Les deux premi√®res lignes (commen√ßant par l' <code>statement</code> et l' <code>assignment</code> ) montrent les appels aux m√©thodes d'analyseur correspondantes qui effectuent l'analyse en ce moment.  Ils ont √©t√© appel√©s lorsque le pointeur du jeton √©tait avant le premier jeton ( <code>'aap'</code> ). </li><li>  Les deux lignes suivantes (commen√ßant par <code>expr</code> et <code>term</code> ) sont align√©es avec le d√©but du jeton <code>'cat'</code> , o√π les m√©thodes d'analyseur correspondantes ont √©t√© appel√©es. </li><li>  La cinqui√®me et derni√®re ligne de rendu de pile montre l'appel √† <code>expect('/')</code> , qui renvoie <code>None</code> .  Il s'est port√© volontaire au poste de jeton <code>'+'</code> . </li></ul><br><p>  L'indentation des √©l√©ments dans le cache correspond √©galement √† une position dans le tampon de jetons.  Par exemple, en bas, il y a des entr√©es n√©gatives dans le cache, elles ont √©t√© obtenues lors de la recherche du jeton <code>'if'</code> et de la r√®gle <code>if_statement</code> au d√©but du tampon de jeton.  Nous trouvons √©galement des entr√©es de cache r√©ussies pour le jeton <code>'='</code> et pour <code>NAME</code> (en particulier, <code>'cat'</code> ) correspondant √† d'autres positions d'entr√©e. </p><br><p>  Tant dans le bloc de pile de l'analyseur que dans le bloc de cache, les appels retourn√©s sont affich√©s en tant que <code>function(args) -&gt; result</code> .  Parfois, plusieurs m√©thodes renvoy√©es sont affich√©es sur la pile de l'analyseur - J'ai fait cela pour r√©duire la gigue du texte due aux changements de contenu fr√©quents. </p><br><p>  (En parlant de gigue, les lignes sup√©rieures de la pile de l'analyseur montent quand un appel est ajout√© √† la pile et tombent quand il est retir√© de la pile. C'est-√†-dire que chaque nouvel appel est ins√©r√© tout en bas du bloc de visualisation de la pile, d√©pla√ßant les lignes existantes vers le haut. Il me semble que regarder cette partie de l'√©cran n'est pas un probl√®me, du moins pour moi. Probablement, une partie importante de notre cerveau est consacr√©e au suivi des objets en mouvement. :-) </p><br><p>  Le cache est rendu en LRU, avec les √©l√©ments fr√©quemment utilis√©s en haut;  les plus rares descendent sur l'√©cran.  (Le prototype de l'analyseur de packrat que j'ai montr√© dans les articles pr√©c√©dents n'utilise pas LRU, mais c'est probablement une bonne id√©e pour optimiser la consommation de m√©moire.) </p><br><p>  Regardons quelques d√©tails lors du rendu de la pile d'analyse.  Les quatre premi√®res entr√©es correspondent aux m√©thodes de l'analyseur qui sont toujours en cours de traitement, chaque ligne est une ligne de la grammaire.  L'√©l√©ment en surbrillance est celui qui a g√©n√©r√© le prochain d√©fi. </p><br><p>  C'est-√†-dire  √† en juger par la capture d'√©cran, nous sommes sur la deuxi√®me alternative pour la <code>statement</code> , √† savoir la <code>assignment</code> .  Dans cette r√®gle, nous en sommes au troisi√®me point, √† savoir <code>expr</code> .  Dans la r√®gle <code>expr</code> , nous ne sommes qu'au premier paragraphe de la premi√®re alternative ( <code>term '+' expr</code> );  et dans la r√®gle du <code>term</code> nous sommes dans la derni√®re alternative ( <code>atom</code> ). </p><br><p>  Ci-dessous, nous voyons le r√©sultat qui a conduit √† l'√©chec de la deuxi√®me alternative ( <code>atom '/' term</code> ): <code>expect('/') -&gt; None</code> retrait avec le jeton <code>'+'</code> .  Dans l'√©tape suivante, nous verrons comment il p√©n√®tre dans le cache. </p><br><p>  Mais vous pr√©f√©rez s√ªrement voir toute l'animation vous-m√™me! </p><br><div class="spoiler">  <b class="spoiler_title">J'ai enregistr√© une analyse compl√®te du programme d'exemple canonique</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/xi/vm/5g/xivm5g5d640s54ni3urif6qsbl8.gif"></p></div></div><br><p>  Vous pouvez √©galement jouer avec du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code</a> pr√™t √† l'emploi, mais gardez √† l'esprit que ce n'est pas du sport. </p><br><p>  Lorsque vous affichez un <a href="">GIF enregistr√©</a> , il peut sembler un peu √©trange que parfois le prochain jeton ne s'affiche pas (par exemple, au tout d√©but, la pile augmente de plusieurs enregistrements avant que le jeton <code>'aap'</code> soit d√©tect√©).  C'est exactement ce que voit l'analyseur: le tampon de jetons est rempli paresseusement.  Les jetons ne sont analys√©s que lorsque l'analyseur le demande en appelant la fonction <code>expect()</code> .  D√®s que le jeton entre dans le tampon, il y reste, m√™me si l'analyseur rembobine la s√©quence de jetons.  Le suivi inverse est affich√© dans le tampon de jetons avec un curseur qui saute vers la gauche;  il existe de nombreuses situations de ce genre dans le dossier.  Vous pouvez √©galement observer le remplissage du cache lorsque l'analyseur n'effectue pas d'appels r√©cursifs suppl√©mentaires.  (Je dois souligner quand cela se produit, mais je n'ai pas eu assez de temps.) </p><br><p>  La semaine prochaine, je d√©velopperai un analyseur, ajoutant peut-√™tre mon point de vue sur les r√®gles de gauche de la grammaire r√©cursive.  (Ils sont super!) </p><br><p>  Remerciements: pour m√©moire, j'ai utilis√© <code>ttygif</code> d'Ilya Choli et <code>ttyrec</code> de Matthew Jording. </p><br><p>  Licence pour cet article et code cit√©: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CC BY-NC-SA 4.0</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471866/">https://habr.com/ru/post/fr471866/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471856/index.html">Nous r√©solvons les 42 versions du puzzle de potion Harry Potter</a></li>
<li><a href="../fr471858/index.html">RabbitMQ contre Kafka: basculement et haute disponibilit√© dans les clusters</a></li>
<li><a href="../fr471860/index.html">Analyseurs de cheville</a></li>
<li><a href="../fr471862/index.html">Impl√©mentation de l'analyseur PEG</a></li>
<li><a href="../fr471864/index.html">G√©n√©ration de l'analyseur PEG</a></li>
<li><a href="../fr471868/index.html">G√©n√©tique de l'amour: le conflit entre les sexes comme base de coop√©ration dans des couples d'oiseaux monogames</a></li>
<li><a href="../fr471872/index.html">Interfaces en C # 8: hypoth√®ses dangereuses dans l'impl√©mentation par d√©faut</a></li>
<li><a href="../fr471874/index.html">Comment nous avons contourn√© les directives d'examen et lanc√© un serveur par t√©l√©phone</a></li>
<li><a href="../fr471876/index.html">PDU et All-All-All: distribution d'alimentation en rack</a></li>
<li><a href="../fr471880/index.html">Id√©e pour Geek Halloween, ou le temps de choisir GeekMask</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>