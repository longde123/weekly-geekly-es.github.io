<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëù ü•ë üïé Die ganze Welt in der Tasche oder wie man in ein paar Tagen eine Handykarte macht ü§±üèª ü§± üëº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem fr√ºheren Artikel habe ich dar√ºber gesprochen, wie man schnell einen Web-Dialer erstellt. Aber was ist, wenn Sie sich eine ehrgeizigere Aufgab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die ganze Welt in der Tasche oder wie man in ein paar Tagen eine Handykarte macht</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/2gis/blog/453182/"><img src="https://habrastorage.org/webt/a7/rk/wq/a7rkwqzwhfuc8lhtdpm1egxuwmm.jpeg"><br><p><br>  In einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fr√ºheren Artikel habe</a> ich dar√ºber gesprochen, wie man schnell einen Web-Dialer erstellt.  Aber was ist, wenn Sie sich eine ehrgeizigere Aufgabe stellen - Ihre eigene Anwendung mit einer Karte, ohne Werbung und mit Blackjack zusammenzustellen?  Und wenn in nur wenigen Tagen? </p><br><p>  Lass es uns tun!  Ich frage nach Katze. </p><a name="habracut"></a><br><p>  Lassen Sie uns zun√§chst herausfinden, was wir tun m√ºssen.  Am Ausgang m√∂chten wir eine Anwendung mit Referenzdaten und einer Karte erhalten.  Und offline arbeiten.  Als Entwickler interessiert mich vor allem nur die Karte, da wir bereits wissen, wie Referenzdaten angezeigt werden.  Und offline ist in diesem Fall eine ziemlich starke Einschr√§nkung, da es nicht viele gute Bibliotheken mit Offline-Unterst√ºtzung gibt.  Daher konzentrieren wir uns im Artikel auf die Karte, aber lassen Sie uns nebenbei √ºber den Leitfaden sprechen. </p><br><h2 id="vybiraem-dvizhok-karty">  W√§hlen Sie eine Karten-Engine </h2><br><p>  Als erstes m√ºssen Sie die Daten f√ºr die Anwendung abrufen.  Es gibt viele Quellen auf dem Markt, kostenlos und nicht sehr.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenStreetMap</a> eignet sich f√ºr uns zun√§chst als Open Source f√ºr Kartendaten.  Dort k√∂nnen Sie eine bestimmte Anzahl von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">POIs</a> f√ºr unser Verzeichnis nehmen. </p><br><p>  Der n√§chste Schritt ist die Auswahl einer Karten-Engine.  Im Internet gibt es einige davon, noch weniger kostenlose, und mit Offline-Unterst√ºtzung im Allgemeinen gibt es nur wenige.  Ich schlage vor, eine ziemlich coole Option zu verwenden - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mapsforge / vtm</a> .  Dies ist eine Vektor-OpenGL-Engine, die sehr schnell ist und Offline-, Android-, iOS-, verschiedene Datenquellen, benutzerdefiniertes Styling, Overlays, Marker, 3D- und sogar 3D-Modelle von Objekten unterst√ºtzt!  Sehr sehr cool. </p><br><p>  Das Repository enth√§lt viele Beispiele f√ºr den Schnellstart. Es gibt vorgefertigte Karten und ein Plug-In, mit dem Sie Ihre eigene Karte aus Daten im OSM-Format zusammenstellen k√∂nnen.  Also, fangen wir an! </p><br><pre><code class="java hljs">MapView mapView = findViewById(R.id.map_view); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map = mapView.map(); File baseMapFile = getMapFile(<span class="hljs-string"><span class="hljs-string">"cyprus.map"</span></span>); MapFileTileSource tileSource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MapFileTileSource(); tileSource.setMapFile(baseMapFile.getAbsolutePath()); VectorTileLayer layer = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.setBaseMap(tileSource); MapInfo info = tileSource.getMapInfo(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { MapPosition pos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MapPosition(); pos.setByBoundingBox(info.boundingBox, Tile.SIZE * <span class="hljs-number"><span class="hljs-number">4</span></span>, Tile.SIZE * <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.setMapPosition(pos); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.setTheme(VtmThemes.DEFAULT); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.layers().add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BuildingLayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map, layer)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.layers().add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LabelLayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map, layer));</code> </pre> <br><p>  Erstellen Sie eine MapFileTileSource-Datenquelle und geben Sie den Speicherort der Kartendatei an.  Dar√ºber hinaus positionieren wir uns in der Mitte des Begrenzungsrahmens, der uns interessiert, um beim Start der Anwendung nicht au√üerhalb des ausgew√§hlten Speicherorts zu sein.  Installieren Sie das Standarddesign.  F√ºgen Sie eine Schicht H√§user und eine Schicht Signaturen hinzu.  Das ist alles  Wir starten - Wunder! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/id/lw/c5/idlwc5xexfimjwcgh6lvug6ncna.png" width="375" height="667"></div><br><p>  Es scheint schneller und einfacher und k√∂nnte nicht sein. </p><br><h2 id="delaem-geokoding">  Wir machen Geokodierung </h2><br><p>  Der n√§chste wichtige Schritt ist die Implementierung der Geokodierung.  Die Karte selbst ist bereits gut, aber Interaktivit√§t ist erforderlich.  Wir m√∂chten auf die Karte tippen und Informationen zu dem Objekt sehen, das wir getroffen haben.  Und es gibt einige Schwierigkeiten.  Im Gro√üen und Ganzen gibt es in unserer Bibliothek keine vollst√§ndige Geokodierung.  Dies ist vielleicht das gr√∂√üte Minus.  Wenn nichts erfunden wird, k√∂nnen wir die vorhandene Funktionalit√§t nutzen. </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//          float touchRadius = TOUCH_RADIUS * CanvasAdapter.getScale(); long mapSize = MercatorProjection.getMapSize((byte) mMap.getMapPosition().getZoomLevel()); double pixelX = MercatorProjection.longitudeToPixelX(p.getLongitude(), mapSize); double pixelY = MercatorProjection.latitudeToPixelY(p.getLatitude(), mapSize); int tileXMin = MercatorProjection.pixelXToTileX(pixelX - touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); int tileXMax = MercatorProjection.pixelXToTileX(pixelX + touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); int tileYMin = MercatorProjection.pixelYToTileY(pixelY - touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); int tileYMax = MercatorProjection.pixelYToTileY(pixelY + touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); Tile upperLeft = new Tile(tileXMin, tileYMin, (byte) mMap.getMapPosition().getZoomLevel()); Tile lowerRight = new Tile(tileXMax, tileYMax, (byte) mMap.getMapPosition().getZoomLevel()); //   ,        MapDatabase mapDatabase = ((MapDatabase) ((OverzoomTileDataSource) tileSource.getDataSource()).getDataSource()); MapReadResult mapReadResult = mapDatabase.readLabels(upperLeft, lowerRight); StringBuilder sb = new StringBuilder(); //   POI     sb.append("*** POI ***"); for (PointOfInterest pointOfInterest : mapReadResult.pointOfInterests) { Point layerXY = new Point(); mMap.viewport().toScreenPoint(pointOfInterest.position, false, layerXY); Point tapXY = new Point(e.getX(), e.getY()); if (layerXY.distance(tapXY) &gt; touchRadius) { continue; } sb.append("\n"); List&lt;Tag&gt; tags = pointOfInterest.tags; for (Tag tag : tags) { sb.append("\n").append(tag.key).append("=").append(tag.value); } } //  ,     sb.append("\n\n").append("*** WAYS ***"); for (Way way : mapReadResult.ways) { if (way.geometryType != GeometryBuffer.GeometryType.POLY || !GeoPointUtils.contains(way.geoPoints[0], p)) { continue; } sb.append("\n"); List&lt;Tag&gt; tags = way.tags; for (Tag tag : tags) { sb.append("\n").append(tag.key).append("=").append(tag.value); } }</span></span></code> </pre> <br><p>  Es stellte sich als relativ ausf√ºhrlich heraus.  Sie m√ºssen eine Kachel finden, Wege finden (in der OSM-Terminologie ist dies ein lineares Objekt) und einige Attribute daraus extrahieren.  Zus√§tzlich zu den M√∂glichkeiten ist es m√∂glich, einen POI zu erhalten, aber das ist alles.  Sie m√ºssen den Rest der Logik selbst erledigen: W√§hlen Sie aus dem gesamten Objektsatz, den der Klick getroffen hat, das ‚ÄûRichtige‚Äú aus und filtern Sie nach Zoomstufen.  Und noch etwas.  Tats√§chlich verlieren wir Informationen √ºber die urspr√ºngliche Geometrie und erhalten als Antwort auf eine Suche nur eine Reihe von Linien.  Wenn Sie auch einen Geo-Editor erstellen m√∂chten, reicht dies nat√ºrlich nicht aus. </p><br><p>  Aber um den Ansatz zu demonstrieren, passt alles zu uns. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p9/9t/m_/p99tm_xdj7tdnnjewpzovvsmqjm.png" width="375" height="667"></div><br><p><br></p><br><h2 id="prodvinutyy-geokoding">  Erweiterte Geokodierung </h2><br><p>  Im Allgemeinen gibt es eine erweiterte Option.  Daf√ºr brauchen wir unsere eigene Basis.  Insbesondere k√∂nnen Sie SQLite verwenden.  Es stimmt, Standard-SQLite wird uns nicht ausreichen, und wir m√ºssen unser eigenes erstellen, indem wir das RTree-Plugin f√ºr die Geosuche damit verbinden.  Wie das geht, habe ich bereits im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> im Abschnitt "Gute Suche" erkl√§rt. <br>  In diesem Fall haben wir die volle Kontrolle √ºber die Daten, k√∂nnen alles Notwendige und im richtigen Format speichern.  Wir k√∂nnen auch die Volltextsuche beschleunigen und nach unseren Geoobjekten und Unternehmen nach Name, Adresse und anderen Attributen suchen. </p><br><p>  Die Richtung ist: </p><br><ol><li>  Wir machen Tabellen: <br><ul><li>  Geoobjekte (ID, Typ, Geometrie, Attribute) </li><li>  Firmen (ID, Attribute, geo_id) in Bezug auf die Geometrie des Geb√§udes, in dem es sich befindet </li><li>  rtree <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">geoindex</a> wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">folgt</a> : <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VIRTUAL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> geo_index <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> rtree( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, <span class="hljs-comment"><span class="hljs-comment">-- Integer primary key minX, maxX, -- Minimum and maximum X coordinate minY, maxY -- Minimum and maximum Y coordinate );</span></span></code> </pre> </li></ul></li><li>  Wir f√ºllen alles mit Daten. </li><li>  Wenn Sie auf die Karte tippen, erhalten wir GeoPoint und f√ºhren die Anforderung aus: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> geo_index <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> minX&gt;=<span class="hljs-number"><span class="hljs-number">-81.08</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> maxX&lt;=<span class="hljs-number"><span class="hljs-number">-80.58</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> minY&gt;=<span class="hljs-number"><span class="hljs-number">35.00</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> maxY&lt;=<span class="hljs-number"><span class="hljs-number">35.44</span></span></code> </pre> </li><li>  Letzter Schritt: Filtern und w√§hlen Sie das entsprechende Objekt aus. </li></ol><br><p>  Eine der Implementierungsoptionen kann im <a href="">Repository</a> angezeigt werden. </p><br><p>  Daher wissen wir bereits, wie die Karte angezeigt und Klicks verarbeitet werden.  Nicht schlecht. </p><br><h2 id="dobavlyaem-vazhnye-melochi">  F√ºgen Sie wichtige Kleinigkeiten hinzu. </h2><br><p>  F√ºgen wir einige wichtige Funktionen hinzu. </p><br><p>  Beginnen wir mit dem aktuellen Standort.  In mapsforge / vtm gibt es daf√ºr nur ein besonderes.  LocationLayer-Ebene.  Die Bedienung ist sehr einfach. </p><br><pre> <code class="java hljs">LocationLayer locationLayer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LocationLayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map); locationLayer.setEnabled(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">//       , ,     GPS GeoPoint initialGeoPoint = this.map.getMapPosition().getGeoPoint(); locationLayer.setPosition(initialGeoPoint.getLatitude(), initialGeoPoint.getLongitude(), 1); this.map.layers().add(locationLayer);</span></span></code> </pre> <br><p>  Es gibt nur einen Nachteil: Es ist die konstante Welligkeit des ‚Äûblauen Punkts‚Äú am Bildschirmrand, wenn sich der aktuelle Standort au√üerhalb der Karte befindet.  Wahrscheinlich werden Sie sich im Verlauf des Gebrauchs selten in einer solchen Situation befinden, aber dies f√ºhrt zu einem st√§ndigen erneuten Rendern, dementsprechend wird der Prozessor ein wenig belastet.  Um dies zu beseitigen, ist es etwas schwieriger, in den Shader zu gelangen und ihn zu reparieren.  Aber das ist schon f√ºr Perfektionisten.  Wie es geht - sehen Sie <a href="">hier</a> . </p><br><p>  Die Position ist also.  Wie bei allen Mapping-Anwendungen mit Selbstachtung ist es an der Zeit, die Navigationsschaltfl√§che an der aktuellen Position hinzuzuf√ºgen. </p><br><pre> <code class="java hljs">View vLocation = findViewById(R.id.am_location); vLocation.setOnClickListener(v -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateTo(initialGeoPoint));</code> </pre> <br><p>  Wir brauchen auch die Zoomtasten. </p><br><pre> <code class="javascript hljs">View vZoomIn = findViewById(R.id.am_zoom_in); vZoomIn.setOnClickListener(v -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateZoom(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); View vZoomOut = findViewById(R.id.am_zoom_out); vZoomOut.setOnClickListener(v -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateZoom(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>));</code> </pre><br><p>  Und die Kirsche auf dem Kuchen ist ein Kompass. </p><br><pre> <code class="javascript hljs">View vCompass = findViewById(R.id.am_compass); vCompass.setVisibility(View.GONE); vCompass.setOnClickListener(v -&gt; { MapPosition mapPosition = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.getMapPosition(); mapPosition.setBearing(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateTo(<span class="hljs-number"><span class="hljs-number">500</span></span>, mapPosition); vCompass.animate().setListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animator.AnimatorListener() { @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationStart(Animator animation) { } @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationEnd(Animator animation) { vCompass.setVisibility(View.GONE); } @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationCancel(Animator animation) { } @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationRepeat(Animator animation) { } }).setDuration(<span class="hljs-number"><span class="hljs-number">500</span></span>).rotation(<span class="hljs-number"><span class="hljs-number">0</span></span>).start(); }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.events.bind((e, mapPosition) -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e == <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>.ROTATE_EVENT) { vCompass.setRotation(mapPosition.getBearing()); vCompass.setVisibility(View.VISIBLE); } });</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lw/hp/cq/lwhpcqipt5bo-nirjiiz676gpo8.png" width="375" height="667"></div><br><p><br></p><br><h2 id="zahvatyvaem-mir">  Die Welt einfangen </h2><br><p>  Freunde, wir sind am Ziel.  Es bleibt der letzte Schliff hinzuzuf√ºgen.  Wir planen, die Welt einzufangen, was bedeutet, dass wir sie irgendwie in unsere Anwendung packen m√ºssen. </p><br><p>  Und die Dinge sind so, dass es mit unserem Motor viel einfacher ist, als es sich anh√∂rt. <br>  Wir m√ºssen die Methode zum Laden der Karte leicht √§ndern, indem wir eine MultyMapTileSource hinzuf√ºgen.  Dies ist im Wesentlichen ein Wrapper f√ºr alle anderen Kachelquellen, mit dem Sie alles, was hinzugef√ºgt wurde, auf der Karte gleichzeitig anzeigen k√∂nnen.  Nur ein Killer-Feature.  Daher bleibt es uns √ºberlassen, eine Weltkarte mit minimalen Details zu erstellen, sie zuerst in unseren Umschlag zu legen und den Rest darauf zu zeichnen.  Au√üerdem k√∂nnen wir sofort alle Karten, die wir im Katalog haben, mit Karten der Anwendung hinzuf√ºgen!  Wundersch√∂n, einfach wundersch√∂n.  Und vergiss nicht, dass es offline ist :) </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  - MultiMapFileTileSource mmtilesource = new MultiMapFileTileSource(); File baseMapFile = getMapFile("cyprus.map"); MapFileTileSource tileSource = new MapFileTileSource(); tileSource.setMapFile(baseMapFile.getAbsolutePath()); mmtilesource.add(tileSource); //     MultiMapFileTileSource MapFileTileSource worldTileSource = new MapFileTileSource(); File worldMapFile = getMapFile("world.map"); worldTileSource.setMapFile(worldMapFile.getAbsolutePath()); mmtilesource.add(worldTileSource); //      - VectorTileLayer layer = this.map.setBaseMap(mmtilesource);</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/9pdshe1mg7Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Vielleicht sind wir bereit f√ºr die Ver√∂ffentlichung.  Wir sammeln den Build, bringen ihn auf den Markt und bekommen die verdienten Sterne :) </p><br><h2 id="para-lozhek-dyogtya-v-ogromnoy-bochke-myoda">  Ein paar L√∂ffel Teer in einem riesigen Fass Honig </h2><br><p>  Die Open-Source-Engine entwickelt sich aktiv weiter, aber sein Team ist ehrlich gesagt eher bescheiden.  Im Gro√üen und Ganzen ist dies eine Person unter dem Namen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">devemux86</a> .  Und von Zeit zu Zeit noch ein paar Leute. </p><br><p>  Manchmal gibt es Artefakte im Rendering, einige blinken und zucken.  Aber ich bin nie auf kritische Probleme und umso mehr Abst√ºrze gesto√üen, die sich nur freuen k√∂nnen. </p><br><p>  Es gibt noch eine Nuance, die m√∂glicherweise nicht angenehm ist.  Dies ist eine Zeichnung von Filets und Kreisen.  Ein Beispiel daf√ºr, wie dies im Screenshot aussieht: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/37/lo/qc37lomxbxd2ln7r_2zngp6repo.png" width="375" height="667"></div><br><p><br></p><br><p>  Wenn es in der anf√§nglichen Geometrie viele Punkte gibt (die Rundung ist glatt), sehen Sie auf der Karte einen eher ‚Äûeckigen‚Äú Kreis mit vielen kleinen Ausbuchtungen und Konkavit√§ten.  Dies geschieht nat√ºrlich aus Gr√ºnden der Leistung und der Gr√∂√üe der Kartendatei, sieht aber nicht sehr gut aus. </p><br><p>  Vielleicht ist dies der Nachteil f√ºr heute.  Sie entscheiden, ob Sie mit ihnen leben k√∂nnen oder nicht.  Mittlerweile nutzen wir diese Bibliothek seit mehr als 1,5 Jahren, der Flug ist zumindest unter Android hervorragend. </p><br><h2 id="itogi">  Zusammenfassung </h2><br><p>  In diesem Artikel habe ich gezeigt, dass selbst ein solches eher nicht triviales Problem relativ schnell gel√∂st werden kann.  Sie haben ein fertiges Skelett erhalten, mit dem Sie jedes Projekt, bei dem eine Offline-Karte verwendet wird, in k√ºrzester Zeit prototypisieren k√∂nnen. </p><br><p>  Bei Interesse werde ich im n√§chsten Artikel zeigen, wie man Fu√üb√∂den a la 2GIS macht.  Und das ist tats√§chlich viel einfacher als es scheint :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de453182/">https://habr.com/ru/post/de453182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de453168/index.html">Forschung: Erstellen eines blockierenden Proxy-Dienstes mithilfe der Spieltheorie</a></li>
<li><a href="../de453170/index.html">Brainstorming: Wie man Aufgaben aus einem anderen Blickwinkel betrachtet</a></li>
<li><a href="../de453174/index.html">Acht Gr√ºnde f√ºr den Wechsel zur neuen Yandex. Cashier API</a></li>
<li><a href="../de453178/index.html">Die Hauptkompetenz des Entwicklers, der Ihren Code verbessern wird</a></li>
<li><a href="../de453180/index.html">Wie kann man eine verteilte papierlose viertelj√§hrliche Planung durchf√ºhren und nicht vermasseln?</a></li>
<li><a href="../de453188/index.html">Erkl√§ren von Nicht-IT-Managern die Prinzipien des Aufbaus einer fehlertoleranten IT-Infrastruktur</a></li>
<li><a href="../de453190/index.html">ANPR mit RoR & React Native</a></li>
<li><a href="../de453192/index.html">Synchronisation und Asynchronit√§t von Prozessen</a></li>
<li><a href="../de453194/index.html">Wir l√∂sen das Best Reverser-Problem mit PHDays 9</a></li>
<li><a href="../de453196/index.html">Forrester Research: Ein Vergleich von zehn f√ºhrenden Anbietern von Software-Zusammensetzungsanalysen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>