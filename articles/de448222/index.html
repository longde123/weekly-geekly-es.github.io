<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüîß üë®‚Äç‚öñÔ∏è üñïüèª GPU, hexagonale Beschleuniger und lineare Algebra üë©üèø‚Äç‚öïÔ∏è üöù üë©‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All diese W√∂rter h√§ngen viel mehr mit der mobilen Entwicklung zusammen, als es auf den ersten Blick scheint: Sechseckige Beschleuniger helfen bereits ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GPU, hexagonale Beschleuniger und lineare Algebra</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/448222/"> All diese W√∂rter h√§ngen viel mehr mit der mobilen Entwicklung zusammen, als es auf den ersten Blick scheint: Sechseckige Beschleuniger helfen bereits dabei, neuronale Netze auf mobilen Ger√§ten zu trainieren.  Algebra und Matan sind praktisch, um einen Job bei Apple zu bekommen.  Mit der GPU-Programmierung k√∂nnen Sie nicht nur Anwendungen beschleunigen, sondern auch die Essenz der Dinge erkennen. <br><br>  Auf jeden Fall, sagt der Leiter der mobilen Entwicklung von Prisma, <b>Andrey Volodin</b> .  Und auch dar√ºber, wie Ideen von GameDev in die mobile Entwicklung einflie√üen, wie sich Paradigmen unterscheiden, warum Android keine native Unsch√§rfe aufweist - und vieles mehr, die produktive Version von AppsCast wurde ver√∂ffentlicht.  Im Rahmen des Schnitts werden wir √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Andreys</a> Bericht √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AppsConf</a> ohne Spoiler sprechen. <br><br><img src="https://habrastorage.org/webt/0q/af/fk/0qaffkk1onyogn5werp4i1_rcxg.jpeg"><br><a name="habracut"></a><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AppsCast</a> ist der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PodCon f√ºr</a> mobile Entwicklerkonferenzen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AppsConf</a> .</i>  <i>Jede Ausgabe ist ein neuer Gast.</i>  <i>Jeder Gast ist ein Sprecher der Konferenz, mit dem wir seinen Bericht diskutieren und √ºber damit verbundene Themen sprechen.</i>  <i>Der Podcast wird von Mitgliedern des AppsConf-Programmkomitees, Alexei Kudryavtsev und Daniil Popov, moderiert.</i> <br><br>  <strong>Alexey Kudryavtsev:</strong> Hallo allerseits!  Andrey, bitte erz√§hl uns von deinen Erfahrungen. <br><br>  <b>Andrey Volodin</b> : Wir bei Prisma entwickeln Produkte, die sich haupts√§chlich auf die Verarbeitung von Fotos und Videos beziehen.  Unsere Flaggschiff-App ist Prisma.  Jetzt erstellen wir eine weitere Lensa-Anwendung f√ºr Facetune-√§hnliche Funktionen. <br><br>  Ich leite die mobile Entwicklung, bin aber ein Gaming-Coach.  Ich habe den ganzen Kernteil, ich schreibe GPU-Pipelines f√ºr all diese Anwendungen.  Ich entwickle Kern-Frameworks, damit die vom Forschungs- und Entwicklungsteam entwickelten Algorithmen und Neuronen auf Mobilger√§ten in Echtzeit ausgef√ºhrt werden k√∂nnen.  Kurz gesagt, um Server-Computing und all das zu t√∂ten. <br><br>  <b>Alexei Kudryavtsev:</b> Es klingt nicht nach normaler iOS-Entwicklung. <br><br>  <b>Andrey Volodin:</b> Ja, ich habe solche Besonderheiten - ich schreibe jeden Tag √ºber Swift, aber gleichzeitig ist es sehr weit von der iOS-Entwicklung entfernt. <br><br>  <b>Daniil Popov:</b> Sie haben die GPU-Pipelines erw√§hnt. Worum geht es? <br><br>  <b>Andrey Volodin:</b> Wenn Sie Bildbearbeitungsprogramme erstellen, m√ºssen Sie auch die Architektur konfigurieren und die Logik zerlegen, da die Anwendung √ºber verschiedene Tools verf√ºgt.  In Lensa gibt es beispielsweise ein Bokeh-Tool, das den Hintergrund mithilfe eines Neurons verwischt. Es gibt ein Retuschier-Tool, das eine Person sch√∂ner macht.  All dies muss effizienter auf der GPU funktionieren.  Dar√ºber hinaus ist es ratsam, nicht jedes Mal Daten zwischen dem Prozessor und der Grafikkarte zu √ºbertragen, sondern eine Reihe von Vorg√§ngen vorab zu erstellen, diese in einem Durchgang auszuf√ºhren und dem Benutzer das Endergebnis anzuzeigen. <br><br>  GPU-Pipelines sind ‚Äûkleine Klumpen‚Äú, aus denen Anweisungen f√ºr eine Grafikkarte zusammengesetzt werden.  Dann macht sie das alles sehr schnell und effizient, und Sie nehmen das Ergebnis auf einmal und nicht nach jedem Instrument.  Ich stelle sicher, dass unsere GPU-Pipelines so schnell wie m√∂glich, effizient und im Allgemeinen im Prinzip vorhanden sind. <br><br>  <b>Alexey Kudryavtsev:</b> Sag mir, wie bist du dazu gekommen?  Ein normaler iOS-Entwickler beginnt mit Nieten und Formen, geht dann irgendwo √ºber die API und ist gl√ºcklich.  Wie kam es, dass Sie etwas v√∂llig anderes machen? <br><br>  <b>Andrey Volodin:</b> Zum gr√∂√üten Teil ist dies ein Zufall.  Bevor ich einen Job bekam, habe ich Spiele f√ºr iOS gemacht.  Es war immer interessant f√ºr mich, aber ich habe verstanden, dass es in Russland besonders nirgendwo gibt, wo man sich in diese Richtung entwickeln kann.  So kam es, dass wir uns mit Prisma fanden.  Sie brauchten einen iOS-Entwickler, der auf Swift schreiben kann und gleichzeitig die GPU kennt, insbesondere Metal, die gerade herauskam, und ich passe definitiv zu dieser Beschreibung. <br><br>  Ich habe auf die Stelle geantwortet, wir hatten Synergien und seit dem dritten Jahr besch√§ftige ich mich immer tiefer mit dieser Sache.  Wenn jetzt etwas schief geht, habe ich bereits alle diese Viper- und MVVMs - ich wei√ü nicht einmal, wie sie entschl√ºsselt werden - muss ich von Anfang an verstehen. <br><br><h2>  Was macht der GPU-Ingenieur? </h2><br>  <b>Daniil Popov: In</b> Ihrem AppsConf- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Profil</a> steht die Engineer-GPU.  Was macht die Engineer GPU den gr√∂√üten Teil des Tages au√üer Kaffee zu trinken? <br><br>  <b>Andrey Volodin:</b> Hier muss erw√§hnt werden, wie sich der Prozessor grundlegend von der GPU unterscheidet.  Der Prozessor f√ºhrt Operationen wie nacheinander aus.  Sogar das Multithreading, das wir haben, ist oft falsch: Der Prozessor stoppt und wechselt, um kleine Teile verschiedener Aufgaben zu erstellen, und f√ºhrt sie in wenigen Schritten aus.  Die GPU funktioniert genau umgekehrt.  Es gibt n Prozessoren, die wirklich parallel arbeiten, und es gibt Parallelit√§t zwischen Prozessen und Parallelit√§t innerhalb der GPU. <br><br>  Meine Hauptaufgabe besteht neben allt√§glichen Dingen wie der Optimierung von Speicheroperationen und der Organisation der Wiederverwendung von Code darin, die f√ºr die CPU geschriebenen Algorithmen so auf die Grafikkarten zu portieren, dass sie parallel sind.  Dies ist nicht immer eine triviale Aufgabe, da es sehr effiziente Algorithmen gibt, die vollst√§ndig an die sequentielle Ausf√ºhrung von Anweisungen gebunden sind.  Meine Aufgabe ist es, zum Beispiel eine Ann√§herung f√ºr einen solchen Algorithmus zu finden, der vielleicht nicht genau dasselbe tut, aber visuell kann das Ergebnis nicht unterschieden werden.  So k√∂nnen wir 100-mal beschleunigen, was die Qualit√§t ein wenig beeintr√§chtigt. <br><br>  Ich portiere auch Neuronen.  √úbrigens werden wir bald eine gro√üe Open Source-Ver√∂ffentlichung ver√∂ffentlichen.  Noch bevor Core ML erschien, hatten wir unser eigenes Gegenst√ºck und sind schlie√ülich gereift, um es in Open Source zu integrieren.  Sein Paradigma unterscheidet sich geringf√ºgig von Core ML.  Ich, einschlie√ülich, entwickle seinen Kernteil. <br><br>  Im Allgemeinen mache ich alles rund um Computer Vision-Algorithmen und Computing. <br><br>  <b>Alexey Kudryavtsev:</b> Eine interessante Ank√ºndigung. <br><br>  <b>Andrey Volodin:</b> Dies ist kein Geheimnis, wir werden es nicht mit einer Art Fanfare bekannt geben, nur wird es m√∂glich sein, ein Beispiel f√ºr die Frameworks zu sehen, die in Prisma verwendet werden. <br><br><h2>  Warum f√ºr GPU optimieren </h2><br>  <b>Alexei Kudryavtsev:</b> Sagen Sie mir bitte, warum wir Algorithmen f√ºr die GPU im Allgemeinen optimieren.  Es scheint, dass es ausreicht, dem Prozessor Kerne hinzuzuf√ºgen oder den Algorithmus zu optimieren.  Warum genau die GPU? <br><br>  <b>Andrey Volodin: Die</b> Arbeit an der GPU kann die Algorithmen enorm beschleunigen.  Zum Beispiel haben wir Neuronen, die 30 Sekunden lang auf dem Samsung S10-Zentralprozessor laufen, und auf der GPU gibt es 1 Frame, d. H. 1/60 Sekunden.  Dies ver√§ndert die Benutzererfahrung unglaublich.  Es gibt keinen ewigen Ladebildschirm. Sie k√∂nnen das Ergebnis des Algorithmus sehen, der am Videostream arbeitet, oder den Schieberegler drehen und die Effekte genau dort sehen. <br><br><blockquote>  Es ist √ºberhaupt nicht so, dass wir zu cool sind, um auf die CPU zu schreiben, also schreiben wir alles auf der GPU neu.  Die Verwendung einer GPU hat ein transparentes Ziel - die Beschleunigung. </blockquote><br>  <b>Alexei Kudryavtsev: Die</b> GPU verarbeitet √§hnliche Vorg√§nge gut parallel.  Haben Sie genau solche Operationen und schaffen es daher, einen solchen Erfolg zu erzielen? <br><br>  <b>Andrey Volodin:</b> Ja, die Hauptschwierigkeit besteht nicht darin, zu codieren, sondern solche Algorithmen zu erstellen, die gut auf die GPU √ºbertragen werden.  Dies ist nicht immer trivial.  Es kommt vor, dass Sie herausgefunden haben, wie man alles cool macht, aber daf√ºr ben√∂tigen Sie zu viele Synchronisationspunkte.  Zum Beispiel schreiben Sie alles in eine Eigenschaft, und dies ist ein klares Zeichen daf√ºr, dass es schlecht parallel ist.  Wenn Sie viel an einer Stelle schreiben, m√ºssen alle Threads daf√ºr synchronisiert werden.  Unsere Aufgabe ist es, die Algorithmen so zu approximieren, dass sie gut parallel sind. <br><br>  <b>Alexei Kudryavtsev:</b> F√ºr mich als Entwickler von Mobilger√§ten klingt das nach Raketenwissenschaft. <br><br>  <b>Andrey Volodin:</b> Eigentlich ist es nicht so schwierig.  Raketenwissenschaft ist f√ºr mich VIPER. <br><br><h2>  Dritter Chip </h2><br>  <b>Daniil Popov:</b> Es scheint, dass sie auf der letzten Google I / O-Konferenz ein St√ºck Eisen f√ºr TensorFlow und andere Dinge angek√ºndigt haben.  Wann wird der dritte Chip endlich in Mobiltelefonen, TPU oder wie hei√üt er, was wird auch die ganze ML-Magie auf dem Ger√§t bewirken? <br><br>  <b>Andrey Volodin:</b> Wir haben genau das, es verbindet sich √ºber USB und Sie k√∂nnen Neuronen von Google darauf steuern.  Huawei hat dies bereits, wir haben sogar Software f√ºr ihre hexagonalen Beschleuniger geschrieben, damit Segmentierungsneuronen den P20 schnell verfolgen w√ºrden. <br><br>  Ich muss sagen, dass sie im iPhone tats√§chlich schon existieren.  Im neuesten iPhone XS gibt es beispielsweise einen Coprozessor namens NPU (Neural Processing Unit), auf den bisher nur Apple Zugriff hat.  Dieser Coprozessor schneidet bereits die GPU im iPhone.  Einige Core ML-Modelle verwenden NPUs und sind daher schneller als Bare Metal. <br><br>  Dies ist insofern von Bedeutung, als Core ML zus√§tzlich zu den Neuronen mit der niedrigsten Inferenz viele zus√§tzliche Ma√ünahmen erfordert.  Zuerst m√ºssen Sie die Eingabedaten in das Core ML-Format konvertieren, sie werden verarbeitet und dann in ihrem Format zur√ºckgegeben. Sie m√ºssen sie zur√ºckkonvertieren und erst dann dem Benutzer anzeigen.  Das alles dauert einige Zeit.  Wir schreiben Overhead-freie Pipelines, die von Anfang bis Ende auf der GPU funktionieren, w√§hrend Core ML-Modelle gerade aufgrund dieses Hardwareprozesses schneller sind. <br><br><blockquote>  H√∂chstwahrscheinlich werden sie auf der WWDC im Juni einen Rahmen f√ºr die Zusammenarbeit mit der NPU zeigen. </blockquote><br>  Das hei√üt, wie Sie sagten, gibt es bereits Ger√§te, nur Entwickler k√∂nnen sie noch nicht vollst√§ndig nutzen.  Meine Hypothese ist, dass Unternehmen selbst noch nicht verstehen, wie dies in Form eines Frameworks sorgf√§ltig zu tun ist.  Oder sie wollen einfach nicht verschenken, um einen Marktvorteil zu haben. <br><br>  <b>Alexei Kudryavtsev:</b> Mit dem Fingerabdruckscanner war das gleiche im IPhone, wie ich mich erinnere. <br><br>  <b>Andrey Volodin:</b> Er ist auch jetzt noch nicht so erschwinglich.  Sie k√∂nnen es auf h√∂chster Ebene verwenden, aber Sie k√∂nnen den Ausdruck selbst nicht erhalten.  Sie k√∂nnen Apple einfach bitten, den Benutzer die Verwendung zulassen.  Es ist immer noch nicht der volle Zugriff auf den Scanner selbst. <br><br><h2>  Sechskantbeschleuniger </h2><br>  <b>Daniil Popov:</b> Sie haben den Begriff Sechskantbeschleuniger erw√§hnt.  Ich denke nicht jeder wei√ü was es ist. <br><br>  <b>Andrey Volodin:</b> Dies ist nur ein Teil der Hardwarearchitektur, die Huawei verwendet.  Ich muss sagen, sie ist ziemlich raffiniert.  Nur wenige Leute wissen, aber in einigen Huawei sind diese Prozessoren, werden aber nicht verwendet, weil sie einen Hardware-Fehler haben.  Huawei hat sie freigegeben und dann ein Problem gefunden, jetzt sind in einigen Handys spezielle Chips Eigengewicht.  In frischen Versionen funktioniert schon alles. <br><br>  Bei der Programmierung gibt es das SIMD-Paradigma (Single Instruction, Multiple Data), bei dem dieselben Befehle parallel f√ºr verschiedene Daten ausgef√ºhrt werden.  Der Chip ist so konzipiert, dass er einige Operationen gleichzeitig in mehreren Datenstr√∂men verarbeiten kann.  Sechseckig bedeutet insbesondere, dass auf 6 Elementen parallel. <br><br>  <b>Alexei Kudryavtsev:</b> Ich dachte, dass die GPU einfach so funktioniert: Sie vektorisiert eine Aufgabe und f√ºhrt dieselbe Operation f√ºr verschiedene Daten aus.  Was ist der Unterschied? <br><br>  <b>Andrey Volodin</b> : GPU ist allgemeiner Zweck.  Trotz der Tatsache, dass die Programmierung f√ºr die GPU eher niedrig ist, ist sie in Bezug auf die Arbeit mit Coprozessoren ziemlich hoch.  F√ºr die Programmierung auf der GPU wird eine C-√§hnliche Sprache verwendet.  Unter iOS wird der Code trotzdem mit LLVM in Maschinenanweisungen kompiliert.  Und diese Dinge f√ºr Coprozessoren werden meistens direkt Hardcore geschrieben - im Assembler auf Maschinenanweisungen.  Daher ist dort die Produktivit√§tssteigerung viel deutlicher, da sie f√ºr bestimmte Vorg√§nge gesch√§rft werden.  Sie k√∂nnen sich √ºberhaupt nicht auf sie verlassen, aber Sie k√∂nnen nur das z√§hlen, wof√ºr sie urspr√ºnglich bestimmt waren. <br><br>  <b>Alexei Kudryavtsev:</b> Und warum werden sie normalerweise entworfen? <br><br>  <b>Andrey Volodin:</b> Jetzt haupts√§chlich f√ºr die h√§ufigsten Operationen in neuronalen Netzen: Faltung - Faltung oder irgendeine Art von Zwischenaktivierung.  Sie verf√ºgen √ºber vorverdrahtete Funktionen, die superschnell funktionieren.  Sie sind also bei einigen Aufgaben viel schneller als die GPU, aber im √úbrigen sind sie einfach nicht anwendbar. <br><br>  <b>Alexei Kudryavtsev:</b> Es sieht aus wie DSP-Prozessoren, die fr√ºher f√ºr Audio verwendet wurden, und alle Plugins und Effekte haben sehr schnell daran gearbeitet.  Es wurde spezielle teure Hardware verkauft, aber dann sind die Prozessoren aufgewachsen, und jetzt zeichnen wir Podcasts direkt auf Laptops auf und verarbeiten sie. <br><br>  <b>Andrey Volodin:</b> Ja, ungef√§hr gleich. <br><br><h2>  GPU nicht nur f√ºr Grafiken </h2><br>  <b>Daniil Popov:</b> Ich verstehe richtig, dass Sie jetzt auf der GPU Daten verarbeiten k√∂nnen, die nicht direkt mit Grafiken zusammenh√§ngen?  Es stellt sich heraus, dass die GPU ihren urspr√ºnglichen Zweck verliert. <br><br>  <b>Andrey Volodin:</b> Genau.  Ich spreche oft auf Konferenzen dar√ºber.  Die ersten waren NVidia, die CUDA einf√ºhrten.  Dies ist eine Technologie, die GPGPU (General-Purpose Computing auf Grafikprozessoren) einfacher macht.  Sie k√∂nnen eine Obermenge von C ++ - Algorithmen darauf schreiben, die auf der GPU parallelisiert sind. <br><br>  Aber die Leute haben das schon einmal gemacht.  Zum Beispiel haben Handwerker auf OpenGL oder sogar auf √§lterem DirectX einfach Daten in die Textur geschrieben - jedes Pixel wurde als Daten interpretiert: die ersten 4 Bytes im ersten Pixel, die zweiten 4 Bytes im zweiten.  Sie verarbeiteten die Texturen, dann wurden die Daten aus der Textur extrahiert und interpretiert.  Es war sehr kr√ºckenhaft und kompliziert.  Jetzt unterst√ºtzen Grafikkarten die Allzwecklogik.  Sie k√∂nnen jeden Puffer in die GPU einspeisen, Ihre Strukturen beschreiben, sogar die Hierarchie der Strukturen, in denen sie aufeinander verweisen, etwas berechnen und an den Prozessor zur√ºckgeben. <br><br>  <b>Daniil Popov:</b> Das hei√üt, wir k√∂nnen sagen, dass die GPU jetzt Data PU ist. <br><br>  <b>Andrey Volodin:</b> Ja, Grafiken auf der GPU werden manchmal weniger verarbeitet als allgemeine Berechnungen. <br><br>  <b>Alexei Kudryavtsev: Die</b> Architektur der CPU und der GPU unterscheidet sich im Wesentlichen, aber Sie k√∂nnen sie sowohl dort als auch dort ber√ºcksichtigen. <br><br>  <b>Andrey Volodin</b> : In gewisser Weise ist die CPU schneller, in gewisser Weise die GPU.  Dies bedeutet nicht, dass die GPU immer schneller ist. <br><br>  <b>Daniil Popov:</b> Soweit ich mich erinnere, kann es auf der CPU viel schneller gehen, wenn die Aufgabe darin besteht, etwas ganz anderes zu berechnen. <br><br>  <b>Andrey Volodin: Das</b> h√§ngt <b>auch</b> von der Datenmenge ab.  Das √úbertragen von Daten von der CPU zur GPU und umgekehrt ist immer mit einem Mehraufwand verbunden.  Wenn Sie beispielsweise eine Million Elemente ber√ºcksichtigen, ist die Verwendung einer GPU normalerweise gerechtfertigt.  Das Z√§hlen von tausend Elementen auf einer CPU kann jedoch schneller sein als nur das Kopieren auf eine Grafikkarte.  Daher m√ºssen Sie immer die Aufgabe ausw√§hlen. <br><br>  Core ML macht es √ºbrigens.  Laut Apple kann Core ML zur Laufzeit ausw√§hlen, wo die Berechnung schneller ist: auf dem Prozessor oder auf der Grafikkarte.  Ich wei√ü nicht, ob dies in der Realit√§t funktioniert, aber sie sagen ja. <br><br><h2>  Hardcore GPU Engineer Wissen f√ºr einen mobilen Entwickler </h2><br>  <b>Alexey Kudryavtsev: Kommen</b> wir zur√ºck zur mobilen Entwicklung.  Sie sind ein GPU-Ingenieur, Sie haben jede Menge Hardcore-Wissen.  Wie kann dieses Wissen auf einen mobilen Entwickler angewendet werden?  Was sehen Sie beispielsweise in UIKit, was andere nicht sehen? <br><br>  <b>Andrey Volodin:</b> Ich werde auf der AppsConf ausf√ºhrlich dar√ºber sprechen.  Sie k√∂nnen viel wo anwenden.  Wenn ich zum Beispiel sehe, wie die UIKit-API funktioniert, kann ich sofort verstehen, warum dies getan wird und warum.  Wenn ich den Leistungsabfall beim Rendern einiger Ansichten beobachte, kann ich den Grund verstehen, da ich wei√ü, wie das Rendern darin geschrieben ist.  Ich verstehe: Um die Effekte anzuzeigen, die die Gau√üsche Unsch√§rfe tats√§chlich √ºber dem Bildpuffer ausf√ºhrt, m√ºssen Sie zuerst die gesamte Textur zwischenspeichern, eine starke Unsch√§rfeoperation darauf anwenden, das Ergebnis zur√ºckgeben, den Rest der Ansichten fertig rendern und sie erst dann auf dem Bildschirm anzeigen.  All dies muss in 1/60 Sekunde passen, sonst wird es langsamer. <br><br>  Mir ist absolut klar, warum dies eine lange Zeit ist, aber f√ºr meine Kollegen ist dies nicht klar.  Aus diesem Grund m√∂chte ich die Design-Tricks, die wir h√§ufig in GameDev verwenden, und meine Erkenntnisse dar√ºber, wie ich Probleme betrachte und versuche, sie zu l√∂sen, teilen.  Es wird ein Experiment sein, aber ich denke, es sollte interessant sein. <br><br><h2>  Warum Android keine native Unsch√§rfe hat </h2><br>  <b>Daniil Popov:</b> Sie haben die Unsch√§rfe erw√§hnt, und ich hatte eine Frage, die meiner Meinung nach alle Android-Entwickler beunruhigt: Warum gibt es in iOS und nicht in Android ein natives Blau? <br><br>  <b>Andrei Volodin:</b> Ich denke, das liegt an der Architektur.  Apple-Plattformen verwenden die Rendering-Architektur von Tiled Shading.  Bei diesem Ansatz wird nicht der gesamte Rahmen gerendert, sondern kleine Kacheln - Quadrate, Teile des Bildschirms.  Auf diese Weise k√∂nnen Sie den Betrieb des Algorithmus optimieren, da der Hauptleistungsgewinn bei Verwendung der GPU eine effiziente Nutzung des Caches erm√∂glicht.  Unter iOS wird der Frame h√§ufig so gerendert, dass er √ºberhaupt keinen Speicherplatz beansprucht.  Auf dem iPhone 7 Plus betr√§gt die Aufl√∂sung beispielsweise 1920 * 1080, was ungef√§hr 2 Millionen Pixel entspricht.  Wir multiplizieren mit 4 Bytes pro Kanal, es ergeben sich ungef√§hr 20 Megabyte pro Frame.  20 MB zum einfachen Speichern des Systemrahmenpuffers. <br><br>  Mit dem Tiled Shading-Ansatz k√∂nnen Sie diesen Puffer in kleine Teile zerlegen und ein wenig rendern.  Dies erh√∂ht die Anzahl der Cache-Zugriffe erheblich, da Sie zum Verwischen die bereits gezeichneten Pixel lesen und die Gau√üsche Verteilung darauf berechnen m√ºssen.  Wenn Sie den gesamten Frame lesen, ist die Cache-Rate sehr niedrig, da jeder Stream unterschiedliche Stellen liest.  Wenn Sie jedoch kleine St√ºcke lesen, ist die Cache-Rate sehr hoch und die Produktivit√§t ebenfalls hoch. <br><br>  Es scheint mir, dass das Fehlen nativer Unsch√§rfe in Android mit architektonischen Merkmalen zusammenh√§ngt.  Vielleicht ist dies jedoch eine Produktl√∂sung. <br><br>  <b>Daniil Popov:</b> In Android gibt es daf√ºr RenderScript, aber dort m√ºssen Sie mit Ihren H√§nden mischen, zeichnen und einbetten.  Dies ist viel komplizierter als das Aktivieren eines Kontrollk√§stchens in iOS. <br><br>  <b>Andrey Volodin:</b> H√∂chstwahrscheinlich ist auch die Leistung geringer. <br><br>  <b>Daniil Popov:</b> Ja, um Designer Wishlist zufrieden zu stellen, m√ºssen wir das Bild verkleinern, bl√§uen und dann zur√ºckskalieren, um es irgendwie zu speichern. <br><br>  <b>Andrey Volodin:</b> √úbrigens k√∂nnen Sie damit verschiedene Tricks machen.  Die Gau√üsche Verteilung ist ein unscharfer Kreis.  Das Gau√ü-Sigma h√§ngt von der Anzahl der Pixel ab, die sie sammeln sollen.  Als Optimierung k√∂nnen Sie h√§ufig ein Bild verkleinern und das Sigma leicht einschr√§nken. Wenn Sie den urspr√ºnglichen Ma√üstab zur√ºckgeben, gibt es keinen Unterschied, da Sigma direkt von der Gr√∂√üe des Bildes abh√§ngt.  Wir verwenden diesen Trick oft im Inneren, um die Unsch√§rfe zu beschleunigen. <br><br>  <b>Daniil Popov:</b> Mit RenderScript in Android k√∂nnen Sie jedoch keinen Radius gr√∂√üer als 30 festlegen. <br><br>  <b>Andrey Volodin:</b> Eigentlich ist ein Radius von 30 viel.  Wiederum verstehe ich, dass das Sammeln von 30 Pixeln mit einer GPU in jedem Thread sehr teuer ist. <br><br><h2>  Was sind √§hnliche mobile Entwicklung und GameDev </h2><br>  <b>Alexei Kudryavtsev:</b> In den Thesen zu Ihrem Bericht sagen Sie, dass Mobile Development und GameDev viel gemeinsam haben.  Sag mir ein wenig, was genau? <br><br>  <b>Andrey Volodin: Die</b> Architektur von UIKit erinnert sehr an Spiel-Engines und die alten.  Moderne sind in Richtung des Entity Component Systems gegangen, und dies wird auch im Bericht enthalten sein.  Dies gilt auch f√ºr UIKit. Es gibt Artikel, in denen beschrieben wird, wie Sie Ansichten zu Komponenten entwerfen k√∂nnen.     GameDev,  Component System    Thief  98 . <br><br> , , Cocos2d,      ,  ,     ,  .  ,    Scene graph ‚Äî  ,      -,        ,    iOS  CGAffineTransform.    4*4,  ,    .     . <br><br>    ,   UIKit      .    -  ‚Äî       .    :  GameDev     ,   UIKit  setNeedsLayout, layoutIfNeeded. <br><br>        ‚Äî  ,   - ,   ,      Apple.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AppsConf</a> . <br><br> <b> :</b> , API Cocos2d   iOS ( UI).  ,         ? <br><br> <b> :</b> ,  - . Cocos2d   2008-2009 ,  UIKit    UIKit,    .   ,  -    ,     ,     . <br><br> ,   :  core- Cocos2d    Apple,   Apple   Cocos2d,     . SpriteKit      ,    Cocos2d.    Apple   . <br><br> <b> :</b>  ,   ,   UIKit  2009,    MacOS,     .    setNeedsLayout, layoutIfNeeded ,  . <br><br> <b> :</b> ,  GameDev   ,  MacOS. <br><br> <b> :</b>  ! <br><br> <b> :</b>     Cocos2d   Apple,      ,    GameDev.   GameDev   ,   ‚Äî  .     ,  GameDev   ,    ,   .  ,  ,     . <br><br> <b> :</b> ,    - ,   ‚Äî  . <br><br> <b> </b> : ,   , ,       ,   ‚Äî  .    Protocol-Oriented Programming  Swift, ,    - .  GameDev      . <br><br> <b> :</b>  :     ,   .  ,    ,    ,     . <br><br><h2>     GameDev </h2><br> <b> :</b>    :  GameDev     ,    GameDev    ? <br><br> <b> :</b>  ,    ,     .       ¬´  ,  ¬ª.    ,     .      :    ,    ,  . <br><br> GameDev-    .     : 30  60        ,  ,   ,    .   ,      .      ‚Äî       .  --   1/60  1/30 .   ,     , ,  GPU  ,   CPU .        ,    . <br><br> <b> :</b>         ? <br><br> <b> :</b>    . -       , , ,         .     ‚Äî   .     , , ,  ‚Äî  - ,  - ,  .      ,      ,      . <br><br>      . , GPU     float,    double, -    . , ,     ,    .  CPU  ,        ,       ,   GPU     . <br><br>      ,      ,    ‚Äî     . <br><br><h2>      GameDev,    </h2><br> <b> :</b>        ,  ¬´     GameDev,   ¬ª.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>    ,     ,   .     ,  GameDev ‚Äî      .        ,  .      GameDev. <br><br> <b> :</b> , enterprise-   ,    GameDev    .      .   ,     ,    GameDev,     . <br><br> ,  .    ,      4*4.  CGAffineTransform ‚Äî    ,   -        ,   . <br><br><blockquote>        ,     ,   ,  ,    . </blockquote><br><h2>    </h2><br> <b> :</b>       ?  ,       UIKit,     ,     ?  ,   ,       ,   .   ,     ? <br><br> <b> :</b>    ‚Äî   pet project. <br><br> ,      :    GPU     ,     . iOS GPU      ,     .    iOS     ,     -  NVidia  AMD-   .    . API  ,   ,         . <br><br> <b> :</b>   API, ,   Cocos2d  Unity,      ‚Äî   - .    ,    ,   ,   UIKit    ? <br><br> <b> :</b> Cocos2d ‚Äî Open Source    .    ,      ,   ,     ,     .       objective-C,        . <br><br>      pet project,          ,   ,   API,  , , -. ,   API,   VHS-.    ,   GPU.    ,     .     ,      .      ,   : ¬´     saturation  Instagram,   lightroom!¬ª ,   ,   4      ‚Äî  . <br><br><blockquote>     ,   . </blockquote><br>         ‚Äî ,   , .     ,      ,    -  ,   ,      ,   . <br><br> <b> :</b>    ,   -  . ,  Cocos2d -  ‚Äî  5  ,       ,    ,    ,   . ,       ,   ,    .. <br><br> <b> :</b>   .       ,   .   ,         ,          ,        ,        ,    , , ,    ,     . <br><br> <b> :</b>     ,       . ,     ,    . <br><br> <b> :</b>     .    ,  ,       .       ,      Apple,   ARKit.       ,       ,    .    ,     ,        ,     ,   . <br><br> ,            ,  : ¬´,      IDE, ,   ,     ,   .        ¬ª. <br><br> <b> :</b>   ‚Äî  ? <br><br> <b> :</b> , ,    ,      . <br><br> <b> :</b>   ,   ,       . <br><br> <b> :</b> ,      ,   ,  VR   .    Project Template  Xcode,    ,   , - .    ,       . <br><br> <b> :</b>       . <br><br><h2>  </h2><br> <b> :</b>  -  ,      GameDev  GPU. <br><br> <b> :</b>    .   - ,      ,   ,  .   ,         ,   ,   ,  ,      UI: ,  , runtime Objective-C ‚Äî  ,    ,     .     .      ,     : ,  ‚Äî , X  Y, ! <br><br><blockquote>    ,  ,  - ,  GameDev  GPU- ‚Äî   . </blockquote><br> <b>        ,   .          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AppsConf</a> 22  23     .</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448222/">https://habr.com/ru/post/de448222/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448212/index.html">AIBUS Chinesisches Protokoll und chemischer Laborreaktor</a></li>
<li><a href="../de448214/index.html">ES6 Proxies in der Praxis</a></li>
<li><a href="../de448216/index.html">Richten Sie eine bequeme Zusammenstellung von Projekten in Visual Studio ein</a></li>
<li><a href="../de448218/index.html">Neue MFP-Sicherheit: imageRUNNER ADVANCE III</a></li>
<li><a href="../de448220/index.html">Die Grundlagen des GLTF- und GLB-Formats, Teil 1</a></li>
<li><a href="../de448224/index.html">AppsConf, um sie alle zu regieren</a></li>
<li><a href="../de448226/index.html">Auf der Suche nach dem einen (Themen f√ºr AppsConf melden)</a></li>
<li><a href="../de448228/index.html">Arten der Modellierung. Grundlagen der Bildhauerei, Retopologie und Sweep</a></li>
<li><a href="../de448230/index.html">Verwalten der Gesch√§ftskontinuit√§t mit ClearView</a></li>
<li><a href="../de448234/index.html">AI und MO: einige Trends und Trends</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>