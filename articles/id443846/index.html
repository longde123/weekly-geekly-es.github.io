<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ë ü§ì ü§æüèΩ Akses ke server linux menggunakan bot Python Telegram üèµÔ∏è üê† üëÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cukup sering ada situasi ketika akses ke server diperlukan di sini dan sekarang. Namun, koneksi SSH tidak selalu merupakan cara yang paling nyaman, ka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Akses ke server linux menggunakan bot Python Telegram</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443846/">  Cukup sering ada situasi ketika akses ke server diperlukan di sini dan sekarang.  Namun, koneksi SSH tidak selalu merupakan cara yang paling nyaman, karena klien SSH, alamat server, atau tautan pengguna / kata sandi mungkin tidak tersedia.  Tentu saja, ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Webmin</a> , yang menyederhanakan administrasi, tetapi juga tidak memberikan akses instan. <br><a name="habracut"></a><br>  Jadi saya memutuskan untuk mengimplementasikan solusi yang sederhana namun menarik.  Yaitu, untuk menulis bot Telegram, yang, dimulai pada server itu sendiri, akan menjalankan perintah yang dikirim kepadanya dan mengembalikan hasilnya.  Setelah mempelajari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">beberapa</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> tentang topik ini, saya menyadari bahwa belum ada yang menggambarkan implementasi seperti itu. <br><br>  Saya mengimplementasikan proyek ini di Ubuntu 16.04, tetapi untuk peluncuran tanpa masalah di distribusi lain, saya mencoba melakukan semuanya secara umum. <br><br><h2>  Pendaftaran Bot </h2><br>  Daftarkan bot baru dengan @BotFather.  Kami mengirimnya <code>/newbot</code> dan selanjutnya dalam teks.  Kami akan memerlukan token bot baru dan id Anda (Anda bisa mendapatkannya, misalnya, dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@userinfobot</a> ). <br><br><h2>  Persiapan python </h2><br>  Untuk memulai bot, kita akan menggunakan perpustakaan <code>telebot</code> ( <code>pip install pytelegrambotapi</code> ).  Menggunakan pustaka <code>subprocess</code> , kami akan menjalankan perintah di server. <br><br><h2>  Peluncuran bot </h2><br>  Di server, buat file bot.py: <br> <code>nano bot.py</code> <br> <br>  Dan rekatkan kode ke dalamnya: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> subprocess <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> check_output <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> telebot <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time bot = telebot.TeleBot(<span class="hljs-string"><span class="hljs-string">"XXXXXXXXX:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"</span></span>)<span class="hljs-comment"><span class="hljs-comment">#  user_id = 0 #id   @bot.message_handler(content_types=["text"]) def main(message): if (user_id == message.chat.id): #,     comand = message.text #  try: #   - check_output  exception bot.send_message(message.chat.id, check_output(comand, shell = True)) except: bot.send_message(message.chat.id, "Invalid input") #   if __name__ == '__main__': while True: try:# try    bot.polling(none_stop=True)#  except: time.sleep(10)#  </span></span></code> </pre><br>  Kami mengganti token bot di dalamnya dengan yang dikeluarkan oleh @BotFather, dan user_id dengan nilai id dari akun Anda.  Memeriksa id pengguna diperlukan agar bot menyediakan akses ke server Anda hanya untuk Anda.  Fungsi <code>check_output()</code> mengeksekusi perintah yang dikirimkan dan mengembalikan hasilnya. <br><br>  Tetap hanya meluncurkan bot.  Untuk memulai proses di server, saya lebih suka menggunakan <code>screen</code> ( <code>sudo apt-get install screen</code> ): <br><br><pre> <code class="plaintext hljs">screen -dmS ServerBot python3 bot.py</code> </pre>  (di mana "ServerBot" adalah pengidentifikasi proses) <br><br>  Proses akan secara otomatis dimulai di latar belakang.  Mari kita masuk ke dialog dengan bot dan memeriksa apakah semuanya berfungsi sebagaimana mestinya: <br><br><img src="https://habrastorage.org/webt/ek/rw/iu/ekrwiulrnbse3rtucxs6m7juwvk.jpeg" width="60%"><br><br>  Selamat!  Bot mengeksekusi perintah yang dikirim kepadanya.  Sekarang, untuk mendapatkan akses ke server, Anda hanya perlu membuka dialog dengan bot. <br><br><h2>  Pengulangan perintah </h2><br>  Seringkali, untuk memantau status server Anda harus menjalankan perintah yang sama.  Oleh karena itu, pelaksanaan pengulangan perintah tanpa mengirimnya lagi akan sangat tidak pada tempatnya. <br><br>  Kami akan menerapkan menggunakan tombol sebaris di bawah pesan: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> subprocess <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> check_output <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> telebot <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> telebot <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> types <span class="hljs-comment"><span class="hljs-comment">#   import time bot = telebot.TeleBot("XXXXXX</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA")#  user_id = 0 #id   @bot.message_handler(content_types=["text"]) def main(message): if (user_id == message.chat.id): #,     comand = message.text #  markup = types.InlineKeyboardMarkup() #  button = types.InlineKeyboardButton(text="", callback_data=comand) #  markup.add(button) #    try: #   - check_output  exception bot.send_message(user_id, check_output(comand, shell = True, reply_markup = markup)) #       except: bot.send_message(user_id, "Invalid input") #   @bot.callback_query_handler(func=lambda call: True) def callback(call): comand = call.data #     data try:#    - check_output  exception markup = types.InlineKeyboardMarkup() #  button = types.InlineKeyboardButton(text="", callback_data=comand) #    data   markup.add(button) #    bot.send_message(user_id, check_output(comand, shell = True), reply_markup = markup) #       except: bot.send_message(user_id, "Invalid input") #   if __name__ == '__main__': while True: try:# try    bot.polling(none_stop=True)#  except: time.sleep(10)#  </span></span></code> </pre><br>  Mulai ulang bot: <br><br><pre> <code class="plaintext hljs">killall python3 screen -dmS ServerBot python3 bot.py</code> </pre><br>  Periksa lagi apakah semuanya berfungsi dengan benar: <br><br><img src="https://habrastorage.org/webt/tv/vk/iu/tvvkiuj2rrkdlh4opt_yee-uds4.jpeg" width="60%"><br><br>  Dengan menekan tombol di bawah pesan, bot harus mengulangi perintah dari mana pesan dikirim. <br><br><h2>  Alih-alih sebuah kesimpulan </h2><br>  Tentu saja, metode ini tidak berpura-pura menjadi pengganti metode koneksi klasik, namun, Anda dapat dengan cepat mencari tahu tentang status server dan mengirimkan perintah kepadanya yang tidak memerlukan output yang rumit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id443846/">https://habr.com/ru/post/id443846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id443836/index.html">Menggunakan Waves Akun Pintar dan Aset Cerdas di Instrumen Keuangan</a></li>
<li><a href="../id443838/index.html">Secara otomatis membuat akun dari AD di Zimbra Collaboration Suite</a></li>
<li><a href="../id443840/index.html">Univention Corporate Server (UCS) - pemasangan server LDAP yang sederhana dan nyaman dengan panel web dan hubungannya dengan Nextcloud</a></li>
<li><a href="../id443842/index.html">Apakah kita gesit atau gesit?</a></li>
<li><a href="../id443844/index.html">Arsitektur Strategis OpenSSL</a></li>
<li><a href="../id443854/index.html">Desain RPG empat sumbu</a></li>
<li><a href="../id443856/index.html">Pengerjaan logam pada mesin CNC: bagaimana cara mulai memproduksi produk kelas dunia?</a></li>
<li><a href="../id443860/index.html">Programmer sebagai layanan untuk perusahaan kecil. Akankah itu terbang atau tidak?</a></li>
<li><a href="../id443862/index.html">Mobil jaksa mengunci. Bestchange terkunci lagi</a></li>
<li><a href="../id443868/index.html">Sebagai seorang programmer saya pergi ke gym, dan apa yang terjadi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>