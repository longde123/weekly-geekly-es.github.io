<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥝 👌🏼 🏂🏾 Réanimation d'un testeur de Marcus 🤽🏼 👀 👩🏾‍🤝‍👩🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le Père Noël m'a placé un testeur de composants électroniques sous le sapin de Noël sous la forme d'un clone chinois du testeur Marcus, largement conn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Réanimation d'un testeur de Marcus</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444152/"> Le Père Noël m'a placé un testeur de composants électroniques sous le sapin de Noël sous la forme d'un clone chinois du testeur Marcus, largement connu dans les cercles étroits. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a2/ec5/96c/5a2ec596ca3b2bf0df5a8b1b7de4cc08.jpg" alt="image"></div><br>  Il aurait dû y avoir une photo d'un testeur allumé avec un écran brillant avec toutes les couleurs de l'arc-en-ciel, mais les mains d'un endroit y ont collé un condensateur chargé, le testeur s'est allumé joyeusement, a dit "oh!"  et a refusé de travailler. <br><a name="habracut"></a><br>  Désolé, bon sang.  Essayons de réparer. <br><br>  1. Nous allons sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">disque Yandex</a> avec les schémas et le firmware pour tous les clones connus de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">communauté</a> .  Heureusement, le clone TS-1 est déjà là. <br><br>  2. Nous étudions le circuit et la carte du testeur, découvrons expérimentalement qu'il y a un court-circuit (court-circuit) sur le bus + 5V. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/712/9c8/db5/7129c8db5ebfbbe904e37293094cdab7.jpg" alt="image"></div><br>  Si le testeur s'est allumé lorsque le condensateur a été connecté, l'alimentation a été fournie au bus soit via les diodes inverses intégrées aux entrées du microcontrôleur, soit via l'ensemble de protection DZ2. <br><br>  Nous soudons DZ2, l'assemblage est vivant, le court-circuit est en place.  Alors la pire chose est arrivée, le microcontrôleur a grillé. <br><br>  3. Nous commandons le microcontrôleur Atmega644, le boîtier TQFP-44, 2 pièces, en cas de problème. <br><br>  4. Pendant que Atmega voyage de Chine, nous préparons les outils et recherchons le programmeur. <br><br>  Nous aurons besoin de: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06a/eeb/8a7/06aeeb8a7fb262ed0b011ca3092d5821.jpg" alt="image"></div><br>  4.1.  Station de soudage, un ensemble de conseils pour un fer à souder, une "troisième main" avec une loupe, des pincettes fines à fines, un bon flux (chinois, mais liquide, qui est meilleur que la colophane), un peu de soudure. <br><br>  Programmeurs (merci à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Int_13h</a> pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">avoir donné</a> une boîte entière de toutes sortes de différents): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/946/2df/e24/9462dfe247aaa9ce25d0408341425611.jpg" alt="image"></div><br>  4.2.  USBasp sans boîtier pour Atmega, avec adaptateur ISP 10 broches à 6 broches. <br><br>  4.3.  FAI USB dans le cas d'Atmega (vous ne devinerez jamais lequel est utile). <br><br>  4.4.  Un convertisseur USB / UART 5V d'une sorte de téléphone portable pour flasher le contrôleur d'alimentation U4 (STC15L104W). <br><br>  Parce que  le contrôleur aime 3,3 V, lors de l'assemblage, nous assemblons un stabilisateur 5-&gt; 3,3 V basé sur le LM1117: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f99/e63/df7/f99e63df7e2a5939d1175ac5a2745e8e.jpg" alt="image"></div><br>  Il s'avère que le stabilisateur ne fonctionne pas sans charge.  Nous accrochons une résistance à la sortie, par exemple 2,2 kOhm.  Nous installons exactement 3,3 V à la sortie à l'aide d'un voltmètre et d'un potentiomètre. <br><br>  5. Enfin, ils ont attendu l'enveloppe avec les microcontrôleurs. <br><br>  6. Nous enlevons le microcontrôleur brûlé avec un sèche-cheveux, nettoyons les plots de contact, lubrifions avec du flux et soudons un nouveau.  Avec une fine piqûre, chaque jambe.  Mais d'abord dans les coins.  Ils disent que c'est possible avec un sèche-cheveux, mais il n'y a pas de pâte à souder. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b68/156/d0d/b68156d0d0f1108d842f5c8bd9d55475.jpg" alt="image"></div><br>  Pour la première fois, même magnifiquement. <br><br>  En même temps, soudez le connecteur pour la programmation en circuit.  Nous nous assurons que le câblage de l'adaptateur 10to6 est correct, soudez le connecteur de l'autre côté de la carte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc1/448/f05/fc1448f05d174508d61f3f041b9122de.jpg" alt="image"></div><br>  Et bien sûr, nous fournissons un connecteur de batterie.  Le résultat: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c95/6fd/4c0/c956fd4c05c84e32eb2e4917b1329ec2.jpg" alt="image"></div><br>  7. Nous nous préparons à flasher le contrôleur d'alimentation U4.  Souder le convertisseur USB-UART avec stabilisateur à la carte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8d8/9c1/076/8d89c1076ed671e7554fdba4f62725c2.jpg" alt="image"></div><br>  3,3 V à 3,3 V, Gnd à Gnd, Tx à P1, Rx à P2. <br><br>  8. Nous recherchons le logiciel stc-isp6.86.rar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le site Web du fabricant</a> . <br><br>  9. Connectez le convertisseur, attendez qu'il soit détecté par le système, démarrez le logiciel, sélectionnez le port com, sélectionnez le micrologiciel dans l'archive (élément 1), réglez la fréquence sur 12 MHz, appliquez l'alimentation, le processeur démarre, ne passe pas en mode de démarrage, le programmeur ne détecte pas . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e39/c99/808/e39c99808f38c73c210abb6fcca2b4e4.png" alt="image"></div><br>  9.1.  Nous expérimentons la séquence d'alimentation du processeur et en appuyant sur les boutons «Vérifier MCU» et «Télécharger / Programmer». <br><br>  9.2.  Nous étudions la fiche technique sur U4, nous constatons que le bouton Test du testeur est connecté à la broche de réinitialisation.  Cliquez sur "Vérifier MCU", cliquez sur le bouton Test, le microcontrôleur se réinitialise et est détecté.  De la même manière, lancez le firmware, et enfin, flashez le U4. <br><br>  10. Nous étudions l'abondance de logiciels pour le firmware Atmega. <br><br>  10.1.  Nous installons le puissant et pratique Atmel Studio 6.2, nous constatons qu'il ne prend pas en charge les programmeurs USBasp et USB ISP.  Démolir. <br><br>  10.2.  Nous recherchons Avrdude et le shell graphique pour cela.  De toute l'abondance, nous nous attardons sur l'intuitif Avrdude_prog 3.3, qui comprend USBasp, comprend le firmware * .hex et * .eep, et est capable de montrer clairement les fusibles sélectionnés.  Nous nous connectons, exécutons: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/692/b1a/11d/692b1a11d8382671e34cc274f95c3c74.png" alt="image"></div><br>  Oblom-s, le programmeur a un firmware trop ancien. <br><br>  10.3.  C'est là qu'intervient le FAI USB, dont le logiciel n'est pas si convivial, mais il est capable de flasher le programmeur.  Ou peut-être que le testeur le flashera?  Hélas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d1/af8/34d/5d1af834de5bfa36fcf8ab314a4875da.png" alt="image"></div><br>  10.4.  Nous recherchons le dernier firmware sur USBasp, connectons le FAI USB et USBasp avec un câble, fermez le cavalier J1 sur USBasp, le mettant en mode de programmation.  Remplissez le firmware.  Succès! <br><br>  10.5.  Inspiré par le succès, nous essayons également de flasher USB ISP dans USBasp.  Nous soudons le cavalier sur la carte selon la méthodologie, sauvegardons d'abord le firmware et les fusibles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b58/382/143/b583821437b177b18dacb4622ac5e5c0.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc1/cff/8d8/dc1cff8d85587bd329d1b2505a67f762.png" alt="image"></div><br>  10.6.  Nous cousons. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b01/d69/041/b01d69041aee244899ecce25e52074e6.png" alt="image"></div><br>  Soudez le cavalier.  Nous connectons l'ancien FAI USB à l'ordinateur et ne le détectons pas avec un logiciel.  Peut-être une confusion avec la fusion?  Ensuite, nous le découvrirons.  Désolé  Mais vous avez atteint votre objectif et jusqu'à présent, vous pouvez vous reposer en paix. <br><br>  10.7.  Aller à 10.2.  Mais maintenant, notre programmeur coud déjà avec succès Atmega. <br><br>  11. Nous sommes préoccupés par le succès de l'opération. <br><br>  12. Lancement du testeur.  Bingo! <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/A1jE6GX5cuA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Des mesures sont en cours, mais il y avait quelques inconvénients - le testeur s'éteint presque instantanément après le processus de mesure, et vous n'aurez peut-être pas le temps de prendre des mesures. <br><br>  Dans la série suivante: tente de créer son propre micrologiciel pour le testeur afin d'éliminer l'effet de l'arrêt instantané.  Le firmware sera basé sur les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sources de Marcus</a> .  Et aussi, comme je l'ai essayé, mais ne pouvait pas tomber amoureux d'AVR. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444152/">https://habr.com/ru/post/fr444152/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444136/index.html">Intégration d'AppCenter et de GitLab</a></li>
<li><a href="../fr444138/index.html">Scanners 3D dans l'industrie automobile: 4 avantages et 4 projets réussis</a></li>
<li><a href="../fr444142/index.html">Comment échouer la mise en place d'un système CRM?</a></li>
<li><a href="../fr444144/index.html">XXH3: un nouveau recordman de vitesse de hachage</a></li>
<li><a href="../fr444148/index.html">BionicSoftHand - un bras robotique d'intelligence artificielle sûr et flexible de Festo</a></li>
<li><a href="../fr444154/index.html">Essayer de briser le jeu 7 contre 9</a></li>
<li><a href="../fr444156/index.html">Performance du site équilibrée. Partie 4: Optimisation externe</a></li>
<li><a href="../fr444158/index.html">9 films du concours Let IT DOK!</a></li>
<li><a href="../fr444160/index.html">[Habr]: A propos du "plafond de verre"</a></li>
<li><a href="../fr444162/index.html">Courte critique du téléphone IP Snom D120</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>