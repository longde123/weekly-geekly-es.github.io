<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌬️ 👦🏼 🧔🏿 成功的Python项目的10个步骤 🤨 😔 😰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="该材料（我们今天发布的翻译）专用于工具，这些工具可为Python项目配备代码格式，测试，持续集成和依赖性分析工具。 这有助于加快开发过程，有助于提高代码的质量，统一性和安全性。 假定该材料的读者已经在Python开发方面拥有一些经验，并且他在阅读过程中将尝试使用该Python项目。 如果您没有这样的...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>成功的Python项目的10个步骤</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/444344/"> 该材料（我们今天发布的翻译）专用于工具，这些工具可为Python项目配备代码格式，测试，持续集成和依赖性分析工具。 这有助于加快开发过程，有助于提高代码的质量，统一性和安全性。 假定该材料的读者已经在Python开发方面拥有一些经验，并且他在阅读过程中将尝试使用该Python项目。 如果您没有这样的项目，则可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里</a>学习如何准备开发环境并创建Python包。 此处给出的示例是使用macOS和Python 3.7编写的。 <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/nn/pf/ir/nnpfirpitm1blak2m4jfuludveo.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">步骤1.安装黑色</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/00e/346/c01/00e346c01d193e87d70225c59cd191c3.png"></div><br> 项目代码必须遵循代码样式约定。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Black</a>是一个Python软件包，可自动格式化代码，使其外观达到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PEP 8</a>标准。  Black是一个相对较新的项目，但已经获得了超过一百万的下载量。 它的使用迅速成为Python开发中良好品味的标志。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这</a>是黑色手册。 <br><br> 我作为代码编辑器使用Atom，因此我向Atom添加了<code>Python-Black</code>软件包。 您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>了解如何安装它。 安装此软件包后，Atom将在保存文件后重新格式化代码。 <br><br> 当我们谈论Black时-让我们为该工具配备与我们一起从事该项目的人员的开发环境。 结果，每个在项目上工作的人都将使用相同的代码格式规则，否则将不接受其拉取请求。 <br><br> 将<code>black==18.9b0</code>添加到<code>requirements_dev.txt</code>文件的第一个找到的空闲行，然后运行<code>install -r requirements_dev.txt</code>命令。 <br><br> 默认情况下，黑色将代码行的长度设置为88个字符。 一些样式指南（例如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Sphinx</a> ）要求字符串长度为79个字符。 在<code>Black-Atom</code>程序包的设置中，您可以设置所需的行长。 <br><br> 现在，我们已经获得了可以节省代码格式化时间的工具，我们将考虑如何加快和简化将代码发送到PyPI的过程。 <br><br><h2>  <font color="#3AC1EF">步骤2.创建.pypirc文件</font> </h2><br> 当使用twine将应用程序集发送到TestPyPI和PyPI时，必须手动输入登录信息。 如果您不熟悉麻线，请查看<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此</a>材料。 现在，我们将自动执行此过程。 <br><br>  Twine可以使用<code>.pypirc</code>文件，该文件应该位于我们的主目录中。 此工具用于卸载数据，并从给定文件中获取URL，用户名和密码。 <br><br> 因此，在您的主目录中创建一个<code>.pypirc</code>文件： <br><br><pre> <code class="python hljs">touch ~/.pypirc</code> </pre> <br> 向其添加以下文本： <br><br><pre> <code class="python hljs">[distutils] index-servers =   pypi   testpypi [testpypi] repository: https://test.pypi.org/legacy username = your_username password = your_pypitest_password [pypi] username = your_username password = your_pypi_password</code> </pre> <br> 很明显，您必须在此处输入您的真实用户名和密码。 另外，请检查此文件是否保存在主目录中，而不是在当前工作目录中。 如果要保护此文件免受其他用户的侵害，可以使用命令行工具配置其权限： <br><br><pre> <code class="python hljs">chmod <span class="hljs-number"><span class="hljs-number">600</span></span> ~/.pypirc</code> </pre> <br> 现在，您可以使用以下命令将软件包加载到TestPyPI中： <br><br><pre> <code class="python hljs">twine upload -r testpypi dist/*</code> </pre> <br> 在常规PyPI中，您可以像这样加载软件包： <br><br><pre> <code class="python hljs">twine upload dist/*</code> </pre> <br> 获取<code>.pypirc</code>文件后，您不再需要手动输入用户名和密码。 <br><br> 现在，让我们在开发环境中添加测试工具，这将使我们能够验证正在创建的程序包的正确操作。 <br><br><h2>  <font color="#3AC1EF">步骤3.安装和配置pytest</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/561/860/645/561860645caff54bbde0e568e9d319ab.jpg"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pytest</a>是最流行的，易于使用的库，用于测试用Python编写的代码。 在此示例中，我们将向项目添加简单的测试。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">现在</a> ，如果您对pytest的详细信息感兴趣，那么此工具是一个很好的入门指南。 <br><br> 将pytest详细信息添加到<code>requirements_dev.txt</code> ： <br><br><pre> <code class="python hljs">pytest==<span class="hljs-number"><span class="hljs-number">4.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br> 让我们安装软件包： <br><br><pre> <code class="python hljs">pip install requirements_dev.txt</code> </pre> <br> 现在执行以下命令，这将允许pytest查找我们的软件包： <br><br><pre> <code class="python hljs">pip install -e .</code> </pre> <br> 如果您停用了虚拟开发环境，则将需要再次运行两个<code>pip</code>命令来运行测试。 <br><br><h2>  <font color="#3AC1EF">步骤4.创建测试</font> </h2><br> 将<code>test</code>文件夹添加到项目的根目录。 将文件<code>test_your_package_name.py</code>放入其中。 我的文件称为<code>test_notebookc.py</code> 。 如果文件名以<code>test_</code> ，则pytest可以自动检测到该文件。 <br><br> 我在<code>test_notebookc.py</code>文件中添加了以下测试，旨在检查该函数是否显示正确的名称。 修改此代码，使其中使用的文件和函数名称与您的匹配，并在其中描述您自己的测试。 <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"""Tests for `notebookc` package."""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> notebookc <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> notebookc <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_convert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span>   <span class="hljs-string"><span class="hljs-string">"""Correct my_name argument prints"""</span></span>   notebookc.convert(<span class="hljs-string"><span class="hljs-string">"Jill"</span></span>)   captured = capsys.readouterr()   <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-string"><span class="hljs-string">"Jall"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> captured.out</code> </pre> <br> 这是怎么回事 <br><br> 首先，我们在这里导入模块。 然后，我们创建一个名称根据模板<code>test_my_function_name</code>构建的函数。 此功能命名约定使其他人可以阅读您的项目代码，以快速了解测试中正在测试的内容。 另外，这对于使用测试来控制代码覆盖范围的软件包很有必要，我们将在下面讨论。 <br><br> 之后，我们调用函数（ <code>convert</code> ），并将名称<code>Jill</code>作为参数传递给该函数。 下一步-捕获函数显示的内容。 值得一提的是，所讨论的功能非常简单。 她采用<code>my_name</code>参数并执行以下操作： <br><br><pre> <code class="python hljs">print(<span class="hljs-string"><span class="hljs-string">f"I'll convert a notebook for you some day, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{my_name}</span></span></span><span class="hljs-string">."</span></span>)</code> </pre> <br>  Pytest会检查函数输出的<code>Jall</code>中是否<code>Jall</code> 。 由于我们传递了<code>Jill</code>函数，因此该行不应存在。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这</a>是pytest文档，您可以在其中找到有关拦截输出的信息。 <br><br> 通过在命令提示符下键入<code>pytest</code>运行测试。 该测试应该失败。 错误信息以红色显示。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61c/cfb/1f6/61ccfb1f6cff485d9cd90f8f68f2d33c.png"></div><br>  <i><font color="#999999">测试期间检测到错误。</font></i> <br><br> 建议检查测试的正确性，并描述它们，以便在某些情况下以错误结尾。 您不应编写仅发出绿色消息的测试，否则可能会导致测试根本不检查为验证而编写的内容。 <br><br> 在确保测试失败之后，将<code>Jall</code>语句更改为<code>Jill</code>并再次运行测试。 现在它应该成功完成。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c64/d72/bf5/c64d72bf51a42f3f209c00dc46e8ee52.png"></div><br>  <i><font color="#999999">成功完成测试。</font></i> <br><br> 现在一切都很好。 通过测试，您可以确保如果有人在我们的函数中传递了一行，则该行将落入该函数显示的文本中。 <br><br> 您还可以编写一个测试，以检查该函数如何处理传递给它的数据。 即，如果接收到其类型不同于字符串的数据，则应导致TypeError错误。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是</a>一些有关Python中的异常和错误处理的好东西。 <br><br> 在创建之前的测试时，我们编写了导致测试成功完成的代码。 这称为测试驱动开发（TDD）。  TDD是一种行之有效的编程方法，可以帮助您编写比没有TDD时错误更少的代码。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是一些</a>有用的TDD材料。 <br><br> 现在，作为练习，尝试编写一个检查<code>convert()</code>函数的测试，以便在将不同于字符串的内容传递给它时，它将引发错误，并为此函数实现适当的机制。 请注意，整数，列表和字典将转换为字符串。 <br><br> 软件包成功通过测试后，我们准备利用持续集成系统。 <br><br><h2>  <font color="#3AC1EF">步骤5.在Travis CI服务及其配置中注册</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/36c/e18/b28/36ce18b28c14dd932d4194a7eb0031e6.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Travis CI</a>是“用于构建和测试软件的分布式Web服务”。 它最近被<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Idera</a>购买。 还有其他持续集成系统，但是Travis CI是流行的，开放源代码且有据可查的工具，因此我们将使用它。 <br><br>  Travis CI允许您仅将通过测试并符合标准的代码集成到项目中。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里，</a>您可以阅读有关Travis CI的更多信息，并在此处了解持续<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">集成的信息</a> 。 <br><br> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://travis-ci.org/上</a>创建一个帐户。 接下来，单击链接<code>Review and add your authorized organizations</code>在配置文件页面上<code>Review and add your authorized organizations</code> 。 系统将提示您输入密码以访问GitHub。 单击“ <code>Organization access</code>部分中的“ <code>Grant</code> ”。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65e/6bd/d52/65e6bdd52e958c8335c999e971eec8ec.png"></div><br>  <i><font color="#999999">设置Travis CI帐户</font></i> <br><br> 我需要同步该帐户，以使有关<code>notebooktoall</code>和<code>notebookc</code>存储库的信息出现在该帐户中。 通常，要使Travis CI使用代码，大约需要一分钟。 之后，您需要使用下图所示的开关激活存储库。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/444/046/54c/44404654c3d1a95209f1418e2b3ea543.png"></div><br>  <i><font color="#999999">储存库激活</font></i> <br><br> 现在单击<code>Settings</code>按钮。 在这里，您需要指示Travis是否可以基于请求请求或发送到存储库的分支进行构建。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/361/1ed/b25/3611edb25ab1af3484db1d38b0eda38c.png"></div><br>  <i><font color="#999999">项目构建设置</font></i> <br><br> 现在是时候设置我们正在处理的项目了，这将使Travis能够为每个拉动请求构建项目。 <br><br><h2>  <font color="#3AC1EF">步骤6.创建.travis.yml文件</font> </h2><br> 在项目根文件夹中，创建一个具有以下内容的<code>.travis.yml</code>文件： <br><br><pre> <code class="python hljs">dist: xenial language: python python: <span class="hljs-number"><span class="hljs-number">3.7</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> install: - pip install -r requirements_dev.txt - pip install -e . script: - pytest</code> </pre> <br>  <code>dist: xenial</code>需要告诉Travis使用Ubuntu Xenial 16.04来组织虚拟环境。 要测试Python 3.7代码，需要Ubuntu Xenial，有关详细信息，请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> 。 <br><br>  <code>install</code>部分允许您安装项目开发中使用的软件包。  <code>pip install -e .</code>命令 在Travis的虚拟环境中执行我们软件包的安装。 之后，启动pytest的Travis将能够找到我们的软件包。 <br><br><h2>  <font color="#3AC1EF">步骤7.在Travis CI中进行测试</font> </h2><br> 提交更改，将其提交到GitHub，进行PR。  Travis应该在几秒钟内开始工作。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15a/32a/d3f/15a32ad3f0a601e6bf89c06932efc450.png"></div><br>  <i><font color="#999999">特拉维斯在工作</font></i> <br><br> 这是Travis在处理项目中所做的事情。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4a/b80/9a6/d4ab809a68ef70b62ad28121b055fc12.png"></div><br>  <i><font color="#999999">Travis在项目处理期间执行的操作</font></i> <br><br> 如果PR不成功-Travis会举报。 请注意，如果拉取请求失败，则可以将更改发送到同一分支，Travis将自动开始工作。 <br><br> 转到Travis网站上的存储库页面，然后四处看看。 在这里，您可以找到有关装配的许多有趣的东西。 可能在将来，当您尝试了解导致组装失败的原因时，您将经常访问该页面。 <br><br> 如果我们假设一切顺利，那么如果页面上包含绿色标签，则项目的验证和组装成功。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a6/bd0/7c4/6a6bd07c4f0a9c82e87b9fd1a71b9b10.png"></div><br>  <i><font color="#999999">项目组装成功完成</font></i> <br><br> 如果页面上没有绿色或红色标签，请打开<code>More options</code>菜单，然后选择<code>Requests</code> 。 如果您在此处看到红色错误消息，请对其进行分析。 如果看到“需要<code>Build config file is required</code>错误消息，则表明Travis在存储库中找不到您的<code>.travis.yml</code>文件。 纠正它，错误将消失。 <br><br> 如果项目的组装不成功，并且有可能进行修复，Travis向用户发送电子邮件。 <br><br> 请记住，您可以发送提交以打开PR，Travis将自动重新启动项目构建过程。 <br><br> 现在，让我们分析我们的项目以使用测试覆盖代码。 <br><br><h2>  <font color="#3AC1EF">步骤8.通过测试评估代码覆盖率</font> </h2><br> 关于测试的代码覆盖率的报告使您可以找到项目代码的哪一部分（尽管很小）已经过测试。 要创建此类报告，我们将使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">pytest-cov</a>包。 <br><br> 将以下行添加到<code>requirements_dev.txt</code>文件： <br><br><pre> <code class="python hljs">pytest-cov==<span class="hljs-number"><span class="hljs-number">2.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre> <br> 运行以下命令： <br><br><pre> <code class="python hljs">pytest --cov=my_project_name</code> </pre> <br> 就我而言，在执行<code>pytest --cov=notebookc</code>命令之后，将显示以下报告。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83c/566/d29/83c566d2942cbafcedd03de799b0eacd.png"></div><br>  <i><font color="#999999">代码覆盖率报告</font></i> <br><br> 事实证明，所有项目代码都提供了测试。 如果整个项目由几行代码组成，则非常容易实现此类指标。 <br><br> 现在让我们谈谈一个工具，该工具可让您通过测试覆盖其代码来保持项目状态的公开历史记录。 <br><br><h2>  <font color="#3AC1EF">步骤9.使用工作服</font> </h2><br>  Coveralls项目使您可以维护有关测试代码覆盖率的历史信息。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c0/616/ecd/8c0616ecddd054d1adabf0532c75f69b.png"></div><br>  <i><font color="#999999">工作服</font></i> <br><br> 为了利用此项目的功能，您需要使用GitHub帐户的数据在站点<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://coveralls.io/</a>上注册。 然后，您需要连接存储库。 <br><br> 在<code>requirements_dev.txt</code>文件中，添加<code>coveralls==1.6.0</code> 。 顺便说一下，此文件在项目的现阶段工作应如下所示： <br><br><pre> <code class="python hljs">pip==<span class="hljs-number"><span class="hljs-number">19.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> wheel==<span class="hljs-number"><span class="hljs-number">0.33</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> twine==<span class="hljs-number"><span class="hljs-number">1.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> pytest==<span class="hljs-number"><span class="hljs-number">4.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> pytest-cov==<span class="hljs-number"><span class="hljs-number">2.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> coveralls==<span class="hljs-number"><span class="hljs-number">1.6</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  <code>.travis.yml</code>文件，将其转换为这种形式（在您的情况下，项目名称将在此处）： <br><br><pre> <code class="python hljs">dist: xenial language: python python: <span class="hljs-number"><span class="hljs-number">3.7</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> install: — pip install -r requirements_dev.txt — pip install -e . script: — pytest --cov=my_package_name after_success: — coveralls</code> </pre> <br> 现在，当Travis构建项目时，他将安装必要的程序包，运行测试并创建有关测试代码覆盖率的报告。 然后，此报告将发送到Coveralls服务。 <br><br> 提交，将代码提交到GitHub，然后看看会发生什么。 代码覆盖率测试报告可能需要几分钟才能进入Coveralls。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7eb/19d/967/7eb19d96768a592ef21b611ab69e3509.png"></div><br>  <i><font color="#999999">项目处理，测试覆盖率报告</font></i> <br><br> 现在，在PR检查中，还有Coverovers执行的检查。 <br><br> 在“工作服”页面上，您可以验证项目是否100％被测试覆盖。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24a/f45/762/24af45762ed1b6f80a4b558ab24fcef1.png"></div><br>  <i><font color="#999999">测试覆盖率信息</font></i> <br><br> 现在，让我们为项目配备另一个有用的工具。 <br><br><h2>  <font color="#3AC1EF">步骤10.使用PyUp</font> </h2><br> 通过PyUp.io服务，开发人员可以了解开发人员使用的依赖项是否过时以及它们是否存在漏洞。 该服务会自动执行旨在更新GitHub上软件包的请求请求。 为了利用此项目的功能，您需要使用GitHub帐户在其网站上注册-https: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//pyup.io/</a> 。 添加存储库时，建议将“ <code>Update Schedules</code>设置为<code>Update Schedules</code> <code>every week</code> 。 使用这种方法，如果您的项目具有许多依赖关系，则不会遇到太多的请求请求。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fe/4d5/14f/8fe4d514fe0efef8c8c0bea40451f4d3.png"></div><br>  <i><font color="#999999">配置更新</font></i> <br><br> 这是PyUp.io网站上的软件包信息，其中有些已经过时。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/372/26a/e7a/37226ae7a12381601d7335b1ae935d17.png"></div><br>  <i><font color="#999999">包装详情</font></i> <br><br> 使用此服务，您将始终知道何时使用最新版本的软件包。 正如他们所说，知识是成功的一半。 第二部分显然是用于更新依赖项的自动拉取请求。 <br><br><h2>  <font color="#3AC1EF">总结</font> </h2><br> 在本文中，您学习了在开发Python项目时如何使用诸如Black，pytest，Travis CI，Coveralls和PyUp之类的工具。 它们帮助控制项目依赖关系，格式化和测试代码，以及验证和构建项目。 我们希望您发现这些工具有用。 <br><br>  <b>亲爱的读者们！</b> 开发Python项目时使用什么工具？ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN444344/">https://habr.com/ru/post/zh-CN444344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN444332/index.html">信息安全和餐饮：经理如何看待IT产品</a></li>
<li><a href="../zh-CN444336/index.html">Swift捕获列表：弱链接，强链接和无主链接有什么区别？</a></li>
<li><a href="../zh-CN444338/index.html">Python 3中的封装</a></li>
<li><a href="../zh-CN444340/index.html">在JavaScript中使用Symbol数据类型的功能</a></li>
<li><a href="../zh-CN444342/index.html">使用Webpack和高级Web技术开发简单，现代的JavaScript应用程序</a></li>
<li><a href="../zh-CN444346/index.html">GraphQL和Golang</a></li>
<li><a href="../zh-CN444348/index.html">功能性React组件与基于类的组件有何不同？</a></li>
<li><a href="../zh-CN444350/index.html">由于某些原因，MVP（最低可行产品）无法启动</a></li>
<li><a href="../zh-CN444352/index.html">Kontur.Kampus：我们邀请您参观圣彼得堡附近的工业发展免费学生营</a></li>
<li><a href="../zh-CN444356/index.html">React教程第24部分：第二形式课</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>