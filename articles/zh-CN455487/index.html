<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕋 👆 🤜🏾 培训Cisco 200-125 CCNA v3.0。 第10天。交换机端口操作模式 ⚒️ ✋🏻 👩🏼‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今天，我们将研究交换机端口模式和交换机功能。 交换机具有两种操作模式：“访问”或“静态访问”，以及“中继线-隧道中继模式”。 当您将任何终端设备连接到交换机端口时，将使用第一种模式。 如果将个人计算机或便携式计算机连接到交换机，则其端口将用作访问端口。 为了设置此模式，在开关设置中，您必须使用swi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>培训Cisco 200-125 CCNA v3.0。 第10天。交换机端口操作模式</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/455487/">今天，我们将研究交换机端口模式和交换机功能。 交换机具有两种操作模式：“访问”或“静态访问”，以及“中继线-隧道中继模式”。 当您将任何终端设备连接到交换机端口时，将使用第一种模式。 如果将个人计算机或便携式计算机连接到交换机，则其端口将用作访问端口。 为了设置此模式，在开关设置中，您必须使用switchport mode access命令。 从我们的视频教程中，您已经知道，当命令行的格式为（config-if）＃时，这意味着在这种情况下，开关接口被指定为f0 / 1或g0 / 1。 因此，我们有一个switch interface子命令，它可以用于任何其他端口。 <br><br><img src="https://habrastorage.org/webt/lc/pl/jd/lcpljd1ee-mabh6lmd-cdeqooig.jpeg"><br><br> 通常，当您键入switchport mode access命令时，它指的是VLAN的配置。 但是，此时，您可能不必担心VLAN；而应关注端口模式。 因此，此模式用于将特定的交换机端口连接到用户的终端设备。 <a name="habracut"></a><br><br> 第二种模式称为中继端口或中继端口。 它用于将一台交换机的端口连接到另一台交换机或路由器。 该术语是由Cisco创造的，其他网络设备制造商则以不同的方式称呼它。 在讨论VLAN时，我们将更详细地讨论中继模式，现在，请记住，将交换机连接到另一台交换机时使用Trunk模式，而连接到终端设备时使用Access模式。 请注意，我们不是在谈论交换模式，而是在讨论特定的端口模式，任何交换端口都可以配置为这些模式之一。 <br><br> 要将端口置于中继模式，请使用switchport mode trunk命令。 我注意到在谈论端口模式时，我们需要针对这些模式谈一谈特殊协议，称为动态中继协议，DTP是动态中继协议。 这是思科专有的协议，也就是说，除思科产品外，它不能与任何其他交换机一起使用。 还有其他网络设备制造商采用了Cisco DTP协议的概念，但是，由于该系列视频教程的重点是Cisco CCNA，因此我们将不考虑其他开发人员的产品。 <br><br><img src="https://habrastorage.org/webt/jj/zl/df/jjzldfoplg_mramafi_rfsrrhx8.jpeg"><br><br> 此协议中包含三种模式：两种“动态所需”和“动态自动”操作模式，第三种“无协商”模式仅禁用DTP。 <br><br> 如果该端口处于“动态所需”模式，则它将立即开始发送DTP数据包，即成为中继端口。 它从提供中继连接的协议名称开始，在这种情况下，理想的协议模式的名称“期望”表示端口“希望”成为中继。 假设我有一个中继端口，而您有Telnet，也许我想让您成为一个中继端口，但是您不想！ <br><br> 但是，如果另一端的交换机端口也以“动态所需”模式工作，那么我们以“动态所需”模式工作的端口将成为中继端口。 如果我们的端口处于“动态自动”模式，而下一个端口处于“动态所需”模式，则会发生相同的情况。 一旦我们的端口从其接收到DTP数据包，它将立即成为中继端口。 <br><br> 但是，如果两个交换机都处于动态自动模式，则会出现问题-在此模式下，两个交换机都不会执行任何操作，因为这是被动待机模式，该模式在端口接收DTP数据包之前不会提供任何操作。 因此，如果两个交换机都处于动态自动模式，则不会发生中继线中继线连接。 <br><br> 因此，如果要自动创建中继线连接，则至少其中一台交换机（或交换机端口）必须处于“动态所需”模式。 <br><br> 但是，不断地将其中一个开关保持在“动态所需”状态并不是很好。 假设您组织中的所有交换机都处于“动态自动”或“动态所需”状态。 如果某个坏蛋打算破解您的交换机并进入系统，那么他这样做将非常容易。 他需要做的就是得到一个交换机，该交换机的端口之一连接到办公室交换机，并将其设置为“动态所需”模式。 一旦发生这种情况，该公司的交换机将成为中继线，并为攻击者提供机会拦截通过它的所有流量。 <br><br> 在中继模式下，2或3台交换机共享相同的数据。 这类似于扩展交换机的功能-如果它具有8个端口，并且使用中继线连接到另一个8端口交换机，请考虑您具有16端口交换机。 这是默认情况下中继的工作方式，除非您当然采取了特殊措施来防止一台交换机将其流量发送到另一台。 但是通常，如果在两个8端口交换机之间组织中继，则只会得到一个16端口交换机。 <br><br> 如果黑客获得了对您的交换机的访问权并创建了中继，则公司交换机将开始向攻击者的交换机发送所有流量，后者可以使用任何软件来分析整个组织的流量。 <br><br> 为避免这种情况，您可以通过输入switchport nonegotiate命令来使用No Negotiate模式。 因此，如果不使用该命令，请确保使用此命令禁用DTP协议。 <br><br> 如果使用访问交换机端口模式，它将禁用中继。 就像我们已经说过的那样，如果需要静态操作模式，则可以配置Access，如果需要动态DTP协议模式，则可以使用Trunk。 这是使用交换机端口操作模式的概念，希望您已经学到了。 <br><br> 现在我们来考虑通信功能。 交换机基本上执行三个功能：地址学习-存储MAC地址，转发决策-决定发送数据，以及回避环路，或防止闭环或网络环路。 <br><br><img src="https://habrastorage.org/webt/jj/zf/zs/jjzfzsruqwaup9ey8uywa3xdq4u.jpeg"><br><br> 让我们从记住地址开始。 我们已经讨论过了，但是由于我们在谈论开关，让我再次提醒您。 交换机连接到网络后，所有网络设备将在30-40秒内连接到它，并且它们开始“通信”。 我会说计算机真的很喜欢交流，不断广播，说：“嘿，这是我的MAC地址！”。 假设我们有五个网络设备，每个设备都在广播，例如，这些设备可能是ARP请求。 每次打开计算机时，它都会向网络报告其MAC地址。 如果交换机从连接到端口1的第一台设备收到广播消息，它将读取此消息中包含的MAC地址，并记住其第一端口已连接到该特定地址。 交换机根据此信息在其MAC地址表中创建一个条目。 该表有时称为CAM表或关联内存表。 以相同的方式，它与第二，第三，第四，第五网络设备相关联-一旦交换机接收到具有MAC地址的广播消息，它将立即将其放入其表中，以创建相应的记录。 <br><br> 如果某个网络设备想要联系任何MAC地址，则交换机会检查其表中是否存在有关该地址的记录，并根据此信息来决定发送数据。 让我们仔细看看这个过程。 <br><br> 在OSI模型的第二个（通道）级别上，有两种类型的交换机转移决策-直通或转移，以及存储与转发，与中间存储一起转移。 考虑这两种类型的切换之间的区别。 <br><br><img src="https://habrastorage.org/webt/ko/kb/3x/kokb3xbojjmfkxcohzf17-ybgas.jpeg"><br><br> 假设一个网络设备将要与另一台设备通信。 为此，它发送一个包含其MAC地址，目标MAC地址和其他必要信息的帧。 交换机一接收到该帧，便会首先查看目标MAC地址，该地址位于该帧的前几个字节中，然后立即将该帧传输到目标端口。 这就是直通切换的全部内容。 <br><br> 如果使用“存储转发”传输类型，则交换机将等待直到接收到整个帧。 然后，它检查接收到的帧中是否存在传输期间可能发生的错误。 如果没有错误，它将帧传递到目标端口。 <br><br> 有些人认为直通就足够了，其他人则说：“不，我们绝对需要错误检查！” 这个问题没有确定的解决方案，这完全取决于具体情况。 如果需要快速传输，并且希望交换机尽快转发流量，请使用直通交换模式。 如果您需要更可靠，经过测试的流量，请使用存储转发。 <br><br> 现在让我们看一下循环避免。 如您所记得，我已经在课程之一中说过，当交换机收到广播消息时，它会将其发送到所有端口。 现在，我画了2个开关，红色箭头显示了数据的接收和传输。 通常，您将一个交换机连接到另一根电缆，形成中继线。 但是，随着网络的发展，您不再对一根用于传输数据的电缆感到满意，您希望加快流量交换过程，并使用另一根电缆连接设备，从而创建另一条中继线。 <br><br><img src="https://habrastorage.org/webt/um/-d/hq/um-dhqpwnnolmhp5tg9nppoytfy.jpeg"><br><br> 当然，您可以物理上断开一根电缆的连接，而保留另一根电缆的连接，并且交换机之间的连接不会中断，但是，大多数网络管理员更喜欢同时使用两条中继线。 因此，对于连接两个交换机，我们没有一种方法，而是有两种方法，这种连接可能导致数据包循环问题。 当两个端点之间的OSI模型层2上有一条以上的路径时，例如，当两个交换机相互之间有多个连接或两个交换机端口相互连接时，就会发生这种情况。 <br><br> 现在，我将在左侧绘制另一台设备-一台计算机。 当此计算机广播时，交换机将接收流量并将其转发到其所有端口。 在我们的情况下，这意味着左交换机将同时通过连接到其两个端口的上电缆和下电缆发送流量。 当右交换机在上部电缆上接收到通信量时，它将把它发送到与下部电缆相连的第二个端口，并且该通信量将冲回到左交换机上。 当来自下部电缆左侧交换机的流量到达右侧交换机时，右侧交换机会将其重定向至其第一个端口，并且由于这是宽带传输，因此它将通过上部电缆将其发送至左侧交换机。 <br><br><img src="https://habrastorage.org/webt/6b/9c/yx/6b9cyxfl11tszsvo3phhagsrtyc.jpeg"><br><br> 反过来，从右侧交换机接收到流量的左侧交换机会将其重定向到另一个端口，然后将其发送回去，并对电缆所连接的两个端口都执行此操作。 该过程将无限期地重复，即在两个交换机之间形成一个具有相同业务量的闭环或闭环。 <br><br> 检测系统中的循环流量非常困难。 与OSI模型级别3不同，没有指示器显示流量环路，在OSI模型级别3中，有很多防止环路的机制。 这是因为在OSI模型的第2级，标头不支持TTL帧的生存期值，并且如果帧循环，则它可以永远存在。 <br><br> 另外，交换机的MAC地址表过滤器会混淆设备的位置，因为交换机将从多个通信通道接收帧，并且无法将其与任何特定的设备匹配。 <br><br> 生成树协议或STP可以防止在网络拓扑中出现流量环路，从而有助于解决此问题。 您可以从Wikipedia文章中了解有关此协议的更多信息，现在您只需要熟悉其概念即可。  STP检查是否有冗余连接。 在我们的情况下，同一交换机之间有2条连接，即存在冗余。 在下面的视频教程中，我将详细介绍STP的工作原理，但现在我只是说它按照其自己的规则工作，并在逻辑上断开多余的电缆。 从物理上讲，两条电缆均保持连接状态，但从逻辑上讲，其中一根已断开连接。 因此，由上电缆连接的两个端口继续交换流量，但是由下电缆连接的端口之一在逻辑上被禁用。 <br><br> 假设上部电缆的连接由于某种原因而中断。 在这种情况下，STP协议立即包括通过下部电缆连接的端口之一，并且数据交换继续进行而不会中断。 <br><br><img src="https://habrastorage.org/webt/jx/rg/q9/jxrgq9avnq_cck7xs9hk3ujax_e.jpeg"><br><br> 我向您介绍了一个非常简单的STP概念：这是一种断开冗余连接的机制。 在此幻灯片上，您可以看到STP协议的类比-一棵倒下的树挡住了道路，道路“断路了”。 <br><br> 在下面的视频教程中，我们将返回上几集中简要讨论的许多主题。 因此，我告诉我的学生不要担心我们会错过一些重要的事情：这就像在没有人开始粉刷一楼的墙壁直到其他楼层竖立之前建造一栋建筑物。 我不知道我们的课程中将会有多少节视频课，也许是40或50，因为如果您对某个主题更感兴趣，那么我将另外安排一课。 只需相信，在我的帮助下，您将获得所有知识以获取CCNA证书，甚至学到了很多不必要的知识。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/u4ua58qgJCc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 感谢您与我们在一起。 你喜欢我们的文章吗？ 想看更多有趣的资料吗？ 通过下订单或将其推荐给您的朋友来支持我们， <b>为我们为您发明的入门级服务器的独特模拟，为Habr用户</b>提供<b>30％的折扣：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">关于VPS（KVM）E5-2650 v4（6核）的全部真相10GB DDR4 240GB SSD 1Gbps从$ 20还是如何划分服务器？</a>  （RAID1和RAID10提供选件，最多24个内核和最大40GB DDR4）。 <br><br>  <b>戴尔R730xd便宜2倍？</b> 仅<b>在荷兰，</b>我们有<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2台Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100电视</a> ！</b>  <b><b>戴尔R420-2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB-$ 99起！</b></b> 阅读有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">如何构建基础架构大厦的信息。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用价格为9000欧元的Dell R730xd E5-2650 v4服务器的上等课程？</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN455487/">https://habr.com/ru/post/zh-CN455487/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN455477/index.html">将对象单例放置在ROM和静态变量中（以Cortex M4微控制器为例的C ++）</a></li>
<li><a href="../zh-CN455479/index.html">我们如何实现从Jetpack导航到战斗应用的导航。 Yandex食品报告</a></li>
<li><a href="../zh-CN455481/index.html">关于野生狩猎的三个故事</a></li>
<li><a href="../zh-CN455483/index.html">艾达（Ai-Da）艺术家：人形机器人为其首次个展做准备</a></li>
<li><a href="../zh-CN455485/index.html">Check Point脚本-直接从Smart Console执行脚本</a></li>
<li><a href="../zh-CN455489/index.html">将第三方音频和视频解决方案连接到Microsoft Teams</a></li>
<li><a href="../zh-CN455493/index.html">Angular 8版本的新功能</a></li>
<li><a href="../zh-CN455497/index.html">最佳线性滤波：从梯度下降到自适应滤波器</a></li>
<li><a href="../zh-CN455499/index.html">拔智齿：这是怎么做的？</a></li>
<li><a href="../zh-CN455501/index.html">好莱坞如何秘密使用AI做出关键的拍摄决策</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>