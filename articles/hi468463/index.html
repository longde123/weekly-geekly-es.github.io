<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСйЁЯП┐тАНЁЯдЭтАНЁЯСйЁЯП╛ ЁЯСйтАНЁЯН│ ЁЯУЛ рд╡рд┐рднрд╛рдЬрди рдФрд░ рдЕрдиреБрдХреНрд░рдордг рдХреЗ рд╕рд╛рде Zabbix + PostgreSQL рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ ЁЯСйтАНЁЯСж ЁЯСитАНЁЯСйтАНЁЯСж ЁЯН│</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд▓рдЧрднрдЧ рдПрдХ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдореБрдЭреЗ рдФрд░ рдореЗрд░реЗ рд╕рд╣рдпреЛрдЧрд┐рдпреЛрдВ рдХреЛ рд▓реЛрдХрдкреНрд░рд┐рдп рдиреЗрдЯрд╡рд░реНрдХ рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдирд┐рдЧрд░рд╛рдиреА рдкреНрд░рдгрд╛рд▓реА - рдЬрд╝реИрдмрд┐рдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЫрд╛рдБрдЯрдиреЗ рдХрд╛ рдХрд╛рдо рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рдерд╛ред рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╡рд┐рднрд╛рдЬрди рдФрд░ рдЕрдиреБрдХреНрд░рдордг рдХреЗ рд╕рд╛рде Zabbix + PostgreSQL рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468463/"> рд▓рдЧрднрдЧ рдПрдХ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдореБрдЭреЗ рдФрд░ рдореЗрд░реЗ рд╕рд╣рдпреЛрдЧрд┐рдпреЛрдВ рдХреЛ рд▓реЛрдХрдкреНрд░рд┐рдп рдиреЗрдЯрд╡рд░реНрдХ рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдирд┐рдЧрд░рд╛рдиреА рдкреНрд░рдгрд╛рд▓реА - рдЬрд╝реИрдмрд┐рдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЫрд╛рдБрдЯрдиреЗ рдХрд╛ рдХрд╛рдо рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рдерд╛ред  рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рддреБрд░рдВрдд рдкрд░реАрдХреНрд╖рдг рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝реЗ: рд╣рдо рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рдереЗ рдХрд┐ рдЬрд╝реИрдмрд┐рдХреНрд╕ рдХрд┐рддрдиреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдкреНрд░рджрд░реНрд╢рди рдмреВрдВрджреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдХреЗрд╡рд▓ PostgreSQL DBMS рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br>  рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рджреМрд░рд╛рди, рдбреЗрдЯрд╛рдмреЗрд╕ рд▓реЗрдЖрдЙрдЯ рдХреЗ рдХреБрдЫ рд╡рд╛рд╕реНрддреБрд╢рд┐рд▓реНрдк рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдФрд░ рд╕реНрд╡рдпрдВ рдирд┐рдЧрд░рд╛рдиреА рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреА рдкрд╣рдЪрд╛рди рдХреА рдЧрдИ, рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рдЧрд░рд╛рдиреА рдкреНрд░рдгрд╛рд▓реА рдХреЛ рдЕрдкрдиреА рдЕрдзрд┐рдХрддрдо рд╢рдХреНрддрд┐ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдЯреНрдпреВрди рдХрд░рдиреЗ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдХреБрдЫ рдЕрдиреБрдХреВрд▓рди рдЙрдкрд╛рдпреЛрдВ рдХрд╛ рд╡рд┐рдХрд╛рд╕, рд╕рдВрдЪрд╛рд▓рди рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЧрдпрд╛ред <br><br>  рдореИрдВ рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдХрд┐рдП рдЧрдП рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред  рдпрд╣ рд▓реЗрдЦ Zabbix рдФрд░ PostgreSQL DBA рдкреНрд░рд╢рд╛рд╕рдХреЛрдВ, рд╕рд╛рде рд╣реА рдЙрди рд╕рднреА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ рдЬреЛ рд▓реЛрдХрдкреНрд░рд┐рдп PosgreSQL DBMS рдХреЛ рдмреЗрд╣рддрд░ рдврдВрдЧ рд╕реЗ рд╕рдордЭрдирд╛ рдФрд░ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред <br><br>  рдПрдХ рдЫреЛрдЯрд╛ рд╕реНрдкреЙрдЗрд▓рд░: рдкреНрд░рддрд┐ рдорд┐рдирдЯ 200 рд╣рдЬрд╛рд░ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рднрд╛рд░ рдХреЗ рд╕рд╛рде рдПрдХ рдХрдордЬреЛрд░ рдорд╢реАрди рдкрд░, рд╣рдордиреЗ рд╕реАрдкреАрдпреВ рдЖрдпреЛрд╡рд╛рдЗрдЯ рдХреЛ 20% рд╕реЗ 2% рддрдХ рдХрдо рдХрд░рдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣рд╛, рдкреНрд░рд╛рдердорд┐рдХ рдбреЗрдЯрд╛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рднрд╛рдЧреЛрдВ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рд╕рдордп рдХреЛ 250 рдЧреБрдирд╛ рддрдХ рдХрдо рдХрд░ рджрд┐рдпрд╛ рдФрд░ 32 рдмрд╛рд░ рдбреЗрдЯрд╛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдХрдо рдХрд░рдХреЗ, рдЕрдиреБрдХреНрд░рдорд┐рдд рдХреЗ рдЖрдХрд╛рд░ рдХреЛ рдХрдо рдХрд░ рджрд┐рдпрд╛ред 5-10 рдмрд╛рд░ рдФрд░ 18 рдмрд╛рд░ рддрдХ рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рдирдореВрдиреЛрдВ рдХреА рдкреНрд░рд╛рдкреНрддрд┐ рдореЗрдВ рддреЗрдЬреА рд▓рд╛рдПрдВред <br><a name="habracut"></a><br><h4>  рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг </h4><br>  рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдпреЛрдЬрдирд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛: рдПрдХ рдЬрд╝реИрдмрд┐рдХреНрд╕ рд╕рд░реНрд╡рд░, рдПрдХ рд╕рдХреНрд░рд┐рдп рдЬрд╝реИрдмрд┐рдХреНрд╕ рдкреНрд░реЙрдХреНрд╕реА, рджреЛ рдПрдЬреЗрдВрдЯред  рдкреНрд░рддреНрдпреЗрдХ рдПрдЬреЗрдВрдЯ рдХреЛ рдкреНрд░рддрд┐ рдорд┐рдирдЯ 50 рдЯрди рдкреВрд░реНрдгрд╛рдВрдХ рдФрд░ 50 рдЯрди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреИрд░рд╛рдореАрдЯрд░ (рдкреНрд░рддрд┐ рдорд┐рдирдЯ 200 рдЯрди рдкреИрд░рд╛рдореАрдЯрд░ рдпрд╛ рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб 3333 рдкреИрд░рд╛рдореАрдЯрд░) рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдПрдЬреЗрдВрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдордиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Zabbix рдХреЗ рд▓рд┐рдП рдкреНрд▓рдЧ-рдЗрди рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ред</a> рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдПрдХ рдПрдЬреЗрдВрдЯ рдХрд┐рддрдиреЗ рдкреИрд░рд╛рдореАрдЯрд░ рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЖрдкрдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрд╕реА рдкреНрд▓рдЧ-рдЗрди рд▓реЗрдЦрдХ zabbix_module_stress рд╕реЗ</a> рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рд╢реЗрд╖ рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  Zabbix рд╡реЗрдм-рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЛ рдмрдбрд╝реЗ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдореЗрдВ рдХрдард┐рдирд╛рдЗрдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ 5 рдЯрди рдорд╛рдкрджрдВрдбреЛрдВ (2500 рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдФрд░ 2500 рд╕реНрдЯреНрд░рд┐рдВрдЧ) рдХреЗ рд╕рд╛рде 20 рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдЕрдЬрдЧрд░ рдореЗрдВ рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬрдирд░реЗрдЯрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> argparse <span class="hljs-string"><span class="hljs-string">"""     .   20   5000    ( 2500  :  echo,  ;  ping,  ) """</span></span> TEMP_HEAD = <span class="hljs-string"><span class="hljs-string">""" &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;zabbix_export&gt; &lt;version&gt;2.0&lt;/version&gt; &lt;date&gt;2015-08-17T23:15:01Z&lt;/date&gt; &lt;groups&gt; &lt;group&gt; &lt;name&gt;Templates&lt;/name&gt; &lt;/group&gt; &lt;/groups&gt; &lt;templates&gt; &lt;template&gt; &lt;template&gt;Template Zabbix Srv Stress {count} passive {char}&lt;/template&gt; &lt;name&gt;Template Zabbix Srv Stress {count} passive {char}&lt;/name&gt; &lt;description/&gt; &lt;groups&gt; &lt;group&gt; &lt;name&gt;Templates&lt;/name&gt; &lt;/group&gt; &lt;/groups&gt; &lt;applications/&gt; &lt;items&gt; """</span></span> TEMP_END = <span class="hljs-string"><span class="hljs-string">"""&lt;/items&gt; &lt;discovery_rules/&gt; &lt;macros/&gt; &lt;templates/&gt; &lt;screens/&gt; &lt;/template&gt; &lt;/templates&gt; &lt;/zabbix_export&gt; """</span></span> TEMP_ITEM = <span class="hljs-string"><span class="hljs-string">"""&lt;item&gt; &lt;name&gt;{k}&lt;/name&gt; &lt;type&gt;0&lt;/type&gt; &lt;snmp_community/&gt; &lt;multiplier&gt;0&lt;/multiplier&gt; &lt;snmp_oid/&gt; &lt;key&gt;{k}&lt;/key&gt; &lt;delay&gt;1m&lt;/delay&gt; &lt;history&gt;3&lt;/history&gt; &lt;trends&gt;365&lt;/trends&gt; &lt;status&gt;0&lt;/status&gt; &lt;value_type&gt;{t}&lt;/value_type&gt; &lt;allowed_hosts/&gt; &lt;units/&gt; &lt;delta&gt;0&lt;/delta&gt; &lt;snmpv3_contextname/&gt; &lt;snmpv3_securityname/&gt; &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt; &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt; &lt;snmpv3_authpassphrase/&gt; &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt; &lt;snmpv3_privpassphrase/&gt; &lt;formula&gt;1&lt;/formula&gt; &lt;delay_flex/&gt; &lt;params/&gt; &lt;ipmi_sensor/&gt; &lt;data_type&gt;0&lt;/data_type&gt; &lt;authtype&gt;0&lt;/authtype&gt; &lt;username/&gt; &lt;password/&gt; &lt;publickey/&gt; &lt;privatekey/&gt; &lt;port/&gt; &lt;description/&gt; &lt;inventory_link&gt;0&lt;/inventory_link&gt; &lt;applications/&gt; &lt;valuemap/&gt; &lt;logtimefmt/&gt; &lt;/item&gt; """</span></span> TMP_FNAME_DEFAULT = <span class="hljs-string"><span class="hljs-string">"Template_App_Zabbix_Server_Stress_{count}_passive_{char}.xml"</span></span> chars = <span class="hljs-string"><span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>: parser = argparse.ArgumentParser( description=<span class="hljs-string"><span class="hljs-string">'     zabbix'</span></span>) parser.add_argument(<span class="hljs-string"><span class="hljs-string">'--items'</span></span>, dest=<span class="hljs-string"><span class="hljs-string">'items'</span></span>, type=int, default=<span class="hljs-number"><span class="hljs-number">1000</span></span>, help=<span class="hljs-string"><span class="hljs-string">'-   (default: 1000)'</span></span>) parser.add_argument(<span class="hljs-string"><span class="hljs-string">'--templates'</span></span>, dest=<span class="hljs-string"><span class="hljs-string">'templates'</span></span>, type=int, default=<span class="hljs-number"><span class="hljs-number">1</span></span>, help=<span class="hljs-string"><span class="hljs-string">f'-  [1-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{len(chars)}</span></span></span><span class="hljs-string">] (default: 1)'</span></span>) args = parser.parse_args() items_count = args.items tmps_count = args.templates <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> (tmps_count &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> tmps_count &lt;= len(chars)): sys.exit(<span class="hljs-string"><span class="hljs-string">f"Templates must be in range 1 - </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{len(chars)}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(tmps_count): fname = TMP_FNAME_DEFAULT.format(count=items_count, char=chars[i]) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(fname, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> output: output.write(TEMP_HEAD.format(count=items_count, char=chars[i])) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k,t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [(<span class="hljs-string"><span class="hljs-string">'stress.ping[{}-I-{:06d}]'</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), (<span class="hljs-string"><span class="hljs-string">'stress.echo[{}-S-{:06d}]'</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>)]: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(int(items_count/<span class="hljs-number"><span class="hljs-number">2</span></span>)): output.write(TEMP_ITEM.format(k=k.format(chars[i],j),t=t)) output.write(TEMP_END)</code> </pre> <br></div></div><br>  рд╕реАрдкреАрдпреВ рдЖрдИрдУрд╕реНрдЯрд╛рдЯ рдореАрдЯреНрд░рд┐рдХ рдЬрд╝реИрдмрд┐рдХреНрд╕ рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╕рдВрдХреЗрддрдХ рд╣реИ - рдпрд╣ рдЙрд╕ рд╕рдордп рдХреА рдЗрдХрд╛рдИ рдХреЗ рдЕрдВрд╢ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рджреМрд░рд╛рди рдкреНрд░реЛрд╕реЗрд╕рд░ рдбрд┐рд╕реНрдХ рдПрдХреНрд╕реЗрд╕ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдЬрд┐рддрдирд╛ рдЕрдзрд┐рдХ рд╣реЛрдЧрд╛, рдбрд┐рд╕реНрдХ рдХреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде рдХрдмреНрдЬрд╛ рдХрд░ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдЕрдкреНрд░рддреНрдпрдХреНрд╖ рд░реВрдк рд╕реЗ рдирд┐рдЧрд░рд╛рдиреА рдкреНрд░рдгрд╛рд▓реА рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рдЧрд┐рд░рд╛рд╡рдЯ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдпрд╛рдиреА  рдпрд╣ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдХреЗрдд рд╣реИ рдХрд┐ рдирд┐рдЧрд░рд╛рдиреА рдореЗрдВ рдХреБрдЫ рдЧрдбрд╝рдмрдбрд╝ рд╣реИред  рд╡реИрд╕реЗ, рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдЦреБрд▓реЗ рд╕реНрдерд╛рдиреЛрдВ рдкрд░, рдмрд▓реНрдХрд┐ рд▓реЛрдХрдкреНрд░рд┐рдп рд╕рд╡рд╛рд▓ рдпрд╣ рд╣реИ рдХрд┐ "рдЬрд╝реЙрдмрд┐рдХреНрд╕ рдореЗрдВ iostat рдЯреНрд░рд┐рдЧрд░ рдХреЛ рдХреИрд╕реЗ рд╣рдЯрд╛рдпрд╛ рдЬрд╛рдП", рдЗрд╕рд▓рд┐рдП рдпрд╣ рдПрдХ рдкреАрдбрд╝рд╛рджрд╛рдпрдХ рдмрд┐рдВрджреБ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдпреЛрд╡рд╛рдЗрдЯ рдореАрдЯреНрд░рд┐рдХ рдХреЗ рдореВрд▓реНрдп рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЗ рдХрдИ рдХрд╛рд░рдг рд╣реИрдВред <br><br>  рдпрд╣рд╛рдБ рд╕реАрдкреАрдпреВ рдЗрд╡рд╛рдЗрдЯ рдореЗрдЯреНрд░рд┐рдХ рдХреЗ рд▓рд┐рдП рдЪрд┐рддреНрд░ рд╣реИ рдЬреЛ рд╣рдореЗрдВ рддреАрди рджрд┐рди рдмрд╛рдж рд╢реБрд░реВ рдореЗрдВ рдорд┐рд▓рд╛: <br><br><img src="https://habrastorage.org/webt/dc/md/yo/dcmdyote_ghzxca-o9sft88ptxq.png"><br><br>  рд▓реЗрдХрд┐рди рдПрдХ рд╣реА рдореЗрдЯреНрд░рд┐рдХ рдХреЗ рд▓рд┐рдП рдЬреЛ рдЪрд┐рддреНрд░ рд╣рдореЗрдВ рднреА рдорд┐рд▓рд╛ рд╡рд╣ рддреАрди рджрд┐рдиреЛрдВ рдХреЗ рднреАрддрд░ рдЕрдВрдд рдореЗрдВ рд╕рднреА рдЕрдиреБрдХреВрд▓рди рдЙрдкрд╛рдпреЛрдВ рдХреЗ рдмрд╛рдж рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдиреАрдЪреЗ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреА: <br><br><img src="https://habrastorage.org/webt/do/cs/fc/docsfcjjczkhgxoubjayslrohuw.png"><br><br>  рдЬреИрд╕рд╛ рдХрд┐ рд░реЗрдЦрд╛рдВрдХрди рд╕реЗ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╕реАрдкреАрдпреВ рдЖрдпреЛрд╡рд╛рдЗрдЯ рдЗрдВрдбрд┐рдХреЗрдЯрд░ рд▓рдЧрднрдЧ 20% рд╕реЗ 2% рддрдХ рдЧрд┐рд░ рдЧрдпрд╛, рдЬрд┐рд╕рдиреЗ рдЕрдкреНрд░рддреНрдпрдХреНрд╖ рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдЬреЛрдбрд╝рдиреЗ рдФрд░ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп рдХреЛ рддреЗрдЬ рдХрд░ рджрд┐рдпрд╛ред  рдЕрдм рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдорд╛рдирдХ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде, рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рд╕рдордЧреНрд░ рдкреНрд░рджрд░реНрд╢рди рдХреИрд╕реЗ рдЧрд┐рд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдХреИрд╕реЗ рдареАрдХ рдХрд┐рдпрд╛ рдЬрд╛рдПред <br><br><h4>  Zabbix рдкреНрд░рджрд░реНрд╢рди рдбреНрд░реЙрдк рдХреЗ рдХрд╛рд░рдг </h4><br>  рдкреНрд░рд╛рдердорд┐рдХ рдбреЗрдЯрд╛ рдХреА рдкреНрд░рддреНрдпреЗрдХ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ 10 рдорд┐рд▓рд┐рдпрди рд╕реЗ рдЕрдзрд┐рдХ рдкреИрд░рд╛рдореАрдЯрд░ рдорд╛рдиреЛрдВ рдХреЗ рд╕рдВрдЪрдп рдХреЗ рд╕рд╛рде, рдпрд╣ рджреЗрдЦрд╛ рдЧрдпрд╛ рдХрд┐ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдирд┐рдореНрди рдХрд╛рд░рдгреЛрдВ рд╕реЗ рддреЗрдЬреА рд╕реЗ рдЧрд┐рд░рддрд╛ рд╣реИ: <br><br><ul><li>  рд╕рд░реНрд╡рд░ рд╕реАрдкреАрдпреВ рдХреЗ рд▓рд┐рдП iowait рдореАрдЯреНрд░рд┐рдХ 20% рд╕реЗ рдЕрдзрд┐рдХ рдХреА рд╡реГрджреНрдзрд┐ рд╣реБрдИ рд╣реИ, рдЬреЛ рдЙрд╕ рд╕рдордп рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рджреМрд░рд╛рди рд╕реАрдкреАрдпреВ рдбрд┐рд╕реНрдХ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдЙрдореНрдореАрдж рдХрд░рддрд╛ рд╣реИред </li><li>  рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреА рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдЬрд┐рд╕рдореЗрдВ рдбреЗрдЯрд╛ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдмрд╣реБрдд рдмрдврд╝ рдЬрд╛рддреА рд╣реИ </li><li>  рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдбрд┐рд╕реНрдХ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдореАрдЯреНрд░рд┐рдХ 100% рддрдХ рдмрдврд╝рд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде рдбрд┐рд╕реНрдХ рдХреЗ рдкреВрд░реНрдг рд▓реЛрдб рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ </li><li>  рд╣рд╛рдЙрд╕рдХреАрдкрд░ рдХреЗ рд╢реЗрдбреНрдпреВрд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдлрд╛рдИ рдХрд░рддреЗ рд╕рдордп рдЕрдкреНрд░рдЪрд▓рд┐рдд рдорд╛рдиреЛрдВ рдХреЛ рд╣рд┐рд╕реНрдЯреНрд░реА рдЯреЗрдмрд▓ рд╕реЗ рд╣рдЯрд╛рдиреЗ рдХрд╛ рд╕рдордп рдирд╣реАрдВ рд╣реИ </li></ul><br>  рд╕реНрдерд┐рддрд┐ рдкреНрд░рддреНрдпреЗрдХ рдШрдВрдЯреЗ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдмрдврд╝ рдЬрд╛рддреА рд╣реИ, рдЬрдм рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХрддреНрд░рд┐рдд рдШрдВрдЯреЗ рдХреЗ рдЖрдБрдХрдбрд╝реЛрдВ рдХреА рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИ - рдЙрд╕реА рд╕рдордп, рдбрд┐рд╕реНрдХ рд╕реЗ рд╕реВрдЪрдХрд╛рдВрдХ рдкреГрд╖реНрдареЛрдВ рдХреЗ рд╕рдХреНрд░рд┐рдп рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ, рдЗрддрд┐рд╣рд╛рд╕ рд╕реЗ рдкреБрд░рд╛рдиреЗ рдбреЗрдЯрд╛ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рд╣реА рдкрд░рд┐рдгрд╛рдо рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ - рдбреЗрдЯрд╛рдмреЗрд╕ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рдЧрд┐рд░рд╛рд╡рдЯ рдФрд░ рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп рдореЗрдВ рд╡реГрджреНрдзрд┐ред рдЕрдиреБрд░реЛрдз (рд╕реАрдорд╛ рдореЗрдВ, 5 рдорд┐рдирдЯ рддрдХ рдЪрд▓рдиреЗ рдХрд╛ рдЕрдиреБрд░реЛрдз рдиреЛрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛!)ред <br><br>  Zabbix рдореЗрдВ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдбреЗрдЯрд╛ рд╡реЗрдпрд░рд╣рд╛рдЙрд╕ рдХреЗ рдЖрдпреЛрдЬрди рдкрд░ рдереЛрдбрд╝реА рдорджрджред  рдпрд╣ рдкреНрд░рд╛рдердорд┐рдХ рдбреЗрдЯрд╛ рдФрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рдкреГрдердХреНрдХрд░рдг рдХреЗ рд╕рд╛рдеред  рдкреНрд░рддреНрдпреЗрдХ рддрд╛рд▓рд┐рдХрд╛ рдПрдХ рдЖрдЗрдЯрдорд┐рдб рдлрд╝реАрд▓реНрдб (рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдбреЗрдЯрд╛ рдЖрдЗрдЯрдо рдХрд╛ рдПрдХ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕рдВрджрд░реНрдн), рдпреВрдирд┐рдХреНрд╕ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рдкреНрд░рд╛рд░реВрдк (рдПрдХ рдЕрд▓рдЧ рдХреЙрд▓рдо рдореЗрдВ рдорд┐рд▓реАрд╕реЗрдХрдВрдб) рдФрд░ рдПрдХ рдЕрд▓рдЧ рдХреЙрд▓рдо рдореЗрдВ рдПрдХ рдорд╛рди рджрд░реНрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рд╕реНрдЯреЛрд░ рдХрд░рддреА рд╣реИ (рдЕрдкрд╡рд╛рдж рд▓реЙрдЧ рдЯреЗрдмрд▓ рд╣реИ, рдЗрд╕рдореЗрдВ рдЕрдзрд┐рдХ рдлрд╝реАрд▓реНрдб рд╣реИрдВ - рдпрд╣ рдИрд╡реЗрдВрдЯ рд▓реЙрдЧ рдХреА рддрд░рд╣ рд╣реИ ): <br><div class="scrollable-table"><table><tbody><tr><th>  рдЯреЗрдмрд▓ рдХрд╛ рдирд╛рдо </th><th>  рдирд┐рдпреБрдХреНрддрд┐ </th><th>  рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ </th></tr><tr><td>  рдЗрддрд┐рд╣рд╛рд╕ </td><td>  рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ </td><td>  рд╕рдВрдЦреНрдпрд╛рддреНрдордХ (16.4) </td></tr><tr><td>  history_uint </td><td>  рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ </td><td>  рд╕рдВрдЦреНрдпрд╛рддреНрдордХ (20.0) </td></tr><tr><td>  history_str </td><td>  рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ </td><td>  рд╡рд░реНрдЪрд░ (255) </td></tr><tr><td>  history_text </td><td>  рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ </td><td>  рдЯреЗрдХреНрд╕реНрдЯ </td></tr><tr><td>  history_logs </td><td>  рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ </td><td>  рдкрд╛рда рдФрд░ int рдлрд╝реАрд▓реНрдб </td></tr><tr><td>  рдкреНрд░рд╡реГрддреНрддрд┐рдпреЛрдВ </td><td>  рдПрдХрддреНрд░рд┐рдд рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ </td><td>  рд╕рдВрдЦреНрдпрд╛рддреНрдордХ (16.4) </td></tr><tr><td>  trends_uint </td><td>  рдПрдХрддреНрд░рд┐рдд рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ </td><td>  рд╕рдВрдЦреНрдпрд╛рддреНрдордХ (20.0) </td></tr></tbody></table></div><h4>  рдЕрдиреБрдХреВрд▓рди рдХреНрд░рд┐рдпрд╛рдПрдБ </h4><br>  PostgreSQL рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╡рд┐рднрд┐рдиреНрди рдЕрдиреБрдХреВрд▓рди рдЙрдкрд╛рдп рдХрд┐рдП рдЧрдП, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдореБрдЦреНрдп рд╡рд┐рднрд╛рдЬрди рдФрд░ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдмрджрд▓ рд░рд╣реЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдХреБрдЫ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдФрд░ рдЙрдкрдпреЛрдЧреА рдЙрдкрд╛рдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рд╢рдмреНрджреЛрдВ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ рдЬреЛ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдПрд╕рдХреНрдпреВрдПрд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдкреНрд░рдмрдВрдзрди рдкреНрд░рдгрд╛рд▓реА рдХреЗ рддрд╣рдд рдХрд┐рд╕реА рднреА рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдХрд╛рдо рдХреЛ рдЧрддрд┐ рджреЗ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  <b>рдорд╣рддреНрд╡рдкреВрд░реНрдг рдиреЛрдЯред</b>  рд▓реЗрдЦ рдХреА рд╕рд╛рдордЧреНрд░реА рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рд╕рдордп, рд╣рдордиреЗ рдЬрд╝реИрдмрд┐рдХреНрд╕ рд╕рдВрд╕реНрдХрд░рдг 4.0 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╕рдВрд╕реНрдХрд░рдг 4.2 рдкрд╣рд▓реЗ рд╣реА рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЬрд╛ рдЪреБрдХрд╛ рд╣реИ рдФрд░ рд╕рдВрд╕реНрдХрд░рдг 4.4 рдХреЛ рд░рд┐рд▓реАрдЬрд╝ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░рдирд╛ рдХреНрдпреЛрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ?  рд╕рдВрд╕реНрдХрд░рдг 4.2 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг, рдЬрд╝реИрдмрд┐рдХреНрд╕ рдиреЗ TimescaleDB рдЯрд╛рдЗрдо рд╕реАрд░реАрдЬрд╝ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╡рд┐рд╕реНрддрд╛рд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдЕрдм рддрдХ рдкреНрд░рд╛рдпреЛрдЧрд┐рдХ рдореЛрдб рдореЗрдВ: рдЗрд╕ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд╕рднреА рд▓рд╛рднреЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреБрдЫ рдЕрдиреБрд░реЛрдз рдЕрдзрд┐рдХ рдзреАрдореА рдЧрддрд┐ рд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рдЪреБрдХреЗ рд╣реИрдВ рдФрд░ рдЕрднреА рднреА рдЕрдирд╕реБрд▓рдЭреА рдкреНрд░рджрд░реНрд╢рди рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реИрдВ (рд╡рд╣рд╛рдБ рд╣реЛрдЧрд╛) 4.4 рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рд╣рд▓) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ рд▓реЗрдЦ рдХреЛ рдкрдврд╝реЗрдВ</a> ред  <i>рдЕрдЧрд▓реЗ рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдЗрд╕ рд╕рдорд╛рдзрд╛рди рдХреЗ рдорд╛рдорд▓реЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ TimescaleDB рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦрдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣рд╛ рд╣реВрдВред</i>  PostgreSQL рд╕рдВрд╕реНрдХрд░рдг 10 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рджреА рдЧрдИ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА 11 рдФрд░ 12 рд╕рдВрд╕реНрдХрд░рдгреЛрдВ (рд╣рдо рдЗрдВрддрдЬрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВ!) рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реИред <br><br>  рдЗрд╕рд▓рд┐рдП, рдкрд╣рд▓реА рдЪреАрдЬреЗрдВ рдкрд╣рд▓реЗ: <br><br><ul><li>  pgtune рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд╕реЗрдЯ рдХрд░рдирд╛ </li><li>  рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдПрдХ рдЕрд▓рдЧ рднреМрддрд┐рдХ рдбрд┐рд╕реНрдХ рдкрд░ рд░рдЦрдирд╛ </li><li>  pg_pathman рдХреЗ рд╕рд╛рде рдЗрддрд┐рд╣рд╛рд╕ рд╕рд╛рд░рдгреА рдХрд╛ рд╡рд┐рднрд╛рдЬрди </li><li>  рдЗрддрд┐рд╣рд╛рд╕ рд╕рд╛рд░рдгреА рдХреЗ рдмрджрд▓рддреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдмреНрд░рд┐рди (рдШрдбрд╝реА) рдФрд░ рдмреАрдЯреА-рдЬрд┐рди (рдЖрдЗрдЯрдо) рдХреЗ рд▓рд┐рдП рдмрджрд▓рдирд╛ </li><li>  рдХреНрд╡реЗрд░реА рдирд┐рд╖реНрдкрд╛рджрди рдЖрдВрдХрдбрд╝реЛрдВ рдХрд╛ рд╕рдВрдЧреНрд░рд╣ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг pg_stat_statements </li><li>  рднреМрддрд┐рдХ рдбрд┐рд╕реНрдХ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗрдЯ рдХрд░рдирд╛ </li><li>  рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ </li><li>  рд╡рд┐рддрд░рд┐рдд рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдирд┐рд░реНрдорд╛рдг (рдЗрд╕ рд▓реЗрдЦ рдХреЗ рджрд╛рдпрд░реЗ рд╕реЗ рдкрд░реЗ рд╕рд╛рдордЧреНрд░реА) </li></ul><br><br><h4>  Pgtune рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </h4><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, PostgreSQL рдПрдХ рдХрд╛рдлреА рд╣рд▓реНрдХрд╛ DBMS рд╣реИред  рдЗрд╕рдХреА рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдЗрд╕рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдореЗрд░реЗ рд╕рд╣рдпреЛрдЧреА рдХрд╣рддреЗ рд╣реИрдВ, "рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдХреЙрдлреА рдорд╢реАрди рдкрд░ рднреА рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ", рдЕрд░реНрдерд╛рддред  рдмрд╣реБрдд рдорд╛рдореВрд▓реА рд▓реЛрд╣реЗ рдкрд░ред  рдЗрд╕рд▓рд┐рдП, рд╕рд░реНрд╡рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП PostgreSQL рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдореЗрдореЛрд░реА рдХреА рдорд╛рддреНрд░рд╛, рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреА рд╕рдВрдЦреНрдпрд╛, рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдЗрдЪреНрдЫрд┐рдд рдЙрдкрдпреЛрдЧ рдХреЗ рдкреНрд░рдХрд╛рд░, рдбрд┐рд╕реНрдХ рдХреЗ рдкреНрд░рдХрд╛рд░ (рдПрдЪрдбреАрдбреА рдпрд╛ рдПрд╕рдПрд╕рдбреА) рдФрд░ рдХрдиреЗрдХреНрд╢рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдПред <br><br>  рдХрд╛рд╢, рд╕рднреА DBMS рдХреЛ рдЯреНрдпреВрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдПрдХрд▓ рд╕реВрддреНрд░ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдЫ рдирд┐рдпрдо рдФрд░ рдкреИрдЯрд░реНрди рд╣реИрдВ рдЬреЛ рдЕрдзрд┐рдХрд╛рдВрд╢ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИрдВ (рдорд╣реАрди рдЯреНрдпреВрдирд┐рдВрдЧ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХрд╛ рдХрд╛рдо рд╣реИ)ред  DBA рдХреЗ рдЬреАрд╡рди рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">pgtune</a> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЛ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛, рдЬрд┐рд╕реЗ PostgreSQL рдкреНрд░рд╢рд╛рд╕рди рдкрд░ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдФрд░ рдЙрдкрдпреЛрдЧреА рдкреБрд╕реНрддрдХ рдХреЗ рд▓реЗрдЦрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">le0pard</a> рджреНрд╡рд╛рд░рд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реЗрдм рд╕рдВрд╕реНрдХрд░рдг</a> рджреНрд╡рд╛рд░рд╛ рдкреВрд░рдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br>  "рдбреЗрдЯрд╛ рд╡реЗрдпрд░рд╣рд╛рдЙрд╕" рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдХрдВрд╕реЛрд▓ рдореЗрдВ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЛ 100 рдХрдиреЗрдХреНрд╢рди (Zabbix рдореЗрдВ рдПрдХ рдбрд┐рдорд╛рдВрдб рд╡реЗрдм рдПрдбрдорд┐рди) рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдиреЗ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ: <br><br><pre>  pgtune -i postgresql.conf -o new_postgresql.conf -T DWT 100 </pre><br><div class="spoiler">  <b class="spoiler_title">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рдЬреЛ pgtune рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде рдмрджрд▓рддрд╛ рд╣реИ (рдорд╛рди рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдП рдЧрдП рд╣реИрдВ)</b> <div class="spoiler_text"><pre> # DB рд╕рдВрд╕реНрдХрд░рдг: 11
 # OS рдкреНрд░рдХрд╛рд░: рд▓рд┐рдирдХреНрд╕
 # DB рдкреНрд░рдХрд╛рд░: рд╡реЗрдм
 # рдХреБрд▓ рдореЗрдореЛрд░реА (RAM): 8 рдЬреАрдмреА
 # рд╕реАрдкреАрдпреВ рд╕рдВрдЦреНрдпрд╛: 1
 # рдХрдиреЗрдХреНрд╢рди рд╕рдВрдЦреНрдпрд╛: 100
 # рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░реЗрдЬ: hdd<font></font>
<font></font>
 max_connections = 100 # рд╕рдорд╡рд░реНрддреА рдбреЗрдЯрд╛рдмреЗрд╕ рдХрдиреЗрдХреНрд╢рди рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛
 рд╢реЗрдпрд░реНрдб рдореЗрдореЛрд░реА рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдмрдлрд╝рд░реНрд╕ (рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЯреЗрдмрд▓ рдмреНрд▓реЙрдХреНрд╕ рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ рдмреНрд▓реЙрдХ рдХрд╛ рдХреИрд╢) рдХреЗ рд▓рд┐рдП share_buffers = 2GB # рдореЗрдореЛрд░реА рд╕рд╛рдЗрдЬрд╝
 рдкреНрд░рднрд╛рд╡реА_cache_size = 6GB # рдЕрдиреБрдХреНрд░рдорд┐рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреНрд╡реЗрд░реА рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдореЗрдореЛрд░реА рдХрд╛ рдЕрдзрд┐рдХрддрдо рдЖрдХрд╛рд░
 рд░рдЦрд░рдЦрд╛рд╡_рд╡рд░реНрдХ_рдо = 512 рдПрдордмреА # VACUUM, ANALYZE, CREATE INDEX рд╕рдВрдЪрд╛рд▓рди рдХреА рдЧрддрд┐ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ
 рдЪреЗрдХрдкреЙрдЗрдВрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреВрд░реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП checkpoint_completion_target = 0.7 # рд▓рдХреНрд╖реНрдп рд╕рдордп
 wal_buffers = 16MB # рдореЗрдореЛрд░реА рдХреА рд░рд╛рд╢рд┐ рдЬреЛ рд▓реЗрди-рджреЗрди рд▓реЙрдЧ рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╛рдЭрд╛ рдореЗрдореЛрд░реА рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИ
 Default_statistics_target = ANALYZE рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рдПрдХрддреНрд░ рдХрд┐рдП рдЧрдП рдЖрдБрдХрдбрд╝реЛрдВ рдХреА 100 # рд░рд╛рд╢рд┐ - рдЬрдм рдмрдврд╝рддреА рд╣реИ, рддреЛ рдЖрд╢рд╛рд╡рд╛рджреА рдЕрдзрд┐рдХ рдзреАрд░реЗ-рдзреАрд░реЗ рдкреНрд░рд╢реНрди рдмрдирд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдмреЗрд╣рддрд░
 random_page_cost = 4 # рдбреЗрдЯрд╛ рдкреГрд╖реНрдареЛрдВ рддрдХ рд╕реВрдЪрдХрд╛рдВрдХ рдкрд╣реБрдВрдЪ рдХреА рд╕рд╢рд░реНрдд рд▓рд╛рдЧрдд - рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рдирд┐рд░реНрдгрдп рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреА рд╣реИ
 рдкреНрд░рднрд╛рд╡реА_io_concurrency = 2 # рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ I / O рд╕рдВрдЪрд╛рд▓рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдЬреЛ DBMS рдПрдХ рдЕрд▓рдЧ рд╕рддреНрд░ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рди рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛
 work_mem = 10485kB # рдбрд┐рд╕реНрдХ рдкрд░ рдЕрд╕реНрдерд╛рдпреА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЫрдБрдЯрд╛рдИ рдФрд░ рд╣реИрд╢ рдЯреЗрдмрд▓ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдореЗрдореЛрд░реА рдХреА рдорд╛рддреНрд░рд╛
 min_wal_size = 1GB # рд╡рд╛рд▓ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдиреАрдЪреЗ рдХреА рд╕реАрдорд╛рдПрдБ рдЬрд┐рдиреНрд╣реЗрдВ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдкреБрдирд░реНрдирд╡реАрдиреАрдХрд░рдг рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛
 max_wal_size = 2GB # рд╡рд╛рд▓ рдлрд╝рд╛рдЗрд▓реЗрдВ рдЬреЛ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдкреБрдирд░реНрдирд╡реАрдиреАрдХрд░рдг рдХреА рдЬрд╛рдПрдВрдЧреА, рдХреА рд╢реАрд░реНрд╖ рд╕реАрдорд╛ </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">рдХреБрдЫ рдЙрдкрдпреЛрдЧреА postgresql рд╡рд┐рдиреНрдпрд╛рд╕ рд╡рд┐рдХрд▓реНрдк</b> <div class="spoiler_text"><pre> # рд╕рдорд╡рд░реНрддреА рдЕрдиреБрд░реЛрдз рд╕рдВрдЪрд╛рд▓рдХреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди
 max_worker_processes = 8 # рдкреГрд╖реНрдарднреВрдорд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ - рдкреНрд░рддрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрдо рд╕реЗ рдХрдо рдПрдХ
 max_parallel_workers_per_gather = 4 # рдПрдХрд▓ рдЕрдиреБрд░реЛрдз рдХреЗ рднреАрддрд░ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛
 max_parallel_workers = 8 # рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рд╕рдорд╛рдирд╛рдВрддрд░ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдХрд░ рд╕рдХрддрд╛ рд╣реИ<font></font>
<font></font>
 # рд▓реЙрдЧрд┐рдВрдЧ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ (pg_stat_statements рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдиреЗ рдХрд╛ рдПрдХ рдЖрд╕рд╛рди рддрд░реАрдХрд╛)
 log_min_duration_statement = 3000 # рд▓реЙрдЧ рдЙрди рд╕рднреА рдХрдорд╛рдВрдбреНрд╕ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреА рдЕрд╡рдзрд┐ рдХреЛ рд▓рд┐рдЦрддреЗ рд╣реИрдВ рдЬрд┐рдирдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рд╕рдордп&gt; = ms рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдорд╛рди рдХрд╛ =
 log_duration = off # рдкреНрд░рддреНрдпреЗрдХ рдкреВрд░реНрдг рдХрдорд╛рдВрдб рдХреА рдЕрд╡рдзрд┐ рд░рд┐рдХреЙрд░реНрдб рдХрд░реЗрдВ
 log_statement = 'рдХреЛрдИ рдирд╣реАрдВ' # рдЬреЛ SQL рдХрдорд╛рдВрдб рдХреЛ рд▓реЙрдЧ рдореЗрдВ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдорд╛рди: рдХреЛрдИ рдирд╣реАрдВ (рдЕрдХреНрд╖рдо), ddl, mod рдФрд░ рд╕рднреА (рд╕рднреА рдХрдорд╛рдВрдб)
 debug_print_plan = рдЖрдЧреЗ рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдХреНрд╡реЗрд░реА рдкреНрд▓рд╛рди рдЯреНрд░реА рдХрд╛ # рдЖрдЙрдЯрдкреБрдЯ<font></font>
<font></font>
 # рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдЕрдзрд┐рдХрддрдо рдХреЛ рдирд┐рдЪреЛрдбрд╝реЗрдВ рдФрд░ рдХрд┐рд╕реА рднреА рд╡рд┐рдлрд▓рддрд╛ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рддреИрдпрд╛рд░ рд░рд╣реЗрдВ (рд╕рдмрд╕реЗ рджрдорд┐рдд рдХреЗ рд▓рд┐рдП, рдЬреЛ рдПрд╕рдПрд╕рдбреА рдФрд░ рдПрдХ рд╡рд┐рддрд░рд┐рдд рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЕрд╕реНрддрд┐рддреНрд╡ рдХреА рдЙрдкреЗрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВ)
 #fsync = рдСрдл # рдЪреЗрдВрдЬ рдбрд┐рд╕реНрдХ рдореЗрдВ рдлрд┐рдЬрд┐рдХрд▓ рд░рд╛рдЗрдЯ, fsync рдХреЛ рдбрд┐рд╕реЗрдмрд▓ рдХрд░рдиреЗ рд╕реЗ рд╕реНрдкреАрдб рдореЗрдВ рддреЗрдЬреА рдЖрддреА рд╣реИ, рд▓реЗрдХрд┐рди рд╕реНрдерд╛рдпреА рд╡рд┐рдлрд▓рддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ
 #synchronous_commit = off # рд▓реЗрди-рджреЗрди рдХреА рдЬрд╛рдирдХрд╛рд░реА Wal рдореЗрдВ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╣реА рдЖрдкрдХреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ - fsync рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдХрд╛ рд▓рдЧрднрдЧ рд╕реБрд░рдХреНрд╖рд┐рдд рд╡рд┐рдХрд▓реНрдк
 #full_page_writes = off # рд╢рдЯрдбрд╛рдЙрди рд╕рд╛рдорд╛рдиреНрдп рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдЧрддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд┐рд╕реНрдЯрдо рдХреНрд░реИрд╢ рд╣реЛрдиреЗ рдкрд░ рдбреЗрдЯрд╛ рднреНрд░рд╖реНрдЯрд╛рдЪрд╛рд░ рдпрд╛ рдбреЗрдЯрд╛ рднреНрд░рд╖реНрдЯрд╛рдЪрд╛рд░ рдХреЛ рдЬрдиреНрдо рджреЗ рд╕рдХрддрд╛ рд╣реИ </pre></div></div><br><h4>  рдПрдХ рдЕрд▓рдЧ рднреМрддрд┐рдХ рдбрд┐рд╕реНрдХ рдкрд░ рдПрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдирд╛ </h4><br>  <i>рдпрд╣ рдЖрдЗрдЯрдо рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИ рдФрд░ рдмрд▓реНрдХрд┐ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреНрд░рдордгрдХрд╛рд▓реАрди рд╕рдорд╛рдзрд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рд╕рдВрднрд╛рд╡рдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдирд╛ рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ред</i>  рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдЧрддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЗрд╕реЗ рдПрдХ рдЕрд▓рдЧ рдбрд┐рд╕реНрдХ рдкрд░ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдордиреЗ рдкреВрд░реА рдбрд┐рд╕реНрдХ рдХреЛ рдЖрдзрд╛рд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рд╕рднреА рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдХреНрдпреВрдПрд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░ рдЗрд╕реЗ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рдПрдХ рдирдпрд╛ рдЯреЗрдмрд▓рдмреЗрд╕ рдмрдирд╛рдПрдВ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВ (рдпрд╛ рдЗрд╕рдХрд╛ рдХреЗрд╡рд▓ рдПрдХ рд╣рд┐рд╕реНрд╕рд╛ - рдПрдХ рдЕрд▓рдЧ рдбрд┐рд╕реНрдХ рдкрд░ рдЗрд╕ рдЯреЗрдмрд▓рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рдердорд┐рдХ рдФрд░ рдПрдХрддреНрд░рд┐рдд рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреА рддрд╛рд▓рд┐рдХрд╛рдПрдВ)ред <br><br><div class="spoiler">  <b class="spoiler_title">рдкрд░реНрд╡рдд рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text">  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ ext4 рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рдбрд┐рд╕реНрдХ рдХреЛ рдлреЙрд░реНрдореЗрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдЗрд╕реЗ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдХреЛ noatime рд▓реЗрдмрд▓ рдХреЗ рд╕рд╛рде рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ: <br><br><pre>  рдЖрд░реЛрд╣ / рджреЗрд╡ / sdc1 / var / lib / pgsql / 10 / data / base -o noatime </pre><br>  рд╕реНрдерд╛рдпреА рдмрдврд╝рддреЗ рдХреЗ рд▓рд┐рдП, рд▓рд╛рдЗрди рдХреЛ / etc / fstab рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> # рдЬрд╣рд╛рдВ UUID рдбрд┐рд╕реНрдХ рдХреА рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реИ, рдЖрдк рдЗрд╕реЗ Blkid рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ
 UUID = 121efe29-70bf-410b-bc71-90704568ce3b / var / lib / pgsql / 10 / data / base ext4 рдЪреВрдХ, noatime 0 0 </pre><br></div></div><br><h4>  Pg_pathman рдХреЗ рд╕рд╛рде рдЗрддрд┐рд╣рд╛рд╕ рд╕рд╛рд░рдгреА рдХрд╛ рд╡рд┐рднрд╛рдЬрди </h4><br>  Zabbix - PostgreSQL рдХреЗ рддрдирд╛рд╡ рдкрд░реАрдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди рд╣рдореЗрдВ рдЬрд┐рди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛, рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдЕрдкреНрд░рдЪрд▓рд┐рдд рдбреЗрдЯрд╛ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╡рд┐рднрд╛рдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдЗрд╕рдХреЗ рдШрдЯрдХ рднрд╛рдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рд╕реВрдЪрдХрд╛рдВрдХ рдФрд░ рд╕реБрдкрд░ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдШрдЯрдХ рднрд╛рдЧреЛрдВ рдХреЛ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рд╕рдордЧреНрд░ рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рдЧрддрд┐ рдХреЛ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд░реВрдк рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рд╡рд┐рднрд╛рдЬрди рджреЛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдПрдХ рд╕рд╛рде рд╣рд▓ рдХрд░рддрд╛ рд╣реИ: <br><br>  1. рд╕рдВрдкреВрд░реНрдг рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рд╣рдЯрд╛рдХрд░ рдЕрдкреНрд░рдЪрд▓рд┐рдд рдбреЗрдЯрд╛ рдХреЛ рд╣рдЯрд╛рдиреЗ рдореЗрдВ рддреЗрдЬреА рд▓рд╛рдПрдВ <br><br>  2. рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрдпреБрдХреНрдд рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд╛рдЬрди рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдирд╛ <br><br>  PostgreSQL рдореЗрдВ рд╡рд┐рднрд╛рдЬрди рдХреЗ рд▓рд┐рдП рдЪрд╛рд░ рддрдВрддреНрд░ рд╣реИрдВ: <br><br>  1. рдорд╛рдирдХ рдмрд╛рдзрд╛ <br><br>  2. рд╡рд┐рд╕реНрддрд╛рд░ pg_partman ( <i>pg_pathman рдХреЗ рд╕рд╛рде рднреНрд░рдорд┐рдд рди рдХрд░реЗрдВ</i> ) <br><br>  3. рд╡рд┐рд╕реНрддрд╛рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">pg_pathman</a> <br><br>  4. рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕реНрд╡рдпрдВ рджреНрд╡рд╛рд░рд╛ рд╡рд┐рднрд╛рдЬрди рдмрдирд╛рдПрдВ рдФрд░ рдмрдирд╛рдП рд░рдЦреЗрдВ <br><br>  рд╣рдорд╛рд░реА рд░рд╛рдп рдореЗрдВ, рд╕рдмрд╕реЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ, рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдФрд░ рдЕрдиреБрдХреВрд▓рд┐рдд рд╡рд┐рднрд╛рдЬрди рд╕рдорд╛рдзрд╛рди, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">pg_pathman</a> рдПрдХреНрд╕рдЯреЗрдВрд╢рди рд╣реИред  рдЗрд╕ рд╡рд┐рднрд╛рдЬрди рд╡рд┐рдзрд┐ рдХреЗ рд╕рд╛рде, рдХреНрд╡реЗрд░реА рдкреНрд▓рд╛рдирд░ рд▓рдЪреАрд▓реЗ рдврдВрдЧ рд╕реЗ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕реЗ рд╡рд┐рднрд╛рдЬрди рдбреЗрдЯрд╛ рдХреА рдЦреЛрдЬ рдХрд░рддреЗ рд╣реИрдВред  <i>рдЕрдлрд╡рд╛рд╣ рдпрд╣ рд╣реИ рдХрд┐ PostgreSQL рдХреЗ 12 рд╡реЗрдВ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рд╡рд┐рднрд╛рдЬрди рд╣реЛрдЧрд╛ред</i> <br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдордиреЗ рдкреНрд░рддреНрдпреЗрдХ рджрд┐рди рдХреЗ рд▓рд┐рдП рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдбреЗрдЯрд╛ рдХреЛ рд╕реБрдкрд░рдЯреЗрдмрд▓ рд╕реЗ рдЕрд▓рдЧ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ рдФрд░ рдЕрдкреНрд░рдЪрд▓рд┐рдд рдкреИрд░рд╛рдореАрдЯрд░ рдорд╛рдиреЛрдВ рдХреЛ рд╣рдЯрд╛рдирд╛ рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рд╕рднреА рдЕрдкреНрд░рдЪрд▓рд┐рдд рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реЛрдиреЗ рд▓рдЧрд╛, рдЬреЛ рд╢реНрд░рдо рд▓рд╛рдЧрдд рджреНрд╡рд╛рд░рд╛ рдПрдХ DBMS рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИред  рдбреЗрдЯрд╛рдмреЗрд╕ рдпреВрдЬрд░ рдлрдВрдХреНрд╢рди рдХреЛ Zabbix рд╕рд░реНрд╡рд░ рдХреЗ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд░рд╛рдд 2 рдмрдЬреЗ рдХреЙрд▓ рдХрд░рдХреЗ рдбрд┐рд▓реАрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рд╕реНрд╡реАрдХрд╛рд░реНрдп рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЗ рд╕рдВрдХреЗрдд рдХреЗ рд╕рд╛рде рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">PostgreSQL 10 рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд╛рдЬрди рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ</b> <div class="spoiler_text">  рдорд╛рдирдХ OS рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">pg_pathman</a> рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ (рд╕реНрд░реЛрддреЛрдВ рд╕реЗ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП, github рдкрд░ рдЙрд╕реА рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рджреЗрдЦреЗрдВ): <br><br><pre> yum рдЗрдВрд╕реНрдЯреЙрд▓ pg_pathman10
 nano /var/pgsqldb/postgresql.conf
 share_preload_lbooks = 'pg_pathman' # рдорд╣рддреНрд╡рдкреВрд░реНрдг - рдпрд╣рд╛рдБ рд╕реВрдЪреА рдореЗрдВ рдЕрдВрддрд┐рдо pg_pathman рд▓рд┐рдЦреЗрдВ
</pre><br>  рд╣рдо DBMS рдХреЛ рд░рд┐рдмреВрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рд╡рд┐рднрд╛рдЬрди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВ (рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП 1 рджрд┐рди рдФрд░ рдПрдХрддреНрд░рд┐рдд рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП 3 рджрд┐рди - рдпрд╣ 1 рджрд┐рди рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ): <br><br><pre> systemctl рдкреБрдирдГ рдЖрд░рдВрдн postgresql-10.service
 psql -d zabbix -U рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рдХрд░рддрд╛ рд╣реИ
 рд╕реГрдЬрди рд╡рд┐рд╕реНрддрд╛рд░ pg_pathman;
 # рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рджрд┐рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ
 # 1552424400 - рдпреВрдирд┐рдХреНрд╕ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рдХреЗ рд░реВрдк рдореЗрдВ рдЙрд▓рдЯреА рдЧрд┐рдирддреА, 86400 - рд╕реЗрдХрдВрдб рджрд┐рдиреЛрдВ рдореЗрдВ
 create_range_partitions ('рдЗрддрд┐рд╣рд╛рд╕', 'рдШрдбрд╝реА', 1552424400, 86400) рдЪреБрдиреЗрдВ;
 create_range_partitions ('history_uint', 'clock', 1552424400, 86400) рдЪреБрдиреЗрдВ;
 create_range_partitions ('history_text', 'clock', 1552424400, 86400) рдЪреБрдиреЗрдВ;
 create_range_partitions ('history_str', 'clock', 1552424400, 86400) рдЪреБрдиреЗрдВ;
 create_range_partitions ('history_log', 'clock', 1552424400, 86400) рдЪреБрдиреЗрдВ;
 # рдПрдХреАрдХреГрдд рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рддреАрди рджрд┐рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ
 # 1552424400 - рдпреВрдирд┐рдХреНрд╕ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рдХреЗ рд░реВрдк рдореЗрдВ рдЙрд▓рдЯреА рдЧрд┐рдирддреА, 259200 - рддреАрди рджрд┐рдиреЛрдВ рдореЗрдВ рд╕реЗрдХрдВрдб
 create_range_partitions ('рд░реБрдЭрд╛рди', 'рдШрдбрд╝реА', 1545771600, 259200) рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ;  
 create_range_partitions ('Trends_uint', 'clock', 1545771600, 259200) рдЪреБрдиреЗрдВ; 
</pre><br>  <i>рдпрджрд┐ рдЕрднреА рддрдХ рдХрд┐рд╕реА рднреА рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдХреЛрдИ рдбреЗрдЯрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ create_range_partitions рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╕рдордп, рдПрдХ рдФрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рддрд░реНрдХ p_count = 0_ рдкрд╛рд╕ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред</i> <br><br>  рд╡рд┐рднрд╛рдЬрди рдХреА рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдкреНрд░рд╢реНрди: <br><br><pre> # рд╡рд┐рднрд╛рдЬрди рддрд╛рд▓рд┐рдХрд╛ рдХреА рдореБрдЦреНрдп рд╕реВрдЪреА, рдореБрдЦреНрдп рд╡рд┐рдиреНрдпрд╛рд╕ рднрдВрдбрд╛рд░рдг:
 pathman_config рд╕реЗ * рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ;
 # рд╕рднреА рдореМрдЬреВрджрд╛ рд╡рд░реНрдЧреЛрдВ, рд╕рд╛рде рд╣реА рдЙрдирдХреЗ рдорд╛рддрд╛-рдкрд┐рддрд╛ рдФрд░ рд╕реАрдорд╛ рд╕реАрдорд╛рдУрдВ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡:
 pathman_partition_list рд╕реЗ * рдЪреБрдиреЗрдВ;
 # рдЕрддрд┐рд░рд┐рдХреНрдд рдкреИрд░рд╛рдореАрдЯрд░ рдЬреЛ рдорд╛рдирдХ pg_pathman рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рддреЗ рд╣реИрдВ:
 pathman_config_params рд╕реЗ * рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ;
 # рд╕рд╛рдордЧреНрд░реА рдХреЛ рдореВрд▓ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рд╡рд╛рдкрд╕ рдХреЙрдкреА рдХрд░реЗрдВ рдФрд░ рд╡рд┐рднрд╛рдЬрди рд╣рдЯрд╛рдПрдВ:
 drop_partitions ('table_name' :: regclass, false) рдЪреБрдиреЗрдВ;
</pre><br>  рд╡рд┐рднрд╛рдЬрди рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЖрдХрд╛рд░ рдкрд░ рдЖрдБрдХрдбрд╝реЗ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">/*       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> nspname <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> schemaname, relname, relkind, <span class="hljs-keyword"><span class="hljs-keyword">cast</span></span> (reltuples <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>), pg_size_pretty(pg_relation_size(C.oid)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-string"><span class="hljs-string">"size"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_class C <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_namespace N <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> (N.oid = C.relnamespace) <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> nspname <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-string"><span class="hljs-string">'pg_catalog'</span></span>, <span class="hljs-string"><span class="hljs-string">'information_schema'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (relname <span class="hljs-keyword"><span class="hljs-keyword">like</span></span> <span class="hljs-string"><span class="hljs-string">'history%'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> relname <span class="hljs-keyword"><span class="hljs-keyword">like</span></span> <span class="hljs-string"><span class="hljs-string">'trends%'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> relkind = <span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-comment"><span class="hljs-comment">-- and reltuples &gt; 0 -- and pg_relation_size(C.oid) &gt;= 0 ORDER BY schemaname, relname</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">рдЕрдкреНрд░рдЪрд▓рд┐рдд рд╡рд┐рднрд╛рдЬрдиреЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХрд╛ рдСрдЯреЛ-рдЯреНрдпреВрдирд┐рдВрдЧ (рдПрдВрдереБрдВрдЧ - рдПрдХ рдмрдбрд╝рд╛ SQL рдлрд╝рдВрдХреНрд╢рди)</b> <div class="spoiler_text">  рд╡рд┐рднрд╛рдЬрди рдХреЗ рдСрдЯреЛ-рд╡рд┐рд▓реЛрдкрди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ <br>  (рд╡рд┐рд╕реНрддреГрдд рдкрд╛рда, рдЗрд╕рд▓рд┐рдП рдореБрдЭреЗ рд╡рд╛рдХреНрдп рд░рдЪрдирд╛ рд╣рд╛рдЗрд▓рд╛рдЗрдЯрд┐рдВрдЧ рдХреЛ рд╣рдЯрд╛рдирд╛ рдкрдбрд╝рд╛): <br><br><pre> рд╕реГрдЬрди рдпрд╛ рд╕рдореАрдХреНрд╖рд╛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХрд░реЗрдВ .de_old_partitions (history_days рдкреВрд░реНрдгрд╛рдВрдХ, Trends_days рдкреВрд░реНрдгрд╛рдВрдХ, str_days рдкреВрд░реНрдгрд╛рдВрдХ)
  рдкрд╛рда рдкрд╛рда
  рднрд╛рд╖рд╛ plpgsql
 $ рд╕рдорд╛рд░реЛрд╣ $ рдХреЗ рд░реВрдк рдореЗрдВ
 / *
 рдлрд╝рдВрдХреНрд╢рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рджрд┐рдиреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдкреБрд░рд╛рдиреЗ рд╕рднреА рд╡рд┐рднрд╛рдЬрдиреЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрддрд╛ рд╣реИ:
 history_days - рд╡рд┐рднрд╛рдЬрди рдХреЗ рд▓рд┐рдП history_x, history_uint_x
 Trends_days - рд╡рд┐рднрд╛рдЬрди рдХреЗ рд▓рд┐рдП Trends_x, Trends_uint_x
 str_days - рд╡рд┐рднрд╛рдЬрди рдХреЗ рд▓рд┐рдП history_str_x, history_text_x, history_log_x
 * /
 рдШрдбрд╝реА рдХреА рдШреЛрд╖рдгрд╛ рдШрдбрд╝реА_рдЯреЛрдбреЗ_рд╕реНрдЯрд╛рд░реНрдЯ рдЗрдВрдЯ;
 рдШрдбрд╝реА рдХреА рдШреЛрд╖рдгрд╛ рдШрдбрд╝реА_рд▓реЗ_рд▓реЗ_рд╣рд┐рд╕реНрдЯреНрд░реА int = 0;
 рдШрдбрд╝реА рдХреА рдШреЛрд╖рдгрд╛ рдШрдбрд╝реА_рдбреЗрд▓реЗ_рд▓реЗрд╕_рдЯреНрд░реЗрдВрдбреНрд╕ рдЗрдВрдЯ = 0;
 рдШрдбрд╝реА рдХреА рдШреЛрд╖рдгрд╛ рдШрдбрд╝реА_рд▓реЗ_рд▓реЗ_рд╕реНрдЯреНрд░рд┐рдВрдЧ int = 0;
 clock_delete_less int = 0;
 рдШреЛрд╖рд┐рдд itter int = 0;
 result_str text = '' рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ;
 buf_table_size рдкрд╛рда рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ;
 buf_table_len рдкрд╛рда рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ;
 рд╡рд┐рднрд╛рдЬрди_рдирд╛рдо рдкрд╛рда рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ;
 рдШрдбрд╝реА_рдореЗрдХреНрд╕ рдкрд╛рда рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ;
 ir_detail рдЯреЗрдХреНрд╕реНрдЯ рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ;
 tarestart timestamp = clock_timestamp () рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ;
 рдШреЛрд╖рд┐рдд t_end рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк;
 рд╢реБрд░реВ рдХрд░рдирд╛
     рдпрджрд┐ $ 1 &lt;= 0 рддреЛ рдлрд┐рд░ рд╡рд╛рдкрд╕реА, рдХреБрдЫ рдЧрд▓рдд: history_days рддрд░реНрдХ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкреВрд░реНрдгрд╛рдВрдХ рдореВрд▓реНрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП ';  рдЕрдВрдд рдЕрдЧрд░;
     рдпрджрд┐ $ 2 &lt;= 0 рддреЛ рдлрд┐рд░ рд╡рд╛рдкрд╕реА, рдХреБрдЫ рдЧрд▓рдд: рдЯреНрд░реЗрдВрдбреНрд╕_рдбреЗ рддрд░реНрдХ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкреВрд░реНрдгрд╛рдВрдХ рдорд╛рди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП ';  рдЕрдВрдд рдЕрдЧрд░;
     рдЕрдЧрд░ $ 3 &lt;= 0 рддреЛ рдлрд┐рд░ рд╡рд╛рдкрд╕реА, рдХреБрдЫ рдЧрд▓рдд: str_days рддрд░реНрдХ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкреВрд░реНрдгрд╛рдВрдХ рдореВрд▓реНрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП ';  рдЕрдВрдд рдЕрдЧрд░;
     clock_today_start = extract (рджрд┐рдирд╛рдВрдХ_trunc ('рджрд┐рди', рдЕрдм) ()) :: int;
     clock_delete_less_history = extract (date_trunc ('рджрд┐рди', рдЕрдм) () рд╕реЗ - ($ 1 :: рдкрд╛рда || 'рджрд┐рди') :: рдЕрдВрддрд░рд╛рд▓) :: int
     clock_delete_less_trends = extract (date_trunc ('рджрд┐рди', рдЕрдм) () рд╕реЗ - ($ 2 :: рдкрд╛рда || 'рджрд┐рди') :: рдЕрдВрддрд░рд╛рд▓) :: int
     clock_delete_less_strings = extract (date_trunc ('рджрд┐рди', рдЕрдм) () рд╕реЗ - ($ 3 :: рдкрд╛рда || 'рджрд┐рди') :: рдЕрдВрддрд░рд╛рд▓) :: int
     clock_delete_less = рдХрдо рд╕реЗ рдХрдо (clock_delete_less_history, clock_delete_less_trends, clock_delete_less_strings);
     - рдзреНрдпрд╛рди рджреЗрдВ 'рдШрдбрд╝реА_рдЯреЛрдбреЗ_рд╕реНрдЯрд╛рд░реНрдЯ% (%)', to_timestamp (рдШрдбрд╝реА_рдЯреЛрдбреЗ_рд╕реНрдЯрд╛рд░реНрдЯ), рдШрдбрд╝реА_рдЯреЛрдбреЗ_рд╕реНрдЯрд╛рд░реНрдЯ;
     - рд╕реВрдЪрдирд╛ рдХрд╛ рдиреЛрдЯрд┐рд╕ 'clock_delete_less_history% (%)% рджрд┐рди', to_timestamp (clock_delete_less_history), clock_delete_less_history, $ 1;
     - рд╕реВрдЪрдирд╛ рдХрд╛ рдиреЛрдЯрд┐рд╕ 'рдШрдбрд╝реА_рдбреЗрд▓реА_рд▓реЗрд╕_рдЯреНрд░реЗрдВрдбреНрд╕% (%)% рджрд┐рди', to_timestamp (рдШрдбрд╝реА_рдбреЗрд▓реА_рд▓реЗрд╕_рдЯреНрд░реЗрдВрдбреНрд╕), рдШрдбрд╝реА_рдбреЗрд▓реЗрдЯреА_рд▓реЗрд╕_рдЯреНрд░реЗрдВрдбреНрд╕, $ 2;
     - рд╕реВрдЪрдирд╛ рдХрд╛ рдиреЛрдЯрд┐рд╕ 'clock_delete_less_strings% (%)% days', to_timestamp (clock_delete_less_strings), clock_delete_less_strings, $ 3;
     рд╡рд┐рднрд╛рдЬрди_рдирд╛рдо рдХреЗ рд▓рд┐рдП, рдШрдбрд╝реА рд╡рд┐рднрд╛рдЬрди рдореЗрдВ select_max, path_max pathman_partition_list рдЬрд╣рд╛рдВ рд╕реЗ 
     range_max :: int &lt;= рд╕рдмрд╕реЗ рдмрдбрд╝рд╛ (рдШрдбрд╝реА_delete_less_history, clock_delete_less_trends, clock_delete_less_strings) 
     (рд╡рд┐рднрд╛рдЬрди :: рдкрд╛рда рдЬреИрд╕реЗ 'рдЗрддрд┐рд╣рд╛рд╕%' рдпрд╛ рд╡рд┐рднрд╛рдЬрди :: рдкрд╛рда рдЬреИрд╕реЗ 'рд░реБрдЭрд╛рди%') рд╡рд┐рднрд╛рдЬрди asc рджреНрд╡рд╛рд░рд╛ рдЖрджреЗрд╢
     рдкрд╛рд╢
         рдЕрдЧрд░ (рд╡рд┐рднрд╛рдЬрди_рдирд╛рдо ~ 'history_uint_ \ d' рдФрд░ clock_max :: int &lt;= clock_delete_less_istory)
         рдпрд╛ (part_name ~ 'history_ \ d' рдФрд░ clock_max :: int &lt;= clock_delete_less_history)
         рдпрд╛ (part_name ~ 'Trends_ \ d' рдФрд░ clock_max :: int &lt;= clock_delete_less_trends)
         рдпрд╛ (рд╡рд┐рднрд╛рдЬрди_рдирд╛рдо ~ 'history_log_ \ d' рдФрд░ clock_max :: int &lt;= clock_delete_less_strants)
         рдпрд╛ (рд╡рд┐рднрд╛рдЬрди_рдирд╛рдо ~ 'history_str_ \ d' рдФрд░ clock_max :: int &lt;= clock_delete_less_strax)
         рдпрд╛ (рд╡рд┐рднрд╛рдЬрди_рдирд╛рдо ~ 'history_text_ \ d' рдФрд░ clock_max :: int &lt;= clock_delete_less_strings)
         рддреЛ 
             itter = iterator + 1;
             рдиреЛрдЯрд┐рд╕ '%', рдкреНрд░рд╛рд░реВрдк (''% s% s ', рдкрд╛рд░реНрдЯреАрд╢рди_рдирд╛рдо, рдШрдбрд╝реА_рдореИрдХреНрд╕) рдмрдврд╝рд╛рдПрдВ;
             рдЕрдзрд┐рдХрддрдо рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ (reltuples :: int), pg_size_pretty (рд░рд╛рд╢рд┐ (pg_relation_size (pg_class.oid))) рдХреЗ рд░реВрдк рдореЗрдВ "рдЖрдХрд╛рд░" рд╕реЗ pg_class рдЬрд╣рд╛рдБ relname рдЬреИрд╕реЗ рдкрд╛рд░реНрдЯреАрд╢рди / рдирд╛рдо ||  '%' рд╕рдЦреНрдд buf_table_len, buf_table_size рдореЗрдВ;
             if result_str! = '' рддреЛ result_str = result_str ||  '';  рдЕрдВрдд рдЕрдЧрд░;
             result_str = result_str ||  рд╕реНрд╡рд░реВрдк ('% s (dt &lt;% s, len% s,% s)', рд╡рд┐рднрд╛рдЬрди_рдирд╛рдо, to_char (to_timestamp (clock_max :: int), 'YYYY-MM-DD'), buf_table_len, buf_table_size);
             рдирд┐рд╖реНрдкрд╛рджрди рдкреНрд░рд╛рд░реВрдк ('% s рдореМрдЬреВрдж рд╣реЛрдиреЗ рдкрд░ рдбреНрд░реЙрдк рдЯреЗрдмрд▓', рдкрд╛рд░реНрдЯреАрд╢рди_рдирд╛рдо);
         рдЕрдВрдд рдЕрдЧрд░;
     рдЕрдВрдд рд▓реВрдк;
     рдЕрдЧрд░ iterator = 0 рддреЛ result_str = рд╕реНрд╡рд░реВрдк ('рдкреБрд░рд╛рдиреЗ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╡рд┐рднрд╛рдЬрди рдирд╣реАрдВ рд╣реИ, рддреЛ% s рджрд┐рдирд╛рдВрдХ', to_char (to_timestamp (clock_delete_less), 'YYYY-MM-DD-DD)); 
     рдФрд░ рдкрд░рд┐рдгрд╛рдо_ рд╕реНрд╡рд░реВрдк = рдкреНрд░рд╛рд░реВрдк ('% s рд╕реЗрдХрдВрдб рдореЗрдВ% s рд╡рд┐рднрд╛рдЬрди рд╣рдЯрд╛рдП рдЧрдП:', рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐, рдЯреНрд░рдВрдХ (рдЕрд░реНрдХ (рд╕реЗрдХрдВрдб рд╕реЗ (рдШрдбрд╝реА_рд╕реНрдЯрд┐рдореИрдореНрдк) -) - t_start)) :: рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, 3)) ||  result_str;
     рдЕрдВрдд рдЕрдЧрд░;
     - рдзреНрдпрд╛рди рджреЗрдВ '%', result_str;
     рд╡рд╛рдкрд╕реА result_str;
 рдЕрдкрд╡рд╛рдж рддрдм рдЬрдм рдЕрдиреНрдп
    рд╕реНрдЯреИрдХ рдХрд┐рдП рдЧрдП рдбрд╛рдпрдЧреНрдиреЙрд╕реНрдЯрд┐рдХреНрд╕ рдЗрд░реЗрдЯреА_рдбреЗрдЯреЗрд▓ = PG_EXCEPTION_CONTEXT;
    рд░рд┐рдЯрд░реНрди рдлреЙрд░реНрдореЗрдЯ ('рдЕрдк, рдХреБрдЫ рдЧрдбрд╝рдмрдбрд╝:% s [рдЗрд░ рдХреЛрдб% s],% s', sqlerrm, sqlstate, рдЕрдирд┐рдпрдорд┐рдд_detail);
 рдЕрдВрдд; 
 $ рд╕рдорд╛рд░реЛрд╣ $;
</pre><br>  рд╕реНрд╡рддрдГ-рд╕реНрд╡рдЪреНрдЫ рд╡рд┐рднрд╛рдЬрди рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде "рдбреЗрдЯрд╛рдмреЗрд╕ рдореЙрдирд┐рдЯрд░" рдкреНрд░рдХрд╛рд░ рдХреЗ рдЬрд╝реИрдмрд┐рдХреНрд╕ рд╕рд░реНрд╡рд░ рд╣реЛрд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рдбреЗрдЯрд╛ рдЖрдЗрдЯрдо рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> - рдкреНрд░рдХрд╛рд░: рдбреЗрдЯрд╛рдмреЗрд╕ рдореЙрдирд┐рдЯрд░
 - рдирд╛рдо: delete_old_history_partitions
 - рдХреБрдВрдЬреА: db.odbc.select [delete_old_history_partitions, zabbix]
 - sql рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐: delete_old_partitions (3, 30, 30) рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ;
 # рдпрд╣рд╛рдВ, delete_old_partitions рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рдХреЗ рдкреИрд░рд╛рдореАрдЯрд░ рджрд┐рдиреЛрдВ рдореЗрдВ рднрдВрдбрд╛рд░рдг рд╕рдордп рдХрд╛ рд╕рдВрдХреЗрдд рджреЗрддреЗ рд╣реИрдВ 
 # рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП, рд╕рдВрдпреБрдХреНрдд рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдорд╛рди рдФрд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд╛рди
 - рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░: рдкрд╛рда
 - рдЕрджреНрдпрддрди рдЕрдВрддрд░рд╛рд▓: 0
 - рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдВрддрд░рд╛рд▓: h2 рдореЗрдВ рдЕрдиреБрд╕реВрдЪрд┐рдд
 - рдЗрддрд┐рд╣рд╛рд╕ рднрдВрдбрд╛рд░рдг рдЕрд╡рдзрд┐: 90 рджрд┐рди
 - рдбреЗрдЯрд╛ рдПрд▓рд┐рдореЗрдВрдЯ рдЧреНрд░реБрдк: рдбреЗрдЯрд╛рдмреЗрд╕
</pre><br>  рдирддреАрдЬрддрди, рд╣рдо рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╡рд┐рднрд╛рдЬрди рдХреА рд╕рдлрд╛рдИ рдХреЗ рдЖрдВрдХрдбрд╝реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗ: <br><br><pre>  2019-09-16 02:00:00, 0.024 рд╕реЗрдХрдВрдб рдореЗрдВ 3 рд╡рд┐рднрд╛рдЬрди рд╣рдЯрд╛рдП рдЧрдП: Trends_78 (dt &lt;2019-08-17, len 1, 48 kB), history_193 (dt &lt;2019-09-13, len 85343, 9448 kB ), History_uint_186 (dt &lt;2019-09-13, рд▓реЗрди 27969, 3480 kB)
</pre><br>  <b>рдорд╣рддреНрд╡рдкреВрд░реНрдг!</b>  рдбреЗрдЯрд╛ рддрддреНрд╡ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рднрд╛рдЬрдиреЛрдВ рдХреЗ рдСрдЯреЛ-рд╡рд┐рд▓реЛрдкрди рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдШрд░ рдХреА рдиреМрдХрд░рд╛рдиреА Zabbix рдХрд╛рд░реНрдп рдЕрдиреБрд╕реВрдЪрдХ рдореЗрдВ рдЗрддрд┐рд╣рд╛рд╕ рдФрд░ рдкреНрд░рд╡реГрддреНрддрд┐ рдХреА рд╕рдлрд╛рдИ рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <i>zabbix рдореЗрдиреВ рдЖрдЗрдЯрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, "рдкреНрд░рд╢рд╛рд╕рди" -&gt; рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рд╡рд░рдг -&gt; рдХреЛрдиреЗ рдореЗрдВ рд╕реВрдЪреА рд╕реЗ "рд╕реНрдкрд╖реНрдЯ рдЗрддрд┐рд╣рд╛рд╕" рдЪреБрдиреЗрдВ -&gt; рдЕрдХреНрд╖рдо рдХрд░реЗрдВ рд╕рднреА рд╡рд░реНрдЧреЛрдВ рдореЗрдВ "рдЗрддрд┐рд╣рд╛рд╕" рдФрд░ "рдкрд░рд┐рд╡рд░реНрддрди рдХреА рдЧрддрд┐рд╢реАрд▓рддрд╛" рдЪреЗрдХрдмреЙрдХреНрд╕ред</i> <br></div></div><br><h4>  рдЗрддрд┐рд╣рд╛рд╕ рд╕рд╛рд░рдгреА рдХреЗ рд╕реВрдЪрдХрд╛рдВрдХ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдмреНрд░рд┐рди (рдШрдбрд╝реА) рдФрд░ рдмреАрдЯреА-рдЬрд┐рди (рдЖрдЗрдЯрдо) рдореЗрдВ рдмрджрд▓рдирд╛ </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">PostgreSQL рдЗрдВрдбреЗрдХреНрд╕ рдкрд░ рдЕрд╡рд▓реЛрдХрди рд▓реЗрдЦреЛрдВ</a> рдХреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрддреНрдХреГрд╖реНрдЯ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ</a> рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдПрд░реНрдЧреЛрд╡</a> рдХреЛ рд╡рд┐рд╢реЗрд╖ рдзрдиреНрдпрд╡рд╛рджред  <i>рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкреВрд░реА PostgresPRO рдЯреАрдоред</i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрди рд▓реЗрдЦреЛрдВ рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рд╣реЛрдХрд░, рд╣рдордиреЗ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдбреЗрдЯрд╛ рдЯреЗрдмрд▓реЛрдВ рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдиреБрдХреНрд░рдорд┐рддреЛрдВ рдХреЗ рд╕рд╛рде рдЦреЗрд▓рд╛ рдФрд░ рдЗрд╕ рдирд┐рд╖реНрдХрд░реНрд╖ рдкрд░ рдкрд╣реБрдВрдЪреЗ рдХрд┐ рдХрд┐рди рдХреНрд╖реЗрддреНрд░реЛрдВ рдкрд░ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕реВрдЪрдХрд╛рдВрдХ рдЕрдзрд┐рдХрддрдо рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рджреЗрдЦрд╛ рдЧрдпрд╛ рдХрд┐ рд╕рдордЧреНрд░ рд╕реВрдЪрдХрд╛рдВрдХ btree (рдЖрдЗрдЯрдорд┐рдб, рдШрдбрд╝реА) рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреЗ рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдкрд░ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдпрд╣ рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рддреЗрдЬ рд╣реИ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдиреАрд░рд╕ рдЖрджреЗрд╢ рджрд┐рдП рдЧрдП рдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП, рд▓реЗрдХрд┐рди рдпрд╣ рдбрд┐рд╕реНрдХ рдкрд░ "рдЬрд╝реЛрд░ рд╕реЗ рдорд╛рд░рддрд╛ рд╣реИ" рдЬрдм рдмрд╣реБрдд рдЕрдзрд┐рдХ рдбреЗрдЯрд╛ рд╣реЛрддрд╛ рд╣реИ - 10 рдорд┐рд▓рд┐рдпрди рд╕реЗ рдЕрдзрд┐рдХ </font><i><font style="vertical-align: inherit;">рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдкрд░</font></i><font style="vertical-align: inherit;"> ред </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдкреНрд░рддрд┐ рдШрдВрдЯрд╛ рдПрдХрддреНрд░ рдХрд┐рдП рдЧрдП рдЖрдБрдХрдбрд╝реЛрдВ рджреНрд╡рд╛рд░рд╛, рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рд╕реВрдЪрдХрд╛рдВрдХ рдЖрдо рддреМрд░ рдкрд░ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдбреЗрдЯрд╛ рднрдВрдбрд╛рд░рдг рдФрд░ рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП рдпреЗ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдпрд╣рд╛рдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рд░реНрд╡рд░ рд╕реНрддрд░ рдкрд░ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗрд╡рд▓ рдбреЗрдЯрд╛ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЛ рдзреАрдорд╛ рдХрд░ рджреЗрддрд╛ рд╣реИред</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рднрд┐рдиреНрди рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди, рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХрд╛ рд╕рдмрд╕реЗ рд╕рдлрд▓ рд╕рдВрдпреЛрдЬрди рд╕рд╛рдордиреЗ рдЖрдпрд╛ рдерд╛: рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреЗ рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдШрдбрд╝реА рдХреНрд╖реЗрддреНрд░ рдкрд░ рдмреИрдЧрди рд╕реВрдЪрдХрд╛рдВрдХ рдФрд░ рдЖрдЗрдЯрдо рдлрд╝реАрд▓реНрдб рдкрд░ btree-gin рд╕реВрдЪрдХрд╛рдВрдХред </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреНрд░рд┐рди рдЗрдВрдбреЗрдХреНрд╕ рдиреАрд░рд╕ рд░реВрдк рд╕реЗ рдмрдврд╝рддреЗ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЖрджрд░реНрд╢ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдХрд┐рд╕реА рдШрдЯрдирд╛ рдХреЗ рддрдереНрдп рдХрд╛ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк, рдпрд╛рдиреАред </font><font style="vertical-align: inherit;">рд╕рдордп рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рд▓рд┐рдПред </font><font style="vertical-align: inherit;">рдФрд░ btree-gin index рдореВрд▓ рд░реВрдк рд╕реЗ рдорд╛рдирдХ рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░реЛрдВ рдкрд░ рдПрдХ gin рдЗрдВрдбреЗрдХреНрд╕ рд╣реИ, рдЬреЛ рдЖрдорддреМрд░ рдкрд░ рдХреНрд▓рд╛рд╕рд┐рдХ рдмреНрд░рд┐рдЧреНрд░реА рд╕реЗ рдмрд╣реБрдд рддреЗрдЬ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ </font><font style="vertical-align: inherit;">рдирдП рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рджреМрд░рд╛рди рдЬрд┐рди рдЗрдВрдбреЗрдХреНрд╕ рдХрд╛ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдЙрдирдХреЗ рджреНрд╡рд╛рд░рд╛ рдкреВрд░рдХ рд╣реИред </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Btree-gin index рдХреЛ PostgreSQL рдХреЗ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдЕрдиреБрдХреНрд░рдордг рд░рдгрдиреАрддрд┐ рдХреЗ рд▓рд┐рдП рдирдореВрдирд╛рдХрд░рдг рдХреА рдЧрддрд┐ рдФрд░ рдЬрд╝реИрдмрд┐рдХреНрд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рддреБрд▓рдирд╛ рдиреАрдЪреЗ рджреА рдЧрдИ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЛрдб рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рджреМрд░рд╛рди, рд╣рдордиреЗ рддреАрди рд╡рд┐рднрд╛рдЬрди рдХреЗ рд▓рд┐рдП рддреАрди рджрд┐рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рдЬрдорд╛ рдХрд┐рдпрд╛:</font></font><br><div class="scrollable-table"><table><tbody><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд┐рднрд╛рдЬрди рдХрд╛ рдирд╛рдо </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MLN рдореЗрдВ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдордмреА рдореЗрдВ рдЖрдХрд╛рд░ </font></font></th></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> history_uint_1 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 81.3 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4119 </font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> history_uint_2 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 74.9 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4426 </font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> history_uint_3 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 100.7 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5387 </font></font></td></tr></tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░рд┐рдгрд╛рдореЛрдВ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рддреАрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд┐рдпрд╛ рдЧрдпрд╛: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдЖрдЗрдЯрдо рдХреЗ рд▓рд┐рдП, рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рдХрд╛ рдбреЗрдЯрд╛, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкрд┐рдЫрд▓реЗ рддреАрди рджрд┐рди (рдХреБрд▓ 1660 рд░рд┐рдХреЙрд░реНрдб) </font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдЗрддрд┐рд╣рд╛рд╕ рд╕реЗ рдЪреБрдиреЗрдВ * рдЬрд╣рд╛рдВ рдЖрдЗрдЯрдо = 313300</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдШрдбрд╝реА&gt; = рдЕрд░реНрдХ ('2019-03-09 00:00:00' :: рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рд╕реЗ) :: int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдШрдбрд╝реА &lt;= рдирд┐рдХрд╛рд▓рдиреЗ ('2019-04-09 12:00:00' рдХрд╛ рд╕рдордп :: рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк) :: int;</font></font><font></font>
</pre></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рджрд┐рди рдХреЗ 12 рдШрдВрдЯреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП (рдХреБрд▓ 649 рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБ) </font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдЗрддрд┐рд╣рд╛рд╕ рд╕реЗ рдЪреБрдиреЗрдВ * рдЬрд╣рд╛рдВ рдЖрдЗрдЯрдо = 310650</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдШрдбрд╝реА&gt; = рдЕрд░реНрдХ ('2019-04-09 00:00:00' :: рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рд╕реЗ) :: int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдШрдбрд╝реА &lt;= рдирд┐рдХрд╛рд▓рдиреЗ ('2019-04-09 12:00:00' рдХрд╛ рд╕рдордп :: рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк) :: int;</font></font><font></font>
</pre></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рдШрдВрдЯреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП (рдХреБрд▓ 61 рд░рд┐рдХреЙрд░реНрдб): </font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрддрд┐рд╣рд╛рд╕_рдЯреЗрдХреНрд╕реНрдЯ рд╕реЗ рдЪреБрдирд┐рдВрджрд╛ рдЧрдгрдирд╛ (*) рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ рдЬрд╣рд╛рдВ рдЖрдЗрдЯрдорд┐рдб = 336540</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдШрдбрд╝реА&gt; = рдЕрд░реНрдХ ('2019-04-08 11:00:00' :: рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рд╕реЗ) :: int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдШрдбрд╝реА &lt;= рдЕрд░реНрдХ ('2019-04-08 12:00:00' рдХрд╛ рд╕рдордп :: рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк) :: int;</font></font><font></font>
</pre></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░реАрдХреНрд╖рд╛ рдкрд░рд┐рдгрд╛рдо рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдереЗ: </font></font><br><div class="scrollable-table"><table><tbody><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реВрдЪрдХрд╛рдВрдХ рдкреНрд░рдХрд╛рд░ </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MB рдореЗрдВ рдЖрдХрд╛рд░ * </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдиреБрд░реЛрдз 1 ** рдПрдордПрд╕ рдореЗрдВ </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдиреБрд░реЛрдз 2 ** рдПрдордПрд╕ рдореЗрдВ </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдиреБрд░реЛрдз 3 ** рдПрдордПрд╕ рдореЗрдВ </font></font></th></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> btree (рдШрдбрд╝реА, рдЖрдЗрдЯрдорд┐рдж) </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 14741 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7154.3 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2205.3 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1860.4 </font></font></td></tr><tr><td><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">brin </font><font style="vertical-align: inherit;">(рдШрдбрд╝реА), </font><font style="vertical-align: inherit;">btree-gin (рдЖрдЗрдЯрдорд┐рдб)</font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0.42 рдФрд░ 1329 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2958.2 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1820.4 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 102.1 </font></font></td></tr></tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* MB рдореЗрдВ рдЖрдХрд╛рд░ рддреАрди рд╡рд┐рднрд╛рдЬрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдХреБрд▓ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">** рдЯрд╛рдЗрдк 1 рдЕрдиреБрд░реЛрдз - 3 рджрд┐рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛, рдЯрд╛рдЗрдк 2 рдЕрдиреБрд░реЛрдз - 12 рдШрдВрдЯреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛, рдЯрд╛рдЗрдк 3 рдЕрдиреБрд░реЛрдз - рдПрдХ рдШрдВрдЯреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреБрд▓рдирд╛ рддрд╛рд▓рд┐рдХрд╛ рд╕реЗ рдпрд╣ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рд░рд┐рдХреЙрд░реНрдб рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде рдмрдбрд╝реЗ рдбреЗрдЯрд╛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдПред 100 рдорд┐рд▓рд┐рдпрди рд╕реЗ рдЕрдзрд┐рдХ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдорд╛рдирдХ рдХрдореНрдкреЛрдЬрд┐рдЯ рдЗрдВрдбреЗрдХреНрд╕ рдмреАрдЯреАрдЖрд░ рдХреЛ рджреЛ рдЗрдВрдбреЗрдХреНрд╕ рдмреНрд░рд┐рди рдФрд░ рдмреАрдЯреНрд░реА-рдЬрд┐рди рдореЗрдВ рдмрджрд▓рдиреЗ рд╕реЗ рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рдЖрдХрд╛рд░ рдХреЛ рдХрдо рдХрд░рдиреЗ рдФрд░ рдХреНрд╡реЗрд░реА рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп рдореЗрдВ рддреЗрдЬреА рд▓рд╛рдиреЗ рдкрд░ рд▓рд╛рднрдХрд╛рд░реА рдкреНрд░рднрд╛рд╡ рдкрдбрд╝рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдбреЗрдХреНрд╕рд┐рдВрдЧ рдФрд░ рдкрд╛рд░реНрдЯреАрд╢рдирд┐рдВрдЧ рдХреА рджрдХреНрд╖рддрд╛ рдЗрддрд┐рд╣рд╛рд╕_рдЙрдВрдЯ рдФрд░ рдЯреНрд░реЗрдВрдбреНрд╕_рдЗрдВрдЯ рдЯреЗрдмрд▓ рдореЗрдВ рдирдП рд░рд┐рдХреЙрд░реНрдб рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рдЙрджрд╛рд╣рд░рдг рдкрд░ рдиреАрдЪреЗ рджрд┐рдЦрд╛рдИ рдЧрдИ рд╣реИ (рдЬреЛрдбрд╝ рдкреНрд░рддрд┐ рдХреНрд╡реЗрд░реА рдФрд╕рддрди 2000 рдорд╛рди рд╣реЛрддреЗ рд╣реИрдВ)ред</font></font><br><div class="scrollable-table"><table><tbody><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рддрд╛рд▓рд┐рдХрд╛ </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реБрдзрд╛рд░ рдХреЗ рд▓рд┐рдП рдФрд╕рдд рдЕрдиреБрд░реЛрдз рд╕рдордп, рдПрдордПрд╕ </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реБрдзрд╛рд░ рдХреЗ рдмрд╛рдж рдФрд╕рдд рдЕрдиреБрд░реЛрдз рд╕рдордп, рдПрдордПрд╕ </font></font></th></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trends_uint </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2201.48 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8.72 </font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trends_uint </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1997.27 </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 62.16 </font></font></td></tr></tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╝реИрдмрд┐рдХреНрд╕ рд╕рд┐рд╕реНрдЯрдо рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдбреЗрдЯрд╛ рдЯреЗрдмрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреНрд░рдорд┐рдд рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдиреНрдпрд╛рд╕реЛрдВ рдХреЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╣рдо рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЬрд╝реИрдмрд┐рдХреНрд╕ рдореЙрдиреАрдЯрд░рд┐рдВрдЧ рдбреЗрдЯрд╛ рдЯреЗрдмрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рд╕реВрдЪрдХрд╛рдВрдХ рдореЗрдВ рдПрдХ рд╕рдорд╛рди рдкрд░рд┐рд╡рд░реНрддрди рд╕рдордЧреНрд░ рдкреНрд░рдгрд╛рд▓реА рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд░реВрдк рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдорд╣рд╕реВрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ 10 рдорд┐рд▓рд┐рдпрди рд╕реЗ рдЕрдзрд┐рдХ рдХреЗ рдбреЗрдЯрд╛ рд╡реЙрд▓реНрдпреВрдо рдЬрдорд╛ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдЖрдкрдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдорд╛рдирдХ рдмреАрдЯреАрдЖрд░рдИ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗ "рд╕реВрдЬрди" рдХреЗ рдЕрдкреНрд░рддреНрдпрдХреНрд╖ рдкреНрд░рднрд╛рд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреВрд▓ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП - рдмрд╣реБ-рдЧреАрдЧрд╛рдмрд╛рдЗрдЯ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗ рд▓рдЧрд╛рддрд╛рд░ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рд╕реЗ рд╣рд╛рд░реНрдб рдбрд┐рд╕реНрдХ рдХрд╛ рднрд╛рд░реА рднрд╛рд░ рд╣реЛрддрд╛ рд╣реИ (рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдореЗрдЯреНрд░рд┐рдХ) ation), рдЬреЛ рдЕрдВрддрддрдГ рдбрд┐рд╕реНрдХ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рдордп рдФрд░ CPU (iowait рдореАрдЯреНрд░рд┐рдХ) рд╕реЗ рдбрд┐рд╕реНрдХ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдмрдврд╝рд╛рддрд╛ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рддрд╛рдХрд┐ btree-gin index рдмрд┐рдЧрд┐рдВрдЯ (in8) рдбреЗрдЯрд╛ рдЯрд╛рдЗрдк рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХреЗ, рдЬреЛ рдХрд┐ рдЖрдЗрдЯрдорд┐рдб рдХреЙрд▓рдо рд╣реИ, рдЖрдкрдХреЛ btree-gin рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд▓рд┐рдП bigint рдЯрд╛рдЗрдк рдХреЗ рдСрдкрд░реЗрдЯрд░реНрд╕ рдХреЗ рдкрд░рд┐рд╡рд╛рд░ рдХреЛ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Btree-gin index рдХреЗ рд▓рд┐рдП рдПрдХ bigint рдСрдкрд░реЗрдЯрд░ рдкрд░рд┐рд╡рд╛рд░ рдХрд╛ рдкрдВрдЬреАрдХрд░рдг рдХрд░рдирд╛</font></font></b> <div class="spoiler_text"><pre>/*<font></font>
     gin    biginteger  integer    .<font></font>
 -   gin     int2, int4, int8,<font></font>
       bigint     ,     bigint (&lt;= 2147483647)<font></font>
        intger_ops,  :<font></font>
create index on tablename using gin(columnname int8_family_ops) with (fastupdate = false);<font></font>
*/<font></font>
<font></font>
--       btree_gin<font></font>
CREATE EXTENSION btree_gin;<font></font>
<font></font>
CREATE OPERATOR FAMILY integer_ops using gin;<font></font>
<font></font>
CREATE OPERATOR CLASS int4_family_ops<font></font>
FOR TYPE int4 USING gin FAMILY integer_ops<font></font>
AS<font></font>
    OPERATOR 1 &lt;,<font></font>
    OPERATOR 2 &lt;=,<font></font>
    OPERATOR 3 =,<font></font>
    OPERATOR 4 &gt;=,<font></font>
    OPERATOR 5 &gt;,<font></font>
    FUNCTION 1 btint4cmp(int4,int4),<font></font>
    FUNCTION 2 gin_extract_value_int4(int4, internal),<font></font>
    FUNCTION 3 gin_extract_query_int4(int4, internal, int2, internal, internal),<font></font>
    FUNCTION 4 gin_btree_consistent(internal, int2, anyelement, int4, internal, internal),<font></font>
    FUNCTION 5 gin_compare_prefix_int4(int4,int4,int2, internal),<font></font>
STORAGE int4;<font></font>
<font></font>
CREATE OPERATOR CLASS int8_family_ops<font></font>
FOR TYPE int8 USING gin FAMILY integer_ops<font></font>
AS<font></font>
    OPERATOR 1 &lt;,<font></font>
    OPERATOR 2 &lt;=,<font></font>
    OPERATOR 3 =,<font></font>
    OPERATOR 4 &gt;=,<font></font>
    OPERATOR 5 &gt;,<font></font>
    FUNCTION 1 btint8cmp(int8,int8),<font></font>
    FUNCTION 2 gin_extract_value_int8(int8, internal),<font></font>
    FUNCTION 3 gin_extract_query_int8(int8, internal, int2, internal, internal),<font></font>
    FUNCTION 4 gin_btree_consistent(internal, int2, anyelement, int4, internal, internal),<font></font>
    FUNCTION 5 gin_compare_prefix_int8(int8,int8,int2, internal),<font></font>
STORAGE int8;<font></font>
<font></font>
ALTER OPERATOR FAMILY integer_ops USING gin add<font></font>
  OPERATOR 1 &lt;(int4,int8),<font></font>
  OPERATOR 2 &lt;=(int4,int8),<font></font>
  OPERATOR 3 =(int4,int8),<font></font>
  OPERATOR 4 &gt;=(int4,int8),<font></font>
  OPERATOR 5 &gt;(int4,int8);<font></font>
<font></font>
ALTER OPERATOR FAMILY integer_ops USING gin add<font></font>
  OPERATOR 1 &lt;(int8,int4),<font></font>
  OPERATOR 2 &lt;=(int8,int4),<font></font>
  OPERATOR 3 =(int8,int4),<font></font>
  OPERATOR 4 &gt;=(int8,int4),<font></font>
  OPERATOR 5 &gt;(int8,int4);<font></font>
</pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рдЗрд╖реНрдЯрддрдо рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗ Zabbix рдХреЗ рд▓рд┐рдП PostgreSQL рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╕рднреА рдЕрдиреБрдХреНрд░рдореЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдХрд░рддреА рд╣реИред</font></font></b> <div class="spoiler_text"><pre>/*<font></font>
        <font></font>
*/<font></font>
<font></font>
--   <font></font>
drop index history_1;<font></font>
drop index history_uint_1;<font></font>
drop index history_str_1;<font></font>
drop index history_text_1;<font></font>
drop index history_log_1;<font></font>
--          PK <font></font>
-- (   ,         )<font></font>
alter table trends drop constraint trends_pk;<font></font>
alter table trends_uint drop constraint trends_uint_pk;<font></font>
<font></font>
--     bree-gin   itemid    <font></font>
--   btree-gin  bigint       <font></font>
-- https://habr.com/ru/company/postgrespro/blog/340978/#comment_10545932<font></font>
--    create extension btree_gin;<font></font>
create index on history using gin(itemid int8_family_ops) with (fastupdate = false);<font></font>
create index on history_uint using gin(itemid int8_family_ops) with (fastupdate = false);<font></font>
create index on history_str using gin(itemid int8_family_ops) with (fastupdate = false);<font></font>
create index on history_text using gin(itemid int8_family_ops) with (fastupdate = false);<font></font>
create index on history_log using gin(itemid int8_family_ops) with (fastupdate = false);<font></font>
create index on trends using gin(itemid int8_family_ops) with (fastupdate = false);<font></font>
create index on trends_uint using gin(itemid int8_family_ops) with (fastupdate = false);<font></font>
<font></font>
--     bree-gin   itemid    <font></font>
--     brin    128 ,    <font></font>
--           ,<font></font>
--      https://habr.com/ru/company/postgrespro/blog/346460/<font></font>
create index on history using brin(clock) with (pages_per_range = 128);<font></font>
create index on history_uint using brin(clock) with (pages_per_range = 128);<font></font>
create index on history_str using brin(clock) with (pages_per_range = 128);<font></font>
create index on history_text using brin(clock) with (pages_per_range = 128);<font></font>
create index on history_log using brin(clock) with (pages_per_range = 128);<font></font>
create index on trends using brin(clock) with (pages_per_range = 128);<font></font>
create index on trends_uint using brin(clock) with (pages_per_range = 128);<font></font>
</pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100 рдЯрди рдкреНрд░рддрд┐ рдорд┐рдирдЯ (рдЗрддрд┐рд╣рд╛рд╕ рдореЗрдВ 100 рдЯрди рдФрд░ history_uint рдореЗрдВ 100 рдЯрди) рдХреА рддреАрд╡реНрд░рддрд╛ рдкрд░ рд╣рдорд╛рд░реЗ рдбреЗрдЯрд╛ рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд▓рд┐рдП рдмреНрд░рд┐рди рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд▓рд┐рдП, рдпрд╣ рджреЗрдЦрд╛ рдЧрдпрд╛ рдХрд┐ рд╕реВрдЪрдХрд╛рдВрдХ 512 рдкреГрд╖реНрдареЛрдВ рдХреЗ рдЬрд╝реЛрди рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рдбреЗрдЯрд╛ рдХреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдкрд░ рджреЛ рдмрд╛рд░ рддреЗрдЬреА рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред 128 рдкреГрд╖реНрдареЛрдВ рдХреЗ рдорд╛рдирдХ рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде, рд▓реЗрдХрд┐рди рдпрд╣ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╣реИ рдФрд░ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдФрд░ рд╕рд░реНрд╡рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдЖрдХрд╛рд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ, рдмреНрд░рд┐рди рдЗрдВрдбреЗрдХреНрд╕ рдмрд╣реБрдд рдХрдо рдЬрдЧрд╣ рд▓реЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЬрд╝реЛрди рдХреЗ рдЖрдХрд╛рд░ рдХреЛ рдареАрдХ-рдареАрдХ рдХрд░рдХреЗ рдЗрд╕рдХреА рдЧрддрд┐ рдХреЛ рдереЛрдбрд╝рд╛ рдмрдврд╝рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдмрд╢рд░реНрддреЗ рдХрд┐ рдбреЗрдЯрд╛ рдкреНрд░рд╡рд╛рд╣ рджрд░ рдореЗрдВ рдмрд╣реБрдд рдмрджрд▓рд╛рд╡ рди рд╣реЛред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирддреАрдЬрддрди, рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдЬрд╝реИрдмрд┐рдХреНрд╕ рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рд╕реЗ рдЬреБрдбрд╝реА рдПрдХ рд╕реАрдорд╛ рд╣реИ: рдЯреИрдм "рд╣рд╛рд▓ рдХреЗ рдбреЗрдЯрд╛" рдкрд░, рдкреНрд░рддреНрдпреЗрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдЕрдВрддрд┐рдо рджреЛ рдорд╛рдиреЛрдВ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдореЗрдВ рд▓реЗрддреЗ рд╣реБрдП рдПрдХрддреНрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд▓рд┐рдП, рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдорд╛рдиреЛрдВ рдХрд╛ рдЕрдиреБрд░реЛрдз рдЕрд▓рдЧ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, рдЬрд┐рддрдиреЗ рдЕрдзрд┐рдХ рдРрд╕реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдЪреБрдиреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдЙрддрдиреА рд╣реА рд▓рдВрдмреА рдХреНрд╡реЗрд░реА рдЪрд▓реЗрдЧреАред рд╕рдмрд╕реЗ рд╣рд╛рд▓рд┐рдпрд╛ рдбреЗрдЯрд╛ рддрдм рдЦреЛрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм btree index (itemid, clock desc) рдХреЛ рдЗрддрд┐рд╣рд╛рд╕ рд╕рд╛рд░рдгреА рдореЗрдВ рд╕рдордп рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд░рд┐рд╡рд░реНрд╕ рд╕реЙрд░реНрдЯрд┐рдВрдЧ рдХреЗ рд╕рд╛рде рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдбрд┐рд╕реНрдХ рдкрд░ рдмреЗрд╢рдХ "swells" рдХрд╛ рдЗрдВрдбреЗрдХреНрд╕ рдФрд░ рдЖрдорддреМрд░ рдкрд░ рдЕрдкреНрд░рддреНрдпрдХреНрд╖ рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдзреАрдорд╛ рдХрд░ рджреЗрддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИ, рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рддреАрди рддрд░реАрдХреЗ рд╣реИрдВ:</font></font><br><br><ol><li>             ┬л ┬╗      100  (..   ,     ┬л ┬╗    ) </li><li>     Zabbix ,                  ,          ┬л ┬╗ </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВ, рдФрд░ рдХрдИ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рд╣рд╛рд▓ рдХреЗ рдбреЗрдЯрд╛ рдЯреИрдм рдкрд░ рдХрд╛рдлреА рдмрдбрд╝реЗ рдЪрдпрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рд╡рд┐рднрд╛рдЬрди рдХреЗ рд▓рд┐рдП рдЦреБрдж рдХреЛ рд╕реАрдорд┐рдд рдХрд░реЗрдВ (рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рджреЗрдЦрд╛ рдЧрдпрд╛ рдерд╛ рдХрд┐ рдЬрд╝реИрдмрд┐рдХреНрд╕ рд╡реЗрдм рд╕рд░реНрд╡рд░ рдореЗрдВ рдЕрднреА рднреА рдПрдХ рд╕рд╛рде рдкреНрд░рджрд░реНрд╢рд┐рдд рдкреИрд░рд╛рдореАрдЯрд░ рдорд╛рдиреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдПрдХ рд╕реАрдорд╛ рд╣реИ рдЯреИрдм "рд╣рд╛рд▓ рдХреЗ рдбреЗрдЯрд╛" рдкрд░ - рдЗрд╕рд▓рд┐рдП, рдЬрдм рдореИрдВрдиреЗ 5000 рдорд╛рдиреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд┐рдпрд╛, рддреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдиреЗ рдкрд░рд┐рдгрд╛рдо рдХреА рдЧрдгрдирд╛ рдХреА, рд▓реЗрдХрд┐рди рд╕рд░реНрд╡рд░ рд╡реЗрдм рдкреЗрдЬ рддреИрдпрд╛рд░ рдирд╣реАрдВ рдХрд░ рд╕рдХрд╛ рдФрд░ рдЗрддрдиреА рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░ рд╕рдХрд╛)ред </font></font></li></ol><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреНрд╡реЗрд░реА рдирд┐рд╖реНрдкрд╛рджрди рдЖрдВрдХрдбрд╝реЛрдВ рдХрд╛ рд╕рдВрдЧреНрд░рд╣ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг pg_stat_statements </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pg_stat_statements рдкреВрд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдХреНрд╡реЗрд░реА рдкреНрд░рджрд░реНрд╢рди рдкрд░ рдЖрдВрдХрдбрд╝реЗ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕реЗ PostgreSQL рд▓реЙрдЧ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдФрд░ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pg_stat_statements рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</font></font></b> <div class="spoiler_text">    psql: <br><br><pre> CREATE EXTENSION pg_stat_statements; </pre><br>       postgresql.conf: <br><br><pre>shared_preload_libraries = 'pg_stat_statements'<font></font>
pg_stat_statements.max = 10000 #   sql ,     (     );<font></font>
pg_stat_statements.track = all # all -   (    ), top -   /, none -  <font></font>
pg_stat_statements.save = true #     <font></font>
</pre><br>  : <br><br><pre> SELECT pg_stat_statements_reset(); </pre><br>          : <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">substring</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">query</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'[^(]*'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> query_sub, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(calls) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> calls, <span class="hljs-keyword"><span class="hljs-keyword">avg</span></span>(mean_time) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mean_time <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_stat_statements <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">query</span></span> ~ <span class="hljs-string"><span class="hljs-string">'insert into'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">query</span></span> ~ <span class="hljs-string"><span class="hljs-string">'update trends'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">substring</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">query</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'[^(]*'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> calls <span class="hljs-keyword"><span class="hljs-keyword">desc</span></span></code> </pre> </div></div><br><h4>      </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbix рдореЗрдВ рд╣рд╛рд░реНрдб рдбреНрд░рд╛рдЗрд╡ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП, рдХреЗрд╡рд▓ vfs.dev.read рдФрд░ vfs.dev.write рдкреИрд░рд╛рдореАрдЯрд░ рдмреЙрдХреНрд╕ рд╕реЗ рдмрд╛рд╣рд░ рджрд┐рдП рдЧрдП рд╣реИрдВред рдпреЗ рд╡рд┐рдХрд▓реНрдк рдбрд┐рд╕реНрдХ рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред рдЕрдкрдиреА рд╣рд╛рд░реНрдб рдбреНрд░рд╛рдЗрд╡ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдорд╛рдирджрдВрдб рдЙрдкрдпреЛрдЧ рдХрд╛рд░рдХ, рдкреНрд░рддреАрдХреНрд╖рд╛ рд╕рдордп рдФрд░ рдбрд┐рд╕реНрдХ рд▓реЛрдб рдХрддрд╛рд░ рд▓реЛрдб рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдЙрдЪреНрдЪ рдбрд┐рд╕реНрдХ рд▓реЛрдб cpu рдХреЗ рдЙрдЪреНрдЪ iowait рдХреЗ рд╕рд╛рде рдФрд░ sql рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЗ рд╕рд╛рде рд╕рд╣рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ рд╡рд┐рднрд╛рдЬрди рдХреЗ рдмрд┐рдирд╛ рдФрд░ рд╡реИрдХрд▓реНрдкрд┐рдХ рдЕрдиреБрдХреНрд░рдорд┐рдд рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рдмрд┐рдирд╛ рдПрдХ рдорд╛рдирдХ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЗ рд╕рд╛рде рдПрдХ zabbix рд╕рд░реНрд╡рд░ рдХреЗ рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди рдкрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред рдЖрдк рдирд┐рдореНрди рдЪрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рд╛рд░реНрдб рдбреНрд░рд╛рдЗрд╡ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рдЗрди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ </font><font style="vertical-align: inherit;">рдПрдХ рдорд┐рддреНрд░ рд╕реЗ рдПрдХ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ рджреЗрдЦрд╛ рдЧрдпрд╛ рдерд╛</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lesovsky</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рдмреЗрд╣рддрд░: рдЕрдм </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link"><font style="vertical-align: inherit;">jost</font></a><font style="vertical-align: inherit;"> рд╕рдордп рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ iostat рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкреНрд░рддреНрдпреЗрдХ рдбрд┐рд╕реНрдХ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рд╕реЗ рдПрдХрддреНрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рд╕реЗ, рдкреЛрд╕реНрдЯ-рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рд╡реЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдВрддрд┐рдо рдирд┐рдЧрд░рд╛рдиреА рдорд╛рдкрджрдВрдбреЛрдВ рдореЗрдВ рд╡рд┐рдШрдЯрд┐рдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдмрдХрд┐ рдкреБрд▓ рдЕрдиреБрд░реЛрдз рд▓рдВрдмрд┐рдд рд╣реИ, рдЖрдк </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрд░реЗ рдХрд╛рдВрдЯреЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рд╕реНрддреГрдд рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдиреБрд╕рд╛рд░ рдбрд┐рд╕реНрдХ рдорд╛рдкрджрдВрдбреЛрдВ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рд╡рд░реНрдгрд┐рдд рдЪрд░рдгреЛрдВ рдХреЗ рдмрд╛рдж, рдЖрдк рдореБрдЦреНрдп Zabbix рд╕рд░реНрд╡рд░ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдкреИрдирд▓ рдХреЗ рд▓рд┐рдП рд╕рд┐рд╕реНрдЯрдо рдбрд┐рд╕реНрдХ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдбрд┐рд╕реНрдХ (рдпрджрд┐ рд╡реЗ рдЕрд▓рдЧ рд╣реИрдВ) рдХреЗ рд▓рд┐рдП iowait cpu рдФрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдХрд╕реНрдЯрдо рдЧреНрд░рд╛рдл рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдкрд░рд┐рдгрд╛рдо рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ (sda рдореБрдЦреНрдп рдбрд┐рд╕реНрдХ рд╣реИ, sdc рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдбрд┐рд╕реНрдХ рд╣реИ):</font></font><br><br><img src="https://habrastorage.org/webt/oa/nj/fa/oanjfa3hajssftbq22dk8njiwj0.png"><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DBMS рдХреА рд╕реНрдерд╛рдкрдирд╛, рдЕрдиреБрдХреНрд░рдордг рдФрд░ рд╡рд┐рднрд╛рдЬрди рдХреЗ рдмрд╛рдж, рдЖрдк рд╡рд░реНрдЯрд┐рдХрд▓ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ - рд╕рд░реНрд╡рд░ рдХреА рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП: RAM рдЬреЛрдбрд╝реЗрдВ, рдбреНрд░рд╛рдЗрд╡ рдХреЛ рд╕реЙрд▓рд┐рдб-рд╕реНрдЯреЗрдЯ рдореЗрдВ рдмрджрд▓реЗрдВ рдФрд░ рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛрд░ рдЬреЛрдбрд╝реЗрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рдПрдХ рдЧрд╛рд░рдВрдЯреАрдХреГрдд рдкреНрд░рджрд░реНрд╢рди рд╡реГрджреНрдзрд┐ рд╣реИ, рд▓реЗрдХрд┐рди рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЕрдиреБрдХреВрд▓рди рдХреЗ рдмрд╛рдж рд╣реА рдРрд╕рд╛ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╡рд┐рддрд░рд┐рдд рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдирд╛ </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдордзреНрдпрдо рдКрд░реНрдзреНрд╡рд╛рдзрд░ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдХреНрд╖реИрддрд┐рдЬ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ - рдПрдХ рд╡рд┐рддрд░рд┐рдд рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдПрдВ: рдпрд╛ рддреЛ рд╢рд╛рд░реНрдк рдХрд░реЗрдВ рдпрд╛ рдорд╛рд╕реНрдЯрд░ рджрд╛рд╕ рдХреЛ рджреЛрд╣рд░рд╛рдПрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдпрд╣ рдПрдХ рдЕрд▓рдЧ рд╡рд┐рд╖рдп рдФрд░ рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рдХреА рд╕рд╛рдордЧреНрд░реА рд╣реИ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдХреИрд╕реЗ рдЧрдВрджрдЧреА рдФрд░ рд▓рд╛рдареА рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЛ рдврд╛рд▓рдирд╛)</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рд╕рд╛рде рд╣реА рд╕рд╛рде рдКрдкрд░ рд╡рд░реНрдгрд┐рдд Zabbix рдбреЗрдЯрд╛рдмреЗрд╕ рдЕрдиреБрдХреВрд▓рди рддрдХрдиреАрдХ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ pg_pathman рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдФрд░ TimescaleDB рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рддрдХрдиреАрдХ рдХреЗ рд╕рд╛рде рдЕрдиреБрдХреНрд░рдордг рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдмреАрдЪ, рдХреЛрдИ рдХреЗрд╡рд▓ рдпрд╣ рдЖрд╢рд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рд▓реЗрдЦ рдХреА рд╕рд╛рдордЧреНрд░реА рдЙрдкрдпреЛрдЧреА рдФрд░ рдЬреНрдЮрд╛рдирд╡рд░реНрдзрдХ рд╣реЛ!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi468463/">https://habr.com/ru/post/hi468463/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi468445/index.html">рдлрд╝рд╛рдпрд░рдлрд╝реЙрдХреНрд╕ рдФрд░ рдХреНрд░реЛрдо DNS рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░реЗрдВрдЧреЗ рдФрд░ рд╕реЗрдВрд╕рд░рд╢рд┐рдк рдХреЛ рджрд░рдХрд┐рдирд╛рд░ рдХрд░реЗрдВрдЧреЗ</a></li>
<li><a href="../hi468447/index.html">рд▓рд╛рд░рдЧрди - рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕реНрдерд╛рдиреАрдп рдбреЛрдореЗрди рдХреЗ рд╕рд╛рде WAMP</a></li>
<li><a href="../hi468453/index.html">MBLT19 :: рд░рд┐рдкреЛрд░реНрдЯ, рдЙрддреНрдкрд╛рдж рд▓рдбрд╝рд╛рдИ рдФрд░ рдкрд░реАрдХреНрд╖рдг</a></li>
<li><a href="../hi468457/index.html">рдбрдореА рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ рдЕрдВрдХрдЧрдгрд┐рддреАрдп рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рдЬрдирд░реЗрдЯрд░ рдФрд░ рди рдХреЗрд╡рд▓</a></li>
<li><a href="../hi468459/index.html">рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд░рдбрд╛рд░ рдбрд┐рдЯреЗрдХреНрдЯрд░ рдЕрд╡рд▓реЛрдХрди: рд╣рдорд╛рд░реЗ рдкреНрд░рдореБрдЦ Playme рд╕рд╛рдЗрд▓реЗрдВрдЯ 2</a></li>
<li><a href="../hi468465/index.html">рдЕрдЯреЙрд░реНрдиреА рдХрд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг: рдЖрдИрдЯреА рдХрдВрдкрдирд┐рдпрд╛рдВ рдПрдХ рдЬрд╣рд░реАрд▓реЗ рд╕рд░рдХрд╛рд░реА рдЧреНрд░рд╛рд╣рдХ рдХреЗ рд╕рд╛рде рдЕрдиреБрдмрдВрдз рдХреИрд╕реЗ рд╕рдорд╛рдкреНрдд рдХрд░ рд╕рдХрддреА рд╣реИрдВ</a></li>
<li><a href="../hi468471/index.html">AngularConnect 2019 рдХрд╛ рдЕрд╡рд▓реЛрдХрдиред рднрд╛рдЧ 1</a></li>
<li><a href="../hi468479/index.html">тАЬрд▓реЛрдЧреЛрдВ рдХреЛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдореБрдлреНрдд рдмреЗрдХрд╛рд░ рд╣реИред рдпрд╣ рдореБрдЭреЗ рд▓рдЧ рд░рд╣рд╛ рдерд╛ рдХрд┐ рдореИрдВ рдЙрдиреНрд╣реЗрдВ рдордирд╛ рд╕рдХрддрд╛ рд╣реВрдВ тАЭ- рд░реБрд░реА рд╕реНрдХреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдпреВрд░реА рдпрд╛рд░реНрдЯрд╕реЗрд╡</a></li>
<li><a href="../hi468485/index.html">рдЬрдм рдЖрдк рдПрдХ рд╕реБрдВрджрд░ GUI рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди gpu рдирд╣реАрдВ рд╣реИ</a></li>
<li><a href="../hi468487/index.html">рдХреНрдпрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрдХреНрд░рдордг рд╡реИрдХреНрдЯрд░)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>