<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∂Ô∏è ü•´ ‚õπüèæ Comment nous sommes analys√©s dans les cin√©mas ... et pas seulement üë©üèº‚Äçüåæ üêî ‚õëÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La vision par ordinateur est de plus en plus int√©gr√©e dans nos vies. En m√™me temps, nous ne remarquons m√™me pas toute cette observation de nous. Aujou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous sommes analys√©s dans les cin√©mas ... et pas seulement</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/413015/">  La vision par ordinateur est de plus en plus int√©gr√©e dans nos vies.  En m√™me temps, nous ne remarquons m√™me pas toute cette observation de nous.  Aujourd'hui, nous allons parler d'un syst√®me qui permet d'analyser les √©motions des visiteurs lors de conf√©rences, dans le processus √©ducatif, dans les cin√©mas, et bien plus encore.  Soit dit en passant, nous allons montrer le code et parler de cas pratiques.  Regardez sous le chat! <br><br><img src="https://habrastorage.org/webt/cp/l5/__/cpl5__dlawmskon1umbrzryvuza.jpeg"><a name="habracut"></a><br><br>  <i>Je donne la parole √† l'auteur.</i> <br><br>  Voulez-vous toujours conna√Ætre en personne le public dans le hall, la salle de classe, le bureau et le g√©rer?  La question n'est pas du tout vide.  Il s'agit d'un public hors ligne.  Pour am√©liorer les performances de votre entreprise, disposer d'informations sur le comportement de votre client, ses r√©actions et ses d√©sirs est une n√©cessit√© vitale.  Comment collecter ces statistiques? <br><br>  Avec une audience en ligne, tout est plus facile.  Si l'entreprise est situ√©e sur Internet, le marketing est grandement simplifi√© et la collecte de donn√©es sur le profil de vos clients, puis la ¬´rattrapage¬ª pour une dur√©e illimit√©e - est assez simple.  Beaucoup d'outils - prenez et utilisez, le co√ªt augmente. <br><br>  En mode hors ligne, les m√™mes m√©thodes s'appliquent qu'il y a 50 ans: questionnaires, questionnaires, observateurs externes avec un cahier, etc.  La qualit√© de ces approches est m√©diocre.  La fiabilit√© est douteuse.  √Ä propos de la commodit√©, vous pouvez g√©n√©ralement rester silencieux. <br><br>  Dans cet article, nous voulons parler de la nouvelle solution de CVizi, qui recueille des statistiques int√©ressantes et uniques et aide √† analyser les informations sur vos clients / visiteurs √† l'aide de la vision par ordinateur. <br><br><h2>  Analyses vid√©o et cin√©mas </h2><br>  Initialement, le produit a √©t√© d√©velopp√© comme un outil pour compter les spectateurs de cin√©ma et comparer leur nombre avec les billets achet√©s pour le contr√¥le disciplinaire du personnel de service et la pr√©vention des violations.  Mais comme on dit, l'app√©tit vient avec l'alimentation. <br><br>  La technologie d√©velopp√©e a permis d'√©tendre les capacit√©s de la solution.  Il est devenu possible de d√©terminer l'√¢ge et le sexe des visiteurs de cin√©ma, ainsi que de d√©terminer le contexte √©motionnel de chaque personne pendant la session. <br><br>  Les informations sont mises √† jour rapidement et l'utilisateur n'a qu'√† acc√©der √† votre compte personnel et afficher des statistiques sur la session d'int√©r√™t ou un rapport analytique sur le public. <br><br><img src="https://habrastorage.org/webt/eh/iy/il/ehiyiluyhatopbmgnufkwfk9saw.png"><br><br>  Par exemple, nous ouvrons une session avec le film ¬´Ice¬ª et nous voyons sur le r√©alisme de la salle la dominance √©vidente des spectatrices (en principe, de fa√ßon pr√©visible).  Et puis nous regardons ces √©motions que les gens ont v√©cues (tout le monde peut voir). <br><br><img src="https://habrastorage.org/webt/5t/yo/de/5tyodebh7pkehz3lc1mv2d1ofso.png"><br><br><img src="https://habrastorage.org/webt/8o/wp/fv/8owpfvt5z5dtbhupzvhv5_1je9g.png"><br><br>  Il s'agissait de donn√©es pour une session sp√©cifique.  Examinons maintenant les m√™mes donn√©es en g√©n√©ral pour toute la p√©riode de location du film (dans un cin√©ma) et obtenons une image plus pertinente. <br><br><img src="https://habrastorage.org/webt/ou/ht/nw/ouhtnwjoxfousovpgyipn5b4ace.png"><br><br>  En termes de fr√©quentation, il y a une nette pr√©dominance des t√©l√©spectatrices √¢g√©es de 25 √† 34 ans.  Les hommes sont 2,5 √† 3 fois moins.  C'est-√†-dire  La publicit√© dans un nouveau SUV dans un bloc d'annonces n'est pas aussi intelligente que de mettre un nouveau mascara.  Bien que ce soit un point discutable.  Mais en tout cas, apr√®s seulement quelques jours de location, vous pouvez garantir en toute s√©curit√© √† l'annonceur le public cible, et m√™me en termes quantitatifs. <br><br>  Du point de vue de l'arri√®re-plan √©motionnel, l'image int√©ressera principalement les distributeurs et les distributeurs.  A qui le film pla√Æt-il, et qui agace?  Dois-je tourner une suite?  Vous croyez aux critiques de robots ou obtenez des statistiques fiables?  Dans ce cas (le film "Ice"), le film est assez brillant d'√©motions.  La somme des √©motions positives et n√©gatives est de 18,5 perroquets sur 100. Le reste est neutre.  C'est un assez bon indicateur.  √Ä titre de comparaison, le fond √©motionnel dans d'autres films peut ne pas √™tre aussi rose (en moyenne dans un h√¥pital pour tous les √¢ges et tous les genres). <br><br><img src="https://habrastorage.org/webt/yd/80/bm/yd80bmjtbkwhzvemeeflo33h3aa.png"><br><br>  Par exemple, la Pacific Frontier, avec un nombre comparable de t√©l√©spectateurs sur la m√™me p√©riode, a 2 fois moins d'√©motions positives.  Et le film ¬´Bonjour, Oksana Sokolova¬ª est une telle d√©couverte pour les femmes ¬´50+¬ª. <br><br><img src="https://habrastorage.org/webt/jp/c7/mk/jpc7mksi2r_vkw8klj_irnnmuqc.png"><br><br>  Tous ces exemples sont des analyses qui peuvent √™tre utilis√©es dans les r√©seaux de films.  Ils ne disposaient tout simplement pas de ces informations, et peu de gens savent qu'elles peuvent √™tre obtenues du tout, et encore plus pour leur propre usage. <br><br>  Pour les r√©seaux cin√©matographiques, de grandes opportunit√©s s'ouvrent pour une analyse plus approfondie de ce qui se passe dans la salle en fonction de la composition du public et de sa r√©action aux films dans diff√©rentes localit√©s. <br><br>  <b>Vous pouvez imm√©diatement mettre en √©vidence les √©l√©ments suivants</b> : <br><br><ol><li>  La capacit√© de tester toute hypoth√®se marketing est de recevoir des commentaires en temps r√©el et d'√©valuer objectivement les changements d'audience et l'effet des activit√©s marketing. </li><li>  La possibilit√© de fournir aux annonceurs des informations pr√©cises sur l'audience qui a vu l'annonce.  Plus encore, il est possible pour l'annonceur de garantir la visualisation des publicit√©s par certains groupes d'audience. </li><li>  La possibilit√© de cr√©er des offres marketing uniques sur le march√© (remises) pour les visiteurs d'un certain √¢ge et sexe, sans rompre le sch√©ma de travail existant et sans r√©duire les indicateurs financiers actuels. </li></ol><br>  Ces opportunit√©s et bien d'autres qui se sont pr√©sent√©es gr√¢ce √† cette d√©cision sont en mesure de transformer le march√© des r√©seaux de cin√©ma, d'augmenter les revenus et d'am√©liorer l'efficacit√© des cin√©mas individuels et de l'ensemble du r√©seau. <br><br>  Consid√©rant que la solution est ¬´facile¬ª (pas de serveurs, pas de streaming sur Internet), utilise activement le cloud Microsoft Azure et propose des prix abordables pour le march√© (sous forme d'abonnements p√©riodiques au service), les r√©seaux de cin√©ma en Russie et √† l'√©tranger la mettent activement en ≈ìuvre. <br><br>  De plus, la technologie cr√©√©e se refl√®te dans d'autres solutions dans des domaines parall√®les. <br><br><h2>  Analyses vid√©o et √©v√©nements </h2><br>  √âv√©nements, √©v√©nements, forums, sommets, conf√©rences, symposiums ... Que savent les organisateurs du nouveau public?  X personnes se sont inscrites, Y est venu, Z a rempli les questionnaires, c'est presque tout. <br><br>  Le questionnement est une douleur distincte: "Donc, je connais bien ce camarade, je lui donnerai 5 points, bien que le rapport soit ennuyeux."  Nous aboutissons au fait que la fiabilit√© des questionnaires est faible. <br>  Pour comprendre l'efficacit√© de la conf√©rence, les commentaires des participants √† l'organisateur et aux sponsors sont tout simplement n√©cessaires. <br><br>  Le service d'analyse de l'audience dans les cin√©mas se transf√®re parfaitement au lieu de la conf√©rence.  CVizi a √©galement test√© ce cas en r√©alisant deux exp√©riences: dans la salle Matrex √† Skolkovo lors d'une des conf√©rences et dans la salle Digital October lors de la finale russe du concours de projets technologiques √©tudiants Imagine Cup 2018. <br><br><h4>  Exp√©rience 1. Salle Matrex √† Skolkovo </h4><br>  √Ä Matrex, la cam√©ra n'√©tait pas install√©e au-dessus de l'√©cran, comme dans une salle de cin√©ma, mais sur un support t√©lescopique derri√®re les haut-parleurs.  Ainsi, la solution s'est av√©r√©e mobile.  Il suffit de quelques heures avant le d√©marrage pour installer une cam√©ra, mettre en place un planogramme de la salle et saisir un calendrier des intervenants.  Ensuite, le syst√®me fait tout lui-m√™me. <br><br><img width="300" src="https://habrastorage.org/webt/hg/9e/xb/hg9exbr_lyhzqmtuhv42ava6sq8.png"><br><br><img src="https://habrastorage.org/webt/9r/tx/n9/9rtxn9br1inyzrwbbx5317dljv8.png"><br><br>  L'organisateur peut d√©sormais collecter des donn√©es sur la qualit√© des rapports √† travers le nombre de participants dans la salle et leurs √©motions √† chaque session / rapport.  Et la prochaine fois, vous pouvez planifier un √©v√©nement bas√© sur des faits objectifs.  Il y a des rapports, apr√®s quoi les participants quittent simplement la salle, et l'orateur suivant travaille avec ceux qui sont rest√©s ou n'ont pas eu le temps de partir.  C'est faux, et une telle pr√©vision pourrait simplement changer radicalement l'effet en r√©organisant les rapports. <br><br><h4>  Exp√©rience 2. Finale russe Imagine Cup </h4><br>  Ici, l'objectif √©tait quelque peu diff√©rent, mais l'approche est la m√™me.  L'une des nominations du concours est le prix du public.  Ce sont ces t√©l√©spectateurs qui sont assis dans la salle, pas les t√©l√©spectateurs en ligne.  Et pour la premi√®re fois √† l'Imagine Cup, le prix du public a √©t√© attribu√© √† une √©quipe choisie par l'intelligence artificielle.  L'√©quipe a gagn√©, dont le public a r√©agi le plus positivement pendant que les gars √©taient sur sc√®ne.  Pour cela, deux cam√©ras ont d√©j√† √©t√© utilis√©es, chacune contr√¥lant en continu son propre secteur de la salle et recueillant les caract√©ristiques √©motionnelles de chaque spectateur. <br><br>  Dans ce cas, les cam√©ras pouvaient √™tre accroch√©es sur un m√¢t d'√©clairage au-dessus de la sc√®ne, ce qui garantissait leur stabilit√© et leur immobilit√© garanties.  Et nous √©tions √©galement une fois de plus convaincus que l'Internet 4G est suffisant pour que le service fonctionne.  Le syst√®me s'est av√©r√© aussi autonome que possible.  Des organisateurs, 220 V seulement √©taient n√©cessaires, ce qui est tr√®s important, car  lors d'√©v√©nements de cette ampleur, les canaux de communication sont toujours un goulot d'√©tranglement et la qualit√© du service d√©pend directement de la stabilit√© du canal Internet. <br><br>  En cons√©quence, le prix du public a √©t√© d√©cern√© √† l'√©quipe qui a marqu√© le nombre maximum d'√©motions positives pour leur performance - Last Day Development de NNSU im.  Lobachevsky. <br><br><img src="https://habrastorage.org/webt/0j/on/o5/0jono53dh_99qoc6mbnajn2kor8.jpeg"><br><br><h2>  Analyse vid√©o et apprentissage </h2><br>  Le domaine de l'√©ducation en termes d'automatisation de ses processus est encore tr√®s en retard sur le reste des industries.  Par exemple, le contr√¥le de la fr√©quentation sous la forme d'un contr√¥leur externe avec un journal est toujours pratiqu√© dans de nombreuses universit√©s: une personne est entr√©e, a compt√© les √©tudiants lors des conf√©rences, a entr√© un certain nombre dans le journal (quelle question?) Et a continu√©. <br><br>  La technologie d'analyse du public par des m√©thodes de vision par ordinateur s'adapte parfaitement au domaine de l'√©ducation et ouvre un large champ d'exp√©rimentation et d'analyse.  T√¢ches possibles √† r√©soudre: <br><br><ol><li>  Suivi des pr√©sences aux cours </li><li>  Identification de l'√©l√®ve </li><li>  √âvaluation de la qualit√© de l'enseignement </li><li>  Identification des √©motions n√©gatives de l'√©l√®ve et adoption de mesures pr√©ventives. </li><li>  √âvaluation de l'implication d'un √©l√®ve ou d'un √©l√®ve √† l'√©cole. </li></ol><br>  Une bonne planification du processus √©ducatif, y compris le calendrier, le choix des enseignants - c'est la base du succ√®s de l'√©ducation.  Mais en fait, si on passe au domaine √©conomique, c'est le co√ªt de l'√©ducation dans le contexte de chaque √©l√®ve. <br><br><h2>  Analyse vid√©o dans d'autres secteurs </h2><br>  La technologie CVizi ne se limite pas aux solutions pr√©sent√©es, il existe des solutions pour la vente au d√©tail et la production. <br><br>  Par exemple, une solution int√©ressante consiste √† obtenir des informations sur la conversion externe et interne du magasin.  Ces deux indicateurs vous permettent de cr√©er un entonnoir de vente hors ligne: <br><br><ul><li>  Combien de personnes marchent pr√®s de votre magasin; </li><li>  Combien de personnes y sont entr√©es; </li><li>  Combien de personnes sont arriv√©es √† la caisse enregistreuse. </li></ul><br>  Voici un exemple de conversion externe pour un magasin typique situ√© dans un centre commercial √† Moscou: <br><br><img src="https://habrastorage.org/webt/1m/1m/ki/1m1mki5kknrymdyqcye2yh_nzpy.png"><br><br>  Gr√¢ce √† ces indicateurs, une entreprise peut d√©penser plus efficacement de l'argent pour attirer des clients, tester des hypoth√®ses marketing et am√©liorer la qualit√© de service. <br><br><h2>  Comment √ßa marche? </h2><br>  Maintenant, je veux parler un peu de la technologie.  Pourquoi disons-nous que la solution est ¬´facile¬ª?  Tout tourne autour de l'architecture.  C'est toujours un fardeau pour tout client d'acheter une solution co√ªteuse, et en plus, une flotte d'√©quipements sous la forme de divers serveurs, bureaux d'enregistrement et autres.  Et puis pour tout mettre en place, pour se jumeler et accompagner.  Si le client se voit proposer un bo√Ætier sous la forme d'un micro-ordinateur de la taille d'un t√©l√©phone mobile, toute personne au moins un peu familiaris√©e avec la technique peut l'installer sur son r√©seau local et accrocher une cam√©ra vid√©o IP.  L'analogie avec le routeur Wi-Fi √† la maison se sugg√®re - je l'ai branch√© sur une prise de courant, connect√© √† Internet, effectu√© les r√©glages les plus simples.  C‚Äôest tout.  Aucun service apr√®s-vente n'est n√©cessaire.  Tout se fait tr√®s facilement ind√©pendamment. <br><br><img src="https://habrastorage.org/webt/4e/ag/ek/4eagekwank1r6sxuxyjdfrmyz5i.png"><br><br>  Ensuite, dans le compte personnel, l'utilisateur voit l'ensemble du syst√®me et peut recevoir des donn√©es sous la forme de rapports et de journaux de statistiques et, √† l'aide de l'API, int√©grer ces donn√©es dans son syst√®me informatique d'entreprise. <br><br>  Ainsi, l'utilisateur n'a pas besoin de penser et de se soucier de l'infrastructure.  La connexion d'appareils informatiques S-Box est tr√®s simple.  Il est √©galement facile de reproduire la solution sur d'autres points: raccrochez les cam√©ras, connectez le nombre requis de S-Box et voyez imm√©diatement l'objet sur le portail dans votre compte. <br><br>  Sous le portail et le compte personnel se trouve un syst√®me complet d'analyse, de stockage de base de donn√©es, de surveillance et de notification des √©quipements, d√©ploy√© dans les nuages ‚Äã‚ÄãAzure.  Le syst√®me est flexible et toutes les ressources informatiques n√©cessaires sont automatiquement allou√©es √† l'utilisateur.  Par cons√©quent, tout le mal de t√™te sur l'√©quipement et son support est supprim√© de l'utilisateur.  Il ach√®te uniquement un service d'analyse vid√©o.  Tr√®s confortable. <br><br><h4>  Quelles cam√©ras peuvent √™tre utilis√©es pour l'analyse vid√©o du public? </h4><br>  √âtant donn√© qu'en fin de compte, vous devez obtenir le visage du spectateur dans une qualit√© acceptable, la cam√©ra doit √™tre, d'une part, avec une bonne optique et un bon zoom, et, d'autre part, contr√¥l√©e - PTZ. <br>  Nous avons test√© plus d'une douzaine de cam√©ras de diff√©rentes marques.  Nous ne nommerons pas de mod√®les de cam√©ras sp√©cifiques, mais les caract√©ristiques peuvent √™tre exprim√©es. <br><br>  Pour les salles jusqu'√† 150-200 personnes, une cam√©ra 20x avec une matrice 2MP suffit.  Pour les salles de plus de 200 personnes, il est pr√©f√©rable d'utiliser des cam√©ras 25x et plus.  Ils sont certainement plus chers, mais c'est la bonne fa√ßon.  Bien s√ªr, vous pouvez √©galement jouer avec la taille de la matrice, mais vous devez comprendre que dans le spectre IR, la matrice fera du bruit et le zoom optique sera toujours pr√©f√©rable au num√©rique. <br><br><h4>  Pr√©cision de reconnaissance </h4><br>  Plus nous nous positionnerons sur le visage, plus ce sera clair.  Tout semble clair et l'enfant comprend.  Mais si tout va bien avec la reconnaissance du sexe, la pr√©cision de la d√©termination de l'√¢ge peut facilement √™tre de ¬± 5 ans, voire plus, quelle que soit la proximit√© de la cam√©ra.  Et le point ici n'est pas dans la qualit√© des algorithmes et des r√©seaux de neurones, mais dans le fait que chaque adulte essaie de regarder autant qu'il a investi dans son apparence. <br><br>  Par cons√©quent, l'appareil photo donnera l'√¢ge auquel une personne regarde ou essaie de regarder.  C'est-√†-dire  √¢ge biologique et √¢ge selon la photo - cela peut √™tre deux grandes diff√©rences.  Apr√®s tout, chacun de nous peut se souvenir des cas o√π il s'est tromp√© dans la classification par √¢ge de l'interlocuteur.  Dans le m√™me temps, le cerveau humain est un r√©seau neuronal tr√®s puissant et bien form√©. <br><br><h4>  Azure et ses services </h4><br>  Au c≈ìur de tout cela se trouve le service cognitif Microsoft Face API.  Il s'agit d'un service tr√®s pratique et l'API est accessible √† partir de presque tous les environnements de d√©veloppement courants.  Nous utilisons la plupart de nos services en utilisant Python - c'est du c√¥t√© cloud. <br><br>  <b>La s√©quence g√©n√©rale ressemble √† ceci:</b> <br><br>  1) La S-Box transf√®re les images vers le cloud <br><br>  2) Le service cloud les accumule, les trie et les nourrit dans Face Detection Cognitive Services.  Pour t√©l√©charger des images collect√©es dans le cloud, utilisez Python: <br><br><pre><code class="python">def upload_file(file_path, upload_file_type):
    """ Uploading file """
    ...
    if authData == '' or authData == 'undefined':
        ...
        try:
            r = requests.post(param_web_service_url_auth, headers={'authentication': base64string})
            if r.status_code == 200:
                authData = json.loads(r.text)['token']
                result = upload_file(file_path, upload_file_type)
                return result
            logging.error("Upload_file(%s) - UNEXPECTED AUTH RESULT CODE %d", file_path, r.status_code)
        except Exception as e:
            logging.error('Upload_file(%s) error', file_path)
            logging.exception('Upload exception ' + str(e))
        return False
    try:
        base_name = os.path.basename(file_path)
        txt_part, file_extension = os.path.splitext(base_name)
        files = {'file': open(file_path, 'rb')}
        ...
        if upload_file_type == 1:  # for upload full view
            ...
            payload = {'camid': cam_id, 'dt': dt, 'mac': mac}
            z = requests.post(uploaddatalinkhall, headers={'authentication': authData}, files=files, data=payload)
            if z.status_code == 200:
                return True
            logging.debug('post result -&gt; %d', int(repr(z.status_code)))
        if upload_file_type == 0:
            ...
            payload = {'camid': cam_id, 'dt': dt, 'json_str': json_str, 'mac': mac}
            ...
            z = requests.post(param_web_service_url, headers={'authentication': authData}, files=files, data=payload)
            myfile.close()
            if z.status_code == 200:
                ...
                if len(debug_path) &gt; 0:
                    # move
                    fnn = debug_path + os.sep + json_file
                    shutil.move(upload_folder + os.sep + json_file, fnn)
                else:
                    # delete
                    os.remove(upload_folder + os.sep + json_file)
                return True
            result = "UNEXPECTED STATUS CODE " + repr(z.status_code)
            logging.error('upload_file(%s) - ERROR. Res=%s, text: %s',
                          json_file, result, z.text)
        ...
    except Exception, e:
        ...
        logging.exception('Upload exception: ' + str(e))
    return False</code></pre><br>
3)   Python<br>
<br>
 CF.face.detect    ,    ,  MS Face detection Cognitive Service API,   :<br>
<br>
<pre><code class="python">def faceapi_face_detect(url):
    ‚Ä¶
    # API call
    image_url = url
    need_face_id = False
    need_landmarks = False
    attributes = 'age,gender,smile,facialHair,headPose,glasses,emotion,hair,makeup,accessory,occlusion,blur,exposure,noise'
    watcher = elapser_mod.Elapser()
    try:
        api_res = CF.face.detect(image_url, need_face_id, need_landmarks, attributes)
        # callback(url, need_face_id, need_landmarks, attributes, e.elapsed(), api_res)
        text = 'CF.face.detect image_url {}, need_face_id {}, need_landmarks {}, attributes {}, completed in {} s.'. \
            format(image_url, need_face_id, need_landmarks, attributes, watcher.elapsed())
        printlog(text)
        text2 = 'Detected {} faces.'.format(len(api_res))
        printlog(text2)
        text3 = '{}'.format(api_res)
        printlog(text3)
    except CF.CognitiveFaceException as exp:
        text = '[Error] CF.face.detect image_url {}, need_face_id {}, need_landmarks {}, attributes {}, failed in {} s.'. \
            format(image_url, need_face_id, need_landmarks, attributes, watcher.elapsed())
        printlog(text)
        text2 = 'Code: {}, Message: {}'.format(exp.code, exp.msg)
        printlog(text2)
        message = exp.msg
    ‚Ä¶
    return api_res, message</code></pre><br>
   .   ()      .        .      ,   .        .  ‚Äì    .<br>
<br>
      ? !    .       API.  ‚Äì   ,   ,    . ,      ()        ..,  ¬´¬ª .     .      .<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>.<br>
<br>
<h2> </h2><br>
<img src="https://habrastorage.org/webt/f5/pd/9e/f5pd9ee3cgdreresbvq3nrwcqmk.jpeg" align="left" width="120"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ‚Äî     CVizi. : 'aosipov @ cvizi.com'.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FB </a>           .</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413015/">https://habr.com/ru/post/fr413015/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413005/index.html">Blockchain - un rem√®de contre les principales maladies de l'√©ducation moderne</a></li>
<li><a href="../fr413007/index.html">√âtrange synth√®se en travaillant avec FPGA</a></li>
<li><a href="../fr413009/index.html">Gestion de l'environnement Python avec Pipenv</a></li>
<li><a href="../fr413011/index.html">Sous-sol de la mort</a></li>
<li><a href="../fr413013/index.html">Le d√©sir de transparence</a></li>
<li><a href="../fr413017/index.html">Une petite note sur les certificats g√©n√©riques Let's Encrypt</a></li>
<li><a href="../fr413019/index.html">La vie un an apr√®s l'introduction des robots: alors que l'√©galit√© n'est pas demand√©e</a></li>
<li><a href="../fr413021/index.html">Dispositif de vision nocturne bas√© sur le module d'imagerie thermique Flir Lepton 3</a></li>
<li><a href="../fr413023/index.html">¬´Well Forgotten Old¬ª: les v√©los √©lectriques - des premiers mod√®les aux possibilit√©s d'aujourd'hui</a></li>
<li><a href="../fr413025/index.html">Sur les √©pines et les √©toiles sur la voie de l'optimisation des processus de d√©veloppement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>