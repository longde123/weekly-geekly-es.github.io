<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüíª üñçÔ∏è üíáüèª AccelStor AFA-Konfigurationsrichtlinien f√ºr VMware vSphere üî∫ ü§ûüèª üßùüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel m√∂chte ich auf die Funktionen aller Flash AccelStor-Arrays eingehen, die mit einer der beliebtesten Virtualisierungsplattformen - VM...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AccelStor AFA-Konfigurationsrichtlinien f√ºr VMware vSphere</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/accelstor/blog/447390/"><p>  In diesem Artikel m√∂chte ich auf die Funktionen aller Flash AccelStor-Arrays eingehen, die mit einer der beliebtesten Virtualisierungsplattformen - VMware vSphere - zusammenarbeiten.  Konzentrieren Sie sich insbesondere auf die Parameter, die dazu beitragen, den maximalen Effekt durch die Verwendung eines so leistungsstarken Tools wie All Flash zu erzielen. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/di/xc/nq/dixcnqzpdskxe4whal3u7wyxcnw.jpeg"></div><a name="habracut"></a><br><p>  Alle Flash AccelStor NeoSapphire ‚Ñ¢ -Arrays sind Ger√§te mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einem</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zwei</a> Knoten, die auf SSDs basieren und einen grundlegend anderen Ansatz zur Implementierung des Konzepts der Datenspeicherung und zur Organisation des Zugriffs auf diese mithilfe der eigenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FlexiRemap¬Æ-</a> Technologie anstelle der sehr beliebten RAID-Algorithmen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verfolgen</a> .  Arrays bieten Blockzugriff f√ºr Hosts √ºber Fibre Channel- oder iSCSI-Schnittstellen.  Fairerweise stellen wir fest, dass Modelle mit der ISCSI-Schnittstelle als netten Bonus auch Dateizugriff haben.  In diesem Artikel konzentrieren wir uns jedoch auf die Verwendung von Blockprotokollen als die produktivste f√ºr All Flash. </p><br><p>  Der gesamte Prozess der Bereitstellung und anschlie√üenden Einrichtung der Zusammenarbeit zwischen dem AccelStor-Array und dem VMware vSphere-Virtualisierungssystem kann in mehrere Phasen unterteilt werden: </p><br><p></p><ul><li>  Implementierung der Verbindungstopologie und Konfiguration des SAN-Netzwerks; </li><li>  Alle Flash-Arrays einrichten; </li><li>  Konfigurieren Sie ESXi-Hosts. </li><li>  Konfigurieren Sie virtuelle Maschinen. </li></ul><br><p>  Als Beispiel wurden AccelStor NeoSapphire ‚Ñ¢ -Arrays mit Fibre Channel und iSCSI verwendet.  Die Basissoftware ist VMware vSphere 6.7U1. </p><br><p>  Vor der Bereitstellung der in diesem Artikel beschriebenen Systeme wird dringend empfohlen, sich mit der Dokumentation von VMware zu Leistungsproblemen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Best Practices f√ºr die Leistung von VMware vSphere 6.7</a> ) und iSCSI-Einstellungen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Best Practices zum Ausf√ºhren von VMware vSphere On iSCSI</a> ) vertraut zu machen. </p><br><h3>  <i><b>Verbindungstopologie und SAN-Konfiguration</b></i> </h3><br><p>  Die Hauptkomponenten eines SAN-Netzwerks sind HBAs auf ESXi-Hosts, SAN-Switches und Array-Knoten.  Eine typische Topologie eines solchen Netzwerks w√ºrde folgenderma√üen aussehen: </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ci/wt/lg/ciwtlgk31rhm06xplvzbbwkxu0y.png"></div><br><p>  Der Begriff Switch bezieht sich hier entweder auf einen einzelnen physischen Switch oder einen Satz von Switches (Fabric) oder auf ein Ger√§t, das von verschiedenen Diensten gemeinsam genutzt wird (VSAN im Fall von Fibre Channel und VLAN im Fall von iSCSI).  Die Verwendung von zwei unabh√§ngigen Schaltern / Fabric eliminiert einen m√∂glichen Fehlerpunkt. </p><br><p>  Die direkte Verbindung von Hosts mit dem Array wird zwar unterst√ºtzt, jedoch dringend empfohlen.  Die Leistung aller Flash-Arrays ist recht hoch.  Und f√ºr maximale Geschwindigkeit m√ºssen Sie alle Ports des Arrays verwenden.  Daher ist mindestens ein Wechsel zwischen Hosts und NeoSapphire ‚Ñ¢ erforderlich. </p><br><p>  Das Vorhandensein von zwei Ports auf dem HBA-Host ist auch eine Voraussetzung f√ºr maximale Leistung und Fehlertoleranz. </p><br><p>  Wenn Sie die Fibre Channel-Schnittstelle verwenden, m√ºssen Sie das Zoning konfigurieren, um m√∂gliche Konflikte zwischen Initiatoren und Zielen zu vermeiden.  Zonen basieren auf dem Prinzip ‚Äûein Initiator-Port - ein oder mehrere Array-Ports‚Äú. </p><br><p>  Wenn Sie eine iSCSI-Verbindung verwenden, wenn Sie einen Switch verwenden, der f√ºr andere Dienste freigegeben ist, m√ºssen Sie den iSCSI-Verkehr in einem separaten VLAN isolieren.  Es wird au√üerdem dringend empfohlen, die Jumbo Frames-Unterst√ºtzung (MTU = 9000) zu aktivieren, um die Gr√∂√üe der Pakete im Netzwerk zu erh√∂hen und dadurch den Overhead w√§hrend der √úbertragung zu verringern.  Es ist jedoch zu beachten, dass f√ºr einen korrekten Betrieb der MTU-Parameter f√ºr alle Netzwerkkomponenten entlang der Initiator-Switch-Zielkette ge√§ndert werden muss. </p><br><h3>  <i><b>Einrichten aller Flash-Arrays</b></i> </h3><br><p>  Das Array wird an Kunden mit bereits gebildeten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FlexiRemap¬Æ-</a> Gruppen geliefert.  Daher ist keine Aktion erforderlich, um die Laufwerke in eine einzelne Struktur zu integrieren.  Es reicht aus, Volumina der erforderlichen Gr√∂√üe und in der erforderlichen Menge zu erstellen. </p><br><p></p><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/zn/x9/nc/znx9ncuyd2rgm8-jfvwf620zaqg.png"></div><br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/wx/8l/ua/wx8lualewtdkixfwg0petpxbsre.png"></div><p></p><br><p>  Der Einfachheit halber gibt es eine Funktion zum Stapelerstellen mehrerer Volumes eines bestimmten Volumes gleichzeitig.  Standardm√§√üig werden ‚Äûd√ºnne‚Äú Volumes erstellt, da dies eine rationellere Nutzung des verf√ºgbaren Speicherplatzes erm√∂glicht (auch dank der Unterst√ºtzung von Space Reclamation).  In Bezug auf die Leistung √ºberschreitet der Unterschied zwischen d√ºnnen und dicken Volumina 1% nicht.  Wenn Sie jedoch alle S√§fte aus dem Array herausdr√ºcken m√∂chten, k√∂nnen Sie jedes ‚Äûd√ºnne‚Äú Volumen jederzeit in ‚Äûdickes‚Äú Volumen umwandeln.  Es sollte jedoch beachtet werden, dass eine solche Operation irreversibel ist. </p><br><p>  Anschlie√üend m√ºssen die erstellten Volumes ver√∂ffentlicht und von den Hosts mithilfe der ACL (IP-Adressen f√ºr iSCSI und WWPN f√ºr FC) und der physischen Trennung der Ports auf dem Array Zugriffsrechte f√ºr diese festgelegt werden.  Bei iSCSI-Modellen erfolgt dies durch die Erstellung von Target. </p><br><p></p><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/mw/8y/cg/mw8ycgqngghoyuelortgysofswi.png"></div><br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/py/xe/28/pyxe28gnrsxh_cx4ltjleogwsmw.png"></div><p></p><br><p>  Bei FC-Modellen erfolgt die Ver√∂ffentlichung durch Erstellen einer LUN f√ºr jeden Port im Array. </p><br><p></p><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/qh/u3/bx/qhu3bxhm-kqinygguz298izbw7e.png"></div><br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/oh/al/ey/ohaleyllpb-0bmot9kawc4-ssyg.png"></div><p></p><br><p>  Um den Konfigurationsprozess zu beschleunigen, k√∂nnen Hosts gruppiert werden.  Wenn der Host den FC-HBA mit mehreren Ports verwendet (was in der Praxis am h√§ufigsten vorkommt), ermittelt das System au√üerdem automatisch, dass die Ports eines solchen HBA aufgrund von WWPN, die sich um eins unterscheiden, zum selben Host geh√∂ren.  Au√üerdem wird die Stapelerstellung von Ziel / LUN f√ºr beide Schnittstellen unterst√ºtzt. </p><br><p>  Ein wichtiger Punkt bei der Verwendung der iSCSI-Schnittstelle ist das gleichzeitige Erstellen mehrerer Ziele f√ºr Volumes, um die Leistung zu steigern, da die Zielwarteschlange nicht ge√§ndert werden kann und es sich tats√§chlich um einen Engpass handelt. </p><br><p></p><h3>  Konfigurieren Sie ESXi-Hosts </h3><p></p><br><p>  Auf der ESXi-Seite erfolgt die Grundkonfiguration gem√§√ü dem durchaus erwarteten Szenario.  Vorgehensweise f√ºr die iSCSI-Verbindung: </p><br><p></p><ol><li>  Software-iSCSI-Adapter hinzuf√ºgen (nicht erforderlich, wenn er bereits hinzugef√ºgt wurde oder wenn der Hardware-iSCSI-Adapter verwendet wird); </li><li>  Erstellen von vSwitch, √ºber das der iSCSI-Verkehr geleitet wird, und Hinzuf√ºgen von physischem Uplink und VMkernal. </li><li>  Hinzuf√ºgen von Array-Adressen zu Dynamic Discovery; </li><li>  Datenspeicher erstellen </li></ol><br><p>  <b>Einige wichtige Hinweise:</b> </p><br><blockquote><ul><li>  Im allgemeinen Fall k√∂nnen Sie nat√ºrlich den vorhandenen vSwitch verwenden, aber im Fall eines separaten vSwitch ist die Verwaltung der Hosteinstellungen viel einfacher. </li><li>  Es ist erforderlich, Verwaltungsdatenverkehr und iSCSI in separate physische Verbindungen und / oder VLANs zu trennen, um Leistungsprobleme zu vermeiden. </li><li>  Die IP-Adressen von VMkernal und die entsprechenden Ports des All Flash-Arrays m√ºssen sich aufgrund von Leistungsproblemen im selben Subnetz befinden. </li><li>  Um die VMware-Fehlertoleranz sicherzustellen, muss vSwitch √ºber mindestens zwei physische Uplinks verf√ºgen </li><li>  Wenn Sie Jumbo-Frames verwenden, m√ºssen Sie die MTU von vSwitch und VMkernal √§ndern </li><li>  Es ist nicht verkehrt, sich daran zu erinnern, dass gem√§√ü den VMware-Empfehlungen f√ºr physische Adapter, die f√ºr die Arbeit mit iSCSI-Verkehr verwendet werden, Teaming und Failover konfiguriert werden m√ºssen.  Insbesondere sollte jeder VMkernal nur √ºber einen Uplink arbeiten, der zweite Uplink muss in den nicht verwendeten Modus geschaltet werden.  Aus Gr√ºnden der Fehlertoleranz m√ºssen Sie zwei VMkernal hinzuf√ºgen, von denen jeder √ºber seinen Uplink funktioniert. </li></ul><br></blockquote><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/_h/jb/va/_hjbvatnuhjwts4duy2epgb7bbi.png"></div><p></p><br><table><tbody><tr><th>  VMkernel-Adapter (vmk #) </th><th>  Physischer Netzwerkadapter (vmnic #) </th></tr><tr><td>  vmk1 (Storage01) </td><td>  Aktive Adapter <br>  vmnic2 <br>  Nicht verwendete Adapter <br>  vmnic3 <br></td></tr><tr><td>  vmk2 (Storage02) </td><td>  Aktive Adapter <br>  vmnic3 <br>  Nicht verwendete Adapter <br>  vmnic2 <br></td></tr></tbody></table><br><p>  Keine Fibre Channel-Verbindung erforderlich.  Sie k√∂nnen sofort einen Datenspeicher erstellen. </p><br><p>  Nach dem Erstellen des Datenspeichers m√ºssen Sie sicherstellen, dass die Round Robin-Richtlinie f√ºr die Pfade zu Target / LUN als die produktivste verwendet wird. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/zr/t1/zhzrt15baoc1qlp0w6ds-mys3hu.png"></div><p></p><br><p>  Standardm√§√üig sehen die VMware-Einstellungen die Verwendung dieser Richtlinie gem√§√ü dem Schema vor: 1000 Anforderungen √ºber den ersten Pfad, die n√§chsten 1000 Anforderungen √ºber den zweiten Pfad usw.  Diese Host-Interaktion mit einem Dual-Controller-Array ist unausgeglichen.  Daher empfehlen wir, den Parameter Round Robin-Richtlinie = 1 √ºber Esxcli / PowerCLI festzulegen. </p><br><div class="spoiler">  <b class="spoiler_title">Parameter</b> <div class="spoiler_text"><p>  F√ºr Esxcli: </p><br><ul><li>  Verf√ºgbare LUNs drucken </li></ul><br><p>  <b>esxcli storage nmp ger√§teliste</b> </p><br><ul><li>  Ger√§tenamen kopieren </li><li>  Round Robin-Richtlinie √§ndern </li></ul><br><p>  <b>esxcli storage nmp psp roundrobin deviceconfig set --type = iops --iops = 1 --device = "Device_ID"</b> </p></div></div><br><p>  Die meisten modernen Anwendungen sind f√ºr den Austausch gro√üer Datenpakete ausgelegt, um die Bandbreitennutzung zu maximieren und die CPU-Last zu reduzieren.  Daher √ºbertr√§gt ESXi standardm√§√üig E / A-Anforderungen in Stapeln von bis zu 32767 KB an das Speicherger√§t.  In einer Reihe von Szenarien ist der Austausch kleinerer Portionen jedoch produktiver.  F√ºr AccelStor-Arrays sind dies die folgenden Szenarien: </p><br><ul><li>  Die virtuelle Maschine verwendet UEFI anstelle des Legacy-BIOS </li><li>  Wird von vSphere Replication verwendet </li></ul><br><p>  F√ºr solche Szenarien wird empfohlen, den Parameterwert Disk.DiskMaxIOSize in 4096 zu √§ndern. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/1g/et/3g/1get3g8odkem1onrpkwjdilbnsi.png"></div><p></p><br><p>  F√ºr iSCSI-Verbindungen wird empfohlen, den Parameter Login Timeout auf 30 (Standard 5) zu √§ndern, um die Stabilit√§t der Verbindung zu erh√∂hen und die Verz√∂gerung der Best√§tigung weitergeleiteter DelayedAck-Pakete zu deaktivieren.  Beide Optionen befinden sich in vSphere Client: Host ‚Üí Konfigurieren ‚Üí Speicher ‚Üí Speicheradapter ‚Üí Erweiterte Optionen f√ºr den iSCSI-Adapter </p><br><p></p><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/1y/5_/c8/1y5_c80zsijgqtngo-9vt2zbbo8.png"></div><br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/bh/yi/tv/bhyitvuujofnioaunwhzypx3fe0.png"></div><p></p><br><p>  Ein ziemlich subtiler Punkt ist die Anzahl der f√ºr den Datenspeicher verwendeten Volumes.  Es ist klar, dass zur Vereinfachung der Verwaltung der Wunsch besteht, ein gro√ües Volume f√ºr das gesamte Volume des Arrays zu erstellen.  Das Vorhandensein mehrerer Volumes und dementsprechend des Datenspeichers wirkt sich jedoch positiv auf die Gesamtleistung aus (mehr zu Warteschlangen etwas sp√§ter im Text).  Wir empfehlen daher, mindestens zwei Volumes zu erstellen. </p><br><p>  In j√ºngerer Zeit hat VMware empfohlen, die Anzahl der virtuellen Maschinen in einem einzelnen Datenspeicher zu begrenzen, um die bestm√∂gliche Leistung zu erzielen.  Vor allem mit der Verbreitung von VDI ist dieses Problem jedoch nicht mehr so ‚Äã‚Äãakut.  Dies hebt jedoch nicht die langj√§hrige Regel auf, virtuelle Maschinen, die intensive E / A erfordern, √ºber verschiedene Datenspeicher zu verteilen.  Es gibt nichts Besseres, um die optimale Anzahl virtueller Maschinen pro Volume zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ermitteln, als das All Flash-Array von AccelStor</a> innerhalb seiner Infrastruktur zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">testen</a> . </p><br><h3>  <i><b>Konfigurieren Sie virtuelle Maschinen</b></i> </h3><br><p>  Es gibt keine besonderen Anforderungen beim Einrichten von virtuellen Maschinen, oder vielmehr sind sie ganz normal: </p><br><ul><li>  Verwendung der h√∂chstm√∂glichen VM-Version (Kompatibilit√§t) </li><li>  Es ist genauer, die RAM-Gr√∂√üe festzulegen, wenn die virtuellen Maschinen dicht platziert sind, z. B. in VDI (da beim Start standardm√§√üig eine Auslagerungsdatei erstellt wird, die mit der RAM-Gr√∂√üe vergleichbar ist, die n√ºtzliche Kapazit√§t verbraucht und sich auf die endg√ºltige Leistung auswirkt). </li><li>  Verwenden Sie die effizientesten E / A-Versionen von Adaptern: Netzwerktyp VMXNET 3 und SCSI-Typ PVSCSI </li><li>  Verwenden Sie den Laufwerkstyp Thick Provision Eager Zeroed f√ºr maximale Leistung und Thin Provisioning f√ºr maximale Speichernutzung </li><li>  Wenn m√∂glich, beschr√§nken Sie die Arbeit nicht kritischer E / A-Maschinen mithilfe von Virtual Disk Limit </li><li>  Stellen Sie sicher, dass Sie VMware Tools installieren </li></ul><br><h3>  <i><b>Warteschlangennotizen</b></i> </h3><br><p>  Eine Warteschlange (oder ausstehende E / A) ist die Anzahl der E / A-Anforderungen (SCSI-Befehle), die zu einem bestimmten Zeitpunkt von einem bestimmten Ger√§t / einer bestimmten Anwendung auf die Verarbeitung warten.  Im Falle eines Warteschlangen√ºberlaufs werden QFULL-Fehler generiert, was letztendlich zu einer Erh√∂hung des Latenzparameters f√ºhrt.  Bei Verwendung von Plattenspeichersystemen (Spindelspeichersystemen) ist theoretisch die Leistung umso h√∂her, je h√∂her die Warteschlange ist.  Sie sollten es jedoch nicht missbrauchen, da es leicht ist, auf QFULL zu sto√üen.  Bei All Flash-Systemen ist zum einen alles etwas einfacher: Das Array weist Verz√∂gerungen auf, die um mehrere Gr√∂√üenordnungen niedriger sind, und daher ist es meistens nicht erforderlich, die Gr√∂√üe der Warteschlangen separat anzupassen.  Wenn Sie jedoch in einigen Anwendungsf√§llen (starke Abweichungen bei den Anforderungen f√ºr E / A f√ºr bestimmte virtuelle Maschinen, Tests f√ºr maximale Leistung usw.) die Warteschlangenparameter nicht √§ndern, m√ºssen Sie zumindest verstehen, welche Indikatoren erreicht werden k√∂nnen, und am wichtigsten, auf welche Weise. </p><br><p>  Das All Flash Array von AccelStor selbst hat keine Beschr√§nkungen f√ºr Volumes oder E / A-Ports.  Bei Bedarf kann sogar ein einzelnes Volume alle Ressourcen des Arrays abrufen.  Die einzige Warteschlangenbeschr√§nkung besteht bei iSCSI-Zielen.  Aus diesem Grund wurde oben die Notwendigkeit angegeben, mehrere (idealerweise bis zu 8 St√ºck) Ziele f√ºr jedes Volumen zu erstellen, um diese Grenze zu √ºberwinden.  Au√üerdem sind AccelStor-Arrays hochproduktive L√∂sungen.  Daher sollten Sie alle Schnittstellenanschl√ºsse des Systems verwenden, um die maximale Geschwindigkeit zu erreichen. </p><br><p>  Auf der ESXi-Hostseite ist die Situation v√∂llig anders.  Der Host selbst wendet die Praxis des gleichen Zugangs zu Ressourcen f√ºr alle Teilnehmer an.  Daher gibt es separate E / A-Warteschlangen f√ºr das Gastbetriebssystem und den HBA.  Warteschlangen zum Gastbetriebssystem werden von Warteschlangen zum virtuellen SCSI-Adapter und zur virtuellen Festplatte kombiniert: </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/gu/sk/pvguskcy3y4yo7whrx8jiuggtdm.png"></div><br><p>  Die Warteschlange f√ºr HBA h√§ngt vom jeweiligen Typ / Anbieter ab: </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/tn/hs/6h/tnhs6h0wpivfrb5xfv2qms4tzjy.png"></div><br><p>  Die endg√ºltige Leistung der virtuellen Maschine wird durch die niedrigste Warteschlangentiefengrenze unter den Hostkomponenten bestimmt. </p><br><p>  Dank dieser Werte k√∂nnen Sie die Leistungsindikatoren bewerten, die wir in der einen oder anderen Konfiguration erhalten k√∂nnen.  Zum Beispiel m√∂chten wir die theoretische Leistung einer virtuellen Maschine (ohne Bindung an einen Block) mit einer Latenz von 0,5 ms kennen.  Dann ist IOPS = (1.000 / Latenz) * Ausstehende E / A (Warteschlangentiefenlimit) </p><br><div class="spoiler">  <b class="spoiler_title">Beispiele</b> <div class="spoiler_text"><p>  <b>Beispiel 1</b> </p><br><ul><li>  FC Emulex HBA Adapter </li><li>  Eine VM im Datenspeicher </li><li>  VMware Paravirtual SCSI Adapter </li></ul><br><p>  Hier wird das Warteschlangentiefenlimit vom Emulex HBA festgelegt.  Daher ist IOPS = (1000 / 0,5) * 32 = 64 K. </p><br><p>  <b>Beispiel 2</b> </p><br><ul><li>  VMware iSCSI-Softwareadapter </li><li>  Eine VM im Datenspeicher </li><li>  VMware Paravirtual SCSI Adapter </li></ul><br><p>  Hier wird das Limit f√ºr die Warteschlangentiefe bereits vom paravirtuellen SCSI-Adapter definiert.  Daher ist IOPS = (1000 / 0,5) * 64 = 128 K. </p></div></div><br><p>  Die besten All AccelStor All Flash-Arrays (wie das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">P710</a> ) bieten eine IKPS-Leistung von 700K f√ºr die Aufnahme in 4K-Bl√∂cken.  Bei einer solchen Blockgr√∂√üe ist es offensichtlich, dass eine einzelne virtuelle Maschine ein solches Array nicht laden kann.  Dazu ben√∂tigen Sie 11 (zum Beispiel 1) oder 6 (zum Beispiel 2) virtuelle Maschinen. </p><br><p>  Mit der korrekten Konfiguration aller beschriebenen Komponenten des virtuellen Rechenzentrums k√∂nnen Sie daher beeindruckende Ergebnisse in Bezug auf die Leistung erzielen. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/uj/xy/cs/ujxycs-_fo-zworv8wds9kgp1j4.jpeg"></div><br><p>  <i>4K zuf√§llig, 70% lesen / 30% schreiben</i> </p><br><p>  Tats√§chlich ist die reale Welt mit einer einfachen Formel viel schwieriger zu beschreiben.  Ein einzelner Host verf√ºgt immer √ºber viele virtuelle Maschinen mit unterschiedlichen Konfigurationen und E / A-Anforderungen.  Ja, und der Host-Prozessor ist mit der Eingabe- / Ausgabeverarbeitung besch√§ftigt, deren Leistung nicht unendlich ist.  Um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das</a> volle Potenzial des gleichen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Modells auszusch√∂pfen, ben√∂tigt das P710</a> in Wirklichkeit drei Hosts.  Au√üerdem nehmen Anwendungen, die in virtuellen Maschinen ausgef√ºhrt werden, Anpassungen vor.  F√ºr eine genaue Dimensionierung empfehlen wir daher die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verwendung eines Tests bei Testmodellen</a> aller Flash <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AccelStor-</a> Arrays innerhalb der Kundeninfrastruktur f√ºr aktuelle Aufgaben im realen Leben. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de447390/">https://habr.com/ru/post/de447390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de447376/index.html">SNA Hackathon 2019</a></li>
<li><a href="../de447380/index.html">Kotlin-Ausnahmen und ihre Merkmale</a></li>
<li><a href="../de447382/index.html">Das Buch "Einheit und C #. Gamedev von der Idee bis zur Umsetzung. 2nd ed</a></li>
<li><a href="../de447384/index.html">Leistungshalbleiter auf der Hut vor der √ñkologie</a></li>
<li><a href="../de447388/index.html">TL; DR-Digest der ITMO University: nicht-klassische Zulassung zur Universit√§t, bevorstehende Veranstaltungen und die interessantesten Materialien</a></li>
<li><a href="../de447392/index.html">Drei Probleme von Diensten zur √úberpr√ºfung der englischen Grammatik und ob sie gel√∂st werden k√∂nnen</a></li>
<li><a href="../de447394/index.html">Interview mit Vladimir Likhachev, Vater von Nikolai Likhachev, besser bekannt als Chris Kaspersky</a></li>
<li><a href="../de447396/index.html">Sind Ihre Unternehmensdaten in der KI-√Ñra wertvoll?</a></li>
<li><a href="../de447398/index.html">Roboter-Prozessautomatisierung - Ein neuer Blick auf alte Technologien</a></li>
<li><a href="../de447402/index.html">Splunk Universal Forwarder im Docker als Systemlogger</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>