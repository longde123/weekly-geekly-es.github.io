<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õµÔ∏è üçü üåç IVR en Webhook üßõüèæ ü¶ã üôãüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un chatbot en l√≠nea es una tendencia reciente en el mercado. Pero, ¬øc√≥mo interactuar con los clientes que est√°n fuera de l√≠nea? Un porcentaje signific...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IVR en Webhook</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zadarma/blog/474178/"><img src="https://habrastorage.org/webt/6i/wc/yt/6iwcytdcaivt0kpvrob20iahmsm.png"><br><br>  Un chatbot en l√≠nea es una tendencia reciente en el mercado.  Pero, ¬øc√≥mo interactuar con los clientes que est√°n fuera de l√≠nea?  Un porcentaje significativo de personas prefiere interactuar por tel√©fono.  Y el negocio necesita una gran cantidad de operadores o una soluci√≥n de automatizaci√≥n de comunicaci√≥n de voz.  Ofrecemos una soluci√≥n para reducir la carga de trabajo y los costos (y apenas afectar√° la actividad de sus desarrolladores). <br><a name="habracut"></a><br>  ¬øC√≥mo programar r√°pida y f√°cilmente cualquier men√∫ de voz, autoinformador, robot-secretario con una base de datos de clientes adjunta? <br><br>  Alerta de spoiler: todo se hace mediante la implementaci√≥n de webhooks y estamos usando un ejemplo de PHP. <br><br>  <b>Que y por que</b> <br><br>  Por ejemplo, tiene un servicio de entrega o una tienda en l√≠nea con su propia log√≠stica.  Algunos clientes llaman para ver qu√© hay con sus paquetes y eso se puede automatizar f√°cilmente.  Lo mismo ocurre con la geolocalizaci√≥n de la cabina, alguna recopilaci√≥n de datos o cualquier informaci√≥n individual que se pueda informar al cliente sin desperdiciar energ√≠a humana. <br><br>  Se puede automatizar f√°cilmente, proporcionaremos un ejemplo a continuaci√≥n.  Ah, y se puede hacer completamente gratis. <br><br>  <b>¬øPor qu√© no tu propio asterisco?</b> <br><br>  Por supuesto, todo se puede hacer con Asterisk, pero aparte del desarrollador, tambi√©n necesitar√° un administrador, que tambi√©n est√© familiarizado con la seguridad de la comunicaci√≥n de voz (ya que con frecuencia son pirateados). <br>  As√≠ que discutiremos la forma m√°s sencilla de resolver la tarea: con webhooks. <br><br>  <b>Lista de m√©todos</b> <br><br>  Solo necesitar√° dos m√©todos nuevos para el trabajo, pero cada uno de ellos le ofrece muchas posibilidades y, lo m√°s importante, ciclos ilimitados.  Con la ayuda de estos ciclos, puede obtener un men√∫ de voz multinivel y un informante para cualquier tema. <br><br>  <b>M√©todos principales:</b> <br><br><ul><li>  NOTIFY_START: el comienzo de una llamada entrante en PBX </li><li>  NOTIFY_IVR: respuesta de las personas que llaman a una acci√≥n determinada </li></ul><br>  La descripci√≥n detallada del m√©todo est√° disponible para copiar y pegar en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descripci√≥n de la API</a> . <br><br>  Para las solicitudes NOTIFY_START y NOTIFY_IVR, puede cambiar los escenarios durante la llamada respondiendo con una de las opciones: <br><br><img src="https://habrastorage.org/webt/o-/qb/2j/o-qb2j_sbansavtyv9ozmcepotw.png"><br><img src="https://habrastorage.org/webt/km/jz/g9/kmjzg91272jweekf2s1mwv6g-re.png"><br><img src="https://habrastorage.org/webt/er/u4/kf/eru4kf3bhtepzadbkqjgwsk8oic.png"><br><img src="https://habrastorage.org/webt/_y/fg/7a/_yfg7akgztm3m-9nxqcqpowpcvo.png"><br><img src="https://habrastorage.org/webt/da/xh/d-/daxhd-p3c1f2ewcljo4xg-o85qu.png"><br><img src="https://habrastorage.org/webt/nj/rd/o3/njrdo3kqwruuctzcogbjdrw3vh0.png"><br><br>  Entonces, un cliente llama y escucha el saludo, luego marca un n√∫mero determinado (por ejemplo, un c√≥digo de seguimiento), enviamos una notificaci√≥n con los d√≠gitos ingresados, el script verifica con la base de datos y nos env√≠a la respuesta.  La respuesta puede contener una identificaci√≥n de archivo de voz o una respuesta de voz est√°ndar. <br><br>  Tenemos un sistema de reproducci√≥n de n√∫meros est√°ndar, por lo que no tiene que registrar una respuesta con anticipaci√≥n;  es decir, la notificaci√≥n apropiada se elige de la base de datos y un robot la reproduce como un n√∫mero.  O puede crear hasta un centenar de mensajes de voz predeterminados y usarlos para responder a los clientes (por ejemplo, "Su entrega est√° en el almac√©n", "Puede recibir su paquete todos los d√≠as entre las 9 a.m. y las 10 p.m.). <br><br>  <b>El m√≠nimo de implementaci√≥n</b> <br><br>  Para que el respondedor responda, necesita el m√≠nimo de un n√∫mero de tel√©fono y una PBX.  Tambi√©n debe cargar o ingresar las posibles respuestas. <br><br>  <b>Configurar</b> <br><br><img src="https://habrastorage.org/webt/nr/wc/u_/nrwcu_blznq1tjzmncdz3i4s_fy.png"><br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El PBX gratuito</a> para esta tarea se puede configurar en tres clics (elija el n√∫mero de empleados y el men√∫ de voz se puede configurar m√°s adelante) </li><li>  Los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">n√∫meros de</a> tel√©fono para PBX se pueden conectar desde 100 pa√≠ses de todo el mundo.  El n√∫mero se conecta autom√°ticamente despu√©s de completar la verificaci√≥n de ID (si es necesario para el pa√≠s que elija).  Tambi√©n puedes conectar uno de tu propio n√∫mero gratis </li><li>  Para configurar los men√∫s de voz, vaya a la p√°gina "Llamadas entrantes e IVR" y elija la opci√≥n que m√°s le convenga.  O puede cargar sus archivos o escribir un texto y el robot lo leer√° autom√°ticamente.  Hay 16 idiomas disponibles con varias voces para cada uno (14 voces en ingl√©s).  Puede guardar hasta 100 saludos en su cuenta personal. </li></ol><br><img src="https://habrastorage.org/webt/fi/om/f_/fiomf_rhb6i5kneddqae5pxj_uy.png"><br><br>  <b>Ejemplo de PHP</b> <br><br>  Para demostrar diferentes opciones, hemos creado 4 ejemplos de rendimiento IVR en PHP. <br><br><ol><li>  El sistema le dice a los √∫ltimos 3 d√≠gitos de CallerID (ejemplo de trabajo con informaci√≥n sobre n√∫meros y d√≠gitos pronunciados) </li><li>  El usuario ingresa su fecha de nacimiento en DTMF y el sistema le dice cu√°ntos d√≠as faltan para el cumplea√±os (trabajando con DTMF y pronunciando d√≠gitos) </li><li>  Men√∫ multinivel sin fin: el usuario puede ingresar d√≠gitos y acceder al men√∫ siguiente / anterior (ejemplo de c√≥mo con un ciclo simple puede crear cualquier n√∫mero de men√∫s de voz) </li><li>  Ejemplo de autorizaci√≥n para recibir el estado del saldo (√∫til para muchas situaciones de la vida) </li></ol><br>  Los primeros tres ejemplos est√°n disponibles en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> .  All√≠ tiene todos los elementos requeridos, solo necesita insertar los archivos con el relleno (que deben ser cargados o le√≠dos en PBX). <br><br>  <b>Tarea 4</b> : la persona que llama escucha el saludo y se le pide que ingrese el n√∫mero de identificaci√≥n, luego de ingresar el sistema le dice al saldo, se despide usando una frase popular de la lista y finaliza la llamada. <br><br>  Aqu√≠ hay un ejemplo de c√≥digo para la tarea descrita. <br>  <b>C√≥digo PHP</b> <br><br><pre><code class="php hljs">$request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request(); $notify = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::getEvent([AbstractNotify::EVENT_START, AbstractNotify::EVENT_IVR]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$notify) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> ($notify-&gt;event){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> AbstractNotify::EVENT_START: $request -&gt;setIvrPlay(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::INFO_FILE_ID) -&gt;setWaitDtmf(TIMEOUT , ATTEMPTS, MAXDIGITS, DTMF_NAME, DEFAULT_BEHAVIOUR); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> AbstractNotify::EVENT_IVR: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($notify-&gt;wait_dtmf-&gt;digits)) { $balance = getBalance($notify-&gt;wait_dtmf-&gt;digits); $request-&gt;setIvrSayNumber($balance, <span class="hljs-string"><span class="hljs-string">'en'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($notify-&gt;ivr_saynumber)) { $request-&gt;setIvrSayPopular(POPULAR_PHRASE_NUM, <span class="hljs-string"><span class="hljs-string">'en'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $request-&gt;setHangup(); } } $request-&gt;send();</code> </pre> <br>  Buscamos expandir a√∫n m√°s las caracter√≠sticas de nuestro m√©todo y recopilar comentarios en los comentarios a continuaci√≥n.  Tambi√©n tenemos otros m√©todos de webhook y API disponibles, puede ver la lista completa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el sitio web</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/474178/">https://habr.com/ru/post/474178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../474164/index.html">Zimbra es nuestro todo</a></li>
<li><a href="../474166/index.html">√çndices de portada para GiST</a></li>
<li><a href="../474170/index.html">Confesi√≥n de dise√±o - 15 de noviembre, Mosc√∫, DI Telegraph</a></li>
<li><a href="../474172/index.html">Una multa de 30 mil euros por el uso ilegal de cookies.</a></li>
<li><a href="../474176/index.html">11 videos del primer d√≠a de DevFest 2019 en Kaliningrado</a></li>
<li><a href="../474180/index.html">C√≥mo se implementa la arquitectura web tolerante a fallas en la plataforma Mail.ru Cloud Solutions</a></li>
<li><a href="../474184/index.html">Pasamos el desaf√≠o de Callum Macrae al 100%</a></li>
<li><a href="../474186/index.html">Refutando mitos: pr√°cticas reales de TI en Armenia</a></li>
<li><a href="../474192/index.html">¬øPor qu√© cambi√© de UX a PM y luego a Lead PM y qu√© ha cambiado?</a></li>
<li><a href="../474194/index.html">Equipo de br√∫jula</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>