<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéì üìù ‚§¥Ô∏è C ++ no servi√ßo de ortodontia: entrevista com Mikhail Matrosov, desenvolvedor CAD da Align Technology ü•ï üßìüèæ ü§¶üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mikhail Matrosov ( mmatrosov ) √© um engenheiro de desenvolvimento l√≠der no escrit√≥rio de pesquisa e desenvolvimento de Moscou da Align Technology. Sua...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C ++ no servi√ßo de ortodontia: entrevista com Mikhail Matrosov, desenvolvedor CAD da Align Technology</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/473628/"><p><img src="https://habrastorage.org/webt/np/h9/sl/nph9sl6bdoehtm2mog9vsbmejsk.png"></p><br><p>  Mikhail Matrosov ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">mmatrosov</a> ) √© um engenheiro de desenvolvimento l√≠der no escrit√≥rio de pesquisa e desenvolvimento de Moscou da Align Technology.  Sua especializa√ß√£o √© muito incomum - ele est√° desenvolvendo um sistema CAD especializado para o design de aparelhos ortod√¥nticos. </p><br><p>  Mikhail participa do C ++ Russia desde a primeira confer√™ncia.  Este ano, no C ++ Russia 2019 Piter, ele far√° uma apresenta√ß√£o sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Qualificadores, Qualificadores e Modelos"</a> .  Voc√™ tamb√©m pode conhec√™-lo nos cursos da Yandex <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Fundamentos do desenvolvimento de C ++: faixa marrom"</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Fundamentos do desenvolvimento de C ++: faixa preta"</a> na Coursera, na cria√ß√£o da qual Michael foi co-autor. </p><br><p>  A confer√™ncia j√° est√° chegando, mas por enquanto, pegue uma entrevista com Mikhail, onde discutimos seu trabalho na Align Technology, a migra√ß√£o de c√≥digo legado, a prepara√ß√£o de cursos e relat√≥rios on-line, al√©m dos recursos do C ++.  Pavel Filonov (comit√™ de programa C ++ R√∫ssia) e Oleg Chirukhin (jornalista do Grupo JUG Ru) fizeram perguntas. </p><a name="habracut"></a><br><h2>  Na jun√ß√£o de tecnologia e medicina </h2><br><p>  <b>Pavel:</b> Diga-me o que sua empresa est√° fazendo. </p><br><p>  <b>Michael: A</b> Align Technology √© pioneira e l√≠der de mercado em ortodontia limpa.  Isso √© algo que est√° sendo feito em todo o mundo agora, em vez de aparelhos.  Se antes, um fio de metal era colocado para alisar os dentes e eles corriam com ele. Agora, em vez disso, voc√™ coloca protetores bucais de pl√°stico transparentes (forros), feitos individualmente para cada paciente.  Recentemente, testei em mim os produtos da nossa empresa, um sentimento muito engra√ßado! </p><br><p>  <b>Pavel:</b> Ent√£o voc√™ tem comida de cachorro, sim, acontece? </p><br><p>  <b>Michael:</b> Sim, mais ou menos.  De fato, se voc√™ n√£o sabe, √© muito dif√≠cil perceber que a pessoa est√° nos forros.  A menos que a princ√≠pio, por h√°bito, pequenos defeitos de fala apare√ßam, mas mesmo eles s√£o dif√≠ceis de perceber. </p><br><p>  <b>Pavel:</b> E o que o C ++ tem a ver, sobre o qual falaremos muito hoje? </p><br><p>  <b>Michael:</b> √ìtima pergunta.  Quando a empresa estava na sua inf√¢ncia, dois paquistaneses alegres usaram um pl√°stico especial (n√£o sei de onde o encontraram), que deve ser n√£o-t√≥xico e inerte com saliva e outras subst√¢ncias na boca. </p><br><p>  Depois, eles fizeram um modelo da mand√≠bula do paciente, que eles sabiam fazer por muito tempo.  Por exemplo, para fazer coroas, uma pessoa era mordida por algo como uma plasticina especial.  Havia um elenco de dentes que estava cheio de material.  Ent√£o eles pegaram uma c√≥pia da mand√≠bula e puxaram pl√°stico (de alguma forma aqueceram) e o bocal est√° pronto.  Ou seja, todo esse mercado, literalmente, h√° 20 anos, era completamente anal√≥gico. </p><br><p>  Agora, o volume de produ√ß√£o na regi√£o de 300-400 mil forros por dia (por favor, avalie a escala).  Estes s√£o fabricantes gigantescos, portanto, s√£o completamente automatizados. </p><br><p> Para criar um revestimento, imprimimos em um molde especial para impressora 3D.  Esta √©, de fato, uma c√≥pia da mand√≠bula do paciente durante o tratamento.  Modelamos a apar√™ncia da mand√≠bula em uma semana, dois, m√™s, ano.  Ent√£o iniciamos o processo de termoforma√ß√£o - pegamos uma fita pl√°stica, aquecemos e puxamos para o molde.  Corte e pegue um forro de pl√°stico. </p><br><p>  No momento, ningu√©m j√° est√° lan√ßando pacientes e eles usam scanners intraorais tridimensionais.  Temos caras fazendo isso em um escrit√≥rio pr√≥ximo.  Esta √© provavelmente a parte mais "uau" da nossa produ√ß√£o.  L√°, em tempo real, um bico especial conduz ao longo da mand√≠bula e cria sua forma.  As informa√ß√µes s√£o carregadas nos servidores da empresa, processadas e enviadas aos nossos especialistas (t√©cnicos).  Eles podem editar a verifica√ß√£o, remover ru√≠dos. </p><br><p>  Em seguida, o tratamento √© planejado em um sistema CAD especializado.  Isso √© uma coisa muito complicada, porque ningu√©m sabe qual √© a mordida certa.  Cada m√©dico tem sua pr√≥pria opini√£o sobre esse assunto.  Atualmente, estamos trabalhando para formalizar abordagens ao tratamento, mas isso ainda n√£o est√° em andamento. </p><br><p>  Mas voltando ao C ++.  Existe um problema, por exemplo.  Os moldes s√£o impressos em uma impressora 3D especial usando a tecnologia de estereolitografia a laser.  Existe um tanque grande com um l√≠quido especial de fotopol√≠mero.  Eles brilham com um laser e endurece.  Primeiro, eles brilham na parte inferior do modelo impresso, depois um pouco mais alto, mais alto etc.  E assim, dentro do fluido, um modelo s√≥lido aparece de baixo para cima em camadas. </p><br><p>  Imprimir um molde por um seria impratic√°vel.  O tanque √© muito grande e voc√™ pode colocar cerca de cem moldes nele.  Mas eles devem ser organizados de forma compacta.  A forma do molde √© semelhante a uma ferradura - isto √©, n√£o convexa e bastante complexa.  E eles s√£o todos diferentes.  Acontece uma tarefa interessante de ladrilhar um ret√¢ngulo com figuras complexas. </p><br><p>  Aqui neste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√≠deo, de data e hora especificadas, voc√™</a> pode ver como fica. </p><br><p>  Este √© apenas um exemplo, h√° muitas tarefas. </p><br><p>  <b>Pavel:</b> Suas descri√ß√µes s√£o como c√°lculos de alta tecnologia.  Idiomas como o Fortran historicamente tiveram um bom desempenho neles.  Pelo menos voc√™ ainda pode ver os ecos.  Por que exatamente C ++? </p><br><p>  <b>Michael:</b> Bem, n√£o Fortran, seria muito poderoso.  No in√≠cio do desenvolvimento, o principal produto era esse sistema CAD muito especializado - um aplicativo de desktop para Windows.  Portanto, era necess√°ria uma linguagem para computa√ß√£o eficiente e, ao mesmo tempo, para o desenvolvimento do pr√≥prio aplicativo.  N√£o havia muita escolha naquele momento - apenas C ++. </p><br><p>  Agora, temos um zool√≥gico de linguagens: JavaScript e TypeScript para a Web, Java para aplicativos m√≥veis, Go para servidores, Python para automa√ß√£o, e h√° muitas coisas pequenas.  Basicamente, uma pilha padr√£o.  E em aplicativos de ci√™ncia intensiva e computacionalmente complexos, o C ++ permanece. </p><br><h2>  Quanto maior a posi√ß√£o, mais amplos os horizontes. </h2><br><p>  <b>Pavel:</b> Voc√™ mencionou sua posi√ß√£o como engenheiro l√≠der.  E ent√£o eu notei tal estranheza.  Se perguntassem a um desenvolvedor iniciante em C ++ da sua empresa o que ele estava fazendo, ele diria que estava rodando algum tipo de superestrutura baseada em modelos que, com base no est√°gio de refor√ßo, equilibram o servidor e as tecnologias caem imediatamente. </p><br><p>  Quando lhe perguntam o que sua empresa est√° fazendo, toda uma hist√≥ria come√ßa sobre o neg√≥cio: onde est√° o dinheiro, por que √© importante etc.  Isso de alguma forma se correlaciona com a sua posi√ß√£o?  Qual √© essa vis√£o de processos, tecnologias, ferramentas? </p><br><p>  <b>Michael:</b> Sim, talvez.  Al√©m disso, se eu come√ßar a contar imediatamente sobre como atravesso √°rvores (apesar de n√£o fazer isso sozinho), n√£o ficar√° claro para todos.  Por exemplo, caras da Yandex, a Kaspersky Lab pode come√ßar com a tecnologia, porque todo mundo conhece seus produtos.  Estamos falando de navios, sobre os quais um pequeno n√∫mero de pessoas conhece.  Portanto, √© necess√°rio explicar o que √©. </p><br><p>  Sobre como isso se correlaciona com a postagem.  Na minha nota, eu tenho que entender pelo menos os elementos do nosso fluxo de trabalho dos sistemas atuais que trabalham juntos.  Afinal, se algo mudar, isso poder√° afetar a produ√ß√£o, o local dos m√©dicos, a interface com a qual t√©cnicos, m√©dicos e analistas de neg√≥cios interagem.  Ou seja, sim, existe uma correla√ß√£o.  Com o crescimento da nota, voc√™ precisa ver melhor o que est√° acontecendo na empresa. </p><br><p>  <b>Pavel:</b> Voc√™ pensou como a introdu√ß√£o de novas tecnologias, digamos, relacionadas ao C ++, afetaria o fluxo de trabalho?  Poucas pessoas observam os novos recursos do idioma.  Se n√£o, conte-nos como voc√™ implementou ferramentas recentemente? </p><br><p>  <b>Michael:</b> N√£o me lembro do C ++ de antem√£o.  Se pegarmos as ferramentas, a √∫ltima coisa que estragamos √© um sistema de registro baseado em nuvem.  N√≥s usamos especificamente o Splunk para isso.  Inicialmente, a plataforma estava sob a √°rea de trabalho e a migra√ß√£o para a nuvem est√° agora em pleno andamento.  Portanto, fixamos, em particular, o log baseado em nuvem.  Nosso gerente aprendeu rapidamente a fazer solicita√ß√µes e criar belos pain√©is, exibir gr√°ficos em tempo real.  Fiquei muito satisfeito.  Enviei a todos e disse: veja como variamos o tempo de opera√ß√£o de um algoritmo t√£o complexo, qual o motivo?  Eles come√ßaram a entender, percebemos que quase n√£o havia multithreading nos agentes de teste.  Algo est√° sendo constantemente apresentado. </p><br><h2>  C ++, legado, multiplataforma e tudo, tudo, tudo </h2><br><p>  <b>Oleg:</b> Entendo corretamente que voc√™ processou no navegador? </p><br><p>  <b>Michael:</b> Sim, existe. </p><br><p>  <b>Oleg: As</b> tecnologias do navegador est√£o mudando constantemente.  Isso de alguma forma afeta?  Por exemplo, o novo JS, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shading Language</a> , algo assim. </p><br><p>  <b>Michael:</b> Isso afeta, mas √© um pouco chato aqui.  Em termos de renderiza√ß√£o, a cena √© bem simples.  N√£o temos efeitos especiais incr√≠veis. </p><br><p>  <b>Pavel:</b> Bom.  Mas voc√™ disse que come√ßou com um aplicativo de desktop, em que o C ++ era a melhor solu√ß√£o que combinava todas as vantagens.  Quando os neg√≥cios come√ßaram a crescer com o produto, voc√™ come√ßou a desenvolver outras plataformas.  Alguns c√≥digos foram para o navegador, outros para o back-end, outros para celulares.  O n√∫cleo ‚Äúpositivo‚Äù permaneceu em todas as plataformas? </p><br><p>  <b>Michael: O</b> movimento para outras plataformas come√ßou h√° dois anos e, para nossa escala, isso √© pouco tempo.  Portanto, nossa primeira solu√ß√£o em nuvem foi um mon√≥lito de desktop, do qual, grosso modo, a GUI foi lan√ßada.  Cerca de um ano e meio atr√°s, isolamos o kernel condicional e a liga√ß√£o em torno dele, para que pud√©ssemos compilar e execut√°-lo j√° no Linux.  Foi um grande avan√ßo.  O Linux era importante para n√≥s principalmente porque as m√°quinas Linux em nuvem s√£o muito mais baratas. </p><br><p>  Agora, queremos separar o n√∫cleo de computa√ß√£o em C ++, onde todos os c√°lculos complexos ocorrer√£o, da l√≥gica de neg√≥cios que descreve o que fazer e em que ordem, de onde veio o caso, que tipo de produto, o que o m√©dico tem o direito de fazer e o que n√£o, e isso √© tudo. </p><br><p>  <b>Pavel:</b> Voc√™ provavelmente j√° tem um roteiro desse processo, j√° que fala muito bem sobre isso. </p><br><p>  <b>Michael:</b> Tentamos v√°rias vezes criar um roteiro.  Entendemos para onde parecemos poder nos mudar, levando em considera√ß√£o os 20 anos do Legacy (n√£o √© poss√≠vel chegar l√° com meio d√≥lar, √© preciso pensar nisso). </p><br><p>  A intera√ß√£o de projetos positivos agora √© feita de maneira simples.  Dessas, s√£o as interfaces C ++ que se destacam, ent√£o elas s√≥ se re√∫nem para garantir que haja um compilador.  Um total de cerca de 250 projetos, cada um indo para sua pr√≥pria biblioteca din√¢mica.  E n√≥s os combinamos de maneiras diferentes para tarefas espec√≠ficas. </p><br><p>  Cerca de 10 equipes trabalham no sistema.  Cada equipe recruta um subconjunto desses projetos, geralmente de 50 a 70.  Agora estamos caminhando na dire√ß√£o em que algum servi√ßo ser√° criado com base.  Definimos uma API estrita para o servi√ßo (com base no protobuf ou em qualquer outra coisa) e fazemos um esquema padr√£o de intera√ß√£o entre os servi√ßos.  √â dif√≠cil chamar o processo de separa√ß√£o entre computa√ß√£o e l√≥gica, mas essas s√£o as primeiras tentativas de componente. </p><br><p>  Minha equipe e v√°rios outros j√° come√ßaram a fazer isso.  Voc√™ imediatamente sente o quanto √© engra√ßado quando coleciona um mon√≥lito n√£o apenas de 250 projetos, mas apenas de 70. E n√£o h√° mais uma situa√ß√£o em que algu√©m mudou outro m√≥dulo que interage com coisas aparentemente completamente n√£o relacionadas, e algo quebrou .  Tem um efeito psicol√≥gico legal.  E enquanto tentamos fugir de um mon√≥lito de √°rea de trabalho saud√°vel, alocamos condicionalmente 10 pequenos mon√≥litos para nossos servi√ßos. </p><br><p>  <b>Pavel:</b> E durante esse processo, voc√™ n√£o considerou se os m√≥dulos que est√£o prestes a ser carregados de alguma forma podem ajud√°-lo em qualquer um dos n√≠veis? </p><br><p>  <b>Michael: Foi</b> nesse processo e no processo de migra√ß√£o do Linux que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conan</a> nos ajudou.  Tivemos um problema s√©rio com o gerenciamento de terceiros.  Falei sobre como usamos o Conan no C ++ Russia 2019 em Moscou. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/PGOvl0dH8lM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Os m√≥dulos "mais" ajudariam a resolver alguns problemas com o tempo de compila√ß√£o, onde, de fato, tudo come√ßou, por que todo mundo quer os m√≥dulos.  Reutilizar os m√≥dulos positivos para interagir com o servi√ßo √© uma tolice, porque eles se comunicam em algum n√≠vel independente de idioma (protobuf), e com raz√£o.  Talvez possamos executar a componenteiza√ß√£o e n√£o construir nossos 250 projetos a partir da fonte de cada vez, mas coloc√°-los nos pacotes de Conan.  E se, por exemplo, dobrar DLLs for inconveniente por certos motivos, a montagem em m√≥dulos √© uma op√ß√£o. </p><br><p>  Mas n√£o posso dizer que estamos esperando por algum recurso que mudar√° nossa abordagem para o desenvolvimento. </p><br><p>  <b>Pavel:</b> Voc√™ mencionou que o Conan ajuda a resolver problemas de gerenciamento de pacotes.  Na minha opini√£o, h√° cerca de 3 anos, a comunidade C ++ apenas falou sobre isso.  Os primeiros relat√≥rios apareceram, os primeiros pr√©-requisitos.  E agora voc√™ diz que j√° trabalha em produ√ß√£o. </p><br><p>  Conte-nos sobre sua experi√™ncia na evolu√ß√£o de projetos.  O processo de transi√ß√£o foi doloroso e valeu a pena? </p><br><p>  <b>Michael:</b> Definitivamente vale a pena.  Estamos satisfeitos com Conan.  Existem algumas falhas, mas gerenciar depend√™ncias em C ++ √© uma tarefa muito dif√≠cil.  Portanto, √© √≥bvio que n√£o haver√° uma ferramenta simples para resolv√™-lo. </p><br><p>  Com Conan e o processo, alcan√ßamos um equil√≠brio de complexidade de tarefas e solu√ß√µes.  Inicialmente, dissemos: ‚ÄúOk, queremos destacar esse e muitos conjuntos de compiladores e configura√ß√µes, depois criar bibliotecas din√¢micas (em vez de est√°ticas) por padr√£o, fazer um pequeno conjunto de restri√ß√µes‚Äù e come√ßamos a criar um sistema dentro desse conjunto de restri√ß√µes.  Temos uma p√°gina wiki "Como criar uma receita Conan para uma biblioteca", que leva em considera√ß√£o todas as especificidades do nosso sistema.  A p√°gina √© bastante grande e n√£o muito simples.  Mas, novamente, alcan√ßamos um equil√≠brio de complexidade, por isso estou satisfeito com a transi√ß√£o. </p><br><p>  <b>Pavel:</b> E aqui, a prop√≥sito, no pr√≥ximo Citer Russia 2019 Piter, Denis Panin, da NVIDIA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">, falar√°</a> sobre a alternativa representada pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vcpkg</a> .  Seria interessante voc√™ ir ao relat√≥rio e ouvir como eles est√£o se saindo em outras ferramentas? </p><br><p>  <b>Michael:</b> Sim, seria interessante.  Usei um pouco o vcpkg, mas, na minha opini√£o, h√° muito pouca flexibilidade no vcpkg.  E n√£o consigo imaginar como poder√≠amos construir um sistema com nossos requisitos baseados no vcpkg.  Mas se eu precisar pegar e testar rapidamente algum tipo de biblioteca, n√£o baixarei e leio as Instru√ß√µes de compila√ß√£o, para que voc√™ precise especificar como registrar depend√™ncias, isso √© tudo.  Vou ver se est√° nas portas do vcpkg.  Se houver, coloque rapidamente, experimentando.  Se tudo estiver bem, vou escrever uma receita de Conan para ela. </p><br><p>  <b>Pavel:</b> Vamos continuar com a introdu√ß√£o de novas ferramentas e abordagens.  Voc√™ encontrou o fato de que os engenheiros v√™m correndo com os olhos ardentes da confer√™ncia, onde foram informados sobre uma coisa nova e interessante e querem inseri-la no projeto?  Como voc√™ costuma reagir a essas coisas?  Ou ent√£o voc√™ recorre ap√≥s cada confer√™ncia? </p><br><p>  <b>Michael:</b> H√° apenas uma √≥tima hist√≥ria.  Quando eu comecei a trabalhar na empresa, eles escreveram um recurso, e era necess√°rio fazer uma configura√ß√£o para ele.  Al√©m disso, um recurso pode ter v√°rias vers√µes diferentes e os valores de propriedades espec√≠ficas podem ser revistados entre diferentes vers√µes.  E criei um esquema legal baseado em YAML, onde havia heran√ßa e redefini√ß√£o de propriedades.  Ele escreveu por cerca de uma semana, cobriu-o com testes.  E, no in√≠cio, o gerente veio at√© mim e disse: "Ou√ßa, Michael, talvez voc√™ n√£o precise perder tempo agora e fa√ßa um esquema t√£o flex√≠vel?"  Mas ele n√£o conseguiu me convencer.  Meus olhos estavam muito queimados. </p><br><p>  Depois de alguns anos, olho para este c√≥digo e n√£o entendo por que era t√£o dif√≠cil de fazer.  Isso acontece, mas, felizmente, desde ent√£o eu me tornei mais inteligente.  Al√©m disso, geralmente os desenvolvedores s√£o pessoas muito racionais, voc√™ pode conversar com eles. </p><br><p>  Antes, algu√©m tomava decis√µes duvidosas de terceiros.  N√£o est√° claro por quem eles est√£o desenvolvendo, a √∫ltima atualiza√ß√£o foi h√° cinco anos, n√£o foi verificado se funciona no Linux, eles geram relat√≥rios em um formato propriet√°rio que voc√™ n√£o pode converter em nada.  E estamos sentados e n√£o entendemos o que fazer a seguir.  A maioria desses terceiros foi adicionada h√° muitos anos, mas acontece que algo semelhante acontece agora. </p><br><p>  Portanto, criamos uma coisa bastante simples - uma lista de verifica√ß√£o de terceiros.  Se voc√™ deseja arrastar terceiros, basta acessar os itens da lista de verifica√ß√£o: multiplataforma, n√≠vel de suporte, licen√ßa, quais an√°logos, n√≠vel de suporte ao desenvolvimento (quantos mantenedores suportam, qual comunidade).  Todos os pontos s√£o √≥bvios, mas existem muitos e, quando voc√™ digita terceiros, n√£o se lembra de tudo imediatamente.  A situa√ß√£o melhorou e estamos assistindo o que √© adicionado. </p><br><p>  Tamb√©m √© legal que antes era f√°cil arrastar terceiros e mont√°-los, por exemplo, apenas em uma vers√£o em "Windows" e 32 bits.  Agora, em princ√≠pio, n√£o existe tal possibilidade, pois voc√™ deve coloc√°-lo em Conan.  E se voc√™ arrastar terceiros, precisar√° garantir ou indicar explicitamente que, em algumas configura√ß√µes, isso n√£o ocorrer√°.  Gra√ßas a isso, o terceiro esquerdo come√ßou a ser adicionado muito menos. </p><br><p>  <b>Oleg:</b> E quanto a terceiros, que vivem muito pouco?  Por exemplo, alguns <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bot√µes esquerdos</a> do JavaScript.  Ele vai na sua lista de verifica√ß√£o.  Muitas vezes, √© atualizado, mantido, feito por pacotes. </p><br><p>  <b>Michael:</b> N√£o existe.  Em C ++, terceiros geralmente s√£o uma coisa grossa.  E solu√ß√µes de terceiros que executam pequenas fun√ß√µes n√£o s√£o usadas.  De fato, em C ++ n√£o √© t√£o simples adicionar terceiros.  E esse n√£o √© o JS, no qual cada um tem seu pr√≥prio m√≥dulo. </p><br><p>  Contratamos condicionalmente 80 terceiros, metade dos quais nunca vi.  Ou algum tipo de geometria infernal que foi escrita h√° 15 anos em alguma universidade, e n√≥s a temos. </p><br><p>  <b>Oleg:</b> Com Conan, √© f√°cil adicionar terceiros. </p><br><p>  <b>Michael:</b> Conan √© mais f√°cil, mas ainda est√° longe do mesmo Python em que voc√™ escreve a instala√ß√£o do pip e est√° pronto.  O C ++ possui um ecossistema muito complexo: diferentes sistemas operacionais, compiladores, ferramentas, bibliotecas e padr√µes.  A maioria das bibliotecas tem v√°rias op√ß√µes. </p><br><p>  Eles gostam de nos perguntar: "Por que voc√™ est√° escrevendo as receitas da sua biblioteca, mas n√£o as retirando do centro de Conan?"  Olhei periodicamente a partir da√≠ as receitas, mas elas n√£o nos conv√™m.  Estamos melhorando.  Por exemplo, nossas receitas cuidam dos s√≠mbolos de d√©bito e adicionam uma liga√ß√£o √†s fontes neles.  Portanto, quando voc√™ obt√©m uma biblioteca de terceiros do depurador do Visual Studio, as fontes s√£o carregadas automaticamente. </p><br><p>  Portanto, com Conan √© muito melhor, mas ainda est√° longe da conveni√™ncia de outros idiomas. </p><br><p>  <b>Oleg:</b> Existem falhas no pr√≥prio Conan que eu gostaria de corrigir? </p><br><p>  <b>Michael:</b> Sim, existem desvantagens, mas t√©cnicas. </p><br><p>  Conan possui m√©todos que s√£o condicionalmente respons√°veis ‚Äã‚Äãpor gerar pacotes e por conectar os pacotes gerados √† sua solu√ß√£o.  Ideologicamente, esses s√£o dois est√°gios diferentes, e eu posso mudar um sem alterar o outro.  Quando altero a maneira como os pacotes est√£o conectados, n√£o gostaria de gerar novamente os pacotes bin√°rios, porque eles ser√£o exatamente iguais.  Voc√™ n√£o pode fazer isso em Conan, porque a receita √© uma entidade.  Se voc√™ alterou a receita, formalmente precisar√° alterar a vers√£o e gerar novos bin√°rios, o que √© inconveniente. </p><br><h2>  Caracter√≠sticas da transi√ß√£o para novos padr√µes </h2><br><p>  <b>Pavel:</b> Vamos falar sobre novos padr√µes.  Al√©m disso, seu produto j√° possui um hist√≥rico. </p><br><p>  Agora chegamos √† confer√™ncia, onde a cada tr√™s anos eles nos falam sobre novos recursos maravilhosos.  Por exemplo, no C ++ Russia 2019 Piter, haver√° tr√™s relat√≥rios sobre as pr√≥ximas mudan√ßas no idioma.  Voc√™ tem alguma experi√™ncia em migrar a base de c√≥digo antiga, que correspondia aos padr√µes antigos, para o que foi oferecido ou ser√° oferecido? </p><br><p>  <b>Mikhail:</b> Sim, eu tive essa experi√™ncia, conversamos um pouco sobre isso no C ++ Russia 2019. Tivemos uma migra√ß√£o do Visual Studio 2013 para o Visual Studio 2017 e o gcc, ou seja, adicionamos simultaneamente o suporte ao Linux e os compiladores atualizados da Microsoft. </p><br><p>  Os problemas no c√≥digo eram muito menores em compara√ß√£o com os problemas organizacionais, t√©cnicos, de infraestrutura, IC e o restante do ajuste.  E nossos problemas no c√≥digo estavam relacionados principalmente ao UB, que, ap√≥s atualizar o compilador, come√ßou a disparar.  Embora o C ++ espalhe a podrid√£o por anos de compatibilidade com vers√µes anteriores, ele ajuda.  Agora compilamos tudo no C ++ 17. </p><br><p>  Os vorings n√£o s√£o sincronizados quando os desenvolvedores coletam no Windows, acessam o CI e somente depois come√ßam a montar no Linux.  Mas n√£o houve problemas significativos. </p><br><p>  No C ++ 17, algumas coisas obsoletas foram removidas, mas passamos apenas algumas horas cortando-as.  Por exemplo, a biblioteca log4cplus usava std :: auto_ptr nos cabe√ßalhos, mas nas novas vers√µes j√° era substitu√≠da por std :: unique_ptr, portanto bastava atualizar a biblioteca. </p><br><p>  Portanto, a migra√ß√£o para o novo padr√£o foi relativamente indolor.  E, dado o tamanho da nossa base de c√≥digo, estou surpreso com o n√∫mero de problemas que encontramos. </p><br><h2>  Sobre a faixa marrom e preta em C ++ </h2><br><p>  <b>Pavel:</b> Voc√™ e eu j√° estamos conversando sobre os processos existentes, onde desenvolvedores com experi√™ncia j√° trabalham.  Vamos dar uma ideia para desenvolvedores iniciantes que est√£o apenas aprendendo.  Qual padr√£o C ++ voc√™ recomendaria come√ßar? </p><br><p>  <b>Michael:</b> Devemos seguir o padr√£o mais recente imediatamente.  Voc√™ n√£o aprender√° STL no mesmo C ++ 98, pois STL sem lambdas n√£o faz sentido.  Se voc√™ observar os cursos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúFundamentos de desenvolvimento em C ++: faixa marrom‚Äù</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúFundamentos de desenvolvimento em C ++: faixa preta‚Äù</a> no Coursera, ent√£o j√° escrevemos em C ++ 17 l√°.  Por exemplo, usamos liga√ß√µes estruturadas. </p><br><p> <b>:</b> ,     .   ,      . ,            ? </p><br><p> <b>:</b>       ,      .    ,        C++.       ,     C++,    ,       .    ,     ,       .  ,       , , ,    .     ,     .       , ,      ,         Align Technology. </p><br><p> <b>:</b>  ,       ,  .  Porque </p><br><p> <b>:</b> -,  ‚Äî  .  ,     .          ,     .       ,     ,      ,      . -,  ,      ,   .    . -,       -   ( ),  -,     .    .        .     .      .       . ,       ,  ,   ,    . ,       ,  tutorial     .      -,     ,    . </p><br><h2>    </h2><br><p> <b>:</b> ,    .     ,    .     ? </p><br><p> <b>:</b>    ,    . ,            . </p><br><p> <b>:</b>   ,       ¬´¬ª  .  ,   .     ¬´¬ª  ,      ? </p><br><p> <b>:</b>      ,   ,    .   .        ,  - .   ,   . </p><br><p>        C++  .     ,  .      ,    .  , ,    .       .  -   ,    . </p><br><p>   ,    .       ,  ,    ,   .    ,    .          ¬´  ?¬ª.      ,   . </p><br><p> .     C++ Russia      .      ? </p><br><p> <b>:</b>      .   , ,   .   , ,     .      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a> . </p><br><p> <b>:</b>  ,     .     ,     ?     2015,    2019    2020 ? </p><br><p> <b>:</b>  , ,    ,  ,   .  -    .   ,        ,    ,     .    ,   ,     .   ,        . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  CppCon 2018   </a> .   ,    ,      .  C++ .   ,      ,   . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>      .      ,    ‚Äî ,    . </p><br><p> <b>:</b>     ? </p><br><p> <b>:</b>       const, volatile, static, constexpr, inline, extern       .   ,  ,    .. </p><br><p> <b>:</b>      consteval  constinit? </p><br><p> <b>:</b>      .     ,     ,  . ,   3-4     ,  . </p><br><p> <b>:</b> ,  ,  Visual Studio     constexpr? </p><br><p> <b>:</b> Visual Studio   .   ,    . ,   constexpr-. </p><br><p> <b>:</b>     ,    :    ,   ,    . </p><br><p> <b>:</b>   Visual Studio ,    .   ,    2010 :     ,   .    Microsoft   . </p><br><p> <b>:</b>    .       : const, constexpr, constinit, consteval , , final.  final  , , constfinal? </p><br><p> <b>:</b> final,      ,   .     . ,     constfinal,   . </p><br><p> <b>:</b>  ,     ,    ,   ,   .        ? </p><br><p> <b>:</b> ,       ,    .     ,      ,    . </p><br><p> <b>:</b>         ? </p><br><p> <b>:</b> , JUG Ru Group   ,      (). </p><br><p> <b>:</b>      .        ? </p><br><p> <b>:</b> ,   ‚Äî       .           ,   ,  ,   .    . </p><br><p> <b>:</b>   .   ,       ? </p><br><p> <b>:</b> , .         ,     (). </p><br><blockquote>        C++ Russia 2019 Piter   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">¬´,   ¬ª</a> .    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473628/">https://habr.com/ru/post/pt473628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473608/index.html">Um guia para entender o conceito de desenvolvimento moderno de aplicativos Web</a></li>
<li><a href="../pt473610/index.html">Analisando o novo console da web Plesk Obsidian</a></li>
<li><a href="../pt473612/index.html">Tratado sobre o Pin. Pensamentos sobre como configurar e trabalhar com pinos em C ++ para microcontroladores (usando o CortexM como exemplo)</a></li>
<li><a href="../pt473614/index.html">O livro ‚ÄúHead First. Kotlin ¬ª</a></li>
<li><a href="../pt473626/index.html">‚ÄúO desenvolvedor quer comprar um avi√£o em tr√™s anos. Minha tarefa √© ajud√°-lo ‚Äù- Denis Pushkin sobre a motiva√ß√£o do Skyeng</a></li>
<li><a href="../pt473630/index.html">Pr√°ticas recomendadas e ferramentas para o desenvolvimento de aplicativos iOS</a></li>
<li><a href="../pt473632/index.html">Vimos um artigo sobre Habr</a></li>
<li><a href="../pt473634/index.html">Lobby da Comcast pro√≠be criptografia DNS</a></li>
<li><a href="../pt473636/index.html">Fa√ßa o download do torrent de 16 GB via tablet com 4 GB de espa√ßo livre</a></li>
<li><a href="../pt473638/index.html">Shader n√£o √© m√°gico. Escrevendo shaders no Unity. 1. Introdu√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>