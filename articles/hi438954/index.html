<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëºüèø ‚ôêÔ∏è üë≤üèª 2 ‡§°‡•Ä ‡§Æ‡•á‡§Ç ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ üë®‚Äçüë®‚Äçüëß üè° üêö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‡§™‡§ø‡§õ‡§≤‡•á ‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤ ‡§Æ‡•á‡§Ç, ‡§π‡§Æ‡§®‡•á ‡§∏‡•Ä‡§ñ‡§æ ‡§ï‡§ø ‡§ï‡•à‡§∏‡•á ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§∏‡§∞‡§≤ ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§î‡§∞ ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§Ç‡§§‡§∞‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡•§ ‡§á‡§∏ ‡§≤‡•á‡§ñ ‡§Æ‡•á‡§Ç, ‡§π‡§Æ ‡§∏‡•Ä‡§ñ‡•á‡§Ç‡§ó...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>2 ‡§°‡•Ä ‡§Æ‡•á‡§Ç ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438954/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">‡§™‡§ø‡§õ‡§≤‡•á ‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤ ‡§Æ‡•á‡§Ç,</a> ‡§π‡§Æ‡§®‡•á ‡§∏‡•Ä‡§ñ‡§æ ‡§ï‡§ø ‡§ï‡•à‡§∏‡•á ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§∏‡§∞‡§≤ ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§î‡§∞ ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§Ç‡§§‡§∞‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡•§  ‡§á‡§∏ ‡§≤‡•á‡§ñ ‡§Æ‡•á‡§Ç, ‡§π‡§Æ ‡§∏‡•Ä‡§ñ‡•á‡§Ç‡§ó‡•á ‡§ï‡§ø ‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§ü‡§ø‡§≤ ‡§¶‡•Ç‡§∞‡•Ä ‡§µ‡§æ‡§≤‡•á ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§à ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ï‡•à‡§∏‡•á ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡•§  ‡§Æ‡•à‡§Ç‡§®‡•á ‡§¶‡•Ç‡§∞‡§∏‡•ç‡§• ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•á glsl-sign ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø ‡§∏‡•á ‡§Ø‡§π‡§æ‡§Ç ‡§µ‡§∞‡•ç‡§£‡§ø‡§§ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§§‡§ï‡§®‡•Ä‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡•Ä‡§ñ‡§æ, ‡§ú‡•ã <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">‡§Ø‡§π‡§æ‡§Ç</a> ‡§™‡§æ‡§à ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">‡§π‡•à‡§Ç</a> ‡•§  ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§ï‡§à ‡§§‡§∞‡•Ä‡§ï‡•á ‡§≠‡•Ä ‡§π‡•à‡§Ç, ‡§ú‡§ø‡§®‡§ï‡•Ä ‡§Æ‡•à‡§Ç ‡§Ø‡§π‡§æ‡§Å ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ‡•§ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n2/xg/4h/n2xg4h0rwnyo-k6s8f6yrkhihps.gif"></div><br><h2>  ‡§ü‡•ç‡§∞‡•á‡§®‡§ø‡§Ç‡§ó </h2><br>  ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç (‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç, ‡§è‡§∏‡§°‡•Ä‡§è‡§´) ‡§ï‡•á ‡§µ‡§ø‡§ú‡§º‡•Å‡§Ö‡§≤‡§æ‡§á‡§ú‡§º‡•á‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡§Æ ‡§è‡§ï ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á, ‡§î‡§∞ ‡§´‡§ø‡§∞ ‡§ë‡§™‡§∞‡•á‡§ü‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§â‡§∏ ‡§™‡§∞ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§  ‡§¶‡•Ç‡§∞‡§∏‡•ç‡§• ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Ø‡§π ‡§™‡§π‡§≤‡•á ‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤ ‡§∏‡•á ‡§¶‡•Ç‡§∞‡•Ä ‡§≤‡§æ‡§á‡§®‡•ã‡§Ç ‡§ï‡•á ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§ó‡§æ‡•§  ‡§∏‡§æ‡§¶‡§ó‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ ‡§ï‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§ú‡§º‡•Å‡§Ö‡§≤‡§æ‡§á‡§ú‡§º‡•á‡§∂‡§® ‡§Æ‡§æ‡§™‡§¶‡§Ç‡§°‡•ã‡§Ç ‡§ï‡•ã ‡§õ‡•ã‡§°‡§º‡§ï‡§∞ ‡§∏‡§≠‡•Ä ‡§Æ‡§æ‡§™‡§¶‡§Ç‡§°‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ü‡§™ ‡§á‡§∏‡•á ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§® ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§ï‡•ã ‡§è‡§ï ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ <br><a name="habracut"></a><br>  ‡§Æ‡•Å‡§ñ‡•ç‡§Ø shader ‡§π‡§Æ ‡§á‡§∏ ‡§§‡§∞‡§π ‡§¶‡§ø‡§ñ‡§§‡§æ ‡§π‡•à ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§ó‡§æ: <br><br><pre><code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/035_2D_SDF_Combinations/Champfer Union"</span></span>{ Properties{ _InsideColor(<span class="hljs-string"><span class="hljs-string">"Inside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) _OutsideColor(<span class="hljs-string"><span class="hljs-string">"Outside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) _LineDistance(<span class="hljs-string"><span class="hljs-string">"Mayor Line Distance"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) = <span class="hljs-number"><span class="hljs-number">1</span></span> _LineThickness(<span class="hljs-string"><span class="hljs-string">"Mayor Line Thickness"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.05</span></span> [IntRange]_SubLines(<span class="hljs-string"><span class="hljs-string">"Lines between major lines"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) = <span class="hljs-number"><span class="hljs-number">4</span></span> _SubLineThickness(<span class="hljs-string"><span class="hljs-string">"Thickness of inbetween lines"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.05</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.01</span></span> } SubShader{ <span class="hljs-comment"><span class="hljs-comment">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry Tags{ "RenderType"="Opaque" "Queue"="Geometry"} Pass{ CGPROGRAM #include "UnityCG.cginc" #include "2D_SDF.cginc" #pragma vertex vert #pragma fragment frag struct appdata{ float4 vertex : POSITION; }; struct v2f{ float4 position : SV_POSITION; float4 worldPos : TEXCOORD0; }; v2f vert(appdata v){ v2f o; //calculate the position in clip space to render the object o.position = UnityObjectToClipPos(v.vertex); //calculate world position of vertex o.worldPos = mul(unity_ObjectToWorld, v.vertex); return o; } float scene(float2 position) { const float PI = 3.14159; float2 squarePosition = position; squarePosition = translate(squarePosition, float2(1, 0)); squarePosition = rotate(squarePosition, .125); float squareShape = rectangle(squarePosition, float2(2, 2)); float2 circlePosition = position; circlePosition = translate(circlePosition, float2(-1.5, 0)); float circleShape = circle(circlePosition, 2.5); float combination = combination_function(circleShape, squareShape); return combination; } float4 _InsideColor; float4 _OutsideColor; float _LineDistance; float _LineThickness; float _SubLines; float _SubLineThickness; fixed4 frag(v2f i) : SV_TARGET{ float dist = scene(i.worldPos.xz); fixed4 col = lerp(_InsideColor, _OutsideColor, step(0, dist)); float distanceChange = fwidth(dist) * 0.5; float majorLineDistance = abs(frac(dist / _LineDistance + 0.5) - 0.5) * _LineDistance; float majorLines = smoothstep(_LineThickness - distanceChange, _LineThickness + distanceChange, majorLineDistance); float distanceBetweenSubLines = _LineDistance / _SubLines; float subLineDistance = abs(frac(dist / distanceBetweenSubLines + 0.5) - 0.5) * distanceBetweenSubLines; float subLines = smoothstep(_SubLineThickness - distanceChange, _SubLineThickness + distanceChange, subLineDistance); return col * majorLines * subLines; } ENDCG } } FallBack "Standard" //fallback adds a shadow pass so we get shadows on other objects }</span></span></code> </pre> <br>  ‡§î‡§∞ shader ‡§ï‡•á ‡§∏‡§æ‡§• ‡§è‡§ï ‡§π‡•Ä ‡§´‡§º‡•ã‡§≤‡•ç‡§°‡§∞ ‡§Æ‡•á‡§Ç 2D_SDF.cginc ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®, ‡§ú‡§ø‡§∏‡•á ‡§π‡§Æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á, ‡§™‡§π‡§≤‡•á ‡§á‡§∏ ‡§§‡§∞‡§π ‡§¶‡§ø‡§ñ‡§§‡§æ ‡§π‡•à: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> SDF_2D #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SDF_2D </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//transforms float2 rotate(float2 samplePosition, float rotation){ const float PI = 3.14159; float angle = rotation * PI * 2 * -1; float sine, cosine; sincos(angle, sine, cosine); return float2(cosine * samplePosition.x + sine * samplePosition.y, cosine * samplePosition.y - sine * samplePosition.x); } float2 translate(float2 samplePosition, float2 offset){ //move samplepoint in the opposite direction that we want to move shapes in return samplePosition - offset; } float2 scale(float2 samplePosition, float scale){ return samplePosition / scale; } //shapes float circle(float2 samplePosition, float radius){ //get distance from center and grow it according to radius return length(samplePosition) - radius; } float rectangle(float2 samplePosition, float2 halfSize){ float2 componentWiseEdgeDistance = abs(samplePosition) - halfSize; float outsideDistance = length(max(componentWiseEdgeDistance, 0)); float insideDistance = min(max(componentWiseEdgeDistance.x, componentWiseEdgeDistance.y), 0); return outsideDistance + insideDistance; } #endif</span></span></span></span></code> </pre> <br><h2>  ‡§∏‡§∞‡§≤ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® </h2><br>  ‡§π‡§Æ ‡§¶‡•ã ‡§¨‡§°‡§º‡•á ‡§Ü‡§ï‡§æ‡§∞ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•Å‡§õ ‡§∏‡§∞‡§≤ ‡§§‡§∞‡•Ä‡§ï‡•ã‡§Ç ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á, ‡§è‡§ï ‡§¨‡§°‡§º‡§æ ‡§Ü‡§ï‡§æ‡§∞, ‡§∏‡§Ç‡§Ø‡•Å‡§ó‡•ç‡§Æ‡§®, ‡§ö‡•å‡§∞‡§æ‡§π‡§æ ‡§î‡§∞ ‡§ò‡§ü‡§æ‡§µ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§∏‡§æ‡§• ‡§π‡•Ä ‡§è‡§ï ‡§Ü‡§ï‡§æ‡§∞ ‡§ï‡•ã ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è‡•§ <br><br><h3>  ‡§µ‡§ø‡§ï‡§æ‡§∞ </h3><br>  ‡§∏‡§∞‡§≤‡§§‡§Æ ‡§ë‡§™‡§∞‡•á‡§ü‡§∞ ‡§Ø‡•Å‡§ó‡•ç‡§Æ‡§® ‡§π‡•à‡•§  ‡§á‡§∏‡§ï‡•á ‡§∏‡§æ‡§•, ‡§π‡§Æ ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§è‡§ï ‡§∏‡§æ‡§• ‡§∞‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§ú‡•Å‡§°‡§º‡•á ‡§π‡•Å‡§è ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¶‡•Ç‡§∞‡•Ä ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§ú‡§¨ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§è‡§ï ‡§¶‡•Ç‡§∞‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à, ‡§§‡•ã ‡§π‡§Æ <code>min</code> ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§õ‡•ã‡§ü‡§æ ‡§ï‡§∞‡§ï‡•á ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ <br><br>  ‡§¶‡•ã ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§õ‡•ã‡§ü‡•á ‡§ï‡•Ä ‡§™‡§∏‡§Ç‡§¶ ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£, ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ 0 ‡§∏‡•á ‡§®‡•Ä‡§ö‡•á (‡§¶‡•É‡§∂‡•ç‡§Ø‡§Æ‡§æ‡§®) ‡§π‡•ã‡§ó‡§æ ‡§ú‡§π‡§æ‡§Ç ‡§¶‡•ã ‡§Ü‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§è‡§ï ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§®‡§æ‡§∞‡•á ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä 0 ‡§∏‡•á ‡§ï‡§Æ ‡§π‡•à;  ‡§µ‡§π‡•Ä ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§≠‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§≤‡§æ‡§ó‡•Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡§æ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ <br><br>  ‡§Ø‡§π‡§æ‡§Ç ‡§Æ‡•à‡§Ç ‡§∏‡§Ç‡§Ø‡•Å‡§ó‡•ç‡§Æ‡§® "‡§Æ‡§∞‡•ç‡§ú" ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¶‡•Ç‡§Ç‡§ó‡§æ, ‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§π‡§Æ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§µ‡§ø‡§≤‡§Ø ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç, ‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø hlsl ‡§Æ‡•á‡§Ç ‡§Ø‡•Ç‡§®‡§ø‡§Ø‡§® ‡§ï‡•Ä‡§µ‡§∞‡•ç‡§° ‡§Ü‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§á‡§∏‡•á ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•á ‡§®‡§æ‡§Æ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§â‡§™‡§Ø‡•ã‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in 2D_SDF.cginc include file float merge(float shape1, float shape2){ return min(shape1, shape2); }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in scene function in shader float combination = merge(circleShape, squareShape);</span></span></code> </pre> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66d/888/a58/66d888a586750b51cede307c21d61a40.png"></div><br><br><h3>  ‡§ö‡•å‡§∞‡§æ‡§π‡§æ </h3><br>  ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§ï‡§æ ‡§è‡§ï ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§â‡§® ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ ‡§π‡•à ‡§ú‡§ø‡§®‡§Æ‡•á‡§Ç ‡§¶‡•ã ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡§æ‡§Å ‡§ì‡§µ‡§∞‡§≤‡•à‡§™ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§  ‡§ê‡§∏‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ ‡§â‡§® ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡§æ ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§ø‡§®‡•ç‡§π‡•á‡§Ç ‡§π‡§Æ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§¶‡•ã ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡•á ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø, ‡§π‡§Æ 0 (‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞) ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§ú‡§¨ ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à, ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§¶‡•Ç‡§∞‡§ø‡§Ø‡§æ‡§Ç ‡§≠‡•Ä ‡§á‡§∏‡•Ä ‡§§‡§∞‡§π ‡§∏‡•á ‡§ä‡§™‡§∞ ‡§™‡§Ç‡§ï‡•ç‡§§‡§ø‡§¨‡§¶‡•ç‡§ß ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in 2D_SDF.cginc include file float intersect(float shape1, float shape2){ return max(shape1, shape2); }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in scene function in shader float combination = intersect(circleShape, squareShape);</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f64/2be/6c0/f642be6c047b740e74f062cec23c3040.png"></div><br><h3>  ‡§ò‡§ü‡§æ‡§µ </h3><br>  ‡§π‡§æ‡§≤‡§æ‡§Å‡§ï‡§ø, ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§π‡§Æ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§Ü‡§ï‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§è‡§ï ‡§π‡•Ä ‡§§‡§∞‡§π ‡§∏‡•á ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç, ‡§î‡§∞ ‡§π‡§Æ‡•á‡§Ç ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§ï‡•ã ‡§è‡§ï ‡§Ü‡§ï‡§æ‡§∞ ‡§∏‡•á ‡§ò‡§ü‡§æ‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§  ‡§Ø‡§π ‡§â‡§∏ ‡§Ü‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§Æ‡•á‡§Ç ‡§Ö‡§Ç‡§§‡§∞ ‡§ï‡§∞‡§ï‡•á ‡§ï‡§∞‡§®‡§æ ‡§ï‡§æ‡§´‡•Ä ‡§Ü‡§∏‡§æ‡§® ‡§π‡•à ‡§ú‡§ø‡§∏‡•á ‡§π‡§Æ ‡§¨‡§¶‡§≤‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§µ‡§π ‡§∏‡§≠‡•Ä ‡§Ü‡§ï‡§æ‡§∞ ‡§ú‡•ã ‡§π‡§Æ ‡§ò‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§π‡§Æ ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§î‡§∞ ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§π‡§ø‡§∏‡•ç‡§∏‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§™‡§∞‡•Ä‡§§ ‡§Æ‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§ú‡•ã ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¶‡•Ç‡§∞‡•Ä ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞ 1 ‡§Ø‡•Ç‡§®‡§ø‡§ü ‡§ï‡•ç‡§Ø‡§æ ‡§•‡§æ ‡§Ö‡§¨ 1 ‡§Ø‡•Ç‡§®‡§ø‡§ü ‡§Ö‡§Ç‡§¶‡§∞ ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in 2D_SDF.cginc include file float subtract(float base, float subtraction){ return intersect(base, -subtraction); }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in scene function in shader float combination = subtract(squareShape, circleShape);</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/495/7b2/258/4957b2258a8b8f8724e7daf8ba503d64.png"></div><br><h3>  ‡§™‡•ç‡§∞‡§ï‡•ç‡§∑‡•á‡§™ </h3><br>  ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§ø‡§≤‡§æ‡§®‡•á ‡§ï‡§æ ‡§è‡§ï ‡§®‡§æ‡§Ø‡§æ‡§¨ ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Ü‡§™‡§∏ ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§§‡§ö‡•Ä‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§  ‡§Ø‡§π ‡§¨‡•ç‡§≤‡•á‡§Ç‡§°‡§∂‡§æ‡•Ö‡§™ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¨‡§π‡•Å‡§≠‡•Å‡§ú ‡§Æ‡•á‡§∂ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•Å‡§õ ‡§π‡§¶ ‡§§‡§ï ‡§≠‡•Ä ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§á‡§∏‡§ï‡•Ä ‡§§‡•Å‡§≤‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ß‡§ø‡§ï ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§π‡•à‡•§  ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§∏‡§∞‡§≤ ‡§™‡•ç‡§∞‡§ï‡•ç‡§∑‡•á‡§™ ‡§∏‡•á, ‡§π‡§Æ ‡§è‡§ï ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§∏‡§π‡§ú ‡§™‡•ç‡§∞‡§µ‡§æ‡§π ‡§ï‡•ã ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§™‡•ç‡§∞‡§ï‡•ç‡§∑‡•á‡§™ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Ü‡§™ ‡§¨‡§∏ <code>lerp</code> ‡§µ‡§ø‡§ß‡§ø ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in 2D_SDF.cginc include file float interpolate(float shape1, float shape2, float amount){ return lerp(shape1, shape2, amount); }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in scene function in shader float pulse = sin(_Time.y) * 0.5 + 0.5; float combination = interpolate(circleShape, pulse);</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b06/3cf/2ec/b063cf2ece8b291553e941acc487f478.gif"></div><br><h2>  ‡§Ö‡§®‡•ç‡§Ø ‡§Ø‡•å‡§ó‡§ø‡§ï </h2><br>  ‡§∏‡§∞‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶, ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§π‡•Ä ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•á ‡§è‡§ï ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§Ö‡§¶‡•ç‡§≠‡•Å‡§§ ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§Ø‡§π ‡§π‡•à ‡§ï‡§ø ‡§π‡§Æ ‡§á‡§∏ ‡§§‡§ï ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§â‡§®‡§ï‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ï‡•á ‡§∏‡•ç‡§•‡§æ‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ó‡§†‡§¨‡§Ç‡§ß‡§® ‡§ï‡§∞‡§®‡•á ‡§î‡§∞ ‡§¶‡§ø‡§≤‡§ö‡§∏‡•ç‡§™ ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§ï‡§à ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó ‡§§‡§∞‡•Ä‡§ï‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ø‡§π‡§æ‡§Å ‡§Æ‡•à‡§Ç ‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•Å‡§õ ‡§§‡§ï‡§®‡•Ä‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§∏‡§Æ‡§ù‡§æ‡§ä‡§Å‡§ó‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ü‡§™ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://mercury.sexy/hg_sdf</a> ‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§à ‡§Ö‡§®‡•ç‡§Ø ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§™‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç (‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§Ö‡§®‡•ç‡§Ø ‡§â‡§™‡§Ø‡•ã‡§ó‡•Ä ‡§è‡§∏‡§°‡•Ä‡§è‡§´ ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç ‡§§‡•ã ‡§Æ‡•Å‡§ù‡•á ‡§≤‡§ø‡§ñ‡•á‡§Ç)‡•§ <br><br><h3>  ‡§ó‡•ã‡§≤‡§æ‡§à </h3><br>  ‡§π‡§Æ ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•á x- ‡§Ö‡§ï‡•ç‡§∑ ‡§î‡§∞ y- ‡§Ö‡§ï‡•ç‡§∑ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§¶‡•ã ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§§‡§π ‡§ï‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§î‡§∞ ‡§´‡§ø‡§∞ ‡§á‡§∏ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•á ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø ‡§Æ‡•Ç‡§≤ ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ø‡§¶‡§ø ‡§π‡§Æ ‡§ê‡§∏‡§æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§π‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§¨‡§π‡•Å‡§§ ‡§π‡•Ä ‡§Ö‡§ú‡•Ä‡§¨ ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ö‡§ó‡§∞ ‡§π‡§Æ ‡§Ö‡§ï‡•ç‡§∑ ‡§ï‡•ã 0 ‡§∏‡•á ‡§®‡•Ä‡§ö‡•á ‡§ï‡•á ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§§‡§ï ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§π‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§ê‡§∏‡§æ ‡§Æ‡§ø‡§≤‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§∏‡•Å‡§ó‡§Æ ‡§∏‡§Ç‡§Ø‡•Å‡§ó‡•ç‡§Æ ‡§ï‡•á ‡§∏‡§Æ‡§æ‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round_merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ float2 intersectionSpace = float2(shape1, shape2); intersectionSpace = min(intersectionSpace, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length(intersectionSpace); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f76/a37/693/f76a37693bd0ac5aa8b7d41b784931a6.png"></div><br>  ‡§Ø‡§π ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§π‡§Æ ‡§á‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§â‡§∏ ‡§∞‡•á‡§ñ‡§æ ‡§ï‡•ã ‡§¨‡§¶‡§≤‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§π‡§æ‡§Ç ‡§¶‡•Ç‡§∞‡•Ä 0 ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§Ø‡§π ‡§ë‡§™‡§∞‡•á‡§∂‡§® ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§Ø‡•Å‡§ó‡•ç‡§Æ‡§® ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§µ‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§  ‡§≤‡•á‡§ï‡§ø‡§® ‡§á‡§∏‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§ï‡§ø ‡§π‡§Æ ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç, ‡§π‡§Æ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§•‡•ã‡§°‡§º‡§æ ‡§¨‡§¢‡§º‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§â‡§∏‡•Ä ‡§§‡§∞‡§π ‡§ú‡•à‡§∏‡•á ‡§π‡§Æ‡§®‡•á ‡§è‡§ï ‡§µ‡•É‡§§‡•ç‡§§ ‡§¨‡§®‡§æ‡§Ø‡§æ, ‡§è‡§ï ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•ã ‡§¨‡§°‡§º‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ ‡§è‡§ï ‡§™‡§Ç‡§ï‡•ç‡§§‡§ø ‡§ï‡•ã ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§∏‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§∏‡•á ‡§ò‡§ü‡§æ‡§§‡•á ‡§π‡•à‡§Ç, ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§ö‡§ø‡§®‡•ç‡§π ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¶‡•Ç‡§∞‡•Ä 0 ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> radius = max(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(_Time.y * <span class="hljs-number"><span class="hljs-number">5</span></span>) * <span class="hljs-number"><span class="hljs-number">0.5</span></span> + <span class="hljs-number"><span class="hljs-number">0.4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> combination = round_intersect(squareShape, circleShape, radius);</code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round_merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ float2 intersectionSpace = float2(shape1 - radius, shape2 - radius); intersectionSpace = min(intersectionSpace, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length(intersectionSpace); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5f/507/a6d/e5f507a6dd0fb29da209c760889497fa.gif"></div><br>  ‡§Ø‡§π ‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§Ö‡§Ç‡§¶‡§∞ ‡§∏‡•Å‡§ö‡§æ‡§∞‡•Ç ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§π‡§Æ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§¨‡§¢‡§º‡§æ‡§®‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç, ‡§π‡§Æ‡•á‡§Ç ‡§ï‡•á‡§µ‡§≤ ‡§è‡§ï ‡§ö‡§ø‡§ï‡§®‡•Ä ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§  ‡§≤‡§Ç‡§¨‡§æ‡§à ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ï‡•ã ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ò‡§ü‡§æ‡§®‡§æ ‡§π‡•à‡•§  ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§≠‡§æ‡§ó ‡§™‡§π‡§≤‡•á ‡§ú‡•à‡§∏‡•á ‡§π‡•Ä ‡§¶‡§ø‡§ñ‡•á‡§Ç‡§ó‡•á, ‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡•ã ‡§õ‡•ã‡§°‡§º‡§ï‡§∞, ‡§ú‡•ã ‡§ï‡§ø ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§ñ‡•Ç‡§¨‡§∏‡•Ç‡§∞‡§§‡•Ä ‡§∏‡•á ‡§ö‡§ø‡§ï‡§®‡§æ ‡§π‡•à‡•§  ‡§π‡§Æ ‡§Ö‡§≠‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§π‡§ø‡§∏‡•ç‡§∏‡•á ‡§ï‡•Ä ‡§Ö‡§®‡§¶‡•á‡§ñ‡•Ä ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round_merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ float2 intersectionSpace = float2(shape1 - radius, shape2 - radius); intersectionSpace = min(intersectionSpace, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length(intersectionSpace) - radius; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4b/09d/0d5/b4b09d0d5e0d0dd92a8c120225dbe73a.gif"></div><br>  ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ö‡§∞‡§£ ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§≠‡§æ‡§ó ‡§ï‡§æ ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§π‡•à‡•§  ‡§á‡§∏‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ, ‡§ú‡§¨‡§ï‡§ø ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§Ö‡§Ç‡§¶‡§∞ ‡§∏‡•á ‡§π‡§∞‡§æ ‡§π‡•à, ‡§î‡§∞ ‡§π‡§Æ ‡§á‡§∏ ‡§∞‡§Ç‡§ó ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§¨‡§æ‡§π‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§™‡§π‡§≤‡§æ ‡§ï‡§¶‡§Æ ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§î‡§∞ ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§≠‡§æ‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡•ç‡§µ‡•à‡§™ ‡§ï‡§∞‡§®‡§æ ‡§π‡•à, ‡§¨‡§∏ ‡§è‡§ï ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§â‡§®‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•ã ‡§â‡§≤‡§ü ‡§ï‡§∞‡•§  ‡§´‡§ø‡§∞ ‡§π‡§Æ ‡§â‡§∏ ‡§π‡§ø‡§∏‡•ç‡§∏‡•á ‡§ï‡•ã ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§π‡§æ‡§Ç ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ò‡§ü‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§  ‡§™‡§π‡§≤‡•á ‡§π‡§Æ ‡§á‡§∏‡•á ‡§ò‡§ü‡§æ‡§µ ‡§∏‡•á ‡§ú‡•ã‡§°‡§º‡§ï‡§∞ ‡§¨‡§¶‡§≤‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ø‡§π ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à, ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® ‡§∏‡•á ‡§™‡§π‡§≤‡•á, ‡§π‡§Æ‡§®‡•á ‡§µ‡•á‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•ã ‡§Ü‡§ï‡§∞‡•ç‡§∑‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ, ‡§á‡§∏‡§≤‡§ø‡§è, ‡§á‡§∏‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞, ‡§π‡§Æ‡•á‡§Ç ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§ø‡§è ‡§ó‡§è ‡§ó‡§£‡§ø‡§§‡•Ä‡§Ø ‡§ë‡§™‡§∞‡•á‡§∂‡§® ‡§ï‡•ã ‡§â‡§≤‡•ç‡§ü‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§  ‡§´‡§ø‡§∞ ‡§π‡§Æ ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ï‡•ã ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§¶‡•ã‡§∏‡•ç‡§§ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¨‡§¶‡§≤ ‡§¶‡•á‡§Ç‡§ó‡•á, ‡§ú‡•ã ‡§π‡§Æ‡•á‡§Ç ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞ ‡§∏‡§π‡•Ä ‡§Æ‡§æ‡§® ‡§¶‡•á‡§ó‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§ï‡§ø‡§®‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§ï‡§∞‡•Ä‡§¨ ‡§î‡§∞ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§®‡§π‡•Ä‡§Ç‡•§  ‡§á‡§∏‡§∏‡•á ‡§¨‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ ‡§Æ‡§æ‡§® ‡§î‡§∞ ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§è‡§ï ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç, ‡§á‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞ ‡§∏‡§π‡•Ä ‡§Æ‡§æ‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§è‡§ï ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§Æ‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§∏‡§æ‡§• ‡§π‡•Ä ‡§∏‡§æ‡§• ‡§π‡§Æ‡•á‡§Ç ‡§â‡§∏ ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ï‡•á ‡§ú‡•ã‡§°‡§º ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à ‡§ú‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round_merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ float2 intersectionSpace = float2(shape1 - radius, shape2 - radius); intersectionSpace = min(intersectionSpace, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> insideDistance = -length(intersectionSpace); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> simpleUnion = merge(shape1, shape2); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> outsideDistance = max(simpleUnion, radius); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> insideDistance + outsideDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5e/079/968/b5e079968ff81efdccdde19d7a07aeeb.gif"></div><br>  ‡§è‡§ï ‡§ö‡•å‡§∞‡§æ‡§π‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ‡•á‡§Ç ‡§á‡§∏‡§ï‡•á ‡§µ‡§ø‡§™‡§∞‡•Ä‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à - ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç, ‡§Ø‡§π ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§µ‡•á‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§ò‡§ü‡§ï 0 ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•à‡§Ç, ‡§≤‡§Ç‡§¨‡§æ‡§à ‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§á‡§∏‡§ï‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡•ã ‡§® ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§  ‡§á‡§∏‡§≤‡§ø‡§è ‡§π‡§Æ ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§≠‡§æ‡§ó ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§  ‡§´‡§ø‡§∞, ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§≠‡§æ‡§ó ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ö‡•å‡§∞‡§æ‡§π‡•á ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§Ø‡§π ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ø‡§π ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§∏‡•á ‡§ï‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§  ‡§´‡§ø‡§∞, ‡§™‡§π‡§≤‡•á ‡§ï‡•Ä ‡§§‡§∞‡§π, ‡§π‡§Æ ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§î‡§∞ ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round_intersect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ float2 intersectionSpace = float2(shape1 + radius, shape2 + radius); intersectionSpace = max(intersectionSpace, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> outsideDistance = length(intersectionSpace); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> simpleIntersection = intersect(shape1, shape2); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> insideDistance = min(simpleIntersection, -radius); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> outsideDistance + insideDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/326/08f/268/32608f2685455f44a602a2c5ad12babf.gif"></div><br>  ‡§î‡§∞ ‡§è‡§ï ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§ò‡§ü‡§æ‡§µ ‡§ï‡•ã ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§Ü‡§ï‡•É‡§§‡§ø ‡§î‡§∞ ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ö‡•å‡§∞‡§æ‡§π‡•á ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§µ‡§∞‡•ç‡§£‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à, ‡§ï‡•á‡§µ‡§≤ ‡§â‡§∏ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•ã ‡§õ‡•ã‡§°‡§º‡§ï‡§∞ ‡§ú‡§ø‡§∏‡•á ‡§π‡§Æ ‡§ò‡§ü‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round_subtract</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> base, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> subtraction, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ round_intersect(base, -subtraction, radius); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/888/6b6/ea9/8886b6ea90411b4cffdf901160498de5.gif"></div><br>  ‡§Ø‡§π‡§æ‡§Ç, ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ò‡§ü‡§æ‡§§‡•á ‡§∏‡§Æ‡§Ø, ‡§Ü‡§™ ‡§ï‡§≤‡§æ‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§á‡§∏ ‡§ß‡§æ‡§∞‡§£‡§æ ‡§∏‡•á ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§π‡•ã‡§§‡•á ‡§¶‡•á‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§π‡§Æ ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•ã ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§æ‡§Ç‡§ï ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§Ö‡§®‡•Å‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä ‡§ï‡§æ‡§´‡•Ä ‡§Ö‡§ö‡•ç‡§õ‡•á ‡§π‡•à‡§Ç‡•§ <br><br><h3>  ‡§ù‡•Å‡§ï‡§®‡§æ </h3><br>  ‡§π‡§Æ ‡§á‡§∏‡•á ‡§è‡§ï ‡§ö‡•à‡§Ç‡§¨‡§∞ ‡§ï‡•Ä ‡§§‡§∞‡§π ‡§ï‡•ã‡§£ ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡§æ ‡§≠‡•Ä ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§á‡§∏ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ ‡§ï‡•ã ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ ‡§™‡§π‡§≤‡•á ‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ ‡§¶‡•ã ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§ï‡§∞ ‡§è‡§ï ‡§®‡§Ø‡§æ ‡§Ü‡§ï‡§æ‡§∞ ‡§¨‡§®‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ø‡§¶‡§ø ‡§π‡§Æ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§Æ‡§æ‡§® ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§ú‡§ø‡§∏ ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§™‡§∞ ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§Æ‡§ø‡§≤‡§§‡•á ‡§π‡•à‡§Ç ‡§µ‡§π ‡§ë‡§∞‡•ç‡§•‡•ã‡§ó‡•ã‡§®‡§≤ ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π ‡§ë‡§™‡§∞‡•á‡§∂‡§® ‡§π‡§Æ‡•á‡§Ç ‡§¶‡•ã ‡§∏‡§§‡§π‡•ã‡§Ç ‡§ï‡•á ‡§Æ‡§ø‡§≤‡§®‡•á ‡§ï‡•á ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§∏‡•á ‡§ó‡•Å‡§ú‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§è‡§ï ‡§µ‡§ø‡§ï‡§∞‡•ç‡§£ ‡§∞‡•á‡§ñ‡§æ ‡§¶‡•á‡§ó‡§æ‡•§ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab0/fa1/e52/ab0fa1e525ecc833f006cb23fc9c1748.png"></div><br>  ‡§ö‡•Ç‡§Ç‡§ï‡§ø ‡§π‡§Æ‡§®‡•á ‡§¨‡§∏ ‡§¶‡•ã ‡§ò‡§ü‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§æ ‡§π‡•à, ‡§á‡§∏ ‡§®‡§à ‡§∞‡•á‡§ñ‡§æ ‡§ï‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¶‡•Ç‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§ó‡§≤‡§§ ‡§™‡•à‡§Æ‡§æ‡§®‡§æ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§π‡§Æ ‡§á‡§∏‡•á ‡§è‡§ï ‡§á‡§ï‡§æ‡§à ‡§µ‡§∞‡•ç‡§ó ‡§ï‡•á ‡§µ‡§ø‡§ï‡§∞‡•ç‡§£ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§µ‡§ø‡§≠‡§æ‡§ú‡§ø‡§§ ‡§ï‡§∞‡§ï‡•á ‡§†‡•Ä‡§ï ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§Ö‡§∞‡•ç‡§•‡§æ‡§§, 2 ‡§ï‡•Ä ‡§ú‡§°‡§º ‡§∏‡•á 2 ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§ó‡§Æ‡•Ç‡§≤ ‡§∏‡§Æ‡§æ‡§® ‡§π‡•à‡•§ 0.5 ‡§ï‡•á ‡§µ‡§∞‡•ç‡§ó‡§Æ‡•Ç‡§≤ ‡§∏‡•á ‡§ó‡•Å‡§£‡§æ ‡§ï‡§∞‡§®‡§æ, ‡§î‡§∞ ‡§π‡§Æ ‡§¨‡§∏ ‡§ï‡•ã‡§° ‡§ï‡•ã ‡§á‡§∏ ‡§Æ‡§æ‡§® ‡§ï‡•ã ‡§≤‡§ø‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§π‡§∞ ‡§¨‡§æ‡§∞ ‡§â‡§∏‡•Ä ‡§∞‡•Ç‡§ü ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ <br><br>  ‡§Ö‡§¨ ‡§ú‡§¨‡§ï‡§ø ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ ‡§è‡§ï ‡§Ü‡§ï‡§æ‡§∞ ‡§π‡•à ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§µ‡§æ‡§Ç‡§õ‡§ø‡§§ ‡§¨‡•á‡§µ‡•á‡§≤ ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ ‡§π‡•à, ‡§π‡§Æ ‡§á‡§∏‡•á ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á ‡§§‡§æ‡§ï‡§ø ‡§¨‡•á‡§µ‡§≤ ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§™‡§∞‡•á ‡§π‡•ã‡•§  ‡§™‡§π‡§≤‡•á ‡§ï‡•Ä ‡§§‡§∞‡§π ‡§π‡•Ä, ‡§π‡§Æ ‡§â‡§∏ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§ï‡•ã ‡§ò‡§ü‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§π‡§Æ‡•á‡§Ç ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§¨‡§¢‡§º‡§æ‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§  ‡§´‡§ø‡§∞ ‡§π‡§Æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§∞‡•ç‡§ú ‡§ï‡•á ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¨‡•á‡§µ‡§≤ ‡§Ü‡§ï‡§æ‡§∞ ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç, ‡§ú‡§ø‡§∏‡§ï‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™ ‡§¨‡•á‡§µ‡•á‡§≤ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> champferSize = <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(_Time.y * <span class="hljs-number"><span class="hljs-number">5</span></span>) * <span class="hljs-number"><span class="hljs-number">0.3</span></span> + <span class="hljs-number"><span class="hljs-number">0.3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> combination = champfer_merge(circleShape, squareShape, champferSize);</code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">champfer_merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> champferSize)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SQRT_05 = <span class="hljs-number"><span class="hljs-number">0.70710678118</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> simpleMerge = merge(shape1, shape2); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> champfer = (shape1 + shape2) * SQRT_05; champfer = champfer - champferSize; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> merge(simpleMerge, champfer); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fc/103/174/4fc103174057617093fc3b3511f734b1.gif"></div><br>  ‡§è‡§ï ‡§™‡§æ‡§∞ ‡§¨‡•á‡§µ‡§≤ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ, ‡§™‡§π‡§≤‡•á ‡§ï‡•Ä ‡§§‡§∞‡§π, ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç, ‡§≤‡•á‡§ï‡§ø‡§® ‡§´‡§ø‡§∞ ‡§π‡§Æ ‡§¨‡•á‡§µ‡§≤ ‡§ï‡•á ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§ï‡§∞ ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§ï‡•ã ‡§ï‡§Æ ‡§ï‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§è‡§ï ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡§æ‡§∞ ‡§ï‡•Ä ‡§ó‡§à ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§™‡•ç‡§∞‡§§‡§ø‡§ö‡•ç‡§õ‡•á‡§¶ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">champfer_intersect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> champferSize)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SQRT_05 = <span class="hljs-number"><span class="hljs-number">0.70710678118</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> simpleIntersect = intersect(shape1, shape2); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> champfer = (shape1 + shape2) * SQRT_05; champfer = champfer + champferSize; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> intersect(simpleIntersect, champfer); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ca/36f/b07/1ca36fb07d7b3943b6ebfbab12fe098a.gif"></div><br>  ‡§î‡§∞ ‡§™‡§ø‡§õ‡§≤‡•á ‡§ò‡§ü‡§æ‡§µ ‡§ï‡•á ‡§∏‡§Æ‡§æ‡§®, ‡§π‡§Æ ‡§Ø‡§π‡§æ‡§Ç ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§â‡§≤‡•ç‡§ü‡•á ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ö‡•å‡§∞‡§æ‡§π‡•á ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§≠‡•Ä ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">champfer_subtract</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> base, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> subtraction, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> champferSize)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> champfer_intersect(base, -subtraction, champferSize); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/63a/5ca/28e63a5ca39ac18b239b8101df781410.gif"></div><br><h3>  ‡§ó‡•ã‡§≤ ‡§ö‡•å‡§∞‡§æ‡§π‡§æ </h3><br>  ‡§Ö‡§¨ ‡§§‡§ï, ‡§π‡§Æ‡§®‡•á ‡§ï‡•á‡§µ‡§≤ ‡§¨‡•Ç‡§≤‡§ø‡§Ø‡§® ‡§ë‡§™‡§∞‡•á‡§ü‡§∞‡•ã‡§Ç (‡§™‡•ç‡§∞‡§ï‡•ç‡§∑‡•á‡§™ ‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ) ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à‡•§  ‡§≤‡•á‡§ï‡§ø‡§® ‡§π‡§Æ ‡§Ö‡§®‡•ç‡§Ø ‡§§‡§∞‡•Ä‡§ï‡•ã‡§Ç ‡§∏‡•á ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§â‡§® ‡§∏‡•ç‡§•‡§æ‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§®‡§è ‡§ó‡•ã‡§≤ ‡§Ü‡§ï‡§æ‡§∞ ‡§¨‡§®‡§æ‡§ï‡§∞ ‡§ú‡§π‡§æ‡§Ç ‡§¶‡•ã ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ‡§è‡§Ç ‡§ì‡§µ‡§∞‡§≤‡•à‡§™ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ <br><br>  ‡§ê‡§∏‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ‡•á‡§Ç ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§ï‡•á x- ‡§Ö‡§ï‡•ç‡§∑ ‡§î‡§∞ y- ‡§Ö‡§ï‡•ç‡§∑ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§¶‡•ã ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§  ‡§§‡§¨ ‡§π‡§Æ ‡§Æ‡•Ç‡§≤ ‡§Æ‡•á‡§Ç ‡§á‡§∏ ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§ú‡§π‡§æ‡§Å ‡§¶‡•ã ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ‡§è‡§Å ‡§ì‡§µ‡§∞‡§≤‡•à‡§™ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç, ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä 0 ‡§π‡•ã‡§ó‡•Ä, ‡§ú‡•ã ‡§π‡§Æ‡•á‡§Ç ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ï‡§æ‡§≤‡•ç‡§™‡§®‡§ø‡§ï ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§ï‡•Ä ‡§â‡§§‡•ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡•á ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§∏‡•á 0 ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡•§  ‡§´‡§ø‡§∞, ‡§Ø‡§¶‡§ø ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ ‡§â‡§§‡•ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§π‡•à, ‡§§‡•ã ‡§π‡§Æ ‡§á‡§∏‡§ï‡•á ‡§∏‡§æ‡§• ‡§â‡§∏‡•Ä ‡§§‡§∞‡§π ‡§ï‡•á ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•à‡§∏‡•á ‡§ï‡§ø ‡§∏‡§∞‡•ç‡§ï‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§î‡§∞ ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§ï‡•ã ‡§ò‡§ü‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round_border</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shape2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ float2 position = float2(shape1, shape2); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distanceFromBorderIntersection = length(position); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distanceFromBorderIntersection - radius; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf6/64b/ad1/bf664bad1818151d8736cbf686aec0bd.png"></div><br><h3>  ‡§¨‡•â‡§∞‡•ç‡§°‡§∞ ‡§®‡•â‡§ö </h3><br>  ‡§Ü‡§ñ‡§ø‡§∞‡•Ä ‡§ö‡•Ä‡§ú ‡§ú‡•ã ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù‡§æ‡§ä‡§Ç‡§ó‡§æ ‡§µ‡§π ‡§π‡•à ‡§è‡§ï ‡§∏‡•Ä‡§Æ‡§æ ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§Ü‡§ï‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§Ü‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡§æ ‡§§‡§∞‡•Ä‡§ï‡§æ‡•§ <br><br>  ‡§π‡§Æ ‡§∏‡§∞‡•ç‡§ï‡§≤ ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ ‡§ï‡•á ‡§Ü‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡§ï‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ø‡§π ‡§™‡§π‡§≤‡•á ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§ï‡•á ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à, ‡§ú‡§¨‡§ï‡§ø ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§î‡§∞ ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§π‡§ø‡§∏‡•ç‡§∏‡•ã‡§Ç ‡§ï‡•ã ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡§æ ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§≠‡§æ‡§ó ‡§Æ‡§æ‡§®‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§∏‡•Ä‡§Æ‡§æ ‡§ï‡§æ ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§π‡•à 0. ‡§Ø‡§¶‡§ø ‡§π‡§Æ ‡§™‡§æ‡§Ø‡§¶‡§æ‡§® ‡§ï‡•Ä ‡§ö‡•å‡§°‡§º‡§æ‡§à ‡§ï‡•ã ‡§ò‡§ü‡§æ‡§ï‡§∞ ‡§á‡§∏ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§π‡§Æ ‡§™‡§ø‡§õ‡§≤‡•á ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ü‡§Ç‡§ï‡§°‡§º‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á ‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> depth = max(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(_Time.y * <span class="hljs-number"><span class="hljs-number">5</span></span>) * <span class="hljs-number"><span class="hljs-number">0.5</span></span> + <span class="hljs-number"><span class="hljs-number">0.4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> combination = groove_border(squareShape, circleShape, <span class="hljs-number"><span class="hljs-number">.3</span></span>, depth);</code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">groove_border</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> base, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> groove, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> depth)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> circleBorder = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(groove) - width; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> circleBorder; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a87/d6d/f27/a87d6df2778599af9e321a4f09beb019.png"></div><br>  ‡§Ö‡§¨ ‡§π‡§Æ‡•á‡§Ç ‡§ï‡•á‡§µ‡§≤ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§®‡§ø‡§∞‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§∏‡•á ‡§ó‡§π‡§∞‡§æ‡§à ‡§§‡§ï ‡§ú‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§∞‡•ç‡§ï‡§≤ ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§  ‡§ê‡§∏‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§π‡§Æ ‡§á‡§∏‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§Ü‡§ï‡•É‡§§‡§ø ‡§ï‡•á ‡§è‡§ï ‡§ï‡§Æ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ ‡§∏‡•á ‡§ò‡§ü‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ü‡§ß‡§æ‡§∞ ‡§Ü‡§ï‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡§Æ‡•Ä ‡§ï‡•Ä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§™‡§æ‡§Ø‡§¶‡§æ‡§® ‡§ï‡•Ä ‡§ó‡§π‡§∞‡§æ‡§à ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">groove_border</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> base, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> groove, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> depth)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> circleBorder = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(groove) - width; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> grooveShape = subtract(circleBorder, base + depth); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> grooveShape; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/175/81d/25917581df8a9f60193af32c6972f8b9.gif"></div><br>  ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ö‡§∞‡§£ ‡§Ü‡§ß‡§æ‡§∞ ‡§Ü‡§ï‡§æ‡§∞ ‡§∏‡•á ‡§™‡§æ‡§Ø‡§¶‡§æ‡§® ‡§ï‡•ã ‡§ò‡§ü‡§æ‡§®‡§æ ‡§î‡§∞ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§µ‡§æ‡§™‡§∏ ‡§ï‡§∞‡§®‡§æ ‡§π‡•à‡•§ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">groove_border</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> base, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> groove, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> depth)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> circleBorder = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(groove) - width; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> grooveShape = subtract(circleBorder, base + depth); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> subtract(base, grooveShape); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbf/569/f3b/bbf569f3b98efc61fa60228940a4b593.gif"></div><br><h2>  ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§ï‡•ã‡§° </h2><br><h3>  ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Fancy/2D_SDF.cginc</a> </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> SDF_2D #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SDF_2D </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//transforms float2 rotate(float2 samplePosition, float rotation){ const float PI = 3.14159; float angle = rotation * PI * 2 * -1; float sine, cosine; sincos(angle, sine, cosine); return float2(cosine * samplePosition.x + sine * samplePosition.y, cosine * samplePosition.y - sine * samplePosition.x); } float2 translate(float2 samplePosition, float2 offset){ //move samplepoint in the opposite direction that we want to move shapes in return samplePosition - offset; } float2 scale(float2 samplePosition, float scale){ return samplePosition / scale; } //combinations ///basic float merge(float shape1, float shape2){ return min(shape1, shape2); } float intersect(float shape1, float shape2){ return max(shape1, shape2); } float subtract(float base, float subtraction){ return intersect(base, -subtraction); } float interpolate(float shape1, float shape2, float amount){ return lerp(shape1, shape2, amount); } /// round float round_merge(float shape1, float shape2, float radius){ float2 intersectionSpace = float2(shape1 - radius, shape2 - radius); intersectionSpace = min(intersectionSpace, 0); float insideDistance = -length(intersectionSpace); float simpleUnion = merge(shape1, shape2); float outsideDistance = max(simpleUnion, radius); return insideDistance + outsideDistance; } float round_intersect(float shape1, float shape2, float radius){ float2 intersectionSpace = float2(shape1 + radius, shape2 + radius); intersectionSpace = max(intersectionSpace, 0); float outsideDistance = length(intersectionSpace); float simpleIntersection = intersect(shape1, shape2); float insideDistance = min(simpleIntersection, -radius); return outsideDistance + insideDistance; } float round_subtract(float base, float subtraction, float radius){ return round_intersect(base, -subtraction, radius); } ///champfer float champfer_merge(float shape1, float shape2, float champferSize){ const float SQRT_05 = 0.70710678118; float simpleMerge = merge(shape1, shape2); float champfer = (shape1 + shape2) * SQRT_05; champfer = champfer - champferSize; return merge(simpleMerge, champfer); } float champfer_intersect(float shape1, float shape2, float champferSize){ const float SQRT_05 = 0.70710678118; float simpleIntersect = intersect(shape1, shape2); float champfer = (shape1 + shape2) * SQRT_05; champfer = champfer + champferSize; return intersect(simpleIntersect, champfer); } float champfer_subtract(float base, float subtraction, float champferSize){ return champfer_intersect(base, -subtraction, champferSize); } /// round border intersection float round_border(float shape1, float shape2, float radius){ float2 position = float2(shape1, shape2); float distanceFromBorderIntersection = length(position); return distanceFromBorderIntersection - radius; } float groove_border(float base, float groove, float width, float depth){ float circleBorder = abs(groove) - width; float grooveShape = subtract(circleBorder, base + depth); return subtract(base, grooveShape); } //shapes float circle(float2 samplePosition, float radius){ //get distance from center and grow it according to radius return length(samplePosition) - radius; } float rectangle(float2 samplePosition, float2 halfSize){ float2 componentWiseEdgeDistance = abs(samplePosition) - halfSize; float outsideDistance = length(max(componentWiseEdgeDistance, 0)); float insideDistance = min(max(componentWiseEdgeDistance.x, componentWiseEdgeDistance.y), 0); return outsideDistance + insideDistance; } #endif</span></span></span></span></code> </pre> <br><h3>  ‡§õ‡§æ‡§Ø‡§æ‡§¶‡§æ‡§∞ ‡§Ü‡§ß‡§æ‡§∞ </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Simple/sdf_union.shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Simple/sdf_intersect.shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Simple/sdf_subtract.shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Simple/sdf_interpolate.shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Fancy/sdf_round.shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Fancy/sdf_champfer.shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Fancy/sdf_border_intersection.shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/035_SDF_combining_repeating/Fancy/sdf_groove.shader</a> </li></ul><br><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/035_2D_SDF_Combinations/Round"</span></span>{ Properties{ _InsideColor(<span class="hljs-string"><span class="hljs-string">"Inside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) _OutsideColor(<span class="hljs-string"><span class="hljs-string">"Outside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) _LineDistance(<span class="hljs-string"><span class="hljs-string">"Mayor Line Distance"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) = <span class="hljs-number"><span class="hljs-number">1</span></span> _LineThickness(<span class="hljs-string"><span class="hljs-string">"Mayor Line Thickness"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.05</span></span> [IntRange]_SubLines(<span class="hljs-string"><span class="hljs-string">"Lines between major lines"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) = <span class="hljs-number"><span class="hljs-number">4</span></span> _SubLineThickness(<span class="hljs-string"><span class="hljs-string">"Thickness of inbetween lines"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.05</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.01</span></span> } SubShader{ <span class="hljs-comment"><span class="hljs-comment">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry Tags{ "RenderType"="Opaque" "Queue"="Geometry"} Pass{ CGPROGRAM #include "UnityCG.cginc" #include "2D_SDF.cginc" #pragma vertex vert #pragma fragment frag struct appdata{ float4 vertex : POSITION; }; struct v2f{ float4 position : SV_POSITION; float4 worldPos : TEXCOORD0; }; v2f vert(appdata v){ v2f o; //calculate the position in clip space to render the object o.position = UnityObjectToClipPos(v.vertex); //calculate world position of vertex o.worldPos = mul(unity_ObjectToWorld, v.vertex); return o; } float scene(float2 position) { const float PI = 3.14159; float2 squarePosition = position; squarePosition = translate(squarePosition, float2(1, 0)); squarePosition = rotate(squarePosition, .125); float squareShape = rectangle(squarePosition, float2(2, 2)); float2 circlePosition = position; circlePosition = translate(circlePosition, float2(-1.5, 0)); float circleShape = circle(circlePosition, 2.5); float combination = /* combination calculation here */; return combination; } float4 _InsideColor; float4 _OutsideColor; float _LineDistance; float _LineThickness; float _SubLines; float _SubLineThickness; fixed4 frag(v2f i) : SV_TARGET{ float dist = scene(i.worldPos.xz); fixed4 col = lerp(_InsideColor, _OutsideColor, step(0, dist)); float distanceChange = fwidth(dist) * 0.5; float majorLineDistance = abs(frac(dist / _LineDistance + 0.5) - 0.5) * _LineDistance; float majorLines = smoothstep(_LineThickness - distanceChange, _LineThickness + distanceChange, majorLineDistance); float distanceBetweenSubLines = _LineDistance / _SubLines; float subLineDistance = abs(frac(dist / distanceBetweenSubLines + 0.5) - 0.5) * distanceBetweenSubLines; float subLines = smoothstep(_SubLineThickness - distanceChange, _SubLineThickness + distanceChange, subLineDistance); return col * majorLines * subLines; } ENDCG } } FallBack "Standard" //fallback adds a shadow pass so we get shadows on other objects }</span></span></code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi438954/">https://habr.com/ru/post/hi438954/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi438942/index.html">‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•á ‡§ñ‡•á‡§§‡•ã‡§Ç ‡§™‡§∞ 2 ‡§°‡•Ä ‡§õ‡§æ‡§Ø‡§æ</a></li>
<li><a href="../hi438946/index.html">DateTimeOffset (‡§∏‡§ñ‡•ç‡§§)</a></li>
<li><a href="../hi438948/index.html">‡§π‡§Æ‡•á‡§Ç ‡§è‡§≤‡•ç‡§¨‡•ç‡§∞‡§∏ ‡§™‡§∞ ‡§®‡§ø‡§Æ‡•ç‡§®-‡§∏‡•ç‡§§‡§∞ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§® ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§π‡•à ‡§Ø‡§æ ‡§Æ‡§æ‡§®‡•ç‡§Ø‡§§‡§æ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§ï‡•ã ‡§°‡•á‡§¢‡§º ‡§ó‡•Å‡§®‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ó‡§§‡§ø ‡§ï‡•à‡§∏‡•á ‡§π‡•à</a></li>
<li><a href="../hi438950/index.html">‡§∏‡•á‡§Ç‡§ü‡•ç‡§∞‡§≤ ‡§¨‡•à‡§Ç‡§ï ‡§®‡•á ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§™‡§∞ ‡§ï‡§Æ‡§æ‡§à ‡§ï‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§ñ‡•ã‡§ú ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∞‡•ã‡§¨‡•ã‡§ü ‡§≤‡•â‡§®‡•ç‡§ö ‡§ï‡§ø‡§Ø‡§æ</a></li>
<li><a href="../hi438952/index.html">‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§™‡•ç‡§≤‡•á‡§Ø‡§∞ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§∏‡•Ä‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç</a></li>
<li><a href="../hi438956/index.html">‡§¶‡§æ‡§Ç‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Æ‡•à‡§ó‡•ç‡§®‡•á‡§ü‡§æ‡§á‡§ü‡§ø‡§∏: ‡§∂‡•à‡§≤ ‡§Æ‡•ã‡§≤‡§∏‡•ç‡§ï ‡§∞‡•á‡§°‡•Å‡§≤‡§æ ‡§ï‡•á ‡§ä‡§§‡§ï ‡§ï‡•Ä ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§ï‡•ç‡§∞‡§ø‡§™‡§ü‡§Æ‡•ç‡§∏ ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§ï‡•ç‡§∞‡§Æ‡§£</a></li>
<li><a href="../hi438958/index.html">ILV ‡§®‡•á ‡§Ö‡§™‡§®‡•á "‡§∏‡•ç‡§™‡•á‡§∏ ‡§∏‡•ç‡§ü‡•á‡§∂‡§®" ‡§ï‡•á ‡§Ö‡§∏‡•ç‡§§‡§ø‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡•Ä</a></li>
<li><a href="../hi438960/index.html">‡§ï‡•à‡§∏‡•á ‡§Æ‡•à‡§Ç‡§®‡•á ‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§™‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§∞‡•Ç‡§¨‡•Ä ‡§ï‡•ã ‡§Ö‡§ú‡§ó‡§∞ ‡§ï‡•á ‡§™‡§ï‡•ç‡§∑ ‡§Æ‡•á‡§Ç ‡§õ‡•ã‡§°‡§º ‡§¶‡§ø‡§Ø‡§æ</a></li>
<li><a href="../hi438962/index.html">‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§≠‡§æ‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§ö‡§ø‡§™‡•ç‡§∏ ‡§ï‡•á ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£</a></li>
<li><a href="../hi438964/index.html">‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§µ‡•Ä‡§™‡•Ä‡§è‡§® ‡§ï‡•á ‡§™‡•Ä‡§õ‡•á ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§π‡•à?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>