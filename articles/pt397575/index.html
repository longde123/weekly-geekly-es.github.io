<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüéì ‚úä üç§ Caixa preta para a casa: coletamos o NAS com nossas pr√≥prias m√£os, parte 2 - magn√≠fico NAS4Free üí∏ üëê üë©üèº‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A publica√ß√£o √© direcionada a pessoas distantes da administra√ß√£o do sistema. Este post demonstra os recursos b√°sicos do maravilhoso sistema operacional...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Caixa preta para a casa: coletamos o NAS com nossas pr√≥prias m√£os, parte 2 - magn√≠fico NAS4Free</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/397575/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A publica√ß√£o √© direcionada a pessoas distantes da administra√ß√£o do sistema. </font><font style="vertical-align: inherit;">Este post demonstra os recursos b√°sicos do maravilhoso sistema operacional NAS4Free, que permite implantar o NAS dom√©stico, mesmo em hardware de baixa pot√™ncia, com um completo desconhecimento do FreeBSD e da linha de comando. </font><font style="vertical-align: inherit;">A primeira parte da publica√ß√£o est√° localizada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, temos uma caixa com as seguintes caracter√≠sticas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caso: Thermaltake Core V1;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonte de alimenta√ß√£o: Chieftec HPS-350NS;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placa-m√£e: GIGABYTE GA-J1800N-D2H;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM: Transcende SO-DIMM 2Gb DDR-III 1333Mhz x 2;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDD: WD Re 2004FBYZ x 2 (antes de fazer olhos redondos, leia a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeira parte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arrefecimento: VENTILADOR TITAN DC (80 mm, 2000 rpm) x 2.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â hora de transform√°-lo em um NAS dom√©stico, o mais confi√°vel poss√≠vel no ambiente atual. </font><font style="vertical-align: inherit;">E o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zettabyte File System</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nos ajudar√° com isso </font><font style="vertical-align: inherit;">- talvez a melhor solu√ß√£o para organizar um armazenamento de arquivos tolerante a falhas e, ao mesmo tempo, produtivo. </font><font style="vertical-align: inherit;">Desenvolvido pela Sun Microsistems para Solaris, o ZFS foi posteriormente portado para Linux e FreeBSD. </font><font style="vertical-align: inherit;">Entre suas muitas vantagens, estaremos interessados ‚Äã‚Äãno seguinte:</font></font><br>
<br>
<ol>
<li> ,          ,   ,    ‚Äì   ,  LVM;</li>
<li>     256-  ;</li>
<li>      ;</li>
<li>    RAID-    .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre as solu√ß√µes especializadas capazes de trabalhar com o ZFS, dois concorrentes se destacam claramente - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FreeNAS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NAS4Free</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Esses nomes de "espelho" n√£o s√£o de forma alguma acidentais - ambos os conjuntos s√£o baseados no FreeBSD, e o pr√≥prio NAS4Free √© um fork do FreeNAS 0.7, que se originou no momento em que o sistema operacional original ficou sob as asas da iXsystems e entrou nos trilhos. √â o NAS4Free que √© o meu favorito. Porque Vamos acertar.</font></font><br>
<br>
<ol>
<li>.   ,       NAS,     ,   NAS4Free   .       ?   , 4  RAM,  4-  ,       .     512    2-   .  FreeNAS   :      8  RAM  8- ,          1616 (    ).</li>
<li>.   NAS4Free       ‚Äú ‚Äù ‚Äì         :<br>
<img src="https://habrastorage.org/files/db0/488/59d/db048859d2fd48b891142fb3bdb4b3b5.JPG"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conveni√™ncia. </font><font style="vertical-align: inherit;">No NAS4Free, quase tudo pode ser controlado atrav√©s de uma interface web realmente intuitiva, al√©m de conter muitas dicas e bem traduzida para o russo em compara√ß√£o com um concorrente. </font><font style="vertical-align: inherit;">Voc√™ poder√° trabalhar com discos e servi√ßos, gerenciar o sistema de arquivos, tirar instant√¢neos e montar clones sem iniciar o console em princ√≠pio, o que atrair√° usu√°rios iniciantes e pessoas que n√£o est√£o familiarizadas com a administra√ß√£o * nix.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penso que os argumentos acima s√£o suficientes para fazer uma escolha inequ√≠voca. </font><font style="vertical-align: inherit;">Agora, trataremos da instala√ß√£o e configura√ß√£o inicial do sistema.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instale o NAS4Free</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como existem apenas dois discos no sistema, usaremos uma unidade flash USB como unidade de inicializa√ß√£o. Qual deles √© absolutamente irrelevante, qualquer antiguidade de 2 GB ser√° suficiente. Se houver d√∫vidas sobre a sa√∫de do dispositivo, voc√™ pode usar o mesmo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rufus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ap√≥s executar v√°rios testes. Ent√£o tudo √© simples - fa√ßa o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">download do LiveCD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e prossiga com a instala√ß√£o. Primeiro, voc√™ ver√° a seguinte tela: </font></font><br>
<br>
<img src="https://habrastorage.org/files/fbf/648/4da/fbf6484daa0547b0909f3c6ae628055c.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de um tempo, o menu de texto aparece no visor: </font></font><br>
<br>
<img src="https://habrastorage.org/files/a67/f79/d38/a67f79d38d184d7398b43e8e47ec31e6.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos interessados ‚Äã‚Äãno nono item - n√≥s o selecionamos. O processo de instala√ß√£o √© iniciado:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e0b/749/0b5/e0b7490b5b9249e3afe759a0338f00ac.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o tocamos no modo especialista, mas a escolha entre GPT e MBR depende da idade da placa-m√£e da sua m√°quina. Se voc√™ √© f√£ do "cl√°ssico" na face da BIOS, selecione o segundo item. Vale UEFI - escolha o primeiro. Ap√≥s a confirma√ß√£o, o NAS4Free informar√° quais opera√ß√µes ser√£o executadas - concordamos com tudo: a </font></font><br>
<br>
<img src="https://habrastorage.org/files/9e0/573/d3d/9e0573d3d97748f9886e27cfce14abd7.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
seguir, selecione a unidade com o disco de instala√ß√£o (no nosso exemplo, √© o √∫nico): </font></font><br>
<br>
<img src="https://habrastorage.org/files/4e4/6e0/278/4e46e0278ccd4e81ac36823d4deaae17.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, especifique a unidade flash USB na qual a instala√ß√£o ser√° executada. √â f√°cil diferenci√°-lo da unidade do sistema em tamanho e nome:</font></font><br>
<br>
<img src="https://habrastorage.org/files/2ab/ab6/10c/2abab610c86a4e088662cc49dadb6788.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pr√≥ximo passo √© definir o tamanho do arquivo de pagina√ß√£o. A regra √© simples: se voc√™ usar uma unidade de 2 GB - coloque 512 MB, 4 GB - coloque 1024 MB, se 8 - 2. Muitos t√™m uma pergunta justa nos coment√°rios, mas qu√£o confi√°vel √© instalar o sistema operacional em uma unidade flash USB, tanto mais que troc√°-lo ? Considero necess√°rio esclarecer este ponto. Primeiramente, um recurso da vers√£o incorporada √© que uma imagem de disco do sistema √© criada na RAM, ou seja, uma unidade flash √© acessada apenas no momento do carregamento do NAS, bem como ao salvar as configura√ß√µes. Em segundo lugar, o instalador requer a cria√ß√£o de um arquivo de troca sem falha, enquanto determina seu tamanho incorretamente. Fazer uma troca de 8 GB em um dispositivo de 4 GB? F√°cil! De qualquer forma, de acordo com o programa, vale a pena tentar. Para evitar erros, √© mais f√°cil definir um dos valores corretos fornecidos acima.E, finalmente, o arquivo de troca √© conectado manualmente nas configura√ß√µes - ele n√£o ser√° usado, o que significa que a unidade flash tamb√©m n√£o ser√° eliminada.</font></font><br>
<br>
<img src="https://habrastorage.org/files/f60/05b/781/f6005b78119547c887160a817bc13307.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O processo de instala√ß√£o ser√° iniciado, ap√≥s o qual voc√™ ver√° a seguinte tela: </font></font><br>
<br>
<img src="https://habrastorage.org/files/899/565/757/89956575762146aa86febf2e095cf33e.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode desconectar a unidade flash USB e reiniciar - a instala√ß√£o foi bem-sucedida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos trabalhar com o pr√≥prio NAS. Como escolhemos a op√ß√£o de or√ßamento para o thin client como placa-m√£e, teremos que come√ßar ajustando os par√¢metros de inicializa√ß√£o, conectando n√£o apenas uma unidade flash USB, mas tamb√©m um monitor com um teclado no dispositivo. Como as sa√≠das de v√≠deo apresentam D-Sub e HDMI, para que n√£o haja problemas. Depois de ligar a m√°quina, pressionamos "Excluir" e configuramos nossa unidade flash USB no menu "Inicializa√ß√£o" como o principal dispositivo de inicializa√ß√£o (por padr√£o, o UEFI Shell inicializa, mas n√£o precisamos disso). Salvamos as altera√ß√µes, reiniciamos o NAS e, se tudo for feito corretamente, vemos um menu familiar:</font></font><br>
<br>
<img src="https://habrastorage.org/files/145/570/2e1/1455702e1f1845a79781dfc2fcf7f1f7.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode conectar o NAS ao ambiente de trabalho por qualquer meio: atrav√©s de um roteador, switch, hub zero - tudo depende de suas necessidades pessoais. </font><font style="vertical-align: inherit;">Como voc√™ provavelmente deseja levar a m√°quina √† sua rede dom√©stica, a melhor op√ß√£o √© um roteador, portanto, vamos configurar um endere√ßo IP est√°tico na etapa 2. Responda consistentemente √†s perguntas feitas pelo sistema:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deseja usar o DHCP para esta interface? </font><font style="vertical-align: inherit;">- N√£o (queremos definir um IP est√°tico)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digite o novo endere√ßo IPv4 da LAN - 192.168.1.250 (instalado por padr√£o, se j√° estiver sendo usado na sua rede - digite qualquer endere√ßo gratuito)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digite a nova m√°scara de sub-rede da LAN - 24 (m√°scara de sub-rede 255.255.255.0)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digite o gateway padr√£o IPv4 - 192.168.1.1 (especifique o endere√ßo do roteador)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digite o endere√ßo IPv4 do DNS - 192.168.1.1 (tamb√©m especifique o endere√ßo do roteador)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deseja configurar o IPv6 para esta interface? </font><font style="vertical-align: inherit;">- N√£o (simplesmente n√£o precisamos de uma rede dom√©stica IPv6)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa tela atesta a conclus√£o bem-sucedida da configura√ß√£o: </font></font><br>
<br>
<img src="https://habrastorage.org/files/e11/c1a/3b2/e11c1a3b258a446984032148e61f0d6c.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√© aqui que a prepara√ß√£o do NAS √© conclu√≠da - agora voc√™ pode conectar o armazenamento √† rede e prosseguir com a configura√ß√£o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personalizar unidades</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as opera√ß√µes s√£o realizadas atrav√©s da conveniente WebGUI - basta digitar o endere√ßo IP que foi definido anteriormente (no nosso caso - 192.168.1.250) e imediatamente acessar o formul√°rio de autoriza√ß√£o: O </font></font><br>
<br>
<img src="https://habrastorage.org/files/844/ba8/a75/844ba8a75db746cc88c0d4ab6107eeff.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
login padr√£o √© admin, a senha (quem pensaria) √© nas4free. </font><font style="vertical-align: inherit;">Entre e veja o monitor do sistema: </font></font><br>
<br>
<img src="https://habrastorage.org/files/7ee/93c/0d5/7ee93c0d52084fdba42170d9f4a9be33.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos mudar para o excelente e poderoso imediatamente: v√° para ‚ÄúSistema‚Äù -&gt; ‚ÄúGeral‚Äù e altere o idioma para russo: </font></font><br>
<br>
<img src="https://habrastorage.org/files/6f7/99d/35b/6f799d35b471485697b7a7284a8e2589.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui voc√™ tamb√©m pode definir um novo nome de usu√°rio e senha para a interface da web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos configurar os discos. </font><font style="vertical-align: inherit;">Vamos para a se√ß√£o "Drives" -&gt; "Management" e ... n√£o encontramos nada:</font></font><br>
<br>
<img src="https://habrastorage.org/files/fa5/4b0/53a/fa54b053a6a94984b083c298b52930f6.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somente sem p√¢nico - no NAS4Free voc√™ precisa fazer tudo com as m√£os. </font><font style="vertical-align: inherit;">A op√ß√£o mais f√°cil √© clicar em "Limpar configura√ß√£o e importar discos", mas eu recomendo clicar no sinal de mais azul √† direita e adicionar unidades uma por vez. </font><font style="vertical-align: inherit;">O menu √© o seguinte: </font></font><br>
<br>
<img src="https://habrastorage.org/files/aac/ab4/fc0/aacab4fc02874f59a086427a3ae2bcbd.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos percorrer as op√ß√µes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A descri√ß√£o pode ser deixada em branco, eu dirigi com o nome abreviado do disco;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O modo de transfer√™ncia deixa Auto;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especifique o per√≠odo de transfer√™ncia das unidades para o modo de espera, dependendo de suas necessidades pessoais. </font><font style="vertical-align: inherit;">No entanto, isso deve ser levado em considera√ß√£o: o rein√≠cio frequente nem √© ben√©fico para o WD Re confi√°vel, portanto, n√£o faz sentido definir de 5 a 10 minutos - isso s√≥ acelera o desgaste do disco r√≠gido;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciamento de energia - defino o N√≠vel 127 - uma troca entre desempenho e consumo de energia;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≠vel de ru√≠do - n√£o considero necess√°rio us√°-lo, pois o WD funciona muito silenciosamente;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ deseja ativar o monitoramento SMART, marque a caixa;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como os discos s√£o novos, deixamos N√£o formatado (n√£o formatado) na √∫ltima linha.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora clique no bot√£o "Adicionar" e repita o procedimento para os discos restantes. </font><font style="vertical-align: inherit;">Voc√™ n√£o precisa adicionar uma unidade flash para evitar mal-entendidos (formate-a com pressa e tudo ter√° que come√ßar do zero). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s todas as manipula√ß√µes, vemos o seguinte no menu de configura√ß√µes do disco: </font></font><br>
<br>
<img src="https://habrastorage.org/files/f7d/1d9/ca0/f7d1d9ca037f40d286c4fa1f4edf577b.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leia o aviso na captura de tela. </font><font style="vertical-align: inherit;">Sim, esse √© um recurso do NAS4Free: primeiro fazemos as configura√ß√µes e depois confirmamos a escolha clicando em "Aplicar altera√ß√µes" - voc√™ ter√° que se acostumar. </font><font style="vertical-align: inherit;">Depois disso, observamos o resultado de nossas a√ß√µes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/aef/a97/cd9/aefa97cd9662417f8a71903c3f408636.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ deseja receber dados SMART monitorando o status dos discos, v√° para a guia com o mesmo nome.</font></font><br>
<br>
<img src="https://habrastorage.org/files/972/633/2f8/9726332f81f54e4fbcc01c31ebf99db3.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Marque a caixa de sele√ß√£o "Ativar", selecione o modo de energia em espera (para n√£o perturbar os discos r√≠gidos no modo de espera) e salve as altera√ß√µes. Tamb√©m h√° a capacidade de configurar alertas. Agora voc√™ pode visualizar dados detalhados de cada unidade na se√ß√£o ‚ÄúDiagn√≥sticos‚Äù -&gt; ‚ÄúInforma√ß√µes‚Äù -&gt; ‚ÄúSMART‚Äù, </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
portanto, ambas as unidades est√£o on-line, todos os sistemas funcionam bem. Mas este √© apenas o come√ßo da jornada. Vamos para a aba ‚ÄúHDD Formatting‚Äù. Como concordamos no in√≠cio do artigo, usaremos o ZFS. Selecione as duas unidades e clique em "Avan√ßar":</font></font><br>
<br>
<img src="https://habrastorage.org/files/1eb/08e/72e/1eb08e72e4b5475d872eaa8975b111ae.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na pr√≥xima etapa, defina o r√≥tulo do volume - escolhi WDREZFS% 1. A constru√ß√£o de "% 1" significa que os discos que formatamos receber√£o n√∫meros de s√©rie come√ßando com um. Ou seja, o primeiro ser√° nomeado WDREZFS1, o segundo - WDREZFS2, etc. Se voc√™ n√£o especificar um ponto de partida, colocando um sinal de "%" sem um d√≠gito, o pr√≥prio sistema numerar√° o HDD. Voc√™ tamb√©m pode dar nomes por n√∫meros de s√©rie. Por exemplo, "[4" significa que os √∫ltimos quatro d√≠gitos do n√∫mero de s√©rie ser√£o usados ‚Äã‚Äãcomo etiqueta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, eu recomendo marcar a caixa ‚ÄúCriando ZFS na parti√ß√£o GPT‚Äù se voc√™ estiver criando um pool complexo de v√°rios discos, planejando adicionar novas unidades no futuro. </font></font><br>
<br>
<img src="https://habrastorage.org/files/191/bd3/bc8/191bd3bc8f494c89b9eb38abd80c8890.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Formaizamos os discos, aguardamos a conclus√£o da opera√ß√£o e clicamos no bot√£o "OK".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora precisamos construir um dispositivo virtual. V√° para "Drives" -&gt; "ZFS" -&gt; "Pools" -&gt; "Virtual Device", clique no sinal de mais azul e veja a seguinte imagem: </font></font><br>
<br>
<img src="https://habrastorage.org/files/90c/f28/391/90cf28391fee481b9fb04c0f94e72fb8.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui podemos coletar os discos em uma matriz. Como preciso de um an√°logo do RAID-1, selecionei ‚ÄúMirror‚Äù (para refer√™ncia, ‚ÄúStripe‚Äù √© essencialmente o mesmo RAID-0). Ap√≥s confirmar a sele√ß√£o, n√£o se esque√ßa de aplicar as altera√ß√µes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/8b0/b18/5c7/8b0b185c703c4208b4ae127141cc9b47.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos para a guia "Pools" e adicionamos um novo usando o dispositivo virtual rec√©m-criado: </font></font><br>
<br>
<img src="https://habrastorage.org/files/44a/2ad/fa5/44a2adfa59424164917a37b8f5dc902d.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo o que √© necess√°rio √© criar um nome, voc√™ n√£o precisa configurar mais nada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em princ√≠pio, voc√™ j√° pode come√ßar a enviar arquivos, mas √© melhor aproveitar a principal vantagem do ZFS - a capacidade de criar conjuntos de dados. Na verdade, eles s√£o sistemas de arquivos subsidi√°rios, portanto, temos a oportunidade de escolher um m√©todo de compacta√ß√£o para cada conjunto de dados, definir direitos de acesso e cotas de disco (o que elimina a situa√ß√£o em que sua cole√ß√£o de v√≠deos consome com seguran√ßa todo o espa√ßo livre para documentos) e, o mais importante - cria instant√¢neos que permitem recuperar quase instantaneamente as informa√ß√µes perdidas. Portanto, vamos aos "Conjuntos de dados" e criamos alguns: </font></font><br>
<br>
<img src="https://habrastorage.org/files/89f/4e1/1be/89f4e11be0744aeda26a792ef9bf26dd.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na captura de tela acima, o √∫nico pool √© selecionado - WDREP e o m√©todo de compacta√ß√£o lzjb (um compromisso entre efici√™ncia e desempenho). </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deduplica√ß√£o de dados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deixe-o desligado, pois seu funcionamento adequado requer um m√≠nimo de 16 gigabytes de RAM. O pr√≥prio termo denota um m√©todo de compactar uma matriz de dados eliminando c√≥pias duplicadas. √â √∫til, por exemplo, se voc√™ criar regularmente c√≥pias de backup de grandes volumes de informa√ß√µes, enquanto a diferen√ßa entre eles for m√≠nima. Se o NAS desempenhar apenas o papel de armazenamento de filmes, m√∫sicas, fotos e outros conte√∫dos de m√≠dia, voc√™ simplesmente n√£o perceber√° os benef√≠cios da duplica√ß√£o, o que significa que n√£o deve gastar dinheiro adicional em hardware. O restante das configura√ß√µes s√£o deixadas por padr√£o. A √∫nica coisa, para fins de demonstra√ß√£o, colocarei uma marca na frente de "Visibility Snapshots" - agora as imagens ser√£o vis√≠veis de outros dispositivos. No campo "Espa√ßo reservado", voc√™ pode especificar o volume m√≠nimo garantido do conjunto de dados, e "Cota" permite definir a barra superior.Abaixo, voc√™ pode selecionar usu√°rios e configurar direitos de acesso:</font></font><br>
<br>
<img src="https://habrastorage.org/files/6ec/2ba/9d4/6ec2ba9d4925465faa41e66dfb7f324f.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma maneira, voc√™ pode adicionar quantos conjuntos de dados desejar:</font></font><br>
<br>
<img src="https://habrastorage.org/files/466/fbd/283/466fbd2831a44e5a84b7745a1d27795f.JPG"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hora de fazer upload de arquivos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O NAS est√° totalmente operacional, resta ensin√°-lo a se comunicar com o mundo exterior. </font><font style="vertical-align: inherit;">Para isso, o sistema operacional oferece um conjunto muito impressionante de ferramentas para todos os gostos, localizado no menu "Servi√ßos". </font><font style="vertical-align: inherit;">Do que voc√™ precisa - decida por si mesmo, agora vou me restringir √† configura√ß√£o b√°sica do FTP: </font></font><br>
<br>
<img src="https://habrastorage.org/files/fba/8fa/c95/fba8fac9596241358493ce24f5630068.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o se esque√ßa de marcar a caixa de sele√ß√£o "Ativar" (por padr√£o, todos os servi√ßos est√£o desativados). </font><font style="vertical-align: inherit;">O n√∫mero de clientes √© definido pelo n√∫mero de dispositivos que entrar√£o em contato com o armazenamento simultaneamente (3 s√£o relevantes para mim). </font><font style="vertical-align: inherit;">Eu recomendo deixar o n√∫mero de conex√µes 2. Em seguida, o upload / download de arquivos ser√° realizado em um fluxo, o que evitar√° a fragmenta√ß√£o e atingir√° a velocidade m√°xima. </font><font style="vertical-align: inherit;">Salve as configura√ß√µes e tente conectar-se ao NAS:</font></font><br>
<br>
<img src="https://habrastorage.org/files/052/afa/e33/052afae33a9942d9a619b994ea98ef44.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, o pool e os conjuntos de dados s√£o apresentados na forma de diret√≥rios, e os diret√≥rios .zfs s√£o exibidos nos quais os instant√¢neos ser√£o salvos. E, parece-me, chegou a hora de falar sobre eles com mais detalhes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instant√¢neos - instant√¢neos de todo o pool ou do conjunto de dados selecionado. Sem entrar em detalhes, um instant√¢neo √© a maneira mais r√°pida e "mais barata" de fazer backup em termos de espa√ßo. Atualmente, a funcionalidade de gerenciamento de imagens implementada no WebGUI √© um pouco limitada, mas √© capaz de satisfazer totalmente as necessidades de um usu√°rio comum. Quer mais - voc√™ precisa usar o console.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O NAS4Free suporta a cria√ß√£o manual e autom√°tica de instant√¢neos. Para tirar uma foto manualmente, v√° para a guia "ZFS" -&gt; "Snapshots" -&gt; "Snapshot", clique no sinal de mais, especifique o caminho (por exemplo, criei o conjunto de dados do Music) e pense em um nome para a imagem futura: Uma </font></font><br>
<br>
<img src="https://habrastorage.org/files/7f9/b24/baa/7f9b24baa4654293b8c185dca3194338.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
marca de sele√ß√£o na coluna "Recursive" ‚ÄùSignifica que ser√£o criados instant√¢neos de todos os conjuntos de dados filhos no Music, se houver. O resultado ser√° o seguinte: </font></font><br>
<br>
<img src="https://habrastorage.org/files/a55/41b/3fa/a5541b3fa5f54b359cae79e9825ddddc.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, isso n√£o √© um erro - um instant√¢neo n√£o ocupa espa√ßo livre at√© que os dados no conjunto de dados sejam alterados. Por exemplo, ele aumentar√° √† medida que voc√™ exclui arquivos mp3 do Music. O processo de instant√¢neo pode ser automatizado na guia "Instant√¢neo autom√°tico".</font></font><br>
<br>
<img src="https://habrastorage.org/files/f4c/8b3/e4b/f4c8b3e4bdbf412a83c6072edce9cf48.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, al√©m das configura√ß√µes discutidas acima, voc√™ pode escolher a hora em que a foto foi tirada e o per√≠odo de armazenamento. Voc√™ n√£o pode especificar um tipo diferente de di√°rio aqui (isso √© poss√≠vel apenas atrav√©s do console). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, digamos que voc√™ excluiu acidentalmente arquivos importantes. Como eles podem ser restaurados? Isso √© feito criando clones. Vamos voltar para a guia "Instant√¢neo" e clicar no √≠cone de chave inglesa na frente do instant√¢neo. A seguinte janela ser√° exibida: </font></font><br>
<br>
<img src="https://habrastorage.org/files/526/7dd/131/5267dd131142459faee1659b7a207e56.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui voc√™ precisa escolher o caminho no qual o clone ser√° localizado. Obviamente, deve ser exclusivo e n√£o repetir os nomes dos conjuntos de dados. Clique em "Executar" e verifique o resultado via FTP:</font></font><br>
<br>
<img src="https://habrastorage.org/files/ae5/e3e/771/ae5e3e77122a46cdb4a769a024e686a2.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, o clone do MusicSnap repete completamente o conte√∫do do conjunto de dados original. </font><font style="vertical-align: inherit;">Agora voc√™ pode extrair os arquivos perdidos do clone e copi√°-los novamente para o Music. </font><font style="vertical-align: inherit;">Ap√≥s o clone poder ser exclu√≠do na mesma aba:</font></font><br>
<br>
<img src="https://habrastorage.org/files/c50/efe/325/c50efe325b014a7f99d97c77428886d2.JPG"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toque final</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o ZFS Mirror baseado no Western Digital Re praticamente indestrut√≠vel permite criar um NAS dom√©stico com confiabilidade bastante aceit√°vel, apesar da falta de suporte ECC da placa-m√£e. No entanto, h√° um ponto fraco no sistema descrito - uma unidade flash. A mem√≥ria flash n√£o pode ser considerada confi√°vel, a menos que voc√™ use </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chips industriais</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas o NAS4Free fornece um mecanismo muito conveniente para elevar o servidor do zero. Na se√ß√£o "Sistema" - "Salvando / Restaurando", voc√™ pode obter o arquivo XML com as configura√ß√µes com apenas um clique: </font></font><br>
<br>
<img src="https://habrastorage.org/files/da2/325/19b/da232519b3b347d3b2773b3b171972cb.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A criptografia de senha est√° opcionalmente dispon√≠vel. Se a unidade flash falhar, tudo o que voc√™ precisa √© instalar o sistema de maneira limpa e restaurar a configura√ß√£o do arquivo. Todos os conjuntos e conjuntos de dados criados anteriormente, bem como as informa√ß√µes armazenadas, estar√£o dispon√≠veis novamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, isso √© tudo - o NAS dom√©stico est√° pronto para ir. </font><font style="vertical-align: inherit;">No momento, a montagem descrita acima me custa cerca de um m√™s, digerindo cerca de 500 gigabytes durante esse per√≠odo. </font><font style="vertical-align: inherit;">Obviamente, isso est√° longe de ser um desgaste, no entanto, o armazenamento est√° funcionando perfeitamente, n√£o houve problemas durante esse per√≠odo. </font><font style="vertical-align: inherit;">E agora vou organizar um pouco de intera√ß√£o: escreva nos coment√°rios quais recursos do NAS4Free voc√™ gostaria de ver ou quais solu√ß√µes n√£o-padr√£o voc√™ gostaria de implementar com base nele. </font><font style="vertical-align: inherit;">Assim, por exemplo, a   </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispi estava</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interessada na possibilidade de criar um LAMP completo - o aplicativo foi aceito, embora eu n√£o prometa a publica√ß√£o em um futuro pr√≥ximo.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt397575/">https://habr.com/ru/post/pt397575/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt397561/index.html">Audio Digest 9: Blogs sobre som, m√∫sica e tecnologia de √°udio</a></li>
<li><a href="../pt397563/index.html">A autenticidade do C√≥digo de Grolier, o quarto c√≥dice maia sobrevivente, √© comprovada.</a></li>
<li><a href="../pt397565/index.html">Como a Lyft v√™ o transporte rodovi√°rio em 10 anos</a></li>
<li><a href="../pt397567/index.html">No Nokia Bell Labs, eles conseguiram transmiss√£o de dados a uma velocidade de 1 Tbit / s sobre fibra</a></li>
<li><a href="../pt397571/index.html">Tecido h√≠brido converte luz solar e energia mec√¢nica em eletricidade</a></li>
<li><a href="../pt397577/index.html">Processador Terminator, Bender, Dandy e Apple 2: MOS 6502</a></li>
<li><a href="../pt397579/index.html">Hist√≥rico inesperado do microprocessador</a></li>
<li><a href="../pt397581/index.html">Chute agora! Com o Kickstarter, o futuro est√° mais pr√≥ximo</a></li>
<li><a href="../pt397583/index.html">Uma reuni√£o inesperada. Cap√≠tulo 4</a></li>
<li><a href="../pt397585/index.html">"Sim, voc√™ dirige!". Como os overclockers mudaram a ind√∫stria de computadores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>