<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ³ï¸â€ğŸŒˆ ğŸ¤½ğŸ½ ğŸ‘¼ğŸ» é¡µé¢å¯¹è±¡æ¨¡å‹çš„é©å‘½è¿˜æ˜¯æ¼”å˜ï¼Ÿ ğŸŒ¨ï¸ ğŸ™ğŸ½ ğŸˆº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å®¶å¥½ï¼ æˆ‘å«Artyom Sokovets ã€‚ æˆ‘æƒ³åˆ†äº«æˆ‘æœ‰å…³Atlasçš„æ–‡ç« çš„è¯‘æ–‡ï¼šHTML Elementsæ¡†æ¶çš„è½¬ä¸–ï¼Œå®ƒæå‡ºäº†ä¸€ç§ä¸Page Objectå®Œå…¨ä¸åŒçš„æ–¹æ³•ã€‚ 

 åœ¨è¯¦ç»†ä»‹ç»ä¹‹å‰ï¼Œæˆ‘æƒ³é—®ï¼šæ‚¨çŸ¥é“Page Objectçš„åŒ…è£…å¤šå°‘ï¼Ÿ é¡µé¢å…ƒç´ ï¼ŒScreenPlayï¼Œå¯åŠ è½½ç»„ä»¶ï¼Œè°ƒç”¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é¡µé¢å¯¹è±¡æ¨¡å‹çš„é©å‘½è¿˜æ˜¯æ¼”å˜ï¼Ÿ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/474408/"> å¤§å®¶å¥½ï¼ æˆ‘å«<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Artyom Sokovets</a> ã€‚ æˆ‘æƒ³åˆ†äº«æˆ‘æœ‰å…³Atlasçš„æ–‡ç« çš„è¯‘æ–‡ï¼šHTML Elementsæ¡†æ¶çš„è½¬ä¸–ï¼Œå®ƒæå‡ºäº†ä¸€ç§ä¸Page Objectå®Œå…¨ä¸åŒçš„æ–¹æ³•ã€‚ <br><br> åœ¨è¯¦ç»†ä»‹ç»ä¹‹å‰ï¼Œæˆ‘æƒ³é—®ï¼šæ‚¨çŸ¥é“Page Objectçš„åŒ…è£…å¤šå°‘ï¼Ÿ é¡µé¢å…ƒç´ ï¼ŒScreenPlayï¼Œå¯åŠ è½½ç»„ä»¶ï¼Œè°ƒç”¨é“¾... <br><br> å¦‚æœæˆ‘ä»¬åœ¨æ¥å£ä¸Šå®ç°ä¸€ä¸ªé¡µé¢å¯¹è±¡ï¼Œå¹¶å›ºå®šä»£ç†æ¨¡å¼å¹¶æ·»åŠ ä¸€äº›Java 8åŠŸèƒ½ï¼Œå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ <br><br> å¦‚æœæœ‰å…´è¶£ï¼Œæˆ‘å»ºè®®æ”¹ç”¨catã€‚ <br><br><img src="https://habrastorage.org/webt/sk/d9/ms/skd9msauqsfknsh8sw9sxyrj2dk.png"><br><a name="habracut"></a><br><h2> å¼•è¨€ </h2><br> ä½¿ç”¨æ ‡å‡†PageObjectè®¾è®¡æ¨¡å¼æ—¶ï¼Œä¼šå‡ºç°è®¸å¤šé—®é¢˜ï¼š <br><br>  <b>å…ƒç´ é‡å¤</b> <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">".//div[@class = 'header']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Header header; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnyOtherPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">".//div[@class = 'header']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Header header; }</code> </pre> <br> åœ¨è¿™é‡Œï¼ŒHeaderå—ç”¨äºå„ç§PageObjectç±»ã€‚ <br><br>  <b>å…ƒç´ ç¼ºä¹å‚æ•°åŒ–</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EditUserPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Text_1']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextBlock lastActivity; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Text_2']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextBlock blockReason; }</code> </pre><br> æœ¬ç¤ºä¾‹æè¿°äº†ç”¨æˆ·è®¾ç½®ç¼–è¾‘é¡µé¢çš„å…ƒç´ ã€‚ ä¸¤ä¸ªTextBlockå…ƒç´ åŒ…å«ä¸€ä¸ªå‡ ä¹ç›¸åŒçš„å®šä½ç¬¦ï¼Œä»…åœ¨æ–‡æœ¬å€¼ï¼ˆâ€œ Text_1â€å’Œâ€œ Text_2â€ï¼‰ä¸Šæœ‰æ‰€ä¸åŒã€‚ <br><br>  <b>ç›¸åŒç±»å‹çš„ä»£ç </b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='']/input"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsTextInput innerPhone; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Email']/input"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsTextInput email; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//button[text()='']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsButton save; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//button[text()='']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsButton toUsersList; }</code> </pre><br> åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°Page Objectï¼Œå®ƒç”±å…·æœ‰ç›¸åŒå…ƒç´ çš„å¤šè¡Œä»£ç ç»„æˆã€‚ å°†æ¥ï¼Œæ­¤ç±»ç±»éš¾ä»¥ç»´æŠ¤ã€‚ <br><br>  <b>å¤§å‹è¯¾ç¨‹</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSteps</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">linkContains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, String s)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//... }</span></span></span></span></code> </pre><br> éšç€æ—¶é—´çš„æµé€ï¼Œå¤„ç†å…ƒç´ çš„æ­¥éª¤ç±»åˆ«ä¸æ–­å¢é•¿ã€‚ éœ€è¦æ›´å¤šçš„æ³¨æ„ï¼Œä»¥ä¾¿æ²¡æœ‰é‡å¤çš„æ–¹æ³•ã€‚ <br><br><h2> æ‚¨çš„Page Objectä¸–ç•ŒæŒ‡å— </h2><br>  HTML Elementsæ¡†æ¶çš„è½¬ä¸–æ—¨åœ¨è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå‡å°‘æµ‹è¯•é¡¹ç›®çš„ä»£ç è¡Œæ•°ï¼Œæ›´å‘¨åˆ°åœ°å¤„ç†åˆ—è¡¨å’ŒæœŸæœ›ï¼Œå¹¶å€ŸåŠ©æ‰©å±•ç³»ç»Ÿä¸ºæ‚¨è‡ªå·±å¾®è°ƒè¯¥å·¥å…·ã€‚ <br><br>  <b>Atlas</b>æ˜¯æ–°ä¸€ä»£Javaæ¡†æ¶ï¼Œç”¨äºé€šè¿‡æ¥å£å®ç°Page Objectæ¨¡å¼çš„å®ç°æ¥å¼€å‘UIè‡ªåŠ¨æµ‹è¯•ã€‚ è¿™ç§æ–¹æ³•æä¾›äº†åœ¨å…ƒç´ æ ‘çš„æ„é€ ä¸­è¿›è¡Œå¤šé‡ç»§æ‰¿çš„å¯èƒ½æ€§ï¼Œè¿™æœ€ç»ˆä¸ºæ‚¨çš„è‡ªåŠ¨æµ‹è¯•æä¾›äº†ç®€æ´çš„ä»£ç ã€‚ <br><br> è¯¥æ¡†æ¶çš„ä¸»è¦åˆ›æ–°æ˜¯ä½¿ç”¨æ¥å£è€Œä¸æ˜¯æ ‡å‡†ç±»ã€‚ <br><br> è¿™æ˜¯github.comä¸»é¡µæè¿°çš„æ ·å­ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a free)]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br> ä¸Šé¢çš„ä»£ç æè¿°äº†GitHubç«™ç‚¹çš„ä¸»é¡µï¼Œè¯¥é¡µé¢å…·æœ‰ä¸€ä¸ªå…ƒç´ ä»¥åŠä»WebPageå’ŒWithHeaderå±‚çš„å¤šä¸ªç»§æ‰¿ï¼ˆè¯¥ç¤ºä¾‹ä»…å‡ºäºæ•™è‚²ç›®çš„ï¼Œå› æ­¤çœç•¥äº†å¤§å¤šæ•°Webå…ƒç´ ï¼‰ã€‚ <br><br><h2> æ¡†æ¶æ¶æ„ </h2><br>  Atlaså½“å‰åŒ…å«ä¸‰ä¸ªæ¨¡å—ï¼š <br><br><ul><li> æ ¸å¿ƒå›¾é›† </li><li>  Atlas-WebDriver </li><li> é˜¿ç‰¹æ‹‰æ–¯-é˜¿çš® </li></ul><br>  <b>åœ°å›¾é›†æ ¸å¿ƒ</b>ä»‹ç»äº†ä½¿ç”¨æ¥å£å¤„ç†é¡µé¢å¯¹è±¡çš„åŸºæœ¬åŠŸèƒ½ã€‚ ä½¿ç”¨æ¥å£çš„æƒ³æ³•æ¥è‡ªè‘—åçš„Retrofitå·¥å…·ã€‚ <br><br><img src="https://habrastorage.org/webt/-s/mm/8w/-smm8wwthpyo0xu7lrweew0ew54.png"><br><br> å…¶ä»–ä¸¤ä¸ª<b>atlas-webdriver</b>å’Œ<b>atlas-appiumæ¨¡å—</b>ç”¨äºå¼€å‘è‡ªåŠ¨åŒ–çš„UI Webå’ŒUIç§»åŠ¨è„šæœ¬ã€‚ æè¿°ç½‘é¡µçš„ä¸»è¦å…¥å£ç‚¹æ˜¯WebPageç•Œé¢ï¼Œè€Œå¯¹äºç§»åŠ¨å±å¹•-å±å¹•ã€‚ ä»æ¦‚å¿µä¸Šè®²ï¼Œatlas-webdriverå’Œatlas-appiumå»ºç«‹åœ¨æ‰©å±•åä¸Šï¼ˆè½¯ä»¶åŒ…* .extensionï¼‰ã€‚ <br><br><h2> ç‰©å“ </h2><br><img src="https://habrastorage.org/webt/ot/hn/ql/othnql8naaytd5_voumj6ev9uwy.png"><br><br> è¯¥å·¥å…·å¸¦æœ‰<b>ä¸¤ä¸ª</b>ç”¨äºå¤„ç†UIå…ƒç´ çš„ä¸“é—¨ç±»ï¼ˆç±»ä¼¼äºWebElementç±»ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/xy/n0/6v/xyn06vwigi41-bob1cxykbq-7dq.png"><br><br>  <b>AtlasWebElement</b>å’Œ<b>AtlasMobileElement</b>ç”±<b>should</b>å’Œ<b>waitUntilæ–¹æ³•</b>è¡¥å……ã€‚  ï¼ˆæœ¬æ–‡å°†è¿›ä¸€æ­¥è®¨è®ºè¿™äº›æ–¹æ³•ï¼‰ã€‚ <br><br> è¯¥å·¥å…·æä¾›äº†é€šè¿‡æ‰©å±•ä¸Šè¿°ç±»æ¥åˆ›å»ºè‡ªå·±çš„ç»„ä»¶çš„åŠŸèƒ½ï¼Œä»è€Œä½¿æ‚¨å¯ä»¥åˆ›å»ºè·¨å¹³å°å…ƒç´ ã€‚ <br><br><h2> ä¸»è¦ç‰¹ç‚¹ </h2><br> è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è€ƒè™‘è¯¥å·¥å…·çš„åŠŸèƒ½ï¼š <br><br><img src="https://habrastorage.org/webt/ef/yd/-c/efyd-c1u5ywgk7ql59ablf3aw5g.png"><br><br>  <b>æ¥å£è€Œä¸æ˜¯ç±»</b> <br><br> æè¿°æ ‡å‡†PageObjectsæ—¶ï¼Œä½¿ç”¨æ¥å£ä»£æ›¿ç±»ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a free trial of Enterprise Server')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br> æ­¤ç¤ºä¾‹æè¿°äº†GitHubèµ·å§‹é¡µé¢ä¸Šçš„é“¾æ¥ã€‚ <br><br>  <b>å…ƒç´ çš„å‚æ•°åŒ–</b> <br><br> æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰å­—æ®µçš„è¡¨æ ¼ï¼š <br><br><img src="https://habrastorage.org/webt/uu/mb/wj/uumbwjd2-nqpladvu1m6khwmxg0.png" width="420"><br><br> è¦å¯¹å…¶è¿›è¡Œæè¿°ï¼Œæ‚¨éœ€è¦ä½¿ç”¨@FindByæ‰¹æ³¨åˆ›å»º11ä¸ªå˜é‡ï¼Œå¹¶åœ¨å¿…è¦æ—¶å£°æ˜getterã€‚ <br><br> ä½¿ç”¨Atlasï¼Œæ‚¨åªéœ€è¦<b>ä¸€ä¸ª</b>å‚æ•°åŒ–çš„AtlasWebElementå…ƒç´ ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//div[text()='{{ text }}']/input"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"text"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String text)</span></span>; }</code> </pre><br> è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainPage().input(<span class="hljs-string"><span class="hljs-string">"First Name"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); onMainPage().input(<span class="hljs-string"><span class="hljs-string">"Postcode"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); onMainPage().input(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); }</code> </pre><br> æˆ‘ä»¬è½¬åˆ°æ‰€éœ€çš„é¡µé¢ï¼Œä½¿ç”¨å‚æ•°è°ƒç”¨æ–¹æ³•ï¼Œç„¶åä½¿ç”¨å…ƒç´ æ‰§è¡Œæ‰€éœ€çš„æ“ä½œã€‚ å…·æœ‰å‚æ•°çš„æ–¹æ³•æè¿°ç‰¹å®šå­—æ®µã€‚ <br><br>  <b>å¤šé‡ç»§æ‰¿</b> <br><br> å‰é¢æåˆ°è¿‡ï¼Œåœ¨ä¸åŒé¡µé¢å¯¹è±¡ä¸­ä½¿ç”¨çš„å—ï¼ˆä¾‹å¦‚Headerï¼‰æ˜¯ä»£ç çš„é‡å¤ã€‚ <br><br> æœ‰ä¸€ä¸ªæ ‡é¢˜githubã€‚ <br><br><img src="https://habrastorage.org/webt/_p/ca/39/_pca39zx5r4iw6kkwy9azeqy4d4.png"><br><br> æˆ‘ä»¬æè¿°äº†æ­¤å—ï¼ˆçœç•¥äº†å¤§å¤šæ•°Webå…ƒç´ ï¼‰ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//input[contains(@class,'header-search-input')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br> æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªå¯ä»¥è¿æ¥åˆ°ä»»ä½•é¡µé¢çš„å›¾å±‚ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//header[contains(@class,'Header')]"</span></span>) <span class="hljs-function"><span class="hljs-function">Header </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">header</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br> æˆ‘ä»¬ç”¨æ ‡é¢˜å—æ‰©å±•ä¸»é¡µã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a)]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br> é€šå¸¸ï¼Œæ‚¨å¯ä»¥åˆ›å»ºæ›´å¤šå±‚å¹¶å°†å®ƒä»¬è¿æ¥åˆ°æ‰€éœ€é¡µé¢ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä»ä¸»é¡µè¿æ¥é¡µçœ‰ï¼Œé¡µè„šï¼Œä¾§è¾¹æ å±‚ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithFooter</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithSidebar</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre><br> è®©æˆ‘ä»¬ç»§ç»­å‰è¿›ã€‚ é¡µçœ‰åŒ…å«4ä¸ªæŒ‰é’®ï¼Œ3ä¸ªä¸‹æ‹‰èœå•å’Œä¸€ä¸ªæœç´¢å­—æ®µï¼š <br><br><img src="https://habrastorage.org/webt/bf/pk/dg/bfpkdgqfxasiualhznwxmis_nd8.png"><br><br> è®©æˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„<b>Button</b>å…ƒç´ ï¼Œå¹¶ç”¨ä¸€ä¸ªå…ƒç´ æè¿°å››ä¸ªæŒ‰é’®ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//a[contains(., '{{ value }}')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; }</code> </pre><br> å°†æŒ‰é’®æŒ‰é’®è¿æ¥åˆ°æ ‡é¢˜å±‚ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬æ‰©å±•äº†GitHubæ ‡å¤´çš„åŠŸèƒ½ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithButton</span></span></span><span class="hljs-class"> </span></span>{ â€¦ }</code> </pre><br> å¯ä»¥å°†å•ç‹¬çš„<b>Button</b>å…ƒç´ è¿æ¥åˆ°ç½‘ç«™çš„å„ä¸ªå±‚ï¼Œå¹¶å¿«é€Ÿåœ¨æ‰€éœ€é¡µé¢ä¸Šè·å¾—æ‰€éœ€å…ƒç´ ã€‚ <br><br> ä¸€ä¸ªä¾‹å­ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainPage().open(<span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>); onMainPage().header().button(<span class="hljs-string"><span class="hljs-string">"Priing"</span></span>).click(); }</code> </pre><br> åœ¨æµ‹è¯•çš„ç¬¬äºŒè¡Œä¸­ï¼Œè®¿é—®ç«™ç‚¹çš„æ ‡é¢˜ï¼Œç„¶åæˆ‘ä»¬å°†è°ƒç”¨å‚æ•°åŒ–çš„æŒ‰é’®ï¼Œå…¶å€¼ä¸ºâ€œ Pricingâ€ï¼Œç„¶åå•å‡»ã€‚ <br><br> åœ¨ç»è¿‡æµ‹è¯•çš„ç½‘ç«™ä¸Šï¼Œå¯èƒ½æœ‰å¾ˆå¤šå…ƒç´ åœ¨é¡µé¢ä¹‹é—´é‡å¤ã€‚ ä¸ºäº†ä¸ä½¿ç”¨æ ‡å‡†çš„é¡µé¢å¯¹è±¡æ–¹æ³•æ¥å…¨éƒ¨æè¿°å®ƒä»¬ï¼Œæ‚¨å¯ä»¥æè¿°ä¸€æ¬¡å¹¶åœ¨å¿…è¦æ—¶è¿›è¡Œè¿æ¥ã€‚ èŠ‚çœæ—¶é—´å’Œä»£ç è¡Œæ•°æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ <br><br><img src="https://habrastorage.org/webt/jk/mb/hw/jkmbhwzovztryyxlgoxu-slikau.png"><br><br>  <b>é»˜è®¤æ–¹æ³•</b> <br><br>  Java 8å¼•å…¥äº†é»˜è®¤æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ç”¨äºé¢„å®šä¹‰æ‰€éœ€çš„åŠŸèƒ½ã€‚ <br><br> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªâ€œæœ‰å®³â€å…ƒç´ ï¼šä¾‹å¦‚ï¼Œä¸€ä¸ªå¤é€‰æ¡†å¤„äºæ‰“å¼€æˆ–å…³é—­çŠ¶æ€ã€‚ è®¸å¤šåœºæ™¯éƒ½é€šè¿‡äº†å®ƒã€‚ å¦‚æœç¦ç”¨è¯¥å¤é€‰æ¡†ï¼Œåˆ™éœ€è¦å¯ç”¨å®ƒï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(onMainPage().rentFilter().checkbox(<span class="hljs-string"><span class="hljs-string">""</span></span>).getAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>).contains(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)) { onMainPage().rentFilter().checkbox(<span class="hljs-string"><span class="hljs-string">""</span></span>).click(); }</code> </pre><br> ä¸ºäº†ä¸å°†æ‰€æœ‰è¿™äº›ä»£ç å­˜å‚¨åœ¨stepç±»ä¸­ï¼Œå¯ä»¥å°†å…¶ä½œä¸ºé»˜è®¤æ–¹æ³•æ”¾åœ¨å…ƒç´ æ—è¾¹ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Checkbox</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//..."</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">((@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectCheckbox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (checkBox(value).getAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>).contains(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)) { checkBox(value).click(); } } }</code> </pre><br> ç°åœ¨æµ‹è¯•æ­¥éª¤å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="java hljs">onMainPage().rentFilter().selectCheckbox(<span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre><br> æ‚¨è¦åœ¨å­—æ®µä¸­ç»“åˆä½¿ç”¨æ¸…ç†å’Œé”®å…¥å­—ç¬¦çš„å¦ä¸€ä¸ªç¤ºä¾‹ã€‚ <br><br><pre> <code class="java hljs">onMainPage().header().input(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).clear(); onMainPage().header().input(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>);</code> </pre><br> å®šä¹‰ä¸€ä¸ªæ¸…é™¤å­—æ®µå¹¶è¿”å›å…ƒç´ æœ¬èº«çš„æ–¹æ³•ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Input</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//xpath"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withClearInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ input(value).clear(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input(value); } }</code> </pre><br> åœ¨æµ‹è¯•æ–¹æ³•ä¸­ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š <br><br><pre> <code class="java hljs">onMainPage().header().withClearInput(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>);</code> </pre><br> è¿™æ ·ï¼Œå¯ä»¥å¯¹å…ƒç´ ä¸­çš„æ‰€éœ€è¡Œä¸ºè¿›è¡Œç¼–ç¨‹ã€‚ <br><br>  <b>é‡è¯•</b> <br><br>  Atlaså…·æœ‰å†…ç½®é‡è¯•åŠŸèƒ½ã€‚ æ‚¨æ— éœ€æ‹…å¿ƒè¯¸å¦‚<i>NotFoundException</i> ï¼Œ <i>StaleElementReferenceException</i>å’Œ<i>WebDriverExceptionä¹‹ç±»çš„</i>å¼‚å¸¸ï¼Œå¹¶ä¸”è¿˜<i>å¯ä»¥çœå»</i>ä½¿ç”¨Selenium APIçš„æ˜¾å¼å’Œéšå¼æœŸæœ›ã€‚ <br><br><pre> <code class="java hljs">onSite().onSearchPage(<span class="hljs-string"><span class="hljs-string">"Junit 5"</span></span>).repositories().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">10</span></span>));</code> </pre><br> å¦‚æœæ‚¨åœ¨é“¾ä¸­çš„æŸä¸ªç‚¹æ•è·åˆ°å¼‚å¸¸ï¼Œåˆ™è¯¥é˜¶æ®µå°†ä»å¤´å¼€å§‹é‡å¤ã€‚ <br><br> å¯ä»¥ç‹¬ç«‹è°ƒæ•´å¯é‡å¤çš„æ—¶é—´é—´éš”æˆ–é‡å¤é¢‘ç‡ã€‚ <br><br><pre> <code class="java hljs">Atlas atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)) .context(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RetryerContext(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultRetryer(<span class="hljs-number"><span class="hljs-number">3000L</span></span>, <span class="hljs-number"><span class="hljs-number">1000L</span></span>, Collections.singletonList(Throwable.class))));</code> </pre><br> æˆ‘ä»¬æœŸæœ›ä¸‰ç§’é’Ÿçš„è½®è¯¢é€Ÿç‡ä¸ºæ¯ç§’ä¸€æ¬¡ã€‚ <br><br> æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Retry</a></b>æ³¨é‡Šæ¥è°ƒæ•´å¯¹ç‰¹å®šé¡¹ç›®çš„ç­‰å¾…ã€‚ å¯¹äºæ‰€æœ‰å…ƒç´ ï¼Œæœç´¢å°†åœ¨3ç§’å†…è¿›è¡Œï¼Œå¦‚æœæœç´¢ä¸º1ï¼Œåˆ™æœç´¢ä¸º20ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Retry</span></span>(timeout = <span class="hljs-number"><span class="hljs-number">20_000L</span></span>, polling = <span class="hljs-number"><span class="hljs-number">2000L</span></span>) <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//XCUIElementTypeSearchField[@name='Search Wikipedia']"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AndroidFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//*[contains(@text, 'Search Wikipedia')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchWikipedia</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre><br>  <b>ä½¿ç”¨æ¸…å•</b> <br><br> å¼€ç®±å³ç”¨ï¼Œè¯¥å·¥å…·æä¾›äº†ä½¿ç”¨åˆ—è¡¨çš„åŠŸèƒ½ã€‚ è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ æœ‰ä¸€ä¸ªå¸¦æœ‰è¾“å…¥æ ‡ç­¾çš„å­—æ®µï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­è¾“å…¥æ–‡æœ¬ï¼Œç„¶åå‡ºç°ä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨ï¼Œå…ƒç´ ä¸ä¼šç«‹å³å‡ºç°ã€‚ <br><br><img src="https://habrastorage.org/webt/-r/y7/uy/-ry7uy6gnjyp02kyy94ikb8prde.png"><br><br> å¯¹äºè¿™ç§æƒ…å†µï¼Œå­˜åœ¨ä¸€ä¸ªå®ä½“ElementsCollectionã€‚ åœ¨å®ƒçš„å¸®åŠ©ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨åˆ—è¡¨ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContributorsPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//ol[contains(@class, 'contrib-data')]//li[contains(@class, 'contrib-person')]"</span></span>) <span class="hljs-function"><span class="hljs-function">ElementsCollection&lt;RepositoryCard&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hovercards</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br> ç”¨æ³•ï¼š <br><br><pre> <code class="java hljs">onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">4</span></span>));</code> </pre><br> ä¹Ÿå¯ä»¥è¿‡æ»¤å…ƒç´ å¹¶å°†å…¶è½¬æ¢ä¸ºå…¶ä»–ç±»å‹çš„åˆ—è¡¨ã€‚ <br><br>  <b>æ™ºèƒ½æ–­è¨€</b> <br><br> å¦‚å‰æ‰€è¿°ï¼Œ <b>AtlasWebElement</b>å’Œ<b>AtlasMobileElementå®ä½“</b>ä½¿ç”¨shouldï¼ŒwaitUntilæ–¹æ³•æ¥å¤„ç†æ£€æŸ¥ï¼ˆè¯­å¥ï¼‰ã€‚ <br><br><div class="scrollable-table"><table><tbody><tr><th> æ–¹æ³• </th><th> å†…å®¹æè¿° </th></tr><tr><td> åº”è¯¥ï¼ˆ...ï¼‰ </td><td> ä½¿ç”¨ä¸€ä¸ªå…ƒç´ æ‰§è¡Œå„ç§è¯­å¥ï¼ˆæ£€æŸ¥ï¼‰ã€‚ å¼•å‘<b>AssertionError</b> </td></tr><tr><td>  waitUntilï¼ˆ...ï¼‰ </td><td> ä½¿ç”¨ä¸€ä¸ªå…ƒç´ æ‰§è¡Œå„ç§è¯­å¥ï¼ˆæ£€æŸ¥ï¼‰ã€‚  <b>å¼•å‘RuntimeException</b> </td></tr></tbody></table></div><br> ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ ä¸ºäº†èŠ‚çœåˆ†æè‡ªåŠ¨åŒ–è„šæœ¬çš„è¿è¡ŒæŠ¥å‘Šæ—¶çš„æ—¶é—´ã€‚ å¤§å¤šæ•°åŠŸèƒ½æ£€æŸ¥éƒ½åœ¨è„šæœ¬çš„æœ«å°¾æ‰§è¡Œï¼šåŠŸèƒ½æµ‹è¯•ä¸“å®¶ä¼šæ„Ÿå…´è¶£ï¼Œè€Œè‡ªåŠ¨åŒ–æµ‹è¯•ä¸“å®¶ä¼šè¿›è¡Œä¸­é—´æ£€æŸ¥ã€‚ å› æ­¤ï¼Œå¦‚æœäº§å“çš„åŠŸèƒ½ä¸èµ·ä½œç”¨ï¼Œåˆ™é€»è¾‘ä¸ŠæŠ›å‡ºAssumptionErrorå¼‚å¸¸ï¼Œå¦åˆ™æŠ›å‡ºRuntimeExceptionã€‚ <br><br><img src="https://habrastorage.org/webt/fx/ry/lh/fxrylhza6j8ng2c8hawoaniixvc.png"><br><br><img src="https://habrastorage.org/webt/x3/jh/qv/x3jhqvyysqmclcpoe7recbi8tim.png"><br><br> åœ¨Allureä¸­ï¼Œå°†ç«‹å³çœ‹åˆ°æˆ‘ä»¬æ­£åœ¨å¤„ç†ä»€ä¹ˆï¼šè¦ä¹ˆæˆ‘ä»¬å­˜åœ¨äº§å“ç¼ºé™·ï¼ˆFTä¸“å®¶æ¥æ›¿äº†å·¥ä½œï¼‰ï¼Œè¦ä¹ˆè‡ªåŠ¨æµ‹è¯•å‘ç”Ÿäº†æ•…éšœï¼ˆATä¸“å®¶ç†è§£ï¼‰ã€‚ <br><br>  <b>æ‰©å±•æ¨¡å‹</b> <br><br><img src="https://habrastorage.org/webt/nr/re/tj/nrretjnxyedry2guei6w0p1opqa.png"><br><br> ç”¨æˆ·æœ‰æœºä¼šé‡æ–°å®šä¹‰å·¥å…·çš„åŸºæœ¬åŠŸèƒ½æˆ–å®ç°è‡ªå·±çš„åŠŸèƒ½ã€‚  Atlasæ‰©å±•æ¨¡å‹ç±»ä¼¼äºJUnit 5æ‰©å±•æ¨¡å‹ï¼Œatlas-webdriverå’Œatlas-appiumæ¨¡å—æ˜¯åŸºäºæ‰©å±•æ„å»ºçš„ã€‚ å¦‚æœæ‚¨æœ‰å…´è¶£ï¼Œè¯·æŸ¥çœ‹æºä»£ç ã€‚ <br><br> è®©æˆ‘ä»¬ç ”ç©¶ä¸€ä¸ªæŠ½è±¡çš„ç¤ºä¾‹ï¼šéœ€è¦ä¸ºInternet Explorer 11å¼€å‘UIæµ‹è¯•ï¼ˆåœ¨æŸäº›åœ°æ–¹ä»åœ¨ä½¿ç”¨ï¼‰ã€‚ æœ‰æ—¶ï¼Œæ ‡å‡†å•å‡»å…ƒç´ ä¸èµ·ä½œç”¨ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨JSå•å‡»ã€‚ æ‚¨å†³å®šæš‚æ—¶æ›¿ä»£å¯¹æ•´ä¸ªæµ‹è¯•é¡¹ç›®çš„å•å‡»ã€‚ <br><br><pre> <code class="java hljs">onMainPage().header().button(<span class="hljs-string"><span class="hljs-string">"en"</span></span>).click();</code> </pre><br> æ€ä¹ˆåšï¼Ÿ <br><br> åˆ›å»ºä¸€ä¸ªå®ç°MethodExtensionæ¥å£çš„æ‰©å±•ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JSClickExt</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MethodExtension</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object proxy, MethodInfo methodInfo, Configuration config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> WebDriver driver = config.getContext(WebDriverContext.class) .orElseThrow(() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AtlasException(<span class="hljs-string"><span class="hljs-string">"Context doesn't exist"</span></span>)).getValue(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript(<span class="hljs-string"><span class="hljs-string">"arguments[0].click();"</span></span>, proxy); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> proxy; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Method method)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> method.getName().equals(<span class="hljs-string"><span class="hljs-string">"click"</span></span>); } }</code> </pre><br> æˆ‘ä»¬é‡æ–°å®šä¹‰äº†ä¸¤ç§æ–¹æ³•ã€‚ åœ¨testï¼ˆï¼‰æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šæˆ‘ä»¬è¦†ç›–clickæ–¹æ³•ã€‚  invokeæ–¹æ³•å®ç°æ‰€éœ€çš„é€»è¾‘ã€‚ ç°åœ¨ï¼Œå•å‡»å…ƒç´ å°†é€šè¿‡JavaScriptè¿›è¡Œã€‚ <br><br> æˆ‘ä»¬æŒ‰ä»¥ä¸‹æ–¹å¼è¿æ¥æ‰©å±•ï¼š <br><br><pre> <code class="java hljs">atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver, <span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>)) .extension(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JSClickExt());</code> </pre><br> å€ŸåŠ©æ‰©å±•ï¼Œå¯ä»¥æœç´¢æ•°æ®åº“ä¸­å…ƒç´ çš„å®šä½ç¬¦å¹¶å®ç°å…¶ä»–æœ‰è¶£çš„åŠŸèƒ½-è¿™ä¸€åˆ‡éƒ½å–å†³äºæ‚¨çš„æƒ³è±¡åŠ›å’Œéœ€æ±‚ã€‚ <br><br>  <b>PageObjectsï¼ˆWebSiteï¼‰çš„å•ä¸ªå…¥å£ç‚¹</b> <br><br> è¯¥å·¥å…·ä½¿æ‚¨å¯ä»¥å°†æ‰€æœ‰é¡µé¢å­˜å‚¨åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¹¶ä¸”å°†æ¥åªèƒ½é€šè¿‡Siteå®ä½“è¿›è¡Œå·¥ä½œã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GitHubSite</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebSite</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Page</span></span> <span class="hljs-function"><span class="hljs-function">MainPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMainPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span>(url = <span class="hljs-string"><span class="hljs-string">"search"</span></span>) <span class="hljs-function"><span class="hljs-function">SearchPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSearchPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Query(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"q"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span>(url = <span class="hljs-string"><span class="hljs-string">"{profile}/{project}/tree/master/"</span></span>) <span class="hljs-function"><span class="hljs-function">ProjectPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onProjectPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Path(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"profile"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String profile, @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Path</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"project"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String project)</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span> <span class="hljs-function"><span class="hljs-function">ContributorsPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onContributorsPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br> æ­¤å¤–ï¼ŒPageå¯ä»¥è®¾ç½®å¿«é€Ÿurlï¼ŒæŸ¥è¯¢å‚æ•°å’Œè·¯å¾„æ®µã€‚ <br><br><pre> <code class="java hljs">onSite().onProjectPage(<span class="hljs-string"><span class="hljs-string">"qameta"</span></span>, <span class="hljs-string"><span class="hljs-string">"atlas"</span></span>).contributors().click();</code> </pre><br> ä¸Šé¢çš„è¡ŒåŒ…å«ä¸¤ä¸ªè·¯å¾„æ®µï¼ˆqametaå’Œatlasï¼‰ï¼Œå®ƒä»¬è½¬æ¢ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github.com/qameta/atlas/tree/master</a> ã€‚ è¿™ç§æ–¹æ³•çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å¯ä»¥ç«‹å³æ‰“å¼€æ‰€éœ€é¡µé¢ï¼Œè€Œæ— éœ€å•å‡»å®ƒã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usePathWebSiteTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onSite().onProjectPage(<span class="hljs-string"><span class="hljs-string">"qameta"</span></span>, <span class="hljs-string"><span class="hljs-string">"atlas"</span></span>).contributors().click(); onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">4</span></span>)); }</code> </pre><br>  <b>ä½¿ç”¨ç§»åŠ¨å…ƒç´ </b> <br><br> ä½¿ç”¨ç§»åŠ¨å…ƒç´ ï¼ˆAtlasMobileElementï¼‰ç±»ä¼¼äºä½¿ç”¨AtlasWebElement Webå…ƒç´ ã€‚ æ­¤å¤–ï¼Œå‘AtlasMobileElementæ·»åŠ äº†ä¸‰ç§æ–¹æ³•ï¼šå‘ä¸Š/å‘ä¸‹æ»šåŠ¨å±å¹•ï¼ˆscrollUp / scrollDownï¼‰å¹¶å•å‡»å…·æœ‰ä¿æŒçŠ¶æ€çš„é¡¹ç›®ï¼ˆlongPressï¼‰ã€‚ <br><br> è®©æˆ‘ç»™æ‚¨ä¸€ä¸ªWikipediaåº”ç”¨ç¨‹åºä¸»å±å¹•çš„ç¤ºä¾‹ã€‚ é’ˆå¯¹iOSå¹³å°å’ŒAndroidéƒ½æè¿°äº†ä¸€ä¸ªå…ƒç´ ã€‚ å®ƒä»¬è¿˜æè¿°äº†å‚æ•°åŒ–æŒ‰é’®ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Retry</span></span>(timeout = <span class="hljs-number"><span class="hljs-number">20_000L</span></span>, polling = <span class="hljs-number"><span class="hljs-number">2000L</span></span>) <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//XCUIElementTypeSearchField[@name='Search Wikipedia']"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AndroidFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//*[contains(@text, 'Search Wikipedia')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchWikipedia</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(id = <span class="hljs-string"><span class="hljs-string">"{{ value }}"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">button</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; }</code> </pre><br> æµ‹è¯•çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleExample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainScreen().searchWikipedia().click(); onSearchScreen().search().sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>); onSearchScreen().item(<span class="hljs-string"><span class="hljs-string">"Atlas LV-3B"</span></span>).swipeDownOn().click(); onArticleScreen().articleTitle().should(allOf(displayed(), text(<span class="hljs-string"><span class="hljs-string">"Atlas LV-3B"</span></span>))); }</code> </pre><br> åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ‰“å¼€Wikipediaä¸»é¡µï¼Œå•å‡»æœç´¢æ ï¼Œè¾“å…¥Atlasæ–‡æœ¬ï¼Œç„¶åæ»šåŠ¨åˆ°å€¼ä¸ºAtlas LV-3Bçš„åˆ—è¡¨é¡¹å¹¶è¿›å…¥å…¶è§†å›¾ã€‚ æœ€åä¸€è¡Œæ£€æŸ¥æ ‡é¢˜æ˜¯å¦æ˜¾ç¤ºå¹¶åŒ…å«æ‰€éœ€çš„å€¼ã€‚ <br><br>  <b>å¬ä¼—</b> <br><br> å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„ä¾¦å¬å™¨ï¼ˆä¾¦å¬å™¨æ¥å£ï¼‰å®ç°äº‹ä»¶æ—¥å¿—è®°å½•ã€‚ æ¯ä¸ªæ–¹æ³•åœ¨è°ƒç”¨æ—¶éƒ½æœ‰å››ä¸ªäº‹ä»¶ï¼š <b>Before</b> ï¼Œ <b>Pass</b> ï¼Œ <b>Fail</b> ã€‚  <b>ä¹‹å</b> ã€‚ <br><br><img src="https://habrastorage.org/webt/vf/to/ku/vftokukrzuynpobt2yjtulqy2g8.png"><br><br> ä½¿ç”¨æ­¤ç•Œé¢ï¼Œæ‚¨å¯ä»¥ç»„ç»‡æŠ¥å‘Šã€‚ ä»¥ä¸‹æ˜¯â€œé­…åŠ›ç›‘å¬å™¨â€çš„ç¤ºä¾‹ï¼Œå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥</a>ä¸Šæ‰¾åˆ°ã€‚ <br><br><img src="https://habrastorage.org/webt/x3/fo/3c/x3fo3cmcfe7beqygkorupy3ngxo.png"><br><br> æ¥ä¸‹æ¥ï¼Œåœ¨åˆå§‹åŒ–Atlasç±»æ—¶è¿æ¥ä¾¦å¬å™¨ã€‚ <br><br><pre> <code class="java hljs">atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)).listener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AllureListener());</code> </pre><br><br> ä»¥ä¸Šè¿°æ–¹å¼ï¼Œå¯ä»¥ä¸ºå„ç§æŠ¥å‘Šç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼ŒReportPortalï¼‰åˆ›å»ºä¸€ä¸ªä¾¦å¬å™¨ã€‚ <br><br><h2> è¿æ¥æ–¹å¼ </h2><br><br> è¦ä½¿UI Webè‡ªåŠ¨åŒ–ï¼Œåªéœ€æ³¨å†Œatlas-webdriverä¾èµ–é¡¹å¹¶æŒ‡å‡ºæœ€æ–°çš„ç‰ˆæœ¬å³å¯ï¼ˆåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œç›¸å…³çš„ç‰ˆæœ¬ä¸º1.6.0ï¼‰ã€‚ <br><br>  Mavenï¼š <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>io.qameta.atlas<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>atlas-webdriver<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${atlas.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br> æ‘‡ç¯®ï¼š <br><pre> <code class="java hljs">dependencies { ompile <span class="hljs-string"><span class="hljs-string">'io.qameta.atlas:atlas-webdriver:1.+'</span></span> }</code> </pre><br><br> å¦‚æœæ‚¨è¦ä½¿UI Mobileè‡ªåŠ¨åŒ–ï¼Œæˆ‘ä»¬ä¼šåšåŒæ ·çš„äº‹æƒ…ã€‚ <br><br>  Mavenï¼š <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>io.qameta.atlas<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>atlas-appium<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${atlas.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br> æ‘‡ç¯®ï¼š <br><pre> <code class="java hljs">dependencies { ompile <span class="hljs-string"><span class="hljs-string">'io.qameta.atlas:atlas-appium:1.+'</span></span> }</code> </pre><br><br><h2> ä½¿ç”¨æ–¹æ³• </h2><br><br> å°†ä¾èµ–é¡¹æ·»åŠ åˆ°é¡¹ç›®åï¼Œå¿…é¡»åˆå§‹åŒ–Atlasç±»å®ä¾‹ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startDriver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChromeDriver(); atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)); }</code> </pre><br> æˆ‘ä»¬å°†é…ç½®å®ä¾‹ä»¥åŠé©±åŠ¨ç¨‹åºä¼ é€’ç»™Atlasæ„é€ å‡½æ•°ã€‚ <br><br> å½“å‰æœ‰ä¸¤ç§é…ç½®ï¼šWebDriverConfigurationå’ŒAppiumDriverConfigurationã€‚ æ¯ä¸ªé…ç½®éƒ½åŒ…å«ç‰¹å®šçš„é»˜è®¤æ‰©å±•åã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå°†åˆ›å»ºæ‰€æœ‰PageObjectçš„æ–¹æ³•ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> &lt;T extends WebPage&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Class&lt;T&gt; page)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> atlas.create(driver, page); }</code> </pre><br><br> ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹çš„ä¾‹å­ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onPage(MainPage.class).open(<span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>); onPage(MainPage.class).header().searchInput().sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>); onPage(MainPage.class).header().searchInput().submit(); }</code> </pre><br> æˆ‘ä»¬æ‰“å¼€ç«™ç‚¹ï¼Œè½¬åˆ°æ ‡é¢˜å±‚ï¼Œåœ¨å…¶ä¸­æŸ¥æ‰¾æ–‡æœ¬å­—æ®µï¼ˆæœç´¢è¾“å…¥ï¼‰ï¼Œè¾“å…¥æ–‡æœ¬å¹¶æŒ‰Enterã€‚ <br><br><h2> æ€»ç»“ </h2><br> æœ€åï¼Œæˆ‘æƒ³æŒ‡å‡ºçš„æ˜¯ï¼ŒAtlasæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„çµæ´»å·¥å…·ã€‚ å¯ä»¥ä¸ºæ‚¨çš„å›¢é˜Ÿå’Œæ‚¨æ–¹ä¾¿çš„æ–¹å¼é’ˆå¯¹ç‰¹å®šçš„æµ‹è¯•é¡¹ç›®å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ã€‚ å¼€å‘è·¨å¹³å°æµ‹è¯•ç­‰ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æä¾›äº†Heisenbug</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Selenium Camp</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Nexign QA Meetup</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a>æŠ¥å‘Šè§†é¢‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç‰‡æ®µ</a> ã€‚ æœ‰ä¸€ä¸ªç”µæŠ¥èŠå¤©å®¤@atlashelpã€‚ <br><br> ä½¿ç”¨æ­¤å·¥å…·ï¼Œæ‚¨å¯ä»¥å‡å°‘å¤§é‡çš„ä»£ç è¡Œï¼ˆç”±Yandexï¼ŒSberTechå’ŒTinkoffç­‰å…¬å¸åœ¨é¡¹ç›®ä¸Šè¿›è¡Œè¿‡æµ‹è¯•ï¼‰ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN474408/">https://habr.com/ru/post/zh-CN474408/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN474396/index.html">æˆ´å°”å°†ä¸ºçŸ³æ²¹è¡Œä¸šç»„è£…å²ä¸Šæœ€å¼ºå¤§çš„å·¥ä¸šè¶…çº§è®¡ç®—æœº</a></li>
<li><a href="../zh-CN474400/index.html">å…³äºé¢œè‰²å¯¹æ¯”å¯ç”¨æ€§çš„ç¥è¯</a></li>
<li><a href="../zh-CN474402/index.html">Vavr Collections APIæŒ‡å—</a></li>
<li><a href="../zh-CN474404/index.html">åˆ†ææ¥è‡ªYandexï¼ˆå‰ç«¯å¼€å‘ï¼‰2019ç¼–ç¨‹å† å†›çš„å·²è§£å†³é—®é¢˜</a></li>
<li><a href="../zh-CN474406/index.html">BlueKeepé¦–æ¬¡åœ¨é‡å¤–éœ²é¢</a></li>
<li><a href="../zh-CN474414/index.html">æˆ‘ä»¬ç¼–å†™è‡ªå·±çš„ä½“ç´ å¼•æ“</a></li>
<li><a href="../zh-CN474418/index.html">DEFCON Conference27ã€‚å—ç›ŠäºmacOSçš„é»‘å®¢äº§å“ã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN474420/index.html">æ’æ¸©å™¨å½¢æˆï¼šå¦‚ä½•å‘ç”Ÿ</a></li>
<li><a href="../zh-CN474422/index.html">å¼•äººå…¥èƒœçš„å¼€æ”¾æºä»£ç å¹³å°ï¼Œç”¨äºå¼€å‘ç§»åŠ¨åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN474424/index.html">æ··åˆè®­ç»ƒ-å®ƒæ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¦‚ä½•å·¥ä½œ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>